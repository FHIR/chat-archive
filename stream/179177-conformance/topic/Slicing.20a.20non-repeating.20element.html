---
layout: page
title: "FHIR Chat  · Slicing a non-repeating element · conformance"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/index.html">conformance</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html">Slicing a non-repeating element</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="165886609"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/165886609" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pieter Edelman <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#165886609">(May 17 2019 at 09:54)</a>:</h4>
<p>Hi all,</p>
<p>The FHIR documentation <a href="https://www.hl7.org/fhir/profiling.html#slicing" target="_blank" title="https://www.hl7.org/fhir/profiling.html#slicing">states</a>: "One common feature of constraining StructureDefinitions is to take an element that may occur more than once (e.g. in a list), and then split the list into a series of sub-lists [...]  this operation is known as "Slicing" a list". This seems to imply that slicing is only allowed for elements with a cardinality &gt; 1. Indeed, the Java validator complains about "Attempt to a slice an element that does not repeat" when slicing an element with cardinality 0..1 or 1..1.</p>
<p>Is this really the case? And if it is, why? There are many use cases where you want to say: "this element may occur just once, but when you do, you may choose from one of these types/coding systems/etc". This can be done quite naturally with slicing and the slicing cardinality rules <a href="https://www.hl7.org/fhir/profiling.html#slice-cardinality" target="_blank" title="https://www.hl7.org/fhir/profiling.html#slice-cardinality">seem perfectly happy with this</a>.</p>



<a name="165887017"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/165887017" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marten Smits <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#165887017">(May 17 2019 at 10:01)</a>:</h4>
<p>Hi Pieter, <br>
This topic has been discussed before here: <a href="#narrow/stream/179166-implementers/topic/Slicing.20non-repeating.20elements.20to.20define.20a.20choice" title="#narrow/stream/179166-implementers/topic/Slicing.20non-repeating.20elements.20to.20define.20a.20choice">https://chat.fhir.org/#narrow/stream/179166-implementers/topic/Slicing.20non-repeating.20elements.20to.20define.20a.20choice</a><br>
I don't know what the status of this is though. <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> ??</p>



<a name="165887147"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/165887147" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pieter Edelman <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#165887147">(May 17 2019 at 10:03)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="191334">@Marten Smits</span> , thanks for the pointer ... for some reason it didn't show up when I searched the discussions with exactly these search terms.</p>



<a name="165889490"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/165889490" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Henket <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#165889490">(May 17 2019 at 10:45)</a>:</h4>
<p>Question is: is this still accurate, since it's a discussion from 2017 and Grahames last remark is that he's going to work on it....</p>



<a name="165941526"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/165941526" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#165941526">(May 17 2019 at 22:22)</a>:</h4>
<p>I think it's all done an implemented</p>



<a name="166075660"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/166075660" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#166075660">(May 20 2019 at 11:07)</a>:</h4>
<p>The .NET API implementation and Forge certainly support this, exactly for the mentioned use case, to define type-specific constraints for a non-repeating choice type element.</p>



<a name="166075677"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/166075677" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#166075677">(May 20 2019 at 11:07)</a>:</h4>
<p>In other words, slicing applies to list elements and choice type elements.</p>



<a name="166075684"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/166075684" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#166075684">(May 20 2019 at 11:07)</a>:</h4>
<p>so the java stuff used to, right up until you guys convinced me not to</p>



<a name="166076010"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/166076010" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#166076010">(May 20 2019 at 11:12)</a>:</h4>
<p>We did...? Forge STU3 has supported type slicing on choice type elements for a long time. Differential allows for a shorthand notation (w/o slicing introduction), but type slices are always fully expanded in the snapshot.</p>



<a name="166076055"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/166076055" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#166076055">(May 20 2019 at 11:13)</a>:</h4>
<p>evening decision in Jan meeting last year, leading to this paragraph:</p>



<a name="166076121"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/166076121" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#166076121">(May 20 2019 at 11:14)</a>:</h4>
<p><a href="http://build.fhir.org/elementdefinition.html#typesx" target="_blank" title="http://build.fhir.org/elementdefinition.html#typesx">http://build.fhir.org/elementdefinition.html#typesx</a></p>



<a name="166249522"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/166249522" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#166249522">(May 22 2019 at 09:05)</a>:</h4>
<p>That paragraph describes the behavior/interpretation of constraints on choice type elements, however it is silent about slicing. Does this section (2.30.0.4.2) intend to imply that slicing is actually forbidden for choice type elements? Because I interpreted the new R4 behavior as a (compatible) extension to existing behavior in STU3.</p>
<p>Currently, Forge R4 allows users to author type-specific constraints for a choice type element, by toggling the original choice type ("[x]") element into "slicing mode". The application then auto-initializes the slicing discriminator for a type slice to the default value <code>{ type = "type", path = "$this" }</code>. The default slicing component is excluded from the generated differential (redundant), but included in the generated snapshot.<br>
The user can then add one or more named slices to specify type-specific constraints. If a named slice is constrained to a single type, then the element is renamed by replacing the "[x]" suffix with the type name, and the sliceName is initialized from the element name. Theoretically, it is even possible to introduce a named slice that applies to multiple types (subset of the original type list); such an element constraint is not renamed, but still recognizable by means of the (custom, author-assigned) slice name.</p>
<p>Allowing slicing on choice types:</p>
<ul>
<li>allows the user to further constrain the default slicing discriminator, e.g. by adding additional terms to the discriminator </li>
<li>Uniquely identifies constraints for specific (sets of) types, because the associated constraints (must) specify a slice name</li>
<li>Naturally extends existing behavior as defined in STU3</li>
<li>Does not bloat the differential component for common cases</li>
</ul>



<a name="166302786"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/166302786" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#166302786">(May 22 2019 at 19:45)</a>:</h4>
<p>I understood it to be replacement behavior when we discussed it i the evening session and agreed to it in committee. <span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> <span class="user-mention" data-user-id="191328">@Ewout Kramer</span> <span class="user-mention" data-user-id="191351">@Chris Grenz</span>  where there too in the evening session - can't remember who else was.</p>



<a name="166303280"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/166303280" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#166303280">(May 22 2019 at 19:51)</a>:</h4>
<p>I had actually thought there would still be slicing, but have adapted to the fact there wasn't.</p>



<a name="166307867"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/166307867" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#166307867">(May 22 2019 at 20:46)</a>:</h4>
<p>Today I learned something.   I am also still slicing value[x] to apply constraints on specific types in the choice.  Good to know.  I have a slightly related question on this:</p>
<blockquote>
<p>Constraints limiting the acceptable list of types must be applied to the original "[x]" element as this is where the list of acceptable types is defined</p>
</blockquote>
<p>If you are limiting it to a single allowed type (e.g., limit <code>value[x]</code> to <code>Quantity</code> only) must you keep <code>value[x]</code> on the id/path or can you change it to <code>valueQuantity</code>?  In the past, I've changed it; not sure if that's still valid.</p>



<a name="166309462"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/166309462" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#166309462">(May 22 2019 at 21:02)</a>:</h4>
<p>if the validator sees valueQuantity, it will apply any constraints found there to a Quantity, but if some other type is present, it will assume that this is ok, and the quantity constraints do not apply</p>



<a name="166356084"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/166356084" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#166356084">(May 23 2019 at 12:34)</a>:</h4>
<p>So for R4 choice type constraints, Forge does NOT include slicing discriminator in the differential (unless further constrained by the author). However the .NET snapshot generator for R4 currently expands choice type constraints to include the (implied) slicing component in the snapshot. Is that behavior wrong?</p>



<a name="166356941"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/166356941" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#166356941">(May 23 2019 at 12:47)</a>:</h4>
<p>BTW i do remember the evening session where we discussed R4 type slicing, especially</p>
<ul>
<li>allowing multiple type-specific constraints, and</li>
<li>allowing the (default, implied and therefore redundant) type slicing discriminator to be omitted from the differential.</li>
</ul>
<p>However I don't recall that we explicitly forbid (custom) discriminator on type slices? Also, I assumed that the <em>snapshot</em> component should still provide a full expansion of the slicing component. Seems to make sense, as this still introduces slicing into the profile and in general, validators then need access to the discriminator.</p>



<a name="166357071"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/166357071" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#166357071">(May 23 2019 at 12:49)</a>:</h4>
<p>Note that <a href="http://build.fhir.org/elementdefinition.html#typesx" target="_blank" title="http://build.fhir.org/elementdefinition.html#typesx">§2.30.0.4.2</a> does not mention anything about the slicing component.</p>



<a name="166357207"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/166357207" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#166357207">(May 23 2019 at 12:50)</a>:</h4>
<p>From <a href="http://build.fhir.org/profiling.html#discriminator" target="_blank" title="http://build.fhir.org/profiling.html#discriminator">§5.1.0.11 Discriminator</a>:</p>
<blockquote>
<p>type: Used to match slices based on the type of the item. While it can be used with polymorphic elements such as <code>Observation.value[x]</code>, ...</p>
</blockquote>



<a name="166492825"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/166492825" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#166492825">(May 24 2019 at 21:39)</a>:</h4>
<p>Clearly we have different recollections of the discussion that evening. I've asked FHIR-I to take it up on this weeks call</p>



<a name="166499521"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/166499521" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#166499521">(May 24 2019 at 23:48)</a>:</h4>
<p>There isn't scheduled to be a call Monday - due to the US holiday</p>



<a name="166500401"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/166500401" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#166500401">(May 25 2019 at 00:09)</a>:</h4>
<p>hmm. maybe devdays then</p>



<a name="166620973"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/166620973" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#166620973">(May 27 2019 at 09:15)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> Issue <a href="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=12259" target="_blank" title="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=12259">GF#12259</a> describes resolution for R4. I interpreted this as allowing for a shorthand notation (w/o explicit slicing), while still allowing the verbose form (with explicit slicing) and custom type slicing discriminators. Also see the first comment:</p>
<blockquote>
<p>Note- there is other reasons to use @type - retain the functionality.</p>
</blockquote>
<p>This GForge issue does not specifically mention rules for generating the snapshot. The .NET API snapshot generator for FHIR R4 currently always expands the full slicing introduction for all sliced elements, including type slicing and extensions.<br>
I guess this decision mainly affects implementations of FHIR validators, and also code/form generators. Removing verbosity from the snapshot shifts some responsibility to consuming logic, which must be capable to correctly interpret the shorthand notation.</p>



<a name="166851833"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/166851833" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#166851833">(May 29 2019 at 20:07)</a>:</h4>
<p>What's the outstanding question here <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> ? Can you change the discriminator at element[x]? No, it's already sliced. You could re-slice.</p>



<a name="167778571"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/167778571" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#167778571">(Jun 10 2019 at 17:33)</a>:</h4>
<p>ok. Sonara this evening (devdays)<br>
6:30 packaging and composition <br>
7:15 slicing and choice types</p>



<a name="167806685"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/167806685" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#167806685">(Jun 10 2019 at 23:48)</a>:</h4>
<p>I'll be there</p>



<a name="167838860"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/167838860" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#167838860">(Jun 11 2019 at 10:52)</a>:</h4>
<p>Outcomes from the discussion: </p>
<ul>
<li>we agreed that the specification failed to be clear</li>
<li>the task disposition is also not clear</li>
<li>we agreed that this is a serious problem that needs resolution ASAP </li>
<li>we didn't believe that there's convincing requirements for re-slicing in this case</li>
<li>there is the CDA problem (forgot to mention this last night) where elements do not have [x] in the name, but have a type choice, so can't be done by renaming? </li>
<li>the general feeling was the type slicing is more 'regular' with regard to snapshots</li>
<li>we noted one of Chris's original concerns that the path is ambiguous where you use slicing without renaming the slices </li>
<li>we ran out of time to resolve but we agree that we need to close it out this week</li>
</ul>



<a name="167888229"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/167888229" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Zautke <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#167888229">(Jun 11 2019 at 20:38)</a>:</h4>
<p>There are a few pop up sessions left tomorrow. Do we want to schedule another discussion?</p>



<a name="167888569"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/167888569" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#167888569">(Jun 11 2019 at 20:43)</a>:</h4>
<p>I think that would be good</p>



<a name="167888625"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/167888625" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#167888625">(Jun 11 2019 at 20:43)</a>:</h4>
<p>I can do the 11:05 session</p>



<a name="167892363"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/167892363" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Zautke <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#167892363">(Jun 11 2019 at 21:32)</a>:</h4>
<p>I scheduled the meeting</p>



<a name="167892405"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/167892405" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Zautke <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#167892405">(Jun 11 2019 at 21:33)</a>:</h4>
<p>Tomorrow 11:05 in Sonora</p>



<a name="167975569"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/167975569" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#167975569">(Jun 12 2019 at 18:45)</a>:</h4>
<p>Choices</p>
<p>1. no slicing on snapshots - renaming only<br>
2. renaming in differentials, slicing on snapshots<br>
3. renaming or slicing in differentials, slicing in snapshots</p>



<a name="167975586"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/167975586" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#167975586">(Jun 12 2019 at 18:45)</a>:</h4>
<p>decision  - #3</p>



<a name="167975607"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/167975607" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#167975607">(Jun 12 2019 at 18:45)</a>:</h4>
<p><span class="user-mention" data-user-id="191351">@Chris Grenz</span> <span class="user-mention" data-user-id="191328">@Ewout Kramer</span> is counting the minutes....</p>



<a name="168030544"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/168030544" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#168030544">(Jun 13 2019 at 09:58)</a>:</h4>
<p>Can you illustrate via an example?</p>



<a name="168037355"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/168037355" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#168037355">(Jun 13 2019 at 11:52)</a>:</h4>
<p><span class="user-mention" data-user-id="191328">@Ewout Kramer</span> 3:13 <span aria-label="grinning" class="emoji emoji-1f600" role="img" title="grinning">:grinning:</span></p>



<a name="168037368"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/168037368" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#168037368">(Jun 13 2019 at 11:52)</a>:</h4>
<p><span class="user-mention" data-user-id="191351">@Chris Grenz</span> the renaming syntax documented here:</p>



<a name="168037410"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/168037410" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#168037410">(Jun 13 2019 at 11:53)</a>:</h4>
<p><a href="http://hl7.org/fhir/elementdefinition.html#typesx" target="_blank" title="http://hl7.org/fhir/elementdefinition.html#typesx">http://hl7.org/fhir/elementdefinition.html#typesx</a></p>



<a name="168037493"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/168037493" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#168037493">(Jun 13 2019 at 11:54)</a>:</h4>
<p>will be treated as one optional way to do the differential. Or you can do classic @type based slicing. Either way, what goes in the snapshot will be classic type based slicing.</p>



<a name="168282933"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/168282933" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Townley-O&#x27;Neill <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#168282933">(Jun 17 2019 at 05:05)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> Do you expect the igpublisher to currently produce classic type based slicing in the snapshot?</p>



<a name="168282986"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/168282986" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#168282986">(Jun 17 2019 at 05:06)</a>:</h4>
<p>right now I don't know what it's going to do</p>



<a name="168283115"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/168283115" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Townley-O&#x27;Neill <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#168283115">(Jun 17 2019 at 05:07)</a>:</h4>
<p>HL7 AU has ingredient in differential with slicing and in snaphot without<br>
<a href="http://build.fhir.org/ig/hl7au/au-fhir-base/StructureDefinition-au-medication.html" target="_blank" title="http://build.fhir.org/ig/hl7au/au-fhir-base/StructureDefinition-au-medication.html">http://build.fhir.org/ig/hl7au/au-fhir-base/StructureDefinition-au-medication.html</a><br>
<a href="http://build.fhir.org/ig/hl7au/au-fhir-base/StructureDefinition-au-medication.html#tabs-snap" target="_blank" title="http://build.fhir.org/ig/hl7au/au-fhir-base/StructureDefinition-au-medication.html#tabs-snap">http://build.fhir.org/ig/hl7au/au-fhir-base/StructureDefinition-au-medication.html#tabs-snap</a></p>



<a name="168283662"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/168283662" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#168283662">(Jun 17 2019 at 05:23)</a>:</h4>
<p>well, right now, we're just broken on here due to confusion between the various tool smiths. I think we sorted it out last week, but it will be some time before we get all aligned</p>



<a name="168283707"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/168283707" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Townley-O&#x27;Neill <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#168283707">(Jun 17 2019 at 05:24)</a>:</h4>
<p>Thanks. I wanted to check my understanding. Things will get better.  <span aria-label="grinning" class="emoji emoji-1f600" role="img" title="grinning">:grinning:</span></p>



<a name="168808294"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/168808294" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#168808294">(Jun 23 2019 at 21:08)</a>:</h4>
<p>ok. so. here's my test cases</p>



<a name="168808304"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/168808304" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#168808304">(Jun 23 2019 at 21:09)</a>:</h4>
<p><a href="/user_uploads/10155/POHU3cpB70us_v4aypRwnOyh/choice-slicing-tests.xml" target="_blank" title="choice-slicing-tests.xml">choice-slicing-tests.xml</a></p>



<a name="168808360"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/168808360" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#168808360">(Jun 23 2019 at 21:11)</a>:</h4>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> <span class="user-mention" data-user-id="191336">@Michel Rutten</span> <span class="user-mention" data-user-id="191328">@Ewout Kramer</span> please check that these differentials represent the right set of test cases. For the latter tests, the snapshot output should the same (43/44 &amp; 45/46)</p>



<a name="168809317"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/168809317" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#168809317">(Jun 23 2019 at 21:43)</a>:</h4>
<p>I get a bad document error when I click the link</p>



<a name="168809488"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/168809488" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#168809488">(Jun 23 2019 at 21:49)</a>:</h4>
<p>open it in a text editor - it's not valid xml</p>



<a name="168809499"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/168809499" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#168809499">(Jun 23 2019 at 21:49)</a>:</h4>
<p>there's multiple root elements</p>



<a name="168812302"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/168812302" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#168812302">(Jun 23 2019 at 23:23)</a>:</h4>
<p>I mean just clicking the link in zulip.  Tried opening in spy and link didn't resolve</p>



<a name="168814624"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/168814624" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#168814624">(Jun 24 2019 at 00:44)</a>:</h4>
<p>So there are no magic slice names?  I think there should be.  Otherwise when constraining downstream slices by name, the behavior will be different whether an element is named "x.value[x]" (where the slice name is manually assigned) vs. "x.valueCodeableConcept" (were the slice name will be auto-generated)</p>



<a name="168814627"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/168814627" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#168814627">(Jun 24 2019 at 00:44)</a>:</h4>
<p>(I was able to get the file by just downloading it.)</p>



<a name="168814631"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/168814631" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#168814631">(Jun 24 2019 at 00:44)</a>:</h4>
<p>Other than that, I saw no issues.</p>



<a name="168838434"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/168838434" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#168838434">(Jun 24 2019 at 10:39)</a>:</h4>
<p>I don't know what you mean by magic slice names. It's not ringing a bell for me</p>



<a name="168838595"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/168838595" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#168838595">(Jun 24 2019 at 10:42)</a>:</h4>
<p>You had slicenames of "codeable" and "quantity".  I thought we'd agreed to use "CodeableConcept" and "Quantity".  I.e. The sliceName would exactly match the type name if we were doing  type-based slicing on a polymorphic element.</p>



<a name="168839110"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/168839110" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#168839110">(Jun 24 2019 at 10:53)</a>:</h4>
<p>I don't recall any such agreement? is this written down anywhere?</p>



<a name="168839315"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/168839315" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#168839315">(Jun 24 2019 at 10:57)</a>:</h4>
<p>Not written down.  I just recall it as a verbal discussion.  Key question is as follows:<br>
- If you use the shortcut, then behind the scenes the code's going to inject a slice name.  That slicename will be algorithmicly determined.  If we allow those who don't use the shortcut to manually define an arbitrary slice name that's different from the algorithmicly determined slice name, is that inconsistency going to cause issues?</p>
<p>My concern is that someone who switches from shortcut to full expression or vice-versa could break downstream models (that are constraining slices).  I don't think that should happen.</p>



<a name="168840246"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/168840246" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#168840246">(Jun 24 2019 at 11:13)</a>:</h4>
<p>I don't recall the discussion. I agree that changing the slicing could impact downstream slicing, but that's true of any change to the slicing...</p>



<a name="168862717"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/168862717" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#168862717">(Jun 24 2019 at 16:08)</a>:</h4>
<p>Changing shortcut to/from non- shortcut is a representation change, not a content change.  Furthermore, it could be tooling-driven.  One tool might save using the shortcut.  Another might not.  You don't want switching tools in the parent model to break child models.</p>



<a name="168862743"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/168862743" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#168862743">(Jun 24 2019 at 16:09)</a>:</h4>
<p>Do you see a  problem with enforcing standard slice names for this case?</p>



<a name="169677708"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/169677708" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#169677708">(Jul 05 2019 at 00:41)</a>:</h4>
<p>well, that depends. I'm ok with generating standard names, but should the snapshot generator reject other names?</p>



<a name="169678804"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/169678804" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#169678804">(Jul 05 2019 at 01:19)</a>:</h4>
<p>I think it should.  There's no good reason to have inconsistency and having it creates pain</p>



<a name="169681024"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/169681024" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#169681024">(Jul 05 2019 at 02:33)</a>:</h4>
<p>we don't do that anywhere else. that would imply Forge should force consistent names too, at least here. <span class="user-mention" data-user-id="191336">@Michel Rutten</span></p>



<a name="169710644"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/169710644" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#169710644">(Jul 05 2019 at 13:59)</a>:</h4>
<p>We don't have shortcuts that allow generation of names anywhere else...</p>



<a name="169784941"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/169784941" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#169784941">(Jul 06 2019 at 22:24)</a>:</h4>
<p>ok. updated the tests at <a href="https://github.com/hapifhir/org.hl7.fhir.core/blob/master/org.hl7.fhir.r5/src/main/resources/snapshot-generation-tests.xml" target="_blank" title="https://github.com/hapifhir/org.hl7.fhir.core/blob/master/org.hl7.fhir.r5/src/main/resources/snapshot-generation-tests.xml">https://github.com/hapifhir/org.hl7.fhir.core/blob/master/org.hl7.fhir.r5/src/main/resources/snapshot-generation-tests.xml</a>. I still have to write the assertions for Tests 45 &amp; 46, but <span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> please check the assertions for 43/44 first</p>



<a name="169784945"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/169784945" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#169784945">(Jul 06 2019 at 22:24)</a>:</h4>
<p>40 - 42 pass. 43/44 fail until I update the snapshot generation.</p>



<a name="169784950"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/169784950" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#169784950">(Jul 06 2019 at 22:25)</a>:</h4>
<p><span class="user-mention" data-user-id="191336">@Michel Rutten</span> please check these as well</p>



<a name="169850217"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/169850217" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#169850217">(Jul 08 2019 at 08:30)</a>:</h4>
<p><span class="user-mention" data-user-id="191336">@Michel Rutten</span> has been on holidays for the past two weeks, so I am sure he'll be in the mood and eager to pick this up this week ;-)</p>



<a name="170887518"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/170887518" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#170887518">(Jul 15 2019 at 12:27)</a>:</h4>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> getting to this... it means that tests 5 and 6 are also broken too.</p>



<a name="170887540"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/170887540" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#170887540">(Jul 15 2019 at 12:28)</a>:</h4>
<p>Will check in a fix for what I think they should be</p>



<a name="170887578"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/170887578" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#170887578">(Jul 15 2019 at 12:28)</a>:</h4>
<p>in fact, I think that T6 doesn't make any sense any more:</p>



<a name="170887581"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/170887581" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#170887581">(Jul 15 2019 at 12:28)</a>:</h4>
<div class="codehilite"><pre><span></span>    <span class="nt">&lt;StructureDefinition&gt;</span>
      <span class="nt">&lt;id</span> <span class="na">value=</span><span class="s">&quot;t6&quot;</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;url</span> <span class="na">value=</span><span class="s">&quot;urn:uuid:977f7fee-448e-4090-8c3a-441b3b3cca7a&quot;</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;name</span> <span class="na">value=</span><span class="s">&quot;t6&quot;</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;status</span> <span class="na">value=</span><span class="s">&quot;draft&quot;</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;description</span> <span class="na">value=</span><span class="s">&quot;fixture for #6: type narrowing #2 - this renames  the type element&quot;</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;kind</span> <span class="na">value=</span><span class="s">&quot;resource&quot;</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;abstract</span> <span class="na">value=</span><span class="s">&quot;false&quot;</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;type</span> <span class="na">value=</span><span class="s">&quot;Patient&quot;</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;baseDefinition</span> <span class="na">value=</span><span class="s">&quot;http://hl7.org/fhir/StructureDefinition/Patient&quot;</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;derivation</span> <span class="na">value=</span><span class="s">&quot;constraint&quot;</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;differential&gt;</span>
        <span class="nt">&lt;element&gt;</span>
          <span class="nt">&lt;path</span> <span class="na">value=</span><span class="s">&quot;Patient.deceasedDateTime&quot;</span><span class="nt">/&gt;</span>
          <span class="nt">&lt;type&gt;</span>
            <span class="nt">&lt;code</span> <span class="na">value=</span><span class="s">&quot;dateTime&quot;</span><span class="nt">/&gt;</span>
          <span class="nt">&lt;/type&gt;</span>
        <span class="nt">&lt;/element&gt;</span>
      <span class="nt">&lt;/differential&gt;</span>
    <span class="nt">&lt;/StructureDefinition&gt;</span>
</pre></div>



<a name="170887589"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/170887589" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#170887589">(Jul 15 2019 at 12:29)</a>:</h4>
<p>that's a null statement, I think</p>



<a name="170887601"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/170887601" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#170887601">(Jul 15 2019 at 12:29)</a>:</h4>
<p><span class="user-mention" data-user-id="191336">@Michel Rutten</span> have you looked at this thread?</p>



<a name="170893992"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/170893992" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#170893992">(Jul 15 2019 at 13:46)</a>:</h4>
<p>the last question leads me to a related question:</p>



<a name="170894030"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/170894030" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#170894030">(Jul 15 2019 at 13:46)</a>:</h4>
<p>Do these 2 xml fragments have the same meaning?</p>



<a name="170894031"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/170894031" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#170894031">(Jul 15 2019 at 13:46)</a>:</h4>
<div class="codehilite"><pre><span></span>    <span class="nt">&lt;StructureDefinition&gt;</span>
      <span class="nt">&lt;id</span> <span class="na">value=</span><span class="s">&quot;t44&quot;</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;url</span> <span class="na">value=</span><span class="s">&quot;urn:uuid:ecb6f563-2957-4da8-832e-cb6d94329a93&quot;</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;name</span> <span class="na">value=</span><span class="s">&quot;t44&quot;</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;status</span> <span class="na">value=</span><span class="s">&quot;draft&quot;</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;description</span> <span class="na">value=</span><span class="s">&quot;fixture for #44: Choice Types: constrain list of choices to 1 and constrain the type (shortcut)&quot;</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;kind</span> <span class="na">value=</span><span class="s">&quot;resource&quot;</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;abstract</span> <span class="na">value=</span><span class="s">&quot;false&quot;</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;type</span> <span class="na">value=</span><span class="s">&quot;Observation&quot;</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;baseDefinition</span> <span class="na">value=</span><span class="s">&quot;http://hl7.org/fhir/StructureDefinition/Observation&quot;</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;derivation</span> <span class="na">value=</span><span class="s">&quot;constraint&quot;</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;differential&gt;</span>
        <span class="nt">&lt;element&gt;</span>
          <span class="nt">&lt;path</span> <span class="na">value=</span><span class="s">&quot;Observation&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/element&gt;</span>
        <span class="nt">&lt;element&gt;</span>
          <span class="nt">&lt;path</span> <span class="na">value=</span><span class="s">&quot;Observation.value[x]&quot;</span><span class="nt">/&gt;</span>
          <span class="nt">&lt;short</span> <span class="na">value=</span><span class="s">&quot;some text&quot;</span><span class="nt">/&gt;</span>
          <span class="nt">&lt;type&gt;</span>
            <span class="nt">&lt;code</span> <span class="na">value=</span><span class="s">&quot;Quantity&quot;</span><span class="nt">/&gt;</span>
          <span class="nt">&lt;/type&gt;</span>
        <span class="nt">&lt;/element&gt;</span>
        <span class="nt">&lt;element&gt;</span>
          <span class="nt">&lt;path</span> <span class="na">value=</span><span class="s">&quot;Observation.valueQuantity&quot;</span><span class="nt">/&gt;</span>
          <span class="nt">&lt;short</span> <span class="na">value=</span><span class="s">&quot;some text for quantity&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/element&gt;</span>
        <span class="nt">&lt;element&gt;</span>
          <span class="nt">&lt;path</span> <span class="na">value=</span><span class="s">&quot;Observation.valueQuantity.value&quot;</span><span class="nt">/&gt;</span>
          <span class="nt">&lt;min</span> <span class="na">value=</span><span class="s">&quot;1&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/element&gt;</span>
      <span class="nt">&lt;/differential&gt;</span>
    <span class="nt">&lt;/StructureDefinition&gt;</span>
</pre></div>



<a name="170894040"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/170894040" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#170894040">(Jul 15 2019 at 13:47)</a>:</h4>
<div class="codehilite"><pre><span></span>    <span class="nt">&lt;StructureDefinition&gt;</span>
      <span class="nt">&lt;id</span> <span class="na">value=</span><span class="s">&quot;t44&quot;</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;url</span> <span class="na">value=</span><span class="s">&quot;urn:uuid:ecb6f563-2957-4da8-832e-cb6d94329a93&quot;</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;name</span> <span class="na">value=</span><span class="s">&quot;t44&quot;</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;status</span> <span class="na">value=</span><span class="s">&quot;draft&quot;</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;description</span> <span class="na">value=</span><span class="s">&quot;fixture for #44: Choice Types: constrain list of choices to 1 and constrain the type (shortcut)&quot;</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;kind</span> <span class="na">value=</span><span class="s">&quot;resource&quot;</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;abstract</span> <span class="na">value=</span><span class="s">&quot;false&quot;</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;type</span> <span class="na">value=</span><span class="s">&quot;Observation&quot;</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;baseDefinition</span> <span class="na">value=</span><span class="s">&quot;http://hl7.org/fhir/StructureDefinition/Observation&quot;</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;derivation</span> <span class="na">value=</span><span class="s">&quot;constraint&quot;</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;differential&gt;</span>
        <span class="nt">&lt;element&gt;</span>
          <span class="nt">&lt;path</span> <span class="na">value=</span><span class="s">&quot;Observation&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/element&gt;</span>
        <span class="nt">&lt;element&gt;</span>
          <span class="nt">&lt;path</span> <span class="na">value=</span><span class="s">&quot;Observation.valueQuantity&quot;</span><span class="nt">/&gt;</span>
          <span class="nt">&lt;short</span> <span class="na">value=</span><span class="s">&quot;some text for quantity&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/element&gt;</span>
        <span class="nt">&lt;element&gt;</span>
          <span class="nt">&lt;path</span> <span class="na">value=</span><span class="s">&quot;Observation.valueQuantity.value&quot;</span><span class="nt">/&gt;</span>
          <span class="nt">&lt;min</span> <span class="na">value=</span><span class="s">&quot;1&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/element&gt;</span>
      <span class="nt">&lt;/differential&gt;</span>
    <span class="nt">&lt;/StructureDefinition&gt;</span>
</pre></div>



<a name="170899260"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/170899260" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#170899260">(Jul 15 2019 at 14:42)</a>:</h4>
<p>No.  The second one constraints the valueQuantity slice.  It doesn't prevent the other types from being used.  (That was a very clear outcome of our meeting two WGMs ago.)</p>



<a name="170983073"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/170983073" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#170983073">(Jul 16 2019 at 13:01)</a>:</h4>
<p>so... this invalidates every generated Extension we have ever generated. I have a problem with that</p>



<a name="170983245"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/170983245" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#170983245">(Jul 16 2019 at 13:03)</a>:</h4>
<p>in fact, it's not a backwards compatible change. Which is yet another problem.</p>



<a name="170983296"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/170983296" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#170983296">(Jul 16 2019 at 13:04)</a>:</h4>
<p>we need to interpret the second the same as the first....</p>



<a name="170989124"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/170989124" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#170989124">(Jul 16 2019 at 14:09)</a>:</h4>
<p>You agreed to it when we had the discussion long ago.  And I thought you'd changed the code to align well before we published R4?  Talking about valueQuantity is just talking about a specific slice.  Constraining what types are allowed needs to be done on value[x].</p>



<a name="171027817"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/171027817" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#171027817">(Jul 16 2019 at 21:11)</a>:</h4>
<p>it's not clear to me what I may have thought I was agreeing with, or not, nor is it clear what other people may have thought I was agreeing too, but this is clear: </p>
<p><a href="http://hl7.org/fhir/extension-capabilities.xml.html" target="_blank" title="http://hl7.org/fhir/extension-capabilities.xml.html">http://hl7.org/fhir/extension-capabilities.xml.html</a></p>
<p>Every extension we've ever published has a differential like this. And it's a pattern that exists in other profiles as well. See, for example:</p>
<p><a href="https://simplifier.net/NictizSTU3-Zib2017/nl-core-relatedperson-role/~xml" target="_blank" title="https://simplifier.net/NictizSTU3-Zib2017/nl-core-relatedperson-role/~xml">https://simplifier.net/NictizSTU3-Zib2017/nl-core-relatedperson-role/~xml</a></p>
<p>I don't think that we can change this now. <span class="user-mention" data-user-id="191336">@Michel Rutten</span></p>



<a name="171028235"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/171028235" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#171028235">(Jul 16 2019 at 21:17)</a>:</h4>
<p><span class="user-mention" data-user-id="191351">@Chris Grenz</span></p>



<a name="171067806"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/171067806" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#171067806">(Jul 17 2019 at 11:06)</a>:</h4>
<p>ok I have committed a set of tests and code based on the idea that we aren't breaking backwards compatibility on this</p>



<a name="171068063"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/171068063" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#171068063">(Jul 17 2019 at 11:11)</a>:</h4>
<p><a href="https://github.com/hapifhir/org.hl7.fhir.core/tree/master/org.hl7.fhir.r5/src/test/resources/snapshot-generation" target="_blank" title="https://github.com/hapifhir/org.hl7.fhir.core/tree/master/org.hl7.fhir.r5/src/test/resources/snapshot-generation">https://github.com/hapifhir/org.hl7.fhir.core/tree/master/org.hl7.fhir.r5/src/test/resources/snapshot-generation</a></p>



<a name="171112714"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/171112714" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#171112714">(Jul 17 2019 at 20:04)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> the language here: <a href="http://hl7.org/fhir/elementdefinition.html#typesx" target="_blank" title="http://hl7.org/fhir/elementdefinition.html#typesx">http://hl7.org/fhir/elementdefinition.html#typesx</a> specifically exists to make this clear. Note: </p>
<blockquote>
<p>Constraints limiting the acceptable list of types must be applied to the original "[x]" element as this is where the list of acceptable types is defined</p>
</blockquote>



<a name="171112789"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/171112789" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#171112789">(Jul 17 2019 at 20:05)</a>:</h4>
<p>So path: Observation.valueQuantity is referring to id: Observation.value[x]:valueQuantity and is making <em>no</em> statement about the other value types.</p>



<a name="171112903"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/171112903" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#171112903">(Jul 17 2019 at 20:06)</a>:</h4>
<p><span class="user-mention" data-user-id="191336">@Michel Rutten</span> has also affirmed this interpretation in his blog post here: <a href="https://blog.fire.ly/2019/02/06/fhir-r4-profiling-and-forge/" target="_blank" title="https://blog.fire.ly/2019/02/06/fhir-r4-profiling-and-forge/">https://blog.fire.ly/2019/02/06/fhir-r4-profiling-and-forge/</a></p>



<a name="171113583"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/171113583" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#171113583">(Jul 17 2019 at 20:14)</a>:</h4>
<p>Even more clear in the R4 spec, the next bullet:</p>
<blockquote>
<p>The inclusion of a type specific path (such as "Patient.deceasedBoolean") SHALL NOT be interpreted as constraining allowed types, but instead, it constrains the use of a particular type</p>
</blockquote>



<a name="171113748"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/171113748" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#171113748">(Jul 17 2019 at 20:16)</a>:</h4>
<p>This profile: <a href="http://hl7.org/fhir/extension-capabilities.xml.html" target="_blank" title="http://hl7.org/fhir/extension-capabilities.xml.html">http://hl7.org/fhir/extension-capabilities.xml.html</a> has not been converted properly from STU3 and isn't generating conformant element ids.</p>



<a name="171114929"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/171114929" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#171114929">(Jul 17 2019 at 20:33)</a>:</h4>
<p>That's what I recall.  And I thought Grahame had gone in and fixed the code so that the snapshot generator worked this way...</p>



<a name="171115743"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/171115743" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#171115743">(Jul 17 2019 at 20:42)</a>:</h4>
<p>I think we need to re-gen all the SDs in the R4 technical correction, a la <a href="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=22681" target="_blank" title="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=22681">GF#22681</a></p>



<a name="171115778"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/171115778" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#171115778">(Jul 17 2019 at 20:43)</a>:</h4>
<p>The R4 technical correction is getting out of hand</p>



<a name="171115793"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/171115793" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#171115793">(Jul 17 2019 at 20:43)</a>:</h4>
<p>but I now have a problem: I cannot manage this process any more.</p>



<a name="171115870"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/171115870" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#171115870">(Jul 17 2019 at 20:44)</a>:</h4>
<p>the R4 technical correction was slated for once the ballot opened, so that it wasn't competing for resources etc with ballot opening. Since that tends to be all en-compassing for us</p>



<a name="171115882"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/171115882" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#171115882">(Jul 17 2019 at 20:44)</a>:</h4>
<p>but now, getting the ballot out depends on the R4 technical corrections</p>



<a name="171115910"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/171115910" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#171115910">(Jul 17 2019 at 20:44)</a>:</h4>
<p>and already, doing the technical corrections (R2-R4) was a reset of the entire tooling base that I expected to take a week....</p>



<a name="171148352"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/171148352" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#171148352">(Jul 18 2019 at 08:37)</a>:</h4>
<p>What support can be offered? What would be helpful?</p>



<a name="171169794"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/171169794" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#171169794">(Jul 18 2019 at 13:31)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="191316">@Grahame Grieve</span>, apologies for radio silence. As Ewout has mentioned, I took a vacation after DevDays. Now ready to start working on this.<br>
Indeed, the impact on extensions also dawned on me. The simple/compact notation used in DSTU3 no longer limits the list of allowed types in R4. Most R4 extensions I've seen still use the STU3 compact notation, which is interpreted differently in R4, and usually not what the author intends. Instead, all (...) R4 extensions should now always specify both a <code>value[x]</code> ElementDef to limit types, and usually another named slice e.g. <code>valueBoolean</code> to specify further constrains on the allowed type - in the differential! So this is not a matter of simply re-generating the snapshot.</p>



<a name="171170488"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/171170488" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#171170488">(Jul 18 2019 at 13:38)</a>:</h4>
<p>Concerning slice names, we've also received some questions from Forge customers about this.<br>
Forge auto-generates slice names for named type slices, according to the default pattern, e.g. <code>valueBoolean</code>. Currently, the user cannot override/customize these auto-generated slice names. If you open a (manually edited) profile with custom type slice names, then Forge will automatically revert to the default slice names.<br>
Users have been asking us if Forge could allow custom type slice names in R4. For example, one user mentioned a use case where they introduce multiple <code>valueQuantity</code> slices, representing constraints on different units. Of course, this requires assigning unique and therefore custom slice names - which is currently not supported by Forge.<br>
Question: does FHIR allow this? If not, is there an alternative approach?</p>



<a name="171179570"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/171179570" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#171179570">(Jul 18 2019 at 15:10)</a>:</h4>
<p>This would be a case of re-slicing (slicing an existing slice).  Wouldn't the id convention distinguish?</p>



<a name="171180414"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/171180414" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#171180414">(Jul 18 2019 at 15:19)</a>:</h4>
<p>Agree - <code>id:"Observation.value[x]:valueQuantity/valueInCm"</code></p>



<a name="171180559"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/171180559" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#171180559">(Jul 18 2019 at 15:21)</a>:</h4>
<p>The slicing definition at <code>value[x]</code> is set by the standard to type. <code>id:"Observation.value[x]:valueInCm"</code> would be illegal.</p>



<a name="171180674"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/171180674" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#171180674">(Jul 18 2019 at 15:22)</a>:</h4>
<p>As for the STU3 Extension SDs - they need to be converted to R4 format like all resources.</p>



<a name="171241795"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/171241795" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#171241795">(Jul 19 2019 at 09:12)</a>:</h4>
<p><span class="user-mention" data-user-id="191351">@Chris Grenz</span> if I understand correctly, in your reslicing example, the full sliceName is <code>valueQuantity/valueInCm</code>, where the first segment is defined/prescribed by FHIR standard, and the last segment is custom and author-defined? So to support this scenario, Forge could for example auto-generate the first segment and require authors to specify the remainder?</p>



<a name="171244873"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/171244873" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#171244873">(Jul 19 2019 at 10:02)</a>:</h4>
<p>Yes, as a reslice - the slice of value[x] is valueQuantity and mandated by the standard. The (re)slice of valueQuantity is user defined and user named.</p>



<a name="171248095"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/171248095" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#171248095">(Jul 19 2019 at 11:02)</a>:</h4>
<p>Makes sense, thank you for the feedback!</p>



<a name="171256299"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/171256299" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#171256299">(Jul 19 2019 at 13:19)</a>:</h4>
<blockquote>
<p>What support can be offered? What would be helpful?</p>
</blockquote>
<p><span class="user-mention" data-user-id="191351">@Chris Grenz</span> thanks. Right now the most useful thing someone could do is sort out the gForge tasks for the technical corrections - do we know what they are, are they all approved by FHIR-I? Is there anything that's been reported that's not a task? DO the tool smiths have any last call issues?</p>



<a name="171256420"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/171256420" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#171256420">(Jul 19 2019 at 13:20)</a>:</h4>
<p>the other useful thing to do would be check the test cases</p>



<a name="171256469"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/171256469" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#171256469">(Jul 19 2019 at 13:21)</a>:</h4>
<p>FYI I'm planning to implement &amp; review the test cases next week.</p>



<a name="171256474"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/171256474" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#171256474">(Jul 19 2019 at 13:21)</a>:</h4>
<p><a href="https://github.com/hapifhir/org.hl7.fhir.core/tree/master/org.hl7.fhir.r5/src/test/resources/snapshot-generation" target="_blank" title="https://github.com/hapifhir/org.hl7.fhir.core/tree/master/org.hl7.fhir.r5/src/test/resources/snapshot-generation">https://github.com/hapifhir/org.hl7.fhir.core/tree/master/org.hl7.fhir.r5/src/test/resources/snapshot-generation</a></p>



<a name="171256476"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/171256476" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#171256476">(Jul 19 2019 at 13:21)</a>:</h4>
<p>great.</p>



<a name="171256550"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/171256550" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#171256550">(Jul 19 2019 at 13:22)</a>:</h4>
<p>They're not yet done - currently, I am interpreting the shortcut syntax the old way. I will update them to the new way over the next 2 days</p>



<a name="171256577"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/171256577" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#171256577">(Jul 19 2019 at 13:22)</a>:</h4>
<p>(they're good other than that)</p>



<a name="171296588"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/171296588" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#171296588">(Jul 19 2019 at 21:59)</a>:</h4>
<p>fixed. I think they're right now. In particular, T6, T43 and T44 deserve close attention, along with their last delta</p>



<a name="171323976"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/171323976" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#171323976">(Jul 20 2019 at 11:34)</a>:</h4>
<p>For T6, should the snapshot include all type slices once one of them is included? A minor point...more about consistency than correctness...</p>



<a name="171324051"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/171324051" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#171324051">(Jul 20 2019 at 11:37)</a>:</h4>
<p>T43's input should be rejected -&gt; value[x]'s slice for Quantity must be named valueQuantity. And value isn't a child of value[x]. Only Element children can be children of [x] elements.</p>



<a name="171324108"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/171324108" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#171324108">(Jul 20 2019 at 11:38)</a>:</h4>
<p>T44's differential is generating incorrect ids -&gt; <code>&lt;element id="Observation.valueQuantity"&gt;</code> should be <code>&lt;element id="Observation.value[x]:valueQuantity"&gt;</code></p>



<a name="171324123"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/171324123" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#171324123">(Jul 20 2019 at 11:40)</a>:</h4>
<p>And the snapshot goes off the rails @ line 951 with the introduction of the "Quantity" slice to value[x]</p>



<a name="171324179"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/171324179" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#171324179">(Jul 20 2019 at 11:41)</a>:</h4>
<p>I think T44 line 1043 should be <code>&lt;path value="Observation.valueQuantity.value"/&gt;</code> instead of current <code>&lt;path value="Observation.value[x].value"/&gt;</code></p>



<a name="171324230"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/171324230" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#171324230">(Jul 20 2019 at 11:43)</a>:</h4>
<p><span class="user-mention" data-user-id="191336">@Michel Rutten</span> is probably best suited to generate a snapshot and PR for these? I don't have any tooling at the moment apart from his...</p>



<a name="171361170"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/171361170" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#171361170">(Jul 21 2019 at 07:36)</a>:</h4>
<p>T6 - no, I don't think it should.</p>



<a name="171361338"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/171361338" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#171361338">(Jul 21 2019 at 07:42)</a>:</h4>
<p>T43:</p>
<ul>
<li>don't agree about the slice name, see above. (<span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span>). At least I don't think that's what we agreed, but I don't care </li>
<li>value is a child of value[x]. That we also discussed specifically</li>
</ul>



<a name="171361399"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/171361399" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#171361399">(Jul 21 2019 at 07:45)</a>:</h4>
<p>I don't see where the snapshot goes off the rails</p>



<a name="171361401"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/171361401" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#171361401">(Jul 21 2019 at 07:45)</a>:</h4>
<p>T44 I don't agree either</p>



<a name="171363517"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/171363517" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#171363517">(Jul 21 2019 at 08:49)</a>:</h4>
<p>ok I pushed corrected differentials to <a href="https://github.com/FHIR/packages/tree/master/hl7.fhir.rX/hl7.fhir.r4.examples/package" target="_blank" title="https://github.com/FHIR/packages/tree/master/hl7.fhir.rX/hl7.fhir.r4.examples/package">https://github.com/FHIR/packages/tree/master/hl7.fhir.rX/hl7.fhir.r4.examples/package</a> and <a href="https://github.com/FHIR/packages/tree/master/hl7.fhir.rX/hl7.fhir.r4.core/package" target="_blank" title="https://github.com/FHIR/packages/tree/master/hl7.fhir.rX/hl7.fhir.r4.core/package">https://github.com/FHIR/packages/tree/master/hl7.fhir.rX/hl7.fhir.r4.core/package</a></p>



<a name="171363562"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/171363562" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#171363562">(Jul 21 2019 at 08:50)</a>:</h4>
<p>note: the snapshots are not correct at this time. I have not regenerated them (problems). So just review the differentials...</p>



<a name="171387221"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/171387221" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#171387221">(Jul 21 2019 at 20:47)</a>:</h4>
<p>ok all sorted. I think they are correct</p>



<a name="171389542"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/171389542" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#171389542">(Jul 21 2019 at 22:00)</a>:</h4>
<p>My recollection was that the slice names for the short-cut was the 'type', not the element name.  I don't really care either, but I do have a slight bias towards shorter - which the type name would be.  <span class="user-mention" data-user-id="191351">@Chris Grenz</span> do you have a reason for wanting the element name (beyond the fact that you probably implemented things that way? :))</p>



<a name="171406574"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/171406574" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#171406574">(Jul 22 2019 at 06:23)</a>:</h4>
<p><a href="http://hl7.org/fhir/elementdefinition.html#id" target="_blank" title="http://hl7.org/fhir/elementdefinition.html#id">http://hl7.org/fhir/elementdefinition.html#id</a> defines the id for a type slice and uses the full path name.</p>



<a name="171413507"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/171413507" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#171413507">(Jul 22 2019 at 08:47)</a>:</h4>
<p>But sure how that’s relevant to the question at hand?</p>



<a name="171413509"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/171413509" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#171413509">(Jul 22 2019 at 08:47)</a>:</h4>
<p>Grr. Not sure...</p>



<a name="171432510"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/171432510" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#171432510">(Jul 22 2019 at 13:57)</a>:</h4>
<p><span class="user-mention" data-user-id="191351">@Chris Grenz</span> The question is whether the sliceName should be "Quantity" or "valueQuantity" (not what the id should be).  Is there a reason why you think we should use "valueQuantity" rather than "Quantity"?</p>



<a name="171434244"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/171434244" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#171434244">(Jul 22 2019 at 14:17)</a>:</h4>
<p>I seem to remember that we decided to standardize slice names of type slices to e.g. <code>valueBoolean</code> - derived from element name by replacing <code>[x]</code> with the name of associated single type. The current implementations of the .NET FHIR API &amp; Forge (STU3 &amp; R4) follow this pattern.<br>
However section 2.30.0.3 (<a href="http://hl7.org/fhir/elementdefinition.html#id" target="_blank" title="http://hl7.org/fhir/elementdefinition.html#id">http://hl7.org/fhir/elementdefinition.html#id</a>) of the R4 spec states:</p>
<blockquote>
<p>For type choice elements, the id reflects the type slice. e.g. For path = <code>Patient.deceasedBoolean</code>, the id is <code>Patient.deceased[x]:deceasedBoolean</code></p>
</blockquote>
<p>This line suggests, but does not actually <em>require</em> pre-defined slice names for type slices.<br>
This would imply that <code>Patient.deceased[x]:boolean</code> and <code>Patient.deceased[x]:foo</code> are also valid.</p>



<a name="171435408"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/171435408" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#171435408">(Jul 22 2019 at 14:31)</a>:</h4>
<p>The illustration in the id section indicates it should be valueQuantity. No strong opinion, but think that guidance should tip the scales.</p>



<a name="171465163"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/171465163" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#171465163">(Jul 22 2019 at 20:31)</a>:</h4>
<p>well, ok. updated the tests. Check them again</p>



<a name="171680256"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/171680256" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#171680256">(Jul 25 2019 at 10:44)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span>  Looking at the commit (<a href="https://github.com/hapifhir/org.hl7.fhir.core/commit/4274392020cbac6b9e5cf7cfafc3be1e656fda2f#diff-64f5d43722b5cabb662451ca19679f13" target="_blank" title="https://github.com/hapifhir/org.hl7.fhir.core/commit/4274392020cbac6b9e5cf7cfafc3be1e656fda2f#diff-64f5d43722b5cabb662451ca19679f13">https://github.com/hapifhir/org.hl7.fhir.core/commit/4274392020cbac6b9e5cf7cfafc3be1e656fda2f#diff-64f5d43722b5cabb662451ca19679f13</a>) it looks like you only changed the slice names. Those look fine.</p>
<p>For <code>Observation.value[x].value</code> and generally for children of [x] type choice elements, how do you know <em>which</em> element is being constrained? If I create a constraint on <code>Extension.value[x].system</code>, where will you apply it? <code>Coding.system</code> or <code>Quantity.system</code>? Both? Element's children are the only ones unambiguous. I certainly wasn't part of any agreement on this (not that I have to be!).</p>
<p>Will re-check others on plane...</p>



<a name="171686304"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/171686304" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#171686304">(Jul 25 2019 at 12:28)</a>:</h4>
<p>On path - should the path be reflective of the instance structure? For <code>id:"Observation.value[x]:valueQuantity"</code>, I assume either <code>path:"Observation.value[x]"</code> or <code>path:"Observation.valueQuantity"</code> would be ok? </p>
<p>This becomes more important with children as in my last comment. <code>value[x].value</code> is ambiguous. <code>valueQuantity.value</code> is not.</p>



<a name="171686400"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/171686400" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#171686400">(Jul 25 2019 at 12:30)</a>:</h4>
<p><a href="https://github.com/hapifhir/org.hl7.fhir.core/blob/master/org.hl7.fhir.r5/src/test/resources/snapshot-generation/t44-expected.xml#L1043" target="_blank" title="https://github.com/hapifhir/org.hl7.fhir.core/blob/master/org.hl7.fhir.r5/src/test/resources/snapshot-generation/t44-expected.xml#L1043">https://github.com/hapifhir/org.hl7.fhir.core/blob/master/org.hl7.fhir.r5/src/test/resources/snapshot-generation/t44-expected.xml#L1043</a></p>



<a name="171686541"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/171686541" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#171686541">(Jul 25 2019 at 12:32)</a>:</h4>
<p>At very least, in T44's input (<a href="https://github.com/hapifhir/org.hl7.fhir.core/blob/master/org.hl7.fhir.r5/src/test/resources/snapshot-generation/t44-input.xml#L30" target="_blank" title="https://github.com/hapifhir/org.hl7.fhir.core/blob/master/org.hl7.fhir.r5/src/test/resources/snapshot-generation/t44-input.xml#L30">https://github.com/hapifhir/org.hl7.fhir.core/blob/master/org.hl7.fhir.r5/src/test/resources/snapshot-generation/t44-input.xml#L30</a>), the element id should be required...although in this case I guess it happens to be unambiguous due to the type limits on value[x].</p>



<a name="171686689"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/171686689" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#171686689">(Jul 25 2019 at 12:34)</a>:</h4>
<p>Appears you're accepting any slice name: <a href="https://github.com/hapifhir/org.hl7.fhir.core/blob/master/org.hl7.fhir.r5/src/test/resources/snapshot-generation/t43-input.xml#L33" target="_blank" title="https://github.com/hapifhir/org.hl7.fhir.core/blob/master/org.hl7.fhir.r5/src/test/resources/snapshot-generation/t43-input.xml#L33">https://github.com/hapifhir/org.hl7.fhir.core/blob/master/org.hl7.fhir.r5/src/test/resources/snapshot-generation/t43-input.xml#L33</a></p>
<p>And then converting it to the <code>valueUnit</code> name in the snapshot: <a href="https://github.com/hapifhir/org.hl7.fhir.core/blob/master/org.hl7.fhir.r5/src/test/resources/snapshot-generation/t43-expected.xml#L958" target="_blank" title="https://github.com/hapifhir/org.hl7.fhir.core/blob/master/org.hl7.fhir.r5/src/test/resources/snapshot-generation/t43-expected.xml#L958">https://github.com/hapifhir/org.hl7.fhir.core/blob/master/org.hl7.fhir.r5/src/test/resources/snapshot-generation/t43-expected.xml#L958</a></p>
<p>While leaving the original in the differential: <a href="https://github.com/hapifhir/org.hl7.fhir.core/blob/master/org.hl7.fhir.r5/src/test/resources/snapshot-generation/t43-expected.xml#L2144" target="_blank" title="https://github.com/hapifhir/org.hl7.fhir.core/blob/master/org.hl7.fhir.r5/src/test/resources/snapshot-generation/t43-expected.xml#L2144">https://github.com/hapifhir/org.hl7.fhir.core/blob/master/org.hl7.fhir.r5/src/test/resources/snapshot-generation/t43-expected.xml#L2144</a></p>
<p>Is this intended?</p>



<a name="171687178"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/171687178" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#171687178">(Jul 25 2019 at 12:41)</a>:</h4>
<p>yes, the path is now ambiguous; you have to look back up the path parents to see what the type is.</p>



<a name="171687198"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/171687198" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#171687198">(Jul 25 2019 at 12:41)</a>:</h4>
<p>we specifically discussed this in Seattle while coming to agreement</p>



<a name="171687234"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/171687234" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#171687234">(Jul 25 2019 at 12:41)</a>:</h4>
<p>So what happens with <code>Extension.value[x].system</code>?</p>



<a name="171687279"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/171687279" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#171687279">(Jul 25 2019 at 12:42)</a>:</h4>
<p>assuming I don't limit the types.</p>



<a name="171687284"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/171687284" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#171687284">(Jul 25 2019 at 12:42)</a>:</h4>
<p>I do not require the element ids on the differential</p>



<a name="171687293"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/171687293" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#171687293">(Jul 25 2019 at 12:42)</a>:</h4>
<p>and I am testing that. though it is not formally valid</p>



<a name="171687320"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/171687320" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#171687320">(Jul 25 2019 at 12:43)</a>:</h4>
<p>So <code>path:"Extension.value[x].system"</code> should be rejected?</p>



<a name="171687322"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/171687322" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#171687322">(Jul 25 2019 at 12:43)</a>:</h4>
<p>you can't say anything about Extension.value[x].system unless you limit the types. there's a another test about that somewhere - you can only constrain things on all elements if you don't constrain the type</p>



<a name="171687451"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/171687451" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#171687451">(Jul 25 2019 at 12:44)</a>:</h4>
<p>Meaning you have to check all the remaining types and see if there's any ambiguity?</p>



<a name="171687479"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/171687479" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#171687479">(Jul 25 2019 at 12:44)</a>:</h4>
<p>That's pretty brittle I think...</p>



<a name="171687483"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/171687483" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#171687483">(Jul 25 2019 at 12:44)</a>:</h4>
<p>and yes, I rewrite the sliceName in the snapshot without fixing it in the differential. I'm open to discussion on the point. I can raise an exception, or fix it (though fixing it is super hard for me). I elected not to. discussion welcome.</p>



<a name="171687504"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/171687504" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#171687504">(Jul 25 2019 at 12:45)</a>:</h4>
<p>no that situation doesn't arise. Either you have a single type, or you can only talk about element properties</p>



<a name="171687536"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/171687536" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#171687536">(Jul 25 2019 at 12:45)</a>:</h4>
<p>I think it's pretty confusing if the snapshot generator creates identifier inconsistencies between snapshot and differential.</p>



<a name="171687601"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/171687601" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#171687601">(Jul 25 2019 at 12:46)</a>:</h4>
<p>well, let's see what other people think.</p>



<a name="171687813"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/171687813" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#171687813">(Jul 25 2019 at 12:49)</a>:</h4>
<blockquote>
<p>no that situation doesn't arise. Either you have a single type, or you can only talk about element properties</p>
</blockquote>
<p>Where can I find this rule? Also, if I limit to 2 types, say Quantity and Coding, and then constrain <code>id:"Extension.value[x].valueQuantity.system"</code> and <code>id:"Extension.value[x].valueCoding.system"</code>, both will have <code>path:"Extension.value[x].system"</code>. And you don't require ids in the differential...</p>



<a name="171687911"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/171687911" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#171687911">(Jul 25 2019 at 12:50)</a>:</h4>
<p>It seems to me that either ids need to be required, or paths need to be type specific.</p>



<a name="171687960"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/171687960" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#171687960">(Jul 25 2019 at 12:51)</a>:</h4>
<p>they'll have to be sliced, either fomally, or informally. The rule is... somewhere. probably only in Zulip for now - I think we discussed this about 3 months ago</p>



<a name="171687995"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/171687995" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#171687995">(Jul 25 2019 at 12:51)</a>:</h4>
<p>if you're talking about the differential, ids are derivative. Either you fomally specify the slices, or you use the short cut. Either way, there is no ambiguity.</p>



<a name="171688159"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/171688159" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#171688159">(Jul 25 2019 at 12:53)</a>:</h4>
<p>My leaning is to raise an error if the differential slice name is wrong.  Otherwise you end up with non-matching ids in the snapshot and differential - which should cause an error.</p>



<a name="171688311"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/171688311" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#171688311">(Jul 25 2019 at 12:55)</a>:</h4>
<p>We agree this is an error - it's ambiguous.</p>
<div class="codehilite"><pre><span></span>{
  &quot;path&quot;:&quot;Extension.value[x]&quot;,
  &quot;type&quot;: [
    { &quot;code&quot;:&quot;Quantity&quot; },
    { &quot;code&quot;:&quot;Coding&quot; }
  ]
},
// slices valueQuantity and valueCoding implicitly exist already. Don&#39;t need to declare.
{
  &quot;path&quot;:&quot;Extension.value[x].system&quot;,
  &quot;min&quot;:1
}
</pre></div>



<a name="171688476"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/171688476" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#171688476">(Jul 25 2019 at 12:57)</a>:</h4>
<p>I think you're saying I need to do this:</p>
<div class="codehilite"><pre><span></span>{
  &quot;path&quot;:&quot;Extension.value[x]&quot;,
  &quot;type&quot;: [
    { &quot;code&quot;:&quot;Quantity&quot; },
    { &quot;code&quot;:&quot;Coding&quot; }
  ]
},
// slices valueQuantity and valueCoding implicitly exist already. Don&#39;t need to declare.
{
  &quot;path&quot;:&quot;Extension.value[x]&quot;,
  &quot;sliceName&quot;:&quot;valueQuantity&quot;
},
{
  &quot;path&quot;:&quot;Extension.value[x].system&quot;,
  &quot;min&quot;:1
}
</pre></div>


<p>and then infer the last constraint based on the ordering of the elements.</p>



<a name="171688585"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/171688585" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#171688585">(Jul 25 2019 at 12:59)</a>:</h4>
<p>Which is one of the explicit reasons for the well-formed ids - that you don't have to try and capture meaning from the order of elements in the differential.</p>



<a name="171688745"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/171688745" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#171688745">(Jul 25 2019 at 13:01)</a>:</h4>
<p>Aside...on T6, the snapshot declares the slicing closed (good): <a href="https://github.com/hapifhir/org.hl7.fhir.core/blob/master/org.hl7.fhir.r5/src/test/resources/snapshot-generation/t6-expected.xml#L566" target="_blank" title="https://github.com/hapifhir/org.hl7.fhir.core/blob/master/org.hl7.fhir.r5/src/test/resources/snapshot-generation/t6-expected.xml#L566">https://github.com/hapifhir/org.hl7.fhir.core/blob/master/org.hl7.fhir.r5/src/test/resources/snapshot-generation/t6-expected.xml#L566</a></p>
<p>But then fails to include all the slices. I guess we do need to include them all.</p>



<a name="171688911"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/171688911" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#171688911">(Jul 25 2019 at 13:03)</a>:</h4>
<p>I'm not understanding the point about T6</p>



<a name="171688946"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/171688946" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#171688946">(Jul 25 2019 at 13:03)</a>:</h4>
<p>I don't mind if other tooling requires properly formed ids. It is required. Just that mine doesn't.</p>



<a name="171688961"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/171688961" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#171688961">(Jul 25 2019 at 13:03)</a>:</h4>
<p>but the ids by themselves are not enough</p>



<a name="171688963"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/171688963" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#171688963">(Jul 25 2019 at 13:03)</a>:</h4>
<p>Looking again... sdf-14 requires ids in both snapshot and differential.</p>



<a name="171689060"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/171689060" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#171689060">(Jul 25 2019 at 13:04)</a>:</h4>
<p>What scenario/id would be ambiguous?</p>



<a name="171689097"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/171689097" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#171689097">(Jul 25 2019 at 13:04)</a>:</h4>
<p>ambiguous?</p>



<a name="171689110"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/171689110" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#171689110">(Jul 25 2019 at 13:04)</a>:</h4>
<p>Why aren't ids enough?</p>



<a name="171689151"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/171689151" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#171689151">(Jul 25 2019 at 13:05)</a>:</h4>
<p>With ids, you don't need to infer anything from element ordering.</p>



<a name="171689189"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/171689189" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#171689189">(Jul 25 2019 at 13:05)</a>:</h4>
<p>you can't imply the existence of slices in the id. You actually have to have the slices present. I didn't say anything about ambiguous</p>



<a name="171689336"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/171689336" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#171689336">(Jul 25 2019 at 13:07)</a>:</h4>
<p>Based on my understanding of our discussions, a differential with a single element, <code>id:"Extension.value[x]:valueQuantity.value"</code> is legal.</p>



<a name="171689347"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/171689347" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#171689347">(Jul 25 2019 at 13:07)</a>:</h4>
<p>Type slices implicitly exist.</p>



<a name="171689407"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/171689407" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#171689407">(Jul 25 2019 at 13:08)</a>:</h4>
<p>I disagree. I've seen nothing to say that this is the case. It's driven by the path, not the id</p>



<a name="171689435"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/171689435" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#171689435">(Jul 25 2019 at 13:08)</a>:</h4>
<p><span class="user-mention" data-user-id="191336">@Michel Rutten</span> <span class="user-mention" data-user-id="191328">@Ewout Kramer</span> <span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span></p>



<a name="171689469"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/171689469" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#171689469">(Jul 25 2019 at 13:09)</a>:</h4>
<p>the path <code>Extension.valueQuantity.value</code> establishes the implicit type slice. We never said that you could establish it by id</p>



<a name="171689773"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/171689773" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#171689773">(Jul 25 2019 at 13:12)</a>:</h4>
<p>value[x] establishes the implicit type slices</p>



<a name="171690033"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/171690033" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#171690033">(Jul 25 2019 at 13:16)</a>:</h4>
<p>id is just referring to what's already there.</p>



<a name="171690123"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/171690123" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#171690123">(Jul 25 2019 at 13:16)</a>:</h4>
<p>For T6 - a "closed" slicing needs to enumerate all the possible slices, no?</p>



<a name="171690281"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/171690281" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#171690281">(Jul 25 2019 at 13:19)</a>:</h4>
<p>Agree with Grahame that the paths drive, not the ids.  You'd have to have an element with "Extension.valueQuantity" or "Extension.value[x]:valueQuantity" because neither of those is explicitly declared in the snapshot of what you're inheriting from - and every element must be explicitly declared either in the parent snapshot or the child differential.</p>



<a name="171690397"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/171690397" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#171690397">(Jul 25 2019 at 13:20)</a>:</h4>
<p>I am not sure about T6. I don't want to have to enumerate all the slices. The snapshots will be massive</p>



<a name="171690631"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/171690631" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#171690631">(Jul 25 2019 at 13:23)</a>:</h4>
<p>So if I have a single element like this, it's ok?</p>
<div class="codehilite"><pre><span></span>{
  &quot;id&quot;:&quot;Extension.value[x]:valueQuantity.value&quot;,
  &quot;path&quot;:&quot;Extension.valueQuantity.value&quot;,
  &quot;min&quot;:1
}
</pre></div>


<p>I'm fine with that.</p>



<a name="171690734"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/171690734" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#171690734">(Jul 25 2019 at 13:25)</a>:</h4>
<p>yes</p>



<a name="171690824"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/171690824" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#171690824">(Jul 25 2019 at 13:26)</a>:</h4>
<p>To be clear: that's the <em>only</em> element in the differential.</p>



<a name="171692290"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/171692290" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#171692290">(Jul 25 2019 at 13:44)</a>:</h4>
<p>Of course, sdf-14 makes this distinction moot since a well-formed id is required on all elements, snapshot and differential.</p>



<a name="171692874"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/171692874" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#171692874">(Jul 25 2019 at 13:50)</a>:</h4>
<p>For T6 - a closed slicing (to me) means that all valid slices have been enumerated, no more are allowed. If you then only enumerate one, type, even though the value[x] type list allows more, the slicing validation won't (only one slice, instance isn't in that slice, error).</p>



<a name="171692960"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/171692960" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#171692960">(Jul 25 2019 at 13:51)</a>:</h4>
<p>Not sure in practice that means that much bloat in snapshot - only would be sizeable when the type choice list is long (e.g. Extension.value[x]), the allowed types aren't constrained, and one type has a constraint. Seems like a rare intersection...</p>



<a name="171725769"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/171725769" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#171725769">(Jul 25 2019 at 20:41)</a>:</h4>
<p>if you think that the slices should be enumerated if the type list is restricted, then you'll also think that they should be enumerated when the type list is not restricted</p>



<a name="171730052"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/171730052" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#171730052">(Jul 25 2019 at 21:41)</a>:</h4>
<p>ok I updated t29 and t43 - and added clones. The generation now blows up if the slice names are wrong in the differential. I actually changed t29, so that difference needs checking please</p>



<a name="171932206"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/171932206" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#171932206">(Jul 29 2019 at 09:57)</a>:</h4>
<blockquote>
<p>I disagree. I've seen nothing to say that this is the case. It's driven by the path, not the id</p>
</blockquote>
<p>My validator totally disregards the id - it's driven by the path to recognize slices. Then again, I full rely on the snapshot as generated by <span class="user-mention" data-user-id="191336">@Michel Rutten</span>  - I don't know how much he used the id to generate the snapshot....</p>



<a name="171934808"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/171934808" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#171934808">(Jul 29 2019 at 10:43)</a>:</h4>
<p>The .NET SnapshotGenerator generates Element Ids, but does not use/depend on them.</p>



<a name="171934883"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/171934883" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#171934883">(Jul 29 2019 at 10:44)</a>:</h4>
<p>i.e. elements are identified strictly by list order, Path &amp; SliceName.</p>



<a name="171935197"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/171935197" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#171935197">(Jul 29 2019 at 10:49)</a>:</h4>
<p>Same as java</p>



<a name="173557492"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/173557492" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#173557492">(Aug 19 2019 at 16:27)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> FYI I've managed to pass all your SnapGen unit tests - with some discrepancies/corrections. Tomorrow I will create and submit a report of all my findings.</p>



<a name="173567972"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/173567972" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#173567972">(Aug 19 2019 at 18:41)</a>:</h4>
<p>ok thanks</p>



<a name="173664806"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/173664806" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#173664806">(Aug 20 2019 at 14:49)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="191316">@Grahame Grieve</span>, I took all the SnapshotGenerator unit tests from HAPIFHIR github repo:<br>
<a href="https://github.com/hapifhir/org.hl7.fhir.core/tree/master/org.hl7.fhir.r5/src/test/resources/snapshot-generation" target="_blank" title="https://github.com/hapifhir/org.hl7.fhir.core/tree/master/org.hl7.fhir.r5/src/test/resources/snapshot-generation">https://github.com/hapifhir/org.hl7.fhir.core/tree/master/org.hl7.fhir.r5/src/test/resources/snapshot-generation</a><br>
and re-implemented and executed them on the .NET FHIR library (R4 development branch):<br>
<a href="https://github.com/FirelyTeam/fhir-net-api/tree/develop-r4" target="_blank" title="https://github.com/FirelyTeam/fhir-net-api/tree/develop-r4">https://github.com/FirelyTeam/fhir-net-api/tree/develop-r4</a><br>
You can find the results here:<br>
<a href="https://gist.github.com/wmrutten/acc5e24601eb74df582ff39b21f41efc" target="_blank" title="https://gist.github.com/wmrutten/acc5e24601eb74df582ff39b21f41efc">https://gist.github.com/wmrutten/acc5e24601eb74df582ff39b21f41efc</a></p>



<a name="173665164"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20a%20non-repeating%20element/near/173665164" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element.html#173665164">(Aug 20 2019 at 14:52)</a>:</h4>
<p>Next, I am going to look into the type slicing change as we discussed during DevDays US in Redmond; specifically to always emit a type slicing entry to the snapshot component, even when omitted from the differential. May have to update our SnapGen logic.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
