---
layout: page
title: "FHIR Chat  · 4.1.49-SNAPSHOT bug ElementDefinition.example · conformance"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/index.html">conformance</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/4.2E1.2E49-SNAPSHOT.20bug.20ElementDefinition.2Eexample.html">4.1.49-SNAPSHOT bug ElementDefinition.example</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="186100324"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/4.1.49-SNAPSHOT%20bug%20ElementDefinition.example/near/186100324" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/4.2E1.2E49-SNAPSHOT.20bug.20ElementDefinition.2Eexample.html#186100324">(Jan 20 2020 at 13:11)</a>:</h4>
<p>When using extensions in StructureDefinition.example i get: <br>
<code>Error @ StructureDefinition.snapshot.element[95].example[1].value.ofType(string) (line 5356, col43) : The extension http://hl7.org/fhir/StructureDefinition/iso21090-ADXP-houseNumber is not allowed to be used at this point (allowed = e:Address.line; this element is [[StructureDefinition.snapshot.element.example.value.ofType(string), BackboneElement.element.example.value, BackboneElement.element.example.valuestring, ElementDefinition.example.value, ElementDefinition.example.valuestring, Element.value, Element.valuestring, string])</code></p>



<a name="186100341"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/4.1.49-SNAPSHOT%20bug%20ElementDefinition.example/near/186100341" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/4.2E1.2E49-SNAPSHOT.20bug.20ElementDefinition.2Eexample.html#186100341">(Jan 20 2020 at 13:11)</a>:</h4>
<p>to reproduce: <code>java -jar org.hl7.fhir.validator.jar https://fhir.simplifier.net/r3/StructureDefinition/2fc591f5-ac56-4d97-82fa-ffd3f6c0c179 -version 3.0.2 -ig "hl7.fhir.core#3.0.1"</code></p>



<a name="186107443"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/4.1.49-SNAPSHOT%20bug%20ElementDefinition.example/near/186107443" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/4.2E1.2E49-SNAPSHOT.20bug.20ElementDefinition.2Eexample.html#186107443">(Jan 20 2020 at 14:43)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span></p>



<a name="186113864"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/4.1.49-SNAPSHOT%20bug%20ElementDefinition.example/near/186113864" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/4.2E1.2E49-SNAPSHOT.20bug.20ElementDefinition.2Eexample.html#186113864">(Jan 20 2020 at 16:03)</a>:</h4>
<p>another bug?: </p>
<div class="codehilite"><pre><span></span>*FAILURE* validating https://fhir.simplifier.net/r3/StructureDefinition/4333bf81-210d-43bb-a5b3-7f27c3c9f66e:  error:1 warn:0 info:0
  Error @ StructureDefinition (line 1, col2) : The extension http://hl7.org/fhir/StructureDefinition/structuredefinition-wg is not allowed to be used at this point (allowed = e:*; this element is [[StructureDefinition])
</pre></div>



<a name="186113907"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/4.1.49-SNAPSHOT%20bug%20ElementDefinition.example/near/186113907" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/4.2E1.2E49-SNAPSHOT.20bug.20ElementDefinition.2Eexample.html#186113907">(Jan 20 2020 at 16:04)</a>:</h4>
<p>to reproduce: <code>java -jar org.hl7.fhir.validator.jar https://fhir.simplifier.net/r3/StructureDefinition/4333bf81-210d-43bb-a5b3-7f27c3c9f66e -version 3.0.2 -ig "hl7.fhir.core#3.0.1"</code></p>



<a name="186118468"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/4.1.49-SNAPSHOT%20bug%20ElementDefinition.example/near/186118468" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/4.2E1.2E49-SNAPSHOT.20bug.20ElementDefinition.2Eexample.html#186118468">(Jan 20 2020 at 16:59)</a>:</h4>
<p>And a third bug (in the URI check for: "<a href="http://www.acme.com/identifiers/patient" target="_blank" title="http://www.acme.com/identifiers/patient">http://www.acme.com/identifiers/patient</a> or urn:ietf:rfc:3986 if the Identifier.value itself is a full uri"):<br>
<a href="https://github.com/hapifhir/org.hl7.fhir.core/issues/123" target="_blank" title="https://github.com/hapifhir/org.hl7.fhir.core/issues/123">https://github.com/hapifhir/org.hl7.fhir.core/issues/123</a><br>
Already added a fixing PR</p>



<a name="186128760"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/4.1.49-SNAPSHOT%20bug%20ElementDefinition.example/near/186128760" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/4.2E1.2E49-SNAPSHOT.20bug.20ElementDefinition.2Eexample.html#186128760">(Jan 20 2020 at 19:48)</a>:</h4>
<ul>
<li>
<p>using extensions in ElementDefinition.example - fixed. Also in ElementDefinition.fixed[x] and ElementDefinition.pattern[x]. I can't think of anywhere else similar where extensions are allowed even against their context. (aside: I could check the ElementDefinition.path, but the rules there are complicated to resolve...)</p>
</li>
<li>
<p>extension context = *. I can't see that this is meaningfully documented anywhere, so I don't think it's legal. you should talk to firely about that</p>
</li>
<li>
<p>PR accepted</p>
</li>
</ul>



<a name="186133898"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/4.1.49-SNAPSHOT%20bug%20ElementDefinition.example/near/186133898" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/4.2E1.2E49-SNAPSHOT.20bug.20ElementDefinition.2Eexample.html#186133898">(Jan 20 2020 at 21:18)</a>:</h4>
<ol>
<li><span aria-label="thumbs up" class="emoji emoji-1f44d" role="img" title="thumbs up">:thumbs_up:</span> </li>
<li><span aria-label="thumbs up" class="emoji emoji-1f44d" role="img" title="thumbs up">:thumbs_up:</span> <br>
2: The context is actually: </li>
</ol>
<div class="codehilite"><pre><span></span><span class="nt">&lt;context&gt;</span>
    <span class="nt">&lt;type</span> <span class="na">value=</span><span class="s">&quot;element&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;expression</span> <span class="na">value=</span><span class="s">&quot;Element&quot;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;/context&gt;</span>
</pre></div>



<a name="186133926"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/4.1.49-SNAPSHOT%20bug%20ElementDefinition.example/near/186133926" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/4.2E1.2E49-SNAPSHOT.20bug.20ElementDefinition.2Eexample.html#186133926">(Jan 20 2020 at 21:19)</a>:</h4>
<p>The Extension in question is from FHIR core: <a href="http://hl7.org/fhir/extension-structuredefinition-wg.xml.html" target="_blank" title="http://hl7.org/fhir/extension-structuredefinition-wg.xml.html">http://hl7.org/fhir/extension-structuredefinition-wg.xml.html</a></p>



<a name="186134182"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/4.1.49-SNAPSHOT%20bug%20ElementDefinition.example/near/186134182" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/4.2E1.2E49-SNAPSHOT.20bug.20ElementDefinition.2Eexample.html#186134182">(Jan 20 2020 at 21:22)</a>:</h4>
<p>if that's the context, then it wouldn't give that error message. I think you've got some internal versioning problem there</p>



<a name="186134189"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/4.1.49-SNAPSHOT%20bug%20ElementDefinition.example/near/186134189" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/4.2E1.2E49-SNAPSHOT.20bug.20ElementDefinition.2Eexample.html#186134189">(Jan 20 2020 at 21:22)</a>:</h4>
<p>I can't reproduce it</p>



<a name="186136847"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/4.1.49-SNAPSHOT%20bug%20ElementDefinition.example/near/186136847" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/4.2E1.2E49-SNAPSHOT.20bug.20ElementDefinition.2Eexample.html#186136847">(Jan 20 2020 at 22:11)</a>:</h4>
<p>ok. Will investigate further.</p>



<a name="186138564"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/4.1.49-SNAPSHOT%20bug%20ElementDefinition.example/near/186138564" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/4.2E1.2E49-SNAPSHOT.20bug.20ElementDefinition.2Eexample.html#186138564">(Jan 20 2020 at 22:45)</a>:</h4>
<p>Got it:<a href="http://hl7.org/fhir/STU3/extension-structuredefinition-wg.xml.html" target="_blank" title="http://hl7.org/fhir/STU3/extension-structuredefinition-wg.xml.html">http://hl7.org/fhir/STU3/extension-structuredefinition-wg.xml.html</a></p>



<a name="186138637"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/4.1.49-SNAPSHOT%20bug%20ElementDefinition.example/near/186138637" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/4.2E1.2E49-SNAPSHOT.20bug.20ElementDefinition.2Eexample.html#186138637">(Jan 20 2020 at 22:46)</a>:</h4>
<p><code>&lt;context value="*"/&gt; </code><br>
Its like that in STU3 3.0.2</p>



<a name="186139517"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/4.1.49-SNAPSHOT%20bug%20ElementDefinition.example/near/186139517" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/4.2E1.2E49-SNAPSHOT.20bug.20ElementDefinition.2Eexample.html#186139517">(Jan 20 2020 at 23:02)</a>:</h4>
<p>hmm</p>



<a name="186139519"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/4.1.49-SNAPSHOT%20bug%20ElementDefinition.example/near/186139519" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/4.2E1.2E49-SNAPSHOT.20bug.20ElementDefinition.2Eexample.html#186139519">(Jan 20 2020 at 23:02)</a>:</h4>
<p>I thought I had eliminated all of them</p>



<a name="186139619"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/4.1.49-SNAPSHOT%20bug%20ElementDefinition.example/near/186139619" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/4.2E1.2E49-SNAPSHOT.20bug.20ElementDefinition.2Eexample.html#186139619">(Jan 20 2020 at 23:04)</a>:</h4>
<p><a href="https://github.com/hapifhir/org.hl7.fhir.core/pull/125" target="_blank" title="https://github.com/hapifhir/org.hl7.fhir.core/pull/125">https://github.com/hapifhir/org.hl7.fhir.core/pull/125</a></p>



<a name="186140193"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/4.1.49-SNAPSHOT%20bug%20ElementDefinition.example/near/186140193" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/4.2E1.2E49-SNAPSHOT.20bug.20ElementDefinition.2Eexample.html#186140193">(Jan 20 2020 at 23:16)</a>:</h4>
<p>ok you are doing it in the STU3 StrucDef conversion, more elegant than allowing * for every version.</p>



<a name="186140382"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/4.1.49-SNAPSHOT%20bug%20ElementDefinition.example/near/186140382" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/4.2E1.2E49-SNAPSHOT.20bug.20ElementDefinition.2Eexample.html#186140382">(Jan 20 2020 at 23:20)</a>:</h4>
<p>yes</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
