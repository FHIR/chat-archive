---
layout: page
title: "FHIR Chat  · extension on one choice of polymorphic element · conformance"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/index.html">conformance</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/extension.20on.20one.20choice.20of.20polymorphic.20element.html">extension on one choice of polymorphic element</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153915837"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/extension%20on%20one%20choice%20of%20polymorphic%20element/near/153915837" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brett Esler <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/extension.20on.20one.20choice.20of.20polymorphic.20element.html#153915837">(Oct 25 2017 at 03:07)</a>:</h4>
<p>Hi all - query on extending one of the datatype choices in an element for example; Patient.deceased[x] - would like to extend Patient.deceasedDateTime whilst still allowing Patient.deaceasedBoolean (with no extension).  I could not work out how to explicitly do this... do I need to extend deceased[x] then add constraint or is there a direct way to do this with a profile?</p>



<a name="153915839"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/extension%20on%20one%20choice%20of%20polymorphic%20element/near/153915839" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/extension.20on.20one.20choice.20of.20polymorphic.20element.html#153915839">(Oct 25 2017 at 03:15)</a>:</h4>
<p>In R4 draft and forward, if your profile references Patient.deceasedDateTime, whatever you say will be presumed to be about that particular type slice and will in no way prevent Patient.deceasedBoolean from being present.  (That wasn't the inference of all systems in R3 and prior.)</p>



<a name="153915842"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/extension%20on%20one%20choice%20of%20polymorphic%20element/near/153915842" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brett Esler <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/extension.20on.20one.20choice.20of.20polymorphic.20element.html#153915842">(Oct 25 2017 at 03:42)</a>:</h4>
<p>Thanks <span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> can I extend deceased[x] in general for now in R3?</p>



<a name="153915843"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/extension%20on%20one%20choice%20of%20polymorphic%20element/near/153915843" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/extension.20on.20one.20choice.20of.20polymorphic.20element.html#153915843">(Oct 25 2017 at 03:50)</a>:</h4>
<p>well, pretty much, the same way, since it's the R4 logic that applies in the validator :-(</p>



<a name="153915844"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/extension%20on%20one%20choice%20of%20polymorphic%20element/near/153915844" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brett Esler <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/extension.20on.20one.20choice.20of.20polymorphic.20element.html#153915844">(Oct 25 2017 at 03:51)</a>:</h4>
<p>I can't seem to slice on deceased[x] and build in IG publisher</p>
<p>java.lang.Exception: Exception loading <a href="http://hl7.org.au/fhir/StructureDefinitio" target="_blank" title="http://hl7.org.au/fhir/StructureDefinitio">http://hl7.org.au/fhir/StructureDefinitio</a><br>
 n/au-patient: Attempt to a slice an element that does not repeat: Patient.deceas<br>
 ed[x]/null from <a href="http://hl7.org/fhir/StructureDefinition/date" target="_blank" title="http://hl7.org/fhir/StructureDefinition/date">http://hl7.org/fhir/StructureDefinition/date</a> in <a href="http://hl7.org.a" target="_blank" title="http://hl7.org.a">http://hl7.org.a</a><br>
 u/fhir/StructureDefinition/au-patient<br>
        at org.hl7.fhir.igtools.publisher.Publisher.load(Publisher.java:1950)<br>
        at org.hl7.fhir.igtools.publisher.Publisher.loadConformance(Publisher.ja<br>
 va:1640)<br>
         at org.hl7.fhir.igtools.publisher.Publisher.createIg(Publisher.java:366) </p>
<div class="codehilite"><pre><span></span>     at org.hl7.fhir.igtools.publisher.Publisher.execute(Publisher.java:336)
     at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:3907)
</pre></div>


<p>Caused by: org.hl7.fhir.exceptions.DefinitionException: Attempt to a slice an el<br>
 ement that does not repeat: Patient.deceased[x]/null from <a href="http://hl7.org/fhir/St" target="_blank" title="http://hl7.org/fhir/St">http://hl7.org/fhir/St</a><br>
 ructureDefinition/date in <a href="http://hl7.org.au/fhir/StructureDefinition/au-patient" target="_blank" title="http://hl7.org.au/fhir/StructureDefinition/au-patient">http://hl7.org.au/fhir/StructureDefinition/au-patient</a><br>
         at org.hl7.fhir.r4.conformance.ProfileUtilities.processPaths(ProfileUtil<br>
 ities.java:609)<br>
         at org.hl7.fhir.r4.conformance.ProfileUtilities.generateSnapshot(Profile<br>
 Utilities.java:363)<br>
         at org.hl7.fhir.r4.context.SimpleWorkerContext.seeMetadataResource(Simpl<br>
 eWorkerContext.java:568)<br>
         at org.hl7.fhir.r4.context.BaseWorkerContext.cacheResource(BaseWorkerCon<br>
 text.java:158)<br>
         at org.hl7.fhir.igtools.publisher.Publisher.load(Publisher.java:1948)<br>
         ... 4 more<br>
 Exception in thread "main" java.lang.NullPointerException<br>
         at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:3917)<br>
 Press any key to continue . . .</p>



<a name="153915845"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/extension%20on%20one%20choice%20of%20polymorphic%20element/near/153915845" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/extension.20on.20one.20choice.20of.20polymorphic.20element.html#153915845">(Oct 25 2017 at 03:53)</a>:</h4>
<p>I'm going to run on the validation stuff early next week</p>



<a name="153915846"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/extension%20on%20one%20choice%20of%20polymorphic%20element/near/153915846" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/extension.20on.20one.20choice.20of.20polymorphic.20element.html#153915846">(Oct 25 2017 at 03:53)</a>:</h4>
<p>(R unconference tmorrow/friday)</p>



<a name="153915848"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/extension%20on%20one%20choice%20of%20polymorphic%20element/near/153915848" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/extension.20on.20one.20choice.20of.20polymorphic.20element.html#153915848">(Oct 25 2017 at 04:02)</a>:</h4>
<p>I've hit that before.  If you declare the cardinality, the problem goes away.</p>



<a name="153915854"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/extension%20on%20one%20choice%20of%20polymorphic%20element/near/153915854" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brett Esler <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/extension.20on.20one.20choice.20of.20polymorphic.20element.html#153915854">(Oct 25 2017 at 04:22)</a>:</h4>
<p>Thanks <span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span>  think that has got me past that one for the IG build... much appreciated</p>



<a name="153915935"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/extension%20on%20one%20choice%20of%20polymorphic%20element/near/153915935" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/extension.20on.20one.20choice.20of.20polymorphic.20element.html#153915935">(Oct 25 2017 at 09:50)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="191368">@Brett Esler</span>, in Forge you can specify this by explicitly slicing the Patient.deceased[x] element. If you slice a choice type element, Forge automatically initializes the slicinng discriminator for a type slice. Now you can add specific slices for individual type choices and define type-specific constraints.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
