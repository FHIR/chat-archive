---
layout: page
title: "FHIR Chat  · Unable to resolve discriminator in definitions · conformance"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/index.html">conformance</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Unable.20to.20resolve.20discriminator.20in.20definitions.html">Unable to resolve discriminator in definitions</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="197536113"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Unable%20to%20resolve%20discriminator%20in%20definitions/near/197536113" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Unable.20to.20resolve.20discriminator.20in.20definitions.html#197536113">(May 14 2020 at 10:45)</a>:</h4>
<p>In the CG IG we have the following discriminator on Observation.derivedFrom: Slice: Unordered, Open by type:resolve(), pattern:resolve().code</p>



<a name="197536161"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Unable%20to%20resolve%20discriminator%20in%20definitions/near/197536161" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Unable.20to.20resolve.20discriminator.20in.20definitions.html#197536161">(May 14 2020 at 10:46)</a>:</h4>
<p>(<a href="http://build.fhir.org/ig/HL7/genomics-reporting/haplotype.html">http://build.fhir.org/ig/HL7/genomics-reporting/haplotype.html</a>)</p>



<a name="197536214"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Unable%20to%20resolve%20discriminator%20in%20definitions/near/197536214" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Unable.20to.20resolve.20discriminator.20in.20definitions.html#197536214">(May 14 2020 at 10:47)</a>:</h4>
<p>We want to discriminate by type as derivedFrom can be an Observation or a MolecularSequence, pattern:resolve().code is used to discriminate the different Observations</p>



<a name="197536314"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Unable%20to%20resolve%20discriminator%20in%20definitions/near/197536314" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Unable.20to.20resolve.20discriminator.20in.20definitions.html#197536314">(May 14 2020 at 10:48)</a>:</h4>
<p>When trying to validate examples against the profile we are getting: <code>  Error @ Bundle.entry[9].resource.ofType(Observation).derivedFrom[0] (line 428, col14) : Unable to resolve discriminator in definitions: code</code></p>



<a name="197536784"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Unable%20to%20resolve%20discriminator%20in%20definitions/near/197536784" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Unable.20to.20resolve.20discriminator.20in.20definitions.html#197536784">(May 14 2020 at 10:53)</a>:</h4>
<p>For the slices we added Pattern like: <code>{"coding":[{"system":"http://loinc.org","code":"69548-6"}]}</code><br>
<a href="/user_uploads/10155/20A8FhV70LNQkFSdwbhqByFb/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/10155/20A8FhV70LNQkFSdwbhqByFb/image.png" title="image.png"><img src="/user_uploads/10155/20A8FhV70LNQkFSdwbhqByFb/image.png"></a></div>



<a name="197536817"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Unable%20to%20resolve%20discriminator%20in%20definitions/near/197536817" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Unable.20to.20resolve.20discriminator.20in.20definitions.html#197536817">(May 14 2020 at 10:53)</a>:</h4>
<p>But these patterns aren't applied to the slices by the IG publisher.</p>



<a name="197538001"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Unable%20to%20resolve%20discriminator%20in%20definitions/near/197538001" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Unable.20to.20resolve.20discriminator.20in.20definitions.html#197538001">(May 14 2020 at 11:09)</a>:</h4>
<p>do you want to make a validator test case? (valid and invalid examples, and profile)</p>



<a name="197538973"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Unable%20to%20resolve%20discriminator%20in%20definitions/near/197538973" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Unable.20to.20resolve.20discriminator.20in.20definitions.html#197538973">(May 14 2020 at 11:20)</a>:</h4>
<p>will do</p>



<a name="197539044"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Unable%20to%20resolve%20discriminator%20in%20definitions/near/197539044" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Unable.20to.20resolve.20discriminator.20in.20definitions.html#197539044">(May 14 2020 at 11:21)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191316">Grahame Grieve</span> <a href="#narrow/stream/179177-conformance/topic/Unable.20to.20resolve.20discriminator.20in.20definitions/near/197538001">said</a>:</p>
<blockquote>
<p>do you want to make a validator test case? (valid and invalid examples, and profile)</p>
</blockquote>
<p>do you think the content in the pattern column is correct? Was not sure if can do a pattern like this on a reference.</p>



<a name="197539770"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Unable%20to%20resolve%20discriminator%20in%20definitions/near/197539770" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Unable.20to.20resolve.20discriminator.20in.20definitions.html#197539770">(May 14 2020 at 11:31)</a>:</h4>
<p>looks ok to me</p>



<a name="197556872"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Unable%20to%20resolve%20discriminator%20in%20definitions/near/197556872" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Unable.20to.20resolve.20discriminator.20in.20definitions.html#197556872">(May 14 2020 at 13:51)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> <span class="user-mention" data-user-id="191451">@Patrick Werner</span> Is <code>Open by type:resolve()</code> somehow valid (or is that just a typo)?  As far as I know, slicing.discriminator.type must be "value | exists | pattern | type | profile".</p>



<a name="197557358"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Unable%20to%20resolve%20discriminator%20in%20definitions/near/197557358" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Unable.20to.20resolve.20discriminator.20in.20definitions.html#197557358">(May 14 2020 at 13:55)</a>:</h4>
<p>thats how it is rendered, in JSON:</p>
<div class="codehilite"><pre><span></span><code>    <span class="s2">&quot;slicing&quot;</span> <span class="err">:</span> <span class="p">{</span>
          <span class="nt">&quot;discriminator&quot;</span> <span class="p">:</span> <span class="p">[</span>
            <span class="p">{</span>
              <span class="nt">&quot;type&quot;</span> <span class="p">:</span> <span class="s2">&quot;type&quot;</span><span class="p">,</span>
              <span class="nt">&quot;path&quot;</span> <span class="p">:</span> <span class="s2">&quot;resolve()&quot;</span>
            <span class="p">},</span>
            <span class="p">{</span>
              <span class="nt">&quot;type&quot;</span> <span class="p">:</span> <span class="s2">&quot;pattern&quot;</span><span class="p">,</span>
              <span class="nt">&quot;path&quot;</span> <span class="p">:</span> <span class="s2">&quot;resolve().code&quot;</span>
            <span class="p">}</span>
          <span class="p">],</span>
          <span class="nt">&quot;rules&quot;</span> <span class="p">:</span> <span class="s2">&quot;open&quot;</span>
        <span class="p">}</span>
</code></pre></div>



<a name="197557896"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Unable%20to%20resolve%20discriminator%20in%20definitions/near/197557896" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Unable.20to.20resolve.20discriminator.20in.20definitions.html#197557896">(May 14 2020 at 13:58)</a>:</h4>
<p>OK, yeah.  Never mind.  It looked strange to me for some reason when you posted that - but I have the same in my IG - except that I use $this.resolve() as the path. :)</p>



<a name="197558232"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Unable%20to%20resolve%20discriminator%20in%20definitions/near/197558232" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Unable.20to.20resolve.20discriminator.20in.20definitions.html#197558232">(May 14 2020 at 14:01)</a>:</h4>
<p>Sometimes the double use of 'type' can be confusing (particularly if you read it wrong!).</p>



<a name="197570862"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Unable%20to%20resolve%20discriminator%20in%20definitions/near/197570862" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Unable.20to.20resolve.20discriminator.20in.20definitions.html#197570862">(May 14 2020 at 15:19)</a>:</h4>
<p>oh yes!</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
