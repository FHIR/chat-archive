---
layout: page
title: "FHIR Chat  · Matching profiles to resources · conformance"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/index.html">conformance</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Matching.20profiles.20to.20resources.html">Matching profiles to resources</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="181920509"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Matching%20profiles%20to%20resources/near/181920509" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eeva Turkka <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Matching.20profiles.20to.20resources.html#181920509">(Nov 26 2019 at 13:28)</a>:</h4>
<p>Today we had discussions at Finnish PH SIG meeting about confomance, profiles and validation of resources and <span class="user-mention" data-user-id="191316">@Grahame Grieve</span>  mentioned "don't declare profile on resources" (as in put it in the meta tag of the resource).</p>
<p>There are multiple ways of matching a profile to a resource, but really no way to describe this in a profile.  Obvious solution would be to create a mapping table in the software receiving there resouce with rules: "if there's this code, then use these profiles", but that mapping  information still would need to be stored somewhere - code or properties etc.</p>
<p>Could there be a place to describe this in a StructureDefinition in a future version of FHIR? An extension would be a way to do this right away, but matching a resource to a profile seems for general cases to be quite a complex problem.</p>



<a name="181924143"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Matching%20profiles%20to%20resources/near/181924143" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Mayfield <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Matching.20profiles.20to.20resources.html#181924143">(Nov 26 2019 at 14:09)</a>:</h4>
<p>I'm seeing this from a different angle, maybe this is from v2 experience but I would have routed on resource data (not profile). <br>
As a receiving system I may expect and mandate the resources follow XYZ profile and validate them accordingly.</p>



<a name="181924702"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Matching%20profiles%20to%20resources/near/181924702" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eeva Turkka <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Matching.20profiles.20to.20resources.html#181924702">(Nov 26 2019 at 14:15)</a>:</h4>
<p>I believe this is close to the viewpoint we discussed, but the case is that there are many profiles for each resource type so there needs to be a set way to match between resources and profiles.</p>



<a name="181928609"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Matching%20profiles%20to%20resources/near/181928609" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Matching.20profiles.20to.20resources.html#181928609">(Nov 26 2019 at 14:56)</a>:</h4>
<p>I think that this would be a good thing to resolve. I suspect it needs to be expressed a search criteria - if the resource meets this search criteria, then this profile is applicable. But I wonder whether it belongs in the capability statement rather than the structure definition - is it a property of the profile itself, or of the system?</p>



<a name="181944934"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Matching%20profiles%20to%20resources/near/181944934" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Matching.20profiles.20to.20resources.html#181944934">(Nov 26 2019 at 17:38)</a>:</h4>
<p>You are entering a hornets nest here. Whether or not profiles should be stated or not and by whom has not been discussed in detail. At least I haven't heard about the resulting silver bullet</p>



<a name="181945365"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Matching%20profiles%20to%20resources/near/181945365" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Matching.20profiles.20to.20resources.html#181945365">(Nov 26 2019 at 17:41)</a>:</h4>
<p>I consider profile statements in ressources as the same as interface declarations in object oriented languages</p>



<a name="181945623"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Matching%20profiles%20to%20resources/near/181945623" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Matching.20profiles.20to.20resources.html#181945623">(Nov 26 2019 at 17:44)</a>:</h4>
<p>The difference is that the number of relevant interface declarations is pretty small and will generally be by intention by whoever creates the class.  On the other hand, the number of potentially relevant profiles when you consider all possible consumers is extremely large - and is unknowable at the time the instance is created.  You can't count on instances declaring the profiles you care about.</p>



<a name="181951633"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Matching%20profiles%20to%20resources/near/181951633" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Matching.20profiles.20to.20resources.html#181951633">(Nov 26 2019 at 18:50)</a>:</h4>
<p>The keyword here is: "potentially relevant profiles" - and the conformant profiles can be changed in meta without affecting the version of the resource. It entirely depends on the intention of what you are trying to communicate. While a Patient resource instance can be conformant to e.g. an IPS Patient profile at some point, it is probably plausible that the same resource may be conformant to a US core patient profile at some point. You don't necessarily have to state that information if that is not of importance/relevant to you.</p>



<a name="181952331"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Matching%20profiles%20to%20resources/near/181952331" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Matching.20profiles.20to.20resources.html#181952331">(Nov 26 2019 at 18:57)</a>:</h4>
<p>we don't need to buy into this argument to see that it may be useful to be able to declare: 'for resources that meet this criteria the server will enforce this profile'</p>



<a name="181952631"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Matching%20profiles%20to%20resources/near/181952631" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Matching.20profiles.20to.20resources.html#181952631">(Nov 26 2019 at 19:00)</a>:</h4>
<p>Ain't that very close to just stating a profile in meta of the resource? I get that there's a difference but what happens afterwards that criteria? Is the profile then added to the resource meta?</p>



<a name="181952833"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Matching%20profiles%20to%20resources/near/181952833" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Matching.20profiles.20to.20resources.html#181952833">(Nov 26 2019 at 19:02)</a>:</h4>
<p>it might be. I would recommend against that, but would also recommend against recommending for or against it in the spec</p>



<a name="181952955"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Matching%20profiles%20to%20resources/near/181952955" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Matching.20profiles.20to.20resources.html#181952955">(Nov 26 2019 at 19:04)</a>:</h4>
<blockquote>
<p>recommend against recommending for or against it in the spec</p>
</blockquote>
<p>In general?</p>



<a name="181952985"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Matching%20profiles%20to%20resources/near/181952985" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Matching.20profiles.20to.20resources.html#181952985">(Nov 26 2019 at 19:04)</a>:</h4>
<p>in this case, if we add something like this as an element or an extension</p>



<a name="181953175"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Matching%20profiles%20to%20resources/near/181953175" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Matching.20profiles.20to.20resources.html#181953175">(Nov 26 2019 at 19:06)</a>:</h4>
<p>I really can't see the problem here - maybe my scope or perspective on this subject is too narrow? I can't see why and how this is a problem in general to state the profile that a resource conforms to.</p>



<a name="181953245"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Matching%20profiles%20to%20resources/near/181953245" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Matching.20profiles.20to.20resources.html#181953245">(Nov 26 2019 at 19:07)</a>:</h4>
<p>I will write a blog post about it</p>



<a name="181957292"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Matching%20profiles%20to%20resources/near/181957292" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Matching.20profiles.20to.20resources.html#181957292">(Nov 26 2019 at 19:53)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> let me know when it's done</p>



<a name="182015629"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Matching%20profiles%20to%20resources/near/182015629" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Matching.20profiles.20to.20resources.html#182015629">(Nov 27 2019 at 12:55)</a>:</h4>
<p>back to the question. I think it makes sense to define an extension (for now, at least) to CapabilityStatement.rest.resource like this:</p>
<div class="codehilite"><pre><span></span>  <span class="s2">&quot;extension&quot;</span> <span class="err">:</span> <span class="p">[{</span>
   <span class="nt">&quot;url&quot;</span> <span class="p">:</span> <span class="s2">&quot;http://hl7.org/fhir/StructureDefinition/capabilitystatement-applied-profile&quot;</span><span class="p">,</span>
   <span class="nt">&quot;extension&quot;</span> <span class="p">:</span> <span class="p">[{</span>
      <span class="nt">&quot;url&quot;</span> <span class="p">:</span> <span class="s2">&quot;criteria&quot;</span><span class="p">,</span>
     <span class="nt">&quot;valueString&quot;</span> <span class="p">:</span> <span class="s2">&quot;?code=1234-5&quot;</span>
   <span class="p">},{</span>
      <span class="nt">&quot;url&quot;</span> <span class="p">:</span> <span class="s2">&quot;profile&quot;</span><span class="p">,</span>
     <span class="nt">&quot;valueCanonical&quot;</span> <span class="p">:</span> <span class="s2">&quot;http://myuri/something&quot;</span>
   <span class="p">}]</span>
  <span class="p">}]</span>
</pre></div>



<a name="182015873"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Matching%20profiles%20to%20resources/near/182015873" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Matching.20profiles.20to.20resources.html#182015873">(Nov 27 2019 at 12:58)</a>:</h4>
<p>I propose it here because I think that it's a system thing, to decide when to apply the profile. And because I think it's actually more useful to do this than <code>CapabilityStatement.supportedProfile</code> which we use but I don't think people conform to the full details. This is a lesser statement. </p>
<p>On the other hand, <span class="user-mention" data-user-id="192813">@Eeva Turkka</span> proposed this as a feature of StructureDefinition, and I can see it being useful there also - this StructureDefinition is intended to apply to resources that meet the following criteria:</p>
<div class="codehilite"><pre><span></span><span class="s2">&quot;extension&quot;</span> <span class="err">:</span> <span class="p">[{</span>
   <span class="nt">&quot;url&quot;</span> <span class="p">:</span> <span class="s2">&quot;http://hl7.org/fhir/StructureDefinition/structuredefinition-appliesTo&quot;</span><span class="p">,</span>
   <span class="nt">&quot;valueString&quot;</span> <span class="p">:</span> <span class="s2">&quot;?code=1234-5&quot;</span>
  <span class="p">}]</span>
</pre></div>



<a name="182019499"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Matching%20profiles%20to%20resources/near/182019499" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eeva Turkka <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Matching.20profiles.20to.20resources.html#182019499">(Nov 27 2019 at 13:42)</a>:</h4>
<p>I guess my feeling about putting it to the profile is based on having criteria and profile existing in sync with each other and existing as an removable or addable item as is ("just add a profile and it's matching criteria and then resources matching that will pass validation").  Is there a difference between using searchparameters or a fhirpath expression for the match?</p>



<a name="182019626"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Matching%20profiles%20to%20resources/near/182019626" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Matching.20profiles.20to.20resources.html#182019626">(Nov 27 2019 at 13:43)</a>:</h4>
<p>search parameters are a call out to scalable criteria based on indexing, where as FHIRPath implies that you (a) have FHIRPath and (b) can apply it to one resource at a time. </p>
<p>I don't want to have to iterate all profiles running FHIRPath for each - I want some indexed list of profiles I have to test against</p>



<a name="183189830"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Matching%20profiles%20to%20resources/near/183189830" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Matching.20profiles.20to.20resources.html#183189830">(Dec 11 2019 at 19:09)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> I'm sure you haven't had time to get to it yet, but any update on the blog post?</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
