---
layout: page
title: "FHIR Chat  · missing Appointment invariant? · conformance"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/index.html">conformance</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/missing.20Appointment.20invariant.3F.html">missing Appointment invariant?</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="210503906"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/missing%20Appointment%20invariant%3F/near/210503906" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/missing.20Appointment.20invariant.3F.html#210503906">(Sep 18 2020 at 11:03)</a>:</h4>
<p>Shouldn't there be an invariant on Appointments that doesn't allow end to be before start?</p>



<a name="210509436"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/missing%20Appointment%20invariant%3F/near/210509436" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/missing.20Appointment.20invariant.3F.html#210509436">(Sep 18 2020 at 12:08)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> is that a thing for PA WG?</p>



<a name="210509533"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/missing%20Appointment%20invariant%3F/near/210509533" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/missing.20Appointment.20invariant.3F.html#210509533">(Sep 18 2020 at 12:09)</a>:</h4>
<p>Yes it would be, feel free to log it in jira</p>



<a name="210509668"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/missing%20Appointment%20invariant%3F/near/210509668" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/missing.20Appointment.20invariant.3F.html#210509668">(Sep 18 2020 at 12:10)</a>:</h4>
<p>its actually messing up some queries/indexes as I've seen some clients actually violate this physically implicit constraint</p>



<a name="210510055"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/missing%20Appointment%20invariant%3F/near/210510055" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/missing.20Appointment.20invariant.3F.html#210510055">(Sep 18 2020 at 12:15)</a>:</h4>
<p>done - see <a href="https://jira.hl7.org/browse/FHIR-28578">https://jira.hl7.org/browse/FHIR-28578</a></p>



<a name="210510225"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/missing%20Appointment%20invariant%3F/near/210510225" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/missing.20Appointment.20invariant.3F.html#210510225">(Sep 18 2020 at 12:16)</a>:</h4>
<p>I have some vague memory that there's some workflows where the end is before the start transiently, but I can't remember why. But is a resource like that technically invalid? I'm not convinced</p>



<a name="210510482"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/missing%20Appointment%20invariant%3F/near/210510482" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/missing.20Appointment.20invariant.3F.html#210510482">(Sep 18 2020 at 12:19)</a>:</h4>
<p>i would say yes - it is technically invalid. One could probably argument that start and end can be equal (in some universe), but i cannot see how an end could be before a start</p>



<a name="210514029"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/missing%20Appointment%20invariant%3F/near/210514029" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/missing.20Appointment.20invariant.3F.html#210514029">(Sep 18 2020 at 12:58)</a>:</h4>
<p>The precision could be different, so the invariant will need to take that into account</p>



<a name="210566232"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/missing%20Appointment%20invariant%3F/near/210566232" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/missing.20Appointment.20invariant.3F.html#210566232">(Sep 18 2020 at 19:39)</a>:</h4>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> the datatype is an instant ... so I can't  see precision as a problem</p>



<a name="210566605"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/missing%20Appointment%20invariant%3F/near/210566605" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/missing.20Appointment.20invariant.3F.html#210566605">(Sep 18 2020 at 19:43)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> <a href="/user_uploads/10155/bKAF6Z-LIexFYSrjKy5iwevt/image.png">image.png</a> is that your case?</p>
<div class="message_inline_image"><a href="/user_uploads/10155/bKAF6Z-LIexFYSrjKy5iwevt/image.png" title="image.png"><img src="/user_uploads/10155/bKAF6Z-LIexFYSrjKy5iwevt/image.png"></a></div>



<a name="210569352"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/missing%20Appointment%20invariant%3F/near/210569352" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/missing.20Appointment.20invariant.3F.html#210569352">(Sep 18 2020 at 20:06)</a>:</h4>
<p>Instant seems inappropriate - precision is way too high.  <span class="user-mention" data-user-id="191367">@Brian Postlethwaite</span> ?</p>



<a name="210569459"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/missing%20Appointment%20invariant%3F/near/210569459" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/missing.20Appointment.20invariant.3F.html#210569459">(Sep 18 2020 at 20:07)</a>:</h4>
<p>its been like that since at least DSTU2</p>



<a name="210575297"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/missing%20Appointment%20invariant%3F/near/210575297" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/missing.20Appointment.20invariant.3F.html#210575297">(Sep 18 2020 at 21:05)</a>:</h4>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> change the datatype and I might as well start handing out the pitchforks and torches ;)</p>



<a name="210595666"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/missing%20Appointment%20invariant%3F/near/210595666" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/missing.20Appointment.20invariant.3F.html#210595666">(Sep 19 2020 at 03:51)</a>:</h4>
<p>You can have your imprecise appointments Lloyd... The rest of us will know when we are expected to arrive.</p>



<a name="210614620"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/missing%20Appointment%20invariant%3F/near/210614620" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/missing.20Appointment.20invariant.3F.html#210614620">(Sep 19 2020 at 13:14)</a>:</h4>
<p>This should do it: Appointment.start.exists() and Appointment.end.exists() implies Appointment.start &lt;= Appointment.end</p>



<a name="210636554"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/missing%20Appointment%20invariant%3F/near/210636554" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/missing.20Appointment.20invariant.3F.html#210636554">(Sep 19 2020 at 21:37)</a>:</h4>
<p><span class="user-mention" data-user-id="191367">@Brian Postlethwaite</span>  PA doesn't think that patients record appointments for themselves as just the day?</p>



<a name="210636626"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/missing%20Appointment%20invariant%3F/near/210636626" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/missing.20Appointment.20invariant.3F.html#210636626">(Sep 19 2020 at 21:39)</a>:</h4>
<p>that sounds like a presentation thingy</p>



<a name="210636681"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/missing%20Appointment%20invariant%3F/near/210636681" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/missing.20Appointment.20invariant.3F.html#210636681">(Sep 19 2020 at 21:40)</a>:</h4>
<p>oh? They have to record a full date/time but it isn't shown to them?</p>



<a name="210636709"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/missing%20Appointment%20invariant%3F/near/210636709" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/missing.20Appointment.20invariant.3F.html#210636709">(Sep 19 2020 at 21:41)</a>:</h4>
<p>well as long as the field is of type instant I can't see they can get around such precision</p>



<a name="210636755"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/missing%20Appointment%20invariant%3F/near/210636755" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/missing.20Appointment.20invariant.3F.html#210636755">(Sep 19 2020 at 21:42)</a>:</h4>
<p>so I think that use case is about more then just presentation</p>



<a name="210636773"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/missing%20Appointment%20invariant%3F/near/210636773" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/missing.20Appointment.20invariant.3F.html#210636773">(Sep 19 2020 at 21:43)</a>:</h4>
<p>that might be true - but that goes beyond the issue reported</p>



<a name="210636788"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/missing%20Appointment%20invariant%3F/near/210636788" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/missing.20Appointment.20invariant.3F.html#210636788">(Sep 19 2020 at 21:44)</a>:</h4>
<p>in respect to the current model - I would say there is a missing invariant</p>



<a name="210636828"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/missing%20Appointment%20invariant%3F/near/210636828" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/missing.20Appointment.20invariant.3F.html#210636828">(Sep 19 2020 at 21:44)</a>:</h4>
<p>if the current model is subject to be changed ... well thats another case then</p>



<a name="210640140"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/missing%20Appointment%20invariant%3F/near/210640140" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/missing.20Appointment.20invariant.3F.html#210640140">(Sep 19 2020 at 23:22)</a>:</h4>
<p>You can pencil one in using the requestedperiod which can be as fluffy as you like, or put start and end of the day in the values, and set the minutesduration to be 15 mins, which indicates that there's a slot sometime in that range.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
