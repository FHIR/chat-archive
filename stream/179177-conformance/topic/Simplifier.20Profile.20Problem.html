---
layout: page
title: "FHIR Chat  · Simplifier Profile Problem · conformance"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/index.html">conformance</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Simplifier.20Profile.20Problem.html">Simplifier Profile Problem</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="200303308"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Simplifier%20Profile%20Problem/near/200303308" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Simplifier.20Profile.20Problem.html#200303308">(Jun 09 2020 at 23:17)</a>:</h4>
<p>Issue <a href="https://github.com/hapifhir/org.hl7.fhir.core/issues/235">https://github.com/hapifhir/org.hl7.fhir.core/issues/235</a> relates to the profile <a href="https://simplifier.net/MedizininformatikInitiative-ModulPerson/PatientIn">https://simplifier.net/MedizininformatikInitiative-ModulPerson/PatientIn</a>. Here's the relevant part of the definition:</p>



<a name="200303817"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Simplifier%20Profile%20Problem/near/200303817" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Simplifier.20Profile.20Problem.html#200303817">(Jun 09 2020 at 23:24)</a>:</h4>
<p>(with commentary):</p>
<div class="codehilite"><pre><span></span><code>      <span class="p">{</span>
        <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;Patient.identifier:versicherungsnummer_gkv.type&quot;</span><span class="p">,</span>
        <span class="nt">&quot;path&quot;</span><span class="p">:</span> <span class="s2">&quot;Patient.identifier.type&quot;</span><span class="p">,</span>
        <span class="nt">&quot;min&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="nt">&quot;patternCodeableConcept&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="nt">&quot;coding&quot;</span><span class="p">:</span> <span class="p">[</span>
            <span class="p">{</span>
              <span class="nt">&quot;system&quot;</span><span class="p">:</span> <span class="s2">&quot;http://fhir.de/CodeSystem/identifier-type-de-basis&quot;</span><span class="p">,</span>
              <span class="nt">&quot;code&quot;</span><span class="p">:</span> <span class="s2">&quot;GKV&quot;</span>
            <span class="p">}</span>
          <span class="p">]</span>
        <span class="p">},</span>
        <span class="nt">&quot;mustSupport&quot;</span><span class="p">:</span> <span class="kc">true</span>
      <span class="p">}</span><span class="err">,</span>
</code></pre></div>


<p>ok, so we applied a pattern to <code>Patient.identifier.type</code>. Fine. But then what follows:</p>
<div class="codehilite"><pre><span></span><code>      <span class="p">{</span>
        <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;Patient.identifier:versicherungsnummer_gkv.type.coding&quot;</span><span class="p">,</span>
        <span class="nt">&quot;path&quot;</span><span class="p">:</span> <span class="s2">&quot;Patient.identifier.type.coding&quot;</span><span class="p">,</span>
        <span class="nt">&quot;mustSupport&quot;</span><span class="p">:</span> <span class="kc">true</span>
      <span class="p">}</span><span class="err">,</span>
</code></pre></div>


<p>ok, then we say that Patient.identifier.type.coding is must-support.</p>
<div class="codehilite"><pre><span></span><code>      <span class="p">{</span>
        <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;Patient.identifier:versicherungsnummer_gkv.type.coding:GKV-Type&quot;</span><span class="p">,</span>
        <span class="nt">&quot;path&quot;</span><span class="p">:</span> <span class="s2">&quot;Patient.identifier.type.coding&quot;</span><span class="p">,</span>
        <span class="nt">&quot;sliceName&quot;</span><span class="p">:</span> <span class="s2">&quot;GKV-Type&quot;</span><span class="p">,</span>
        <span class="nt">&quot;mustSupport&quot;</span><span class="p">:</span> <span class="kc">true</span>
      <span class="p">}</span><span class="err">,</span>
</code></pre></div>


<p>wait - what? What's with the slice name? where's the slice definition? why is it sliced if we have a pattern?</p>
<div class="codehilite"><pre><span></span><code>      <span class="p">{</span>
        <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;Patient.identifier:versicherungsnummer_gkv.type.coding:GKV-Type.system&quot;</span><span class="p">,</span>
        <span class="nt">&quot;path&quot;</span><span class="p">:</span> <span class="s2">&quot;Patient.identifier.type.coding.system&quot;</span><span class="p">,</span>
        <span class="nt">&quot;mustSupport&quot;</span><span class="p">:</span> <span class="kc">true</span>
      <span class="p">}</span><span class="err">,</span>
      <span class="p">{</span>
        <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;Patient.identifier:versicherungsnummer_gkv.type.coding:GKV-Type.code&quot;</span><span class="p">,</span>
        <span class="nt">&quot;path&quot;</span><span class="p">:</span> <span class="s2">&quot;Patient.identifier.type.coding.code&quot;</span><span class="p">,</span>
        <span class="nt">&quot;mustSupport&quot;</span><span class="p">:</span> <span class="kc">true</span>
      <span class="p">}</span><span class="err">,</span>
</code></pre></div>


<p>What is it trying to say here to say that these individual elements are must-support when we already imposed a pattern? (my german is rudimentary but I couldn't find any definition of what must-support means)</p>



<a name="200303831"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Simplifier%20Profile%20Problem/near/200303831" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Simplifier.20Profile.20Problem.html#200303831">(Jun 09 2020 at 23:25)</a>:</h4>
<p><span class="user-mention" data-user-id="203235">@Ward Weistra</span> <span class="user-mention" data-user-id="193430">@Alexander Zautke</span> for your comment please</p>



<a name="200423884"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Simplifier%20Profile%20Problem/near/200423884" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Zautke <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Simplifier.20Profile.20Problem.html#200423884">(Jun 10 2020 at 14:33)</a>:</h4>
<p>"wait - what? What's with the slice name? where's the slice definition? why is it sliced if we have a pattern?"<br>
"Patient.identifier:versicherungsnummer_gkv" applies a type profile of "<a href="http://fhir.de/StructureDefinition/identifier-kvid-10">http://fhir.de/StructureDefinition/identifier-kvid-10</a>" (See <a href="https://simplifier.net/basisprofil-de-r4/identifierkvid10">https://simplifier.net/basisprofil-de-r4/identifierkvid10</a>). This profile contains a slicing definition for "Identifier.type.coding" on value(system). As well as all other definitions around "GKV-Type" (also all other slices of Patient.identifier).</p>



<a name="200423975"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Simplifier%20Profile%20Problem/near/200423975" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Zautke <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Simplifier.20Profile.20Problem.html#200423975">(Jun 10 2020 at 14:34)</a>:</h4>
<p>"why is it sliced if we have a pattern?"</p>
<p>The identifier slice is open, I think I've added the pattern to indicate that all derived profiles, if they choose to add a new slice, should have a pattern on Identifier.type. The type profile identifier-kvid-10 on the other hand is mandatory as it's part of the German national base profiles.</p>



<a name="200425057"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Simplifier%20Profile%20Problem/near/200425057" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Zautke <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Simplifier.20Profile.20Problem.html#200425057">(Jun 10 2020 at 14:41)</a>:</h4>
<p>"What is it trying to say here to say that these individual elements are must-support when we already imposed a pattern? (my german is rudimentary but I couldn't find any definition of what must-support means)"</p>
<p>I don't like the solution either, there is a link to the IPS rules on must-support (<a href="https://simplifier.net/guide/MedizininformatikInitiative-ModulPerson-ImplementationGuide/FHIR-Profile">https://simplifier.net/guide/MedizininformatikInitiative-ModulPerson-ImplementationGuide/FHIR-Profile</a>). However, some implementers of these profiles have the opinion that they can throw everything away, when receiving the resources, that is not marked as must-support.</p>



<a name="200513005"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Simplifier%20Profile%20Problem/near/200513005" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Simplifier.20Profile.20Problem.html#200513005">(Jun 11 2020 at 07:32)</a>:</h4>
<p>not sure how much the IPS definition of must-support helps with that. Stupid people will be stupid anyway</p>



<a name="200513019"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Simplifier%20Profile%20Problem/near/200513019" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Simplifier.20Profile.20Problem.html#200513019">(Jun 11 2020 at 07:32)</a>:</h4>
<p>my apologies for missing the type profile reference - I didn't look far enough back</p>



<a name="200554260"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Simplifier%20Profile%20Problem/near/200554260" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Simplifier.20Profile.20Problem.html#200554260">(Jun 11 2020 at 14:49)</a>:</h4>
<p>Yes.  I think trying to use a single mustSupport tag on an element to define both sender and receiver expectations and requirements potentially leaves things open to some weird and unintended interpretations.  But it is what we have at the moment.  And implementers do need to apply some common sense. :)</p>



<a name="200618802"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Simplifier%20Profile%20Problem/near/200618802" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Simplifier.20Profile.20Problem.html#200618802">(Jun 11 2020 at 23:11)</a>:</h4>
<p><span class="user-mention" data-user-id="193430">@Alexander Zautke</span>  ok back to this, I investigated some more, and improved the error message :</p>
<div class="codehilite"><pre><span></span><code>Attempt to a slice an element that does not repeat: Reference.identifier/Reference.identifier from http://hl7.org/fhir/StructureDefinition/Reference in https://www.medizininformatik-initiative.de/fhir/core/StructureDefinition/Patient, at element Patient.identifier:versicherungsnummer_gkv.assigner.identifier (slice = iknr)
</code></pre></div>



<a name="200618813"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Simplifier%20Profile%20Problem/near/200618813" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Simplifier.20Profile.20Problem.html#200618813">(Jun 11 2020 at 23:11)</a>:</h4>
<p>that looks like a right error message to me. The profile does try to slice identifier, and it isn't something that can be sliced.</p>



<a name="201582668"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Simplifier%20Profile%20Problem/near/201582668" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ward Weistra <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Simplifier.20Profile.20Problem.html#201582668">(Jun 22 2020 at 09:13)</a>:</h4>
<p>Logged <a href="https://github.com/FirelyTeam/fhir-net-api/issues/1400">https://github.com/FirelyTeam/fhir-net-api/issues/1400</a> for the <a class="stream" data-stream-id="179171" href="/#narrow/stream/179171-dotnet">#dotnet</a>  API, feel free to add to it.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
