---
layout: page
title: "FHIR Chat  · Profile on existing Extension · conformance"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/index.html">conformance</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Profile.20on.20existing.20Extension.html">Profile on existing Extension</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153929286"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Profile%20on%20existing%20Extension/near/153929286" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Profile.20on.20existing.20Extension.html#153929286">(Jan 17 2018 at 17:34)</a>:</h4>
<p>We are using the usual-route extension in our medication ressources:<br>
<a href="http://hl7.org/fhir/StructureDefinition/medication-usualRoute" target="_blank" title="http://hl7.org/fhir/StructureDefinition/medication-usualRoute">http://hl7.org/fhir/StructureDefinition/medication-usualRoute</a><br>
We now want to constrain the Extension by slicing the coding to enforce the usage of a mandatory codeSystem for our Context.<br>
I tried this with Forge, but the mechanism how to do it is unclear to me. Can i build derived Extension from another Extension, or create a profile for the coding inside the Extension?</p>



<a name="153929399"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Profile%20on%20existing%20Extension/near/153929399" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vadim Peretokin <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Profile.20on.20existing.20Extension.html#153929399">(Jan 18 2018 at 09:21)</a>:</h4>
<p>Apply the extension in the profile and then slice it :)</p>



<a name="153929417"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Profile%20on%20existing%20Extension/near/153929417" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Profile.20on.20existing.20Extension.html#153929417">(Jan 18 2018 at 14:08)</a>:</h4>
<p>Thanks Vadim. Unfortunately i can't slice it, as Forge is not displaying the Extension Contents in Forge. <br>
I think it is a bug, as i always get the warning that the Extension can't be resolved tough it is in the same path and opened already in  Forge. Or am i doing it wrong? <span class="user-mention" data-user-id="191336">@Michel Rutten</span> </p>
<p>Steps to reproduce:<br>
Open <a href="http://hl7.org/fhir/StructureDefinition/medication-usualRoute" target="_blank" title="http://hl7.org/fhir/StructureDefinition/medication-usualRoute">http://hl7.org/fhir/StructureDefinition/medication-usualRoute</a> profile in Forge, create a new Profile for Medication, add the Extension to the Medication. -&gt; no Elements from the Extension are shown.<br>
If you close the Medication Profile and reopen it you get the warning: unable to resolve profile</p>



<a name="153929430"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Profile%20on%20existing%20Extension/near/153929430" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Profile.20on.20existing.20Extension.html#153929430">(Jan 18 2018 at 15:11)</a>:</h4>
<p>Update: we deleted the SnapshotComponent of the Profile, now it is working again in Forge. The only left issue is that Forge adds the following Extensions by itself:</p>
<div class="codehilite"><pre><span></span>       <span class="nt">&lt;issue&gt;</span>
        <span class="nt">&lt;severity</span> <span class="na">value=</span><span class="s">&quot;information&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;code</span> <span class="na">value=</span><span class="s">&quot;processing&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;diagnostics</span> <span class="na">value=</span><span class="s">&quot;Unknown extension http://hl7.org/fhir/StructureDefinition/elementdefinition-maxValueSet&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;location</span> <span class="na">value=</span><span class="s">&quot;StructureDefinition.snapshot.element[5].binding.extension[1]&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/issue&gt;</span>
    <span class="nt">&lt;issue&gt;</span>
        <span class="nt">&lt;severity</span> <span class="na">value=</span><span class="s">&quot;information&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;code</span> <span class="na">value=</span><span class="s">&quot;processing&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;diagnostics</span> <span class="na">value=</span><span class="s">&quot;Unknown extension http://hl7.org/fhir/StructureDefinition/elementdefinition-bindingName&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;location</span> <span class="na">value=</span><span class="s">&quot;StructureDefinition.snapshot.element[5].binding.extension[2]&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/issue&gt;</span>
    <span class="nt">&lt;issue&gt;</span>
        <span class="nt">&lt;severity</span> <span class="na">value=</span><span class="s">&quot;information&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;code</span> <span class="na">value=</span><span class="s">&quot;processing&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;diagnostics</span> <span class="na">value=</span><span class="s">&quot;Unknown extension http://hl7.org/fhir/StructureDefinition/elementdefinition-isCommonBinding&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;location</span> <span class="na">value=</span><span class="s">&quot;StructureDefinition.snapshot.element[5].binding.extension[3]&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/issue&gt;</span>
</pre></div>



<a name="153929432"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Profile%20on%20existing%20Extension/near/153929432" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Profile.20on.20existing.20Extension.html#153929432">(Jan 18 2018 at 15:47)</a>:</h4>
<p>Steps to reproduce:<br>
Create Medication Profile, change something (i set the min card. of Ingridient to 1), save.</p>
<p>Forge adds the following Extensions in the Snapshot:<br>
elementdefinition-maxValueSet<br>
elementdefinition-bindingName<br>
elementdefinition-isCommonBinding<br>
elementdefinition-translatable</p>



<a name="153929449"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Profile%20on%20existing%20Extension/near/153929449" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Profile.20on.20existing.20Extension.html#153929449">(Jan 18 2018 at 17:41)</a>:</h4>
<p>It should be possible to profile an extension to further refine it and reference that profiled extension in other profiles.</p>



<a name="153929450"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Profile%20on%20existing%20Extension/near/153929450" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Profile.20on.20existing.20Extension.html#153929450">(Jan 18 2018 at 17:42)</a>:</h4>
<p>If Forge doesn't support this yet, it should certainly be on the list because there are lots of cases where this will be needed.</p>



<a name="153929463"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Profile%20on%20existing%20Extension/near/153929463" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Profile.20on.20existing.20Extension.html#153929463">(Jan 18 2018 at 18:41)</a>:</h4>
<p>It is possible, it was only a bug related to the Snapshot Creation of Forge.</p>



<a name="153929609"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Profile%20on%20existing%20Extension/near/153929609" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Profile.20on.20existing.20Extension.html#153929609">(Jan 19 2018 at 13:07)</a>:</h4>
<p>I am pretty sure Forge supports profiling extensions, but Michel knows for sure ;-)   We won't be online today I think, so we'll know after the weekend...</p>



<a name="153929932"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Profile%20on%20existing%20Extension/near/153929932" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Profile.20on.20existing.20Extension.html#153929932">(Jan 22 2018 at 14:11)</a>:</h4>
<p>i got it to work. But i had to manually delete the snapshot of the profile in which i was using the extension. I've seen this behaviour several times in Forge. The Snapshot get's "corrupted". If i delete it and load only the cleaned profile, containig only the differential part, it works again.</p>



<a name="153930326"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Profile%20on%20existing%20Extension/near/153930326" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Profile.20on.20existing.20Extension.html#153930326">(Jan 23 2018 at 16:18)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="191451">@Patrick Werner</span>, thank you for the feedback!<br>
Forge completely disregards existing snapshot components and always re-generates all snapshots from the ground up. However you report that sometimes an existing snapshot apparently has some effect. This is a bit unexpected? I'll try to investigate your profile and determine what's causing this when I have some time.<br>
BTW Are you visiting the New Orleans WGM?</p>



<a name="153981613"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Profile%20on%20existing%20Extension/near/153981613" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Stefan Lang <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Profile.20on.20existing.20Extension.html#153981613">(Aug 03 2018 at 09:49)</a>:</h4>
<p>Any news on that one?<br>
I'm facing the same problem right now, using Forge 19.1</p>



<a name="153981614"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Profile%20on%20existing%20Extension/near/153981614" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Stefan Lang <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Profile.20on.20existing.20Extension.html#153981614">(Aug 03 2018 at 09:50)</a>:</h4>
<p>Patrick's workaround doesn't work for me</p>



<a name="153981615"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Profile%20on%20existing%20Extension/near/153981615" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Profile.20on.20existing.20Extension.html#153981615">(Aug 03 2018 at 09:53)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="191436">@Stefan Lang</span>, as far as I am aware, Forge supports further constraining referenced extensions. Can you describe the issue and steps to reproduce?</p>



<a name="153981617"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Profile%20on%20existing%20Extension/near/153981617" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Stefan Lang <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Profile.20on.20existing.20Extension.html#153981617">(Aug 03 2018 at 09:58)</a>:</h4>
<p>Sure.</p>
<p>The issue is: extensions added to an element don't show up in the slices after slicing that element.</p>
<p>Steps to reproduce:<br>
1. create an extension for the context Whateverresource.some.element<br>
2. create a profile of Whateverresource<br>
3. extend Whateverresource.some.element with the above created extension<br>
4. Click "Slice" for Whateverresource.some.element<br>
5. Click "Add Slice" for Whateverresource.some.element<br>
6. no extensions show up in the slice just created</p>



<a name="153981621"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Profile%20on%20existing%20Extension/near/153981621" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Maximilian Reith <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Profile.20on.20existing.20Extension.html#153981621">(Aug 03 2018 at 10:16)</a>:</h4>
<p>Same problem here... the workaround is not working for me...using Forge 19.1 too.</p>



<a name="153981628"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Profile%20on%20existing%20Extension/near/153981628" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Stefan Lang <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Profile.20on.20existing.20Extension.html#153981628">(Aug 03 2018 at 10:25)</a>:</h4>
<p>Example files (extension on Patient.generalPractitioner.identifier):<br>
<a href="/user_uploads/10155/zbCSQ4KeV0zwUTE4JV0Av4hb/DummyExtension.StructureDefinition.xml" target="_blank" title="DummyExtension.StructureDefinition.xml">DummyExtension.StructureDefinition.xml</a> <a href="/user_uploads/10155/pBqp_cSYsoaxkBxKdLjCye9L/DummyPatient.StructureDefinition.xml" target="_blank" title="DummyPatient.StructureDefinition.xml">DummyPatient.StructureDefinition.xml</a></p>



<a name="153981678"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Profile%20on%20existing%20Extension/near/153981678" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Profile.20on.20existing.20Extension.html#153981678">(Aug 03 2018 at 11:05)</a>:</h4>
<p>Ah, now I see. This is a known limitation of slicing support in Forge.<br>
When an element is sliced, Forge hides the regular child elements of the sliced element and instead displays the associated named slices as child elements. As a result, you cannot edit constraints on regular child elements of a sliced element in Forge. This includes extensions on the sliced element.<br>
Note that Forge will not corrupt/remove any existing constraints on regular child elements of a sliced element. The elements are not visible in the user interface and you cannot edit them. However any hidden constraints will still be included in the output when saving the resource.<br>
To properly support this scenario, I need to completely re-design the slicing UI. This has been on the backlog for a while now. I'd definitely like to improve slicing support. But that won't be any time soon, as we are first going to improve other parts of the application.</p>



<a name="153981738"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Profile%20on%20existing%20Extension/near/153981738" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Stefan Lang <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Profile.20on.20existing.20Extension.html#153981738">(Aug 03 2018 at 12:08)</a>:</h4>
<p>So for now, it is either manually edit the SD XML or, if one is stuck to Forge, find a different way to represent the requirements without that kind of slices.</p>



<a name="153981759"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Profile%20on%20existing%20Extension/near/153981759" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Profile.20on.20existing.20Extension.html#153981759">(Aug 03 2018 at 12:32)</a>:</h4>
<p>Alternatively, you could use Forge to create the profile with slicing, then manually hack in the extension. If you then open the profile again in Forge, you won't see the extension, but the application will not remove it.<br>
I'll see if I can implement an (advanced) application option that will allow you to toggle element visibility.</p>



<a name="153981781"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Profile%20on%20existing%20Extension/near/153981781" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Stefan Lang <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Profile.20on.20existing.20Extension.html#153981781">(Aug 03 2018 at 13:04)</a>:</h4>
<p>Yes, that's what I meant. Definitely not starting the SD manually ;)</p>



<a name="153981783"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Profile%20on%20existing%20Extension/near/153981783" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Stefan Lang <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Profile.20on.20existing.20Extension.html#153981783">(Aug 03 2018 at 13:05)</a>:</h4>
<p>The visibility option would be great</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
