---
layout: page
title: "FHIR Chat  · Validator throws ArrayIndexOutOfBoundsException with profile · conformance"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/index.html">conformance</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Validator.20throws.20ArrayIndexOutOfBoundsException.20with.20profile.html">Validator throws ArrayIndexOutOfBoundsException with profile</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="194231623"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Validator%20throws%20ArrayIndexOutOfBoundsException%20with%20profile/near/194231623" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Eastwood <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Validator.20throws.20ArrayIndexOutOfBoundsException.20with.20profile.html#194231623">(Apr 15 2020 at 21:42)</a>:</h4>
<p>Trying to get the validator to validate example instances against a given profile, and am getting an ArrayIndexOutOfBoundsException error.</p>
<p>This occurs:</p>
<ul>
<li>with FHIR Validation tool Version 4.2.17-SNAPSHOT (current latest)</li>
<li>using different examples in different IGs (tried with <a href="https://github.com/hl7au/au-fhir-base" title="https://github.com/hl7au/au-fhir-base">HL7 AU Base Implementation Guide</a> and <a href="https://github.com/HL7/bser" title="https://github.com/HL7/bser">HL7 Bidirection Services eReferrals FHIR IG</a>, and a local IG)</li>
<li>only when the <code>-profile &lt;URL&gt;</code> switch is added to the command</li>
</ul>
<p>The command used (once either of the above IGs are cloned locally) - having randomly chosen an example and paired profile:</p>
<div class="codehilite"><pre><span></span>java -jar FHIR-validator/org.hl7.fhir.validator.jar -version 4.0.1 input/resources/condition/condition-BSeR-Diagnosis-eve-everywoman-diabetes.xml -ig http://hl7.org/fhir/us/bser -profile http://hl7.org/fhir/us/bser/StructureDefinition/BSeR-Diagnosis
</pre></div>


<p>with the output </p>
<div class="codehilite"><pre><span></span>FHIR Validation tool Version 4.2.17-SNAPSHOT (Git# 4bd0d60e5c1a). Built 2020-04-12T08:25:34.223+10:00 (3 days old)
Detected Java version: 13.0.2 from /usr/lib/jvm/java-13-openjdk on amd64 (64bit). 3964MB available
Arguments: -version 4.0.1 input/resources/condition/condition-BSeR-Diagnosis-eve-everywoman-diabetes.xml -ig http://hl7.org/fhir/us/bser -profile http://hl7.org/fhir/us/bser/StructureDefinition/BSeR-Diagnosis
Directories: Current = /home/rob/pc_stuff/fhir/IGs/bser, Package Cache = /home/rob/.fhir/packages
Exception in thread &quot;main&quot; java.lang.ArrayIndexOutOfBoundsException: Index 7 out of bounds for length 7
    at org.hl7.fhir.validation.cli.Params.loadCliContext(Params.java:97)
    at org.hl7.fhir.validation.Validator.main(Validator.java:124)
</pre></div>


<p>The result is identical with the other IGs that I have tried. And without the <code>-profile</code> parameter, the run is clean with expected output.</p>
<p>Having read the <a href="https://confluence.hl7.org/display/FHIR/Using+the+FHIR+Validator" title="https://confluence.hl7.org/display/FHIR/Using+the+FHIR+Validator">validator specs</a> and the command line help,  I think this is the correct invocation, but happy to be told otherwise.</p>
<p>Any clues?</p>



<a name="194870444"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Validator%20throws%20ArrayIndexOutOfBoundsException%20with%20profile/near/194870444" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Validator.20throws.20ArrayIndexOutOfBoundsException.20with.20profile.html#194870444">(Apr 21 2020 at 22:35)</a>:</h4>
<p>I'm just trying the same thing now (it's been a little while) - trying to validate an instance with the IPS IG and our AllergyIntolerance profile with the latest validator (4.2.18), and I'm getting the same error <code>Exception in thread "main" java.lang.ArrayIndexOutOfBoundsException: Index 7 out of bounds for length 7</code>.  <span class="user-mention" data-user-id="191316">@Grahame Grieve</span>?</p>



<a name="194870532"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Validator%20throws%20ArrayIndexOutOfBoundsException%20with%20profile/near/194870532" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Validator.20throws.20ArrayIndexOutOfBoundsException.20with.20profile.html#194870532">(Apr 21 2020 at 22:36)</a>:</h4>
<p><span class="user-mention" data-user-id="248736">@Mark Iantorno</span></p>



<a name="194935352"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Validator%20throws%20ArrayIndexOutOfBoundsException%20with%20profile/near/194935352" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Validator.20throws.20ArrayIndexOutOfBoundsException.20with.20profile.html#194935352">(Apr 22 2020 at 14:04)</a>:</h4>
<p>Fix is here: <a href="https://github.com/hapifhir/org.hl7.fhir.core/pull/180" title="https://github.com/hapifhir/org.hl7.fhir.core/pull/180">https://github.com/hapifhir/org.hl7.fhir.core/pull/180</a></p>



<a name="195018992"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Validator%20throws%20ArrayIndexOutOfBoundsException%20with%20profile/near/195018992" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Eastwood <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Validator.20throws.20ArrayIndexOutOfBoundsException.20with.20profile.html#195018992">(Apr 23 2020 at 05:01)</a>:</h4>
<p>Thanks <span class="user-mention" data-user-id="248736">@Mark Iantorno</span> and <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> <br>
Can I ask though - I see that the PR has been merged in, but does this need for me to wait for a new version of the Validator or does "cloud magic" happen?<br>
I ask because re-running the command in the original post, I still get a failure, albeit slightly different:</p>
<div class="codehilite"><pre><span></span>java -jar org.hl7.fhir.validator.jar -version 4.0.1 input/resources/condition/condition-BSeR-Diagnosis-eve-everywoman-diabetes.xml -ig http://hl7.org/fhir/us/bser -profile http://hl7.org/fhir/us/bser/StructureDefinition/BSeR-Diagnosis

FHIR Validation tool Version 4.2.18-SNAPSHOT (Git# 175d5fa0b72d). Built 2020-04-21T14:15:21.346+10:00 (48 hours old)
Detected Java version: 1.8.0_191 from C:\Program Files\Java\jre1.8.0_191 on amd64 (64bit). 3625MB available
Arguments: -version 4.0.1 input/resources/condition/condition-BSeR-Diagnosis-eve-everywoman-diabetes.xml -ig http://hl7.org/fhir/us/bser -profile http://hl7.org/fhir/us/bser/StructureDefinition/BSeR-Diagnosis
Directories: Current = C:\work\git\bser, Package Cache = C:\Users\rob.eastwood\.fhir\packages
Exception in thread &quot;main&quot; java.lang.ArrayIndexOutOfBoundsException: 7
        at org.hl7.fhir.validation.cli.Params.loadCliContext(Params.java:97)
        at org.hl7.fhir.validation.Validator.main(Validator.java:124)
</pre></div>


<p>Maybe there is something I need to do my end?</p>



<a name="195019231"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Validator%20throws%20ArrayIndexOutOfBoundsException%20with%20profile/near/195019231" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Validator.20throws.20ArrayIndexOutOfBoundsException.20with.20profile.html#195019231">(Apr 23 2020 at 05:08)</a>:</h4>
<p>I haven't done a release yet</p>



<a name="195019235"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Validator%20throws%20ArrayIndexOutOfBoundsException%20with%20profile/near/195019235" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Eastwood <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Validator.20throws.20ArrayIndexOutOfBoundsException.20with.20profile.html#195019235">(Apr 23 2020 at 05:08)</a>:</h4>
<p>gotcha - sorry for the noise!</p>



<a name="195128164"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Validator%20throws%20ArrayIndexOutOfBoundsException%20with%20profile/near/195128164" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Eastwood <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Validator.20throws.20ArrayIndexOutOfBoundsException.20with.20profile.html#195128164">(Apr 23 2020 at 22:38)</a>:</h4>
<p>Thank you very much <span class="user-mention" data-user-id="248736">@Mark Iantorno</span> and <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> - I can confirm that is now fixed</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
