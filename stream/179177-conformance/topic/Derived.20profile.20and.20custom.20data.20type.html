---
layout: page
title: "FHIR Chat  · Derived profile and custom data type · conformance"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/index.html">conformance</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Derived.20profile.20and.20custom.20data.20type.html">Derived profile and custom data type</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153897104"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Derived%20profile%20and%20custom%20data%20type/near/153897104" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Stefan Lang <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Derived.20profile.20and.20custom.20data.20type.html#153897104">(Jul 17 2017 at 17:18)</a>:</h4>
<p>I'm currently creating a derived profile and am a bit stuck at the point of further constraining elements of a contained custom data type.<br>
To be precise: the profile I'm deriving from is <a href="https://simplifier.net/BasisprofilDE/patient-de-basis" target="_blank" title="https://simplifier.net/BasisprofilDE/patient-de-basis">https://simplifier.net/BasisprofilDE/patient-de-basis</a> which uses <a href="https://simplifier.net/BasisprofilDE/address-de-basis" target="_blank" title="https://simplifier.net/BasisprofilDE/address-de-basis">https://simplifier.net/BasisprofilDE/address-de-basis</a> as it's sole type for address.<br>
In my derived profile, I want to add some additional constraints, like must-support, cardinality etc., to certain elements of the address.<br>
At least in Forge, I can't find a possibility to do so, since Forge shows the structure of the FHIR base Address datatype instead of address-de-basis within my derived profile.<br>
So, my question is: how can I achieve this in Forge, or if not possible, how should that be defined in the profile's XML?<br>
Or, third option, is it even possible to constrain custom data types within a derived profile?</p>



<a name="153897178"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Derived%20profile%20and%20custom%20data%20type/near/153897178" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mirjam Baltus <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Derived.20profile.20and.20custom.20data.20type.html#153897178">(Jul 18 2017 at 08:10)</a>:</h4>
<p><span class="user-mention" data-user-id="191436">@Stefan Lang</span> Do you have all the relevant StructureDefinitions in one folder? Forge will try to find referenced profiles in the same folder, or subfolders. If they're found,  Forge is able to load the changes you made to the data type and show them. If Forge cannot load the referenced profile, it will default to showing the standard data type fields.</p>



<a name="153897182"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Derived%20profile%20and%20custom%20data%20type/near/153897182" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Derived.20profile.20and.20custom.20data.20type.html#153897182">(Jul 18 2017 at 08:26)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="191436">@Stefan Lang</span>, when you open a profile, Forge will try to resolve all referenced external (element type) profiles from the containing file folder (and subfolders). So try to place all the referenced datatype &amp; extension profiles in the same folder.<br>
For now, you have to manually download/import all dependencies. In a future release, we're planning to implement resolving external profiles from Simplifier.</p>



<a name="153897184"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Derived%20profile%20and%20custom%20data%20type/near/153897184" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Stefan Lang <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Derived.20profile.20and.20custom.20data.20type.html#153897184">(Jul 18 2017 at 08:33)</a>:</h4>
<p>Thanks Mirjam and Michel. I have the profiles and all required extensions in the same folder.<br>
I just subsequently created a new derived profile on patient-de-basis to double check.<br>
Strange enough, on the first try address showed the elements of the base Address type, while on the second try I actually see it as profiled in address-de-basis ...</p>



<a name="153897185"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Derived%20profile%20and%20custom%20data%20type/near/153897185" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Stefan Lang <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Derived.20profile.20and.20custom.20data.20type.html#153897185">(Jul 18 2017 at 08:35)</a>:</h4>
<p>This is really weird, it seems to work at the moment ...</p>



<a name="153897186"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Derived%20profile%20and%20custom%20data%20type/near/153897186" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Stefan Lang <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Derived.20profile.20and.20custom.20data.20type.html#153897186">(Jul 18 2017 at 08:47)</a>:</h4>
<p>I also noticed that on the last try, Forge needed much longer to open the new derived profile. So I suspect that for whatever reason it failed to successfully scan the folder at the earlier tries.</p>



<a name="153897187"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Derived%20profile%20and%20custom%20data%20type/near/153897187" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Derived.20profile.20and.20custom.20data.20type.html#153897187">(Jul 18 2017 at 08:48)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="191436">@Stefan Lang</span>, note that Forge caches the contents of profile working folders on the first access. Currently this is not always clear in the UI (TODO). Restarting the application (and also closing all open files) will clear all caches and re-scan the actual file folder contents.</p>



<a name="153897190"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Derived%20profile%20and%20custom%20data%20type/near/153897190" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Stefan Lang <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Derived.20profile.20and.20custom.20data.20type.html#153897190">(Jul 18 2017 at 08:58)</a>:</h4>
<p>Ok, that might be the explanation for the longer time to open.<br>
Well, atm I can't reproduce the problem. Should have done a screenshot to convince myself that it was not me who failed :D</p>



<a name="153897191"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Derived%20profile%20and%20custom%20data%20type/near/153897191" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Derived.20profile.20and.20custom.20data.20type.html#153897191">(Jul 18 2017 at 09:00)</a>:</h4>
<p>I'm aware that the internal file management currently isn't very clear to the end user. We have plans to completely rewrite the session explorer, in order to improve this. However I haven't had time to work on this yet.</p>



<a name="153897317"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Derived%20profile%20and%20custom%20data%20type/near/153897317" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Stefan Lang <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Derived.20profile.20and.20custom.20data.20type.html#153897317">(Jul 19 2017 at 15:19)</a>:</h4>
<p><span class="user-mention" data-user-id="191347">@Mirjam Baltus</span> <span class="user-mention" data-user-id="191336">@Michel Rutten</span> Just got the Forge issue once again.<br>
This is the base profile in Forge:<br>
<a href="/user_uploads/10155/I9dMMJuGmUAmlfUa_k1JRqyM/patient-de-basis-name.png" target="_blank" title="patient-de-basis-name.png">patient-de-basis-name.png</a> <br>
And this is the derived profile:<br>
<a href="/user_uploads/10155/1_QCH8HvXwsbjxP_rsQBFT-S/patient-de-vsdm-name.png" target="_blank" title="patient-de-vsdm-name.png">patient-de-vsdm-name.png</a> <br>
Note that e.g. the extensions to family are missing in the derived profile.</p>
<div class="message_inline_image"><a href="/user_uploads/10155/I9dMMJuGmUAmlfUa_k1JRqyM/patient-de-basis-name.png" target="_blank" title="patient-de-basis-name.png"><img src="/user_uploads/10155/I9dMMJuGmUAmlfUa_k1JRqyM/patient-de-basis-name.png"></a></div><div class="message_inline_image"><a href="/user_uploads/10155/1_QCH8HvXwsbjxP_rsQBFT-S/patient-de-vsdm-name.png" target="_blank" title="patient-de-vsdm-name.png"><img src="/user_uploads/10155/1_QCH8HvXwsbjxP_rsQBFT-S/patient-de-vsdm-name.png"></a></div>



<a name="153897321"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Derived%20profile%20and%20custom%20data%20type/near/153897321" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Stefan Lang <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Derived.20profile.20and.20custom.20data.20type.html#153897321">(Jul 19 2017 at 15:24)</a>:</h4>
<p>Same for address, i.e. both custom data types (humanname-de-basis and address-de-basis) are there as the type, but not in the representation.</p>



<a name="153897323"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Derived%20profile%20and%20custom%20data%20type/near/153897323" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mirjam Baltus <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Derived.20profile.20and.20custom.20data.20type.html#153897323">(Jul 19 2017 at 15:29)</a>:</h4>
<p>Stefan, do you have specific steps that can reproduce the issue? My tests all seem to work correctly. If so, please send the steps to <a href="mailto:forge@furore.com" title="mailto:forge@furore.com">forge@furore.com</a> so we can investigate and resolve it.</p>



<a name="153897324"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Derived%20profile%20and%20custom%20data%20type/near/153897324" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Stefan Lang <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Derived.20profile.20and.20custom.20data.20type.html#153897324">(Jul 19 2017 at 15:31)</a>:</h4>
<p>We store all profiles with snapshots from Forge for better representation in Simplifier. Manually removing the snapshot part from the XML solved it.<br>
I'll send you the steps I took by e-mail.</p>



<a name="153897396"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Derived%20profile%20and%20custom%20data%20type/near/153897396" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Townley-O&#x27;Neill <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Derived.20profile.20and.20custom.20data.20type.html#153897396">(Jul 20 2017 at 02:06)</a>:</h4>
<p>We have stopped generating snapshots in Forge and generate them using the IGPublisher.</p>



<a name="153897422"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Derived%20profile%20and%20custom%20data%20type/near/153897422" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Derived.20profile.20and.20custom.20data.20type.html#153897422">(Jul 20 2017 at 08:57)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="191436">@Stefan Lang</span>, thank you for the report. Are all referenced profiles available in the working folder? Because missing references may prevent Forge from building a full tree.<br>
FYI I'm currently working on a new release with a number of bug fixes. I'll try to also fix this issue.</p>



<a name="153897425"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Derived%20profile%20and%20custom%20data%20type/near/153897425" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Stefan Lang <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Derived.20profile.20and.20custom.20data.20type.html#153897425">(Jul 20 2017 at 09:17)</a>:</h4>
<p><span class="user-mention" data-user-id="191336">@Michel Rutten</span> the working folder is basically a clone of <a href="https://github.com/hl7germany/basisprofil-de" target="_blank" title="https://github.com/hl7germany/basisprofil-de">https://github.com/hl7germany/basisprofil-de</a> plus the core extensions we use.<br>
I'd be very happy to see the fix in the next release. It really slows down profiling</p>



<a name="153897426"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Derived%20profile%20and%20custom%20data%20type/near/153897426" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Derived.20profile.20and.20custom.20data.20type.html#153897426">(Jul 20 2017 at 09:24)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="191436">@Stefan Lang</span>, Last week I've managed to fix a nasty bug in the development branch regarding faulty element matching. I've tried your example in the latest internal build and it now seems to work correctly.<br>
Here's a screenshot of patient-de-vsdm:<br>
<a href="/user_uploads/10155/UK00txsBIMLiWTqZdsj_wtMR/Forge-Develop.PNG" target="_blank" title="Forge-Develop.PNG">Forge-Develop.PNG</a></p>
<div class="message_inline_image"><a href="/user_uploads/10155/UK00txsBIMLiWTqZdsj_wtMR/Forge-Develop.PNG" target="_blank" title="Forge-Develop.PNG"><img src="/user_uploads/10155/UK00txsBIMLiWTqZdsj_wtMR/Forge-Develop.PNG"></a></div>



<a name="153897455"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Derived%20profile%20and%20custom%20data%20type/near/153897455" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Stefan Lang <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Derived.20profile.20and.20custom.20data.20type.html#153897455">(Jul 20 2017 at 13:52)</a>:</h4>
<p>Thanks Michel, I'll give it a try</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
