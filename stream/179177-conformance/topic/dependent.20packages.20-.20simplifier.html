---
layout: page
title: "FHIR Chat  · dependent packages - simplifier · conformance"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/index.html">conformance</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/dependent.20packages.20-.20simplifier.html">dependent packages - simplifier</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="206562617"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/dependent%20packages%20-%20simplifier/near/206562617" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Mayfield <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/dependent.20packages.20-.20simplifier.html#206562617">(Aug 11 2020 at 11:06)</a>:</h4>
<p>I have a package <a href="https://packages.simplifier.net/UK.DM.r4/-/UK.DM.r4-0.0.28-dev.tgz">https://packages.simplifier.net/UK.DM.r4/-/UK.DM.r4-0.0.28-dev.tgz</a><br>
within simplifier it depends on several other packages. How should I find these from the tgz file?</p>
<p>What I want to do is download the package plus the related packages and run the resources through a custom FHIR Validator.</p>



<a name="206562638"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/dependent%20packages%20-%20simplifier/near/206562638" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Mayfield <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/dependent.20packages.20-.20simplifier.html#206562638">(Aug 11 2020 at 11:07)</a>:</h4>
<p>(or IG Package validation)</p>



<a name="206568185"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/dependent%20packages%20-%20simplifier/near/206568185" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/dependent.20packages.20-.20simplifier.html#206568185">(Aug 11 2020 at 12:28)</a>:</h4>
<p>what's the ids of the other packages?</p>



<a name="206792277"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/dependent%20packages%20-%20simplifier/near/206792277" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ward Weistra <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/dependent.20packages.20-.20simplifier.html#206792277">(Aug 13 2020 at 08:42)</a>:</h4>
<p><span class="user-mention" data-user-id="191687">@Kevin Mayfield</span> Unpack the package and find package.json in the package folder. That contains:</p>
<div class="codehilite"><pre><span></span><code>&quot;dependencies&quot;: {
    &quot;UK.Spine.r4&quot;: &quot;0.0.6-dev&quot;,
    &quot;UK.Core.r4&quot;: &quot;1.2.0&quot;,
    &quot;hl7.fhir.r4.core&quot;: &quot;4.0.1&quot;
  }
</code></pre></div>


<p>Which gives you the components to build up the download URLs for the other packages.</p>



<a name="206793305"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/dependent%20packages%20-%20simplifier/near/206793305" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Mayfield <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/dependent.20packages.20-.20simplifier.html#206793305">(Aug 13 2020 at 08:56)</a>:</h4>
<p>How did I miss that :) thanks</p>
<p>How would I know they were on simplifier. Using the IG Builder I would get the Uri for down within the ImplementationGuide resource e.g.</p>
<p>&lt;dependsOn&gt;<br>
    &lt;uri value="<a href="https://project-wildfyre.github.io/uk-testcore-r4/ImplementationGuide/uk.testcore.r4">https://project-wildfyre.github.io/uk-testcore-r4/ImplementationGuide/uk.testcore.r4</a>" /&gt;<br>
    &lt;packageId value="uk.testcore.r4"/&gt;<br>
    &lt;version value="dev"/&gt;<br>
  &lt;/dependsOn&gt;</p>



<a name="206794288"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/dependent%20packages%20-%20simplifier/near/206794288" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Mayfield <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/dependent.20packages.20-.20simplifier.html#206794288">(Aug 13 2020 at 09:10)</a>:</h4>
<p>Should the Simplifier IG resource have entries like:</p>
<p>&lt;dependsOn&gt;<br>
&lt;uri value="<a href="https://packages.simplifier.net/UK.Core.r4/-/UK.Core.r4-1.2.0.tgz">https://packages.simplifier.net/UK.Core.r4/-/UK.Core.r4-1.2.0.tgz</a>" /&gt;<br>
&lt;packageId value="UK.Core.r4"/&gt;<br>
&lt;version value="1.2.0"/&gt;<br>
&lt;/dependsOn&gt;</p>



<a name="206799156"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/dependent%20packages%20-%20simplifier/near/206799156" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ward Weistra <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/dependent.20packages.20-.20simplifier.html#206799156">(Aug 13 2020 at 10:19)</a>:</h4>
<p><span class="user-mention" data-user-id="191687">@Kevin Mayfield</span> I believe <code>dependsOn.uri</code> should have <a href="https://www.hl7.org/fhir/implementationguide-definitions.html#ImplementationGuide.dependsOn.uri">the canonical of the Implementation Guide</a> (= <a href="https://confluence.hl7.org/display/FHIR/NPM+Package+Specification#NPMPackageSpecification-ImplementationGuidesandpackages">canonical of the package</a>), not the download URL of the package.</p>
<p>Every package that is published to the package registry (like official publications by HL7, FHIR Foundation and any package published on Simplifier) is available on the package registry (available under the <a href="http://package.simplifier.net">package.simplifier.net</a> or the identical <a href="http://packages.fhir.org">packages.fhir.org</a> url).</p>
<p>I understand the IG Publisher will look the package based on the <code>packageId</code> and <code>version</code> only:</p>
<ul>
<li>If version is <code>dev</code>: It looks in only in your local cache</li>
<li>If version is <code>current</code>: It looks first in your local cache, if not current anymore or not available looks in <a href="https://build.fhir.org/ig/">https://build.fhir.org/ig/</a></li>
<li>If version is anything else: It looks first in your local cache, if not available looks in <a href="http://packages.fhir.org">packages.fhir.org</a> (==packages.simplifier.org)</li>
</ul>



<a name="206803834"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/dependent%20packages%20-%20simplifier/near/206803834" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/dependent.20packages.20-.20simplifier.html#206803834">(Aug 13 2020 at 11:29)</a>:</h4>
<p>yes that's true, except that the package resolution can start with a canonical URL instead of a packageId</p>



<a name="206805081"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/dependent%20packages%20-%20simplifier/near/206805081" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ward Weistra <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/dependent.20packages.20-.20simplifier.html#206805081">(Aug 13 2020 at 11:47)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> The packages you're getting here (<a href="https://github.com/hapifhir/org.hl7.fhir.core/blob/master/org.hl7.fhir.utilities/src/main/java/org/hl7/fhir/utilities/cache/FilesystemPackageCacheManager.java#L89">https://github.com/hapifhir/org.hl7.fhir.core/blob/master/org.hl7.fhir.utilities/src/main/java/org/hl7/fhir/utilities/cache/FilesystemPackageCacheManager.java#L89</a>) from the secondary package server, are those tooling related packages that Simplifier has refused to import? Or for when Simplifier doesn't pick them up quickly enough?</p>



<a name="206805185"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/dependent%20packages%20-%20simplifier/near/206805185" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/dependent.20packages.20-.20simplifier.html#206805185">(Aug 13 2020 at 11:48)</a>:</h4>
<p>both.</p>



<a name="206805231"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/dependent%20packages%20-%20simplifier/near/206805231" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/dependent.20packages.20-.20simplifier.html#206805231">(Aug 13 2020 at 11:49)</a>:</h4>
<p>I don't know how quickly simplifier picks them up, but the back up scans every hour, or on demand.</p>



<a name="206805278"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/dependent%20packages%20-%20simplifier/near/206805278" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/dependent.20packages.20-.20simplifier.html#206805278">(Aug 13 2020 at 11:49)</a>:</h4>
<p>and then there's the packages that <a href="http://packages.fhir.org">packages.fhir.org</a> won't pick up - hl7.fhir.pubpack being the critical one, though there are others</p>



<a name="206805330"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/dependent%20packages%20-%20simplifier/near/206805330" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/dependent.20packages.20-.20simplifier.html#206805330">(Aug 13 2020 at 11:50)</a>:</h4>
<p>btw, simplifier still does not export it's own package feed</p>



<a name="206922366"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/dependent%20packages%20-%20simplifier/near/206922366" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Mayfield <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/dependent.20packages.20-.20simplifier.html#206922366">(Aug 14 2020 at 12:08)</a>:</h4>
<p>Cheers, I'll do some experimentation.</p>



<a name="206925672"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/dependent%20packages%20-%20simplifier/near/206925672" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Mayfield <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/dependent.20packages.20-.20simplifier.html#206925672">(Aug 14 2020 at 12:50)</a>:</h4>
<p><a href="https://github.com/hapifhir/org.hl7.fhir.core/blob/master/org.hl7.fhir.utilities/src/main/java/org/hl7/fhir/utilities/cache/FilesystemPackageCacheManager.java">https://github.com/hapifhir/org.hl7.fhir.core/blob/master/org.hl7.fhir.utilities/src/main/java/org/hl7/fhir/utilities/cache/FilesystemPackageCacheManager.java</a></p>
<p>Doesn't pick up dependsOn packages does it. Presume IG Builder does this?</p>



<a name="207141510"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/dependent%20packages%20-%20simplifier/near/207141510" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ward Weistra <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/dependent.20packages.20-.20simplifier.html#207141510">(Aug 17 2020 at 13:11)</a>:</h4>
<p>Yes, I think it happens around here: <a href="https://github.com/HL7/fhir-ig-publisher/blob/master/org.hl7.fhir.publisher.core/src/main/java/org/hl7/fhir/igtools/publisher/Publisher.java#L2643">https://github.com/HL7/fhir-ig-publisher/blob/master/org.hl7.fhir.publisher.core/src/main/java/org/hl7/fhir/igtools/publisher/Publisher.java#L2643</a></p>



<a name="207185871"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/dependent%20packages%20-%20simplifier/near/207185871" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/dependent.20packages.20-.20simplifier.html#207185871">(Aug 17 2020 at 19:19)</a>:</h4>
<p>the version <code>current</code> means, for now, resolve on <a href="http://build.fhir.org">build.fhir.org</a> build record. It's on my long term list to also mean getting the latest from simplifier, when simplifier users want that and we know how it would work</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
