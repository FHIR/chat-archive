---
layout: page
title: "FHIR Chat  · Complex extensions reusing elements · conformance"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/index.html">conformance</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Complex.20extensions.20reusing.20elements.html">Complex extensions reusing elements</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153981571"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Complex%20extensions%20reusing%20elements/near/153981571" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Simone Heckmann <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Complex.20extensions.20reusing.20elements.html#153981571">(Aug 03 2018 at 08:43)</a>:</h4>
<p>I have a complex extension with the elements A and B which are again complex having multiple sub-element</p>
<div class="codehilite"><pre><span></span>A
  A1
  A2
  A3
B
  B1
  B2
</pre></div>


<p>Question: Can element A be an extension of B, so that I have</p>
<div class="codehilite"><pre><span></span>A
  A1
  A2
  A3
B
  B1
  B2
  A
    A1
    A2
    A3
</pre></div>


<p>?</p>
<p>If so, how do I define that (with Forge)?</p>



<a name="153981610"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Complex%20extensions%20reusing%20elements/near/153981610" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Complex.20extensions.20reusing.20elements.html#153981610">(Aug 03 2018 at 09:38)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="191450">@Simone Heckmann</span>, interesting scenario. <span class="emoji emoji-1f609" title="wink">:wink:</span> <br>
In theory, you may be able to (ab)use the <code>ElementDefinition.contentReference</code> property:<br>
Something like Extension.extension:B.extension:A.contentReference = "Extension.extension:A"<br>
However:</p>
<ul>
<li>I'm not sure if derived profiles/extension definitions are allowed to introduce new contentReferences?</li>
<li>I've never tested this in Forge, not sure if the tool supports this...</li>
</ul>



<a name="153981811"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Complex%20extensions%20reusing%20elements/near/153981811" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Complex.20extensions.20reusing.20elements.html#153981811">(Aug 03 2018 at 14:39)</a>:</h4>
<p>I expect the IGPublisher and validator would blow up too...</p>



<a name="153981817"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Complex%20extensions%20reusing%20elements/near/153981817" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Complex.20extensions.20reusing.20elements.html#153981817">(Aug 03 2018 at 14:46)</a>:</h4>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span>, is this even allowed by the spec?</p>



<a name="153981925"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Complex%20extensions%20reusing%20elements/near/153981925" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Complex.20extensions.20reusing.20elements.html#153981925">(Aug 03 2018 at 20:14)</a>:</h4>
<p>There's no prohibition against recursion in defining a complex extension.</p>



<a name="153981926"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Complex%20extensions%20reusing%20elements/near/153981926" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Complex.20extensions.20reusing.20elements.html#153981926">(Aug 03 2018 at 20:14)</a>:</h4>
<p>It's certainly not something explicitly contemplated or discussed, but technically it should be doable.</p>



<a name="153985703"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Complex%20extensions%20reusing%20elements/near/153985703" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Simone Heckmann <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Complex.20extensions.20reusing.20elements.html#153985703">(Aug 13 2018 at 08:06)</a>:</h4>
<p>IMO, this should work the same as with reusing Backbone-Elements, like we do with nested items in Questionnaire, for example.<br>
...which is - I guess - what Michel is proposing.</p>



<a name="153985711"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Complex%20extensions%20reusing%20elements/near/153985711" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Complex.20extensions.20reusing.20elements.html#153985711">(Aug 13 2018 at 09:50)</a>:</h4>
<p>Until now, I assumed that only core resource/datatype definitions (with StructureDefinition.derivation = specialization) are allowed to introduce a contentReference, to reduce complexity of the implementation. Interesting proposal however. Would you like to submit a gForge issue? i.e. also allow (complex) extension definitions to introduce a content reference.</p>



<a name="153985719"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Complex%20extensions%20reusing%20elements/near/153985719" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Complex.20extensions.20reusing.20elements.html#153985719">(Aug 13 2018 at 10:33)</a>:</h4>
<p>we have very specifically said, in r4, that only specialisations can use contentReference (after we considered all the truly confusing things you could do in a profile)</p>



<a name="153985729"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Complex%20extensions%20reusing%20elements/near/153985729" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Complex.20extensions.20reusing.20elements.html#153985729">(Aug 13 2018 at 11:04)</a>:</h4>
<p>Phew... tool smith sigh of relief ;p</p>



<a name="153985863"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Complex%20extensions%20reusing%20elements/near/153985863" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Hay <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Complex.20extensions.20reusing.20elements.html#153985863">(Aug 13 2018 at 17:56)</a>:</h4>
<p>Is deep nesting of complex extensions something to be encouraged? It kinda adds to the implementer complexity...</p>



<a name="153985876"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Complex%20extensions%20reusing%20elements/near/153985876" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Complex.20extensions.20reusing.20elements.html#153985876">(Aug 13 2018 at 19:19)</a>:</h4>
<p>Not encouraged.  Deeper nesting than 2 levels should be unusual except possibly in Basic</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
