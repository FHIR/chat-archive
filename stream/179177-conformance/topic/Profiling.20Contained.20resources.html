---
layout: page
title: "FHIR Chat  · Profiling Contained resources · conformance"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/index.html">conformance</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Profiling.20Contained.20resources.html">Profiling Contained resources</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="188517293"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Profiling%20Contained%20resources/near/188517293" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Profiling.20Contained.20resources.html#188517293">(Feb 19 2020 at 05:37)</a>:</h4>
<p>I have a use case where I want to have a Patient and Practitioner contained in a MedicationRequest resource, using contained references. I'm struggling to get the slicing defined.<br>
Error in my guide is:<br>
<code>Profile based discriminators must have a type with a profile</code></p>
<p>This was my first assumption:</p>
<div class="codehilite"><pre><span></span>        &lt;element id=&quot;MedicationRequest.contained&quot;&gt;
            &lt;path value=&quot;MedicationRequest.contained&quot; /&gt;
            &lt;slicing&gt;
                &lt;discriminator&gt;
                    &lt;type value=&quot;profile&quot; /&gt;
                    &lt;path value=&quot;resolve()&quot; /&gt;
                &lt;/discriminator&gt;
                &lt;rules value=&quot;closed&quot; /&gt;
            &lt;/slicing&gt;
            &lt;max value=&quot;2&quot; /&gt;
            &lt;mustSupport value=&quot;true&quot; /&gt;
        &lt;/element&gt;
        &lt;element id=&quot;MedicationRequest.contained:patient&quot;&gt;
            &lt;path value=&quot;MedicationRequest.contained&quot; /&gt;
            &lt;sliceName value=&quot;patient&quot; /&gt;
            &lt;min value=&quot;1&quot; /&gt;
            &lt;max value=&quot;1&quot; /&gt;
            &lt;type&gt;
                &lt;code value=&quot;Resource&quot; /&gt;
                &lt;profile value=&quot;http://fhir.fred.com.au/my-sl/StructureDefinition/mysl-patient&quot; /&gt;
            &lt;/type&gt;
            &lt;mustSupport value=&quot;true&quot; /&gt;
        &lt;/element&gt;
        &lt;element id=&quot;MedicationRequest.contained:practitioner&quot;&gt;
            &lt;path value=&quot;MedicationRequest.contained&quot; /&gt;
            &lt;sliceName value=&quot;practitioner&quot; /&gt;
            &lt;min value=&quot;1&quot; /&gt;
            &lt;max value=&quot;1&quot; /&gt;
            &lt;type&gt;
                &lt;code value=&quot;Resource&quot; /&gt;
                &lt;profile value=&quot;http://hl7.org/fhir/StructureDefinition/Practitioner&quot; /&gt;
            &lt;/type&gt;
            &lt;mustSupport value=&quot;true&quot; /&gt;
        &lt;/element&gt;
</pre></div>



<a name="188521709"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Profiling%20Contained%20resources/near/188521709" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Profiling.20Contained.20resources.html#188521709">(Feb 19 2020 at 07:40)</a>:</h4>
<p>sound right to me</p>



<a name="188552430"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Profiling%20Contained%20resources/near/188552430" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Profiling.20Contained.20resources.html#188552430">(Feb 19 2020 at 15:08)</a>:</h4>
<p>Not sure, but might it work if you change the discriminator path to <code>$this.resolve()</code>?</p>



<a name="188899260"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Profiling%20Contained%20resources/near/188899260" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Profiling.20Contained.20resources.html#188899260">(Feb 24 2020 at 04:53)</a>:</h4>
<p>Worked it out, makes sense now that I look at it again.<br>
<em>(Just in case someone else finds this in the future and wondered what happened)</em><br>
Issue was that I was using resolve() which is intended to follow a reference, not the inline content, so was expecting to have a targetProfile. <br>
Changing the slicing from profile to type was the trick.</p>
<p>So the error message could have been better to indicate that is must have a type with a <code>targetProfile</code> (not <code>profile</code>)</p>
<div class="codehilite"><pre><span></span>&lt;element id=&quot;MedicationRequest.contained&quot;&gt;
            &lt;path value=&quot;MedicationRequest.contained&quot; /&gt;
            &lt;slicing&gt;
                &lt;discriminator&gt;
                    &lt;type value=&quot;type&quot; /&gt;
                    &lt;path value=&quot;$this&quot; /&gt;
                &lt;/discriminator&gt;
                &lt;rules value=&quot;closed&quot; /&gt;
            &lt;/slicing&gt;
            &lt;max value=&quot;2&quot; /&gt;
            &lt;mustSupport value=&quot;true&quot; /&gt;
        &lt;/element&gt;
        &lt;element id=&quot;MedicationRequest.contained:patient&quot;&gt;
            &lt;path value=&quot;MedicationRequest.contained&quot; /&gt;
            &lt;sliceName value=&quot;patient&quot; /&gt;
            &lt;min value=&quot;1&quot; /&gt;
            &lt;max value=&quot;1&quot; /&gt;
            &lt;type&gt;
                &lt;code value=&quot;Patient&quot; /&gt;
                &lt;profile value=&quot;http://fhir.fred.com.au/my-sl/StructureDefinition/mysl-patient&quot; /&gt;
            &lt;/type&gt;
            &lt;mustSupport value=&quot;true&quot; /&gt;
        &lt;/element&gt;
        &lt;element id=&quot;MedicationRequest.contained:practitioner&quot;&gt;
            &lt;path value=&quot;MedicationRequest.contained&quot; /&gt;
            &lt;sliceName value=&quot;practitioner&quot; /&gt;
            &lt;min value=&quot;1&quot; /&gt;
            &lt;max value=&quot;1&quot; /&gt;
            &lt;type&gt;
                &lt;code value=&quot;Practitioner&quot; /&gt;
            &lt;/type&gt;
            &lt;mustSupport value=&quot;true&quot; /&gt;
        &lt;/element&gt;
</pre></div>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
