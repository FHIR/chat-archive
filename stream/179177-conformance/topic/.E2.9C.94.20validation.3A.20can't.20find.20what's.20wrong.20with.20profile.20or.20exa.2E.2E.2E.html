---
layout: page
title: "FHIR Chat  · ✔ validation: can&#x27;t find what&#x27;s wrong with profile or exa... · conformance"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/index.html">conformance</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/.E2.9C.94.20validation.3A.20can&#x27;t.20find.20what&#x27;s.20wrong.20with.20profile.20or.20exa.2E.2E.2E.html">✔ validation: can&#x27;t find what&#x27;s wrong with profile or exa...</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="257181235"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/%E2%9C%94%20validation%3A%20can%27t%20find%20what%27s%20wrong%20with%20profile%20or%20exa.../near/257181235" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marten Smits <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/.E2.9C.94.20validation.3A.20can&#x27;t.20find.20what&#x27;s.20wrong.20with.20profile.20or.20exa.2E.2E.2E.html#257181235">(Oct 12 2021 at 10:33)</a>:</h4>
<p>Using the HAPI validator, for every entry in my Bundle I get:</p>
<p><code>"This element does not match any known slice defined in the profile http://kreftregisteret.no/fhir/StructureDefinition/colonoscopyreport-bundle-krg"</code></p>
<p>and for the required entries:</p>
<p><code>"Bundle.entry:Patient: minimum required = 1, but only found 0 (from http://kreftregisteret.no/fhir/StructureDefinition/colonoscopyreport-bundle-krg)"</code></p>
<p>Altough I'm sure that at least my Patient entry is correct.</p>
<p>The slicing definition is:</p>
<div class="codehilite"><pre><span></span><code>{
                &quot;id&quot;: &quot;Bundle.entry&quot;,
                &quot;path&quot;: &quot;Bundle.entry&quot;,
                &quot;slicing&quot;: {
                    &quot;discriminator&quot;:  [
                        {
                            &quot;type&quot;: &quot;type&quot;,
                            &quot;path&quot;: &quot;resource&quot;
                        }
                    ],
                    &quot;rules&quot;: &quot;open&quot;
                },
                &quot;min&quot;: 3
            },
            {
                &quot;id&quot;: &quot;Bundle.entry:Colonoscopy&quot;,
                &quot;path&quot;: &quot;Bundle.entry&quot;,
                &quot;sliceName&quot;: &quot;Colonoscopy&quot;,
                &quot;min&quot;: 1,
                &quot;max&quot;: &quot;1&quot;
            },
            {
                &quot;id&quot;: &quot;Bundle.entry:Colonoscopy.resource&quot;,
                &quot;path&quot;: &quot;Bundle.entry.resource&quot;,
                &quot;min&quot;: 1,
                &quot;type&quot;:  [
                    {
                        &quot;code&quot;: &quot;Resource&quot;,
                        &quot;profile&quot;:  [
                            &quot;http://kreftregisteret.no/fhir/StructureDefinition/colonoscopyreport-colonoscopy&quot;
                        ]
                    }
                ]
            }
Etc...
</code></pre></div>
<p>something I'm doing wrong here?</p>



<a name="257184761"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/%E2%9C%94%20validation%3A%20can%27t%20find%20what%27s%20wrong%20with%20profile%20or%20exa.../near/257184761" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michaela Ziegler <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/.E2.9C.94.20validation.3A.20can&#x27;t.20find.20what&#x27;s.20wrong.20with.20profile.20or.20exa.2E.2E.2E.html#257184761">(Oct 12 2021 at 11:08)</a>:</h4>
<p>Is it maybe related to this discussion?<br>
<a href="#narrow/stream/179252-IG-creation/topic/profiling.20a.20transaction/near/213392373">https://chat.fhir.org/#narrow/stream/179252-IG-creation/topic/profiling.20a.20transaction/near/213392373</a></p>



<a name="257190350"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/%E2%9C%94%20validation%3A%20can%27t%20find%20what%27s%20wrong%20with%20profile%20or%20exa.../near/257190350" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marten Smits <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/.E2.9C.94.20validation.3A.20can&#x27;t.20find.20what&#x27;s.20wrong.20with.20profile.20or.20exa.2E.2E.2E.html#257190350">(Oct 12 2021 at 11:59)</a>:</h4>
<p>Thanks for pointing that out. But I don't think so, unless discriminator type <code>type</code> should be <code>profile</code>. I thought <code>profile</code> differentiates on if the correct profile tag is present or not, and <code>type</code> actually checks if the resource conforms to the specified type in the slice ,including the profile</p>



<a name="257199186"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/%E2%9C%94%20validation%3A%20can%27t%20find%20what%27s%20wrong%20with%20profile%20or%20exa.../near/257199186" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/.E2.9C.94.20validation.3A.20can&#x27;t.20find.20what&#x27;s.20wrong.20with.20profile.20or.20exa.2E.2E.2E.html#257199186">(Oct 12 2021 at 13:06)</a>:</h4>
<p>Type only checks type, not profile.  Profile checks for a profile match - it doesn't care about the profile tag I don't think.  (Slicing by profile can be pretty heavy...)</p>



<a name="257212499"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/%E2%9C%94%20validation%3A%20can%27t%20find%20what%27s%20wrong%20with%20profile%20or%20exa.../near/257212499" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marten Smits <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/.E2.9C.94.20validation.3A.20can&#x27;t.20find.20what&#x27;s.20wrong.20with.20profile.20or.20exa.2E.2E.2E.html#257212499">(Oct 12 2021 at 14:31)</a>:</h4>
<p>Ah that explains the errors then. Thanks both!</p>



<a name="257253339"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/%E2%9C%94%20validation%3A%20can%27t%20find%20what%27s%20wrong%20with%20profile%20or%20exa.../near/257253339" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/.E2.9C.94.20validation.3A.20can&#x27;t.20find.20what&#x27;s.20wrong.20with.20profile.20or.20exa.2E.2E.2E.html#257253339">(Oct 12 2021 at 18:52)</a>:</h4>
<p>but did it actually explain the errors? </p>
<p>typically, the errors in this case are buried in slicing info that isn't usually shown. I just changed the validator to display this by default in the case of slicing by profile - you need the latest version (5.5.7) and it's not part of HAPI yet</p>



<a name="257253483"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/%E2%9C%94%20validation%3A%20can%27t%20find%20what%27s%20wrong%20with%20profile%20or%20exa.../near/257253483" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/.E2.9C.94.20validation.3A.20can&#x27;t.20find.20what&#x27;s.20wrong.20with.20profile.20or.20exa.2E.2E.2E.html#257253483">(Oct 12 2021 at 18:53)</a>:</h4>
<p>it might be useful to add discriminating by profile tag, as opposed to profile.</p>



<a name="257490066"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/%E2%9C%94%20validation%3A%20can%27t%20find%20what%27s%20wrong%20with%20profile%20or%20exa.../near/257490066" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marten Smits <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/.E2.9C.94.20validation.3A.20can&#x27;t.20find.20what&#x27;s.20wrong.20with.20profile.20or.20exa.2E.2E.2E.html#257490066">(Oct 14 2021 at 07:13)</a>:</h4>
<p>It did explain the errors, when I changed it from "type" to "profile" the validation succeeded. I suspect "type" checks on Resource, and flags when it's of anything else, which is fine, since type "Resource" isn't the best discriminator is it?</p>



<a name="257490167"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/%E2%9C%94%20validation%3A%20can%27t%20find%20what%27s%20wrong%20with%20profile%20or%20exa.../near/257490167" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marten Smits <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/.E2.9C.94.20validation.3A.20can&#x27;t.20find.20what&#x27;s.20wrong.20with.20profile.20or.20exa.2E.2E.2E.html#257490167">(Oct 14 2021 at 07:14)</a>:</h4>
<p>I've tried the newest release, and the new information message are a nice add-on, thanks for that!</p>



<a name="258117171"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/%E2%9C%94%20validation%3A%20can%27t%20find%20what%27s%20wrong%20with%20profile%20or%20exa.../near/258117171" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sarah Gaunt <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/.E2.9C.94.20validation.3A.20can&#x27;t.20find.20what&#x27;s.20wrong.20with.20profile.20or.20exa.2E.2E.2E.html#258117171">(Oct 18 2021 at 23:20)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191316">Grahame Grieve</span> <a href="#narrow/stream/179177-conformance/topic/.E2.9C.94.20validation.3A.20can't.20find.20what's.20wrong.20with.20profile.20or.20exa.2E.2E.2E/near/257253483">said</a>:</p>
<blockquote>
<p>it might be useful to add discriminating by profile tag, as opposed to profile.</p>
</blockquote>
<p>When you say this are you specifically referring to meta.profile? For some reason, I thought doing this was discouraged?</p>



<a name="258128158"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/%E2%9C%94%20validation%3A%20can%27t%20find%20what%27s%20wrong%20with%20profile%20or%20exa.../near/258128158" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/.E2.9C.94.20validation.3A.20can&#x27;t.20find.20what&#x27;s.20wrong.20with.20profile.20or.20exa.2E.2E.2E.html#258128158">(Oct 19 2021 at 01:36)</a>:</h4>
<p>It's not <em>encouraged</em> - because it's resource intensive and can be slow.  It's better to slice by resolve().something by type, pattern or value set if there's a simple discriminator in the target resource, rather than checking a full-blown profile.  However, if profile is the only way, then profile is the only way.</p>



<a name="258129330"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/%E2%9C%94%20validation%3A%20can%27t%20find%20what%27s%20wrong%20with%20profile%20or%20exa.../near/258129330" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/.E2.9C.94.20validation.3A.20can&#x27;t.20find.20what&#x27;s.20wrong.20with.20profile.20or.20exa.2E.2E.2E.html#258129330">(Oct 19 2021 at 01:54)</a>:</h4>
<p>actually Sarah was asking about something else - and yes, it's not encouraged, but sometimes it's the right thing to do</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
