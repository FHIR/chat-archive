---
layout: page
title: "FHIR Chat  · slicing · conformance"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/index.html">conformance</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/slicing.html">slicing</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153828112"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/slicing/near/153828112" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Keith Boone <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/slicing.html#153828112">(May 17 2016 at 06:16)</a>:</h4>
<p>How does one slice a value[x] by data type?  What discriminator would you use?</p>



<a name="153828118"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/slicing/near/153828118" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Keith Boone <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/slicing.html#153828118">(May 17 2016 at 08:22)</a>:</h4>
<p>I'm trying to slice something by type, but cannot seem to get it to work on observation. Anyone here have any words of wisdom. The error I'm getting is: Attempt to a slice an element that does not repeat: Observation.value[x]/null from <a href="http://hl7.org/fhir/StructureDefinition/CodeableConcept" target="_blank" title="http://hl7.org/fhir/StructureDefinition/CodeableConcept">http://hl7.org/fhir/StructureDefinition/CodeableConcept</a> but my use of value[x] only includes Quantity | string.</p>



<a name="153828125"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/slicing/near/153828125" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/slicing.html#153828125">(May 17 2016 at 09:57)</a>:</h4>
<p>discriminator should be @type per the profiling page in the spec</p>



<a name="153828137"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/slicing/near/153828137" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Keith Boone <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/slicing.html#153828137">(May 17 2016 at 13:45)</a>:</h4>
<p>Yep, set that, still getting the above error.  </p>



<a name="153828138"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/slicing/near/153828138" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Keith Boone <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/slicing.html#153828138">(May 17 2016 at 13:45)</a>:</h4>
<div class="codehilite"><pre> [java] Caused by: org.hl7.fhir.dstu3.exceptions.DefinitionException: Attempt to a slice an element that does not repeat: Observation.value[x]/null from http://hl7.org/fhir/StructureDefinition/CodeableConcept
 [java]     at org.hl7.fhir.dstu3.utils.ProfileUtilities.processPaths(ProfileUtilities.java:402)
 [java]     at org.hl7.fhir.dstu3.utils.ProfileUtilities.generateSnapshot(ProfileUtilities.java:309)
 [java]     at org.hl7.fhir.definitions.generators.specification.ProfileGenerator.generate(ProfileGenerator.java:793)
 [java]     at org.hl7.fhir.definitions.generators.specification.ProfileGenerator.generate(ProfileGenerator.java:714)
</pre></div>



<a name="153828139"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/slicing/near/153828139" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Keith Boone <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/slicing.html#153828139">(May 17 2016 at 13:46)</a>:</h4>
<p>What is confusing is that CodeableConcept ISN'T one of the data types I've profiled Observation.value[x] to.</p>



<a name="153828184"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/slicing/near/153828184" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/slicing.html#153828184">(May 17 2016 at 19:30)</a>:</h4>
<p>I'll try and look it tomorrow</p>



<a name="153828261"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/slicing/near/153828261" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Keith Boone <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/slicing.html#153828261">(May 17 2016 at 23:27)</a>:</h4>
<p>Cannot slice by type when base cardinality is 0..1, although I can see where it might be useful to look at those as slices.  I worked around it elsewhere.</p>



<a name="153828278"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/slicing/near/153828278" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/slicing.html#153828278">(May 17 2016 at 23:42)</a>:</h4>
<p>I've done it elsewhere - sliced by type</p>



<a name="153828280"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/slicing/near/153828280" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/slicing.html#153828280">(May 17 2016 at 23:43)</a>:</h4>
<p>have alook at the DAF profile on condition</p>



<a name="153920551"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/slicing/near/153920551" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Prud&#x27;hommeaux <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/slicing.html#153920551">(Nov 21 2017 at 09:02)</a>:</h4>
<p>[apologies if this is the wrong stream; happy to re-post elsewhere]<br>
In the BP slicing example <a href="http://build.fhir.org/profiling-examples.html#blood-pressure" target="_blank" title="http://build.fhir.org/profiling-examples.html#blood-pressure">http://build.fhir.org/profiling-examples.html#blood-pressure</a> , could i then extend it with a PosturedBP a la:?</p>
<div class="codehilite"><pre><span></span>  &lt;element&gt; &lt;!-- 8 --&gt;
    &lt;path value=&quot;Observation.component&quot;/&gt;
    &lt;name value=&quot;diastolic&quot;/&gt; &lt;!-- mandatory - gives the slice a name --&gt;
    &lt;min value=&quot;1&quot;/&gt;
    &lt;max value=&quot;1&quot;/&gt;
  &lt;/element&gt;
  &lt;element&gt; &lt;!-- 9 --&gt;
    &lt;path value=&quot;Observation.component.code&quot;/&gt;
    &lt;min value=&quot;1&quot;/&gt;
    &lt;fixedCodeableConcept&gt;
      &lt;coding&gt;
        &lt;system value=&quot;http://snomed.info/sct&quot; /&gt;
        &lt;code value=&quot;9851009&quot; /&gt;
        &lt;display value=&quot;Body position&quot; /&gt;
      &lt;/coding&gt;
    &lt;/fixedCodeableConcept&gt;
  &lt;/element&gt;
  &lt;element&gt; &lt;!-- 10 --&gt;
    &lt;path value=&quot;Observation.component.valueQuantity&quot;/&gt;
    &lt;min value=&quot;1&quot;/&gt;
  &lt;/element&gt;
</pre></div>



<a name="153920553"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/slicing/near/153920553" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/slicing.html#153920553">(Nov 21 2017 at 09:09)</a>:</h4>
<p>yes, because the slicing rules do not say that the slices are closed</p>



<a name="153920554"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/slicing/near/153920554" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Prud&#x27;hommeaux <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/slicing.html#153920554">(Nov 21 2017 at 09:12)</a>:</h4>
<p>Also in the BP slicing example <a href="http://build.fhir.org/profiling-examples.html#blood-pressure" target="_blank" title="http://build.fhir.org/profiling-examples.html#blood-pressure">http://build.fhir.org/profiling-examples.html#blood-pressure</a> , there are seven <code>&lt;element/&gt;</code> decls (using regex {} notation for cardinalities):<br>
1. discriminator="code" {2,}<br>
2. name="systolic" {1,1}<br>
3. fixedCodeableConcept/coding/code="8480-6" {1,}<br>
4. valueQuantity {1,}<br>
5. name="diastolic" {1,1}<br>
6. fixedCodeableConcept/coding/code="8462-4" {1,}<br>
7. valueQuantity {1,}<br>
(I assume 1. is in the FHIR Observation core resource and 2-7 are in a profile that extends it)<br>
What associates e.g. 3 and 4 with 2? Is is just that they come in threes?</p>



<a name="153920559"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/slicing/near/153920559" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Prud&#x27;hommeaux <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/slicing.html#153920559">(Nov 21 2017 at 09:28)</a>:</h4>
<p>is there a better stream for validation stuff?</p>



<a name="153920561"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/slicing/near/153920561" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/slicing.html#153920561">(Nov 21 2017 at 09:32)</a>:</h4>
<p>no this is the place-  I just haven't had time to think about that one yet</p>



<a name="153920562"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/slicing/near/153920562" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Prud&#x27;hommeaux <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/slicing.html#153920562">(Nov 21 2017 at 09:33)</a>:</h4>
<p>I'm examining this 'cause I'm working on the inheritance model for ShEx. I'm modeling it on XML Schema's separation of extension vs. restriction.</p>



<a name="153920564"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/slicing/near/153920564" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Prud&#x27;hommeaux <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/slicing.html#153920564">(Nov 21 2017 at 09:35)</a>:</h4>
<p>1 seems like a base constraint. (2-4) and (5-7) seem like restrictions on that and my proposed PosturedBP seems like an extension of BP.</p>



<a name="153920565"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/slicing/near/153920565" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/slicing.html#153920565">(Nov 21 2017 at 09:35)</a>:</h4>
<p>we don't have that in FHIR - everything is additional.</p>



<a name="153920566"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/slicing/near/153920566" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Prud&#x27;hommeaux <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/slicing.html#153920566">(Nov 21 2017 at 09:37)</a>:</h4>
<p>does that mean that (2-4) and (5-7) don't have to comply with (1), i.e. they needn't have a code if they didn't happen to mention one?</p>



<a name="153920567"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/slicing/near/153920567" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Prud&#x27;hommeaux <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/slicing.html#153920567">(Nov 21 2017 at 09:39)</a>:</h4>
<p>or maybe discriminator= is sort of a special case that infects everything with the same path (but that smells a lot like restriction)</p>



<a name="153920569"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/slicing/near/153920569" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/slicing.html#153920569">(Nov 21 2017 at 09:39)</a>:</h4>
<p>discriminator is special. It's orthogonal to the constraint model - an extra layer of rules. What that says is that each of the slices must be distinguished by the fixed value(s) for code</p>



<a name="153920570"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/slicing/near/153920570" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/slicing.html#153920570">(Nov 21 2017 at 09:40)</a>:</h4>
<p>so yes, a special case, and yes, a restriction of sorts, but actually a meta-restriction, if you want to be precise - a constraint on the model, not the instances</p>



<a name="153920572"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/slicing/near/153920572" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Prud&#x27;hommeaux <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/slicing.html#153920572">(Nov 21 2017 at 09:43)</a>:</h4>
<p>and that can be applied by a core resource or any in a chain of derivative profiles?</p>



<a name="153920573"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/slicing/near/153920573" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/slicing.html#153920573">(Nov 21 2017 at 09:45)</a>:</h4>
<p>it could, though the only discriminator we would ever apply in the base resource is on extension, which are always at least discriminated by url</p>



<a name="153920574"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/slicing/near/153920574" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/slicing.html#153920574">(Nov 21 2017 at 09:45)</a>:</h4>
<p>derivative profiles must also observe the rules of anything they derive from</p>



<a name="153920579"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/slicing/near/153920579" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Prud&#x27;hommeaux <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/slicing.html#153920579">(Nov 21 2017 at 09:49)</a>:</h4>
<p>the prob i'm having with the "all are extensions" notion is that (1) seems like it's saying that anything derived must have two or more components and (2-4), (5-7) must be talking about those same components or we'd have have to create BP instances with a systolic, a diastolic and two more components.</p>



<a name="153920583"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/slicing/near/153920583" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Prud&#x27;hommeaux <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/slicing.html#153920583">(Nov 21 2017 at 09:57)</a>:</h4>
<p>so it seems like the (8-10) i uttered first (PostureBP) are extending the package of (2-4),(5-7) while they in turn are constraining (1) (and probably (0) if we assume a fhir:Observation provides a minimalistic constraint on component {0,})</p>



<a name="153920584"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/slicing/near/153920584" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/slicing.html#153920584">(Nov 21 2017 at 10:00)</a>:</h4>
<p>you can add slices in derived profiles. Whether they extend 2-4 or 5-7 or are new depends on the slice names</p>



<a name="153921368"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/slicing/near/153921368" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Townley-O&#x27;Neill <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/slicing.html#153921368">(Nov 24 2017 at 01:34)</a>:</h4>
<p>Is it that 3 and 4 are associated with 2 because of the values of <code>path</code>identify a hierarchy?<br>
1 - &lt;path value="Observation.component"/&gt;<br>
2 - &lt;path value="Observation.component"/&gt;<br>
3 - &lt;path value="Observation.component.code"/&gt;<br>
4 - &lt;path value="Observation.component.valueQuantity"/&gt;<br>
5 - &lt;path value="Observation.component"/&gt;<br>
6 - &lt;path value="Observation.component.code"/&gt;<br>
7 - &lt;path value="Observation.component.valueQuantity"/&gt;</p>



<a name="153921790"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/slicing/near/153921790" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/slicing.html#153921790">(Nov 28 2017 at 09:57)</a>:</h4>
<p>Yes, indeed. The hierarchy get a bit hidden by the flat representation, but mentally I consider 2-4 children of 1 and 3-4 children of 2.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
