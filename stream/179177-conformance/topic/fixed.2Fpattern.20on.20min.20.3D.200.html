---
layout: page
title: "FHIR Chat  · fixed/pattern on min = 0 · conformance"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/index.html">conformance</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/fixed.2Fpattern.20on.20min.20.3D.200.html">fixed/pattern on min = 0</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="204613192"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/fixed/pattern%20on%20min%20%3D%200/near/204613192" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/fixed.2Fpattern.20on.20min.20.3D.200.html#204613192">(Jul 21 2020 at 23:05)</a>:</h4>
<p>So an issue arises here: <a href="#narrow/stream/179166-implementers/topic/Slicing.20on.20pattern.2Ffixed">https://chat.fhir.org/#narrow/stream/179166-implementers/topic/Slicing.20on.20pattern.2Ffixed</a> :</p>
<p>What does a profile mean when it assigns a fixed value or a pattern but leaves min = 0?</p>
<p>As far as I can tell , there's 3 options:</p>
<ol>
<li>if min=0, it doesn't matter what the fixed/pattern is </li>
<li>if there's  a fixed or a pattern, it doesn't matter what the min is</li>
<li>if there's a fixed/pattern, and min=0, that's an error in the profile</li>
</ol>
<p>The specification is silent on this. The relevant definitions are, so far as I can find:</p>
<ul>
<li><strong>fixed[x]</strong>: Specifies a value that SHALL be exactly the value for this element in the instance. For purposes of comparison, non-significant whitespace is ignored, and all values must be an exact match (case and accent sensitive). Missing elements/attributes must also be missing.</li>
<li>
<p><strong>pattern[x]</strong>:   <br>
Specifies a value that the value in the instance SHALL follow - that is, any value in the pattern must be found in the instance. Other additional values may be found too. This is effectively constraint by example</p>
</li>
<li>
<p><strong>min</strong>: The minimum number of times this element SHALL appear in the instance</p>
</li>
</ul>
<p>I think that the spec leans to #2 above.</p>
<p><span class="user-mention" data-user-id="191328">@Ewout Kramer</span> <span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span></p>



<a name="204613492"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/fixed/pattern%20on%20min%20%3D%200/near/204613492" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/fixed.2Fpattern.20on.20min.20.3D.200.html#204613492">(Jul 21 2020 at 23:08)</a>:</h4>
<p>presently the validator follows #1 for both fixed and pattern</p>



<a name="204629885"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/fixed/pattern%20on%20min%20%3D%200/near/204629885" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/fixed.2Fpattern.20on.20min.20.3D.200.html#204629885">(Jul 22 2020 at 04:41)</a>:</h4>
<p>My preference is 3.  Having a min that's ignored is going to be confusing to implementers and I can't see any reason to allow min of 0 when there's a fixed value or pattern</p>



<a name="204630757"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/fixed/pattern%20on%20min%20%3D%200/near/204630757" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Townley-O&#x27;Neill <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/fixed.2Fpattern.20on.20min.20.3D.200.html#204630757">(Jul 22 2020 at 05:05)</a>:</h4>
<p>I like option 3 as it naturally fits with this case:<br>
I want to specify a min of 2 with a pattern that describes only one use. <br>
So the min has to be &gt;= the number of instances in the pattern.</p>



<a name="204637149"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/fixed/pattern%20on%20min%20%3D%200/near/204637149" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/fixed.2Fpattern.20on.20min.20.3D.200.html#204637149">(Jul 22 2020 at 07:28)</a>:</h4>
<p>The .NET validator is doing 1 - if an element is not there, none of the validations are run on it (except, of course, the cardinality validation)</p>



<a name="204637166"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/fixed/pattern%20on%20min%20%3D%200/near/204637166" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/fixed.2Fpattern.20on.20min.20.3D.200.html#204637166">(Jul 22 2020 at 07:29)</a>:</h4>
<p>This is true for both 'fixed' and 'pattern'.</p>



<a name="204637304"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/fixed/pattern%20on%20min%20%3D%200/near/204637304" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/fixed.2Fpattern.20on.20min.20.3D.200.html#204637304">(Jul 22 2020 at 07:31)</a>:</h4>
<p>I don't see (yet) why a fixed/pattern would require the element to be present.  A required binding (which feels similar to me), does not require a min cardinality of 1 either?</p>



<a name="204644029"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/fixed/pattern%20on%20min%20%3D%200/near/204644029" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Frank Oemig <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/fixed.2Fpattern.20on.20min.20.3D.200.html#204644029">(Jul 22 2020 at 09:04)</a>:</h4>
<p><span aria-label="+1" class="emoji emoji-1f44d" role="img" title="+1">:+1:</span></p>



<a name="204668694"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/fixed/pattern%20on%20min%20%3D%200/near/204668694" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/fixed.2Fpattern.20on.20min.20.3D.200.html#204668694">(Jul 22 2020 at 13:57)</a>:</h4>
<p>I always interpreted fixed/pattern with min 0 to mean that the element is not required, but if it <em>is</em> there, it must be this fixed value (or follow this pattern).  I think this aligns with <span class="user-mention" data-user-id="191328">@Ewout Kramer</span>'s thoughts above.</p>



<a name="204668931"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/fixed/pattern%20on%20min%20%3D%200/near/204668931" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/fixed.2Fpattern.20on.20min.20.3D.200.html#204668931">(Jul 22 2020 at 13:59)</a>:</h4>
<p>Trying to think of a use case...</p>



<a name="204669191"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/fixed/pattern%20on%20min%20%3D%200/near/204669191" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/fixed.2Fpattern.20on.20min.20.3D.200.html#204669191">(Jul 22 2020 at 14:01)</a>:</h4>
<p>If a Patient profile has <code>active</code> <code>0..1</code> and <code>fixedBoolean: true</code>, then it's effectively saying "don't give me explicitly inactive patients" -- I only want patients that are explicitly active or don't have active set (which <em>generally</em> implies active).</p>



<a name="204669353"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/fixed/pattern%20on%20min%20%3D%200/near/204669353" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/fixed.2Fpattern.20on.20min.20.3D.200.html#204669353">(Jul 22 2020 at 14:02)</a>:</h4>
<p>Otherwise I guess you'd need to use an invariant to say that.</p>



<a name="204672448"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/fixed/pattern%20on%20min%20%3D%200/near/204672448" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/fixed.2Fpattern.20on.20min.20.3D.200.html#204672448">(Jul 22 2020 at 14:25)</a>:</h4>
<p>That can work only if the "meaningIfMissing" exactly corresponds to the fixed value.</p>



<a name="204673927"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/fixed/pattern%20on%20min%20%3D%200/near/204673927" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/fixed.2Fpattern.20on.20min.20.3D.200.html#204673927">(Jul 22 2020 at 14:35)</a>:</h4>
<p>I guess another use case would be for <code>Quantity</code>.  If you leave <code>system</code> as <code>0..1</code> but also have <code>fixedSystem: "http://unitsofmeasure.org"</code>, you're saying you allow unit-less quantities (e.g., <code>5</code>) but if your quantity has a unit code, it better be UCUM.</p>



<a name="204678367"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/fixed/pattern%20on%20min%20%3D%200/near/204678367" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nik Klassen <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/fixed.2Fpattern.20on.20min.20.3D.200.html#204678367">(Jul 22 2020 at 15:07)</a>:</h4>
<p>If we don't interpret it as #1 then it doesn't seem like there's a way to express the use case of "it can be missing, but if it's here it has to look like this". I have no idea how realistic that use case is though</p>



<a name="204678659"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/fixed/pattern%20on%20min%20%3D%200/near/204678659" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nik Klassen <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/fixed.2Fpattern.20on.20min.20.3D.200.html#204678659">(Jul 22 2020 at 15:09)</a>:</h4>
<p>Like Ewout said, it's the most consistent (and easiest to implement) to just ignore all other validations when the item is missing.</p>



<a name="204717325"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/fixed/pattern%20on%20min%20%3D%200/near/204717325" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/fixed.2Fpattern.20on.20min.20.3D.200.html#204717325">(Jul 22 2020 at 20:17)</a>:</h4>
<p>ok we line up with #1. So task to clarify: <a href="http://jira.hl7.org/browse/FHIR-28126">J#28126</a></p>



<a name="204866708"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/fixed/pattern%20on%20min%20%3D%200/near/204866708" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Townley-O&#x27;Neill <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/fixed.2Fpattern.20on.20min.20.3D.200.html#204866708">(Jul 23 2020 at 23:56)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191320">Lloyd McKenzie</span> <a href="#narrow/stream/179177-conformance/topic/fixed.2Fpattern.20on.20min.20.3D.200/near/204672448">said</a>:</p>
<blockquote>
<p>That can work only if the "meaningIfMissing" exactly corresponds to the fixed value.</p>
</blockquote>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> are you saying that when doing what <span class="user-mention" data-user-id="191469">@Chris Moesel</span> describes  we need to use also ElementDefinition.meaningWhenMissing ?</p>



<a name="204867435"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/fixed/pattern%20on%20min%20%3D%200/near/204867435" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/fixed.2Fpattern.20on.20min.20.3D.200.html#204867435">(Jul 24 2020 at 00:09)</a>:</h4>
<p>I'm saying that if you're going to presume that an absent element corresponds to equivalent to having a fixed value, the meaningIfMissing for that element better be equivalent.  Otherwise I could just as easily have had a fixedBoolean=false for Patient.active - and omitting the 0..1 element would have been a huge issue.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
