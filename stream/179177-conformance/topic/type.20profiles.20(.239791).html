---
layout: page
title: "FHIR Chat  · type profiles (#9791) · conformance"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/index.html">conformance</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/type.20profiles.20(.239791).html">type profiles (#9791)</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153831901"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/type%20profiles%20%28%239791%29/near/153831901" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/type.20profiles.20(.239791).html#153831901">(Jun 07 2016 at 14:31)</a>:</h4>
<p>Stream to discuss <a href="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=9791" target="_blank" title="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=9791">GF#9791</a>.</p>



<a name="153831902"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/type%20profiles%20%28%239791%29/near/153831902" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/type.20profiles.20(.239791).html#153831902">(Jun 07 2016 at 14:44)</a>:</h4>
<p>To recap the FHIR-I call:<br>
When applying a type profile to an element (setting elementdefinition.type.profile), one of these scenarios applies:<br>
1. New @profile discriminated slicing - Effectively defining a new element specialization.<br>
2. New slice discriminated by other elements (not @profile) and constrained by @profile.<br>
3. Type profile added to existing slice.<br>
4. Type profile added to un-sliced element.</p>
<p>In all scenarios, for element definition elements that aggregate (constraint, mapping, alias), both the element base and the type profile must be represented, and de-duplication should be applied (since mappings on the base types will be inherited from both the element and type profile lineages).</p>
<p>For elements with only 1 value that are calculable (min, max, maxLength, minValue[x], etc), both must be considered.</p>
<p>For elements with only 1 value that cannot be programmatically merged (label, short, comments, etc), which lineage should be used?</p>
<p>For 1, it was unanimous that all elementdefinition (ED) elements should be based on the type profile.<br>
For 2, general sentiment was that the type profile should be used.  Common use cases here are extensions since they are discriminated by url and constrained by type profile.  However, since the type profile is not the defining aspect of the slice (it's not the discriminator), there is some question.<br>
For 3, I think this would be treated like 4 since it's not defining anything new but rather constraining something existing.<br>
For 4, the base element would be used since the type is not re-defining, only constraining.</p>



<a name="153831958"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/type%20profiles%20%28%239791%29/near/153831958" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/type.20profiles.20(.239791).html#153831958">(Jun 08 2016 at 02:48)</a>:</h4>
<p>Agree on all counts</p>



<a name="153831996"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/type%20profiles%20%28%239791%29/near/153831996" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/type.20profiles.20(.239791).html#153831996">(Jun 08 2016 at 09:00)</a>:</h4>
<p>Very interesting discussion! As it happens, I was just looking at how to merge mappings on (unsliced) elements with a profiled type. Then Ewout informed me about the current discussion. If the community can reach concensus on these advanced merging rules, then I can try and implement them piece by piece in Forge, to determine if/how it works.</p>



<a name="153831997"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/type%20profiles%20%28%239791%29/near/153831997" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/type.20profiles.20(.239791).html#153831997">(Jun 08 2016 at 09:05)</a>:</h4>
<p>For example, The Observation resource profile also defines element mappings on Observation.identifier, e.g. a v2 mapping to "OBX.21". The Identifier datatype profile also defines element mappings on the "identifier" root element, e.g. v2 mapping to "CX / El". So does the Observation.identifier element definition (implicitly) inherit these additional mappings from the Identifier profile? In other words, when expanding the snapshot, do I need to merge the mappings from the element definition in the Observation resource profile with the mappings from the element definition in the Identifier datatype profile?</p>



<a name="153832017"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/type%20profiles%20%28%239791%29/near/153832017" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/type.20profiles.20(.239791).html#153832017">(Jun 08 2016 at 13:43)</a>:</h4>
<p>Yes?</p>



<a name="153832019"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/type%20profiles%20%28%239791%29/near/153832019" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/type.20profiles.20(.239791).html#153832019">(Jun 08 2016 at 13:46)</a>:</h4>
<p>OK, thx ;p</p>



<a name="153832021"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/type%20profiles%20%28%239791%29/near/153832021" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/type.20profiles.20(.239791).html#153832021">(Jun 08 2016 at 13:47)</a>:</h4>
<p>A mapping (or alias, or constraint) on a base type gets propagated *all over*. </p>



<a name="153832022"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/type%20profiles%20%28%239791%29/near/153832022" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/type.20profiles.20(.239791).html#153832022">(Jun 08 2016 at 13:48)</a>:</h4>
<p>I'm not sure that the implications of annotating one of the types or Element or Resource was always fully appreciated.  Or maybe it was and that was always intended.</p>



<a name="153832023"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/type%20profiles%20%28%239791%29/near/153832023" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/type.20profiles.20(.239791).html#153832023">(Jun 08 2016 at 13:48)</a>:</h4>
<p>The rim n/a mapping is going to be on lots and lots of elements.</p>



<a name="153832024"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/type%20profiles%20%28%239791%29/near/153832024" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/type.20profiles.20(.239791).html#153832024">(Jun 08 2016 at 13:54)</a>:</h4>
<p>I was just wondering if it makes any sense to have different mappings on an element for the same system, as in the Observation.identifier example I mentioned, which would aggregate two different v2 mappings to both "OBX.21" and also to "CX / El". I can image how multiple mappings express information on a different abstraction/specialization level, but since I am no mapping expert I can't really tell. Thanks for the feedback.</p>



<a name="153832025"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/type%20profiles%20%28%239791%29/near/153832025" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/type.20profiles.20(.239791).html#153832025">(Jun 08 2016 at 13:57)</a>:</h4>
<p>Also I guess, since profile and element mappings always are implicitly inherited (from multiple levels...), that it makes no sense for Forge to let the user edit any of the inherited mapping components. The rules state that the profile inherits all the original mappings anyway. So maybe Forge should render inherited profile mapping components in the UI as read-only? i.e. the user can only extend the collection, but not edit any of the implicitly inherited collection items.</p>



<a name="153832026"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/type%20profiles%20%28%239791%29/near/153832026" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/type.20profiles.20(.239791).html#153832026">(Jun 08 2016 at 13:58)</a>:</h4>
<p>Yes, for any of the "aggregable" elements (mapping, constraint, alias) you can only add.</p>



<a name="153832028"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/type%20profiles%20%28%239791%29/near/153832028" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/type.20profiles.20(.239791).html#153832028">(Jun 08 2016 at 14:04)</a>:</h4>
<p><span class="user-mention" data-user-id="191351">@Chris Grenz</span>  That makes sense. I'll try to implement the correct behavior in Forge. Thanks a lot for clearing this up!</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
