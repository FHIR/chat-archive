---
layout: page
title: "FHIR Chat  · Extension.url - fixedString or fixedUri? · conformance"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/index.html">conformance</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Extension.2Eurl.20-.20fixedString.20or.20fixedUri.3F.html">Extension.url - fixedString or fixedUri?</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="176082903"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Extension.url%20-%20fixedString%20or%20fixedUri%3F/near/176082903" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Extension.2Eurl.20-.20fixedString.20or.20fixedUri.3F.html#176082903">(Sep 19 2019 at 09:40)</a>:</h4>
<p>I notice that in the official FHIR R4 extension definitions (e.g. <code>extension-definitions.json</code>), the <code>[...].extension.url</code> elements in the snapshot specify a <code>fixedUri</code> property with the canonical url of the extension definition. However the <code>Extension.url</code> element is defined with special "system" string type and "compiler magic" extensions (<code>profiles-types.json</code>). Doesn't this imply that the fixed value should be a <code>fixedString</code>?</p>



<a name="176083014"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Extension.url%20-%20fixedString%20or%20fixedUri%3F/near/176083014" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Extension.2Eurl.20-.20fixedString.20or.20fixedUri.3F.html#176083014">(Sep 19 2019 at 09:42)</a>:</h4>
<p>maybe... but we've never discussed that the URL the refers to an extension shouldn't have extensions, and it can in the way it is represented. And I suppose if I was to, well, wear my Lloyd hat, I could find some reasons why it might be rationale to extend it ;-)</p>



<a name="176083535"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Extension.url%20-%20fixedString%20or%20fixedUri%3F/near/176083535" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Extension.2Eurl.20-.20fixedString.20or.20fixedUri.3F.html#176083535">(Sep 19 2019 at 09:51)</a>:</h4>
<p>If an element needs to support extensions, then it must be defined with a FHIR (primitive) type.<br>
Elements with system types (compiler magic) do not support extensions.<br>
Currently, in R4, <code>Extension.url</code> is currently defined using a system type. So it does not support extensions.<br>
Right?</p>



<a name="176083606"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Extension.url%20-%20fixedString%20or%20fixedUri%3F/near/176083606" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Extension.2Eurl.20-.20fixedString.20or.20fixedUri.3F.html#176083606">(Sep 19 2019 at 09:52)</a>:</h4>
<p><span class="user-mention" data-user-id="191328">@Ewout Kramer</span> ?</p>



<a name="176083640"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Extension.url%20-%20fixedString%20or%20fixedUri%3F/near/176083640" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Extension.2Eurl.20-.20fixedString.20or.20fixedUri.3F.html#176083640">(Sep 19 2019 at 09:53)</a>:</h4>
<p>yes that's correct. But it's still a URL, even if it's a special type.</p>



<a name="176084337"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Extension.url%20-%20fixedString%20or%20fixedUri%3F/near/176084337" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Extension.2Eurl.20-.20fixedString.20or.20fixedUri.3F.html#176084337">(Sep 19 2019 at 10:05)</a>:</h4>
<p>But a system url, not a FHIR url, right? If I understand correctly, this implies that the element should specify <code>fixedString</code>, not <code>fixedUri</code>? Because the latter applies to FHIR Uri, not to system Uri.</p>



<a name="176086023"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Extension.url%20-%20fixedString%20or%20fixedUri%3F/near/176086023" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Extension.2Eurl.20-.20fixedString.20or.20fixedUri.3F.html#176086023">(Sep 19 2019 at 10:32)</a>:</h4>
<p>I don't think that's true. For several reasons:</p>
<ul>
<li>replacing FHIR.uri with FHIR.string doesn't get your closer to System.uri</li>
<li>there's no way to use System.string in that location</li>
<li>FHIR.uri has a conversion relationship with System.uri</li>
<li>there's imagineable uses for extensions in that location</li>
</ul>



<a name="176087052"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Extension.url%20-%20fixedString%20or%20fixedUri%3F/near/176087052" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Extension.2Eurl.20-.20fixedString.20or.20fixedUri.3F.html#176087052">(Sep 19 2019 at 10:50)</a>:</h4>
<p>So how is the mapping defined between <code>Extension.url</code> and <code>fixedUri</code>?<br>
i.e. how can a system derive this knowledge programmatically?<br>
The type of <code>Extension.url</code> is defined using compiler magic extensions with value "string".<br>
There is no additional metadata indicating that this string value actually represents an uri.<br>
Or am I missing something?</p>



<a name="176087095"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Extension.url%20-%20fixedString%20or%20fixedUri%3F/near/176087095" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Extension.2Eurl.20-.20fixedString.20or.20fixedUri.3F.html#176087095">(Sep 19 2019 at 10:51)</a>:</h4>
<p>FYI <code>Extension.url</code> element is defined with the following type:</p>
<div class="codehilite"><pre><span></span>            &lt;type&gt;
              &lt;code&gt;
                &lt;extension url=&quot;http://hl7.org/fhir/StructureDefinition/structuredefinition-json-type&quot;&gt;
                  &lt;valueString value=&quot;string&quot;/&gt;
                &lt;/extension&gt;
                &lt;extension url=&quot;http://hl7.org/fhir/StructureDefinition/structuredefinition-xml-type&quot;&gt;
                  &lt;valueString value=&quot;xsd:string&quot;/&gt;
                &lt;/extension&gt;
                &lt;extension url=&quot;http://hl7.org/fhir/StructureDefinition/structuredefinition-rdf-type&quot;&gt;
                  &lt;valueString value=&quot;xsd:string&quot;/&gt;
                &lt;/extension&gt;
                &lt;extension url=&quot;http://hl7.org/fhir/StructureDefinition/regex&quot;&gt;
                  &lt;valueString value=&quot;((http|https)://([A-Za-z0-9\\\.\:\%\$]*\/)*)?(Account|ActivityDefinition|AdverseEvent|AllergyIntolerance|Appointment|AppointmentResponse|AuditEvent|Basic|Binary|BiologicallyDerivedProduct|BodyStructure|Bundle|CapabilityStatement|CarePlan|CareTeam|CatalogEntry|ChargeItem|ChargeItemDefinition|Claim|ClaimResponse|ClinicalImpression|CodeSystem|Communication|CommunicationRequest|CompartmentDefinition|Composition|ConceptMap|Condition|Consent|Contract|Coverage|CoverageEligibilityRequest|CoverageEligibilityResponse|DetectedIssue|Device|DeviceDefinition|DeviceMetric|DeviceRequest|DeviceUseStatement|DiagnosticReport|DocumentManifest|DocumentReference|EffectEvidenceSynthesis|Encounter|Endpoint|EnrollmentRequest|EnrollmentResponse|EpisodeOfCare|EventDefinition|Evidence|EvidenceVariable|ExampleScenario|ExplanationOfBenefit|FamilyMemberHistory|Flag|Goal|GraphDefinition|Group|GuidanceResponse|HealthcareService|ImagingStudy|Immunization|ImmunizationEvaluation|ImmunizationRecommendation|ImplementationGuide|InsurancePlan|Invoice|Library|Linkage|List|Location|Measure|MeasureReport|Media|Medication|MedicationAdministration|MedicationDispense|MedicationKnowledge|MedicationRequest|MedicationStatement|MedicinalProduct|MedicinalProductAuthorization|MedicinalProductContraindication|MedicinalProductIndication|MedicinalProductIngredient|MedicinalProductInteraction|MedicinalProductManufactured|MedicinalProductPackaged|MedicinalProductPharmaceutical|MedicinalProductUndesirableEffect|MessageDefinition|MessageHeader|MolecularSequence|NamingSystem|NutritionOrder|Observation|ObservationDefinition|OperationDefinition|OperationOutcome|Organization|OrganizationAffiliation|Patient|PaymentNotice|PaymentReconciliation|Person|PlanDefinition|Practitioner|PractitionerRole|Procedure|Provenance|Questionnaire|QuestionnaireResponse|RelatedPerson|RequestGroup|ResearchDefinition|ResearchElementDefinition|ResearchStudy|ResearchSubject|RiskAssessment|RiskEvidenceSynthesis|Schedule|SearchParameter|ServiceRequest|Slot|Specimen|SpecimenDefinition|StructureDefinition|StructureMap|Subscription|Substance|SubstanceNucleicAcid|SubstancePolymer|SubstanceProtein|SubstanceReferenceInformation|SubstanceSourceMaterial|SubstanceSpecification|SupplyDelivery|SupplyRequest|Task|TerminologyCapabilities|TestReport|TestScript|ValueSet|VerificationResult|VisionPrescription)\/[A-Za-z0-9\-\.]{1,64}(\/_history\/[A-Za-z0-9\-\.]{1,64})?&quot;/&gt;
                &lt;/extension&gt;
              &lt;/code&gt;
            &lt;/type&gt;
</pre></div>



<a name="176087184"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Extension.url%20-%20fixedString%20or%20fixedUri%3F/near/176087184" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Extension.2Eurl.20-.20fixedString.20or.20fixedUri.3F.html#176087184">(Sep 19 2019 at 10:52)</a>:</h4>
<blockquote>
<p>Or am I missing something?</p>
</blockquote>
<p>Y. check out the proposed technical correction which sorted that</p>



<a name="176087359"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Extension.url%20-%20fixedString%20or%20fixedUri%3F/near/176087359" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Extension.2Eurl.20-.20fixedString.20or.20fixedUri.3F.html#176087359">(Sep 19 2019 at 10:54)</a>:</h4>
<p>The correction will certainly improve this and make it more explicit. I'm now focusing on current R4 implementation.<br>
For example, compare the current type declaration of <code>Element.id</code>:</p>
<div class="codehilite"><pre><span></span>            &lt;type&gt;
              &lt;code&gt;
                &lt;extension url=&quot;http://hl7.org/fhir/StructureDefinition/structuredefinition-json-type&quot;&gt;
                  &lt;valueString value=&quot;string&quot;/&gt;
                &lt;/extension&gt;
                &lt;extension url=&quot;http://hl7.org/fhir/StructureDefinition/structuredefinition-xml-type&quot;&gt;
                  &lt;valueString value=&quot;xsd:string&quot;/&gt;
                &lt;/extension&gt;
                &lt;extension url=&quot;http://hl7.org/fhir/StructureDefinition/structuredefinition-rdf-type&quot;&gt;
                  &lt;valueString value=&quot;xsd:string&quot;/&gt;
                &lt;/extension&gt;
              &lt;/code&gt;
            &lt;/type&gt;
</pre></div>


<p>So the type declaration is similar to that of <code>Extension.url</code>, however the element id does not represent a uri.</p>



<a name="176087506"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Extension.url%20-%20fixedString%20or%20fixedUri%3F/near/176087506" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Extension.2Eurl.20-.20fixedString.20or.20fixedUri.3F.html#176087506">(Sep 19 2019 at 10:56)</a>:</h4>
<p>no, you're right, it doesn't. But now I'm not sure what your point is.</p>



<a name="176087904"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Extension.url%20-%20fixedString%20or%20fixedUri%3F/near/176087904" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Extension.2Eurl.20-.20fixedString.20or.20fixedUri.3F.html#176087904">(Sep 19 2019 at 11:02)</a>:</h4>
<p>I'm wondering how my logic could determine programmatically (from definitions) that <code>Extension.url</code> requires <code>fixedUri</code>, not <code>fixedString</code>?</p>
<p>Currently my logic inspects these extensions and maps the value back to a FHIR type, using the following mapping table:</p>
<div class="codehilite"><pre><span></span>xsd:string =&gt; FhirString
xsd:token =&gt; FhirString
xsd:div =&gt; FhirString
xsd:boolean =&gt; FhirBoolean
xsd:anyURI =&gt; FhirUri
xsd:dateTime =&gt; Instant
xsd:time =&gt; Time
xsd:gYear OR xsd:gYearMonth OR xsd:date =&gt; Date
xsd:gYear OR xsd:gYearMonth OR xsd:date OR xsd:dateTime =&gt; FhirDateTime
xsd:int =&gt; Integer
xsd:positiveInteger =&gt; PositiveInt
xsd:nonNegativeInteger =&gt; UnsignedInt
xsd:decimal OR xsd:double =&gt; FhirDecimal
</pre></div>



<a name="176088174"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Extension.url%20-%20fixedString%20or%20fixedUri%3F/near/176088174" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Extension.2Eurl.20-.20fixedString.20or.20fixedUri.3F.html#176088174">(Sep 19 2019 at 11:06)</a>:</h4>
<p>Specifically, both <code>Element.id</code> and <code>Extension.url</code> specify the exact same type declaration with compiler magic extensions ("xsd:string"). How can a system determine that <code>Extension.url</code> actually needs <code>fixedUri</code>?</p>



<a name="176088367"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Extension.url%20-%20fixedString%20or%20fixedUri%3F/near/176088367" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Extension.2Eurl.20-.20fixedString.20or.20fixedUri.3F.html#176088367">(Sep 19 2019 at 11:09)</a>:</h4>
<p>are you asking about the current deficient definitions, or the fixed ones?</p>



<a name="176088564"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Extension.url%20-%20fixedString%20or%20fixedUri%3F/near/176088564" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Extension.2Eurl.20-.20fixedString.20or.20fixedUri.3F.html#176088564">(Sep 19 2019 at 11:12)</a>:</h4>
<p>The current R4 ones. We haven't started implementing the technical correction, pending final publication.</p>



<a name="176088590"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Extension.url%20-%20fixedString%20or%20fixedUri%3F/near/176088590" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Extension.2Eurl.20-.20fixedString.20or.20fixedUri.3F.html#176088590">(Sep 19 2019 at 11:12)</a>:</h4>
<p>Just want to make sure that both our outputs are in sync.</p>



<a name="176088736"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Extension.url%20-%20fixedString%20or%20fixedUri%3F/near/176088736" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Extension.2Eurl.20-.20fixedString.20or.20fixedUri.3F.html#176088736">(Sep 19 2019 at 11:15)</a>:</h4>
<p>well, the answer right now is that you need magic knowledge to know that Extension.uri is actually a uri</p>



<a name="176088741"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Extension.url%20-%20fixedString%20or%20fixedUri%3F/near/176088741" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Extension.2Eurl.20-.20fixedString.20or.20fixedUri.3F.html#176088741">(Sep 19 2019 at 11:15)</a>:</h4>
<p>the technical corrections fix that</p>



<a name="176089131"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Extension.url%20-%20fixedString%20or%20fixedUri%3F/near/176089131" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Extension.2Eurl.20-.20fixedString.20or.20fixedUri.3F.html#176089131">(Sep 19 2019 at 11:20)</a>:</h4>
<p>Ouch... I prefer not to rely on "magic knowledge" at all, as it is brittle and error prone.<br>
So why can't we use <code>fixedString</code> then? Are there any compelling reasons for introducing "magic knowledge" so we get a <code>fixedUri</code>? What benefits does this provide?</p>



<a name="176089477"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Extension.url%20-%20fixedString%20or%20fixedUri%3F/near/176089477" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Extension.2Eurl.20-.20fixedString.20or.20fixedUri.3F.html#176089477">(Sep 19 2019 at 11:25)</a>:</h4>
<p>what benefits? How about consistency with the actual specification? Finding an issue in the structure definitions, with a known fix, and you want to solve it in a way that is inconsistent with the spec?</p>



<a name="176090604"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Extension.url%20-%20fixedString%20or%20fixedUri%3F/near/176090604" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Extension.2Eurl.20-.20fixedString.20or.20fixedUri.3F.html#176090604">(Sep 19 2019 at 11:42)</a>:</h4>
<p>Is it really inconsistent? You just mentioned that this aspect requires "magic knowledge".  So there is no way to programmatically determine this and it is not (clearly) defined by the spec, i.e. ambiguous. By some historic convention (?), the official snapshots now introduce <code>fixedUri</code>. However the official definitions could also introduce <code>fixedString</code>, as the spec itself does not explicitly define what the type of the fixed value should be. And the latter wouldn't require any "magic knowledge".<br>
Apologies for the hammering, I'm just trying to determine if I can avoid any _magic_.</p>



<a name="176091098"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Extension.url%20-%20fixedString%20or%20fixedUri%3F/near/176091098" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Extension.2Eurl.20-.20fixedString.20or.20fixedUri.3F.html#176091098">(Sep 19 2019 at 11:51)</a>:</h4>
<p>you cannot avoid magic and be conformant until I get the technical correction out</p>



<a name="176091260"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Extension.url%20-%20fixedString%20or%20fixedUri%3F/near/176091260" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Extension.2Eurl.20-.20fixedString.20or.20fixedUri.3F.html#176091260">(Sep 19 2019 at 11:54)</a>:</h4>
<p>you could not use fixedString and be conformant with what the specification says (not the structure definitions).</p>



<a name="176093047"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Extension.url%20-%20fixedString%20or%20fixedUri%3F/near/176093047" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Extension.2Eurl.20-.20fixedString.20or.20fixedUri.3F.html#176093047">(Sep 19 2019 at 12:18)</a>:</h4>
<p>The specification currently doesn't explicitly _say_ anything about this (hence my questioning), so it is unclear what conforms. The core profiles now seem to make arbitrary (inconsistent) decisions when introducing fixed values for system type elements, w/o any formal rules. Specifying <code>fixedString</code> for all element with system type "xsd:string" makes the definitions regular (consistent) and allows for deterministic logic w/o any magic.<br>
Or are you simply worried about backwards compatibility with existing R4 definitions?</p>



<a name="176093210"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Extension.url%20-%20fixedString%20or%20fixedUri%3F/near/176093210" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Extension.2Eurl.20-.20fixedString.20or.20fixedUri.3F.html#176093210">(Sep 19 2019 at 12:20)</a>:</h4>
<p>it absolutely does say that. it says that extension.url is a uri</p>



<a name="176093575"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Extension.url%20-%20fixedString%20or%20fixedUri%3F/near/176093575" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Extension.2Eurl.20-.20fixedString.20or.20fixedUri.3F.html#176093575">(Sep 19 2019 at 12:26)</a>:</h4>
<p>Indeed, I see. I guess this is the "magic" that you mentioned, as this isn't expressed in the XML definitions.<br>
I consider this a historic design mistake. Apparently I have no other option than to implement "magic" :(</p>



<a name="176094976"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Extension.url%20-%20fixedString%20or%20fixedUri%3F/near/176094976" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Extension.2Eurl.20-.20fixedString.20or.20fixedUri.3F.html#176094976">(Sep 19 2019 at 12:45)</a>:</h4>
<p>The extension.url and the fixedUri won't necessarily be the same.  The StructureDefinition.url is the canonical URL for the extension 'profile'.  The fixedUri for the Extension.url identifies the semantics.  You can have extension profiles that constrain other extension profiles.  The fixedUri is set to the canonical url of the base extension profile.  The 'constraining' extension profiles define additional constraints and have their own distinct canonical URLs (possibly with different roots), but do not change the fixedUri.</p>



<a name="176095045"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Extension.url%20-%20fixedString%20or%20fixedUri%3F/near/176095045" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Extension.2Eurl.20-.20fixedString.20or.20fixedUri.3F.html#176095045">(Sep 19 2019 at 12:46)</a>:</h4>
<p>When you reference the extension in a profile, you might point to the profile for the constrained version of the extension.</p>



<a name="176095993"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Extension.url%20-%20fixedString%20or%20fixedUri%3F/near/176095993" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Extension.2Eurl.20-.20fixedString.20or.20fixedUri.3F.html#176095993">(Sep 19 2019 at 12:57)</a>:</h4>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> thank you for the helpful clarification!<br>
Quite subtle. I see why derived extension profiles should inherit fixed url values from the base.<br>
Will revisit .NET (R4) SnapGen &amp; Forge to harmonize this.</p>



<a name="176096741"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Extension.url%20-%20fixedString%20or%20fixedUri%3F/near/176096741" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Extension.2Eurl.20-.20fixedString.20or.20fixedUri.3F.html#176096741">(Sep 19 2019 at 13:05)</a>:</h4>
<p>well, the good news is that ot won't be magic once I issue the technical correction</p>



<a name="176135301"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Extension.url%20-%20fixedString%20or%20fixedUri%3F/near/176135301" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Extension.2Eurl.20-.20fixedString.20or.20fixedUri.3F.html#176135301">(Sep 19 2019 at 19:50)</a>:</h4>
<p>But there is indeed a subtle point here that in fixed[x], the 'x' cannot be a System.X type - but that manifests only in Extension.url and <a href="http://Element.id" target="_blank" title="http://Element.id">Element.id</a> - which are already a bit exceptional anyway.</p>



<a name="176176159"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Extension.url%20-%20fixedString%20or%20fixedUri%3F/near/176176159" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Extension.2Eurl.20-.20fixedString.20or.20fixedUri.3F.html#176176159">(Sep 20 2019 at 09:01)</a>:</h4>
<p>@Ewout thanks, that explains.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
