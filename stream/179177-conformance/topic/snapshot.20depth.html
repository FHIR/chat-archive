---
layout: page
title: "FHIR Chat  · snapshot depth · conformance"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/index.html">conformance</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/snapshot.20depth.html">snapshot depth</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153835906"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/snapshot%20depth/near/153835906" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/snapshot.20depth.html#153835906">(Jun 30 2016 at 16:14)</a>:</h4>
<p>Is there some reason that snapshots include id and extension children of backbone element but not on other elements?  At the root of a resource this makes sense since id, extension, and modifierExtension are included via base inheritance (id here is <a href="http://Resource.id" target="_blank" title="http://Resource.id">Resource.id</a> and not <a href="http://Element.id" target="_blank" title="http://Element.id">Element.id</a>).  But BackboneElement is just a type and seems to be treated specially in that its children are included.  This is in contrast to say Identifier elements where children are not included.</p>



<a name="153835948"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/snapshot%20depth/near/153835948" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/snapshot.20depth.html#153835948">(Jun 30 2016 at 21:22)</a>:</h4>
<p>In other worlds, why is:<br>
<code>ValueSet.compose.extension</code> in the snapshot and,<br>
<code>ValueSet.identifier.extension</code> not?</p>



<a name="153835960"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/snapshot%20depth/near/153835960" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/snapshot.20depth.html#153835960">(Jun 30 2016 at 21:33)</a>:</h4>
<p>because ValueSet.identifier is a reference to another type which does include those in it's snapshot. If you look at the profiles that walk into a data type, you'll see that in that case, those elements are included. </p>



<a name="153835966"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/snapshot%20depth/near/153835966" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/snapshot.20depth.html#153835966">(Jun 30 2016 at 22:30)</a>:</h4>
<p>ValueSet.identifier references the Identifier type, and Identifier.extension is included in that type profile's snapshot. Similarly...<br>
ValueSet.compose references the BackboneElement type, and BackboneElement.extension is included in *that* type's snapshot.<br>
I don't see the difference....</p>



<a name="153835967"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/snapshot%20depth/near/153835967" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/snapshot.20depth.html#153835967">(Jun 30 2016 at 22:31)</a>:</h4>
<p>I'm ok with "just because"....but as I'm working out the canonical snapshot rules, I need to understand...</p>



<a name="153835968"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/snapshot%20depth/near/153835968" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/snapshot.20depth.html#153835968">(Jun 30 2016 at 22:33)</a>:</h4>
<p>well, the reason they're different is because the snapshot walks into the backbone elmenet, but doesn't walk into the identifier</p>



<a name="153835969"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/snapshot%20depth/near/153835969" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/snapshot.20depth.html#153835969">(Jun 30 2016 at 22:34)</a>:</h4>
<p>yeah...I don't "walk" into either type in my case...</p>



<a name="153835970"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/snapshot%20depth/near/153835970" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/snapshot.20depth.html#153835970">(Jun 30 2016 at 22:34)</a>:</h4>
<p>you can tell whether a type is being referenced or desribed by whether there's any child elements. No child elements - see the type for furthe details. Child details: ignore the type, and use what's inline</p>



<a name="153835971"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/snapshot%20depth/near/153835971" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/snapshot.20depth.html#153835971">(Jun 30 2016 at 22:34)</a>:</h4>
<p>e.g. I don't generate the compose.extension because I don't retrieve the type's children...</p>



<a name="153835973"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/snapshot%20depth/near/153835973" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/snapshot.20depth.html#153835973">(Jun 30 2016 at 22:34)</a>:</h4>
<p>you have to walk into a backbone element, because it's abstract </p>



<a name="153835974"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/snapshot%20depth/near/153835974" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/snapshot.20depth.html#153835974">(Jun 30 2016 at 22:35)</a>:</h4>
<p>I would only include compose.extension if the local profile includes extension in the differential</p>



<a name="153835975"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/snapshot%20depth/near/153835975" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/snapshot.20depth.html#153835975">(Jun 30 2016 at 22:36)</a>:</h4>
<p>then you're wrong, I'm afraid. </p>



<a name="153835976"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/snapshot%20depth/near/153835976" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/snapshot.20depth.html#153835976">(Jun 30 2016 at 22:37)</a>:</h4>
<p>:) maybe...I don't see clear reasoning why BackboneElement's children get included.</p>



<a name="153835977"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/snapshot%20depth/near/153835977" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/snapshot.20depth.html#153835977">(Jun 30 2016 at 22:37)</a>:</h4>
<p>And Element's children don't.</p>



<a name="153835978"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/snapshot%20depth/near/153835978" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/snapshot.20depth.html#153835978">(Jun 30 2016 at 22:37)</a>:</h4>
<p>in the snapshot, it's all or nothing - either you reference a type, or you inline the type - all of the type </p>



<a name="153835979"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/snapshot%20depth/near/153835979" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/snapshot.20depth.html#153835979">(Jun 30 2016 at 22:38)</a>:</h4>
<p>Ah....</p>



<a name="153835980"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/snapshot%20depth/near/153835980" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/snapshot.20depth.html#153835980">(Jun 30 2016 at 22:38)</a>:</h4>
<p>if you can find anywhere where the profiles don't follow that rule, then I'll have to fix something</p>



<a name="153835981"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/snapshot%20depth/near/153835981" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/snapshot.20depth.html#153835981">(Jun 30 2016 at 22:39)</a>:</h4>
<p>we don't want to have the situation where you inline of some a type and then something has to figure out what the intent is in overlap/gap somewhere. it's all or nothing</p>



<a name="153835982"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/snapshot%20depth/near/153835982" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/snapshot.20depth.html#153835982">(Jun 30 2016 at 22:39)</a>:</h4>
<p>ok....that really sucks for my tooling, but now I understand....</p>



<a name="153835983"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/snapshot%20depth/near/153835983" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/snapshot.20depth.html#153835983">(Jun 30 2016 at 22:41)</a>:</h4>
<p>value[x] variations don't count?</p>



<a name="153835984"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/snapshot%20depth/near/153835984" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/snapshot.20depth.html#153835984">(Jun 30 2016 at 22:42)</a>:</h4>
<p>not sure what you mean by 'count' there. </p>



<a name="153836061"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/snapshot%20depth/near/153836061" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/snapshot.20depth.html#153836061">(Jul 01 2016 at 14:43)</a>:</h4>
<p>For instance, if my extension allows boolean and dateTime types for value[x], and I include a valueBoolean element in my differential, should the snapshot also create a valueDateTime element?</p>



<a name="153836122"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/snapshot%20depth/near/153836122" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/snapshot.20depth.html#153836122">(Jul 01 2016 at 21:40)</a>:</h4>
<p>that's a good question. I'm not really sure. </p>



<a name="153846168"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/snapshot%20depth/near/153846168" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/snapshot.20depth.html#153846168">(Sep 01 2016 at 22:59)</a>:</h4>
<p><span class="user-mention" data-user-id="191336">@Michel Rutten</span> What does Forge do with this?</p>



<a name="153846250"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/snapshot%20depth/near/153846250" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/snapshot.20depth.html#153846250">(Sep 02 2016 at 10:03)</a>:</h4>
<p><span class="user-mention" data-user-id="191351">@Chris Grenz</span> Forge development branch now uses the FHIR.NET API for snapshot expansion.<br>
Here's an example of the currently generated snapshot:<br>
<a href="https://simplifier.net/noAuditLog/noAuditEvent" target="_blank" title="https://simplifier.net/noAuditLog/noAuditEvent">https://simplifier.net/noAuditLog/noAuditEvent</a><br>
As you can see, currently the generated snapshot always expands elements of type BackboneElement to include extension and modifierExtension child elements.<br>
We received some feedback from Simplifier customers about this. Apparently our users are considering this to be noise and would like these elements to be hidden in the rendering. From a user's perspective, a rendering only needs to include these elements if the profile actually contains associated differential constraints:<br>
- If  the profile introduces one or more specific extensions<br>
- If the profile specifies custom cardinality on the extension element (e.g. extension.max = 0)<br>
- If the profile specifies custom constraints on the extension slicing entry (e.g. slicing.rules = closed)</p>



<a name="153846274"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/snapshot%20depth/near/153846274" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/snapshot.20depth.html#153846274">(Sep 02 2016 at 13:44)</a>:</h4>
<p>How you display the snapshot is up to you, but the snapshot itself definitely needs to contain them.  (And it would be good to have at least an indicator that elements from abstract parents have been hidden.)</p>



<a name="153846276"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/snapshot%20depth/near/153846276" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/snapshot.20depth.html#153846276">(Sep 02 2016 at 13:45)</a>:</h4>
<p>Also, keep in mind that it's not just extensions that can get profiled.  I would say that if there are *any* constraints/overrides on an element (even adding a usage note to "id"), you should make sure you render it.</p>



<a name="153846281"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/snapshot%20depth/near/153846281" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/snapshot.20depth.html#153846281">(Sep 02 2016 at 14:38)</a>:</h4>
<p>Agree with Lloyd - if it's a valid child of an element that is being expanded, it must be included.</p>



<a name="153846293"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/snapshot%20depth/near/153846293" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/snapshot.20depth.html#153846293">(Sep 02 2016 at 16:50)</a>:</h4>
<p>Indeed, I see why. So the logic to hide/show "noisy" infrastructural elements should be incorporated into the rendering logic.</p>



<a name="153846294"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/snapshot%20depth/near/153846294" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/snapshot.20depth.html#153846294">(Sep 02 2016 at 16:51)</a>:</h4>
<p>e.g. if the element is inherited from DomainResource/BackboneElement and it has no associated differential constraints, then hide the element in the UI.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
