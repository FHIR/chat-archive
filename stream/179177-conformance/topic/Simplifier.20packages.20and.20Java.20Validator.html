---
layout: page
title: "FHIR Chat  · Simplifier packages and Java Validator · conformance"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/index.html">conformance</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Simplifier.20packages.20and.20Java.20Validator.html">Simplifier packages and Java Validator</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="178859296"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Simplifier%20packages%20and%20Java%20Validator/near/178859296" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noemi Deppenwiese <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Simplifier.20packages.20and.20Java.20Validator.html#178859296">(Oct 23 2019 at 14:34)</a>:</h4>
<p>Can I supply Simplifier-generated packages to the validator JAR? I downloaded the package from Simplifier and tried to validate some resources while pointing the -ig Flag to the *.tgz file, but I keep getting</p>
<div class="codehilite"><pre><span></span>Exception in thread &quot;main&quot; java.lang.NullPointerException
        at org.hl7.fhir.utilities.cache.NpmPackage.fhirVersion(NpmPackage.java:297)
        at org.hl7.fhir.r5.validation.ValidationEngine.loadPackage(ValidationEngine.java:625)
        at org.hl7.fhir.r5.validation.ValidationEngine.loadPackage(ValidationEngine.java:616)
        at org.hl7.fhir.r5.validation.ValidationEngine.loadIgSource(ValidationEngine.java:511)
        at org.hl7.fhir.r5.validation.ValidationEngine.loadIg(ValidationEngine.java:776)
        at org.hl7.fhir.r5.validation.Validator.main(Validator.java:481)
</pre></div>


<p>Tried it with my project (<a href="https://simplifier.net/packages/bbmri.de/0.3.2" target="_blank" title="https://simplifier.net/packages/bbmri.de/0.3.2">https://simplifier.net/packages/bbmri.de/0.3.2</a>) and one from HL7 Germany (<a href="https://simplifier.net/packages/de.basisprofil.r4/0.9.0" target="_blank" title="https://simplifier.net/packages/de.basisprofil.r4/0.9.0">https://simplifier.net/packages/de.basisprofil.r4/0.9.0</a>), resulting in the same error.</p>



<a name="178866113"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Simplifier%20packages%20and%20Java%20Validator/near/178866113" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Simplifier.20packages.20and.20Java.20Validator.html#178866113">(Oct 23 2019 at 15:37)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span></p>



<a name="178866125"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Simplifier%20packages%20and%20Java%20Validator/near/178866125" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ward Weistra <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Simplifier.20packages.20and.20Java.20Validator.html#178866125">(Oct 23 2019 at 15:37)</a>:</h4>
<p>Thanks for trying Noemi, let's debug this together with <span class="user-mention" data-user-id="191335">@Martijn Harthoorn</span> and <span class="user-mention" data-user-id="191316">@Grahame Grieve</span>.</p>
<p>I get the same error validating this example (<a href="https://simplifier.net/basisprofil-de-r4/example-patient-de-basis-kvid" target="_blank" title="https://simplifier.net/basisprofil-de-r4/example-patient-de-basis-kvid">https://simplifier.net/basisprofil-de-r4/example-patient-de-basis-kvid</a>) against this package (<a href="https://simplifier.net/packages/de.basisprofil.r4/0.9.0" target="_blank" title="https://simplifier.net/packages/de.basisprofil.r4/0.9.0">https://simplifier.net/packages/de.basisprofil.r4/0.9.0</a>):</p>
<div class="codehilite"><pre><span></span><span class="nb">PS </span><span class="n">C</span><span class="err">:</span><span class="p">\</span><span class="n">Users</span><span class="p">\</span><span class="n">Ward</span><span class="p">\</span><span class="n">Workspace</span><span class="p">\</span><span class="n">java-validator</span><span class="p">&gt;</span> <span class="n">java</span> <span class="n">-Xmx1024m</span> <span class="n">-jar</span> <span class="p">.\</span><span class="n">org</span><span class="p">.</span><span class="n">hl7</span><span class="p">.</span><span class="n">fhir</span><span class="p">.</span><span class="n">validator</span><span class="p">.</span><span class="n">jar</span> <span class="p">.\</span><span class="n">Example-patient-de-basis-k</span>
<span class="n">vid</span><span class="p">.</span><span class="n">json</span> <span class="n">-ig</span> <span class="p">.\</span><span class="n">de</span><span class="p">.</span><span class="n">basisprofil</span><span class="p">.</span><span class="n">r4</span><span class="p">-</span><span class="n">0</span><span class="p">.</span><span class="n">9</span><span class="p">.</span><span class="n">0</span><span class="p">.</span><span class="n">tgz</span> <span class="n">-version</span> <span class="n">4</span><span class="p">.</span><span class="n">0</span><span class="p">.</span><span class="n">0</span>
<span class="n">FHIR</span> <span class="n">Validation</span> <span class="n">tool</span> <span class="n">Version</span> <span class="n">4</span><span class="p">.</span><span class="n">0</span><span class="p">.</span><span class="n">26-SNAPSHOT</span> <span class="p">-</span> <span class="n">Built</span> <span class="n">2019</span><span class="p">-</span><span class="n">10</span><span class="p">-</span><span class="n">18T22</span><span class="err">:</span><span class="n">28</span><span class="err">:</span><span class="n">38</span><span class="p">.</span><span class="n">796</span><span class="p">+</span><span class="n">11</span><span class="err">:</span><span class="n">00</span> <span class="p">-</span> <span class="n">Git</span> <span class="n">f9b52109cffb</span>
<span class="n">Detected</span> <span class="n">Java</span> <span class="n">version</span><span class="err">:</span> <span class="n">1</span><span class="p">.</span><span class="n">8</span><span class="p">.</span><span class="n">0_231</span> <span class="n">from</span> <span class="n">C</span><span class="err">:</span><span class="p">\</span><span class="n">Program</span> <span class="n">Files</span> <span class="p">(</span><span class="n">x86</span><span class="p">)\</span><span class="n">Java</span><span class="p">\</span><span class="n">jre1</span><span class="p">.</span><span class="n">8</span><span class="p">.</span><span class="n">0_231</span> <span class="n">on</span> <span class="n">x86</span> <span class="p">(</span><span class="n">32bit</span><span class="p">).</span> <span class="n">989MB</span> <span class="n">available</span>
<span class="n">Arguments</span><span class="err">:</span> <span class="p">.\</span><span class="n">Example-patient-de-basis-kvid</span><span class="p">.</span><span class="n">json</span> <span class="n">-ig</span> <span class="p">.\</span><span class="n">de</span><span class="p">.</span><span class="n">basisprofil</span><span class="p">.</span><span class="n">r4</span><span class="p">-</span><span class="n">0</span><span class="p">.</span><span class="n">9</span><span class="p">.</span><span class="n">0</span><span class="p">.</span><span class="n">tgz</span> <span class="n">-version</span> <span class="n">4</span><span class="p">.</span><span class="n">0</span><span class="p">.</span><span class="n">0</span>
<span class="n">Directories</span><span class="err">:</span> <span class="n">Current</span> <span class="p">=</span> <span class="n">C</span><span class="err">:</span><span class="p">\</span><span class="n">Users</span><span class="p">\</span><span class="n">Ward</span><span class="p">\</span><span class="n">Workspace</span><span class="p">\</span><span class="n">java-validator</span><span class="p">,</span> <span class="n">Package</span> <span class="n">Cache</span> <span class="p">=</span> <span class="n">C</span><span class="err">:</span><span class="p">\</span><span class="n">Users</span><span class="p">\</span><span class="n">Ward</span><span class="p">\.</span><span class="n">fhir</span><span class="p">\</span><span class="n">packages</span>
  <span class="p">..</span> <span class="n">connect</span> <span class="n">to</span> <span class="n">tx</span> <span class="n">server</span> <span class="p">@</span> <span class="n">http</span><span class="err">:</span><span class="p">//</span><span class="n">tx</span><span class="p">.</span><span class="n">fhir</span><span class="p">.</span><span class="n">org</span>
  <span class="p">..</span> <span class="n">definitions</span> <span class="n">from</span> <span class="n">hl7</span><span class="p">.</span><span class="n">fhir</span><span class="p">.</span><span class="n">core</span><span class="c">#4.0.0</span>
    <span class="p">(</span><span class="n">v4</span><span class="p">.</span><span class="n">0</span><span class="p">.</span><span class="n">0</span><span class="p">)</span>
<span class="p">+</span>  <span class="p">..</span> <span class="n">load</span> <span class="n">IG</span> <span class="n">from</span> <span class="p">.\</span><span class="n">de</span><span class="p">.</span><span class="n">basisprofil</span><span class="p">.</span><span class="n">r4</span><span class="p">-</span><span class="n">0</span><span class="p">.</span><span class="n">9</span><span class="p">.</span><span class="n">0</span><span class="p">.</span><span class="n">tgz</span>
<span class="n">Loading</span> <span class="p">.\</span><span class="n">de</span><span class="p">.</span><span class="n">basisprofil</span><span class="p">.</span><span class="n">r4</span><span class="p">-</span><span class="n">0</span><span class="p">.</span><span class="n">9</span><span class="p">.</span><span class="n">0</span><span class="p">.</span><span class="n">tgz</span> <span class="n">to</span> <span class="n">the</span> <span class="n">package</span> <span class="n">cache</span>
  <span class="n">Fetching</span><span class="err">:</span><span class="p">..</span> <span class="n">done</span><span class="p">.</span>
<span class="n">Exception</span> <span class="k">in</span> <span class="n">thread</span> <span class="s2">&quot;main&quot;</span> <span class="n">java</span><span class="p">.</span><span class="n">lang</span><span class="p">.</span><span class="n">NullPointerException</span>
        <span class="n">at</span> <span class="n">org</span><span class="p">.</span><span class="n">hl7</span><span class="p">.</span><span class="n">fhir</span><span class="p">.</span><span class="n">utilities</span><span class="p">.</span><span class="n">cache</span><span class="p">.</span><span class="n">NpmPackage</span><span class="p">.</span><span class="n">fhirVersion</span><span class="p">(</span><span class="n">NpmPackage</span><span class="p">.</span><span class="n">java</span><span class="err">:</span><span class="n">297</span><span class="p">)</span>
        <span class="n">at</span> <span class="n">org</span><span class="p">.</span><span class="n">hl7</span><span class="p">.</span><span class="n">fhir</span><span class="p">.</span><span class="n">r5</span><span class="p">.</span><span class="n">validation</span><span class="p">.</span><span class="n">ValidationEngine</span><span class="p">.</span><span class="n">loadPackage</span><span class="p">(</span><span class="n">ValidationEngine</span><span class="p">.</span><span class="n">java</span><span class="err">:</span><span class="n">625</span><span class="p">)</span>
        <span class="n">at</span> <span class="n">org</span><span class="p">.</span><span class="n">hl7</span><span class="p">.</span><span class="n">fhir</span><span class="p">.</span><span class="n">r5</span><span class="p">.</span><span class="n">validation</span><span class="p">.</span><span class="n">ValidationEngine</span><span class="p">.</span><span class="n">loadPackage</span><span class="p">(</span><span class="n">ValidationEngine</span><span class="p">.</span><span class="n">java</span><span class="err">:</span><span class="n">616</span><span class="p">)</span>
        <span class="n">at</span> <span class="n">org</span><span class="p">.</span><span class="n">hl7</span><span class="p">.</span><span class="n">fhir</span><span class="p">.</span><span class="n">r5</span><span class="p">.</span><span class="n">validation</span><span class="p">.</span><span class="n">ValidationEngine</span><span class="p">.</span><span class="n">loadIgSource</span><span class="p">(</span><span class="n">ValidationEngine</span><span class="p">.</span><span class="n">java</span><span class="err">:</span><span class="n">511</span><span class="p">)</span>
        <span class="n">at</span> <span class="n">org</span><span class="p">.</span><span class="n">hl7</span><span class="p">.</span><span class="n">fhir</span><span class="p">.</span><span class="n">r5</span><span class="p">.</span><span class="n">validation</span><span class="p">.</span><span class="n">ValidationEngine</span><span class="p">.</span><span class="n">loadIg</span><span class="p">(</span><span class="n">ValidationEngine</span><span class="p">.</span><span class="n">java</span><span class="err">:</span><span class="n">776</span><span class="p">)</span>
        <span class="n">at</span> <span class="n">org</span><span class="p">.</span><span class="n">hl7</span><span class="p">.</span><span class="n">fhir</span><span class="p">.</span><span class="n">r5</span><span class="p">.</span><span class="n">validation</span><span class="p">.</span><span class="n">Validator</span><span class="p">.</span><span class="n">main</span><span class="p">(</span><span class="n">Validator</span><span class="p">.</span><span class="n">java</span><span class="err">:</span><span class="n">481</span><span class="p">)</span>
</pre></div>


<p>And I don't get that error validating this example (<a href="http://hl7.org/fhir/us/core/Patient-example.json.html" target="_blank" title="http://hl7.org/fhir/us/core/Patient-example.json.html">http://hl7.org/fhir/us/core/Patient-example.json.html</a>) against the package downloaded from here (<a href="http://hl7.org/fhir/us/core/downloads.html" target="_blank" title="http://hl7.org/fhir/us/core/downloads.html">http://hl7.org/fhir/us/core/downloads.html</a>):</p>
<div class="codehilite"><pre><span></span><span class="nb">PS </span><span class="n">C</span><span class="err">:</span><span class="p">\</span><span class="n">Users</span><span class="p">\</span><span class="n">Ward</span><span class="p">\</span><span class="n">Workspace</span><span class="p">\</span><span class="n">java-validator</span><span class="p">&gt;</span> <span class="n">java</span> <span class="n">-Xmx1024m</span> <span class="n">-jar</span> <span class="p">.\</span><span class="n">org</span><span class="p">.</span><span class="n">hl7</span><span class="p">.</span><span class="n">fhir</span><span class="p">.</span><span class="n">validator</span><span class="p">.</span><span class="n">jar</span> <span class="p">.\</span><span class="n">Patient-example</span><span class="p">.</span><span class="n">json</span> <span class="n">-ig</span> <span class="p">.</span>
<span class="p">\</span><span class="n">package-us-core</span><span class="p">.</span><span class="n">tgz</span> <span class="n">-version</span> <span class="n">4</span><span class="p">.</span><span class="n">0</span><span class="p">.</span><span class="n">0</span>
<span class="n">FHIR</span> <span class="n">Validation</span> <span class="n">tool</span> <span class="n">Version</span> <span class="n">4</span><span class="p">.</span><span class="n">0</span><span class="p">.</span><span class="n">26-SNAPSHOT</span> <span class="p">-</span> <span class="n">Built</span> <span class="n">2019</span><span class="p">-</span><span class="n">10</span><span class="p">-</span><span class="n">18T22</span><span class="err">:</span><span class="n">28</span><span class="err">:</span><span class="n">38</span><span class="p">.</span><span class="n">796</span><span class="p">+</span><span class="n">11</span><span class="err">:</span><span class="n">00</span> <span class="p">-</span> <span class="n">Git</span> <span class="n">f9b52109cffb</span>
<span class="n">Detected</span> <span class="n">Java</span> <span class="n">version</span><span class="err">:</span> <span class="n">1</span><span class="p">.</span><span class="n">8</span><span class="p">.</span><span class="n">0_231</span> <span class="n">from</span> <span class="n">C</span><span class="err">:</span><span class="p">\</span><span class="n">Program</span> <span class="n">Files</span> <span class="p">(</span><span class="n">x86</span><span class="p">)\</span><span class="n">Java</span><span class="p">\</span><span class="n">jre1</span><span class="p">.</span><span class="n">8</span><span class="p">.</span><span class="n">0_231</span> <span class="n">on</span> <span class="n">x86</span> <span class="p">(</span><span class="n">32bit</span><span class="p">).</span> <span class="n">989MB</span> <span class="n">available</span>
<span class="n">Arguments</span><span class="err">:</span> <span class="p">.\</span><span class="n">Patient-example</span><span class="p">.</span><span class="n">json</span> <span class="n">-ig</span> <span class="p">.\</span><span class="n">package-us-core</span><span class="p">.</span><span class="n">tgz</span> <span class="n">-version</span> <span class="n">4</span><span class="p">.</span><span class="n">0</span><span class="p">.</span><span class="n">0</span>
<span class="n">Directories</span><span class="err">:</span> <span class="n">Current</span> <span class="p">=</span> <span class="n">C</span><span class="err">:</span><span class="p">\</span><span class="n">Users</span><span class="p">\</span><span class="n">Ward</span><span class="p">\</span><span class="n">Workspace</span><span class="p">\</span><span class="n">java-validator</span><span class="p">,</span> <span class="n">Package</span> <span class="n">Cache</span> <span class="p">=</span> <span class="n">C</span><span class="err">:</span><span class="p">\</span><span class="n">Users</span><span class="p">\</span><span class="n">Ward</span><span class="p">\.</span><span class="n">fhir</span><span class="p">\</span><span class="n">packages</span>
  <span class="p">..</span> <span class="n">connect</span> <span class="n">to</span> <span class="n">tx</span> <span class="n">server</span> <span class="p">@</span> <span class="n">http</span><span class="err">:</span><span class="p">//</span><span class="n">tx</span><span class="p">.</span><span class="n">fhir</span><span class="p">.</span><span class="n">org</span>
  <span class="p">..</span> <span class="n">definitions</span> <span class="n">from</span> <span class="n">hl7</span><span class="p">.</span><span class="n">fhir</span><span class="p">.</span><span class="n">core</span><span class="c">#4.0.0</span>
    <span class="p">(</span><span class="n">v4</span><span class="p">.</span><span class="n">0</span><span class="p">.</span><span class="n">0</span><span class="p">)</span>
<span class="p">+</span>  <span class="p">..</span> <span class="n">load</span> <span class="n">IG</span> <span class="n">from</span> <span class="p">.\</span><span class="n">package-us-core</span><span class="p">.</span><span class="n">tgz</span>
<span class="n">Loading</span> <span class="p">.\</span><span class="n">package-us-core</span><span class="p">.</span><span class="n">tgz</span> <span class="n">to</span> <span class="n">the</span> <span class="n">package</span> <span class="n">cache</span>
  <span class="n">Fetching</span><span class="err">:</span><span class="p">............</span> <span class="n">done</span><span class="p">.</span>
  <span class="p">..</span> <span class="n">validate</span> <span class="p">[.\</span><span class="n">Patient-example</span><span class="p">.</span><span class="n">json</span><span class="p">]</span>
<span class="n">Success</span><span class="p">...</span><span class="n">validating</span> <span class="p">.\</span><span class="n">Patient-example</span><span class="p">.</span><span class="n">json</span><span class="err">:</span>  <span class="n">error</span><span class="err">:</span><span class="n">0</span> <span class="n">warn</span><span class="err">:</span><span class="n">0</span> <span class="n">info</span><span class="err">:</span><span class="n">0</span>
</pre></div>


<p>It's likely because the package spec is only solidifying now and Grahame and Martijn just recently reached agreement on it: <a href="https://wiki.hl7.org/FHIR_NPM_Package_Spec" target="_blank" title="https://wiki.hl7.org/FHIR_NPM_Package_Spec">https://wiki.hl7.org/FHIR_NPM_Package_Spec</a></p>



<a name="178866945"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Simplifier%20packages%20and%20Java%20Validator/near/178866945" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ward Weistra <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Simplifier.20packages.20and.20Java.20Validator.html#178866945">(Oct 23 2019 at 15:44)</a>:</h4>
<p>The <a href="http://hl7.org" target="_blank" title="http://hl7.org">hl7.org</a> US-Core package manifest (<code>package/package.json</code>):</p>
<div class="codehilite"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;tools-version&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
  <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;fhir.ig&quot;</span><span class="p">,</span>
  <span class="nt">&quot;license&quot;</span><span class="p">:</span> <span class="s2">&quot;CC0-1.0&quot;</span><span class="p">,</span>
  <span class="nt">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;US Core R4&quot;</span><span class="p">,</span>
  <span class="nt">&quot;dependencies&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;hl7.fhir.core&quot;</span><span class="p">:</span> <span class="s2">&quot;4.0.0&quot;</span>
  <span class="p">},</span>
  <span class="nt">&quot;author&quot;</span><span class="p">:</span> <span class="s2">&quot;HL7 International - US Realm Steering Committee&quot;</span><span class="p">,</span>
  <span class="nt">&quot;version&quot;</span><span class="p">:</span> <span class="s2">&quot;3.0.0&quot;</span><span class="p">,</span>
  <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;hl7.fhir.us.core&quot;</span><span class="p">,</span>
  <span class="nt">&quot;url&quot;</span><span class="p">:</span> <span class="s2">&quot;http://hl7.org/fhir/us/core/STU3&quot;</span><span class="p">,</span>
  <span class="nt">&quot;canonical&quot;</span><span class="p">:</span> <span class="s2">&quot;http://hl7.org/fhir/us/core&quot;</span>
<span class="p">}</span>
</pre></div>


<p>The Simplifier package manifest:</p>
<div class="codehilite"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;de.basisprofil.r4&quot;</span><span class="p">,</span>
  <span class="nt">&quot;version&quot;</span><span class="p">:</span> <span class="s2">&quot;0.9.0&quot;</span><span class="p">,</span>
  <span class="nt">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Projekt Basisprofilierung R4 (HL7 Deutschland e.V.)&quot;</span><span class="p">,</span>
  <span class="nt">&quot;devDependencies&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
  <span class="nt">&quot;canonicals&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
  <span class="nt">&quot;dependencies&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;simplifier.core.r4&quot;</span><span class="p">:</span> <span class="s2">&quot;4.0.1&quot;</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<p>Perhaps the Java validator is missing the mandatory <code>author</code> element there? Or relying on other elements, currently marked optional or not listed, like <code>type</code>?  <span class="user-mention" data-user-id="191316">@Grahame Grieve</span></p>



<a name="178868061"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Simplifier%20packages%20and%20Java%20Validator/near/178868061" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ward Weistra <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Simplifier.20packages.20and.20Java.20Validator.html#178868061">(Oct 23 2019 at 15:55)</a>:</h4>
<p>Discrepancies between spec and what I see here:</p>
<ul>
<li><a href="http://hl7.org" target="_blank" title="http://hl7.org">hl7.org</a> misses <code>description</code></li>
<li>Simplifier misses <code>author</code></li>
<li>Simplifier uses <code>canonicals</code> instead of <code>canonical</code></li>
<li>Simplifier fills <code>description</code> with what <a href="http://hl7.org" target="_blank" title="http://hl7.org">hl7.org</a> fills <code>title</code> with?<br>
Both use other elements, but that is allowed (<a href="http://hl7.org" target="_blank" title="http://hl7.org">hl7.org</a>: <code>tools-version</code>, <code>type</code>; Simplifier: <code>devDependencies</code>)</li>
</ul>



<a name="178877617"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Simplifier%20packages%20and%20Java%20Validator/near/178877617" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Simplifier.20packages.20and.20Java.20Validator.html#178877617">(Oct 23 2019 at 17:42)</a>:</h4>
<p>and the version is different.... 4.0.1 does not yet exist</p>



<a name="178877627"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Simplifier%20packages%20and%20Java%20Validator/near/178877627" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Simplifier.20packages.20and.20Java.20Validator.html#178877627">(Oct 23 2019 at 17:42)</a>:</h4>
<p>I'll investigate</p>



<a name="178929068"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Simplifier%20packages%20and%20Java%20Validator/near/178929068" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ward Weistra <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Simplifier.20packages.20and.20Java.20Validator.html#178929068">(Oct 24 2019 at 07:59)</a>:</h4>
<p>Adding <code>author</code> or <code>type</code> to the Simplifier package.json didn't resolve the issue.</p>



<a name="178992008"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Simplifier%20packages%20and%20Java%20Validator/near/178992008" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Simplifier.20packages.20and.20Java.20Validator.html#178992008">(Oct 24 2019 at 20:08)</a>:</h4>
<p>this is because of the content in the package.json:</p>



<a name="178992034"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Simplifier%20packages%20and%20Java%20Validator/near/178992034" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Simplifier.20packages.20and.20Java.20Validator.html#178992034">(Oct 24 2019 at 20:09)</a>:</h4>
<div class="codehilite"><pre><span></span>  <span class="s2">&quot;dependencies&quot;</span><span class="err">:</span> <span class="p">{</span>
    <span class="nt">&quot;simplifier.core.r4&quot;</span><span class="p">:</span> <span class="s2">&quot;4.0.1&quot;</span>
  <span class="p">}</span>
</pre></div>



<a name="178992069"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Simplifier%20packages%20and%20Java%20Validator/near/178992069" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Simplifier.20packages.20and.20Java.20Validator.html#178992069">(Oct 24 2019 at 20:09)</a>:</h4>
<p>The validator doesn't know simplifier.core.r4 and I think it's not valid. nor is 4.0.1 valid for a core version either</p>



<a name="178992234"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Simplifier%20packages%20and%20Java%20Validator/near/178992234" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Simplifier.20packages.20and.20Java.20Validator.html#178992234">(Oct 24 2019 at 20:11)</a>:</h4>
<p>The next version will return a coherent error message in this case</p>



<a name="179028523"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Simplifier%20packages%20and%20Java%20Validator/near/179028523" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ward Weistra <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Simplifier.20packages.20and.20Java.20Validator.html#179028523">(Oct 25 2019 at 07:43)</a>:</h4>
<p>The entire simplifier.core.r4 project, and it's 4.0.1 version, is just our mirroring until we have the official packages on there. Which will be soon, luckily!<br>
Where does the Java validator look for it's dependency packages? Because even if I install the mentioned package in my FHIR package cache with Torinox I run into the same error.</p>



<a name="179047984"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Simplifier%20packages%20and%20Java%20Validator/near/179047984" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noemi Deppenwiese <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Simplifier.20packages.20and.20Java.20Validator.html#179047984">(Oct 25 2019 at 13:14)</a>:</h4>
<p>For a temporary fix, I tried manually editing the package.json on Simplifier:</p>
<div class="codehilite"><pre><span></span>{
  &quot;name&quot;: &quot;BBMRI.de&quot;,
  &quot;version&quot;: &quot;0.3.3&quot;,
  &quot;description&quot;: &quot;Profiles for the BBMRI.de / GBA biobanking project.&quot;,
  &quot;devDependencies&quot;: null,
  &quot;canonicals&quot;: null,
  &quot;dependencies&quot;: {
    &quot;de.basisprofil.r4&quot;: &quot;0.9.0&quot;,
    &quot;hl7.fhir.core&quot;: &quot;4.0.0&quot;
  }
}
</pre></div>


<p>Now, the Validator seems to be able to load the package, but no content (profiles/valuesets) is found:</p>
<div class="codehilite"><pre><span></span>FHIR Validation tool Version 4.0.26-SNAPSHOT - Built 2019-10-18T22:28:38.796+11:00 - Git f9b52109cffb
[...]
+  .. load IG from GBA\bbmri.de-0.3.3.tgz
Loading GBA\bbmri.de-0.3.3.tgz to the package cache
  Fetching:.. done.
  .. validate [GBA\bbmri-fhir-ig\examples]
Validate GBA\bbmri-fhir-ig\examples\exampleBiobank.json
Terminology server: Check for supported code systems for https://fhir.bbmri.de/CodeSystem/QualityStandard
[...]
Success...validating GBA\bbmri-fhir-ig\examples\exampleBiobank.json:  error:0 warn:2 info:4
  Information @ Organization.extension[0] (line 14, col6) : Unknown extension
[...]
  Warning @ Organization.meta.profile[0] (line 1, col2) : StructureDefinition reference &quot;https://fhir.bbmri.de/StructureDefinition/Biobank&quot; could not be resolved
[...]
</pre></div>



<a name="179083332"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Simplifier%20packages%20and%20Java%20Validator/near/179083332" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Simplifier.20packages.20and.20Java.20Validator.html#179083332">(Oct 25 2019 at 19:55)</a>:</h4>
<p>the java validator uses the package cache specification as published. however the reference to hl7.fhir.core is checked directly since that's special - hard coded dependency</p>



<a name="179084834"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Simplifier%20packages%20and%20Java%20Validator/near/179084834" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Simplifier.20packages.20and.20Java.20Validator.html#179084834">(Oct 25 2019 at 20:11)</a>:</h4>
<p>I would not expect manually editing the package to work like that</p>



<a name="180221572"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Simplifier%20packages%20and%20Java%20Validator/near/180221572" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ward Weistra <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Simplifier.20packages.20and.20Java.20Validator.html#180221572">(Nov 08 2019 at 11:32)</a>:</h4>
<p><span class="user-mention" data-user-id="221444">@Noemi Deppenwiese</span> I assume this is still an issue, right?<br>
<span class="user-mention" data-user-id="191316">@Grahame Grieve</span> Can you see what is wrong with <a href="https://simplifier.net/packages/bbmri.de" target="_blank" title="https://simplifier.net/packages/bbmri.de">this package</a> that would make the Java validator not find the StructureDefinitions in it? I still get the above errors:</p>
<div class="codehilite"><pre><span></span>PS C:\Users\Ward\Workspace\java-validator&gt; java -Xmx1024m -jar .\org.hl7.fhir.validator.jar .\exampleBiobank.json -version 4.0.1 -ig .\bbmri.de-0.3.3.tgz
FHIR Validation tool Version 4.0.31-SNAPSHOT - Built 2019-11-05T15:35:39.648+11:00 - Git a0ece162e77c
Detected Java version: 1.8.0_231 from C:\Program Files (x86)\Java\jre1.8.0_231 on x86 (32bit). 989MB available
Arguments: .\exampleBiobank.json -version 4.0.1 -ig .\bbmri.de-0.3.3.tgz
Directories: Current = C:\Users\Ward\Workspace\java-validator, Package Cache = C:\Users\Ward\.fhir\packages
  .. connect to tx server @ http://tx.fhir.org
  .. definitions from hl7.fhir.r4.core#4.0.1
Installing hl7.fhir.r4.core#4.0.1 to the package cache
  Fetching:............................................................................................................
  .............................................................................................|....................................................................................................
  Analysing........................................................................................... done.
    (v4.0.1)
+  .. load IG from .\bbmri.de-0.3.3.tgz
  .. validate [.\exampleBiobank.json]
Terminology server: Check for supported code systems for https://fhir.bbmri.de/CodeSystem/QualityStandard
Success...validating .\exampleBiobank.json:  error:0 warn:2 info:4
  Information @ Organization.extension[0] (line 14, col6) : Unknown extension https://fhir.bbmri.de/StructureDefinition/OrganizationDescription
  Information @ Organization.extension[1] (line 18, col6) : Unknown extension https://fhir.bbmri.de/StructureDefinition/JuridicalPerson
  Information @ Organization.extension[2] (line 22, col6) : Unknown extension https://fhir.bbmri.de/StructureDefinition/QualityStandard
  Information @ Organization.extension[3] (line 34, col6) : Unknown extension https://fhir.bbmri.de/StructureDefinition/QualityStandard
  Warning @ Organization.contact[1].purpose (line 105, col20) : None of the codes provided are in the value set http://hl7.org/fhir/ValueSet/contactentity-type (http://hl7.org/fhir/ValueSet/contactentity-type, and a code should come from this value set unless it has no suitable code) (codes = https://fhir.bbmri.de/CodeSystem/ContactType#RESEARCH)
  Warning @ Organization.meta.profile[0] (line 1, col2) : StructureDefinition reference &quot;https://fhir.bbmri.de/StructureDefinition/Biobank&quot; could not be resolved
</pre></div>


<p>Validating with <a href="https://simplifier.net/downloads/torinox" target="_blank" title="https://simplifier.net/downloads/torinox">Torinox</a> I only get errors related to the terminology server:</p>
<div class="codehilite"><pre><span></span>PS C:\Users\Ward\Workspace\java-validator&gt; fhir4 install BBMRI.de 0.3.2
Installed package: BBMRI.de 0.3.2
Updated: package.json
Installed package: de.basisprofil.r4 0.9.0
Restore completed. Saved &#39;fhirpkg.lock.json&#39;.
PS C:\Users\Ward\Workspace\java-validator&gt; fhir4 validate .\exampleBiobank.json --terminologyserver http://tx.fhir.org/r4
Validating Organization/exampleBiobank
Overall result: SUCCESS

[WARNING] Terminology service failed while validating code &#39;generated&#39; (system &#39;&#39;): Operation was unsuccessful because of a client error (NotFound). OperationOutcome: &lt;div xmlns=&quot;http://www.w3.org/1999/xhtml&quot;&gt;&lt;p&gt;Unknown message Unknown ValueSet url: http://hl7.org/fhir/ValueSet/narrative-status|4.0.0&lt;/p&gt;&lt;/div&gt;. (at Organization.text[0].status[0])
[WARNING] Terminology service failed while validating code &#39;url&#39; (system &#39;&#39;): Operation was unsuccessful because of a client error (NotFound). OperationOutcome: &lt;div xmlns=&quot;http://www.w3.org/1999/xhtml&quot;&gt;&lt;p&gt;Unknown message Unknown ValueSet url: http://hl7.org/fhir/ValueSet/contact-point-system|4.0.0&lt;/p&gt;&lt;/div&gt;. (at Organization.telecom[0].system[0])
[WARNING] Terminology service failed while validating code &#39;phone&#39; (system &#39;&#39;): Operation was unsuccessful because of a client error (NotFound). OperationOutcome: &lt;div xmlns=&quot;http://www.w3.org/1999/xhtml&quot;&gt;&lt;p&gt;Unknown message Unknown ValueSet url: http://hl7.org/fhir/ValueSet/contact-point-system|4.0.0&lt;/p&gt;&lt;/div&gt;. (at Organization.contact[0].telecom[0].system[0])
[WARNING] Terminology service failed while validating code &#39;phone&#39; (system &#39;&#39;): Operation was unsuccessful because of a client error (NotFound). OperationOutcome: &lt;div xmlns=&quot;http://www.w3.org/1999/xhtml&quot;&gt;&lt;p&gt;Unknown message Unknown ValueSet url: http://hl7.org/fhir/ValueSet/contact-point-system|4.0.0&lt;/p&gt;&lt;/div&gt;. (at Organization.contact[1].telecom[0].system[0])
[WARNING] Terminology service failed while validating code &#39;email&#39; (system &#39;&#39;): Operation was unsuccessful because of a client error (NotFound). OperationOutcome: &lt;div xmlns=&quot;http://www.w3.org/1999/xhtml&quot;&gt;&lt;p&gt;Unknown message Unknown ValueSet url: http://hl7.org/fhir/ValueSet/contact-point-system|4.0.0&lt;/p&gt;&lt;/div&gt;. (at Organization.contact[1].telecom[1].system[0])
</pre></div>


<p>(Using <a href="https://simplifier.net/packages/bbmri.de/0.3.2" target="_blank" title="https://simplifier.net/packages/bbmri.de/0.3.2">package version 0.3.2</a> because that still had the Simplifier mirror of FHIR Core)</p>



<a name="180223475"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Simplifier%20packages%20and%20Java%20Validator/near/180223475" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noemi Deppenwiese <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Simplifier.20packages.20and.20Java.20Validator.html#180223475">(Nov 08 2019 at 12:07)</a>:</h4>
<p>Yes, I get the same errors for your first example. I published a new version 0.3.4 with a reset of the package manifest, for that I get a slightly improved version of my initial error:</p>
<div class="codehilite"><pre><span></span>C:\Users\deppenni\GBA\valspace&gt;java -jar validator.jar -version 4.0.0 -ig bbmri.de-0.3.4.tgz resources
FHIR Validation tool Version 4.0.31-SNAPSHOT - Built 2019-11-05T15:35:39.648+11:00 - Git a0ece162e77c
Detected Java version: 1.8.0_212 from C:\Program Files\Java\Amazon Coretto\jdk1.8.0_212\jre on amd64 (64bit). 3612MB available
Arguments: -version 4.0.0 -ig bbmri.de-0.3.4.tgz resources
Directories: Current = C:\Users\deppenni\GBA\valspace, Package Cache = C:\Users\deppenni\.fhir\packages
  .. connect to tx server @ http://tx.fhir.org
  .. definitions from hl7.fhir.r4.core#4.0.1
    (v4.0.1)
+  .. load IG from bbmri.de-0.3.4.tgz
Exception in thread &quot;main&quot; org.hl7.fhir.exceptions.FHIRException: no core dependency or FHIR Version found in the Package definition
        at org.hl7.fhir.utilities.cache.NpmPackage.fhirVersion(NpmPackage.java:364)
</pre></div>



<a name="180231131"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Simplifier%20packages%20and%20Java%20Validator/near/180231131" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ward Weistra <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Simplifier.20packages.20and.20Java.20Validator.html#180231131">(Nov 08 2019 at 13:53)</a>:</h4>
<p><span class="user-mention" data-user-id="221444">@Noemi Deppenwiese</span> Yes, Grahame confirmed that that (having the dependency on<code>simplifier.core.r4</code>, the Simplifier mirror of the core package) is indeed not expected to work with the Java validator, since the Java validator checks for that package in a different way then for other packages.</p>
<ul>
<li>Soon Simplifier will not have to mirror those core packages anymore, since we're hard at work to get them one and the same. Soon also within Simplifier the package name for the core will just be <code>hl7.fhir.core</code></li>
<li>However, I'm also still confused why your workaround (as in package <code>0.3.3</code>) didn't work for the Java validator. I hope <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> can help us out there, since I expect that issue to persist even when the package names are the same.</li>
</ul>



<a name="180356128"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Simplifier%20packages%20and%20Java%20Validator/near/180356128" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Simplifier.20packages.20and.20Java.20Validator.html#180356128">(Nov 10 2019 at 09:41)</a>:</h4>
<blockquote>
<p>Soon also within Simplifier the package name for the core will just be hl7.fhir.core</p>
</blockquote>
<p>Umm, no. use hl7.fhir.r{v}.core. <span class="user-mention" data-user-id="203235">@Ward Weistra</span></p>



<a name="180356146"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Simplifier%20packages%20and%20Java%20Validator/near/180356146" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Simplifier.20packages.20and.20Java.20Validator.html#180356146">(Nov 10 2019 at 09:41)</a>:</h4>
<p>as for why 0.3.4 fails: here is the package file:</p>



<a name="180356205"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Simplifier%20packages%20and%20Java%20Validator/near/180356205" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Simplifier.20packages.20and.20Java.20Validator.html#180356205">(Nov 10 2019 at 09:42)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;BBMRI.de&quot;</span><span class="p">,</span>
  <span class="nt">&quot;version&quot;</span><span class="p">:</span> <span class="s2">&quot;0.3.4&quot;</span><span class="p">,</span>
  <span class="nt">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Profiles for the BBMRI.de / GBA biobanking project.&quot;</span><span class="p">,</span>
  <span class="nt">&quot;author&quot;</span><span class="p">:</span> <span class="s2">&quot;noemideppenwiese&quot;</span><span class="p">,</span>
  <span class="nt">&quot;devDependencies&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
  <span class="nt">&quot;canonicals&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
  <span class="nt">&quot;dependencies&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;simplifier.core.r4&quot;</span><span class="p">:</span> <span class="s2">&quot;4.0.1&quot;</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>



<a name="180356281"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Simplifier%20packages%20and%20Java%20Validator/near/180356281" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ward Weistra <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Simplifier.20packages.20and.20Java.20Validator.html#180356281">(Nov 10 2019 at 09:44)</a>:</h4>
<p>The question is why <code>0.3.3</code> fails <span class="user-mention" data-user-id="191316">@Grahame Grieve</span></p>



<a name="180356300"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Simplifier%20packages%20and%20Java%20Validator/near/180356300" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ward Weistra <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Simplifier.20packages.20and.20Java.20Validator.html#180356300">(Nov 10 2019 at 09:45)</a>:</h4>
<blockquote>
<p>Umm, no. use hl7.fhir.r{v}.core. <span class="user-mention silent" data-user-id="203235">Ward Weistra</span></p>
</blockquote>
<p>Right</p>



<a name="180356362"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Simplifier%20packages%20and%20Java%20Validator/near/180356362" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Simplifier.20packages.20and.20Java.20Validator.html#180356362">(Nov 10 2019 at 09:46)</a>:</h4>
<p>but since i was debugging it... I added support for simplifier.core.rX as a dependency</p>



<a name="180356377"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Simplifier%20packages%20and%20Java%20Validator/near/180356377" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Simplifier.20packages.20and.20Java.20Validator.html#180356377">(Nov 10 2019 at 09:47)</a>:</h4>
<p>but... how did 0.3.3 fail? Looking back through the thread, I don't see any specific information about how it failed?</p>



<a name="180356522"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Simplifier%20packages%20and%20Java%20Validator/near/180356522" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Simplifier.20packages.20and.20Java.20Validator.html#180356522">(Nov 10 2019 at 09:51)</a>:</h4>
<p>but probably it's because the package does not follow the naming convention nor does it have a .index.json</p>



<a name="180356528"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Simplifier%20packages%20and%20Java%20Validator/near/180356528" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Simplifier.20packages.20and.20Java.20Validator.html#180356528">(Nov 10 2019 at 09:51)</a>:</h4>
<p>so all the files in the package are ignored</p>



<a name="180356826"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Simplifier%20packages%20and%20Java%20Validator/near/180356826" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Simplifier.20packages.20and.20Java.20Validator.html#180356826">(Nov 10 2019 at 09:59)</a>:</h4>
<p>but I can fix that, so next version, the validator will just build the .index.json file on the fly when it reads the package</p>



<a name="180436226"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Simplifier%20packages%20and%20Java%20Validator/near/180436226" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ward Weistra <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Simplifier.20packages.20and.20Java.20Validator.html#180436226">(Nov 11 2019 at 16:12)</a>:</h4>
<p>That would be perfect, <span class="user-mention" data-user-id="191316">@Grahame Grieve</span>. And we will add <code>.index.json</code> to our packages soon.</p>
<p><span class="user-mention" data-user-id="221444">@Noemi Deppenwiese</span> So validating a <code>BBMRI.de</code> or <code>de.basisprofil.r4</code> (or any Simplifier package) with the Java validator waits for either those packages getting a <code>.index.json</code> (Firely side) or Java validator creating its own (Grahame's side), something we both likely need to do anyway. Likely Grahame will beat us to it ;)<br>
The reference to <code>simplifier.core.r4</code> shouldn't be a problem anymore with Grahame's latest update.</p>
<p>The validation with Torinox should work already work (as I <a href="#narrow/stream/179177-conformance/topic/Simplifier.20packages.20and.20Java.20Validator/near/180221572" title="#narrow/stream/179177-conformance/topic/Simplifier.20packages.20and.20Java.20Validator/near/180221572">shared above</a>), as Torinox already does create it's own <code>.index.json</code>:</p>
<ul>
<li><a href="https://simplifier.net/downloads/torinox" target="_blank" title="https://simplifier.net/downloads/torinox">Install Torinox</a></li>
<li><code>fhir4 install BBMRI.de 0.3.4</code> -- Installs your package and its dependencies, it will automatically get them from Simplifier</li>
<li><code>fhir4 validate .\theFileYouWantToValidate.json --terminologyserver http://tx.fhir.org/r4</code></li>
</ul>
<p>Please let me know if that works for you in the meantime. And I'll keep you posted when we've implemented our part.</p>
<p>The terminology server can't find <code>4.0.0</code> valuesets, I assume because Grahame has replaced them with the <code>4.0.1</code> version instead.</p>



<a name="180451855"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Simplifier%20packages%20and%20Java%20Validator/near/180451855" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Simplifier.20packages.20and.20Java.20Validator.html#180451855">(Nov 11 2019 at 19:23)</a>:</h4>
<p>hmm</p>



<a name="180506995"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Simplifier%20packages%20and%20Java%20Validator/near/180506995" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noemi Deppenwiese <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Simplifier.20packages.20and.20Java.20Validator.html#180506995">(Nov 12 2019 at 11:39)</a>:</h4>
<p>Thanks for the help! I will investigate if using Torinox for Validation is an interim alternative for our project members. (Currently, we advise them to supply all profiles ect. to the validator jar by placing them in a folder and pointing to it via -ig. This of course requires managing dependencies manually which is why our project was looking to switch to the package system in the first place.)</p>



<a name="180553749"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Simplifier%20packages%20and%20Java%20Validator/near/180553749" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Simplifier.20packages.20and.20Java.20Validator.html#180553749">(Nov 12 2019 at 19:46)</a>:</h4>
<p>this should be all good sometime today</p>



<a name="184585588"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Simplifier%20packages%20and%20Java%20Validator/near/184585588" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Mayfield <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Simplifier.20packages.20and.20Java.20Validator.html#184585588">(Jan 01 2020 at 06:34)</a>:</h4>
<p>If I'm reading this correctly, simplifier packages should work with HL7 validator and probably with hapi fhir?</p>



<a name="184586886"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Simplifier%20packages%20and%20Java%20Validator/near/184586886" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Simplifier.20packages.20and.20Java.20Validator.html#184586886">(Jan 01 2020 at 07:18)</a>:</h4>
<p><em>SHOULD</em>. that's not the same as 'do' - there's some issues that I'm still working on clarifying</p>



<a name="184900869"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Simplifier%20packages%20and%20Java%20Validator/near/184900869" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ward Weistra <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Simplifier.20packages.20and.20Java.20Validator.html#184900869">(Jan 06 2020 at 12:16)</a>:</h4>
<p><span class="user-mention" data-user-id="191687">@Kevin Mayfield</span> Please let us know if you run into specific problems so we can resolve them!</p>



<a name="184901802"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Simplifier%20packages%20and%20Java%20Validator/near/184901802" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Mayfield <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Simplifier.20packages.20and.20Java.20Validator.html#184901802">(Jan 06 2020 at 12:29)</a>:</h4>
<p>Yep will do, unfortunately the system I'm working on has to use STU3 and haven't got the resources to run tests on this R4 spec.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
