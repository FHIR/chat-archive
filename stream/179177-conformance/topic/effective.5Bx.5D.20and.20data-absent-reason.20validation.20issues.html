---
layout: page
title: "FHIR Chat  · effective[x] and data-absent-reason validation issues · conformance"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/index.html">conformance</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/effective.5Bx.5D.20and.20data-absent-reason.20validation.20issues.html">effective[x] and data-absent-reason validation issues</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="186592375"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/effective%5Bx%5D%20and%20data-absent-reason%20validation%20issues/near/186592375" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/effective.5Bx.5D.20and.20data-absent-reason.20validation.20issues.html#186592375">(Jan 25 2020 at 23:02)</a>:</h4>
<p>In IPS we have been seeing this for a while, but I've looked into it in further detail and have confirmed that when the data-absent-reason extension is being used with effective[x] (in profiles on Observation, DiagnosticReport and MedicationStatement, particularly), that causes the example resource instances that are using either effectivePeriod (on all three resource profiles) or effectiveTiming (on the Observation profiles) to fail validation (but the validation does succeed if the instance uses effectiveDateTime or effectiveInstant).  It is possible to get the instances with effectivePeriod or effectiveTiming to successfully validate, but that requires adding explicit element definitions for those slices.  We've been able to work around this for IPS by adding those explicit slices, but it would be better to get this fixed.</p>



<a name="186617192"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/effective%5Bx%5D%20and%20data-absent-reason%20validation%20issues/near/186617192" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/effective.5Bx.5D.20and.20data-absent-reason.20validation.20issues.html#186617192">(Jan 26 2020 at 11:17)</a>:</h4>
<p>I don't understand this as described, and I don't see it in IPS?</p>



<a name="186633095"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/effective%5Bx%5D%20and%20data-absent-reason%20validation%20issues/near/186633095" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/effective.5Bx.5D.20and.20data-absent-reason.20validation.20issues.html#186633095">(Jan 26 2020 at 18:52)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> I worked around it by adding the explicit slices, so the error (or warning, whichever it is) isn't showing up at the moment.  But <a href="https://github.com/HL7/fhir-ips/blob/master/resources/MedicationStatement-uv-ips.structuredefinition.xml" target="_blank" title="https://github.com/HL7/fhir-ips/blob/master/resources/MedicationStatement-uv-ips.structuredefinition.xml">this</a> is one of the instances where the explicit slices were added (in this case for effectiveDateTime and effectivePeriod - only the slice for effectivePeriod is needed to resolve the issue, but the one for effectiveDateTime is also there for consistency).  If you remove the effectivePeriod slice you will see the additional errors and the info messages that show up for the medicationStatement-39-07-1 and IPS-bundle-01 examples.</p>



<a name="186635899"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/effective%5Bx%5D%20and%20data-absent-reason%20validation%20issues/near/186635899" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/effective.5Bx.5D.20and.20data-absent-reason.20validation.20issues.html#186635899">(Jan 26 2020 at 20:04)</a>:</h4>
<p>so I deleted the portion marked new begin .. new end, and it made no difference?</p>



<a name="186638415"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/effective%5Bx%5D%20and%20data-absent-reason%20validation%20issues/near/186638415" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/effective.5Bx.5D.20and.20data-absent-reason.20validation.20issues.html#186638415">(Jan 26 2020 at 21:14)</a>:</h4>
<p>doing that (or its equivalent) certainly makes a difference for me<br>
I know that Giorgio has had the same issue - I'm pretty sure it's not just my local environment<br>
I'll do some further exploration - and any other ideas are welcome</p>



<a name="186655641"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/effective%5Bx%5D%20and%20data-absent-reason%20validation%20issues/near/186655641" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/effective.5Bx.5D.20and.20data-absent-reason.20validation.20issues.html#186655641">(Jan 27 2020 at 06:05)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> When I comment out the MedicationStatement.effective[x]:effectivePeriod slice I get these errors in the auto-build (the same as in my local build):</p>
<div class="codehilite"><pre><span></span>/scratch/ig-build-temp-S9U62A/repo/examples/medicationStatement-39-07-1.xml
Path    Severity    Message
MedicationStatement/eumfh-39-07-1: MedicationStatement.effective.ofType(Period) error   This element does not match any known slice for profile http://hl7.org/fhir/uv/ips/StructureDefinition/MedicationStatement-uv-ips and slicing is CLOSED
MedicationStatement/eumfh-39-07-1: MedicationStatement.effective.ofType(Period).start   information Could not verify slice for profile http://hl7.org/fhir/uv/ips/StructureDefinition/MedicationStatement-uv-ips
</pre></div>


<div class="codehilite"><pre><span></span>/scratch/ig-build-temp-S9U62A/repo/examples/IPS-bundle-01.xml
Bundle/IPS-examples-Bundle-01: Bundle.entry[0].resource.section[1].entry[0] information This element does not match any known slice for the profile http://hl7.org/fhir/uv/ips/StructureDefinition/Composition-uv-ips
Bundle/IPS-examples-Bundle-01: Bundle.entry[0].resource.section[1].entry[1] information This element does not match any known slice for the profile http://hl7.org/fhir/uv/ips/StructureDefinition/Composition-uv-ips
Bundle/IPS-examples-Bundle-01: Bundle.entry[0].resource.section[1]  error   Profile http://hl7.org/fhir/uv/ips/StructureDefinition/Composition-uv-ips, Element &#39;Bundle.entry[0].resource.section[1].entry[medicationStatement]&#39;: minimum required = 1, but only found 0
</pre></div>


<p>When the slice MedicationStatement.effective[x]:effectivePeriod is present these error and information messages do not occur.</p>



<a name="186938272"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/effective%5Bx%5D%20and%20data-absent-reason%20validation%20issues/near/186938272" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/effective.5Bx.5D.20and.20data-absent-reason.20validation.20issues.html#186938272">(Jan 29 2020 at 23:08)</a>:</h4>
<p>fixed next release</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
