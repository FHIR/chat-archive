---
layout: page
title: "FHIR Chat  · Java validator and Simplifier disagree on slice validity · conformance"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/index.html">conformance</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Java.20validator.20and.20Simplifier.20disagree.20on.20slice.20validity.html">Java validator and Simplifier disagree on slice validity</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="154025325"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Java%20validator%20and%20Simplifier%20disagree%20on%20slice%20validity/near/154025325" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Morten Ernebjerg <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Java.20validator.20and.20Simplifier.20disagree.20on.20slice.20validity.html#154025325">(Dec 13 2018 at 12:06)</a>:</h4>
<p>I am getting a validation error with the latest Java JAR Validator when trying to validate a resource against  the following STU3 Observation profile: <a href="http://fhir.de/StructureDefinition/observation-de-blutdruck/0.2" target="_blank" title="http://fhir.de/StructureDefinition/observation-de-blutdruck/0.2">http://fhir.de/StructureDefinition/observation-de-blutdruck/0.2</a>. The online Simplifier validator (<a href="https://simplifier.net/validate" target="_blank" title="https://simplifier.net/validate">https://simplifier.net/validate</a>), however, says that the very same resource is valid. Is there a known problem with such cases in either validator?</p>
<p>Here is the error I am getting from the JAR (it is a blood pressure profile in which both <code>Observation.component</code> and <code>Observation.component.code.coding</code> are sliced):</p>
<div class="codehilite"><pre><span></span>java -jar validator/org.hl7.fhir.validator.jar -version 3.0.1 -ig profiles/ examples/
(...)
*FAILURE* validating examples/bp-base-example.xml:  error:4 warn:0 info:0
  Error @ Observation.component[1] (line 20, col16) : Error in discriminator at Observation.component:diastolisch.code.coding: slicing found
  Error @ Observation.component[1] (line 20, col16) : Error in discriminator at Observation.component:systolisch.code.coding: slicing found
  Error @ Observation.component[2] (line 34, col16) : Error in discriminator at Observation.component:diastolisch.code.coding: slicing found
  Error @ Observation.component[2] (line 34, col16) : Error in discriminator at Observation.component:systolisch.code.coding: slicing found
</pre></div>


<p>and here is the example:</p>
<div class="codehilite"><pre><span></span><span class="nt">&lt;Observation</span>
    <span class="na">xmlns=</span><span class="s">&quot;http://hl7.org/fhir&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;meta&gt;</span>
        <span class="nt">&lt;profile</span> <span class="na">value =</span><span class="s">&quot;http://fhir.de/StructureDefinition/observation-de-blutdruck/0.2&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/meta&gt;</span>
    <span class="nt">&lt;status</span> <span class="na">value=</span><span class="s">&quot;final&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;code&gt;</span>
        <span class="nt">&lt;coding&gt;</span>
            <span class="nt">&lt;system</span> <span class="na">value=</span><span class="s">&quot;http://loinc.org&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;code</span> <span class="na">value=</span><span class="s">&quot;85354-9&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/coding&gt;</span>
    <span class="nt">&lt;/code&gt;</span>
    <span class="nt">&lt;subject&gt;</span>
        <span class="nt">&lt;reference</span> <span class="na">value=</span><span class="s">&quot;Patient/patient-example&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/subject&gt;</span>
    <span class="nt">&lt;effectiveDateTime</span> <span class="na">value=</span><span class="s">&quot;2016-03-21T18:01:10Z&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;performer&gt;</span>
        <span class="nt">&lt;reference</span> <span class="na">value=</span><span class="s">&quot;Practitioner/practitioner-example&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/performer&gt;</span>
    <span class="nt">&lt;component&gt;</span>
        <span class="nt">&lt;code&gt;</span>
            <span class="nt">&lt;coding&gt;</span>
                <span class="nt">&lt;system</span> <span class="na">value=</span><span class="s">&quot;http://loinc.org&quot;</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;code</span> <span class="na">value=</span><span class="s">&quot;8462-4&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;/coding&gt;</span>
        <span class="nt">&lt;/code&gt;</span>
        <span class="nt">&lt;valueQuantity&gt;</span>
            <span class="nt">&lt;value</span> <span class="na">value=</span><span class="s">&quot;58&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;unit</span> <span class="na">value=</span><span class="s">&quot;mmHg&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;system</span> <span class="na">value=</span><span class="s">&quot;http://unitsofmeasure.org&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;code</span> <span class="na">value=</span><span class="s">&quot;mm[Hg]&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/valueQuantity&gt;</span>
    <span class="nt">&lt;/component&gt;</span>
    <span class="nt">&lt;component&gt;</span>
        <span class="nt">&lt;code&gt;</span>
            <span class="nt">&lt;coding&gt;</span>
                <span class="nt">&lt;system</span> <span class="na">value=</span><span class="s">&quot;http://loinc.org&quot;</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;code</span> <span class="na">value=</span><span class="s">&quot;8480-6&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;/coding&gt;</span>
        <span class="nt">&lt;/code&gt;</span>
        <span class="nt">&lt;valueQuantity&gt;</span>
            <span class="nt">&lt;value</span> <span class="na">value=</span><span class="s">&quot;111&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;unit</span> <span class="na">value=</span><span class="s">&quot;mmHg&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;system</span> <span class="na">value=</span><span class="s">&quot;http://unitsofmeasure.org&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;code</span> <span class="na">value=</span><span class="s">&quot;mm[Hg]&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/valueQuantity&gt;</span>
    <span class="nt">&lt;/component&gt;</span>
<span class="nt">&lt;/Observation&gt;</span>
</pre></div>



<a name="154025347"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Java%20validator%20and%20Simplifier%20disagree%20on%20slice%20validity/near/154025347" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Java.20validator.20and.20Simplifier.20disagree.20on.20slice.20validity.html#154025347">(Dec 13 2018 at 13:53)</a>:</h4>
<p>Hi Morten, this is coming from the STU3 FHIR spec: <em>sdf-20: On StructureDefinition.differential: No slicing on the root element (expression  on StructureDefinition.differential: element.first().slicing.empty())</em></p>



<a name="154025348"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Java%20validator%20and%20Simplifier%20disagree%20on%20slice%20validity/near/154025348" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Java.20validator.20and.20Simplifier.20disagree.20on.20slice.20validity.html#154025348">(Dec 13 2018 at 13:54)</a>:</h4>
<p>In R4 this is fixed. Will there be a fix for STU3? <span class="user-mention" data-user-id="191316">@Grahame Grieve</span><br>
I had multiple reports from users in Germany struggling while validating STU3 resources because of sdf-20. The .net validator already fixed sdf-20</p>



<a name="154025436"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Java%20validator%20and%20Simplifier%20disagree%20on%20slice%20validity/near/154025436" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Java.20validator.20and.20Simplifier.20disagree.20on.20slice.20validity.html#154025436">(Dec 13 2018 at 20:14)</a>:</h4>
<p>we will be considering releasing a set of technical corrections for R3 once R4 is published</p>



<a name="154025625"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Java%20validator%20and%20Simplifier%20disagree%20on%20slice%20validity/near/154025625" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Morten Ernebjerg <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Java.20validator.20and.20Simplifier.20disagree.20on.20slice.20validity.html#154025625">(Dec 14 2018 at 11:18)</a>:</h4>
<p>A correction would be much appreciated, e.g. we would also like to run automatic validation of  <code>StructureDefinitions</code> in our CI-pipeline but cannot due to sdf-20.</p>



<a name="154025904"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Java%20validator%20and%20Simplifier%20disagree%20on%20slice%20validity/near/154025904" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Morten Ernebjerg <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Java.20validator.20and.20Simplifier.20disagree.20on.20slice.20validity.html#154025904">(Dec 17 2018 at 09:19)</a>:</h4>
<p>Suggested (per mail) the inclusion of the corresponding GForge item (<a href="https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=13768&amp;start=0" target="_blank" title="https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=13768&amp;start=0">#13768</a>) in the list of upcoming technical corrections to STU3, as per <a href="#narrow/stream/36-Announcements/subject/R3.20Technical.20Corrections" title="#narrow/stream/36-Announcements/subject/R3.20Technical.20Corrections">this announcement</a>.</p>



<a name="163950871"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Java%20validator%20and%20Simplifier%20disagree%20on%20slice%20validity/near/163950871" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Townley-O&#x27;Neill <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Java.20validator.20and.20Simplifier.20disagree.20on.20slice.20validity.html#163950871">(Apr 23 2019 at 00:28)</a>:</h4>
<p>Link to announcement is now <a href="#narrow/stream/179240-Announcements/topic/R3.20Technical.20Corrections" title="#narrow/stream/179240-Announcements/topic/R3.20Technical.20Corrections">https://chat.fhir.org/#narrow/stream/179240-Announcements/topic/R3.20Technical.20Corrections</a></p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
