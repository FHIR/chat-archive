---
layout: page
title: "FHIR Chat  · Slicing problem in BP profile · conformance"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/index.html">conformance</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20problem.20in.20BP.20profile.html">Slicing problem in BP profile</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="166224271"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20problem%20in%20BP%20profile/near/166224271" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20problem.20in.20BP.20profile.html#166224271">(May 21 2019 at 23:54)</a>:</h4>
<p>if you look at the snapshot in <a href="http://hl7.org/fhir/bp.html" target="_blank" title="http://hl7.org/fhir/bp.html">http://hl7.org/fhir/bp.html</a>, you'll see that Observation.component is sliced with a discriminator which is value:code.coding.code, value:code.coding.system</p>



<a name="166224297"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20problem%20in%20BP%20profile/near/166224297" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20problem.20in.20BP.20profile.html#166224297">(May 21 2019 at 23:55)</a>:</h4>
<p>but the code.coding is also sliced, by code, and system</p>



<a name="166224469"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20problem%20in%20BP%20profile/near/166224469" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20problem.20in.20BP.20profile.html#166224469">(May 21 2019 at 23:58)</a>:</h4>
<p>the validator doesn't know how to deal with this - it goes looking for the fixed value for the outer slicing, and runs into the inner slicing.</p>



<a name="166224744"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20problem%20in%20BP%20profile/near/166224744" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20problem.20in.20BP.20profile.html#166224744">(May 22 2019 at 00:03)</a>:</h4>
<p>it's not clear to me, as I consider how to make the validator work, what the rules are for an element that is in the path of a slicing target that is itself sliced. Do we say that it has to have a 1..1 slice itself that meets the slicing requirements? (this case does)</p>



<a name="166226667"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20problem%20in%20BP%20profile/near/166226667" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20problem.20in.20BP.20profile.html#166226667">(May 22 2019 at 00:36)</a>:</h4>
<p>I think that's reasonable</p>



<a name="166248005"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20problem%20in%20BP%20profile/near/166248005" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20problem.20in.20BP.20profile.html#166248005">(May 22 2019 at 08:44)</a>:</h4>
<p>What does "Do we say that it has to have a 1..1 slice itself that meets the slicing requirements?" mean?</p>



<a name="166250832"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20problem%20in%20BP%20profile/near/166250832" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20problem.20in.20BP.20profile.html#166250832">(May 22 2019 at 09:25)</a>:</h4>
<p>The outer discriminator specifies to match component slices by inspecting a complex child element (<code>code.coding</code>). The slicing on the child element itself further constraints the list of allowed options for coding.</p>
<p>However the inner slice does not influence the behavior of the outer slice? For all components should still specify a unique combination for <code>{ code.coding.code and code.coding.system }</code>.</p>
<p>This suggests that a validator can evaluate the outer slice and match individual components to slices w/o having to inspect the internal slice?</p>



<a name="166263867"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20problem%20in%20BP%20profile/near/166263867" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20problem.20in.20BP.20profile.html#166263867">(May 22 2019 at 12:51)</a>:</h4>
<p>I don’t know how to ignore the inner slice. I have to iterate it somehow. For now, I can only deal with inner slicing that has a fixed 1..1 slice</p>



<a name="166850525"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20problem%20in%20BP%20profile/near/166850525" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20problem.20in.20BP.20profile.html#166850525">(May 29 2019 at 19:54)</a>:</h4>
<p>Yeah, I'd agree with <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> (I think) - if you slice by value, then the target of that can only be a single, fixed value.  In this case, the better option would be to slice component by pattern at <code>code</code> - that would leave the inner slice reasonable.</p>



<a name="166852018"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20problem%20in%20BP%20profile/near/166852018" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20problem.20in.20BP.20profile.html#166852018">(May 29 2019 at 20:09)</a>:</h4>
<p>well, I deal with it now</p>



<a name="166852393"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20problem%20in%20BP%20profile/near/166852393" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20problem.20in.20BP.20profile.html#166852393">(May 29 2019 at 20:12)</a>:</h4>
<p>How?</p>



<a name="166852510"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20problem%20in%20BP%20profile/near/166852510" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20problem.20in.20BP.20profile.html#166852510">(May 29 2019 at 20:13)</a>:</h4>
<p>if there's a fixed 1..1 slice, I can deal with it</p>



<a name="166855241"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20problem%20in%20BP%20profile/near/166855241" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20problem.20in.20BP.20profile.html#166855241">(May 29 2019 at 20:44)</a>:</h4>
<p>What about patterns?</p>



<a name="172758057"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20problem%20in%20BP%20profile/near/172758057" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Simone Heckmann <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20problem.20in.20BP.20profile.html#172758057">(Aug 08 2019 at 11:58)</a>:</h4>
<p>I have a similar problem: I want to slice Identifier (by Identifier.type) to check for existence of two distinct types of Identifiers. Both Identifiers are defined as Identifier-Profiles which each have a slicing on Identifier.type to require one specific coding (fixed value) for Identifier.type but leave it open to use alternative codings additionally. The (.NET-)validator doesn't get it...</p>
<p>Here's the profile: <a href="https://simplifier.net/Basisprofil-DE-R4/PractitionerDeBasis/~overview" target="_blank" title="https://simplifier.net/Basisprofil-DE-R4/PractitionerDeBasis/~overview">https://simplifier.net/Basisprofil-DE-R4/PractitionerDeBasis/~overview</a><br>
and an example (that doesn't validate): <a href="https://simplifier.net/basisprofil-de-r4/practitioner-example/$validate" target="_blank" title="https://simplifier.net/basisprofil-de-r4/practitioner-example/$validate">https://simplifier.net/basisprofil-de-r4/practitioner-example/$validate</a></p>
<p>I would like to understand how to us patterns to fix this....</p>



<a name="172763008"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20problem%20in%20BP%20profile/near/172763008" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Egger <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20problem.20in.20BP.20profile.html#172763008">(Aug 08 2019 at 13:13)</a>:</h4>
<p><span class="user-mention" data-user-id="191450">@Simone Heckmann</span> , see <a href="http://build.fhir.org/ig/hl7ch/ch-core/StructureDefinition-ch-core-patient.html" target="_blank" title="http://build.fhir.org/ig/hl7ch/ch-core/StructureDefinition-ch-core-patient.html">http://build.fhir.org/ig/hl7ch/ch-core/StructureDefinition-ch-core-patient.html</a> as an example how to use pattern to slice the identifier on type.</p>



<a name="172763460"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20problem%20in%20BP%20profile/near/172763460" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Simone Heckmann <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20problem.20in.20BP.20profile.html#172763460">(Aug 08 2019 at 13:18)</a>:</h4>
<p>Ok, apparently <em>not</em> the solution for the .NET validator...</p>
<blockquote>
<p>NotSupported : Slicing with a discriminator of type 'Pattern' is not yet supported by this validator</p>
</blockquote>
<p>Thanks, though!</p>



<a name="172767363"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20problem%20in%20BP%20profile/near/172767363" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Simone Heckmann <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20problem.20in.20BP.20profile.html#172767363">(Aug 08 2019 at 14:03)</a>:</h4>
<p>Maybe if I use Pattern to fix the Identifier.types in the Profiles instead of slicing them...?<br>
What's the semantical difference between <br>
a) slicing Identifier.type.coding by system (unordered, open) and define a 1..1 slice with fixed values for system and code<br>
and<br>
b) define a pattern on Identifier.type.coding with fixed values for system and code</p>
<p>I assume that other than slicing, pattern would still match even if system matched in one slice and code in another...?<br>
Not sure though... I'm still struggling trying to wrap my head around <code>pattern</code>...</p>



<a name="172767715"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20problem%20in%20BP%20profile/near/172767715" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Simone Heckmann <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20problem.20in.20BP.20profile.html#172767715">(Aug 08 2019 at 14:07)</a>:</h4>
<p>But I don't think so. Wouldn't pattern make it even harder for the validator to find the fixed values in the slice...</p>



<a name="172787652"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20problem%20in%20BP%20profile/near/172787652" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20problem.20in.20BP.20profile.html#172787652">(Aug 08 2019 at 17:58)</a>:</h4>
<p>I thought I would give it a try validating with the Java validator, but it needs some additional <a href="http://fhir.de" target="_blank" title="http://fhir.de">fhir.de</a> profiles (like <a href="http://fhir.de/StructureDefinition/identifier-lanr" target="_blank" title="http://fhir.de/StructureDefinition/identifier-lanr">http://fhir.de/StructureDefinition/identifier-lanr</a> and <a href="http://fhir.de/StructureDefinition/identifier-zanr" target="_blank" title="http://fhir.de/StructureDefinition/identifier-zanr">http://fhir.de/StructureDefinition/identifier-zanr</a>, etc.).  Is there a package?</p>



<a name="172802924"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20problem%20in%20BP%20profile/near/172802924" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20problem.20in.20BP.20profile.html#172802924">(Aug 08 2019 at 21:00)</a>:</h4>
<p>Which version of the dotnet client are you using, I was pretty sure it does pattern.. My fork definitely does it, and I thought that change went into core.</p>



<a name="172827922"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20problem%20in%20BP%20profile/near/172827922" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Simone Heckmann <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20problem.20in.20BP.20profile.html#172827922">(Aug 09 2019 at 06:08)</a>:</h4>
<p><span class="user-mention" data-user-id="191405">@Rob Hausam</span>  I created a package: <a href="https://simplifier.net/packages/de.basisprofil.r4/0.9.0" target="_blank" title="https://simplifier.net/packages/de.basisprofil.r4/0.9.0">https://simplifier.net/packages/de.basisprofil.r4/0.9.0</a></p>



<a name="172827972"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20problem%20in%20BP%20profile/near/172827972" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Simone Heckmann <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20problem.20in.20BP.20profile.html#172827972">(Aug 09 2019 at 06:09)</a>:</h4>
<blockquote>
<p>Which version of the dotnet client are you using, I was pretty sure it does pattern.. My fork definitely does it, and I thought that change went into core.</p>
</blockquote>
<p><span class="user-mention" data-user-id="191367">@Brian Postlethwaite</span>  I was running the validation on Simplifier. Here's the example: <a href="https://simplifier.net/basisprofil-de-r4/practitioner-example" target="_blank" title="https://simplifier.net/basisprofil-de-r4/practitioner-example">https://simplifier.net/basisprofil-de-r4/practitioner-example</a><br>
Press the "validate" button and you'll see the resulting error.</p>



<a name="172827978"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20problem%20in%20BP%20profile/near/172827978" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Simone Heckmann <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20problem.20in.20BP.20profile.html#172827978">(Aug 09 2019 at 06:09)</a>:</h4>
<p>oh wait. you can't validate unless you're a project member I suppose...</p>



<a name="172854829"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20problem%20in%20BP%20profile/near/172854829" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20problem.20in.20BP.20profile.html#172854829">(Aug 09 2019 at 14:17)</a>:</h4>
<p><span class="user-mention" data-user-id="191450">@Simone Heckmann</span> I expanded and re-organized the package a bit and then validated and got this:</p>
<div class="codehilite"><pre><span></span>RHausamMacbookPro:fhir-ips rhausam$ java -jar ~/Downloads/org.hl7.fhir.validator.jar ~/Downloads/Practitioner-example.xml -ig ~/Downloads/de.basisprofil.r4-0.9.0
FHIR Validation tool Version 3.8.24-SNAPSHOT - Built 2019-08-09T04:44:53.224+10:00 - Git 2a234a81c24f
Arguments: /Users/rhausam/Downloads/Practitioner-example.xml -ig /Users/rhausam/Downloads/de.basisprofil.r4-0.9.0
  .. connect to tx server @ http://tx.fhir.org
  .. definitions from hl7.fhir.core#current
    (v4.0.0)
+  .. load IG from /Users/rhausam/Downloads/de.basisprofil.r4-0.9.0
  .. validate [/Users/rhausam/Downloads/Practitioner-example.xml]
Terminology server: Check for supported code systems for http://fhir.de/CodeSystem/identifier-type-de-basis
Success...validating /Users/rhausam/Downloads/Practitioner-example.xml:  error:0 warn:3 info:0
  Warning @ Practitioner.identifier[0].type (line 7, col11) : None of the codes provided are in the value set http://hl7.org/fhir/ValueSet/identifier-type (http://hl7.org/fhir/ValueSet/identifier-type, and a code should come from this value set unless it has no suitable code) (codes = http://terminology.hl7.org/CodeSystem/v2-0203#LANR)
  Warning @ Practitioner.identifier[1].type (line 17, col11) : None of the codes provided are in the value set http://hl7.org/fhir/ValueSet/identifier-type (http://hl7.org/fhir/ValueSet/identifier-type, and a code should come from this value set unless it has no suitable code) (codes = http://fhir.de/CodeSystem/identifier-type-de-basis#ZANR)
  Warning @ Practitioner.meta.profile[0] (line 2, col43) : StructureDefinition reference &quot;http://fhir.de/StructureDefinition/practitioner-de-basis&quot; could not be resolved
</pre></div>


<p>Getting "Success" is nice! :)  But the warning that 'StructureDefinition reference "<a href="http://fhir.de/StructureDefinition/practitioner-de-basis" target="_blank" title="http://fhir.de/StructureDefinition/practitioner-de-basis">http://fhir.de/StructureDefinition/practitioner-de-basis</a>" could not be resolved' certainly means something isn't right, and I haven't looked at that yet.</p>



<a name="172855412"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20problem%20in%20BP%20profile/near/172855412" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Simone Heckmann <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20problem.20in.20BP.20profile.html#172855412">(Aug 09 2019 at 14:25)</a>:</h4>
<p>The warning about the Type Code is justified! I accidentially used the old STU3 URL (fixed it!)<br>
But I guess the fact that the Profile URL didn't resolve means that your validation just ran the example against the core spec...</p>



<a name="172856103"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20problem%20in%20BP%20profile/near/172856103" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20problem.20in.20BP.20profile.html#172856103">(Aug 09 2019 at 14:35)</a>:</h4>
<p>I assume that's the case.  Can try to figure out what the issue is there.</p>



<a name="172859941"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20problem%20in%20BP%20profile/near/172859941" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20problem.20in.20BP.20profile.html#172859941">(Aug 09 2019 at 15:21)</a>:</h4>
<p>I had to explicitly include each profile, rather than the package (not sure why), but this is what I get now:</p>
<div class="codehilite"><pre><span></span>RHausamMacbookPro:fhir-ips rhausam$ java -jar ~/Downloads/org.hl7.fhir.validator.jar ~/Downloads/Practitioner-example.xml -ig ~/Downloads/de.basisprofil.r4-0.9.0/package/Practitioner-de-basis.json -ig ~/Downloads/de.basisprofil.r4-0.9.0/package/Profile-identifier-lanr.json -ig ~/Downloads/de.basisprofil.r4-0.9.0/package/Profile-identifier-zanr.json
FHIR Validation tool Version 3.8.24-SNAPSHOT - Built 2019-08-09T04:44:53.224+10:00 - Git 2a234a81c24f
Arguments: /Users/rhausam/Downloads/Practitioner-example.xml -ig /Users/rhausam/Downloads/de.basisprofil.r4-0.9.0/package/Practitioner-de-basis.json -ig /Users/rhausam/Downloads/de.basisprofil.r4-0.9.0/package/Profile-identifier-lanr.json -ig /Users/rhausam/Downloads/de.basisprofil.r4-0.9.0/package/Profile-identifier-zanr.json
  .. connect to tx server @ http://tx.fhir.org
  .. definitions from hl7.fhir.core#current
    (v4.0.0)
+  .. load IG from /Users/rhausam/Downloads/de.basisprofil.r4-0.9.0/package/Practitioner-de-basis.json
+  .. load IG from /Users/rhausam/Downloads/de.basisprofil.r4-0.9.0/package/Profile-identifier-lanr.json
+  .. load IG from /Users/rhausam/Downloads/de.basisprofil.r4-0.9.0/package/Profile-identifier-zanr.json
  .. validate [/Users/rhausam/Downloads/Practitioner-example.xml]
Terminology server: Check for supported code systems for http://fhir.de/CodeSystem/identifier-type-de-basis
*FAILURE* validating /Users/rhausam/Downloads/Practitioner-example.xml:  error:4 warn:2 info:2
  Error @ Practitioner.identifier[0] (line 6, col15) : Could not match discriminator ([$this]) for slice Practitioner.identifier:LANR in profile http://fhir.de/StructureDefinition/practitioner-de-basis - the discriminator [$this] does not have fixed value, binding or existence assertions
  Error @ Practitioner.identifier[0] (line 6, col15) : Could not match discriminator ([$this]) for slice Practitioner.identifier:ZANR in profile http://fhir.de/StructureDefinition/practitioner-de-basis - the discriminator [$this] does not have fixed value, binding or existence assertions
  Error @ Practitioner.identifier[1] (line 16, col15) : Could not match discriminator ([$this]) for slice Practitioner.identifier:LANR in profile http://fhir.de/StructureDefinition/practitioner-de-basis - the discriminator [$this] does not have fixed value, binding or existence assertions
  Error @ Practitioner.identifier[1] (line 16, col15) : Could not match discriminator ([$this]) for slice Practitioner.identifier:ZANR in profile http://fhir.de/StructureDefinition/practitioner-de-basis - the discriminator [$this] does not have fixed value, binding or existence assertions
  Information @ Practitioner (line 2, col43) : Profile http://fhir.de/StructureDefinition/practitioner-de-basis, Element &#39;Practitioner.identifier[LANR]&#39;&#39;: Unable to check minimum required (1) due to lack of slicing validation
  Information @ Practitioner (line 2, col43) : Profile http://fhir.de/StructureDefinition/practitioner-de-basis, Element &#39;Practitioner.identifier[ZANR]&#39;&#39;: Unable to check minimum required (1) due to lack of slicing validation
  Warning @ Practitioner.identifier[0].type (line 7, col11) : None of the codes provided are in the value set http://hl7.org/fhir/ValueSet/identifier-type (http://hl7.org/fhir/ValueSet/identifier-type, and a code should come from this value set unless it has no suitable code) (codes = http://terminology.hl7.org/CodeSystem/v2-0203#LANR)
  Warning @ Practitioner.identifier[1].type (line 17, col11) : None of the codes provided are in the value set http://hl7.org/fhir/ValueSet/identifier-type (http://hl7.org/fhir/ValueSet/identifier-type, and a code should come from this value set unless it has no suitable code) (codes = http://fhir.de/CodeSystem/identifier-type-de-basis#ZANR)
</pre></div>


<p>Now need to look closer at the discriminators and slice definitions and see what the issues are.</p>



<a name="173019722"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20problem%20in%20BP%20profile/near/173019722" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20problem.20in.20BP.20profile.html#173019722">(Aug 12 2019 at 12:44)</a>:</h4>
<blockquote>
<p>Ok, apparently <em>not</em> the solution for the .NET validator...</p>
<blockquote>
<p>NotSupported : Slicing with a discriminator of type 'Pattern' is not yet supported by this validator</p>
</blockquote>
<p>Thanks, though!</p>
</blockquote>
<p>It <em>does</em> support it, but I had disabled the code for it (by accident).  <span class="user-mention" data-user-id="191367">@Brian Postlethwaite</span> corrected that, and it should work again in version 1.3 of the API.  Oops ;-)</p>



<a name="173019831"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20problem%20in%20BP%20profile/near/173019831" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20problem.20in.20BP.20profile.html#173019831">(Aug 12 2019 at 12:46)</a>:</h4>
<p>This is the PR: <a href="https://github.com/FirelyTeam/fhir-net-api/pull/995" target="_blank" title="https://github.com/FirelyTeam/fhir-net-api/pull/995">https://github.com/FirelyTeam/fhir-net-api/pull/995</a></p>
<p>If you are doing this in your own code, you could upgrade to 1.3 now.  I don't know which version is active in Simplifier though. <span class="user-mention" data-user-id="191335">@Martijn Harthoorn</span> knows for sure ;-)</p>



<a name="173188068"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20problem%20in%20BP%20profile/near/173188068" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Martijn Harthoorn <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20problem.20in.20BP.20profile.html#173188068">(Aug 14 2019 at 09:31)</a>:</h4>
<p>Simplifier upgraded to 1.3 last week.</p>



<a name="173192469"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20problem%20in%20BP%20profile/near/173192469" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Simone Heckmann <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20problem.20in.20BP.20profile.html#173192469">(Aug 14 2019 at 10:55)</a>:</h4>
<p>Ok, the "not-supported" error message is gone now, but validation still fails spectacularly.<br>
I will have to investigate further...</p>



<a name="173238200"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20problem%20in%20BP%20profile/near/173238200" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20problem.20in.20BP.20profile.html#173238200">(Aug 14 2019 at 20:19)</a>:</h4>
<p>Yes, I tried going a little further with it and ran into other significant validation errors - mainly related to slicing and the Profile-identifier-lanr and Profile-identifier-zanr profiles.  I didn't have time to chase them down more.</p>



<a name="173272492"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20problem%20in%20BP%20profile/near/173272492" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Simone Heckmann <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20problem.20in.20BP.20profile.html#173272492">(Aug 15 2019 at 08:00)</a>:</h4>
<p>Got it:<br>
Solution: remove Identifier.type-slicing in the Coding-Profiles and use pattern instead, slice Identifier by pattern:type instead of pattern:$this.</p>
<p>Thanks to all who helped <span aria-label="thank you" class="emoji emoji-1f64f" role="img" title="thank you">:thank_you:</span></p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
