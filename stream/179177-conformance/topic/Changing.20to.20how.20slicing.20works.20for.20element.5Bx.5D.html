---
layout: page
title: "FHIR Chat  · Changing to how slicing works for element[x] · conformance"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/index.html">conformance</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Changing.20to.20how.20slicing.20works.20for.20element.5Bx.5D.html">Changing to how slicing works for element[x]</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153937312"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Changing%20to%20how%20slicing%20works%20for%20element%5Bx%5D/near/153937312" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Changing.20to.20how.20slicing.20works.20for.20element.5Bx.5D.html#153937312">(Feb 14 2018 at 07:26)</a>:</h4>
<p><span class="user-mention" data-user-id="191336">@Michel Rutten</span> I have committed the specification changes for <a href="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=12259" target="_blank" title="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=12259">GF#12259</a>. I'm now starting to work on the snapshot generator changes for it</p>



<a name="153937500"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Changing%20to%20how%20slicing%20works%20for%20element%5Bx%5D/near/153937500" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Changing.20to.20how.20slicing.20works.20for.20element.5Bx.5D.html#153937500">(Feb 14 2018 at 23:02)</a>:</h4>
<p>.. and it's just too much work. I'll get back to it. But we'll have to think very carefully about how this works - it's basically a breaking change for the tooling across versions</p>



<a name="153937655"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Changing%20to%20how%20slicing%20works%20for%20element%5Bx%5D/near/153937655" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Changing.20to.20how.20slicing.20works.20for.20element.5Bx.5D.html#153937655">(Feb 15 2018 at 10:14)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="191316">@Grahame Grieve</span>, I think that the current .NET API snapshot generator for STU3 (&amp; Forge) implement most of this behavior already. However Ewout will probably have to update the .NET validator for R4 according to the new rules.</p>



<a name="153937659"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Changing%20to%20how%20slicing%20works%20for%20element%5Bx%5D/near/153937659" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Changing.20to.20how.20slicing.20works.20for.20element.5Bx.5D.html#153937659">(Feb 15 2018 at 10:52)</a>:</h4>
<p>I don't know whether I'm going to get the change done; I've just run into a couple of other massive changes</p>



<a name="153937664"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Changing%20to%20how%20slicing%20works%20for%20element%5Bx%5D/near/153937664" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Changing.20to.20how.20slicing.20works.20for.20element.5Bx.5D.html#153937664">(Feb 15 2018 at 11:06)</a>:</h4>
<p>If you'd like, we could create/identify some useful (STU3) test profiles, then generate and compare our snapshots, to identify any remaining differences/ambiguities.</p>



<a name="153937669"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Changing%20to%20how%20slicing%20works%20for%20element%5Bx%5D/near/153937669" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Changing.20to.20how.20slicing.20works.20for.20element.5Bx.5D.html#153937669">(Feb 15 2018 at 12:00)</a>:</h4>
<p>well, we already have the snapshot test suite. I wish that you guys would use that test suite</p>



<a name="153937676"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Changing%20to%20how%20slicing%20works%20for%20element%5Bx%5D/near/153937676" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Changing.20to.20how.20slicing.20works.20for.20element.5Bx.5D.html#153937676">(Feb 15 2018 at 12:07)</a>:</h4>
<p>Indeed, we should. I submitted a change request, to remind myself:<br>
<a href="https://github.com/ewoutkramer/fhir-net-api/issues/539" target="_blank" title="https://github.com/ewoutkramer/fhir-net-api/issues/539">https://github.com/ewoutkramer/fhir-net-api/issues/539</a></p>



<a name="153937686"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Changing%20to%20how%20slicing%20works%20for%20element%5Bx%5D/near/153937686" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Changing.20to.20how.20slicing.20works.20for.20element.5Bx.5D.html#153937686">(Feb 15 2018 at 12:58)</a>:</h4>
<blockquote>
<p>Hi <span class="user-mention" data-user-id="191316">@Grahame Grieve</span>, I think that the current .NET API snapshot generator for STU3 (&amp; Forge) implement most of this behavior already. However Ewout will probably have to update the .NET validator for R4 according to the new rules.</p>
</blockquote>
<p>Do we?  The validator does not, but since you are maintaining the snapshotgenerator, you probably are more aware of what needs to be done!</p>



<a name="153937689"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Changing%20to%20how%20slicing%20works%20for%20element%5Bx%5D/near/153937689" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Changing.20to.20how.20slicing.20works.20for.20element.5Bx.5D.html#153937689">(Feb 15 2018 at 13:04)</a>:</h4>
<p><span class="user-mention" data-user-id="191328">@Ewout Kramer</span>, if I remember correctly from a while ago when I updated this logic, Chris' proposal introduces breaking changes in the _interpretation_ of type slices, but does not affect the rules for merging constraints in snapshots. For example, constraints on value[x] are merged with base profile constraints on value[x], and constraints on valueBoolean are merged with base constraints on valueBoolean. Also, the snapshot generator emits element id's for type slices of the form "...value[x]:valueBoolean", conforming to Chris' proposal.</p>



<a name="153937696"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Changing%20to%20how%20slicing%20works%20for%20element%5Bx%5D/near/153937696" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Changing.20to.20how.20slicing.20works.20for.20element.5Bx.5D.html#153937696">(Feb 15 2018 at 13:14)</a>:</h4>
<p>Maybe...but you could now get  valueBoolean, valueString, value[x] - if you already implemented that....that's nice....but also means the snapshot generator would be able to generate snapshots that the validator would not know how to handle currently...</p>



<a name="153937699"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Changing%20to%20how%20slicing%20works%20for%20element%5Bx%5D/near/153937699" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Changing.20to.20how.20slicing.20works.20for.20element.5Bx.5D.html#153937699">(Feb 15 2018 at 13:16)</a>:</h4>
<p>I documented it as nothing to do with slicing</p>



<a name="153937704"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Changing%20to%20how%20slicing%20works%20for%20element%5Bx%5D/near/153937704" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Changing.20to.20how.20slicing.20works.20for.20element.5Bx.5D.html#153937704">(Feb 15 2018 at 13:22)</a>:</h4>
<p>The gForge tracker says: "Type choice elements are treated as being implicitly sliced by type"  - I guess Michel was referring to that.</p>



<a name="153937706"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Changing%20to%20how%20slicing%20works%20for%20element%5Bx%5D/near/153937706" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Changing.20to.20how.20slicing.20works.20for.20element.5Bx.5D.html#153937706">(Feb 15 2018 at 13:26)</a>:</h4>
<p>Forge STU3 already allows you to define type slices and specify separate (child) constraints per type, so I guess that part is also covered. However currently when you slice an element, Forge hides the default child elements, so you cannot author constraints on children of the slice introduction element. Instead, Forge displays concrete named slices as child nodes of the slice introduction. This is a UI design issue, currently we deliberately hide some complexity to keep the application somewhat "user friendly". Still thinking about how to introduce this functionality without cluttering the UI and/or confusing users.</p>



<a name="153937890"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Changing%20to%20how%20slicing%20works%20for%20element%5Bx%5D/near/153937890" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Changing.20to.20how.20slicing.20works.20for.20element.5Bx.5D.html#153937890">(Feb 15 2018 at 20:16)</a>:</h4>
<p>I know the task talks about slicing, but once these changes have been made, there's no reason to connect constraining choice types with slicing</p>



<a name="153938073"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Changing%20to%20how%20slicing%20works%20for%20element%5Bx%5D/near/153938073" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Changing.20to.20how.20slicing.20works.20for.20element.5Bx.5D.html#153938073">(Feb 16 2018 at 03:39)</a>:</h4>
<p>Disagree - you can't slice a value[x] - it's already sliced. You must reslice one of the specific types (valueBoolean/myReslice).</p>



<a name="153938224"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Changing%20to%20how%20slicing%20works%20for%20element%5Bx%5D/near/153938224" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Changing.20to.20how.20slicing.20works.20for.20element.5Bx.5D.html#153938224">(Feb 16 2018 at 14:59)</a>:</h4>
<p>The proposal states: "Type choice elements are treated as being implicitly sliced by type".<br>
Does "implicit" imply that choice type element definitions in core resource definitions will NOT explicitly specify a slice component, however processing logic should act like there is a slice component with discriminator = "type"?</p>



<a name="153938267"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Changing%20to%20how%20slicing%20works%20for%20element%5Bx%5D/near/153938267" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Changing.20to.20how.20slicing.20works.20for.20element.5Bx.5D.html#153938267">(Feb 16 2018 at 19:54)</a>:</h4>
<p>they will not explicitly specify slice components. And neither will profiles</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
