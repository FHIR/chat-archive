---
layout: page
title: "FHIR Chat  · Adding TargetProfiles in derived Profiles · conformance"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/index.html">conformance</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Adding.20TargetProfiles.20in.20derived.20Profiles.html">Adding TargetProfiles in derived Profiles</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="200121753"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Adding%20TargetProfiles%20in%20derived%20Profiles/near/200121753" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Simone Heckmann <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Adding.20TargetProfiles.20in.20derived.20Profiles.html#200121753">(Jun 08 2020 at 16:18)</a>:</h4>
<p>Just need to check whether my understanding is correct:</p>
<p>If a Profile A requires a Reference to conform to Profile B1 (and B only!),<br>
then an derived Profile A' can add an additional target B2 (not derived from B1) to the ElementDefinition.</p>
<p>Multiple targets on an ElementDefinition means the target has to match any profile,<br>
so an Instance <strong>a</strong> referencing an Instance <strong>b</strong> might be valid against A' but not against A,<br>
if <strong>b</strong> is valid against  B2 but not B1.</p>
<p>Is that right? Is that how it is supposed to be? Or are additional targets in derived profiles only allowed if they are also derived from the original target?</p>



<a name="200122128"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Adding%20TargetProfiles%20in%20derived%20Profiles/near/200122128" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Adding.20TargetProfiles.20in.20derived.20Profiles.html#200122128">(Jun 08 2020 at 16:21)</a>:</h4>
<p>Profile A` can't add additional options that aren't permitted by the base profile.  It can define variants on what A allows, but can't introduce anything that wouldn't be valid against A.</p>



<a name="200122475"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Adding%20TargetProfiles%20in%20derived%20Profiles/near/200122475" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Simone Heckmann <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Adding.20TargetProfiles.20in.20derived.20Profiles.html#200122475">(Jun 08 2020 at 16:24)</a>:</h4>
<p>Ok, so I <em>can</em> add additional TargetProfiles, but only if they are constraints of the original TargetProfile, correct?</p>



<a name="200122794"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Adding%20TargetProfiles%20in%20derived%20Profiles/near/200122794" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Adding.20TargetProfiles.20in.20derived.20Profiles.html#200122794">(Jun 08 2020 at 16:26)</a>:</h4>
<p>right</p>



<a name="200123170"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Adding%20TargetProfiles%20in%20derived%20Profiles/near/200123170" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Simone Heckmann <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Adding.20TargetProfiles.20in.20derived.20Profiles.html#200123170">(Jun 08 2020 at 16:29)</a>:</h4>
<p>Thanks!</p>



<a name="200139326"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Adding%20TargetProfiles%20in%20derived%20Profiles/near/200139326" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Adding.20TargetProfiles.20in.20derived.20Profiles.html#200139326">(Jun 08 2020 at 18:41)</a>:</h4>
<p>they don't have to have the original TargetProfile as their base though.</p>



<a name="200139532"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Adding%20TargetProfiles%20in%20derived%20Profiles/near/200139532" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Adding.20TargetProfiles.20in.20derived.20Profiles.html#200139532">(Jun 08 2020 at 18:42)</a>:</h4>
<p>you could have A that constrains Observation.code, and on Observation.performer constrains it to Practitioner B1 that makes telecom required.</p>



<a name="200139666"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Adding%20TargetProfiles%20in%20derived%20Profiles/near/200139666" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Adding.20TargetProfiles.20in.20derived.20Profiles.html#200139666">(Jun 08 2020 at 18:44)</a>:</h4>
<p>So Profile A' still must restrict Practitioner.performer to B1, but it may also additionally add Practitioner profile C that says that Practitioner must have a name, without any relationship to B1</p>



<a name="200142472"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Adding%20TargetProfiles%20in%20derived%20Profiles/near/200142472" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Adding.20TargetProfiles.20in.20derived.20Profiles.html#200142472">(Jun 08 2020 at 19:06)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191316">Grahame Grieve</span> <a href="#narrow/stream/179177-conformance/topic/Adding.20TargetProfiles.20in.20derived.20Profiles/near/200139666">said</a>:</p>
<blockquote>
<p>So Profile A' still must restrict Practitioner.performer to B1, but it may also additionally add Practitioner profile C that says that Practitioner must have a name, without any relationship to B1</p>
</blockquote>
<p>My reading of the spec suggests this is not the case.  The definition of <code>targetProfile</code> says:</p>
<blockquote>
<p>If any profiles are specified, then the content must conform to at least one of them.</p>
</blockquote>
<p>Since Profile A only has one targetProfile on Practitioner (called B1), then references to Practitioner in instances of A <em>must</em> conform to B1.  Now if A' adds another targetProfile to Practitioner (called C) that constrains a <em>different</em> part of Practitioner than B1, instances of A' are only required to conform to <em>one of</em> Practitioner profiles, B1 <em>or</em> C.  If an instance of A' had a Performer that conformed only to C, then it would be valid against A' but would <em>not</em> be valid against A.  Therefore, I don't think it is valid to add additional targetProfiles unless they are strictly a more constrained version of the already existing targetProfiles.</p>



<a name="200199582"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Adding%20TargetProfiles%20in%20derived%20Profiles/near/200199582" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mareike Przysucha <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Adding.20TargetProfiles.20in.20derived.20Profiles.html#200199582">(Jun 09 2020 at 09:23)</a>:</h4>
<p>Which in my reading says: If Practitioner profile C also says that telecom is required, then Grahame's  example would work, although C doesn't state it was derived from B1. Correct?</p>



<a name="200220809"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Adding%20TargetProfiles%20in%20derived%20Profiles/near/200220809" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Adding.20TargetProfiles.20in.20derived.20Profiles.html#200220809">(Jun 09 2020 at 12:40)</a>:</h4>
<p>Yes, <span class="user-mention" data-user-id="196115">@Mareike Przysucha</span> -- that's my reading of it as well.  It doesn't have to be formally related to B1, but it has to have at least the same constraints (or more constrained versions of them).</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
