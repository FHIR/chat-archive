---
layout: page
title: "FHIR Chat  · Slicing and value sets · conformance"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/index.html">conformance</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20and.20value.20sets.html">Slicing and value sets</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="172468718"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20and%20value%20sets/near/172468718" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20and.20value.20sets.html#172468718">(Aug 04 2019 at 23:41)</a>:</h4>
<p>I'm looking at why a nictiz profile doesn't validate (<span class="user-mention" data-user-id="191375">@Alexander Henket</span> )</p>



<a name="172468721"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20and%20value%20sets/near/172468721" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20and.20value.20sets.html#172468721">(Aug 04 2019 at 23:41)</a>:</h4>
<p><a href="https://simplifier.net/NictizSTU3-Zib2017/ZIB-Product/~overview" target="_blank" title="https://simplifier.net/NictizSTU3-Zib2017/ZIB-Product/~overview">https://simplifier.net/NictizSTU3-Zib2017/ZIB-Product/~overview</a></p>



<a name="172468722"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20and%20value%20sets/near/172468722" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20and.20value.20sets.html#172468722">(Aug 04 2019 at 23:41)</a>:</h4>
<p>what it does is slice a Coding:</p>



<a name="172468724"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20and%20value%20sets/near/172468724" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20and.20value.20sets.html#172468724">(Aug 04 2019 at 23:41)</a>:</h4>
<div class="codehilite"><pre><span></span>        <span class="nt">&lt;element</span> <span class="na">id=</span><span class="s">&quot;Medication.code.coding&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;path</span> <span class="na">value=</span><span class="s">&quot;Medication.code.coding&quot;</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;slicing&gt;</span>
                <span class="nt">&lt;discriminator&gt;</span>
                    <span class="nt">&lt;type</span> <span class="na">value=</span><span class="s">&quot;value&quot;</span> <span class="nt">/&gt;</span>
                    <span class="nt">&lt;path</span> <span class="na">value=</span><span class="s">&quot;system&quot;</span> <span class="nt">/&gt;</span>
                <span class="nt">&lt;/discriminator&gt;</span>
                <span class="nt">&lt;rules</span> <span class="na">value=</span><span class="s">&quot;open&quot;</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;/slicing&gt;</span>
            <span class="nt">&lt;short</span> <span class="na">value=</span><span class="s">&quot;MedicationCode&quot;</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;definition</span> <span class="na">value=</span><span class="s">&quot;Coding medication in the Netherlands is done on the basis of the G standard (issued by Z-index), which is filled under the direction of KNMP.</span>

<span class="s">The coded medication can be expressed as:</span>

<span class="s"> - GTIN International Article Number</span>
<span class="s"> - KNMP article number = ATKODE (2.16.840.1.113883.2.4.4.8)</span>
<span class="s"> - Trade product code (HPK)</span>
<span class="s"> - Prescription code (PRK)</span>
<span class="s"> - Generic product code (GPK)</span>
<span class="s"> - Anatomic Therapeutic Classification code (ATC)</span>
<span class="s"> - SNOMED CT code</span>
<span class="s"> - Substance Name Code (SNK)</span>
<span class="s"> - Substance Name Code, in combination with Route of Administration (SSK)</span>
<span class="s"> - 90.000.000 number (individual code setting) (or similar from the facility)</span>

<span class="s">The GTIN enables identification of the product including its origin with a barcode.</span>
<span class="s">The ATKODE is the number with which wholesalers link the article to pharmacy systems (e.g. a box with 3 strips of 10 tablets).</span>
<span class="s">The HPK is the code for the trade product (with the brand name) as used per dose/per time the medication is taken (1 pill, 1 puff, 1ml)</span>
<span class="s">The PRK codes for the same product as the HPK does, but is not linked to a manufacturer (no brand name, no characteristics such as color, geometrical shape etc.). This code will enable a generic prescription, while still defining which trade product can be taken (e.g. a 200ml bag).</span>
<span class="s">The generic product code defines the composition of a product, and is sufficient for recording the prescription, but not the order.</span>
<span class="s">The prescription code (PRK) was developed and added to the older generic (GPK) and supplier-specific (HPK, ATKODE) coding to enable a generic product to be entered without listing a specific brand on the one hand, and to enable providing enough information to support the pharmacy supplying it on the other.</span>

<span class="s">The Substance Name Code (SNK) and the Substance Name Code, in combination with Route of Administration (SSK) are used to prescribe at a more generic level.</span>

<span class="s">The GTIN coding is used for the implementation of a barcode scanning standard and to be able to trace the origin of the product.</span>

<span class="s">The 90.000.000 number is used in accordance with national agreements.&quot;</span> <span class="nt">/&gt;</span>
</pre></div>



<a name="172468767"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20and%20value%20sets/near/172468767" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20and.20value.20sets.html#172468767">(Aug 04 2019 at 23:42)</a>:</h4>
<p>ok that seems straight forward - the slices are differentiated by system.</p>



<a name="172468768"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20and%20value%20sets/near/172468768" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20and.20value.20sets.html#172468768">(Aug 04 2019 at 23:42)</a>:</h4>
<p>then, the slice is defined like this:</p>



<a name="172468770"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20and%20value%20sets/near/172468770" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20and.20value.20sets.html#172468770">(Aug 04 2019 at 23:42)</a>:</h4>
<div class="codehilite"><pre><span></span>        <span class="nt">&lt;element</span> <span class="na">id=</span><span class="s">&quot;Medication.code.coding:productCodeZICodelijst&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;path</span> <span class="na">value=</span><span class="s">&quot;Medication.code.coding&quot;</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;sliceName</span> <span class="na">value=</span><span class="s">&quot;productCodeZICodelijst&quot;</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;max</span> <span class="na">value=</span><span class="s">&quot;1&quot;</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;binding&gt;</span>
                <span class="nt">&lt;strength</span> <span class="na">value=</span><span class="s">&quot;required&quot;</span> <span class="nt">/&gt;</span>
                <span class="nt">&lt;description</span> <span class="na">value=</span><span class="s">&quot;ProductCodeZICodelijst&quot;</span> <span class="nt">/&gt;</span>
                <span class="nt">&lt;valueSetReference&gt;</span>
                    <span class="nt">&lt;reference</span> <span class="na">value=</span><span class="s">&quot;http://decor.nictiz.nl/fhir/ValueSet/2.16.840.1.113883.2.4.3.11.60.40.2.9.7.1--20171231000000&quot;</span> <span class="nt">/&gt;</span>
                    <span class="nt">&lt;display</span> <span class="na">value=</span><span class="s">&quot;ProductCodeZICodelijst&quot;</span> <span class="nt">/&gt;</span>
                <span class="nt">&lt;/valueSetReference&gt;</span>
            <span class="nt">&lt;/binding&gt;</span>
        <span class="nt">&lt;/element&gt;</span>
</pre></div>



<a name="172468816"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20and%20value%20sets/near/172468816" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20and.20value.20sets.html#172468816">(Aug 04 2019 at 23:44)</a>:</h4>
<p>this doesn't work in the validator because the definition of the slicing says the the discriminator is <code>system</code>, but then it doesn't define a fixed value for the system; instead, this is implied by the value set defined in the coding itself (<code>$this</code>). So the validator says - quite rightly,in my view:</p>



<a name="172468819"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20and%20value%20sets/near/172468819" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20and.20value.20sets.html#172468819">(Aug 04 2019 at 23:44)</a>:</h4>
<p>ERROR: Medication.code.coding[0]: Could not match discriminator ([system]) for slice Medication.code.coding:productCodeZICodelijst in profile <a href="http://nictiz.nl/fhir/StructureDefinition/zib-Product" target="_blank" title="http://nictiz.nl/fhir/StructureDefinition/zib-Product">http://nictiz.nl/fhir/StructureDefinition/zib-Product</a> - does not have fixed value, binding or existence assertions</p>



<a name="172468826"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20and%20value%20sets/near/172468826" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20and.20value.20sets.html#172468826">(Aug 04 2019 at 23:45)</a>:</h4>
<p>does anyone disagree with my analysis?</p>



<a name="172469169"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20and%20value%20sets/near/172469169" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Townley-O&#x27;Neill <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20and.20value.20sets.html#172469169">(Aug 04 2019 at 23:57)</a>:</h4>
<p>I think that it is too obscure to fix the value of system by binding to a value set (when value sets can use multiple code systems).<br>
The message has a problems as it says that the element doesn't have a binding assertion, but it does.</p>



<a name="172469232"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20and%20value%20sets/near/172469232" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20and.20value.20sets.html#172469232">(Aug 04 2019 at 23:59)</a>:</h4>
<p>the element does not have a binding assertion</p>



<a name="172469235"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20and%20value%20sets/near/172469235" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20and.20value.20sets.html#172469235">(Aug 04 2019 at 23:59)</a>:</h4>
<p>because it is looking for something on a system element</p>



<a name="172469308"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20and%20value%20sets/near/172469308" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Townley-O&#x27;Neill <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20and.20value.20sets.html#172469308">(Aug 05 2019 at 00:01)</a>:</h4>
<p>...and the binding is on the coding.</p>



<a name="172469313"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20and%20value%20sets/near/172469313" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20and.20value.20sets.html#172469313">(Aug 05 2019 at 00:01)</a>:</h4>
<p>yes</p>



<a name="172469429"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20and%20value%20sets/near/172469429" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Townley-O&#x27;Neill <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20and.20value.20sets.html#172469429">(Aug 05 2019 at 00:04)</a>:</h4>
<p>maybe change the wording to </p>
<blockquote>
<p>profile <a href="http://nictiz.nl/fhir/StructureDefinition/zib-Product" target="_blank" title="http://nictiz.nl/fhir/StructureDefinition/zib-Product">http://nictiz.nl/fhir/StructureDefinition/zib-Product</a> - <em>discriminator</em> does not have fixed value, binding or existence assertions</p>
</blockquote>



<a name="172469502"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20and%20value%20sets/near/172469502" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20and.20value.20sets.html#172469502">(Aug 05 2019 at 00:06)</a>:</h4>
<p>y</p>



<a name="172469804"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20and%20value%20sets/near/172469804" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Henket <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20and.20value.20sets.html#172469804">(Aug 05 2019 at 00:17)</a>:</h4>
<p>Does slicing by Value Set work in all tools yet? We sliced on system for lack in tooling support in 2015/2016 when we started creating them</p>



<a name="172469812"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20and%20value%20sets/near/172469812" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Henket <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20and.20value.20sets.html#172469812">(Aug 05 2019 at 00:17)</a>:</h4>
<p><span class="user-mention" data-user-id="192301">@Ardon Toonstra</span> can you follow this thread while I’m on holiday?</p>



<a name="172469813"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20and%20value%20sets/near/172469813" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20and.20value.20sets.html#172469813">(Aug 05 2019 at 00:17)</a>:</h4>
<p>Don't know. I'll change it and test</p>



<a name="172469976"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20and%20value%20sets/near/172469976" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Henket <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20and.20value.20sets.html#172469976">(Aug 05 2019 at 00:23)</a>:</h4>
<p>By the way the STU3 validation under Touchstone apparently works with this construct. Or at least this is the first complaint I’ve heard so far. <span class="user-mention" data-user-id="191370">@Richard Ettema</span> does slicing by Value Set work under Touchstone. Wouldn’t want to change the profiles for one tool and break it for another</p>



<a name="172470077"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20and%20value%20sets/near/172470077" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20and.20value.20sets.html#172470077">(Aug 05 2019 at 00:27)</a>:</h4>
<p>Touchstone uses the same validator code. So it probably didn't really work - just wasn't even tested in the past</p>



<a name="172470078"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20and%20value%20sets/near/172470078" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20and.20value.20sets.html#172470078">(Aug 05 2019 at 00:27)</a>:</h4>
<p>I think you could try pattern slicing on the coding ($this) and discriminate based on the value set expansions (not actually directly on the bindings) - that's assuming that the value set expansions don't overlap (which is probably the case here?).  I'm also interested in verifying that this actually works (and not just that it doesn't give errors).</p>



<a name="172470080"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20and%20value%20sets/near/172470080" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20and.20value.20sets.html#172470080">(Aug 05 2019 at 00:27)</a>:</h4>
<p>I have to sort out a heap of terminology stuff to test this one</p>



<a name="172470081"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20and%20value%20sets/near/172470081" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20and.20value.20sets.html#172470081">(Aug 05 2019 at 00:27)</a>:</h4>
<p>I might simplify it a little</p>



<a name="172471400"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20and%20value%20sets/near/172471400" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20and.20value.20sets.html#172471400">(Aug 05 2019 at 01:14)</a>:</h4>
<p>If the discriminator is 'system', then 'system' must either have a fixed value or there must be a value set on the 'system' element itself.</p>



<a name="172474087"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20and%20value%20sets/near/172474087" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20and.20value.20sets.html#172474087">(Aug 05 2019 at 02:43)</a>:</h4>
<p>ok, these tests:</p>
<ul>
<li><a href="https://github.com/hapifhir/org.hl7.fhir.core/blob/master/org.hl7.fhir.validation/src/test/resources/validation-examples/valueset-slicing-meds.xml" target="_blank" title="https://github.com/hapifhir/org.hl7.fhir.core/blob/master/org.hl7.fhir.validation/src/test/resources/validation-examples/valueset-slicing-meds.xml">https://github.com/hapifhir/org.hl7.fhir.core/blob/master/org.hl7.fhir.validation/src/test/resources/validation-examples/valueset-slicing-meds.xml</a></li>
<li><a href="https://github.com/hapifhir/org.hl7.fhir.core/blob/master/org.hl7.fhir.validation/src/test/resources/validation-examples/valueset-slicing-med-profile.xml" target="_blank" title="https://github.com/hapifhir/org.hl7.fhir.core/blob/master/org.hl7.fhir.validation/src/test/resources/validation-examples/valueset-slicing-med-profile.xml">https://github.com/hapifhir/org.hl7.fhir.core/blob/master/org.hl7.fhir.validation/src/test/resources/validation-examples/valueset-slicing-med-profile.xml</a></li>
<li><a href="https://github.com/hapifhir/org.hl7.fhir.core/blob/master/org.hl7.fhir.validation/src/test/resources/validation-examples/valueset-slicing-med-cs.xml" target="_blank" title="https://github.com/hapifhir/org.hl7.fhir.core/blob/master/org.hl7.fhir.validation/src/test/resources/validation-examples/valueset-slicing-med-cs.xml">https://github.com/hapifhir/org.hl7.fhir.core/blob/master/org.hl7.fhir.validation/src/test/resources/validation-examples/valueset-slicing-med-cs.xml</a></li>
</ul>



<a name="172474089"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20and%20value%20sets/near/172474089" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20and.20value.20sets.html#172474089">(Aug 05 2019 at 02:43)</a>:</h4>
<p>that's what we want to test, yes?</p>



<a name="172480252"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20and%20value%20sets/near/172480252" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20and.20value.20sets.html#172480252">(Aug 05 2019 at 05:41)</a>:</h4>
<p>... and it works...</p>



<a name="172578409"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20and%20value%20sets/near/172578409" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ardon Toonstra <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20and.20value.20sets.html#172578409">(Aug 06 2019 at 11:04)</a>:</h4>
<p>Thanks for checking this out Grahame. I looked at your tests and agree that this is what we want to test. Seems like we should improve our profiles accordingly. So, to confirm, we only have to change our discriminator.path from system to $this, is that correct?</p>



<a name="172578439"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20and%20value%20sets/near/172578439" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ardon Toonstra <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20and.20value.20sets.html#172578439">(Aug 06 2019 at 11:05)</a>:</h4>
<p><span class="user-mention" data-user-id="191370">@Richard Ettema</span>  does WildFHIR / Touchstone support this?</p>



<a name="172578509"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20and%20value%20sets/near/172578509" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ardon Toonstra <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20and.20value.20sets.html#172578509">(Aug 06 2019 at 11:06)</a>:</h4>
<p>I will check out what the .NET validator does</p>



<a name="172581438"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20and%20value%20sets/near/172581438" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ardon Toonstra <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20and.20value.20sets.html#172581438">(Aug 06 2019 at 11:58)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> , I would expect the below instance to fail in the validator, right? </p>
<div class="codehilite"><pre><span></span><span class="nt">&lt;Medication</span> <span class="na">xmlns=</span><span class="s">&quot;http://hl7.org/fhir&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;code&gt;</span>
    <span class="nt">&lt;coding&gt;</span>
      <span class="nt">&lt;system</span> <span class="na">value=</span><span class="s">&quot;http://tst.org/fhir/CodeSystem/test-meds&quot;</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;code</span> <span class="na">value=</span><span class="s">&quot;s1&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/coding&gt;</span>
    <span class="nt">&lt;coding&gt;</span>
      <span class="nt">&lt;system</span> <span class="na">value=</span><span class="s">&quot;http://tst.org/fhir/CodeSystem/test-meds&quot;</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;code</span> <span class="na">value=</span><span class="s">&quot;s1a&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/coding&gt;</span>
    <span class="nt">&lt;coding&gt;</span>
      <span class="nt">&lt;system</span> <span class="na">value=</span><span class="s">&quot;http://tst.org/fhir/CodeSystem/test-meds&quot;</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;code</span> <span class="na">value=</span><span class="s">&quot;s3&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/coding&gt;</span>
    <span class="nt">&lt;text</span> <span class="na">value=</span><span class="s">&quot;some text&quot;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;/code&gt;</span>
  <span class="nt">&lt;status</span> <span class="na">value=</span><span class="s">&quot;active&quot;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;isBrand</span> <span class="na">value=</span><span class="s">&quot;false&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/Medication&gt;</span>
</pre></div>



<a name="172581513"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20and%20value%20sets/near/172581513" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20and.20value.20sets.html#172581513">(Aug 06 2019 at 11:59)</a>:</h4>
<p>This is good.  My question is, since the discrimination is based on contents of the value set expansion compared to the instance data and not on a fixed value, should the discriminator type be (1) value (as it is currently in these tests) or (2) pattern (which seems to me like it might be a more logical fit)?  Or do we intend to say that in this case you can use either value or pattern and both will work?  Presumably we should also test with pattern (if we decide that's a valid option, and probably even if we don't).</p>



<a name="172590168"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20and%20value%20sets/near/172590168" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20and.20value.20sets.html#172590168">(Aug 06 2019 at 13:52)</a>:</h4>
<p>I think that should fail, and it looks just like my failing example in the validator tests</p>



<a name="172590227"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20and%20value%20sets/near/172590227" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20and.20value.20sets.html#172590227">(Aug 06 2019 at 13:53)</a>:</h4>
<p><span class="user-mention" data-user-id="191405">@Rob Hausam</span> I have tested value. I'm not really sure what pattern means here. value means that the coding is in the value set. I don't know what pattern would mean...</p>



<a name="172595822"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20and%20value%20sets/near/172595822" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20and.20value.20sets.html#172595822">(Aug 06 2019 at 14:53)</a>:</h4>
<p>The notes on the discriminator type 'value' <a href="https://www.hl7.org/fhir/profiling.html#discriminator" target="_blank" title="https://www.hl7.org/fhir/profiling.html#discriminator">here</a> say:</p>
<blockquote>
<p>This is the most commonly used discriminator type: to decide based on the value of an element. Elements used like this are mostly primitive types- code, uri.</p>
</blockquote>
<p>That's not what we're doing in this case.  We're not specifying a particular element in the discriminator path, and the slices don't fix any values - they declare a binding.  We're testing the instance data to see if it matches with one of the codes in the expansion of the bound value set.  That sounds very much like the idea of matching on a pattern (although with a somewhat different application of it).  Maybe what we actually should have is a 'binding' discriminator type (whatever we would want to call it) to make this clearer?  But I think that in lieu of that, allowing either 'value' or 'pattern' to be used makes sense, and seems consistent with how we've documented it:</p>
<blockquote>
<p>If the type is value, or pattern, then the element definition must use either:</p>
<ul>
<li>ElementDefinition.fixed[x], or</li>
<li>ElementDefinition.pattern[x], or</li>
<li>if the element has a terminology binding, a required binding with a Value Set that enumerates the list of possible codes in the value set ("extensional definition")</li>
</ul>
</blockquote>



<a name="172596835"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20and%20value%20sets/near/172596835" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20and.20value.20sets.html#172596835">(Aug 06 2019 at 15:03)</a>:</h4>
<p>A question on a different aspect of this is, do we really want to restrict discriminating based on a value set binding <strong>only</strong> to extensionally defined value sets?  I agree that the binding needs to be required, but I can't see why we wouldn't want to be able to do it on intensionally defined value sets that are supported by the terminology server (and maybe that's already the case)?</p>



<a name="172597062"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20and%20value%20sets/near/172597062" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20and.20value.20sets.html#172597062">(Aug 06 2019 at 15:05)</a>:</h4>
<p>Performance comes to mind. A profile validator would need to reach out to a TX server to evaluate the discriminator. This might not scale...</p>



<a name="172597176"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20and%20value%20sets/near/172597176" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20and.20value.20sets.html#172597176">(Aug 06 2019 at 15:07)</a>:</h4>
<p>I agree that may be an issue.  But we need to decide (I think) whether we actually disallow or explicitly don't support it.</p>



<a name="172597362"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20and%20value%20sets/near/172597362" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20and.20value.20sets.html#172597362">(Aug 06 2019 at 15:08)</a>:</h4>
<p>Or if we've already decided it (as currently documented) and are comfortable sticking with that, we can.</p>



<a name="172597545"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20and%20value%20sets/near/172597545" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20and.20value.20sets.html#172597545">(Aug 06 2019 at 15:10)</a>:</h4>
<p>And I didn't want to derail the "value and/or pattern" discriminator type discussion.</p>



<a name="172600221"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20and%20value%20sets/near/172600221" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20and.20value.20sets.html#172600221">(Aug 06 2019 at 15:39)</a>:</h4>
<p>Feature-wise, this seems like a natural extension of the current discriminator specification. It may encourage modelers to introduce potential performance bottlenecks without noticing. But the spec could explicitly warn for that.</p>



<a name="172628058"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20and%20value%20sets/near/172628058" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20and.20value.20sets.html#172628058">(Aug 06 2019 at 21:01)</a>:</h4>
<p>I think we didn't see the point of discriminating by an intensionally defined value set. The point of the discriminator is too allow an implementation to quickly determine which slice is which without having to do any validation. Explicitly defined value sets lend themselves to turning into switch statements....</p>



<a name="172646204"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20and%20value%20sets/near/172646204" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20and.20value.20sets.html#172646204">(Aug 07 2019 at 02:50)</a>:</h4>
<p>Yes, I think that's a reasonable rationale for making that distinction.</p>



<a name="172646268"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20and%20value%20sets/near/172646268" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20and.20value.20sets.html#172646268">(Aug 07 2019 at 02:52)</a>:</h4>
<p>Where are we on the "value and/or pattern" discriminator type for value set slicing discussion?</p>



<a name="172646350"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20and%20value%20sets/near/172646350" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20and.20value.20sets.html#172646350">(Aug 07 2019 at 02:55)</a>:</h4>
<p>value. it's the value of the coding etc that is submitted to test the binding</p>



<a name="172646582"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20and%20value%20sets/near/172646582" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20and.20value.20sets.html#172646582">(Aug 07 2019 at 03:02)</a>:</h4>
<p>As I said in the earlier post, our current documentation implies otherwise - both value and pattern can use a terminology binding (as noted in the 3rd bullet).  That's what it says.  If that's wrong, then we'll have to change it (at least make it much clearer than it is now that value is the only correct choice in this case).</p>



<a name="172653146"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20and%20value%20sets/near/172653146" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20and.20value.20sets.html#172653146">(Aug 07 2019 at 06:18)</a>:</h4>
<p>I don't know what it means to say that a pattern can be used with a binding. I don't know if anyone else has any ideas what we might have meant by that</p>



<a name="172672383"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20and%20value%20sets/near/172672383" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Martijn Hermans <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20and.20value.20sets.html#172672383">(Aug 07 2019 at 12:20)</a>:</h4>
<p>Thank you all for helping me with this issue! If I understand correctly: I can just wait untill the profile is adjusted. (it doesn't work now because the only way to see which slice we are dealing with is to look at the valuereference,  right?)</p>



<a name="172672461"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20and%20value%20sets/near/172672461" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Martijn Hermans <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20and.20value.20sets.html#172672461">(Aug 07 2019 at 12:21)</a>:</h4>
<p>I have one more question about the profile: <a href="https://simplifier.net/NictizSTU3-Zib2017/ZIB-MedicationAgreement" target="_blank" title="https://simplifier.net/NictizSTU3-Zib2017/ZIB-MedicationAgreement">https://simplifier.net/NictizSTU3-Zib2017/ZIB-MedicationAgreement</a></p>



<a name="172672532"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20and%20value%20sets/near/172672532" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Martijn Hermans <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20and.20value.20sets.html#172672532">(Aug 07 2019 at 12:22)</a>:</h4>
<p>If I validate a resource on basis of this profile I get the following warning:</p>



<a name="172672586"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20and%20value%20sets/near/172672586" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Martijn Hermans <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20and.20value.20sets.html#172672586">(Aug 07 2019 at 12:23)</a>:</h4>
<div class="codehilite"><pre><span></span>NotSupported : Slicing with a discriminator of type &#39;Type&#39; is not yet supported by this validator.
</pre></div>


<p>Does this just mean the validator cannot currently validate this slice. Or does it mean the profile may have a problem?</p>



<a name="172672808"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20and%20value%20sets/near/172672808" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20and.20value.20sets.html#172672808">(Aug 07 2019 at 12:26)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span>  If you read through the definition of ElementDefinition.pattern[x], I agree that 'pattern' as it is described there does not fit with the slicing on a value set use case that we are discussing here.  The documentation for ElementDefinition.binding and its subelements doesn't mention anything about how it works in slicing (and maybe it doesn't need to).  The documentation for ElementDefinition.slicing.discriminator.type basically defers to the discriminator-type value set, which, as in the Profiling FHIR page, states that "The slices have different values in the nominated element."  If you take that statement at face value, it doesn't include the idea that for use as a 'value' type discriminator, specifying a binding to an extensionally defined value set is equivalent to specifying a fixed value for the nominated element.  That's too broad a stretch to be an obvious conclusion to reach without a more explicit statement (or multiple statements).  If we want to broaden the declared scope of 'value' to cover this use (and to disallow 'pattern' for it) then we need to enhance the documentation to do that (I have some ideas on that).</p>



<a name="172674181"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20and%20value%20sets/near/172674181" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20and.20value.20sets.html#172674181">(Aug 07 2019 at 12:46)</a>:</h4>
<p><span class="user-mention" data-user-id="224390">@Martijn Hermans</span> My guess is that it probably means what you said first, that the validator cannot currently validate this slice.  I don't know that the profile is wrong (rather than just unsupported), but it does seem to me to be incomplete.  It has sliced MedicationRequest.dosageInstruction.dose[x], but hasn't defined any slices for it.</p>



<a name="172676960"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20and%20value%20sets/near/172676960" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20and.20value.20sets.html#172676960">(Aug 07 2019 at 13:21)</a>:</h4>
<p><span class="user-mention" data-user-id="224390">@Martijn Hermans</span> although FHIR allows slice-by-profile, in practice this feature is not implemented/supported yet by the popular FHIR frameworks (HAPI/Java &amp; .NET). Also keep in mind that evaluation of such a constraint can be very computationally intensive.</p>



<a name="172677058"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20and%20value%20sets/near/172677058" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20and.20value.20sets.html#172677058">(Aug 07 2019 at 13:22)</a>:</h4>
<p>Java validation can now</p>



<a name="172677721"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20and%20value%20sets/near/172677721" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20and.20value.20sets.html#172677721">(Aug 07 2019 at 13:30)</a>:</h4>
<p>Ah, nice work! I think Ewout almost has this in place too.</p>



<a name="172758732"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20and%20value%20sets/near/172758732" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ardon Toonstra <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20and.20value.20sets.html#172758732">(Aug 08 2019 at 12:10)</a>:</h4>
<p>I made an issue for the .NET validator to support slicing based on valueset. I couldn't reproduce the expected validation errors based on the test data provided by Grahame.</p>



<a name="177905937"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20and%20value%20sets/near/177905937" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ardon Toonstra <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20and.20value.20sets.html#177905937">(Oct 11 2019 at 13:19)</a>:</h4>
<p>Hi all!</p>
<p>The .NET validator now supports slicing discriminated by ValueSet. In our profiles, we have occasionally defined slices based on a valueset binding and one or more mandatory slices with fixed values on .system and .code. The .NET validator does not yet handle this combined kind of slicing.</p>
<p>My concern: is this valid FHIR?  Should a validator be smart enough to look at valueset binding AND fixed values given in a slice with this discriminator:</p>
<div class="codehilite"><pre><span></span>        <span class="nt">&lt;discriminator&gt;</span>
          <span class="nt">&lt;type</span> <span class="na">value=</span><span class="s">&quot;value&quot;</span> <span class="nt">/&gt;</span>
          <span class="nt">&lt;path</span> <span class="na">value=</span><span class="s">&quot;$this&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/discriminator&gt;</span>
</pre></div>



<a name="177912734"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20and%20value%20sets/near/177912734" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20and.20value.20sets.html#177912734">(Oct 11 2019 at 14:36)</a>:</h4>
<p>The problem is that you discriminator is at two different levels.  A valueset constrains the values of a Coding.  If you're declaring fixed values on the 'code' and 'system', that's not happening at the coding level.  I think the correct solution is to treat a value set binding as legal for both 'value' and 'pattern' constraints.  Then you could declare a value set on the CodeableConcept or a pattern on the CodeableConcept and the discriminator would work for both.  <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> ?</p>



<a name="177925438"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20and%20value%20sets/near/177925438" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20and.20value.20sets.html#177925438">(Oct 11 2019 at 16:44)</a>:</h4>
<p>I'm not sure. I'd have to look at instance before I was sure what Ardon was asking</p>



<a name="177925655"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20and%20value%20sets/near/177925655" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20and.20value.20sets.html#177925655">(Oct 11 2019 at 16:47)</a>:</h4>
<p>My question wasn't so much based on what Ardon was asking as wondering whether it's reasonable to allow a valueset assertion to work for 'pattern' slices as well as 'value' slices.  In practice, valueset assertion works more like 'pattern' than like 'value' anyhow - it just checks code + system and only cares about a match in one of the codings.  It ignores everything else.  If I were designing it now, I might actually argue that valueset doesn't make sense for a 'value' match unless you're dealing with code.  However, I'm ok with leaving that bit as it is at this point.</p>



<a name="177936164"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20and%20value%20sets/near/177936164" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20and.20value.20sets.html#177936164">(Oct 11 2019 at 18:39)</a>:</h4>
<p>There's been conversation about this before.  I agree that the fit for valueset assertion actually does seem to be better with pattern, as you describe, so I think it would make sense at least to allow for both.</p>



<a name="178083044"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20and%20value%20sets/near/178083044" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Henket <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20and.20value.20sets.html#178083044">(Oct 14 2019 at 08:24)</a>:</h4>
<p>Hope this helps. This is the instance we want to validate, so we're basically looking for a syntax to do that:</p>
<div class="codehilite"><pre><span></span><span class="c">&lt;!-- Full example: https://github.com/Nictiz/Nictiz-STU3-Zib2017/blob/develop/Examples/medmij-bgz-fhir3-0-1-labresult-ts-01.xml --&gt;</span>
<span class="c">&lt;!-- Full profile: https://github.com/Nictiz/Nictiz-STU3-Zib2017/blob/develop/Profiles%20-%20ZIB%202017/zib-LaboratoryTestResult-Observation.xml --&gt;</span>
<span class="nt">&lt;Observation</span> <span class="na">xmlns=</span><span class="s">&quot;http://hl7.org/fhir&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;id</span> <span class="na">value=</span><span class="s">&quot;medmij-bgz-labresult-ts-01&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;meta&gt;</span>
        <span class="nt">&lt;profile</span> <span class="na">value=</span><span class="s">&quot;http://nictiz.nl/fhir/StructureDefinition/zib-LaboratoryTestResult-Observation&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/meta&gt;</span>
    <span class="nt">&lt;status</span> <span class="na">value=</span><span class="s">&quot;final&quot;</span><span class="nt">/&gt;</span>
    <span class="c">&lt;!-- Fixed values for coding.system and coding.code (Dutch extension of SNOMED hence fails at regular terminology servers) --&gt;</span>
    <span class="nt">&lt;category&gt;</span>
        <span class="nt">&lt;coding&gt;</span>
            <span class="nt">&lt;system</span> <span class="na">value=</span><span class="s">&quot;http://snomed.info/sct&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;code</span> <span class="na">value=</span><span class="s">&quot;49581000146104&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;display</span> <span class="na">value=</span><span class="s">&quot;Laboratory test finding (finding)&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/coding&gt;</span>
    <span class="nt">&lt;/category&gt;</span>
    <span class="c">&lt;!-- Secondary category based on a binding --&gt;</span>
    <span class="nt">&lt;category&gt;</span>
        <span class="nt">&lt;coding&gt;</span>
            <span class="nt">&lt;system</span> <span class="na">value=</span><span class="s">&quot;http://snomed.info/sct&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;code</span> <span class="na">value=</span><span class="s">&quot;275711006&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;display</span> <span class="na">value=</span><span class="s">&quot;Chemistry&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/coding&gt;</span>
    <span class="nt">&lt;/category&gt;</span>
...
</pre></div>



<a name="178281972"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20and%20value%20sets/near/178281972" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ardon Toonstra <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20and.20value.20sets.html#178281972">(Oct 16 2019 at 12:08)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> , <span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> , could you have a look at the instance provided by Alexander? How should this be discriminated?</p>
<p>Currently, if we create a ValueSet that only contains the fixed code (49581000146104 - Laboratory test finding) and bind this in the profile, the validator would be satisfied and capable of proper validation. It is however very cumbersome to create a ValueSet for one fixed value. We rather would like a validator to be capable to handle both options with a $this discriminator. Or is this impossible?</p>



<a name="178283938"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20and%20value%20sets/near/178283938" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20and.20value.20sets.html#178283938">(Oct 16 2019 at 12:38)</a>:</h4>
<p>it's still on my todo list. I'm trying to catch up</p>



<a name="178378094"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20and%20value%20sets/near/178378094" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noemi Deppenwiese <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20and.20value.20sets.html#178378094">(Oct 17 2019 at 12:59)</a>:</h4>
<p>I have a similar problem: I defined an extension with a CodeableConcept Value and now want to have three slices of coding which each bind to different ValueSets. I used system and version as slicing discriminators and have set the cardinality of system to 1..1 in each slice, but I still get an Error from the validator:</p>
<div class="codehilite"><pre><span></span>Error @ Specimen.extension[2].value.ofType(CodeableConcept).coding[0] (line 31, col17) : Could not match any discriminators ([system, version]) for slice Extension.value[x].coding:icd-10-gm in profile https://fhir.bbmri.de/StructureDefinition/SampleDiagnosis - None of the discriminator [system, version] have fixed value, binding or existence assertions
</pre></div>


<p>Is this a validator bug or an issue with my slicing?</p>



<a name="178390650"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20and%20value%20sets/near/178390650" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20and.20value.20sets.html#178390650">(Oct 17 2019 at 15:12)</a>:</h4>
<p>What is your discriminator?  It should be "$this" and the discrimination type should be by value</p>



<a name="178759349"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20and%20value%20sets/near/178759349" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ardon Toonstra <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20and.20value.20sets.html#178759349">(Oct 22 2019 at 14:08)</a>:</h4>
<p>Update: the .NET validator is capable of handling this kind of slices if the fixed values are given on the coding level. Not if the fixed values are given in the coding.system and coding.value ect. When the discrimination is of ype value and $this is used on the coding itself.</p>



<a name="178759508"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20and%20value%20sets/near/178759508" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ardon Toonstra <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20and.20value.20sets.html#178759508">(Oct 22 2019 at 14:10)</a>:</h4>
<p>Should a validator be smart enough to walk into the child elements if no fixed coding is given?</p>



<a name="178858357"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20and%20value%20sets/near/178858357" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ardon Toonstra <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20and.20value.20sets.html#178858357">(Oct 23 2019 at 14:25)</a>:</h4>
<p>Another update… </p>
<p>Unfortunately, the fixed coding or fixed codeableConcept does not work because we cannot fix coding.display. Our implementers should be able to use translated display values or other values than we specify. Too bad, the validator will not match a slice that contains a coding.display to the slicing definition, resulting in an error. </p>
<div class="codehilite"><pre><span></span><span class="nt">&lt;element</span> <span class="na">id=</span><span class="s">&quot;Observation.category&quot;</span><span class="nt">&gt;</span>
<span class="nt">&lt;path</span> <span class="na">value=</span><span class="s">&quot;Observation.category&quot;</span><span class="nt">/&gt;</span>
 <span class="nt">&lt;slicing&gt;</span>
 <span class="nt">&lt;discriminator&gt;</span>
<span class="nt">&lt;type</span> <span class="na">value=</span><span class="s">&quot;value&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;path</span> <span class="na">value=</span><span class="s">&quot;$this&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/discriminator&gt;</span>
<span class="nt">&lt;rules</span> <span class="na">value=</span><span class="s">&quot;open&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/slicing&gt;</span>
<span class="nt">&lt;min</span> <span class="na">value=</span><span class="s">&quot;1&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/element&gt;</span>
 <span class="nt">&lt;element</span> <span class="na">id=</span><span class="s">&quot;Observation.category:LaboratoryTestResultCode&quot;</span><span class="nt">&gt;</span>
<span class="nt">&lt;path</span> <span class="na">value=</span><span class="s">&quot;Observation.category&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;sliceName</span> <span class="na">value=</span><span class="s">&quot;LaboratoryTestResultCode&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;short</span> <span class="na">value=</span><span class="s">&quot;LaboratoryTestResultCode&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;min</span> <span class="na">value=</span><span class="s">&quot;1&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;max</span> <span class="na">value=</span><span class="s">&quot;1&quot;</span><span class="nt">/&gt;</span>
 <span class="nt">&lt;fixedCodeableConcept&gt;</span>
 <span class="nt">&lt;coding&gt;</span>
<span class="nt">&lt;system</span> <span class="na">value=</span><span class="s">&quot;http://snomed.info/sct&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;code</span> <span class="na">value=</span><span class="s">&quot;49581000146104&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/coding&gt;</span>
<span class="nt">&lt;/fixedCodeableConcept&gt;</span>
<span class="nt">&lt;/element&gt;</span>
</pre></div>



<a name="178858474"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20and%20value%20sets/near/178858474" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ardon Toonstra <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20and.20value.20sets.html#178858474">(Oct 23 2019 at 14:26)</a>:</h4>
<p>Therefore, we now believe a validator should be smart enough to use the fixed values in the child elements. Do you agree?</p>



<a name="178858542"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20and%20value%20sets/near/178858542" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20and.20value.20sets.html#178858542">(Oct 23 2019 at 14:27)</a>:</h4>
<p>Have you considered using pattern?</p>



<a name="178859610"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20and%20value%20sets/near/178859610" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ardon Toonstra <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20and.20value.20sets.html#178859610">(Oct 23 2019 at 14:37)</a>:</h4>
<p>Hi Lloyd, Thanks for your reply! </p>
<p>If we use pattern, we have to set the discriminator type to pattern as well right? How does that work with the ValueSet bindings?</p>



<a name="178859845"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20and%20value%20sets/near/178859845" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ardon Toonstra <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20and.20value.20sets.html#178859845">(Oct 23 2019 at 14:39)</a>:</h4>
<p>Just tried with pattern slicing --&gt; then the .NET validator expects all slices to contain a pattern. Does not work with ValueSet binding</p>



<a name="178860678"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20and%20value%20sets/near/178860678" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ardon Toonstra <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20and.20value.20sets.html#178860678">(Oct 23 2019 at 14:46)</a>:</h4>
<p>Ah, good news, the java validator works well with the pattern and the valueset binding  :) thnx</p>



<a name="178865260"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20and%20value%20sets/near/178865260" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ardon Toonstra <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20and.20value.20sets.html#178865260">(Oct 23 2019 at 15:28)</a>:</h4>
<p>Mm, I could also have read the spec somewhat better: <a href="http://hl7.org/fhir/profiling.html#discriminator" target="_blank" title="http://hl7.org/fhir/profiling.html#discriminator">http://hl7.org/fhir/profiling.html#discriminator</a></p>



<a name="178994355"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20and%20value%20sets/near/178994355" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20and.20value.20sets.html#178994355">(Oct 24 2019 at 20:32)</a>:</h4>
<p>well, the page implies that you can't mix pattern and binding (in spite of it working with the validator). Do you have a use case for that?</p>



<a name="179041809"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20and%20value%20sets/near/179041809" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ardon Toonstra <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20and.20value.20sets.html#179041809">(Oct 25 2019 at 11:41)</a>:</h4>
<p>Mm, like Marco mentioned in this <a href="#narrow/stream/179280-fhir.2Finfrastructure-wg/topic/Is.20there.20a.20difference.20between.20value.20or.20pattern.20slicing.3F" title="#narrow/stream/179280-fhir.2Finfrastructure-wg/topic/Is.20there.20a.20difference.20between.20value.20or.20pattern.20slicing.3F">zulip  chat</a> I can also read that a slice could have a fixed or pattern or binding. </p>
<p>The use case for having a pattern and a valueset binding is described above with the given examples, isn't it? We use a (fixed) category slice to search and index and another category slice with a valueset binding to give a more specific category for the resource, based on a value out of a valueset</p>



<a name="179240079"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20and%20value%20sets/near/179240079" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ardon Toonstra <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20and.20value.20sets.html#179240079">(Oct 28 2019 at 15:14)</a>:</h4>
<p>The attached image shows our current idea on how to profile the above-mentioned use case (simplistic exame, e.g. removed descriptions and cardinalities ect.). What do you think?<br>
<a href="/user_uploads/10155/ANB6AnxAIb5T1nHQoUROPUkX/Descriminator-example.png" target="_blank" title="Descriminator-example.png">Descriminator-example.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/10155/ANB6AnxAIb5T1nHQoUROPUkX/Descriminator-example.png" target="_blank" title="Descriminator-example.png"><img src="/user_uploads/10155/ANB6AnxAIb5T1nHQoUROPUkX/Descriminator-example.png"></a></div>



<a name="180685419"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20and%20value%20sets/near/180685419" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20and.20value.20sets.html#180685419">(Nov 13 2019 at 23:39)</a>:</h4>
<p>let's talk about this next week</p>



<a name="180824087"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20and%20value%20sets/near/180824087" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ardon Toonstra <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20and.20value.20sets.html#180824087">(Nov 15 2019 at 11:41)</a>:</h4>
<p>Great, we will do that and let's include <span class="user-mention" data-user-id="191375">@Alexander Henket</span></p>



<a name="187604401"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20and%20value%20sets/near/187604401" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Zautke <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20and.20value.20sets.html#187604401">(Feb 07 2020 at 00:55)</a>:</h4>
<p><span class="user-mention" data-user-id="192301">@Ardon Toonstra</span> <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> Has there been a decision on this issue? I have the same use case for Observation.category (pattern slice for fixed values and one additional slice with a required binding).</p>



<a name="189312885"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20and%20value%20sets/near/189312885" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ardon Toonstra <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20and.20value.20sets.html#189312885">(Feb 28 2020 at 14:13)</a>:</h4>
<p>The use case is real. More info in this Zulip chat: <a href="#narrow/stream/179280-fhir.2Finfrastructure-wg/topic/Is.20there.20a.20difference.20between.20value.20or.20pattern.20slicing.3F" title="#narrow/stream/179280-fhir.2Finfrastructure-wg/topic/Is.20there.20a.20difference.20between.20value.20or.20pattern.20slicing.3F">https://chat.fhir.org/#narrow/stream/179280-fhir.2Finfrastructure-wg/topic/Is.20there.20a.20difference.20between.20value.20or.20pattern.20slicing.3F</a></p>



<a name="194889397"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20and%20value%20sets/near/194889397" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20and.20value.20sets.html#194889397">(Apr 22 2020 at 05:19)</a>:</h4>
<p>looks like we haven't close this out - this coming week on FHIR-I? <span class="user-mention" data-user-id="192301">@Ardon Toonstra</span></p>



<a name="194922363"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20and%20value%20sets/near/194922363" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ardon Toonstra <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20and.20value.20sets.html#194922363">(Apr 22 2020 at 12:30)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> , is this about the backwards-incompatible notion made by Ewout in <a href="https://jira.hl7.org/browse/FHIR-25206" title="https://jira.hl7.org/browse/FHIR-25206">https://jira.hl7.org/browse/FHIR-25206</a>?  Or about something else?</p>



<a name="194922463"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20and%20value%20sets/near/194922463" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20and.20value.20sets.html#194922463">(Apr 22 2020 at 12:30)</a>:</h4>
<p>oh yes I think that is. So it's closed now?</p>



<a name="194923487"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20and%20value%20sets/near/194923487" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ardon Toonstra <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20and.20value.20sets.html#194923487">(Apr 22 2020 at 12:41)</a>:</h4>
<p>I think this one is closed then. I am happy with the resolution and the upcoming change for the .net API. WildFHIR made adjustments to the validator as well. Still need to correct/update our profiles though.</p>



<a name="194923527"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Slicing%20and%20value%20sets/near/194923527" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ardon Toonstra <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Slicing.20and.20value.20sets.html#194923527">(Apr 22 2020 at 12:41)</a>:</h4>
<p>This issue thread is at least related to that JIRA ticket.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
