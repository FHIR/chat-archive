---
layout: page
title: "FHIR Chat  · Message notification - clarification of bundle content · conformance"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/index.html">conformance</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Message.20notification.20-.20clarification.20of.20bundle.20content.html">Message notification - clarification of bundle content</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153845212"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Message%20notification%20-%20clarification%20of%20bundle%20content/near/153845212" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Allan Bro Hansen <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Message.20notification.20-.20clarification.20of.20bundle.20content.html#153845212">(Aug 26 2016 at 06:54)</a>:</h4>
<p>I am looking to implement a notification message for "the patient has arrived for his appointment" which is determined as a value of the appointment.<br>
Our server already implements a FHIR appointment endpoint but does not support version-reads (vreads).<br>
The receiving system is yet pretty unspecified so we have the possibility to state how we want it, and we want to do it in a FHIR-fashion.<br>
Due to the lack of vread we also need to include actual appointment resource (and not just a version-specific reference to it).<br>
We also know that the receiving system would be interested in the business identifiers of the patient of the appointment.<br>
The message will be sent synchronously from our system but handled asynchronously from the user action (so process time is not that important).</p>
<p>I am uncertain whether a REST-subscription or a notification message is the better choice:<br>
Using subscription:<br>
We could use the subscription pattern (<a href="https://www.hl7.org/fhir/subscription.html" target="_blank" title="https://www.hl7.org/fhir/subscription.html">https://www.hl7.org/fhir/subscription.html</a>) with a REST Hook sending an update (PUT) appointment message for every patient-arrived event. The receiving system would subsequently need to read the patient to get the business identifiers (a step I would like to be without).<br>
Using messaging:<br>
We could POST a notification message using a synchronous $process-message. The message would contain a reference to the appointment as messageheader.data (Messageheader should be the first resource in the bundle). I am uncertain if it is within the standard to include the actual appointment-resource as the second resource, and its patient as the third.<br>
I can only see this subject mention in the comment of the description of messageHeader.data (<a href="https://www.hl7.org/fhir/messageheader-definitions.html#MessageHeader.data" target="_blank" title="https://www.hl7.org/fhir/messageheader-definitions.html#MessageHeader.data">https://www.hl7.org/fhir/messageheader-definitions.html#MessageHeader.data</a>).<br>
"<br>
The data is defined where the transaction type is defined. The transaction data is always included in the bundle that is the full message. Only the root resource is specified. The resources it references should be contained in the bundle but are not also listed here. Multiple repetitions are allowed to cater for merges and other situations with multiple focal targets.<br>
"<br>
The question for you (sorry for the long introduction):<br>
Concerning "The resources it references should be contained in the bundle but are not also listed here": Is it really expected to include all referenced objects of the appointment?<br>
(and any comments in respect to choosing between subscription-REST and messaging are also welcome)</p>



<a name="153845217"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Message%20notification%20-%20clarification%20of%20bundle%20content/near/153845217" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Allan Bro Hansen <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Message.20notification.20-.20clarification.20of.20bundle.20content.html#153845217">(Aug 26 2016 at 08:35)</a>:</h4>
<p>did just change include a "not" in part of the 2. sentence from  "but does support" to  "but does not support" :-)</p>



<a name="153845218"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Message%20notification%20-%20clarification%20of%20bundle%20content/near/153845218" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Message.20notification.20-.20clarification.20of.20bundle.20content.html#153845218">(Aug 26 2016 at 08:43)</a>:</h4>
<p>well ... subscription-REST puts the responsibility on the subscriber to what the subscriber is interested in... it is the most dynamic approach for both parts as the criteria may vary from time to time and be arbitrary complex</p>



<a name="153845219"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Message%20notification%20-%20clarification%20of%20bundle%20content/near/153845219" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Message.20notification.20-.20clarification.20of.20bundle.20content.html#153845219">(Aug 26 2016 at 08:50)</a>:</h4>
<p>notification message sounds a bit more static as the content would be spec'ed up front</p>



<a name="153845220"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Message%20notification%20-%20clarification%20of%20bundle%20content/near/153845220" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Message.20notification.20-.20clarification.20of.20bundle.20content.html#153845220">(Aug 26 2016 at 08:52)</a>:</h4>
<p>and entirely controlled by the sender</p>



<a name="153845221"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Message%20notification%20-%20clarification%20of%20bundle%20content/near/153845221" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Allan Bro Hansen <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Message.20notification.20-.20clarification.20of.20bundle.20content.html#153845221">(Aug 26 2016 at 09:04)</a>:</h4>
<p>true, the subscription-REST makes it possible for the reciever to specify a different appointment ressource than the one we have - the 2 appointments still have to be compatible though.<br>
I didn't address the "what should trigger the event"-part. Subscription also has the message-channel which offer the same possiblity for the receiver to specify a criteria. Still nothing comes out of the box - the sender still has be able to support the criteria (maybe it does, maybe it doesn't)</p>



<a name="153845235"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Message%20notification%20-%20clarification%20of%20bundle%20content/near/153845235" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Message.20notification.20-.20clarification.20of.20bundle.20content.html#153845235">(Aug 26 2016 at 11:33)</a>:</h4>
<p>there's 2 different questions here - how do you decide to notify, and how do you notify?</p>



<a name="153845236"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Message%20notification%20-%20clarification%20of%20bundle%20content/near/153845236" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Message.20notification.20-.20clarification.20of.20bundle.20content.html#153845236">(Aug 26 2016 at 11:34)</a>:</h4>
<p>you can use messaging with subscription - subscription specifies when to notify, and to use messaging. </p>



<a name="153845238"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Message%20notification%20-%20clarification%20of%20bundle%20content/near/153845238" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Message.20notification.20-.20clarification.20of.20bundle.20content.html#153845238">(Aug 26 2016 at 11:34)</a>:</h4>
<p>or you can make some other (hard coded) way to trigger, and notify using either approach</p>



<a name="153845239"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Message%20notification%20-%20clarification%20of%20bundle%20content/near/153845239" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Message.20notification.20-.20clarification.20of.20bundle.20content.html#153845239">(Aug 26 2016 at 11:35)</a>:</h4>
<p>my take was that this was a messaging use case - you should define a message code that descibes the event and package, and use the message framework </p>



<a name="153845259"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Message%20notification%20-%20clarification%20of%20bundle%20content/near/153845259" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Allan Bro Hansen <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Message.20notification.20-.20clarification.20of.20bundle.20content.html#153845259">(Aug 26 2016 at 13:01)</a>:</h4>
<p>Yes, my request for comments was not in respect to "what should trigger the event" but merely  on how to notify.<br>
Grahame, thx for the vote for "messaging". I would like to hear some thoughts on why subscription isn't the right choice, there is clearly an overlap in functionality. <br>
And still there is my question: Is it really expected (mandatory) to include all referenced objects of the appointment?</p>



<a name="153845283"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Message%20notification%20-%20clarification%20of%20bundle%20content/near/153845283" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Message.20notification.20-.20clarification.20of.20bundle.20content.html#153845283">(Aug 26 2016 at 20:16)</a>:</h4>
<p>subscription is about the initiation of the contact. You can specify to use messaging, or not, when you use subscription. </p>



<a name="153845284"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Message%20notification%20-%20clarification%20of%20bundle%20content/near/153845284" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Message.20notification.20-.20clarification.20of.20bundle.20content.html#153845284">(Aug 26 2016 at 20:17)</a>:</h4>
<p>as for aggregation, there's no fixed policy, because requirements will vary</p>



<a name="153845337"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Message%20notification%20-%20clarification%20of%20bundle%20content/near/153845337" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Allan Bro Hansen <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Message.20notification.20-.20clarification.20of.20bundle.20content.html#153845337">(Aug 28 2016 at 21:39)</a>:</h4>
<p>sorry - my question was not precise. A better version of it: why wouldn't you consider notifaction via the REST-API (by doing a PUT appointment - <a href="https://www.hl7.org/fhir/subscription.html#6.14.6.1" target="_blank" title="https://www.hl7.org/fhir/subscription.html#6.14.6.1">https://www.hl7.org/fhir/subscription.html#6.14.6.1</a>), the right choice?</p>



<a name="153845341"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Message%20notification%20-%20clarification%20of%20bundle%20content/near/153845341" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Message.20notification.20-.20clarification.20of.20bundle.20content.html#153845341">(Aug 28 2016 at 22:45)</a>:</h4>
<p>for me, a REST API notification implies a fairly tight binding between the systems, where as the questions around packaging and aggregation imply that the relationship is not that tight, and you need some workflow to manage the interaction.</p>



<a name="153845342"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Message%20notification%20-%20clarification%20of%20bundle%20content/near/153845342" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Message.20notification.20-.20clarification.20of.20bundle.20content.html#153845342">(Aug 28 2016 at 22:45)</a>:</h4>
<p>this points me towards messaging, though it's not a strong feeling, and there would be other considerations,</p>



<a name="153845376"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Message%20notification%20-%20clarification%20of%20bundle%20content/near/153845376" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Allan Bro Hansen <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Message.20notification.20-.20clarification.20of.20bundle.20content.html#153845376">(Aug 29 2016 at 07:49)</a>:</h4>
<p>thank you (I am leaning towards messaging as well)</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
