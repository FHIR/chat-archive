---
layout: page
title: "FHIR Chat  · nesting extensions · conformance"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/index.html">conformance</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/nesting.20extensions.html">nesting extensions</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="167452553"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/nesting%20extensions/near/167452553" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Hay <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/nesting.20extensions.html#167452553">(Jun 06 2019 at 05:05)</a>:</h4>
<p>Has anyone created an extension that is nested more than 2 levels? In theory you can go as deep as you like, but more than 2 seems implementer unfriendly...</p>



<a name="167453138"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/nesting%20extensions/near/167453138" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/nesting.20extensions.html#167453138">(Jun 06 2019 at 05:20)</a>:</h4>
<p>right</p>



<a name="167631967"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/nesting%20extensions/near/167631967" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/nesting.20extensions.html#167631967">(Jun 08 2019 at 03:44)</a>:</h4>
<p>(Frankly two is already pretty painful to work with.)</p>



<a name="179624976"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/nesting%20extensions/near/179624976" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Thomas Tveit Rosenlund <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/nesting.20extensions.html#179624976">(Nov 01 2019 at 13:19)</a>:</h4>
<blockquote>
<p>Has anyone created an extension that is nested more than 2 levels? In theory you can go as deep as you like, but more than 2 seems implementer unfriendly...</p>
</blockquote>
<p>I did make this, and I am not particularly proud of it:</p>
<div class="codehilite"><pre><span></span>&lt;extension url=&quot;http://ehelse.no/fhir/StructureDefinition/gd-person-status&quot;&gt;
        &lt;extension url=&quot;fregPersonStatus&quot;&gt;
            &lt;valueCode value=&quot;bosatt&quot;/&gt;
        &lt;/extension&gt;
        &lt;extension url=&quot;http://ehelse.no/fhir/StructureDefinition/gd-fregmetadata&quot;&gt;
            &lt;extension url=&quot;registeredTimestamp&quot;&gt;
                &lt;valueDateTime value=&quot;2019-09-05T11:17:43.399+02:00&quot;/&gt;
            &lt;/extension&gt;
            &lt;extension url=&quot;currentInfo&quot;&gt;
                &lt;valueBoolean value=&quot;true&quot;/&gt;
            &lt;/extension&gt;
            &lt;extension url=&quot;source&quot;&gt;
                &lt;valueString value=&quot;KILDE_DSF&quot;/&gt;
            &lt;/extension&gt;
            &lt;extension url=&quot;validFrom&quot;&gt;
                &lt;valueDateTime value=&quot;2019-09-05T11:17:43.399+02:00&quot;/&gt;
            &lt;/extension&gt;
        &lt;/extension&gt;
    &lt;/extension&gt;
</pre></div>


<p>The big problem is that I can't make it validate. And I can't figure out why. <span class="user-mention" data-user-id="191321">@David Hay</span> <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> </p>
<p>The official validator claims there is no matching slice for the nested extension "<a href="http://ehelse.no/fhir/StructureDefinition/gd-fregmetadata" target="_blank" title="http://ehelse.no/fhir/StructureDefinition/gd-fregmetadata">http://ehelse.no/fhir/StructureDefinition/gd-fregmetadata</a>":</p>
<div class="codehilite"><pre><span></span>Success...validating gd-Person-04021950128-version-2.xml:  error:0 warn:0 info:1
  Information @ Person.extension[0].extension[1] (line 10, col78) : This element does not match any known slice for the profile http://ehelse.no/fhir/StructureDefinition/gd-person-status
</pre></div>


<p>The full example as well as the conformance resources are posted on GitHub: <a href="https://github.com/HL7Norway/Grunndata-profiles" target="_blank" title="https://github.com/HL7Norway/Grunndata-profiles">https://github.com/HL7Norway/Grunndata-profiles</a></p>



<a name="179661999"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/nesting%20extensions/near/179661999" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/nesting.20extensions.html#179661999">(Nov 01 2019 at 20:24)</a>:</h4>
<p>is that today? or before the upgrade?</p>



<a name="179662028"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/nesting%20extensions/near/179662028" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/nesting.20extensions.html#179662028">(Nov 01 2019 at 20:25)</a>:</h4>
<p>validating extension slices is generally a problem right now after the technical corrections - I'll be working on fixing that today</p>



<a name="179675543"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/nesting%20extensions/near/179675543" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/nesting.20extensions.html#179675543">(Nov 02 2019 at 00:02)</a>:</h4>
<p>(deleted)</p>



<a name="179911094"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/nesting%20extensions/near/179911094" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Thomas Tveit Rosenlund <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/nesting.20extensions.html#179911094">(Nov 05 2019 at 08:34)</a>:</h4>
<blockquote>
<p>is that today? or before the upgrade?</p>
</blockquote>
<p>Yes that was november 1, downloaded the new validator today v4.0.31. And still get this error on the example: <a href="https://github.com/HL7Norway/Grunndata-profiles/blob/master/examples/gd-Person-04021950128-version-2.xml" target="_blank" title="https://github.com/HL7Norway/Grunndata-profiles/blob/master/examples/gd-Person-04021950128-version-2.xml">https://github.com/HL7Norway/Grunndata-profiles/blob/master/examples/gd-Person-04021950128-version-2.xml</a></p>



<a name="180203314"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/nesting%20extensions/near/180203314" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/nesting.20extensions.html#180203314">(Nov 08 2019 at 05:09)</a>:</h4>
<p>can you add it as a test case to <a href="https://github.com/FHIR/fhir-test-cases/validator" target="_blank" title="https://github.com/FHIR/fhir-test-cases/validator">https://github.com/FHIR/fhir-test-cases/validator</a> ?</p>



<a name="180207403"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/nesting%20extensions/near/180207403" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Keith Boone <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/nesting.20extensions.html#180207403">(Nov 08 2019 at 07:02)</a>:</h4>
<blockquote>
<blockquote>
<p>Has anyone created an extension that is nested more than 2 levels? In theory you can go as deep as you like, but more than 2 seems implementer unfriendly...</p>
</blockquote>
<p>I did make this, and it's just as unfriendly, but generally computable and easy to generate.  Not even going to try to validate it though.  I use it internally to show me how something got produced when mapping from V2 to FHIR, it never goes beyond my converter.</p>
<div class="codehilite"><pre><span></span>        &lt;reference value=&quot;DiagnosticOrder/efe37c6bacb5-b8a8-4121-a12f-af41419e&quot;&gt;
              &lt;extension url=&quot;http://ainq.com/fhir/v2/target&quot;&gt;
                 &lt;extension url=&quot;Path&quot;&gt;
                    &lt;valueUri value=&quot;#subject&quot;&gt;&lt;/valueUri&gt;
                 &lt;/extension&gt;
                 &lt;extension url=&quot;Source&quot;&gt;
                    &lt;extension url=&quot;Location&quot;&gt;
                       &lt;valueString value=&quot;/PATIENT_RESULT(0)/ORDER_OBSERVATION(0)/COMMON_ORDER/ORC&quot;&gt;&lt;/valueString&gt;
                    &lt;/extension&gt;
                    &lt;extension url=&quot;Rule&quot;&gt;
                       &lt;valueString value=&quot;ORC-&gt;DiagnosticOrder&quot;&gt;&lt;/valueString&gt;
                    &lt;/extension&gt;
                 &lt;/extension&gt;
                 &lt;extension url=&quot;Source&quot;&gt;
                    &lt;extension url=&quot;Location&quot;&gt;
                       &lt;valueString value=&quot;/PATIENT_RESULT(0)/PATIENT/PID&quot;&gt;&lt;/valueString&gt;
                    &lt;/extension&gt;
                    &lt;extension url=&quot;Rule&quot;&gt;
                       &lt;valueString value=&quot;PID-&gt;Patient&quot;&gt;&lt;/valueString&gt;
                    &lt;/extension&gt;
                 &lt;/extension&gt;
</pre></div>


</blockquote>



<a name="180415821"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/nesting%20extensions/near/180415821" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Thomas Tveit Rosenlund <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/nesting.20extensions.html#180415821">(Nov 11 2019 at 11:38)</a>:</h4>
<blockquote>
<p>can you add it as a test case to <a href="https://github.com/FHIR/fhir-test-cases/validator" target="_blank" title="https://github.com/FHIR/fhir-test-cases/validator">https://github.com/FHIR/fhir-test-cases/validator</a> ?</p>
</blockquote>
<p>I could do that, but I don't think it would be very helpful without all the relevant profiles that example actually relies on:<br>
<a href="https://github.com/HL7Norway/Grunndata-profiles/tree/master/for-validation-gd-r4" target="_blank" title="https://github.com/HL7Norway/Grunndata-profiles/tree/master/for-validation-gd-r4">https://github.com/HL7Norway/Grunndata-profiles/tree/master/for-validation-gd-r4</a></p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
