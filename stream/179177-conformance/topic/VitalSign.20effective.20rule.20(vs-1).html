---
layout: page
title: "FHIR Chat  · VitalSign effective rule (vs-1) · conformance"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/index.html">conformance</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/VitalSign.20effective.20rule.20(vs-1).html">VitalSign effective rule (vs-1)</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="270168501"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/VitalSign%20effective%20rule%20%28vs-1%29/near/270168501" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Thomas Papke <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/VitalSign.20effective.20rule.20(vs-1).html#270168501">(Feb 01 2022 at 08:31)</a>:</h4>
<p>For the vitalsign profile, the rule "vs-1" requires that effective datetimes "shall be precise to the day".</p>
<p>Is this intended to be shall be at least date granularity or exactly date only?</p>
<p>Having a Vitalsign observation with</p>
<p>"effectivePeriod": {<br>
    "start": "2021-11-08T10:00:00+01:00",<br>
    "end": "2021-11-08T11:00:00+01:00"<br>
  }</p>
<p>Is this "valid"? </p>
<p>At least hapi currently complain about this date. The validation seems to allow a date only.<br>
<a href="https://github.com/hapifhir/hapi-fhir/blob/master/hapi-fhir-validation-resources-r4/src/main/resources/org/hl7/fhir/r4/model/schema/vitalsigns.sch#L56">https://github.com/hapifhir/hapi-fhir/blob/master/hapi-fhir-validation-resources-r4/src/main/resources/org/hl7/fhir/r4/model/schema/vitalsigns.sch#L56</a></p>
<p>Is the validation in hapi too strict here or this expected behavior?</p>



<a name="270177755"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/VitalSign%20effective%20rule%20%28vs-1%29/near/270177755" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/VitalSign.20effective.20rule.20(vs-1).html#270177755">(Feb 01 2022 at 09:41)</a>:</h4>
<p>the formal definition of the invariant is <code>($this as dateTime).toString().length() &gt;= 8</code></p>



<a name="270178043"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/VitalSign%20effective%20rule%20%28vs-1%29/near/270178043" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/VitalSign.20effective.20rule.20(vs-1).html#270178043">(Feb 01 2022 at 09:44)</a>:</h4>
<p>but the schematron doesn't specify the end pattern must match. So the schematron looks right to me</p>



<a name="270345525"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/VitalSign%20effective%20rule%20%28vs-1%29/near/270345525" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Thomas Papke <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/VitalSign.20effective.20rule.20(vs-1).html#270345525">(Feb 02 2022 at 07:47)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> : Thank you for verifing. If the specification and the schematron are valid, i am still wondering wheter the mentioned example is valid or not? Currently a vitalsign with the given effectivePeriod above is rejected by the schematron rule:</p>
<p>"severity": "error",<br>
         "code": "processing",<br>
         "diagnostics": "vs-1: 'if Observation.effective[x] is dateTime and has a value then that value shall be precise to the day' Rule 'if Observation.effective[x] is dateTime and has a value then that value shall be precise to the day' Failed",<br>
         "location":          [<br>
            "Observation.effective.ofType(Period)",<br>
            "Line 3, Col 42"<br>
         ]</p>



<a name="270354910"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/VitalSign%20effective%20rule%20%28vs-1%29/near/270354910" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/VitalSign.20effective.20rule.20(vs-1).html#270354910">(Feb 02 2022 at 09:22)</a>:</h4>
<p>it shouldn't be rejected</p>



<a name="270363430"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/VitalSign%20effective%20rule%20%28vs-1%29/near/270363430" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Julian Sass <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/VitalSign.20effective.20rule.20(vs-1).html#270363430">(Feb 02 2022 at 10:35)</a>:</h4>
<p>I think the problem is in the vitalsign profile that the "vs-1" invariant is defined on <code>effective[x]</code> but should be on <code>effectiveDateTime</code> to work. Because <code>$this as dateTime</code> returns an empty result if <code>$this</code> is of type Period.</p>



<a name="270449389"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/VitalSign%20effective%20rule%20%28vs-1%29/near/270449389" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/VitalSign.20effective.20rule.20(vs-1).html#270449389">(Feb 02 2022 at 20:07)</a>:</h4>
<p>oh interesting. Yes, that'll be the problem, and HAPI will be using the FHIRPath not the schematron - I should've paid attention to that.</p>



<a name="270548571"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/VitalSign%20effective%20rule%20%28vs-1%29/near/270548571" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Thomas Papke <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/VitalSign.20effective.20rule.20(vs-1).html#270548571">(Feb 03 2022 at 13:30)</a>:</h4>
<p>Hello <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> . If i understand your remark correctly, this is a short bug in hapi and it make sense to create a ticket for this in hapi?</p>



<a name="270555972"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/VitalSign%20effective%20rule%20%28vs-1%29/near/270555972" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Zautke <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/VitalSign.20effective.20rule.20(vs-1).html#270555972">(Feb 03 2022 at 14:22)</a>:</h4>
<p>It's a bug in the specification. See <a href="https://jira.hl7.org/browse/FHIR-29654">https://jira.hl7.org/browse/FHIR-29654</a></p>



<a name="270556188"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/VitalSign%20effective%20rule%20%28vs-1%29/near/270556188" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Zautke <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/VitalSign.20effective.20rule.20(vs-1).html#270556188">(Feb 03 2022 at 14:23)</a>:</h4>
<p>It's a bit worrying that we are moving towards R5 and this change has not been applied yet</p>



<a name="270565623"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/VitalSign%20effective%20rule%20%28vs-1%29/near/270565623" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/VitalSign.20effective.20rule.20(vs-1).html#270565623">(Feb 03 2022 at 15:22)</a>:</h4>
<p>We have 800 outstanding unapplied change requests.  Volunteers to help are welcome...</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
