---
layout: page
title: "FHIR Chat  · type slicing ordered · conformance"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/index.html">conformance</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/type.20slicing.20ordered.html">type slicing ordered</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="195400232"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/type%20slicing%20ordered/near/195400232" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/type.20slicing.20ordered.html#195400232">(Apr 27 2020 at 10:49)</a>:</h4>
<p>The Java Validator throws an error if you have a ordered type slicing (slicing like this doesn't make a lot of sense in the first place). The .net validator (Simplifier) accepts ordered type slicing.<br>
I think it could make sense to add a constraint on discriminator to raise at least a warning if you want to do ordered type slicing.</p>



<a name="195402158"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/type%20slicing%20ordered/near/195402158" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/type.20slicing.20ordered.html#195402158">(Apr 27 2020 at 11:13)</a>:</h4>
<p>it's actually the snapshot generator, though that doesn't really matter</p>



<a name="195402195"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/type%20slicing%20ordered/near/195402195" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/type.20slicing.20ordered.html#195402195">(Apr 27 2020 at 11:14)</a>:</h4>
<p>I declined to support because I have no idea what it means to claim that they are ordered</p>



<a name="195428751"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/type%20slicing%20ordered/near/195428751" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/type.20slicing.20ordered.html#195428751">(Apr 27 2020 at 14:53)</a>:</h4>
<p>There could only be meaning if polymorphic types could be repeating - and they can't.  So I think asserting ordered type slicing as an error is reasonable.</p>



<a name="195429014"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/type%20slicing%20ordered/near/195429014" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/type.20slicing.20ordered.html#195429014">(Apr 27 2020 at 14:55)</a>:</h4>
<p>Actually, let me re-think that.  If the profile reaches through a repeating path, it could make sense.  E.g. entry.resource.  In that case, you'd be asserting that some resources needed to appear before other resources.  (Though whether that's a legal thing to do is unclear.  It's certainly a questionable practice...  In fact, using ordered slicing on any element where order doesn't have defined meaning is pretty questionable.)</p>



<a name="195471343"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/type%20slicing%20ordered/near/195471343" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/type.20slicing.20ordered.html#195471343">(Apr 27 2020 at 20:31)</a>:</h4>
<p>doesn't apply to entry resource, since that's not a choice of types</p>



<a name="195545586"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/type%20slicing%20ordered/near/195545586" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/type.20slicing.20ordered.html#195545586">(Apr 28 2020 at 10:44)</a>:</h4>
<p>do we need an invariant for this? <span class="user-mention" data-user-id="203235">@Ward Weistra</span></p>



<a name="195575958"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/type%20slicing%20ordered/near/195575958" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ward Weistra <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/type.20slicing.20ordered.html#195575958">(Apr 28 2020 at 14:55)</a>:</h4>
<p><span class="user-mention" data-user-id="191451">@Patrick Werner</span> Sounds fair to me, though not an expert. Can you suggest it on <a href="https://github.com/FirelyTeam/fhir-net-api/" title="https://github.com/FirelyTeam/fhir-net-api/">https://github.com/FirelyTeam/fhir-net-api/</a> so our API team can consider?</p>



<a name="195576120"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/type%20slicing%20ordered/near/195576120" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/type.20slicing.20ordered.html#195576120">(Apr 28 2020 at 14:56)</a>:</h4>
<p>Sure. To be safe in the future i think we should add this as an error invariant.</p>



<a name="195667808"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/type%20slicing%20ordered/near/195667808" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/type.20slicing.20ordered.html#195667808">(Apr 29 2020 at 07:00)</a>:</h4>
<p>Ok. Gave it some more thought. Some (German) Implementers love the ordered slicing on type. They use it to express stuff like: "First Practitioner is sending the patient, second Practitioner is receiving the patient". They use it to give semantical meaning on Resources they can't distinguish by a code or other criteria.</p>



<a name="195667869"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/type%20slicing%20ordered/near/195667869" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/type.20slicing.20ordered.html#195667869">(Apr 29 2020 at 07:01)</a>:</h4>
<p>I can follow that thought, it looks good in Simplifier to have a defined order if you have no other criteria to slice on.</p>



<a name="195668005"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/type%20slicing%20ordered/near/195668005" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/type.20slicing.20ordered.html#195668005">(Apr 29 2020 at 07:02)</a>:</h4>
<p>But validating such ordered type slicings is impossible. That's why <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> is not supporting it. Right?</p>



<a name="195668181"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/type%20slicing%20ordered/near/195668181" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/type.20slicing.20ordered.html#195668181">(Apr 29 2020 at 07:04)</a>:</h4>
<p>Open Question: Should ordered slicing on type be prohibited by an error invariant, so StrucDefs using it won't validate? Or should this be 'legal' and the Validator throws a warning when validating an instance saying: i can't validate this ? Or even just ignores it.</p>



<a name="195668216"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/type%20slicing%20ordered/near/195668216" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/type.20slicing.20ordered.html#195668216">(Apr 29 2020 at 07:05)</a>:</h4>
<p>As Simplifier doesn't raise an error on this i'm interested on <span class="user-mention" data-user-id="191328">@Ewout Kramer</span> s opinion on this.</p>



<a name="195669341"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/type%20slicing%20ordered/near/195669341" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/type.20slicing.20ordered.html#195669341">(Apr 29 2020 at 07:18)</a>:</h4>
<p>I think being able to do something in the .Net stack and getting Exceptions for the same in the Java stack is not good for FHIR and interoperability.</p>



<a name="195672628"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/type%20slicing%20ordered/near/195672628" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/type.20slicing.20ordered.html#195672628">(Apr 29 2020 at 07:53)</a>:</h4>
<blockquote>
<p>They use it to express stuff like: "First Practitioner is sending the patient, second Practitioner is receiving the patient"</p>
</blockquote>
<p>This is not slicing on type</p>



<a name="195675471"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/type%20slicing%20ordered/near/195675471" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/type.20slicing.20ordered.html#195675471">(Apr 29 2020 at 08:23)</a>:</h4>
<p>I'm not sure what you are implying. Here is an example: <a href="https://simplifier.net/patrickssandbox/myobservation" title="https://simplifier.net/patrickssandbox/myobservation">https://simplifier.net/patrickssandbox/myobservation</a><br>
closed type based ordered slicing on derivedFrom()</p>



<a name="195675623"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/type%20slicing%20ordered/near/195675623" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mareike Przysucha <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/type.20slicing.20ordered.html#195675623">(Apr 29 2020 at 08:25)</a>:</h4>
<p>But those are both normal Observations. If you get an observation, how do you distinguish whether it's obs1 or obs2?</p>



<a name="195676882"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/type%20slicing%20ordered/near/195676882" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/type.20slicing.20ordered.html#195676882">(Apr 29 2020 at 08:40)</a>:</h4>
<p>first one is obs1, second obs2. Sliced by type, defined order. Not saying that i like this, or this is good practice. Just pointing to the fact that some people are using it that way.</p>



<a name="195676948"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/type%20slicing%20ordered/near/195676948" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/type.20slicing.20ordered.html#195676948">(Apr 29 2020 at 08:41)</a>:</h4>
<p>Yes proper validation isn't possible, as you never know if someone changed the order. So a computer can't validate this, but extensible is also not validateable by a computer.</p>



<a name="195676953"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/type%20slicing%20ordered/near/195676953" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mareike Przysucha <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/type.20slicing.20ordered.html#195676953">(Apr 29 2020 at 08:41)</a>:</h4>
<p>sorry, I did not see the cardinalities.</p>



<a name="195677008"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/type%20slicing%20ordered/near/195677008" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/type.20slicing.20ordered.html#195677008">(Apr 29 2020 at 08:41)</a>:</h4>
<p>My goal is consistency between .net, (Simplifier/Forge) and the Java Stack</p>



<a name="195683754"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/type%20slicing%20ordered/near/195683754" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/type.20slicing.20ordered.html#195683754">(Apr 29 2020 at 09:44)</a>:</h4>
<p>so <code>derivedFrom</code> is a Reference with cardinality 0..* This is <em>not type slicing</em></p>



<a name="195686076"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/type%20slicing%20ordered/near/195686076" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/type.20slicing.20ordered.html#195686076">(Apr 29 2020 at 10:02)</a>:</h4>
<p><span aria-label="scream" class="emoji emoji-1f631" role="img" title="scream">:scream:</span> i'm confused now.</p>



<a name="195686824"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/type%20slicing%20ordered/near/195686824" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/type.20slicing.20ordered.html#195686824">(Apr 29 2020 at 10:08)</a>:</h4>
<p>type slicing is when you have something like <code>Observation.value[x]</code> and you have a slice for <code>string</code> and a slice for <code>CodeableConcept</code></p>



<a name="195686851"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/type%20slicing%20ordered/near/195686851" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/type.20slicing.20ordered.html#195686851">(Apr 29 2020 at 10:09)</a>:</h4>
<p>cardinality is 0..1, and so there's no repeats and you can't talk about order.</p>



<a name="195686858"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/type%20slicing%20ordered/near/195686858" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/type.20slicing.20ordered.html#195686858">(Apr 29 2020 at 10:09)</a>:</h4>
<p>Observation.derivedFrom, of course you need to be able to talk about order</p>



<a name="195686947"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/type%20slicing%20ordered/near/195686947" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/type.20slicing.20ordered.html#195686947">(Apr 29 2020 at 10:10)</a>:</h4>
<p>ohhh. Just learned something. Thanks.</p>



<a name="195701043"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/type%20slicing%20ordered/near/195701043" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/type.20slicing.20ordered.html#195701043">(Apr 29 2020 at 12:34)</a>:</h4>
<p>i'm totally confused now. Sorry. Looking at: <a href="https://www.hl7.org/fhir/profiling.html#discriminator" title="https://www.hl7.org/fhir/profiling.html#discriminator">https://www.hl7.org/fhir/profiling.html#discriminator</a><br>
I see:</p>
<blockquote>
<p>Used to match slices based on the type of the item. While it can be used with polymorphic elements such as Observation.value[x], mostly it is used with Resource types on references, to apply different profiles based on the different resource type. Typical example: slice on the type of List.item.resolve() for the types Patient, RelatedPerson.</p>
</blockquote>



<a name="195701273"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/type%20slicing%20ordered/near/195701273" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/type.20slicing.20ordered.html#195701273">(Apr 29 2020 at 12:37)</a>:</h4>
<p>Which says i can use this for reference types. (Doesn't say anything about 'can only be used on references with max card. =1 )</p>



<a name="195701342"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/type%20slicing%20ordered/near/195701342" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/type.20slicing.20ordered.html#195701342">(Apr 29 2020 at 12:37)</a>:</h4>
<p>I also couldn't find another possibility to slice references based on the target reference type (not profile, just core type)</p>



<a name="195712399"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/type%20slicing%20ordered/near/195712399" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/type.20slicing.20ordered.html#195712399">(Apr 29 2020 at 13:56)</a>:</h4>
<p>The Germans shouldn't assign meaning to the order when the core spec doesn't define order to have meaning - doing so is non-conformant.  If there's a different semantic between repetitions, then expose it in the instance and continue to allow the data to be sent in arbitrary order.  Imposing order (and meaning on order) where the spec says there isn't any is contrary to interoperability and sometimes dangerous</p>



<a name="195713106"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/type%20slicing%20ordered/near/195713106" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/type.20slicing.20ordered.html#195713106">(Apr 29 2020 at 14:00)</a>:</h4>
<p>I agree. Thats why i think there should be an invariant or a warning from the Validator itself on this to give explicit guidance. The non-conformancy isn't stated explicitly on the slicing page.</p>
<p>On the other hand, Grahame said:</p>
<blockquote>
<p>Observation.derivedFrom, of course you need to be able to talk about order</p>
</blockquote>
<p>Which i interpret as its ok to talk about order in a list.</p>
<p>What's your opinion on slicing on a target type?</p>



<a name="195759316"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/type%20slicing%20ordered/near/195759316" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/type.20slicing.20ordered.html#195759316">(Apr 29 2020 at 19:33)</a>:</h4>
<p>yes you need to slice in target type. I can see that the language here is confusing - by "type based slicing" I meant, slicing an element that has a choice of types, not using a "type" discriminator</p>



<a name="195802317"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/type%20slicing%20ordered/near/195802317" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/type.20slicing.20ordered.html#195802317">(Apr 30 2020 at 06:30)</a>:</h4>
<p><span aria-label="relieved" class="emoji emoji-1f60c" role="img" title="relieved">:relieved:</span> ok. Thats a relief.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
