---
layout: page
title: "FHIR Chat  · Snapshot and extensions · conformance"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/index.html">conformance</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Snapshot.20and.20extensions.html">Snapshot and extensions</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="171434380"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Snapshot%20and%20extensions/near/171434380" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Snapshot.20and.20extensions.html#171434380">(Jul 22 2019 at 14:19)</a>:</h4>
<p>Question about the sparse representation of profile extensions in the <code>StructureDefinition.snapshot</code> component:</p>
<p>The snapshot generator implementation in the .NET FHIR API library no longer includes the child elements <code>.extension.id</code>, <code>.extension.url</code> &amp; <code>.extension.value</code> of a referenced extension in the generated snapshot by default, unless the containing profile explicitly specifies one or more constraints on those extension child elements.</p>
<p>Example:</p>
<div class="codehilite"><pre><span></span>Patient
  Patient.extension:myPatientExtension, type.profile=&quot;http://example.org/fhir/StructureDefinition/MyPatientExtension&quot;
    (OMITTED: Patient.extension.id)
    (OMITTED: Patient.extension.url, fixedUri = &quot;http://example.org/fhir/StructureDefinition/MyPatientExtension&quot;)
    (OMITTED: Patient.extension.valueString)
  Patient.identifier
</pre></div>


<p>This behavior conforms to generic rules for generating snapshots; include constrained elements with all their siblings and parents, exclude others. The omitted information is redundant and can be resolved from the referenced extension definition (via <code>type.profile</code>). Processing systems can resolve the target extension and further expand the snapshot on demand. Omitting redundant info significantly decreases the file size of profiles with extensions.</p>
<p>However, I am wondering if our current implementation might break some (less capable) systems? Specifically, do systems expect the <code>.extension.url</code> element to always be present in the snapshot? Or should all systems be capable of resolving the redundant information from the referenced extension definitions?</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
