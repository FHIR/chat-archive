---
layout: page
title: "FHIR Chat  · JSON serialization and arrays · conformance"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/index.html">conformance</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/JSON.20serialization.20and.20arrays.html">JSON serialization and arrays</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="240219458"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/JSON%20serialization%20and%20arrays/near/240219458" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gino Canessa <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/JSON.20serialization.20and.20arrays.html#240219458">(May 25 2021 at 17:06)</a>:</h4>
<p>Hi all, I have a question about JSON serialization on primitive arrays.  By my reading on the <a href="http://hl7.org/fhir/json.html">JSON Page</a>, primitive arrays are supposed to be serialized as <code>null</code> values if elements have extensions.</p>
<p>Looking at the <code>administer-zika-virus-exposure-assessment.json</code> file in the R4 examples package, I see the following:</p>
<div class="codehilite" data-code-language="JSON"><pre><span></span><code>  <span class="nt">"timingTiming"</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">"_event"</span><span class="p">:</span> <span class="p">[</span>
      <span class="p">{</span>
        <span class="nt">"extension"</span><span class="p">:</span> <span class="p">[</span>
          <span class="p">{</span>
            <span class="nt">"url"</span><span class="p">:</span> <span class="s2">"http://hl7.org/fhir/StructureDefinition/cqf-expression"</span><span class="p">,</span>
            <span class="nt">"valueExpression"</span><span class="p">:</span> <span class="p">{</span>
              <span class="nt">"language"</span><span class="p">:</span> <span class="s2">"text/cql"</span><span class="p">,</span>
              <span class="nt">"expression"</span><span class="p">:</span> <span class="s2">"Now()"</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">]</span>
      <span class="p">}</span>
    <span class="p">]</span>
  <span class="p">},</span>
</code></pre></div>
<p>I believe it should be serialized as:</p>
<div class="codehilite" data-code-language="JSON"><pre><span></span><code>  <span class="nt">"timingTiming"</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">"event"</span><span class="p">:</span> <span class="p">[</span>
      <span class="kc">null</span>
    <span class="p">],</span>
    <span class="nt">"_event"</span><span class="p">:</span> <span class="p">[</span>
      <span class="p">{</span>
        <span class="nt">"extension"</span><span class="p">:</span> <span class="p">[</span>
          <span class="p">{</span>
            <span class="nt">"url"</span><span class="p">:</span> <span class="s2">"http://hl7.org/fhir/StructureDefinition/cqf-expression"</span><span class="p">,</span>
            <span class="nt">"valueExpression"</span><span class="p">:</span> <span class="p">{</span>
              <span class="nt">"language"</span><span class="p">:</span> <span class="s2">"text/cql"</span><span class="p">,</span>
              <span class="nt">"expression"</span><span class="p">:</span> <span class="s2">"Now()"</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">]</span>
      <span class="p">}</span>
    <span class="p">]</span>
  <span class="p">},</span>
</code></pre></div>
<p>Thoughts?</p>



<a name="240222497"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/JSON%20serialization%20and%20arrays/near/240222497" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/JSON.20serialization.20and.20arrays.html#240222497">(May 25 2021 at 17:30)</a>:</h4>
<p>lazy on the nulls; the last ones are dropped</p>



<a name="240222521"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/JSON%20serialization%20and%20arrays/near/240222521" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/JSON.20serialization.20and.20arrays.html#240222521">(May 25 2021 at 17:30)</a>:</h4>
<p>you could make a task for us to be more explicit about that</p>



<a name="240222560"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/JSON%20serialization%20and%20arrays/near/240222560" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gino Canessa <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/JSON.20serialization.20and.20arrays.html#240222560">(May 25 2021 at 17:30)</a>:</h4>
<p>So even on arrays, it should be removed?  If so, I'll add a ticket to update the documentation.</p>



<a name="240261562"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/JSON%20serialization%20and%20arrays/near/240261562" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/JSON.20serialization.20and.20arrays.html#240261562">(May 25 2021 at 23:07)</a>:</h4>
<p>well, I do remove it when writing but it's OK for it to be present when reading in my implementations</p>



<a name="240261945"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/JSON%20serialization%20and%20arrays/near/240261945" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gino Canessa <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/JSON.20serialization.20and.20arrays.html#240261945">(May 25 2021 at 23:13)</a>:</h4>
<p>Hmm. I’ll file a ticket for clarification either way - it’s normative, so we should be specific on the behavior</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
