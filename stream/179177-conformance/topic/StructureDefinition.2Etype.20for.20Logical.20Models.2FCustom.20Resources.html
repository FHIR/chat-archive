---
layout: page
title: "FHIR Chat  · StructureDefinition.type for Logical Models/Custom Resources · conformance"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/index.html">conformance</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/StructureDefinition.2Etype.20for.20Logical.20Models.2FCustom.20Resources.html">StructureDefinition.type for Logical Models/Custom Resources</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="240121960"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/StructureDefinition.type%20for%20Logical%20Models/Custom%20Resources/near/240121960" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/StructureDefinition.2Etype.20for.20Logical.20Models.2FCustom.20Resources.html#240121960">(May 24 2021 at 22:38)</a>:</h4>
<p>I'm trying to determine rules for <code>StructureDefinition.type</code> as it pertains to specializations.  The definition of <code>StructureDefinition.type</code> includes the following:</p>
<blockquote>
<p>References are URLs that are relative to <a href="http://hl7.org/fhir/StructureDefinition">http://hl7.org/fhir/StructureDefinition</a> e.g. "string" is a reference to <a href="http://hl7.org/fhir/StructureDefinition/string">http://hl7.org/fhir/StructureDefinition/string</a>. Absolute URLs are only allowed in logical models.</p>
</blockquote>
<ol>
<li>
<p>This says that when <code>type</code> is relative, it is relative to <code>http://hl7.org/fhir/StructureDefinition</code>, and since (I <em>think</em>) the tail end of the canonical URL is supposed to be the SD's <code>id</code>, that seems to imply that <code>type</code> == <code>id</code>.  Is that implication correct or am I reading too much into it?</p>
</li>
<li>
<p>I've seen some logical models where the <code>type</code> does not match the <code>id</code>, but it does match the <code>name</code>.  Is this expected? Is that even a sensible question?  Am I just wrong in thinking that <code>type</code> somehow relates to <code>id</code> or <code>name</code> for specializations?</p>
</li>
<li>
<p>Since custom resources are not logical models, and logical models are the only ones allowed to use absolute URLs for <code>type</code>, does that imply that custom resources should have a <code>url</code> starting with <code>http://hl7.org/fhir/StructureDefinition/</code>?  Or does the implied URL of the <code>type</code> and the canonical URL of the custom resource not have to be the same?</p>
</li>
<li>
<p>Similarly, my experience has been that many logical model definitions do <em>not</em> use absolute URLs for their <code>type</code> value.  Does this also imply that their URLs should start with <code>http://hl7.org/fhir/StructureDefinition/</code> and should be unique in that namespace (which seems not to be feasible to me)?  Or are those logical models just wrong to specify a type that is not an absolute URL?</p>
</li>
<li>
<p>Do these questions even make sense? ;-)</p>
</li>
</ol>



<a name="240123702"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/StructureDefinition.type%20for%20Logical%20Models/Custom%20Resources/near/240123702" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/StructureDefinition.2Etype.20for.20Logical.20Models.2FCustom.20Resources.html#240123702">(May 24 2021 at 22:58)</a>:</h4>
<p>#1 type = id for HL7 defined StructureDefinitions when published by HL7. But that may not be true as soon as they are hosted on any other server, since id is under local control</p>
<p>#2 technically, name is the name of the definition of the type, and type is the name of the type. But those are hardly ever different</p>
<p>#3 I'm not sure I understand this question. There is no implied URL of the type except for <a href="http://hl7.org/fhir/StructureDefinition">hl7.org/fhir/StructureDefinition</a>, and we're the only ones allowed to publish in that space </p>
<p>#4 "many logical model definitions do not use absolute URLs for their type value" - should be corrected</p>



<a name="240488388"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/StructureDefinition.type%20for%20Logical%20Models/Custom%20Resources/near/240488388" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/StructureDefinition.2Etype.20for.20Logical.20Models.2FCustom.20Resources.html#240488388">(May 27 2021 at 15:48)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> -- just to ensure we're on the same page...  Re: #4, are you saying that logical models should always use an absolute URL as their <code>StructureDefinition.type</code>?  In other words, for logical models, is using an absolute URL as the <code>StructureDefinition.type</code> (a) required, (b) best practice, or (c) totally optional?</p>



<a name="240491154"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/StructureDefinition.type%20for%20Logical%20Models/Custom%20Resources/near/240491154" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/StructureDefinition.2Etype.20for.20Logical.20Models.2FCustom.20Resources.html#240491154">(May 27 2021 at 16:06)</a>:</h4>
<p>(a) required.</p>



<a name="240491204"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/StructureDefinition.type%20for%20Logical%20Models/Custom%20Resources/near/240491204" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/StructureDefinition.2Etype.20for.20Logical.20Models.2FCustom.20Resources.html#240491204">(May 27 2021 at 16:06)</a>:</h4>
<p>unless HL7 publishes them.</p>



<a name="240492757"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/StructureDefinition.type%20for%20Logical%20Models/Custom%20Resources/near/240492757" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/StructureDefinition.2Etype.20for.20Logical.20Models.2FCustom.20Resources.html#240492757">(May 27 2021 at 16:14)</a>:</h4>
<p>Did you recently fix something related to this in the IG Publisher?  We are implementing this and it seems that some people running an older version of the publisher (1.1.64) ran into issues, but it seemed to work fine for me (using 1.1.72).</p>



<a name="240492873"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/StructureDefinition.type%20for%20Logical%20Models/Custom%20Resources/near/240492873" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/StructureDefinition.2Etype.20for.20Logical.20Models.2FCustom.20Resources.html#240492873">(May 27 2021 at 16:15)</a>:</h4>
<p>Not positive we can attribute the differences to the publisher (needs more investigation), but if you confirm there was a recent fix, then that would solve the mystery.</p>



<a name="240493129"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/StructureDefinition.type%20for%20Logical%20Models/Custom%20Resources/near/240493129" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Zautke <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/StructureDefinition.2Etype.20for.20Logical.20Models.2FCustom.20Resources.html#240493129">(May 27 2021 at 16:17)</a>:</h4>
<p>Having discussed this <a href="#narrow/stream/179177-conformance/topic/StructureDefinition.2Etype.20for.20logical.20model.3F">before</a>, I think that we should clarify in a tracker item if "For logical models, where the type is a URL, the type name SHOULD start with the tail of the type URL where required." implies a SHALL requirement for StructureDefinition.type to be an absolute url. See description for <a href="https://www.hl7.org/fhir/structuredefinition-definitions.html#StructureDefinition.type">StructureDefiniton.type</a>.</p>



<a name="240493401"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/StructureDefinition.type%20for%20Logical%20Models/Custom%20Resources/near/240493401" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Zautke <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/StructureDefinition.2Etype.20for.20Logical.20Models.2FCustom.20Resources.html#240493401">(May 27 2021 at 16:19)</a>:</h4>
<p>Forge for example does not enforce an absolute url here, it will just give the user a warning</p>



<a name="240493518"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/StructureDefinition.type%20for%20Logical%20Models/Custom%20Resources/near/240493518" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/StructureDefinition.2Etype.20for.20Logical.20Models.2FCustom.20Resources.html#240493518">(May 27 2021 at 16:20)</a>:</h4>
<p>yes i changed something recently</p>



<a name="240493555"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/StructureDefinition.type%20for%20Logical%20Models/Custom%20Resources/near/240493555" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/StructureDefinition.2Etype.20for.20Logical.20Models.2FCustom.20Resources.html#240493555">(May 27 2021 at 16:20)</a>:</h4>
<p><span class="user-mention" data-user-id="193430">@Alexander Zautke</span> is there a task for this?</p>



<a name="240493570"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/StructureDefinition.type%20for%20Logical%20Models/Custom%20Resources/near/240493570" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/StructureDefinition.2Etype.20for.20Logical.20Models.2FCustom.20Resources.html#240493570">(May 27 2021 at 16:20)</a>:</h4>
<p>Right, we have seen some confusion where people interpreted "absolute URLs are only allowed in logical models" as being optional ("allowed" vs "required").  If you consider the preceding statements (that relative URLs are relative to "<a href="http://hl7.org/fhir/StructureDefinition/">http://hl7.org/fhir/StructureDefinition/</a>") it kind of makes sense, but I think we could be more explicit to reduce confusion.</p>



<a name="240494207"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/StructureDefinition.type%20for%20Logical%20Models/Custom%20Resources/near/240494207" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Zautke <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/StructureDefinition.2Etype.20for.20Logical.20Models.2FCustom.20Resources.html#240494207">(May 27 2021 at 16:25)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191316">Grahame Grieve</span> <a href="#narrow/stream/179177-conformance/topic/StructureDefinition.2Etype.20for.20Logical.20Models.2FCustom.20Resources/near/240493555">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="193430">Alexander Zautke</span> is there a task for this?</p>
</blockquote>
<p>No, just a proposal from my side. The only exception that Forge relies on is the ones specified in sdf-15 and sdf-8, it'll use only the tail of the canonical as the type in the diff or snapshot, not the full url.</p>



<a name="240495825"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/StructureDefinition.type%20for%20Logical%20Models/Custom%20Resources/near/240495825" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/StructureDefinition.2Etype.20for.20Logical.20Models.2FCustom.20Resources.html#240495825">(May 27 2021 at 16:36)</a>:</h4>
<p>Also, just to clarify.  If I have a logical model w/ <code>"type": "http://foo.org/StructureDefinition/Bar"</code> and another logical model defines an element that has that model as its element type, then the element that is defined to be that type should have:</p>
<div class="codehilite"><pre><span></span><code>&quot;type&quot;: [{
  &quot;code&quot;: &quot;http://foo.org/StructureDefinition/Bar&quot;
}]
</code></pre></div>
<p>right?</p>



<a name="240496584"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/StructureDefinition.type%20for%20Logical%20Models/Custom%20Resources/near/240496584" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/StructureDefinition.2Etype.20for.20Logical.20Models.2FCustom.20Resources.html#240496584">(May 27 2021 at 16:42)</a>:</h4>
<p>yes</p>



<a name="240496611"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/StructureDefinition.type%20for%20Logical%20Models/Custom%20Resources/near/240496611" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/StructureDefinition.2Etype.20for.20Logical.20Models.2FCustom.20Resources.html#240496611">(May 27 2021 at 16:42)</a>:</h4>
<p>the tools haven't been good at getting that right until recently</p>



<a name="249827465"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/StructureDefinition.type%20for%20Logical%20Models/Custom%20Resources/near/249827465" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Henket <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/StructureDefinition.2Etype.20for.20Logical.20Models.2FCustom.20Resources.html#249827465">(Aug 18 2021 at 09:49)</a>:</h4>
<p>Is this something that needs updating in the CDA R2.0 LoMo then? <a href="https://github.com/HL7/cda-core-2.0/blob/master/input/resources/ClinicalDocument.xml">https://github.com/HL7/cda-core-2.0/blob/master/input/resources/ClinicalDocument.xml</a></p>



<a name="251286716"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/StructureDefinition.type%20for%20Logical%20Models/Custom%20Resources/near/251286716" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Zautke <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/StructureDefinition.2Etype.20for.20Logical.20Models.2FCustom.20Resources.html#251286716">(Aug 30 2021 at 20:04)</a>:</h4>
<p><span class="user-mention" data-user-id="191375">@Alexander Henket</span> As discussed in todays FHIR-I call, those logical models need to be updated. See resolution of <a href="https://jira.hl7.org/browse/FHIR-33065">FHIR-33065</a>.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
