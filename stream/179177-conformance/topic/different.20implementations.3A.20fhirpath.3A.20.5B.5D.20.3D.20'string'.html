---
layout: page
title: "FHIR Chat  · different implementations: fhirpath: [] = &#x27;string&#x27; · conformance"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/index.html">conformance</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/different.20implementations.3A.20fhirpath.3A.20.5B.5D.20.3D.20&#x27;string&#x27;.html">different implementations: fhirpath: [] = &#x27;string&#x27;</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="247073825"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/different%20implementations%3A%20fhirpath%3A%20%5B%5D%20%3D%20%27string%27/near/247073825" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/different.20implementations.3A.20fhirpath.3A.20.5B.5D.20.3D.20&#x27;string&#x27;.html#247073825">(Jul 24 2021 at 13:04)</a>:</h4>
<p>I learned yesterday, that fhirpath equals (=) is implemented differently in different "engines".</p>
<p>[] = 'string' evaluates:</p>
<ul>
<li>java -&gt; []</li>
<li>.NET -&gt; true</li>
<li><a href="https://hl7.github.io/fhirpath.js/">https://hl7.github.io/fhirpath.js/</a> -&gt; []</li>
<li><a href="https://niquola.github.io/fhirpath-demo/#/">https://niquola.github.io/fhirpath-demo/#/</a> -&gt; false</li>
</ul>



<a name="247074142"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/different%20implementations%3A%20fhirpath%3A%20%5B%5D%20%3D%20%27string%27/near/247074142" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/different.20implementations.3A.20fhirpath.3A.20.5B.5D.20.3D.20&#x27;string&#x27;.html#247074142">(Jul 24 2021 at 13:13)</a>:</h4>
<p>According to the fhirpath spec the correct evaluation should be: [] </p>
<blockquote>
<p>Returns true if the left collection is equal to the right collection:</p>
</blockquote>
<p>As noted above, if either operand is an empty collection, the result is an empty collection.Returns true if the left collection is equal to the right collection:</p>
<p><strong>As noted above, if either operand is an empty collection, the result is an empty collection.</strong></p>



<a name="247074197"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/different%20implementations%3A%20fhirpath%3A%20%5B%5D%20%3D%20%27string%27/near/247074197" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/different.20implementations.3A.20fhirpath.3A.20.5B.5D.20.3D.20&#x27;string&#x27;.html#247074197">(Jul 24 2021 at 13:14)</a>:</h4>
<p>so .net and fhirpath-demo appearing to misinterpret fhirpath.</p>



<a name="247074208"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/different%20implementations%3A%20fhirpath%3A%20%5B%5D%20%3D%20%27string%27/near/247074208" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/different.20implementations.3A.20fhirpath.3A.20.5B.5D.20.3D.20&#x27;string&#x27;.html#247074208">(Jul 24 2021 at 13:14)</a>:</h4>
<p><span class="user-mention" data-user-id="191328">@Ewout Kramer</span> <span class="user-mention" data-user-id="203235">@Ward Weistra</span> <span class="user-mention" data-user-id="191318">@nicola (RIO/SS)</span></p>



<a name="247082076"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/different%20implementations%3A%20fhirpath%3A%20%5B%5D%20%3D%20%27string%27/near/247082076" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Zautke <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/different.20implementations.3A.20fhirpath.3A.20.5B.5D.20.3D.20&#x27;string&#x27;.html#247082076">(Jul 24 2021 at 16:07)</a>:</h4>
<p>The issue is slightly hard to debug from the outside for the .NET part. If you're running FHIRPath on Simplifier, it will currently still be executed using an older version of the Firely SDK (See <a href="https://docs.fire.ly">https://docs.fire.ly</a> for version details). The latest version of the SDK implements the correct behaviour.</p>



<a name="247083330"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/different%20implementations%3A%20fhirpath%3A%20%5B%5D%20%3D%20%27string%27/near/247083330" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/different.20implementations.3A.20fhirpath.3A.20.5B.5D.20.3D.20&#x27;string&#x27;.html#247083330">(Jul 24 2021 at 16:43)</a>:</h4>
<p>thanks for the debugging.</p>



<a name="247083511"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/different%20implementations%3A%20fhirpath%3A%20%5B%5D%20%3D%20%27string%27/near/247083511" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/different.20implementations.3A.20fhirpath.3A.20.5B.5D.20.3D.20&#x27;string&#x27;.html#247083511">(Jul 24 2021 at 16:47)</a>:</h4>
<p>So it is only a Simplifier issue like the one with resolve(), caused by an older version of the fhirpath engine inside Simplifier.</p>



<a name="247193628"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/different%20implementations%3A%20fhirpath%3A%20%5B%5D%20%3D%20%27string%27/near/247193628" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ward Weistra <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/different.20implementations.3A.20fhirpath.3A.20.5B.5D.20.3D.20&#x27;string&#x27;.html#247193628">(Jul 26 2021 at 12:10)</a>:</h4>
<p><span class="user-mention" data-user-id="191451">@Patrick Werner</span> Do you mean this query <code>{} = 'string'</code>, with <code>{}</code> for an empty collection? I don't see <code>[]</code> being accepted by any of them (didn't test Java). And differences in .NET implementation won't explain differences in outcome between the two JS implementations <span aria-label="wink" class="emoji emoji-1f609" role="img" title="wink">:wink:</span></p>
<p>(Trying to see if I can evaluate it in Firely Terminal with a more recent SDK.)</p>



<a name="247193936"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/different%20implementations%3A%20fhirpath%3A%20%5B%5D%20%3D%20%27string%27/near/247193936" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/different.20implementations.3A.20fhirpath.3A.20.5B.5D.20.3D.20&#x27;string&#x27;.html#247193936">(Jul 26 2021 at 12:14)</a>:</h4>
<p>hey <span class="user-mention" data-user-id="203235">@Ward Weistra</span> i already debbuged this in depth together with <span class="user-mention" data-user-id="193430">@Alexander Zautke</span></p>



<a name="247194001"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/different%20implementations%3A%20fhirpath%3A%20%5B%5D%20%3D%20%27string%27/near/247194001" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/different.20implementations.3A.20fhirpath.3A.20.5B.5D.20.3D.20&#x27;string&#x27;.html#247194001">(Jul 26 2021 at 12:15)</a>:</h4>
<p>It is a simplifier onyl issue, due to the older .net sdk used</p>



<a name="247194004"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/different%20implementations%3A%20fhirpath%3A%20%5B%5D%20%3D%20%27string%27/near/247194004" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/different.20implementations.3A.20fhirpath.3A.20.5B.5D.20.3D.20&#x27;string&#x27;.html#247194004">(Jul 26 2021 at 12:15)</a>:</h4>
<p><a href="#narrow/stream/179177-conformance/topic/when.20are.20invariants.20triggered/near/247082282">https://chat.fhir.org/#narrow/stream/179177-conformance/topic/when.20are.20invariants.20triggered/near/247082282</a></p>



<a name="247194064"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/different%20implementations%3A%20fhirpath%3A%20%5B%5D%20%3D%20%27string%27/near/247194064" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ward Weistra <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/different.20implementations.3A.20fhirpath.3A.20.5B.5D.20.3D.20&#x27;string&#x27;.html#247194064">(Jul 26 2021 at 12:16)</a>:</h4>
<p>Cool, was able to it in Firely Terminal though: <a href="/user_uploads/10155/dY8ncNzgv4J1de6GSG3U9yta/image.png">image.png</a><br>
cc <span class="user-mention" data-user-id="193430">@Alexander Zautke</span></p>
<div class="message_inline_image"><a href="/user_uploads/10155/dY8ncNzgv4J1de6GSG3U9yta/image.png" title="image.png"><img src="/user_uploads/10155/dY8ncNzgv4J1de6GSG3U9yta/image.png"></a></div>



<a name="247194084"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/different%20implementations%3A%20fhirpath%3A%20%5B%5D%20%3D%20%27string%27/near/247194084" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ward Weistra <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/different.20implementations.3A.20fhirpath.3A.20.5B.5D.20.3D.20&#x27;string&#x27;.html#247194084">(Jul 26 2021 at 12:16)</a>:</h4>
<p>I think that means it evaluates to an empty collection <span aria-label="wink" class="emoji emoji-1f609" role="img" title="wink">:wink:</span></p>



<a name="247767101"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/different%20implementations%3A%20fhirpath%3A%20%5B%5D%20%3D%20%27string%27/near/247767101" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nicola (RIO/SS) <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/different.20implementations.3A.20fhirpath.3A.20.5B.5D.20.3D.20&#x27;string&#x27;.html#247767101">(Jul 30 2021 at 21:56)</a>:</h4>
<p>This Martian logic XML poisons everything :( We implemented this by spec. I personally like more json centric interpretation [] = 'string' =&gt; "Exception: could not compare array with string" :)</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
