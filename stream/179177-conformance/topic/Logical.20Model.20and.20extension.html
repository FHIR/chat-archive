---
layout: page
title: "FHIR Chat  · Logical Model and extension · conformance"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/index.html">conformance</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Logical.20Model.20and.20extension.html">Logical Model and extension</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="165800591"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Logical%20Model%20and%20extension/near/165800591" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Henket <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Logical.20Model.20and.20extension.html#165800591">(May 16 2019 at 11:28)</a>:</h4>
<p><span class="user-mention" data-user-id="191336">@Michel Rutten</span> / <span class="user-mention" data-user-id="191316">@Grahame Grieve</span>  The V3 datatype II (Instance Identifier) contains an attribute @extension. Hence the <a href="https://github.com/HL7/fhir-cda/blob/master/resources/II.xml" target="_blank" title="https://github.com/HL7/fhir-cda/blob/master/resources/II.xml">logical model for II</a> has II.extension with representation xmlAttr as one of its supported paths.</p>
<p>Forge STU3 will not show this element and will remove it from the logical model upon save. I believe Forge needs updating for this, but I understand the difficulty in finding howto.</p>



<a name="165800787"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Logical%20Model%20and%20extension/near/165800787" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Logical.20Model.20and.20extension.html#165800787">(May 16 2019 at 11:30)</a>:</h4>
<p>it's an interesting problem but I don't really know what to do about it</p>



<a name="165879059"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Logical%20Model%20and%20extension/near/165879059" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Henket <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Logical.20Model.20and.20extension.html#165879059">(May 17 2019 at 07:29)</a>:</h4>
<p>While we're at it: something similar is going on for the id element available on  just about any V3 class.</p>



<a name="165879068"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Logical%20Model%20and%20extension/near/165879068" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Henket <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Logical.20Model.20and.20extension.html#165879068">(May 17 2019 at 07:29)</a>:</h4>
<p>Message : Invalid element name: 'id'. The specified name is reserved and is not allowed for a user defined element of a logical model.<br>
Severity: Warning<br>
Source  : Element Name<br>
Context : [CDAR2.Act] element.id&lt;#6&gt;.elementName</p>



<a name="165941471"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Logical%20Model%20and%20extension/near/165941471" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Logical.20Model.20and.20extension.html#165941471">(May 17 2019 at 22:21)</a>:</h4>
<p>I'll add that to my list</p>



<a name="166070863"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Logical%20Model%20and%20extension/near/166070863" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Logical.20Model.20and.20extension.html#166070863">(May 20 2019 at 09:44)</a>:</h4>
<p>Logical models are still based on the core datatype <code>Element</code>, which introduces default child elements named "id" and "extension". So I think that in practice, these two element names are reserved and a logical model (or custom resource definition) cannot re-introduce such elements with a different meaning.</p>



<a name="166071148"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Logical%20Model%20and%20extension/near/166071148" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Logical.20Model.20and.20extension.html#166071148">(May 20 2019 at 09:49)</a>:</h4>
<p>(I don't want to even think about trying to implement some magic logic to determine if an element named "extension" has a custom definition...)</p>



<a name="166071260"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Logical%20Model%20and%20extension/near/166071260" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Henket <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Logical.20Model.20and.20extension.html#166071260">(May 20 2019 at 09:51)</a>:</h4>
<p>Understood. But without a solution you're effectively saying: StructureDefinition cannot handle modeling V3. We have to find a way to distinguish between Logical Models and the rest. In FHIR instances, yes, id &amp; extension have a reserved meaning. For V2, V3, ebXML, ADL, XMI and what not, there is no such thing. </p>
<p>So a logical model that aims to do more than FHIR - in fact doesn't even do that: it does arbitrary datasets with a few serialization pointers - cannot impose FHIR assumptions on those arbitrary datasets.</p>



<a name="166073746"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Logical%20Model%20and%20extension/near/166073746" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Logical.20Model.20and.20extension.html#166073746">(May 20 2019 at 10:32)</a>:</h4>
<p>yes that is the problem.</p>



<a name="166074119"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Logical%20Model%20and%20extension/near/166074119" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Logical.20Model.20and.20extension.html#166074119">(May 20 2019 at 10:39)</a>:</h4>
<p>I don't believe that we say that Logical models must be based on Element anywhere in the specification itself....</p>



<a name="166075893"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Logical%20Model%20and%20extension/near/166075893" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Logical.20Model.20and.20extension.html#166075893">(May 20 2019 at 11:10)</a>:</h4>
<p>AFAIK, within the FHIR infrastructure, all <code>ElementDefinitions</code> are (ultimately) derived from <code>Element</code>, including Logical Models. This provides support for element identifiers and extensions, which are crucial concepts within FHIR.</p>



<a name="166075921"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Logical%20Model%20and%20extension/near/166075921" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Logical.20Model.20and.20extension.html#166075921">(May 20 2019 at 11:11)</a>:</h4>
<p>right. but I don't think we explicitly stated this anywhere</p>



<a name="166247082"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Logical%20Model%20and%20extension/near/166247082" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Logical.20Model.20and.20extension.html#166247082">(May 22 2019 at 08:28)</a>:</h4>
<p>Yes, I think you're correct, AFAIK the FHIR spec doesn't strictly define this. Theoretically, we could allow for base classes other than <code>Element</code> (or <code>Resource</code>). However all current logic in the .NET API assumes the existence of element identifiers and extension collections. It is possible to make this conditional, however I'm not looking forward to such an exercise...</p>



<a name="173089126"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Logical%20Model%20and%20extension/near/173089126" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Egger <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Logical.20Model.20and.20extension.html#173089126">(Aug 13 2019 at 06:24)</a>:</h4>
<blockquote>
<p>I don't believe that we say that Logical models must be based on Element anywhere in the specification itself....</p>
</blockquote>
<p>For the cda fhir logical model  i created a base 'LogicalElement' which has no  baseDefinition and an empty snapshot/differential for the V3 datatypes and classes. As far as I can tell this approach works currently with the ig publisher, there are a few things which need to be improved (id not showing up in html, extension element with another icon) if that is a conformant way of doing it.</p>



<a name="173090165"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Logical%20Model%20and%20extension/near/173090165" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Egger <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Logical.20Model.20and.20extension.html#173090165">(Aug 13 2019 at 06:49)</a>:</h4>
<p>if you want to have a look: <a href="http://build.fhir.org/ig/ahdis/cda-core-2.0/branches/ahdistemplate/index.html" target="_blank" title="http://build.fhir.org/ig/ahdis/cda-core-2.0/branches/ahdistemplate/index.html">http://build.fhir.org/ig/ahdis/cda-core-2.0/branches/ahdistemplate/index.html</a>, <a href="http://build.fhir.org/ig/ahdis/cda-core-2.0/branches/ahdistemplate/qa.html" target="_blank" title="http://build.fhir.org/ig/ahdis/cda-core-2.0/branches/ahdistemplate/qa.html">http://build.fhir.org/ig/ahdis/cda-core-2.0/branches/ahdistemplate/qa.html</a>  please note that the V3 Data Type snapshot generation is not yet correct.</p>



<a name="173100392"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Logical%20Model%20and%20extension/near/173100392" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Logical.20Model.20and.20extension.html#173100392">(Aug 13 2019 at 10:00)</a>:</h4>
<p>Yeah, the FHIR spec uses "Element" and "Resource" abstract types at points (e.g. contained, but there must be more) where we allow "any" resource or datatype.  Since these were the bases for everything, this is hard-coded in quite some places in the .NET API (and I am sure in other too).  IF we decide to introduce a new base class (which is probably the cleanest solution), this might -for all practical purposes- be considered a breaking change I think.</p>



<a name="173100497"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Logical%20Model%20and%20extension/near/173100497" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Logical.20Model.20and.20extension.html#173100497">(Aug 13 2019 at 10:02)</a>:</h4>
<p>Introducing new base class(es) is definitely a breaking change</p>



<a name="173261666"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Logical%20Model%20and%20extension/near/173261666" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Logical.20Model.20and.20extension.html#173261666">(Aug 15 2019 at 03:00)</a>:</h4>
<p>I won't be accepting the pull request on the CDA model till we get to the bottom of this. However: I don't think that the spec itself is explicit about this. So I don't think it's a breaking change. And I don't think you'll be generating code based on logical models; t's the element-model that has to work with base models like this</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
