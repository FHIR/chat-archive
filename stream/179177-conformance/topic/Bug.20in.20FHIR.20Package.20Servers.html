---
layout: page
title: "FHIR Chat  · Bug in FHIR Package Servers · conformance"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/index.html">conformance</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Bug.20in.20FHIR.20Package.20Servers.html">Bug in FHIR Package Servers</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="229100748"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Bug%20in%20FHIR%20Package%20Servers/near/229100748" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Bug.20in.20FHIR.20Package.20Servers.html#229100748">(Mar 06 2021 at 14:09)</a>:</h4>
<p>I reported an Issue with finding packages from Simplifier here: <a href="#narrow/stream/179177-conformance/topic/packages.20from.20simplifier.20missing">https://chat.fhir.org/#narrow/stream/179177-conformance/topic/packages.20from.20simplifier.20missing</a></p>
<p>I now found out what actually causes the issue: upper_lowecase String missmatches...</p>



<a name="229100774"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Bug%20in%20FHIR%20Package%20Servers/near/229100774" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Bug.20in.20FHIR.20Package.20Servers.html#229100774">(Mar 06 2021 at 14:09)</a>:</h4>
<p><code>java -jar validator_cli.jar example.json -ig KBV.Basis</code> doesn't work</p>



<a name="229100828"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Bug%20in%20FHIR%20Package%20Servers/near/229100828" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Bug.20in.20FHIR.20Package.20Servers.html#229100828">(Mar 06 2021 at 14:10)</a>:</h4>
<p><code>java -jar validator_cli.jar Coverage-example.json -ig kbv.basis</code>works.</p>



<a name="229101141"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Bug%20in%20FHIR%20Package%20Servers/near/229101141" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Bug.20in.20FHIR.20Package.20Servers.html#229101141">(Mar 06 2021 at 14:14)</a>:</h4>
<p>fyi: <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> <span class="user-mention" data-user-id="203235">@Ward Weistra</span> <br>
To fix this i suppose:</p>
<ul>
<li>enforcing only lowercase letters in Simplifier and other package creating tooling (as stated in the FHIR package spec)</li>
<li>in the java Validator convert -ig Strings to lowercase before asking the Server</li>
</ul>



<a name="229182843"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Bug%20in%20FHIR%20Package%20Servers/near/229182843" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Bug.20in.20FHIR.20Package.20Servers.html#229182843">(Mar 07 2021 at 12:11)</a>:</h4>
<p><span class="user-mention" data-user-id="193430">@Alexander Zautke</span> just pointed out, that we can't fix old "illegal" packages. If all tooling applies <code>.toLowerCase()</code> to the packageID before searching/comparing this shouldn't be an issue.</p>



<a name="229282810"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Bug%20in%20FHIR%20Package%20Servers/near/229282810" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ward Weistra <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Bug.20in.20FHIR.20Package.20Servers.html#229282810">(Mar 08 2021 at 11:20)</a>:</h4>
<p>Yes <span class="user-mention" data-user-id="191451">@Patrick Werner</span>, we should prevent this on creation. We're already enforcing it, I believe, on all places where our tool stack searches for them.</p>



<a name="229283033"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Bug%20in%20FHIR%20Package%20Servers/near/229283033" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Bug.20in.20FHIR.20Package.20Servers.html#229283033">(Mar 08 2021 at 11:21)</a>:</h4>
<p>hmm i still can create them. Just added this test package: <a href="https://simplifier.net/packages/patricks.sandbox/1.0.0">https://simplifier.net/packages/patricks.sandbox/1.0.0</a></p>



<a name="229284328"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Bug%20in%20FHIR%20Package%20Servers/near/229284328" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ward Weistra <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Bug.20in.20FHIR.20Package.20Servers.html#229284328">(Mar 08 2021 at 11:34)</a>:</h4>
<p><span class="user-mention" data-user-id="191451">@Patrick Werner</span> We SHOULD is future <span aria-label="wink" class="emoji emoji-1f609" role="img" title="wink">:wink:</span> However if you make a dependency on <code>patricks.sandbox</code> anywhere in Forge/Firely Terminal/Simplifier.net I assume it would resolve fine.</p>



<a name="229284409"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Bug%20in%20FHIR%20Package%20Servers/near/229284409" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Bug.20in.20FHIR.20Package.20Servers.html#229284409">(Mar 08 2021 at 11:34)</a>:</h4>
<p>Ahh! Missunderstood, thanks for the explanation <span aria-label="sunglasses" class="emoji emoji-1f60e" role="img" title="sunglasses">:sunglasses:</span></p>



<a name="229446958"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Bug%20in%20FHIR%20Package%20Servers/near/229446958" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ward Weistra <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Bug.20in.20FHIR.20Package.20Servers.html#229446958">(Mar 09 2021 at 09:29)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> Until all packages with capitals are weeded out, perhaps the Java stack could also lowercase any package name inputted by the user?</p>



<a name="229617372"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Bug%20in%20FHIR%20Package%20Servers/near/229617372" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Bug.20in.20FHIR.20Package.20Servers.html#229617372">(Mar 10 2021 at 08:02)</a>:</h4>
<p>just tested again: The java validator works if you just use the smaller letter representation. But in between package dependencies can brake atm:</p>
<div class="codehilite"><pre><span></span><code>java -jar validator_cli.jar Coverage-example.json -ig patricks.sandbox
  Terminology server http://tx.fhir.org - Version 1.9.369 (00:01.0973)
  Load KBV.Basis#1.1.3Exception in thread &quot;main&quot; org.hl7.fhir.exceptions.FHIRException: Unable to find/resolve/read -ig KBV.Basis#1.1.3
    at org.hl7.fhir.validation.IgLoader.loadIgSource(IgLoader.java:195)
</code></pre></div>



<a name="229617423"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Bug%20in%20FHIR%20Package%20Servers/near/229617423" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Bug.20in.20FHIR.20Package.20Servers.html#229617423">(Mar 10 2021 at 08:02)</a>:</h4>
<p>will see if i can add the <code>toLowerCase</code>at the correct places today.</p>



<a name="231448694"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Bug%20in%20FHIR%20Package%20Servers/near/231448694" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sergej Reiser <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Bug.20in.20FHIR.20Package.20Servers.html#231448694">(Mar 23 2021 at 10:31)</a>:</h4>
<p><span class="user-mention" data-user-id="191451">@Patrick Werner</span> have you been able to fix the issue? Since our Package also depends on KBV.Basis we are running into the same Exception with validator_cli.jar 5.3.6.</p>



<a name="231470371"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Bug%20in%20FHIR%20Package%20Servers/near/231470371" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Bug.20in.20FHIR.20Package.20Servers.html#231470371">(Mar 23 2021 at 13:33)</a>:</h4>
<p>i hadn't had time to fix it yet.</p>



<a name="231767452"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Bug%20in%20FHIR%20Package%20Servers/near/231767452" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ward Weistra <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Bug.20in.20FHIR.20Package.20Servers.html#231767452">(Mar 25 2021 at 09:11)</a>:</h4>
<p><span class="user-mention" data-user-id="191451">@Patrick Werner</span> I think this should be solved right now. Lowercase variants like <a href="https://packages.simplifier.net/kbv.basis">https://packages.simplifier.net/kbv.basis</a> nicely return the right package.</p>



<a name="231767796"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Bug%20in%20FHIR%20Package%20Servers/near/231767796" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ward Weistra <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Bug.20in.20FHIR.20Package.20Servers.html#231767796">(Mar 25 2021 at 09:14)</a>:</h4>
<p>Another tricky thing we noticed is that semver on the other hand are case sensitive (eg. version <code>0.1.2-Preview</code> != <code>0.1.2-preview</code> (see <a href="https://github.com/semver/semver/issues/176">https://github.com/semver/semver/issues/176</a>). We're considering whether we should deviate from semver here.</p>



<a name="231771266"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Bug%20in%20FHIR%20Package%20Servers/near/231771266" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Bug.20in.20FHIR.20Package.20Servers.html#231771266">(Mar 25 2021 at 09:45)</a>:</h4>
<p>Hey <span class="user-mention" data-user-id="203235">@Ward Weistra</span> thanks for the update!<br>
That's funny, i was wondering the same thing. I personally would like to deviate from semver, but i also think this would be a bad idea.</p>



<a name="231771291"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Bug%20in%20FHIR%20Package%20Servers/near/231771291" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Bug.20in.20FHIR.20Package.20Servers.html#231771291">(Mar 25 2021 at 09:45)</a>:</h4>
<p>The FHIR package spec states: </p>
<blockquote>
<p>All packages have a mandatory version. [SemVer] 2 SHALL be used</p>
</blockquote>



<a name="231771491"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Bug%20in%20FHIR%20Package%20Servers/near/231771491" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Bug.20in.20FHIR.20Package.20Servers.html#231771491">(Mar 25 2021 at 09:47)</a>:</h4>
<p>And people have adopted semver already (including the stupid case-sensitive pre-release labels) and i think using semver here was a wise choice.</p>



<a name="231780540"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Bug%20in%20FHIR%20Package%20Servers/near/231780540" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Julian Sass <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Bug.20in.20FHIR.20Package.20Servers.html#231780540">(Mar 25 2021 at 11:00)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191451">Patrick Werner</span> <a href="#narrow/stream/179177-conformance/topic/Bug.20in.20FHIR.20Package.20Servers/near/229617372">said</a>:</p>
<blockquote>
<p>just tested again: The java validator works if you just use the smaller letter representation. But in between package dependencies can brake atm:</p>
<p><div class="codehilite"><pre><span></span><code>java -jar validator_cli.jar Coverage-example.json -ig patricks.sandbox
  Terminology server http://tx.fhir.org - Version 1.9.369 (00:01.0973)
  Load KBV.Basis#1.1.3Exception in thread &quot;main&quot; org.hl7.fhir.exceptions.FHIRException: Unable to find/resolve/read -ig KBV.Basis#1.1.3
    at org.hl7.fhir.validation.IgLoader.loadIgSource(IgLoader.java:195)
</code></pre></div><br>
</p>
</blockquote>
<p>Ah I also ran into this: <a href="#narrow/stream/179166-implementers/topic/Error.20loading.20package.20in.20java.20validator">https://chat.fhir.org/#narrow/stream/179166-implementers/topic/Error.20loading.20package.20in.20java.20validator</a> <br>
Just discovered you're discussing this here</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
