---
layout: page
title: "FHIR Chat  · JSON Schema: Validation of Array of Enums · conformance"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/index.html">conformance</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/JSON.20Schema.3A.20Validation.20of.20Array.20of.20Enums.html">JSON Schema: Validation of Array of Enums</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="215322198"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/JSON%20Schema%3A%20Validation%20of%20Array%20of%20Enums/near/215322198" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Julius Severin <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/JSON.20Schema.3A.20Validation.20of.20Array.20of.20Enums.html#215322198">(Nov 02 2020 at 14:06)</a>:</h4>
<p>We might have found a bug in the JSON Schemas. For arrays of enums the schema is written in the following manner:</p>
<div class="codehilite"><pre><span></span><code>{
  &quot;title&quot;: &quot;enum-array&quot;,
  &quot;type&quot;: &quot;array&quot;,
  &quot;enum&quot;: [&quot;one&quot;, &quot;three&quot;],
  &quot;items&quot;: {&quot;type&quot;: &quot;string&quot;}
}
</code></pre></div>
<p>This results in the validator checking for the type of an array first and then compares the enum array with the indiviual items in the array. As an array is compared with a string this always results in the validation failing. </p>
<div class="codehilite"><pre><span></span><code>{
  &quot;title&quot;: &quot;enum-array&quot;,
  &quot;type&quot;: &quot;array&quot;,
  &quot;items&quot;: {
    &quot;type&quot;: &quot;string&quot;,
    &quot;enum&quot;:[&quot;one&quot;, &quot;three&quot;]
  }
}
</code></pre></div>
<p>This seems to be the way those structures should be modeled in JSON schemas.</p>
<p>One example in FHIR would be ElemenDefinition.representation in STU3.</p>



<a name="215322476"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/JSON%20Schema%3A%20Validation%20of%20Array%20of%20Enums/near/215322476" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/JSON.20Schema.3A.20Validation.20of.20Array.20of.20Enums.html#215322476">(Nov 02 2020 at 14:09)</a>:</h4>
<p>Are you looking at the schemas as they're published in R4?  The JSON schemas published in STU3 are known to be broken (and won't be fixed)</p>



<a name="215341240"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/JSON%20Schema%3A%20Validation%20of%20Array%20of%20Enums/near/215341240" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Julius Severin <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/JSON.20Schema.3A.20Validation.20of.20Array.20of.20Enums.html#215341240">(Nov 02 2020 at 16:21)</a>:</h4>
<p>Thank you. You are right, this is fixed for R4.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
