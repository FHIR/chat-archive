---
layout: page
title: "FHIR Chat  · Validator and slicing · conformance"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/index.html">conformance</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Validator.20and.20slicing.html">Validator and slicing</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="190243405"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Validator%20and%20slicing/near/190243405" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Townley-O&#x27;Neill <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Validator.20and.20slicing.html#190243405">(Mar 11 2020 at 01:33)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> <br>
I want Composition.section.entry to specify slices for profiled observations. So I sliced Composition.section.entry by pattern:resolve().code.coding. </p>
<p>I also want to require each observation to have a particular code, but allow others, so I sliced Observation.code.coding by pattern:$this and made the slice with my preferred code 1..1.</p>
<p>See structuredefinition-ncdhc-composition-estimated-date-birth.json in <a href="https://github.com/RichardTON/au-fhir-childhealth/tree/906a32c580d55c369319b003393bb3dcfcb37f39" target="_blank" title="https://github.com/RichardTON/au-fhir-childhealth/tree/906a32c580d55c369319b003393bb3dcfcb37f39">https://github.com/RichardTON/au-fhir-childhealth/tree/906a32c580d55c369319b003393bb3dcfcb37f39</a></p>
<p>My examples throw a "Could not match discriminator " error.  See ncdhc-estimated-date-birth-document-example.json</p>
<p>I think that the validator should allow this.</p>
<p>If I change the observation to eliminate slicing Observation.code.coding by pattern:$this and only allow the one coding, without alternates, my example validates. See <a href="https://github.com/RichardTON/au-fhir-childhealth/tree/b00dcfdaf307315f77d1c14efde80ce449ca5c20" target="_blank" title="https://github.com/RichardTON/au-fhir-childhealth/tree/b00dcfdaf307315f77d1c14efde80ce449ca5c20">https://github.com/RichardTON/au-fhir-childhealth/tree/b00dcfdaf307315f77d1c14efde80ce449ca5c20</a></p>
<p>Is this a reasonable use of slicing?</p>



<a name="190244092"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Validator%20and%20slicing/near/190244092" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Validator.20and.20slicing.html#190244092">(Mar 11 2020 at 01:51)</a>:</h4>
<p>I</p>



<a name="190244138"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Validator%20and%20slicing/near/190244138" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Validator.20and.20slicing.html#190244138">(Mar 11 2020 at 01:52)</a>:</h4>
<p>I'm not sure. how does the validator know what values are in the value set of the discriminated slice if the element is sliced? Does any acceptable slice meet the pattern? If so, how does it discriminate?</p>



<a name="190244146"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Validator%20and%20slicing/near/190244146" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Validator.20and.20slicing.html#190244146">(Mar 11 2020 at 01:53)</a>:</h4>
<p>why note slice on the code rather than on the coding? do you have other slices?</p>



<a name="190245425"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Validator%20and%20slicing/near/190245425" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Townley-O&#x27;Neill <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Validator.20and.20slicing.html#190245425">(Mar 11 2020 at 02:28)</a>:</h4>
<p>Typo above: " So I sliced Observation.section.entry" should have been "So I sliced Composition.section.entry by"<br>
Now corrected.</p>



<a name="190245651"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Validator%20and%20slicing/near/190245651" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Validator.20and.20slicing.html#190245651">(Mar 11 2020 at 02:35)</a>:</h4>
<p>I didn't notice that typo - don't think it makes any difference?</p>



<a name="190245698"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Validator%20and%20slicing/near/190245698" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Townley-O&#x27;Neill <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Validator.20and.20slicing.html#190245698">(Mar 11 2020 at 02:36)</a>:</h4>
<blockquote>
<p>how does the validator know what values are in the value set of the discriminated slice if the element is sliced?</p>
</blockquote>
<p>I thought that as the element has a required slice, you could use a value matching the required slice. <br>
<a href="/user_uploads/10155/Qib5mTP3ZXQuHj8njTbtF0E8/image.png" target="_blank" title="image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/10155/Qib5mTP3ZXQuHj8njTbtF0E8/image.png" target="_blank" title="image.png"><img src="/user_uploads/10155/Qib5mTP3ZXQuHj8njTbtF0E8/image.png"></a></div>



<a name="190245714"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Validator%20and%20slicing/near/190245714" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Townley-O&#x27;Neill <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Validator.20and.20slicing.html#190245714">(Mar 11 2020 at 02:37)</a>:</h4>
<blockquote>
<p>Does any acceptable slice meet the pattern? If so, how does it discriminate?</p>
</blockquote>
<p>Would it make a difference if the slicing was closed?</p>



<a name="190245768"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Validator%20and%20slicing/near/190245768" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Townley-O&#x27;Neill <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Validator.20and.20slicing.html#190245768">(Mar 11 2020 at 02:39)</a>:</h4>
<blockquote>
<p>why note slice on the code rather than on the coding? do you have other slices?</p>
</blockquote>
<p>I cannot slice on Observation.code as it is 1..1<br>
The reason for slicing Observation.code.coding is to follow a design pattern used in the project where future permitted coding can be added by simply adding a new slice.</p>



<a name="190245824"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Validator%20and%20slicing/near/190245824" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Townley-O&#x27;Neill <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Validator.20and.20slicing.html#190245824">(Mar 11 2020 at 02:41)</a>:</h4>
<p>(deleted)</p>



<a name="190245843"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Validator%20and%20slicing/near/190245843" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Townley-O&#x27;Neill <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Validator.20and.20slicing.html#190245843">(Mar 11 2020 at 02:41)</a>:</h4>
<p>The idea is to require one coding of Observation.code, but allow others in the future.</p>



<a name="190245907"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Validator%20and%20slicing/near/190245907" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Townley-O&#x27;Neill <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Validator.20and.20slicing.html#190245907">(Mar 11 2020 at 02:43)</a>:</h4>
<p>I guess something similar could be done by a required binding of Observation.code to a valueset with one entry.<br>
Must give the required value, can give translations.<br>
That would be less obvious, and would be harder to test for agreement with the profile.</p>



<a name="190246362"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Validator%20and%20slicing/near/190246362" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Validator.20and.20slicing.html#190246362">(Mar 11 2020 at 02:55)</a>:</h4>
<p>you could just use a pattern on the code with the required details ?</p>



<a name="190246417"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Validator%20and%20slicing/near/190246417" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Townley-O&#x27;Neill <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Validator.20and.20slicing.html#190246417">(Mar 11 2020 at 02:56)</a>:</h4>
<p>A  pattern on code can say "<strong>all</strong> codings will have this system and code", it cannot say "<strong>at least one</strong> coding will have this system and code"</p>



<a name="190246433"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Validator%20and%20slicing/near/190246433" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Townley-O&#x27;Neill <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Validator.20and.20slicing.html#190246433">(Mar 11 2020 at 02:57)</a>:</h4>
<p>The idea is that sometime in the future a second coding might be permitted, and it will then be added as  a new slice.</p>



<a name="190246442"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Validator%20and%20slicing/near/190246442" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Validator.20and.20slicing.html#190246442">(Mar 11 2020 at 02:57)</a>:</h4>
<p>permitted? that means you're closing the slicing for now?</p>



<a name="190246449"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Validator%20and%20slicing/near/190246449" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Validator.20and.20slicing.html#190246449">(Mar 11 2020 at 02:57)</a>:</h4>
<p>why not just a fixed value then?</p>



<a name="190246503"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Validator%20and%20slicing/near/190246503" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Townley-O&#x27;Neill <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Validator.20and.20slicing.html#190246503">(Mar 11 2020 at 02:58)</a>:</h4>
<p>Yes. It is open in what I have committed, but it is meant to be closed.</p>



<a name="190246636"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Validator%20and%20slicing/near/190246636" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Townley-O&#x27;Neill <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Validator.20and.20slicing.html#190246636">(Mar 11 2020 at 03:01)</a>:</h4>
<blockquote>
<p>why not just a fixed value then?</p>
</blockquote>
<p>Because the project likes the design pattern of having a slicing with the currently permitted codings in slices, even when there is only one permitted coding.</p>



<a name="190250124"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Validator%20and%20slicing/near/190250124" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Townley-O&#x27;Neill <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Validator.20and.20slicing.html#190250124">(Mar 11 2020 at 04:36)</a>:</h4>
<p>Note: If you want to build the ig, the config file ig-dphr.json runs much faster than ig,json.</p>



<a name="190285858"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Validator%20and%20slicing/near/190285858" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Validator.20and.20slicing.html#190285858">(Mar 11 2020 at 14:18)</a>:</h4>
<p>A pattern on Observation.code that declares a single coding says exactly what you want I think - "at least one coding must match what I've specified, but others are allowed".  That's why pattern is the recommended way of expressing constraints on CodeableConcept.</p>



<a name="190327634"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Validator%20and%20slicing/near/190327634" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shovan Roy <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Validator.20and.20slicing.html#190327634">(Mar 11 2020 at 20:27)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> , <span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> thanks for the clarification. I have a quick question on this. How to profile an Observation using pattern where we want to say that a LOINC code and/or a SNOMED code is required to be present and the implementer can send any other code?</p>



<a name="190327715"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Validator%20and%20slicing/near/190327715" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Validator.20and.20slicing.html#190327715">(Mar 11 2020 at 20:28)</a>:</h4>
<p>you can't do that with a pattern. you need to slice for that</p>



<a name="190327747"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Validator%20and%20slicing/near/190327747" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Validator.20and.20slicing.html#190327747">(Mar 11 2020 at 20:28)</a>:</h4>
<p>or maybe just use a value set binding with a value set that covers both</p>



<a name="190327793"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Validator%20and%20slicing/near/190327793" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shovan Roy <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Validator.20and.20slicing.html#190327793">(Mar 11 2020 at 20:29)</a>:</h4>
<p>Thanks <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> , we have actually did the sliced with pattern on the Observation.coding.code</p>



<a name="190328211"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Validator%20and%20slicing/near/190328211" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shovan Roy <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Validator.20and.20slicing.html#190328211">(Mar 11 2020 at 20:33)</a>:</h4>
<p>As <span class="user-mention" data-user-id="191682">@Richard Townley-O'Neill</span> mentioned that with this slicing in the observation, pattern:resolve().code.coding as the discriminator in the composition doesn't work.  It's working fine with profile=resolve(). The first question I have is do you see any issue of using  profile=resolve() in Composition section entry slicing?</p>



<a name="190328448"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Validator%20and%20slicing/near/190328448" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shovan Roy <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Validator.20and.20slicing.html#190328448">(Mar 11 2020 at 20:35)</a>:</h4>
<p>what kind of benefit I'm expecting to get if I use pattern:resolve().code.coding  as opposed to profile=resolve(). does pattern:resolve().code.coding do the profile validation of the entire resource or it just checks if the code is present or not?</p>



<a name="190328641"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Validator%20and%20slicing/near/190328641" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Validator.20and.20slicing.html#190328641">(Mar 11 2020 at 20:37)</a>:</h4>
<blockquote>
<p>pattern:resolve().code.coding </p>
</blockquote>
<p>just checks the coding</p>



<a name="190328951"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Validator%20and%20slicing/near/190328951" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shovan Roy <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Validator.20and.20slicing.html#190328951">(Mar 11 2020 at 20:39)</a>:</h4>
<p>Ok, which means, If I use that in a FHIR document, then I've to perform explicit profile validation for each individual resource seperately. The Composition validation will only help to check if the document contains the right list of 'things' (e.g.: Observation)  but it doesn't validate if they are also proper as per profile..If this is correct assumption, then It seems to me that profile = resolve() is a better option at this stage isn't it?</p>



<a name="190329204"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Validator%20and%20slicing/near/190329204" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Validator.20and.20slicing.html#190329204">(Mar 11 2020 at 20:42)</a>:</h4>
<p>For and/or you'd actually need an invariant.  Slicing would let you define the two slices, but wouldn't let you say you need at least one of them.</p>



<a name="190329294"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Validator%20and%20slicing/near/190329294" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Validator.20and.20slicing.html#190329294">(Mar 11 2020 at 20:43)</a>:</h4>
<p>well, we're talking about the discriminator. It's a lot easier for anyone reading the documentation if the discriminator refers to a fixed value. The validator will still validate the whole profile, but the error messages will be much easier to understand when referring to a fixed value, and you can also figure out which slice is which without a full validator in play</p>



<a name="190329340"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Validator%20and%20slicing/near/190329340" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shovan Roy <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Validator.20and.20slicing.html#190329340">(Mar 11 2020 at 20:44)</a>:</h4>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> agreed.</p>



<a name="190329749"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Validator%20and%20slicing/near/190329749" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shovan Roy <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Validator.20and.20slicing.html#190329749">(Mar 11 2020 at 20:48)</a>:</h4>
<p>thanks <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> ,  in the context of a FHIR document, what is your recommendation to use as discriminator? is there any documentation I can refer to? As of now I've used profile=resolve() for all of our FHIR documents ( we have many of them) and it works. It comes back with proper error if there is anything wrong. But if there is a better way of doing it.I'm happy to take that option and propose of inclusion.</p>



<a name="190329899"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Validator%20and%20slicing/near/190329899" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Validator.20and.20slicing.html#190329899">(Mar 11 2020 at 20:50)</a>:</h4>
<p>it's not wrong. it's just tough for users. It's always better if you can refer to a fixed value</p>



<a name="190329915"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Validator%20and%20slicing/near/190329915" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Validator.20and.20slicing.html#190329915">(Mar 11 2020 at 20:50)</a>:</h4>
<p>what happens if you refer to a fixed value of resolve().code.coding[0]?</p>



<a name="190330191"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Validator%20and%20slicing/near/190330191" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shovan Roy <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Validator.20and.20slicing.html#190330191">(Mar 11 2020 at 20:53)</a>:</h4>
<p>as <span class="user-mention" data-user-id="191682">@Richard Townley-O'Neill</span> mentioned, we are getting "could't match discriminator' error since we have used sliced pattern in Observation.coding.code</p>



<a name="190330487"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Validator%20and%20slicing/near/190330487" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shovan Roy <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Validator.20and.20slicing.html#190330487">(Mar 11 2020 at 20:56)</a>:</h4>
<p>looping in <span class="user-mention" data-user-id="191405">@Rob Hausam</span> in this discussion. <span class="user-mention" data-user-id="191405">@Rob Hausam</span> what approach you guys are taking in IPS for FHIR document entry slicing discriminator?</p>



<a name="190332175"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Validator%20and%20slicing/near/190332175" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shovan Roy <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Validator.20and.20slicing.html#190332175">(Mar 11 2020 at 21:13)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> sorry, I missed to answer your question..I haven't tried with fixed value. Our project adopted to use 'pattern' as the Observation.coding. We are extensively using 'pattern' in all over the places as discussed in <a href="#narrow/stream/179166-implementers/topic/Fixed.20Code.20vs.20Pattern" title="#narrow/stream/179166-implementers/topic/Fixed.20Code.20vs.20Pattern">https://chat.fhir.org/#narrow/stream/179166-implementers/topic/Fixed.20Code.20vs.20Pattern</a>.<br>
 I'm happy to check the behavior with using a fixed value and try with resolve().code.coding[0]</p>



<a name="190332698"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Validator%20and%20slicing/near/190332698" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Validator.20and.20slicing.html#190332698">(Mar 11 2020 at 21:18)</a>:</h4>
<p>I meant pattern not fixed</p>



<a name="190333365"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Validator%20and%20slicing/near/190333365" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Validator.20and.20slicing.html#190333365">(Mar 11 2020 at 21:24)</a>:</h4>
<p>After many trials and iterations, in IPS we have arrived at this for our Composition.section.entry slicing definitions:</p>
<div class="codehilite"><pre><span></span>            &lt;slicing&gt;
                &lt;discriminator&gt;
                    &lt;type value=&quot;profile&quot;/&gt;
                    &lt;path value=&quot;$this.resolve()&quot;/&gt;
                &lt;/discriminator&gt;
                &lt;rules value=&quot;open&quot;/&gt;
            &lt;/slicing&gt;
</pre></div>


<p>There can be issues with "This element does not match any known slice defined in the profile" information qa messages for some of our example instances (depending on whether or not the possible profile matches are entirely non-overlapping), but this gives the choices the visibility that we were looking for in the IG for the IPS instance creators (and depending on what, if anything, you want or need to do with validation on the receiving end there isn't likely going to be a problem with that).</p>



<a name="190333894"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Validator%20and%20slicing/near/190333894" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shovan Roy <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Validator.20and.20slicing.html#190333894">(Mar 11 2020 at 21:30)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> sorry, my bad..I'll try and let you know..</p>



<a name="190333920"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Validator%20and%20slicing/near/190333920" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shovan Roy <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Validator.20and.20slicing.html#190333920">(Mar 11 2020 at 21:30)</a>:</h4>
<p>thanks <span class="user-mention" data-user-id="191405">@Rob Hausam</span> I'm inline with what approach you have taken...the only different in our case is that we are using closed slicing. We don't want the implements to send any extra section/entry that is not defined in our profile.</p>



<a name="190334383"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Validator%20and%20slicing/near/190334383" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Validator.20and.20slicing.html#190334383">(Mar 11 2020 at 21:36)</a>:</h4>
<p>sure - that makes sense</p>



<a name="190334441"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Validator%20and%20slicing/near/190334441" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Validator.20and.20slicing.html#190334441">(Mar 11 2020 at 21:37)</a>:</h4>
<p>for IPS we didn't want to constrain it that tightly</p>



<a name="190335771"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Validator%20and%20slicing/near/190335771" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Validator.20and.20slicing.html#190335771">(Mar 11 2020 at 21:50)</a>:</h4>
<p>I'm also going to look further into the possibility of using multiple discriminators (for both type and profile) to further tighten up the slicing in at least some of our cases.  I did that successfully in a different context (not involving a reference) in a PlanDefinition profile for Order Catalog, and I think it may also have some applicability here - but that's still to be determined.</p>



<a name="190336860"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Validator%20and%20slicing/near/190336860" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shovan Roy <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Validator.20and.20slicing.html#190336860">(Mar 11 2020 at 22:02)</a>:</h4>
<p>sounds like something interesting <span class="user-mention" data-user-id="191405">@Rob Hausam</span> .. I'll keep watching that space :)</p>



<a name="190337205"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Validator%20and%20slicing/near/190337205" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Validator.20and.20slicing.html#190337205">(Mar 11 2020 at 22:06)</a>:</h4>
<p>I'll let you know how it goes.</p>



<a name="190341329"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Validator%20and%20slicing/near/190341329" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shovan Roy <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Validator.20and.20slicing.html#190341329">(Mar 11 2020 at 22:58)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> I used <a href="/user_uploads/10155/46x6Th28DCUyx_1lvsBiBkfv/image.png" target="_blank" title="image.png">image.png</a>  and got "illegal function name null() in discriminator"  error.</p>
<div class="message_inline_image"><a href="/user_uploads/10155/46x6Th28DCUyx_1lvsBiBkfv/image.png" target="_blank" title="image.png"><img src="/user_uploads/10155/46x6Th28DCUyx_1lvsBiBkfv/image.png"></a></div><p>Then I used <br>
<a href="/user_uploads/10155/MoLSNpF7mqKyYfJLY73Ygk_j/image.png" target="_blank" title="image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/10155/MoLSNpF7mqKyYfJLY73Ygk_j/image.png" target="_blank" title="image.png"><img src="/user_uploads/10155/MoLSNpF7mqKyYfJLY73Ygk_j/image.png"></a></div><p>and got "Profile based discriminators must have a type with a profile" I double checked, the sample has the meta.profile populated..</p>



<a name="190349035"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Validator%20and%20slicing/near/190349035" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Townley-O&#x27;Neill <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Validator.20and.20slicing.html#190349035">(Mar 12 2020 at 01:14)</a>:</h4>
<p>To use resolve().code.coding the type of slicing is pattern, not profile.<br>
Try pattern:resolve().code.coding[0].<br>
When I tried it, it behaved the same as pattern:resolve().code.coding. Which makes sense, as I have only one coding in the code.</p>



<a name="190349255"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Validator%20and%20slicing/near/190349255" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shovan Roy <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Validator.20and.20slicing.html#190349255">(Mar 12 2020 at 01:20)</a>:</h4>
<p>I tried with pattern and got the same error as with profile <br>
<a href="/user_uploads/10155/Kimxq4kgSs7KfPpNY_d6rT7M/image.png" target="_blank" title="image.png">image.png</a> </p>
<div class="message_inline_image"><a href="/user_uploads/10155/Kimxq4kgSs7KfPpNY_d6rT7M/image.png" target="_blank" title="image.png"><img src="/user_uploads/10155/Kimxq4kgSs7KfPpNY_d6rT7M/image.png"></a></div><p>Eroor: illegal function name null() in discriminator</p>



<a name="190349272"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Validator%20and%20slicing/near/190349272" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Townley-O&#x27;Neill <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Validator.20and.20slicing.html#190349272">(Mar 12 2020 at 01:21)</a>:</h4>
<p>I did not use Forge.</p>



<a name="190354694"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Validator%20and%20slicing/near/190354694" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Validator.20and.20slicing.html#190354694">(Mar 12 2020 at 03:51)</a>:</h4>
<p>oh yes you would. duh.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
