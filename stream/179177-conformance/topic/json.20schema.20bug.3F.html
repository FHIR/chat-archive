---
layout: page
title: "FHIR Chat  · json schema bug? · conformance"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/index.html">conformance</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/json.20schema.20bug.3F.html">json schema bug?</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="219090153"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/json%20schema%20bug%3F/near/219090153" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jim Williams <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/json.20schema.20bug.3F.html#219090153">(Dec 07 2020 at 15:02)</a>:</h4>
<p>I believe there is a bug in the published JSON schema. <br>
The definitions of the <code>integer</code>,  <code>positiveInt</code>, and <code>unsignedInt</code> types all use the type of <code>number</code> from the json schema spec. I believe this should be <code>integer</code> instead. Here is the defnition of <code>integer</code> from the FHIR spec:</p>
<div class="codehilite" data-code-language="JSON"><pre><span></span><code>    <span class="s2">"integer"</span><span class="err">:</span> <span class="p">{</span>
      <span class="nt">"pattern"</span><span class="p">:</span> <span class="s2">"^-?([0]|([1-9][0-9]*))$"</span><span class="p">,</span>
      <span class="nt">"type"</span><span class="p">:</span> <span class="s2">"number"</span><span class="p">,</span>
      <span class="nt">"description"</span><span class="p">:</span> <span class="s2">"A whole number"</span>
    <span class="p">}</span><span class="err">,</span>
</code></pre></div>
<p>Usage of the type <code>number</code> causes problems for tools that generate classes from the json schema in that the <code>number</code> type gets represented by floating point types.</p>
<p>Any thoughts?</p>



<a name="219096470"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/json%20schema%20bug%3F/near/219096470" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/json.20schema.20bug.3F.html#219096470">(Dec 07 2020 at 15:49)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span></p>



<a name="219149625"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/json%20schema%20bug%3F/near/219149625" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/json.20schema.20bug.3F.html#219149625">(Dec 07 2020 at 22:48)</a>:</h4>
<p>what's the defintion of an integer in JSON schema?</p>



<a name="219206673"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/json%20schema%20bug%3F/near/219206673" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jim Williams <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/json.20schema.20bug.3F.html#219206673">(Dec 08 2020 at 13:36)</a>:</h4>
<p>6.25.  type</p>
<p>The value of this keyword MUST be either a string or an array.  If it<br>
   is an array, elements of the array MUST be strings and MUST be<br>
   unique.</p>
<p>String values MUST be one of the six primitive types ("null",<br>
   "boolean", "object", "array", "number", or "string"), or "integer"<br>
   which matches any number with a zero fractional part.</p>
<p>An instance validates if and only if the instance is in any of the<br>
   sets listed for this keyword.</p>
<p>this is from <a href="https://tools.ietf.org/html/draft-wright-json-schema-validation-01#section-6.25">https://tools.ietf.org/html/draft-wright-json-schema-validation-01#section-6.25</a>, which is the draft 6 version of the schema.</p>



<a name="219210648"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/json%20schema%20bug%3F/near/219210648" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/json.20schema.20bug.3F.html#219210648">(Dec 08 2020 at 14:13)</a>:</h4>
<p>Does it define what  the integer primitive type is somewhere?</p>



<a name="219214965"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/json%20schema%20bug%3F/near/219214965" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jim Williams <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/json.20schema.20bug.3F.html#219214965">(Dec 08 2020 at 14:50)</a>:</h4>
<p>I cannot find any definition of an integer other than the description given above.</p>



<a name="219216695"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/json%20schema%20bug%3F/near/219216695" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vassil Peytchev <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/json.20schema.20bug.3F.html#219216695">(Dec 08 2020 at 15:03)</a>:</h4>
<p>I found <a href="http://json-schema.org/understanding-json-schema/reference/numeric.html">this</a>, where it is stated (bolding is mine):</p>
<blockquote>
<p>The precise treatment of the “integer” type may depend on the implementation of your JSON Schema validator. <strong>JavaScript (and thus also JSON) does not have distinct types for integers and floating-point values. Therefore, JSON Schema can not use type alone to distinguish between integers and non-integers.</strong> The JSON Schema specification recommends, but does not require, that validators use the mathematical value to determine whether a number is an integer, and not the type alone. Therefore, there is some disagreement between validators on this point. For example, a JavaScript-based validator may accept 1.0 as an integer, whereas the Python-based jsonschema does not.</p>
</blockquote>



<a name="219262396"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/json%20schema%20bug%3F/near/219262396" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/json.20schema.20bug.3F.html#219262396">(Dec 08 2020 at 21:04)</a>:</h4>
<p>thanks. certain things about Json do not have a feel-good quality</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
