---
layout: page
title: "FHIR Chat  · Bundle (type = message) Validation · conformance"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/index.html">conformance</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Bundle.20(type.20.3D.20message).20Validation.html">Bundle (type = message) Validation</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="201688457"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Bundle%20%28type%20%3D%20message%29%20Validation/near/201688457" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Mayfield <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Bundle.20(type.20.3D.20message).20Validation.html#201688457">(Jun 23 2020 at 05:13)</a>:</h4>
<p>I've started creating a simple validation extension using MessageDefinition to control the (HAPI) validation.</p>
<p>Initial thought was to replace profile conformance  listed in the meta sections to match MessageDefinition requirements. <br>
So if the MessageDefinition states conformance against DM-MedicationRequest it will add that profile to MedicationRequest resources and so on.</p>



<a name="201688902"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Bundle%20%28type%20%3D%20message%29%20Validation/near/201688902" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Mayfield <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Bundle.20(type.20.3D.20message).20Validation.html#201688902">(Jun 23 2020 at 05:24)</a>:</h4>
<p>That works but in some cases I will references to say UKCore-Patient but I've changed the Patient to DM-Patient. <br>
The validator will throw up an error as it can't find a candidate UK-Core-Patient .... but DM-Patient is a derived profile of UKCore-Patient. So this should be ok?? &lt;-- This is the bit I'm unsure about. <br>
So </p>
<div class="codehilite"><pre><span></span><code>  <span class="nt">&lt;issue&gt;</span>
        <span class="nt">&lt;severity</span> <span class="na">value=</span><span class="s">&quot;error&quot;</span><span class="nt">&gt;&lt;/severity&gt;</span>
        <span class="nt">&lt;code</span> <span class="na">value=</span><span class="s">&quot;processing&quot;</span><span class="nt">&gt;&lt;/code&gt;</span>
        <span class="nt">&lt;diagnostics</span> <span class="na">value=</span><span class="s">&quot;Unable to find matching profile for urn:uuid:C6750CAA-3CA9-4F29-A282-6EE1AA5D7D4C among choices: https://fhir.nhs.uk/R4/StructureDefinition/DM-Patient&quot;</span><span class="nt">&gt;&lt;/diagnostics&gt;</span>
        <span class="nt">&lt;location</span> <span class="na">value=</span><span class="s">&quot;Bundle.entry[2].resource.ofType(MedicationRequest).subject&quot;</span><span class="nt">&gt;&lt;/location&gt;</span>
        <span class="nt">&lt;location</span> <span class="na">value=</span><span class="s">&quot;Line 41, Col 408&quot;</span><span class="nt">&gt;&lt;/location&gt;</span>
    <span class="nt">&lt;/issue&gt;</span>
</code></pre></div>



<a name="201689310"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Bundle%20%28type%20%3D%20message%29%20Validation/near/201689310" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Mayfield <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Bundle.20(type.20.3D.20message).20Validation.html#201689310">(Jun 23 2020 at 05:34)</a>:</h4>
<p><a href="/user_uploads/10155/I-kmVIcHbzSW32wSqxjCNc-T/Screenshot-2020-06-23-at-06.31.29.png">Screenshot-2020-06-23-at-06.31.29.png</a> </p>
<div class="message_inline_image"><a href="/user_uploads/10155/I-kmVIcHbzSW32wSqxjCNc-T/Screenshot-2020-06-23-at-06.31.29.png" title="Screenshot-2020-06-23-at-06.31.29.png"><img src="/user_uploads/10155/I-kmVIcHbzSW32wSqxjCNc-T/Screenshot-2020-06-23-at-06.31.29.png"></a></div><p>I think this shows where I'm unsure. I'm seeing that reference as either saying</p>
<ul>
<li>The reference should validate as DM-Patient</li>
<li>The reference should have a meta tag that says its DM-Patient and validates as DM-Patient.</li>
</ul>
<p>I think the former is correct.</p>



<a name="201689478"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Bundle%20%28type%20%3D%20message%29%20Validation/near/201689478" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Mayfield <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Bundle.20(type.20.3D.20message).20Validation.html#201689478">(Jun 23 2020 at 05:38)</a>:</h4>
<p>Background: The reason for not stating profile conformance in resources is to encourage reuse. E.g. the Patient resource X is sourced from service P and used to assemble a Bundle. Patient resource X is a UKCore-Patient, also P-Patient and also DM-Patient.</p>



<a name="201733004"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Bundle%20%28type%20%3D%20message%29%20Validation/near/201733004" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Bundle.20(type.20.3D.20message).20Validation.html#201733004">(Jun 23 2020 at 14:28)</a>:</h4>
<p>There should be an accompanying Info message that tells you <em>why</em> the instance wasn't a valid DM-Patient</p>



<a name="201733038"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Bundle%20%28type%20%3D%20message%29%20Validation/near/201733038" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Bundle.20(type.20.3D.20message).20Validation.html#201733038">(Jun 23 2020 at 14:28)</a>:</h4>
<p>There's no need to declare the profile in the instance - that's not what it's yelling about.</p>



<a name="201738234"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Bundle%20%28type%20%3D%20message%29%20Validation/near/201738234" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Mayfield <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Bundle.20(type.20.3D.20message).20Validation.html#201738234">(Jun 23 2020 at 15:06)</a>:</h4>
<p>I'll investigate more and double check that.  It is right the MessageDefinition defines the Bundle though? (I'm matching bundles to MessageDefinitions on event coding at the moment)</p>



<a name="201739803"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Bundle%20%28type%20%3D%20message%29%20Validation/near/201739803" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Bundle.20(type.20.3D.20message).20Validation.html#201739803">(Jun 23 2020 at 15:18)</a>:</h4>
<p>The MessageDefinition defines the content of the Bundle - via the focus profile or the GraphDefinition.  I don't think the GraphDefinition would actually describe the containing Bundle though.</p>



<a name="201816077"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Bundle%20%28type%20%3D%20message%29%20Validation/near/201816077" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Mayfield <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Bundle.20(type.20.3D.20message).20Validation.html#201816077">(Jun 24 2020 at 06:53)</a>:</h4>
<p>Thanks <span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> that was the issue. I was mislead by the error message.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
