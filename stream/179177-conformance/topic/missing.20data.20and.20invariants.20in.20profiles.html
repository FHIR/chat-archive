---
layout: page
title: "FHIR Chat  · missing data and invariants in profiles · conformance"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/index.html">conformance</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/missing.20data.20and.20invariants.20in.20profiles.html">missing data and invariants in profiles</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="234665779"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/missing%20data%20and%20invariants%20in%20profiles/near/234665779" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Julian Sass <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/missing.20data.20and.20invariants.20in.20profiles.html#234665779">(Apr 15 2021 at 12:28)</a>:</h4>
<p>When validating some resources against the vital signs profiles in the core spec, the additional constraint on <code>effective[x]</code> is raising a question for me, e.g. on <a href="http://hl7.org/fhir/StructureDefinition/bodyweight">http://hl7.org/fhir/StructureDefinition/bodyweight</a>. I was expecting to be allowed to use the <code>dataAbsentReason</code> extension on <code>effectiveDateTime</code> in case the time is unknown, but the validator throws an error due to <code>vs-1: if Observation.effective[x] is dateTime and has a value then that value shall be precise to the day</code>. I can see that  with <code>($this as dateTime).toString().length() &gt;= 8"</code> the extension is treated as dateTime which returns an empty result which is then evaluated and raises the error. Now from a conformance perspective, is the profile's intent here to make the actual value of type dateTime mandatory? Because my understanding of the invariant's human-readable description is less strict and would allow the use of extensions.</p>



<a name="234749169"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/missing%20data%20and%20invariants%20in%20profiles/near/234749169" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/missing.20data.20and.20invariants.20in.20profiles.html#234749169">(Apr 15 2021 at 20:42)</a>:</h4>
<p>The way the invariant is written, it doesn't allow for extensions.  This is addressed in R5, but I'm afraid it's broken in R4.</p>



<a name="234804330"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/missing%20data%20and%20invariants%20in%20profiles/near/234804330" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Julian Sass <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/missing.20data.20and.20invariants.20in.20profiles.html#234804330">(Apr 16 2021 at 07:03)</a>:</h4>
<p>Thanks for the clarification</p>



<a name="234825245"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/missing%20data%20and%20invariants%20in%20profiles/near/234825245" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Julian Sass <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/missing.20data.20and.20invariants.20in.20profiles.html#234825245">(Apr 16 2021 at 09:51)</a>:</h4>
<p><span class="user-mention" data-user-id="343284">@Cornelius Erbelding</span> fyi</p>



<a name="236673895"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/missing%20data%20and%20invariants%20in%20profiles/near/236673895" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Zautke <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/missing.20data.20and.20invariants.20in.20profiles.html#236673895">(Apr 29 2021 at 13:37)</a>:</h4>
<p>Looking at <a href="http://jira.hl7.org/browse/FHIR-29654">J#29654</a> and the proposed solution here: <a href="#narrow/stream/179309-inferno/topic/Single.20Patient.20API.20Observation.20Tests">https://chat.fhir.org/#narrow/stream/179309-inferno/topic/Single.20Patient.20API.20Observation.20Tests</a></p>
<p>Wouldn't it be necessary to add a hasValue check to the existence check for Observation.effectiveDateTime? Like "Observation.effectiveDateTime.hasValue() implies Observation.effectiveDateTime.toString().length() &gt;= 8"?</p>



<a name="236683768"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/missing%20data%20and%20invariants%20in%20profiles/near/236683768" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/missing.20data.20and.20invariants.20in.20profiles.html#236683768">(Apr 29 2021 at 14:37)</a>:</h4>
<p>Yes.  Can you post a comment to the issue?</p>



<a name="236683956"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/missing%20data%20and%20invariants%20in%20profiles/near/236683956" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Julian Sass <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/missing.20data.20and.20invariants.20in.20profiles.html#236683956">(Apr 29 2021 at 14:39)</a>:</h4>
<p>I put <code>($this.exists() is dateTime) implies ($this.exists().toString().length() &gt;=8)</code> on effectiveDateTime and it seems to work. Never knew about the other solution :)</p>



<a name="236684350"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/missing%20data%20and%20invariants%20in%20profiles/near/236684350" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/missing.20data.20and.20invariants.20in.20profiles.html#236684350">(Apr 29 2021 at 14:41)</a>:</h4>
<p>exists would return a boolean and should never <em>be</em> dateTime.  And exists().toString() ought to be 'true' or 'false' and thus never &gt;= 8...</p>



<a name="236685325"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/missing%20data%20and%20invariants%20in%20profiles/near/236685325" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Julian Sass <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/missing.20data.20and.20invariants.20in.20profiles.html#236685325">(Apr 29 2021 at 14:46)</a>:</h4>
<p>Arg right, it doesn't check the date properly.</p>



<a name="236687730"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/missing%20data%20and%20invariants%20in%20profiles/near/236687730" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andrea Essenwanger <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/missing.20data.20and.20invariants.20in.20profiles.html#236687730">(Apr 29 2021 at 15:00)</a>:</h4>
<p>ok.. how does <code>implies</code> work exactly? I mean if I have <code>(expression1) implies (expression2)</code> and <code>expression1</code> is false, does <code>implies</code> mean that <code>expression2</code> won't have to be proven? Or does FHIRPath still look into <code>expression2</code> anyways?</p>



<a name="236690656"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/missing%20data%20and%20invariants%20in%20profiles/near/236690656" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Zautke <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/missing.20data.20and.20invariants.20in.20profiles.html#236690656">(Apr 29 2021 at 15:09)</a>:</h4>
<p>See <a href="http://hl7.org/fhirpath/#implies">http://hl7.org/fhirpath/#implies</a></p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
