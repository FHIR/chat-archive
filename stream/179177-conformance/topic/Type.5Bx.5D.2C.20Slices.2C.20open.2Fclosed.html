---
layout: page
title: "FHIR Chat  · Type[x], Slices, open/closed · conformance"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/index.html">conformance</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Type.5Bx.5D.2C.20Slices.2C.20open.2Fclosed.html">Type[x], Slices, open/closed</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="182253089"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Type%5Bx%5D%2C%20Slices%2C%20open/closed/near/182253089" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Type.5Bx.5D.2C.20Slices.2C.20open.2Fclosed.html#182253089">(Nov 30 2019 at 20:03)</a>:</h4>
<p>I'm continuing to work through the issues the snapshot generator has with the Dutch profiles. </p>
<p>I've run into something I'm not sure we've discussed, around slicing on elements that have a choice of types.</p>
<p>In (B) the base spec, an element that has a choice of types is sliced by type on $this, and closed.<br>
In (C) a derived profile, the profile constrains one of the types, but says that the slicing is open <br>
In (D) a derived profile on profile (C), it profiles one of the types (a different one) but says that the slicing is open<br>
In (E) a derived profile on profile (C), it profiles one of the types (the same one) but says that the slicing is open</p>
<p>.. the java snapshot generator just refuses to process this.</p>
<p>I think that it remains closed, irrespective of what C|D|E claim... but they just don't close off the other slices if they claim it's open. Is that right?</p>
<p>I'm hoping someone from firely (<span class="user-mention" data-user-id="191336">@Michel Rutten</span>, <span class="user-mention" data-user-id="191335">@Martijn Harthoorn</span>, <span class="user-mention" data-user-id="191757">@Christiaan Knaap</span> ?) can clarify how the C# snapshot generator works on this</p>



<a name="182344603"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Type%5Bx%5D%2C%20Slices%2C%20open/closed/near/182344603" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Christiaan Knaap <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Type.5Bx.5D.2C.20Slices.2C.20open.2Fclosed.html#182344603">(Dec 02 2019 at 13:29)</a>:</h4>
<p><span class="user-mention" data-user-id="193551">@Marco Visser</span> for the C# snapshot generator</p>



<a name="182407333"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Type%5Bx%5D%2C%20Slices%2C%20open/closed/near/182407333" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Type.5Bx.5D.2C.20Slices.2C.20open.2Fclosed.html#182407333">(Dec 03 2019 at 01:19)</a>:</h4>
<p>I added some tests around this. I strongly encourage <span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> and <span class="user-mention" data-user-id="193551">@Marco Visser</span> to review this commit:</p>



<a name="182407403"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Type%5Bx%5D%2C%20Slices%2C%20open/closed/near/182407403" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Type.5Bx.5D.2C.20Slices.2C.20open.2Fclosed.html#182407403">(Dec 03 2019 at 01:20)</a>:</h4>
<p><a href="https://github.com/FHIR/fhir-test-cases/commit/81ae5978bc2b8562e5aff0da066a0d80d453bea8" target="_blank" title="https://github.com/FHIR/fhir-test-cases/commit/81ae5978bc2b8562e5aff0da066a0d80d453bea8">https://github.com/FHIR/fhir-test-cases/commit/81ae5978bc2b8562e5aff0da066a0d80d453bea8</a></p>



<a name="182429839"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Type%5Bx%5D%2C%20Slices%2C%20open/closed/near/182429839" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marco Visser <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Type.5Bx.5D.2C.20Slices.2C.20open.2Fclosed.html#182429839">(Dec 03 2019 at 09:39)</a>:</h4>
<p>Thanks <span class="user-mention" data-user-id="191316">@Grahame Grieve</span>  I will incorporate those tests in our fhir-net-api unittests in the coming week. But first I am all focused on the technical correction (4.0.1), so that our fhir-net-api is working again.</p>



<a name="182430083"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Type%5Bx%5D%2C%20Slices%2C%20open/closed/near/182430083" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Type.5Bx.5D.2C.20Slices.2C.20open.2Fclosed.html#182430083">(Dec 03 2019 at 09:42)</a>:</h4>
<p>ok thanks</p>



<a name="182754793"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Type%5Bx%5D%2C%20Slices%2C%20open/closed/near/182754793" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marten Smits <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Type.5Bx.5D.2C.20Slices.2C.20open.2Fclosed.html#182754793">(Dec 06 2019 at 12:22)</a>:</h4>
<p>Hi Grahame, I'm looking into this now. Got them loaded into our unit tests. First issue I encountered was that obs 1-0  obs1-1 and obs 1-2 all have  to same canonical URL. And that obs1-1 and obs 1-2 have a baseDefinition that is the same as their canonical URLs.</p>
<p>And obs1_2, obs2_3, and obs3_0, don't have an -expected file. Is that on purpose?</p>



<a name="182788366"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Type%5Bx%5D%2C%20Slices%2C%20open/closed/near/182788366" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Type.5Bx.5D.2C.20Slices.2C.20open.2Fclosed.html#182788366">(Dec 06 2019 at 18:20)</a>:</h4>
<p>generating a snapshot fails for 1-2, 2-3 and 3 all are illegal so there's no snapshot</p>



<a name="182788610"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Type%5Bx%5D%2C%20Slices%2C%20open/closed/near/182788610" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Type.5Bx.5D.2C.20Slices.2C.20open.2Fclosed.html#182788610">(Dec 06 2019 at 18:23)</a>:</h4>
<p>I'll fix the URLs</p>



<a name="182937445"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Type%5Bx%5D%2C%20Slices%2C%20open/closed/near/182937445" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marten Smits <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Type.5Bx.5D.2C.20Slices.2C.20open.2Fclosed.html#182937445">(Dec 09 2019 at 09:32)</a>:</h4>
<p>Alright, I'll compare our results, and will get back to you</p>



<a name="182965439"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Type%5Bx%5D%2C%20Slices%2C%20open/closed/near/182965439" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marten Smits <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Type.5Bx.5D.2C.20Slices.2C.20open.2Fclosed.html#182965439">(Dec 09 2019 at 15:24)</a>:</h4>
<p>Compared results and have two major differences:<br>
- In obs-1 you leave out the discriminator in the diff, and implicitly assume a slice on <code>value[x]</code> is a type slice, with discriminator <code>$this</code>. Is it best practice to leave it out of the diff? I'd expect an editor tool to handle implicit type slices and give the snapshot generator explicit instructions. The .NET snapshot generator in this case only "copies" over <code>slicing.rules</code> from the diff to the snapshot, and doesn't do the magic you do.<br>
And íf you leave out the discriminator, you should add a slicing.description according to eld-1.</p>
<p>- In obs-2 the diff says:</p>
<div class="codehilite"><pre><span></span> &lt;element&gt;
      &lt;path value=&quot;Observation.value[x]&quot;/&gt;
      &lt;slicing&gt;
        &lt;rules value=&quot;open&quot;/&gt;
      &lt;/slicing&gt;
      &lt;type&gt;
        &lt;code value=&quot;CodeableConcept&quot;/&gt;
      &lt;/type&gt;
    &lt;/element&gt;
    &lt;element&gt;
      &lt;path value=&quot;Observation.value[x]&quot;/&gt;
      &lt;sliceName value=&quot;valueCodeableConcept&quot;/&gt;
      &lt;type&gt;
        &lt;code value=&quot;CodeableConcept&quot;/&gt;
      &lt;/type&gt;
      &lt;binding&gt;
        &lt;strength value=&quot;required&quot;/&gt;
        &lt;valueSet value=&quot;http://somewhere/something&quot;/&gt;
      &lt;/binding&gt;
    &lt;/element&gt;
  &lt;/differential&gt;
</pre></div>


<p>And in the snapshot <code>slice.rules</code>  is suddenly closed, and all original types are repeated again in the type array. I think that this indeed means the same thing, but it is not behavior I'd expect at all. I always thought that if you edit the type array in the diff, the whole list becomes the new truth, and that this is also the appropriate way to constrain types out for example. Otherwise you can only do that by introducing a type slice and close it explicitly? <br>
I thought type slices are always closed and you explicitly specify which types are allowed in the type array in the diff. And if you want to include all the allowed types, you leave out the type array entirely in the diff.</p>



<a name="183030333"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Type%5Bx%5D%2C%20Slices%2C%20open/closed/near/183030333" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Type.5Bx.5D.2C.20Slices.2C.20open.2Fclosed.html#183030333">(Dec 10 2019 at 05:23)</a>:</h4>
<blockquote>
<p>Is it best practice to leave it out of the diff?</p>
</blockquote>
<p>no. but it's allowed</p>



<a name="183030391"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Type%5Bx%5D%2C%20Slices%2C%20open/closed/near/183030391" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Type.5Bx.5D.2C.20Slices.2C.20open.2Fclosed.html#183030391">(Dec 10 2019 at 05:24)</a>:</h4>
<p>with regard to 2... I asked... but if the list of slices is closed, and you constrain one and leave the others open... then it's still closed when you're done, you just left the others untouched</p>



<a name="183030393"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Type%5Bx%5D%2C%20Slices%2C%20open/closed/near/183030393" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Type.5Bx.5D.2C.20Slices.2C.20open.2Fclosed.html#183030393">(Dec 10 2019 at 05:24)</a>:</h4>
<p>so that's what the test is testing</p>



<a name="183046338"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Type%5Bx%5D%2C%20Slices%2C%20open/closed/near/183046338" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marten Smits <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Type.5Bx.5D.2C.20Slices.2C.20open.2Fclosed.html#183046338">(Dec 10 2019 at 10:21)</a>:</h4>
<blockquote>
<blockquote>
<p>Is it best practice to leave it out of the diff?</p>
</blockquote>
<p>no. but it's allowed</p>
</blockquote>
<p>Ok, I'll file an issue here to handle that in the .NET snapshotgenerator</p>



<a name="183048734"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Type%5Bx%5D%2C%20Slices%2C%20open/closed/near/183048734" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marten Smits <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Type.5Bx.5D.2C.20Slices.2C.20open.2Fclosed.html#183048734">(Dec 10 2019 at 10:54)</a>:</h4>
<blockquote>
<p>with regard to 2... I asked... but if the list of slices is closed, and you constrain one and leave the others open... then it's still closed when you're done, you just left the others untouched</p>
</blockquote>
<p>Agree.</p>



<a name="183049303"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Type%5Bx%5D%2C%20Slices%2C%20open/closed/near/183049303" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marten Smits <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Type.5Bx.5D.2C.20Slices.2C.20open.2Fclosed.html#183049303">(Dec 10 2019 at 11:02)</a>:</h4>
<p>But then you should still mention all possible types in the diff of the slice intro. Otherwise how will you specify this that you type slice (open), only allow codeableconcept and quantity, and put a binding on codeableconcept. I think that should look like this:</p>
<div class="codehilite"><pre><span></span>&lt;differential&gt;
   &lt;element&gt;
    &lt;path value=&quot;Observation.value[x]&quot;/&gt;
    &lt;slicing&gt;
      &lt;rules value=&quot;open&quot;/&gt;
    &lt;/slicing&gt;
    &lt;type&gt;
      &lt;code value=&quot;CodeableConcept&quot;/&gt;
    &lt;/type&gt;
    &lt;type&gt;
      &lt;code value=&quot;Quantity&quot;/&gt;
    &lt;/type&gt;
  &lt;/element&gt;
  &lt;element&gt;
    &lt;path value=&quot;Observation.value[x]&quot;/&gt;
    &lt;sliceName value=&quot;valueCodeableConcept&quot;/&gt;
    &lt;type&gt;
      &lt;code value=&quot;CodeableConcept&quot;/&gt;
    &lt;/type&gt;
    &lt;binding&gt;
      &lt;strength value=&quot;required&quot;/&gt;
      &lt;valueSet value=&quot;http://somewhere/something&quot;/&gt;
    &lt;/binding&gt;
  &lt;/element&gt;
&lt;/differential&gt;
</pre></div>


<p>And if that's true, obs-2 actually describes only codeableconcept is allowed, right?</p>



<a name="183116652"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Type%5Bx%5D%2C%20Slices%2C%20open/closed/near/183116652" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Type.5Bx.5D.2C.20Slices.2C.20open.2Fclosed.html#183116652">(Dec 11 2019 at 00:22)</a>:</h4>
<p>actually, you're right. I updated the tests and added some more</p>



<a name="183136691"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Type%5Bx%5D%2C%20Slices%2C%20open/closed/near/183136691" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marten Smits <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Type.5Bx.5D.2C.20Slices.2C.20open.2Fclosed.html#183136691">(Dec 11 2019 at 08:37)</a>:</h4>
<p>Nice, I'll make time tomorrow to have a look</p>



<a name="183564971"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Type%5Bx%5D%2C%20Slices%2C%20open/closed/near/183564971" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marten Smits <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Type.5Bx.5D.2C.20Slices.2C.20open.2Fclosed.html#183564971">(Dec 16 2019 at 16:24)</a>:</h4>
<p>Didn't have time to test this last week and now my holiday has started, so I postponed this to the new year. Will get back to you then.</p>



<a name="185200262"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Type%5Bx%5D%2C%20Slices%2C%20open/closed/near/185200262" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marten Smits <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Type.5Bx.5D.2C.20Slices.2C.20open.2Fclosed.html#185200262">(Jan 09 2020 at 10:39)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> <br>
I  have picked this up again.</p>
<p>Loaded the new tests. I still have doubts about type slices automatically closing:</p>
<p>In obs-2 the differential states in the slice intro that the slice is open, and after that a binding is set to <code>valueCodeableConcept</code> <br>
Can you explain why this slice would be closed after snapshot generation? This means I can't introduce a new slice in a derived profile, if I for example want to put a binding on <code>valueQuantity</code>, right?</p>



<a name="185816584"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Type%5Bx%5D%2C%20Slices%2C%20open/closed/near/185816584" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marten Smits <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Type.5Bx.5D.2C.20Slices.2C.20open.2Fclosed.html#185816584">(Jan 16 2020 at 13:58)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> is this still on something you are looking into/ thinking about?</p>



<a name="187027184"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Type%5Bx%5D%2C%20Slices%2C%20open/closed/near/187027184" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Type.5Bx.5D.2C.20Slices.2C.20open.2Fclosed.html#187027184">(Jan 30 2020 at 20:28)</a>:</h4>
<p>sorry. finally getting to this <span class="user-mention" data-user-id="191334">@Marten Smits</span></p>



<a name="187027404"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Type%5Bx%5D%2C%20Slices%2C%20open/closed/near/187027404" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Type.5Bx.5D.2C.20Slices.2C.20open.2Fclosed.html#187027404">(Jan 30 2020 at 20:30)</a>:</h4>
<ul>
<li>In the base Observation, the type slicing is closed</li>
</ul>



<a name="187027468"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Type%5Bx%5D%2C%20Slices%2C%20open/closed/near/187027468" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Type.5Bx.5D.2C.20Slices.2C.20open.2Fclosed.html#187027468">(Jan 30 2020 at 20:31)</a>:</h4>
<ul>
<li>In obs-2-input, the profile slices it, and says that it's open. That is, it is making rules about one of the slices, and not saying anything about the others</li>
</ul>



<a name="187027542"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Type%5Bx%5D%2C%20Slices%2C%20open/closed/near/187027542" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Type.5Bx.5D.2C.20Slices.2C.20open.2Fclosed.html#187027542">(Jan 30 2020 at 20:32)</a>:</h4>
<ul>
<li>so the generated snapshot notes those rules, but still has the same closed slicing as the base Observation</li>
</ul>



<a name="187027582"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Type%5Bx%5D%2C%20Slices%2C%20open/closed/near/187027582" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Type.5Bx.5D.2C.20Slices.2C.20open.2Fclosed.html#187027582">(Jan 30 2020 at 20:32)</a>:</h4>
<ul>
<li>you can profile a different slice in a derived profile</li>
</ul>



<a name="187553469"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Type%5Bx%5D%2C%20Slices%2C%20open/closed/near/187553469" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marten Smits <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Type.5Bx.5D.2C.20Slices.2C.20open.2Fclosed.html#187553469">(Feb 06 2020 at 14:44)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> Can you explain why type slicing is closed in the base Observation in obs-2? Is that the default for type slicing? Obs-2 is a profile on the core Observation.</p>



<a name="187578005"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Type%5Bx%5D%2C%20Slices%2C%20open/closed/near/187578005" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Type.5Bx.5D.2C.20Slices.2C.20open.2Fclosed.html#187578005">(Feb 06 2020 at 19:05)</a>:</h4>
<p>type slices re always closed, because you can't add any more slices than exist to start wit h</p>



<a name="187802799"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Type%5Bx%5D%2C%20Slices%2C%20open/closed/near/187802799" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marten Smits <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Type.5Bx.5D.2C.20Slices.2C.20open.2Fclosed.html#187802799">(Feb 10 2020 at 10:12)</a>:</h4>
<p>Ah yeah fair enough</p>



<a name="188911145"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Type%5Bx%5D%2C%20Slices%2C%20open/closed/near/188911145" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ward Weistra <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Type.5Bx.5D.2C.20Slices.2C.20open.2Fclosed.html#188911145">(Feb 24 2020 at 09:34)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="191316">@Grahame Grieve</span>, we were having an internal discussion whether you see the use of <code>&lt;rules value="open"/&gt;</code> in <a href="https://github.com/FHIR/fhir-test-cases/blob/81ae5978bc2b8562e5aff0da066a0d80d453bea8/r5/snapshot-generation/obs-2-input.xml" target="_blank" title="https://github.com/FHIR/fhir-test-cases/blob/81ae5978bc2b8562e5aff0da066a0d80d453bea8/r5/snapshot-generation/obs-2-input.xml">obs-2-input.xml</a> as a user error that you're ignoring or correct way of saying "it is making rules about one of the slices, and not saying anything about the others".</p>



<a name="188919390"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Type%5Bx%5D%2C%20Slices%2C%20open/closed/near/188919390" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Type.5Bx.5D.2C.20Slices.2C.20open.2Fclosed.html#188919390">(Feb 24 2020 at 12:00)</a>:</h4>
<p>this:</p>
<blockquote>
<p>a correct way of saying "it is making rules about one of the slices, and not saying anything about the others</p>
</blockquote>



<a name="188924523"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Type%5Bx%5D%2C%20Slices%2C%20open/closed/near/188924523" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ward Weistra <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Type.5Bx.5D.2C.20Slices.2C.20open.2Fclosed.html#188924523">(Feb 24 2020 at 13:18)</a>:</h4>
<p>OK, so instead of slicing rules saying something about the value (open/closed) you want to have in the resulting snapshot, it says something about how the diff content should be interpreted.</p>
<p>Is the following description then correct?<br>
Assuming we have a <strong>closed</strong> base slice with four allowed slices and I'm describing constraints for only two of them in my profile:</p>
<ul>
<li>If I set slicing rules value to <strong>open</strong>: The resulting snapshot will still allow the four slices, of which two with additional constraints</li>
<li>If I set slicing rules value to <strong>closed</strong>: The resulting snapshot will only allow the two described slices with the additional constraints</li>
</ul>
<p>Assuming we have an <strong>open</strong> base slice with four allowed slices and I'm describing constraints for only two of them in my profile:</p>
<ul>
<li>If I set slicing rules value to <strong>open</strong>: The resulting snapshot will still allow the four slices, of which two with additional constraints, plus additional slices</li>
<li>If I set slicing rules value to <strong>closed</strong>: The resulting snapshot will only allow the two described slices with the additional constraints</li>
</ul>



<a name="188957834"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Type%5Bx%5D%2C%20Slices%2C%20open/closed/near/188957834" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Type.5Bx.5D.2C.20Slices.2C.20open.2Fclosed.html#188957834">(Feb 24 2020 at 19:31)</a>:</h4>
<p>yes I think so</p>



<a name="189009054"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Type%5Bx%5D%2C%20Slices%2C%20open/closed/near/189009054" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Type.5Bx.5D.2C.20Slices.2C.20open.2Fclosed.html#189009054">(Feb 25 2020 at 10:56)</a>:</h4>
<p>Mmmm....the thing that's a bit weird here is that the slice open/close indication turns from an aspect of the slice to an interpretation hint for the snapshot generator.   I.e. logically, you could never turn a closed slice in the base into an open one, but we now still allow it here because it has morphed into an indication of how the differential is to be interpreted.  That might be nit-picking, and in any case I believe this train has probably left the station ;-)</p>



<a name="189009249"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Type%5Bx%5D%2C%20Slices%2C%20open/closed/near/189009249" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Type.5Bx.5D.2C.20Slices.2C.20open.2Fclosed.html#189009249">(Feb 25 2020 at 10:58)</a>:</h4>
<p>Maybe, for completeness, we should then add the final open/closed state of the slice after executing this interpretation.  I think this is meant to be:</p>
<ul>
<li>When the base was closed - the slice remains closed (even if though have "open" in the differential)</li>
<li>When the base was open - with diff=open =&gt; the slice remains open.   with diff=closed =&gt; the slice becomes closed.</li>
</ul>



<a name="189010505"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Type%5Bx%5D%2C%20Slices%2C%20open/closed/near/189010505" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Type.5Bx.5D.2C.20Slices.2C.20open.2Fclosed.html#189010505">(Feb 25 2020 at 11:16)</a>:</h4>
<p>yes.</p>



<a name="189010510"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Type%5Bx%5D%2C%20Slices%2C%20open/closed/near/189010510" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Type.5Bx.5D.2C.20Slices.2C.20open.2Fclosed.html#189010510">(Feb 25 2020 at 11:16)</a>:</h4>
<p>I don't see how it can be any other way</p>



<a name="189010513"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Type%5Bx%5D%2C%20Slices%2C%20open/closed/near/189010513" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Type.5Bx.5D.2C.20Slices.2C.20open.2Fclosed.html#189010513">(Feb 25 2020 at 11:16)</a>:</h4>
<p>(and welcome back)</p>



<a name="190231350"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Type%5Bx%5D%2C%20Slices%2C%20open/closed/near/190231350" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Type.5Bx.5D.2C.20Slices.2C.20open.2Fclosed.html#190231350">(Mar 10 2020 at 22:06)</a>:</h4>
<p>Seems a bizarre interpretation to me...if the base is closed, the differential can't be anything but closed. If the differential intends to limit the list to a smaller set of slices, it should max:0 the disallowed slices, not provide a new list.  IMO, a diff of <code>open</code> over a base of <code>closed</code> is an error.</p>



<a name="190231378"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Type%5Bx%5D%2C%20Slices%2C%20open/closed/near/190231378" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Type.5Bx.5D.2C.20Slices.2C.20open.2Fclosed.html#190231378">(Mar 10 2020 at 22:06)</a>:</h4>
<p>And yes, welcome back <span class="user-mention" data-user-id="191328">@Ewout Kramer</span> !</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
