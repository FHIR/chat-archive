---
layout: page
title: "FHIR Chat  · Walking into a contained resource · conformance"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/index.html">conformance</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Walking.20into.20a.20contained.20resource.html">Walking into a contained resource</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153896010"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Walking%20into%20a%20contained%20resource/near/153896010" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Walking.20into.20a.20contained.20resource.html#153896010">(Jul 04 2017 at 09:30)</a>:</h4>
<p>I found a subtle bug in my validator, that I think is of interest to a broader audience.</p>
<p>My base assumption is that the snapshot is always complete. To be more precise, I have an assumption in my validator that if an element has children in a StructureDefinition, it has all of the children for that element.  E.g. although in a differential you would just have Patient.name.family, the snapshot would have all the other siblings (like given) too.  That seemed a fair assumption, until I met a profile that constrained  Bundle.entry.resource.Meta. </p>
<p>This highlighed a problem: the snapshot generator only knows that Bundle.entry.resource is of type Resource, so while walking into this element, it will expand it and add the elements of Resource under Bundle.entry.resource. However, in a real instance Bundle.entry.resource will contain more elements than those of Resource (say, <a href="http://Patient.name" target="_blank" title="http://Patient.name">Patient.name</a>). Since my validator assumes a snapshot is "complete", it will now complain about the extra elements (all of them - except the ones from Resource) found in the instance.</p>
<p>It's not insurmountable, but I thought I'd share the fact that snapshots are thus "mostly complete", but need some extra intelligence when dealing with "contained", Bundle.entry.resource and Parameters.parameter.resource, and maybe others.</p>



<a name="153896023"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Walking%20into%20a%20contained%20resource/near/153896023" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Walking.20into.20a.20contained.20resource.html#153896023">(Jul 04 2017 at 15:30)</a>:</h4>
<p>Make sure you add a test-case to the shared test cases :)</p>



<a name="153896047"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Walking%20into%20a%20contained%20resource/near/153896047" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Walking.20into.20a.20contained.20resource.html#153896047">(Jul 05 2017 at 05:32)</a>:</h4>
<p>Great find!</p>



<a name="153896050"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Walking%20into%20a%20contained%20resource/near/153896050" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Walking.20into.20a.20contained.20resource.html#153896050">(Jul 05 2017 at 05:42)</a>:</h4>
<p>under what conditions does the snapshot generator walk into Bundle.Entry.resource?</p>



<a name="153896205"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Walking%20into%20a%20contained%20resource/near/153896205" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Walking.20into.20a.20contained.20resource.html#153896205">(Jul 06 2017 at 14:56)</a>:</h4>
<p>Noted!</p>



<a name="153896206"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Walking%20into%20a%20contained%20resource/near/153896206" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Walking.20into.20a.20contained.20resource.html#153896206">(Jul 06 2017 at 14:57)</a>:</h4>
<p>You walk into it when you add constraints to Bundle.entry.resource.meta or Bundle.entry.resource.profile for example....</p>



<a name="153896207"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Walking%20into%20a%20contained%20resource/near/153896207" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Walking.20into.20a.20contained.20resource.html#153896207">(Jul 06 2017 at 14:57)</a>:</h4>
<p>(esoteric, ok, but possible)</p>



<a name="153896328"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Walking%20into%20a%20contained%20resource/near/153896328" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Walking.20into.20a.20contained.20resource.html#153896328">(Jul 07 2017 at 11:42)</a>:</h4>
<p>I don't even know what the java snapshot generator will do in that case</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
