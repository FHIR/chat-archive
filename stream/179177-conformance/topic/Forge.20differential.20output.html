---
layout: page
title: "FHIR Chat  · Forge differential output · conformance"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/index.html">conformance</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Forge.20differential.20output.html">Forge differential output</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153852485"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Forge%20differential%20output/near/153852485" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonny Rylands <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Forge.20differential.20output.html#153852485">(Oct 10 2016 at 22:55)</a>:</h4>
<p><span class="user-mention" data-user-id="191336">@Michel Rutten</span> Hi Michel, I've noticed a variation in the output of the differential section when changing the snapshot generation on and off.  When snapshot generation is off, element definitions in the differential section only have individual fields which have changed, when turned on the element definitions have all fields.  Is this intentional?  Which version is "correct"?</p>



<a name="153852540"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Forge%20differential%20output/near/153852540" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Forge.20differential.20output.html#153852540">(Oct 11 2016 at 10:59)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="191495">@Jonny Rylands</span> this sounds like a bug. The differential component should only contain actual constraints (sparse tree). The snapshot component represents the fully expanded profile.<br>
Recently I've been working on a complete re-implementation of snapshot generation, as part of our open source FHIR .NET API library. The next Forge release will be based on this new logic. Also I am now reimplementing Forge change tracking logic, which is crucial for filtering the diffential. It's quite a bit of work, but this will improve the quality and stability of the generated output.</p>



<a name="153852541"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Forge%20differential%20output/near/153852541" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonny Rylands <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Forge.20differential.20output.html#153852541">(Oct 11 2016 at 11:04)</a>:</h4>
<p><span class="user-mention" data-user-id="191336">@Michel Rutten</span> Just to be clear - it's not that the differential output contains unchanged elements in snapshot mode - it's that the individual fields within the changed elements vary.</p>



<a name="153852542"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Forge%20differential%20output/near/153852542" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Forge.20differential.20output.html#153852542">(Oct 11 2016 at 11:07)</a>:</h4>
<p><span class="user-mention" data-user-id="191495">@Jonny Rylands</span> So you are referring to element properties? Forge should also try to exclude unconstrained properties from the differential, but apparently you have discovered that this is currently not reliable.</p>



<a name="153852543"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Forge%20differential%20output/near/153852543" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Forge.20differential.20output.html#153852543">(Oct 11 2016 at 11:08)</a>:</h4>
<p>Anyway, the current change tracking logic is in dire need of refactoring. So we decided to focus on fully reimplementing this layer, instead of trying to keep fixing bugs (and introducing new regressions).</p>



<a name="153852544"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Forge%20differential%20output/near/153852544" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonny Rylands <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Forge.20differential.20output.html#153852544">(Oct 11 2016 at 11:10)</a>:</h4>
<p><span class="user-mention" data-user-id="191336">@Michel Rutten</span> Yes that's right.  So for example if you change cardinality from 0..* to 0..1.   With snapshot generation turned OFF, the differential for this element will contain only MAX.  With snapshot generation turned ON, the differential for this element with contain both MIN and MAX (along with all other unchanged properties).</p>



<a name="153852545"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Forge%20differential%20output/near/153852545" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonny Rylands <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Forge.20differential.20output.html#153852545">(Oct 11 2016 at 11:11)</a>:</h4>
<p>I understand that snapshot generation is supposed to output everything, but I believe this shouldn't affect the differential output - only the snapshot output.</p>



<a name="153852548"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Forge%20differential%20output/near/153852548" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Forge.20differential.20output.html#153852548">(Oct 11 2016 at 11:53)</a>:</h4>
<p><span class="user-mention" data-user-id="191495">@Jonny Rylands</span> correct, so the Forge behavior is indeed a bug.</p>



<a name="153852551"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Forge%20differential%20output/near/153852551" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonny Rylands <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Forge.20differential.20output.html#153852551">(Oct 11 2016 at 11:56)</a>:</h4>
<p><span class="user-mention" data-user-id="191336">@Michel Rutten</span> OK, so the correct differential output is that made when snapshot generation is turned off?</p>



<a name="153852555"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Forge%20differential%20output/near/153852555" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Forge.20differential.20output.html#153852555">(Oct 11 2016 at 12:03)</a>:</h4>
<p><span class="user-mention" data-user-id="191495">@Jonny Rylands</span> that is correct. According to FHIR spec, the differential component should only contain actual constraints (on elements &amp; element properties) with respect to the base profile.</p>



<a name="153852556"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Forge%20differential%20output/near/153852556" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonny Rylands <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Forge.20differential.20output.html#153852556">(Oct 11 2016 at 12:04)</a>:</h4>
<p>OK thanks.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
