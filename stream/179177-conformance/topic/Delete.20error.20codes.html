---
layout: page
title: "FHIR Chat  · Delete error codes · conformance"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/index.html">conformance</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Delete.20error.20codes.html">Delete error codes</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="220664646"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Delete%20error%20codes/near/220664646" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Delete.20error.20codes.html#220664646">(Dec 22 2020 at 07:18)</a>:</h4>
<p>Reading the spec, when we try to delete a non-existing resource, we should get a success code - 200 / 202 / 204 response. (I'd guess a 204?) .<br>
I was asked if this contradicts the RFC7321 which describes that the code 404 can be used also when a server does not want to reveal whether a resource exists.</p>
<p>My take on this is that  the 200 is more opaque - it just says that the server accepts to process the delete request, without saying it is an error or not. Is this a correct summay?</p>



<a name="220692804"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Delete%20error%20codes/near/220692804" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Delete.20error.20codes.html#220692804">(Dec 22 2020 at 14:14)</a>:</h4>
<p><span class="user-mention" data-user-id="191404">@John Moehrke</span></p>



<a name="220694118"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Delete%20error%20codes/near/220694118" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Delete.20error.20codes.html#220694118">(Dec 22 2020 at 14:28)</a>:</h4>
<p>There are many ways that an attacker can infer information thru sending delete requests. An attacker can see different return codes, and could then determine if the resource existed or did not exist. Thus leaking knowledge, however small...    As with any access control failure, the actual returned code should be driven by policy.  This is especially true for those apps or users without rights to do the action.<br>
The problem is that an authorized app needs to get useful codes so that it can tell if the resource was properly deleted.</p>
<p>THIS does not address your specific situation of an authorized app deleting a non-existing resource... I would still recommend that the client be ready for MANY possible results including 404, 200, 202...</p>
<p>I am not sure how RFC7321 applies. Did you mean this?</p>
<p>So are you proposing that the use-case of an authorized app deleting a non-existent resource be expressed in the spec? Or is the IETF specifications sufficient reference? FHIR should be careful not to overly specify infrastructure that we are based upon..</p>



<a name="220700665"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Delete%20error%20codes/near/220700665" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Delete.20error.20codes.html#220700665">(Dec 22 2020 at 15:26)</a>:</h4>
<p>The question I was asked is "doesn't this conflict with the RF 7321?" </p>
<ul>
<li>I think not, because RFC7321 only specifies the meaning of the codes (even if it leaves space for ambiguous interpretations.</li>
</ul>



<a name="220700933"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Delete%20error%20codes/near/220700933" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Delete.20error.20codes.html#220700933">(Dec 22 2020 at 15:28)</a>:</h4>
<p>I don't think you mean RFC7321...  I think you mean RFC7231</p>



<a name="220701612"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Delete%20error%20codes/near/220701612" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Delete.20error.20codes.html#220701612">(Dec 22 2020 at 15:34)</a>:</h4>
<p>yes. You see why I failed my piano lessons</p>



<a name="220702112"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Delete%20error%20codes/near/220702112" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Delete.20error.20codes.html#220702112">(Dec 22 2020 at 15:39)</a>:</h4>
<p>Perhaps we can specifically explain that a DELETE of a resource should return a 200 /(or 202?) independently of whether the resource is accessible or not. And  a short note why this should not give different response codes for those cases.</p>



<a name="220702189"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Delete%20error%20codes/near/220702189" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Delete.20error.20codes.html#220702189">(Dec 22 2020 at 15:40)</a>:</h4>
<p>btw, Is it 200 or 202, or up to servers to decide?<br>
IIRC, HAPI returns 200.</p>



<a name="220702221"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Delete%20error%20codes/near/220702221" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Delete.20error.20codes.html#220702221">(Dec 22 2020 at 15:40)</a>:</h4>
<p>an authorized app (authorized to interact, but not to delete) should be able to know that the delete did fail because delete is not allowed.</p>



<a name="220702407"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Delete%20error%20codes/near/220702407" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Delete.20error.20codes.html#220702407">(Dec 22 2020 at 15:42)</a>:</h4>
<p>that is dependent on if the server completed the delete, or just queued the delete to happen. I presume HAPI always knows that the delete completed. With 200 the resource needs to be gone... with 202 it is possible (small window of opportunity, but possible) that the resource still exists post returning 202</p>



<a name="220702480"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Delete%20error%20codes/near/220702480" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Delete.20error.20codes.html#220702480">(Dec 22 2020 at 15:43)</a>:</h4>
<p>a journaled database would tend to just put the delete in a queue and return 202.. or a highly federated database that requires the delete to propigate to many data-centers might also use 202</p>



<a name="220702584"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Delete%20error%20codes/near/220702584" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Delete.20error.20codes.html#220702584">(Dec 22 2020 at 15:44)</a>:</h4>
<p>hence... why FHIR should not constrain things... and why clients must be robust (Postel's Law)</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
