---
layout: page
title: "FHIR Chat  · common API · ontology"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/index.html">ontology</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html">common API</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153831243"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831243" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Erich Schulz <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831243">(Jun 02 2016 at 11:33)</a>:</h4>
<p>I'm starting to think about <a href="https://docs.google.com/document/d/1hNFaEDY9SL4MUWzv9wBU-D8ag-sSmXSanBHbcEuMkAo/edit?usp=sharing" target="_blank" title="https://docs.google.com/document/d/1hNFaEDY9SL4MUWzv9wBU-D8ag-sSmXSanBHbcEuMkAo/edit?usp=sharing">reusable software componenents</a> (see also the other thread in implementers stream) and it seems that most of the interesting common operations will require injection of some kind of ontology service. This has me wondering if any thought has gone into defining a standard API for such a service?</p>



<a name="153831244"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831244" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831244">(Jun 02 2016 at 11:34)</a>:</h4>
<p>what do you think it would do, and why would FHIR define such a thing? surely that's a core ontology w3C thing?</p>



<a name="153831245"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831245" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Erich Schulz <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831245">(Jun 02 2016 at 11:34)</a>:</h4>
<p>(I'm thinking to identify simple, common operations with no external dependencies to explore initially - but it should also be possible work with an injected service)</p>



<a name="153831246"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831246" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Erich Schulz <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831246">(Jun 02 2016 at 11:36)</a>:</h4>
<p>well a common operation would be a apply a mapping eg given a problem list with mainly SNOMED codes, generate a list in ICD 10 code</p>



<a name="153831247"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831247" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael van der Zel <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831247">(Jun 02 2016 at 11:36)</a>:</h4>
<p>SparQL like?</p>



<a name="153831248"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831248" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Erich Schulz <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831248">(Jun 02 2016 at 11:36)</a>:</h4>
<p>also classify the problems by body system...</p>



<a name="153831249"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831249" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831249">(Jun 02 2016 at 11:37)</a>:</h4>
<p>Erich, you should start by reading the terminology service </p>



<a name="153831250"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831250" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Erich Schulz <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831250">(Jun 02 2016 at 11:37)</a>:</h4>
<p>maybe <span class="user-mention" data-user-id="191421">@Michael van der Zel</span> ...</p>



<a name="153831251"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831251" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Erich Schulz <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831251">(Jun 02 2016 at 11:38)</a>:</h4>
<p>is that a FHIR thing <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> ?</p>



<a name="153831252"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831252" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Erich Schulz <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831252">(Jun 02 2016 at 11:38)</a>:</h4>
<p>(sorry appreciate this is bit of a noob question)</p>



<a name="153831253"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831253" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831253">(Jun 02 2016 at 11:38)</a>:</h4>
<p>yes <a href="http://hl7-fhir.github.io/terminology-service.html" target="_blank" title="http://hl7-fhir.github.io/terminology-service.html">http://hl7-fhir.github.io/terminology-service.html</a></p>



<a name="153831254"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831254" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Erich Schulz <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831254">(Jun 02 2016 at 11:39)</a>:</h4>
<p>bingo! thanks <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> </p>



<a name="153831255"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831255" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Erich Schulz <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831255">(Jun 02 2016 at 11:41)</a>:</h4>
<p>i'd looked quickly at the <a href="https://www.hl7.org/fhir/valueset.html" target="_blank" title="https://www.hl7.org/fhir/valueset.html">https://www.hl7.org/fhir/valueset.html</a> and related resource but had missed this page</p>



<a name="153831256"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831256" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Erich Schulz <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831256">(Jun 02 2016 at 11:43)</a>:</h4>
<p>is there a list of implementations ?</p>



<a name="153831257"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831257" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831257">(Jun 02 2016 at 11:45)</a>:</h4>
<p>my server. Ontoserver, Apelon. IMO. NLM. We're starting to prepare for certification of the services </p>



<a name="153831259"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831259" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Erich Schulz <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831259">(Jun 02 2016 at 11:49)</a>:</h4>
<p>wow</p>



<a name="153831261"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831261" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Erich Schulz <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831261">(Jun 02 2016 at 11:53)</a>:</h4>
<p>ok so then (thinking in javascript sorry) it should be possible to define an API as a lightweight wrapper around this (is it REST?) service and then this service could be an injectable dependency into a library that performs "common simple operations" on FHIR data... ?</p>



<a name="153831262"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831262" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831262">(Jun 02 2016 at 11:53)</a>:</h4>
<p>yep</p>



<a name="153831263"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831263" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Erich Schulz <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831263">(Jun 02 2016 at 11:53)</a>:</h4>
<p>sweeet!</p>



<a name="153831337"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831337" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Peter Jordan <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831337">(Jun 02 2016 at 21:23)</a>:</h4>
<p>I look forward to seeing the certification criteria for FHIR-based Terminology Services. Will the Connectathon Tests form the basis of these requirements?</p>



<a name="153831338"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831338" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831338">(Jun 02 2016 at 21:24)</a>:</h4>
<p>well, that's the process that will lead towards the certification tests</p>



<a name="153831421"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831421" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Erich Schulz <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831421">(Jun 03 2016 at 10:33)</a>:</h4>
<p>I had a read of <a href="http://hl7-fhir.github.io/terminology-service.html" target="_blank" title="http://hl7-fhir.github.io/terminology-service.html">http://hl7-fhir.github.io/terminology-service.html</a> now</p>



<a name="153831422"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831422" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Erich Schulz <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831422">(Jun 03 2016 at 10:34)</a>:</h4>
<p>it gets a bit wooly around the "closure" table</p>



<a name="153831423"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831423" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Erich Schulz <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831423">(Jun 03 2016 at 10:34)</a>:</h4>
<p>(we used to call them "ancestor tables")</p>



<a name="153831424"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831424" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Erich Schulz <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831424">(Jun 03 2016 at 10:36)</a>:</h4>
<p>I guess I should have a hard poke at the onto server - then I maybe up for a few patches</p>



<a name="153831425"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831425" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831425">(Jun 03 2016 at 10:36)</a>:</h4>
<p>closure we haven't tested yet. Getting there</p>



<a name="153831426"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831426" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Erich Schulz <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831426">(Jun 03 2016 at 10:38)</a>:</h4>
<p>idea is for client to incrementally build its own table holding all possible is-a links between a set of "codes of interests"?</p>



<a name="153831429"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831429" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831429">(Jun 03 2016 at 10:44)</a>:</h4>
<p>yes, client knows the table, but not the grounds on which it is built - that's what the terminology server knows. My server supports closure, but it's the only one at this time</p>



<a name="153831431"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831431" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Erich Schulz <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831431">(Jun 03 2016 at 10:45)</a>:</h4>
<p>ah</p>



<a name="153831432"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831432" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Erich Schulz <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831432">(Jun 03 2016 at 10:45)</a>:</h4>
<p>so this depends on the server keeping a track of which links it has let the client know about?</p>



<a name="153831433"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831433" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831433">(Jun 03 2016 at 10:46)</a>:</h4>
<p>y</p>



<a name="153831434"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831434" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Erich Schulz <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831434">(Jun 03 2016 at 10:46)</a>:</h4>
<p>that could get expensive with a lot of clients...</p>



<a name="153831435"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831435" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831435">(Jun 03 2016 at 10:47)</a>:</h4>
<p>well, up to the server to decide how to manage that. I'll let users fill up my database, and then I'll just wipe it ;-)</p>



<a name="153831436"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831436" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Erich Schulz <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831436">(Jun 03 2016 at 10:47)</a>:</h4>
<p>heh</p>



<a name="153831437"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831437" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831437">(Jun 03 2016 at 10:48)</a>:</h4>
<p>of course if a user runs my server locally, they can have whatever policy they want</p>



<a name="153831440"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831440" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Erich Schulz <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831440">(Jun 03 2016 at 10:50)</a>:</h4>
<p>btw are we sure "closure" is the correct term?</p>



<a name="153831441"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831441" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Erich Schulz <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831441">(Jun 03 2016 at 10:51)</a>:</h4>
<p><a href="https://en.wikipedia.org/wiki/Closure_(computer_programming)" target="_blank" title="https://en.wikipedia.org/wiki/Closure_(computer_programming)">https://en.wikipedia.org/wiki/Closure_(computer_programming)</a></p>



<a name="153831442"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831442" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831442">(Jun 03 2016 at 10:51)</a>:</h4>
<p>yes. see <a href="http://dirtsimple.org/2010/11/simplest-way-to-do-tree-based-queries.html" target="_blank" title="http://dirtsimple.org/2010/11/simplest-way-to-do-tree-based-queries.html">http://dirtsimple.org/2010/11/simplest-way-to-do-tree-based-queries.html</a></p>



<a name="153831443"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831443" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Erich Schulz <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831443">(Jun 03 2016 at 10:54)</a>:</h4>
<p>yeah i read that link</p>



<a name="153831444"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831444" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Erich Schulz <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831444">(Jun 03 2016 at 10:54)</a>:</h4>
<p>actually this seems the derivation</p>



<a name="153831445"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831445" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Erich Schulz <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831445">(Jun 03 2016 at 10:54)</a>:</h4>
<p><a href="https://en.wikipedia.org/wiki/Transitive_closure" target="_blank" title="https://en.wikipedia.org/wiki/Transitive_closure">https://en.wikipedia.org/wiki/Transitive_closure</a></p>



<a name="153831446"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831446" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831446">(Jun 03 2016 at 10:54)</a>:</h4>
<p>y</p>



<a name="153831447"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831447" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Peter Jordan <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831447">(Jun 03 2016 at 10:58)</a>:</h4>
<p>At the Montreal Connectathon, Caroline Macumber from Apelon suggested that they may have implemented the full closure operation, but was going to check with the relevant developer. I started a while back, but wasn't comfortable that I understood the complete use case - notably around notifying and updating clients when the server rebuilds a transitive closure table after a new version of the code system is implemented. A UML Sequence Diagram might be useful; I re-read the spec and Grahame's blog entry several times - but something seemed to be missing.</p>



<a name="153831448"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831448" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Erich Schulz <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831448">(Jun 03 2016 at 10:59)</a>:</h4>
<p>so it seems that "closure" actually just means the property of generating a finite set (in mathematics) </p>



<a name="153831449"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831449" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Erich Schulz <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831449">(Jun 03 2016 at 11:00)</a>:</h4>
<p>the key element is that this based on the transitive <code>is-a</code> links...</p>



<a name="153831450"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831450" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Erich Schulz <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831450">(Jun 03 2016 at 11:02)</a>:</h4>
<p>too be honest I'm thinking that supporting incremental creation of these "is-a closure tables" (?? IsACT ??) via client-server operation is "in the 80%"</p>



<a name="153831451"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831451" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Erich Schulz <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831451">(Jun 03 2016 at 11:03)</a>:</h4>
<p>but I can certainly see the utility in the base operation of "give me the subset of is-a links that involve members both in a given set"</p>



<a name="153831452"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831452" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831452">(Jun 03 2016 at 11:03)</a>:</h4>
<p>? anyone who wants to use a terminology server to handle all their terminology logic will be lead kicking and screaming to maintaining a closure table</p>



<a name="153831453"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831453" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Erich Schulz <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831453">(Jun 03 2016 at 11:04)</a>:</h4>
<p>take hiearchy table =&gt; explode</p>



<a name="153831454"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831454" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831454">(Jun 03 2016 at 11:04)</a>:</h4>
<p>sorry, anyone who maintains a relational database who....</p>



<a name="153831455"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831455" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Erich Schulz <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831455">(Jun 03 2016 at 11:06)</a>:</h4>
<p>its a simple enough operation...</p>



<a name="153831456"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831456" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Peter Jordan <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831456">(Jun 03 2016 at 11:09)</a>:</h4>
<p>I persist SNOMED CT in SQL Server and have a transitive closure table; but, to date, profiling and execution plans show no discernible performance difference between the table-valued function that I used for subsumption queries using the core tables, and the one that uses the closure table. However, I suspect that might change when the server is under a heavy load.</p>



<a name="153831457"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831457" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831457">(Jun 03 2016 at 11:12)</a>:</h4>
<p>the key difference is that the closure table built this way is capable of dealing with post-coordination etc</p>



<a name="153831458"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831458" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831458">(Jun 03 2016 at 11:12)</a>:</h4>
<p><span class="user-mention" data-user-id="191364">@Peter Jordan</span> can you describe your "table-valued function that I used for subsumption queries using the core tables" vs. the "closure table"?<br>
I'm not quite sure what the former one is - it sort of sounds like a "closure table" under the hood (or bonnet):)</p>



<a name="153831459"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831459" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Peter Jordan <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831459">(Jun 03 2016 at 11:13)</a>:</h4>
<p>That makes sense, but I don't support post-co-ordination...yet.</p>



<a name="153831460"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831460" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Erich Schulz <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831460">(Jun 03 2016 at 11:13)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> - ok that isn't as simple :-)</p>



<a name="153831461"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831461" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831461">(Jun 03 2016 at 11:14)</a>:</h4>
<p>it is for the client, that's the key - it's just a code. It's not interested in the internal details. code, closure table, whatever...</p>



<a name="153831462"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831462" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Erich Schulz <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831462">(Jun 03 2016 at 11:14)</a>:</h4>
<p>how common is post-cordination  out there in the real world?</p>



<a name="153831463"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831463" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831463">(Jun 03 2016 at 11:15)</a>:</h4>
<p>uncommon. mostly because of the closure table problem. </p>



<a name="153831464"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831464" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831464">(Jun 03 2016 at 11:15)</a>:</h4>
<p>because everyone pre-generates their closure tables, if they have them, and then they can't deal with post-coordination </p>



<a name="153831465"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831465" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831465">(Jun 03 2016 at 11:16)</a>:</h4>
<p>we especialy haven't explored the post-coordination aspects yet, as far as I know<br>
and I was going to say, I think that presumes that the post-coordinated expression will be assigned an identifier (on the fly)? - which is the SNOMED CT idea of the "expression library" </p>



<a name="153831466"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831466" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831466">(Jun 03 2016 at 11:16)</a>:</h4>
<p>not necessary for the client. Or the API. Server might decide to do that for itself, but that's it's business </p>



<a name="153831467"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831467" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Erich Schulz <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831467">(Jun 03 2016 at 11:17)</a>:</h4>
<p>does the ontoserver to a basic closure (still think a better name is needed) operation?</p>



<a name="153831468"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831468" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831468">(Jun 03 2016 at 11:18)</a>:</h4>
<p>don't know whether Michael and the team have done that</p>



<a name="153831469"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831469" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Erich Schulz <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831469">(Jun 03 2016 at 11:19)</a>:</h4>
<p>i'm getting curious about how long it would take my PC (2years old with 16G ram) too generate an ancestor table on snomed...</p>



<a name="153831470"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831470" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Erich Schulz <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831470">(Jun 03 2016 at 11:19)</a>:</h4>
<p>and then to get postgress to load it...</p>



<a name="153831471"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831471" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831471">(Jun 03 2016 at 11:20)</a>:</h4>
<p>depends. generating the closure table for sct-us purely in ram takes me 45 seconds</p>



<a name="153831472"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831472" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Peter Jordan <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831472">(Jun 03 2016 at 11:20)</a>:</h4>
<p><span class="user-mention" data-user-id="191405">@Rob Hausam</span>, I'm not sure if you're familiar with table-valued functions in SQL Server - they're a special type of stored procedure that return a table. The relevant logic uses self-joins on the relationship table, I'd be quite happy to send it to you. Because it uses a larger table than the 2-column transitive closure one, I suspect that it (and/or the relevant indexes) might take up more memory so might be more likely to slow down when SQL Server is nearing its memory peak.</p>



<a name="153831473"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831473" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Erich Schulz <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831473">(Jun 03 2016 at 11:23)</a>:</h4>
<p>gad I'm not getting any work done...</p>



<a name="153831474"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831474" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831474">(Jun 03 2016 at 11:23)</a>:</h4>
<p>yes, I am somewhat familiar with them in general, Peter - but I've tended to do most of my db work in Oracle<br>
I would like to have a look at it</p>



<a name="153831475"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831475" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Erich Schulz <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831475">(Jun 03 2016 at 11:24)</a>:</h4>
<p>this is too interesting</p>



<a name="153831476"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831476" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Erich Schulz <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831476">(Jun 03 2016 at 11:24)</a>:</h4>
<p>we used to use oracle in the 90's because it had <code>connect by</code></p>



<a name="153831477"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831477" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Erich Schulz <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831477">(Jun 03 2016 at 11:25)</a>:</h4>
<p>which was way too slow compared with a "transitive closure" table</p>



<a name="153831478"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831478" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Peter Jordan <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831478">(Jun 03 2016 at 11:26)</a>:</h4>
<p>Using the Pearl Script supplied by IHTSDO, it takes less than a minute to generate the closure table for the international edition of SCT - on my 64 bit server with lots of RAM. It takes at least 5 mins on my 32 bit test machine.</p>



<a name="153831479"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831479" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831479">(Jun 03 2016 at 11:26)</a>:</h4>
<p>yes, I think "connect by" is a great feature - I've made extensive use of it for this sort of thing<br>
like building a "closure table" (althought I didn't call it that at first) on the fly ("just in time")</p>



<a name="153831480"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831480" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Erich Schulz <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831480">(Jun 03 2016 at 11:27)</a>:</h4>
<p>but looking at this... <a href="http://hl7-fhir.github.io/terminology-service.html" target="_blank" title="http://hl7-fhir.github.io/terminology-service.html">http://hl7-fhir.github.io/terminology-service.html</a> <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> I am thinking the "incremental build" component of the "closure" operation just seems erm non-core ?</p>



<a name="153831481"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831481" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Erich Schulz <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831481">(Jun 03 2016 at 11:28)</a>:</h4>
<p>a certainly see the generation of the initial table as a core feauture tho...</p>



<a name="153831482"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831482" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831482">(Jun 03 2016 at 11:30)</a>:</h4>
<p><span class="user-mention" data-user-id="192001">@Erich Schulz</span> yes, the pre-computed full closure table is significantly faster than doing a hierarchical query each time - that's why we adopted the caching approach which builds the closure table as needed, rather than pre-computing all of it, most of which will never be used<br>
just a different approach</p>



<a name="153831483"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831483" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Erich Schulz <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831483">(Jun 03 2016 at 11:30)</a>:</h4>
<p>yes I can see the rationale for serving a subset</p>



<a name="153831486"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831486" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Erich Schulz <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831486">(Jun 03 2016 at 11:33)</a>:</h4>
<p>it was the incremental building of a subsets I was questioning...</p>



<a name="153831489"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831489" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Erich Schulz <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831489">(Jun 03 2016 at 11:35)</a>:</h4>
<p>(at least as part of core API )</p>



<a name="153831491"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831491" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Erich Schulz <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831491">(Jun 03 2016 at 11:36)</a>:</h4>
<p>mainly because it imposes a burden on the server to track its previous messages to clients in a pattern that may not scale awfully well and introduces a bunch of complexities around "time to live"</p>



<a name="153831492"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831492" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Erich Schulz <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831492">(Jun 03 2016 at 11:53)</a>:</h4>
<p>I'm having a look at ontoserver <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> - it looks way more cut-down than <a href="http://hl7-fhir.github.io/terminology-service.html" target="_blank" title="http://hl7-fhir.github.io/terminology-service.html">http://hl7-fhir.github.io/terminology-service.html</a></p>



<a name="153831493"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831493" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Peter Jordan <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831493">(Jun 03 2016 at 11:53)</a>:</h4>
<p>The transitive closure table generated from the 20160131 snapshot version of the SCT International Edition has 5,470,090 rows!</p>



<a name="153831494"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831494" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Erich Schulz <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831494">(Jun 03 2016 at 11:54)</a>:</h4>
<p>so if was stored as pair of 64bit bytes...</p>



<a name="153831495"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831495" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Erich Schulz <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831495">(Jun 03 2016 at 11:54)</a>:</h4>
<p>that is ~25M</p>



<a name="153831496"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831496" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831496">(Jun 03 2016 at 12:00)</a>:</h4>
<p>I dont't think ontoserver is much cut down. It does everything that we've worked through so far</p>



<a name="153831497"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831497" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Peter Jordan <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831497">(Jun 03 2016 at 12:01)</a>:</h4>
<p>Storage is cheap, it's all about memory.  The table has 2 columns of SCTIDs - IHTSDO recommend that these are persisted as 64 bit integers, but as they aren't true numbers I store them as chars and I know others who do likewise.</p>



<a name="153831498"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831498" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831498">(Jun 03 2016 at 12:01)</a>:</h4>
<p>I think that the incremental closure table is wroth having. it is more work for the server, but we've always said that's a good deal for the client</p>



<a name="153831499"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831499" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831499">(Jun 03 2016 at 12:02)</a>:</h4>
<p>I store the closure table as an array of pairs of 4 byte unisgned int, which each 4 bytes is a look up to an array of string values that represent the codes</p>



<a name="153831500"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831500" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Erich Schulz <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831500">(Jun 03 2016 at 12:02)</a>:</h4>
<p>are many systems doing this currently?</p>



<a name="153831501"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831501" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831501">(Jun 03 2016 at 12:02)</a>:</h4>
<p>but I don't use a database for this. </p>



<a name="153831502"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831502" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831502">(Jun 03 2016 at 12:03)</a>:</h4>
<p>not many, but all the terminology servics have had to do something about this problem in order to support integrated search across terminologies and other things</p>



<a name="153831503"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831503" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Peter Jordan <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831503">(Jun 03 2016 at 12:03)</a>:</h4>
<p>...but what's the trigger for clients to request updates when the server refreshes the closure table?</p>



<a name="153831504"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831504" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Erich Schulz <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831504">(Jun 03 2016 at 12:04)</a>:</h4>
<p>given it is a 45 second operation to rebuild the entire thing and releases come out once a month? (max) I'm struggling to see a high ROI...</p>



<a name="153831505"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831505" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831505">(Jun 03 2016 at 12:05)</a>:</h4>
<p>because you can't build it in advance</p>



<a name="153831506"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831506" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Erich Schulz <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831506">(Jun 03 2016 at 12:05)</a>:</h4>
<p>(just to emphasis am talking about incremental builds... not subseting... subsetting is gold)</p>



<a name="153831507"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831507" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831507">(Jun 03 2016 at 12:05)</a>:</h4>
<p>unless you prohibit post-coordination. which everyone does, but it cripples the tx</p>



<a name="153831508"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831508" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Erich Schulz <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831508">(Jun 03 2016 at 12:06)</a>:</h4>
<p>do you have link for ontoserver subsumption test?</p>



<a name="153831509"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831509" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831509">(Jun 03 2016 at 12:07)</a>:</h4>
<p>the $validate option... what link do you want?</p>



<a name="153831510"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831510" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Peter Jordan <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831510">(Jun 03 2016 at 12:08)</a>:</h4>
<p>Things will be trickier if/when IHTSDO move to more frequent SCT releases.</p>



<a name="153831511"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831511" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Erich Schulz <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831511">(Jun 03 2016 at 12:08)</a>:</h4>
<p>mmm </p>



<a name="153831512"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831512" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831512">(Jun 03 2016 at 12:09)</a>:</h4>
<p>it's a solvable problem. I've got to write a client to help the ontoserver guys test their closure table</p>



<a name="153831513"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831513" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Erich Schulz <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831513">(Jun 03 2016 at 12:09)</a>:</h4>
<p>i guess I'm just flagging 80:20 situation...</p>



<a name="153831514"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831514" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Erich Schulz <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831514">(Jun 03 2016 at 12:09)</a>:</h4>
<p>perhaps opportunity to have inititial simple API definition then a second wave?</p>



<a name="153831515"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831515" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831515">(Jun 03 2016 at 12:10)</a>:</h4>
<p>then you don't follow what the 80:20 is about. </p>



<a name="153831516"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831516" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Erich Schulz <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831516">(Jun 03 2016 at 12:13)</a>:</h4>
<p>?</p>



<a name="153831517"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831517" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Erich Schulz <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831517">(Jun 03 2016 at 12:13)</a>:</h4>
<p><a href="http://www.clipular.com/c/4745096286699520.png?k=oAARjjxSNY7fDU3cgP6HeFBTC2E" target="_blank" title="http://www.clipular.com/c/4745096286699520.png?k=oAARjjxSNY7fDU3cgP6HeFBTC2E">http://www.clipular.com/c/4745096286699520.png?k=oAARjjxSNY7fDU3cgP6HeFBTC2E</a></p>
<div class="message_inline_image"><a href="http://www.clipular.com/c/4745096286699520.png?k=oAARjjxSNY7fDU3cgP6HeFBTC2E" target="_blank" title="http://www.clipular.com/c/4745096286699520.png?k=oAARjjxSNY7fDU3cgP6HeFBTC2E"><img src="http://www.clipular.com/c/4745096286699520.png?k=oAARjjxSNY7fDU3cgP6HeFBTC2E"></a></div>



<a name="153831518"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831518" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831518">(Jun 03 2016 at 12:14)</a>:</h4>
<p>all the terminology servers implement some kind of feature for managing a closure table</p>



<a name="153831520"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831520" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Erich Schulz <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831520">(Jun 03 2016 at 12:14)</a>:</h4>
<p>sure</p>



<a name="153831521"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831521" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Erich Schulz <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831521">(Jun 03 2016 at 12:14)</a>:</h4>
<p>I can only repeat...</p>



<a name="153831522"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831522" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Erich Schulz <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831522">(Jun 03 2016 at 12:15)</a>:</h4>
<p>transitive closure table = gold</p>



<a name="153831523"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831523" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Erich Schulz <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831523">(Jun 03 2016 at 12:16)</a>:</h4>
<p><strong>incremental building</strong> of client-server building of TCT is in a different plane</p>



<a name="153831524"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831524" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Erich Schulz <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831524">(Jun 03 2016 at 12:16)</a>:</h4>
<p>not saying its bad...</p>



<a name="153831525"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831525" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831525">(Jun 03 2016 at 12:16)</a>:</h4>
<p>then you don't need to consume it. nor worry about it. </p>



<a name="153831526"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831526" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Erich Schulz <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831526">(Jun 03 2016 at 12:17)</a>:</h4>
<p>just saying that today its only implemented by a single server...</p>



<a name="153831527"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831527" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Erich Schulz <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831527">(Jun 03 2016 at 12:18)</a>:</h4>
<p>sorry not trying to be difficult </p>



<a name="153831528"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831528" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Erich Schulz <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831528">(Jun 03 2016 at 12:19)</a>:</h4>
<p>the concern is I go looking for the resource on the ontoserver and it isn't there</p>



<a name="153831529"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831529" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Erich Schulz <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831529">(Jun 03 2016 at 12:19)</a>:</h4>
<p>even the base resource as far as I can see</p>



<a name="153831530"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831530" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831530">(Jun 03 2016 at 12:19)</a>:</h4>
<p>which base resource? </p>



<a name="153831531"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831531" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Erich Schulz <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831531">(Jun 03 2016 at 12:19)</a>:</h4>
<p>for a transitive closure table</p>



<a name="153831532"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831532" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831532">(Jun 03 2016 at 12:20)</a>:</h4>
<p>you mean ConceptMap?</p>



<a name="153831533"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831533" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Erich Schulz <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831533">(Jun 03 2016 at 12:21)</a>:</h4>
<p>they have the transitive closure table expressed with conceptmap??</p>



<a name="153831534"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831534" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831534">(Jun 03 2016 at 12:21)</a>:</h4>
<p>concept map is part of it, but I wasn't sure what you meant. But they haven't implemented closure API yet</p>



<a name="153831535"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831535" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Erich Schulz <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831535">(Jun 03 2016 at 12:21)</a>:</h4>
<p>k</p>



<a name="153831536"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831536" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Erich Schulz <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831536">(Jun 03 2016 at 12:22)</a>:</h4>
<p>so what I'm thinking is if the base spec is simple then that implementation can occur more rapidly</p>



<a name="153831537"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831537" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Erich Schulz <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831537">(Jun 03 2016 at 12:22)</a>:</h4>
<p>because I can write a script to make my own</p>



<a name="153831538"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831538" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831538">(Jun 03 2016 at 12:22)</a>:</h4>
<p>well, simple problems are simple. yes. And a client can just do subsumption testing directly, no problems</p>



<a name="153831540"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831540" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Peter Jordan <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831540">(Jun 03 2016 at 12:26)</a>:</h4>
<p>...and store the results each time it requests a new test...and (possibly) be aware (somehow) when the server loads a new version of the code system that might make its cached results redundant. Which begs the question, why does the server need to maintain a record of client closures?</p>



<a name="153831542"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831542" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Erich Schulz <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831542">(Jun 03 2016 at 12:29)</a>:</h4>
<p>i'm thinking it could be useful to have a table of the current servers and the services they provide...</p>



<a name="153831543"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831543" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831543">(Jun 03 2016 at 12:29)</a>:</h4>
<p>if the server doesn't know what subset the client is dealing with, it must return the close for everything, but everything is not finite </p>



<a name="153831544"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831544" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Erich Schulz <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831544">(Jun 03 2016 at 12:30)</a>:</h4>
<p>yes that is true</p>



<a name="153831545"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831545" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Erich Schulz <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831545">(Jun 03 2016 at 12:30)</a>:</h4>
<p>so somehow the client needs to identify the subset it is interested in</p>



<a name="153831546"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831546" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Erich Schulz <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831546">(Jun 03 2016 at 12:30)</a>:</h4>
<p>i agree that is core functionality</p>



<a name="153831548"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831548" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831548">(Jun 03 2016 at 12:31)</a>:</h4>
<p>well, it can build it gradually, or it can accelerate the process </p>



<a name="153831550"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831550" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Erich Schulz <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831550">(Jun 03 2016 at 12:31)</a>:</h4>
<p>what I'm suggesting may not be core is incremental expansion of the TCT...</p>



<a name="153831551"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831551" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Erich Schulz <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831551">(Jun 03 2016 at 12:31)</a>:</h4>
<p>the key words being "incremental expansion"</p>



<a name="153831552"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831552" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Peter Jordan <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831552">(Jun 03 2016 at 12:40)</a>:</h4>
<p>I'm still missing something here. Although I fully understand why a client needs to persist the results of individual subsumption queries, I can't see the need for a server to (effectively) maintain a record of those results - what value does that add, e.g. does it make it any easier for the client to be made aware when those results may be superseded by a code system update? What's the value proposition for this additional complexity?</p>



<a name="153831553"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831553" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Erich Schulz <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831553">(Jun 03 2016 at 12:41)</a>:</h4>
<p>it would save some bandwidth...</p>



<a name="153831556"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831556" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831556">(Jun 03 2016 at 12:49)</a>:</h4>
<p>the key point is how the client becomes aware that it needs to rebuild its stored transitive closure subset, because the code system has been updated</p>



<a name="153831557"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831557" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Erich Schulz <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831557">(Jun 03 2016 at 12:49)</a>:</h4>
<p>an expiry date? or a "last-updated" service?</p>



<a name="153831559"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831559" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Erich Schulz <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831559">(Jun 03 2016 at 12:59)</a>:</h4>
<p>there are also tools like rsync and git that eat incremental updating for breakfast</p>



<a name="153831560"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831560" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Erich Schulz <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831560">(Jun 03 2016 at 13:00)</a>:</h4>
<p>building this functionality into the core services seems to violate the "do one thing well" principle</p>



<a name="153831615"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831615" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Peter Jordan <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831615">(Jun 03 2016 at 21:20)</a>:</h4>
<p><span class="user-mention" data-user-id="191405">@Rob Hausam</span> that key point applies to all use cases where a client persists the results of SNOMED CT queries.  <span class="user-mention" data-user-id="192001">@Erich Schulz</span> - SNOMED CT updates can either add or inactivate concepts and relationships - versioning is based on the active/inactive status at the specified release date (effective time). Concepts can be activated, deactivated and reactivated - but never deleted.</p>
<p>From a client perspective, I'd persist the relevant CodeSystem version and periodically check it with the one returned by the Terminology Server. When there's a new version, I'd refresh all the persisted query results - subsumptions or otherwise. Therefore, from an EHR/EMR service perspective, I still don't see a use case for a separate, and distinct, process for closure subsets. However, it would be informative to understand the requirements of other categories of terminology service client.</p>



<a name="153831618"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179186-ontology/topic/common%20API/near/153831618" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179186-ontology/topic/common.20API.html#153831618">(Jun 03 2016 at 22:03)</a>:</h4>
<p>I agree, Peter.  I think your suggestion is reasonable, and similar to what I've implemented before (although with an "internal" terminology server, rather than an external API).  I think you may be right about the need, and the means of achieving it.  Yes, we need to consider all (known) client perspectives.  I've been intending to spend some time looking at $closure in greater depth, and this discussion is good impetus for doing that. </p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
