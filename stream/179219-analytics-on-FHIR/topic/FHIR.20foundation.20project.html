---
layout: page
title: "FHIR Chat  · FHIR foundation project · analytics on FHIR"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179219-analytics-on-FHIR/index.html">analytics on FHIR</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179219-analytics-on-FHIR/topic/FHIR.20foundation.20project.html">FHIR foundation project</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153987528"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179219-analytics%20on%20FHIR/topic/FHIR%20foundation%20project/near/153987528" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nicola (RIO/SS) <a href="https://fhir.github.io/chat-archive/stream/179219-analytics-on-FHIR/topic/FHIR.20foundation.20project.html#153987528">(Aug 16 2018 at 12:15)</a>:</h4>
<blockquote>
<p>I'm not sure that this work sits nicely in HL7. And there'd be an overhead for HL7. The Foundation would have lower overhead, and is a better home for code etc</p>
</blockquote>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span>  is there any information about FHIR foundation projects - how it works?</p>



<a name="153987536"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179219-analytics%20on%20FHIR/topic/FHIR%20foundation%20project/near/153987536" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nicola (RIO/SS) <a href="https://fhir.github.io/chat-archive/stream/179219-analytics-on-FHIR/topic/FHIR.20foundation.20project.html#153987536">(Aug 16 2018 at 12:35)</a>:</h4>
<p>It would be nice to start weekly calls? Who is interested? What day and time?</p>



<a name="153987648"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179219-analytics%20on%20FHIR/topic/FHIR%20foundation%20project/near/153987648" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179219-analytics-on-FHIR/topic/FHIR.20foundation.20project.html#153987648">(Aug 16 2018 at 18:01)</a>:</h4>
<p><span class="user-mention" data-user-id="191318">@nicola (RIO/SS)</span> , I am interested, Mondays are usually good for me, but open to whenever.</p>



<a name="153988504"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179219-analytics%20on%20FHIR/topic/FHIR%20foundation%20project/near/153988504" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ryan Brush <a href="https://fhir.github.io/chat-archive/stream/179219-analytics-on-FHIR/topic/FHIR.20foundation.20project.html#153988504">(Aug 17 2018 at 18:43)</a>:</h4>
<p>I'm definitely interested. If there is a time that works during business hours of US/Pacific I could probably make that work, but don't mind the off-hour calls if necessary as well.</p>



<a name="153988505"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179219-analytics%20on%20FHIR/topic/FHIR%20foundation%20project/near/153988505" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ryan Brush <a href="https://fhir.github.io/chat-archive/stream/179219-analytics-on-FHIR/topic/FHIR.20foundation.20project.html#153988505">(Aug 17 2018 at 18:45)</a>:</h4>
<p>I'll also contribute the scenarios. Does "User-friendly standard SQL across very large FHIR datasets" seem like an appropriate scope for that? Or should each scenario be targeted at a more specific use case?</p>



<a name="153989222"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179219-analytics%20on%20FHIR/topic/FHIR%20foundation%20project/near/153989222" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grigory Nokhrin <a href="https://fhir.github.io/chat-archive/stream/179219-analytics-on-FHIR/topic/FHIR.20foundation.20project.html#153989222">(Aug 19 2018 at 19:22)</a>:</h4>
<blockquote>
<p>I'm definitely interested. If there is a time that works during business hours of US/Pacific I could probably make that work, but don't mind the off-hour calls if necessary as well.</p>
</blockquote>
<p>Hi! Grigory from Health Samurai.</p>
<p>I’ll take care about all the administrative part of future Connectathon track or Foundation or whatever related to Storage &amp; Analytics.<br>
How about to take a conference call to define our need , proposals, justifications?</p>
<p>Please provide me exact timeframe during the next week day by day. So I well be able to compare the availability and define the day and time for call between the interested people.</p>



<a name="153989444"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179219-analytics%20on%20FHIR/topic/FHIR%20foundation%20project/near/153989444" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nicola (RIO/SS) <a href="https://fhir.github.io/chat-archive/stream/179219-analytics-on-FHIR/topic/FHIR.20foundation.20project.html#153989444">(Aug 20 2018 at 08:08)</a>:</h4>
<p><span class="user-mention" data-user-id="196502">@Grigory Nokhrin</span> can you provide something like <a href="https://doodle.com/polling-tool" target="_blank" title="https://doodle.com/polling-tool">https://doodle.com/polling-tool</a></p>



<a name="153989445"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179219-analytics%20on%20FHIR/topic/FHIR%20foundation%20project/near/153989445" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grigory Nokhrin <a href="https://fhir.github.io/chat-archive/stream/179219-analytics-on-FHIR/topic/FHIR.20foundation.20project.html#153989445">(Aug 20 2018 at 08:42)</a>:</h4>
<blockquote>
<p><span class="user-mention" data-user-id="196502">@Grigory Nokhrin</span> can you provide something like <a href="https://doodle.com/polling-tool" target="_blank" title="https://doodle.com/polling-tool">https://doodle.com/polling-tool</a></p>
</blockquote>
<p>For sure.</p>
<p><a href="https://doodle.com/poll/34wix33u5y7ycnab" target="_blank" title="https://doodle.com/poll/34wix33u5y7ycnab">https://doodle.com/poll/34wix33u5y7ycnab</a></p>
<p><strong>Please vote for the time that suits you best for conference call.</strong></p>



<a name="153989664"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179219-analytics%20on%20FHIR/topic/FHIR%20foundation%20project/near/153989664" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael van der Zel <a href="https://fhir.github.io/chat-archive/stream/179219-analytics-on-FHIR/topic/FHIR.20foundation.20project.html#153989664">(Aug 20 2018 at 21:13)</a>:</h4>
<p>+1</p>



<a name="153989677"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179219-analytics%20on%20FHIR/topic/FHIR%20foundation%20project/near/153989677" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ryan Brush <a href="https://fhir.github.io/chat-archive/stream/179219-analytics-on-FHIR/topic/FHIR.20foundation.20project.html#153989677">(Aug 20 2018 at 22:07)</a>:</h4>
<p>Sounds good! I went ahead and posted on the Doodle as well, but can probably make other times work if none of the current times do. Thanks for setting that up!</p>



<a name="153990441"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179219-analytics%20on%20FHIR/topic/FHIR%20foundation%20project/near/153990441" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grigory Nokhrin <a href="https://fhir.github.io/chat-archive/stream/179219-analytics-on-FHIR/topic/FHIR.20foundation.20project.html#153990441">(Aug 23 2018 at 15:33)</a>:</h4>
<p><a href="http://meet.google.com/ond-rsha-bfj" target="_blank" title="http://meet.google.com/ond-rsha-bfj">meet.google.com/ond-rsha-bfj</a></p>
<p>Feel free to join the call in 30 minutes.</p>
<p>We will talk about 19th Connectathon track “Storage &amp; Analytics”</p>
<p>BTW. If you're checking Zulip not so often or not getting the notifications, then maybe we can coordinate our conversations any other way? WhatsApp group chat?</p>
<p><a href="https://chat.whatsapp.com/AeZYpzVd0UoDkESPUX2k5M" target="_blank" title="https://chat.whatsapp.com/AeZYpzVd0UoDkESPUX2k5M">https://chat.whatsapp.com/AeZYpzVd0UoDkESPUX2k5M</a></p>



<a name="153990962"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179219-analytics%20on%20FHIR/topic/FHIR%20foundation%20project/near/153990962" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nicola (RIO/SS) <a href="https://fhir.github.io/chat-archive/stream/179219-analytics-on-FHIR/topic/FHIR.20foundation.20project.html#153990962">(Aug 27 2018 at 10:46)</a>:</h4>
<p>Here is google calendar for meetings - <a href="https://calendar.google.com/calendar?cid=aGVhbHRoLXNhbXVyYWkuaW9fOGVxZDgxdm1tNDRpNnNpZmI3aHRtaDdoaWdAZ3JvdXAuY2FsZW5kYXIuZ29vZ2xlLmNvbQ" target="_blank" title="https://calendar.google.com/calendar?cid=aGVhbHRoLXNhbXVyYWkuaW9fOGVxZDgxdm1tNDRpNnNpZmI3aHRtaDdoaWdAZ3JvdXAuY2FsZW5kYXIuZ29vZ2xlLmNvbQ">https://calendar.google.com/calendar?cid=aGVhbHRoLXNhbXVyYWkuaW9fOGVxZDgxdm1tNDRpNnNpZmI3aHRtaDdoaWdAZ3JvdXAuY2FsZW5kYXIuZ29vZ2xlLmNvbQ</a></p>



<a name="153990964"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179219-analytics%20on%20FHIR/topic/FHIR%20foundation%20project/near/153990964" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nicola (RIO/SS) <a href="https://fhir.github.io/chat-archive/stream/179219-analytics-on-FHIR/topic/FHIR.20foundation.20project.html#153990964">(Aug 27 2018 at 10:50)</a>:</h4>
<p>If time is not convenient for you - let's discuss here</p>



<a name="153991189"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179219-analytics%20on%20FHIR/topic/FHIR%20foundation%20project/near/153991189" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Christiaan Knaap <a href="https://fhir.github.io/chat-archive/stream/179219-analytics-on-FHIR/topic/FHIR.20foundation.20project.html#153991189">(Aug 28 2018 at 06:21)</a>:</h4>
<p>Last connectathon I used a tool - VonkLoader - to upload data to my own FHIR server Vonk. Mainly Synthea collection bundles. I promised to see if we could publish the tool to the community. We did. If you had not found it yourself yet, you can get it from Simplifier: <a href="https://simplifier.net/downloads" target="_blank" title="https://simplifier.net/downloads">https://simplifier.net/downloads</a>. <br>
Documentation is here: <a href="http://docs.simplifier.net/vonkloader/index.html" target="_blank" title="http://docs.simplifier.net/vonkloader/index.html">http://docs.simplifier.net/vonkloader/index.html</a><br>
It is free to use, but there is no official support. You can ask questions here of course.</p>



<a name="153991199"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179219-analytics%20on%20FHIR/topic/FHIR%20foundation%20project/near/153991199" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nicola (RIO/SS) <a href="https://fhir.github.io/chat-archive/stream/179219-analytics-on-FHIR/topic/FHIR.20foundation.20project.html#153991199">(Aug 28 2018 at 08:18)</a>:</h4>
<p>Can your loader load directly into database?</p>



<a name="153992029"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179219-analytics%20on%20FHIR/topic/FHIR%20foundation%20project/near/153992029" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nicola (RIO/SS) <a href="https://fhir.github.io/chat-archive/stream/179219-analytics-on-FHIR/topic/FHIR.20foundation.20project.html#153992029">(Aug 30 2018 at 21:33)</a>:</h4>
<p>31 aug meeting notes:</p>
<p>Work on scenarios for track:</p>
<p>* loaders (bulk api)<br>
  * sql on FHIR (postgresql, spark, bigquery)<br>
  * fhirpath in database<br>
  * more</p>
<p>Specify scenarios on github issues - <a href="https://github.com/fhir-fuel/fhir-storage-and-analytics-track/issues" target="_blank" title="https://github.com/fhir-fuel/fhir-storage-and-analytics-track/issues">https://github.com/fhir-fuel/fhir-storage-and-analytics-track/issues</a><br>
Work on track definition - <a href="http://wiki.hl7.org/index.php?title=201809_FHIR_Storage_and_Analytics" target="_blank" title="http://wiki.hl7.org/index.php?title=201809_FHIR_Storage_and_Analytics">http://wiki.hl7.org/index.php?title=201809_FHIR_Storage_and_Analytics</a></p>
<p>Different types of scenarios from tutorials to top level </p>
<p>Book room for discussion "SQL on FHIR" (<span class="user-mention" data-user-id="193657">@Ryan Brush</span>  provides proposal for SQL on FHIR)</p>
<p>Use synthea dataset as default</p>
<p><span class="user-mention" data-user-id="191318">@nicola (RIO/SS)</span> is track leader</p>
<p>Next meeting <a href="https://calendar.google.com/event?action=TEMPLATE&amp;tmeid=MWFpbWRvbWEwcmIybThnbmt1OGlyaTRvdXNfMjAxODA5MDZUMTYwMDAwWiBoZWFsdGgtc2FtdXJhaS5pb184ZXFkODF2bW00NGk2c2lmYjdodG1oN2hpZ0Bn&amp;tmsrc=health-samurai.io_8eqd81vmm44i6sifb7htmh7hig%40group.calendar.google.com&amp;scp=ALL" target="_blank" title="https://calendar.google.com/event?action=TEMPLATE&amp;tmeid=MWFpbWRvbWEwcmIybThnbmt1OGlyaTRvdXNfMjAxODA5MDZUMTYwMDAwWiBoZWFsdGgtc2FtdXJhaS5pb184ZXFkODF2bW00NGk2c2lmYjdodG1oN2hpZ0Bn&amp;tmsrc=health-samurai.io_8eqd81vmm44i6sifb7htmh7hig%40group.calendar.google.com&amp;scp=ALL">https://calendar.google.com/event?action=TEMPLATE&amp;tmeid=MWFpbWRvbWEwcmIybThnbmt1OGlyaTRvdXNfMjAxODA5MDZUMTYwMDAwWiBoZWFsdGgtc2FtdXJhaS5pb184ZXFkODF2bW00NGk2c2lmYjdodG1oN2hpZ0Bn&amp;tmsrc=health-samurai.io_8eqd81vmm44i6sifb7htmh7hig%40group.calendar.google.com&amp;scp=ALL</a></p>



<a name="153992273"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179219-analytics%20on%20FHIR/topic/FHIR%20foundation%20project/near/153992273" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Christiaan Knaap <a href="https://fhir.github.io/chat-archive/stream/179219-analytics-on-FHIR/topic/FHIR.20foundation.20project.html#153992273">(Aug 31 2018 at 09:10)</a>:</h4>
<p>No, it targets a FHIR server. It even starts by requesting its capabilitystatement to check the endpoint.</p>



<a name="153992460"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179219-analytics%20on%20FHIR/topic/FHIR%20foundation%20project/near/153992460" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrik Sundberg <a href="https://fhir.github.io/chat-archive/stream/179219-analytics-on-FHIR/topic/FHIR.20foundation.20project.html#153992460">(Sep 01 2018 at 01:15)</a>:</h4>
<p>Some reading material that i think is relevant for these discussions: <a href="http://www.healthintersections.com.au/?p=2824" target="_blank" title="http://www.healthintersections.com.au/?p=2824">http://www.healthintersections.com.au/?p=2824</a> and (if you have a lot of time) <a href="#narrow/stream/4-implementers/topic/JSON.20Format.20for.20Primitives.20.26.20extensions" title="#narrow/stream/4-implementers/topic/JSON.20Format.20for.20Primitives.20.26.20extensions">https://chat.fhir.org/#narrow/stream/4-implementers/topic/JSON.20Format.20for.20Primitives.20.26.20extensions</a></p>



<a name="153993028"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179219-analytics%20on%20FHIR/topic/FHIR%20foundation%20project/near/153993028" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ryan Brush <a href="https://fhir.github.io/chat-archive/stream/179219-analytics-on-FHIR/topic/FHIR.20foundation.20project.html#153993028">(Sep 04 2018 at 16:22)</a>:</h4>
<p>As discussed on the August 31 call, I wanted to start discussion with a straw-man proposal for analytic workloads via "SQL on FHIR". You can find that proposal here (although we can easily move it to a collaborative repository elsewhere):</p>
<p><a href="https://github.com/rbrush/sql-on-fhir/blob/master/sql-on-fhir.md" target="_blank" title="https://github.com/rbrush/sql-on-fhir/blob/master/sql-on-fhir.md">https://github.com/rbrush/sql-on-fhir/blob/master/sql-on-fhir.md</a></p>
<p>This proposal focuses on the schema and views provided to SQL users -- which may or may not be a direct reflection of the underlying physical model. There are tradeoffs here, but I think it's important that we provide our SQL users with a model that strongly matches their intuitions.  We have a lot of users working through a variety of statistical analyses of healthcare data, and I would very much like to have them do so on FHIR-based data models. This gives them access to a much broader dataset than they have had historically, enables more portable and reproducible analysis, and makes the results of such analysis much easier to implement in any system that speaks FHIR. This could be a significant gain for the creation and application of new knowledge.</p>
<p>However, this only works if we can bring this class of analyst and researcher on board to using FHIR-based data for their needs. Therefore the proposal in this document prefers offering a simpler view for the 99% case (such as primitives that do not have extensions) to make this an appealing environment for their work. It may be convenient for underlying physical storage to follow the same pattern, but that is not required.</p>
<p>In any case, my goal here is simply to offer a more concrete basis to start the conversation -- so feedback and suggestions are strongly desired!</p>



<a name="153993095"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179219-analytics%20on%20FHIR/topic/FHIR%20foundation%20project/near/153993095" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrik Sundberg <a href="https://fhir.github.io/chat-archive/stream/179219-analytics-on-FHIR/topic/FHIR.20foundation.20project.html#153993095">(Sep 04 2018 at 18:10)</a>:</h4>
<p>Great writeup, thanks a lot for that. At a high level I agree with generating a schema from a profile, and in particular using the extension slices in that profile to simplify use of extensions. I also agree with keeping choice types as structs, which is sort of what FHIRPath does. Two items for discussion:<br>
- should we handle references differently in some way? joining across resources is cumbersome with the standard representation<br>
- decimal as VARCHAR vs DECIMAL: switching to a numeric type means we can't go back from SQL to FHIR without loss of knowledge of precision. That's worth noting.<br>
-  why store date/datetime/time as VARCHAR? to retain knowledge of timestamp precision?<br>
- other fields can be sliced; how do we handle that? worth a section. i think slicing is actually a great assert for the SQL representation.</p>
<p>at a high level, we need to decide if  we expect to be able to round trip from FHIR to SQL and back in a lossless manner, or if we're giving that up.</p>



<a name="153993120"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179219-analytics%20on%20FHIR/topic/FHIR%20foundation%20project/near/153993120" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ryan Brush <a href="https://fhir.github.io/chat-archive/stream/179219-analytics-on-FHIR/topic/FHIR.20foundation.20project.html#153993120">(Sep 04 2018 at 19:05)</a>:</h4>
<p>Great questions. A few initial thoughts here:</p>
<ul>
<li>should we handle references differently in some way? joining across resources is cumbersome with the standard representation</li>
</ul>
<p>Good idea. Perhaps we generate an additional field that sits in the Reference structure that that can be equi-joined to other resources? Maybe something like subject.patient_reference in the generated SQL schema, so the type of the reference is clear from the field?</p>
<ul>
<li>decimal as VARCHAR vs DECIMAL: switching to a numeric type means we can't go back from SQL to FHIR without loss of knowledge of precision. </li>
</ul>
<p>Agreed this is worth noting, but I think this tradeoff is worthwhile for SQL users. We had a similar system where we kept these as strings, and users would use comparison operators without realizing these numbers were still strings...leading to bad results. I think this justifies the lack of clarity in precision here.</p>
<ul>
<li>why store date/datetime/time as VARCHAR? to retain knowledge of timestamp precision?</li>
</ul>
<p>Yes, this retains knowledge of precision and avoids ambiguity in timestamp fields. If we get 2018-09-01 in a datetime field but encode it as 2018-09-01T00:00:00 in a timestamp, we don't know if the source really meant midnight or just that day. Unlike the conversion to DECIMAL, this is less prone to induce hidden user error...but we can discuss the tradeoffs further.</p>
<ul>
<li>other fields can be sliced; how do we handle that? worth a section. i think slicing is actually a great assert for the SQL representation.</li>
</ul>
<p>I hadn't thought through how we'd handle this yet, but agree it makes a lot of sense. (I'd much rather be able to reference .systolic and .diastolic fields rather than using some external reference to know they are [0] and [1] in some array...) Let's see if we can find a way to add this.</p>



<a name="153993138"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179219-analytics%20on%20FHIR/topic/FHIR%20foundation%20project/near/153993138" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ryan Brush <a href="https://fhir.github.io/chat-archive/stream/179219-analytics-on-FHIR/topic/FHIR.20foundation.20project.html#153993138">(Sep 04 2018 at 19:17)</a>:</h4>
<p>As for lossless bi-directional conversion: I think we should aim for this, but there are likely to be edge cases where that isn't practical, such as recursive structures of unbounded depth or nested resources.  I think we should aim for lossless conversion in all cases possible, and make sure the exceptions are well defined and documented</p>
<p>Users who need strong lossless guarantees can use this proposal merely as a <em>view</em> of underlying data, but also keep their data in a storage format that offers strong guarantees of round-trip lossless conversion...</p>



<a name="153993198"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179219-analytics%20on%20FHIR/topic/FHIR%20foundation%20project/near/153993198" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179219-analytics-on-FHIR/topic/FHIR.20foundation.20project.html#153993198">(Sep 04 2018 at 21:11)</a>:</h4>
<p>references: the FHIR spec anticipates that storage forms will add an an additional element to the reference data type that contains the resolution of the reference - usually, a primary key. But the exact details of what the reference is will depend on design and technology. The question is, what table does the key refer into?</p>



<a name="153993202"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179219-analytics%20on%20FHIR/topic/FHIR%20foundation%20project/near/153993202" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179219-analytics-on-FHIR/topic/FHIR.20foundation.20project.html#153993202">(Sep 04 2018 at 21:13)</a>:</h4>
<p>the mismatches between the fhir data type and the sql data types in the corner cases are difficult. I would have thought that storing using the native type with a precision field as a sibling field is a better tradeoff for native storage (and justified there, where it's not justified on the wire for exchange)</p>



<a name="153993309"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179219-analytics%20on%20FHIR/topic/FHIR%20foundation%20project/near/153993309" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ryan Brush <a href="https://fhir.github.io/chat-archive/stream/179219-analytics-on-FHIR/topic/FHIR.20foundation.20project.html#153993309">(Sep 05 2018 at 02:16)</a>:</h4>
<p>I like the idea of using the native type with precision as a sibling field. I'll look into a simple approach for doing so and add it to the proposal. (Suggestions on conventions here are welcome as well.) </p>
<p>As for what table do references join to: I (perhaps naïvely) was thinking the referent table could be determined by generating a sibling field to the reference field, e.g., patient_reference, encounter_reference, and so on.  This isn't expressed in the current draft, but Patrik's comments above got me thinking down these lines. There may be considerations here I'm overlooking...so if I'm missing something obvious please let me know. :)</p>



<a name="153993320"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179219-analytics%20on%20FHIR/topic/FHIR%20foundation%20project/near/153993320" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrik Sundberg <a href="https://fhir.github.io/chat-archive/stream/179219-analytics-on-FHIR/topic/FHIR.20foundation.20project.html#153993320">(Sep 05 2018 at 03:56)</a>:</h4>
<p>In the proto representation, we use { timestamp, precision } tuples for datetime types, and that carries over into our current experimental sql representation. same with references, a references of the form "Patient/123" will be represented as "{ patient_id: 123 }". But both of these approaches have drawbacks as well. For example (and to Grahame's point), this approach for references more or less assumes a single table, which isn't always appropriate.</p>



<a name="153993323"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179219-analytics%20on%20FHIR/topic/FHIR%20foundation%20project/near/153993323" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ryan Brush <a href="https://fhir.github.io/chat-archive/stream/179219-analytics-on-FHIR/topic/FHIR.20foundation.20project.html#153993323">(Sep 05 2018 at 04:11)</a>:</h4>
<p>I'd imagine we would have and reference different tables based on the resource profiles...so (for example) in US Core there would be separate tables for results and vital signs, as opposed to just one observation table. Is a table-per-profile in an Implementation Guide the right path? I would be curious if there are examples where this isn't sufficient (realizing that we'd have to flesh out this pattern to really be sure we've covered all of the corner cases.)</p>
<p>That's something we implied earlier but should be explicit about: these schemas are generated in the context of an Implementation Guide, and therefore would handle extensions and reference fields in a way consistent with that particular guide...</p>



<a name="153993326"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179219-analytics%20on%20FHIR/topic/FHIR%20foundation%20project/near/153993326" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrik Sundberg <a href="https://fhir.github.io/chat-archive/stream/179219-analytics-on-FHIR/topic/FHIR.20foundation.20project.html#153993326">(Sep 05 2018 at 04:17)</a>:</h4>
<p>agreed. a lot of this makes the most sense in the context of a complete implementation guide. we should be explicit about that.</p>
<p>even so, linking "Observation/abc" to Vitals vs Labs vs SomethingElse isn't going to be trivial. Where/when would that be done?</p>



<a name="153993328"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179219-analytics%20on%20FHIR/topic/FHIR%20foundation%20project/near/153993328" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179219-analytics-on-FHIR/topic/FHIR.20foundation.20project.html#153993328">(Sep 05 2018 at 04:30)</a>:</h4>
<p>I would advise against 'a table per profile' for the simple reason that there will be many cases where observations - in particular - meet multiple profiles.</p>



<a name="153993329"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179219-analytics%20on%20FHIR/topic/FHIR%20foundation%20project/near/153993329" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179219-analytics-on-FHIR/topic/FHIR.20foundation.20project.html#153993329">(Sep 05 2018 at 04:31)</a>:</h4>
<p>I've seen a pattern where you have a table for each resource, and a separate table for each profile that is just a key:key pair, so you can join by profile if you want to</p>



<a name="153993330"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179219-analytics%20on%20FHIR/topic/FHIR%20foundation%20project/near/153993330" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179219-analytics-on-FHIR/topic/FHIR.20foundation.20project.html#153993330">(Sep 05 2018 at 04:34)</a>:</h4>
<p>with regard to references: I think that there are 2 different issues:</p>
<ul>
<li>classic polymorphic joins issue - see e.g. <a href="https://hashrocket.com/blog/posts/modeling-polymorphic-associations-in-a-relational-database" target="_blank" title="https://hashrocket.com/blog/posts/modeling-polymorphic-associations-in-a-relational-database">https://hashrocket.com/blog/posts/modeling-polymorphic-associations-in-a-relational-database</a></li>
<li>fhir specifix issue around the fact that references are much broader in functionality than a relational reference in the same database</li>
</ul>



<a name="153993333"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179219-analytics%20on%20FHIR/topic/FHIR%20foundation%20project/near/153993333" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179219-analytics-on-FHIR/topic/FHIR.20foundation.20project.html#153993333">(Sep 05 2018 at 04:38)</a>:</h4>
<p>one of the challenges here is that I feel it's unlikely that people will buy into a single answer for the first part</p>



<a name="153993342"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179219-analytics%20on%20FHIR/topic/FHIR%20foundation%20project/near/153993342" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ryan Brush <a href="https://fhir.github.io/chat-archive/stream/179219-analytics-on-FHIR/topic/FHIR.20foundation.20project.html#153993342">(Sep 05 2018 at 05:38)</a>:</h4>
<p>Fair enough, a rote table-per-profile isn't where we want to go. At the same time, I don't think a table-per-resource is sufficient in all cases, either...since we want to generate concrete fields based on extensions that exist only in some profiles to make things easier to query.</p>
<p>Looking closer, I'm not sure that there is an algorithmic solution to define what tables should exist and how they are linked based purely on Implementation Guides as they exist today. It almost feels like we need to build an "SQL Implementation Guide" that evolves from usage patterns to supplement the existing guides, stating which tables exist, the collection of profiles they may serve, and how they are linked together. Just speculating here, but maybe it makes sense for vitals and labs to co-exist in an Observation table...but something significantly different (like genetics extensions to observations) would live in its own table and we handle these explicitly. Such polymorphic queries might still cause headaches, but we can isolate them to where they're really needed and explicitly define how to handle them.</p>



<a name="153993344"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179219-analytics%20on%20FHIR/topic/FHIR%20foundation%20project/near/153993344" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179219-analytics-on-FHIR/topic/FHIR.20foundation.20project.html#153993344">(Sep 05 2018 at 07:17)</a>:</h4>
<p>polymophism is bad enough, but what is going on with the profiles is worse :-(</p>



<a name="153993345"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179219-analytics%20on%20FHIR/topic/FHIR%20foundation%20project/near/153993345" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179219-analytics-on-FHIR/topic/FHIR.20foundation.20project.html#153993345">(Sep 05 2018 at 07:18)</a>:</h4>
<p>but, in fact, a lake of json fragments should be superior, shouldn't it, if you can sql directly on them - isn't that what this is about?</p>



<a name="153993536"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179219-analytics%20on%20FHIR/topic/FHIR%20foundation%20project/near/153993536" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ryan Brush <a href="https://fhir.github.io/chat-archive/stream/179219-analytics-on-FHIR/topic/FHIR.20foundation.20project.html#153993536">(Sep 05 2018 at 17:57)</a>:</h4>
<p>A main goal (from my perspective) is to make FHIR data easily used by a variety of popular data science tools. If a lake of JSON fragments satisfies that, I'm all for it...although it's not obvious how to make that easily discoverable and understandable by a set of users that generally start with SQL-based tooling. (Also, JSON doesn't lend itself to efficient analytic operations at scale.)</p>
<p>Given the complexity here, I wonder if our first iteration should have a less ambitious goal to create a building block for larger systems. So our first goalpost might be to:</p>
<p>1. For a given StructureDefinition, generate an SQL schema that can represent the corresponding records in way that is efficient and simple to query in a variety of analytic databases, and<br>
2. Be able to load the NDJSON files from Bulk Extract (or other sources) into tables using the above schema.</p>
<p>As this evolves we can consider defining what tables should exist and how to join them in the context of an IG. But even if that's not practical, I think this first goalpost of conventions around SQL schema derived from a StructureDefinition is a useful asset -- and gets some currently ongoing projects using common building blocks in this space.</p>



<a name="153993816"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179219-analytics%20on%20FHIR/topic/FHIR%20foundation%20project/near/153993816" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nicola (RIO/SS) <a href="https://fhir.github.io/chat-archive/stream/179219-analytics-on-FHIR/topic/FHIR.20foundation.20project.html#153993816">(Sep 06 2018 at 13:42)</a>:</h4>
<p>Can we do discussion of specific topics in issues of Ryan's repo - it will be more structured. I created couple of issues to discuss. We represent references as <code>{id: 'textid', resourceType: 'Patient'}</code> object.</p>



<a name="153993820"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179219-analytics%20on%20FHIR/topic/FHIR%20foundation%20project/near/153993820" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nicola (RIO/SS) <a href="https://fhir.github.io/chat-archive/stream/179219-analytics-on-FHIR/topic/FHIR.20foundation.20project.html#153993820">(Sep 06 2018 at 13:45)</a>:</h4>
<p>Another solution of polymorphic refs is to move resource type into key -   subject: {Patient: 'pt-id'} - and this approach can be unified with polymorphic/union elements.</p>



<a name="153993823"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179219-analytics%20on%20FHIR/topic/FHIR%20foundation%20project/near/153993823" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nicola (RIO/SS) <a href="https://fhir.github.io/chat-archive/stream/179219-analytics-on-FHIR/topic/FHIR.20foundation.20project.html#153993823">(Sep 06 2018 at 13:45)</a>:</h4>
<p>I think, we can have logical representation of FHIR resource for storage - which can be used for both -  json and native databases.</p>



<a name="153993824"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179219-analytics%20on%20FHIR/topic/FHIR%20foundation%20project/near/153993824" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nicola (RIO/SS) <a href="https://fhir.github.io/chat-archive/stream/179219-analytics-on-FHIR/topic/FHIR.20foundation.20project.html#153993824">(Sep 06 2018 at 13:46)</a>:</h4>
<p><span class="user-mention" data-user-id="193657">@Ryan Brush</span> can we split your initial doc into sections and have discussion over each section separately.</p>



<a name="153993849"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179219-analytics%20on%20FHIR/topic/FHIR%20foundation%20project/near/153993849" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ryan Brush <a href="https://fhir.github.io/chat-archive/stream/179219-analytics-on-FHIR/topic/FHIR.20foundation.20project.html#153993849">(Sep 06 2018 at 15:25)</a>:</h4>
<p>I'm fine with discussing specific considerations as GitHub issues. </p>
<p>Does the initial goalpost I mentioned above make sense here? If so, I'll log specific issues for topics that have come up along that path (e.g., dealing with precision with numeric and time structures, etc.)</p>



<a name="153993868"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179219-analytics%20on%20FHIR/topic/FHIR%20foundation%20project/near/153993868" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nicola (RIO/SS) <a href="https://fhir.github.io/chat-archive/stream/179219-analytics-on-FHIR/topic/FHIR.20foundation.20project.html#153993868">(Sep 06 2018 at 15:59)</a>:</h4>
<p>weekly meeting <a href="https://meet.google.com/zvs-ucbe-ufk" target="_blank" title="https://meet.google.com/zvs-ucbe-ufk">https://meet.google.com/zvs-ucbe-ufk</a></p>



<a name="154001564"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179219-analytics%20on%20FHIR/topic/FHIR%20foundation%20project/near/154001564" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ryan Brush <a href="https://fhir.github.io/chat-archive/stream/179219-analytics-on-FHIR/topic/FHIR.20foundation.20project.html#154001564">(Sep 29 2018 at 14:32)</a>:</h4>
<p>Some links for reference at the Connectathon. The straw man SQL on FHIR draft is here: <a href="https://github.com/rbrush/sql-on-fhir/blob/master/sql-on-fhir.md" target="_blank" title="https://github.com/rbrush/sql-on-fhir/blob/master/sql-on-fhir.md">https://github.com/rbrush/sql-on-fhir/blob/master/sql-on-fhir.md</a> and the tutorial for using Spark on FHIR is here: <a href="https://github.com/cerner/bunsen-tutorial" target="_blank" title="https://github.com/cerner/bunsen-tutorial">https://github.com/cerner/bunsen-tutorial</a></p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
