---
layout: page
title: "FHIR Chat  · FHIR-based relational schema · analytics on FHIR"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179219-analytics-on-FHIR/index.html">analytics on FHIR</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179219-analytics-on-FHIR/topic/FHIR-based.20relational.20schema.html">FHIR-based relational schema</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="229771186"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179219-analytics%20on%20FHIR/topic/FHIR-based%20relational%20schema/near/229771186" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Busch <a href="https://fhir.github.io/chat-archive/stream/179219-analytics-on-FHIR/topic/FHIR-based.20relational.20schema.html#229771186">(Mar 11 2021 at 00:17)</a>:</h4>
<p>Has anyone seen a public domain FHIR-based relational schema?</p>



<a name="229802334"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179219-analytics%20on%20FHIR/topic/FHIR-based%20relational%20schema/near/229802334" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vasyl Herman <a href="https://fhir.github.io/chat-archive/stream/179219-analytics-on-FHIR/topic/FHIR-based.20relational.20schema.html#229802334">(Mar 11 2021 at 06:43)</a>:</h4>
<p>Hi. We used pg admin to get the schema</p>



<a name="229802414"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179219-analytics%20on%20FHIR/topic/FHIR-based%20relational%20schema/near/229802414" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vasyl Herman <a href="https://fhir.github.io/chat-archive/stream/179219-analytics-on-FHIR/topic/FHIR-based.20relational.20schema.html#229802414">(Mar 11 2021 at 06:44)</a>:</h4>
<p>Also interested in the official one.</p>



<a name="229852233"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179219-analytics%20on%20FHIR/topic/FHIR-based%20relational%20schema/near/229852233" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Busch <a href="https://fhir.github.io/chat-archive/stream/179219-analytics-on-FHIR/topic/FHIR-based.20relational.20schema.html#229852233">(Mar 11 2021 at 14:03)</a>:</h4>
<p><span class="user-mention" data-user-id="376706">@Vasyl Herman</span>  Can you share details on "using pg admin to get the schema"?</p>



<a name="229852880"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179219-analytics%20on%20FHIR/topic/FHIR-based%20relational%20schema/near/229852880" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Hellwig <a href="https://fhir.github.io/chat-archive/stream/179219-analytics-on-FHIR/topic/FHIR-based.20relational.20schema.html#229852880">(Mar 11 2021 at 14:07)</a>:</h4>
<p>I am not sure that a generic relational schema is possible. FHIR makes heavy use of the document-like data representation, concretely 'nestedness', optional data points, etc., and resources keep getting updated.<br>
This would be really hard to track in a normalized relational schema.  And a schema export from an existing dataset (e.g. with pg admin) is only valid at this point in time. Any resource added might make a re-design necessary.... (whether this is likely depends on the size and variety of the existing dataset, of course)</p>
<p>For our analytics we go with a limited relational schema, i.e. we extract only the key/value pairs we need for our visualizations.</p>



<a name="229868543"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179219-analytics%20on%20FHIR/topic/FHIR-based%20relational%20schema/near/229868543" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179219-analytics-on-FHIR/topic/FHIR-based.20relational.20schema.html#229868543">(Mar 11 2021 at 15:34)</a>:</h4>
<p>There is no "official" schema - any FHIR-based schema is going to have trade-offs driven by how you plan to use the data.</p>



<a name="229869846"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179219-analytics%20on%20FHIR/topic/FHIR-based%20relational%20schema/near/229869846" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vasyl Herman <a href="https://fhir.github.io/chat-archive/stream/179219-analytics-on-FHIR/topic/FHIR-based.20relational.20schema.html#229869846">(Mar 11 2021 at 15:42)</a>:</h4>
<p><span class="user-mention" data-user-id="396450">@Chris Busch</span> Hello, clone <code>hapi-fhir-jpaserver-starter</code> <br>
My datasource config looks like this:</p>
<div class="codehilite" data-code-language="YAML"><pre><span></span><code><span class="nt">spring</span><span class="p">:</span>
  <span class="nt">datasource</span><span class="p">:</span>
    <span class="nt">url</span><span class="p">:</span> <span class="s">'jdbc:postgresql://hapi-fhir-pg:5432/hapi'</span>
    <span class="nt">username</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">user</span>
    <span class="nt">password</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">passwd</span>
    <span class="nt">driverClassName</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">org.postgresql.Driver</span>
</code></pre></div>
<p>docker-compose.yml like this:</p>
<div class="codehilite" data-code-language="YAML"><pre><span></span><code><span class="nt">version</span><span class="p">:</span> <span class="s">"3.7"</span>
<span class="nt">services</span><span class="p">:</span>
  <span class="nt">hapi-fhir-jpaserver-start</span><span class="p">:</span>
    <span class="nt">depends_on</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">hapi-fhir-mysql</span>
<span class="c1">#    image: "hapiproject/hapi:latest"</span>
    <span class="nt">build</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">.</span>
    <span class="nt">restart</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">on-failure</span>
    <span class="nt">ports</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="s">"8080:8080"</span>
    <span class="nt">volumes</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">hapi-data:/data/hapi</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">./configs/application.yaml:/data/hapi/application.yaml</span>
    <span class="nt">environment</span><span class="p">:</span>
      <span class="nt">SPRING_CONFIG_LOCATION</span><span class="p">:</span> <span class="s">'file:///data/hapi/application.yaml'</span>

  <span class="nt">hapi-fhir-pg</span><span class="p">:</span>
    <span class="nt">image</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">postgres:10</span>
    <span class="nt">restart</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">always</span>
    <span class="nt">volumes</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">hapi-fhir-pg:/var/lib/postgresql/data:Z</span>
    <span class="nt">environment</span><span class="p">:</span>
      <span class="nt">POSTGRES_USER</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">admin</span>
      <span class="nt">POSTGRES_PASSWORD</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">admin</span>
      <span class="nt">POSTGRES_DB</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">hapi</span>
      <span class="nt">http_proxy</span><span class="p">:</span>
      <span class="nt">https_proxy</span><span class="p">:</span>
      <span class="nt">no_proxy</span><span class="p">:</span>
    <span class="nt">ports</span><span class="p">:</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">5431:5432</span>

  <span class="nt">pgadmin</span><span class="p">:</span>
    <span class="nt">image</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">dpage/pgadmin4</span>
    <span class="nt">restart</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">always</span>
    <span class="nt">ports</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">8280:80</span>
    <span class="nt">environment</span><span class="p">:</span>
      <span class="nt">PGADMIN_DEFAULT_EMAIL</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">yours</span>
      <span class="nt">PGADMIN_DEFAULT_PASSWORD</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">admin</span>
    <span class="nt">volumes</span><span class="p">:</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">pgadmin-data:/var/lib/pgadmin</span>

<span class="nt">volumes</span><span class="p">:</span>
  <span class="nt">hapi-data</span><span class="p">:</span>
  <span class="nt">hapi-fhir-pg</span><span class="p">:</span>
</code></pre></div>
<p>then start docker-compose and finally you can use pg admin to backup the shcema</p>



<a name="229870176"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179219-analytics%20on%20FHIR/topic/FHIR-based%20relational%20schema/near/229870176" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vasyl Herman <a href="https://fhir.github.io/chat-archive/stream/179219-analytics-on-FHIR/topic/FHIR-based.20relational.20schema.html#229870176">(Mar 11 2021 at 15:44)</a>:</h4>
<p><span class="user-mention" data-user-id="396450">@Chris Busch</span> I am wondering why you need this?</p>



<a name="229874430"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179219-analytics%20on%20FHIR/topic/FHIR-based%20relational%20schema/near/229874430" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Stanley <a href="https://fhir.github.io/chat-archive/stream/179219-analytics-on-FHIR/topic/FHIR-based.20relational.20schema.html#229874430">(Mar 11 2021 at 16:04)</a>:</h4>
<p>I'll toss in here that the firebase folks used binary blobs (jsonb) in postgres for the full resource content, and IIRC only create fields for resource id. The binary blobs can be indexed as one wishes.</p>



<a name="229898364"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179219-analytics%20on%20FHIR/topic/FHIR-based%20relational%20schema/near/229898364" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Busch <a href="https://fhir.github.io/chat-archive/stream/179219-analytics-on-FHIR/topic/FHIR-based.20relational.20schema.html#229898364">(Mar 11 2021 at 18:11)</a>:</h4>
<p><span class="user-mention silent" data-user-id="376706">Vasyl Herman</span> [said](<a href="#narrow/stream/179219-analytics-on.20FHIR/topic/FHIR-">https://chat.fhir.org/#narrow/stream/179219-analytics-on.20FHIR/topic/FHIR-</a><br>
<span class="user-mention" data-user-id="396450">@Chris Busch</span> I am wondering why you need this?</p>
<p>We are creating a persistent database which will receive and send data in FHIR but the primary use is analytics.  Thinking it will make life easier to follow the FHIR organization and naming to the extent possible.</p>



<a name="229919767"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179219-analytics%20on%20FHIR/topic/FHIR-based%20relational%20schema/near/229919767" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vasyl Herman <a href="https://fhir.github.io/chat-archive/stream/179219-analytics-on-FHIR/topic/FHIR-based.20relational.20schema.html#229919767">(Mar 11 2021 at 20:24)</a>:</h4>
<p><span class="user-mention" data-user-id="396450">@Chris Busch</span><br>
Thanks for answering. I hope it helps you.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
