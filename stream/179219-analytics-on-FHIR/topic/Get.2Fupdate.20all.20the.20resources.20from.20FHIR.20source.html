---
layout: page
title: "FHIR Chat  · Get/update all the resources from FHIR source · analytics on FHIR"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179219-analytics-on-FHIR/index.html">analytics on FHIR</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179219-analytics-on-FHIR/topic/Get.2Fupdate.20all.20the.20resources.20from.20FHIR.20source.html">Get/update all the resources from FHIR source</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="222975409"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179219-analytics%20on%20FHIR/topic/Get/update%20all%20the%20resources%20from%20FHIR%20source/near/222975409" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vasyl Herman <a href="https://fhir.github.io/chat-archive/stream/179219-analytics-on-FHIR/topic/Get.2Fupdate.20all.20the.20resources.20from.20FHIR.20source.html#222975409">(Jan 16 2021 at 11:08)</a>:</h4>
<p>Hi. We are going to have a scheduled backend worker that gets all FHIR Patient resources from a FHIR API R4 source or updates that data if there is some updates and stores the data locally (S3). We need that data for Clinical Quality Measures done by cql-execution (JS library). I apprisiate any help to get an idea how to imlement the first part (get/update FHIR resources and store locally). Is there any available tools for that? Thanks!</p>



<a name="223467305"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179219-analytics%20on%20FHIR/topic/Get/update%20all%20the%20resources%20from%20FHIR%20source/near/223467305" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Iryna Roy <a href="https://fhir.github.io/chat-archive/stream/179219-analytics-on-FHIR/topic/Get.2Fupdate.20all.20the.20resources.20from.20FHIR.20source.html#223467305">(Jan 21 2021 at 03:54)</a>:</h4>
<p>Is it about Subscription to updates of resources? FHIR Server implementations support it. If you have your own, you may need to implement it - unless I misunderstood the question.</p>



<a name="223485249"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179219-analytics%20on%20FHIR/topic/Get/update%20all%20the%20resources%20from%20FHIR%20source/near/223485249" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vasyl Herman <a href="https://fhir.github.io/chat-archive/stream/179219-analytics-on-FHIR/topic/Get.2Fupdate.20all.20the.20resources.20from.20FHIR.20source.html#223485249">(Jan 21 2021 at 09:28)</a>:</h4>
<p>Hi, <span class="user-mention" data-user-id="191416">@Iryna Roy</span><br>
Well I didn't know that FHIR supports "Subscription to updates of resources". Thanks, it can be helpful for our research :)</p>
<p>Let me try to explain what we are trying to do:<br>
Our goal is to run CQL against a FHIR Data Source using cql-exec-fhir and cql-execution (JS libraries). The FHIR Data Source expects each patient to be represented as a single FHIR Bundle containing all of the patient's relevant data. First of all we need to export data from  FHIR APIs and store it I believe localy as .json files. Existing FHIR APIs work well for accessing small amounts of data, but large exports can require hundreds of thousands of requests. There is standardized, FHIR based approach for exporting bulk data from a FHIR server usign another JS library called fhir-downloader. Using fhir-downloader you can perform Patient-level export or System-level export as .ndjson files. Here you go. We have all Patient's relevant data stored localy as ndjson files. Next step is to convert ndjson files to FHIR Bundle. At this point it is a question on how to convert. Finally we can run CQL</p>



<a name="223554354"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179219-analytics%20on%20FHIR/topic/Get/update%20all%20the%20resources%20from%20FHIR%20source/near/223554354" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Iryna Roy <a href="https://fhir.github.io/chat-archive/stream/179219-analytics-on-FHIR/topic/Get.2Fupdate.20all.20the.20resources.20from.20FHIR.20source.html#223554354">(Jan 21 2021 at 18:56)</a>:</h4>
<p><span class="user-mention" data-user-id="376706">@Vasyl Herman</span> Can you store data in FHIR Server instead of json files and run CQL against data in the server? <a href="http://build.fhir.org/ig/cqframework/payerextract/implementation-documentation.html">http://build.fhir.org/ig/cqframework/payerextract/implementation-documentation.html</a>  I am honestly just a high-level CQL aware, there are some interesting works related to the use of Subscriptions and CQL execution but it is not through the use of the libraries you mentioned.</p>



<a name="223557586"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179219-analytics%20on%20FHIR/topic/Get/update%20all%20the%20resources%20from%20FHIR%20source/near/223557586" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Iryna Roy <a href="https://fhir.github.io/chat-archive/stream/179219-analytics-on-FHIR/topic/Get.2Fupdate.20all.20the.20resources.20from.20FHIR.20source.html#223557586">(Jan 21 2021 at 19:20)</a>:</h4>
<p>Next release of HAPI FHIR promisses something related to CQL <a href="https://www.smilecdr.com/quarterly-product-release-webinar-reminder">https://www.smilecdr.com/quarterly-product-release-webinar-reminder</a></p>



<a name="223561581"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179219-analytics%20on%20FHIR/topic/Get/update%20all%20the%20resources%20from%20FHIR%20source/near/223561581" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vasyl Herman <a href="https://fhir.github.io/chat-archive/stream/179219-analytics-on-FHIR/topic/Get.2Fupdate.20all.20the.20resources.20from.20FHIR.20source.html#223561581">(Jan 21 2021 at 19:50)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191416">Iryna Roy</span> <a href="#narrow/stream/179219-analytics-on.20FHIR/topic/Get.2Fupdate.20all.20the.20resources.20from.20FHIR.20source/near/223554354">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="376706">Vasyl Herman</span> Can you store data in FHIR Server instead of json files and run CQL against data in the server? </p>
</blockquote>
<p>It would be awesome. At this point I am not aware of any other ways for performing health quality measures. Looks like the <a href="http://build.fhir.org/ig/cqframework/payerextract/implementation-documentation.html">mentieoned document</a> promises exactly what I need. <br>
So, an analyst would pass in a clq file an get the result.</p>



<a name="223830661"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179219-analytics%20on%20FHIR/topic/Get/update%20all%20the%20resources%20from%20FHIR%20source/near/223830661" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179219-analytics-on-FHIR/topic/Get.2Fupdate.20all.20the.20resources.20from.20FHIR.20source.html#223830661">(Jan 24 2021 at 19:28)</a>:</h4>
<p><span class="user-mention" data-user-id="376706">@Vasyl Herman</span> , yes, there is a java-based CQL engine that can be plugged in to the HAPI FHIR server via the <a href="https://github.com/dbcg/cqf-ruler">CQF Ruler extension</a>, that is what we use in the Clinical Reasoning track of the connectathon to run quality measures. The same components are also used to support file-based CQL/FHIR evaluation in the <a href="https://github.com/cqframework/atom_cql_support">Atom CQL Plugin</a>, and have also been used as part of a Spark pipeline.</p>



<a name="223832173"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179219-analytics%20on%20FHIR/topic/Get/update%20all%20the%20resources%20from%20FHIR%20source/near/223832173" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vasyl Herman <a href="https://fhir.github.io/chat-archive/stream/179219-analytics-on-FHIR/topic/Get.2Fupdate.20all.20the.20resources.20from.20FHIR.20source.html#223832173">(Jan 24 2021 at 19:55)</a>:</h4>
<p><span class="user-mention" data-user-id="191359">@Bryn Rhodes</span> Thank you for valuable information! Have you ever used AWS Glue to work with FHIR Bulk data? Or other services/tools available for processing/analizing Bulk?</p>



<a name="223832245"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179219-analytics%20on%20FHIR/topic/Get/update%20all%20the%20resources%20from%20FHIR%20source/near/223832245" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179219-analytics-on-FHIR/topic/Get.2Fupdate.20all.20the.20resources.20from.20FHIR.20source.html#223832245">(Jan 24 2021 at 19:56)</a>:</h4>
<p>I haven't, but maybe <span class="user-mention" data-user-id="194178">@Jonathan Percival</span>, any thoughts on AWS Glue?</p>



<a name="223832453"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179219-analytics%20on%20FHIR/topic/Get/update%20all%20the%20resources%20from%20FHIR%20source/near/223832453" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vasyl Herman <a href="https://fhir.github.io/chat-archive/stream/179219-analytics-on-FHIR/topic/Get.2Fupdate.20all.20the.20resources.20from.20FHIR.20source.html#223832453">(Jan 24 2021 at 20:01)</a>:</h4>
<p>I am wondering how you guys export data from HAPI FHIR and if it possible to run CQL against that dataset localy. Fhir Bulk data access is one of the way of exporting. Or you export Patient by Patient using API requests?</p>



<a name="223832718"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179219-analytics%20on%20FHIR/topic/Get/update%20all%20the%20resources%20from%20FHIR%20source/near/223832718" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vasyl Herman <a href="https://fhir.github.io/chat-archive/stream/179219-analytics-on-FHIR/topic/Get.2Fupdate.20all.20the.20resources.20from.20FHIR.20source.html#223832718">(Jan 24 2021 at 20:05)</a>:</h4>
<p><span class="user-mention" data-user-id="191359">@Bryn Rhodes</span><br>
Btw, you are saying about file-based CQL/FHIR evaluation. What is the input data? .ndjson files ot Patient bundles?</p>



<a name="223834645"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179219-analytics%20on%20FHIR/topic/Get/update%20all%20the%20resources%20from%20FHIR%20source/near/223834645" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179219-analytics-on-FHIR/topic/Get.2Fupdate.20all.20the.20resources.20from.20FHIR.20source.html#223834645">(Jan 24 2021 at 20:45)</a>:</h4>
<p>Currently it can be individual files or bundles, but expanding it to ndjson would be straightforward.</p>



<a name="223834707"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179219-analytics%20on%20FHIR/topic/Get/update%20all%20the%20resources%20from%20FHIR%20source/near/223834707" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179219-analytics-on-FHIR/topic/Get.2Fupdate.20all.20the.20resources.20from.20FHIR.20source.html#223834707">(Jan 24 2021 at 20:46)</a>:</h4>
<p>The Java-based CQL engine has a data access interface, and when it's running in the HAPI server, the implementation for that interface uses the JPA layer.</p>



<a name="223949947"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179219-analytics%20on%20FHIR/topic/Get/update%20all%20the%20resources%20from%20FHIR%20source/near/223949947" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> JP <a href="https://fhir.github.io/chat-archive/stream/179219-analytics-on-FHIR/topic/Get.2Fupdate.20all.20the.20resources.20from.20FHIR.20source.html#223949947">(Jan 25 2021 at 19:47)</a>:</h4>
<p>I actually haven't messed with Glue so I can't say how to it compares to other ETL tools or if works well with FHIR.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
