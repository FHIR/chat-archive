---
layout: page
title: "FHIR Chat  · .well-known/jwks.json · cds hooks"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/index.html">cds hooks</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/.2Ewell-known.2Fjwks.2Ejson.html">.well-known/jwks.json</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153931679"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/.well-known/jwks.json/near/153931679" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/.2Ewell-known.2Fjwks.2Ejson.html#153931679">(Jan 28 2018 at 06:05)</a>:</h4>
<p>Having some some work on backend services this weekend, I wanted to note one difference between the requirements for resolving keys in the backend services spec vs CDS Hooks: </p>
<ul>
<li>In CDS Hooks, the CDS Service (i.e. the thing issuing JWTs) is necessarily online and visible to the EHR at an <code>https</code> URL</li>
<li>In Backend Services, the service (i.e. the thing issuing JWTs) may not be visible to the EHR -- it issues requests to the EHR, but it could be running on a server behind a VPN or a NAT somewhere and doesn't necessarily support inbound connections</li>
</ul>
<p>... so while in CDS Hooks it makes perfect sense to define a _required_ way to find a jwks from an issuer URI, I'm not sure this makes sense in the general case for backend services. (We might certainly recommend a way to do it, for the cases where the service _is_ reachable by the EHR, but I'm not sure we'd want to require it.) <span class="user-mention" data-user-id="191355">@Kevin Shekleton</span> <span class="user-mention" data-user-id="191316">@Grahame Grieve</span></p>



<a name="153931680"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/.well-known/jwks.json/near/153931680" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Shekleton <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/.2Ewell-known.2Fjwks.2Ejson.html#153931680">(Jan 28 2018 at 06:07)</a>:</h4>
<p>So are you thinking you'd rather have a jwks_url field in the JWT payload that points to a URL where the jwks.json file can be read?</p>



<a name="153931681"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/.well-known/jwks.json/near/153931681" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Shekleton <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/.2Ewell-known.2Fjwks.2Ejson.html#153931681">(Jan 28 2018 at 06:07)</a>:</h4>
<p>If so, I'm fine doing that rather than a <code>.well-known/jwks.json</code> path</p>



<a name="153931684"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/.well-known/jwks.json/near/153931684" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/.2Ewell-known.2Fjwks.2Ejson.html#153931684">(Jan 28 2018 at 06:45)</a>:</h4>
<p>Not necessarily -- I'm just saying that in Backend Services the service may not have a JWKS to expose via URL to the EHR.</p>



<a name="153931686"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/.well-known/jwks.json/near/153931686" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/.2Ewell-known.2Fjwks.2Ejson.html#153931686">(Jan 28 2018 at 06:45)</a>:</h4>
<p>When it _does_, then using a fixed URL pattern still seems fine to me.</p>



<a name="153931687"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/.well-known/jwks.json/near/153931687" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/.2Ewell-known.2Fjwks.2Ejson.html#153931687">(Jan 28 2018 at 06:47)</a>:</h4>
<p>I'm trying to understand what 'the service' is, and what 'the EHR' is.</p>



<a name="153931688"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/.well-known/jwks.json/near/153931688" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/.2Ewell-known.2Fjwks.2Ejson.html#153931688">(Jan 28 2018 at 06:47)</a>:</h4>
<p>which is client and server in which exchange?</p>



<a name="153931689"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/.well-known/jwks.json/near/153931689" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/.2Ewell-known.2Fjwks.2Ejson.html#153931689">(Jan 28 2018 at 06:47)</a>:</h4>
<p>yeah, I said all of that very badly and partially backwards.</p>



<a name="153931690"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/.well-known/jwks.json/near/153931690" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/.2Ewell-known.2Fjwks.2Ejson.html#153931690">(Jan 28 2018 at 06:47)</a>:</h4>
<p>Let me try again.</p>



<a name="153931691"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/.well-known/jwks.json/near/153931691" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/.2Ewell-known.2Fjwks.2Ejson.html#153931691">(Jan 28 2018 at 06:49)</a>:</h4>
<p>CDS Hooks Use case: EHR Signs a JWT and presents it to the CDS Service. Issuer = EHR. Fair to assume EHR is online and can host a jwks.json? Yes (but not <em>necessarily</em> the case)</p>



<a name="153931692"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/.well-known/jwks.json/near/153931692" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/.2Ewell-known.2Fjwks.2Ejson.html#153931692">(Jan 28 2018 at 06:49)</a>:</h4>
<p>agree. we have cases where the CDS Service will not be able to contact the EHR</p>



<a name="153931693"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/.well-known/jwks.json/near/153931693" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/.2Ewell-known.2Fjwks.2Ejson.html#153931693">(Jan 28 2018 at 06:51)</a>:</h4>
<p>Backend Services use case: Backend Service signs a JWT and presents it to an EHR. Issuer = the backend service. Fair to assume the backend service is online and can host a jwks.json? Not really; some services won't host routable endpoints.</p>



<a name="153931694"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/.well-known/jwks.json/near/153931694" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/.2Ewell-known.2Fjwks.2Ejson.html#153931694">(Jan 28 2018 at 06:51)</a>:</h4>
<p>All I'm saying is that the token issuer won't necessarily be able to host a jwks.json file. So the rule "to find a jwks, just append <code>/.well-known/jwks.json</code> to the issuer URI won't always apply.</p>



<a name="153931695"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/.well-known/jwks.json/near/153931695" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/.2Ewell-known.2Fjwks.2Ejson.html#153931695">(Jan 28 2018 at 06:53)</a>:</h4>
<p>tricky because 'backend service' is actually the client here. But we don't require that the issuer be the back end service, do we?</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
