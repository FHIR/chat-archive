---
layout: page
title: "FHIR Chat  · appContext for SMART app link · cds hooks"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/index.html">cds hooks</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/appContext.20for.20SMART.20app.20link.html">appContext for SMART app link</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153995418"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/appContext%20for%20SMART%20app%20link/near/153995418" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chuck Feltner <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/appContext.20for.20SMART.20app.20link.html#153995418">(Sep 10 2018 at 18:52)</a>:</h4>
<p>For the optional appContext attribute for a SMART app link (<a href="https://cds-hooks.org/specification/1.0/#link" target="_blank" title="https://cds-hooks.org/specification/1.0/#link">https://cds-hooks.org/specification/1.0/#link</a>), the CDS Hooks specification states: "The appContext field and value will be sent to the SMART app as part of the OAuth 2.0 access token response, alongside the other SMART launch parameters when the SMART app is launched."</p>
<p>How does the authorization server know when to include the appContext in the token response? Is the appContext included as a parameter in the SMART launch as well?</p>



<a name="153995767"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/appContext%20for%20SMART%20app%20link/near/153995767" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Shekleton <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/appContext.20for.20SMART.20app.20link.html#153995767">(Sep 11 2018 at 15:43)</a>:</h4>
<p>The EHR + AS have a very tight relationship. So, this is for the developers of those two systems to work that out.</p>



<a name="153995768"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/appContext%20for%20SMART%20app%20link/near/153995768" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Shekleton <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/appContext.20for.20SMART.20app.20link.html#153995768">(Sep 11 2018 at 15:44)</a>:</h4>
<p>For example, speaking for Cerner, our EHR and AS have a private API they use to communicate various information during the launch of a SMART app so that the AS knows exactly what context data to pass to the SMART app on launch.</p>



<a name="153995847"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/appContext%20for%20SMART%20app%20link/near/153995847" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chuck Feltner <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/appContext.20for.20SMART.20app.20link.html#153995847">(Sep 11 2018 at 18:37)</a>:</h4>
<p>Thanks <span class="user-mention" data-user-id="191355">@Kevin Shekleton</span> . So CDS Hooks is not adding any additional SMART launch parameters to be able to correlate that specific launch which the appContext is for? It is just relying on the existing SMART launch parameter that the EHR adds to the URL specified in the CDS link?</p>



<a name="153995895"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/appContext%20for%20SMART%20app%20link/near/153995895" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Shekleton <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/appContext.20for.20SMART.20app.20link.html#153995895">(Sep 11 2018 at 20:25)</a>:</h4>
<p>Right. The EHR/AS have to know how to create/understand what that launch parameter is.</p>
<p>For instance, in Cerner's case the launch parameter is a UUID that points to a private datastore that contains the launch/context information. The EHR creates this row+UUID and makes it available to the AS via the aforementioned private API.</p>



<a name="153995959"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/appContext%20for%20SMART%20app%20link/near/153995959" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chuck Feltner <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/appContext.20for.20SMART.20app.20link.html#153995959">(Sep 11 2018 at 22:18)</a>:</h4>
<p>Great. Thanks <span class="user-mention" data-user-id="191355">@Kevin Shekleton</span></p>



<a name="154026135"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/appContext%20for%20SMART%20app%20link/near/154026135" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Travis Cummings <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/appContext.20for.20SMART.20app.20link.html#154026135">(Dec 18 2018 at 18:02)</a>:</h4>
<p>I'm looking to use the appContext to pass a SMART intent parameter to the SMART app.  It would be something simple like "resources" or "calculator" telling the app which flow should be followed.  </p>
<p>If I use the appContext, will the resulting value be nested inside an appContext property (differing from the SMART "intent" parameter that not nested)?  Or is their another way for a CDS Hook app link to indicate intent?  </p>
<p>{<br>
  "access_token": "i8hweunweunweofiwweoijewiwe",<br>
  ...<br>
  "intent": "calculator",<br>
  "appContext": "{\"intent\":\"calculator\"}"<br>
}</p>
<p>The alternate I can think of is simply adding a query parameter to the launch, but I think an EHR might be using the URL value to match a SMART app registration, and fail if I add custom parameters.</p>



<a name="154722563"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/appContext%20for%20SMART%20app%20link/near/154722563" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Shekleton <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/appContext.20for.20SMART.20app.20link.html#154722563">(Jan 09 2019 at 13:23)</a>:</h4>
<p>Yes, the <code>appContext</code> property will sit alongside the other SMART launch parameters via its own property as in your example.</p>
<p>I definitely wouldn't do a query parameter on your SMART app launch URL. Custom URL parameters on SMART app launch URLs are not documented in the SMART spec and I suspect aren't widely supported.</p>



<a name="154848954"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/appContext%20for%20SMART%20app%20link/near/154848954" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Raj M <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/appContext.20for.20SMART.20app.20link.html#154848954">(Jan 10 2019 at 16:02)</a>:</h4>
<p>Should appContext added to SMART spec [http://www.hl7.org/fhir/smart-app-launch/scopes-and-launch-context/#launch-context-arrives-with-your-access_token] as optional or is the documentation in Hooks spec suffice (given this param is more specific to Hooks) ?</p>



<a name="154983052"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/appContext%20for%20SMART%20app%20link/near/154983052" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Shekleton <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/appContext.20for.20SMART.20app.20link.html#154983052">(Jan 12 2019 at 12:53)</a>:</h4>
<p>I think <code>appContext</code> staying solely within the CDS Hooks specification is the right thing (rather than adding it to the SMART app launch specification).</p>



<a name="164900846"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/appContext%20for%20SMART%20app%20link/near/164900846" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Haren <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/appContext.20for.20SMART.20app.20link.html#164900846">(May 05 2019 at 04:05)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="191355">@Kevin Shekleton</span> Is this issue closed?: <a href="https://github.com/smart-on-fhir/smart-launcher/issues/5" target="_blank" title="https://github.com/smart-on-fhir/smart-launcher/issues/5">https://github.com/smart-on-fhir/smart-launcher/issues/5</a></p>
<p>I ask because current sandboxes (Cerner Code, HSPC) do not seem to have a mechanism to specify an appContext to be returned as part of the /token response during app launch. The Da Vinci CRD and DTR use-cases (and reference implementations) are banking on the EHR using the appContext for the SMART app and then including it in the token response, along with access_token, token_type, etc.</p>
<p>I agree that an additional query parameter in the launch url is not a documented technique, so (although it currently can be coerced) it is a brittle workaround.</p>



<a name="164912192"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/appContext%20for%20SMART%20app%20link/near/164912192" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kyle Neumeier <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/appContext.20for.20SMART.20app.20link.html#164912192">(May 05 2019 at 10:00)</a>:</h4>
<p>When I launch a SMART App from a link in CDS card from the HSPC Sandbox where the <code>appContext</code> field was filled out in the card, I'm seeing that appContext value passed into my smart app  in the access token response (along with <code>patient</code>, <code>access_token</code>, <code>scope</code>, etc)</p>



<a name="164914731"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/appContext%20for%20SMART%20app%20link/near/164914731" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Haren <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/appContext.20for.20SMART.20app.20link.html#164914731">(May 05 2019 at 11:14)</a>:</h4>
<p>Thanks Kyle, I assume that this is by using the cds-hooks smart app in HSPC? Have you seen any way to specify the appContext for standalone app launching?</p>



<a name="164915865"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/appContext%20for%20SMART%20app%20link/near/164915865" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kyle Neumeier <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/appContext.20for.20SMART.20app.20link.html#164915865">(May 05 2019 at 11:47)</a>:</h4>
<blockquote>
<p>I assume that this is by using the cds-hooks smart app in HSPC</p>
</blockquote>
<p>Yes, that's what I did: Went to HSPC Sandbox, launched "CDS Hooks Sandbox" from there. </p>
<blockquote>
<p>Have you seen any way to specify the appContext for standalone app launching</p>
</blockquote>
<p>I have not, I don't think I know enough to answer that. For reference though, here is relevant code in cds server sandbox:</p>
<p><a href="https://github.com/cds-hooks/sandbox/blob/master/src/retrieve-data-helpers/launch-context-retrieval.js#L25" target="_blank" title="https://github.com/cds-hooks/sandbox/blob/master/src/retrieve-data-helpers/launch-context-retrieval.js#L25">https://github.com/cds-hooks/sandbox/blob/master/src/retrieve-data-helpers/launch-context-retrieval.js#L25</a></p>
<p>It looks like it makes a <code>POST</code> to <code>${fhirBaseUrl}/_services/smart/Launch</code> with the <code>appContext</code> and gets back a <code>launch_id</code>. It then attaches this as the <code>launch</code> param to the launch url provided by the card.</p>



<a name="164917743"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/appContext%20for%20SMART%20app%20link/near/164917743" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chuck Feltner <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/appContext.20for.20SMART.20app.20link.html#164917743">(May 05 2019 at 12:40)</a>:</h4>
<p><span class="user-mention" data-user-id="192603">@Patrick Haren</span> our FHIR server supports the appContext in the CDS Hooks SMART App launch if you would like to test that interaction.</p>



<a name="164921093"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/appContext%20for%20SMART%20app%20link/near/164921093" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nancy Lush <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/appContext.20for.20SMART.20app.20link.html#164921093">(May 05 2019 at 14:13)</a>:</h4>
<p>Hi Chuck, we have a service with SMART web messaging.  Will let you know when your endpoint is white listed in our service.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
