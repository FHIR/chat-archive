---
layout: page
title: "FHIR Chat  · Filter Matching · cds hooks"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/index.html">cds hooks</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/Filter.20Matching.html">Filter Matching</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153868119"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/Filter%20Matching/near/153868119" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Travis Cummings <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/Filter.20Matching.html#153868119">(Jan 18 2017 at 17:30)</a>:</h4>
<p>I've been thinking there might be a good way to apply a filter to a CDS Hook (and other event-driven use cases).  The technique used by subscription is not event-driven.  Subscription allows a specifying "Criteria=a search criteria".  Of course a search criteria is by definition, searching over the database for matching records.  This isn't what often needs done.  Often, we have the data already and need to find the matching Hooks (or Subscriptions even).</p>



<a name="153868120"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/Filter%20Matching/near/153868120" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Travis Cummings <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/Filter.20Matching.html#153868120">(Jan 18 2017 at 17:34)</a>:</h4>
<p>What makes more sense for an event-driven model is something that a rules engine would use...pattern matching.  This could be something like "code=123".  This is different than "Observation?code=123" because the first is a property on a resource I already have identified and the second is an expression of resources I havent' identified.</p>



<a name="153868121"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/Filter%20Matching/near/153868121" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Travis Cummings <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/Filter.20Matching.html#153868121">(Jan 18 2017 at 17:40)</a>:</h4>
<p>There is a form of pattern matching that is already defined in the spec that could be very well suited for this operation...a Profile.  A profile of course is a set of rules that an already idenitified resource abides by.  For example, if I wanted to write a CDS Hook with a focus on smoking status, I could simply say in my Hook definition "Profile=daf-smokingstatus".  </p>



<a name="153868125"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/Filter%20Matching/near/153868125" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Shekleton <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/Filter.20Matching.html#153868125">(Jan 18 2017 at 17:44)</a>:</h4>
<p>In your daf-smokingstatus profile example, are you trying to only have your CDS service invoked when you know the patient is a smoker?</p>



<a name="153868126"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/Filter%20Matching/near/153868126" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Travis Cummings <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/Filter.20Matching.html#153868126">(Jan 18 2017 at 17:44)</a>:</h4>
<p>Slightly more general, in that example, it would just be a patient with a known smoking status</p>



<a name="153868127"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/Filter%20Matching/near/153868127" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Travis Cummings <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/Filter.20Matching.html#153868127">(Jan 18 2017 at 17:45)</a>:</h4>
<p>It might be more valuable to have a cds-hooks service only when the smoking status is known, and "true"</p>



<a name="153868128"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/Filter%20Matching/near/153868128" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Travis Cummings <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/Filter.20Matching.html#153868128">(Jan 18 2017 at 17:45)</a>:</h4>
<p>So in that case, a new profile would be needed that logically extended daf-smokingstatus, something like my-daf-smoker</p>



<a name="153868129"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/Filter%20Matching/near/153868129" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Travis Cummings <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/Filter.20Matching.html#153868129">(Jan 18 2017 at 17:47)</a>:</h4>
<p>but this allows the cds-hooks service and the cds-hooks engine to share an agreement of what "matches" before hand, and also allows the cds-hooks engine (or backing EHR) to pre-calculate the matching operation and save it as a profile claim on the resource.</p>



<a name="153868130"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/Filter%20Matching/near/153868130" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Travis Cummings <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/Filter.20Matching.html#153868130">(Jan 18 2017 at 17:48)</a>:</h4>
<p>so filtering becomes an O(1) operation in the cds-hooks engine</p>



<a name="153868131"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/Filter%20Matching/near/153868131" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Shekleton <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/Filter.20Matching.html#153868131">(Jan 18 2017 at 17:56)</a>:</h4>
<p>I'm still thinking through the implications of all of this</p>



<a name="153868132"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/Filter%20Matching/near/153868132" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Shekleton <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/Filter.20Matching.html#153868132">(Jan 18 2017 at 17:57)</a>:</h4>
<p>I agree we could do many filtering use cases through profile matching</p>



<a name="153868134"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/Filter%20Matching/near/153868134" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Shekleton <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/Filter.20Matching.html#153868134">(Jan 18 2017 at 17:59)</a>:</h4>
<p>I'm just not sure a generic method using profiles would be best. There is also FHIRPath (or CQL) which provides generic methods of qualifying on a desired data set</p>



<a name="153868135"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/Filter%20Matching/near/153868135" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Shekleton <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/Filter.20Matching.html#153868135">(Jan 18 2017 at 18:00)</a>:</h4>
<p>All of those bring with it considerable implementation complexities. I'm not saying those aren't ultimately the right thing to do, but they haven't seen widespread implementation (partly due to the complexity/cost IMHO).</p>



<a name="153868136"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/Filter%20Matching/near/153868136" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Shekleton <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/Filter.20Matching.html#153868136">(Jan 18 2017 at 18:02)</a>:</h4>
<p>To be fair, I haven't spent a lot of time thinking through ways to implement all of this but I'm happy to hear you're thinking through options, Travis!</p>



<a name="153868137"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/Filter%20Matching/near/153868137" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Shekleton <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/Filter.20Matching.html#153868137">(Jan 18 2017 at 18:04)</a>:</h4>
<p>Perhaps it would help to solicit feedback &amp; concrete use cases on filtering that would be desired *today* by the current CDS services in production (not via CDS Hooks) or those planned in the near future. From those, we can see if there is a simple approach that we could employ or something more generic that would cover the things desired today as well as those that may come up in the future</p>



<a name="153868138"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/Filter%20Matching/near/153868138" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Shekleton <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/Filter.20Matching.html#153868138">(Jan 18 2017 at 18:04)</a>:</h4>
<p>Btw, we have a Github issue for this: <a href="https://github.com/cds-hooks/docs/issues/6" target="_blank" title="https://github.com/cds-hooks/docs/issues/6">https://github.com/cds-hooks/docs/issues/6</a></p>



<a name="153868139"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/Filter%20Matching/near/153868139" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Shekleton <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/Filter.20Matching.html#153868139">(Jan 18 2017 at 18:05)</a>:</h4>
<p>One of the benefits/draw of CDS Hooks is its simplicity so I would like to keep that goal in mind here too. Travis, your profile proposal may turn out to be that, I just need to play around with things further (including profiles)</p>



<a name="153868140"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/Filter%20Matching/near/153868140" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/Filter.20Matching.html#153868140">(Jan 18 2017 at 18:10)</a>:</h4>
<p>I think we could have a pretty simple *optional* execution model where you list <code>(resource, fhirpath )</code> tuples and the EHR can use them as a trigger guard, only calling your service if your expressions return true. like:</p>
<div class="codehilite"><pre>{
  &quot;triggerGuard&quot;: [{
    &quot;for&quot;: &quot;Patient/{{patient}}&quot;,
    &quot;require&quot;: &quot;Patient.name.given.exists()&quot;
  }]
}
</pre></div>



<a name="153868141"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/Filter%20Matching/near/153868141" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/Filter.20Matching.html#153868141">(Jan 18 2017 at 18:11)</a>:</h4>
<p>if somebody was interested in exploring this...</p>



<a name="153868147"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/Filter%20Matching/near/153868147" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Shekleton <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/Filter.20Matching.html#153868147">(Jan 18 2017 at 18:13)</a>:</h4>
<p>I'd personally like to explore that (though it will be after the other areas we need to wrap up first)</p>



<a name="153868153"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/Filter%20Matching/near/153868153" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Travis Cummings <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/Filter.20Matching.html#153868153">(Jan 18 2017 at 18:29)</a>:</h4>
<p>The FHIRPath approach does seem interesting.  Is the scope of FHIRPath limited to the usage of resources, or could it also be used in expressing constraints in the definition of a resource?</p>



<a name="153868155"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/Filter%20Matching/near/153868155" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Isaac Vetter <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/Filter.20Matching.html#153868155">(Jan 18 2017 at 18:31)</a>:</h4>
<p>Hey Guys - understanding the Clinical Reasoning approach to "trigger guards", data requirements and formal cds logic definitions would be useful here: </p>



<a name="153868156"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/Filter%20Matching/near/153868156" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Isaac Vetter <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/Filter.20Matching.html#153868156">(Jan 18 2017 at 18:31)</a>:</h4>
<p><a href="http://build.fhir.org/cqif/cqif-topics-using-expressions.html" target="_blank" title="http://build.fhir.org/cqif/cqif-topics-using-expressions.html">http://build.fhir.org/cqif/cqif-topics-using-expressions.html</a></p>



<a name="153868158"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/Filter%20Matching/near/153868158" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Isaac Vetter <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/Filter.20Matching.html#153868158">(Jan 18 2017 at 18:33)</a>:</h4>
<p><a href="http://build.fhir.org/cqif/cqif-topics-using-expressions.html#data-requirements" target="_blank" title="http://build.fhir.org/cqif/cqif-topics-using-expressions.html#data-requirements">http://build.fhir.org/cqif/cqif-topics-using-expressions.html#data-requirements</a></p>



<a name="153868168"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/Filter%20Matching/near/153868168" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Travis Cummings <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/Filter.20Matching.html#153868168">(Jan 18 2017 at 19:02)</a>:</h4>
<p>If I understand, FHIRPath, FluentPath, CQL are ways to create an expression and a Profile is way to define an agreement for extensions and constrains on a resource.   If that is correct, then a Profile in theory could use FHIRPath, FluentPath, CQL as a means to define the agreement.  I'm asking because I've heard different takes on Profile.</p>



<a name="153868173"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/Filter%20Matching/near/153868173" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/Filter.20Matching.html#153868173">(Jan 18 2017 at 19:19)</a>:</h4>
<p>Yes, a Profile is a way to express constraints on any given resource type both to reflect constraints on the datamodel (e.g. change in cardinalities), add FhirPath based additional constraints on it, ensure extensions are present on the model and it can in fact be used to define new extensions as well.</p>



<a name="153868176"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/Filter%20Matching/near/153868176" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/Filter.20Matching.html#153868176">(Jan 18 2017 at 19:28)</a>:</h4>
<p>Yes, DataRequirement can be used with a TriggerDefinition to describe when something should be invoked. <span class="user-mention" data-user-id="192233">@Travis Cummings</span> one of the things we tested at this connectathon was a HAPI JPA plugin that can run CQL and FHIRPath. It would be interesting to try the pattern matching approach you're suggesting with that plugin. We'd be interested in trying it out with the HSPC containers, can we chat about how to get that plugged in to one of those?</p>



<a name="153868178"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/Filter%20Matching/near/153868178" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Travis Cummings <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/Filter.20Matching.html#153868178">(Jan 18 2017 at 19:45)</a>:</h4>
<p>Thanks for getting me up to speed on some of these approaches.  Using this approach, a CDS-Hook definition could use a DataRequirement that referenced a FHIR Profile that used FhirPath to describe an expression that matched a resource!</p>



<a name="153868181"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/Filter%20Matching/near/153868181" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Isaac Vetter <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/Filter.20Matching.html#153868181">(Jan 18 2017 at 19:48)</a>:</h4>
<p>I wonder if this is a place where cds-hooks could simplify /  define an implementation approach for a limited subset of the Clinical Reasoning artefacts.  </p>



<a name="153868184"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/Filter%20Matching/near/153868184" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/Filter.20Matching.html#153868184">(Jan 18 2017 at 19:54)</a>:</h4>
<p>Would be good to get some use cases on the table. I'm interested to see how far we can go with FHIR REST API + fhirpath.</p>



<a name="153868206"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/Filter%20Matching/near/153868206" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Travis Cummings <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/Filter.20Matching.html#153868206">(Jan 18 2017 at 20:02)</a>:</h4>
<p>I'd be interested in that.  start with the expression language itself before layers of containment.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
