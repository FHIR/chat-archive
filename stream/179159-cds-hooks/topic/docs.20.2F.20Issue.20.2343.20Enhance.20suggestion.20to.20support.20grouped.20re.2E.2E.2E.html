---
layout: page
title: "FHIR Chat  · docs / Issue #43 Enhance suggestion to support grouped re... · cds hooks"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/index.html">cds hooks</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/docs.20.2F.20Issue.20.2343.20Enhance.20suggestion.20to.20support.20grouped.20re.2E.2E.2E.html">docs / Issue #43 Enhance suggestion to support grouped re...</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153887418"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/docs%20/%20Issue%20%2343%20Enhance%20suggestion%20to%20support%20grouped%20re.../near/153887418" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Github Notifications <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/docs.20.2F.20Issue.20.2343.20Enhance.20suggestion.20to.20support.20grouped.20re.2E.2E.2E.html#153887418">(May 06 2017 at 06:49)</a>:</h4>
<p>isaacvetter opened <a href="https://github.com/cds-hooks/docs/issues/43" target="_blank" title="https://github.com/cds-hooks/docs/issues/43">Issue #43</a></p>
<blockquote>
<p>In discussion with @brynrhodes and @kpshek regarding aligning Clinical Reasoning and CDS Hooks, one of the topics of discussion was around the functionality of the FHIR Clinical Reasoning <a href="https://www.hl7.org/fhir/requestgroup.html" target="_blank" title="https://www.hl7.org/fhir/requestgroup.html">RequestGroup</a> resource. Overall, FHIR's RequestGroup is very powerful, but it also introduces a lot of complexity as well as a dependence upon STU3. </p>
<p>How to pragmatically and simply incorporate the best parts of RequestGroup into CDS Hooks, while also allowing for compatibility with this FHIR resource? Here's the direction that @brynrhodes, @kpshek, and myself landed on:</p>
<p>An array of actions should be added to the CDS Hooks suggestion, such that a card can return multiple suggestions, of which the user can select one. Each suggestion contains a list of actions. When a user selects a suggestion that contains multiple actions, the user is selecting all of the actions within that suggestion. Here's what this looks like in json:</p>
<div class="codehilite"><pre><span></span>“suggestions”: [
  // EHRs should render suggestions to the user as
  // ANY suggestion can be selected
  {
    “uuid”: “abc1238hdf87sh”,
    “label”: “Add &amp; remove”,
    “actions”: [
     // Actions are ANDed together
     {
      “type”: “create”,
      “description”: “Add this new order for X”,
      “resource”: { resource X }
     },
     {
      “type”: “delete”,
      “description”: “Cancel the existing order”,
      “resource”: “MedicationRequest/123”
     }
    ]
  },
  {
    “uuid”: “n9d89hsdg8h”,    
    “label”: “Modify warfarin”,
    “actions”: [
     {
      “type”: “modify”,
      “description”: “Change warfarin dosage to 10mg/day”,
    “resource”: &quot;MedicationRequest/abc&quot;
     }
    ]
  }
]
</pre></div>


<p>Note that each suggestion is implicitly OR’d and that the actions within a suggestion are AND’d. This intentionally does not support the additional feature and complexity of Clinical Reasoning’s RequestGroup selectionBehavior. Additionally each suggestion is implicitly a “visual-group” in the same way as Clinical Reasoning's RequestGroup’s groupingBehavior.</p>
</blockquote>



<a name="153887554"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/docs%20/%20Issue%20%2343%20Enhance%20suggestion%20to%20support%20grouped%20re.../near/153887554" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Github Notifications <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/docs.20.2F.20Issue.20.2343.20Enhance.20suggestion.20to.20support.20grouped.20re.2E.2E.2E.html#153887554">(May 06 2017 at 11:42)</a>:</h4>
<p>bdoolittle <a href="https://github.com/cds-hooks/docs/issues/43#issuecomment-299634323" target="_blank" title="https://github.com/cds-hooks/docs/issues/43#issuecomment-299634323">commented</a> on <a href="https://github.com/cds-hooks/docs/issues/43" target="_blank" title="https://github.com/cds-hooks/docs/issues/43">Issue #43</a></p>
<blockquote>
<p>Hi Isaac,</p>
<p>I think that this would be a great modification to the cds-hooks spec. In the implementation I'm working on at athenaHealth, we are using a combination of create and delete to describe a modification to the order (e.g delete a specified order and create an identical order with modifications to it). I like how the RequestGroup resource allows for the updates to be explicitly described.</p>
<p>In the FHIR <a href="https://www.hl7.org/fhir/valueset-action-type.html" target="_blank" title="https://www.hl7.org/fhir/valueset-action-type.html">action-type</a> documentation, it mentions RequestGroup action types of _create_, _remove_, _update_, and _fire-event_. </p>
<ul>
<li>Do we want the naming scheme to match FHIR?</li>
<li>Would the cds-hooks spec support the _fire-event_ action type?</li>
<li>What might some _fire-event_ use cases be?</li>
</ul>
</blockquote>



<a name="153888132"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/docs%20/%20Issue%20%2343%20Enhance%20suggestion%20to%20support%20grouped%20re.../near/153888132" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Github Notifications <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/docs.20.2F.20Issue.20.2343.20Enhance.20suggestion.20to.20support.20grouped.20re.2E.2E.2E.html#153888132">(May 08 2017 at 08:00)</a>:</h4>
<p>jmandel <a href="https://github.com/cds-hooks/docs/issues/43#issuecomment-299799419" target="_blank" title="https://github.com/cds-hooks/docs/issues/43#issuecomment-299799419">commented</a> on <a href="https://github.com/cds-hooks/docs/issues/43" target="_blank" title="https://github.com/cds-hooks/docs/issues/43">Issue #43</a></p>
<blockquote>
<p>I'm just catching up on this one... and I think we already have support for this (if I'm understanding correctly).</p>
<p>Our current structure provides an array of suggestions (the things that are "OR'd together")  in a single suggestion card. Each suggestion includes list of changes (the things that are "AND'd together" in the form of <code>create</code> + <code>delete</code> arrays), which correspond to the <code>actions</code> array you're describing. On a quick read, it seems like the only difference is whether these arrays are merged into a single "actions" array (with the create-vs-delete distinction bubbling down into a property on the actions).</p>
<p>In terms of the use cases you'd want to make sure we support, <span class="user-mention" data-user-email="isaacvetter@gmail.com" data-user-id="558">@Isaac Vetter</span>, can you highlight the gap?</p>
<p>(Also, I should say: we could of course just add a <code>modify</code> array next to our current <code>create</code> + <code>delete</code> — but I originally figured that it was clearer to let the EHR manage the question of whether to preserve or reassign ids, and just let the service express a modify as create-and-delete. Are there more kinds of actions besides create/delete/modify that you'd want to make sure we can handle, which would steer us toward the more generic model?)</p>
</blockquote>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
