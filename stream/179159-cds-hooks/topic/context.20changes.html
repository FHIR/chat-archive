---
layout: page
title: "FHIR Chat  · context changes · cds hooks"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/index.html">cds hooks</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/context.20changes.html">context changes</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153931777"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/context%20changes/near/153931777" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Shekleton <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/context.20changes.html#153931777">(Jan 28 2018 at 15:12)</a>:</h4>
<p>FYI - We are moving forward with our proposed context changes:<br>
- context is a JSON object, not array<br>
- For all 3 hooks in our Sandbox, the context will contain a <code>patiendId</code> (REQUIRED) and <code>enocunterId</code> (OPTIONAL) parameters.<br>
- For <code>medication-prescribe</code>, the context will also contain a <code>medications</code> (REQUIRED) parameter that is the array of FHIR medications.</p>
<p>We have left the <code>patient</code> and <code>encounter</code> CDS Service request parameters as-is for now as to not break everyone testing <code>patient-view</code>. For those testing <code>medication-prescribe</code>, this is a breaking change (we couldn't avoid it). We will drop <code>patient</code> and <code>encounter</code> from the request later today (tonight? or when everyone updates).</p>
<p><span class="user-mention" data-user-id="192599">@Zach Plata</span> is preparing the Sandbox changes right now and they should be deployed within the next few minutes. He will post here when the change has been made.</p>
<p><span class="user-mention" data-user-id="192600">@Matt Henkes</span> already updated the Cerner implementation so if you are ready to test talk with him.</p>



<a name="153931793"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/context%20changes/near/153931793" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert Sax <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/context.20changes.html#153931793">(Jan 28 2018 at 15:19)</a>:</h4>
<p>for order-review, will the field change to <code>orders</code> from <code>orders-in-progress</code></p>



<a name="153931797"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/context%20changes/near/153931797" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Shekleton <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/context.20changes.html#153931797">(Jan 28 2018 at 15:21)</a>:</h4>
<p>Yeah, that's my proposal.</p>
<p>My thinking is that if we are trying to name the context fields to be that descriptive, we're going to end up with long names (and I'd like to avoid that).</p>



<a name="153931800"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/context%20changes/near/153931800" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Shekleton <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/context.20changes.html#153931800">(Jan 28 2018 at 15:22)</a>:</h4>
<p>Thoughts?</p>



<a name="153931801"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/context%20changes/near/153931801" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Shekleton <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/context.20changes.html#153931801">(Jan 28 2018 at 15:22)</a>:</h4>
<p>(I'm updating PR #109 right now for all of this)</p>



<a name="153931802"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/context%20changes/near/153931802" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Shekleton <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/context.20changes.html#153931802">(Jan 28 2018 at 15:22)</a>:</h4>
<p>....almost done</p>



<a name="153931807"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/context%20changes/near/153931807" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aziz Boxwala <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/context.20changes.html#153931807">(Jan 28 2018 at 15:24)</a>:</h4>
<p><span class="user-mention" data-user-id="191355">@Kevin Shekleton</span> : Can you please share sample hooks request bodies in the new format. I need a medication-prescribe request.</p>



<a name="153931808"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/context%20changes/near/153931808" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert Sax <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/context.20changes.html#153931808">(Jan 28 2018 at 15:24)</a>:</h4>
<p>that is fine from my perspective - only in the case that you need two order sets would you make them more descriptive</p>



<a name="153931809"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/context%20changes/near/153931809" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Shekleton <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/context.20changes.html#153931809">(Jan 28 2018 at 15:25)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="s2">&quot;context&quot;</span><span class="err">:</span><span class="p">{</span>
  <span class="nt">&quot;patientId&quot;</span><span class="p">:</span> <span class="s2">&quot;123&quot;</span><span class="p">,</span>
  <span class="nt">&quot;medications&quot;</span><span class="p">:[</span>
    <span class="p">{</span>
      <span class="nt">&quot;resourceType&quot;</span><span class="p">:</span><span class="s2">&quot;MedicationOrder&quot;</span><span class="p">,</span>
      <span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="s2">&quot;smart-MedicationOrder-103&quot;</span><span class="p">,</span>
      <span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="s2">&quot;draft&quot;</span><span class="p">,</span>
      <span class="nt">&quot;patient&quot;</span><span class="p">:{</span>
        <span class="nt">&quot;reference&quot;</span><span class="p">:</span><span class="s2">&quot;Patient/smart-1081332&quot;</span>
      <span class="p">},</span>
      <span class="nt">&quot;medicationCodeableConcept&quot;</span><span class="p">:{</span>
        <span class="nt">&quot;coding&quot;</span><span class="p">:[</span>
          <span class="p">{</span>
            <span class="nt">&quot;system&quot;</span><span class="p">:</span><span class="s2">&quot;http://www.nlm.nih.gov/research/umls/rxnorm&quot;</span><span class="p">,</span>
            <span class="nt">&quot;code&quot;</span><span class="p">:</span><span class="s2">&quot;617993&quot;</span><span class="p">,</span>
            <span class="nt">&quot;display&quot;</span><span class="p">:</span><span class="s2">&quot;Amoxicillin 120 MG/ML / clavulanate potassium 8.58 MG/ML Oral Suspension&quot;</span>
          <span class="p">}</span>
        <span class="p">],</span>
        <span class="nt">&quot;text&quot;</span><span class="p">:</span><span class="s2">&quot;Amoxicillin 120 MG/ML / clavulanate potassium 8.58 MG/ML Oral Suspension&quot;</span>
      <span class="p">},</span>
      <span class="nt">&quot;dosageInstruction&quot;</span><span class="p">:[</span>
        <span class="p">{</span>
          <span class="nt">&quot;text&quot;</span><span class="p">:</span><span class="s2">&quot;5 mL bid x 10 days&quot;</span><span class="p">,</span>
          <span class="nt">&quot;timing&quot;</span><span class="p">:{</span>
            <span class="nt">&quot;repeat&quot;</span><span class="p">:{</span>
              <span class="nt">&quot;boundsPeriod&quot;</span><span class="p">:{</span>
                <span class="nt">&quot;start&quot;</span><span class="p">:</span><span class="s2">&quot;2005-01-04&quot;</span>
              <span class="p">},</span>
              <span class="nt">&quot;frequency&quot;</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span>
              <span class="nt">&quot;period&quot;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span>
              <span class="nt">&quot;periodUnits&quot;</span><span class="p">:</span><span class="s2">&quot;d&quot;</span>
            <span class="p">}</span>
          <span class="p">},</span>
          <span class="nt">&quot;doseQuantity&quot;</span><span class="p">:{</span>
            <span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="mi">5</span><span class="p">,</span>
            <span class="nt">&quot;unit&quot;</span><span class="p">:</span><span class="s2">&quot;mL&quot;</span><span class="p">,</span>
            <span class="nt">&quot;system&quot;</span><span class="p">:</span><span class="s2">&quot;http://unitsofmeasure.org&quot;</span><span class="p">,</span>
            <span class="nt">&quot;code&quot;</span><span class="p">:</span><span class="s2">&quot;mL&quot;</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">],</span>
      <span class="nt">&quot;dispenseRequest&quot;</span><span class="p">:{</span>
        <span class="nt">&quot;numberOfRepeatsAllowed&quot;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span>
        <span class="nt">&quot;quantity&quot;</span><span class="p">:{</span>
          <span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span>
          <span class="nt">&quot;unit&quot;</span><span class="p">:</span><span class="s2">&quot;mL&quot;</span><span class="p">,</span>
          <span class="nt">&quot;system&quot;</span><span class="p">:</span><span class="s2">&quot;http://unitsofmeasure.org&quot;</span><span class="p">,</span>
          <span class="nt">&quot;code&quot;</span><span class="p">:</span><span class="s2">&quot;mL&quot;</span>
        <span class="p">},</span>
        <span class="nt">&quot;expectedSupplyDuration&quot;</span><span class="p">:{</span>
          <span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="mi">10</span><span class="p">,</span>
          <span class="nt">&quot;unit&quot;</span><span class="p">:</span><span class="s2">&quot;days&quot;</span><span class="p">,</span>
          <span class="nt">&quot;system&quot;</span><span class="p">:</span><span class="s2">&quot;http://unitsofmeasure.org&quot;</span><span class="p">,</span>
          <span class="nt">&quot;code&quot;</span><span class="p">:</span><span class="s2">&quot;d&quot;</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="nt">&quot;resourceType&quot;</span><span class="p">:</span><span class="s2">&quot;MedicationOrder&quot;</span><span class="p">,</span>
      <span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="s2">&quot;smart-MedicationOrder-104&quot;</span><span class="p">,</span>
      <span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="s2">&quot;draft&quot;</span><span class="p">,</span>
      <span class="nt">&quot;patient&quot;</span><span class="p">:{</span>
        <span class="nt">&quot;reference&quot;</span><span class="p">:</span><span class="s2">&quot;Patient/smart-1081332&quot;</span>
      <span class="p">},</span>
      <span class="nt">&quot;medicationCodeableConcept&quot;</span><span class="p">:{</span>
        <span class="nt">&quot;coding&quot;</span><span class="p">:[</span>
          <span class="p">{</span>
            <span class="nt">&quot;system&quot;</span><span class="p">:</span><span class="s2">&quot;http://www.nlm.nih.gov/research/umls/rxnorm&quot;</span><span class="p">,</span>
            <span class="nt">&quot;code&quot;</span><span class="p">:</span><span class="s2">&quot;211307&quot;</span><span class="p">,</span>
            <span class="nt">&quot;display&quot;</span><span class="p">:</span><span class="s2">&quot;Azithromycin 20 MG/ML Oral Suspension [Zithromax]&quot;</span>
          <span class="p">}</span>
        <span class="p">],</span>
        <span class="nt">&quot;text&quot;</span><span class="p">:</span><span class="s2">&quot;Azithromycin 20 MG/ML Oral Suspension [Zithromax]&quot;</span>
      <span class="p">},</span>
      <span class="nt">&quot;dosageInstruction&quot;</span><span class="p">:[</span>
        <span class="p">{</span>
          <span class="nt">&quot;text&quot;</span><span class="p">:</span><span class="s2">&quot;15 mL daily x 3 days&quot;</span><span class="p">,</span>
          <span class="nt">&quot;timing&quot;</span><span class="p">:{</span>
            <span class="nt">&quot;repeat&quot;</span><span class="p">:{</span>
              <span class="nt">&quot;boundsPeriod&quot;</span><span class="p">:{</span>
                <span class="nt">&quot;start&quot;</span><span class="p">:</span><span class="s2">&quot;2005-01-18&quot;</span>
              <span class="p">},</span>
              <span class="nt">&quot;frequency&quot;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span>
              <span class="nt">&quot;period&quot;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span>
              <span class="nt">&quot;periodUnits&quot;</span><span class="p">:</span><span class="s2">&quot;d&quot;</span>
            <span class="p">}</span>
          <span class="p">},</span>
          <span class="nt">&quot;doseQuantity&quot;</span><span class="p">:{</span>
            <span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="mi">15</span><span class="p">,</span>
            <span class="nt">&quot;unit&quot;</span><span class="p">:</span><span class="s2">&quot;mL&quot;</span><span class="p">,</span>
            <span class="nt">&quot;system&quot;</span><span class="p">:</span><span class="s2">&quot;http://unitsofmeasure.org&quot;</span><span class="p">,</span>
            <span class="nt">&quot;code&quot;</span><span class="p">:</span><span class="s2">&quot;mL&quot;</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">],</span>
      <span class="nt">&quot;dispenseRequest&quot;</span><span class="p">:{</span>
        <span class="nt">&quot;numberOfRepeatsAllowed&quot;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span>
        <span class="nt">&quot;quantity&quot;</span><span class="p">:{</span>
          <span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span>
          <span class="nt">&quot;unit&quot;</span><span class="p">:</span><span class="s2">&quot;mL&quot;</span><span class="p">,</span>
          <span class="nt">&quot;system&quot;</span><span class="p">:</span><span class="s2">&quot;http://unitsofmeasure.org&quot;</span><span class="p">,</span>
          <span class="nt">&quot;code&quot;</span><span class="p">:</span><span class="s2">&quot;mL&quot;</span>
        <span class="p">},</span>
        <span class="nt">&quot;expectedSupplyDuration&quot;</span><span class="p">:{</span>
          <span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="mi">3</span><span class="p">,</span>
          <span class="nt">&quot;unit&quot;</span><span class="p">:</span><span class="s2">&quot;days&quot;</span><span class="p">,</span>
          <span class="nt">&quot;system&quot;</span><span class="p">:</span><span class="s2">&quot;http://unitsofmeasure.org&quot;</span><span class="p">,</span>
          <span class="nt">&quot;code&quot;</span><span class="p">:</span><span class="s2">&quot;d&quot;</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
</pre></div>



<a name="153931823"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/context%20changes/near/153931823" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aziz Boxwala <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/context.20changes.html#153931823">(Jan 28 2018 at 15:32)</a>:</h4>
<p>Thank you <span class="user-mention" data-user-id="191355">@Kevin Shekleton</span> . We'll be ready to test shortly.</p>



<a name="153931906"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/context%20changes/near/153931906" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Shekleton <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/context.20changes.html#153931906">(Jan 28 2018 at 16:03)</a>:</h4>
<p>Ok everyone, I have <a href="https://github.com/cds-hooks/docs/pull/109" target="_blank" title="https://github.com/cds-hooks/docs/pull/109">PR 109</a> updated and ready for review. You can view the changes on the deployed site here: <a href="https://cds-hooks-docs-pr-109.herokuapp.com/" target="_blank" title="https://cds-hooks-docs-pr-109.herokuapp.com/">https://cds-hooks-docs-pr-109.herokuapp.com/</a></p>
<p>cc <span class="user-mention" data-user-id="191943">@Matt Berther</span> <span class="user-mention" data-user-id="191410">@Brett Marquard</span> <span class="user-mention" data-user-id="191864">@Isaac Vetter</span></p>



<a name="153931908"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/context%20changes/near/153931908" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Shekleton <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/context.20changes.html#153931908">(Jan 28 2018 at 16:04)</a>:</h4>
<p>Once PR 109 is done then we will review the change to move patient/encounter into context. PR 109 is just to formally document our existing hooks as well as define how new hooks must be defined</p>



<a name="153931965"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/context%20changes/near/153931965" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Zach Plata <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/context.20changes.html#153931965">(Jan 28 2018 at 16:46)</a>:</h4>
<p>Sandbox update: changes have been made so that the <code>context</code> property is now an object with a patientId key and a medications key (on the Rx View)</p>



<a name="153931969"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/context%20changes/near/153931969" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aziz Boxwala <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/context.20changes.html#153931969">(Jan 28 2018 at 16:49)</a>:</h4>
<p><span class="user-mention" data-user-id="192599">@Zach Plata</span> :  we tested our service against the sandbox. Seems to be working well now. New keys and change to the context fields.</p>



<a name="153931984"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/context%20changes/near/153931984" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Power <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/context.20changes.html#153931984">(Jan 28 2018 at 17:01)</a>:</h4>
<p><span class="user-mention" data-user-id="195129">@Aziz Boxwala</span> - Just tested order workflow and I see the card again.</p>



<a name="153934936"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/context%20changes/near/153934936" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Travis Stenerson <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/context.20changes.html#153934936">(Feb 02 2018 at 06:16)</a>:</h4>
<p>Quick related question.. our implementation will require the organization or hospital from which the hook originated to accumulate meta data about system use and guideline appropriate ordering. Would this be most appropriate in the context field? (Which will require a new hook submitted? (Prefetch seems more approriate for related clinical data, but would not require a new hook. Anyone have insight?</p>



<a name="153934970"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/context%20changes/near/153934970" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert Sax <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/context.20changes.html#153934970">(Feb 02 2018 at 11:45)</a>:</h4>
<p>I opened an issue on this a while back (#17), and there is some useful feedback. Context has since change, and this could be in the context, but to me it belongs as a top-level element in the request, because it is useful information for every request, just like the user. As a result I would build it as an extension for the time being.</p>



<a name="153935082"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/context%20changes/near/153935082" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Shekleton <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/context.20changes.html#153935082">(Feb 02 2018 at 19:16)</a>:</h4>
<p>This is also a request in SMART too (see <a href="https://github.com/smart-on-fhir/smart-on-fhir.github.io/issues/133" target="_blank" title="https://github.com/smart-on-fhir/smart-on-fhir.github.io/issues/133">#133</a>). Unfortunately, we couldn't come to consensus on that for the SMART ballot that is wrapping up. We should solve this in the same manner between both SMART and CDS Hooks.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
