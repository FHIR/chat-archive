---
layout: page
title: "FHIR Chat  · Proposal for order-search hook · cds hooks"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/index.html">cds hooks</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/Proposal.20for.20order-search.20hook.html">Proposal for order-search hook</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="204860245"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/Proposal%20for%20order-search%20hook/near/204860245" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> JP <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/Proposal.20for.20order-search.20hook.html#204860245">(Jul 23 2020 at 22:22)</a>:</h4>
<p>I've opened a PR on the cds-hooks repo for a proposed order-search. This would be the first hook to fire when a clinician browses an order catalogue, allowing a decision service to make recommendations. This would happen before order-select and order-sign.</p>
<p><a href="https://github.com/cds-hooks/docs/pull/532">https://github.com/cds-hooks/docs/pull/532</a></p>
<p>There's a challenge in that an EHR needs to convey enough context to the decision service to avoid having services that are not relevant to the current clinical context fire. The order-select hook is able to avoid this because the selected order that is passed has a specific type, meaning decision services that apply to MedicationRequest selections need not fire if a bundle contains ServiceRequests. The proposal suggests adding an orderType parameter to provide that same functionality.</p>



<a name="204870053"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/Proposal%20for%20order-search%20hook/near/204870053" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/Proposal.20for.20order-search.20hook.html#204870053">(Jul 24 2020 at 00:59)</a>:</h4>
<p>Can you give some examples of what sort of decision support you'd expect to be provided when the only knowledge is that a clinician is ordering a MedicationRequest?  Or worse a ServiceRequest (which encompasses referrals, labs, imaging orders and more)?</p>



<a name="204880687"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/Proposal%20for%20order-search%20hook/near/204880687" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> JP <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/Proposal.20for.20order-search.20hook.html#204880687">(Jul 24 2020 at 05:20)</a>:</h4>
<p>The intent isn't that you'd be able to give appropriate guidance with only that parameter and nothing else. For a specific decision support service implementation I'd expect it to query (or prefetch) whatever additional data it might need. It could definitely be argued that the ability to do that makes the orderType parameter redundant. I think it remains relevant because it allows a first-pass filter on the types of services that run. The type of data included in the order-select hook allows similar functionality.</p>
<p>I did consider using something like useContext to provide this functionality. That would allow much more granularity in the filter. However, the initial feedback I had was that that would be very difficult to implement on the EHR side.</p>
<p>I also considered creating hooks specifically for device-search, medication-search, etc. but that seemed to run counter to current efforts to represent orders generally.</p>
<p>Trying to cover the breadth of possibilities for orders and clinical contexts when browsing a catalog is pretty challenging. I'd welcome other suggestions. The "all-in" approach of extensively using useContext (or similar) to scope the services seems onerous for EHR implementors, while the "run all the services" approach seems extremely inefficient when many "order" hooks have no chance of being relevant.</p>



<a name="204881620"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/Proposal%20for%20order-search%20hook/near/204881620" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/Proposal.20for.20order-search.20hook.html#204881620">(Jul 24 2020 at 05:43)</a>:</h4>
<p>My question stands.  Can you give a concrete example of what a CDS system could provide (with whatever querying you might imagine it would do) when triggered with just a patient id and a code saying 'MedicationRequest' or 'ServiceRequest'?</p>



<a name="204881832"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/Proposal%20for%20order-search%20hook/near/204881832" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/Proposal.20for.20order-search.20hook.html#204881832">(Jul 24 2020 at 05:49)</a>:</h4>
<p>A clinician wants to prescribe a medication for diabetes management. Choosing the appropriate medication involves gathering information, both from the patient’s record, as well as the clinician providing input to the process. The order select hook is too late, the clinician has already chosen a medication. This hook enables a service to provide guidance about whst medication to choose.</p>



<a name="204883002"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/Proposal%20for%20order-search%20hook/near/204883002" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> JP <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/Proposal.20for.20order-search.20hook.html#204883002">(Jul 24 2020 at 06:20)</a>:</h4>
<p>To use Bryn's example, the "MedicationRequest" orderType covers the clinician needing to prescribe a medication while the "for diabetes management" and "clinician providing input" components could be handled by a SMART app designed for medication recommendations. The CDS service itself would just provide a link to the SMART app.</p>
<p>Given the complexity of orders, the ability to launch a secondary SMART app focused on recommendations to gather additional input, and the explanation that it's not the intent that the CDS service itself necessarily do anything I'm not quite sure how to answer your question. Does "launch a SMART app" fit the bill?</p>
<p>I'm definitely open to other suggestions on how to approach this. I think there's value in a hook that fires when browsing an order catalog specifically for things like recommendation applications. My real question is how to best align this with current thinking in the cds-hooks space.</p>



<a name="204905536"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/Proposal%20for%20order-search%20hook/near/204905536" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/Proposal.20for.20order-search.20hook.html#204905536">(Jul 24 2020 at 11:36)</a>:</h4>
<p>But nothing in the proposed hook tells you that they're about to prescribe for "diabetes management" - and there's no query that would tell you that.  All you know is that they're about to prescribe 'something'.</p>



<a name="204905621"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/Proposal%20for%20order-search%20hook/near/204905621" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/Proposal.20for.20order-search.20hook.html#204905621">(Jul 24 2020 at 11:37)</a>:</h4>
<p>With ServiceRequest, it's even worse - all you know is "they're about to order 'something'".  I don't understand how you can provide context-meaningful CDS with such limited information.</p>



<a name="204905774"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/Proposal%20for%20order-search%20hook/near/204905774" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/Proposal.20for.20order-search.20hook.html#204905774">(Jul 24 2020 at 11:39)</a>:</h4>
<p>I guess if the intention is to replace the EHR's medication order mechanism with a SMART app, it could work, but with ServiceRequest, it wouldn't even be clear whether to launch the imaging, lab or referral app.  And it's hard to imagine EHRs jumping up and down to support a hook whose sole purpose is to bypass a key functionality...</p>



<a name="204910384"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/Proposal%20for%20order-search%20hook/near/204910384" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Silva <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/Proposal.20for.20order-search.20hook.html#204910384">(Jul 24 2020 at 12:45)</a>:</h4>
<p>An indirectly related aspect of this ---- with the order-select hook as the first time a CDS Hook and SMART app can interact with the user (clinician) it could cause many back-and-forth cycles of canceling the order as the SMART app recommends alternatives to the chosen order by the clinician and the clinician might need to incrementally refine (or cancel) their order to match the recommendation of the CDS Hook/SMART app.  This is the kind of workflow that can cause clinician dissatisfaction and distrust and eventual non-use of the CDS recommendations.   Having more of the pre-conditions known and conveyed up front for the order (medication and specific serviceRequest) can help (maybe) reduce these iterations?</p>



<a name="204960563"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/Proposal%20for%20order-search%20hook/near/204960563" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> JP <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/Proposal.20for.20order-search.20hook.html#204960563">(Jul 24 2020 at 20:05)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191320">Lloyd McKenzie</span> <a href="#narrow/stream/179159-cds-hooks/topic/Proposal.20for.20order-search.20hook/near/204905536">said</a>:</p>
<blockquote>
<p>But nothing in the proposed hook tells you that they're about to prescribe for "diabetes management" - and there's no query that would tell you that.  All you know is that they're about to prescribe 'something'.</p>
</blockquote>
<p>Lloyd, I completely agree with this. I'm not sure where I'm miscommunicating but this proposal as-is intentionally only provides a minimal amount of filtering of decision services</p>
<p>My initial proposal, prior to raising the hook on this chat, was to include a useContext in the hook context for exactly the reasons you list. The initial feedback I had was that it would prove to be difficult from an EHR implementation perspective since they'd have to provide appropriate context when invoking the hook. That may not actually be the case, but that's the feedback I'm working from. If there's a better way to specify and track that context from an EHR's perspective I'd like to know and incorporate that into the hook definition.</p>
<p>Let's consider an alternate proposal for a "medication-search" hook that has a useContext parameter. That would provide sufficient granularity to only invoke the hook specifically for the "medication prescription for diabetes" scenario. The "medication-search" aspect runs counter to the consolidation of the order-* hooks (medication-prescribe is being retired), and the additional useContext has the same supposed difficulties for EHR implementation.</p>



<a name="204960920"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/Proposal%20for%20order-search%20hook/near/204960920" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> JP <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/Proposal.20for.20order-search.20hook.html#204960920">(Jul 24 2020 at 20:09)</a>:</h4>
<p>More generally, given the need for order recommendations and given the wide variety of orders and clinical contexts involved, what approach would be most aligned with the current direction of cds-hooks and easiest to implement from an EHR's perspective?</p>



<a name="204969741"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/Proposal%20for%20order-search%20hook/near/204969741" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/Proposal.20for.20order-search.20hook.html#204969741">(Jul 24 2020 at 21:39)</a>:</h4>
<p>I understand the challenge of having a useContext.  I would expect that in many (most?) EHRs, the EHR would have no clue what the clinician was trying to prescribe until they'd started typing the name of the drug and gotten far enough to select one from the drop-down.  And at that point, you're good to go with your first firing of the "order-select" hook.  If dealing with ServiceRequest, the EHR might be able to tell whether the clinician is about to order a lab vs. imaging vs. make a referral, but I doubt they'd know more than that until, again, the user had started to fill out the form (and order-select would be viable).  My question was for a concrete example of a couple of useful cards you would expect a service to provide back with the current design for the hook.  It may be there would be useful things you could say that would need to be said before you'd started filling out the order form/selecting from a care plan/bunch of order sets.  I just can't visualize what they would be.</p>



<a name="209540862"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/Proposal%20for%20order-search%20hook/near/209540862" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matt Varghese <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/Proposal.20for.20order-search.20hook.html#209540862">(Sep 09 2020 at 17:18)</a>:</h4>
<p>I agree with <span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> The EHR generally has no clue what or even what type of order a clinician is trying to place until it is selected. </p>
<p>A <code>medication-search</code> is likely not feasible, because afaik it's not feasible to distinguish between searching for a med and searching for a procedure.</p>
<p>And the EHR generally doesn't know the type of service request even if somehow it could be told that it is a service request and not a med request. </p>
<p>So the OrderType parameter does not seem very practicable for an EHR to furnish (except maybe in extremely limited contexts?).</p>



<a name="209540994"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/Proposal%20for%20order-search%20hook/near/209540994" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matt Varghese <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/Proposal.20for.20order-search.20hook.html#209540994">(Sep 09 2020 at 17:19)</a>:</h4>
<p>Additionally the likelihood of noise on this hook, and the response delay introduced in the clinician's workflow make me wary of this hook proposal.</p>



<a name="209548133"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/Proposal%20for%20order-search%20hook/near/209548133" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/Proposal.20for.20order-search.20hook.html#209548133">(Sep 09 2020 at 18:15)</a>:</h4>
<p>These assessments are context dependent. Some systems provide an electronic prescribing interface that is specific to medications.</p>



<a name="209548404"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/Proposal%20for%20order-search%20hook/near/209548404" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matt Varghese <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/Proposal.20for.20order-search.20hook.html#209548404">(Sep 09 2020 at 18:18)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191315">Josh Mandel</span> <a href="#narrow/stream/179159-cds-hooks/topic/Proposal.20for.20order-search.20hook/near/209548133">said</a>:</p>
<blockquote>
<p>These assessments are context dependent. Some systems provide an electronic prescribing interface that is specific to medications.</p>
</blockquote>
<p><span class="user-mention" data-user-id="191315">@Josh Mandel</span>: Agreed. Added qualifiers to my previous response..</p>



<a name="209548965"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/Proposal%20for%20order-search%20hook/near/209548965" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/Proposal.20for.20order-search.20hook.html#209548965">(Sep 09 2020 at 18:24)</a>:</h4>
<p>I'd still love examples from <span class="user-mention" data-user-id="194178">@Jonathan Percival</span> of what sorts of card content he envisions a service being able to provide back for this hook.</p>



<a name="209570723"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/Proposal%20for%20order-search%20hook/near/209570723" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> JP <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/Proposal.20for.20order-search.20hook.html#209570723">(Sep 09 2020 at 21:24)</a>:</h4>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> - There's some internal discussion going on with the client I'm working with on how to proceed.</p>



<a name="209695736"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/Proposal%20for%20order-search%20hook/near/209695736" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Silva <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/Proposal.20for.20order-search.20hook.html#209695736">(Sep 10 2020 at 19:18)</a>:</h4>
<p>I've been on a 'departmental CIS system" where it had a taxonomy of order types the clinician could order so it 'knew' the order type and provided the clinician with a nice list of orders based on the top-level order type chosen.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
