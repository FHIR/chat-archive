---
layout: page
title: "FHIR Chat  · Anonymized CDS · cds hooks"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/index.html">cds hooks</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/Anonymized.20CDS.html">Anonymized CDS</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153964862"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/Anonymized%20CDS/near/153964862" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/Anonymized.20CDS.html#153964862">(May 25 2018 at 17:53)</a>:</h4>
<p>Has there been any consideration for doing decision support without exchange of PHI? I believe some decision systems and some provider organizations would be more comfortable in this case. Can CDS Hooks support this?</p>



<a name="153964978"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/Anonymized%20CDS/near/153964978" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Olbrich <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/Anonymized.20CDS.html#153964978">(May 25 2018 at 20:44)</a>:</h4>
<p>I know <span class="user-mention" data-user-id="192085">@Brian Alper</span> is interested in this as well.  There isn't anything in the standard that prevents it.  Some hooks might send over a Patient's FHIR id, which could be an issue in some cases.  You would want to avoid prefetches unless you use the _elements param to subset the data.  You could also propose a new hook that only sent over certain specific bits of data (like just age perhaps).  I have also been thinking about using something like <span class="user-mention" data-user-id="191351">@Chris Grenz</span> 's profile filtering work to actually help communicate the data requirements and possibly even restrict the data sent.</p>



<a name="153965062"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/Anonymized%20CDS/near/153965062" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Shekleton <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/Anonymized.20CDS.html#153965062">(May 27 2018 at 10:02)</a>:</h4>
<p><span class="user-mention" data-user-id="193229">@Kevin Olbrich</span> is correct -- the <code>context</code> field in each CDS Service request is what <em>may</em> contain PHI. Each hook defines its own context so you could design a hook (or set of hooks) that do not send any PHI.</p>
<p>Alternatively, you could use the existing hooks and ensure that data like the <a href="http://Patient.id" target="_blank" title="http://Patient.id">Patient.id</a> is mapped to some other value (eg, using a security tokenization solution).</p>



<a name="153965224"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/Anonymized%20CDS/near/153965224" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/Anonymized.20CDS.html#153965224">(May 29 2018 at 13:55)</a>:</h4>
<p>just removing the link to a Patient will reduce the risk that the data are identifiable, but doesn't bring it down much as there are many quasi-identifiers laying around in health data. I am not saying this isn't a useful step, I think it is a very useful step. I am just trying to keep us fully aware of proper anonymization. Note, that even the algorithm used to replace the Patient can be revealing...</p>



<a name="153965386"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/Anonymized%20CDS/near/153965386" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/Anonymized.20CDS.html#153965386">(May 29 2018 at 21:46)</a>:</h4>
<p>OK. So it should be possible, it's just a matter of defining the hook and setting expectations correctly. Thanks.</p>



<a name="153965450"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/Anonymized%20CDS/near/153965450" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Roeland Luykx <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/Anonymized.20CDS.html#153965450">(May 30 2018 at 06:23)</a>:</h4>
<p>should not a new hook template be defined for anonymized CDS, because the patient-view has the patientid required in the context?</p>



<a name="153965513"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/Anonymized%20CDS/near/153965513" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/Anonymized.20CDS.html#153965513">(May 30 2018 at 13:01)</a>:</h4>
<p>The anonymous would likely need a Patient resource, to carry some useful values like age (offset by a random value), gender, other?</p>



<a name="153965514"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/Anonymized%20CDS/near/153965514" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/Anonymized.20CDS.html#153965514">(May 30 2018 at 13:02)</a>:</h4>
<p>If done right, the cds-hook should not need to be implemented differently. The difference would be on the requesting side to anonymize or not, and when anonymizing what method/algorithm.</p>



<a name="153965515"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/Anonymized%20CDS/near/153965515" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/Anonymized.20CDS.html#153965515">(May 30 2018 at 13:03)</a>:</h4>
<p>I guess one would need a profiled Patient to indicate the critical few elements, and the tolerance each element holds .</p>



<a name="153965806"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/Anonymized%20CDS/near/153965806" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Shekleton <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/Anonymized.20CDS.html#153965806">(May 30 2018 at 21:03)</a>:</h4>
<p>The <code>patient-view</code> hook does have <code>patientId</code> as a required hook context field, but that doesn't mean that patientId can't be tokenized to some UUID. Also, the FHIR server doesn't have to be accessible so that tokenized <code>patientId</code> doesn't have to provide access to the actual Patient resource.</p>
<p>But, it is interesting to think about what a value a CDS Service would be able to provide without any identifying information about a patient. As John mentioned, the fields defined as PII/PHI are too narrow. Studies have shown you can identify patients with data outside of PII/PHI. <span class="emoji emoji-1f937" title="shrug">:shrug:</span></p>



<a name="153965811"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/Anonymized%20CDS/near/153965811" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Olbrich <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/Anonymized.20CDS.html#153965811">(May 30 2018 at 21:24)</a>:</h4>
<p>In some cases, you might be able to provide some value with just gender and age, but if you couple that with other information like the location of the customer and the time of the request, it wouldn't be too hard to identify the patient.</p>



<a name="153966566"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/Anonymized%20CDS/near/153966566" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/Anonymized.20CDS.html#153966566">(Jun 02 2018 at 16:21)</a>:</h4>
<p>So, what elements in Patient are critical to the cds-hook doing the job? I would be glad to help define an anonymized Patient for this purpose. It would not be 100% privacy protecting, but nothing ever is. As long as we are clear that it is intended to lower the risk of exposure, and we indicate the potential residual risk, then we are being consistent with standards on de-identification. (gender, birthDate, communication, generalPratitioner?). Even better if we can define a tolerance on birthDate (+-30 days).</p>



<a name="153966567"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/Anonymized%20CDS/near/153966567" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/Anonymized.20CDS.html#153966567">(Jun 02 2018 at 16:27)</a>:</h4>
<p>Thus forbid (name, telecom, address, martialStatus, photo, contact).   Unclear to me if cds-hooks wants (link, managingOrganization,  multipleBirth, deceased[x])..... Lastly forbid ALL extensions.</p>



<a name="153966568"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/Anonymized%20CDS/near/153966568" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/Anonymized.20CDS.html#153966568">(Jun 02 2018 at 16:29)</a>:</h4>
<p>The identifier (and id) would need to be specified as a pseydonym (e,g, UUID assigned per transaction)</p>



<a name="153966577"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/Anonymized%20CDS/near/153966577" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/Anonymized.20CDS.html#153966577">(Jun 02 2018 at 19:06)</a>:</h4>
<p>deceasedBoolean would be relevant most of the time as most decision support only applies if it is false.  Can't think of use-cases where much of the rest would matter.</p>



<a name="153966578"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/Anonymized%20CDS/near/153966578" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/Anonymized.20CDS.html#153966578">(Jun 02 2018 at 19:59)</a>:</h4>
<p>I think link would be relevant all the time</p>



<a name="153966579"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/Anonymized%20CDS/near/153966579" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/Anonymized.20CDS.html#153966579">(Jun 02 2018 at 20:01)</a>:</h4>
<p>In what way would link be relevant in cds-hooks, when the Patient is anonymized? In the case where it is not anonymized, then I understand the use.</p>



<a name="153966582"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/Anonymized%20CDS/near/153966582" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/Anonymized.20CDS.html#153966582">(Jun 02 2018 at 20:20)</a>:</h4>
<p>It would be relevant for retrieving associated other records - conditions, observations, etc.</p>



<a name="153966583"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/Anonymized%20CDS/near/153966583" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/Anonymized.20CDS.html#153966583">(Jun 02 2018 at 20:21)</a>:</h4>
<p>ok I agree with that</p>



<a name="153966584"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/Anonymized%20CDS/near/153966584" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/Anonymized.20CDS.html#153966584">(Jun 02 2018 at 20:21)</a>:</h4>
<p>That would mean your resource server would need to have a complete shadow copy of all data</p>



<a name="153966585"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/Anonymized%20CDS/near/153966585" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/Anonymized.20CDS.html#153966585">(Jun 02 2018 at 20:25)</a>:</h4>
<p>ah, I am assuming th model where the EHR passes the data to the cds-hooks.. I might be out-of-date, as there is the model where the cds-hooks calls back to the EHR to retrieve the data.. I guess in this case there would need to be a shadow copy of the patient data that is only associated with the pseudo Patient resource copy. This callback model exposes more data, thus increasing risk of re-identification...</p>



<a name="153966587"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/Anonymized%20CDS/near/153966587" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/Anonymized.20CDS.html#153966587">(Jun 02 2018 at 20:43)</a>:</h4>
<p>The most rich and pervasive quasi-identifier is all the dates found in all FHIR Resources. The more Resources, the more rich the date cloud for that pseudo-Patient.  If someone knows key dates where patient Paul has seeked care, they can correlate the dates they know with the dates found in a pseudo-Patient to determine that pseudo-Patient is highly likely to be Paul. -- the shadow copy of the data would need to add some random offset to all dates,  yet not invalidate the clinical significance. Usually implemented as a single random offset for that pseudo-Patient that is applied consistently to all dates. Interrelationships are maintained, but absolute date can't be determined.  Most at-risk patients are well-known (VIP), or target of motivated attacker. -- Thus giving full access to all the data on a given pseudo-Patient, vs a sub-set, increases risk; thus my assertion the cds-hook calling back to the EHR is more dangerous, than EHR giving only select resources to the cds-hooks.</p>



<a name="153966589"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/Anonymized%20CDS/near/153966589" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/Anonymized.20CDS.html#153966589">(Jun 02 2018 at 21:26)</a>:</h4>
<p>One thing you could do is have the random offset be for a specific hook invocation.  So long as there are constraints on the queries to require a reasonable degree of filtering (specific lab tests rather than all lab tests, for example), then the hook can't grab too much.  If they see the same patient again, it'll have a different id and a different date offset.</p>



<a name="153966591"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/Anonymized%20CDS/near/153966591" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/Anonymized.20CDS.html#153966591">(Jun 02 2018 at 21:41)</a>:</h4>
<p>yes. The hard part is that the offset needs to be consistent for that whole pseudo-patient without exposing what the offset actually is.  There is fun design work to protect privacy -- Privacy by Design...</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
