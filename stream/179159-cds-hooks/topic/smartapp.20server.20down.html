---
layout: page
title: "FHIR Chat  · smartapp server down · cds hooks"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/index.html">cds hooks</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/smartapp.20server.20down.html">smartapp server down</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="235286325"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/smartapp%20server%20down/near/235286325" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/smartapp.20server.20down.html#235286325">(Apr 20 2021 at 04:36)</a>:</h4>
<p><a href="https://launch.smarthealthit.org/v/r2/fhir">https://launch.smarthealthit.org/v/r2/fhir</a> seems to be unavailable (which is interfering with the CDS Hooks demo site)<br>
<span class="user-mention" data-user-id="191315">@Josh Mandel</span> <span class="user-mention" data-user-id="191864">@Isaac Vetter</span></p>



<a name="235366812"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/smartapp%20server%20down/near/235366812" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/smartapp.20server.20down.html#235366812">(Apr 20 2021 at 15:46)</a>:</h4>
<p><span class="user-mention" data-user-id="193731">@Vladimir Ignatov</span> may have insight here.</p>



<a name="235366985"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/smartapp%20server%20down/near/235366985" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/smartapp.20server.20down.html#235366985">(Apr 20 2021 at 15:47)</a>:</h4>
<p><a href="https://launch.smarthealthit.org/v/r2/fhir">https://launch.smarthealthit.org/v/r2/fhir</a> seems up to me though (e.g., <a href="https://launch.smarthealthit.org/v/r2/fhir/metadata">https://launch.smarthealthit.org/v/r2/fhir/metadata</a> or <a href="https://launch.smarthealthit.org/v/r2/fhir/Patient">https://launch.smarthealthit.org/v/r2/fhir/Patient</a> are returning data)</p>



<a name="235367219"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/smartapp%20server%20down/near/235367219" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/smartapp.20server.20down.html#235367219">(Apr 20 2021 at 15:49)</a>:</h4>
<p>It looks like maybe the issue is that the default patient for the CDS Hook sandbox (<a href="http://sandbox.cds-hooks.org/">http://sandbox.cds-hooks.org/</a>) is ttps://launch.smarthealthit.org/v/r2/fhir/Patient/smart-1288992, which doesn't currently exist (appears deleted)</p>



<a name="235367397"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/smartapp%20server%20down/near/235367397" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/smartapp.20server.20down.html#235367397">(Apr 20 2021 at 15:50)</a>:</h4>
<p><span class="user-mention" data-user-id="193731">@Vladimir Ignatov</span> is this expected to re-appear after a nightly reset?</p>



<a name="235368561"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/smartapp%20server%20down/near/235368561" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vladimir Ignatov <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/smartapp.20server.20down.html#235368561">(Apr 20 2021 at 15:57)</a>:</h4>
<p>Yes the servers are up but I am currently updating the patient data. The patients are getting older over time which is an issue for some apps so I had to shift all dates in the dataset... Everything is updated, except for the DSTU-2 smart patients, which are causing some weird HAPI-specific issues during the nightly reset.  Might be fixed tomorrow but may also take longer. If you can, try using other patients until that is fixed.</p>



<a name="235491654"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/smartapp%20server%20down/near/235491654" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Silva <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/smartapp.20server.20down.html#235491654">(Apr 21 2021 at 11:14)</a>:</h4>
<p><span class="user-mention" data-user-id="193731">@Vladimir Ignatov</span>  - aging of patient data on test/demo servers - a common problem when FHIR test data is hosted on a FHIR server.  How do you deal with this?  Do you 'clear out the DB' and reload all the patient data?    How do you update all the patient data's date information, e.g. Observation.effectiveDateTime, etc.?    We've done something like this for small test data sets using scripting to update the dates in a relative time way, e.g. "today - 200 days".</p>



<a name="235538552"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/smartapp%20server%20down/near/235538552" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vladimir Ignatov <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/smartapp.20server.20down.html#235538552">(Apr 21 2021 at 16:13)</a>:</h4>
<p>We have a nightly reset script that uses HAPI-specific procedures (e.g. $expunge) to copy data from a private server to the public one, thus overwriting any changes that people may have made during the day. As for the time manipulation, I ended up writing a script that can shift all dates in a given data set (a folder of FHIR bundles) - <a href="https://github.com/smart-on-fhir/timeshift">https://github.com/smart-on-fhir/timeshift</a></p>
<p>Feel free to try it if you need something like that, just keep in mind that it is currently only configured to handle the data that we have on the SMART sandbox. For other datasets more paths may have to be added to the <code>config.js</code> file which simply defines all the paths that MAY exist and contain a date-like value.</p>



<a name="235570270"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/smartapp%20server%20down/near/235570270" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Silva <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/smartapp.20server.20down.html#235570270">(Apr 21 2021 at 19:48)</a>:</h4>
<p><span class="user-mention" data-user-id="193731">@Vladimir Ignatov</span>  - thanks.   Does the HAPI $expunge have to be done one resource at a time or is it 'global', removing all resources?</p>
<p>I'd like to take a look at that timeshift script but it seems to require access to the Github repo.    I've got a simple script using node.js and the moment library to update date-related fields.   The script has a list of which date-related fields it updates.   I don't have it working on updating date fields that are within arrays (JSON).</p>



<a name="235577704"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/smartapp%20server%20down/near/235577704" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vladimir Ignatov <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/smartapp.20server.20down.html#235577704">(Apr 21 2021 at 20:43)</a>:</h4>
<p>Yes, sorry. The <code>timeshift</code> repo is now public. It uses a double dot notation to dive into arrays. As for the expunge, see  <a href="https://smilecdr.com/docs/fhir_repository/deleting_data.html#expunge">https://smilecdr.com/docs/fhir_repository/deleting_data.html#expunge</a></p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
