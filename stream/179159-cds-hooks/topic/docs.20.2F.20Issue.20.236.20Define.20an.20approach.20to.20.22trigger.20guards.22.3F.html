---
layout: page
title: "FHIR Chat  Â· docs / Issue #6 Define an approach to &quot;trigger guards&quot;? Â· cds hooks"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/index.html">cds hooks</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/docs.20.2F.20Issue.20.236.20Define.20an.20approach.20to.20.22trigger.20guards.22.3F.html">docs / Issue #6 Define an approach to &quot;trigger guards&quot;?</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153887387"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/docs%20/%20Issue%20%236%20Define%20an%20approach%20to%20%22trigger%20guards%22%3F/near/153887387" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Github Notifications <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/docs.20.2F.20Issue.20.236.20Define.20an.20approach.20to.20.22trigger.20guards.22.3F.html#153887387">(May 06 2017 at 00:01)</a>:</h4>
<p>kpshek <a href="https://github.com/cds-hooks/docs/issues/6#issuecomment-299600931" target="_blank" title="https://github.com/cds-hooks/docs/issues/6#issuecomment-299600931">commented</a> on <a href="https://github.com/cds-hooks/docs/issues/6" target="_blank" title="https://github.com/cds-hooks/docs/issues/6">Issue #6</a></p>
<blockquote>
<p>For reference, Clinical Reasoning has defined this under <a href="http://hl7.org/fhir/STU3/servicedefinition-definitions.html#ServiceDefinition.useContext" target="_blank" title="http://hl7.org/fhir/STU3/servicedefinition-definitions.html#ServiceDefinition.useContext">ServiceDefinition.useContext</a> which uses the <a href="http://hl7.org/fhir/STU3/metadatatypes.html#UsageContext" target="_blank" title="http://hl7.org/fhir/STU3/metadatatypes.html#UsageContext">UsageContext</a> data type.</p>
</blockquote>



<a name="153887529"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/docs%20/%20Issue%20%236%20Define%20an%20approach%20to%20%22trigger%20guards%22%3F/near/153887529" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Github Notifications <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/docs.20.2F.20Issue.20.236.20Define.20an.20approach.20to.20.22trigger.20guards.22.3F.html#153887529">(May 06 2017 at 10:54)</a>:</h4>
<p>vadi2 <a href="https://github.com/cds-hooks/docs/issues/6#issuecomment-299631839" target="_blank" title="https://github.com/cds-hooks/docs/issues/6#issuecomment-299631839">commented</a> on <a href="https://github.com/cds-hooks/docs/issues/6" target="_blank" title="https://github.com/cds-hooks/docs/issues/6">Issue #6</a></p>
<blockquote>
<p>Why not fhirpath? (insert Zoidberg here)</p>
</blockquote>



<a name="153887536"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/docs%20/%20Issue%20%236%20Define%20an%20approach%20to%20%22trigger%20guards%22%3F/near/153887536" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Github Notifications <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/docs.20.2F.20Issue.20.236.20Define.20an.20approach.20to.20.22trigger.20guards.22.3F.html#153887536">(May 06 2017 at 11:17)</a>:</h4>
<p>jmandel <a href="https://github.com/cds-hooks/docs/issues/6#issuecomment-299633098" target="_blank" title="https://github.com/cds-hooks/docs/issues/6#issuecomment-299633098">commented</a> on <a href="https://github.com/cds-hooks/docs/issues/6" target="_blank" title="https://github.com/cds-hooks/docs/issues/6">Issue #6</a></p>
<blockquote>
<p>I think FHIRPath is a big help here. We'd need some way to define what resources(s) a FHIRPath expression runs against. A couple of possible models:</p>
<p>### "Basic Resource Set"<br>
We can imagine a small set of resources like: a single <code>Patient</code> and a bundle of <code>Condition</code>s as the implicit target for expressions. Then a CDS service would register a set of FHIRPath expressions, like:</p>
<div class="codehilite"><pre><span></span>{
  &quot;patient&quot;: &quot;now() - Patient.birthDate &gt; 18 and Patient.gender = &#39;male&#39;&quot;,
  &quot;conditions&quot;: &quot;Bundle.entry.resource.code.coding.where(system=&#39;http://snomed.info/sct&#39; and code=&#39;84114007&#39;)&quot;
}
</pre></div>


<p>(Leave aside how brittle this kind of SNOMED matching is.)</p>
<p>### "Ad-hoc Resource Sets"<br>
We could imagine a more general capability where services register search queries combined with boolean FHIRPath expressions. The equivalent of the above would be:</p>
<div class="codehilite"><pre><span></span>[{
  &quot;query&quot;: &quot;Patient/{{Patient.id}}&quot;,
  &quot;fhirpath&quot;: &quot;now() - Patient.birthDate &gt; 18 and Patient.gender = &#39;male&#39;&quot;,
}, {
  &quot;query&quot;: &quot;Condition?patient={{Patient.id}}&quot;,
  &quot;fhirpath&quot;: &quot;Bundle.entry.resource.code.coding.where(system=&#39;http://snomed.info/sct&#39; and code=&#39;84114007&#39;)&quot;
}]
</pre></div>


<p>Either of these representations could be automated (or manually implemented on a case-by-case basis inside of a given EHR, using the formal expression as a set of requirements)... but it's unclear how general-purpose and expressive these approaches are. For example, important trigger guards might need pretty rich value set semantics, where the service needs to define a (potentially big) valueset ahead of time. FHIRPath could handle this too, but we need more experience before I'd be happy making this call.</p>
</blockquote>



<a name="153887551"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179159-cds%20hooks/topic/docs%20/%20Issue%20%236%20Define%20an%20approach%20to%20%22trigger%20guards%22%3F/near/153887551" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Github Notifications <a href="https://fhir.github.io/chat-archive/stream/179159-cds-hooks/topic/docs.20.2F.20Issue.20.236.20Define.20an.20approach.20to.20.22trigger.20guards.22.3F.html#153887551">(May 06 2017 at 11:36)</a>:</h4>
<p>kpshek <a href="https://github.com/cds-hooks/docs/issues/6#issuecomment-299634008" target="_blank" title="https://github.com/cds-hooks/docs/issues/6#issuecomment-299634008">commented</a> on <a href="https://github.com/cds-hooks/docs/issues/6" target="_blank" title="https://github.com/cds-hooks/docs/issues/6">Issue #6</a></p>
<blockquote>
<p>@vadi2 - FHIRPath has come up previously. <img alt="ðŸ˜„" class="emoji" src="/static/generated/emoji/images/emoji/unicode/1f604.png" title="ðŸ˜„"> In addition to what Josh already stated, a concern with FHIRPath is the complexity in implementing this.</p>
<p>My opinion is that we won't address this for 1.0 and instead rely upon the native capabilities of the EHR's underlying rule engine to handle this.</p>
</blockquote>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
