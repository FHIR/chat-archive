---
layout: page
title: "FHIR Chat  · Consent2Share(C2S) on FHIR · IG creation"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/index.html">IG creation</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Consent2Share(C2S).20on.20FHIR.html">Consent2Share(C2S) on FHIR</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="203882505"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Consent2Share%28C2S%29%20on%20FHIR/near/203882505" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> vladimir matryshov <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Consent2Share(C2S).20on.20FHIR.html#203882505">(Jul 14 2020 at 20:21)</a>:</h4>
<p>Hello, We're having some trouble in upgrading FHIR from DSTU3 to R4 in Consent2Share project.<br>
<a href="https://github.com/bhits/consent2share">https://github.com/bhits/consent2share</a><br>
<a href="https://okmis.info/hapi-fhir-jpaserver/">https://okmis.info/hapi-fhir-jpaserver/</a><br>
We got the following the issue and not sure how to solve the issue:<br>
Incorrect resource type found, expected "Conformance" but found "CapabilityStatement"<br>
Can you please help this?</p>
<p>Here is error log file. <a href="/user_uploads/10155/RW2bD7gpjYE8rI28TF98frpU/error.log">error.log</a></p>



<a name="203884114"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Consent2Share%28C2S%29%20on%20FHIR/near/203884114" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Pyke <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Consent2Share(C2S).20on.20FHIR.html#203884114">(Jul 14 2020 at 20:32)</a>:</h4>
<p>Can you give a little more detail on what you mean by "upgrading FHIR"?  The Consent2Share project was a DSTU3 FHIR IG, are you upgrading that or upgrading  the HAPI server? What are you doing when you get that error?</p>



<a name="203893162"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Consent2Share%28C2S%29%20on%20FHIR/near/203893162" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> vladimir matryshov <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Consent2Share(C2S).20on.20FHIR.html#203893162">(Jul 14 2020 at 21:54)</a>:</h4>
<p>Hello, David. Thank you for your response.<br>
Yes. You're correct. The consent2share project was a DSTU3. I was going to upgrade the FHIR version of C2S to R4.<br>
In order to do this, I used hapi-fhir-jpaserver-starter project (<a href="https://github.com/hapifhir/hapi-fhir-jpaserver-starter">https://github.com/hapifhir/hapi-fhir-jpaserver-starter</a>) and I updated some configurations of C2S so that C2S works on the new FHIR(R4).<br>
When I run the provider-ui of C2S to create/update a patient, it calls FHIR REST APIs using fhir client while it calls ums(user management system) of C2S and I got the above error. Please check the error.log file I attached.</p>



<a name="203894176"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Consent2Share%28C2S%29%20on%20FHIR/near/203894176" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Pyke <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Consent2Share(C2S).20on.20FHIR.html#203894176">(Jul 14 2020 at 22:05)</a>:</h4>
<p>Updating Consent2Share is more than just converting the resources.  You're going to have a lot of work to convert the whole IG.  The error for the Conformance resource is only the first of many issues that need to be solved as the changes from STU3 to R4 were large and varied.  For this error, the Conformance resource was deprecated and replaced with the CapabilityStatement, a completely different resource.</p>



<a name="203895121"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Consent2Share%28C2S%29%20on%20FHIR/near/203895121" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> vladimir matryshov <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Consent2Share(C2S).20on.20FHIR.html#203895121">(Jul 14 2020 at 22:16)</a>:</h4>
<p>Yeah, I think so the Conformance resource was deprecated and no longer used in R4.<br>
So I tried to find the source code that is related the Conformance resource and replace it with CapabilityStatement but I couldn't find.<br>
Which part of the C2S should I modify to solve the issue?</p>



<a name="203896941"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Consent2Share%28C2S%29%20on%20FHIR/near/203896941" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Pyke <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Consent2Share(C2S).20on.20FHIR.html#203896941">(Jul 14 2020 at 22:39)</a>:</h4>
<p>You'll need to create the CapabilityStatement for the R4 version of C2S and then modify the server to hand it out.  This is not a small change, you're likely to set a project to do the update of C2S from DSTU3 to R4</p>



<a name="203897526"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Consent2Share%28C2S%29%20on%20FHIR/near/203897526" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> vladimir matryshov <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Consent2Share(C2S).20on.20FHIR.html#203897526">(Jul 14 2020 at 22:46)</a>:</h4>
<p>Yeah, I've set the project to do the update of C2S from DSTU3 to R4.<br>
I'm not sure about creating the CapabilityStatement for the R4 version of C2S. Can you tell me about it in detail?</p>



<a name="203897815"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Consent2Share%28C2S%29%20on%20FHIR/near/203897815" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Pyke <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Consent2Share(C2S).20on.20FHIR.html#203897815">(Jul 14 2020 at 22:50)</a>:</h4>
<p>The base information is here: <a href="http://hl7.org/fhir/capabilitystatement.html">http://hl7.org/fhir/capabilitystatement.html</a></p>



<a name="203964596"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Consent2Share%28C2S%29%20on%20FHIR/near/203964596" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> vladimir matryshov <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Consent2Share(C2S).20on.20FHIR.html#203964596">(Jul 15 2020 at 14:46)</a>:</h4>
<p>Can you refer a C2S freelancer to assist with the salvage?</p>



<a name="203968695"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Consent2Share%28C2S%29%20on%20FHIR/near/203968695" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Pyke <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Consent2Share(C2S).20on.20FHIR.html#203968695">(Jul 15 2020 at 15:17)</a>:</h4>
<p>Yes, I can.</p>



<a name="204005283"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Consent2Share%28C2S%29%20on%20FHIR/near/204005283" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Consent2Share(C2S).20on.20FHIR.html#204005283">(Jul 15 2020 at 20:01)</a>:</h4>
<p><span class="user-mention" data-user-id="317069">@vladimir matryshov</span>  from your log it looks like your server and client are not aligned in what version that should be used. It looks like the client speaks STU3 or R4, while your server speaks DSTU2</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
