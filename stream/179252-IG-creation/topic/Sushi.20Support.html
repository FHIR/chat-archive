---
layout: page
title: "FHIR Chat  · Sushi Support · IG creation"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/index.html">IG creation</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html">Sushi Support</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="191818403"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/191818403" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#191818403">(Mar 25 2020 at 22:23)</a>:</h4>
<p>The new Ig publisher I just published supports FSH natively now - put your FSH content in /fsh in  an IG folder, and then run the IG publisher per normal, and sushi will run first before the IG Publisher (though you can continue to run sushi directly on the content. This means that this now works on the current build</p>



<a name="191818931"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/191818931" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#191818931">(Mar 25 2020 at 22:29)</a>:</h4>
<p>This is awesome, <span class="user-mention" data-user-id="191316">@Grahame Grieve</span>.  Thank you!  Regarding a few logistics... Users will need to have at least Node.js installed, right?  Does this also assume the user is responsible for installing SUSHI locally as well?  Or are you installing that as part of the IG Publisher?</p>



<a name="191820842"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/191820842" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#191820842">(Mar 25 2020 at 22:52)</a>:</h4>
<p>IG Publisher doesn't install it. If you don't have it, it detail the command line to install it, and point you to the NPM install</p>



<a name="191820906"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/191820906" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#191820906">(Mar 25 2020 at 22:52)</a>:</h4>
<p>I'm not sure how to handle keeping it up to date. Certainly want the latest on the current buil</p>



<a name="191822788"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/191822788" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#191822788">(Mar 25 2020 at 23:14)</a>:</h4>
<p>The template .bat / .sh files could do that check / update. <span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> what do you think?</p>



<a name="191823197"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/191823197" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#191823197">(Mar 25 2020 at 23:19)</a>:</h4>
<p>this happens before the template is even known</p>



<a name="191824392"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/191824392" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#191824392">(Mar 25 2020 at 23:35)</a>:</h4>
<p>sorry, I meant the IG's .bat files (the ones that call the publisher). <br>
But i guess the answer is the same - it wouldn't work because afaik sushi will not use those batch files.</p>



<a name="191840243"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/191840243" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#191840243">(Mar 26 2020 at 04:52)</a>:</h4>
<p>I'm also reluctant to make the .bat/.sh files more complex than they already are - because they're not centrally maintained</p>



<a name="191862984"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/191862984" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#191862984">(Mar 26 2020 at 10:15)</a>:</h4>
<p>I'm trying this out from scratch (i can document or assist <span class="user-mention" data-user-id="191387">@Keith Boone</span> in documenting). Questions:</p>



<a name="191863411"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/191863411" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#191863411">(Mar 26 2020 at 10:19)</a>:</h4>
<ol>
<li>the IG publisher needs the ig.ini to start. But sushi will generate the ig.ini, including populating the ig name</li>
</ol>



<a name="191863585"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/191863585" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#191863585">(Mar 26 2020 at 10:21)</a>:</h4>
<ol start="2">
<li>because sushi is going to take the fsh folder (which I think is good), then the sushi command line that the publisher runs is </li>
</ol>
<div class="codehilite"><pre><span></span>sushi -o .. .
</pre></div>


<p>(right?)</p>



<a name="191864510"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/191864510" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#191864510">(Mar 26 2020 at 10:30)</a>:</h4>
<p>Sushi is generating my profiles with   "url": "undefined/StructureDefinition/be-patient",<br>
and the publisher is rejecting it with <br>
".FHIRException: Unable to locate the profile "undefined/undefined/StructureDefinition/be-patient" in order to validate against it"</p>



<a name="191864733"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/191864733" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#191864733">(Mar 26 2020 at 10:32)</a>:</h4>
<p>I guess I need to set the ig's baseUrl? Where?</p>



<a name="191866783"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/191866783" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#191866783">(Mar 26 2020 at 10:52)</a>:</h4>
<p>actually I run sushi from the directory above so the command in IGpublisher is sushi fsh -o .</p>



<a name="191867791"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/191867791" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#191867791">(Mar 26 2020 at 11:03)</a>:</h4>
<p>I am running _genonce.bat, but I don't see sushi getting triggered.</p>



<a name="191867795"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/191867795" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#191867795">(Mar 26 2020 at 11:03)</a>:</h4>
<p>should I?</p>



<a name="191872340"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/191872340" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#191872340">(Mar 26 2020 at 11:49)</a>:</h4>
<p>this is complicated still. <br>
I created a repo, sushi works well, the IG published it ok.</p>



<a name="191872484"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/191872484" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#191872484">(Mar 26 2020 at 11:51)</a>:</h4>
<p>(i needed to do a few things to get it working: </p>
<ol>
<li>create an /ig.ini (this would be created by sushi but the publisher needs it)</li>
</ol>



<a name="191872674"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/191872674" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#191872674">(Mar 26 2020 at 11:53)</a>:</h4>
<p>(I also had to fix manually my urls but that's on me)</p>



<a name="191872809"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/191872809" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#191872809">(Mar 26 2020 at 11:54)</a>:</h4>
<p>I do not know how the Publisher calls sushi if the input for the publisher is generated /updated by sushi</p>



<a name="191873347"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/191873347" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#191873347">(Mar 26 2020 at 12:00)</a>:</h4>
<p>conclusion: both parts work but I'm missing something in the integration of the tools</p>



<a name="191879843"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/191879843" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#191879843">(Mar 26 2020 at 13:01)</a>:</h4>
<p>what should the ig.ini contain to indicate that the content needs to be created from fsh?</p>



<a name="191880196"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/191880196" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#191880196">(Mar 26 2020 at 13:03)</a>:</h4>
<p>I have a project that is just fsh content (fish tank only)</p>



<a name="191881015"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/191881015" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vassil Peytchev <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#191881015">(Mar 26 2020 at 13:09)</a>:</h4>
<p>From what I understood, the mere presence of ./fsh is enough to compile it, then the rest of IG Publisher is run on the results.</p>



<a name="191881827"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/191881827" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#191881827">(Mar 26 2020 at 13:14)</a>:</h4>
<p>that was my understanding as well. but it didn't work without an ig.ini</p>



<a name="191882459"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/191882459" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vassil Peytchev <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#191882459">(Mar 26 2020 at 13:19)</a>:</h4>
<p>Apparently you need to have one, would copying the one that Sushi generates and have it present work?</p>



<a name="191883557"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/191883557" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#191883557">(Mar 26 2020 at 13:27)</a>:</h4>
<p>I can run sushi on my fishtank, it does create a build directory.. but didn't create a ig.ini or my ig.json.. I might be missing something in the fishtank too</p>



<a name="191884271"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/191884271" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#191884271">(Mar 26 2020 at 13:32)</a>:</h4>
<p>i think the publisher does not move forward if the ini does not contain the IG name. <br>
but the ini is created bu sushi (i presume down the line, but i'm not sure)</p>



<a name="191884372"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/191884372" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#191884372">(Mar 26 2020 at 13:33)</a>:</h4>
<p><span class="user-mention" data-user-id="191469">@Chris Moesel</span> <br>
do you know what I have to change to fix the "undefined" in my profiles and examples?</p>



<a name="191884580"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/191884580" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#191884580">(Mar 26 2020 at 13:35)</a>:</h4>
<p>my repo is here (just took parts from other IGs, but sushi works and IG work, they just don't talk to each other yet)<br>
<a href="https://github.com/costateixeira/be-on-sushi" title="https://github.com/costateixeira/be-on-sushi">https://github.com/costateixeira/be-on-sushi</a></p>



<a name="191888491"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/191888491" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#191888491">(Mar 26 2020 at 14:02)</a>:</h4>
<p>The whole SUSHI team is going into a meeting right now, but we'll take a look at this this afternoon.  In theory, if the <code>fsh</code> folder contains everything SUSHI needs, this should work.  At a minimum, I think you need:</p>
<ul>
<li><code>./fsh/package.json</code> for config</li>
<li><code>./fsh/**/.fsh</code> files (<code>**</code> just indicates that they can be in sub-folders)</li>
<li><code>./fsh/ig-data</code> (but _can_ be empty in minimal use case)</li>
</ul>



<a name="191888652"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/191888652" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#191888652">(Mar 26 2020 at 14:03)</a>:</h4>
<p>sushi works fine. my question is on the articulation between Publisher and sushi</p>



<a name="191888710"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/191888710" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#191888710">(Mar 26 2020 at 14:03)</a>:</h4>
<p>yup, I can run sushi fine. the build is automation is expecting something I dont have</p>



<a name="191899552"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/191899552" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Kramer <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#191899552">(Mar 26 2020 at 15:17)</a>:</h4>
<p>For me, the IG publisher doesn't seem to be running SUSHI even though the /fsh directory is present. It seems to be trying and failing to find the IG resource before SUSHI runs. But the IG resource is _produced_ by SUSHI. I'm using <code>FHIR IG Publisher Version 1.0.73-SNAPSHOT (Git# 6791a561f84e). Built 2020-03-26T08:50:23.553+11:00 (18 hours old)</code></p>



<a name="191909863"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/191909863" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#191909863">(Mar 26 2020 at 16:19)</a>:</h4>
<p>I found that is I run the IG Publisher like this from the root:</p>
<div class="codehilite"><pre><span></span>java -jar input-cache/org.hl7.fhir.publisher.jar .
</pre></div>


<p>then it will properly find the FSH folder and run SUSHI on it.  But then it fails when it get's back to publishing with an error like this: </p>
<div class="codehilite"><pre><span></span>Exception in thread &quot;main&quot; java.lang.Error: Case mismatch of file .: found fsh-mcode
</pre></div>



<a name="191914384"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/191914384" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#191914384">(Mar 26 2020 at 16:45)</a>:</h4>
<p>keep in mind that according to the scripts, the publisher can be either in input-cache\ or in ..\</p>



<a name="191915903"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/191915903" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Kramer <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#191915903">(Mar 26 2020 at 16:55)</a>:</h4>
<p>Looks like the problem is around line 1204 here: <a href="https://github.com/HL7/fhir-ig-publisher/blob/master/org.hl7.fhir.publisher.core/src/main/java/org/hl7/fhir/igtools/publisher/Publisher.java" title="https://github.com/HL7/fhir-ig-publisher/blob/master/org.hl7.fhir.publisher.core/src/main/java/org/hl7/fhir/igtools/publisher/Publisher.java">https://github.com/HL7/fhir-ig-publisher/blob/master/org.hl7.fhir.publisher.core/src/main/java/org/hl7/fhir/igtools/publisher/Publisher.java</a>. It's relying on locating the fsh directory directly below the directory of the config file, but it can't find the config file (which I believe is the ig.json -- as in my earlier message, doesn't yet exist).</p>



<a name="191916881"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/191916881" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#191916881">(Mar 26 2020 at 17:02)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191447">Mark Kramer</span> <a href="#narrow/stream/179252-IG-creation/topic/Sushi.20Support/near/191915903" title="#narrow/stream/179252-IG-creation/topic/Sushi.20Support/near/191915903">said</a>:</p>
<blockquote>
<p>It's relying on locating the fsh directory directly below the directory of the config file, but it can't find the config file (which I believe is the ig.json -- as in my earlier message, doesn't yet exist).</p>
</blockquote>
<p>I would phrase it as </p>
<blockquote>
<p>the IG publisher needs the ig.ini to start. But sushi will generate the ig.ini, including populating the ig name</p>
</blockquote>



<a name="191917439"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/191917439" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#191917439">(Mar 26 2020 at 17:06)</a>:</h4>
<p>I thought it was my setup that was missing something. <br>
If not, what are the options?</p>
<ol>
<li>sushi can just read read the ig.ini from the ig folder - instead of writing it (not sure if feasible)</li>
</ol>



<a name="191917997"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/191917997" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#191917997">(Mar 26 2020 at 17:11)</a>:</h4>
<p>...?</p>



<a name="191918169"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/191918169" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Kramer <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#191918169">(Mar 26 2020 at 17:13)</a>:</h4>
<p>We have to wait for <span class="user-mention" data-user-id="191469">@Chris Moesel</span>  and <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> to work this out.  I don't think it is your configuration as much as design.</p>



<a name="191918242"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/191918242" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#191918242">(Mar 26 2020 at 17:13)</a>:</h4>
<p>I would be happy with a trigger in the ini that tells the build that it must run sushi first</p>



<a name="191918424"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/191918424" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#191918424">(Mar 26 2020 at 17:15)</a>:</h4>
<p>I'm suggesting changes to the design. This may be handled by sushi, publisher or templates. Not sure what is best</p>



<a name="191918481"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/191918481" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#191918481">(Mar 26 2020 at 17:15)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191404">John Moehrke</span> <a href="#narrow/stream/179252-IG-creation/topic/Sushi.20Support/near/191918242" title="#narrow/stream/179252-IG-creation/topic/Sushi.20Support/near/191918242">said</a>:</p>
<blockquote>
<p>I would be happy with a trigger in the ini that tells the build that it must run sushi first</p>
</blockquote>
<p>I think that would be good</p>



<a name="191918929"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/191918929" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#191918929">(Mar 26 2020 at 17:18)</a>:</h4>
<p>So, if there is an INI that calls sushi, then sushi will use that ini and bypass the ig.ini merging.. ?</p>



<a name="191928260"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/191928260" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#191928260">(Mar 26 2020 at 18:21)</a>:</h4>
<p>looking at the docs<br>
<a href="https://build.fhir.org/ig/HL7/fhir-shorthand/sushi.html#sushi-inputs" title="https://build.fhir.org/ig/HL7/fhir-shorthand/sushi.html#sushi-inputs">https://build.fhir.org/ig/HL7/fhir-shorthand/sushi.html#sushi-inputs</a><br>
this seems deeper.</p>



<a name="191928292"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/191928292" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#191928292">(Mar 26 2020 at 18:21)</a>:</h4>
<p>I think the folder structure misalignments will cause issues</p>



<a name="191928533"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/191928533" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#191928533">(Mar 26 2020 at 18:23)</a>:</h4>
<p>BUT it gave me an idea: <br>
sushi looks at  &lt;input_folder&gt;/igdata<br>
to see if it has to create an ig</p>



<a name="191928712"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/191928712" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#191928712">(Mar 26 2020 at 18:24)</a>:</h4>
<p>what about looking at <br>
&lt;input_folder&gt;/igdata<br>
OR the parent folder, and if the parent folder contains an ig.ini, then treat the parent folder as the igdata folder?</p>



<a name="191928739"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/191928739" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#191928739">(Mar 26 2020 at 18:24)</a>:</h4>
<p>that would be one way to solve this inconsistency.<br>
<span class="user-mention" data-user-id="191469">@Chris Moesel</span></p>



<a name="191929584"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/191929584" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#191929584">(Mar 26 2020 at 18:31)</a>:</h4>
<p><span class="user-mention" data-user-id="191832">@Jose Costa Teixeira</span> -- that sounds like something to consider for sure.  I think <span class="user-mention" data-user-id="255031">@Julia Afeltra</span> is going to be taking the initial look at this and how it all should work.  Tagging you, Julia, to make you aware of this thread!</p>



<a name="191933364"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/191933364" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#191933364">(Mar 26 2020 at 19:01)</a>:</h4>
<p>I don't understand any of this thread. Run the publisher pointing at the <em>directory</em></p>



<a name="191933404"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/191933404" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#191933404">(Mar 26 2020 at 19:01)</a>:</h4>
<p>you can't point at the ini since it doesn't exist until after sushi is run</p>



<a name="191933781"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/191933781" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#191933781">(Mar 26 2020 at 19:04)</a>:</h4>
<p>I tried that... got this failure</p>
<blockquote>
<p>C:\Users\john.moehrke\Git\MHD-fsh&gt;_genonce<br>
Checking internet connection...<br>
Reply from 104.196.166.17: bytes=32 time=64ms TTL=112<br>
We're online<br>
Picked up JAVA_TOOL_OPTIONS: -Dfile.encoding=UTF-8<br>
FHIR IG Publisher Version 1.0.73-SNAPSHOT (Git# 6791a561f84e). Built 2020-03-26T08:50:23.553+11:00 (21 hours old)<br>
Detected Java version: 1.8.0_241 from C:\Program Files\Java\jre1.8.0_241 on amd64 (64bit). 1781MB available<br>
Parameters: -ig ig.ini<br>
dir = C:\Users\john.moehrke\Git\MHD-fsh, path = C:\Python27\;C:\Python27\Scripts;C:\Program Files (x86)\Common Files\Oracle\Java\javapath;C:\ProgramData\Oracle\Java\javapath;C:\WINDOWS\system32;C:\WINDOWS;C:\WINDOWS\System32\Wbem;C:\WINDOWS\System32\WindowsPowerShell\v1.0\;C:\Program Files (x86)\Skype\Phone\;C:\Program Files (x86)\AMD\ATI.ACE\Core-Static;C:\WINDOWS\System32\OpenSSH\;C:\Program Files\nodejs\;C:\ProgramData\chocolatey\bin;C:\Program Files\TortoiseGit\bin;C:\Users\john.moehrke\AppData\Local\Programs\Python\Python37-32\Scripts\;C:\Users\john.moehrke\AppData\Local\Programs\Python\Python37-32\;C:\Ruby25-x64\bin;C:\Users\john.moehrke\AppData\Local\Microsoft\WindowsApps;C:\Users\john.moehrke\AppData\Roaming\npm;C:\Program Files\Java\jdk1.8.0_181;C:\Users\John.moehrke\Git\latest-ig-publisher\bin;C:\Program Files\Java\apache-ant-1.10.5\bin;"C:\Program Files\Git\bin"<br>
Run time = Thursday, March 26, 2020 2:03:48 PM CDT (2020-03-26T14:03:48-05:00)<br>
Exception in thread "main" java.lang.Exception: Unable to find the nominated IG at C:\Users\john.moehrke\Git\MHD-fsh\ig.ini<br>
        at org.hl7.fhir.igtools.publisher.Publisher.determineActualIG(Publisher.java:7117)<br>
        at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:6960)<br>
Press any key to continue . . .</p>
</blockquote>



<a name="191933916"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/191933916" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#191933916">(Mar 26 2020 at 19:05)</a>:</h4>
<p>you didn't try that at all:</p>
<blockquote>
<p>Parameters: -ig ig.ini</p>
</blockquote>



<a name="191933926"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/191933926" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#191933926">(Mar 26 2020 at 19:05)</a>:</h4>
<p>I have a ./fsh directory with a bunch of fish ready to go</p>



<a name="191934013"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/191934013" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#191934013">(Mar 26 2020 at 19:06)</a>:</h4>
<p>?</p>



<a name="191934062"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/191934062" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#191934062">(Mar 26 2020 at 19:06)</a>:</h4>
<p>teach me. I have a fsh directory and ran _genonce using the newest stuff</p>



<a name="191934130"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/191934130" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Kramer <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#191934130">(Mar 26 2020 at 19:07)</a>:</h4>
<p>Me, too. Can't get it to run Sushi using _genonce.  Maybe it is something different in _genonce.</p>



<a name="191934167"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/191934167" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#191934167">(Mar 26 2020 at 19:07)</a>:</h4>
<p>yes, if you are using some batch file that names ig.ini, which you are, then that won't work</p>



<a name="191934265"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/191934265" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#191934265">(Mar 26 2020 at 19:08)</a>:</h4>
<p>the batch file has to name the directory not the ini file that doesn't exist. I assumed that it would be obvious that you can't name ig.ini since it doesn't exist</p>



<a name="191934310"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/191934310" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#191934310">(Mar 26 2020 at 19:08)</a>:</h4>
<p>I don't know anything about _genonce.bat. where  did you get that from?</p>



<a name="191934337"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/191934337" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Kramer <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#191934337">(Mar 26 2020 at 19:08)</a>:</h4>
<p>ig.ini is an input to SUSHI</p>



<a name="191934365"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/191934365" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#191934365">(Mar 26 2020 at 19:09)</a>:</h4>
<p>umm no?</p>



<a name="191934391"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/191934391" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Kramer <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#191934391">(Mar 26 2020 at 19:09)</a>:</h4>
<p>Yes, it is.</p>



<a name="191934579"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/191934579" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#191934579">(Mar 26 2020 at 19:10)</a>:</h4>
<p>that is not what <span class="user-mention" data-user-id="191469">@Chris Moesel</span> told me, or what the example he sent me does</p>



<a name="191934624"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/191934624" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Kramer <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#191934624">(Mar 26 2020 at 19:10)</a>:</h4>
<p>SUSHI just copies it, if you provide it, to SUSHI's output directory (the IGP home directory)</p>



<a name="191934718"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/191934718" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#191934718">(Mar 26 2020 at 19:11)</a>:</h4>
<p>ig.ini: If present, the user-provided values will be merged with SUSHI-generated ig.ini.</p>



<a name="191934824"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/191934824" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Kramer <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#191934824">(Mar 26 2020 at 19:12)</a>:</h4>
<p><a href="https://github.com/FHIR/ig-guidance/" title="https://github.com/FHIR/ig-guidance/">https://github.com/FHIR/ig-guidance/</a> is where _genonce comes from</p>



<a name="191934856"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/191934856" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#191934856">(Mar 26 2020 at 19:12)</a>:</h4>
<p>well, I can see that it's just easier for everyone if I let you nominate the ig.ini when running.</p>



<a name="191934899"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/191934899" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#191934899">(Mar 26 2020 at 19:13)</a>:</h4>
<p>i've been experimenting and from what I know about the way the tools work, I think this could work:</p>



<a name="191934913"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/191934913" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#191934913">(Mar 26 2020 at 19:13)</a>:</h4>
<p><a href="/user_uploads/10155/JgP_VOIReShszIxkC1o-vdd1/image.png" title="image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/10155/JgP_VOIReShszIxkC1o-vdd1/image.png" title="image.png"><img src="/user_uploads/10155/JgP_VOIReShszIxkC1o-vdd1/image.png"></a></div>



<a name="191935057"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/191935057" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#191935057">(Mar 26 2020 at 19:14)</a>:</h4>
<p>in short: if sushi is being called by the publisher, then it looks up the ini, and does not use ./ig-data for input, but the parent folder</p>



<a name="191935394"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/191935394" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#191935394">(Mar 26 2020 at 19:17)</a>:</h4>
<p>Obviously, in this diagram,<br>
Paella is fish but no sushi<br>
Sashimi is just plain fsh<br>
Maki is sushi plus input for IG, but not mixed<br>
Chirashi is fsh served with the IG content</p>



<a name="191935445"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/191935445" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#191935445">(Mar 26 2020 at 19:17)</a>:</h4>
<p>(sorry, it's meal time here)</p>



<a name="191935642"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/191935642" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Kramer <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#191935642">(Mar 26 2020 at 19:19)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> you might not need any changes to the publisher if the _genonce script is the problem.  I'm going to test this.</p>



<a name="191935664"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/191935664" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#191935664">(Mar 26 2020 at 19:19)</a>:</h4>
<p>I think the conflicts are 2, should be esy to resolve:</p>
<ol>
<li>use ig.ini only as input, not try to merge it.</li>
<li>use the parent folder, not the ig-data (that inconsistency we should fix asap - we should have a canonical folder structure or else everything goes rotten)</li>
</ol>



<a name="191935848"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/191935848" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#191935848">(Mar 26 2020 at 19:20)</a>:</h4>
<p>I don't understand the first conflict</p>



<a name="191935886"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/191935886" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#191935886">(Mar 26 2020 at 19:21)</a>:</h4>
<p>genonce is very simple: it just runs <br>
org.hl7.fhir.publisher.jar -ig ig.ini</p>



<a name="191935910"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/191935910" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#191935910">(Mar 26 2020 at 19:21)</a>:</h4>
<blockquote>
<p>that is not what @Chris Moesel told me, or what the example he sent me does</p>
</blockquote>
<p>The example I sent does have an <code>ig.ini</code>, it's just buried in <code>fsh/ig-data/ig.ini</code>.  <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> -- if you got my example to work (and I assume you did), what was the exact publisher command you ran to get it to work?  When I run it on the example I sent, I do it like this and get this error:</p>
<div class="codehilite"><pre><span></span>$ java -jar org.hl7.fhir.publisher.jar .
FHIR IG Publisher Version 1.0.73-SNAPSHOT (Git# 6791a561f84e). Built 2020-03-26T08:50:23.553+11:00 (21 hours old)
Detected Java version: 1.8.0_222 from /Library/Java/JavaVirtualMachines/adoptopenjdk-8.jdk/Contents/Home/jre on x86_64 (64bit). 3641MB available
Parameters: .
dir = /Users/cmoesel/Downloads/fsh-tutorial-pub-test, path = /Users/cmoesel/.gem/ruby/2.6.0/bin:/Users/cmoesel/.rbenv/shims:/usr/local/opt/node@8/bin:/usr/local/bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/Users/cmoesel/bin
Run time = Thursday, March 26, 2020 3:19:29 PM EDT (2020-03-26T15:19:29-04:00)
Package Cache: /Users/cmoesel/.fhir/packages                                     (00:00.0079)
Sushi: info  Checking local cache for hl7.fhir.r4.core#4.0.1...                  (00:01.0143)
Sushi: info  Found hl7.fhir.r4.core#4.0.1 in local cache.                        (00:02.0986)
Sushi: info  Checking local cache for hl7.fhir.us.core#3.1.0...                  (00:02.0986)
Sushi: info  Found hl7.fhir.us.core#3.1.0 in local cache.                        (00:03.0058)
Sushi: info  Importing FSH text...                                               (00:03.0059)
Sushi: info  Preprocessed 2 documents with 3 aliases.                            (00:03.0142)
Sushi: info  Imported 4 definitions and 1 instances.                             (00:03.0146)
Sushi: info  Loaded package hl7.fhir.r4.core#4.0.1                               (00:03.0147)
Sushi: info  Loaded package hl7.fhir.us.core#3.1.0                               (00:03.0148)
Sushi: info  Converting FSH to FHIR resources...                                 (00:03.0148)
Sushi: info  Converted 3 FHIR StructureDefinitions.                              (00:03.0212)
Sushi: info  Converted 1 FHIR ValueSets.                                         (00:03.0218)
Sushi: info  Converted 1 FHIR instances.                                         (00:03.0246)
Sushi: info  Exporting FHIR resources as JSON...                                 (00:03.0247)
Sushi: info  Exported 5 FHIR resources as JSON.                                  (00:03.0257)
Sushi: info  Assembling Implementation Guide sources...                          (00:03.0257)
Sushi: info  Copied ig-data/input/pagecontent/index.md                           (00:03.0270)
Sushi: info  Merged ig-data/ig.ini w/ generated ig.ini                           (00:03.0279)
Sushi: info  Copied ig-data/package-list.json.                                   (00:03.0280)
Sushi: info  Generated ImplementationGuide-fish.json                             (00:03.0281)
Sushi: info  Assembled Implementation Guide sources; ready for IG Publisher.     (00:03.0281)
Sushi: info                                                                      (00:03.0281)
Sushi: Profiles:    2                                                            (00:03.0281)
Sushi: Extensions:  1                                                            (00:03.0281)
Sushi: Instances:   1                                                            (00:03.0281)
Sushi: ValueSets:   1                                                            (00:03.0281)
Sushi: CodeSystems: 0                                                            (00:03.0282)
Sushi: Errors:      0                                                            (00:03.0282)
Sushi: Warnings:    0                                                            (00:03.0282)
Exception in thread &quot;main&quot; java.lang.Error: Case mismatch of file .: found fsh-tutorial-pub-test
    at org.hl7.fhir.utilities.CSFile.&lt;init&gt;(CSFile.java:87)
    at org.hl7.fhir.igtools.publisher.Publisher.checkNewIg(Publisher.java:1298)
    at org.hl7.fhir.igtools.publisher.Publisher.initialize(Publisher.java:1208)
    at org.hl7.fhir.igtools.publisher.Publisher.execute(Publisher.java:662)
    at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:6993)
</pre></div>



<a name="191935947"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/191935947" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#191935947">(Mar 26 2020 at 19:21)</a>:</h4>
<p>1 conflict: sushi takes the ig.ini and creates a new ig of its own</p>



<a name="191936137"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/191936137" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#191936137">(Mar 26 2020 at 19:23)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> -- I think the quick way to get this working is to do what you're doing now -- but after you run SUSHI, you should then run the publisher as if <code>-ig ig.ini</code> was passed in (because SUSHI will dump an <code>ig.ini</code> into the root folder).</p>



<a name="191936272"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/191936272" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#191936272">(Mar 26 2020 at 19:24)</a>:</h4>
<p>I think we should chase down some of the other ideas here too, but short-term, I think my suggestion above would fix this.</p>



<a name="191936339"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/191936339" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#191936339">(Mar 26 2020 at 19:24)</a>:</h4>
<blockquote>
<p>you should then run the publisher as if -ig ig.ini</p>
</blockquote>
<p>of course.</p>



<a name="191936409"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/191936409" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#191936409">(Mar 26 2020 at 19:25)</a>:</h4>
<p>in fact, I've never once actually nominated ig.ini in the parameter. I only ever run it pointing at the folder itself</p>



<a name="191936447"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/191936447" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#191936447">(Mar 26 2020 at 19:25)</a>:</h4>
<p>For everyone here, be aware that this SUSHI/Publisher integration was conceived and implemented all in less than 24 hours -- so this initial implementation isn't a fully fleshed out beautiful design.  It's an approach to get something working - and quickly.</p>



<a name="191936463"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/191936463" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#191936463">(Mar 26 2020 at 19:25)</a>:</h4>
<p>we can change the _genonce.bat to point to <code>./fsh/ig-data/ig.ini</code>instead of <code>./ig.ini</code>, but is that a good idea?</p>



<a name="191936534"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/191936534" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#191936534">(Mar 26 2020 at 19:26)</a>:</h4>
<p>yes that won't work</p>



<a name="191936568"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/191936568" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#191936568">(Mar 26 2020 at 19:26)</a>:</h4>
<p><span class="user-mention" data-user-id="191832">@Jose Costa Teixeira</span> -- I don't think that would work.  I tried it.  It then skips running SUSHI and fails to find the IG JSON.</p>



<a name="191937053"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/191937053" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#191937053">(Mar 26 2020 at 19:28)</a>:</h4>
<p>right because that one is the input for sushi, not the output...</p>



<a name="191937284"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/191937284" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#191937284">(Mar 26 2020 at 19:30)</a>:</h4>
<p>so what is the solution? i did not understand if there is one (short-term, even)</p>



<a name="191937400"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/191937400" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#191937400">(Mar 26 2020 at 19:31)</a>:</h4>
<p>run sushi directly and then run the publisher:<br>
(from your build directory: sushi .. -o ../build; ./_genonce.sh  )</p>



<a name="191937421"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/191937421" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#191937421">(Mar 26 2020 at 19:31)</a>:</h4>
<p>I don't know.  <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> -- I didn't fully comprehend your response.  Is it possible to run the publisher based on the <code>ig.ini</code> that is in root _after_ SUSHI is run?</p>



<a name="191937437"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/191937437" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#191937437">(Mar 26 2020 at 19:31)</a>:</h4>
<p>on the one hand, the _genonce does pass the ig.ini as a parameter (but that can be removed)</p>



<a name="191937566"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/191937566" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#191937566">(Mar 26 2020 at 19:32)</a>:</h4>
<p>I'm going to make it work when you name the ig.ini whether or not it exists when you run</p>



<a name="191937640"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/191937640" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#191937640">(Mar 26 2020 at 19:33)</a>:</h4>
<p>good, no changes to _genonce :)</p>



<a name="191937657"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/191937657" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#191937657">(Mar 26 2020 at 19:33)</a>:</h4>
<p><span class="user-mention" data-user-id="191832">@Jose Costa Teixeira</span> -- I'm thinking that maybe in this scenario, IGs should provide their own <code>_updatePublisher</code> and <code>_genonce</code>/<code>_gencontinuous</code> scripts -- since they need to be there before SUSHI gets run -- and then have SUSHI <em>not</em> overwrite them.  We're going to work on a mode in SUSHI that handles this integration better.</p>



<a name="191937751"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/191937751" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#191937751">(Mar 26 2020 at 19:34)</a>:</h4>
<p>the base IG does come with those scripts</p>



<a name="191938021"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/191938021" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#191938021">(Mar 26 2020 at 19:36)</a>:</h4>
<p>you choose: make sushi NOT overwrite them, or get them from ./template/launch (although that folder will not exist until you run the publisher...)</p>



<a name="191938043"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/191938043" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#191938043">(Mar 26 2020 at 19:37)</a>:</h4>
<p>as you find best</p>



<a name="191938714"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/191938714" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#191938714">(Mar 26 2020 at 19:44)</a>:</h4>
<p>so I am trying to release this, but Maven is giving me an error I don't have a clue what it means</p>



<a name="191940940"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/191940940" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#191940940">(Mar 26 2020 at 20:01)</a>:</h4>
<p>Maven is down: <a href="https://status.maven.org/?utm_source=embed" title="https://status.maven.org/?utm_source=embed">https://status.maven.org/?utm_source=embed</a></p>



<a name="191940988"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/191940988" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#191940988">(Mar 26 2020 at 20:01)</a>:</h4>
<p>That'll do it.</p>



<a name="191941046"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/191941046" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#191941046">(Mar 26 2020 at 20:02)</a>:</h4>
<p>I can't release until it's back up</p>



<a name="191950263"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/191950263" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#191950263">(Mar 26 2020 at 21:16)</a>:</h4>
<p><a href="/user_uploads/10155/axWegnBk8OAE1jIsDA82RiBC/image.png" title="image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/10155/axWegnBk8OAE1jIsDA82RiBC/image.png" title="image.png"><img src="/user_uploads/10155/axWegnBk8OAE1jIsDA82RiBC/image.png"></a></div>



<a name="191954235"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/191954235" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#191954235">(Mar 26 2020 at 21:57)</a>:</h4>
<p>build is nearly finished. I was watching another page which is still not reporting all systems go</p>



<a name="191955703"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/191955703" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#191955703">(Mar 26 2020 at 22:13)</a>:</h4>
<p>released</p>



<a name="191967342"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/191967342" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Kramer <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#191967342">(Mar 27 2020 at 00:56)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> that didn't do it. On line 1204 you create the full path to the fsh directory, call it <code>fsh</code> and on line 1206 you call <code>runFsh(fsh)</code>.  On line 1265 set the working directory to the fsh directory, and then on line 1271/73 you call sushi pointing it at the /fsh subdirectory of the /fsh directory, which doesn't exist.  You're one layer too low.  When you run SUSHI, your working directory should be the directory superior to /fsh.</p>



<a name="191967398"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/191967398" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#191967398">(Mar 27 2020 at 00:57)</a>:</h4>
<p>beats me how it worked when I was testing then</p>



<a name="191967507"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/191967507" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#191967507">(Mar 27 2020 at 00:59)</a>:</h4>
<p>oh I know. I didn't wait for Sushi to finish. :-(</p>



<a name="191967628"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/191967628" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#191967628">(Mar 27 2020 at 01:01)</a>:</h4>
<p>nor did I read the output.</p>



<a name="191967629"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/191967629" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#191967629">(Mar 27 2020 at 01:01)</a>:</h4>
<p>grrr</p>



<a name="191967754"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/191967754" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Kramer <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#191967754">(Mar 27 2020 at 01:03)</a>:</h4>
<p>Well, you did succeed in getting me to read some code <span aria-label="flushed" class="emoji emoji-1f633" role="img" title="flushed">:flushed:</span></p>



<a name="192059392"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/192059392" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Kramer <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#192059392">(Mar 27 2020 at 18:20)</a>:</h4>
<p>Anyone tracking this conversation, it is still a no-go. Wait for 1.0.75 or higher... stay tuned.</p>



<a name="192059557"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/192059557" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#192059557">(Mar 27 2020 at 18:21)</a>:</h4>
<p>coming.. about 90 min, I guess</p>



<a name="192075287"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/192075287" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Kramer <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#192075287">(Mar 27 2020 at 20:26)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span>  I downloaded 1.0.75 and tried it out. I can't figure out how to make it work. Is this the directory structure the tool is expecting? <a href="/user_uploads/10155/Kc-m-4mZYsILic_FIyp_lX4z/image.png" title="image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/10155/Kc-m-4mZYsILic_FIyp_lX4z/image.png" title="image.png"><img src="/user_uploads/10155/Kc-m-4mZYsILic_FIyp_lX4z/image.png"></a></div>



<a name="192075338"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/192075338" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#192075338">(Mar 27 2020 at 20:27)</a>:</h4>
<p>yes</p>



<a name="192075367"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/192075367" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Kramer <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#192075367">(Mar 27 2020 at 20:27)</a>:</h4>
<p>Then what am I doing wrong? What command should I be running?</p>



<a name="192075370"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/192075370" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#192075370">(Mar 27 2020 at 20:27)</a>:</h4>
<p>I'm running it on the example that <span class="user-mention" data-user-id="191469">@Chris Moesel</span> sent me.</p>



<a name="192075502"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/192075502" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Kramer <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#192075502">(Mar 27 2020 at 20:28)</a>:</h4>
<p>Without the -ig ig.ini, I'm getting this error:</p>
<div class="codehilite"><pre><span></span>C:\Users\mkramer\Documents\GitHub\fsh-icare&gt;JAVA -jar input-cache/org.hl7.fhir.publisher.jar .
Picked up JAVA_TOOL_OPTIONS: -Dfile.encoding=UTF-8
FHIR IG Publisher Version 1.0.74-SNAPSHOT (Git# 5097ab9a8b1e). Built 2020-03-27T08:50:02.373+11:00 (22 hours old)
Detected Java version: 1.8.0_241 from C:\Program Files\Java\jre1.8.0_241 on amd64 (64bit). 3600MB available
Parameters: .
dir = C:\Users\mkramer\Documents\GitHub\fsh-icare, path = C:\Program Files (x86)\Common Files\Oracle\Java\javapath;C:\Oracle\product64\12.1.0\client_1\bin;C:\Oracle\product\12.1.0\client_1\bin;C:\WINDOWS\system32;C:\WINDOWS;C:\WINDOWS\System32\Wbem;C:\WINDOWS\System32\WindowsPowerShell\v1.0\;c:\Matlab2019a\runtime\win64;c:\Matlab2019a\bin;C:\Program Files (x86)\Yarn\bin\;C:\WINDOWS\System32\OpenSSH\;C:\Program Files\nodejs\;C:\Program Files\Git\cmd;C:\Users\mkramer\AppData\Local\Programs\Python\Python37\Scripts\;C:\Users\mkramer\AppData\Local\Programs\Python\Python37\;C:\Ruby24-x64\bin;C:\Users\mkramer\AppData\Local\Microsoft\WindowsApps;C:\Users\mkramer\AppData\Local\GitHubDesktop\bin;C:\Users\mkramer\AppData\Roaming\npm;C:\Users\mkramer\AppData\Local\Programs\Microsoft VS Code\bin;C:\Users\mkramer\AppData\Local\Yarn\bin;%USERPROFILE%\AppData\Local\Microsoft\WindowsApps;
Run time = Friday, March 27, 2020 4:24:51 PM EDT (2020-03-27T16:24:51-04:00)
Package Cache: C:\Users\mkramer\.fhir\packages                                   (00:00.0017)
Sushi: error Invalid path to FSH definition folder.                              (00:02.0046)
Sushi: Usage: sushi &lt;path-to-fsh-defs&gt; [options]                                 (00:02.0047)
Sushi:                                                                           (00:02.0049)
Sushi: Options:                                                                  (00:02.0053)
Sushi: -o, --out &lt;out&gt;  the path to the output folder (default: &quot;build&quot;)         (00:02.0053)
Sushi: -d, --debug      output extra debugging information                       (00:02.0054)
Sushi: -s, --snapshot   generate snapshot in Structure Definition output (default: (00:02.0055)
Sushi: false)                                                                    (00:02.0059)
Sushi: -v, --version    print SUSHI version                                      (00:02.0059)
Sushi: -h, --help       output usage information                                 (00:02.0069)
Exception in thread &quot;main&quot; java.lang.Error: Case mismatch of file .: found fsh-icare
        at org.hl7.fhir.utilities.CSFile.&lt;init&gt;(CSFile.java:87)
        at org.hl7.fhir.igtools.publisher.Publisher.checkNewIg(Publisher.java:1309)
        at org.hl7.fhir.igtools.publisher.Publisher.initialize(Publisher.java:1208)
        at org.hl7.fhir.igtools.publisher.Publisher.execute(Publisher.java:662)
        at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:7004)
</pre></div>



<a name="192075510"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/192075510" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#192075510">(Mar 27 2020 at 20:28)</a>:</h4>
<p>one of:</p>
<ul>
<li>java [validator.jar] -ig [full-folder-name]</li>
<li>java [validator.jar] -ig [full-folder-name]/ig.ini</li>
<li>java [validator.jar] -ig .</li>
<li>java [validator.jar] -ig ./ig.ini</li>
</ul>
<p>where the current directory is the folder containing the IG for the second 2 commands</p>



<a name="192075548"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/192075548" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Kramer <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#192075548">(Mar 27 2020 at 20:29)</a>:</h4>
<p>SH*T. why didn't it download the new publisher?</p>



<a name="192075686"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/192075686" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#192075686">(Mar 27 2020 at 20:30)</a>:</h4>
<blockquote>
<p>I'm running it on the example that @Chris Moesel sent me.</p>
</blockquote>
<p>For reference, the file I sent is way over here: <a href="#narrow/stream/226195-Covid-19-Response/topic/The.20SANER.20Project/near/191677658" title="#narrow/stream/226195-Covid-19-Response/topic/The.20SANER.20Project/near/191677658">https://chat.fhir.org/#narrow/stream/226195-Covid-19-Response/topic/The.20SANER.20Project/near/191677658</a></p>



<a name="192075761"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/192075761" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Kramer <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#192075761">(Mar 27 2020 at 20:31)</a>:</h4>
<p>Somehow although I ran _updatePublisher, it didn't update. This entire conversation might be a red herring.</p>



<a name="192076211"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/192076211" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#192076211">(Mar 27 2020 at 20:35)</a>:</h4>
<p>looks like it is to me</p>



<a name="192076422"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/192076422" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#192076422">(Mar 27 2020 at 20:37)</a>:</h4>
<p>it is calling sushi correctly</p>



<a name="192076443"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/192076443" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#192076443">(Mar 27 2020 at 20:37)</a>:</h4>
<p>i do get this message but it continues<br>
Sushi has failed - no errors count in the output. Complete output from running Sushi :  (00:02.0251)</p>



<a name="192076781"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/192076781" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Kramer <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#192076781">(Mar 27 2020 at 20:40)</a>:</h4>
<p>WORKED!</p>



<a name="192076820"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/192076820" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#192076820">(Mar 27 2020 at 20:40)</a>:</h4>
<p><span class="user-mention" data-user-id="191832">@Jose Costa Teixeira</span> what is the output please</p>



<a name="192076915"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/192076915" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#192076915">(Mar 27 2020 at 20:41)</a>:</h4>
<p>my output is still pending an issue with the baseUrl that i am trying to fix (i used my own fsh files which may be incomplete)</p>



<a name="192076950"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/192076950" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#192076950">(Mar 27 2020 at 20:42)</a>:</h4>
<p>so actually my publisher fails, but it is the same error I had before.</p>



<a name="192077813"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/192077813" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#192077813">(Mar 27 2020 at 20:49)</a>:</h4>
<p>full output, working with another fish tank:</p>



<a name="192078262"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/192078262" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#192078262">(Mar 27 2020 at 20:52)</a>:</h4>
<div class="codehilite"><pre><span></span>C:\ImplementationGuides\be-on-sushi&gt;JAVA -jar input-cache/org.hl7.fhir.publisher.jar -ig ig.ini
Picked up JAVA_TOOL_OPTIONS: -Dfile.encoding=UTF-8
FHIR IG Publisher Version 1.0.75-SNAPSHOT (Git# 3c0b2e71171e). Built 2020-03-28T07:12:58.718+11:00 (32 mins old)
Detected Java version: 1.8.0_231 from C:\Program Files\Java\jre1.8.0_231 on amd64 (64bit). 3616MB available
Parameters: -ig ig.ini
dir = C:\ImplementationGuides\be-on-sushi, path = ..................
Run time = Sexta-feira, 27 de Março de 2020 21H45m CET (2020-03-27T21:45:41+01:00)
Package Cache: C:\Users\Jose\.fhir\packages                                      (00:00.0014)
Run Sushi on C:\ImplementationGuides\be-on-sushi                                 (00:00.0016)
Sushi: info  Checking local cache for hl7.fhir.r4.core#4.0.1...                  (00:00.0921)
Sushi: info  Found hl7.fhir.r4.core#4.0.1 in local cache.                        (00:01.0753)
Sushi: info  Checking local cache for hl7.fhir.us.core#3.1.0...                  (00:01.0754)
Sushi: info  Found hl7.fhir.us.core#3.1.0 in local cache.                        (00:01.0941)
Sushi: info  Importing FSH text...                                               (00:01.0942)
Sushi: info  Preprocessed 2 documents with 3 aliases.                            (00:02.0043)
Sushi: info  Imported 4 definitions and 1 instances.                             (00:02.0051)
Sushi: info  Loaded package hl7.fhir.r4.core#4.0.1                               (00:02.0052)
Sushi: info  Loaded package hl7.fhir.us.core#3.1.0                               (00:02.0054)
Sushi: info  Converting FSH to FHIR resources...                                 (00:02.0054)
Sushi: info  Converted 3 FHIR StructureDefinitions.                              (00:02.0146)
Sushi: info  Converted 1 FHIR ValueSets.                                         (00:02.0152)
Sushi: info  Converted 1 FHIR instances.                                         (00:02.0190)
Sushi: info  Exporting FHIR resources as JSON...                                 (00:02.0193)
Sushi: info  Exported 5 FHIR resources as JSON.                                  (00:02.0218)
Sushi: info  Assembling Implementation Guide sources...                          (00:02.0219)
Sushi: info  Generated default index.md.                                         (00:02.0239)
Sushi: info  Generated default ig.ini.                                           (00:02.0242)
Sushi: info  Generated default package-list.json                                 (00:02.0243)
Sushi: info  Generated ImplementationGuide-fish.json                             (00:02.0245)
Sushi: info  Assembled Implementation Guide sources; ready for IG Publisher.     (00:02.0245)
Sushi: info                                                                      (00:02.0246)
Sushi: Profiles:    2                                                            (00:02.0251)
Sushi: Extensions:  1                                                            (00:02.0251)
Sushi: Instances:   1                                                            (00:02.0256)
Sushi: ValueSets:   1                                                            (00:02.0257)
Sushi: CodeSystems: 0                                                            (00:02.0257)
Sushi: Errors:      0                                                            (00:02.0257)
Sushi: Warnings:    0                                                            (00:02.0258)
Sushi has failed - no errors count in the output. Complete output from running Sushi :  (00:02.0272)
Load Template from fhir.base.template                                            (00:03.0246)
Installing fhir.base.template#current to the package cache
  Fetching:.
  Installing: . done.

onLoad.findSpreadsheets:

onLoad.updateIg:
     [xslt] Processing C:\ImplementationGuides\be-on-sushi\template\onLoad-ig-working.xml to C:\ImplementationGuides\be-on-sushi\template\onLoad-ig-updated.xml
     [xslt] Loading stylesheet C:\ImplementationGuides\be-on-sushi\template\scripts\onLoad.xslt

onLoad.extend:

onLoad:
Root directory: C:\ImplementationGuides\be-on-sushi                              (00:10.0480)
Core Package hl7.fhir.r4.core#4.0.1
Terminology Cache is at C:\ImplementationGuides\be-on-sushi\input-cache\txcache. 2 files in cache (00:20.0093)
Connect to Terminology Server at http://tx.fhir.org                              (00:20.0101)
Load Package hl7.fhir.pubpack#0.0.3
Load Package hl7.fhir.xver-extensions#0.0.1
Dependency &#39;hl7.fhir.us.core&#39; has no id, so can&#39;t be referred to in markdown in the IG (00:21.0481)
Initialization complete                                                          (00:23.0575)
Load Content                                                                     (00:23.0576)
Processing Conformance Resources                                                 (00:23.0674)
Terminology server: Check for supported code systems for http://hl7.org/fhir/sid/ca-hc-npn (00:24.0090)
Generating Narratives                                                            (00:25.0766)
Validating Resources                                                             (00:25.0766)
Generating Outputs in C:\ImplementationGuides\be-on-sushi\output                 (00:26.0933)

onGenerate.checkVersions:
     [xslt] Processing C:\ImplementationGuides\be-on-sushi\template\onGenerate-ig-working.xml to C:\ImplementationGuides\be-on-sushi\template\versions.txt
     [xslt] Loading stylesheet C:\ImplementationGuides\be-on-sushi\template\scripts\onGenerate.getVersions.xslt
    [mkdir] Created dir: C:\ImplementationGuides\be-on-sushi\input-cache\schemas

onGenerate.r5-schemas:
    [mkdir] Created dir: C:\ImplementationGuides\be-on-sushi\input-cache\schemas\R5
      [get] Getting: http://build.fhir.org/fhir-single.xsd
      [get] To: C:\ImplementationGuides\be-on-sushi\input-cache\schemas\R5\fhir-single.xsd
      [get] Getting: http://build.fhir.org/fhir-xhtml.xsd
      [get] To: C:\ImplementationGuides\be-on-sushi\input-cache\schemas\R5\fhir-xhtml.xsd
      [get] Getting: http://build.fhir.org/xml.xsd
      [get] To: C:\ImplementationGuides\be-on-sushi\input-cache\schemas\R5\xml.xsd
      [get] Getting: http://build.fhir.org/xmldsig-core-schema.xsd
      [get] To: C:\ImplementationGuides\be-on-sushi\input-cache\schemas\R5\xmldsig-core-schema.xsd

onGenerate.r4-schemas:
    [mkdir] Created dir: C:\ImplementationGuides\be-on-sushi\input-cache\schemas\R4
      [get] Getting: http://hl7.org/fhir/R4/fhir-single.xsd
      [get] To: C:\ImplementationGuides\be-on-sushi\input-cache\schemas\R4\fhir-single.xsd
      [get] Getting: http://hl7.org/fhir/R4/fhir-xhtml.xsd
      [get] To: C:\ImplementationGuides\be-on-sushi\input-cache\schemas\R4\fhir-xhtml.xsd
      [get] Getting: http://hl7.org/fhir/R4/xml.xsd
      [get] To: C:\ImplementationGuides\be-on-sushi\input-cache\schemas\R4\xml.xsd
      [get] Getting: http://hl7.org/fhir/R4/xmldsig-core-schema.xsd
      [get] To: C:\ImplementationGuides\be-on-sushi\input-cache\schemas\R4\xmldsig-core-schema.xsd

onGenerate.r3-schemas:

onGenerate.r2b-schemas:

onGenerate.r2-schemas:

onGenerate.schemas:

onGenerate.setup:

onGenerate.infoFile:
     [xslt] Processing C:\ImplementationGuides\be-on-sushi\template\onGenerate-ig-working.xml to C:\ImplementationGuides\be-on-sushi\temp\pages\_data\info.json
     [xslt] Loading stylesheet C:\ImplementationGuides\be-on-sushi\template\scripts\onGenerate.genJson.xslt

onGenerate.processIncludes:
     [copy] Copying 7 files to C:\ImplementationGuides\be-on-sushi\temp\pages\_includes

onGenerate.processIg:
     [xslt] Processing C:\ImplementationGuides\be-on-sushi\template\onGenerate-ig-working.xml to C:\ImplementationGuides\be-on-sushi\template\onGenerate-ig-working.1.xml
     [xslt] Loading stylesheet C:\ImplementationGuides\be-on-sushi\template\scripts\onGenerate.group.xslt
     [xslt] Processing C:\ImplementationGuides\be-on-sushi\template\onGenerate-ig-working.1.xml to C:\ImplementationGuides\be-on-sushi\template\onGenerate-ig-updated.xml
     [xslt] Loading stylesheet C:\ImplementationGuides\be-on-sushi\template\scripts\onGenerate.final.xslt

onGenerate.artifactList:
     [xslt] Processing C:\ImplementationGuides\be-on-sushi\template\onGenerate-ig-updated.xml to C:\ImplementationGuides\be-on-sushi\temp\pages\_includes\artifacts.xml
     [xslt] Loading stylesheet C:\ImplementationGuides\be-on-sushi\template\scripts\createArtifactSummary.xslt

onGenerate.igQa:
     [xslt] Processing C:\ImplementationGuides\be-on-sushi\template\onGenerate-ig-updated.xml to C:\ImplementationGuides\be-on-sushi\template\ongenerate-validation-igqa.json
     [xslt] Loading stylesheet C:\ImplementationGuides\be-on-sushi\template\scripts\onGenerate.qa.xslt

onGenerate.extend:

onGenerate:
Generating Summary Outputs                                                       (01:25.0168)
Sending Usage Stats to Server                                                    (01:31.0406)
Jekyll: Source: C:/ImplementationGuides/be-on-sushi/temp/pages                   (01:45.0746)
Jekyll: Generating...                                                            (01:45.0747)
Jekyll: done in 3.389 seconds.                                                   (01:49.0136)
Installing fish#dev to the package cache
  Fetching:
  Installing:  done.
Checking Output HTML                                                             (01:49.0774)
found 434 files                                                                  (01:49.0897)
  ... 434 html files, 0 pages invalid xhtml (0%)                                 (01:53.0265)
  ... 31907 links, 37 broken links (0%)                                          (01:53.0267)
Build final .zip                                                                 (01:53.0268)
Final .zip built                                                                 (01:53.0913)
context [anonymous] 2:13 attribute path isn&#39;t defined
Finished. 01:30.0241. Validation output in C:\Implementat
</pre></div>



<a name="192078568"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/192078568" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Kramer <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#192078568">(Mar 27 2020 at 20:54)</a>:</h4>
<p>I am getting this error <code>Sushi has failed - no errors count in the output. Complete output from running Sushi :  (00:03.0561)</code> although the publisher continues.  It only works when <code>ig.ini</code> is in the top-level directory prior to running Sushi, and the command uses <code>-ig ig.ini</code>.</p>



<a name="192079074"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/192079074" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Kramer <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#192079074">(Mar 27 2020 at 20:57)</a>:</h4>
<p>When I run it without the <code>ig.ini</code> file at the top level, omitting the <code>-ig ig.ini</code> from the command, it crashes with this error: </p>
<div class="codehilite"><pre><span></span>Sushi has failed - no errors count in the output. Complete output from running Sushi :  (00:04.0018)
Exception in thread &quot;main&quot; java.lang.Error: Case mismatch of file .: found fsh-icare
        at org.hl7.fhir.utilities.CSFile.&lt;init&gt;(CSFile.java:87)
        at org.hl7.fhir.igtools.publisher.Publisher.checkNewIg(Publisher.java:1319)
        at org.hl7.fhir.igtools.publisher.Publisher.initialize(Publisher.java:1208)
        at org.hl7.fhir.igtools.publisher.Publisher.execute(Publisher.java:662)
        at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:7018)
</pre></div>



<a name="192079658"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/192079658" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Kramer <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#192079658">(Mar 27 2020 at 21:01)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> It is possible to do pre-testing on a branch instead of publishing to the general population?</p>



<a name="192080315"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/192080315" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#192080315">(Mar 27 2020 at 21:06)</a>:</h4>
<p>minor annoyance (?): sushi still needs the ig-data folder. <br>
In this case, since sushi is being called by the IG Publisher, it assume we're talking about an IG, right?</p>



<a name="192080401"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/192080401" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#192080401">(Mar 27 2020 at 21:07)</a>:</h4>
<p><span class="user-mention" data-user-id="191832">@Jose Costa Teixeira</span> I don't have a clue that what means</p>



<a name="192080437"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/192080437" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#192080437">(Mar 27 2020 at 21:07)</a>:</h4>
<p>publisher is fine.</p>



<a name="192080472"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/192080472" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#192080472">(Mar 27 2020 at 21:07)</a>:</h4>
<p>it's about sushi</p>



<a name="192080481"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/192080481" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#192080481">(Mar 27 2020 at 21:08)</a>:</h4>
<p><span class="user-mention" data-user-id="191447">@Mark Kramer</span> I don't see how a branch would make any difference, and my life is already unsupportably complex</p>



<a name="192080549"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/192080549" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#192080549">(Mar 27 2020 at 21:08)</a>:</h4>
<p>sushi has ig mode and not-ig mode. the difference is the existence of an fsh/ig-data folder</p>



<a name="192080556"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/192080556" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#192080556">(Mar 27 2020 at 21:08)</a>:</h4>
<p>I certainly don't understand the error you're getting - can you put the full output in</p>



<a name="192080588"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/192080588" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Kramer <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#192080588">(Mar 27 2020 at 21:08)</a>:</h4>
<p><span class="user-mention" data-user-id="191832">@Jose Costa Teixeira</span> Partly that will change. SUSHI will have a config file that will produce all the needed config for the IG (ig.ini, package.json, package-list.json)</p>



<a name="192080646"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/192080646" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Kramer <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#192080646">(Mar 27 2020 at 21:09)</a>:</h4>
<p>But no other planned changes to ig-data.</p>



<a name="192080853"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/192080853" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#192080853">(Mar 27 2020 at 21:10)</a>:</h4>
<p>well I am actually suggesting to do: <br>
ig_mode= exists(ig-data) OR (being_called_by_publisher_somehow)</p>



<a name="192080995"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/192080995" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Kramer <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#192080995">(Mar 27 2020 at 21:11)</a>:</h4>
<p><span class="user-mention" data-user-id="191832">@Jose Costa Teixeira</span> let's leave that alone for now. The main problem is getting the IGP to run reliably with SUSHI as it currently stands.</p>



<a name="192081003"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/192081003" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#192081003">(Mar 27 2020 at 21:11)</a>:</h4>
<p>and about config files, I hope we have a common approach so that tools don't conflict or we have to adapt too much <br>
(for example the fact that sushi needs an ig-data folder)</p>



<a name="192081020"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/192081020" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#192081020">(Mar 27 2020 at 21:11)</a>:</h4>
<p>what is missing?</p>



<a name="192081409"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/192081409" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#192081409">(Mar 27 2020 at 21:15)</a>:</h4>
<p>I'm waiting for Mark to post his full log so I can have a clue</p>



<a name="192081851"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/192081851" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#192081851">(Mar 27 2020 at 21:19)</a>:</h4>
<p>ok, since it works here I am frying smaller fish now.</p>



<a name="192081895"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/192081895" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Kramer <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#192081895">(Mar 27 2020 at 21:19)</a>:</h4>
<p>Ok, scenaro #1 is where there is no ig.ini at the top level:</p>
<div class="codehilite"><pre><span></span>JAVA -jar input-cache/org.hl7.fhir.publisher.jar .
Picked up JAVA_TOOL_OPTIONS: -Dfile.encoding=UTF-8
FHIR IG Publisher Version 1.0.75-SNAPSHOT (Git# 3c0b2e71171e). Built 2020-03-28T07:12:58.718+11:00 (42 mins old)
Detected Java version: 1.8.0_241 from C:\Program Files\Java\jre1.8.0_241 on amd64 (64bit). 3600MB available
Parameters: .
dir = C:\Users\mkramer\Documents\GitHub\fsh-icare, path = C:\Program Files (x86)\Common Files\Oracle\Java\javapath;C:\Oracle\product64\12.1.0\client_1\bin;C:\Oracle\product\12.1.0\client_1\bin;C:\WINDOWS\system32;C:\WINDOWS;C:\WINDOWS\System32\Wbem;C:\WINDOWS\System32\WindowsPowerShell\v1.0\;c:\Matlab2019a\runtime\win64;c:\Matlab2019a\bin;C:\Program Files (x86)\Yarn\bin\;C:\WINDOWS\System32\OpenSSH\;C:\Program Files\nodejs\;C:\Program Files\Git\cmd;C:\Users\mkramer\AppData\Local\Programs\Python\Python37\Scripts\;C:\Users\mkramer\AppData\Local\Programs\Python\Python37\;C:\Ruby24-x64\bin;C:\Users\mkramer\AppData\Local\Microsoft\WindowsApps;C:\Users\mkramer\AppData\Local\GitHubDesktop\bin;C:\Users\mkramer\AppData\Roaming\npm;C:\Users\mkramer\AppData\Local\Programs\Microsoft VS Code\bin;C:\Users\mkramer\AppData\Local\Yarn\bin;%USERPROFILE%\AppData\Local\Microsoft\WindowsApps;
Run time = Friday, March 27, 2020 4:55:44 PM EDT (2020-03-27T16:55:44-04:00)
Package Cache: C:\Users\mkramer\.fhir\packages                                   (00:00.0014)
Run Sushi on C:\Users\mkramer\Documents\GitHub\fsh-icare\.                       (00:00.0014)
Sushi: info  Checking local cache for hl7.fhir.r4.core#4.0.1...                  (00:02.0206)
Sushi: info  Found hl7.fhir.r4.core#4.0.1 in local cache.                        (00:03.0572)
Sushi: info  Importing FSH text...                                               (00:03.0573)
Sushi: info  Preprocessed 1 documents with 1 aliases.                            (00:03.0677)
Sushi: info  Imported 3 definitions and 0 instances.                             (00:03.0682)
Sushi: info  Loaded package hl7.fhir.r4.core#4.0.1                               (00:03.0684)
Sushi: info  Converting FSH to FHIR resources...                                 (00:03.0684)
Sushi: info  Converted 2 FHIR StructureDefinitions.                              (00:03.0756)
Sushi: info  Converted 1 FHIR ValueSets.                                         (00:03.0770)
Sushi: info  Exporting FHIR resources as JSON...                                 (00:03.0781)
Sushi: info  Exported 3 FHIR resources as JSON.                                  (00:03.0825)
Sushi: info  Assembling Implementation Guide sources...                          (00:03.0825)
Sushi: info  Copied ig-data/input/pagecontent/index.md                           (00:03.0916)
Sushi: info  Generated default ig.ini.                                           (00:03.0956)
Sushi: info  Copied ig-data/package-list.json.                                   (00:03.0964)
Sushi: info  Generated ImplementationGuide-icare.json                            (00:03.0970)
Sushi: info  Assembled Implementation Guide sources; ready for IG Publisher.     (00:03.0971)
Sushi: info                                                                      (00:03.0971)
Sushi: Profiles:    1                                                            (00:03.0982)
Sushi: Extensions:  1                                                            (00:03.0983)
Sushi: Instances:   0                                                            (00:03.0994)
Sushi: ValueSets:   1                                                            (00:03.0994)
Sushi: CodeSystems: 0                                                            (00:04.0006)
Sushi: Errors:      0                                                            (00:04.0007)
Sushi: Warnings:    0                                                            (00:04.0017)
Sushi has failed - no errors count in the output. Complete output from running Sushi :  (00:04.0018)
Exception in thread &quot;main&quot; java.lang.Error: Case mismatch of file .: found fsh-icare
        at org.hl7.fhir.utilities.CSFile.&lt;init&gt;(CSFile.java:87)
        at org.hl7.fhir.igtools.publisher.Publisher.checkNewIg(Publisher.java:1319)
        at org.hl7.fhir.igtools.publisher.Publisher.initialize(Publisher.java:1208)
        at org.hl7.fhir.igtools.publisher.Publisher.execute(Publisher.java:662)
        at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:7018)
</pre></div>



<a name="192082027"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/192082027" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#192082027">(Mar 27 2020 at 21:21)</a>:</h4>
<p>2nd issue: <br>
my ./ig.ini says <code>template=xxxx, </code> but something changes it back to <code>template = fhir.base.template</code></p>



<a name="192082156"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/192082156" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#192082156">(Mar 27 2020 at 21:22)</a>:</h4>
<p>looking at the code, I'm pretty sure that running the IG publisher with the parameter of just <code>.</code> has never worked</p>



<a name="192082195"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/192082195" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Kramer <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#192082195">(Mar 27 2020 at 21:22)</a>:</h4>
<p>Scenario #2 is where the ig.ini is at the top level and the run command includes <code>-ig ig.ini</code> (successful run, with what looks like one extraneous message):</p>
<div class="codehilite"><pre><span></span>JAVA -jar input-cache/org.hl7.fhir.publisher.jar -ig ig.ini
Picked up JAVA_TOOL_OPTIONS: -Dfile.encoding=UTF-8
FHIR IG Publisher Version 1.0.75-SNAPSHOT (Git# 3c0b2e71171e). Built 2020-03-28T07:12:58.718+11:00 (40 mins old)
Detected Java version: 1.8.0_241 from C:\Program Files\Java\jre1.8.0_241 on amd64 (64bit). 3600MB available
Parameters: -ig ig.ini
dir = C:\Users\mkramer\Documents\GitHub\fsh-icare, path = C:\Program Files (x86)\Common Files\Oracle\Java\javapath;C:\Oracle\product64\12.1.0\client_1\bin;C:\Oracle\product\12.1.0\client_1\bin;C:\WINDOWS\system32;C:\WINDOWS;C:\WINDOWS\System32\Wbem;C:\WINDOWS\System32\WindowsPowerShell\v1.0\;c:\Matlab2019a\runtime\win64;c:\Matlab2019a\bin;C:\Program Files (x86)\Yarn\bin\;C:\WINDOWS\System32\OpenSSH\;C:\Program Files\nodejs\;C:\Program Files\Git\cmd;C:\Users\mkramer\AppData\Local\Programs\Python\Python37\Scripts\;C:\Users\mkramer\AppData\Local\Programs\Python\Python37\;C:\Ruby24-x64\bin;C:\Users\mkramer\AppData\Local\Microsoft\WindowsApps;C:\Users\mkramer\AppData\Local\GitHubDesktop\bin;C:\Users\mkramer\AppData\Roaming\npm;C:\Users\mkramer\AppData\Local\Programs\Microsoft VS Code\bin;C:\Users\mkramer\AppData\Local\Yarn\bin;%USERPROFILE%\AppData\Local\Microsoft\WindowsApps;
Run time = Friday, March 27, 2020 4:53:11 PM EDT (2020-03-27T16:53:11-04:00)
Package Cache: C:\Users\mkramer\.fhir\packages                                   (00:00.0014)
Run Sushi on C:\Users\mkramer\Documents\GitHub\fsh-icare                         (00:00.0015)
Sushi: info  Checking local cache for hl7.fhir.r4.core#4.0.1...                  (00:01.0890)
Sushi: info  Found hl7.fhir.r4.core#4.0.1 in local cache.                        (00:03.0151)
Sushi: info  Importing FSH text...                                               (00:03.0152)
Sushi: info  Preprocessed 1 documents with 1 aliases.                            (00:03.0238)
Sushi: info  Imported 3 definitions and 0 instances.                             (00:03.0243)
Sushi: info  Loaded package hl7.fhir.r4.core#4.0.1                               (00:03.0243)
Sushi: info  Converting FSH to FHIR resources...                                 (00:03.0244)
Sushi: info  Converted 2 FHIR StructureDefinitions.                              (00:03.0311)
Sushi: info  Converted 1 FHIR ValueSets.                                         (00:03.0322)
Sushi: info  Exporting FHIR resources as JSON...                                 (00:03.0331)
Sushi: info  Exported 3 FHIR resources as JSON.                                  (00:03.0371)
Sushi: info  Assembling Implementation Guide sources...                          (00:03.0372)
Sushi: info  Copied ig-data/input/pagecontent/index.md                           (00:03.0454)
Sushi: info  Generated default ig.ini.                                           (00:03.0491)
Sushi: info  Copied ig-data/package-list.json.                                   (00:03.0500)
Sushi: info  Generated ImplementationGuide-icare.json                            (00:03.0506)
Sushi: info  Assembled Implementation Guide sources; ready for IG Publisher.     (00:03.0506)
Sushi: info                                                                      (00:03.0513)
Sushi: Profiles:    1                                                            (00:03.0514)
Sushi: Extensions:  1                                                            (00:03.0524)
Sushi: Instances:   0                                                            (00:03.0525)
Sushi: ValueSets:   1                                                            (00:03.0536)
Sushi: CodeSystems: 0                                                            (00:03.0536)
Sushi: Errors:      0                                                            (00:03.0548)
Sushi: Warnings:    0                                                            (00:03.0548)
Sushi has failed - no errors count in the output. Complete output from running Sushi :  (00:03.0561)
Load Template from fhir.base.template                                            (00:04.0709)
Error connecting to build server - running without build (sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target)

onLoad.findSpreadsheets:

onLoad.updateIg:
     [xslt] Processing C:\Users\mkramer\Documents\GitHub\fsh-icare\template\onLoad-ig-working.xml to C:\Users\mkramer\Documents\GitHub\fsh-icare\template\onLoad-ig-updated.xml
     [xslt] Loading stylesheet C:\Users\mkramer\Documents\GitHub\fsh-icare\template\scripts\onLoad.xslt

onLoad.extend:

onLoad:
Root directory: C:\Users\mkramer\Documents\GitHub\fsh-icare                      (00:08.0663)
Core Package hl7.fhir.r4.core#4.0.1
Terminology Cache is at C:\Users\mkramer\Documents\GitHub\fsh-icare\input-cache\txcache. 3 files in cache (00:19.0122)
Connect to Terminology Server at http://tx.fhir.org                              (00:19.0141)
Load Package hl7.fhir.pubpack#0.0.3
Load Package hl7.fhir.xver-extensions#0.0.1
Initialization complete                                                          (00:23.0207)
Load Content                                                                     (00:23.0208)
Processing Conformance Resources                                                 (00:23.0309)
Generating Narratives                                                            (00:23.0915)
Validating Resources                                                             (00:23.0915)
Generating Outputs in C:\Users\mkramer\Documents\GitHub\fsh-icare\output         (00:23.0919)

onGenerate.checkVersions:
     [xslt] Processing C:\Users\mkramer\Documents\GitHub\fsh-icare\template\onGenerate-ig-working.xml to C:\Users\mkramer\Documents\GitHub\fsh-icare\template\versions.txt
     [xslt] Loading stylesheet C:\Users\mkramer\Documents\GitHub\fsh-icare\template\scripts\onGenerate.getVersions.xslt

onGenerate.r5-schemas:
      [get] Getting: http://build.fhir.org/fhir-single.xsd
      [get] To: C:\Users\mkramer\Documents\GitHub\fsh-icare\input-cache\schemas\R5\fhir-single.xsd
      [get] Not modified - so not downloaded
      [get] Getting: http://build.fhir.org/fhir-xhtml.xsd
      [get] To: C:\Users\mkramer\Documents\GitHub\fsh-icare\input-cache\schemas\R5\fhir-xhtml.xsd
      [get] Not modified - so not downloaded
      [get] Getting: http://build.fhir.org/xml.xsd
      [get] To: C:\Users\mkramer\Documents\GitHub\fsh-icare\input-cache\schemas\R5\xml.xsd
      [get] Not modified - so not downloaded
      [get] Getting: http://build.fhir.org/xmldsig-core-schema.xsd
      [get] To: C:\Users\mkramer\Documents\GitHub\fsh-icare\input-cache\schemas\R5\xmldsig-core-schema.xsd
      [get] Not modified - so not downloaded

onGenerate.r4-schemas:
      [get] Getting: http://hl7.org/fhir/R4/fhir-single.xsd
      [get] To: C:\Users\mkramer\Documents\GitHub\fsh-icare\input-cache\schemas\R4\fhir-single.xsd
      [get] Not modified - so not downloaded
      [get] Getting: http://hl7.org/fhir/R4/fhir-xhtml.xsd
      [get] To: C:\Users\mkramer\Documents\GitHub\fsh-icare\input-cache\schemas\R4\fhir-xhtml.xsd
      [get] Not modified - so not downloaded
      [get] Getting: http://hl7.org/fhir/R4/xml.xsd
      [get] To: C:\Users\mkramer\Documents\GitHub\fsh-icare\input-cache\schemas\R4\xml.xsd
      [get] Not modified - so not downloaded
      [get] Getting: http://hl7.org/fhir/R4/xmldsig-core-schema.xsd
      [get] To: C:\Users\mkramer\Documents\GitHub\fsh-icare\input-cache\schemas\R4\xmldsig-core-schema.xsd
      [get] Not modified - so not downloaded

onGenerate.r3-schemas:

onGenerate.r2b-schemas:

onGenerate.r2-schemas:

onGenerate.schemas:

onGenerate.setup:

onGenerate.infoFile:
     [xslt] Processing C:\Users\mkramer\Documents\GitHub\fsh-icare\template\onGenerate-ig-working.xml to C:\Users\mkramer\Documents\GitHub\fsh-icare\temp\pages\_data\info.json
     [xslt] Loading stylesheet C:\Users\mkramer\Documents\GitHub\fsh-icare\template\scripts\onGenerate.genJson.xslt

onGenerate.processIncludes:
     [copy] Copying 7 files to C:\Users\mkramer\Documents\GitHub\fsh-icare\temp\pages\_includes

onGenerate.processIg:
     [xslt] Processing C:\Users\mkramer\Documents\GitHub\fsh-icare\template\onGenerate-ig-working.xml to C:\Users\mkramer\Documents\GitHub\fsh-icare\template\onGenerate-ig-working.1.xml
     [xslt] Loading stylesheet C:\Users\mkramer\Documents\GitHub\fsh-icare\template\scripts\onGenerate.group.xslt
     [xslt] Processing C:\Users\mkramer\Documents\GitHub\fsh-icare\template\onGenerate-ig-working.1.xml to C:\Users\mkramer\Documents\GitHub\fsh-icare\template\onGenerate-ig-updated.xml
     [xslt] Loading stylesheet C:\Users\mkramer\Documents\GitHub\fsh-icare\template\scripts\onGenerate.final.xslt

onGenerate.artifactList:
     [xslt] Processing C:\Users\mkramer\Documents\GitHub\fsh-icare\template\onGenerate-ig-updated.xml to C:\Users\mkramer\Documents\GitHub\fsh-icare\temp\pages\_includes\artifacts.xml
     [xslt] Loading stylesheet C:\Users\mkramer\Documents\GitHub\fsh-icare\template\scripts\createArtifactSummary.xslt

onGenerate.igQa:
     [xslt] Processing C:\Users\mkramer\Documents\GitHub\fsh-icare\template\onGenerate-ig-updated.xml to C:\Users\mkramer\Documents\GitHub\fsh-icare\template\ongenerate-validation-igqa.json
     [xslt] Loading stylesheet C:\Users\mkramer\Documents\GitHub\fsh-icare\template\scripts\onGenerate.qa.xslt

onGenerate.extend:

onGenerate:
Generating Summary Outputs                                                       (00:28.0469)
Sending Usage Stats to Server                                                    (01:04.0203)
Jekyll: Source: C:/Users/mkramer/Documents/GitHub/fsh-icare/temp/pages           (01:06.0097)
(truncated)
</pre></div>



<a name="192082241"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/192082241" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#192082241">(Mar 27 2020 at 21:23)</a>:</h4>
<p>I've fixed that extraneous message (next release)</p>



<a name="192082275"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/192082275" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#192082275">(Mar 27 2020 at 21:23)</a>:</h4>
<p>I have to run out for a couple of hours.. back later</p>



<a name="192082340"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/192082340" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#192082340">(Mar 27 2020 at 21:24)</a>:</h4>
<p>FWIW, this works well<br>
<a href="https://github.com/costateixeira/be-on-sushi" title="https://github.com/costateixeira/be-on-sushi">https://github.com/costateixeira/be-on-sushi</a></p>



<a name="192082552"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/192082552" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Kramer <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#192082552">(Mar 27 2020 at 21:26)</a>:</h4>
<p>ok, <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> when I change the command to <code>JAVA -jar input-cache/org.hl7.fhir.publisher.jar -ig .</code> it now runs without the <code>ig.ini</code> file.</p>



<a name="192082640"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/192082640" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Kramer <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#192082640">(Mar 27 2020 at 21:27)</a>:</h4>
<p>This message seems to always be present, even when SUSHI runs without problems:</p>
<div class="codehilite"><pre><span></span>Sushi has failed - no errors count in the output. Complete output from running Sushi :  (00:03.0618)
</pre></div>


<p>This is just a misleading message, no other impact.</p>



<a name="192082704"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/192082704" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#192082704">(Mar 27 2020 at 21:28)</a>:</h4>
<p>we need the ig.ini file to drive the publisher</p>



<a name="192082784"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/192082784" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Kramer <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#192082784">(Mar 27 2020 at 21:29)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191832">Jose Costa Teixeira</span> <a href="#narrow/stream/179252-IG-creation/topic/Sushi.20Support/near/192082027" title="#narrow/stream/179252-IG-creation/topic/Sushi.20Support/near/192082027">said</a>:</p>
<blockquote>
<p>2nd issue: <br>
my ./ig.ini says <code>template=xxxx, </code> but something changes it back to <code>template = fhir.base.template</code></p>
</blockquote>
<p>You might take that to the #sushi channel</p>



<a name="192082963"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/192082963" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#192082963">(Mar 27 2020 at 21:30)</a>:</h4>
<p>my ig.ini is from the publisher, I don't have it in sushi. so i guess this issue is from the integration.<br>
but yes, i will post there (you mean <a class="stream" data-stream-id="215610" href="/#narrow/stream/215610-shorthand">#shorthand</a> , right?)</p>



<a name="192082988"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/192082988" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#192082988">(Mar 27 2020 at 21:31)</a>:</h4>
<blockquote>
<p>This is just a misleading message, no other impact</p>
</blockquote>
<p>Yes fixed next release</p>



<a name="192083011"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/192083011" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Kramer <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#192083011">(Mar 27 2020 at 21:31)</a>:</h4>
<p>Yes, I meant the <a class="stream" data-stream-id="215610" href="/#narrow/stream/215610-shorthand">#shorthand</a>  channel</p>



<a name="192084318"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/192084318" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#192084318">(Mar 27 2020 at 21:47)</a>:</h4>
<p>I was there, came back. this seems about integration. <br>
Using the publisher without sushi, I change my ./ig.ini file with my template etc. Now sushi introduces a need for a second ig.ini under ./fsh/ig-data. <br>
I think this is an integration issue that should be aligned across tools.</p>



<a name="192087584"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/192087584" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Kramer <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#192087584">(Mar 27 2020 at 22:25)</a>:</h4>
<p><span class="user-mention" data-user-id="191832">@Jose Costa Teixeira</span>  If you can please file an issue, it will become part of our process and dealt with.</p>



<a name="192088341"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/192088341" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#192088341">(Mar 27 2020 at 22:34)</a>:</h4>
<p><span class="user-mention" data-user-id="191447">@Mark Kramer</span> my point : issue where? Jira? Sushi Github? I don't know if this is a sushi issue. It may be, but this needs to be designed across tools.</p>



<a name="192088381"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/192088381" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#192088381">(Mar 27 2020 at 22:34)</a>:</h4>
<p>But I think this is visible now and it will be fixed indeed.</p>



<a name="192088430"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/192088430" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#192088430">(Mar 27 2020 at 22:35)</a>:</h4>
<p>Congrats for this integration, it has a few things outstanding, but it is a great step</p>



<a name="192088838"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/192088838" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Kramer <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#192088838">(Mar 27 2020 at 22:40)</a>:</h4>
<p>Because it concerns the design of SUSHI, file it here: <a href="https://github.com/FHIR/sushi/issues" title="https://github.com/FHIR/sushi/issues">https://github.com/FHIR/sushi/issues</a></p>



<a name="192089024"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/192089024" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Kramer <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#192089024">(Mar 27 2020 at 22:43)</a>:</h4>
<p>I can tell you that SUSHI is moving towards eliminating <code>ig.ini</code>, <code>package-list.json</code>, <code>package.json</code> and<code>menu.xml</code> entirely, and replacing them with one unified configuration file, and generating everything needed by the IGP, just as the IG resource is created automatically now.</p>



<a name="192091692"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/192091692" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#192091692">(Mar 27 2020 at 23:18)</a>:</h4>
<p>Then definitely these things should be aligned across tools. I also want a new way to make the menu. I still edit my IG.xml manually because I need to include non-sushi stuff... this can be fixed by sushi, but maybe not only by sushi.</p>



<a name="192116061"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/192116061" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#192116061">(Mar 28 2020 at 10:12)</a>:</h4>
<p>When there is an error in Sushi, output is not very informative:</p>
<div class="codehilite"><pre><span></span>Sushi: info  Importing FSH text...                                               (00:01.0926)
Sushi: error extraneous input &#39;* identifier.system = &quot;https://www.ehealth.fgov.be/standards/fhir/NamingSystem/ssin&quot;&#39; expecting {&lt;EOF&gt;, KW_ALIAS, KW_PROFILE, KW_EXTENSION, KW_INSTANCE, KW_INVARIANT, KW_VALUESET, KW_CODESYSTEM, KW_RULESET, KW_MAPPING} (00:02.0055)
Sushi: File: C:\ImplementationGuides\be-on-sushi\fsh\peter.fsh                   (00:02.0059)
Sushi: Line: 5                                                                   (00:02.0060)
Sushi: info  Preprocessed 10 documents with 0 aliases.                           (00:02.0060)
Sushi: info  Imported 3 definitions and 7 instances.                             (00:02.0067)
Sushi: info  Loaded package hl7.fhir.r4.core#4.0.1                               (00:02.0104)
Sushi: info  Loaded package hl7.fhir.us.core#3.1.0                               (00:02.0106)
Sushi: info  Converting FSH to FHIR resources...                                 (00:02.0108)
Sushi: info  Converted 3 FHIR StructureDefinitions.                              (00:02.0226)
Sushi: error Element Patient.identifier has minimum cardinality 1 but occurs 0 time(s). (00:02.0378)
Sushi: File: C:\ImplementationGuides\be-on-sushi\fsh\peter.fsh                   (00:02.0379)
Sushi: Line: 1 - 2                                                               (00:02.0380)
Sushi: error Element Patient.name has minimum cardinality 1 but occurs 0 time(s). (00:02.0380)
Sushi: File: C:\ImplementationGuides\be-on-sushi\fsh\peter.fsh                   (00:02.0380)
Sushi: Line: 1 - 2                                                               (00:02.0381)
Sushi: error Element Patient.gender has minimum cardinality 1 but occurs 0 time(s). (00:02.0381)
Sushi: File: C:\ImplementationGuides\be-on-sushi\fsh\peter.fsh                   (00:02.0381)
Sushi: Line: 1 - 2                                                               (00:02.0382)
Sushi: info  Converted 7 FHIR instances.                                         (00:02.0382)
Sushi: info  Exporting FHIR resources as JSON...                                 (00:02.0384)
Sushi: info  Exported 10 FHIR resources as JSON.                                 (00:02.0420)
Sushi: info  Assembling Implementation Guide sources...                          (00:02.0421)
Sushi: info  Generated default index.md.                                         (00:02.0445)
Sushi: info  Generated default ig.ini.                                           (00:02.0450)
Sushi: info  Generated default package-list.json                                 (00:02.0451)
Sushi: info  Generated ImplementationGuide-fish.json                             (00:02.0452)
Sushi: info  Assembled Implementation Guide sources; ready for IG Publisher.     (00:02.0453)
Sushi: info                                                                      (00:02.0453)
Sushi: Profiles:    3                                                            (00:02.0453)
Sushi: Extensions:  0                                                            (00:02.0454)
Sushi: Instances:   7                                                            (00:02.0454)
Sushi: ValueSets:   0                                                            (00:02.0455)
Sushi: CodeSystems: 0                                                            (00:02.0455)
Sushi: Errors:      4                                                            (00:02.0468)
Sushi: Warnings:    0                                                            (00:02.0469)
Sushi couldn&#39;t be run. Complete output from running Sushi :                      (00:02.0488)
Note: Check that Sushi is installed correctly (&quot;npm install -g fsh-sushi&quot;. On windows, get npm from https://www.npmjs.com/get-npm) (00:02.0488)
Publishing Content Failed: Process exited with an error: 1 (Exit value: 1)       (00:02.0489)
                                                                                 (00:02.0490)
Use -? to get command line help                                                  (00:02.0490)
                                                                                 (00:02.0490)
Stack Dump (for debugging):                                                      (00:02.0491)
org.apache.commons.exec.ExecuteException: Process exited with an error: 1 (Exit value: 1)
        at org.apache.commons.exec.DefaultExecutor.executeInternal(DefaultExecutor.java:404)
        at org.apache.commons.exec.DefaultExecutor.execute(DefaultExecutor.java:166)
        at org.apache.commons.exec.DefaultExecutor.execute(DefaultExecutor.java:153)
        at org.hl7.fhir.igtools.publisher.Publisher.runFsh(Publisher.java:1276)
        at org.hl7.fhir.igtools.publisher.Publisher.initialize(Publisher.java:1206)
        at org.hl7.fhir.igtools.publisher.Publisher.execute(Publisher.java:662)
        at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:7018)
&#39;lisher.&#39; is not recognized as an internal or external command,
operable program or batch file.
</pre></div>



<a name="192120969"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/192120969" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Kramer <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#192120969">(Mar 28 2020 at 12:33)</a>:</h4>
<p>Just to clarify, <span class="user-mention" data-user-id="191832">@Jose Costa Teixeira</span> , you are saying that the IGP should present a better message saying it can't continue because there are SUSHI errors, correct?  I agree IGP should exit gracefully.</p>



<a name="192121088"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/192121088" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#192121088">(Mar 28 2020 at 12:36)</a>:</h4>
<p>I think this is in the publisher, yes. It should exit gracefully (I don't think it should continue and pretend sushi isn't there). The error message is not really actionable</p>



<a name="192121282"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/192121282" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Kramer <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#192121282">(Mar 28 2020 at 12:42)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191316">Grahame Grieve</span> <a href="#narrow/stream/179252-IG-creation/topic/Sushi.20Support/near/192080481" title="#narrow/stream/179252-IG-creation/topic/Sushi.20Support/near/192080481">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="191447">Mark Kramer</span> I don't see how a branch would make any difference, and my life is already unsupportably complex</p>
</blockquote>
<p>I feel very sympathetic for the complexity of your life.  But I don't feel that testing before releasing software necessarily makes life more complex. It could make your life more pleasant to not have to immediately react when a release has bugs and people complain. I'm all for agility, but following good software development practices can increase everyone's happiness. What happened to your new hire?</p>



<a name="192136533"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/192136533" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#192136533">(Mar 28 2020 at 18:51)</a>:</h4>
<p><span class="user-mention" data-user-id="248736">@Mark Iantorno</span> is still skilling up.</p>



<a name="192262080"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/192262080" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#192262080">(Mar 30 2020 at 14:21)</a>:</h4>
<p><span class="user-mention" data-user-id="191315">@Josh Mandel</span> -- we did a new release of SUSHI on Friday, but it seems that maybe the autobuild has not picked it up.  When do you run <code>npm install -g fsh-sushi</code>?  Is the SUSHI installation baked into the image (and therefore static) or are you doing it at runtime (and if so, how do we trigger it)?  It seems you must not be doing it as part of the build itself (which probably makes sense since you don't want  multiple web requests potentially all trying to globally update SUSHI at the same time).</p>



<a name="192262257"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/192262257" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#192262257">(Mar 30 2020 at 14:22)</a>:</h4>
<p>Right now this is done when the docker image for the builder container is created. Clearly not a complete strategy for managing updates :-) we could consider a few things... 1) we could try to run NPM update from within the build image each time they build image executes, 2) we could automate the creation of a new build image of each time there's a new session release, 3) other ideas?</p>



<a name="192262374"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/192262374" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#192262374">(Mar 30 2020 at 14:23)</a>:</h4>
<p><a href="https://github.com/FHIR/auto-ig-builder/blob/master/images/ig-build/Dockerfile#L26" title="https://github.com/FHIR/auto-ig-builder/blob/master/images/ig-build/Dockerfile#L26">https://github.com/FHIR/auto-ig-builder/blob/master/images/ig-build/Dockerfile#L26</a> is where this happens right now.</p>



<a name="192262515"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/192262515" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#192262515">(Mar 30 2020 at 14:24)</a>:</h4>
<p>There would be no issue in terms of multiple builds updating a global install at the same time because each build is isolated...</p>



<a name="192262554"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/192262554" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#192262554">(Mar 30 2020 at 14:24)</a>:</h4>
<p>It might be a little slow to run this step on each build, but I'm guessing that with most of the dependencies already baked into the container it's only a few seconds or less than 30 at any rate.</p>



<a name="192262976"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/192262976" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#192262976">(Mar 30 2020 at 14:27)</a>:</h4>
<p>Yeah, I think maybe running <code>npm install -g fsh-sushi</code> again when the container spins up might be the best approach for now.  As you said, as long as the version in the image isn't super old, a lot of the dependencies will probably still be valid.  How do you manage IG publisher updates? Does that happen when the container is created as well?</p>



<a name="192266380"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/192266380" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#192266380">(Mar 30 2020 at 14:51)</a>:</h4>
<p>Yeah, we download the publisher every time already :) I'll do the same with Sushi.</p>



<a name="192279995"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/192279995" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#192279995">(Mar 30 2020 at 16:21)</a>:</h4>
<p>OK, this should be set now. <a href="https://github.com/FHIR/auto-ig-builder/commit/3a616d751efcd3caf7d7849143f8caf423ac8995" title="https://github.com/FHIR/auto-ig-builder/commit/3a616d751efcd3caf7d7849143f8caf423ac8995">https://github.com/FHIR/auto-ig-builder/commit/3a616d751efcd3caf7d7849143f8caf423ac8995</a></p>



<a name="192280358"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/192280358" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#192280358">(Mar 30 2020 at 16:24)</a>:</h4>
<p>Note <span class="user-mention" data-user-id="191387">@Keith Boone</span> this means the auto IG builder should now succeed:</p>
<p><a href="/user_uploads/10155/bZQc1M-S4yeV_urSsaos7dyr/image.png" title="image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/10155/bZQc1M-S4yeV_urSsaos7dyr/image.png" title="image.png"><img src="/user_uploads/10155/bZQc1M-S4yeV_urSsaos7dyr/image.png"></a></div>



<a name="192283656"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/192283656" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#192283656">(Mar 30 2020 at 16:48)</a>:</h4>
<p>Thanks, <span class="user-mention" data-user-id="191315">@Josh Mandel</span>!</p>



<a name="192509372"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20Support/near/192509372" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20Support.html#192509372">(Apr 01 2020 at 10:39)</a>:</h4>
<p>pointing <span class="user-mention" data-user-id="272943">@Nicolas Duvivier</span> to this discussion</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
