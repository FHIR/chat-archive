---
layout: page
title: "FHIR Chat  · variable expressions in the IG · IG creation"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/index.html">IG creation</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/variable.20expressions.20in.20the.20IG.html">variable expressions in the IG</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="271352260"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/variable%20expressions%20in%20the%20IG/near/271352260" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Diane <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/variable.20expressions.20in.20the.20IG.html#271352260">(Feb 09 2022 at 21:48)</a>:</h4>
<p>Our questionnaires have a parent questionnaire and child questionnaires. The child questionnnaires contain a variable that uses an expression to get the data from the parent questionnaire response.</p>
<p>When publishing the IG, can the variable expression refer to a generic example FHIR server?  Or does it need to be a live FHIR server so that the expression actually brings back data and the validator doesn't think it is a broken link?  </p>
<div class="codehilite"><pre><span></span><code> &quot;extension&quot;: [ {
    &quot;url&quot;: &quot;http://hl7.org/fhir/StructureDefinition/variable&quot;,
    &quot;valueExpression&quot;: {
      &quot;description&quot;: &quot;response to get the data from&quot;,
      &quot;name&quot;: &quot;dataFromTheParentQR&quot;,
      &quot;language&quot;: &quot;application/x-fhir-query&quot;,
      &quot;expression&quot;: &quot;https://www.examplefhirserver.com/hapi-fhir-jpaserver/fhir/QuestionnaireResponse/parentQuestionnaireResponse1234&quot;
    }
  }
</code></pre></div>



<a name="271365400"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/variable%20expressions%20in%20the%20IG/near/271365400" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/variable.20expressions.20in.20the.20IG.html#271365400">(Feb 09 2022 at 23:50)</a>:</h4>
<p>The expression needs to be a live query.  If it's 'relative', then it'll run on the same server the QuestionnaireResponse is stored on.</p>



<a name="271384756"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/variable%20expressions%20in%20the%20IG/near/271384756" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Diane <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/variable.20expressions.20in.20the.20IG.html#271384756">(Feb 10 2022 at 04:23)</a>:</h4>
<p>For the IG, we can set it up as a relative reference like:   QuestionnaireResponse/parentQuestionnaireResponse1234</p>
<p>The questionnaire response ID itself (parentQuestionnaireResponse1234), is dynamic.  Our software application  wipes out parentQuestionnaireResponse1234   and replaces it with the actual questionnaire response ID  number (eg.  6789)  before it  calls the script to render the next questionnaire.  Since the software application is not part of the IG, do we just hard-code with a valid example such as QuestionnaireResponse/6789?</p>
<p>For a relative reference, how/where do we tell the IG what FHIR server to use?    Do we use a test server like <a href="http://hapi.fhir.org">hapi.fhir.org</a>?   Do we put that in the variable expression instead of using a relative expression?</p>
<p>"expression": "<a href="http://hapi.fhir.org/baseR4/QuestionnaireResponse/2804160">http://hapi.fhir.org/baseR4/QuestionnaireResponse/2804160</a>"</p>
<p>Do we create another variable for the FHIR server?</p>



<a name="271385121"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/variable%20expressions%20in%20the%20IG/near/271385121" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/variable.20expressions.20in.20the.20IG.html#271385121">(Feb 10 2022 at 04:30)</a>:</h4>
<p>That's not kosher.  The reference is expected to exist and wiping it wouldn't be appropriate.  If you want to have a variable passed in to your processing engine, then just declare it as a 'launch-context' extension.  It'll be up to the form renderer to support the parameter and pass it (or not).  Alternatively, combine the parent and children into a single Questionnaire using the assemble operation and then everything you need will be right there.  (You can use page groups if you want it to 'appear' as multiple forms.)</p>



<a name="271385128"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/variable%20expressions%20in%20the%20IG/near/271385128" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/variable.20expressions.20in.20the.20IG.html#271385128">(Feb 10 2022 at 04:30)</a>:</h4>
<p>That latter approach is more likely to be widely supported.</p>



<a name="271469705"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/variable%20expressions%20in%20the%20IG/near/271469705" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Diane <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/variable.20expressions.20in.20the.20IG.html#271469705">(Feb 10 2022 at 18:01)</a>:</h4>
<p>The reason right now that we are doing the  </p>
<div class="codehilite"><pre><span></span><code>&quot;name&quot;: &quot;dataFromTheParentQR&quot;,
 &quot;language&quot;: &quot;application/x-fhir-query&quot;,
 &quot;expression&quot;: &quot;https://www.examplefhirserver.com/hapi-fhir-jpaserver/fhir/QuestionnaireResponse/parentQuestionnaireResponse&quot;
</code></pre></div>
<p>is because it is a workaround.  The launchContext only allows certain resource types (see <a href="https://build.fhir.org/ig/HL7/sdc/ValueSet-launchContext.html">https://build.fhir.org/ig/HL7/sdc/ValueSet-launchContext.html</a>)  to be passed.    This issue is discussed in <br>
<a href="#narrow/stream/179255-questionnaire/topic/launchContext.20off-list.20.22names.22">https://chat.fhir.org/#narrow/stream/179255-questionnaire/topic/launchContext.20off-list.20.22names.22</a></p>
<p>If this issue is resolved, then I would like to convert our questionnaires to the "launchContext"  way of doing things so that it is in alignment with FHIR standards.</p>



<a name="271494566"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/variable%20expressions%20in%20the%20IG/near/271494566" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/variable.20expressions.20in.20the.20IG.html#271494566">(Feb 10 2022 at 21:08)</a>:</h4>
<p>LaunchContext has an extensible binding, so you can define your own - just be aware they won't necessarily be widely supported</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
