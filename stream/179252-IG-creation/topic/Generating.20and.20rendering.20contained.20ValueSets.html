---
layout: page
title: "FHIR Chat  · Generating and rendering contained ValueSets · IG creation"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/index.html">IG creation</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Generating.20and.20rendering.20contained.20ValueSets.html">Generating and rendering contained ValueSets</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="218789585"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Generating%20and%20rendering%20contained%20ValueSets/near/218789585" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Generating.20and.20rendering.20contained.20ValueSets.html#218789585">(Dec 04 2020 at 03:11)</a>:</h4>
<p>Does anyone have an IG that has a contained ValueSet? </p>
<p>The valueset xml.html, json.html, and  ttl.html links are not being generated, and I'm getting QA errors about it.</p>



<a name="218789653"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Generating%20and%20rendering%20contained%20ValueSets/near/218789653" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Generating.20and.20rendering.20contained.20ValueSets.html#218789653">(Dec 04 2020 at 03:12)</a>:</h4>
<p>There are a couple of examples in the SDC IG</p>



<a name="218789686"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Generating%20and%20rendering%20contained%20ValueSets/near/218789686" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Generating.20and.20rendering.20contained.20ValueSets.html#218789686">(Dec 04 2020 at 03:13)</a>:</h4>
<p>For IG publisher, I assume that they aren't in a separate json from the enclosing resource, correct?</p>



<a name="218790166"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Generating%20and%20rendering%20contained%20ValueSets/near/218790166" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Generating.20and.20rendering.20contained.20ValueSets.html#218790166">(Dec 04 2020 at 03:23)</a>:</h4>
<p>Contained resources couldn't be</p>



<a name="218790304"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Generating%20and%20rendering%20contained%20ValueSets/near/218790304" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Generating.20and.20rendering.20contained.20ValueSets.html#218790304">(Dec 04 2020 at 03:25)</a>:</h4>
<p>Right. So IG publisher should be extracting the contained resources from the enclosing, and generating narrative, xml, json, and ttl forms. For some reason it's only generating the narrative html.</p>



<a name="218790312"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Generating%20and%20rendering%20contained%20ValueSets/near/218790312" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Generating.20and.20rendering.20contained.20ValueSets.html#218790312">(Dec 04 2020 at 03:25)</a>:</h4>
<p>no it should only generate the html</p>



<a name="218790558"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Generating%20and%20rendering%20contained%20ValueSets/near/218790558" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Generating.20and.20rendering.20contained.20ValueSets.html#218790558">(Dec 04 2020 at 03:31)</a>:</h4>
<p>It's actually broken in SDC too: <a href="http://build.fhir.org/ig/HL7/sdc/ValueSet-questionnaire-sdc-profile-example-PHQ9_VSPHQ9.html">http://build.fhir.org/ig/HL7/sdc/ValueSet-questionnaire-sdc-profile-example-PHQ9_VSPHQ9.html</a>. I wonder if there were QA error for that too.</p>
<p>I'm guessing the issue is that the template doesn't know not to generate the other forms for contained resources.</p>



<a name="218790580"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Generating%20and%20rendering%20contained%20ValueSets/near/218790580" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Generating.20and.20rendering.20contained.20ValueSets.html#218790580">(Dec 04 2020 at 03:31)</a>:</h4>
<p>right. The source is contained, so it would be wrong to generate that. The template should referencer the contained content in the owning resource.</p>



<a name="218860553"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Generating%20and%20rendering%20contained%20ValueSets/near/218860553" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Generating.20and.20rendering.20contained.20ValueSets.html#218860553">(Dec 04 2020 at 17:01)</a>:</h4>
<p>Is this an issue with the template or the publisher?</p>



<a name="218880951"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Generating%20and%20rendering%20contained%20ValueSets/near/218880951" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Generating.20and.20rendering.20contained.20ValueSets.html#218880951">(Dec 04 2020 at 19:34)</a>:</h4>
<p>No.  There'd be no expectation that the contained references would generate as separate files.  They're 'contained'.  That means they live only in the containing resource.</p>



<a name="218885005"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Generating%20and%20rendering%20contained%20ValueSets/near/218885005" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Generating.20and.20rendering.20contained.20ValueSets.html#218885005">(Dec 04 2020 at 20:09)</a>:</h4>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> , if you look at <a href="https://build.fhir.org/ig/HL7/sdc/Questionnaire-questionnaire-sdc-profile-example-PHQ9.html">https://build.fhir.org/ig/HL7/sdc/Questionnaire-questionnaire-sdc-profile-example-PHQ9.html</a>, you'll see that all the answers are from the VSPHQ9 value set (with a funny closing bracket on the url). Looking at <a href="https://build.fhir.org/ig/HL7/sdc/Questionnaire-questionnaire-sdc-profile-example-PHQ9.json.html">https://build.fhir.org/ig/HL7/sdc/Questionnaire-questionnaire-sdc-profile-example-PHQ9.json.html</a>, I can see that this value set is contained in the questionnaire.</p>
<p>Clicking on the VSPHQ9 link in the questionnaire narrative, it takes me to a page for the value set. This page has tabs for narrative, xml, json, and ttl, but only the narrative page exists. This it does generate a separate file for at least the narrative page. Clicking on any of the other formats leads to a 404 error.</p>
<p>(It might be nice to visually differentiate contained resources from non-contained ones, both where they are linked to from the containing resource narrative, and on the contained resource page.)</p>



<a name="219170991"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Generating%20and%20rendering%20contained%20ValueSets/near/219170991" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Generating.20and.20rendering.20contained.20ValueSets.html#219170991">(Dec 08 2020 at 04:42)</a>:</h4>
<p>As far as I can tell, the templates have no awareness of contained resources. Is this a capability they're missing, or something that should be handled upstream in the publisher?</p>



<a name="219171281"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Generating%20and%20rendering%20contained%20ValueSets/near/219171281" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Generating.20and.20rendering.20contained.20ValueSets.html#219171281">(Dec 08 2020 at 04:49)</a>:</h4>
<p>What sort of awareness should they have?</p>



<a name="219171334"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Generating%20and%20rendering%20contained%20ValueSets/near/219171334" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Generating.20and.20rendering.20contained.20ValueSets.html#219171334">(Dec 08 2020 at 04:50)</a>:</h4>
<p>Contained resources shouldn't have XML or JSON representations, they should link back to the containing resource's XML or JSON.</p>



<a name="219171338"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Generating%20and%20rendering%20contained%20ValueSets/near/219171338" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Generating.20and.20rendering.20contained.20ValueSets.html#219171338">(Dec 08 2020 at 04:50)</a>:</h4>
<p>not to generate links for their base source</p>



<a name="219175713"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Generating%20and%20rendering%20contained%20ValueSets/near/219175713" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Generating.20and.20rendering.20contained.20ValueSets.html#219175713">(Dec 08 2020 at 06:33)</a>:</h4>
<p>I've now spent more time looking at templates, temp/pages,  and the IG publisher than is safe. I don't think Jekyll has the information needed to omit the XML/JSON tabs for contained resources, or to link to the containing resources' pages. By the time the template processing is happening, contained resources are indistinguishable (to me at least) from standalone. My suspicion is that the publisher needs to generate a data file for contained resources, which includes the containing resource. Once that is in place, the template can be updated to make use of that new information.</p>
<p>Or I could be totally wrong, and in way over my head. I'm not going to put money on which is more likely.</p>



<a name="219176570"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Generating%20and%20rendering%20contained%20ValueSets/near/219176570" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Generating.20and.20rendering.20contained.20ValueSets.html#219176570">(Dec 08 2020 at 06:52)</a>:</h4>
<p>there is a data file just like that</p>



<a name="219176572"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Generating%20and%20rendering%20contained%20ValueSets/near/219176572" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Generating.20and.20rendering.20contained.20ValueSets.html#219176572">(Dec 08 2020 at 06:53)</a>:</h4>
<p>for that reason</p>



<a name="219176916"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Generating%20and%20rendering%20contained%20ValueSets/near/219176916" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Generating.20and.20rendering.20contained.20ValueSets.html#219176916">(Dec 08 2020 at 07:01)</a>:</h4>
<p>Which one? I couldn’t find it.</p>



<a name="219229109"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Generating%20and%20rendering%20contained%20ValueSets/near/219229109" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Generating.20and.20rendering.20contained.20ValueSets.html#219229109">(Dec 08 2020 at 16:35)</a>:</h4>
<p>Should we add to the resources.json the contained resources (or  anywhere else)?<br>
we could do:</p>
<ol>
<li>Just add the contained resources to the resources.json, addding a <code>{{"contained":"true",{"containedIn"="Questionnaire/myQuestionnaire"}}</code></li>
<li>Add a <code>{"containedResources":["ValueSet/Valueset1"]}</code> to the containing resources</li>
<li>A separate json file?</li>
</ol>



<a name="219232232"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Generating%20and%20rendering%20contained%20ValueSets/near/219232232" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Generating.20and.20rendering.20contained.20ValueSets.html#219232232">(Dec 08 2020 at 17:01)</a>:</h4>
<p>I'm not sure that "contained" is needed, the presence of the "containing" is sufficient. (And I'd change "containing" to "containedIn" for clarity.) I hadn't thought about "containedResources" but that would help with decorating the link to the contained resource, or adding a list of contained resources to the containing resource. <br>
I envisioned a separate json file, since that has lower risk of breaking things that use resources.json.</p>



<a name="219233998"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Generating%20and%20rendering%20contained%20ValueSets/near/219233998" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Generating.20and.20rendering.20contained.20ValueSets.html#219233998">(Dec 08 2020 at 17:14)</a>:</h4>
<p>(updated option 1 to "containedIn").</p>



<a name="219234184"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Generating%20and%20rendering%20contained%20ValueSets/near/219234184" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Generating.20and.20rendering.20contained.20ValueSets.html#219234184">(Dec 08 2020 at 17:15)</a>:</h4>
<p>I'd think it's safer for the template to look at one single file, otherwise the liquid becomes more complicated, I guess..</p>



<a name="219235754"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Generating%20and%20rendering%20contained%20ValueSets/near/219235754" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Generating.20and.20rendering.20contained.20ValueSets.html#219235754">(Dec 08 2020 at 17:26)</a>:</h4>
<p>Fair enough, and as far as I can tell, it's only the history attribute that is being used in the resources.json. There are plenty of other things in there, but none are used by the templates.</p>



<a name="219258544"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Generating%20and%20rendering%20contained%20ValueSets/near/219258544" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Generating.20and.20rendering.20contained.20ValueSets.html#219258544">(Dec 08 2020 at 20:31)</a>:</h4>
<p>...yet</p>



<a name="219258677"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Generating%20and%20rendering%20contained%20ValueSets/near/219258677" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Generating.20and.20rendering.20contained.20ValueSets.html#219258677">(Dec 08 2020 at 20:32)</a>:</h4>
<p>Correct. The resources JSON is not used for much but should be used to add cool stuff as we go, like "testing"</p>



<a name="219259022"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Generating%20and%20rendering%20contained%20ValueSets/near/219259022" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Generating.20and.20rendering.20contained.20ValueSets.html#219259022">(Dec 08 2020 at 20:35)</a>:</h4>
<p>Or maybe 'this resource was inherited as a dependency, it is not defined here'</p>



<a name="219259372"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Generating%20and%20rendering%20contained%20ValueSets/near/219259372" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Generating.20and.20rendering.20contained.20ValueSets.html#219259372">(Dec 08 2020 at 20:38)</a>:</h4>
<p>hmm so apparently I had not not put this in resources.json. Looks like contained resources are just listed there at all...</p>



<a name="219259457"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Generating%20and%20rendering%20contained%20ValueSets/near/219259457" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Generating.20and.20rendering.20contained.20ValueSets.html#219259457">(Dec 08 2020 at 20:39)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191316">Grahame Grieve</span> <a href="#narrow/stream/179252-IG-creation/topic/Generating.20and.20rendering.20contained.20ValueSets/near/219259372">said</a>:</p>
<blockquote>
<p>Looks like contained resources are just listed there at all...</p>
</blockquote>
<p>Are <em>not</em> listed there?</p>



<a name="219259475"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Generating%20and%20rendering%20contained%20ValueSets/near/219259475" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Generating.20and.20rendering.20contained.20ValueSets.html#219259475">(Dec 08 2020 at 20:39)</a>:</h4>
<p>err, that's what I meant</p>



<a name="219259779"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Generating%20and%20rendering%20contained%20ValueSets/near/219259779" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Generating.20and.20rendering.20contained.20ValueSets.html#219259779">(Dec 08 2020 at 20:41)</a>:</h4>
<p>I've got template changes that will skip the nav tabs for contained resources, if you can include them in resources.json. Ideally with the containing resource as Jose and I were theorizing above.</p>



<a name="219259872"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Generating%20and%20rendering%20contained%20ValueSets/near/219259872" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Generating.20and.20rendering.20contained.20ValueSets.html#219259872">(Dec 08 2020 at 20:42)</a>:</h4>
<p>What should the resources JSON look like?</p>



<a name="219260321"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Generating%20and%20rendering%20contained%20ValueSets/near/219260321" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Generating.20and.20rendering.20contained.20ValueSets.html#219260321">(Dec 08 2020 at 20:46)</a>:</h4>
<ul>
<li>Contained resource should be included in <code>resources.json</code> along with the other resources, with all the regular attributes.  (The only odd thing for contained resources will be the "source" attribute, which will be the containing resource.)</li>
<li>Contained resources also have a "containedIn" attribute with the id of the containing resource.</li>
<li>Containing resources should have a "contains" attribute which is an array of contained resource ids.</li>
<li>add a "path" attribute for contained or containing resources which is the relative url of the base page for the resource.</li>
</ul>
<p>(edited to reflect what I ended up needing.)</p>



<a name="219260425"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Generating%20and%20rendering%20contained%20ValueSets/near/219260425" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Generating.20and.20rendering.20contained.20ValueSets.html#219260425">(Dec 08 2020 at 20:47)</a>:</h4>
<p>Here is a contained and a containing sample resource.</p>



<a name="219260448"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Generating%20and%20rendering%20contained%20ValueSets/near/219260448" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Generating.20and.20rendering.20contained.20ValueSets.html#219260448">(Dec 08 2020 at 20:47)</a>:</h4>
<div class="codehilite"><pre><span></span><code>&quot;ValueSet/WhoCrQuestionnaireCovid19Surveillance_WhoCrValueSetQuestionnaireReasonForTesting&quot;: {
    &quot;containedIn&quot;: &quot;Questionnaire/WhoCrQuestionnaireCovid19Surveillance&quot;,
    &quot;path&quot; : &quot;ValueSet-WhoCrQuestionnaireCovid19Surveillance_WhoCrValueSetQuestionnaireReasonForTesting.html&quot;,
    &quot;history&quot;: false,
    &quot;index&quot;: 99,
    &quot;source&quot;: &quot;/Users/elliot/src/covid-ig/fsh-generated/resources/questionnaire-WhoCrQuestionnaireCovid19Surveillance.json&quot;,
    &quot;url&quot;: &quot;http://openhie.github.io/covid-19/Questionnaire/WhoCrQuestionnaireCovid19Surveillance#WhoCrValueSetQuestionnaireReasonForTesting&quot;,
    &quot;name&quot;: &quot;WhoCrValueSetQuestionnaireReasonForTesting&quot;,
    &quot;title&quot;: &quot;WhoCrValueSetQuestionnaireReasonForTesting&quot;,
    &quot;version&quot;: &quot;0.1.0&quot;,
    &quot;date&quot;: &quot;2020-12-07T19:50:36-08:00&quot;,
    &quot;status&quot;: {
      &quot;class&quot;: &quot;colstu&quot;,
      &quot;owner&quot;: &quot;OpenHIE&quot;,
      &quot;link&quot;: &quot;http://www.ohie.org&quot;,
      &quot;status&quot;: &quot;Active&quot;
    }
},
&quot;Questionnaire/WhoCrQuestionnaireCovid19Surveillance&quot;: {
    &quot;contains&quot;: [
      &quot;ValueSet/WhoCrQuestionnaireCovid19Surveillance_WhoCrValueSetQuestionnaireCountry&quot;,
      &quot;ValueSet/WhoCrQuestionnaireCovid19Surveillance_WhoCrValueSetQuestionnaireReasonForTesting&quot;,
      &quot;ValueSet/WhoCrQuestionnaireCovid19Surveillance_WhoCrValueSetQuestionnaireComorbidity&quot;,
      &quot;ValueSet/WhoCrQuestionnaireCovid19Surveillance_WhoCrValueSetQuestionnairePatientOutcome&quot;,
      &quot;ValueSet/WhoCrQuestionnaireCovid19Surveillance_WhoCrValueSetQuestionnaireAdmin1&quot;
      ],
    &quot;path&quot; : &quot;Questionnaire-WhoCrQuestionnaireCovid19Surveillance.html&quot;,
    &quot;history&quot;: false,
    &quot;index&quot;: 80,
    &quot;source&quot;: &quot;/Users/elliot/src/covid-ig/fsh-generated/resources/questionnaire-WhoCrQuestionnaireCovid19Surveillance.json&quot;,
    &quot;url&quot;: &quot;http://openhie.github.io/covid-19/Questionnaire/WhoCrQuestionnaireCovid19Surveillance&quot;,
    &quot;name&quot;: &quot;WhoCrQuestionnaireCovid19Surveillance&quot;,
    &quot;version&quot;: &quot;0.1.0&quot;,
    &quot;date&quot;: &quot;2020-12-08T22:22:09-08:00&quot;,
    &quot;status&quot;: {
      &quot;class&quot;: &quot;colsd&quot;,
      &quot;owner&quot;: &quot;OpenHIE&quot;,
      &quot;link&quot;: &quot;http://www.ohie.org&quot;,
      &quot;status&quot;: &quot;Draft&quot;
    }
}
</code></pre></div>
<p>(edited to reflect "as built")</p>



<a name="219261144"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Generating%20and%20rendering%20contained%20ValueSets/near/219261144" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Generating.20and.20rendering.20contained.20ValueSets.html#219261144">(Dec 08 2020 at 20:53)</a>:</h4>
<p>By the way, I've found some other issues with contained resources:</p>
<ul>
<li>Section numbering is broken. The sections are ".1", ".1.2", etc. instead of a proper numbering. I don't know how sections should be numbered for contained resources (sequential after all the standalone resources? alphabetical within the containing resource?), but this looks wrong.</li>
<li>There are no breadcrumb links</li>
<li>The text element is not rendered</li>
<li>The contained resource is not processed correctly by jekyll. I've got <code>"copyright": "{{{year}}}"</code> which doesn't get converted to <code>"copyright": "2020"</code> in either the XML/JSON representation of the containing resource, or the separate narrative rendering of the contained resource. However, the same line in the containing resource does get converted correctly.</li>
</ul>



<a name="219261736"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Generating%20and%20rendering%20contained%20ValueSets/near/219261736" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Generating.20and.20rendering.20contained.20ValueSets.html#219261736">(Dec 08 2020 at 20:59)</a>:</h4>
<p>I'll look at this next week after final content deadline for HL7 ballot is due</p>



<a name="219261809"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Generating%20and%20rendering%20contained%20ValueSets/near/219261809" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Generating.20and.20rendering.20contained.20ValueSets.html#219261809">(Dec 08 2020 at 20:59)</a>:</h4>
<p>Thank you.</p>



<a name="219279605"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Generating%20and%20rendering%20contained%20ValueSets/near/219279605" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Generating.20and.20rendering.20contained.20ValueSets.html#219279605">(Dec 08 2020 at 23:41)</a>:</h4>
<p>For the list:</p>
<ul>
<li>"References" for contained resources are incorrect. I suspect the references should list the (a) containing resource, as well as (b) any resource contained by (a) which references this contained resource.</li>
</ul>



<a name="219302288"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Generating%20and%20rendering%20contained%20ValueSets/near/219302288" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Generating.20and.20rendering.20contained.20ValueSets.html#219302288">(Dec 09 2020 at 06:39)</a>:</h4>
<p>OK, I've got something working to link between the contained and containing resources, and have updated my comments above for what it actually needs. I'll create a pull request for ig-template-base once the contents of resource.json are confirmed.</p>



<a name="224427221"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Generating%20and%20rendering%20contained%20ValueSets/near/224427221" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Generating.20and.20rendering.20contained.20ValueSets.html#224427221">(Jan 29 2021 at 03:32)</a>:</h4>
<p>Along the lines of my previous "References" issue, I've just noticed that in my IG that a regular (i.e., not contained) CodeSystem which is only used by ValueSets which are contained in a Questionnaire displays:</p>
<blockquote>
<p>This Code system is referenced in the content logical definition of the following value sets:</p>
<p>This CodeSystem is not used here; it may be used elsewhere (e.g. specifications and/or implementations that use this content)</p>
</blockquote>
<p>It definitely is used, but I don't know if it should be pointing to the containing or contained resource.</p>



<a name="224430790"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Generating%20and%20rendering%20contained%20ValueSets/near/224430790" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Generating.20and.20rendering.20contained.20ValueSets.html#224430790">(Jan 29 2021 at 04:51)</a>:</h4>
<p>Capture a Git issue against the publisher</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
