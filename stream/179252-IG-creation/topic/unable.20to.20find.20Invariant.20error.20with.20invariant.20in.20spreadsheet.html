---
layout: page
title: "FHIR Chat  · unable to find Invariant error with invariant in spreadsheet · IG creation"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/index.html">IG creation</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/unable.20to.20find.20Invariant.20error.20with.20invariant.20in.20spreadsheet.html">unable to find Invariant error with invariant in spreadsheet</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153987754"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/unable%20to%20find%20Invariant%20error%20with%20invariant%20in%20spreadsheet/near/153987754" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/unable.20to.20find.20Invariant.20error.20with.20invariant.20in.20spreadsheet.html#153987754">(Aug 16 2018 at 19:50)</a>:</h4>
<p>In LIVD we have an invariant on ConceptMap.group.element.target.dependsOn, but when the invariant id is added for the element the IG build complains, even though the invariant is there and should be findable:</p>
<div class="codehilite"><pre><span></span>     [java] Initialization complete                                                          (16.0103sec)
     [java] Load Content                                                                     (16.0103sec)
     [java] java.lang.Exception: exception parsing pack /Users/rhausam/git-repo/livd/src/resources/conceptmap-uv-livd-spreadsheet: unable to find Invariant &#39;4&#39; /Users/rhausam/git-repo/livd/src/resources/conceptmap-uv-livd-spreadsheet, sheet &quot;conceptmap-uv-livd&quot;, row 33
     [java]     at org.hl7.fhir.igtools.spreadsheets.IgSpreadsheetParser.parse(IgSpreadsheetParser.java:208)
     [java]     at org.hl7.fhir.igtools.publisher.Publisher.loadSpreadsheet(Publisher.java:1905)
     [java]     at org.hl7.fhir.igtools.publisher.Publisher.loadSpreadsheets(Publisher.java:1890)
     [java]     at org.hl7.fhir.igtools.publisher.Publisher.load(Publisher.java:1601)
     [java]     at org.hl7.fhir.igtools.publisher.Publisher.createIg(Publisher.java:513)
     [java]     at org.hl7.fhir.igtools.publisher.Publisher.execute(Publisher.java:479)
     [java]     at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:4622)
     [java] Caused by: java.lang.Exception: unable to find Invariant &#39;4&#39; /Users/rhausam/git-repo/livd/src/resources/conceptmap-uv-livd-spreadsheet, sheet &quot;conceptmap-uv-livd&quot;, row 33
     [java] Missing IsModifierReason on ConceptMap.group.element.target.equivalence
     [java]     at org.hl7.fhir.igtools.spreadsheets.IgSpreadsheetParser.processLine(IgSpreadsheetParser.java:764)
     [java]     at org.hl7.fhir.igtools.spreadsheets.IgSpreadsheetParser.parseProfileSheet(IgSpreadsheetParser.java:275)
     [java]     at org.hl7.fhir.igtools.spreadsheets.IgSpreadsheetParser.parse(IgSpreadsheetParser.java:182)
     [java]     ... 6 more
     [java] Exception in thread &quot;main&quot; java.lang.NullPointerException
     [java]     at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:4632)
     [java] Publishing Content Failed: exception parsing pack /Users/rhausam/git-repo/livd/src/resources/conceptmap-uv-livd-spreadsheet: unable to find Invariant &#39;4&#39; /Users/rhausam/git-repo/livd/src/resources/conceptmap-uv-livd-spreadsheet, sheet &quot;conceptmap-uv-livd&quot;, row 33 (16.0638sec)
     [java]                                                                                  (16.0639sec)
     [java] Use -? to get command line help                                                  (16.0639sec)
     [java]                                                                                  (16.0639sec)
     [java] Stack Dump (for debugging):                                                      (16.0639sec)

BUILD FAILED
/Users/rhausam/git-repo/livd/framework/build.xml:78: Java returned: 1
</pre></div>


<p>This is committed in the livd2 branch at <a href="https://github.com/HL7/livd/tree/livd2" target="_blank" title="https://github.com/HL7/livd/tree/livd2">https://github.com/HL7/livd/tree/livd2</a>.  Has anyone else encountered this?</p>



<a name="153987788"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/unable%20to%20find%20Invariant%20error%20with%20invariant%20in%20spreadsheet/near/153987788" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/unable.20to.20find.20Invariant.20error.20with.20invariant.20in.20spreadsheet.html#153987788">(Aug 16 2018 at 20:35)</a>:</h4>
<p>I assume this is likely a bug?  Will I need to remove the invariant id from the element for now and add a note that it is <strong>supposed</strong> to be there and will be corrected in the future?  Or can it be fixed or is there something to correct on my end?</p>



<a name="153987791"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/unable%20to%20find%20Invariant%20error%20with%20invariant%20in%20spreadsheet/near/153987791" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/unable.20to.20find.20Invariant.20error.20with.20invariant.20in.20spreadsheet.html#153987791">(Aug 16 2018 at 20:36)</a>:</h4>
<p>it's on my list for next</p>



<a name="153987862"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/unable%20to%20find%20Invariant%20error%20with%20invariant%20in%20spreadsheet/near/153987862" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/unable.20to.20find.20Invariant.20error.20with.20invariant.20in.20spreadsheet.html#153987862">(Aug 16 2018 at 22:15)</a>:</h4>
<p>Well, I think I can take it off your list.  The answer seems to be that when you add the '-Inv' to the tab name for the invariants for that structure you <strong>must</strong> use a capital 'I'.  I obviously should have tried that a bit sooner. :(</p>



<a name="153987866"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/unable%20to%20find%20Invariant%20error%20with%20invariant%20in%20spreadsheet/near/153987866" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/unable.20to.20find.20Invariant.20error.20with.20invariant.20in.20spreadsheet.html#153987866">(Aug 16 2018 at 22:18)</a>:</h4>
<p>ok</p>



<a name="177631506"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/unable%20to%20find%20Invariant%20error%20with%20invariant%20in%20spreadsheet/near/177631506" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/unable.20to.20find.20Invariant.20error.20with.20invariant.20in.20spreadsheet.html#177631506">(Oct 08 2019 at 16:10)</a>:</h4>
<p>running into the same issue (i guess). My invariant tab is named: Invariants-Inv (also tried foo-INV, Invariant, Invariants).<br>
These Invariants aren't found while parsing the spreadsheet causing a similar error.</p>



<a name="177631602"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/unable%20to%20find%20Invariant%20error%20with%20invariant%20in%20spreadsheet/near/177631602" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/unable.20to.20find.20Invariant.20error.20with.20invariant.20in.20spreadsheet.html#177631602">(Oct 08 2019 at 16:11)</a>:</h4>
<p>How is the Invariant Tab discriminated by the Publisher? The Tab with a -Inv ending? couldn't find the naming conventions :-(</p>



<a name="177632661"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/unable%20to%20find%20Invariant%20error%20with%20invariant%20in%20spreadsheet/near/177632661" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/unable.20to.20find.20Invariant.20error.20with.20invariant.20in.20spreadsheet.html#177632661">(Oct 08 2019 at 16:22)</a>:</h4>
<p>It should have the same name as the profile.  E.g. MyPatient-INV for invariants related to the MyPatient profile.  (Every profile needs its own Invariant tab)</p>



<a name="177698934"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/unable%20to%20find%20Invariant%20error%20with%20invariant%20in%20spreadsheet/near/177698934" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/unable.20to.20find.20Invariant.20error.20with.20invariant.20in.20spreadsheet.html#177698934">(Oct 09 2019 at 10:04)</a>:</h4>
<p>done. Now it seems to be linked, but i get the exception: </p>
<blockquote>
<p>java.lang.Exception: exception parsing pack Observations: Profile finding Invariant null (As HGNC contains overlapping  gene and gene-family IDs  please use a more specific CodeSystem Uri.) has no XPath statement    </p>
</blockquote>
<p>I thought filling out the expression tab with FHIRpath should be sufficient?</p>



<a name="177721193"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/unable%20to%20find%20Invariant%20error%20with%20invariant%20in%20spreadsheet/near/177721193" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/unable.20to.20find.20Invariant.20error.20with.20invariant.20in.20spreadsheet.html#177721193">(Oct 09 2019 at 14:51)</a>:</h4>
<p>Still need XPath for R4.  I think it goes away in R5</p>



<a name="177731615"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/unable%20to%20find%20Invariant%20error%20with%20invariant%20in%20spreadsheet/near/177731615" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/unable.20to.20find.20Invariant.20error.20with.20invariant.20in.20spreadsheet.html#177731615">(Oct 09 2019 at 16:34)</a>:</h4>
<p><span aria-label="pensive" class="emoji emoji-1f614" role="img" title="pensive">:pensive:</span></p>



<a name="177732039"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/unable%20to%20find%20Invariant%20error%20with%20invariant%20in%20spreadsheet/near/177732039" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/unable.20to.20find.20Invariant.20error.20with.20invariant.20in.20spreadsheet.html#177732039">(Oct 09 2019 at 16:39)</a>:</h4>
<blockquote>
<p>Still need XPath for R4.  I think it goes away in R5</p>
</blockquote>
<p>wait what? I just checked some profiles. For example german base profiles are using expression without XPath</p>



<a name="177732064"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/unable%20to%20find%20Invariant%20error%20with%20invariant%20in%20spreadsheet/near/177732064" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/unable.20to.20find.20Invariant.20error.20with.20invariant.20in.20spreadsheet.html#177732064">(Oct 09 2019 at 16:39)</a>:</h4>
<p>Also elementDefinition has no constrain on constrain <span aria-label="smiley" class="emoji emoji-1f603" role="img" title="smiley">:smiley:</span> to enforce Xpath.</p>



<a name="177747748"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/unable%20to%20find%20Invariant%20error%20with%20invariant%20in%20spreadsheet/near/177747748" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/unable.20to.20find.20Invariant.20error.20with.20invariant.20in.20spreadsheet.html#177747748">(Oct 09 2019 at 19:31)</a>:</h4>
<p>It may be a 'feature' of the spreadsheet extraction mechanism :(  Not something I can dig into in the next couple of weeks unfortunately.</p>



<a name="177784856"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/unable%20to%20find%20Invariant%20error%20with%20invariant%20in%20spreadsheet/near/177784856" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/unable.20to.20find.20Invariant.20error.20with.20invariant.20in.20spreadsheet.html#177784856">(Oct 10 2019 at 07:11)</a>:</h4>
<p>yes that's a policy constraint for HL7 IGs - you need to provide an XPath expression as well (even though they are not universally required).</p>



<a name="177794589"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/unable%20to%20find%20Invariant%20error%20with%20invariant%20in%20spreadsheet/near/177794589" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/unable.20to.20find.20Invariant.20error.20with.20invariant.20in.20spreadsheet.html#177794589">(Oct 10 2019 at 09:51)</a>:</h4>
<p>thanks for the explanations</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
