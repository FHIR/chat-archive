---
layout: page
title: "FHIR Chat  · invalid IG parameters being added to IG · IG creation"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/index.html">IG creation</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/invalid.20IG.20parameters.20being.20added.20to.20IG.html">invalid IG parameters being added to IG</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="259899562"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/invalid%20IG%20parameters%20being%20added%20to%20IG/near/259899562" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/invalid.20IG.20parameters.20being.20added.20to.20IG.html#259899562">(Nov 01 2021 at 18:15)</a>:</h4>
<p>Using IG v1.1.84 with FHIR version 4.0.1, I get an IG resource that has definition.parameters with codes of 'path-resource', 'path-pages', and 'path-tx-cache'.<br>
with FHIR version 4.1.0, I get an IG resource that has invalid <a href="http://definition.parameter.codes">definition.parameter.codes</a>: path-liquid, path-qa, path-temp, path-output, apply-jurisdiction, etc.</p>
<p>In both cases, my input IG is the same and doesn't have those codes.  There appears to be some fhir version-specific code that causes these parameters to be output even though they are invalid.</p>



<a name="259918578"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/invalid%20IG%20parameters%20being%20added%20to%20IG/near/259918578" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/invalid.20IG.20parameters.20being.20added.20to.20IG.html#259918578">(Nov 01 2021 at 20:44)</a>:</h4>
<blockquote>
<p>I get an IG resource</p>
</blockquote>
<p>where?</p>



<a name="259924415"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/invalid%20IG%20parameters%20being%20added%20to%20IG/near/259924415" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/invalid.20IG.20parameters.20being.20added.20to.20IG.html#259924415">(Nov 01 2021 at 21:32)</a>:</h4>
<p>The parameters get inserted by the template process.  However, I thought we had a mechanism so the process didn't choke on them...</p>



<a name="259943449"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/invalid%20IG%20parameters%20being%20added%20to%20IG/near/259943449" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/invalid.20IG.20parameters.20being.20added.20to.20IG.html#259943449">(Nov 02 2021 at 01:29)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span>  the fhir-spl guide.  I’m just switching it over to use R4B and encountered those errors.  It’s in the IG that gets produced in output.</p>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> the validator is complaining about all the codes.  I would assume that the templates are the same whether I use 4.0.1 or 4.1.0 so it seems something else isn’t stripping them?</p>



<a name="259943514"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/invalid%20IG%20parameters%20being%20added%20to%20IG/near/259943514" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/invalid.20IG.20parameters.20being.20added.20to.20IG.html#259943514">(Nov 02 2021 at 01:30)</a>:</h4>
<p>it's in the input or the output?</p>



<a name="259945516"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/invalid%20IG%20parameters%20being%20added%20to%20IG/near/259945516" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/invalid.20IG.20parameters.20being.20added.20to.20IG.html#259945516">(Nov 02 2021 at 02:08)</a>:</h4>
<p>The template puts the content in the input.</p>



<a name="259946006"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/invalid%20IG%20parameters%20being%20added%20to%20IG/near/259946006" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/invalid.20IG.20parameters.20being.20added.20to.20IG.html#259946006">(Nov 02 2021 at 02:19)</a>:</h4>
<p>In the output.  When I look out the output/ig.json, all of the improper codes are there.  I didn’t look in the temp but my input Ig doesn’t have them</p>



<a name="259946101"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/invalid%20IG%20parameters%20being%20added%20to%20IG/near/259946101" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/invalid.20IG.20parameters.20being.20added.20to.20IG.html#259946101">(Nov 02 2021 at 02:20)</a>:</h4>
<p>well, then it's not going to be valid. That's according to the specification itself. It's not clear to me what I should do about it</p>



<a name="259946676"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/invalid%20IG%20parameters%20being%20added%20to%20IG/near/259946676" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/invalid.20IG.20parameters.20being.20added.20to.20IG.html#259946676">(Nov 02 2021 at 02:32)</a>:</h4>
<p>What I don’t understand is why I’m getting a different IG depending on which fhirVersion I specify.  Why would that matter?</p>



<a name="259946710"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/invalid%20IG%20parameters%20being%20added%20to%20IG/near/259946710" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/invalid.20IG.20parameters.20being.20added.20to.20IG.html#259946710">(Nov 02 2021 at 02:32)</a>:</h4>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> is there code in the templates that depends on fhirVersion that might be causing this?</p>



<a name="259946913"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/invalid%20IG%20parameters%20being%20added%20to%20IG/near/259946913" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/invalid.20IG.20parameters.20being.20added.20to.20IG.html#259946913">(Nov 02 2021 at 02:36)</a>:</h4>
<p>I don't believe so.  To be honest, I'm not sure why it wasn't complaining before.</p>



<a name="259948633"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/invalid%20IG%20parameters%20being%20added%20to%20IG/near/259948633" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/invalid.20IG.20parameters.20being.20added.20to.20IG.html#259948633">(Nov 02 2021 at 03:03)</a>:</h4>
<p>Out of curiosity, do you get the same issue if you try building locally with a publisher from say a month or so ago?</p>



<a name="259949086"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/invalid%20IG%20parameters%20being%20added%20to%20IG/near/259949086" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/invalid.20IG.20parameters.20being.20added.20to.20IG.html#259949086">(Nov 02 2021 at 03:12)</a>:</h4>
<p>I’ll try that later.  Just to recap though, specifying 4.0.1 doesn’t give the invalid codes in the Ig while 4.1.0 does.</p>



<a name="259949181"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/invalid%20IG%20parameters%20being%20added%20to%20IG/near/259949181" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/invalid.20IG.20parameters.20being.20added.20to.20IG.html#259949181">(Nov 02 2021 at 03:14)</a>:</h4>
<p>Ah.  Maybe we do something special for 4.0 and earlier, but the builder assumes that &gt; 4.0.x is an R5 IG and thus all is good.  And you're the first author of an R4B IG.</p>



<a name="259949183"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/invalid%20IG%20parameters%20being%20added%20to%20IG/near/259949183" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/invalid.20IG.20parameters.20being.20added.20to.20IG.html#259949183">(Nov 02 2021 at 03:14)</a>:</h4>
<p>Troublemaker... ;)</p>



<a name="259949344"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/invalid%20IG%20parameters%20being%20added%20to%20IG/near/259949344" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/invalid.20IG.20parameters.20being.20added.20to.20IG.html#259949344">(Nov 02 2021 at 03:18)</a>:</h4>
<p>I take pride in being a troublemaker and pushing the envelope but I <em>think</em> that I got those errors when I put 4.6.0 first.</p>



<a name="259953741"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/invalid%20IG%20parameters%20being%20added%20to%20IG/near/259953741" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/invalid.20IG.20parameters.20being.20added.20to.20IG.html#259953741">(Nov 02 2021 at 05:02)</a>:</h4>
<p>That'd be super weird, because R5 doesn't constrain the set of parameters - it's an unbound string</p>



<a name="259954122"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/invalid%20IG%20parameters%20being%20added%20to%20IG/near/259954122" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/invalid.20IG.20parameters.20being.20added.20to.20IG.html#259954122">(Nov 02 2021 at 05:11)</a>:</h4>
<p>yes, you're right.  So temp IG has those parameters for both 4.0.1 and 4.1.0, but 4.0.1 somewhere turns the invalid coded parameters into extensions while 4.1.0 doesn't</p>



<a name="260087626"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/invalid%20IG%20parameters%20being%20added%20to%20IG/near/260087626" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/invalid.20IG.20parameters.20being.20added.20to.20IG.html#260087626">(Nov 03 2021 at 03:58)</a>:</h4>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> do you have a potential fix to this that I could try?</p>



<a name="260090930"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/invalid%20IG%20parameters%20being%20added%20to%20IG/near/260090930" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/invalid.20IG.20parameters.20being.20added.20to.20IG.html#260090930">(Nov 03 2021 at 05:15)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> The issue is that VersionUtilities.isR4Ver() determines whether something is an R4 version based on whether the version starts with 4.0 - which means that 4.1.x releases aren't included, which means that R4B stuff is not converted down to R4 from the R5 version that we use internally.  Given that (I believe) we don't convert any of the resources that change in R4B, I <em>think</em> it should be safe to change this logic to return true if the version starts with 4.0 <em>or</em> 4.1.  Thoughts?</p>



<a name="260090991"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/invalid%20IG%20parameters%20being%20added%20to%20IG/near/260090991" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/invalid.20IG.20parameters.20being.20added.20to.20IG.html#260090991">(Nov 03 2021 at 05:16)</a>:</h4>
<p>no, don't do that. Because it does matter very much in some places. Instead, add a isR4orR4BVer, and call that where this decision is made</p>



<a name="260092147"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/invalid%20IG%20parameters%20being%20added%20to%20IG/near/260092147" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/invalid.20IG.20parameters.20being.20added.20to.20IG.html#260092147">(Nov 03 2021 at 05:45)</a>:</h4>
<p>The decision is made when spitting out resources - there's no special processing for the ImplementationGuide</p>



<a name="262353165"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/invalid%20IG%20parameters%20being%20added%20to%20IG/near/262353165" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/invalid.20IG.20parameters.20being.20added.20to.20IG.html#262353165">(Nov 22 2021 at 17:45)</a>:</h4>
<p>okay, <span class="user-mention" data-user-id="191415">@Giorgio Cangioli</span> and I have IGs that based on R4B and there might be others.  I'm now actively working on this IG and the vast set of errors that are being generated are making it hard to see the real errors that I'm injecting into the IG.  Is there something we can do to fix this issue that R4B is considered R5 when spitting out resources?  (<span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> <span class="user-mention" data-user-id="191316">@Grahame Grieve</span>)</p>



<a name="262984963"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/invalid%20IG%20parameters%20being%20added%20to%20IG/near/262984963" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/invalid.20IG.20parameters.20being.20added.20to.20IG.html#262984963">(Nov 29 2021 at 09:41)</a>:</h4>
<p>they'll go away next release</p>



<a name="263012995"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/invalid%20IG%20parameters%20being%20added%20to%20IG/near/263012995" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/invalid.20IG.20parameters.20being.20added.20to.20IG.html#263012995">(Nov 29 2021 at 14:12)</a>:</h4>
<p>Thx grahame</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
