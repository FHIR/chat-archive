---
layout: page
title: "FHIR Chat  · NPE only in CI build · IG creation"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/index.html">IG creation</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/NPE.20only.20in.20CI.20build.html">NPE only in CI build</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="161032380"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/NPE%20only%20in%20CI%20build/near/161032380" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rick Geimer <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/NPE.20only.20in.20CI.20build.html#161032380">(Mar 18 2019 at 05:30)</a>:</h4>
<p>I received the following in the CI build for davinci-pdex  (davinci-epdx github):</p>
<p>Validating Resources                                                             (38.0271sec)<br>
java.lang.NullPointerException                                                   (38.0296sec)<br>
Publishing Content Failed: null                                                  (38.0297sec)<br>
                                                                                 (38.0297sec)<br>
Use -? to get command line help                                                  (38.0297sec)<br>
                                                                                 (38.0297sec)<br>
Stack Dump (for debugging):                                                      (38.0297sec)<br>
java.lang.NullPointerException<br>
    at org.hl7.fhir.igtools.publisher.ValidationServices.fetch(ValidationServices.java:60)<br>
    at org.hl7.fhir.r5.validation.InstanceValidator.checkReference(InstanceValidator.java:1753)</p>



<a name="161032442"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/NPE%20only%20in%20CI%20build/near/161032442" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rick Geimer <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/NPE.20only.20in.20CI.20build.html#161032442">(Mar 18 2019 at 05:32)</a>:</h4>
<p>This was after adding a miminal Patient resource example to the IG. </p>
<p>The build runs fine locally using the latest publisher pulled from <a href="http://build.fhir.org" target="_blank" title="http://build.fhir.org">build.fhir.org</a> after receiving the NPE. The patient example is also valid according to HAPI validation.</p>



<a name="161032455"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/NPE%20only%20in%20CI%20build/near/161032455" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rick Geimer <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/NPE.20only.20in.20CI.20build.html#161032455">(Mar 18 2019 at 05:33)</a>:</h4>
<p>Will comment out the example in the build for now, which will result in a single build error in this IG until the NPE is looked into.</p>



<a name="161032652"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/NPE%20only%20in%20CI%20build/near/161032652" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rick Geimer <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/NPE.20only.20in.20CI.20build.html#161032652">(Mar 18 2019 at 05:39)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> The latest content is in github if you want to try running a local build yourself, but with the offending ImplementationGuide.definition.resource element commented out.</p>



<a name="161051378"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/NPE%20only%20in%20CI%20build/near/161051378" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/NPE.20only.20in.20CI.20build.html#161051378">(Mar 18 2019 at 12:06)</a>:</h4>
<p>I can't reproduce this</p>



<a name="161059521"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/NPE%20only%20in%20CI%20build/near/161059521" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rick Geimer <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/NPE.20only.20in.20CI.20build.html#161059521">(Mar 18 2019 at 14:02)</a>:</h4>
<p>That's my point. The only place it occurs is on the CI Build. I just uncommented that patient and committed the IG resource to github. The build failed again with that NPE:</p>
<p><a href="http://build.fhir.org/ig/HL7/davinci-epdx/build.log" target="_blank" title="http://build.fhir.org/ig/HL7/davinci-epdx/build.log">http://build.fhir.org/ig/HL7/davinci-epdx/build.log</a></p>



<a name="161059549"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/NPE%20only%20in%20CI%20build/near/161059549" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rick Geimer <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/NPE.20only.20in.20CI.20build.html#161059549">(Mar 18 2019 at 14:03)</a>:</h4>
<p>Validating Resources                                                             (34.0030sec)<br>
java.lang.NullPointerException                                                   (34.0066sec)<br>
Publishing Content Failed: null                                                  (34.0067sec)<br>
                                                                                 (34.0067sec)<br>
Use -? to get command line help                                                  (34.0068sec)<br>
                                                                                 (34.0068sec)<br>
Stack Dump (for debugging):                                                      (34.0068sec)<br>
java.lang.NullPointerException<br>
    at org.hl7.fhir.igtools.publisher.ValidationServices.fetch(ValidationServices.java:60)<br>
    at org.hl7.fhir.r5.validation.InstanceValidator.checkReference(InstanceValidator.java:1753)<br>
    at org.hl7.fhir.r5.validation.InstanceValidator.validateElement(InstanceValidator.java:3773)<br>
    at org.hl7.fhir.r5.validation.InstanceValidator.validateElement(InstanceValidator.java:3783)<br>
    at org.hl7.fhir.r5.validation.InstanceValidator.validateElement(InstanceValidator.java:3783)<br>
    at org.hl7.fhir.r5.validation.InstanceValidator.start(InstanceValidator.java:2716)<br>
    at org.hl7.fhir.r5.validation.InstanceValidator.validateResource(InstanceValidator.java:4089)<br>
    at org.hl7.fhir.r5.validation.InstanceValidator.validate(InstanceValidator.java:738)<br>
    at org.hl7.fhir.r5.validation.InstanceValidator.validate(InstanceValidator.java:698)<br>
    at org.hl7.fhir.igtools.publisher.Publisher.validate(Publisher.java:2877)<br>
    at org.hl7.fhir.igtools.publisher.Publisher.validate(Publisher.java:2854)<br>
    at org.hl7.fhir.igtools.publisher.Publisher.createIg(Publisher.java:619)<br>
    at org.hl7.fhir.igtools.publisher.Publisher.execute(Publisher.java:554)<br>
    at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:5103)<br>
Exception in thread "main" java.lang.NullPointerException<br>
    at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:5113)</p>



<a name="161070242"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/NPE%20only%20in%20CI%20build/near/161070242" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/NPE.20only.20in.20CI.20build.html#161070242">(Mar 18 2019 at 15:58)</a>:</h4>
<p>I'm seeing what looks like the same issue in the DEQM build now; it builds locally for me, but gets that error in the CI build.</p>



<a name="161075396"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/NPE%20only%20in%20CI%20build/near/161075396" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/NPE.20only.20in.20CI.20build.html#161075396">(Mar 18 2019 at 16:56)</a>:</h4>
<p>here is the branch that has the NPE error :</p>
<p><a href="https://github.com/HL7/davinci-deqm/tree/20190318_NPE_Error" target="_blank" title="https://github.com/HL7/davinci-deqm/tree/20190318_NPE_Error">https://github.com/HL7/davinci-deqm/tree/20190318_NPE_Error</a></p>
<p>The trace is vitrually the same as Rick's.  The first resource that is validated locally is devicerequest-deqm and like Rick this validates fine using UHN $validate.   I'll check the rest in a minute</p>



<a name="161083015"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/NPE%20only%20in%20CI%20build/near/161083015" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/NPE.20only.20in.20CI.20build.html#161083015">(Mar 18 2019 at 18:24)</a>:</h4>
<p>I did an independent validation of all the generated DEQM resources using UHN $validate and here is what I found:</p>



<a name="161083020"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/NPE%20only%20in%20CI%20build/near/161083020" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/NPE.20only.20in.20CI.20build.html#161083020">(Mar 18 2019 at 18:25)</a>:</h4>
<p>1. ...validating file "CapabilityStatement-receiver-server.json" as CapabilityStatement<br>
CapabilityStatements:  Generated Output ERROR   [CapabilityStatement]   <br>
Profile <a href="http://hl7.org/fhir/StructureDefinition/CapabilityStatement" target="_blank" title="http://hl7.org/fhir/StructureDefinition/CapabilityStatement">http://hl7.org/fhir/StructureDefinition/CapabilityStatement</a>, Element 'CapabilityStatement.acceptUnknown': minimum required = 1, but only found 0</p>
<p>Even though the source file do indeed contain this element is absent in all the capabilityStatements </p>
<p>2. ...validating file "StructureDefinition-practitioner-deqm.json" as StructureDefinition<br>
Validation output</p>
<p>ERROR   [StructureDefinition.snapshot.element[16].example.valueUri] <br>
URI values cannot have whitespace<br>
ERROR   [StructureDefinition.snapshot.element[25].example.valueUri] <br>
URI values cannot have whitespace</p>
<p>one these elements is "id": "Practitioner.identifier.system" and the offending bit...</p>
<div class="codehilite"><pre><span></span>&quot;example&quot;: [
  {
    &quot;label&quot;: &quot;General&quot;,
    &quot;valueUri&quot;: &quot;http://www.acme.com/identifiers/patient or urn:ietf:rfc:3986 if the Identifier.value itself is a full uri&quot;
  }
],
...
</pre></div>


<p>This element traces all the way back to US Core and I can't find it in my copy or the repo copy of the US Core source spreadsheet.  It show ups in the output files however.  I don't recollect ever having adding this to US Core ( although I may certainly have at some point) This error occurs for StructureDefinition-organization-deqm.json and StructureDefinition-pracititioner-deqm.json</p>
<p>3. lots of errors in the expansions.json Bundle but I did not investigate that.</p>



<a name="161085879"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/NPE%20only%20in%20CI%20build/near/161085879" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nagesh Bashyam <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/NPE.20only.20in.20CI.20build.html#161085879">(Mar 18 2019 at 18:56)</a>:</h4>
<p>Any update on the issue, I am seeing the same thing in CRN build.<br>
<a href="http://build.fhir.org/ig/HL7/coordinated-registry-network/build.log" target="_blank" title="http://build.fhir.org/ig/HL7/coordinated-registry-network/build.log">http://build.fhir.org/ig/HL7/coordinated-registry-network/build.log</a></p>



<a name="161086107"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/NPE%20only%20in%20CI%20build/near/161086107" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/NPE.20only.20in.20CI.20build.html#161086107">(Mar 18 2019 at 18:59)</a>:</h4>
<p>Is everybody profiling off of US Core?</p>



<a name="161086124"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/NPE%20only%20in%20CI%20build/near/161086124" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/NPE.20only.20in.20CI.20build.html#161086124">(Mar 18 2019 at 18:59)</a>:</h4>
<p>is that the common thread?</p>



<a name="161087753"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/NPE%20only%20in%20CI%20build/near/161087753" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/NPE.20only.20in.20CI.20build.html#161087753">(Mar 18 2019 at 19:19)</a>:</h4>
<p>I'll do a new release. The error makes no sense to me</p>



<a name="161102212"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/NPE%20only%20in%20CI%20build/near/161102212" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/NPE.20only.20in.20CI.20build.html#161102212">(Mar 18 2019 at 22:28)</a>:</h4>
<p>still happening and here my trace</p>
<div class="codehilite"><pre><span></span>Validating Resources                                                             (41.0376sec)
 .. validate /scratch/ig-build-temp-9TFFOE/repo/source/resources/ig              (41.0376sec)
 .. /scratch/ig-build-temp-9TFFOE/repo/source/resources/ig                       (41.0376sec)
     validating Data Exchange For Quality Measures                               (41.0376sec)
java.lang.NullPointerException                                                   (41.0379sec)
Publishing Content Failed: null                                                  (41.0380sec)
                                                                                 (41.0380sec)
Use -? to get command line help                                                  (41.0380sec)
                                                                                 (41.0380sec)
Stack Dump (for debugging):                                                      (41.0380sec)
java.lang.NullPointerException
    at org.hl7.fhir.igtools.publisher.ValidationServices.fetch(ValidationServices.java:62)
    at org.hl7.fhir.r5.validation.InstanceValidator.checkReference(InstanceValidator.java:1753)
    at org.hl7.fhir.r5.validation.InstanceValidator.validateElement(InstanceValidator.java:3773)
    at org.hl7.fhir.r5.validation.InstanceValidator.validateElement(InstanceValidator.java:3783)
    at org.hl7.fhir.r5.validation.InstanceValidator.validateElement(InstanceValidator.java:3783)
    at org.hl7.fhir.r5.validation.InstanceValidator.start(InstanceValidator.java:2716)
    at org.hl7.fhir.r5.validation.InstanceValidator.validateResource(InstanceValidator.java:4089)
    at org.hl7.fhir.r5.validation.InstanceValidator.validate(InstanceValidator.java:738)
    at org.hl7.fhir.r5.validation.InstanceValidator.validate(InstanceValidator.java:698)
    at org.hl7.fhir.igtools.publisher.Publisher.validate(Publisher.java:2877)
    at org.hl7.fhir.igtools.publisher.Publisher.validate(Publisher.java:2854)
    at org.hl7.fhir.igtools.publisher.Publisher.createIg(Publisher.java:619)
    at org.hl7.fhir.igtools.publisher.Publisher.execute(Publisher.java:554)
    at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:5103)
Exception in thread &quot;main&quot; java.lang.NullPointerException
    at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:5113)
</pre></div>



<a name="161102314"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/NPE%20only%20in%20CI%20build/near/161102314" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/NPE.20only.20in.20CI.20build.html#161102314">(Mar 18 2019 at 22:29)</a>:</h4>
<p>that's happening locally?</p>



<a name="161102911"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/NPE%20only%20in%20CI%20build/near/161102911" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/NPE.20only.20in.20CI.20build.html#161102911">(Mar 18 2019 at 22:37)</a>:</h4>
<p>nope only on autobuilder</p>



<a name="161104310"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/NPE%20only%20in%20CI%20build/near/161104310" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/NPE.20only.20in.20CI.20build.html#161104310">(Mar 18 2019 at 23:01)</a>:</h4>
<p>looks it builds right now?</p>



<a name="161107558"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/NPE%20only%20in%20CI%20build/near/161107558" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/NPE.20only.20in.20CI.20build.html#161107558">(Mar 18 2019 at 23:53)</a>:</h4>
<p>no change in autobuilder:  <a href="#narrow/stream/179297-committers.2Fnotification/topic/ig-build/near/161107507" title="#narrow/stream/179297-committers.2Fnotification/topic/ig-build/near/161107507">https://chat.fhir.org/#narrow/stream/179297-committers.2Fnotification/topic/ig-build/near/161107507</a></p>
<p>Still getting NPE there.</p>



<a name="161122104"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/NPE%20only%20in%20CI%20build/near/161122104" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/NPE.20only.20in.20CI.20build.html#161122104">(Mar 19 2019 at 05:23)</a>:</h4>
<p>@GG ty</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
