---
layout: page
title: "FHIR Chat  · Spurious Value Set Errors · IG creation"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/index.html">IG creation</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Spurious.20Value.20Set.20Errors.html">Spurious Value Set Errors</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="274885644"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Spurious%20Value%20Set%20Errors/near/274885644" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Saul Kravitz <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Spurious.20Value.20Set.20Errors.html#274885644">(Mar 10 2022 at 19:43)</a>:</h4>
<p>I'm getting spurious errors on values from locally defined valuesets.<br>
See <a href="http://build.fhir.org/ig/HL7/vrdr/branches/master/qa.html">http://build.fhir.org/ig/HL7/vrdr/branches/master/qa.html</a> <br>
All 6 errors reported are, IMHO, bogus.</p>
<p>Compare <a href="http://build.fhir.org/ig/HL7/vrdr/branches/master/Location-DeathLocation-Example2.json.html">DeathLocation-Example2</a> (<a href="http://build.fhir.org/ig/HL7/vrdr/branches/master/qa.html#_scratch_ig-build-temp-FZ4KVS_repo_fsh-generated_resources_Location-DeathLocation-Example2">3 errors</a>) and <a href="http://build.fhir.org/ig/HL7/vrdr/branches/master/Location-DeathLocation-Example1.json.html">DeathLocation-Example1</a> <a href="http://build.fhir.org/ig/HL7/vrdr/branches/master/qa.html#_scratch_ig-build-temp-FZ4KVS_repo_fsh-generated_resources_Location-DeathLocation-Example1">0 errors</a>.</p>
<p>The error complains that "NY" is not a member of a value set that it is clearly a member of.<br>
The instance with no error is happy with "MA" from the same value set.</p>
<p>The reference to the JurisdictionVS in each case is assigning a code to a value from a valueset that is valid.</p>



<a name="274886161"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Spurious%20Value%20Set%20Errors/near/274886161" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Spurious.20Value.20Set.20Errors.html#274886161">(Mar 10 2022 at 19:47)</a>:</h4>
<p>have you cleared the terminology cache?</p>



<a name="274887684"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Spurious%20Value%20Set%20Errors/near/274887684" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Saul Kravitz <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Spurious.20Value.20Set.20Errors.html#274887684">(Mar 10 2022 at 20:00)</a>:</h4>
<p>sorry....didn't try that....<br>
How?</p>
<p>as usual:  thx for the quick response.</p>



<a name="274887836"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Spurious%20Value%20Set%20Errors/near/274887836" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Spurious.20Value.20Set.20Errors.html#274887836">(Mar 10 2022 at 20:01)</a>:</h4>
<p>delete all the files in the folder</p>



<a name="274891811"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Spurious%20Value%20Set%20Errors/near/274891811" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Saul Kravitz <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Spurious.20Value.20Set.20Errors.html#274891811">(Mar 10 2022 at 20:38)</a>:</h4>
<p>I cleared out input-cache/txcache  and reran locally.   <strong>No change.</strong><br>
input-cache/txcache isn't commited to github, so I'm getting a clean start when the CI build runs, right?</p>



<a name="274891831"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Spurious%20Value%20Set%20Errors/near/274891831" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Spurious.20Value.20Set.20Errors.html#274891831">(Mar 10 2022 at 20:38)</a>:</h4>
<p>yes</p>



<a name="274892374"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Spurious%20Value%20Set%20Errors/near/274892374" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Saul Kravitz <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Spurious.20Value.20Set.20Errors.html#274892374">(Mar 10 2022 at 20:43)</a>:</h4>
<p>So, consistent behavior on local and CI builds with clean caches.</p>



<a name="274895273"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Spurious%20Value%20Set%20Errors/near/274895273" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Saul Kravitz <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Spurious.20Value.20Set.20Errors.html#274895273">(Mar 10 2022 at 21:10)</a>:</h4>
<p>One of the errors has gone away..... (the one related to NY).</p>
<p>The error relating to the valueCode in an extension remains.<br>
<strong>This is valid:</strong></p>
<div class="codehilite" data-code-language="JSON"><pre><span></span><code><span class="nt">"address"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nt">"city"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Queens"</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nt">"state"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"NY"</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nt">"_state"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="nt">"extension"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="nt">"url"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"http://hl7.org/fhir/us/vrdr/StructureDefinition/Location-Jurisdiction-Id"</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="err">**</span><span class="nt">"valueCode"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"YC"</span><span class="err">**</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">      </span><span class="p">]</span><span class="w"></span>
<span class="p">]</span><span class="w"></span>
</code></pre></div>



<a name="274905965"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Spurious%20Value%20Set%20Errors/near/274905965" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Spurious.20Value.20Set.20Errors.html#274905965">(Mar 10 2022 at 22:39)</a>:</h4>
<p>this is because the value set depends on a value set that has excludes, and the code that infers the system based on the value set definition does not handle excludes. Because the logic gets really complicated... and who does that?</p>



<a name="274910479"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Spurious%20Value%20Set%20Errors/near/274910479" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Spurious.20Value.20Set.20Errors.html#274910479">(Mar 10 2022 at 23:24)</a>:</h4>
<p>fixed next release. Now I'm just ignoring excludes</p>



<a name="274911195"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Spurious%20Value%20Set%20Errors/near/274911195" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Saul Kravitz <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Spurious.20Value.20Set.20Errors.html#274911195">(Mar 10 2022 at 23:33)</a>:</h4>
<p>Thx... sorry for being such a boundary-pusher....</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
