---
layout: page
title: "FHIR Chat  · IG Publisher: Bug if List Instance contains  encounter · IG creation"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/index.html">IG creation</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.3A.20Bug.20if.20List.20Instance.20contains.20.20encounter.html">IG Publisher: Bug if List Instance contains  encounter</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="252773757"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%3A%20Bug%20if%20List%20Instance%20contains%20%20encounter/near/252773757" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.3A.20Bug.20if.20List.20Instance.20contains.20.20encounter.html#252773757">(Sep 10 2021 at 11:51)</a>:</h4>
<p>If an Instance of List contains a reference to an Encounter in  list.encounter - IG publisher fails:</p>
<div class="codehilite"><pre><span></span><code>Exception in thread &quot;main&quot; java.lang.Error: Wrong node type
    at org.hl7.fhir.utilities.xhtml.XhtmlNode.addText(XhtmlNode.java:270)
    at org.hl7.fhir.utilities.xhtml.XhtmlNode.tx(XhtmlNode.java:638)
    at org.hl7.fhir.r5.renderers.ListRenderer.shortForRef(ListRenderer.java:222)
    at org.hl7.fhir.r5.renderers.ListRenderer.render(ListRenderer.java:62)
    at org.hl7.fhir.r5.renderers.ResourceRenderer.render(ResourceRenderer.java:84)
    at org.hl7.fhir.igtools.publisher.Publisher.generateNarratives(Publisher.java:1180)
    at org.hl7.fhir.igtools.publisher.Publisher.loadConformance(Publisher.java:3921)
    at org.hl7.fhir.igtools.publisher.Publisher.createIg(Publisher.java:897)
    at org.hl7.fhir.igtools.publisher.Publisher.execute(Publisher.java:752)
    at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:8664)
</code></pre></div>



<a name="252773758"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%3A%20Bug%20if%20List%20Instance%20contains%20%20encounter/near/252773758" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.3A.20Bug.20if.20List.20Instance.20contains.20.20encounter.html#252773758">(Sep 10 2021 at 11:51)</a>:</h4>
<p>project to reproduce: <a href="https://github.com/patrick-werner/listEncounterFHIRbug">https://github.com/patrick-werner/listEncounterFHIRbug</a></p>



<a name="252774720"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%3A%20Bug%20if%20List%20Instance%20contains%20%20encounter/near/252774720" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.3A.20Bug.20if.20List.20Instance.20contains.20.20encounter.html#252774720">(Sep 10 2021 at 11:59)</a>:</h4>
<p>Filed an issue: <a href="https://github.com/HL7/fhir-ig-publisher/issues/315">https://github.com/HL7/fhir-ig-publisher/issues/315</a></p>



<a name="270230020"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%3A%20Bug%20if%20List%20Instance%20contains%20%20encounter/near/270230020" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.3A.20Bug.20if.20List.20Instance.20contains.20.20encounter.html#270230020">(Feb 01 2022 at 15:32)</a>:</h4>
<p>I have a slightly, but related, different problem. It is very specific to the List resource. Anytime I use .contained with List, I get IG build warnings. These warnings complain about not finding the .html pages for the contained resources. When a contained resource does not get their own page. The rendering of the List instance looks different than rendering of Observation.<br>
See my example IG -- <a href="http://build.fhir.org/ig/JohnMoehrke/testList/branches/main/index.html">http://build.fhir.org/ig/JohnMoehrke/testList/branches/main/index.html</a></p>



<a name="270230122"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%3A%20Bug%20if%20List%20Instance%20contains%20%20encounter/near/270230122" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.3A.20Bug.20if.20List.20Instance.20contains.20.20encounter.html#270230122">(Feb 01 2022 at 15:33)</a>:</h4>
<p>github repo -- <a href="https://github.com/JohnMoehrke/testList">https://github.com/JohnMoehrke/testList</a></p>



<a name="270230189"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%3A%20Bug%20if%20List%20Instance%20contains%20%20encounter/near/270230189" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.3A.20Bug.20if.20List.20Instance.20contains.20.20encounter.html#270230189">(Feb 01 2022 at 15:33)</a>:</h4>
<p>is this a new IG builder issue? Is this a IG templating issue?  <span class="user-mention" data-user-id="191316">@Grahame Grieve</span></p>



<a name="270232052"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%3A%20Bug%20if%20List%20Instance%20contains%20%20encounter/near/270232052" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.3A.20Bug.20if.20List.20Instance.20contains.20.20encounter.html#270232052">(Feb 01 2022 at 15:43)</a>:</h4>
<p>Actually, it happens more commonly with contained resources.  There's a fix to both templates and publisher that I'm finishing testing now, so should be available 'soon'</p>



<a name="270232774"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%3A%20Bug%20if%20List%20Instance%20contains%20%20encounter/near/270232774" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.3A.20Bug.20if.20List.20Instance.20contains.20.20encounter.html#270232774">(Feb 01 2022 at 15:47)</a>:</h4>
<p>good to know. I don't recall this happening a few months ago, but during the great CI-Build purge of 2022, I was forced to rebuild an IG and have been trying to track this down for a day.</p>



<a name="270236308"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%3A%20Bug%20if%20List%20Instance%20contains%20%20encounter/near/270236308" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.3A.20Bug.20if.20List.20Instance.20contains.20.20encounter.html#270236308">(Feb 01 2022 at 16:06)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191404">John Moehrke</span> <a href="#narrow/stream/179252-IG-creation/topic/IG.20Publisher.3A.20Bug.20if.20List.20Instance.20contains.20.20encounter/near/270232774">said</a>:</p>
<blockquote>
<p>but during the great CI-Build purge of 2022</p>
</blockquote>
<p>me in the future:<br>
I remember way back when, and I don't mean to scare you young rascals, but we had chaos for days during the great CI-Build purge.  He whose name shall not be mentioned but who some say was the great Josh Mandel reigned hellfire from on high as He purged builds left, right, and center.  We did not realize it at the time but He was testing us and our commitment.  That day will always be remembered.</p>



<a name="270237218"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%3A%20Bug%20if%20List%20Instance%20contains%20%20encounter/near/270237218" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.3A.20Bug.20if.20List.20Instance.20contains.20.20encounter.html#270237218">(Feb 01 2022 at 16:10)</a>:</h4>
<p>that deserves to be memorialized</p>



<a name="270460350"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%3A%20Bug%20if%20List%20Instance%20contains%20%20encounter/near/270460350" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.3A.20Bug.20if.20List.20Instance.20contains.20.20encounter.html#270460350">(Feb 02 2022 at 21:26)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191320">Lloyd McKenzie</span> <a href="#narrow/stream/179252-IG-creation/topic/IG.20Publisher.3A.20Bug.20if.20List.20Instance.20contains.20.20encounter/near/270232052">said</a>:</p>
<blockquote>
<p>Actually, it happens more commonly with contained resources.  There's a fix to both templates and publisher that I'm finishing testing now, so should be available 'soon'</p>
</blockquote>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> is there as jira or github/issue tracking this fix?</p>



<a name="270476735"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%3A%20Bug%20if%20List%20Instance%20contains%20%20encounter/near/270476735" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.3A.20Bug.20if.20List.20Instance.20contains.20.20encounter.html#270476735">(Feb 02 2022 at 23:38)</a>:</h4>
<p><a href="https://github.com/HL7/fhir-ig-publisher/pull/386/">https://github.com/HL7/fhir-ig-publisher/pull/386/</a></p>



<a name="270670763"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%3A%20Bug%20if%20List%20Instance%20contains%20%20encounter/near/270670763" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Eastwood <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.3A.20Bug.20if.20List.20Instance.20contains.20.20encounter.html#270670763">(Feb 04 2022 at 05:43)</a>:</h4>
<p>Hi folks; follow-up question about rendering List instances: </p>
<p><span class="user-mention silent" data-user-id="191404">John Moehrke</span> <a href="#narrow/stream/179252-IG-creation/topic/IG.20Publisher.3A.20Bug.20if.20List.20Instance.20contains.20.20encounter/near/270230020">said</a>:</p>
<blockquote>
<p>...The rendering of the List instance looks different than rendering of Observation.</p>
</blockquote>
<p>I think am seeing the same thing with List instances - extensions not displayed, different elements running onto the same line, element names not enboldened. Taking your inspiration John, I created a stripped down IG to demonstrate this:</p>
<ul>
<li>a <a href="http://hl7.org/fhir/list-example-double-cousin-relationship-pedigree.html">R4 List example</a> copied and commented out the hand-crafted narrative - see <a href="http://build.fhir.org/ig/robeastwood-agency/test-fhir-ig/branches/List-examples/List-example-double-cousin-relationship.html">here</a></li>
<li>a simple List example with a core spec List extension - see <a href="http://build.fhir.org/ig/robeastwood-agency/test-fhir-ig/branches/List-examples/List-example3.html">here</a></li>
</ul>
<p><strong>Questions</strong></p>
<ul>
<li><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> - does your linked PR #386 address this? </li>
<li>or is this a new / elsewhere documented issue? (I have searched and found only this thread)</li>
</ul>



<a name="270671840"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%3A%20Bug%20if%20List%20Instance%20contains%20%20encounter/near/270671840" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.3A.20Bug.20if.20List.20Instance.20contains.20.20encounter.html#270671840">(Feb 04 2022 at 06:02)</a>:</h4>
<p>Nope.  Mine is focused on contained resources and some rendering enhancements</p>



<a name="270671933"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%3A%20Bug%20if%20List%20Instance%20contains%20%20encounter/near/270671933" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Eastwood <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.3A.20Bug.20if.20List.20Instance.20contains.20.20encounter.html#270671933">(Feb 04 2022 at 06:04)</a>:</h4>
<p>Thanks <span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span></p>



<a name="270917145"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%3A%20Bug%20if%20List%20Instance%20contains%20%20encounter/near/270917145" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Eastwood <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.3A.20Bug.20if.20List.20Instance.20contains.20.20encounter.html#270917145">(Feb 06 2022 at 23:06)</a>:</h4>
<p>Re List example rendering: created new thread rather than hijack this one:<br>
<a href="#narrow/stream/179252-IG-creation/topic/Rendering.20List.20examples.20-.20seems.20consistent">https://chat.fhir.org/#narrow/stream/179252-IG-creation/topic/Rendering.20List.20examples.20-.20seems.20consistent</a></p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
