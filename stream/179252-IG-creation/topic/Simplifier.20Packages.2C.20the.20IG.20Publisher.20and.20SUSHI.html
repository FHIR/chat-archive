---
layout: page
title: "FHIR Chat  · Simplifier Packages, the IG Publisher and SUSHI · IG creation"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/index.html">IG creation</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Simplifier.20Packages.2C.20the.20IG.20Publisher.20and.20SUSHI.html">Simplifier Packages, the IG Publisher and SUSHI</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="206789098"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Simplifier%20Packages%2C%20the%20IG%20Publisher%20and%20SUSHI/near/206789098" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noemi Deppenwiese <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Simplifier.20Packages.2C.20the.20IG.20Publisher.20and.20SUSHI.html#206789098">(Aug 13 2020 at 07:55)</a>:</h4>
<p>I ran into an issue with dependencies on Simplifier packages I believe is caused by the IG Publisher. Specifically, the build works fine with version 1.1.2 of the publisher jar but breaks in 1.1.3:</p>
<div class="codehilite"><pre><span></span><code>Stack Dump (for debugging):                                                      (00:30.0299)
java.lang.NullPointerException
        at org.hl7.fhir.igtools.publisher.Publisher.fixPackageUrl(Publisher.java:2774)
        at org.hl7.fhir.igtools.publisher.Publisher.loadIg(Publisher.java:2600)
        at org.hl7.fhir.igtools.publisher.Publisher.initializeFromIg(Publisher.java:1785)
        at org.hl7.fhir.igtools.publisher.Publisher.initialize(Publisher.java:1365)
        at org.hl7.fhir.igtools.publisher.Publisher.execute(Publisher.java:702)
        at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:7835)
</code></pre></div>


<p>In my SUSHI config.yaml, i have:</p>
<div class="codehilite"><pre><span></span><code>dependencies:
  de.basisprofil.r4:
    uri: https://simplifier.net/guide/basisprofil-de-r4
    version: 0.9.6
</code></pre></div>


<p>because if i only write <code> de.basisprofil.r4: 0.9.6</code> SUSHI tells me <code>error Failed to add de.basisprofil.r4:0.9.6 to ImplementationGuide instance because SUSHI could not find the IG URL in the dependency </code>.  (The dependency is tranlated to</p>
<div class="codehilite"><pre><span></span><code>    {
      &quot;packageId&quot;: &quot;de.basisprofil.r4&quot;,
      &quot;uri&quot;: &quot;https://simplifier.net/guide/basisprofil-de-r4&quot;,
      &quot;version&quot;: &quot;0.9.6&quot;,
      &quot;id&quot;: &quot;de_basisprofil_r4&quot;
    }
</code></pre></div>


<p>by SUSHI.)<br>
If I completly remove the dependency or use older publisher versions, it works fine...</p>



<a name="206789586"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Simplifier%20Packages%2C%20the%20IG%20Publisher%20and%20SUSHI/near/206789586" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Simplifier.20Packages.2C.20the.20IG.20Publisher.20and.20SUSHI.html#206789586">(Aug 13 2020 at 08:02)</a>:</h4>
<p>already fixed. Due for release in the next 24 hours</p>



<a name="206919938"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Simplifier%20Packages%2C%20the%20IG%20Publisher%20and%20SUSHI/near/206919938" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noemi Deppenwiese <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Simplifier.20Packages.2C.20the.20IG.20Publisher.20and.20SUSHI.html#206919938">(Aug 14 2020 at 11:30)</a>:</h4>
<p>With version 1.1.11, the null pointer error has disappeared. But I now get</p>
<div class="codehilite"><pre><span></span><code>org.hl7.fhir.exceptions.FHIRException: Fehler beim Lesen C:\Users\Noemi\.fhir\packages\de.basisprofil.r4#0.9.6\package\CodeSystem-arge-ik-klassifikation.json aus dem Paket de.basisprofil.r4#0.9.6: An id is required for a deferred load resource
        at org.hl7.fhir.r5.context.SimpleWorkerContext.loadFromPackageInt(SimpleWorkerContext.java:454)
        at org.hl7.fhir.r5.context.SimpleWorkerContext.loadFromPackage(SimpleWorkerContext.java:381)
        at org.hl7.fhir.igtools.publisher.Publisher.loadFromPackage(Publisher.java:2738)
        at org.hl7.fhir.igtools.publisher.Publisher.loadIg(Publisher.java:2696)
        at org.hl7.fhir.igtools.publisher.Publisher.initializeFromIg(Publisher.java:1846)
        at org.hl7.fhir.igtools.publisher.Publisher.initialize(Publisher.java:1418)
        at org.hl7.fhir.igtools.publisher.Publisher.execute(Publisher.java:709)
        at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:7944)
Caused by: org.hl7.fhir.exceptions.FHIRException: An id is required for a deferred load resource
        at org.hl7.fhir.r5.context.CanonicalResourceManager.register(CanonicalResourceManager.java:200)
        at org.hl7.fhir.r5.context.BaseWorkerContext.registerResourceFromPackage(BaseWorkerContext.java:289)
        at org.hl7.fhir.r5.context.SimpleWorkerContext.loadFromPackageInt(SimpleWorkerContext.java:451)
        ... 7 more
</code></pre></div>


<p>It seems to be a Simplifier issue, also happens with other Simplifier packages (in another case, the resource it failed to load was a StructureDefinition, so i think it is just the first resource it tries to load).</p>



<a name="207143812"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Simplifier%20Packages%2C%20the%20IG%20Publisher%20and%20SUSHI/near/207143812" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noemi Deppenwiese <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Simplifier.20Packages.2C.20the.20IG.20Publisher.20and.20SUSHI.html#207143812">(Aug 17 2020 at 13:31)</a>:</h4>
<p>This is still an issue with version 1.1.12 of the publisher.</p>



<a name="207149325"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Simplifier%20Packages%2C%20the%20IG%20Publisher%20and%20SUSHI/near/207149325" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ward Weistra <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Simplifier.20Packages.2C.20the.20IG.20Publisher.20and.20SUSHI.html#207149325">(Aug 17 2020 at 14:19)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="221444">@Noemi Deppenwiese</span>, the 'ArgeIkKlassifikation' in <code>de.basisprofil.r4 0.9.6</code> (deprecated/unlisted package version) indeed doesn't seem to have an <code>id</code> element: <a href="https://simplifier.net/packages/de.basisprofil.r4/0.9.6/files/129569/~xml">https://simplifier.net/packages/de.basisprofil.r4/0.9.6/files/129569/~xml</a><br>
However the same resource in the latest package version <code>de.basisprofil.r4 0.9.11</code> does: <a href="https://simplifier.net/packages/de.basisprofil.r4/0.9.11/files/142280/~xml">https://simplifier.net/packages/de.basisprofil.r4/0.9.11/files/142280/~xml</a></p>
<p>Would it be an option to use the newer package version?</p>
<p>If the IG publisher basically mandates <code>id</code> perhaps we should make this a rule and not something people run into only when using it <span aria-label="thinking" class="emoji emoji-1f914" role="img" title="thinking">:thinking:</span></p>



<a name="207150969"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Simplifier%20Packages%2C%20the%20IG%20Publisher%20and%20SUSHI/near/207150969" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noemi Deppenwiese <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Simplifier.20Packages.2C.20the.20IG.20Publisher.20and.20SUSHI.html#207150969">(Aug 17 2020 at 14:33)</a>:</h4>
<p>Thanks <span class="user-mention" data-user-id="203235">@Ward Weistra</span> ! Unfortunatly, some other resources have no id even in version 0.9.11 (I now get the error for <code>GkvVersionEgk.json</code>). I will reach out to the people responsible for maintaining the package. <br>
I believe it would really help if Simplifier gave out a warning if trying to publishing a package with some resources lacking ids, since i encounterd a few Simplifier packages with this issue and this it seems to be a deal-breaker for the publisher.</p>



<a name="207152613"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Simplifier%20Packages%2C%20the%20IG%20Publisher%20and%20SUSHI/near/207152613" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ward Weistra <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Simplifier.20Packages.2C.20the.20IG.20Publisher.20and.20SUSHI.html#207152613">(Aug 17 2020 at 14:48)</a>:</h4>
<p>Thanks  <span class="user-mention" data-user-id="221444">@Noemi Deppenwiese</span>, I guess contacting them for now is the shortest route.<br>
I agree that IF this is mandatory  in a package Simplfier should warn about this, but then I'd like to make that explicit so other package generators can also implement that.<br>
<span class="user-mention" data-user-id="191316">@Grahame Grieve</span> Do you think the IG publisher can have a workaround for resources without <code>id</code> or should we make <code>id</code> mandatory for every resource in a package?</p>



<a name="207185392"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Simplifier%20Packages%2C%20the%20IG%20Publisher%20and%20SUSHI/near/207185392" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Simplifier.20Packages.2C.20the.20IG.20Publisher.20and.20SUSHI.html#207185392">(Aug 17 2020 at 19:14)</a>:</h4>
<p>mandating the id was.. probably an oversight. It's a minor irritation that resources don't have an id, but I can deal with it. I just forgot while I was working on a feature</p>



<a name="207185467"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Simplifier%20Packages%2C%20the%20IG%20Publisher%20and%20SUSHI/near/207185467" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Simplifier.20Packages.2C.20the.20IG.20Publisher.20and.20SUSHI.html#207185467">(Aug 17 2020 at 19:15)</a>:</h4>
<p>fixing this is on my todo list, but didn't make 1.1.13 because I'm way behind</p>



<a name="207221255"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Simplifier%20Packages%2C%20the%20IG%20Publisher%20and%20SUSHI/near/207221255" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Simplifier.20Packages.2C.20the.20IG.20Publisher.20and.20SUSHI.html#207221255">(Aug 18 2020 at 03:58)</a>:</h4>
<p>fixed next release</p>



<a name="207266606"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Simplifier%20Packages%2C%20the%20IG%20Publisher%20and%20SUSHI/near/207266606" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ward Weistra <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Simplifier.20Packages.2C.20the.20IG.20Publisher.20and.20SUSHI.html#207266606">(Aug 18 2020 at 14:33)</a>:</h4>
<p>Thanks <span class="user-mention" data-user-id="191316">@Grahame Grieve</span>! <span class="user-mention" data-user-id="221444">@Noemi Deppenwiese</span> FYI <span aria-label="point up" class="emoji emoji-1f446" role="img" title="point up">:point_up:</span></p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
