---
layout: page
title: "FHIR Chat  · ✔ Java error thrown on invalid invariant · IG creation"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/index.html">IG creation</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/.E2.9C.94.20Java.20error.20thrown.20on.20invalid.20invariant.html">✔ Java error thrown on invalid invariant</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="261988664"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/%E2%9C%94%20Java%20error%20thrown%20on%20invalid%20invariant/near/261988664" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/.E2.9C.94.20Java.20error.20thrown.20on.20invalid.20invariant.html#261988664">(Nov 18 2021 at 20:50)</a>:</h4>
<p>I have an extension that has a value of type Date.  When I create an example that includes this extension, I get the following Java error that stops the publisher:</p>
<div class="codehilite"><pre><span></span><code>Unhandled Exception: org.hl7.fhir.exceptions.FHIRException: Problem processing expression not(this.exists()) or this.length() == 10 in profile http://hl7.org/fhir/us/davinci-pas/StructureDefinition/extension-diagnosisRecordedDate path Bundle.entry[0].resource.ofType(Claim).diagnosis[0].extension[0].value.ofType(date): Error @1, 2: The function &quot;not&quot; requires 0 parameters (00:45.0067)
...
...
Stack Dump (for debugging):                                                      (00:45.0081)
org.hl7.fhir.exceptions.FHIRException: Problem processing expression not(this.exists()) or this.length() == 10 in profile http://hl7.org/fhir/us/davinci-pas/StructureDefinition/extension-diagnosisRecordedDate path Bundle.entry[0].resource.ofType(Claim).diagnosis[0].extension[0].value.ofType(date): Error @1, 2: The function &quot;not&quot; requires 0 parameters
    at org.hl7.fhir.validation.instance.InstanceValidator.checkInvariant(InstanceValidator.java:5186)
    at org.hl7.fhir.validation.instance.InstanceValidator.checkInvariants(InstanceValidator.java:5135)
    at org.hl7.fhir.validation.instance.InstanceValidator.checkInvariants(InstanceValidator.java:5005)
    at org.hl7.fhir.validation.instance.InstanceValidator.checkChildByDefinition(InstanceValidator.java:4627)
    at org.hl7.fhir.validation.instance.InstanceValidator.checkChild(InstanceValidator.java:4513)
    at org.hl7.fhir.validation.instance.InstanceValidator.validateElement(InstanceValidator.java:4465)
    at org.hl7.fhir.validation.instance.InstanceValidator.checkExtension(InstanceValidator.java:1658)
    at org.hl7.fhir.validation.instance.InstanceValidator.checkChildByDefinition(InstanceValidator.java:4664)
    at org.hl7.fhir.validation.instance.InstanceValidator.checkChild(InstanceValidator.java:4513)
    at org.hl7.fhir.validation.instance.InstanceValidator.validateElement(InstanceValidator.java:4465)
    at org.hl7.fhir.validation.instance.InstanceValidator.checkChildByDefinition(InstanceValidator.java:4686)
    at org.hl7.fhir.validation.instance.InstanceValidator.checkChild(InstanceValidator.java:4513)
    at org.hl7.fhir.validation.instance.InstanceValidator.validateElement(InstanceValidator.java:4465)
    at org.hl7.fhir.validation.instance.InstanceValidator.startInner(InstanceValidator.java:4180)
    at org.hl7.fhir.validation.instance.InstanceValidator.start(InstanceValidator.java:4043)
    at org.hl7.fhir.validation.instance.InstanceValidator.validateResource(InstanceValidator.java:5280)
    at org.hl7.fhir.validation.instance.InstanceValidator.validateContains(InstanceValidator.java:4350)
    at org.hl7.fhir.validation.instance.InstanceValidator.checkChildByDefinition(InstanceValidator.java:4669)
    at org.hl7.fhir.validation.instance.InstanceValidator.checkChild(InstanceValidator.java:4513)
    at org.hl7.fhir.validation.instance.InstanceValidator.validateElement(InstanceValidator.java:4465)
    at org.hl7.fhir.validation.instance.InstanceValidator.checkChildByDefinition(InstanceValidator.java:4686)
    at org.hl7.fhir.validation.instance.InstanceValidator.checkChild(InstanceValidator.java:4513)
    at org.hl7.fhir.validation.instance.InstanceValidator.validateElement(InstanceValidator.java:4465)
    at org.hl7.fhir.validation.instance.InstanceValidator.startInner(InstanceValidator.java:4180)
    at org.hl7.fhir.validation.instance.InstanceValidator.start(InstanceValidator.java:4043)
    at org.hl7.fhir.validation.instance.InstanceValidator.validateResource(InstanceValidator.java:5280)
    at org.hl7.fhir.validation.instance.InstanceValidator.validate(InstanceValidator.java:751)
    at org.hl7.fhir.validation.instance.InstanceValidator.validate(InstanceValidator.java:730)
    at org.hl7.fhir.igtools.publisher.Publisher.validate(Publisher.java:5071)
    at org.hl7.fhir.igtools.publisher.Publisher.validate(Publisher.java:4931)
    at org.hl7.fhir.igtools.publisher.Publisher.createIg(Publisher.java:907)
    at org.hl7.fhir.igtools.publisher.Publisher.execute(Publisher.java:755)
    at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:8777)
</code></pre></div>
<p>This isn't my invariant, I'm assuming that it is inherited from somewhere but I can't actually see where.</p>
<p>For now, I'm going to remove the date from my example to get around this error.</p>



<a name="261995300"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/%E2%9C%94%20Java%20error%20thrown%20on%20invalid%20invariant/near/261995300" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Notification Bot <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/.E2.9C.94.20Java.20error.20thrown.20on.20invalid.20invariant.html#261995300">(Nov 18 2021 at 21:43)</a>:</h4>
<p><span class="user-mention silent" data-user-id="192166">Jean Duteau</span> has marked this topic as resolved.</p>



<a name="261995366"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/%E2%9C%94%20Java%20error%20thrown%20on%20invalid%20invariant/near/261995366" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/.E2.9C.94.20Java.20error.20thrown.20on.20invalid.20invariant.html#261995366">(Nov 18 2021 at 21:44)</a>:</h4>
<p>nothing to see here - it was my invariant</p>



<a name="261995655"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/%E2%9C%94%20Java%20error%20thrown%20on%20invalid%20invariant/near/261995655" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Pyke <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/.E2.9C.94.20Java.20error.20thrown.20on.20invalid.20invariant.html#261995655">(Nov 18 2021 at 21:46)</a>:</h4>
<p>So it was your internet connection all along?</p>



<a name="261995708"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/%E2%9C%94%20Java%20error%20thrown%20on%20invalid%20invariant/near/261995708" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/.E2.9C.94.20Java.20error.20thrown.20on.20invalid.20invariant.html#261995708">(Nov 18 2021 at 21:47)</a>:</h4>
<p>different problem :)</p>



<a name="261995825"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/%E2%9C%94%20Java%20error%20thrown%20on%20invalid%20invariant/near/261995825" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Pyke <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/.E2.9C.94.20Java.20error.20thrown.20on.20invalid.20invariant.html#261995825">(Nov 18 2021 at 21:48)</a>:</h4>
<p>PEBCAK?</p>



<a name="261995838"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/%E2%9C%94%20Java%20error%20thrown%20on%20invalid%20invariant/near/261995838" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/.E2.9C.94.20Java.20error.20thrown.20on.20invalid.20invariant.html#261995838">(Nov 18 2021 at 21:48)</a>:</h4>
<p>yep - basically a bad memory.  "Who wrote this bad invariant?!?"  "And why is just being detected now?!?" "Oh look, here is the invariant in my FSH file."  "Nothing to see here!"</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
