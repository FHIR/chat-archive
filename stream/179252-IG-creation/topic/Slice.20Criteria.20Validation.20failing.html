---
layout: page
title: "FHIR Chat  · Slice Criteria Validation failing · IG creation"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/index.html">IG creation</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Slice.20Criteria.20Validation.20failing.html">Slice Criteria Validation failing</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="245458982"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Slice%20Criteria%20Validation%20failing/near/245458982" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Slice.20Criteria.20Validation.20failing.html#245458982">(Jul 09 2021 at 15:37)</a>:</h4>
<p>I have a slice whose discriminator is the value of an extension:</p>
<div class="codehilite"><pre><span></span><code>* careTeam ^slicing.discriminator.type = #value
* careTeam ^slicing.discriminator.path = &quot;extension(&#39;http://hl7.org/fhir/us/davinci-pas/StructureDefinition/extension-careTeamClaimScope&#39;).valueBoolean&quot;
* careTeam ^slicing.rules = #open
* careTeam ^slicing.description = &quot;Slice based on whether the care team member belongs to the overall claim or to an individual claim item.&quot;
* careTeam contains OverallClaimMember 0..14 and ItemClaimMember 0..10
</code></pre></div>
<p>When I run the publisher, it fails with the following error:</p>
<div class="codehilite"><pre><span></span><code>java.lang.IndexOutOfBoundsException: Index 0 out of bounds for length 0
    at java.base/jdk.internal.util.Preconditions.outOfBounds(Preconditions.java:64)
    at java.base/jdk.internal.util.Preconditions.outOfBoundsCheckIndex(Preconditions.java:70)
    at java.base/jdk.internal.util.Preconditions.checkIndex(Preconditions.java:248)
    at java.base/java.util.Objects.checkIndex(Objects.java:372)
    at java.base/java.util.ArrayList.get(ArrayList.java:458)
    at org.hl7.fhir.r5.utils.FHIRPathEngine.evaluateDefinition(FHIRPathEngine.java:5500)
    at org.hl7.fhir.validation.instance.InstanceValidator.getCriteriaForDiscriminator(InstanceValidator.java:3058)
    at org.hl7.fhir.validation.instance.InstanceValidator.sliceMatches(InstanceValidator.java:3554)
</code></pre></div>
<p>I'm assuming that it is my example with this slice since I just added the slice, but there is no other information since this is a Java error.  Is my slice discriminator incorrect in some way?</p>



<a name="245473224"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Slice%20Criteria%20Validation%20failing/near/245473224" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Slice.20Criteria.20Validation.20failing.html#245473224">(Jul 09 2021 at 17:33)</a>:</h4>
<p>Does FHIRPath recognize valueBoolean?  I thought you had to say ".value as boolean"...</p>



<a name="245475477"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Slice%20Criteria%20Validation%20failing/near/245475477" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Slice.20Criteria.20Validation.20failing.html#245475477">(Jul 09 2021 at 17:51)</a>:</h4>
<p>i switched that to .value but it turns out that wasn't the error.  it's the fact that the fhirpath engine is always looking for a extension type.</p>



<a name="245486782"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Slice%20Criteria%20Validation%20failing/near/245486782" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Slice.20Criteria.20Validation.20failing.html#245486782">(Jul 09 2021 at 19:28)</a>:</h4>
<p>Have you filed a Git issue?</p>



<a name="245492961"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Slice%20Criteria%20Validation%20failing/near/245492961" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Slice.20Criteria.20Validation.20failing.html#245492961">(Jul 09 2021 at 20:21)</a>:</h4>
<p>yep</p>



<a name="250685949"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Slice%20Criteria%20Validation%20failing/near/250685949" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Slice.20Criteria.20Validation.20failing.html#250685949">(Aug 25 2021 at 21:31)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> Here is the original issue that caused me to switch from using a FSH version of my profile to a JSON version that I then needed to include a snapshot.</p>



<a name="250685975"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Slice%20Criteria%20Validation%20failing/near/250685975" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Slice.20Criteria.20Validation.20failing.html#250685975">(Aug 25 2021 at 21:31)</a>:</h4>
<p>i did not raise a Git issue because I wasn't sure my analysis was correct.</p>



<a name="250685995"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Slice%20Criteria%20Validation%20failing/near/250685995" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Slice.20Criteria.20Validation.20failing.html#250685995">(Aug 25 2021 at 21:31)</a>:</h4>
<p>I am checking in the FSH files that cause the above error.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
