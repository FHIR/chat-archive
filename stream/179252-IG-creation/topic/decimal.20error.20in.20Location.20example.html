---
layout: page
title: "FHIR Chat  · decimal error in Location example · IG creation"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/index.html">IG creation</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/decimal.20error.20in.20Location.20example.html">decimal error in Location example</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="171563746"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/decimal%20error%20in%20Location%20example/near/171563746" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/decimal.20error.20in.20Location.20example.html#171563746">(Jul 23 2019 at 22:41)</a>:</h4>
<p>This is a brand new error that cropped up today.  </p>
<p>I get the following error in this IG: <a href="http://build.fhir.org/ig/HL7/davinci-alerts/branches/master/index.html" target="_blank" title="http://build.fhir.org/ig/HL7/davinci-alerts/branches/master/index.html">http://build.fhir.org/ig/HL7/davinci-alerts/branches/master/index.html</a></p>
<div class="codehilite"><pre><span></span>Location/hl7east: Location.position.longitude   error   The value &#39;-72.519854&#39; is not a valid decimal
</pre></div>


<p>are  there some new requriements for  decimals  like these?</p>



<a name="171599757"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/decimal%20error%20in%20Location%20example/near/171599757" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/decimal.20error.20in.20Location.20example.html#171599757">(Jul 24 2019 at 12:04)</a>:</h4>
<p>I don't see this?</p>



<a name="171599795"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/decimal%20error%20in%20Location%20example/near/171599795" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/decimal.20error.20in.20Location.20example.html#171599795">(Jul 24 2019 at 12:05)</a>:</h4>
<p>not when building locally anyway. do you see it locally?</p>



<a name="171600013"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/decimal%20error%20in%20Location%20example/near/171600013" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/decimal.20error.20in.20Location.20example.html#171600013">(Jul 24 2019 at 12:09)</a>:</h4>
<p><span class="user-mention" data-user-id="191319">@James Agnew</span> this looks like some Java localization issue to me. Here's the code in question:</p>
<div class="codehilite"><pre><span></span>    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">boolean</span> <span class="nf">isDecimal</span><span class="o">(</span><span class="n">String</span> <span class="n">string</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">if</span> <span class="o">(</span><span class="n">isBlank</span><span class="o">(</span><span class="n">string</span><span class="o">))</span> <span class="o">{</span>
        <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
      <span class="o">}</span>
      <span class="kt">boolean</span> <span class="n">havePeriod</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
      <span class="k">for</span> <span class="o">(</span><span class="kt">char</span> <span class="n">next</span> <span class="o">:</span> <span class="n">string</span><span class="o">.</span><span class="na">toCharArray</span><span class="o">())</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">next</span> <span class="o">==</span> <span class="sc">&#39;.&#39;</span><span class="o">)</span> <span class="o">{</span>
          <span class="k">if</span> <span class="o">(</span><span class="n">havePeriod</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
          <span class="o">}</span>
          <span class="n">havePeriod</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
        <span class="o">}</span> <span class="k">else</span> <span class="k">if</span> <span class="o">(!</span><span class="n">Character</span><span class="o">.</span><span class="na">isDigit</span><span class="o">(</span><span class="n">next</span><span class="o">))</span> <span class="o">{</span>
          <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
        <span class="o">}</span>
      <span class="o">}</span>
      <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
    <span class="o">}</span>
</pre></div>



<a name="171600025"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/decimal%20error%20in%20Location%20example/near/171600025" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/decimal.20error.20in.20Location.20example.html#171600025">(Jul 24 2019 at 12:09)</a>:</h4>
<p>is there some localization issue there I can't see?</p>



<a name="171618354"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/decimal%20error%20in%20Location%20example/near/171618354" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rick Geimer <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/decimal.20error.20in.20Location.20example.html#171618354">(Jul 24 2019 at 15:57)</a>:</h4>
<p>That code seems to fail on "-" (the leading minus sign) based on my eyeball parser. I guess it expects decimals to be positive?</p>



<a name="171633001"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/decimal%20error%20in%20Location%20example/near/171633001" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/decimal.20error.20in.20Location.20example.html#171633001">(Jul 24 2019 at 18:56)</a>:</h4>
<p>Also in my local machine as well</p>



<a name="171633041"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/decimal%20error%20in%20Location%20example/near/171633041" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/decimal.20error.20in.20Location.20example.html#171633041">(Jul 24 2019 at 18:57)</a>:</h4>
<p>Only cropped up yesterday with a ig pub update</p>



<a name="171638686"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/decimal%20error%20in%20Location%20example/near/171638686" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/decimal.20error.20in.20Location.20example.html#171638686">(Jul 24 2019 at 20:07)</a>:</h4>
<p>Yeah, I'd agree with Rick. That code won't understand the <code>-</code> and will return false as a result.</p>



<a name="171645322"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/decimal%20error%20in%20Location%20example/near/171645322" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/decimal.20error.20in.20Location.20example.html#171645322">(Jul 24 2019 at 21:37)</a>:</h4>
<p>duh. foolish on my part. But I didn't think in that direction since I didn't get the error. Not sure why not. I've fixed, will release shortly</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
