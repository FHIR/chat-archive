---
layout: page
title: "FHIR Chat  · Tooling Differences that cause problems · IG creation"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/index.html">IG creation</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Tooling.20Differences.20that.20cause.20problems.html">Tooling Differences that cause problems</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="180131107"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Tooling%20Differences%20that%20cause%20problems/near/180131107" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lisa Nelson <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Tooling.20Differences.20that.20cause.20problems.html#180131107">(Nov 07 2019 at 13:26)</a>:</h4>
<p>Summary of technical issue:<br>
We found there are structure differences between Forge and Trifolia when displaying the element in the differential view.<br>
In Trifolia, the root element is required in order to display in the differential view. For example, the bodysite element below is present in the Trifolia xml output of the StructureDefinition differential view information:<br>
    &lt;element id="Observation.bodySite"&gt;<br>
            &lt;path value="Observation.bodySite"/&gt;<br>
        &lt;/element&gt;<br>
        &lt;element id="Observation.bodySite.coding"&gt;<br>
            &lt;path value="Observation.bodySite.coding"/&gt;<br>
            &lt;min value="1"/&gt;<br>
            &lt;max value="1"/&gt;<br>
        &lt;/element&gt;<br>
        &lt;element id="Observation.bodySite.coding.system"&gt;<br>
            &lt;path value="Observation.bodySite.coding.system"/&gt;<br>
            &lt;min value="1"/&gt;<br>
            &lt;fixedUri value="http://snomed.info/sct"/&gt;<br>
        &lt;/element&gt;<br>
        &lt;element id="Observation.bodySite.coding.code"&gt;<br>
            &lt;path value="Observation.bodySite.coding.code"/&gt;<br>
            &lt;min value="1"/&gt;<br>
            &lt;binding&gt;<br>
                &lt;strength value="required"/&gt;<br>
                &lt;valueSet value="http://www.ama-ihmi.org/fhir/ValueSet/AMA-IHMI-valueSet-body-structure-1-instance"/&gt;<br>
            &lt;/binding&gt;<br>
        &lt;/element&gt;<br>
        &lt;element id="Observation.bodySite.coding.display"&gt;<br>
            &lt;path value="Observation.bodySite.coding.display"/&gt;<br>
            &lt;min value="1"/&gt;<br>
        &lt;/element&gt;<br>
The element Observation.bodySite is in the list of element in Trifolia, but it is missing in the corresponding StructureDefinition resource generated by Forge.  Forge doesn't require a root element to be in the list in order to display in the differential view.</p>
<p>Forge says:  <br>
The Forge team reports that the way they are expressing the structure is permitted by the spec.</p>
<p>Lantana says:<br>
They are following the guideline in the spec, citing that the spec implies that the parent element must be asserted:<br>
See <a href="https://www.hl7.org/fhir/profiling.html#using" target="_blank" title="https://www.hl7.org/fhir/profiling.html#using">https://www.hl7.org/fhir/profiling.html#using</a></p>
<p>Where it indicates "A structure definition contains a linear list of element definitions. The inherent nested structure of the elements is derived from the path value of each element. For instance, a sequence of the element paths like this:"</p>
<p>Further-more, it indicates "The structure is coherent - children are never implied, and the path statements are always in order. The element list is a linear list rather than being explicitly nested because element definitions are frequently re-used in multiple places within a single definition, and this re-use is easier with a flat structure."</p>
<p>We, the FHIR Accelerator team at Gravity, are stuck between our tooling vendor’s.  We need to work with the Forge team and Trifolia team to collaborate and address this inconsistency. If the intention is for SturctureDefinition resources to be interoperable between systems, it seems like being explicit in the inclusion of all structural elements would be better approach. </p>
<p>Any advice on how to get this resolved?  We are blocked by this issue. </p>
<p>Lisa</p>



<a name="180143407"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Tooling%20Differences%20that%20cause%20problems/near/180143407" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Tooling.20Differences.20that.20cause.20problems.html#180143407">(Nov 07 2019 at 15:33)</a>:</h4>
<p>The structure definition is coherent, but that doesn't mean that the differential can't be sparse.  The intention is that differentials <em>can</em> be sparse.  The HL7 tool suite struggled with this for years, but now supports it properly (we believe - thanks <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> :) ).  Needing to list ancestor elements to constrain a child doesn't add value, just overhead and isn't algorithmicly required.  So Trifolia <em>should</em> also support sparse differentials.  It's certainly going to start seeing those in IGs it will need to constrain (e.g. US Core).</p>



<a name="180145383"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Tooling%20Differences%20that%20cause%20problems/near/180145383" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ward Weistra <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Tooling.20Differences.20that.20cause.20problems.html#180145383">(Nov 07 2019 at 15:53)</a>:</h4>
<p><span class="user-mention" data-user-id="191407">@Rick Geimer</span> <span class="user-mention" data-user-id="191505">@Sean McIlvenna</span> Is this something you can resolve on the Trifolia side to help Gravity proceed?</p>



<a name="180151776"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Tooling%20Differences%20that%20cause%20problems/near/180151776" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Tooling.20Differences.20that.20cause.20problems.html#180151776">(Nov 07 2019 at 16:59)</a>:</h4>
<p><span class="user-mention" data-user-id="203235">@Ward Weistra</span> , I have this on my list of todo in the next couple weeks.</p>



<a name="180151786"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Tooling%20Differences%20that%20cause%20problems/near/180151786" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Tooling.20Differences.20that.20cause.20problems.html#180151786">(Nov 07 2019 at 16:59)</a>:</h4>
<p>It was just brought to my attention a couple days ago</p>



<a name="180151805"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Tooling%20Differences%20that%20cause%20problems/near/180151805" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Tooling.20Differences.20that.20cause.20problems.html#180151805">(Nov 07 2019 at 16:59)</a>:</h4>
<p>I think we can address this, but it will take a bit of time to figure out</p>



<a name="180154625"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Tooling%20Differences%20that%20cause%20problems/near/180154625" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ward Weistra <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Tooling.20Differences.20that.20cause.20problems.html#180154625">(Nov 07 2019 at 17:30)</a>:</h4>
<p>Thanks <span class="user-mention" data-user-id="191505">@Sean McIlvenna</span>, that's great to hear.<br>
<span class="user-mention" data-user-id="192205">@Lisa Nelson</span> Is this going to work with your timeline for Gravity?</p>



<a name="180168439"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Tooling%20Differences%20that%20cause%20problems/near/180168439" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Tooling.20Differences.20that.20cause.20problems.html#180168439">(Nov 07 2019 at 19:48)</a>:</h4>
<p><span class="user-mention" data-user-id="192205">@Lisa Nelson</span> note this text from the next section:</p>
<blockquote>
<p>(note that this means that a differential profile can be sparse and only mention the elements that are changed, without having to list the full structure. This rule includes the root element - it is not needed in a sparse differential)</p>
</blockquote>



<a name="180176165"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Tooling%20Differences%20that%20cause%20problems/near/180176165" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lisa Nelson <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Tooling.20Differences.20that.20cause.20problems.html#180176165">(Nov 07 2019 at 21:08)</a>:</h4>
<p><span class="user-mention" data-user-id="203235">@Ward Weistra</span> I think our workaround is a manual adjustment prior to importing the artifact generated by Forge.  Not ideal, but it will be our approach until <span class="user-mention" data-user-id="191505">@Sean McIlvenna</span> has time to get this addressed in Trifolia.  Thanks to all for getting this cleared up.</p>



<a name="180185593"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Tooling%20Differences%20that%20cause%20problems/near/180185593" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mirjam Baltus <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Tooling.20Differences.20that.20cause.20problems.html#180185593">(Nov 07 2019 at 22:49)</a>:</h4>
<p><span class="user-mention" data-user-id="218707">@Corey Smith</span>: Please take a look at this discussion, since I'm not sure my emails have reached you successfully, and this answers your questions.</p>



<a name="180222023"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Tooling%20Differences%20that%20cause%20problems/near/180222023" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Tooling.20Differences.20that.20cause.20problems.html#180222023">(Nov 08 2019 at 11:41)</a>:</h4>
<p>FYI The first step of the SnapshotGenerator in the .NET API library is to complete the differential by adding missing parent elements. Such a preprocessing step is trivial to implement and simplifies downstream logic.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
