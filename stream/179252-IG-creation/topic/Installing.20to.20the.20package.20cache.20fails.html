---
layout: page
title: "FHIR Chat  · Installing to the package cache fails · IG creation"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/index.html">IG creation</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Installing.20to.20the.20package.20cache.20fails.html">Installing to the package cache fails</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="167435807"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Installing%20to%20the%20package%20cache%20fails/near/167435807" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Deanne Ukovich <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Installing.20to.20the.20package.20cache.20fails.html#167435807">(Jun 05 2019 at 22:39)</a>:</h4>
<p>Our IG is in a constant state of error up on <a href="http://build.fhir.org" target="_blank" title="http://build.fhir.org">build.fhir.org</a> and I think it may have something to do with the new version of the IG publisher as it has be happening for the last couple of  weeks. </p>
<p>It seems to happen when the publisher installs to the local package cache and then tries to read from it. The first read from hl7.fhir.core#3.0.1 works fine, but a subsequent read from hl7.fhir.au.base#current fails</p>
<div class="codehilite"><pre><span></span>Installing hl7.fhir.au.base#current to the package cache
  Fetching:Publishing Content Failed: null                                                  (31.0415sec)
                                                                                 (31.0415sec)
Use -? to get command line help                                                  (31.0415sec)
                                                                                 (31.0415sec)
Stack Dump (for debugging):                                                      (31.0415sec)
java.lang.NullPointerException
    at java.base/java.io.FilterInputStream.markSupported(FilterInputStream.java:242)
    at org.apache.commons.compress.compressors.gzip.GzipCompressorInputStream.&lt;init&gt;(GzipCompressorInputStream.java:160)
</pre></div>


<p>see <a href="http://build.fhir.org/ig/aehrc/primary-care-data-technical/build.log" target="_blank" title="http://build.fhir.org/ig/aehrc/primary-care-data-technical/build.log">http://build.fhir.org/ig/aehrc/primary-care-data-technical/build.log</a> for full details</p>
<p>I managed to reproduce this locally with the latest jar by first clearing out the .fhir/packages directory and toggling the auto-ig-builder switch to trigger use of the .fhir/packages directory. It runs fine if it doesn't attempt to use the .fhir/packages directory.</p>



<a name="167532450"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Installing%20to%20the%20package%20cache%20fails/near/167532450" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Deanne Ukovich <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Installing.20to.20the.20package.20cache.20fails.html#167532450">(Jun 06 2019 at 23:34)</a>:</h4>
<p>Some further information, when I reinstated my old .fhir/packages directory locally, I made the error go away. This suggests to me that the fetch of hl7.fhir.au.base#current has worked previously, but is now no longer working for some reason.</p>



<a name="167534981"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Installing%20to%20the%20package%20cache%20fails/near/167534981" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jim Steel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Installing.20to.20the.20package.20cache.20fails.html#167534981">(Jun 07 2019 at 00:25)</a>:</h4>
<p>I'm hearing this might be due to AU base moving <span class="user-mention" data-user-id="191368">@Brett Esler</span></p>



<a name="167538305"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Installing%20to%20the%20package%20cache%20fails/near/167538305" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brett Esler <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Installing.20to.20the.20package.20cache.20fails.html#167538305">(Jun 07 2019 at 01:42)</a>:</h4>
<p>hi folks - apologies this should have been announced - to reference package-list.json in your project - in your ig.json file set dependencies like<br>
"dependencyList": [ <br>
    {<br>
       "name" : "aubase",<br>
       "location" : "<a href="http://hl7.org.au/fhir/base" target="_blank" title="http://hl7.org.au/fhir/base">http://hl7.org.au/fhir/base</a>",<br>
         "version" : "current"<br>
    }<br>
  ],</p>



<a name="167538307"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Installing%20to%20the%20package%20cache%20fails/near/167538307" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brett Esler <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Installing.20to.20the.20package.20cache.20fails.html#167538307">(Jun 07 2019 at 01:43)</a>:</h4>
<p>for the current build</p>



<a name="167538326"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Installing%20to%20the%20package%20cache%20fails/near/167538326" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brett Esler <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Installing.20to.20the.20package.20cache.20fails.html#167538326">(Jun 07 2019 at 01:43)</a>:</h4>
<p>or specific version as per <a href="http://hl7.org.au/fhir/base/history.shtml" target="_blank" title="http://hl7.org.au/fhir/base/history.shtml">http://hl7.org.au/fhir/base/history.shtml</a></p>



<a name="167538386"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Installing%20to%20the%20package%20cache%20fails/near/167538386" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brett Esler <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Installing.20to.20the.20package.20cache.20fails.html#167538386">(Jun 07 2019 at 01:44)</a>:</h4>
<p>e.g AU Base 1 release<br>
"dependencyList": [ <br>
{<br>
"name" : "aubase",<br>
"location" : "<a href="http://hl7.org.au/fhir/base" target="_blank" title="http://hl7.org.au/fhir/base">http://hl7.org.au/fhir/base</a>",<br>
"version" : "1.0.2"<br>
}<br>
],</p>



<a name="167540548"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Installing%20to%20the%20package%20cache%20fails/near/167540548" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Deanne Ukovich <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Installing.20to.20the.20package.20cache.20fails.html#167540548">(Jun 07 2019 at 02:28)</a>:</h4>
<p>Thanks Brett, this has resolved the problem above.</p>



<a name="167545826"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Installing%20to%20the%20package%20cache%20fails/near/167545826" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brett Esler <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Installing.20to.20the.20package.20cache.20fails.html#167545826">(Jun 07 2019 at 04:21)</a>:</h4>
<p>cool - the package-list.json now drives the history view automatically thanks to <span class="user-mention" data-user-id="191316">@Grahame Grieve</span>  so can see all of the versioned packages available there</p>



<a name="167552573"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Installing%20to%20the%20package%20cache%20fails/near/167552573" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Installing.20to.20the.20package.20cache.20fails.html#167552573">(Jun 07 2019 at 06:47)</a>:</h4>
<p>Do we need the package id in there too?</p>



<a name="167552664"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Installing%20to%20the%20package%20cache%20fails/near/167552664" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brett Esler <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Installing.20to.20the.20package.20cache.20fails.html#167552664">(Jun 07 2019 at 06:49)</a>:</h4>
<p>don;t think so if you set location.. <span class="user-mention" data-user-id="191316">@Grahame Grieve</span>  what does package id do for us?</p>



<a name="167555442"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Installing%20to%20the%20package%20cache%20fails/near/167555442" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Installing.20to.20the.20package.20cache.20fails.html#167555442">(Jun 07 2019 at 07:48)</a>:</h4>
<p>package is enough - I convert the canonical location to a package id internally anyway</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
