---
layout: page
title: "FHIR Chat  · Build failing · IG creation"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/index.html">IG creation</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Build.20failing.html">Build failing</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="171899576"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Build%20failing/near/171899576" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Build.20failing.html#171899576">(Jul 28 2019 at 18:46)</a>:</h4>
<p>I've run into what seems to be a rather weird issue.  I have a CodeSystem resource instance (a LOINC code system fragment) that I'm trying to use in the livd IG.  This CodeSystem resource instance is valid against the <a href="http://hl7.org/fhir/uv/livd/StructureDefinition/codesystem-loinc-frag-uv-livd" target="_blank" title="http://hl7.org/fhir/uv/livd/StructureDefinition/codesystem-loinc-frag-uv-livd">http://hl7.org/fhir/uv/livd/StructureDefinition/codesystem-loinc-frag-uv-livd</a> profile that is included in the IG (and livd package).  The resource instance has a meta.profile element that specifies that profile.  When I validate the resource instance separately against the ig and that profile with the latest validator, it's gives all "Success...", with zero errors, warnings and info.  But when I include it in the IG as a vocabulary resource and attempt to build the IG (using the latest 0.9.43-SNAPSHOT IG Publisher), if the meta profile declaration is present the build errors out with:</p>
<blockquote>
<div class="codehilite"><pre><span></span> [java] Stack Dump (for debugging):                                                      (19.0984sec)
 [java] java.lang.Exception: Error parsing /Users/rhausam/git-repo/livd/src/vocabulary/codesystem-loinc-fragment-livd: com.google.gson.JsonPrimitive cannot be cast to com.google.gson.JsonArray
 [java]     at org.hl7.fhir.igtools.publisher.Publisher.load(Publisher.java:3294)
 [java]     at org.hl7.fhir.igtools.publisher.Publisher.loadConformance(Publisher.java:2905)
 [java]     at org.hl7.fhir.igtools.publisher.Publisher.createIg(Publisher.java:723)
 [java]     at org.hl7.fhir.igtools.publisher.Publisher.execute(Publisher.java:612)
 [java]     at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:6208)
 [java] Caused by: java.lang.ClassCastException: com.google.gson.JsonPrimitive cannot be cast to com.google.gson.JsonArray
 [java]     at com.google.gson.JsonObject.getAsJsonArray(JsonObject.java:195)
 [java]     at org.hl7.fhir.r4.formats.JsonParser.parseMetaProperties(JsonParser.java:260)
 [java]     at org.hl7.fhir.r4.formats.JsonParser.parseMeta(JsonParser.java:241)
 [java]     at org.hl7.fhir.r4.formats.JsonParser.parseResourceProperties(JsonParser.java:1988)
 [java]     at org.hl7.fhir.r4.formats.JsonParser.parseDomainResourceProperties(JsonParser.java:1918)
 [java]     at org.hl7.fhir.r4.formats.JsonParser.parseCodeSystemProperties(JsonParser.java:6057)
 [java]     at org.hl7.fhir.r4.formats.JsonParser.parseCodeSystem(JsonParser.java:6052)
 [java]     at org.hl7.fhir.r4.formats.JsonParser.parseResource(JsonParser.java:27446)
 [java]     at org.hl7.fhir.r4.formats.JsonParserBase.parse(JsonParserBase.java:113)
 [java]     at org.hl7.fhir.r4.formats.ParserBase.parse(ParserBase.java:79)
 [java]     at org.hl7.fhir.igtools.publisher.Publisher.parseContent(Publisher.java:3569)
 [java]     at org.hl7.fhir.igtools.publisher.Publisher.parse(Publisher.java:3620)
 [java]     at org.hl7.fhir.igtools.publisher.Publisher.load(Publisher.java:3291)
 [java]     ... 4 more
 [java] Exception in thread &quot;main&quot; java.lang.NullPointerException
 [java]     at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:6218)
</pre></div>


</blockquote>
<p>But if I remove the meta element and profile declaration in the CodeSystem instance and don't make any other changes, then the IG builds just fine.  I don't see anything anywhere that seems like it would relate to an "array vs primitive" discrepancy, and I expect that's not really the issue since the the resource validates fine independently.  Do any of you have thoughts or solutions for this?</p>



<a name="171899636"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Build%20failing/near/171899636" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Build.20failing.html#171899636">(Jul 28 2019 at 18:48)</a>:</h4>
<p>paste the meta here:</p>



<a name="171899662"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Build%20failing/near/171899662" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Build.20failing.html#171899662">(Jul 28 2019 at 18:49)</a>:</h4>
<p>It's just this:</p>
<div class="codehilite"><pre><span></span>    &quot;meta&quot;: {
        &quot;profile&quot;: &quot;http://hl7.org/fhir/uv/livd/StructureDefinition/codesystem-loinc-frag-uv-livd&quot;
    },
</pre></div>



<a name="171899793"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Build%20failing/near/171899793" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Build.20failing.html#171899793">(Jul 28 2019 at 18:52)</a>:</h4>
<p>oh, I see it now - I thought I had the array there but I don't</p>



<a name="171899803"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Build%20failing/near/171899803" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Build.20failing.html#171899803">(Jul 28 2019 at 18:52)</a>:</h4>
<p>well, that's wrong...</p>



<a name="171899866"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Build%20failing/near/171899866" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Build.20failing.html#171899866">(Jul 28 2019 at 18:54)</a>:</h4>
<div class="codehilite"><pre><span></span>   <span class="s2">&quot;meta&quot;</span><span class="err">:</span> <span class="p">{</span>
        <span class="err">[</span><span class="nt">&quot;profile&quot;</span><span class="p">:</span> <span class="s2">&quot;http://hl7.org/fhir/uv/livd/StructureDefinition/codesystem-loinc-frag-uv-livd&quot;</span><span class="err">]</span>
    <span class="p">}</span><span class="err">,</span>
</pre></div>



<a name="171899950"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Build%20failing/near/171899950" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Build.20failing.html#171899950">(Jul 28 2019 at 18:57)</a>:</h4>
<p>I know - I thought I looked that over multiple times, but guess I wasn't looking carefully enough!</p>



<a name="171899955"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Build%20failing/near/171899955" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Build.20failing.html#171899955">(Jul 28 2019 at 18:57)</a>:</h4>
<p>shouldn't have validated correctly though</p>



<a name="171900395"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Build%20failing/near/171900395" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Build.20failing.html#171900395">(Jul 28 2019 at 19:10)</a>:</h4>
<p>yeah, it shouldn't have, but it did<br>
the issue itself is fixed now - I just wasn't seeing it, partly I think because it was validating ok</p>



<a name="182840733"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Build%20failing/near/182840733" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Kavanagh <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Build.20failing.html#182840733">(Dec 07 2019 at 11:19)</a>:</h4>
<p>Currently getting this error using the latest version of the tool - any ideas what the issue might be?<br>
<a href="/user_uploads/10155/WoireeuBEXxHoBQYKiSChisF/pasted_image.png" target="_blank" title="pasted_image.png">pasted image</a></p>
<div class="message_inline_image"><a href="/user_uploads/10155/WoireeuBEXxHoBQYKiSChisF/pasted_image.png" target="_blank" title="pasted image"><img src="/user_uploads/10155/WoireeuBEXxHoBQYKiSChisF/pasted_image.png"></a></div>



<a name="182842897"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Build%20failing/near/182842897" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Build.20failing.html#182842897">(Dec 07 2019 at 12:25)</a>:</h4>
<p>if you are using the latest version of the ig publisher - empty your FHIR package cache</p>



<a name="182843128"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Build%20failing/near/182843128" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Kavanagh <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Build.20failing.html#182843128">(Dec 07 2019 at 12:32)</a>:</h4>
<p>Thanks <span class="user-mention" data-user-id="191316">@Grahame Grieve</span>  - i did that and got the following results. I'm suspecting I have security issues, not sure why though.<br>
<a href="/user_uploads/10155/qlNgEvTpgDk-cSinHEOOPOEN/pasted_image.png" target="_blank" title="pasted_image.png">pasted image</a></p>
<div class="message_inline_image"><a href="/user_uploads/10155/qlNgEvTpgDk-cSinHEOOPOEN/pasted_image.png" target="_blank" title="pasted image"><img src="/user_uploads/10155/qlNgEvTpgDk-cSinHEOOPOEN/pasted_image.png"></a></div>



<a name="182857439"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Build%20failing/near/182857439" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Build.20failing.html#182857439">(Dec 07 2019 at 19:09)</a>:</h4>
<blockquote>
<p>if you are using the latest version of the ig publisher</p>
</blockquote>
<p>You are using quite an old version of the IG publisher</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
