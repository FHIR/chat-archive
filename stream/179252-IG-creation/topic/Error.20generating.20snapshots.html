---
layout: page
title: "FHIR Chat  · Error generating snapshots · IG creation"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/index.html">IG creation</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Error.20generating.20snapshots.html">Error generating snapshots</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="187478757"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Error%20generating%20snapshots/near/187478757" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Freiter <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Error.20generating.20snapshots.html#187478757">(Feb 05 2020 at 18:06)</a>:</h4>
<p>We have been looking into changing our SUSHI compiler for FHIR Shorthand to only generate differentials and not snapshots, but we are hitting the following error in the IG Publisher:<br>
<a href="/user_uploads/10155/llPXx8AUzelu7W24ZgPzKUIx/pasted_image.png" target="_blank" title="pasted_image.png">pasted image</a> </p>
<div class="message_inline_image"><a href="/user_uploads/10155/llPXx8AUzelu7W24ZgPzKUIx/pasted_image.png" target="_blank" title="pasted image"><img src="/user_uploads/10155/llPXx8AUzelu7W24ZgPzKUIx/pasted_image.png"></a></div><p>After some investigation, I think this might have something to do with circular dependencies. The profile that causes this error, TNMClinicalStageGroup, is based on another profile, CancerStageParent, which is based on Observation. The "focus" element on CancerStageParent is constrained as a reference to our PrimaryCancerCondition profile. But the "stage.assessment" element on PrimaryCancerCondition is a reference to TNMClinicalStageGroup, so the references are circular. As can be seen in the image above, the snapshot seems like it is getting terminated prematurely once it gets to "Observation.focus",  and if  I change the "focus" element on CancerStageParent to not reference PrimaryCancerCondition, the error goes away.</p>
<p>Should we be handling our circular dependencies differently?</p>



<a name="187485327"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Error%20generating%20snapshots/near/187485327" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Error.20generating.20snapshots.html#187485327">(Feb 05 2020 at 19:20)</a>:</h4>
<p>I'm not sure. Is this in the committed mcode?</p>



<a name="187486720"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Error%20generating%20snapshots/near/187486720" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Error.20generating.20snapshots.html#187486720">(Feb 05 2020 at 19:34)</a>:</h4>
<p>Not yet.  But it can be.  Working on it.</p>



<a name="187489720"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Error%20generating%20snapshots/near/187489720" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Error.20generating.20snapshots.html#187489720">(Feb 05 2020 at 20:05)</a>:</h4>
<p>Source code is on <code>no-snapshots</code> branch: <a href="https://github.com/HL7/fhir-mCODE-ig/tree/no-snapshots" target="_blank" title="https://github.com/HL7/fhir-mCODE-ig/tree/no-snapshots">https://github.com/HL7/fhir-mCODE-ig/tree/no-snapshots</a></p>



<a name="187492284"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Error%20generating%20snapshots/near/187492284" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Error.20generating.20snapshots.html#187492284">(Feb 05 2020 at 20:36)</a>:</h4>
<p>Built output: <a href="https://github.com/HL7/fhir-mCODE-ig/tree/no-snapshots" target="_blank" title="https://github.com/HL7/fhir-mCODE-ig/tree/no-snapshots">https://github.com/HL7/fhir-mCODE-ig/tree/no-snapshots</a></p>



<a name="187492321"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Error%20generating%20snapshots/near/187492321" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Error.20generating.20snapshots.html#187492321">(Feb 05 2020 at 20:37)</a>:</h4>
<p>Build log (has some useful stuff): <a href="http://build.fhir.org/ig/HL7/fhir-mCODE-ig/branches/no-snapshots/build.log" target="_blank" title="http://build.fhir.org/ig/HL7/fhir-mCODE-ig/branches/no-snapshots/build.log">http://build.fhir.org/ig/HL7/fhir-mCODE-ig/branches/no-snapshots/build.log</a></p>



<a name="187923814"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Error%20generating%20snapshots/near/187923814" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Freiter <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Error.20generating.20snapshots.html#187923814">(Feb 11 2020 at 15:49)</a>:</h4>
<p>Hey <span class="user-mention" data-user-id="191316">@Grahame Grieve</span>, did you ever have any luck reproducing this issue?</p>



<a name="187947571"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Error%20generating%20snapshots/near/187947571" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Error.20generating.20snapshots.html#187947571">(Feb 11 2020 at 19:52)</a>:</h4>
<p>no it's on my list</p>



<a name="187981126"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Error%20generating%20snapshots/near/187981126" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Error.20generating.20snapshots.html#187981126">(Feb 12 2020 at 04:38)</a>:</h4>
<p>well, I have some progress. Now, trying to do that generates this:</p>



<a name="187981702"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Error%20generating%20snapshots/near/187981702" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Error.20generating.20snapshots.html#187981702">(Feb 12 2020 at 04:58)</a>:</h4>
<div class="codehilite"><pre><span></span>Attempt to use a snapshot on profile &#39;http://hl7.org/fhir/us/mcode/StructureDefinition/CancerStageParent&#39; as Base for generating a snapshot for the profile http://hl7.org/fhir/us/mcode/StructureDefinition/TNMClinicalStageGroup before it is generated
</pre></div>



<a name="187981905"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Error%20generating%20snapshots/near/187981905" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Error.20generating.20snapshots.html#187981905">(Feb 12 2020 at 05:04)</a>:</h4>
<p>having captured the bug, it was clear that I was generating the snapshot when I didn't need to. So I cleaned it up and now it seems to generate ok</p>



<a name="188010985"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Error%20generating%20snapshots/near/188010985" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Freiter <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Error.20generating.20snapshots.html#188010985">(Feb 12 2020 at 13:51)</a>:</h4>
<p>Oh great, thank you for taking a look!</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
