---
layout: page
title: "FHIR Chat  · Packages2.fhir.org · IG creation"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/index.html">IG creation</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Packages2.2Efhir.2Eorg.html">Packages2.fhir.org</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="249697760"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Packages2.fhir.org/near/249697760" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Packages2.2Efhir.2Eorg.html#249697760">(Aug 17 2021 at 09:56)</a>:</h4>
<p>Someone has a script that is hammering <a href="http://packages2.fhir.org">packages2.fhir.org</a>. I'm not sure what the purpose of this is, and it's running from multiple IP addresses. I'm going to start ignoring the request that the client is making; it's made the server unstable. Obviously it shouldn't, but I can't debug</p>



<a name="249697898"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Packages2.fhir.org/near/249697898" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Packages2.2Efhir.2Eorg.html#249697898">(Aug 17 2021 at 09:58)</a>:</h4>
<p>although it's leaking threads. I can see that much...</p>



<a name="249700052"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Packages2.fhir.org/near/249700052" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Packages2.2Efhir.2Eorg.html#249700052">(Aug 17 2021 at 10:24)</a>:</h4>
<p>unfortunately, it doesn't leak threads for me...</p>



<a name="249714223"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Packages2.fhir.org/near/249714223" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Packages2.2Efhir.2Eorg.html#249714223">(Aug 17 2021 at 12:58)</a>:</h4>
<p>I'm going to ban the IP addresses from using the server at all</p>



<a name="249744234"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Packages2.fhir.org/near/249744234" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Packages2.2Efhir.2Eorg.html#249744234">(Aug 17 2021 at 16:33)</a>:</h4>
<p>SUSHI uses <a href="http://packages2.fhir.org">packages2.fhir.org</a>, but only for projects that declare R4B / R5 as their FHIR version -- and even then, only if it doesn't find the package in the FHIR cache first.  I don't think that CI servers (like the FHIR IG builder) maintain a FHIR cache, so SUSHI would hit <a href="http://packages2.fhir.org">packages2.fhir.org</a> on each CI build of a R4B/R5-based IG.  But that shouldn't look like <em>hammering</em>.  Still, if anyone discovers that SUSHI is somehow involved, please let us know.</p>



<a name="249745640"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Packages2.fhir.org/near/249745640" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Packages2.2Efhir.2Eorg.html#249745640">(Aug 17 2021 at 16:44)</a>:</h4>
<p>Ahemmmmm ... If its from Denmark I might know the culprit ...</p>



<a name="249745830"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Packages2.fhir.org/near/249745830" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Packages2.2Efhir.2Eorg.html#249745830">(Aug 17 2021 at 16:45)</a>:</h4>
<p>In terms of 'hammering' ... Whats the approx amount here? <span class="user-mention" data-user-id="191316">@Grahame Grieve</span></p>



<a name="249770318"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Packages2.fhir.org/near/249770318" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Packages2.2Efhir.2Eorg.html#249770318">(Aug 17 2021 at 19:55)</a>:</h4>
<p>~10/sec, but when the server is down, the threads bank up, so once the server comes up, it's deluged by thousands</p>



<a name="249770433"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Packages2.fhir.org/near/249770433" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Packages2.2Efhir.2Eorg.html#249770433">(Aug 17 2021 at 19:56)</a>:</h4>
<p>whatever it is is making the request <a href="http://packages2.fhir.org/packages/catalog?canonical=http://hl7.org/fhir/us/carin-bb">http://packages2.fhir.org/packages/catalog?canonical=http://hl7.org/fhir/us/carin-bb</a></p>



<a name="249773268"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Packages2.fhir.org/near/249773268" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Packages2.2Efhir.2Eorg.html#249773268">(Aug 17 2021 at 20:17)</a>:</h4>
<p>Oh, OK.  That's definitely <em>not</em> SUSHI then.  We don't do any queries on <code>catalog</code> -- and as I noted before, SUSHI is scoped to look <em>only</em> for R4B/R5 packages on packages2 anyway.  Phew.  Glad it's not me. ;-)</p>



<a name="249777563"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Packages2.fhir.org/near/249777563" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Packages2.2Efhir.2Eorg.html#249777563">(Aug 17 2021 at 20:56)</a>:</h4>
<p>well, I've 'solved' it for now by turning off non-SSL access to the server. But if whoever is running the script switches to SSL too, then the problem will come back.</p>



<a name="249777618"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Packages2.fhir.org/near/249777618" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Packages2.2Efhir.2Eorg.html#249777618">(Aug 17 2021 at 20:56)</a>:</h4>
<p>I feel like there should be a better solution, but can't think of it</p>



<a name="249777755"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Packages2.fhir.org/near/249777755" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Packages2.2Efhir.2Eorg.html#249777755">(Aug 17 2021 at 20:57)</a>:</h4>
<p>Having a blacklist is probably a good idea.  We're going to have others who hit our registries in production systems and don't cache properly and we need to protect ourselves.  Rate limiting is another possibility.</p>



<a name="249777838"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Packages2.fhir.org/near/249777838" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Packages2.2Efhir.2Eorg.html#249777838">(Aug 17 2021 at 20:58)</a>:</h4>
<p>it is rate limiting now, but that rate limits everyone.</p>



<a name="249777887"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Packages2.fhir.org/near/249777887" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Packages2.2Efhir.2Eorg.html#249777887">(Aug 17 2021 at 20:58)</a>:</h4>
<p>I can't rate limit inside the server because the denial of service is to the server surface.</p>



<a name="249777912"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Packages2.fhir.org/near/249777912" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Packages2.2Efhir.2Eorg.html#249777912">(Aug 17 2021 at 20:59)</a>:</h4>
<p>and windows firewall is utterly useless. :-(</p>



<a name="249777969"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Packages2.fhir.org/near/249777969" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gino Canessa <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Packages2.2Efhir.2Eorg.html#249777969">(Aug 17 2021 at 20:59)</a>:</h4>
<p>This is running on Server, isn't it?  You can block IPs fairly easily.</p>



<a name="249778106"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Packages2.fhir.org/near/249778106" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Packages2.2Efhir.2Eorg.html#249778106">(Aug 17 2021 at 21:00)</a>:</h4>
<p>well, how? I tried, but windows gives me some crap about 'has to be a secure connection', which is irrelevant to me</p>



<a name="249778360"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Packages2.fhir.org/near/249778360" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Packages2.2Efhir.2Eorg.html#249778360">(Aug 17 2021 at 21:02)</a>:</h4>
<p>"you can specify user and computer authentication only when the action is set to "Allow only secure connections."</p>



<a name="249778382"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Packages2.fhir.org/near/249778382" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Packages2.2Efhir.2Eorg.html#249778382">(Aug 17 2021 at 21:02)</a>:</h4>
<p>we do not want windows authentication here. Stupid</p>



<a name="249778473"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Packages2.fhir.org/near/249778473" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Packages2.2Efhir.2Eorg.html#249778473">(Aug 17 2021 at 21:03)</a>:</h4>
<p>or I can whitelist IPs.</p>



<a name="249778488"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Packages2.fhir.org/near/249778488" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Packages2.2Efhir.2Eorg.html#249778488">(Aug 17 2021 at 21:03)</a>:</h4>
<p>But I can't figure how out to blacklist them</p>



<a name="249778662"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Packages2.fhir.org/near/249778662" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Packages2.2Efhir.2Eorg.html#249778662">(Aug 17 2021 at 21:04)</a>:</h4>
<p>anyway <span class="user-mention" data-user-id="191469">@Chris Moesel</span> this affects you. If you're using <a href="http://packages2.fhir.org">packages2.fhir.org</a>, you have to switch to https: instead of http: as of <em>now</em> (sorry, but the denial of service attack gives me no choice)</p>



<a name="249781990"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Packages2.fhir.org/near/249781990" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Packages2.2Efhir.2Eorg.html#249781990">(Aug 17 2021 at 21:33)</a>:</h4>
<p>Thanks for the heads up, <span class="user-mention" data-user-id="191316">@Grahame Grieve</span>.  I understand you're in a tight spot.  I do want to clarify though, it doesn't just affect <em>me</em> -- it currently affects every SUSHI user who has an R4B/R5 IG and uses the autobuild system (or does not have R4B/R5 in their FHIR cache).  So... we will see some failed IG builds until we push out a new SUSHI release w/ the fix.  We'll try to get one out quickly.</p>



<a name="249783282"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Packages2.fhir.org/near/249783282" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Packages2.2Efhir.2Eorg.html#249783282">(Aug 17 2021 at 21:48)</a>:</h4>
<p>yes right, but they are failing already</p>



<a name="249783341"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Packages2.fhir.org/near/249783341" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gino Canessa <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Packages2.2Efhir.2Eorg.html#249783341">(Aug 17 2021 at 21:48)</a>:</h4>
<p>You can block them at the system level with the firewall.  You just need a custom rule in to deny access, I believe the step-by-step in <a href="https://docs.rackspace.com/support/how-to/block-an-ip-address-on-a-windows-server">this article</a> should work.</p>



<a name="249882048"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Packages2.fhir.org/near/249882048" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Packages2.2Efhir.2Eorg.html#249882048">(Aug 18 2021 at 17:15)</a>:</h4>
<p>Ok ... that for sure aint me ... carin bb is not my thing</p>



<a name="250243539"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Packages2.fhir.org/near/250243539" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Corey Spears <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Packages2.2Efhir.2Eorg.html#250243539">(Aug 21 2021 at 23:43)</a>:</h4>
<p>OK, carin-bb is my thing and I am confused as to what is going on. carin-bb does use SUSHI, but does not use R4B or R5 and there has only been a couple of small changes to the IG in the last 1.5 months (back on August 3). I have no idea how carin-bb could be causing an issue and no clear way to diagnose. How can I tell if it is using packages2? How might I tell if something else is going on? Is there a way to tell where this is coming from or specifically the request that is causing the issue?</p>



<a name="250253698"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Packages2.fhir.org/near/250253698" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Packages2.2Efhir.2Eorg.html#250253698">(Aug 22 2021 at 04:19)</a>:</h4>
<p>It's not likely the IG-publication process.  It's someone who's implementing.</p>



<a name="250255199"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Packages2.fhir.org/near/250255199" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Packages2.2Efhir.2Eorg.html#250255199">(Aug 22 2021 at 05:00)</a>:</h4>
<p>someone doing something. my gut call: they picked a package at random</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
