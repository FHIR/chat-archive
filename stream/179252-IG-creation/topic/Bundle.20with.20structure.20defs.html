---
layout: page
title: "FHIR Chat  · Bundle with structure defs · IG creation"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/index.html">IG creation</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Bundle.20with.20structure.20defs.html">Bundle with structure defs</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="195277579"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Bundle%20with%20structure%20defs/near/195277579" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael van der Zel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Bundle.20with.20structure.20defs.html#195277579">(Apr 25 2020 at 09:52)</a>:</h4>
<p>From the IG publisher documentation I understand that it is possible to put structure definitions in one(1) bundle. But if I just create a bundle with structure definitions and run the publisher, it doesnot seem to work. The error is "Publishing Content Failed: No snapshot found".</p>



<a name="195281724"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Bundle%20with%20structure%20defs/near/195281724" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Bundle.20with.20structure.20defs.html#195281724">(Apr 25 2020 at 11:57)</a>:</h4>
<p>you need to register it as a bundle to treat as a source of independent resources that get processed, rather than just another bundle of stuff. Do this using the bundle extension</p>



<a name="195285659"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Bundle%20with%20structure%20defs/near/195285659" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Bundle.20with.20structure.20defs.html#195285659">(Apr 25 2020 at 13:45)</a>:</h4>
<p>How do we do that? (Register as a bundle)</p>



<a name="195299974"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Bundle%20with%20structure%20defs/near/195299974" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Bundle.20with.20structure.20defs.html#195299974">(Apr 25 2020 at 19:51)</a>:</h4>
<p>use the extension <a href="http://hl7.org/fhir/StructureDefinition/igpublisher-bundle" title="http://hl7.org/fhir/StructureDefinition/igpublisher-bundle">http://hl7.org/fhir/StructureDefinition/igpublisher-bundle</a>, instead of registering it as a normal resource</p>



<a name="195301849"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Bundle%20with%20structure%20defs/near/195301849" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Bundle.20with.20structure.20defs.html#195301849">(Apr 25 2020 at 20:36)</a>:</h4>
<p>where is the extension defined? i cannot find it</p>



<a name="195301937"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Bundle%20with%20structure%20defs/near/195301937" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Bundle.20with.20structure.20defs.html#195301937">(Apr 25 2020 at 20:38)</a>:</h4>
<p>it's probably not formally defined</p>



<a name="195302409"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Bundle%20with%20structure%20defs/near/195302409" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Bundle.20with.20structure.20defs.html#195302409">(Apr 25 2020 at 20:50)</a>:</h4>
<p>what is the context of the extension?</p>



<a name="195302430"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Bundle%20with%20structure%20defs/near/195302430" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Bundle.20with.20structure.20defs.html#195302430">(Apr 25 2020 at 20:51)</a>:</h4>
<p>(where do I put it? directly under definition? or in the resource?)</p>



<a name="195302603"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Bundle%20with%20structure%20defs/near/195302603" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Bundle.20with.20structure.20defs.html#195302603">(Apr 25 2020 at 20:56)</a>:</h4>
<p>and what is the value? a boolean to say it is a special resource, or the bundle id?</p>



<a name="195302607"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Bundle%20with%20structure%20defs/near/195302607" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Bundle.20with.20structure.20defs.html#195302607">(Apr 25 2020 at 20:56)</a>:</h4>
<p>I can experiment and add it to the documentation</p>



<a name="195302858"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Bundle%20with%20structure%20defs/near/195302858" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Bundle.20with.20structure.20defs.html#195302858">(Apr 25 2020 at 21:04)</a>:</h4>
<p>you can see it being used in the test ig included in the ig publisher itself</p>



<a name="195303062"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Bundle%20with%20structure%20defs/near/195303062" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Bundle.20with.20structure.20defs.html#195303062">(Apr 25 2020 at 21:09)</a>:</h4>
<p>ok</p>



<a name="195303269"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Bundle%20with%20structure%20defs/near/195303269" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Bundle.20with.20structure.20defs.html#195303269">(Apr 25 2020 at 21:15)</a>:</h4>
<div class="codehilite"><pre><span></span>  <span class="s2">&quot;resourceType&quot;</span> <span class="err">:</span> <span class="s2">&quot;ImplementationGuide&quot;</span><span class="err">,</span>
  <span class="s2">&quot;id&quot;</span> <span class="err">:</span> <span class="s2">&quot;test-ig&quot;</span><span class="err">,</span>
  <span class="s2">&quot;extension&quot;</span> <span class="err">:</span> <span class="p">[{</span>
    <span class="nt">&quot;url&quot;</span> <span class="p">:</span> <span class="s2">&quot;http://hl7.org/fhir/StructureDefinition/igpublisher-bundle&quot;</span><span class="p">,</span>
    <span class="nt">&quot;valueString&quot;</span> <span class="p">:</span> <span class="s2">&quot;test-ig-bnd&quot;</span>
  <span class="p">},</span>
<span class="err">...</span>
  <span class="s2">&quot;definition&quot;</span> <span class="err">:</span> <span class="p">{</span>
    <span class="nt">&quot;resource&quot;</span> <span class="p">:</span> <span class="p">[{</span>
      <span class="nt">&quot;reference&quot;</span> <span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;reference&quot;</span> <span class="p">:</span> <span class="s2">&quot;ValueSet/test-ig-bnd1&quot;</span>
      <span class="p">},</span>
</pre></div>



<a name="195303271"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Bundle%20with%20structure%20defs/near/195303271" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Bundle.20with.20structure.20defs.html#195303271">(Apr 25 2020 at 21:15)</a>:</h4>
<p>this?</p>



<a name="195303324"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Bundle%20with%20structure%20defs/near/195303324" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Bundle.20with.20structure.20defs.html#195303324">(Apr 25 2020 at 21:16)</a>:</h4>
<p>yes</p>



<a name="195303341"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Bundle%20with%20structure%20defs/near/195303341" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Bundle.20with.20structure.20defs.html#195303341">(Apr 25 2020 at 21:17)</a>:</h4>
<p>only the extension on top is needed, i guess?</p>



<a name="195303398"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Bundle%20with%20structure%20defs/near/195303398" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Bundle.20with.20structure.20defs.html#195303398">(Apr 25 2020 at 21:18)</a>:</h4>
<p>not sure what you mean?</p>



<a name="195303415"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Bundle%20with%20structure%20defs/near/195303415" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Bundle.20with.20structure.20defs.html#195303415">(Apr 25 2020 at 21:19)</a>:</h4>
<p>i mean for the IG to pick up the bundle.</p>



<a name="195303472"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Bundle%20with%20structure%20defs/near/195303472" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Bundle.20with.20structure.20defs.html#195303472">(Apr 25 2020 at 21:20)</a>:</h4>
<p>the definition part that contains the valueset test-ig-bnd1 is not needed, right?</p>



<a name="195303498"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Bundle%20with%20structure%20defs/near/195303498" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Bundle.20with.20structure.20defs.html#195303498">(Apr 25 2020 at 21:21)</a>:</h4>
<p>so if I do this, it will pick up the bundle and add all the resources in it:</p>
<div class="codehilite"><pre><span></span>  <span class="s2">&quot;resourceType&quot;</span> <span class="err">:</span> <span class="s2">&quot;ImplementationGuide&quot;</span><span class="err">,</span>
  <span class="s2">&quot;id&quot;</span> <span class="err">:</span> <span class="s2">&quot;test-ig&quot;</span><span class="err">,</span>
  <span class="s2">&quot;extension&quot;</span> <span class="err">:</span> <span class="p">[{</span>
    <span class="nt">&quot;url&quot;</span> <span class="p">:</span> <span class="s2">&quot;http://hl7.org/fhir/StructureDefinition/igpublisher-bundle&quot;</span><span class="p">,</span>
    <span class="nt">&quot;valueString&quot;</span> <span class="p">:</span> <span class="s2">&quot;test-ig-bnd&quot;</span>
  <span class="p">}</span>
</pre></div>



<a name="195303507"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Bundle%20with%20structure%20defs/near/195303507" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Bundle.20with.20structure.20defs.html#195303507">(Apr 25 2020 at 21:21)</a>:</h4>
<p>or do i need to add the bundled resources in definition.resource as well?</p>



<a name="195303553"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Bundle%20with%20structure%20defs/near/195303553" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Bundle.20with.20structure.20defs.html#195303553">(Apr 25 2020 at 21:22)</a>:</h4>
<p>I'm not sure</p>



<a name="195303630"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Bundle%20with%20structure%20defs/near/195303630" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Bundle.20with.20structure.20defs.html#195303630">(Apr 25 2020 at 21:25)</a>:</h4>
<p>i will test. thanks.  should i create a structdef for the extension to add to the build?</p>



<a name="195303965"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Bundle%20with%20structure%20defs/near/195303965" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Bundle.20with.20structure.20defs.html#195303965">(Apr 25 2020 at 21:35)</a>:</h4>
<p>i'm not sure. Either that or move it to the /tools space, which will one day get it's own IG</p>



<a name="195326665"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Bundle%20with%20structure%20defs/near/195326665" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael van der Zel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Bundle.20with.20structure.20defs.html#195326665">(Apr 26 2020 at 09:38)</a>:</h4>
<p>So do I say it right that the valueString of the extension is the id of the bundle with the structuredefs in it?</p>



<a name="195326991"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Bundle%20with%20structure%20defs/near/195326991" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Bundle.20with.20structure.20defs.html#195326991">(Apr 26 2020 at 09:47)</a>:</h4>
<p>yes</p>



<a name="195331680"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Bundle%20with%20structure%20defs/near/195331680" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Bundle.20with.20structure.20defs.html#195331680">(Apr 26 2020 at 12:04)</a>:</h4>
<p>I just tried adding the bundle with that reference, got an npe - <span class="user-mention" data-user-id="191421">@Michael van der Zel</span> if you try will you let us know?</p>



<a name="195332663"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Bundle%20with%20structure%20defs/near/195332663" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael van der Zel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Bundle.20with.20structure.20defs.html#195332663">(Apr 26 2020 at 12:32)</a>:</h4>
<p>Hmm. Also NullPointer  at org.hl7.fhir.igtools.publisher.Publisher.loadBundle(Publisher.java:3255)</p>



<a name="195572947"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Bundle%20with%20structure%20defs/near/195572947" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael van der Zel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Bundle.20with.20structure.20defs.html#195572947">(Apr 28 2020 at 14:35)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191421">Michael van der Zel</span> <a href="#narrow/stream/179252-IG-creation/topic/Bundle.20with.20structure.20defs/near/195332663" title="#narrow/stream/179252-IG-creation/topic/Bundle.20with.20structure.20defs/near/195332663">said</a>:</p>
<blockquote>
<p>Hmm. Also NullPointer  at org.hl7.fhir.igtools.publisher.Publisher.loadBundle(Publisher.java:3255)</p>
</blockquote>
<p>Any idea what is wrong here?</p>



<a name="195653371"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Bundle%20with%20structure%20defs/near/195653371" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Bundle.20with.20structure.20defs.html#195653371">(Apr 29 2020 at 02:33)</a>:</h4>
<p>try again with the latest version and tell me what link you get it on - 3255 is not the right line, and a code review gives me no ideas</p>



<a name="195653419"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Bundle%20with%20structure%20defs/near/195653419" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Bundle.20with.20structure.20defs.html#195653419">(Apr 29 2020 at 02:34)</a>:</h4>
<p>unless you have a bundle with an entry with no resource</p>



<a name="195656566"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Bundle%20with%20structure%20defs/near/195656566" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Bundle.20with.20structure.20defs.html#195656566">(Apr 29 2020 at 03:41)</a>:</h4>
<div class="codehilite"><pre><span></span><code>java.lang.NullPointerException
        at org.hl7.fhir.igtools.publisher.Publisher.loadBundle(Publisher.java:3258)
        at org.hl7.fhir.igtools.publisher.Publisher.loadBundles(Publisher.java:3211)
        at org.hl7.fhir.igtools.publisher.Publisher.load(Publisher.java:2800)
        at org.hl7.fhir.igtools.publisher.Publisher.createIg(Publisher.java:814)
        at org.hl7.fhir.igtools.publisher.Publisher.execute(Publisher.java:680)
        at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:7145)
Press any key to continue . . .
</code></pre></div>



<a name="195656620"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Bundle%20with%20structure%20defs/near/195656620" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Bundle.20with.20structure.20defs.html#195656620">(Apr 29 2020 at 03:42)</a>:</h4>
<p>for me that's nowhere near LoadBundle - can you resolve what line that is?</p>



<a name="195656698"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Bundle%20with%20structure%20defs/near/195656698" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Bundle.20with.20structure.20defs.html#195656698">(Apr 29 2020 at 03:45)</a>:</h4>
<div class="codehilite"><pre><span></span><code>  res.setUserData(&quot;loaded.resource&quot;, r);
</code></pre></div>



<a name="195656777"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Bundle%20with%20structure%20defs/near/195656777" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Bundle.20with.20structure.20defs.html#195656777">(Apr 29 2020 at 03:46)</a>:</h4>
<p>near the end of loadBundle:</p>
<div class="codehilite"><pre><span></span><code><span class="p">...</span>
      <span class="n">res</span><span class="p">.</span><span class="na">setUserData</span><span class="p">(</span><span class="s">&quot;loaded.resource&quot;</span><span class="p">,</span> <span class="n">r</span><span class="p">);</span>
      <span class="n">r</span><span class="p">.</span><span class="na">setResEntry</span><span class="p">(</span><span class="n">res</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">changed</span> <span class="o">||</span> <span class="n">needToBuild</span><span class="p">;</span>
  <span class="p">}</span>
</code></pre></div>



<a name="195656794"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Bundle%20with%20structure%20defs/near/195656794" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Bundle.20with.20structure.20defs.html#195656794">(Apr 29 2020 at 03:46)</a>:</h4>
<p>oh no sorry</p>



<a name="195656801"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Bundle%20with%20structure%20defs/near/195656801" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Bundle.20with.20structure.20defs.html#195656801">(Apr 29 2020 at 03:46)</a>:</h4>
<p>nevermind</p>



<a name="195656819"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Bundle%20with%20structure%20defs/near/195656819" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Bundle.20with.20structure.20defs.html#195656819">(Apr 29 2020 at 03:46)</a>:</h4>
<p>pls let me check again</p>



<a name="195657382"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Bundle%20with%20structure%20defs/near/195657382" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Bundle.20with.20structure.20defs.html#195657382">(Apr 29 2020 at 03:55)</a>:</h4>
<p>ok just to make clear if I understood correctly: you ask what line that is because your code has changed since, correct?</p>



<a name="195657434"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Bundle%20with%20structure%20defs/near/195657434" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Bundle.20with.20structure.20defs.html#195657434">(Apr 29 2020 at 03:56)</a>:</h4>
<p>I looked at the code in the history at the time of the release I have and this is what's there:</p>



<a name="195657441"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Bundle%20with%20structure%20defs/near/195657441" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Bundle.20with.20structure.20defs.html#195657441">(Apr 29 2020 at 03:56)</a>:</h4>
<div class="codehilite"><pre><span></span><code>        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">res</span><span class="p">.</span><span class="na">hasDescription</span><span class="p">())</span>
          <span class="n">res</span><span class="p">.</span><span class="na">setDescription</span><span class="p">(((</span><span class="n">CanonicalResource</span><span class="p">)</span><span class="n">r</span><span class="p">.</span><span class="na">getResource</span><span class="p">()).</span><span class="na">getDescription</span><span class="p">().</span><span class="na">trim</span><span class="p">());</span>
        <span class="n">res</span><span class="p">.</span><span class="na">setReference</span><span class="p">(</span><span class="k">new</span> <span class="n">Reference</span><span class="p">().</span><span class="na">setReference</span><span class="p">(</span><span class="n">r</span><span class="p">.</span><span class="na">getElement</span><span class="p">().</span><span class="na">fhirType</span><span class="p">()</span><span class="o">+</span><span class="s">&quot;/&quot;</span><span class="o">+</span><span class="n">r</span><span class="p">.</span><span class="na">getId</span><span class="p">()));</span>
      <span class="p">}</span>
</code></pre></div>



<a name="195657512"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Bundle%20with%20structure%20defs/near/195657512" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Bundle.20with.20structure.20defs.html#195657512">(Apr 29 2020 at 03:57)</a>:</h4>
<p>(if the resource has no description, set it (from where?)</p>



<a name="195657561"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Bundle%20with%20structure%20defs/near/195657561" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Bundle.20with.20structure.20defs.html#195657561">(Apr 29 2020 at 03:57)</a>:</h4>
<p>looks like that should have an extra check for r.getresource not having a description. I've added that to the master code</p>



<a name="195657655"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Bundle%20with%20structure%20defs/near/195657655" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Bundle.20with.20structure.20defs.html#195657655">(Apr 29 2020 at 03:59)</a>:</h4>
<p>what is r here (so that i can see if that fixes it)?</p>



<a name="195657659"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Bundle%20with%20structure%20defs/near/195657659" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Bundle.20with.20structure.20defs.html#195657659">(Apr 29 2020 at 03:59)</a>:</h4>
<p>the bundle? or an entry in the bundle?</p>



<a name="195657664"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Bundle%20with%20structure%20defs/near/195657664" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Bundle.20with.20structure.20defs.html#195657664">(Apr 29 2020 at 03:59)</a>:</h4>
<div class="codehilite"><pre><span></span><code>    if (!res.hasDescription() &amp;&amp; ((CanonicalResource)r.getResource()).hasDescription())
      res.setDescription(((CanonicalResource)r.getResource()).getDescription().trim());
</code></pre></div>



<a name="195658159"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Bundle%20with%20structure%20defs/near/195658159" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Bundle.20with.20structure.20defs.html#195658159">(Apr 29 2020 at 04:06)</a>:</h4>
<p>where is the description missing? in my bundle both entries have a description.</p>



<a name="195666150"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Bundle%20with%20structure%20defs/near/195666150" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael van der Zel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Bundle.20with.20structure.20defs.html#195666150">(Apr 29 2020 at 06:39)</a>:</h4>
<p>That was my thought to. Does the bundle need a description?</p>



<a name="195672540"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Bundle%20with%20structure%20defs/near/195672540" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Bundle.20with.20structure.20defs.html#195672540">(Apr 29 2020 at 07:52)</a>:</h4>
<p>no the the bundle. It's pulling each resource out and making a description for it.</p>



<a name="195672547"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Bundle%20with%20structure%20defs/near/195672547" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Bundle.20with.20structure.20defs.html#195672547">(Apr 29 2020 at 07:52)</a>:</h4>
<p>should be fixed now</p>



<a name="195672916"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Bundle%20with%20structure%20defs/near/195672916" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael van der Zel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Bundle.20with.20structure.20defs.html#195672916">(Apr 29 2020 at 07:56)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span>  The github project &lt;<a href="https://github.com/FHIR/latest-ig-publisher" title="https://github.com/FHIR/latest-ig-publisher">https://github.com/FHIR/latest-ig-publisher</a>&gt; has no jars???</p>



<a name="195673113"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Bundle%20with%20structure%20defs/near/195673113" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Bundle.20with.20structure.20defs.html#195673113">(Apr 29 2020 at 07:58)</a>:</h4>
<p>no. I have had to move them - see <a href="https://fhir.github.io/latest-ig-publisher/" title="https://fhir.github.io/latest-ig-publisher/">https://fhir.github.io/latest-ig-publisher/</a></p>



<a name="195673649"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Bundle%20with%20structure%20defs/near/195673649" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael van der Zel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Bundle.20with.20structure.20defs.html#195673649">(Apr 29 2020 at 08:02)</a>:</h4>
<p>Sorry. Still npe:</p>
<div class="codehilite"><pre><span></span><code>``` at org.hl7.fhir.igtools.publisher.Publisher.loadBundle(Publisher.java:3333)
``` at org.hl7.fhir.igtools.publisher.Publisher.loadBundles(Publisher.java:3281)
</code></pre></div>



<a name="195673882"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Bundle%20with%20structure%20defs/near/195673882" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael van der Zel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Bundle.20with.20structure.20defs.html#195673882">(Apr 29 2020 at 08:04)</a>:</h4>
<p>if (!res.hasDescription() &amp;&amp; ((CanonicalResource)r.getResource()).hasDescription()) {</p>



<a name="195673891"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Bundle%20with%20structure%20defs/near/195673891" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Bundle.20with.20structure.20defs.html#195673891">(Apr 29 2020 at 08:04)</a>:</h4>
<p>what have you got in this bundle?</p>



<a name="195673928"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Bundle%20with%20structure%20defs/near/195673928" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Bundle.20with.20structure.20defs.html#195673928">(Apr 29 2020 at 08:05)</a>:</h4>
<p>Specifically, what types of resources?</p>



<a name="195673957"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Bundle%20with%20structure%20defs/near/195673957" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Bundle.20with.20structure.20defs.html#195673957">(Apr 29 2020 at 08:05)</a>:</h4>
<p>Evidently you have something that is not a CanonicalResource.</p>



<a name="195674029"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Bundle%20with%20structure%20defs/near/195674029" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael van der Zel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Bundle.20with.20structure.20defs.html#195674029">(Apr 29 2020 at 08:06)</a>:</h4>
<p>Just StrutureDefinitions.</p>



<a name="195674054"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Bundle%20with%20structure%20defs/near/195674054" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Bundle.20with.20structure.20defs.html#195674054">(Apr 29 2020 at 08:06)</a>:</h4>
<p>weird.</p>



<a name="195674625"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Bundle%20with%20structure%20defs/near/195674625" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Bundle.20with.20structure.20defs.html#195674625">(Apr 29 2020 at 08:13)</a>:</h4>
<p>i have this</p>
<div class="codehilite"><pre><span></span><code>  &lt;extension url=&quot;http://hl7.org/fhir/StructureDefinition/igpublisher-bundle&quot;&gt;
  &lt;valueString value=&quot;test-ig-bnd&quot;/&gt;
  &lt;/extension&gt;
</code></pre></div>



<a name="195700558"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Bundle%20with%20structure%20defs/near/195700558" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Bundle.20with.20structure.20defs.html#195700558">(Apr 29 2020 at 12:30)</a>:</h4>
<p>This works as of v1.0.85</p>



<a name="195700575"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Bundle%20with%20structure%20defs/near/195700575" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Bundle.20with.20structure.20defs.html#195700575">(Apr 29 2020 at 12:30)</a>:</h4>
<p>thank you!</p>



<a name="195747981"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Bundle%20with%20structure%20defs/near/195747981" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael van der Zel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Bundle.20with.20structure.20defs.html#195747981">(Apr 29 2020 at 18:03)</a>:</h4>
<p>I get another exception now: java.lang.Exception: No snapshot found on <a href="http://hl7.org/ehrs/StructureDefinition/Section-OV" title="http://hl7.org/ehrs/StructureDefinition/Section-OV">http://hl7.org/ehrs/StructureDefinition/Section-OV</a><br>
    at org.hl7.fhir.igtools.publisher.Publisher.generateSnapshots(Publisher.java:4172)</p>



<a name="195748383"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Bundle%20with%20structure%20defs/near/195748383" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Bundle.20with.20structure.20defs.html#195748383">(Apr 29 2020 at 18:07)</a>:</h4>
<p>can i reproduce?</p>



<a name="195748933"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Bundle%20with%20structure%20defs/near/195748933" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael van der Zel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Bundle.20with.20structure.20defs.html#195748933">(Apr 29 2020 at 18:11)</a>:</h4>
<p>Ah. I got it. I expected the folders to still being auto processed. Now I had to add the profiles explicitly in the ImplementationGuide.json and now it almost works. Now have no index.html generated ...</p>



<a name="195749313"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Bundle%20with%20structure%20defs/near/195749313" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael van der Zel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Bundle.20with.20structure.20defs.html#195749313">(Apr 29 2020 at 18:14)</a>:</h4>
<p>My mistake. I moved the ig from xml to json and forgot the index page.</p>



<a name="195753495"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Bundle%20with%20structure%20defs/near/195753495" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael van der Zel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Bundle.20with.20structure.20defs.html#195753495">(Apr 29 2020 at 18:49)</a>:</h4>
<p>The resulting ig now also has a "Other" section with the Bundle in there. Can I remove that somehow? And for some reason it uses @name instead of @title to render. So the Artifact index and TOC are now "ugly" computer friendly names and I expect the human friendly title to be used there.</p>



<a name="195755305"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Bundle%20with%20structure%20defs/near/195755305" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Bundle.20with.20structure.20defs.html#195755305">(Apr 29 2020 at 19:03)</a>:</h4>
<p>I think we need to address this in the template.<br>
<span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> should i create an issue in the template to decide how to handle bundles?</p>



<a name="195768800"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Bundle%20with%20structure%20defs/near/195768800" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael van der Zel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Bundle.20with.20structure.20defs.html#195768800">(Apr 29 2020 at 20:57)</a>:</h4>
<p>And in this case not just Bundles, but specifically the entries of the Bundle as if it were separate files.</p>



<a name="195770409"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Bundle%20with%20structure%20defs/near/195770409" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Bundle.20with.20structure.20defs.html#195770409">(Apr 29 2020 at 21:09)</a>:</h4>
<p>Yes, that</p>



<a name="195782858"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Bundle%20with%20structure%20defs/near/195782858" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Bundle.20with.20structure.20defs.html#195782858">(Apr 29 2020 at 23:28)</a>:</h4>
<p>You can assign a grouping to the Bundle yourself in the IG if you know it contains profiles or extensions or something.  (If it's a mixed bag of various stuff, you may need to define a distinct grouping).  All of that said, do we want the Bundle to get propagated to output as a Bundle or propagated to the output as a collection of artifacts?  I suspect what's wanted is the latter.  In that case, we want the Bundle to point to the IG as an input, but not as an output - sort of similar to how we deal with spreadsheets.  However, there's no extension yet to flag a Bundle that we want split apart.  <span class="user-mention" data-user-id="191316">@Grahame Grieve</span>, thoughts?</p>



<a name="195783049"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Bundle%20with%20structure%20defs/near/195783049" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Bundle.20with.20structure.20defs.html#195783049">(Apr 29 2020 at 23:31)</a>:</h4>
<p>The extension <a href="http://hl7.org/fhir/StructureDefinition/igpublisher-bundle" title="http://hl7.org/fhir/StructureDefinition/igpublisher-bundle">http://hl7.org/fhir/StructureDefinition/igpublisher-bundle</a> which has a type of id marks a bundle to be split out and process as individual pieces, rather than just an example bundle</p>



<a name="195783178"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Bundle%20with%20structure%20defs/near/195783178" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Bundle.20with.20structure.20defs.html#195783178">(Apr 29 2020 at 23:32)</a>:</h4>
<p>So you put the extension at the root of the IG and reference the id of the bundle to split?  And after load that bundle won't be listed anymore, the extension will be gone and you'll have references to the structures from within the Bundle - is that accurate?</p>



<a name="195783190"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Bundle%20with%20structure%20defs/near/195783190" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Bundle.20with.20structure.20defs.html#195783190">(Apr 29 2020 at 23:32)</a>:</h4>
<p>Is that extension documented anywhere?</p>



<a name="195783343"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Bundle%20with%20structure%20defs/near/195783343" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Bundle.20with.20structure.20defs.html#195783343">(Apr 29 2020 at 23:34)</a>:</h4>
<blockquote>
<p>And after load that bundle won't be listed anymore, the extension will be gone and you'll have references to the structures from within the Bundle - is that accurate?</p>
</blockquote>
<p>no. The individual resources will be pulled out but the bundle itself will also remain, I think</p>



<a name="195798616"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Bundle%20with%20structure%20defs/near/195798616" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Bundle.20with.20structure.20defs.html#195798616">(Apr 30 2020 at 04:57)</a>:</h4>
<p>right, the bundle also stays there<br>
<a href="/user_uploads/10155/Avaa4zh_fHQ448OqvbnPxsDt/image.png" title="image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/10155/Avaa4zh_fHQ448OqvbnPxsDt/image.png" title="image.png"><img src="/user_uploads/10155/Avaa4zh_fHQ448OqvbnPxsDt/image.png"></a></div>



<a name="195804885"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Bundle%20with%20structure%20defs/near/195804885" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael van der Zel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Bundle.20with.20structure.20defs.html#195804885">(Apr 30 2020 at 07:12)</a>:</h4>
<p>Yes. I have the same result as the image of Jose. The full path looks ugly. It would make sense to remove that bundle after spitting, as Lloyd says.</p>



<a name="195843569"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Bundle%20with%20structure%20defs/near/195843569" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Bundle.20with.20structure.20defs.html#195843569">(Apr 30 2020 at 14:06)</a>:</h4>
<p>Why would we want the Bundle to stay?</p>



<a name="195843604"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Bundle%20with%20structure%20defs/near/195843604" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Bundle.20with.20structure.20defs.html#195843604">(Apr 30 2020 at 14:07)</a>:</h4>
<p>Why would someone looking at the IG care that the source was in a Bundle rather than individual files?</p>



<a name="195910954"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Bundle%20with%20structure%20defs/near/195910954" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Bundle.20with.20structure.20defs.html#195910954">(Apr 30 2020 at 22:37)</a>:</h4>
<p>well, I'd consider making it go away, but before I would consider that, I'd have to search to see if anyone is using it anywhere, and whether that would matter. Does anyone want to do that?</p>



<a name="195912926"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Bundle%20with%20structure%20defs/near/195912926" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Bundle.20with.20structure.20defs.html#195912926">(Apr 30 2020 at 23:01)</a>:</h4>
<p>Searching across public Github (including HL7 projects), only place it's found is within the IG-Publisher itself.  (Git search is pretty amazing - I'm impressed :&gt;)</p>



<a name="195912986"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Bundle%20with%20structure%20defs/near/195912986" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Bundle.20with.20structure.20defs.html#195912986">(Apr 30 2020 at 23:01)</a>:</h4>
<p>ok. so I can't make the bundle go away - because that's where QA errors are reported against.</p>



<a name="195913075"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Bundle%20with%20structure%20defs/near/195913075" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Bundle.20with.20structure.20defs.html#195913075">(Apr 30 2020 at 23:02)</a>:</h4>
<p>I could stop it from rendering but that would mean I couldn't point to it from the qa page</p>



<a name="195913135"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Bundle%20with%20structure%20defs/near/195913135" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Bundle.20with.20structure.20defs.html#195913135">(Apr 30 2020 at 23:03)</a>:</h4>
<p>yuck.  We can't get the QA errors to report against the published structure definitions?  (Presumably if the Bundle itself is invalid, the publisher would just die?)</p>



<a name="195913204"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Bundle%20with%20structure%20defs/near/195913204" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Bundle.20with.20structure.20defs.html#195913204">(Apr 30 2020 at 23:04)</a>:</h4>
<p>no because they are reported against the source file</p>



<a name="195927212"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Bundle%20with%20structure%20defs/near/195927212" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Bundle.20with.20structure.20defs.html#195927212">(May 01 2020 at 02:56)</a>:</h4>
<p>I've been reflecting on this</p>



<a name="195927221"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Bundle%20with%20structure%20defs/near/195927221" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Bundle.20with.20structure.20defs.html#195927221">(May 01 2020 at 02:57)</a>:</h4>
<p>I'm not going to stop publishing the bundle. It's for the template to not link to it if it's a referenced bundle. At the discretion of the author</p>



<a name="195927584"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Bundle%20with%20structure%20defs/near/195927584" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Bundle.20with.20structure.20defs.html#195927584">(May 01 2020 at 03:05)</a>:</h4>
<p>So basically the template can just strip Bundles that aren't marked as examples?  (on the premise that the only other use is that they're bundles of input resources)</p>



<a name="195927634"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Bundle%20with%20structure%20defs/near/195927634" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Bundle.20with.20structure.20defs.html#195927634">(May 01 2020 at 03:06)</a>:</h4>
<p>I could add a parameter to the template to have it not do that, but I think that would be the appropriate default behavior.</p>



<a name="195927639"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Bundle%20with%20structure%20defs/near/195927639" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Bundle.20with.20structure.20defs.html#195927639">(May 01 2020 at 03:07)</a>:</h4>
<p>As a rule, someone looking at a published IG should have no insight into how the source material was organized/packaged.</p>



<a name="195927644"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Bundle%20with%20structure%20defs/near/195927644" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Bundle.20with.20structure.20defs.html#195927644">(May 01 2020 at 03:07)</a>:</h4>
<p>(and changing the approach to managing the input shouldn't impact the publication)</p>



<a name="196043477"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Bundle%20with%20structure%20defs/near/196043477" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael van der Zel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Bundle.20with.20structure.20defs.html#196043477">(May 02 2020 at 09:42)</a>:</h4>
<p>Maybe we can put the source material in a zip? That would help too.</p>



<a name="196047999"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Bundle%20with%20structure%20defs/near/196047999" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Bundle.20with.20structure.20defs.html#196047999">(May 02 2020 at 11:47)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191320">Lloyd McKenzie</span> <a href="#narrow/stream/179252-IG-creation/topic/Bundle.20with.20structure.20defs/near/195927584" title="#narrow/stream/179252-IG-creation/topic/Bundle.20with.20structure.20defs/near/195927584">said</a>:</p>
<blockquote>
<p>So basically the template can just strip Bundles that aren't marked as examples?  (on the premise that the only other use is that they're bundles of input resources)</p>
</blockquote>
<p>they can be history as well</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
