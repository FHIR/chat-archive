---
layout: page
title: "FHIR Chat  · Validation error · IG creation"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/index.html">IG creation</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Validation.20error.html">Validation error</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="154018253"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Validation%20error/near/154018253" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Reinhold <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Validation.20error.html#154018253">(Nov 13 2018 at 23:59)</a>:</h4>
<p>I have a resource with one code system url in it</p>
<p>The IG builder gives me this error</p>
<div class="codehilite"><pre><span></span>     [java] Validating Resources                                                             (18.0712sec)
     [java] Terminology server: Check for supported code systems for http://unstats.un.org/unsd/methods/m49/m49.htm
     [java] java.lang.NullPointerException
     [java]     at org.hl7.fhir.r4.utils.FHIRPathEngine.tailMatches(FHIRPathEngine.java:3765)
</pre></div>


<p>But the only CodeSystem URL I have is for the dataAbsentReason</p>
<p><a href="http://terminology.hl7.org/CodeSystem/data-absent-reason" target="_blank" title="http://terminology.hl7.org/CodeSystem/data-absent-reason">http://terminology.hl7.org/CodeSystem/data-absent-reason</a></p>
<p>Maybe I just do not understand this error. The resource is</p>
<div class="codehilite"><pre><span></span>{
    &quot;resourceType&quot;: &quot;Observation&quot;,
    &quot;id&quot;: &quot;nan-1.0.0.42&quot;,
    &quot;meta&quot;: {
        &quot;profile&quot;: [
            &quot;http://hl7.org/fhir/uv/phd/StructureDefinition/PhdNumericObservation&quot;
        ]
    },
    &quot;extension&quot;: [
        {
            &quot;url&quot;: &quot;http://hl7.org/fhir/StructureDefinition/observation-gatewayDevice&quot;,
            &quot;valueReference&quot;: {
                &quot;reference&quot;: &quot;Device/ecde3d4e58532d31&quot;
            }
        }
    ],
    &quot;status&quot;: &quot;final&quot;,
    &quot;code&quot;: {
        &quot;coding&quot;: [
            {
                &quot;system&quot;: &quot;urn:iso:std:iso:11073:10101&quot;,
                &quot;code&quot;: &quot;150320&quot;
            }
        ],
        &quot;text&quot;: &quot;MDC_SAT_O2_QUAL: Blood oxygen saturation&quot;
    },
    &quot;subject&quot;: {
        &quot;reference&quot;: &quot;Patient/sisansarahId.1.2.3.4.5.6.7.8.10&quot;
    },
    &quot;effectiveDateTime&quot;: &quot;2018-11-11T19:07:48-05:00&quot;,
    &quot;dataAbsentReason&quot;: {
        &quot;coding&quot;: [
            {
                &quot;system&quot;: &quot;http://terminology.hl7.org/CodeSystem/data-absent-reason&quot;,
                &quot;code&quot;: &quot;not-a-number&quot;
            }
        ],
        &quot;text&quot;: &quot;not-a-number (Not a number)&quot;
    },
    &quot;device&quot;: {
        &quot;reference&quot;: &quot;Device/74E8FFFEFF051C00.001C05FFE874&quot;
    },
    &quot;derivedFrom&quot;: [
        {
            &quot;reference&quot;: &quot;Observation/coincident-3.14159.20181111190736&quot;
        }
    ]
}
</pre></div>



<a name="154018265"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Validation%20error/near/154018265" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Validation.20error.html#154018265">(Nov 14 2018 at 00:26)</a>:</h4>
<p>That coding system is associated with stats.  Its not related to this observation.</p>



<a name="154018268"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Validation%20error/near/154018268" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Reinhold <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Validation.20error.html#154018268">(Nov 14 2018 at 00:38)</a>:</h4>
<blockquote>
<p>That coding system is associated with stats.  Its not related to this observation.</p>
</blockquote>
<p>Why am I getting that error on my Observation example?</p>



<a name="154018270"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Validation%20error/near/154018270" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Validation.20error.html#154018270">(Nov 14 2018 at 00:49)</a>:</h4>
<p>the build may be processing other files in your directory... do you have any folders with other directories.</p>



<a name="154018271"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Validation%20error/near/154018271" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Reinhold <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Validation.20error.html#154018271">(Nov 14 2018 at 00:51)</a>:</h4>
<blockquote>
<p>the build may be processing other files in your directory... do you have any folders with other directories.</p>
</blockquote>
<p>Well, if I remove the example file above from the ImplementationGuide.xml, it builds fine.</p>



<a name="154018343"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Validation%20error/near/154018343" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Reinhold <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Validation.20error.html#154018343">(Nov 14 2018 at 10:40)</a>:</h4>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span>  <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> <br>
Any idea why my example gets this validation error?</p>
<div class="codehilite"><pre><span></span>  [java] Terminology server: Check for supported code systems for http://unstats.un.org/unsd/methods/m49/m49.htm
</pre></div>


<p>What is '<a href="http://unstats.un.org" target="_blank" title="http://unstats.un.org">unstats.un.org</a>' and why does it have anything to do with my example? The reference to a coding system in the example is for the dataAbsentReason.coding.system.</p>



<a name="154018344"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Validation%20error/near/154018344" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Validation.20error.html#154018344">(Nov 14 2018 at 10:41)</a>:</h4>
<p>that's not a validation error - it's a performance optimization note for me</p>



<a name="154018345"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Validation%20error/near/154018345" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Reinhold <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Validation.20error.html#154018345">(Nov 14 2018 at 10:42)</a>:</h4>
<blockquote>
<p>that's not a validation error - it's a performance optimization note for me</p>
</blockquote>
<p>Oh. Its always the last line before a null pointer exception</p>



<a name="154018346"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Validation%20error/near/154018346" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Validation.20error.html#154018346">(Nov 14 2018 at 10:42)</a>:</h4>
<p>I guess I'll have to debug... that has no bearing on the NPE</p>



<a name="154018347"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Validation%20error/near/154018347" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Reinhold <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Validation.20error.html#154018347">(Nov 14 2018 at 10:44)</a>:</h4>
<p>I figure if I can get one example to work it should be easy to add more ... I can give you the entire log around the error ...</p>
<p>For some reason the validator does not like this resource</p>
<div class="codehilite"><pre><span></span>{
    &quot;resourceType&quot;: &quot;Observation&quot;,
    &quot;id&quot;: &quot;nan-1.0.0.42&quot;,
    &quot;meta&quot;: {
        &quot;profile&quot;: [
            &quot;http://hl7.org/fhir/uv/phd/StructureDefinition/PhdNumericObservation&quot;
        ]
    },
    &quot;extension&quot;: [
        {
            &quot;url&quot;: &quot;http://hl7.org/fhir/StructureDefinition/observation-gatewayDevice&quot;,
            &quot;valueReference&quot;: {
                &quot;reference&quot;: &quot;Device/ecde3d4e58532d31&quot;
            }
        }
    ],
    &quot;status&quot;: &quot;final&quot;,
    &quot;code&quot;: {
        &quot;coding&quot;: [
            {
                &quot;system&quot;: &quot;urn:iso:std:iso:11073:10101&quot;,
                &quot;code&quot;: &quot;150320&quot;
            }
        ],
        &quot;text&quot;: &quot;MDC_SAT_O2_QUAL: Pulsatile quality&quot;
    },
    &quot;subject&quot;: {
        &quot;reference&quot;: &quot;Patient/sisansarahId.1.2.3.4.5.6.7.8.10&quot;
    },
    &quot;effectiveDateTime&quot;: &quot;2018-11-11T19:07:48-05:00&quot;,
    &quot;dataAbsentReason&quot;: {
        &quot;coding&quot;: [
            {
                &quot;system&quot;: &quot;http://terminology.hl7.org/CodeSystem/data-absent-reason&quot;,
                &quot;code&quot;: &quot;not-a-number&quot;
            }
        ],
        &quot;text&quot;: &quot;not-a-number (Not a number)&quot;
    },
    &quot;device&quot;: {
        &quot;reference&quot;: &quot;Device/74E8FFFEFF051C00.001C05FFE874&quot;
    }
}
</pre></div>


<p>Since it is throwing a null pointer exception it must be looking for something that isn't there....I just don't know what. I made up the id since this observation was extracted from a transaction bundle.</p>



<a name="154018351"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Validation%20error/near/154018351" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Validation.20error.html#154018351">(Nov 14 2018 at 10:54)</a>:</h4>
<p>Can you post the full stack trace for the NPE?</p>



<a name="154018354"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Validation%20error/near/154018354" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Reinhold <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Validation.20error.html#154018354">(Nov 14 2018 at 10:55)</a>:</h4>
<blockquote>
<p>Can you post the full stack trace for the NPE?</p>
</blockquote>
<p>here</p>
<div class="codehilite"><pre><span></span>     [java] E:\Ruby25-x64\IG_Publisher\PHD\src\examples\nan-1.0.0.42
     [java] -tx cache miss: $validate null#not-a-number: &quot;null&quot; for null
     [java] Validating Resources                                                             (15.0711sec)
     [java] Terminology server: Check for supported code systems for http://unstats.un.org/unsd/methods/m49/m49.htm
     [java] java.lang.NullPointerException                                                   (17.0032sec)
     [java] Publishing Content Failed: null                                                  (17.0042sec)
     [java]                                                                                  (17.0042sec)
     [java] Use -? to get command line help                                                  (17.0042sec)
     [java]                                                                                  (17.0042sec)
     [java] Stack Dump (for debugging):                                                      (17.0042sec)
     [java] java.lang.NullPointerException
     [java]     at org.hl7.fhir.r4.utils.FHIRPathEngine.tailMatches(FHIRPathEngine.java:3765)
     [java]     at org.hl7.fhir.r4.utils.FHIRPathEngine.evaluateDefinition(FHIRPathEngine.java:3693)
     [java]     at org.hl7.fhir.r4.validation.InstanceValidator.getCriteriaForDiscriminator(InstanceValidator.java:2020)
     [java]     at org.hl7.fhir.r4.validation.InstanceValidator.sliceMatches(InstanceValidator.java:2495)
     [java]     at org.hl7.fhir.r4.validation.InstanceValidator.validateElement(InstanceValidator.java:3479)
     [java]     at org.hl7.fhir.r4.validation.InstanceValidator.validateElement(InstanceValidator.java:3785)
     [java]     at org.hl7.fhir.r4.validation.InstanceValidator.start(InstanceValidator.java:2665)
     [java]     at org.hl7.fhir.r4.validation.InstanceValidator.validateResource(InstanceValidator.java:3978)
     [java]     at org.hl7.fhir.r4.validation.InstanceValidator.validate(InstanceValidator.java:709)
     [java]     at org.hl7.fhir.r4.validation.InstanceValidator.validate(InstanceValidator.java:669)
     [java]     at org.hl7.fhir.igtools.publisher.Publisher.validate(Publisher.java:2802)
     [java]     at org.hl7.fhir.igtools.publisher.Publisher.validate(Publisher.java:2779)
     [java]     at org.hl7.fhir.igtools.publisher.Publisher.createIg(Publisher.java:591)
     [java]     at org.hl7.fhir.igtools.publisher.Publisher.execute(Publisher.java:526)
     [java]     at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:4925)
     [java] Exception in thread &quot;main&quot; java.lang.NullPointerException
     [java]     at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:4935)
     [java] Picked up JAVA_TOOL_OPTIONS: -Dfile.encoding=UTF-8

BUILD FAILED
</pre></div>



<a name="154018365"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Validation%20error/near/154018365" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Validation.20error.html#154018365">(Nov 14 2018 at 11:02)</a>:</h4>
<p>unusual...</p>



<a name="154018366"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Validation%20error/near/154018366" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Validation.20error.html#154018366">(Nov 14 2018 at 11:02)</a>:</h4>
<p>you have a slice with no value somewhere?</p>



<a name="154018370"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Validation%20error/near/154018370" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Validation.20error.html#154018370">(Nov 14 2018 at 11:05)</a>:</h4>
<p>The specific error seems to be choking on either an element with no path or an element with a single type with no code.</p>



<a name="154018371"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Validation%20error/near/154018371" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Validation.20error.html#154018371">(Nov 14 2018 at 11:06)</a>:</h4>
<p>Is the IG checked in anywhere we can run it through the debugger?</p>



<a name="154018372"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Validation%20error/near/154018372" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Reinhold <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Validation.20error.html#154018372">(Nov 14 2018 at 11:07)</a>:</h4>
<blockquote>
<p>Is the IG checked in anywhere we can run it through the debugger?</p>
</blockquote>
<p>I am trying to build it so I can check it in. My understanding is that I need to do that first. But it is on git hub. I can check it in as is</p>
<p><a href="https://github.com/HL7/PHD" target="_blank" title="https://github.com/HL7/PHD">https://github.com/HL7/PHD</a></p>
<p>I just noted that I committed it with an attempt I was doing on another example resource. That one is BIG. In the ImplementationGuide you can get the same error using the small single-Observation example by uncommenting the small example and commenting out the big one.</p>
<div class="codehilite"><pre><span></span>--- The big one ---
    &lt;resource&gt;
      &lt;reference&gt;
        &lt;reference value=&quot;Bundle/bundle-continuousnonin&quot;/&gt;
      &lt;/reference&gt;
      &lt;name value=&quot;Example upload from Pulse Oximeter&quot;/&gt;
      &lt;description value=&quot;This example is an upload from a Bluetooth Low Energy Pulse oximeter device streaming data. In this case the gateway has previously uploaded measurements and saved the logical ids of the Patient and Device resources so they are not re-uploaded.&quot; /&gt;
      &lt;exampleBoolean value=&quot;true&quot;/&gt;
      &lt;groupingId value=&quot;hl7.fhir.uv.phd&quot; /&gt;
    &lt;/resource&gt;
    &lt;!-- (small example)
    &lt;resource&gt;
      &lt;reference&gt;
        &lt;reference value=&quot;Observation/nan-1.0.0.42&quot;/&gt;
      &lt;/reference&gt;
      &lt;name value=&quot;Example upload from Pulse Oximeter&quot;/&gt;
      &lt;description value=&quot;Example contains a NaN (not a number) measurement.&quot; /&gt;
      &lt;exampleBoolean value=&quot;true&quot;/&gt;
      &lt;groupingId value=&quot;hl7.fhir.uv.phd&quot; /&gt;
    &lt;/resource&gt; --&gt;
</pre></div>


<p><strong>I recommitted with the simple example ...</strong></p>



<a name="154018373"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Validation%20error/near/154018373" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Validation.20error.html#154018373">(Nov 14 2018 at 11:09)</a>:</h4>
<p>the build will just fail. You don't have to get IGs to build in order to commit (different to the main build)</p>



<a name="154018376"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Validation%20error/near/154018376" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Validation.20error.html#154018376">(Nov 14 2018 at 11:20)</a>:</h4>
<p>ok checking in a fix</p>



<a name="154018377"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Validation%20error/near/154018377" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Reinhold <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Validation.20error.html#154018377">(Nov 14 2018 at 11:25)</a>:</h4>
<blockquote>
<p>ok checking in a fix</p>
</blockquote>
<p>I still get the error but I only cleared the src-generated files. Probably need to clear the .fhir cache?</p>



<a name="154018378"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Validation%20error/near/154018378" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Validation.20error.html#154018378">(Nov 14 2018 at 11:27)</a>:</h4>
<p>I don't think the fix has been pushed yet?</p>



<a name="154018379"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Validation%20error/near/154018379" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Reinhold <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Validation.20error.html#154018379">(Nov 14 2018 at 11:28)</a>:</h4>
<p>OH.  I guess it takes a while to check in ... I cleared the cache and the src-generated but get the same result. <br>
What was the problem or is it too complicated to explain?</p>



<a name="154018380"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Validation%20error/near/154018380" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Reinhold <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Validation.20error.html#154018380">(Nov 14 2018 at 11:37)</a>:</h4>
<blockquote>
<p>I don't think the fix has been pushed yet?</p>
</blockquote>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span>  Do I need to commit the IGpublisher.jar in the src-generated files to have the continuous integration work?</p>



<a name="154018391"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Validation%20error/near/154018391" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Validation.20error.html#154018391">(Nov 14 2018 at 12:14)</a>:</h4>
<p>No.  Grahame's commit is now merged and built and it looks like it fixes your issue.</p>



<a name="154018395"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Validation%20error/near/154018395" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Reinhold <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Validation.20error.html#154018395">(Nov 14 2018 at 12:19)</a>:</h4>
<blockquote>
<p>No.  Grahame's commit is now merged and built and it looks like it fixes your issue.</p>
</blockquote>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span>  YES IT DID!</p>
<p>Given that, what files in the src-generated do I need to commit in order to have the continuous integration work? Do I just need the directory hierarchy? GitHub is complaining about the igpublisher being too big.</p>



<a name="154018400"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Validation%20error/near/154018400" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Validation.20error.html#154018400">(Nov 14 2018 at 12:56)</a>:</h4>
<p>Github complains, but it still does it.  I always commit everything in src-generated</p>



<a name="154018401"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Validation%20error/near/154018401" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Validation.20error.html#154018401">(Nov 14 2018 at 13:03)</a>:</h4>
<p>you don't need igpublisher committed for the auto-build. it uses it's own version of the igpublisher</p>



<a name="180783590"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Validation%20error/near/180783590" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Validation.20error.html#180783590">(Nov 14 2019 at 22:41)</a>:</h4>
<p>In creating some example SDC questionnaires with a contained bundle found a validation issue:<br>
<a href="https://sqlonfhir-r4.azurewebsites.net/fhir/Questionnaire/gp-assessment-report" target="_blank" title="https://sqlonfhir-r4.azurewebsites.net/fhir/Questionnaire/gp-assessment-report">https://sqlonfhir-r4.azurewebsites.net/fhir/Questionnaire/gp-assessment-report</a></p>
<div class="codehilite"><pre><span></span>&lt;Questionnaire &gt;
  &lt;id value=&quot;gp-assessment-report&quot;/&gt;
  &lt;contained &gt;
    &lt;Bundle &gt;
      &lt;id value=&quot;PrePopQuery&quot;/&gt;
      &lt;type value=&quot;batch&quot;/&gt;
      &lt;entry &gt;
      &lt;fullUrl value=&quot;urn:uuid:88f151c0-a954-468a-88bd-5ae15c08e059&quot;/&gt;
      &lt;request &gt;
      &lt;method value=&quot;GET&quot;/&gt;
      &lt;url value=&quot;RelatedPerson?patient={{%LaunchPatient.id}}&amp;active=true&quot;/&gt;
      &lt;/request&gt;
      &lt;/entry&gt;
    &lt;/Bundle&gt;
  &lt;/contained&gt;
</pre></div>


<p>This returns the following 2 invariant errors:<br>
bdl-3: entry.request mandatory for batch/transaction/history, otherwise prohibited [entry.all(request.exists() = ((%resource.type = 'batch') or (%resource.type = 'transaction') or (%resource.type = 'history')))]<br>
bdl-4: entry.response mandatory for batch-response/transaction-response/history, otherwise prohibited [entry.all(response.exists() = ((%resource.type = 'batch-response') or (%resource.type = 'transaction-response') or (%resource.type = 'history')))]<br>
Which I think are not correct.</p>



<a name="180787040"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Validation%20error/near/180787040" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Validation.20error.html#180787040">(Nov 14 2019 at 23:22)</a>:</h4>
<p>Yup.  Looks like a FHIRPath issue where %resource is resolving to the Questionnaire rather than the Bundle.</p>



<a name="180954492"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Validation%20error/near/180954492" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Validation.20error.html#180954492">(Nov 17 2019 at 11:44)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> , does the fhirpath/validation tests contain an example like this one?</p>



<a name="180954499"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Validation%20error/near/180954499" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Validation.20error.html#180954499">(Nov 17 2019 at 11:44)</a>:</h4>
<p>It’s on my todo list to investigate</p>



<a name="182141210"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Validation%20error/near/182141210" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Validation.20error.html#182141210">(Nov 28 2019 at 23:30)</a>:</h4>
<p>looks like i've fixed this, but I've added it as a test case</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
