---
layout: page
title: "FHIR Chat  · Constraining Extension Values in Profiles · IG creation"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/index.html">IG creation</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Constraining.20Extension.20Values.20in.20Profiles.html">Constraining Extension Values in Profiles</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153986079"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Constraining%20Extension%20Values%20in%20Profiles/near/153986079" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Constraining.20Extension.20Values.20in.20Profiles.html#153986079">(Aug 14 2018 at 01:52)</a>:</h4>
<p>Is it possible to constrain the <code>valueReference</code> of an extension to a specific profile?  See the example below for something the IG publisher outputs in this situation:<br>
<a href="/user_uploads/10155/8cjXSl8ka-0mRVqrM--ZNkP5/pasted_image.png" target="_blank" title="pasted_image.png">pasted image</a></p>
<div class="message_inline_image"><a href="/user_uploads/10155/8cjXSl8ka-0mRVqrM--ZNkP5/pasted_image.png" target="_blank" title="pasted image"><img src="/user_uploads/10155/8cjXSl8ka-0mRVqrM--ZNkP5/pasted_image.png"></a></div><p><code>shr-base-Subject-extension</code> defines a <code>valueReference</code> to <code>DomainResource</code>.  In a profile, the profile constrains that extension's <code>valueReference</code> to point to a <code>WoundPresent</code> profile.</p>
<p>You can see in the screenshot above that the IG ends up listing both the original reference (in line with the base extension) and the profile reference (in line with the unrolled <code>valueReference</code>).  This doesn't seem quite right, but I'm not sure if I'm doing something unsupported or if the IG publisher just doesn't handle it correctly.</p>



<a name="153986080"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Constraining%20Extension%20Values%20in%20Profiles/near/153986080" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Constraining.20Extension.20Values.20in.20Profiles.html#153986080">(Aug 14 2018 at 01:53)</a>:</h4>
<p>it feels like an IG publisher issue, but I won't know until I debug in detail</p>



<a name="153986088"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Constraining%20Extension%20Values%20in%20Profiles/near/153986088" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Constraining.20Extension.20Values.20in.20Profiles.html#153986088">(Aug 14 2018 at 02:15)</a>:</h4>
<p>Alright.  Relatively speaking, I'd say this one is low priority.  I mainly wanted to be sure that the general idea of what I was doing (applying a type constraint on an extension) wasn't horribly illegal.</p>



<a name="153986096"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Constraining%20Extension%20Values%20in%20Profiles/near/153986096" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sarah Gaunt <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Constraining.20Extension.20Values.20in.20Profiles.html#153986096">(Aug 14 2018 at 02:22)</a>:</h4>
<p>Is this the same use case?</p>
<p><a href="/user_uploads/10155/lt_EBoGyWERLL_58zs3yBWga/pasted_image.png" target="_blank" title="pasted_image.png">pasted image</a> </p>
<div class="message_inline_image"><a href="/user_uploads/10155/lt_EBoGyWERLL_58zs3yBWga/pasted_image.png" target="_blank" title="pasted image"><img src="/user_uploads/10155/lt_EBoGyWERLL_58zs3yBWga/pasted_image.png"></a></div><p>And then in the extension:<br>
<a href="user_uploads/10155/UpwzBeIAvrC1BE-0wXTaZXe4/pasted_image.png" target="_blank" title="user_uploads/10155/UpwzBeIAvrC1BE-0wXTaZXe4/pasted_image.png">pasted image</a></p>
<div class="message_inline_image"><a href="user_uploads/10155/UpwzBeIAvrC1BE-0wXTaZXe4/pasted_image.png" target="_blank" title="pasted image"><img src="user_uploads/10155/UpwzBeIAvrC1BE-0wXTaZXe4/pasted_image.png"></a></div><p>It looks different to yours though...</p>



<a name="153986108"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Constraining%20Extension%20Values%20in%20Profiles/near/153986108" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Constraining.20Extension.20Values.20in.20Profiles.html#153986108">(Aug 14 2018 at 02:32)</a>:</h4>
<p>I'm not sure?  The first image looks like the use of the <code>extension-rr-routing-entity</code> extension in a profile.  The 2nd image looks like the definition of the <code>extension-rr-responsible-agency</code> extension.  Are those supposed to be related somehow?</p>
<p>I think mine is more like the first if you had another profile (e.g., <code>Child Routing Entity</code>) and you tried to constrain the <code>extension-rr-routing-entity</code> extension to reference the <code>Child Routing Entity</code> instead.</p>



<a name="153986110"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Constraining%20Extension%20Values%20in%20Profiles/near/153986110" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sarah Gaunt <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Constraining.20Extension.20Values.20in.20Profiles.html#153986110">(Aug 14 2018 at 02:34)</a>:</h4>
<p>Yeah, wrong screen shot... <br>
So the extension-rr-routing-entity references a profile called Routing Entity. <br>
Is that what your extension is doing?</p>



<a name="153986112"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Constraining%20Extension%20Values%20in%20Profiles/near/153986112" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sarah Gaunt <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Constraining.20Extension.20Values.20in.20Profiles.html#153986112">(Aug 14 2018 at 02:35)</a>:</h4>
<p>I'm not sure if I'm doing it correctly - it seems like the same idea, but maybe it isn't....</p>



<a name="153986115"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Constraining%20Extension%20Values%20in%20Profiles/near/153986115" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sarah Gaunt <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Constraining.20Extension.20Values.20in.20Profiles.html#153986115">(Aug 14 2018 at 02:37)</a>:</h4>
<p>It looks like your screen shot is showing where the extension is used, not where it's defined?</p>



<a name="153986116"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Constraining%20Extension%20Values%20in%20Profiles/near/153986116" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Constraining.20Extension.20Values.20in.20Profiles.html#153986116">(Aug 14 2018 at 02:38)</a>:</h4>
<p>I think that what you're doing is the pretty typical use case -- and it looks to me like you're doing it right.</p>



<a name="153986117"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Constraining%20Extension%20Values%20in%20Profiles/near/153986117" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sarah Gaunt <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Constraining.20Extension.20Values.20in.20Profiles.html#153986117">(Aug 14 2018 at 02:39)</a>:</h4>
<p>So you are constraining the valueReference when it gets used? Is that the difference?</p>



<a name="153986118"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Constraining%20Extension%20Values%20in%20Profiles/near/153986118" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Constraining.20Extension.20Values.20in.20Profiles.html#153986118">(Aug 14 2018 at 02:40)</a>:</h4>
<p>My use case is a little different.  In my use case, imagine a profiler says, "I like that extension-rr-routing-entity extension, but I actually want to constrain the profile it references (RoutingEntity) even further! I want it to say the reference must be to StricterRoutingEntity!"</p>



<a name="153986119"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Constraining%20Extension%20Values%20in%20Profiles/near/153986119" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Constraining.20Extension.20Values.20in.20Profiles.html#153986119">(Aug 14 2018 at 02:41)</a>:</h4>
<p>Yeah, I think that's the difference.  The other approach, of course, would be just to create _another_ whole extension with its own unique name.  But maybe that's not necessary?</p>



<a name="153986120"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Constraining%20Extension%20Values%20in%20Profiles/near/153986120" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sarah Gaunt <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Constraining.20Extension.20Values.20in.20Profiles.html#153986120">(Aug 14 2018 at 02:41)</a>:</h4>
<p>Ah ok... Interesting!</p>



<a name="153986123"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Constraining%20Extension%20Values%20in%20Profiles/near/153986123" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sarah Gaunt <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Constraining.20Extension.20Values.20in.20Profiles.html#153986123">(Aug 14 2018 at 02:43)</a>:</h4>
<p>It actually is close to my use case - I've been struggling with it. I have ended up with 3 of almost the same extension - if it's possible to do what you are doing, I might have to change it. Then I'd only have the one extension (entity/agency) which could be further constrained at that higher level to routing/responsible/rules authoring. </p>
<p>I'll have to look into it. It would be less clutter - it's been bothering me to have the 3 extensions.</p>



<a name="153986125"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Constraining%20Extension%20Values%20in%20Profiles/near/153986125" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sarah Gaunt <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Constraining.20Extension.20Values.20in.20Profiles.html#153986125">(Aug 14 2018 at 02:45)</a>:</h4>
<p>Darn it! Didn't want to get sucked into any rabbit holes today! <span class="emoji emoji-1f602" title="joy">:joy:</span> <span class="emoji emoji-1f602" title="joy">:joy:</span> <span class="emoji emoji-1f602" title="joy">:joy:</span></p>



<a name="153986126"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Constraining%20Extension%20Values%20in%20Profiles/near/153986126" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Constraining.20Extension.20Values.20in.20Profiles.html#153986126">(Aug 14 2018 at 02:46)</a>:</h4>
<p>Ha!  You're welcome!</p>



<a name="153986424"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Constraining%20Extension%20Values%20in%20Profiles/near/153986424" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Constraining.20Extension.20Values.20in.20Profiles.html#153986424">(Aug 14 2018 at 18:28)</a>:</h4>
<p>so where are we with this now?</p>



<a name="153986433"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Constraining%20Extension%20Values%20in%20Profiles/near/153986433" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sarah Gaunt <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Constraining.20Extension.20Values.20in.20Profiles.html#153986433">(Aug 14 2018 at 18:31)</a>:</h4>
<p>I've updated my IG to use that same pattern and it looks the same as Chris's. (Haven't run it yet this morning though - not sure what changes have happened over night...).</p>
<p><a href="/user_uploads/10155/HYOuRyG9Z11TSgFwKBifXchx/pasted_image.png" target="_blank" title="pasted_image.png">pasted image</a></p>
<div class="message_inline_image"><a href="/user_uploads/10155/HYOuRyG9Z11TSgFwKBifXchx/pasted_image.png" target="_blank" title="pasted image"><img src="/user_uploads/10155/HYOuRyG9Z11TSgFwKBifXchx/pasted_image.png"></a></div>



<a name="153986437"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Constraining%20Extension%20Values%20in%20Profiles/near/153986437" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Constraining.20Extension.20Values.20in.20Profiles.html#153986437">(Aug 14 2018 at 18:32)</a>:</h4>
<p>which page is that?</p>



<a name="153986442"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Constraining%20Extension%20Values%20in%20Profiles/near/153986442" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sarah Gaunt <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Constraining.20Extension.20Values.20in.20Profiles.html#153986442">(Aug 14 2018 at 18:38)</a>:</h4>
<p><a href="http://build.fhir.org/ig/HL7/case-reporting/StructureDefinition-rr-plandefinition.html" target="_blank" title="http://build.fhir.org/ig/HL7/case-reporting/StructureDefinition-rr-plandefinition.html">http://build.fhir.org/ig/HL7/case-reporting/StructureDefinition-rr-plandefinition.html</a> </p>
<p><a href="https://github.com/HL7/case-reporting/blob/master/source/resources/profiles/structuredefinition-rr-plandefinition.xml" target="_blank" title="https://github.com/HL7/case-reporting/blob/master/source/resources/profiles/structuredefinition-rr-plandefinition.xml">https://github.com/HL7/case-reporting/blob/master/source/resources/profiles/structuredefinition-rr-plandefinition.xml</a></p>



<a name="153987279"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Constraining%20Extension%20Values%20in%20Profiles/near/153987279" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sarah Gaunt <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Constraining.20Extension.20Values.20in.20Profiles.html#153987279">(Aug 16 2018 at 01:25)</a>:</h4>
<p>Did you take a look at this <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> ? Is it expected behaviour? Is the pattern even legal?</p>



<a name="153987283"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Constraining%20Extension%20Values%20in%20Profiles/near/153987283" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Constraining.20Extension.20Values.20in.20Profiles.html#153987283">(Aug 16 2018 at 01:41)</a>:</h4>
<p>I can't find that reference?</p>



<a name="153987285"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Constraining%20Extension%20Values%20in%20Profiles/near/153987285" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sarah Gaunt <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Constraining.20Extension.20Values.20in.20Profiles.html#153987285">(Aug 16 2018 at 01:48)</a>:</h4>
<p>Oh yeah, I changed the name (for a way longer and clearly superior name <span class="emoji emoji-1f602" title="joy">:joy:</span> ): </p>
<p><a href="http://build.fhir.org/ig/HL7/case-reporting/StructureDefinition-rr-relevant-reportable-condition-plandefinition.html" target="_blank" title="http://build.fhir.org/ig/HL7/case-reporting/StructureDefinition-rr-relevant-reportable-condition-plandefinition.html">http://build.fhir.org/ig/HL7/case-reporting/StructureDefinition-rr-relevant-reportable-condition-plandefinition.html</a></p>
<p><a href="https://github.com/HL7/case-reporting/blob/master/source/resources/profiles/structuredefinition-rr-relevant-reportable-condition-plandefinition.xml" target="_blank" title="https://github.com/HL7/case-reporting/blob/master/source/resources/profiles/structuredefinition-rr-relevant-reportable-condition-plandefinition.xml">https://github.com/HL7/case-reporting/blob/master/source/resources/profiles/structuredefinition-rr-relevant-reportable-condition-plandefinition.xml</a></p>



<a name="153987286"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Constraining%20Extension%20Values%20in%20Profiles/near/153987286" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sarah Gaunt <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Constraining.20Extension.20Values.20in.20Profiles.html#153987286">(Aug 16 2018 at 01:49)</a>:</h4>
<p>It's the "Rules Authoring Agency Test" bit</p>



<a name="153987292"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Constraining%20Extension%20Values%20in%20Profiles/near/153987292" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Constraining.20Extension.20Values.20in.20Profiles.html#153987292">(Aug 16 2018 at 02:00)</a>:</h4>
<p>so I don't understand what you're trying to do here</p>



<a name="153987294"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Constraining%20Extension%20Values%20in%20Profiles/near/153987294" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sarah Gaunt <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Constraining.20Extension.20Values.20in.20Profiles.html#153987294">(Aug 16 2018 at 02:02)</a>:</h4>
<blockquote>
<p>My use case is a little different.  In my use case, imagine a profiler says, "I like that extension-rr-routing-entity extension, but I actually want to constrain the profile it references (RoutingEntity) even further! I want it to say the reference must be to StricterRoutingEntity!"</p>
</blockquote>
<p>Trying out <span class="user-mention" data-user-id="191469">@Chris Moesel</span> pattern that he explains above. It works for my use case as I could have fewer specific extensions...</p>



<a name="153987295"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Constraining%20Extension%20Values%20in%20Profiles/near/153987295" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Constraining.20Extension.20Values.20in.20Profiles.html#153987295">(Aug 16 2018 at 02:02)</a>:</h4>
<p>this:</p>
<div class="codehilite"><pre><span></span>    &lt;element id=&quot;PlanDefinition.publisher.extension:rulesAuthoringAgency&quot;&gt;
      &lt;path value=&quot;PlanDefinition.publisher.extension&quot; /&gt;
      &lt;sliceName value=&quot;rulesAuthoringAgency&quot; /&gt;
      &lt;min value=&quot;1&quot; /&gt;
      &lt;type&gt;
        &lt;code value=&quot;Extension&quot; /&gt;
        &lt;profile value=&quot;http://hl7.org/fhir/us/ecr/StructureDefinition/extension-rr-rules-authoring-agency&quot; /&gt;
      &lt;/type&gt;
      &lt;mustSupport value=&quot;true&quot; /&gt;
      &lt;mapping&gt;
        &lt;identity value=&quot;cda-rr&quot; /&gt;
        &lt;map value=&quot;Rules Authoring Agency&quot; /&gt;
      &lt;/mapping&gt;
    &lt;/element&gt;
</pre></div>


<p>That's a standard extension profile, ok. Then this:</p>
<div class="codehilite"><pre><span></span>    &lt;element id=&quot;PlanDefinition.publisher.extension:rulesAuthoringAgencyTest&quot;&gt;
      &lt;path value=&quot;PlanDefinition.publisher.extension&quot; /&gt;
      &lt;sliceName value=&quot;rulesAuthoringAgencyTest&quot; /&gt;
      &lt;short value=&quot;Rules Authoring Agency Test&quot; /&gt;
      &lt;definition value=&quot;Optional Extension Element - found in all resources.&quot; /&gt;
      &lt;min value=&quot;1&quot; /&gt;
      &lt;type&gt;
        &lt;code value=&quot;Extension&quot; /&gt;
        &lt;profile value=&quot;http://hl7.org/fhir/us/ecr/StructureDefinition/extension-ecr-organization&quot; /&gt;
      &lt;/type&gt;
      &lt;mustSupport value=&quot;true&quot; /&gt;
    &lt;/element&gt;
</pre></div>


<p>ok that's very similar. but then we walk into the extension, and say:</p>
<div class="codehilite"><pre><span></span>    &lt;element id=&quot;PlanDefinition.publisher.extension:rulesAuthoringAgencyTest.value[x]:valueReference&quot;&gt;
      &lt;path value=&quot;PlanDefinition.publisher.extension.valueReference&quot; /&gt;
      &lt;sliceName value=&quot;valueReference&quot; /&gt;
      &lt;type&gt;
        &lt;code value=&quot;Reference&quot; /&gt;
        &lt;targetProfile value=&quot;http://hl7.org/fhir/us/ecr/StructureDefinition/rr-rules-authoring-agency&quot; /&gt;
      &lt;/type&gt;
    &lt;/element&gt;
</pre></div>


<p>I don't understand that pattern at all, but it looks like exactly what's rendered to me...</p>



<a name="153987297"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Constraining%20Extension%20Values%20in%20Profiles/near/153987297" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sarah Gaunt <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Constraining.20Extension.20Values.20in.20Profiles.html#153987297">(Aug 16 2018 at 02:04)</a>:</h4>
<p>It is exactly what is rendered - but my question is - is this even a reasonable pattern? If you scroll to the beginning of topic you can see Chris's original question...</p>



<a name="153987300"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Constraining%20Extension%20Values%20in%20Profiles/near/153987300" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Constraining.20Extension.20Values.20in.20Profiles.html#153987300">(Aug 16 2018 at 02:08)</a>:</h4>
<p>I don't understand the intention?</p>



<a name="153987301"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Constraining%20Extension%20Values%20in%20Profiles/near/153987301" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sarah Gaunt <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Constraining.20Extension.20Values.20in.20Profiles.html#153987301">(Aug 16 2018 at 02:11)</a>:</h4>
<p>So rather than creating 3 extensions, one for each of my different types of organisation, just create one extension that references the base of the 3 different organisations, the when you use the extension, specialise it further at that point.</p>



<a name="153987302"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Constraining%20Extension%20Values%20in%20Profiles/near/153987302" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sarah Gaunt <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Constraining.20Extension.20Values.20in.20Profiles.html#153987302">(Aug 16 2018 at 02:14)</a>:</h4>
<p>I should probably just roll back to my original pattern - if YOU don't understand it, probably not the best idea!</p>



<a name="153987322"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Constraining%20Extension%20Values%20in%20Profiles/near/153987322" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Constraining.20Extension.20Values.20in.20Profiles.html#153987322">(Aug 16 2018 at 02:51)</a>:</h4>
<p>Ha.  I never claimed that it was a good idea.  Only that we do it. ;-)</p>



<a name="153987323"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Constraining%20Extension%20Values%20in%20Profiles/near/153987323" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sarah Gaunt <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Constraining.20Extension.20Values.20in.20Profiles.html#153987323">(Aug 16 2018 at 02:58)</a>:</h4>
<p>I liked it!</p>



<a name="153987325"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Constraining%20Extension%20Values%20in%20Profiles/near/153987325" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sarah Gaunt <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Constraining.20Extension.20Values.20in.20Profiles.html#153987325">(Aug 16 2018 at 03:00)</a>:</h4>
<p>I'm actually rolling it back though - I can't get an example to validate when I use the pattern. Maybe I'm doing something wrong in my example, but no time to debug at this late juncture... Maybe will investigate again after ballot...</p>



<a name="153987326"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Constraining%20Extension%20Values%20in%20Profiles/near/153987326" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Constraining.20Extension.20Values.20in.20Profiles.html#153987326">(Aug 16 2018 at 03:18)</a>:</h4>
<blockquote>
<p>create one extension that references the base of the 3 different organisations, the when you use the extension, specialise it further at that point</p>
</blockquote>
<p>That part makes sense, I think. I would've thought it would validate</p>



<a name="153987328"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Constraining%20Extension%20Values%20in%20Profiles/near/153987328" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sarah Gaunt <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Constraining.20Extension.20Values.20in.20Profiles.html#153987328">(Aug 16 2018 at 03:20)</a>:</h4>
<p>Who knows - seeing double at this point... As I'm sure you are, actually you're probably at triple ...</p>



<a name="153987329"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Constraining%20Extension%20Values%20in%20Profiles/near/153987329" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sarah Gaunt <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Constraining.20Extension.20Values.20in.20Profiles.html#153987329">(Aug 16 2018 at 03:21)</a>:</h4>
<p>Might test again later</p>



<a name="153987336"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Constraining%20Extension%20Values%20in%20Profiles/near/153987336" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sarah Gaunt <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Constraining.20Extension.20Values.20in.20Profiles.html#153987336">(Aug 16 2018 at 04:19)</a>:</h4>
<p>I'm going for your pattern <span class="user-mention" data-user-id="191469">@Chris Moesel</span>  - managed to get it to work - just some dumb errors in my example were causing the errors.</p>



<a name="169364921"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Constraining%20Extension%20Values%20in%20Profiles/near/169364921" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Townley-O&#x27;Neill <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Constraining.20Extension.20Values.20in.20Profiles.html#169364921">(Jul 01 2019 at 03:08)</a>:</h4>
<p>We want a profile to constrain references in an extension using the technique discussed above. We can constrain the extension values in the profile using a text editor. (See 4/ below) The result displays acceptably in IG Publisher output <br>
<a href="/user_uploads/10155/Z6MOWSuTsDjBWdizUFHB7D4T/pasted_image.png" target="_blank" title="pasted_image.png">pasted image</a> </p>
<div class="message_inline_image"><a href="/user_uploads/10155/Z6MOWSuTsDjBWdizUFHB7D4T/pasted_image.png" target="_blank" title="pasted image"><img src="/user_uploads/10155/Z6MOWSuTsDjBWdizUFHB7D4T/pasted_image.png"></a></div><p>and in Forge<br>
<a href="/user_uploads/10155/BM3nXhdz_Rc1R25oWadUmHlH/pasted_image.png" target="_blank" title="pasted_image.png">pasted image</a></p>
<div class="message_inline_image"><a href="/user_uploads/10155/BM3nXhdz_Rc1R25oWadUmHlH/pasted_image.png" target="_blank" title="pasted image"><img src="/user_uploads/10155/BM3nXhdz_Rc1R25oWadUmHlH/pasted_image.png"></a></div><p>But we cannot create this constraint using Forge. @Vadim Peretokin @Michel Rutten Can Forge do this? How?</p>
<p>1/ The extension: <a href="https://github.com/hl7au/au-fhir-base-stu3/blob/master/resources/structuredefinition-composition-author-role.xml" target="_blank" title="https://github.com/hl7au/au-fhir-base-stu3/blob/master/resources/structuredefinition-composition-author-role.xml">composition-author-role</a><br>
2/ The profile using the extension at lines 39-50: <a href="https://github.com/hl7au/au-fhir-base-stu3/blob/master/resources/au-composition.xml" target="_blank" title="https://github.com/hl7au/au-fhir-base-stu3/blob/master/resources/au-composition.xml">au-composition</a><br>
3/ The profile of au-composition in which we constrain the extension with an invariant at lines 50-63: <a href="https://github.com/AuDigitalHealth/ci-fhir-stu3/blob/master/resources/composition-shs-1.xml" target="_blank" title="https://github.com/AuDigitalHealth/ci-fhir-stu3/blob/master/resources/composition-shs-1.xml">composition-shs-1</a><br>
4/ How we'd like to constrain the extension</p>
<div class="codehilite"><pre><span></span>    &lt;element id=&quot;Composition.extension:compositionAuthorRole&quot;&gt;
      &lt;path value=&quot;Composition.extension&quot; /&gt;
      &lt;sliceName value=&quot;compositionAuthorRole&quot; /&gt;
      &lt;min value=&quot;1&quot; /&gt;
      &lt;max value=&quot;1&quot; /&gt;
      &lt;mustSupport value=&quot;true&quot; /&gt;
    &lt;/element&gt;
    &lt;element id=&quot;Composition.extension:compositionAuthorRole.valueReference:valueReference&quot;&gt;
      &lt;path value=&quot;Composition.extension.valueReference&quot; /&gt;
      &lt;sliceName value=&quot;valueReference&quot; /&gt;
      &lt;type&gt;
        &lt;code value=&quot;Reference&quot; /&gt;
        &lt;targetProfile value=&quot;http://ns.electronichealth.net.au/ci/fhir/3.0/StructureDefinition/practitionerrole-withpractitionerident-1&quot; /&gt;
      &lt;/type&gt;
    &lt;/element&gt;
</pre></div>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
