---
layout: page
title: "FHIR Chat  · json preference? · IG creation"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/index.html">IG creation</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/json.20preference.3F.html">json preference?</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="157258914"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/json%20preference%3F/near/157258914" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/json.20preference.3F.html#157258914">(Jan 31 2019 at 09:37)</a>:</h4>
<p>It seems like the IG pub has a preference for json ...</p>
<div class="codehilite"><pre><span></span>Load Content                                                                     (11.0715sec)
Publishing Content Failed: Unable to determine type for  /Users/jvi/Documents/fut-core/resources/structuredefinition/ITCompetenceLevel: Not a JSON Object: null (12.0139sec)
                                                                                 (12.0139sec)
Use -? to get command line help                                                  (12.0139sec)
                                                                                 (12.0139sec)
Stack Dump (for debugging):                                                      (12.0139sec)
java.lang.Exception: Unable to determine type for  /Users/jvi/Documents/fut-core/resources/structuredefinition/ITCompetenceLevel: Not a JSON Object: null
    at org.hl7.fhir.igtools.publisher.Publisher.loadAsElementModel(Publisher.java:2405)
    at org.hl7.fhir.igtools.publisher.Publisher.load(Publisher.java:1789)
    at org.hl7.fhir.igtools.publisher.Publisher.createIg(Publisher.java:583)
    at org.hl7.fhir.igtools.publisher.Publisher.execute(Publisher.java:527)
    at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:4936)
Caused by: java.lang.IllegalStateException: Not a JSON Object: null
    at com.google.gson.JsonElement.getAsJsonObject(JsonElement.java:90)
    at org.hl7.fhir.r4.formats.JsonParser.parseStructureDefinitionProperties(JsonParser.java:23579)
    at org.hl7.fhir.r4.formats.JsonParser.parseStructureDefinition(JsonParser.java:23478)
    at org.hl7.fhir.r4.formats.JsonParser.parseResource(JsonParser.java:27655)
    at org.hl7.fhir.r4.formats.JsonParserBase.parse(JsonParserBase.java:92)
    at org.hl7.fhir.r4.formats.ParserBase.parse(ParserBase.java:58)
    at org.hl7.fhir.r4.elementmodel.ObjectConverter.convert(ObjectConverter.java:90)
    at org.hl7.fhir.igtools.publisher.Publisher.loadAsElementModel(Publisher.java:2398)
    ... 4 more
Exception in thread &quot;main&quot; java.lang.NullPointerException
    at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:4946)
</pre></div>


<ul>
<li>is there an easy fix to this - or should I convert all my extensions to json (I've already done it with a single one and that worked)</li>
</ul>



<a name="157261652"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/json%20preference%3F/near/157261652" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Egger <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/json.20preference.3F.html#157261652">(Jan 31 2019 at 10:27)</a>:</h4>
<p>strange, i have no problems defining them in xml (e.g. <a href="https://github.com/hl7ch/ch-core/blob/master/resources/structuredefinition/ch-ext-ech-10-line.xml" target="_blank" title="https://github.com/hl7ch/ch-core/blob/master/resources/structuredefinition/ch-ext-ech-10-line.xml">https://github.com/hl7ch/ch-core/blob/master/resources/structuredefinition/ch-ext-ech-10-line.xml</a>)</p>



<a name="157261674"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/json%20preference%3F/near/157261674" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/json.20preference.3F.html#157261674">(Jan 31 2019 at 10:27)</a>:</h4>
<p>The really strange part is that I used your project as starting point (<span class="user-mention" data-user-id="191478">@Oliver Egger</span> )</p>



<a name="157261779"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/json%20preference%3F/near/157261779" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/json.20preference.3F.html#157261779">(Jan 31 2019 at 10:29)</a>:</h4>
<p><span class="user-mention" data-user-id="191478">@Oliver Egger</span> - btw - would you happen to know of a service that generates a narrative?</p>



<a name="157262477"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/json%20preference%3F/near/157262477" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/json.20preference.3F.html#157262477">(Jan 31 2019 at 10:42)</a>:</h4>
<p>the iG Publisher will generate narrative</p>



<a name="157262674"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/json%20preference%3F/near/157262674" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/json.20preference.3F.html#157262674">(Jan 31 2019 at 10:45)</a>:</h4>
<p>the error means that you have a problem with your json format - probably  a wrong version issue. Note that the IG publisher is reading at as R4 but the location of the problem suggests that you're using R3</p>



<a name="157265665"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/json%20preference%3F/near/157265665" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/json.20preference.3F.html#157265665">(Jan 31 2019 at 11:39)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> ok, that makes sense. I'm using R3, and that is probably the reason why. Are there flags available to force it to R3 or is it published for different versions? </p>
<p>(Its still a bit weird that is works when I convert the files to json though.)</p>



<a name="157265869"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/json%20preference%3F/near/157265869" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/json.20preference.3F.html#157265869">(Jan 31 2019 at 11:43)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> - could the R3/R4 issue also be the case that I don't see any narrative being generated on my resources?</p>



<a name="157266688"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/json%20preference%3F/near/157266688" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/json.20preference.3F.html#157266688">(Jan 31 2019 at 12:00)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> - ... one more for the grinder:</p>
<div class="codehilite"><pre><span></span>Watching for changes on a 5sec cycle
Publishing Content Failed: Can&#39;t have an exampleFor unless the file has exactly one resource

Use -? to get command line help

Stack Dump (for debugging):
java.lang.Exception: Can&#39;t have an exampleFor unless the file has exactly one resource
    at org.hl7.fhir.igtools.publisher.Publisher.load(Publisher.java:1792)
    at org.hl7.fhir.igtools.publisher.Publisher.execute(Publisher.java:538)
    at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:4936)
Exception in thread &quot;main&quot; java.lang.NullPointerException
    at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:4946)
</pre></div>



<a name="157268051"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/json%20preference%3F/near/157268051" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/json.20preference.3F.html#157268051">(Jan 31 2019 at 12:27)</a>:</h4>
<p>the narrative thing is not linked to version</p>



<a name="157268052"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/json%20preference%3F/near/157268052" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/json.20preference.3F.html#157268052">(Jan 31 2019 at 12:27)</a>:</h4>
<p>you delcare the version you are using</p>



<a name="157268058"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/json%20preference%3F/near/157268058" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/json.20preference.3F.html#157268058">(Jan 31 2019 at 12:27)</a>:</h4>
<p>what version have you said?</p>



<a name="157268107"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/json%20preference%3F/near/157268107" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/json.20preference.3F.html#157268107">(Jan 31 2019 at 12:28)</a>:</h4>
<p>xml and json behave differently across versions because of how things reflect into the serialization</p>



<a name="157268121"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/json%20preference%3F/near/157268121" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/json.20preference.3F.html#157268121">(Jan 31 2019 at 12:29)</a>:</h4>
<p>you can't have an example for a bundle. the tool can</p>



<a name="157268133"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/json%20preference%3F/near/157268133" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/json.20preference.3F.html#157268133">(Jan 31 2019 at 12:29)</a>:</h4>
<p>'t figure out what it's an example for</p>



<a name="157270728"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/json%20preference%3F/near/157270728" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/json.20preference.3F.html#157270728">(Jan 31 2019 at 13:19)</a>:</h4>
<p>So ... after having dug into it I've found a way through that sort of works. I'l continue to make my profiles as R3 but serialize them as json. If they are expresssed in json I can continue to have my IG expressed in R4. That seem to work and makes it a bit easier to go to r4 when that time arrives ... this spring</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
