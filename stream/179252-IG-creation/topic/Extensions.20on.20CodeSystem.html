---
layout: page
title: "FHIR Chat  · Extensions on CodeSystem · IG creation"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/index.html">IG creation</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Extensions.20on.20CodeSystem.html">Extensions on CodeSystem</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="168568336"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Extensions%20on%20CodeSystem/near/168568336" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Extensions.20on.20CodeSystem.html#168568336">(Jun 20 2019 at 05:38)</a>:</h4>
<p>My IG has defined a new extension that is to be applied to a code system, however when I use this extension in the IG, it fails to find it and gives validation errors.<br>
(I even created the CodeSystem profile, and referenced it to the CS, and the validator result in the qa.html says it can't find the profile too)<br>
Moving the definition of the extension and profile ahead of the code system doesn't help</p>



<a name="168568351"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Extensions%20on%20CodeSystem/near/168568351" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Extensions.20on.20CodeSystem.html#168568351">(Jun 20 2019 at 05:39)</a>:</h4>
<p>what's the extension?</p>



<a name="168568401"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Extensions%20on%20CodeSystem/near/168568401" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Extensions.20on.20CodeSystem.html#168568401">(Jun 20 2019 at 05:40)</a>:</h4>
<div class="codehilite"><pre><span></span>&lt;StructureDefinition xmlns=&quot;http://hl7.org/fhir&quot;&gt;
    &lt;id value=&quot;lga-centrepoint&quot; /&gt;
    &lt;url value=&quot;http://fhir.telstrahealth.com/th-epd/StructureDefinition/lga-centrepoint&quot; /&gt;
...
&lt;kind value=&quot;primitive-type&quot; /&gt;
    &lt;abstract value=&quot;false&quot; /&gt;
    &lt;context&gt;
        &lt;type value=&quot;element&quot; /&gt;
        &lt;expression value=&quot;CodeSystem.concept&quot; /&gt;
    &lt;/context&gt;
    &lt;type value=&quot;Extension&quot; /&gt;
    &lt;baseDefinition value=&quot;http://hl7.org/fhir/StructureDefinition/Extension&quot; /&gt;
    &lt;derivation value=&quot;constraint&quot; /&gt;
</pre></div>



<a name="168568409"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Extensions%20on%20CodeSystem/near/168568409" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Extensions.20on.20CodeSystem.html#168568409">(Jun 20 2019 at 05:40)</a>:</h4>
<p>Then using it in my CodeSystem like</p>
<div class="codehilite"><pre><span></span>&lt;CodeSystem xmlns=&quot;http://hl7.org/fhir&quot;&gt;
    &lt;id value=&quot;hcxdir-locality&quot; /&gt;
    &lt;meta&gt;
        &lt;profile value=&quot;http://fhir.telstrahealth.com/th-epd/StructureDefinition/hcxdir-codesystem&quot;/&gt;
    &lt;/meta&gt;
...
    &lt;concept id=&quot;16986&quot;&gt;
        &lt;extension url=&quot;http://fhir.telstrahealth.com/th-epd/StructureDefinition/lga-centrepoint&quot;&gt;
            &lt;valueString value=&quot;POINT(146.6999019,-36.9153738)&quot; /&gt;
        &lt;/extension&gt;
        &lt;code value=&quot;ABBEYARD, 3737 VIC&quot; /&gt;
        &lt;display value=&quot;ABBEYARD, 3737 VIC&quot; /&gt;
    &lt;/concept&gt;
</pre></div>



<a name="168568466"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Extensions%20on%20CodeSystem/near/168568466" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Extensions.20on.20CodeSystem.html#168568466">(Jun 20 2019 at 05:42)</a>:</h4>
<p>Then in the QA :<br>
<a href="/user_uploads/10155/tf_iideJ5NHFnYFadJbSt5Qo/pasted_image.png" target="_blank" title="pasted_image.png">pasted image</a></p>
<div class="message_inline_image"><a href="/user_uploads/10155/tf_iideJ5NHFnYFadJbSt5Qo/pasted_image.png" target="_blank" title="pasted image"><img src="/user_uploads/10155/tf_iideJ5NHFnYFadJbSt5Qo/pasted_image.png"></a></div>



<a name="168568488"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Extensions%20on%20CodeSystem/near/168568488" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Extensions.20on.20CodeSystem.html#168568488">(Jun 20 2019 at 05:43)</a>:</h4>
<p>The IG does render the codesystem, profile, and extensions correctly, so they are in the guide (and the others don't report any qa errors)</p>



<a name="168572176"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Extensions%20on%20CodeSystem/near/168572176" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Extensions.20on.20CodeSystem.html#168572176">(Jun 20 2019 at 07:15)</a>:</h4>
<p>you have to add <a href="http://fhir.telstrahealth.com/th-epd" target="_blank" title="http://fhir.telstrahealth.com/th-epd">http://fhir.telstrahealth.com/th-epd</a> as an allowed extension domain</p>



<a name="168572344"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Extensions%20on%20CodeSystem/near/168572344" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Extensions.20on.20CodeSystem.html#168572344">(Jun 20 2019 at 07:19)</a>:</h4>
<p>Where does that go? IG.Json?</p>



<a name="168572355"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Extensions%20on%20CodeSystem/near/168572355" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Extensions.20on.20CodeSystem.html#168572355">(Jun 20 2019 at 07:19)</a>:</h4>
<p>That is the canonical base for my whole guide.</p>



<a name="168572679"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Extensions%20on%20CodeSystem/near/168572679" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Extensions.20on.20CodeSystem.html#168572679">(Jun 20 2019 at 07:26)</a>:</h4>
<p>oh then the extension should be recognised.</p>



<a name="168572680"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Extensions%20on%20CodeSystem/near/168572680" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Extensions.20on.20CodeSystem.html#168572680">(Jun 20 2019 at 07:26)</a>:</h4>
<p>I might need to debug it</p>



<a name="168573207"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Extensions%20on%20CodeSystem/near/168573207" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Extensions.20on.20CodeSystem.html#168573207">(Jun 20 2019 at 07:36)</a>:</h4>
<p>Ok.</p>



<a name="168652567"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Extensions%20on%20CodeSystem/near/168652567" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Extensions.20on.20CodeSystem.html#168652567">(Jun 21 2019 at 03:20)</a>:</h4>
<p>I managed to get debugging this, and discovered that the csvalidator doesn't seem to be configured to resolve references from the IG Publisher - which there is a comment above a little that is used for doing InstanceValidations<br>
<a href="https://github.com/HL7/fhir-ig-publisher/blob/1ba4ad3ce5cbe06611a68bea057a60c0abde1152/org.hl7.fhir.publisher.core/src/main/java/org/hl7/fhir/igtools/publisher/Publisher.java#L1371" target="_blank" title="https://github.com/HL7/fhir-ig-publisher/blob/1ba4ad3ce5cbe06611a68bea057a60c0abde1152/org.hl7.fhir.publisher.core/src/main/java/org/hl7/fhir/igtools/publisher/Publisher.java#L1371">https://github.com/HL7/fhir-ig-publisher/blob/1ba4ad3ce5cbe06611a68bea057a60c0abde1152/org.hl7.fhir.publisher.core/src/main/java/org/hl7/fhir/igtools/publisher/Publisher.java#L1371</a><br>
And probably the same for the ProfileValidator too<br>
<span class="user-mention" data-user-id="191316">@Grahame Grieve</span> does this look right?</p>



<a name="168655209"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Extensions%20on%20CodeSystem/near/168655209" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Extensions.20on.20CodeSystem.html#168655209">(Jun 21 2019 at 04:41)</a>:</h4>
<p>you aren't getting that error from the code System validator....</p>



<a name="168819565"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Extensions%20on%20CodeSystem/near/168819565" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Extensions.20on.20CodeSystem.html#168819565">(Jun 24 2019 at 03:29)</a>:</h4>
<p>Have worked it out, any of the resource types that are loaded before StructureDefinition can't have extensions defined in the IG<br>
<a href="https://github.com/HL7/fhir-ig-publisher/blob/1ba4ad3ce5cbe06611a68bea057a60c0abde1152/org.hl7.fhir.publisher.core/src/main/java/org/hl7/fhir/igtools/publisher/Publisher.java#L2852" target="_blank" title="https://github.com/HL7/fhir-ig-publisher/blob/1ba4ad3ce5cbe06611a68bea057a60c0abde1152/org.hl7.fhir.publisher.core/src/main/java/org/hl7/fhir/igtools/publisher/Publisher.java#L2852">https://github.com/HL7/fhir-ig-publisher/blob/1ba4ad3ce5cbe06611a68bea057a60c0abde1152/org.hl7.fhir.publisher.core/src/main/java/org/hl7/fhir/igtools/publisher/Publisher.java#L2852</a><br>
As its during the load(), not the scan() that the extension resource is cached into the context so that the fetcher can find them, and hence validate correctly.<br>
To fix this I moved the StructureDefinition to the top of the load() calls in the block, alternately the scan could cache the StructureDefinitions too.</p>



<a name="168819893"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Extensions%20on%20CodeSystem/near/168819893" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Extensions.20on.20CodeSystem.html#168819893">(Jun 24 2019 at 03:36)</a>:</h4>
<p>How Does the affect the current igs ?</p>



<a name="168820662"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Extensions%20on%20CodeSystem/near/168820662" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Extensions.20on.20CodeSystem.html#168820662">(Jun 24 2019 at 04:01)</a>:</h4>
<p>You would be getting validation errors in your QA report if you were subject to the issue.<br>
My IG had extensions in the CodeSystem, so suffered.<br>
Any Extensions defined in your IG on NamingSystem, CodeSystem, ValueSet, ConceptMap or DataElement types would fail (which mine did)</p>



<a name="168838396"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Extensions%20on%20CodeSystem/near/168838396" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Extensions.20on.20CodeSystem.html#168838396">(Jun 24 2019 at 10:38)</a>:</h4>
<p>that's not such a simple fix. let me think about that. Scan is supposed to pick stuff up like that. can you make an issue report</p>



<a name="168844721"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Extensions%20on%20CodeSystem/near/168844721" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Extensions.20on.20CodeSystem.html#168844721">(Jun 24 2019 at 12:26)</a>:</h4>
<p>Sure will do.<br>
(enjoying the drive?)</p>



<a name="168845615"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Extensions%20on%20CodeSystem/near/168845615" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Extensions.20on.20CodeSystem.html#168845615">(Jun 24 2019 at 12:41)</a>:</h4>
<p>today was hard - 550km of wall to wall nothing.... just scrub. Real badlands (port Augusta --&gt; Coober Pedy)</p>



<a name="168845692"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Extensions%20on%20CodeSystem/near/168845692" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brett Esler <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Extensions.20on.20CodeSystem.html#168845692">(Jun 24 2019 at 12:42)</a>:</h4>
<p>Staying in a hole in the ground?  Childhood memories ;)</p>



<a name="168845723"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Extensions%20on%20CodeSystem/near/168845723" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lynn Laakso <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Extensions.20on.20CodeSystem.html#168845723">(Jun 24 2019 at 12:43)</a>:</h4>
<p>doing some mining?</p>



<a name="168845792"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Extensions%20on%20CodeSystem/near/168845792" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brett Esler <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Extensions.20on.20CodeSystem.html#168845792">(Jun 24 2019 at 12:44)</a>:</h4>
<p>data or opals?</p>



<a name="168847052"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Extensions%20on%20CodeSystem/near/168847052" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Extensions.20on.20CodeSystem.html#168847052">(Jun 24 2019 at 13:02)</a>:</h4>
<p>hah. we have a van, so we're staying in that. Kath is doing a tour of some holes in the ground tomorrow. I'm heading out on the oodnadatta track</p>



<a name="168893959"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Extensions%20on%20CodeSystem/near/168893959" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Extensions.20on.20CodeSystem.html#168893959">(Jun 24 2019 at 23:26)</a>:</h4>
<p>Logged <a href="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=22758" target="_blank" title="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=22758">GF#22758</a></p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
