---
layout: page
title: "FHIR Chat  · validation of orphaned resources in message Bundle · IG creation"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/index.html">IG creation</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/validation.20of.20orphaned.20resources.20in.20message.20Bundle.html">validation of orphaned resources in message Bundle</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="260757542"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/validation%20of%20orphaned%20resources%20in%20message%20Bundle/near/260757542" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Mayfield <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/validation.20of.20orphaned.20resources.20in.20message.20Bundle.html#260757542">(Nov 09 2021 at 06:04)</a>:</h4>
<p>In our tests we have an example where a resource is not referenced in a MessageHeader.focus or by any resource referenced by these resource.</p>
<p><a href="https://github.com/NHSDigital/IOPS-Validation/blob/main/Examples/fail/Bundle-prescription-order-extraMedicationRequest.json">https://github.com/NHSDigital/IOPS-Validation/blob/main/Examples/fail/Bundle-prescription-order-extraMedicationRequest.json</a></p>
<p>The resource fullUrl is urn:uuid:c7d942f2-3c1d-4d93-9ba8-ba57db83cdc0 at line <a href="https://github.com/NHSDigital/IOPS-Validation/blob/main/Examples/fail/Bundle-prescription-order-extraMedicationRequest.json#L508">https://github.com/NHSDigital/IOPS-Validation/blob/main/Examples/fail/Bundle-prescription-order-extraMedicationRequest.json#L508</a></p>
<p>I believe this used to throw up errors.</p>



<a name="260757686"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/validation%20of%20orphaned%20resources%20in%20message%20Bundle/near/260757686" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Mayfield <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/validation.20of.20orphaned.20resources.20in.20message.20Bundle.html#260757686">(Nov 09 2021 at 06:07)</a>:</h4>
<p>This is via HAPI FHIR Validation</p>



<a name="260759946"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/validation%20of%20orphaned%20resources%20in%20message%20Bundle/near/260759946" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/validation.20of.20orphaned.20resources.20in.20message.20Bundle.html#260759946">(Nov 09 2021 at 06:47)</a>:</h4>
<p>does the standalone validator say it's a problem</p>



<a name="260760045"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/validation%20of%20orphaned%20resources%20in%20message%20Bundle/near/260760045" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Mayfield <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/validation.20of.20orphaned.20resources.20in.20message.20Bundle.html#260760045">(Nov 09 2021 at 06:48)</a>:</h4>
<p>Nope, clean except for coding errors</p>



<a name="260942421"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/validation%20of%20orphaned%20resources%20in%20message%20Bundle/near/260942421" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/validation.20of.20orphaned.20resources.20in.20message.20Bundle.html#260942421">(Nov 10 2021 at 03:45)</a>:</h4>
<p>hmm, well, we should do something about the coding errors, and put UK SCT on <a href="http://tx.fhir.org">tx.fhir.org</a></p>



<a name="260943796"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/validation%20of%20orphaned%20resources%20in%20message%20Bundle/near/260943796" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/validation.20of.20orphaned.20resources.20in.20message.20Bundle.html#260943796">(Nov 10 2021 at 04:11)</a>:</h4>
<p>and it's not an error because the resource in question refers to other resources in the message - patient, etc. Just like a provenance resource would, which is why this is allowed.</p>



<a name="260944853"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/validation%20of%20orphaned%20resources%20in%20message%20Bundle/near/260944853" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/validation.20of.20orphaned.20resources.20in.20message.20Bundle.html#260944853">(Nov 10 2021 at 04:34)</a>:</h4>
<p>but it's not a resource that you'd expect to be used that way, so the next version of the validator will give this output:</p>
<div class="codehilite"><pre><span></span><code>WARNING: Bundle.entry[10]: Entry &#39;urn:uuid:c7d942f2-3c1d-4d93-9ba8-ba57db83cdc0&#39; isn&#39;t reachable by traversing forwards from first Bundle entry, and isn&#39;t a resource type that is typically used that way - check this is not missed somewhere
</code></pre></div>



<a name="260945042"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/validation%20of%20orphaned%20resources%20in%20message%20Bundle/near/260945042" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Mayfield <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/validation.20of.20orphaned.20resources.20in.20message.20Bundle.html#260945042">(Nov 10 2021 at 04:38)</a>:</h4>
<p>Great. I've reconfigured out profiles to generate errors use <code>bundled</code> so we should be left with that warning for the orphans</p>



<a name="260945444"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/validation%20of%20orphaned%20resources%20in%20message%20Bundle/near/260945444" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Mayfield <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/validation.20of.20orphaned.20resources.20in.20message.20Bundle.html#260945444">(Nov 10 2021 at 04:47)</a>:</h4>
<p>We do have a UK Onto server but it's using OAuth2. I'm working on an HAPI interceptor to get around that</p>



<a name="260945511"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/validation%20of%20orphaned%20resources%20in%20message%20Bundle/near/260945511" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Mayfield <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/validation.20of.20orphaned.20resources.20in.20message.20Bundle.html#260945511">(Nov 10 2021 at 04:48)</a>:</h4>
<p><a href="https://github.com/NHSDigital/validation-service-fhir-r4/tree/testing/src/main/kotlin/com/example/fhirvalidator/shared">https://github.com/NHSDigital/validation-service-fhir-r4/tree/testing/src/main/kotlin/com/example/fhirvalidator/shared</a></p>



<a name="260945611"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/validation%20of%20orphaned%20resources%20in%20message%20Bundle/near/260945611" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/validation.20of.20orphaned.20resources.20in.20message.20Bundle.html#260945611">(Nov 10 2021 at 04:50)</a>:</h4>
<p>I'm not sure why <a href="http://tx.fhir.org">tx.fhir.org</a> doesn't support UK SCT. I think no one has ever asked?</p>



<a name="260945621"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/validation%20of%20orphaned%20resources%20in%20message%20Bundle/near/260945621" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/validation.20of.20orphaned.20resources.20in.20message.20Bundle.html#260945621">(Nov 10 2021 at 04:51)</a>:</h4>
<p><span class="user-mention" data-user-id="191405">@Rob Hausam</span> do you have any memory of this?</p>



<a name="260946510"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/validation%20of%20orphaned%20resources%20in%20message%20Bundle/near/260946510" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/validation.20of.20orphaned.20resources.20in.20message.20Bundle.html#260946510">(Nov 10 2021 at 05:08)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> <span class="user-mention" data-user-id="191687">@Kevin Mayfield</span>  Yes, I sure do.  I've been trying for months to get the UK extension(s)/edition loaded.  As you know, I've gotten things to work now with the other extensions and have worked through issues with them, but there is still an issue with loading the UK extension(s).  When it tries to load it complains of a missing module - and I haven't yet tracked down what that module is or why it is "missing".  That's not happening with the other extensions.  But I do know that the UK module dependencies have some additional complexities that the others don't - and I expect this is part of that.  Maybe I can go ahead and look at this again now - I've definitely been wanting to get it working.</p>



<a name="260946863"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/validation%20of%20orphaned%20resources%20in%20message%20Bundle/near/260946863" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/validation.20of.20orphaned.20resources.20in.20message.20Bundle.html#260946863">(Nov 10 2021 at 05:15)</a>:</h4>
<p>ok. well, let's start working on it.</p>



<a name="260946971"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/validation%20of%20orphaned%20resources%20in%20message%20Bundle/near/260946971" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/validation.20of.20orphaned.20resources.20in.20message.20Bundle.html#260946971">(Nov 10 2021 at 05:16)</a>:</h4>
<p>Yes.  I've already started - but I'll try to finish.  I'll take another look at it now.</p>



<a name="260947172"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/validation%20of%20orphaned%20resources%20in%20message%20Bundle/near/260947172" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/validation.20of.20orphaned.20resources.20in.20message.20Bundle.html#260947172">(Nov 10 2021 at 05:20)</a>:</h4>
<p>let me know if I need to look at anything</p>



<a name="260947376"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/validation%20of%20orphaned%20resources%20in%20message%20Bundle/near/260947376" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/validation.20of.20orphaned.20resources.20in.20message.20Bundle.html#260947376">(Nov 10 2021 at 05:24)</a>:</h4>
<p>ok</p>



<a name="260951311"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/validation%20of%20orphaned%20resources%20in%20message%20Bundle/near/260951311" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Mayfield <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/validation.20of.20orphaned.20resources.20in.20message.20Bundle.html#260951311">(Nov 10 2021 at 06:41)</a>:</h4>
<p><span class="user-mention" data-user-id="191405">@Rob Hausam</span> you can probably ignore the drug extension as that's moving from SNOMED to a new CodeSystem, the UKCore profiles have already moved to this.</p>



<a name="260956956"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/validation%20of%20orphaned%20resources%20in%20message%20Bundle/near/260956956" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/validation.20of.20orphaned.20resources.20in.20message.20Bundle.html#260956956">(Nov 10 2021 at 08:11)</a>:</h4>
<p><span class="user-mention" data-user-id="191687">@Kevin Mayfield</span> Thanks.  I didn't actually know it was moving, but I was already ignoring it for this.  I've (hopefully) fixed and worked around the remaining import bugs - if so, as soon as this one finishes importing I'll get it uploaded.  And then get some sleep. :)</p>



<a name="260961809"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/validation%20of%20orphaned%20resources%20in%20message%20Bundle/near/260961809" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/validation.20of.20orphaned.20resources.20in.20message.20Bundle.html#260961809">(Nov 10 2021 at 09:07)</a>:</h4>
<p><span class="user-mention" data-user-id="191687">@Kevin Mayfield</span> <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> No luck with the UK edition quite yet.  It's failing with importing some of the refsets.  I removed the der2_cRefset_AttributeValueUKEDSnapshot_GB_20211027 refset from the import as it had trouble with one of the values (at least one).  I thought that might take care of it, but then I also ran into an issue with importing the language refset (der2_cRefset_LanguageUKEDSnapshot-en_GB_20211027) - which we can't ignore - where it contains  a row for <code>999000341000001100 |ePrescribing nebuliser liquids type 13a simple reference set (foundation metadata concept)|</code>, but there is no corresponding row in the description file so the import fails (I assume there may also be more rows with issues, but that's the one it failed on).  I need to stop on it now and will have to come back to dealing with those issues later.</p>



<a name="260966783"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/validation%20of%20orphaned%20resources%20in%20message%20Bundle/near/260966783" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bill Lush <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/validation.20of.20orphaned.20resources.20in.20message.20Bundle.html#260966783">(Nov 10 2021 at 09:53)</a>:</h4>
<p><span class="user-mention" data-user-id="191405">@Rob Hausam</span> you can probably ignore the drug extension as that's moving from SNOMED to a new CodeSystem, the UKCore profiles have already moved to this.</p>
<div class="codehilite"><pre><span></span><code>Hi All. Kevin has asked me to look at this discussion. To be clear, in the UK the standard for sharing drug information is dm+d (Dictionary of Medicines and Devices) must be used. The codes used in dm+d are SNOMED codes and the SNOMED UK Drug Extension data is created from uploading dm+d data. The UK Drug Extension data is NOT moving, it will always be there. In the perfect world the dm+d and SNOMED UK Drug Extensions would be exactly the same, but sadly they are not for a number of reasons that I won&#39;t go into here. We do plan to get them to be the same, but this will take a long time. As a Terminology Specialist I would recommend that you do NOT exclude SNOMED UK Drug Extensions from uploading SNOMED UK Edition, but it is reasonable to add the data module by module and to leave drug extensions till last. If anyone needs help with this I am happy to see if I can help.
So in summary
     * dm+d is the primary data source for drug data in the UK
     * There are some differences between dm+d and SNOMED UK Drug Extensions to flag that SNOMED UK Drug Extensions should not be used for interoperability
     * SNOMED UK Drug Extensions will always exist as part of SNOMED UK Edition and is created from dm+d data.
</code></pre></div>



<a name="261041688"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/validation%20of%20orphaned%20resources%20in%20message%20Bundle/near/261041688" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vassil Peytchev <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/validation.20of.20orphaned.20resources.20in.20message.20Bundle.html#261041688">(Nov 10 2021 at 19:28)</a>:</h4>
<p>This was really hard to read, so here it is republished for <span class="user-mention" data-user-id="191405">@Rob Hausam</span> to keep in mind:</p>
<p><span class="user-mention silent" data-user-id="195196">Bill Lush</span> <a href="#narrow/stream/179252-IG-creation/topic/validation.20of.20orphaned.20resources.20in.20message.20Bundle/near/260966783">said</a>:</p>
<blockquote>
<p>Hi All. Kevin has asked me to look at this discussion. To be clear, in the UK the standard for sharing drug information is dm+d (Dictionary of Medicines and Devices) must be used. The codes used in dm+d are SNOMED codes and the SNOMED UK Drug Extension data is created from uploading dm+d data. The UK Drug Extension data is NOT moving, it will always be there. In the perfect world the dm+d and SNOMED UK Drug Extensions would be exactly the same, but sadly they are not for a number of reasons that I won't go into here. We do plan to get them to be the same, but this will take a long time. As a Terminology Specialist I would recommend that you do NOT exclude SNOMED UK Drug Extensions from uploading SNOMED UK Edition, but it is reasonable to add the data module by module and to leave drug extensions till last. If anyone needs help with this I am happy to see if I can help.</p>
<p>So in summary </p>
<ul>
<li>dm+d is the primary data source for drug data in the UK</li>
<li>There are some differences between dm+d and SNOMED UK Drug Extensions to flag that SNOMED UK Drug Extensions should not be used for interoperability</li>
<li>SNOMED UK Drug Extensions will always exist as part of SNOMED UK Edition and is created from dm+d data.</li>
</ul>
</blockquote>



<a name="261071950"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/validation%20of%20orphaned%20resources%20in%20message%20Bundle/near/261071950" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/validation.20of.20orphaned.20resources.20in.20message.20Bundle.html#261071950">(Nov 10 2021 at 23:35)</a>:</h4>
<p>Yes, that's been my understanding.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
