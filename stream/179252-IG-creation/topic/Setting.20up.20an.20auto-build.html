---
layout: page
title: "FHIR Chat  · Setting up an auto-build · IG creation"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/index.html">IG creation</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Setting.20up.20an.20auto-build.html">Setting up an auto-build</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="208745180"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Setting%20up%20an%20auto-build/near/208745180" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Setting.20up.20an.20auto-build.html#208745180">(Sep 01 2020 at 20:39)</a>:</h4>
<p>For people doing non-HL7 IGs, I've set up a GitHub workflow to do IG auto-builds and publish to GitHub pages outside the <a href="http://build.fhir.org">build.fhir.org</a> infrastructure. It leverages the ig-publisher-base docker image. There are likely a few more tweaks I need to make, but I've documented the process <a href="https://www.argentixinfo.com/archives/156">here</a>.<br>
Thanks to <span class="user-mention" data-user-id="191315">@Josh Mandel</span> for helping me get started on this.</p>



<a name="208746081"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Setting%20up%20an%20auto-build/near/208746081" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Setting.20up.20an.20auto-build.html#208746081">(Sep 01 2020 at 20:47)</a>:</h4>
<p>why is this good?</p>



<a name="208747804"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Setting%20up%20an%20auto-build/near/208747804" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Setting.20up.20an.20auto-build.html#208747804">(Sep 01 2020 at 21:00)</a>:</h4>
<p>It shares tooling and provides automation to give people more options for working with the fhir publication infrastructure.</p>



<a name="208747886"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Setting%20up%20an%20auto-build/near/208747886" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Setting.20up.20an.20auto-build.html#208747886">(Sep 01 2020 at 21:01)</a>:</h4>
<p>for example some organizations might want to develop guides that they publish entirely internally, and it would not be fair to expect they would leverage a universally readable <a href="http://build.fhir.org">build.fhir.org</a> infrastructure.</p>



<a name="208747918"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Setting%20up%20an%20auto-build/near/208747918" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Setting.20up.20an.20auto-build.html#208747918">(Sep 01 2020 at 21:01)</a>:</h4>
<p>At the same time, it would be great to make sure they are able to leverage the existing tool chain and get the same results</p>



<a name="208748232"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Setting%20up%20an%20auto-build/near/208748232" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Setting.20up.20an.20auto-build.html#208748232">(Sep 01 2020 at 21:03)</a>:</h4>
<p>that's fair. What I can tell you is:</p>
<ul>
<li>this page <a href="https://fhir.github.io/auto-ig-builder/builds.html">https://fhir.github.io/auto-ig-builder/builds.html</a> is incredibly useful, and it would be sad for it to be missing stuff</li>
<li>there's a view amongst some (including on the HL7 side) that <a href="http://build.fhir.org">build.fhir.org</a> is only for HL7 IGs and I don't want to give that weight</li>
<li>I didn't follow the justification about IGs being removed from <a href="http://build.fhir.org">build.fhir.org</a> after 30 days - that doesn't happen, except for branches?</li>
</ul>



<a name="208751181"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Setting%20up%20an%20auto-build/near/208751181" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Setting.20up.20an.20auto-build.html#208751181">(Sep 01 2020 at 21:26)</a>:</h4>
<p>The FHIR IG auto-build is great, but:</p>
<ul>
<li>How do I get my IG off of the server after the build? I don't want to use my local build for the source of a published version--I'd prefer a controlled environment, but I don't know how to download the entire published IG from <a href="http://build.fhir.org">build.fhir.org</a>.</li>
<li>I see this as the first step toward being able to automatically publish milestone releases linked to code branches (or labels). This would give a fully automated publication system without need for manual steps.</li>
</ul>
<p>I don't know where I'd heard the 30-day deletion. I'll remove the comment if it is wrong. "Except for branches" -- does that mean builds from master are kept, but not others?</p>



<a name="208751933"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Setting%20up%20an%20auto-build/near/208751933" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Setting.20up.20an.20auto-build.html#208751933">(Sep 01 2020 at 21:34)</a>:</h4>
<p>Currently we delete branches on the main fhir build but I don't think we delete anything from implementation guides based on time elapsed. Of course we do overwrite old branch builds when new content is committed to those branches.</p>



<a name="208752165"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Setting%20up%20an%20auto-build/near/208752165" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Setting.20up.20an.20auto-build.html#208752165">(Sep 01 2020 at 21:37)</a>:</h4>
<p>well, publishing is a different thing indeed. We do a local build for publishing, and you currently need to, I agree. It seems like overkill to set up a different publishing paradigm just for that</p>



<a name="208752310"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Setting%20up%20an%20auto-build/near/208752310" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Setting.20up.20an.20auto-build.html#208752310">(Sep 01 2020 at 21:38)</a>:</h4>
<p>have you looked at the publishing process we currently use? It's quite manual, but the manual stuff is very much around QA</p>



<a name="208752603"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Setting%20up%20an%20auto-build/near/208752603" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Setting.20up.20an.20auto-build.html#208752603">(Sep 01 2020 at 21:41)</a>:</h4>
<p><span class="user-mention" data-user-id="191380">@Elliot Silver</span> thanks so much for writing this up. I learned something, or at least I have questions :-) Without mounting any directories from the host into the docker image, how do you ensure that the outputs generated in one step are available mounted into the container in the next step? There must be some magic under the hood?</p>



<a name="208752723"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Setting%20up%20an%20auto-build/near/208752723" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Setting.20up.20an.20auto-build.html#208752723">(Sep 01 2020 at 21:42)</a>:</h4>
<p>I did look at the current publication process, but (and this ties back to an earlier discussion), it wasn't easy to figure out which steps were HL7-specific, and which were necessary for anyone publishing.</p>



<a name="208752820"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Setting%20up%20an%20auto-build/near/208752820" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Setting.20up.20an.20auto-build.html#208752820">(Sep 01 2020 at 21:43)</a>:</h4>
<p><a href="https://docs.github.com/en/actions/creating-actions/dockerfile-support-for-github-actions#workdir">https://docs.github.com/en/actions/creating-actions/dockerfile-support-for-github-actions#workdir</a> is the answer to my question, I think. So it's not using the expected working directory but rather one supplied by the GitHub actions framework. Cool!</p>



<a name="208752933"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Setting%20up%20an%20auto-build/near/208752933" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Setting.20up.20an.20auto-build.html#208752933">(Sep 01 2020 at 21:44)</a>:</h4>
<p>well, perhaps we could clarify that, and more generally, the documentation needs work (as always). And there's not really a set answer - there's certain things about the way the HL7 publishes that are not necessary but are an extremely good idea. So what is HL7 specific? The only truly HL7 specific stuff is the the HL7 publishing requirements</p>



<a name="208753009"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Setting%20up%20an%20auto-build/near/208753009" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Setting.20up.20an.20auto-build.html#208753009">(Sep 01 2020 at 21:45)</a>:</h4>
<p><span class="user-mention" data-user-id="191315">@Josh Mandel</span>  Exactly, and the whole action is being run from an ubuntu image that hosts the complete process and launches the docker images from within it. The ubuntu drive persists across steps.</p>



<a name="208753203"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Setting%20up%20an%20auto-build/near/208753203" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Setting.20up.20an.20auto-build.html#208753203">(Sep 01 2020 at 21:47)</a>:</h4>
<p>I don't know which parts are HL7 specific--that was part of my problem. I suspect when I get to actually doing a milestone build, I'll have to figure that out.</p>



<a name="208753520"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Setting%20up%20an%20auto-build/near/208753520" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Setting.20up.20an.20auto-build.html#208753520">(Sep 01 2020 at 21:50)</a>:</h4>
<p>so I was thinking about this. The first problem is that you can't publish the <a href="http://build.fhir.org">build.fhir.org</a> version - it's to do with the internal identification of what is generated - it's always and specifically identified internally as the ci-build output. And when you build locally, that is also labelled internally as local. </p>
<p>There's a special parameter to generate a build intended for publication</p>



<a name="208754102"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Setting%20up%20an%20auto-build/near/208754102" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Setting.20up.20an.20auto-build.html#208754102">(Sep 01 2020 at 21:56)</a>:</h4>
<p>Perhaps a useful analogy here is a system offered by Docker Hub called a "trusted build" -- the idea is that instead of uploading your own images to Docker hub, you can ask Docker hub to watch your GitHub repository and build an image automatically following your own script anytime the content changes. This helps your users trust that the images you publish don't have random extra stuff hidden in them.</p>



<a name="208754122"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Setting%20up%20an%20auto-build/near/208754122" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Setting.20up.20an.20auto-build.html#208754122">(Sep 01 2020 at 21:56)</a>:</h4>
<p>Ideally any fhir publication would be created automatically from a repository anytime certain tags were applied.</p>



<a name="208754134"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Setting%20up%20an%20auto-build/near/208754134" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Setting.20up.20an.20auto-build.html#208754134">(Sep 01 2020 at 21:56)</a>:</h4>
<p>Assuming of course the various kinds of checks have passed.</p>



<a name="208754160"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Setting%20up%20an%20auto-build/near/208754160" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Setting.20up.20an.20auto-build.html#208754160">(Sep 01 2020 at 21:57)</a>:</h4>
<p>That way has an author you can declaratively state that it's time for a commit to be picked up as a publication, simply by playing a tag .</p>



<a name="208754182"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Setting%20up%20an%20auto-build/near/208754182" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Setting.20up.20an.20auto-build.html#208754182">(Sep 01 2020 at 21:57)</a>:</h4>
<p>I recognize that's probably a ton of complexity that will make this impractical for hl7, but at least we can start to match things in that direction...</p>



<a name="208754269"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Setting%20up%20an%20auto-build/near/208754269" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Setting.20up.20an.20auto-build.html#208754269">(Sep 01 2020 at 21:58)</a>:</h4>
<p>well, we could. The auto-ig-build could add the requisite parameters under the right conditions, and then it could provide for a zip of the output to be downloaded.</p>



<a name="208754302"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Setting%20up%20an%20auto-build/near/208754302" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Setting.20up.20an.20auto-build.html#208754302">(Sep 01 2020 at 21:58)</a>:</h4>
<p>but I don't exactly follow the tag thing, and how it inter-relates with the PR process</p>



<a name="208754369"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Setting%20up%20an%20auto-build/near/208754369" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Setting.20up.20an.20auto-build.html#208754369">(Sep 01 2020 at 21:59)</a>:</h4>
<p>but we could make that change and remove the need for a local build from our publishing process</p>



<a name="208754463"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Setting%20up%20an%20auto-build/near/208754463" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Setting.20up.20an.20auto-build.html#208754463">(Sep 01 2020 at 22:00)</a>:</h4>
<p>I think it's a distinct thing from the pull request process -- a tag can be applied to any commit on a branch. Then various systems that listen for changes can look for new tags. So you can embed some semantics in these tags and have new tags like <code>v1.2.3</code> trigger certain actions, like a build and test suite run and publication to npm registry...</p>



<a name="208754502"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Setting%20up%20an%20auto-build/near/208754502" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Setting.20up.20an.20auto-build.html#208754502">(Sep 01 2020 at 22:01)</a>:</h4>
<p>I think Josh means that if I label a build with "2020Sep" it would recognize it as a milestone build.</p>



<a name="208754548"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Setting%20up%20an%20auto-build/near/208754548" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Setting.20up.20an.20auto-build.html#208754548">(Sep 01 2020 at 22:01)</a>:</h4>
<p>so if a commit makes it into 2 different PRs, which PR is the actual right one?</p>



<a name="208754629"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Setting%20up%20an%20auto-build/near/208754629" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Setting.20up.20an.20auto-build.html#208754629">(Sep 01 2020 at 22:02)</a>:</h4>
<p>or if you build off master, because a tag is present, when does it stop being present?</p>



<a name="208754635"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Setting%20up%20an%20auto-build/near/208754635" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Setting.20up.20an.20auto-build.html#208754635">(Sep 01 2020 at 22:02)</a>:</h4>
<p>The PR is the update of the content. The labelling is the trigger for a publication build.</p>



<a name="208754737"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Setting%20up%20an%20auto-build/near/208754737" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Setting.20up.20an.20auto-build.html#208754737">(Sep 01 2020 at 22:03)</a>:</h4>
<p>I suspect you'd want to branch off main for each milestone so that you can do later technical corrections.</p>



<a name="208754897"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Setting%20up%20an%20auto-build/near/208754897" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Setting.20up.20an.20auto-build.html#208754897">(Sep 01 2020 at 22:05)</a>:</h4>
<p>so a branch for the publication, and the branch carries the tag? That's something I can understand</p>



<a name="208755025"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Setting%20up%20an%20auto-build/near/208755025" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Setting.20up.20an.20auto-build.html#208755025">(Sep 01 2020 at 22:06)</a>:</h4>
<p>Yes that is correct. The branch might eventually advance past the tag; the tag is immutable.</p>



<a name="208755048"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Setting%20up%20an%20auto-build/near/208755048" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Setting.20up.20an.20auto-build.html#208755048">(Sep 01 2020 at 22:06)</a>:</h4>
<p>That's why I say that technically the tag is attached to a commit rather than to a branch.</p>



<a name="208755189"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Setting%20up%20an%20auto-build/near/208755189" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Setting.20up.20an.20auto-build.html#208755189">(Sep 01 2020 at 22:08)</a>:</h4>
<p>Fundamentally in git, tags and branches are both just ways to label a specific commit; but tags are best understood as immutable, whereas branches are typically advanced along to the newest commit in a particular line of work.</p>



<a name="208755369"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Setting%20up%20an%20auto-build/near/208755369" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Setting.20up.20an.20auto-build.html#208755369">(Sep 01 2020 at 22:10)</a>:</h4>
<p>clearly my understanding of git is deficient. If you tag master, how is that evident to someone who is attached to master?</p>



<a name="208755469"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Setting%20up%20an%20auto-build/near/208755469" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Setting.20up.20an.20auto-build.html#208755469">(Sep 01 2020 at 22:11)</a>:</h4>
<p>because I don't see how you 'tag a commit'.</p>



<a name="208755563"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Setting%20up%20an%20auto-build/near/208755563" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Setting.20up.20an.20auto-build.html#208755563">(Sep 01 2020 at 22:12)</a>:</h4>
<p>They are listed on the same pulldown as the branches.<br>
<a href="/user_uploads/10155/T8liTQfGi98MIjYqVISb5IH5/Screen-Shot-2020-09-01-at-3.11.40-PM.png">Screen-Shot-2020-09-01-at-3.11.40-PM.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/10155/T8liTQfGi98MIjYqVISb5IH5/Screen-Shot-2020-09-01-at-3.11.40-PM.png" title="Screen-Shot-2020-09-01-at-3.11.40-PM.png"><img src="/user_uploads/10155/T8liTQfGi98MIjYqVISb5IH5/Screen-Shot-2020-09-01-at-3.11.40-PM.png"></a></div>



<a name="208755627"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Setting%20up%20an%20auto-build/near/208755627" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Setting.20up.20an.20auto-build.html#208755627">(Sep 01 2020 at 22:12)</a>:</h4>
<p>Right. I had thought they were pretty much the same as branches.</p>



<a name="208755699"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Setting%20up%20an%20auto-build/near/208755699" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Setting.20up.20an.20auto-build.html#208755699">(Sep 01 2020 at 22:13)</a>:</h4>
<p>And at the top right of that image, obscured by some floating text, is how you create a tag.</p>



<a name="208755862"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Setting%20up%20an%20auto-build/near/208755862" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Setting.20up.20an.20auto-build.html#208755862">(Sep 01 2020 at 22:15)</a>:</h4>
<p>so you actually tag a particular version... Josh, does that prompt a build through the ci-build?</p>



<a name="208756855"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Setting%20up%20an%20auto-build/near/208756855" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Setting.20up.20an.20auto-build.html#208756855">(Sep 01 2020 at 22:25)</a>:</h4>
<p>Definitely maybe. <br>
I think the standard way of setting up the auto-build webhook is to only kick it off on a push, but there is an option to set the webhook to kick off on a label action too. The payload that is sent with the webhook probably has enough content to be able to identify what the trigger was (and what the label is).</p>



<a name="208756945"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Setting%20up%20an%20auto-build/near/208756945" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Setting.20up.20an.20auto-build.html#208756945">(Sep 01 2020 at 22:26)</a>:</h4>
<p>Currently the CI build infrastructure pays no attention to tags. But of course it could, if we want to adopt some conventions around publication. Right now the CI infrastructure is all about preview</p>



<a name="208757138"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Setting%20up%20an%20auto-build/near/208757138" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Setting.20up.20an.20auto-build.html#208757138">(Sep 01 2020 at 22:28)</a>:</h4>
<p>if it would build on a tag, and provide the tag to the IG publisher (<code>-tag v3.1.1</code>), then I could do things differently and generate as if it's a real publication. And then, if the ci-build provides a way to download a .zip, I would rewrite the process to use that zip)</p>



<a name="208757178"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Setting%20up%20an%20auto-build/near/208757178" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Setting.20up.20an.20auto-build.html#208757178">(Sep 01 2020 at 22:29)</a>:</h4>
<p>Cool. These seem like ideas worth pursuing.</p>



<a name="208757266"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Setting%20up%20an%20auto-build/near/208757266" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Setting.20up.20an.20auto-build.html#208757266">(Sep 01 2020 at 22:30)</a>:</h4>
<p>note, though that this brings me to a different problem - there's a set of QA requirements for <em>publication</em> that are not imposed for regular builds, and we typically have to do a round of editing to finish those issues off. And as I understand this workflow, tagging is not a proposal to start that workflow, but a declaration it's finished. So I'm nervous about sorting that workflow out</p>



<a name="208757317"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Setting%20up%20an%20auto-build/near/208757317" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Setting.20up.20an.20auto-build.html#208757317">(Sep 01 2020 at 22:30)</a>:</h4>
<p>at least I can probably fail the build if they're not met and the tag is passed to the IG publisher.</p>



<a name="208757753"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Setting%20up%20an%20auto-build/near/208757753" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Setting.20up.20an.20auto-build.html#208757753">(Sep 01 2020 at 22:35)</a>:</h4>
<p>Definitely seems like ideas worth pursuing.<br>
I wonder if there is a better way than a zip (or at least a way for the process to get notification of the availability of the zip), so that the content can be auto published to a website?</p>
<p>I've seen various QA tasks, like security analysis, included in workflows. If the workflow fails, publication fails. You could also set up publication to require the presence of a particular file or similar that flags that the review has been done.</p>



<a name="208757895"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Setting%20up%20an%20auto-build/near/208757895" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Setting.20up.20an.20auto-build.html#208757895">(Sep 01 2020 at 22:37)</a>:</h4>
<p>I don't know what happens if you label a commit as "R6" but then decide that the commit has errors. I suspect you want to do all the touch-up etc. and validate before doing the label.</p>



<a name="208758331"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Setting%20up%20an%20auto-build/near/208758331" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Setting.20up.20an.20auto-build.html#208758331">(Sep 01 2020 at 22:42)</a>:</h4>
<blockquote>
<p>so that the content can be auto published to a website</p>
</blockquote>
<p>Let's get to that later. It's a big step for me given how much work we have to do around getting things right for publication</p>



<a name="208758387"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Setting%20up%20an%20auto-build/near/208758387" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Setting.20up.20an.20auto-build.html#208758387">(Sep 01 2020 at 22:43)</a>:</h4>
<p>very few editors at all understand package-list.json, for instance. but that's critical to the actual publishing process</p>



<a name="209441256"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Setting%20up%20an%20auto-build/near/209441256" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Setting.20up.20an.20auto-build.html#209441256">(Sep 08 2020 at 20:39)</a>:</h4>
<p>so <span class="user-mention" data-user-id="191315">@Josh Mandel</span> and <span class="user-mention" data-user-id="191380">@Elliot Silver</span> I just talked to <span class="user-mention" data-user-id="248736">@Mark Iantorno</span> about this, who runs the build pipelines for all the java code and will eventually take over all the build processes for the FHIR stuff.</p>
<p>We don't think that a tag based process works for this; the problem is that fundamentally you're taking an action ("check and publish this version"), and the tag is the outcome ("we just published this version"). So we think that the right way to set this up is to create a pipeline in (e.g.) azure that runs the checks and executes the publishing, and that tags the release as part of the process.</p>



<a name="209443220"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Setting%20up%20an%20auto-build/near/209443220" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Setting.20up.20an.20auto-build.html#209443220">(Sep 08 2020 at 20:56)</a>:</h4>
<p>OK. I don't know enough of the details of doing automated deployments to know how others handle this. It <em>seems</em> like it should be possible, but I'll defer to you and Mark.</p>



<a name="209456292"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Setting%20up%20an%20auto-build/near/209456292" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Setting.20up.20an.20auto-build.html#209456292">(Sep 08 2020 at 23:27)</a>:</h4>
<p>Sure, either of these is good, and if you get your tag semantics right they're not exclusive. For example, you might have a tag meaning "this is a candidate for 1.2 publication" and the pipeline can pick it up, run checks, publish, and apply a tag meaning "this is memorialized as version 1.2"</p>



<a name="209467674"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Setting%20up%20an%20auto-build/near/209467674" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Setting.20up.20an.20auto-build.html#209467674">(Sep 09 2020 at 03:11)</a>:</h4>
<p><span class="user-mention" data-user-id="191315">@Josh Mandel</span> I'm still running the webhook in parallel with my action. My action is triggered by a commit on the master branch, and ends up committing the generated IG on the gh-pages branch. The webhook build seems to watch for a commit on any branch, and is thus doing a build on master and a build on gh-pages for every commit. The build on gh-pages will obviously fail, since the content isn't IG source. Is it possible to get the webhook auto-build to abort if, for example, there is a "no-autobuild" file in the branch root directory?</p>



<a name="209467733"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Setting%20up%20an%20auto-build/near/209467733" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Setting.20up.20an.20auto-build.html#209467733">(Sep 09 2020 at 03:13)</a>:</h4>
<p>I assume your desired behavior is to only build the master branch, and not other random branches that would overwrite the master branch content?</p>



<a name="209467811"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Setting%20up%20an%20auto-build/near/209467811" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Setting.20up.20an.20auto-build.html#209467811">(Sep 09 2020 at 03:14)</a>:</h4>
<p><a href="https://docs.github.com/en/actions/reference/workflow-syntax-for-github-actions#onpushpull_requestbranchestags">https://docs.github.com/en/actions/reference/workflow-syntax-for-github-actions#onpushpull_requestbranchestags</a> shows how you can specify one or more branches explicitly; just leave the GitHub pages Branch out of this list</p>



<a name="209467818"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Setting%20up%20an%20auto-build/near/209467818" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Setting.20up.20an.20auto-build.html#209467818">(Sep 09 2020 at 03:15)</a>:</h4>
<p>Well, "only build the master branch" is equivalent in my project to "not build the gh-pages branch" since I only have two branches. I'm not so worried about overwriting the content, as I am ...</p>



<a name="209467829"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Setting%20up%20an%20auto-build/near/209467829" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Setting.20up.20an.20auto-build.html#209467829">(Sep 09 2020 at 03:15)</a>:</h4>
<p>... about triggering an auto-build with known content that will fail.</p>



<a name="209467832"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Setting%20up%20an%20auto-build/near/209467832" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Setting.20up.20an.20auto-build.html#209467832">(Sep 09 2020 at 03:15)</a>:</h4>
<p>Fair enough. You can have a policy of defaulting to "always build" and skipping the pages branch or default to "never build" and only building if it's master</p>



<a name="209467878"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Setting%20up%20an%20auto-build/near/209467878" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Setting.20up.20an.20auto-build.html#209467878">(Sep 09 2020 at 03:16)</a>:</h4>
<p>That link is for a workflow actions I'm authoring. I can deal with that.</p>



<a name="209467893"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Setting%20up%20an%20auto-build/near/209467893" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Setting.20up.20an.20auto-build.html#209467893">(Sep 09 2020 at 03:17)</a>:</h4>
<p>It's the webhook that calls <a href="https://us-central1-fhir-org-starter-project.cloudfunctions.net/ig-commit-trigger">https://us-central1-fhir-org-starter-project.cloudfunctions.net/ig-commit-trigger</a> that I have no control over.</p>



<a name="209467912"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Setting%20up%20an%20auto-build/near/209467912" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Setting.20up.20an.20auto-build.html#209467912">(Sep 09 2020 at 03:17)</a>:</h4>
<p>Ohh, I understand what you're talking about now. You don't want to have the centralized Auto builder try to build your gh-pages branch.</p>



<a name="209467980"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Setting%20up%20an%20auto-build/near/209467980" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Setting.20up.20an.20auto-build.html#209467980">(Sep 09 2020 at 03:18)</a>:</h4>
<p>Exactly.</p>



<a name="209467983"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Setting%20up%20an%20auto-build/near/209467983" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Setting.20up.20an.20auto-build.html#209467983">(Sep 09 2020 at 03:18)</a>:</h4>
<p>Hopefully this is not causing you any actual problems, but I agree it would be nice to provide some way to opt out.</p>



<a name="209468008"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Setting%20up%20an%20auto-build/near/209468008" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Setting.20up.20an.20auto-build.html#209468008">(Sep 09 2020 at 03:19)</a>:</h4>
<p>in general you wouldn't to build the gh-pages branch but I think people starting out would find simply being ignored because their configuration is wrong deeply disorientating</p>



<a name="209468012"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Setting%20up%20an%20auto-build/near/209468012" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Setting.20up.20an.20auto-build.html#209468012">(Sep 09 2020 at 03:19)</a>:</h4>
<p>No, not causing problems. Just an extra failed notification in committers/notification.</p>



<a name="209468078"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Setting%20up%20an%20auto-build/near/209468078" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Setting.20up.20an.20auto-build.html#209468078">(Sep 09 2020 at 03:20)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> agree, which is why I suggested the explicit act of adding a file to the root directory a branch you didn't want built.</p>



<a name="209468096"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Setting%20up%20an%20auto-build/near/209468096" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Setting.20up.20an.20auto-build.html#209468096">(Sep 09 2020 at 03:21)</a>:</h4>
<p>Cool. If you're feeling adventurous, the place to add logic is at <a href="https://github.com/FHIR/auto-ig-builder/blob/master/images/ig-build/builder/builder.py#L39">https://github.com/FHIR/auto-ig-builder/blob/master/images/ig-build/builder/builder.py#L39</a> -- otherwise if you don't mind creating an issue on the repository to track this, that would be lovely.</p>



<a name="209468152"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Setting%20up%20an%20auto-build/near/209468152" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Setting.20up.20an.20auto-build.html#209468152">(Sep 09 2020 at 03:22)</a>:</h4>
<p>Thanks. Let me take a look.</p>



<a name="209468153"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Setting%20up%20an%20auto-build/near/209468153" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Setting.20up.20an.20auto-build.html#209468153">(Sep 09 2020 at 03:22)</a>:</h4>
<p>I might just do an explicit filter to test for the GitHub pages Branch rather than a special "no build" file, to start.</p>



<a name="210119178"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Setting%20up%20an%20auto-build/near/210119178" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Setting.20up.20an.20auto-build.html#210119178">(Sep 15 2020 at 11:59)</a>:</h4>
<p>I'm late picking this up too, I have 3 internal projects setup now with CI through publishing in Azure using docker images for build and some custom release actions.<br>
In my case each official release ends up with the output in git too under a versions folder.<br>
The release prep step runs through all builds and updates the links based on package-list.json I assume like the hl7 ones do.</p>



<a name="210119288"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Setting%20up%20an%20auto-build/near/210119288" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Setting.20up.20an.20auto-build.html#210119288">(Sep 15 2020 at 12:00)</a>:</h4>
<p>To get the output from the docker image, I mount a folder into it for both the package cache and output folder.</p>



<a name="210119320"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Setting%20up%20an%20auto-build/near/210119320" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Setting.20up.20an.20auto-build.html#210119320">(Sep 15 2020 at 12:01)</a>:</h4>
<p>I should write this up on my public blog too.</p>



<a name="210119503"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Setting%20up%20an%20auto-build/near/210119503" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Setting.20up.20an.20auto-build.html#210119503">(Sep 15 2020 at 12:03)</a>:</h4>
<p>This is one of the guides produced by it. <br>
<a href="https://fhir.medicationknowledge.com.au/">https://fhir.medicationknowledge.com.au/</a></p>



<a name="210268872"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Setting%20up%20an%20auto-build/near/210268872" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Saul Kravitz <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Setting.20up.20an.20auto-build.html#210268872">(Sep 16 2020 at 14:24)</a>:</h4>
<p><span class="user-mention" data-user-id="191380">@Elliot Silver</span>  Two questions:<br>
1) Is the docker approach faster than the alternative of installing jekyl and downloading the ig publisher jar on each invocation?<br>
2) Does your recipe build all branches (similar to the HL7 build system), which I've found to be very useful.</p>



<a name="210461426"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Setting%20up%20an%20auto-build/near/210461426" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Setting.20up.20an.20auto-build.html#210461426">(Sep 17 2020 at 22:56)</a>:</h4>
<p><span class="user-mention" data-user-id="215604">@Saul Kravitz</span> Sorry for the delay responding.</p>
<ol>
<li>My Docker approach uses the image Josh has prepared, which already has jekyl in it, and it downloads the IG publisher each time it is run. I think it is slower than the HL7 auto-build, which I believe stays alive between invocations.</li>
<li>The action I wrote only looks for commits to the master branch, but could easily be extended for any branch, with the caveat that the output of the build is committed to the gh-pages branch, so you don't want changes to that branch to trigger build.</li>
</ol>



<a name="210474242"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Setting%20up%20an%20auto-build/near/210474242" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Setting.20up.20an.20auto-build.html#210474242">(Sep 18 2020 at 02:50)</a>:</h4>
<blockquote>
<p>I think it is slower than the HL7 auto-build, which I believe stays alive between invocations.</p>
</blockquote>
<p>Nope -- they're both based on docker containers that spin up just-in-time. Both download the publisher jar every time, too.</p>



<a name="210474253"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Setting%20up%20an%20auto-build/near/210474253" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Setting.20up.20an.20auto-build.html#210474253">(Sep 18 2020 at 02:51)</a>:</h4>
<p>(The auto-build version <em>is</em> on a much beefier VM than Github Actions offers by default, so it probably does run faster...)</p>



<a name="210474278"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Setting%20up%20an%20auto-build/near/210474278" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Setting.20up.20an.20auto-build.html#210474278">(Sep 18 2020 at 02:51)</a>:</h4>
<blockquote>
<p>output of the build is committed to the gh-pages branch,</p>
</blockquote>
<p>It might be a neat enhancement to make branch builds get committed to subdirectories of the <code>gh-pages</code> build, to preserve content.</p>



<a name="210556353"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Setting%20up%20an%20auto-build/near/210556353" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Setting.20up.20an.20auto-build.html#210556353">(Sep 18 2020 at 18:13)</a>:</h4>
<blockquote>
<p>It might be a neat enhancement to make branch builds get committed to subdirectories of the <code>gh-pages</code> build, to preserve content.</p>
</blockquote>
<p>Agree. However the action I'm leveraging doesn't support that right now. There is an existing Github (issue)[https://github.com/peaceiris/actions-gh-pages/issues/455] for it, and I've added our use case, but I don't know what sort of development schedule they are on.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
