---
layout: page
title: "FHIR Chat  · Broken links on publisher-generated narrative · IG creation"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/index.html">IG creation</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Broken.20links.20on.20publisher-generated.20narrative.html">Broken links on publisher-generated narrative</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="245512459"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Broken%20links%20on%20publisher-generated%20narrative/near/245512459" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Broken.20links.20on.20publisher-generated.20narrative.html#245512459">(Jul 09 2021 at 22:19)</a>:</h4>
<p>I'm getting a set of broken links on the publisher-generated narrative.  It's adding boilerplate narrative which includes a faulty link in the modifierExtension element.  "This promotes interoperability by eliminating the need for implementers to prohibit the presence of extensions. For further information, see the definition of modifier extensions."  The "definition of modifier extensions" is a relative link to extensibility.html when it should be an absolute link back to the FHIR specification.</p>
<p><a href="http://build.fhir.org/ig/HL7/davinci-pas/branches/master/qa.html">http://build.fhir.org/ig/HL7/davinci-pas/branches/master/qa.html</a></p>



<a name="250678792"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Broken%20links%20on%20publisher-generated%20narrative/near/250678792" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Broken.20links.20on.20publisher-generated.20narrative.html#250678792">(Aug 25 2021 at 20:36)</a>:</h4>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> Here is the repository: <a href="https://github.com/HL7/davinci-pas/">https://github.com/HL7/davinci-pas/</a>. I @d both of you in case this is a template or a publisher bug.  In either case, I need a fix or a confirmation that this is a tooling issue.</p>



<a name="250679817"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Broken%20links%20on%20publisher-generated%20narrative/near/250679817" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Broken.20links.20on.20publisher-generated.20narrative.html#250679817">(Aug 25 2021 at 20:44)</a>:</h4>
<p>I'm also getting the following error: </p>
<div class="codehilite"><pre><span></span><code>The generated snapshot has a different number of elements 271 than the originally provided snapshot 273
</code></pre></div>
<p>This is on my Claim profile json.  The weird thing is that the input and the output look exactly the same, except for the generated narrative.</p>



<a name="250680195"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Broken%20links%20on%20publisher-generated%20narrative/near/250680195" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Broken.20links.20on.20publisher-generated.20narrative.html#250680195">(Aug 25 2021 at 20:48)</a>:</h4>
<p>Why do you have a snapshot on your input at all?</p>



<a name="250680817"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Broken%20links%20on%20publisher-generated%20narrative/near/250680817" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Broken.20links.20on.20publisher-generated.20narrative.html#250680817">(Aug 25 2021 at 20:53)</a>:</h4>
<p>tl;dr - i took the output profile and made it my input<br>
There is a bug either in SUSHI or in the publisher such that my FSH file can't be used to generate the profile.  The generated differential causes a NPE in the IG publisher code.  I had to use the generated profile that includes the snapshot.</p>



<a name="250681208"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Broken%20links%20on%20publisher-generated%20narrative/near/250681208" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Broken.20links.20on.20publisher-generated.20narrative.html#250681208">(Aug 25 2021 at 20:56)</a>:</h4>
<p><a href="#narrow/stream/179252-IG-creation/topic/Slice.20Criteria.20Validation.20failing">https://chat.fhir.org/#narrow/stream/179252-IG-creation/topic/Slice.20Criteria.20Validation.20failing</a></p>



<a name="250681854"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Broken%20links%20on%20publisher-generated%20narrative/near/250681854" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Broken.20links.20on.20publisher-generated.20narrative.html#250681854">(Aug 25 2021 at 21:00)</a>:</h4>
<p>for SUSHI, I can't have a profile that doesn't include a snapshot.</p>



<a name="250682568"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Broken%20links%20on%20publisher-generated%20narrative/near/250682568" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Broken.20links.20on.20publisher-generated.20narrative.html#250682568">(Aug 25 2021 at 21:05)</a>:</h4>
<p>this I totally don't understand:</p>
<blockquote>
<p>for SUSHI, I can't have a profile that doesn't include a snapshot.</p>
</blockquote>



<a name="250682610"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Broken%20links%20on%20publisher-generated%20narrative/near/250682610" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Broken.20links.20on.20publisher-generated.20narrative.html#250682610">(Aug 25 2021 at 21:05)</a>:</h4>
<p>which source file are we talking about?</p>



<a name="250683380"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Broken%20links%20on%20publisher-generated%20narrative/near/250683380" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Broken.20links.20on.20publisher-generated.20narrative.html#250683380">(Aug 25 2021 at 21:10)</a>:</h4>
<p><a href="https://github.com/HL7/davinci-pas/blob/master/input/resources/StructureDefinition-profile-claim.json">https://github.com/HL7/davinci-pas/blob/master/input/resources/StructureDefinition-profile-claim.json</a></p>



<a name="250683415"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Broken%20links%20on%20publisher-generated%20narrative/near/250683415" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Broken.20links.20on.20publisher-generated.20narrative.html#250683415">(Aug 25 2021 at 21:11)</a>:</h4>
<p>Because I'm deriving profiles off of that Claim profile, SUSHI needs a snapshot.</p>



<a name="250688173"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Broken%20links%20on%20publisher-generated%20narrative/near/250688173" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Broken.20links.20on.20publisher-generated.20narrative.html#250688173">(Aug 25 2021 at 21:52)</a>:</h4>
<p>I can't reproduce this:</p>
<blockquote>
<p>The generated snapshot has a different number of elements 271 than the originally provided snapshot 273</p>
</blockquote>



<a name="250688182"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Broken%20links%20on%20publisher-generated%20narrative/near/250688182" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Broken.20links.20on.20publisher-generated.20narrative.html#250688182">(Aug 25 2021 at 21:52)</a>:</h4>
<p>is it in a branch?</p>



<a name="250689597"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Broken%20links%20on%20publisher-generated%20narrative/near/250689597" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Broken.20links.20on.20publisher-generated.20narrative.html#250689597">(Aug 25 2021 at 22:06)</a>:</h4>
<p>but the broken links are because the snpashot was generated improperly. I don't know where you get it from</p>



<a name="250689860"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Broken%20links%20on%20publisher-generated%20narrative/near/250689860" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Broken.20links.20on.20publisher-generated.20narrative.html#250689860">(Aug 25 2021 at 22:09)</a>:</h4>
<p>i reverted the master branch to have the JSON structure definitions so you can reproduce it.  To get the snapshots, I took one that had a differential, removed my links to that profile, and then took the output of the publisher and used that as my input</p>



<a name="250689950"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Broken%20links%20on%20publisher-generated%20narrative/near/250689950" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Broken.20links.20on.20publisher-generated.20narrative.html#250689950">(Aug 25 2021 at 22:10)</a>:</h4>
<p>when the snapshot is generated. relative references must be updated to absolute references. That hasn't been done in that snapshot.</p>



<a name="250689954"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Broken%20links%20on%20publisher-generated%20narrative/near/250689954" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Broken.20links.20on.20publisher-generated.20narrative.html#250689954">(Aug 25 2021 at 22:10)</a>:</h4>
<p>so the master branch has the profiles as structure definitions and the claim-json branch has the profiles as FSH files (and that gets the NPE I've reported elsewhere)</p>



<a name="250689975"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Broken%20links%20on%20publisher-generated%20narrative/near/250689975" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Broken.20links.20on.20publisher-generated.20narrative.html#250689975">(Aug 25 2021 at 22:10)</a>:</h4>
<p>This is the corrected profile: <a href="/user_uploads/10155/oPHM3UtL8BwC1e7ynQcTJCAS/StructureDefinition-profile-claim.json">StructureDefinition-profile-claim.json</a></p>



<a name="250690202"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Broken%20links%20on%20publisher-generated%20narrative/near/250690202" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Broken.20links.20on.20publisher-generated.20narrative.html#250690202">(Aug 25 2021 at 22:12)</a>:</h4>
<p>hmm, my claim-inquiry had the absolute references.</p>



<a name="250690208"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Broken%20links%20on%20publisher-generated%20narrative/near/250690208" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Broken.20links.20on.20publisher-generated.20narrative.html#250690208">(Aug 25 2021 at 22:12)</a>:</h4>
<p>thanks</p>



<a name="250690310"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Broken%20links%20on%20publisher-generated%20narrative/near/250690310" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Broken.20links.20on.20publisher-generated.20narrative.html#250690310">(Aug 25 2021 at 22:13)</a>:</h4>
<p>so, I can build master right now. I should be able to ?</p>



<a name="250690381"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Broken%20links%20on%20publisher-generated%20narrative/near/250690381" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Broken.20links.20on.20publisher-generated.20narrative.html#250690381">(Aug 25 2021 at 22:14)</a>:</h4>
<p>master should build but have the error and broken links</p>



<a name="250691280"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Broken%20links%20on%20publisher-generated%20narrative/near/250691280" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Broken.20links.20on.20publisher-generated.20narrative.html#250691280">(Aug 25 2021 at 22:22)</a>:</h4>
<p>when I build it with the profile you gave me, the broken links go away but the "The generated snapshot has a different number of elements 271 than the originally provided snapshot 273" error is still there.</p>



<a name="250691979"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Broken%20links%20on%20publisher-generated%20narrative/near/250691979" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Broken.20links.20on.20publisher-generated.20narrative.html#250691979">(Aug 25 2021 at 22:29)</a>:</h4>
<blockquote>
<p>why don't you just use the output from the published specification?</p>
</blockquote>
<p>I tried to do that.  I tried to get a published version of the profiles with my changes in them.</p>



<a name="250692014"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Broken%20links%20on%20publisher-generated%20narrative/near/250692014" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Broken.20links.20on.20publisher-generated.20narrative.html#250692014">(Aug 25 2021 at 22:29)</a>:</h4>
<p>... and?</p>



<a name="250692040"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Broken%20links%20on%20publisher-generated%20narrative/near/250692040" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Broken.20links.20on.20publisher-generated.20narrative.html#250692040">(Aug 25 2021 at 22:29)</a>:</h4>
<p>I ended up with what you saw :)</p>



<a name="250692097"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Broken%20links%20on%20publisher-generated%20narrative/near/250692097" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Broken.20links.20on.20publisher-generated.20narrative.html#250692097">(Aug 25 2021 at 22:30)</a>:</h4>
<p>well, try again, grab it from /output</p>



<a name="250692150"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Broken%20links%20on%20publisher-generated%20narrative/near/250692150" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Broken.20links.20on.20publisher-generated.20narrative.html#250692150">(Aug 25 2021 at 22:30)</a>:</h4>
<p>I did that.  I grab the /output and put it in input/resources and I still get that error.  If I diff what I have in input/resources against output, it's the same except for the narrative.</p>



<a name="250692161"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Broken%20links%20on%20publisher-generated%20narrative/near/250692161" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Broken.20links.20on.20publisher-generated.20narrative.html#250692161">(Aug 25 2021 at 22:31)</a>:</h4>
<p>(my input resources don't have the narrative)</p>



<a name="250695875"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Broken%20links%20on%20publisher-generated%20narrative/near/250695875" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Broken.20links.20on.20publisher-generated.20narrative.html#250695875">(Aug 25 2021 at 23:10)</a>:</h4>
<p>ah</p>



<a name="250695881"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Broken%20links%20on%20publisher-generated%20narrative/near/250695881" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Broken.20links.20on.20publisher-generated.20narrative.html#250695881">(Aug 25 2021 at 23:10)</a>:</h4>
<p>I see what's happening</p>



<a name="250696117"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Broken%20links%20on%20publisher-generated%20narrative/near/250696117" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Broken.20links.20on.20publisher-generated.20narrative.html#250696117">(Aug 25 2021 at 23:13)</a>:</h4>
<p>you have to fix it up</p>



<a name="250696387"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Broken%20links%20on%20publisher-generated%20narrative/near/250696387" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Broken.20links.20on.20publisher-generated.20narrative.html#250696387">(Aug 25 2021 at 23:16)</a>:</h4>
<p>but of course, you don't know how to</p>



<a name="250698439"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Broken%20links%20on%20publisher-generated%20narrative/near/250698439" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Broken.20links.20on.20publisher-generated.20narrative.html#250698439">(Aug 25 2021 at 23:41)</a>:</h4>
<p>no, you can't fix it. Something weird here. Please explain why you have this profile. It's part of the IG but it's not?</p>



<a name="250707704"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Broken%20links%20on%20publisher-generated%20narrative/near/250707704" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Broken.20links.20on.20publisher-generated.20narrative.html#250707704">(Aug 26 2021 at 01:36)</a>:</h4>
<p>in the future, if you really need to do this, generate the snapshot using the validator</p>



<a name="250707802"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Broken%20links%20on%20publisher-generated%20narrative/near/250707802" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Broken.20links.20on.20publisher-generated.20narrative.html#250707802">(Aug 26 2021 at 01:37)</a>:</h4>
<p>It is part of the IG.  Why do you say that it isn’t?  How do you generate the snapshot with the validation?  And what is happening that I can’t fix?</p>



<a name="250708262"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Broken%20links%20on%20publisher-generated%20narrative/near/250708262" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Broken.20links.20on.20publisher-generated.20narrative.html#250708262">(Aug 26 2021 at 01:44)</a>:</h4>
<p>the error gives you no information about how to fix the profile, but you should just regenerate it. The validator can do this:</p>
<p><code>-version 4.0 -snapshot StructureDefinition-profile-claim.json -output StructureDefinition-profile-claim-snapshot.json</code></p>
<p>I think that in general, you shouldn't freeze snapshots like that, and something seems wrong to me here. FSH can't make profiles on profiles?</p>



<a name="250716865"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Broken%20links%20on%20publisher-generated%20narrative/near/250716865" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Broken.20links.20on.20publisher-generated.20narrative.html#250716865">(Aug 26 2021 at 03:56)</a>:</h4>
<p>it can make profiles on profiles (which is what I'm doing) but it needs the snapshot to be able to do that <span class="user-mention" data-user-id="191469">@Chris Moesel</span> maybe you want to chime in here on why SUSHI requires imported profiles (i.e. non-FSH profiles) to have the snapshot?</p>



<a name="250717643"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Broken%20links%20on%20publisher-generated%20narrative/near/250717643" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Broken.20links.20on.20publisher-generated.20narrative.html#250717643">(Aug 26 2021 at 04:06)</a>:</h4>
<p>why does it need to be imported? Just author it the same way as everything else?</p>



<a name="250717776"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Broken%20links%20on%20publisher-generated%20narrative/near/250717776" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Broken.20links.20on.20publisher-generated.20narrative.html#250717776">(Aug 26 2021 at 04:09)</a>:</h4>
<p>well, that's the rub.  when I created the profile using FSH, I got an error (<a href="#narrow/stream/179252-IG-creation/topic/Slice.20Criteria.20Validation.20failing">https://chat.fhir.org/#narrow/stream/179252-IG-creation/topic/Slice.20Criteria.20Validation.20failing</a>).</p>
<p>Strangely enough, after creating the snapshot using the validator, I'm now getting the exact same error.</p>



<a name="250717846"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Broken%20links%20on%20publisher-generated%20narrative/near/250717846" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Broken.20links.20on.20publisher-generated.20narrative.html#250717846">(Aug 26 2021 at 04:10)</a>:</h4>
<p>that means there's a problem in the generated snapshot somewhere, but you won't get that after the next release</p>



<a name="250717953"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Broken%20links%20on%20publisher-generated%20narrative/near/250717953" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Broken.20links.20on.20publisher-generated.20narrative.html#250717953">(Aug 26 2021 at 04:10)</a>:</h4>
<p>to be clearer, by "exact same error", I meant that I'm getting the NPE that I was seeing when I was creating the profile in FSH.</p>



<a name="250718480"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Broken%20links%20on%20publisher-generated%20narrative/near/250718480" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Broken.20links.20on.20publisher-generated.20narrative.html#250718480">(Aug 26 2021 at 04:16)</a>:</h4>
<p>you didn't talk about an NPE, you showed an index out of bounds error</p>



<a name="250719162"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Broken%20links%20on%20publisher-generated%20narrative/near/250719162" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Broken.20links.20on.20publisher-generated.20narrative.html#250719162">(Aug 26 2021 at 04:24)</a>:</h4>
<p>oops, you're right.  I don't know why I wrote NPE there. too late in the day for me</p>



<a name="250720245"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Broken%20links%20on%20publisher-generated%20narrative/near/250720245" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Broken.20links.20on.20publisher-generated.20narrative.html#250720245">(Aug 26 2021 at 04:36)</a>:</h4>
<p>good. fixed next release</p>



<a name="250721049"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Broken%20links%20on%20publisher-generated%20narrative/near/250721049" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Broken.20links.20on.20publisher-generated.20narrative.html#250721049">(Aug 26 2021 at 04:45)</a>:</h4>
<p>Thx</p>



<a name="250765554"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Broken%20links%20on%20publisher-generated%20narrative/near/250765554" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Broken.20links.20on.20publisher-generated.20narrative.html#250765554">(Aug 26 2021 at 12:46)</a>:</h4>
<p><span class="user-mention silent" data-user-id="192166">Jean Duteau</span> <a href="#narrow/stream/179252-IG-creation/topic/Broken.20links.20on.20publisher-generated.20narrative/near/250716865">said</a>:</p>
<blockquote>
<p>it can make profiles on profiles (which is what I'm doing) but it needs the snapshot to be able to do that <span class="user-mention silent" data-user-id="191469">Chris Moesel</span> maybe you want to chime in here on why SUSHI requires imported profiles (i.e. non-FSH profiles) to have the snapshot?</p>
</blockquote>
<p>It sounds like you all worked out the issue.  That's good!</p>
<p>Regarding SUSHI and snapshots... When SUSHI builds a profile from FSH, it starts from the baseDefinition (parent).  If the parent is another FSH definition, SUSHI can do it's thing just fine (because it maintains its own "shadow" snapshots for FSH definitions) -- but if the parent is not a FSH definition (i.e., it's JSON), then SUSHI needs access to the parent's snapshot in order to build out the diff correctly.  Since SUSHI does not have its own snapshot generator, the snapshot just needs to be there in the first place.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
