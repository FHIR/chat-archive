---
layout: page
title: "FHIR Chat  · &quot;Checking internet connection&quot; · IG creation"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/index.html">IG creation</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/.22Checking.20internet.20connection.22.html">&quot;Checking internet connection&quot;</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="217227758"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/%22Checking%20internet%20connection%22/near/217227758" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/.22Checking.20internet.20connection.22.html#217227758">(Nov 19 2020 at 04:05)</a>:</h4>
<p>Have there been any changes lately that would affect pinging <a href="http://fx.fhir.org">fx.fhir.org</a> at the start of <a href="http://_updatePublisher.sh">_updatePublisher.sh</a>? The script seems to be waiting the full 1000 seconds before failing.</p>
<p>This is being invoked from a github action which uses the latest hl7fhir/ig-publisher-base image.<br>
(<span class="user-mention" data-user-id="191315">@Josh Mandel</span> )</p>



<a name="217273800"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/%22Checking%20internet%20connection%22/near/217273800" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/.22Checking.20internet.20connection.22.html#217273800">(Nov 19 2020 at 14:10)</a>:</h4>
<p>Northing I'm aware of. can you confirm that the terminology server was up and running at the time?</p>



<a name="217285800"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/%22Checking%20internet%20connection%22/near/217285800" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/.22Checking.20internet.20connection.22.html#217285800">(Nov 19 2020 at 15:35)</a>:</h4>
<p>It was. Builds on my local machine and regular auto builds were both working.</p>
<p>I’ll give it another try shortly to see if it’s better now.</p>



<a name="217296677"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/%22Checking%20internet%20connection%22/near/217296677" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/.22Checking.20internet.20connection.22.html#217296677">(Nov 19 2020 at 16:43)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191380">Elliot Silver</span> <a href="#narrow/stream/179252-IG-creation/topic/.22Checking.20internet.20connection.22/near/217285800">said</a>:</p>
<blockquote>
<p>l give it another try shortly to see if it’s better now.</p>
</blockquote>
<p>Nope, no change. It feels like a problem with what networks the image is allowed to see, or something similar. I did recently upgrade to sushi 1.0 (and restructured my project), but I doubt that is related since this is happening when trying to do <a href="http://_updatePublisher.sh">_updatePublisher.sh</a>.</p>



<a name="217335949"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/%22Checking%20internet%20connection%22/near/217335949" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/.22Checking.20internet.20connection.22.html#217335949">(Nov 19 2020 at 21:55)</a>:</h4>
<p>It is definitely an issue with ping hanging. I've tried updating the action so that ping is invoked before updatePublisher, and it is definitely hanging on the ping, not the updatePublisher script. One theory I had was that the network isn't up yet when ping is called, but adding a sleep before the ping doesn't seem to affect things. Another theory is that somehow ping is privileged (uses linux capabilities?), and I'm running it from a non-privileged account, but my experiments to prove that out don't seem to be going anywhere. Not sure where to look next.</p>



<a name="217340268"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/%22Checking%20internet%20connection%22/near/217340268" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/.22Checking.20internet.20connection.22.html#217340268">(Nov 19 2020 at 22:34)</a>:</h4>
<p><span class="user-mention" data-user-id="191380">@Elliot Silver</span> want to try this line instead of ping?<br>
<code>   linux-gnu* ) wget -q --spider http://tx.fhir.org/snomed/doco ;; </code></p>



<a name="217340318"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/%22Checking%20internet%20connection%22/near/217340318" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/.22Checking.20internet.20connection.22.html#217340318">(Nov 19 2020 at 22:34)</a>:</h4>
<p>(line 35 of <a href="http://_updatePublisher.sh">_updatePublisher.sh</a>)</p>



<a name="217341580"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/%22Checking%20internet%20connection%22/near/217341580" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/.22Checking.20internet.20connection.22.html#217341580">(Nov 19 2020 at 22:49)</a>:</h4>
<p>Thanks <span class="user-mention" data-user-id="191832">@Jose Costa Teixeira</span> ,  that does it.</p>



<a name="217342376"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/%22Checking%20internet%20connection%22/near/217342376" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/.22Checking.20internet.20connection.22.html#217342376">(Nov 19 2020 at 22:58)</a>:</h4>
<p>Any idea why wget works, but ping doesn't? (I still suspect a change in the github action environment, or in the ig-publisher image related to capabilities.)</p>



<a name="217441542"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/%22Checking%20internet%20connection%22/near/217441542" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Carl Anderson <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/.22Checking.20internet.20connection.22.html#217441542">(Nov 20 2020 at 18:37)</a>:</h4>
<p><code>ping</code> uses the ICMP protocol, while <code>wget</code> uses TCP.   It's possible that somewhere along the network between the two machines ICMP had been blocked by a piece of network equipment, or by the destination host itself.</p>



<a name="217442384"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/%22Checking%20internet%20connection%22/near/217442384" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/.22Checking.20internet.20connection.22.html#217442384">(Nov 20 2020 at 18:45)</a>:</h4>
<p>That was my expectation. I was stumped trying to figure out where that block was though.</p>



<a name="217443807"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/%22Checking%20internet%20connection%22/near/217443807" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Carl Anderson <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/.22Checking.20internet.20connection.22.html#217443807">(Nov 20 2020 at 18:57)</a>:</h4>
<p>I use a tool called <code>mtr</code>, which allows you to see all the hops along the network, updating them every second.  You can specify using TCP, ICMP, or UDP for connections, too.<br>
<a href="https://en.wikipedia.org/wiki/MTR_(software)">https://en.wikipedia.org/wiki/MTR_(software)</a></p>
<p>If there's a hop on a path blocking ICMP, you can usually spot it when comparing with the TCP path.</p>



<a name="217444239"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/%22Checking%20internet%20connection%22/near/217444239" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Carl Anderson <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/.22Checking.20internet.20connection.22.html#217444239">(Nov 20 2020 at 19:00)</a>:</h4>
<p>I suppose it could also be dropped packets, if the network was having issues.  If ping gives up after 4 tries, or reports failure if any of the pings fail - that might also cause ping to fail while wget works.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
