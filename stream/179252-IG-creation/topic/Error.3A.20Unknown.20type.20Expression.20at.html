---
layout: page
title: "FHIR Chat  · Error: Unknown type Expression at · IG creation"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/index.html">IG creation</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Error.3A.20Unknown.20type.20Expression.20at.html">Error: Unknown type Expression at</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="188173773"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Error%3A%20Unknown%20type%20Expression%20at/near/188173773" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Error.3A.20Unknown.20type.20Expression.20at.html#188173773">(Feb 14 2020 at 02:48)</a>:</h4>
<p>New to recent builds, I have an R4 questionnaire that has valueExpression extensions in it...</p>
<div class="codehilite"><pre><span></span>org.hl7.fhir.exceptions.FHIRException: Unknown type Expression at org.hl7.fhir.convertors.VersionConvertor_30_50.convertType(VersionConvertor_30_50.java:3187) at org.hl7.fhir.convertors.VersionConvertor_30_50.convertExtension(VersionConvertor_30_50.java:417) at org.hl7.fhir.convertors.VersionConvertor_30_50.copyElement(VersionConvertor_30_50.java:102) at org.hl7.fhir.convertors.conv30_50.Questionnaire30_50.convertQuestionnaireItemComponent(Questionnaire30_50.java:128) at org.hl7.fhir.convertors.conv30_50.Questionnaire30_50.convertQuestionnaireItemComponent(Questionnaire30_50.java:161) at org.hl7.fhir.convertors.conv30_50.Questionnaire30_50.convertQuestionnaire(Questionnaire30_50.java:119) at org.hl7.fhir.convertors.VersionConvertor_30_50.convertResource(VersionConvertor_30_50.java:4850) at org.hl7.fhir.igtools.publisher.Publisher.generateRegistryUploadZip(Publisher.java:4728) at org.hl7.fhir.igtools.publisher.Publisher.generateZips(Publisher.java:4613) at org.hl7.fhir.igtools.publisher.Publisher.generate(Publisher.java:4364) at org.hl7.fhir.igtools.publisher.Publisher.createIg(Publisher.java:815) at org.hl7.fhir.igtools.publisher.Publisher.execute(Publisher.java:665) at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:6945)
</pre></div>


<p>Is this something that is known, or should I go look into the code to see if I can spot something?</p>



<a name="188175858"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Error%3A%20Unknown%20type%20Expression%20at/near/188175858" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Error.3A.20Unknown.20type.20Expression.20at.html#188175858">(Feb 14 2020 at 03:46)</a>:</h4>
<p>do you get a stack dump?</p>



<a name="188176167"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Error%3A%20Unknown%20type%20Expression%20at/near/188176167" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Error.3A.20Unknown.20type.20Expression.20at.html#188176167">(Feb 14 2020 at 03:55)</a>:</h4>
<p>Sorry, yes</p>
<div class="codehilite"><pre><span></span>org.hl7.fhir.exceptions.FHIRException: Unknown type Expression at
org.hl7.fhir.convertors.VersionConvertor_30_50.convertType(VersionConvertor_30_50.java:3187) at
org.hl7.fhir.convertors.VersionConvertor_30_50.convertExtension(VersionConvertor_30_50.java:417) at
org.hl7.fhir.convertors.VersionConvertor_30_50.copyElement(VersionConvertor_30_50.java:102) at
org.hl7.fhir.convertors.conv30_50.Questionnaire30_50.convertQuestionnaireItemComponent(Questionnaire30_50.java:128) at
org.hl7.fhir.convertors.conv30_50.Questionnaire30_50.convertQuestionnaireItemComponent(Questionnaire30_50.java:161) at
org.hl7.fhir.convertors.conv30_50.Questionnaire30_50.convertQuestionnaire(Questionnaire30_50.java:119) at
org.hl7.fhir.convertors.VersionConvertor_30_50.convertResource(VersionConvertor_30_50.java:4850) at
org.hl7.fhir.igtools.publisher.Publisher.generateRegistryUploadZip(Publisher.java:4728) at
org.hl7.fhir.igtools.publisher.Publisher.generateZips(Publisher.java:4613) at
org.hl7.fhir.igtools.publisher.Publisher.generate(Publisher.java:4364) at
org.hl7.fhir.igtools.publisher.Publisher.createIg(Publisher.java:815) at
org.hl7.fhir.igtools.publisher.Publisher.execute(Publisher.java:665) at
org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:6945)
</pre></div>


<p>Whitespace was messing up the carriage returns</p>



<a name="188181642"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Error%3A%20Unknown%20type%20Expression%20at/near/188181642" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Error.3A.20Unknown.20type.20Expression.20at.html#188181642">(Feb 14 2020 at 06:26)</a>:</h4>
<p>From my looking at the stack, not sure why it would downgrade to the STU3 format, is that for the registry? Is there a way to turn that off (can't see it in the code) - if not can I add one?<br>
<a href="https://github.com/HL7/fhir-ig-publisher/blob/2bbc3a2a5ac307b9c34258e11ec78f4ee3568cbb/org.hl7.fhir.publisher.core/src/main/java/org/hl7/fhir/igtools/publisher/Publisher.java#L4728" target="_blank" title="https://github.com/HL7/fhir-ig-publisher/blob/2bbc3a2a5ac307b9c34258e11ec78f4ee3568cbb/org.hl7.fhir.publisher.core/src/main/java/org/hl7/fhir/igtools/publisher/Publisher.java#L4728">https://github.com/HL7/fhir-ig-publisher/blob/2bbc3a2a5ac307b9c34258e11ec78f4ee3568cbb/org.hl7.fhir.publisher.core/src/main/java/org/hl7/fhir/igtools/publisher/Publisher.java#L4728</a></p>



<a name="188182052"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Error%3A%20Unknown%20type%20Expression%20at/near/188182052" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Error.3A.20Unknown.20type.20Expression.20at.html#188182052">(Feb 14 2020 at 06:36)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span>, Yup, looking at the code referenced below, there is no mapping for the Expression type back to STU3, so what should occur in this case, should the resource just not be converted? <br>
Have we had this case where a new extension type was introduced and a resource was being down converted for the registry?<br>
<a href="https://github.com/hapifhir/org.hl7.fhir.core/blob/17eb1c41f7300f6e407cb043ed8b27d1ed2b3783/org.hl7.fhir.convertors/src/main/java/org/hl7/fhir/convertors/VersionConvertor_30_50.java#L3187" target="_blank" title="https://github.com/hapifhir/org.hl7.fhir.core/blob/17eb1c41f7300f6e407cb043ed8b27d1ed2b3783/org.hl7.fhir.convertors/src/main/java/org/hl7/fhir/convertors/VersionConvertor_30_50.java#L3187">https://github.com/hapifhir/org.hl7.fhir.core/blob/17eb1c41f7300f6e407cb043ed8b27d1ed2b3783/org.hl7.fhir.convertors/src/main/java/org/hl7/fhir/convertors/VersionConvertor_30_50.java#L3187</a></p>



<a name="188265438"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Error%3A%20Unknown%20type%20Expression%20at/near/188265438" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Error.3A.20Unknown.20type.20Expression.20at.html#188265438">(Feb 15 2020 at 02:32)</a>:</h4>
<p>oh this is in code that is trying to produce R3 copies for the registry but this is not a thing anymore, so i'm going to get around to removing it</p>



<a name="188268233"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Error%3A%20Unknown%20type%20Expression%20at/near/188268233" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Error.3A.20Unknown.20type.20Expression.20at.html#188268233">(Feb 15 2020 at 04:13)</a>:</h4>
<p>Thanks. Is that to comment out the zip registry stage? (so I can do it locally)</p>



<a name="188268924"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Error%3A%20Unknown%20type%20Expression%20at/near/188268924" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Error.3A.20Unknown.20type.20Expression.20at.html#188268924">(Feb 15 2020 at 04:39)</a>:</h4>
<p>yes</p>



<a name="188275206"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Error%3A%20Unknown%20type%20Expression%20at/near/188275206" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Mayfield <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Error.3A.20Unknown.20type.20Expression.20at.html#188275206">(Feb 15 2020 at 08:30)</a>:</h4>
<p>Also happening on GraphDefinition and MessageDefinition. Stu3 (works on R4)</p>



<a name="188346269"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Error%3A%20Unknown%20type%20Expression%20at/near/188346269" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Error.3A.20Unknown.20type.20Expression.20at.html#188346269">(Feb 17 2020 at 00:59)</a>:</h4>
<p>please report stack dumps on this issue, so we can actually know what the problem is</p>



<a name="188347271"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Error%3A%20Unknown%20type%20Expression%20at/near/188347271" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Error.3A.20Unknown.20type.20Expression.20at.html#188347271">(Feb 17 2020 at 01:33)</a>:</h4>
<p>Both I assume, is that github issue or jira tracker?</p>



<a name="188347408"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Error%3A%20Unknown%20type%20Expression%20at/near/188347408" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Error.3A.20Unknown.20type.20Expression.20at.html#188347408">(Feb 17 2020 at 01:38)</a>:</h4>
<p>well.... we seem to be in disarray on that question. We have 2 camps well trained to use only one of those. and a third camp trained to just report issues here.\</p>



<a name="188347472"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Error%3A%20Unknown%20type%20Expression%20at/near/188347472" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Error.3A.20Unknown.20type.20Expression.20at.html#188347472">(Feb 17 2020 at 01:41)</a>:</h4>
<p>So, where would you like to look?</p>



<a name="188347575"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Error%3A%20Unknown%20type%20Expression%20at/near/188347575" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Error.3A.20Unknown.20type.20Expression.20at.html#188347575">(Feb 17 2020 at 01:45)</a>:</h4>
<p>github, I think. what I really want is:</p>
<ul>
<li>what the author thinks is wrong</li>
<li>how to reproduce it (GH branch preferred)</li>
<li>where exactly to look in the output to see the problem</li>
</ul>



<a name="188347924"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Error%3A%20Unknown%20type%20Expression%20at/near/188347924" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Error.3A.20Unknown.20type.20Expression.20at.html#188347924">(Feb 17 2020 at 01:56)</a>:</h4>
<p>Roger.</p>



<a name="188415551"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Error%3A%20Unknown%20type%20Expression%20at/near/188415551" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Error.3A.20Unknown.20type.20Expression.20at.html#188415551">(Feb 18 2020 at 00:36)</a>:</h4>
<p>The SDC Guide gets the issue too, will log on github</p>



<a name="188415556"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Error%3A%20Unknown%20type%20Expression%20at/near/188415556" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Error.3A.20Unknown.20type.20Expression.20at.html#188415556">(Feb 18 2020 at 00:36)</a>:</h4>
<p><a href="https://build.fhir.org/ig/HL7/sdc/branches/master/build.log" target="_blank" title="https://build.fhir.org/ig/HL7/sdc/branches/master/build.log">https://build.fhir.org/ig/HL7/sdc/branches/master/build.log</a></p>



<a name="188415771"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Error%3A%20Unknown%20type%20Expression%20at/near/188415771" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Error.3A.20Unknown.20type.20Expression.20at.html#188415771">(Feb 18 2020 at 00:42)</a>:</h4>
<p>This what you're looking for <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> ?<br>
<a href="https://github.com/HL7/fhir-ig-publisher/issues/61" target="_blank" title="https://github.com/HL7/fhir-ig-publisher/issues/61">https://github.com/HL7/fhir-ig-publisher/issues/61</a></p>



<a name="188415785"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Error%3A%20Unknown%20type%20Expression%20at/near/188415785" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Error.3A.20Unknown.20type.20Expression.20at.html#188415785">(Feb 18 2020 at 00:43)</a>:</h4>
<p>I was going to comment out the call to <code>org.hl7.fhir.igtools.publisher.Publisher.generateRegistryUploadZip</code> in Publisher.java:4613</p>



<a name="188416077"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Error%3A%20Unknown%20type%20Expression%20at/near/188416077" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Error.3A.20Unknown.20type.20Expression.20at.html#188416077">(Feb 18 2020 at 00:50)</a>:</h4>
<p>I already have.</p>



<a name="188416165"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Error%3A%20Unknown%20type%20Expression%20at/near/188416165" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Error.3A.20Unknown.20type.20Expression.20at.html#188416165">(Feb 18 2020 at 00:53)</a>:</h4>
<p>Cool, so next release will catch it (I can see the change in there now, thanks again)</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
