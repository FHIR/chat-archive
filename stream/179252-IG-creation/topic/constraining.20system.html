---
layout: page
title: "FHIR Chat  · constraining system · IG creation"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/index.html">IG creation</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/constraining.20system.html">constraining system</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="193438657"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/constraining%20system/near/193438657" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a>  Bob Milius <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/constraining.20system.html#193438657">(Apr 09 2020 at 11:46)</a>:</h4>
<p>I need to constrain Patient.managingOrganization (0..1) to one of two system urls. I did by adding an invariant constraint, something along the lines of this fhirpath expression</p>
<div class="codehilite"><pre><span></span>&quot;(&#39;http://this.org/blah&#39; in identifier.system) or (&#39;http://that.org/blah&#39; in identifier.system)&quot;
</pre></div>


<p>This works, but seems clumsy. Is there a more elegant/proper way of doing this? I'm a novice re fhirpath.</p>



<a name="193461378"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/constraining%20system/near/193461378" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/constraining.20system.html#193461378">(Apr 09 2020 at 14:57)</a>:</h4>
<p>So you're just using Patient.managingOrganization.identifier?  You could declare a valueset on Patient.managingOrganization.identifier.system.</p>



<a name="193468203"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/constraining%20system/near/193468203" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a>  Bob Milius <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/constraining.20system.html#193468203">(Apr 09 2020 at 15:43)</a>:</h4>
<p>I thought of that, but talked myself out of it, as I thought I could only bind codes/values to a valueset.</p>



<a name="193468366"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/constraining%20system/near/193468366" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/constraining.20system.html#193468366">(Apr 09 2020 at 15:44)</a>:</h4>
<p>You can have value sets for strings</p>



<a name="193480758"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/constraining%20system/near/193480758" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a>  Bob Milius <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/constraining.20system.html#193480758">(Apr 09 2020 at 17:11)</a>:</h4>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span>  ok, I'm a bit clueless and I'm not finding documentation on that. Can you point me? or provide an example?</p>



<a name="193484203"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/constraining%20system/near/193484203" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/constraining.20system.html#193484203">(Apr 09 2020 at 17:38)</a>:</h4>
<p>Hmm.  I'd expected to see it either under profiling or in ValueSet, but I'm not seeing it either place.  <span class="user-mention" data-user-id="191316">@Grahame Grieve</span>, do you know where the rules for defining constraints on strings - particularly where the constraints aren't driven by existing code systems?</p>



<a name="193504739"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/constraining%20system/near/193504739" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/constraining.20system.html#193504739">(Apr 09 2020 at 20:26)</a>:</h4>
<p><a href="http://hl7.org/fhir/terminologies.html#strings" title="http://hl7.org/fhir/terminologies.html#strings">http://hl7.org/fhir/terminologies.html#strings</a></p>



<a name="193520154"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/constraining%20system/near/193520154" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a>  Bob Milius <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/constraining.20system.html#193520154">(Apr 09 2020 at 22:58)</a>:</h4>
<p>Thanks. The doc is brief, but don't see how it helps (though I may just be misunderstanding)</p>
<blockquote>
<p>In a few special cases, humans customarily use codes directly for elements that have type "string". A typical case is codes for states, and there are several places where a URI must come from a set of controlled values. An element of type string or uri can also be bound to a value set. When a string or URI is bound to a value set, the value property SHALL contain the code specified by the value set, and the system and display values are ignored.</p>
</blockquote>
<p>This says "system and display values are ignored".  But I still need to add values to identifiers. I probably wasn't clear. I have two possible systems, that each have its own set of org identifiers. The two registries collaborate and often share data. Each has its own identifiers for orgs that submit data to them. So one managingOrganization might be:</p>
<div class="codehilite"><pre><span></span>&quot;managingOrganization&quot;: {
    &quot;identifier&quot;:
        {
             &quot;system&quot; : &quot;http://this.org/these-centers&quot;
             &quot;value&quot; : &quot;1234&quot;
        }
  }
</pre></div>


<p>and the other might be</p>
<div class="codehilite"><pre><span></span>&quot;managingOrganization&quot;: {
    &quot;identifier&quot;:
        {
             &quot;system&quot; : &quot;http://that.org/those-centers&quot;
             &quot;value&quot; : &quot;abcd&quot;
        }
  }
</pre></div>


<p>So we want to accept values from only two different systems. I can do this with the fhirpath expression I showed in the original post. I'm just wondering if there's a more elegant solution.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
