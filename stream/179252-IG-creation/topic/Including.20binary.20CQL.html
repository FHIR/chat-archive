---
layout: page
title: "FHIR Chat  · Including binary CQL · IG creation"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/index.html">IG creation</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Including.20binary.20CQL.html">Including binary CQL</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="194941317"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Including%20binary%20CQL/near/194941317" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noemi Deppenwiese <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Including.20binary.20CQL.html#194941317">(Apr 22 2020 at 14:40)</a>:</h4>
<p>I recently found out that the Publisher allows storing base64-encoded CQL in seperate files (nice!). But i tried to use this functionality in I got an error:</p>
<div class="codehilite"><pre><span></span>Translating CQL source                                                           (00:27.0066)
Translating CQL source in folder D:\Uni\bbmri-fhir-ig\input\other                (00:27.0067)
Translating CQL source in file D:\Uni\bbmri-fhir-ig\input\other\test.cql         (00:27.0075)
Translation failed with (1) errors; see the error log for more information.      (00:27.0706)
Publishing Content Failed: Error doing replacements - no id defined in resource: Bundle/null (00:28.0184)
</pre></div>


<p>In the Library i have</p>
<div class="codehilite"><pre><span></span> &quot;content&quot;: [
    {
      &quot;id&quot;: &quot;ig-loader-test.cql&quot;
    }
  ]
</pre></div>


<p>So it seems to find the file, but somehow needs another id? I understood that test.cql only needs to include the base64-encoded CQL, or does it need a wrapper of some sorts?</p>



<a name="194962737"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Including%20binary%20CQL/near/194962737" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bob Dolin <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Including.20binary.20CQL.html#194962737">(Apr 22 2020 at 17:14)</a>:</h4>
<p><span class="user-mention" data-user-id="192119">@Yan Heras</span> and I were also trying to figure out what to do here. Last week, we grabbed the sample-ig and did a build, but we don't see the CQL showing up anywhere, and I'm not sure if it's something we're doing wrong or an issue with the build process. Can anyone offer advice?</p>



<a name="194969555"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Including%20binary%20CQL/near/194969555" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Including.20binary.20CQL.html#194969555">(Apr 22 2020 at 18:04)</a>:</h4>
<p>Yes, the library resource is a skeleton for what is published in the output. It takes source CQL files included in the input/cql directory (or whatever directory is configured in that parameter in the IG), performs the translation and packages the CQL content in the publisher library in the output.</p>



<a name="194969741"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Including%20binary%20CQL/near/194969741" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Including.20binary.20CQL.html#194969741">(Apr 22 2020 at 18:06)</a>:</h4>
<p>So this example.cql for example:</p>



<a name="194969745"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Including%20binary%20CQL/near/194969745" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Including.20binary.20CQL.html#194969745">(Apr 22 2020 at 18:06)</a>:</h4>
<p><a href="https://github.com/FHIR/sample-ig/blob/master/input/cql/example.cql" title="https://github.com/FHIR/sample-ig/blob/master/input/cql/example.cql">https://github.com/FHIR/sample-ig/blob/master/input/cql/example.cql</a></p>



<a name="194969834"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Including%20binary%20CQL/near/194969834" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Including.20binary.20CQL.html#194969834">(Apr 22 2020 at 18:07)</a>:</h4>
<p>Is referenced by the id 'ig-loader-example.cql' from this library resource: <a href="https://github.com/FHIR/sample-ig/blob/master/input/examples/Library-example.json" title="https://github.com/FHIR/sample-ig/blob/master/input/examples/Library-example.json">https://github.com/FHIR/sample-ig/blob/master/input/examples/Library-example.json</a></p>



<a name="194973762"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Including%20binary%20CQL/near/194973762" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bob Dolin <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Including.20binary.20CQL.html#194973762">(Apr 22 2020 at 18:38)</a>:</h4>
<p>Thanks <span class="user-mention" data-user-id="191359">@Bryn Rhodes</span> . We started with the sample-ig, and replicated the approach, but we must be doing something wrong since we're not seeing the CQL. Might be better to wait until we move our draft IG over to the HL7 build site, so it's easier to see what we've done. So <span class="user-mention" data-user-id="192119">@Yan Heras</span> , maybe we should just study this a bit more, and then revisit once we're up on HL7 build site?</p>



<a name="194977651"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Including%20binary%20CQL/near/194977651" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yan Heras <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Including.20binary.20CQL.html#194977651">(Apr 22 2020 at 19:11)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="191359">@Bryn Rhodes</span>, I see the publisher has put the cql content in the output file "Library-example.json.html" in content with contentType "text/cql", however, is the publisher able to output the actual source cql (not after the translation) ? something like what's in the Opioid IG where you can see the author view of the cql file (<a href="http://build.fhir.org/ig/cqframework/opioid-cds/Library-omtklogic.html" title="http://build.fhir.org/ig/cqframework/opioid-cds/Library-omtklogic.html">http://build.fhir.org/ig/cqframework/opioid-cds/Library-omtklogic.html</a>).</p>



<a name="194979007"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Including%20binary%20CQL/near/194979007" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Including.20binary.20CQL.html#194979007">(Apr 22 2020 at 19:22)</a>:</h4>
<p>We are working to add a template for the Library that will include the CQL as part of the generated Narrative, something like this: <a href="http://build.fhir.org/ig/cqframework/opioid-cds/Library-opioidcds-recommendation-10.html" title="http://build.fhir.org/ig/cqframework/opioid-cds/Library-opioidcds-recommendation-10.html">http://build.fhir.org/ig/cqframework/opioid-cds/Library-opioidcds-recommendation-10.html</a></p>



<a name="194980714"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Including%20binary%20CQL/near/194980714" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yan Heras <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Including.20binary.20CQL.html#194980714">(Apr 22 2020 at 19:35)</a>:</h4>
<p>Great, thank you! is there a time frame for this new template to be available?</p>



<a name="194983202"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Including%20binary%20CQL/near/194983202" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Including.20binary.20CQL.html#194983202">(Apr 22 2020 at 19:55)</a>:</h4>
<p>Should be soon, I'll be working on it tonight.</p>



<a name="194985952"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Including%20binary%20CQL/near/194985952" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yan Heras <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Including.20binary.20CQL.html#194985952">(Apr 22 2020 at 20:17)</a>:</h4>
<p>Thanks Bryn!</p>



<a name="210422333"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Including%20binary%20CQL/near/210422333" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bob Dolin <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Including.20binary.20CQL.html#210422333">(Sep 17 2020 at 17:27)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="191359">@Bryn Rhodes</span> . Sorry if this is a naive question, since I'm still a bit new to the IG publication process.  In the draft Outcome Criteria Framework IG [http://build.fhir.org/ig/HL7/fhir-outcome-criteria-framework-ig/branches/master/index.html], I've created a FHIR Library profile that says that Library.content must reference a CQL file (rather than include it in Library.content.data), but the publishing process automatically pulls the CQL into Library.content.data. Is there a way to avoid having the publisher pull the CQL into Library.content.data, and instead point to the CQL file so that a reader can download it to view it?</p>



<a name="210460522"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Including%20binary%20CQL/near/210460522" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Including.20binary.20CQL.html#210460522">(Sep 17 2020 at 22:44)</a>:</h4>
<p>Well, you could, but there's a whole bunch of extra processing that "pulling the CQL into the Library" does that is important for packaging the CQL library as a FHIR Library resource. Things like automatically exposing data requirements, parameters, and related artifacts. You'd have to do all of that another way if you didn't allow the publisher to do it's thing there.</p>



<a name="210461081"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Including%20binary%20CQL/near/210461081" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Including.20binary.20CQL.html#210461081">(Sep 17 2020 at 22:51)</a>:</h4>
<p>why not include it in the data?</p>



<a name="210469342"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Including%20binary%20CQL/near/210469342" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bob Dolin <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Including.20binary.20CQL.html#210469342">(Sep 18 2020 at 01:02)</a>:</h4>
<p>Somehow I thought content had to be either referenced or directly embedded, but it looks like I was mistaken, so pulling the CQL into the LIbrary doesn't hurt anything. Is there a way to also point to the CQL files themselves, so readers can see them in text format?</p>



<a name="210471173"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Including%20binary%20CQL/near/210471173" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Including.20binary.20CQL.html#210471173">(Sep 18 2020 at 01:38)</a>:</h4>
<p>hmm I thought that happened already</p>



<a name="210476423"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Including%20binary%20CQL/near/210476423" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Including.20binary.20CQL.html#210476423">(Sep 18 2020 at 03:42)</a>:</h4>
<p>The Library template includes the CQL as part of the fenerated narrative, as well as an anchor so you can point to it directly.</p>



<a name="210476427"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Including%20binary%20CQL/near/210476427" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Including.20binary.20CQL.html#210476427">(Sep 18 2020 at 03:43)</a>:</h4>
<p>*generated</p>



<a name="210476437"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Including%20binary%20CQL/near/210476437" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Including.20binary.20CQL.html#210476437">(Sep 18 2020 at 03:43)</a>:</h4>
<p>I prefer fenerated. or maybe fenestrated</p>



<a name="210476493"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Including%20binary%20CQL/near/210476493" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Including.20binary.20CQL.html#210476493">(Sep 18 2020 at 03:44)</a>:</h4>
<p>lol</p>



<a name="210523101"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Including%20binary%20CQL/near/210523101" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bob Dolin <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Including.20binary.20CQL.html#210523101">(Sep 18 2020 at 14:06)</a>:</h4>
<p>Sorry <span class="user-mention" data-user-id="191359">@Bryn Rhodes</span> , <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> I'm not following you.  You are saying that somewhere in the published output there is a way to see the CQL file itself, so that a reviewer of the IG can just click it and see the text contents?</p>



<a name="210523742"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Including%20binary%20CQL/near/210523742" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Including.20binary.20CQL.html#210523742">(Sep 18 2020 at 14:11)</a>:</h4>
<p>No, I'm saying that the CQL is in the generated narrative: <a href="http://build.fhir.org/ig/cqframework/opioid-cds-r4/Library-library-OpioidCDSREC01.html">http://build.fhir.org/ig/cqframework/opioid-cds-r4/Library-library-OpioidCDSREC01.html</a></p>



<a name="210525464"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Including%20binary%20CQL/near/210525464" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bob Dolin <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Including.20binary.20CQL.html#210525464">(Sep 18 2020 at 14:23)</a>:</h4>
<p>Yes, that's exactly what I'm looking for, but I don't know how to get it to generate. Is there something I need to include in the Library to cause that to generate? When I upload a Library example, I include this:   "content": [{"id": "ig-loader-DepressionOutcomes.cql"}. The output I get is just the base64 encoded CQL showing up in the data field.</p>



<a name="210568166"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Including%20binary%20CQL/near/210568166" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Including.20binary.20CQL.html#210568166">(Sep 18 2020 at 19:56)</a>:</h4>
<p>have you got an example you can point to?</p>



<a name="210568959"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Including%20binary%20CQL/near/210568959" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Including.20binary.20CQL.html#210568959">(Sep 18 2020 at 20:03)</a>:</h4>
<p>It's a template that you need to include. We're working on getting it to the base template but I don't think it's there yet (or it would already be happening, right). <a href="https://github.com/FHIR/sample-ig/blob/master/templates/liquid/Library.liquid">https://github.com/FHIR/sample-ig/blob/master/templates/liquid/Library.liquid</a></p>



<a name="210569536"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Including%20binary%20CQL/near/210569536" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Including.20binary.20CQL.html#210569536">(Sep 18 2020 at 20:08)</a>:</h4>
<p>Put that template in that folder, and put this parameter in your IG:</p>



<a name="210569537"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Including%20binary%20CQL/near/210569537" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Including.20binary.20CQL.html#210569537">(Sep 18 2020 at 20:08)</a>:</h4>
<p><a href="https://github.com/FHIR/sample-ig/blob/master/input/myig.xml#L129">https://github.com/FHIR/sample-ig/blob/master/input/myig.xml#L129</a></p>



<a name="210570718"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Including%20binary%20CQL/near/210570718" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bob Dolin <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Including.20binary.20CQL.html#210570718">(Sep 18 2020 at 20:18)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> This is for the draft Outcome Criteria Framework IG [http://build.fhir.org/ig/HL7/fhir-outcome-criteria-framework-ig/index.html], where I'm trying to introduce a FHIR Library profile that requires a pointer to a CQL file, and that also publishes such that viewers can see the text of the CQL file.</p>



<a name="210570743"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Including%20binary%20CQL/near/210570743" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bob Dolin <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Including.20binary.20CQL.html#210570743">(Sep 18 2020 at 20:19)</a>:</h4>
<p><span class="user-mention" data-user-id="191359">@Bryn Rhodes</span> can you tell me what parameter code to use?</p>



<a name="210571020"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Including%20binary%20CQL/near/210571020" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Including.20binary.20CQL.html#210571020">(Sep 18 2020 at 20:21)</a>:</h4>
<p>Include this parameter:</p>
<div class="codehilite"><pre><span></span><code>    &lt;parameter&gt;
      &lt;code value=&quot;path-liquid&quot;/&gt;
      &lt;value value=&quot;templates\liquid&quot;/&gt;
    &lt;/parameter&gt;
</code></pre></div>


<p>That parameter is a relative path to the templates folder, where the templates are loaded by resource name. There's documentation on implementation guide parameters <a href="https://confluence.hl7.org/display/FHIR/Implementation+Guide+Parameters">here</a> for more information too.</p>



<a name="210571170"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Including%20binary%20CQL/near/210571170" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Including.20binary.20CQL.html#210571170">(Sep 18 2020 at 20:23)</a>:</h4>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> the template is rendering this as an example, not a canonical resource. Why?</p>



<a name="210572479"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Including%20binary%20CQL/near/210572479" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Including.20binary.20CQL.html#210572479">(Sep 18 2020 at 20:37)</a>:</h4>
<p>The example layout is the default layout - I presume we don't have a layout specified for Library.  What would we want such a layout to look like?</p>



<a name="210573599"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Including%20binary%20CQL/near/210573599" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Including.20binary.20CQL.html#210573599">(Sep 18 2020 at 20:48)</a>:</h4>
<p>all canonical resources should have a summary table as part of the template</p>



<a name="210573612"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Including%20binary%20CQL/near/210573612" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Including.20binary.20CQL.html#210573612">(Sep 18 2020 at 20:48)</a>:</h4>
<p>other than that... nothing special</p>



<a name="210573699"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Including%20binary%20CQL/near/210573699" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bob Dolin <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Including.20binary.20CQL.html#210573699">(Sep 18 2020 at 20:49)</a>:</h4>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span>  I don't really understand why the publishing process adds dataRequirements and parameters to my Library example - presumably that was added to meet someone's needs, and I guess it doesn't really hurt me.  What I'm looking to do is [1] Create a profile on FHIR Library resource, that requires a reference to a CQL file - this would just render like any other profile; [2] Create a FHIR Library example, that conforms to the profile, which references a CQL file; [3] Enable the ability of a reviewer of the IG to view the text-based referenced CQL file.</p>



<a name="210573882"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Including%20binary%20CQL/near/210573882" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Including.20binary.20CQL.html#210573882">(Sep 18 2020 at 20:51)</a>:</h4>
<p><span class="user-mention" data-user-id="193751">@Bob Dolin</span> ,  where would the reference to the CQL file point?</p>



<a name="210573987"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Including%20binary%20CQL/near/210573987" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Including.20binary.20CQL.html#210573987">(Sep 18 2020 at 20:52)</a>:</h4>
<p>The point of packaging a CQL library as a FHIR Library is that the Library resource actually _contains_ the CQL. Otherwise, to distribute the library, you have to _also_ distribute the CQL file.</p>



<a name="210574230"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Including%20binary%20CQL/near/210574230" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bob Dolin <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Including.20binary.20CQL.html#210574230">(Sep 18 2020 at 20:55)</a>:</h4>
<p><span class="user-mention" data-user-id="191359">@Bryn Rhodes</span> I don't really mind if the CQL is embedded in the FHIR Library, but I also want to maintain the CQL files separately. I was thinking, for the examples, just putting the CQL files into the github input/cql folder, and then putting the filenames into Library.content.url</p>



<a name="210574433"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Including%20binary%20CQL/near/210574433" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bob Dolin <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Including.20binary.20CQL.html#210574433">(Sep 18 2020 at 20:57)</a>:</h4>
<p>I may be off on this <span class="user-mention" data-user-id="191359">@Bryn Rhodes</span> , but it seems as though, if you have a lot of CQL files, you can leverage the metadata afforded by the FHIR Library to find the one you want, but there will still be discoverability cases where it'll help to be able to search through the corpus of CQL text files.</p>



<a name="210574492"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Including%20binary%20CQL/near/210574492" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Including.20binary.20CQL.html#210574492">(Sep 18 2020 at 20:57)</a>:</h4>
<p>The templates don't add anything to the Library.  If that's happening, it's happening inside the publisher itself...</p>



<a name="210575176"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Including%20binary%20CQL/near/210575176" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Including.20binary.20CQL.html#210575176">(Sep 18 2020 at 21:04)</a>:</h4>
<p>right. I want the template to do something...</p>



<a name="210575416"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Including%20binary%20CQL/near/210575416" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Including.20binary.20CQL.html#210575416">(Sep 18 2020 at 21:06)</a>:</h4>
<p><span class="user-mention" data-user-id="193751">@Bob Dolin</span> , yes, you still maintain the source as CQL files, but when they are packaged in the implementation guide, they are in FHIR Library resources. The generated narrative contains the CQL so that is searchable/indexable.</p>



<a name="210575519"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Including%20binary%20CQL/near/210575519" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Including.20binary.20CQL.html#210575519">(Sep 18 2020 at 21:07)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> I'm referring to Bob's report of additional data elements being inserted into his library.</p>



<a name="210575611"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Including%20binary%20CQL/near/210575611" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Including.20binary.20CQL.html#210575611">(Sep 18 2020 at 21:08)</a>:</h4>
<p>On the topic of template change - should the summary table appear if the resource is being used as an example, or only as an actual IG conformance resource?</p>



<a name="210575979"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Including%20binary%20CQL/near/210575979" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Including.20binary.20CQL.html#210575979">(Sep 18 2020 at 21:12)</a>:</h4>
<p>not sure.</p>



<a name="210575996"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Including%20binary%20CQL/near/210575996" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Including.20binary.20CQL.html#210575996">(Sep 18 2020 at 21:12)</a>:</h4>
<p>probably yes</p>



<a name="210576014"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Including%20binary%20CQL/near/210576014" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Including.20binary.20CQL.html#210576014">(Sep 18 2020 at 21:12)</a>:</h4>
<p>and setting up the library happens in the publisher loading code</p>



<a name="210577061"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Including%20binary%20CQL/near/210577061" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bob Dolin <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Including.20binary.20CQL.html#210577061">(Sep 18 2020 at 21:23)</a>:</h4>
<p>So, let me ask you this - let's say I don't really need the automated packaging of CQL into the FHIR Library. What if I could just reference the CQL files direct in the IG, and then have them show up on the Table of Content and Artifact Summary pages?</p>



<a name="210577104"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Including%20binary%20CQL/near/210577104" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Including.20binary.20CQL.html#210577104">(Sep 18 2020 at 21:24)</a>:</h4>
<p>we don't want you to do that, and we think you shouldn't</p>



<a name="210577135"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Including%20binary%20CQL/near/210577135" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bob Dolin <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Including.20binary.20CQL.html#210577135">(Sep 18 2020 at 21:24)</a>:</h4>
<p>how come?</p>



<a name="210577168"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Including%20binary%20CQL/near/210577168" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Including.20binary.20CQL.html#210577168">(Sep 18 2020 at 21:24)</a>:</h4>
<p>because it avoids all the downstream distribution mechanisms that people use</p>



<a name="210577243"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Including%20binary%20CQL/near/210577243" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bob Dolin <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Including.20binary.20CQL.html#210577243">(Sep 18 2020 at 21:25)</a>:</h4>
<p>sorry, not following you. You're saying its harder to maintain the link between the FHIR Library and it's corresponding CQL file if we treat them as separate but referenced files?</p>



<a name="210577740"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Including%20binary%20CQL/near/210577740" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Including.20binary.20CQL.html#210577740">(Sep 18 2020 at 21:31)</a>:</h4>
<p>very much so</p>



<a name="210577767"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Including%20binary%20CQL/near/210577767" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Including.20binary.20CQL.html#210577767">(Sep 18 2020 at 21:31)</a>:</h4>
<p>I don't see why you want it not to be part of the library?</p>



<a name="210578080"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Including%20binary%20CQL/near/210578080" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bob Dolin <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Including.20binary.20CQL.html#210578080">(Sep 18 2020 at 21:35)</a>:</h4>
<p>I don't mind if it's base64 encoded into the FHIR Library really if people find that convenient, but I want to have stand-alone CQL files that I can reference by the FHIR Library. This lets me manage the CQL files, keep them where I want, search them when I can't find the one I want, etc.</p>



<a name="210578104"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Including%20binary%20CQL/near/210578104" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Including.20binary.20CQL.html#210578104">(Sep 18 2020 at 21:35)</a>:</h4>
<p>I can't figure out whether you're saying that as an author or a reader</p>



<a name="210578218"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Including%20binary%20CQL/near/210578218" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bob Dolin <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Including.20binary.20CQL.html#210578218">(Sep 18 2020 at 21:36)</a>:</h4>
<p>Here's a scenario: I'm a CQL author sitting down to write a new rule, but I want to first see if such a rule already exists.</p>



<a name="210578354"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Including%20binary%20CQL/near/210578354" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bob Dolin <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Including.20binary.20CQL.html#210578354">(Sep 18 2020 at 21:38)</a>:</h4>
<p>As for a reader of the IG, I think the current publishing solution works, although if my example FHIR Library includes a content.url, it seems to suppress the nice rendering of the CQL.  I'll test it again though...</p>



<a name="210578378"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Including%20binary%20CQL/near/210578378" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Including.20binary.20CQL.html#210578378">(Sep 18 2020 at 21:39)</a>:</h4>
<p>yeah the rendering of library needs work.</p>



<a name="210578400"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Including%20binary%20CQL/near/210578400" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Including.20binary.20CQL.html#210578400">(Sep 18 2020 at 21:39)</a>:</h4>
<p>But I don't understand </p>
<blockquote>
<p>I'm a CQL author sitting down to write a new rule, but I want to first see if such a rule already exists</p>
</blockquote>



<a name="210578670"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Including%20binary%20CQL/near/210578670" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bob Dolin <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Including.20binary.20CQL.html#210578670">(Sep 18 2020 at 21:42)</a>:</h4>
<p>I was imaging an enterprise CDS management system, containing 100s of rules - for diabetes, for depression, for all kinds of things. When the time comes to write a new rule, say, for all-cause-mortality for congestive heart failure, I'll be darned if I can remember which CQL file contains that rule, since I wrote it about a year ago. It's too granular to be discoverable with FHIR Library metadata, so I just want to do a text-based search of all by CQL files.</p>



<a name="210579316"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Including%20binary%20CQL/near/210579316" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bob Dolin <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Including.20binary.20CQL.html#210579316">(Sep 18 2020 at 21:51)</a>:</h4>
<p>When I include this</p>
<p>"content": [<br>
    {<br>
      "id": "ig-loader-DepressionMeasure.cql"<br>
    }</p>
<p>in my FHIR Library, I get all the bells and whistles, including packaging the CQL into the FHIR Library. Seems like this is very important to folks, and it doesn't really hurt anything, so that's fine.</p>
<p>But when I also include contentType and url, like this: </p>
<p>"content": [<br>
    {<br>
      "id": "ig-loader-DepressionMeasure.cql",<br>
      "contentType": "text/cql",<br>
      "url": "DepressionMeasure.cql"<br>
    }</p>
<p>all the bells and whistles are somehow suppressed. Is it possible to NOT suppress the preferred publishing process while still allowing for the inclusion of contentType and url in my examples?</p>



<a name="210579396"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Including%20binary%20CQL/near/210579396" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Including.20binary.20CQL.html#210579396">(Sep 18 2020 at 21:52)</a>:</h4>
<p>So something like <code>GET [base]/Library?_text=(bone OR liver) and metastases</code>?</p>



<a name="210579634"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Including%20binary%20CQL/near/210579634" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Including.20binary.20CQL.html#210579634">(Sep 18 2020 at 21:55)</a>:</h4>
<p>And actually, I think "all-cause-mortality" and "congestive-heart-failure" are exactly the kinds of concepts you'd want to tag the rule with in the <code>useContext</code> element to make searches exactly like the one you're describing easier.</p>



<a name="210579736"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Including%20binary%20CQL/near/210579736" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bob Dolin <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Including.20binary.20CQL.html#210579736">(Sep 18 2020 at 21:56)</a>:</h4>
<p><span class="user-mention" data-user-id="191359">@Bryn Rhodes</span> I hadn't considered that. You're saying that since the publishing process puts the full text into Library.text, than it's equivalent to full text searching of textual CQL files?</p>



<a name="210579773"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Including%20binary%20CQL/near/210579773" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Including.20binary.20CQL.html#210579773">(Sep 18 2020 at 21:57)</a>:</h4>
<p>It's a superset of that, because the narrative does contain other things, but yes it would search the narrative text.</p>



<a name="210579787"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Including%20binary%20CQL/near/210579787" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bob Dolin <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Including.20binary.20CQL.html#210579787">(Sep 18 2020 at 21:57)</a>:</h4>
<p>And as for useContext, yes, I agree that is a valuable element. But look at VSAC for instance - you can search using metadata, and generally hone in on the right value set, but imagine searching value sets via something like 'find value sets that contain code X and do not contain code Y'</p>



<a name="210685740"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Including%20binary%20CQL/near/210685740" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Including.20binary.20CQL.html#210685740">(Sep 20 2020 at 21:14)</a>:</h4>
<p>I think that you're making Bryn's point. More generally, you seem to be assuming that indexing etc won't work unless the raw cql source is available, but that seems like a strange assumption to me. </p>
<p>But I spent some time on this, so from the next release:</p>
<ul>
<li>Library resources will be rendered much more nicely. </li>
<li>do not use library.liquid (<span class="user-mention" data-user-id="191359">@Bryn Rhodes</span> - I can do things in the code that you wouldn't try in liquid)</li>
<li>the contents of the library will be rendered (with syntax highlighting)</li>
<li>an additional file Library-[id].cql (or whatever) will be produced as well</li>
</ul>



<a name="210685759"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Including%20binary%20CQL/near/210685759" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Including.20binary.20CQL.html#210685759">(Sep 20 2020 at 21:15)</a>:</h4>
<p>so just let the cql file be in the library as we recommend</p>



<a name="210687075"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Including%20binary%20CQL/near/210687075" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Including.20binary.20CQL.html#210687075">(Sep 20 2020 at 21:48)</a>:</h4>
<p>Great, thanks Grahame!</p>



<a name="210749032"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Including%20binary%20CQL/near/210749032" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bob Dolin <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Including.20binary.20CQL.html#210749032">(Sep 21 2020 at 14:28)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> thanks very much. You all have a lot more experience with CQL than I do, so I'll follow your recommendations.</p>



<a name="221599233"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Including%20binary%20CQL/near/221599233" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bob Dolin <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Including.20binary.20CQL.html#221599233">(Jan 05 2021 at 00:20)</a>:</h4>
<p><span class="user-mention" data-user-id="191359">@Bryn Rhodes</span> <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> sorry to keep at this, but I still can't get rendering to work. Here is my repository: <a href="https://github.com/HL7/fhir-outcome-criteria-framework-ig">https://github.com/HL7/fhir-outcome-criteria-framework-ig</a>; Here is the build log: <a href="http://build.fhir.org/ig/HL7/fhir-outcome-criteria-framework-ig/branches/master/build.log">http://build.fhir.org/ig/HL7/fhir-outcome-criteria-framework-ig/branches/master/build.log</a>. When I build locally (publisher 1.1.56), I get a very nice representation of the CQL that shows up at the bottom of the Library (see picture). But that CQL doesn't show up on the build site, and the build log is giving me error messages I don't understand, such as [Internal error in location for message: 'Error @1, 1: Found / expecting a token name', loc = '/scratch/ig-build-temp-ZH5E1N/repo/input/cql/depressionIntervention.cql', err = 'CQL source was not associated with a library resource in the IG.']. Any advice? <a href="/user_uploads/10155/yCWb2QQawO-d5I88QclfdJAZ/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/10155/yCWb2QQawO-d5I88QclfdJAZ/image.png" title="image.png"><img src="/user_uploads/10155/yCWb2QQawO-d5I88QclfdJAZ/image.png"></a></div>



<a name="221806179"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Including%20binary%20CQL/near/221806179" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Including.20binary.20CQL.html#221806179">(Jan 06 2021 at 18:49)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="193751">@Bob Dolin</span> , apologies for the delay, I'll try to get to this today</p>



<a name="221806855"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Including%20binary%20CQL/near/221806855" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bob Dolin <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Including.20binary.20CQL.html#221806855">(Jan 06 2021 at 18:55)</a>:</h4>
<p>Thanks <span class="user-mention" data-user-id="191359">@Bryn Rhodes</span></p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
