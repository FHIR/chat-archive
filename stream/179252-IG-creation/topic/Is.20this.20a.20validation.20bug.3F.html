---
layout: page
title: "FHIR Chat  · Is this a validation bug? · IG creation"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/index.html">IG creation</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Is.20this.20a.20validation.20bug.3F.html">Is this a validation bug?</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="159278696"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Is%20this%20a%20validation%20bug%3F/near/159278696" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Reinhold <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Is.20this.20a.20validation.20bug.3F.html#159278696">(Feb 24 2019 at 14:48)</a>:</h4>
<p>I get the following error using the IG framework:</p>
<p><code>None of the codes provided are in the value set http://hl7.org/fhir/uv/phd/ValueSet/ASN1attribute (http://hl7.org/fhir/uv/phd/ValueSet/ASN1attribute, and a code from this value set is required) (codes = http://hl7.org/fhir/uv/phd/CodeSystem/ASN1ToHL7#532354.0)</code></p>
<p>From what I see everything is in place so why is this error happening?</p>
<p>The referenced Device resource has the following property entry:<br>
<code>        {
            "type": {
                "coding": [
                    {
                        "system": "http://hl7.org/fhir/uv/phd/CodeSystem/ASN1ToHL7",
                        "code": "532354.0"
                    }
                ],
                "text": "regulation-status"
            },
            "valueCode": [
                {
                    "coding": [
                        {
                            "system": "http://terminology.hl7.org/CodeSystem/v2-0136",
                            "code": "N"
                        }
                    ],
                    "text": "Device is Regulated"
                }
            ]
        },</code></p>
<p>The structure definition for this property entry is</p>
<p><code>    &lt;element id="Device.property:Asn"&gt;
      &lt;path value="Device.property" /&gt;
      &lt;sliceName value="Asn" /&gt;
      &lt;short value="Properties using ASN1toHL7 codes mapped from ASN.1 BITS fields" /&gt;
      &lt;definition value="This set of properties reports time capabilities and regulation status." /&gt;
    &lt;/element&gt;
    &lt;!-- The bitProperties type: It will contain at least one coding element using the ASN1 system with one of
    the ASN1 codes. Currently the MdsTimeInfo capabilities and RegCertDataList regulation status are reported as BITS  --&gt;
    &lt;element id="Device.property:Asn.type"&gt;
      &lt;path value="Device.property.type" /&gt;
      &lt;short value="Tells what the BITs item is" /&gt;
      &lt;definition value="One of the capabilities reported in the Mds-Time-Info.mds-time-caps-state or Reg-Cert-Data-List.regulation-status field." /&gt;
      &lt;comment value="Only set 'event' types need be reported. Both set and cleared 'state' types need to be reported. The regulation status is as state type. All time capabilities are event types" /&gt;
      &lt;binding&gt; 
        &lt;strength value="required"/&gt; 
        &lt;valueSet value="http://hl7.org/fhir/uv/phd/ValueSet/ASN1attribute"/&gt; 
      &lt;/binding&gt;
    &lt;/element&gt;
    &lt;element id="Device.property:Asn.type.text"&gt;
      &lt;path value="Device.property.type.text" /&gt;
      &lt;definition value="It is recommended to display at least the ASN1 name for the given bit meaning" /&gt;
    &lt;/element&gt;
    &lt;!-- This is an ASN1 BITS code, tied to value. Use only one coding system --&gt;
    &lt;element id="Device.property:Asn.type.coding"&gt;
      &lt;path value="Device.property.type.coding" /&gt;
      &lt;short value="Required ASN1 code system entry" /&gt;
      &lt;min value="1" /&gt;
      &lt;max value="1" /&gt;
    &lt;/element&gt;
    &lt;!-- The system value is fixed --&gt;
    &lt;element id="Device.property:Asn.type.coding.system"&gt;
      &lt;path value="Device.property.type.coding.system" /&gt;
      &lt;min value="1" /&gt;
      &lt;fixedUri value="http://hl7.org/fhir/uv/phd/CodeSystem/ASN1ToHL7" /&gt;
    &lt;/element&gt;
    &lt;element id="Device.property:Asn.type.coding.code"&gt;
      &lt;path value="Device.property.type.coding.code" /&gt;
      &lt;short value="These codes are time capabilities 68219.x where x=0 to 15 and regulation status 532354.0" /&gt;
      &lt;definition value="The ASN1 code made from the code and the Mder bit position" /&gt;
      &lt;comment value="The MDC code for the mds-time-caps-state field is 68219. Thus the ASN1 code for the case 'device supports a relative time clock', Mder bit 2, would be 68219.2. For the regulation status field the MDC code is 532354, and only bit 0 is defined. However, the regulated status is when the bit is cleared and the unregulated status is when the bit is set. That choice can be confusing." /&gt;
      &lt;min value="1" /&gt;
    &lt;/element&gt;
    &lt;!-- No quantity entry when the value is a code! --&gt;
    &lt;element id="Device.property:Asn.valueQuantity"&gt;
      &lt;path value="Device.property.valueQuantity" /&gt;
      &lt;max value="0" /&gt;
    &lt;/element&gt;
    &lt;element id="Device.property:Asn.valueCode"&gt;
      &lt;path value="Device.property.valueCode" /&gt;
      &lt;min value="1" /&gt;
      &lt;max value="1" /&gt;
    &lt;/element&gt;
    &lt;element id="Device.property:Asn.valueCode.coding"&gt;
      &lt;path value="Device.property.valueCode.coding" /&gt;
      &lt;slicing&gt;
        &lt;discriminator&gt;
          &lt;type value="value" /&gt;
          &lt;path value="system" /&gt;
        &lt;/discriminator&gt;
        &lt;rules value="open" /&gt;
      &lt;/slicing&gt;
      &lt;min value="1" /&gt;
    &lt;/element&gt;
    &lt;element id="Device.property:Asn.valueCode.coding:V2Binary"&gt;
      &lt;path value="Device.property.valueCode.coding" /&gt;
      &lt;sliceName value="V2Binary" /&gt;
      &lt;short value="Required V2 Binary code system entry" /&gt;
      &lt;min value="1" /&gt;
      &lt;max value="1" /&gt;
    &lt;/element&gt;
    &lt;element id="Device.property:Asn.valueCode.coding:V2Binary.system"&gt;
      &lt;path value="Device.property.valueCode.coding.system" /&gt;
      &lt;min value="1" /&gt;
      &lt;fixedUri value="http://terminology.hl7.org/CodeSystem/v2-0203" /&gt;
    &lt;/element&gt;
    &lt;element id="Device.property:Asn.valueCode.coding:V2Binary.code"&gt;
      &lt;path value="Device.property.valueCode.coding.code" /&gt;
      &lt;definition value="If bit is set, code contains Y if cleared, N" /&gt;
      &lt;min value="1" /&gt;
    &lt;/element&gt;</code></p>
<p>and the value set is pretty small and contains only this entry:</p>
<p><code>  &lt;compose&gt;
    &lt;include&gt;
        &lt;system value="http://hl7.org/fhir/uv/phd/CodeSystem/ASN1ToHL7"/&gt;
        &lt;filter&gt;
          &lt;property value="source"/&gt;
            &lt;op value="="/&gt;
            &lt;value value="attribute"/&gt;
        &lt;/filter&gt;
      &lt;/include&gt;
  &lt;/compose&gt;</code></p>
<p>and the entry in the code system exists</p>
<p><code>  &lt;concept&gt; 
    &lt;code value="532354.0"/&gt; 
    &lt;display value="If bit is cleared device is regulated"/&gt; 
    &lt;definition value="Indicates whether the device is regulated"/&gt; 
    &lt;property&gt; 
      &lt;code value="type" /&gt; 
      &lt;valueString value="state" /&gt;
    &lt;/property&gt;
    &lt;property&gt; 
      &lt;code value="source" /&gt; 
      &lt;valueString value="attribute" /&gt;
    &lt;/property&gt;
  &lt;/concept&gt;</code></p>



<a name="159306402"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Is%20this%20a%20validation%20bug%3F/near/159306402" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Is.20this.20a.20validation.20bug.3F.html#159306402">(Feb 25 2019 at 01:46)</a>:</h4>
<p>The term server is not finding the codes.   I usually chalks these up to a termserver issue after double checking the definitions and valueset.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
