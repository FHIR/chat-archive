---
layout: page
title: "FHIR Chat  · New validation error &quot;Unsupported fixed pattern type...&quot; · IG creation"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/index.html">IG creation</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/New.20validation.20error.20.22Unsupported.20fixed.20pattern.20type.2E.2E.2E.22.html">New validation error &quot;Unsupported fixed pattern type...&quot;</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="192077630"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/New%20validation%20error%20%22Unsupported%20fixed%20pattern%20type...%22/near/192077630" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/New.20validation.20error.20.22Unsupported.20fixed.20pattern.20type.2E.2E.2E.22.html#192077630">(Mar 27 2020 at 20:47)</a>:</h4>
<p>With the latest publisher, I am now getting the following error that I wasn't before:<br>
Unsupported fixed pattern type for discriminator(system) for slice xxx</p>
<p>I have three slices on Organization.telecom on telecom.system.  Phone requires system to be #phone, Fax requires system to be #fax, and Email requires system to be #email.</p>
<p>I have this in my example:<br>
  "telecom" : [   {    "system" : "email",    "value" : "<a href="mailto:faersedub@fda.hhs.gov" title="mailto:faersedub@fda.hhs.gov">faersedub@fda.hhs.gov</a>"   }  ],</p>
<p>And I get the following errors:<br>
Unsupported fixed pattern type for discriminator(system) for slice Organization.telecom:Phone: org.hl7.fhir.r5.model.CodeType<br>
Unsupported fixed pattern type for discriminator(system) for slice Organization.telecom:Fax: org.hl7.fhir.r5.model.CodeType<br>
Unsupported fixed pattern type for discriminator(system) for slice Organization.telecom:Email: org.hl7.fhir.r5.model.CodeType</p>
<p>I can't really tell from the error message what is wrong, but it seems to be saying that my slice definitions in the profile are wrong?  But it looks correct to me.</p>



<a name="192079198"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/New%20validation%20error%20%22Unsupported%20fixed%20pattern%20type...%22/near/192079198" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/New.20validation.20error.20.22Unsupported.20fixed.20pattern.20type.2E.2E.2E.22.html#192079198">(Mar 27 2020 at 20:58)</a>:</h4>
<p>Unsupported means that the publisher doesn't currently support handling patterns for ContactPoint.  (The number of types supported is actually pretty small so far - Coding, CodeableConcept, and maybe one or two others.). We'll have to change the IGPublisher to support this type.  I'll see if I can do it.</p>



<a name="192079234"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/New%20validation%20error%20%22Unsupported%20fixed%20pattern%20type...%22/near/192079234" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/New.20validation.20error.20.22Unsupported.20fixed.20pattern.20type.2E.2E.2E.22.html#192079234">(Mar 27 2020 at 20:58)</a>:</h4>
<p>right. and this is nothing to do with the new publisher.</p>



<a name="192079303"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/New%20validation%20error%20%22Unsupported%20fixed%20pattern%20type...%22/near/192079303" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/New.20validation.20error.20.22Unsupported.20fixed.20pattern.20type.2E.2E.2E.22.html#192079303">(Mar 27 2020 at 20:59)</a>:</h4>
<p>hmm, I'm not asking for a pattern slice.  It is specified as a value slice.<br>
this wasn't broken before, so it might be that the new sushi created the profile differently.  i'll go look.</p>



<a name="192079464"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/New%20validation%20error%20%22Unsupported%20fixed%20pattern%20type...%22/near/192079464" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/New.20validation.20error.20.22Unsupported.20fixed.20pattern.20type.2E.2E.2E.22.html#192079464">(Mar 27 2020 at 21:00)</a>:</h4>
<p>Yeah, this isn't a pattern slice...</p>
<div class="codehilite"><pre><span></span>    &quot;id&quot;: &quot;Organization.telecom&quot;,
    &quot;path&quot;: &quot;Organization.telecom&quot;,
    &quot;slicing&quot;: {
      &quot;discriminator&quot;: [
        {
          &quot;type&quot;: &quot;value&quot;,
          &quot;path&quot;: &quot;system&quot;
        }
      ],
      &quot;rules&quot;: &quot;open&quot;,
      &quot;description&quot;: &quot;Slice based on the different telecom types (systems)&quot;
    }
  },
</pre></div>



<a name="192079534"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/New%20validation%20error%20%22Unsupported%20fixed%20pattern%20type...%22/near/192079534" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/New.20validation.20error.20.22Unsupported.20fixed.20pattern.20type.2E.2E.2E.22.html#192079534">(Mar 27 2020 at 21:00)</a>:</h4>
<p>what version is this IG?</p>



<a name="192079746"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/New%20validation%20error%20%22Unsupported%20fixed%20pattern%20type...%22/near/192079746" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/New.20validation.20error.20.22Unsupported.20fixed.20pattern.20type.2E.2E.2E.22.html#192079746">(Mar 27 2020 at 21:02)</a>:</h4>
<p>hmm, but the actual slice definitions use 'patternCode' instead of 'fixedCode' like I'd expect:<br>
      {<br>
        "id": "Organization.telecom:Phone.system",<br>
        "path": "Organization.telecom.system",<br>
        "patternCode": "phone"<br>
      },</p>



<a name="192079858"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/New%20validation%20error%20%22Unsupported%20fixed%20pattern%20type...%22/near/192079858" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/New.20validation.20error.20.22Unsupported.20fixed.20pattern.20type.2E.2E.2E.22.html#192079858">(Mar 27 2020 at 21:03)</a>:</h4>
<p>well, that's why you're getting that message</p>



<a name="192079891"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/New%20validation%20error%20%22Unsupported%20fixed%20pattern%20type...%22/near/192079891" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/New.20validation.20error.20.22Unsupported.20fixed.20pattern.20type.2E.2E.2E.22.html#192079891">(Mar 27 2020 at 21:03)</a>:</h4>
<p>too many moving parts :(</p>



<a name="192084005"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/New%20validation%20error%20%22Unsupported%20fixed%20pattern%20type...%22/near/192084005" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/New.20validation.20error.20.22Unsupported.20fixed.20pattern.20type.2E.2E.2E.22.html#192084005">(Mar 27 2020 at 21:42)</a>:</h4>
<blockquote>
<p>Unsupported means that the publisher doesn't currently support handling patterns for ContactPoint. (The number of types supported is actually pretty small so far - Coding, CodeableConcept, and maybe one or two others.)</p>
</blockquote>
<p>So that's a bit of a surprise.  I thought <span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> was an advocate for using patterns even on primitives, so as to allow ids and extensions on them.  Am I misunderstanding something here?</p>



<a name="192084179"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/New%20validation%20error%20%22Unsupported%20fixed%20pattern%20type...%22/near/192084179" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rick Geimer <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/New.20validation.20error.20.22Unsupported.20fixed.20pattern.20type.2E.2E.2E.22.html#192084179">(Mar 27 2020 at 21:45)</a>:</h4>
<p>Agreed, I would expect pattern to be well supported by now. I've been discouraging our analysts from using fixed wherever possible.</p>



<a name="192084469"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/New%20validation%20error%20%22Unsupported%20fixed%20pattern%20type...%22/near/192084469" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/New.20validation.20error.20.22Unsupported.20fixed.20pattern.20type.2E.2E.2E.22.html#192084469">(Mar 27 2020 at 21:48)</a>:</h4>
<p>I looked in the code and pattern only works for CodeableConcept, Coding, and Identifier.  It errors out for any other type.</p>



<a name="192088209"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/New%20validation%20error%20%22Unsupported%20fixed%20pattern%20type...%22/near/192088209" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/New.20validation.20error.20.22Unsupported.20fixed.20pattern.20type.2E.2E.2E.22.html#192088209">(Mar 27 2020 at 22:32)</a>:</h4>
<p>I don't think there's a misunderstanding.  At present, the code for pattern is type-specific and is being added 'as needed'.  I'd been holding off on doing anything as I wasn't clear on whether Jean's issue was a publisher issue or a FSH issue.  Jean, do you need the publisher changed?  If so, seeing as you've already found the code, do you want to make the pull request yourself?</p>



<a name="192091202"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/New%20validation%20error%20%22Unsupported%20fixed%20pattern%20type...%22/near/192091202" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/New.20validation.20error.20.22Unsupported.20fixed.20pattern.20type.2E.2E.2E.22.html#192091202">(Mar 27 2020 at 23:10)</a>:</h4>
<p>I have a workaround in FSH to make it specify the match as fixed.  My specific issue was a code pattern (as opposed to a ContactPoint pattern) and that should be easy to fix, but that sort of seems like a bandaid.</p>



<a name="192091328"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/New%20validation%20error%20%22Unsupported%20fixed%20pattern%20type...%22/near/192091328" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/New.20validation.20error.20.22Unsupported.20fixed.20pattern.20type.2E.2E.2E.22.html#192091328">(Mar 27 2020 at 23:12)</a>:</h4>
<p>I may make a pull request just to fix the method name - buildPattternExpression has one two many 't's. :)</p>



<a name="192099616"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/New%20validation%20error%20%22Unsupported%20fixed%20pattern%20type...%22/near/192099616" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/New.20validation.20error.20.22Unsupported.20fixed.20pattern.20type.2E.2E.2E.22.html#192099616">(Mar 28 2020 at 01:56)</a>:</h4>
<p>We just introduced a feature in FSH and SUSHI that makes pattern much more prevalent, under the understanding that pattern was generally preferred since it usually accomplished what the author wanted while not being overly constraining. When we proposed this earlier, no one mentioned this limitation of the publisher. Do we need to revisit this in FSH? Should we warn users when they use patterns on apparently unsupported types? Or can the publisher easily add more robust support for patterns?</p>



<a name="192100603"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/New%20validation%20error%20%22Unsupported%20fixed%20pattern%20type...%22/near/192100603" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/New.20validation.20error.20.22Unsupported.20fixed.20pattern.20type.2E.2E.2E.22.html#192100603">(Mar 28 2020 at 02:24)</a>:</h4>
<p>publisher can easily add it. We just haven't got around to it yet.</p>



<a name="192100605"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/New%20validation%20error%20%22Unsupported%20fixed%20pattern%20type...%22/near/192100605" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/New.20validation.20error.20.22Unsupported.20fixed.20pattern.20type.2E.2E.2E.22.html#192100605">(Mar 28 2020 at 02:24)</a>:</h4>
<p>it's called JIT programming ;-)</p>



<a name="192197177"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/New%20validation%20error%20%22Unsupported%20fixed%20pattern%20type...%22/near/192197177" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/New.20validation.20error.20.22Unsupported.20fixed.20pattern.20type.2E.2E.2E.22.html#192197177">(Mar 29 2020 at 22:23)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> - if it doesn’t require in depth knowledge of the publisher, maybe someone on my team can do it. Is it pretty straight forward?</p>



<a name="192197359"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/New%20validation%20error%20%22Unsupported%20fixed%20pattern%20type...%22/near/192197359" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/New.20validation.20error.20.22Unsupported.20fixed.20pattern.20type.2E.2E.2E.22.html#192197359">(Mar 29 2020 at 22:28)</a>:</h4>
<p>not particularly straight forward</p>



<a name="192197440"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/New%20validation%20error%20%22Unsupported%20fixed%20pattern%20type...%22/near/192197440" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/New.20validation.20error.20.22Unsupported.20fixed.20pattern.20type.2E.2E.2E.22.html#192197440">(Mar 29 2020 at 22:30)</a>:</h4>
<p>Darn.</p>



<a name="192197509"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/New%20validation%20error%20%22Unsupported%20fixed%20pattern%20type...%22/near/192197509" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/New.20validation.20error.20.22Unsupported.20fixed.20pattern.20type.2E.2E.2E.22.html#192197509">(Mar 29 2020 at 22:32)</a>:</h4>
<p>I can do it. We just haven't had anyone using pattern on much other than CodeableConcept, Identifier and ContactPoint. It's been on the list to do when we don't have anything else to do or when someone tries to use one of them</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
