---
layout: page
title: "FHIR Chat  · DSTU2 IG: Trouble Expanding Inline Value Sets · IG creation"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/index.html">IG creation</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/DSTU2.20IG.3A.20Trouble.20Expanding.20Inline.20Value.20Sets.html">DSTU2 IG: Trouble Expanding Inline Value Sets</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="154015338"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/DSTU2%20IG%3A%20Trouble%20Expanding%20Inline%20Value%20Sets/near/154015338" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/DSTU2.20IG.3A.20Trouble.20Expanding.20Inline.20Value.20Sets.html#154015338">(Nov 02 2018 at 23:56)</a>:</h4>
<p>I get the errors like the following when defining DSTU2 ValueSets w/ inline code systems:</p>
<blockquote>
<p><strong>Path:</strong> shr-simple-InlineValueSetVS <br>
<strong>Severity:</strong> error<br>
<strong>Message:</strong> Error from server: Unable to provide support for code system <a href="http://simple.org/shr/simple/cs/InlineValueSetCS" target="_blank" title="http://simple.org/shr/simple/cs/InlineValueSetCS">http://simple.org/shr/simple/cs/InlineValueSetCS</a></p>
</blockquote>
<p>This is an inline value set -- so it should be expanded using the inline definition (not the tx server).  Here is an example of the valueset definition that causes this error.  It's certainly possible that I am doing something wrong:</p>
<div class="codehilite"><pre><span></span>{
  &quot;resourceType&quot;: &quot;ValueSet&quot;,
  &quot;id&quot;: &quot;shr-simple-InlineValueSetVS&quot;,
  &quot;text&quot;: {
    &quot;status&quot;: &quot;generated&quot;,
    &quot;div&quot;: &quot;&lt;div xmlns=\&quot;http://www.w3.org/1999/xhtml\&quot;&gt;\n&lt;p&gt;&lt;b&gt;SIMPLE InlineValueSetVS ValueSet&lt;/b&gt;&lt;/p&gt;\n&lt;p&gt;&lt;/p&gt;\n&lt;/div&gt;&quot;
  },
  &quot;url&quot;: &quot;http://simple.org/shr/simple/vs/InlineValueSetVS&quot;,
  &quot;identifier&quot;: {
    &quot;system&quot;: &quot;http://simple.org&quot;,
    &quot;value&quot;: &quot;shr.simple.InlineValueSetVS&quot;
  },
  &quot;name&quot;: &quot;SIMPLE InlineValueSetVS ValueSet&quot;,
  &quot;status&quot;: &quot;draft&quot;,
  &quot;publisher&quot;: &quot;Simple Publisher&quot;,
  &quot;contact&quot;: [
    {
      &quot;telecom&quot;: [
        {
          &quot;system&quot;: &quot;other&quot;,
          &quot;value&quot;: &quot;http://example.com&quot;
        }
      ]
    }
  ],
  &quot;date&quot;: &quot;2018-11-02&quot;,
  &quot;codeSystem&quot;: {
    &quot;system&quot;: &quot;http://simple.org/shr/simple/cs/InlineValueSetCS&quot;,
    &quot;caseSensitive&quot;: true,
    &quot;concept&quot;: [
      {
        &quot;code&quot;: &quot;foo&quot;,
        &quot;definition&quot;: &quot;Foo Something&quot;,
        &quot;display&quot;: &quot;Foo Something&quot;
      },
      {
        &quot;code&quot;: &quot;bar&quot;,
        &quot;definition&quot;: &quot;Bar Something Else&quot;,
        &quot;display&quot;: &quot;Bar Something Else&quot;
      }
    ]
  }
}
</pre></div>


<p>Any suggestions are appreciated...DSTU2 IG: Trouble Expanding Inline Value Sets</p>



<a name="154017048"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/DSTU2%20IG%3A%20Trouble%20Expanding%20Inline%20Value%20Sets/near/154017048" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/DSTU2.20IG.3A.20Trouble.20Expanding.20Inline.20Value.20Sets.html#154017048">(Nov 09 2018 at 06:43)</a>:</h4>
<p>maybe I'm having problem with the version conversion? standard question... how to reproduce?</p>



<a name="154018098"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/DSTU2%20IG%3A%20Trouble%20Expanding%20Inline%20Value%20Sets/near/154018098" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/DSTU2.20IG.3A.20Trouble.20Expanding.20Inline.20Value.20Sets.html#154018098">(Nov 13 2018 at 18:24)</a>:</h4>
<p>I'll try to get you something that reproduces it.</p>



<a name="154019294"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/DSTU2%20IG%3A%20Trouble%20Expanding%20Inline%20Value%20Sets/near/154019294" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/DSTU2.20IG.3A.20Trouble.20Expanding.20Inline.20Value.20Sets.html#154019294">(Nov 16 2018 at 22:03)</a>:</h4>
<p>It turns out that this is (somewhat) reproducible in the <code>tests/ig10</code> (DSTU2) IG in the main FHIR code base.  More specifically, this is the value set with the inline codesystem: <a href="https://github.com/HL7/fhir/blob/master/tests/ig10/resources/test-ig-vs.xml" target="_blank" title="https://github.com/HL7/fhir/blob/master/tests/ig10/resources/test-ig-vs.xml">https://github.com/HL7/fhir/blob/master/tests/ig10/resources/test-ig-vs.xml</a></p>
<p>When you run the publisher on this IG, the QA reports the following error:<br>
<a href="/user_uploads/10155/YOPQS8vWOudNz-VQylSYvNmV/pasted_image.png" target="_blank" title="pasted_image.png">pasted image</a> </p>
<div class="message_inline_image"><a href="/user_uploads/10155/YOPQS8vWOudNz-VQylSYvNmV/pasted_image.png" target="_blank" title="pasted image"><img src="/user_uploads/10155/YOPQS8vWOudNz-VQylSYvNmV/pasted_image.png"></a></div><p>And if you look at the resulting documentation, you can see that it failed to render the codes:<br>
<a href="/user_uploads/10155/gnpvcoFOylx5c98qT4lCM7Gz/pasted_image.png" target="_blank" title="pasted_image.png">pasted image</a></p>
<div class="message_inline_image"><a href="/user_uploads/10155/gnpvcoFOylx5c98qT4lCM7Gz/pasted_image.png" target="_blank" title="pasted image"><img src="/user_uploads/10155/gnpvcoFOylx5c98qT4lCM7Gz/pasted_image.png"></a></div>



<a name="154025692"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/DSTU2%20IG%3A%20Trouble%20Expanding%20Inline%20Value%20Sets/near/154025692" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/DSTU2.20IG.3A.20Trouble.20Expanding.20Inline.20Value.20Sets.html#154025692">(Dec 14 2018 at 20:00)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> -- I assume you haven't had time to look at this.  Should I file an official issue for it in GForge?</p>



<a name="154025700"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/DSTU2%20IG%3A%20Trouble%20Expanding%20Inline%20Value%20Sets/near/154025700" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/DSTU2.20IG.3A.20Trouble.20Expanding.20Inline.20Value.20Sets.html#154025700">(Dec 14 2018 at 20:16)</a>:</h4>
<p>yes you should. I'll be working on IG tooling once R4 is done (a few hours now!)</p>



<a name="154025728"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/DSTU2%20IG%3A%20Trouble%20Expanding%20Inline%20Value%20Sets/near/154025728" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/DSTU2.20IG.3A.20Trouble.20Expanding.20Inline.20Value.20Sets.html#154025728">(Dec 14 2018 at 21:45)</a>:</h4>
<p>Woah!  Down to the final hours.  Nice!</p>



<a name="154025763"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/DSTU2%20IG%3A%20Trouble%20Expanding%20Inline%20Value%20Sets/near/154025763" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/DSTU2.20IG.3A.20Trouble.20Expanding.20Inline.20Value.20Sets.html#154025763">(Dec 15 2018 at 00:41)</a>:</h4>
<p>Sort of.  Final hours to the content being 'done'.  Internal approval processes and publication will take another couple of weeks.</p>



<a name="154026944"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/DSTU2%20IG%3A%20Trouble%20Expanding%20Inline%20Value%20Sets/near/154026944" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/DSTU2.20IG.3A.20Trouble.20Expanding.20Inline.20Value.20Sets.html#154026944">(Dec 21 2018 at 16:23)</a>:</h4>
<p>GForge: <a href="https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=19812" target="_blank" title="https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=19812">https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=19812</a></p>



<a name="162374206"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/DSTU2%20IG%3A%20Trouble%20Expanding%20Inline%20Value%20Sets/near/162374206" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/DSTU2.20IG.3A.20Trouble.20Expanding.20Inline.20Value.20Sets.html#162374206">(Apr 02 2019 at 21:05)</a>:</h4>
<p>I've just noticed that a fix was applied for this issue (thanks!) -- but unfortunately, it does not fully address the problem. While we no longer get the access violation, there is still an error reported in the qa.html:<br>
<a href="/user_uploads/10155/XuIkX_Di_u8vEbKx6kdjuWTg/pasted_image.png" target="_blank" title="pasted_image.png">pasted image</a></p>
<div class="message_inline_image"><a href="/user_uploads/10155/XuIkX_Di_u8vEbKx6kdjuWTg/pasted_image.png" target="_blank" title="pasted image"><img src="/user_uploads/10155/XuIkX_Di_u8vEbKx6kdjuWTg/pasted_image.png"></a></div><p>In addition, the generated page for the value set has an error in the expansion section:<br>
<a href="/user_uploads/10155/dmTK-2aYuiF6h27xbwh_XQvI/pasted_image.png" target="_blank" title="pasted_image.png">pasted image</a></p>
<div class="message_inline_image"><a href="/user_uploads/10155/dmTK-2aYuiF6h27xbwh_XQvI/pasted_image.png" target="_blank" title="pasted image"><img src="/user_uploads/10155/dmTK-2aYuiF6h27xbwh_XQvI/pasted_image.png"></a></div><p>Since this is an inline-defined code system within the value set, it seems it should not be going to the terminology server to resolve it.  The definition of the code system (and full listing of the codes) is within the value set itself.</p>
<p>I've also updated the GForge issue with these comments (but no screenshots since it doesn't support it).</p>



<a name="162374676"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/DSTU2%20IG%3A%20Trouble%20Expanding%20Inline%20Value%20Sets/near/162374676" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/DSTU2.20IG.3A.20Trouble.20Expanding.20Inline.20Value.20Sets.html#162374676">(Apr 02 2019 at 21:10)</a>:</h4>
<p>I'll have a look</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
