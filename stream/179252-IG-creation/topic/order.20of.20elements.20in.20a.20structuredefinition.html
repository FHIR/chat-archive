---
layout: page
title: "FHIR Chat  · order of elements in a structuredefinition · IG creation"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/index.html">IG creation</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/order.20of.20elements.20in.20a.20structuredefinition.html">order of elements in a structuredefinition</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="215315510"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/order%20of%20elements%20in%20a%20structuredefinition/near/215315510" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael van der Zel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/order.20of.20elements.20in.20a.20structuredefinition.html#215315510">(Nov 02 2020 at 13:06)</a>:</h4>
<p>The IG publisher (and/or validator) used to accept elements not in the order they are in the resource. The latest version does check for the order. I fail to understand why the order of the elements are so important in a differential part of a structure definition. Why cannot I add a differential element in an AllergyIntolerance profile with a path like "note" before a path like "category"? I would expect the snapshot generation step to correct this for me.</p>



<a name="215322676"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/order%20of%20elements%20in%20a%20structuredefinition/near/215322676" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/order.20of.20elements.20in.20a.20structuredefinition.html#215322676">(Nov 02 2020 at 14:10)</a>:</h4>
<p>If the order is wrong, the instance is non-conformant.  It's reasonable for the tool to yell at you.  (And the logic of snapshot generation is so over-the-top complicated, that trying to accommodate for 'out of order' and 'fix' it isn't a super reasonable ask.</p>



<a name="215355189"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/order%20of%20elements%20in%20a%20structuredefinition/near/215355189" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/order.20of.20elements.20in.20a.20structuredefinition.html#215355189">(Nov 02 2020 at 17:58)</a>:</h4>
<p>I was not aware that order mattered in JSON.</p>



<a name="215355479"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/order%20of%20elements%20in%20a%20structuredefinition/near/215355479" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/order.20of.20elements.20in.20a.20structuredefinition.html#215355479">(Nov 02 2020 at 18:01)</a>:</h4>
<p>Order of elements in an array (e.g. order of elements in the snapshot or differential) matters regardless of syntax.  If it didn't, you couldn't differentiate first names from middle names in the collection of HumanName.given</p>



<a name="215355799"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/order%20of%20elements%20in%20a%20structuredefinition/near/215355799" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/order.20of.20elements.20in.20a.20structuredefinition.html#215355799">(Nov 02 2020 at 18:03)</a>:</h4>
<p>Yes I am confusing the instances with elements array.</p>



<a name="215362922"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/order%20of%20elements%20in%20a%20structuredefinition/near/215362922" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/order.20of.20elements.20in.20a.20structuredefinition.html#215362922">(Nov 02 2020 at 19:02)</a>:</h4>
<p>I think the confusion is that elements, while being in an array, are generally <em>keyed</em> (i.e., identifiable by <code>id</code>).  In theory, one should be able to reconstruct the element array in the correct order.  That said, IIRC, some parts of the publisher do not use <code>id</code> but use <code>path</code> and element order instead.  This is particularly important with slices; if nested parts of slices are out of order, then you can end up in a world of hurt because the publisher keeps track of the <em>last</em> <code>sliceName</code> and applies that to the following elements until the path goes out of scope of the slice or an element w/ a new <code>sliceName</code> is encountered.</p>



<a name="215839843"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/order%20of%20elements%20in%20a%20structuredefinition/near/215839843" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael van der Zel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/order.20of.20elements.20in.20a.20structuredefinition.html#215839843">(Nov 06 2020 at 12:37)</a>:</h4>
<p>Yes. Most elements are keyed, so the order is irrelevant then. For arrays the story is different. I understand that too.</p>



<a name="215845648"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/order%20of%20elements%20in%20a%20structuredefinition/near/215845648" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/order.20of.20elements.20in.20a.20structuredefinition.html#215845648">(Nov 06 2020 at 13:31)</a>:</h4>
<p>OK.  But just to be clear, <code>snapshot.element</code> and <code>differential.element</code> are arrays, so they need to be in the right order (even though each element may appear to be keyed).</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
