---
layout: page
title: "FHIR Chat  · Snapshot and Differential views --- for SearchParameters! · IG creation"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/index.html">IG creation</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Snapshot.20and.20Differential.20views.20---.20for.20SearchParameters!.html">Snapshot and Differential views --- for SearchParameters!</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="184689399"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Snapshot%20and%20Differential%20views%20---%20for%20SearchParameters%21/near/184689399" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Saul Kravitz <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Snapshot.20and.20Differential.20views.20---.20for.20SearchParameters!.html#184689399">(Jan 02 2020 at 22:25)</a>:</h4>
<p>SearchParameters are the Rodney Dangerfield of the FHIR IG specifications -- they don' t get no respect.   (OK, Capability Statements get even less respect).    Designing/understanding SearchParameters requires all of the same insights as designing/understanding the structure of the resources.</p>
<p>As a user, there is no place (within the IG world) that one can see the COMPLETE set of SearchParameters for a resource, or which SearchParameters have been redefined in the derived profile.  For a deep nesting of profiles    Profile B--&gt;Profile A--&gt; US Core Profile --&gt; R4 Profile...it is quite an odyssey to figure out the existing search parameters.</p>
<p>I suggest that an IG should include both Snapshot and Differential views of the search parameters for each profiled resource.</p>



<a name="184702899"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Snapshot%20and%20Differential%20views%20---%20for%20SearchParameters%21/near/184702899" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Snapshot.20and.20Differential.20views.20---.20for.20SearchParameters!.html#184702899">(Jan 03 2020 at 03:13)</a>:</h4>
<p>I think we defined the SPs in US Core pretty thoroughly as SHOULDs and SHALLs and went a step further and defined whether ands, or and includes as well as combinations.  I don't think there is an IG out there that has done that to this level.   But this does expose the shortcomings of how SPs are defined elsewhere including the FHIR Spec as well.  (The spec's sp  tables take some getting used to and hide most of the details. )</p>
<p>If you mean to have a differential and snapshot view for only a set of selected SPs defined in a IG - I think that is doable but if SPs are exposed in all their detail only in the  IG's I Think folks will be clamoring for more detail in the FHIR Spec as well.  Technically  this might make the spec an order of magnitude bigger than it already is and may not be manageable due to the volume of new files.</p>



<a name="184750279"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Snapshot%20and%20Differential%20views%20---%20for%20SearchParameters%21/near/184750279" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Snapshot.20and.20Differential.20views.20---.20for.20SearchParameters!.html#184750279">(Jan 03 2020 at 17:12)</a>:</h4>
<p>Search parameters aren't characteristics of a profile, they're characteristics of a server's capabilities for a particular resource.  I.e. search parameters exist at the level of Observation.  You can't define different search parameters for lab results vs. vitals vs. other types of Observations.  Expectations around search parameters are covered by CapabilityStatements.  And those don't have snapshot or differential.  A CapabilityStatement lists <em>all</em> expectations about what search parameters must be supported.</p>



<a name="184765047"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Snapshot%20and%20Differential%20views%20---%20for%20SearchParameters%21/near/184765047" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Snapshot.20and.20Differential.20views.20---.20for.20SearchParameters!.html#184765047">(Jan 03 2020 at 20:26)</a>:</h4>
<p>If the sp is derived from another. You certainly could have a differential view.</p>



<a name="184766275"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Snapshot%20and%20Differential%20views%20---%20for%20SearchParameters%21/near/184766275" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Snapshot.20and.20Differential.20views.20---.20for.20SearchParameters!.html#184766275">(Jan 03 2020 at 20:45)</a>:</h4>
<p>Not as the resources are defined, no.  There's no record of any delta.</p>



<a name="184767106"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Snapshot%20and%20Differential%20views%20---%20for%20SearchParameters%21/near/184767106" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Snapshot.20and.20Differential.20views.20---.20for.20SearchParameters!.html#184767106">(Jan 03 2020 at 20:57)</a>:</h4>
<p>Not as the resources are defined, no.  There's no record of any delta.</p>



<a name="184769349"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Snapshot%20and%20Differential%20views%20---%20for%20SearchParameters%21/near/184769349" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Snapshot.20and.20Differential.20views.20---.20for.20SearchParameters!.html#184769349">(Jan 03 2020 at 21:26)</a>:</h4>
<p>I meant you could generate a delta programmatically. But I agree there is nothing in the resource definition that defines it.</p>



<a name="184770990"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Snapshot%20and%20Differential%20views%20---%20for%20SearchParameters%21/near/184770990" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Snapshot.20and.20Differential.20views.20---.20for.20SearchParameters!.html#184770990">(Jan 03 2020 at 21:52)</a>:</h4>
<p>Generating a delta would be challenging.  The key elements are the expression and description and neither of those would be easy to diff.</p>



<a name="184773717"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Snapshot%20and%20Differential%20views%20---%20for%20SearchParameters%21/near/184773717" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Snapshot.20and.20Differential.20views.20---.20for.20SearchParameters!.html#184773717">(Jan 03 2020 at 22:38)</a>:</h4>
<p>I’m not sure I’d try to derive a so and then rewrite the expression.  I’m talking about all the extra stuff like ands , ors, comps,  mods and includes</p>



<a name="184775478"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Snapshot%20and%20Differential%20views%20---%20for%20SearchParameters%21/near/184775478" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Snapshot.20and.20Differential.20views.20---.20for.20SearchParameters!.html#184775478">(Jan 03 2020 at 23:11)</a>:</h4>
<p>You have to specify the expression even if deriving I think?</p>



<a name="184776901"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Snapshot%20and%20Differential%20views%20---%20for%20SearchParameters%21/near/184776901" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Saul Kravitz <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Snapshot.20and.20Differential.20views.20---.20for.20SearchParameters!.html#184776901">(Jan 03 2020 at 23:38)</a>:</h4>
<p>I think you are missing the point.   Unless you expect each profile to recapitulate all search parameters that are needed from the profiled resource, the poor implementer is left to perform the recursive union of all search parameters that are available.   </p>
<p>Why not provide a listing of all available search parameters in the IG, including those defined in the IG, and those defined in the resources that are profiled in the IG?    For example, the Formulary IG uses MedicationKnowledge which has a 'code' SP.   The only way to know this is to read both the FormularyIG and the R4 specification, unless the formulary recapitulates the 'code' SP.</p>



<a name="184776950"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Snapshot%20and%20Differential%20views%20---%20for%20SearchParameters%21/near/184776950" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Snapshot.20and.20Differential.20views.20---.20for.20SearchParameters!.html#184776950">(Jan 03 2020 at 23:39)</a>:</h4>
<p>A profiled resource won't list <em>any</em> search parameters at all.  Search parameters aren't tied to profiles.  They're tied to CapabilityStatements.  And CapabilityStatements <em>will</em> list each and every search parameter (for each and every resource) that systems that conform to that CapabilityStatement are expected to implement.</p>



<a name="184777030"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Snapshot%20and%20Differential%20views%20---%20for%20SearchParameters%21/near/184777030" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Snapshot.20and.20Differential.20views.20---.20for.20SearchParameters!.html#184777030">(Jan 03 2020 at 23:40)</a>:</h4>
<p>There is no recursive search.  The CapabilityStatement will list everything relevant.  There's no mechanism for inheriting search parameters from a higher-level CapabilityStatement (though you can assert conformance with another CapabilityStatement).</p>



<a name="184786950"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Snapshot%20and%20Differential%20views%20---%20for%20SearchParameters%21/near/184786950" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Snapshot.20and.20Differential.20views.20---.20for.20SearchParameters!.html#184786950">(Jan 04 2020 at 04:07)</a>:</h4>
<p>Well I think you could summarize / aggregate all the conformance in a single view but that would be bit of effort.  It might be simpler faster to just run a series of test queries on a server to discover its capabilities.   In fact that is what Crucible does. You get actual vs expected. .</p>



<a name="184787050"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Snapshot%20and%20Differential%20views%20---%20for%20SearchParameters%21/near/184787050" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Snapshot.20and.20Differential.20views.20---.20for.20SearchParameters!.html#184787050">(Jan 04 2020 at 04:10)</a>:</h4>
<p>I think the audience for ig capstatements is pretty small but important group. The server implementing the ig and the testers.</p>



<a name="184816868"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Snapshot%20and%20Differential%20views%20---%20for%20SearchParameters%21/near/184816868" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Snapshot.20and.20Differential.20views.20---.20for.20SearchParameters!.html#184816868">(Jan 04 2020 at 19:42)</a>:</h4>
<p>I can see what <span class="user-mention" data-user-id="215604">@Saul Kravitz</span> is getting at, but it seems difficult to know quite where it would fit, since it's not profile specific</p>



<a name="184824589"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Snapshot%20and%20Differential%20views%20---%20for%20SearchParameters%21/near/184824589" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Snapshot.20and.20Differential.20views.20---.20for.20SearchParameters!.html#184824589">(Jan 04 2020 at 23:39)</a>:</h4>
<p>In US Core we actually expose the derived SP definitions in the narrative which would be akin to snapshot in my opinion.  They are all referenced in the CapStatements and in the Profile narratives.   We also added in  a bunch of conformance language around the different bits.   I think it would be possible to highlight the elements that are specific to the base definition which would be like the delta.  But I question whether clients would use it or just do their own discovery by trial and error?</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
