---
layout: page
title: "FHIR Chat  · pipeline scripting · IG creation"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/index.html">IG creation</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/pipeline.20scripting.html">pipeline scripting</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="229316660"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/pipeline%20scripting/near/229316660" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/pipeline.20scripting.html#229316660">(Mar 08 2021 at 15:28)</a>:</h4>
<p><span class="user-mention" data-user-id="203235">@Ward Weistra</span> does the Firely Terminal have the capability of being able to validate a FHIR package. It's a bit of a wierd question, but it is about getting faster from the IG to the demo setup. Currently, the IGPublisher (CI) setup allows a FHIR package to contain invalid FHIR resources (<span class="user-mention" data-user-id="191832">@Jose Costa Teixeira</span> should listen in on this). What I would like to build (or expand) is a pipeline that takes the output from the IG publisher (being the NPM package) - and validates whether the package contains example resources that cannot be parsed and so forth. If the package does contain invalid examples or invalid sdf's the pipeline should probably email someone responsible. If the package does NOT contain invalid resources/examples, the pipeline should proceed and spin up eg. a HAPI FHIR server with the current state of the IG and eg. enable validation of the resources.</p>
<p>If Firely Terminal does support the feature of being able to validate a package, please ping me (in that case I'll wrap it in docker and take it from there). If not, I'll probably just build the tooling myself.</p>



<a name="229317541"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/pipeline%20scripting/near/229317541" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/pipeline.20scripting.html#229317541">(Mar 08 2021 at 15:33)</a>:</h4>
<p>The whole idea is to make the IG as <strong>executable</strong> as fast as possible</p>



<a name="229449786"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/pipeline%20scripting/near/229449786" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ward Weistra <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/pipeline.20scripting.html#229449786">(Mar 09 2021 at 09:51)</a>:</h4>
<p><span class="user-mention" data-user-id="191427">@Jens Villadsen</span> Good stuff. <a href="https://docs.fire.ly/projects/Firely-Terminal/">Firely Terminal</a> has the option to <a href="https://docs.fire.ly/projects/Firely-Terminal/Commands/Quality-Control/Validate.html">validate resource one-by-one</a> (<code>fhir validate</code>). And with the next Terminal release we're adding <a href="https://fire.ly/2021/03/04/quality-control-how-to-validate-full-fhir-specifications-in-one-click/">Quality Control</a> to that, including the option for bulk validation and checking any other FHIRPath rules (<code>fhir check</code>).</p>
<p>Before validation you'll want to make sure you install the package dependencies (<code>fhir restore</code> which reads the package.json and installs the dependencies listed)</p>



<a name="229450065"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/pipeline%20scripting/near/229450065" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ward Weistra <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/pipeline.20scripting.html#229450065">(Mar 09 2021 at 09:53)</a>:</h4>
<p><code>fhir check</code> will be a Firely Terminal option that is customer-only (any <a href="https://simplifier.net/pricing">Simplifier.net plan</a>), which shouldn't be a problem for you, but perhaps if you want to have others without a license using it.</p>



<a name="229471671"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/pipeline%20scripting/near/229471671" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/pipeline.20scripting.html#229471671">(Mar 09 2021 at 12:56)</a>:</h4>
<p>Hmmm ... thats good news and not-so-good news at the same time. I have full understanding for your choices of licensing. You choice however probably pulls me in the direction that I'll have to cook it up myself so that it can go in anyones pipeline - but thx for the response</p>



<a name="229483482"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/pipeline%20scripting/near/229483482" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ward Weistra <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/pipeline.20scripting.html#229483482">(Mar 09 2021 at 14:18)</a>:</h4>
<p>And I understand that <span class="user-mention" data-user-id="191427">@Jens Villadsen</span> . We'll publish a Github Actions pipeline soon on how to use Firely Terminal for bulk validation on every commit/PR. Perhaps as inspiration.</p>



<a name="232483147"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/pipeline%20scripting/near/232483147" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/pipeline.20scripting.html#232483147">(Mar 30 2021 at 19:26)</a>:</h4>
<blockquote>
<p>Currently, the IGPublisher (CI) setup allows a FHIR package to contain invalid FHIR resources</p>
</blockquote>
<p>Uhh? <span class="user-mention" data-user-id="191427">@Jens Villadsen</span> it shouldn't allow this without notifying the IG author via qa.html</p>



<a name="232497495"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/pipeline%20scripting/near/232497495" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/pipeline.20scripting.html#232497495">(Mar 30 2021 at 21:01)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span>  It does make some noise in the qa page. The problem I encountered was invalid example resources, specifically, and those are part of the IG eventhough I would recommed to blacklist them in the resulting package. Bear in mind - I'm trying to automate stuff here - not bombarding an IG author. The thing is that (I imagine) while only computable profiles are part of the package, invalid example resources are also part the package, which breaks my build chain currently. Hence the need for a tool that can detect and/or remove invalid example resources as they stop the process of automatically rolling out a FHIR server with the validation capabilities of the IG</p>



<a name="232497870"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/pipeline%20scripting/near/232497870" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/pipeline.20scripting.html#232497870">(Mar 30 2021 at 21:04)</a>:</h4>
<p>I'm interested in other people's opinions on this. I could either:</p>
<ul>
<li>ignore Jens</li>
<li>restrict what goes in packages to only valid resources for examples</li>
<li>restrict what goes in packages to only valid resources </li>
<li>create a special package that only contains valid resources</li>
</ul>
<p>One of the tricky things about this is that different people will care about different errors. e.g. most people won't care about a wrong code, or a broken link, but others will</p>



<a name="232499757"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/pipeline%20scripting/near/232499757" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/pipeline.20scripting.html#232499757">(Mar 30 2021 at 21:17)</a>:</h4>
<p>What constitutes 'valid' is a hard thing to say.  The validator continues to evolve and get smarter - what it catches today and what it caught two years ago aren't the same.  Terminologies can also evolve in ways that make instances valid or invalid.  Finally, there are some rules that automated validators might never be able to detect - or at least that require human review.  For example, having bad codes for an extensible binding.</p>
<p>Also, sometimes an IG might <em>deliberately</em> have invalid examples - to show what not to do, to show ramifications of certain inputs, etc.</p>
<p>If a server wants to have rules that it will only store instances that pass its own validation rules, then I think that's an obligation for the server.  If an IG published with instances that don't meet those rules, the server is free to kick them out.  It's also free to reconsider what data it stores as its own rules evolve.</p>



<a name="232500704"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/pipeline%20scripting/near/232500704" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/pipeline.20scripting.html#232500704">(Mar 30 2021 at 21:25)</a>:</h4>
<p>could this be a command line argument? <br>
--ignore-errors (default) / --skip-invalid-examples / --skip-invalid... /--use-qa</p>



<a name="232500926"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/pipeline%20scripting/near/232500926" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/pipeline.20scripting.html#232500926">(Mar 30 2021 at 21:27)</a>:</h4>
<p>--use-qa: only skip the errors that are in the ignore-warnings (if ignore-warnings can also contain errors to skip</p>



<a name="232501269"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/pipeline%20scripting/near/232501269" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/pipeline.20scripting.html#232501269">(Mar 30 2021 at 21:30)</a>:</h4>
<p>Or perhaps a simple option /ig parameter "-skip-validation-errors" (default=true). If false, the publisher will return some error code ( not 0) and the pipeline can detect it</p>



<a name="232503438"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/pipeline%20scripting/near/232503438" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/pipeline.20scripting.html#232503438">(Mar 30 2021 at 21:50)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> I thought you already <em>did</em> ignore me ;)<br>
I agree that context is everything here (as always), and yes, different people are with different needs. I <em>could</em> actually <em>just</em> (for once) ignore <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> / <span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> and just hack my way through it by making a PR to HAPI FHIR that parameterizes how the IG loading capacity should treat examples and take it from there. In my case, invalid examples are worthless, as they clutter up the picture by being present on a testing server that should only show what is actually considered valid.</p>



<a name="232503719"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/pipeline%20scripting/near/232503719" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/pipeline.20scripting.html#232503719">(Mar 30 2021 at 21:53)</a>:</h4>
<p>As a bonus info, the HAPI FHIR starter project may not be the only piece of software that is able to be bootstrapped within seconds with an entire range of IG's. Something tells me that AWS is also looking into this: <a href="https://github.com/awslabs/fhir-works-on-aws-deployment/commit/393846b8edd6b9d1a016a8968c8b163c3ba61658">https://github.com/awslabs/fhir-works-on-aws-deployment/commit/393846b8edd6b9d1a016a8968c8b163c3ba61658</a></p>



<a name="232504197"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/pipeline%20scripting/near/232504197" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/pipeline.20scripting.html#232504197">(Mar 30 2021 at 21:57)</a>:</h4>
<blockquote>
<p>I thought you already did ignore me ;)</p>
</blockquote>
<p>I only pretend to some times.</p>



<a name="232504592"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/pipeline%20scripting/near/232504592" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/pipeline.20scripting.html#232504592">(Mar 30 2021 at 22:00)</a>:</h4>
<p>Anyways - keep me posted if you actually intend to do something about this. <span class="user-mention" data-user-id="191832">@Jose Costa Teixeira</span> from top of my head, it sounds a bit intimidating if running with a parameter that is not default can change the result - while that may only sound intimidating to me.</p>



<a name="232504643"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/pipeline%20scripting/near/232504643" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/pipeline.20scripting.html#232504643">(Mar 30 2021 at 22:01)</a>:</h4>
<p>Maybe that would actually be the correct way to do it for this particular task</p>



<a name="232504678"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/pipeline%20scripting/near/232504678" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/pipeline.20scripting.html#232504678">(Mar 30 2021 at 22:01)</a>:</h4>
<p>Unless I just fix it with adjusting HAPI.</p>



<a name="232504800"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/pipeline%20scripting/near/232504800" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/pipeline.20scripting.html#232504800">(Mar 30 2021 at 22:02)</a>:</h4>
<p>I suspect that the answer lies in reading the package. What if I add validity information to .index.json?</p>



<a name="232504845"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/pipeline%20scripting/near/232504845" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/pipeline.20scripting.html#232504845">(Mar 30 2021 at 22:02)</a>:</h4>
<p>That could actually work</p>



<a name="232504930"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/pipeline%20scripting/near/232504930" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/pipeline.20scripting.html#232504930">(Mar 30 2021 at 22:03)</a>:</h4>
<p>I mean ... it wouldn't hurt to actually have a machine readable format of the QA page</p>



<a name="232504955"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/pipeline%20scripting/near/232504955" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/pipeline.20scripting.html#232504955">(Mar 30 2021 at 22:03)</a>:</h4>
<p>and that would fit the bill to my setup</p>



<a name="232505067"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/pipeline%20scripting/near/232505067" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/pipeline.20scripting.html#232505067">(Mar 30 2021 at 22:04)</a>:</h4>
<p>well, there is qa.json, you know. but it's probably not organised right for what you want</p>



<a name="232505111"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/pipeline%20scripting/near/232505111" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/pipeline.20scripting.html#232505111">(Mar 30 2021 at 22:04)</a>:</h4>
<p>not it doesn't have what you need at all.</p>



<a name="232505173"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/pipeline%20scripting/near/232505173" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/pipeline.20scripting.html#232505173">(Mar 30 2021 at 22:05)</a>:</h4>
<p>qa.xml does, but not nice</p>



<a name="232505418"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/pipeline%20scripting/near/232505418" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/pipeline.20scripting.html#232505418">(Mar 30 2021 at 22:07)</a>:</h4>
<p>no .. its 'not nice'</p>



<a name="232505677"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/pipeline%20scripting/near/232505677" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/pipeline.20scripting.html#232505677">(Mar 30 2021 at 22:09)</a>:</h4>
<p>and qa.json is .... too slim</p>



<a name="232512087"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/pipeline%20scripting/near/232512087" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/pipeline.20scripting.html#232512087">(Mar 30 2021 at 23:12)</a>:</h4>
<p>An OperationOutcome from hell? :)  Or perhaps a Bundle of OperationOutcomes - one per resource?</p>



<a name="232541460"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/pipeline%20scripting/near/232541460" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Egger <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/pipeline.20scripting.html#232541460">(Mar 31 2021 at 06:10)</a>:</h4>
<p>we currently test our validator setup with testing all ig examples against it (and exclude in the test setup explicitly which examples we know fail due to that they already have errors), so if we could get that information from the package in some way that would very nice.</p>



<a name="232581279"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/pipeline%20scripting/near/232581279" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/pipeline.20scripting.html#232581279">(Mar 31 2021 at 12:29)</a>:</h4>
<p>I deliberately put in non conforming resources to show the edges of what to test. I don't mind needing some way to tag them as deliberately non conforming.</p>



<a name="232712661"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/pipeline%20scripting/near/232712661" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Martijn Harthoorn <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/pipeline.20scripting.html#232712661">(Apr 01 2021 at 07:02)</a>:</h4>
<p>.index.json is intened to be generated - or even regenerated by multiple tools. If we want to keep .index.json cross tool compatible, we should be very conservative in making changes there.<br>
I would also suggest that reading a resource always has the risk of being not valid. It's something every piece of software should deal with.<br>
However we might add a marker in package.json to at least state that it's a preview/alpha/untested/non-qa package</p>



<a name="233619157"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/pipeline%20scripting/near/233619157" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/pipeline.20scripting.html#233619157">(Apr 08 2021 at 08:32)</a>:</h4>
<p>Or a new json file beside the index, so regeneration doesn't lose the data. The bundle of OperationOutcome almost feels like a good idea.<br>
The could pick what violations you can accept...</p>



<a name="235421942"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/pipeline%20scripting/near/235421942" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/pipeline.20scripting.html#235421942">(Apr 20 2021 at 21:48)</a>:</h4>
<p>ok so from the next IG publisher release, it will add two new files to the package it produces:</p>
<p>/other/validation-summary.json<br>
/other/validation-oo.json</p>
<p>ValidationSummary is an easy to read JSON file with an entry for each resource like this:</p>
<div class="codehilite" data-code-language="JSON"><pre><span></span><code> <span class="nt">"{type}/{id}"</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">"errors"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="nt">"warnings"</span><span class="p">:</span> <span class="mi">1</span>
  <span class="p">},</span>
</code></pre></div>
<p>validation-oo.json is a bundle of OperationOutcomes, one for each resource, like this:</p>
<div class="codehilite" data-code-language="JSON"><pre><span></span><code>    <span class="p">{</span>
      <span class="nt">"fullUrl"</span> <span class="p">:</span> <span class="s2">"{ig-canonical}/OperationOutcome/{type}-{id}"</span><span class="p">,</span>
      <span class="nt">"resource"</span> <span class="p">:</span> <span class="p">{</span>
        <span class="nt">"resourceType"</span> <span class="p">:</span> <span class="s2">"OperationOutcome"</span><span class="p">,</span>
        <span class="nt">"id"</span> <span class="p">:</span> <span class="s2">"{type}-{id}"</span><span class="p">,</span>
        <span class="nt">"issue"</span> <span class="p">:</span> <span class="p">[</span>
          <span class="err">errors</span> <span class="err">a</span><span class="kc">n</span><span class="err">d</span> <span class="err">war</span><span class="kc">n</span><span class="err">i</span><span class="kc">n</span><span class="err">gs</span>
        <span class="p">]</span>
      <span class="p">}</span>
    <span class="p">},</span>
</code></pre></div>
<p>if there's no errors or warnings, then there'll be be no issue property</p>



<a name="235424315"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/pipeline%20scripting/near/235424315" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/pipeline.20scripting.html#235424315">(Apr 20 2021 at 22:11)</a>:</h4>
<p>Is there a reason it needs to go in /other rather than /output or /temp?  (I'd prefer to keep directory clutter to a minimum.)</p>
<p>Also, what's the driver for having this in a more computable form?</p>



<a name="235424866"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/pipeline%20scripting/near/235424866" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/pipeline.20scripting.html#235424866">(Apr 20 2021 at 22:16)</a>:</h4>
<p>it's in the package not the directory structure. And the driver is further back in this thread, people having problems with processing the packages because the IG publisher will produce IG packages with invalid resources</p>



<a name="235425206"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/pipeline%20scripting/near/235425206" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/pipeline.20scripting.html#235425206">(Apr 20 2021 at 22:20)</a>:</h4>
<p>My brain interpreted "to the package" as "to the generated output".  Sorry for not paying more attention.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
