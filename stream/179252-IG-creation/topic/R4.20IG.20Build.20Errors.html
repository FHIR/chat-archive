---
layout: page
title: "FHIR Chat  · R4 IG Build Errors · IG creation"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/index.html">IG creation</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/R4.20IG.20Build.20Errors.html">R4 IG Build Errors</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="154011901"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/R4%20IG%20Build%20Errors/near/154011901" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/R4.20IG.20Build.20Errors.html#154011901">(Oct 24 2018 at 15:34)</a>:</h4>
<p>my diagnosticreport examples are failing in the latest ig-pub </p>
<p>e.g..urinalysis json example passes $validate and even tried as xml example whichpasses r4 schema.</p>
<div class="codehilite"><pre><span></span>Stack Dump (for debugging):                                                      (00:01:14.0423sec)
java.lang.Exception: Unable to determine type for  /Users/ehaas/Documents/FHIR/US-Core-R4/source/examples/urinalysis: com.google.gson.JsonArray cannot be cast to com.google.gson.JsonObject
    at org.hl7.fhir.igtools.publisher.Publisher.loadAsElementModel(Publisher.java:2394)
    at org.hl7.fhir.igtools.publisher.Publisher.load(Publisher.java:1778)
    at org.hl7.fhir.igtools.publisher.Publisher.createIg(Publisher.java:582)
    at org.hl7.fhir.igtools.publisher.Publisher.execute(Publisher.java:526)
    at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:4925)
Caused by: java.lang.ClassCastException: com.google.gson.JsonArray cannot be cast to com.google.gson.JsonObject
    at com.google.gson.JsonObject.getAsJsonObject(JsonObject.java:182)
    at org.hl7.fhir.r4.formats.JsonParser.parseDiagnosticReportProperties(JsonParser.java:9539)
    at org.hl7.fhir.r4.formats.JsonParser.parseDiagnosticReport(JsonParser.java:9516)
    at org.hl7.fhir.r4.formats.JsonParser.parseResource(JsonParser.java:27504)
    at org.hl7.fhir.r4.formats.JsonParserBase.parse(JsonParserBase.java:92)
    at org.hl7.fhir.r4.formats.ParserBase.parse(ParserBase.java:58)
    at org.hl7.fhir.r4.elementmodel.ObjectConverter.convert(ObjectConverter.java:90)
    at org.hl7.fhir.igtools.publisher.Publisher.loadAsElementModel(Publisher.java:2387)
    ... 4 more
Exception in thread &quot;main&quot; java.lang.NullPointerException
    at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:4935)
Erics-Air-2:US-Core-R4 ehaas$
</pre></div>


<p>I know that I've recently updated category to 0..* but that is not the issue.</p>
<p>Can see the examples from the last good build here... <a href="http://build.fhir.org/ig/HL7/US-Core-R4/" target="_blank" title="http://build.fhir.org/ig/HL7/US-Core-R4/">http://build.fhir.org/ig/HL7/US-Core-R4/</a></p>



<a name="154012067"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/R4%20IG%20Build%20Errors/near/154012067" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/R4.20IG.20Build.20Errors.html#154012067">(Oct 25 2018 at 03:48)</a>:</h4>
<p>I've seen this before.  I think it was fixed by wiping the temp and  output folders, but don't remember for sure...</p>



<a name="154012217"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/R4%20IG%20Build%20Errors/near/154012217" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Power <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/R4.20IG.20Build.20Errors.html#154012217">(Oct 25 2018 at 16:52)</a>:</h4>
<p><span class="user-mention" data-user-id="191401">@Eric Haas</span> <span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> I am seeing this same error.  Locally I tried Lloyds suggestion of wiping temp and output, but still fails.  Also fails with the same error <a href="http://build.fhir.org/ig/HL7/genomics-reporting/build.log" target="_blank" title="http://build.fhir.org/ig/HL7/genomics-reporting/build.log">http://build.fhir.org/ig/HL7/genomics-reporting/build.log</a></p>



<a name="154012220"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/R4%20IG%20Build%20Errors/near/154012220" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/R4.20IG.20Build.20Errors.html#154012220">(Oct 25 2018 at 16:57)</a>:</h4>
<p>Ok.  This might be a substantive change to DiagnosticReport that requires <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> to update the code again :(</p>



<a name="154012238"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/R4%20IG%20Build%20Errors/near/154012238" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Power <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/R4.20IG.20Build.20Errors.html#154012238">(Oct 25 2018 at 18:27)</a>:</h4>
<p>For now, I just took out DiagnosticReport.category from our examples and it builds OK.  Not a great long term fix but OK for now.</p>



<a name="154012245"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/R4%20IG%20Build%20Errors/near/154012245" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/R4.20IG.20Build.20Errors.html#154012245">(Oct 25 2018 at 18:39)</a>:</h4>
<p>I have done the same ( removed the example for now) .. I have not tried a DR from the build however - in case my examples are incorrect.  FYI DR has several pending changes including  .context  0.1 --&gt; .encounter  0..*</p>



<a name="154012285"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/R4%20IG%20Build%20Errors/near/154012285" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/R4.20IG.20Build.20Errors.html#154012285">(Oct 25 2018 at 20:25)</a>:</h4>
<p>I think you meant context 0..* -&gt; encounter 0..1?  (Shouldn't be part of multiple encounters...)</p>



<a name="154012288"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/R4%20IG%20Build%20Errors/near/154012288" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/R4.20IG.20Build.20Errors.html#154012288">(Oct 25 2018 at 20:32)</a>:</h4>
<p>yes</p>



<a name="154013398"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/R4%20IG%20Build%20Errors/near/154013398" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/R4.20IG.20Build.20Errors.html#154013398">(Oct 29 2018 at 21:01)</a>:</h4>
<p>Also finding:</p>



<a name="154013399"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/R4%20IG%20Build%20Errors/near/154013399" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/R4.20IG.20Build.20Errors.html#154013399">(Oct 29 2018 at 21:01)</a>:</h4>
<p>10/29/2018 build notes:</p>
<p>HealthCareService examples not working </p>
<p>fixed example to pass latest R4 schema<br>
updated ig-publisher</p>
<p>commented out <code>eligibility</code>  as workaround</p>
<div class="codehilite"><pre><span></span>Stack Dump (for debugging):                                                      (38.0855sec)
java.lang.Exception: Unable to determine type for  /Users/ehaas/Documents/FHIR/VhDir/source/examples/healthcareservice-example-independencerehab1: com.google.gson.JsonArray cannot be cast to com.google.gson.JsonObject
    at org.hl7.fhir.igtools.publisher.Publisher.loadAsElementModel(Publisher.java:2394)
    at org.hl7.fhir.igtools.publisher.Publisher.load(Publisher.java:1778)
    at org.hl7.fhir.igtools.publisher.Publisher.createIg(Publisher.java:582)
    at org.hl7.fhir.igtools.publisher.Publisher.execute(Publisher.java:526)
    at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:4925)
Caused by: java.lang.ClassCastException: com.google.gson.JsonArray cannot be cast to com.google.gson.JsonObject
    at com.google.gson.JsonObject.getAsJsonObject(JsonObject.java:182)
    at org.hl7.fhir.r4.formats.JsonParser.parseHealthcareServiceProperties(JsonParser.java:13100)
    at org.hl7.fhir.r4.formats.JsonParser.parseHealthcareService(JsonParser.java:13025)
    at org.hl7.fhir.r4.formats.JsonParser.parseResource(JsonParser.java:27544)
    at org.hl7.fhir.r4.formats.JsonParserBase.parse(JsonParserBase.java:92)
    at org.hl7.fhir.r4.formats.ParserBase.parse(ParserBase.java:58)
    at org.hl7.fhir.r4.elementmodel.ObjectConverter.convert(ObjectConverter.java:90)
    at org.hl7.fhir.igtools.publisher.Publisher.loadAsElementModel(Publisher.java:2387)
    ... 4 more
Exception in thread &quot;main&quot; java.lang.NullPointerException
    at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:4935)
</pre></div>



<a name="154013563"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/R4%20IG%20Build%20Errors/near/154013563" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/R4.20IG.20Build.20Errors.html#154013563">(Oct 30 2018 at 08:16)</a>:</h4>
<p>Is that for the VhDir Eric?</p>



<a name="154013564"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/R4%20IG%20Build%20Errors/near/154013564" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/R4.20IG.20Build.20Errors.html#154013564">(Oct 30 2018 at 08:17)</a>:</h4>
<p>I would leave it a bit, as I'm about to put in the other core changes for it too.</p>



<a name="154013643"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/R4%20IG%20Build%20Errors/near/154013643" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/R4.20IG.20Build.20Errors.html#154013643">(Oct 30 2018 at 15:12)</a>:</h4>
<p>Ye, but it is not a big deal -  I have it up and running  updating with ballot comments and logged these build issues on GitHub so can keep track.</p>



<a name="154013652"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/R4%20IG%20Build%20Errors/near/154013652" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/R4.20IG.20Build.20Errors.html#154013652">(Oct 30 2018 at 15:18)</a>:</h4>
<p>I'm looking forward to getting that guide up and running in a few days once the dust clears from R4 core</p>



<a name="154017035"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/R4%20IG%20Build%20Errors/near/154017035" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/R4.20IG.20Build.20Errors.html#154017035">(Nov 09 2018 at 06:13)</a>:</h4>
<p>is this still a problem?</p>



<a name="154017112"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/R4%20IG%20Build%20Errors/near/154017112" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/R4.20IG.20Build.20Errors.html#154017112">(Nov 09 2018 at 12:24)</a>:</h4>
<p>I am still  getting errors with DiagnosticReport examples in R4.  The issue arrises in US-Core R4.  The example files are parked in the 'draft resources' folder.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
