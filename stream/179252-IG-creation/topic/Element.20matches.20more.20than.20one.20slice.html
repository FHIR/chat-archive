---
layout: page
title: "FHIR Chat  · Element matches more than one slice · IG creation"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/index.html">IG creation</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Element.20matches.20more.20than.20one.20slice.html">Element matches more than one slice</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="247585434"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Element%20matches%20more%20than%20one%20slice/near/247585434" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David deRoode <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Element.20matches.20more.20than.20one.20slice.html#247585434">(Jul 29 2021 at 13:49)</a>:</h4>
<p>I'm trying to add an entry slice to a profile based on CCDAonFHIR's Consult Note (@ Plan of Treatment.entry) to allow an entry conforming to the Dental ServiceRequest profile to be allowed as an optional entry reference. But I'm getting this error "Profile <a href="http://hl7.org/fhir/us/dental-data-exchange/StructureDefinition/dental-consult-note">http://hl7.org/fhir/us/dental-data-exchange/StructureDefinition/dental-consult-note</a>, Element matches more than one slice - sliceEntry, sliceEntry/dental_sliceEntry". Is my slicing definition incorrect, or is this an IG Publisher thing? CI Build is here: <a href="https://build.fhir.org/ig/HL7/dental-data-exchange/">https://build.fhir.org/ig/HL7/dental-data-exchange/</a></p>



<a name="247609181"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Element%20matches%20more%20than%20one%20slice/near/247609181" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Element.20matches.20more.20than.20one.20slice.html#247609181">(Jul 29 2021 at 16:45)</a>:</h4>
<p>It's an error on your part.  You've said that you're slicing entry by profile.  slice_entry includes the profile ServiceRequest and slice_entry_dental includes DentalServiceRequest, which is a proper constraint on ServiceRequest.  Therefore, you can have an instance that's valid in multiple slices - and that's not allowed.  When you have slicing, your slicing rules much be such that every element in an instance is valid against exactly one (or if slicing is open, against zero) of the slices.  Being valid against more than one isn't allowed.</p>



<a name="247617144"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Element%20matches%20more%20than%20one%20slice/near/247617144" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David deRoode <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Element.20matches.20more.20than.20one.20slice.html#247617144">(Jul 29 2021 at 17:44)</a>:</h4>
<p>Agreed, an instance should never be allowed to be valid against 2 profiles. That is not the intent here. In this case, instances must conform to DentalServiceRequest (and not base ServiceRequest). But disallowing reference to a base ServiceReqest when it is an allowable targetReference in the base profile is not allowed either. So, I'm stuck</p>



<a name="247620913"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Element%20matches%20more%20than%20one%20slice/near/247620913" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Element.20matches.20more.20than.20one.20slice.html#247620913">(Jul 29 2021 at 18:13)</a>:</h4>
<p>If it conforms to DentalServiceRequest, it automatically complies with ServiceRequest.  If you allow ServiceRequest, then saying you also allow DentalServiceRequest is unnecessary and redundant.</p>



<a name="247620934"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Element%20matches%20more%20than%20one%20slice/near/247620934" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Element.20matches.20more.20than.20one.20slice.html#247620934">(Jul 29 2021 at 18:13)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191320">Lloyd McKenzie</span> <a href="#narrow/stream/179252-IG-creation/topic/Element.20matches.20more.20than.20one.20slice/near/247609181">said</a>:</p>
<blockquote>
<p>It's an error on your part.  You've said that you're slicing entry by profile.  slice_entry includes the profile ServiceRequest and slice_entry_dental includes DentalServiceRequest, which is a proper constraint on ServiceRequest.  Therefore, you can have an instance that's valid in multiple slices - and that's not allowed...</p>
</blockquote>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> -- it's actually <code>sliceEntry/dental_sliceEntry</code>, so he is <em>re-slicing</em> the <code>sliceEntry</code> slice.  Isn't it valid for a reslice to discriminate based on a tighter constraint of the parent slice?  Or am I missing something here?</p>



<a name="247621133"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Element%20matches%20more%20than%20one%20slice/near/247621133" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Element.20matches.20more.20than.20one.20slice.html#247621133">(Jul 29 2021 at 18:14)</a>:</h4>
<p>I'll admit that I don't see the utility of it (since the slice doesn't specify any additional constraints/rules) -- but it doesn't seem invalid to me.</p>



<a name="247621176"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Element%20matches%20more%20than%20one%20slice/near/247621176" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Element.20matches.20more.20than.20one.20slice.html#247621176">(Jul 29 2021 at 18:15)</a>:</h4>
<p>I'm not sure what's being attempted.  But it's not accomplishing anything - the base spec allows a whole bunch of resources.  The derived spec isn't constraining that.  If you want to say "Hey, by the way, we'd like you to pay attention to this new profile in this context", you can do that in documentation, but you can't do that via slicing.  Slicing is about constraining what's allowed.  If you're not constraining, you can't use it.</p>



<a name="247625727"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Element%20matches%20more%20than%20one%20slice/near/247625727" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David deRoode <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Element.20matches.20more.20than.20one.20slice.html#247625727">(Jul 29 2021 at 18:54)</a>:</h4>
<p>The intent is to require references from plan_of_care.entry conform to DentalServiceRequest profile.</p>



<a name="247626809"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Element%20matches%20more%20than%20one%20slice/near/247626809" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Element.20matches.20more.20than.20one.20slice.html#247626809">(Jul 29 2021 at 19:03)</a>:</h4>
<p>Then you shouldn't be slicing, you should just be constraining the target type.</p>



<a name="247626895"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Element%20matches%20more%20than%20one%20slice/near/247626895" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Element.20matches.20more.20than.20one.20slice.html#247626895">(Jul 29 2021 at 19:04)</a>:</h4>
<p>That will prohibit any other resource or any ServiceRequest that doesn't comply with the DentalServiceRequest profile.</p>



<a name="247633756"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Element%20matches%20more%20than%20one%20slice/near/247633756" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David deRoode <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Element.20matches.20more.20than.20one.20slice.html#247633756">(Jul 29 2021 at 20:01)</a>:</h4>
<p>Thanks for explaining, constraining resolved the errors. I let my wishful thinking of not needing to reference targetProfiles that *are * the same as the base profile get the better of me here. All clear now.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
