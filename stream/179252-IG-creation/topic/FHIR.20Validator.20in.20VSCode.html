---
layout: page
title: "FHIR Chat  · FHIR Validator in VSCode · IG creation"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/index.html">IG creation</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/FHIR.20Validator.20in.20VSCode.html">FHIR Validator in VSCode</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="256963687"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/FHIR%20Validator%20in%20VSCode/near/256963687" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eirik Myklebost <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/FHIR.20Validator.20in.20VSCode.html#256963687">(Oct 10 2021 at 15:34)</a>:</h4>
<p>This might be useful for those of you using VSCode during IG creation: You can create a custom-task in tasks.json that runs the fhir-validator on your resources and reports the output as problems with highlighting in vscode using a custom problemMatcher:<br>
<a href="/user_uploads/10155/Oz2z-mmOqP3FZOWTHgWzdsWJ/vscode-validator-example.png">vscode-validator-example.png</a> </p>
<div class="message_inline_image"><a href="/user_uploads/10155/Oz2z-mmOqP3FZOWTHgWzdsWJ/vscode-validator-example.png" title="vscode-validator-example.png"><img src="/user_uploads/10155/Oz2z-mmOqP3FZOWTHgWzdsWJ/vscode-validator-example.png"></a></div><p>Note: This problemMatcher only works when validating at least 2 resources, because the console-output when validating a single resource differs from multi-resource validation.</p>
<p>tasks.json:</p>
<div class="codehilite" data-code-language="JSON"><pre><span></span><code><span class="p">{</span>
  <span class="nt">"version"</span><span class="p">:</span> <span class="s2">"2.0.0"</span><span class="p">,</span>
  <span class="nt">"tasks"</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nt">"label"</span><span class="p">:</span> <span class="s2">"Run FHIR Validator"</span><span class="p">,</span>
      <span class="nt">"type"</span><span class="p">:</span> <span class="s2">"shell"</span><span class="p">,</span>
      <span class="nt">"command"</span><span class="p">:</span> <span class="s2">"java"</span><span class="p">,</span>
      <span class="nt">"args"</span><span class="p">:</span> <span class="p">[</span>
        <span class="s2">"-jar"</span><span class="p">,</span> <span class="s2">"validator_cli.jar"</span><span class="p">,</span>
        <span class="s2">"${workspaceFolder}/test-resources"</span><span class="p">,</span>
        <span class="s2">"-version"</span><span class="p">,</span> <span class="s2">"4.0"</span><span class="p">,</span>
      <span class="p">],</span>
      <span class="nt">"presentation"</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">"clear"</span><span class="p">:</span> <span class="kc">true</span>
      <span class="p">},</span>
      <span class="nt">"problemMatcher"</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
          <span class="nt">"source"</span><span class="p">:</span> <span class="s2">"FHIR Validator"</span><span class="p">,</span>
          <span class="nt">"fileLocation"</span><span class="p">:</span> <span class="s2">"absolute"</span><span class="p">,</span>
          <span class="nt">"pattern"</span><span class="p">:</span> <span class="p">[</span>
            <span class="p">{</span>
              <span class="nt">"regexp"</span><span class="p">:</span> <span class="s2">"^-- (.+) -{5,}$"</span><span class="p">,</span>
              <span class="nt">"file"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="p">},</span>
            <span class="p">{</span>
              <span class="nt">"regexp"</span><span class="p">:</span> <span class="s2">"^.*$"</span><span class="p">,</span>
            <span class="p">},</span>
            <span class="p">{</span>
              <span class="nt">"regexp"</span><span class="p">:</span> <span class="s2">"^  ((?:Info|Warning|Error)).* \\(line ?(\\d+), col ?(\\d+)\\) : (.+)$"</span><span class="p">,</span>
              <span class="nt">"severity"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
              <span class="nt">"line"</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
              <span class="err">//</span><span class="nt">"column"</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
              <span class="nt">"message"</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
              <span class="nt">"loop"</span><span class="p">:</span> <span class="kc">true</span>
            <span class="p">}</span>
          <span class="p">]</span>
        <span class="p">}</span>
      <span class="p">]</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
</code></pre></div>



<a name="256999201"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/FHIR%20Validator%20in%20VSCode/near/256999201" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/FHIR.20Validator.20in.20VSCode.html#256999201">(Oct 11 2021 at 01:08)</a>:</h4>
<blockquote>
<p>This problemMatcher only works when validating at least 2 resources, because the console-output when validating a single resource differs from multi-resource validation</p>
</blockquote>
<p>umm. really? I would've thought it would be the other way around?</p>



<a name="257027006"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/FHIR%20Validator%20in%20VSCode/near/257027006" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eirik Myklebost <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/FHIR.20Validator.20in.20VSCode.html#257027006">(Oct 11 2021 at 07:59)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191316">Grahame Grieve</span> <a href="#narrow/stream/179252-IG-creation/topic/FHIR.20Validator.20in.20VSCode/near/256999201">said</a>:</p>
<blockquote>
<blockquote>
<p>This problemMatcher only works when validating at least 2 resources, because the console-output when validating a single resource differs from multi-resource validation</p>
</blockquote>
<p>umm. really? I would've thought it would be the other way around?</p>
</blockquote>
<p>Output from single resource validation:</p>
<div class="codehilite"><pre><span></span><code>Validating
  Validate fsh-generated\resources\Questionnaire-NAV-06-03-04.json   ..Detect format for fsh-generated\resources\Questionnaire-NAV-06-03-04.json
 00:01.0003
Done. Times: Loading: 00:12.0465, validation: 00:01.0004. Memory = 398Mb

Success: 0 errors, 5 warnings, 2 notes
  Information @ Questionnaire.item[0].answerValueSet (line 21, col68) : Canonical URL &#39;http://fhir.nav.no/ValueSet/icd10-vs-nr2&#39; does not resolve
</code></pre></div>
<p>Output from multi resource validation:</p>
<div class="codehilite"><pre><span></span><code>Validating
  Validate fsh-generated\resources\Patient.json   ..Detect format for fsh-generated\resources\Patient.json
 00:00.0083
  Validate fsh-generated\resources\Questionnaire-NAV-06-03-04.json   ..Detect format for fsh-generated\resources\Questionnaire-NAV-06-03-04.json
 00:00.0836
Done. Times: Loading: 00:10.0786, validation: 00:00.0923 (#2). Memory = 353Mb

-- fsh-generated\resources\Patient.json --------------------------------------------
Success: 0 errors, 0 warnings, 1 notes
  Information @ ?? : All OK
------------------------------------------------------------------------------------

-- fsh-generated\resources\Questionnaire-NAV-06-03-04.json ---------------------------------------------------------------
Success: 0 errors, 5 warnings, 2 notes
  Information @ Questionnaire.item[0].answerValueSet (line 21, col68) : Canonical URL &#39;http://fhir.nav.no/ValueSet/icd10-vs-nr2&#39; does not resolve
</code></pre></div>
<p>The problemMatcher uses regex and looks for <code>-- {filepath} -----</code>, which is excluded from the single-resource validation output.</p>



<a name="257222789"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/FHIR%20Validator%20in%20VSCode/near/257222789" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eirik Myklebost <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/FHIR.20Validator.20in.20VSCode.html#257222789">(Oct 12 2021 at 15:34)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> , is it possible to change the log format, or add support for different styles? Using an already established format will make it easier to integrate the validator in IDEs and tools, e.g. as a linter. <a href="https://eslint.org/docs/user-guide/formatters/">ESlint's compact or stylish format</a> are some alternatives.</p>



<a name="257249865"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/FHIR%20Validator%20in%20VSCode/near/257249865" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/FHIR.20Validator.20in.20VSCode.html#257249865">(Oct 12 2021 at 18:28)</a>:</h4>
<p>it's possible, sure. I'd accept a PR or you can create a task. I'</p>



<a name="257249910"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/FHIR%20Validator%20in%20VSCode/near/257249910" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/FHIR.20Validator.20in.20VSCode.html#257249910">(Oct 12 2021 at 18:28)</a>:</h4>
<p>I'm not going to change the default behaviour but we'd sure support an -output-style paramter</p>



<a name="257276949"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/FHIR%20Validator%20in%20VSCode/near/257276949" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eirik Myklebost <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/FHIR.20Validator.20in.20VSCode.html#257276949">(Oct 12 2021 at 21:46)</a>:</h4>
<p>Alright, will look into it. <span aria-label="+1" class="emoji emoji-1f44d" role="img" title="+1">:+1:</span></p>



<a name="258475018"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/FHIR%20Validator%20in%20VSCode/near/258475018" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/FHIR.20Validator.20in.20VSCode.html#258475018">(Oct 21 2021 at 01:56)</a>:</h4>
<p>ok so I added a parameter -output-style and a possible value eslint-compact. And it's now much easier to add any kind of other output style because I refactored the code to make it easy</p>



<a name="258475033"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/FHIR%20Validator%20in%20VSCode/near/258475033" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/FHIR.20Validator.20in.20VSCode.html#258475033">(Oct 21 2021 at 01:56)</a>:</h4>
<p><span class="user-mention" data-user-id="223185">@Eirik Myklebost</span> should be in today's release</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
