---
layout: page
title: "FHIR Chat  · Invariant to check dateTime precision with FHIRPath · IG creation"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/index.html">IG creation</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Invariant.20to.20check.20dateTime.20precision.20with.20FHIRPath.html">Invariant to check dateTime precision with FHIRPath</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="225634077"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Invariant%20to%20check%20dateTime%20precision%20with%20FHIRPath/near/225634077" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Max Masnick <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Invariant.20to.20check.20dateTime.20precision.20with.20FHIRPath.html#225634077">(Feb 09 2021 at 01:21)</a>:</h4>
<p>I have a <code>dateTime</code> in a FHIR resource, and I want to use an invariant to warn if the precision <strong>exceeds</strong> the day level. So <code>2021-02-08</code> is fine, but <code>2021-02-08T00:00:01</code> or <code>2021-02-08T01</code> should cause a warning.</p>
<p>Is there a better way to do this than converting to a string and then using a regex like <code>$this.toString().matches('^[0-9]{4}-[0-9]{2}-[0-9]{2}$')</code>?</p>



<a name="225638728"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Invariant%20to%20check%20dateTime%20precision%20with%20FHIRPath/near/225638728" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Invariant.20to.20check.20dateTime.20precision.20with.20FHIRPath.html#225638728">(Feb 09 2021 at 02:31)</a>:</h4>
<p>You could just use the 'length' property on DataElement.  No invariant necessary.</p>



<a name="225694324"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Invariant%20to%20check%20dateTime%20precision%20with%20FHIRPath/near/225694324" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Max Masnick <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Invariant.20to.20check.20dateTime.20precision.20with.20FHIRPath.html#225694324">(Feb 09 2021 at 14:08)</a>:</h4>
<p>Thanks.... <code>* occurrenceDateTime ^maxLength = 10</code> works but gives me an error rather than a warning. I assume there's not a way to downgrade this to a warning...so if we really want a warning rather than an error, I guess we're back to the invariant?</p>



<a name="225748261"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Invariant%20to%20check%20dateTime%20precision%20with%20FHIRPath/near/225748261" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Invariant.20to.20check.20dateTime.20precision.20with.20FHIRPath.html#225748261">(Feb 09 2021 at 19:59)</a>:</h4>
<p>yes invariant. But you can use length() in an invariant</p>



<a name="225838041"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Invariant%20to%20check%20dateTime%20precision%20with%20FHIRPath/near/225838041" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Max Masnick <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Invariant.20to.20check.20dateTime.20precision.20with.20FHIRPath.html#225838041">(Feb 10 2021 at 13:52)</a>:</h4>
<p>Thanks!</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
