---
layout: page
title: "FHIR Chat  · pattern[x] · IG creation"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/index.html">IG creation</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/pattern.5Bx.5D.html">pattern[x]</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="154020252"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/pattern%5Bx%5D/near/154020252" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Reinhold <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/pattern.5Bx.5D.html#154020252">(Nov 21 2018 at 17:41)</a>:</h4>
<p>Can someone point me to some documentation and/or example of how to use pattern[x] in slicing?</p>



<a name="154020258"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/pattern%5Bx%5D/near/154020258" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/pattern.5Bx.5D.html#154020258">(Nov 21 2018 at 17:48)</a>:</h4>
<p>The genomics reporting IG uses it a lot.  What are you trying to do?</p>



<a name="154020259"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/pattern%5Bx%5D/near/154020259" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Reinhold <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/pattern.5Bx.5D.html#154020259">(Nov 21 2018 at 17:49)</a>:</h4>
<blockquote>
<p>The genomics reporting IG uses it a lot.  What are you trying to do?</p>
</blockquote>
<p>Trying a desperate attempt to get around the Error in discriminator at Observation.component:supplementalTypesComponent.code.coding: slicing found of which I have 100s</p>



<a name="154020262"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/pattern%5Bx%5D/near/154020262" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/pattern.5Bx.5D.html#154020262">(Nov 21 2018 at 17:50)</a>:</h4>
<p>Take a look at the profiles in the genomics-reporting IG.</p>



<a name="154020264"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/pattern%5Bx%5D/near/154020264" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Reinhold <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/pattern.5Bx.5D.html#154020264">(Nov 21 2018 at 17:55)</a>:</h4>
<blockquote>
<p>Take a look at the profiles in the genomics-reporting IG.</p>
</blockquote>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span>  I do not understand the spreadsheet rendering of StructureDefinitions. I have always needed to go to some other project that creates Structure definitions directly to try and find help. Maybe actual structure definitions are somewhere else than in the /resources dircetory?</p>
<p>I tried pulling this out of the spread sheet in hopes that it would lead to something</p>
<div class="codehilite"><pre><span></span>http://hl7.org/fhir/uv/genomics-reporting/StructureDefinition/device-fish-probe
</pre></div>


<p>but I just get 404 errors.</p>



<a name="154020267"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/pattern%5Bx%5D/near/154020267" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Power <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/pattern.5Bx.5D.html#154020267">(Nov 21 2018 at 18:01)</a>:</h4>
<p>You can get to them like this: <a href="http://build.fhir.org/ig/HL7/genomics-reporting/StructureDefinition-device-fish-probe.json" target="_blank" title="http://build.fhir.org/ig/HL7/genomics-reporting/StructureDefinition-device-fish-probe.json">http://build.fhir.org/ig/HL7/genomics-reporting/StructureDefinition-device-fish-probe.json</a></p>



<a name="154020272"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/pattern%5Bx%5D/near/154020272" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Reinhold <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/pattern.5Bx.5D.html#154020272">(Nov 21 2018 at 18:07)</a>:</h4>
<blockquote>
<p>You can get to them like this: <a href="http://build.fhir.org/ig/HL7/genomics-reporting/StructureDefinition-device-fish-probe.json" target="_blank" title="http://build.fhir.org/ig/HL7/genomics-reporting/StructureDefinition-device-fish-probe.json">http://build.fhir.org/ig/HL7/genomics-reporting/StructureDefinition-device-fish-probe.json</a></p>
</blockquote>
<p><span class="user-mention" data-user-id="191913">@Kevin Power</span>  that helped, not exactly an element definition that I am used to but is the jist of 'pattern' that the pattern itself is defined in the slice?</p>



<a name="154020276"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/pattern%5Bx%5D/near/154020276" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/pattern.5Bx.5D.html#154020276">(Nov 21 2018 at 18:13)</a>:</h4>
<p>The pattern is declared on the slice and reflects requirements the instance must match to be considered part of that slice.</p>



<a name="154020279"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/pattern%5Bx%5D/near/154020279" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Reinhold <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/pattern.5Bx.5D.html#154020279">(Nov 21 2018 at 18:21)</a>:</h4>
<blockquote>
<p>The pattern is declared on the slice and reflects requirements the instance must match to be considered part of that slice.</p>
</blockquote>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span>  I understand the <em>concept</em> its just the how to do the syntax. I am mapping certain PHD attributes to Observation.components. They are distinguished by the code.coding.code/system elements. Both the code and the system are fixed values to identify the slice. BUT I want to allow someone to express the same concept in a different coding system. For example, look at this component element</p>
<div class="codehilite"><pre><span></span>    &quot;component&quot;: [
        {
            &quot;code&quot;: {
                &quot;coding&quot;: [
                    {
                        &quot;system&quot;: &quot;urn:iso:std:iso:11073:10101&quot;, // Identifies the slice along with code 68193
                        &quot;code&quot;: &quot;68193&quot;
                    }
                                     //  put an additional  code system system/code value here if you want that expresses the same concept as above
                ],
                &quot;text&quot;: &quot;MDC_ATTR_SUPPLEMENTAL_TYPES&quot;
            },
            &quot;valueCodeableConcept&quot;: {
                &quot;coding&quot;: [
                    {
                        &quot;system&quot;: &quot;urn:iso:std:iso:11073:10101&quot;,
                        &quot;code&quot;: &quot;150588&quot;
                    }
                ],
                &quot;text&quot;: &quot;MDC_MODALITY_SPOT&quot;
            }
        }
    ]
</pre></div>


<p>That is why I have a slice on the code.coding. Is that extra slicing unnecessary?</p>



<a name="154020283"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/pattern%5Bx%5D/near/154020283" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Reinhold <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/pattern.5Bx.5D.html#154020283">(Nov 21 2018 at 18:42)</a>:</h4>
<p>I removed the slicing on the Observation.component.code.coding element. Maybe it is not needed. So my effort looks as follows:</p>
<div class="codehilite"><pre><span></span>    &lt;element id=&quot;Observation.component&quot;&gt;
      &lt;path value=&quot;Observation.component&quot; /&gt;
      &lt;slicing&gt;
        &lt;discriminator&gt;
          &lt;type value=&quot;pattern&quot; /&gt;
          &lt;path value=&quot;code.coding.code&quot; /&gt;
        &lt;/discriminator&gt;
        &lt;rules value=&quot;open&quot; /&gt;
      &lt;/slicing&gt;
    &lt;/element&gt;

    &lt;!-- SUPPLEMENTAL TYPES COMPONENT --&gt;
    &lt;element id=&quot;Observation.component:supplementalTypesComponent&quot;&gt;
      &lt;path value=&quot;Observation.component&quot; /&gt;
      &lt;sliceName value=&quot;supplementalTypesComponent&quot; /&gt;
      &lt;short value=&quot;Supplemental Type: A further description of the measurement type.&quot; /&gt;
      &lt;definition value=&quot;some text.&quot; /&gt;
      &lt;comment value=&quot;More text&quot; /&gt;
      &lt;patternCodeableConcept&gt;
        &lt;code&gt;
          &lt;coding&gt;
            &lt;system value=&quot;urn:iso:std:iso:11073:10101&quot;/&gt;
            &lt;code value=&quot;68198&quot;/&gt;
          &lt;/coding&gt;
        &lt;/code&gt;
      &lt;/patternCodeableConcept&gt;
    &lt;/element&gt;
    &lt;element id=&quot;Observation.component:supplementalTypesComponent.code.text&quot;&gt;
      &lt;path value=&quot;Observation.component.code.text&quot; /&gt;
      &lt;definition value=&quot;It is recommended to display at least the reference identifier for the Supplemental-Types which is MDC_ATTR_SUPPLEMENTAL_TYPES&quot; /&gt;
    &lt;/element&gt;
    &lt;element id=&quot;Observation.component:supplementalTypesComponent.code.coding&quot;&gt;
      &lt;path value=&quot;Observation.component.code.coding&quot; /&gt;
      &lt;min value=&quot;1&quot; /&gt;
    &lt;/element&gt;
    &lt;element id=&quot;Observation.component:supplementalTypesComponent.code.coding.system&quot;&gt;
      &lt;path value=&quot;Observation.component.code.coding.system&quot; /&gt;
      &lt;min value=&quot;1&quot; /&gt;
      &lt;fixedUri value=&quot;urn:iso:std:iso:11073:10101&quot; /&gt;
    &lt;/element&gt;
    &lt;element id=&quot;Observation.component:supplementalTypesComponent.code.coding.code&quot;&gt;
      &lt;path value=&quot;Observation.component.code.coding.code&quot; /&gt;
      &lt;definition value=&quot;68193 is the 32-bit nomenclature code indicating a &#39;Supplemental-Types&#39; value&quot; /&gt;
      &lt;min value=&quot;1&quot; /&gt;
      &lt;fixedCode value=&quot;68193&quot; /&gt;
      &lt;binding&gt;
        &lt;strength value=&quot;required&quot;/&gt;
        &lt;valueSet value=&quot;http://hl7.org/fhir/uv/phd/ValueSet/11073MDCobject&quot;/&gt;
      &lt;/binding&gt;
    &lt;/element&gt;
    &lt;element id=&quot;Observation.component:supplementalTypesComponent.value[x]:valueCodeableConcept&quot;&gt;
      &lt;path value=&quot;Observation.component.valueCodeableConcept&quot; /&gt;
      &lt;sliceName value=&quot;valueCodeableConcept&quot; /&gt;
      &lt;definition value=&quot;The information determined as a result of making the observation, if the information is a code.&quot; /&gt;
      &lt;min value=&quot;1&quot; /&gt;
      &lt;type&gt;
        &lt;code value=&quot;CodeableConcept&quot; /&gt;
      &lt;/type&gt;
    &lt;/element&gt;  and so-on
</pre></div>


<p>I hope this allows one to put in alternative coding systems ....</p>
<p>But now I get this error</p>
<div class="codehilite"><pre><span></span>The value provided (&#39;68193&#39;) is not in the value set http://hl7.org/fhir/uv/phd/ValueSet/11073MDCobject (http://hl7.org/fhir/uv/phd/ValueSet/11073MDCobject, and a code is required from this value set) (error message = Access violation at address 0000000000B9CF8F in module &#39;FHIRServer.exe&#39;. Read of address 0000000000000000) (see Tx log)
</pre></div>


<p>I will say that the code 68193 is in the value set referenced.</p>



<a name="154020289"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/pattern%5Bx%5D/near/154020289" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/pattern.5Bx.5D.html#154020289">(Nov 21 2018 at 18:53)</a>:</h4>
<p>Your path for the pattern should just be code, not code.coding.code.   I.e. it needs to be the path to the element that contains the pattern.  The pattern will ensure that one repetition of coding matches the sub-elements specified.  It's totally fine to have other repetitions of coding that don't match.</p>



<a name="154020335"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/pattern%5Bx%5D/near/154020335" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Reinhold <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/pattern.5Bx.5D.html#154020335">(Nov 21 2018 at 22:19)</a>:</h4>
<blockquote>
<p>Your path for the pattern should just be code, not code.coding.code.   I.e. it needs to be the path to the element that contains the pattern.  The pattern will ensure that one repetition of coding matches the sub-elements specified.  It's totally fine to have other repetitions of coding that don't match.</p>
</blockquote>
<p>Thanks you. Will try</p>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span>  Didn't work so well. Got many more errors.</p>



<a name="154020385"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/pattern%5Bx%5D/near/154020385" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/pattern.5Bx.5D.html#154020385">(Nov 22 2018 at 05:22)</a>:</h4>
<p>Which were?</p>



<a name="154020435"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/pattern%5Bx%5D/near/154020435" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Reinhold <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/pattern.5Bx.5D.html#154020435">(Nov 22 2018 at 11:54)</a>:</h4>
<blockquote>
<p>Which were?</p>
</blockquote>
<p>The main error  of interest is </p>
<div class="codehilite"><pre><span></span>/f:StructureDefinition/f:differential/f:element/f:patternCodeableConcept    error   Undefined element &#39;code&#39;
</pre></div>


<p>which makes sense I would guess since the (pattern)CodeableConcept does not have a 'code' element. It has a coding.code element though.</p>
<p>I am getting in the order of 1000 errors with this  (most of which are repeats). Is there a way I can get a list of these errors? Using code.coding.code it drops to 600</p>



<a name="154020438"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/pattern%5Bx%5D/near/154020438" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Reinhold <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/pattern.5Bx.5D.html#154020438">(Nov 22 2018 at 11:57)</a>:</h4>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span>  Can I add the binding to my pattern?</p>
<div class="codehilite"><pre><span></span>&lt;patternCodeableConcept&gt;
        &lt;code&gt;
          &lt;coding&gt;
            &lt;system value=&quot;urn:iso:std:iso:11073:10101&quot;/&gt;
            &lt;code value=&quot;68198&quot;/&gt;
                    &lt;binding&gt;
                           &lt;strength value=&quot;required&quot;/&gt;
                           &lt;valueSet value=&quot;http://hl7.org/fhir/uv/phd/ValueSet/11073MDCobject&quot;/&gt;
                    &lt;/binding&gt;
          &lt;/coding&gt;
        &lt;/code&gt;
      &lt;/patternCodeableConcept&gt;
</pre></div>


<p>The answer turns out to be NO</p>



<a name="154020482"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/pattern%5Bx%5D/near/154020482" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/pattern.5Bx.5D.html#154020482">(Nov 22 2018 at 15:03)</a>:</h4>
<p>Right.  Because a CodeableConcept doesn't contain an element named "code", just an element named "coding".</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
