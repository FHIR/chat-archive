---
layout: page
title: "FHIR Chat  · Selecting SUSHI Versions in AutoBuild · IG creation"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/index.html">IG creation</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Selecting.20SUSHI.20Versions.20in.20AutoBuild.html">Selecting SUSHI Versions in AutoBuild</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="212070985"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Selecting%20SUSHI%20Versions%20in%20AutoBuild/near/212070985" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Selecting.20SUSHI.20Versions.20in.20AutoBuild.html#212070985">(Oct 02 2020 at 13:03)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="191315">@Josh Mandel</span> and <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> -- we plan to release SUSHI 1.0.0 Beta 1 today.  This beta supports a new (and I think better) approach to IG Publisher integration.  We are releasing it as beta to ensure it gets some revs w/ various projects before we force it on everyone.  As a beta, it <em>won't</em> be tagged as the "latest" release in NPM (as that's reserved for stable releases) -- so <code>npm install -g fsh-sushi</code> will still install the 0.16.0 version.  I think this means the autobuild will continue to run SUSHI 0.16.0, which is probably appropriate for most people.</p>
<p>My question (sorry it took so long to get here) is if there is a way for autobuild to run the <em>beta</em> version of SUSHI for projects that request/require it?  IIRC, Grahame added a <code>sushi.ini</code> capability to affect the timeout when running SUSHI.  Could this also be used to indicate a specific tag or version to use when installing SUSHI?</p>



<a name="212071193"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Selecting%20SUSHI%20Versions%20in%20AutoBuild/near/212071193" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Selecting.20SUSHI.20Versions.20in.20AutoBuild.html#212071193">(Oct 02 2020 at 13:05)</a>:</h4>
<p>This would be helpful because in order to fully leverage the beta, authors need to change their project structure -- and if they do that, SUSHI 0.16.0 will fail to build it.</p>



<a name="212087918"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Selecting%20SUSHI%20Versions%20in%20AutoBuild/near/212087918" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Selecting.20SUSHI.20Versions.20in.20AutoBuild.html#212087918">(Oct 02 2020 at 15:14)</a>:</h4>
<blockquote>
<p>I think this means the autobuild will continue to run SUSHI 0.16.0, which is probably appropriate for most people.</p>
</blockquote>
<p>That's correct.</p>



<a name="212088001"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Selecting%20SUSHI%20Versions%20in%20AutoBuild/near/212088001" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Selecting.20SUSHI.20Versions.20in.20AutoBuild.html#212088001">(Oct 02 2020 at 15:15)</a>:</h4>
<blockquote>
<p>IRC, Grahame added a sushi.ini capability to affect the timeout when running SUSHI. Could this also be used to indicate a specific tag or version to use when installing SUSHI?</p>
</blockquote>
<p>We can define something like this, for sure. Let's see...</p>



<a name="212088219"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Selecting%20SUSHI%20Versions%20in%20AutoBuild/near/212088219" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Selecting.20SUSHI.20Versions.20in.20AutoBuild.html#212088219">(Oct 02 2020 at 15:16)</a>:</h4>
<p><a href="https://github.com/FHIR/auto-ig-builder/blob/c19e9050b1613d34d2116e7418d11001496cdc02/images/ig-build/builder/builder.py#L42">https://github.com/FHIR/auto-ig-builder/blob/c19e9050b1613d34d2116e7418d11001496cdc02/images/ig-build/builder/builder.py#L42</a> is where the autobuilder installs sushi. This is done after the target repo is git-cloned, so we'd have access to any files from the repo at this point.</p>



<a name="212088372"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Selecting%20SUSHI%20Versions%20in%20AutoBuild/near/212088372" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Selecting.20SUSHI.20Versions.20in.20AutoBuild.html#212088372">(Oct 02 2020 at 15:17)</a>:</h4>
<p>I haven't see documentation for the sushi.ini format, and a Zulip search only turns up this thread. Is it a Windows-format INI file that would be compatible with <a href="https://docs.python.org/3/library/configparser.html">https://docs.python.org/3/library/configparser.html</a> ?</p>



<a name="212088761"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Selecting%20SUSHI%20Versions%20in%20AutoBuild/near/212088761" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Selecting.20SUSHI.20Versions.20in.20AutoBuild.html#212088761">(Oct 02 2020 at 15:20)</a>:</h4>
<p>Basically, if you can write down the logic for:</p>
<p>1) Where to find a <code>sushi.ini</code> file relative to the repository root (if it exists)<br>
2) Where, inside the <code>sushi.ini</code> file to find information about which <code>fsh-sushi</code> version to install<br>
3) How to translate this into an <code>npm install...</code> command, and what default to use if none is present</p>
<p>... we should be able to make this work.</p>



<a name="212096588"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Selecting%20SUSHI%20Versions%20in%20AutoBuild/near/212096588" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Selecting.20SUSHI.20Versions.20in.20AutoBuild.html#212096588">(Oct 02 2020 at 16:20)</a>:</h4>
<p>Cool.  I only stumbled on <code>sushi.ini</code> the other day myself.  It seems that <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> invented it.  So... I actually have no more details than you.  Grahame, can you confirm that <code>sushi.ini</code> follows the Windows INI format (like ig.ini, I assume)?  And can you confirm it goes in repository root?  If you can confirm those, I can take care of #2 and #3 above.</p>



<a name="212120601"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Selecting%20SUSHI%20Versions%20in%20AutoBuild/near/212120601" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Selecting.20SUSHI.20Versions.20in.20AutoBuild.html#212120601">(Oct 02 2020 at 19:53)</a>:</h4>
<p>it's actually fsh.ini, and it's a windows ini file, and it's current format is </p>
<div class="codehilite" data-code-language="INI"><pre><span></span><code><span class="k">[FSH]</span>
<span class="na">timeout</span><span class="o">=</span><span class="s">{msec}</span>
</code></pre></div>



<a name="212120632"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Selecting%20SUSHI%20Versions%20in%20AutoBuild/near/212120632" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Selecting.20SUSHI.20Versions.20in.20AutoBuild.html#212120632">(Oct 02 2020 at 19:53)</a>:</h4>
<p>this is only a question for auto-build?</p>



<a name="212120721"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Selecting%20SUSHI%20Versions%20in%20AutoBuild/near/212120721" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Selecting.20SUSHI.20Versions.20in.20AutoBuild.html#212120721">(Oct 02 2020 at 19:54)</a>:</h4>
<p>no. it's most definitely a question elsewhere. What's the expectation for when we do release builds?</p>



<a name="212122207"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Selecting%20SUSHI%20Versions%20in%20AutoBuild/near/212122207" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Selecting.20SUSHI.20Versions.20in.20AutoBuild.html#212122207">(Oct 02 2020 at 20:06)</a>:</h4>
<blockquote>
<p>this is only a question for auto-build?<br>
no. it's most definitely a question elsewhere.</p>
</blockquote>
<p>On local builds it always uses whatever version of SUSHI the user has installed on their system.  So locally, the user already has control over what version of SUSHI is used.  To ensure no confusion, the property could be <code>autobuild-sushi-version={version|tag}</code>.</p>
<blockquote>
<p>What's the expectation for when we do release builds?</p>
</blockquote>
<p>I guess we have some choices.  Do you want to allow people to have flexibility of SUSHI version for release builds?  Or do you want to require the most recent official release?  If you're concerned about people tacking their projects to <em>old</em> SUSHI builds then we could intentionally limit the fsh.ini capability.  Instead of allowing a specific version, we could only allow the current released version or the most recent prerelease version (e.g., only support an optional <code>allow-sushi-prerelease=true</code>).</p>



<a name="212122359"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Selecting%20SUSHI%20Versions%20in%20AutoBuild/near/212122359" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Selecting.20SUSHI.20Versions.20in.20AutoBuild.html#212122359">(Oct 02 2020 at 20:07)</a>:</h4>
<p>My main concern is allowing users to move to cutting edge prerelease versions if they want/need to.</p>



<a name="212133270"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Selecting%20SUSHI%20Versions%20in%20AutoBuild/near/212133270" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Selecting.20SUSHI.20Versions.20in.20AutoBuild.html#212133270">(Oct 02 2020 at 21:52)</a>:</h4>
<p>well, I'm not sure. I don't want to have to chop and change manually on the release build, but the version of sushi isn't really anything to do with the quality directly</p>



<a name="212358440"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Selecting%20SUSHI%20Versions%20in%20AutoBuild/near/212358440" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Selecting.20SUSHI.20Versions.20in.20AutoBuild.html#212358440">(Oct 05 2020 at 21:21)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> -- would you be ok w/ us introducing this capability in <code>fsh.ini</code> so that people can control the SUSHI used in auto-build?  I would expect this would mainly be used only temporarily in IGs -- either to leverage a feature in a beta version of SUSHI or in rare cases to use an older version of SUSHI if/when the current SUSHI has a show-stopper bug for a particular IG.  Whether or not the publication team allows for IGs to use a non-current (or beta) version of SUSHI for final publication seems more like a policy matter -- and it's something that can be checked easily enough by looking at the <code>fsh.ini</code> (i.e., you can choose to outright reject officially publishing any IG that has overridden the SUSHI version).</p>



<a name="212361378"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Selecting%20SUSHI%20Versions%20in%20AutoBuild/near/212361378" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Selecting.20SUSHI.20Versions.20in.20AutoBuild.html#212361378">(Oct 05 2020 at 21:53)</a>:</h4>
<p>I don't know quite enough about npm here. is it possible to have multiple different versions installed, and to use a nominated version when invoking sushi?</p>



<a name="212364050"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Selecting%20SUSHI%20Versions%20in%20AutoBuild/near/212364050" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Selecting.20SUSHI.20Versions.20in.20AutoBuild.html#212364050">(Oct 05 2020 at 22:25)</a>:</h4>
<p>NPM doesn't allow you to globally install multiple versions of the same package.  The closest they come to something like that is <code>npx</code>.  The <code>npx</code> command (which is packaged with NPM) is a "package runner".</p>
<p>If you do <code>npx fsh-sushi</code> it locally installs and invokes the latest stable release of SUSHI.  If you do <code>npx fsh-sushi@0.16.0</code> it locally installs and invokes the specific version of SUSHI (in this case 0.16.0).  If you do <code>npx fsh-sushi@beta</code> it installs the version of SUSHI tagged as <code>beta</code>.  Etc.  For example <code>npx fsh-sushi@0.16.0 . -o build</code> is the same as running <code>sushi . -o build</code> if SUSHI 0.16.0 were installed globally.</p>



<a name="212364162"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Selecting%20SUSHI%20Versions%20in%20AutoBuild/near/212364162" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Selecting.20SUSHI.20Versions.20in.20AutoBuild.html#212364162">(Oct 05 2020 at 22:26)</a>:</h4>
<p>I think I have to do this - I'm one of a number of people who build lots of IGs, and have already been tripped up by not having the correct version. If there's more than one version in play....</p>



<a name="212364256"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Selecting%20SUSHI%20Versions%20in%20AutoBuild/near/212364256" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Selecting.20SUSHI.20Versions.20in.20AutoBuild.html#212364256">(Oct 05 2020 at 22:27)</a>:</h4>
<p>If you were to called <code>npx fsh-sushi</code> in the IG Publisher instead of just <code>sushi</code>, however, the end result is that the globally installed sushi would never be used.  Maybe that's a good thing, I don't know -- but it is different than what happens now.  In that case, it would probably be pretty important for users to be able to control what version of SUSHI the publisher invokes when it calls <code>npx</code>.</p>



<a name="212364331"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Selecting%20SUSHI%20Versions%20in%20AutoBuild/near/212364331" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Selecting.20SUSHI.20Versions.20in.20AutoBuild.html#212364331">(Oct 05 2020 at 22:28)</a>:</h4>
<p>well, what I'm thinking is that I'll look in fsh.ini to decide whether I'm going to run it directly or run a particular version</p>



<a name="212364404"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Selecting%20SUSHI%20Versions%20in%20AutoBuild/near/212364404" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Selecting.20SUSHI.20Versions.20in.20AutoBuild.html#212364404">(Oct 05 2020 at 22:29)</a>:</h4>
<p>Ah.  OK.  That would be backward compatible then.  So if you see something in <code>fsh.ini</code>, you use <code>npx fsh-sushi@${version-from-ini}</code> otherwise you just invoke <code>sushi</code> and use whatever is on the path.</p>



<a name="212364708"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Selecting%20SUSHI%20Versions%20in%20AutoBuild/near/212364708" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Selecting.20SUSHI.20Versions.20in.20AutoBuild.html#212364708">(Oct 05 2020 at 22:32)</a>:</h4>
<p>Then the thing in <code>fsh.ini</code> controls the version of SUSHI that is used no matter where the publisher is invoked (i.e., locally <em>and</em> in <span class="user-mention" data-user-id="191315">@Josh Mandel</span>'s Auto-Builder (and Josh shouldn't need to do anything special).  In that case, we'd probably want to call the ini property something simpler and have something like <code>sushi-version=0.16.0</code>.</p>



<a name="212365015"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Selecting%20SUSHI%20Versions%20in%20AutoBuild/near/212365015" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Selecting.20SUSHI.20Versions.20in.20AutoBuild.html#212365015">(Oct 05 2020 at 22:37)</a>:</h4>
<p>what versions can I test this with right now?</p>



<a name="212386679"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Selecting%20SUSHI%20Versions%20in%20AutoBuild/near/212386679" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Selecting.20SUSHI.20Versions.20in.20AutoBuild.html#212386679">(Oct 06 2020 at 05:36)</a>:</h4>
<p>v0.16.0 and v1.0.0-beta.1 are considerably different. v1.0.0-beta.1 uses the new folder structure (no ig-data, instead input is in <code>input/fsh</code> and output in <code>fsh-generated </code></p>



<a name="212386712"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Selecting%20SUSHI%20Versions%20in%20AutoBuild/near/212386712" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Selecting.20SUSHI.20Versions.20in.20AutoBuild.html#212386712">(Oct 06 2020 at 05:37)</a>:</h4>
<p>I can create a fork of the sample IG with this new config if you want to use that for testing.</p>



<a name="212420101"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Selecting%20SUSHI%20Versions%20in%20AutoBuild/near/212420101" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Selecting.20SUSHI.20Versions.20in.20AutoBuild.html#212420101">(Oct 06 2020 at 12:32)</a>:</h4>
<p>Sorry, had to step out -- but <span class="user-mention" data-user-id="191832">@Jose Costa Teixeira</span> is right.  To use v0.16.0:</p>
<div class="codehilite"><pre><span></span><code>npx fsh-sushi@0.16.0 .
</code></pre></div>


<p>and to use the beta:</p>
<div class="codehilite"><pre><span></span><code>npx fsh-sushi@1.0.0-beta.1 .
</code></pre></div>


<p>or more simply, using the beta tag:</p>
<div class="codehilite"><pre><span></span><code>npx fsh-sushi@beta .
</code></pre></div>


<p>You'll notice that I just used <code>.</code> as the argument (indicating current folder).  That assumes you are running it from the root folder of the IG.  In this case, it will find the input path (whether it's <code>fsh</code> or <code>input/fsh</code>) and also correctly choose the appropriate output path.  I noticed that the IG Publisher explicitly passes in the input and output paths, but this is not necessary.</p>
<p>If you're just looking to test this locally, to make sure it really uses the right versions, you can just invoke it with the <code>-v</code> flag to have it only print out the version.</p>
<p>One thing to note, it will redownload and install (in a temporary location) SUSHI on every invocation, so depending on how long that takes, you may want to consider bumping the default timeout by 10 or 15 seconds to accommodate it.</p>



<a name="212502455"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Selecting%20SUSHI%20Versions%20in%20AutoBuild/near/212502455" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Selecting.20SUSHI.20Versions.20in.20AutoBuild.html#212502455">(Oct 07 2020 at 00:22)</a>:</h4>
<p>ok this works fine. It'll be in the next release</p>



<a name="212502458"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Selecting%20SUSHI%20Versions%20in%20AutoBuild/near/212502458" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Selecting.20SUSHI.20Versions.20in.20AutoBuild.html#212502458">(Oct 07 2020 at 00:22)</a>:</h4>
<div class="codehilite" data-code-language="INI"><pre><span></span><code><span class="k">[FSH]</span>
<span class="na">version</span><span class="o">=</span><span class="s">1.0.0-beta.1</span>
</code></pre></div>



<a name="212502515"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Selecting%20SUSHI%20Versions%20in%20AutoBuild/near/212502515" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Selecting.20SUSHI.20Versions.20in.20AutoBuild.html#212502515">(Oct 07 2020 at 00:23)</a>:</h4>
<p>I'm not yet going to require that IGs using sushi set this before making a publication request, but I'm planning to do that onec we see how it works</p>



<a name="212551061"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Selecting%20SUSHI%20Versions%20in%20AutoBuild/near/212551061" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Selecting.20SUSHI.20Versions.20in.20AutoBuild.html#212551061">(Oct 07 2020 at 12:34)</a>:</h4>
<p>Would it be possible to call that <code>sushi-version</code> rather than just <code>version</code>?  I'm afraid that <code>version</code> is too ambiguous and there might be confusion between the version of FSH and the version of SUSHI (which are definitely two different things).</p>



<a name="212632628"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Selecting%20SUSHI%20Versions%20in%20AutoBuild/near/212632628" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Selecting.20SUSHI.20Versions.20in.20AutoBuild.html#212632628">(Oct 07 2020 at 23:35)</a>:</h4>
<p>ok. done</p>



<a name="212633641"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Selecting%20SUSHI%20Versions%20in%20AutoBuild/near/212633641" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Selecting.20SUSHI.20Versions.20in.20AutoBuild.html#212633641">(Oct 07 2020 at 23:50)</a>:</h4>
<p>Thank you!</p>



<a name="212829619"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Selecting%20SUSHI%20Versions%20in%20AutoBuild/near/212829619" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Selecting.20SUSHI.20Versions.20in.20AutoBuild.html#212829619">(Oct 09 2020 at 14:03)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> -- I just tried this out and it did not work.  I tried to determine if maybe the IG Publisher hasn't been released yet since you fixed it -- but I don't see your fix at all in the <a href="https://github.com/HL7/fhir-ig-publisher/commits/master">IG Publisher commits on GitHub</a>.  Am I looking in the wrong place?</p>



<a name="212860468"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Selecting%20SUSHI%20Versions%20in%20AutoBuild/near/212860468" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Selecting.20SUSHI.20Versions.20in.20AutoBuild.html#212860468">(Oct 09 2020 at 18:29)</a>:</h4>
<p>I haven't committed yet. getting there</p>



<a name="213299955"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Selecting%20SUSHI%20Versions%20in%20AutoBuild/near/213299955" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Selecting.20SUSHI.20Versions.20in.20AutoBuild.html#213299955">(Oct 14 2020 at 14:49)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> -- do you have an ETA on this?  There are a few IG authors who have already converted to the beta structure, but can't leverage auto-builds again until this feature is in place.  They're wondering when it will be available.  If it's still not close, would it be possible to push just a commit supporting the new <code>fsh.ini</code> stuff?  (I'm assuming the stuff holding it up is not related to <code>fsh.ini</code> at all).</p>



<a name="213337936"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Selecting%20SUSHI%20Versions%20in%20AutoBuild/near/213337936" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Selecting.20SUSHI.20Versions.20in.20AutoBuild.html#213337936">(Oct 14 2020 at 19:13)</a>:</h4>
<p>a few hours</p>



<a name="213352429"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Selecting%20SUSHI%20Versions%20in%20AutoBuild/near/213352429" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Selecting.20SUSHI.20Versions.20in.20AutoBuild.html#213352429">(Oct 14 2020 at 21:24)</a>:</h4>
<p><span class="user-mention" data-user-id="191469">@Chris Moesel</span> released</p>



<a name="213366064"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Selecting%20SUSHI%20Versions%20in%20AutoBuild/near/213366064" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Selecting.20SUSHI.20Versions.20in.20AutoBuild.html#213366064">(Oct 15 2020 at 00:09)</a>:</h4>
<p>Confirmed to be working.  For those of you who need to use the SUSHI 1.0.0 beta releases, I recommend the following <code>fsh.ini</code> config:</p>
<div class="codehilite"><pre><span></span><code>[FSH]
sushi-version=beta
</code></pre></div>


<p>See <a href="#narrow/stream/215610-shorthand/topic/Build.20failure.20in.20auto-build.3F/near/213365948">the thread on the shorthand stream</a> for more details.</p>



<a name="213367490"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Selecting%20SUSHI%20Versions%20in%20AutoBuild/near/213367490" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Selecting.20SUSHI.20Versions.20in.20AutoBuild.html#213367490">(Oct 15 2020 at 00:31)</a>:</h4>
<p>in the future, IGs built by Sushi will be required to specify the correct version of FSH to run before submitting for publication</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
