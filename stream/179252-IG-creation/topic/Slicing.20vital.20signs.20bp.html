---
layout: page
title: "FHIR Chat  · Slicing vital signs bp · IG creation"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/index.html">IG creation</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Slicing.20vital.20signs.20bp.html">Slicing vital signs bp</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="189188228"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Slicing%20vital%20signs%20bp/near/189188228" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Townley-O&#x27;Neill <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Slicing.20vital.20signs.20bp.html#189188228">(Feb 27 2020 at 05:29)</a>:</h4>
<p>This is in STU3.<br>
We have profiled the vital signs <a href="http://hl7.org/fhir/STU3/bp.html" target="_blank" title="http://hl7.org/fhir/STU3/bp.html">bp</a> profile. We want to add slices for SNOMED CT to <a href="http://hl7.org/fhir/STU3/bp-definitions.html#bp.Observation.code" target="_blank" title="http://hl7.org/fhir/STU3/bp-definitions.html#bp.Observation.code">code</a>, <a href="http://hl7.org/fhir/STU3/bp-definitions.html#bp.Observation.component:systolicbp.code" target="_blank" title="http://hl7.org/fhir/STU3/bp-definitions.html#bp.Observation.component:systolicbp.code">component:SystolicBP.code</a> and <a href="http://hl7.org/fhir/STU3/bp-definitions.html#bp.Observation.component:diastolicbp.code" target="_blank" title="http://hl7.org/fhir/STU3/bp-definitions.html#bp.Observation.component:diastolicbp.code">component:DiastolicBP.code</a>.</p>



<a name="189188389"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Slicing%20vital%20signs%20bp/near/189188389" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Townley-O&#x27;Neill <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Slicing.20vital.20signs.20bp.html#189188389">(Feb 27 2020 at 05:33)</a>:</h4>
<p>When I have added a slice to <a href="http://hl7.org/fhir/STU3/bp-definitions.html#bp.Observation.component:systolicbp.code.coding" target="_blank" title="http://hl7.org/fhir/STU3/bp-definitions.html#bp.Observation.component:systolicbp.code.coding">component:SystolicBP.code.coding</a> and <a href="http://hl7.org/fhir/STU3/bp-definitions.html#bp.Observation.component:diastolicbp.code.coding" target="_blank" title="http://hl7.org/fhir/STU3/bp-definitions.html#bp.Observation.component:diastolicbp.code.coding">component.DiastolicBP.code.coding</a>, the validator rejects my examples with the errors:</p>



<a name="189188429"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Slicing%20vital%20signs%20bp/near/189188429" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Townley-O&#x27;Neill <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Slicing.20vital.20signs.20bp.html#189188429">(Feb 27 2020 at 05:34)</a>:</h4>
<blockquote>
<p>Error in discriminator at Observation.component:<strong>SystolicBP</strong>.code.coding: found a sliced element while resolving the fixed value for one of the slices</p>
</blockquote>
<p>and</p>
<blockquote>
<p>Error in discriminator at Observation.component:<strong>DiastolicBP</strong>.code.coding: found a sliced element while resolving the fixed value for one of the slices</p>
</blockquote>



<a name="189188452"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Slicing%20vital%20signs%20bp/near/189188452" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Townley-O&#x27;Neill <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Slicing.20vital.20signs.20bp.html#189188452">(Feb 27 2020 at 05:35)</a>:</h4>
<p>But it does not have any trouble with the new slice on <a href="http://hl7.org/fhir/STU3/bp-definitions.html#bp.Observation.code.coding" target="_blank" title="http://hl7.org/fhir/STU3/bp-definitions.html#bp.Observation.code.coding">code.coding</a>.</p>
<p>Strange.</p>



<a name="189188524"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Slicing%20vital%20signs%20bp/near/189188524" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Townley-O&#x27;Neill <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Slicing.20vital.20signs.20bp.html#189188524">(Feb 27 2020 at 05:37)</a>:</h4>
<p>The validator will accept my example if the profile makes all 4 instances of component.code.coding.code 1..1.</p>
<p>I think that all elements in the discriminator should be required in slice definitions, so I am surprised that slicing works with <a href="http://hl7.org/fhir/STU3/bp-definitions.html#bp.Observation.code.coding" target="_blank" title="http://hl7.org/fhir/STU3/bp-definitions.html#bp.Observation.code.coding">code.coding</a> optional.</p>



<a name="189188706"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Slicing%20vital%20signs%20bp/near/189188706" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Townley-O&#x27;Neill <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Slicing.20vital.20signs.20bp.html#189188706">(Feb 27 2020 at 05:42)</a>:</h4>
<p><strong>tl:dr</strong>: Why does the validator treat differently additional slices to Observation.code.coding and Observation.<strong>component</strong>.code.coding, in a profile derived from <a href="http://hl7.org/fhir/STU3/bp.html" target="_blank" title="http://hl7.org/fhir/STU3/bp.html">Vital SIgns BP</a>?</p>



<a name="189188864"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Slicing%20vital%20signs%20bp/near/189188864" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Townley-O&#x27;Neill <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Slicing.20vital.20signs.20bp.html#189188864">(Feb 27 2020 at 05:47)</a>:</h4>
<p>The profile behind this is <a href="http://build.fhir.org/ig/hl7au/au-fhir-childhealth/StructureDefinition-ncdhc-observation-vitalsign-bp.html" target="_blank" title="http://build.fhir.org/ig/hl7au/au-fhir-childhealth/StructureDefinition-ncdhc-observation-vitalsign-bp.html">NCDHC Blood Pressure(BP) Vital Sign Observation Profile</a>.<br>
It uses the solution mentioned above: it makes all 4 instances of component.code.coding.code 1..1. And also makes the instances of code.coding.code 1..1.</p>



<a name="189271118"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Slicing%20vital%20signs%20bp/near/189271118" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Townley-O&#x27;Neill <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Slicing.20vital.20signs.20bp.html#189271118">(Feb 28 2020 at 00:04)</a>:</h4>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> </p>
<blockquote>
<p>Why does the validator treat differently additional slices to Observation.code.coding and Observation.component.code.coding, in a profile derived from Vital SIgns BP?</p>
</blockquote>



<a name="189275245"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Slicing%20vital%20signs%20bp/near/189275245" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Slicing.20vital.20signs.20bp.html#189275245">(Feb 28 2020 at 01:15)</a>:</h4>
<p>because you have sliced the component on the code</p>



<a name="189275264"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Slicing%20vital%20signs%20bp/near/189275264" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Slicing.20vital.20signs.20bp.html#189275264">(Feb 28 2020 at 01:15)</a>:</h4>
<p>Submit a change request re: whether all elements in a slice discriminator path should be at least minOccurs=1</p>



<a name="189275336"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Slicing%20vital%20signs%20bp/near/189275336" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Slicing.20vital.20signs.20bp.html#189275336">(Feb 28 2020 at 01:17)</a>:</h4>
<p>they don't all have to be, they just have to be distinct</p>



<a name="189275348"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Slicing%20vital%20signs%20bp/near/189275348" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Slicing.20vital.20signs.20bp.html#189275348">(Feb 28 2020 at 01:17)</a>:</h4>
<p>the problem here is that the base profile doesn't slice on component.code, it slices on component.code.coding.code</p>



<a name="189275349"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Slicing%20vital%20signs%20bp/near/189275349" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Slicing.20vital.20signs.20bp.html#189275349">(Feb 28 2020 at 01:17)</a>:</h4>
<p>But in the discriminator, why would it make sense to list something with a fixed value that's optional</p>



<a name="189275435"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Slicing%20vital%20signs%20bp/near/189275435" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Slicing.20vital.20signs.20bp.html#189275435">(Feb 28 2020 at 01:19)</a>:</h4>
<p>it you have more than one path, you might have slices where one element fully differentiates and another is not used when that happens, but for some slices, the first element has a non-differentiating value and the second element is populated and differentiating. Address often works like this on use + type</p>



<a name="189275523"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Slicing%20vital%20signs%20bp/near/189275523" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Townley-O&#x27;Neill <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Slicing.20vital.20signs.20bp.html#189275523">(Feb 28 2020 at 01:21)</a>:</h4>
<p>It now makes sense to me that components of the discriminator can be optional.</p>



<a name="189275775"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Slicing%20vital%20signs%20bp/near/189275775" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Townley-O&#x27;Neill <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Slicing.20vital.20signs.20bp.html#189275775">(Feb 28 2020 at 01:26)</a>:</h4>
<p>OK. The slicing that is breaking is the slicing of component, not of component.coding.<br>
Thanks.</p>



<a name="189275919"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Slicing%20vital%20signs%20bp/near/189275919" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Townley-O&#x27;Neill <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Slicing.20vital.20signs.20bp.html#189275919">(Feb 28 2020 at 01:30)</a>:</h4>
<p>Can the error message be improved to clarify that the problem is with component and not component.coding?</p>



<a name="189276337"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Slicing%20vital%20signs%20bp/near/189276337" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Slicing.20vital.20signs.20bp.html#189276337">(Feb 28 2020 at 01:38)</a>:</h4>
<p>My point is that if I set a fixed value for use in a single slice and it's a discriminator, it should be 1..1.</p>



<a name="189280334"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Slicing%20vital%20signs%20bp/near/189280334" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Slicing.20vital.20signs.20bp.html#189280334">(Feb 28 2020 at 03:16)</a>:</h4>
<p>So <span class="user-mention" data-user-id="191682">@Richard Townley-O'Neill</span> can you submit a change request with respect to that bit?</p>



<a name="189280450"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Slicing%20vital%20signs%20bp/near/189280450" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Slicing.20vital.20signs.20bp.html#189280450">(Feb 28 2020 at 03:20)</a>:</h4>
<p>with respect to what?</p>



<a name="189280489"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Slicing%20vital%20signs%20bp/near/189280489" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Slicing.20vital.20signs.20bp.html#189280489">(Feb 28 2020 at 03:20)</a>:</h4>
<p>I'm not sure I can improve the error message</p>



<a name="189280495"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Slicing%20vital%20signs%20bp/near/189280495" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Slicing.20vital.20signs.20bp.html#189280495">(Feb 28 2020 at 03:20)</a>:</h4>
<p>the underlying issue is more serious - what does it mean to try and do what is being done here? it seems reasonable to add a slice, but what is the impact on the other slicing?</p>



<a name="189280553"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Slicing%20vital%20signs%20bp/near/189280553" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Slicing.20vital.20signs.20bp.html#189280553">(Feb 28 2020 at 03:22)</a>:</h4>
<p>That if you're setting a fixed value in a particular slice to satisfy a discriminator, elements from the base of the slice to the fixed value element need to be minOccurs of 1+.</p>



<a name="189280642"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Slicing%20vital%20signs%20bp/near/189280642" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Slicing.20vital.20signs.20bp.html#189280642">(Feb 28 2020 at 03:25)</a>:</h4>
<p>I don't know what this means:</p>
<blockquote>
<p>elements from the base of the slice to the fixed value element</p>
</blockquote>



<a name="189280780"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Slicing%20vital%20signs%20bp/near/189280780" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Slicing.20vital.20signs.20bp.html#189280780">(Feb 28 2020 at 03:28)</a>:</h4>
<p>If you're slicing on Observation.code by coding.code and coding.system, then a slice that declares fixed values for coding.code and coding.system better also declare minOccurs of 1 on Observation.code.coding, Observation.code.coding.code and Observation.code.coding.system</p>



<a name="189280787"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Slicing%20vital%20signs%20bp/near/189280787" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Slicing.20vital.20signs.20bp.html#189280787">(Feb 28 2020 at 03:29)</a>:</h4>
<p>It's not sensible to have a slice where you're declaring fixed values for elements where the slice would match if the elements were omitted entirely.</p>



<a name="189280866"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Slicing%20vital%20signs%20bp/near/189280866" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Slicing.20vital.20signs.20bp.html#189280866">(Feb 28 2020 at 03:31)</a>:</h4>
<p>well, I don't entirely agree. That was my point above. It's certainly sensible that code.coding would be 1+ but it's not necessary for both code and system to have values</p>



<a name="189280870"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Slicing%20vital%20signs%20bp/near/189280870" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Townley-O&#x27;Neill <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Slicing.20vital.20signs.20bp.html#189280870">(Feb 28 2020 at 03:31)</a>:</h4>
<p>Observation.code is 1..1, do you mean </p>
<blockquote>
<p>slicing on Observation.code.coding. by code and system, then a slice that declares fixed values for coding.code and coding.system better also declare minOccurs of 1 on Observation.code.coding,</p>
</blockquote>



<a name="189281790"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Slicing%20vital%20signs%20bp/near/189281790" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Slicing.20vital.20signs.20bp.html#189281790">(Feb 28 2020 at 03:55)</a>:</h4>
<p>It's totally fine if they don't both have values.  But if they <em>do</em> have values, they should be 1..x</p>



<a name="189281845"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Slicing%20vital%20signs%20bp/near/189281845" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Slicing.20vital.20signs.20bp.html#189281845">(Feb 28 2020 at 03:56)</a>:</h4>
<p>So, for example, you could have a slice where coding is 1..x and system is 1..1 and has a fixed system; you could have a slice where coding is 1..x and code is 1..1 and has a fixe code; you could have a slice where coding is 0..0 and no fixed values at all.</p>



<a name="189281858"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Slicing%20vital%20signs%20bp/near/189281858" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Slicing.20vital.20signs.20bp.html#189281858">(Feb 28 2020 at 03:57)</a>:</h4>
<p>But you can't have a slice where coding is 0..x and system is 0..1 and code is 0..1 and code and system have fixed values.  (Which the validator is totally happy with at the moment.)</p>



<a name="189282344"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Slicing%20vital%20signs%20bp/near/189282344" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Townley-O&#x27;Neill <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Slicing.20vital.20signs.20bp.html#189282344">(Feb 28 2020 at 04:11)</a>:</h4>
<p>I previously expected that optional elements in the discriminator would break slicing. But, now I think of the lack of an element as just another "value".</p>



<a name="189282347"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Slicing%20vital%20signs%20bp/near/189282347" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Townley-O&#x27;Neill <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Slicing.20vital.20signs.20bp.html#189282347">(Feb 28 2020 at 04:11)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191320">Lloyd McKenzie</span> <a href="#narrow/stream/179252-IG-creation/topic/Slicing.20vital.20signs.20bp/near/189281858" title="#narrow/stream/179252-IG-creation/topic/Slicing.20vital.20signs.20bp/near/189281858">said</a>:</p>
<blockquote>
<p>But you can't have a slice where coding is 0..x and system is 0..1 and code is 0..1 and code and system have fixed values.  (Which the validator is totally happy with at the moment.)</p>
</blockquote>
<p>I do not follow why optional and fixed value needs to be a problem. Defining a slice with an optional element claims that the slice includes instances without the element. If that element has a fixed value, it means that the only choices are no value or the fixed value.</p>



<a name="189283044"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Slicing%20vital%20signs%20bp/near/189283044" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Slicing.20vital.20signs.20bp.html#189283044">(Feb 28 2020 at 04:29)</a>:</h4>
<p>In what situation would it make sense to say "This slice matches if the value corresponds to the fixed value or if it's absent"?  That's going to be exceptionally rare.  And having designers do it by accident is going to be exceptionally common.  So I'd much rather have the rule and in the exceptionally rare case, have to define two slices with identical constraints for the fixed value and no value cases.</p>



<a name="189283973"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Slicing%20vital%20signs%20bp/near/189283973" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Townley-O&#x27;Neill <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Slicing.20vital.20signs.20bp.html#189283973">(Feb 28 2020 at 04:55)</a>:</h4>
<p>I agree that is is confusing. <br>
I had not thought of the fact that mistaken use will be more common than informed use, but I agree, it will be.</p>



<a name="189284081"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Slicing%20vital%20signs%20bp/near/189284081" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Townley-O&#x27;Neill <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Slicing.20vital.20signs.20bp.html#189284081">(Feb 28 2020 at 04:58)</a>:</h4>
<p>So a rule would be<br>
In a slice, at lest one part of the discriminator will have a value</p>



<a name="189284162"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Slicing%20vital%20signs%20bp/near/189284162" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Slicing.20vital.20signs.20bp.html#189284162">(Feb 28 2020 at 05:00)</a>:</h4>
<p>No, it's valid for one slice to be one where none of the discriminators have a value.  My rule is that an element that is part of a value-based discriminator has a fixed value, then that element and all elements along the path from the slice root have to be mandatory (minOccurs=1+)</p>



<a name="189284197"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Slicing%20vital%20signs%20bp/near/189284197" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Townley-O&#x27;Neill <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Slicing.20vital.20signs.20bp.html#189284197">(Feb 28 2020 at 05:01)</a>:</h4>
<p>What happens if it is part of a pattern-based discriminator?</p>



<a name="189284738"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Slicing%20vital%20signs%20bp/near/189284738" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Slicing.20vital.20signs.20bp.html#189284738">(Feb 28 2020 at 05:17)</a>:</h4>
<p>Pattern-based would presumably require min=1 for nodes between the slice and the pattern too, though because they can use pattern, there wouldn't typically be many nodes (if any) where that would be relevant</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
