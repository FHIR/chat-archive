---
layout: page
title: "FHIR Chat  · Sushi option to gen IG Context Json Schema · IG creation"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/index.html">IG creation</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20option.20to.20gen.20IG.20Context.20Json.20Schema.html">Sushi option to gen IG Context Json Schema</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="278614133"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20option%20to%20gen%20IG%20Context%20Json%20Schema/near/278614133" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Al Pivonka <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20option.20to.20gen.20IG.20Context.20Json.20Schema.html#278614133">(Apr 11 2022 at 20:45)</a>:</h4>
<p>I'm going out on a limb here and this will show my ignorance so please try to be nice.</p>
<p>While looking into sushi command line I did not see an option that would generate a context specific <a href="https://build.fhir.org/downloads.html#7.1">FHIR schema</a> for the context of the IG.</p>
<p>Could see the generation of the <a href="https://build.fhir.org/downloads.html#7.1">FHIR schema</a> as part of the handoff to the delivery team which would enable them to use it for constraints at the service level. </p>
<p>I could be missing something. Please correct me if I am.</p>



<a name="278616036"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20option%20to%20gen%20IG%20Context%20Json%20Schema/near/278616036" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20option.20to.20gen.20IG.20Context.20Json.20Schema.html#278616036">(Apr 11 2022 at 21:00)</a>:</h4>
<p>We don't have tooling that creates profile-specific schemas.  XML schema is very poor at expressing the types of things we do in profiles.  You can't enforce most vocabulary bindings, you can't handle slicing (which means you can't deal with any extensions).  Given the limited value they'd have, we just don't bother.  (This isn't Sushi-specific it's true for all profiles.)</p>



<a name="278619155"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20option%20to%20gen%20IG%20Context%20Json%20Schema/near/278619155" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Al Pivonka <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20option.20to.20gen.20IG.20Context.20Json.20Schema.html#278619155">(Apr 11 2022 at 21:24)</a>:</h4>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> (Thank you for your reply) . </p>
<p>Then, I'm going to make a base assumption that it is up the the delivery team to make changes to their service level validation(schemas) to conform to the context specific IG.</p>
<p>then the next question begs to be asked, how to validate the IG agains the implementation ? Manual?</p>



<a name="278620951"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20option%20to%20gen%20IG%20Context%20Json%20Schema/near/278620951" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20option.20to.20gen.20IG.20Context.20Json.20Schema.html#278620951">(Apr 11 2022 at 21:41)</a>:</h4>
<p>what kind of validation do you want?</p>



<a name="278623889"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20option%20to%20gen%20IG%20Context%20Json%20Schema/near/278623889" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20option.20to.20gen.20IG.20Context.20Json.20Schema.html#278623889">(Apr 11 2022 at 22:11)</a>:</h4>
<p>Have you looked through this page? <a href="https://build.fhir.org/validation">https://build.fhir.org/validation</a></p>



<a name="278691949"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20option%20to%20gen%20IG%20Context%20Json%20Schema/near/278691949" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Al Pivonka <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20option.20to.20gen.20IG.20Context.20Json.20Schema.html#278691949">(Apr 12 2022 at 13:25)</a>:</h4>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span>  (Thanks) Reading.....</p>



<a name="278698254"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20option%20to%20gen%20IG%20Context%20Json%20Schema/near/278698254" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Al Pivonka <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20option.20to.20gen.20IG.20Context.20Json.20Schema.html#278698254">(Apr 12 2022 at 14:12)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span>  (thank you for your question) <br>
I've added (FHIR JSON schema) to my original question (Hoping this may help clarify my statements) </p>
<p>My base assumption: the IG is used to guide the delivery team on how to implement the specific context changes of the IG (Extensions, Profile changes, etc. ) . </p>
<p>Use of the FHIR JSON Schema to validate service call message payloads for schema correctness.  (Like: OPEN API/Swagger schemas)</p>
<p>If the IG outlines context specific changes to profiles and extensions (etc), the delivery team would have to make corresponding changes the FHIR JSON schema  to enable validation of the new structure(s) caused by the specific context of the IG changes. </p>
<p>I realize I have a great deal to learn . I appreciate your time.</p>



<a name="278714982"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20option%20to%20gen%20IG%20Context%20Json%20Schema/near/278714982" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20option.20to.20gen.20IG.20Context.20Json.20Schema.html#278714982">(Apr 12 2022 at 16:08)</a>:</h4>
<p>Right.  Short answer is that FHIR interfaces tend to be more complex than what can reasonably be represented by JSON schema.  If you were defining a stand-alone interface, you wouldn't have a repeating 'extension' element with different constraints on different repetitions, and similar behavior for identifiers, codings, etc.  Instead, you'd have separate named properties for each extension, relevant identifier type and you could have a nice tight JSON schema that fully documented your custom REST API.  FHIR doesn't work like that.  FHIR has a common schema that's the same across all systems' APIs.  As a result, the JSON doesn't always lend itself to defining a schema for the interface for a single system (or set of expectations defined by a single IG).</p>



<a name="278717230"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20option%20to%20gen%20IG%20Context%20Json%20Schema/near/278717230" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gino Canessa <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20option.20to.20gen.20IG.20Context.20Json.20Schema.html#278717230">(Apr 12 2022 at 16:26)</a>:</h4>
<p>On a related note, some of us have been working on code generation from IGs to handle parts of this.  We found that generally, people like to use an SDK to do most of the heavy-lifting, and having tooling that integrates with that is desired.</p>
<p>Outputs are like <a href="https://github.com/GinoCanessa/FHIR-CS-Profiling-Basic/tree/main/profiles">C# example</a>.  Notes:</p>
<ul>
<li>The tooling to generate this is WIP, but getting closer.</li>
<li>The goal is to be able to output code that integrates with the different SDKs in different languages (e.g., Firely/C#, HAPI/Java, Apple/Swift, etc.)</li>
<li>Validation is limited to 'things that do not require a terminology service'<ul>
<li><em>looking</em> at what integration with a tx server is on the list, but explicitly not part of MVP</li>
</ul>
</li>
</ul>



<a name="278731539"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20option%20to%20gen%20IG%20Context%20Json%20Schema/near/278731539" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Al Pivonka <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20option.20to.20gen.20IG.20Context.20Json.20Schema.html#278731539">(Apr 12 2022 at 18:13)</a>:</h4>
<p>I think I'm getting it.</p>
<p>Unless the IG specifies  a custom profile; which isn't recommended and many have told me; one is working with extensions. Looking at the JSON schema for an extension:  an extension is an extension. </p>
<p>Code Systems are enumerations and value sets are references to the enums within the Code System. I'm not a JSON schema guy yet I'm not sure how that would be enforced on an extension...</p>
<p>Are my assumptions correct?</p>
<p>BTW thanks for the explanations.</p>
<p><span class="user-mention" data-user-id="222054">@Gino Canessa</span>  Where can I find code gen you speak of?</p>



<a name="278735778"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Sushi%20option%20to%20gen%20IG%20Context%20Json%20Schema/near/278735778" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gino Canessa <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Sushi.20option.20to.20gen.20IG.20Context.20Json.20Schema.html#278735778">(Apr 12 2022 at 18:45)</a>:</h4>
<p>The repo is on GitHub: <a href="https://github.com/microsoft/fhir-codegen">fhir-codegen</a>; you will want to look at the <code>dev</code> branch for any of the work with IGs.</p>
<p>The FHIR-core related features are all there and stable, but for v1 of 'IG' support:</p>
<ul>
<li>Reading/parsing of IGs (mostly done - current pass works but I am not sure if everything required is there yet)</li>
<li>UI (decent, but needs work for a full v1)</li>
<li>A simplified export module for extensions (mostly just sketched out right now - previously I had just been using the same 'Language' export modules, but there is a lot of 'extra' that can be trimmed out to simplify)</li>
</ul>
<p>Unfortunately I have a pretty full plate right now, so while work is regular it is not as fast as I would like.  Once everything is good for a v1, we'll push through a release and <em>maybe</em> sort out a hosted story too.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
