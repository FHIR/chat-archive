---
layout: page
title: "FHIR Chat  · IGPub Error: Models - element.base cannot appear... · IG creation"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/index.html">IG creation</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IGPub.20Error.3A.20Models.20-.20element.2Ebase.20cannot.20appear.2E.2E.2E.html">IGPub Error: Models - element.base cannot appear...</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153947763"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IGPub%20Error%3A%20Models%20-%20element.base%20cannot%20appear.../near/153947763" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IGPub.20Error.3A.20Models.20-.20element.2Ebase.20cannot.20appear.2E.2E.2E.html#153947763">(Mar 25 2018 at 22:57)</a>:</h4>
<p>I'm not sure what to make of the following error being reported by the IG Publisher:</p>
<blockquote>
<p><strong>Path</strong>: StructureDefinition/oncology-StageTimingPrefix-model: StructureDefinition<br>
<strong>Severity</strong>: error<br>
<strong>Message</strong>: element.base cannot appear if there is no base on the structure definition [snapshot.exists() implies (snapshot.element.base.exists() = baseDefinition.exists())]</p>
</blockquote>
<p>I see that a lot.  Above is just an example.</p>
<p>In my structure definition, I declare a <code>baseDefinition</code>:</p>
<div class="codehilite"><pre><span></span>&quot;baseDefinition&quot;: &quot;http://hl7.org/fhir/StructureDefinition/Element&quot;
</pre></div>


<p>I don't have any snapshot elements, however, that use <code>base</code>, as none of them are based on a parent element.  Is that my problem?  Should I be adding a <code>base</code> on my root element that points to <code>Element</code>?</p>



<a name="153947764"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IGPub%20Error%3A%20Models%20-%20element.base%20cannot%20appear.../near/153947764" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IGPub.20Error.3A.20Models.20-.20element.2Ebase.20cannot.20appear.2E.2E.2E.html#153947764">(Mar 25 2018 at 23:02)</a>:</h4>
<p>I don't know if this is related, but I just noticed that when the IG Publisher processes my logical models, it seems to <em>insert</em> a <code>base</code> on every one of my <code>snapshot</code> elements.  For example, in the example above (<code>StructureDefinition/oncology-StageTimingPrefix-model</code>), although I didn't put any <code>base</code> properties in the elements, the JSON in my IG now has:</p>
<div class="codehilite"><pre><span></span>&quot;base&quot; : {
  &quot;path&quot; : &quot;oncology-StageTimingPrefix-model&quot;,
  &quot;min&quot; : 0,
  &quot;max&quot; : &quot;*&quot;
}
</pre></div>


<p>and</p>
<div class="codehilite"><pre><span></span>&quot;base&quot; : {
  &quot;path&quot; : &quot;oncology-StageTimingPrefix-model.value&quot;,
  &quot;min&quot; : 1,
  &quot;max&quot; : &quot;1&quot;
}
</pre></div>


<p>Is this expected?  And is it related to my post above?</p>



<a name="153947785"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IGPub%20Error%3A%20Models%20-%20element.base%20cannot%20appear.../near/153947785" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IGPub.20Error.3A.20Models.20-.20element.2Ebase.20cannot.20appear.2E.2E.2E.html#153947785">(Mar 26 2018 at 03:34)</a>:</h4>
<p>umm. I'm not sure what the right solution to this one is. For r4, all the base elements must be populated</p>



<a name="153947786"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IGPub%20Error%3A%20Models%20-%20element.base%20cannot%20appear.../near/153947786" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IGPub.20Error.3A.20Models.20-.20element.2Ebase.20cannot.20appear.2E.2E.2E.html#153947786">(Mar 26 2018 at 03:34)</a>:</h4>
<p>so this appears to be an R4 issue, and you should populate base on the snapshot properly</p>



<a name="153947918"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IGPub%20Error%3A%20Models%20-%20element.base%20cannot%20appear.../near/153947918" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IGPub.20Error.3A.20Models.20-.20element.2Ebase.20cannot.20appear.2E.2E.2E.html#153947918">(Mar 26 2018 at 12:42)</a>:</h4>
<p>OK.  So when I'm creating a new logical model and declaring a brand new element not based on anything, just set the base to itself (e.g., copy its own path and cardinality)?  Is that what you're suggesting?</p>



<a name="153947923"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IGPub%20Error%3A%20Models%20-%20element.base%20cannot%20appear.../near/153947923" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IGPub.20Error.3A.20Models.20-.20element.2Ebase.20cannot.20appear.2E.2E.2E.html#153947923">(Mar 26 2018 at 12:52)</a>:</h4>
<p>In STU3, logical model element definitions don't have a base at all. Forge for STU3 generates logical models w/o any base component. According to the spec, ElementDefinition.base is still optional in R4:<br>
<a href="http://build.fhir.org/elementdefinition-definitions.html#ElementDefinition.base" target="_blank" title="http://build.fhir.org/elementdefinition-definitions.html#ElementDefinition.base">http://build.fhir.org/elementdefinition-definitions.html#ElementDefinition.base</a><br>
However the R4 spec now also states: "For tooling simplicity, the base information must always be populated in element definitions in snap shots, even if it is the same."<br>
So I guess we should clarify the use of .base specifically for logical models.</p>



<a name="153947926"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IGPub%20Error%3A%20Models%20-%20element.base%20cannot%20appear.../near/153947926" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IGPub.20Error.3A.20Models.20-.20element.2Ebase.20cannot.20appear.2E.2E.2E.html#153947926">(Mar 26 2018 at 12:55)</a>:</h4>
<p>Also see <a href="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=12295" target="_blank" title="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=12295">GF#12295</a></p>



<a name="153948011"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IGPub%20Error%3A%20Models%20-%20element.base%20cannot%20appear.../near/153948011" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IGPub.20Error.3A.20Models.20-.20element.2Ebase.20cannot.20appear.2E.2E.2E.html#153948011">(Mar 26 2018 at 14:08)</a>:</h4>
<p>Thanks for the extra information, <span class="user-mention" data-user-id="191336">@Michel Rutten</span>.  I now understand what Grahame meant by "it's an R4 issue"...  So even though I'm publishing a STU3 IG, the publisher is enforcing an R4 rule in this case.  Assuming that it's not outright <em>wrong</em> to generate an STU3 element with itself as a base, and since the publisher is inserting a <code>base</code> at publish-time anyway, I'll probably go ahead and add it to my STU3 models.  One less thing to do when we eventually move to R4!</p>



<a name="153948020"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IGPub%20Error%3A%20Models%20-%20element.base%20cannot%20appear.../near/153948020" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IGPub.20Error.3A.20Models.20-.20element.2Ebase.20cannot.20appear.2E.2E.2E.html#153948020">(Mar 26 2018 at 14:21)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="191469">@Chris Moesel</span>, If I recall correctly, Chris Grenz (submitter of <a href="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=12295" target="_blank" title="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=12295">GF#12295</a>) proposed that in R4, the .base property of newly introduced elements (allowed in resource definitions and logical model definitions) should simply refer to the element itself (empty in STU3). So your approach conforms to Chris' proposal for R4.</p>



<a name="153948185"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IGPub%20Error%3A%20Models%20-%20element.base%20cannot%20appear.../near/153948185" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IGPub.20Error.3A.20Models.20-.20element.2Ebase.20cannot.20appear.2E.2E.2E.html#153948185">(Mar 26 2018 at 19:00)</a>:</h4>
<p>I</p>



<a name="153948187"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IGPub%20Error%3A%20Models%20-%20element.base%20cannot%20appear.../near/153948187" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IGPub.20Error.3A.20Models.20-.20element.2Ebase.20cannot.20appear.2E.2E.2E.html#153948187">(Mar 26 2018 at 19:01)</a>:</h4>
<p>I'm not quite sure why that's being applied to an R3 logical model.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
