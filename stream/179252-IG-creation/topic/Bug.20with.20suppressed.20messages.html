---
layout: page
title: "FHIR Chat  · Bug with suppressed messages · IG creation"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/index.html">IG creation</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Bug.20with.20suppressed.20messages.html">Bug with suppressed messages</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="265507102"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Bug%20with%20suppressed%20messages/near/265507102" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Bug.20with.20suppressed.20messages.html#265507102">(Dec 19 2021 at 23:44)</a>:</h4>
<p>At some point, the code on line 56 of SuppressedMessageInformation.jave (within the 'contains' function) was changed from:<br>
<code>        if (sm.message.equals(message)) {</code><br>
to<br>
<code>        if (sm.message.contains(message)) {</code></p>
<p>It needs to change back.  The text in the suppressed message must be an exact match, not just a contains check.  (Matching against just the message or message + display is already handled elsewhere.)  With the code as it is now, I had a suppressed message in SDC that said this:<br>
<code>WARNING: StructureDefinition.where(url = 'http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-adapt'): The Implementation Guide contains no examples for this profile</code><br>
However, because this suppressed message contained the 'message' part <code>The Implementation Guide contains no examples for this profile</code>, it was suppressing <em>all</em> occurrences of this message rather than just the specified location.  (Meaning I thought I had examples for all of my profiles, when in fact I didn't.)  Changing things back corrects this issue.</p>



<a name="265517887"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Bug%20with%20suppressed%20messages/near/265517887" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sarah Gaunt <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Bug.20with.20suppressed.20messages.html#265517887">(Dec 20 2021 at 03:39)</a>:</h4>
<p>I thought this was done on purpose - so that the suppress warnings files weren't so big and messy. I'm sure that you asked me to clean up one of my suppress files on an FMG call saying that we didn't have to put the full message in anymore. Maybe I'm mis-remembering? But ALL my suppress files now rely on the contains rather than the equals.</p>



<a name="265518048"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Bug%20with%20suppressed%20messages/near/265518048" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sarah Gaunt <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Bug.20with.20suppressed.20messages.html#265518048">(Dec 20 2021 at 03:42)</a>:</h4>
<p>Not saying it's wrong to change it back to equals, just that it might cause suppress files to stop working.</p>



<a name="265519816"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Bug%20with%20suppressed%20messages/near/265519816" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Bug.20with.20suppressed.20messages.html#265519816">(Dec 20 2021 at 04:23)</a>:</h4>
<p>There are two options - full message, or the message from after the ":" where the preceding part describes the location where the issue was detected.  (Grahame's added a couple of additional options, which are the full HTML and the internal key used for the message, though I doubt most people will use those.)</p>
<p>We don't want just a 'contains' test because that will result in suppressing things you didn't intend to.  What's happening right now (with the bug) is that if you suppress a full message with location, it will incidentally suppress all occurrences of that message independent of location - and that's definitely <em>not</em> what's wanted.</p>



<a name="265529698"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Bug%20with%20suppressed%20messages/near/265529698" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sarah Gaunt <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Bug.20with.20suppressed.20messages.html#265529698">(Dec 20 2021 at 07:44)</a>:</h4>
<p>Ah ok, makes sense. Sounds like my suppress files with just the stuff after the : will still work.</p>



<a name="265734989"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Bug%20with%20suppressed%20messages/near/265734989" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Bug.20with.20suppressed.20messages.html#265734989">(Dec 21 2021 at 21:14)</a>:</h4>
<p>it was done on purpose. And people do use it to suppress messages. The suppressed messages are still shown at the bottom of the page - you would want to check them anyway.</p>



<a name="265735100"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Bug%20with%20suppressed%20messages/near/265735100" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Bug.20with.20suppressed.20messages.html#265735100">(Dec 21 2021 at 21:16)</a>:</h4>
<p>but I don't want a war over this, so I've changed it so it does a case insensitive equality check unless you have % at the start and/or end of the message</p>



<a name="265735145"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Bug%20with%20suppressed%20messages/near/265735145" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Bug.20with.20suppressed.20messages.html#265735145">(Dec 21 2021 at 21:16)</a>:</h4>
<p>will be in the next release</p>



<a name="265735244"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Bug%20with%20suppressed%20messages/near/265735244" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Pyke <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Bug.20with.20suppressed.20messages.html#265735244">(Dec 21 2021 at 21:17)</a>:</h4>
<p>So if you add a %, it's a contain, if not it's an equals.  I like that!</p>



<a name="265815786"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Bug%20with%20suppressed%20messages/near/265815786" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Bug.20with.20suppressed.20messages.html#265815786">(Dec 22 2021 at 15:17)</a>:</h4>
<p>'contains' is not safe - at least not when checking location-specific suppression against the 'message'.  Key thing is to ensure that if you suppress something location-specific, it can't ever match to a message that isn't from that location.  Will the new mechanism ensure that?</p>



<a name="265844244"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Bug%20with%20suppressed%20messages/near/265844244" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Bug.20with.20suppressed.20messages.html#265844244">(Dec 22 2021 at 19:42)</a>:</h4>
<p>no that's the point: maybe you want to suppress a class of messages. you don't have to use it that way</p>



<a name="265851666"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Bug%20with%20suppressed%20messages/near/265851666" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Bug.20with.20suppressed.20messages.html#265851666">(Dec 22 2021 at 20:55)</a>:</h4>
<p>The issue with the current behavior is I was trying to suppress a message for a specific location.  Because of how the code worked, it suppressed the message in <em>all</em> locations.  The new mechanism must ensure that if a location is specified in the suppression file, that it <em>only</em> suppresses that location, even if it might happen to 'contain' the location-independent message.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
