---
layout: page
title: "FHIR Chat  · Using pre-adoption ext mechanism with a modifier extension · IG creation"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/index.html">IG creation</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Using.20pre-adoption.20ext.20mechanism.20with.20a.20modifier.20extension.html">Using pre-adoption ext mechanism with a modifier extension</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="258229956"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Using%20pre-adoption%20ext%20mechanism%20with%20a%20modifier%20extension/near/258229956" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Abdullah Rafiqi <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Using.20pre-adoption.20ext.20mechanism.20with.20a.20modifier.20extension.html#258229956">(Oct 19 2021 at 16:47)</a>:</h4>
<p>Coming across error(s) using the <a href="http://hl7.org/fhir/StructureDefinition/request-doNotPerform">request-doNotPerform</a> extension as a modifier extension within <a href="http://build.fhir.org/ig/HL7/fhir-qi-core/StructureDefinition-qicore-devicenotrequested.html">deviceRequest</a>. The scope of the extension is outside of NutritionOrder and deviceRequest was one of the <a href="https://jira.hl7.org/browse/FHIR-26526">approved profiles</a> but recently informed that the final outcome was to add doNotPerform as an explicit element in R5. </p>
<p>It was suggested for R4 to use the <a href="https://build.fhir.org/versions.html#extensions">pre-adoption extension mechanism</a> for conversion between versions .- so <code>http://hl7.org/fhir/5.0/StructureDefinition/extension-DeviceRequest.doNotPerform</code></p>
<p>Changed the type within the profile spreadsheet from <code>Extension{http://hl7.org/fhir/StructureDefinition/request-doNotPerform}</code> to  <code>Extension{http://hl7.org/fhir/5.0/StructureDefinition/extension-DeviceRequest.doNotPerform}</code> but getting a build error within the publisher for '<em>reference of an unknown extension -http://hl7.org/fhir/5.0/StructureDefinition/extension-DeviceRequest.doNotPerform</em> '</p>
<p><a href="/user_uploads/10155/xx3sDXgU7ExD4qMBsGog2G6r/Screen-Shot-2021-10-19-at-12.37.54-PM.png">Spreadsheet</a></p>
<p><a href="/user_uploads/10155/eBHemDWx5Sby2ECdrLWIgZTw/Screen-Shot-2021-10-19-at-9.43.30-AM.png">Spreadsheet change with pre-adoption extension mechanism</a></p>
<p>Wanted to confirm if the pre-adoption extension mechanism will suffice for a modifierExtension and if the url looks to be correct?</p>



<a name="258244908"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Using%20pre-adoption%20ext%20mechanism%20with%20a%20modifier%20extension/near/258244908" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Using.20pre-adoption.20ext.20mechanism.20with.20a.20modifier.20extension.html#258244908">(Oct 19 2021 at 18:06)</a>:</h4>
<p>You might need to say "4.6" right now as 5.0 doesn't yet exist.</p>



<a name="258251954"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Using%20pre-adoption%20ext%20mechanism%20with%20a%20modifier%20extension/near/258251954" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Using.20pre-adoption.20ext.20mechanism.20with.20a.20modifier.20extension.html#258251954">(Oct 19 2021 at 18:51)</a>:</h4>
<p>no that would always be 5.0 not 4.6 in that context</p>



<a name="258252056"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Using%20pre-adoption%20ext%20mechanism%20with%20a%20modifier%20extension/near/258252056" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Using.20pre-adoption.20ext.20mechanism.20with.20a.20modifier.20extension.html#258252056">(Oct 19 2021 at 18:52)</a>:</h4>
<p>Thoughts on the cause of the error then <span class="user-mention" data-user-id="191316">@Grahame Grieve</span>?</p>



<a name="258252155"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Using%20pre-adoption%20ext%20mechanism%20with%20a%20modifier%20extension/near/258252155" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Using.20pre-adoption.20ext.20mechanism.20with.20a.20modifier.20extension.html#258252155">(Oct 19 2021 at 18:52)</a>:</h4>
<p>no idea. I'll have to debug. And my list of things to debug is growing rapidly this week</p>



<a name="260200245"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Using%20pre-adoption%20ext%20mechanism%20with%20a%20modifier%20extension/near/260200245" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Using.20pre-adoption.20ext.20mechanism.20with.20a.20modifier.20extension.html#260200245">(Nov 03 2021 at 21:29)</a>:</h4>
<p>Committed to QICore</p>



<a name="261060640"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Using%20pre-adoption%20ext%20mechanism%20with%20a%20modifier%20extension/near/261060640" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Using.20pre-adoption.20ext.20mechanism.20with.20a.20modifier.20extension.html#261060640">(Nov 10 2021 at 21:57)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> , I've done a bit of debugging here and I got as far as the "DeviceRequest.doNotPerform" doesn't appear to be in the xver-paths.json file. I'm guessing that's something that gets generated, but I'm not sure how or where?</p>



<a name="261061837"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Using%20pre-adoption%20ext%20mechanism%20with%20a%20modifier%20extension/near/261061837" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Using.20pre-adoption.20ext.20mechanism.20with.20a.20modifier.20extension.html#261061837">(Nov 10 2021 at 22:06)</a>:</h4>
<p>this should be fixed now</p>



<a name="261062229"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Using%20pre-adoption%20ext%20mechanism%20with%20a%20modifier%20extension/near/261062229" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Using.20pre-adoption.20ext.20mechanism.20with.20a.20modifier.20extension.html#261062229">(Nov 10 2021 at 22:09)</a>:</h4>
<p>roughly:</p>
<ul>
<li>the file itself is produced by the main build</li>
<li>when I do a release, I copy that file into the source for hl7.fhir.xver-extensions, and release a new version</li>
<li>I forgot to do that when I released 4.6.0, so I did last week - released 0.0.7</li>
<li>it has "package\other\xver-paths-4.6.json" in it</li>
<li>that contains DeviceRequest.doNotPerform</li>
<li>the validator maps /5.0/ to 4.6.0. And it should all work now</li>
</ul>



<a name="261072695"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Using%20pre-adoption%20ext%20mechanism%20with%20a%20modifier%20extension/near/261072695" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Using.20pre-adoption.20ext.20mechanism.20with.20a.20modifier.20extension.html#261072695">(Nov 10 2021 at 23:43)</a>:</h4>
<p>Perfect, thank you!</p>



<a name="261142812"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Using%20pre-adoption%20ext%20mechanism%20with%20a%20modifier%20extension/near/261142812" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Using.20pre-adoption.20ext.20mechanism.20with.20a.20modifier.20extension.html#261142812">(Nov 11 2021 at 14:52)</a>:</h4>
<p>Tried again this morning with the latest release (v1.1.85) and now I'm getting a different error, says the version is incorrect:<br>
org.hl7.fhir.exceptions.FHIRException: Reference to invalid version in extension url <a href="http://hl7.org/fhir/5.0/StructureDefinition/extension-DeviceRequest.doNotPerform">http://hl7.org/fhir/5.0/StructureDefinition/extension-DeviceRequest.doNotPerform</a></p>



<a name="261142935"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Using%20pre-adoption%20ext%20mechanism%20with%20a%20modifier%20extension/near/261142935" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Using.20pre-adoption.20ext.20mechanism.20with.20a.20modifier.20extension.html#261142935">(Nov 11 2021 at 14:53)</a>:</h4>
<p>I blew away my package cache and tried again, same result, though I did notice that the xver-extensions package was version 0.0.5, but I see you're referencing 0.0.7 above, is that potentially the issue?</p>



<a name="261169811"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Using%20pre-adoption%20ext%20mechanism%20with%20a%20modifier%20extension/near/261169811" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Using.20pre-adoption.20ext.20mechanism.20with.20a.20modifier.20extension.html#261169811">(Nov 11 2021 at 18:34)</a>:</h4>
<p>well, it certainly is the issue but why are you getting an old version?</p>



<a name="261170384"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Using%20pre-adoption%20ext%20mechanism%20with%20a%20modifier%20extension/near/261170384" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Using.20pre-adoption.20ext.20mechanism.20with.20a.20modifier.20extension.html#261170384">(Nov 11 2021 at 18:40)</a>:</h4>
<p>... and that is my fault. I've had some code reversion somewhere.</p>



<a name="261174804"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Using%20pre-adoption%20ext%20mechanism%20with%20a%20modifier%20extension/near/261174804" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Using.20pre-adoption.20ext.20mechanism.20with.20a.20modifier.20extension.html#261174804">(Nov 11 2021 at 19:23)</a>:</h4>
<p>this is  my issue too but not as burning for me... GG do you still need me to provide a test build to investigate?</p>



<a name="261178540"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Using%20pre-adoption%20ext%20mechanism%20with%20a%20modifier%20extension/near/261178540" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Using.20pre-adoption.20ext.20mechanism.20with.20a.20modifier.20extension.html#261178540">(Nov 11 2021 at 20:01)</a>:</h4>
<p>not for this one. I will try and get an update out for this fix today</p>



<a name="261514459"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Using%20pre-adoption%20ext%20mechanism%20with%20a%20modifier%20extension/near/261514459" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Using.20pre-adoption.20ext.20mechanism.20with.20a.20modifier.20extension.html#261514459">(Nov 15 2021 at 15:40)</a>:</h4>
<p>I tried this again with the latest publisher (v1.1.86) and I'm getting the same error about "Reference to invalid version in extension url". I cleared my package cache and tried again, same result, and I notice that the xver-extensions pacakage is still 0.0.5.</p>



<a name="261571734"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Using%20pre-adoption%20ext%20mechanism%20with%20a%20modifier%20extension/near/261571734" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Using.20pre-adoption.20ext.20mechanism.20with.20a.20modifier.20extension.html#261571734">(Nov 15 2021 at 22:48)</a>:</h4>
<p>what IG is this?</p>



<a name="261573854"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Using%20pre-adoption%20ext%20mechanism%20with%20a%20modifier%20extension/near/261573854" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Using.20pre-adoption.20ext.20mechanism.20with.20a.20modifier.20extension.html#261573854">(Nov 15 2021 at 23:06)</a>:</h4>
<p>QICore</p>



<a name="261573886"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Using%20pre-adoption%20ext%20mechanism%20with%20a%20modifier%20extension/near/261573886" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Using.20pre-adoption.20ext.20mechanism.20with.20a.20modifier.20extension.html#261573886">(Nov 15 2021 at 23:07)</a>:</h4>
<p><a href="https://github.com/HL7/fhir-qi-core">https://github.com/HL7/fhir-qi-core</a></p>



<a name="261580952"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Using%20pre-adoption%20ext%20mechanism%20with%20a%20modifier%20extension/near/261580952" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Using.20pre-adoption.20ext.20mechanism.20with.20a.20modifier.20extension.html#261580952">(Nov 16 2021 at 00:20)</a>:</h4>
<p>sigh. I'll make the same change to the code for a third time. And I'll try to figure out why I've done it three times... Git screwed me somewhere but I didn't think it was that</p>



<a name="261580968"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Using%20pre-adoption%20ext%20mechanism%20with%20a%20modifier%20extension/near/261580968" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Using.20pre-adoption.20ext.20mechanism.20with.20a.20modifier.20extension.html#261580968">(Nov 16 2021 at 00:21)</a>:</h4>
<p>anyway, next release</p>



<a name="262141961"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Using%20pre-adoption%20ext%20mechanism%20with%20a%20modifier%20extension/near/262141961" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Using.20pre-adoption.20ext.20mechanism.20with.20a.20modifier.20extension.html#262141961">(Nov 19 2021 at 22:51)</a>:</h4>
<p>Okay, the good news is, it worked and we can build now :) The bad news is, since it is a "modifier" element, we are using a "modifierExtension", but the build tooling is now giving an error that it should be an "extension", not a "modifierExtension". We can change it, but then how does an R4 implementation know that it's a modifier? <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> <a href="https://build.fhir.org/ig/HL7/fhir-qi-core/branches/master/qa.html#_scratch_ig-build-temp-S6MEHV_repo_input_resources_devicerequest-negation-example">https://build.fhir.org/ig/HL7/fhir-qi-core/branches/master/qa.html#_scratch_ig-build-temp-S6MEHV_repo_input_resources_devicerequest-negation-example</a></p>



<a name="262158032"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Using%20pre-adoption%20ext%20mechanism%20with%20a%20modifier%20extension/near/262158032" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Using.20pre-adoption.20ext.20mechanism.20with.20a.20modifier.20extension.html#262158032">(Nov 20 2021 at 02:58)</a>:</h4>
<p>that's a bug. I'll fix it before the next release</p>



<a name="262654554"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Using%20pre-adoption%20ext%20mechanism%20with%20a%20modifier%20extension/near/262654554" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Using.20pre-adoption.20ext.20mechanism.20with.20a.20modifier.20extension.html#262654554">(Nov 25 2021 at 00:21)</a>:</h4>
<p>this should be sorted now <span class="user-mention" data-user-id="191359">@Bryn Rhodes</span></p>



<a name="262662745"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Using%20pre-adoption%20ext%20mechanism%20with%20a%20modifier%20extension/near/262662745" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Using.20pre-adoption.20ext.20mechanism.20with.20a.20modifier.20extension.html#262662745">(Nov 25 2021 at 03:10)</a>:</h4>
<p>Confirmed this is fixed, thank you <span class="user-mention" data-user-id="191316">@Grahame Grieve</span></p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
