---
layout: page
title: "FHIR Chat  · slicing across reference with resolve() · IG creation"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/index.html">IG creation</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/slicing.20across.20reference.20with.20resolve().html">slicing across reference with resolve()</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="195780834"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/slicing%20across%20reference%20with%20resolve%28%29/near/195780834" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/slicing.20across.20reference.20with.20resolve().html#195780834">(Apr 29 2020 at 23:03)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> Now that you've released the update for this in v4.2.22 "Fix problem evaluating "type" discriminators ending with .resolve()", can you provide an example (at least one) of the syntax that the code is expecting to be used for the discriminator path and the slice details for a specific type on the referenced resource (the "other end" of the resolve())?</p>



<a name="195781237"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/slicing%20across%20reference%20with%20resolve%28%29/near/195781237" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/slicing.20across.20reference.20with.20resolve().html#195781237">(Apr 29 2020 at 23:08)</a>:</h4>
<p>this, from <a href="http://hl7.org/fhir/profiling.html" title="http://hl7.org/fhir/profiling.html">http://hl7.org/fhir/profiling.html</a></p>
<p>List.entry  type    item.resolve()  Entries are differentiated by the type of the target element that the reference points to</p>



<a name="195783241"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/slicing%20across%20reference%20with%20resolve%28%29/near/195783241" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/slicing.20across.20reference.20with.20resolve().html#195783241">(Apr 29 2020 at 23:33)</a>:</h4>
<p>Yes.  I've actually looked at that probably a hundred times - but the details aren't really there.  And it certainly didn't work as expected before.  It would be good to know what has changed and how it has changed now, and to see some full example(s) of how it is supposed to work (especially with Composition, rather than List).</p>



<a name="195783411"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/slicing%20across%20reference%20with%20resolve%28%29/near/195783411" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/slicing.20across.20reference.20with.20resolve().html#195783411">(Apr 29 2020 at 23:35)</a>:</h4>
<p>Composition.section.entry isn't modeled the same as List.entry - the example for List doesn't (or didn't) fit for Composition.</p>



<a name="195793794"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/slicing%20across%20reference%20with%20resolve%28%29/near/195793794" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/slicing.20across.20reference.20with.20resolve().html#195793794">(Apr 30 2020 at 02:54)</a>:</h4>
<p>ok, well, here's an example using list. Here's the profile which says that the list has 1 Condition, followed by 1..3 Observations:</p>
<div class="codehilite"><pre><span></span><code><span class="nt">&lt;StructureDefinition</span> <span class="na">xmlns=</span><span class="s">&quot;http://hl7.org/fhir&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;id</span> <span class="na">value=</span><span class="s">&quot;profile-slicing-type-resolve&quot;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;url</span> <span class="na">value=</span><span class="s">&quot;http://hl7.org/fhir/test/StructureDefinition/profile-slicing-type-resolve&quot;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;version</span> <span class="na">value=</span><span class="s">&quot;0.1.0&quot;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;name</span> <span class="na">value=</span><span class="s">&quot;TestProfileTypeResolve&quot;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;title</span> <span class="na">value=</span><span class="s">&quot;Test Profile Type Resolve&quot;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;status</span> <span class="na">value=</span><span class="s">&quot;draft&quot;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;date</span> <span class="na">value=</span><span class="s">&quot;2030-04-30T06:30:54+00:00&quot;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;publisher</span> <span class="na">value=</span><span class="s">&quot;HL7&quot;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;fhirVersion</span> <span class="na">value=</span><span class="s">&quot;4.0.0&quot;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;kind</span> <span class="na">value=</span><span class="s">&quot;resource&quot;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;abstract</span> <span class="na">value=</span><span class="s">&quot;false&quot;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;type</span> <span class="na">value=</span><span class="s">&quot;List&quot;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;baseDefinition</span> <span class="na">value=</span><span class="s">&quot;http://hl7.org/fhir/StructureDefinition/List&quot;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;derivation</span> <span class="na">value=</span><span class="s">&quot;constraint&quot;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;differential&gt;</span>
    <span class="nt">&lt;element</span> <span class="na">id=</span><span class="s">&quot;List.entry&quot;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;path</span> <span class="na">value=</span><span class="s">&quot;List.entry&quot;</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;slicing&gt;</span>
        <span class="nt">&lt;discriminator&gt;</span>
          <span class="nt">&lt;type</span> <span class="na">value=</span><span class="s">&quot;type&quot;</span><span class="nt">/&gt;</span>
          <span class="nt">&lt;path</span> <span class="na">value=</span><span class="s">&quot;item.resolve()&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/discriminator&gt;</span>
        <span class="nt">&lt;ordered</span> <span class="na">value=</span><span class="s">&quot;false&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;rules</span> <span class="na">value=</span><span class="s">&quot;closed&quot;</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;/slicing&gt;</span>
    <span class="nt">&lt;/element&gt;</span>
    <span class="nt">&lt;element</span> <span class="na">id=</span><span class="s">&quot;List.entry:slice1&quot;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;path</span> <span class="na">value=</span><span class="s">&quot;List.entry&quot;</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;sliceName</span> <span class="na">value=</span><span class="s">&quot;slice1&quot;</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;min</span> <span class="na">value=</span><span class="s">&quot;1&quot;</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;max</span> <span class="na">value=</span><span class="s">&quot;1&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/element&gt;</span>
    <span class="nt">&lt;element</span> <span class="na">id=</span><span class="s">&quot;List.entry:slice1.item&quot;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;path</span> <span class="na">value=</span><span class="s">&quot;List.entry.item&quot;</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;type&gt;</span>
        <span class="nt">&lt;code</span> <span class="na">value=</span><span class="s">&quot;Reference&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;targetProfile</span> <span class="na">value=</span><span class="s">&quot;http://hl7.org/fhir/StructureDefinition/Condition&quot;</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;/type&gt;</span>
    <span class="nt">&lt;/element&gt;</span>
    <span class="nt">&lt;element</span> <span class="na">id=</span><span class="s">&quot;List.entry:slice2&quot;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;path</span> <span class="na">value=</span><span class="s">&quot;List.entry&quot;</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;sliceName</span> <span class="na">value=</span><span class="s">&quot;slice2&quot;</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;min</span> <span class="na">value=</span><span class="s">&quot;1&quot;</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;max</span> <span class="na">value=</span><span class="s">&quot;3&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/element&gt;</span>
    <span class="nt">&lt;element</span> <span class="na">id=</span><span class="s">&quot;List.entry:slice2.item&quot;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;path</span> <span class="na">value=</span><span class="s">&quot;List.entry.item&quot;</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;type&gt;</span>
        <span class="nt">&lt;code</span> <span class="na">value=</span><span class="s">&quot;Reference&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;targetProfile</span> <span class="na">value=</span><span class="s">&quot;http://hl7.org/fhir/StructureDefinition/Observation&quot;</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;/type&gt;</span>
    <span class="nt">&lt;/element&gt;</span>
  <span class="nt">&lt;/differential&gt;</span>
<span class="nt">&lt;/StructureDefinition&gt;</span>
</code></pre></div>



<a name="195793815"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/slicing%20across%20reference%20with%20resolve%28%29/near/195793815" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/slicing.20across.20reference.20with.20resolve().html#195793815">(Apr 30 2020 at 02:54)</a>:</h4>
<p>here's a list that validates:</p>
<div class="codehilite"><pre><span></span><code><span class="nt">&lt;List</span> <span class="na">xmlns=</span><span class="s">&quot;http://hl7.org/fhir&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;contained&gt;</span>
     <span class="nt">&lt;Condition&gt;</span>
       <span class="nt">&lt;id</span> <span class="na">value=</span><span class="s">&quot;i1&quot;</span><span class="nt">/&gt;</span>
       <span class="nt">&lt;subject&gt;</span>
         <span class="nt">&lt;reference</span> <span class="na">value=</span><span class="s">&quot;Patient/example&quot;</span><span class="nt">/&gt;</span>
       <span class="nt">&lt;/subject&gt;</span>
    <span class="nt">&lt;/Condition&gt;</span>
  <span class="nt">&lt;/contained&gt;</span>
  <span class="nt">&lt;contained&gt;</span>
    <span class="nt">&lt;Observation&gt;</span>
      <span class="nt">&lt;id</span> <span class="na">value=</span><span class="s">&quot;i2&quot;</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;status</span> <span class="na">value=</span><span class="s">&quot;final&quot;</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;code&gt;</span>
        <span class="nt">&lt;text</span> <span class="na">value=</span><span class="s">&quot;final&quot;</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;/code&gt;</span>
    <span class="nt">&lt;/Observation&gt;</span>
  <span class="nt">&lt;/contained&gt;</span>
  <span class="nt">&lt;status</span> <span class="na">value=</span><span class="s">&quot;current&quot;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;mode</span> <span class="na">value=</span><span class="s">&quot;working&quot;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;entry&gt;</span>
    <span class="nt">&lt;item&gt;</span>
      <span class="nt">&lt;reference</span> <span class="na">value=</span><span class="s">&quot;#i1&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/item&gt;</span>
  <span class="nt">&lt;/entry&gt;</span>
  <span class="nt">&lt;entry&gt;</span>
    <span class="nt">&lt;item&gt;</span>
      <span class="nt">&lt;reference</span> <span class="na">value=</span><span class="s">&quot;#i2&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/item&gt;</span>
  <span class="nt">&lt;/entry&gt;</span>
<span class="nt">&lt;/List&gt;</span>
</code></pre></div>


<p>and here's one that doesn't (2 errors):</p>
<div class="codehilite"><pre><span></span><code><span class="nt">&lt;List</span> <span class="na">xmlns=</span><span class="s">&quot;http://hl7.org/fhir&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;contained&gt;</span>
     <span class="nt">&lt;Condition&gt;</span>
       <span class="nt">&lt;id</span> <span class="na">value=</span><span class="s">&quot;i1&quot;</span><span class="nt">/&gt;</span>
       <span class="nt">&lt;subject&gt;</span>
         <span class="nt">&lt;reference</span> <span class="na">value=</span><span class="s">&quot;Patient/example&quot;</span><span class="nt">/&gt;</span>
       <span class="nt">&lt;/subject&gt;</span>
    <span class="nt">&lt;/Condition&gt;</span>
  <span class="nt">&lt;/contained&gt;</span>
  <span class="nt">&lt;contained&gt;</span>
     <span class="nt">&lt;Condition&gt;</span>
      <span class="nt">&lt;id</span> <span class="na">value=</span><span class="s">&quot;i2&quot;</span><span class="nt">/&gt;</span>
       <span class="nt">&lt;subject&gt;</span>
         <span class="nt">&lt;reference</span> <span class="na">value=</span><span class="s">&quot;Patient/example&quot;</span><span class="nt">/&gt;</span>
       <span class="nt">&lt;/subject&gt;</span>
    <span class="nt">&lt;/Condition&gt;</span>
  <span class="nt">&lt;/contained&gt;</span>
  <span class="nt">&lt;status</span> <span class="na">value=</span><span class="s">&quot;current&quot;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;mode</span> <span class="na">value=</span><span class="s">&quot;working&quot;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;entry&gt;</span>
    <span class="nt">&lt;item&gt;</span>
      <span class="nt">&lt;reference</span> <span class="na">value=</span><span class="s">&quot;#i1&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/item&gt;</span>
  <span class="nt">&lt;/entry&gt;</span>
  <span class="nt">&lt;entry&gt;</span>
    <span class="nt">&lt;item&gt;</span>
      <span class="nt">&lt;reference</span> <span class="na">value=</span><span class="s">&quot;#i2&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/item&gt;</span>
  <span class="nt">&lt;/entry&gt;</span>
<span class="nt">&lt;/List&gt;</span>
</code></pre></div>



<a name="195793889"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/slicing%20across%20reference%20with%20resolve%28%29/near/195793889" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/slicing.20across.20reference.20with.20resolve().html#195793889">(Apr 30 2020 at 02:56)</a>:</h4>
<p>Thanks.  I'm working on some instances that could server as example(s), too, based on our Composition.section.entry slicing.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
