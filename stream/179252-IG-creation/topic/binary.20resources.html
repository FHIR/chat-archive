---
layout: page
title: "FHIR Chat  · binary resources · IG creation"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/index.html">IG creation</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/binary.20resources.html">binary resources</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="264207318"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/binary%20resources/near/264207318" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/binary.20resources.html#264207318">(Dec 08 2021 at 19:28)</a>:</h4>
<p>I seem to recall some more easy mechanism was added to IG build to support Binary. Something where our binary content could be just a file, that the IG builder would base64binary and encapsulate in a Binary. Or do I need to have a binary json with the content base64 encoded inside?</p>



<a name="264207900"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/binary%20resources/near/264207900" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/binary.20resources.html#264207900">(Dec 08 2021 at 19:32)</a>:</h4>
<p>you can just reference a file as a binary, and it'll be converted to a Binary resource autoamatically</p>



<a name="264208161"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/binary%20resources/near/264208161" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/binary.20resources.html#264208161">(Dec 08 2021 at 19:34)</a>:</h4>
<p>not sure I understand. so where do I put this file? and how do I refer to it? For example, I have a SAML xml file. I don't want the IG to think that it is FHIR xml</p>



<a name="264209312"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/binary%20resources/near/264209312" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/binary.20resources.html#264209312">(Dec 08 2021 at 19:43)</a>:</h4>
<p>you need to put an extension on the reference to the resource:</p>
<div class="codehilite" data-code-language="JSON"><pre><span></span><code> <span class="nt">"extension"</span> <span class="p">:</span> <span class="p">[{</span>
  <span class="nt">"url"</span> <span class="p">:</span> <span class="s2">"http://hl7.org/fhir/StructureDefinition/implementationguide-resource-format"</span><span class="p">,</span>
  <span class="nt">"valueCode"</span> <span class="p">:</span> <span class="s2">"application/pdf"</span>
<span class="p">}]</span>
</code></pre></div>
<p>And the reference is like Binary/my-file, and unlike the normal case, where the file must have a matching name and .json or .xml, then file can have any extension</p>



<a name="264303151"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/binary%20resources/near/264303151" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/binary.20resources.html#264303151">(Dec 09 2021 at 13:49)</a>:</h4>
<p>do I put the file in the images folder?</p>



<a name="264352489"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/binary%20resources/near/264352489" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/binary.20resources.html#264352489">(Dec 09 2021 at 19:18)</a>:</h4>
<p>if you want, but I'd put it in the same folder as my other resources</p>



<a name="266507390"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/binary%20resources/near/266507390" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/binary.20resources.html#266507390">(Dec 31 2021 at 14:52)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> I am still not getting the contentType or filename errors to go away. Not finding any documentation of the <code>implementationguide-resource-format</code> extension, except in the sushi release notes around logical models. Tried what is specified there and it didn't work for me. Im using DocumentReference</p>



<a name="266509674"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/binary%20resources/near/266509674" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/binary.20resources.html#266509674">(Dec 31 2021 at 15:34)</a>:</h4>
<p>update - I have eliminated the errors by specifying the DocumentReference.content.attachment.contentType.</p>



<a name="266509779"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/binary%20resources/near/266509779" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/binary.20resources.html#266509779">(Dec 31 2021 at 15:36)</a>:</h4>
<p>I updated the confluence page <a href="https://confluence.hl7.org/pages/viewpage.action?pageId=66938614#ImplementationGuideParameters-BinaryAdjunctFiles">https://confluence.hl7.org/pages/viewpage.action?pageId=66938614#ImplementationGuideParameters-BinaryAdjunctFiles</a></p>



<a name="266509895"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/binary%20resources/near/266509895" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/binary.20resources.html#266509895">(Dec 31 2021 at 15:39)</a>:</h4>
<p>Binary still throws a file type error</p>
<div class="codehilite"><pre><span></span><code>Unknown file type foobar.txt
</code></pre></div>



<a name="266862718"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/binary%20resources/near/266862718" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/binary.20resources.html#266862718">(Jan 04 2022 at 21:00)</a>:</h4>
<p>how to reproduce this?</p>



<a name="266870521"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/binary%20resources/near/266870521" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/binary.20resources.html#266870521">(Jan 04 2022 at 22:06)</a>:</h4>
<p>It does this for me when I have a Binary, vs no error with DocumentReference.</p>



<a name="266874698"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/binary%20resources/near/266874698" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/binary.20resources.html#266874698">(Jan 04 2022 at 22:44)</a>:</h4>
<p>here is a test IG that will show the error<br>
<a href="https://github.com/JohnMoehrke/testBinary">https://github.com/JohnMoehrke/testBinary</a></p>



<a name="267019524"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/binary%20resources/near/267019524" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/binary.20resources.html#267019524">(Jan 06 2022 at 02:42)</a>:</h4>
<p>you need to add:</p>
<div class="codehilite"><pre><span></span><code>&quot;extension&quot; [{
          &quot;url&quot; : &quot;http://hl7.org/fhir/StructureDefinition/implementationguide-resource-format&quot;,
          &quot;valueCode&quot; : &quot;text/plain&quot;
        }],
</code></pre></div>



<a name="267078802"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/binary%20resources/near/267078802" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/binary.20resources.html#267078802">(Jan 06 2022 at 16:11)</a>:</h4>
<p>so there is bug in sushi that prevents this extension from moving from sushi-config to the IG json SUSHI#1005 </p>
<p>BUT... I have tried adding this manually to the sushi output, but always get two IG build errors indicating the extension is unknown. YET, the sample-ig has this same thing in it and it doesn't throw these errors. I have carefully copied the sample-ig. <em>I must have some stupid mistake that my eyes are not finding.</em><br>
Here is the entry in my manually edited IG json</p>
<div class="codehilite"><pre><span></span><code>    &quot;resource&quot;: [
      {
        &quot;extension&quot;: [
          {
            &quot;url&quot;: &quot;http://hl7.org/fhir/StructureDefinition/implementationguide-resource-format&quot;,
            &quot;valueCode&quot;: &quot;application/xml&quot;
          }
        ],
        &quot;reference&quot;: {
          &quot;reference&quot;: &quot;Binary/B-hello-world&quot;
        },
        &quot;name&quot;: &quot;Binary example using Binary&quot;,
        &quot;description&quot;: &quot;Example of a binary hello world using Binary.&quot;,
        &quot;exampleBoolean&quot;: true
      },
 ```
but I get this error
</code></pre></div>
<p>== fsh-generated\resources\ImplementationGuide-johnmoehrke.testbinary.json ==<br>
ERROR: ImplementationGuide/johnmoehrke.testbinary: ImplementationGuide.definition.resource[0].extension[0]: The extension <a href="http://hl7.org/fhir/StructureDefinition/implementationguide-resource-format">http://hl7.org/fhir/StructureDefinition/implementationguide-resource-format</a> is unknown, and not allowed here<br>
ERROR: ImplementationGuide/johnmoehrke.testbinary: ImplementationGuide.definition.resource[0].extension[0].url: URL value '<a href="http://hl7.org/fhir/StructureDefinition/implementationguide-resource-format">http://hl7.org/fhir/StructureDefinition/implementationguide-resource-format</a>' does not resolve</p>
<div class="codehilite"><pre><span></span><code>
</code></pre></div>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
