---
layout: page
title: "FHIR Chat  · package.json wrong version · IG creation"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/index.html">IG creation</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/package.2Ejson.20wrong.20version.html">package.json wrong version</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="154011769"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/package.json%20wrong%20version/near/154011769" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Reinhold <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/package.2Ejson.20wrong.20version.html#154011769">(Oct 24 2018 at 10:58)</a>:</h4>
<p>Once again I am having issues with the publisher downloading an incorrect version of package.json into the cache. THis causes a re-download every build. The fix is simple, navigate to the file and manually edit the version from 2 to 3. This solves the problem!</p>



<a name="154011772"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/package.json%20wrong%20version/near/154011772" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/package.2Ejson.20wrong.20version.html#154011772">(Oct 24 2018 at 11:18)</a>:</h4>
<p>you have a caching problem, I think. but let me check - which package is this?</p>



<a name="154011786"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/package.json%20wrong%20version/near/154011786" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/package.2Ejson.20wrong.20version.html#154011786">(Oct 24 2018 at 11:44)</a>:</h4>
<p>I'm apparently seeing the same thing,  It's re-downloading the package each time.</p>



<a name="154011787"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/package.json%20wrong%20version/near/154011787" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/package.2Ejson.20wrong.20version.html#154011787">(Oct 24 2018 at 11:46)</a>:</h4>
<p>hl7.fhir.core-current</p>



<a name="154011790"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/package.json%20wrong%20version/near/154011790" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/package.2Ejson.20wrong.20version.html#154011790">(Oct 24 2018 at 11:50)</a>:</h4>
<div class="codehilite"><pre><span></span>Fetch hl7.fhir.core-current package from http://build.fhir.org/package.tgz       (08.0247sec)
Installing hl7.fhir.core#current to the package cache
  Fetching:............................................................................................................
  ......................................................................................................................
  ...................................................................................|
  Analysing.............................................................................................................
  ......................................................................................................................
  .................................................. done.
Checking hl7.fhir.core-current currency                                          (00:01:37.0890sec)
Updating hl7.fhir.core-3.6.0 package from source (too old - is 2, must be 3      (00:01:37.0891sec)
Fetch hl7.fhir.core-current package from http://build.fhir.org/package.tgz       (00:01:37.0891sec)
Installing hl7.fhir.core#current to the package cache
  Fetching:............................................................................................................
  ......................................................................................................................
  ...................................................................................|
  Analysing.............................................................................................................
  ......................................................................................................................
  .................................................. done.
Load hl7.fhir.core-current package from /Users/rhausam/.fhir/packages/hl7.fhir.core#current (00:03:16.0570sec)
</pre></div>



<a name="154011791"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/package.json%20wrong%20version/near/154011791" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Reinhold <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/package.2Ejson.20wrong.20version.html#154011791">(Oct 24 2018 at 11:51)</a>:</h4>
<blockquote>
<p>you have a caching problem, I think. but let me check - which package is this?</p>
</blockquote>
<p>Package downloaded is 2 but it needs to be 3<br>
So I just edited it to 3 in the cache and it solves the re-download issue. I had the same issue when going from 1 to 2. Editing the package solved that as well. Eventually it got fixed though.</p>



<a name="154011792"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/package.json%20wrong%20version/near/154011792" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/package.2Ejson.20wrong.20version.html#154011792">(Oct 24 2018 at 11:51)</a>:</h4>
<p>yes</p>



<a name="154011863"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/package.json%20wrong%20version/near/154011863" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/package.2Ejson.20wrong.20version.html#154011863">(Oct 24 2018 at 14:35)</a>:</h4>
<p>It also looks like it's always re-fetching every time I run the validator.  It's obviously doing it across the board, and it adds a considerable amount of time.  I'll go ahead and try Brian's workaround for now and hopefully we can fix this soon.</p>



<a name="154011869"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/package.json%20wrong%20version/near/154011869" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Reinhold <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/package.2Ejson.20wrong.20version.html#154011869">(Oct 24 2018 at 14:39)</a>:</h4>
<blockquote>
<p>It also looks like it's always re-fetching every time I run the validator.  It's obviously doing it across the board, and it adds a considerable amount of time.  I'll go ahead and try Brian's workaround for now and hopefully we can fix this soon.</p>
</blockquote>
<p><span class="user-mention" data-user-id="191405">@Rob Hausam</span>  its located here C:\Users\xxxx\.fhir\packages\hl7.fhir.core#current\package\package.json if you are on windows. Just edit the </p>
<div class="codehilite"><pre><span></span>&quot;tools-version&quot;: 3,
</pre></div>


<p>as shown.</p>



<a name="154011891"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/package.json%20wrong%20version/near/154011891" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/package.2Ejson.20wrong.20version.html#154011891">(Oct 24 2018 at 15:07)</a>:</h4>
<p>it's a challenge for me; as far as I can tell I have built the correct version of the package and put it on the server; the server is serving up a different version - caching on the server, I suppose.</p>



<a name="154011892"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/package.json%20wrong%20version/near/154011892" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/package.2Ejson.20wrong.20version.html#154011892">(Oct 24 2018 at 15:08)</a>:</h4>
<p>if you make this hack, you'll be unable to build the main build...</p>



<a name="154011893"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/package.json%20wrong%20version/near/154011893" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Reinhold <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/package.2Ejson.20wrong.20version.html#154011893">(Oct 24 2018 at 15:10)</a>:</h4>
<blockquote>
<p>if you make this hack, you'll be unable to build the main build...</p>
</blockquote>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> What do you mean by 'main build'? I am just building an IG. For the moment that is local.</p>



<a name="154011894"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/package.json%20wrong%20version/near/154011894" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/package.2Ejson.20wrong.20version.html#154011894">(Oct 24 2018 at 15:11)</a>:</h4>
<p>building an IG is not the main build</p>



<a name="154011895"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/package.json%20wrong%20version/near/154011895" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Reinhold <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/package.2Ejson.20wrong.20version.html#154011895">(Oct 24 2018 at 15:12)</a>:</h4>
<blockquote>
<p>building an IG is not the main build</p>
</blockquote>
<p>I assumed that. Making this hack just cuts the build time down by quite a bit.</p>



<a name="154011921"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/package.json%20wrong%20version/near/154011921" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/package.2Ejson.20wrong.20version.html#154011921">(Oct 24 2018 at 16:19)</a>:</h4>
<p>The main build also failed for me due to similar errors in running the AllGuidesTests.</p>



<a name="154012090"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/package.json%20wrong%20version/near/154012090" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/package.2Ejson.20wrong.20version.html#154012090">(Oct 25 2018 at 07:58)</a>:</h4>
<p><span class="user-mention" data-user-id="191315">@Josh Mandel</span> you're a better web hacker than me.... I'm pretty sure that this is a caching problem.... is there any way to solve it?</p>



<a name="154012123"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/package.json%20wrong%20version/near/154012123" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/package.2Ejson.20wrong.20version.html#154012123">(Oct 25 2018 at 13:42)</a>:</h4>
<p>The main build isn't failing for me now - not quite sure why it did that one time.  But the IG Publisher and the validator are still fetching each time.</p>



<a name="154012223"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/package.json%20wrong%20version/near/154012223" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/package.2Ejson.20wrong.20version.html#154012223">(Oct 25 2018 at 17:26)</a>:</h4>
<p>Can you help me understand what file (full URL) is being cached? Are you saying this is true of <a href="http://build.fhir.org/package.tgz" target="_blank" title="http://build.fhir.org/package.tgz">http://build.fhir.org/package.tgz</a> ? And that it's the server doing the caching?</p>



<a name="154012224"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/package.json%20wrong%20version/near/154012224" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/package.2Ejson.20wrong.20version.html#154012224">(Oct 25 2018 at 17:28)</a>:</h4>
<p>If I do </p>
<div class="codehilite"><pre><span></span>$ curl --head  http://build.fhir.org/package.tgz
HTTP/1.1 200 OK
Server: nginx/1.15.2
Date: Thu, 25 Oct 2018 17:27:22 GMT
Content-Type: application/octet-stream
Content-Length: 25245955
Last-Modified: Thu, 25 Oct 2018 15:24:56 GMT
Connection: keep-alive
ETag: &quot;5bd1e048-1813903&quot;
Expires: Thu, 25 Oct 2018 17:32:22 GMT
Cache-Control: max-age=300
Access-Control-Allow-Origin: *
Access-Control-Allow-Methods: GET, POST, OPTIONS
Access-Control-Allow-Headers: DNT,X-CustomHeader,Keep-Alive,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type
Vary: Accept
Accept-Ranges: bytes
</pre></div>


<p>... I see a max-age and an expiration time. That would never cause the server to send old versions of the file though. I want to make sure I'm digging into the right question here before I go farther...</p>



<a name="154012247"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/package.json%20wrong%20version/near/154012247" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/package.2Ejson.20wrong.20version.html#154012247">(Oct 25 2018 at 18:45)</a>:</h4>
<p>This is what's going on (each time) from the log:</p>
<div class="codehilite"><pre><span></span>Fetch hl7.fhir.core-current package from http://build.fhir.org/package.tgz       (04.0378sec)
Installing hl7.fhir.core#current to the package cache
  Fetching:............................................................................................................
  ......................................................................................................................
  ...................................................................................|
  Analysing.............................................................................................................
  ......................................................................................................................
  .................................................. done.
Checking hl7.fhir.core-current currency                                          (00:01:11.0542sec)
Updating hl7.fhir.core-3.6.0 package from source (too old - is 2, must be 3      (00:01:11.0542sec)
Fetch hl7.fhir.core-current package from http://build.fhir.org/package.tgz       (00:01:11.0543sec)
Installing hl7.fhir.core#current to the package cache
  Fetching:............................................................................................................
  ......................................................................................................................
  ...................................................................................|
  Analysing.............................................................................................................
  ......................................................................................................................
  .................................................. done.
Load hl7.fhir.core-current package from /Users/rhausam/.fhir/packages/hl7.fhir.core#current (00:02:28.0185sec)
</pre></div>


<p>I can try to do some further digging into the details.</p>



<a name="154012250"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/package.json%20wrong%20version/near/154012250" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/package.2Ejson.20wrong.20version.html#154012250">(Oct 25 2018 at 18:50)</a>:</h4>
<p>Sometimes when I look at .fhir/packages/ I've seen it as hl7.fhir.core#current (as it is for me now), but earlier it was hl7.fhir.core#3.6.0, but I haven't seen both.  I'm not completely sure what it's supposed to be, but I don't think the directory name should be changing for what should be the same content.</p>



<a name="154012266"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/package.json%20wrong%20version/near/154012266" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/package.2Ejson.20wrong.20version.html#154012266">(Oct 25 2018 at 19:26)</a>:</h4>
<p>After running the IG Publisher for the IPS IG just now the hl7.fhir.core#current package has disappeared from the local cache in .fhir/packages/  (and there is no hl7.fhir.core#3.6.0 package, either).  I am still running the main build at the same time, though (but it's in the testing phase), so I can't be certain that there is no interaction with that.  It does seem to me like it wouldn't be expected behavior, though.</p>



<a name="154012273"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/package.json%20wrong%20version/near/154012273" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/package.2Ejson.20wrong.20version.html#154012273">(Oct 25 2018 at 19:50)</a>:</h4>
<p>Can someone clue me in (or point me to the docs) on how <code>.fhir</code> works? What is it used for, who populates it, how does it to get updated, Etc.</p>



<a name="154012290"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/package.json%20wrong%20version/near/154012290" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/package.2Ejson.20wrong.20version.html#154012290">(Oct 25 2018 at 20:33)</a>:</h4>
<p>.fhir is the local cache for NPM files.  Both the IGPublisher and the Validator will use it.  When they need a particular version of FHIR or an IG, they'll check the cache.  If they find it, they'll use it.  Otherwise they'll grab the remote one.  I think they also check to see if the cache is up to date.</p>



<a name="154012303"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/package.json%20wrong%20version/near/154012303" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/package.2Ejson.20wrong.20version.html#154012303">(Oct 25 2018 at 23:19)</a>:</h4>
<p>So...is the issue that people are finding the wrong file from the local .fhir cache folder, or that the webcserver is hosting the wrong version of a file?</p>



<a name="154012305"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/package.json%20wrong%20version/near/154012305" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Reinhold <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/package.2Ejson.20wrong.20version.html#154012305">(Oct 25 2018 at 23:23)</a>:</h4>
<blockquote>
<p>So...is the issue that people are finding the wrong file from the local .fhir cache folder, or that the webcserver is hosting the wrong version of a file?</p>
</blockquote>
<p><span class="user-mention" data-user-id="191315">@Josh Mandel</span> What is the case is that every download loads the version 2 into the cache. Don't know if it is wrong on the server. However, everything else seems ok since it works. To avoid the download every build, I hand edit the version to 3 in the .fhir cache. Not the best but it DOES save a great deal of time!</p>



<a name="154012411"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/package.json%20wrong%20version/near/154012411" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/package.2Ejson.20wrong.20version.html#154012411">(Oct 26 2018 at 13:26)</a>:</h4>
<p>the pacakage.tgz that the build creates has /package/package.json  tools-version= 3</p>



<a name="154012412"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/package.json%20wrong%20version/near/154012412" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/package.2Ejson.20wrong.20version.html#154012412">(Oct 26 2018 at 13:27)</a>:</h4>
<p>the file that some poeple are downloading from the http link to it has /package/package.json tools-version= 2</p>



<a name="154012428"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/package.json%20wrong%20version/near/154012428" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/package.2Ejson.20wrong.20version.html#154012428">(Oct 26 2018 at 13:39)</a>:</h4>
<p>It's what the igpublisher and the validator jars are downloading.  They're both doing it each time, even though the cached copy is already there, and they're also not doing the same thing (the igpublisher caches hl7.fhir.core#current and the validator removes that and caches hl7.fhir.core#3.6.0 - and vice versa).</p>



<a name="154012432"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/package.json%20wrong%20version/near/154012432" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/package.2Ejson.20wrong.20version.html#154012432">(Oct 26 2018 at 13:41)</a>:</h4>
<p>which one they download depends on how you invoke them, but they both clear both out until your cacing problem is resolved</p>



<a name="154012448"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/package.json%20wrong%20version/near/154012448" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/package.2Ejson.20wrong.20version.html#154012448">(Oct 26 2018 at 13:54)</a>:</h4>
<p>So what exactly would be "my caching problem"?  I'm invoking them the same way as I always have and I didn't have any problem with this in the past.  For the publisher I've tried invoking them with both Lloyd's framework script and also directly (i.e. <code>java -jar /Users/rhausam/git-repo/fhir/publish/org.hl7.fhir.igpublisher.jar -ig ig.json</code>) and I get the same behavior.  And if I remove the cached copy the problem comes back in the same way.  I'm not seeing anything else that is obvious to do, and unless I've overlooked it I haven't seen any clear suggestions in the thread on how to fix it (other than Brian's "hack").  Should I do something else?</p>



<a name="154012450"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/package.json%20wrong%20version/near/154012450" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/package.2Ejson.20wrong.20version.html#154012450">(Oct 26 2018 at 13:55)</a>:</h4>
<p>the caching problem is somewhere in the http stack</p>



<a name="154012451"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/package.json%20wrong%20version/near/154012451" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/package.2Ejson.20wrong.20version.html#154012451">(Oct 26 2018 at 13:55)</a>:</h4>
<p>client or server</p>



<a name="154012452"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/package.json%20wrong%20version/near/154012452" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/package.2Ejson.20wrong.20version.html#154012452">(Oct 26 2018 at 13:55)</a>:</h4>
<p>and I'm at a loss.</p>



<a name="154012455"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/package.json%20wrong%20version/near/154012455" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/package.2Ejson.20wrong.20version.html#154012455">(Oct 26 2018 at 13:55)</a>:</h4>
<p>OK, right.  Whatever it is we haven't figured it out yet.  And I think it's everyone's problem.</p>



<a name="154012464"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/package.json%20wrong%20version/near/154012464" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Reinhold <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/package.2Ejson.20wrong.20version.html#154012464">(Oct 26 2018 at 13:59)</a>:</h4>
<blockquote>
<p>the caching problem is somewhere in the http stack</p>
</blockquote>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> <span class="user-mention" data-user-id="191405">@Rob Hausam</span> I had the same problem going from one to 2. Eventually it got resolved; i could delete the cache and the downloaded package had the correct version in it. Not very helpful because I don't know specifically when it happened. I think I discovered it worked when I started from scratch on a new system.</p>



<a name="154012590"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/package.json%20wrong%20version/near/154012590" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/package.2Ejson.20wrong.20version.html#154012590">(Oct 26 2018 at 15:15)</a>:</h4>
<p>ok I've committed a change which is a fairly brutal override of any upstream caching. (add ?nocache={instant} to every request from the local cache manager</p>



<a name="154012591"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/package.json%20wrong%20version/near/154012591" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/package.2Ejson.20wrong.20version.html#154012591">(Oct 26 2018 at 15:15)</a>:</h4>
<p>it will be ready to merge after I have boarded my flight, so can one of you merge the PR if it passes, and then test?</p>



<a name="154012592"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/package.json%20wrong%20version/near/154012592" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/package.2Ejson.20wrong.20version.html#154012592">(Oct 26 2018 at 15:15)</a>:</h4>
<p>PR 151</p>



<a name="154012613"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/package.json%20wrong%20version/near/154012613" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/package.2Ejson.20wrong.20version.html#154012613">(Oct 26 2018 at 15:28)</a>:</h4>
<p>Merge and then test when you're on a flight sounds risky...</p>



<a name="154012614"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/package.json%20wrong%20version/near/154012614" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/package.2Ejson.20wrong.20version.html#154012614">(Oct 26 2018 at 15:28)</a>:</h4>
<p>Is there a way to un-merge if it causes problems?</p>



<a name="154012619"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/package.json%20wrong%20version/near/154012619" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/package.2Ejson.20wrong.20version.html#154012619">(Oct 26 2018 at 15:52)</a>:</h4>
<p>We can revert the commit (creates a new commit that reverses the changes) - but hopefully that won't be necessary.</p>



<a name="154012668"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/package.json%20wrong%20version/near/154012668" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/package.2Ejson.20wrong.20version.html#154012668">(Oct 26 2018 at 16:59)</a>:</h4>
<p>Ok, I've done the merge</p>



<a name="154012828"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/package.json%20wrong%20version/near/154012828" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/package.2Ejson.20wrong.20version.html#154012828">(Oct 27 2018 at 07:49)</a>:</h4>
<p>did it fix anything?</p>



<a name="154012840"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/package.json%20wrong%20version/near/154012840" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/package.2Ejson.20wrong.20version.html#154012840">(Oct 27 2018 at 08:39)</a>:</h4>
<p>I don't think so.  IG Publisher (v3.6.0-9ef639a3, gen-code v3.6.0 / 3) is still fetching the core-current package, twice, each time I run it.  It must be something else.</p>



<a name="154012858"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/package.json%20wrong%20version/near/154012858" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/package.2Ejson.20wrong.20version.html#154012858">(Oct 27 2018 at 14:52)</a>:</h4>
<p>Same for me</p>



<a name="154012865"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/package.json%20wrong%20version/near/154012865" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/package.2Ejson.20wrong.20version.html#154012865">(Oct 27 2018 at 16:50)</a>:</h4>
<p><span class="user-mention" data-user-id="191315">@Josh Mandel</span> I'm at a loss here; the file I'm getting generated - and that must be generated for the build to succeed - is not what is being downloaded, and I don't know of a more comprehensive way to bust any caches. is it not updating on the build server? can you look directly in package.tgz at /package/package.json and tell us what is in tools-version?</p>



<a name="154012874"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/package.json%20wrong%20version/near/154012874" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/package.2Ejson.20wrong.20version.html#154012874">(Oct 27 2018 at 17:09)</a>:</h4>
<p>I think I need to sit down with someone who understands how the system is supposed to work, so I can help investigate. Right now I don't really understand what the issue is or how things are supposed to be working.</p>



<a name="154012877"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/package.json%20wrong%20version/near/154012877" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/package.2Ejson.20wrong.20version.html#154012877">(Oct 27 2018 at 17:10)</a>:</h4>
<p>Everyone sees the same content at <a href="http://build.fhir.org/" target="_blank" title="http://build.fhir.org/">http://build.fhir.org/</a> that I do, right? Is there a problem with this content?</p>



<a name="154012880"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/package.json%20wrong%20version/near/154012880" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/package.2Ejson.20wrong.20version.html#154012880">(Oct 27 2018 at 17:11)</a>:</h4>
<p>yes there is</p>



<a name="154012881"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/package.json%20wrong%20version/near/154012881" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/package.2Ejson.20wrong.20version.html#154012881">(Oct 27 2018 at 17:12)</a>:</h4>
<p>if you download <a href="http://build.fhir.org/package.tgz" target="_blank" title="http://build.fhir.org/package.tgz">http://build.fhir.org/package.tgz</a>, you'll get a different file to what you'll get if you build locally.</p>



<a name="154012882"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/package.json%20wrong%20version/near/154012882" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/package.2Ejson.20wrong.20version.html#154012882">(Oct 27 2018 at 17:12)</a>:</h4>
<p>somewhere... something is broken... but I can't figure out what because I can't access the actual copies of the file past my local build</p>



<a name="154012883"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/package.json%20wrong%20version/near/154012883" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/package.2Ejson.20wrong.20version.html#154012883">(Oct 27 2018 at 17:18)</a>:</h4>
<p>more info: </p>
<p>the build generates the file package.tgz. One of the files in there is package/package.json. There's a json file inside that that will have a property 'tools-version' set to "3" per the constant here: <a href="https://github.com/HL7/fhir/blob/master/implementations/java/org.hl7.fhir.utilities/src/org/hl7/fhir/utilities/cache/ToolsVersion.java" target="_blank" title="https://github.com/HL7/fhir/blob/master/implementations/java/org.hl7.fhir.utilities/src/org/hl7/fhir/utilities/cache/ToolsVersion.java">https://github.com/HL7/fhir/blob/master/implementations/java/org.hl7.fhir.utilities/src/org/hl7/fhir/utilities/cache/ToolsVersion.java</a></p>



<a name="154012884"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/package.json%20wrong%20version/near/154012884" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/package.2Ejson.20wrong.20version.html#154012884">(Oct 27 2018 at 17:19)</a>:</h4>
<p>if you run it locally, the value in your package.tgz will be 3</p>



<a name="154012885"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/package.json%20wrong%20version/near/154012885" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/package.2Ejson.20wrong.20version.html#154012885">(Oct 27 2018 at 17:19)</a>:</h4>
<p>So package.tgz contains another package.tgz?</p>



<a name="154012886"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/package.json%20wrong%20version/near/154012886" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/package.2Ejson.20wrong.20version.html#154012886">(Oct 27 2018 at 17:19)</a>:</h4>
<p>if you download what purports to be outcome of the current build for package.tgz,you'll get the value 2</p>



<a name="154012887"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/package.json%20wrong%20version/near/154012887" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/package.2Ejson.20wrong.20version.html#154012887">(Oct 27 2018 at 17:20)</a>:</h4>
<p>sorry  typo - should be package/package.json inside package.tgz</p>



<a name="154012888"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/package.json%20wrong%20version/near/154012888" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/package.2Ejson.20wrong.20version.html#154012888">(Oct 27 2018 at 17:20)</a>:</h4>
<p>ahh, yes. And that's "2".</p>



<a name="154012889"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/package.json%20wrong%20version/near/154012889" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/package.2Ejson.20wrong.20version.html#154012889">(Oct 27 2018 at 17:20)</a>:</h4>
<p>It says inside that json file:</p>
<blockquote>
<p>"description": "FHIR Core package - the NPM package that contains all the definitions for the base FHIR specification(built 20181026225400)"</p>
</blockquote>



<a name="154012890"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/package.json%20wrong%20version/near/154012890" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/package.2Ejson.20wrong.20version.html#154012890">(Oct 27 2018 at 17:21)</a>:</h4>
<p>Does that look correct (i.e., up to date)?</p>



<a name="154012891"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/package.json%20wrong%20version/near/154012891" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/package.2Ejson.20wrong.20version.html#154012891">(Oct 27 2018 at 17:22)</a>:</h4>
<p>no? comparing with the build notifications, it doesn't seen to match (would be different by being start/end of the build)</p>



<a name="154012892"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/package.json%20wrong%20version/near/154012892" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/package.2Ejson.20wrong.20version.html#154012892">(Oct 27 2018 at 17:23)</a>:</h4>
<p>Here are the args we build with on the CI server:</p>
<div class="codehilite"><pre><span></span>NAME=&quot;Continuous Integration Build&quot;
SVNREV=$(git rev-parse --short HEAD)

antBuild (){
  ant -Dargs=&quot;./publish.sh -svn $SVNREV -name \&#39;$NAME\&#39; -url http://build.fhir.org/  -post-pr&quot;
    checkStatus
}
</pre></div>


<p>... so whatever goes into <code>package.tgz/package/package.json</code> is whatever gets built by this ant command.  How is <code>tools-version</code> supposed to be populated by this?</p>



<a name="154012893"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/package.json%20wrong%20version/near/154012893" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/package.2Ejson.20wrong.20version.html#154012893">(Oct 27 2018 at 17:23)</a>:</h4>
<p>I'll see if I can add a timezone to that</p>



<a name="154012894"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/package.json%20wrong%20version/near/154012894" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/package.2Ejson.20wrong.20version.html#154012894">(Oct 27 2018 at 17:24)</a>:</h4>
<p>it's build by the java code. Its hard coded to that java constant, and populated correctly when I build locally</p>



<a name="154012895"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/package.json%20wrong%20version/near/154012895" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/package.2Ejson.20wrong.20version.html#154012895">(Oct 27 2018 at 17:24)</a>:</h4>
<p>Huh. Is there any condition in which TOOLS_VERSION can/should ever be "2"?</p>



<a name="154012896"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/package.json%20wrong%20version/near/154012896" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/package.2Ejson.20wrong.20version.html#154012896">(Oct 27 2018 at 17:25)</a>:</h4>
<p>no. it's a fixed constant I changed about 4 days ago</p>



<a name="154012897"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/package.json%20wrong%20version/near/154012897" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/package.2Ejson.20wrong.20version.html#154012897">(Oct 27 2018 at 17:25)</a>:</h4>
<p>Ah, but you changed it from 2 -&gt; 3? So it used to be 2?</p>



<a name="154012898"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/package.json%20wrong%20version/near/154012898" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/package.2Ejson.20wrong.20version.html#154012898">(Oct 27 2018 at 17:25)</a>:</h4>
<p>yes</p>



<a name="154012899"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/package.json%20wrong%20version/near/154012899" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/package.2Ejson.20wrong.20version.html#154012899">(Oct 27 2018 at 17:25)</a>:</h4>
<p>And the new file is definitely being _built_ later than 4 days ago, given the timestamp.</p>



<a name="154012900"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/package.json%20wrong%20version/near/154012900" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/package.2Ejson.20wrong.20version.html#154012900">(Oct 27 2018 at 17:25)</a>:</h4>
<p>and this change hasn't arrived into that file and I can't figure out why</p>



<a name="154012901"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/package.json%20wrong%20version/near/154012901" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/package.2Ejson.20wrong.20version.html#154012901">(Oct 27 2018 at 17:25)</a>:</h4>
<p>But you're thinking that the CI build is somehow happening with some old version of the source (constant definitions) hanging around?</p>



<a name="154012902"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/package.json%20wrong%20version/near/154012902" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/package.2Ejson.20wrong.20version.html#154012902">(Oct 27 2018 at 17:26)</a>:</h4>
<p>3 days ago: <a href="https://github.com/HL7/fhir/commit/1a950707e40b76fbf5923021a31245a5d23230e5" target="_blank" title="https://github.com/HL7/fhir/commit/1a950707e40b76fbf5923021a31245a5d23230e5">https://github.com/HL7/fhir/commit/1a950707e40b76fbf5923021a31245a5d23230e5</a></p>



<a name="154012903"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/package.json%20wrong%20version/near/154012903" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/package.2Ejson.20wrong.20version.html#154012903">(Oct 27 2018 at 17:26)</a>:</h4>
<p>Let me turn "Clean" on for the CI build; it's been on for PR builds for a while.</p>



<a name="154012904"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/package.json%20wrong%20version/near/154012904" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/package.2Ejson.20wrong.20version.html#154012904">(Oct 27 2018 at 17:27)</a>:</h4>
<p>OK, done. I'll kick off a new CI build.</p>



<a name="154012905"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/package.json%20wrong%20version/near/154012905" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/package.2Ejson.20wrong.20version.html#154012905">(Oct 27 2018 at 17:27)</a>:</h4>
<p>ok thanks</p>



<a name="154012906"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/package.json%20wrong%20version/near/154012906" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/package.2Ejson.20wrong.20version.html#154012906">(Oct 27 2018 at 17:27)</a>:</h4>
<p>if that's the problem... it means that the caching was very far upstream ;-)</p>



<a name="154012907"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/package.json%20wrong%20version/near/154012907" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/package.2Ejson.20wrong.20version.html#154012907">(Oct 27 2018 at 17:27)</a>:</h4>
<p>Sure -- sorry this took so long for me to understand; I was under the impression there was a web hosting kind of caching issue.</p>



<a name="154012908"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/package.json%20wrong%20version/near/154012908" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/package.2Ejson.20wrong.20version.html#154012908">(Oct 27 2018 at 17:27)</a>:</h4>
<p>Yeah</p>



<a name="154012910"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/package.json%20wrong%20version/near/154012910" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/package.2Ejson.20wrong.20version.html#154012910">(Oct 27 2018 at 17:28)</a>:</h4>
<p>but given that the package.json file is newly created each time, it _must_ be upstream.</p>



<a name="154012911"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/package.json%20wrong%20version/near/154012911" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/package.2Ejson.20wrong.20version.html#154012911">(Oct 27 2018 at 17:28)</a>:</h4>
<p>I didn't think to check the date :-(</p>



<a name="154012913"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/package.json%20wrong%20version/near/154012913" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/package.2Ejson.20wrong.20version.html#154012913">(Oct 27 2018 at 17:49)</a>:</h4>
<p>yes that fixed it</p>



<a name="154012914"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/package.json%20wrong%20version/near/154012914" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/package.2Ejson.20wrong.20version.html#154012914">(Oct 27 2018 at 17:51)</a>:</h4>
<p>thanks</p>



<a name="154012916"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/package.json%20wrong%20version/near/154012916" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/package.2Ejson.20wrong.20version.html#154012916">(Oct 27 2018 at 18:14)</a>:</h4>
<p>on reflection, this is a common problem: ant does not always rebuild all java classes. Hence our immediate response when something doesn't make sense: clean your class files out. I'm not seeing any good information about there about this problem..</p>



<a name="154012976"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/package.json%20wrong%20version/near/154012976" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/package.2Ejson.20wrong.20version.html#154012976">(Oct 27 2018 at 21:18)</a>:</h4>
<p>What folders needs to be deleted and repulled?  (Clean out class files)</p>



<a name="154012977"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/package.json%20wrong%20version/near/154012977" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/package.2Ejson.20wrong.20version.html#154012977">(Oct 27 2018 at 21:21)</a>:</h4>
<p>I once tried <a href="http://clean.sh" target="_blank" title="http://clean.sh">clean.sh</a> which resulted in scenes of lamentations</p>



<a name="154012980"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/package.json%20wrong%20version/near/154012980" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/package.2Ejson.20wrong.20version.html#154012980">(Oct 27 2018 at 21:47)</a>:</h4>
<p>Getting this now:</p>
<div class="codehilite"><pre><span></span>     [java] Checking hl7.fhir.core-current currency                                          (02.0940sec)
     [java]    ...  ok: is 3, must be 3                                                      (02.0941sec)
</pre></div>


<p>Much better, thanks!</p>



<a name="154012986"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/package.json%20wrong%20version/near/154012986" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/package.2Ejson.20wrong.20version.html#154012986">(Oct 28 2018 at 00:22)</a>:</h4>
<p>We’ve fixed <a href="http://clean.sh" target="_blank" title="http://clean.sh">clean.sh</a></p>



<a name="154013226"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/package.json%20wrong%20version/near/154013226" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/package.2Ejson.20wrong.20version.html#154013226">(Oct 29 2018 at 14:15)</a>:</h4>
<p>Hmm, have we? I don't see any changes at <a href="https://github.com/HL7/fhir/commits/master/clean.sh" target="_blank" title="https://github.com/HL7/fhir/commits/master/clean.sh">https://github.com/HL7/fhir/commits/master/clean.sh</a></p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
