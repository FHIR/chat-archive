---
layout: page
title: "FHIR Chat  · Validation issue with partial type slicing · IG creation"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/index.html">IG creation</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Validation.20issue.20with.20partial.20type.20slicing.html">Validation issue with partial type slicing</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="215759460"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Validation%20issue%20with%20partial%20type%20slicing/near/215759460" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Validation.20issue.20with.20partial.20type.20slicing.html#215759460">(Nov 05 2020 at 19:07)</a>:</h4>
<p>This profiles: <a href="http://build.fhir.org/ig/HL7/fhir-sdoh-clinicalcare/branches/master/StructureDefinition-SDOHCC-Observation-ScreeningResponseBase-1.html">http://build.fhir.org/ig/HL7/fhir-sdoh-clinicalcare/branches/master/StructureDefinition-SDOHCC-Observation-ScreeningResponseBase-1.html</a> says that effective[x] can be a dateTime or a Period.  We define an optional type slice on Period.  However, the validator yells about this example: <a href="http://build.fhir.org/ig/HL7/fhir-sdoh-clinicalcare/branches/master/Observation-SDOHCC-Observation-HungerVitalSign-Example-3.html">http://build.fhir.org/ig/HL7/fhir-sdoh-clinicalcare/branches/master/Observation-SDOHCC-Observation-HungerVitalSign-Example-3.html</a> saying that it doesn't match the slice.  But it's not expected to match the slice - and the slice is optional...</p>



<a name="215807285"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Validation%20issue%20with%20partial%20type%20slicing/near/215807285" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Validation.20issue.20with.20partial.20type.20slicing.html#215807285">(Nov 06 2020 at 05:13)</a>:</h4>
<p>so this is an issue in the snapshot generator -  validator is faithfully doing what the snapshot says:</p>
<div class="codehilite" data-code-language="XML"><pre><span></span><code>  <span class="nt">&lt;element</span> <span class="na">id=</span><span class="s">"Observation.effective[x]"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;path</span> <span class="na">value=</span><span class="s">"Observation.effective[x]"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;slicing&gt;</span>
        <span class="nt">&lt;discriminator&gt;</span>
          <span class="nt">&lt;type</span> <span class="na">value=</span><span class="s">"type"</span><span class="nt">/&gt;</span>
          <span class="nt">&lt;path</span> <span class="na">value=</span><span class="s">"$this"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/discriminator&gt;</span>
        <span class="nt">&lt;ordered</span> <span class="na">value=</span><span class="s">"false"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;rules</span> <span class="na">value=</span><span class="s">"closed"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;/slicing&gt;</span>
      <span class="nt">&lt;type&gt;</span>
        <span class="nt">&lt;code</span> <span class="na">value=</span><span class="s">"dateTime"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;/type&gt;</span>
      <span class="nt">&lt;type&gt;</span>
        <span class="nt">&lt;code</span> <span class="na">value=</span><span class="s">"Period"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;/type&gt;</span>
    <span class="nt">&lt;/element&gt;</span>

  <span class="nt">&lt;element</span> <span class="na">id=</span><span class="s">"Observation.effective[x]:effectivePeriod"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;path</span> <span class="na">value=</span><span class="s">"Observation.effective[x]"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;sliceName</span> <span class="na">value=</span><span class="s">"effectivePeriod"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;short</span> <span class="na">value=</span><span class="s">"Clinically relevant time/time-period for observation"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;definition</span>
                  <span class="na">value=</span><span class="s">"The time or time-period the observed value is asserted as being true. For biological subjects - e.g. human patients - this is usually called the &amp;quot;physiologically relevant time&amp;quot;. This is usually either the time of the procedure or of specimen collection, but very often the source of the date/time is not known, only the date/time itself."</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;comment</span>
               <span class="na">value=</span><span class="s">"At least a date should be present unless this observation is a historical report.  For recording imprecise or &amp;quot;fuzzy&amp;quot; times (For example, a blood glucose measurement taken &amp;quot;after breakfast&amp;quot;) use the [Timing](http://hl7.org/fhir/R4/datatypes.html#timing) datatype which allow the measurement to be tied to regular life events."</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;requirements</span>
                    <span class="na">value=</span><span class="s">"Knowing when an observation was deemed true is important to its relevance as well as determining trends."</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;alias</span> <span class="na">value=</span><span class="s">"Occurrence"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;min</span> <span class="na">value=</span><span class="s">"0"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;max</span> <span class="na">value=</span><span class="s">"1"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;base&gt;</span>
        <span class="nt">&lt;path</span> <span class="na">value=</span><span class="s">"Observation.effective[x]"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;min</span> <span class="na">value=</span><span class="s">"0"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;max</span> <span class="na">value=</span><span class="s">"1"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;/base&gt;</span>
      <span class="nt">&lt;type&gt;</span>
        <span class="nt">&lt;code</span> <span class="na">value=</span><span class="s">"Period"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;/type&gt;</span>
    <span class="nt">&lt;/element&gt;</span>
</code></pre></div>



<a name="215807302"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Validation%20issue%20with%20partial%20type%20slicing/near/215807302" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Validation.20issue.20with.20partial.20type.20slicing.html#215807302">(Nov 06 2020 at 05:14)</a>:</h4>
<p>17 of the existing 104 snapshot generation tests explore this area. A typical example is in t44a:</p>
<div class="codehilite" data-code-language="XML"><pre><span></span><code> <span class="nt">&lt;differential&gt;</span>
    <span class="nt">&lt;element&gt;</span>
      <span class="nt">&lt;path</span> <span class="na">value=</span><span class="s">"Observation"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/element&gt;</span>
<span class="c">&lt;!--    &lt;element&gt;</span>
<span class="c">      &lt;path value="Observation.value[x]"/&gt;</span>
<span class="c">      &lt;short value="some text"/&gt;</span>
<span class="c">      &lt;type&gt;</span>
<span class="c">        &lt;code value="Quantity"/&gt;</span>
<span class="c">      &lt;/type&gt;</span>
<span class="c">    &lt;/element&gt; --&gt;</span>
    <span class="nt">&lt;element&gt;</span>
      <span class="nt">&lt;path</span> <span class="na">value=</span><span class="s">"Observation.valueQuantity"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;short</span> <span class="na">value=</span><span class="s">"some text for quantity"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/element&gt;</span>
  <span class="nt">&lt;/differential&gt;</span>
</code></pre></div>



<a name="215807348"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Validation%20issue%20with%20partial%20type%20slicing/near/215807348" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Validation.20issue.20with.20partial.20type.20slicing.html#215807348">(Nov 06 2020 at 05:14)</a>:</h4>
<p>which leads to this:</p>



<a name="215807376"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Validation%20issue%20with%20partial%20type%20slicing/near/215807376" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Validation.20issue.20with.20partial.20type.20slicing.html#215807376">(Nov 06 2020 at 05:15)</a>:</h4>
<div class="codehilite" data-code-language="XML"><pre><span></span><code>    <span class="nt">&lt;element</span> <span class="na">id=</span><span class="s">"Observation.value[x]"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;path</span> <span class="na">value=</span><span class="s">"Observation.value[x]"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;slicing&gt;</span>
        <span class="nt">&lt;discriminator&gt;</span>
          <span class="nt">&lt;type</span> <span class="na">value=</span><span class="s">"type"</span><span class="nt">/&gt;</span>
          <span class="nt">&lt;path</span> <span class="na">value=</span><span class="s">"$this"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/discriminator&gt;</span>
        <span class="nt">&lt;ordered</span> <span class="na">value=</span><span class="s">"false"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;rules</span> <span class="na">value=</span><span class="s">"closed"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;/slicing&gt;</span>
      <span class="nt">&lt;type&gt;</span>
        <span class="nt">&lt;code</span> <span class="na">value=</span><span class="s">"Quantity"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;/type&gt;</span>
      <span class="nt">&lt;type&gt;</span>
        <span class="nt">&lt;code</span> <span class="na">value=</span><span class="s">"CodeableConcept"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;/type&gt;</span>
      <span class="nt">&lt;type&gt;</span>
        <span class="nt">&lt;code</span> <span class="na">value=</span><span class="s">"string"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;/type&gt;</span>
      <span class="nt">&lt;type&gt;</span>
        <span class="nt">&lt;code</span> <span class="na">value=</span><span class="s">"boolean"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;/type&gt;</span>
      <span class="nt">&lt;type&gt;</span>
        <span class="nt">&lt;code</span> <span class="na">value=</span><span class="s">"integer"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;/type&gt;</span>
      <span class="nt">&lt;type&gt;</span>
        <span class="nt">&lt;code</span> <span class="na">value=</span><span class="s">"Range"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;/type&gt;</span>
      <span class="nt">&lt;type&gt;</span>
        <span class="nt">&lt;code</span> <span class="na">value=</span><span class="s">"Ratio"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;/type&gt;</span>
      <span class="nt">&lt;type&gt;</span>
        <span class="nt">&lt;code</span> <span class="na">value=</span><span class="s">"SampledData"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;/type&gt;</span>
      <span class="nt">&lt;type&gt;</span>
        <span class="nt">&lt;code</span> <span class="na">value=</span><span class="s">"time"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;/type&gt;</span>
      <span class="nt">&lt;type&gt;</span>
        <span class="nt">&lt;code</span> <span class="na">value=</span><span class="s">"dateTime"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;/type&gt;</span>
      <span class="nt">&lt;type&gt;</span>
        <span class="nt">&lt;code</span> <span class="na">value=</span><span class="s">"Period"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;/type&gt;</span>
    <span class="nt">&lt;/element&gt;</span>
    <span class="nt">&lt;element</span> <span class="na">id=</span><span class="s">"Observation.value[x]:valueQuantity"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;path</span> <span class="na">value=</span><span class="s">"Observation.value[x]"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;sliceName</span> <span class="na">value=</span><span class="s">"valueQuantity"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;type&gt;</span>
        <span class="nt">&lt;code</span> <span class="na">value=</span><span class="s">"Quantity"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;/type&gt;</span>
    <span class="nt">&lt;/element&gt;</span>
</code></pre></div>



<a name="215807497"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Validation%20issue%20with%20partial%20type%20slicing/near/215807497" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Validation.20issue.20with.20partial.20type.20slicing.html#215807497">(Nov 06 2020 at 05:18)</a>:</h4>
<p>it's driven by how extensions are defined, in fact, were this is how it works.</p>



<a name="215850248"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Validation%20issue%20with%20partial%20type%20slicing/near/215850248" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Validation.20issue.20with.20partial.20type.20slicing.html#215850248">(Nov 06 2020 at 14:11)</a>:</h4>
<p>I don't understand.  The base type allows dateTime or Period.  We define an optional slice on Period.   The snapshot looks fine.  The issue is that the validator shouldn't yell about the optional slice on effectivePeriod when we send a dateTime?</p>



<a name="215878306"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Validation%20issue%20with%20partial%20type%20slicing/near/215878306" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Validation.20issue.20with.20partial.20type.20slicing.html#215878306">(Nov 06 2020 at 17:31)</a>:</h4>
<p>the snapshot is not fine - the slices are closed</p>



<a name="215901992"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Validation%20issue%20with%20partial%20type%20slicing/near/215901992" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Validation.20issue.20with.20partial.20type.20slicing.html#215901992">(Nov 06 2020 at 20:48)</a>:</h4>
<p>Oh, piddle.  Sorry for not catching that.</p>



<a name="215902202"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Validation%20issue%20with%20partial%20type%20slicing/near/215902202" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Validation.20issue.20with.20partial.20type.20slicing.html#215902202">(Nov 06 2020 at 20:50)</a>:</h4>
<p>(shocked at Lloyd's strong language on Zulip!)</p>



<a name="215907833"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Validation%20issue%20with%20partial%20type%20slicing/near/215907833" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Validation.20issue.20with.20partial.20type.20slicing.html#215907833">(Nov 06 2020 at 21:44)</a>:</h4>
<p>so I think that the snapshot is wrong, but I don't likely change a pile of accepted tests, and I haven't figured out how I could make a change with a technical correction since it would break all existing extension definitions</p>



<a name="215910257"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Validation%20issue%20with%20partial%20type%20slicing/near/215910257" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Validation.20issue.20with.20partial.20type.20slicing.html#215910257">(Nov 06 2020 at 22:09)</a>:</h4>
<p>The snapshot is indeed wrong.  The differential lists the slicing as open.</p>



<a name="215910450"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Validation%20issue%20with%20partial%20type%20slicing/near/215910450" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Validation.20issue.20with.20partial.20type.20slicing.html#215910450">(Nov 06 2020 at 22:11)</a>:</h4>
<p>Why is the snapshot closing it?  I think that's the problem here...</p>



<a name="215917940"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Validation%20issue%20with%20partial%20type%20slicing/near/215917940" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Validation.20issue.20with.20partial.20type.20slicing.html#215917940">(Nov 06 2020 at 23:40)</a>:</h4>
<p>because if it doesn't, every single extension will allow any type</p>



<a name="215924392"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Validation%20issue%20with%20partial%20type%20slicing/near/215924392" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Validation.20issue.20with.20partial.20type.20slicing.html#215924392">(Nov 07 2020 at 01:31)</a>:</h4>
<p>Can you make a separate rule for extensions, at least for now?  Because there's no other way to enforce the behavior this IG needs...</p>



<a name="215936560"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Validation%20issue%20with%20partial%20type%20slicing/near/215936560" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Validation.20issue.20with.20partial.20type.20slicing.html#215936560">(Nov 07 2020 at 05:40)</a>:</h4>
<p>you can make an explicit slice</p>



<a name="215942937"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Validation%20issue%20with%20partial%20type%20slicing/near/215942937" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Validation.20issue.20with.20partial.20type.20slicing.html#215942937">(Nov 07 2020 at 07:30)</a>:</h4>
<p>I could, but it's methodologically wrong to force all type slices to be closed.  And for something like Observation where you want to constrain a couple of them, but leave the full set available, it's a ton of work and super ugly in the rendering.  This isn't a bug we should be continuing to propagate.  I recognize we may need to leave it in place for a while until people can fix their extension definitions (presumably prompted by warnings), but it makes no sense to leave things broken like this forever...</p>



<a name="215971805"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Validation%20issue%20with%20partial%20type%20slicing/near/215971805" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Validation.20issue.20with.20partial.20type.20slicing.html#215971805">(Nov 07 2020 at 20:24)</a>:</h4>
<p>it's every extension definition we have</p>



<a name="215971828"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Validation%20issue%20with%20partial%20type%20slicing/near/215971828" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Validation.20issue.20with.20partial.20type.20slicing.html#215971828">(Nov 07 2020 at 20:25)</a>:</h4>
<p>and any existing relevant profiles - I haven't found a criteria to decide by</p>



<a name="215971830"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Validation%20issue%20with%20partial%20type%20slicing/near/215971830" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Validation.20issue.20with.20partial.20type.20slicing.html#215971830">(Nov 07 2020 at 20:25)</a>:</h4>
<p>Right.  So something that might not be able to be fixed for extensions until R5.  The validator will have to take that approach for all extensions in R4 and earlier.</p>



<a name="215971846"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Validation%20issue%20with%20partial%20type%20slicing/near/215971846" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Validation.20issue.20with.20partial.20type.20slicing.html#215971846">(Nov 07 2020 at 20:26)</a>:</h4>
<p>e.g. the test cases include a telus profile that has this problem</p>



<a name="215972550"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Validation%20issue%20with%20partial%20type%20slicing/near/215972550" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Validation.20issue.20with.20partial.20type.20slicing.html#215972550">(Nov 07 2020 at 20:41)</a>:</h4>
<p>no. not that one.  But all these test cases:</p>
<p>t6: Error at Patient.deceased[x]: Allowed Types not sliced = [boolean]<br>
t28: Error at OperationOutcome.issue.details.text.extension.value[x]: Allowed Types not sliced = [string]<br>
t34: Error at Extension.value[x]: Allowed Types not sliced = [date, Meta, Address, Attachment, integer, Count, DataRequirement, Dosage, uuid, Identifier, Coding, SampledData, id, positiveInt, Distance, Period, Duration, canonical, Range, RelatedArtifact, base64Binary, UsageContext, Timing, decimal, CodeableConcept, ParameterDefinition, dateTime, string, Contributor, oid, instant, ContactPoint, HumanName, Money, markdown, Ratio, Age, Reference, TriggerDefinition, Quantity, uri, url, Annotation, ContactDetail, boolean, Expression, Signature, unsignedInt, time]<br>
t44a: Error at Observation.value[x]: Allowed Types not sliced = [dateTime, boolean, string, SampledData, Period, Ratio, integer, time, Range, CodeableConcept]<br>
au2: Error at Extension.extension.value[x]: Allowed Types not sliced = [date, Meta, Address, Attachment, integer, Count, DataRequirement, Dosage, uuid, Identifier, Coding, SampledData, id, positiveInt, Distance, Period, Duration, canonical, Range, RelatedArtifact, base64Binary, UsageContext, Timing, decimal, CodeableConcept, ParameterDefinition, dateTime, code, Contributor, oid, instant, ContactPoint, HumanName, Money, markdown, Ratio, Age, Reference, TriggerDefinition, Quantity, uri, url, Annotation, ContactDetail, boolean, Expression, Signature, unsignedInt, time]<br>
au3: Error at Observation.effective[x]: Allowed Types not sliced = [Period, Timing, instant]<br>
dv1: Error at Timing.repeat.bounds[x]: Allowed Types not sliced = [Period, Range]<br>
obs-2: Error at Observation.value[x]: Allowed Types not sliced = [dateTime, boolean, string, SampledData, Quantity, Period, Ratio, integer, time, Range]<br>
obs-2b: Error at Observation.value[x]: Allowed Types not sliced = [dateTime, boolean, string, SampledData, Quantity, Period, Ratio, integer, time, Range]<br>
obs-4: Error at Observation.value[x]: Allowed Types not sliced = [dateTime, boolean, string, SampledData, Quantity, Period, Ratio, integer, time, Range]<br>
obs-5: Error at Observation.value[x]: Allowed Types not sliced = [dateTime, boolean, string, SampledData, Period, Ratio, integer, time, Range]<br>
pattern-ext-1: Error at MessageHeader.event[x]: Allowed Types not sliced = [uri]<br>
pattern-ext-2: Error at MessageHeader.event[x]: Allowed Types not sliced = [uri]<br>
ext-sort-issue: Error at Extension.value[x]: Allowed Types not sliced = [date, Meta, Address, Attachment, integer, Count, DataRequirement, Dosage, uuid, Identifier, Coding, SampledData, id, positiveInt, Distance, Period, Duration, canonical, Range, RelatedArtifact, base64Binary, UsageContext, Timing, decimal, CodeableConcept, ParameterDefinition, dateTime, code, string, Contributor, oid, instant, ContactPoint, HumanName, Money, markdown, Ratio, Age, TriggerDefinition, Quantity, uri, url, Annotation, ContactDetail, boolean, Expression, Signature, unsignedInt, time]<br>
dk1: Error at Extension.value[x]: Allowed Types not sliced = [date, Meta, Address, Attachment, integer, Count, DataRequirement, Dosage, uuid, Identifier, Coding, SampledData, id, positiveInt, Distance, Period, Duration, canonical, Range, RelatedArtifact, base64Binary, UsageContext, Timing, decimal, ParameterDefinition, dateTime, code, string, Contributor, oid, instant, ContactPoint, HumanName, Money, markdown, Ratio, Age, Reference, TriggerDefinition, Quantity, uri, url, Annotation, ContactDetail, boolean, Expression, Signature, unsignedInt, time]<br>
nl-med: Error at List.source.extension.value[x]: Allowed Types not sliced = [date, Meta, Address, Attachment, integer, Count, DataRequirement, Dosage, uuid, Identifier, Coding, SampledData, id, positiveInt, Distance, Period, Duration, canonical, Range, RelatedArtifact, base64Binary, UsageContext, Timing, decimal, CodeableConcept, ParameterDefinition, dateTime, code, string, Contributor, oid, instant, ContactPoint, HumanName, Money, markdown, Ratio, Age, TriggerDefinition, Quantity, uri, url, Annotation, ContactDetail, boolean, Expression, Signature, unsignedInt, time]<br>
zib-BodyHeight: Error at Observation.value[x]: Allowed Types not sliced = [dateTime, boolean, string, SampledData, Period, Ratio, integer, time, Range, CodeableConcept]<br>
type-slice-missing: Error at Observation.effective[x]: Allowed Types not sliced = [dateTime]</p>



<a name="215972826"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Validation%20issue%20with%20partial%20type%20slicing/near/215972826" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Validation.20issue.20with.20partial.20type.20slicing.html#215972826">(Nov 07 2020 at 20:48)</a>:</h4>
<p>So leave it as is and fix it in R5?  It's wrong to auto-change "open" slices to "closed" just because that's how people erroneously did it when they started defining extensions.</p>



<a name="215972839"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Validation%20issue%20with%20partial%20type%20slicing/near/215972839" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Validation.20issue.20with.20partial.20type.20slicing.html#215972839">(Nov 07 2020 at 20:48)</a>:</h4>
<p>it's not just extensions</p>



<a name="215972865"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Validation%20issue%20with%20partial%20type%20slicing/near/215972865" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Validation.20issue.20with.20partial.20type.20slicing.html#215972865">(Nov 07 2020 at 20:49)</a>:</h4>
<p>but I may have an idea. let me investigate</p>



<a name="216432721"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Validation%20issue%20with%20partial%20type%20slicing/near/216432721" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Validation.20issue.20with.20partial.20type.20slicing.html#216432721">(Nov 12 2020 at 06:37)</a>:</h4>
<p>returning to this, after several days or work (I really don't like finding bugs in the snapshot generation)</p>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> please review the changes to the test cases here: <a href="https://github.com/FHIR/fhir-test-cases/commit/acceaea7126b90c6c421268dc7098e4eba68c771">https://github.com/FHIR/fhir-test-cases/commit/acceaea7126b90c6c421268dc7098e4eba68c771</a></p>
<p>everyone else is welcome to review them as well</p>



<a name="216484909"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Validation%20issue%20with%20partial%20type%20slicing/near/216484909" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Validation.20issue.20with.20partial.20type.20slicing.html#216484909">(Nov 12 2020 at 15:42)</a>:</h4>
<p>In au3-expected.xml, I think <code>&lt;img src="http://hl7.org/fhirhelp16.png"</code> should be <code>&lt;img src="http://hl7.org/fhir/help16.png"</code></p>



<a name="216485005"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Validation%20issue%20with%20partial%20type%20slicing/near/216485005" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Validation.20issue.20with.20partial.20type.20slicing.html#216485005">(Nov 12 2020 at 15:42)</a>:</h4>
<p>Same issue with <code>&lt;a href="http://hl7.org/fhirreferences.html"&gt;</code></p>



<a name="216485044"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Validation%20issue%20with%20partial%20type%20slicing/near/216485044" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Validation.20issue.20with.20partial.20type.20slicing.html#216485044">(Nov 12 2020 at 15:43)</a>:</h4>
<p>(and a few others)</p>



<a name="216485190"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Validation%20issue%20with%20partial%20type%20slicing/near/216485190" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Validation.20issue.20with.20partial.20type.20slicing.html#216485190">(Nov 12 2020 at 15:44)</a>:</h4>
<p>In dv1-expected.xml, why did the links change to no longer be R4-specific?</p>



<a name="216485907"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Validation%20issue%20with%20partial%20type%20slicing/near/216485907" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Validation.20issue.20with.20partial.20type.20slicing.html#216485907">(Nov 12 2020 at 15:48)</a>:</h4>
<p>Missing '/' issues appear on a few of the other test cases too.  No other issues I could see</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
