---
layout: page
title: "FHIR Chat  · CI build failing: html generated more than once · IG creation"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/index.html">IG creation</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/CI.20build.20failing.3A.20html.20generated.20more.20than.20once.html">CI build failing: html generated more than once</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="202735269"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/CI%20build%20failing%3A%20html%20generated%20more%20than%20once/near/202735269" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joee Garcia <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/CI.20build.20failing.3A.20html.20generated.20more.20than.20once.html#202735269">(Jul 02 2020 at 19:34)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span>   The SDC IG (CI Build) is getting the following build exception using the latest version - FHIR IG Publisher Version 1.0.101-SNAPSHOT...</p>
<p>onGenerate:<br>
Exception in thread "main" java.lang.Error: Error generating build: the file /scratch/ig-build-temp-RCQZY0/repo/temp/pages/Questionnaire-questionnaire-sdc-profile-example-loinc-history.html is being generated more than once (may differ by case)<br>
    at org.hl7.fhir.igtools.publisher.Publisher.checkMakeFile(Publisher.java:2819)<br>
    at org.hl7.fhir.igtools.publisher.Publisher.genWrapperContained(Publisher.java:6942)<br>
    at org.hl7.fhir.igtools.publisher.Publisher.makeTemplatesContained(Publisher.java:6750)<br>
    at org.hl7.fhir.igtools.publisher.Publisher.generateHtmlOutputs(Publisher.java:6301)<br>
    at org.hl7.fhir.igtools.publisher.Publisher.generate(Publisher.java:4654)<br>
    at org.hl7.fhir.igtools.publisher.Publisher.createIg(Publisher.java:856)<br>
    at org.hl7.fhir.igtools.publisher.Publisher.execute(Publisher.java:705)<br>
    at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:7694)</p>
<p>It is failing in one of our example questionnaires with a lot of contained ValueSets. It seems that the exception is being raised if there is more than one contained ValueSet in a Questionnaire.  If I just keep one, the error goes away.  Is this a bug? Please advise.</p>
<p>Thanks,<br>
Joee</p>



<a name="202741601"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/CI%20build%20failing%3A%20html%20generated%20more%20than%20once/near/202741601" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/CI.20build.20failing.3A.20html.20generated.20more.20than.20once.html#202741601">(Jul 02 2020 at 20:34)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span></p>



<a name="202741803"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/CI%20build%20failing%3A%20html%20generated%20more%20than%20once/near/202741803" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/CI.20build.20failing.3A.20html.20generated.20more.20than.20once.html#202741803">(Jul 02 2020 at 20:36)</a>:</h4>
<p>this is an issue in the template. It is trying to create a -history file, when the IG publisher is already creating one</p>



<a name="202741836"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/CI%20build%20failing%3A%20html%20generated%20more%20than%20once/near/202741836" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/CI.20build.20failing.3A.20html.20generated.20more.20than.20once.html#202741836">(Jul 02 2020 at 20:37)</a>:</h4>
<p><span class="user-mention" data-user-id="191832">@Jose Costa Teixeira</span> ?</p>



<a name="202742058"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/CI%20build%20failing%3A%20html%20generated%20more%20than%20once/near/202742058" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/CI.20build.20failing.3A.20html.20generated.20more.20than.20once.html#202742058">(Jul 02 2020 at 20:40)</a>:</h4>
<p>I'm checking it</p>



<a name="202744551"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/CI%20build%20failing%3A%20html%20generated%20more%20than%20once/near/202744551" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/CI.20build.20failing.3A.20html.20generated.20more.20than.20once.html#202744551">(Jul 02 2020 at 21:05)</a>:</h4>
<p>well, the good news is .. I checked it.</p>



<a name="202747093"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/CI%20build%20failing%3A%20html%20generated%20more%20than%20once/near/202747093" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/CI.20build.20failing.3A.20html.20generated.20more.20than.20once.html#202747093">(Jul 02 2020 at 21:32)</a>:</h4>
<p>The template doesn't seem to be adding history to questionnaires. Still i tried to debug it by removing the history feature, and i get this:</p>
<div class="codehilite"><pre><span></span><code>onGenerate:
Publishing Content Failed: null                                                  (00:36.0698)
                                                                                 (00:36.0700)
Use -? to get command line help                                                  (00:36.0711)
                                                                                 (00:36.0713)
Stack Dump (for debugging):                                                      (00:36.0715)
java.lang.NullPointerException
        at org.hl7.fhir.r5.renderers.QuestionnaireResponseRenderer.renderTreeItem(QuestionnaireResponseRenderer.java:167)
        at org.hl7.fhir.r5.renderers.QuestionnaireResponseRenderer.renderTree(QuestionnaireResponseRenderer.java:91)
        at org.hl7.fhir.r5.renderers.QuestionnaireResponseRenderer.render(QuestionnaireResponseRenderer.java:69)
        at org.hl7.fhir.r5.renderers.ResourceRenderer.render(ResourceRenderer.java:76)
        at org.hl7.fhir.igtools.renderers.QuestionnaireResponseRenderer.render(QuestionnaireResponseRenderer.java:65)
        at org.hl7.fhir.igtools.publisher.Publisher.generateOutputsQuestionnaireResponse(Publisher.java:7265)
        at org.hl7.fhir.igtools.publisher.Publisher.generateHtmlOutputs(Publisher.java:6325)
        at org.hl7.fhir.igtools.publisher.Publisher.generate(Publisher.java:4658)
        at org.hl7.fhir.igtools.publisher.Publisher.createIg(Publisher.java:858)
        at org.hl7.fhir.igtools.publisher.Publisher.execute(Publisher.java:707)
        at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:7756)
Press any key to continue . . .
</code></pre></div>



<a name="202748468"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/CI%20build%20failing%3A%20html%20generated%20more%20than%20once/near/202748468" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/CI.20build.20failing.3A.20html.20generated.20more.20than.20once.html#202748468">(Jul 02 2020 at 21:50)</a>:</h4>
<p>fixed next release</p>



<a name="202750165"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/CI%20build%20failing%3A%20html%20generated%20more%20than%20once/near/202750165" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/CI.20build.20failing.3A.20html.20generated.20more.20than.20once.html#202750165">(Jul 02 2020 at 22:12)</a>:</h4>
<p><span class="user-mention" data-user-id="217312">@Joee Garcia</span> we'll wait for the next release and then I can see what is the issue with the history generation - does that work for you?</p>



<a name="202833386"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/CI%20build%20failing%3A%20html%20generated%20more%20than%20once/near/202833386" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joee Garcia <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/CI.20build.20failing.3A.20html.20generated.20more.20than.20once.html#202833386">(Jul 03 2020 at 19:59)</a>:</h4>
<p><span class="user-mention" data-user-id="191832">@Jose Costa Teixeira</span> Sure, no problem. Thank you for looking into it.</p>



<a name="203429201"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/CI%20build%20failing%3A%20html%20generated%20more%20than%20once/near/203429201" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joee Garcia <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/CI.20build.20failing.3A.20html.20generated.20more.20than.20once.html#203429201">(Jul 09 2020 at 19:33)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="191832">@Jose Costa Teixeira</span> I see that our SDC IG has picked up a new version:<br>
FHIR IG Publisher Version 1.1.2 (Git# cfc87d2acaf7). Built 2020-07-07T12:30:26.385Z (54 hours old)<br>
But we're still getting the history generation exception:<br>
<a href="http://build.fhir.org/ig/HL7/sdc/branches/master/failure/build.log">http://build.fhir.org/ig/HL7/sdc/branches/master/failure/build.log</a></p>
<div class="codehilite"><pre><span></span><code>onGenerate:
Exception in thread &quot;main&quot; java.lang.Error: Error generating build: the file /scratch/ig-build-temp-79YCCH/repo/temp/pages/Questionnaire-questionnaire-sdc-profile-example-loinc-history.html is being generated more than once (may differ by case)
    at org.hl7.fhir.igtools.publisher.Publisher.checkMakeFile(Publisher.java:2854)
    at org.hl7.fhir.igtools.publisher.Publisher.genWrapperContained(Publisher.java:7010)
    at org.hl7.fhir.igtools.publisher.Publisher.makeTemplatesContained(Publisher.java:6798)
    at org.hl7.fhir.igtools.publisher.Publisher.generateHtmlOutputs(Publisher.java:6344)
    at org.hl7.fhir.igtools.publisher.Publisher.generate(Publisher.java:4691)
    at org.hl7.fhir.igtools.publisher.Publisher.createIg(Publisher.java:859)
    at org.hl7.fhir.igtools.publisher.Publisher.execute(Publisher.java:708)
    at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:7815)
</code></pre></div>


<p>Is this supposed to be fixed in this new release?</p>
<p>Thanks,<br>
Joee</p>



<a name="203432110"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/CI%20build%20failing%3A%20html%20generated%20more%20than%20once/near/203432110" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/CI.20build.20failing.3A.20html.20generated.20more.20than.20once.html#203432110">(Jul 09 2020 at 19:56)</a>:</h4>
<p><span class="user-mention" data-user-id="217312">@Joee Garcia</span> thanks for the reminder. I'll look at that tomorrow or saturday, is that OK? <br>
(deadline today and tomorrow)</p>



<a name="203435579"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/CI%20build%20failing%3A%20html%20generated%20more%20than%20once/near/203435579" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joee Garcia <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/CI.20build.20failing.3A.20html.20generated.20more.20than.20once.html#203435579">(Jul 09 2020 at 20:25)</a>:</h4>
<p><span class="user-mention" data-user-id="191832">@Jose Costa Teixeira</span> Yes, no problem!</p>



<a name="203439026"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/CI%20build%20failing%3A%20html%20generated%20more%20than%20once/near/203439026" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/CI.20build.20failing.3A.20html.20generated.20more.20than.20once.html#203439026">(Jul 09 2020 at 20:52)</a>:</h4>
<p>this is a problem in the SDC set up</p>



<a name="203448384"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/CI%20build%20failing%3A%20html%20generated%20more%20than%20once/near/203448384" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/CI.20build.20failing.3A.20html.20generated.20more.20than.20once.html#203448384">(Jul 09 2020 at 22:15)</a>:</h4>
<p>Can you expand on what you mean Grahame?</p>



<a name="203451907"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/CI%20build%20failing%3A%20html%20generated%20more%20than%20once/near/203451907" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/CI.20build.20failing.3A.20html.20generated.20more.20than.20once.html#203451907">(Jul 09 2020 at 22:50)</a>:</h4>
<p>something about sdc is producing a -history fragment - it's one of the SDC specific templates</p>



<a name="203451939"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/CI%20build%20failing%3A%20html%20generated%20more%20than%20once/near/203451939" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/CI.20build.20failing.3A.20html.20generated.20more.20than.20once.html#203451939">(Jul 09 2020 at 22:50)</a>:</h4>
<p>but that now clashes with the -history fragment created by the IG publisher</p>



<a name="203452324"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/CI%20build%20failing%3A%20html%20generated%20more%20than%20once/near/203452324" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/CI.20build.20failing.3A.20html.20generated.20more.20than.20once.html#203452324">(Jul 09 2020 at 22:55)</a>:</h4>
<p>SDC is the standard template, not a specific template...</p>



<a name="203453172"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/CI%20build%20failing%3A%20html%20generated%20more%20than%20once/near/203453172" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/CI.20build.20failing.3A.20html.20generated.20more.20than.20once.html#203453172">(Jul 09 2020 at 23:07)</a>:</h4>
<p>Yesterday I tested using the base template - same issue (iirc)</p>



<a name="203453289"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/CI%20build%20failing%3A%20html%20generated%20more%20than%20once/near/203453289" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/CI.20build.20failing.3A.20html.20generated.20more.20than.20once.html#203453289">(Jul 09 2020 at 23:08)</a>:</h4>
<p>Does SDC use spreadsheets?</p>



<a name="203453496"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/CI%20build%20failing%3A%20html%20generated%20more%20than%20once/near/203453496" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/CI.20build.20failing.3A.20html.20generated.20more.20than.20once.html#203453496">(Jul 09 2020 at 23:11)</a>:</h4>
<p>y</p>



<a name="203460331"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/CI%20build%20failing%3A%20html%20generated%20more%20than%20once/near/203460331" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/CI.20build.20failing.3A.20html.20generated.20more.20than.20once.html#203460331">(Jul 10 2020 at 01:16)</a>:</h4>
<p>ok fixed next release. It's an internal error in the publisher</p>



<a name="206306090"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/CI%20build%20failing%3A%20html%20generated%20more%20than%20once/near/206306090" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joee Garcia <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/CI.20build.20failing.3A.20html.20generated.20more.20than.20once.html#206306090">(Aug 07 2020 at 20:34)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> <span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span>  SDC is getting this exception again using the latest IG build (FHIR IG Publisher Version 1.1.10 (Git# 541f499dd6d2).  </p>
<div class="codehilite"><pre><span></span><code>Exception in thread &quot;main&quot; java.lang.Error: Error generating build: the file /scratch/ig-build-temp-PCF25O/repo/temp/pages/_includes/Bundle-questionnaire-sdc-test-fhirpath-prepop-source-query_PrePopQuery-html.xhtml is being generated more than once (may differ by case)
</code></pre></div>


<p>Here's the full log:  <a href="https://build.fhir.org/ig/HL7/sdc/branches/master/failure/build.log">https://build.fhir.org/ig/HL7/sdc/branches/master/failure/build.log</a>. </p>
<p>It builds fine with the previous version, 1.1.9.</p>



<a name="206316952"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/CI%20build%20failing%3A%20html%20generated%20more%20than%20once/near/206316952" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/CI.20build.20failing.3A.20html.20generated.20more.20than.20once.html#206316952">(Aug 07 2020 at 22:36)</a>:</h4>
<p>fixed next release</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
