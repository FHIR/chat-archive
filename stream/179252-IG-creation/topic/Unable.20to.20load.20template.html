---
layout: page
title: "FHIR Chat  · Unable to load template · IG creation"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/index.html">IG creation</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Unable.20to.20load.20template.html">Unable to load template</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="199646119"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Unable%20to%20load%20template/near/199646119" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Unable.20to.20load.20template.html#199646119">(Jun 03 2020 at 16:56)</a>:</h4>
<p>If I were to copy "ig-template-base" contents and dump it into a directory in my IG called "custom-template", and then have my ig.ini file say <code>template = custom-template</code> why would I get the following error?<br>
<code>Error loading template custom-template: Unable to load template from custom-template</code></p>



<a name="199647470"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Unable%20to%20load%20template/near/199647470" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Unable.20to.20load.20template.html#199647470">(Jun 03 2020 at 17:07)</a>:</h4>
<p>It would have to be #custom-template</p>



<a name="199647512"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Unable%20to%20load%20template/near/199647512" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Unable.20to.20load.20template.html#199647512">(Jun 03 2020 at 17:07)</a>:</h4>
<p>If you're planning to do that for playing around, that's fine, but don't plant to publish an HL7 IG doing that...</p>



<a name="199655982"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Unable%20to%20load%20template/near/199655982" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Unable.20to.20load.20template.html#199655982">(Jun 03 2020 at 18:13)</a>:</h4>
<p>nope, don't plan to</p>



<a name="199656556"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Unable%20to%20load%20template/near/199656556" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Unable.20to.20load.20template.html#199656556">(Jun 03 2020 at 18:18)</a>:</h4>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> , I did that... now I get this:<br>
<code>Error loading template #custom-template: com.google.gson.stream.MalformedJsonException: Use JsonReader.setLenient(true) to accept malformed JSON at line 1 column 5 path</code></p>



<a name="199657383"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Unable%20to%20load%20template/near/199657383" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Unable.20to.20load.20template.html#199657383">(Jun 03 2020 at 18:25)</a>:</h4>
<p>Did you make any changes to the template?  Can you provide more of a stack trace?</p>



<a name="199657615"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Unable%20to%20load%20template/near/199657615" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Unable.20to.20load.20template.html#199657615">(Jun 03 2020 at 18:27)</a>:</h4>
<p>sure</p>



<a name="199657624"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Unable%20to%20load%20template/near/199657624" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Unable.20to.20load.20template.html#199657624">(Jun 03 2020 at 18:27)</a>:</h4>
<p>no changes to template</p>



<a name="199657627"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Unable%20to%20load%20template/near/199657627" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Unable.20to.20load.20template.html#199657627">(Jun 03 2020 at 18:27)</a>:</h4>
<p>here is stack trace:</p>



<a name="199657655"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Unable%20to%20load%20template/near/199657655" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Unable.20to.20load.20template.html#199657655">(Jun 03 2020 at 18:27)</a>:</h4>
<div class="codehilite"><pre><span></span><code>Load Template from custom-template                                               (00:01.0425)
Publishing Content Failed: Error loading template custom-template: Unable to load template from custom-template (00:01.0426)
(00:01.0426)
Use -? to get command line help                                                  (00:01.0426)
(00:01.0426)
Stack Dump (for debugging):                                                      (00:01.0426)
org.hl7.fhir.exceptions.FHIRException: Error loading template custom-template: Unable to load template from custom-template
at org.hl7.fhir.igtools.templates.TemplateManager.loadPackage(TemplateManager.java:265)
    at org.hl7.fhir.igtools.templates.TemplateManager.installTemplate(TemplateManager.java:93)
    at org.hl7.fhir.igtools.templates.TemplateManager.loadTemplate(TemplateManager.java:79)
    at org.hl7.fhir.igtools.publisher.Publisher.initializeFromIg(Publisher.java:1479)
    at org.hl7.fhir.igtools.publisher.Publisher.initialize(Publisher.java:1322)
    at org.hl7.fhir.igtools.publisher.Publisher.execute(Publisher.java:690)
    at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:7430)
Caused by: org.hl7.fhir.exceptions.FHIRException: Unable to load template from custom-template
at org.hl7.fhir.igtools.templates.TemplateManager.loadPackage(TemplateManager.java:263)
    ... 6 more
IG Publisher finished with code 1
</code></pre></div>



<a name="199657690"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Unable%20to%20load%20template/near/199657690" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Unable.20to.20load.20template.html#199657690">(Jun 03 2020 at 18:27)</a>:</h4>
<p><code>FHIR IG Publisher Version 1.0.99-SNAPSHOT (Git# 1a0cb452d00e). Built 2020-06-01T17:41:49.314+10:00 (39 hours old)</code></p>



<a name="199659520"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Unable%20to%20load%20template/near/199659520" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Unable.20to.20load.20template.html#199659520">(Jun 03 2020 at 18:42)</a>:</h4>
<p>I just tried doing this locally with sample-ig and it worked fine.  You grabbed the content from the Git project, not from the template package, correct?</p>



<a name="199662355"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Unable%20to%20load%20template/near/199662355" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Unable.20to.20load.20template.html#199662355">(Jun 03 2020 at 19:07)</a>:</h4>
<p>correct</p>



<a name="199662374"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Unable%20to%20load%20template/near/199662374" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Unable.20to.20load.20template.html#199662374">(Jun 03 2020 at 19:07)</a>:</h4>
<p>from <a href="https://github.com/hl7/ig-template-base/archive/master.zip">https://github.com/hl7/ig-template-base/archive/master.zip</a></p>



<a name="199662385"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Unable%20to%20load%20template/near/199662385" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Unable.20to.20load.20template.html#199662385">(Jun 03 2020 at 19:07)</a>:</h4>
<p>extracted the sub-folder into custom-template directory</p>



<a name="199666275"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Unable%20to%20load%20template/near/199666275" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Unable.20to.20load.20template.html#199666275">(Jun 03 2020 at 19:37)</a>:</h4>
<p>that may have to do with the way folders are structured</p>



<a name="199667249"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Unable%20to%20load%20template/near/199667249" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Unable.20to.20load.20template.html#199667249">(Jun 03 2020 at 19:44)</a>:</h4>
<p><span class="user-mention" data-user-id="191505">@Sean McIlvenna</span> what do you have in the custom-templaet directory?</p>



<a name="199668499"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Unable%20to%20load%20template/near/199668499" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Unable.20to.20load.20template.html#199668499">(Jun 03 2020 at 19:53)</a>:</h4>
<p>that is not the correct stack trace. It's the stack trace for template = custom-template, not template=#custom-template</p>



<a name="199669099"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Unable%20to%20load%20template/near/199669099" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Unable.20to.20load.20template.html#199669099">(Jun 03 2020 at 19:58)</a>:</h4>
<p>crap yah</p>



<a name="199669102"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Unable%20to%20load%20template/near/199669102" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Unable.20to.20load.20template.html#199669102">(Jun 03 2020 at 19:58)</a>:</h4>
<p>my bad</p>



<a name="199669107"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Unable%20to%20load%20template/near/199669107" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Unable.20to.20load.20template.html#199669107">(Jun 03 2020 at 19:59)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> here it comes</p>



<a name="199669127"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Unable%20to%20load%20template/near/199669127" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Unable.20to.20load.20template.html#199669127">(Jun 03 2020 at 19:59)</a>:</h4>
<div class="codehilite"><pre><span></span><code>Running latest IG Publisher: -jar E:\Code\trifolia-on-fhir\apps\server\src\assets\ig-publisher\1.0.99-SNAPSHOT.jar -ig C:\Users\sean.mcilvenna\AppData\Local\Temp\tmp-28580nzZfmSXw42bm\ig.ini -tx N/A
FHIR IG Publisher Version 1.0.99-SNAPSHOT (Git# 1a0cb452d00e). Built 2020-06-01T17:41:49.314+10:00 (58 hours old)
Detected Java version: 13.0.2 from C:\Program Files\Java\jdk-13.0.2 on amd64 (64bit). 12228MB available
Parameters: -ig XXX\tmp-28580nzZfmSXw42bm\ig.ini -tx N/A
dir = E:\Code\trifolia-on-fhir\dist\apps\server, path = C:\Program Files (x86)\Microsoft SDKs\Azure\CLI2\wbin;C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0\;C:\Windows\System32\OpenSSH\;C:\Program Files\Microsoft SQL Server\130\Tools\Binn\;C:\Program Files\Microsoft SQL Server\Client SDK\ODBC\170\Tools\Binn\;C:\cmder;c:\apache-maven-3.6.2\bin;C:\Program Files\Java\jdk-13.0.2\bin;C:\Program Files\PuTTY\;C:\Program Files (x86)\Microsoft SQL Server\110\Tools\Binn\;C:\Program Files\Microsoft SQL Server\110\Tools\Binn\;C:\Program Files\Microsoft SQL Server\110\DTS\Binn\;C:\Program Files (x86)\Microsoft SQL Server\110\Tools\Binn\ManagementStudio\;C:\Program Files (x86)\Microsoft SQL Server\110\DTS\Binn\;C:\Program Files\Git\cmd;C:\Program Files\nodejs\;C:\Program Files\dotnet\;C:\WINDOWS\system32;C:\WINDOWS;C:\WINDOWS\System32\Wbem;C:\WINDOWS\System32\WindowsPowerShell\v1.0\;C:\WINDOWS\System32\OpenSSH\;C:\PROGRA~1\IBM\SQLLIB\BIN;C:\PROGRA~1\IBM\SQLLIB\FUNCTION;C:\Program Files (x86)\NVIDIA Corporation\PhysX\Common;C:\Program Files\Docker\Docker\resources\bin;C:\ProgramData\DockerDesktop\version-bin;C:\Ruby25-x64\bin;C:\Ruby26-x64\bin;XXX\AppData\Local\Microsoft\WindowsApps;;C:\Program Files\JetBrains\WebStorm 2019.2.4\bin;;C:\Program Files\JetBrains\IntelliJ IDEA 2019.2.4\bin;;C:\Users\sean.mcilvenna\AppData\Roaming\npm;C:\Program Files\JetBrains\RubyMine 2019.3.3\bin;
Run time = Wednesday, June 3, 2020 at 11:16:34 AM Pacific Daylight Time (2020-06-03T11:16:34-07:00)
Package Cache: XXX\.fhir\packages                            (00:00.0007)
Load Template from #custom-template                                              (00:00.0525)
Publishing Content Failed: Error loading template #custom-template: com.google.gson.stream.MalformedJsonException: Use JsonReader.setLenient(true) to accept malformed JSON at line 1 column 5 path $ (00:00.0541)
(00:00.0541)
Use -? to get command line help                                                  (00:00.0542)
                                                                                 (00:00.0542)
Stack Dump (for debugging):                                                      (00:00.0542)
org.hl7.fhir.exceptions.FHIRException: Error loading template #custom-template: com.google.gson.stream.MalformedJsonException: Use JsonReader.setLenient(true) to accept malformed JSON at line 1 column 5 path $
    at org.hl7.fhir.igtools.templates.TemplateManager.loadPackage(TemplateManager.java:265)
    at org.hl7.fhir.igtools.templates.TemplateManager.installTemplate(TemplateManager.java:93)
    at org.hl7.fhir.igtools.templates.TemplateManager.loadTemplate(TemplateManager.java:79)
    at org.hl7.fhir.igtools.publisher.Publisher.initializeFromIg(Publisher.java:1479)
    at org.hl7.fhir.igtools.publisher.Publisher.initialize(Publisher.java:1322)
    at org.hl7.fhir.igtools.publisher.Publisher.execute(Publisher.java:690)
    at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:7430)
Caused by: com.google.gson.JsonSyntaxException: com.google.gson.stream.MalformedJsonException: Use JsonReader.setLenient(true) to accept malformed JSON at line 1 column 5 path $
at com.google.gson.JsonParser.parse(JsonParser.java:65)
    at com.google.gson.JsonParser.parse(JsonParser.java:45)
    at org.hl7.fhir.utilities.cache.NpmPackage.fromFolder(NpmPackage.java:289)
    at org.hl7.fhir.igtools.templates.TemplateManager.loadPackage(TemplateManager.java:232)
    ... 6 more
Caused by: com.google.gson.stream.MalformedJsonException: Use JsonReader.setLenient(true) to accept malformed JSON at line 1 column 5 path $
    at com.google.gson.stream.JsonReader.syntaxError(JsonReader.java:1568)
    at com.google.gson.stream.JsonReader.checkLenient(JsonReader.java:1409)
    at com.google.gson.stream.JsonReader.doPeek(JsonReader.java:542)
    at com.google.gson.stream.JsonReader.peek(JsonReader.java:425)
    at com.google.gson.JsonParser.parse(JsonParser.java:60)
    ... 9 more
IG Publisher finished with code 1
The HL7 IG Publisher failed. The HL7 IG Publisher tool is not developed as part of Trifolia-on-FHIR; it is developed by HL7. If you are still having issues after having reviewed and addressed ToF errors reported in the log above, go to chat.fhir.org to get more information on how to proceed.
</code></pre></div>



<a name="199669482"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Unable%20to%20load%20template/near/199669482" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Unable.20to.20load.20template.html#199669482">(Jun 03 2020 at 20:01)</a>:</h4>
<p><span class="user-mention" data-user-id="191832">@Jose Costa Teixeira</span> This is what I have in the custom-template folder:</p>
<div class="codehilite"><pre><span></span><code>.gitignore
cache.ini
config/
config.json
content/
includes/
layouts/
package/
package-list.json
README.md
scripts/
</code></pre></div>



<a name="199670380"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Unable%20to%20load%20template/near/199670380" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Unable.20to.20load.20template.html#199670380">(Jun 03 2020 at 20:08)</a>:</h4>
<p>Take a look at package/package.json</p>



<a name="199670395"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Unable%20to%20load%20template/near/199670395" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Unable.20to.20load.20template.html#199670395">(Jun 03 2020 at 20:08)</a>:</h4>
<p>Is it valid json?</p>



<a name="199676738"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Unable%20to%20load%20template/near/199676738" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Unable.20to.20load.20template.html#199676738">(Jun 03 2020 at 21:05)</a>:</h4>
<p>yup</p>



<a name="199676743"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Unable%20to%20load%20template/near/199676743" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Unable.20to.20load.20template.html#199676743">(Jun 03 2020 at 21:05)</a>:</h4>
<div class="codehilite"><pre><span></span><code>{
  &quot;name&quot;: &quot;fhir.base.template&quot;,
  &quot;type&quot;: &quot;fhir.template&quot;,
  &quot;license&quot;: &quot;CC0-1.0&quot;,
  &quot;description&quot;: &quot;FHIR IG Base Template - foundational for use by anyone&quot;,
  &quot;author&quot;: &quot;http://hl7.org/fhir&quot;,
  &quot;canonical&quot;: &quot;http://fhir.org/templates/fhir.base.template&quot;,
  &quot;version&quot;: &quot;0.1.0&quot;
}
</code></pre></div>



<a name="199676886"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Unable%20to%20load%20template/near/199676886" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Unable.20to.20load.20template.html#199676886">(Jun 03 2020 at 21:06)</a>:</h4>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span></p>



<a name="199677786"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Unable%20to%20load%20template/near/199677786" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Unable.20to.20load.20template.html#199677786">(Jun 03 2020 at 21:16)</a>:</h4>
<p>I don't know what you are trying to do here, but something has gone wrong and the java stack is not enough to resolve it. You'll either have to:</p>
<ul>
<li>debug, and identify the actual filename that it's trying to load</li>
<li>instead of trying to nest it, simply clone the git repository and refer to your local copy</li>
</ul>



<a name="234479938"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Unable%20to%20load%20template/near/234479938" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Max Masnick <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Unable.20to.20load.20template.html#234479938">(Apr 14 2021 at 11:06)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> <span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> we are having this issue getting the mCODE IG to build on <span class="user-mention" data-user-id="193599">@Lynn Laakso</span>'s system.</p>
<p>I'm not sure why the stacktrace doesn't identify the path to the file with the JSON error -- it's really hard to debug this without that info. But in any case, I did some investigation:</p>
<ol>
<li>The IG builds without this error on multiple systems: Mac, Windows, and <a href="http://build.fhir.org">build.fhir.org</a></li>
<li>I set up the IG publisher + dependencies on a fresh Windows install, and _was_ able to reproduce the error. Removing the custom template fixed it. Adding it back in caused it again.</li>
<li>I then tried to create a smaller sample IG with the same custom template to try to reproduce the issue. I _could not_ reproduce the error int he sample IG.</li>
<li>I then went back to the mCODE IG to troubleshoot further -- but <strong>I could no longer reproduce the error</strong> <span aria-label="thinking" class="emoji emoji-1f914" role="img" title="thinking">:thinking:</span> Git shows no changes to the code.</li>
<li>I deleted <code>.fhir</code> and re-cloned the mCODE IG into a new folder. I _still_ can't reproduce the error.</li>
</ol>
<p>Here's the stack trace from Lynn's machine. I saw the same exception on mine.</p>
<div class="spoiler-block"><div class="spoiler-header">
<p>Stack trace</p>
</div><div class="spoiler-content" aria-hidden="true">
<p>C:\Users\Administrator&gt;java -jar C:\GitHub\publisher.jar -ig C:\GitHub\hl7.fhir.us.mcode#1.16.0 -resetTx -publish <a href="http://hl7.org/fhir/us/mcode/2021May">http://hl7.org/fhir/us/mcode/2021May</a><br>
FHIR IG Publisher Version 1.1.65 (Git# dc2d569155cd). Built 2021-03-29T10:53:43.506Z (14 days old)<br>
Detected Java version: 1.8.0_281 from C:\Program Files\Java\jre1.8.0_281 on Windows Server 2016/amd64 (64bit). 7204MB available<br>
dir = C:\Users\Administrator, path = C:\Python39\Scripts\;C:\Python39\;C:\Ruby26-x64\bin;C:\Program Files\Java\jre1.8.0_231\bin;C:\Program Files (x86)\Common Files\Oracle\Java\javapath;C:\Python38\Scripts\;C:\Python38\;C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0\;C:\Program Files\Amazon\cfn-bootstrap\;C:\Program Files\Microsoft VS Code\bin;C:\ProgramData\chocolatey\bin;C:\Program Files\Microsoft\Web Platform Installer\;C:\Program Files\Git\cmd;C:\Program Files\nodejs\;C:\Program Files\WireGuard\;C:\Program Files\TortoiseGit\bin;C:\Ruby26-x64\bin;C:\Users\Administrator\AppData\Local\Microsoft\WindowsApps;C:\Users\Administrator\AppData\Local\Atlassian\SourceTree\git_local\bin;C:\Program Files\Java\jre1.8.0_231\bin;C:\Users\Administrator\AppData\Local\GitHubDesktop\bin;C:\Users\Administrator\AppData\Roaming\npm<br>
Parameters: -ig C:\GitHub\hl7.fhir.us.mcode#1.16.0 -resetTx -publish <a href="http://hl7.org/fhir/us/mcode/2021May">http://hl7.org/fhir/us/mcode/2021May</a><br>
Start Clock @ Monday, April 12, 2021 2:53:37 PM UTC (2021-04-12T14:53:37Z)<br>
Build Formal Publication package, intended for <a href="http://hl7.org/fhir/us/mcode/2021May">http://hl7.org/fhir/us/mcode/2021May</a> (00:00.0010)<br>
API keys loaded from C:\Users\Administrator\apikeys.ini                          (00:00.0014)<br>
Package Cache: C:\Users\Administrator\.fhir\packages                             (00:00.0017)<br>
Run Sushi on C:\GitHub\hl7.fhir.us.mcode#1.16.0                                  (00:00.0018)<br>
Sushi: info  Running SUSHI v1.3.1 (implements FHIR Shorthand specification v1.1.0) (00:01.0055)<br>
Sushi: info  Arguments:                                                          (00:01.0056)<br>
Sushi: info    --out C:\GitHub\hl7.fhir.us.mcode#1.16.0                          (00:01.0058)<br>
Sushi: info    C:\GitHub\hl7.fhir.us.mcode#1.16.0                                (00:01.0059)<br>
Sushi: info  Using configuration file: C:\GitHub\hl7.fhir.us.mcode#1.16.0\sushi-config.yaml (00:01.0202)<br>
Sushi: info  Importing FSH text...                                               (00:01.0234)<br>
Sushi: info  Preprocessed 32 documents with 50 aliases.                          (00:02.0441)<br>
Sushi: info  Imported 123 definitions and 107 instances.                         (00:02.0664)<br>
Sushi: info  Checking local cache for hl7.fhir.us.core#3.1.0...                  (00:02.0665)<br>
Sushi: info  Found hl7.fhir.us.core#3.1.0 in local cache.                        (00:02.0727)<br>
Sushi: info  Loaded package hl7.fhir.us.core#3.1.0                               (00:02.0728)<br>
Sushi: info  Checking local cache for hl7.fhir.r4.core#4.0.1...                  (00:02.0729)<br>
Sushi: info  Found hl7.fhir.r4.core#4.0.1 in local cache.                        (00:03.0417)<br>
Sushi: info  Loaded package hl7.fhir.r4.core#4.0.1                               (00:03.0418)<br>
Sushi: info  Converting FSH to FHIR resources...                                 (00:03.0484)<br>
Sushi: info  Converted 43 FHIR StructureDefinitions.                             (00:09.0673)<br>
Sushi: info  Converted 4 FHIR CodeSystems.                                       (00:09.0691)<br>
Sushi: info  Converted 76 FHIR ValueSets.                                        (00:10.0232)<br>
Sushi: info  Converted 107 FHIR instances.                                       (00:17.0151)<br>
Sushi: info  Exporting FHIR resources as JSON...                                 (00:17.0152)<br>
Sushi: info  Exported 230 FHIR resources as JSON.                                (00:17.0558)<br>
Sushi: info  Assembling Implementation Guide sources...                          (00:17.0559)<br>
Sushi: info  Generated ImplementationGuide-hl7.fhir.us.mcode.json                (00:17.0574)<br>
Sushi: info  Assembled Implementation Guide sources; ready for IG Publisher.     (00:17.0575)<br>
Sushi:                                                                           (00:17.0576)<br>
Sushi: ========================= SUSHI RESULTS ===========================       (00:17.0587)<br>
Sushi: |  -------------------------------------------------------------  |       (00:17.0591)<br>
Sushi: | | Profiles | Extensions | ValueSets | CodeSystems | Instances | |       (00:17.0597)<br>
Sushi: | |-------------------------------------------------------------| |       (00:17.0598)<br>
Sushi: | |    30    |     13     |    76     |      4      |    107    | |       (00:17.0602)<br>
Sushi: |  -------------------------------------------------------------  |       (00:17.0604)<br>
Sushi: |                                                                 |       (00:17.0606)<br>
Sushi: ===================================================================       (00:17.0607)<br>
Sushi: | Everything is ship-shape!              0 Errors      0 Warnings |       (00:17.0614)<br>
Sushi: ===================================================================       (00:17.0619)<br>
Load Template from #custom-template                                              (00:18.0720)<br>
Publishing Content Failed: Error loading template #custom-template: com.google.gson.stream.MalformedJsonException: Use JsonReader.setLenient(true) to accept malformed JSON at line 1 column 5 path $ (00:18.0751)<br>
                                                                                 (00:18.0752)<br>
Use -? to get command line help                                                  (00:18.0755)<br>
                                                                                 (00:18.0755)<br>
Stack Dump (for debugging):                                                      (00:18.0756)<br>
org.hl7.fhir.exceptions.FHIRException: Error loading template #custom-template: com.google.gson.stream.MalformedJsonException: Use JsonReader.setLenient(true) to accept malformed JSON at line 1 column 5 path $<br>
        at org.hl7.fhir.igtools.templates.TemplateManager.loadPackage(TemplateManager.java:277)<br>
        at org.hl7.fhir.igtools.templates.TemplateManager.installTemplate(TemplateManager.java:93)<br>
        at org.hl7.fhir.igtools.templates.TemplateManager.loadTemplate(TemplateManager.java:79)<br>
        at org.hl7.fhir.igtools.publisher.Publisher.initializeFromIg(Publisher.java:1646)<br>
        at org.hl7.fhir.igtools.publisher.Publisher.initialize(Publisher.java:1461)<br>
        at org.hl7.fhir.igtools.publisher.Publisher.execute(Publisher.java:729)<br>
        at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:8429)<br>
Caused by: com.google.gson.JsonSyntaxException: com.google.gson.stream.MalformedJsonException: Use JsonReader.setLenient(true) to accept malformed JSON at line 1 column 5 path $<br>
        at com.google.gson.JsonParser.parse(JsonParser.java:65)<br>
        at com.google.gson.JsonParser.parse(JsonParser.java:45)<br>
        at org.hl7.fhir.utilities.npm.NpmPackage.fromFolder(NpmPackage.java:354)<br>
        at org.hl7.fhir.igtools.templates.TemplateManager.loadPackage(TemplateManager.java:241)<br>
        ... 6 more<br>
Caused by: com.google.gson.stream.MalformedJsonException: Use JsonReader.setLenient(true) to accept malformed JSON at line 1 column 5 path $<br>
        at com.google.gson.stream.JsonReader.syntaxError(JsonReader.java:1568)<br>
        at com.google.gson.stream.JsonReader.checkLenient(JsonReader.java:1409)<br>
        at com.google.gson.stream.JsonReader.doPeek(JsonReader.java:542)<br>
        at com.google.gson.stream.JsonReader.peek(JsonReader.java:425)<br>
        at com.google.gson.JsonParser.parse(JsonParser.java:60)<br>
        ... 9 more</p>
</div></div>



<a name="234484456"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Unable%20to%20load%20template/near/234484456" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Unable.20to.20load.20template.html#234484456">(Apr 14 2021 at 11:50)</a>:</h4>
<p><span class="user-mention" data-user-id="322501">@Max Masnick</span> this seems to build OK.</p>



<a name="234484640"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Unable%20to%20load%20template/near/234484640" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Unable.20to.20load.20template.html#234484640">(Apr 14 2021 at 11:51)</a>:</h4>
<p>The template only have one json file - the package.json.</p>



<a name="234492556"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Unable%20to%20load%20template/near/234492556" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lynn Laakso <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Unable.20to.20load.20template.html#234492556">(Apr 14 2021 at 12:51)</a>:</h4>
<p><span class="user-mention" data-user-id="322501">@Max Masnick</span> do you want to try removing the custom template and letting me try again?</p>



<a name="234535104"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Unable%20to%20load%20template/near/234535104" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Max Masnick <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Unable.20to.20load.20template.html#234535104">(Apr 14 2021 at 16:55)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191832">Jose Costa Teixeira</span> <a href="#narrow/stream/179252-IG-creation/topic/Unable.20to.20load.20template/near/234484456">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="322501">Max Masnick</span> this seems to build OK.</p>
</blockquote>
<p>It builds ok on my system, and on <a href="http://build.fhir.org">build.fhir.org</a>. But it does not on Lynn's system, and <strong>did</strong> not on my Windows test system (as described above) -- but it does now.</p>



<a name="234535380"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Unable%20to%20load%20template/near/234535380" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lynn Laakso <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Unable.20to.20load.20template.html#234535380">(Apr 14 2021 at 16:57)</a>:</h4>
<p>ok what did you do to get it to build on windows the second time?</p>



<a name="234535574"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Unable%20to%20load%20template/near/234535574" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Max Masnick <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Unable.20to.20load.20template.html#234535574">(Apr 14 2021 at 16:58)</a>:</h4>
<p><span class="user-mention silent" data-user-id="193599">Lynn Laakso</span> <a href="#narrow/stream/179252-IG-creation/topic/Unable.20to.20load.20template/near/234535380">said</a>:</p>
<blockquote>
<p>ok what did you do to get it to build on windows the second time?</p>
</blockquote>
<p>I'm not sure. The <strong>only</strong> thing I did on the system was trying to build the IG with the custom template removed, and then trying to reproduce in a sample IG with the same test template.</p>



<a name="234535606"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Unable%20to%20load%20template/near/234535606" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Max Masnick <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Unable.20to.20load.20template.html#234535606">(Apr 14 2021 at 16:58)</a>:</h4>
<p>Here's a branch with the custom template removed: <a href="https://github.com/HL7/fhir-mCODE-ig/tree/no-custom-template">https://github.com/HL7/fhir-mCODE-ig/tree/no-custom-template</a></p>



<a name="234535979"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Unable%20to%20load%20template/near/234535979" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Unable.20to.20load.20template.html#234535979">(Apr 14 2021 at 17:00)</a>:</h4>
<p>to remove the custom template yo can just edit the ig.ini and change #custom-template by fhir.base.template</p>



<a name="234536107"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Unable%20to%20load%20template/near/234536107" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Unable.20to.20load.20template.html#234536107">(Apr 14 2021 at 17:01)</a>:</h4>
<p>(I thought this was a transient issue, I did not read that it doesn't work on Lynn's machine)</p>



<a name="234537256"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Unable%20to%20load%20template/near/234537256" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Unable.20to.20load.20template.html#234537256">(Apr 14 2021 at 17:08)</a>:</h4>
<p><span class="user-mention" data-user-id="193599">@Lynn Laakso</span> is this still broken?</p>



<a name="234537292"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Unable%20to%20load%20template/near/234537292" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lynn Laakso <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Unable.20to.20load.20template.html#234537292">(Apr 14 2021 at 17:08)</a>:</h4>
<p>yes; working with Max and Mark now</p>



<a name="234540052"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Unable%20to%20load%20template/near/234540052" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lynn Laakso <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Unable.20to.20load.20template.html#234540052">(Apr 14 2021 at 17:26)</a>:</h4>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> I am still getting the error, and also 70 new ones on my dev environment for Valudation_VAL_Profile_MatchMultiple</p>



<a name="234541510"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Unable%20to%20load%20template/near/234541510" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lynn Laakso <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Unable.20to.20load.20template.html#234541510">(Apr 14 2021 at 17:34)</a>:</h4>
<p>@grahame these errors do not show up on the ci-build</p>



<a name="234541925"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Unable%20to%20load%20template/near/234541925" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Unable.20to.20load.20template.html#234541925">(Apr 14 2021 at 17:37)</a>:</h4>
<p>I found a way to reproduce it :)</p>



<a name="234542204"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Unable%20to%20load%20template/near/234542204" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Unable.20to.20load.20template.html#234542204">(Apr 14 2021 at 17:39)</a>:</h4>
<p>on my machine this breaks when i do a java -jar ..\publisher.jar -ig &lt;ig-path&gt; -resetTx -publish <a href="http://hl7.org/fhir/us/mcode/2021May">http://hl7.org/fhir/us/mcode/2021May</a></p>



<a name="234542263"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Unable%20to%20load%20template/near/234542263" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Unable.20to.20load.20template.html#234542263">(Apr 14 2021 at 17:39)</a>:</h4>
<p>it does NOT break when I run  <code>.\_genonce.bat -resetTx -publish http://hl7.org/fhir/us/mcode/2021May</code></p>



<a name="234542444"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Unable%20to%20load%20template/near/234542444" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Unable.20to.20load.20template.html#234542444">(Apr 14 2021 at 17:40)</a>:</h4>
<p>the _genonce.bat script does nothing but run <code>java -jar &lt;publisher&gt; ig .</code></p>



<a name="234542473"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Unable%20to%20load%20template/near/234542473" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Unable.20to.20load.20template.html#234542473">(Apr 14 2021 at 17:40)</a>:</h4>
<p>which makes it weird &amp; interesting</p>



<a name="234543335"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Unable%20to%20load%20template/near/234543335" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Max Masnick <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Unable.20to.20load.20template.html#234543335">(Apr 14 2021 at 17:45)</a>:</h4>
<p><span class="user-mention" data-user-id="191832">@Jose Costa Teixeira</span> I was able to reproduce with that same command...and then I couldn't reproduce anymore (as described above). So if  you can get into the Java debugger or something to see what file is the source of the JSON parsing issue while it's still reproducing, you might want to :)</p>
<p>Otherwise you'll be in my shoes where I can no longer reproduce, so I can't further debug.</p>



<a name="234545301"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Unable%20to%20load%20template/near/234545301" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Unable.20to.20load.20template.html#234545301">(Apr 14 2021 at 17:56)</a>:</h4>
<p>Murphy was right.</p>



<a name="234545344"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Unable%20to%20load%20template/near/234545344" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Unable.20to.20load.20template.html#234545344">(Apr 14 2021 at 17:56)</a>:</h4>
<p>i can get into the Java debugger, but it does not break on the debugger</p>



<a name="234551956"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Unable%20to%20load%20template/near/234551956" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Unable.20to.20load.20template.html#234551956">(Apr 14 2021 at 18:38)</a>:</h4>
<p>I think i found it</p>



<a name="234552574"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Unable%20to%20load%20template/near/234552574" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Unable.20to.20load.20template.html#234552574">(Apr 14 2021 at 18:43)</a>:</h4>
<p>can I make a PR?</p>



<a name="234554234"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Unable%20to%20load%20template/near/234554234" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Max Masnick <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Unable.20to.20load.20template.html#234554234">(Apr 14 2021 at 18:54)</a>:</h4>
<p><span class="user-mention" data-user-id="191832">@Jose Costa Teixeira</span> Awesome! This issue is a blocker for getting the mCODE IG to ballot (or we have to take out our custom template, which we would prefer not to do) so if it's possible to get this merged into a publisher release to allow <span class="user-mention" data-user-id="193599">@Lynn Laakso</span> to build the IG to publish the ballot version, we would really appreciate it.</p>



<a name="234554344"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Unable%20to%20load%20template/near/234554344" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Unable.20to.20load.20template.html#234554344">(Apr 14 2021 at 18:55)</a>:</h4>
<p>can i do that PR later? or <span class="user-mention" data-user-id="322501">@Max Masnick</span> if you don't mind doing it:<br>
(that was not deliberate suspense. Issue is fixed, I believe)</p>



<a name="234576284"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Unable%20to%20load%20template/near/234576284" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Unable.20to.20load.20template.html#234576284">(Apr 14 2021 at 21:08)</a>:</h4>
<p><span class="user-mention" data-user-id="193599">@Lynn Laakso</span> is this fixed?</p>



<a name="234576416"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Unable%20to%20load%20template/near/234576416" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lynn Laakso <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Unable.20to.20load.20template.html#234576416">(Apr 14 2021 at 21:09)</a>:</h4>
<p>was there an update to the publisher?</p>



<a name="234576450"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Unable%20to%20load%20template/near/234576450" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Unable.20to.20load.20template.html#234576450">(Apr 14 2021 at 21:09)</a>:</h4>
<p>no, the error was in mcode</p>



<a name="234576589"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Unable%20to%20load%20template/near/234576589" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Unable.20to.20load.20template.html#234576589">(Apr 14 2021 at 21:10)</a>:</h4>
<p>if you download it again and try, it should work</p>



<a name="234576594"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Unable%20to%20load%20template/near/234576594" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lynn Laakso <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Unable.20to.20load.20template.html#234576594">(Apr 14 2021 at 21:10)</a>:</h4>
<p><span class="user-mention" data-user-id="322501">@Max Masnick</span> was the repo updated?</p>



<a name="234576618"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Unable%20to%20load%20template/near/234576618" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Unable.20to.20load.20template.html#234576618">(Apr 14 2021 at 21:10)</a>:</h4>
<p>yes</p>



<a name="234576817"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Unable%20to%20load%20template/near/234576817" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Unable.20to.20load.20template.html#234576817">(Apr 14 2021 at 21:11)</a>:</h4>
<p>45 minutes ago there was a commit to master (merging a PR)</p>



<a name="234577237"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Unable%20to%20load%20template/near/234577237" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Max Masnick <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Unable.20to.20load.20template.html#234577237">(Apr 14 2021 at 21:12)</a>:</h4>
<p><span class="user-mention" data-user-id="193599">@Lynn Laakso</span> yes the repo is updated. If you <code>git pull</code> or just delete and re-clone the repo it should finish building</p>



<a name="234579749"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Unable%20to%20load%20template/near/234579749" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lynn Laakso <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Unable.20to.20load.20template.html#234579749">(Apr 14 2021 at 21:29)</a>:</h4>
<p>OK it builds, though it has 77 errors and they are not on the ci-build</p>



<a name="234645229"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Unable%20to%20load%20template/near/234645229" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Max Masnick <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Unable.20to.20load.20template.html#234645229">(Apr 15 2021 at 09:38)</a>:</h4>
<p><span class="user-mention silent" data-user-id="193599">Lynn Laakso</span> <a href="#narrow/stream/179252-IG-creation/topic/Unable.20to.20load.20template/near/234579749">said</a>:</p>
<blockquote>
<p>OK it builds, though it has 77 errors and they are not on the ci-build</p>
</blockquote>
<p>Grahame emailed us about this, but for anyone not on the email thread, this is what is going on:</p>
<p>There's <a href="https://github.com/HL7/fhir-ig-publisher/issues/231">a bug in the IG publisher</a> that <strong>makes builds non-deterministic</strong> -- in other words, if you run <code>java -jar &lt;publisher&gt; ig .</code> twice in a row with exactly the same input, you may get <strong>different</strong> output.</p>
<p>This bug has to do with the state of the <code>txcache/</code> folder: it appears a "throw-away" build is needed to get the <code>txcache/</code> folder into the "correct" state, and then subsequent builds work as expected.</p>
<p>The mCODE IG checks the <code>txcache/</code> folder into git, which means that builds using <code>genonce</code> and <a href="http://build.fhir.org">build.fhir.org</a> already have <code>txcache/</code> in the "correct" state even with a fresh clone of the mCODE GitHub repo.</p>
<p>But <a href="https://confluence.hl7.org/display/FHIR/Process+for+Publishing+a+FHIR+IG#ProcessforPublishingaFHIRIG-LocalBuild">the command Lynn has to run to publish the IG</a> includes the <code>-resetTx</code> option, which deletes <code>txcache/</code> prior to build.</p>
<p>The solution is to:</p>
<ol>
<li>Run the standard build command for publishing, e.g., <code>java -jar publisher.jar -ig hl7.fhir.us.mcode#1.16.0 -resetTx -publish http://hl7.org/fhir/us/mcode/2021May</code></li>
<li>Run the same command again, but without the <code>-resetTx</code> option: <code>java -jar publisher.jar -ig hl7.fhir.us.mcode#1.16.0 -publish http://hl7.org/fhir/us/mcode/2021May</code></li>
</ol>
<p>The first build has 77 QA errors. The second build has 0.</p>
<p>Here's the GitHub issue for this bug: <a href="https://github.com/HL7/fhir-ig-publisher/issues/231">https://github.com/HL7/fhir-ig-publisher/issues/231</a></p>



<a name="234750421"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Unable%20to%20load%20template/near/234750421" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Unable.20to.20load.20template.html#234750421">(Apr 15 2021 at 20:51)</a>:</h4>
<p><span class="user-mention" data-user-id="191832">@Jose Costa Teixeira</span> Do you think we need something added to the publisher to catch the issue you found in the mCode IG to make it easier to diagnose the next time the same problem shows up?  If so, might be good to submit a Git issue against the publisher.</p>



<a name="234751503"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Unable%20to%20load%20template/near/234751503" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Unable.20to.20load.20template.html#234751503">(Apr 15 2021 at 20:58)</a>:</h4>
<p>The issue was a strange unexpected character in the beginning of the JSON (could not even delete it in my IDE). The exception was from the json parser.<br>
We could try to get the extension trapping more explicit about which JSON it was parsing -if that is easy it would solve other JSONs, not only that in the template. If that is easy, it would be worth it.</p>



<a name="234751582"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Unable%20to%20load%20template/near/234751582" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Unable.20to.20load.20template.html#234751582">(Apr 15 2021 at 20:59)</a>:</h4>
<p>but I hope this is a rare issue, so I don't know if it is worth going out of our way.</p>



<a name="234752109"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Unable%20to%20load%20template/near/234752109" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Unable.20to.20load.20template.html#234752109">(Apr 15 2021 at 21:01)</a>:</h4>
<p>In other parts of the publisher, a more verbose output or an indication of which file it is working, would be helpful. I presume that malformed conformance JSONs would be more common than malformed JSONs for custom templates</p>



<a name="234753030"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Unable%20to%20load%20template/near/234753030" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Unable.20to.20load.20template.html#234753030">(Apr 15 2021 at 21:04)</a>:</h4>
<p>that, or perhaps a new feature like a "pre-sanitizing  / pre-check" of all the IG files for basic syntax checking (forgotten commas in JSON, quotes in XML..)</p>



<a name="234753401"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Unable%20to%20load%20template/near/234753401" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Unable.20to.20load.20template.html#234753401">(Apr 15 2021 at 21:05)</a>:</h4>
<p>But this is just spitballing. I didn't think of a way to fix this and I presume this would be very very rare compared to other issues.</p>



<a name="234764582"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Unable%20to%20load%20template/near/234764582" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Max Masnick <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Unable.20to.20load.20template.html#234764582">(Apr 15 2021 at 22:30)</a>:</h4>
<p><span class="user-mention" data-user-id="191832">@Jose Costa Teixeira</span> <span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> if the publisher could identify the path of the file with invalid JSON as part of the stack trace, that would have saved probably 10 person-hours for this bug, and would be helpful for all other JSON parsing issues as well.</p>



<a name="234805177"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Unable%20to%20load%20template/near/234805177" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Unable.20to.20load.20template.html#234805177">(Apr 16 2021 at 07:08)</a>:</h4>
<p>which file was it?</p>



<a name="234808487"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Unable%20to%20load%20template/near/234808487" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Unable.20to.20load.20template.html#234808487">(Apr 16 2021 at 07:35)</a>:</h4>
<p>The local template's package.json</p>



<a name="234808568"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Unable%20to%20load%20template/near/234808568" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Unable.20to.20load.20template.html#234808568">(Apr 16 2021 at 07:36)</a>:</h4>
<p>My  PR shows the change</p>



<a name="234809300"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Unable%20to%20load%20template/near/234809300" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Unable.20to.20load.20template.html#234809300">(Apr 16 2021 at 07:44)</a>:</h4>
<p>which PR?</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
