---
layout: page
title: "FHIR Chat  · Issues using Range as a Pattern · IG creation"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/index.html">IG creation</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Issues.20using.20Range.20as.20a.20Pattern.html">Issues using Range as a Pattern</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="185623991"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Issues%20using%20Range%20as%20a%20Pattern/near/185623991" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kurt Allen <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Issues.20using.20Range.20as.20a.20Pattern.html#185623991">(Jan 14 2020 at 18:25)</a>:</h4>
<p>So I want to use a Range item as a pattern as follows:<br>
    {<br>
        "id": "Observation.component:observedCount.value[x]:observedCount/range",<br>
        "path": "Observation.component.value[x]",<br>
        "sliceName": "observedCount/range",<br>
        ...<br>
        "patternRange": {<br>
          "low": {<br>
            "system": "<a href="http://unitsofmeasure.org" target="_blank" title="http://unitsofmeasure.org">http://unitsofmeasure.org</a>",<br>
            "code": "tot"<br>
          },<br>
          "high": {<br>
            "system": "<a href="http://unitsofmeasure.org" target="_blank" title="http://unitsofmeasure.org">http://unitsofmeasure.org</a>",<br>
            "code": "tot"<br>
          }<br>
        },<br>
        ...<br>
    }</p>
<p>I intentionally do not set values for the high and low range, because I am only intending to constrain the system and code values.</p>
<p>When I run the IG publisher, I get the following (non fatal) errors.</p>
<p>StructureDefinition/AbnormalityCyst: StructureDefinition.snapshot.element[75].pattern.ofType(Range) error   <br>
rng-2: If present, low SHALL have a lower value than high [low.empty() or high.empty() or (low &lt;= high)]<br>
StructureDefinition/AbnormalityCyst: StructureDefinition.snapshot.element[113].pattern.ofType(Range)    <br>
error   rng-2: If present, low SHALL have a lower value than high [low.empty() or high.empty() or (low &lt;= high)]</p>
<p>Obviously the rule is that the low value should be greater than the high value and since neither are set that is not true,<br>
though it is also not false (kinda a quantum mechanics kind of thing :-)).</p>
<p>Should the rule be changed to ignore unset values in patterns?</p>
<p>The same problem occurs with Quantity.</p>



<a name="185624430"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Issues%20using%20Range%20as%20a%20Pattern/near/185624430" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Issues.20using.20Range.20as.20a.20Pattern.html#185624430">(Jan 14 2020 at 18:29)</a>:</h4>
<p>There could be situations where the low or high value are expressed with an extension (e.g. because it's a formula rather than a fixed value), so this would be a problem there too.  I'd be in favor of revising the invariant to say low.value.empty() or high.value.empty() instead, which would address this issue.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
