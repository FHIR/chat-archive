---
layout: page
title: "FHIR Chat  · NPE in IG build validation services · IG creation"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/index.html">IG creation</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/NPE.20in.20IG.20build.20validation.20services.html">NPE in IG build validation services</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="222525574"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/NPE%20in%20IG%20build%20validation%20services/near/222525574" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/NPE.20in.20IG.20build.20validation.20services.html#222525574">(Jan 13 2021 at 02:40)</a>:</h4>
<p>I have added some bundle profiles and examples to my MHD IG.. and now get an NPE</p>
<div class="codehilite"><pre><span></span><code>Stack Dump (for debugging):                                                      (01:02.0184)
java.lang.NullPointerException
    at org.hl7.fhir.igtools.publisher.ValidationServices.fetch(ValidationServices.java:142)
    at org.hl7.fhir.validation.instance.InstanceValidator.checkReference(InstanceValidator.java:2556)
    at org.hl7.fhir.validation.instance.InstanceValidator.checkChildByDefinition(InstanceValidator.java:4428)
    at org.hl7.fhir.validation.instance.InstanceValidator.checkChild(InstanceValidator.java:4293)
    at org.hl7.fhir.validation.instance.InstanceValidator.validateElement(InstanceValidator.java:4245)
    at org.hl7.fhir.validation.instance.InstanceValidator.startInner(InstanceValidator.java:3979)
    at org.hl7.fhir.validation.instance.InstanceValidator.start(InstanceValidator.java:3847)
    at org.hl7.fhir.validation.instance.InstanceValidator.validateResource(InstanceValidator.java:5013)
    at org.hl7.fhir.validation.instance.InstanceValidator.validateContains(InstanceValidator.java:4138)
    at org.hl7.fhir.validation.instance.InstanceValidator.checkChildByDefinition(InstanceValidator.java:4442)
    at org.hl7.fhir.validation.instance.InstanceValidator.checkChild(InstanceValidator.java:4293)
    at org.hl7.fhir.validation.instance.InstanceValidator.validateElement(InstanceValidator.java:4245)
    at org.hl7.fhir.validation.instance.InstanceValidator.checkChildByDefinition(InstanceValidator.java:4459)
    at org.hl7.fhir.validation.instance.InstanceValidator.checkChild(InstanceValidator.java:4293)
    at org.hl7.fhir.validation.instance.InstanceValidator.validateElement(InstanceValidator.java:4245)
    at org.hl7.fhir.validation.instance.InstanceValidator.startInner(InstanceValidator.java:3979)
    at org.hl7.fhir.validation.instance.InstanceValidator.start(InstanceValidator.java:3847)
    at org.hl7.fhir.validation.instance.InstanceValidator.validateResource(InstanceValidator.java:5013)
    at org.hl7.fhir.validation.instance.InstanceValidator.validate(InstanceValidator.java:702)
    at org.hl7.fhir.validation.instance.InstanceValidator.validate(InstanceValidator.java:675)
    at org.hl7.fhir.igtools.publisher.Publisher.validate(Publisher.java:4872)
    at org.hl7.fhir.igtools.publisher.Publisher.validate(Publisher.java:4741)
    at org.hl7.fhir.igtools.publisher.Publisher.createIg(Publisher.java:880)
    at org.hl7.fhir.igtools.publisher.Publisher.execute(Publisher.java:732)
    at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:8414)
</code></pre></div>



<a name="222525577"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/NPE%20in%20IG%20build%20validation%20services/near/222525577" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/NPE.20in.20IG.20build.20validation.20services.html#222525577">(Jan 13 2021 at 02:40)</a>:</h4>
<p>build log <a href="http://build.fhir.org/ig/IHE/ITI.MHD/branches/master/failure/build.log">http://build.fhir.org/ig/IHE/ITI.MHD/branches/master/failure/build.log</a></p>



<a name="222525609"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/NPE%20in%20IG%20build%20validation%20services/near/222525609" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/NPE.20in.20IG.20build.20validation.20services.html#222525609">(Jan 13 2021 at 02:41)</a>:</h4>
<p>github repo <a href="https://github.com/IHE/ITI.MHD">https://github.com/IHE/ITI.MHD</a></p>



<a name="222684604"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/NPE%20in%20IG%20build%20validation%20services/near/222684604" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/NPE.20in.20IG.20build.20validation.20services.html#222684604">(Jan 14 2021 at 06:50)</a>:</h4>
<p>I can't reproduce this</p>



<a name="222714408"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/NPE%20in%20IG%20build%20validation%20services/near/222714408" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/NPE.20in.20IG.20build.20validation.20services.html#222714408">(Jan 14 2021 at 13:12)</a>:</h4>
<p>I think I got over that, but still get late IG build NPEs. Example from current build (see log <a href="https://build.fhir.org/ig/IHE/ITI.MHD/branches/master/build.log">https://build.fhir.org/ig/IHE/ITI.MHD/branches/master/build.log</a>)</p>
<div class="codehilite"><pre><span></span><code>onGenerate:
Exception generating resource /scratch/ig-build-temp-I2BH8Y/repo/fsh-generated/resources/List-ex-b-minimalSubmissionSet::List/ex-b-minimalSubmissionSet: null (01:51.0472)
java.lang.NullPointerException
    at java.base/java.lang.String.replace(String.java:2143)
    at org.hl7.fhir.igtools.publisher.Publisher.genListView(Publisher.java:6907)
    at org.hl7.fhir.igtools.publisher.Publisher.genListViews(Publisher.java:6892)
    at org.hl7.fhir.igtools.publisher.Publisher.generateOutputsList(Publisher.java:6848)
    at org.hl7.fhir.igtools.publisher.Publisher.generateResourceHtml(Publisher.java:6702)
    at org.hl7.fhir.igtools.publisher.Publisher.generateHtmlOutputs(Publisher.java:6653)
    at org.hl7.fhir.igtools.publisher.Publisher.generate(Publisher.java:4906)
    at org.hl7.fhir.igtools.publisher.Publisher.createIg(Publisher.java:888)
    at org.hl7.fhir.igtools.publisher.Publisher.execute(Publisher.java:732)
    at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:8414)
   java.base/java.lang.String.replace(String.java:2143)                          (01:51.0473)
   org.hl7.fhir.igtools.publisher.Publisher.genListView(Publisher.java:6907)     (01:51.0474)
   org.hl7.fhir.igtools.publisher.Publisher.genListViews(Publisher.java:6892)    (01:51.0474)
   org.hl7.fhir.igtools.publisher.Publisher.generateOutputsList(Publisher.java:6848) (01:51.0474)
   org.hl7.fhir.igtools.publisher.Publisher.generateResourceHtml(Publisher.java:6702) (01:51.0474)
   org.hl7.fhir.igtools.publisher.Publisher.generateHtmlOutputs(Publisher.java:6653) (01:51.0474)
   org.hl7.fhir.igtools.publisher.Publisher.generate(Publisher.java:4906)        (01:51.0474)
   org.hl7.fhir.igtools.publisher.Publisher.createIg(Publisher.java:888)         (01:51.0474)
   org.hl7.fhir.igtools.publisher.Publisher.execute(Publisher.java:732)          (01:51.0474)
   org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:8414)            (01:51.0474)
Generating Summary Outputs                                                       (01:59.0687)
</code></pre></div>



<a name="222722372"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/NPE%20in%20IG%20build%20validation%20services/near/222722372" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/NPE.20in.20IG.20build.20validation.20services.html#222722372">(Jan 14 2021 at 14:19)</a>:</h4>
<p>I think Mr Moehrke (<span class="user-mention" data-user-id="237342">@ryan moehrke</span> ) may have determined that this is caused by my profile. When I tried profile in sushi a bundle with slices by #profile, it entered the wrong thing where I specified a core resource (Bundle and Patient)...</p>



<a name="222725066"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/NPE%20in%20IG%20build%20validation%20services/near/222725066" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Pyke <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/NPE.20in.20IG.20build.20validation.20services.html#222725066">(Jan 14 2021 at 14:37)</a>:</h4>
<p>It's a good thing the Moehrke team was working together on this.</p>



<a name="222736017"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/NPE%20in%20IG%20build%20validation%20services/near/222736017" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/NPE.20in.20IG.20build.20validation.20services.html#222736017">(Jan 14 2021 at 15:49)</a>:</h4>
<p>so my thoughts on solution are not working... My thought is that I will have one profile restrict the "type" of resources, and a second layer profile that restricts the "profile"... That fails in the IG builder due to conflicting constraints????</p>
<div class="codehilite"><pre><span></span><code>Caused by: org.hl7.fhir.exceptions.DefinitionException: Slicing rules on differential (profile:resource (/open) &quot;Slicing based on the profile conformance of the entry&quot;) do not match those on base (type:resource (/open) &quot;Slicing based on the resource type of the entry&quot;) - disciminator @ Bundle.entry (http://ihe.net/fhir/ihe.mhd.fhir/StructureDefinition/IHE.MHD.Dummy.ProvideBundle)
</code></pre></div>



<a name="222736142"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/NPE%20in%20IG%20build%20validation%20services/near/222736142" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/NPE.20in.20IG.20build.20validation.20services.html#222736142">(Jan 14 2021 at 15:50)</a>:</h4>
<p>so, I need to either be able to profile by #profile including FHIR core resources.... or be able to cascade profiles...</p>



<a name="222736836"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/NPE%20in%20IG%20build%20validation%20services/near/222736836" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/NPE.20in.20IG.20build.20validation.20services.html#222736836">(Jan 14 2021 at 15:54)</a>:</h4>
<p><a href="https://github.com/IHE/ITI.MHD">https://github.com/IHE/ITI.MHD</a></p>
<p>specifically this FSH file<br>
<a href="https://github.com/IHE/ITI.MHD/blob/master/input/fsh/provideBundle.fsh">https://github.com/IHE/ITI.MHD/blob/master/input/fsh/provideBundle.fsh</a></p>
<p>which sushi does create this structureDefinition that the build is failing on<br>
<a href="http://build.fhir.org/ig/IHE/ITI.MHD/branches/master/failure/fsh-generated/resources/StructureDefinition-IHE.MHD.Comprehensive.ProvideBundle.json">http://build.fhir.org/ig/IHE/ITI.MHD/branches/master/failure/fsh-generated/resources/StructureDefinition-IHE.MHD.Comprehensive.ProvideBundle.json</a></p>



<a name="222743854"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/NPE%20in%20IG%20build%20validation%20services/near/222743854" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/NPE.20in.20IG.20build.20validation.20services.html#222743854">(Jan 14 2021 at 16:38)</a>:</h4>
<p>It appears Moehrke-Research has come thru with a workaround... in my profile slice using #profile. I just explicitly point at the FHIR structureDefinition for the resources I mean...</p>
<div class="codehilite"><pre><span></span><code>* entry[Documents].resource only http://hl7.org/fhir/StructureDefinition/Binary
</code></pre></div>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
