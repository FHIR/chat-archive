---
layout: page
title: "FHIR Chat  · FHIR Workflow - Message, Transaction or contained · IG creation"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/index.html">IG creation</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/FHIR.20Workflow.20-.20Message.2C.20Transaction.20or.20contained.html">FHIR Workflow - Message, Transaction or contained</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="250580370"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/FHIR%20Workflow%20-%20Message%2C%20Transaction%20or%20contained/near/250580370" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Mayfield <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/FHIR.20Workflow.20-.20Message.2C.20Transaction.20or.20contained.html#250580370">(Aug 25 2021 at 05:00)</a>:</h4>
<p>We are being asked to define a series of FHIR Workflows. This is relatively greenfield area as we haven't defined any national UK standards in any previous versions of HL7 (not exactly true but close)</p>
<p>The  rough payload pattern we are seeing is</p>
<p>1..1 focus Resource (for both request and event)<br>
1..* PractitionerRole<br>
1..1 Patient </p>
<p>Each of these payloads will have a create, update and maybe delete. It's roughly CRUD focused around a single resource.</p>
<p>So our options are </p>
<ul>
<li>transaction - we're probably not POSTing direct to a server, it's up to the recipient to decide wether the PractitionerRole or Patient is a POST or PUT. Don't think this is the answer</li>
<li>use contained - not FHIR conformant and I think it makes handling the payload more difficult.</li>
<li>FHIR Message - this fits but getting  lot of push back from technical staff who want a more RESTful approach.</li>
</ul>



<a name="250580532"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/FHIR%20Workflow%20-%20Message%2C%20Transaction%20or%20contained/near/250580532" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Mayfield <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/FHIR.20Workflow.20-.20Message.2C.20Transaction.20or.20contained.html#250580532">(Aug 25 2021 at 05:04)</a>:</h4>
<p>We've gone down a FHIR Message route but wondering if I can make this more restful. e.g. </p>
<p>Move the POST /$process-message to POST {resource}/$process-message<br>
(with a slim MessageHeader)</p>



<a name="250580778"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/FHIR%20Workflow%20-%20Message%2C%20Transaction%20or%20contained/near/250580778" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Mayfield <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/FHIR.20Workflow.20-.20Message.2C.20Transaction.20or.20contained.html#250580778">(Aug 25 2021 at 05:10)</a>:</h4>
<p>So our current prescription-order message is now sent to </p>
<p>POST /MedicationRequest/$process-message</p>
<p>Wondering also if we should add in CRUD as a parameter. To get something like</p>
<p>POST /MedicationRequest/$process-message?method=create</p>



<a name="250582385"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/FHIR%20Workflow%20-%20Message%2C%20Transaction%20or%20contained/near/250582385" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Mayfield <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/FHIR.20Workflow.20-.20Message.2C.20Transaction.20or.20contained.html#250582385">(Aug 25 2021 at 05:50)</a>:</h4>
<p>Looking at <a href="https://build.fhir.org/ig/HL7/davinci-ehrx/exchanging.html">https://build.fhir.org/ig/HL7/davinci-ehrx/exchanging.html</a></p>
<p>We could swap to <strong>batch</strong> but we have a definition of the Bundled resources (MessageDefinition). Think we are in a half way house between message and batch?</p>



<a name="250623915"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/FHIR%20Workflow%20-%20Message%2C%20Transaction%20or%20contained/near/250623915" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/FHIR.20Workflow.20-.20Message.2C.20Transaction.20or.20contained.html#250623915">(Aug 25 2021 at 13:59)</a>:</h4>
<p>Can you explain how what you're trying to do is distinct from a simple RESTful <a href="https://build.fhir.org/http.html#upsert">upsert</a>?</p>



<a name="250732419"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/FHIR%20Workflow%20-%20Message%2C%20Transaction%20or%20contained/near/250732419" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Mayfield <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/FHIR.20Workflow.20-.20Message.2C.20Transaction.20or.20contained.html#250732419">(Aug 26 2021 at 07:10)</a>:</h4>
<p>Sending several resources at once? The answer is FHIR Message but having a lot of push back against this.</p>



<a name="250755540"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/FHIR%20Workflow%20-%20Message%2C%20Transaction%20or%20contained/near/250755540" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/FHIR.20Workflow.20-.20Message.2C.20Transaction.20or.20contained.html#250755540">(Aug 26 2021 at 11:11)</a>:</h4>
<p>The use of Batch would likely make your RESTful zelots happy. You could profile the Batch so that the contents of the Bundle are well formed. Thus it is just a Bundle full of RESTful interactions. (IHE has a few of these).  Now include in that profile of the Batch that the first resource just happens to be a MessageHeader that explains from who the content is from, to who the content should go, and why... and you have everyone happy.</p>



<a name="250785271"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/FHIR%20Workflow%20-%20Message%2C%20Transaction%20or%20contained/near/250785271" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/FHIR.20Workflow.20-.20Message.2C.20Transaction.20or.20contained.html#250785271">(Aug 26 2021 at 14:54)</a>:</h4>
<p>If you're trying to create or update multiple resources, you can use FHIR transaction</p>



<a name="250785312"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/FHIR%20Workflow%20-%20Message%2C%20Transaction%20or%20contained/near/250785312" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/FHIR.20Workflow.20-.20Message.2C.20Transaction.20or.20contained.html#250785312">(Aug 26 2021 at 14:54)</a>:</h4>
<p>(or batch if they're independent)</p>



<a name="250786707"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/FHIR%20Workflow%20-%20Message%2C%20Transaction%20or%20contained/near/250786707" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Mayfield <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/FHIR.20Workflow.20-.20Message.2C.20Transaction.20or.20contained.html#250786707">(Aug 26 2021 at 15:02)</a>:</h4>
<p>I think this has to be message though, every collection has is for a defined event. <br>
Maybe what I need to do is keep MessageHeader content as small as possible.</p>



<a name="250787237"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/FHIR%20Workflow%20-%20Message%2C%20Transaction%20or%20contained/near/250787237" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/FHIR.20Workflow.20-.20Message.2C.20Transaction.20or.20contained.html#250787237">(Aug 26 2021 at 15:05)</a>:</h4>
<p>I don't understand what you mean by "for a defined event".  If you're saying "please create X" or "please update X", that's the event and no need for messaging.  If you're saying "Event X happened, here's some stuff, do what you feel is appropriate", then either messaging or a custom operation is necessary.</p>



<a name="250787398"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/FHIR%20Workflow%20-%20Message%2C%20Transaction%20or%20contained/near/250787398" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Mayfield <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/FHIR.20Workflow.20-.20Message.2C.20Transaction.20or.20contained.html#250787398">(Aug 26 2021 at 15:06)</a>:</h4>
<p>FHIR workflow like referrals, prescription orders, send documents, etc.</p>



<a name="250787426"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/FHIR%20Workflow%20-%20Message%2C%20Transaction%20or%20contained/near/250787426" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Mayfield <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/FHIR.20Workflow.20-.20Message.2C.20Transaction.20or.20contained.html#250787426">(Aug 26 2021 at 15:07)</a>:</h4>
<p>So it's mostly please do X</p>



<a name="250787533"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/FHIR%20Workflow%20-%20Message%2C%20Transaction%20or%20contained/near/250787533" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/FHIR.20Workflow.20-.20Message.2C.20Transaction.20or.20contained.html#250787533">(Aug 26 2021 at 15:07)</a>:</h4>
<p>You can manage that in a pure REST way using Task, but its dependent on being able to query information referenced by the Task.</p>



<a name="250787819"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/FHIR%20Workflow%20-%20Message%2C%20Transaction%20or%20contained/near/250787819" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Mayfield <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/FHIR.20Workflow.20-.20Message.2C.20Transaction.20or.20contained.html#250787819">(Aug 26 2021 at 15:09)</a>:</h4>
<p>Yes we do use Task but the input pattern to workflow manager and then onto recipient is </p>
<p>ServiceRequest/MedicationRequest<br>
Patient<br>
PractitionerRole</p>



<a name="250801053"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/FHIR%20Workflow%20-%20Message%2C%20Transaction%20or%20contained/near/250801053" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/FHIR.20Workflow.20-.20Message.2C.20Transaction.20or.20contained.html#250801053">(Aug 26 2021 at 16:33)</a>:</h4>
<p>With pure REST, those would just be references and the workflow manager (and anyone else) would query for them if/when they needed them.</p>



<a name="250804841"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/FHIR%20Workflow%20-%20Message%2C%20Transaction%20or%20contained/near/250804841" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Mayfield <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/FHIR.20Workflow.20-.20Message.2C.20Transaction.20or.20contained.html#250804841">(Aug 26 2021 at 16:57)</a>:</h4>
<p>That does work and opens up several options. Thanks.</p>
<p>Plenty to think about.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
