---
layout: page
title: "FHIR Chat  · TOC Levels too restrictive · IG creation"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/index.html">IG creation</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/TOC.20Levels.20too.20restrictive.html">TOC Levels too restrictive</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="203532488"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/TOC%20Levels%20too%20restrictive/near/203532488" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/TOC.20Levels.20too.20restrictive.html#203532488">(Jul 10 2020 at 17:02)</a>:</h4>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span>  your decision to throttle the page toc levels to 1..3 is causing me headaches.</p>
<p>Since every markdown page header can only start with h3 level or the section numbering repeat the page title.  That only give a single level page TOC which is  too inflexible IMO.</p>
<p>For example this page:  <a href="http://build.fhir.org/ig/HL7/davinci-deqm/branches/master/datax.html">http://build.fhir.org/ig/HL7/davinci-deqm/branches/master/datax.html</a>  (building as I write this)<br>
I need the h4 levels displayed in the toc header as these are key sections.</p>
<p>I propose we follow the <a href="https://kramdown.gettalong.org/converter/html.html">Kramdown guidance here</a> and make page toc levels to 1..4  and if you want to hide a header use the .no_toc class</p>
<p>e.g.</p>
<div class="codehilite"><pre><span></span><code>#### FOO
{:.no_toc}
</code></pre></div>



<a name="203532890"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/TOC%20Levels%20too%20restrictive/near/203532890" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/TOC.20Levels.20too.20restrictive.html#203532890">(Jul 10 2020 at 17:06)</a>:</h4>
<p>P.S. There is no way in Jekyll to override this default as far as I can find.</p>



<a name="203533485"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/TOC%20Levels%20too%20restrictive/near/203533485" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/TOC.20Levels.20too.20restrictive.html#203533485">(Jul 10 2020 at 17:11)</a>:</h4>
<p>I don't want authors to have to do anything to influence the TOC - if it's going to be variable, it should be determined by a script, not by the author.  Author control adds to complexity and makes it too easy to get it wrong.</p>



<a name="203534553"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/TOC%20Levels%20too%20restrictive/near/203534553" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/TOC.20Levels.20too.20restrictive.html#203534553">(Jul 10 2020 at 17:21)</a>:</h4>
<p>I will continue to disagree ...but anyway...  in addition, those annoying empty TOC boxes still persist.   We could get rid of them with page level controls by adding more elements the to IG resources and defining them there  ( but I question if this is easier)</p>
<div class="codehilite"><pre><span></span><code><span class="nn">...</span>
<span class="nt">page</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="nt">generation</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">markdown</span>
    <span class="nt">nameUrl</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">index.html</span>
    <span class="nt">extension</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="nt">url</span><span class="p">:</span> <span class="s">&#39;http://hl7.org/fhir/us/davinci-deqm/StructureDefinition/extension-show_toc&#39;</span>
        <span class="nt">valueBoolean</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">False</span> <span class="c1">#default = True</span>
<span class="l l-Scalar l-Scalar-Plain">....</span>
</code></pre></div>



<a name="203535113"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/TOC%20Levels%20too%20restrictive/near/203535113" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/TOC.20Levels.20too.20restrictive.html#203535113">(Jul 10 2020 at 17:26)</a>:</h4>
<p>and a  site parameter...</p>
<div class="codehilite"><pre><span></span><code><span class="nn">...</span>
  <span class="nt">parameter</span><span class="p">:</span>
    <span class="p p-Indicator">-</span> <span class="nt">code</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">max-toc-level</span>
      <span class="nt">value</span><span class="p">:</span> <span class="s">&quot;4&quot;</span> <span class="c1">#default = 3</span>
<span class="nn">...</span>
</code></pre></div>



<a name="203535635"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/TOC%20Levels%20too%20restrictive/near/203535635" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/TOC.20Levels.20too.20restrictive.html#203535635">(Jul 10 2020 at 17:31)</a>:</h4>
<p>My take on this: Give Vanilla to everyone - no user should need to change the ToC from the defaults. If some institution wants to change the levels, they can mess with the template, enjoy the risks and handle the benefits.<br>
But also allow some gourmet users to make advanced flavour - those users should be able to override sections of the ToC - to the extent that the template allows - institutions (e.g. IHE) may want to lock down the depth of their IGs.</p>



<a name="203535860"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/TOC%20Levels%20too%20restrictive/near/203535860" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/TOC.20Levels.20too.20restrictive.html#203535860">(Jul 10 2020 at 17:33)</a>:</h4>
<p>I think the extension is heavy, but TBH it's because it is an extension. I had a similar / crazier idea, which would require changes to the ImplementationGuide resource.</p>



<a name="203535908"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/TOC%20Levels%20too%20restrictive/near/203535908" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/TOC.20Levels.20too.20restrictive.html#203535908">(Jul 10 2020 at 17:33)</a>:</h4>
<p>I question the original decision on the default since it only allow a single level.</p>



<a name="203536113"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/TOC%20Levels%20too%20restrictive/near/203536113" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/TOC.20Levels.20too.20restrictive.html#203536113">(Jul 10 2020 at 17:35)</a>:</h4>
<p><span class="user-mention" data-user-id="191401">@Eric Haas</span> I think you missed 2 spaces before the word <code>extension</code> in your yaml..?</p>



<a name="203536652"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/TOC%20Levels%20too%20restrictive/near/203536652" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/TOC.20Levels.20too.20restrictive.html#203536652">(Jul 10 2020 at 17:40)</a>:</h4>
<p>Changing this XML will not be a simple fix and will have impact on other parts. <br>
I feel the pain though -  not sure an extension will avoid further pain.</p>



<a name="203536831"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/TOC%20Levels%20too%20restrictive/near/203536831" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/TOC.20Levels.20too.20restrictive.html#203536831">(Jul 10 2020 at 17:42)</a>:</h4>
<p>Yes that is  copy and paste error fixed....</p>



<a name="203537060"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/TOC%20Levels%20too%20restrictive/near/203537060" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/TOC.20Levels.20too.20restrictive.html#203537060">(Jul 10 2020 at 17:44)</a>:</h4>
<p>Well existing guides feel the pain having to reformat to conform.. Authors are not off the hook in either case.</p>



<a name="203538711"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/TOC%20Levels%20too%20restrictive/near/203538711" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/TOC.20Levels.20too.20restrictive.html#203538711">(Jul 10 2020 at 17:59)</a>:</h4>
<p>I'm not a fan of users in HL7 IGs doing any overriding.  I would like to keep the learning curve the same for all IGs and behavior consistent regardless of who the author happened to be.  I don't think we can technically prohibit overriding in most cases, but we should strongly discourage it.  I'm perfectly happy with us to tune the appearance of the ToC - removing empty ToCs on those pages that legitimately are so short they don't need sub-sections (though those should be pretty rare).  I'm also ok with making the generation of the ToC 'smarter' such that if going deeper will make a more useful ToC in certain cases, then we make it go deeper.  I just <em>don't</em> want that to be an author-governed behavior.  I already suppress ToC on HTML-authored pages when it's empty - because I can easily parse the HTML.  I wasn't super clear on how to write Javascript to parse the markdown to accomplish the same think for markdown authored pages, so I didn't.  But in principle, that could be done.  And if we can come up with a set of criteria that would allow us to decide on when it's appropriate/reasonable to have a deeper ToC, we can certainly plug that logic into the generation process too.</p>



<a name="203539084"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/TOC%20Levels%20too%20restrictive/near/203539084" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/TOC.20Levels.20too.20restrictive.html#203539084">(Jul 10 2020 at 18:02)</a>:</h4>
<blockquote>
<p>I already suppress ToC on HTML-authored pages when it's empty - because I can easily parse the HTML.</p>
</blockquote>



<a name="203539582"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/TOC%20Levels%20too%20restrictive/near/203539582" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/TOC.20Levels.20too.20restrictive.html#203539582">(Jul 10 2020 at 18:06)</a>:</h4>
<p>OK  I'll make a PR...</p>



<a name="203560490"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/TOC%20Levels%20too%20restrictive/near/203560490" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/TOC.20Levels.20too.20restrictive.html#203560490">(Jul 10 2020 at 21:38)</a>:</h4>
<p>I have liquid solution</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
