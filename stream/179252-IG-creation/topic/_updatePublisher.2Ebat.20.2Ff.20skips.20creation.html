---
layout: page
title: "FHIR Chat  · _updatePublisher.bat /f skips creation · IG creation"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/index.html">IG creation</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/_updatePublisher.2Ebat.20.2Ff.20skips.20creation.html">_updatePublisher.bat /f skips creation</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="217290596"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/_updatePublisher.bat%20/f%20skips%20creation/near/217290596" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryant Austin <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/_updatePublisher.2Ebat.20.2Ff.20skips.20creation.html#217290596">(Nov 19 2020 at 16:05)</a>:</h4>
<p>When I run _updatePublisher.bat /f, it does not create, overwrite, or update scripts. If I run without the flag, it runs fine. If I change the script from {SET create="Y"} to {SET create=Y} (and the same for the other two skipPrompts options) it runs fine as well. Has anyone else run into this?</p>



<a name="217293625"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/_updatePublisher.bat%20/f%20skips%20creation/near/217293625" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/_updatePublisher.2Ebat.20.2Ff.20skips.20creation.html#217293625">(Nov 19 2020 at 16:24)</a>:</h4>
<p><span class="user-mention" data-user-id="191832">@Jose Costa Teixeira</span></p>



<a name="217295203"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/_updatePublisher.bat%20/f%20skips%20creation/near/217295203" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/_updatePublisher.2Ebat.20.2Ff.20skips.20creation.html#217295203">(Nov 19 2020 at 16:33)</a>:</h4>
<p>On it</p>



<a name="217301243"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/_updatePublisher.bat%20/f%20skips%20creation/near/217301243" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/_updatePublisher.2Ebat.20.2Ff.20skips.20creation.html#217301243">(Nov 19 2020 at 17:15)</a>:</h4>
<p><span class="user-mention" data-user-id="319386">@Bryant Austin</span> want to test an updated version?</p>



<a name="217301339"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/_updatePublisher.bat%20/f%20skips%20creation/near/217301339" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryant Austin <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/_updatePublisher.2Ebat.20.2Ff.20skips.20creation.html#217301339">(Nov 19 2020 at 17:16)</a>:</h4>
<p>I would be happy to.</p>



<a name="217302361"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/_updatePublisher.bat%20/f%20skips%20creation/near/217302361" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/_updatePublisher.2Ebat.20.2Ff.20skips.20creation.html#217302361">(Nov 19 2020 at 17:23)</a>:</h4>
<div class="codehilite"><pre><span></span><code>@ECHO OFF

SETLOCAL

SET dlurl=https://github.com/HL7/fhir-ig-publisher/releases/latest/download/publisher.jar
SET publisher_jar=publisher.jar
SET input_cache_path=%CD%\input-cache\
SET skipPrompts=false

set update_bat_url=https://raw.githubusercontent.com/FHIR/sample-ig/master/_updatePublisher.bat
set gen_bat_url=https://raw.githubusercontent.com/FHIR/sample-ig/master/_genonce.bat
set gencont_bat_url=https://raw.githubusercontent.com/FHIR/sample-ig/master/_gencontinuous.bat
set gencont_sh_url=https://raw.githubusercontent.com/FHIR/sample-ig/master/_gencontinuous.sh
set gen_sh_url=https://raw.githubusercontent.com/FHIR/sample-ig/master/_genonce.sh
set update_sh_url=https://raw.githubusercontent.com/FHIR/sample-ig/master/_updatePublisher.sh

IF &quot;%~1&quot;==&quot;/f&quot; SET skipPrompts=y


ECHO.
ECHO Checking internet connection...
PING tx.fhir.org -4 -n 1 -w 1000 | FINDSTR TTL &amp;&amp; GOTO isonline
ECHO We&#39;re offline, nothing to do...
GOTO end

:isonline
ECHO We&#39;re online


:processflags
SET ARG=%1
IF DEFINED ARG (
    IF &quot;%ARG%&quot;==&quot;-f&quot; SET FORCE=true
    IF &quot;%ARG%&quot;==&quot;--force&quot; SET FORCE=true
    SHIFT
    GOTO processflags
)

FOR %%x IN (&quot;%CD%&quot;) DO SET upper_path=%%~dpx

ECHO.
IF NOT EXIST &quot;%input_cache_path%%publisher_jar%&quot; (
    IF NOT EXIST &quot;%upper_path%%publisher_jar%&quot; (
        SET jarlocation=&quot;%input_cache_path%%publisher_jar%&quot;
        SET jarlocationname=Input Cache
        ECHO IG Publisher is not yet in input-cache or parent folder.
        REM we don&#39;t use jarlocation below because it will be empty because we&#39;re in a bracketed if statement
        GOTO create
    ) ELSE (
        ECHO IG Publisher FOUND in parent folder
        SET jarlocation=&quot;%upper_path%%publisher_jar%&quot;
        SET jarlocationname=Parent folder
        GOTO upgrade
    )
) ELSE (
    ECHO IG Publisher FOUND in input-cache
    SET jarlocation=&quot;%input_cache_path%%publisher_jar%&quot;
    SET jarlocationname=Input Cache
    GOTO upgrade
)

:create
IF DEFINED FORCE (
    MKDIR &quot;%input_cache_path%&quot; 2&gt; NUL
    GOTO download
)

IF &quot;%skipPrompts%&quot;==&quot;y&quot; (
    SET create=&quot;Y&quot;
) ELSE (
    SET /p create=&quot;Ok? (Y/N) &quot;
)
IF /I &quot;%create%&quot;==&quot;Y&quot; (
    ECHO Will place publisher jar here: %input_cache_path%%publisher_jar%
    MKDIR &quot;%input_cache_path%&quot; 2&gt; NUL
    GOTO download
)
GOTO done

:upgrade
IF &quot;%skipPrompts%&quot;==&quot;y&quot; (
    SET overwrite=Y
) ELSE (
    SET /p overwrite=&quot;Overwrite %jarlocation%? (Y/N) &quot;
)

IF /I &quot;%overwrite%&quot;==&quot;Y&quot; (
    GOTO download
)
GOTO done

:download
ECHO Downloading most recent publisher to %jarlocationname% - it&#39;s ~100 MB, so this may take a bit

FOR /f &quot;tokens=4-5 delims=. &quot; %%i IN (&#39;ver&#39;) DO SET VERSION=%%i.%%j
IF &quot;%version%&quot; == &quot;10.0&quot; GOTO win10
IF &quot;%version%&quot; == &quot;6.3&quot; GOTO win8.1
IF &quot;%version%&quot; == &quot;6.2&quot; GOTO win8
IF &quot;%version%&quot; == &quot;6.1&quot; GOTO win7
IF &quot;%version%&quot; == &quot;6.0&quot; GOTO vista

ECHO Unrecognized version: %version%
GOTO done

:win10
CALL POWERSHELL -command if (&#39;System.Net.WebClient&#39; -as [type]) {(new-object System.Net.WebClient).DownloadFile(\&quot;%dlurl%\&quot;,\&quot;%jarlocation%\&quot;) } else { Invoke-WebRequest -Uri &quot;%dlurl%&quot; -Outfile &quot;%jarlocation%&quot; }

GOTO done

:win7
rem this may be triggering the antivirus - bitsadmin.exe is a known threat
rem CALL bitsadmin /transfer GetPublisher /download /priority normal &quot;%dlurl%&quot; &quot;%jarlocation%&quot;

rem this didn&#39;t work in win 10
rem CALL Start-BitsTransfer /priority normal &quot;%dlurl%&quot; &quot;%jarlocation%&quot;

rem this should work - untested
call (New-Object Net.WebClient).DownloadFile(&#39;%dlurl%&#39;, &#39;%jarlocation%&#39;)
GOTO done

:win8.1
:win8
:vista
GOTO done



:done




ECHO.
ECHO Updating scripts
IF &quot;%skipPrompts%&quot;==&quot;y&quot; (
    SET updateScripts=Y
) ELSE (
    SET /p updateScripts=&quot;Update scripts? (Y/N) &quot;
)
IF /I &quot;%updateScripts%&quot;==&quot;Y&quot; (
    GOTO scripts
)
GOTO end


:scripts

REM Download all batch files (and this one with a new name)

SETLOCAL DisableDelayedExpansion



:dl_script_1
ECHO Updating _updatePublisher.sh
call POWERSHELL -command if (&#39;System.Net.WebClient&#39; -as [type]) {(new-object System.Net.WebClient).DownloadFile(\&quot;%update_sh_url%\&quot;,\&quot;_updatePublisher.new.sh\&quot;) } else { Invoke-WebRequest -Uri &quot;%update_sh_url%&quot; -Outfile &quot;_updatePublisher.new.sh&quot; }
if %ERRORLEVEL% == 0 goto upd_script_1
echo &quot;Errors encountered during download: %errorlevel%&quot;
goto dl_script_2
:upd_script_1
start copy /y &quot;_updatePublisher.new.sh&quot; &quot;_updatePublisher.sh&quot; ^&amp;^&amp; del &quot;_updatePublisher.new.sh&quot; ^&amp;^&amp; exit


:dl_script_2
ECHO Updating _genonce.bat
call POWERSHELL -command if (&#39;System.Net.WebClient&#39; -as [type]) {(new-object System.Net.WebClient).DownloadFile(\&quot;%gen_bat_url%\&quot;,\&quot;_genonce.new.bat\&quot;) } else { Invoke-WebRequest -Uri &quot;%gen_bat_url%&quot; -Outfile &quot;_genonce.bat&quot; }
if %ERRORLEVEL% == 0 goto upd_script_2
echo &quot;Errors encountered during download: %errorlevel%&quot;
goto dl_script_3
:upd_script_2
start copy /y &quot;_genonce.new.bat&quot; &quot;_genonce.bat&quot; ^&amp;^&amp; del &quot;_genonce.new.bat&quot; ^&amp;^&amp; exit

:dl_script_3
ECHO Updating _gencontinuous.bat
call POWERSHELL -command if (&#39;System.Net.WebClient&#39; -as [type]) {(new-object System.Net.WebClient).DownloadFile(\&quot;%gencont_bat_url%\&quot;,\&quot;_gencontinuous.new.bat\&quot;) } else { Invoke-WebRequest -Uri &quot;%gencont_bat_url%&quot; -Outfile &quot;_gencontinuous.bat&quot; }
if %ERRORLEVEL% == 0 goto upd_script_3
echo &quot;Errors encountered during download: %errorlevel%&quot;
goto dl_script_4
:upd_script_3
start copy /y &quot;_gencontinuous.new.bat&quot; &quot;_gencontinuous.bat&quot; ^&amp;^&amp; del &quot;_gencontinuous.new.bat&quot; ^&amp;^&amp; exit


:dl_script_4
ECHO Updating _genonce.sh
call POWERSHELL -command if (&#39;System.Net.WebClient&#39; -as [type]) {(new-object System.Net.WebClient).DownloadFile(\&quot;%gen_sh_url%\&quot;,\&quot;_genonce.new.sh\&quot;) } else { Invoke-WebRequest -Uri &quot;%gen_sh_url%&quot; -Outfile &quot;_genonce.sh&quot; }
if %ERRORLEVEL% == 0 goto upd_script_4
echo &quot;Errors encountered during download: %errorlevel%&quot;
goto dl_script_5
:upd_script_4
start copy /y &quot;_genonce.new.sh&quot; &quot;_genonce.sh&quot; ^&amp;^&amp; del &quot;_genonce.new.sh&quot; ^&amp;^&amp; exit

:dl_script_5
ECHO Updating _gencontinuous.sh
call POWERSHELL -command if (&#39;System.Net.WebClient&#39; -as [type]) {(new-object System.Net.WebClient).DownloadFile(\&quot;%gencont_sh_url%\&quot;,\&quot;_gencontinuous.new.sh\&quot;) } else { Invoke-WebRequest -Uri &quot;%gencont_sh_url%&quot; -Outfile &quot;_gencontinuous.sh&quot; }
if %ERRORLEVEL% == 0 goto upd_script_5
echo &quot;Errors encountered during download: %errorlevel%&quot;
goto dl_script_6
:upd_script_5
start copy /y &quot;_gencontinuous.new.sh&quot; &quot;_gencontinuous.sh&quot; ^&amp;^&amp; del &quot;_gencontinuous.new.sh&quot; ^&amp;^&amp; exit



:dl_script_6
ECHO Updating _updatePublisher.bat
call POWERSHELL -command if (&#39;System.Net.WebClient&#39; -as [type]) {(new-object System.Net.WebClient).DownloadFile(\&quot;%update_bat_url%\&quot;,\&quot;_updatePublisher.new.bat\&quot;) } else { Invoke-WebRequest -Uri &quot;%update_bat_url%&quot; -Outfile &quot;_updatePublisher.new.bat&quot; }
if %ERRORLEVEL% == 0 goto upd_script_6
echo &quot;Errors encountered during download: %errorlevel%&quot;
goto end
:upd_script_6
start copy /y &quot;_updatePublisher.new.bat&quot; &quot;_updatePublisher.bat&quot; ^&amp;^&amp; del &quot;_updatePublisher.new.bat&quot; ^&amp;^&amp; exit


:end


IF &quot;%skipPrompts%&quot;==&quot;true&quot; (
  PAUSE
}
</code></pre></div>



<a name="217302469"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/_updatePublisher.bat%20/f%20skips%20creation/near/217302469" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/_updatePublisher.2Ebat.20.2Ff.20skips.20creation.html#217302469">(Nov 19 2020 at 17:24)</a>:</h4>
<p>(sorry, it was just quicker for me to paste than to attach a file)</p>



<a name="217302937"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/_updatePublisher.bat%20/f%20skips%20creation/near/217302937" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryant Austin <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/_updatePublisher.2Ebat.20.2Ff.20skips.20creation.html#217302937">(Nov 19 2020 at 17:27)</a>:</h4>
<p>No worries!</p>



<a name="217303249"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/_updatePublisher.bat%20/f%20skips%20creation/near/217303249" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryant Austin <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/_updatePublisher.2Ebat.20.2Ff.20skips.20creation.html#217303249">(Nov 19 2020 at 17:29)</a>:</h4>
<p>The others work, but SET create="Y" is still the same.  Looks great, except for that.</p>



<a name="217308715"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/_updatePublisher.bat%20/f%20skips%20creation/near/217308715" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/_updatePublisher.2Ebat.20.2Ff.20skips.20creation.html#217308715">(Nov 19 2020 at 18:10)</a>:</h4>
<p>right, i missed that, thanks</p>



<a name="217311122"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/_updatePublisher.bat%20/f%20skips%20creation/near/217311122" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/_updatePublisher.2Ebat.20.2Ff.20skips.20creation.html#217311122">(Nov 19 2020 at 18:30)</a>:</h4>
<p><a href="https://github.com/FHIR/sample-ig/pull/42">https://github.com/FHIR/sample-ig/pull/42</a></p>



<a name="217311129"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/_updatePublisher.bat%20/f%20skips%20creation/near/217311129" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/_updatePublisher.2Ebat.20.2Ff.20skips.20creation.html#217311129">(Nov 19 2020 at 18:30)</a>:</h4>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span></p>



<a name="217345647"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/_updatePublisher.bat%20/f%20skips%20creation/near/217345647" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/_updatePublisher.2Ebat.20.2Ff.20skips.20creation.html#217345647">(Nov 19 2020 at 23:39)</a>:</h4>
<p>Merged</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
