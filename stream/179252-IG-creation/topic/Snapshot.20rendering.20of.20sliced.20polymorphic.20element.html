---
layout: page
title: "FHIR Chat  · Snapshot rendering of sliced polymorphic element · IG creation"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/index.html">IG creation</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Snapshot.20rendering.20of.20sliced.20polymorphic.20element.html">Snapshot rendering of sliced polymorphic element</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="174843669"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Snapshot%20rendering%20of%20sliced%20polymorphic%20element/near/174843669" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Eastwood <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Snapshot.20rendering.20of.20sliced.20polymorphic.20element.html#174843669">(Sep 04 2019 at 01:16)</a>:</h4>
<p>The HL7 AU <a href="https://build.fhir.org/ig/hl7au/au-fhir-base/StructureDefinition-au-medicationstatement.html" target="_blank" title="https://build.fhir.org/ig/hl7au/au-fhir-base/StructureDefinition-au-medicationstatement.html">AU Base Medication Statement profile</a> has sliced the polymorphic element medication[x], with Australian flavours of the 2 choices medicationCodeableConcept and medicationReference. </p>
<p>The differential table renders as expected, with just the 2 slice choices; like so<br>
<a href="/user_uploads/10155/7zkSq-TudhSpGIa-7RyxgoLR/pasted_image.png" target="_blank" title="pasted_image.png">pasted image</a></p>
<div class="message_inline_image"><a href="/user_uploads/10155/7zkSq-TudhSpGIa-7RyxgoLR/pasted_image.png" target="_blank" title="pasted image"><img src="/user_uploads/10155/7zkSq-TudhSpGIa-7RyxgoLR/pasted_image.png"></a></div><p>However, the snapshot view has what appears to be a duplication of the 2 choices; like this:<br>
<a href="/user_uploads/10155/0q4VpOvz3o8u9NowAh-7D7bX/pasted_image.png" target="_blank" title="pasted_image.png">pasted image</a> </p>
<div class="message_inline_image"><a href="/user_uploads/10155/0q4VpOvz3o8u9NowAh-7D7bX/pasted_image.png" target="_blank" title="pasted image"><img src="/user_uploads/10155/0q4VpOvz3o8u9NowAh-7D7bX/pasted_image.png"></a></div><p>Wondering if that is by design, or something unexpected.</p>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> - this is one of the things we recently chatted about</p>



<a name="174843864"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Snapshot%20rendering%20of%20sliced%20polymorphic%20element/near/174843864" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Snapshot.20rendering.20of.20sliced.20polymorphic.20element.html#174843864">(Sep 04 2019 at 01:21)</a>:</h4>
<p>it's... not a bug, but I think we can do something less confusing for readers of the spec</p>



<a name="174863121"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Snapshot%20rendering%20of%20sliced%20polymorphic%20element/near/174863121" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Snapshot.20rendering.20of.20sliced.20polymorphic.20element.html#174863121">(Sep 04 2019 at 08:53)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> I wouldn't expect duplicate type slicing constraints?<br>
This is how Forge now renders the this profile:<br>
<a href="/user_uploads/10155/q7de4O8PIRrDs56k5kWL9GTT/pasted_image.png" target="_blank" title="pasted_image.png">pasted image</a> <br>
Note that this is a rendering from the Forge development branch, including all the recent updates/corrections to the SnapshotGenerator.</p>
<div class="message_inline_image"><a href="/user_uploads/10155/q7de4O8PIRrDs56k5kWL9GTT/pasted_image.png" target="_blank" title="pasted image"><img src="/user_uploads/10155/q7de4O8PIRrDs56k5kWL9GTT/pasted_image.png"></a></div>



<a name="174863487"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Snapshot%20rendering%20of%20sliced%20polymorphic%20element/near/174863487" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Snapshot.20rendering.20of.20sliced.20polymorphic.20element.html#174863487">(Sep 04 2019 at 08:58)</a>:</h4>
<p>Note that I have also updated the rendering of slices, in sync with HL7 build. Named slices are now displayed using the format <code>elementName:sliceName</code> (repeating the element name), for example <code>coding:pbs</code>. This also includes the rendering of extensions, e.g. <code>extension:medicationClass</code>. However I decided to make an exception for type slices, as <code>value[x}:valueCoding</code> seems redundant/noisy to me.</p>



<a name="174919857"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Snapshot%20rendering%20of%20sliced%20polymorphic%20element/near/174919857" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Snapshot.20rendering.20of.20sliced.20polymorphic.20element.html#174919857">(Sep 04 2019 at 20:29)</a>:</h4>
<p>great.</p>



<a name="174919974"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Snapshot%20rendering%20of%20sliced%20polymorphic%20element/near/174919974" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Snapshot.20rendering.20of.20sliced.20polymorphic.20element.html#174919974">(Sep 04 2019 at 20:30)</a>:</h4>
<p>it's not really duplicate type slicing constraints, though it certainly looks like it. It's showing the base unsliced thing, with it's information, and then it shows the slices. But it sure looks, if you're not the person who generates it, as if it's showing the slices twice.</p>



<a name="174932995"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Snapshot%20rendering%20of%20sliced%20polymorphic%20element/near/174932995" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Eastwood <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Snapshot.20rendering.20of.20sliced.20polymorphic.20element.html#174932995">(Sep 04 2019 at 23:47)</a>:</h4>
<p>Thanks <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> and <span class="user-mention" data-user-id="191336">@Michel Rutten</span></p>



<a name="174970205"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Snapshot%20rendering%20of%20sliced%20polymorphic%20element/near/174970205" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Snapshot.20rendering.20of.20sliced.20polymorphic.20element.html#174970205">(Sep 05 2019 at 12:55)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span></p>
<p>I still don't understand the type slice duplication in the the generated snapshot of <a href="https://build.fhir.org/ig/hl7au/au-fhir-base/StructureDefinition-au-medicationstatement.htmlx" target="_blank" title="https://build.fhir.org/ig/hl7au/au-fhir-base/StructureDefinition-au-medicationstatement.htmlx">https://build.fhir.org/ig/hl7au/au-fhir-base/StructureDefinition-au-medicationstatement.htmlx</a></p>
<p>Per our discussion in Redmond, all type slices in the snapshot should be normalized to <code>elementName[x]:sliceName</code> representation. Renamed elements can only appear in a differential, as an optional shortcut notation.</p>
<p><a href="#narrow/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element/near/167975569" title="#narrow/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element/near/167975569">https://chat.fhir.org/#narrow/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element/near/167975569</a></p>
<blockquote>
<p>Choices</p>
<p>1. no slicing on snapshots - renaming only<br>
2. renaming in differentials, slicing on snapshots<br>
3. renaming or slicing in differentials, slicing in snapshots</p>
</blockquote>
<p><a href="#narrow/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element/near/167975586" title="#narrow/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element/near/167975586">https://chat.fhir.org/#narrow/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element/near/167975586</a></p>
<blockquote>
<p>decision - #3</p>
</blockquote>
<p>The current (R4 develop) version of the .NET SnapshotGenerator is still capable of processing snapshots with renamed elements, for compatibility reasons. But a snapshot that includes both representations of the same type slice constraint (e.g. <code>valueCoding</code> and <code>value[x]:valueCoding</code>) seems ambiguous.</p>



<a name="175104460"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Snapshot%20rendering%20of%20sliced%20polymorphic%20element/near/175104460" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Snapshot.20rendering.20of.20sliced.20polymorphic.20element.html#175104460">(Sep 06 2019 at 21:14)</a>:</h4>
<p>are you asking the presentation of the snapshot? or about the snapshot itself?</p>



<a name="175226064"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Snapshot%20rendering%20of%20sliced%20polymorphic%20element/near/175226064" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Snapshot.20rendering.20of.20sliced.20polymorphic.20element.html#175226064">(Sep 09 2019 at 09:22)</a>:</h4>
<p>I'm confused about the snapshot itself.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
