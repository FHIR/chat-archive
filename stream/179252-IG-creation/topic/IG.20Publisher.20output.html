---
layout: page
title: "FHIR Chat  · IG Publisher output · IG creation"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/index.html">IG creation</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20output.html">IG Publisher output</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="177403408"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20output/near/177403408" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20output.html#177403408">(Oct 05 2019 at 07:45)</a>:</h4>
<p>Is there a flag that you use on the IG Publisher when generating an official build ready to publish?<br>
(wanting to do it for an internal IG - so it doesn't put the CI warning box in it)</p>



<a name="177403796"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20output/near/177403796" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Egger <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20output.html#177403796">(Oct 05 2019 at 07:59)</a>:</h4>
<p>it is a two step process:</p>
<ol>
<li>-publish</li>
<li>-publish-update<br>
I documented it for our publication setup: <a href="https://github.com/ahdis/k8s-fhir.ch" target="_blank" title="https://github.com/ahdis/k8s-fhir.ch">https://github.com/ahdis/k8s-fhir.ch</a></li>
</ol>



<a name="177413384"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20output/near/177413384" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20output.html#177413384">(Oct 05 2019 at 13:01)</a>:</h4>
<p>Did you end up with any clarity on <code>TODO: not 100% sure what needs to be in -registry and -root parameter</code></p>



<a name="177417603"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20output/near/177417603" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20output.html#177417603">(Oct 05 2019 at 14:51)</a>:</h4>
<p>I use a site variable in the _config.yml file</p>



<a name="177417668"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20output/near/177417668" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20output.html#177417668">(Oct 05 2019 at 14:53)</a>:</h4>
<p><code>build: ci  # choice of ci|ballot|version</code></p>
<p>aomng other things this updates the title based  on the value of {{site.build}}</p>



<a name="177417714"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20output/near/177417714" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20output.html#177417714">(Oct 05 2019 at 14:54)</a>:</h4>
<p>hope to incorporate this stuff into the standard template</p>



<a name="177428398"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20output/near/177428398" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20output.html#177428398">(Oct 05 2019 at 19:43)</a>:</h4>
<p><span class="user-mention" data-user-id="191478">@Oliver Egger</span> is right - you run the publish update on whole site. It does more than just update the publish box. But there's things I haven't sorted yet for use by <a href="http://hl7.ch" target="_blank" title="http://hl7.ch">hl7.ch</a> - what server software are you using?</p>



<a name="177447817"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20output/near/177447817" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Egger <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20output.html#177447817">(Oct 06 2019 at 06:35)</a>:</h4>
<blockquote>
<p>Did you end up with any clarity on <code>TODO: not 100% sure what needs to be in -registry and -root parameter</code></p>
</blockquote>
<p><span class="user-mention" data-user-id="191367">@Brian Postlethwaite</span> sorry no, it worked for my case with the provided parameter</p>



<a name="177449634"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20output/near/177449634" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Egger <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20output.html#177449634">(Oct 06 2019 at 07:35)</a>:</h4>
<blockquote>
<p><span class="user-mention silent" data-user-id="191478">Oliver Egger</span> is right - you run the publish update on whole site. It does more than just update the publish box. But there's things I haven't sorted yet for use by <a href="http://hl7.ch" target="_blank" title="http://hl7.ch">hl7.ch</a> - what server software are you using?</p>
</blockquote>
<p>I use nginx in glcoud as a reverse proxy for a google drive, all config is published in this <a href="https://github.com/ahdis/k8s-fhir.ch" target="_blank" title="https://github.com/ahdis/k8s-fhir.ch">repo</a>. The only thing I noticed, that I had to add to template a specific <a href="https://github.com/ahdis/ig-template/blob/master/content/history.html" target="_blank" title="https://github.com/ahdis/ig-template/blob/master/content/history.html">history.html/js</a> to our ig's instead of the  history.cfml and do a rewrite for the <a href="https://github.com/ahdis/k8s-fhir.ch/blob/master/nginx_fhir-ch.conf" target="_blank" title="https://github.com/ahdis/k8s-fhir.ch/blob/master/nginx_fhir-ch.conf">history.cfml</a>. Is there anything which would be server specific?</p>



<a name="177452939"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20output/near/177452939" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20output.html#177452939">(Oct 06 2019 at 09:16)</a>:</h4>
<p>the redirects are server specific. nginx will use php redirects. Does your server support PHP? </p>
<p>As for the history page, you provide the <a href="http://history.xxx" target="_blank" title="http://history.xxx">history.xxx</a> set up for whatever works for the server; the IGpubisher leaves that untouched (just updates package-list.json)</p>



<a name="177453829"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20output/near/177453829" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20output.html#177453829">(Oct 06 2019 at 09:46)</a>:</h4>
<p>I have a simple folder shared on Azure websites (essentially IIS) but was going to add some code around the outside.<br>
What extra stuff did you have to do with publishing?</p>



<a name="177453835"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20output/near/177453835" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20output.html#177453835">(Oct 06 2019 at 09:46)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> i assume you're out of town at the moment.</p>



<a name="177453846"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20output/near/177453846" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20output.html#177453846">(Oct 06 2019 at 09:47)</a>:</h4>
<p>(planning on publishing the first snapshot this week, so will need to cross these issues off)</p>



<a name="177453917"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20output/near/177453917" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20output.html#177453917">(Oct 06 2019 at 09:50)</a>:</h4>
<p>so the basic process goes like this:<br>
- you have a local copy of the web site <br>
- you do your local build with a -web flag which generates some additional stuff<br>
- you copy the output into [ig]/XXXX where [ig] is the root for this ig, and XXXX is your version<br>
- you edit the package-list.json file<br>
- you point the igpublisher at the root directory (usually something that can contain several [ig] directories</p>
<p>It does the following:</p>
<ul>
<li>check the package-list.json</li>
<li>it checks that all the directories are correct </li>
<li>updates all the publish boxes so that the text is correct, and refers to the latest copy of that page (it there is one)</li>
<li>it generates all the appropriate redirects</li>
<li>it creates/updates the entry for the ig in the master ig registry as well</li>
</ul>



<a name="177453963"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20output/near/177453963" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20output.html#177453963">(Oct 06 2019 at 09:50)</a>:</h4>
<p>I am in the air on the way to Bangkok for a HIMSS meeting. Then St Petersberg, Moscow, Miami, Houston and then home</p>



<a name="177453976"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20output/near/177453976" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20output.html#177453976">(Oct 06 2019 at 09:51)</a>:</h4>
<p>the IG publisher is only tested to do this correctly for <a href="http://Hl7.org" target="_blank" title="http://Hl7.org">Hl7.org</a> and <a href="http://fhir.org" target="_blank" title="http://fhir.org">fhir.org</a>, but it's on my todo list to extend this for other circumstances as required</p>



<a name="177454020"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20output/near/177454020" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20output.html#177454020">(Oct 06 2019 at 09:52)</a>:</h4>
<p>and one more thing it will do this week:</p>
<ul>
<li>adds the IG to the package feed so that the IG gets picked up by the fhir registry</li>
</ul>



<a name="177454024"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20output/near/177454024" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20output.html#177454024">(Oct 06 2019 at 09:52)</a>:</h4>
<p>(both the package server and the registry itself)</p>



<a name="177482298"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20output/near/177482298" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20output.html#177482298">(Oct 07 2019 at 00:13)</a>:</h4>
<p>I wouldn't want this internal one sent to the registry...</p>



<a name="177482400"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20output/near/177482400" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20output.html#177482400">(Oct 07 2019 at 00:16)</a>:</h4>
<p>then you don't need to commit the changes. I'll make it so that bit can be turned off</p>



<a name="177482401"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20output/near/177482401" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20output.html#177482401">(Oct 07 2019 at 00:16)</a>:</h4>
<p>How are the redirects generated? (so I can work out if these will apply to the AzureWebSites deploy)</p>



<a name="177482404"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20output/near/177482404" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20output.html#177482404">(Oct 07 2019 at 00:16)</a>:</h4>
<p>for IIS, I generate an ASP. For Apache, I generate a PHP. You'll have to figure out, for an AzureWebSites, if there's any way to do media type dependent redirects. I expect that there isn't though</p>



<a name="177482466"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20output/near/177482466" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20output.html#177482466">(Oct 07 2019 at 00:19)</a>:</h4>
<p>I can probably work out what to do from the ASP.  Is that through an output flag, or does it just generate all of them?</p>



<a name="177486913"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20output/near/177486913" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20output.html#177486913">(Oct 07 2019 at 02:45)</a>:</h4>
<blockquote>
<p>Is that through an output flag, or does it just generate all of them?</p>
</blockquote>
<p>I don't know what you are asking</p>



<a name="177486960"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20output/near/177486960" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20output.html#177486960">(Oct 07 2019 at 02:46)</a>:</h4>
<p>The redirect stuff that you create, does it just output ASP and PHP and you pick what you want. Or is there a flag to choose, or is that done manually.</p>



<a name="177486974"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20output/near/177486974" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20output.html#177486974">(Oct 07 2019 at 02:47)</a>:</h4>
<p>at the moment, it's hard coded to know what server is what software</p>



<a name="177525815"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20output/near/177525815" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20output.html#177525815">(Oct 07 2019 at 14:45)</a>:</h4>
<p>no. you can specify using -server-type X where X is "ASP" or "Apache".</p>



<a name="177525828"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20output/near/177525828" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20output.html#177525828">(Oct 07 2019 at 14:45)</a>:</h4>
<p>it knows some servers so you don't have to specify.</p>



<a name="177525867"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20output/near/177525867" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20output.html#177525867">(Oct 07 2019 at 14:45)</a>:</h4>
<p>if you want other software listed, we'll have to work out how to generate the redirects for the server</p>



<a name="177547732"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20output/near/177547732" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20output.html#177547732">(Oct 07 2019 at 18:44)</a>:</h4>
<p>Thanks, I can take a look in the code for what it does and take a swing at it once I work out what is needed in Azure websites. Probably pretty close to asp I'd guess.</p>



<a name="177573213"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20output/near/177573213" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20output.html#177573213">(Oct 08 2019 at 00:13)</a>:</h4>
<p>I'd bet <em>not</em>. I bet you're stuck. These websites are static content only, at least all the ones I've reviewed are</p>



<a name="177573269"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20output/near/177573269" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20output.html#177573269">(Oct 08 2019 at 00:14)</a>:</h4>
<p>and I haven't figured out how to pull of a different redirect for different values of the Accept: header without server side active content</p>



<a name="177580158"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20output/near/177580158" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20output.html#177580158">(Oct 08 2019 at 02:59)</a>:</h4>
<p>I do have room for active content...</p>



<a name="177581003"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20output/near/177581003" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20output.html#177581003">(Oct 08 2019 at 03:20)</a>:</h4>
<p>ok what kind? ASP?</p>



<a name="177582424"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20output/near/177582424" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20output.html#177582424">(Oct 08 2019 at 04:02)</a>:</h4>
<p>I'll be checking what the ASP generates then make up my mind how I do it...<br>
(I may be building some simple server code - for simple auth)</p>



<a name="177582731"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20output/near/177582731" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20output.html#177582731">(Oct 08 2019 at 04:11)</a>:</h4>
<p>here's a typical redirect, at <a href="http://hl7.org/fhir/StructureDefinition/Account" target="_blank" title="http://hl7.org/fhir/StructureDefinition/Account">http://hl7.org/fhir/StructureDefinition/Account</a>:</p>
<div class="codehilite"><pre><span></span><span class="nt">&lt;%@</span> <span class="n">language</span><span class="o">=</span><span class="s">&quot;javascript&quot;</span><span class="nt">%&gt;</span>

<span class="nt">&lt;%</span>
  <span class="n">var</span> <span class="n">s</span> <span class="o">=</span> <span class="kt">String</span><span class="p">(</span><span class="n">Request</span><span class="p">.</span><span class="n">ServerVariables</span><span class="p">(</span><span class="s">&quot;HTTP_ACCEPT&quot;</span><span class="p">))</span><span class="err">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">s</span><span class="p">.</span><span class="n">indexOf</span><span class="p">(</span><span class="s">&quot;json&quot;</span><span class="p">)</span> <span class="o">&gt;</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">Response</span><span class="p">.</span><span class="n">Redirect</span><span class="p">(</span><span class="s">&quot;http://hl7.org/fhir/account.json&quot;</span><span class="p">)</span><span class="err">;</span>
  <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">s</span><span class="p">.</span><span class="n">indexOf</span><span class="p">(</span><span class="s">&quot;html&quot;</span><span class="p">)</span> <span class="o">&gt;</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">Response</span><span class="p">.</span><span class="n">Redirect</span><span class="p">(</span><span class="s">&quot;http://hl7.org/fhir/account.html&quot;</span><span class="p">)</span><span class="err">;</span>
  <span class="k">else</span>
    <span class="n">Response</span><span class="p">.</span><span class="n">Redirect</span><span class="p">(</span><span class="s">&quot;http://hl7.org/fhir/account.xml&quot;</span><span class="p">)</span><span class="err">;</span>

<span class="nt">%&gt;</span>

<span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
<span class="nt">&lt;body&gt;</span>
You should not be seeing this page. If you do, ASP has failed badly.
<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</pre></div>



<a name="177582877"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20output/near/177582877" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20output.html#177582877">(Oct 08 2019 at 04:15)</a>:</h4>
<p>Is it really just the URL free addresses and versioning URLS and content type negotiations?</p>



<a name="177588085"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20output/near/177588085" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20output.html#177588085">(Oct 08 2019 at 06:41)</a>:</h4>
<p>that's all the redirects are.</p>



<a name="177593241"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20output/near/177593241" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20output.html#177593241">(Oct 08 2019 at 08:29)</a>:</h4>
<p>Cool, no need to generate anything then.<br>
I should be able to create some .net middleware to do it.</p>



<a name="177602891"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20output/near/177602891" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20output.html#177602891">(Oct 08 2019 at 11:05)</a>:</h4>
<p>ok. and I changed around the way you invoke it. Now, you need a file publish.ini in the root of your web site. It has the following format:</p>
<div class="codehilite"><pre><span></span><span class="k">[website]</span>
<span class="na">style</span><span class="o">=</span><span class="s">fhir.layout</span>
<span class="na">url</span><span class="o">=</span><span class="s">{public url for this folder}</span>
<span class="na">no-registry</span><span class="o">=</span><span class="s">1  ; only if the IGs in this directory are not registered in the public IG registry</span>
<span class="na">server</span><span class="o">=</span><span class="s">{asp | apache}</span>

<span class="c1">; both entries are optional, and are the names of files to produce as RSS feeds in the folder</span>
<span class="c1">; for people who want to subscribe to any new versions. The FHIR IG registry uses the package</span>
<span class="c1">; file if it&#39;s registered in the IG feed directory</span>
<span class="k">[feeds]</span>
<span class="na">package</span><span class="o">=</span><span class="s">{filename}</span>
<span class="na">publication</span><span class="o">=</span><span class="s">{filename}</span>
</pre></div>



<a name="177602948"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20output/near/177602948" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20output.html#177602948">(Oct 08 2019 at 11:06)</a>:</h4>
<p>and you invoke it with only 2 parameters -publish-update {folder} -registry {path | n/a}</p>



<a name="177683938"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20output/near/177683938" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20output.html#177683938">(Oct 09 2019 at 05:28)</a>:</h4>
<p>Is that url the one at the root, or the one inside the version/dev folder?<br>
root/dev<br>
root/0.1.0<br>
root/0.2.0</p>



<a name="177684055"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20output/near/177684055" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20output.html#177684055">(Oct 09 2019 at 05:31)</a>:</h4>
<p>(and I should imagine this hasn't been pushed yet too)<br>
the  {root}/{realm}/{code} was getting me, as the paths we use in our registry won't be 3 deep.</p>



<a name="177684115"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20output/near/177684115" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20output.html#177684115">(Oct 09 2019 at 05:32)</a>:</h4>
<p>We are planning to use {root}/th-ncsr/dev/index.html<br>
(and then replace dev with the versions of each of the published ones)</p>



<a name="177695605"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20output/near/177695605" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20output.html#177695605">(Oct 09 2019 at 09:14)</a>:</h4>
<p>root</p>



<a name="177695675"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20output/near/177695675" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20output.html#177695675">(Oct 09 2019 at 09:15)</a>:</h4>
<p>I think you should use current rather than dev. It might not matter, but current and dev are two special package versions - current, the current build. dev, the build you have on your local drive (not yet committed)</p>



<a name="177695750"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20output/near/177695750" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20output.html#177695750">(Oct 09 2019 at 09:16)</a>:</h4>
<p>you don't need {realm}, or even {code} but the infrastructure expects you to have {code} for a reason</p>



<a name="177775967"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20output/near/177775967" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20output.html#177775967">(Oct 10 2019 at 03:24)</a>:</h4>
<p>registry with a path of <code>n/a</code> kinda breaks heaps. Have done some debugging, and some obvious stuff in there which I tried fixing and it gets a lot further, but then there is no IGRegistryMaintainer reg object, so nothing appears to be able to process.<br>
Or am I missing something here, Is this maintaining an external registry outside the folders its processing (i.e. updating the fhir registry or something in <a href="http://build.org" target="_blank" title="http://build.org">build.org</a> etc)</p>



<a name="177777743"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20output/near/177777743" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20output.html#177777743">(Oct 10 2019 at 04:15)</a>:</h4>
<p>I haven't finished all this yet</p>



<a name="177779048"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20output/near/177779048" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20output.html#177779048">(Oct 10 2019 at 04:47)</a>:</h4>
<p>I guesses as much ;)</p>



<a name="178060789"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20output/near/178060789" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20output.html#178060789">(Oct 13 2019 at 23:57)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> re the use of RSS for feeds, did you consider ATOM as an alternative, and did you consider adding additional metadata to the feed to allow for entries that contain things other than packages or with a different MIME type/format (e.g., future proofing)?  Even knowing (machine readably) what FHIR version the package contents consist of would be useful for automation.</p>



<a name="178083065"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20output/near/178083065" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20output.html#178083065">(Oct 14 2019 at 08:25)</a>:</h4>
<p>no because we were working with the RSS format as already used in the NPM community. I expect we can add things to that as long as don't change anything it already has</p>



<a name="178083094"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20output/near/178083094" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20output.html#178083094">(Oct 14 2019 at 08:25)</a>:</h4>
<p>but you can get all that from the package, so it's more convenience than anything else</p>



<a name="178169652"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20output/near/178169652" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20output.html#178169652">(Oct 15 2019 at 08:01)</a>:</h4>
<p>Yes, if you go and get the package, but not great if you want your UI to only display STU3 packages, for example, or other manifest-based filtering.<br>
But I see this is RSS 2.0 so the spec allows for extension elements as long as they are namespaced</p>



<a name="178171047"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20output/near/178171047" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20output.html#178171047">(Oct 15 2019 at 08:22)</a>:</h4>
<p>npm seems a little more structured in that the <code>&lt;title&gt;</code> elements are essentially the logical identity (I'm reverse engineering this; documentation seems very hard to find)</p>



<a name="178175088"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20output/near/178175088" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20output.html#178175088">(Oct 15 2019 at 09:26)</a>:</h4>
<p>hmm. you're right. I'll fix that and extend while I'm at it.</p>



<a name="178175649"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20output/near/178175649" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20output.html#178175649">(Oct 15 2019 at 09:35)</a>:</h4>
<p>I am adding the namespace fhir as <code>http://hl7.org/fhir/feed\</code>, with the following elements:</p>
<ul>
<li><code>fhir:version</code>: the version of FHIR the package is for (may repeat in the future)</li>
<li><code>fhir:kind</code>: the kind of package</li>
</ul>
<p>Kind of package:</p>
<ul>
<li><code>fhir.core</code>: a core specification</li>
<li><code>fhir.ig</code>:  a IG</li>
<li><code>fhir.tool</code>: release of a tool (e.g. validator) - none at the moment</li>
<li><code>fhir.template</code>: an IG template</li>
<li><code>fhir.subset</code>: a subset of an IG for some purpose</li>
</ul>



<a name="200430171"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20output/near/200430171" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a>  Bob Milius <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20output.html#200430171">(Jun 10 2020 at 15:16)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191316">Grahame Grieve</span> <a href="#narrow/stream/179252-IG-creation/topic/IG.20Publisher.20output/near/177453917">said</a>:</p>
<blockquote>
<p>so the basic process goes like this:</p>
<ul>
<li>you have a local copy of the web site </li>
<li>you do your local build with a -web flag which generates some additional stuff</li>
</ul>
</blockquote>
<p>Should I be running <code>-web</code> before/after/same time as the <code>-publish</code> or <code>-publish-update</code> option? </p>
<p><span class="user-mention silent" data-user-id="191316">Grahame Grieve</span> <a href="#narrow/stream/179252-IG-creation/topic/IG.20Publisher.20output/near/177453917">said</a>:</p>
<blockquote>
<ul>
<li>it generates all the appropriate redirects</li>
</ul>
</blockquote>
<p>Is this done with the <code>-web</code> option? or with the <code>-publish</code>, <code>-publish-output</code> parameters? Should I be seeing php code generated in my local site?</p>



<a name="200792820"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20output/near/200792820" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20output.html#200792820">(Jun 14 2020 at 00:38)</a>:</h4>
<p>so there's a 2 step process - you generate your IG in whatever directory you cloned the git repo into</p>



<a name="200792822"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20output/near/200792822" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20output.html#200792822">(Jun 14 2020 at 00:38)</a>:</h4>
<p>that's when you use -web</p>



<a name="200793806"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20output/near/200793806" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20output.html#200793806">(Jun 14 2020 at 01:10)</a>:</h4>
<p>for your final build. it does a few little background things a little different but the output is almost completely the same</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
