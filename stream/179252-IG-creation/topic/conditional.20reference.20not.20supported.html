---
layout: page
title: "FHIR Chat  · conditional reference not supported · IG creation"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/index.html">IG creation</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/conditional.20reference.20not.20supported.html">conditional reference not supported</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="195578861"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/conditional%20reference%20not%20supported/near/195578861" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cheng Liu <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/conditional.20reference.20not.20supported.html#195578861">(Apr 28 2020 at 15:14)</a>:</h4>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> We got an error in our example: Relative URLs must be of the format [ResourceName]/[id]. Encountered Patient?given=Alice&amp;family=Newman&amp;birthdate=1970-05-01&amp;address-postalcode=97006. As we discussed that the IG validation may add the function to support conditional reference. Please help. Thank you</p>



<a name="195593415"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/conditional%20reference%20not%20supported/near/195593415" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/conditional.20reference.20not.20supported.html#195593415">(Apr 28 2020 at 16:53)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span></p>



<a name="195593500"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/conditional%20reference%20not%20supported/near/195593500" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/conditional.20reference.20not.20supported.html#195593500">(Apr 28 2020 at 16:54)</a>:</h4>
<p>The issue is that conditional references in a transaction or batch are failing validation because they're not strict references, but rather queries</p>



<a name="195614546"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/conditional%20reference%20not%20supported/near/195614546" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/conditional.20reference.20not.20supported.html#195614546">(Apr 28 2020 at 19:33)</a>:</h4>
<p>do we have an example? Because the validator already allows this. So it's not clear to me why this is a problem</p>



<a name="195617443"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/conditional%20reference%20not%20supported/near/195617443" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/conditional.20reference.20not.20supported.html#195617443">(Apr 28 2020 at 19:55)</a>:</h4>
<p><span class="user-mention" data-user-id="240020">@Cheng Liu</span> - where is this in Git?</p>



<a name="195619693"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/conditional%20reference%20not%20supported/near/195619693" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cheng Liu <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/conditional.20reference.20not.20supported.html#195619693">(Apr 28 2020 at 20:09)</a>:</h4>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> - Please check the error here: <a href="http://build.fhir.org/ig/HL7/sdoh-cc/branches/development/qa.html#_scratch_ig-build-temp-M28NWK_repo_input_resources_bundle_10432" title="http://build.fhir.org/ig/HL7/sdoh-cc/branches/development/qa.html#_scratch_ig-build-temp-M28NWK_repo_input_resources_bundle_10432">http://build.fhir.org/ig/HL7/sdoh-cc/branches/development/qa.html#_scratch_ig-build-temp-M28NWK_repo_input_resources_bundle_10432</a></p>



<a name="195649303"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/conditional%20reference%20not%20supported/near/195649303" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/conditional.20reference.20not.20supported.html#195649303">(Apr 29 2020 at 01:14)</a>:</h4>
<p>so the validator says that conditional references are only allowed in transactions.</p>



<a name="195658047"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/conditional%20reference%20not%20supported/near/195658047" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/conditional.20reference.20not.20supported.html#195658047">(Apr 29 2020 at 04:05)</a>:</h4>
<p>I missed that, sorry.  Agree.  Conditional matches aren't permitted in messages - because messages aren't presumed to be interacting with systems that expose RESTful interfaces.</p>



<a name="195732888"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/conditional%20reference%20not%20supported/near/195732888" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cheng Liu <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/conditional.20reference.20not.20supported.html#195732888">(Apr 29 2020 at 16:04)</a>:</h4>
<p>Get it. I will report to the team. Thanks a lot</p>



<a name="221240773"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/conditional%20reference%20not%20supported/near/221240773" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Kaney <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/conditional.20reference.20not.20supported.html#221240773">(Dec 30 2020 at 19:44)</a>:</h4>
<p>I am having a problem when there is a pipe <code>|</code> in a conditional reference.</p>
<p>In a Bundle transaction example in my IG, I have an Observation with a reference to a Patient using a conditional query with an <code>identifier</code> that specifies both a system and value. IG Publisher (v1.1.56) produces the following pairs of errors:</p>
<ul>
<li><code>The URL is not valid because '(URL contains Invalid Characters ([|]))': Patient?identifier=urn:oid:&lt;oid&gt;|&lt;value&gt;</code></li>
<li><code>Unable to resolve resource Patient?identifier=urn:oid:&lt;oid&gt;|&lt;value&gt;</code></li>
</ul>
<p>There is an existing example Patient resource in the IG that has a matching identifier. When I try to transact for real with a locally running Smile/HAPI, the transaction works fine.</p>



<a name="221551609"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/conditional%20reference%20not%20supported/near/221551609" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/conditional.20reference.20not.20supported.html#221551609">(Jan 04 2021 at 17:12)</a>:</h4>
<p>Did you try escaping the |?</p>



<a name="221963306"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/conditional%20reference%20not%20supported/near/221963306" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Kaney <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/conditional.20reference.20not.20supported.html#221963306">(Jan 07 2021 at 16:24)</a>:</h4>
<p>Yes with <code>%7C</code>, still fails.</p>



<a name="221964342"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/conditional%20reference%20not%20supported/near/221964342" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Kaney <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/conditional.20reference.20not.20supported.html#221964342">(Jan 07 2021 at 16:31)</a>:</h4>
<p>To clarify, the failure about the invalid characters no longer appears. However the "unable to resolve" error is still there.</p>



<a name="221964694"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/conditional%20reference%20not%20supported/near/221964694" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Kaney <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/conditional.20reference.20not.20supported.html#221964694">(Jan 07 2021 at 16:33)</a>:</h4>
<p>Should the IG publisher support the un-escaped <code>|</code>? The FHIR spec seems to show it acceptable in this form (<a href="https://www.hl7.org/fhir/search.html#token">https://www.hl7.org/fhir/search.html#token</a>)</p>



<a name="221992687"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/conditional%20reference%20not%20supported/near/221992687" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/conditional.20reference.20not.20supported.html#221992687">(Jan 07 2021 at 19:59)</a>:</h4>
<p>where is it saying it can't be resolved?</p>



<a name="221992923"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/conditional%20reference%20not%20supported/near/221992923" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Kaney <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/conditional.20reference.20not.20supported.html#221992923">(Jan 07 2021 at 20:01)</a>:</h4>
<p>in qa.html</p>



<a name="221993055"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/conditional%20reference%20not%20supported/near/221993055" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/conditional.20reference.20not.20supported.html#221993055">(Jan 07 2021 at 20:02)</a>:</h4>
<p>right but where is the reference?</p>



<a name="221993379"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/conditional%20reference%20not%20supported/near/221993379" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Kaney <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/conditional.20reference.20not.20supported.html#221993379">(Jan 07 2021 at 20:04)</a>:</h4>
<p>There is a transaction Bundle. One of the entries is an Observation. The reference in question is that Observation's subject (conditional reference to a patient using an identifier).</p>



<a name="221995149"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/conditional%20reference%20not%20supported/near/221995149" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/conditional.20reference.20not.20supported.html#221995149">(Jan 07 2021 at 20:19)</a>:</h4>
<p>how do I reproduce this?</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
