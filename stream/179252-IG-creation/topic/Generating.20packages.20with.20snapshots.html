---
layout: page
title: "FHIR Chat  · Generating packages with snapshots · IG creation"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/index.html">IG creation</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Generating.20packages.20with.20snapshots.html">Generating packages with snapshots</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="210982880"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Generating%20packages%20with%20snapshots/near/210982880" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Torben M. Hagensen <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Generating.20packages.20with.20snapshots.html#210982880">(Sep 23 2020 at 10:15)</a>:</h4>
<p>I have a situation where two projects are being developed in parallel. both having a CI build by auto-ig-publisher. One of the projects use the other as a package reference. As that project uses SUSHI it requires the package to contain snaphots, but the auto-ig-publisher does not seem support that. When I check the package in my local cache, it doesn't contain snapshots</p>
<p>Is there a way to fix that? I would like to avoid publishing the referenced project as more than a CI build at the current stage.</p>



<a name="210983431"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Generating%20packages%20with%20snapshots/near/210983431" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Generating.20packages.20with.20snapshots.html#210983431">(Sep 23 2020 at 10:20)</a>:</h4>
<p>the packages generated by the IG publisher always contain snapshots, so I don't understand your question</p>



<a name="210987507"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Generating%20packages%20with%20snapshots/near/210987507" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Torben M. Hagensen <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Generating.20packages.20with.20snapshots.html#210987507">(Sep 23 2020 at 11:14)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191316">Grahame Grieve</span> <a href="#narrow/stream/179252-IG-creation/topic/Generating.20packages.20with.20snapshots/near/210983431">said</a>:</p>
<blockquote>
<p>the packages generated by the IG publisher always contain snapshots, so I don't understand your question</p>
</blockquote>
<p>Maybe the issue relates to the way I reference it in FHIR Shorthand? (if so I can bring the discussion to the shorthand stream)<br>
When I do like this in config.yaml:<br>
dependencies:<br>
  hl7.fhir.myproject:<br>
    uri: <a href="https://build.fhir.org/ig/tmh-mjolner/myproject/branches/some-branch">https://build.fhir.org/ig/tmh-mjolner/myproject/branches/some-branch</a><br>
    version: 0.1.0<br>
... it generates a local cache of the package and it within that I can't find any snapshots. SUSHI complains with the following error: "Structure Definition &lt;xxx&gt; is missing snapshot. Snapshot is required for import."</p>
<p>Shouldn't that be possible?</p>



<a name="210987814"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Generating%20packages%20with%20snapshots/near/210987814" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Generating.20packages.20with.20snapshots.html#210987814">(Sep 23 2020 at 11:18)</a>:</h4>
<blockquote>
<p>it generates</p>
</blockquote>
<p>What generates?</p>



<a name="210989567"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Generating%20packages%20with%20snapshots/near/210989567" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Torben M. Hagensen <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Generating.20packages.20with.20snapshots.html#210989567">(Sep 23 2020 at 11:39)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191316">Grahame Grieve</span> <a href="#narrow/stream/179252-IG-creation/topic/Generating.20packages.20with.20snapshots/near/210987814">said</a>:</p>
<blockquote>
<blockquote>
<p>it generates</p>
</blockquote>
<p>What generates?</p>
</blockquote>
<p>Well generates is probably not the right word, sorry.<br>
It happens when running sushi. I says<br>
...<br>
-Downloading package hl7.fhir.myproject#0.1.0<br>
-Loaded package hl7.fhir.myproject#0.1.0<br>
...</p>
<p>the download part creates a local package folder cache in my user folder</p>
<p>A bit further down the output from sushi it complains about the missing snapshot</p>



<a name="210989914"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Generating%20packages%20with%20snapshots/near/210989914" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Generating.20packages.20with.20snapshots.html#210989914">(Sep 23 2020 at 11:43)</a>:</h4>
<p>I don't know what hl7.fhir.myproject is, but you shouldn't be using it anywa y</p>



<a name="210990100"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Generating%20packages%20with%20snapshots/near/210990100" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Torben M. Hagensen <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Generating.20packages.20with.20snapshots.html#210990100">(Sep 23 2020 at 11:44)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191316">Grahame Grieve</span> <a href="#narrow/stream/179252-IG-creation/topic/Generating.20packages.20with.20snapshots/near/210989914">said</a>:</p>
<blockquote>
<p>I don't know what hl7.fhir.myproject is, but you shouldn't be using it anywa y</p>
</blockquote>
<p>That's  not the real name - it's the other project that is being developed in parallel</p>



<a name="210990287"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Generating%20packages%20with%20snapshots/near/210990287" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Generating.20packages.20with.20snapshots.html#210990287">(Sep 23 2020 at 11:47)</a>:</h4>
<p>well, I can't see any evidence that it's ever been built on the ci-build, or that it's in a package server</p>



<a name="210990421"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Generating%20packages%20with%20snapshots/near/210990421" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Torben M. Hagensen <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Generating.20packages.20with.20snapshots.html#210990421">(Sep 23 2020 at 11:48)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191316">Grahame Grieve</span> <a href="#narrow/stream/179252-IG-creation/topic/Generating.20packages.20with.20snapshots/near/210990287">said</a>:</p>
<blockquote>
<p>well, I can't see any evidence that it's ever been built on the ci-build, or that it's in a package server</p>
</blockquote>
<p><span class="user-mention silent" data-user-id="240678">Torben M. Hagensen</span> <a href="#narrow/stream/179252-IG-creation/topic/Generating.20packages.20with.20snapshots/near/210990100">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="191316">Grahame Grieve</span> <a href="#narrow/stream/179252-IG-creation/topic/Generating.20packages.20with.20snapshots/near/210989914">said</a>:</p>
<blockquote>
<p>I don't know what hl7.fhir.myproject is, but you shouldn't be using it anywa y</p>
</blockquote>
<p>That's  not the real name - it's the other project that is being developed in parallel</p>
</blockquote>
<p>I basically just want to be able to develop on two projects in parallel and have the one use the CI build of the other as package<br>
2 seconds - I'll give you the real names</p>



<a name="210990422"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Generating%20packages%20with%20snapshots/near/210990422" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Generating.20packages.20with.20snapshots.html#210990422">(Sep 23 2020 at 11:48)</a>:</h4>
<p>if that's not it's real name, give me the real name on the ci-build and I can have a look</p>



<a name="210990490"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Generating%20packages%20with%20snapshots/near/210990490" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Generating.20packages.20with.20snapshots.html#210990490">(Sep 23 2020 at 11:49)</a>:</h4>
<blockquote>
<p>I basically just want to be able to develop on two projects in parallel and have the one use the CI build of the other as package</p>
</blockquote>
<p>You can but you have to use the special version <code>current</code> in your dependency which means to get whatever the CI build last built</p>



<a name="210990626"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Generating%20packages%20with%20snapshots/near/210990626" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Torben M. Hagensen <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Generating.20packages.20with.20snapshots.html#210990626">(Sep 23 2020 at 11:51)</a>:</h4>
<p>Referenced project: <a href="https://build.fhir.org/ig/hl7dk/dk-core/">https://build.fhir.org/ig/hl7dk/dk-core/</a><br>
Referring project: <a href="https://build.fhir.org/ig/hl7dk/dk-medcom/branches/new-care-communication-profile">https://build.fhir.org/ig/hl7dk/dk-medcom/branches/new-care-communication-profile</a> (currently fails)</p>



<a name="210990757"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Generating%20packages%20with%20snapshots/near/210990757" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Torben M. Hagensen <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Generating.20packages.20with.20snapshots.html#210990757">(Sep 23 2020 at 11:53)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191316">Grahame Grieve</span> <a href="#narrow/stream/179252-IG-creation/topic/Generating.20packages.20with.20snapshots/near/210990490">said</a>:</p>
<blockquote>
<blockquote>
<p>I basically just want to be able to develop on two projects in parallel and have the one use the CI build of the other as package</p>
</blockquote>
<p>You can but you have to use the special version <code>current</code> in your dependency which means to get whatever the CI build last built</p>
</blockquote>
<p>Didn't seem to work in FHIR Shorthand (maybe I did it wrong)</p>



<a name="210990759"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Generating%20packages%20with%20snapshots/near/210990759" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Generating.20packages.20with.20snapshots.html#210990759">(Sep 23 2020 at 11:53)</a>:</h4>
<p>the profiles in <a href="https://build.fhir.org/ig/hl7dk/dk-core/package.tgz">https://build.fhir.org/ig/hl7dk/dk-core/package.tgz</a> have snapshots, as they should.</p>



<a name="210990768"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Generating%20packages%20with%20snapshots/near/210990768" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Generating.20packages.20with.20snapshots.html#210990768">(Sep 23 2020 at 11:53)</a>:</h4>
<p>so the question appears to be something to do with sushi</p>



<a name="210990870"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Generating%20packages%20with%20snapshots/near/210990870" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Torben M. Hagensen <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Generating.20packages.20with.20snapshots.html#210990870">(Sep 23 2020 at 11:54)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191316">Grahame Grieve</span> <a href="#narrow/stream/179252-IG-creation/topic/Generating.20packages.20with.20snapshots/near/210990759">said</a>:</p>
<blockquote>
<p>the profiles in <a href="https://build.fhir.org/ig/hl7dk/dk-core/package.tgz">https://build.fhir.org/ig/hl7dk/dk-core/package.tgz</a> have snapshots, as they should.</p>
</blockquote>
<p>Yes, I have also seen that, but the download mad by sushi does not seem to?</p>



<a name="210991228"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Generating%20packages%20with%20snapshots/near/210991228" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Torben M. Hagensen <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Generating.20packages.20with.20snapshots.html#210991228">(Sep 23 2020 at 11:59)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191316">Grahame Grieve</span> <a href="#narrow/stream/179252-IG-creation/topic/Generating.20packages.20with.20snapshots/near/210990768">said</a>:</p>
<blockquote>
<p>so the question appears to be something to do with sushi</p>
</blockquote>
<p>I will ask on the shorthand stream - hope some sushi shark can help</p>
<p>Thanks a lot for the help. Now it has some weight stating that it must be a sushi issue ;-)</p>



<a name="211095729"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Generating%20packages%20with%20snapshots/near/211095729" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Torben M. Hagensen <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Generating.20packages.20with.20snapshots.html#211095729">(Sep 24 2020 at 07:06)</a>:</h4>
<p><span class="user-mention silent" data-user-id="240678">Torben M. Hagensen</span> <a href="#narrow/stream/179252-IG-creation/topic/Generating.20packages.20with.20snapshots/near/210991228">said</a>:</p>
<blockquote>
<p>Thanks a lot for the help. Now it has some weight stating that it must be a sushi issue ;-)</p>
</blockquote>
<p>Just want to let you known that the problem is solved.<br>
I was not using sushi correctly. Declaring the dependency correctly as this:<br>
  hl7.fhir.dk-core: current<br>
in config.yaml solved the problem</p>
<p>Thanks again for the help</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
