---
layout: page
title: "FHIR Chat  · NPE: Cannot invoke String.equals(Object) because code is nul · IG creation"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/index.html">IG creation</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/NPE.3A.20Cannot.20invoke.20String.2Eequals(Object).20because.20code.20is.20nul.html">NPE: Cannot invoke String.equals(Object) because code is nul</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="242618891"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/NPE%3A%20Cannot%20invoke%20String.equals%28Object%29%20because%20code%20is%20nul/near/242618891" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Henket <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/NPE.3A.20Cannot.20invoke.20String.2Eequals(Object).20because.20code.20is.20nul.html#242618891">(Jun 14 2021 at 15:53)</a>:</h4>
<p>FHIR IG Publisher 1.1.73 (June 5 , 2021). I'm getting the error below here. What can I do for tracing the issue better?</p>
<div class="codehilite" data-code-language="Bash"><pre><span></span><code>...
Processing Conformance Resources                                                 <span class="o">(</span><span class="m">00</span>:39.0844<span class="o">)</span>
Generating Snapshots                                                             <span class="o">(</span><span class="m">00</span>:43.0070<span class="o">)</span>
Generating Narratives                                                            <span class="o">(</span><span class="m">00</span>:45.0574<span class="o">)</span>
Publishing Content Failed: Cannot invoke <span class="s2">"String.equals(Object)"</span> because <span class="s2">"code"</span> is null <span class="o">(</span><span class="m">00</span>:52.0592<span class="o">)</span>
                                                                                 <span class="o">(</span><span class="m">00</span>:52.0594<span class="o">)</span>
Use -? to get <span class="nb">command</span> line <span class="nb">help</span>                                                  <span class="o">(</span><span class="m">00</span>:52.0596<span class="o">)</span>
                                                                                 <span class="o">(</span><span class="m">00</span>:52.0597<span class="o">)</span>
Stack Dump <span class="o">(</span><span class="k">for</span> debugging<span class="o">)</span>:                                                      <span class="o">(</span><span class="m">00</span>:52.0598<span class="o">)</span>
java.lang.NullPointerException: Cannot invoke <span class="s2">"String.equals(Object)"</span> because <span class="s2">"code"</span> is null
    at org.hl7.fhir.r5.terminologies.CodeSystemUtilities.getCode<span class="o">(</span>CodeSystemUtilities.java:443<span class="o">)</span>
    at org.hl7.fhir.r5.terminologies.CodeSystemUtilities.getCode<span class="o">(</span>CodeSystemUtilities.java:434<span class="o">)</span>
    at org.hl7.fhir.r5.renderers.TerminologyRenderer.getDisplayForProperty<span class="o">(</span>TerminologyRenderer.java:259<span class="o">)</span>
    at org.hl7.fhir.r5.renderers.TerminologyRenderer.addTableHeaderRowStandard<span class="o">(</span>TerminologyRenderer.java:229<span class="o">)</span>
    at org.hl7.fhir.r5.renderers.CodeSystemRenderer.generateCodeSystemContent<span class="o">(</span>CodeSystemRenderer.java:171<span class="o">)</span>
    at org.hl7.fhir.r5.renderers.CodeSystemRenderer.render<span class="o">(</span>CodeSystemRenderer.java:60<span class="o">)</span>
    at org.hl7.fhir.r5.renderers.CodeSystemRenderer.render<span class="o">(</span>CodeSystemRenderer.java:43<span class="o">)</span>
    at org.hl7.fhir.r5.renderers.ResourceRenderer.render<span class="o">(</span>ResourceRenderer.java:74<span class="o">)</span>
    at org.hl7.fhir.igtools.publisher.Publisher.generateNarratives<span class="o">(</span>Publisher.java:1155<span class="o">)</span>
    at org.hl7.fhir.igtools.publisher.Publisher.loadConformance<span class="o">(</span>Publisher.java:3907<span class="o">)</span>
    at org.hl7.fhir.igtools.publisher.Publisher.createIg<span class="o">(</span>Publisher.java:889<span class="o">)</span>
    at org.hl7.fhir.igtools.publisher.Publisher.execute<span class="o">(</span>Publisher.java:744<span class="o">)</span>
    at org.hl7.fhir.igtools.publisher.Publisher.main<span class="o">(</span>Publisher.java:8557<span class="o">)</span>
</code></pre></div>



<a name="242626010"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/NPE%3A%20Cannot%20invoke%20String.equals%28Object%29%20because%20code%20is%20nul/near/242626010" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/NPE.3A.20Cannot.20invoke.20String.2Eequals(Object).20because.20code.20is.20nul.html#242626010">(Jun 14 2021 at 16:42)</a>:</h4>
<p>can I reproduce it?</p>



<a name="242626537"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/NPE%3A%20Cannot%20invoke%20String.equals%28Object%29%20because%20code%20is%20nul/near/242626537" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/NPE.3A.20Cannot.20invoke.20String.2Eequals(Object).20because.20code.20is.20nul.html#242626537">(Jun 14 2021 at 16:46)</a>:</h4>
<p>but it comes from a uri of a property. it's a bug in my code - will be fixed next release</p>



<a name="242636545"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/NPE%3A%20Cannot%20invoke%20String.equals%28Object%29%20because%20code%20is%20nul/near/242636545" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Henket <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/NPE.3A.20Cannot.20invoke.20String.2Eequals(Object).20because.20code.20is.20nul.html#242636545">(Jun 14 2021 at 17:59)</a>:</h4>
<p>I found it ... somewhat. My ig had properties like this below. I removed all of them and that got me passed this issue. Not sure which was the culprit:</p>
<div class="codehilite" data-code-language="XML"><pre><span></span><code>     <span class="c">&lt;!--copyright year is a mandatory parameter--&gt;</span>
      <span class="nt">&lt;parameter&gt;</span>
         <span class="nt">&lt;code</span> <span class="na">value=</span><span class="s">"copyrightyear"</span><span class="nt">/&gt;</span>
         <span class="nt">&lt;value</span> <span class="na">value=</span><span class="s">"2020+"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;/parameter&gt;</span>
      <span class="c">&lt;!--releaselabel should be the ballot status for HL7-published IGs.--&gt;</span>
      <span class="nt">&lt;parameter&gt;</span>
         <span class="nt">&lt;code</span> <span class="na">value=</span><span class="s">"releaselabel"</span><span class="nt">/&gt;</span>
         <span class="nt">&lt;value</span> <span class="na">value=</span><span class="s">"CI Build"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;/parameter&gt;</span>
      <span class="nt">&lt;parameter&gt;</span>
         <span class="nt">&lt;code</span> <span class="na">value=</span><span class="s">"find-other-resources"</span><span class="nt">/&gt;</span>
         <span class="nt">&lt;value</span> <span class="na">value=</span><span class="s">"true"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;/parameter&gt;</span>
      <span class="c">&lt;!--List any URLs we purposely have in our set but do not match the guides preferred URL--&gt;</span>
      <span class="nt">&lt;parameter&gt;</span>
         <span class="nt">&lt;code</span> <span class="na">value=</span><span class="s">"special-url"</span><span class="nt">/&gt;</span>
         <span class="nt">&lt;value</span> <span class="na">value=</span><span class="s">"http://decor.nictiz.nl/fhir/ValueSet/2.16.840.1.113883.2.4.3.11.60.121.11.10--20200901000000"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;/parameter&gt;</span>
</code></pre></div>



<a name="242636601"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/NPE%3A%20Cannot%20invoke%20String.equals%28Object%29%20because%20code%20is%20nul/near/242636601" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Henket <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/NPE.3A.20Cannot.20invoke.20String.2Eequals(Object).20because.20code.20is.20nul.html#242636601">(Jun 14 2021 at 17:59)</a>:</h4>
<p>I had lots of 'special-url' parameters. I've not yet seen how rewrite those (if those are still necessary)</p>



<a name="242637022"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/NPE%3A%20Cannot%20invoke%20String.equals%28Object%29%20because%20code%20is%20nul/near/242637022" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/NPE.3A.20Cannot.20invoke.20String.2Eequals(Object).20because.20code.20is.20nul.html#242637022">(Jun 14 2021 at 18:02)</a>:</h4>
<p>that's... weird. I wouldn't have thought that rendering a code system (where problem happens) is at all related to a special-url on a value set</p>



<a name="242640228"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/NPE%3A%20Cannot%20invoke%20String.equals%28Object%29%20because%20code%20is%20nul/near/242640228" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Henket <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/NPE.3A.20Cannot.20invoke.20String.2Eequals(Object).20because.20code.20is.20nul.html#242640228">(Jun 14 2021 at 18:28)</a>:</h4>
<p>Well after fixing this, new issues popped up, but not NPE. It might be a combination of factors. Resource.ids exceeding 64 characters, an xml example with a missing namesapce and then some ... I'll come back here if there's something I can't fix. So far, error between my keyboard and chair.</p>



<a name="242694662"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/NPE%3A%20Cannot%20invoke%20String.equals%28Object%29%20because%20code%20is%20nul/near/242694662" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Henket <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/NPE.3A.20Cannot.20invoke.20String.2Eequals(Object).20because.20code.20is.20nul.html#242694662">(Jun 15 2021 at 07:00)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> found the part that really made the difference:</p>
<div class="codehilite" data-code-language="XML"><pre><span></span><code><span class="nt">&lt;parameter&gt;</span>
  <span class="nt">&lt;code</span> <span class="na">value=</span><span class="s">"find-other-resources"</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;value</span> <span class="na">value=</span><span class="s">"true"</span><span class="nt">/&gt;</span>
 <span class="nt">&lt;/parameter&gt;</span>
</code></pre></div>
<p>Removing this one specifically, solves the error. I'm sure this is combined with the specific input files I have.</p>



<a name="242700260"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/NPE%3A%20Cannot%20invoke%20String.equals%28Object%29%20because%20code%20is%20nul/near/242700260" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Henket <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/NPE.3A.20Cannot.20invoke.20String.2Eequals(Object).20because.20code.20is.20nul.html#242700260">(Jun 15 2021 at 08:06)</a>:</h4>
<p>The side effect of removing this instruction seems to be that the IG Publisher does not pick up any profiles, and as such cannot validate any example.</p>



<a name="242701684"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/NPE%3A%20Cannot%20invoke%20String.equals%28Object%29%20because%20code%20is%20nul/near/242701684" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Henket <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/NPE.3A.20Cannot.20invoke.20String.2Eequals(Object).20because.20code.20is.20nul.html#242701684">(Jun 15 2021 at 08:22)</a>:</h4>
<p>Maybe that is within expectation but, this parameter yields the same error.</p>
<div class="codehilite" data-code-language="XML"><pre><span></span><code><span class="nt">&lt;parameter&gt;</span>
        <span class="nt">&lt;code</span> <span class="na">value=</span><span class="s">"autoload-resources"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;value</span> <span class="na">value=</span><span class="s">"true"</span><span class="nt">/&gt;</span>
 <span class="nt">&lt;/parameter&gt;</span>
</code></pre></div>



<a name="242702583"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/NPE%3A%20Cannot%20invoke%20String.equals%28Object%29%20because%20code%20is%20nul/near/242702583" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/NPE.3A.20Cannot.20invoke.20String.2Eequals(Object).20because.20code.20is.20nul.html#242702583">(Jun 15 2021 at 08:32)</a>:</h4>
<p>well, I'm not sure about that, but this will be fixed in the next release, due in the next 48 hours</p>



<a name="242702798"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/NPE%3A%20Cannot%20invoke%20String.equals%28Object%29%20because%20code%20is%20nul/near/242702798" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Henket <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/NPE.3A.20Cannot.20invoke.20String.2Eequals(Object).20because.20code.20is.20nul.html#242702798">(Jun 15 2021 at 08:34)</a>:</h4>
<p>Nice. Removing all Codesystem resources also does the trick until that new release 'hits the streets'</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
