---
layout: page
title: "FHIR Chat  · Differential does not have a slice error · IG creation"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/index.html">IG creation</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Differential.20does.20not.20have.20a.20slice.20error.html">Differential does not have a slice error</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="183503417"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Differential%20does%20not%20have%20a%20slice%20error/near/183503417" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Blake <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Differential.20does.20not.20have.20a.20slice.20error.html#183503417">(Dec 15 2019 at 20:39)</a>:</h4>
<p>I'm getting the following error from a profile which built without an issue a couple of IGPublisher versions ago:</p>
<p>org.hl7.fhir.exceptions.FHIRException: Unable to generate snapshot for <a href="http://fhir.health.nsw.gov.au/fhir/ehealth/itoc/v1.0/StructureDefinition/nswhealthitocmedicationstatement" target="_blank" title="http://fhir.health.nsw.gov.au/fhir/ehealth/itoc/v1.0/StructureDefinition/nswhealthitocmedicationstatement">http://fhir.health.nsw.gov.au/fhir/ehealth/itoc/v1.0/StructureDefinition/nswhealthitocmedicationstatement</a> in C:\Users\timbl\OneDrive\Documents\nsw-health-fhir-itoc\resources\nswhealthitocmedicationstatement<br>
        at org.hl7.fhir.igtools.publisher.Publisher.generateSnapshot(Publisher.java:3805)<br>
        at org.hl7.fhir.igtools.publisher.Publisher.generateSnapshots(Publisher.java:3762)<br>
        at org.hl7.fhir.igtools.publisher.Publisher.loadConformance(Publisher.java:3217)<br>
        at org.hl7.fhir.igtools.publisher.Publisher.createIg(Publisher.java:768)<br>
        at org.hl7.fhir.igtools.publisher.Publisher.execute(Publisher.java:655)<br>
        at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:6662)<br>
Caused by: org.hl7.fhir.exceptions.DefinitionException: Differential does not have a slice: MedicationStatement.medication[x].coding/ (b:22 of 56 / 6/ 11) in profile <a href="http://fhir.health.nsw.gov.au/fhir/ehealth/itoc/v1.0/StructureDefinition/nswhealthitocmedicationstatement" target="_blank" title="http://fhir.health.nsw.gov.au/fhir/ehealth/itoc/v1.0/StructureDefinition/nswhealthitocmedicationstatement">http://fhir.health.nsw.gov.au/fhir/ehealth/itoc/v1.0/StructureDefinition/nswhealthitocmedicationstatement</a><br>
        at org.hl7.fhir.r5.conformance.ProfileUtilities.processPaths(ProfileUtilities.java:945)<br>
        at org.hl7.fhir.r5.conformance.ProfileUtilities.processPaths(ProfileUtilities.java:1179)<br>
        at org.hl7.fhir.r5.conformance.ProfileUtilities.generateSnapshot(ProfileUtilities.java:492)<br>
        at org.hl7.fhir.igtools.publisher.Publisher.generateSnapshot(Publisher.java:3803)<br>
        ... 5 more</p>
<p>Profile as follows:</p>
<p>&lt;?xml version="1.0" encoding="utf-8"?&gt;<br>
&lt;StructureDefinition xmlns="<a href="http://hl7.org/fhir" target="_blank" title="http://hl7.org/fhir">http://hl7.org/fhir</a>"&gt;<br>
  &lt;id value="nswhealthitocmedicationstatement" /&gt;<br>
  &lt;url value="<a href="http://fhir.health.nsw.gov.au/fhir/ehealth/itoc/v1.0/StructureDefinition/nswhealthitocmedicationstatement" target="_blank" title="http://fhir.health.nsw.gov.au/fhir/ehealth/itoc/v1.0/StructureDefinition/nswhealthitocmedicationstatement">http://fhir.health.nsw.gov.au/fhir/ehealth/itoc/v1.0/StructureDefinition/nswhealthitocmedicationstatement</a>" /&gt;<br>
  &lt;version value="1.0.0" /&gt;<br>
  &lt;name value="NSWHealthiTOCMedicationStatement" /&gt;<br>
  &lt;status value="draft" /&gt;<br>
  &lt;date value="2019-10-29"/&gt;<br>
  &lt;publisher value="NSW eHealth" /&gt;  <br>
  &lt;fhirVersion value="4.0.1" /&gt;<br>
  &lt;kind value="resource" /&gt;<br>
  &lt;abstract value="false" /&gt;<br>
  &lt;type value="MedicationStatement" /&gt;<br>
  &lt;baseDefinition value="<a href="http://hl7.org.au/fhir/StructureDefinition/au-medicationstatement" target="_blank" title="http://hl7.org.au/fhir/StructureDefinition/au-medicationstatement">http://hl7.org.au/fhir/StructureDefinition/au-medicationstatement</a>" /&gt;<br>
  &lt;derivation value="constraint" /&gt;<br>
  &lt;differential&gt;<br>
    &lt;element id="MedicationStatement"&gt;<br>
      &lt;path value="MedicationStatement" /&gt;<br>
      &lt;short value="A record of medication being taken by a patient in an Australian healthcare context." /&gt;<br>
    &lt;/element&gt;<br>
    &lt;element id="MedicationStatement.extension:diluent"&gt;<br>
      &lt;path value="MedicationStatement.extension" /&gt;<br>
      &lt;sliceName value="diluent" /&gt;<br>
      &lt;short value="The diluent medication" /&gt;<br>
      &lt;min value="0" /&gt;<br>
      &lt;max value="1" /&gt;<br>
      &lt;type&gt;<br>
        &lt;code value="Extension" /&gt;<br>
        &lt;profile value="<a href="http://fhir.health.nsw.gov.au/fhir/ehealth/itoc/v1.0/StructureDefinition/diluent" target="_blank" title="http://fhir.health.nsw.gov.au/fhir/ehealth/itoc/v1.0/StructureDefinition/diluent">http://fhir.health.nsw.gov.au/fhir/ehealth/itoc/v1.0/StructureDefinition/diluent</a>" /&gt;<br>
      &lt;/type&gt;<br>
    &lt;/element&gt;<br>
    &lt;element id="MedicationStatement.basedOn"&gt;<br>
        &lt;path value="MedicationStatement.basedOn"/&gt;<br>
        &lt;type&gt;<br>
          &lt;code value="Reference"/&gt;<br>
          &lt;targetProfile value="http://fhir.health.nsw.gov.au/fhir/ehealth/itoc/v1.0/StructureDefinition/nswhealthitocorder"/&gt;<br>
        &lt;/type&gt;<br>
    &lt;/element&gt;<br>
    &lt;element id="MedicationStatement.category"&gt;<br>
      &lt;path value="MedicationStatement.category" /&gt;<br>
      &lt;short value="The type of medication usage. For Medication List use case use &quot;inpatient&quot;.  For Medication History use case use &quot;patientspecified&quot;." /&gt;<br>
      &lt;definition value="Indicates where type of medication statement and where the medication is expected to be consumed or administered. For Medication List use case use &quot;inpatient&quot;.  For Medication History use case use &quot;patientspecified&quot;." /&gt;<br>
      &lt;min value="1" /&gt;<br>
    &lt;/element&gt;<br>
    &lt;element id="MedicationStatement.medication[x]:medicationCodeableConcept"&gt;<br>
        &lt;path value="MedicationStatement.medication[x]"/&gt;<br>
        &lt;sliceName value="medicationCodeableConcept"/&gt;<br>
    &lt;/element&gt;      <br>
    &lt;element id="MedicationStatement.medication[x]:medicationCodeableConcept.coding:cerner"&gt;<br>
        &lt;path value="MedicationStatement.medication[x].coding"/&gt;<br>
        &lt;sliceName value="cerner"/&gt;<br>
        &lt;short value="The cerner (MULTUM) code for the medication"/&gt;            <br>
        &lt;max value="1"/&gt;<br>
    &lt;/element&gt;<br>
    &lt;element id="MedicationStatement.medication[x]:medicationCodeableConcept.coding:cerner.system"&gt;<br>
        &lt;path value="MedicationStatement.medication[x].coding.system"/&gt;<br>
        &lt;min value="1"/&gt;<br>
        &lt;fixedUri value="http://cerner.com/itoc/codes"/&gt;<br>
    &lt;/element&gt;<br>
    &lt;element id="MedicationStatement.medication[x]:medicationCodeableConcept.coding:cerner.code"&gt;<br>
        &lt;path value="MedicationStatement.medication[x].coding.code"/&gt;<br>
        &lt;short value="Cerner (MULTUM) code value" /&gt;        <br>
        &lt;min value="1"/&gt;<br>
    &lt;/element&gt;      <br>
    &lt;element id="MedicationStatement.medication[x]:medicationCodeableConcept.coding:imdsoft"&gt;<br>
        &lt;path value="MedicationStatement.medication[x].coding"/&gt;<br>
        &lt;sliceName value="imdsoft"/&gt;<br>
        &lt;short value="The MetaVision / IMDsoft code for the medication"/&gt;           <br>
        &lt;max value="1"/&gt;<br>
    &lt;/element&gt;<br>
    &lt;element id="MedicationStatement.medication[x]:medicationCodeableConcept.coding:imdsoft.system"&gt;<br>
        &lt;path value="MedicationStatement.medication[x].coding.system"/&gt;<br>
        &lt;min value="1"/&gt;<br>
        &lt;fixedUri value="http://www.imd-soft.com/itoc/codes"/&gt;<br>
    &lt;/element&gt;<br>
    &lt;element id="MedicationStatement.medication[x]:medicationCodeableConcept.coding:imdsoft.code"&gt;<br>
        &lt;path value="MedicationStatement.medication[x].coding.code"/&gt;<br>
        &lt;short value="MetaVision / IMDsoft code value" /&gt;       <br>
        &lt;min value="1"/&gt;<br>
    &lt;/element&gt;<br>
    &lt;element id="MedicationStatement.medication[x]:medicationReference"&gt;<br>
        &lt;path value="MedicationStatement.medicationReference"/&gt;<br>
        &lt;sliceName value="medicationReference"/&gt;<br>
        &lt;short value="A reference to a NSW Health iTOC Medication" /&gt;<br>
        &lt;type&gt;<br>
          &lt;code value="Reference"/&gt;<br>
          &lt;targetProfile value="http://fhir.health.nsw.gov.au/fhir/ehealth/itoc/v1.0/StructureDefinition/nswhealthitocmedication"/&gt;<br>
        &lt;/type&gt;<br>
    &lt;/element&gt;  <br>
    &lt;element id="MedicationStatement.subject"&gt;<br>
      &lt;path value="MedicationStatement.subject" /&gt;<br>
      &lt;short value="The patient who is or was taking the medication." /&gt;<br>
      &lt;definition value="The person who is/was taking the medication." /&gt;<br>
      &lt;type&gt;<br>
        &lt;code value="Reference" /&gt;<br>
        &lt;targetProfile value="<a href="http://fhir.health.nsw.gov.au/fhir/ehealth/itoc/v1.0/StructureDefinition/nswhealthitocpatient" target="_blank" title="http://fhir.health.nsw.gov.au/fhir/ehealth/itoc/v1.0/StructureDefinition/nswhealthitocpatient">http://fhir.health.nsw.gov.au/fhir/ehealth/itoc/v1.0/StructureDefinition/nswhealthitocpatient</a>" /&gt;<br>
      &lt;/type&gt;<br>
    &lt;/element&gt;</p>
<p>&lt;/differential&gt;<br>
&lt;/StructureDefinition&gt;</p>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span>  Has something changed?</p>



<a name="183503687"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Differential%20does%20not%20have%20a%20slice%20error/near/183503687" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Differential.20does.20not.20have.20a.20slice.20error.html#183503687">(Dec 15 2019 at 20:46)</a>:</h4>
<p>well, something has changed, but not that actual detail. I think of this as a discovered issue - something wasn't working before and is now, so you see this error.</p>



<a name="183503728"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Differential%20does%20not%20have%20a%20slice%20error/near/183503728" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Differential.20does.20not.20have.20a.20slice.20error.html#183503728">(Dec 15 2019 at 20:46)</a>:</h4>
<p>you need to be explicit about your slicing on coding</p>



<a name="183504210"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Differential%20does%20not%20have%20a%20slice%20error/near/183504210" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Blake <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Differential.20does.20not.20have.20a.20slice.20error.html#183504210">(Dec 15 2019 at 20:59)</a>:</h4>
<p>Not quite sure what that means?  Can you please give an example?</p>



<a name="183504836"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Differential%20does%20not%20have%20a%20slice%20error/near/183504836" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Differential.20does.20not.20have.20a.20slice.20error.html#183504836">(Dec 15 2019 at 21:13)</a>:</h4>
<p>from your sd:</p>
<div class="codehilite"><pre><span></span><span class="nt">&lt;element</span> <span class="na">id=</span><span class="s">&quot;MedicationStatement.medication[x]:medicationCodeableConcept&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;path</span> <span class="na">value=</span><span class="s">&quot;MedicationStatement.medication[x]&quot;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;sliceName</span> <span class="na">value=</span><span class="s">&quot;medicationCodeableConcept&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/element&gt;</span>
<span class="nt">&lt;element</span>
<span class="na">id=</span><span class="s">&quot;MedicationStatement.medication[x]:medicationCodeableConcept.coding:cerner&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;path</span> <span class="na">value=</span><span class="s">&quot;MedicationStatement.medication[x].coding&quot;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;sliceName</span> <span class="na">value=</span><span class="s">&quot;cerner&quot;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;short</span> <span class="na">value=</span><span class="s">&quot;The cerner (MULTUM) code for the medication&quot;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;max</span> <span class="na">value=</span><span class="s">&quot;1&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/element&gt;</span>
</pre></div>



<a name="183504840"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Differential%20does%20not%20have%20a%20slice%20error/near/183504840" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Differential.20does.20not.20have.20a.20slice.20error.html#183504840">(Dec 15 2019 at 21:13)</a>:</h4>
<p>you launched right into the cerner slice without first defining the slicing</p>



<a name="183504921"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Differential%20does%20not%20have%20a%20slice%20error/near/183504921" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Differential.20does.20not.20have.20a.20slice.20error.html#183504921">(Dec 15 2019 at 21:15)</a>:</h4>
<p>so you should have something like:</p>
<div class="codehilite"><pre><span></span>  <span class="nt">&lt;element</span> <span class="na">id=</span><span class="s">&quot;MedicationStatement.medication[x]:medicationCodeableConcept.coding&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;path</span> <span class="na">value=</span><span class="s">&quot;MedicationStatement.medication[x].coding&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;slicing&gt;</span>
        <span class="nt">&lt;discriminator&gt;</span>
          <span class="nt">&lt;type</span> <span class="na">value=</span><span class="s">&quot;value&quot;</span><span class="nt">/&gt;</span>
          <span class="nt">&lt;path</span> <span class="na">value=</span><span class="s">&quot;system&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/discriminator&gt;</span>
        <span class="nt">&lt;discriminator&gt;</span>
          <span class="nt">&lt;type</span> <span class="na">value=</span><span class="s">&quot;value&quot;</span><span class="nt">/&gt;</span>
          <span class="nt">&lt;path</span> <span class="na">value=</span><span class="s">&quot;code&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/discriminator&gt;</span>
        <span class="nt">&lt;rules</span> <span class="na">value=</span><span class="s">&quot;open&quot;</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;/slicing&gt;</span>
  <span class="nt">&lt;/element&gt;</span>
</pre></div>



<a name="183504926"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Differential%20does%20not%20have%20a%20slice%20error/near/183504926" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Differential.20does.20not.20have.20a.20slice.20error.html#183504926">(Dec 15 2019 at 21:15)</a>:</h4>
<p>in between</p>



<a name="183505337"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Differential%20does%20not%20have%20a%20slice%20error/near/183505337" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Blake <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Differential.20does.20not.20have.20a.20slice.20error.html#183505337">(Dec 15 2019 at 21:27)</a>:</h4>
<p>Okay, thanks.</p>



<a name="183795265"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Differential%20does%20not%20have%20a%20slice%20error/near/183795265" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Blake <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Differential.20does.20not.20have.20a.20slice.20error.html#183795265">(Dec 18 2019 at 22:05)</a>:</h4>
<p>Still having issues.  If I add in:</p>
<div class="codehilite"><pre><span></span>&lt;element id=&quot;MedicationStatement.medication[x]:medicationCodeableConcept.coding&quot;&gt;
  &lt;path value=&quot;MedicationStatement.medication[x].coding&quot; /&gt;
  &lt;slicing&gt;
    &lt;discriminator&gt;
      &lt;type value=&quot;value&quot; /&gt;
      &lt;path value=&quot;system&quot; /&gt;
    &lt;/discriminator&gt;
    &lt;rules value=&quot;open&quot; /&gt;
  &lt;/slicing&gt;
  &lt;short value=&quot;Medication Codes&quot; /&gt;
&lt;/element&gt;
</pre></div>


<p>I get error:</p>
<p>Stack Dump (for debugging):                                                      (00:47.0615)<br>
org.hl7.fhir.exceptions.DefinitionException: Slice encountered midway through path on MedicationStatement.medication[x].coding; profile <a href="http://fhir.health.nsw.gov.au/fhir/ehealth/itoc/v1.0/StructureDefinition/nswhealthitocmedicationstatement" target="_blank" title="http://fhir.health.nsw.gov.au/fhir/ehealth/itoc/v1.0/StructureDefinition/nswhealthitocmedicationstatement">http://fhir.health.nsw.gov.au/fhir/ehealth/itoc/v1.0/StructureDefinition/nswhealthitocmedicationstatement</a>; instance patientprofile1-medhistory-example0<br>
        at org.hl7.fhir.r5.validation.InstanceValidator.assignChildren(InstanceValidator.java:4661)<br>
        at org.hl7.fhir.r5.validation.InstanceValidator.validateElement(InstanceValidator.java:4320)<br>
        at org.hl7.fhir.r5.validation.InstanceValidator.checkChild(InstanceValidator.java:4533)<br>
        at org.hl7.fhir.r5.validation.InstanceValidator.validateElement(InstanceValidator.java:4327)<br>
        at org.hl7.fhir.r5.validation.InstanceValidator.start(InstanceValidator.java:3256)<br>
        at org.hl7.fhir.r5.validation.InstanceValidator.validateResource(InstanceValidator.java:4984)<br>
        at org.hl7.fhir.r5.validation.InstanceValidator.validateContains(InstanceValidator.java:4234)<br>
        at org.hl7.fhir.r5.validation.InstanceValidator.checkChild(InstanceValidator.java:4437)<br>
        at org.hl7.fhir.r5.validation.InstanceValidator.validateElement(InstanceValidator.java:4327)<br>
        at org.hl7.fhir.r5.validation.InstanceValidator.checkChild(InstanceValidator.java:4453)<br>
        at org.hl7.fhir.r5.validation.InstanceValidator.validateElement(InstanceValidator.java:4327)<br>
        at org.hl7.fhir.r5.validation.InstanceValidator.start(InstanceValidator.java:3235)<br>
        at org.hl7.fhir.r5.validation.InstanceValidator.validateResource(InstanceValidator.java:4984)<br>
        at org.hl7.fhir.r5.validation.InstanceValidator.validate(InstanceValidator.java:850)<br>
        at org.hl7.fhir.r5.validation.InstanceValidator.validate(InstanceValidator.java:810)<br>
        at org.hl7.fhir.igtools.publisher.Publisher.validate(Publisher.java:4031)<br>
        at org.hl7.fhir.igtools.publisher.Publisher.validate(Publisher.java:4008)<br>
        at org.hl7.fhir.igtools.publisher.Publisher.createIg(Publisher.java:775)<br>
        at org.hl7.fhir.igtools.publisher.Publisher.execute(Publisher.java:657)<br>
        at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:6689)</p>
<p>This is a derived profile.  Does that make a difference?</p>



<a name="183795283"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Differential%20does%20not%20have%20a%20slice%20error/near/183795283" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Blake <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Differential.20does.20not.20have.20a.20slice.20error.html#183795283">(Dec 18 2019 at 22:05)</a>:</h4>
<p><span class="user-mention" data-user-id="191368">@Brett Esler</span>  Thoughts?</p>



<a name="183801935"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Differential%20does%20not%20have%20a%20slice%20error/near/183801935" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Differential.20does.20not.20have.20a.20slice.20error.html#183801935">(Dec 18 2019 at 23:40)</a>:</h4>
<p>are you adding that on the first element?</p>



<a name="183803120"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Differential%20does%20not%20have%20a%20slice%20error/near/183803120" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Blake <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Differential.20does.20not.20have.20a.20slice.20error.html#183803120">(Dec 18 2019 at 23:59)</a>:</h4>
<p>Full profile here:</p>
<p>&lt;?xml version="1.0" encoding="utf-8"?&gt;<br>
&lt;StructureDefinition xmlns="<a href="http://hl7.org/fhir" target="_blank" title="http://hl7.org/fhir">http://hl7.org/fhir</a>"&gt;<br>
  &lt;id value="nswhealthitocmedicationstatement" /&gt;<br>
  &lt;url value="<a href="http://fhir.health.nsw.gov.au/fhir/ehealth/itoc/v1.0/StructureDefinition/nswhealthitocmedicationstatement" target="_blank" title="http://fhir.health.nsw.gov.au/fhir/ehealth/itoc/v1.0/StructureDefinition/nswhealthitocmedicationstatement">http://fhir.health.nsw.gov.au/fhir/ehealth/itoc/v1.0/StructureDefinition/nswhealthitocmedicationstatement</a>" /&gt;<br>
  &lt;version value="1.0.0" /&gt;<br>
  &lt;name value="NSWHealthiTOCMedicationStatement" /&gt;<br>
  &lt;status value="draft" /&gt;<br>
  &lt;date value="2019-10-29"/&gt;<br>
  &lt;publisher value="NSW eHealth" /&gt;  <br>
  &lt;fhirVersion value="4.0.1" /&gt;<br>
  &lt;kind value="resource" /&gt;<br>
  &lt;abstract value="false" /&gt;<br>
  &lt;type value="MedicationStatement" /&gt;<br>
  &lt;baseDefinition value="<a href="http://hl7.org.au/fhir/StructureDefinition/au-medicationstatement" target="_blank" title="http://hl7.org.au/fhir/StructureDefinition/au-medicationstatement">http://hl7.org.au/fhir/StructureDefinition/au-medicationstatement</a>" /&gt;<br>
  &lt;derivation value="constraint" /&gt;<br>
  &lt;differential&gt;<br>
    &lt;element id="MedicationStatement"&gt;<br>
      &lt;path value="MedicationStatement" /&gt;<br>
      &lt;short value="A record of medication being taken by a patient in an Australian healthcare context." /&gt;<br>
    &lt;/element&gt;<br>
    &lt;element id="MedicationStatement.extension:diluent"&gt;<br>
      &lt;path value="MedicationStatement.extension" /&gt;<br>
      &lt;sliceName value="diluent" /&gt;<br>
      &lt;short value="The diluent medication" /&gt;<br>
      &lt;min value="0" /&gt;<br>
      &lt;max value="1" /&gt;<br>
      &lt;type&gt;<br>
        &lt;code value="Extension" /&gt;<br>
        &lt;profile value="<a href="http://fhir.health.nsw.gov.au/fhir/ehealth/itoc/v1.0/StructureDefinition/diluent" target="_blank" title="http://fhir.health.nsw.gov.au/fhir/ehealth/itoc/v1.0/StructureDefinition/diluent">http://fhir.health.nsw.gov.au/fhir/ehealth/itoc/v1.0/StructureDefinition/diluent</a>" /&gt;<br>
      &lt;/type&gt;<br>
    &lt;/element&gt;<br>
    &lt;element id="MedicationStatement.basedOn"&gt;<br>
        &lt;path value="MedicationStatement.basedOn"/&gt;<br>
        &lt;type&gt;<br>
          &lt;code value="Reference"/&gt;<br>
          &lt;targetProfile value="http://fhir.health.nsw.gov.au/fhir/ehealth/itoc/v1.0/StructureDefinition/nswhealthitocorder"/&gt;<br>
        &lt;/type&gt;<br>
    &lt;/element&gt;<br>
    &lt;element id="MedicationStatement.category"&gt;<br>
      &lt;path value="MedicationStatement.category" /&gt;<br>
      &lt;short value="The type of medication usage. For Medication List use case use &quot;inpatient&quot;.  For Medication History use case use &quot;patientspecified&quot;." /&gt;<br>
      &lt;definition value="Indicates where type of medication statement and where the medication is expected to be consumed or administered. For Medication List use case use &quot;inpatient&quot;.  For Medication History use case use &quot;patientspecified&quot;." /&gt;<br>
      &lt;min value="1" /&gt;<br>
    &lt;/element&gt;<br>
    &lt;element id="MedicationStatement.medication[x]:medicationCodeableConcept"&gt;<br>
        &lt;path value="MedicationStatement.medication[x]"/&gt;<br>
        &lt;sliceName value="medicationCodeableConcept"/&gt;<br>
    &lt;/element&gt;<br>
    &lt;element id="MedicationStatement.medication[x]:medicationCodeableConcept.coding"&gt;<br>
      &lt;path value="MedicationStatement.medication[x].coding" /&gt;<br>
      &lt;slicing&gt;<br>
        &lt;discriminator&gt;<br>
          &lt;type value="value" /&gt;<br>
          &lt;path value="system" /&gt;<br>
        &lt;/discriminator&gt;<br>
        &lt;rules value="open" /&gt;<br>
      &lt;/slicing&gt;<br>
      &lt;short value="Medication Codes" /&gt;<br>
    &lt;/element&gt;  <br>
    &lt;element id="MedicationStatement.medication[x]:medicationCodeableConcept.coding:cerner"&gt;<br>
        &lt;path value="MedicationStatement.medication[x].coding"/&gt;<br>
        &lt;sliceName value="cerner"/&gt;<br>
        &lt;short value="The cerner (MULTUM) code for the medication"/&gt;            <br>
        &lt;max value="1"/&gt;<br>
    &lt;/element&gt;<br>
    &lt;element id="MedicationStatement.medication[x]:medicationCodeableConcept.coding:cerner.system"&gt;<br>
        &lt;path value="MedicationStatement.medication[x].coding.system"/&gt;<br>
        &lt;min value="1"/&gt;<br>
        &lt;fixedUri value="http://cerner.com/itoc/codes"/&gt;<br>
    &lt;/element&gt;<br>
    &lt;element id="MedicationStatement.medication[x]:medicationCodeableConcept.coding:cerner.code"&gt;<br>
        &lt;path value="MedicationStatement.medication[x].coding.code"/&gt;<br>
        &lt;short value="Cerner (MULTUM) code value" /&gt;        <br>
        &lt;min value="1"/&gt;<br>
    &lt;/element&gt;      <br>
    &lt;element id="MedicationStatement.medication[x]:medicationCodeableConcept.coding:imdsoft"&gt;<br>
        &lt;path value="MedicationStatement.medication[x].coding"/&gt;    <br>
        &lt;sliceName value="imdsoft"/&gt;<br>
        &lt;short value="The MetaVision / IMDsoft code for the medication"/&gt;           <br>
        &lt;max value="1"/&gt;<br>
    &lt;/element&gt;<br>
    &lt;element id="MedicationStatement.medication[x]:medicationCodeableConcept.coding:imdsoft.system"&gt;<br>
        &lt;path value="MedicationStatement.medication[x].coding.system"/&gt;<br>
        &lt;min value="1"/&gt;<br>
        &lt;fixedUri value="http://www.imd-soft.com/itoc/codes"/&gt;<br>
    &lt;/element&gt;<br>
    &lt;element id="MedicationStatement.medication[x]:medicationCodeableConcept.coding:imdsoft.code"&gt;<br>
        &lt;path value="MedicationStatement.medication[x].coding.code"/&gt;<br>
        &lt;short value="MetaVision / IMDsoft code value" /&gt;       <br>
        &lt;min value="1"/&gt;<br>
    &lt;/element&gt;<br>
    &lt;element id="MedicationStatement.medication[x]:medicationReference"&gt;<br>
        &lt;path value="MedicationStatement.medicationReference"/&gt;<br>
        &lt;sliceName value="medicationReference"/&gt;<br>
        &lt;short value="A reference to a NSW Health iTOC Medication" /&gt;<br>
        &lt;type&gt;<br>
          &lt;code value="Reference"/&gt;<br>
          &lt;targetProfile value="http://fhir.health.nsw.gov.au/fhir/ehealth/itoc/v1.0/StructureDefinition/nswhealthitocmedication"/&gt;<br>
        &lt;/type&gt;<br>
    &lt;/element&gt;  <br>
    &lt;element id="MedicationStatement.subject"&gt;<br>
      &lt;path value="MedicationStatement.subject" /&gt;<br>
      &lt;short value="The patient who is or was taking the medication." /&gt;<br>
      &lt;definition value="The person who is/was taking the medication." /&gt;<br>
      &lt;type&gt;<br>
        &lt;code value="Reference" /&gt;<br>
        &lt;targetProfile value="<a href="http://fhir.health.nsw.gov.au/fhir/ehealth/itoc/v1.0/StructureDefinition/nswhealthitocpatient" target="_blank" title="http://fhir.health.nsw.gov.au/fhir/ehealth/itoc/v1.0/StructureDefinition/nswhealthitocpatient">http://fhir.health.nsw.gov.au/fhir/ehealth/itoc/v1.0/StructureDefinition/nswhealthitocpatient</a>" /&gt;<br>
      &lt;/type&gt;<br>
    &lt;/element&gt;</p>
<p>&lt;/differential&gt;<br>
&lt;/StructureDefinition&gt;</p>



<a name="183815674"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Differential%20does%20not%20have%20a%20slice%20error/near/183815674" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Blake <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Differential.20does.20not.20have.20a.20slice.20error.html#183815674">(Dec 19 2019 at 04:35)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span>  The slicing is present on the profile from which I derive (AU Base MediciationStatement).  Does it need to be repeated in this derived profile?</p>



<a name="183820723"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Differential%20does%20not%20have%20a%20slice%20error/near/183820723" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Townley-O&#x27;Neill <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Differential.20does.20not.20have.20a.20slice.20error.html#183820723">(Dec 19 2019 at 06:44)</a>:</h4>
<p><span class="user-mention" data-user-id="191802">@Tim Blake</span> <br>
MedicationStatement.category short and definition have instances of " in their values.</p>



<a name="183821039"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Differential%20does%20not%20have%20a%20slice%20error/near/183821039" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Blake <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Differential.20does.20not.20have.20a.20slice.20error.html#183821039">(Dec 19 2019 at 06:52)</a>:</h4>
<p>I think that was Zulip.  The original has &quot;</p>



<a name="183821044"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Differential%20does%20not%20have%20a%20slice%20error/near/183821044" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Blake <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Differential.20does.20not.20have.20a.20slice.20error.html#183821044">(Dec 19 2019 at 06:52)</a>:</h4>
<p>&amp; quot;</p>



<a name="183824221"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Differential%20does%20not%20have%20a%20slice%20error/near/183824221" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Townley-O&#x27;Neill <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Differential.20does.20not.20have.20a.20slice.20error.html#183824221">(Dec 19 2019 at 08:08)</a>:</h4>
<p>Strange.</p>



<a name="183824358"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Differential%20does%20not%20have%20a%20slice%20error/near/183824358" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Blake <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Differential.20does.20not.20have.20a.20slice.20error.html#183824358">(Dec 19 2019 at 08:11)</a>:</h4>
<p>It used to build fine until some recent IG publisher changes. I need some help <span class="user-mention" data-user-id="191316">@Grahame Grieve</span>   Do you want the link to the GitHub repo?</p>



<a name="183824599"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Differential%20does%20not%20have%20a%20slice%20error/near/183824599" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Differential.20does.20not.20have.20a.20slice.20error.html#183824599">(Dec 19 2019 at 08:15)</a>:</h4>
<p>sure</p>



<a name="183826049"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Differential%20does%20not%20have%20a%20slice%20error/near/183826049" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Blake <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Differential.20does.20not.20have.20a.20slice.20error.html#183826049">(Dec 19 2019 at 08:43)</a>:</h4>
<p><a href="https://github.com/timblake78/nsw-health-itoc" target="_blank" title="https://github.com/timblake78/nsw-health-itoc">https://github.com/timblake78/nsw-health-itoc</a></p>



<a name="183834834"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Differential%20does%20not%20have%20a%20slice%20error/near/183834834" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Differential.20does.20not.20have.20a.20slice.20error.html#183834834">(Dec 19 2019 at 10:52)</a>:</h4>
<p>carumba that was a subtle one - a bug in the snapshot generator. I'm releasing a new IGPublisher</p>



<a name="183884407"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Differential%20does%20not%20have%20a%20slice%20error/near/183884407" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Blake <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Differential.20does.20not.20have.20a.20slice.20error.html#183884407">(Dec 19 2019 at 20:56)</a>:</h4>
<p>Thanks, I’ll test shortly.</p>



<a name="183890267"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Differential%20does%20not%20have%20a%20slice%20error/near/183890267" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Blake <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Differential.20does.20not.20have.20a.20slice.20error.html#183890267">(Dec 19 2019 at 22:08)</a>:</h4>
<blockquote>
<p>carumba that was a subtle one - a bug in the snapshot generator. I'm releasing a new IGPublisher</p>
</blockquote>
<p>Just keeping you on your toes <span class="user-mention" data-user-id="191316">@Grahame Grieve</span>  Thanks, builds successfully now...</p>



<a name="187821081"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Differential%20does%20not%20have%20a%20slice%20error/near/187821081" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Differential.20does.20not.20have.20a.20slice.20error.html#187821081">(Feb 10 2020 at 14:43)</a>:</h4>
<p>A SUSHI user has reported a similar (but different) issue to us <a href="https://github.com/FHIR/sushi/issues/207" target="_blank" title="https://github.com/FHIR/sushi/issues/207">here</a>.  In short, they are profiling a profile -- and more specifically, constraining an existing slice in the base profile.  SUSHI puts the specific constraint in the differential, but does <em>not</em> put the <code>sliceName</code> property in the differential (since it is not, in fact, <em>different</em> from the parent -- and our basic approach is to only put things that are actually <em>different</em> in the differential).  Unfortunately, this causes the IG Publisher to crash.  The SUSHI user reports that they think the <code>sliceName</code> needs to be included in the differential -- and that relying on the <code>id</code> to identify the existing slice in the parent is not enough for the publisher.  I couldn't find documentation around this, so just wanted to confirm before we adjust SUSHI to always spit out a <code>sliceName</code> element/property in the differential when constraining an existing slice.</p>



<a name="187822660"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Differential%20does%20not%20have%20a%20slice%20error/near/187822660" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Differential.20does.20not.20have.20a.20slice.20error.html#187822660">(Feb 10 2020 at 14:59)</a>:</h4>
<p>Correct.  The tooling does not drive off the id</p>



<a name="187824513"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Differential%20does%20not%20have%20a%20slice%20error/near/187824513" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Differential.20does.20not.20have.20a.20slice.20error.html#187824513">(Feb 10 2020 at 15:18)</a>:</h4>
<p>So is it sequence-based?  In other words, going back to the <code>sliceName</code> example -- if the tooling sees a <code>sliceName</code> in a differential element, then does it just assume that all sequentially following elements with a child path are in that slice -- until it gets to a non-child element (at which point the slicename context is cleared or reset to the next slicename if it's there)?</p>



<a name="187827736"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Differential%20does%20not%20have%20a%20slice%20error/near/187827736" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Differential.20does.20not.20have.20a.20slice.20error.html#187827736">(Feb 10 2020 at 15:49)</a>:</h4>
<p>Correct.  (It doesn't assume - that's a rule.)</p>



<a name="187851850"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Differential%20does%20not%20have%20a%20slice%20error/near/187851850" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Differential.20does.20not.20have.20a.20slice.20error.html#187851850">(Feb 10 2020 at 19:54)</a>:</h4>
<p>Lloyd is right, but I don't think it's documented well enough at the moment. There's a task to fix that up somewhere</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
