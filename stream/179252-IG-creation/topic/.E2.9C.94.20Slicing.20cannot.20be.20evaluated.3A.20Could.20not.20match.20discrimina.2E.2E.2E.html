---
layout: page
title: "FHIR Chat  · ✔ Slicing cannot be evaluated: Could not match discrimina... · IG creation"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/index.html">IG creation</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/.E2.9C.94.20Slicing.20cannot.20be.20evaluated.3A.20Could.20not.20match.20discrimina.2E.2E.2E.html">✔ Slicing cannot be evaluated: Could not match discrimina...</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="256764897"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/%E2%9C%94%20Slicing%20cannot%20be%20evaluated%3A%20Could%20not%20match%20discrimina.../near/256764897" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Abdullah Rafiqi <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/.E2.9C.94.20Slicing.20cannot.20be.20evaluated.3A.20Could.20not.20match.20discrimina.2E.2E.2E.html#256764897">(Oct 08 2021 at 16:20)</a>:</h4>
<p>Trying to resolve the following QA errors when slicing with a $this discriminator based on the <a href="http://build.fhir.org/ig/HL7/fhir-qi-core/StructureDefinition-qicore-organization.html">QI-Core Organization Profile</a> contained within the example for <a href="http://build.fhir.org/ig/HL7/fhir-qi-core/Medication-example.html">Qi-Core medication example</a>:</p>
<p><a href="/user_uploads/10155/EWGahpZyOl_xPEzcRMv18wjf/Screen-Shot-2021-10-08-at-11.01.58-AM.png">Error Report</a> </p>
<div class="message_inline_image"><a href="/user_uploads/10155/EWGahpZyOl_xPEzcRMv18wjf/Screen-Shot-2021-10-08-at-11.01.58-AM.png" title="Error Report"><img src="/user_uploads/10155/EWGahpZyOl_xPEzcRMv18wjf/Screen-Shot-2021-10-08-at-11.01.58-AM.png"></a></div><p>Slices do have fixed values for <code>system</code> but error is based on [$this] discriminator not having a  fixed value, binding or existence assertion.</p>
<div class="codehilite"><pre><span></span><code>&lt;Medication xmlns=&quot;http://hl7.org/fhir&quot;&gt;
  &lt;id value=&quot;example&quot;/&gt;
  &lt;meta&gt;
    &lt;profile
             value=&quot;http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-medication&quot;/&gt;
  &lt;/meta&gt;
  &lt;text&gt;
    &lt;status value=&quot;generated&quot;/&gt;
    &lt;div xmlns=&quot;http://www.w3.org/1999/xhtml&quot;&gt;&lt;p&gt;&lt;b&gt;Generated Narrative&lt;/b&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;code&lt;/b&gt;: &lt;span title=&quot;Codes: {http://www.nlm.nih.gov/research/umls/rxnorm 1594660}&quot;&gt;alemtuzumab 10 MG/ML [Lemtrada]&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;manufacturer&lt;/b&gt;: &lt;a name=&quot;org6&quot;&gt; &lt;/a&gt;&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;&lt;b&gt;identifier&lt;/b&gt;: id: ORG-006 (TEMP)&lt;/p&gt;&lt;p&gt;&lt;b&gt;active&lt;/b&gt;: true&lt;/p&gt;&lt;p&gt;&lt;b&gt;name&lt;/b&gt;: Genzyme&lt;/p&gt;&lt;p&gt;&lt;b&gt;telecom&lt;/b&gt;: &lt;a href=&quot;https://www.sanofigenzyme.com/&quot;&gt;https://www.sanofigenzyme.com/&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;address&lt;/b&gt;: Cambridge MA USA (WORK)&lt;/p&gt;&lt;/blockquote&gt;&lt;p&gt;&lt;b&gt;form&lt;/b&gt;: &lt;span title=&quot;Codes: {http://snomed.info/sct 385219001}&quot;&gt;Conventional release solution for injection (dose form)&lt;/span&gt;&lt;/p&gt;&lt;h3&gt;Ingredients&lt;/h3&gt;&lt;table class=&quot;grid&quot;&gt;&lt;tr&gt;&lt;td&gt;-&lt;/td&gt;&lt;td&gt;&lt;b&gt;Item[x]&lt;/b&gt;&lt;/td&gt;&lt;td&gt;&lt;b&gt;Strength&lt;/b&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;*&lt;/td&gt;&lt;td&gt;&lt;span title=&quot;Codes: {http://snomed.info/sct 129472003}&quot;&gt;Alemtuzumab (substance)&lt;/span&gt;&lt;/td&gt;&lt;td&gt;12 mg/1.2 mL&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;h3&gt;Batches&lt;/h3&gt;&lt;table class=&quot;grid&quot;&gt;&lt;tr&gt;&lt;td&gt;-&lt;/td&gt;&lt;td&gt;&lt;b&gt;LotNumber&lt;/b&gt;&lt;/td&gt;&lt;td&gt;&lt;b&gt;ExpirationDate&lt;/b&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;*&lt;/td&gt;&lt;td&gt;9494788&lt;/td&gt;&lt;td&gt;2017-05-22&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
  &lt;/text&gt;
  &lt;contained&gt;
    &lt;Organization&gt;
      &lt;id value=&quot;org6&quot;/&gt;
      &lt;meta&gt;
        &lt;profile
                 value=&quot;http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-organization&quot;/&gt;
      &lt;/meta&gt;
      &lt;identifier&gt;
        &lt;use value=&quot;temp&quot;/&gt;
        &lt;system value=&quot;urn:oid:2.16.840.1.113883.4.336&quot;/&gt;
        &lt;value value=&quot;ORG-006&quot;/&gt;
      &lt;/identifier&gt;
      &lt;active value=&quot;true&quot;/&gt;
      &lt;name value=&quot;Genzyme&quot;/&gt;
      &lt;telecom&gt;
        &lt;system value=&quot;url&quot;/&gt;
        &lt;value value=&quot;https://www.sanofigenzyme.com/&quot;/&gt;
        &lt;use value=&quot;work&quot;/&gt;
      &lt;/telecom&gt;
      &lt;address&gt;
        &lt;use value=&quot;work&quot;/&gt;
        &lt;city value=&quot;Cambridge&quot;/&gt;
        &lt;state value=&quot;MA&quot;/&gt;
        &lt;country value=&quot;USA&quot;/&gt;
      &lt;/address&gt;
    &lt;/Organization&gt;
  &lt;/contained&gt;
  &lt;code&gt;
    &lt;coding&gt;
      &lt;system value=&quot;http://www.nlm.nih.gov/research/umls/rxnorm&quot;/&gt;
      &lt;code value=&quot;1594660&quot;/&gt;
      &lt;display value=&quot;alemtuzumab 10 MG/ML [Lemtrada]&quot;/&gt;
    &lt;/coding&gt;
  &lt;/code&gt;
  &lt;manufacturer&gt;
    &lt;reference value=&quot;#org6&quot;/&gt;
  &lt;/manufacturer&gt;
  &lt;form&gt;
    &lt;coding&gt;
      &lt;system value=&quot;http://snomed.info/sct&quot;/&gt;
      &lt;code value=&quot;385219001&quot;/&gt;
      &lt;display value=&quot;Conventional release solution for injection (dose form)&quot;/&gt;
    &lt;/coding&gt;
  &lt;/form&gt;
  &lt;ingredient&gt;
    &lt;itemCodeableConcept&gt;
      &lt;coding&gt;
        &lt;system value=&quot;http://snomed.info/sct&quot;/&gt;
        &lt;code value=&quot;129472003&quot;/&gt;
        &lt;display value=&quot;Alemtuzumab (substance)&quot;/&gt;
      &lt;/coding&gt;
    &lt;/itemCodeableConcept&gt;
    &lt;strength&gt;
      &lt;numerator&gt;
        &lt;value value=&quot;12&quot;/&gt;
        &lt;system value=&quot;http://unitsofmeasure.org&quot;/&gt;
        &lt;code value=&quot;mg&quot;/&gt;
      &lt;/numerator&gt;
      &lt;denominator&gt;
        &lt;value value=&quot;1.2&quot;/&gt;
        &lt;system value=&quot;http://unitsofmeasure.org&quot;/&gt;
        &lt;code value=&quot;mL&quot;/&gt;
      &lt;/denominator&gt;
    &lt;/strength&gt;
  &lt;/ingredient&gt;
  &lt;batch&gt;
    &lt;lotNumber value=&quot;9494788&quot;/&gt;
    &lt;expirationDate value=&quot;2017-05-22&quot;/&gt;
  &lt;/batch&gt;
&lt;/Medication&gt;
</code></pre></div>



<a name="256766869"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/%E2%9C%94%20Slicing%20cannot%20be%20evaluated%3A%20Could%20not%20match%20discrimina.../near/256766869" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/.E2.9C.94.20Slicing.20cannot.20be.20evaluated.3A.20Could.20not.20match.20discrimina.2E.2E.2E.html#256766869">(Oct 08 2021 at 16:33)</a>:</h4>
<p>Two of your slices have patternIdentifier on them: NPI and CLIA.  But you haven't defined patternIdentifier on ein or ccn - and you need to.</p>



<a name="256767028"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/%E2%9C%94%20Slicing%20cannot%20be%20evaluated%3A%20Could%20not%20match%20discrimina.../near/256767028" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/.E2.9C.94.20Slicing.20cannot.20be.20evaluated.3A.20Could.20not.20match.20discrimina.2E.2E.2E.html#256767028">(Oct 08 2021 at 16:34)</a>:</h4>
<p>Having fixedUri on system doesn't help when slicing is by pattern on the identifier itself.</p>



<a name="256784201"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/%E2%9C%94%20Slicing%20cannot%20be%20evaluated%3A%20Could%20not%20match%20discrimina.../near/256784201" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Abdullah Rafiqi <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/.E2.9C.94.20Slicing.20cannot.20be.20evaluated.3A.20Could.20not.20match.20discrimina.2E.2E.2E.html#256784201">(Oct 08 2021 at 18:28)</a>:</h4>
<p>Thanks for the clarification <span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> . Would the pattenIdentifier be defined under the Patterns column within the profile spreadsheet? </p>
<p><a href="/user_uploads/10155/Yh10EXa-8U7jayV2aADOU0bc/Screen-Shot-2021-10-08-at-2.24.51-PM.png">Profile Spreadsheet</a></p>
<div class="message_inline_image"><a href="/user_uploads/10155/Yh10EXa-8U7jayV2aADOU0bc/Screen-Shot-2021-10-08-at-2.24.51-PM.png" title="Profile Spreadsheet"><img src="/user_uploads/10155/Yh10EXa-8U7jayV2aADOU0bc/Screen-Shot-2021-10-08-at-2.24.51-PM.png"></a></div>



<a name="256786882"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/%E2%9C%94%20Slicing%20cannot%20be%20evaluated%3A%20Could%20not%20match%20discrimina.../near/256786882" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/.E2.9C.94.20Slicing.20cannot.20be.20evaluated.3A.20Could.20not.20match.20discrimina.2E.2E.2E.html#256786882">(Oct 08 2021 at 18:46)</a>:</h4>
<p>Yes.  You need to specify the JSON for the Identifier pattern.</p>



<a name="256800081"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/%E2%9C%94%20Slicing%20cannot%20be%20evaluated%3A%20Could%20not%20match%20discrimina.../near/256800081" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Abdullah Rafiqi <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/.E2.9C.94.20Slicing.20cannot.20be.20evaluated.3A.20Could.20not.20match.20discrimina.2E.2E.2E.html#256800081">(Oct 08 2021 at 20:23)</a>:</h4>
<p>It worked for the organization profile (i.e. <code>{"system" : "urn:oid:2.16.840.1.113883.4.336"}</code>) but when trying to apply the same changes to the <a href="http://build.fhir.org/ig/HL7/fhir-qi-core/StructureDefinition-qicore-practitioner.html">Practitioner profile</a> spreadsheet, getting the following error when running the publisher</p>
<p><a href="/user_uploads/10155/BXZTgIcUOgcIgxIKgprOzjAe/Screen-Shot-2021-10-08-at-4.21.30-PM.png">Spreadsheet</a></p>
<div class="message_inline_image"><a href="/user_uploads/10155/BXZTgIcUOgcIgxIKgprOzjAe/Screen-Shot-2021-10-08-at-4.21.30-PM.png" title="Spreadsheet"><img src="/user_uploads/10155/BXZTgIcUOgcIgxIKgprOzjAe/Screen-Shot-2021-10-08-at-4.21.30-PM.png"></a></div><p><a href="/user_uploads/10155/BB2pOZmUvhcvcQS8e6jv-bFN/Screen-Shot-2021-10-08-at-4.14.37-PM.png">Error</a></p>
<div class="message_inline_image"><a href="/user_uploads/10155/BB2pOZmUvhcvcQS8e6jv-bFN/Screen-Shot-2021-10-08-at-4.14.37-PM.png" title="Error"><img src="/user_uploads/10155/BB2pOZmUvhcvcQS8e6jv-bFN/Screen-Shot-2021-10-08-at-4.14.37-PM.png"></a></div>



<a name="256803982"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/%E2%9C%94%20Slicing%20cannot%20be%20evaluated%3A%20Could%20not%20match%20discrimina.../near/256803982" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/.E2.9C.94.20Slicing.20cannot.20be.20evaluated.3A.20Could.20not.20match.20discrimina.2E.2E.2E.html#256803982">(Oct 08 2021 at 20:51)</a>:</h4>
<p>You need to declare the type (Identifier) on the row that declares the pattern.</p>



<a name="256803997"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/%E2%9C%94%20Slicing%20cannot%20be%20evaluated%3A%20Could%20not%20match%20discrimina.../near/256803997" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/.E2.9C.94.20Slicing.20cannot.20be.20evaluated.3A.20Could.20not.20match.20discrimina.2E.2E.2E.html#256803997">(Oct 08 2021 at 20:51)</a>:</h4>
<p>(That's a spreadsheet limitation)</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
