---
layout: page
title: "FHIR Chat  · Error: StringType cannot be cast to MarkdownType · IG creation"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/index.html">IG creation</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Error.3A.20StringType.20cannot.20be.20cast.20to.20MarkdownType.html">Error: StringType cannot be cast to MarkdownType</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="188075496"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Error%3A%20StringType%20cannot%20be%20cast%20to%20MarkdownType/near/188075496" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Townley-O&#x27;Neill <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Error.3A.20StringType.20cannot.20be.20cast.20to.20MarkdownType.html#188075496">(Feb 13 2020 at 03:42)</a>:</h4>
<p>IGPublisher 1.0.63 gives me </p>
<blockquote>
<p>Publishing Content Failed: org.hl7.fhir.r5.model.StringType cannot be cast to org.hl7.fhir.r5.model.MarkdownType</p>
</blockquote>
<p>But 1.0.62 is fine.<br>
Where do I look for the problem?</p>



<a name="188080025"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Error%3A%20StringType%20cannot%20be%20cast%20to%20MarkdownType/near/188080025" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Error.3A.20StringType.20cannot.20be.20cast.20to.20MarkdownType.html#188080025">(Feb 13 2020 at 05:43)</a>:</h4>
<p>you tell me where to look</p>



<a name="188080030"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Error%3A%20StringType%20cannot%20be%20cast%20to%20MarkdownType/near/188080030" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Error.3A.20StringType.20cannot.20be.20cast.20to.20MarkdownType.html#188080030">(Feb 13 2020 at 05:43)</a>:</h4>
<p>where is this is in the log?</p>



<a name="188081880"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Error%3A%20StringType%20cannot%20be%20cast%20to%20MarkdownType/near/188081880" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Townley-O&#x27;Neill <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Error.3A.20StringType.20cannot.20be.20cast.20to.20MarkdownType.html#188081880">(Feb 13 2020 at 06:30)</a>:</h4>
<p>$ pubN ig-dphr.json<br>
FHIR IG Publisher Version 1.0.63-SNAPSHOT (Git# 9498468512c7). Built 2020-02-13T12:58:23.27+11:00 (78 mins old)<br>
Detected Java version: 1.8.0_181 from C:\Program Files\Java\jre1.8.0_181 on amd64 (64bit). 3625MB available<br>
Parameters: -ig ig-dphr.json<br>
dir = C:\work\git\au-fhir-childhealth, path = C:\Users\richardtownleyoneill\bin;C:\Program Files\Git\mingw64\bin;C:\Program Files\Git\usr\local\bin;C:\Program Files\Git\usr\bin;C:\Program Files\Git\usr\bin;C:\Program Files\Git\mingw64\bin;C:\Program Files\Git\usr\bin;C:\Users\richardtownleyoneill\bin;C:\Python27;C:\Python27\Scripts;C:\Ruby25-x64\bin;C:\ProgramData\Oracle\Java\javapath;C:\WINDOWS\system32;C:\WINDOWS;C:\WINDOWS\System32\Wbem;C:\WINDOWS\System32\WindowsPowerShell\v1.0;C:\Program Files\Calibre2;C:\Program Files\Git\cmd;C:\Program Files\TortoiseGit\bin;C:\Users\richardtownleyoneill\AppData\Local\Microsoft\WindowsApps;C:\Program Files\Git\usr\bin\vendor_perl;C:\Program Files\Git\usr\bin\core_perl<br>
Run time = Thursday, 13 February 2020 1:17:21 PM AEST (2020-02-13T13:17:21+10:00)<br>
Package Cache: C:\Users\richardtownleyoneill\.fhir\packages                      (00:00.0237)<br>
Load Configuration from C:\work\git\au-fhir-childhealth\ig-dphr.json             (00:00.0250)<br>
Contacting Build Server...                                                       (00:00.0271)<br>
 ... done                                                                        (00:16.0987)<br>
Root directory: C:\work\git\au-fhir-childhealth                                  (00:16.0988)<br>
Terminology Cache is at C:\work\git\au-fhir-childhealth\txCache. 4 files in cache (00:26.0311)<br>
Core Package hl7.fhir.r3.core#3.0.2<br>
Installing hl7.fhir.r3.core#3.0.2 to the package cache<br>
  Fetching:.......................................................................................<br>
  Installing: ....................................................................................... done.<br>
Publishing Content Failed: org.hl7.fhir.r5.model.StringType cannot be cast to org.hl7.fhir.r5.model.MarkdownType (00:47.0851)<br>
                                                                                 (00:47.0851)<br>
Use -? to get command line help                                                  (00:47.0851)<br>
                                                                                 (00:47.0851)<br>
Stack Dump (for debugging):                                                      (00:47.0851)<br>
java.lang.ClassCastException: org.hl7.fhir.r5.model.StringType cannot be cast to org.hl7.fhir.r5.model.MarkdownType<br>
        at org.hl7.fhir.convertors.conv30_50.OperationDefinition30_50.convertOperationDefinition(OperationDefinition30_50.java:52)<br>
        at org.hl7.fhir.convertors.VersionConvertor_30_50.convertResource(VersionConvertor_30_50.java:4653)<br>
        at org.hl7.fhir.convertors.R3ToR5Loader.loadBundle(R3ToR5Loader.java:65)<br>
        at org.hl7.fhir.r5.context.SimpleWorkerContext.loadFromFileJson(SimpleWorkerContext.java:295)<br>
        at org.hl7.fhir.r5.context.SimpleWorkerContext.loadDefinitionItem(SimpleWorkerContext.java:233)<br>
        at org.hl7.fhir.r5.context.SimpleWorkerContext.loadFromPackage(SimpleWorkerContext.java:326)<br>
        at org.hl7.fhir.r5.context.SimpleWorkerContext.fromPackage(SimpleWorkerContext.java:178)<br>
        at org.hl7.fhir.igtools.publisher.SpecificationPackage.fromPackage(SpecificationPackage.java:70)<br>
        at org.hl7.fhir.igtools.publisher.Publisher.loadPack(Publisher.java:2245)<br>
        at org.hl7.fhir.igtools.publisher.Publisher.loadCorePackage(Publisher.java:2208)<br>
        at org.hl7.fhir.igtools.publisher.Publisher.initializeFromJson(Publisher.java:1784)<br>
        at org.hl7.fhir.igtools.publisher.Publisher.initialize(Publisher.java:1208)<br>
        at org.hl7.fhir.igtools.publisher.Publisher.execute(Publisher.java:659)<br>
        at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:6943)</p>



<a name="188082048"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Error%3A%20StringType%20cannot%20be%20cast%20to%20MarkdownType/near/188082048" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Error.3A.20StringType.20cannot.20be.20cast.20to.20MarkdownType.html#188082048">(Feb 13 2020 at 06:34)</a>:</h4>
<p>ok thanks</p>



<a name="188082590"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Error%3A%20StringType%20cannot%20be%20cast%20to%20MarkdownType/near/188082590" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Townley-O&#x27;Neill <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Error.3A.20StringType.20cannot.20be.20cast.20to.20MarkdownType.html#188082590">(Feb 13 2020 at 06:48)</a>:</h4>
<p>I'm building a local copy of <a href="https://github.com/hl7au/au-fhir-childhealth" target="_blank" title="https://github.com/hl7au/au-fhir-childhealth">https://github.com/hl7au/au-fhir-childhealth</a></p>



<a name="188082657"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Error%3A%20StringType%20cannot%20be%20cast%20to%20MarkdownType/near/188082657" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Townley-O&#x27;Neill <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Error.3A.20StringType.20cannot.20be.20cast.20to.20MarkdownType.html#188082657">(Feb 13 2020 at 06:50)</a>:</h4>
<p>ig-dhpr.json builds a subset of what ig.json does and builds rather faster.</p>



<a name="188086570"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Error%3A%20StringType%20cannot%20be%20cast%20to%20MarkdownType/near/188086570" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Henket <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Error.3A.20StringType.20cannot.20be.20cast.20to.20MarkdownType.html#188086570">(Feb 13 2020 at 08:27)</a>:</h4>
<p>This is the same one that I had. I've patched the code locally in OperationDefinition30_50.java line 52 from:</p>
<div class="codehilite"><pre><span></span><span class="n">tgt</span><span class="p">.</span><span class="na">setCommentElement</span><span class="p">((</span><span class="n">org</span><span class="p">.</span><span class="na">hl7</span><span class="p">.</span><span class="na">fhir</span><span class="p">.</span><span class="na">r5</span><span class="p">.</span><span class="na">model</span><span class="p">.</span><span class="na">MarkdownType</span><span class="p">)</span> <span class="n">VersionConvertor_30_50</span><span class="p">.</span><span class="na">convertType</span><span class="p">(</span><span class="n">src</span><span class="p">.</span><span class="na">getCommentElement</span><span class="p">()));</span>
</pre></div>


<p>to</p>
<div class="codehilite"><pre><span></span><span class="n">tgt</span><span class="p">.</span><span class="na">setCommentElement</span><span class="p">(</span><span class="k">new</span> <span class="n">org</span><span class="p">.</span><span class="na">hl7</span><span class="p">.</span><span class="na">fhir</span><span class="p">.</span><span class="na">r5</span><span class="p">.</span><span class="na">model</span><span class="p">.</span><span class="na">MarkdownType</span><span class="p">(</span><span class="n">src</span><span class="p">.</span><span class="na">getCommentElement</span><span class="p">().</span><span class="na">asStringValue</span><span class="p">()));</span>
</pre></div>


<p>This happened to be the only instance that needed fixing for me because my input just touched OperationDefinition.comment, but I think all String &gt; MarkDown conversions need some attention.</p>



<a name="188093268"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Error%3A%20StringType%20cannot%20be%20cast%20to%20MarkdownType/near/188093268" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Error.3A.20StringType.20cannot.20be.20cast.20to.20MarkdownType.html#188093268">(Feb 13 2020 at 10:17)</a>:</h4>
<p>Mark is working on them. I thought I had found all the ones that mattered for IG production. I'll do another release for that one</p>



<a name="188167600"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Error%3A%20StringType%20cannot%20be%20cast%20to%20MarkdownType/near/188167600" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Townley-O&#x27;Neill <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Error.3A.20StringType.20cannot.20be.20cast.20to.20MarkdownType.html#188167600">(Feb 14 2020 at 00:33)</a>:</h4>
<p>IGPublisher 1.0.64 works fine. <span aria-label="+1" class="emoji emoji-1f44d" role="img" title="+1">:+1:</span></p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
