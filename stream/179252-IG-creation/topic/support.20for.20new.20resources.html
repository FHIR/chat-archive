---
layout: page
title: "FHIR Chat  · support for new resources · IG creation"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/index.html">IG creation</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/support.20for.20new.20resources.html">support for new resources</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="234326218"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/support%20for%20new%20resources/near/234326218" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Catherine Hosage Norman <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/support.20for.20new.20resources.html#234326218">(Apr 13 2021 at 13:38)</a>:</h4>
<p>When will the newer resources like MedicinalProductDefinition and SubstanceDefinition be supported.  I am using SUSHI, see attached. Looks like it is using 4.5.0 but not finding the resources.  <a href="/user_uploads/10155/eSD1kirF4G-p8WQKD3HCz7pp/sushirun.jpg">sushirun.jpg</a></p>
<div class="message_inline_image"><a href="/user_uploads/10155/eSD1kirF4G-p8WQKD3HCz7pp/sushirun.jpg" title="sushirun.jpg"><img src="/user_uploads/10155/eSD1kirF4G-p8WQKD3HCz7pp/sushirun.jpg"></a></div>



<a name="234326683"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/support%20for%20new%20resources/near/234326683" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Pyke <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/support.20for.20new.20resources.html#234326683">(Apr 13 2021 at 13:41)</a>:</h4>
<p>If you set the dependency to "current" instead of 4.5.0, they are supported</p>



<a name="234331331"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/support%20for%20new%20resources/near/234331331" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Catherine Hosage Norman <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/support.20for.20new.20resources.html#234331331">(Apr 13 2021 at 14:07)</a>:</h4>
<p>I did that and it recognized the change to current, but it sill cannot find the paths.  <a href="/user_uploads/10155/SvRtYBajuCc8H6bP3MZgP01g/sushirun2.jpg">sushirun2.jpg</a></p>
<div class="message_inline_image"><a href="/user_uploads/10155/SvRtYBajuCc8H6bP3MZgP01g/sushirun2.jpg" title="sushirun2.jpg"><img src="/user_uploads/10155/SvRtYBajuCc8H6bP3MZgP01g/sushirun2.jpg"></a></div>



<a name="234348095"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/support%20for%20new%20resources/near/234348095" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Pyke <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/support.20for.20new.20resources.html#234348095">(Apr 13 2021 at 15:27)</a>:</h4>
<p>Is there somewhere I can see your FSH code?</p>



<a name="234348776"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/support%20for%20new%20resources/near/234348776" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/support.20for.20new.20resources.html#234348776">(Apr 13 2021 at 15:31)</a>:</h4>
<p>I can't reproduce this.  If I set the <code>fhirVersion</code> to <code>current</code>, then I am able to successfully build this FSH definition:</p>
<div class="codehilite"><pre><span></span><code>Instance: MyMedicinalProduct
InstanceOf: MedicinalProductDefinition
* name.productName = &quot;MyMedicinalProduct&quot;
* version = &quot;123&quot;
</code></pre></div>
<p>As <span class="user-mention" data-user-id="192587">@David Pyke</span> noted, it would be helpful to see your FSH in order to figure out what's really going on here.</p>



<a name="234348783"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/support%20for%20new%20resources/near/234348783" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Catherine Hosage Norman <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/support.20for.20new.20resources.html#234348783">(Apr 13 2021 at 15:31)</a>:</h4>
<p><a href="https://github.com/HL7/FHIR-us-pq-cmc">https://github.com/HL7/FHIR-us-pq-cmc</a></p>



<a name="234348963"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/support%20for%20new%20resources/near/234348963" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Catherine Hosage Norman <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/support.20for.20new.20resources.html#234348963">(Apr 13 2021 at 15:32)</a>:</h4>
<p>Got it.  I am putting the full path in. Thanks</p>



<a name="234349161"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/support%20for%20new%20resources/near/234349161" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/support.20for.20new.20resources.html#234349161">(Apr 13 2021 at 15:33)</a>:</h4>
<p>Ah yes.  You don't need to put the <code>MedicinalProductDefinition</code> bit at the front of the paths.  That's just implied.  One of the ways we make "short"hand <em>short</em>. ;-)</p>



<a name="234357174"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/support%20for%20new%20resources/near/234357174" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Catherine Hosage Norman <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/support.20for.20new.20resources.html#234357174">(Apr 13 2021 at 16:21)</a>:</h4>
<p>Sushi is happy but the IG build is not.   Where it is getting 4.6.0 I do not know. The only version setting it in sushi-config.yaml.</p>
<p>This is the result when fhirVersion: 4.5.0. is used</p>
<p>Core Package hl7.fhir.r5.core#current<br>
Installing hl7.fhir.r5.core#current to the package cache<br>
  Fetching:....................................................................<br>
  Installing: .................................................................... done.<br>
Publishing Content Failed: Error loading C:\Users\Catherine\.fhir\packages\hl7.fhir.r5.core#current\package\StructureDefinition-StructureMap.json: Unknown FHIRVersion code '4.6.0' (01:28.0110)</p>
<p>This is the result when fhirVersion: current is used.</p>
<p>Publishing Content Failed: Error Parsing File C:\PQCMC_IG_sushi\fsh-generated\resources\ImplementationGuide-hl7.fhir.us.pq-cmc.json: Unknown FHIRVersion code 'current' (00:54.0134)</p>



<a name="234365095"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/support%20for%20new%20resources/near/234365095" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Pyke <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/support.20for.20new.20resources.html#234365095">(Apr 13 2021 at 17:09)</a>:</h4>
<p>I think that error is misleading.  You've got Version set to current, that should be 0.1.0 (or less).  See if that clears it up</p>



<a name="234371732"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/support%20for%20new%20resources/near/234371732" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Catherine Hosage Norman <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/support.20for.20new.20resources.html#234371732">(Apr 13 2021 at 17:51)</a>:</h4>
<p>version: 0.1.0<br>
fhirVersion: 4.5.0 <br>
in sushi-config results in:</p>
<p>Core Package hl7.fhir.r5.core#current<br>
Publishing Content Failed: Error loading C:\Users\Catherine\.fhir\packages\hl7.fhir.r5.core#current\package\StructureDefinition-StructureMap.json: Unknown FHIRVersion code '4.6.0' (00:10.0062)</p>
<p>version: 0.1.0<br>
fhirVersion: current<br>
in sushi-config results in:<br>
java.lang.Exception: Error Parsing File C:\PQCMC_IG_sushi\fsh-generated\resources\ImplementationGuide-hl7.fhir.us.pq-cmc.json: Unknown FHIRVersion code 'current'</p>



<a name="234380182"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/support%20for%20new%20resources/near/234380182" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/support.20for.20new.20resources.html#234380182">(Apr 13 2021 at 18:48)</a>:</h4>
<p>Ah shoot.  This is sounding too familiar.  I feel like there is another thread somewhere about the IG Publisher not supporting the "current" FHIR build.  I feel like it used to work, but I'm afraid it does not seem to work any longer (or I am crazy and it never worked).  I'll try to dig up that thread (I think it was recent).</p>
<p>Grahame just announced that 4.6.0 is posted, but apparently it is not available in the registry yet.  <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> -- should we expect to be able to get the 4.6.0 package from the FHIR registry at some point soon?  And what about R4B? I can't seem to find that in the registry either...</p>



<a name="234382524"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/support%20for%20new%20resources/near/234382524" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/support.20for.20new.20resources.html#234382524">(Apr 13 2021 at 19:03)</a>:</h4>
<p><span class="user-mention" data-user-id="197370">@Catherine Hosage Norman</span> -- I found the <a href="#narrow/stream/179165-committers/topic/Cached.20R5.20.23dev.20packages.3F/near/232312671">thread about depending on current build of FHIR Core in IGs</a>.  Unfortunately, it seems it is not possible with the IG Publisher -- and I don't see any workarounds for it. I also don't know if it is something that the IG Publisher will ever support.  We should probably remove support for <code>fhirVersion: current</code> from SUSHI (or issue a very significant warning if someone tries it).  I'm sorry about that.  If/when 4.6.0 is available in the registry (and supported by IG Publisher), I'd expect that to work.</p>



<a name="234383478"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/support%20for%20new%20resources/near/234383478" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Catherine Hosage Norman <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/support.20for.20new.20resources.html#234383478">(Apr 13 2021 at 19:08)</a>:</h4>
<p>Thanks for digging.  I will continue building the IG on the SUSHI side in hopes that this will resolve.  We are trying to get a document out to industry and would prefer not writing the differential trees in Word.</p>



<a name="234384862"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/support%20for%20new%20resources/near/234384862" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/support.20for.20new.20resources.html#234384862">(Apr 13 2021 at 19:18)</a>:</h4>
<p><span class="user-mention" data-user-id="197370">@Catherine Hosage Norman</span> -- I just tried this w/ <code>fhirVersion: 4.5.0</code> and everything worked well (SUSHI and IG Publisher).  As long as you don't need anything that changed post-4.5.0, I think you might be OK for now.  Then if/when 4.6.0 is available, you could try switching to that.</p>
<p>Can you try it again?  I would suggest that you:</p>
<ul>
<li>set <code>fhirVersion: 4.5.0</code> in <code>sushi-config.yaml</code></li>
<li>delete <code>output</code> and <code>temp</code> folders (to make sure no artifacts from previous attempts interfere)</li>
<li>run <code>_updatePublisher</code> to ensure you have the latest IG Publisher</li>
</ul>



<a name="234395328"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/support%20for%20new%20resources/near/234395328" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/support.20for.20new.20resources.html#234395328">(Apr 13 2021 at 20:30)</a>:</h4>
<p>OK.  This was really bugging me, so I kept on digging.  I checked out your repo from GitHub and confirmed that it was not working.  I then updated the <code>sushi-config.yaml</code> so it used this <code>version</code> and <code>fhirVersion</code>:</p>
<div class="codehilite"><pre><span></span><code>version: 0.1.0
fhirVersion: 4.5.0
</code></pre></div>
<p>After that, the IG Publisher gave me this error:</p>
<blockquote>
<p>Publishing Content Failed: Error loading /Users/cmoesel/.fhir/packages/hl7.fhir.r5.core#current/package/ConceptMap-101.json: property identifier is a class com.google.gson.JsonArray looking for an object (00:20.0162)</p>
</blockquote>
<p>You don't use <code>ConceptMap</code>, so I thought that was kind of weird.  It's also weird because <code>ConceptMap.identifier</code> should be an array, so I don't know why the IG Publisher is expecting it to be an object.  <span class="user-mention" data-user-id="191316">@Grahame Grieve</span>?</p>
<p>After some experimentation, I found that it would work if I commented out (or deleted) all of the FSH CodeSystem and ValueSet definitions.  After doing that, I got a good build.  I know that's probably not a viable solution, but it seems to be the only solution that currently works.</p>



<a name="234433136"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/support%20for%20new%20resources/near/234433136" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Catherine Hosage Norman <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/support.20for.20new.20resources.html#234433136">(Apr 14 2021 at 02:47)</a>:</h4>
<p>Well that is stranger still.  Jean Duteau said there would be no support for R4b until after the ballot.  I did write a differential tree in Word today. I have a deadline.</p>



<a name="234434469"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/support%20for%20new%20resources/near/234434469" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/support.20for.20new.20resources.html#234434469">(Apr 14 2021 at 03:07)</a>:</h4>
<p>To be clear, I said that I didn't expect full R4B support in the IG publisher until after R4B has been published.</p>



<a name="234495311"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/support%20for%20new%20resources/near/234495311" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/support.20for.20new.20resources.html#234495311">(Apr 14 2021 at 13:10)</a>:</h4>
<p><span class="user-mention" data-user-id="191469">@Chris Moesel</span> I think the reason for the confusion with <code>ConceptMap.identifier</code> being an array vs. object is most likely because the max cardinality of <code>identifier</code> was changed from 1 to * in the StructureDefinition in the CI build on March 29, but those changes weren't carried through to the supporting org.hl7.fhir.core project which builds the validator and publisher.  So the StructureDefinition says it's an array, but the publisher/validator is still looking for an object.  I'm pretty sure that's why we would be seeing this behavior.  <span class="user-mention" data-user-id="191316">@Grahame Grieve</span>?</p>



<a name="234497769"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/support%20for%20new%20resources/near/234497769" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/support.20for.20new.20resources.html#234497769">(Apr 14 2021 at 13:25)</a>:</h4>
<p>So (assuming that's correct) more work needs to be done in the FHIR model (and other subprojects) in org.hl7.fhir.core.  And doing that typically is far from trivial.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
