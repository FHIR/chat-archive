---
layout: page
title: "FHIR Chat  · Types must be unique (code vs Coding) · IG creation"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/index.html">IG creation</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Types.20must.20be.20unique.20(code.20vs.20Coding).html">Types must be unique (code vs Coding)</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153983799"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Types%20must%20be%20unique%20%28code%20vs%20Coding%29/near/153983799" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Types.20must.20be.20unique.20(code.20vs.20Coding).html#153983799">(Aug 08 2018 at 20:32)</a>:</h4>
<p>The IG Publisher is reporting the following error for one of our logical model structure definitions:</p>
<blockquote>
<p>Types must be unique by the combination of code and profile [type.select(code&amp;profile&amp;targetProfile).isDistinct()]</p>
</blockquote>
<p>When I look at the element it refers to, however, the codes <em>are</em> unique:</p>
<div class="codehilite"><pre><span></span>&quot;type&quot; : [
  {
    &quot;code&quot; : &quot;code&quot;
  },
  {
    &quot;code&quot; : &quot;Coding&quot;
  }
],
</pre></div>


<p>Now you can argue that maybe allowing a choice between a <code>code</code> and a <code>Coding</code> isn't a great idea, but... I don't understand why this invariant is getting triggered since they are technically unique.  Is there special logic in the invariant processing that treats <code>code</code> and <code>Coding</code> the same?</p>



<a name="153983802"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Types%20must%20be%20unique%20%28code%20vs%20Coding%29/near/153983802" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Types.20must.20be.20unique.20(code.20vs.20Coding).html#153983802">(Aug 08 2018 at 20:33)</a>:</h4>
<p>no special logic. It doesn't look right to me either</p>



<a name="153983804"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Types%20must%20be%20unique%20%28code%20vs%20Coding%29/near/153983804" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Types.20must.20be.20unique.20(code.20vs.20Coding).html#153983804">(Aug 08 2018 at 20:36)</a>:</h4>
<p>OK.  Thanks for the confirmation.  There must be something else going on.  I'll dig in a little more.  Although this whole model only has two elements (it's kind of a silly one) -- so there's not much I could have missed!</p>



<a name="153983878"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Types%20must%20be%20unique%20%28code%20vs%20Coding%29/near/153983878" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Types.20must.20be.20unique.20(code.20vs.20Coding).html#153983878">(Aug 08 2018 at 21:37)</a>:</h4>
<p>We may have an internal rule that prohibits that combination as it's a nonsensical thing to do, but the error message could be better.</p>



<a name="153983880"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Types%20must%20be%20unique%20%28code%20vs%20Coding%29/near/153983880" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Types.20must.20be.20unique.20(code.20vs.20Coding).html#153983880">(Aug 08 2018 at 21:37)</a>:</h4>
<p>If you're going to support Coding, there's never a reason to allow 'code'.</p>



<a name="153983934"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Types%20must%20be%20unique%20%28code%20vs%20Coding%29/near/153983934" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Types.20must.20be.20unique.20(code.20vs.20Coding).html#153983934">(Aug 08 2018 at 23:17)</a>:</h4>
<p>can I reproduce this easily?</p>



<a name="153983942"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Types%20must%20be%20unique%20%28code%20vs%20Coding%29/near/153983942" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Types.20must.20be.20unique.20(code.20vs.20Coding).html#153983942">(Aug 09 2018 at 00:02)</a>:</h4>
<p>I hear you <span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span>.  I agree it's probably a silly thing to do.  I haven't yet asked <em>why</em> we're doing it.  The error message just surprised me.</p>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> -- I expect you can repro it by simply creating a logical model with an element that has a choice between <code>code</code> and <code>Coding</code>.  But if you want to reproduce it with existing code, you can build <a href="https://github.com/HL7/us-breastcancer" target="_blank" title="https://github.com/HL7/us-breastcancer">US BreastCancer</a> and look at the <a href="http://build.fhir.org/ig/HL7/us-breastcancer/StructureDefinition-cimi-element-Status-model.html" target="_blank" title="http://build.fhir.org/ig/HL7/us-breastcancer/StructureDefinition-cimi-element-Status-model.html">cimi-element-Status-model</a>.  BUT... perhaps I should find out if it's really <em>necessary</em> for us to create a choice between a <code>code</code> and a <code>Coding</code> before you chase this down too far?</p>



<a name="153983944"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Types%20must%20be%20unique%20%28code%20vs%20Coding%29/near/153983944" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Types.20must.20be.20unique.20(code.20vs.20Coding).html#153983944">(Aug 09 2018 at 00:16)</a>:</h4>
<p>well, I'm looking at stuff like this today anyway, and I while agree that the choice reflects a bad understanding of terminology (or what can go wrong) it still looks like an infrastructural problem to me</p>



<a name="153983945"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Types%20must%20be%20unique%20%28code%20vs%20Coding%29/near/153983945" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Types.20must.20be.20unique.20(code.20vs.20Coding).html#153983945">(Aug 09 2018 at 00:26)</a>:</h4>
<p>OK.  In looking at it further, I suspect the model was done this way to allow it to be easily mapped onto resource properties that might be <code>code</code> or <code>Coding</code> (or <code>CodeableConcept</code>, but we supress that for a different reason).  So it's probably more of a side-effect of a tooling approach than an intentional decision about the model.  That said, I think we can find another way.</p>



<a name="153983946"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Types%20must%20be%20unique%20%28code%20vs%20Coding%29/near/153983946" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Types.20must.20be.20unique.20(code.20vs.20Coding).html#153983946">(Aug 09 2018 at 00:27)</a>:</h4>
<p>there might be some sense in that somewhere</p>



<a name="153983987"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Types%20must%20be%20unique%20%28code%20vs%20Coding%29/near/153983987" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Types.20must.20be.20unique.20(code.20vs.20Coding).html#153983987">(Aug 09 2018 at 03:01)</a>:</h4>
<p><span class="user-mention" data-user-id="191469">@Chris Moesel</span> this is what I see:</p>
<div class="codehilite"><pre><span></span>&quot;type&quot;: [
          {
            &quot;code&quot;: &quot;code&quot;
          },
          {
            &quot;code&quot;: &quot;Coding&quot;
          },
          {
            &quot;code&quot;: &quot;Coding&quot;
          }
        ],
</pre></div>


<p>That will fail the test, no doubt</p>



<a name="153983990"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Types%20must%20be%20unique%20%28code%20vs%20Coding%29/near/153983990" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Types.20must.20be.20unique.20(code.20vs.20Coding).html#153983990">(Aug 09 2018 at 03:09)</a>:</h4>
<p>Oh no.  If that's what's really there then I feel like a moron.  I am sorry.</p>



<a name="153983994"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Types%20must%20be%20unique%20%28code%20vs%20Coding%29/near/153983994" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Types.20must.20be.20unique.20(code.20vs.20Coding).html#153983994">(Aug 09 2018 at 03:13)</a>:</h4>
<p>Ugh.  You're right.  I was looking at the JSON linked from the IG (<a href="http://build.fhir.org/ig/HL7/us-breastcancer/StructureDefinition-cimi-element-Status-model.json" target="_blank" title="http://build.fhir.org/ig/HL7/us-breastcancer/StructureDefinition-cimi-element-Status-model.json">http://build.fhir.org/ig/HL7/us-breastcancer/StructureDefinition-cimi-element-Status-model.json</a>).  I didn't realize that was a _sanitized_ version of what the source actually was (<a href="https://github.com/HL7/us-breastcancer/blob/master/resources/structuredefinition-cimi-element-Status-model.json" target="_blank" title="https://github.com/HL7/us-breastcancer/blob/master/resources/structuredefinition-cimi-element-Status-model.json">https://github.com/HL7/us-breastcancer/blob/master/resources/structuredefinition-cimi-element-Status-model.json</a>).  I learned something today and I <em>hope</em> I did not waste much of your time, <span class="user-mention" data-user-id="191316">@Grahame Grieve</span>!</p>



<a name="153983995"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Types%20must%20be%20unique%20%28code%20vs%20Coding%29/near/153983995" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Types.20must.20be.20unique.20(code.20vs.20Coding).html#153983995">(Aug 09 2018 at 03:14)</a>:</h4>
<p>found it straight away, so no time lost</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
