---
layout: page
title: "FHIR Chat  · validation of transaction bundle · IG creation"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/index.html">IG creation</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/validation.20of.20transaction.20bundle.html">validation of transaction bundle</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="154020659"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/validation%20of%20transaction%20bundle/near/154020659" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Reinhold <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/validation.20of.20transaction.20bundle.html#154020659">(Nov 24 2018 at 10:16)</a>:</h4>
<p>I am getting these warnings on a transaction bundle which I don't think should happen:</p>
<div class="codehilite"><pre><span></span>Bundle/bundle-continuousnonin: Bundle.entry[6].resource.subject warning URN reference is not locally contained within the bundle Patient/sisansarahId.1.2.3.4.5.6.7.8.10
Bundle/bundle-continuousnonin: Bundle.entry[6].resource.device  warning URN reference is not locally contained within the bundle Device/74E8FFFEFF051C00.001C05FFE874
</pre></div>


<p>The reason is that those resources have been previously uploaded to the server and do not need to be uploaded again. When the server resolves the transaction the resources will be found. If the resources are not found on the server, the transaction of the bundle will fail in its entirety.</p>



<a name="154020668"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/validation%20of%20transaction%20bundle/near/154020668" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/validation.20of.20transaction.20bundle.html#154020668">(Nov 24 2018 at 20:08)</a>:</h4>
<p>They are warnings, not errors.  If the intention is that the referenced instances are external to the bundle, you can add the warnings to the list of messages to suppress</p>



<a name="154020713"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/validation%20of%20transaction%20bundle/near/154020713" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Reinhold <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/validation.20of.20transaction.20bundle.html#154020713">(Nov 25 2018 at 13:15)</a>:</h4>
<blockquote>
<p>They are warnings, not errors.  If the intention is that the referenced instances are external to the bundle, you can add the warnings to the list of messages to suppress</p>
</blockquote>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> True, but I am getting errors like this:</p>
<div class="codehilite"><pre><span></span>Unable to resolve resource &#39;Observation/urn:oid:3.14159.20181120075654&#39;
</pre></div>


<p>However, the resource does exist in the Bundle but it is a temporary id and therefore is not present in the id element of the resource but in the fullUrl. That is my understanding of how temp ids in a Bundle are to be. If it is supposed to be in the id element, that is a problem in HAPI FHIR that needs to be fixed. In the code I put the temp id in the id element, and HAPI FHIR removes it and puts it in the fullURL.</p>



<a name="154020722"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/validation%20of%20transaction%20bundle/near/154020722" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/validation.20of.20transaction.20bundle.html#154020722">(Nov 25 2018 at 16:44)</a>:</h4>
<p>"Observation/urn:oid:3.1...." is not a legal FHIR URL.  "urn:oid" is the first part of a full URL and you're trying to embed it as part of the id in a relative URL.  You need to either say "urn:oid:3.14159...." or "Observation/3.14159....."</p>



<a name="154020730"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/validation%20of%20transaction%20bundle/near/154020730" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Reinhold <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/validation.20of.20transaction.20bundle.html#154020730">(Nov 25 2018 at 20:02)</a>:</h4>
<blockquote>
<p>"Observation/urn:oid:3.1...." is not a legal FHIR URL.  "urn:oid" is the first part of a full URL and you're trying to embed it as part of the id in a relative URL.  You need to either say "urn:oid:3.14159...." or "Observation/3.14159....."</p>
</blockquote>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span>  Thanks for that. Can you point me to where this is documented. I see the name has been changed from temporary id to conditional id. There are not any Bundle examples that reference a resource with a conditional id that is already in the Bundle. I assume the 'urn:oid:' is still present in order to indicate that it is a conditional id.</p>



<a name="154020734"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/validation%20of%20transaction%20bundle/near/154020734" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/validation.20of.20transaction.20bundle.html#154020734">(Nov 25 2018 at 21:49)</a>:</h4>
<p>If you use Observation/[x], the [x] must be the resource id.  That's explained on the references.html.  Typically for temporary ids you wouldn't use OIDs, you'd use UUIDs.  OIDs are generally more permanent</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
