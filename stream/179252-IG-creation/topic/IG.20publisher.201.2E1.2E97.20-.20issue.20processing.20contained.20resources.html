---
layout: page
title: "FHIR Chat  · IG publisher 1.1.97 - issue processing contained resources · IG creation"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/index.html">IG creation</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20publisher.201.2E1.2E97.20-.20issue.20processing.20contained.20resources.html">IG publisher 1.1.97 - issue processing contained resources</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="268793477"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20publisher%201.1.97%20-%20issue%20processing%20contained%20resources/near/268793477" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Eastwood <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20publisher.201.2E1.2E97.20-.20issue.20processing.20contained.20resources.html#268793477">(Jan 21 2022 at 04:04)</a>:</h4>
<p>Hi, working with the <a href="https://github.com/hl7au/au-fhir-base">HL7 Australia Base IG</a> and am getting a failure to build (ie not completing) with IG Publisher v1.1.97 but not so using v1.1.96 or earlier.<br>
The problem is with one of the example instances - the only one that has contained resources - and when this is commented out from the ig.xml, v1.1.97 runs successfully.<br>
Error messages indicate that the contained resources are being sought as individual instances rather than as being included in the example.</p>
<p><em>The example</em>: <a href="https://github.com/hl7au/au-fhir-base/blob/master/examples/list-0ebc46a8-4ea8-11e9-8647-d663bd873d93.xml">https://github.com/hl7au/au-fhir-base/blob/master/examples/list-0ebc46a8-4ea8-11e9-8647-d663bd873d93.xml</a></p>
<p><em>Failure build log</em>: <a href="http://build.fhir.org/ig/hl7au/au-fhir-base/branches/master/failure/build.log">http://build.fhir.org/ig/hl7au/au-fhir-base/branches/master/failure/build.log</a>, indicating:</p>
<blockquote>
<p>Could not locate the included file 'Encounter-28060b9a-4ffb-11e9-8647-d663bd873d93-html.xhtml' in any of ...</p>
</blockquote>
<p>Also note that the build log reports</p>
<blockquote>
<p>Error Generating Narrative for MedicationUsage/7e6620b8-4ea9-11e9-8647-d663bd873d93: Cannot find definition for MedicationUsage</p>
</blockquote>
<ul>
<li>this is a R4 IG </li>
<li>the <code>id</code> reported is one of the contained MedicationStatements in the same example</li>
<li>there are 5 errors like this for the 5 contained MedicationStatements </li>
</ul>
<p>I have modified the example numerous ways with no impact to the build failure. And looking at the <a href="https://github.com/HL7/fhir-ig-publisher/releases/tag/1.1.97">release notes for the v1.1.97 publisher</a> there has been some recent attention to "Renderer: Create index for contained files" - so posting here to seek guidance whether this is a publisher issue.</p>



<a name="268793734"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20publisher%201.1.97%20-%20issue%20processing%20contained%20resources/near/268793734" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Eastwood <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20publisher.201.2E1.2E97.20-.20issue.20processing.20contained.20resources.html#268793734">(Jan 21 2022 at 04:10)</a>:</h4>
<p>fyi <span class="user-mention" data-user-id="191368">@Brett Esler</span> <span class="user-mention" data-user-id="191367">@Brian Postlethwaite</span></p>



<a name="268793766"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20publisher%201.1.97%20-%20issue%20processing%20contained%20resources/near/268793766" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20publisher.201.2E1.2E97.20-.20issue.20processing.20contained.20resources.html#268793766">(Jan 21 2022 at 04:11)</a>:</h4>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span>  does this look like the same issue that you were dealing with in the SDC IG?<br>
(or possibly related to the fix that was being done for it?)</p>



<a name="268796997"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20publisher%201.1.97%20-%20issue%20processing%20contained%20resources/near/268796997" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20publisher.201.2E1.2E97.20-.20issue.20processing.20contained.20resources.html#268796997">(Jan 21 2022 at 05:09)</a>:</h4>
<p>The SDC IG wasn't and still isn't failing.  There was a recent fix.  But it shouldn't have done anything that would trigger a failure.  <br>
<span class="user-mention" data-user-id="192270">@Rob Eastwood</span>, can you provide a full stack trace?</p>



<a name="268800694"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20publisher%201.1.97%20-%20issue%20processing%20contained%20resources/near/268800694" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Eastwood <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20publisher.201.2E1.2E97.20-.20issue.20processing.20contained.20resources.html#268800694">(Jan 21 2022 at 06:16)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191320">Lloyd McKenzie</span> <a href="#narrow/stream/179252-IG-creation/topic/IG.20publisher.201.2E1.2E97.20-.20issue.20processing.20contained.20resources/near/268796997">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="192270">Rob Eastwood</span>, can you provide a full stack trace?</p>
</blockquote>
<p>Note that on my local machine running the IG Publisher, it just hangs at "Jekyll: Generating..." and progresses no further; I have to kill the process. The following stack trace was generated using jstack at the point of 5 mins or so  into the hang. Others in my team get the error as demonstrated in the build.log link above. </p>
<p>GitHub gist: <a href="https://gist.github.com/robeastwood-agency/94c65fe37e7e41267fe7d5ba9aca5513">https://gist.github.com/robeastwood-agency/94c65fe37e7e41267fe7d5ba9aca5513</a></p>
<p>(caveat - my first attempt getting stack trace &amp; happy to be poked in another direction as needed)</p>
<p>Many thanks for looking into this <span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span></p>



<a name="269061727"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20publisher%201.1.97%20-%20issue%20processing%20contained%20resources/near/269061727" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20publisher.201.2E1.2E97.20-.20issue.20processing.20contained.20resources.html#269061727">(Jan 24 2022 at 05:29)</a>:</h4>
<p><span class="user-mention" data-user-id="192270">@Rob Eastwood</span> still an issue I expect?<br>
I might get a chance to look later in the week.</p>



<a name="269063001"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20publisher%201.1.97%20-%20issue%20processing%20contained%20resources/near/269063001" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Eastwood <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20publisher.201.2E1.2E97.20-.20issue.20processing.20contained.20resources.html#269063001">(Jan 24 2022 at 05:58)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191367">Brian Postlethwaite</span> <a href="#narrow/stream/179252-IG-creation/topic/IG.20publisher.201.2E1.2E97.20-.20issue.20processing.20contained.20resources/near/269061727">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="192270">Rob Eastwood</span> still an issue I expect?</p>
</blockquote>
<p>Yes, still an issue for me</p>



<a name="269138032"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20publisher%201.1.97%20-%20issue%20processing%20contained%20resources/near/269138032" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20publisher.201.2E1.2E97.20-.20issue.20processing.20contained.20resources.html#269138032">(Jan 24 2022 at 17:14)</a>:</h4>
<p>I grabbed the IG from Git and ran it.  Jekyll failed with the following:<br>
Jekyll: Source: C:/Users/lloyd/Documents/SVN/_IGs/_other/au-fhir-base/temp       (06:38.0772)<br>
Jekyll: Generating...                                                            (06:38.0774)<br>
Jekyll has failed. Complete output from running Jekyll: ←[31m  Liquid Exception: Could not locate the included file 'Encounter-28060b9a-4ffb-11e9-8647-d663bd873d93-html.xhtml' in any of ["C:/Users/lloyd/Documents/SVN/_IGs/_other/au-fhir-base/temp/_includes"]. Ensure it exists in one of those directories and, if (06:56.0544)<br>
Note: Check that Jekyll is installed correctly                                   (06:56.0549)<br>
Publishing Content Failed: Process exited with an error: 1 (Exit value: 1)       (06:56.0558)</p>



<a name="269519828"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20publisher%201.1.97%20-%20issue%20processing%20contained%20resources/near/269519828" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20publisher.201.2E1.2E97.20-.20issue.20processing.20contained.20resources.html#269519828">(Jan 27 2022 at 03:00)</a>:</h4>
<p>is this fixed then?</p>



<a name="269521536"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20publisher%201.1.97%20-%20issue%20processing%20contained%20resources/near/269521536" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20publisher.201.2E1.2E97.20-.20issue.20processing.20contained.20resources.html#269521536">(Jan 27 2022 at 03:31)</a>:</h4>
<p>I don't know - but the issue seemed to be a problem with the IG.</p>



<a name="270138289"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20publisher%201.1.97%20-%20issue%20processing%20contained%20resources/near/270138289" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Eastwood <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20publisher.201.2E1.2E97.20-.20issue.20processing.20contained.20resources.html#270138289">(Feb 01 2022 at 01:47)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191316">Grahame Grieve</span> <a href="#narrow/stream/179252-IG-creation/topic/IG.20publisher.201.2E1.2E97.20-.20issue.20processing.20contained.20resources/near/269519828">said</a>:</p>
<blockquote>
<p>is this fixed then?</p>
</blockquote>
<p>(sorry, I have been on leave for a few days)</p>
<p>No, not yet fixed:</p>
<p>Build details:</p>
<ul>
<li>HL7 Australia AU Base 2 IG, latest master commit <a href="https://github.com/hl7au/au-fhir-base/commit/3111965a7bc3e33364d8265f9485fdb2f0d2aad2">#3111965a7</a></li>
<li>using <a href="https://github.com/HL7/fhir-ig-publisher/releases/tag/1.1.97">IG Publisher v1.1.97</a></li>
<li>fresh build manually triggered for <a href="http://build.fhir.org">build.fhir.org</a> (using instructions <a href="https://github.com/FHIR/auto-ig-builder/blob/master/README.md#if-you-want-to-manually-trigger-a-build">here</a>), with the resultant <a href="http://build.fhir.org/ig/hl7au/au-fhir-base/branches/master/failure/build.log">failure build.log</a> including this:</li>
</ul>
<div class="codehilite"><pre><span></span><code>Jekyll has failed. Complete output from running Jekyll: [31m  Liquid Exception: Could not locate the included file &#39;Encounter-28060b9a-4ffb-11e9-8647-d663bd873d93-html.xhtml&#39; in any of [&quot;/scratch/ig-build-temp-YZMUH0/repo/temp/_includes&quot;]. Ensure it exists in one of those directories and, if it is a symlink, d (04:33.0448)
Note: Check that Jekyll is installed correctly                                   (04:33.0448)
Publishing Content Failed: Process exited with an error: 1 (Exit value: 1)       (04:33.0449)
                                                                                 (04:33.0449)
Use -? to get command line help                                                  (04:33.0449)
                                                                                 (04:33.0449)
Stack Dump (for debugging):                                                      (04:33.0449)
org.apache.commons.exec.ExecuteException: Process exited with an error: 1 (Exit value: 1)
    at org.apache.commons.exec.DefaultExecutor.executeInternal(DefaultExecutor.java:404)
    at org.apache.commons.exec.DefaultExecutor.execute(DefaultExecutor.java:166)
    at org.apache.commons.exec.DefaultExecutor.execute(DefaultExecutor.java:153)
    at org.hl7.fhir.igtools.publisher.Publisher.runJekyll(Publisher.java:6053)
    at org.hl7.fhir.igtools.publisher.Publisher.runTool(Publisher.java:5974)
    at org.hl7.fhir.igtools.publisher.Publisher.generate(Publisher.java:5335)
    at org.hl7.fhir.igtools.publisher.Publisher.createIg(Publisher.java:960)
    at org.hl7.fhir.igtools.publisher.Publisher.execute(Publisher.java:798)
    at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:9079)
</code></pre></div>
<p>The build.log also reports an inability to find MedicationUsage instances with ids that are only are included as references to contained MedicationStatements in a List example (see <a href="https://github.com/hl7au/au-fhir-base/blob/master/examples/list-0ebc46a8-4ea8-11e9-8647-d663bd873d93.xml#L452">this</a> and <a href="https://github.com/hl7au/au-fhir-base/blob/master/examples/list-0ebc46a8-4ea8-11e9-8647-d663bd873d93.xml#L147-L160">this</a>). When the List example is excluded from being processed by the publisher, the build is successful using v1.1.97. </p>
<p>Note the same IG successfully runs using <a href="https://github.com/HL7/fhir-ig-publisher/releases/tag/1.1.96">v1.1.96</a>.</p>
<p>I'd be happy to provide more information, if that would help.</p>



<a name="270305627"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20publisher%201.1.97%20-%20issue%20processing%20contained%20resources/near/270305627" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Eastwood <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20publisher.201.2E1.2E97.20-.20issue.20processing.20contained.20resources.html#270305627">(Feb 01 2022 at 23:20)</a>:</h4>
<p><strong>Update re IG Publisher v1.1.98</strong></p>
<p>HL7 AU build still fails, with identical error message reported above re "<em>Could not locate the included file 'Encounter-28060b9a-4ffb-11e9-8647-d663bd873d93-html.xhtml'</em>" (new <a href="http://build.fhir.org/ig/hl7au/au-fhir-base/branches/master/failure/build.log">build log</a>). Note</p>
<ul>
<li>the ig.xml does not have a listing for an Encounter instance with this id - the id is only present in a List example as a <a href="https://github.com/hl7au/au-fhir-base/blob/master/examples/list-0ebc46a8-4ea8-11e9-8647-d663bd873d93.xml#L436-L438">reference for List.encounter</a> to an internal <a href="https://github.com/hl7au/au-fhir-base/blob/master/examples/list-0ebc46a8-4ea8-11e9-8647-d663bd873d93.xml#L370-L419">contained Encounter resource</a></li>
<li>when this List example is excluded from the build, it runs successfully</li>
<li>maybe this List example is doing containment incorrectly, but I can't see it - please suggest variations if anyone has ideas</li>
</ul>
<p>Also note that the earlier reported messages re "<em>inability to find MedicationUsage instances</em>" are no longer present in the 1.1.98 build.log (presumably related to the publisher release note "<em>Renderer: Stop trying to use R5 version of contained resource for internal rendering</em>")</p>



<a name="270630423"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20publisher%201.1.97%20-%20issue%20processing%20contained%20resources/near/270630423" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20publisher.201.2E1.2E97.20-.20issue.20processing.20contained.20resources.html#270630423">(Feb 03 2022 at 22:49)</a>:</h4>
<p>I can't reproduce this?</p>



<a name="270648289"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20publisher%201.1.97%20-%20issue%20processing%20contained%20resources/near/270648289" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Eastwood <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20publisher.201.2E1.2E97.20-.20issue.20processing.20contained.20resources.html#270648289">(Feb 04 2022 at 00:18)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191316">Grahame Grieve</span> <a href="#narrow/stream/179252-IG-creation/topic/IG.20publisher.201.2E1.2E97.20-.20issue.20processing.20contained.20resources/near/270630423">said</a>:</p>
<blockquote>
<p>I can't reproduce this?</p>
</blockquote>
<p>mmm, that's not good! Thanks for looking <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> </p>
<p>Even though it happens on local PCs for us, it also occurs (ie fails) in the cloud build.fhir environment; see the link above for the build.log indicating how the auto-builder fails to complete.</p>
<p>I confess to being at a total loss to know what else to do to problem solve this one - anyone have any suggestions?</p>



<a name="270655739"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20publisher%201.1.97%20-%20issue%20processing%20contained%20resources/near/270655739" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20publisher.201.2E1.2E97.20-.20issue.20processing.20contained.20resources.html#270655739">(Feb 04 2022 at 01:39)</a>:</h4>
<p>I think that this is a problem in the Australian template</p>



<a name="270657467"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20publisher%201.1.97%20-%20issue%20processing%20contained%20resources/near/270657467" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Eastwood <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20publisher.201.2E1.2E97.20-.20issue.20processing.20contained.20resources.html#270657467">(Feb 04 2022 at 01:57)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191316">Grahame Grieve</span> <a href="#narrow/stream/179252-IG-creation/topic/IG.20publisher.201.2E1.2E97.20-.20issue.20processing.20contained.20resources/near/270655739">said</a>:</p>
<blockquote>
<p>I think that this is a problem in the Australian template</p>
</blockquote>
<p>Actually, I have come to the same conclusion - I have just copied the problematic HL7AU List example into a fresh IG using the <a href="https://github.com/FHIR/sample-ig">https://github.com/FHIR/sample-ig</a> - and it doesn't fail to build.</p>



<a name="270658754"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20publisher%201.1.97%20-%20issue%20processing%20contained%20resources/near/270658754" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20publisher.201.2E1.2E97.20-.20issue.20processing.20contained.20resources.html#270658754">(Feb 04 2022 at 02:13)</a>:</h4>
<p>fixed.</p>



<a name="270660014"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20publisher%201.1.97%20-%20issue%20processing%20contained%20resources/near/270660014" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Eastwood <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20publisher.201.2E1.2E97.20-.20issue.20processing.20contained.20resources.html#270660014">(Feb 04 2022 at 02:31)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191316">Grahame Grieve</span> <a href="#narrow/stream/179252-IG-creation/topic/IG.20publisher.201.2E1.2E97.20-.20issue.20processing.20contained.20resources/near/270658754">said</a>:</p>
<blockquote>
<p>fixed.</p>
</blockquote>
<p>Many many thanks Graham for your decisive input here. </p>
<p>And apologies for casting doubt on the IG publisher; that was not intended.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
