---
layout: page
title: "FHIR Chat  · Does the validator have access to all of the variables? · IG creation"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/index.html">IG creation</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Does.20the.20validator.20have.20access.20to.20all.20of.20the.20variables.3F.html">Does the validator have access to all of the variables?</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="275159335"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Does%20the%20validator%20have%20access%20to%20all%20of%20the%20variables%3F/near/275159335" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Diane <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Does.20the.20validator.20have.20access.20to.20all.20of.20the.20variables.3F.html#275159335">(Mar 13 2022 at 15:11)</a>:</h4>
<p>I am getting errors in some of my example questionnaire responses</p>
<p>A. error    Item has answer, even though it is not enabled (item id = 'linkId_3')</p>
<p>When I look at all of the link Ids mentioned, the example questionnaire response shows a response to the proceeding question or questions (eg. linkId_1 and linkId_2) that are necessary for the question to be enabled. And, the response is consistent with the answer needed for enablement. In fact, it was enabled, because we created the example questionnaire responses by hand, so we wouldn't have seen the questions if they weren't enabled.</p>
<p>I wonder if the problem might be that the validator is not processing the variable in the enableWhen expressions correctly, such as  %eventOccurredAtLeadPISite = 'N'.  </p>
<p>Does the validator have access to all of the variables?</p>
<p>B. QuestionnaireResponse.item[1].item[0].item[1].answer[0]  information Cannot validate options because no option or options are provided</p>
<p>This is information, not a error or warning, so I guess that I can suppress this.</p>
<p>It seems to be happening where the options are dynamically generated using an answerExpression.</p>
<p>Does the validator have access to the variables to run the answerExpression like:</p>
<p>iif(%eventOccurredAtLeadPISite = 'Y', %lookupInitiateStudy.descendants().where(linkId = 'in7.1.1').answer.value, %lookupInitiateStudy.descendants().where(item.where(linkId = 'in8.9' and answer.value = %relyingSiteForForm)).item.descendants().where(linkId = 'in8.1.1').answer.value)</p>



<a name="275163309"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Does%20the%20validator%20have%20access%20to%20all%20of%20the%20variables%3F/near/275163309" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Does.20the.20validator.20have.20access.20to.20all.20of.20the.20variables.3F.html#275163309">(Mar 13 2022 at 16:41)</a>:</h4>
<p>Is the variable declared in the questionnaire?  You can't pass in variables from outside.</p>
<p>You don't suppress things because you can.  You suppress because you understand the issue and have determined it's not a problem.</p>



<a name="275171962"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Does%20the%20validator%20have%20access%20to%20all%20of%20the%20variables%3F/near/275171962" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Diane <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Does.20the.20validator.20have.20access.20to.20all.20of.20the.20variables.3F.html#275171962">(Mar 13 2022 at 19:55)</a>:</h4>
<p>Some of the variables like  %eventOccurredAtLeadPISite  are declared and initialized with values in the questionnaires as the user answers the questions.  It would seem like the validator should have access to those, but can it simulate the variable<br>
becoming initialized with a value as the question is answered?    The expressions are based the variable getting the value from the %questionnaire as the question is answered.   Does the validator know since this is not real-time,  it has to look in the <br>
questionnaire response instead?</p>
<p>The other variables are all based off the JSON text that is passed in through the launch context variable  that LHC Forms receives as a parameter when our software calls LHC Forms.   This was the solution for passing the parent QR into the child questionnaires decided at the SDC call  <a href="https://confluence.hl7.org/display/FHIRI/FHIR+SDC+Minutes+CC+20220210">https://confluence.hl7.org/display/FHIRI/FHIR+SDC+Minutes+CC+20220210</a>.</p>
<p>I do not and would not suppress messages without your input.   I am still trying to understand how the validator handles variables so that I can be sure this is even where the issue is occurring.  But, I think that if there is an error that is the most important issue to focus on.</p>



<a name="275178390"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Does%20the%20validator%20have%20access%20to%20all%20of%20the%20variables%3F/near/275178390" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Does.20the.20validator.20have.20access.20to.20all.20of.20the.20variables.3F.html#275178390">(Mar 13 2022 at 22:27)</a>:</h4>
<p>It has to look in the QuestionnaireResponse.  And it's entirely likely that the validator does not yet support all of the extensions defined in SDC.</p>



<a name="275193678"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Does%20the%20validator%20have%20access%20to%20all%20of%20the%20variables%3F/near/275193678" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Diane <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Does.20the.20validator.20have.20access.20to.20all.20of.20the.20variables.3F.html#275193678">(Mar 14 2022 at 04:45)</a>:</h4>
<p>After looking through our example Questionnaire Responses, it looks like all 8 of our example Questionnaire Responses have either</p>
<p>A.  Error message: Item has answer, even though it is not enabled </p>
<p>or</p>
<p>B.  Information message:  QuestionnaireResponse.item[1].item[0].item[1].answer[0] information Cannot validate options because no option or options are provided  because they have answerExpressions for the choice items. </p>
<p>How do you want us to resolve A?</p>
<p>How do you want us to resolve B?</p>
<p>If we delete the answers out of the JSON files for the questions that the IG doesn't think are enabled, that would remove the errors.  But, it makes the examples less helpful.</p>



<a name="275241284"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Does%20the%20validator%20have%20access%20to%20all%20of%20the%20variables%3F/near/275241284" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Does.20the.20validator.20have.20access.20to.20all.20of.20the.20variables.3F.html#275241284">(Mar 14 2022 at 14:14)</a>:</h4>
<p>If the issue is problems with the validator, then we won't stop the IG from going to ballot.  We'll definitely need to update the validator before the IG can proceed to publication.</p>



<a name="275291993"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Does%20the%20validator%20have%20access%20to%20all%20of%20the%20variables%3F/near/275291993" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Does.20the.20validator.20have.20access.20to.20all.20of.20the.20variables.3F.html#275291993">(Mar 14 2022 at 20:13)</a>:</h4>
<p>have you got examples?</p>



<a name="275320331"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Does%20the%20validator%20have%20access%20to%20all%20of%20the%20variables%3F/near/275320331" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Does.20the.20validator.20have.20access.20to.20all.20of.20the.20variables.3F.html#275320331">(Mar 15 2022 at 01:49)</a>:</h4>
<p>In off-line discussion, it seems that the issue is that the enableWhen depends on context variables passed from outside, including a custom launchContext.  So that's not something the validator ever <em>could</em> support.  I've suggested modifying the Questionnaire to drive solely off answers within the QR - even if some of them are hidden answers that are populated based on launch context.</p>



<a name="275322170"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Does%20the%20validator%20have%20access%20to%20all%20of%20the%20variables%3F/near/275322170" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Does.20the.20validator.20have.20access.20to.20all.20of.20the.20variables.3F.html#275322170">(Mar 15 2022 at 02:17)</a>:</h4>
<p>the validator might be able to support that, but not in an IG.</p>



<a name="275322180"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Does%20the%20validator%20have%20access%20to%20all%20of%20the%20variables%3F/near/275322180" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Does.20the.20validator.20have.20access.20to.20all.20of.20the.20variables.3F.html#275322180">(Mar 15 2022 at 02:17)</a>:</h4>
<p>no it could, actually</p>



<a name="275322228"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Does%20the%20validator%20have%20access%20to%20all%20of%20the%20variables%3F/near/275322228" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Does.20the.20validator.20have.20access.20to.20all.20of.20the.20variables.3F.html#275322228">(Mar 15 2022 at 02:18)</a>:</h4>
<p>a parameters resource that feeds to it. Like the expansion parameters one.</p>



<a name="275322234"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Does%20the%20validator%20have%20access%20to%20all%20of%20the%20variables%3F/near/275322234" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Does.20the.20validator.20have.20access.20to.20all.20of.20the.20variables.3F.html#275322234">(Mar 15 2022 at 02:18)</a>:</h4>
<p>but it sure doesn't do that now</p>



<a name="275326515"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Does%20the%20validator%20have%20access%20to%20all%20of%20the%20variables%3F/near/275326515" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Does.20the.20validator.20have.20access.20to.20all.20of.20the.20variables.3F.html#275326515">(Mar 15 2022 at 03:47)</a>:</h4>
<p>In general, you wouldn't want the Questionnaire to behave that way because the launch context when viewing the form isn't necessarily going to be the same as when you fill out the form.</p>



<a name="275327023"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Does%20the%20validator%20have%20access%20to%20all%20of%20the%20variables%3F/near/275327023" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Does.20the.20validator.20have.20access.20to.20all.20of.20the.20variables.3F.html#275327023">(Mar 15 2022 at 03:58)</a>:</h4>
<p>I thought we were talking about validation?</p>



<a name="275382551"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Does%20the%20validator%20have%20access%20to%20all%20of%20the%20variables%3F/near/275382551" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Does.20the.20validator.20have.20access.20to.20all.20of.20the.20variables.3F.html#275382551">(Mar 15 2022 at 14:46)</a>:</h4>
<p>We are.  You don't want the validation results to vary depending on the context of how you open the response.</p>



<a name="275427093"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Does%20the%20validator%20have%20access%20to%20all%20of%20the%20variables%3F/near/275427093" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Does.20the.20validator.20have.20access.20to.20all.20of.20the.20variables.3F.html#275427093">(Mar 15 2022 at 19:56)</a>:</h4>
<p>why not?</p>



<a name="275427277"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Does%20the%20validator%20have%20access%20to%20all%20of%20the%20variables%3F/near/275427277" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Does.20the.20validator.20have.20access.20to.20all.20of.20the.20variables.3F.html#275427277">(Mar 15 2022 at 19:57)</a>:</h4>
<p>Because then you have a QR that's valid on completion (and thus allowing the QR to be marked complete in the first place).  However, if opened a day or two later with a slightly different context, the QR would suddenly be invalid.</p>



<a name="275427351"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Does%20the%20validator%20have%20access%20to%20all%20of%20the%20variables%3F/near/275427351" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Does.20the.20validator.20have.20access.20to.20all.20of.20the.20variables.3F.html#275427351">(Mar 15 2022 at 19:58)</a>:</h4>
<p>Population based on context makes total sense.  Validation based on context is inevitably going to cause grief.</p>



<a name="275428356"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Does%20the%20validator%20have%20access%20to%20all%20of%20the%20variables%3F/near/275428356" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Does.20the.20validator.20have.20access.20to.20all.20of.20the.20variables.3F.html#275428356">(Mar 15 2022 at 20:05)</a>:</h4>
<p>but you'd choose to validate based on context, so that's what you'd want to happen.</p>



<a name="275432986"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Does%20the%20validator%20have%20access%20to%20all%20of%20the%20variables%3F/near/275432986" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Does.20the.20validator.20have.20access.20to.20all.20of.20the.20variables.3F.html#275432986">(Mar 15 2022 at 20:46)</a>:</h4>
<p>The QR could be validated in a wide range of contexts.</p>



<a name="275433023"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Does%20the%20validator%20have%20access%20to%20all%20of%20the%20variables%3F/near/275433023" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Does.20the.20validator.20have.20access.20to.20all.20of.20the.20variables.3F.html#275433023">(Mar 15 2022 at 20:46)</a>:</h4>
<p>y so? You'd feed the context. I'm not sure i follow the issue</p>



<a name="275433037"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Does%20the%20validator%20have%20access%20to%20all%20of%20the%20variables%3F/near/275433037" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Does.20the.20validator.20have.20access.20to.20all.20of.20the.20variables.3F.html#275433037">(Mar 15 2022 at 20:47)</a>:</h4>
<p>There would typically be a patient context when launching, but not necessarily when subsequently reviewing or transmitting.  And validation could happen at any point.</p>



<a name="275433064"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Does%20the%20validator%20have%20access%20to%20all%20of%20the%20variables%3F/near/275433064" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Does.20the.20validator.20have.20access.20to.20all.20of.20the.20variables.3F.html#275433064">(Mar 15 2022 at 20:47)</a>:</h4>
<p>The context is "who is the current user?" "what is the currently active patient?"</p>



<a name="275433115"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Does%20the%20validator%20have%20access%20to%20all%20of%20the%20variables%3F/near/275433115" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Does.20the.20validator.20have.20access.20to.20all.20of.20the.20variables.3F.html#275433115">(Mar 15 2022 at 20:47)</a>:</h4>
<p>If those change between filling out the form and subsequently looking at it, the validation results shouldn't change.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
