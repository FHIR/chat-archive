---
layout: page
title: "FHIR Chat  · regular expressions · IG creation"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/index.html">IG creation</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/regular.20expressions.html">regular expressions</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="191121094"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/regular%20expressions/near/191121094" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a>  Bob Milius <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/regular.20expressions.html#191121094">(Mar 19 2020 at 14:31)</a>:</h4>
<p>I need to require an Observation I'm profiling to constrain valueCodeableConcept touse a specific code system and a code that is actually a grammar for which I have a rough regular expression I can use as a first pass validation. I know I can use patternCodeableConcept or create a slice to constrain the code system, but I'm not sure how to constrain the code to the regex. I see I can use a regex with matches() in a fhirpath (<a href="http://hl7.org/fhirpath/#matchesregex-string-boolean" target="_blank" title="http://hl7.org/fhirpath/#matchesregex-string-boolean">http://hl7.org/fhirpath/#matchesregex-string-boolean</a>) but not sure how to use it. Maybe invariant? I'd love to see an example if this is possible.</p>



<a name="191122311"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/regular%20expressions/near/191122311" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noemi Deppenwiese <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/regular.20expressions.html#191122311">(Mar 19 2020 at 14:40)</a>:</h4>
<p>Not a CodeableConcept, but one of my profiles has an Identifier slice with fixed system and a regex for the value:</p>
<div class="codehilite"><pre><span></span>{
        &quot;id&quot;: &quot;Organization.identifier:Bbmri-EricId.system&quot;,
        &quot;path&quot;: &quot;Organization.identifier.system&quot;,
        &quot;fixedUri&quot;: &quot;http://www.bbmri-eric.eu/&quot;,
        &quot;mustSupport&quot;: true
      },
      {
        &quot;id&quot;: &quot;Organization.identifier:Bbmri-EricId.value&quot;,
        &quot;path&quot;: &quot;Organization.identifier.value&quot;,
        &quot;constraint&quot;: [
          {
            &quot;key&quot;: &quot;bbmri-id-1&quot;,
            &quot;requirements&quot;: &quot;Make sure valid BBMRI IDs are provided&quot;,
            &quot;severity&quot;: &quot;warning&quot;,
            &quot;human&quot;: &quot;&lt;CC&gt;_&lt;local id&gt;: SHALL contain valid ISO-3166-1 alpha 2 country code followed by _ followed by biobank ID of national registry (if present).&quot;,
            &quot;expression&quot;: &quot;matches(&#39;^([a-z]){2}_([a-zA-Z\\\\d])+$&#39;)&quot;,
            &quot;source&quot;: &quot;Organization&quot;
          }
        ],
        &quot;mustSupport&quot;: true
      },
</pre></div>



<a name="191124956"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/regular%20expressions/near/191124956" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Kramer <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/regular.20expressions.html#191124956">(Mar 19 2020 at 14:56)</a>:</h4>
<p><span class="user-mention" data-user-id="191916">@ Bob Milius</span>  If you are doing this in FHIR Shorthand, it would be (not yet available, but it will be in the next release):</p>
<div class="codehilite"><pre><span></span>Invariant:  bbmri-id-1
Description: &quot;Make sure valid BBMRI IDs are provided&quot;
Expression: &quot;matches(&#39;^([a-z]){2}_([a-zA-Z\\\\d])+$&#39;)&quot;
Severity:   #warning
</pre></div>


<p>Then in the profile:</p>
<div class="codehilite"><pre><span></span>* identifier.value obeys bbmri-id-1
</pre></div>



<a name="191127132"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/regular%20expressions/near/191127132" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a>  Bob Milius <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/regular.20expressions.html#191127132">(Mar 19 2020 at 15:11)</a>:</h4>
<p>Thanks <span class="user-mention" data-user-id="221444">@Noemi Deppenwiese</span> and <span class="user-mention" data-user-id="191447">@Mark Kramer</span> <br>
Mark, I'll continue with my questions about FSH and regex in the shorthand stream</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
