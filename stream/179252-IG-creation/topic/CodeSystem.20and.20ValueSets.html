---
layout: page
title: "FHIR Chat  · CodeSystem and ValueSets · IG creation"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/index.html">IG creation</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/CodeSystem.20and.20ValueSets.html">CodeSystem and ValueSets</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="173690962"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/CodeSystem%20and%20ValueSets/near/173690962" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/CodeSystem.20and.20ValueSets.html#173690962">(Aug 20 2019 at 20:03)</a>:</h4>
<p>1. If you create a CS/VS in the profiling spreadsheet the created CS/VS resources don't include the publisher element. Which then throws an error during the validation of the IG during the IG build process. Is this a known problem or did we something wrong?<br>
2. Defining CS/VS as code lists in the IG works fine when you use it to bind to a value. If you are using patterns, therefore not include the code list in the Binding sheet the validator fails as the CS/VS isn't created.<br>
The only workaround is to create these CS/VS manually, right?</p>



<a name="173696232"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/CodeSystem%20and%20ValueSets/near/173696232" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/CodeSystem.20and.20ValueSets.html#173696232">(Aug 20 2019 at 21:06)</a>:</h4>
<p>#1 - you put the publisher on the metadata tab?<br>
#2 - what do you mean 'if you are using patterns'?</p>



<a name="173696283"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/CodeSystem%20and%20ValueSets/near/173696283" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/CodeSystem.20and.20ValueSets.html#173696283">(Aug 20 2019 at 21:07)</a>:</h4>
<p>In general we're nudging people away from spreadsheet definition of vocabulary, but it should still work.</p>



<a name="173702057"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/CodeSystem%20and%20ValueSets/near/173702057" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Power <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/CodeSystem.20and.20ValueSets.html#173702057">(Aug 20 2019 at 22:34)</a>:</h4>
<p>#1 - what field in the metadata tab would be used to populate the Publisher element?<br>
#2 - we use the 'Pattern' column of the spreadsheets to indicate what should be used - in this case, we have a pattern defined for Observation.code like this:<br>
{"coding":[{"system":"http://hl7.org/fhir/uv/genomics-reporting/CodeSystem/TBD-codes","code":"grouper"}]}</p>



<a name="173702332"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/CodeSystem%20and%20ValueSets/near/173702332" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Power <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/CodeSystem.20and.20ValueSets.html#173702332">(Aug 20 2019 at 22:37)</a>:</h4>
<p>I will add this made me re-read the FHIR Spreadsheet Authoring page again: <a href="https://wiki.hl7.org/index.php?title=FHIR_Spreadsheet_Authoring#Structure_Tab" target="_blank" title="https://wiki.hl7.org/index.php?title=FHIR_Spreadsheet_Authoring#Structure_Tab">https://wiki.hl7.org/index.php?title=FHIR_Spreadsheet_Authoring#Structure_Tab</a><br>
I happen to notice that Pattern says this: "Pattern: This specifies a set of elements and values that must be present in the instance. It should only be present for complex data types and is expressed as XML. Additional elements and values not specified in the pattern are still permitted."</p>
<p>I noticed that says 'expressed as XML' and we express it in JSON.</p>



<a name="173780653"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/CodeSystem%20and%20ValueSets/near/173780653" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/CodeSystem.20and.20ValueSets.html#173780653">(Aug 21 2019 at 10:14)</a>:</h4>
<blockquote>
<p>In general we're nudging people away from spreadsheet definition of vocabulary, but it should still work.</p>
</blockquote>
<p>re-did this, using CodeSystem and ValueSets defined in XML</p>



<a name="173780967"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/CodeSystem%20and%20ValueSets/near/173780967" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/CodeSystem.20and.20ValueSets.html#173780967">(Aug 21 2019 at 10:21)</a>:</h4>
<p>still getting:<br>
Unknown Code System <a href="http://hl7.org/fhir/uv/genomics-reporting/CodeSystem/TBD-codes" target="_blank" title="http://hl7.org/fhir/uv/genomics-reporting/CodeSystem/TBD-codes">http://hl7.org/fhir/uv/genomics-reporting/CodeSystem/TBD-codes</a></p>



<a name="173781807"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/CodeSystem%20and%20ValueSets/near/173781807" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/CodeSystem.20and.20ValueSets.html#173781807">(Aug 21 2019 at 10:37)</a>:</h4>
<p>oh! obviously i have to include the vocab resources as resources into the ImplementationGuide.xml</p>



<a name="173781885"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/CodeSystem%20and%20ValueSets/near/173781885" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/CodeSystem.20and.20ValueSets.html#173781885">(Aug 21 2019 at 10:39)</a>:</h4>
<p>If you do a ValueSet in xml -&gt; add a binding in the spreadsheet, the VS is added automatically during the build process.</p>



<a name="173781964"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/CodeSystem%20and%20ValueSets/near/173781964" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/CodeSystem.20and.20ValueSets.html#173781964">(Aug 21 2019 at 10:40)</a>:</h4>
<p>as this isn't a binding but a fixed value expressed through a pattern you need to add the Vocab Resources to the IG manually</p>



<a name="173781988"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/CodeSystem%20and%20ValueSets/near/173781988" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/CodeSystem.20and.20ValueSets.html#173781988">(Aug 21 2019 at 10:41)</a>:</h4>
<p>Only weird thing: i had to set an ID on the ValueSet Resource, otherwise the build fails:</p>
<div class="codehilite"><pre><span></span> Error doing replacements - no id defined in resource: ValueSet/null
     [java]     at org.hl7.fhir.igtools.publisher.IGKnowledgeProvider.doReplacements(IGKnowledgeProvider.
</pre></div>



<a name="173799818"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/CodeSystem%20and%20ValueSets/near/173799818" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/CodeSystem.20and.20ValueSets.html#173799818">(Aug 21 2019 at 14:38)</a>:</h4>
<p>a fixed or pattern value won't prompt the loading of the vs/cs from the spreadsheet; only a binding will do that</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
