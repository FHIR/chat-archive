---
layout: page
title: "FHIR Chat  · Publisher Issues with Invalid Bundles · IG creation"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/index.html">IG creation</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Publisher.20Issues.20with.20Invalid.20Bundles.html">Publisher Issues with Invalid Bundles</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="258222208"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Publisher%20Issues%20with%20Invalid%20Bundles/near/258222208" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Saul Kravitz <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Publisher.20Issues.20with.20Invalid.20Bundles.html#258222208">(Oct 19 2021 at 16:04)</a>:</h4>
<p>We are getting publication errors on an example bundle in mCODE that appear to trace back to a warning message from invariant in USCore.   <br>
See the <a href="http://build.fhir.org/ig/HL7/fhir-mCODE-ig/branches/Martin101821Corrections/qa.html#_scratch_ig-build-temp-E3VX5R_repo_fsh-generated_resources_Bundle-mcode-patient-bundle-jenny-m">qa report</a> from a branch.</p>
<p>The error is:<br>
<a href="/user_uploads/10155/nlFFdGFNt-t8xDbN_Nv0rCWM/image.png">image.png</a> </p>
<p>USCore Observation lab has in invariant:</p>
<p><strong>us-core-4</strong> Observation.value[x] <strong>SHOULD</strong> use Snomed CT for coded Results<br>
: valueCodeableConcept.coding.system.empty() or valueCodeableConcept.coding.system = '<a href="http://snomed.info/sct">http://snomed.info/sct</a>'</p>
<p>The instance <a href="http://build.fhir.org/ig/HL7/fhir-mCODE-ig/branches/Martin101821Corrections/Bundle-mcode-patient-bundle-jenny-m.html">Bundle-mcode-patient-bundle-jenny-m</a> includes a <a href="http://">cancer-genomic-variant-jenny-m</a> that does not satisfy the invariant, since the <a href="http://build.fhir.org/ig/HL7/fhir-mCODE-ig/branches/Martin101821Corrections/StructureDefinition-mcode-cancer-genomic-variant.html">Cancer Genomic Variant</a> profile uses a LOINC code for Observation.value.   The validator does <strong>not</strong> complain about the example instance, but <strong>does complain</strong> about its inclusion in the bundle, which is odd.</p>
<p>Since the invariant is a SHOULD (warning), this seems spurious.</p>
<p>Three questions (<span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> , <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> )<br>
   1) do you agree that this is a spurious error<br>
  2) if so, can it be addressed?<br>
   3) or alternatively, can we get dispensation to publish despite this "error"</p>
<p>Thx</p>



<a name="258244487"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Publisher%20Issues%20with%20Invalid%20Bundles/near/258244487" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Publisher.20Issues.20with.20Invalid.20Bundles.html#258244487">(Oct 19 2021 at 18:04)</a>:</h4>
<p>"Error parsing" suggests something weird is going on - which is probably not your fault.  <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> ?</p>



<a name="258249361"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Publisher%20Issues%20with%20Invalid%20Bundles/near/258249361" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Publisher.20Issues.20with.20Invalid.20Bundles.html#258249361">(Oct 19 2021 at 18:34)</a>:</h4>
<p>us-core-4 is a best practice warning and not an error</p>



<a name="258251668"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Publisher%20Issues%20with%20Invalid%20Bundles/near/258251668" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Publisher.20Issues.20with.20Invalid.20Bundles.html#258251668">(Oct 19 2021 at 18:49)</a>:</h4>
<p>It suggests something is going wrong with the way the warning's being conveyed through.</p>



<a name="258259647"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Publisher%20Issues%20with%20Invalid%20Bundles/near/258259647" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Saul Kravitz <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Publisher.20Issues.20with.20Invalid.20Bundles.html#258259647">(Oct 19 2021 at 19:43)</a>:</h4>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> Since there are no errors on the <a href="http://build.fhir.org/ig/HL7/fhir-mCODE-ig/branches/Martin101821Corrections/qa.html#_scratch_ig-build-temp-E3VX5R_repo_fsh-generated_resources_StructureDefinition-mcode-cancer-genomic-variant">instance</a> being included in the bundle, but there is an error on the bundle relating to this instance, I would conclude that validation is being done differently -- more stringently on the bundle.</p>
<p>In fact, the QA report indicates that all of my instances are being validated the same way, but is this correct?<br>
StructureDefinition: Validated against fhir.StructureDefinition</p>



<a name="258262186"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Publisher%20Issues%20with%20Invalid%20Bundles/near/258262186" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Publisher.20Issues.20with.20Invalid.20Bundles.html#258262186">(Oct 19 2021 at 20:01)</a>:</h4>
<p>this is on my todo list, but discriminators can turn warnings into errors</p>



<a name="258276099"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Publisher%20Issues%20with%20Invalid%20Bundles/near/258276099" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Saul Kravitz <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Publisher.20Issues.20with.20Invalid.20Bundles.html#258276099">(Oct 19 2021 at 21:34)</a>:</h4>
<p>We will forge ahead....depending on the length of your todo list and the speed of our punch list closeout, we may return with a request for special dispensation for this error at publication time.  As always, thanks for your responsiveness and help!</p>



<a name="258413192"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Publisher%20Issues%20with%20Invalid%20Bundles/near/258413192" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Publisher.20Issues.20with.20Invalid.20Bundles.html#258413192">(Oct 20 2021 at 17:53)</a>:</h4>
<p><span class="user-mention" data-user-id="215604">@Saul Kravitz</span> how do I reproduce? Just build mcode?</p>



<a name="258543853"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Publisher%20Issues%20with%20Invalid%20Bundles/near/258543853" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Saul Kravitz <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Publisher.20Issues.20with.20Invalid.20Bundles.html#258543853">(Oct 21 2021 at 13:21)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> yes.</p>



<a name="258613641"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Publisher%20Issues%20with%20Invalid%20Bundles/near/258613641" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Saul Kravitz <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Publisher.20Issues.20with.20Invalid.20Bundles.html#258613641">(Oct 21 2021 at 20:39)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span>  I think (or at least hope) that these are at the root of all of my bundle issues.<br>
As far as I can tell, all of the codes are valid.</p>
<p>Terminology_PassThrough_TX_Message<br>
fsh-generated/resources/Bundle-mcode-patient-bundle-jenny-m.json    Error parsing response message: This does not appear to be a FHIR resource (wrong namespace '') (@ /) for 'http://loinc.org#LA9633-4'<br>
fsh-generated/resources/Bundle-mcode-patient-bundle-jenny-m.json    Error parsing response message: This does not appear to be a FHIR resource (wrong namespace '') (@ /) for '<a href="http://snomed.info/sct#897275008">http://snomed.info/sct#897275008</a>'<br>
fsh-generated/resources/Bundle-mcode-patient-bundle-jenny-m.json    Error parsing response message: This does not appear to be a FHIR resource (wrong namespace '') (@ /) for '<a href="http://snomed.info/sct#897275008">http://snomed.info/sct#897275008</a>'<br>
fsh-generated/resources/Bundle-mcode-patient-bundle-jenny-m.json    Error parsing response message: This does not appear to be a FHIR resource (wrong namespace '') (@ /) for '<a href="http://snomed.info/sct#897275008">http://snomed.info/sct#897275008</a>'<br>
fsh-generated/resources/Bundle-mcode-patient-bundle-jenny-m.json    Error parsing response message: This does not appear to be a FHIR resource (wrong namespace '') (@ /) for '<a href="http://snomed.info/sct#897275008">http://snomed.info/sct#897275008</a>'<br>
fsh-generated/resources/Bundle-mcode-patient-bundle-jenny-m.json    Error parsing response message: This does not appear to be a FHIR resource (wrong namespace '') (@ /) for 'http://loinc.org#LA9622-7'<br>
fsh-generated/resources/Bundle-mcode-patient-bundle-jenny-m.json    Error parsing response message: This does not appear to be a FHIR resource (wrong namespace '') (@ /) for 'http://loinc.org#29308-4'<br>
fsh-generated/resources/Observation-karnofsky-performance-status-normal-activity.json   Error parsing response message: This does not appear to be a FHIR resource (wrong namespace '') (@ /) for 'http://loinc.org#LA29176-7'<br>
fsh-generated/resources/Observation-us-core-observation-lab-tumor-dcis-jenny-m.json Error parsing response message: This does not appear to be a FHIR resource (wrong namespace '') (@ /) for 'http://loinc.org#29308-4'</p>



<a name="258615232"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Publisher%20Issues%20with%20Invalid%20Bundles/near/258615232" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Publisher.20Issues.20with.20Invalid.20Bundles.html#258615232">(Oct 21 2021 at 20:51)</a>:</h4>
<p>how did you get these?</p>



<a name="258616107"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Publisher%20Issues%20with%20Invalid%20Bundles/near/258616107" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Saul Kravitz <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Publisher.20Issues.20with.20Invalid.20Bundles.html#258616107">(Oct 21 2021 at 20:57)</a>:</h4>
<p>Pulled them out of the QA report for the build of the master branch, as they are listed at the end.<br>
All of the SNOMED and LOINC codes appear valid.   For the entries in the bundle that fail, they all of such error messages sprinkled in.<br>
The weirdest one is on entry[4] of the bundle.  If you click on show reasoning, the error is about entry[3] of the bundle...<br>
<a href="/user_uploads/10155/KP32C01aZtUsKGh7ldk134S8/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/10155/KP32C01aZtUsKGh7ldk134S8/image.png" title="image.png"><img src="/user_uploads/10155/KP32C01aZtUsKGh7ldk134S8/image.png"></a></div>



<a name="259169860"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Publisher%20Issues%20with%20Invalid%20Bundles/near/259169860" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Publisher.20Issues.20with.20Invalid.20Bundles.html#259169860">(Oct 26 2021 at 22:17)</a>:</h4>
<p>mcode builds cleanly for me now</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
