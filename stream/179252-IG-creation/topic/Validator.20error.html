---
layout: page
title: "FHIR Chat  · Validator error · IG creation"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/index.html">IG creation</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Validator.20error.html">Validator error</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="197566780"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Validator%20error/near/197566780" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Pyke <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Validator.20error.html#197566780">(May 14 2020 at 14:55)</a>:</h4>
<p>I'm trying to run the validator (on my linux system) against the definitions from SANER locally but I'm getting this error:<br>
   ..Detect format for /home/loftwyr/Downloads/CT24/saner/spec.internals<br>
[Fatal Error] :1:1: Content is not allowed in prolog.<br>
  .. validate [Epic-MR-REad-2.json]<br>
Validation Infrastructure fail validating Epic-MR-REad-2.json: null<br>
Exception in thread "main" java.lang.NullPointerException<br>
        at org.hl7.fhir.validation.instance.InstanceValidator.checkReference(InstanceValidator.java:2216)<br>
        at org.hl7.fhir.validation.instance.InstanceValidator.checkChild(InstanceValidator.java:4155)<br>
        at org.hl7.fhir.validation.instance.InstanceValidator.validateElement(InstanceValidator.java:4012)<br>
        at org.hl7.fhir.validation.instance.InstanceValidator.startInner(InstanceValidator.java:3472)<br>
        at org.hl7.fhir.validation.instance.InstanceValidator.start(InstanceValidator.java:3396)<br>
        at org.hl7.fhir.validation.instance.InstanceValidator.validateResource(InstanceValidator.java:4727)<br>
        at org.hl7.fhir.validation.instance.InstanceValidator.validate(InstanceValidator.java:709)<br>
        at org.hl7.fhir.validation.instance.InstanceValidator.validate(InstanceValidator.java:563)<br>
        at org.hl7.fhir.validation.ValidationEngine.validate(ValidationEngine.java:1099)<br>
        at org.hl7.fhir.validation.ValidationEngine.validate(ValidationEngine.java:1006)<br>
        at org.hl7.fhir.validation.cli.services.ValidationService.validateSources(ValidationService.java:53)<br>
        at org.hl7.fhir.validation.Validator.main(Validator.java:202)</p>
<p>Any ideas what I'm doing wrong? The error persists after I remove the BOM</p>



<a name="197585521"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Validator%20error/near/197585521" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Pyke <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Validator.20error.html#197585521">(May 14 2020 at 16:59)</a>:</h4>
<p>java -jar ./org.hl7.fhir.validator.jar -ig /home/loftwyr/Downloads/CT24/saner/ -version 4.0.1 $1</p>



<a name="197586168"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Validator%20error/near/197586168" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Pyke <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Validator.20error.html#197586168">(May 14 2020 at 17:03)</a>:</h4>
<p>FHIR Validation tool Version 4.2.30-SNAPSHOT (Git# fd09f8be936b). Built 2020-05-12T11:40:09.571+10:00 (60 hours old)</p>



<a name="197586220"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Validator%20error/near/197586220" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Pyke <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Validator.20error.html#197586220">(May 14 2020 at 17:03)</a>:</h4>
<p>Linux www 5.4.0-29-generic #33-Ubuntu SMP Wed Apr 29 14:32:27 UTC 2020 x86_64 x86_64 x86_64 GNU/Linux</p>



<a name="197586280"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Validator%20error/near/197586280" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Pyke <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Validator.20error.html#197586280">(May 14 2020 at 17:03)</a>:</h4>
<p>openjdk version "11.0.7" 2020-04-14<br>
OpenJDK Runtime Environment (build 11.0.7+10-post-Ubuntu-3ubuntu1)<br>
OpenJDK 64-Bit Server VM (build 11.0.7+10-post-Ubuntu-3ubuntu1, mixed mode, sharing)</p>



<a name="197590479"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Validator%20error/near/197590479" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Pyke <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Validator.20error.html#197590479">(May 14 2020 at 17:33)</a>:</h4>
<p>strangely, I get the same error on my windows VM.  What version of java should I be running?</p>



<a name="197594225"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Validator%20error/near/197594225" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Validator.20error.html#197594225">(May 14 2020 at 18:02)</a>:</h4>
<p>It's having trouble resolving one of your target profiles.  I'll add some code to catch and raise a better error.  Dunno when Grahame will have a chance to release though</p>



<a name="197595002"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Validator%20error/near/197595002" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Pyke <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Validator.20error.html#197595002">(May 14 2020 at 18:07)</a>:</h4>
<p>Okay, I'll do without it for now</p>



<a name="197595303"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Validator%20error/near/197595303" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Validator.20error.html#197595303">(May 14 2020 at 18:09)</a>:</h4>
<blockquote>
<p>against the definitions from SANER locally</p>
</blockquote>
<p>What did you do? which definitions?</p>



<a name="197595566"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Validator%20error/near/197595566" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Validator.20error.html#197595566">(May 14 2020 at 18:11)</a>:</h4>
<p>but looking at the stack, there's no reason to think that the error has anything to do with your definitions. Instead, it's something in your instance. <span class="user-mention" data-user-id="192587">@David Pyke</span> please run again with the latest validator so I know what line it is</p>



<a name="197595807"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Validator%20error/near/197595807" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Pyke <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Validator.20error.html#197595807">(May 14 2020 at 18:13)</a>:</h4>
<p>I downloaded the definitions.json.zip and extracted it in a directory.  I thought I was using the latest.</p>



<a name="197596034"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Validator%20error/near/197596034" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Pyke <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Validator.20error.html#197596034">(May 14 2020 at 18:15)</a>:</h4>
<p>Is 4.2.30 not the latest version?</p>



<a name="197596273"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Validator%20error/near/197596273" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Validator.20error.html#197596273">(May 14 2020 at 18:17)</a>:</h4>
<p>that's the stack from 4.2.30? ouch</p>



<a name="197596445"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Validator%20error/near/197596445" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Validator.20error.html#197596445">(May 14 2020 at 18:18)</a>:</h4>
<blockquote>
<p>I downloaded the definitions.json.zip and extracted it in a directory</p>
</blockquote>
<p>Just use the package hl7.fhir.us.saner#current. But that isn't the issue here</p>



<a name="197596791"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Validator%20error/near/197596791" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Validator.20error.html#197596791">(May 14 2020 at 18:20)</a>:</h4>
<p>The code was looking for a structure definition and the presuming it was found - pull request to check to see if it's null</p>



<a name="197596794"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Validator%20error/near/197596794" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Pyke <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Validator.20error.html#197596794">(May 14 2020 at 18:20)</a>:</h4>
<p>Using the package version fails because it can't find a Measure profile.  Reese Adamson said that it worked with a local copy of the definitions, so I've been trying with that.</p>



<a name="197597281"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Validator%20error/near/197597281" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Validator.20error.html#197597281">(May 14 2020 at 18:24)</a>:</h4>
<p>I don't understand any of this, can you send me the instance?</p>



<a name="197598534"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Validator%20error/near/197598534" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Pyke <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Validator.20error.html#197598534">(May 14 2020 at 18:32)</a>:</h4>
<p>I downloaded the definitions.json.zip from here: <a href="http://build.fhir.org/ig/HL7/fhir-saner/definitions.json.zip">http://build.fhir.org/ig/HL7/fhir-saner/definitions.json.zip</a> and am validating this file with them <a href="/user_uploads/10155/xt6gqzXiCYuBWA-bZrxwBV6S/Epic-MR-REad-2.json">Epic-MR-REad-2.json</a></p>



<a name="197600377"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Validator%20error/near/197600377" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Pyke <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Validator.20error.html#197600377">(May 14 2020 at 18:45)</a>:</h4>
<p>for completeness, if I try to run the validator with -ig hl7.fhir.us.saner#current I get:<br>
Warning @ MeasureReport (line 9, col87) : The Measure "<a href="http://hl7.org/fhir/us/saner/StructureDefinition/PublicHealthMeasure">http://hl7.org/fhir/us/saner/StructureDefinition/PublicHealthMeasure</a>" could not be resolved, so no validation can be performed against the Measure<br>
Yet the meansure exists.</p>



<a name="197601501"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Validator%20error/near/197601501" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Validator.20error.html#197601501">(May 14 2020 at 18:53)</a>:</h4>
<p>well, you should read the error, because the error is perfectly correct</p>



<a name="197601572"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Validator%20error/near/197601572" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Validator.20error.html#197601572">(May 14 2020 at 18:53)</a>:</h4>
<p>there us no <em>Measure</em> "<a href="http://hl7.org/fhir/us/saner/StructureDefinition/PublicHealthMeasure">http://hl7.org/fhir/us/saner/StructureDefinition/PublicHealthMeasure</a>" because that's a <em>Profile</em></p>



<a name="197601684"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Validator%20error/near/197601684" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Pyke <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Validator.20error.html#197601684">(May 14 2020 at 18:54)</a>:</h4>
<p>Of course.  Thank you.  I"ve stared at that 50 times and didn't think of that.</p>



<a name="197602794"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Validator%20error/near/197602794" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Validator.20error.html#197602794">(May 14 2020 at 19:02)</a>:</h4>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> the problem with the NPE - downloading the definitions.json.zip and loading the profiles means that dependencies are not resolved. And this refers to US core IG which is not loaded. I'm not sure how the validator should handle this case, really</p>



<a name="197603112"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Validator%20error/near/197603112" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Validator.20error.html#197603112">(May 14 2020 at 19:05)</a>:</h4>
<p>I guess I'll settle for adding this in the output:</p>
<p>Error @ MeasureReport.subject (line 13, col24) : Unable to resolve the profile reference "<a href="http://hl7.org/fhir/us/core/StructureDefinition/us-core-location">http://hl7.org/fhir/us/core/StructureDefinition/us-core-location</a>"</p>



<a name="197603153"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Validator%20error/near/197603153" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Validator.20error.html#197603153">(May 14 2020 at 19:05)</a>:</h4>
<p>it's not strictly a problem in the instance,so the location is not directly correct, but I don't really have a better location to report</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
