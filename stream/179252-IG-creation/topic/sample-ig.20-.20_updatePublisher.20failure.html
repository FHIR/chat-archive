---
layout: page
title: "FHIR Chat  · sample-ig - _updatePublisher failure · IG creation"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/index.html">IG creation</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/sample-ig.20-.20_updatePublisher.20failure.html">sample-ig - _updatePublisher failure</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="175477781"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/sample-ig%20-%20_updatePublisher%20failure/near/175477781" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/sample-ig.20-.20_updatePublisher.20failure.html#175477781">(Sep 11 2019 at 21:25)</a>:</h4>
<p>When I try to do the first act (_updatePublisher) after cloning the sample-ig, I get failures... ---- Is this a Windows 7 issue?<br>
C:\Users\john.moehrke\Git\sample-ig&gt;_updatePublisher<br>
A subdirectory or file input-cache already exists.<br>
"Downloading most recent publisher - it's ~100 MB, so this may take a bit<br>
Exception calling "DownloadFile" with "2" argument(s): "The underlying connecti<br>
on was closed: An unexpected error occurred on a send."<br>
At line:1 char:47<br>
+ (new-object System.Net.WebClient).DownloadFile &lt;&lt;&lt;&lt; ("<a href="https://fhir.github.io/" target="_blank" title="https://fhir.github.io/">https://fhir.github.io/</a><br>
latest-ig-publisher/org.hl7.fhir.publisher.jar","input-cache\org.hl7.fhir.publi<br>
sher.jar")<br>
    + CategoryInfo          : NotSpecified: (:) [], MethodInvocationException<br>
    + FullyQualifiedErrorId : DotNetMethodException</p>
<p>"Done"<br>
Press any key to continue . . .sample-ig - getting started</p>



<a name="175478826"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/sample-ig%20-%20_updatePublisher%20failure/near/175478826" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/sample-ig.20-.20_updatePublisher.20failure.html#175478826">(Sep 11 2019 at 21:42)</a>:</h4>
<p>typically this is a network access issue</p>



<a name="175536401"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/sample-ig%20-%20_updatePublisher%20failure/near/175536401" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/sample-ig.20-.20_updatePublisher.20failure.html#175536401">(Sep 12 2019 at 14:50)</a>:</h4>
<p>yet I could put that http GET into my browser and pull it without issue. While still the bat still failed.</p>



<a name="175554935"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/sample-ig%20-%20_updatePublisher%20failure/near/175554935" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/sample-ig.20-.20_updatePublisher.20failure.html#175554935">(Sep 12 2019 at 18:08)</a>:</h4>
<p>Grahame had the same issue.  I think there may be certain security policies in Windows that keep that code from working.  I'm not enough of a Windows expert to know how to do a command-prompt download from a website in some other way though.</p>



<a name="175556957"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/sample-ig%20-%20_updatePublisher%20failure/near/175556957" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/sample-ig.20-.20_updatePublisher.20failure.html#175556957">(Sep 12 2019 at 18:28)</a>:</h4>
<p><span class="user-mention" data-user-id="191404">@John Moehrke</span> can you try this and see if it works? in a command line anywhere, run</p>
<div class="codehilite"><pre><span></span>bitsadmin /transfer &quot;Get IG Publisher&quot; https://fhir.github.io/latest-ig-publisher/org.hl7.fhir.publisher.jar %cd%\org.hl7.fhir.publisher.jar
</pre></div>



<a name="175557285"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/sample-ig%20-%20_updatePublisher%20failure/near/175557285" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/sample-ig.20-.20_updatePublisher.20failure.html#175557285">(Sep 12 2019 at 18:31)</a>:</h4>
<p>I get this<br>
DISPLAY: 'Get IG Publisher' TYPE: DOWNLOAD STATE: ERROR<br>
PRIORITY: NORMAL FILES: 0 / 1 BYTES: 0 / UNKNOWN<br>
Unable to complete transfer.<br>
ERROR FILE:    <a href="https://fhir.github.io/latest-ig-publisher/org.hl7.fhir.publishe" target="_blank" title="https://fhir.github.io/latest-ig-publisher/org.hl7.fhir.publishe">https://fhir.github.io/latest-ig-publisher/org.hl7.fhir.publishe</a><br>
ERROR CODE:    0x80072f7d - An error occurred in the secure channel support<br>
ERROR CONTEXT: 0x00000005 - The error occurred while the remote file was being</p>
<p>C:\Users\john.moehrke\Git\sample-ig&gt;</p>



<a name="175557462"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/sample-ig%20-%20_updatePublisher%20failure/near/175557462" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/sample-ig.20-.20_updatePublisher.20failure.html#175557462">(Sep 12 2019 at 18:33)</a>:</h4>
<p>seems a network issue indeed...<br>
<a href="https://www.drivethelife.com/windows-10/fix-microsoft-store-error-code-0x80072f7d.html" target="_blank" title="https://www.drivethelife.com/windows-10/fix-microsoft-store-error-code-0x80072f7d.html">https://www.drivethelife.com/windows-10/fix-microsoft-store-error-code-0x80072f7d.html</a></p>



<a name="175557651"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/sample-ig%20-%20_updatePublisher%20failure/near/175557651" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/sample-ig.20-.20_updatePublisher.20failure.html#175557651">(Sep 12 2019 at 18:35)</a>:</h4>
<p>I think <span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> should find some other more reliable way to download rather than using a microsoft way</p>



<a name="175567905"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/sample-ig%20-%20_updatePublisher%20failure/near/175567905" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/sample-ig.20-.20_updatePublisher.20failure.html#175567905">(Sep 12 2019 at 20:27)</a>:</h4>
<p>If it works on windows 10 reliably.. then I am fine... I presumed it was due to me being on WIn 7... I should not be on 7. or not for much longer.</p>



<a name="175572580"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/sample-ig%20-%20_updatePublisher%20failure/near/175572580" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/sample-ig.20-.20_updatePublisher.20failure.html#175572580">(Sep 12 2019 at 21:20)</a>:</h4>
<p>I'm open to alternatives.  What I want is a .bat and a .sh file that can do the download - ideally without requiring each IG to have a local copy of a jar or something that does the work.</p>



<a name="175572642"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/sample-ig%20-%20_updatePublisher%20failure/near/175572642" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/sample-ig.20-.20_updatePublisher.20failure.html#175572642">(Sep 12 2019 at 21:21)</a>:</h4>
<p>Grabbing the new publisher should just be a question of double-clicking on something, not having to remember/look-up a URL, launch a browser and then save it into a standard location.</p>



<a name="175582866"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/sample-ig%20-%20_updatePublisher%20failure/near/175582866" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/sample-ig.20-.20_updatePublisher.20failure.html#175582866">(Sep 13 2019 at 00:14)</a>:</h4>
<p>...curl?</p>



<a name="175582894"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/sample-ig%20-%20_updatePublisher%20failure/near/175582894" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/sample-ig.20-.20_updatePublisher.20failure.html#175582894">(Sep 13 2019 at 00:15)</a>:</h4>
<p>or you can Ant both batch scripts..</p>



<a name="175582969"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/sample-ig%20-%20_updatePublisher%20failure/near/175582969" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/sample-ig.20-.20_updatePublisher.20failure.html#175582969">(Sep 13 2019 at 00:16)</a>:</h4>
<p><span class="user-mention" data-user-id="191404">@John Moehrke</span> if you don't mind testing, does this work for you?<br>
curl <a href="https://fhir.github.io/latest-ig-publisher/org.hl7.fhir.publisher.jar" target="_blank" title="https://fhir.github.io/latest-ig-publisher/org.hl7.fhir.publisher.jar">https://fhir.github.io/latest-ig-publisher/org.hl7.fhir.publisher.jar</a> -O .\org.hl7.fhir.publisher.jar</p>



<a name="175583629"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/sample-ig%20-%20_updatePublisher%20failure/near/175583629" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/sample-ig.20-.20_updatePublisher.20failure.html#175583629">(Sep 13 2019 at 00:30)</a>:</h4>
<p>I was surprised to find that 'curl' appears to be installed on my machine.  Is it a standard part of Windows, Unix and MacOS now?</p>



<a name="175584068"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/sample-ig%20-%20_updatePublisher%20failure/near/175584068" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/sample-ig.20-.20_updatePublisher.20failure.html#175584068">(Sep 13 2019 at 00:40)</a>:</h4>
<p>it seems that in windows curl is just an alias to a built in function</p>



<a name="175585401"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/sample-ig%20-%20_updatePublisher%20failure/near/175585401" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/sample-ig.20-.20_updatePublisher.20failure.html#175585401">(Sep 13 2019 at 01:06)</a>:</h4>
<p>curl is not native on windows 7... so no good.</p>



<a name="175587385"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/sample-ig%20-%20_updatePublisher%20failure/near/175587385" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/sample-ig.20-.20_updatePublisher.20failure.html#175587385">(Sep 13 2019 at 01:56)</a>:</h4>
<p>If it's native on Windows and Unix, I might take it anyhow.  Those who are using Windows 7 might have to manage the download on their own.</p>



<a name="175587648"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/sample-ig%20-%20_updatePublisher%20failure/near/175587648" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/sample-ig.20-.20_updatePublisher.20failure.html#175587648">(Sep 13 2019 at 02:03)</a>:</h4>
<p>"If your Windows 10 build is 17063, or later, cUrl is included by default. "</p>



<a name="175587665"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/sample-ig%20-%20_updatePublisher%20failure/near/175587665" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/sample-ig.20-.20_updatePublisher.20failure.html#175587665">(Sep 13 2019 at 02:03)</a>:</h4>
<p>Do you happen to know what the date on 17063 is?  Are we talking last few months or last couple of years?</p>



<a name="175587751"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/sample-ig%20-%20_updatePublisher%20failure/near/175587751" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/sample-ig.20-.20_updatePublisher.20failure.html#175587751">(Sep 13 2019 at 02:05)</a>:</h4>
<p>i think Jan 2018</p>



<a name="175587820"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/sample-ig%20-%20_updatePublisher%20failure/near/175587820" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/sample-ig.20-.20_updatePublisher.20failure.html#175587820">(Sep 13 2019 at 02:07)</a>:</h4>
<p>my PR currently uses wget, will switch to curl as well as i just found out that stock OSX only includes curl and no wget</p>



<a name="175588415"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/sample-ig%20-%20_updatePublisher%20failure/near/175588415" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/sample-ig.20-.20_updatePublisher.20failure.html#175588415">(Sep 13 2019 at 02:22)</a>:</h4>
<p>pushed the change, <a href="http://_updatePublisher.sh" target="_blank" title="http://_updatePublisher.sh">_updatePublisher.sh</a> now uses curl</p>



<a name="175588456"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/sample-ig%20-%20_updatePublisher%20failure/near/175588456" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/sample-ig.20-.20_updatePublisher.20failure.html#175588456">(Sep 13 2019 at 02:22)</a>:</h4>
<p>script also checks if curl is available and exits with an error if not</p>



<a name="175589148"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/sample-ig%20-%20_updatePublisher%20failure/near/175589148" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/sample-ig.20-.20_updatePublisher.20failure.html#175589148">(Sep 13 2019 at 02:40)</a>:</h4>
<p>Awesome</p>



<a name="175589216"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/sample-ig%20-%20_updatePublisher%20failure/near/175589216" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/sample-ig.20-.20_updatePublisher.20failure.html#175589216">(Sep 13 2019 at 02:42)</a>:</h4>
<p>here is my bash for OSX users  it kind of does everything depending on the situation but the p option get the latest Ig-pub - It lives in my downloads and it and keeps the last version of the ig-pub in case the newest one is broken.</p>
<p>ignore the d n and s options those are for my custom script of ig.json an ig.xml</p>
<div class="codehilite"><pre><span></span><span class="ch">#!/bin/bash</span>
<span class="c1"># exit when any command fails</span>
<span class="nb">set</span> -e
<span class="nv">path1</span><span class="o">=</span>/Users/ehaas/Downloads/org.hl7.fhir.igpublisher.jar
<span class="nv">path2</span><span class="o">=</span>/Users/ehaas/Downloads/org.hl7.fhir.igpublisher-old.jar
<span class="nv">path3</span><span class="o">=</span>/Users/ehaas/Documents/FHIR/IG-tools/
<span class="k">while</span> <span class="nb">getopts</span> ds:tonpw option
<span class="k">do</span>
 <span class="k">case</span> <span class="s2">&quot;</span><span class="si">${</span><span class="nv">option</span><span class="si">}</span><span class="s2">&quot;</span>
 in
 d<span class="o">)</span> <span class="nv">DEFN</span><span class="o">=</span><span class="m">1</span><span class="p">;;</span>
 s<span class="o">)</span> <span class="nv">SOURCE</span><span class="o">=</span><span class="si">${</span><span class="nv">OPTARG</span><span class="si">}</span><span class="p">;;</span>
 t<span class="o">)</span> <span class="nv">NA</span><span class="o">=</span><span class="s1">&#39;N/A&#39;</span><span class="p">;;</span>
 o<span class="o">)</span> <span class="nv">PUB</span><span class="o">=</span><span class="m">1</span><span class="p">;;</span>
 n<span class="o">)</span> <span class="nv">USEDEF</span><span class="o">=</span><span class="m">1</span><span class="p">;;</span>
 p<span class="o">)</span> <span class="nv">UPDATE</span><span class="o">=</span><span class="m">1</span><span class="p">;;</span>
 w<span class="o">)</span> <span class="nv">WATCH</span><span class="o">=</span><span class="m">1</span><span class="p">;;</span>
 <span class="k">esac</span>
<span class="k">done</span>
<span class="nb">echo</span> <span class="s2">&quot;=================================================================&quot;</span>
<span class="nb">echo</span> <span class="o">===</span> Publish <span class="nv">$SOURCE</span> IG!!! <span class="k">$(</span>date -u<span class="k">)</span> <span class="o">===</span>
<span class="nb">echo</span> see <span class="s1">&#39;local workflow.md&#39;</span> file <span class="k">for</span> how to use
<span class="nb">echo</span> <span class="s2">&quot;Optional Parameters&quot;</span>
<span class="nb">echo</span> <span class="s1">&#39;-d parameter = create definitions files  = &#39;</span> <span class="nv">$DEFN</span>
<span class="nb">echo</span> <span class="s1">&#39;-n parameter = use definitions source directory definition files  = &#39;</span> <span class="nv">$USEDEF</span>
<span class="nb">echo</span> <span class="s1">&#39;-s parameter = source directory = &#39;</span> <span class="nv">$SOURCE</span>
<span class="nb">echo</span> <span class="s1">&#39;-t parameter for no terminology server (run faster and offline)= &#39;</span> <span class="nv">$NA</span>
<span class="nb">echo</span> <span class="s1">&#39;-o parameter for running previous version of the igpublisher= &#39;</span> <span class="nv">$PUB</span>
<span class="nb">echo</span> <span class="s1">&#39;-p parameter for downloading latest version of the igpublisher from source = &#39;</span> <span class="nv">$UPDATE</span>
<span class="nb">echo</span> <span class="s1">&#39;-w parameter for using watch on igpublisher from source default is off = &#39;</span> <span class="nv">$WATCH</span>
<span class="nb">echo</span> <span class="s1">&#39; current directory =&#39;</span> <span class="nv">$PWD</span>
<span class="nb">echo</span> <span class="s2">&quot;=================================================================&quot;</span>
<span class="nb">echo</span> getting rid of .DS_Store files since they gum up the igpublisher....
find . -name <span class="s1">&#39;.DS_Store&#39;</span> -type f -delete
sleep <span class="m">1</span>
<span class="c1"># git status</span>
<span class="k">if</span> <span class="o">[[</span> <span class="nv">$UPDATE</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>
<span class="nb">echo</span> <span class="s2">&quot;=================================================================&quot;</span>
<span class="nb">echo</span> <span class="o">===</span> get the latest ig-pub <span class="nv">file</span> <span class="o">===</span>
<span class="nb">echo</span> <span class="s2">&quot;=================================================================&quot;</span>
<span class="c1">#mv /Users/ehaas/Downloads/org.hl7.fhir.igpublisher.jar /Users/ehaas/Downloads/org.hl7.fhir.igpublisher-old.jar</span>
<span class="c1"># _L flag for redirects</span>
curl -L https://github.com/FHIR/latest-ig-publisher/raw/master/org.hl7.fhir.publisher.jar -o /Users/ehaas/Downloads/org.hl7.fhir.igpublisher.jar
sleep <span class="m">3</span>
<span class="k">fi</span>

<span class="k">if</span> <span class="o">[[</span> <span class="nv">$DEFN</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>
  <span class="nb">echo</span> <span class="s2">&quot;=================================================================&quot;</span>
  <span class="nb">echo</span> <span class="o">===</span> run definitions maker with optional <span class="nb">source</span> directory name as first <span class="nv">argument</span> <span class="o">===</span>
  <span class="nb">echo</span> <span class="o">===</span> create ig.json and ig.xml in <span class="nv">$PWD</span> and ../<span class="nv">$SOURCE</span> <span class="o">===</span>
  <span class="nb">echo</span> <span class="s2">&quot;=================================================================&quot;</span>
  python3.5 <span class="si">${</span><span class="nv">path3</span><span class="si">}</span>definitions.py <span class="nv">$SOURCE</span>
  sleep <span class="m">3</span>
  git status
<span class="k">fi</span>

<span class="k">if</span> <span class="o">[[</span> <span class="nv">$USEDEF</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>
  <span class="nb">echo</span> <span class="s2">&quot;=================================================================&quot;</span>
  <span class="nb">echo</span> <span class="o">===</span> use definition files from relative path ../<span class="nv">$SOURCE</span> <span class="o">===</span>
  <span class="nb">echo</span> <span class="s2">&quot;=================================================================&quot;</span>
  cp ../<span class="nv">$SOURCE</span>/ig.json <span class="nv">$PWD</span>/ig.json
  sed -i <span class="s2">&quot;&quot;</span> <span class="s2">&quot;s|source/pages|../</span><span class="nv">$SOURCE</span><span class="s2">/source/pages|g&quot;</span> <span class="si">${</span><span class="nv">PWD</span><span class="si">}</span>/ig.json
  sed -i <span class="s2">&quot;&quot;</span> <span class="s2">&quot;s|source/resources|../</span><span class="nv">$SOURCE</span><span class="s2">/source/resources|g&quot;</span> <span class="si">${</span><span class="nv">PWD</span><span class="si">}</span>/ig.json
  sed -i <span class="s2">&quot;&quot;</span> <span class="s2">&quot;s|source/examples|../</span><span class="nv">$SOURCE</span><span class="s2">/source/examples|g&quot;</span> <span class="si">${</span><span class="nv">PWD</span><span class="si">}</span>/ig.json
  sleep <span class="m">3</span>
  git status
<span class="k">fi</span>

<span class="k">if</span> <span class="o">[[</span> <span class="nv">$WATCH</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>
  <span class="nb">echo</span> <span class="s2">&quot;=================================================================&quot;</span>
  <span class="nb">echo</span> <span class="o">===</span>un most recent version of the igpublisher with watch <span class="nv">on</span> <span class="o">===</span>
  <span class="nb">echo</span> <span class="s2">&quot;=================================================================&quot;</span>
  java -jar <span class="si">${</span><span class="nv">path1</span><span class="si">}</span> -ig ig.json -watch -tx <span class="nv">$NA</span>
<span class="k">elif</span> <span class="o">[[</span> <span class="nv">$PUB</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>
  <span class="nb">echo</span> <span class="s2">&quot;=================================================================&quot;</span>
  <span class="nb">echo</span> <span class="o">===</span> run last known good version of the igpublisher run most recent version of the <span class="nv">igpublisher</span> <span class="o">===</span>
  <span class="nb">echo</span> <span class="s2">&quot;=================================================================&quot;</span>
  java -jar <span class="si">${</span><span class="nv">path2</span><span class="si">}</span> -ig ig.json -watch -tx <span class="nv">$NA</span>
<span class="k">else</span>
  <span class="nb">echo</span> <span class="s2">&quot;=================================================================&quot;</span>
  <span class="nb">echo</span> <span class="o">===</span>run igpublisher just once <span class="se">\(</span>no watch option<span class="se">\)</span><span class="o">===</span>
  <span class="nb">echo</span> <span class="s2">&quot;=================================================================&quot;</span>
  java -jar <span class="si">${</span><span class="nv">path1</span><span class="si">}</span> -ig ig.json -tx <span class="nv">$NA</span>
<span class="k">fi</span>
</pre></div>



<a name="175590002"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/sample-ig%20-%20_updatePublisher%20failure/near/175590002" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/sample-ig.20-.20_updatePublisher.20failure.html#175590002">(Sep 13 2019 at 03:07)</a>:</h4>
<p>Yeah, that's more complex than what I want.  First, the .bat/.sh script needs to be user independent and can't assume the existence of a downloads folder.  Second, I want separate scripts for the common combinations so that no-one needs to use commandline - they should be able to just launch whatever type of build they need to run.</p>



<a name="175612206"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/sample-ig%20-%20_updatePublisher%20failure/near/175612206" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/sample-ig.20-.20_updatePublisher.20failure.html#175612206">(Sep 13 2019 at 10:52)</a>:</h4>
<blockquote>
<p>If it's native on Windows and Unix, I might take it anyhow.  Those who are using Windows 7 might have to manage the download on their own.</p>
</blockquote>
<p>Yes I agree. Win7 should not be a limiting factor... but it would be good to be aware of the limit.  Most organizations are off of win7, but there are some machines that have not yet been expired.  I think I am a month or two away from upgrade on the last machine that isn't win10.</p>



<a name="175612431"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/sample-ig%20-%20_updatePublisher%20failure/near/175612431" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/sample-ig.20-.20_updatePublisher.20failure.html#175612431">(Sep 13 2019 at 10:56)</a>:</h4>
<p><span class="user-mention" data-user-id="191404">@John Moehrke</span> i read that PowersHell has an issue with TLS not being set to 1.2</p>



<a name="175612446"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/sample-ig%20-%20_updatePublisher%20failure/near/175612446" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/sample-ig.20-.20_updatePublisher.20failure.html#175612446">(Sep 13 2019 at 10:56)</a>:</h4>
<ul>
<li>Perhaps this helps: run this before the download<br>
[System.Net.ServicePointManager]::SecurityProtocol = [System.Net.SecurityProtocolType]::Tls12;</li>
</ul>



<a name="175612549"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/sample-ig%20-%20_updatePublisher%20failure/near/175612549" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/sample-ig.20-.20_updatePublisher.20failure.html#175612549">(Sep 13 2019 at 10:58)</a>:</h4>
<p>the command line to download is <br>
POWERSHELL -command (new-object System.Net.WebClient).DownloadFile("https://fhir.github.io/latest-ig-publisher/org.hl7.fhir.publisher.jar","org.hl7.fhir.publisher.jar")</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
