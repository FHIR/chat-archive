---
layout: page
title: "FHIR Chat  · IG Publisher and Simplifier packages · IG creation"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/index.html">IG creation</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20and.20Simplifier.20packages.html">IG Publisher and Simplifier packages</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="191884993"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20and%20Simplifier%20packages/near/191884993" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noemi Deppenwiese <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20and.20Simplifier.20packages.html#191884993">(Mar 26 2020 at 13:38)</a>:</h4>
<p>I added external dependencies to my IG (via the "dependsOn" in my IG ressource). Unfortunatly, while this works fine for IG Publisher packages,  I depend on one Simplifier Package (de.basisprofil.r4#0.9.2) which causes an error when added:</p>
<div class="codehilite"><pre><span></span>java.io.IOException: Unable to find the file other/spec.internals in the package de.basisprofil.r4
</pre></div>


<p>Is there any solution / workaround for this error so I can get my IG to build?</p>



<a name="191898754"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20and%20Simplifier%20packages/near/191898754" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20and.20Simplifier.20packages.html#191898754">(Mar 26 2020 at 15:12)</a>:</h4>
<p><span class="user-mention" data-user-id="203235">@Ward Weistra</span></p>



<a name="191901994"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20and%20Simplifier%20packages/near/191901994" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ward Weistra <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20and.20Simplifier.20packages.html#191901994">(Mar 26 2020 at 15:33)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> What's <code>other/spec.internals</code>? Can't find it in <a href="https://confluence.hl7.org/display/FHIR/NPM+Package+Specification" title="https://confluence.hl7.org/display/FHIR/NPM+Package+Specification">https://confluence.hl7.org/display/FHIR/NPM+Package+Specification</a>.<br>
I worry multiple classes of packages are emerging. With or without snapshots, with or without implementation guides. I see multiple users running into that.</p>



<a name="191923700"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20and%20Simplifier%20packages/near/191923700" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Martijn Harthoorn <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20and.20Simplifier.20packages.html#191923700">(Mar 26 2020 at 17:50)</a>:</h4>
<p>This issue is not related to Simplifier. But related to the IG publisher not playing nice with the Package Spec.</p>



<a name="191933666"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20and%20Simplifier%20packages/near/191933666" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20and.20Simplifier.20packages.html#191933666">(Mar 26 2020 at 19:03)</a>:</h4>
<blockquote>
<p>I worry multiple classes of packages are emerging</p>
</blockquote>
<p>yeah well, more collaboration on your part would help with that</p>



<a name="191933770"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20and%20Simplifier%20packages/near/191933770" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20and.20Simplifier.20packages.html#191933770">(Mar 26 2020 at 19:04)</a>:</h4>
<p>I've been trying to make spec.nternals go away but haven't got there yet</p>



<a name="191996563"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20and%20Simplifier%20packages/near/191996563" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ward Weistra <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20and.20Simplifier.20packages.html#191996563">(Mar 27 2020 at 10:08)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> Sorry if we haven't. What's the best way: set a dedicated meeting, discuss at an upcoming FHIR-I, a dedicated Zulip thread? I'll set it up. Topics:</p>
<ul>
<li>Should every package include snapshots or can we expect consumers to be able to generate them? Is it an issue if some do and some don't?</li>
<li>Should every package contain an IG resource? Is it an issue if some do and some don't?</li>
<li>Should packages just the machine-readable content (FHIR resources) of an IG or also the human-readable (pages, images) part?</li>
<li>Should anything be allowed in packages (like the tools-package with images for IGs)?</li>
</ul>
<p>And please add any requirements (spec.internals, others) you have for the IG publisher to the list, so we can discuss whether packages are the place for them and how.</p>



<a name="191998529"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20and%20Simplifier%20packages/near/191998529" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20and.20Simplifier.20packages.html#191998529">(Mar 27 2020 at 10:27)</a>:</h4>
<p>well, we can discuss it here. Some answers:</p>
<ul>
<li>all my packages will contain snapshots, but we haven't said that they must. OTOH, I think there's only 2 sets of code for generating them correctly, so  I think that they should.  I think it's important that we both use the same test cases. I know you haven't done anything about that or we'd be talking about the test cases</li>
</ul>



<a name="191998561"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20and%20Simplifier%20packages/near/191998561" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20and.20Simplifier.20packages.html#191998561">(Mar 27 2020 at 10:27)</a>:</h4>
<ul>
<li>all packages that represent an IG should contain an IG resource. Other packages won't</li>
</ul>



<a name="191998664"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20and%20Simplifier%20packages/near/191998664" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20and.20Simplifier.20packages.html#191998664">(Mar 27 2020 at 10:28)</a>:</h4>
<ul>
<li>I think packages should only contain the machine readable stuff. that's what the package spec says</li>
</ul>



<a name="191998732"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20and%20Simplifier%20packages/near/191998732" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20and.20Simplifier.20packages.html#191998732">(Mar 27 2020 at 10:29)</a>:</h4>
<ul>
<li>anything is allowed in the packages in other folders, and it should still be the case. I use kind to tell the different kinds of packages apart</li>
</ul>



<a name="192013342"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20and%20Simplifier%20packages/near/192013342" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ward Weistra <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20and.20Simplifier.20packages.html#192013342">(Mar 27 2020 at 13:06)</a>:</h4>
<ul>
<li>
<p>Snapshots: I tend to agree it would be better if all packages had them. The worry has been the server load impact, I'll revisit what the impact would be and if we could manage to mandate them. </p>
</li>
<li>
<p>Test cases: Yes, those are important. For the general .NET API there's the ticket you're familiar with: <a href="https://github.com/FirelyTeam/fhir-net-api/issues/1262" title="https://github.com/FirelyTeam/fhir-net-api/issues/1262">https://github.com/FirelyTeam/fhir-net-api/issues/1262</a>. That's for the API team (<span class="user-mention" data-user-id="191328">@Ewout Kramer</span> <span class="user-mention" data-user-id="193551">@Marco Visser</span>) to decide on. Package generation is in a separate library on our side. Are there dedicated tests for package generation, can't find them in <a href="https://github.com/FHIR/fhir-test-cases" title="https://github.com/FHIR/fhir-test-cases">https://github.com/FHIR/fhir-test-cases</a>. We should indeed have those to validate our works against the spec.</p>
</li>
</ul>
<blockquote>
<p>I think packages should only contain the machine readable stuff. that's what the package spec says</p>
</blockquote>
<ul>
<li>I think you are only referring to the package folder in the package, given your next bullet. Indeed the current spec allows anything in other folders (even an empty package folder), but for size (hosting space, download size), security, clarity I'm not very comfortable with that. Packages not meant as the distribution of an API specification/data model seems like a misuse of packages to me.</li>
<li><code>kind</code> is only part of the listing in your feed, for now, right? If it's needed, let's make a proposal to add it to the package manifest if there's already a definition for different kinds of packages in practice.</li>
<li>How about any other requirements the IG publisher has on packages right now? Let's create a proposal for additions to the package spec, perhaps for a specific kind, and discuss it.</li>
</ul>



<a name="192013502"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20and%20Simplifier%20packages/near/192013502" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ward Weistra <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20and.20Simplifier.20packages.html#192013502">(Mar 27 2020 at 13:07)</a>:</h4>
<p><span class="user-mention" data-user-id="221444">@Noemi Deppenwiese</span> Sorry for going deep in the weeds following your question. Grahame, can we think of a shorter-term solution for her?</p>



<a name="192057805"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20and%20Simplifier%20packages/near/192057805" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20and.20Simplifier.20packages.html#192057805">(Mar 27 2020 at 18:08)</a>:</h4>
<p>it's on my todo to finish getting rid of the dependency on spec.internals which was supposed to be gone by now</p>



<a name="193176928"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20and%20Simplifier%20packages/near/193176928" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20and.20Simplifier.20packages.html#193176928">(Apr 07 2020 at 12:10)</a>:</h4>
<p>so returning to this subject... what spec.internals does for me, that the package de.basisprofil.r4#0.9.2 doesn't, is tell me what html reference to use for a canonical URL. And the general canonical URL is not the right reference - there's version issues, and hosting issues (this one doesn't resolve at all)</p>



<a name="193176951"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20and%20Simplifier%20packages/near/193176951" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20and.20Simplifier.20packages.html#193176951">(Apr 07 2020 at 12:10)</a>:</h4>
<p>so I don't know how to depend on the package in an implementation guide</p>



<a name="193176962"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20and%20Simplifier%20packages/near/193176962" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20and.20Simplifier.20packages.html#193176962">(Apr 07 2020 at 12:10)</a>:</h4>
<p><span class="user-mention" data-user-id="203235">@Ward Weistra</span> <span class="user-mention" data-user-id="221444">@Noemi Deppenwiese</span></p>



<a name="193203757"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20and%20Simplifier%20packages/near/193203757" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noemi Deppenwiese <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20and.20Simplifier.20packages.html#193203757">(Apr 07 2020 at 15:19)</a>:</h4>
<p>If i understand you corretly, you're looking for the HTML of the (rendered) IG? As far as I can tell, that is always the "url" in the ImplementationGuide resource for Simplifier IGs.</p>



<a name="193247815"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20and%20Simplifier%20packages/near/193247815" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20and.20Simplifier.20packages.html#193247815">(Apr 07 2020 at 21:04)</a>:</h4>
<p>so that references the root of the ig (with a redirect)</p>



<a name="193247968"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20and%20Simplifier%20packages/near/193247968" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20and.20Simplifier.20packages.html#193247968">(Apr 07 2020 at 21:05)</a>:</h4>
<p>that doesn't make it possible for me to find the url for the individual resources</p>



<a name="193300498"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20and%20Simplifier%20packages/near/193300498" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ward Weistra <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20and.20Simplifier.20packages.html#193300498">(Apr 08 2020 at 10:38)</a>:</h4>
<p>In this case the specific canonicals also redirect to the right pages in the Simplifier project, right? E.g.</p>
<ul>
<li><a href="http://fhir.de/CodeSystem/arge-ik/klassifikation" title="http://fhir.de/CodeSystem/arge-ik/klassifikation">http://fhir.de/CodeSystem/arge-ik/klassifikation</a> -&gt; <a href="https://simplifier.net/BasisprofilDE/klassifikation" title="https://simplifier.net/BasisprofilDE/klassifikation">https://simplifier.net/BasisprofilDE/klassifikation</a></li>
<li><a href="http://fhir.de/StructureDefinition/practitioner-de-basis" title="http://fhir.de/StructureDefinition/practitioner-de-basis">http://fhir.de/StructureDefinition/practitioner-de-basis</a> -&gt; <a href="https://simplifier.net/BasisprofilDE/practitioner-de-basis" title="https://simplifier.net/BasisprofilDE/practitioner-de-basis">https://simplifier.net/BasisprofilDE/practitioner-de-basis</a></li>
</ul>
<p>For the more general case I get your point, this might not always be the case. I'll think about how we can provide that in general and how we could add that requirement to the spec.<br>
What's the use of those html-URLs? Are you making web links in the IG publisher's results to where the parent profiles are described?</p>



<a name="193307936"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20and%20Simplifier%20packages/near/193307936" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20and.20Simplifier.20packages.html#193307936">(Apr 08 2020 at 11:55)</a>:</h4>
<p>interesting. the first canonical I tried didn't even resolve. those ones you have there do. but how does versioning work?</p>



<a name="193307947"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20and%20Simplifier%20packages/near/193307947" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20and.20Simplifier.20packages.html#193307947">(Apr 08 2020 at 11:55)</a>:</h4>
<p>and yes, that's the use</p>



<a name="193307972"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20and%20Simplifier%20packages/near/193307972" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20and.20Simplifier.20packages.html#193307972">(Apr 08 2020 at 11:55)</a>:</h4>
<p>the packaging, it doesn't matter, but the generated html links to the right version of the content</p>



<a name="193308107"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20and%20Simplifier%20packages/near/193308107" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20and.20Simplifier.20packages.html#193308107">(Apr 08 2020 at 11:57)</a>:</h4>
<p>I'm moving away from spec.internals because we added a way to do that in the IG resource in R4. So that means that the IG generator has to find somewhere to put an R4 IG for older versions of the spec ... that's why I haven't done it yet; it holds certain... challenges...</p>



<a name="197699421"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20and%20Simplifier%20packages/near/197699421" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ward Weistra <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20and.20Simplifier.20packages.html#197699421">(May 15 2020 at 14:29)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> What do packages in practice currently need to have on top of <a href="https://confluence.hl7.org/display/FHIR/NPM+Package+Specification#NPMPackageSpecification-ImplementationGuidesandpackages">https://confluence.hl7.org/display/FHIR/NPM+Package+Specification#NPMPackageSpecification-ImplementationGuidesandpackages</a> to be accepted as a dependency for the IG publisher?</p>
<ol>
<li><code>other/spec.internals</code>?</li>
<li><code>.index.json</code> not anymore, right?</li>
<li>I see in a created package both <code>ig-r4.json</code> and <code>ImplementationGuide-nl.wardweistra.acme.json</code>. Is that needed (not sure why this happened, maybe misuse of IG publisher by me)?</li>
<li>In the package manifest: <code>directories</code>? <code>tools-version</code>? <code>type</code>? <code>date</code>?</li>
<li>Anything else?</li>
</ol>



<a name="197725431"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20and%20Simplifier%20packages/near/197725431" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20and.20Simplifier.20packages.html#197725431">(May 15 2020 at 17:31)</a>:</h4>
<ul>
<li>not required: .index.json will be built on the fly if not not found</li>
<li>required in the package manifest (I think): name | version | canonical | url | fhirVersions (if no dependency) </li>
</ul>
<p>With regard to spec.internals, we are trying to phase it out, but haven't done so yet. It's how I locate resources to refer to them in the web. Last time round we discussed this, simplifier packages do not have a way to locate the correct version on the web, and the discussion stopped before this was resolved. So right now, I can't depend on simplifier packages because this is unresolved. One way to resolve this would be spec.internals, but I'm trying to phase that out and replace it with just using the IG resource, but I need the more recent version of the IG resource to do that. Hence, producing ig-r.json. Only, I don't use that yet, because the we didn't finish that discussion I referred to above.</p>



<a name="197728824"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20and%20Simplifier%20packages/near/197728824" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ward Weistra <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20and.20Simplifier.20packages.html#197728824">(May 15 2020 at 17:56)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> Simplifier has a way to find the webpage for a specific resource by providing a package name + version and canonical: eg <a href="https://simplifier.net/resolve?scope=nictiz.fhir.nl.stu3.zib2017@1.3.9&amp;canonical=http://fhir.nl/fhir/StructureDefinition/nl-core-patient">https://simplifier.net/resolve?scope=nictiz.fhir.nl.stu3.zib2017@1.3.9&amp;canonical=http://fhir.nl/fhir/StructureDefinition/nl-core-patient</a>. I guess that could be a way for the IG Publisher to link to the web version.</p>
<p>Another way could of course be to change the IG publisher logic, to not require having a direct link to the parent profile, but linking to the base URL for the Implementation Guide (from the IG resource) and let them find the right parent profile themselves? A little less user friendly, but it more robust, not needing any data that isn't guaranteed to be there.</p>



<a name="197729102"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20and%20Simplifier%20packages/near/197729102" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20and.20Simplifier.20packages.html#197729102">(May 15 2020 at 17:58)</a>:</h4>
<blockquote>
<p>A little less user friendly</p>
</blockquote>
<p>Entirely not at all user friendly and I won't consider it</p>



<a name="197729290"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20and%20Simplifier%20packages/near/197729290" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20and.20Simplifier.20packages.html#197729290">(May 15 2020 at 17:59)</a>:</h4>
<p>why is the other method not guaranteed?</p>



<a name="197729720"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20and%20Simplifier%20packages/near/197729720" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ward Weistra <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20and.20Simplifier.20packages.html#197729720">(May 15 2020 at 18:02)</a>:</h4>
<p>The resolve URL (<a href="https://simplifier.net/resolve?scope=nictiz.fhir.nl.stu3.zib2017@1.3.9&amp;canonical=http://fhir.nl/fhir/StructureDefinition/nl-core-patient">https://simplifier.net/resolve?scope=nictiz.fhir.nl.stu3.zib2017@1.3.9&amp;canonical=http://fhir.nl/fhir/StructureDefinition/nl-core-patient</a>) works for every package in the package registry.</p>



<a name="197729797"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20and%20Simplifier%20packages/near/197729797" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20and.20Simplifier.20packages.html#197729797">(May 15 2020 at 18:03)</a>:</h4>
<p>so it is guaranteed then?</p>



<a name="197730461"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20and%20Simplifier%20packages/near/197730461" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ward Weistra <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20and.20Simplifier.20packages.html#197730461">(May 15 2020 at 18:08)</a>:</h4>
<p>That URL is. So, I'm happy if you want to use that to create these links.</p>



<a name="197730501"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20and%20Simplifier%20packages/near/197730501" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20and.20Simplifier.20packages.html#197730501">(May 15 2020 at 18:08)</a>:</h4>
<p>ok I'll work on that next week</p>



<a name="198155945"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20and%20Simplifier%20packages/near/198155945" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20and.20Simplifier.20packages.html#198155945">(May 20 2020 at 05:23)</a>:</h4>
<p>so the problem for me is that I can't tell whether a package is a simplifier package or not. There's no way is there?</p>



<a name="198157331"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20and%20Simplifier%20packages/near/198157331" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20and.20Simplifier.20packages.html#198157331">(May 20 2020 at 05:53)</a>:</h4>
<p><span class="user-mention" data-user-id="203235">@Ward Weistra</span></p>



<a name="198160569"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20and%20Simplifier%20packages/near/198160569" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ward Weistra <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20and.20Simplifier.20packages.html#198160569">(May 20 2020 at 06:55)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> Not yet. Although for now likely every package not from the IG publisher will be a Simplifier package? But that might someday change. (Still the url pattern will give a page for each registry package)</p>
<p>I expect the Registry work to introduce a way to show from which feed it came to the registry. But perhaps it's better if you didn't have to write code per feed and in the package spec, we add support for either adding a link per resource (already there with via the manifest of the IG resource?) or providing a url pattern?</p>
<p>Do you ever need web urls for examples from dependency packages? Since I believe they generally don't have a canonical the resolving URL pattern based on canonical doesn't work for them.</p>



<a name="198161737"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20and%20Simplifier%20packages/near/198161737" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20and.20Simplifier.20packages.html#198161737">(May 20 2020 at 07:12)</a>:</h4>
<p>for IGs that we publish, all resources resolve, not just the canonicals.</p>



<a name="198161775"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20and%20Simplifier%20packages/near/198161775" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20and.20Simplifier.20packages.html#198161775">(May 20 2020 at 07:12)</a>:</h4>
<p>that's convenient but not mandatory. But if people reference them, what to do but reference their web location?</p>



<a name="198161882"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20and%20Simplifier%20packages/near/198161882" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20and.20Simplifier.20packages.html#198161882">(May 20 2020 at 07:14)</a>:</h4>
<p>it's true that all packages that don't have a spec.internals currently come from simplifier.</p>



<a name="198161928"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20and%20Simplifier%20packages/near/198161928" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20and.20Simplifier.20packages.html#198161928">(May 20 2020 at 07:15)</a>:</h4>
<p>it would be good to transition to ImplementationGuide.manifest.resource.relativePath. That's still on my todo list</p>



<a name="198165952"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20and%20Simplifier%20packages/near/198165952" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20and.20Simplifier.20packages.html#198165952">(May 20 2020 at 08:02)</a>:</h4>
<p><span class="user-mention" data-user-id="203235">@Ward Weistra</span> Simplifier is not populating StructureDefinition.derivation. The Java code won't process structure definitions unless they declare whether they are a constraint or a specialization. </p>
<p>Technically, the element is optional since there's one type that doesn't have a base definition. Otherwise, it's supposed to be populated but we overlooked making the constraint. </p>
<p>I suppose Simplifier imagines that "constraint" is the default. But is it set for logical models?</p>



<a name="198210730"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20and%20Simplifier%20packages/near/198210730" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ward Weistra <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20and.20Simplifier.20packages.html#198210730">(May 20 2020 at 14:59)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> I asked this in the API team and it seems Forge does populate <code>StructureDefinition.derivation</code> with <code>constraint</code> for StructureDefinitions and <code>specialization</code> for Logical Models and snapshot generator does not touch it. Perhaps we don't fill it if people upload a SD without it.</p>
<p>Taking a random (not random, my goto profile actually) it does seem to be filled: <a href="https://simplifier.net/NictizSTU3-Zib2017/nl-core-patient/~xml">https://simplifier.net/NictizSTU3-Zib2017/nl-core-patient/~xml</a>. Any specific packages where you ran into this?</p>



<a name="198250630"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20and%20Simplifier%20packages/near/198250630" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20and.20Simplifier.20packages.html#198250630">(May 20 2020 at 20:08)</a>:</h4>
<p>The first package I worked with is de.basisprofil.r4#0.9.2 - Extension-gender-amtlich-de.json</p>



<a name="198261903"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20and%20Simplifier%20packages/near/198261903" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ward Weistra <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20and.20Simplifier.20packages.html#198261903">(May 20 2020 at 21:53)</a>:</h4>
<p>Indeed, it is not filled in that Extension in that package version: <a href="https://simplifier.net/packages/de.basisprofil.r4/0.9.2/files/114506/~xml">https://simplifier.net/packages/de.basisprofil.r4/0.9.2/files/114506/~xml</a><br>
However, it is filled in the most recent version of the package: <a href="https://simplifier.net/packages/de.basisprofil.r4/0.9.6/files/129547/~xml">https://simplifier.net/packages/de.basisprofil.r4/0.9.6/files/129547/~xml</a><br>
Added to the extension in March: <a href="https://simplifier.net/Basisprofil-DE-R4/GenderAmtlichDE/$diff/4/5/Original">https://simplifier.net/Basisprofil-DE-R4/GenderAmtlichDE/$diff/4/5/Original</a><br>
Seems <span class="user-mention" data-user-id="191451">@Patrick Werner</span> <a href="https://github.com/hl7germany/basisprofil-de-r4/commit/4b2564bc90da9e66ca6b0263f9af25c750c1887f#diff-5162d63e92b86810dbc7431bb9a4d9a3">added it manually</a>, likely because the Java tooling didn't like it? Patrick, do you know how the extension was created, why derivation was missing in the first place? Or perhaps the creator <span class="user-mention" data-user-id="191450">@Simone Heckmann</span>? Since Forge seems to include it with any new Extension and doesn't even allow you to change it.</p>



<a name="198271630"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20and%20Simplifier%20packages/near/198271630" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20and.20Simplifier.20packages.html#198271630">(May 20 2020 at 23:53)</a>:</h4>
<p>ok, well, the next release of the IG publisher will support simplifier packages. At least in principle. You can now declare a simplifier package in your dependencies:</p>
<div class="codehilite"><pre><span></span><code>  <span class="nt">&lt;dependsOn</span> <span class="na">id=</span><span class="s">&quot;debasis&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;uri</span> <span class="na">value=</span><span class="s">&quot;http://fhir.de&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;packageId</span> <span class="na">value=</span><span class="s">&quot;de.basisprofil.r4&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;version</span> <span class="na">value=</span><span class="s">&quot;0.9.6&quot;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;/dependsOn&gt;</span>
</code></pre></div>


<p>And the IG will run. I expect that there will be lots of downstream problems, so I'm just calling this provisional support at this time</p>



<a name="198271719"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20and%20Simplifier%20packages/near/198271719" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20and.20Simplifier.20packages.html#198271719">(May 20 2020 at 23:54)</a>:</h4>
<p>note that for simplifier packages, it's the packageId and version that matter - the canonical URL can be determined from the package</p>



<a name="198519111"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20and%20Simplifier%20packages/near/198519111" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Mayfield <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20and.20Simplifier.20packages.html#198519111">(May 23 2020 at 05:11)</a>:</h4>
<p>Would it be possible for me to test UK/NHS packages with this? <span class="user-mention" data-user-id="203235">@Ward Weistra</span> Presume I run the IG Publisher against the simplifier package?</p>



<a name="198521644"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20and%20Simplifier%20packages/near/198521644" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20and.20Simplifier.20packages.html#198521644">(May 23 2020 at 06:39)</a>:</h4>
<p>it would be good for you to try. You can't 'run the IG publisher against the simplifier package'. What you can do is refer to a simplifier package from an IG publisher project</p>



<a name="198525892"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20and%20Simplifier%20packages/near/198525892" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ward Weistra <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20and.20Simplifier.20packages.html#198525892">(May 23 2020 at 08:50)</a>:</h4>
<p>Wonderful <span class="user-mention" data-user-id="191316">@Grahame Grieve</span>, thanks. I'll get testing on Monday. Both on depending on a Simplifier package with IG publisher and creating an IG publisher IG from a Simplifier project.</p>



<a name="200956564"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20and%20Simplifier%20packages/near/200956564" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ward Weistra <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20and.20Simplifier.20packages.html#200956564">(Jun 15 2020 at 23:09)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191316">Grahame Grieve</span> <a href="#narrow/stream/179252-IG-creation/topic/IG.20Publisher.20and.20Simplifier.20packages/near/197725431">said</a>:</p>
<blockquote>
<ul>
<li>not required: .index.json will be built on the fly if not not found</li>
</ul>
</blockquote>
<p>Thoughts on why I run into this error building an IG with the publisher on <a href="https://simplifier.net/packages/de.basisprofil.r4/0.9.7">de.basisprofil.r4@0.9.7</a>?</p>
<div class="codehilite"><pre><span></span><code>Publishing Content Failed: Error parsing C:\Users\Ward\.fhir\packages\de.basisprofil.r4#0.9.7\package\.index.json: null (00:26.0931)
                                                                                 (00:26.0931)
Use -? to get command line help                                                  (00:26.0931)
                                                                                 (00:26.0932)
Stack Dump (for debugging):                                                      (00:26.0932)
java.io.IOException: Error parsing C:\Users\Ward\.fhir\packages\de.basisprofil.r4#0.9.7\package\.index.json: null
        at org.hl7.fhir.utilities.cache.NpmPackage.loadFiles(NpmPackage.java:251)
        at org.hl7.fhir.utilities.cache.NpmPackage.fromFolder(NpmPackage.java:213)
        at org.hl7.fhir.utilities.cache.FilesystemPackageCacheManager.loadPackageInfo(FilesystemPackageCacheManager.java:144)
        at org.hl7.fhir.utilities.cache.FilesystemPackageCacheManager.loadPackageFromCacheOnly(FilesystemPackageCacheManager.java:311)
        at org.hl7.fhir.igtools.publisher.Publisher.loadIg(Publisher.java:2533)
        at org.hl7.fhir.igtools.publisher.Publisher.initializeFromIg(Publisher.java:1745)
        at org.hl7.fhir.igtools.publisher.Publisher.initialize(Publisher.java:1325)
        at org.hl7.fhir.igtools.publisher.Publisher.execute(Publisher.java:692)
        at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:7533)
Caused by: java.lang.NullPointerException
        at org.hl7.fhir.utilities.cache.NpmPackage$NpmPackageFolder.readIndex(NpmPackage.java:125)
        at org.hl7.fhir.utilities.cache.NpmPackage.loadFiles(NpmPackage.java:249)
        ... 8 more
</code></pre></div>



<a name="201019327"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20and%20Simplifier%20packages/near/201019327" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ward Weistra <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20and.20Simplifier.20packages.html#201019327">(Jun 16 2020 at 14:02)</a>:</h4>
<p>Got the same when using <code>hl7.fhir.us.core</code>... Removed the FHIR cache and now it runs for us.core.</p>



<a name="201020516"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20and%20Simplifier%20packages/near/201020516" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ward Weistra <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20and.20Simplifier.20packages.html#201020516">(Jun 16 2020 at 14:10)</a>:</h4>
<p>Aaand it also runs for <code>de.basisprofil.r4</code> now <span aria-label="heart" class="emoji emoji-2764" role="img" title="heart">:heart:</span></p>



<a name="201021169"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20and%20Simplifier%20packages/near/201021169" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ward Weistra <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20and.20Simplifier.20packages.html#201021169">(Jun 16 2020 at 14:15)</a>:</h4>
<p>I do get some curious errors though, especially:</p>
<blockquote>
<p>unable to parse character reference [...] This structure is derived from &lt;a href="null/https://simplifier.net/resolve?scope=de.basisprofil.r4@0.9.7&amp;canonical=http://fhir.de/StructureDefinition/practitioner-de-basis"&gt;PractitionerDeBasis&lt;/a&gt; [...]<br>
<a href="/user_uploads/10155/MLfte1E6E7sDcUZuH0oY9No6/image.png">image.png</a> </p>
</blockquote>
<p>Is that <code>null</code> the IG base URL or something?</p>



<a name="201024164"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20and%20Simplifier%20packages/near/201024164" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ward Weistra <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20and.20Simplifier.20packages.html#201024164">(Jun 16 2020 at 14:34)</a>:</h4>
<p>Terminal output:</p>
<div class="codehilite"><pre><span></span><code>Internal error in location for message: &#39;Error in ?? at 1, 1: Premature ExpressionNode termination at unexpected token &quot;:&quot;&#39;, loc = &#39;C:\Users\Ward\Documents\FHIR workspace\R4\SushiProjectGerman\build\output\StructureDefinition-anId-d&#39;, err = &#39;unable to parse character reference &#39;canonical=http://fhir.de/StructureDefinition/identifier-lanr&quot; t&#39;
Internal error in location for message: &#39;Error in ?? at 1, 1: Premature ExpressionNode termination at unexpected token &quot;:&quot;&#39;, loc = &#39;C:\Users\Ward\Documents\FHIR workspace\R4\SushiProjectGerman\build\output\StructureDefinition-anId.h&#39;, err = &#39;unable to parse character reference &#39;canonical=http://fhir.de/StructureDefinition/practitioner-de-ba&#39;
</code></pre></div>


<p>Would love to hear if this is a legitimate problem with the package or other pointers.</p>



<a name="201165383"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20and%20Simplifier%20packages/near/201165383" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ward Weistra <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20and.20Simplifier.20packages.html#201165383">(Jun 17 2020 at 16:23)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> Where does the IG publisher get packages, specifically the <code>hl7.fhir.us.core</code> package, from? From using the IG publisher, I get a different version of the <code>hl7.fhir.us.core@3.1.0</code> package (with a single package root folder). From using Sushi or Forge I get the one being served from <a href="http://packages.fhir.org">packages.fhir.org</a>, still with the multiple root folder as it was offered originally.<br>
Multiple versions of the same package version are really scary to me. Can we make the IG publisher look on <a href="http://packages.fhir.org">packages.fhir.org</a> first?</p>
<p>Also, the IG publisher fails with the above <code>java.io.IOException: Error parsing C:\Users\Ward\.fhir\packages\hl7.fhir.us.core#3.1.0\package\.index.json: null</code> error when using the package from the package cache if installed with Forge. It doesn't fail when Sushi (or the IG publisher) installs the package. I assume that is because Sushi is also updating the package/.index.json file which IG Publisher then still relies on, because I see the .index.json in the Sushi version of the package is indeed updated.</p>



<a name="201166006"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20and%20Simplifier%20packages/near/201166006" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20and.20Simplifier.20packages.html#201166006">(Jun 17 2020 at 16:28)</a>:</h4>
<p><span class="user-mention" data-user-id="203235">@Ward Weistra</span> -- see this thread which speaks of the magic IG Publisher (and now SUSH) does for older package formats: <a href="#narrow/stream/215610-shorthand/topic/dev.20dependencies/near/199502644">https://chat.fhir.org/#narrow/stream/215610-shorthand/topic/dev.20dependencies/near/199502644</a></p>
<p>In short, when we detect the old package format, we fix it before storing it in the <code>.fhir</code> cache.</p>



<a name="201167150"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20and%20Simplifier%20packages/near/201167150" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ward Weistra <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20and.20Simplifier.20packages.html#201167150">(Jun 17 2020 at 16:37)</a>:</h4>
<p>Thanks <span class="user-mention" data-user-id="191469">@Chris Moesel</span>. I read that earlier, but didn't comprehend the impact. I've updated my sushi and indeed see the same post-processed package coming from sushi and IG publisher.</p>
<p>However, sushi doesn't fail on the package installed by Forge (without an post-processed package/.index.json), where the IG publisher does. That is still something that likely needs resolving.</p>



<a name="201169555"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20and%20Simplifier%20packages/near/201169555" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20and.20Simplifier.20packages.html#201169555">(Jun 17 2020 at 16:56)</a>:</h4>
<p>SUSHI doesn't even look at the <code>.index.json</code> file, so that may be why it doesn't fail.</p>



<a name="201194732"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20and%20Simplifier%20packages/near/201194732" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20and.20Simplifier.20packages.html#201194732">(Jun 17 2020 at 20:16)</a>:</h4>
<p>how do I get forge to install a package?</p>



<a name="201197982"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20and%20Simplifier%20packages/near/201197982" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20and.20Simplifier.20packages.html#201197982">(Jun 17 2020 at 20:44)</a>:</h4>
<p>I can't reproduce this: </p>
<blockquote>
<p>Internal error in location for message: 'Error in ?? at 1, 1: Premature ExpressionNode termination at unexpected token ":"', loc = 'C:\Users\Ward\Documents\FHIR workspace\R4\SushiProjectGerman\build\output\StructureDefinition-anId-d', err = 'unable to parse character reference 'canonical=http://fhir.de/StructureDefinition/identifier-lanr" t'</p>
</blockquote>



<a name="201198036"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20and%20Simplifier%20packages/near/201198036" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20and.20Simplifier.20packages.html#201198036">(Jun 17 2020 at 20:44)</a>:</h4>
<p>and I can't figure out how to get torinox to run, or forge to install a package. but do you get a stack dump?</p>



<a name="201234830"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20and%20Simplifier%20packages/near/201234830" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20and.20Simplifier.20packages.html#201234830">(Jun 18 2020 at 07:17)</a>:</h4>
<p><span class="user-mention" data-user-id="203235">@Ward Weistra</span> The .index.json file that Torinox installs does not conform to the specification, so the IG pbulisher fails to read it. The specification is here: <a href="https://confluence.hl7.org/display/FHIR/NPM+Package+Specification#NPMPackageSpecification-.index.json">https://confluence.hl7.org/display/FHIR/NPM+Package+Specification#NPMPackageSpecification-.index.json</a></p>
<p>Instead, the torinox file looks like:</p>
<div class="codehilite"><pre><span></span><code>{
  &quot;date&quot;: &quot;2020-06-18T17:11:33.8586458+10:00&quot;,
  &quot;canonicals&quot;: {
    &quot;http://hl7.org/fhir/us/core/CapabilityStatement/us-core-client&quot;: &quot;CapabilityStatement-us-core-client.json&quot;,
...
</code></pre></div>



<a name="201237762"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20and%20Simplifier%20packages/near/201237762" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20and.20Simplifier.20packages.html#201237762">(Jun 18 2020 at 07:57)</a>:</h4>
<p>IG publisher won't crash in the future. It'll just overwrite any .index.json that doesn't have <code>"index-version": 1</code> as specified.</p>



<a name="201261464"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20and%20Simplifier%20packages/near/201261464" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ward Weistra <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20and.20Simplifier.20packages.html#201261464">(Jun 18 2020 at 12:38)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> Sorry, I was completely convinced the .NET packages library didn't touch package/.index.json, but you are right that it does. I'll look into fixing that, but regenerating it as stated in the spec should work.<br>
Installing with Forge: Open a Profile Folder &gt; go to Dependencies tab &gt; Select Simplifier to search there &gt; Search for package name &gt; Select version and click Add.</p>



<a name="201263635"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20and%20Simplifier%20packages/near/201263635" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ward Weistra <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20and.20Simplifier.20packages.html#201263635">(Jun 18 2020 at 12:59)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> The only likely relevant part in the terminal on the internal error seems to be:</p>
<div class="codehilite"><pre><span></span><code>Generating Summary Outputs                                                       (00:39.0686)
Sending Usage Stats to Server                                                    (00:49.0863)
Jekyll: Source: C:/Users/Ward/Documents/FHIR workspace/R4/SushiProjectGerman/build/temp/pages (00:54.0547)
Jekyll: Generating...                                                            (00:54.0548)
Jekyll: done in 2.294 seconds.                                                   (00:56.0848)
Installing nl.wardweistra.acme#dev to the package cache
  Fetching:
  Installing: Checking Output HTML                                                             (00:57.0152)
found 517 files                                                                  (00:57.0207)
  ... 517 html files, 2 pages invalid xhtml (0%)                                 (01:03.0488)
  ... 31089 links, 11 broken links (0%)                                          (01:03.0489)
Build final .zip                                                                 (01:03.0489)
Final .zip built                                                                 (01:04.0013)
context [anonymous] 2:13 attribute path isn&#39;t defined
Internal error in location for message: &#39;Error in ?? at 1, 1: Premature ExpressionNode termination at unexpected token &quot;:&quot;&#39;, loc = &#39;C:\Users\Ward\Documents\FHIR workspace\R4\SushiProjectGerman\build\output\StructureDefinition-anId-d&#39;, err = &#39;unable to parse character reference &#39;canonical=http://fhir.de/StructureDefinition/identifier-lanr&quot; t&#39;
Internal error in location for message: &#39;Error in ?? at 1, 1: Premature ExpressionNode termination at unexpected token &quot;:&quot;&#39;, loc = &#39;C:\Users\Ward\Documents\FHIR workspace\R4\SushiProjectGerman\build\output\StructureDefinition-anId.h&#39;, err = &#39;unable to parse character reference &#39;canonical=http://fhir.de/StructureDefinition/practitioner-de-ba&#39;
Finished. 00:34.0645. Validation output in C:\Users\Ward\Documents\FHIR workspace\R4\SushiProjectGerman\build\output\qa.html
Errors: 2, Warnings: 3, Info: 0, Broken Links = 11 (01:04.0393)
Done                                                                             (01:04.0399)
Press any key to continue . . .
</code></pre></div>


<p>Or is there a place to find more output?</p>
<p>My ImplementationGuide has:</p>
<div class="codehilite"><pre><span></span><code>  &quot;dependsOn&quot;: [
    {
      &quot;uri&quot;: &quot;https://simplifier.net/guide/basisprofil-de-r4&quot;,
      &quot;packageId&quot;: &quot;de.basisprofil.r4&quot;,
      &quot;id&quot;: &quot;de_basisprofil_r4&quot;,
      &quot;version&quot;: &quot;0.9.7&quot;
    }
  ]
</code></pre></div>


<p>The only resource I'm using is a very simple derived profile from the <a href="https://simplifier.net/packages/de.basisprofil.r4/0.9.7/files/133437">German base practitioner</a>.</p>



<a name="201269417"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20and%20Simplifier%20packages/near/201269417" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ward Weistra <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20and.20Simplifier.20packages.html#201269417">(Jun 18 2020 at 13:45)</a>:</h4>
<p>Here's the project on Github for reproduction: <a href="https://github.com/wardweistra/SushiProjectGerman">https://github.com/wardweistra/SushiProjectGerman</a></p>



<a name="201297084"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20and%20Simplifier%20packages/near/201297084" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20and.20Simplifier.20packages.html#201297084">(Jun 18 2020 at 17:00)</a>:</h4>
<p>ok thanks. I'll look into it</p>



<a name="201344776"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20and%20Simplifier%20packages/near/201344776" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20and.20Simplifier.20packages.html#201344776">(Jun 19 2020 at 01:38)</a>:</h4>
<p>ok, well, we haven't had a canonical URL that included a &amp; before. All the errors were associated with that. I've fixed them in the next release (probably about 24 hours away)</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
