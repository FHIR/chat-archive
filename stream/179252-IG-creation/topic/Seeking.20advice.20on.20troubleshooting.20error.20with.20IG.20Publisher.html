---
layout: page
title: "FHIR Chat  · Seeking advice on troubleshooting error with IG Publisher · IG creation"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/index.html">IG creation</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Seeking.20advice.20on.20troubleshooting.20error.20with.20IG.20Publisher.html">Seeking advice on troubleshooting error with IG Publisher</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153952008"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Seeking%20advice%20on%20troubleshooting%20error%20with%20IG%20Publisher/near/153952008" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David McKillop <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Seeking.20advice.20on.20troubleshooting.20error.20with.20IG.20Publisher.html#153952008">(Apr 12 2018 at 05:34)</a>:</h4>
<p>After <span class="user-mention" data-user-id="191336">@Michel Rutten</span>  identified (resolved in a forthcoming release)  the issue experienced with Forge:<br>
<a href="#narrow/stream/implementers/topic/Forge.20error.20when.20adding.20Must.20support.20.3D.20true.20to.20an.20extension" title="#narrow/stream/implementers/topic/Forge.20error.20when.20adding.20Must.20support.20.3D.20true.20to.20an.20extension">https://chat.fhir.org/#narrow/stream/implementers/topic/Forge.20error.20when.20adding.20Must.20support.20.3D.20true.20to.20an.20extension</a><br>
<span class="user-mention" data-user-id="191316">@Grahame Grieve</span> , <span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span>  - I’m seeking advice with troubleshooting an error encountered with the IG Publisher.  <br>
While running IG Publisher (v3.2.0-13560, gen-code v3.2.0-13475) the following error is encountered:</p>
<div class="codehilite"><pre><span></span>process res: relatedperson-levelone                                              (25.0085sec)
process res: patient-levelone                                                    (25.0351sec)
Exception in thread &quot;main&quot; java.lang.Error: Not handled yet (sortElements: Patient.deceased[x]:boolean, dateTime)
        at org.hl7.fhir.r4.conformance.ProfileUtilities.sortElements(ProfileUtilities.java:2982)
        at org.hl7.fhir.r4.conformance.ProfileUtilities.sortDifferential(ProfileUtilities.java:2906)
        at org.hl7.fhir.r4.context.SimpleWorkerContext.seeMetadataResource(SimpleWorkerContext.java:508)
        at org.hl7.fhir.r4.context.BaseWorkerContext.cacheResource(BaseWorkerContext.java:188)
        at org.hl7.fhir.igtools.publisher.Publisher.load(Publisher.java:2110)
        at org.hl7.fhir.igtools.publisher.Publisher.loadConformance(Publisher.java:1778)
        at org.hl7.fhir.igtools.publisher.Publisher.createIg(Publisher.java:426)
        at org.hl7.fhir.igtools.publisher.Publisher.execute(Publisher.java:390)
        at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:4314)
</pre></div>


<p>The file containing this code and the IG Publisher debug file are attached.<br>
If you need any further information, please let me know.  <br>
<a href="/user_uploads/10155/MTvRae4B_baRlJm-sy6GvZ-a/patient-levelone.xml" target="_blank" title="patient-levelone.xml">patient-levelone.xml</a> <a href="/user_uploads/10155/rOq2bdTABZG7wR-ny0ktSfBL/IG-Publisher-DeBug-20180412.txt" target="_blank" title="IG-Publisher-DeBug-20180412.txt">IG-Publisher-DeBug-20180412.txt</a></p>



<a name="153952012"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Seeking%20advice%20on%20troubleshooting%20error%20with%20IG%20Publisher/near/153952012" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Seeking.20advice.20on.20troubleshooting.20error.20with.20IG.20Publisher.html#153952012">(Apr 12 2018 at 05:38)</a>:</h4>
<p>I'll have to debug that. probably over the weekend.</p>



<a name="153952014"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Seeking%20advice%20on%20troubleshooting%20error%20with%20IG%20Publisher/near/153952014" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David McKillop <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Seeking.20advice.20on.20troubleshooting.20error.20with.20IG.20Publisher.html#153952014">(Apr 12 2018 at 05:39)</a>:</h4>
<p>OK - thanks.</p>



<a name="153955147"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Seeking%20advice%20on%20troubleshooting%20error%20with%20IG%20Publisher/near/153955147" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David McKillop <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Seeking.20advice.20on.20troubleshooting.20error.20with.20IG.20Publisher.html#153955147">(May 01 2018 at 01:46)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="191316">@Grahame Grieve</span>  the following is probably related to the above issue:<br>
When I run the IG Publisher (v3.4.0-13713, gen-code v3.4.0-13690) with the file <br>
<a href="/user_uploads/10155/RzG17B_o04Ex4oJ4Jt2O0F9n/patient-dh-base.xml" target="_blank" title="patient-dh-base.xml">patient-dh-base.xml</a> <br>
the IG publisher runs fine.<br>
When I then delete the invariant "inv-dh-pat-01" on Patient<br>
<a href="/user_uploads/10155/o_qHjq2JR5a_HuYCq31U4lSE/patient-dh-base.xml" target="_blank" title="patient-dh-base.xml">patient-dh-base.xml</a><br>
 and run the IG Publisher, I get the following errors:</p>
<div class="codehilite"><pre><span></span>process type: StructureDefinition                                                (25.0451sec)
process res: patient-dh-base                                                     (25.0451sec)
-tx: Terminology server: Check for supported code systems for urn:ietf:bcp:47
Error in snapshot generation: Differential for http://ns.electronichealth.net.au/ci/fhir/StructureDefinition/patient-dh-base with id: Patient.deceased[x]:deceasedboolean has an element that is not marked with a snapshot match
Publishing Content Failed: Exception loading http://ns.electronichealth.net.au/ci/fhir/StructureDefinition/patient-dh-base: Snapshot for http://ns.electronichealth.net.au/ci/fhir/StructureDefinition/patient-dh-base does not contain an element that matches an existing differential element that has id: Patient.deceased[x]:deceasedboolean (29.0428sec)
                                                                                 (29.0428sec)
Use -? to get command line help                                                  (29.0428sec)
                                                                                 (29.0428sec)
Stack Dump (for debugging):                                                      (29.0428sec)
java.lang.Exception: Exception loading http://ns.electronichealth.net.au/ci/fhir/StructureDefinition/patient-dh-base: Snapshot for http://ns.electronichealth.net.au/ci/fhir/StructureDefinition/patient-dh-base does not contain an element that matches an existing differential element that has id: Patient.deceased[x]:deceasedboolean
        at org.hl7.fhir.igtools.publisher.Publisher.load(Publisher.java:2188)
        at org.hl7.fhir.igtools.publisher.Publisher.loadConformance(Publisher.java:1854)
        at org.hl7.fhir.igtools.publisher.Publisher.createIg(Publisher.java:495)
        at org.hl7.fhir.igtools.publisher.Publisher.execute(Publisher.java:459)
        at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:4393)
Caused by: org.hl7.fhir.exceptions.DefinitionException: Snapshot for http://ns.electronichealth.net.au/ci/fhir/StructureDefinition/patient-dh-base does not contain an element that matches an existing differential element that has id: Patient.deceased[x]:deceasedboolean
        at org.hl7.fhir.r4.conformance.ProfileUtilities.generateSnapshot(ProfileUtilities.java:394)
        at org.hl7.fhir.r4.context.SimpleWorkerContext.seeMetadataResource(SimpleWorkerContext.java:513)
        at org.hl7.fhir.r4.context.BaseWorkerContext.cacheResource(BaseWorkerContext.java:188)
        at org.hl7.fhir.igtools.publisher.Publisher.load(Publisher.java:2186)
        ... 4 more
Exception in thread &quot;main&quot; java.lang.NullPointerException
        at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:4403)
</pre></div>


<p>which seems odd as nothing relating to Patient.deceased[x]:deceasedboolean  was changed.<br>
The IG Publisher debug file is:<br>
<a href="/user_uploads/10155/Bcd-D0DQTsmz61iFmgIBaOfG/IG-Publisher-DeBug-20180501.txt" target="_blank" title="IG-Publisher-DeBug-20180501.txt">IG-Publisher-DeBug-20180501.txt</a> <br>
If you need any further info just let me know.  <br>
Thanks for your help.</p>



<a name="153974176"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Seeking%20advice%20on%20troubleshooting%20error%20with%20IG%20Publisher/near/153974176" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Seeking.20advice.20on.20troubleshooting.20error.20with.20IG.20Publisher.html#153974176">(Jul 06 2018 at 20:39)</a>:</h4>
<p>so what iG is this for?</p>



<a name="153974262"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Seeking%20advice%20on%20troubleshooting%20error%20with%20IG%20Publisher/near/153974262" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David McKillop <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Seeking.20advice.20on.20troubleshooting.20error.20with.20IG.20Publisher.html#153974262">(Jul 09 2018 at 00:44)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span>  - this is actually used in for the Agency profiles "Patient Base" which is derived from "au-patient" (<a href="http://build.fhir.org/ig/hl7au/au-fhir-base/StructureDefinition-au-patient.html" target="_blank" title="http://build.fhir.org/ig/hl7au/au-fhir-base/StructureDefinition-au-patient.html">http://build.fhir.org/ig/hl7au/au-fhir-base/StructureDefinition-au-patient.html</a>) with further constraints. <br>
This profile and other profiles derived from au-patient including the Agency "patient-ident" which is "Patient Base" with a mandatory identifier and "patient-ihi" which is "Patient Base" with mandatory identifier and IHI" are then used in IG's depending on the requirements for the IG.<br>
Let me know if you need more info.</p>



<a name="153974273"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Seeking%20advice%20on%20troubleshooting%20error%20with%20IG%20Publisher/near/153974273" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Seeking.20advice.20on.20troubleshooting.20error.20with.20IG.20Publisher.html#153974273">(Jul 09 2018 at 07:03)</a>:</h4>
<p>yes how do I reproduce this?</p>



<a name="153974289"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Seeking%20advice%20on%20troubleshooting%20error%20with%20IG%20Publisher/near/153974289" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David McKillop <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Seeking.20advice.20on.20troubleshooting.20error.20with.20IG.20Publisher.html#153974289">(Jul 09 2018 at 08:25)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="191316">@Grahame Grieve</span>  - I've sent you an email with the files and the problem in the element id path.  Let me know if you need anything else.</p>



<a name="154023952"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Seeking%20advice%20on%20troubleshooting%20error%20with%20IG%20Publisher/near/154023952" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David McKillop <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Seeking.20advice.20on.20troubleshooting.20error.20with.20IG.20Publisher.html#154023952">(Dec 10 2018 at 04:03)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span>  FYI - The problem has been resolved as we are now able to remove the additional "deceased[x]." from the path &lt;element id="Patient.deceased[x].deceased[x]:deceasedBoolean"&gt;, plus we are now able to mark the element with "Must Support".</p>
<p>Please close this ticket : <a href="https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=17165" target="_blank" title="https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=17165">https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=17165</a></p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
