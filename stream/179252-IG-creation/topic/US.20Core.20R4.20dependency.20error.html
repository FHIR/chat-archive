---
layout: page
title: "FHIR Chat  · US Core R4 dependency error · IG creation"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/index.html">IG creation</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/US.20Core.20R4.20dependency.20error.html">US Core R4 dependency error</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="157550343"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/US%20Core%20R4%20dependency%20error/near/157550343" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rick Geimer <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/US.20Core.20R4.20dependency.20error.html#157550343">(Feb 04 2019 at 19:39)</a>:</h4>
<p>I'm trying to create a FHIR R4-based IG with a dependency on the current build of US Core, which is also on FHIR R4. However, I keep getting the following error:</p>
<div class="codehilite"><pre><span></span>Publishing Content Failed: Unknown Package hl7.fhir.us.core#4.0.0                (18.0084sec)
Stack Dump (for debugging):                                                      (18.0085sec)
java.lang.Exception: Unknown Package hl7.fhir.us.core#4.0.0
    at org.hl7.fhir.igtools.publisher.Publisher.loadIg(Publisher.java:1527)
</pre></div>


<p>My ImplementationGuide resoruce has the following:</p>
<p>&lt;dependsOn&gt;<br>
&lt;uri value="http://hl7.org/fhir/us/core"&gt;&lt;/uri&gt;<br>
&lt;packageId value="hl7.fhir.us.core"&gt;&lt;/packageId&gt;<br>
&lt;version value="current"&gt;&lt;/version&gt;<br>
&lt;/dependsOn&gt;</p>
<p>And ig.json has the following:</p>
<div class="codehilite"><pre><span></span>&quot;dependencyList&quot;: [
    {
        &quot;location&quot;: &quot;http://hl7.org/fhir/us/core&quot;,
        &quot;name&quot;: &quot;uscore&quot;,
        &quot;version&quot;: &quot;current&quot;
    }
]
</pre></div>



<a name="157551021"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/US%20Core%20R4%20dependency%20error/near/157551021" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/US.20Core.20R4.20dependency.20error.html#157551021">(Feb 04 2019 at 19:47)</a>:</h4>
<p>it's on my list to look at tomorrow. SOmething very weird is going on...</p>



<a name="157559682"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/US%20Core%20R4%20dependency%20error/near/157559682" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/US.20Core.20R4.20dependency.20error.html#157559682">(Feb 04 2019 at 21:42)</a>:</h4>
<p>I'm getting something weird on the autobuild when I try to run US-Meds with dependency on US core version 1.1.0.</p>
<p>Here is the ig.json :</p>
<p>"dependencyList": [<br>
    {<br>
      "version": "1.1.0",<br>
      "location": "<a href="http://hl7.org/fhir/us/core" target="_blank" title="http://hl7.org/fhir/us/core">http://hl7.org/fhir/us/core</a>",<br>
      "name": "uscore",<br>
      "source": "dependencies/uscore-vp"<br>
    }<br>
  ],<br>
works fine locally:</p>
<div class="codehilite"><pre><span></span>...
Load hl7.fhir.core-3.0.1 package from /Users/ehaas/.fhir/packages/hl7.fhir.core#3.0.1 (02.0417sec)
Load Terminology Cache from /Users/ehaas/Documents/FHIR/FHIR-ONC-Meds/generated_output/txCache (34.0623sec)
Connect to Terminology Server at http://tx.fhir.org                              (34.0708sec)
-tx cache miss: Connect to http://tx.fhir.org//r3
Load uscore (http://hl7.org/fhir/us/core) from hl7.fhir.us.core#1.1.0            (36.0177sec)
...
</pre></div>


<p>causes this builderror on the autobuild :-)</p>
<div class="codehilite"><pre><span></span>...
Load hl7.fhir.core-3.0.1 package from var/lib/.fhir/packages/hl7.fhir.core#3.0.1 (16.0645sec)
Load Terminology Cache from /scratch/ig-build-temp-IIC1JO/repo/generated_output/txCache (26.0057sec)
Connect to Terminology Server at http://tx.fhir.org                              (26.0059sec)
-tx cache miss: Connect to http://tx.fhir.org//r3
Publishing Content Failed: Unknown Package hl7.fhir.us.core#3.0.1                (26.0443sec)
                                                                                 (26.0443sec)
Use -? to get command line help                                                  (26.0443sec)
                                                                                 (26.0443sec)
Stack Dump (for debugging):                                                      (26.0443sec)
java.lang.Exception: Unknown Package hl7.fhir.us.core#3.0.1
    at org.hl7.fhir.igtools.publisher.Publisher.loadIg(Publisher.java:1527)
    at org.hl7.fhir.igtools.publisher.Publisher.initializeFromJson(Publisher.java:1146)
    at org.hl7.fhir.igtools.publisher.Publisher.initialize(Publisher.java:949)
    at org.hl7.fhir.igtools.publisher.Publisher.execute(Publisher.java:524)
    at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:4933)
Exception in thread &quot;main&quot; java.lang.NullPointerException
    at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:4943)
...
</pre></div>


<p>it is looking for version 3.0.1 of US core which is curious....</p>



<a name="157560088"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/US%20Core%20R4%20dependency%20error/near/157560088" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/US.20Core.20R4.20dependency.20error.html#157560088">(Feb 04 2019 at 21:48)</a>:</h4>
<p>looks like others getting this too... hl7au/au-fhir-childhealth has a similar error.   <span class="user-mention" data-user-id="191315">@Josh Mandel</span> ?</p>



<a name="157560124"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/US%20Core%20R4%20dependency%20error/near/157560124" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/US.20Core.20R4.20dependency.20error.html#157560124">(Feb 04 2019 at 21:49)</a>:</h4>
<p>I'm sure what differences there are vs the local build. <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> may have ideas?</p>



<a name="157561286"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/US%20Core%20R4%20dependency%20error/near/157561286" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rick Geimer <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/US.20Core.20R4.20dependency.20error.html#157561286">(Feb 04 2019 at 22:06)</a>:</h4>
<p>Not sure if this helps, but I just tried POSTing the ImplementationGuide resource in question to <a href="http://fhirtest.uhn.ca/baseR4/ImplementationGuide" target="_blank" title="http://fhirtest.uhn.ca/baseR4/ImplementationGuide">http://fhirtest.uhn.ca/baseR4/ImplementationGuide</a> and got this error:</p>
<div class="codehilite"><pre><span></span>Invalid resource reference found at path[ImplementationGuide.dependsOn.uri] - Resource type is unknown or not supported on this server - http://hl7.org/fhir/us/core
</pre></div>


<p>So maybe this is related to the move of some of the core code to HAPI?</p>



<a name="157562238"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/US%20Core%20R4%20dependency%20error/near/157562238" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rick Geimer <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/US.20Core.20R4.20dependency.20error.html#157562238">(Feb 04 2019 at 22:20)</a>:</h4>
<p>Was able to fix that HAPI error by changing ImplementationGuide.dependsOn.uri to <a href="http://hl7.org/fhir/us/core/ImplementationGuide/ig" target="_blank" title="http://hl7.org/fhir/us/core/ImplementationGuide/ig">http://hl7.org/fhir/us/core/ImplementationGuide/ig</a> (i.e. the cannonical URL of the ImplementationGuide resource vs. the cannonical URL of the implementation guide...the fact that those two things are different is sure to confuse no one at all :)</p>
<p>But now I get the following error from the build:</p>
<p>Fetch Package history from <a href="http://hl7.org/fhir/us/core/ImplementationGuide/ig/package-list.json" target="_blank" title="http://hl7.org/fhir/us/core/ImplementationGuide/ig/package-list.json">http://hl7.org/fhir/us/core/ImplementationGuide/ig/package-list.json</a></p>
<p>So seems like the build wants the cannonical URL of the implementation guide, but the ImplementationGuide resource requires a cannonical reference to another ImplementationGuide resource.</p>



<a name="157564760"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/US%20Core%20R4%20dependency%20error/near/157564760" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/US.20Core.20R4.20dependency.20error.html#157564760">(Feb 04 2019 at 22:58)</a>:</h4>
<p>(deleted)</p>



<a name="157600878"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/US%20Core%20R4%20dependency%20error/near/157600878" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/US.20Core.20R4.20dependency.20error.html#157600878">(Feb 05 2019 at 11:57)</a>:</h4>
<p>I don't know why it's broken. It's first thing on my list for tomorrow once I'm back working (meetings all day today)</p>



<a name="157727565"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/US%20Core%20R4%20dependency%20error/near/157727565" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rick Geimer <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/US.20Core.20R4.20dependency.20error.html#157727565">(Feb 06 2019 at 21:24)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> Just wondering if you were able to dig into this at all yet.</p>



<a name="157728049"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/US%20Core%20R4%20dependency%20error/near/157728049" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/US.20Core.20R4.20dependency.20error.html#157728049">(Feb 06 2019 at 21:30)</a>:</h4>
<p>just made a commit around this right now</p>



<a name="157736516"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/US%20Core%20R4%20dependency%20error/near/157736516" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brett Esler <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/US.20Core.20R4.20dependency.20error.html#157736516">(Feb 06 2019 at 23:20)</a>:</h4>
<p>happy new year <span class="user-mention" data-user-id="191316">@Grahame Grieve</span>  - is this resolved now?  i am still having problems; any thing more than rebuilds needed?</p>



<a name="157736691"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/US%20Core%20R4%20dependency%20error/near/157736691" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brett Esler <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/US.20Core.20R4.20dependency.20error.html#157736691">(Feb 06 2019 at 23:22)</a>:</h4>
<p><span class="user-mention" data-user-id="193760">@Shovan Roy</span>  fyi</p>



<a name="157736950"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/US%20Core%20R4%20dependency%20error/near/157736950" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shovan Roy <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/US.20Core.20R4.20dependency.20error.html#157736950">(Feb 06 2019 at 23:27)</a>:</h4>
<p>Thanks Brett. I had tried as well .. still the issue exists. Only difference I can notice is related to the error message:<br>
Previously: Publishing Content Failed: Unknown Package hl7.fhir.au.base#3.0.1<br>
Today: Publishing Content Failed: Unknown Package hl7.fhir.au.base#current</p>



<a name="157737219"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/US%20Core%20R4%20dependency%20error/near/157737219" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/US.20Core.20R4.20dependency.20error.html#157737219">(Feb 06 2019 at 23:31)</a>:</h4>
<p>just merged the fix (I think it's the fix) - give it 20min and try agin</p>



<a name="157738244"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/US%20Core%20R4%20dependency%20error/near/157738244" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shovan Roy <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/US.20Core.20R4.20dependency.20error.html#157738244">(Feb 06 2019 at 23:47)</a>:</h4>
<p>thanks <span class="user-mention" data-user-id="191316">@Grahame Grieve</span>  it's working for me now..</p>



<a name="157738532"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/US%20Core%20R4%20dependency%20error/near/157738532" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/US.20Core.20R4.20dependency.20error.html#157738532">(Feb 06 2019 at 23:52)</a>:</h4>
<p>good</p>



<a name="157738555"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/US%20Core%20R4%20dependency%20error/near/157738555" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/US.20Core.20R4.20dependency.20error.html#157738555">(Feb 06 2019 at 23:53)</a>:</h4>
<p>it was a combination of two things: reporting the wrong version in the error message, and doing package resolution wrongly. The wrong error message pointed me off in the wrong direction</p>



<a name="157780056"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/US%20Core%20R4%20dependency%20error/near/157780056" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/US.20Core.20R4.20dependency.20error.html#157780056">(Feb 07 2019 at 14:24)</a>:</h4>
<p>how do I add a formal dependency on US-Core? Who has a good example IG?</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
