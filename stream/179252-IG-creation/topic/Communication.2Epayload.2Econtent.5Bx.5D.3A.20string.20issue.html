---
layout: page
title: "FHIR Chat  · Communication.payload.content[x]: string issue · IG creation"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/index.html">IG creation</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Communication.2Epayload.2Econtent.5Bx.5D.3A.20string.20issue.html">Communication.payload.content[x]: string issue</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="186360516"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Communication.payload.content%5Bx%5D%3A%20string%20issue/near/186360516" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sarah Gaunt <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Communication.2Epayload.2Econtent.5Bx.5D.3A.20string.20issue.html#186360516">(Jan 23 2020 at 06:23)</a>:</h4>
<p>I'm having a problem with a Communication inside a Bundle.  When the exact same Communication is standalone, I get no errors, but when it's contained inside the Bundle I get the following:</p>
<div class="codehilite"><pre><span></span>Exception in thread &quot;main&quot; java.lang.Error: Not the right type for Communication.payload.content[x]: string
    at org.hl7.fhir.r5.model.Communication$CommunicationPayloadComponent.setContent(Communication.java:163)
    at org.hl7.fhir.convertors.conv40_50.Communication.convertCommunicationPayloadComponent(Communication.java:235)
    at org.hl7.fhir.convertors.conv40_50.Communication.convertCommunication(Communication.java:111)
    at org.hl7.fhir.convertors.VersionConvertor_40_50.convertResource(VersionConvertor_40_50.java:3327)
    at org.hl7.fhir.convertors.conv40_50.Bundle.convertBundleEntryComponent(Bundle.java:175)
    at org.hl7.fhir.convertors.conv40_50.Bundle.convertBundle(Bundle.java:79)
    at org.hl7.fhir.convertors.VersionConvertor_40_50.convertResource(VersionConvertor_40_50.java:3305)
    at org.hl7.fhir.igtools.publisher.Publisher.convertFromElement(Publisher.java:4487)
    at org.hl7.fhir.igtools.publisher.Publisher.load(Publisher.java:3793)
    at org.hl7.fhir.igtools.publisher.Publisher.loadConformance(Publisher.java:3310)
    at org.hl7.fhir.igtools.publisher.Publisher.createIg(Publisher.java:776)
    at org.hl7.fhir.igtools.publisher.Publisher.execute(Publisher.java:663)
    at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:6893)
</pre></div>


<p>If I delete the &lt;contentString&gt; element, it builds.</p>
<p>It's valid to have Communication.payload.content as a string - the profile restricts content to string ( <a href="https://github.com/HL7/case-reporting/blob/master/source/resources/structuredefinition/rr-communication.xml" target="_blank" title="https://github.com/HL7/case-reporting/blob/master/source/resources/structuredefinition/rr-communication.xml">https://github.com/HL7/case-reporting/blob/master/source/resources/structuredefinition/rr-communication.xml</a>).</p>
<p>The xml in the Bundle.Communication is:</p>
<div class="codehilite"><pre><span></span>&lt;payload id=&quot;reportability-response-summary&quot;&gt;
    &lt;contentString
      value=&quot;Your organization electronically submitted an initial case report to determine if reporting to public health is needed for a patient. &#39;Zika virus disease (disorder)&#39; is reportable to &#39;State Department of Health&#39;. An initial case report was sent to &#39;State Department of Health&#39;. Additional information may be required for this report.&quot;
     /&gt;
  &lt;/payload&gt;
</pre></div>


<p>I've tried replacing the long string with "TEST" to see if there were maybe weird characters in there, but that also crashed.</p>
<p>So strange that it works fine in the standalone Communication but not in the Bundle. Cannot figure out what I'm doing wrong...</p>



<a name="186360708"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Communication.payload.content%5Bx%5D%3A%20string%20issue/near/186360708" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sarah Gaunt <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Communication.2Epayload.2Econtent.5Bx.5D.3A.20string.20issue.html#186360708">(Jan 23 2020 at 06:29)</a>:</h4>
<p>Hmmmm... I just had a thought and checked the R5 version of Communication - it does NOT have string as an option.<br>
<span class="user-mention" data-user-id="191316">@Grahame Grieve</span> - any ideas here? Seems that when the Communication is inside a Bundle it's being checked as if it were an R5 resource. <br>
(This is an R4 IG).</p>



<a name="186464581"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Communication.payload.content%5Bx%5D%3A%20string%20issue/near/186464581" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Communication.2Epayload.2Econtent.5Bx.5D.3A.20string.20issue.html#186464581">(Jan 24 2020 at 05:27)</a>:</h4>
<p>I think that this will be fixed next release</p>



<a name="186464782"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Communication.payload.content%5Bx%5D%3A%20string%20issue/near/186464782" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sarah Gaunt <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Communication.2Epayload.2Econtent.5Bx.5D.3A.20string.20issue.html#186464782">(Jan 24 2020 at 05:32)</a>:</h4>
<p>Ok thanks... Any eta on next release?</p>



<a name="186464982"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Communication.payload.content%5Bx%5D%3A%20string%20issue/near/186464982" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Communication.2Epayload.2Econtent.5Bx.5D.3A.20string.20issue.html#186464982">(Jan 24 2020 at 05:37)</a>:</h4>
<p>maybe very early tomorrow morning?</p>



<a name="186465110"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Communication.payload.content%5Bx%5D%3A%20string%20issue/near/186465110" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sarah Gaunt <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Communication.2Epayload.2Econtent.5Bx.5D.3A.20string.20issue.html#186465110">(Jan 24 2020 at 05:41)</a>:</h4>
<p>Ok sounds great, thanks.</p>



<a name="186465623"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Communication.payload.content%5Bx%5D%3A%20string%20issue/near/186465623" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Communication.2Epayload.2Econtent.5Bx.5D.3A.20string.20issue.html#186465623">(Jan 24 2020 at 05:55)</a>:</h4>
<p>maybe tonight...</p>



<a name="186467028"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Communication.payload.content%5Bx%5D%3A%20string%20issue/near/186467028" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sarah Gaunt <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Communication.2Epayload.2Econtent.5Bx.5D.3A.20string.20issue.html#186467028">(Jan 24 2020 at 06:32)</a>:</h4>
<p>Ok, will keep an eye out to test...</p>



<a name="186544101"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Communication.payload.content%5Bx%5D%3A%20string%20issue/near/186544101" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sarah Gaunt <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Communication.2Epayload.2Econtent.5Bx.5D.3A.20string.20issue.html#186544101">(Jan 24 2020 at 23:21)</a>:</h4>
<p>Thanks <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> - it's not crashing anymore...</p>



<a name="186548213"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Communication.payload.content%5Bx%5D%3A%20string%20issue/near/186548213" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sarah Gaunt <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Communication.2Epayload.2Econtent.5Bx.5D.3A.20string.20issue.html#186548213">(Jan 25 2020 at 00:28)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> not sure what to do - I'm ready to just remove this Bundle example from the IG because I keep running into problems with it. There isn't a specific profile in the IG for this bundle, so it's not like I'd get a warning or anything. The issue is that I'd really like to be able to have a nice example for implementers.</p>
<p>I'm geting a bunch of slicing errors now on a Document Bundle in this collection Bundle - but no errors on either the standalone Compositition or standalone Document Bundle (the one in the Bundle is just a copy and paste from the one that doesn't error as standalone).</p>
<p>The QA is here: <a href="http://build.fhir.org/ig/HL7/case-reporting/branches/master/qa.html#_scratch_ig-build-temp-NAZRR1_repo_source_resources_bundle_bundle-rr-collection-communication" target="_blank" title="http://build.fhir.org/ig/HL7/case-reporting/branches/master/qa.html#_scratch_ig-build-temp-NAZRR1_repo_source_resources_bundle_bundle-rr-collection-communication">http://build.fhir.org/ig/HL7/case-reporting/branches/master/qa.html#_scratch_ig-build-temp-NAZRR1_repo_source_resources_bundle_bundle-rr-collection-communication</a></p>
<p>This is one of the errors - the matching profile is clearly there with the correct fullUrl and meta.profile:</p>
<div class="codehilite"><pre><span></span>Unable to find matching profile for Bundle/bundle-eicr-document-zika among choices: http://hl7.org/fhir/us/ecr/StructureDefinition/eicr-document-bundle
</pre></div>


<p>and  another - there is definitely an entry with that meta.profile:</p>
<div class="codehilite"><pre><span></span>Problem evaluating slicing expression for element in profile http://hl7.org/fhir/us/ecr/StructureDefinition/eicr-composition path resource.section[2].entry[0] (fhirPath = true and resolve().conformsTo(&#39;http://hl7.org/fhir/us/ecr/StructureDefinition/eicr-condition&#39;)): null
</pre></div>



<a name="186616339"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Communication.payload.content%5Bx%5D%3A%20string%20issue/near/186616339" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Communication.2Epayload.2Econtent.5Bx.5D.3A.20string.20issue.html#186616339">(Jan 26 2020 at 10:53)</a>:</h4>
<p>wooah that was a hard one to nail down. Fixed next release</p>



<a name="186648466"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Communication.payload.content%5Bx%5D%3A%20string%20issue/near/186648466" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sarah Gaunt <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Communication.2Epayload.2Econtent.5Bx.5D.3A.20string.20issue.html#186648466">(Jan 27 2020 at 02:24)</a>:</h4>
<p>Thank you! (Sorry it was hard...)</p>



<a name="186738141"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/Communication.payload.content%5Bx%5D%3A%20string%20issue/near/186738141" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sarah Gaunt <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/Communication.2Epayload.2Econtent.5Bx.5D.3A.20string.20issue.html#186738141">(Jan 27 2020 at 23:36)</a>:</h4>
<p>Just tested this - all good. Thanks again!</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
