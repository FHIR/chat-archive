---
layout: page
title: "FHIR Chat  · IG Publisher Crash · IG creation"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/index.html">IG creation</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20Crash.html">IG Publisher Crash</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="218271377"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20Crash/near/218271377" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sarah Gaunt <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20Crash.html#218271377">(Nov 30 2020 at 10:47)</a>:</h4>
<p>I'm getting the following crash (<a href="http://build.fhir.org/ig/HL7/case-reporting/branches/master/failure/build.log">http://build.fhir.org/ig/HL7/case-reporting/branches/master/failure/build.log</a>):</p>
<div class="codehilite"><pre><span></span><code>2020-11-30 10:19:11.920 [main] INFO  o.h.f.u.npm.BasePackageCacheManager [BasePackageCacheManager.java:79] Failed to resolve package hl7.fhir.r4.core#4.0.0 from server: http://packages.fhir.org
2020-11-30 10:19:12.068 [main] INFO  o.h.f.u.npm.BasePackageCacheManager [BasePackageCacheManager.java:79] Failed to resolve package hl7.fhir.r4.core#4.0.0 from server: http://packages2.fhir.org/packages
Publishing Content Failed: Unable to resolve package id hl7.fhir.r4.core#4.0.0   (00:21.0626)
                                                                                 (00:21.0626)
Use -? to get command line help                                                  (00:21.0626)
                                                                                 (00:21.0626)
Stack Dump (for debugging):                                                      (00:21.0626)
org.hl7.fhir.exceptions.FHIRException: Unable to resolve package id hl7.fhir.r4.core#4.0.0
    at org.hl7.fhir.utilities.npm.FilesystemPackageCacheManager.fetchTheOldWay(FilesystemPackageCacheManager.java:688)
    at org.hl7.fhir.utilities.npm.FilesystemPackageCacheManager.loadFromPackageServer(FilesystemPackageCacheManager.java:225)
    at org.hl7.fhir.utilities.npm.FilesystemPackageCacheManager.loadPackage(FilesystemPackageCacheManager.java:498)
    at org.hl7.fhir.utilities.npm.BasePackageCacheManager.loadPackage(BasePackageCacheManager.java:166)
    at org.hl7.fhir.igtools.publisher.Publisher.loadFromPackage(Publisher.java:2827)
    at org.hl7.fhir.igtools.publisher.Publisher.loadIg(Publisher.java:2784)
    at org.hl7.fhir.igtools.publisher.Publisher.initializeFromIg(Publisher.java:1893)
    at org.hl7.fhir.igtools.publisher.Publisher.initialize(Publisher.java:1450)
    at org.hl7.fhir.igtools.publisher.Publisher.execute(Publisher.java:722)
    at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:8397)
</code></pre></div>
<p>I can't see any other IGs failing like this. But I can't find any references to 4.0.0 in my code.</p>
<p>If I run using 1.1.42 it doesn't crash. (Didn't try 1.1.43 as it sounded like there were problems with it). </p>
<p>BUT, it does come up with this message <code>FHIR Version mismatch in package hl7.fhir.us.odh#1.0.0: version is 4.0.0 but must be 4.0.1 (path: hl7.fhir.us.ecr#1.0.0)</code>. But I look at the ODH (<a href="http://hl7.org/fhir/us/odh/">http://hl7.org/fhir/us/odh/</a>) I'm pointing to and it says: " Package hl7.fhir.us.odh#1.0.0 based on FHIR 4.0.1".</p>



<a name="218279249"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20Crash/near/218279249" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sarah Gaunt <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20Crash.html#218279249">(Nov 30 2020 at 12:16)</a>:</h4>
<p>Digging some, I'm thinking it might have something to do with this: <a href="https://simplifier.net/packages/hl7.fhir.us.odh/1.0.0/files/113234">https://simplifier.net/packages/hl7.fhir.us.odh/1.0.0/files/113234</a></p>
<div class="codehilite"><pre><span></span><code>&quot;dependencies&quot;: {
    &quot;hl7.fhir.r4.core&quot;: &quot;4.0.0&quot;,
</code></pre></div>
<p>And could be a similar issue to this: <a href="#narrow/stream/179252-IG-creation/topic/Broken.20Package.20Dependency.20in.20PDEX.20Package">https://chat.fhir.org/#narrow/stream/179252-IG-creation/topic/Broken.20Package.20Dependency.20in.20PDEX.20Package</a></p>



<a name="218330082"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20Crash/near/218330082" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sarah Gaunt <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20Crash.html#218330082">(Nov 30 2020 at 19:01)</a>:</h4>
<p>Is the certificate issue why this is crashing or is it something else? I am a bit stuck here.</p>



<a name="218330457"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20Crash/near/218330457" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20Crash.html#218330457">(Nov 30 2020 at 19:04)</a>:</h4>
<p>The 4.0.0 is likely a problem regardless.  What fhirVersion is referenced in your ImplementationGuide instance?  It <em>should</em> be 4.0.1.</p>



<a name="218331977"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20Crash/near/218331977" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sarah Gaunt <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20Crash.html#218331977">(Nov 30 2020 at 19:16)</a>:</h4>
<p>There isn't a single instance of 4.0.0 in the IG. The only related 4.0.0 I can find is linked above in the ODH package on which the eCR IG is dependent.</p>



<a name="218344771"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20Crash/near/218344771" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sarah Gaunt <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20Crash.html#218344771">(Nov 30 2020 at 20:56)</a>:</h4>
<p>So <span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span>  when I remove the dependency to ODH, I don't get that crash any more.  (I do get a crash - I presume because of the certificate issue - but it passes where it made it to before: <a href="http://build.fhir.org/ig/HL7/case-reporting/branches/master/failure/build.log">http://build.fhir.org/ig/HL7/case-reporting/branches/master/failure/build.log</a>)</p>
<p>And of course, if I could get it to run to completion, I will now have multiple errors on the ODH profiles because I removed the dependency to ODH... </p>
<p>So a bit of a catch-22. Any suggestions? </p>
<p>(This was working a few days ago, something must have changed.)</p>



<a name="218347806"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20Crash/near/218347806" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20Crash.html#218347806">(Nov 30 2020 at 21:21)</a>:</h4>
<p>I'm afraid this is <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> territory :(</p>



<a name="218347813"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20Crash/near/218347813" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sarah Gaunt <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20Crash.html#218347813">(Nov 30 2020 at 21:21)</a>:</h4>
<p>Here are the dependencies (and I see that I should probably point to US Core 3.1.1 in the Common Profiles Library), but it's the boxed version that I think is causing the problem:<br>
<a href="/user_uploads/10155/PYk0vbhyb8v5raGIw8-orfgC/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/10155/PYk0vbhyb8v5raGIw8-orfgC/image.png" title="image.png"><img src="/user_uploads/10155/PYk0vbhyb8v5raGIw8-orfgC/image.png"></a></div>



<a name="218366650"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20Crash/near/218366650" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20Crash.html#218366650">(Dec 01 2020 at 00:31)</a>:</h4>
<p>so the case-reporting IG runs fine for me from the master branch?</p>



<a name="218366818"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20Crash/near/218366818" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sarah Gaunt <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20Crash.html#218366818">(Dec 01 2020 at 00:33)</a>:</h4>
<p>Maybe because I have commented out the dependency on ODH... Are there tons of errors around the ODH profiles?</p>



<a name="218366853"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20Crash/near/218366853" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sarah Gaunt <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20Crash.html#218366853">(Dec 01 2020 at 00:33)</a>:</h4>
<p>It crashes if the dependency exists. (On the CI build and ToF anyway).</p>



<a name="218366919"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20Crash/near/218366919" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sarah Gaunt <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20Crash.html#218366919">(Dec 01 2020 at 00:34)</a>:</h4>
<p>Add this back in and try it:</p>
<div class="codehilite"><pre><span></span><code>&lt;dependsOn&gt;
        &lt;uri value=&quot;http://hl7.org/fhir/us/odh/ImplementationGuide/hl7.fhir.us.odh&quot;/&gt;
        &lt;packageId value=&quot;hl7.fhir.us.odh&quot;/&gt;
        &lt;version value=&quot;1.0.0&quot;/&gt;
    &lt;/dependsOn&gt;
</code></pre></div>



<a name="218366964"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20Crash/near/218366964" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sarah Gaunt <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20Crash.html#218366964">(Dec 01 2020 at 00:35)</a>:</h4>
<p>I feel like this package: <a href="http://packages2.fhir.org/packages/hl7.fhir.us.odh/1.0.0">http://packages2.fhir.org/packages/hl7.fhir.us.odh/1.0.0</a> just needs updating to 4.0.1 (rather than 4.0.0).</p>



<a name="218367073"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20Crash/near/218367073" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20Crash.html#218367073">(Dec 01 2020 at 00:37)</a>:</h4>
<p>we can't update packages.</p>



<a name="218367114"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20Crash/near/218367114" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sarah Gaunt <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20Crash.html#218367114">(Dec 01 2020 at 00:37)</a>:</h4>
<p>It used to work. Like 3 days ago.</p>



<a name="218367176"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20Crash/near/218367176" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20Crash.html#218367176">(Dec 01 2020 at 00:38)</a>:</h4>
<p>I have no idea what changed</p>



<a name="218367228"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20Crash/near/218367228" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20Crash.html#218367228">(Dec 01 2020 at 00:39)</a>:</h4>
<p>it'll start working from the next release</p>



<a name="218367234"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20Crash/near/218367234" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20Crash.html#218367234">(Dec 01 2020 at 00:39)</a>:</h4>
<p>hopefully this afternoon sometime</p>



<a name="218367395"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20Crash/near/218367395" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sarah Gaunt <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20Crash.html#218367395">(Dec 01 2020 at 00:41)</a>:</h4>
<p>Ok thanks. Will keep the dependency out for now and try to ignore the billion errors! <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span></p>



<a name="218479117"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20Crash/near/218479117" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sarah Gaunt <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20Crash.html#218479117">(Dec 01 2020 at 20:47)</a>:</h4>
<p>Does the latest IG publisher release fix this issue also <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> ?</p>



<a name="218487176"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179252-IG%20creation/topic/IG%20Publisher%20Crash/near/218487176" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179252-IG-creation/topic/IG.20Publisher.20Crash.html#218487176">(Dec 01 2020 at 21:52)</a>:</h4>
<p>yes</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
