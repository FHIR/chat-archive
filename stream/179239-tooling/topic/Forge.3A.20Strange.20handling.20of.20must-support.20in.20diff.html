---
layout: page
title: "FHIR Chat  · Forge: Strange handling of must-support in diff · tooling"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179239-tooling/index.html">tooling</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179239-tooling/topic/Forge.3A.20Strange.20handling.20of.20must-support.20in.20diff.html">Forge: Strange handling of must-support in diff</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="241501708"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179239-tooling/topic/Forge%3A%20Strange%20handling%20of%20must-support%20in%20diff/near/241501708" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Morten Ernebjerg <a href="https://fhir.github.io/chat-archive/stream/179239-tooling/topic/Forge.3A.20Strange.20handling.20of.20must-support.20in.20diff.html#241501708">(Jun 04 2021 at 07:51)</a>:</h4>
<p>I was working on some profiles in Forge and noticed that mustSupport is in some cases not present in the differential though it is present in the snapshot, which seems to lead to some strange behavior. It can be reproduced as follows:</p>
<ol>
<li>Take the IPS AllergyIntolerance profile StructureDefinition from the <a href="https://simplifier.net/packages/hl7.fhir.uv.ips/1.0.0">IPS 1.0.0 FHIR package</a>.</li>
<li>Manually delete the <code>snapshot</code> element.</li>
<li>Open the profile in Forge and switch on "Save snapshot component"</li>
<li>Make some inconsequential change and save the changes to ensure that the snapshot has been generated.</li>
</ol>
<p>I then observe the following:</p>
<ol>
<li>The "mustSupport" flag on <code>AllergyIntolerance.code</code> is now gone in the differential, although it was there in the initial IPS profile in step 1 above. It is, however, still present in the saved snapshot and still displayed in Forge</li>
<li>If I try to remove the mustSupport flag from <code>AllergyIntolerance.code</code> in Forge, I get the following warning: " When an element is marked as 'must be supported' in the resource, this can not be undone in the profile.". Given that IPS profiles the base AllergyIntolerance directly and must-support is never set in the base spec AFAIK, I'm not sure what this could mean.</li>
</ol>
<p><span class="user-mention" data-user-id="203235">@Ward Weistra</span> Is there something amiss here?</p>



<a name="241738359"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179239-tooling/topic/Forge%3A%20Strange%20handling%20of%20must-support%20in%20diff/near/241738359" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthijs van der Wielen <a href="https://fhir.github.io/chat-archive/stream/179239-tooling/topic/Forge.3A.20Strange.20handling.20of.20must-support.20in.20diff.html#241738359">(Jun 07 2021 at 07:25)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="194703">@Morten Ernebjerg</span> ,</p>
<p>That is indeed not expected behavior. I have asked the Forge team to investigate why this happens. I will create a ticket for you on the Jira Service Desk to keep you informed of the progress.</p>
<p>Kind regards,<br>
Matthijs</p>



<a name="241738539"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179239-tooling/topic/Forge%3A%20Strange%20handling%20of%20must-support%20in%20diff/near/241738539" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Morten Ernebjerg <a href="https://fhir.github.io/chat-archive/stream/179239-tooling/topic/Forge.3A.20Strange.20handling.20of.20must-support.20in.20diff.html#241738539">(Jun 07 2021 at 07:27)</a>:</h4>
<p>thanks <span class="user-mention" data-user-id="259036">@Matthijs van der Wielen</span> !</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
