---
layout: page
title: "FHIR Chat  · Synthea data issue: duplicate identical Locations? · tooling"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179239-tooling/index.html">tooling</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179239-tooling/topic/Synthea.20data.20issue.3A.20duplicate.20identical.20Locations.3F.html">Synthea data issue: duplicate identical Locations?</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="211013279"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179239-tooling/topic/Synthea%20data%20issue%3A%20duplicate%20identical%20Locations%3F/near/211013279" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Carl Anderson <a href="https://fhir.github.io/chat-archive/stream/179239-tooling/topic/Synthea.20data.20issue.3A.20duplicate.20identical.20Locations.3F.html#211013279">(Sep 23 2020 at 14:43)</a>:</h4>
<p>Rather than piling on the other <a href="#narrow/stream/179239-tooling/topic/Synthea">Synthea</a> stream, I'm starting a new one for a separate data issue.</p>
<p>First, some background.  I generated about 1,000 patients a while back to load them into a HAPI server for a connectathon scenario.  I selected a handful of patients from the 1,000 to load at first, and ran into some issues right away with duplicate, identical resources being created for each patient due to the way I was loading the data - there was no flaw in the Synthea data itself.</p>
<p>I've resolved those duplicate identical resources issues by using conditional references and re-ordering the resources in the batch slightly to load all resources before they are referenced elsewhere.  This works fine.</p>
<p>The latest problem appears to be in the Synthea data itself.  I've found several <code>Location</code> resources which are identical across patients, but who have different <code>id</code> values.  I have not found other resource types yet that follow this pattern - it appears to be an issue with Locations (although I haven't checked everything else).</p>
<h3><code>abbie.location</code></h3>
<div class="codehilite" data-code-language="JSON"><pre><span></span><code>    <span class="p">{</span>
      <span class="nt">"fullUrl"</span><span class="p">:</span> <span class="s2">"urn:uuid:5f0a03d6-92b8-6ec2-cdd2-893281c43776"</span><span class="p">,</span>
      <span class="nt">"resource"</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">"resourceType"</span><span class="p">:</span> <span class="s2">"Location"</span><span class="p">,</span>
        <span class="nt">"id"</span><span class="p">:</span> <span class="s2">"5f0a03d6-92b8-6ec2-cdd2-893281c43776"</span><span class="p">,</span>
        <span class="nt">"meta"</span><span class="p">:</span> <span class="p">{</span>
          <span class="nt">"profile"</span><span class="p">:</span> <span class="p">[</span>
            <span class="s2">"http://hl7.org/fhir/us/core/StructureDefinition/us-core-location"</span>
          <span class="p">]</span>
        <span class="p">},</span>
        <span class="nt">"status"</span><span class="p">:</span> <span class="s2">"active"</span><span class="p">,</span>
        <span class="nt">"name"</span><span class="p">:</span> <span class="s2">"UNITYPOINT HEALTH - MERITER"</span><span class="p">,</span>
        <span class="nt">"telecom"</span><span class="p">:</span> <span class="p">[</span>
          <span class="p">{</span>
            <span class="nt">"system"</span><span class="p">:</span> <span class="s2">"phone"</span><span class="p">,</span>
            <span class="nt">"value"</span><span class="p">:</span> <span class="s2">"6084176000"</span>
          <span class="p">}</span>
        <span class="p">],</span>
        <span class="nt">"address"</span><span class="p">:</span> <span class="p">{</span>
          <span class="nt">"line"</span><span class="p">:</span> <span class="p">[</span>
            <span class="s2">"202 S PARK ST"</span>
          <span class="p">],</span>
          <span class="nt">"city"</span><span class="p">:</span> <span class="s2">"MADISON"</span><span class="p">,</span>
          <span class="nt">"state"</span><span class="p">:</span> <span class="s2">"WI"</span><span class="p">,</span>
          <span class="nt">"postalCode"</span><span class="p">:</span> <span class="s2">"53715"</span><span class="p">,</span>
          <span class="nt">"country"</span><span class="p">:</span> <span class="s2">"US"</span>
        <span class="p">},</span>
        <span class="nt">"position"</span><span class="p">:</span> <span class="p">{</span>
          <span class="nt">"longitude"</span><span class="p">:</span> <span class="mf">-89.430121</span><span class="p">,</span>
          <span class="nt">"latitude"</span><span class="p">:</span> <span class="mf">43.087806</span>
        <span class="p">},</span>
        <span class="nt">"managingOrganization"</span><span class="p">:</span> <span class="p">{</span>
          <span class="nt">"reference"</span><span class="p">:</span> <span class="s2">"urn:uuid:e6c5d179-370a-3659-9ce6-3d09da3c3ad0"</span><span class="p">,</span>
          <span class="nt">"display"</span><span class="p">:</span> <span class="s2">"UNITYPOINT HEALTH - MERITER"</span>
        <span class="p">}</span>
      <span class="p">},</span>
      <span class="nt">"request"</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">"method"</span><span class="p">:</span> <span class="s2">"POST"</span><span class="p">,</span>
        <span class="nt">"url"</span><span class="p">:</span> <span class="s2">"Location"</span>
      <span class="p">}</span>
    <span class="p">}</span>
</code></pre></div>

<h3><code>adolfo.location</code></h3>
<div class="codehilite" data-code-language="JSON"><pre><span></span><code>    <span class="p">{</span>
      <span class="nt">"fullUrl"</span><span class="p">:</span> <span class="s2">"urn:uuid:47ba9ed9-92d1-4727-7089-ced1836ea2a9"</span><span class="p">,</span>
      <span class="nt">"resource"</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">"resourceType"</span><span class="p">:</span> <span class="s2">"Location"</span><span class="p">,</span>
        <span class="nt">"id"</span><span class="p">:</span> <span class="s2">"47ba9ed9-92d1-4727-7089-ced1836ea2a9"</span><span class="p">,</span>
        <span class="nt">"meta"</span><span class="p">:</span> <span class="p">{</span>
          <span class="nt">"profile"</span><span class="p">:</span> <span class="p">[</span>
            <span class="s2">"http://hl7.org/fhir/us/core/StructureDefinition/us-core-location"</span>
          <span class="p">]</span>
        <span class="p">},</span>
        <span class="nt">"status"</span><span class="p">:</span> <span class="s2">"active"</span><span class="p">,</span>
        <span class="nt">"name"</span><span class="p">:</span> <span class="s2">"UNITYPOINT HEALTH - MERITER"</span><span class="p">,</span>
        <span class="nt">"telecom"</span><span class="p">:</span> <span class="p">[</span>
          <span class="p">{</span>
            <span class="nt">"system"</span><span class="p">:</span> <span class="s2">"phone"</span><span class="p">,</span>
            <span class="nt">"value"</span><span class="p">:</span> <span class="s2">"6084176000"</span>
          <span class="p">}</span>
        <span class="p">],</span>
        <span class="nt">"address"</span><span class="p">:</span> <span class="p">{</span>
          <span class="nt">"line"</span><span class="p">:</span> <span class="p">[</span>
            <span class="s2">"202 S PARK ST"</span>
          <span class="p">],</span>
          <span class="nt">"city"</span><span class="p">:</span> <span class="s2">"MADISON"</span><span class="p">,</span>
          <span class="nt">"state"</span><span class="p">:</span> <span class="s2">"WI"</span><span class="p">,</span>
          <span class="nt">"postalCode"</span><span class="p">:</span> <span class="s2">"53715"</span><span class="p">,</span>
          <span class="nt">"country"</span><span class="p">:</span> <span class="s2">"US"</span>
        <span class="p">},</span>
        <span class="nt">"position"</span><span class="p">:</span> <span class="p">{</span>
          <span class="nt">"longitude"</span><span class="p">:</span> <span class="mf">-89.430121</span><span class="p">,</span>
          <span class="nt">"latitude"</span><span class="p">:</span> <span class="mf">43.087806</span>
        <span class="p">},</span>
        <span class="nt">"managingOrganization"</span><span class="p">:</span> <span class="p">{</span>
          <span class="nt">"reference"</span><span class="p">:</span> <span class="s2">"urn:uuid:e6c5d179-370a-3659-9ce6-3d09da3c3ad0"</span><span class="p">,</span>
          <span class="nt">"display"</span><span class="p">:</span> <span class="s2">"UNITYPOINT HEALTH - MERITER"</span>
        <span class="p">}</span>
      <span class="p">},</span>
      <span class="nt">"request"</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">"method"</span><span class="p">:</span> <span class="s2">"POST"</span><span class="p">,</span>
        <span class="nt">"url"</span><span class="p">:</span> <span class="s2">"Location"</span>
      <span class="p">}</span>
    <span class="p">}</span>
</code></pre></div>

<h3><code>diff abbie.location adolfo.location</code></h3>
<div class="codehilite" data-code-language="Diff"><pre><span></span><code>2c2
&lt;       "fullUrl": "urn:uuid:5f0a03d6-92b8-6ec2-cdd2-893281c43776",
<span class="gd">---</span>
&gt;       "fullUrl": "urn:uuid:47ba9ed9-92d1-4727-7089-ced1836ea2a9",
5c5
&lt;         "id": "5f0a03d6-92b8-6ec2-cdd2-893281c43776",
<span class="gd">---</span>
&gt;         "id": "47ba9ed9-92d1-4727-7089-ced1836ea2a9",
</code></pre></div>

<p>Considering that the <code>Organiation.id</code> is constant across locations and patients, shouldn't the <code>Location.id</code> also be constant?</p>



<a name="211026041"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179239-tooling/topic/Synthea%20data%20issue%3A%20duplicate%20identical%20Locations%3F/near/211026041" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jason Walonoski <a href="https://fhir.github.io/chat-archive/stream/179239-tooling/topic/Synthea.20data.20issue.3A.20duplicate.20identical.20Locations.3F.html#211026041">(Sep 23 2020 at 16:13)</a>:</h4>
<p>Yep, looks like a bug.</p>



<a name="211026243"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179239-tooling/topic/Synthea%20data%20issue%3A%20duplicate%20identical%20Locations%3F/near/211026243" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jason Walonoski <a href="https://fhir.github.io/chat-archive/stream/179239-tooling/topic/Synthea.20data.20issue.3A.20duplicate.20identical.20Locations.3F.html#211026243">(Sep 23 2020 at 16:15)</a>:</h4>
<p>Created <a href="https://github.com/synthetichealth/synthea/issues/797">https://github.com/synthetichealth/synthea/issues/797</a></p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
