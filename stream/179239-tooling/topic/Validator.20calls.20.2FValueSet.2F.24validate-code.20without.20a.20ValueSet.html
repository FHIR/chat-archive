---
layout: page
title: "FHIR Chat  · Validator calls /ValueSet/$validate-code without a ValueSet · tooling"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179239-tooling/index.html">tooling</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179239-tooling/topic/Validator.20calls.20.2FValueSet.2F.24validate-code.20without.20a.20ValueSet.html">Validator calls /ValueSet/$validate-code without a ValueSet</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="238385307"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179239-tooling/topic/Validator%20calls%20/ValueSet/%24validate-code%20without%20a%20ValueSet/near/238385307" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179239-tooling/topic/Validator.20calls.20.2FValueSet.2F.24validate-code.20without.20a.20ValueSet.html#238385307">(May 11 2021 at 21:31)</a>:</h4>
<p>It appears that the validator sometimes (e.g., when validating a ValueSet that is defined extensionally) calls <code>/ValueSet/$validate-code</code> without specifying a ValueSet and that <a href="http://tx.fhir.org">tx.fhir.org</a> behaves as if <code>/CodeSystem/$validate-code</code> were called, but other terminology servers do not.</p>
<p>It appears that <a href="http://tx.fhir.org">tx.fhir.org</a> is wrong in this case (and thus the validator is behaving badly) since the normative definition of <code>/ValueSet/$validate-code</code> explicitly states:</p>
<blockquote>
<p>If the operation is not called at the instance level, one of the in parameters url, context or valueSet must be provided.</p>
</blockquote>



<a name="238465484"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179239-tooling/topic/Validator%20calls%20/ValueSet/%24validate-code%20without%20a%20ValueSet/near/238465484" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179239-tooling/topic/Validator.20calls.20.2FValueSet.2F.24validate-code.20without.20a.20ValueSet.html#238465484">(May 12 2021 at 12:33)</a>:</h4>
<p>how to reproduce this?</p>



<a name="238579653"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179239-tooling/topic/Validator%20calls%20/ValueSet/%24validate-code%20without%20a%20ValueSet/near/238579653" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179239-tooling/topic/Validator.20calls.20.2FValueSet.2F.24validate-code.20without.20a.20ValueSet.html#238579653">(May 13 2021 at 04:25)</a>:</h4>
<p>I think this description should help: <a href="https://github.com/hapifhir/org.hl7.fhir.core/issues/494">https://github.com/hapifhir/org.hl7.fhir.core/issues/494</a></p>



<a name="238579738"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179239-tooling/topic/Validator%20calls%20/ValueSet/%24validate-code%20without%20a%20ValueSet/near/238579738" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179239-tooling/topic/Validator.20calls.20.2FValueSet.2F.24validate-code.20without.20a.20ValueSet.html#238579738">(May 13 2021 at 04:26)</a>:</h4>
<p>I believe it should just be enough to change the call to <code>CodeSystem/$validate-code</code> in these batch requests</p>



<a name="238580020"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179239-tooling/topic/Validator%20calls%20/ValueSet/%24validate-code%20without%20a%20ValueSet/near/238580020" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alejandro Metke <a href="https://fhir.github.io/chat-archive/stream/179239-tooling/topic/Validator.20calls.20.2FValueSet.2F.24validate-code.20without.20a.20ValueSet.html#238580020">(May 13 2021 at 04:30)</a>:</h4>
<p>I think you still need to add the <code>url</code> parameter, but when calling <code>CodeSystem/$validate-code</code> that is the same as the <code>system</code> in the coding.</p>



<a name="238580072"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179239-tooling/topic/Validator%20calls%20/ValueSet/%24validate-code%20without%20a%20ValueSet/near/238580072" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alejandro Metke <a href="https://fhir.github.io/chat-archive/stream/179239-tooling/topic/Validator.20calls.20.2FValueSet.2F.24validate-code.20without.20a.20ValueSet.html#238580072">(May 13 2021 at 04:32)</a>:</h4>
<p>The spec for <code>CodeSystem/$validate-code</code> says 'If the operation is not called at the instance level, one of the parameters "url" or "codeSystem" must be provided.'</p>



<a name="238580313"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179239-tooling/topic/Validator%20calls%20/ValueSet/%24validate-code%20without%20a%20ValueSet/near/238580313" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alejandro Metke <a href="https://fhir.github.io/chat-archive/stream/179239-tooling/topic/Validator.20calls.20.2FValueSet.2F.24validate-code.20without.20a.20ValueSet.html#238580313">(May 13 2021 at 04:35)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> easiest way to reproduce is to create a simple extensional VS with SCT codes and run the publisher with <code>-tx https://r4.ontoserver.csiro.au/fhir</code>. I did this with a FSH project.</p>



<a name="238580436"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179239-tooling/topic/Validator%20calls%20/ValueSet/%24validate-code%20without%20a%20ValueSet/near/238580436" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179239-tooling/topic/Validator.20calls.20.2FValueSet.2F.24validate-code.20without.20a.20ValueSet.html#238580436">(May 13 2021 at 04:37)</a>:</h4>
<p>hmm, a pity -- if you pass in a Coding, then surely you want to validate against the <code>system</code> and shouldn't need to also specify a value for <code>url</code></p>



<a name="238580597"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179239-tooling/topic/Validator%20calls%20/ValueSet/%24validate-code%20without%20a%20ValueSet/near/238580597" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alejandro Metke <a href="https://fhir.github.io/chat-archive/stream/179239-tooling/topic/Validator.20calls.20.2FValueSet.2F.24validate-code.20without.20a.20ValueSet.html#238580597">(May 13 2021 at 04:40)</a>:</h4>
<p>Yes, I agree!</p>



<a name="238690601"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179239-tooling/topic/Validator%20calls%20/ValueSet/%24validate-code%20without%20a%20ValueSet/near/238690601" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179239-tooling/topic/Validator.20calls.20.2FValueSet.2F.24validate-code.20without.20a.20ValueSet.html#238690601">(May 13 2021 at 22:28)</a>:</h4>
<blockquote>
<p>easiest way to reproduce is to create a simple extensional VS with SCT codes and run the publisher with -tx <a href="https://r4.ontoserver.csiro.au/fhir">https://r4.ontoserver.csiro.au/fhir</a>. I did this with a FSH project</p>
</blockquote>
<p>This is hardly quick. Do you want to send me the project?</p>



<a name="238702639"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179239-tooling/topic/Validator%20calls%20/ValueSet/%24validate-code%20without%20a%20ValueSet/near/238702639" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alejandro Metke <a href="https://fhir.github.io/chat-archive/stream/179239-tooling/topic/Validator.20calls.20.2FValueSet.2F.24validate-code.20without.20a.20ValueSet.html#238702639">(May 14 2021 at 00:53)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191316">Grahame Grieve</span> <a href="#narrow/stream/179239-tooling/topic/Validator.20calls.20.2FValueSet.2F.24validate-code.20without.20a.20ValueSet/near/238690601">said</a>:</p>
<blockquote>
<blockquote>
<p>easiest way to reproduce is to create a simple extensional VS with SCT codes and run the publisher with -tx <a href="https://r4.ontoserver.csiro.au/fhir">https://r4.ontoserver.csiro.au/fhir</a>. I did this with a FSH project</p>
</blockquote>
<p>This is hardly quick. Do you want to send me the project?</p>
</blockquote>
<p>Fair enough. Here is the project <a href="/user_uploads/10155/r20gZOG_lbxW9ym23PK9HEdR/ExampleIG.zip">ExampleIG.zip</a>.</p>
<p>I'm sure you already know this, but just for completeness, what you need to do is unzip it and then:</p>
<div class="codehilite"><pre><span></span><code>sushi .
./_updatePublisher.sh
./_genonce.sh -tx https://r4.ontoserver.csiro.au/fhir
</code></pre></div>
<p>The warnings will be on output/qa.html.</p>



<a name="238711523"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179239-tooling/topic/Validator%20calls%20/ValueSet/%24validate-code%20without%20a%20ValueSet/near/238711523" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179239-tooling/topic/Validator.20calls.20.2FValueSet.2F.24validate-code.20without.20a.20ValueSet.html#238711523">(May 14 2021 at 02:59)</a>:</h4>
<p>fixed next release</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
