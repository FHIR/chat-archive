---
layout: page
title: "FHIR Chat  · Forge: Slicing usign the same type · tooling"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179239-tooling/index.html">tooling</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179239-tooling/topic/Forge.3A.20Slicing.20usign.20the.20same.20type.html">Forge: Slicing usign the same type</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="170548111"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179239-tooling/topic/Forge%3A%20Slicing%20usign%20the%20same%20type/near/170548111" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Diego Bosca <a href="https://fhir.github.io/chat-archive/stream/179239-tooling/topic/Forge.3A.20Slicing.20usign.20the.20same.20type.html#170548111">(Jul 10 2019 at 14:52)</a>:</h4>
<p>I've been trying to slice an observation value[x] using the same type (Quantity) to create an alternative. Discriminator is the code of the Quantity.<br>
Problem seems to be that Forge puts a fixed value in the Slice name as soon as I select the type, which cannot be changed. If I introduce a slice of the same type the same fixed value is applied to the Slice name, thus giving me a "duplicate slice name" error. Is this forbidden in FHIR somehow or is just a tool limitation?</p>



<a name="170598115"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179239-tooling/topic/Forge%3A%20Slicing%20usign%20the%20same%20type/near/170598115" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Townley-O&#x27;Neill <a href="https://fhir.github.io/chat-archive/stream/179239-tooling/topic/Forge.3A.20Slicing.20usign.20the.20same.20type.html#170598115">(Jul 11 2019 at 03:10)</a>:</h4>
<p>If you want to place constraints on valueQuantity that depend upon the value of valueQuantity.code, I expect that you have to slice valueQuantity on code.<br>
I do not know if that works.</p>



<a name="170611102"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179239-tooling/topic/Forge%3A%20Slicing%20usign%20the%20same%20type/near/170611102" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Diego Bosca <a href="https://fhir.github.io/chat-archive/stream/179239-tooling/topic/Forge.3A.20Slicing.20usign.20the.20same.20type.html#170611102">(Jul 11 2019 at 08:02)</a>:</h4>
<p>Thought about that, but then I'm not sure I would be able to define other constraints on each slice</p>



<a name="170695883"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179239-tooling/topic/Forge%3A%20Slicing%20usign%20the%20same%20type/near/170695883" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Townley-O&#x27;Neill <a href="https://fhir.github.io/chat-archive/stream/179239-tooling/topic/Forge.3A.20Slicing.20usign.20the.20same.20type.html#170695883">(Jul 12 2019 at 05:28)</a>:</h4>
<p>In theory, you can slice valueQuantity on code and then say sliceA is: "when code ='a', condition 1 applies" and sliceB is "when code='b' condition 2 applies".<br>
Does that help?</p>



<a name="170700870"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179239-tooling/topic/Forge%3A%20Slicing%20usign%20the%20same%20type/near/170700870" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Diego Bosca <a href="https://fhir.github.io/chat-archive/stream/179239-tooling/topic/Forge.3A.20Slicing.20usign.20the.20same.20type.html#170700870">(Jul 12 2019 at 07:22)</a>:</h4>
<p>I think I get what you say, but I'm not sure how to put that kind of conditional slices in Forge</p>



<a name="170798079"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179239-tooling/topic/Forge%3A%20Slicing%20usign%20the%20same%20type/near/170798079" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Diego Bosca <a href="https://fhir.github.io/chat-archive/stream/179239-tooling/topic/Forge.3A.20Slicing.20usign.20the.20same.20type.html#170798079">(Jul 13 2019 at 17:19)</a>:</h4>
<p>I haven't been able to create it in forge, as it won't allow me to change the slicename. This is what I have (with error as they both have same slicename)</p>
<div class="codehilite"><pre><span></span> &lt;differential&gt;
 &lt;element id=&quot;Observation.value[x]&quot;&gt;
&lt;path value=&quot;Observation.value[x]&quot;/&gt;
 &lt;slicing&gt;
 &lt;discriminator&gt;
&lt;type value=&quot;value&quot;/&gt;
&lt;path value=&quot;code&quot;/&gt;
&lt;/discriminator&gt;
&lt;rules value=&quot;open&quot;/&gt;
&lt;/slicing&gt;
&lt;/element&gt;
 &lt;element id=&quot;Observation.value[x]:valueQuantity&quot;&gt;
&lt;path value=&quot;Observation.valueQuantity&quot;/&gt;
&lt;sliceName value=&quot;valueQuantity&quot;/&gt;
 &lt;type&gt;
&lt;code value=&quot;Quantity&quot;/&gt;
&lt;/type&gt;
&lt;/element&gt;
 &lt;element id=&quot;Observation.value[x]:valueQuantity.code&quot;&gt;
&lt;path value=&quot;Observation.valueQuantity.code&quot;/&gt;
&lt;fixedCode value=&quot;kg&quot;/&gt;
&lt;/element&gt;
 &lt;element id=&quot;Observation.value[x]:valueQuantity&quot;&gt;
&lt;path value=&quot;Observation.valueQuantity&quot;/&gt;
&lt;sliceName value=&quot;valueQuantity&quot;/&gt;
 &lt;type&gt;
&lt;code value=&quot;Quantity&quot;/&gt;
&lt;/type&gt;
&lt;/element&gt;
 &lt;element id=&quot;Observation.value[x]:valueQuantity.code&quot;&gt;
&lt;path value=&quot;Observation.valueQuantity.code&quot;/&gt;
&lt;fixedCode value=&quot;g&quot;/&gt;
&lt;/element&gt;
&lt;/differential&gt;
</pre></div>


<p>If I were to adjust the slicename manually to make them different it would be correct or I need to do something else?</p>



<a name="170800285"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179239-tooling/topic/Forge%3A%20Slicing%20usign%20the%20same%20type/near/170800285" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Diego Bosca <a href="https://fhir.github.io/chat-archive/stream/179239-tooling/topic/Forge.3A.20Slicing.20usign.20the.20same.20type.html#170800285">(Jul 13 2019 at 18:27)</a>:</h4>
<p>Even if I change it from outside Forge and I open it then it shows the same error, as Forge seems to ignore the slicename in this case and makes both alternatives to have slicename valueQuantity</p>



<a name="170858841"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179239-tooling/topic/Forge%3A%20Slicing%20usign%20the%20same%20type/near/170858841" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Townley-O&#x27;Neill <a href="https://fhir.github.io/chat-archive/stream/179239-tooling/topic/Forge.3A.20Slicing.20usign.20the.20same.20type.html#170858841">(Jul 15 2019 at 02:10)</a>:</h4>
<p>You have defined two slices with the same discriminator value of "Quantity": one at line 13 and one at line 24. <br>
Slices MUST be distinct, and these are not.<br>
Try one slice with discriminator value = "Quantity" and in that slice say that valueQuantity.code can be either "kg" or "g".</p>



<a name="170868453"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179239-tooling/topic/Forge%3A%20Slicing%20usign%20the%20same%20type/near/170868453" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Diego Bosca <a href="https://fhir.github.io/chat-archive/stream/179239-tooling/topic/Forge.3A.20Slicing.20usign.20the.20same.20type.html#170868453">(Jul 15 2019 at 06:48)</a>:</h4>
<p>but then other constraints such as the minimum/maximum value cannot be different.<br>
They are different alternatives that can be distinguished by the code, so I assumed that the discriminator could just point to that</p>



<a name="170941218"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179239-tooling/topic/Forge%3A%20Slicing%20usign%20the%20same%20type/near/170941218" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Townley-O&#x27;Neill <a href="https://fhir.github.io/chat-archive/stream/179239-tooling/topic/Forge.3A.20Slicing.20usign.20the.20same.20type.html#170941218">(Jul 15 2019 at 23:31)</a>:</h4>
<p>In your example the cardinalities are the same. <br>
If you want different cardinalities for kg and g, make the discriminator more complex, e.g. type and code, and then say that for the slice where type = quantity and code = kg, so an so applies.</p>



<a name="170971815"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179239-tooling/topic/Forge%3A%20Slicing%20usign%20the%20same%20type/near/170971815" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179239-tooling/topic/Forge.3A.20Slicing.20usign.20the.20same.20type.html#170971815">(Jul 16 2019 at 10:11)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="191708">@Diego Bosca</span>, Forge automatically renames a polymorphic element (name ending with "[x]") when constrained to a single type, and also assigns/updates the associated slice name. We've received some reports from customers that this behavior prevents modeling some advanced scenario's using slicing. I am going to look into this to see if we can improve the UI to support this.</p>



<a name="170972094"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179239-tooling/topic/Forge%3A%20Slicing%20usign%20the%20same%20type/near/170972094" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Diego Bosca <a href="https://fhir.github.io/chat-archive/stream/179239-tooling/topic/Forge.3A.20Slicing.20usign.20the.20same.20type.html#170972094">(Jul 16 2019 at 10:16)</a>:</h4>
<p>Great! I think it's needed when defining alternatives from the same type</p>



<a name="170999480"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179239-tooling/topic/Forge%3A%20Slicing%20usign%20the%20same%20type/near/170999480" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179239-tooling/topic/Forge.3A.20Slicing.20usign.20the.20same.20type.html#170999480">(Jul 16 2019 at 15:49)</a>:</h4>
<p>Indeed. I will solicit some guidance from the core team on how to handle such scenarios.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
