---
layout: page
title: "FHIR Chat  · Differences in validation in Forge vs ClinFHIR · tooling"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179239-tooling/index.html">tooling</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179239-tooling/topic/Differences.20in.20validation.20in.20Forge.20vs.20ClinFHIR.html">Differences in validation in Forge vs ClinFHIR</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="182550696"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179239-tooling/topic/Differences%20in%20validation%20in%20Forge%20vs%20ClinFHIR/near/182550696" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Diego Bosca <a href="https://fhir.github.io/chat-archive/stream/179239-tooling/topic/Differences.20in.20validation.20in.20Forge.20vs.20ClinFHIR.html#182550696">(Dec 04 2019 at 12:28)</a>:</h4>
<p>I'm curious about the differences in profile validation criteria in Forge vs ClinFHIR. I can generate profiles that give no errors in Forge but return lots of errors in clinFHIR</p>
<p>Most of errors are multiple occurrences of these errors, repeating for each element in the profile. E.g. </p>
<p>StructureDefinition.differential.element[0]</p>
<p>Constraints must be unique by key () constraint.select(key).isDistinct()<br>
Types must be unique by code () type.select(code).isDistinct()<br>
Must have a modifier reason if isModifier = true () isModifier implies isModifierReason.exists()</p>
<p>Last one is puzzling because there is no modifier defined. </p>
<p>This is the profile I'm testing things with (it is autogenerated, the idea is to improve the generation process to make it valid for every tool)</p>
<div class="codehilite"><pre><span></span>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;StructureDefinition xmlns=&quot;http://hl7.org/fhir&quot;&gt;
   &lt;id value=&quot;observation-Observation1&quot;/&gt;
   &lt;extension url=&quot;http://hl7.org/fhir/StructureDefinition/structuredefinition-fmm&quot;&gt;
      &lt;valueInteger value=&quot;0&quot;/&gt;
   &lt;/extension&gt;
   &lt;url value=&quot;http://linkehr.com/fhir/observation-observation1&quot;/&gt;
   &lt;version value=&quot;0&quot;/&gt;
   &lt;name value=&quot;Observation1&quot;/&gt;
   &lt;status value=&quot;draft&quot;/&gt;
   &lt;date value=&quot;2019-11-12&quot;/&gt;
   &lt;publisher value=&quot;openEHR&quot;/&gt;
   &lt;contact&gt;
      &lt;telecom&gt;
         &lt;system value=&quot;url&quot;/&gt;
         &lt;value value=&quot;http://www.veratech.es&quot;/&gt;
      &lt;/telecom&gt;
   &lt;/contact&gt;
   &lt;description value=&quot;was empty&quot;/&gt;
   &lt;fhirVersion value=&quot;4.0.0&quot;/&gt;
   &lt;mapping&gt;
      &lt;identity value=&quot;openEHR&quot;/&gt;
      &lt;uri value=&quot;http://openehr.org&quot;/&gt;
      &lt;name value=&quot;openEHR Mapping&quot;/&gt;
   &lt;/mapping&gt;
   &lt;mapping&gt;
      &lt;identity value=&quot;openEHR-natural&quot;/&gt;
      &lt;uri value=&quot;http://openehr.org&quot;/&gt;
      &lt;name value=&quot;openEHR natural path&quot;/&gt;
   &lt;/mapping&gt;
   &lt;kind value=&quot;complex-type&quot;/&gt;
   &lt;abstract value=&quot;false&quot;/&gt;
   &lt;type value=&quot;Observation&quot;/&gt;
   &lt;baseDefinition value=&quot;http://hl7.org/fhir/StructureDefinition/Observation&quot;/&gt;
   &lt;derivation value=&quot;constraint&quot;/&gt;
   &lt;differential&gt;
      &lt;element id=&quot;Observation&quot;&gt;
         &lt;path value=&quot;Observation&quot;/&gt;
         &lt;short value=&quot;OBSERVATION1&quot;/&gt;
         &lt;definition value=&quot;&quot;/&gt;
         &lt;min value=&quot;0&quot;/&gt;
      &lt;/element&gt;
      &lt;element id=&quot;Observation.component&quot;&gt;
         &lt;path value=&quot;Observation.component&quot;/&gt;
         &lt;slicing&gt;
            &lt;discriminator&gt;
               &lt;type value=&quot;value&quot;/&gt;
               &lt;path value=&quot;code.coding.code&quot;/&gt;
            &lt;/discriminator&gt;
            &lt;discriminator&gt;
               &lt;type value=&quot;value&quot;/&gt;
               &lt;path value=&quot;code.coding.system&quot;/&gt;
            &lt;/discriminator&gt;
            &lt;ordered value=&quot;false&quot;/&gt;
            &lt;rules value=&quot;open&quot;/&gt;
         &lt;/slicing&gt;
      &lt;/element&gt;
      &lt;element id=&quot;Observation.component:Element1_1&quot;&gt;
         &lt;path value=&quot;Observation.component&quot;/&gt;
         &lt;sliceName value=&quot;Element1_1&quot;/&gt;
         &lt;short value=&quot;ELEMENT1.1&quot;/&gt;
         &lt;min value=&quot;0&quot;/&gt;
      &lt;/element&gt;
      &lt;element id=&quot;Observation.component:Element1_1.value[x]&quot;&gt;
         &lt;path value=&quot;Observation.component.value[x]&quot;/&gt;
         &lt;type&gt;
            &lt;code value=&quot;CodeableConcept&quot;/&gt;
         &lt;/type&gt;
         &lt;mapping&gt;
            &lt;identity value=&quot;openEHR&quot;/&gt;
            &lt;map value=&quot;/content[at0001]/items[at0004]/data[at0012]/events[at0014]/data[at0005]/items[at0006]&quot;/&gt;
         &lt;/mapping&gt;
         &lt;mapping&gt;
            &lt;identity value=&quot;openEHR-natural&quot;/&gt;
            &lt;map value=&quot;/content[SECTION1]/items[OBSERVATION1]/data[at0012]/events[INTERVAL_EVENT]/data[ITEM_TREE]/items[ELEMENT1.1]&quot;/&gt;
         &lt;/mapping&gt;
      &lt;/element&gt;
      &lt;element id=&quot;Observation.component:Element1_2&quot;&gt;
         &lt;path value=&quot;Observation.component&quot;/&gt;
         &lt;sliceName value=&quot;Element1_2&quot;/&gt;
         &lt;short value=&quot;ELEMENT1.2&quot;/&gt;
         &lt;min value=&quot;0&quot;/&gt;
      &lt;/element&gt;
      &lt;element id=&quot;Observation.component:Element1_2.value[x]&quot;&gt;
         &lt;path value=&quot;Observation.component.value[x]&quot;/&gt;
         &lt;type&gt;
            &lt;code value=&quot;Quantity&quot;/&gt;
         &lt;/type&gt;
      &lt;/element&gt;
      &lt;element id=&quot;Observation.component:Element1_2.value[x].value&quot;&gt;
         &lt;path value=&quot;Observation.component.value[x].value&quot;/&gt;
         &lt;min value=&quot;1&quot;/&gt;
         &lt;max value=&quot;1&quot;/&gt;
         &lt;type&gt;
            &lt;code value=&quot;string&quot;/&gt;
         &lt;/type&gt;
      &lt;/element&gt;
      &lt;element id=&quot;Observation.component:Element1_2.value[x].system&quot;&gt;
         &lt;path value=&quot;Observation.component.value[x].system&quot;/&gt;
         &lt;min value=&quot;1&quot;/&gt;
         &lt;max value=&quot;1&quot;/&gt;
         &lt;type&gt;
            &lt;code value=&quot;uri&quot;/&gt;
         &lt;/type&gt;
         &lt;fixedUri value=&quot;http://unitsofmeasure.org&quot;/&gt;
      &lt;/element&gt;
      &lt;element id=&quot;Observation.component:Element1_2.value[x].code&quot;&gt;
         &lt;path value=&quot;Observation.component.value[x].code&quot;/&gt;
         &lt;min value=&quot;1&quot;/&gt;
         &lt;max value=&quot;1&quot;/&gt;
         &lt;type&gt;
            &lt;code value=&quot;code&quot;/&gt;
         &lt;/type&gt;
      &lt;/element&gt;
   &lt;/differential&gt;
&lt;/StructureDefinition&gt;
</pre></div>



<a name="182553467"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179239-tooling/topic/Differences%20in%20validation%20in%20Forge%20vs%20ClinFHIR/near/182553467" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179239-tooling/topic/Differences.20in.20validation.20in.20Forge.20vs.20ClinFHIR.html#182553467">(Dec 04 2019 at 13:08)</a>:</h4>
<p><span class="user-mention" data-user-id="191321">@David Hay</span></p>



<a name="182578191"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179239-tooling/topic/Differences%20in%20validation%20in%20Forge%20vs%20ClinFHIR/near/182578191" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Hay <a href="https://fhir.github.io/chat-archive/stream/179239-tooling/topic/Differences.20in.20validation.20in.20Forge.20vs.20ClinFHIR.html#182578191">(Dec 04 2019 at 17:27)</a>:</h4>
<p>Well, clinFHIR itself doesn't do any validation - it just calls the $validate operation on the servers you select, so that's where to look for differences. Which servers are the ones that generate errors? BTW - intending to remove the requirement to have to declare the profile in the instance when I get a chance - a work in progress ATM...</p>



<a name="182641434"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179239-tooling/topic/Differences%20in%20validation%20in%20Forge%20vs%20ClinFHIR/near/182641434" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Diego Bosca <a href="https://fhir.github.io/chat-archive/stream/179239-tooling/topic/Differences.20in.20validation.20in.20Forge.20vs.20ClinFHIR.html#182641434">(Dec 05 2019 at 09:24)</a>:</h4>
<p>I just pasted the profile and pressed the validation button :)</p>



<a name="182662488"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179239-tooling/topic/Differences%20in%20validation%20in%20Forge%20vs%20ClinFHIR/near/182662488" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Hay <a href="https://fhir.github.io/chat-archive/stream/179239-tooling/topic/Differences.20in.20validation.20in.20Forge.20vs.20ClinFHIR.html#182662488">(Dec 05 2019 at 14:15)</a>:</h4>
<p>Ah. Assuming you're using the CF validator (<a href="https://fhirblog.com/2019/11/12/validating-a-resource/" target="_blank" title="https://fhirblog.com/2019/11/12/validating-a-resource/">https://fhirblog.com/2019/11/12/validating-a-resource/</a>) then it's intended to validate conformance of a resource <strong>instance</strong> to a profile - not the profile itself. </p>
<p>The idea is that you save the profile on a server (like hapi or grahames server) - along with any dependant artifacts like extension definitions or terminology, then create an instance that is supposed to be conformant to that profile and paste <strong>that</strong> into the validator and select the server. </p>
<p>Right now, you need to indicate the profile in the resource meta element - working on that</p>
<p>All the app does is to call the $validate operation on the indicatedserver/s and show the results...</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
