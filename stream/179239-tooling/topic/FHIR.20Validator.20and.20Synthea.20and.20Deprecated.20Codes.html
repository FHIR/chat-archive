---
layout: page
title: "FHIR Chat  · FHIR Validator and Synthea and Deprecated Codes · tooling"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179239-tooling/index.html">tooling</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179239-tooling/topic/FHIR.20Validator.20and.20Synthea.20and.20Deprecated.20Codes.html">FHIR Validator and Synthea and Deprecated Codes</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="243162844"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179239-tooling/topic/FHIR%20Validator%20and%20Synthea%20and%20Deprecated%20Codes/near/243162844" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jason Walonoski <a href="https://fhir.github.io/chat-archive/stream/179239-tooling/topic/FHIR.20Validator.20and.20Synthea.20and.20Deprecated.20Codes.html#243162844">(Jun 18 2021 at 13:47)</a>:</h4>
<p>So, a GitHub issue was posted on Synthea today, saying that the FHIR validator errors out on our synthetic data, because we're using deprecated codes.</p>
<p><a href="https://github.com/synthetichealth/synthea/issues/902">https://github.com/synthetichealth/synthea/issues/902</a></p>
<div class="codehilite"><pre><span></span><code>Error: HTTP 422 Unprocessable Entity: Unknown code {http://snomed.info/sct}698360004 for &#39;http://snomed.info/sct#698360004&#39;

698360004 is deprecated the correct code is  http://snomed.info/sct#735985000
</code></pre></div>
<p>This has probably been discussed a lot previously, but is this the behavior we should expect from the validator? Part of me says "yes, the codes are no longer valid" and another part of me says "we can't expect older data to be updated, possibly incorrectly, just because a code was deprecated. At one point it was valid."</p>
<p>I suppose I could write a script to occasionally scan Synthea for deprecated codes and we can replace them, but that just sort of sweeps the issue under the table.</p>
<p>Would the correct thing to do be to change my use of  the system from <code>http://snomed.info/sct</code> to <code>http://snomed.info/sct/[sctid]</code> or <code>http://snomed.info/sct/[sctid]/version/[YYYYMMDD]</code> as according to <a href="http://hl7.org/fhir/R4/snomedct.html#4.3.1.0.3">http://hl7.org/fhir/R4/snomedct.html#4.3.1.0.3</a>?</p>
<p>Which in practice would look like changing this:</p>
<div class="codehilite" data-code-language="JSON"><pre><span></span><code><span class="p">{</span>
        <span class="nt">"coding"</span><span class="p">:</span> <span class="p">[</span> <span class="p">{</span>
          <span class="nt">"system"</span><span class="p">:</span> <span class="s2">"http://snomed.info/sct"</span><span class="p">,</span>
          <span class="nt">"code"</span><span class="p">:</span> <span class="s2">"698360004"</span><span class="p">,</span>
          <span class="nt">"display"</span><span class="p">:</span> <span class="s2">"Diabetes self management plan"</span>
        <span class="p">}</span> <span class="p">],</span>
        <span class="nt">"text"</span><span class="p">:</span> <span class="s2">"Diabetes self management plan"</span>
      <span class="p">}</span>
</code></pre></div>
<p>to this:</p>
<div class="codehilite" data-code-language="JSON"><pre><span></span><code><span class="p">{</span>
        <span class="nt">"coding"</span><span class="p">:</span> <span class="p">[</span> <span class="p">{</span>
          <span class="nt">"system"</span><span class="p">:</span> <span class="s2">"http://snomed.info/sct/900000000000207008/version/20210131"</span><span class="p">,</span>
          <span class="nt">"code"</span><span class="p">:</span> <span class="s2">"735985000"</span><span class="p">,</span>
          <span class="nt">"display"</span><span class="p">:</span> <span class="s2">"Diabetes self management plan"</span>
        <span class="p">}</span> <span class="p">],</span>
        <span class="nt">"text"</span><span class="p">:</span> <span class="s2">"Diabetes self management plan"</span>
      <span class="p">}</span>
</code></pre></div>
<p>Would the FHIR Validator handle that correctly?</p>



<a name="243211994"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179239-tooling/topic/FHIR%20Validator%20and%20Synthea%20and%20Deprecated%20Codes/near/243211994" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179239-tooling/topic/FHIR.20Validator.20and.20Synthea.20and.20Deprecated.20Codes.html#243211994">(Jun 18 2021 at 21:57)</a>:</h4>
<p>you'd leave the system alone and introduce a  version. But where exactly is this error coming from? I don't recognise it</p>



<a name="243225661"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179239-tooling/topic/FHIR%20Validator%20and%20Synthea%20and%20Deprecated%20Codes/near/243225661" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179239-tooling/topic/FHIR.20Validator.20and.20Synthea.20and.20Deprecated.20Codes.html#243225661">(Jun 19 2021 at 03:18)</a>:</h4>
<p>Nor do I.</p>



<a name="243376141"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179239-tooling/topic/FHIR%20Validator%20and%20Synthea%20and%20Deprecated%20Codes/near/243376141" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jason Walonoski <a href="https://fhir.github.io/chat-archive/stream/179239-tooling/topic/FHIR.20Validator.20and.20Synthea.20and.20Deprecated.20Codes.html#243376141">(Jun 21 2021 at 12:44)</a>:</h4>
<p>I'm not sure where the error is coming from, the person who posted the issue just reported <code>the FHIR validator</code> -- I'll try to get more information.</p>



<a name="243387642"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179239-tooling/topic/FHIR%20Validator%20and%20Synthea%20and%20Deprecated%20Codes/near/243387642" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jason Walonoski <a href="https://fhir.github.io/chat-archive/stream/179239-tooling/topic/FHIR.20Validator.20and.20Synthea.20and.20Deprecated.20Codes.html#243387642">(Jun 21 2021 at 14:10)</a>:</h4>
<p>FWIW, the person who reported the bug said it was the HAPI FHIR Server (<a href="https://hapifhir.io/">https://hapifhir.io/</a>), their own installation with MariaDB as backend database – With FHIR validator activated.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
