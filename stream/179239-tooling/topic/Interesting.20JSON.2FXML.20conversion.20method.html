---
layout: page
title: "FHIR Chat  · Interesting JSON/XML conversion method · tooling"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179239-tooling/index.html">tooling</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179239-tooling/topic/Interesting.20JSON.2FXML.20conversion.20method.html">Interesting JSON/XML conversion method</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="232237972"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179239-tooling/topic/Interesting%20JSON/XML%20conversion%20method/near/232237972" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Adam Flinton <a href="https://fhir.github.io/chat-archive/stream/179239-tooling/topic/Interesting.20JSON.2FXML.20conversion.20method.html#232237972">(Mar 29 2021 at 09:08)</a>:</h4>
<p>Not just... could enrich or redact.... AWS S3 Object lambda...... was thinking wrt fhir XML &lt;&gt; JSON conversions on the fly. ie. using <a href="https://aws.amazon.com/blogs/aws/introducing-amazon-s3-object-lambda-use-your-code-to-process-data-as-it-is-being-retrieved-from-s3/">https://aws.amazon.com/blogs/aws/introducing-amazon-s3-object-lambda-use-your-code-to-process-data-as-it-is-being-retrieved-from-s3/</a></p>
<p>e.g. <a href="https://itnext.io/serverless-framework-use-aws-s3-object-lambda-to-resize-images-on-the-fly-868a37017f3c">https://itnext.io/serverless-framework-use-aws-s3-object-lambda-to-resize-images-on-the-fly-868a37017f3c</a> </p>
<p>Are there standard FHIR XML &lt;&gt; JSON conversion routines which could be plugged in? <br>
Load Object model &amp; then output in desired markup?</p>



<a name="232251145"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179239-tooling/topic/Interesting%20JSON/XML%20conversion%20method/near/232251145" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Egger <a href="https://fhir.github.io/chat-archive/stream/179239-tooling/topic/Interesting.20JSON.2FXML.20conversion.20method.html#232251145">(Mar 29 2021 at 11:13)</a>:</h4>
<p>which language are you looking for? here is a <a href="https://github.com/lantanagroup/FHIR.js">node.js library</a> but there are others with java and .net around.</p>



<a name="232299793"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179239-tooling/topic/Interesting%20JSON/XML%20conversion%20method/near/232299793" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shamil Nizamov <a href="https://fhir.github.io/chat-archive/stream/179239-tooling/topic/Interesting.20JSON.2FXML.20conversion.20method.html#232299793">(Mar 29 2021 at 16:56)</a>:</h4>
<p>In case of FHIR simple conversion to/from XML &lt;&gt; JSON does not work well. It may lose structure/semantic in case of narrative, arrays, element's extensions, etc.</p>



<a name="232318428"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179239-tooling/topic/Interesting%20JSON/XML%20conversion%20method/near/232318428" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Egger <a href="https://fhir.github.io/chat-archive/stream/179239-tooling/topic/Interesting.20JSON.2FXML.20conversion.20method.html#232318428">(Mar 29 2021 at 19:01)</a>:</h4>
<p><span class="user-mention" data-user-id="192195">@Shamil</span> do you have an example? I think it is one of the strengths that you can have different representations (e.g. xml, json) with a FHIR resource and the servers are able to serve these different representations. I'm not aware that you lose structure/semantic.</p>



<a name="232319833"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179239-tooling/topic/Interesting%20JSON/XML%20conversion%20method/near/232319833" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gino Canessa <a href="https://fhir.github.io/chat-archive/stream/179239-tooling/topic/Interesting.20JSON.2FXML.20conversion.20method.html#232319833">(Mar 29 2021 at 19:11)</a>:</h4>
<p>One of the issues is trying to map types without context.  E.g., if you have an XML literal: <code>&lt;value value="6"/&gt;</code>, does that map to JSON <code>"valueInteger": 6</code>, <code>"valueDecimal": 6</code>, <code>"valuePositiveInt": 6</code>, or something else?</p>



<a name="232325498"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179239-tooling/topic/Interesting%20JSON/XML%20conversion%20method/near/232325498" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Egger <a href="https://fhir.github.io/chat-archive/stream/179239-tooling/topic/Interesting.20JSON.2FXML.20conversion.20method.html#232325498">(Mar 29 2021 at 19:50)</a>:</h4>
<p>i almost don't dare to ask ... but where can we put  &lt;value value="6"/&gt; in a fhir resource?</p>



<a name="232327888"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179239-tooling/topic/Interesting%20JSON/XML%20conversion%20method/near/232327888" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> ryan moehrke <a href="https://fhir.github.io/chat-archive/stream/179239-tooling/topic/Interesting.20JSON.2FXML.20conversion.20method.html#232327888">(Mar 29 2021 at 20:08)</a>:</h4>
<p>you don't? you use &lt;valueString value="whatever"/&gt; like normal<br>
I think the biggest disconnects happen around extending basic datatypes</p>



<a name="232329050"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179239-tooling/topic/Interesting%20JSON/XML%20conversion%20method/near/232329050" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gino Canessa <a href="https://fhir.github.io/chat-archive/stream/179239-tooling/topic/Interesting.20JSON.2FXML.20conversion.20method.html#232329050">(Mar 29 2021 at 20:16)</a>:</h4>
<p>Sure you do.  Inside an Observation that is perfectly valid XML (<a href="http://hl7.org/fhir/observation-example-f001-glucose.xml.html">example</a>).</p>
<p>By context, I know that a <code>&lt;value&gt;</code> tag inside a <code>&lt;valueQuantity&gt;</code> tag is a decimal type, but it's not obvious from the fragment.</p>



<a name="232329481"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179239-tooling/topic/Interesting%20JSON/XML%20conversion%20method/near/232329481" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179239-tooling/topic/Interesting.20JSON.2FXML.20conversion.20method.html#232329481">(Mar 29 2021 at 20:20)</a>:</h4>
<p>True, but it's going to be <code>"value": 6.3</code> in the JSON too, so that's not relevant for conversion.  What <em>is</em> relevant is that<br>
<code>&lt;value value="6323"/&gt;</code> becomes <code>"value":"6323"</code>; while <code>&lt;value value="6.3"/&gt;</code> becomes <code>"value":6.3</code></p>



<a name="232329575"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179239-tooling/topic/Interesting%20JSON/XML%20conversion%20method/near/232329575" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179239-tooling/topic/Interesting.20JSON.2FXML.20conversion.20method.html#232329575">(Mar 29 2021 at 20:20)</a>:</h4>
<p>i.e. there's no way to tell numbers from strings (or booleans) without access to the metadata</p>



<a name="232329976"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179239-tooling/topic/Interesting%20JSON/XML%20conversion%20method/near/232329976" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gino Canessa <a href="https://fhir.github.io/chat-archive/stream/179239-tooling/topic/Interesting.20JSON.2FXML.20conversion.20method.html#232329976">(Mar 29 2021 at 20:24)</a>:</h4>
<p>Thanks Lloyd, I was going to <del>add</del> clarify that but got sidetracked by something in the house.  This is why I should only write long posts  =)</p>



<a name="232330494"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179239-tooling/topic/Interesting%20JSON/XML%20conversion%20method/near/232330494" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Egger <a href="https://fhir.github.io/chat-archive/stream/179239-tooling/topic/Interesting.20JSON.2FXML.20conversion.20method.html#232330494">(Mar 29 2021 at 20:28)</a>:</h4>
<p>Thanks <span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> and <span class="user-mention" data-user-id="222054">@Gino Canessa</span></p>



<a name="232332180"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179239-tooling/topic/Interesting%20JSON/XML%20conversion%20method/near/232332180" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179239-tooling/topic/Interesting.20JSON.2FXML.20conversion.20method.html#232332180">(Mar 29 2021 at 20:40)</a>:</h4>
<p>This is all true, but I think the point is that serious FHIR XML&lt;--&gt;JSON converters <em>should</em> have access to the metadata and therefore should be able to do non-lossy conversion.  Assuming we're not talking about custom resources, then all instances will be based on (at most) <em>constraints</em> of core FHIR types.  Since constraints cannot add new elements, then as long as a converter has the core FHIR type definitions, they should be all set.  As <span class="user-mention" data-user-id="237342">@ryan moehrke</span> pointed out above, converters know even the type of choice elements since there are serialization rules about that.</p>



<a name="232336510"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179239-tooling/topic/Interesting%20JSON/XML%20conversion%20method/near/232336510" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gino Canessa <a href="https://fhir.github.io/chat-archive/stream/179239-tooling/topic/Interesting.20JSON.2FXML.20conversion.20method.html#232336510">(Mar 29 2021 at 21:10)</a>:</h4>
<p>Yes - I was under the impression that the request was for a generic XML &lt;-&gt; JSON converter that could handle FHIR.  Once you include the core definitions, it is fairly straightforward (and many language-based toolkits will even do this for you).</p>



<a name="235286875"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179239-tooling/topic/Interesting%20JSON/XML%20conversion%20method/near/235286875" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179239-tooling/topic/Interesting.20JSON.2FXML.20conversion.20method.html#235286875">(Apr 20 2021 at 04:45)</a>:</h4>
<p>the other challenge is converting XML --&gt; JSON, and knowing when the output is an array or not. You must have access to the metadata to convert from XML to JSON, but not from JSON to XML</p>



<a name="236291944"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179239-tooling/topic/Interesting%20JSON/XML%20conversion%20method/near/236291944" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dietrich Haag <a href="https://fhir.github.io/chat-archive/stream/179239-tooling/topic/Interesting.20JSON.2FXML.20conversion.20method.html#236291944">(Apr 27 2021 at 07:01)</a>:</h4>
<p>Hi everyone, hopefully I am in the right context here.</p>
<p>Is there some FHIR-XML &lt;&gt; FHIR-JSON Converter as single tool (e.g. command line) available? I am aware that a FHIR-Server can $convert an input to an specified output, but this is not applicable for me.<br>
The HL7-Validator is able to consume input as XML or JSON, has it maybe some options for this purpose I'am not aware of (not found anything about it)?</p>



<a name="236292367"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179239-tooling/topic/Interesting%20JSON/XML%20conversion%20method/near/236292367" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Zautke <a href="https://fhir.github.io/chat-archive/stream/179239-tooling/topic/Interesting.20JSON.2FXML.20conversion.20method.html#236292367">(Apr 27 2021 at 07:04)</a>:</h4>
<p><span class="user-mention" data-user-id="203235">@Ward Weistra</span></p>



<a name="236295168"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179239-tooling/topic/Interesting%20JSON/XML%20conversion%20method/near/236295168" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Egger <a href="https://fhir.github.io/chat-archive/stream/179239-tooling/topic/Interesting.20JSON.2FXML.20conversion.20method.html#236295168">(Apr 27 2021 at 07:33)</a>:</h4>
<p><span class="user-mention" data-user-id="390283">@Dietrich Haag</span> you can use the <a href="https://confluence.hl7.org/display/FHIR/Using+the+FHIR+Validator">FHIR Java Validator</a> to a conversion, there is a -convert option and you specify the output file and depending on output file format the conversion will be done (json to xml or xml to json).</p>
<div class="codehilite"><pre><span></span><code>-convert requires the parameters -source and -output. ig may be used to provide a logical model
</code></pre></div>
<p>e.g. java -jar validator_cli.jar bundle.json -version 4.0.1 -convert -output ./bundle.xml</p>



<a name="236323434"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179239-tooling/topic/Interesting%20JSON/XML%20conversion%20method/near/236323434" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dietrich Haag <a href="https://fhir.github.io/chat-archive/stream/179239-tooling/topic/Interesting.20JSON.2FXML.20conversion.20method.html#236323434">(Apr 27 2021 at 12:01)</a>:</h4>
<p><span class="user-mention" data-user-id="191478">@Oliver Egger</span> thanks! <br>
My first though about this option was to convert between coding systems or fhir versions, cause I was not aware the output format could be determined by the file extension. </p>
<p>For the -ig parameter, would it be correct if I insert the same ig's I would do for validating an bundle/resource?</p>
<p>In my case I validate with following parameters:</p>
<div class="codehilite"><pre><span></span><code>Params: -version 4.0.1  -locale de -recurse -no-extensible-binding-warnings -tx n/a -ig de.basisprofil.r4-0.9.11.tgz -ig hl7.terminology.r4.tgz -ig kbv.basis-1.1.0 -ig kbv.mio.impfpass-1.00.000/package/KBVCSMIOVaccinationTechnicalEntryType.json -ig kbv.mio.impfpass-1.00.000/package/KBVEXMIOVaccinationBasicImmunization.json -ig kbv.mio.impfpass-1.00.000/package/KBVEXMIOVaccinationEntryType.json -ig kbv.mio.impfpass-1.00.000/package/KBVEXMIOVaccinationFollowUp.json -ig kbv.mio.impfpass-1.00.000/package/KBVVSMIOVaccinationEntryType.json -ig Schluesseltabellen -ig KBV_FHIR_AW Mustermann_Martina_10000_AW.xml
</code></pre></div>
<p>So I can convert extending the validation-call with: </p>
<div class="codehilite"><pre><span></span><code>-convert -output KBV_FHIR_AW Mustermann_Martina_10000_AW.json
</code></pre></div>
<p><strong>Problem with umlauts</strong><br>
Converting json &gt; xml breaks all umlauts. xml &gt; json works fine - than converting this json&gt; xml and comparing the original xml with the converted xml show the broken umlauts e.g.: <code>"Müller" &gt; "M&amp;#xFC;ller" </code></p>
<p>Unclear is the "-source" option. What would I use it for?</p>



<a name="236341176"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179239-tooling/topic/Interesting%20JSON/XML%20conversion%20method/near/236341176" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Egger <a href="https://fhir.github.io/chat-archive/stream/179239-tooling/topic/Interesting.20JSON.2FXML.20conversion.20method.html#236341176">(Apr 27 2021 at 13:58)</a>:</h4>
<blockquote>
<p>My first though about this option was to convert between coding systems or fhir versions,</p>
</blockquote>
<p>for fhir version you can use the -transform parameter <a href="#narrow/stream/179166-implementers/topic/R3.20to.20R4.20StructureDefinition.20transformation">see</a></p>
<blockquote>
<p>For the -ig parameter, would it be correct if I insert the same ig's I would do for validating an bundle/resource?</p>
</blockquote>
<p>the ig parameter are not necessary for the conversion (except you would provide a logical model which you are parsing or converting to)</p>
<blockquote>
<p>Problem with umlauts</p>
</blockquote>
<p>I think this is an open issued in the java fhir validator, i prepared a <a href="https://github.com/hapifhir/org.hl7.fhir.core/pull/236">PR</a> but it did not yet get integrated in the code base. maybe you can add a comment below that <a href="https://github.com/hapifhir/org.hl7.fhir.core/pull/236">PR</a>  that you experience the same issue?</p>
<blockquote>
<p>Unclear is the "-source" option. What would I use it for?</p>
</blockquote>
<p>maybe you can add it instead of the file as main parameter? agree that it is not clear ...</p>



<a name="236343050"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179239-tooling/topic/Interesting%20JSON/XML%20conversion%20method/near/236343050" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vassil Peytchev <a href="https://fhir.github.io/chat-archive/stream/179239-tooling/topic/Interesting.20JSON.2FXML.20conversion.20method.html#236343050">(Apr 27 2021 at 14:09)</a>:</h4>
<p>Just a nit-pick:</p>
<blockquote>
<p>Converting json &gt; xml breaks all umlauts. xml &gt; json works fine - than converting this json&gt; xml and comparing the original xml with the converted xml show the broken umlauts e.g.: "Müller" &gt; "M&#xFC;ller" </p>
</blockquote>
<p>As far as I know, this does not "break" the umlauts - from the point of view of an XML processor, the XML entity is equivalent to the corresponding character.</p>



<a name="236462443"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179239-tooling/topic/Interesting%20JSON/XML%20conversion%20method/near/236462443" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ward Weistra <a href="https://fhir.github.io/chat-archive/stream/179239-tooling/topic/Interesting.20JSON.2FXML.20conversion.20method.html#236462443">(Apr 28 2021 at 07:26)</a>:</h4>
<p><span class="user-mention" data-user-id="390283">@Dietrich Haag</span> Please also have a look at <a href="https://fire.ly/products/firely-terminal/">Firely Terminal</a>. You would just:</p>
<ul>
<li>Push the resources you want to the internal stack, e.g. <code>fhir push *.xml</code></li>
<li>And then save them in the format you want, e.g. <code>fhir save --json --all</code></li>
</ul>
<p>You can control the saved filename with FHIRPath or wrap it in a script to keep the original filename-stem.</p>



<a name="236470072"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179239-tooling/topic/Interesting%20JSON/XML%20conversion%20method/near/236470072" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dietrich Haag <a href="https://fhir.github.io/chat-archive/stream/179239-tooling/topic/Interesting.20JSON.2FXML.20conversion.20method.html#236470072">(Apr 28 2021 at 08:37)</a>:</h4>
<p><span class="user-mention" data-user-id="203235">@Ward Weistra</span> Do I need an running fhir-server to use the Firely Terminal?</p>



<a name="236470265"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179239-tooling/topic/Interesting%20JSON/XML%20conversion%20method/near/236470265" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ward Weistra <a href="https://fhir.github.io/chat-archive/stream/179239-tooling/topic/Interesting.20JSON.2FXML.20conversion.20method.html#236470265">(Apr 28 2021 at 08:39)</a>:</h4>
<p><span class="user-mention" data-user-id="390283">@Dietrich Haag</span> No, not needed. It just works locally on your filesystem. (It CAN interact as a FHIR client with FHIR servers or <a href="http://Simplifier.net">Simplifier.net</a> if you need it to though)</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
