---
layout: page
title: "FHIR Chat  · Decimal = vs ~ · fhirpath"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/index.html">fhirpath</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Decimal.20.3D.20vs.20~.html">Decimal = vs ~</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="157333070"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Decimal%20%3D%20vs%20~/near/157333070" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Decimal.20.3D.20vs.20~.html#157333070">(Feb 01 2019 at 06:21)</a>:</h4>
<p><a href="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=19356" target="_blank" title="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=19356">GF#19356</a> points out that the test in the <code>testDivide</code> group, <code>1.2 / 1.8 = 0.67</code> is behaving with equivalent semantics, not equality semantics. We should either change the test to use equivalent or clarify that the equality semantics round to the least precise value, the same as equivalent semantics do.</p>



<a name="157380940"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Decimal%20%3D%20vs%20~/near/157380940" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Decimal.20.3D.20vs.20~.html#157380940">(Feb 01 2019 at 19:58)</a>:</h4>
<p>The question we should ask is firstly about functional outcomes - how do we want equality to work, and how do we want equivalence to work?</p>



<a name="157381019"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Decimal%20%3D%20vs%20~/near/157381019" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Decimal.20.3D.20vs.20~.html#157381019">(Feb 01 2019 at 19:59)</a>:</h4>
<p>under the current exact match rules, we cannot do 1.2 / 1.8 = X because there's no way to express the internal imprecision of a 32 bit floating point number in decimal</p>



<a name="157381227"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Decimal%20%3D%20vs%20~/near/157381227" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Decimal.20.3D.20vs.20~.html#157381227">(Feb 01 2019 at 20:01)</a>:</h4>
<p>in other implementations, I've done = means to the lowest precision, and ~ means +/- 5%</p>



<a name="157383056"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Decimal%20%3D%20vs%20~/near/157383056" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Decimal.20.3D.20vs.20~.html#157383056">(Feb 01 2019 at 20:26)</a>:</h4>
<p>When you say lowest precision, I'm confused, because the test says 1.2/1.8 = 0.67, but 1.2/1.8 = .666666..., but are we saying that we want the least precise (i.e. two digits of precision in this case)?</p>



<a name="157383318"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Decimal%20%3D%20vs%20~/near/157383318" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Decimal.20.3D.20vs.20~.html#157383318">(Feb 01 2019 at 20:30)</a>:</h4>
<p>There is also some confusion about the meaning of precision.  My understanding was that the FHIRPath meaning of precision was the number of digits after the decimal place.  "1.2" has two significant digits, but one digit of precision.</p>



<a name="157383332"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Decimal%20%3D%20vs%20~/near/157383332" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Decimal.20.3D.20vs.20~.html#157383332">(Feb 01 2019 at 20:30)</a>:</h4>
<p>That's my understanding of precision.</p>



<a name="157383376"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Decimal%20%3D%20vs%20~/near/157383376" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Decimal.20.3D.20vs.20~.html#157383376">(Feb 01 2019 at 20:31)</a>:</h4>
<p>But saying "lowest precision" to me implies 0.0000001 (assuming 8 digits of precision).</p>



<a name="157383460"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Decimal%20%3D%20vs%20~/near/157383460" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Decimal.20.3D.20vs.20~.html#157383460">(Feb 01 2019 at 20:32)</a>:</h4>
<p>So, in that case, 1.2/1.8 ~ 0.7.<br>
Oh- - I read "lowest precision" meaning "least precision".</p>



<a name="157384467"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Decimal%20%3D%20vs%20~/near/157384467" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Decimal.20.3D.20vs.20~.html#157384467">(Feb 01 2019 at 20:47)</a>:</h4>
<p>I did indeed mean least precision. but yes, I should have been talking about significant digits</p>



<a name="157384794"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Decimal%20%3D%20vs%20~/near/157384794" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Decimal.20.3D.20vs.20~.html#157384794">(Feb 01 2019 at 20:50)</a>:</h4>
<p>I don't think the concept of significant digits has any place in fhirpath.</p>



<a name="157384959"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Decimal%20%3D%20vs%20~/near/157384959" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Decimal.20.3D.20vs.20~.html#157384959">(Feb 01 2019 at 20:53)</a>:</h4>
<p>so you don't think we should be able to say 1.2/18 = X?</p>



<a name="157385211"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Decimal%20%3D%20vs%20~/near/157385211" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Decimal.20.3D.20vs.20~.html#157385211">(Feb 01 2019 at 20:56)</a>:</h4>
<p>I don't know what to do about 1.2/1.8 =.  But, the FHIRPath spec deals with digits of precision, by which I understand it to mean digits after the decimal point.  Maintaining precision, 1.2/1.8 would be 0.7.  Maintaining significant digits, 1.2/1.8 would be 0.67.  [Edit:  I was avoiding using operators here.  I am not saying what FHIRPath's "=" should be, but just showing the distinction between the two concepts of significant digits and precision.]</p>



<a name="157385794"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Decimal%20%3D%20vs%20~/near/157385794" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Decimal.20.3D.20vs.20~.html#157385794">(Feb 01 2019 at 21:05)</a>:</h4>
<p>I disagree.</p>



<a name="157385800"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Decimal%20%3D%20vs%20~/near/157385800" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Decimal.20.3D.20vs.20~.html#157385800">(Feb 01 2019 at 21:06)</a>:</h4>
<p>I think 1.2/1.8 is 0.6666667</p>



<a name="157385866"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Decimal%20%3D%20vs%20~/near/157385866" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Decimal.20.3D.20vs.20~.html#157385866">(Feb 01 2019 at 21:06)</a>:</h4>
<p>This is just talking about whether we need to say that to get a true out of the equality comparison.</p>



<a name="157385999"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Decimal%20%3D%20vs%20~/near/157385999" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Decimal.20.3D.20vs.20~.html#157385999">(Feb 01 2019 at 21:08)</a>:</h4>
<p>Otherwise, we'd have to carry that precision semantic through all the operators. I don't think we're suggesting that, right?</p>



<a name="157386053"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Decimal%20%3D%20vs%20~/near/157386053" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Decimal.20.3D.20vs.20~.html#157386053">(Feb 01 2019 at 21:09)</a>:</h4>
<p>So the proposed change is for =, values must be equal, comparison is done on values rounded to the precision of the least precise operand. Trailing zeroes after the decimal are ignored in determining precision.</p>



<a name="157386076"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Decimal%20%3D%20vs%20~/near/157386076" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Decimal.20.3D.20vs.20~.html#157386076">(Feb 01 2019 at 21:09)</a>:</h4>
<p>The same as a for ~?</p>



<a name="157386144"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Decimal%20%3D%20vs%20~/near/157386144" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Decimal.20.3D.20vs.20~.html#157386144">(Feb 01 2019 at 21:10)</a>:</h4>
<p>And for equivalence: values must be equal within +/-5%, with comparison done on values rounded to the precision of the least precise operand. Trailing zeroes after the decimal are ignored in determining precision.</p>



<a name="157386184"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Decimal%20%3D%20vs%20~/near/157386184" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Decimal.20.3D.20vs.20~.html#157386184">(Feb 01 2019 at 21:10)</a>:</h4>
<p>+/- 5% of which operand?</p>



<a name="157386485"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Decimal%20%3D%20vs%20~/near/157386485" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Decimal.20.3D.20vs.20~.html#157386485">(Feb 01 2019 at 21:14)</a>:</h4>
<p>Good question, Grahame? My take is that the absolute value of the difference between them is less than 10 times the place value of the comparison precision.</p>



<a name="157388793"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Decimal%20%3D%20vs%20~/near/157388793" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Decimal.20.3D.20vs.20~.html#157388793">(Feb 01 2019 at 21:48)</a>:</h4>
<p>Mulling this a bit more, if we do this, it means 0.1 = 0.15 will be true. Is that really what we want?</p>



<a name="157388873"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Decimal%20%3D%20vs%20~/near/157388873" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Decimal.20.3D.20vs.20~.html#157388873">(Feb 01 2019 at 21:49)</a>:</h4>
<p>I think you mean  0.1 ~ 0.105.</p>



<a name="157388933"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Decimal%20%3D%20vs%20~/near/157388933" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Decimal.20.3D.20vs.20~.html#157388933">(Feb 01 2019 at 21:50)</a>:</h4>
<p>No, I mean 0.1 = 0.15.</p>



<a name="157388955"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Decimal%20%3D%20vs%20~/near/157388955" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Decimal.20.3D.20vs.20~.html#157388955">(Feb 01 2019 at 21:50)</a>:</h4>
<p>If equal is defined as the values are the same to the least precise value, then the comparison would be performed at the tenths-place, and it would return true.</p>



<a name="157388990"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Decimal%20%3D%20vs%20~/near/157388990" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Decimal.20.3D.20vs.20~.html#157388990">(Feb 01 2019 at 21:51)</a>:</h4>
<p>Oh.  But, in that case at least, 0.15, <em>rounded</em> to 1 digit of precision would give you 0.2.</p>



<a name="157389216"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Decimal%20%3D%20vs%20~/near/157389216" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Decimal.20.3D.20vs.20~.html#157389216">(Feb 01 2019 at 21:54)</a>:</h4>
<p>True, missed that. So 0.1 = 0.14 is true.</p>



<a name="157389344"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Decimal%20%3D%20vs%20~/near/157389344" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Decimal.20.3D.20vs.20~.html#157389344">(Feb 01 2019 at 21:56)</a>:</h4>
<p>I think I would prefer to just say that 1.2/1.8 = 0.66666667</p>



<a name="157389482"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Decimal%20%3D%20vs%20~/near/157389482" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Decimal.20.3D.20vs.20~.html#157389482">(Feb 01 2019 at 21:58)</a>:</h4>
<p>Me too, 0.1 = 0.14 is a bridge too far, I think.</p>



<a name="157406040"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Decimal%20%3D%20vs%20~/near/157406040" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Decimal.20.3D.20vs.20~.html#157406040">(Feb 02 2019 at 04:02)</a>:</h4>
<p>Doesn't that depend what you are measuring?</p>



<a name="157406240"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Decimal%20%3D%20vs%20~/near/157406240" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Decimal.20.3D.20vs.20~.html#157406240">(Feb 02 2019 at 04:08)</a>:</h4>
<p>A change in temp of 5% F or C are different if we're comparing freezing point temps</p>



<a name="157438793"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Decimal%20%3D%20vs%20~/near/157438793" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Decimal.20.3D.20vs.20~.html#157438793">(Feb 02 2019 at 21:15)</a>:</h4>
<p>I do indeed carry semantic precision through. But I don't understand 1.2/1.8 = 0.66666667 - where did the choice of precision come from? is 1.2/1.8 != 0.6666667 ?</p>



<a name="157438795"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Decimal%20%3D%20vs%20~/near/157438795" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Decimal.20.3D.20vs.20~.html#157438795">(Feb 02 2019 at 21:15)</a>:</h4>
<p>what about 1.2/1.8 = 0.666666667 ?</p>



<a name="157439911"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Decimal%20%3D%20vs%20~/near/157439911" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Decimal.20.3D.20vs.20~.html#157439911">(Feb 02 2019 at 21:47)</a>:</h4>
<p>Is my understanding correct that, based on significant digit rules, 5 = 4.9?  If so, does that mean that 4.9 &gt;= 5?</p>



<a name="157485691"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Decimal%20%3D%20vs%20~/near/157485691" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Decimal.20.3D.20vs.20~.html#157485691">(Feb 03 2019 at 22:09)</a>:</h4>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> , the current specification just says decimal values must be "exactly equal". The proposal being considered here is to relax that to say that the comparison is done by rounding the operands to the precision of the least precise operand, but that has some significant effects, one of which you are pointing out (5 = 4.9 would be true).</p>



<a name="157485817"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Decimal%20%3D%20vs%20~/near/157485817" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Decimal.20.3D.20vs.20~.html#157485817">(Feb 03 2019 at 22:13)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> , the suggestion comes from the required precision of 8 digits. Systems may support more precision, but they must support at least 8. But the test would only work for systems that supported exactly that level of precision. The simplest option is, as the comment suggests, to change the test to use equivalent rather than equal.</p>



<a name="157485861"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Decimal%20%3D%20vs%20~/near/157485861" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Decimal.20.3D.20vs.20~.html#157485861">(Feb 03 2019 at 22:14)</a>:</h4>
<p>5 = 4.9 I could almost live with.  4.9&gt;= 5 is pretty scary...</p>



<a name="157486558"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Decimal%20%3D%20vs%20~/near/157486558" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Decimal.20.3D.20vs.20~.html#157486558">(Feb 03 2019 at 22:36)</a>:</h4>
<p>so<br>
1.2 / 1.8 = 1.6666667<br>
1.2 / 1.8 = 1.666666667<br>
1.2 / 1.8 != 1.666667<br>
1.2 / 1.8 != 1.67<br>
1.2 / 1.8 ~1.67<br>
1.2 / 1.8 !~ 1.6</p>



<a name="157486615"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Decimal%20%3D%20vs%20~/near/157486615" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Decimal.20.3D.20vs.20~.html#157486615">(Feb 03 2019 at 22:37)</a>:</h4>
<p>1.2 / 18000000 = 0.0000001</p>



<a name="157486661"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Decimal%20%3D%20vs%20~/near/157486661" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Decimal.20.3D.20vs.20~.html#157486661">(Feb 03 2019 at 22:38)</a>:</h4>
<p>12000000/1.8 = 6666666.6666667</p>



<a name="157486662"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Decimal%20%3D%20vs%20~/near/157486662" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Decimal.20.3D.20vs.20~.html#157486662">(Feb 03 2019 at 22:38)</a>:</h4>
<p>1.2 / 1.8 = 1.66666666 (to whatever precision your platform specifies)</p>



<a name="157486675"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Decimal%20%3D%20vs%20~/near/157486675" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Decimal.20.3D.20vs.20~.html#157486675">(Feb 03 2019 at 22:39)</a>:</h4>
<p>I'm just sticking with 8 digits... I have whatever precision is desired, but actually use significant figures, since the maths was developed for UCUM...</p>



<a name="157486793"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Decimal%20%3D%20vs%20~/near/157486793" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Decimal.20.3D.20vs.20~.html#157486793">(Feb 03 2019 at 22:42)</a>:</h4>
<p>1.2 / 18000000 = 0.00000006, right? (or 7 if you're rounding it)</p>



<a name="157486797"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Decimal%20%3D%20vs%20~/near/157486797" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Decimal.20.3D.20vs.20~.html#157486797">(Feb 03 2019 at 22:42)</a>:</h4>
<p>ah yes, I miscounted</p>



<a name="157530488"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Decimal%20%3D%20vs%20~/near/157530488" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Decimal.20.3D.20vs.20~.html#157530488">(Feb 04 2019 at 15:25)</a>:</h4>
<blockquote>
<p>I'm just sticking with 8 digits... I have whatever precision is desired, but actually use significant figures, since the maths was developed for UCUM...</p>
</blockquote>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> Significant digits present a couple of difficulties.  1) You have to keep track of trailing zeros somehow, because 1.00 has more significant digits that 1.0, but if you store that as a number the computer won't see the difference; 2) There is ambiguity in interpreting the number of significant digits for a number like "100".    If one uses significant digits, ideally the numbers should be entered in scientific notation (e.g. 1.23*10^6) to make it clear how many significant digits are meant, but it seems unlikely that someone filling in a form of (for example) blood pressure readings would do that.</p>



<a name="157549890"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Decimal%20%3D%20vs%20~/near/157549890" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Decimal.20.3D.20vs.20~.html#157549890">(Feb 04 2019 at 19:34)</a>:</h4>
<p>I keep track of the significant figures so I can see a difference. The ambiguity is build into the human representation and nothing I can do about that</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
