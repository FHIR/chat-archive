---
layout: page
title: "FHIR Chat  · FHIRPath Test XML Issues · fhirpath"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/index.html">fhirpath</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/FHIRPath.20Test.20XML.20Issues.html">FHIRPath Test XML Issues</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="180247731"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/FHIRPath%20Test%20XML%20Issues/near/180247731" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/FHIRPath.20Test.20XML.20Issues.html#180247731">(Nov 08 2019 at 16:45)</a>:</h4>
<p>I noticed a few issues while trying to use the FHIRPath test artifacts.  I grabbed them from <a href="http://build.fhir.org/ig/HL7/FHIRPath/branches/master/N1/tests.html" target="_blank" title="http://build.fhir.org/ig/HL7/FHIRPath/branches/master/N1/tests.html">http://build.fhir.org/ig/HL7/FHIRPath/branches/master/N1/tests.html</a> but I assume the issues are carry-overs from other versions.</p>



<a name="180247884"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/FHIRPath%20Test%20XML%20Issues/near/180247884" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/FHIRPath.20Test.20XML.20Issues.html#180247884">(Nov 08 2019 at 16:46)</a>:</h4>
<p>&lt;?xml version="1.0" encoding="utf-8" ?&gt; on line two (I assume it should be at the very top)</p>



<a name="180247957"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/FHIRPath%20Test%20XML%20Issues/near/180247957" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/FHIRPath.20Test.20XML.20Issues.html#180247957">(Nov 08 2019 at 16:47)</a>:</h4>
<p>lines 217,218: <code>invalid</code> attribute appears on the test element, but I think it should be on the expression</p>



<a name="180248081"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/FHIRPath%20Test%20XML%20Issues/near/180248081" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/FHIRPath.20Test.20XML.20Issues.html#180248081">(Nov 08 2019 at 16:48)</a>:</h4>
<p>lines 760-764 and 790-794:  unencoded <code>&lt;</code> symbols</p>



<a name="180248141"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/FHIRPath%20Test%20XML%20Issues/near/180248141" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/FHIRPath.20Test.20XML.20Issues.html#180248141">(Nov 08 2019 at 16:48)</a>:</h4>
<p>line 1052:  duplicate "name" attributes...perhaps the latter should be "description"?</p>



<a name="180248209"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/FHIRPath%20Test%20XML%20Issues/near/180248209" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/FHIRPath.20Test.20XML.20Issues.html#180248209">(Nov 08 2019 at 16:49)</a>:</h4>
<p>i'll open a single GForge for all 4 (unless I hear otherwise).  I'm also happy to open a pull request to fix it if that will be helpful.</p>



<a name="180249846"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/FHIRPath%20Test%20XML%20Issues/near/180249846" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/FHIRPath.20Test.20XML.20Issues.html#180249846">(Nov 08 2019 at 17:04)</a>:</h4>
<p>ok, i opened <a href="https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=25194" target="_blank" title="https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=25194">https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=25194</a> and <a href="https://github.com/HL7/FHIRPath/pull/9" target="_blank" title="https://github.com/HL7/FHIRPath/pull/9">https://github.com/HL7/FHIRPath/pull/9</a></p>



<a name="180264630"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/FHIRPath%20Test%20XML%20Issues/near/180264630" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/FHIRPath.20Test.20XML.20Issues.html#180264630">(Nov 08 2019 at 19:45)</a>:</h4>
<p>actually, the tests I'm using are here:</p>



<a name="180264707"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/FHIRPath%20Test%20XML%20Issues/near/180264707" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/FHIRPath.20Test.20XML.20Issues.html#180264707">(Nov 08 2019 at 19:46)</a>:</h4>
<p><a href="https://github.com/FHIR/fhir-test-cases/blob/master/r5/fhirpath/tests-fhir-r4.xml" target="_blank" title="https://github.com/FHIR/fhir-test-cases/blob/master/r5/fhirpath/tests-fhir-r4.xml">https://github.com/FHIR/fhir-test-cases/blob/master/r5/fhirpath/tests-fhir-r4.xml</a></p>



<a name="180264735"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/FHIRPath%20Test%20XML%20Issues/near/180264735" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/FHIRPath.20Test.20XML.20Issues.html#180264735">(Nov 08 2019 at 19:46)</a>:</h4>
<p>use these against the standard set of resources in the FHIR spec</p>



<a name="180431290"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/FHIRPath%20Test%20XML%20Issues/near/180431290" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/FHIRPath.20Test.20XML.20Issues.html#180431290">(Nov 11 2019 at 15:14)</a>:</h4>
<p>I confirmed this version doesn't have any of the above issues.  Will the normative FHIRPath spec (R2?) be updated to point at this version?  Or maybe it already has been and I was just looking in the wrong spot?</p>



<a name="181642106"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/FHIRPath%20Test%20XML%20Issues/near/181642106" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Timm <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/FHIRPath.20Test.20XML.20Issues.html#181642106">(Nov 22 2019 at 14:26)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span><br>
I noticed that some of the tests (maybe a dozen or so) are missing &lt;output&gt; elements. For example:</p>
<div class="codehilite"><pre><span></span>&lt;test inputfile=&quot;patient-example.xml&quot;&gt;&lt;expression&gt;@2012-04-15 = @2012-04-15T10:00:00&lt;/expression&gt;&lt;/test&gt;
&lt;test inputfile=&quot;patient-example.xml&quot;&gt;&lt;expression&gt;{} != {}&lt;/expression&gt;&lt;/test&gt;
&lt;test name=&quot;testLessThan23&quot; inputfile=&quot;patient-example.xml&quot;&gt;&lt;expression&gt;@2018-03 &amp;lt; @2018-03-01&lt;/expression&gt;&lt;/test&gt;
&lt;test name=&quot;testLessThan24&quot; inputfile=&quot;patient-example.xml&quot;&gt;&lt;expression&gt;@2018-03-01T10 &amp;lt; @2018-03-01T10:30&lt;/expression&gt;&lt;/test&gt;
&lt;test name=&quot;testLessThan25&quot; inputfile=&quot;patient-example.xml&quot;&gt;&lt;expression&gt;@T10 &amp;lt; @T10:30&lt;/expression&gt;&lt;/test&gt;
</pre></div>


<p>Do you have an updated version that includes the expected output for these?</p>



<a name="181720860"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/FHIRPath%20Test%20XML%20Issues/near/181720860" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Timm <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/FHIRPath.20Test.20XML.20Issues.html#181720860">(Nov 23 2019 at 16:01)</a>:</h4>
<p>I see now that <code>{}</code> is implied when no output element is present.</p>



<a name="181720934"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/FHIRPath%20Test%20XML%20Issues/near/181720934" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Timm <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/FHIRPath.20Test.20XML.20Issues.html#181720934">(Nov 23 2019 at 16:03)</a>:</h4>
<p>I am curious about this one:</p>
<div class="codehilite"><pre><span></span>&lt;test name=&quot;testEquality7&quot; inputfile=&quot;patient-example.xml&quot;&gt;&lt;expression&gt;(1 | 1) = (1 | 2 | {})&lt;/expression&gt;&lt;/test&gt;
</pre></div>


<p>I think this is saying that we are performing a union of 1 | 1 which results in singleton collection containing 1 (an integer) and comparing that to a set containing two values (1 and 2). Because the operands are not of the same cardinality the result is <code>{}</code>.<br>
The spec says:<br>
Note that this implies that if the collections have a different number of items to compare, the result will be false.</p>



<a name="181721055"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/FHIRPath%20Test%20XML%20Issues/near/181721055" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Timm <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/FHIRPath.20Test.20XML.20Issues.html#181721055">(Nov 23 2019 at 16:06)</a>:</h4>
<p>I see you have commented it out in your version here:<br>
<a href="https://github.com/FHIR/fhir-test-cases/blob/1ec63a139850dc1b3834642e8837531a444ccbde/r5/fhirpath/tests-fhir-r4.xml#L607" target="_blank" title="https://github.com/FHIR/fhir-test-cases/blob/1ec63a139850dc1b3834642e8837531a444ccbde/r5/fhirpath/tests-fhir-r4.xml#L607">https://github.com/FHIR/fhir-test-cases/blob/1ec63a139850dc1b3834642e8837531a444ccbde/r5/fhirpath/tests-fhir-r4.xml#L607</a><br>
<span aria-label="slight smile" class="emoji emoji-1f642" role="img" title="slight smile">:slight_smile:</span></p>



<a name="181765200"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/FHIRPath%20Test%20XML%20Issues/near/181765200" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/FHIRPath.20Test.20XML.20Issues.html#181765200">(Nov 24 2019 at 15:32)</a>:</h4>
<p>hm. the union of 1 | 2 | {} is {}, no?</p>



<a name="181837526"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/FHIRPath%20Test%20XML%20Issues/near/181837526" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Timm <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/FHIRPath.20Test.20XML.20Issues.html#181837526">(Nov 25 2019 at 16:20)</a>:</h4>
<p>I think it would be <code>{ 1, 2 }</code>. The union of a non-empty set and the empty set should be the non-empty set. The intersection of a non-empty set and the empty set should be the empty set.</p>



<a name="181838282"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/FHIRPath%20Test%20XML%20Issues/near/181838282" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/FHIRPath.20Test.20XML.20Issues.html#181838282">(Nov 25 2019 at 16:28)</a>:</h4>
<p><span class="user-mention" data-user-id="191359">@Bryn Rhodes</span> this is an unfortunate consequence of the conflation of unknown and empty set.</p>



<a name="182494553"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/FHIRPath%20Test%20XML%20Issues/near/182494553" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/FHIRPath.20Test.20XML.20Issues.html#182494553">(Dec 03 2019 at 20:59)</a>:</h4>
<p>Yes, John is right, for operations like union and intersect that expect lists, <code>{ }</code> is always the empty set.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
