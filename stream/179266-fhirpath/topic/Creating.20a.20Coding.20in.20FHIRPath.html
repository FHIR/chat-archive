---
layout: page
title: "FHIR Chat  · Creating a Coding in FHIRPath · fhirpath"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/index.html">fhirpath</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Creating.20a.20Coding.20in.20FHIRPath.html">Creating a Coding in FHIRPath</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="238552025"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Creating%20a%20Coding%20in%20FHIRPath/near/238552025" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RP <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Creating.20a.20Coding.20in.20FHIRPath.html#238552025">(May 12 2021 at 22:09)</a>:</h4>
<p>Moving <a href="#narrow/stream/179166-implementers/topic/Creating.20a.20Coding.20in.20FHIRPath.3F">https://chat.fhir.org/#narrow/stream/179166-implementers/topic/Creating.20a.20Coding.20in.20FHIRPath.3F</a> to this thread which seems more appropriate.</p>
<p>I have an expression I want to write that has the following behavior iif(somecondition, return new Coding(system, value), return other Coding(system, value))</p>
<p>The issue I'm running into is I don't see a native way within FHIRPath to create Codings. You can extract a Coding from an object but I need to dynamically create one. We noticed that CQL does support this but I need this natively supported in FP.</p>



<a name="238558211"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Creating%20a%20Coding%20in%20FHIRPath/near/238558211" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Creating.20a.20Coding.20in.20FHIRPath.html#238558211">(May 12 2021 at 23:18)</a>:</h4>
<p><a href="http://jira.hl7.org/browse/FHIR-29324">FHIR-29324</a>, still in state "Triaged".</p>



<a name="238560868"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Creating%20a%20Coding%20in%20FHIRPath/near/238560868" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RP <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Creating.20a.20Coding.20in.20FHIRPath.html#238560868">(May 12 2021 at 23:50)</a>:</h4>
<p>Thanks, much appreciated <span class="user-mention" data-user-id="195344">@Paul Lynch</span> <span aria-label="+1" class="emoji emoji-1f44d" role="img" title="+1">:+1:</span></p>



<a name="238563681"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Creating%20a%20Coding%20in%20FHIRPath/near/238563681" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Creating.20a.20Coding.20in.20FHIRPath.html#238563681">(May 13 2021 at 00:22)</a>:</h4>
<p>the FHIR Tools do support a Factory class that can create Codings, but this is not part of the standard</p>



<a name="238674058"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Creating%20a%20Coding%20in%20FHIRPath/near/238674058" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RP <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Creating.20a.20Coding.20in.20FHIRPath.html#238674058">(May 13 2021 at 20:12)</a>:</h4>
<p>Thanks, we went with %factory.coding for our implementation</p>



<a name="241580931"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Creating%20a%20Coding%20in%20FHIRPath/near/241580931" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Creating.20a.20Coding.20in.20FHIRPath.html#241580931">(Jun 04 2021 at 19:15)</a>:</h4>
<p><span class="user-mention" data-user-id="191359">@Bryn Rhodes</span> What do you think the time frame is for discussing <a href="http://jira.hl7.org/browse/FHIR-29324">FHIR-29324</a> at an ITS meeting?</p>



<a name="241785622"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Creating%20a%20Coding%20in%20FHIRPath/near/241785622" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ephraim Kigamba <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Creating.20a.20Coding.20in.20FHIRPath.html#241785622">(Jun 07 2021 at 14:35)</a>:</h4>
<p>Hey guys, is there anyway to easily generate a UUID string using FHIR expressions?</p>



<a name="241790961"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Creating%20a%20Coding%20in%20FHIRPath/near/241790961" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Creating.20a.20Coding.20in.20FHIRPath.html#241790961">(Jun 07 2021 at 15:08)</a>:</h4>
<p>not at the moment.</p>



<a name="241917799"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Creating%20a%20Coding%20in%20FHIRPath/near/241917799" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ephraim Kigamba <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Creating.20a.20Coding.20in.20FHIRPath.html#241917799">(Jun 08 2021 at 13:22)</a>:</h4>
<p>Cool thanks</p>



<a name="241968737"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Creating%20a%20Coding%20in%20FHIRPath/near/241968737" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Creating.20a.20Coding.20in.20FHIRPath.html#241968737">(Jun 08 2021 at 18:57)</a>:</h4>
<p><span class="user-mention" data-user-id="195344">@Paul Lynch</span> , the description of <a href="http://jira.hl7.org/browse/FHIR-29324">J#29324</a> suggests this would be a FHIRPath extension, which is actually a FHIR-I concern, not an ITS concern. If we wanted to update the language to include syntax for object construction, that would be a FHIRPath change (and then an ITS concern).</p>



<a name="241968832"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Creating%20a%20Coding%20in%20FHIRPath/near/241968832" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Creating.20a.20Coding.20in.20FHIRPath.html#241968832">(Jun 08 2021 at 18:58)</a>:</h4>
<p>Happy to go whatever direction makes the most sense, I would like to see constructor syntax, but the factory approach does not need language modification.</p>



<a name="241985821"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Creating%20a%20Coding%20in%20FHIRPath/near/241985821" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Creating.20a.20Coding.20in.20FHIRPath.html#241985821">(Jun 08 2021 at 21:02)</a>:</h4>
<p>I would not have a preference, but <span class="user-mention" data-user-id="195807">@Ralph</span>  already implemented %factory.coding, so I think we should stick with that.   <span class="user-mention" data-user-id="191359">@Bryn Rhodes</span> if that means the workgroup should be changed, could you change it?  (I don't seem to be able to do that.)</p>



<a name="241993878"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Creating%20a%20Coding%20in%20FHIRPath/near/241993878" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Creating.20a.20Coding.20in.20FHIRPath.html#241993878">(Jun 08 2021 at 22:05)</a>:</h4>
<p>Moved and provided a proposed disposition</p>



<a name="242980443"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Creating%20a%20Coding%20in%20FHIRPath/near/242980443" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ephraim Kigamba <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Creating.20a.20Coding.20in.20FHIRPath.html#242980443">(Jun 17 2021 at 07:08)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191316">Grahame Grieve</span> <a href="#narrow/stream/179266-fhirpath/topic/Creating.20a.20Coding.20in.20FHIRPath/near/241790961">said</a>:</p>
<blockquote>
<p>not at the moment.</p>
</blockquote>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> Is this something that can be added as an official spec. I see that we have something similar for FHIR mapping language?</p>



<a name="242980608"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Creating%20a%20Coding%20in%20FHIRPath/near/242980608" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Creating.20a.20Coding.20in.20FHIRPath.html#242980608">(Jun 17 2021 at 07:10)</a>:</h4>
<p>sure. Create a Jira task proposing the change</p>



<a name="243036500"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Creating%20a%20Coding%20in%20FHIRPath/near/243036500" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ephraim Kigamba <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Creating.20a.20Coding.20in.20FHIRPath.html#243036500">(Jun 17 2021 at 15:32)</a>:</h4>
<p>Thanks</p>



<a name="243756885"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Creating%20a%20Coding%20in%20FHIRPath/near/243756885" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ephraim Kigamba <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Creating.20a.20Coding.20in.20FHIRPath.html#243756885">(Jun 24 2021 at 08:46)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> I created an issue for my account creation last week and I'm yet to get a reply. I assume I need to have an account so that I can propose the change on Jira. Could you help out? The issue is <strong>NEWID-3417</strong></p>



<a name="243756910"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Creating%20a%20Coding%20in%20FHIRPath/near/243756910" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Creating.20a.20Coding.20in.20FHIRPath.html#243756910">(Jun 24 2021 at 08:47)</a>:</h4>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span></p>



<a name="243821802"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Creating%20a%20Coding%20in%20FHIRPath/near/243821802" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Creating.20a.20Coding.20in.20FHIRPath.html#243821802">(Jun 24 2021 at 17:48)</a>:</h4>
<p>Looks like this was addressed by HQ already sometime today.  It can take 1-2 business days for someone to review and ensure you do indeed appear to be a real human.</p>



<a name="244195553"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Creating%20a%20Coding%20in%20FHIRPath/near/244195553" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Creating.20a.20Coding.20in.20FHIRPath.html#244195553">(Jun 28 2021 at 19:48)</a>:</h4>
<p>After discussing <a href="https://jira.hl7.org/browse/FHIR-29324">https://jira.hl7.org/browse/FHIR-29324</a> tonight in FHIR-I, I do think I disagree with the %factory solution.  We need a more general way to create instances of types, we need this to work with System.Quantity too for example, and if we start out with <code>%factory.Quantity</code>, we introduce functionality that is useful outside of the FHIR datamodel, but cannot be used by other models without creating ambiguity.   We did this with is(Quantity), which we changed to is(FHIR.Quantity), we might need to do the same here.  Also, this is really about constructing instances, so it would make sense to have a kind of constructor syntax for it (<code>new FHIR.Quantity(x,y,z)</code>) ?</p>



<a name="244195667"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Creating%20a%20Coding%20in%20FHIRPath/near/244195667" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Creating.20a.20Coding.20in.20FHIRPath.html#244195667">(Jun 28 2021 at 19:49)</a>:</h4>
<p>the proiblem with this is the parameters. Somewhere. something needs to specify what parameters</p>



<a name="244198507"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Creating%20a%20Coding%20in%20FHIRPath/near/244198507" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Creating.20a.20Coding.20in.20FHIRPath.html#244198507">(Jun 28 2021 at 20:13)</a>:</h4>
<p>Right. So these need to specified per specification. It could be a specific section, or a new set of functions that are identified as constructors.  I guess the FHIR path appendix of FHIR could specify what are the constructor overloads available for each FHIR primitive, and we need to do it for System types too.</p>



<a name="244198603"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Creating%20a%20Coding%20in%20FHIRPath/near/244198603" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Creating.20a.20Coding.20in.20FHIRPath.html#244198603">(Jun 28 2021 at 20:14)</a>:</h4>
<p>(if you need to choose between watching a beautiful sunrise now or constructor syntax, I'd choose the first option ;-) )</p>



<a name="244201767"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Creating%20a%20Coding%20in%20FHIRPath/near/244201767" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Creating.20a.20Coding.20in.20FHIRPath.html#244201767">(Jun 28 2021 at 20:40)</a>:</h4>
<p>I am about to hit the road, yes. I don't mind the syntax, but yes, we have to specify it somewhere. we could say that there's a syntax that lets you call methods on the objects that are static (defined on the class, not the object) and that have a stereotype constructor, or something, and let the specifications define those somewhere?</p>



<a name="245737571"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Creating%20a%20Coding%20in%20FHIRPath/near/245737571" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Creating.20a.20Coding.20in.20FHIRPath.html#245737571">(Jul 12 2021 at 19:41)</a>:</h4>
<p>This would be a new syntax in FHIRPath, yes? A "new" keyword followed by a function invocation? I've added a tracker to support that in FHIRPath: <a href="https://jira.hl7.org/browse/FHIR-33044">https://jira.hl7.org/browse/FHIR-33044</a></p>



<a name="245737755"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Creating%20a%20Coding%20in%20FHIRPath/near/245737755" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Creating.20a.20Coding.20in.20FHIRPath.html#245737755">(Jul 12 2021 at 19:43)</a>:</h4>
<p>Could potentially follow the approach taken by CQL that uses a tuple syntax so that constructors arguments are bound by name. That would avoid the need to document specific constructors anywhere.</p>



<a name="245737791"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Creating%20a%20Coding%20in%20FHIRPath/near/245737791" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Creating.20a.20Coding.20in.20FHIRPath.html#245737791">(Jul 12 2021 at 19:43)</a>:</h4>
<div class="codehilite"><pre><span></span><code>instanceSelector
    : namedTypeSpecifier &#39;{&#39; (&#39;:&#39; | (instanceElementSelector (&#39;,&#39; instanceElementSelector)*)) &#39;}&#39;
    ;

instanceElementSelector
    : referentialIdentifier &#39;:&#39; expression
    ;
</code></pre></div>



<a name="245930359"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Creating%20a%20Coding%20in%20FHIRPath/near/245930359" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Creating.20a.20Coding.20in.20FHIRPath.html#245930359">(Jul 14 2021 at 08:01)</a>:</h4>
<p>I can see how this grammar works for   <code>FHIR.Patient { active : true }</code>, but it seems to allow  <code>FHIR.Patient { : }</code> too - what does that do?</p>



<a name="245931419"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Creating%20a%20Coding%20in%20FHIRPath/near/245931419" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Creating.20a.20Coding.20in.20FHIRPath.html#245931419">(Jul 14 2021 at 08:15)</a>:</h4>
<p>Maybe construct a new Patient without setting any of its properties which is more explicit than <code>FHIR.Patient { }</code> ?</p>



<a name="245931494"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Creating%20a%20Coding%20in%20FHIRPath/near/245931494" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Creating.20a.20Coding.20in.20FHIRPath.html#245931494">(Jul 14 2021 at 08:16)</a>:</h4>
<p>I do miss the "new" keyword, but that's my C/C#/Java bias I guess ;-)</p>



<a name="245931641"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Creating%20a%20Coding%20in%20FHIRPath/near/245931641" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Creating.20a.20Coding.20in.20FHIRPath.html#245931641">(Jul 14 2021 at 08:19)</a>:</h4>
<p>There's a bit of light between calling a constructor with a fixed # of predefined constructor arguments, or constructing an object, and then settings its properties (the CQL way).  I can see the C# language designers struggling with this nowadays since C# now supports both notions. Makes sense since most constructors did nothing but assign (read-only) properties to the given constructor arguments.  Since we're so data driven, maybe the constructor is less of a function, and the "property-based" approach of CQL is just fine.</p>



<a name="271027853"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Creating%20a%20Coding%20in%20FHIRPath/near/271027853" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Creating.20a.20Coding.20in.20FHIRPath.html#271027853">(Feb 07 2022 at 19:12)</a>:</h4>
<p>Proposed updates to the FHIRPath grammar to enable this, plus worked examples here: <a href="https://github.com/HL7/FHIRPath/blob/fhir-33044-instance-selector/spec/instance-selector.md">https://github.com/HL7/FHIRPath/blob/fhir-33044-instance-selector/spec/instance-selector.md</a> <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> <span class="user-mention" data-user-id="191328">@Ewout Kramer</span> <span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> <span class="user-mention" data-user-id="195344">@Paul Lynch</span> <span class="user-mention" data-user-id="407094">@Ephraim Kigamba</span></p>



<a name="271034915"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Creating%20a%20Coding%20in%20FHIRPath/near/271034915" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Creating.20a.20Coding.20in.20FHIRPath.html#271034915">(Feb 07 2022 at 20:07)</a>:</h4>
<p>I don't understand why:</p>
<div class="codehilite"><pre><span></span><code>  type: CodeableConcept {
    coding: {
      Coding {
        system: &#39;http://terminology.hl7.org/CodeSystem/v2-0203&#39;,
        code: &#39;MR&#39;,
        display: &#39;Medical Record Number&#39;
      }
    },
    text: &#39;Medical Record Number&#39;
  },
</code></pre></div>
<p>isn't:</p>
<div class="codehilite"><pre><span></span><code>  type: CodeableConcept {
    coding: Coding {
        system: &#39;http://terminology.hl7.org/CodeSystem/v2-0203&#39;,
        code: &#39;MR&#39;,
        display: &#39;Medical Record Number&#39;
    },
    text: &#39;Medical Record Number&#39;
  },
</code></pre></div>



<a name="271040441"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Creating%20a%20Coding%20in%20FHIRPath/near/271040441" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Creating.20a.20Coding.20in.20FHIRPath.html#271040441">(Feb 07 2022 at 20:55)</a>:</h4>
<p>Because <code>coding</code> is multi-cardinality, so it takes a <code>List&lt;Coding&gt;</code>, not <code>Coding</code>. Does that help?</p>



<a name="271040858"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Creating%20a%20Coding%20in%20FHIRPath/near/271040858" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Creating.20a.20Coding.20in.20FHIRPath.html#271040858">(Feb 07 2022 at 20:59)</a>:</h4>
<p>So {...} is used for both lists and objects?</p>



<a name="271042078"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Creating%20a%20Coding%20in%20FHIRPath/near/271042078" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Creating.20a.20Coding.20in.20FHIRPath.html#271042078">(Feb 07 2022 at 21:08)</a>:</h4>
<p>Okay, I guess we had  {} (empty list) already.  Another question:  I see "listSelector" defined like '('List' ('&lt;' typeSpecifier '&gt;')?)? ...',  but I don't see an example in which optional word 'List' appears.  Should there be one?</p>



<a name="271053460"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Creating%20a%20Coding%20in%20FHIRPath/near/271053460" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Creating.20a.20Coding.20in.20FHIRPath.html#271053460">(Feb 07 2022 at 22:35)</a>:</h4>
<p>Great feedback, thank you! Applied</p>



<a name="271055153"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Creating%20a%20Coding%20in%20FHIRPath/near/271055153" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Creating.20a.20Coding.20in.20FHIRPath.html#271055153">(Feb 07 2022 at 22:51)</a>:</h4>
<p>Makes sense.  I think the syntax will work well, though  I am not quite sure yet what fhirpath.js should do with the type information.  When it is better to write:</p>
<div class="codehilite"><pre><span></span><code>ValueSet.expansion.contains.select(Coding { system: system, version: version, code: code, display: display })
</code></pre></div>
<p>rather than:</p>
<div class="codehilite"><pre><span></span><code>ValueSet.expansion.contains.select({ system: system, version: version, code: code, display: display })
</code></pre></div>



<a name="271056383"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Creating%20a%20Coding%20in%20FHIRPath/near/271056383" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Creating.20a.20Coding.20in.20FHIRPath.html#271056383">(Feb 07 2022 at 23:03)</a>:</h4>
<p>I'm thinking we'll want to define "assignment-compatible" as a tuple that has elements that are a subset (not necessarily proper) of the elements of the target, that is what CQL does so that you can use anonymous tuples or strongly-typed tuples. In FHIRPath where typing enforcement tends to be more run-time, the named instances won't be as important, though they would still be required to distinguish choices.</p>



<a name="271147588"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Creating%20a%20Coding%20in%20FHIRPath/near/271147588" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bas van den Heuvel <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Creating.20a.20Coding.20in.20FHIRPath.html#271147588">(Feb 08 2022 at 15:50)</a>:</h4>
<p>Bryn, all the examples seem to be setting pre-defined data elements. Can I also create data elements with dynamic field values (values that are the result of expressions)?</p>



<a name="271158727"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Creating%20a%20Coding%20in%20FHIRPath/near/271158727" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Creating.20a.20Coding.20in.20FHIRPath.html#271158727">(Feb 08 2022 at 17:06)</a>:</h4>
<p>Yes, the grammar allows for the value of each element to be an arbitrary expression.</p>



<a name="271240633"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Creating%20a%20Coding%20in%20FHIRPath/near/271240633" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bas van den Heuvel <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Creating.20a.20Coding.20in.20FHIRPath.html#271240633">(Feb 09 2022 at 07:45)</a>:</h4>
<p>If I understand the grammar correctly, when you use a constant for system and an expression for value and an it will look like:</p>
<div class="codehilite"><pre><span></span><code>    Quantity{ value: (%someObs.value as Quantity.value), unit: &#39;g/dl&#39;, code: &#39;g/dL&#39;, system: %ucum }
</code></pre></div>
<p>If this is the case, why use a difference expression for constants and expressions? Wouldn't it be less confusing if we use the same syntax for both?</p>



<a name="271419154"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Creating%20a%20Coding%20in%20FHIRPath/near/271419154" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Creating.20a.20Coding.20in.20FHIRPath.html#271419154">(Feb 10 2022 at 11:38)</a>:</h4>
<p>If a function expects a Coding as a parameter, and I'd pass one of these as arguments:</p>
<blockquote>
<p>{ system: system, version: version, code: code, display: display }<br>
Coding { system: system, version: version, code: code, display: display }</p>
</blockquote>
<p>If I did <code>type()</code> on each of those, would the first return <code>TupleTypeInfo</code> and the second <code>ClassInfo</code> ?  Or both <code>ClassInfo</code>?</p>



<a name="271443890"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Creating%20a%20Coding%20in%20FHIRPath/near/271443890" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Creating.20a.20Coding.20in.20FHIRPath.html#271443890">(Feb 10 2022 at 15:07)</a>:</h4>
<p>The first would return <code>TupleTypeInfo</code>, the second a <code>ClassInfo</code></p>



<a name="271445193"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Creating%20a%20Coding%20in%20FHIRPath/near/271445193" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Creating.20a.20Coding.20in.20FHIRPath.html#271445193">(Feb 10 2022 at 15:15)</a>:</h4>
<p>Can lists of anonymous tuples be used where <code>List</code> is expected?   And <code>List&lt;Any&gt;</code>?</p>



<a name="271445412"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Creating%20a%20Coding%20in%20FHIRPath/near/271445412" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Creating.20a.20Coding.20in.20FHIRPath.html#271445412">(Feb 10 2022 at 15:16)</a>:</h4>
<p>Is it expected that, if a function takes a Coding as parameter and you supply it with such an anonymous tuple, there is an implicit conversion to Coding?</p>



<a name="271446254"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Creating%20a%20Coding%20in%20FHIRPath/near/271446254" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Creating.20a.20Coding.20in.20FHIRPath.html#271446254">(Feb 10 2022 at 15:22)</a>:</h4>
<p>Coming from a Java/C#/C background, my view of typing in FhirPath was based on a nominal type system, but I can see we're sort of introducing structural typing with this feature. I am not sure we're not stepping on thin ice, although I enjoy the challenge.</p>



<a name="271938865"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Creating%20a%20Coding%20in%20FHIRPath/near/271938865" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Creating.20a.20Coding.20in.20FHIRPath.html#271938865">(Feb 15 2022 at 08:11)</a>:</h4>
<p>When/where will we continue this discussion? I'd be interested to join if this is handled on a call.</p>



<a name="273536693"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Creating%20a%20Coding%20in%20FHIRPath/near/273536693" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Creating.20a.20Coding.20in.20FHIRPath.html#273536693">(Feb 28 2022 at 18:57)</a>:</h4>
<p><span class="user-mention" data-user-id="191359">@Bryn Rhodes</span> Would this new syntax allow you to construct something more complex, like a Condition?</p>



<a name="273537017"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Creating%20a%20Coding%20in%20FHIRPath/near/273537017" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Creating.20a.20Coding.20in.20FHIRPath.html#273537017">(Feb 28 2022 at 18:59)</a>:</h4>
<p>Never mind -- I see you have an <a href="https://github.com/HL7/FHIRPath/blob/fhir-33044-instance-selector/spec/instance-selector.md">example</a> of a Patient being constructed.  This seems really useful.</p>



<a name="273714334"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Creating%20a%20Coding%20in%20FHIRPath/near/273714334" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Creating.20a.20Coding.20in.20FHIRPath.html#273714334">(Mar 01 2022 at 21:36)</a>:</h4>
<p>Yes, it will support construction of any type of instance (including anonymous tuples)</p>



<a name="273715936"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Creating%20a%20Coding%20in%20FHIRPath/near/273715936" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Creating.20a.20Coding.20in.20FHIRPath.html#273715936">(Mar 01 2022 at 21:48)</a>:</h4>
<p>Apologies <span class="user-mention" data-user-id="191328">@Ewout Kramer</span> , I missed these questions. In CQL, implicit conversion from a class type to an equivalent tuple type is allowed, but the other direction is not. So if you had a function that took a Coding, and you passed it a compatible tuple type, you'd have to do an explicit conversion to get it to be a Coding, but if you had a function that took a compatible tuple type with Coding, you could pass it a Coding. So it is shades of "duck typing", yes.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
