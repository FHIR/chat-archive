---
layout: page
title: "FHIR Chat  · Date/time comparison semantics with different timezones · fhirpath"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/index.html">fhirpath</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Date.2Ftime.20comparison.20semantics.20with.20different.20timezones.html">Date/time comparison semantics with different timezones</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="154005155"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Date/time%20comparison%20semantics%20with%20different%20timezones/near/154005155" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Date.2Ftime.20comparison.20semantics.20with.20different.20timezones.html#154005155">(Oct 03 2018 at 03:37)</a>:</h4>
<p>We've put together a proposed disposition for this FHIRPath ballot comment: <a href="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=18607" target="_blank" title="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=18607">GF#18607</a></p>



<a name="154005157"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Date/time%20comparison%20semantics%20with%20different%20timezones/near/154005157" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Date.2Ftime.20comparison.20semantics.20with.20different.20timezones.html#154005157">(Oct 03 2018 at 03:38)</a>:</h4>
<p>As part of that, we're surveying existing implementations on current behavior. If you have a FHIRPath implementation, can you please describe the current behavior of your engine with respect to comparing date/time values with different timezone offsets?</p>



<a name="154005158"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Date/time%20comparison%20semantics%20with%20different%20timezones/near/154005158" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Date.2Ftime.20comparison.20semantics.20with.20different.20timezones.html#154005158">(Oct 03 2018 at 03:57)</a>:</h4>
<p>For example, what does your implementation return for the following expressions:</p>
<div class="codehilite"><pre><span></span>@2017-11-05T01:30:00.0-04:00 &gt; @2017-11-05T01:15:00.0-05:00
@2017-11-05T01:30:00.0-04:00 &lt; @2017-11-05T01:15:00.0-05:00
@2017-11-05T01:30:00.0-04:00 = @2017-11-05T01:15:00.0-05:00
@2017-11-05T01:30:00.0-04:00 = @2017-11-05T00:30:00.0-05:00
</pre></div>



<a name="154005180"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Date/time%20comparison%20semantics%20with%20different%20timezones/near/154005180" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Date.2Ftime.20comparison.20semantics.20with.20different.20timezones.html#154005180">(Oct 03 2018 at 11:41)</a>:</h4>
<p>Java RI:<br>
false<br>
true<br>
false<br>
false</p>



<a name="154005185"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Date/time%20comparison%20semantics%20with%20different%20timezones/near/154005185" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Date.2Ftime.20comparison.20semantics.20with.20different.20timezones.html#154005185">(Oct 03 2018 at 12:05)</a>:</h4>
<p>Pascal RI:<br>
true<br>
false<br>
false<br>
false</p>



<a name="154005186"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Date/time%20comparison%20semantics%20with%20different%20timezones/near/154005186" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Date.2Ftime.20comparison.20semantics.20with.20different.20timezones.html#154005186">(Oct 03 2018 at 12:06)</a>:</h4>
<p>I added them to the standard tests</p>



<a name="154005195"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Date/time%20comparison%20semantics%20with%20different%20timezones/near/154005195" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Date.2Ftime.20comparison.20semantics.20with.20different.20timezones.html#154005195">(Oct 03 2018 at 12:20)</a>:</h4>
<p>This is before I investigate to decide what the output should be</p>



<a name="154005218"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Date/time%20comparison%20semantics%20with%20different%20timezones/near/154005218" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Date.2Ftime.20comparison.20semantics.20with.20different.20timezones.html#154005218">(Oct 03 2018 at 13:04)</a>:</h4>
<p>The JavaScript CQL execution engine (which should use the same semantics since FHIRPath is a subset of CQL) says:<br>
false<br>
true<br>
false<br>
true</p>
<p>These are the results you would expect if you "respect offsets" by normalizing to a single offset before performing comparisons.</p>



<a name="154005221"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Date/time%20comparison%20semantics%20with%20different%20timezones/near/154005221" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Date.2Ftime.20comparison.20semantics.20with.20different.20timezones.html#154005221">(Oct 03 2018 at 13:10)</a>:</h4>
<p>These are the results from the Java-based CQL engine:</p>
<blockquote>
<blockquote>
<p>Test1 [1:1] false<br>
Test2 [2:1] true<br>
Test3 [3:1] false<br>
Test4 [4:1] true</p>
</blockquote>
</blockquote>



<a name="154005258"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Date/time%20comparison%20semantics%20with%20different%20timezones/near/154005258" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Date.2Ftime.20comparison.20semantics.20with.20different.20timezones.html#154005258">(Oct 03 2018 at 13:46)</a>:</h4>
<p>The results from the  .NET evaluator:</p>
<p>false,<br>
true,<br>
false,<br>
true</p>



<a name="154005260"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Date/time%20comparison%20semantics%20with%20different%20timezones/near/154005260" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Date.2Ftime.20comparison.20semantics.20with.20different.20timezones.html#154005260">(Oct 03 2018 at 13:47)</a>:</h4>
<p>Indeed, everything is normalized to UTC before comparison.</p>



<a name="154005268"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Date/time%20comparison%20semantics%20with%20different%20timezones/near/154005268" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Date.2Ftime.20comparison.20semantics.20with.20different.20timezones.html#154005268">(Oct 03 2018 at 13:50)</a>:</h4>
<p>I thought I did too....</p>



<a name="154005350"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Date/time%20comparison%20semantics%20with%20different%20timezones/near/154005350" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Date.2Ftime.20comparison.20semantics.20with.20different.20timezones.html#154005350">(Oct 03 2018 at 14:59)</a>:</h4>
<p>fhirpath.js does not yet support comparing dates at different time zones (so I won't bother including its output on those tests).</p>



<a name="154006735"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Date/time%20comparison%20semantics%20with%20different%20timezones/near/154006735" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Date.2Ftime.20comparison.20semantics.20with.20different.20timezones.html#154006735">(Oct 08 2018 at 16:27)</a>:</h4>
<p>Thank you for the feedback on this, we've proposed a disposition here: <a href="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=18607" target="_blank" title="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=18607">GF#18607</a> and will review and hopefully approve on tomorrow's ITS call.</p>



<a name="154006805"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Date/time%20comparison%20semantics%20with%20different%20timezones/near/154006805" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Date.2Ftime.20comparison.20semantics.20with.20different.20timezones.html#154006805">(Oct 08 2018 at 19:42)</a>:</h4>
<p>Correction, the next ITS call is the 16th, not tomorrow.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
