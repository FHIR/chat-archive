---
layout: page
title: "FHIR Chat  · data extraction for Questionnaires · fhirpath"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/index.html">fhirpath</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/data.20extraction.20for.20Questionnaires.html">data extraction for Questionnaires</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="198011925"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/data%20extraction%20for%20Questionnaires/near/198011925" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/data.20extraction.20for.20Questionnaires.html#198011925">(May 19 2020 at 00:44)</a>:</h4>
<p>I'm doing a pre-population fhirpath expression for converting what is a string in the source data, and need to convert it to a Coding for the QuestionnaireResponse item (as it is a choice type).<br>
Has this been covered anywhere already?<br>
<span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> , <span class="user-mention" data-user-id="195344">@Paul Lynch</span> - come across this in any forms you guys have looked at?</p>
<p>Was considering using the <code>%terminologies</code> stuff, but that seemed odd.<br>
what would feel more natural would be a shortcut like <br>
<code>%LaunchPatient.address.first().postalCode.toCoding('http://exmaple.org/CodeSystem/codedPostcodes')</code><br>
the other possibility I considered was using the translate function<br>
%terminologies.translate(conceptMap, code, params) : Parameters<br>
Even this would have been more natural as .translate from a string/code/coding as the context<br>
e.g. <code>%LaunchPatient.address.first().postalCode.translate('http://exmaple.org/ConceptMap/pcConverter').parameter.where(name='match').part.where(name='concept')</code></p>



<a name="198014257"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/data%20extraction%20for%20Questionnaires/near/198014257" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/data.20extraction.20for.20Questionnaires.html#198014257">(May 19 2020 at 01:27)</a>:</h4>
<p>Not something I've seen yet, no.</p>



<a name="198023149"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/data%20extraction%20for%20Questionnaires/near/198023149" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/data.20extraction.20for.20Questionnaires.html#198023149">(May 19 2020 at 05:19)</a>:</h4>
<p>Yeah, FHIRPath doesn't have syntax or operators to support this currently.</p>



<a name="198023201"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/data%20extraction%20for%20Questionnaires/near/198023201" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/data.20extraction.20for.20Questionnaires.html#198023201">(May 19 2020 at 05:20)</a>:</h4>
<p>The translate is an interesting option, but I agree, a function to construct the value would be more natural.</p>



<a name="198023212"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/data%20extraction%20for%20Questionnaires/near/198023212" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/data.20extraction.20for.20Questionnaires.html#198023212">(May 19 2020 at 05:21)</a>:</h4>
<p>What is the value you are converting?</p>



<a name="198023220"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/data%20extraction%20for%20Questionnaires/near/198023220" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/data.20extraction.20for.20Questionnaires.html#198023220">(May 19 2020 at 05:21)</a>:</h4>
<p>i.e., do you have a code, or are you trying to find a code from some display text?</p>



<a name="198023277"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/data%20extraction%20for%20Questionnaires/near/198023277" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/data.20extraction.20for.20Questionnaires.html#198023277">(May 19 2020 at 05:23)</a>:</h4>
<p>If you have a known code and system then I would have expected you could go via token syntax -- <code>http://exmaple.org/CodeSystem/postcode|1234</code></p>



<a name="198096626"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/data%20extraction%20for%20Questionnaires/near/198096626" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/data.20extraction.20for.20Questionnaires.html#198096626">(May 19 2020 at 17:02)</a>:</h4>
<p>I don't think I have had to translate a string to Coding.</p>



<a name="198254346"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/data%20extraction%20for%20Questionnaires/near/198254346" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/data.20extraction.20for.20Questionnaires.html#198254346">(May 20 2020 at 20:39)</a>:</h4>
<p>I have defined a number of factory functions for this kind of use - mainly creating complex data types</p>



<a name="198259484"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/data%20extraction%20for%20Questionnaires/near/198259484" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/data.20extraction.20for.20Questionnaires.html#198259484">(May 20 2020 at 21:28)</a>:</h4>
<p><span class="user-mention" data-user-id="191343">@Michael Lawley</span> , its a string in the source content (e.g. Address.State) and being populated into a coded field on a questionnaire form.</p>



<a name="198259722"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/data%20extraction%20for%20Questionnaires/near/198259722" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/data.20extraction.20for.20Questionnaires.html#198259722">(May 20 2020 at 21:31)</a>:</h4>
<p>So you just looking for some kind of type cast? string -&gt; code<br>
(I'm not a FHIRPath expert, just looking to understand the interactions with terminology.)</p>



<a name="198270585"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/data%20extraction%20for%20Questionnaires/near/198270585" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/data.20extraction.20for.20Questionnaires.html#198270585">(May 20 2020 at 23:36)</a>:</h4>
<p>string -&gt; Coding.</p>



<a name="198271061"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/data%20extraction%20for%20Questionnaires/near/198271061" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/data.20extraction.20for.20Questionnaires.html#198271061">(May 20 2020 at 23:44)</a>:</h4>
<p>Which is why I was thinking of "token syntax" as the literal form of a Coding, but I see now from <a href="http://hl7.org/fhirpath/#literals">http://hl7.org/fhirpath/#literals</a> that it is missing.<br>
Still, why not <code>'http://exmaple.org/CodeSystem/postcode|1234' as Coding</code> or<br>
<code>''http://exmaple.org/CodeSystem/postcode|' + %LaunchPatient.address.first().postalCode as Coding</code>?</p>



<a name="198271930"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/data%20extraction%20for%20Questionnaires/near/198271930" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/data.20extraction.20for.20Questionnaires.html#198271930">(May 20 2020 at 23:57)</a>:</h4>
<p>That is an interesting idea.  More generally, it might be useful to have a way in FHIRPath to create a structure (Coding, or something else) from primitives.</p>



<a name="198276026"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/data%20extraction%20for%20Questionnaires/near/198276026" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/data.20extraction.20for.20Questionnaires.html#198276026">(May 21 2020 at 01:02)</a>:</h4>
<p>Based on <a href="https://www.hl7.org/fhir/search.html#token">https://www.hl7.org/fhir/search.html#token</a> it might make sense if the token syntax could be converted to at least <code>Coding</code>, <code>CodeableConcept</code>, <code>Identifier</code>,  and <code>ContactPoint</code> using the <code>as</code> mechanism?</p>



<a name="198276218"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/data%20extraction%20for%20Questionnaires/near/198276218" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/data.20extraction.20for.20Questionnaires.html#198276218">(May 21 2020 at 01:06)</a>:</h4>
<p><code>as</code> is a type cast though, not a conversion function. A string <code>as</code> a Coding already has a defined meaning in FHIRPath. A conversion function for strings to and from Coding/CodeableConcept would make sense though, something like <code>'http://exmaple.org/CodeSystem/postcode|1234'.toCoding()</code></p>



<a name="198277481"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/data%20extraction%20for%20Questionnaires/near/198277481" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/data.20extraction.20for.20Questionnaires.html#198277481">(May 21 2020 at 01:32)</a>:</h4>
<p>we shouldn't invent crazy syntaxes. Factory.toCocing('<a href="http://exmaple.org/CodeSystem/postcode">http://exmaple.org/CodeSystem/postcode</a>', '1234') is nicer</p>



<a name="198278475"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/data%20extraction%20for%20Questionnaires/near/198278475" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/data.20extraction.20for.20Questionnaires.html#198278475">(May 21 2020 at 01:53)</a>:</h4>
<p>toCocing <span aria-label="grinning face with smiling eyes" class="emoji emoji-1f601" role="img" title="grinning face with smiling eyes">:grinning_face_with_smiling_eyes:</span></p>



<a name="198278491"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/data%20extraction%20for%20Questionnaires/near/198278491" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/data.20extraction.20for.20Questionnaires.html#198278491">(May 21 2020 at 01:53)</a>:</h4>
<p>Factory rather than Fluent?</p>



<a name="198278560"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/data%20extraction%20for%20Questionnaires/near/198278560" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/data.20extraction.20for.20Questionnaires.html#198278560">(May 21 2020 at 01:54)</a>:</h4>
<p>The other operations .toString() or .toInteger() are fluent like this (without the factory).</p>



<a name="198278659"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/data%20extraction%20for%20Questionnaires/near/198278659" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/data.20extraction.20for.20Questionnaires.html#198278659">(May 21 2020 at 01:56)</a>:</h4>
<p>So for my example at the top this would be:<br>
<code>Factory.toCoding('http://exmaple.org/CodeSystem/codedPostcodes', %LaunchPatient.address.first().postalCode)</code></p>



<a name="198282688"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/data%20extraction%20for%20Questionnaires/near/198282688" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/data.20extraction.20for.20Questionnaires.html#198282688">(May 21 2020 at 03:27)</a>:</h4>
<p>not sure what you mean by fluent?</p>



<a name="198285379"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/data%20extraction%20for%20Questionnaires/near/198285379" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/data.20extraction.20for.20Questionnaires.html#198285379">(May 21 2020 at 04:26)</a>:</h4>
<p>or re-use crazy syntaxes :-)</p>



<a name="209684799"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/data%20extraction%20for%20Questionnaires/near/209684799" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/data.20extraction.20for.20Questionnaires.html#209684799">(Sep 10 2020 at 17:58)</a>:</h4>
<p>Has this got any legs?<br>
We're doing a sample quesitonnaire and kinda want to use this?</p>



<a name="209685549"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/data%20extraction%20for%20Questionnaires/near/209685549" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/data.20extraction.20for.20Questionnaires.html#209685549">(Sep 10 2020 at 18:03)</a>:</h4>
<p>My sample form want's to fill a coded question for the language based on the Patient.language(s)</p>



<a name="209785713"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/data%20extraction%20for%20Questionnaires/near/209785713" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/data.20extraction.20for.20Questionnaires.html#209785713">(Sep 11 2020 at 14:15)</a>:</h4>
<p>Isn't language already a CodeableConcept from which you can get Codings?  Did you mean a different field in Patient?</p>



<a name="209923796"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/data%20extraction%20for%20Questionnaires/near/209923796" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/data.20extraction.20for.20Questionnaires.html#209923796">(Sep 13 2020 at 10:17)</a>:</h4>
<p>has what got legs?</p>



<a name="209950673"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/data%20extraction%20for%20Questionnaires/near/209950673" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/data.20extraction.20for.20Questionnaires.html#209950673">(Sep 13 2020 at 21:39)</a>:</h4>
<p>The toCoding factory.</p>



<a name="209951770"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/data%20extraction%20for%20Questionnaires/near/209951770" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/data.20extraction.20for.20Questionnaires.html#209951770">(Sep 13 2020 at 22:09)</a>:</h4>
<p>I think it would be good to have a factory API like the terminology service API as part of the FHIR adoption of FHIRPath</p>



<a name="209958206"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/data%20extraction%20for%20Questionnaires/near/209958206" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/data.20extraction.20for.20Questionnaires.html#209958206">(Sep 14 2020 at 01:20)</a>:</h4>
<p>Since this was a type conversion, that's why I was encouraging the same format as toString() and toInteger()</p>



<a name="211990283"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/data%20extraction%20for%20Questionnaires/near/211990283" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/data.20extraction.20for.20Questionnaires.html#211990283">(Oct 01 2020 at 23:56)</a>:</h4>
<p><span class="user-mention" data-user-id="191359">@Bryn Rhodes</span> Has this issue (of making Codings) been addressed by the recent changes?  I ran into a case where I wanted to convert ValueSet.expansion.contains elements into Codings, and couldn't.  (They are close enough that in fhirpath.js I could get away without converting, and just pretend they were Codings, but it is not really "proper" from a type perspective.)</p>



<a name="212123406"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/data%20extraction%20for%20Questionnaires/near/212123406" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/data.20extraction.20for.20Questionnaires.html#212123406">(Oct 02 2020 at 20:16)</a>:</h4>
<p>This hasn't been addressed by any spec changes I'm aware of, no. There are different potential approaches, we'd have to land one to move forward here.</p>



<a name="212138107"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/data%20extraction%20for%20Questionnaires/near/212138107" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/data.20extraction.20for.20Questionnaires.html#212138107">(Oct 02 2020 at 22:56)</a>:</h4>
<p>Here is a proposal that would allow construction of coding from ValueSet.expansion.contains (or from other things).</p>
<div class="codehilite"><pre><span></span><code>toCoding(displayExpr, codeExpr, systemExpr)
</code></pre></div>


<p>It applies the expressions given as parameters to the list of nodes on which toCoding is called.  (Yes, Coding also has fields "version" and "userSelected".   Parameters could be added for those as well, if desired.)</p>
<p>Examples:<br>
1) If %vs is a ValueSet expansion:</p>
<div class="codehilite"><pre><span></span><code>%vs.expansion.contains.toCoding(display, code, system)
</code></pre></div>


<p>This takes the display, code, and system properties of each node in "contains", and uses them to create a list of Codings with those properties.</p>
<p>2) If you just want to convert a list of codes into codings with same system (borrowing from Brian's example above):</p>
<div class="codehilite"><pre><span></span><code>%patient.address.postalCode.toCoding($this, $this, &#39;http://exmaple.org/CodeSystem/codedPostcodes&#39;)
</code></pre></div>


<p>3) If you really wanted to start from scratch (though I am not sure why you would do this), you could do:</p>
<div class="codehilite"><pre><span></span><code>(1).toCoding(&#39;Retired&#39;, &#39;retired&#39;, &#39;http://hl7.org/fhir/publication-status&#39;)
</code></pre></div>


<p>In this case this value of the input would be ignored, so it is a bit of hack, but I am not sure this is a real use case.</p>



<a name="212141585"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/data%20extraction%20for%20Questionnaires/near/212141585" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/data.20extraction.20for.20Questionnaires.html#212141585">(Oct 02 2020 at 23:49)</a>:</h4>
<p>I would not want to add something specific for this. In general, the FHIR profile on FHIRPath should define a factory class that constructs data type instances. I already have informal constructors for Quantity, Coding, Identifier and Period.</p>



<a name="212176846"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/data%20extraction%20for%20Questionnaires/near/212176846" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/data.20extraction.20for.20Questionnaires.html#212176846">(Oct 03 2020 at 15:23)</a>:</h4>
<p>What does that syntax look like, and are there any language facilities that need to be in place to support that?</p>



<a name="212205755"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/data%20extraction%20for%20Questionnaires/near/212205755" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/data.20extraction.20for.20Questionnaires.html#212205755">(Oct 04 2020 at 04:48)</a>:</h4>
<p>I don't think it needs language features. I've just defined a Factory class that expresses a bunch of functions on it. E.g.</p>
<p>Factory.coding(system, code, display)</p>



<a name="212306665"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/data%20extraction%20for%20Questionnaires/near/212306665" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/data.20extraction.20for.20Questionnaires.html#212306665">(Oct 05 2020 at 14:30)</a>:</h4>
<p>How would you use that to convert ValueSet.expansion.contains to Codings?</p>



<a name="212315012"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/data%20extraction%20for%20Questionnaires/near/212315012" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/data.20extraction.20for.20Questionnaires.html#212315012">(Oct 05 2020 at 15:22)</a>:</h4>
<p><code>ValueSet.expansion.contains.select(Factory.coding(system, code, display))</code></p>



<a name="212360039"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/data%20extraction%20for%20Questionnaires/near/212360039" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/data.20extraction.20for.20Questionnaires.html#212360039">(Oct 05 2020 at 21:37)</a>:</h4>
<p>That does not look like fhirpath to me.  What is Factory.coding returning?  select takes an expression.</p>



<a name="212360562"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/data%20extraction%20for%20Questionnaires/near/212360562" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/data.20extraction.20for.20Questionnaires.html#212360562">(Oct 05 2020 at 21:43)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191316">Grahame Grieve</span> <a href="#narrow/stream/179266-fhirpath/topic/data.20extraction.20for.20Questionnaires/near/212141585">said</a>:</p>
<blockquote>
<p>I would not want to add something specific for this. In general, the FHIR profile on FHIRPath should define a factory class that constructs data type instances. I already have informal constructors for Quantity, Coding, Identifier and Period.</p>
</blockquote>
<p>So, <code>toCoding</code> is specific, but <code>Factory.coding</code> is not?  The <code>toCoding</code> I suggested above has the advantage of being consistent with the Fluent pattern used in FHIRPath.</p>



<a name="212363521"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/data%20extraction%20for%20Questionnaires/near/212363521" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/data.20extraction.20for.20Questionnaires.html#212363521">(Oct 05 2020 at 22:18)</a>:</h4>
<blockquote>
<p>So, toCoding is specific, but Factory.coding is not?</p>
</blockquote>
<p>I don't want to do something that only works for Coding. It should handle at least the commonly used complex data types I listed above. That's not about syntax, but about scope</p>
<p>In terms of syntax, I think it's better to have a Factory based syntax rather than defining .toX with probably 20+ variants for data types and parameter combinations on every data type, which appears to be what you're doing. I guess if you have a root base class in the implementation, for all possible types, then that doesn't matter, but some/many implementations won't, and will have to do special case logic for the functions. Where as "Factory" that returns a global object with all those functions defined once seems less intrusive to me</p>



<a name="212364363"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/data%20extraction%20for%20Questionnaires/near/212364363" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/data.20extraction.20for.20Questionnaires.html#212364363">(Oct 05 2020 at 22:28)</a>:</h4>
<p>I like the idea of being able to construct more than just Codings, and I would actually prefer something that lets you construct any structure and assign a type as needed.  But, I don't see how Factory.coding(...) works if you are starting with a list of objects (like my ValueSet.expansion.contains example) that you want to turn into Codings.  I can see it working if you have a fixed set of strings, or if the parameters are independent of each other and just need to reach into (say) a QuestionnaireResponse for data.</p>



<a name="212364499"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/data%20extraction%20for%20Questionnaires/near/212364499" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/data.20extraction.20for.20Questionnaires.html#212364499">(Oct 05 2020 at 22:30)</a>:</h4>
<p>well, scope is the enemy whatever. This, for instance:</p>
<p><code>%vs.expansion.contains.toCoding(display, code, system)</code></p>
<p>it doesn't do what you think, since display, code and system come from your context... null, in other words</p>



<a name="212364608"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/data%20extraction%20for%20Questionnaires/near/212364608" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/data.20extraction.20for.20Questionnaires.html#212364608">(Oct 05 2020 at 22:31)</a>:</h4>
<p>That depends on how toCoding is defined.  I was defining it like "where" or "select", where the expression has access to the collection elements.</p>



<a name="212364716"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/data%20extraction%20for%20Questionnaires/near/212364716" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/data.20extraction.20for.20Questionnaires.html#212364716">(Oct 05 2020 at 22:32)</a>:</h4>
<p>well, that's exactly why I don't want to special case this stuff. resetting the context is a language specification, but specific to the function.</p>



<a name="212364839"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/data%20extraction%20for%20Questionnaires/near/212364839" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/data.20extraction.20for.20Questionnaires.html#212364839">(Oct 05 2020 at 22:34)</a>:</h4>
<p>It's a feature of the language that already exists.  I am just suggesting a new function (or set of functions) that use it.</p>



<a name="212366442"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/data%20extraction%20for%20Questionnaires/near/212366442" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/data.20extraction.20for.20Questionnaires.html#212366442">(Oct 05 2020 at 22:56)</a>:</h4>
<p>That's what I don't agree with. I don't think that profiles on the language -as this one is - should use that feature</p>



<a name="212369272"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/data%20extraction%20for%20Questionnaires/near/212369272" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/data.20extraction.20for.20Questionnaires.html#212369272">(Oct 05 2020 at 23:30)</a>:</h4>
<p>Just to make sure we're talking about the same "feature"-- are you referring to the feature in which a function can take an expression as a parameter, with access to $this and $index, as described as <a href="http://hl7.org/fhirpath/#functions">http://hl7.org/fhirpath/#functions</a>?</p>



<a name="212589615"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/data%20extraction%20for%20Questionnaires/near/212589615" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/data.20extraction.20for.20Questionnaires.html#212589615">(Oct 07 2020 at 17:10)</a>:</h4>
<p>How about defining something in FHIRPath (not the FHIR profile), very general, like:<br>
<code>toElement(type, fields, expressions)</code><br>
where type is the type of the structure you are creating, fields is an array of field names (or possibly paths, if you want to handle nested structures like Identifier.period), and expressions are the FHIRPath expressions for obtaining values for those field names.  So, for example, you could do:</p>
<div class="codehilite"><pre><span></span><code>%vs.expansion.contains.toElement(&#39;Coding&#39;, &#39;display&#39; | &#39;code&#39; | &#39;system&#39;, &#39;display&#39; | &#39;code&#39; | &#39;system&#39;)
</code></pre></div>


<p>In this case the expressions and field names happen to be the same, but they might be different.</p>



<a name="212632562"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/data%20extraction%20for%20Questionnaires/near/212632562" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/data.20extraction.20for.20Questionnaires.html#212632562">(Oct 07 2020 at 23:34)</a>:</h4>
<p>sounds slippery to me. You really don't like the factory idea?</p>



<a name="212644789"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/data%20extraction%20for%20Questionnaires/near/212644789" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/data.20extraction.20for.20Questionnaires.html#212644789">(Oct 08 2020 at 03:49)</a>:</h4>
<p>Yeah, I'm not seeing the problem with the Factory idea, I think that nicely solves the problem without needing to introduce any features in FHIRPath.</p>



<a name="212644861"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/data%20extraction%20for%20Questionnaires/near/212644861" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/data.20extraction.20for.20Questionnaires.html#212644861">(Oct 08 2020 at 03:51)</a>:</h4>
<p>CQL has instance selector syntax for this purpose. If we really wanted to do something in FHIRPath directly, I'd suggest adopting that syntax as something that's already defined and implemented in the CQL engines.</p>



<a name="212684754"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/data%20extraction%20for%20Questionnaires/near/212684754" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/data.20extraction.20for.20Questionnaires.html#212684754">(Oct 08 2020 at 12:58)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191359">Bryn Rhodes</span> <a href="#narrow/stream/179266-fhirpath/topic/data.20extraction.20for.20Questionnaires/near/212644789">said</a>:</p>
<blockquote>
<p>Yeah, I'm not seeing the problem with the Factory idea, I think that nicely solves the problem without needing to introduce any features in FHIRPath.</p>
</blockquote>
<p>As I mentioned <a href="#narrow/stream/179266-fhirpath/topic/data.20extraction.20for.20Questionnaires/near/212360039">above</a>, I don't see how the Factory idea would work to convert %vs.expansion.contains into Codings.</p>



<a name="212691777"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/data%20extraction%20for%20Questionnaires/near/212691777" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/data.20extraction.20for.20Questionnaires.html#212691777">(Oct 08 2020 at 13:47)</a>:</h4>
<blockquote>
<p>That does not look like fhirpath to me. What is Factory.coding returning? select takes an expression.</p>
</blockquote>
<p>Is <code>Factory.coding(system, code, display)</code> not an expression?</p>



<a name="212695027"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/data%20extraction%20for%20Questionnaires/near/212695027" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/data.20extraction.20for.20Questionnaires.html#212695027">(Oct 08 2020 at 14:10)</a>:</h4>
<p>It looked like it was passing a Coding into select(), but I see... everything inside the select is an expression that gets evaluated for each item in the "contains".</p>



<a name="212697066"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/data%20extraction%20for%20Questionnaires/near/212697066" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/data.20extraction.20for.20Questionnaires.html#212697066">(Oct 08 2020 at 14:23)</a>:</h4>
<p>But, I think the syntax has some problems.  1) Normally in fhirpath, if you have Abc.def, Abc acts as an assertion that the context object is a resource of type Abc.  The <a href="http://hl7.org/fhirpath/#path-selection">spec</a> says is can be a path on the context, but that it should try to match the type of the context object first, and actually I don't think there has been any case yet where a path starts with an uppercase letter.  "Factory" looks like a resource type.</p>



<a name="212697636"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/data%20extraction%20for%20Questionnaires/near/212697636" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/data.20extraction.20for.20Questionnaires.html#212697636">(Oct 08 2020 at 14:27)</a>:</h4>
<p>2) A second problem is that ".coding" should be acting on the node returned by "Factory", which therefore means <code>system</code>, etc., would get evaluated with the context of the Factory object, not the objects in the contains.</p>



<a name="212698143"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/data%20extraction%20for%20Questionnaires/near/212698143" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/data.20extraction.20for.20Questionnaires.html#212698143">(Oct 08 2020 at 14:31)</a>:</h4>
<p>The <code>.coding()</code> function isn't iterative, so doesn't introduce any context, aso the system, code, and display references fall back to the <code>.select()</code> context. The reference to <code>Factory</code> is part of the FHIRProfile, in the same way that terminology services are introduced.</p>



<a name="212699710"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/data%20extraction%20for%20Questionnaires/near/212699710" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/data.20extraction.20for.20Questionnaires.html#212699710">(Oct 08 2020 at 14:41)</a>:</h4>
<p>terminology services are introduced with a variable syntax -- %terminologies, not Terminology.  (I am not sure how to handle that either, but it might be better to have one way of doing it).</p>



<a name="212700185"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/data%20extraction%20for%20Questionnaires/near/212700185" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/data.20extraction.20for.20Questionnaires.html#212700185">(Oct 08 2020 at 14:44)</a>:</h4>
<p>My main point in (2) is that (except I guess for %terminologies), in when you have <code>a.b(...)</code>, <code>a</code> sets the context for the <code>b(...)</code></p>



<a name="212701350"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/data%20extraction%20for%20Questionnaires/near/212701350" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/data.20extraction.20for.20Questionnaires.html#212701350">(Oct 08 2020 at 14:52)</a>:</h4>
<p>I guess what is happening is that %terminologies and Factory are introducing the idea of a namespace for functions, where the namespace does not modify the context but just provides access to a set of functions.  I don't see such a concept the core FHIRPath spec (but maybe I've missed it), and it seems like a new language feature that is being introduced by the FHIR profile.</p>



<a name="212705048"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/data%20extraction%20for%20Questionnaires/near/212705048" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/data.20extraction.20for.20Questionnaires.html#212705048">(Oct 08 2020 at 15:15)</a>:</h4>
<p>in <code>a.b(...)</code>, <code>a</code> only sets the context for <code>b(...)</code> if <code>b</code> is an iterative function, and that only applies to things like <code>.where()</code> and <code>.select()</code>. So I don't see it as introducing a new language feature, it's just taking advantage of the fact that implementations can introduce types.</p>



<a name="212708274"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/data%20extraction%20for%20Questionnaires/near/212708274" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/data.20extraction.20for.20Questionnaires.html#212708274">(Oct 08 2020 at 15:35)</a>:</h4>
<p>By "context", I mean the data nodes against which the next segment is applied.  So, in <code>Patient.name.count()</code>, you are getting the count of the names, not the count of Patient, because <code>name</code> has set the context for <code>count()</code>.</p>



<a name="212713103"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/data%20extraction%20for%20Questionnaires/near/212713103" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/data.20extraction.20for.20Questionnaires.html#212713103">(Oct 08 2020 at 16:09)</a>:</h4>
<p>Does the JS engine not have a stack?</p>



<a name="212713932"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/data%20extraction%20for%20Questionnaires/near/212713932" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/data.20extraction.20for.20Questionnaires.html#212713932">(Oct 08 2020 at 16:15)</a>:</h4>
<p>A stack of contexts?  No.  But how would that help?  The pattern in FHIRPath is to apply the immediate context of the thing on the left to the thing on the right.</p>



<a name="212740081"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/data%20extraction%20for%20Questionnaires/near/212740081" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/data.20extraction.20for.20Questionnaires.html#212740081">(Oct 08 2020 at 19:43)</a>:</h4>
<p>I'll review my implementation. I think you have a point about Factory. - I would be ok with %factory</p>



<a name="212748194"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/data%20extraction%20for%20Questionnaires/near/212748194" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/data.20extraction.20for.20Questionnaires.html#212748194">(Oct 08 2020 at 20:58)</a>:</h4>
<p>Yes, I think I like %factory better, though it still seems odd to me (but at least it is the same oddness as %terminologies).  %variable usually points to some data object (e.g. %questionnaire) which then provides the context for what follows after the <code>.</code>.  With %factory, you don't get a data object, but instead allow an extra set of functions to be called on whatever the context was previously.  It is like a variable that holds functions rather than data.  Definitely implementable, but it's a new thing compared to what I've encountered in the core FHIRPath spec.</p>



<a name="213555674"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/data%20extraction%20for%20Questionnaires/near/213555674" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/data.20extraction.20for.20Questionnaires.html#213555674">(Oct 16 2020 at 12:55)</a>:</h4>
<p>Since %factory seems acceptable, should there be a tracker item created for it?</p>



<a name="213986355"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/data%20extraction%20for%20Questionnaires/near/213986355" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/data.20extraction.20for.20Questionnaires.html#213986355">(Oct 20 2020 at 22:14)</a>:</h4>
<p>yes please</p>



<a name="214082543"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/data%20extraction%20for%20Questionnaires/near/214082543" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/data.20extraction.20for.20Questionnaires.html#214082543">(Oct 21 2020 at 17:07)</a>:</h4>
<p><a href="http://jira.hl7.org/browse/FHIR-29324">J#29324</a></p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
