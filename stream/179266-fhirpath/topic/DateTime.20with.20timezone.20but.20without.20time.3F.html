---
layout: page
title: "FHIR Chat  · DateTime with timezone but without time? · fhirpath"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/index.html">fhirpath</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/DateTime.20with.20timezone.20but.20without.20time.3F.html">DateTime with timezone but without time?</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="167954207"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/DateTime%20with%20timezone%20but%20without%20time%3F/near/167954207" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/DateTime.20with.20timezone.20but.20without.20time.3F.html#167954207">(Jun 12 2019 at 14:50)</a>:</h4>
<p>The <a href="http://hl7.org/fhirpath/2019May/grammar.html" target="_blank" title="http://hl7.org/fhirpath/2019May/grammar.html">grammar</a> for the May ballot permits DateTimes like "@2019T-04:00".  Is that desirable?  What would that mean?</p>



<a name="167959294"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/DateTime%20with%20timezone%20but%20without%20time%3F/near/167959294" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/DateTime.20with.20timezone.20but.20without.20time.3F.html#167959294">(Jun 12 2019 at 15:39)</a>:</h4>
<p>I don't think it's meaningful</p>



<a name="167980133"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/DateTime%20with%20timezone%20but%20without%20time%3F/near/167980133" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/DateTime.20with.20timezone.20but.20without.20time.3F.html#167980133">(Jun 12 2019 at 19:36)</a>:</h4>
<p><span class="user-mention" data-user-id="191359">@Bryn Rhodes</span>  Should I file a tracker item to remove that possibility?</p>



<a name="167988510"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/DateTime%20with%20timezone%20but%20without%20time%3F/near/167988510" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/DateTime.20with.20timezone.20but.20without.20time.3F.html#167988510">(Jun 12 2019 at 21:10)</a>:</h4>
<p>I think the intention was to support full dates with timezones - because sometimes that is relevant.  Might be reasonable to prohibit for just yyyy or yyyy-mm.  It would be a breaking change though, so we'd need to check that prohibiting it wouldn't negatively impact anyone.</p>



<a name="168047457"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/DateTime%20with%20timezone%20but%20without%20time%3F/near/168047457" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/DateTime.20with.20timezone.20but.20without.20time.3F.html#168047457">(Jun 13 2019 at 14:00)</a>:</h4>
<p>The <a href="http://hl7.org/fhirpath/grammar.html" target="_blank" title="http://hl7.org/fhirpath/grammar.html">published STU1 fhirpath grammar</a> does allow you to stick a Z at the end of a partial date, but if you want any other time offset, you have to specify a full date and include at least an hour.    So, the breaking change would be to not allow Z, specifically, at the end of a DateTime without at time.</p>



<a name="168339296"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/DateTime%20with%20timezone%20but%20without%20time%3F/near/168339296" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/DateTime.20with.20timezone.20but.20without.20time.3F.html#168339296">(Jun 17 2019 at 19:15)</a>:</h4>
<p>The intent was to only allow timezone as part of a DateTime that included a time, but yes, the way that it was defined it allowed timezones. <span class="user-mention" data-user-id="191316">@Grahame Grieve</span>, <span class="user-mention" data-user-id="191328">@Ewout Kramer</span>, <span class="user-mention" data-user-id="191367">@Brian Postlethwaite</span>, do your implementations accept the date time literal <code>@2019T-04:00</code>?</p>



<a name="168353543"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/DateTime%20with%20timezone%20but%20without%20time%3F/near/168353543" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/DateTime.20with.20timezone.20but.20without.20time.3F.html#168353543">(Jun 17 2019 at 22:32)</a>:</h4>
<p>Has someone come up with an example of a fhirpath expression where you want to use the value.</p>



<a name="168361224"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/DateTime%20with%20timezone%20but%20without%20time%3F/near/168361224" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/DateTime.20with.20timezone.20but.20without.20time.3F.html#168361224">(Jun 18 2019 at 01:14)</a>:</h4>
<p>I'm not suggesting it's a valid literal, I'm just surveying current implementations for behavior.</p>



<a name="169850239"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/DateTime%20with%20timezone%20but%20without%20time%3F/near/169850239" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/DateTime.20with.20timezone.20but.20without.20time.3F.html#169850239">(Jul 08 2019 at 08:31)</a>:</h4>
<p>I am sure I don't accept that.</p>



<a name="170472171"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/DateTime%20with%20timezone%20but%20without%20time%3F/near/170472171" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/DateTime.20with.20timezone.20but.20without.20time.3F.html#170472171">(Jul 09 2019 at 17:19)</a>:</h4>
<p>I created <a href="https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=22818" target="_blank" title="https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=22818">GF#22818</a> for this issue.</p>



<a name="173077093"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/DateTime%20with%20timezone%20but%20without%20time%3F/near/173077093" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/DateTime.20with.20timezone.20but.20without.20time.3F.html#173077093">(Aug 13 2019 at 01:32)</a>:</h4>
<p>I've proposed a resolution for this (<a href="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=22818" target="_blank" title="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=22818">GF#22818</a>) and (<a href="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=22989" target="_blank" title="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=22989">GF#22989</a>). Please poke holes in it, I'm adding it to a block vote for consideration on the 8/20 ITS call. <span class="user-mention" data-user-id="195344">@Paul Lynch</span> , <span class="user-mention" data-user-id="191328">@Ewout Kramer</span> , <span class="user-mention" data-user-id="191469">@Chris Moesel</span></p>



<a name="173099972"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/DateTime%20with%20timezone%20but%20without%20time%3F/near/173099972" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/DateTime.20with.20timezone.20but.20without.20time.3F.html#173099972">(Aug 13 2019 at 09:51)</a>:</h4>
<p>Looks fine to me!</p>



<a name="173117604"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/DateTime%20with%20timezone%20but%20without%20time%3F/near/173117604" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/DateTime.20with.20timezone.20but.20without.20time.3F.html#173117604">(Aug 13 2019 at 14:22)</a>:</h4>
<p>In general the resolution looks good, but the timezoneoffset pattern differs from the <a href="https://www.hl7.org/fhir/datatypes.html#dateTime" target="_blank" title="https://www.hl7.org/fhir/datatypes.html#dateTime">FHIR pattern</a>:  (Z|(\+|-)((0[0-9]|1[0-3]):[0-5][0-9]|14:00)).  The proposed FHIRPath pattern, ('Z' | ('+' | '-') [0-9][0-9]':'[0-9][0-9]), allows timezone offset values like +99:99 that FHIR does not.  Is it possible to just copy the FHIR pattern?</p>



<a name="173133149"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/DateTime%20with%20timezone%20but%20without%20time%3F/near/173133149" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/DateTime.20with.20timezone.20but.20without.20time.3F.html#173133149">(Aug 13 2019 at 17:26)</a>:</h4>
<p>In the parser for a language though, putting validation like that in the lexer makes parsing much more difficult, because what it ends up meaning is that +99:99 is not _tokenizable_. We've purposely defined the regexes here to be more broad, leaving semantic validation to the parser.</p>



<a name="173135172"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/DateTime%20with%20timezone%20but%20without%20time%3F/near/173135172" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/DateTime.20with.20timezone.20but.20without.20time.3F.html#173135172">(Aug 13 2019 at 17:50)</a>:</h4>
<p>I think I would rather have the lexer handle as much as possible than have to write code to further validate its output.  But, I guess the intent is to avoid the ugly ANTLR error messages in favor of custom ones written for the parser?</p>



<a name="173528335"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/DateTime%20with%20timezone%20but%20without%20time%3F/near/173528335" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/DateTime.20with.20timezone.20but.20without.20time.3F.html#173528335">(Aug 19 2019 at 09:16)</a>:</h4>
<p>Yes, that certainly helps, not just in ANTLR but any framework where lexing, tokenizing and grammars are separated.  I had to get used to it, but it does get you better error messages.  Also, you can never get to the bottom of it anyway (think leap years), so why have part of the validation in the lexer and part in the higher-level parser?  And in a "term" rule, it's really useful that a parser would at least grasp that you are trying to specify a date - rather than saying "it's none of the rules in term, so you're totally off".  Even in smart hand-written parsers you'd need something to recognize "almost correct dates" to give sensible error messages?</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
