---
layout: page
title: "FHIR Chat  · date math · fhirpath"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/index.html">fhirpath</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/date.20math.html">date math</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="216042556"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/date%20math/near/216042556" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/date.20math.html#216042556">(Nov 09 2020 at 04:14)</a>:</h4>
<p>The validator is blowing up saying that toDate is 'not done yet' with this expression:<br>
((now().toDate() - $this) &lt;= 24 months) or value.length()=4</p>
<p>(context is Patient.birthDate)</p>
<p>Is there a way I can perform this function without using toDate()?  (If I just remove it, the publisher yells that you can't use the '-' operator with two different types - dateTime and date. )</p>



<a name="216045002"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/date%20math/near/216045002" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Townley-O&#x27;Neill <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/date.20math.html#216045002">(Nov 09 2020 at 05:25)</a>:</h4>
<p>Could you make them strings?</p>



<a name="216045005"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/date%20math/near/216045005" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Townley-O&#x27;Neill <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/date.20math.html#216045005">(Nov 09 2020 at 05:25)</a>:</h4>
<p><span aria-label="nauseated" class="emoji emoji-1f922" role="img" title="nauseated">:nauseated:</span></p>



<a name="216096613"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/date%20math/near/216096613" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> ryan moehrke <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/date.20math.html#216096613">(Nov 09 2020 at 15:09)</a>:</h4>
<p>looks like there's a today() instead of now() does that work for you? <a href="http://hl7.org/fhirpath/#current-date-and-time-functions">http://hl7.org/fhirpath/#current-date-and-time-functions</a></p>



<a name="216133941"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/date%20math/near/216133941" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/date.20math.html#216133941">(Nov 09 2020 at 19:40)</a>:</h4>
<p>Awesome!  Never thought to look for a date-specific function.  That fixed my issue.  Thanks <span class="user-mention" data-user-id="237342">@ryan moehrke</span></p>



<a name="261116609"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/date%20math/near/261116609" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/date.20math.html#261116609">(Nov 11 2021 at 10:36)</a>:</h4>
<p>With the date math functions, I'm adding support for this into the dotnet libs and have an issue with  <code>@2016 + 365 days</code> adding to return <code>365</code>. (defined in this section in the spec <a href="http://hl7.org/fhirpath/N1/#addition-2">http://hl7.org/fhirpath/N1/#addition-2</a>)<br>
where is the "standard year length" defined, and is there a standard month length too?<br>
What would happen if we said <code>@2016-01 + 365 days</code> should that also return the same value?<br>
How about <code>@2016-02 + 28 days</code>?<br>
The fhirpathjs engine returns <code>2016</code> which is what my initial implementation has done too, and <span class="user-mention" data-user-id="191328">@Ewout Kramer</span> pointed out that it was wrong...</p>
<p>I know this doesn't have the partial date semantics either, but...<br>
<a href="https://www.timeanddate.com/date/dateadded.html?d1=01&amp;m1=01&amp;y1=2016&amp;type=add&amp;ay=&amp;am=&amp;aw=&amp;ad=365&amp;rec=">https://www.timeanddate.com/date/dateadded.html?d1=01&amp;m1=01&amp;y1=2016&amp;type=add&amp;ay=&amp;am=&amp;aw=&amp;ad=365&amp;rec=</a></p>



<a name="261118348"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/date%20math/near/261118348" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/date.20math.html#261118348">(Nov 11 2021 at 10:54)</a>:</h4>
<p>I personally think this should do what I (and what I assume the fhirpathjs implementation have done) for partials, assume was 1st of Jan that year (or whatever partial it was) perform the addition, then trim the days/months off (whatever the original precision was)<br>
This magic average year surprised me - and there isn't a magic month length defined also...</p>



<a name="261150305"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/date%20math/near/261150305" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> ryan moehrke <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/date.20math.html#261150305">(Nov 11 2021 at 15:52)</a>:</h4>
<p>there does seem to be a conversion table defined<br>
<a href="http://hl7.org/fhirpath/N1/#quantity-conversion-functions">http://hl7.org/fhirpath/N1/#quantity-conversion-functions</a><br>
so according to this a standard month is 30 days</p>



<a name="261150516"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/date%20math/near/261150516" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> ryan moehrke <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/date.20math.html#261150516">(Nov 11 2021 at 15:54)</a>:</h4>
<p>but it does seem rather strange that the spec requires you respecting variable length periods for when precision matches (?) but once there is a precision mismatch just use a standard conversion table, I'm not sure I understand the reasoning behind that decision</p>



<a name="261167715"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/date%20math/near/261167715" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/date.20math.html#261167715">(Nov 11 2021 at 18:14)</a>:</h4>
<p>The motivation was to provide a consistent algorithm for applying to date/time arithmetic when the precision of the date/time value was lower than the precision of the time quantity being added. It does result in some surprises like those examples, but that's why we added those example specifically, to illustrate that behavior. The only time we can guarantee calendar arithmetic semantics is when the time quantity can be anchored to the date/time value, and that requires at least the precision of the time quantity.</p>



<a name="261186472"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/date%20math/near/261186472" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/date.20math.html#261186472">(Nov 11 2021 at 21:28)</a>:</h4>
<p>Thanks Bryn, at least I see the full conversion routines now.<br>
<span class="user-mention" data-user-id="195344">@Paul Lynch</span> I guess we need to update the fhirpathjs implementation too here.<br>
Are those specific examples in the fhirpath test suite? (and the Java implementation also doing the same thing)</p>



<a name="261279421"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/date%20math/near/261279421" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/date.20math.html#261279421">(Nov 12 2021 at 16:48)</a>:</h4>
<p><span class="user-mention" data-user-id="191367">@Brian Postlethwaite</span> -- Yes, thanks for pointing that out. I will add a ticket for it.</p>



<a name="261565424"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/date%20math/near/261565424" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/date.20math.html#261565424">(Nov 15 2021 at 21:57)</a>:</h4>
<p>In implementing the date math on a partial month value, there is no logic defined on how to add weeks...<br>
As I see it there are 2 choices here:</p>
<div class="codehilite"><pre><span></span><code>case &quot;weeks&quot;:
           if (dateValue.Precision == DateTimePrecision.Year)
                dto = dateValue._parsedValue.AddYears((int)(addValue.Value / 52));
           else if (dateValue.Precision == DateTimePrecision.Month)
                dto = dateValue._parsedValue.AddMonths((int)(addValue.Value * 7 / 30)); // convert to days in a week over a month
            else
                dto = dateValue._parsedValue.AddDays(((int)addValue.Value) * 7);
            break;
</code></pre></div>
<p>or </p>
<div class="codehilite"><pre><span></span><code>case &quot;weeks&quot;:
           if (dateValue.Precision == DateTimePrecision.Year)
                dto = dateValue._parsedValue.AddYears((int)(addValue.Value / 52));
           else if (dateValue.Precision == DateTimePrecision.Month)
                dto = dateValue._parsedValue.AddMonths((int)(addValue.Value/52*12)); // convert to weeks in the year over a month
            else
                dto = dateValue._parsedValue.AddDays(((int)addValue.Value) * 7);
            break;
</code></pre></div>
<p>the latter of these makes more sense to me.</p>



<a name="261571228"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/date%20math/near/261571228" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/date.20math.html#261571228">(Nov 15 2021 at 22:44)</a>:</h4>
<p>The spec has language that talks about dealing with weeks as 7 days, so I think it would make sense to say, multiply the weeks value by 7 and then do the same thing you would do with days.</p>



<a name="261591830"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/date%20math/near/261591830" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/date.20math.html#261591830">(Nov 16 2021 at 02:54)</a>:</h4>
<p>(checking with Excel) the difference between the 2 options gives different answer at 30 and 43 under 52, but when you go over 100 weeks the 2 options give the same result only 50%(ish) of the time.<br>
So I think we should get this defined...<br>
I'll log a tracker, and I do think given the way the others are defined, we should go with the more accurate intention of average weeks in a year.<br>
And beyond 377 weeks, they are never the same</p>



<a name="261598558"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/date%20math/near/261598558" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/date.20math.html#261598558">(Nov 16 2021 at 05:06)</a>:</h4>
<p><a href="https://jira.hl7.org/browse/FHIR-34315">https://jira.hl7.org/browse/FHIR-34315</a></p>



<a name="261655868"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/date%20math/near/261655868" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/date.20math.html#261655868">(Nov 16 2021 at 15:18)</a>:</h4>
<p>Is there a reason not to handle it the same as days? i.e. always treat it like weeks * 7?</p>



<a name="261720821"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/date%20math/near/261720821" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/date.20math.html#261720821">(Nov 16 2021 at 23:06)</a>:</h4>
<p>Accuracy? Ave days in a month is less precise than avg weeks in a month, it's all feeling very random to me.<br>
(you don't have days precision, and you haven't provided days precision)</p>



<a name="261730939"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/date%20math/near/261730939" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Townley-O&#x27;Neill <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/date.20math.html#261730939">(Nov 17 2021 at 00:56)</a>:</h4>
<p>Do they work better with the value for weeks in a year not being 52, but being 365/7 (~52.143) or 365.25/7 (~52.179)?</p>



<a name="261792722"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/date%20math/near/261792722" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/date.20math.html#261792722">(Nov 17 2021 at 14:39)</a>:</h4>
<p>We already don't have accuracy with un-anchored calendar calculations. Seems like consistency with days behavior is preferable, especially given that we say in the spec "Calculations involving weeks are equivalent to multiplying the number of weeks by 7 and performing the calculation for the resulting number of days."</p>



<a name="261827836"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/date%20math/near/261827836" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/date.20math.html#261827836">(Nov 17 2021 at 18:33)</a>:</h4>
<p>Ok. That's what I'll put in the dotnet implementation then l, and reference back to the tracker.<br>
Seems that's what you and Ewout both concluded too.</p>



<a name="262567270"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/date%20math/near/262567270" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/date.20math.html#262567270">(Nov 24 2021 at 10:00)</a>:</h4>
<p>In updating the dotnet implementation to handle the date math, we fixed the handling quite a lot and in doing so we've come across a few unit tests from the spec that are failing now that we believe are actually wrong according to the spec.</p>
<p>==== Running tests from file 'TestData\fhirpath\tests-fhir-r4.xml' ====<br>
FAIL: testTypes - testStringQuantityDayLiteralToQuantity: '1 day'.toQuantity() = 1 'd'<br>
       (AssertFailedException) Assert.Fail failed. Expected a non-empty result</p>
<p>According to the fhirpath spec, 1 year is approximately 1 a, not equivalent, and same with <code>day</code>(calendar) and <code>d</code> (UCUM)<br>
<a href="http://hl7.org/fhirpath/N1/#time-valued-quantities">http://hl7.org/fhirpath/N1/#time-valued-quantities</a><br>
<code>1 year'.toQuantity() = 1 'a'</code></p>
<p>And this one too - under what basis does the <code>toString</code> on the quantity do this conversion?<br>
(as the fhir type Quantity can hold both, and thus needs to be able to hold it and why would a to string on a fhir type produce something different? - note that we couldn't spot anything in the spec explicitly saying that it SHOULD do this)<br>
FAIL: testTypes - testQuantityLiteralWeekToString: 1 week.toString()<br>
       (AssertFailedException) Assert.AreEqual failed. Expected:&lt;1 'wk'&gt;. Actual:&lt;1 'week'&gt;</p>



<a name="262567658"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/date%20math/near/262567658" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/date.20math.html#262567658">(Nov 24 2021 at 10:02)</a>:</h4>
<p>Note that there is also this section that talks about using quantity too, which further confuses the issue. <a href="http://hl7.org/fhir/fhirpath.html#quantity">http://hl7.org/fhir/fhirpath.html#quantity</a><br>
If they are forced to be calendar based - then there are issues with the equivalence to equality operations defined in the core spec...</p>



<a name="262572288"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/date%20math/near/262572288" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/date.20math.html#262572288">(Nov 24 2021 at 10:51)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="191367">@Brian Postlethwaite</span> - I remembered we discussed this some time ago, and I found the tracker: <a href="https://jira.hl7.org/browse/FHIR-28144">https://jira.hl7.org/browse/FHIR-28144</a></p>



<a name="262572328"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/date%20math/near/262572328" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/date.20math.html#262572328">(Nov 24 2021 at 10:51)</a>:</h4>
<p>And the previous discussion: <a href="#narrow/stream/179266-fhirpath/topic/Date.2FTime.20comparison.20vs.20equality">https://chat.fhir.org/#narrow/stream/179266-fhirpath/topic/Date.2FTime.20comparison.20vs.20equality</a></p>



<a name="262572622"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/date%20math/near/262572622" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/date.20math.html#262572622">(Nov 24 2021 at 10:54)</a>:</h4>
<p>This also means updates to this table: <a href="https://hl7.org/fhirpath/#time-valued-quantities">https://hl7.org/fhirpath/#time-valued-quantities</a>.</p>



<a name="262572680"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/date%20math/near/262572680" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/date.20math.html#262572680">(Nov 24 2021 at 10:55)</a>:</h4>
<p>So does the outcome then mean that there is no difference between equivalence and equality?<br>
(as they are considered the same, and always forced to calendar units?)</p>



<a name="262574889"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/date%20math/near/262574889" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/date.20math.html#262574889">(Nov 24 2021 at 11:16)</a>:</h4>
<p>The difference remains for units above weeks (so month and year)</p>



<a name="262575151"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/date%20math/near/262575151" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/date.20math.html#262575151">(Nov 24 2021 at 11:18)</a>:</h4>
<p>It does not explain why  <code>(1 week).ToString()</code> should return the string "1 'wk'" according to the unit tests.  They may be considered equal under the "=" operator, but does this mean <code>ToString()</code> does a normalization to UCUM?</p>



<a name="262576059"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/date%20math/near/262576059" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/date.20math.html#262576059">(Nov 24 2021 at 11:27)</a>:</h4>
<p>I don't understand how 1 year to quantity compares equal to 1a and not equivalent.</p>



<a name="262579647"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/date%20math/near/262579647" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/date.20math.html#262579647">(Nov 24 2021 at 12:09)</a>:</h4>
<p>It's not equal (=), but it is equivalent (~), which was already the case.</p>
<p>I think the new table looks like this:</p>



<a name="262579675"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/date%20math/near/262579675" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/date.20math.html#262579675">(Nov 24 2021 at 12:09)</a>:</h4>
<p><a href="/user_uploads/10155/EZHPMUfNnoTUD95nQoE7bs51/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/10155/EZHPMUfNnoTUD95nQoE7bs51/image.png" title="image.png"><img src="/user_uploads/10155/EZHPMUfNnoTUD95nQoE7bs51/image.png"></a></div>



<a name="262579761"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/date%20math/near/262579761" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/date.20math.html#262579761">(Nov 24 2021 at 12:10)</a>:</h4>
<p>As an extension, I guess then that date addition is now also allowable for mo/month, wk/week, etc ?</p>



<a name="263465603"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/date%20math/near/263465603" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/date.20math.html#263465603">(Dec 02 2021 at 16:43)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191328">Ewout Kramer</span> <a href="#narrow/stream/179266-fhirpath/topic/date.20math/near/262579761">said</a>:</p>
<blockquote>
<p>As an extension, I guess then that date addition is now also allowable for mo/month, wk/week, etc ?</p>
</blockquote>
<p>You are referring to a tracker item (<a href="http://jira.hl7.org/browse/FHIR-28144">FHIR-28144</a>) that is in a Triaged state, and not yet approved.  If it is approved (as seems likely, but when is less clear), will that affect N1, or a future release of FHIRPath?  We are trying to correct the fhirpath.js behavior, and I am not sure whether we should follow the current specification or the tracker item.</p>



<a name="263664265"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/date%20math/near/263664265" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/date.20math.html#263664265">(Dec 03 2021 at 22:56)</a>:</h4>
<p>That tracker is a technical correction, so it is auto-approved, I'd follow the tracker on that.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
