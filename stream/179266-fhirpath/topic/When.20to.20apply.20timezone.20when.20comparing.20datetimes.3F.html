---
layout: page
title: "FHIR Chat  · When to apply timezone when comparing datetimes? · fhirpath"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/index.html">fhirpath</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/When.20to.20apply.20timezone.20when.20comparing.20datetimes.3F.html">When to apply timezone when comparing datetimes?</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="170724698"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/When%20to%20apply%20timezone%20when%20comparing%20datetimes%3F/near/170724698" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/When.20to.20apply.20timezone.20when.20comparing.20datetimes.3F.html#170724698">(Jul 12 2019 at 14:08)</a>:</h4>
<p>Should this be true or false?</p>
<div class="codehilite"><pre><span></span>@2018-12-11T11:59-04:00 &lt; @2018-12-11T11-4:30
</pre></div>


<p>(date and hour and the same, minutes and offset are different)<br>
If you apply the rule about limiting the precision first, before the timezone, that becomes:</p>
<div class="codehilite"><pre><span></span>@2018-12-11T11-04:00 &lt; @2018-12-11T11-4:30
</pre></div>


<p>which is true.<br>
But, if you apply the timezone offset first you get:</p>
<div class="codehilite"><pre><span></span>@2018-12-11T15:59Z &lt; @2018-12-11T15:30Z
</pre></div>


<p>which is false.</p>



<a name="170724701"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/When%20to%20apply%20timezone%20when%20comparing%20datetimes%3F/near/170724701" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/When.20to.20apply.20timezone.20when.20comparing.20datetimes.3F.html#170724701">(Jul 12 2019 at 14:08)</a>:</h4>
<p>I think the offset should probably be applied first.</p>



<a name="170724750"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/When%20to%20apply%20timezone%20when%20comparing%20datetimes%3F/near/170724750" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/When.20to.20apply.20timezone.20when.20comparing.20datetimes.3F.html#170724750">(Jul 12 2019 at 14:09)</a>:</h4>
<p>This has a bigger impact if you allow timezone offsets without times, as in:</p>
<div class="codehilite"><pre><span></span>@2018-11-01T-04:00 &lt; @2018T-04:30
</pre></div>



<a name="170740973"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/When%20to%20apply%20timezone%20when%20comparing%20datetimes%3F/near/170740973" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/When.20to.20apply.20timezone.20when.20comparing.20datetimes.3F.html#170740973">(Jul 12 2019 at 17:38)</a>:</h4>
<p>I guess this is really only a question for the STU1 fhirpath.  The recently balloted version says it should return empty if the precisions are not the same.</p>



<a name="170909526"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/When%20to%20apply%20timezone%20when%20comparing%20datetimes%3F/near/170909526" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/When.20to.20apply.20timezone.20when.20comparing.20datetimes.3F.html#170909526">(Jul 15 2019 at 16:35)</a>:</h4>
<p>For relative comparisons, empty would only be returned for differing precisions if that precision was reached in the comparison: <a href="http://hl7.org/fhirpath/2019May/#comparison" target="_blank" title="http://hl7.org/fhirpath/2019May/#comparison">http://hl7.org/fhirpath/2019May/#comparison</a></p>



<a name="170909622"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/When%20to%20apply%20timezone%20when%20comparing%20datetimes%3F/near/170909622" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/When.20to.20apply.20timezone.20when.20comparing.20datetimes.3F.html#170909622">(Jul 15 2019 at 16:36)</a>:</h4>
<p>As far as whether to apply the offset first, normalize the offset prior to performing the comparison. Specifically, "To support comparison of DateTime values, either both values have no timezone offset specified, or both values are converted to a common timezone offset."</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
