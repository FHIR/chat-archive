---
layout: page
title: "FHIR Chat  · Reserved words · fhirpath"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/index.html">fhirpath</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Reserved.20words.html">Reserved words</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="177199304"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Reserved%20words/near/177199304" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Reserved.20words.html#177199304">(Oct 02 2019 at 22:38)</a>:</h4>
<p><a href="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=23073" target="_blank" title="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=23073">GF#23073</a> - I'm interested in comment on this. I agree with the comment in the resolution, but I'm not convinced that it's conformant</p>



<a name="177199573"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Reserved%20words/near/177199573" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Reserved.20words.html#177199573">(Oct 02 2019 at 22:43)</a>:</h4>
<p>I discussed this one with <span class="user-mention" data-user-id="191359">@Bryn Rhodes</span>  and Ewout for a bit after connectathon.  <span class="user-mention" data-user-id="191328">@Ewout Kramer</span> said they had to work around this violation of the fhirpath grammar in their implementation as well.  I think he's out now, but perhaps someone else can fill in for him on that side?</p>



<a name="177200175"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Reserved%20words/near/177200175" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Reserved.20words.html#177200175">(Oct 02 2019 at 22:53)</a>:</h4>
<p>I've also had pretty extensive discussion with <span class="user-mention" data-user-id="192334">@John Timm</span> on this one and here were my notes:</p>
<ol>
<li><a href="http://hl7.org/fhirpath/2018Sep/index.html#keywords" target="_blank" title="http://hl7.org/fhirpath/2018Sep/index.html#keywords">http://hl7.org/fhirpath/2018Sep/index.html#keywords</a> says "In general, keywords within FHIRPath are also considered reserved words, meaning that it is illegal to use them as identifiers. If necessary, identifiers that clash with a reserved word can be quoted."</li>
</ol>



<a name="177200248"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Reserved%20words/near/177200248" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Reserved.20words.html#177200248">(Oct 02 2019 at 22:54)</a>:</h4>
<p>that's not the same as 'must'</p>



<a name="177200778"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Reserved%20words/near/177200778" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Reserved.20words.html#177200778">(Oct 02 2019 at 23:03)</a>:</h4>
<p>was gonna add more points from my notes, but they are sort of contingent on keywords being reserved / illegal as identifiers :-)</p>



<a name="177200788"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Reserved%20words/near/177200788" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Reserved.20words.html#177200788">(Oct 02 2019 at 23:03)</a>:</h4>
<p>agree that language is unusually loose</p>



<a name="177201006"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Reserved%20words/near/177201006" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Reserved.20words.html#177201006">(Oct 02 2019 at 23:06)</a>:</h4>
<blockquote>
<p>In general, keywords within FHIRPath are also considered reserved words, meaning that it is illegal to use them as identifiers.</p>
</blockquote>
<p>does it mean <br>
"keywords are generally considered to be reserved words and therefor it is always illegal to use them as identifiers" <br>
OR<br>
"keywords are usually considered to be reserved words and therefor should be generally avoided as identifiers (but not required to be quoted)"</p>



<a name="177201368"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Reserved%20words/near/177201368" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Reserved.20words.html#177201368">(Oct 02 2019 at 23:11)</a>:</h4>
<p>yes</p>



<a name="177208845"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Reserved%20words/near/177208845" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Reserved.20words.html#177208845">(Oct 03 2019 at 02:00)</a>:</h4>
<p>Yes, that language could definitely be clarified. The intent of that wording was to allow for the fact that the grammar defines the <code>in</code>, <code>is</code>, <code>as</code>, and <code>contains</code> keywords as possible identifiers, specifically because they are also function names and so need to be available as identifiers.</p>



<a name="177246854"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Reserved%20words/near/177246854" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Timm <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Reserved.20words.html#177246854">(Oct 03 2019 at 14:01)</a>:</h4>
<p>+1 to clarify the language. My biggest concern is that there are structure definitions that include constraints with FHIRPath expressions that do not escape some of the problematic keywords (i.e. <code>div</code> and <code>contains</code>). Even if it is a SHOULD and not a SHALL, I think that the base specification should observe some sort of best practice when specifying constraints in a StructureDefinition. Otherwise its left up to the implementer to address. -- especially if the published ANLR grammar is used as a basis for an expression parser. The grammar will not work out-of-the-box unless identifiers that conflict with keywords are delimited.</p>



<a name="177257825"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Reserved%20words/near/177257825" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Reserved.20words.html#177257825">(Oct 03 2019 at 15:50)</a>:</h4>
<p>The grammar explicitly defines <code>contains</code>, <code>in</code>, <code>is</code>, and <code>as</code> as keywords, so they do not need to be escaped in paths. <code>div</code>, <code>mod</code>, <code>and</code>, <code>or</code>, <code>xor</code>, and <code>implies</code> would need to be escaped, but there are no function name clashes with any of those keywords. Are there any element name clashses?</p>



<a name="177257864"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Reserved%20words/near/177257864" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Reserved.20words.html#177257864">(Oct 03 2019 at 15:51)</a>:</h4>
<p>And I just validated to be sure, the constraint expression referenced in the above tracker _does_ parse correctly: <code>ValueSet.expansion.contains.code</code></p>



<a name="177258126"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Reserved%20words/near/177258126" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Reserved.20words.html#177258126">(Oct 03 2019 at 15:54)</a>:</h4>
<blockquote>
<p><code>ValueSet.expansion.contains.code</code></p>
</blockquote>
<p>That also works in fhirpath.js, which generates its parser from the grammar.</p>



<a name="177259995"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Reserved%20words/near/177259995" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Reserved.20words.html#177259995">(Oct 03 2019 at 16:13)</a>:</h4>
<p><a href="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=24895" target="_blank" title="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=24895">GF#24895</a> to clarify the language</p>



<a name="177276579"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Reserved%20words/near/177276579" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Timm <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Reserved.20words.html#177276579">(Oct 03 2019 at 19:11)</a>:</h4>
<p><span class="user-mention" data-user-id="191359">@Bryn Rhodes</span>  Let me clarify my previous comments by providing more detail. I am using an ANLR4 generated Java parser and the expression <code>ValueSet.expansion.contains.code</code> causes issues after it is parsed into an abstract syntax tree. If you process the AST using the generated parse tree visitor, it will incorrectly call <code>visitMembershipExpression(FHIRPathParser.MembershipExpressionContext ctx) </code> This tells me that it thinks that an unescaped <code>contains</code> identifier refers to the contains operator. It's pretty easy to replicate by downloading antlr and running it on fhirpath.g4. I could put together a unit test if you'd like.</p>



<a name="177276964"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Reserved%20words/near/177276964" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Reserved.20words.html#177276964">(Oct 03 2019 at 19:14)</a>:</h4>
<blockquote>
<blockquote>
<p><code>ValueSet.expansion.contains.code</code></p>
</blockquote>
<p>That also works in fhirpath.js, which generates its parser from the grammar.</p>
</blockquote>
<p>I just realized that fhirpath.js is still using the STU1 grammar file.  Perhaps differences between that and the new one account for why the above expression parses correctly for fhirpath.js but not for <span class="user-mention" data-user-id="192334">@John Timm</span>.</p>



<a name="177278376"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Reserved%20words/near/177278376" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Reserved.20words.html#177278376">(Oct 03 2019 at 19:30)</a>:</h4>
<p><span class="user-mention" data-user-id="192334">@John Timm</span> , what version of the FHIRPath grammar file are you reproducing that with?</p>



<a name="177278549"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Reserved%20words/near/177278549" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Reserved.20words.html#177278549">(Oct 03 2019 at 19:32)</a>:</h4>
<p>If you're using this one: <a href="http://hl7.org/fhirpath/grammar.html" target="_blank" title="http://hl7.org/fhirpath/grammar.html">http://hl7.org/fhirpath/grammar.html</a>, agreed, but that has been updated in the latest balloted version: <a href="http://hl7.org/fhirpath/2019May/grammar.html" target="_blank" title="http://hl7.org/fhirpath/2019May/grammar.html">http://hl7.org/fhirpath/2019May/grammar.html</a></p>



<a name="177278581"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Reserved%20words/near/177278581" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Reserved.20words.html#177278581">(Oct 03 2019 at 19:32)</a>:</h4>
<p>Which is currently on track for normative publication.</p>



<a name="177278606"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Reserved%20words/near/177278606" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Timm <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Reserved.20words.html#177278606">(Oct 03 2019 at 19:33)</a>:</h4>
<p><span class="user-mention" data-user-id="191359">@Bryn Rhodes</span> The version I'm using is here:<br>
<a href="http://hl7.org/fhirpath/2018Sep/grammar.html" target="_blank" title="http://hl7.org/fhirpath/2018Sep/grammar.html">http://hl7.org/fhirpath/2018Sep/grammar.html</a></p>



<a name="177278651"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Reserved%20words/near/177278651" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Reserved.20words.html#177278651">(Oct 03 2019 at 19:33)</a>:</h4>
<p>Yeah, that one still has the issue, it was found and addressed as part of the most recent ballot.</p>



<a name="177278703"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Reserved%20words/near/177278703" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Reserved.20words.html#177278703">(Oct 03 2019 at 19:34)</a>:</h4>
<p>Apologies, I should have guessed that was what was going on. :(</p>



<a name="177278708"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Reserved%20words/near/177278708" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Timm <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Reserved.20words.html#177278708">(Oct 03 2019 at 19:34)</a>:</h4>
<p>Okay, what has changed in the latest version that addresses the issue?</p>



<a name="177278728"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Reserved%20words/near/177278728" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Timm <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Reserved.20words.html#177278728">(Oct 03 2019 at 19:34)</a>:</h4>
<p>I will be sure to upgrade ASAP.</p>



<a name="177278752"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Reserved%20words/near/177278752" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Reserved.20words.html#177278752">(Oct 03 2019 at 19:34)</a>:</h4>
<p>The <code>identifier</code> production rule:</p>
<div class="codehilite"><pre><span></span>identifier
        : IDENTIFIER
        | DELIMITEDIDENTIFIER
        | &#39;as&#39;
        | &#39;contains&#39;
        | &#39;in&#39;
        | &#39;is&#39;
        ;
</pre></div>



<a name="177278796"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Reserved%20words/near/177278796" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Reserved.20words.html#177278796">(Oct 03 2019 at 19:35)</a>:</h4>
<p>It specifically calls out <code>contains</code> and <code>in</code>, where in previous versions, we had only called out <code>is</code> and <code>as</code>.</p>



<a name="177278816"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Reserved%20words/near/177278816" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Timm <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Reserved.20words.html#177278816">(Oct 03 2019 at 19:35)</a>:</h4>
<p>Nice</p>



<a name="177278845"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Reserved%20words/near/177278845" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Timm <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Reserved.20words.html#177278845">(Oct 03 2019 at 19:35)</a>:</h4>
<p>I think <code>div</code> has the same problem</p>



<a name="177278933"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Reserved%20words/near/177278933" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Timm <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Reserved.20words.html#177278933">(Oct 03 2019 at 19:36)</a>:</h4>
<p>as <code>div</code> is an operator and used in a Narrative constraint</p>



<a name="177279244"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Reserved%20words/near/177279244" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Reserved.20words.html#177279244">(Oct 03 2019 at 19:39)</a>:</h4>
<p>Ah, because Narrative has a div element.</p>



<a name="177279266"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Reserved%20words/near/177279266" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Reserved.20words.html#177279266">(Oct 03 2019 at 19:39)</a>:</h4>
<p>I wasn't aware of that clash. In that invariant, yes, div would need to be escaped.</p>



<a name="177279680"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Reserved%20words/near/177279680" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Reserved.20words.html#177279680">(Oct 03 2019 at 19:43)</a>:</h4>
<p>Added this as followup to that tracker.</p>



<a name="177280708"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Reserved%20words/near/177280708" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Timm <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Reserved.20words.html#177280708">(Oct 03 2019 at 19:53)</a>:</h4>
<p><span class="user-mention" data-user-id="191359">@Bryn Rhodes</span> Thank you!</p>



<a name="177289794"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Reserved%20words/near/177289794" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Reserved.20words.html#177289794">(Oct 03 2019 at 21:24)</a>:</h4>
<p>which constraint is this? I don't see it?</p>



<a name="177291939"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Reserved%20words/near/177291939" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Reserved.20words.html#177291939">(Oct 03 2019 at 21:50)</a>:</h4>
<p>DomainResource: dom-6</p>



<a name="177292911"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Reserved%20words/near/177292911" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Reserved.20words.html#177292911">(Oct 03 2019 at 22:03)</a>:</h4>
<p>if someone will make a task, I'll fix that one in the R4 technical correction</p>



<a name="177301563"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Reserved%20words/near/177301563" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Timm <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Reserved.20words.html#177301563">(Oct 04 2019 at 00:43)</a>:</h4>
<p>And also txt-1 and txt-2 on Narrative</p>



<a name="177303190"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Reserved%20words/near/177303190" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Reserved.20words.html#177303190">(Oct 04 2019 at 01:21)</a>:</h4>
<p>I'm not seeing that</p>



<a name="177306294"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Reserved%20words/near/177306294" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Reserved.20words.html#177306294">(Oct 04 2019 at 02:47)</a>:</h4>
<p>I updated the proposed resolution to <a href="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=23073" target="_blank" title="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=23073">GF#23073</a> to update constraint dom-6 on DomainResource. Does that work or do you need a separate task?</p>



<a name="177306360"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Reserved%20words/near/177306360" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Reserved.20words.html#177306360">(Oct 04 2019 at 02:49)</a>:</h4>
<p>no that'll be fine</p>



<a name="177339553"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Reserved%20words/near/177339553" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Timm <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Reserved.20words.html#177339553">(Oct 04 2019 at 13:40)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> Taken directly from the Narrative StructureDefinition:</p>
<div class="codehilite"><pre><span></span>            {
                &quot;id&quot;: &quot;Narrative.div&quot;,
                &quot;path&quot;: &quot;Narrative.div&quot;,
                &quot;short&quot;: &quot;Limited xhtml content&quot;,
                &quot;definition&quot;: &quot;The actual narrative content, a stripped down version of XHTML.&quot;,
                &quot;comment&quot;: &quot;The contents of the html element are an XHTML fragment containing only the basic html formatting elements described in chapters 7-11 and 15 of the HTML 4.0 standard, &lt;a&gt; elements (either name or href), images and internally contained stylesheets. The XHTML content SHALL NOT contain a head, a body, external stylesheet references, scripts, forms, base/link/xlink, frames, iframes and objects.&quot;,
                &quot;min&quot;: 1,
                &quot;max&quot;: &quot;1&quot;,
                &quot;base&quot;: {
                    &quot;path&quot;: &quot;Narrative.div&quot;,
                    &quot;min&quot;: 1,
                    &quot;max&quot;: &quot;1&quot;
                },
                &quot;type&quot;: [
                    {
                        &quot;code&quot;: &quot;xhtml&quot;
                    }
                ],
                &quot;constraint&quot;: [
                    {
                        &quot;key&quot;: &quot;txt-1&quot;,
                        &quot;severity&quot;: &quot;error&quot;,
                        &quot;human&quot;: &quot;The narrative SHALL contain only the basic html formatting elements and attributes described in chapters 7-11 (except section 4 of chapter 9) and 15 of the HTML 4.0 standard, &lt;a&gt; elements (either name or href), images and internally contained style attributes&quot;,
                        &quot;expression&quot;: &quot;htmlChecks()&quot;,
                        &quot;xpath&quot;: &quot;not(descendant-or-self::*[not(local-name(.)=(&#39;a&#39;, &#39;abbr&#39;, &#39;acronym&#39;, &#39;b&#39;, &#39;big&#39;, &#39;blockquote&#39;, &#39;br&#39;, &#39;caption&#39;, &#39;cite&#39;, &#39;code&#39;, &#39;col&#39;, &#39;colgroup&#39;, &#39;dd&#39;, &#39;dfn&#39;, &#39;div&#39;, &#39;dl&#39;, &#39;dt&#39;, &#39;em&#39;, &#39;h1&#39;, &#39;h2&#39;, &#39;h3&#39;, &#39;h4&#39;, &#39;h5&#39;, &#39;h6&#39;, &#39;hr&#39;, &#39;i&#39;, &#39;img&#39;, &#39;li&#39;, &#39;ol&#39;, &#39;p&#39;, &#39;pre&#39;, &#39;q&#39;, &#39;samp&#39;, &#39;small&#39;, &#39;span&#39;, &#39;strong&#39;, &#39;sub&#39;, &#39;sup&#39;, &#39;table&#39;, &#39;tbody&#39;, &#39;td&#39;, &#39;tfoot&#39;, &#39;th&#39;, &#39;thead&#39;, &#39;tr&#39;, &#39;tt&#39;, &#39;ul&#39;, &#39;var&#39;))]) and not(descendant-or-self::*/@*[not(name(.)=(&#39;abbr&#39;, &#39;accesskey&#39;, &#39;align&#39;, &#39;alt&#39;, &#39;axis&#39;, &#39;bgcolor&#39;, &#39;border&#39;, &#39;cellhalign&#39;, &#39;cellpadding&#39;, &#39;cellspacing&#39;, &#39;cellvalign&#39;, &#39;char&#39;, &#39;charoff&#39;, &#39;charset&#39;, &#39;cite&#39;, &#39;class&#39;, &#39;colspan&#39;, &#39;compact&#39;, &#39;coords&#39;, &#39;dir&#39;, &#39;frame&#39;, &#39;headers&#39;, &#39;height&#39;, &#39;href&#39;, &#39;hreflang&#39;, &#39;hspace&#39;, &#39;id&#39;, &#39;lang&#39;, &#39;longdesc&#39;, &#39;name&#39;, &#39;nowrap&#39;, &#39;rel&#39;, &#39;rev&#39;, &#39;rowspan&#39;, &#39;rules&#39;, &#39;scope&#39;, &#39;shape&#39;, &#39;span&#39;, &#39;src&#39;, &#39;start&#39;, &#39;style&#39;, &#39;summary&#39;, &#39;tabindex&#39;, &#39;title&#39;, &#39;type&#39;, &#39;valign&#39;, &#39;value&#39;, &#39;vspace&#39;, &#39;width&#39;))])&quot;
                    },
                    {
                        &quot;key&quot;: &quot;txt-2&quot;,
                        &quot;severity&quot;: &quot;error&quot;,
                        &quot;human&quot;: &quot;The narrative SHALL have some non-whitespace content&quot;,
                        &quot;expression&quot;: &quot;htmlChecks()&quot;,
                        &quot;xpath&quot;: &quot;descendant::text()[normalize-space(.)!=&#39;&#39;] or descendant::h:img[@src]&quot;
                    }
                ],
                &quot;isModifier&quot;: false,
                &quot;isSummary&quot;: false,
                &quot;mapping&quot;: [
                    {
                        &quot;identity&quot;: &quot;rim&quot;,
                        &quot;map&quot;: &quot;N/A&quot;
                    }
                ]
            }
        ]
    },
</pre></div>



<a name="177339624"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Reserved%20words/near/177339624" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Reserved.20words.html#177339624">(Oct 04 2019 at 13:41)</a>:</h4>
<p>I'm not seeing div in the fhirpath</p>



<a name="177339718"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Reserved%20words/near/177339718" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Timm <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Reserved.20words.html#177339718">(Oct 04 2019 at 13:42)</a>:</h4>
<p>the path of the constraint is <code>Narrative.div</code> and the constraint is <code>htmlChecks()</code> In order to check this constraint using FHIRPath we either need to first evaluate the path <code>Narrative.div</code> and then <code>htmlChecks()</code> or put the two together into one expression: <code>Narrative.div.htmlChecks()</code></p>



<a name="177339776"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Reserved%20words/near/177339776" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Timm <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Reserved.20words.html#177339776">(Oct 04 2019 at 13:43)</a>:</h4>
<p>Either way, with the existing grammar, the generated parser needs an escaped <code>div</code>. I guess there's nothing really that can be changed in the Structure Definition but it is an implementer pitfall</p>



<a name="177339864"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Reserved%20words/near/177339864" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Reserved.20words.html#177339864">(Oct 04 2019 at 13:44)</a>:</h4>
<p>the path there is the ElementDefinition.path, and it's not a FHIRPath element</p>



<a name="177339933"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Reserved%20words/near/177339933" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Timm <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Reserved.20words.html#177339933">(Oct 04 2019 at 13:45)</a>:</h4>
<p>Right. Understood. I'm coming at this from the perspective of what actually has to be done in a real implementation. and it is not immediately obvious to an implementer that div actually <em>does</em> need to be escaped in this particular case. So I think the documentation fix will help there.</p>



<a name="177577525"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Reserved%20words/near/177577525" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Reserved.20words.html#177577525">(Oct 08 2019 at 01:50)</a>:</h4>
<blockquote>
<p><span class="user-mention silent" data-user-id="191359">Bryn Rhodes</span> The version I'm using is here:<br>
<a href="http://hl7.org/fhirpath/2018Sep/grammar.html" target="_blank" title="http://hl7.org/fhirpath/2018Sep/grammar.html">http://hl7.org/fhirpath/2018Sep/grammar.html</a></p>
</blockquote>
<p>Its worth mentioning that this is the version of FHIRPath pointed to by FHIR R4.   Is it possible to update <a href="http://hl7.org/fhir/R4B/fhirpath.html" target="_blank" title="http://hl7.org/fhir/R4B/fhirpath.html">http://hl7.org/fhir/R4B/fhirpath.html</a> (and <a href="https://build.fhir.org/fhirpath.html" target="_blank" title="https://build.fhir.org/fhirpath.html">https://build.fhir.org/fhirpath.html</a>) to point at a more recent version of FHIRPath?  Is there already a tracker for that?  Should we open one?</p>



<a name="177580960"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Reserved%20words/near/177580960" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Reserved.20words.html#177580960">(Oct 08 2019 at 03:19)</a>:</h4>
<p>it will automatically update to the latest. Neatly, it looks like this will align with the technical correction</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
