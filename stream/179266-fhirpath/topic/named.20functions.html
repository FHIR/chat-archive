---
layout: page
title: "FHIR Chat  · named functions · fhirpath"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/index.html">fhirpath</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/named.20functions.html">named functions</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153951756"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/named%20functions/near/153951756" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/named.20functions.html#153951756">(Apr 11 2018 at 06:13)</a>:</h4>
<p>I've been wondering whether we need to create the facility to define named functions to allow for query re-use...?</p>



<a name="153952246"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/named%20functions/near/153952246" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/named.20functions.html#153952246">(Apr 13 2018 at 14:59)</a>:</h4>
<p>Yes, I have been thinking about that - and the .NET fhirpath engine internally could handle custom functions. We don't have a syntax for it though.  Would we want to parameterize the queries?</p>



<a name="153952315"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/named%20functions/near/153952315" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/named.20functions.html#153952315">(Apr 13 2018 at 20:44)</a>:</h4>
<p>don't know, probably</p>



<a name="153952770"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/named%20functions/near/153952770" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/named.20functions.html#153952770">(Apr 17 2018 at 22:29)</a>:</h4>
<p>The dotnet one does handle custom functions, I've added a few for my own use in my server.</p>



<a name="153952771"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/named%20functions/near/153952771" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/named.20functions.html#153952771">(Apr 17 2018 at 22:30)</a>:</h4>
<p>(and the fhirpath tester)<br>
Without needing to change the actual engine too... thanks Ewout!</p>



<a name="153952775"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/named%20functions/near/153952775" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/named.20functions.html#153952775">(Apr 17 2018 at 22:40)</a>:</h4>
<p>so have I. But there needs to be a fhirpath syntax to do it</p>



<a name="153952779"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/named%20functions/near/153952779" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/named.20functions.html#153952779">(Apr 17 2018 at 22:43)</a>:</h4>
<p>really?<br>
In the dotnet one it behaves as though its a native part of the grammar.</p>



<a name="153952781"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/named%20functions/near/153952781" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/named.20functions.html#153952781">(Apr 17 2018 at 22:43)</a>:</h4>
<p>We have access to add the function into the symbol table.</p>



<a name="153952782"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/named%20functions/near/153952782" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/named.20functions.html#153952782">(Apr 17 2018 at 22:44)</a>:</h4>
<p>but can you define a function without access to the code?</p>



<a name="153952783"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/named%20functions/near/153952783" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/named.20functions.html#153952783">(Apr 17 2018 at 22:45)</a>:</h4>
<p>(pseudocode) SymbolTable.Add("LuhnTest", (a) =&gt; { return StaticFunctons.LuhnTest(a);});</p>



<a name="153952785"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/named%20functions/near/153952785" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/named.20functions.html#153952785">(Apr 17 2018 at 22:45)</a>:</h4>
<p>Yes, have access to the symbol table to add the functionname, and callback for execution</p>



<a name="153952788"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/named%20functions/near/153952788" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/named.20functions.html#153952788">(Apr 17 2018 at 22:46)</a>:</h4>
<p>but you can only do that in code - that's my point. There should be a way to do in fhirpath syntax when defining invariants etc</p>



<a name="153952789"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/named%20functions/near/153952789" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/named.20functions.html#153952789">(Apr 17 2018 at 22:47)</a>:</h4>
<p>The actual code looks like this</p>
<div class="codehilite"><pre><span></span>// Custom LUHN Checksum algorithm
// https://rosettacode.org/wiki/Luhn_test_of_credit_card_numbers#C.23
Hl7.FhirPath.FhirPathCompiler.DefaultSymbolTable.Add(&quot;LuhnTest&quot;, (string str) =&gt;
{
        return str.LuhnCheck();
});
</pre></div>



<a name="153952790"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/named%20functions/near/153952790" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/named.20functions.html#153952790">(Apr 17 2018 at 22:47)</a>:</h4>
<p>Yeah, in code, just not the fhirpath engine code.</p>



<a name="153952793"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/named%20functions/near/153952793" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/named.20functions.html#153952793">(Apr 17 2018 at 22:48)</a>:</h4>
<p>Do you mean define a custom function using fhirpath as its definition?</p>



<a name="153952794"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/named%20functions/near/153952794" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/named.20functions.html#153952794">(Apr 17 2018 at 22:48)</a>:</h4>
<p>(or similar)</p>



<a name="153953496"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/named%20functions/near/153953496" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/named.20functions.html#153953496">(Apr 22 2018 at 18:50)</a>:</h4>
<p>To define functions, you need libraries, right?</p>



<a name="153953497"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/named%20functions/near/153953497" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/named.20functions.html#153953497">(Apr 22 2018 at 18:51)</a>:</h4>
<p>CQL supports this already, would it work to use CQL as the container for FHIRPath function definitions?</p>



<a name="153953501"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/named%20functions/near/153953501" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/named.20functions.html#153953501">(Apr 23 2018 at 00:30)</a>:</h4>
<p>smells too heavy weight to me</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
