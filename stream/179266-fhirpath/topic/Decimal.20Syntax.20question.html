---
layout: page
title: "FHIR Chat  · Decimal Syntax question · fhirpath"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/index.html">fhirpath</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Decimal.20Syntax.20question.html">Decimal Syntax question</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="172000658"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Decimal%20Syntax%20question/near/172000658" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Decimal.20Syntax.20question.html#172000658">(Jul 30 2019 at 02:49)</a>:</h4>
<p><span class="user-mention" data-user-id="191359">@Bryn Rhodes</span> while I'm noodling about decimals.... there's a problem in FHIRPath. FHIR allows the exponent representation, but FHIRPath doesn't. So what should convertsToDecimal() / toDecimal() do? In my implementation, they accept exponents, since that might come from the resource....</p>



<a name="172000664"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Decimal%20Syntax%20question/near/172000664" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Decimal.20Syntax.20question.html#172000664">(Jul 30 2019 at 02:49)</a>:</h4>
<p>but that is not conformant.</p>



<a name="172000987"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Decimal%20Syntax%20question/near/172000987" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Decimal.20Syntax.20question.html#172000987">(Jul 30 2019 at 02:58)</a>:</h4>
<p>Yeah, that's a good question. There's an implication that not all systems will return the same result for the same values already (given variable support for decimal precision), and it would be a backwards compatible change to say that in some future version, sytems could support exponent representation.</p>



<a name="172000991"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Decimal%20Syntax%20question/near/172000991" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Decimal.20Syntax.20question.html#172000991">(Jul 30 2019 at 02:58)</a>:</h4>
<p>What do other implementations do? <span class="user-mention" data-user-id="191328">@Ewout Kramer</span> , <span class="user-mention" data-user-id="191367">@Brian Postlethwaite</span> ?</p>



<a name="172001067"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Decimal%20Syntax%20question/near/172001067" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Decimal.20Syntax.20question.html#172001067">(Jul 30 2019 at 03:00)</a>:</h4>
<p>note that I still only accept non-exponent form in the FHIRPath expressions themselves</p>



<a name="172001082"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Decimal%20Syntax%20question/near/172001082" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Decimal.20Syntax.20question.html#172001082">(Jul 30 2019 at 03:00)</a>:</h4>
<p>Funny enough, the Java-based CQL engine behaves exactly the same way :)</p>



<a name="172001096"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Decimal%20Syntax%20question/near/172001096" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Decimal.20Syntax.20question.html#172001096">(Jul 30 2019 at 03:01)</a>:</h4>
<p><span class="user-mention" data-user-id="191469">@Chris Moesel</span> , what does the JavaScript CQL engine do with <code>define Test: ToDecimal('1.00E+00')</code>?</p>



<a name="172001113"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Decimal%20Syntax%20question/near/172001113" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Decimal.20Syntax.20question.html#172001113">(Jul 30 2019 at 03:01)</a>:</h4>
<p>Yes, the literal still doesn't support exponents.</p>



<a name="172001580"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Decimal%20Syntax%20question/near/172001580" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Decimal.20Syntax.20question.html#172001580">(Jul 30 2019 at 03:13)</a>:</h4>
<p><span class="user-mention" data-user-id="191359">@Bryn Rhodes</span> -- the JavaScript CQL engine returns back the <code>Number</code> <code>1</code> for that.  We pass the string directly into JavaScript's <code>parseFloat</code> function then intentionally limit precision to 8 decimal places.</p>



<a name="172220540"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Decimal%20Syntax%20question/near/172220540" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Decimal.20Syntax.20question.html#172220540">(Aug 01 2019 at 13:37)</a>:</h4>
<p>Yes, I noticed this too. The FhirPath spec says there are so many issues around exponential notation that it's forbidden.  This is only one of the subtle differences between these languages (and CQL).  I recently discussed the subtle differences between time/date/dateTime too (allow timezone on time?).  So, just like Grahame I have now decided to accept everything "internally" in the part of the API that is model independent, and then there can be language-specific rules. E.g.  I can forbid exponential notation in the lexer for FP, even though the engine internally could perfectly well handle it, and so is able to work with decimals WITH exponentials coming in from the FHIR model. On the other hand, the parsers for FHIR forbid timezones on times, which I can still allow in parsers for CQL.  (though Bryn told me work is underway to unify this).</p>



<a name="172220850"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Decimal%20Syntax%20question/near/172220850" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Decimal.20Syntax.20question.html#172220850">(Aug 01 2019 at 13:40)</a>:</h4>
<p>Many of these questions have surfaced while working on the mapping engine.  We've fully integrated FP into the mapping language engine, but if FHIR and FP have subtle different rules for say literals, you run the risk of allowing exponential notation in, say, the arguments to function calls in the mapping language, while 10 characters to the left, in a 'where' statement you are not allowed to use it.  Not very user-friendly.</p>



<a name="172221178"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Decimal%20Syntax%20question/near/172221178" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Decimal.20Syntax.20question.html#172221178">(Aug 01 2019 at 13:44)</a>:</h4>
<p>I checked my implementation.  It will accept exponential notation while parsing FHIR, but now allow exponential notation when using convertsToDecimal().</p>



<a name="172221730"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Decimal%20Syntax%20question/near/172221730" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Decimal.20Syntax.20question.html#172221730">(Aug 01 2019 at 13:49)</a>:</h4>
<p>While we're on the subject, is the 'T' part of the DateTime part of the literal, or part of the actual value?   Is  @2013-04TZ.toString() = '2013-04Z' or '2013-04TZ' ?</p>



<a name="172222087"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Decimal%20Syntax%20question/near/172222087" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Decimal.20Syntax.20question.html#172222087">(Aug 01 2019 at 13:53)</a>:</h4>
<p>(we know the '@' is just a part of the literal notation in the lexer, is the same the case with 'T'.   E.g. compare to Java/C#:  (1.2f).ToString() = '1.2', not '1.2f'.)</p>



<a name="172222440"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Decimal%20Syntax%20question/near/172222440" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Decimal.20Syntax.20question.html#172222440">(Aug 01 2019 at 13:56)</a>:</h4>
<blockquote>
<p>While we're on the subject, is the 'T' part of the DateTime part of the literal, or part of the actual value?   Is  @2013-04TZ.toString() = '2013-04Z' or '2013-04TZ' ?</p>
</blockquote>
<p>T is a part of the ISO-8601 <a href="https://en.wikipedia.org/wiki/ISO_8601" target="_blank" title="https://en.wikipedia.org/wiki/ISO_8601">format</a> e.g. , "2019-08-01T11:33:42Z".  I don't know what ISO-8601 would do with a timezone that didn't have a time.  (Does FHIRPath allow that?)</p>



<a name="172222448"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Decimal%20Syntax%20question/near/172222448" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Decimal.20Syntax.20question.html#172222448">(Aug 01 2019 at 13:56)</a>:</h4>
<p>Does toDateTime() require the 'T'?  So is '2013-04'.toDateTime() valid?</p>



<a name="172222783"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Decimal%20Syntax%20question/near/172222783" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Decimal.20Syntax.20question.html#172222783">(Aug 01 2019 at 13:59)</a>:</h4>
<div class="codehilite"><pre><span></span> I don&#39;t know what ISO-8601 would do with a timezone that didn&#39;t have a time.  (Does FHIRPath allow that?)
</pre></div>


<p>Yes, the grammar allows it, but must admit that's probably not the final word on it - the spec is a bit unclear about it.</p>



<a name="172222864"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Decimal%20Syntax%20question/near/172222864" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Decimal.20Syntax.20question.html#172222864">(Aug 01 2019 at 14:00)</a>:</h4>
<hr>



<a name="172223244"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Decimal%20Syntax%20question/near/172223244" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Decimal.20Syntax.20question.html#172223244">(Aug 01 2019 at 14:03)</a>:</h4>
<p>It's actually pretty explicit in the grammar:</p>
<div class="codehilite"><pre><span></span>DATETIME
        : &#39;@&#39;
            [0-9][0-9][0-9][0-9] // year
            (
                (
                    &#39;-&#39;[0-9][0-9] // month
                    (
                        (
                            &#39;-&#39;[0-9][0-9] // day
                            (&#39;T&#39; TIMEFORMAT?)?
                        )
                        | &#39;T&#39;
                    )?
                )
                | &#39;T&#39;
            )?
            (&#39;Z&#39; | (&#39;+&#39; | &#39;-&#39;) [0-9][0-9]&#39;:&#39;[0-9][0-9])? // timezone offset
        ;
</pre></div>


<p>The Z + timezone part could have been placed explicitly after the TIMEFORMAT pattern, but instead, it is at the bottom, allowing it after every form.</p>



<a name="172223508"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Decimal%20Syntax%20question/near/172223508" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Decimal.20Syntax.20question.html#172223508">(Aug 01 2019 at 14:06)</a>:</h4>
<p>See <a href="#narrow/stream/179266-fhirpath/topic/DateTime.20with.20timezone.20but.20without.20time.3F" title="#narrow/stream/179266-fhirpath/topic/DateTime.20with.20timezone.20but.20without.20time.3F">https://chat.fhir.org/#narrow/stream/179266-fhirpath/topic/DateTime.20with.20timezone.20but.20without.20time.3F</a> .  (I had forgotten about that thread.) I think the consensus was (at least in that thread) that even though the grammar allowed it, it was not intended to be allowed in the spec.</p>



<a name="172224628"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Decimal%20Syntax%20question/near/172224628" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Decimal.20Syntax.20question.html#172224628">(Aug 01 2019 at 14:18)</a>:</h4>
<p>Well, I could accept that if it made the grammar too complex (like trying to specify a date regex that does not allow month 13), but here in this grammar it is so explicitly <em>allowed</em>....</p>



<a name="172224703"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Decimal%20Syntax%20question/near/172224703" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Decimal.20Syntax.20question.html#172224703">(Aug 01 2019 at 14:20)</a>:</h4>
<p>Yeah, I did not allow it back then, but I am busy refreshing my implementation, and just took the ANTLR grammar in the latest normative for granted, so I do support it now.</p>



<a name="172224796"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Decimal%20Syntax%20question/near/172224796" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Decimal.20Syntax.20question.html#172224796">(Aug 01 2019 at 14:20)</a>:</h4>
<p>Well, it's easy to disable again - let's see what the consensus is...</p>



<a name="172259537"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Decimal%20Syntax%20question/near/172259537" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Decimal.20Syntax.20question.html#172259537">(Aug 01 2019 at 20:41)</a>:</h4>
<p>Yes, the fact that the grammar allows it is unintentional. The change to the spec was to remove the ability to represent Timezone offset on Date and Time values, on the grounds that specifying a Timezone offset only makes sense for a full DateTime value (which is what FHIR does).</p>



<a name="172259710"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Decimal%20Syntax%20question/near/172259710" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Decimal.20Syntax.20question.html#172259710">(Aug 01 2019 at 20:43)</a>:</h4>
<p>So the consensus on that thread was that a tracker should be submitted to correct the FHIRPath grammar to disallow the T for Date and Time (it should only be allowed for DateTime). And we asked for a survey of implementations to try to determine if this was a misalignment between the spec and what implementations were actually doing (so we could apply it as a clarification on the spec).</p>



<a name="172260142"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Decimal%20Syntax%20question/near/172260142" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Decimal.20Syntax.20question.html#172260142">(Aug 01 2019 at 20:49)</a>:</h4>
<p>Does <a href="https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=22818" target="_blank" title="https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=22818">GF#22818</a> meet that purpose?</p>



<a name="172261015"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Decimal%20Syntax%20question/near/172261015" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Decimal.20Syntax.20question.html#172261015">(Aug 01 2019 at 20:59)</a>:</h4>
<p><span class="user-mention" data-user-id="195344">@Paul Lynch</span>, I think so, I put a comment on there that we should align the grammar with implementations and the intent of the change, to allow a Timezone only on DateTime literals, not on a Date or a Time.</p>



<a name="173550755"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Decimal%20Syntax%20question/near/173550755" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Decimal.20Syntax.20question.html#173550755">(Aug 19 2019 at 15:02)</a>:</h4>
<p>I have found another slight difference between decimals in FP and FHIR:  the grammar for FhirPath allows leading zeroes, while FHIR does not.  More indirectly, in FhirPath there is a unary sign operation, so you can say both -4 and +5, but the last is not allowed in the serialization for FHIR.</p>



<a name="173565662"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Decimal%20Syntax%20question/near/173565662" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Decimal.20Syntax.20question.html#173565662">(Aug 19 2019 at 18:12)</a>:</h4>
<p>In FHIRPath though, the unary sign is part of the parser, not the decimal literal, right?</p>



<a name="173565697"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Decimal%20Syntax%20question/near/173565697" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Decimal.20Syntax.20question.html#173565697">(Aug 19 2019 at 18:12)</a>:</h4>
<p>So there are two differences, FHIR allows a minus sign but not leading zeroes, FHIRPath allows leading zeros, but not a minus sign.</p>



<a name="173565740"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Decimal%20Syntax%20question/near/173565740" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Decimal.20Syntax.20question.html#173565740">(Aug 19 2019 at 18:13)</a>:</h4>
<p>But that's really only a difference in the representation, the actual values allowed are the same, yes?</p>



<a name="173570969"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Decimal%20Syntax%20question/near/173570969" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Decimal.20Syntax.20question.html#173570969">(Aug 19 2019 at 19:19)</a>:</h4>
<p>Yes! It's just very confusing if you're a user of both fhir and fhirpath (which a lot of people are).  And for parser writers like me that like to reuse code to get this stuff consistent, it's also not optimal, potentially having separate but almost identical code paths for fhirpath, fhir, mapping language and CQL for parsing basic stuff like integers.</p>



<a name="173571658"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Decimal%20Syntax%20question/near/173571658" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Decimal.20Syntax.20question.html#173571658">(Aug 19 2019 at 19:28)</a>:</h4>
<p>there's only 2 possibilites, right?</p>



<a name="173573522"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Decimal%20Syntax%20question/near/173573522" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Decimal.20Syntax.20question.html#173573522">(Aug 19 2019 at 19:52)</a>:</h4>
<p>If you're only parsing then can't you just support the superset?  E.g., supporting <em>optional</em> leading zeros isn't going to negatively impact parsing FHIR decimals (without leading zeros) or FHIRPath (with leading zeros).  That said, if you're wanting to validate or serialize values then it's not as simple (since FP requires a leading zero for values &gt;= 0.0 and &lt; 1.0).</p>



<a name="173573683"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Decimal%20Syntax%20question/near/173573683" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Decimal.20Syntax.20question.html#173573683">(Aug 19 2019 at 19:54)</a>:</h4>
<p>if you're like me and Ewout, writing a validator</p>



<a name="173573688"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Decimal%20Syntax%20question/near/173573688" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Decimal.20Syntax.20question.html#173573688">(Aug 19 2019 at 19:54)</a>:</h4>
<p>otherwise you're correct</p>



<a name="173573739"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Decimal%20Syntax%20question/near/173573739" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Decimal.20Syntax.20question.html#173573739">(Aug 19 2019 at 19:55)</a>:</h4>
<p>but it's ok if writing a validator is a sucky job</p>



<a name="173673662"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Decimal%20Syntax%20question/near/173673662" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Decimal.20Syntax.20question.html#173673662">(Aug 20 2019 at 16:38)</a>:</h4>
<p>Yeah - I actually did that until now where the dialects differ.  I accept the superset, and then have additional specific validation in the FHIR parsers.  It's not that it cannot be done, but we're going to keep things simple, right?</p>



<a name="173673741"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Decimal%20Syntax%20question/near/173673741" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Decimal.20Syntax.20question.html#173673741">(Aug 20 2019 at 16:39)</a>:</h4>
<p>It's also confusing for fhirpath authors that are also creating FHIR instance examples, they need to be aware of these subtle differences.</p>



<a name="173696114"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Decimal%20Syntax%20question/near/173696114" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Decimal.20Syntax.20question.html#173696114">(Aug 20 2019 at 21:05)</a>:</h4>
<p>that small population will depend on a validator anyway</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
