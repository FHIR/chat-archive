---
layout: page
title: "FHIR Chat  · IsDistinct · fhirpath"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/index.html">fhirpath</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/IsDistinct.html">IsDistinct</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153987492"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/IsDistinct/near/153987492" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/IsDistinct.html#153987492">(Aug 16 2018 at 10:29)</a>:</h4>
<p><a href="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=17275" target="_blank" title="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=17275">GF#17275</a> is actually a bug in my FHIRPath somewhere. Maybe in my head... </p>
<div class="codehilite"><pre><span></span>(concept.code | descendants().concept.code).isDistinct()
</pre></div>



<a name="153987493"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/IsDistinct/near/153987493" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/IsDistinct.html#153987493">(Aug 16 2018 at 10:29)</a>:</h4>
<p>because, of course (!), | is a set union, and the outcomes are guaranteed to be unique....</p>



<a name="153987494"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/IsDistinct/near/153987494" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/IsDistinct.html#153987494">(Aug 16 2018 at 10:30)</a>:</h4>
<p>so it should be </p>
<div class="codehilite"><pre><span></span>concept.code.combine(descendants().concept.code).isDistinct()
</pre></div>



<a name="153987938"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/IsDistinct/near/153987938" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/IsDistinct.html#153987938">(Aug 17 2018 at 00:28)</a>:</h4>
<p>Yes, one of my favourite dislikes ;)</p>



<a name="153987954"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/IsDistinct/near/153987954" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/IsDistinct.html#153987954">(Aug 17 2018 at 00:42)</a>:</h4>
<p>I still don't like the syntax on the combine operation. It just feels weird to me, the scope of the collection inside the call, isn't the thing to the left of the function, it is its parent. (descendants() isn't called on the items of code, its called on the items of concept)</p>



<a name="153987955"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/IsDistinct/near/153987955" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/IsDistinct.html#153987955">(Aug 17 2018 at 00:45)</a>:</h4>
<p>It is a bit strange that it's not like other iterators in that regard (like .select() and .where()) and there's no visual cue in the syntax to say that.</p>



<a name="153987956"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/IsDistinct/near/153987956" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/IsDistinct.html#153987956">(Aug 17 2018 at 00:45)</a>:</h4>
<p>Are these the same thing (ignoring the isdistinct part)?<br>
Patient.name.select(given | family)<br>
Patient.name.select(given.combine(family))</p>



<a name="153987957"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/IsDistinct/near/153987957" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/IsDistinct.html#153987957">(Aug 17 2018 at 00:46)</a>:</h4>
<p>the . operator isn't applying to the property</p>



<a name="153987959"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/IsDistinct/near/153987959" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/IsDistinct.html#153987959">(Aug 17 2018 at 00:46)</a>:</h4>
<p>I know its too late, wish I'd complained earlier, and been in the ballot pool - Thanks HL7Au</p>



<a name="153987961"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/IsDistinct/near/153987961" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/IsDistinct.html#153987961">(Aug 17 2018 at 00:47)</a>:</h4>
<p>Yeah, those would be the same (minus the distinct), because the identifiers within the select will both resolve on the currently iterated name element.</p>



<a name="153987963"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/IsDistinct/near/153987963" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/IsDistinct.html#153987963">(Aug 17 2018 at 00:48)</a>:</h4>
<p>Patient.name.select(given.combine($this.family))</p>



<a name="153987966"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/IsDistinct/near/153987966" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/IsDistinct.html#153987966">(Aug 17 2018 at 00:49)</a>:</h4>
<p>Yeah, that at least gives a visual cue</p>



<a name="153987967"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/IsDistinct/near/153987967" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/IsDistinct.html#153987967">(Aug 17 2018 at 00:49)</a>:</h4>
<p>Is it the only function where the $this isn't the thing on the left of the . ?</p>



<a name="153987968"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/IsDistinct/near/153987968" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/IsDistinct.html#153987968">(Aug 17 2018 at 00:49)</a>:</h4>
<p>In this example the $this is name, and not given</p>



<a name="153987974"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/IsDistinct/near/153987974" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/IsDistinct.html#153987974">(Aug 17 2018 at 00:52)</a>:</h4>
<p>No, <code>.subsetOf()</code>, <code>.supersetOf()</code>, <code>.intersect()</code>, <code>.exclude()</code>, <code>.union()</code> (synonym for <code>|</code>), and all of the singleton functions like <code>.indexOf()</code>, <code>.startsWith</code>, etc.</p>



<a name="153987976"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/IsDistinct/near/153987976" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/IsDistinct.html#153987976">(Aug 17 2018 at 00:53)</a>:</h4>
<p>By number, functions that introduce an iterating context are actually the minority.</p>



<a name="153987978"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/IsDistinct/near/153987978" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/IsDistinct.html#153987978">(Aug 17 2018 at 00:56)</a>:</h4>
<p>Thanks Bryn, I'm going to have to go investigate how Ewout has done this then!</p>



<a name="153990783"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/IsDistinct/near/153990783" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/IsDistinct.html#153990783">(Aug 24 2018 at 15:59)</a>:</h4>
<p>Coincidentally, I am trying to implement subsetOf today.  <span class="user-mention" data-user-id="191359">@Bryn Rhodes</span>  Does "$this" really apply in subsetOf?  The documentation under "5. Functions" says, "If the function takes an expression as a parameter.... These expressions may refer to the special $this element...."  The function "subsetOf" is not one of those listed as taking an "expression", but rather the documentation (at <a href="http://hl7.org/fhirpath/#existence" target="_blank" title="http://hl7.org/fhirpath/#existence">http://hl7.org/fhirpath/#existence</a>) says it takes a "collection".</p>



<a name="153990821"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/IsDistinct/near/153990821" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/IsDistinct.html#153990821">(Aug 24 2018 at 18:57)</a>:</h4>
<p>You're right, <code>$this</code> does not apply in a <code>.subsetOf()</code>; the list I provided above is operators where <code>$this</code> does not apply (because they're not "iterators").</p>



<a name="153990822"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/IsDistinct/near/153990822" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/IsDistinct.html#153990822">(Aug 24 2018 at 18:59)</a>:</h4>
<p><span class="user-mention" data-user-id="191367">@Brian Postlethwaite</span> I don't think<br>
Patient.name.select(given.combine(family))<br>
is correct syntax.  The "select" function expects "projection: expression" as an argument, but you are passing it the result of "combine", which is a collection.</p>



<a name="153990824"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/IsDistinct/near/153990824" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/IsDistinct.html#153990824">(Aug 24 2018 at 19:02)</a>:</h4>
<p>The entire argument <code>given.combine(family)</code> is the "expression" argument.</p>



<a name="153990825"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/IsDistinct/near/153990825" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/IsDistinct.html#153990825">(Aug 24 2018 at 19:02)</a>:</h4>
<p>So that expression is evaluated for every member of the <code>Patient.name</code> collection.</p>



<a name="153990831"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/IsDistinct/near/153990831" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/IsDistinct.html#153990831">(Aug 24 2018 at 19:28)</a>:</h4>
<p>Okay, that makes sense.  Thanks.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
