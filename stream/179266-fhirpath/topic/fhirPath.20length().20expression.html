---
layout: page
title: "FHIR Chat  · fhirPath length() expression · fhirpath"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/index.html">fhirpath</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/fhirPath.20length().20expression.html">fhirPath length() expression</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="270107988"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/fhirPath%20length%28%29%20expression/near/270107988" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David deRoode <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/fhirPath.20length().20expression.html#270107988">(Jan 31 2022 at 21:28)</a>:</h4>
<p>Attempting to craft an expression stating effectiveDateTime shall be greater than a 9 character string. Have tried variations of 'DiagnosticReport.effective.ofType(DateTime).length()&gt;9' and 'DiagnosticReport.effectiveDateTime.length()&gt;9' with no luck. Any hints are much appreciated</p>



<a name="270111605"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/fhirPath%20length%28%29%20expression/near/270111605" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/fhirPath.20length().20expression.html#270111605">(Jan 31 2022 at 21:56)</a>:</h4>
<p><span class="user-mention" data-user-id="191359">@Bryn Rhodes</span> <span class="user-mention" data-user-id="195344">@Paul Lynch</span></p>



<a name="270151675"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/fhirPath%20length%28%29%20expression/near/270151675" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/fhirPath.20length().20expression.html#270151675">(Feb 01 2022 at 04:37)</a>:</h4>
<p>effective.toString().Length()</p>



<a name="270278815"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/fhirPath%20length%28%29%20expression/near/270278815" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David deRoode <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/fhirPath.20length().20expression.html#270278815">(Feb 01 2022 at 20:20)</a>:</h4>
<p>Thanks Brian. For StructureDefinition:<br>
         &lt;element id="DiagnosticReport.effective[x]"&gt;<br>
            &lt;path value="DiagnosticReport.effective[x]"/&gt;<br>
            &lt;constraint&gt;<br>
                &lt;key value="0o95dEq9"/&gt;<br>
                &lt;severity value="error"/&gt;<br>
                &lt;human value="effectiveDateTime SHALL include the month and day"/&gt;<br>
                &lt;expression value="DiagnosticReport.effective.toString().Length()&gt;9"/&gt;<br>
            &lt;/constraint&gt;<br>
        &lt;/element&gt;...</p>
<p>I'm still seeing:<br>
&lt;issue&gt;<br>
        &lt;severity value="error"/&gt;<br>
        &lt;code value="processing"/&gt;<br>
        &lt;diagnostics value="0o95dEq9: 'effectiveDateTime SHALL include the month and day' Rule 'effectiveDateTime SHALL include the month and day' Failed"/&gt;<br>
        &lt;location value="DiagnosticReport.effective.ofType(dateTime)"/&gt;<br>
        &lt;location value="Line 1, Col 1467"/&gt;<br>
    &lt;/issue&gt;</p>
<p>In response to /$validate an example with:  &lt;effectiveDateTime value="2021-01-01T21:39:30.000Z"/&gt;</p>



<a name="270289725"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/fhirPath%20length%28%29%20expression/near/270289725" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/fhirPath.20length().20expression.html#270289725">(Feb 01 2022 at 21:26)</a>:</h4>
<p>When you have the constraint at the element level you don't spcifiy the entire path.</p>



<a name="270289843"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/fhirPath%20length%28%29%20expression/near/270289843" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/fhirPath.20length().20expression.html#270289843">(Feb 01 2022 at 21:27)</a>:</h4>
<p>(if you put the constraint at the root, then the full path)</p>



<a name="270327481"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/fhirPath%20length%28%29%20expression/near/270327481" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David deRoode <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/fhirPath.20length().20expression.html#270327481">(Feb 02 2022 at 03:16)</a>:</h4>
<p>ah, makes sense- thanks for the help!</p>



<a name="270753221"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/fhirPath%20length%28%29%20expression/near/270753221" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David deRoode <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/fhirPath.20length().20expression.html#270753221">(Feb 04 2022 at 18:24)</a>:</h4>
<p>Just to share the working expression for this: got it to work with the expression in the root of the resource and included the full path. Also, lowercase 'l' in .length():<br>
 &lt;element id="DiagnosticReport"&gt;<br>
            &lt;path value="DiagnosticReport"/&gt;<br>
              &lt;constraint&gt;<br>
                &lt;key value="0o95dEq9"/&gt;<br>
                &lt;severity value="error"/&gt;<br>
                &lt;human value="effectiveDateTime SHALL include the month and day"/&gt;<br>
                &lt;expression value="effective.toString().length()&gt;9"/&gt;<br>
            &lt;/constraint&gt;</p>



<a name="270769231"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/fhirPath%20length%28%29%20expression/near/270769231" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/fhirPath.20length().20expression.html#270769231">(Feb 04 2022 at 20:35)</a>:</h4>
<p>Just a note that this expression would make effective mandatory too.<br>
If that's not intended, move the constraint into the effective element and remove it from the expression, making it <code>toString().length() &gt;9</code><br>
Or in the constraint put effective.exists() implies effective.toString....</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
