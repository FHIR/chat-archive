---
layout: page
title: "FHIR Chat  · mapping revisions of FHIRPATH to FHIR format · fhirpath"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/index.html">fhirpath</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/mapping.20revisions.20of.20FHIRPATH.20to.20FHIR.20format.html">mapping revisions of FHIRPATH to FHIR format</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="200479723"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/mapping%20revisions%20of%20FHIRPATH%20to%20FHIR%20format/near/200479723" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Harsch <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/mapping.20revisions.20of.20FHIRPATH.20to.20FHIR.20format.html#200479723">(Jun 10 2020 at 21:32)</a>:</h4>
<p>Hello, I am new to this chat server and to FHIR and FHIRPATH, hopefully my noob questions are ok here.  I'm curious how the different versions of FHIRPATH map to the different versions of FHIR format.  For instance would FHIRPATH STU1 support R4 FHIR?  would FHIRPATH N1 support FHIR DSTU2 ?   thanks in advance.</p>



<a name="200480425"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/mapping%20revisions%20of%20FHIRPATH%20to%20FHIR%20format/near/200480425" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/mapping.20revisions.20of.20FHIRPATH.20to.20FHIR.20format.html#200480425">(Jun 10 2020 at 21:38)</a>:</h4>
<p>FHIRPath syntax is independent of the model you're using it with.  (FHIRPath can be used against models that aren't FHIR at all...)</p>



<a name="200480460"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/mapping%20revisions%20of%20FHIRPATH%20to%20FHIR%20format/near/200480460" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/mapping.20revisions.20of.20FHIRPATH.20to.20FHIR.20format.html#200480460">(Jun 10 2020 at 21:38)</a>:</h4>
<p>However, tools that support FHIRPath may have limitations on what versions of FHIR they support.</p>



<a name="200481152"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/mapping%20revisions%20of%20FHIRPATH%20to%20FHIR%20format/near/200481152" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/mapping.20revisions.20of.20FHIRPATH.20to.20FHIR.20format.html#200481152">(Jun 10 2020 at 21:45)</a>:</h4>
<p>Also, FHIR R4 defines extensions to FHIRPath, and I think those extensions are based on N1 (release 2) of FHIRPath.  <a href="https://www.hl7.org/fhir/fhirpath.html">https://www.hl7.org/fhir/fhirpath.html</a> says:  "The FHIR Specification uses FHIRPath (release 2)...."</p>



<a name="200481258"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/mapping%20revisions%20of%20FHIRPATH%20to%20FHIR%20format/near/200481258" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/mapping.20revisions.20of.20FHIRPATH.20to.20FHIR.20format.html#200481258">(Jun 10 2020 at 21:46)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191320">Lloyd McKenzie</span> <a href="#narrow/stream/179266-fhirpath/topic/mapping.20revisions.20of.20FHIRPATH.20to.20FHIR.20format/near/200480460">said</a>:</p>
<blockquote>
<p>However, tools that support FHIRPath may have limitations on what versions of FHIR they support.</p>
</blockquote>
<p>For instance, fhirpath.js only has model information for STU3 &amp; R4.</p>



<a name="200481589"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/mapping%20revisions%20of%20FHIRPATH%20to%20FHIR%20format/near/200481589" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/mapping.20revisions.20of.20FHIRPATH.20to.20FHIR.20format.html#200481589">(Jun 10 2020 at 21:49)</a>:</h4>
<p>you can use newer versions of FHIRPath with older versions of FHIR, but not the other way around - R4 depends on N2 of FHIRPath throughout the specification</p>



<a name="200583740"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/mapping%20revisions%20of%20FHIRPATH%20to%20FHIR%20format/near/200583740" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Harsch <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/mapping.20revisions.20of.20FHIRPATH.20to.20FHIR.20format.html#200583740">(Jun 11 2020 at 18:10)</a>:</h4>
<p><span class="user-mention silent" data-user-id="195344">Paul Lynch</span> <a href="#narrow/stream/179266-fhirpath/topic/mapping.20revisions.20of.20FHIRPATH.20to.20FHIR.20format/near/200481258">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="191320">Lloyd McKenzie</span> <a href="#narrow/stream/179266-fhirpath/topic/mapping.20revisions.20of.20FHIRPATH.20to.20FHIR.20format/near/200480460">said</a>:</p>
<blockquote>
<p>However, tools that support FHIRPath may have limitations on what versions of FHIR they support.</p>
</blockquote>
<p>For instance, fhirpath.js only has model information for STU3 &amp; R4.</p>
</blockquote>
<p>What does that mean in practical terms if I'm attempting to query DSTU2 with fhirpath.js.   I guess I don't understand the role of the model information?  will it just make certain operations in FHIRPATH N1 (release 2) not possible?  or could I get incorrect results?  or path expressions rejected in some cases?</p>



<a name="200584561"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/mapping%20revisions%20of%20FHIRPATH%20to%20FHIR%20format/near/200584561" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/mapping.20revisions.20of.20FHIRPATH.20to.20FHIR.20format.html#200584561">(Jun 11 2020 at 18:16)</a>:</h4>
<p>Without the model information, fhirpath.js will still mostly work, but type information will be absent, so things like the "as" operator won't work.  Also, choice type support will be lacking, so you won't be able to do Observation.value, but would have to write Observation.valueString (which is the actual field name in the JSON).</p>



<a name="200585367"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/mapping%20revisions%20of%20FHIRPATH%20to%20FHIR%20format/near/200585367" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/mapping.20revisions.20of.20FHIRPATH.20to.20FHIR.20format.html#200585367">(Jun 11 2020 at 18:22)</a>:</h4>
<p>FYI, if the FHIR definitions are in the same format for DSTU2 as for STU3 (which I have not checked), it would not be difficult to generate model information for DSTU2 and add that to fhirpath.js.  If that is something you need, you could request it by raising the issue on <a href="https://github.com/HL7/fhirpath.js/issues">fhirpath.js</a>.</p>



<a name="200590206"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/mapping%20revisions%20of%20FHIRPATH%20to%20FHIR%20format/near/200590206" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Harsch <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/mapping.20revisions.20of.20FHIRPATH.20to.20FHIR.20format.html#200590206">(Jun 11 2020 at 19:01)</a>:</h4>
<p>Thank you!   <br>
So, my overall objective is to take a code that is currently broken because it seems to have supported a format similar to FHIR, but perhaps not conformant, and fix/replace it to match DSTU2 (what most of our providers are going to give us).    So I query for a give resource type out of a DSTU2 server (specifically from running this container <a href="https://hub.docker.com/layers/smartonfhir/hapi/r2-smart/images/sha256-080668a9cf3d02b5bb2b38e25c5d910e78d6bacdffea376d42d66154e9f705ad?context=explore">https://hub.docker.com/layers/smartonfhir/hapi/r2-smart/images/sha256-080668a9cf3d02b5bb2b38e25c5d910e78d6bacdffea376d42d66154e9f705ad?context=explore</a> )  (NOTE the JSON I shared with you for DanielJohnson was DSTU3 and I'm now working with DSTU2) .   So I'm thinking if I could create a fhirpath expression that could extract all the blood pressure readings from an Observation record (for a given patient) then I could feed it to this code that charts the data  via some React element <code>&lt;ObservationsTableValueBar value={value} unit={unit} low={low} high={high} /&gt;</code><br>
So I guess the short answer is that I would potentially need the model information for DSTU2 (we will be supporting that for a long time I think).   But, for the short term, maybe it's not a show stopper, because if can just get the quoted values I'd probably be OK as I likely wouldn't be doing range queries on the values using FHIRPATH.    Long term we would likely use FHIRPATH expressions of varying type on DSTU2.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
