---
layout: page
title: "FHIR Chat  · Date/Time comparison vs equality · fhirpath"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/index.html">fhirpath</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Date.2FTime.20comparison.20vs.20equality.html">Date/Time comparison vs equality</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="208095190"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Date/Time%20comparison%20vs%20equality/near/208095190" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Date.2FTime.20comparison.20vs.20equality.html#208095190">(Aug 26 2020 at 14:04)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> , starting a new thread for this test:</p>
<div class="codehilite"><pre><span></span><code>    &lt;test name=&quot;testStringQuantityDayLiteralToQuantity&quot; inputfile=&quot;patient-example.xml&quot;&gt;&lt;expression&gt;&#39;1 day&#39;.toQuantity() = 1 &#39;d&#39;&lt;/expression&gt;&lt;output type=&quot;boolean&quot;&gt;true&lt;/output&gt;&lt;/test&gt;
</code></pre></div>



<a name="208095292"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Date/Time%20comparison%20vs%20equality/near/208095292" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Date.2FTime.20comparison.20vs.20equality.html#208095292">(Aug 26 2020 at 14:05)</a>:</h4>
<p>This one is actually highlighting an inconsistency in the spec, there is a tracker <a href="https://jira.hl7.org/browse/FHIR-28144">#28144</a> to address that, but since UCUM definite-duration quantities and calendar durations above seconds are uncomparable, the result should be empty.</p>



<a name="208137891"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Date/Time%20comparison%20vs%20equality/near/208137891" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Date.2FTime.20comparison.20vs.20equality.html#208137891">(Aug 26 2020 at 19:37)</a>:</h4>
<p>the issue is units, not math logic. {day} is a non-unit</p>



<a name="208171963"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Date/Time%20comparison%20vs%20equality/near/208171963" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Date.2FTime.20comparison.20vs.20equality.html#208171963">(Aug 27 2020 at 02:09)</a>:</h4>
<p>Agree that {day} is a non-unit, this issue is different, specifically day and d are not comparable, so should return empty.</p>



<a name="208172731"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Date/Time%20comparison%20vs%20equality/near/208172731" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Date.2FTime.20comparison.20vs.20equality.html#208172731">(Aug 27 2020 at 02:28)</a>:</h4>
<p>how are they not comparable?</p>



<a name="208868101"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Date/Time%20comparison%20vs%20equality/near/208868101" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Date.2FTime.20comparison.20vs.20equality.html#208868101">(Sep 02 2020 at 18:38)</a>:</h4>
<p>For the same reason that <code>year</code> and <code>'a'</code> are not comparable, one is a calendar duration, the other is a definite-duration UCUM unit.</p>



<a name="208883776"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Date/Time%20comparison%20vs%20equality/near/208883776" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Date.2FTime.20comparison.20vs.20equality.html#208883776">(Sep 02 2020 at 20:35)</a>:</h4>
<p>I understand why year and a are not comparable. And month. But I don't understand why for periods of week or less</p>



<a name="208884296"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Date/Time%20comparison%20vs%20equality/near/208884296" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Date.2FTime.20comparison.20vs.20equality.html#208884296">(Sep 02 2020 at 20:38)</a>:</h4>
<p>Because of the possibility of leap seconds, only seconds and below are technically exactly the same between the calendar and UCUM units.</p>



<a name="208885452"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Date/Time%20comparison%20vs%20equality/near/208885452" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Date.2FTime.20comparison.20vs.20equality.html#208885452">(Sep 02 2020 at 20:47)</a>:</h4>
<p>that's not exactly a real world issue.</p>



<a name="208888774"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Date/Time%20comparison%20vs%20equality/near/208888774" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Date.2FTime.20comparison.20vs.20equality.html#208888774">(Sep 02 2020 at 21:13)</a>:</h4>
<p>That's fair, but that was the resolution. If the reference implementations behave differently, we can deal with that as an errata I think.</p>



<a name="209114649"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Date/Time%20comparison%20vs%20equality/near/209114649" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Date.2FTime.20comparison.20vs.20equality.html#209114649">(Sep 04 2020 at 16:32)</a>:</h4>
<p>Added a comment to this effect to this tracker: <a href="https://jira.hl7.org/browse/FHIR-28144?filter=12608">https://jira.hl7.org/browse/FHIR-28144?filter=12608</a></p>



<a name="209115412"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Date/Time%20comparison%20vs%20equality/near/209115412" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Date.2FTime.20comparison.20vs.20equality.html#209115412">(Sep 04 2020 at 16:40)</a>:</h4>
<p>And committed a change to the fhir-path-tests to address it. Specifically:</p>
<div class="codehilite"><pre><span></span><code>&#39;1 day&#39;.toQuantity() = 1 &#39;d&#39; // true
&#39;1 \&#39;wk\&#39;&#39;.toQuantity() = 1 week // true
&#39;1 \&#39;mo\&#39;&#39;.toQuantity() = 1 month // empty
&#39;1 \&#39;a\&#39;&#39;.toQuantity() = 1 year // empty
</code></pre></div>



<a name="211790736"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Date/Time%20comparison%20vs%20equality/near/211790736" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Date.2FTime.20comparison.20vs.20equality.html#211790736">(Sep 30 2020 at 17:02)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191359">Bryn Rhodes</span> <a href="#narrow/stream/179266-fhirpath/topic/Date.2FTime.20comparison.20vs.20equality/near/209115412">said</a>:</p>
<blockquote>
<p>And committed a change to the fhir-path-tests to address it. Specifically:</p>
<div class="codehilite"><pre><span></span><code>&#39;1 day&#39;.toQuantity() = 1 &#39;d&#39; // true
&#39;1 \&#39;wk\&#39;&#39;.toQuantity() = 1 week // true
&#39;1 \&#39;mo\&#39;&#39;.toQuantity() = 1 month // empty
&#39;1 \&#39;a\&#39;&#39;.toQuantity() = 1 year // empty
</code></pre></div>


</blockquote>
<p><span class="user-mention" data-user-id="191359">@Bryn Rhodes</span>  - Your proposed resolution to <a href="http://jira.hl7.org/browse/FHIR-28144">J#28144</a> says "above days" should return empty, not "above weeks".  (I am just objecting to apparent inconsistency, not to "weeks".)</p>



<a name="211813800"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Date/Time%20comparison%20vs%20equality/near/211813800" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Date.2FTime.20comparison.20vs.20equality.html#211813800">(Sep 30 2020 at 20:12)</a>:</h4>
<p>Agreed, and when I applied this to CQL as part of alignment/reconciliation there, I noted weeks everywhere. See <a href="http://build.fhir.org/ig/HL7/cql/09-b-cqlreference.html#equal">Equal</a> for example.</p>



<a name="211813819"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Date/Time%20comparison%20vs%20equality/near/211813819" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Date.2FTime.20comparison.20vs.20equality.html#211813819">(Sep 30 2020 at 20:12)</a>:</h4>
<p>I've added this as a note to the comment on that tracker.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
