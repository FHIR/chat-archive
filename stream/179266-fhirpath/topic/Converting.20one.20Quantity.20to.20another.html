---
layout: page
title: "FHIR Chat  · Converting one Quantity to another · fhirpath"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/index.html">fhirpath</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Converting.20one.20Quantity.20to.20another.html">Converting one Quantity to another</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="154015264"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Converting%20one%20Quantity%20to%20another/near/154015264" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Converting.20one.20Quantity.20to.20another.html#154015264">(Nov 02 2018 at 19:43)</a>:</h4>
<p>As I mentioned on the <a href="#narrow/stream/102-questionnaire/topic/Multiple.20unit.20choices.20for.20an.20answer" title="#narrow/stream/102-questionnaire/topic/Multiple.20unit.20choices.20for.20an.20answer">questionnaire stream</a> we have a need to do a calculation using a Quantity whose unit dimension is known but whose precise unit is not known in advance, and which will need to be converted to a known unit in order to be used in the FHIRPath formula.  Should this functionality of converting one Quantity to another of a different unit be added to FHIRPath?</p>
<p>The actual work of writing a converter for UCUM units is already done (see for instance https://github.com/lhncbc/ucum-lhc)-- we would just need some syntax for it in FHIRPath, and then of course FHIRPath engines would need to include such a library to support it.</p>



<a name="154015364"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Converting%20one%20Quantity%20to%20another/near/154015364" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Converting.20one.20Quantity.20to.20another.html#154015364">(Nov 03 2018 at 01:28)</a>:</h4>
<p>That's an interesting problem, and I guess would need to write a custom function to perform this action (not something that is supported in fhirpath).<br>
I'm also interested in if others think this is something to add in.<br>
(If you do come up with a custom implementation, let me know what you decide to call it and I'll add it to our implementation too)</p>



<a name="154015687"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Converting%20one%20Quantity%20to%20another/near/154015687" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Converting.20one.20Quantity.20to.20another.html#154015687">(Nov 05 2018 at 16:58)</a>:</h4>
<p>How about:  convert('target-ucum-unit').  If the input collection (the left of .convert) is an array of Quantities, the result will be the Quantities in the target unit.  If any element of the input array is not a Quantity or is not convertible an error would be raised.</p>
<p>Unless someone has a better solution, I will open a GForge ticket for this.</p>



<a name="154015782"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Converting%20one%20Quantity%20to%20another/near/154015782" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Converting.20one.20Quantity.20to.20another.html#154015782">(Nov 05 2018 at 22:23)</a>:</h4>
<p>What about toQuantity('mm') or is that feeling more like a type conversion</p>



<a name="154015783"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Converting%20one%20Quantity%20to%20another/near/154015783" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Converting.20one.20Quantity.20to.20another.html#154015783">(Nov 05 2018 at 22:24)</a>:</h4>
<p>The bare convert just looks to open to missinterpretation</p>



<a name="154015786"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Converting%20one%20Quantity%20to%20another/near/154015786" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Converting.20one.20Quantity.20to.20another.html#154015786">(Nov 05 2018 at 22:31)</a>:</h4>
<p>Yes, toQuantity('ucum type') is probably better.</p>



<a name="154016274"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Converting%20one%20Quantity%20to%20another/near/154016274" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Converting.20one.20Quantity.20to.20another.html#154016274">(Nov 07 2018 at 17:56)</a>:</h4>
<p>I just realized that Quanitity in FHIR (an object with fields) is different than a quantity in FHIRPath (looks like:  4 'mm').  What would toQuantity(unit) operate on?  I would like it to operate on FHIR Quantity objects.  Perhaps then it would need to be added to FHIR extensions to FHIRPath, rather than to FHIRPath core.</p>



<a name="154016983"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Converting%20one%20Quantity%20to%20another/near/154016983" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Converting.20one.20Quantity.20to.20another.html#154016983">(Nov 09 2018 at 00:27)</a>:</h4>
<p>what's special about FHIR quantities as opposed to FHIRPath quantities?</p>



<a name="154017001"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Converting%20one%20Quantity%20to%20another/near/154017001" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Converting.20one.20Quantity.20to.20another.html#154017001">(Nov 09 2018 at 01:30)</a>:</h4>
<p>FHIR quantities support a comparator.</p>



<a name="154017197"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Converting%20one%20Quantity%20to%20another/near/154017197" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Converting.20one.20Quantity.20to.20another.html#154017197">(Nov 09 2018 at 16:26)</a>:</h4>
<p>And, FHIR quantities are an object.  I suppose internally  4 'mm' would be some sort of object too, but FHIR Quantity is a specific kind of object with defined fields.  It might be that the section on converting FHIR primitive types into FHIRPath types (<a href="http://hl7.org/fhir/2018Sep/fhirpath.html#types" target="_blank" title="http://hl7.org/fhir/2018Sep/fhirpath.html#types">http://hl7.org/fhir/2018Sep/fhirpath.html#types</a>) could include Quantity (though that might not be primitive?) but I don't see anything about such a conversion at present.</p>



<a name="154017261"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Converting%20one%20Quantity%20to%20another/near/154017261" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Converting.20one.20Quantity.20to.20another.html#154017261">(Nov 09 2018 at 20:29)</a>:</h4>
<p>I guess we should add that too. I use FHIR quantities internally for a FHIRPath quantity, and silently carry the comparator, though calculations on that can be fun</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
