---
layout: page
title: "FHIR Chat  · GF#21606 · fhirpath"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/index.html">fhirpath</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/GF.2321606.html">GF#21606</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="178258272"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/GF%2321606/near/178258272" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/GF.2321606.html#178258272">(Oct 16 2019 at 04:33)</a>:</h4>
<p>Lloyd correctly pointed out that this disposition is incorrectly assigning semantics to annotations in UCUM. Therefore the disposition should be applied with the following adjustments:</p>
<ol>
<li>
<p>Quantities in FHIRPath use _either_ a UCUM unit or a calendar duration keyword</p>
</li>
<li>
<p>Calendar duration keywords are represented as the keyword as a string (without curly braces), and are not represented as UCUM units.</p>
</li>
</ol>
<p>Updated the proposed disposition for this tracker to reflect the use of calendar duration as the unit, rather than a UCUM annotation.</p>



<a name="178258390"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/GF%2321606/near/178258390" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/GF.2321606.html#178258390">(Oct 16 2019 at 04:36)</a>:</h4>
<p>I have applied this adjustment to the publication draft. <span class="user-mention" data-user-id="194452">@Bas van den Heuvel</span> , <span class="user-mention" data-user-id="191328">@Ewout Kramer</span> , <span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span>, <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> , <span class="user-mention" data-user-id="195344">@Paul Lynch</span> , <span class="user-mention" data-user-id="191367">@Brian Postlethwaite</span>, please take a look and let me know if you have any concerns with this adjustment.</p>



<a name="178293091"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/GF%2321606/near/178293091" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/GF.2321606.html#178293091">(Oct 16 2019 at 14:17)</a>:</h4>
<p>Previously, <a href="https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=20682&amp;start=0" target="_blank" title="https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=20682&amp;start=0">GF#20682</a> effectively made 'a' be treated as "year" (calendar) for arithmetic purposes.  So I think the only change here is to disallow the use of 'min' through 'a'  in quantities being added to date/times.  That should not be a difficult change from an implementation point of view.  However, I am a little concerned that if the quantity is not under the expression author's control (e.g. if it comes from some FHIR resource) then there could be difficulties if those quantities come with UCUM units like 'a' or 'd'.   For instance, if a Questionnaire author is pulling some time value from an Observation and trying to add it to a date, I am not sure what facility the Questionnaire author would have for ensuring that the time Quantity is first converted to 's' or 'ms'.</p>



<a name="178293296"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/GF%2321606/near/178293296" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/GF.2321606.html#178293296">(Oct 16 2019 at 14:19)</a>:</h4>
<p>Oh-- there is "toQuantity".  I guess that should work, though it will require an adjustment to existing FHIRPath expressions (if there are any doing date/time &amp; quantity arithmetic).</p>



<a name="178295566"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/GF%2321606/near/178295566" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/GF.2321606.html#178295566">(Oct 16 2019 at 14:41)</a>:</h4>
<p><span class="user-mention" data-user-id="195344">@Paul Lynch</span> , note also that <a href="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=24856" target="_blank" title="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=24856">GF#24856</a> indicates that when FHIRPath is used within FHIR, UCUM time quantities are implicitly converted to their calendar equivalents, on the grounds that that is how the implementations already work.</p>



<a name="178301433"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/GF%2321606/near/178301433" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/GF.2321606.html#178301433">(Oct 16 2019 at 15:42)</a>:</h4>
<p><span class="user-mention" data-user-id="191359">@Bryn Rhodes</span>  That one (<a href="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=24856" target="_blank" title="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=24856">GF#24856</a>) also mentions "1 '{year}'".  Is that resolution going to be updated as well?</p>



<a name="178308245"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/GF%2321606/near/178308245" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/GF.2321606.html#178308245">(Oct 16 2019 at 17:05)</a>:</h4>
<p>Oops, I see that I had some outstanding changes on that (never clicked Save on my browser)</p>



<a name="178308348"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/GF%2321606/near/178308348" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/GF.2321606.html#178308348">(Oct 16 2019 at 17:06)</a>:</h4>
<p>Should be updated now</p>



<a name="178309404"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/GF%2321606/near/178309404" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/GF.2321606.html#178309404">(Oct 16 2019 at 17:19)</a>:</h4>
<p>Okay, so in <a href="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=24856" target="_blank" title="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=24856">GF#24856</a>, when does that implicit conversion happen?  If it happens immediately prior to being used in arithmetic, then I think we are back the behavior of <a href="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=20682" target="_blank" title="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=20682">GF#20682</a>-- you can use 'a' as a unit, and it means "year" in date/time arithmetic.  That sounds different than what <a href="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=21606" target="_blank" title="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=21606">GF#21606</a> is saying.</p>



<a name="178309835"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/GF%2321606/near/178309835" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/GF.2321606.html#178309835">(Oct 16 2019 at 17:24)</a>:</h4>
<p>When FHIRPath is used from FHIR, yes, that's the behavior. You can still get the definite quantity behavior if you want it, but you have to be explicit about it.</p>



<a name="178309842"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/GF%2321606/near/178309842" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/GF.2321606.html#178309842">(Oct 16 2019 at 17:24)</a>:</h4>
<p><a href="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=21606" target="_blank" title="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=21606">GF#21606</a> is only about FHIRPath.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
