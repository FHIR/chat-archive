---
layout: page
title: "FHIR Chat  · Measure to MeasureReport · fhirpath"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/index.html">fhirpath</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Measure.20to.20MeasureReport.html">Measure to MeasureReport</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="253613532"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Measure%20to%20MeasureReport/near/253613532" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grey Faulkenberry <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Measure.20to.20MeasureReport.html#253613532">(Sep 16 2021 at 16:54)</a>:</h4>
<p>I'm trying to use a FHIRPath expression in a Measure to produce something more than just a calculation in a MeasureReport. How much of this is possible within the FHIR spec itself? For example:</p>
<div class="codehilite"><pre><span></span><code>&quot;item.item.where(linkId.contains(&#39;/attention&#39;)).answer.valueCoding.extension.value.aggregate($this + $total, 0).iif($this &gt;= 7, $this.toString() + &#39;;high;Impairment&#39;, $this.toString() + &#39;;low&#39;)&quot;
</code></pre></div>
<p>This is just what I'm working with for now. So I have my QuestionnaireResponse, I evaluate it using the above expression, I should get something like</p>
<div class="codehilite"><pre><span></span><code>[&#39;9;high;Impairment&#39;]
</code></pre></div>
<p>I then have pre-defined rules on what to do with that response, and it creates part of a MeasureReport that looks kind of like this:</p>
<div class="codehilite"><pre><span></span><code>        {
          &quot;stratum&quot;: [
            {
              &quot;value&quot;: { &quot;text&quot;: &quot;Attention&quot; },
              &quot;component&quot;: [
                {
                  &quot;code&quot;: {
                    &quot;coding&quot;: [{ &quot;code&quot;: &quot;Impairment&quot;, &quot;display&quot;: &quot;Impairment&quot; }]
                  },
                  &quot;value&quot;: {
                    &quot;coding&quot;: [
                      {
                        &quot;system&quot;: &quot;mayjuun.com/fhir/ValueSet/low_medium_high_risk&quot;,
                        &quot;code&quot;: &quot;high-risk&quot;,
                        &quot;display&quot;: &quot;high risk&quot;
                      }
                    ]
                  }
                }
              ],
              &quot;measureScore&quot;: { &quot;value&quot;: &quot;9&quot; }
            }
          ]
        }
</code></pre></div>
<p>But that whole pre-defined rules section isn't represented anywhere in FHIR. Is there a way to do something similar to what I'm trying to do?</p>



<a name="253743775"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Measure%20to%20MeasureReport/near/253743775" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Measure.20to.20MeasureReport.html#253743775">(Sep 17 2021 at 13:43)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="235060">@Grey Faulkenberry</span> , I'm not sure I understand the question? What do you mean by "pre-defined rules"? It looks like you are trying to do stratification of the results by risk level, is that right?</p>



<a name="253744035"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Measure%20to%20MeasureReport/near/253744035" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grey Faulkenberry <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Measure.20to.20MeasureReport.html#253744035">(Sep 17 2021 at 13:45)</a>:</h4>
<p>Yes, exactly. But I'm also trying to pass in specific text along with it. Currently the results is a semi-colon delimited string, of the format:</p>
<div class="codehilite"><pre><span></span><code>score;risk-level;Any other text you want to display with the result
</code></pre></div>



<a name="253744140"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Measure%20to%20MeasureReport/near/253744140" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grey Faulkenberry <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Measure.20to.20MeasureReport.html#253744140">(Sep 17 2021 at 13:46)</a>:</h4>
<p>For instance</p>
<div class="codehilite"><pre><span></span><code>22;low;22 still seems like a pretty high score to be considered low-risk
</code></pre></div>



<a name="253744339"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Measure%20to%20MeasureReport/near/253744339" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grey Faulkenberry <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Measure.20to.20MeasureReport.html#253744339">(Sep 17 2021 at 13:47)</a>:</h4>
<p>I was trying to figure out if there was a way in FHIR, to specify that that string should be divided up to produce the stratum in a MeasureReport as above</p>



<a name="253744502"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Measure%20to%20MeasureReport/near/253744502" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grey Faulkenberry <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Measure.20to.20MeasureReport.html#253744502">(Sep 17 2021 at 13:48)</a>:</h4>
<p>(also, to make sure that the stratum as I've displayed it makes sense)</p>



<a name="253750771"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Measure%20to%20MeasureReport/near/253750771" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Measure.20to.20MeasureReport.html#253750771">(Sep 17 2021 at 14:29)</a>:</h4>
<p>You can use components to specify the stratifier, though I'm not 100% sure that's what you're after. I thought I was following until the bit about "Any other text you want to display". Would that text be expected to be different per score/risk-level combination?</p>



<a name="253777925"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Measure%20to%20MeasureReport/near/253777925" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grey Faulkenberry <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Measure.20to.20MeasureReport.html#253777925">(Sep 17 2021 at 17:30)</a>:</h4>
<p><span class="user-mention" data-user-id="191359">@Bryn Rhodes</span> , yeah, I'm not explaining it very well.<br>
Each stratum will have a score, so the measureScore is just a number, that's straight forward.<br>
Each stratum will also have a low, medium, or high risk associated with it.<br>
However, there will be other text associated that will differ depending on what score it is. So for one score that text may be "Impairment", another one may have text that says "More discussion is needed", and another says "Needs immediate Attention".</p>
<p>For end-user display purposes, my plan is to create a MeasureReport display with a different line for each stratum. The line will have the title (stratum.value.text), the score (stratum.measureScore.value), and then some display text that differs (stratum.component.code.coding[0].display). And they would be different colors based on the low, medium or high risk.</p>
<p>So to the end user they might see...</p>
<div class="codehilite"><pre><span></span><code>Attention: Score 3: No follow-up needed // green color
Hyperactivity: Score 25: Needs further assessment //red color
Overall Health: Score 15: Generally healthy but needs some followup //yellow color
</code></pre></div>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
