---
layout: page
title: "FHIR Chat  · rule() · fhirpath"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/index.html">fhirpath</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/rule().html">rule()</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="169784108"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/rule%28%29/near/169784108" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/rule().html#169784108">(Jul 06 2019 at 21:57)</a>:</h4>
<p>take this rule, from the snapshot generator tests:</p>
<p><code>fixture('t43o').snapshot.element.where(id = 'Observation.value[x]:Quantity')).sliceName = 'Quantity'</code></p>



<a name="169784111"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/rule%28%29/near/169784111" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/rule().html#169784111">(Jul 06 2019 at 21:57)</a>:</h4>
<p>if there's no elements that meet the where clause, this passes.</p>



<a name="169784113"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/rule%28%29/near/169784113" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/rule().html#169784113">(Jul 06 2019 at 21:57)</a>:</h4>
<p>so I have to also make a rule:</p>
<p><code>fixture('t43o').snapshot.element.where(id = 'Observation.value[x]:Quantity')).exists()</code></p>



<a name="169784115"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/rule%28%29/near/169784115" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/rule().html#169784115">(Jul 06 2019 at 21:58)</a>:</h4>
<p>but it would be more convenient to do this:</p>



<a name="169784155"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/rule%28%29/near/169784155" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/rule().html#169784155">(Jul 06 2019 at 21:58)</a>:</h4>
<p><code>fixture('t43o').snapshot.element.where(id = 'Observation.value[x]:Quantity')).check(size() = 1).sliceName = 'Quantity'</code></p>



<a name="169784162"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/rule%28%29/near/169784162" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/rule().html#169784162">(Jul 06 2019 at 21:59)</a>:</h4>
<p>where <code>.check([condition])</code> works like .trace() - returns the focus if the condition passes, else raises an error.</p>



<a name="169784203"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/rule%28%29/near/169784203" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/rule().html#169784203">(Jul 06 2019 at 22:00)</a>:</h4>
<p>I don't see that we have a function like that, but it seems like it would be generally useful?</p>



<a name="169784338"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/rule%28%29/near/169784338" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/rule().html#169784338">(Jul 06 2019 at 22:05)</a>:</h4>
<p>no should be <code>.check(condition, message)</code></p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
