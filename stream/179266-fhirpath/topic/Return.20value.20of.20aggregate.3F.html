---
layout: page
title: "FHIR Chat  · Return value of aggregate? · fhirpath"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/index.html">fhirpath</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Return.20value.20of.20aggregate.3F.html">Return value of aggregate?</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="199437493"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Return%20value%20of%20aggregate%3F/near/199437493" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Return.20value.20of.20aggregate.3F.html#199437493">(Jun 02 2020 at 00:00)</a>:</h4>
<p>It seems clear from the examples that the return value of aggregate is $total, but I don't see that explicitly stated here: <a href="http://hl7.org/fhirpath/#aggregateaggregator-expression-init-value-value">http://hl7.org/fhirpath/#aggregateaggregator-expression-init-value-value</a></p>



<a name="199613271"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Return%20value%20of%20aggregate%3F/near/199613271" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Return.20value.20of.20aggregate.3F.html#199613271">(Jun 03 2020 at 12:36)</a>:</h4>
<p><a href="http://jira.hl7.org/browse/FHIR-27764">J#27764</a></p>



<a name="199694314"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Return%20value%20of%20aggregate%3F/near/199694314" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Return.20value.20of.20aggregate.3F.html#199694314">(Jun 04 2020 at 00:36)</a>:</h4>
<p>Yes, should definitely be clarified, thank you for submitting that</p>



<a name="250707503"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Return%20value%20of%20aggregate%3F/near/250707503" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Return.20value.20of.20aggregate.3F.html#250707503">(Aug 26 2021 at 01:32)</a>:</h4>
<p>Who's implemented this?<br>
It's not in the .net fhirpath implementation (I will be adding it there), and I can't seem to get it to work in the fhirpath.js<br>
So I'm wondering if it's a user problem...</p>



<a name="250708154"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Return%20value%20of%20aggregate%3F/near/250708154" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Return.20value.20of.20aggregate.3F.html#250708154">(Aug 26 2021 at 01:42)</a>:</h4>
<p>And while I'm implementing this, the spec doesn't specify what data type that is, decimal or integer?</p>



<a name="250711434"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Return%20value%20of%20aggregate%3F/near/250711434" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Return.20value.20of.20aggregate.3F.html#250711434">(Aug 26 2021 at 02:38)</a>:</h4>
<p>implemented what?</p>



<a name="250719652"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Return%20value%20of%20aggregate%3F/near/250719652" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Return.20value.20of.20aggregate.3F.html#250719652">(Aug 26 2021 at 04:30)</a>:</h4>
<p>Sorry, the <code>value.aggregate($this + $total, 0)</code> implementation.</p>



<a name="250719735"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Return%20value%20of%20aggregate%3F/near/250719735" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Return.20value.20of.20aggregate.3F.html#250719735">(Aug 26 2021 at 04:30)</a>:</h4>
<p>Or does it just derive it from the type of the <code>value</code> and hence if it was a string, that would just contatenate them all</p>



<a name="250719802"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Return%20value%20of%20aggregate%3F/near/250719802" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Return.20value.20of.20aggregate.3F.html#250719802">(Aug 26 2021 at 04:31)</a>:</h4>
<p>Effectively becoming an implementation for something like <code>name.given.join(', ')</code><br>
<code>name.given.aggregate(iff($total.exists(), $total &amp; ', ' &amp; $this, $this))</code></p>



<a name="250724183"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Return%20value%20of%20aggregate%3F/near/250724183" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Return.20value.20of.20aggregate.3F.html#250724183">(Aug 26 2021 at 05:26)</a>:</h4>
<p>Nevermind, version issues here... got the fhirpath.js doing things right.</p>



<a name="250906023"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Return%20value%20of%20aggregate%3F/near/250906023" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Return.20value.20of.20aggregate.3F.html#250906023">(Aug 27 2021 at 09:32)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191367">Brian Postlethwaite</span> <a href="#narrow/stream/179266-fhirpath/topic/Return.20value.20of.20aggregate.3F/near/250708154">said</a>:</p>
<blockquote>
<p>And while I'm implementing this, the spec doesn't specify what data type that is, decimal or integer?</p>
</blockquote>
<p>It seems this function is indeed polymorphic, Brian - and could work on strings, ints, dates, etc.  This is going to be nightmarish to implement in our .NET FP engine I think.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
