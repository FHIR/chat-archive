---
layout: page
title: "FHIR Chat  · Question from Questionnaire handling · fhirpath"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/index.html">fhirpath</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Question.20from.20Questionnaire.20handling.html">Question from Questionnaire handling</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="159657818"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Question%20from%20Questionnaire%20handling/near/159657818" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Question.20from.20Questionnaire.20handling.html#159657818">(Feb 28 2019 at 22:17)</a>:</h4>
<p><span class="user-mention" data-user-id="195344">@Paul Lynch</span> has a question (see <a href="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=19530" target="_blank" title="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=19530">GF#19530</a>) about the correct way to refer to variables defined in questionnaires in FHIRPath statements in expressions found in the Questionnaire.</p>



<a name="159657877"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Question%20from%20Questionnaire%20handling/near/159657877" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Question.20from.20Questionnaire.20handling.html#159657877">(Feb 28 2019 at 22:18)</a>:</h4>
<p>the intent is that the expressions can use the defined variables as values .</p>



<a name="159657925"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Question%20from%20Questionnaire%20handling/near/159657925" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Question.20from.20Questionnaire.20handling.html#159657925">(Feb 28 2019 at 22:18)</a>:</h4>
<p>Paul has implemented using %[var-name], where as I dropped the %, so that you just used the variable name, and it's known object in the FHIRPath engine.</p>



<a name="159657941"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Question%20from%20Questionnaire%20handling/near/159657941" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Question.20from.20Questionnaire.20handling.html#159657941">(Feb 28 2019 at 22:19)</a>:</h4>
<p>On the basis that %[x] is used for global constants.</p>



<a name="159657969"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Question%20from%20Questionnaire%20handling/near/159657969" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Question.20from.20Questionnaire.20handling.html#159657969">(Feb 28 2019 at 22:19)</a>:</h4>
<p>Paul points out that questionnaire variables are behaving like global constants anyway</p>



<a name="159658064"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Question%20from%20Questionnaire%20handling/near/159658064" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Question.20from.20Questionnaire.20handling.html#159658064">(Feb 28 2019 at 22:20)</a>:</h4>
<p>there'd be a 3rd option - use something like questionnaireVariables().[var-name]</p>



<a name="159658088"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Question%20from%20Questionnaire%20handling/near/159658088" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Question.20from.20Questionnaire.20handling.html#159658088">(Feb 28 2019 at 22:20)</a>:</h4>
<p><span class="user-mention" data-user-id="191328">@Ewout Kramer</span> <span class="user-mention" data-user-id="191359">@Bryn Rhodes</span> <span class="user-mention" data-user-id="191367">@Brian Postlethwaite</span>  do you have style opinions on this?</p>



<a name="159663580"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Question%20from%20Questionnaire%20handling/near/159663580" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Question.20from.20Questionnaire.20handling.html#159663580">(Feb 28 2019 at 23:41)</a>:</h4>
<p>I would prefer without the %, since with the percent it may collide with environment variable names.</p>



<a name="159663597"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Question%20from%20Questionnaire%20handling/near/159663597" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Question.20from.20Questionnaire.20handling.html#159663597">(Feb 28 2019 at 23:41)</a>:</h4>
<p>Without the % it may collide with resource names, but that's a more understandable situation I think (and easier to resolve).</p>



<a name="159668451"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Question%20from%20Questionnaire%20handling/near/159668451" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Question.20from.20Questionnaire.20handling.html#159668451">(Mar 01 2019 at 01:00)</a>:</h4>
<p>it may also collide with property names. which sounds more serious...</p>



<a name="159668461"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Question%20from%20Questionnaire%20handling/near/159668461" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Question.20from.20Questionnaire.20handling.html#159668461">(Mar 01 2019 at 01:00)</a>:</h4>
<p>vars() or some variant is the least likely to collide with something</p>



<a name="159676258"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Question%20from%20Questionnaire%20handling/near/159676258" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Question.20from.20Questionnaire.20handling.html#159676258">(Mar 01 2019 at 03:49)</a>:</h4>
<p><code>vars("varname")</code> would work<br>
I was ok with env variables.</p>



<a name="159720644"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Question%20from%20Questionnaire%20handling/near/159720644" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Question.20from.20Questionnaire.20handling.html#159720644">(Mar 01 2019 at 15:01)</a>:</h4>
<p>I think that with %, colliding with environment variables is okay.  If someone names a variable "resource", and then writes FHIRPath using %resource, it should probably refer to their variable.  If they didn't mean to do that, they can just change the variable name, because these are variables defined inside the same Questionnaire that has the FHIRPath.  (At least, that it the one use case of which I am aware.)</p>



<a name="159721674"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Question%20from%20Questionnaire%20handling/near/159721674" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Question.20from.20Questionnaire.20handling.html#159721674">(Mar 01 2019 at 15:13)</a>:</h4>
<p>I am also reluctant to introduce a second kind of variable.  The API for the FHIRPath engine then needs to take two hashes of variables, one for environment variables, and one for "other" variables.  (I am not sure how to explain "other" variables, in the fhirpath.js API.  What would I call them?  Non-environment variables?)  I'll grant that there could be a need for a second kind of variable, but in this Questionnaire space I am familiar with, I don't see it.</p>



<a name="159740121"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Question%20from%20Questionnaire%20handling/near/159740121" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Question.20from.20Questionnaire.20handling.html#159740121">(Mar 01 2019 at 19:09)</a>:</h4>
<p>which other <em>variables</em> get addressed through %[name]?</p>



<a name="160209847"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Question%20from%20Questionnaire%20handling/near/160209847" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Question.20from.20Questionnaire.20handling.html#160209847">(Mar 07 2019 at 15:57)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> Sorry for the long delay in replying-- I was out for a few days.  I am not sure I've understood your question.  We currently have "environment variables" accessed through %[name], and I am in favor of using the same syntax for variables created by extensions like questionnaire-calculatedExpression.  When I said "second kind of variable above" I was arguing against introducing a separate syntax for referencing (within FHIRPath) variables introduced by those extensions.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
