---
layout: page
title: "FHIR Chat  · FHIR.Quantity versus System.Quantity · fhirpath"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/index.html">fhirpath</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/FHIR.2EQuantity.20versus.20System.2EQuantity.html">FHIR.Quantity versus System.Quantity</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="180635544"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/FHIR.Quantity%20versus%20System.Quantity/near/180635544" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Timm <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/FHIR.2EQuantity.20versus.20System.2EQuantity.html#180635544">(Nov 13 2019 at 15:13)</a>:</h4>
<p>The FHIR spec mentions the implicit conversion between FHIR.Quantity and System.Quantity including how to handle time-valued UCUM units:</p>
<p><a href="http://hl7.org/fhir/fhirpath.html#quantity" target="_blank" title="http://hl7.org/fhir/fhirpath.html#quantity">http://hl7.org/fhir/fhirpath.html#quantity</a></p>
<p>but doesn't say much about how to compare quantities if they are not UCUM-based. How should a FHIRPath evaluation engine handle comparisons between two FHIR.Quantity nodes that are <em>not</em> UCUM quantities (either they have a code from a system other than UCUM or they do not use system/code and only unit)?</p>



<a name="180639974"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/FHIR.Quantity%20versus%20System.Quantity/near/180639974" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/FHIR.2EQuantity.20versus.20System.2EQuantity.html#180639974">(Nov 13 2019 at 15:51)</a>:</h4>
<p>FHIRPath requires that quantities be either UCUM units, or a calendar duration unit: <a href="http://build.fhir.org/ig/HL7/FHIRPath/branches/master/N1/#quantity" target="_blank" title="http://build.fhir.org/ig/HL7/FHIRPath/branches/master/N1/#quantity">http://build.fhir.org/ig/HL7/FHIRPath/branches/master/N1/#quantity</a></p>



<a name="180640128"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/FHIR.Quantity%20versus%20System.Quantity/near/180640128" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/FHIR.2EQuantity.20versus.20System.2EQuantity.html#180640128">(Nov 13 2019 at 15:53)</a>:</h4>
<p>So if you wanted to deal with a Quantity value in FHIR that wasn't UCUM-coded, then you would have to either convert that to a UCUM unit (so it could be represented as a System.Quantity) or deal with it specifically as a FHIR.Quantity (i.e. doing the unit and value comparisons directly, rather than treating it as a quantity).</p>



<a name="180648705"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/FHIR.Quantity%20versus%20System.Quantity/near/180648705" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/FHIR.2EQuantity.20versus.20System.2EQuantity.html#180648705">(Nov 13 2019 at 17:10)</a>:</h4>
<p>Should <a href="https://build.fhir.org/fhirpath.html#types" target="_blank" title="https://build.fhir.org/fhirpath.html#types">https://build.fhir.org/fhirpath.html#types</a> or <a href="https://build.fhir.org/fhirpath.html#quantity" target="_blank" title="https://build.fhir.org/fhirpath.html#quantity">https://build.fhir.org/fhirpath.html#quantity</a> cover the expected behavior in this case?  What do the various implementations do?  Seems a bit under-specified...</p>



<a name="180668777"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/FHIR.Quantity%20versus%20System.Quantity/near/180668777" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/FHIR.2EQuantity.20versus.20System.2EQuantity.html#180668777">(Nov 13 2019 at 20:32)</a>:</h4>
<p>what could we specify?</p>



<a name="180678383"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/FHIR.Quantity%20versus%20System.Quantity/near/180678383" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/FHIR.2EQuantity.20versus.20System.2EQuantity.html#180678383">(Nov 13 2019 at 22:09)</a>:</h4>
<p>That two FHIR_Quantity are comparable if they have the same coded units (even if those units aren't UCUM)?</p>



<a name="180678488"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/FHIR.Quantity%20versus%20System.Quantity/near/180678488" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/FHIR.2EQuantity.20versus.20System.2EQuantity.html#180678488">(Nov 13 2019 at 22:10)</a>:</h4>
<p>yeah I guess we could do that. do you want to make a task?</p>



<a name="180678498"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/FHIR.Quantity%20versus%20System.Quantity/near/180678498" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/FHIR.2EQuantity.20versus.20System.2EQuantity.html#180678498">(Nov 13 2019 at 22:10)</a>:</h4>
<p>sure</p>



<a name="180681036"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/FHIR.Quantity%20versus%20System.Quantity/near/180681036" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/FHIR.2EQuantity.20versus.20System.2EQuantity.html#180681036">(Nov 13 2019 at 22:36)</a>:</h4>
<p>ok, i submitted <a href="https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=25216" target="_blank" title="https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=25216">https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=25216</a></p>



<a name="180784875"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/FHIR.Quantity%20versus%20System.Quantity/near/180784875" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/FHIR.2EQuantity.20versus.20System.2EQuantity.html#180784875">(Nov 14 2019 at 22:55)</a>:</h4>
<p>I think for equality and equivalence, the definition follows from equality and equivalence for objects.</p>



<a name="180784955"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/FHIR.Quantity%20versus%20System.Quantity/near/180784955" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/FHIR.2EQuantity.20versus.20System.2EQuantity.html#180784955">(Nov 14 2019 at 22:56)</a>:</h4>
<p>From the perspective of FHIRPath, a FHIR.Quantity is a complex object, so the standard <code>=</code> and <code>~</code> operators apply.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
