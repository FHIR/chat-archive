---
layout: page
title: "FHIR Chat  · Resolve reveference + check coding · fhirpath"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/index.html">fhirpath</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Resolve.20reveference.20.2B.20check.20coding.html">Resolve reveference + check coding</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="233795669"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Resolve%20reveference%20%2B%20check%20coding/near/233795669" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Christian Nau <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Resolve.20reveference.20.2B.20check.20coding.html#233795669">(Apr 09 2021 at 10:01)</a>:</h4>
<p>Hi,<br>
I'm trying to create a FHIRPath expression for checking if a Location is part of another location of a specific phsysical type.<br>
If found this hint to comparing codeable-concepts wit <code>~</code> <a href="https://www.hl7.org/fhir/fhirpath.html#changes">https://www.hl7.org/fhir/fhirpath.html#changes</a><br>
But I don't know how to "create" the value for comparison.<br>
What I have so far:<br>
<code>partOf.exists() and partOf.resolve().physicalType ~ &lt;missing part for system=http://terminology.hl7.org/CodeSystem/location-physical-type + code=wa&gt;</code><br>
Can anyone point me to the right direction please?</p>



<a name="233817028"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Resolve%20reveference%20%2B%20check%20coding/near/233817028" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Resolve.20reveference.20.2B.20check.20coding.html#233817028">(Apr 09 2021 at 13:06)</a>:</h4>
<p><code>partOf.resolve().physicalType.where(system='http://terminology.hl7.org/CodeSystem/location-physical-type' and code='wa').exists()</code> should work</p>



<a name="233826775"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Resolve%20reveference%20%2B%20check%20coding/near/233826775" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Christian Nau <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Resolve.20reveference.20.2B.20check.20coding.html#233826775">(Apr 09 2021 at 14:07)</a>:</h4>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> Thanks for your answer. I tested it within a Profile. When validating a new instance of a location against this profile it fails for this constraint. But I double checked this referenced location exists and has the correct coding for physical-type. What could be the issue?</p>



<a name="233854216"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Resolve%20reveference%20%2B%20check%20coding/near/233854216" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Resolve.20reveference.20.2B.20check.20coding.html#233854216">(Apr 09 2021 at 16:39)</a>:</h4>
<p>Ah, missed the coding.  Try:<br>
<code>partOf.resolve().physicalType.coding.where(system='http://terminology.hl7.org/CodeSystem/location-physical-type' and code='wa').exists() </code></p>



<a name="234629125"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179266-fhirpath/topic/Resolve%20reveference%20%2B%20check%20coding/near/234629125" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Christian Nau <a href="https://fhir.github.io/chat-archive/stream/179266-fhirpath/topic/Resolve.20reveference.20.2B.20check.20coding.html#234629125">(Apr 15 2021 at 07:21)</a>:</h4>
<p>This didn't work for me. I don't know the reason. <br>
But I have found another solution to my problem (kudos to <span class="user-mention" data-user-id="191451">@Patrick Werner</span> ): using a constraint on <code>partOf</code> to only be a reference to my other Location-profile.<br>
For anyone interested: <br>
Expressed in <code>fsh</code> notation:</p>
<div class="codehilite"><pre><span></span><code>Profile:    MyWard
Parent:     Location
* physicalType 1..1 MS
* physicalType = http://terminology.hl7.org/CodeSystem/location-physical-type#wa


Profile:    MyBed
Parent:     Location
Description: &quot;A bed as part of a ward of a hospital.&quot;
* partOf 1..1 MS
* partOf only Reference(MyWard)
</code></pre></div>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
