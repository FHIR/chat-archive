---
layout: page
title: "FHIR Chat  · Connectathon track scenarios · FHIR at Scale (FAST): Exchange with/without intermediaries"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/264775-FHIR-at-Scale-(FAST):-Exchange-with/without-intermediaries/index.html">FHIR at Scale (FAST): Exchange with/without intermediaries</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/264775-FHIR-at-Scale-(FAST):-Exchange-with/without-intermediaries/topic/Connectathon.20track.20scenarios.html">Connectathon track scenarios</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="265631829"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/264775-FHIR%20at%20Scale%20%28FAST%29%3A%20Exchange%20with/without%20intermediaries/topic/Connectathon%20track%20scenarios/near/265631829" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Frank McKinney <a href="https://fhir.github.io/chat-archive/stream/264775-FHIR-at-Scale-(FAST):-Exchange-with/without-intermediaries/topic/Connectathon.20track.20scenarios.html#265631829">(Dec 21 2021 at 00:16)</a>:</h4>
<p>Draft test scenarios to discuss at tomorrow's Hybrid / Intermediary Exchange call. (1:00 ET, <a href="https://global.gotomeeting.com/join/262996117">https://global.gotomeeting.com/join/262996117</a>)</p>
<p><a href="/user_uploads/10155/3EZcbwakfdHUKHhaKIOgP2Rh/FAST-Exchange-Connectathon-Scenarios-draft-20211220.docx">FAST-Exchange-Connectathon-Scenarios-draft-20211220.docx</a></p>



<a name="266993338"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/264775-FHIR%20at%20Scale%20%28FAST%29%3A%20Exchange%20with/without%20intermediaries/topic/Connectathon%20track%20scenarios/near/266993338" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mike Yackanich <a href="https://fhir.github.io/chat-archive/stream/264775-FHIR-at-Scale-(FAST):-Exchange-with/without-intermediaries/topic/Connectathon.20track.20scenarios.html#266993338">(Jan 05 2022 at 21:26)</a>:</h4>
<p>FYI - I was able to get async working on the eHx Hub POC, using our POC HAPI FHIR server as the target responder, application path routing, and I disabled URL rewriting.  Tested multiple times today and it looks good.  So we should be good to go for testing the (new) async workflow next week.</p>



<a name="267635074"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/264775-FHIR%20at%20Scale%20%28FAST%29%3A%20Exchange%20with/without%20intermediaries/topic/Connectathon%20track%20scenarios/near/267635074" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mike Yackanich <a href="https://fhir.github.io/chat-archive/stream/264775-FHIR-at-Scale-(FAST):-Exchange-with/without-intermediaries/topic/Connectathon.20track.20scenarios.html#267635074">(Jan 11 2022 at 19:47)</a>:</h4>
<p>I reconfigured the eHx POC Intermediary to use hostname-based routing (versus AppPath) - and I recreated all of the Postman request tests.  I'll share the new Postman with <span class="user-mention" data-user-id="238597">@Frank McKinney</span>  and <span class="user-mention" data-user-id="196338">@Patrick Murta</span>  via email.  Note that all of these tests use the public HAPI server at <a href="http://hapi.fhir.org">hapi.fhir.org</a> as the target responder.</p>



<a name="267638246"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/264775-FHIR%20at%20Scale%20%28FAST%29%3A%20Exchange%20with/without%20intermediaries/topic/Connectathon%20track%20scenarios/near/267638246" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vassil Peytchev <a href="https://fhir.github.io/chat-archive/stream/264775-FHIR-at-Scale-(FAST):-Exchange-with/without-intermediaries/topic/Connectathon.20track.20scenarios.html#267638246">(Jan 11 2022 at 20:11)</a>:</h4>
<p>Is there a scenario where the destination uses two intermediaries in parallel?</p>



<a name="267643406"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/264775-FHIR%20at%20Scale%20%28FAST%29%3A%20Exchange%20with/without%20intermediaries/topic/Connectathon%20track%20scenarios/near/267643406" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mike Yackanich <a href="https://fhir.github.io/chat-archive/stream/264775-FHIR-at-Scale-(FAST):-Exchange-with/without-intermediaries/topic/Connectathon.20track.20scenarios.html#267643406">(Jan 11 2022 at 20:54)</a>:</h4>
<p><span class="user-mention" data-user-id="192685">@Vassil Peytchev</span>  - not that I know of, so I defer to Frank and Patrick.  The current multi-hop scenario with 2 intermediaries is sequential.  Not sure I understand a multi-intermediary, parallel scenario.  Would this represent a fan-out of sorts by the intermediaries?</p>



<a name="267644916"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/264775-FHIR%20at%20Scale%20%28FAST%29%3A%20Exchange%20with/without%20intermediaries/topic/Connectathon%20track%20scenarios/near/267644916" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vassil Peytchev <a href="https://fhir.github.io/chat-archive/stream/264775-FHIR-at-Scale-(FAST):-Exchange-with/without-intermediaries/topic/Connectathon.20track.20scenarios.html#267644916">(Jan 11 2022 at 21:06)</a>:</h4>
<p>I am imagining different intermediaries providing a different entry points - for example, one for claims/billing type queries, another for clinical data queries. Or is the current assumption that a destination can only get queries from a single intermediary?</p>



<a name="267645007"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/264775-FHIR%20at%20Scale%20%28FAST%29%3A%20Exchange%20with/without%20intermediaries/topic/Connectathon%20track%20scenarios/near/267645007" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Pyke <a href="https://fhir.github.io/chat-archive/stream/264775-FHIR-at-Scale-(FAST):-Exchange-with/without-intermediaries/topic/Connectathon.20track.20scenarios.html#267645007">(Jan 11 2022 at 21:07)</a>:</h4>
<p>TEFCA has one intermediary for all requests for one client</p>



<a name="267645524"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/264775-FHIR%20at%20Scale%20%28FAST%29%3A%20Exchange%20with/without%20intermediaries/topic/Connectathon%20track%20scenarios/near/267645524" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vassil Peytchev <a href="https://fhir.github.io/chat-archive/stream/264775-FHIR-at-Scale-(FAST):-Exchange-with/without-intermediaries/topic/Connectathon.20track.20scenarios.html#267645524">(Jan 11 2022 at 21:11)</a>:</h4>
<p>Not client, destination. Or did you mean from the destination's point of view, a client can only reach it via only one intermediary? If that is the case, I am thinking multiple clients, some use int1 (and always int1) and others use int2 (and always int2). destination needs to respond to both int1 and int2.</p>



<a name="267647054"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/264775-FHIR%20at%20Scale%20%28FAST%29%3A%20Exchange%20with/without%20intermediaries/topic/Connectathon%20track%20scenarios/near/267647054" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Pyke <a href="https://fhir.github.io/chat-archive/stream/264775-FHIR-at-Scale-(FAST):-Exchange-with/without-intermediaries/topic/Connectathon.20track.20scenarios.html#267647054">(Jan 11 2022 at 21:24)</a>:</h4>
<p>YEs, both.  A client -&gt; int1 -&gt; int 2 -&gt; destination.  There may be more than 2 intermediaries involved</p>



<a name="267647112"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/264775-FHIR%20at%20Scale%20%28FAST%29%3A%20Exchange%20with/without%20intermediaries/topic/Connectathon%20track%20scenarios/near/267647112" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Pyke <a href="https://fhir.github.io/chat-archive/stream/264775-FHIR-at-Scale-(FAST):-Exchange-with/without-intermediaries/topic/Connectathon.20track.20scenarios.html#267647112">(Jan 11 2022 at 21:24)</a>:</h4>
<p>more than one client may use int1, more than one destination may use int2</p>



<a name="267647164"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/264775-FHIR%20at%20Scale%20%28FAST%29%3A%20Exchange%20with/without%20intermediaries/topic/Connectathon%20track%20scenarios/near/267647164" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Pyke <a href="https://fhir.github.io/chat-archive/stream/264775-FHIR-at-Scale-(FAST):-Exchange-with/without-intermediaries/topic/Connectathon.20track.20scenarios.html#267647164">(Jan 11 2022 at 21:25)</a>:</h4>
<p>but a destination will only be connected to one QHIN/intermediary</p>



<a name="267647223"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/264775-FHIR%20at%20Scale%20%28FAST%29%3A%20Exchange%20with/without%20intermediaries/topic/Connectathon%20track%20scenarios/near/267647223" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Pyke <a href="https://fhir.github.io/chat-archive/stream/264775-FHIR-at-Scale-(FAST):-Exchange-with/without-intermediaries/topic/Connectathon.20track.20scenarios.html#267647223">(Jan 11 2022 at 21:25)</a>:</h4>
<p>So it may be client2 -&gt; int3 -&gt; int2 -&gt; destination</p>



<a name="267647334"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/264775-FHIR%20at%20Scale%20%28FAST%29%3A%20Exchange%20with/without%20intermediaries/topic/Connectathon%20track%20scenarios/near/267647334" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Pyke <a href="https://fhir.github.io/chat-archive/stream/264775-FHIR-at-Scale-(FAST):-Exchange-with/without-intermediaries/topic/Connectathon.20track.20scenarios.html#267647334">(Jan 11 2022 at 21:26)</a>:</h4>
<p>But client 1 will only connect though int1</p>



<a name="267650902"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/264775-FHIR%20at%20Scale%20%28FAST%29%3A%20Exchange%20with/without%20intermediaries/topic/Connectathon%20track%20scenarios/near/267650902" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vassil Peytchev <a href="https://fhir.github.io/chat-archive/stream/264775-FHIR-at-Scale-(FAST):-Exchange-with/without-intermediaries/topic/Connectathon.20track.20scenarios.html#267650902">(Jan 11 2022 at 21:53)</a>:</h4>
<p>That example will work. My concern is that in the above example from Dave, the existence of int1 and int3 has not been considered by the IG. It requires that the destination is aware of the existence of int1 and int3, and which one was the entry point for the query that is coming from int2.</p>



<a name="267651390"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/264775-FHIR%20at%20Scale%20%28FAST%29%3A%20Exchange%20with/without%20intermediaries/topic/Connectathon%20track%20scenarios/near/267651390" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Pyke <a href="https://fhir.github.io/chat-archive/stream/264775-FHIR-at-Scale-(FAST):-Exchange-with/without-intermediaries/topic/Connectathon.20track.20scenarios.html#267651390">(Jan 11 2022 at 21:56)</a>:</h4>
<p>This solution needs to be flexible enough for there to be a ring of 10+ intermediaries that may need to connect via int2 to destination</p>



<a name="267651715"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/264775-FHIR%20at%20Scale%20%28FAST%29%3A%20Exchange%20with/without%20intermediaries/topic/Connectathon%20track%20scenarios/near/267651715" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Pyke <a href="https://fhir.github.io/chat-archive/stream/264775-FHIR-at-Scale-(FAST):-Exchange-with/without-intermediaries/topic/Connectathon.20track.20scenarios.html#267651715">(Jan 11 2022 at 21:59)</a>:</h4>
<p>int2 would be one of the intermediaries in the ring</p>



<a name="267652697"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/264775-FHIR%20at%20Scale%20%28FAST%29%3A%20Exchange%20with/without%20intermediaries/topic/Connectathon%20track%20scenarios/near/267652697" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vassil Peytchev <a href="https://fhir.github.io/chat-archive/stream/264775-FHIR-at-Scale-(FAST):-Exchange-with/without-intermediaries/topic/Connectathon.20track.20scenarios.html#267652697">(Jan 11 2022 at 22:06)</a>:</h4>
<p>Exactly, and the way to do this is not by making the destination magically slap a different FHIR base on any full URLs it has depending on which of  the 10+ intermediaries the initial request comes from, but by accepting the inevitability that any FHIR intermediary must handle URL re-writes (and re-sign and re-encrypt content if necessary).</p>



<a name="267652959"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/264775-FHIR%20at%20Scale%20%28FAST%29%3A%20Exchange%20with/without%20intermediaries/topic/Connectathon%20track%20scenarios/near/267652959" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Pyke <a href="https://fhir.github.io/chat-archive/stream/264775-FHIR-at-Scale-(FAST):-Exchange-with/without-intermediaries/topic/Connectathon.20track.20scenarios.html#267652959">(Jan 11 2022 at 22:08)</a>:</h4>
<p>Yeah, although I'm not a fan of re-sign/re-encrypt as that would have issues with provenance</p>



<a name="267748229"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/264775-FHIR%20at%20Scale%20%28FAST%29%3A%20Exchange%20with/without%20intermediaries/topic/Connectathon%20track%20scenarios/near/267748229" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gino Canessa <a href="https://fhir.github.io/chat-archive/stream/264775-FHIR-at-Scale-(FAST):-Exchange-with/without-intermediaries/topic/Connectathon.20track.20scenarios.html#267748229">(Jan 12 2022 at 16:25)</a>:</h4>
<p>In fairness, I assume that production intermediaries will need to support re-sign/re-encrypt anyway, since that needs to happen if the MIME type changes...  :-/<br>
(note: I do <em>not</em> like this story, just reading it as I see it written)</p>



<a name="267757634"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/264775-FHIR%20at%20Scale%20%28FAST%29%3A%20Exchange%20with/without%20intermediaries/topic/Connectathon%20track%20scenarios/near/267757634" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mike Yackanich <a href="https://fhir.github.io/chat-archive/stream/264775-FHIR-at-Scale-(FAST):-Exchange-with/without-intermediaries/topic/Connectathon.20track.20scenarios.html#267757634">(Jan 12 2022 at 17:27)</a>:</h4>
<p><span class="user-mention" data-user-id="194452">@Bas van den Heuvel</span>  - the multi-hop requests are now flowing to your intermediary successfully.  I had to restart my service.  The following example actually routes through 3 intermediaries (2 of mine, and then yours), and then arrives at the target destination of <a href="http://hapi.fhir.org">hapi.fhir.org</a>.  Note that public.hapi.fhir.org.multihop must resolve to 52.10.37.229.</p>
<p>wget --no-check-certificate --quiet \<br>
  --method GET \<br>
  --timeout=0 \<br>
  --header '' \<br>
   '<a href="http://public.hapi.fhir.org.multihop:52774/fhirproxy/fast/r4/Patient?_id=2696380">http://public.hapi.fhir.org.multihop:52774/fhirproxy/fast/r4/Patient?_id=2696380</a>'  -SO-</p>



<a name="267759081"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/264775-FHIR%20at%20Scale%20%28FAST%29%3A%20Exchange%20with/without%20intermediaries/topic/Connectathon%20track%20scenarios/near/267759081" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bas van den Heuvel <a href="https://fhir.github.io/chat-archive/stream/264775-FHIR-at-Scale-(FAST):-Exchange-with/without-intermediaries/topic/Connectathon.20track.20scenarios.html#267759081">(Jan 12 2022 at 17:37)</a>:</h4>
<p>It also worked from my PC - good work.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
