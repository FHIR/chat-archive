---
layout: page
title: "FHIR Chat  · Git help needed · committers/git-help"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179293-committers/git-help/index.html">committers/git-help</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179293-committers/git-help/topic/Git.20help.20needed.html">Git help needed</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="256651246"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179293-committers/git-help/topic/Git%20help%20needed/near/256651246" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179293-committers/git-help/topic/Git.20help.20needed.html#256651246">(Oct 07 2021 at 21:14)</a>:</h4>
<p>We're getting a lot of feedback from HL7 committees: We really really hate git, and we're totally powerless to deal with it</p>



<a name="256651330"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179293-committers/git-help/topic/Git%20help%20needed/near/256651330" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179293-committers/git-help/topic/Git.20help.20needed.html#256651330">(Oct 07 2021 at 21:15)</a>:</h4>
<p>and when we try to ask for help, experts just tell us that we're using the wrong git client, but that doesn't actually help at all</p>



<a name="256651392"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179293-committers/git-help/topic/Git%20help%20needed/near/256651392" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179293-committers/git-help/topic/Git.20help.20needed.html#256651392">(Oct 07 2021 at 21:15)</a>:</h4>
<p>we need to do something about this. But what?</p>



<a name="256651580"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179293-committers/git-help/topic/Git%20help%20needed/near/256651580" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179293-committers/git-help/topic/Git.20help.20needed.html#256651580">(Oct 07 2021 at 21:17)</a>:</h4>
<p>I'm terrified of git conflicts - it's super stressful because I might merge wrong, and git's language is totally confusing. Perhaps I'm just stupid but in my head, there's other people's changes, my changes, and the product. Git gives me 'base', 'merge-head', and 'head'. Which of those is which, and could they choose less useful language?</p>



<a name="256651858"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179293-committers/git-help/topic/Git%20help%20needed/near/256651858" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179293-committers/git-help/topic/Git.20help.20needed.html#256651858">(Oct 07 2021 at 21:19)</a>:</h4>
<p>so you can imagine how committee members feel.</p>



<a name="256652070"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179293-committers/git-help/topic/Git%20help%20needed/near/256652070" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179293-committers/git-help/topic/Git.20help.20needed.html#256652070">(Oct 07 2021 at 21:20)</a>:</h4>
<p>and then, after a merge, git tells you you're committing hundreds of files. Did you change them? Is that a whoopsie?</p>



<a name="256657225"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179293-committers/git-help/topic/Git%20help%20needed/near/256657225" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gino Canessa <a href="https://fhir.github.io/chat-archive/stream/179293-committers/git-help/topic/Git.20help.20needed.html#256657225">(Oct 07 2021 at 22:03)</a>:</h4>
<p>I don't think the problem is git per se...  We are building a product via many async distributed 'teams' that have varying levels of comfort with the tools.  Version management is a hard problem, even more so for people not used to dealing with it.  Short of something like a custom software platform for editing the FHIR spec (which I can't imagine being feasible), I don't know how much of a difference the tooling can make.</p>
<p>But, we should be able to reduce the burden.</p>
<p>First, I'd suggest identifying the 'repeat offenders' to see if they can be removed/not checked-in, e.g.:</p>
<ul>
<li>Adding resources often causes conflicts in the 'top level' files (e.g., <code>oids.ini</code>, <code>resourcelist.html</code>, etc.) - can we move these out of 'normal' editing, make them generated files, etc.?</li>
<li>I often have conflicts with things like cache files (e.g., <code>null.cache</code>) - they are nice to have, but I would be willing to trade a longer 'first build' for not dealing with those conflicts.</li>
<li>There is a lot of 'build' stuff as well as the actual content source.  If those files cause problems, they could be split into different repos (e.g., if people are making changes for local builds and accidentally causing problems).</li>
</ul>
<p>Second, I'm guessing that some educational content would go a long way.  Everything from 'setting up your environment correctly' to things like 'how to deal with long-lived branches' to 'how to add a new resource/operation/etc.'.  I'm guessing a lot of frustration comes from not knowing.</p>
<p>After mulling for a bit (but not wanting to rewrite all the above =), another possibility would be to have someone (paid) responsible for managing the repo.  Merging branches, warning people of long-lived ones, deleting stale ones, etc. ... localize the pain to a single person/team and compensate them for dealing with it (e.g., ops).</p>



<a name="256658371"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179293-committers/git-help/topic/Git%20help%20needed/near/256658371" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/179293-committers/git-help/topic/Git.20help.20needed.html#256658371">(Oct 07 2021 at 22:14)</a>:</h4>
<p>i was writing up a bunch of stuff and then Gino posted and that was a lot of what I was going to say. :)</p>
<p>can I step back and ask why you decided on Git as your version control platform?  Git imposes a certain way of thinking about your source files and how they are managed and that has been imposed on us because of the decision to use Git.</p>
<p>the other question is what alternative would we use if we decided to move away from Git?</p>
<p>I do think that treating the FHIR specification as set of source files was a good decision.  And if you do that, then you need a way to manage and control the source files.   But it is a different way of thinking then many specification developers at HL7 are used to thinking.   I agree with Gino's suggestions on reducing the burden - identify files that are pain points, provide some education to new committers, single out repository managers who can help and/or do some of the required tasks in managing a repository of this size.</p>



<a name="256659244"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179293-committers/git-help/topic/Git%20help%20needed/near/256659244" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179293-committers/git-help/topic/Git.20help.20needed.html#256659244">(Oct 07 2021 at 22:22)</a>:</h4>
<p>the files that are the pain points that I've heard about are the txCache files, but they don't really matter - fix them however way. It's source merge conflicts that are the real problem from what I've heard, since they matter</p>



<a name="256659281"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179293-committers/git-help/topic/Git%20help%20needed/near/256659281" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179293-committers/git-help/topic/Git.20help.20needed.html#256659281">(Oct 07 2021 at 22:23)</a>:</h4>
<p>note that the build is 3hours + longer when I rebuild the txCache. I don't think we want to have build times like that</p>



<a name="256668269"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179293-committers/git-help/topic/Git%20help%20needed/near/256668269" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179293-committers/git-help/topic/Git.20help.20needed.html#256668269">(Oct 07 2021 at 23:56)</a>:</h4>
<p>why choose git? because of the workflows around it , and in the hope that we could manage it. The second has turned out to not be true</p>



<a name="256670066"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179293-committers/git-help/topic/Git%20help%20needed/near/256670066" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vassil Peytchev <a href="https://fhir.github.io/chat-archive/stream/179293-committers/git-help/topic/Git.20help.20needed.html#256670066">(Oct 08 2021 at 00:17)</a>:</h4>
<p>There are quite a few things to unpack here.</p>
<ol>
<li>
<p>Git != GitHub. Are the beneficial workflows those of git mainly, or the add-ons of GitHub?</p>
</li>
<li>
<p>Related to the previous - are our needs better served by <a href="https://nvie.com/posts/a-successful-git-branching-model/">git-flow</a> or <a href="https://guides.github.com/introduction/flow/">GitHub flow</a></p>
</li>
<li>
<p>The creator of Git has stated that <a href="https://lore.kernel.org/lkml/CAHk-=wjbtip559HcMG9VQLGPmkurh5Kc50y5BceL8Q8=aL0H3Q@mail.gmail.com/">GitHub "creates absolutely useless garbage merges, and you should never ever use the github interfaces to merge anything"</a> - could that be one of the reasons merges are such an issue?</p>
</li>
<li>
<p>There are multiple ways to do the same things - e.g. pull requests from branches, vs. pull requests from forks. Is one better than the others?</p>
</li>
<li>
<p>Should all merges be done without fast-forward (--no-ff parameter)?</p>
</li>
<li>
<p>Do git clients provide sufficient added value compared to the command line interface?</p>
</li>
</ol>



<a name="256670859"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179293-committers/git-help/topic/Git%20help%20needed/near/256670859" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179293-committers/git-help/topic/Git.20help.20needed.html#256670859">(Oct 08 2021 at 00:27)</a>:</h4>
<p>(On 3, I don't think Linus's gripes are things we particularly worry about. They're to do with things like signatures which haven't been a pain point for us, not about the graph structure of the repository history.)</p>



<a name="256675469"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179293-committers/git-help/topic/Git%20help%20needed/near/256675469" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vassil Peytchev <a href="https://fhir.github.io/chat-archive/stream/179293-committers/git-help/topic/Git.20help.20needed.html#256675469">(Oct 08 2021 at 01:29)</a>:</h4>
<p>On the txCache files, would adding a step after the local build to add any new files generated due to the build, and then commit them and any modified existing ones with auto-add? I think the problems occur when these files are not updated after the build, is that the case?</p>



<a name="256737484"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179293-committers/git-help/topic/Git%20help%20needed/near/256737484" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179293-committers/git-help/topic/Git.20help.20needed.html#256737484">(Oct 08 2021 at 13:14)</a>:</h4>
<p>I think that the txcache files really are the source of most of the merge issues that I have had and have heard of - probably even up to 80-90% of them?  I think those cache files are still changing far too often (and often apparently unnecessarily), and any diffs on them to see what has changed and why it has changed are for the most part completely useless.  I agree with Gino that it may be better to trade a longer 'first build' for avoiding having to deal with those conflicts - add the folder to .gitignore and manage it entirely locally.  And Vassil I think is also right that many times these files are not being checked in consistently - and then when someone does check them in that probably means that the changes and the potential conflicts are greater.  But the easiest way may be to not check them in at all.</p>



<a name="256768229"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179293-committers/git-help/topic/Git%20help%20needed/near/256768229" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179293-committers/git-help/topic/Git.20help.20needed.html#256768229">(Oct 08 2021 at 16:42)</a>:</h4>
<p>I think asking people to use command line is a non-starter.  Some of the GUI tools aren't that intuitive, but the commandline is far worse.</p>



<a name="256770299"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179293-committers/git-help/topic/Git%20help%20needed/near/256770299" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/179293-committers/git-help/topic/Git.20help.20needed.html#256770299">(Oct 08 2021 at 16:57)</a>:</h4>
<p>i actually have no problem with the commandline.  it's pretty much dead simple since there is quite a restricted set of commands you're going to use</p>



<a name="256775803"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179293-committers/git-help/topic/Git%20help%20needed/near/256775803" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179293-committers/git-help/topic/Git.20help.20needed.html#256775803">(Oct 08 2021 at 17:32)</a>:</h4>
<p>Yes, but you're not an example of someone who struggles with Git :)</p>



<a name="256780603"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179293-committers/git-help/topic/Git%20help%20needed/near/256780603" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joel Schneider <a href="https://fhir.github.io/chat-archive/stream/179293-committers/git-help/topic/Git.20help.20needed.html#256780603">(Oct 08 2021 at 18:03)</a>:</h4>
<p>I tend to stick with the git command line, rather than trying to second-guess what some GUI tool might actually be doing.</p>



<a name="256786185"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179293-committers/git-help/topic/Git%20help%20needed/near/256786185" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179293-committers/git-help/topic/Git.20help.20needed.html#256786185">(Oct 08 2021 at 18:41)</a>:</h4>
<p>I'm also one who from my experience finds it often easier and more straightforward to work with the command line rather than the various tools that I've used so far (e.g., GitKraken, TortoiseGit).</p>



<a name="256786442"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179293-committers/git-help/topic/Git%20help%20needed/near/256786442" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Craig Newman <a href="https://fhir.github.io/chat-archive/stream/179293-committers/git-help/topic/Git.20help.20needed.html#256786442">(Oct 08 2021 at 18:43)</a>:</h4>
<p>As someone without much knowledge of the process (and in your target audience), I actually prefer the command line to a tool provided that there is a clear set of steps I can follow (and better yet, cut and paste). Too many menu choices in most of the tools I've tried out.</p>



<a name="256786482"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179293-committers/git-help/topic/Git%20help%20needed/near/256786482" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179293-committers/git-help/topic/Git.20help.20needed.html#256786482">(Oct 08 2021 at 18:43)</a>:</h4>
<p>I haven't wanted to or found a need to use any of the tools for quite some time (although I started by trying GitKraken).</p>



<a name="256790506"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179293-committers/git-help/topic/Git%20help%20needed/near/256790506" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179293-committers/git-help/topic/Git.20help.20needed.html#256790506">(Oct 08 2021 at 19:10)</a>:</h4>
<p>I can't stand the command line. so much typing of file names - what a waste of time</p>



<a name="256790640"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179293-committers/git-help/topic/Git%20help%20needed/near/256790640" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179293-committers/git-help/topic/Git.20help.20needed.html#256790640">(Oct 08 2021 at 19:11)</a>:</h4>
<p>and you might like saying to make the first build last longer - very much longer, but you all like that I can wear that pain once for all of you. otherwise I'll periodically wipe your cache and you'll all have three hour builds.</p>



<a name="256790818"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179293-committers/git-help/topic/Git%20help%20needed/near/256790818" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179293-committers/git-help/topic/Git.20help.20needed.html#256790818">(Oct 08 2021 at 19:12)</a>:</h4>
<p>You very rarely need to type out full file names with tab completion :-)</p>
<p>But I'm not trying to say that there is a one size fits all solution.</p>



<a name="256790886"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179293-committers/git-help/topic/Git%20help%20needed/near/256790886" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179293-committers/git-help/topic/Git.20help.20needed.html#256790886">(Oct 08 2021 at 19:13)</a>:</h4>
<p>I do think it would be helpful to have an in-depth technical discussion, maybe a live conversation, about the overall caching strategies so that we could explore whether other options might be able to meet the needs.</p>



<a name="256792408"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179293-committers/git-help/topic/Git%20help%20needed/near/256792408" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/179293-committers/git-help/topic/Git.20help.20needed.html#256792408">(Oct 08 2021 at 19:24)</a>:</h4>
<p>well, i deleted my entire vscache directory to see how long it would take and I just got a timeout so I couldn't check :)</p>



<a name="256793793"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179293-committers/git-help/topic/Git%20help%20needed/near/256793793" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/179293-committers/git-help/topic/Git.20help.20needed.html#256793793">(Oct 08 2021 at 19:34)</a>:</h4>
<p>okay i'm trying with just deleting the files in the vscache directory and not the entire directory :)</p>



<a name="256801168"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179293-committers/git-help/topic/Git%20help%20needed/near/256801168" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gino Canessa <a href="https://fhir.github.io/chat-archive/stream/179293-committers/git-help/topic/Git.20help.20needed.html#256801168">(Oct 08 2021 at 20:31)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191316">Grahame Grieve</span> <a href="#narrow/stream/179293-committers.2Fgit-help/topic/Git.20help.20needed/near/256790640">said</a>:</p>
<blockquote>
<p>and you might like saying to make the first build last longer - very much longer, but you all like that I can wear that pain once for all of you. otherwise I'll periodically wipe your cache and you'll all have three hour builds.</p>
</blockquote>
<p>I'd argue it's not we 'all'... but yeah, that's usually what users/customers want.  They are asking someone else to take on pain so they don't have to.</p>
<p>The tradeoff doesn't have to be paid in longer build times - for example, it can be paid in development time (though I worry that right now, it's still asking you to bear most of the pain - but that's another discussion).  There are lots of options here: make txCache something that only updates from the main branch builds with another directory for 'local' changes; move txCache into another repo/project/package altogether; make it so that local builds don't modify txCache and just build the local things they need on the fly each time; or if it's only an issue in your environment, identify a process that keeps a 'local' copy of the txCache to swap in and out; etc..</p>
<p>I don't know enough about the caching mechanism of the build process to know what would be the simplest to implement.  But, if the majority of conflicts are in the txCache, then that seems like the best place to start addressing it.</p>
<p>But to my knowledge, there is no tool that allows different people to work on the same files at the same time, has a 'branching' concept for building/testing/exploring, and does not have to deal with merge conflicts.  I don't think it's a tool limitation, but rather a process one (or a physics one, if you want to blame it on linear time =).</p>



<a name="256804401"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179293-committers/git-help/topic/Git%20help%20needed/near/256804401" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179293-committers/git-help/topic/Git.20help.20needed.html#256804401">(Oct 08 2021 at 20:54)</a>:</h4>
<p>Could we have a dual-layer cache - one generated locally and not committed, and one generated by the CI build and auto-committed?  Because there are two layers, we wouldn't have conflicts and everyone would get the benefit of the CI-build maintained cache.</p>



<a name="256826657"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179293-committers/git-help/topic/Git%20help%20needed/near/256826657" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vassil Peytchev <a href="https://fhir.github.io/chat-archive/stream/179293-committers/git-help/topic/Git.20help.20needed.html#256826657">(Oct 09 2021 at 01:06)</a>:</h4>
<p>Wouldn't that mean a 3-hour CI build?</p>



<a name="256826886"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179293-committers/git-help/topic/Git%20help%20needed/near/256826886" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179293-committers/git-help/topic/Git.20help.20needed.html#256826886">(Oct 09 2021 at 01:09)</a>:</h4>
<p>The CI build can support caching strategies. I think the main thing (for me anyway) is to understand the problem better.</p>



<a name="256828711"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179293-committers/git-help/topic/Git%20help%20needed/near/256828711" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179293-committers/git-help/topic/Git.20help.20needed.html#256828711">(Oct 09 2021 at 01:39)</a>:</h4>
<p>The CI build wouldn't have to rebuild from scratch.  It would retain its own cache (which it commits) and would simply update it.  The complexity would be in managing a 2-level cache.</p>



<a name="256828805"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179293-committers/git-help/topic/Git%20help%20needed/near/256828805" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/179293-committers/git-help/topic/Git.20help.20needed.html#256828805">(Oct 09 2021 at 01:40)</a>:</h4>
<p><span class="user-mention silent" data-user-id="222054">Gino Canessa</span> <a href="#narrow/stream/179293-committers.2Fgit-help/topic/Git.20help.20needed/near/256801168">said</a>:</p>
<blockquote>
<p>But to my knowledge, there is no tool that allows different people to work on the same files at the same time, has a 'branching' concept for building/testing/exploring, and does not have to deal with merge conflicts.  I don't think it's a tool limitation, but rather a process one (or a physics one, if you want to blame it on linear time =).</p>
</blockquote>
<p>I think that the merge conflicts are exacerbated by:<br>
a) we have a lot of people making PRs<br>
b) the length of time that our checks take when a PR is submitted is much longer than normal<br>
In previous and current projects that I'm on, the checks run the tests and they take no more than 10 minutes, so the time from a PR request to merging it is short.</p>



<a name="256828811"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179293-committers/git-help/topic/Git%20help%20needed/near/256828811" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179293-committers/git-help/topic/Git.20help.20needed.html#256828811">(Oct 09 2021 at 01:40)</a>:</h4>
<p>Only issue would be the CI-build colliding with itself.  If that happened, I think it'd just revert and not bother committing the cache updates and leave it to the next CI build that didn't collide to commit.</p>



<a name="256830070"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179293-committers/git-help/topic/Git%20help%20needed/near/256830070" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179293-committers/git-help/topic/Git.20help.20needed.html#256830070">(Oct 09 2021 at 02:01)</a>:</h4>
<p>I'm still interested in understanding whether there's an approach to caching that would avoid version control conflicts altogether.</p>



<a name="256835589"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179293-committers/git-help/topic/Git%20help%20needed/near/256835589" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179293-committers/git-help/topic/Git.20help.20needed.html#256835589">(Oct 09 2021 at 03:38)</a>:</h4>
<p>the thing about the txCache files is that it's easy to resolve - just abandon one or the other and move on. It's the other merges that matter. And while it's true that non-locking version control programs lead to merge, I was never afraid of svn merges, and I'm always afraid of git merges</p>



<a name="256849969"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179293-committers/git-help/topic/Git%20help%20needed/near/256849969" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/179293-committers/git-help/topic/Git.20help.20needed.html#256849969">(Oct 09 2021 at 07:48)</a>:</h4>
<p>why would you be afraid of merges via git vs svn?  i'm more afraid of svn merges because of the way that svn treats branches.  as well, I don't think that the concept of a pull request where you can run pre-update checks before a merge occurs exists in SVN.  It didn't back when I was using SVN and a quick web search seems to imply that it doesn't.</p>



<a name="257129879"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179293-committers/git-help/topic/Git%20help%20needed/near/257129879" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179293-committers/git-help/topic/Git.20help.20needed.html#257129879">(Oct 11 2021 at 23:48)</a>:</h4>
<p>well, our infrastructure is better. It's a lot quicker to build without the cache. But it doesn't work - I have some bugs to find and fix</p>



<a name="257130435"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179293-committers/git-help/topic/Git%20help%20needed/near/257130435" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179293-committers/git-help/topic/Git.20help.20needed.html#257130435">(Oct 11 2021 at 23:55)</a>:</h4>
<p>A couple of notes reflecting on this thread:</p>
<ul>
<li>
<p>Before migrating FHIR from svn to git (and this was a primary motivation for the migration), we had a broken build in svn a lot of the time. People would by necessity push their possibly-broken updates onto the already broken head of the repo, which compounded the problem. We don't have that anymore; our main branch in git is protected by pre-merge checks that are really pretty effective. (Yes, this has a cost in the effort of managing these merges, which I'm not trying to minimize.)</p>
</li>
<li>
<p>Grahame when you encounter a situation with a scary merge, maybe jot down the commit hashes of the branches you're merging, and share here; without trying to intervene midstream, we can review after the fact and see if there are any workflow improvements to suggest.</p>
</li>
</ul>



<a name="257130741"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179293-committers/git-help/topic/Git%20help%20needed/near/257130741" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179293-committers/git-help/topic/Git.20help.20needed.html#257130741">(Oct 11 2021 at 23:59)</a>:</h4>
<p>well, most of them are java code, but sure, I can do that</p>



<a name="257131197"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179293-committers/git-help/topic/Git%20help%20needed/near/257131197" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179293-committers/git-help/topic/Git.20help.20needed.html#257131197">(Oct 12 2021 at 00:05)</a>:</h4>
<p>Cool. (The actual java semantics involved in the merge process wouldn't be different between svn and git, right?)</p>



<a name="257131433"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179293-committers/git-help/topic/Git%20help%20needed/near/257131433" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179293-committers/git-help/topic/Git.20help.20needed.html#257131433">(Oct 12 2021 at 00:08)</a>:</h4>
<p>probably not.</p>



<a name="257131489"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179293-committers/git-help/topic/Git%20help%20needed/near/257131489" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179293-committers/git-help/topic/Git.20help.20needed.html#257131489">(Oct 12 2021 at 00:09)</a>:</h4>
<p>it may be the UI - I just can't tell what it's doing line wise. But sometimes, I have no idea what it's even showing me. I had one last week - the diff showed fundamantal change to the structure, but none of the recent commits had anything like that. I just reverted the repo and made my changes again.</p>



<a name="257132447"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179293-committers/git-help/topic/Git%20help%20needed/near/257132447" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179293-committers/git-help/topic/Git.20help.20needed.html#257132447">(Oct 12 2021 at 00:22)</a>:</h4>
<p>oh - and I'm doing this locally as well</p>



<a name="257133839"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179293-committers/git-help/topic/Git%20help%20needed/near/257133839" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179293-committers/git-help/topic/Git.20help.20needed.html#257133839">(Oct 12 2021 at 00:44)</a>:</h4>
<p>Locally resolving is good (but cases where the parent branches exist in GitHub will make the best examples for us to review after the fact).</p>



<a name="257261143"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179293-committers/git-help/topic/Git%20help%20needed/near/257261143" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179293-committers/git-help/topic/Git.20help.20needed.html#257261143">(Oct 12 2021 at 19:47)</a>:</h4>
<p>besides the vscache and other "files that I didn't change, so I don't know what I should do with"..... The other issue I come up against is just understanding the "right" way to do something. These "somethings" might seem obvious to the GIT elite, but I am never quite sure what to do when I am told things like my branch being behind blah blah... these "somethings" should be identified and a set of visual tutorials (we started this github process with some nice visual tutorials).</p>



<a name="257452762"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179293-committers/git-help/topic/Git%20help%20needed/near/257452762" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179293-committers/git-help/topic/Git.20help.20needed.html#257452762">(Oct 13 2021 at 23:04)</a>:</h4>
<p>follow up on this. We could free up a few $$ to pay someone to document 'standard procedures' to resolve common challenges for editors. Would this be useful?</p>



<a name="257452791"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179293-committers/git-help/topic/Git%20help%20needed/near/257452791" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179293-committers/git-help/topic/Git.20help.20needed.html#257452791">(Oct 13 2021 at 23:05)</a>:</h4>
<p>(irrespective of what else we do about cache files)</p>



<a name="257468604"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179293-committers/git-help/topic/Git%20help%20needed/near/257468604" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vassil Peytchev <a href="https://fhir.github.io/chat-archive/stream/179293-committers/git-help/topic/Git.20help.20needed.html#257468604">(Oct 14 2021 at 02:09)</a>:</h4>
<p>I am writing up some expanded wording and diagrams on this, but I don't know exactly what are "common challenges". Would it be useful to investigate your current 202110 branch?</p>



<a name="257468697"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179293-committers/git-help/topic/Git%20help%20needed/near/257468697" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179293-committers/git-help/topic/Git.20help.20needed.html#257468697">(Oct 14 2021 at 02:10)</a>:</h4>
<p>don't know. possibly not - there's a lot of moving parts on that one and it's highly abnormal</p>



<a name="257469468"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179293-committers/git-help/topic/Git%20help%20needed/near/257469468" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vassil Peytchev <a href="https://fhir.github.io/chat-archive/stream/179293-committers/git-help/topic/Git.20help.20needed.html#257469468">(Oct 14 2021 at 02:21)</a>:</h4>
<p>Here are some of the points I am trying to address</p>
<ul>
<li>The slight difference between creating pull requests from a branch vs from a fork</li>
<li>Regularly merge master/main into the local feature branch</li>
<li>Suggest use of kdiff3 to resolve conflicts.</li>
<li>How to commit large number of modified files without typing the file names</li>
</ul>



<a name="259583128"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179293-committers/git-help/topic/Git%20help%20needed/near/259583128" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vassil Peytchev <a href="https://fhir.github.io/chat-archive/stream/179293-committers/git-help/topic/Git.20help.20needed.html#259583128">(Oct 29 2021 at 21:04)</a>:</h4>
<p>I think I have identified an issue that can explain at least some of the unexpected problems when merging things. I also think that it can be mitigated with some creative scripting.</p>
<p>The problem: All along we have been advising people to clone <code>master</code> and then to run the publish process. This makes sense, as we want to make sure that the local setup is done correctly,  and the build can succeed. The problem is that the build modifies tracked files - the famous vscache files, but on occasion others, for example tools/tx/snomed/snomed.xml. This results in a set of files that are modified relative to the <code>master</code> branch but not part of it. If we now create a new branch locally, these modified files are mixing with the new branch. In most(?) cases that is OK, but I think it is a source of endless aggravation of the "death by a thousand cuts" type.</p>
<ul>
<li>
<p>Possible mitigation 1 </p>
<ul>
<li>
<p>Change the steps for making changes to be:</p>
<ol>
<li>clone <code>master</code> locally</li>
<li>create the <em>feature</em> branch</li>
<li>run the build in the <em>feature</em> branch</li>
<li>make changes</li>
<li>run the build</li>
<li>...etc.</li>
</ol>
</li>
<li>
<p>change the build script to not allow the build to run in the <code>master</code> branch</p>
</li>
<li>change the build script to auto commit the changes to any uncommitted files after the build</li>
</ul>
</li>
<li>
<p>Possible mitigation 2</p>
<ul>
<li>Disallow direct branching and pull requests from branches, forcing all PRs to be from a fork. I think this will do more damage than good.</li>
<li>change the build script to auto commit the changes to any uncommitted files after the build</li>
</ul>
</li>
</ul>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> <span class="user-mention" data-user-id="191315">@Josh Mandel</span> <span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> <span class="user-mention" data-user-id="248736">@Mark Iantorno</span></p>



<a name="259583925"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179293-committers/git-help/topic/Git%20help%20needed/near/259583925" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179293-committers/git-help/topic/Git.20help.20needed.html#259583925">(Oct 29 2021 at 21:12)</a>:</h4>
<blockquote>
<p>This results in a set of files that are modified relative to the master branch but not part of it. If we now create a new branch locally, these modified files are mixing with the new branch</p>
</blockquote>
<p>I don't know what those sentences mean</p>



<a name="259586275"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179293-committers/git-help/topic/Git%20help%20needed/near/259586275" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vassil Peytchev <a href="https://fhir.github.io/chat-archive/stream/179293-committers/git-help/topic/Git.20help.20needed.html#259586275">(Oct 29 2021 at 21:36)</a>:</h4>
<p>Let's take tools/tx/snomed/snomed.xml - somehow the single quote in a description (cow's milk) got mangled into a sequence of the characters  '?' '&#8364;' '&#8482;' - before the build the euro and tm characters were represented by the corresponding entity codes, after the build they were converted to the actual characters. The file is now marked as modified. <code>git status</code> will show it as modified, but not staged for commit.</p>
<p>If you create a branch: <code>git checkout -b test_branch</code> all the modified files that are not staged for commit will be in the new branch. <code>git status</code> will show them as part of the current branch. In most cases that is not a problem - if you now commit the modified files while in the <code>test_branch</code>, they will not show up in the <code>master</code> branch as modified. </p>
<p>I think the problems may arise when not everything is properly committed, or things get committed by mistake in the <code>master</code> branch instead of the <code>test_branch</code>.</p>



<a name="259586383"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179293-committers/git-help/topic/Git%20help%20needed/near/259586383" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179293-committers/git-help/topic/Git.20help.20needed.html#259586383">(Oct 29 2021 at 21:37)</a>:</h4>
<p>I don't understand why changing the branch makes any difference. You still have a modified file to do something about</p>



<a name="259587127"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179293-committers/git-help/topic/Git%20help%20needed/near/259587127" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vassil Peytchev <a href="https://fhir.github.io/chat-archive/stream/179293-committers/git-help/topic/Git.20help.20needed.html#259587127">(Oct 29 2021 at 21:47)</a>:</h4>
<p>True, but are the modifications from the first build run necessary after your run the build after you make changes? Does it matter if you commit them before you run your next build?</p>
<p>I think the more we limit the chances of confusion of which branch we are modifying, the less will people experience edge cases that are hard to resolve.</p>



<a name="259587998"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179293-committers/git-help/topic/Git%20help%20needed/near/259587998" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179293-committers/git-help/topic/Git.20help.20needed.html#259587998">(Oct 29 2021 at 21:58)</a>:</h4>
<p>it means someone else should have committed them</p>



<a name="259916991"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179293-committers/git-help/topic/Git%20help%20needed/near/259916991" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179293-committers/git-help/topic/Git.20help.20needed.html#259916991">(Nov 01 2021 at 20:32)</a>:</h4>
<blockquote>
<p>are the modifications from the first build run necessary after your run the build after you make changes? </p>
</blockquote>
<p>no. they'll just keep getting made </p>
<blockquote>
<p>Does it matter if you commit them before you run your next build?</p>
</blockquote>
<p>no</p>



<a name="259917215"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179293-committers/git-help/topic/Git%20help%20needed/near/259917215" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179293-committers/git-help/topic/Git.20help.20needed.html#259917215">(Nov 01 2021 at 20:34)</a>:</h4>
<p>so it presently takes my build 17 minutes longer to run without the vsCache. I can get rid of the files in vsCache, which means that </p>
<ul>
<li>everybody's first build of a new checkout will get ~20mins longer</li>
<li>the ci-build will get 20min longer</li>
</ul>



<a name="259918226"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179293-committers/git-help/topic/Git%20help%20needed/near/259918226" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vassil Peytchev <a href="https://fhir.github.io/chat-archive/stream/179293-committers/git-help/topic/Git.20help.20needed.html#259918226">(Nov 01 2021 at 20:41)</a>:</h4>
<p>I think it is fairly straight forward to force committing any changes in vscache, source, and tools as part of the build script. That will save the 20 minutes of build, and will avoid issues with missing generated files.</p>



<a name="259918313"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179293-committers/git-help/topic/Git%20help%20needed/near/259918313" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vassil Peytchev <a href="https://fhir.github.io/chat-archive/stream/179293-committers/git-help/topic/Git.20help.20needed.html#259918313">(Nov 01 2021 at 20:42)</a>:</h4>
<p>I will create a PR to modify <a href="http://publish.sh">publish.sh</a></p>



<a name="259918667"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179293-committers/git-help/topic/Git%20help%20needed/near/259918667" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179293-committers/git-help/topic/Git.20help.20needed.html#259918667">(Nov 01 2021 at 20:45)</a>:</h4>
<p>I don't understand how a build script can force people to commit something when it doesn't cover the commit?</p>



<a name="259919817"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179293-committers/git-help/topic/Git%20help%20needed/near/259919817" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vassil Peytchev <a href="https://fhir.github.io/chat-archive/stream/179293-committers/git-help/topic/Git.20help.20needed.html#259919817">(Nov 01 2021 at 20:53)</a>:</h4>
<p>The script will list all new files that have not been added into the "stage" (i.e. no <code>git add</code>). Then it will loop through them, and if they are under  one of tools/ vscache/ or source/ it will do a <code>git add</code> to them. After that, a <code>git commit -am "Auto-commit courtesy to the publish script"</code> will commit both those, and any modified but not committed files.</p>



<a name="259919959"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179293-committers/git-help/topic/Git%20help%20needed/near/259919959" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179293-committers/git-help/topic/Git.20help.20needed.html#259919959">(Nov 01 2021 at 20:54)</a>:</h4>
<p>wooah so git commits everything any time the build runs?</p>



<a name="259922381"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179293-committers/git-help/topic/Git%20help%20needed/near/259922381" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vassil Peytchev <a href="https://fhir.github.io/chat-archive/stream/179293-committers/git-help/topic/Git.20help.20needed.html#259922381">(Nov 01 2021 at 21:13)</a>:</h4>
<p>Under certain folders. It can be limited to vscache/ only. <br>
What is the use case for not committing everything that goes into the build?</p>



<a name="259923642"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179293-committers/git-help/topic/Git%20help%20needed/near/259923642" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179293-committers/git-help/topic/Git.20help.20needed.html#259923642">(Nov 01 2021 at 21:25)</a>:</h4>
<p>I'm working on some stuff, and I run the build to see if it works.</p>



<a name="259923753"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179293-committers/git-help/topic/Git%20help%20needed/near/259923753" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vassil Peytchev <a href="https://fhir.github.io/chat-archive/stream/179293-committers/git-help/topic/Git.20help.20needed.html#259923753">(Nov 01 2021 at 21:26)</a>:</h4>
<p>What's the downside of having committed it?</p>



<a name="259948825"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179293-committers/git-help/topic/Git%20help%20needed/near/259948825" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179293-committers/git-help/topic/Git.20help.20needed.html#259948825">(Nov 02 2021 at 03:06)</a>:</h4>
<p>Commits should generally reflect an intent, and the commit history should tell a story (not just the story "Then I built. Then I built. Then I built...").</p>



<a name="259948852"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179293-committers/git-help/topic/Git%20help%20needed/near/259948852" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179293-committers/git-help/topic/Git.20help.20needed.html#259948852">(Nov 02 2021 at 03:07)</a>:</h4>
<p>But if there were really practical wins in abandoning this ideal... I think they'd be worth evaluating.</p>



<a name="260235806"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179293-committers/git-help/topic/Git%20help%20needed/near/260235806" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179293-committers/git-help/topic/Git.20help.20needed.html#260235806">(Nov 04 2021 at 07:13)</a>:</h4>
<p>looks likely that I'm going to replace vsCache altogether anyway, and they'll no longer be in version control. Josh and I worked out an alternative approach that will work better, actually, and it doesn't have merge clashes.</p>



<a name="260235867"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179293-committers/git-help/topic/Git%20help%20needed/near/260235867" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179293-committers/git-help/topic/Git.20help.20needed.html#260235867">(Nov 04 2021 at 07:14)</a>:</h4>
<p>I'm not going to describe it quite yet - still doing research whether it's feasible. But if it is... than those files will disappear (main build first, and then, when that's bedded down, the IGs as well)</p>



<a name="260270629"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179293-committers/git-help/topic/Git%20help%20needed/near/260270629" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vassil Peytchev <a href="https://fhir.github.io/chat-archive/stream/179293-committers/git-help/topic/Git.20help.20needed.html#260270629">(Nov 04 2021 at 13:41)</a>:</h4>
<p>Another possible source of merge clashes might be the use of <code>rebase</code> instead of <code>merge</code>. While we never mention <code>rebase</code> in  any of the instructions, there was at least one mention of it in previous answers to git questions.</p>
<p>Anyone seeing an issue with explicitly stating in the instructions not to use <code>rebase</code> for PRs?</p>



<a name="260312879"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179293-committers/git-help/topic/Git%20help%20needed/near/260312879" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179293-committers/git-help/topic/Git.20help.20needed.html#260312879">(Nov 04 2021 at 18:19)</a>:</h4>
<p>I don't know what it is and would never do it</p>



<a name="260314702"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179293-committers/git-help/topic/Git%20help%20needed/near/260314702" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179293-committers/git-help/topic/Git.20help.20needed.html#260314702">(Nov 04 2021 at 18:32)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span>  Rebase definitely has its uses.  I just used it to streamline our commits (primarily consolidating and removing all of the excess "update txcache" commits) and then moving only the needed updates from our IPS development (i.e. 'connectathon*') branches into the CI build.  The interactive rebase worked quite well for that.  But typically you do <strong>not</strong> want to do that (or at least do it <strong>very</strong> judiciously) with any commits that have been pushed to a central repository and others may have accessed and are using.  I agree with <span class="user-mention" data-user-id="192685">@Vassil Peytchev</span> that inappropriate use of rebase would certainly be a source of merge conflicts.</p>



<a name="260315237"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179293-committers/git-help/topic/Git%20help%20needed/near/260315237" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179293-committers/git-help/topic/Git.20help.20needed.html#260315237">(Nov 04 2021 at 18:36)</a>:</h4>
<p>Yeah, I wouldn't "forbid" rebasing for users that want to take this upon themselves during branch development on their own machines, but we've (since the beginning) configured the GitHub web interface for the FHIR repo to only allow merges, not rebases: </p>
<p><a href="/user_uploads/10155/66pQIu4UkMlzoy2lhIsGscyy/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/10155/66pQIu4UkMlzoy2lhIsGscyy/image.png" title="image.png"><img src="/user_uploads/10155/66pQIu4UkMlzoy2lhIsGscyy/image.png"></a></div>



<a name="260315631"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179293-committers/git-help/topic/Git%20help%20needed/near/260315631" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vassil Peytchev <a href="https://fhir.github.io/chat-archive/stream/179293-committers/git-help/topic/Git.20help.20needed.html#260315631">(Nov 04 2021 at 18:39)</a>:</h4>
<p>How about the step before - locally merge master into feature branch?</p>



<a name="260318998"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179293-committers/git-help/topic/Git%20help%20needed/near/260318998" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179293-committers/git-help/topic/Git.20help.20needed.html#260318998">(Nov 04 2021 at 19:03)</a>:</h4>
<p>This is something developers can control how they want to do on their own side. I think our recommendations should be just to do simple merges, but if a developer wants to rebase for some reason it's really up to them, or I would say it's below the abstraction barrier because we don't have direct insight into what happens there.</p>



<a name="260319637"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179293-committers/git-help/topic/Git%20help%20needed/near/260319637" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179293-committers/git-help/topic/Git.20help.20needed.html#260319637">(Nov 04 2021 at 19:08)</a>:</h4>
<p>Agree.</p>



<a name="260321484"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179293-committers/git-help/topic/Git%20help%20needed/near/260321484" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vassil Peytchev <a href="https://fhir.github.io/chat-archive/stream/179293-committers/git-help/topic/Git.20help.20needed.html#260321484">(Nov 04 2021 at 19:24)</a>:</h4>
<p>I think using rebase to pull changes  from master into the feature branch since the branch was created is dangerous. I want to put a warning <a href="https://github.com/hl7/fhir/wiki/Get-Started-with-FHIR-on-GitHub">on step 8 here</a> not to use <code>rebase</code>.</p>



<a name="260950067"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179293-committers/git-help/topic/Git%20help%20needed/near/260950067" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179293-committers/git-help/topic/Git.20help.20needed.html#260950067">(Nov 10 2021 at 06:17)</a>:</h4>
<p>see <a href="#narrow/stream/179165-committers/topic/txCache.20is.20out">https://chat.fhir.org/#narrow/stream/179165-committers/topic/txCache.20is.20out</a> about the tx-cache</p>



<a name="261001514"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179293-committers/git-help/topic/Git%20help%20needed/near/261001514" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179293-committers/git-help/topic/Git.20help.20needed.html#261001514">(Nov 10 2021 at 14:59)</a>:</h4>
<p>Fine by me to add a warning; folks should not use rebase unless they know what they're doing and why</p>



<a name="261018326"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179293-committers/git-help/topic/Git%20help%20needed/near/261018326" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179293-committers/git-help/topic/Git.20help.20needed.html#261018326">(Nov 10 2021 at 16:52)</a>:</h4>
<p>who is using rebase without knowing what it is or why... I certainly don't have a clue</p>



<a name="261051494"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179293-committers/git-help/topic/Git%20help%20needed/near/261051494" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Egger <a href="https://fhir.github.io/chat-archive/stream/179293-committers/git-help/topic/Git.20help.20needed.html#261051494">(Nov 10 2021 at 20:39)</a>:</h4>
<p>For individuals, rebasing makes a lot of sense <span aria-label="grinning" class="emoji emoji-1f600" role="img" title="grinning">:grinning:</span> see <a href="https://medium.datadriveninvestor.com/git-rebase-vs-merge-cc5199edd77c">https://medium.datadriveninvestor.com/git-rebase-vs-merge-cc5199edd77c</a>. i often us it for ig development before merging it into the main to have  the history streamlined.</p>



<a name="261054365"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179293-committers/git-help/topic/Git%20help%20needed/near/261054365" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vassil Peytchev <a href="https://fhir.github.io/chat-archive/stream/179293-committers/git-help/topic/Git.20help.20needed.html#261054365">(Nov 10 2021 at 21:03)</a>:</h4>
<p>Key paragraph from the link, and, AFAIK, reflecting generally accepted best practices (emphasis mine):</p>
<blockquote>
<p>If the feature branch you are getting changes from is <strong>shared with other developers</strong>, rebasing is <strong>not recommended</strong>, because the rebasing process will create <strong>inconsistent repositories</strong>. For individuals, rebasing makes a lot of sense.</p>
</blockquote>
<p>Since pull requests need to pass the build checks, I view these branches as <strong>shared with other developers</strong>. But mainly, the step when you merge <code>master</code> into the feature branch in order to run the build locally and confirm that nothing is broken, should never be a rebase.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
