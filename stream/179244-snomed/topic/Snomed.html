---
layout: page
title: "FHIR Chat  · Snomed · snomed"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179244-snomed/index.html">snomed</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179244-snomed/topic/Snomed.html">Snomed</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="188958292"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179244-snomed/topic/Snomed/near/188958292" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Naveen Mallela <a href="https://fhir.github.io/chat-archive/stream/179244-snomed/topic/Snomed.html#188958292">(Feb 24 2020 at 19:36)</a>:</h4>
<p>Naveen Mallela2:09 PM<br>
Hello everyone,</p>
<p>Please help me with the snomed CT API query if you have implemented the same for Fhir.</p>
<p><a href="http://hl7.org/fhir/R4/valueset-clinical-findings.html" target="_blank" title="http://hl7.org/fhir/R4/valueset-clinical-findings.html">http://hl7.org/fhir/R4/valueset-clinical-findings.html</a></p>
<p>I'm trying to fetch Fhir Snomed CT Clinical Findings grammatically by calling the Restful API (Snomstorm).<br>
The URI for the API call is <a href="https://snowstorm.ihtsdotools.org/snowstorm/snomed-ct/MAIN%2F2020-01-31/concepts/404684003/descendants?stated=false&amp;offset=0&amp;limit=10000" target="_blank" title="https://snowstorm.ihtsdotools.org/snowstorm/snomed-ct/MAIN%2F2020-01-31/concepts/404684003/descendants?stated=false&amp;offset=0&amp;limit=10000">https://snowstorm.ihtsdotools.org/snowstorm/snomed-ct/MAIN%2F2020-01-31/concepts/404684003/descendants?stated=false&amp;offset=0&amp;limit=10000</a></p>
<p>The issue i'm facing is the max limit we can fetch Concepts is 10,000. How do we fetch records from 10,001 to 20,000 and so on until we get all the concepts?</p>
<p>Thanks, Naveen</p>



<a name="188969002"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179244-snomed/topic/Snomed/near/188969002" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Peter Jordan <a href="https://fhir.github.io/chat-archive/stream/179244-snomed/topic/Snomed.html#188969002">(Feb 24 2020 at 21:40)</a>:</h4>
<p>That's not a FHIR API call. Maybe <span class="user-mention" data-user-id="192993">@Peter Williams</span>  of SNOMED International can help you with that particular API.</p>



<a name="188995456"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179244-snomed/topic/Snomed/near/188995456" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179244-snomed/topic/Snomed.html#188995456">(Feb 25 2020 at 06:47)</a>:</h4>
<p>The FHIR way would be <code>[base]/$expand?url=http://hl7.org/fhir/ValueSet/clinical-findings&amp;count=10000&amp;offset=10000</code></p>



<a name="189023726"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179244-snomed/topic/Snomed/near/189023726" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Peter Williams <a href="https://fhir.github.io/chat-archive/stream/179244-snomed/topic/Snomed.html#189023726">(Feb 25 2020 at 14:29)</a>:</h4>
<p>Yes, internally our server would have difficulty returning more than 10K concepts with a count/offset approach.   The Snowstorm API allows for using "searchAfter", but as <span class="user-mention" data-user-id="191364">@Peter Jordan</span>  says this is not the FHIR API we're talking about here.   <span class="user-mention" data-user-id="266495">@Naveen Mallela</span>  has been in contact with our helpdesk directly.   Thanks all!</p>



<a name="189328666"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179244-snomed/topic/Snomed/near/189328666" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Naveen Mallela <a href="https://fhir.github.io/chat-archive/stream/179244-snomed/topic/Snomed.html#189328666">(Feb 28 2020 at 17:03)</a>:</h4>
<p>Thanks a lot Peter. Rory helped me getting on the call and showing me how to do it. He suggested me to install a local version of Snomstorm and we were able to make it work. Thanks a lot again.</p>



<a name="189328835"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179244-snomed/topic/Snomed/near/189328835" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Naveen Mallela <a href="https://fhir.github.io/chat-archive/stream/179244-snomed/topic/Snomed.html#189328835">(Feb 28 2020 at 17:05)</a>:</h4>
<p><span class="user-mention" data-user-id="192993">@Peter Williams</span> Thanks a lot Peter. Rory helped me getting on the call and showing me how to do it. He suggested me to install a local version of Snomstorm and we were able to make it work. Thanks a lot again.</p>



<a name="189329382"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179244-snomed/topic/Snomed/near/189329382" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Peter Williams <a href="https://fhir.github.io/chat-archive/stream/179244-snomed/topic/Snomed.html#189329382">(Feb 28 2020 at 17:10)</a>:</h4>
<p>Awesome!</p>



<a name="189331032"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179244-snomed/topic/Snomed/near/189331032" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Naveen Mallela <a href="https://fhir.github.io/chat-archive/stream/179244-snomed/topic/Snomed.html#189331032">(Feb 28 2020 at 17:28)</a>:</h4>
<p>Thank you <span class="user-mention" data-user-id="191343">@Michael Lawley</span>  </p>
<p>The correct way to fetch records for more than 10,000 is to use the endpoint "concepts" instead of "descendents". The &lt; should be append to the code we are searching and it will return all the descendents. <br>
Example below "&lt;404684003" as the concept ID.</p>
<p>1) The first query will return the first 10,000 using the URL<br>
<a href="http://localhost:8080/MAIN/concepts?ecl=%3C404684003&amp;offset=0&amp;limit=10000" target="_blank" title="http://localhost:8080/MAIN/concepts?ecl=%3C404684003&amp;offset=0&amp;limit=10000">http://localhost:8080/MAIN/concepts?ecl=%3C404684003&amp;offset=0&amp;limit=10000</a></p>
<p>2) If we scroll to the end of the response we can find the properties total, limit, searchAfter and searchAfterArray.<br>
"total":113597,"limit":500,"searchAfter":"WzE1Njg1MjAxMDAwMTE5MTAwXQ==","searchAfterArray":[15685201000119100]</p>
<p>So we take the value of searchAfter and add a new URL request header "searchAfter" and use the value of searchAfter=.</p>
<p>Since its url, we need to replace = value as "%3D". So the actual url looks like below. </p>
<p>3) <a href="http://localhost:8080/MAIN/concepts?ecl=%3C404684003&amp;offset=0&amp;limit=500&amp;searchAfter=WzE2MDA2MTExMDAwMTE5MTA3XQ%3D%3D" target="_blank" title="http://localhost:8080/MAIN/concepts?ecl=%3C404684003&amp;offset=0&amp;limit=500&amp;searchAfter=WzE2MDA2MTExMDAwMTE5MTA3XQ%3D%3D">http://localhost:8080/MAIN/concepts?ecl=%3C404684003&amp;offset=0&amp;limit=500&amp;searchAfter=WzE2MDA2MTExMDAwMTE5MTA3XQ%3D%3D</a></p>
<p>for the next 10K we follow the same process.</p>
<p>Thanks, Naveen</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
