---
layout: page
title: "FHIR Chat  · New Validator Release with Significant Bug Fix · Announcements"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179240-Announcements/index.html">Announcements</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179240-Announcements/topic/New.20Validator.20Release.20with.20Significant.20Bug.20Fix.html">New Validator Release with Significant Bug Fix</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="172009761"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179240-Announcements/topic/New%20Validator%20Release%20with%20Significant%20Bug%20Fix/near/172009761" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179240-Announcements/topic/New.20Validator.20Release.20with.20Significant.20Bug.20Fix.html#172009761">(Jul 30 2019 at 06:37)</a>:</h4>
<p>I am about to release a new version of the Java validator which contains a significant bug fix:</p>
<p>If a profile specifies a fixed value, and it had a null for any element in the fixed value (in the profile), then the validator would ignore any provided value for the specified element in any instances that were supposed to conform to the profile. </p>
<p>Note that it's not valid, if you have a fixed value, and it has a null, for the instance not to have null, but this wasn't being checked. It will be now. Resources previously wrongly validating ok will now be picked up as an error</p>



<a name="173017196"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179240-Announcements/topic/New%20Validator%20Release%20with%20Significant%20Bug%20Fix/near/173017196" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179240-Announcements/topic/New.20Validator.20Release.20with.20Significant.20Bug.20Fix.html#173017196">(Aug 12 2019 at 11:58)</a>:</h4>
<p>I find these kind of bugs in my validator to be some of the worst.  Fixing them is really a breaking change, and requires a major version update of the library - but still people may find that hundreds or thousands of entries in their database are now invalid.  So far, whenever I have tried to tighten up validation like this, I had so much pushback, that I had to add another option in the settings to disable the checks again.  I know this will not help interop, but I understand the practicalities for my users.   I wonder what others think on how to deal with these kind of issues.....</p>



<a name="173020249"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179240-Announcements/topic/New%20Validator%20Release%20with%20Significant%20Bug%20Fix/near/173020249" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179240-Announcements/topic/New.20Validator.20Release.20with.20Significant.20Bug.20Fix.html#173020249">(Aug 12 2019 at 12:53)</a>:</h4>
<p>It's a tough thing. <a href="https://doc.rust-lang.org/edition-guide/editions/index.html#compatibility" target="_blank" title="https://doc.rust-lang.org/edition-guide/editions/index.html#compatibility">https://doc.rust-lang.org/edition-guide/editions/index.html#compatibility</a> is one example of a model where users (in their case: library authors) explicitly options in to a specific edition of the language, but each new compiler release supports all editions.</p>



<a name="173020315"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179240-Announcements/topic/New%20Validator%20Release%20with%20Significant%20Bug%20Fix/near/173020315" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179240-Announcements/topic/New.20Validator.20Release.20with.20Significant.20Bug.20Fix.html#173020315">(Aug 12 2019 at 12:54)</a>:</h4>
<p>In FHIR validation terms, this is basically like producing a validator that supports all previous behaviors, so a piece of software using this validator can validate at different levels In different contexts. To take your example <span class="user-mention" data-user-id="191328">@Ewout Kramer</span> , they may opt into older rules when validating historical database entries, but opt into the newest rules when processing new resources to be stored in the database.</p>



<a name="173020338"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179240-Announcements/topic/New%20Validator%20Release%20with%20Significant%20Bug%20Fix/near/173020338" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179240-Announcements/topic/New.20Validator.20Release.20with.20Significant.20Bug.20Fix.html#173020338">(Aug 12 2019 at 12:54)</a>:</h4>
<p>Er, moving this discussion to <a class="stream" data-stream-id="179166" href="/#narrow/stream/179166-implementers">#implementers</a></p>



<a name="182155899"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179240-Announcements/topic/New%20Validator%20Release%20with%20Significant%20Bug%20Fix/near/182155899" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179240-Announcements/topic/New.20Validator.20Release.20with.20Significant.20Bug.20Fix.html#182155899">(Nov 29 2019 at 07:22)</a>:</h4>
<p>Well, I am yet again releasing a validator with significant bug fixes:</p>
<ul>
<li>I found that my fixed value fix from before was not always effective (false postives)</li>
<li>pattern matching wasn't really working (false negatives and false positives)</li>
<li>Invariants on elements other than the root resource weren't being checked (false positives)</li>
</ul>
<p>(where false positive = falsely calling a resource ok)</p>



<a name="182665098"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179240-Announcements/topic/New%20Validator%20Release%20with%20Significant%20Bug%20Fix/near/182665098" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Kramer <a href="https://fhir.github.io/chat-archive/stream/179240-Announcements/topic/New.20Validator.20Release.20with.20Significant.20Bug.20Fix.html#182665098">(Dec 05 2019 at 14:44)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> Does the validator support the feature of comparing two profiles, as you demonstrated at the last WG meeting? Is there code in there capable of merging two StructureDefinitions to create another explicit StructureDefinition with the combined constraints (e.g., intersection of cardinality)?</p>



<a name="182686244"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179240-Announcements/topic/New%20Validator%20Release%20with%20Significant%20Bug%20Fix/near/182686244" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179240-Announcements/topic/New.20Validator.20Release.20with.20Significant.20Bug.20Fix.html#182686244">(Dec 05 2019 at 18:09)</a>:</h4>
<p>follow up here: <a href="#narrow/stream/179177-conformance/topic/New.20Validator.20Release.20with.20Significant.20Bug.20Fix" title="#narrow/stream/179177-conformance/topic/New.20Validator.20Release.20with.20Significant.20Bug.20Fix">https://chat.fhir.org/#narrow/stream/179177-conformance/topic/New.20Validator.20Release.20with.20Significant.20Bug.20Fix</a></p>



<a name="182713074"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179240-Announcements/topic/New%20Validator%20Release%20with%20Significant%20Bug%20Fix/near/182713074" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shovan Roy <a href="https://fhir.github.io/chat-archive/stream/179240-Announcements/topic/New.20Validator.20Release.20with.20Significant.20Bug.20Fix.html#182713074">(Dec 05 2019 at 22:47)</a>:</h4>
<p>(deleted)</p>



<a name="182713315"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179240-Announcements/topic/New%20Validator%20Release%20with%20Significant%20Bug%20Fix/near/182713315" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179240-Announcements/topic/New.20Validator.20Release.20with.20Significant.20Bug.20Fix.html#182713315">(Dec 05 2019 at 22:50)</a>:</h4>
<p>yes please do not ask questions like this in Announcements. Ask on <a class="stream" data-stream-id="179252" href="/#narrow/stream/179252-IG-creation">#IG creation</a></p>



<a name="189932020"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179240-Announcements/topic/New%20Validator%20Release%20with%20Significant%20Bug%20Fix/near/189932020" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179240-Announcements/topic/New.20Validator.20Release.20with.20Significant.20Bug.20Fix.html#189932020">(Mar 06 2020 at 20:43)</a>:</h4>
<p>Yet another announcement of a significant bug fix in the validator: for properties that have a primitive type which are a list, it has not been checking that the JsonElement is an array. E.g. for Resource.meta.profile, which is a string with <code>cardinality 0..*</code>, the right format is this:</p>
<div class="codehilite"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;resourceType&quot;</span><span class="p">:</span> <span class="s2">&quot;XX&quot;</span><span class="p">,</span>
  <span class="nt">&quot;meta&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;profile&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;YY&quot;</span><span class="p">]</span>
  <span class="p">},</span>
</pre></div>


<p>but the validator has also been accepting this as valid:</p>
<div class="codehilite"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;resourceType&quot;</span><span class="p">:</span> <span class="s2">&quot;XX&quot;</span><span class="p">,</span>
  <span class="nt">&quot;meta&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;profile&quot;</span><span class="p">:</span> <span class="s2">&quot;YY&quot;</span>
  <span class="p">},</span>
</pre></div>


<p>This is true for <em>all</em> properties, not just Meta.profile. The next release of the validator fixes this, and it will now flag this as an error</p>



<a name="189932144"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179240-Announcements/topic/New%20Validator%20Release%20with%20Significant%20Bug%20Fix/near/189932144" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179240-Announcements/topic/New.20Validator.20Release.20with.20Significant.20Bug.20Fix.html#189932144">(Mar 06 2020 at 20:44)</a>:</h4>
<p>I expect the next version to be released sometime in the next 48 hours</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
