---
layout: page
title: "FHIR Chat  · Signed FHIR Requests · subscriptions"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/index.html">subscriptions</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Signed.20FHIR.20Requests.html">Signed FHIR Requests</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="225991915"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Signed%20FHIR%20Requests/near/225991915" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Morgan <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Signed.20FHIR.20Requests.html#225991915">(Feb 11 2021 at 13:49)</a>:</h4>
<p>I'm currently looking at AWS HealthLake, in particular trying to use a HealthLake DataStore to be the target HTTP hook endpoint for a FHIR subscription created on a remote server.<br>
All requests to AWS HealthLake need to be authenticated using a HTTP header containing a signed digest of the message (signed with an AWS IAM user access and secret key).  <a href="https://docs.aws.amazon.com/general/latest/gr/signing_aws_api_requests.html">AWS Docs</a><br>
It's my understanding that both the R4 and R5 specs only allow for setting a static HTTP header (e.g. bearer token), and that it won't be possible to subscribe to a FHIR server and tell it to sign any subscription bundles that it's sending back?</p>



<a name="226017846"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Signed%20FHIR%20Requests/near/226017846" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Signed.20FHIR.20Requests.html#226017846">(Feb 11 2021 at 16:27)</a>:</h4>
<p>This sounds like it'd need to be a custom channel (something we're introducing in R5) rather than a standard REST Hook.</p>



<a name="226018301"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Signed%20FHIR%20Requests/near/226018301" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Signed.20FHIR.20Requests.html#226018301">(Feb 11 2021 at 16:31)</a>:</h4>
<p>Would be a great project to prototype  in time for the May Connectathon if someone's interested in developing server-side support for this. The "scaling" issue though is: every server you care about would need to support this custom method specifically for talking with AWS. Two alternatives:</p>
<ul>
<li>develop a proxy (e.g., maybe a small cloud function / lambda) to receive FHIR Rest Hooks inbound, and sign/forward to HealthLake</li>
<li>standardize a signature algorithm that AWS and other "catchers" could agree to</li>
</ul>



<a name="226027537"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Signed%20FHIR%20Requests/near/226027537" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Church <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Signed.20FHIR.20Requests.html#226027537">(Feb 11 2021 at 17:30)</a>:</h4>
<p>Google had somewhat similar conclusions from looking into the bearer token on REST hook subscriptions - it's really problematic for the server to hang onto a bunch of very sensitive bearer tokens from various clients, plus managing their renewal etc. Our solution-level answer has been Josh's first suggestion, have an API proxy on the client side that holds the credentials to a cloud service account and can forward inbound requests. Then you can lock down that proxy so only the right server can talk to it, its service account can only do certain operations, and it can be monitored.</p>
<p>It might be nice to standardize something but I suspect it will be tricky.</p>



<a name="226041974"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Signed%20FHIR%20Requests/near/226041974" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Morgan <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Signed.20FHIR.20Requests.html#226041974">(Feb 11 2021 at 19:09)</a>:</h4>
<p>Thanks. We'd also thought of proxying the requests, it does feel a shame to bypass AWS's quite nice security mechanisms, but needs must I guess.</p>



<a name="226042689"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Signed%20FHIR%20Requests/near/226042689" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Church <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Signed.20FHIR.20Requests.html#226042689">(Feb 11 2021 at 19:13)</a>:</h4>
<p>Well this is a bit of a standards vs. reality situation, if you control the server implementation you could make it send subscription notifications with proper AWS auth (or GCP, Azure, etc.) This group is likely open to standardizing something to address this use case if we can just come up with what it would be!</p>



<a name="226044162"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Signed%20FHIR%20Requests/near/226044162" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gino Canessa <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Signed.20FHIR.20Requests.html#226044162">(Feb 11 2021 at 19:23)</a>:</h4>
<p>Yep, +1 to what they said  =).  I think the proxy solution will be the most 'generic' (e.g., any server will know how to communicate with it), and will definitely be easier to spin up in the short term.</p>
<p>That said, I do hope to see 'platform' channels in time (again, with a fallback to a REST proxy).  Especially since the cloud providers typically also have custom protocols that may be desired over stock FHIR + REST.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
