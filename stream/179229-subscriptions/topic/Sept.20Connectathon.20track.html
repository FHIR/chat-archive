---
layout: page
title: "FHIR Chat  · Sept Connectathon track · subscriptions"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/index.html">subscriptions</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html">Sept Connectathon track</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153891705"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153891705" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Isaac Vetter <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153891705">(May 30 2017 at 20:00)</a>:</h4>
<p>@<strong>Brian Postlethwaite (new)</strong> , <span class="user-mention" data-user-id="191375">@Alexander Henket</span> , <span class="user-mention" data-user-id="191757">@Christiaan Knaap</span>, <span class="user-mention" data-user-id="191914">@Danielle Friend</span>, <span class="user-mention" data-user-id="191328">@Ewout Kramer</span>   - We talked about starting a connectathon track for FHIR subscriptions in Sept. Connectathon tracks should be submitted by next Wednesday. The rough proposal below limits us to only creating the resource and only sending/receiving a full FHIR resource (instead of a ping). </p>
<p>What do you think? Are you still interested / available in working on this? Who else would be interested?</p>
<p>Expected Participants:</p>
<ul>
<li>Brian Postlethwaite</li>
<li>Alexander Henket</li>
<li>Christiaan Knapp</li>
<li>Ewout Kramer?</li>
<li>?</li>
</ul>
<p>Roles:</p>
<ul>
<li>
<p>FHIR Subscriptions server<br>
** The FHIR Server supports the Subscription resource and pushing relevant FHIR resources to client.</p>
</li>
<li>
<p>FHIR Subscribing client<br>
** Subscribes to FHIR server and gets updates.</p>
</li>
</ul>
<p>Scenarios:</p>
<ul>
<li>
<p>Create FHIR Subscription<br>
** Action: Support Subscription resource writes. <br>
** Precondition: n/a<br>
** Success Criteria:  Client POSTs new subscription resource to FHIR server. FHIR server persists active subscription resource.<br>
** Bonus Point: FHIR server support searching and reading Subscription resources.</p>
</li>
<li>
<p>REST Hook with payload of "payload": "application/fhir+json"<br>
** Action: Support pushing FHIR resources.<br>
** Precondition: n/a<br>
** Success Criteria: FHIR server pushes FHIR payload of relevant resource using REST Hook.<br>
** Bonus point: n/a</p>
</li>
</ul>



<a name="153891738"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153891738" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153891738">(May 31 2017 at 01:13)</a>:</h4>
<p>I am an expected participant. </p>



<a name="153891739"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153891739" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153891739">(May 31 2017 at 01:13)</a>:</h4>
<p>thanks.</p>



<a name="153891740"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153891740" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153891740">(May 31 2017 at 01:28)</a>:</h4>
<p>however this is just purely testing existing functionality, right? </p>



<a name="153891741"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153891741" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153891741">(May 31 2017 at 01:29)</a>:</h4>
<p>I'd like to test event based subscriptions, rather than the current search based subscription</p>



<a name="153891786"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153891786" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Christiaan Knaap <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153891786">(May 31 2017 at 14:10)</a>:</h4>
<p>Thanks for the mention. I intend to have Vonk do this as well. <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> : what do you mean by event based subscriptions? Are you referring to the Messaging part of Subscription (<a href="http://www.hl7.org/implement/standards/fhir/subscription.html#2.46.6.4" target="_blank" title="http://www.hl7.org/implement/standards/fhir/subscription.html#2.46.6.4">http://www.hl7.org/implement/standards/fhir/subscription.html#2.46.6.4</a>) ?</p>



<a name="153891787"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153891787" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Christiaan Knaap <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153891787">(May 31 2017 at 14:13)</a>:</h4>
<p>I am also interested to see whether longer running subscriptions are useful without means of communicating that a resource has 'left' the criteria because it was deleted or updated in a way that it no longer matches the criteria. I bring this up because adding this to the handling of subscriptions might complicate the implementation. Is anyone interested in trying to make this work (not sure we have enough time to do so).</p>



<a name="153891826"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153891826" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153891826">(May 31 2017 at 20:30)</a>:</h4>
<p>in Madrid, we spoke about changing the way the criteria from 'when a search set changes' - which has the problem you just identified, and other implementation issues, to an event based approach where you write some criteria (fhirpath, probably) against previous + current in order to define which events you want to know about </p>



<a name="153891827"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153891827" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153891827">(May 31 2017 at 20:30)</a>:</h4>
<p>I'd like to implement that, using an extension on the Subscription resource</p>



<a name="153892715"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153892715" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153892715">(Jun 07 2017 at 20:28)</a>:</h4>
<p><span class="user-mention" data-user-id="191864">@Isaac Vetter</span> <span class="user-mention" data-user-id="191757">@Christiaan Knaap</span> <span class="user-mention" data-user-id="191367">@Brian Postlethwaite</span> <span class="user-mention" data-user-id="191914">@Danielle Friend</span> <span class="user-mention" data-user-id="191375">@Alexander Henket</span> <span class="user-mention" data-user-id="191359">@Bryn Rhodes</span> any one has any specific proposals for connectathon scenarios?</p>



<a name="153892762"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153892762" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Isaac Vetter <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153892762">(Jun 07 2017 at 21:55)</a>:</h4>
<p>Grahame - I'm working on somenow now (at the last minute). </p>
<p>An extension to the Subscription resource that supports events/topics could look like this: </p>
<p>"criteria": "Patient/123",<br>
"extension": {[<br>
    "url": "<a href="http://hl7.org/fhir/subscription/topics" target="_blank" title="http://hl7.org/fhir/subscription/topics">http://hl7.org/fhir/subscription/topics</a>",<br>
    "valueCode": {<br>
        "value": "admit",<br>
        "display": "patient admitted",<br>
        "system" : "<a href="https://www.hl7.org/fhir/subscriptions/topics" target="_blank" title="https://www.hl7.org/fhir/subscriptions/topics">https://www.hl7.org/fhir/subscriptions/topics</a>"<br>
    }<br>
]<br>
}</p>



<a name="153892763"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153892763" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Isaac Vetter <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153892763">(Jun 07 2017 at 21:58)</a>:</h4>
<p>I think that it would be important for the FHIR server to inform the subscribing client of the event/topic that occurred, so I'm not sure that an empty POST message would be enough. The full payload method would be straightforward, though.</p>



<a name="153892781"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153892781" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153892781">(Jun 07 2017 at 23:39)</a>:</h4>
<p>I think it would be a full payload, yes</p>



<a name="153892782"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153892782" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153892782">(Jun 07 2017 at 23:40)</a>:</h4>
<p>but I have no idea what your fragment above does</p>



<a name="153892783"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153892783" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Danielle Friend <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153892783">(Jun 07 2017 at 23:41)</a>:</h4>
<p>Grahame, what would your extension look like? <br>
My understanding of Isaac's is that it would allow for servers and clients to subscribe to a known list of discrete events very simply and direct, because it has more structure. Yours would be less structured and would allow for any event/change that you could dream up. <br>
Does that seem like an accurate comparison? In Isaac's example of an event=admit, Grahame, how would you represent such a request to subscribe to patient admissions?</p>
<p>All that to say, this seems like a really interesting track, and a good place to see both approaches in action.</p>



<a name="153892784"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153892784" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153892784">(Jun 07 2017 at 23:44)</a>:</h4>
<p>so the logic is implicit in Isaac's proposal? that has both advantages and disadvantages. </p>



<a name="153892785"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153892785" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153892785">(Jun 07 2017 at 23:46)</a>:</h4>
<p>as far as subscribing to patient admissions, what does that actually mean? Once we have figured out what that actually means, then I would be able to think about how I would represent that. </p>



<a name="153892786"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153892786" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153892786">(Jun 07 2017 at 23:46)</a>:</h4>
<p>does it mean 'let me know about all inpatient episode changes'?</p>



<a name="153892789"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153892789" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Danielle Friend <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153892789">(Jun 07 2017 at 23:52)</a>:</h4>
<p>&lt;didn't reply in the right place!&gt;<br>
Sure, I think a maybe more common example would be - let me know when a patient is admitted to this department.<br>
Such as the ED department</p>



<a name="153892791"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153892791" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Isaac Vetter <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153892791">(Jun 07 2017 at 23:54)</a>:</h4>
<p>Right. I think that we should make events very discrete and the FHIR server simply describes the list of events that it supports.  </p>
<p>Here's the above extension fragment in a full FHIR subscription resource:</p>
<p>Example subscription resource with proposed extension:<br>
{<br>
  "resourceType": "Subscription",<br>
  "criteria": "Patient/123",<br>
  "extension": {[<br>
"url": "<a href="http://hl7.org/fhir/subscription/topics" target="_blank" title="http://hl7.org/fhir/subscription/topics">http://hl7.org/fhir/subscription/topics</a>",<br>
"valueCode": {<br>
"value": "admit",<br>
"display": "patient admitted",<br>
"system" : "<a href="https://www.hl7.org/fhir/subscriptions/topics" target="_blank" title="https://www.hl7.org/fhir/subscriptions/topics">https://www.hl7.org/fhir/subscriptions/topics</a>"<br>
}<br>
     ]<br>
  }<br>
  "channel": {<br>
    "type": "rest-hook",<br>
    "endpoint": "<a href="https://biliwatch.com/customers/mount-auburn-miu/on-result" target="_blank" title="https://biliwatch.com/customers/mount-auburn-miu/on-result">https://biliwatch.com/customers/mount-auburn-miu/on-result</a>",<br>
    "payload": "application/fhir+json"<br>
  }<br>
}</p>



<a name="153892792"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153892792" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153892792">(Jun 07 2017 at 23:58)</a>:</h4>
<p>well, here's the explicit version: </p>



<a name="153892793"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153892793" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153892793">(Jun 07 2017 at 23:58)</a>:</h4>
<div class="codehilite"><pre><span></span>{
  &quot;resourceType&quot;: &quot;Subscription&quot;,
  &quot;id&quot;: &quot;example&quot;,
  &quot;status&quot;: &quot;requested&quot;,
  &quot;reason&quot;: &quot;Monitor all admissions to Emergency&quot;,
  &quot;criteria&quot;: &quot;Encounter?&quot;,
  &quot;extension&quot; : [{
    &quot;url&quot; : &quot;http://healthintersections.com.au/fhir/subscription-event-filter&quot;,
    &quot;valueString&quot; : &quot;(current | previous).location.where(location = &quot;Location/emergency&quot; and status in [&#39;active&#39;, &#39;completed&#39;] ).exists()&quot;
  }]
  &quot;channel&quot;: {
    &quot;type&quot;: &quot;rest-hook&quot;,
    &quot;endpoint&quot;: &quot;https://biliwatch.com/customers/mount-auburn-miu/on-result&quot;,
    &quot;payload&quot;: &quot;application/fhir+json&quot;,
    &quot;header&quot;: [
      &quot;Authorization: Bearer secret-token-abc-123&quot;
    ]
  }
}
</pre></div>



<a name="153892794"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153892794" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153892794">(Jun 07 2017 at 23:59)</a>:</h4>
<p>making the events very discrete, so the server can limit what it offers makes for less work on the server, but restricts the client's capabilities greatly</p>



<a name="153892796"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153892796" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153892796">(Jun 08 2017 at 00:07)</a>:</h4>
<p><span class="user-mention" data-user-id="191359">@Bryn Rhodes</span> does CQL have a suitable resource for defining a set of event triggers so that we can have our cake and eat it too? or do we need an EventDefinition resource?</p>



<a name="153892798"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153892798" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Isaac Vetter <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153892798">(Jun 08 2017 at 00:37)</a>:</h4>
<p>Hey Grahame, your FHIRPath extension seems to be modeling a search criteria more than an event. I think that an event is a name for a thing that happens in the world, or at least in a user's workflow.</p>
<p>The FHIRPath approach is, at best, a language for modeling events.</p>
<p>No doubt you're right that not giving the client a flexible language for defining eventsrestricts their abilities, but it's too large of a burden on the server. In practice, we'd have to severely limit the FHIRPath that we supported to map to a set of pre-defined clinical events. Exposing the actual events, in a standard way is more transparent to the client.</p>



<a name="153892799"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153892799" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153892799">(Jun 08 2017 at 00:39)</a>:</h4>
<p>'more transparent'? how? </p>



<a name="153892800"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153892800" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153892800">(Jun 08 2017 at 00:39)</a>:</h4>
<p>though I agree with the impact on the server. Except that for me, the FHIRPath way is easier ;-) </p>



<a name="153892801"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153892801" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153892801">(Jun 08 2017 at 00:41)</a>:</h4>
<p>and no, my approach is not a search criteria - it's something that fires on changes to encounter, and evaluates before and after</p>



<a name="153892802"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153892802" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Isaac Vetter <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153892802">(Jun 08 2017 at 00:45)</a>:</h4>
<blockquote>
<p>Except that for me, the FHIRPath way is easier ;-)</p>
</blockquote>
<p>Yeah, I caught that. :)</p>
<p>An ED admit (or transfer or discharge) is an important thing that happens in the real world. Is this:</p>
<blockquote>
<p>"valueString" : "(current | previous).location.where(location = "Location/emergency" and status in ['active', 'completed'] ).exists()"</p>
</blockquote>
<p>how we should model this well known event?</p>



<a name="153892803"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153892803" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153892803">(Jun 08 2017 at 00:46)</a>:</h4>
<p>well strictly, this is 'notify me of changes to encounter where the location is or was emergency, and the encounter is a real encounter (e.g. not just a plan)'</p>



<a name="153892804"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153892804" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Isaac Vetter <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153892804">(Jun 08 2017 at 00:46)</a>:</h4>
<p>Also, I think that your approach, assumes that a clinical system is a database of FHIR resources, which isn't the case outside of middle-ware, reference implementations and other specialized HIT software.</p>



<a name="153892805"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153892805" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153892805">(Jun 08 2017 at 00:47)</a>:</h4>
<p>I don't think my approach assumes that, just that there's a translation layer somewhere.</p>



<a name="153892806"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153892806" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153892806">(Jun 08 2017 at 00:47)</a>:</h4>
<p>the middle ground, that there's a formal definition you can refer to, allows that translation layer to be a human</p>



<a name="153892807"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153892807" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153892807">(Jun 08 2017 at 00:48)</a>:</h4>
<p>the classic v2 approach is to use hand-wavy narrative like 'An ED admit (or transfer or discharge)' and then let all the systems interpret that slightly differently, so that implementations are actually all unsafe</p>



<a name="153892808"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153892808" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Isaac Vetter <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153892808">(Jun 08 2017 at 00:50)</a>:</h4>
<p>That's kind of compelling, but doesn't make it easy for me at all.</p>
<p>Do you think that the same point applies to this: <a href="https://github.com/cds-hooks/docs/wiki/Proposed-Hooks" target="_blank" title="https://github.com/cds-hooks/docs/wiki/Proposed-Hooks">https://github.com/cds-hooks/docs/wiki/Proposed-Hooks</a> ?</p>



<a name="153892809"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153892809" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153892809">(Jun 08 2017 at 00:51)</a>:</h4>
<p>well, I think they need formal definitions. but it's possibly less important there because there's a human in the picture, and they are believed to be able to check the system. Back end subscriptions, you don't have  chance to find out what you don't know</p>



<a name="153892810"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153892810" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153892810">(Jun 08 2017 at 00:52)</a>:</h4>
<p>but inasmuch as that isn't a characteristic of many users ('the system is god') then more formal definitions will be necessary</p>



<a name="153892811"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153892811" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Isaac Vetter <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153892811">(Jun 08 2017 at 00:52)</a>:</h4>
<p>I guess I'd say that we've spend a bunch of time refining our definitions of the hand-wavy industry events for all kinds of reasons (including the support of HL7v2) and now have a pretty decent implementation.</p>



<a name="153892812"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153892812" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153892812">(Jun 08 2017 at 00:53)</a>:</h4>
<p>you do. But your business rules probably differ from anyone else</p>



<a name="153892813"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153892813" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153892813">(Jun 08 2017 at 00:53)</a>:</h4>
<p>looking at the hook definitions, most the -view stuff is pretty straight forward. The change ones are much more challenging</p>



<a name="153892814"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153892814" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Isaac Vetter <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153892814">(Jun 08 2017 at 00:55)</a>:</h4>
<p>I was thinking that one of the use-cases for subscriptions might be "application synchronization", such that an event could be defined, similar to cds hooks, but on the backend. I think that a FHIRPath approach would preclude that.</p>



<a name="153892815"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153892815" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153892815">(Jun 08 2017 at 00:56)</a>:</h4>
<p>why would it preclude that? </p>



<a name="153892816"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153892816" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Isaac Vetter <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153892816">(Jun 08 2017 at 00:58)</a>:</h4>
<p>Using FHIRPath assumes that the FHIR server's resources are accurately modeling the events that the FHIR subscription server is pushing to clients. For "workflow" type events (e.g. user opens a patient's chart), I don't see how a FHIR client could learn that such an event happened by simply performing reads against the server.</p>



<a name="153892817"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153892817" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153892817">(Jun 08 2017 at 00:58)</a>:</h4>
<p>AuditEvent. If you surface that, that is</p>



<a name="153892818"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153892818" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153892818">(Jun 08 2017 at 01:00)</a>:</h4>
<p>but what I am proposing specifically is that we have a list of events, back them with a formal definition, an d then servers are free to use the formal definition directly if they can, else they implement, but conformance would be tested against the formal definition</p>



<a name="153892819"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153892819" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Isaac Vetter <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153892819">(Jun 08 2017 at 01:01)</a>:</h4>
<p>Okay. </p>
<p>What does the FHIR client specify when creating the subscription? </p>



<a name="153892821"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153892821" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153892821">(Jun 08 2017 at 01:03)</a>:</h4>
<p>reference to the definition, or maybe include the definition as a contained resource? Need to talk to Bryn to see if there is already something existing? but I don't think there is. Just some infrastructure. That would mean creating an EventDefinition resource to refer to, and then we could consider doing formal definitions for the cds-hooks events as well</p>



<a name="153892822"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153892822" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Isaac Vetter <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153892822">(Jun 08 2017 at 01:05)</a>:</h4>
<p>Alright. I can eventually implement that. </p>
<p>What are the next steps for a connectathon track? I'd like to keep the goals as simple and pragmatic as possible.</p>



<a name="153892823"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153892823" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153892823">(Jun 08 2017 at 01:06)</a>:</h4>
<p>and for the connectation, you'd have:</p>
<div class="codehilite"><pre><span></span>{
  &quot;resourceType&quot;: &quot;Subscription&quot;,
  &quot;criteria&quot;: &quot;n/a&quot;,
  &quot;extension&quot;: {[
    &quot;url&quot;: &quot;http://hl7.org/fhir/StructureDefinition/subscription-event&quot;,
    &quot;valueUri&quot;: &quot;http://hl7.org/fhir/EventDefinition/admit&quot;
  }],
  &quot;channel&quot;: {
    &quot;type&quot;: &quot;rest-hook&quot;,
    &quot;endpoint&quot;: &quot;https://biliwatch.com/customers/mount-auburn-miu/on-result&quot;,
    &quot;payload&quot;: &quot;application/fhir+json&quot;
  }
}
</pre></div>



<a name="153892824"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153892824" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153892824">(Jun 08 2017 at 01:07)</a>:</h4>
<p>if we liked it after the connectathon, I'd propose making event a normal property of Subscription. </p>



<a name="153892825"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153892825" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Isaac Vetter <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153892825">(Jun 08 2017 at 01:07)</a>:</h4>
<p>Yes, definitely.</p>



<a name="153892826"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153892826" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153892826">(Jun 08 2017 at 01:08)</a>:</h4>
<p>let's see what I come up with Bryn before we decide which way to go</p>



<a name="153892827"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153892827" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153892827">(Jun 08 2017 at 01:08)</a>:</h4>
<p>though the formal deadline for connectathon proposals was today, we only had about half of them so we extended</p>



<a name="153892828"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153892828" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Isaac Vetter <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153892828">(Jun 08 2017 at 01:08)</a>:</h4>
<p>Oh good. </p>



<a name="153892829"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153892829" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Isaac Vetter <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153892829">(Jun 08 2017 at 01:08)</a>:</h4>
<p>Till when?</p>



<a name="153892830"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153892830" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153892830">(Jun 08 2017 at 01:09)</a>:</h4>
<p>forget. Another week? not sure</p>



<a name="153892831"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153892831" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Isaac Vetter <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153892831">(Jun 08 2017 at 01:10)</a>:</h4>
<p>I talk to Bryn fairly often, I can ask him about his thoughts on an EventDefinition resource, modify the track proposal and post it here by ... Monday.</p>



<a name="153892832"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153892832" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153892832">(Jun 08 2017 at 01:10)</a>:</h4>
<p>ok great</p>



<a name="153892833"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153892833" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Isaac Vetter <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153892833">(Jun 08 2017 at 01:10)</a>:</h4>
<p>thanks, Grahame.</p>



<a name="153892834"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153892834" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153892834">(Jun 08 2017 at 01:11)</a>:</h4>
<p>I think it would find wider use -  from MessageDefinition, from CapabilityStatement, for cds-hooks, and in the security stuff maybe. Unless all those are pushed into Subscription</p>



<a name="153892835"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153892835" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Isaac Vetter <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153892835">(Jun 08 2017 at 01:13)</a>:</h4>
<p>I see subscriptions as FHIR's backend pub sub model and CDS Hooks as limited and very targeted remote, user-facing, real-time, cds. </p>



<a name="153892836"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153892836" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153892836">(Jun 08 2017 at 01:14)</a>:</h4>
<p>it might not possible to use the same language to describe the front end hooks. but I suspect some formal language will be required</p>



<a name="153892837"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153892837" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Isaac Vetter <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153892837">(Jun 08 2017 at 01:16)</a>:</h4>
<p>mapping the ad-hoc, CDS Hooks defined hooks into an EventDefinition resource would be a elegant way to formalize the definitions of these hooks for systems/people that needed/wanted that formalization if it didn't impact the straightforward usabilility of the CDS Hooks spec.</p>



<a name="153892838"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153892838" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153892838">(Jun 08 2017 at 01:17)</a>:</h4>
<p>we certainly don't want to impact that. But getting the hook definitions and implementation consistent will inevitably be a tax on the implementers, in that they will actually have to get it right. </p>



<a name="153892839"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153892839" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153892839">(Jun 08 2017 at 01:18)</a>:</h4>
<p>this is the sort of thing that the spec can't drive, though - it can make it possible to correctly know what implementing a hook correctly means, but only the market can make it worth while actually getting it right</p>



<a name="153892840"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153892840" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Isaac Vetter <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153892840">(Jun 08 2017 at 01:19)</a>:</h4>
<p>Yeah, i think this issue is making your point about consistency and accuracy: <a href="https://github.com/cds-hooks/docs/issues/39" target="_blank" title="https://github.com/cds-hooks/docs/issues/39">https://github.com/cds-hooks/docs/issues/39</a></p>



<a name="153892841"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153892841" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153892841">(Jun 08 2017 at 01:23)</a>:</h4>
<p>y</p>



<a name="153892846"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153892846" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153892846">(Jun 08 2017 at 02:15)</a>:</h4>
<p>We used to have a TriggerDefinition data type, but we only used it one place (in PlanDefinition), so we collapsed back to just an element there. But I've often thought that the Subscription could make use of the same information.</p>



<a name="153892847"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153892847" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153892847">(Jun 08 2017 at 02:16)</a>:</h4>
<p>It would be pretty easy to take the TriggerDefinition components and turn that into a datatype and then a resource that could use it.</p>



<a name="153892848"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153892848" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153892848">(Jun 08 2017 at 02:17)</a>:</h4>
<p>it's already a data type</p>



<a name="153892849"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153892849" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153892849">(Jun 08 2017 at 02:17)</a>:</h4>
<p>but the definition is very weak. we'd have to beef it up considerably</p>



<a name="153892850"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153892850" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153892850">(Jun 08 2017 at 02:17)</a>:</h4>
<p>the event timin part - is that relevant for a subscription? </p>



<a name="153892851"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153892851" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153892851">(Jun 08 2017 at 02:18)</a>:</h4>
<p>and you can only filer by codes or date?</p>



<a name="153892852"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153892852" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153892852">(Jun 08 2017 at 02:18)</a>:</h4>
<p>Yes, it's intentionally restricted to simplify implementation.</p>



<a name="153892853"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153892853" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153892853">(Jun 08 2017 at 02:18)</a>:</h4>
<p>It basically maps to a B-Tree for codes and dates.</p>



<a name="153892854"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153892854" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153892854">(Jun 08 2017 at 02:19)</a>:</h4>
<p>You can express anything you need to on top of that with a query, but by restricting the requirement to that, you simplify the implementation.</p>



<a name="153892855"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153892855" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153892855">(Jun 08 2017 at 02:19)</a>:</h4>
<p>That's the data access layer for a CQL engine.</p>



<a name="153892856"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153892856" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153892856">(Jun 08 2017 at 02:20)</a>:</h4>
<p>that simplification doesn't work for subscription, though</p>



<a name="153892857"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153892857" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153892857">(Jun 08 2017 at 02:20)</a>:</h4>
<p>Not sure about the timing part, it'd be cool, I guess, you could effectively turn any FHIR server into a scheduling service :)</p>



<a name="153892858"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153892858" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153892858">(Jun 08 2017 at 02:22)</a>:</h4>
<p>I agree it doesn't give you as formal a description as your wanting for the events (in terms of detecting a change), you'd have to provide that in addition, or maybe as another kind of trigger?</p>



<a name="153892859"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153892859" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153892859">(Jun 08 2017 at 02:22)</a>:</h4>
<p>anyway, where we stand is, there isn't an existing resource for the task, but there is an existing data type that is useful, but not complete for the prupose</p>



<a name="153892860"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153892860" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153892860">(Jun 08 2017 at 02:27)</a>:</h4>
<p>So should I put together an EventDefinition resource proposal that covers the current plus this more complete use case (fully formal description of the event)?</p>



<a name="153892864"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153892864" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153892864">(Jun 08 2017 at 02:33)</a>:</h4>
<p>sure, why not? we can argue about that...</p>



<a name="153893253"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153893253" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Christiaan Knaap <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153893253">(Jun 12 2017 at 12:20)</a>:</h4>
<p>Not sure how many '...Definition' resource types we should create. And that made me think about what we actually want to reuse. <br>
As for DataRequirement: Would it be possible to capture the dateFilter and codeFilter of DataRequirement in fhirpath as well? <br>
And if so, I was thinking of a way to do reuse with fhirpath expressions, that can have a name (or probably a uri). </p>
<p>These named fhirpath expressions could then be used for:<br>
- defining triggers<br>
- maybe defining _elements, or parts of a GraphDefinition<br>
- expressing support for events in a CapabilityStatement (e.g. Isaac will support the event with the fhirpath named 'patient admittance')<br>
- optimizing implementation (e.g. for triggers or searches that happen very often)</p>
<p>Generic fhir servers like Grahame's, HAPI and Vonk will probably use the expression that goes with the name, but fhir interfaces on specific systems could just use the name and implement it 'hard coded' based on the meaning (that is still defined by the expression). </p>



<a name="153893270"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153893270" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Isaac Vetter <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153893270">(Jun 12 2017 at 15:13)</a>:</h4>
<blockquote>
<p>Not sure how many '...Definition' resource types we should create. And that made me think about what we actually want to reuse.</p>
</blockquote>
<p>Hey <span class="user-mention" data-user-id="191757">@Christiaan Knaap</span> , Totally agree that there are a number of uses for eventdefinitions.  </p>



<a name="153893271"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153893271" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Isaac Vetter <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153893271">(Jun 12 2017 at 15:13)</a>:</h4>
<p>How are they created?<br>
1) For heavily prototyped use-cases, we should publish implementation guides around  standardly named events and standardly defined fhirpath statements.  </p>
<p>2) A subscription client should be able to create a new EventDefinition on the server (if the server supports that) and then subscribe to that recently defined event.</p>
<p>3) A subscriptions FHIR server should publish the EventDefinitions that it supports. </p>



<a name="153893276"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153893276" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Isaac Vetter <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153893276">(Jun 12 2017 at 17:44)</a>:</h4>
<p>Hey <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> , All, </p>
<p>Given an EventDefinition resource as discussed by Bryn and Grahame, here's a sample Subscription resource with an extension that points to an event:</p>
<p>Example subscription resource with proposed extension:<br>
{<br>
  "resourceType": "Subscription",<br>
  "criteria": "Patient/123",<br>
  "extension": {[<br>
    "url": "<a href="http://hl7.org/fhir/subscription/topics" target="_blank" title="http://hl7.org/fhir/subscription/topics">http://hl7.org/fhir/subscription/topics</a>",<br>
    "valueReference": {<br>
        "reference": "<a href="https://example.com/EventDefinition/123" target="_blank" title="https://example.com/EventDefinition/123">https://example.com/EventDefinition/123</a>",<br>
        "display": "patient admitted",<br>
    }<br>
     ]<br>
  }<br>
  "channel": {<br>
    "type": "rest-hook",<br>
    "endpoint": "<a href="https://biliwatch.com/customers/mount-auburn-miu/on-result" target="_blank" title="https://biliwatch.com/customers/mount-auburn-miu/on-result">https://biliwatch.com/customers/mount-auburn-miu/on-result</a>",<br>
    "payload": "application/fhir+json"<br>
  }<br>
}</p>



<a name="153893277"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153893277" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Isaac Vetter <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153893277">(Jun 12 2017 at 17:44)</a>:</h4>
<p>And a connectrathon track proposal: </p>
<p>Submitting WG/Project/Implementor Group<br>
    • FHIR-I</p>
<p>Justification<br>
The current FHIR Subscriptions spec is based around the idea that a clinical system uses FHIR resources as its native database format and executes subscribed FHIR queries against every resource as it's created or modified. This would work well for custom built middleware and FHIR reference implementations, but generally not for systems that implement clinical workflow.</p>
<p>I think that most clinical systems, mine included, are event-based. An implementable subscription criteria would rather be based on an event and then narrowed to specific attributes/criteria.</p>
<p>The subscription pub/sub pattern enables FHIR clients to retrieve data from a server without performing a more expensive periodic polling queries. This model also enables workflow event-based notifications that could keep two applications data in sync, but also synchronize their context. There's no lightweight, widely implemented CCOW-type application synchronization standards available to developers. There's some interest within the RIS/PACS community to identify a common standard.</p>
<p>This track will attempt to prototype this event-based concept on top of the existing FHIR Subscription REST hook and criteria element. Further, as a stretch goal, this connectathon will attempt to prototype this workflow synchronization using FHIR Subscriptions.</p>
<p>Expected Participants:</p>
<ul>
<li>Brian Postlethwaite</li>
<li>Alexander Henket</li>
<li>Christiaan Knapp</li>
<li>Grahame Grieve</li>
<li>Will Maethner</li>
<li>TBD PACS developers</li>
</ul>
<p>Roles:<br>
    1) FHIR Subscriptions server<br>
        a. The FHIR Server supports the Subscription resource and pushing relevant FHIR resources to client.<br>
    2) FHIR Subscribing client<br>
        a. Subscribes to FHIR server and gets updates.</p>
<p>Scenarios:<br>
1) Create FHIR Subscription<br>
        a. Action: Support Subscription resource writes using the topic extension, as illustrated, below. <br>
        b. Precondition: n/a<br>
        c. Success Criteria:  Client POSTs new subscription resource to FHIR server. FHIR server persists active subscription resource.<br>
        d. Bonus Point: FHIR server support searching and reading Subscription resources. </p>
<p>2) REST Hook with payload of "payload": "application/fhir+json"<br>
        a. Action: Support pushing FHIR resources.<br>
        b. Precondition: n/a<br>
        c. Success Criteria: FHIR server pushes FHIR payload of relevant resource using REST Hook when the subscribed event occurs in the FHIR server.<br>
        d. Bonus point: n/a</p>
<p>3) Subscribe to a REST Hook of "patientchartopen"<br>
        a. Action: Subscribing app creates Subscription with an extended topic that means that a patient chart was opened in the EHR FHIR server in a specific Location. FHIR Server notifies app of the patient chart that was opened.<br>
        b. Precondition: Subscription resource support.<br>
        c. Success Criteria: Subscribing app is notified of the event.<br>
        d. Bonus point: FHIR server has a prototyped EventDefinition resource that defines a patient chart being opened.</p>



<a name="153893316"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153893316" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153893316">(Jun 13 2017 at 03:30)</a>:</h4>
<p>I don't follow the CCOW reference - how's that relevant? </p>



<a name="153893318"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153893318" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153893318">(Jun 13 2017 at 03:31)</a>:</h4>
<p>my server is also event based even though it's natively FHIR internally btw</p>



<a name="153893320"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153893320" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153893320">(Jun 13 2017 at 03:31)</a>:</h4>
<p>I'm good with the rest of the stream description - can we move it to the wiki? </p>



<a name="153893321"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153893321" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153893321">(Jun 13 2017 at 03:32)</a>:</h4>
<p>and thanks</p>



<a name="153893323"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153893323" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153893323">(Jun 13 2017 at 03:32)</a>:</h4>
<p><span class="user-mention" data-user-id="191757">@Christiaan Knaap</span> - FHIRPath is a nice way to say some things, but it's really hard to reverse engineer into 'do this to produce the right stuff' - so we should not use it where we can avoid it </p>



<a name="153893343"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153893343" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Christiaan Knaap <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153893343">(Jun 13 2017 at 08:10)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span>  - OK, so we settle for EventDefinition for now, without FHIRPath.<br>
Track proposal looks good. Only thing I don't know is how I would recognize that 'a patient chart was opened in the EHR' in a generic FHIR server. Does that result in an AuditEvent? In other words: on what criteria would I then send a notification? Or should I ignore this one, since Vonk is not an EHR?</p>



<a name="153893344"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153893344" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Christiaan Knaap <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153893344">(Jun 13 2017 at 08:18)</a>:</h4>
<p>As for CCOW: that was designed for tracking and syncing <em>state</em>, whereas I see subscription being designed for tracking and syncing <em>data</em>. Track part 3) seems also to be about syncing <em>state</em>. It may turn out to be confusing to have these two concepts supported by one solution (Subscriptions), if we even manage to make it work.</p>



<a name="153893577"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153893577" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153893577">(Jun 13 2017 at 20:11)</a>:</h4>
<p>Actually, we were thinking of an EventDefinition that used FHIRPath, just not exclusively. So a named event, but that has an expression as a FHIRPath change detection.</p>



<a name="153893578"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153893578" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153893578">(Jun 13 2017 at 20:12)</a>:</h4>
<p>At least, that's the EventDefinition I'm currently building.</p>



<a name="153893622"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153893622" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153893622">(Jun 13 2017 at 22:47)</a>:</h4>
<p>I think that makes sense. Say what you can say in a structured form, and say the rest using an expression</p>



<a name="153893623"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153893623" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153893623">(Jun 13 2017 at 22:47)</a>:</h4>
<p>that's my preference. </p>



<a name="153893878"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153893878" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Isaac Vetter <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153893878">(Jun 14 2017 at 21:55)</a>:</h4>
<p>Hey <span class="user-mention" data-user-id="191757">@Christiaan Knaap</span> , yes, we can represent a "openpatientchart" even with an AuditEvent. </p>



<a name="153893879"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153893879" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Isaac Vetter <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153893879">(Jun 14 2017 at 21:56)</a>:</h4>
<p>I'll remove the CCOW reference from the justification and try to get it posted on the connectathon wiki page (just asked webmaster@hl7 for a login).</p>



<a name="153893890"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153893890" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153893890">(Jun 14 2017 at 22:24)</a>:</h4>
<p><span class="user-mention" data-user-id="191864">@Isaac Vetter</span> let me know if there isn't a timely response on thta </p>



<a name="153893924"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153893924" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153893924">(Jun 15 2017 at 00:27)</a>:</h4>
<p>This is awesome! Is there a proposed way to say "on chart open for <em>any</em> patient"? Would you just say "criteria: Patient" instead of "criteria: Patient/123"? Also is there an example of what an EventDefiniton would look like? I'm a little lost on that. </p>



<a name="153893928"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153893928" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153893928">(Jun 15 2017 at 01:37)</a>:</h4>
<p>we haven't put that together yet. </p>



<a name="153895768"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153895768" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153895768">(Jun 30 2017 at 00:17)</a>:</h4>
<p>Here's the above example rendered in a draft EventDefinition resource: <a href="http://build.fhir.org/eventdefinition-example.xml.html" target="_blank" title="http://build.fhir.org/eventdefinition-example.xml.html">http://build.fhir.org/eventdefinition-example.xml.html</a></p>



<a name="153895814"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153895814" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153895814">(Jun 30 2017 at 10:50)</a>:</h4>
<p>it's not clear to me why the definition of an event has a time period - does the event somehow change outside that period?</p>



<a name="153895815"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153895815" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153895815">(Jun 30 2017 at 10:51)</a>:</h4>
<p>I don't follow why contributers. What would it mean to be a contributer</p>



<a name="153895816"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153895816" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153895816">(Jun 30 2017 at 10:52)</a>:</h4>
<p>I don't follow the use case for relatedArtifact</p>



<a name="153895817"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153895817" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153895817">(Jun 30 2017 at 10:54)</a>:</h4>
<p>I don't understand the interplay between event timing and data requirement date elements</p>



<a name="153895818"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153895818" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153895818">(Jun 30 2017 at 10:54)</a>:</h4>
<p>shouldn't eventCondition.language be a code bound to mime type?</p>



<a name="153895819"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153895819" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153895819">(Jun 30 2017 at 10:54)</a>:</h4>
<p>that's what we've done elsehwere</p>



<a name="153895820"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153895820" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153895820">(Jun 30 2017 at 10:56)</a>:</h4>
<p>what kind of languages do we anticipate here?</p>



<a name="153895878"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153895878" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153895878">(Jun 30 2017 at 21:54)</a>:</h4>
<p>effectivePeriod, contributors, and relatedArtifacts are because those are common fields for knowledge resources. I questioned whether they would be applicable here or not (there's a TODO on them), but left them in for discussion. It may be that an EventDefinition is a simple enough resource that it would never need/require the types of governance and management typically associated with knowledge management.</p>



<a name="153895879"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153895879" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153895879">(Jun 30 2017 at 21:55)</a>:</h4>
<p>As far as the interplay between event timing and data requirements, the eventTiming element is only used for Periodic events, and the dataRequirements element is only used for Data-Added/updated/removed events.</p>



<a name="153895880"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153895880" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153895880">(Jun 30 2017 at 21:56)</a>:</h4>
<p>Yes, eventCondition.language should be bound to a mime type, I'll make that change throughout.</p>



<a name="153895881"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153895881" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153895881">(Jun 30 2017 at 21:57)</a>:</h4>
<p>As far as language, we currently expect FHIRPath and CQL, but you could probably use XPath too.</p>



<a name="153895882"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153895882" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153895882">(Jun 30 2017 at 22:02)</a>:</h4>
<p>I think there's a little more to say about the language. In particular, there's the idea of the delta between current and previous versions being meaningful in this context</p>



<a name="153895883"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153895883" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153895883">(Jun 30 2017 at 22:02)</a>:</h4>
<p>critical, in fact</p>



<a name="153895884"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153895884" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153895884">(Jun 30 2017 at 22:02)</a>:</h4>
<p>I'm not sure I have my head around periodic events. What's an example of that?</p>



<a name="153895887"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153895887" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153895887">(Jun 30 2017 at 22:21)</a>:</h4>
<p>Agree on establishing that delta is available, it's effectively a data-updated event, we've just also named it, which makes me question the usefulness of the type discriminator.</p>



<a name="153895888"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153895888" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153895888">(Jun 30 2017 at 22:21)</a>:</h4>
<p>For periodic events, the idea is to support scheduled items, such as "check this lab result daily"</p>



<a name="153895890"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153895890" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153895890">(Jun 30 2017 at 22:34)</a>:</h4>
<p>I think I'm troubled by the different between the definition of what an event is, and the application of asking for event notifications. this resource seems to mix these things </p>



<a name="153895916"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153895916" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153895916">(Jul 02 2017 at 05:08)</a>:</h4>
<p>I see the Subscription resource as the one that asks for event notifications, where EventDefinition only describes what an event is. What aspects of EventDefinition are troubling?</p>



<a name="153904317"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153904317" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Isaac Vetter <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153904317">(Sep 01 2017 at 14:29)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> , <span class="user-mention" data-user-id="191359">@Bryn Rhodes</span> , All,</p>
<p><span class="user-mention" data-user-id="194360">@Niklas Svenzén</span> and team spent some time at Epic, with myself and <span class="user-mention" data-user-id="194356">@Will Maethner</span> , last week to successfully prototype a PACS&lt;-&gt; EHR context synchronization using FHIR Subscriptions. We're continuing this testing next week and at the connectathon. </p>
<p>We started with AuditEvent for  modeling context sync events, such as "patient chart opened", but quickly exceeded it. We spec'd out a new resource, UserSession, which defines a user interacting with an application, its status and the primary context for their session. This UserSession resource enables context synchronization within the existing FHIR Subscription specification. </p>
<p>We think that this new resource , used within FHIR Subscriptions, is the best approach for a context synchronization specification in FHIR and there's active interest in making this happen.</p>
<p>Can you guide us on the draft resource, below, and how to move forward, in general?</p>



<a name="153904318"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153904318" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Isaac Vetter <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153904318">(Sep 01 2017 at 14:30)</a>:</h4>
<p><a href="/user_uploads/10155/RyQJ-uZqYVkOUu3HdrUxsOYL/pasted-image.png" target="_blank" title="pasted-image.png">pasted-image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/10155/RyQJ-uZqYVkOUu3HdrUxsOYL/pasted-image.png" target="_blank" title="pasted-image.png"><img src="/user_uploads/10155/RyQJ-uZqYVkOUu3HdrUxsOYL/pasted-image.png"></a></div>



<a name="153904730"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153904730" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153904730">(Sep 06 2017 at 20:58)</a>:</h4>
<p>To do more CCOW-ish user synchronization you would need a 2-phase commit / accept to change context. Is that something anyone has considered?</p>



<a name="153904733"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153904733" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Isaac Vetter <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153904733">(Sep 06 2017 at 21:03)</a>:</h4>
<p>Hey <span class="user-mention" data-user-id="191427">@Jens Villadsen</span> , a strict CCOW context synchronization in FHIR would also require an independent context manager. It seems like a <em>relatively</em> simple post of a changed event fits into the existing subscriptions spec fairly well. </p>
<p>I thought that your description yesterday of how outbound events could be ordered, and I think guaranteed as well applies here. What do you think?</p>



<a name="153904735"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153904735" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153904735">(Sep 06 2017 at 21:08)</a>:</h4>
<p><span class="user-mention" data-user-id="191864">@Isaac Vetter</span> not sure I'm following ... my desc. from yesterday described a guaranteed ordered event stream from the server to the client which could be used to signal that (in a true CCOW-FHIR-like setup) a client would like to do something about the context</p>



<a name="153904737"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153904737" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153904737">(Sep 06 2017 at 21:11)</a>:</h4>
<p>now following a ccow setup, other clients also subscribing on the usersession would all need to somehow signal to the manager (POSTing) their acceptance and only after all had accepted the context could be changed</p>



<a name="153904738"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153904738" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Isaac Vetter <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153904738">(Sep 06 2017 at 21:15)</a>:</h4>
<p>Yeah, you're right. Unlike CCOW, using FHIR Subscriptions for context sync would be a dictatorship instead of democractic model.</p>
<p>The problems with the democratic model is that the entire integration is held back to the performance of the slowest app.</p>
<p>In practice, in our experience at least, CCOW isn't as widely implemented by a large number of similar, proprietary context sync specs. Supporting context sync functionality becaomes a massive task when we have to support many proprietary specs. </p>
<p>We think that there's room for a simple, re-usable context synchronization specification ... perhaps even without all the features of CCOW.</p>



<a name="153904739"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153904739" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153904739">(Sep 06 2017 at 21:15)</a>:</h4>
<p><span class="user-mention" data-user-id="191864">@Isaac Vetter</span> guaranteed order is not part of the existing subscription resource AFAIK. As the connection from the server to the client using a simple rest-hook is not 'dedicated/reserved/statefull' order is not necessarily guaranteed. Using a web socket or server sent events you are at least guaranteed that there will only be a single channel for you as a client that you need to look into</p>



<a name="153904740"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153904740" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153904740">(Sep 06 2017 at 21:18)</a>:</h4>
<p><span class="user-mention" data-user-id="191864">@Isaac Vetter</span> right ... dictating instead of democratizing - ... I get it. Its a more simple model which could work in a lot of cases.</p>



<a name="153904935"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153904935" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153904935">(Sep 08 2017 at 03:29)</a>:</h4>
<p><span class="user-mention" data-user-id="191864">@Isaac Vetter</span> sorry finally getting to this - I've been on the road all week travelling.</p>



<a name="153904936"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153904936" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153904936">(Sep 08 2017 at 03:29)</a>:</h4>
<p>I think it's a very interesting idea, and I think that the requirements are valid</p>



<a name="153904937"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153904937" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153904937">(Sep 08 2017 at 03:29)</a>:</h4>
<p>but I worry that the solution is actually out of scope for FHIR</p>



<a name="153904939"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153904939" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153904939">(Sep 08 2017 at 03:35)</a>:</h4>
<p>how would you use this outside the context of synchronising a session? What's it's relationship with AuditEvent?</p>



<a name="153904940"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153904940" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153904940">(Sep 08 2017 at 03:36)</a>:</h4>
<p>also, user may not correspond to a known FHIR entity. It makes us really need a User resource, which we've always avoided as truly out of scope</p>



<a name="153905158"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153905158" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Isaac Vetter <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153905158">(Sep 09 2017 at 16:13)</a>:</h4>
<p>Good Morning Everybody!</p>
<p>The FHIR Subscriptions table is up front, come join us if you're interested.</p>
<p>We're having  a breakout session right after general announcements in Palatine A.</p>



<a name="153905362"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153905362" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Isaac Vetter <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153905362">(Sep 09 2017 at 19:06)</a>:</h4>
<p>Hey Everybody, you can create a Subscription FHIR resource on Epic's prtotype here: <a href="https://connectathon.epic.com/Interconnect-Fhir-Basic/api/FHIR/STU3/Subscription" target="_blank" title="https://connectathon.epic.com/Interconnect-Fhir-Basic/api/FHIR/STU3/Subscription">https://connectathon.epic.com/Interconnect-Fhir-Basic/api/FHIR/STU3/Subscription</a></p>
<p>You need to authenticate with HTTP Basic auth, here's the username: "emp$1685477" and password "epic77", so a successfully HTTP Header, looks like this:</p>
<p>User-Agent: Fiddler<br>
Content-type: application/fhir+json<br>
Host: <a href="http://connectathon.epic.com" target="_blank" title="http://connectathon.epic.com">connectathon.epic.com</a><br>
Authorization: Basic ZW1wJDE2ODU0Nzc6ZXBpYzc3<br>
Content-Length: 357</p>



<a name="153905364"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153905364" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153905364">(Sep 09 2017 at 19:06)</a>:</h4>
<p>what topics can you use?</p>



<a name="153905368"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153905368" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Isaac Vetter <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153905368">(Sep 09 2017 at 19:08)</a>:</h4>
<p>Here's a sample Subscription resource, that's still got some dummy content:</p>
<p>{<br>
    "resourceType": "Subscription",<br>
    "criteria": "Patient/123",<br>
    "channel": {<br>
        "type": "rest-hook",<br>
        "endpoint": "<a href="https://biliwatch.com/customers/mount-auburn-miu/on-result" target="_blank" title="https://biliwatch.com/customers/mount-auburn-miu/on-result">https://biliwatch.com/customers/mount-auburn-miu/on-result</a>",<br>
        "payload": "application/fhir+json"<br>
    },<br>
    "id": "00000000007C2DCBF35FA1921026459D",<br>
    "extension": [{<br>
        "valueReference": {<br>
            "reference": "<a href="https://example.com/EventDefinition/123" target="_blank" title="https://example.com/EventDefinition/123">https://example.com/EventDefinition/123</a>",<br>
            "display": "patient admitted"<br>
        },<br>
        "url": "<a href="http://hl7.org/fhir/subscription/topics" target="_blank" title="http://hl7.org/fhir/subscription/topics">http://hl7.org/fhir/subscription/topics</a>"<br>
    }]<br>
}</p>



<a name="153905369"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153905369" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Isaac Vetter <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153905369">(Sep 09 2017 at 19:09)</a>:</h4>
<p>How about just using <a href="https://example.com/EventDefinition/123" target="_blank" title="https://example.com/EventDefinition/123">https://example.com/EventDefinition/123</a> as the topic, for now.</p>



<a name="153905439"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153905439" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Hatt <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153905439">(Sep 09 2017 at 20:43)</a>:</h4>
<p>Hi all - redox is accepting new subscriptions at POST <a href="https://ab6b2d27.ngrok.io/fhir/Subscription/new" target="_blank" title="https://ab6b2d27.ngrok.io/fhir/Subscription/new">https://ab6b2d27.ngrok.io/fhir/Subscription/new</a> <br>
not picky about what the topic is<br>
Authentication - add a <code>verification-token</code> header with a value of <code>redox</code></p>



<a name="153905494"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153905494" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Hatt <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153905494">(Sep 09 2017 at 22:14)</a>:</h4>
<p><code>GET</code> <code>https://ab6b2d27.ngrok.io/fhir/EventDefinition</code> now works too!</p>



<a name="153905526"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153905526" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153905526">(Sep 09 2017 at 22:52)</a>:</h4>
<p>yay, after several hours investigating the wrong problem, I've found the simple misconfiguration issue, and my R4 server is up at <a href="http://test.fhir.org/r4" target="_blank" title="http://test.fhir.org/r4">http://test.fhir.org/r4</a></p>



<a name="153905527"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153905527" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153905527">(Sep 09 2017 at 22:52)</a>:</h4>
<p>it does subscriptions completely (I think)</p>



<a name="153905851"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153905851" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bill Harty <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153905851">(Sep 10 2017 at 17:09)</a>:</h4>
<blockquote>
<p>it does subscriptions completely (I think)</p>
</blockquote>
<p>Having trouble adding a subscription to your server.  Getting this error:</p>
<p>"Unable to read Document - starts with &quot;testing&quot; at Row 1 column 8"</p>
<p>Seems like it's expecting XML.  I'm POSTing the JSON below, with a header of Content-Type: application/json+fhir</p>
<p>{<br>
  "resourceType": "Subscription",<br>
  "meta": {<br>
    "versionId": "agatha-1",<br>
    "lastUpdated": "2017-06-30T14:58:58.041+00:00"<br>
  },<br>
  "text": {<br>
    "status": "generated",<br>
    "div": "testing"<br>
  },<br>
  "criteria": "Patient?family=SMITH",<br>
  "reason": "Test subscription for Sept connectathon",<br>
  "status": "requested",<br>
  "extension": [<br>
    {<br>
      "url": "<a href="http://hl7.org/fhir/subscription/topics" target="_blank" title="http://hl7.org/fhir/subscription/topics">http://hl7.org/fhir/subscription/topics</a>",<br>
      "valueReference": {<br>
        "reference": "<a href="https://example.com/EventDefinition/123" target="_blank" title="https://example.com/EventDefinition/123">https://example.com/EventDefinition/123</a>",<br>
        "display": "patient admitted"<br>
      }<br>
    }<br>
  ],<br>
  "channel": {<br>
    "type": "rest-hook",<br>
    "endpoint": "<a href="http://pinc-fhir.us-east-1.elasticbeanstalk.com/agatha/payload/patient" target="_blank" title="http://pinc-fhir.us-east-1.elasticbeanstalk.com/agatha/payload/patient">http://pinc-fhir.us-east-1.elasticbeanstalk.com/agatha/payload/patient</a>",<br>
    "payload": "application/json",<br>
    "header": "Authorization: Bearer secret-token-abc-123"<br>
  }<br>
}</p>



<a name="153905852"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153905852" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bill Harty <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153905852">(Sep 10 2017 at 17:10)</a>:</h4>
<p>oops, maybe a probelm with my DIV.  let me fix that</p>



<a name="153905853"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153905853" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Christiaan Knaap <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153905853">(Sep 10 2017 at 17:10)</a>:</h4>
<p>You can test Vonk's subscription feature by POSTing a subscription to <a href="http://vonk.furore.com/administration/Subscription" target="_blank" title="http://vonk.furore.com/administration/Subscription">http://vonk.furore.com/administration/Subscription</a>. Afterwards, you can send a create/update matching the subscription to the regular FHIR endpoint at <a href="http://vonk.furore.com" target="_blank" title="http://vonk.furore.com">http://vonk.furore.com</a> (without the /administration)</p>



<a name="153905854"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153905854" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Niklas Svenzén <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153905854">(Sep 10 2017 at 17:11)</a>:</h4>
<p>Hey Will, here is the UserSession I just sent you:</p>
<p>{"resourceType":"UserSession","id":"0000000000F7AE2BF35FA1921026459D","action":"R","recorded":"2017-08-22T19:08:18Z","agent":[{"requestor":"true","network":{"address":"172.17.72.98"}}],"source":{"identifier":{"value":"Epic"}},"entity":[{"identifier":{"value":"6116494"},"type":{"system":"http://hl7.org/fhir/resource-types","code":"Patient"}}]}</p>



<a name="153905861"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153905861" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153905861">(Sep 10 2017 at 17:19)</a>:</h4>
<p>this works:</p>



<a name="153905862"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153905862" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153905862">(Sep 10 2017 at 17:19)</a>:</h4>
<p>{<br>
"resourceType": "Subscription",<br>
"meta": {<br>
"versionId": "agatha-1",<br>
"lastUpdated": "2017-06-30T14:58:58.041+00:00"<br>
},<br>
"text": {<br>
"status": "generated",<br>
"div": "&lt;div xmlns=\"http://www.w3.org/1999/xhtml\"&gt;testing&lt;/div&gt;"<br>
},<br>
"criteria": "Patient?family=SMITH",<br>
"reason": "Test subscription for Sept connectathon",<br>
"status": "requested",<br>
"extension": [<br>
{<br>
"url": "<a href="http://hl7.org/fhir/subscription/topics" target="_blank" title="http://hl7.org/fhir/subscription/topics">http://hl7.org/fhir/subscription/topics</a>",<br>
"valueReference": {<br>
"reference": "<a href="https://example.com/EventDefinition/123" target="_blank" title="https://example.com/EventDefinition/123">https://example.com/EventDefinition/123</a>",<br>
"display": "patient admitted"<br>
}<br>
}<br>
],<br>
"channel": {<br>
"type": "rest-hook",<br>
"endpoint": "<a href="http://pinc-fhir.us-east-1.elasticbeanstalk.com/agatha/payload/patient" target="_blank" title="http://pinc-fhir.us-east-1.elasticbeanstalk.com/agatha/payload/patient">http://pinc-fhir.us-east-1.elasticbeanstalk.com/agatha/payload/patient</a>",<br>
"payload": "application/json",<br>
"header": ["Authorization: Bearer secret-token-abc-123"]<br>
}<br>
}</p>



<a name="153905870"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153905870" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Isaac Vetter <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153905870">(Sep 10 2017 at 17:37)</a>:</h4>
<p>Hey Everybody - I'm putting together our track presentation. If you're not at the table in the front and worked on FHIR Subscriptions -- will you pm me or come talk to me?</p>



<a name="153905886"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153905886" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bill Harty <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153905886">(Sep 10 2017 at 18:11)</a>:</h4>
<blockquote>
<p>You can test Vonk's subscription feature by POSTing a subscription to <a href="http://vonk.furore.com/administration/Subscription" target="_blank" title="http://vonk.furore.com/administration/Subscription">http://vonk.furore.com/administration/Subscription</a>. Afterwards, you can send a create/update matching the subscription to the regular FHIR endpoint at <a href="http://vonk.furore.com" target="_blank" title="http://vonk.furore.com">http://vonk.furore.com</a> (without the /administration)</p>
</blockquote>
<p>patient id = 015ce2b1-f03d-431e-a0af-473723fdd6c3</p>



<a name="153905963"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Sept%20Connectathon%20track/near/153905963" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Isaac Vetter <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Sept.20Connectathon.20track.html#153905963">(Sep 10 2017 at 19:19)</a>:</h4>
<p>Hey Everybody - you can see our Sept connectathon track presentation here: <a href="https://drive.google.com/open?id=0B3gH07JzlFotSDhnM1pHamlRRlU" target="_blank" title="https://drive.google.com/open?id=0B3gH07JzlFotSDhnM1pHamlRRlU">https://drive.google.com/open?id=0B3gH07JzlFotSDhnM1pHamlRRlU</a></p>
<p>Great work this weekend!</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
