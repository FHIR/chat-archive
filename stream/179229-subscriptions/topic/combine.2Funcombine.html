---
layout: page
title: "FHIR Chat  · combine/uncombine · subscriptions"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/index.html">subscriptions</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/combine.2Funcombine.html">combine/uncombine</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="175710964"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/combine/uncombine/near/175710964" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/combine.2Funcombine.html#175710964">(Sep 14 2019 at 17:44)</a>:</h4>
<p>Alright my FHIIR query/FHIRPath gurus... How would you do the prev and next or FHIRPath criteria to detect a patient combine or uncombine?</p>



<a name="175710981"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/combine/uncombine/near/175710981" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/combine.2Funcombine.html#175710981">(Sep 14 2019 at 17:45)</a>:</h4>
<p>In R4, the Patient.link set of data would change, but you only care if links of type replaces or replaced-by</p>



<a name="175710987"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/combine/uncombine/near/175710987" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/combine.2Funcombine.html#175710987">(Sep 14 2019 at 17:45)</a>:</h4>
<p>link is a query param...</p>



<a name="175711041"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/combine/uncombine/near/175711041" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/combine.2Funcombine.html#175711041">(Sep 14 2019 at 17:46)</a>:</h4>
<p>but it's the reference it's defined against</p>



<a name="175711615"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/combine/uncombine/near/175711615" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/combine.2Funcombine.html#175711615">(Sep 14 2019 at 18:04)</a>:</h4>
<p>Can you give an example of before-and-after data?</p>



<a name="175711694"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/combine/uncombine/near/175711694" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/combine.2Funcombine.html#175711694">(Sep 14 2019 at 18:06)</a>:</h4>
<p>The below is at the bottom of the Patient resource in the after, and not there in the before.</p>
<div class="codehilite"><pre><span></span>  &lt;link&gt;
    &lt;other&gt;
      &lt;reference value=&quot;Paitent/01&quot; /&gt;
      &lt;display value=&quot;Mary Lincoln&quot; /&gt;
    &lt;/other&gt;
    &lt;type value=&quot;replaces&quot; /&gt;
  &lt;/link&gt;
</pre></div>



<a name="175711696"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/combine/uncombine/near/175711696" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/combine.2Funcombine.html#175711696">(Sep 14 2019 at 18:06)</a>:</h4>
<p>so we assume %current and %previous are available? and we're looking for anything different? Not quite sure what the parameters are</p>



<a name="175711704"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/combine/uncombine/near/175711704" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/combine.2Funcombine.html#175711704">(Sep 14 2019 at 18:07)</a>:</h4>
<p>There are some example patient resources on this page Josh<br>
<a href="https://confluence.hl7.org/display/PA/Connectathon+Sept+2019+at+WGM+%28Atlanta%29+Patient+%24Merge" target="_blank" title="https://confluence.hl7.org/display/PA/Connectathon+Sept+2019+at+WGM+%28Atlanta%29+Patient+%24Merge">https://confluence.hl7.org/display/PA/Connectathon+Sept+2019+at+WGM+%28Atlanta%29+Patient+%24Merge</a></p>



<a name="175712380"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/combine/uncombine/near/175712380" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/combine.2Funcombine.html#175712380">(Sep 14 2019 at 18:25)</a>:</h4>
<p>After a merge, the merged <em>to</em> patient will have a new Patient.link of type "replaces", the merged <em>away</em> patient will have a new Patient.link of type "replaced-by"</p>



<a name="175712432"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/combine/uncombine/near/175712432" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/combine.2Funcombine.html#175712432">(Sep 14 2019 at 18:26)</a>:</h4>
<p>After an unmerge, the unmerged <em>from</em> patient will have a Patient.link of type "replaces" removed, the unmerged <em>to</em> patient will have a Patient.link of type "replaced-by" removed.</p>



<a name="175712435"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/combine/uncombine/near/175712435" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/combine.2Funcombine.html#175712435">(Sep 14 2019 at 18:26)</a>:</h4>
<p>I think :)</p>



<a name="175712513"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/combine/uncombine/near/175712513" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/combine.2Funcombine.html#175712513">(Sep 14 2019 at 18:28)</a>:</h4>
<p><code>%this.link.where(type = 'replaced-by').count() != %previous.link.where(type = 'replaced-by').count()</code></p>



<a name="175712529"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/combine/uncombine/near/175712529" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/combine.2Funcombine.html#175712529">(Sep 14 2019 at 18:29)</a>:</h4>
<p>but... that's loose. what exact events do you want? can you have more than replace-by? no? but you could have more than replaces, yes?</p>



<a name="175712653"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/combine/uncombine/near/175712653" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/combine.2Funcombine.html#175712653">(Sep 14 2019 at 18:32)</a>:</h4>
<p>There's also a question of listening for an operation call directly. Today we have defined <code>Topic.resourceTrigger</code>, but when we want to trigger on operation invocations, we may want an <code>operationTrigger</code> (i.e., rather than looking for the <em>result</em> of the operation as it plays out in the affected resources, we may want to learn about the operation invocation itself).</p>



<a name="175712660"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/combine/uncombine/near/175712660" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/combine.2Funcombine.html#175712660">(Sep 14 2019 at 18:32)</a>:</h4>
<p>But for operations that <em>do</em> impact resources, like Patient $merge,  listening for telltale changes on Patient with a filter like Grahame defined above seems pretty reasonable.</p>



<a name="175712694"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/combine/uncombine/near/175712694" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/combine.2Funcombine.html#175712694">(Sep 14 2019 at 18:33)</a>:</h4>
<p>Right, I think you would want to handle both. In our server, very few will likely come through the actual FHIR operation (for quite a while). But that wouldn't be true for native FHIR servers.</p>



<a name="175712765"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/combine/uncombine/near/175712765" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/combine.2Funcombine.html#175712765">(Sep 14 2019 at 18:35)</a>:</h4>
<p>Trying to figure out how to make it actually computable</p>



<a name="175712850"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/combine/uncombine/near/175712850" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/combine.2Funcombine.html#175712850">(Sep 14 2019 at 18:36)</a>:</h4>
<p>Yeah. I think Grahame's solution is a good start. Are there any cases it misses? Or where it triggers unnecessarily?</p>



<a name="175712867"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/combine/uncombine/near/175712867" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/combine.2Funcombine.html#175712867">(Sep 14 2019 at 18:36)</a>:</h4>
<p>it's tricky. I can write FHIRpath statements but exactly you are looking for depends on what you're doing</p>



<a name="175712973"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/combine/uncombine/near/175712973" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cooper Thompson <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/combine.2Funcombine.html#175712973">(Sep 14 2019 at 18:39)</a>:</h4>
<p>In the patient merge track we are increasingly distinguishing between merge and link.  We're leaning toward suggesting (but not requiring) that the $merge operation not actually do anything with Patient.link</p>



<a name="175712974"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/combine/uncombine/near/175712974" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/combine.2Funcombine.html#175712974">(Sep 14 2019 at 18:39)</a>:</h4>
<p><span class="user-mention" data-user-id="191764">@Cooper Thompson</span>  this one.</p>



<a name="175713042"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/combine/uncombine/near/175713042" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cooper Thompson <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/combine.2Funcombine.html#175713042">(Sep 14 2019 at 18:40)</a>:</h4>
<p>In a merge, the source record could be deleted, and the new (target) record may either 1) have no changes or 2) have some normal demographic changes (e.g. address) if the source patient demographics were carried over.  In both cases the link property on the target patient would not be touched.</p>



<a name="175713124"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/combine/uncombine/near/175713124" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/combine.2Funcombine.html#175713124">(Sep 14 2019 at 18:42)</a>:</h4>
<p>Our system would do everything based on link/we update the relationships under the covers for legal reasons.</p>



<a name="175713135"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/combine/uncombine/near/175713135" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/combine.2Funcombine.html#175713135">(Sep 14 2019 at 18:42)</a>:</h4>
<p>which should work if a system can trigger off of an operation</p>



<a name="175713136"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/combine/uncombine/near/175713136" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/combine.2Funcombine.html#175713136">(Sep 14 2019 at 18:42)</a>:</h4>
<p>so as long as I can <em>still</em> do that...</p>



<a name="175713139"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/combine/uncombine/near/175713139" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/combine.2Funcombine.html#175713139">(Sep 14 2019 at 18:42)</a>:</h4>
<p>Also, this gets back to the discussion about logical subscription vs. trying to compute</p>



<a name="175713149"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/combine/uncombine/near/175713149" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/combine.2Funcombine.html#175713149">(Sep 14 2019 at 18:43)</a>:</h4>
<p>EG: ADT - it doesn't matter if a system is running the exact query under the covers, as long as it meets the functional need/description of the trigger</p>



<a name="175713194"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/combine/uncombine/near/175713194" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/combine.2Funcombine.html#175713194">(Sep 14 2019 at 18:44)</a>:</h4>
<p>Which is why it's ok if systems run it off their older ADT systems for admission, discharge, and transfer subscriptions</p>



<a name="175713195"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/combine/uncombine/near/175713195" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/combine.2Funcombine.html#175713195">(Sep 14 2019 at 18:44)</a>:</h4>
<p>But we should make sure it works for both types of use cases</p>



<a name="175713305"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/combine/uncombine/near/175713305" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cooper Thompson <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/combine.2Funcombine.html#175713305">(Sep 14 2019 at 18:47)</a>:</h4>
<p>Even though you link under the covers, would you  "pretend" that the source patient was deleted when represented via the FHIR patient.search API?  Or would you return the source patient in your search results, just marked as inactive?</p>



<a name="175713344"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/combine/uncombine/near/175713344" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/combine.2Funcombine.html#175713344">(Sep 14 2019 at 18:48)</a>:</h4>
<blockquote>
<p>the $merge operation not actually do anything with Patient.link</p>
</blockquote>
<p>+1</p>



<a name="175713361"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/combine/uncombine/near/175713361" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/combine.2Funcombine.html#175713361">(Sep 14 2019 at 18:49)</a>:</h4>
<p><span class="user-mention" data-user-id="191764">@Cooper Thompson</span>  it's treated as inactive, and isn't returned if you're just searching</p>



<a name="175713365"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/combine/uncombine/near/175713365" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/combine.2Funcombine.html#175713365">(Sep 14 2019 at 18:49)</a>:</h4>
<p>You can read it by id, and we redact all the demographic info, and then have patient.link that tells you where to go look</p>



<a name="175713414"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/combine/uncombine/near/175713414" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/combine.2Funcombine.html#175713414">(Sep 14 2019 at 18:50)</a>:</h4>
<p>Eg: <a href="https://fhir.cerner.com/millennium/dstu2/individuals/patient/#patient-combines-example" target="_blank" title="https://fhir.cerner.com/millennium/dstu2/individuals/patient/#patient-combines-example">https://fhir.cerner.com/millennium/dstu2/individuals/patient/#patient-combines-example</a></p>



<a name="175713436"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/combine/uncombine/near/175713436" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/combine.2Funcombine.html#175713436">(Sep 14 2019 at 18:51)</a>:</h4>
<p>In DSTU 2, you couldn't link both directions, so for R4 I would like to take advantage of that so that you can see that data has gone nuts under the covers regardless of which patient your system uses</p>



<a name="175713963"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/combine/uncombine/near/175713963" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/combine.2Funcombine.html#175713963">(Sep 14 2019 at 19:05)</a>:</h4>
<p>Also, if data comes in to that old patient, our system records it on the new and records in the system that the old id was used (for unmerge). This is usually something that is limited to the time that it takes to do the actual merge.</p>



<a name="175714008"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/combine/uncombine/near/175714008" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/combine.2Funcombine.html#175714008">(Sep 14 2019 at 19:06)</a>:</h4>
<p>And not something we would expect to keep happening after the merge is completed (since no one could load the old patient anymore)</p>



<a name="175714279"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/combine/uncombine/near/175714279" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cooper Thompson <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/combine.2Funcombine.html#175714279">(Sep 14 2019 at 19:13)</a>:</h4>
<p>But back to the subscription use case, if the merge track is leaning toward not requiring a patient link, then monitoring patient.link for subscriptions won't be reliable.</p>



<a name="175714294"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/combine/uncombine/near/175714294" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/combine.2Funcombine.html#175714294">(Sep 14 2019 at 19:13)</a>:</h4>
<p>Which goes back to being able to monitor a combination of things. EG: our server may not support the merge operation, but that doesn't mean we won't be merging under the covers...</p>



<a name="175714802"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/combine/uncombine/near/175714802" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pascal Pfiffner <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/combine.2Funcombine.html#175714802">(Sep 14 2019 at 19:28)</a>:</h4>
<p><span class="user-mention" data-user-id="191764">@Cooper Thompson</span> I haven't followed the merge track, and out of curiosity – what's the reason for leaning to <em>not</em> requiring <code>Patient.link</code>?</p>



<a name="175715343"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/combine/uncombine/near/175715343" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/combine.2Funcombine.html#175715343">(Sep 14 2019 at 19:43)</a>:</h4>
<p>This would be for cases where the source patient resource (that was merged into a target patient resource) gets deleted, and no longer accessible from the API, and hence the resource Id that would be in the link is now a dead link.</p>



<a name="175715879"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/combine/uncombine/near/175715879" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cooper Thompson <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/combine.2Funcombine.html#175715879">(Sep 14 2019 at 20:00)</a>:</h4>
<p>1. If the source patient is deleted (not just inactive) as it is in some implementations, then it doesn't exist to be linked to<br>
2. We've been thinking about link representing more of a cross-domain patient association, while a merge represents an intra-domain process that combines data.  e.g. with merge, all references in all resources need to be fixed up to point to the resulting patient, but in link, they don't.  All that to say that the meaning of link is shifting a bit.</p>



<a name="175716002"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/combine/uncombine/near/175716002" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/combine.2Funcombine.html#175716002">(Sep 14 2019 at 20:02)</a>:</h4>
<p>I believe that we need to support link/unlink in internal records as well as full merge.</p>



<a name="175716009"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/combine/uncombine/near/175716009" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/combine.2Funcombine.html#175716009">(Sep 14 2019 at 20:02)</a>:</h4>
<p>I'm not opposed to supporting cross-domain association as well</p>



<a name="175716165"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/combine/uncombine/near/175716165" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cooper Thompson <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/combine.2Funcombine.html#175716165">(Sep 14 2019 at 20:07)</a>:</h4>
<p>As semantically the same as merge?  Or different?  I.e. if you link two patients, does that mean to get a full picture of their allergies you need to do two searches?  Or would all the allergies be returned by a single AllergyIntolerance?patient=2?</p>



<a name="175716557"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/combine/uncombine/near/175716557" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/combine.2Funcombine.html#175716557">(Sep 14 2019 at 20:18)</a>:</h4>
<p>search on both patients.</p>



<a name="175716560"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/combine/uncombine/near/175716560" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/combine.2Funcombine.html#175716560">(Sep 14 2019 at 20:18)</a>:</h4>
<p>that's not the same as 1 or 2 searches</p>



<a name="175716665"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/combine/uncombine/near/175716665" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cooper Thompson <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/combine.2Funcombine.html#175716665">(Sep 14 2019 at 20:22)</a>:</h4>
<p>It depends on the SMART scopes you have.   If you only got access to one patient, you would need to re-auth to get access to all the other linked patients (maybe).</p>
<p>And if there are 3-4 links that get added over time, then the flow always becomes:  1) do a SMART launch, get the patient ID in context.  2) query that patient get all the links 3) hope your SMART scope lets you see all of them and 4) query for all the linked IDs.  You'd also need to hope that all of the (say 4) patients are cross linked, so you don't have to follow links to each patient, and then follow those links, etc. to get a full view.</p>
<p>And if we support both link and merge, then every client will need to support that workflow as well as the simple single-patient search workflow depending on the system they talk to.</p>



<a name="175716847"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/combine/uncombine/near/175716847" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/combine.2Funcombine.html#175716847">(Sep 14 2019 at 20:26)</a>:</h4>
<p>yes all those things!</p>



<a name="175716984"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/combine/uncombine/near/175716984" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/combine.2Funcombine.html#175716984">(Sep 14 2019 at 20:30)</a>:</h4>
<p>I'm curious why a replaces or replaced by would leave data out on the old patient?</p>



<a name="175716998"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/combine/uncombine/near/175716998" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/combine.2Funcombine.html#175716998">(Sep 14 2019 at 20:30)</a>:</h4>
<p>By definition "The patient resource containing this link must no longer be used. The link points forward to another patient resource that must be used in lieu of the patient resource that contains this link."</p>



<a name="175717010"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/combine/uncombine/near/175717010" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/combine.2Funcombine.html#175717010">(Sep 14 2019 at 20:31)</a>:</h4>
<p>and "The patient resource containing this link is the current active patient record. The link points back to an inactive patient resource that has been merged into this resource, and should be consulted to retrieve additional referenced information."</p>



<a name="175717015"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/combine/uncombine/near/175717015" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cooper Thompson <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/combine.2Funcombine.html#175717015">(Sep 14 2019 at 20:31)</a>:</h4>
<p>If we move all the data from the old patient, what is the value of having the replaced by link?  As opposed to a redirec or something like that?</p>



<a name="175717068"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/combine/uncombine/near/175717068" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/combine.2Funcombine.html#175717068">(Sep 14 2019 at 20:32)</a>:</h4>
<p>I would think that for the workflows you all are referring to, it would be invalid to use those link types?</p>



<a name="175717069"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/combine/uncombine/near/175717069" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/combine.2Funcombine.html#175717069">(Sep 14 2019 at 20:32)</a>:</h4>
<p>See also and refer would be more appropriate?</p>



<a name="175717070"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/combine/uncombine/near/175717070" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/combine.2Funcombine.html#175717070">(Sep 14 2019 at 20:32)</a>:</h4>
<p>It depends on how the system is integrating</p>



<a name="175717071"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/combine/uncombine/near/175717071" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/combine.2Funcombine.html#175717071">(Sep 14 2019 at 20:32)</a>:</h4>
<p>If it has its own set of data, it may have its own logic to merge</p>



<a name="175717072"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/combine/uncombine/near/175717072" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/combine.2Funcombine.html#175717072">(Sep 14 2019 at 20:32)</a>:</h4>
<p>and need the new one</p>



<a name="175717140"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/combine/uncombine/near/175717140" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/combine.2Funcombine.html#175717140">(Sep 14 2019 at 20:34)</a>:</h4>
<p>zulip seems to be reorganizing the order of this conversation for me... weirdness</p>



<a name="175717141"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/combine/uncombine/near/175717141" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/combine.2Funcombine.html#175717141">(Sep 14 2019 at 20:34)</a>:</h4>
<p>We're too quick for it</p>



<a name="175717157"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/combine/uncombine/near/175717157" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pascal Pfiffner <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/combine.2Funcombine.html#175717157">(Sep 14 2019 at 20:35)</a>:</h4>
<p>The value in having at least the old <code>Patient</code> resource available is that clients that have refresh tokens can still retrieve that resource and infer from its links that something has happened to which the client needs to take action. Even if this just means throw away the tokens and have the user sign in again (and invalidate all the locally stored resources).</p>



<a name="175717209"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/combine/uncombine/near/175717209" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cooper Thompson <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/combine.2Funcombine.html#175717209">(Sep 14 2019 at 20:36)</a>:</h4>
<p>Yeah - we were considering what to do about token expiration.  Specifically for patient-authorized representatives.  We were leaning toward adding guidance to expire all tokens, since you might want to review who should have access to the new merged chart.  Input on that point would be nice.</p>



<a name="175717212"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/combine/uncombine/near/175717212" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cooper Thompson <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/combine.2Funcombine.html#175717212">(Sep 14 2019 at 20:37)</a>:</h4>
<p>For patient-self access, maybe we don't expire those?</p>



<a name="175717222"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/combine/uncombine/near/175717222" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/combine.2Funcombine.html#175717222">(Sep 14 2019 at 20:37)</a>:</h4>
<p>My gut says yeah, don't expire.</p>



<a name="175717225"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/combine/uncombine/near/175717225" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/combine.2Funcombine.html#175717225">(Sep 14 2019 at 20:37)</a>:</h4>
<p>It isn't like the patient did something to make that happen.</p>



<a name="175717227"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/combine/uncombine/near/175717227" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pascal Pfiffner <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/combine.2Funcombine.html#175717227">(Sep 14 2019 at 20:37)</a>:</h4>
<p>My gut says the same!</p>



<a name="175717231"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/combine/uncombine/near/175717231" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/combine.2Funcombine.html#175717231">(Sep 14 2019 at 20:37)</a>:</h4>
<p>And our direction in general has been away from expiring patient tokens unless there's a really good reason.</p>



<a name="175717286"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/combine/uncombine/near/175717286" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/combine.2Funcombine.html#175717286">(Sep 14 2019 at 20:39)</a>:</h4>
<p>The problem, in our system, is that there's nothing anymore that lets us figure out who the patient is from their sign on</p>



<a name="175717287"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/combine/uncombine/near/175717287" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cooper Thompson <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/combine.2Funcombine.html#175717287">(Sep 14 2019 at 20:39)</a>:</h4>
<p>Are you both saying don't expire for patient self-access only?  Or patient-authorized representative access as well?</p>



<a name="175717295"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/combine/uncombine/near/175717295" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/combine.2Funcombine.html#175717295">(Sep 14 2019 at 20:39)</a>:</h4>
<p>(if you were the loser in the merge operation)</p>



<a name="175717299"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/combine/uncombine/near/175717299" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/combine.2Funcombine.html#175717299">(Sep 14 2019 at 20:39)</a>:</h4>
<p>I  was only talking about self-access.</p>



<a name="175717342"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/combine/uncombine/near/175717342" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/combine.2Funcombine.html#175717342">(Sep 14 2019 at 20:40)</a>:</h4>
<p>I agree with your "input would be nice" on the proxy access case.</p>



<a name="175717345"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/combine/uncombine/near/175717345" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/combine.2Funcombine.html#175717345">(Sep 14 2019 at 20:40)</a>:</h4>
<p>(So I guess I agree with you on both cases.)</p>



<a name="175717355"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/combine/uncombine/near/175717355" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cooper Thompson <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/combine.2Funcombine.html#175717355">(Sep 14 2019 at 20:41)</a>:</h4>
<p>Even with self-access though, before the merge you have two different user accounts (with two different passwords maybe).  After the merge, I'm not really sure if both accounts should be able to access the resulting patient or what.  I need to investigate what we (Epic ) do there.</p>



<a name="175717405"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/combine/uncombine/near/175717405" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/combine.2Funcombine.html#175717405">(Sep 14 2019 at 20:42)</a>:</h4>
<p>AH,</p>



<a name="175717408"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/combine/uncombine/near/175717408" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/combine.2Funcombine.html#175717408">(Sep 14 2019 at 20:42)</a>:</h4>
<p>Yes, of course.</p>



<a name="175717409"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/combine/uncombine/near/175717409" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/combine.2Funcombine.html#175717409">(Sep 14 2019 at 20:42)</a>:</h4>
<p>I was talking about the target patient's token.</p>



<a name="175717411"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/combine/uncombine/near/175717411" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/combine.2Funcombine.html#175717411">(Sep 14 2019 at 20:42)</a>:</h4>
<p>Target patient for us is still good, keeps moving on with life</p>



<a name="175717412"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/combine/uncombine/near/175717412" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/combine.2Funcombine.html#175717412">(Sep 14 2019 at 20:42)</a>:</h4>
<p>Likewise</p>



<a name="175717415"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/combine/uncombine/near/175717415" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/combine.2Funcombine.html#175717415">(Sep 14 2019 at 20:42)</a>:</h4>
<p>just has new magic data back in the past</p>



<a name="175717416"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/combine/uncombine/near/175717416" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/combine.2Funcombine.html#175717416">(Sep 14 2019 at 20:42)</a>:</h4>
<p>Yep.</p>



<a name="175717427"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/combine/uncombine/near/175717427" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pascal Pfiffner <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/combine.2Funcombine.html#175717427">(Sep 14 2019 at 20:43)</a>:</h4>
<p>The problem I have with expiring tokens is that this makes me prompt the user to sign-in again (which we also do in other scenarios, e.g. refresh token revoked). That alone doesn't tell me that I should or should not delete all the data I have. And then, upon re-login, I get a different patient ID back – which again could happen in this merge scenario but also because the user selected the wrong patient from the picker or used different credentials. And I as a client again don't know what to do with the old data that I have.</p>



<a name="175717428"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/combine/uncombine/near/175717428" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/combine.2Funcombine.html#175717428">(Sep 14 2019 at 20:43)</a>:</h4>
<p>Which (as <span class="user-mention" data-user-id="191339">@Pascal Pfiffner</span> and <span class="user-mention" data-user-id="193764">@Ricky Bloomfield</span> and I discussed earlier) is easy for everyone involved.  "Oh nice," says the client, "more data!"  (Talking about the target patient, since things get out of order in chat)</p>



<a name="175717475"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/combine/uncombine/near/175717475" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cooper Thompson <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/combine.2Funcombine.html#175717475">(Sep 14 2019 at 20:44)</a>:</h4>
<p>This might be a little bit of a stretch, but we do grant different access based on criteria like age.  So if the target patient is an adult, and has full access, and the source patient is a minor and has limited access... what permissions do the accounts have to the resultant patient (depending on which birth day was identified as being correct).</p>



<a name="175717477"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/combine/uncombine/near/175717477" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/combine.2Funcombine.html#175717477">(Sep 14 2019 at 20:44)</a>:</h4>
<p>Ugh</p>



<a name="175719357"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/combine/uncombine/near/175719357" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Charles Ye <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/combine.2Funcombine.html#175719357">(Sep 14 2019 at 21:38)</a>:</h4>
<p>Good point. The issue is about differences between Patient Identifier domain and Patient Portal Security domain from a solution perspective. Can we assume that the patient registry and patient security directory are two distinct instances ( I think that most cases are)? If they are different instances,  merging two patients in the patient identifier domain(s) triggers a task to consolidate patient security credentials of two patients in the security domain(s).</p>



<a name="175720389"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/combine/uncombine/near/175720389" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/combine.2Funcombine.html#175720389">(Sep 14 2019 at 22:08)</a>:</h4>
<p>I would have thought that with the Patient resource ID in the token, you wouldn't be able to get at any data anymore... (if you were the loser as <span class="user-mention" data-user-id="191356">@Jenni Syed</span> so nicely points out)</p>



<a name="175720761"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/combine/uncombine/near/175720761" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/combine.2Funcombine.html#175720761">(Sep 14 2019 at 22:18)</a>:</h4>
<p>yes, that's exactly why ours kills the session :)</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
