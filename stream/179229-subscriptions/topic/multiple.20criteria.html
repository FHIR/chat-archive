---
layout: page
title: "FHIR Chat  · multiple criteria · subscriptions"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/index.html">subscriptions</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/multiple.20criteria.html">multiple criteria</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="156710121"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/multiple%20criteria/near/156710121" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/multiple.20criteria.html#156710121">(Jan 23 2019 at 18:00)</a>:</h4>
<p>The Subscription documentation suggests that multiple criteria are possible in a single Subscription resource...</p>
<blockquote>
<p>The criteria are Search <em>strings</em> that ...</p>
</blockquote>
<p>But no guidance or instruction how to delimit the strings.  For example for a provider directory push to a  local directory,  I would like to  query for the  all the updated Practitioners, PractitionerRoles and Endpoints in  a single subscription.</p>
<ul>
<li>Practitioner?address-postalcode=[zip list]</li>
<li>PractitionerRole?practitioner.address-postalcode=[zip list]</li>
<li>Endpoint?_has:PractitionerRole:endpoint:practitioner.address-postalcode=[zip list]</li>
</ul>
<p>something like...</p>
<div class="codehilite"><pre><span></span>{
  &quot;resourceType&quot;: &quot;Subscription&quot;,
  &quot;id&quot;: &quot;vhdir-connectathon-scenario-12&quot;,
  &quot;status&quot;: &quot;requested&quot;,
  &quot;contact&quot;: [
    {
      &quot;system&quot;: &quot;phone&quot;,
      &quot;value&quot;: &quot;ext 4123&quot;
    }
  ],
  &quot;end&quot;: &quot;2020-01-01T00:00:00Z&quot;,
  &quot;reason&quot;: &quot;(push) healthcare directory data to multiple local directories&quot;,
  &quot;criteria&quot;: &quot;Practitioner?address-postalcode=[zip list],PractitionerRole?practitioner.address-postalcode=[zip list],Endpoint?_has:PractitionerRole:endpoint:practitioner.address-postalcode=[zip list]&quot;,
  &quot;channel&quot;: {
    &quot;type&quot;: &quot;rest-hook&quot;,
    &quot;endpoint&quot;: &quot;https://directory.com/sub-endpoint&quot;,
    &quot;payload&quot;: &quot;application/fhir+json&quot;,
    &quot;header&quot;: [
      &quot;Authorization: Bearer secret-token-abc-123&quot;
    ]
  }
}
</pre></div>


<p>spaces, commas? am I interpreting this correctly?</p>



<a name="156711594"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/multiple%20criteria/near/156711594" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/multiple.20criteria.html#156711594">(Jan 23 2019 at 18:20)</a>:</h4>
<p>that's misleading language. It's a set of search parameters in a single string</p>



<a name="156724761"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/multiple%20criteria/near/156724761" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/multiple.20criteria.html#156724761">(Jan 23 2019 at 20:59)</a>:</h4>
<p>so within the string are the  set of search parameters separated by a space?</p>



<a name="156728798"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/multiple%20criteria/near/156728798" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/multiple.20criteria.html#156728798">(Jan 23 2019 at 21:57)</a>:</h4>
<p>no a single normal search string</p>



<a name="156730382"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/multiple%20criteria/near/156730382" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/multiple.20criteria.html#156730382">(Jan 23 2019 at 22:18)</a>:</h4>
<p>let me restate this..  I  want all the updated Practitioners, PractiionerRoles and Endpoints.   Since this isn't possible in a single search expression - do I need 3 separate Subscriptions?</p>



<a name="156730553"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/multiple%20criteria/near/156730553" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/multiple.20criteria.html#156730553">(Jan 23 2019 at 22:21)</a>:</h4>
<p>I think so</p>



<a name="156730658"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/multiple%20criteria/near/156730658" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/multiple.20criteria.html#156730658">(Jan 23 2019 at 22:22)</a>:</h4>
<p>is there anything else?</p>



<a name="156735321"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/multiple%20criteria/near/156735321" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/multiple.20criteria.html#156735321">(Jan 23 2019 at 23:39)</a>:</h4>
<p>I'd like to know from others  whether or not is appropriate to have multiple criteria in a single subscription.  If I'm a directory, I'd like all the information pushed at once in a single bundle e.g  for referential integrity i'd expect the new Practitioner and all her PractitionerRoles and Endpoints to come as a bundle...  <span class="user-mention" data-user-id="191367">@Brian Postlethwaite</span> ?</p>



<a name="156761564"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/multiple%20criteria/near/156761564" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/multiple.20criteria.html#156761564">(Jan 24 2019 at 10:09)</a>:</h4>
<p>It wouldn’t make many difference. You’d get individual resources either way, and you can use multiple subscriptions for the same channel</p>



<a name="156786350"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/multiple%20criteria/near/156786350" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/multiple.20criteria.html#156786350">(Jan 24 2019 at 16:38)</a>:</h4>
<p>OK  I misunderstood how the REST Hook works,  to clarify: The subscription resource is  based upon a  <em>single</em> search string.  The subscription service  " forwards" ( e.g. updates)  a copy of <strong>each individual resource</strong>  to the nominated  endpoint aka FHIR Server  ( for the sake of argument -  a middleman server)   as opposed to rebundling a resultant  search bundle as a batch and  batching it.  The Subscriber would then pull from the middleman server  at its leisure.   With a middleman this workflow is more like directed polling than pure push.  if I described this correctly ,  I think it would be helpful to create trackers for:</p>
<ul>
<li>flesh out an example rest hook workflow a little more in the spec with pretty diagrams etc</li>
<li>clarify the text to state one search: one subscription resource</li>
<li>clarify that the payload is a resource and not a (search bundle)  if that is true</li>
</ul>



<a name="156786587"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/multiple%20criteria/near/156786587" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/multiple.20criteria.html#156786587">(Jan 24 2019 at 16:41)</a>:</h4>
<p>BTW TY @GG</p>



<a name="156800791"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/multiple%20criteria/near/156800791" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/multiple.20criteria.html#156800791">(Jan 24 2019 at 19:50)</a>:</h4>
<p>depends on whether there's a payload or not - no payload = directed polling. Payload = push</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
