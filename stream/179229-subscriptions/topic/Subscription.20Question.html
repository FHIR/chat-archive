---
layout: page
title: "FHIR Chat  · Subscription Question · subscriptions"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/index.html">subscriptions</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Subscription.20Question.html">Subscription Question</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153996174"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Subscription%20Question/near/153996174" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Subscription.20Question.html#153996174">(Sep 12 2018 at 09:16)</a>:</h4>
<p>See <a href="http://community.fhir.org/t/fhir-resource-subscription/958" target="_blank" title="http://community.fhir.org/t/fhir-resource-subscription/958">http://community.fhir.org/t/fhir-resource-subscription/958</a></p>



<a name="153996175"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Subscription%20Question/near/153996175" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Subscription.20Question.html#153996175">(Sep 12 2018 at 09:16)</a>:</h4>
<p>I don't believe that we've ever had any discussion on the subject, but I believe that we do not say that it's ok to put this in a subscription:</p>



<a name="153996176"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Subscription%20Question/near/153996176" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Subscription.20Question.html#153996176">(Sep 12 2018 at 09:16)</a>:</h4>
<div class="codehilite"><pre><span></span>“criteria”: “Patient/9/$everything?_lastUpdated=gt2018-09-05T11:02:59.777+05:30”,
</pre></div>



<a name="153996177"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Subscription%20Question/near/153996177" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Subscription.20Question.html#153996177">(Sep 12 2018 at 09:17)</a>:</h4>
<p>And I think we'd need to say it... but it seems to me that this is pretty typical thing to want to do.</p>



<a name="153996178"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Subscription%20Question/near/153996178" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Subscription.20Question.html#153996178">(Sep 12 2018 at 09:17)</a>:</h4>
<p>anyone have any comment?</p>



<a name="153996281"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Subscription%20Question/near/153996281" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Subscription.20Question.html#153996281">(Sep 12 2018 at 15:21)</a>:</h4>
<p>what is wrong with that subscription request? I could understand a server not liking (being able to support) all possible subscription criteria. This does indeed look difficult, but not hard enough to forbid.</p>



<a name="153996308"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Subscription%20Question/near/153996308" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sahil Khanna <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Subscription.20Question.html#153996308">(Sep 12 2018 at 16:46)</a>:</h4>
<p>Hi Guys..<br>
I am not sure what is the issue with that subscription request. </p>
<p>“criteria”: “Patient/9/$everything?_lastUpdated=gt2018-09-05T11:02:59.777+05:30”,</p>
<p>Even when i am trying to subscribe a particulare resource i am getting a new subscription resource created in my HAPI server..  but when i am updating a new resource.. i am not getting any response back</p>



<a name="153996311"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Subscription%20Question/near/153996311" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sahil Khanna <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Subscription.20Question.html#153996311">(Sep 12 2018 at 16:48)</a>:</h4>
<p>i am using below subscription request : </p>
<p>{<br>
  "resourceType": "Subscription",<br>
  "id": "112233",<br>
  "text": {<br>
    "status": "generated",<br>
    "div": "&lt;div xmlns=\"http://www.w3.org/1999/xhtml\"&gt;&lt;/div&gt;"<br>
  },<br>
  "status": "requested",<br>
  "contact": [<br>
    {<br>
      "system": "phone",<br>
      "value": "ext 4123"<br>
    }<br>
  ],<br>
  "end": "2021-01-01T00:00:00Z",<br>
  "reason": "Testing subscription",<br>
  "criteria": "Encounter?_lastUpdated=gt2018-08-13T10:57:55.982+05:30",<br>
  "channel": {<br>
    "type": "rest-hook",<br>
    "endpoint": "<a href="http://localhost:1962/fhir/subscription/poc" target="_blank" title="http://localhost:1962/fhir/subscription/poc">http://localhost:1962/fhir/subscription/poc</a>",<br>
    "payload": "application/fhir+json",<br>
    "header": [<br>
      "Authorization: Bearer secret-token-abc-123"<br>
    ]<br>
  },<br>
  "tag": [<br>
    {<br>
      "system": "<a href="http://example.org/fhir/cs/internal" target="_blank" title="http://example.org/fhir/cs/internal">http://example.org/fhir/cs/internal</a>",<br>
      "code": "bili-done"<br>
    }<br>
  ]<br>
}</p>



<a name="153996355"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Subscription%20Question/near/153996355" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Christiaan Knaap <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Subscription.20Question.html#153996355">(Sep 12 2018 at 19:14)</a>:</h4>
<p>Spec says "The criteria are Search strings", and $everything is an operation, not a Search string.</p>



<a name="153996357"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Subscription%20Question/near/153996357" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Christiaan Knaap <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Subscription.20Question.html#153996357">(Sep 12 2018 at 19:20)</a>:</h4>
<p>But if you leave out the /$everything you state roughly the same by doing a compartment search that would be valid according to the current wording though. Still not sure if it is wise to allow it.</p>



<a name="153996396"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Subscription%20Question/near/153996396" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Subscription.20Question.html#153996396">(Sep 12 2018 at 22:33)</a>:</h4>
<blockquote>
<p>$everything is an operation</p>
</blockquote>
<p>yes that is the issue here</p>



<a name="153996397"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Subscription%20Question/near/153996397" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Subscription.20Question.html#153996397">(Sep 12 2018 at 22:33)</a>:</h4>
<p>compartment search:   /Patient/2345/*</p>



<a name="153996398"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Subscription%20Question/near/153996398" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Subscription.20Question.html#153996398">(Sep 12 2018 at 22:34)</a>:</h4>
<p>I don't know whether my server supports that</p>



<a name="153996414"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Subscription%20Question/near/153996414" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kurt Ericson <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Subscription.20Question.html#153996414">(Sep 12 2018 at 23:35)</a>:</h4>
<p>Just wanted to chime in to say although we (GCP) don't yet support that type of Subscription; it's a sufficiently common feature request that I think it should be allowed, even if different services decide whether or not they want to support it</p>



<a name="153996416"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Subscription%20Question/near/153996416" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Subscription.20Question.html#153996416">(Sep 13 2018 at 00:07)</a>:</h4>
<p>which type?</p>



<a name="153996427"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Subscription%20Question/near/153996427" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kurt Ericson <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Subscription.20Question.html#153996427">(Sep 13 2018 at 01:02)</a>:</h4>
<p>e.g. /Patient/2345/* and, potentially, modified by a timestamp (in the example: ?_lastUpdated=gt2018-09-05T11:02:59.777+05:30”)</p>



<a name="153996435"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Subscription%20Question/near/153996435" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Subscription.20Question.html#153996435">(Sep 13 2018 at 02:01)</a>:</h4>
<p>I'll add it to my list</p>



<a name="153996482"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Subscription%20Question/near/153996482" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kurt Ericson <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Subscription.20Question.html#153996482">(Sep 13 2018 at 03:19)</a>:</h4>
<p>sounds good; thanks!</p>



<a name="153996490"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Subscription%20Question/near/153996490" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Isaac Vetter <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Subscription.20Question.html#153996490">(Sep 13 2018 at 04:01)</a>:</h4>
<p>Hey Guys,</p>
<p>I see the transfer of a patient chart as a solved problem with XCA and Direct. In the US, we've got even networks of networks. </p>
<p>The potential value of FHIR Subscriptions is in targeted criteria, not</p>
<div class="codehilite"><pre><span></span>“criteria”: “Patient/9/$everything?_lastUpdated=gt2018-09-05T11:02:59.777+05:30”,
</pre></div>


<p>but rather:</p>
<div class="codehilite"><pre><span></span>“criteria”: “Observation?patient=123&amp;category=laboratory”,
</pre></div>


<p>and</p>
<div class="codehilite"><pre><span></span>“criteria”: “Practitioner/456”,
</pre></div>


<p>or even</p>
<div class="codehilite"><pre><span></span>“criteria”: “MeasureReport/789”,
</pre></div>



<a name="153996494"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Subscription%20Question/near/153996494" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Subscription.20Question.html#153996494">(Sep 13 2018 at 04:06)</a>:</h4>
<p><span class="user-mention" data-user-id="191864">@Isaac Vetter</span> there's no evidence yet that this question is a US specific questino</p>



<a name="153996495"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Subscription%20Question/near/153996495" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Isaac Vetter <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Subscription.20Question.html#153996495">(Sep 13 2018 at 04:07)</a>:</h4>
<p>You're right.</p>



<a name="153996506"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Subscription%20Question/near/153996506" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kurt Ericson <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Subscription.20Question.html#153996506">(Sep 13 2018 at 04:31)</a>:</h4>
<p>that's true -- the intent here is a global audience; to be clear, I certainly see the argument for servers NOT wanting to implement it and I don't disagree with those decisions; rather, I wanted to make the point that I think we should be open to patterns that developers want for their workloads, even if certain markets have other ways of dealing with similar transactions</p>



<a name="153996512"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Subscription%20Question/near/153996512" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Christiaan Knaap <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Subscription.20Question.html#153996512">(Sep 13 2018 at 05:06)</a>:</h4>
<p>Besides the /*, adding _lastUpdated to the subscription criteria seems superfluous in most cases. The Subscription is not evaluated before its creation anyway. So adding _lastUpdated is only useful if you want to subscribe to changes starting some time in the future.</p>



<a name="153996632"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Subscription%20Question/near/153996632" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sahil Khanna <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Subscription.20Question.html#153996632">(Sep 13 2018 at 12:54)</a>:</h4>
<p>That is the correct assumption. The requirement is such that they need auto triggering of all updated resources after a particular time interval. So that is why i was $everything in my search criteria.</p>
<p>I am not even sure if the HAPI server i am using will support my search criteria, but $ everything is working fine expect this test case for subscription.</p>
<p>Any other way we can subscribe all resources with one subscription request. I tried using this "/Patient/2345/*" syntax but still it is not working. It can be a scenario that my server does not support this request.</p>



<a name="153996638"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Subscription%20Question/near/153996638" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kurt Ericson <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Subscription.20Question.html#153996638">(Sep 13 2018 at 13:28)</a>:</h4>
<p><span class="user-mention" data-user-id="191757">@Christiaan Knaap</span> that's right; the cases I'm thinking of are for pre-admits to inpatient settings</p>



<a name="153998494"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Subscription%20Question/near/153998494" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sahil Khanna <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Subscription.20Question.html#153998494">(Sep 20 2018 at 09:03)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> <span class="user-mention" data-user-id="191319">@James Agnew</span>  can you please advise why i am not getting any response back from HAPI/VONK FHIR server for any update in the subscribed resources. This is what i am doing..</p>
<p>Using below JSON sample i am subscribing the resource..</p>
<p>{<br>
"resourceType": "Subscription",<br>
"status": "requested",<br>
"end": "2018-12-20T13:27:56.202+05:30",<br>
"reason": "Detect New Observation",<br>
"criteria": "Observation?code=http://loinc.org|1975-2",<br>
"channel": {<br>
"type":"rest-hook",<br>
"endpoint": "<a href="http://localhost:1962/fhir/subscription/poc" target="_blank" title="http://localhost:1962/fhir/subscription/poc">http://localhost:1962/fhir/subscription/poc</a>",<br>
"payload": "application/fhir+json"<br>
}<br>
}</p>



<a name="153998495"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Subscription%20Question/near/153998495" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sahil Khanna <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Subscription.20Question.html#153998495">(Sep 20 2018 at 09:04)</a>:</h4>
<p>I can see that a new subscription resource is created in the FHIR server.</p>
<p>Then when i am sending a PUT request to update the observation, then i am not getting any response on the endpoint mentioned in the subscription resource. The endpoint is active on my Rhapsody application.</p>



<a name="153998497"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Subscription%20Question/near/153998497" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sahil Khanna <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Subscription.20Question.html#153998497">(Sep 20 2018 at 09:09)</a>:</h4>
<p>Let me know if i am missing anything...</p>



<a name="153998498"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Subscription%20Question/near/153998498" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Subscription.20Question.html#153998498">(Sep 20 2018 at 09:20)</a>:</h4>
<p>Does the subscription change status from <code>requested</code> to <code>active</code> automatically? If not, you probably haven'r registered the appropriate interceptor. in order to enable subscription support. See the demo project for an example of how to do that: <a href="https://github.com/hapifhir/hapi-fhir-jpaserver-starter" target="_blank" title="https://github.com/hapifhir/hapi-fhir-jpaserver-starter">https://github.com/hapifhir/hapi-fhir-jpaserver-starter</a></p>



<a name="153998499"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Subscription%20Question/near/153998499" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sahil Khanna <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Subscription.20Question.html#153998499">(Sep 20 2018 at 09:20)</a>:</h4>
<p><span class="user-mention" data-user-id="191319">@James Agnew</span> .. the status is active. Do you think i am missing something?</p>



<a name="153998517"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Subscription%20Question/near/153998517" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Christiaan Knaap <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Subscription.20Question.html#153998517">(Sep 20 2018 at 11:59)</a>:</h4>
<p><span class="user-mention" data-user-id="196779">@Sahil Khanna</span> : As for Vonk: did you post it to the /administration/Subscription endpoint? (See <a href="http://docs.simplifier.net/vonk/features/subscription.html" target="_blank" title="http://docs.simplifier.net/vonk/features/subscription.html">doc</a>)</p>



<a name="153998518"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Subscription%20Question/near/153998518" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Christiaan Knaap <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Subscription.20Question.html#153998518">(Sep 20 2018 at 12:00)</a>:</h4>
<p>NB: I discovered that accidentally the search on /administration/subscription is broken in version 0.7.2.1. Will be fixed soon. Create/read/update and delete do work, so if you remember the id from the create, you can still read it.</p>



<a name="153998519"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Subscription%20Question/near/153998519" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sahil Khanna <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Subscription.20Question.html#153998519">(Sep 20 2018 at 12:01)</a>:</h4>
<p><span class="user-mention" data-user-id="191757">@Christiaan Knaap</span>  Yes i posted it to &lt;BaseURL&gt;/administrator/Subscription, but still no luck.</p>



<a name="153998520"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Subscription%20Question/near/153998520" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Christiaan Knaap <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Subscription.20Question.html#153998520">(Sep 20 2018 at 12:02)</a>:</h4>
<p>On the public test server or an instance of your own?</p>



<a name="153998521"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Subscription%20Question/near/153998521" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sahil Khanna <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Subscription.20Question.html#153998521">(Sep 20 2018 at 12:03)</a>:</h4>
<p>It is on the Public Test server</p>



<a name="153998524"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Subscription%20Question/near/153998524" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Christiaan Knaap <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Subscription.20Question.html#153998524">(Sep 20 2018 at 12:07)</a>:</h4>
<p>Do you happen to have the id that Vonk generated?</p>



<a name="153998531"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Subscription%20Question/near/153998531" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sahil Khanna <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Subscription.20Question.html#153998531">(Sep 20 2018 at 12:13)</a>:</h4>
<p>I have sent you a private message so that you can help me with my issue.</p>



<a name="153998604"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Subscription%20Question/near/153998604" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aziz Boxwala <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Subscription.20Question.html#153998604">(Sep 20 2018 at 14:20)</a>:</h4>
<p><span class="user-mention" data-user-id="196779">@Sahil Khanna</span></p>
<p>I added the following subscription to <a href="http://hapi.fhir.org" target="_blank" title="http://hapi.fhir.org">hapi.fhir.org</a>. I changed the end date to expire it earlier.  I change the endpoint to a webhook test site. Note the "?" at the end of the url. That is a hack to change the path params to query params. Make sure your endpoint can accept the path param, which in your case will append "/Observation/&lt;ResourceId&gt;"</p>
<p>{<br>
  "resourceType": "Subscription",<br>
  "status": "requested",<br>
  "end": "2018-09-22T13:27:56.202+05:30",<br>
  "reason": "Detect New Observation",<br>
  "criteria": "Observation?code=http://loinc.org|1975-2",<br>
  "channel": {<br>
    "type":"rest-hook",<br>
    "endpoint": "<a href="https://webhook.site/0aaeb346-e17a-4b52-af7f-d9c214da0143" target="_blank" title="https://webhook.site/0aaeb346-e17a-4b52-af7f-d9c214da0143">https://webhook.site/0aaeb346-e17a-4b52-af7f-d9c214da0143</a>?",<br>
    "payload": "application/fhir+json"<br>
  }<br>
}</p>
<p>I then posted the following observation. You can see that the Observation was sent to the endpoint a few minutes ago from <a href="http://hapi.fhir.org" target="_blank" title="http://hapi.fhir.org">hapi.fhir.org</a> by going here: <a href="https://webhook.site/#/0aaeb346-e17a-4b52-af7f-d9c214da0143/88dc911a-cc72-4077-88ab-6e89e38621ab/0" target="_blank" title="https://webhook.site/#/0aaeb346-e17a-4b52-af7f-d9c214da0143/88dc911a-cc72-4077-88ab-6e89e38621ab/0">https://webhook.site/#/0aaeb346-e17a-4b52-af7f-d9c214da0143/88dc911a-cc72-4077-88ab-6e89e38621ab/0</a></p>
<p>{<br>
  "resourceType": "Observation",<br>
  "status": "final",<br>
  "code": {<br>
    "coding": [<br>
      {<br>
        "system": "<a href="http://loinc.org" target="_blank" title="http://loinc.org">http://loinc.org</a>",<br>
        "code": "1975-2"<br>
      }<br>
    ]<br>
  },<br>
  "subject": {<br>
    "reference": "<a href="http://mypatients.example.com/Patient/123456" target="_blank" title="http://mypatients.example.com/Patient/123456">http://mypatients.example.com/Patient/123456</a>"<br>
  },<br>
  "effectiveDateTime": "2018-09-20",<br>
  "valueQuantity": {<br>
    "value": 1<br>
  }<br>
}</p>



<a name="153998658"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Subscription%20Question/near/153998658" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sahil Khanna <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Subscription.20Question.html#153998658">(Sep 20 2018 at 15:17)</a>:</h4>
<p>thank you Aziz.. i think i followed the same steps.. but still let me double check.. i really appreciate that you sent me the steps you followed...</p>



<a name="153998674"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Subscription%20Question/near/153998674" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sahil Khanna <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Subscription.20Question.html#153998674">(Sep 20 2018 at 15:55)</a>:</h4>
<p><span class="user-mention" data-user-id="195129">@Aziz Boxwala</span> ... it worked for me as well.. thank you for your help... the issue was with the network which was blocking the outside traffic.</p>



<a name="153998683"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Subscription%20Question/near/153998683" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aziz Boxwala <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Subscription.20Question.html#153998683">(Sep 20 2018 at 16:15)</a>:</h4>
<p><span class="emoji emoji-1f44d" title="thumbs up">:thumbs_up:</span> You're welcome.</p>



<a name="155035308"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Subscription%20Question/near/155035308" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marcelo caldas <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Subscription.20Question.html#155035308">(Jan 13 2019 at 15:49)</a>:</h4>
<p>Hi,<br>
I'm trying to make my subscription work on my own instance of Hapi-fhir server (I'm running the hapi-fhir-jpaexample server).<br>
I'm able to create my subscription and I see it as active, but my endpoint never receives any requests... </p>
<p>Currenlty, I'm at the connectathon-SanAntonio on the bulk data tables if anyone can stop by and help me out?!</p>
<p>thanks,</p>



<a name="155038965"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Subscription%20Question/near/155038965" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marcelo caldas <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Subscription.20Question.html#155038965">(Jan 13 2019 at 17:31)</a>:</h4>
<p>ok... I got it working, but i feel I hacked my solution. <br>
Basically, I was using type = rest-hook, which according to the spec, it expects a FHIR server on the other end - so I switched my endpoint to abide by a FHIR REST API, but it's not really a FHIR Server. <br>
Because my criteria is Encounter?status=finished, HAPI was calling  &lt;endpoint&gt; + /Encounter/{EncounterID}. Which makes total sense after reading the specs :-)</p>
<p>so my question is - what's the best way to use FHIR subscription when your endpoint is NOT a FHIR server! Just an app interested in data</p>



<a name="155046578"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Subscription%20Question/near/155046578" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Subscription.20Question.html#155046578">(Jan 13 2019 at 21:10)</a>:</h4>
<p>we haven't made arrangements for getting the data if you're not a FHIR server. You can say to just get a ping</p>



<a name="155126104"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Subscription%20Question/near/155126104" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Meghan Raul <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Subscription.20Question.html#155126104">(Jan 14 2019 at 22:41)</a>:</h4>
<blockquote>
<p>ok... I got it working, but i feel I hacked my solution. <br>
Basically, I was using type = rest-hook, which according to the spec, it expects a FHIR server on the other end - so I switched my endpoint to abide by a FHIR REST API, but it's not really a FHIR Server. <br>
Because my criteria is Encounter?status=finished, HAPI was calling  &lt;endpoint&gt; + /Encounter/{EncounterID}. Which makes total sense after reading the specs :-)</p>
<p>so my question is - what's the best way to use FHIR subscription when your endpoint is NOT a FHIR server! Just an app interested in data</p>
</blockquote>
<p>Hi Marcelo,</p>
<p>I was able to create a subscription from a client that was not a FHRI server using Cerner's sandbox: <a href="https://github.com/MaxPhilips/wgm_notes/blob/jan_2019/subscriptions/test_server_faq.md" target="_blank" title="https://github.com/MaxPhilips/wgm_notes/blob/jan_2019/subscriptions/test_server_faq.md">https://github.com/MaxPhilips/wgm_notes/blob/jan_2019/subscriptions/test_server_faq.md</a></p>
<p>Can you elaborate on the how you got a notification on &lt;endpoint&gt; + /Encounter/{EncounterID} ? With Cerner's sandbox I got a notification at the base url I specified</p>
<p>Reading the spec again, <span class="user-mention" data-user-id="195155">@Max Philips</span> Should the request have come to my endpoint/Subscription ? like it states here : <a href="https://www.hl7.org/fhir/subscription.html#2.46.7.1" target="_blank" title="https://www.hl7.org/fhir/subscription.html#2.46.7.1">https://www.hl7.org/fhir/subscription.html#2.46.7.1</a></p>



<a name="155184719"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Subscription%20Question/near/155184719" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Max Philips <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Subscription.20Question.html#155184719">(Jan 15 2019 at 16:49)</a>:</h4>
<p>Based on my reading of the spec there are two cases: 1. Subscription.channel.payload is not present, this would be interpreted as the subscription wants to receive data corresponding to the criteria. POSTs in this case would go to /Encounter or /Observation, or whatever the subscription is for. 2. Subscription.channel.payload is present, this would be interpreted as the subscription wants a notification for its owner to re-query and pull new data.</p>
<p>In particular, for Cerner's connectathon server, we don't have different behaviors for those two scenarios - POSTs will always go to the endpoint as registered regardless of payload set or absent.</p>



<a name="155365839"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Subscription%20Question/near/155365839" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marcelo caldas <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Subscription.20Question.html#155365839">(Jan 17 2019 at 20:21)</a>:</h4>
<p>HI <span class="user-mention" data-user-id="197209">@Meghan Raul</span>  - From what I read on the subscription specs, the endpoint of the subscription is treated as a ROOT url of a FHIR server - <span class="user-mention" data-user-id="191316">@Grahame Grieve</span>  confirmed that above as well. so, if my criteria is ,for example, for  Observation and my endpoint is <a href="http://acme.com" target="_blank" title="http://acme.com">http://acme.com</a>, the subscription when triggered will call <a href="http://acme.com/Observation/observation-id" target="_blank" title="http://acme.com/Observation/observation-id">http://acme.com/Observation/observation-id</a> .</p>
<p>That being said, I've noticed that HAPI server and VONK have different implementations. Would love to hear from Firely guys on this. It seems to me that HAPI is following the specs as I understood them.</p>
<p>I think <span class="user-mention" data-user-id="195155">@Max Philips</span> explained it well above, but I think is the opposite - if payload is present on my subscription, the entire contents are sent, otherwise - if payload is omitted - then only a "ping" will be sent and my server needs to query back the FHIR server that triggered the subscription, possibly with a _since filter to retrieve only records after my last ping.</p>



<a name="156328777"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Subscription%20Question/near/156328777" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Subscription.20Question.html#156328777">(Jan 17 2019 at 23:25)</a>:</h4>
<p>if a payload is missing, a ping will be sent to the nominated URL at the root</p>



<a name="156328871"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Subscription%20Question/near/156328871" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Subscription.20Question.html#156328871">(Jan 17 2019 at 23:27)</a>:</h4>
<p>if a payload is present, the resource will be posted or put to [root]/[Type]/[id]  where type and id are of the resource that was changed (not the subscription resource)</p>



<a name="156328892"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Subscription%20Question/near/156328892" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Subscription.20Question.html#156328892">(Jan 17 2019 at 23:27)</a>:</h4>
<p>see <a href="http://hl7.org/fhir/subscription.html#2.46.7.1" target="_blank" title="http://hl7.org/fhir/subscription.html#2.46.7.1">http://hl7.org/fhir/subscription.html#2.46.7.1</a></p>



<a name="163040377"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Subscription%20Question/near/163040377" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Iryna Roy <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Subscription.20Question.html#163040377">(Apr 10 2019 at 20:03)</a>:</h4>
<p>Can I clarify please (building the subscription / notification process right now) - the payload of a notification may contain the resource type and id? Awesome if so. Can it contain a bundle of type/ids?</p>



<a name="163042088"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Subscription%20Question/near/163042088" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Subscription.20Question.html#163042088">(Apr 10 2019 at 20:23)</a>:</h4>
<p>if there's a payload, it's the resource (with, therefore, type and id). Or there's no payload.  But no bundle, no - there's no support for batching up</p>



<a name="163042193"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Subscription%20Question/near/163042193" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Iryna Roy <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Subscription.20Question.html#163042193">(Apr 10 2019 at 20:24)</a>:</h4>
<p>Ok, so if multiple resources of a type were changed, then there are multiple notifications, right?</p>



<a name="163042605"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Subscription%20Question/near/163042605" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Subscription.20Question.html#163042605">(Apr 10 2019 at 20:28)</a>:</h4>
<p>yes</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
