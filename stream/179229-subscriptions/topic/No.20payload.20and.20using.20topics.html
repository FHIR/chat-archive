---
layout: page
title: "FHIR Chat  · No payload and using topics · subscriptions"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/index.html">subscriptions</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/No.20payload.20and.20using.20topics.html">No payload and using topics</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153914101"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/No%20payload%20and%20using%20topics/near/153914101" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Allan Bro Hansen <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/No.20payload.20and.20using.20topics.html#153914101">(Oct 16 2017 at 12:07)</a>:</h4>
<p>Hi<br>
I have did made a post at <a href="https://chat.fhir.org/#narrow/stream/implementers/topic/Subscriptions" target="_blank" title="https://chat.fhir.org/#narrow/stream/implementers/topic/Subscriptions">https://chat.fhir.org/#narrow/stream/implementers/topic/Subscriptions</a>.<br>
Now moving to this (better) stream.</p>
<p>My scenario is to notify external systems when a patient with an appointment arrives.</p>
<p>This "when a patient arrives"-event seems natural to state via the topics and eventDefinition described in connectathon-topic :<br>
{<br>
"resourceType": "Subscription",<br>
"criteria": "Appointment", -- could include filtering of appointments - if subscrieber only wants to hear of specific appointments<br>
"extension": {[<br>
    "url": "<a href="http://hl7.org/fhir/subscription/topics" target="_blank" title="http://hl7.org/fhir/subscription/topics">http://hl7.org/fhir/subscription/topics</a>",<br>
    "valueReference": {<br>
    "reference": "<a href="https://example.com/EventDefinition/123" target="_blank" title="https://example.com/EventDefinition/123">https://example.com/EventDefinition/123</a>",<br>
    "display": "Patient with appointment arrived",<br>
    "channel": {<br>
        "type": "rest-hook",<br>
        "endpoint": "<a href="http://notifyMe.com/patientWithAppointmentArrived" target="_blank" title="http://notifyMe.com/patientWithAppointmentArrived">http://notifyMe.com/patientWithAppointmentArrived</a>",<br>
        "header": "Authorization: Bearer secret-token-abc-123"<br>
    }<br>
}</p>
<p>I would like to stick with a notification without payload, hence the subscriber must subsequently retrieve the data from the server.<br>
This however leaves me with the issue "which GET should be perform by the subscriber"?</p>
<p>One solution: Just do a /Appointment?_lastUpdated=gt&lt;lastQueryTime&gt;<br>
But this will include extra (unwanted) appointments and leaves the understanding of the EventDefinition/123 in terms of an appointment to the subscriber.</p>
<p>Another solution: Support some kind of patientHasArrived search: /Appointment?patientHasArrived=true&amp;_lastUpdated=gt&lt;lastQueryTime&gt;<br>
This seems more desirably (still with some (fewer) unwanted appointments) but introduces a new search criteria and clashes with the description at <a href="https://www.hl7.org/fhir/subscription.html#2.46.6.1" target="_blank" title="https://www.hl7.org/fhir/subscription.html#2.46.6.1">https://www.hl7.org/fhir/subscription.html#2.46.6.1</a>.</p>
<p>Any thoughts on this?</p>



<a name="153914192"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/No%20payload%20and%20using%20topics/near/153914192" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/No.20payload.20and.20using.20topics.html#153914192">(Oct 16 2017 at 21:22)</a>:</h4>
<p>And you are absolutely sure you don't want/cannot include the slightest amount of context data within your payload? Ain't performance an issue for you?</p>



<a name="153914343"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/No%20payload%20and%20using%20topics/near/153914343" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Allan Bro Hansen <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/No.20payload.20and.20using.20topics.html#153914343">(Oct 17 2017 at 06:08)</a>:</h4>
<p>I’m absolutely not sure, in fact I am currently slightly in favor of the payload-solution adding pros and cons.<br>
The no-payload solution seemed initially nice because:<br>
1)  No need to construct and add the payload (obviously)<br>
2)  Leave the security to the REST GET service which already handles it<br>
3)  Simple if the POST cannot be delivery – you do not have to keep track of the each message and deliver all of them when the receiving end is ready<br>
4)  No chronology issues<br>
But the no-payload solution becomes less elegant with topics/filters, and the subscriber of course has to perform a subsequent GET to get data.<br>
Would nice to hear if someone is actually using the no-payload approach.</p>



<a name="153914347"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/No%20payload%20and%20using%20topics/near/153914347" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/No.20payload.20and.20using.20topics.html#153914347">(Oct 17 2017 at 07:18)</a>:</h4>
<p>yes I've seen it used in semi-prototype. It was really simple for low complexity / narrow usage.</p>



<a name="153914348"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/No%20payload%20and%20using%20topics/near/153914348" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/No.20payload.20and.20using.20topics.html#153914348">(Oct 17 2017 at 07:18)</a>:</h4>
<p>as you've found, doesn't scale well in terms of flexibility</p>



<a name="153914592"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/No%20payload%20and%20using%20topics/near/153914592" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/No.20payload.20and.20using.20topics.html#153914592">(Oct 18 2017 at 10:17)</a>:</h4>
<p>Now, reading throguh <a href="https://www.hl7.org/fhir/subscription.html#2.46.6.1" target="_blank" title="https://www.hl7.org/fhir/subscription.html#2.46.6.1">https://www.hl7.org/fhir/subscription.html#2.46.6.1</a> ... I would say that there might be a case missing to support what I think maybe could fit your case:</p>



<a name="153914593"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/No%20payload%20and%20using%20topics/near/153914593" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/No.20payload.20and.20using.20topics.html#153914593">(Oct 18 2017 at 10:20)</a>:</h4>
<p><span class="user-mention" data-user-id="192120">@Allan Bro Hansen</span> an event from the server where the body is not empty nor the full resource, but instead a bundle that contains references to all that has changed. Thereby your client knows where to go specifically and you don't disclose any information unless it is fetched intentionally by your client</p>



<a name="153914594"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/No%20payload%20and%20using%20topics/near/153914594" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/No.20payload.20and.20using.20topics.html#153914594">(Oct 18 2017 at 10:20)</a>:</h4>
<p>using the normal auth mechanisms</p>



<a name="153914595"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/No%20payload%20and%20using%20topics/near/153914595" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/No.20payload.20and.20using.20topics.html#153914595">(Oct 18 2017 at 10:30)</a>:</h4>
<p>that maybe falls within the evendefinition talk ... I can't really figure that out ..</p>



<a name="153914596"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/No%20payload%20and%20using%20topics/near/153914596" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Allan Bro Hansen <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/No.20payload.20and.20using.20topics.html#153914596">(Oct 18 2017 at 10:36)</a>:</h4>
<p>I guess I would be okay to define a criteria with an "_elements" and hereby define a not-full resource.  It still leaves some of the other "with payload" issues (single event messages and chronology). On a side note: I have chosen the "with payload" solution</p>



<a name="153914598"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/No%20payload%20and%20using%20topics/near/153914598" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/No.20payload.20and.20using.20topics.html#153914598">(Oct 18 2017 at 10:42)</a>:</h4>
<p>FYI ... following seems like a bug in the spec. Cardinality on the subscription.channel.payload is 1..1 but the description says it can be left blank</p>



<a name="153914599"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/No%20payload%20and%20using%20topics/near/153914599" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Allan Bro Hansen <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/No.20payload.20and.20using.20topics.html#153914599">(Oct 18 2017 at 10:44)</a>:</h4>
<p>The channel.payload is 0..1 in <a href="https://www.hl7.org/fhir/subscription.html#resource" target="_blank" title="https://www.hl7.org/fhir/subscription.html#resource">https://www.hl7.org/fhir/subscription.html#resource</a></p>



<a name="153914600"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/No%20payload%20and%20using%20topics/near/153914600" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/No.20payload.20and.20using.20topics.html#153914600">(Oct 18 2017 at 10:45)</a>:</h4>
<p>arhhh ... I looked at the DSTU2 ... my bad</p>



<a name="153914601"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/No%20payload%20and%20using%20topics/near/153914601" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/No.20payload.20and.20using.20topics.html#153914601">(Oct 18 2017 at 10:45)</a>:</h4>
<p>two strokes from submitting a ticket on gforge ... whew</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
