---
layout: page
title: "FHIR Chat  · Rest subscription without payload · subscriptions"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/index.html">subscriptions</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Rest.20subscription.20without.20payload.html">Rest subscription without payload</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153928627"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Rest%20subscription%20without%20payload/near/153928627" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Ivanov <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Rest.20subscription.20without.20payload.html#153928627">(Jan 12 2018 at 09:52)</a>:</h4>
<p>We have started to use subscriptions and now we have two questions:<br>
1. Why Fhir allow us to use only POST method on rest-hook channel? It seems legit to use GET if there is no payload. We have some legacy software that only supports GET requests so now we have to use extensions, is there any better way to do it?</p>
<p>{<br>
    "resourceType": "Subscription",<br>
    "criteria": "Patient/123",<br>
    "channel": {<br>
        "extension": {<br>
            [<br>
                "url": "<a href="http://example.com/fhir/subscription/channel/rest-hook/method" target="_blank" title="http://example.com/fhir/subscription/channel/rest-hook/method">http://example.com/fhir/subscription/channel/rest-hook/method</a>",<br>
                "valueString": "GET"<br>
            ]<br>
        },<br>
        "type": "rest-hook",<br>
        "endpoint": "<a href="https://example.com/callback" target="_blank" title="https://example.com/callback">https://example.com/callback</a>"<br>
    }<br>
}</p>
<p>2. Fhir suggests us to make a query to the server after receiving rest-hook, but it would be great to get matching Resource Id in callback (maybe somewhere in Headers). Is it Fhir way?</p>



<a name="153928637"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Rest%20subscription%20without%20payload/near/153928637" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Rest.20subscription.20without.20payload.html#153928637">(Jan 12 2018 at 11:58)</a>:</h4>
<p>I don't think that get is consistent with HTTP semantics. You'll have problems with proxies. So I'm ok with that being something you do with an extension if you have to do it</p>



<a name="153928638"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Rest%20subscription%20without%20payload/near/153928638" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Rest.20subscription.20without.20payload.html#153928638">(Jan 12 2018 at 11:58)</a>:</h4>
<p>at the moment, you can either recieve just the POST, or a POST with a whole resource. We haven't had a request for just the id. Why do you want the id?</p>



<a name="153928689"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Rest%20subscription%20without%20payload/near/153928689" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Isaac Vetter <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Rest.20subscription.20without.20payload.html#153928689">(Jan 12 2018 at 22:48)</a>:</h4>
<p><span class="user-mention" data-user-id="194068">@Alexander Ivanov</span> , for (1), I think that the reason an HTTP POST is required, is because the notification is logically an update.</p>



<a name="153971458"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Rest%20subscription%20without%20payload/near/153971458" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Rest.20subscription.20without.20payload.html#153971458">(Jun 25 2018 at 10:14)</a>:</h4>
<p>.. found it! I am in St Petersburg talking to Alexander about this</p>



<a name="153971459"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Rest%20subscription%20without%20payload/near/153971459" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Rest.20subscription.20without.20payload.html#153971459">(Jun 25 2018 at 10:15)</a>:</h4>
<p><span class="user-mention" data-user-id="191864">@Isaac Vetter</span> Alexander points out that it isn't necessarily an update... but we certainly don't want a cache to respond on this one. <span class="user-mention" data-user-id="194068">@Alexander Ivanov</span> you're going to get back to us about this after more research</p>



<a name="153972055"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Rest%20subscription%20without%20payload/near/153972055" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Ivanov <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Rest.20subscription.20without.20payload.html#153972055">(Jun 27 2018 at 11:30)</a>:</h4>
<p>1. We have several internal proprietary legacy services which only supports GET callbacks, but we had already solved this problem with NGINX. So I think POST is fine as a standart default (because of possible caching of GET). <br>
2. The idea with "Id" in header was about simplified search for resource after notification (only for interaction without payload). For example we can insert header:</p>
<div class="codehilite"><pre><span></span>Location: Patient/c3dc2595-6b61-4b50-8ed7-6e924388f599
</pre></div>


<p>and call for Resource without search, like GET &lt;base_url&gt;/Patient/c3dc2595-6b61-4b50-8ed7-6e924388f599</p>



<a name="153972195"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Rest%20subscription%20without%20payload/near/153972195" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Rest.20subscription.20without.20payload.html#153972195">(Jun 27 2018 at 19:51)</a>:</h4>
<p>hi Alexander . The second is a little bit cryptic - what has that go to do with id in header&gt; and what's the 'without search' bit?</p>



<a name="153972597"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Rest%20subscription%20without%20payload/near/153972597" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Ivanov <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Rest.20subscription.20without.20payload.html#153972597">(Jun 29 2018 at 15:33)</a>:</h4>
<p>2.46.6.1 part of documentation describes the following: When the subscriber receives a POST to <a href="https://biliwatch.com/customers/mount-auburn-miu/on-result" target="_blank" title="https://biliwatch.com/customers/mount-auburn-miu/on-result">https://biliwatch.com/customers/mount-auburn-miu/on-result</a>, it re-issues the criteria as a query to the server, appending &amp;_since=:last (where :last is replaced by the time at which the client last checked). In this way it can fetch all new relevant Observations.</p>
<p>But I’d like to have exact id (path) of updated resource, is there proper way to do it?</p>



<a name="153972639"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Rest%20subscription%20without%20payload/near/153972639" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aleksandr Sorokin <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Rest.20subscription.20without.20payload.html#153972639">(Jun 29 2018 at 18:39)</a>:</h4>
<p>I think <span class="user-mention" data-user-id="194068">@Alexander Ivanov</span> offers a good idea. Fhir server already know an id of updated/created resource. It may be  more convenient for the clients to get resource directly without search</p>



<a name="153972640"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Rest%20subscription%20without%20payload/near/153972640" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aleksandr Sorokin <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Rest.20subscription.20without.20payload.html#153972640">(Jun 29 2018 at 18:56)</a>:</h4>
<p>For example fhir server may not include <em>_since</em> or <em>_lastUpdated</em> search parameter and the client will receive all the resources, not only those that have been updated</p>



<a name="153972642"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Rest%20subscription%20without%20payload/near/153972642" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Rest.20subscription.20without.20payload.html#153972642">(Jun 29 2018 at 19:08)</a>:</h4>
<p>you can specify the whole resource.  do you have a use case for the id and not the resource?</p>



<a name="153972664"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Rest%20subscription%20without%20payload/near/153972664" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Ivanov <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Rest.20subscription.20without.20payload.html#153972664">(Jun 30 2018 at 09:12)</a>:</h4>
<p>In our case, Resource can be updated several times in a short period of time. It is convenient to take only the latest version.</p>
<p>Our product is a broker (dispatcher) of diagnostic requests between clinics and laboratories. Our main subscriptions are subscriptions to ProcedureRequest (ServiceRequest), Task and DiagnosticReport. </p>
<p>And the main problem is DiagnosticReport subscriptions. DiagnosticReport can contain "presentedForm" with base64 encoded resource so it can be large. And also DiagnosticReport can be updated several times in a short period of time because of laboratory uploads some new presentedForms. The clinic could not solve this issue with search criteria because all this DiagnosticReports have the same status "partial". So usually clinic waits for about 10 minutes and aggregates "id" of Resources which was updated and loads them after. </p>
<p>We can use the Profile to restrict using base64 encoded values in Attachments and force them to use links to Binary but it will take time. Anyway, it is not permitted by the standard to use our current approach. </p>
<p>And one more question, what was the initial purpose of using subscriptions without payload, maybe I'm missing some case?</p>



<a name="153972665"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Rest%20subscription%20without%20payload/near/153972665" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Ivanov <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Rest.20subscription.20without.20payload.html#153972665">(Jun 30 2018 at 09:17)</a>:</h4>
<p>Maybe <span class="user-mention" data-user-id="196269">@Aleksandr Sorokin</span> can tell more about the logic behind frequent updates of DiagnosticReport and receiving results by clinic.</p>



<a name="153972676"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Rest%20subscription%20without%20payload/near/153972676" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Rest.20subscription.20without.20payload.html#153972676">(Jun 30 2018 at 12:38)</a>:</h4>
<p>initial purpose was very simple, supporting mobile apps</p>



<a name="153972677"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Rest%20subscription%20without%20payload/near/153972677" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Rest.20subscription.20without.20payload.html#153972677">(Jun 30 2018 at 12:38)</a>:</h4>
<p>you've certainly explained the use case. I'm wondering whether you want just the id, or the version id too?</p>



<a name="153972678"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Rest%20subscription%20without%20payload/near/153972678" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aleksandr Sorokin <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Rest.20subscription.20without.20payload.html#153972678">(Jun 30 2018 at 13:34)</a>:</h4>
<p>I think the version id will be redundant because clients are usually interested in the latest version or may get version history if needed, but <span class="user-mention" data-user-id="194068">@Alexander Ivanov</span>  may have an another opinion</p>



<a name="153972679"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Rest%20subscription%20without%20payload/near/153972679" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Ivanov <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Rest.20subscription.20without.20payload.html#153972679">(Jun 30 2018 at 13:40)</a>:</h4>
<p>None of our clients asked for version, so I think the only "id" field is fine.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
