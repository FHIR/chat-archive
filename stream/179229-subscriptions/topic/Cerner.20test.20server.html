---
layout: page
title: "FHIR Chat  · Cerner test server · subscriptions"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/index.html">subscriptions</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html">Cerner test server</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="209653565"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Cerner%20test%20server/near/209653565" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David deRoode <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html#209653565">(Sep 10 2020 at 14:32)</a>:</h4>
<p><span class="user-mention" data-user-id="301310">@Avery Allen</span> What's the base address for this server?</p>



<a name="209655855"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Cerner%20test%20server/near/209655855" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Avery Allen <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html#209655855">(Sep 10 2020 at 14:42)</a>:</h4>
<p>For R4: <a href="https://fhir-open.stagingcerner.com/beta/r4/dacc6494-e336-45ad-8729-b789ff8663c6/">https://fhir-open.stagingcerner.com/beta/r4/dacc6494-e336-45ad-8729-b789ff8663c6/</a></p>
<p>For R5: <a href="https://fhir-open.stagingcerner.com/beta/dacc6494-e336-45ad-8729-b789ff8663c6/">https://fhir-open.stagingcerner.com/beta/dacc6494-e336-45ad-8729-b789ff8663c6/</a></p>



<a name="209655901"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Cerner%20test%20server/near/209655901" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David deRoode <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html#209655901">(Sep 10 2020 at 14:43)</a>:</h4>
<p>Thanks</p>



<a name="209656587"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Cerner%20test%20server/near/209656587" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Avery Allen <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html#209656587">(Sep 10 2020 at 14:46)</a>:</h4>
<p>You can see the supported topics by making a GET to</p>
<p>(R5) <a href="https://fhir-open.stagingcerner.com/beta/dacc6494-e336-45ad-8729-b789ff8663c6/SubscriptionTopic">https://fhir-open.stagingcerner.com/beta/dacc6494-e336-45ad-8729-b789ff8663c6/SubscriptionTopic</a><br>
(R4) <a href="https://fhir-open.stagingcerner.com/beta/r4/dacc6494-e336-45ad-8729-b789ff8663c6/Subscription/$topic-list">https://fhir-open.stagingcerner.com/beta/r4/dacc6494-e336-45ad-8729-b789ff8663c6/Subscription/$topic-list</a></p>



<a name="209662130"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Cerner%20test%20server/near/209662130" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David deRoode <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html#209662130">(Sep 10 2020 at 15:18)</a>:</h4>
<p>Getting a 403 Forbidden when GETting both from r4 and r5. Anything beyond Accept application/fhir+json?</p>



<a name="209663212"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Cerner%20test%20server/near/209663212" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Avery Allen <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html#209663212">(Sep 10 2020 at 15:24)</a>:</h4>
<p>I don't think there should be.  Can you provide the X-Request-Id from the response headers?  I can take a look in the logs to see what's going on.</p>



<a name="209663310"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Cerner%20test%20server/near/209663310" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David deRoode <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html#209663310">(Sep 10 2020 at 15:25)</a>:</h4>
<p>CovbadAFkf41B_0jNYpnKDpnLwQYByRmZ0TMy9zUhGrrrttcQoYEPQ==</p>



<a name="209664919"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Cerner%20test%20server/near/209664919" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Avery Allen <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html#209664919">(Sep 10 2020 at 15:35)</a>:</h4>
<p>If you've got it handy, can you post the request URL?</p>



<a name="209665082"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Cerner%20test%20server/near/209665082" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David deRoode <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html#209665082">(Sep 10 2020 at 15:36)</a>:</h4>
<p>I think it was this one: <a href="https://fhir-open.stagingcerner.com/beta/dacc6494-e336-45ad-8729-b789ff8663c6/Subscription/d6340e59-1ec9-4b12-8979-eaba2def73da">https://fhir-open.stagingcerner.com/beta/dacc6494-e336-45ad-8729-b789ff8663c6/Subscription/d6340e59-1ec9-4b12-8979-eaba2def73da</a></p>



<a name="209665651"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Cerner%20test%20server/near/209665651" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David deRoode <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html#209665651">(Sep 10 2020 at 15:40)</a>:</h4>
<p>I've tried quite a few GETs and POSTs (using Postman) over the hour, following what I thought was exemplified in Git, but no luck...always this error</p>



<a name="209666233"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Cerner%20test%20server/near/209666233" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Avery Allen <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html#209666233">(Sep 10 2020 at 15:44)</a>:</h4>
<p>So the subscription id above points to an R4 subscription.  I'm able to get back a subscription with:</p>
<div class="codehilite"><pre><span></span><code>curl --location --request GET &#39;https://fhir-open.stagingcerner.com/beta/r4/dacc6494-e336-45ad-8729-b789ff8663c6/Subscription/d6340e59-1ec9-4b12-8979-eaba2def73da&#39; \
--header &#39;Accept: application/json&#39;
</code></pre></div>



<a name="209666321"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Cerner%20test%20server/near/209666321" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Avery Allen <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html#209666321">(Sep 10 2020 at 15:45)</a>:</h4>
<p>Right now the R4/R5 Subscriptions are separated so if you create a subscription via R4 then it must be retrieved through R4.</p>



<a name="209666805"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Cerner%20test%20server/near/209666805" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Avery Allen <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html#209666805">(Sep 10 2020 at 15:48)</a>:</h4>
<p>Looks like there have been a couple of R5 Subscriptions created.  You can see all the R5 Subscriptions via search:</p>
<div class="codehilite"><pre><span></span><code>curl --location --request GET &#39;https://fhir-open.stagingcerner.com/beta/dacc6494-e336-45ad-8729-b789ff8663c6/Subscription&#39; \
--header &#39;Accept: application/json&#39;
</code></pre></div>


<p>Search support is currently R5 only.</p>



<a name="209667380"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Cerner%20test%20server/near/209667380" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David deRoode <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html#209667380">(Sep 10 2020 at 15:52)</a>:</h4>
<p>Ahh ok, that clarifies it. Thanks. For R5 though, should't GET from "<a href="https://fhir-open.stagingcerner.com/beta/dacc6494-e336-45ad-8729-b789ff8663c6/SubscriptionTopic">https://fhir-open.stagingcerner.com/beta/dacc6494-e336-45ad-8729-b789ff8663c6/SubscriptionTopic</a>" return a list of all SubscriptionTopics that I am allowed to subscribe to?</p>



<a name="209667415"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Cerner%20test%20server/near/209667415" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David deRoode <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html#209667415">(Sep 10 2020 at 15:52)</a>:</h4>
<p>Request ID: W9bvC8SoBjQeRPihA_wTbEIpwuqik2jWTNGK0kLbXpZ7ct2Nr-b25Q==</p>



<a name="209668075"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Cerner%20test%20server/near/209668075" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Avery Allen <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html#209668075">(Sep 10 2020 at 15:56)</a>:</h4>
<p>Yeah, it should.  Is that where you're seeing the 403?  For me,</p>
<div class="codehilite"><pre><span></span><code>curl --location --request GET &#39;https://fhir-open.stagingcerner.com/beta/dacc6494-e336-45ad-8729-b789ff8663c6/SubscriptionTopic&#39; \
--header &#39;Accept: application/json&#39;
</code></pre></div>


<p>Returns the response:</p>
<div class="codehilite"><pre><span></span><code>{
    &quot;resourceType&quot;: &quot;Bundle&quot;,
    &quot;id&quot;: &quot;d4ba92f4-f736-4e76-8374-9b6a36af7346&quot;,
    &quot;type&quot;: &quot;searchset&quot;,
    &quot;total&quot;: 2,
    &quot;link&quot;: [
        {
            &quot;relation&quot;: &quot;self&quot;,
            &quot;url&quot;: &quot;https://fhir-open.stagingcerner.com/beta/dacc6494-e336-45ad-8729-b789ff8663c6/SubscriptionTopic?&quot;
        }
    ],
    &quot;entry&quot;: [
        {
            &quot;fullUrl&quot;: &quot;https://fhir-open.stagingcerner.com/beta/dacc6494-e336-45ad-8729-b789ff8663c6/SubscriptionTopic/admission&quot;,
            &quot;resource&quot;: {
                &quot;resourceType&quot;: &quot;SubscriptionTopic&quot;,
                &quot;id&quot;: &quot;admission&quot;,
                &quot;meta&quot;: {
                    &quot;versionId&quot;: &quot;1&quot;,
                    &quot;lastUpdated&quot;: &quot;2020-02-02T00:00:00.000Z&quot;
                },
                &quot;url&quot;: &quot;http://argonautproject.org/subscription-ig/SubscriptionTopic/admission&quot;,
                &quot;version&quot;: &quot;0.4&quot;,
                &quot;title&quot;: &quot;admission&quot;,
                &quot;status&quot;: &quot;draft&quot;,
                &quot;experimental&quot;: true,
                &quot;date&quot;: &quot;2019-09-05&quot;,
                &quot;description&quot;: &quot;Admission Topic for testing framework and behavior&quot;,
                &quot;resourceTrigger&quot;: {
                    &quot;description&quot;: &quot;Beginning of a clinical encounter&quot;,
                    &quot;resourceType&quot;: [
                        &quot;Encounter&quot;
                    ],
                    &quot;queryCriteria&quot;: {
                        &quot;previous&quot;: &quot;status:not=in-progress&quot;,
                        &quot;current&quot;: &quot;status:in-progress&quot;,
                        &quot;requireBoth&quot;: true
                    }
                },
                &quot;canFilterBy&quot;: [
                    {
                        &quot;searchParamName&quot;: &quot;patient&quot;,
                        &quot;searchModifier&quot;: [
                            &quot;=&quot;,
                            &quot;in&quot;
                        ],
                        &quot;documentation&quot;: &quot;Exact match to a patient resource (reference)&quot;
                    }
                ]
            }
        },
        {
            &quot;fullUrl&quot;: &quot;https://fhir-open.stagingcerner.com/beta/dacc6494-e336-45ad-8729-b789ff8663c6/SubscriptionTopic/labs&quot;,
            &quot;resource&quot;: {
                &quot;resourceType&quot;: &quot;SubscriptionTopic&quot;,
                &quot;id&quot;: &quot;labs&quot;,
                &quot;meta&quot;: {
                    &quot;versionId&quot;: &quot;1&quot;,
                    &quot;lastUpdated&quot;: &quot;2020-02-02T00:00:00.000Z&quot;
                },
                &quot;url&quot;: &quot;http://fhir.cerner.com/SubscriptionTopic/labs&quot;,
                &quot;version&quot;: &quot;0.4&quot;,
                &quot;title&quot;: &quot;admission&quot;,
                &quot;status&quot;: &quot;draft&quot;,
                &quot;experimental&quot;: true,
                &quot;date&quot;: &quot;2019-09-05&quot;,
                &quot;description&quot;: &quot;Laboratory Observations topic for testing&quot;,
                &quot;resourceTrigger&quot;: {
                    &quot;description&quot;: &quot;New and updated patient laboratory observations&quot;,
                    &quot;resourceType&quot;: [
                        &quot;Observation&quot;
                    ],
                    &quot;methodCriteria&quot;: [
                        &quot;create&quot;,
                        &quot;update&quot;
                    ],
                    &quot;queryCriteria&quot;: {
                        &quot;previous&quot;: &quot;category:laboratory&quot;,
                        &quot;current&quot;: &quot;category:laboratory&quot;,
                        &quot;requireBoth&quot;: false
                    }
                },
                &quot;canFilterBy&quot;: [
                    {
                        &quot;searchParamName&quot;: &quot;patient&quot;,
                        &quot;searchModifier&quot;: [
                            &quot;=&quot;,
                            &quot;in&quot;
                        ],
                        &quot;documentation&quot;: &quot;Exact match to a patient resource (reference)&quot;
                    }
                ]
            }
        }
    ]
}
</code></pre></div>



<a name="209668488"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Cerner%20test%20server/near/209668488" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David deRoode <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html#209668488">(Sep 10 2020 at 15:59)</a>:</h4>
<p>Yes (this feels like a permissions thing); for me, <a href="/user_uploads/10155/nJf3N528htuOVToLRH559ivc/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/10155/nJf3N528htuOVToLRH559ivc/image.png" title="image.png"><img src="/user_uploads/10155/nJf3N528htuOVToLRH559ivc/image.png"></a></div>



<a name="209668879"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Cerner%20test%20server/near/209668879" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Avery Allen <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html#209668879">(Sep 10 2020 at 16:01)</a>:</h4>
<p>Yeah, agreed.  Looking into this.  Is the issue specific to SubscriptionTopic or are you seeing the same thing for Subscription as well?</p>



<a name="209669102"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Cerner%20test%20server/near/209669102" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David deRoode <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html#209669102">(Sep 10 2020 at 16:02)</a>:</h4>
<p>Same for Subscription as well</p>



<a name="209669591"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Cerner%20test%20server/near/209669591" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Avery Allen <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html#209669591">(Sep 10 2020 at 16:06)</a>:</h4>
<p>Are you sending a body with the GET request?  I think that may be the issue. I'm able to recreate something similar to your postman screenshot if I provide a body.</p>



<a name="209670184"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Cerner%20test%20server/near/209670184" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David deRoode <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html#209670184">(Sep 10 2020 at 16:10)</a>:</h4>
<p>Bingo. I assumed GET bodies were ignored, but returning a bundle now. Thanks for your help</p>



<a name="209670414"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Cerner%20test%20server/near/209670414" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Avery Allen <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html#209670414">(Sep 10 2020 at 16:12)</a>:</h4>
<p>No prob.  Sorry for the extremely unhelpful error page <span aria-label="grinning face with smiling eyes" class="emoji emoji-1f601" role="img" title="grinning face with smiling eyes">:grinning_face_with_smiling_eyes:</span></p>



<a name="209681466"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Cerner%20test%20server/near/209681466" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Spencer LaGesse <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html#209681466">(Sep 10 2020 at 17:33)</a>:</h4>
<p><span class="user-mention" data-user-id="301310">@Avery Allen</span>  Trying to post a subscription to <a href="https://fhir-open.stagingcerner.com/beta/r4/dacc6494-e336-45ad-8729-b789ff8663c6/Subscription">https://fhir-open.stagingcerner.com/beta/r4/dacc6494-e336-45ad-8729-b789ff8663c6/Subscription</a> and getting the following error back:  "Expected to include: <a href="http://hl7.org/fhir/us/subscriptions-backport/StructureDefinition/backport-topic-canonical">http://hl7.org/fhir/us/subscriptions-backport/StructureDefinition/backport-topic-canonical</a>"</p>
<p>I think it should be looking for "<a href="http://hl7.org/fhir/**uv**/subscriptions-backport/StructureDefinition/backport-topic-canonical">http://hl7.org/fhir/**uv**/subscriptions-backport/StructureDefinition/backport-topic-canonical</a>"</p>



<a name="209682184"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Cerner%20test%20server/near/209682184" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Avery Allen <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html#209682184">(Sep 10 2020 at 17:39)</a>:</h4>
<p>Yep, I believe you're correct:</p>
<p><a href="http://build.fhir.org/ig/HL7/fhir-subscription-backport-ig/StructureDefinition-backport-topic-canonical.html">http://build.fhir.org/ig/HL7/fhir-subscription-backport-ig/StructureDefinition-backport-topic-canonical.html</a></p>
<p>I'll get together a fix and push it out.</p>



<a name="209682485"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Cerner%20test%20server/near/209682485" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Avery Allen <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html#209682485">(Sep 10 2020 at 17:41)</a>:</h4>
<p><span class="user-mention" data-user-id="222054">@Gino Canessa</span> , I think the argo test client needs an update too.  It's sending the extension in the POST body as:</p>
<div class="codehilite"><pre><span></span><code>&quot;extension&quot;: [
    {
      &quot;url&quot;: &quot;http://hl7.org/fhir/us/subscriptions-backport/StructureDefinition/backport-topic-canonical&quot;,
      &quot;valueCanonical&quot;: &quot;http://argonautproject.org/subscription-ig/SubscriptionTopic/admission&quot;
    }
  ]
</code></pre></div>



<a name="209683136"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Cerner%20test%20server/near/209683136" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Avery Allen <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html#209683136">(Sep 10 2020 at 17:46)</a>:</h4>
<p>Actually, I see /us/ being used throughout the POST body:</p>
<div class="codehilite"><pre><span></span><code>{
  &quot;resourceType&quot;: &quot;Subscription&quot;,
  &quot;end&quot;: &quot;2020-09-10T18:36:23.391Z&quot;,
  &quot;reason&quot;: &quot;Client Testing&quot;,
  &quot;channel&quot;: {
    &quot;endpoint&quot;: &quot;https://client.subscriptions.argo.run/Endpoints/0860ace4-a750-45d5-a615-91f37c9f94f9&quot;,
    &quot;payload&quot;: &quot;application/fhir+json&quot;,
    &quot;_payload&quot;: {
      &quot;extension&quot;: [
        {
          &quot;url&quot;: &quot;http://hl7.org/fhir/us/subscriptions-backport/StructureDefinition/backport-payload-content&quot;,
          &quot;valueCode&quot;: &quot;id-only&quot;
        }
      ]
    },
    &quot;type&quot;: &quot;rest-hook&quot;,
    &quot;extension&quot;: [
      {
        &quot;url&quot;: &quot;http://hl7.org/fhir/us/subscriptions-backport/StructureDefinition/backport-heartbeat-period&quot;,
        &quot;valueUnsignedInt&quot;: 60
      }
    ]
  },
  &quot;status&quot;: &quot;requested&quot;,
  &quot;criteria&quot;: &quot;Encounter?patient=1316024&quot;,
  &quot;extension&quot;: [
    {
      &quot;url&quot;: &quot;http://hl7.org/fhir/us/subscriptions-backport/StructureDefinition/backport-topic-canonical&quot;,
      &quot;valueCanonical&quot;: &quot;http://argonautproject.org/subscription-ig/SubscriptionTopic/admission&quot;
    }
  ]
}
</code></pre></div>


<p>Based on the IG I think these all need to be updated</p>



<a name="209683491"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Cerner%20test%20server/near/209683491" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html#209683491">(Sep 10 2020 at 17:49)</a>:</h4>
<p>The canonicals don't have to resolve, and I think this was a publishing error</p>



<a name="209683522"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Cerner%20test%20server/near/209683522" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html#209683522">(Sep 10 2020 at 17:49)</a>:</h4>
<p>the "source of truth" for what they are should be in the IG</p>



<a name="209683604"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Cerner%20test%20server/near/209683604" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gino Canessa <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html#209683604">(Sep 10 2020 at 17:50)</a>:</h4>
<p>Yep, thanks for the catch - forgot to update the implementation when it changed.  I've pushed the client and realized I need to update the server too, so it make act funny until that gets updated too.</p>



<a name="209683626"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Cerner%20test%20server/near/209683626" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html#209683626">(Sep 10 2020 at 17:50)</a>:</h4>
<p>So, what is UV?</p>



<a name="209683643"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Cerner%20test%20server/near/209683643" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html#209683643">(Sep 10 2020 at 17:50)</a>:</h4>
<p>(b/c Jira also hates this)</p>



<a name="209683870"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Cerner%20test%20server/near/209683870" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David deRoode <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html#209683870">(Sep 10 2020 at 17:52)</a>:</h4>
<p>Universal realm?</p>



<a name="209684172"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Cerner%20test%20server/near/209684172" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gino Canessa <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html#209684172">(Sep 10 2020 at 17:54)</a>:</h4>
<p>UV <em>is</em> universal realm.  Originally had US (argonaut habit) but realized this isn't US-limited.</p>



<a name="209684180"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Cerner%20test%20server/near/209684180" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David deRoode <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html#209684180">(Sep 10 2020 at 17:54)</a>:</h4>
<p><span class="user-mention" data-user-id="301310">@Avery Allen</span> The backport-payload-content profile should support all three payload content types,  but I'm getting an error from the r4 cerner server when trying to create a new subscription with a valueCode=full-resource on this extension: ""Expected value to be one of: empty, id-only""</p>



<a name="209684247"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Cerner%20test%20server/near/209684247" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gino Canessa <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html#209684247">(Sep 10 2020 at 17:55)</a>:</h4>
<p>The backport defines all the content types, it does not mandate that they are all supported.</p>



<a name="209684258"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Cerner%20test%20server/near/209684258" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Avery Allen <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html#209684258">(Sep 10 2020 at 17:55)</a>:</h4>
<p>Yeah, our test implementation only supports empty and id-only</p>



<a name="209684636"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Cerner%20test%20server/near/209684636" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David deRoode <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html#209684636">(Sep 10 2020 at 17:57)</a>:</h4>
<p>Got it- I'm guessing a similar rationale for the error on criteria (ie Cerner test implmentation only supports criteria within a patient-specific Encounter context)?</p>



<a name="209684810"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Cerner%20test%20server/near/209684810" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html#209684810">(Sep 10 2020 at 17:58)</a>:</h4>
<p>sending full alerts actually has some security considerations</p>



<a name="209684846"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Cerner%20test%20server/near/209684846" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html#209684846">(Sep 10 2020 at 17:59)</a>:</h4>
<p>(in a real world server)</p>



<a name="209685246"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Cerner%20test%20server/near/209685246" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Avery Allen <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html#209685246">(Sep 10 2020 at 18:01)</a>:</h4>
<p>Yeah, there's a pretty limited subset of the overall functionality we have working.  </p>
<p>Also as an aside, the error response you're getting back is probably a 400.  If we had true support for Subscription, these would likely be 422s instead since what you're asking the server to do is supported by the spec, just not by us.</p>



<a name="209685432"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Cerner%20test%20server/near/209685432" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Avery Allen <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html#209685432">(Sep 10 2020 at 18:02)</a>:</h4>
<p>The patient specific Encounter context limitation ties in with the messages used to trigger notifications.</p>



<a name="209685541"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Cerner%20test%20server/near/209685541" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David deRoode <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html#209685541">(Sep 10 2020 at 18:03)</a>:</h4>
<p>Read my mind. Thanks for confirming</p>



<a name="209686530"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Cerner%20test%20server/near/209686530" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gino Canessa <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html#209686530">(Sep 10 2020 at 18:10)</a>:</h4>
<p>Alright, client and server should both be updated to use UV realm now - please let me know if you run into anything else!</p>



<a name="209687214"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Cerner%20test%20server/near/209687214" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ted Peck <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html#209687214">(Sep 10 2020 at 18:15)</a>:</h4>
<p>I'll be trying to submit an R5 subscription in a little while, I assume these <em>uv</em> updates apply for the R5 server also?</p>



<a name="209687647"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Cerner%20test%20server/near/209687647" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Avery Allen <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html#209687647">(Sep 10 2020 at 18:18)</a>:</h4>
<p>The extensions are just used as part of the R4 Backport, so you shouldn't need to worry about them with R5</p>



<a name="209687918"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Cerner%20test%20server/near/209687918" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Spencer LaGesse <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html#209687918">(Sep 10 2020 at 18:20)</a>:</h4>
<p><span class="user-mention" data-user-id="222054">@Gino Canessa</span>  I'm getting "Invalid subscription" when trying to post an R4 backport subscription to <a href="https://server.subscriptions.argo.run/Subscription">https://server.subscriptions.argo.run/Subscription</a>. Can you help identify what is wrong there?</p>



<a name="209688295"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Cerner%20test%20server/near/209688295" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gino Canessa <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html#209688295">(Sep 10 2020 at 18:23)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="224405">@Spencer LaGesse</span> , someone pointed out the server had been using the old 'us' realm instead of the current 'uv' realm.  The server right now is showing <code>R4 Subscription requires Extension: http://hl7.org/fhir/uv/subscriptions-backport/StructureDefinition/backport-topic-canonical</code>, so I'm guessing that the client is posting with US realm.<br>
If you are using the reference client, it was updated a little while ago so probably needs a refresh (control-refresh is advised to make sure it doesn't reload from cache).</p>



<a name="209688772"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Cerner%20test%20server/near/209688772" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ted Peck <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html#209688772">(Sep 10 2020 at 18:26)</a>:</h4>
<p>OK now I see that since the R5 server doesn't need an extension, probably uv does not apply. I don't find any /us/ in the sample payload.</p>



<a name="209688893"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Cerner%20test%20server/near/209688893" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Spencer LaGesse <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html#209688893">(Sep 10 2020 at 18:27)</a>:</h4>
<p>I'm using my own client, which is posting to the 'uv' realm.</p>



<a name="209689319"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Cerner%20test%20server/near/209689319" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ted Peck <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html#209689319">(Sep 10 2020 at 18:30)</a>:</h4>
<p>Is there a way I can insert Basic Auth credentials in the Authorization field of my Subscription request?</p>



<a name="209689694"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Cerner%20test%20server/near/209689694" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Avery Allen <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html#209689694">(Sep 10 2020 at 18:33)</a>:</h4>
<p>You should be able to use the "header" field</p>



<a name="209689776"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Cerner%20test%20server/near/209689776" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Avery Allen <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html#209689776">(Sep 10 2020 at 18:34)</a>:</h4>
<p><a href="https://build.fhir.org/subscription-definitions.html#Subscription.header">https://build.fhir.org/subscription-definitions.html#Subscription.header</a></p>



<a name="209689957"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Cerner%20test%20server/near/209689957" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gino Canessa <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html#209689957">(Sep 10 2020 at 18:35)</a>:</h4>
<p>Spencer: the R4 subscription requires several extensions.  The test client shows all of them in-context:</p>
<div class="codehilite"><pre><span></span><code><span class="p">{</span>
  <span class="nt">&quot;resourceType&quot;</span><span class="p">:</span> <span class="s2">&quot;Subscription&quot;</span><span class="p">,</span>
  <span class="nt">&quot;end&quot;</span><span class="p">:</span> <span class="s2">&quot;2020-09-10T19:33:31.651Z&quot;</span><span class="p">,</span>
  <span class="nt">&quot;reason&quot;</span><span class="p">:</span> <span class="s2">&quot;Client Testing&quot;</span><span class="p">,</span>
  <span class="nt">&quot;channel&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;endpoint&quot;</span><span class="p">:</span> <span class="s2">&quot;https://client.subscriptions.argo.run/Endpoints/5f849307-5fd9-4e3e-a8fa-ebbc859e78a5&quot;</span><span class="p">,</span>
    <span class="nt">&quot;payload&quot;</span><span class="p">:</span> <span class="s2">&quot;application/fhir+json&quot;</span><span class="p">,</span>
    <span class="nt">&quot;_payload&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;extension&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
          <span class="nt">&quot;url&quot;</span><span class="p">:</span> <span class="s2">&quot;http://hl7.org/fhir/uv/subscriptions-backport/StructureDefinition/backport-payload-content&quot;</span><span class="p">,</span>
          <span class="nt">&quot;valueCode&quot;</span><span class="p">:</span> <span class="s2">&quot;id-only&quot;</span>
        <span class="p">}</span>
      <span class="p">]</span>
    <span class="p">},</span>
    <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;rest-hook&quot;</span><span class="p">,</span>
    <span class="nt">&quot;extension&quot;</span><span class="p">:</span> <span class="p">[</span>
      <span class="p">{</span>
        <span class="nt">&quot;url&quot;</span><span class="p">:</span> <span class="s2">&quot;http://hl7.org/fhir/uv/subscriptions-backport/StructureDefinition/backport-heartbeat-period&quot;</span><span class="p">,</span>
        <span class="nt">&quot;valueUnsignedInt&quot;</span><span class="p">:</span> <span class="mi">60</span>
      <span class="p">}</span>
    <span class="p">]</span>
  <span class="p">},</span>
  <span class="nt">&quot;status&quot;</span><span class="p">:</span> <span class="s2">&quot;requested&quot;</span><span class="p">,</span>
  <span class="nt">&quot;criteria&quot;</span><span class="p">:</span> <span class="s2">&quot;Encounter?patient=Patient/39917&quot;</span><span class="p">,</span>
  <span class="nt">&quot;extension&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nt">&quot;url&quot;</span><span class="p">:</span> <span class="s2">&quot;http://hl7.org/fhir/uv/subscriptions-backport/StructureDefinition/backport-topic-canonical&quot;</span><span class="p">,</span>
      <span class="nt">&quot;valueCanonical&quot;</span><span class="p">:</span> <span class="s2">&quot;http://argonautproject.org/encounters-ig/SubscriptionTopic/encounter-start&quot;</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
</code></pre></div>


<p>Do you have an example that is being rejected?</p>



<a name="209690195"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Cerner%20test%20server/near/209690195" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Avery Allen <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html#209690195">(Sep 10 2020 at 18:37)</a>:</h4>
<p><span class="user-mention" data-user-id="340905">@Ted Peck</span> </p>
<p>The expected syntax for headers w/ the Cerner test server is ""&lt;header-name&gt;: &lt;header-value&gt;"</p>
<p>You can check out this section for an example: <a href="https://github.com/averyallen/wgm_notes/blob/sept_2020/subscriptions/r5.md#create">https://github.com/averyallen/wgm_notes/blob/sept_2020/subscriptions/r5.md#create</a></p>



<a name="209690766"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Cerner%20test%20server/near/209690766" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David deRoode <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html#209690766">(Sep 10 2020 at 18:41)</a>:</h4>
<p>Is <a href="https://fhir-open.stagingcerner.com/beta/dacc6494-e336-45ad-8729-b789ff8663c6/Subscription">https://fhir-open.stagingcerner.com/beta/dacc6494-e336-45ad-8729-b789ff8663c6/Subscription</a> up? I'm getting a 504 TimeOut</p>



<a name="209691281"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Cerner%20test%20server/near/209691281" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Avery Allen <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html#209691281">(Sep 10 2020 at 18:45)</a>:</h4>
<p>Still having issues <span class="user-mention" data-user-id="197608">@David deRoode</span> ?  I think that was temporary downtime while a new build was being deployed</p>



<a name="209691371"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Cerner%20test%20server/near/209691371" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David deRoode <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html#209691371">(Sep 10 2020 at 18:46)</a>:</h4>
<p>Now getting a 502 Bad Gateway</p>



<a name="209691667"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Cerner%20test%20server/near/209691667" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Spencer LaGesse <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html#209691667">(Sep 10 2020 at 18:48)</a>:</h4>
<div class="codehilite"><pre><span></span><code>{
    &quot;resourceType&quot;: &quot;Subscription&quot;,
    &quot;extension&quot;: [
        {
            &quot;url&quot;: &quot;http://hl7.org/fhir/uv/subscriptions-backport/StructureDefinition/backport-topic-canonical&quot;,
            &quot;valueUri&quot;: &quot;http://argonautproject.org/subscription-ig/SubscriptionTopic/admission&quot;
        }
    ],
    &quot;status&quot;: &quot;requested&quot;,
    &quot;reason&quot;: &quot;Test subscription&quot;,
    &quot;criteria&quot;: &quot;Encounter?patient=Patient/1316024&quot;,
    &quot;channel&quot;: {
        &quot;type&quot;: &quot;rest-hook&quot;,
        &quot;endpoint&quot;: &quot;https://connectathon.epic.com/Interconnect-Fhir-Unsecure/api/FHIR/R4/NotificationReceiver&quot;,
        &quot;payload&quot;: &quot;application/fhir+json&quot;,
        &quot;_payload&quot;: {
            &quot;extension&quot;: [
                {
                    &quot;url&quot;: &quot;http://hl7.org/fhir/uv/subscriptions-backport/StructureDefinition/backport-payload-content&quot;,
                    &quot;valueCode&quot;: &quot;id-only&quot;
                }
            ]
        },
        &quot;header&quot;: [
            &quot;Epic-Client-ID:  151ba7cb-ad9e-4361-92a0-21669aee0c65&quot;
        ]
    }
}
</code></pre></div>


<p>I think all of the parts in yours but not mine are optional?</p>



<a name="209692121"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Cerner%20test%20server/near/209692121" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Avery Allen <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html#209692121">(Sep 10 2020 at 18:52)</a>:</h4>
<p><span class="user-mention silent" data-user-id="197608">David deRoode</span> <a href="#narrow/stream/179229-subscriptions/topic/Cerner.20test.20server/near/209691371">said</a>:</p>
<blockquote>
<p>Now getting a 502 Bad Gateway</p>
</blockquote>
<p>Looking into this now.  Looks like some deployment pipeline changes were pulled in with the latest build that's causing issues for other tracks as well.</p>



<a name="209692398"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Cerner%20test%20server/near/209692398" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gino Canessa <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html#209692398">(Sep 10 2020 at 18:54)</a>:</h4>
<p>I see the issue - you have <code>valueUri</code> instead of <code>valueCanonical</code> that the server is expecting - the IG currently lists <code>valueUri</code> (so you are correct), but I believe (from earlier discussions) that it should be canonical now..  I'll need to change the server or the spec: <span class="user-mention" data-user-id="191356">@Jenni Syed</span> <span class="user-mention" data-user-id="191316">@Grahame Grieve</span>  - thoughts?</p>



<a name="209693097"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Cerner%20test%20server/near/209693097" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Spencer LaGesse <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html#209693097">(Sep 10 2020 at 18:58)</a>:</h4>
<p>Ah, okay. I was about to ask about that because Cerner's server is also giving me an error for that.</p>



<a name="209697401"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Cerner%20test%20server/near/209697401" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ted Peck <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html#209697401">(Sep 10 2020 at 19:30)</a>:</h4>
<p>Trying to  POST an R5 subscription I got a 504:<br>
<em>CloudFront attempted to establish a connection with the origin, but either the attempt failed or the origin closed the connection.</em><br>
<a href="https://fhir-open.stagingcerner.com/beta/dacc6494-e336-45ad-8729-b789ff8663c6/Subscription">https://fhir-open.stagingcerner.com/beta/dacc6494-e336-45ad-8729-b789ff8663c6/Subscription</a></p>
<p>Also got 504 from GET at the same address which worked for me earlier, so I guess the server is down now somehow?</p>



<a name="209697955"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Cerner%20test%20server/near/209697955" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Avery Allen <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html#209697955">(Sep 10 2020 at 19:34)</a>:</h4>
<p><span class="user-mention" data-user-id="340905">@Ted Peck</span> </p>
<p>Yeah, there were changes pushed out that aren't related to subscription, but are causing the downtime.  I'll update when the fix is pushed out; we are getting pretty close.</p>



<a name="209698372"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Cerner%20test%20server/near/209698372" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html#209698372">(Sep 10 2020 at 19:37)</a>:</h4>
<blockquote>
<p>but I believe (from earlier discussions) that it should be canonical now</p>
</blockquote>
<p>well, the IG says uri so I was going to stick to uri for the duration of the connecatathon</p>



<a name="209698479"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Cerner%20test%20server/near/209698479" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gino Canessa <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html#209698479">(Sep 10 2020 at 19:38)</a>:</h4>
<p>Yeah - I'll update the reference implementation (sorry in advance to everyone for the breaking change)</p>



<a name="209698590"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Cerner%20test%20server/near/209698590" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Avery Allen <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html#209698590">(Sep 10 2020 at 19:39)</a>:</h4>
<p>I'll also update what the our server expects as well.</p>



<a name="209699792"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Cerner%20test%20server/near/209699792" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gino Canessa <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html#209699792">(Sep 10 2020 at 19:47)</a>:</h4>
<p>As a note, the backport $topic-list operation uses canonical - so it's most likely that I simply missed the one extension and updated everything else (so make sure to leave the old code there too =).</p>



<a name="209699954"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Cerner%20test%20server/near/209699954" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cary <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html#209699954">(Sep 10 2020 at 19:48)</a>:</h4>
<p>Sorry, so is it canonical or is it uri?</p>



<a name="209699977"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Cerner%20test%20server/near/209699977" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cary <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html#209699977">(Sep 10 2020 at 19:49)</a>:</h4>
<p>like if I make a request right now</p>



<a name="209700052"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Cerner%20test%20server/near/209700052" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cary <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html#209700052">(Sep 10 2020 at 19:49)</a>:</h4>
<p>to the R4 backport endpoint</p>



<a name="209700576"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Cerner%20test%20server/near/209700576" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gino Canessa <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html#209700576">(Sep 10 2020 at 19:53)</a>:</h4>
<p>It's pushing the change to URI right now.  It will take a couple of minutes to build and deploy.</p>



<a name="209701285"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Cerner%20test%20server/near/209701285" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ted Peck <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html#209701285">(Sep 10 2020 at 19:58)</a>:</h4>
<p>OK so I was wrong, GET is working but POST is getting a 504.  I'm not sure if GET was also getting 504 before because I didn't actually do it even though I thought I did.</p>



<a name="209704100"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Cerner%20test%20server/near/209704100" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ted Peck <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html#209704100">(Sep 10 2020 at 20:22)</a>:</h4>
<p>Based on the GET results, it appears my three subscription POSTs were recorded even though I got 504 responses. But they all still have status "requested" not "active" and they are otherwise identical except for the IDs and timestamps.</p>



<a name="209704419"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Cerner%20test%20server/near/209704419" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Avery Allen <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html#209704419">(Sep 10 2020 at 20:25)</a>:</h4>
<p>I believe it's still the same issue that was mentioned above.  There's a fix that's in the process of being deployed.</p>



<a name="209704680"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Cerner%20test%20server/near/209704680" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ted Peck <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html#209704680">(Sep 10 2020 at 20:27)</a>:</h4>
<p>OK but also I think I put in "end" timestamps that have already passed</p>



<a name="209704791"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Cerner%20test%20server/near/209704791" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ted Peck <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html#209704791">(Sep 10 2020 at 20:28)</a>:</h4>
<p>I'll wait until I hear that the deployment is done and then I'll try deleting two and updating one.</p>



<a name="209705634"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Cerner%20test%20server/near/209705634" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Avery Allen <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html#209705634">(Sep 10 2020 at 20:36)</a>:</h4>
<p>Okay, changes are live.  Things that were added:</p>
<ul>
<li>504s should hopefully be fixed</li>
<li>Updated all extensions urls to "uv" instead of "us"</li>
<li>Updated backport-topic-canonical extension to use valueUri instead of valueCanonical</li>
</ul>



<a name="209705744"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Cerner%20test%20server/near/209705744" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Avery Allen <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html#209705744">(Sep 10 2020 at 20:37)</a>:</h4>
<p><span class="user-mention" data-user-id="340905">@Ted Peck</span> ,  I don't think that we are currently honoring the end timestamps.  That's something I could look into getting added if it's a workflow that you'd like to test out.</p>



<a name="209705850"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Cerner%20test%20server/near/209705850" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Avery Allen <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html#209705850">(Sep 10 2020 at 20:38)</a>:</h4>
<p><span class="user-mention" data-user-id="222054">@Gino Canessa</span> , Did you also update the topic-list operation to valueUri?  I left that as valueCanonical since that's how it was defined in the IG.</p>



<a name="209706282"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Cerner%20test%20server/near/209706282" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gino Canessa <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html#209706282">(Sep 10 2020 at 20:42)</a>:</h4>
<p>I left it as valueCanonical as well - that's how I realized that I just missed the one field during updating.</p>



<a name="209706503"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Cerner%20test%20server/near/209706503" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Avery Allen <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html#209706503">(Sep 10 2020 at 20:44)</a>:</h4>
<p>I figured it out.  I accidentally specified the server url with http instead of https which was causing the issue.</p>



<a name="209708959"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Cerner%20test%20server/near/209708959" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Spencer LaGesse <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html#209708959">(Sep 10 2020 at 21:04)</a>:</h4>
<p><span class="user-mention" data-user-id="222054">@Gino Canessa</span>  So, I'm still getting "Invalid subscription" for the above request. Any idea why?</p>



<a name="209713775"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Cerner%20test%20server/near/209713775" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Spencer LaGesse <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html#209713775">(Sep 10 2020 at 21:46)</a>:</h4>
<p><span class="user-mention" data-user-id="301310">@Avery Allen</span>  Posting subscriptions is now working for me. I'm trying to trigger a notification, but I'm finding that I get a 404 when posting to <a href="https://fhir-open.stagingcerner.com/beta/dacc6494-e336-45ad-8729-b789ff8663c6/Subscription/notify">https://fhir-open.stagingcerner.com/beta/dacc6494-e336-45ad-8729-b789ff8663c6/Subscription/notify</a>. Is that still the right endpoint to trigger notifications?</p>



<a name="209713813"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Cerner%20test%20server/near/209713813" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ted Peck <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html#209713813">(Sep 10 2020 at 21:47)</a>:</h4>
<p>I got a subscription POSTed and "active".  Now I'm trying to trigger a notification, but I get a 400 Bad Request when I POST the raw V2<br>
EVN|A04|1<br>
PID|123|1316024|1221233<br>
to the endpoint <a href="https://fhir-open.stagingcerner.com/beta/dacc6494-e336-45ad-8729-b789ff8663c6/Subscription/notify">https://fhir-open.stagingcerner.com/beta/dacc6494-e336-45ad-8729-b789ff8663c6/Subscription/notify</a></p>



<a name="209714376"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Cerner%20test%20server/near/209714376" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Avery Allen <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html#209714376">(Sep 10 2020 at 21:53)</a>:</h4>
<p>Hmm,  I was able to get a request through with that body.  Is there any error message that comes back with the 400?</p>



<a name="209714612"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Cerner%20test%20server/near/209714612" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ted Peck <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html#209714612">(Sep 10 2020 at 21:55)</a>:</h4>
<p>Maybe it's because of the content-type? When I changed it from "application/json" to "text/plain" I then get a 404 Not Found.</p>



<a name="209714731"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Cerner%20test%20server/near/209714731" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ted Peck <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html#209714731">(Sep 10 2020 at 21:56)</a>:</h4>
<p>With the 400 I got a JSON body showing the error code and text, but with the 404 I get no body</p>



<a name="209714809"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Cerner%20test%20server/near/209714809" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ted Peck <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html#209714809">(Sep 10 2020 at 21:57)</a>:</h4>
<p>But based on your successful submit I have not seen a call to my endpoint yet. Maybe that's a different problem.</p>



<a name="209714956"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Cerner%20test%20server/near/209714956" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ted Peck <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html#209714956">(Sep 10 2020 at 21:58)</a>:</h4>
<p>I take that back, I got 3 of them! They just didn't get far on my end.</p>



<a name="209715029"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Cerner%20test%20server/near/209715029" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Avery Allen <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html#209715029">(Sep 10 2020 at 21:59)</a>:</h4>
<p>Okay, yeah.  I can recreate the 400 by setting the Content-Type to application/json.</p>
<p>text/plain is working for me, though</p>
<div class="codehilite"><pre><span></span><code>curl --location --request POST &#39;https://fhir-open.stagingcerner.com/beta/dacc6494-e336-45ad-8729-b789ff8663c6/Subscription/notify&#39; \
--header &#39;Content-Type: text/plain&#39; \
--data-raw &#39;EVN|A04|1
PID|123|1316024|1111&#39;
</code></pre></div>



<a name="209715052"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Cerner%20test%20server/near/209715052" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Avery Allen <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html#209715052">(Sep 10 2020 at 21:59)</a>:</h4>
<p>Oh, cool!  Glad to hear they are showing up</p>



<a name="209716334"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Cerner%20test%20server/near/209716334" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gino Canessa <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html#209716334">(Sep 10 2020 at 22:13)</a>:</h4>
<p><span class="user-mention" data-user-id="224405">@Spencer LaGesse</span>  you have the wrong url for the topic, it should be: <code>http://argonautproject.org/encounters-ig/SubscriptionTopic/encounter-start</code></p>



<a name="209716465"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Cerner%20test%20server/near/209716465" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gino Canessa <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html#209716465">(Sep 10 2020 at 22:14)</a>:</h4>
<p>In the context of the backport, you can run <a href="https://server.subscriptions.argo.run/Subscription/$topic-list">https://server.subscriptions.argo.run/Subscription/$topic-list</a> to see the list of topics:</p>
<div class="codehilite"><pre><span></span><code><span class="p">{</span>
  <span class="nt">&quot;resourceType&quot;</span><span class="p">:</span> <span class="s2">&quot;Parameters&quot;</span><span class="p">,</span>
  <span class="nt">&quot;parameter&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;subscription-topic-canonical&quot;</span><span class="p">,</span>
      <span class="nt">&quot;valueCanonical&quot;</span><span class="p">:</span> <span class="s2">&quot;http://argonautproject.org/encounters-ig/SubscriptionTopic/encounter-start&quot;</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
</code></pre></div>



<a name="209716687"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Cerner%20test%20server/near/209716687" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Spencer LaGesse <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html#209716687">(Sep 10 2020 at 22:17)</a>:</h4>
<p>Hm, I'm getting a 501 at that endpoint.</p>



<a name="209717426"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Cerner%20test%20server/near/209717426" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Avery Allen <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html#209717426">(Sep 10 2020 at 22:26)</a>:</h4>
<p>Is there a list of the topic igs?  I'm pretty sure the link that <span class="user-mention" data-user-id="224405">@Spencer LaGesse</span>  is providing is from the Cerner server.  It's what we've been using for the last few connectathons.  Maybe that used to be url and it changed?</p>



<a name="209717636"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Cerner%20test%20server/near/209717636" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Spencer LaGesse <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html#209717636">(Sep 10 2020 at 22:29)</a>:</h4>
<p>I got the link originally from the R4 Backport examples, but I do see that <a href="https://microsoft-healthcare-madison.github.io/argonaut-subscription-info/">https://microsoft-healthcare-madison.github.io/argonaut-subscription-info/</a> calls out that the one Gino mentioned is supported by that server. I guess I just assumed everyone was supporting "<a href="http://argonautproject.org/subscription-ig/SubscriptionTopic/admission">http://argonautproject.org/subscription-ig/SubscriptionTopic/admission</a>" for testing.</p>



<a name="209717782"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Cerner%20test%20server/near/209717782" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gino Canessa <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html#209717782">(Sep 10 2020 at 22:31)</a>:</h4>
<p>The name for the Argonaut one changed a while back (can go through git) - but that was the old name.  As long as the server is reporting its OWN list properly, it shouldn't matter.</p>
<p>In this case, the argo.run use 'encounter-start', so trying to create a subscription with the 'admission' topic fails.</p>



<a name="209717796"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Cerner%20test%20server/near/209717796" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Spencer LaGesse <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html#209717796">(Sep 10 2020 at 22:31)</a>:</h4>
<p>Also <span class="user-mention" data-user-id="301310">@Avery Allen</span>  I am still seeing 404 at <a href="https://fhir-open.stagingcerner.com/beta/dacc6494-e336-45ad-8729-b789ff8663c6/Subscription/notify">https://fhir-open.stagingcerner.com/beta/dacc6494-e336-45ad-8729-b789ff8663c6/Subscription/notify</a> even if I set the Content-type to text/plain. The response has an "X-Cache" header that says "Error from cloudfront", so I'm not sure if that is relevant.</p>



<a name="209717966"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Cerner%20test%20server/near/209717966" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gino Canessa <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html#209717966">(Sep 10 2020 at 22:33)</a>:</h4>
<p>For reference, the current (final save for updates based on changes to R5) Argonaut encounter IG is living on <a href="https://github.com/argonautproject/subscriptions/blob/master/encounters-ig.md">GitHub, here</a></p>



<a name="209718805"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Cerner%20test%20server/near/209718805" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Avery Allen <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html#209718805">(Sep 10 2020 at 22:44)</a>:</h4>
<p><span class="user-mention" data-user-id="224405">@Spencer LaGesse</span> , I'm going to have to dig into this one a bit more.  I'm not able to recreate it on my end.  If you get a chance can you provide the X-Request-Id response header?</p>
<p>Also the request body would be helpful</p>



<a name="209718879"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Cerner%20test%20server/near/209718879" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Spencer LaGesse <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html#209718879">(Sep 10 2020 at 22:45)</a>:</h4>
<div class="codehilite"><pre><span></span><code>EVN|A04|1
PID|123|1316024|1221233
</code></pre></div>


<p>X-Request-Id:  2d0d1efe-70df-4310-ab4d-ca2b43d50db6</p>



<a name="209737254"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Cerner%20test%20server/near/209737254" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ted Peck <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html#209737254">(Sep 11 2020 at 03:14)</a>:</h4>
<p><span class="user-mention" data-user-id="301310">@Avery Allen</span> that curl is working for me, although on RedHat I had to change --data-raw to --data-ascii. I don't know why I'm getting 404 from Postman but I'll just go with curl for now.</p>



<a name="209737280"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Cerner%20test%20server/near/209737280" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ted Peck <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html#209737280">(Sep 11 2020 at 03:15)</a>:</h4>
<p>When you get a chance can you clean out all the subscriptions I POSTed?  They all have endpoint <a href="http://edsconnect25.intersystems.com">edsconnect25.intersystems.com</a> and heartbeatPeriod 600.</p>



<a name="209737349"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Cerner%20test%20server/near/209737349" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ted Peck <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html#209737349">(Sep 11 2020 at 03:17)</a>:</h4>
<p>Also I requested a second header, like  below, but I don't think it's coming through:<br>
"header": [<br>
                    "Authorization: Basic X3N5c3RlbTpTWVM=",<br>
                    "x-ISC-EDSName: Avery"<br>
                ]<br>
Is that plausible?</p>



<a name="209775557"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Cerner%20test%20server/near/209775557" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Avery Allen <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html#209775557">(Sep 11 2020 at 12:46)</a>:</h4>
<p><span class="user-mention" data-user-id="224405">@Spencer LaGesse</span> , I tracked down the logs for the request above. </p>
<div class="codehilite"><pre><span></span><code> No trigger filter found for: &#39;EVN|A04|1
PID|123|1316024|1221233&#39;
</code></pre></div>


<p>My suspicion is that there is either missing or extra whitespace somewhere.  Here's how I have my postman request set up:</p>
<p><a href="/user_uploads/10155/lkNXnbgJcjotZe5RS_0Jlcjl/Screen-Shot-2020-09-11-at-7.45.48-AM.png">Screen-Shot-2020-09-11-at-7.45.48-AM.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/10155/lkNXnbgJcjotZe5RS_0Jlcjl/Screen-Shot-2020-09-11-at-7.45.48-AM.png" title="Screen-Shot-2020-09-11-at-7.45.48-AM.png"><img src="/user_uploads/10155/lkNXnbgJcjotZe5RS_0Jlcjl/Screen-Shot-2020-09-11-at-7.45.48-AM.png"></a></div>



<a name="209776544"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Cerner%20test%20server/near/209776544" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Avery Allen <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html#209776544">(Sep 11 2020 at 12:55)</a>:</h4>
<p><span class="user-mention" data-user-id="340905">@Ted Peck</span> ,</p>
<p>You should be able to update the status of your existing Subscriptions to "off" to prevent them from triggering notifications.  You can easily see all the Subscriptions you've created so far with:</p>
<div class="codehilite"><pre><span></span><code>curl --location --request GET &#39;https://fhir-open.stagingcerner.com/beta/dacc6494-e336-45ad-8729-b789ff8663c6/Subscription?endpoint=edsconnect25.intersystems.com&#39; \
--header &#39;Accept: application/fhir+json&#39;
</code></pre></div>



<a name="209776633"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Cerner%20test%20server/near/209776633" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Avery Allen <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html#209776633">(Sep 11 2020 at 12:56)</a>:</h4>
<p>The server should sending multiple headers.  Looking into that now.</p>



<a name="209779310"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Cerner%20test%20server/near/209779310" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Spencer LaGesse <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html#209779310">(Sep 11 2020 at 13:19)</a>:</h4>
<p><span class="user-mention" data-user-id="301310">@Avery Allen</span>  Okay, I think I might have it figured out. I'm on Windows, and if I send a request from Postman that looks exactly like yours, I get a 404. However, if I paste the body in Notepad++, convert the line endings to Unix (so LF instead of CRLF) and send that as a binary payload from Postman, I get 200. So I suspect this is a Windows vs Unix line endings issue.</p>



<a name="209780474"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Cerner%20test%20server/near/209780474" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Avery Allen <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html#209780474">(Sep 11 2020 at 13:29)</a>:</h4>
<p>I'll look into stripping the line endings to hopefully prevent that</p>



<a name="209780756"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Cerner%20test%20server/near/209780756" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Spencer LaGesse <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html#209780756">(Sep 11 2020 at 13:31)</a>:</h4>
<p>Thanks. It is easy to work around once the issue is understood, so don't worry about it too much for my benefit.</p>



<a name="209783529"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Cerner%20test%20server/near/209783529" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vassil Peytchev <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html#209783529">(Sep 11 2020 at 13:55)</a>:</h4>
<p>Since these are HL7 V2 segments, shouldn't they simply have a CR at the end (and no other line breaks)? At least that is what HL7 over HTTP expects...</p>



<a name="209783719"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Cerner%20test%20server/near/209783719" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html#209783719">(Sep 11 2020 at 13:57)</a>:</h4>
<p>This is "hacked HL7 over HTTP" not so much the real deal :D</p>



<a name="209788878"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Cerner%20test%20server/near/209788878" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ted Peck <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html#209788878">(Sep 11 2020 at 14:39)</a>:</h4>
<p><span class="user-mention" data-user-id="301310">@Avery Allen</span> I have increased my confidence that my x-EDS header is not coming through. I succeeded in updating my extra subscriptions to "off", so the only active one now is e09c0d84-692f-4149-8899-30b6c01150f2 and it has<br>
"header": [<br>
                    "Authorization: Basic X3N5c3RlbTpTWVM=",<br>
                    "x-ISC-EDSName: Avery"<br>
                ]<br>
Do I have the syntax right on that second one? I do see the "authorization" header coming through.</p>



<a name="209789081"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Cerner%20test%20server/near/209789081" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Avery Allen <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html#209789081">(Sep 11 2020 at 14:40)</a>:</h4>
<p>The syntax looks correct.  We are currently looking into the issue.  Hope to have a fix for you soon.</p>



<a name="209791576"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Cerner%20test%20server/near/209791576" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Avery Allen <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html#209791576">(Sep 11 2020 at 15:00)</a>:</h4>
<p><span class="user-mention" data-user-id="340905">@Ted Peck</span> , can you give it another go?  Just pushed out a change.</p>



<a name="209792188"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Cerner%20test%20server/near/209792188" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ted Peck <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html#209792188">(Sep 11 2020 at 15:05)</a>:</h4>
<p>Thanks! I seem to have gotten a bunch of new x- headers but not the one I requested.</p>



<a name="209792417"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Cerner%20test%20server/near/209792417" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ted Peck <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html#209792417">(Sep 11 2020 at 15:06)</a>:</h4>
<p>Sorry, it seems I did get it - let me check more throughly</p>



<a name="209792640"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Cerner%20test%20server/near/209792640" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ted Peck <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html#209792640">(Sep 11 2020 at 15:08)</a>:</h4>
<p>Yes, I missed it the first try because I searched case-sensitive.<br>
So, thanks!</p>



<a name="209793237"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Cerner%20test%20server/near/209793237" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ted Peck <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html#209793237">(Sep 11 2020 at 15:13)</a>:</h4>
<p>FYI these are all the new headers I got:</p>
<p>"x-isc-edsname")="Avery"<br>
"accept-encoding")="gzip;q=1.0, deflate;q=0.6, identity;q=0.3"<br>
"newrelic")="eyJ2IjpbMCwxXSwiZCI6eyJ0eSI6IkFwcCIsImFjIjoiMTc5NTE0MSIsImFwIjoiMjEyMjkxODAzIiwidHgiOiIzMWFhMWU2NjZkNDZlNzhhIiwidHIiOiIzMWFhMWU2NjZkNDZlNzhhIiwic2EiOnRydWUsInByIjoxLjExMDI3NSwidGkiOjE1OTk4MzY1NDU3NzgsImlkIjoiNjUyNWZmOWRmZTdkY2RjNiIsInRrIjoiMTczMDc1OSJ9fQ=="<br>
"user-agent")="Ruby"<br>
"x-forwarded-for")="159.140.6.33"<br>
"x-forwarded-port")=80<br>
"x-forwarded-proto")="http"<br>
"x-relay-domain")="<a href="http://edsconnect25.intersystems.com">edsconnect25.intersystems.com</a>"<br>
"x-relay-path")="csp/healthshare/edsdemo/hseds/api/trigger/fhirsub/admit-IMP"<br>
"x-relay-proto")="https"</p>



<a name="209794069"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Cerner%20test%20server/near/209794069" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ted Peck <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html#209794069">(Sep 11 2020 at 15:18)</a>:</h4>
<p>Next question...</p>
<p>I tried updating to content: "full-resource" and got back an error: <em>"text": "Expected value to be one of: id-only, empty"</em>.</p>
<p>I assume that's not supported for now. However the notification bundle I'm getting with "id-only" contains an entry after the SubscriptionStatus resource that is not any kind of FHIR Resource:<br>
{<br>
            "request": {<br>
                "method": "PUT",<br>
                "url": "<a href="https://fhir-open.stagingcerner.com/beta/dacc6494-e336-45ad-8729-b789ff8663c6/Encounter/1111">https://fhir-open.stagingcerner.com/beta/dacc6494-e336-45ad-8729-b789ff8663c6/Encounter/1111</a>"<br>
            },<br>
            "response": {<br>
                "status": "200"<br>
            }<br>
}</p>
<p>Is this the expected content? I see it contains the expected id but I'm not sure what to make of the rest of it. I couldn't find any documentation specifying what to expect but based on my R4 experience I was expecting the full Encounter resource.</p>



<a name="209794095"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Cerner%20test%20server/near/209794095" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ted Peck <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html#209794095">(Sep 11 2020 at 15:18)</a>:</h4>
<p>The R5 doc does give me the impression that I should expect any number of resources that match the Topic, am I right about that?</p>



<a name="209794603"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Cerner%20test%20server/near/209794603" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ted Peck <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html#209794603">(Sep 11 2020 at 15:22)</a>:</h4>
<p>I just tried a GET on the returned URL for Encounter/1111 but got a 404.  Is that expected?</p>



<a name="209795311"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Cerner%20test%20server/near/209795311" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Spencer LaGesse <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html#209795311">(Sep 11 2020 at 15:27)</a>:</h4>
<p>It seems the Cerner test server is not returning a fullUrl for each Bundle entry. Is that expected?</p>



<a name="209796769"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Cerner%20test%20server/near/209796769" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Avery Allen <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html#209796769">(Sep 11 2020 at 15:37)</a>:</h4>
<p><span class="user-mention" data-user-id="340905">@Ted Peck</span> </p>
<p>Yeah, full resource isn't supported.</p>
<p>For the response, the first bundle entry contains the subscription status resource.  The second entry only contains a request and response field that relay information about the request that triggered the subscription notification.  Note that since the notification triggers are the hacked together hl7 v2 messages, that there wasn't really a post/put request like the bundle suggests, but that's how the response would be if the workflow were fully supported.</p>
<p>Here's an example from the spec: <a href="https://build.fhir.org/notification-id-only.json.html">https://build.fhir.org/notification-id-only.json.html</a></p>
<p>Also, as for the Encounter not resolving, that's expected.  In the notification body</p>
<div class="codehilite"><pre><span></span><code>EVN|A04|1
PID|123|1316024|1111
</code></pre></div>


<p>The last integer is used as the Encounter id.  Encounter read/search is supported by the server so if you wanted a real encounter, you could look one up and use that as part of the notification.  An example can be found here:</p>
<div class="codehilite"><pre><span></span><code>curl --location --request GET &#39;https://fhir-open.stagingcerner.com/beta/dacc6494-e336-45ad-8729-b789ff8663c6/Encounter/97733541&#39; \
--header &#39;Accept: application/fhir+json&#39;
</code></pre></div>



<a name="209797217"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Cerner%20test%20server/near/209797217" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Avery Allen <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html#209797217">(Sep 11 2020 at 15:41)</a>:</h4>
<p><span class="user-mention" data-user-id="224405">@Spencer LaGesse</span> ,  We don't support reading the subscription status outside the context of a notification bundle, so I don't think it makes sense to add a full url there (I also don't think it's required by the spec).</p>
<p>I do see where it could be helpful for the second bundle entry.  I'll update the server to populate the entry the same was as the example in the spec</p>
<div class="codehilite"><pre><span></span><code>{
      &quot;fullUrl&quot;: &quot;https://example.org/FHIR/R5/Encounter/2&quot;,
      &quot;request&quot;: {
        &quot;method&quot;: &quot;PUT&quot;,
        &quot;url&quot;: &quot;Encounter/2&quot;
      },
      &quot;response&quot;: {
        &quot;status&quot;: &quot;201&quot;
      }
    }
</code></pre></div>



<a name="209797425"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Cerner%20test%20server/near/209797425" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Spencer LaGesse <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html#209797425">(Sep 11 2020 at 15:43)</a>:</h4>
<p>I think it is required based on:  <a href="http://hl7.org/fhir/R4/bundle.html#bundle-unique">http://hl7.org/fhir/R4/bundle.html#bundle-unique</a></p>
<blockquote>
<p>Except for transactions and batches, each entry in a Bundle must have a fullUrl which is the identity of the resource in the entry. Note that this is not a versioned reference to the resource, but its identity. Where a resource is not assigned a persistent identity that can be used in the Bundle, a UUID should be used (urn:uuid:...).</p>
</blockquote>
<p>Or am I misinterpreting something?</p>



<a name="209798139"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Cerner%20test%20server/near/209798139" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Avery Allen <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html#209798139">(Sep 11 2020 at 15:48)</a>:</h4>
<p>Yeah, you're right.  I can get that added.  Also, I believe we are returning absolute urls in the request.url field, but based on the spec it should be relative:</p>
<div class="codehilite"><pre><span></span><code>Definition

The URL for this entry, relative to the root (the address to which the request is posted).
</code></pre></div>



<a name="209803665"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Cerner%20test%20server/near/209803665" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Avery Allen <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html#209803665">(Sep 11 2020 at 16:30)</a>:</h4>
<p><span class="user-mention" data-user-id="224405">@Spencer LaGesse</span> </p>
<p>Alright! I've got a new commit building that updates the request notifications to always include Bundle.entry.fullUrl and that updates Bundle.entry.request.url to be relative as the spec requires.  Example:</p>
<div class="codehilite"><pre><span></span><code>{
  &quot;resourceType&quot;: &quot;Bundle&quot;,
  &quot;id&quot;: &quot;notification-id-only&quot;,
  &quot;meta&quot;: {
    &quot;profile&quot;: [
      &quot;http://hl7.org/fhir/uv/subscriptions-backport/StructureDefinition/backport-subscription-notification&quot;
    ]
  },
  &quot;type&quot;: &quot;history&quot;,
  &quot;timestamp&quot;: &quot;2020-09-11T11:25:20-05:00&quot;,
  &quot;entry&quot;: [
    {
      &quot;fullUrl&quot;: &quot;urn:uuid:aca62ce2-7bff-496e-b4d1-ec0591dd5152&quot;,
      &quot;resource&quot;: {
        &quot;resourceType&quot;: &quot;Parameters&quot;,
        &quot;meta&quot;: {
          &quot;profile&quot;: [
            &quot;http://hl7.org/fhir/uv/subscriptions-backport/StructureDefinition/backport-subscription-status&quot;
          ]
        },
        &quot;parameter&quot;: [
          {
            &quot;name&quot;: &quot;subscription-url&quot;,
            &quot;valueUri&quot;: &quot;http://localhost:3000/beta/r4/2c400054-42d8-4e74-87b7-80b5bd5fde9f/Subscription/2ac4db66-4790-4cc7-b38d-d18f16fbef26&quot;
          },
          {
            &quot;name&quot;: &quot;status&quot;,
            &quot;valueCode&quot;: &quot;active&quot;
          },
          {
            &quot;name&quot;: &quot;type&quot;,
            &quot;valueCode&quot;: &quot;event-notification&quot;
          },
          {
            &quot;name&quot;: &quot;subscription-event-count&quot;,
            &quot;valueUnsignedInt&quot;: 2
          },
          {
            &quot;name&quot;: &quot;bundle-event-count&quot;,
            &quot;valueUnsignedInt&quot;: 1
          },
          {
            &quot;name&quot;: &quot;subscription-topic-url&quot;,
            &quot;valueUri&quot;: &quot;http://argonautproject.org/subscription-ig/SubscriptionTopic/admission&quot;
          }
        ]
      },
      &quot;request&quot;: {
        &quot;method&quot;: &quot;GET&quot;,
        &quot;url&quot;: &quot;Subscription/2ac4db66-4790-4cc7-b38d-d18f16fbef26/$status&quot;
      },
      &quot;response&quot;: {
        &quot;status&quot;: &quot;200&quot;
      }
    },
    {
      &quot;fullUrl&quot;: &quot;http://localhost:3000/beta/r4/2c400054-42d8-4e74-87b7-80b5bd5fde9f/Encounter/1111&quot;,
      &quot;request&quot;: {
        &quot;method&quot;: &quot;PUT&quot;,
        &quot;url&quot;: &quot;Encounter/1111&quot;
      },
      &quot;response&quot;: {
        &quot;status&quot;: &quot;200&quot;
      }
    }
  ]
}
</code></pre></div>



<a name="209803745"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Cerner%20test%20server/near/209803745" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Avery Allen <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html#209803745">(Sep 11 2020 at 16:30)</a>:</h4>
<p>It should be available in about ~30 minutes or so.</p>



<a name="209803843"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Cerner%20test%20server/near/209803843" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Avery Allen <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html#209803843">(Sep 11 2020 at 16:31)</a>:</h4>
<p>I'm going to step away for a bit to eat, but afterwards I'll be around to tweak anything else that needs updates.</p>



<a name="209806516"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Cerner%20test%20server/near/209806516" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Spencer LaGesse <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html#209806516">(Sep 11 2020 at 16:55)</a>:</h4>
<p>If I try to post a subscription with criteria like <code>Encounter?patient=Patient/1316024</code>, I get back the following response:</p>
<div class="codehilite"><pre><span></span><code>{
    &quot;resourceType&quot;: &quot;OperationOutcome&quot;,
    &quot;issue&quot;: [
        {
            &quot;severity&quot;: &quot;error&quot;,
            &quot;code&quot;: &quot;invalid&quot;,
            &quot;details&quot;: {
                &quot;text&quot;: &quot;Expected to match pattern: Encounter\\?patient=\\d+&quot;
            },
            &quot;expression&quot;: [
                &quot;Subscription.criteria&quot;
            ]
        }
    ]
}
</code></pre></div>


<p>But if I submit it like <code>Encounter?patient=1316024</code> it works.</p>
<p>Shouldn't the criteria be <code>Encounter?patient=Patient.1316024</code> since the value is a reference type?</p>



<a name="209808904"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Cerner%20test%20server/near/209808904" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Avery Allen <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html#209808904">(Sep 11 2020 at 17:14)</a>:</h4>
<p>Both are allowed by the spec for reference searches:</p>
<p><a href="https://www.hl7.org/fhir/search.html#reference">https://www.hl7.org/fhir/search.html#reference</a></p>
<p>We limit to patient=&lt;id&gt; for simplicity in the server implementation.</p>



<a name="209811616"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Cerner%20test%20server/near/209811616" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Spencer LaGesse <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html#209811616">(Sep 11 2020 at 17:37)</a>:</h4>
<p><span class="user-mention" data-user-id="301310">@Avery Allen</span>  Has the fullUrl update finished deploying yet? I am still not seeing the fullUrl in the notification bundles.</p>



<a name="209811813"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Cerner%20test%20server/near/209811813" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Avery Allen <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html#209811813">(Sep 11 2020 at 17:38)</a>:</h4>
<p>Let me check real quick</p>



<a name="209811901"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Cerner%20test%20server/near/209811901" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Avery Allen <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html#209811901">(Sep 11 2020 at 17:39)</a>:</h4>
<p>Gah, networking issue failed the build. Lemme rerun it.</p>



<a name="209811914"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Cerner%20test%20server/near/209811914" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Avery Allen <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html#209811914">(Sep 11 2020 at 17:39)</a>:</h4>
<p>Sorry about that.</p>



<a name="209820212"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Cerner%20test%20server/near/209820212" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Avery Allen <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html#209820212">(Sep 11 2020 at 18:50)</a>:</h4>
<p><span class="user-mention" data-user-id="224405">@Spencer LaGesse</span>, the changes should be deployed now</p>



<a name="209820676"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179229-subscriptions/topic/Cerner%20test%20server/near/209820676" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Spencer LaGesse <a href="https://fhir.github.io/chat-archive/stream/179229-subscriptions/topic/Cerner.20test.20server.html#209820676">(Sep 11 2020 at 18:54)</a>:</h4>
<p>Thanks! It seems to be working now.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
