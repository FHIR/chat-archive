---
layout: page
title: "FHIR Chat  · Location positional searching (and maybe parameterised searc · australia"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179173-australia/index.html">australia</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179173-australia/topic/Location.20positional.20searching.20(and.20maybe.20parameterised.20searc.html">Location positional searching (and maybe parameterised searc</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153987376"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179173-australia/topic/Location%20positional%20searching%20%28and%20maybe%20parameterised%20searc/near/153987376" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Carter <a href="https://fhir.github.io/chat-archive/stream/179173-australia/topic/Location.20positional.20searching.20(and.20maybe.20parameterised.20searc.html#153987376">(Aug 16 2018 at 05:08)</a>:</h4>
<p>In the AUPD Location profile (<a href="http://fhir.hl7.org.au/fhir/pd2018Mar/StructureDefinition-au-pd-location.html" target="_blank" title="http://fhir.hl7.org.au/fhir/pd2018Mar/StructureDefinition-au-pd-location.html">http://fhir.hl7.org.au/fhir/pd2018Mar/StructureDefinition-au-pd-location.html</a>), we see contradictory location searching text, and we want to make sure which one is right for our implementation. The question is should it be </p>
<p>base/location?location.near[...]<br>
or<br>
base/location?near[...]</p>
<p>The text seems to have changed over versions of the profile. Here is how it reads in the March 2018 version and the snapshot build:</p>
<blockquote>
<p>Search: Location Distance</p>
<p>Search based on address within a nominated distance.</p>
<p>GET [base]/Location?location.near=[latitude]:[longitude]&amp;location.near-distance=[prefix][value]|[units-system]|[units]</p>
<p>Example: GET [base]/Location?near=-83.694810:42.256500&amp;near-distance=le10.0|http://unitsofmeasure.org|km</p>
</blockquote>
<p>The guidance on the base location resource (<a href="http://hl7.org/fhir/location.html#positional" target="_blank" title="http://hl7.org/fhir/location.html#positional">http://hl7.org/fhir/location.html#positional</a>) looks like the second construction is correct.</p>
<p>Maybe more generally, how can I understand the pattern for when to prepend the resource name in a query? I'm mostly learning by example but haven't found or figured out the general rule.</p>



<a name="153987398"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179173-australia/topic/Location%20positional%20searching%20%28and%20maybe%20parameterised%20searc/near/153987398" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179173-australia/topic/Location.20positional.20searching.20(and.20maybe.20parameterised.20searc.html#153987398">(Aug 16 2018 at 05:41)</a>:</h4>
<p>This is a great question John. and I'm wondering what we should do here.<br>
PA (international) has just published the R4 format for this search, and is much better than the STU3 version, in that it can also work across joins too.<br>
<a href="http://build.fhir.org/location.html#positional" target="_blank" title="http://build.fhir.org/location.html#positional">http://build.fhir.org/location.html#positional</a><br>
And the VhDir profile is also considering adding in a definition for the contains search parameter that goes along with the new boundary extension format<br>
<a href="http://build.fhir.org/extension-location-boundary-geojson.html" target="_blank" title="http://build.fhir.org/extension-location-boundary-geojson.html">http://build.fhir.org/extension-location-boundary-geojson.html</a></p>



<a name="153987401"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179173-australia/topic/Location%20positional%20searching%20%28and%20maybe%20parameterised%20searc/near/153987401" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179173-australia/topic/Location.20positional.20searching.20(and.20maybe.20parameterised.20searc.html#153987401">(Aug 16 2018 at 05:42)</a>:</h4>
<p>Given where we are in the Australian implementations, I don't think it would be too much to actually adopt the new formats for our STU3 implementations if we had support from the other vendors in the space.<br>
(I'd be happy to do it in ours)</p>



<a name="153987403"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179173-australia/topic/Location%20positional%20searching%20%28and%20maybe%20parameterised%20searc/near/153987403" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179173-australia/topic/Location.20positional.20searching.20(and.20maybe.20parameterised.20searc.html#153987403">(Aug 16 2018 at 05:43)</a>:</h4>
<p>(The old format isn't the most pleasant thing, the new one I think is much nicer)</p>



<a name="153987405"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179173-australia/topic/Location%20positional%20searching%20%28and%20maybe%20parameterised%20searc/near/153987405" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179173-australia/topic/Location.20positional.20searching.20(and.20maybe.20parameterised.20searc.html#153987405">(Aug 16 2018 at 05:45)</a>:</h4>
<p><span class="user-mention" data-user-id="191368">@Brett Esler</span> thoughts?</p>



<a name="153987407"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179173-australia/topic/Location%20positional%20searching%20%28and%20maybe%20parameterised%20searc/near/153987407" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179173-australia/topic/Location.20positional.20searching.20(and.20maybe.20parameterised.20searc.html#153987407">(Aug 16 2018 at 05:47)</a>:</h4>
<p>The format from STU3 was (<a href="http://hl7.org/fhir/location.html#positional" target="_blank" title="http://hl7.org/fhir/location.html#positional">http://hl7.org/fhir/location.html#positional</a>)</p>
<div class="codehilite"><pre><span></span>GET [base]/Location?near=-83.694810:42.256500&amp;near-distance=11.20||km
</pre></div>


<p>don't know where that prefix came from.</p>



<a name="153987518"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179173-australia/topic/Location%20positional%20searching%20%28and%20maybe%20parameterised%20searc/near/153987518" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brett Esler <a href="https://fhir.github.io/chat-archive/stream/179173-australia/topic/Location.20positional.20searching.20(and.20maybe.20parameterised.20searc.html#153987518">(Aug 16 2018 at 11:21)</a>:</h4>
<p>yes that 'location.' should not be there on either argument - i'll get that fixed<br>
I would be happy to use the R4 format and change the spec; but we had better get a show of hands on a call</p>



<a name="153987932"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179173-australia/topic/Location%20positional%20searching%20%28and%20maybe%20parameterised%20searc/near/153987932" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179173-australia/topic/Location.20positional.20searching.20(and.20maybe.20parameterised.20searc.html#153987932">(Aug 17 2018 at 00:08)</a>:</h4>
<p>Most definitely, as essentially that wouldn't be true STU3 compliance. But would make the transition to R4 easier down the track, since no-one else apart from the Telstra Health server has implemented it in this jurisdication that I know of.</p>



<a name="153987982"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179173-australia/topic/Location%20positional%20searching%20%28and%20maybe%20parameterised%20searc/near/153987982" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Carter <a href="https://fhir.github.io/chat-archive/stream/179173-australia/topic/Location.20positional.20searching.20(and.20maybe.20parameterised.20searc.html#153987982">(Aug 17 2018 at 00:57)</a>:</h4>
<p>Thanks for the replies, we will immediately make sure that we're doing it without the extra 'location.'</p>
<p>We have a customer request for the combined search on location, so the R4 approach solves a specific problem for us, and we'd be in favor of pushing on to that as soon as practical.</p>



<a name="153987986"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179173-australia/topic/Location%20positional%20searching%20%28and%20maybe%20parameterised%20searc/near/153987986" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179173-australia/topic/Location.20positional.20searching.20(and.20maybe.20parameterised.20searc.html#153987986">(Aug 17 2018 at 01:07)</a>:</h4>
<p>Actually, thinking of the implementation in our server, could quite happily support both syntaxes, as while parsing, can detect which form is being provided. So I really don't have any objections now.<br>
Just need to get the proposal past all those in the AU implementer group.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
