---
layout: page
title: "FHIR Chat  · Problem with au-receivingfacility extension · australia"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179173-australia/index.html">australia</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179173-australia/topic/Problem.20with.20au-receivingfacility.20extension.html">Problem with au-receivingfacility extension</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153991378"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179173-australia/topic/Problem%20with%20au-receivingfacility%20extension/near/153991378" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Carter <a href="https://fhir.github.io/chat-archive/stream/179173-australia/topic/Problem.20with.20au-receivingfacility.20extension.html#153991378">(Aug 28 2018 at 22:51)</a>:</h4>
<p>On the AUPD working group call last week, I raised a problem related to our use of the au-rec-fac extension and was asked to write that up for further discussion... here's that writeup. May I have your thoughts please <span class="user-mention" data-user-id="191368">@Brett Esler</span> , <span class="user-mention" data-user-id="191367">@Brian Postlethwaite</span> , and others interested.</p>
<p>In the AUPD SecureMessagingEndpoint profile, there's an extension called au-receivingfacility that points to an AU base structure here: <a href="http://hl7.org.au/fhir/pd2018Mar/StructureDefinition-au-receivingfacility.html" target="_blank" title="http://hl7.org.au/fhir/pd2018Mar/StructureDefinition-au-receivingfacility.html">http://hl7.org.au/fhir/pd2018Mar/StructureDefinition-au-receivingfacility.html</a>. in the Endpoint, the au-recfac has a cardinality of 0..1.</p>
<p>The description of that thing says : "Values for routing HLV2 message payloads associated with an endpoint. Suitable for MSH-6." It takes three chunks of data, corresponding to the three parts of the MSH-6 segment. All well and good.</p>
<p>In our initial implementation, we populated that structure with our vendor-specific addressing info. However, for federation with other messaging vendors as part of the Secure Message Delivery interoperability pilot we're participating in, we are expected to populate that block with the HPI-O addressing information.</p>
<p>I think both are valid use cases... we transmit tens of millions of messages using our internal ID scheme, so that's an important thing to cover off. And of course, HPI-O addressing for interoperation is a useful thing as well.</p>
<p>As a straw man proposal to solve this problem, I'd like your feedback on a 2-part change to the AUPD Endpoint profile. First, change the au-receivingfacility cardinality to 0..*. Second, add some sort of "type" to the au-receivingfacility structure, which might be as simple as a coded value bound to <a href="http://hl7.org.au/fhir/base2018Mar/ValueSet-au-hl7v2-0203.html" target="_blank" title="http://hl7.org.au/fhir/base2018Mar/ValueSet-au-hl7v2-0203.html">http://hl7.org.au/fhir/base2018Mar/ValueSet-au-hl7v2-0203.html</a> or might have to be more complex similar to an instance of Identifier.</p>



<a name="153991386"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179173-australia/topic/Problem%20with%20au-receivingfacility%20extension/near/153991386" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jared Davison <a href="https://fhir.github.io/chat-archive/stream/179173-australia/topic/Problem.20with.20au-receivingfacility.20extension.html#153991386">(Aug 29 2018 at 00:18)</a>:</h4>
<p>Hi John, the cardinality of 0..1 was intentional, it was intended that if more ids are required then additional Endpoint resources be allocated.</p>



<a name="153991389"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179173-australia/topic/Problem%20with%20au-receivingfacility%20extension/near/153991389" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jared Davison <a href="https://fhir.github.io/chat-archive/stream/179173-australia/topic/Problem.20with.20au-receivingfacility.20extension.html#153991389">(Aug 29 2018 at 00:28)</a>:</h4>
<p>The problem with introducing multiple cardinality is that it would result in ambiguity, because as a user how would you know which one to use. The design was that you identify search either the HealthcareService or PractitionerRole resource of interest, and that indicates the Endpoint resource which explicitly tells you what to put into the HL7 message MSH-6 fields because there is only 1 possibility. Also if you have a HL7 message with a correct MSH-6 value you can query the Endpoint resource which tells you how to route/encrypt it etc using the MSH-6 field values. This works, it was done at the connectathon last year.</p>



<a name="153991391"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179173-australia/topic/Problem%20with%20au-receivingfacility%20extension/near/153991391" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jared Davison <a href="https://fhir.github.io/chat-archive/stream/179173-australia/topic/Problem.20with.20au-receivingfacility.20extension.html#153991391">(Aug 29 2018 at 00:30)</a>:</h4>
<p>I believe this is not a matter requiring change of the specifications, but just a matter of understanding how to use them.</p>



<a name="153991442"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179173-australia/topic/Problem%20with%20au-receivingfacility%20extension/near/153991442" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Carter <a href="https://fhir.github.io/chat-archive/stream/179173-australia/topic/Problem.20with.20au-receivingfacility.20extension.html#153991442">(Aug 29 2018 at 05:48)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="191397">@Jared Davison</span> , Thanks for sharing your thoughts on this. In my original posting I did try to tackle the ambiguity that would result from having multiple au-recfac blocks by introducing a "type" to each one. In the approach you outlined, it seems that the same ambiguity could now reside in the multiple Endpoint resources... how does a sender know which one to pick? I do see the connectionType attribute, which binds (required) to a value set here: <a href="http://hl7.org.au/fhir/pd2018Mar/ValueSet-valueset-au-serviceinterface.html" target="_blank" title="http://hl7.org.au/fhir/pd2018Mar/ValueSet-valueset-au-serviceinterface.html">http://hl7.org.au/fhir/pd2018Mar/ValueSet-valueset-au-serviceinterface.html</a>. I can see the right value to indicate SMD messaging in that list, and in the AUPD example resources. What value would I use to indicate that (the other) endpoint is intended to be used only for HealthLink-to-HealthLink messaging? I'd suggest adding a new value to that value set, but probably one of the existing codes was used at the Connectathon to solve the problem?</p>



<a name="153991459"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179173-australia/topic/Problem%20with%20au-receivingfacility%20extension/near/153991459" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jared Davison <a href="https://fhir.github.io/chat-archive/stream/179173-australia/topic/Problem.20with.20au-receivingfacility.20extension.html#153991459">(Aug 29 2018 at 07:23)</a>:</h4>
<p>The value set is defined to support interoperability. If you you want to define endpoint resources that are not going to be interoperable I do not see an issue with defining your own healthlink connectionType uri and putting it in connectionType. It won't be compliant, but that's exactly what you want as I understand it? Consumers should only be looking for things that work for them, ie Endpoints containing known values others such as your uri will be invalid. Really I don't think you should be publishing such records for viewing externally on a compliant interface, but for internal use within your system I see no problem.</p>



<a name="153991529"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179173-australia/topic/Problem%20with%20au-receivingfacility%20extension/near/153991529" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brett Esler <a href="https://fhir.github.io/chat-archive/stream/179173-australia/topic/Problem.20with.20au-receivingfacility.20extension.html#153991529">(Aug 29 2018 at 13:34)</a>:</h4>
<p>I agree with Jared in the main part - different connectionType is different Endpoint instance - I would suggest we make AU PD Endpoint.connectionType and Endpoint.payloadType extensible rather than required bindings to the valuesets; that would mean could extend the valueset for domain restricted use in another profile derived from AU PD spec</p>



<a name="153991530"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179173-australia/topic/Problem%20with%20au-receivingfacility%20extension/near/153991530" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brett Esler <a href="https://fhir.github.io/chat-archive/stream/179173-australia/topic/Problem.20with.20au-receivingfacility.20extension.html#153991530">(Aug 29 2018 at 13:38)</a>:</h4>
<p>is Healthlink to Health link HL7 on MLLP that is direct HL7 V2 over TCP/IP? there is code for that in connection type valueset <strong>hl7v2-mllp</strong></p>



<a name="153991707"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179173-australia/topic/Problem%20with%20au-receivingfacility%20extension/near/153991707" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Carter <a href="https://fhir.github.io/chat-archive/stream/179173-australia/topic/Problem.20with.20au-receivingfacility.20extension.html#153991707">(Aug 29 2018 at 21:16)</a>:</h4>
<p>Separating out the endpoints and making those value sets extensible solves the problem I currently have to solve. We'll move ahead on the hope/assumption that is how things proceed.</p>



<a name="153991709"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179173-australia/topic/Problem%20with%20au-receivingfacility%20extension/near/153991709" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Carter <a href="https://fhir.github.io/chat-archive/stream/179173-australia/topic/Problem.20with.20au-receivingfacility.20extension.html#153991709">(Aug 29 2018 at 21:21)</a>:</h4>
<p>Regarding the use of MLLP or not, that code would probably achieve the goal, but it's not semantically great... I'm not trying to describe a wire protocol... rather, I'm trying to say "this endpoint conforms (or doesn't) to the current agreement/limitations in place on the SMD network (allowable certificates, allowable addresses, federation contracts, ...)".</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
