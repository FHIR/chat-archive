---
layout: page
title: "FHIR Chat  · Activity resources · finnish PHR"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179222-finnish-PHR/index.html">finnish PHR</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179222-finnish-PHR/topic/Activity.20resources.html">Activity resources</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153916275"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179222-finnish%20PHR/topic/Activity%20resources/near/153916275" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Harri Honko <a href="https://fhir.github.io/chat-archive/stream/179222-finnish-PHR/topic/Activity.20resources.html#153916275">(Oct 26 2017 at 15:04)</a>:</h4>
<p>Apparently the sandbox server is not yet configured fully according to the newly entered activity resources, could you ping us when the config is ready, thanks. We e.g. get errors on fitness results ValueSet or fitness category CodeSystem references that are not based on our XML definition files..</p>



<a name="153916397"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179222-finnish%20PHR/topic/Activity%20resources/near/153916397" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mika Tuomainen <a href="https://fhir.github.io/chat-archive/stream/179222-finnish-PHR/topic/Activity.20resources.html#153916397">(Oct 27 2017 at 10:39)</a>:</h4>
<p><span class="user-mention" data-user-id="193693">@Harri Honko</span> Were you creating a resource instance? In a resource instance it is mandatory to declare conformance to profile also in the sandbox environment.</p>
<p>Check this: <a href="http://www.kanta.fi/en/web/ammattilaisille/tarkeaa-tietoa-kehittajille" target="_blank" title="http://www.kanta.fi/en/web/ammattilaisille/tarkeaa-tietoa-kehittajille">http://www.kanta.fi/en/web/ammattilaisille/tarkeaa-tietoa-kehittajille</a> (Declaration of conformance to a FHIR profile)</p>



<a name="153916398"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179222-finnish%20PHR/topic/Activity%20resources/near/153916398" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mika Tuomainen <a href="https://fhir.github.io/chat-archive/stream/179222-finnish-PHR/topic/Activity.20resources.html#153916398">(Oct 27 2017 at 10:41)</a>:</h4>
<p>And of course, the referenced profile shall be uploaded to the sandbox.</p>



<a name="153916438"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179222-finnish%20PHR/topic/Activity%20resources/near/153916438" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Harri Honko <a href="https://fhir.github.io/chat-archive/stream/179222-finnish-PHR/topic/Activity.20resources.html#153916438">(Oct 27 2017 at 11:57)</a>:</h4>
<p>I uploaded the profiles to the sandbox on Sunday evening. Now - we're currently failing to create even a body weight observation using the Finnish PHR body weight profile example JSON as the basis. Trying to reverse engineer the problem, the values in the PHR Vital signs value set get an # before the LOINC code it's supposed to refer to at LOINC, and the value set URL ends up having a /#codenumber -&gt; fail.</p>



<a name="153916439"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179222-finnish%20PHR/topic/Activity%20resources/near/153916439" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Harri Honko <a href="https://fhir.github.io/chat-archive/stream/179222-finnish-PHR/topic/Activity.20resources.html#153916439">(Oct 27 2017 at 11:59)</a>:</h4>
<p><a href="/user_uploads/10155/NXTxEGIxKh-uWJrKMxinfS0p/bodyweightLOINCerror.png" target="_blank" title="bodyweightLOINCerror.png">bodyweightLOINCerror.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/10155/NXTxEGIxKh-uWJrKMxinfS0p/bodyweightLOINCerror.png" target="_blank" title="bodyweightLOINCerror.png"><img src="/user_uploads/10155/NXTxEGIxKh-uWJrKMxinfS0p/bodyweightLOINCerror.png"></a></div>



<a name="153916440"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179222-finnish%20PHR/topic/Activity%20resources/near/153916440" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Timo Aaltonen <a href="https://fhir.github.io/chat-archive/stream/179222-finnish-PHR/topic/Activity.20resources.html#153916440">(Oct 27 2017 at 12:09)</a>:</h4>
<p>The json leading to the error is attached here. If we remove the forward slash from the end of "<a href="http://loinc.org/" target="_blank" title="http://loinc.org/">http://loinc.org/</a>" in Observation.code.coding.system (as the server suggests) then server responses with an internal error. <a href="/user_uploads/10155/ZT3y8AnKbq4iFA1V46LBIlue/malli.json" target="_blank" title="malli.json">malli.json</a></p>



<a name="153916549"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179222-finnish%20PHR/topic/Activity%20resources/near/153916549" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179222-finnish-PHR/topic/Activity.20resources.html#153916549">(Oct 27 2017 at 20:28)</a>:</h4>
<p>have you read the error?</p>



<a name="153916697"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179222-finnish%20PHR/topic/Activity%20resources/near/153916697" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Timo Aaltonen <a href="https://fhir.github.io/chat-archive/stream/179222-finnish-PHR/topic/Activity.20resources.html#153916697">(Oct 30 2017 at 08:16)</a>:</h4>
<p><a href="/user_uploads/10155/BL3AypsMtz7VP2VTjydzepwt/500.png" target="_blank" title="500.png">500.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/10155/BL3AypsMtz7VP2VTjydzepwt/500.png" target="_blank" title="500.png"><img src="/user_uploads/10155/BL3AypsMtz7VP2VTjydzepwt/500.png"></a></div>



<a name="153916734"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179222-finnish%20PHR/topic/Activity%20resources/near/153916734" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matti Uusitalo <a href="https://fhir.github.io/chat-archive/stream/179222-finnish-PHR/topic/Activity.20resources.html#153916734">(Oct 30 2017 at 10:34)</a>:</h4>
<p>There are two issues at play here. It looks like what you are doing is fine. Unfortunately there were multiple versions of the same profiles stored in the sandbox environment. In that case it is random which one the resource server ends up using. I have removed the duplicate profiles from sandbox.</p>
<p>However another issue remains. In the latest update  we added a feature which adds the software (i.e. the client) used to store the resource. If the non authorizing version <a href="http://fhirsandbox.kanta.fi" target="_blank" title="http://fhirsandbox.kanta.fi">http://fhirsandbox.kanta.fi</a>. is used we don't know which client is used to store the data and this causes the error. We have our main focus in the production version of the applications so unfortunately this use case has been overlooked during development. We are working toward releasing a fix for this this wednesday (1.11.2017).</p>



<a name="153916793"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179222-finnish%20PHR/topic/Activity%20resources/near/153916793" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Harri Honko <a href="https://fhir.github.io/chat-archive/stream/179222-finnish-PHR/topic/Activity.20resources.html#153916793">(Oct 30 2017 at 17:20)</a>:</h4>
<p>We're probably best off to turn using the authorizing version to get things progressing. No big issue, we should have the necessary OAuth registration already done. <span class="user-mention" data-user-id="194314">@Timo Aaltonen</span> will confirm &amp; move things onwards (I'm busy Tue-Wed with other projects).</p>



<a name="153922047"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179222-finnish%20PHR/topic/Activity%20resources/near/153922047" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mikael Rinnetmäki <a href="https://fhir.github.io/chat-archive/stream/179222-finnish-PHR/topic/Activity.20resources.html#153922047">(Nov 29 2017 at 14:03)</a>:</h4>
<p><span class="user-mention" data-user-id="197084">@Matti Uusitalo</span>  Should the issue with creating resources in non-authorizing sandbox be resolved now?</p>



<a name="153922050"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179222-finnish%20PHR/topic/Activity%20resources/near/153922050" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matti Uusitalo <a href="https://fhir.github.io/chat-archive/stream/179222-finnish-PHR/topic/Activity.20resources.html#153922050">(Nov 29 2017 at 14:14)</a>:</h4>
<blockquote>
<p><span class="user-mention" data-user-id="197084">@Matti Uusitalo</span>  Should the issue with creating resources in non-authorizing sandbox be resolved now?</p>
</blockquote>
<p>Yes, it works now.</p>



<a name="153922105"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179222-finnish%20PHR/topic/Activity%20resources/near/153922105" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mikael Rinnetmäki <a href="https://fhir.github.io/chat-archive/stream/179222-finnish-PHR/topic/Activity.20resources.html#153922105">(Nov 29 2017 at 16:53)</a>:</h4>
<p>Thanks! There's probably something wrong with the profile I'm trying to submit. Validation provided by the server does not help much, as POST to <a href="http://fhirsandbox.kanta.fi/phr-resourceserver/baseStu3/StructureDefinition/$validate" target="_blank" title="http://fhirsandbox.kanta.fi/phr-resourceserver/baseStu3/StructureDefinition/$validate">http://fhirsandbox.kanta.fi/phr-resourceserver/baseStu3/StructureDefinition/$validate</a> returns just "{<br>
  "resourceType": "OperationOutcome",<br>
  "issue": [<br>
    {<br>
      "severity": "error",<br>
      "code": "processing"<br>
    }<br>
  ]<br>
}"</p>



<a name="153922149"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179222-finnish%20PHR/topic/Activity%20resources/near/153922149" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eeva Turkka <a href="https://fhir.github.io/chat-archive/stream/179222-finnish-PHR/topic/Activity.20resources.html#153922149">(Nov 29 2017 at 20:12)</a>:</h4>
<p>If you can provide exact timestamp for the request we can check the logs on the server side for more info - the error handling is probably a bit too strict right now.</p>
<p>(Edit: strict as in doesn't give enough information for the caller)</p>



<a name="153922152"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179222-finnish%20PHR/topic/Activity%20resources/near/153922152" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eeva Turkka <a href="https://fhir.github.io/chat-archive/stream/179222-finnish-PHR/topic/Activity.20resources.html#153922152">(Nov 29 2017 at 20:16)</a>:</h4>
<p>And also: did you try to create the profile? We don't yet support the validation-operation (<a href="https://simplifier.net/FinnishPHR/capabilitystatement3" target="_blank" title="https://simplifier.net/FinnishPHR/capabilitystatement3">https://simplifier.net/FinnishPHR/capabilitystatement3</a>) so this might be a case of really bad error message.</p>



<a name="153922233"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179222-finnish%20PHR/topic/Activity%20resources/near/153922233" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mikael Rinnetmäki <a href="https://fhir.github.io/chat-archive/stream/179222-finnish-PHR/topic/Activity.20resources.html#153922233">(Nov 30 2017 at 06:11)</a>:</h4>
<p>Yes, I first did try to create the resource. And got the same error message.</p>



<a name="153925117"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179222-finnish%20PHR/topic/Activity%20resources/near/153925117" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mika Tuomainen <a href="https://fhir.github.io/chat-archive/stream/179222-finnish-PHR/topic/Activity.20resources.html#153925117">(Dec 14 2017 at 08:01)</a>:</h4>
<p><span class="user-mention" data-user-id="192917">@Mikael Rinnetmäki</span> Could you attach the resource  file you tried to submit here?</p>



<a name="153926644"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179222-finnish%20PHR/topic/Activity%20resources/near/153926644" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mikael Rinnetmäki <a href="https://fhir.github.io/chat-archive/stream/179222-finnish-PHR/topic/Activity.20resources.html#153926644">(Dec 21 2017 at 12:04)</a>:</h4>
<p><span class="user-mention" data-user-id="192558">@Mika Tuomainen</span> I got the StructureDefinition uploaded. It's now in sandbox as <a href="http://fhirsandbox.kanta.fi/phr-resourceserver/baseStu3/StructureDefinition/fefa2acf-7209-47c1-9cee-4cf736330c51" target="_blank" title="http://fhirsandbox.kanta.fi/phr-resourceserver/baseStu3/StructureDefinition/fefa2acf-7209-47c1-9cee-4cf736330c51">http://fhirsandbox.kanta.fi/phr-resourceserver/baseStu3/StructureDefinition/fefa2acf-7209-47c1-9cee-4cf736330c51</a>.</p>



<a name="153926645"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179222-finnish%20PHR/topic/Activity%20resources/near/153926645" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mikael Rinnetmäki <a href="https://fhir.github.io/chat-archive/stream/179222-finnish-PHR/topic/Activity.20resources.html#153926645">(Dec 21 2017 at 12:09)</a>:</h4>
<p>I did try to specify the id as instructed at <a href="http://www.kanta.fi/en/web/ammattilaisille/tarkeaa-tietoa-kehittajille" target="_blank" title="http://www.kanta.fi/en/web/ammattilaisille/tarkeaa-tietoa-kehittajille">http://www.kanta.fi/en/web/ammattilaisille/tarkeaa-tietoa-kehittajille</a>:</p>
<blockquote>
<p>"The id of the profile (element <a href="http://StructuredDefinition.id" target="_blank" title="http://StructuredDefinition.id">StructuredDefinition.id</a>) must be the same as the last part of the URL"<br>
Both by specifying it in resource data, and in the separate field in the server UI, but the resource still gets stored under a UUID id.</p>
</blockquote>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
