---
layout: page
title: "FHIR Chat  · Sending an Observation resource · finnish PHR"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179222-finnish-PHR/index.html">finnish PHR</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179222-finnish-PHR/topic/Sending.20an.20Observation.20resource.html">Sending an Observation resource</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153911456"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179222-finnish%20PHR/topic/Sending%20an%20Observation%20resource/near/153911456" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kari Vatjus-Anttila <a href="https://fhir.github.io/chat-archive/stream/179222-finnish-PHR/topic/Sending.20an.20Observation.20resource.html#153911456">(Sep 29 2017 at 09:28)</a>:</h4>
<p>Hi, I'm working  on a demo at OYS TestLab @ PPSHP where we want to demonstrate sending of FHIR resources to Kanta Sandbox from an external system. I'm pretty new with this sandbox and FHIR altogether and I've been only testing the service in this point by using the website and Chrome's Advanced REST Client (ARC)</p>
<p>I've tried to create a Patient resource like it was stated in the documentation and  there was no problems with that. I received HTTP 201 Created to confirm it succeeded.</p>
<p>However, next I tried to create a Observation resource containing a Body Temperature reading and tried to submit it. I received the following error:</p>
<p>&lt;OperationOutcome&gt;<br>
&lt;issue&gt;<br>
&lt;severity value="error" /&gt;<br>
&lt;code value="processing" /&gt;<br>
&lt;diagnostics value="Failed to call access method" /&gt; <br>
 &lt;/issue&gt; <br>
&lt;/OperationOutcome&gt;</p>
<p>The message I tried to submit should be a-ok. Is this error message related to user-error or something else?</p>
<p>Below is the test message I tried to send from ARC.</p>
<p>URL:  <a href="http://fhirsandbox.kanta.fi/phr-resourceserver/baseStu3/Observation" target="_blank" title="http://fhirsandbox.kanta.fi/phr-resourceserver/baseStu3/Observation">http://fhirsandbox.kanta.fi/phr-resourceserver/baseStu3/Observation</a></p>
<p>Accept-Charset: utf-8<br>
Accept: application/fhir+xml<br>
Accept-Encoding: gzip<br>
Content-Type: application/fhir+xml</p>
<p>&lt;Observation xmlns="<a href="http://hl7.org/fhir" target="_blank" title="http://hl7.org/fhir">http://hl7.org/fhir</a>"&gt;<br>
   &lt;meta&gt;<br>
       &lt;profile value="http://phr.kanta.fi/StructureDefinition/fiphr-bodytemperature-stu3"/&gt;<br>
   &lt;/meta&gt;<br>
   &lt;language value="fi"/&gt;<br>
   &lt;category&gt; <br>
    &lt;coding&gt; <br>
      &lt;system value="http://hl7.org/fhir/observation-category"/&gt; <br>
      &lt;code value="vital-signs"/&gt; <br>
      &lt;display value="Vital Signs"/&gt; <br>
    &lt;/coding&gt; <br>
    &lt;text value="Vital Signs"/&gt; <br>
   &lt;/category&gt; <br>
   &lt;effectiveDateTime value="2017-06-16"/&gt;<br>
   &lt;issued value="2017-06-15T17:39:44.937Z"/&gt;<br>
   &lt;status value="final"/&gt;<br>
   &lt;code&gt;<br>
      &lt;coding&gt;<br>
         &lt;system value="http://loinc.org"/&gt;<br>
         &lt;code value="8310-5"/&gt;<br>
         &lt;display value="Body temperature"/&gt;<br>
      &lt;/coding&gt;<br>
   &lt;/code&gt;<br>
   &lt;subject&gt;<br>
      &lt;reference value="urn:uuid:d5db9d42-f269-4518-8ed4-c5615eb710fc"/&gt;<br>
   &lt;/subject&gt;<br>
   &lt;performer&gt;<br>
      &lt;reference value="urn:uuid:3eeb2a91-cd2c-4710-ae54-ed39909689f4"/&gt;<br>
   &lt;/performer&gt;<br>
   &lt;valueQuantity&gt; <br>
      &lt;value value="36.5"/&gt; <br>
      &lt;unit value="Cel"/&gt; <br>
      &lt;system value="http://unitsofmeasure.org"/&gt; <br>
      &lt;code value="Cel"/&gt; <br>
   &lt;/valueQuantity&gt;<br>
&lt;/Observation&gt;</p>
<p>Is there anything I'm doing wrong? Thanks for any help or insight you might offer!</p>
<p>//Kari V-A</p>



<a name="153912040"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179222-finnish%20PHR/topic/Sending%20an%20Observation%20resource/near/153912040" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mika Tuomainen <a href="https://fhir.github.io/chat-archive/stream/179222-finnish-PHR/topic/Sending.20an.20Observation.20resource.html#153912040">(Oct 03 2017 at 11:25)</a>:</h4>
<p>Profiles, extensions, value sets and code systems SHALL be in JSON format when uploaded to the Finnish PHR platform. Also the resource instances SHALL be in JSON format (XML not supported).</p>



<a name="153912059"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179222-finnish%20PHR/topic/Sending%20an%20Observation%20resource/near/153912059" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kari Vatjus-Anttila <a href="https://fhir.github.io/chat-archive/stream/179222-finnish-PHR/topic/Sending.20an.20Observation.20resource.html#153912059">(Oct 03 2017 at 12:20)</a>:</h4>
<p>I've tried sending the aforementiond request in JSON format as well. Both end up yielding the same end result:</p>
<p>URL: <a href="http://fhirsandbox.kanta.fi/phr-resourceserver/baseStu3/Observation" target="_blank" title="http://fhirsandbox.kanta.fi/phr-resourceserver/baseStu3/Observation">http://fhirsandbox.kanta.fi/phr-resourceserver/baseStu3/Observation</a></p>
<p>Accept-Charset: utf-8<br>
Accept: application/fhir+json<br>
Accept-Encoding: gzip<br>
Content-Type: application/fhir+json</p>
<p>{<br>
    "resourceType": "OperationOutcome",<br>
    "issue": [<br>
        {<br>
            "severity": "error",<br>
            "code": "processing",<br>
            "diagnostics": "Failed to call access method"<br>
        }<br>
    ]<br>
}</p>
<p>Is there an example somewhere how to do this the correct way or is there something weird going on server side?</p>



<a name="153912228"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179222-finnish%20PHR/topic/Sending%20an%20Observation%20resource/near/153912228" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anna Korpela <a href="https://fhir.github.io/chat-archive/stream/179222-finnish-PHR/topic/Sending.20an.20Observation.20resource.html#153912228">(Oct 04 2017 at 06:34)</a>:</h4>
<p>We are investigating this problem and we'll inform you as soon as a solution is found.</p>
<p>Could you please give the message you're trying to send in json format? That would help us investigate the problem.</p>



<a name="153912229"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179222-finnish%20PHR/topic/Sending%20an%20Observation%20resource/near/153912229" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kari Vatjus-Anttila <a href="https://fhir.github.io/chat-archive/stream/179222-finnish-PHR/topic/Sending.20an.20Observation.20resource.html#153912229">(Oct 04 2017 at 06:45)</a>:</h4>
<p>Sure. Here you go. I presume the message structure is ok because if there's a field missing or contains invalid values it usually nags about it.</p>
<p>{<br>
    "resourceType": "Observation",<br>
    "meta": {<br>
        "profile": [<br>
            "<a href="http://phr.kanta.fi/StructureDefinition/fiphr-bodytemperature-stu3" target="_blank" title="http://phr.kanta.fi/StructureDefinition/fiphr-bodytemperature-stu3">http://phr.kanta.fi/StructureDefinition/fiphr-bodytemperature-stu3</a>"<br>
        ]<br>
    },<br>
    "language": "fi",<br>
    "category": [<br>
        {<br>
            "coding": [<br>
                {<br>
                    "system": "<a href="http://hl7.org/fhir/observation-category" target="_blank" title="http://hl7.org/fhir/observation-category">http://hl7.org/fhir/observation-category</a>",<br>
                    "code": "vital-signs",<br>
                    "display": "Vital Signs"<br>
                }<br>
            ],<br>
            "text": "Vital Signs"<br>
        }<br>
    ],<br>
    "effectiveDateTime": "2017-06-16",<br>
    "issued": "2017-06-15T17:39:44.937Z",<br>
    "status": "final",<br>
    "code": [<br>
        {<br>
            "coding": [<br>
                {<br>
                    "system": "<a href="http://loinc.org" target="_blank" title="http://loinc.org">http://loinc.org</a>",<br>
                    "code": "8310-5",<br>
                    "display": "Body temperature"<br>
                }<br>
            ],<br>
            "text": "Body temperature"<br>
        }<br>
    ],<br>
    "subject": [<br>
        {<br>
            "reference": "urn:uuid:d5db9d42-f269-4518-8ed4-c5615eb710fc"<br>
        }<br>
    ],<br>
    "performer": [<br>
        {<br>
            "reference": "urn:uuid:3eeb2a91-cd2c-4710-ae54-ed39909689f4"<br>
        }<br>
    ],<br>
    "valueQuantity": {<br>
        "value": "36.5",<br>
        "unit": "Cel",<br>
        "system": "<a href="http://unitsofmeasure.org" target="_blank" title="http://unitsofmeasure.org">http://unitsofmeasure.org</a>",<br>
        "code": "Cel"<br>
    }<br>
}</p>



<a name="153912232"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179222-finnish%20PHR/topic/Sending%20an%20Observation%20resource/near/153912232" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matti Uusitalo <a href="https://fhir.github.io/chat-archive/stream/179222-finnish-PHR/topic/Sending.20an.20Observation.20resource.html#153912232">(Oct 04 2017 at 09:05)</a>:</h4>
<p>Problem is with the subject reference.  They are supposed to be in the format Patient/&lt;uuid&gt; where &lt;uuid&gt; is replaced with the id of the patient. The Patient must exist in PHR before storing the observation. I checked and patient with uuid d5db9d42-f269-4518-8ed4-c5615eb710fc can be found in the database so you should use "Patient/d5db9d42-f269-4518-8ed4-c5615eb710fc" as subject.reference.</p>
<p>Unfortunately the error message wasn't very helpful in this case. I can see how it would be difficult to know what went wrong. We will open a defect about that.</p>



<a name="153912237"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179222-finnish%20PHR/topic/Sending%20an%20Observation%20resource/near/153912237" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kari Vatjus-Anttila <a href="https://fhir.github.io/chat-archive/stream/179222-finnish-PHR/topic/Sending.20an.20Observation.20resource.html#153912237">(Oct 04 2017 at 10:07)</a>:</h4>
<p>Hi, you're correct. It seems to work now when I modified the subject.reference as instructed. The error message was a bit uninformative which led to confusion. Thank you very much for the support!</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
