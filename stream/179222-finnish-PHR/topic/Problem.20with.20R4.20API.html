---
layout: page
title: "FHIR Chat  · Problem with R4 API · finnish PHR"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179222-finnish-PHR/index.html">finnish PHR</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179222-finnish-PHR/topic/Problem.20with.20R4.20API.html">Problem with R4 API</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="276201530"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179222-finnish%20PHR/topic/Problem%20with%20R4%20API/near/276201530" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mikael Rinnetmäki <a href="https://fhir.github.io/chat-archive/stream/179222-finnish-PHR/topic/Problem.20with.20R4.20API.html#276201530">(Mar 22 2022 at 15:00)</a>:</h4>
<p>HI!<br>
I'm testing the R4 endpoint. Trying to post a resource fails there, but the same resource is accepted by the HAPI server UI.</p>



<a name="276201624"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179222-finnish%20PHR/topic/Problem%20with%20R4%20API/near/276201624" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mikael Rinnetmäki <a href="https://fhir.github.io/chat-archive/stream/179222-finnish-PHR/topic/Problem.20with.20R4.20API.html#276201624">(Mar 22 2022 at 15:01)</a>:</h4>
<p>An example resource is</p>
<div class="codehilite"><pre><span></span><code>{
    &quot;resourceType&quot;: &quot;MedicationAdministration&quot;,
    &quot;meta&quot;: {
        &quot;profile&quot;: [&quot;http://phr.kanta.fi/StructureDefinition/fiphr-sd-insulindosing-r4&quot;]
    },
    &quot;language&quot;: &quot;fi&quot;,
    &quot;text&quot;: {
        &quot;status&quot;: &quot;generated&quot;,
        &quot;div&quot;: &quot;&lt;div lang=\&quot;fi\&quot; xml:lang=\&quot;fi\&quot; xmlns=\&quot;http://www.w3.org/1999/xhtml\&quot;&gt;Insuliinin tyyppi: Lyhytvaikutteinen insuliini&lt;br /&gt;Koodi: SNOMED 411531001 (Short-acting insulin (substance)), ins-short-fast (Lyhytvaikutteinen insuliini), SNOMED 67866001 (Insulin (substance))&lt;br /&gt;Aika: 19.49:54 - 19.54:54&lt;br /&gt;Lyhytvaikutteinen insuliini 0.05 IU (0.641 IU/1.3260530421216847 h)&lt;br /&gt;Laite: tandemCIQ1002717740434&lt;/div&gt;&quot;
    },
    &quot;identifier&quot;: [{
        &quot;system&quot;: &quot;urn:ietf:rfc:3986&quot;,
        &quot;value&quot;: &quot;urn:uuid:e855467f-5f3c-5f3e-adf3-05025969068a&quot;
    }],
    &quot;status&quot;: &quot;completed&quot;,
    &quot;medicationCodeableConcept&quot;: {
        &quot;coding&quot;: [{
            &quot;system&quot;: &quot;http://snomed.info/sct&quot;,
            &quot;code&quot;: &quot;411531001&quot;,
            &quot;display&quot;: &quot;Short-acting insulin (substance)&quot;
        }, {
            &quot;system&quot;: &quot;http://phr.kanta.fi/CodeSystem/fiphr-cs-insulincode&quot;,
            &quot;code&quot;: &quot;ins-short-fast&quot;,
            &quot;display&quot;: &quot;Lyhytvaikutteinen insuliini&quot;
        }, {
            &quot;system&quot;: &quot;http://snomed.info/sct&quot;,
            &quot;code&quot;: &quot;67866001&quot;,
            &quot;display&quot;: &quot;Insulin (substance)&quot;
        }],
        &quot;text&quot;: &quot;Lyhytvaikutteinen insuliini&quot;
    },
    &quot;subject&quot;: {
        &quot;reference&quot;: &quot;Patient/e90e0ff6-5a42-4905-b0b4-c8af8c778b88&quot;
    },
    &quot;effectivePeriod&quot;: {
        &quot;start&quot;: &quot;2021-10-24T19:49:54.000+03:00&quot;,
        &quot;end&quot;: &quot;2021-10-24T19:54:54.000+03:00&quot;
    },
    &quot;dosage&quot;: {
        &quot;dose&quot;: {
            &quot;unit&quot;: &quot;IU&quot;,
            &quot;system&quot;: &quot;http://unitsofmeasure.org&quot;,
            &quot;code&quot;: &quot;[iU]&quot;,
            &quot;value&quot;: 0.05341666666666667
        },
        &quot;rateRatio&quot;: {
            &quot;numerator&quot;: {
                &quot;value&quot;: 0.641,
                &quot;unit&quot;: &quot;IU&quot;,
                &quot;system&quot;: &quot;http://unitsofmeasure.org&quot;,
                &quot;code&quot;: &quot;[iU]&quot;
            },
            &quot;denominator&quot;: {
                &quot;value&quot;: 1.3260530421216847,
                &quot;unit&quot;: &quot;h&quot;,
                &quot;system&quot;: &quot;http://unitsofmeasure.org&quot;,
                &quot;code&quot;: &quot;h&quot;
            }
        },
        &quot;text&quot;: &quot;Lyhytvaikutteinen insuliini 0.05 IU (0.641 IU/1.3260530421216847 h)&quot;
    }
}
</code></pre></div>



<a name="276201739"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179222-finnish%20PHR/topic/Problem%20with%20R4%20API/near/276201739" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mikael Rinnetmäki <a href="https://fhir.github.io/chat-archive/stream/179222-finnish-PHR/topic/Problem.20with.20R4.20API.html#276201739">(Mar 22 2022 at 15:02)</a>:</h4>
<p>The R4 endpoint responds with HTTP 400 </p>
<div class="codehilite"><pre><span></span><code>&lt;html&gt;&lt;head&gt;&lt;title&gt;Request Rejected&lt;/title&gt;&lt;/head&gt;&lt;body&gt;The requested URL was rejected. Please consult with your administrator.&lt;br&gt;&lt;br&gt;Your support ID is: 8839858361057246123&lt;br&gt;&lt;br&gt;&lt;a href=&#39;javascript:history.back();&#39;&gt;[Go Back]&lt;/a&gt;&lt;/body&gt;&lt;/html&gt;
</code></pre></div>



<a name="276202151"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179222-finnish%20PHR/topic/Problem%20with%20R4%20API/near/276202151" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mikael Rinnetmäki <a href="https://fhir.github.io/chat-archive/stream/179222-finnish-PHR/topic/Problem.20with.20R4.20API.html#276202151">(Mar 22 2022 at 15:04)</a>:</h4>
<p>The HAPI UI responds:</p>
<div class="codehilite"><pre><span></span><code>HAPI UI:

date: Tue, 22 Mar 2022 14:43:33 GMT
x-request-id: 5Jme1mJHs3bk2jcJ
expires: 0
x-frame-options: DENY
strict-transport-security: max-age=31536000 ; includeSubDomains
pragma: no-cache
set-cookie: KelaAA010e9064=0108ec7f738becbecfd97736d2a4a3824e8fd4c4eca70170f94c54b506e79412cbd24f4e993f5d00a9dfb27452de7fff5c93c26305; Path=/; Domain=.fhirsandbox.kanta.fi; Secure; HTTPOnly
x-xss-protection: 1; mode=block
x-content-type-options: nosniff
content-location: https://fhirsandbox.kanta.fi/phr-resourceserver/baseR4/MedicationAdministration/692e9cbe-7d36-4c8a-9640-7cb28da5649b/_history/1
location: https://fhirsandbox.kanta.fi/phr-resourceserver/baseR4/MedicationAdministration/692e9cbe-7d36-4c8a-9640-7cb28da5649b/_history/1
etag: W/&quot;1&quot;
cache-control: no-cache, no-store, max-age=0, must-revalidate
content-language: en-US
</code></pre></div>



<a name="276300344"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179222-finnish%20PHR/topic/Problem%20with%20R4%20API/near/276300344" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aleksi Aho <a href="https://fhir.github.io/chat-archive/stream/179222-finnish-PHR/topic/Problem.20with.20R4.20API.html#276300344">(Mar 23 2022 at 08:23)</a>:</h4>
<p>Hi, we have made some changes. However, we weren't able to replicate the problem ourselves, so we weren't able to make sure the issue is fixed. Does it work now?</p>



<a name="276402595"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179222-finnish%20PHR/topic/Problem%20with%20R4%20API/near/276402595" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mikael Rinnetmäki <a href="https://fhir.github.io/chat-archive/stream/179222-finnish-PHR/topic/Problem.20with.20R4.20API.html#276402595">(Mar 23 2022 at 21:23)</a>:</h4>
<p>Seems to work now, thanks <span class="user-mention" data-user-id="222926">@Aleksi Aho</span>!</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
