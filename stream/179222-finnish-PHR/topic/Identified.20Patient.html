---
layout: page
title: "FHIR Chat  · Identified Patient · finnish PHR"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179222-finnish-PHR/index.html">finnish PHR</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179222-finnish-PHR/topic/Identified.20Patient.html">Identified Patient</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153902693"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179222-finnish%20PHR/topic/Identified%20Patient/near/153902693" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mikael Rinnetmäki <a href="https://fhir.github.io/chat-archive/stream/179222-finnish-PHR/topic/Identified.20Patient.html#153902693">(Aug 17 2017 at 12:54)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="194072">@Pirjo Vuorikallas</span> ! The authorization guide at <a href="http://www.kanta.fi/documents/12105/4106842/PHR+authorization/b2135f9f-5bfb-49d8-827e-4f5b44cdab2e" target="_blank" title="http://www.kanta.fi/documents/12105/4106842/PHR+authorization/b2135f9f-5bfb-49d8-827e-4f5b44cdab2e">http://www.kanta.fi/documents/12105/4106842/PHR+authorization/b2135f9f-5bfb-49d8-827e-4f5b44cdab2e</a> states that in Sandbox environment, using the Authorization code flow, <a href="http://Suomi.fi" target="_blank" title="http://Suomi.fi">Suomi.fi</a> e-Identification is not used and that the dummy identification can be bypassed by adding the request parameter "user_id" with a social security number. It's unclear what the value (that social security number) should be. How a developer can know which social security numbers have been mapped to users in the Sandbox environment? I.e, which are valid values for the parameter, to bypass the identification screen? Is there perhaps a way to set this value when creating patient resources?</p>



<a name="153903379"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179222-finnish%20PHR/topic/Identified%20Patient/near/153903379" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eeva Turkka <a href="https://fhir.github.io/chat-archive/stream/179222-finnish-PHR/topic/Identified.20Patient.html#153903379">(Aug 23 2017 at 10:02)</a>:</h4>
<p>There probably should be some sort of registry to share the patient ids between developers and we'll return to this.</p>
<p>Once you login with a official id that hasn't been used a mapping is automatically created and the patient is created to repository. The token response will contain this pseudonym of the patient in the sandbox. There is a mapping table of these ids, but that is not publicly available. The format of the patientid is should follow the pattern of Finnish social security numbers and because of that checksum parts above 900 should be used as they aren't used for real persons. The only problem is if the social security number is used and the patient resource is deleted (which can be done currently from the unauthorizing side) the mapping will be broken and in these cases either a new social security number can be picked or the mapping reseted.</p>



<a name="153903484"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179222-finnish%20PHR/topic/Identified%20Patient/near/153903484" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Harri Honko <a href="https://fhir.github.io/chat-archive/stream/179222-finnish-PHR/topic/Identified.20Patient.html#153903484">(Aug 24 2017 at 06:09)</a>:</h4>
<p>We needed a base patient to test our new observations, and in lack of Create operation on the HAPI went to trial-and-error with curl. We managed to create our own test patient (required value for gender, though not so in the cardinalities of the patient structuredef). I don't think the resulting _id we got with the 200OK was anything like a soc-sec #. Anyway, we can now use it.</p>



<a name="153903799"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179222-finnish%20PHR/topic/Identified%20Patient/near/153903799" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eeva Turkka <a href="https://fhir.github.io/chat-archive/stream/179222-finnish-PHR/topic/Identified.20Patient.html#153903799">(Aug 28 2017 at 05:23)</a>:</h4>
<p>The social security number will not be available through PHR, but if you look at the PHR OAuth guide and the section handling  professional applications when they request an the access token, they do send the social security number to PHR and in the response they  get that uuid. So the software will have that id available all the time it needs to use some patient's records in the PHR system.</p>
<p>I do think there needs to be some instructions for how this should be handles in the sandbox without the authorization to avoid confusion.</p>



<a name="153904772"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179222-finnish%20PHR/topic/Identified%20Patient/near/153904772" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jukka Pirinen <a href="https://fhir.github.io/chat-archive/stream/179222-finnish-PHR/topic/Identified.20Patient.html#153904772">(Sep 07 2017 at 06:38)</a>:</h4>
<p>I had same issue with SelfCarePlan  - it has also mandatory Patient reference. But if you can create a patient using curl, why can't you allow Create-operation with HAPI?</p>



<a name="153904783"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179222-finnish%20PHR/topic/Identified%20Patient/near/153904783" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jukka Pirinen <a href="https://fhir.github.io/chat-archive/stream/179222-finnish-PHR/topic/Identified.20Patient.html#153904783">(Sep 07 2017 at 09:55)</a>:</h4>
<p>Patient Create seems to be enabled now :)</p>



<a name="153904956"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179222-finnish%20PHR/topic/Identified%20Patient/near/153904956" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mikael Rinnetmäki <a href="https://fhir.github.io/chat-archive/stream/179222-finnish-PHR/topic/Identified.20Patient.html#153904956">(Sep 08 2017 at 08:08)</a>:</h4>
<p>I was able to create a patient through the authorization process, using a fake social security number. I was also able to log in with that patient on subsequent app launches. (This was with the old implementation, not the one deployed yesterday).</p>



<a name="153904958"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179222-finnish%20PHR/topic/Identified%20Patient/near/153904958" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eeva Turkka <a href="https://fhir.github.io/chat-archive/stream/179222-finnish-PHR/topic/Identified.20Patient.html#153904958">(Sep 08 2017 at 08:19)</a>:</h4>
<p>The Hapi UI had trouble rendering the CRUD page when no search operations were enabled, sorry about that :). Also the URL search parameter doesn't seem to be working there, but I did submit an issue to Hapi guthub about it.</p>



<a name="153915158"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179222-finnish%20PHR/topic/Identified%20Patient/near/153915158" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mikael Rinnetmäki <a href="https://fhir.github.io/chat-archive/stream/179222-finnish-PHR/topic/Identified.20Patient.html#153915158">(Oct 21 2017 at 04:55)</a>:</h4>
<p>Just a minor nitpick regarding what's returned by the userinfo endpoint:</p>
<div class="codehilite"><pre><span></span>{
    &quot;resourceType&quot;: &quot;Patient&quot;,
    &quot;id&quot;: &quot;3b8785e1-1902-4ebe-81da-dbf609f154dd&quot;,
    &quot;meta&quot;: {
        &quot;versionId&quot;: &quot;1&quot;,
        &quot;lastUpdated&quot;: &quot;2017-10-20T10:03:46.175+03:00&quot;,
        &quot;profile&quot;: [&quot;http:\/\/phr.kanta.fi\/StructureDefinition\/fiphr-patient-stu3&quot;]
    },
    &quot;language&quot;: &quot;fi&quot;,
    &quot;identifier&quot;: [{
        &quot;system&quot;: &quot;urn:ietf:rfc:3986&quot;,
        &quot;value&quot;: &quot;3b8785e1-1902-4ebe-81da-dbf609f154dd&quot;
    }],
    &quot;active&quot;: true,
    &quot;status&quot;: &quot;ok&quot;
}
</pre></div>


<p>Since the identifier system is <a href="https://www.ietf.org/rfc/rfc3986.txt" target="_blank" title="https://www.ietf.org/rfc/rfc3986.txt">RFC 3986</a>, I would have expected the identifier value to be a full URL, in this case <a href="https://fhirsandbox2.kanta.fi/phr-resourceserver/baseStu3/Patient/3b8785e1-1902-4ebe-81da-dbf609f154dd" target="_blank" title="https://fhirsandbox2.kanta.fi/phr-resourceserver/baseStu3/Patient/3b8785e1-1902-4ebe-81da-dbf609f154dd">https://fhirsandbox2.kanta.fi/phr-resourceserver/baseStu3/Patient/3b8785e1-1902-4ebe-81da-dbf609f154dd</a>.</p>



<a name="153915159"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179222-finnish%20PHR/topic/Identified%20Patient/near/153915159" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mikael Rinnetmäki <a href="https://fhir.github.io/chat-archive/stream/179222-finnish-PHR/topic/Identified.20Patient.html#153915159">(Oct 21 2017 at 04:56)</a>:</h4>
<p>Not a big thing by any means. :)</p>



<a name="153915249"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179222-finnish%20PHR/topic/Identified%20Patient/near/153915249" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mika Tuomainen <a href="https://fhir.github.io/chat-archive/stream/179222-finnish-PHR/topic/Identified.20Patient.html#153915249">(Oct 22 2017 at 21:15)</a>:</h4>
<p>If this resource instance is created by server (in authorization process), then there is a mistake in the Patient.identifier. It should be in form urn:uuid:49d62881-acab-486d-a08e-414d715463ea. </p>
<p>Check this: <a href="http://hl7.org/fhir/datatypes.html#Identifier" target="_blank" title="http://hl7.org/fhir/datatypes.html#Identifier">http://hl7.org/fhir/datatypes.html#Identifier</a><br>
"If the identifier value itself is naturally a globally unique URI (e.g. an OID, a UUID, or a URI with no trailing local part), then the system SHALL be "urn:ietf:rfc:3986", and the URI is in the value (OIDs and UUIDs using urn:oid: and urn:uuid: - see examples)."</p>
<p>The identifier used in Patient.identifier is UUID.</p>



<a name="153915329"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179222-finnish%20PHR/topic/Identified%20Patient/near/153915329" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mikael Rinnetmäki <a href="https://fhir.github.io/chat-archive/stream/179222-finnish-PHR/topic/Identified.20Patient.html#153915329">(Oct 23 2017 at 09:53)</a>:</h4>
<p><span class="user-mention" data-user-id="192558">@Mika Tuomainen</span> Thanks! Yes, the resource was created by the server during authentication.</p>



<a name="153915330"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179222-finnish%20PHR/topic/Identified%20Patient/near/153915330" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mikael Rinnetmäki <a href="https://fhir.github.io/chat-archive/stream/179222-finnish-PHR/topic/Identified.20Patient.html#153915330">(Oct 23 2017 at 09:54)</a>:</h4>
<p>I still wonder why you'd select the uuid syntax, even when <a href="https://fhirsandbox2.kanta.fi/phr-resourceserver/baseStu3/Patient/3b8785e1-1902-4ebe-81da-dbf609f154dd" target="_blank" title="https://fhirsandbox2.kanta.fi/phr-resourceserver/baseStu3/Patient/3b8785e1-1902-4ebe-81da-dbf609f154dd">https://fhirsandbox2.kanta.fi/phr-resourceserver/baseStu3/Patient/3b8785e1-1902-4ebe-81da-dbf609f154dd</a> clearly resolves too (the identifier is also the id).</p>



<a name="153915331"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179222-finnish%20PHR/topic/Identified%20Patient/near/153915331" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mikael Rinnetmäki <a href="https://fhir.github.io/chat-archive/stream/179222-finnish-PHR/topic/Identified.20Patient.html#153915331">(Oct 23 2017 at 09:55)</a>:</h4>
<p>But as said, not a big thing.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
