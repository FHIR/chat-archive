---
layout: page
title: "FHIR Chat  · Error 502420 · finnish PHR"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179222-finnish-PHR/index.html">finnish PHR</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179222-finnish-PHR/topic/Error.20502420.html">Error 502420</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="157796231"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179222-finnish%20PHR/topic/Error%20502420/near/157796231" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sulka Haro <a href="https://fhir.github.io/chat-archive/stream/179222-finnish-PHR/topic/Error.20502420.html#157796231">(Feb 07 2019 at 17:43)</a>:</h4>
<p>Hi! I'm trying to insert data to the sandbox and getting "Error 502420 Only identifier is supported" that refers to <a href="http://phr.kanta.fi/fiphr-cs-errorcodes" target="_blank" title="http://phr.kanta.fi/fiphr-cs-errorcodes">http://phr.kanta.fi/fiphr-cs-errorcodes</a>. Is the error code list downloadable somewhere? Is there some way to tell which element in the record the error is referring to? I've tried to read through the record and the profile and am having hard time figuring out what part of the data is considered invalid by the server and the error not identifying where the validation goes wrong is not helping. Halp! :D</p>



<a name="157842194"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179222-finnish%20PHR/topic/Error%20502420/near/157842194" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sulka Haro <a href="https://fhir.github.io/chat-archive/stream/179222-finnish-PHR/topic/Error.20502420.html#157842194">(Feb 08 2019 at 08:02)</a>:</h4>
<p>Trying to insert the same object today through the HAPI UI gives error 501440, with diagnostic "Data is invalidnull". If I try to insert the record with an invalid patient reference, the server gives the correct error message that the patient is missing, so looks like the data is decoded correctly and at least some processing happens on it. <a href="http://hapi.fhir.org" target="_blank" title="http://hapi.fhir.org">http://hapi.fhir.org</a> happily ingests the object, but obviously doesn't have as much validation in place.</p>



<a name="157844052"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179222-finnish%20PHR/topic/Error%20502420/near/157844052" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sulka Haro <a href="https://fhir.github.io/chat-archive/stream/179222-finnish-PHR/topic/Error.20502420.html#157844052">(Feb 08 2019 at 08:45)</a>:</h4>
<p>Ok did some testing and found out that I can only insert Observations if there's a Patient record in the sandbox that has an id _and_ identifier that are both in UUID format and match each other, and the Observation then refers to the Patient with this UUID. Simultaneously I can create Patient records that do not enforce this use of UUIDs. I tested creating a Patient with a numeric ID and UUID Identifier and referring to that record with the Patient ID causes the same null error to happen, while using the Identifier reference fails as expected because no Patient with the ID exists.</p>



<a name="157844115"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179222-finnish%20PHR/topic/Error%20502420/near/157844115" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sulka Haro <a href="https://fhir.github.io/chat-archive/stream/179222-finnish-PHR/topic/Error.20502420.html#157844115">(Feb 08 2019 at 08:46)</a>:</h4>
<p>I've previously inserted MedicationAdministrations to the sandbox and those didn't seem to have this UUID requirement - the sandbox happily allowed creating a Patient without an identifier element and inserting MedicationAdministrations that just used the Patient record id reference worked as expected.</p>



<a name="157847928"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179222-finnish%20PHR/topic/Error%20502420/near/157847928" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sulka Haro <a href="https://fhir.github.io/chat-archive/stream/179222-finnish-PHR/topic/Error.20502420.html#157847928">(Feb 08 2019 at 10:00)</a>:</h4>
<p>Ok now that the sandbox HAPI UI accepts the records, the REST API still gives the following error: "error":{"data":{"resourceType":"OperationOutcome","issue":[{"severity":"error","code":"processing","details":{"coding":[{"system":"http://phr.kanta.fi/fiphr-cs-errorcodes","code":"502420"}],"text":"Only identifier is supported"},"diagnostics":"Only identifier is supported"}]</p>



<a name="157847950"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179222-finnish%20PHR/topic/Error%20502420/near/157847950" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sulka Haro <a href="https://fhir.github.io/chat-archive/stream/179222-finnish-PHR/topic/Error.20502420.html#157847950">(Feb 08 2019 at 10:00)</a>:</h4>
<p>I can take the record returned in the error message from the REST API and copy paste it to the HAPI UI and the record is accepted there</p>



<a name="157848083"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179222-finnish%20PHR/topic/Error%20502420/near/157848083" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sulka Haro <a href="https://fhir.github.io/chat-archive/stream/179222-finnish-PHR/topic/Error.20502420.html#157848083">(Feb 08 2019 at 10:03)</a>:</h4>
<p>Sample record for testing here - this works when pushed from HAPI, fails when inserted over REST</p>
<p>{"resourceType":"Observation","meta":{"profile":["http://phr.kanta.fi/StructureDefinition/fiphr-bloodglucose-stu3-modified20190128"]},"language":"en","text":{"status":"extensions","div":"&lt;div xmlns=\"http://www.w3.org/1999/xhtml\"&gt;Code: Home glucometer reading&lt;br /&gt;Time: 2015-08-02T23:49:00.000Z&lt;br /&gt;Result: 4.6 mmol/l&lt;/div&gt;"},"extension":[{"url":"http://phr.kanta.fi/StructureDefinition/fiphr-unsignedint","valueUnsignedInt":8}],"identifier":[{"system":"urn:ietf:rfc:3986","value":"urn:uuid:fc28ad6f-55eb-4588-9bdb-0cc000317bac"}],"status":"final","category":[{"coding":[{"system":"http://hl7.org/fhir/observation-category","code":"vital-signs"}]}],"code":{"coding":[{"system":"http://loinc.org","code":"14743-9","display":"Glucose [Moles/volume] in Capillary blood by Glucometer"}]},"subject":{"reference":"Patient/fff689fc-2b7b-11e9-970c-0785ec79e4fe"},"effectiveDateTime":"2015-08-02T23:49:00.000Z","issued":"2015-08-02T23:49:00.000Z","performer":[{"reference":"Patient/fff689fc-2b7b-11e9-970c-0785ec79e4fe"}],"valueQuantity":{"value":4.6,"unit":"mmol/l","system":"http://unitsofmeasure.org","code":"mmol/L"}}</p>



<a name="157848238"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179222-finnish%20PHR/topic/Error%20502420/near/157848238" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eeva Turkka <a href="https://fhir.github.io/chat-archive/stream/179222-finnish-PHR/topic/Error.20502420.html#157848238">(Feb 08 2019 at 10:06)</a>:</h4>
<p>Ok, this seems to be a separate issue, we'll investigate it.</p>



<a name="157848382"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179222-finnish%20PHR/topic/Error%20502420/near/157848382" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eeva Turkka <a href="https://fhir.github.io/chat-archive/stream/179222-finnish-PHR/topic/Error.20502420.html#157848382">(Feb 08 2019 at 10:09)</a>:</h4>
<p>Did you use the unauthorized sandbox in the REST call as well?</p>



<a name="157848586"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179222-finnish%20PHR/topic/Error%20502420/near/157848586" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sulka Haro <a href="https://fhir.github.io/chat-archive/stream/179222-finnish-PHR/topic/Error.20502420.html#157848586">(Feb 08 2019 at 10:13)</a>:</h4>
<p>Yes, testing the unathorized REST</p>



<a name="157848846"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179222-finnish%20PHR/topic/Error%20502420/near/157848846" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sulka Haro <a href="https://fhir.github.io/chat-archive/stream/179222-finnish-PHR/topic/Error.20502420.html#157848846">(Feb 08 2019 at 10:18)</a>:</h4>
<p>Feel free to ping me if you need any additional sample data or other details :)</p>



<a name="157849544"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179222-finnish%20PHR/topic/Error%20502420/near/157849544" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eeva Turkka <a href="https://fhir.github.io/chat-archive/stream/179222-finnish-PHR/topic/Error.20502420.html#157849544">(Feb 08 2019 at 10:33)</a>:</h4>
<p>It is probably something to do with the conditional create header (the If-None-Exist:) of the request, we'll get back to this.</p>



<a name="157850441"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179222-finnish%20PHR/topic/Error%20502420/near/157850441" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sulka Haro <a href="https://fhir.github.io/chat-archive/stream/179222-finnish-PHR/topic/Error.20502420.html#157850441">(Feb 08 2019 at 10:50)</a>:</h4>
<p>Ah yes, I disabled the conditional create header and the creation now works. Is there a plan to support the header? That'd speed up inserts a lot, compared to querying for existence of each element separately. Also now that the data creation works, the API performance is on the slow side. What's the expected speed at which the production environment works at, compared to the sandbox?</p>



<a name="157851856"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179222-finnish%20PHR/topic/Error%20502420/near/157851856" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eeva Turkka <a href="https://fhir.github.io/chat-archive/stream/179222-finnish-PHR/topic/Error.20502420.html#157851856">(Feb 08 2019 at 11:18)</a>:</h4>
<p>I actually checked and it should work if you don't poist the Observation? -part in the beginning: <a href="https://www.hl7.org/fhir/http.html#ccreate" target="_blank" title="https://www.hl7.org/fhir/http.html#ccreate">https://www.hl7.org/fhir/http.html#ccreate</a></p>



<a name="157851998"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179222-finnish%20PHR/topic/Error%20502420/near/157851998" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eeva Turkka <a href="https://fhir.github.io/chat-archive/stream/179222-finnish-PHR/topic/Error.20502420.html#157851998">(Feb 08 2019 at 11:20)</a>:</h4>
<p>The Error code system is at Simplifier: <a href="https://simplifier.net/finnishphr/fiphr-cs-errorcodes" target="_blank" title="https://simplifier.net/finnishphr/fiphr-cs-errorcodes">https://simplifier.net/finnishphr/fiphr-cs-errorcodes</a></p>



<a name="157852753"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179222-finnish%20PHR/topic/Error%20502420/near/157852753" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sulka Haro <a href="https://fhir.github.io/chat-archive/stream/179222-finnish-PHR/topic/Error.20502420.html#157852753">(Feb 08 2019 at 11:32)</a>:</h4>
<p>Yay now it's going through. Looks like the <a href="http://hapi.fhir.org" target="_blank" title="http://hapi.fhir.org">http://hapi.fhir.org</a> has a more lenient parser for the parameter, as they seem to accept both formats</p>



<a name="157853432"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179222-finnish%20PHR/topic/Error%20502420/near/157853432" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sulka Haro <a href="https://fhir.github.io/chat-archive/stream/179222-finnish-PHR/topic/Error.20502420.html#157853432">(Feb 08 2019 at 11:44)</a>:</h4>
<p>Oops that was a bit premature. If I drop the Observation? string from the header, the request doesn't error out anymore, but it also doesn't work in terms of deduplicating entries. The behavior I'm expecting is the one at <a href="http://hapi.fhir.org" target="_blank" title="http://hapi.fhir.org">hapi.fhir.org</a>, which reports HTTP 200 for entries that match the query and HTTP 201 on creation. In FIPHR sandbox re-uploading the same record just creates it again, so looks like querying Observations with the application generated Identifier doesn't work as expected?</p>



<a name="157854141"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179222-finnish%20PHR/topic/Error%20502420/near/157854141" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eeva Turkka <a href="https://fhir.github.io/chat-archive/stream/179222-finnish-PHR/topic/Error.20502420.html#157854141">(Feb 08 2019 at 11:58)</a>:</h4>
<p>With the full format it should work as expected: If-None-Exist: identifier=urn:ietf:rfc:3986|31e656d9-aca1-438d-9f09-3a5fa4109daf<br>
. The syntax without the system is correct as well as to match to the value, but that one doesn't seem to work.</p>



<a name="157854958"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179222-finnish%20PHR/topic/Error%20502420/near/157854958" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eeva Turkka <a href="https://fhir.github.io/chat-archive/stream/179222-finnish-PHR/topic/Error.20502420.html#157854958">(Feb 08 2019 at 12:14)</a>:</h4>
<p>Just to make sure: you are not talking about posts at around 13:40 creating duplicates to earlier ones? Because those have wonky identifier headers (and our tester reports that the identifier without system should work just fine).</p>



<a name="157855166"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179222-finnish%20PHR/topic/Error%20502420/near/157855166" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sulka Haro <a href="https://fhir.github.io/chat-archive/stream/179222-finnish-PHR/topic/Error.20502420.html#157855166">(Feb 08 2019 at 12:19)</a>:</h4>
<p>Yup some uploads had wonky headers. :) I can't figure out how to get urns work though so must still be missing something? If I send data to <a href="http://hapi.fhir.org" target="_blank" title="http://hapi.fhir.org">hapi.fhir.org</a> with a valid urn such as "urn:observationref:12345" the system deduplicates the Observations as expected and I can query the objects with the value. However it looks like the fiphr sandbox seems to accept any urn but I can only get uuid urns to work as expected (as in, queries work). Is your solution to leave out the identifier system altogether and just use a regular string id (that obviously needs to be unique)?</p>



<a name="157855770"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179222-finnish%20PHR/topic/Error%20502420/near/157855770" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eeva Turkka <a href="https://fhir.github.io/chat-archive/stream/179222-finnish-PHR/topic/Error.20502420.html#157855770">(Feb 08 2019 at 12:30)</a>:</h4>
<p>I'm not sure I understand? </p>
<p>The value of the indentifier-query parameter should match the full value of the identifier the resource has. The same value should work for both searches and conditional create, as in GET <a href="http://fhirsandbox.kanta.fi/phr-resourceserver/baseStu3/Observation?identifier={value" target="_blank" title="http://fhirsandbox.kanta.fi/phr-resourceserver/baseStu3/Observation?identifier={value">http://fhirsandbox.kanta.fi/phr-resourceserver/baseStu3/Observation?identifier={value</a> of identifier}&amp;patient=Patient/{pseudonym here}&amp;_pretty=true .  I can see two posts and using their identifier, I can only find one resource with the search?</p>



<a name="157863976"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179222-finnish%20PHR/topic/Error%20502420/near/157863976" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sulka Haro <a href="https://fhir.github.io/chat-archive/stream/179222-finnish-PHR/topic/Error.20502420.html#157863976">(Feb 08 2019 at 14:45)</a>:</h4>
<p>Ok got forward with your pointer :) I suspect what's currently blocking me is the server is decoding the HTTP header differently from the GET query. I verified the latest query string I'm posting to the REST API can be copy-pasted directly to the browser and it returns the previously save entries. However posting this header to the REST API as the If-None-Exist header, the server returns to the old behavior of returnin an error: issue":[{"severity":"error","code":"processing","details":{"coding":[{"system":"http://phr.kanta.fi/fiphr-cs-errorcodes","code":"502420"}],"text":"Only identifier is supported"},"diagnostics":"Only identifier is supported"}]},"status":400"</p>
<p>The last header I sent was  patient=Patient/fff689fc-2b7b-11e9-970c-0785ec79e4fe&amp;identifier=urn:ietf:rfc:3986|urn%3Aobservationref%3AU01CR1BhdGllbnQvZmZmNjg5ZmMtMmI3Yi0xMWU5LTk3MGMtMDc4NWVjNzllNGZlOkJheWVyNjMwMC0xQzAwQTAzOjIwMTQtMTItMjRUMTE6MTM6MDA%3D </p>
<p>GETint <a href="http://fhirsandbox.kanta.fi/phr-resourceserver/baseStu3/Observation?patient=fff689fc-2b7b-11e9-970c-0785ec79e4fe%27&amp;identifier=urn%3Aietf%3Arfc%3A3986%7Curn%3Aobservationref%3AU01CR1BhdGllbnQvZmZmNjg5ZmMtMmI3Yi0xMWU5LTk3MGMtMDc4NWVjNzllNGZlOkJheWVyNjMwMC0xQzAwQTAzOjIwMTQtMTItMjRUMTE6MTM6MDA%3D&amp;_pretty=true" target="_blank" title="http://fhirsandbox.kanta.fi/phr-resourceserver/baseStu3/Observation?patient=fff689fc-2b7b-11e9-970c-0785ec79e4fe%27&amp;identifier=urn%3Aietf%3Arfc%3A3986%7Curn%3Aobservationref%3AU01CR1BhdGllbnQvZmZmNjg5ZmMtMmI3Yi0xMWU5LTk3MGMtMDc4NWVjNzllNGZlOkJheWVyNjMwMC0xQzAwQTAzOjIwMTQtMTItMjRUMTE6MTM6MDA%3D&amp;_pretty=true">http://fhirsandbox.kanta.fi/phr-resourceserver/baseStu3/Observation?patient=fff689fc-2b7b-11e9-970c-0785ec79e4fe%27&amp;identifier=urn%3Aietf%3Arfc%3A3986%7Curn%3Aobservationref%3AU01CR1BhdGllbnQvZmZmNjg5ZmMtMmI3Yi0xMWU5LTk3MGMtMDc4NWVjNzllNGZlOkJheWVyNjMwMC0xQzAwQTAzOjIwMTQtMTItMjRUMTE6MTM6MDA%3D&amp;_pretty=true</a> returns multiple Observations</p>



<a name="158014233"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179222-finnish%20PHR/topic/Error%20502420/near/158014233" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sulka Haro <a href="https://fhir.github.io/chat-archive/stream/179222-finnish-PHR/topic/Error.20502420.html#158014233">(Feb 11 2019 at 08:13)</a>:</h4>
<p>Converted to use stable UUIDs for easier readablity here. :) With UUIDs, the following query strings all find Observations in GET requests:</p>
<p>identifier=urn:ietf:rfc:3986|urn:uuid:b2c7ba51-3579-5bcb-a9a3-9ff0cc017a7e&amp;patient=Patient/fff689fc-2b7b-11e9-970c-0785ec79e4fe</p>
<p>identifier=urn:uuid:b2c7ba51-3579-5bcb-a9a3-9ff0cc017a7e&amp;patient=Patient/fff689fc-2b7b-11e9-970c-0785ec79e4fe</p>
<p>identifier=urn:uuid:b2c7ba51-3579-5bcb-a9a3-9ff0cc017a7e&amp;patient=fff689fc-2b7b-11e9-970c-0785ec79e4fe</p>
<p>However none of these seem to work as a If-None-Exist header in the FIPHR sandbox. When testing against <a href="http://hapi.fhir.org" target="_blank" title="http://hapi.fhir.org">hapi.fhir.org</a>, all these three formats seem to work both in GET requests and as If-None-Exist headers, so wondering what I'm missing...</p>



<a name="158111523"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179222-finnish%20PHR/topic/Error%20502420/near/158111523" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eeva Turkka <a href="https://fhir.github.io/chat-archive/stream/179222-finnish-PHR/topic/Error.20502420.html#158111523">(Feb 12 2019 at 11:54)</a>:</h4>
<p>Ok, thank you very much for the additional details - we'll look into this and refine the documentation about encodings. The different formats for the search parameters seem valid and equivalent at first glance (system|value or just value and the patient reference in the format of reference or as the unique id). The header itself needs to be: If-None-Exist: identifier=urn:uuid:317a56a9-147a-4809-9ef8-6410f7324bb2 - without the ? in front of the identifier and no patient parameter in there. The patient is required search parameter so that's why it was in my example query.</p>



<a name="158427407"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179222-finnish%20PHR/topic/Error%20502420/near/158427407" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sulka Haro <a href="https://fhir.github.io/chat-archive/stream/179222-finnish-PHR/topic/Error.20502420.html#158427407">(Feb 13 2019 at 10:02)</a>:</h4>
<p>Yay one step forward: the deduplication works with the UUID query string, but I'm getting an unexpected HTTP response. I've uploaded <a href="http://fhirsandbox.kanta.fi/phr-resourceserver/baseStu3/Observation?identifier=urn:uuid:5e0d6dd2-5e46-570b-ac85-044ffc518333&amp;patient=Patient/fff689fc-2b7b-11e9-970c-0785ec79e4fe" target="_blank" title="http://fhirsandbox.kanta.fi/phr-resourceserver/baseStu3/Observation?identifier=urn:uuid:5e0d6dd2-5e46-570b-ac85-044ffc518333&amp;patient=Patient/fff689fc-2b7b-11e9-970c-0785ec79e4fe">http://fhirsandbox.kanta.fi/phr-resourceserver/baseStu3/Observation?identifier=urn:uuid:5e0d6dd2-5e46-570b-ac85-044ffc518333&amp;patient=Patient/fff689fc-2b7b-11e9-970c-0785ec79e4fe</a> many times now and querying it with the identifier only returns one result, as expected with If-None-Exist working. However the server responds with HTTP 201 Created each time, where I was expecting HTTP 201 Created on the first actual insert and HTTP 200 OK on the subsequent insert attempts, as per <a href="http://hl7.org/fhir/STU3/http.html" target="_blank" title="http://hl7.org/fhir/STU3/http.html">http://hl7.org/fhir/STU3/http.html</a>, which states "The server ignore the post and returns 200 OK" for correct behavior in case there's a single match to on the If-None-Exist query.</p>



<a name="158428964"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179222-finnish%20PHR/topic/Error%20502420/near/158428964" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eeva Turkka <a href="https://fhir.github.io/chat-archive/stream/179222-finnish-PHR/topic/Error.20502420.html#158428964">(Feb 13 2019 at 10:25)</a>:</h4>
<p>Great to hear that you got the deduplication working. I added a ticket about the wrong response code!</p>



<a name="168110352"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179222-finnish%20PHR/topic/Error%20502420/near/168110352" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anna Korpela <a href="https://fhir.github.io/chat-archive/stream/179222-finnish-PHR/topic/Error.20502420.html#168110352">(Jun 14 2019 at 06:26)</a>:</h4>
<p>The response code has been fixed to the version that was updated to our customer testing environment this week.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
