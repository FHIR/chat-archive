---
layout: page
title: "FHIR Chat  · CRD prefetch · Da Vinci"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179283-Da-Vinci/index.html">Da Vinci</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179283-Da-Vinci/topic/CRD.20prefetch.html">CRD prefetch</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153984339"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179283-Da%20Vinci/topic/CRD%20prefetch/near/153984339" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andy Gregorowicz <a href="https://fhir.github.io/chat-archive/stream/179283-Da-Vinci/topic/CRD.20prefetch.html#153984339">(Aug 09 2018 at 17:57)</a>:</h4>
<p>Just to make sure that I understand the approach to using prefetch. If we wanted to provide everything that the payer would need in the initial request, we would have the following prefetch query (white space used for readability):</p>
<div class="codehilite"><pre><span></span>ServiceRequest?id={{context.orders.ServiceRequest.id}}&amp;_include=ServiceRequest:insurance
  &amp;_include:recurse=Coverage:payor
  &amp;_include=ServiceRequest:performer:PractitionerRole
  &amp;_include:recurse=PractitionerRole:practitioner
  &amp;_include:recurse=PractitionerRole:location
</pre></div>


<p>In this case, we would be including information about the payer by ServiceRequest.insurance -&gt; Coverage.payor -&gt; Organization. We would use PractitionerRole to record the provider requested to perform the service as well as the location for the service to be performed at.</p>
<p>Is this the expected approach?</p>



<a name="153984381"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179283-Da%20Vinci/topic/CRD%20prefetch/near/153984381" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179283-Da-Vinci/topic/CRD.20prefetch.html#153984381">(Aug 09 2018 at 18:26)</a>:</h4>
<p>Yes, that's probably the route we'll go.  It reduces the redundancy and keeps the number of variables passed back to a minimum</p>



<a name="153984383"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179283-Da%20Vinci/topic/CRD%20prefetch/near/153984383" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andy Gregorowicz <a href="https://fhir.github.io/chat-archive/stream/179283-Da-Vinci/topic/CRD.20prefetch.html#153984383">(Aug 09 2018 at 18:28)</a>:</h4>
<p>OK. The only downside that I'm not sure we can get around is that the ServiceRequest will also be returned in the prefetch. It will be a duplicate of what is in <code>context.orders</code>. I don't know of a way to get around that using FHIR search. We may just have to live with it.</p>



<a name="153984395"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179283-Da%20Vinci/topic/CRD%20prefetch/near/153984395" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179283-Da-Vinci/topic/CRD.20prefetch.html#153984395">(Aug 09 2018 at 18:52)</a>:</h4>
<p>Yeah.  It's not optimal, but the alternative is a much more complex context variable approach.  It's also a bit messy in that the same Coverages, Practitioners, etc. could be present in multiple variables - some in the MedicationRequest results, some in the ServiceRequest results, some in the DeviceRequest results, etc.  However, it'll work and it requires the least imposition on the existing capabilities, so it's a reasonable starting point.  After connectathon we can figure out whether more/different is needed.</p>



<a name="153984404"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179283-Da%20Vinci/topic/CRD%20prefetch/near/153984404" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179283-Da-Vinci/topic/CRD.20prefetch.html#153984404">(Aug 09 2018 at 19:01)</a>:</h4>
<p><span class="user-mention" data-user-id="191401">@Eric Haas</span> I don't know what _config.yml is</p>



<a name="153984427"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179283-Da%20Vinci/topic/CRD%20prefetch/near/153984427" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andy Gregorowicz <a href="https://fhir.github.io/chat-archive/stream/179283-Da-Vinci/topic/CRD.20prefetch.html#153984427">(Aug 09 2018 at 19:40)</a>:</h4>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> Agree. We can go with what we have now. In the future, it seems like it would be nice if CDS Hooks had a way to let you in prefetch resolve a reference from a resource in the context. It's a further complication on the template syntax though (as you mention).</p>



<a name="153984429"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179283-Da%20Vinci/topic/CRD%20prefetch/near/153984429" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179283-Da-Vinci/topic/CRD.20prefetch.html#153984429">(Aug 09 2018 at 19:44)</a>:</h4>
<p>Yes.  The ideal would be able to point into references and amalgamate them across resource types even if the paths are different.  That'd be a complex beast to describe though.  And the CDS Hook fallback is "just write the queries you want and run them".  The more complicated we make stuff, the more pushback there'll be.</p>



<a name="153984471"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179283-Da%20Vinci/topic/CRD%20prefetch/near/153984471" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179283-Da-Vinci/topic/CRD.20prefetch.html#153984471">(Aug 09 2018 at 20:20)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span>  the Jekyll config file : <a href="https://jekyllrb.com/docs/configuration/" target="_blank" title="https://jekyllrb.com/docs/configuration/">https://jekyllrb.com/docs/configuration/</a></p>



<a name="153984508"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179283-Da%20Vinci/topic/CRD%20prefetch/near/153984508" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179283-Da-Vinci/topic/CRD.20prefetch.html#153984508">(Aug 09 2018 at 21:04)</a>:</h4>
<p>The IG publisher doesn't touch that</p>



<a name="153984516"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179283-Da%20Vinci/topic/CRD%20prefetch/near/153984516" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179283-Da-Vinci/topic/CRD.20prefetch.html#153984516">(Aug 09 2018 at 21:16)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span>   OK I thought maybe is overridden since it doesn't seem to do anything for me when like when I tried to use it for global parameters like baseurl</p>



<a name="153984522"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179283-Da%20Vinci/topic/CRD%20prefetch/near/153984522" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179283-Da-Vinci/topic/CRD.20prefetch.html#153984522">(Aug 09 2018 at 22:01)</a>:</h4>
<p>It may just not be 'visible' to Jekyll.  I'll try to play with it this weekend.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
