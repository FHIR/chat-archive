---
layout: page
title: "FHIR Chat  · Provenance to capture V2 to FHIR conversion · v2 to FHIR"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179188-v2-to-FHIR/index.html">v2 to FHIR</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179188-v2-to-FHIR/topic/Provenance.20to.20capture.20V2.20to.20FHIR.20conversion.html">Provenance to capture V2 to FHIR conversion</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="161903521"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179188-v2%20to%20FHIR/topic/Provenance%20to%20capture%20V2%20to%20FHIR%20conversion/near/161903521" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rik Smithies <a href="https://fhir.github.io/chat-archive/stream/179188-v2-to-FHIR/topic/Provenance.20to.20capture.20V2.20to.20FHIR.20conversion.html#161903521">(Mar 27 2019 at 21:49)</a>:</h4>
<p>When converting an observation from a V2 message to a FHIR resource would the Provenance resource to record what happened be something like this:</p>
<div class="codehilite"><pre><span></span>&lt;Provenance xmlns=&quot;http://hl7.org/fhir&quot;&gt;
    &lt;target&gt;
        &lt;reference value=&quot;Observation/theObservationFromMessage&quot;/&gt;
    &lt;/target&gt;
    &lt;recorded value=&quot;2019-03-27T21:11:24+00:00&quot;/&gt;
    &lt;activity&gt;
        &lt;coding&gt;
            &lt;system value=&quot;http://terminology.hl7.org/CodeSystem/v3-DataOperation&quot;/&gt;
            &lt;code value=&quot;CREATE&quot;/&gt;
        &lt;/coding&gt;
    &lt;/activity&gt;
    &lt;agent&gt;
        &lt;type&gt;
            &lt;coding&gt;
                &lt;system value=&quot;http://terminology.hl7.org/CodeSystem/provenance-participant-type&quot;/&gt;
                &lt;code value=&quot;assembler&quot;/&gt;
            &lt;/coding&gt;
        &lt;/type&gt;
        &lt;who&gt;
            &lt;reference value=&quot;Device/theSoftwareThatConverted&quot;/&gt;
        &lt;/who&gt;
    &lt;/agent&gt;
    &lt;entity&gt;
        &lt;role value=&quot;source&quot;/&gt;
        &lt;what&gt;
            &lt;reference value=&quot;DocumentReference/theOriginalFile&quot;/&gt;
        &lt;/what&gt;
    &lt;/entity&gt;
&lt;/Provenance&gt;
</pre></div>


<p>Note the use of agent.type = "assembler". <br>
This <a href="http://hl7.org/fhir/provenance.html#6.3.4.5" target="_blank" title="http://hl7.org/fhir/provenance.html#6.3.4.5">http://hl7.org/fhir/provenance.html#6.3.4.5</a><br>
says to use agent.<em>role</em> of assembler, but that seems to be a value from the value set used by agent.type not agent.role.</p>
<p>(This does relate to the recent thread <a href="#narrow/stream/179188-v2-" title="#narrow/stream/179188-v2-">https://chat.fhir.org/#narrow/stream/179188-v2-</a><br>
to.20FHIR/topic/v2.20version.20in.20a.20FHIR.20resource<br>
but that was getting a bit muddled)</p>



<a name="161948721"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179188-v2%20to%20FHIR/topic/Provenance%20to%20capture%20V2%20to%20FHIR%20conversion/near/161948721" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Craig Newman <a href="https://fhir.github.io/chat-archive/stream/179188-v2-to-FHIR/topic/Provenance.20to.20capture.20V2.20to.20FHIR.20conversion.html#161948721">(Mar 28 2019 at 12:53)</a>:</h4>
<p>I documented some of that discussion and my own (amateur) thoughts at <a href="https://confluence.hl7.org/display/OO/v2-to-FHIR+Provenance" target="_blank" title="https://confluence.hl7.org/display/OO/v2-to-FHIR+Provenance">https://confluence.hl7.org/display/OO/v2-to-FHIR+Provenance</a> but they look pretty close to what you came up with. I was thinking a single "genera transformation" Provenance resource for the whole transform of a v2 message to a FHIR bundle, so I had .target pointing to all the resources in the bundle (although I suppose it could be the Bundle itself). I'm not sure exactly what you are doing, so just pointing to the Observation resource might work if you're picking pieces from the message. I didn't propose a value for .activity because I didn't really like any of the values for a transformation. I suppose we could extend the value set with something that better indicates a format change. Finally, I thought .agent.who might either be a Device or an Organization I think both could make sense (the Organization might be more useful to a human looking at the resource).</p>



<a name="161967611"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179188-v2%20to%20FHIR/topic/Provenance%20to%20capture%20V2%20to%20FHIR%20conversion/near/161967611" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179188-v2-to-FHIR/topic/Provenance.20to.20capture.20V2.20to.20FHIR.20conversion.html#161967611">(Mar 28 2019 at 16:11)</a>:</h4>
<p>I think .target should point at ALL of the resources that are created or updated. Some might argue that it should also point at those that were extracted and found to already exist in that current form.<br>
How about "Derivation" for the activity?  -- this is what I used in IHE for creating FHIR resources from decomposing of CDA.  <a href="https://github.com/IHE/fhir/blob/master/StructureDefinition/IHE_QEDm_Provenance.xml" target="_blank" title="https://github.com/IHE/fhir/blob/master/StructureDefinition/IHE_QEDm_Provenance.xml">https://github.com/IHE/fhir/blob/master/StructureDefinition/IHE_QEDm_Provenance.xml</a></p>



<a name="161967995"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179188-v2%20to%20FHIR/topic/Provenance%20to%20capture%20V2%20to%20FHIR%20conversion/near/161967995" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179188-v2-to-FHIR/topic/Provenance.20to.20capture.20V2.20to.20FHIR.20conversion.html#161967995">(Mar 28 2019 at 16:16)</a>:</h4>
<p><span class="user-mention" data-user-id="191651">@Rik Smithies</span> can you enter a CR to fix the Provenance text in 6.3.4.5?  Indeed I think what you are doing here should be specifically mentioned in that section. It was originally written in 'theory'. We now have more to leverage. I would very much like to point at this V2 to FHIR profile in that section on the Provenance page. So would also welcome a CR to make that happen.</p>



<a name="162287254"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179188-v2%20to%20FHIR/topic/Provenance%20to%20capture%20V2%20to%20FHIR%20conversion/near/162287254" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rik Smithies <a href="https://fhir.github.io/chat-archive/stream/179188-v2-to-FHIR/topic/Provenance.20to.20capture.20V2.20to.20FHIR.20conversion.html#162287254">(Apr 01 2019 at 23:02)</a>:</h4>
<p><span class="user-mention" data-user-id="192758">@Craig Newman</span> <span class="user-mention" data-user-id="191404">@John Moehrke</span>  thanks guys. Yes I did intend to have "target" point to all the converted resources. In fact my original had that - I just wanted the example to be nice and small. I found the role "assembler" to be strange and unintuitive, but don't have a big problem with it (I assume some precedent to it). The resources are being Created, albeit as a conversion of or derivation from  something else, so CREATE does seem right. The presence of the "source" entity implies its a conversion, though it's a little hard to work that out.</p>



<a name="162287273"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179188-v2%20to%20FHIR/topic/Provenance%20to%20capture%20V2%20to%20FHIR%20conversion/near/162287273" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rik Smithies <a href="https://fhir.github.io/chat-archive/stream/179188-v2-to-FHIR/topic/Provenance.20to.20capture.20V2.20to.20FHIR.20conversion.html#162287273">(Apr 01 2019 at 23:03)</a>:</h4>
<p>John, yes I will add that CR</p>



<a name="162287470"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179188-v2%20to%20FHIR/topic/Provenance%20to%20capture%20V2%20to%20FHIR%20conversion/near/162287470" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rik Smithies <a href="https://fhir.github.io/chat-archive/stream/179188-v2-to-FHIR/topic/Provenance.20to.20capture.20V2.20to.20FHIR.20conversion.html#162287470">(Apr 01 2019 at 23:06)</a>:</h4>
<p>Interesting point about "refreshing" a resource that already exists in the same form. There is no actual change in that record, but there is some provenance nevertheless, that it was again found to be the correct state (according to the new data). I think that is worth preserving.</p>



<a name="162293133"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179188-v2%20to%20FHIR/topic/Provenance%20to%20capture%20V2%20to%20FHIR%20conversion/near/162293133" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Church <a href="https://fhir.github.io/chat-archive/stream/179188-v2-to-FHIR/topic/Provenance.20to.20capture.20V2.20to.20FHIR.20conversion.html#162293133">(Apr 02 2019 at 00:49)</a>:</h4>
<p>I've encountered an interesting case where someone processing v2 messages wanted to be able to represent an update (e.g. to patient demographic data or admission status) that was received out of order when other messages had already made it moot, so there was no update. It could be valuable information to record that the system did receive and process the message - whether that's recorded in a provenance, or resource history, or some out of band mechanism could be a tricky decision.</p>



<a name="162471775"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179188-v2%20to%20FHIR/topic/Provenance%20to%20capture%20V2%20to%20FHIR%20conversion/near/162471775" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rik Smithies <a href="https://fhir.github.io/chat-archive/stream/179188-v2-to-FHIR/topic/Provenance.20to.20capture.20V2.20to.20FHIR.20conversion.html#162471775">(Apr 03 2019 at 21:32)</a>:</h4>
<p>added CR <a href="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=20663" target="_blank" title="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=20663">GF#20663</a></p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
