---
layout: page
title: "FHIR Chat  · Spreadsheets and ConceptMaps · v2 to FHIR"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179188-v2-to-FHIR/index.html">v2 to FHIR</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179188-v2-to-FHIR/topic/Spreadsheets.20and.20ConceptMaps.html">Spreadsheets and ConceptMaps</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="183793019"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179188-v2%20to%20FHIR/topic/Spreadsheets%20and%20ConceptMaps/near/183793019" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hans Buitendijk <a href="https://fhir.github.io/chat-archive/stream/179188-v2-to-FHIR/topic/Spreadsheets.20and.20ConceptMaps.html#183793019">(Dec 18 2019 at 21:38)</a>:</h4>
<p>During the discussions we agreed that we want to explore how to express the current Google Spreadsheets (master list is here: <a href="https://docs.google.com/spreadsheets/d/1PaFYPSSq4oplTvw_4OgOn6h2Bs_CMvCAU9CqC4tPBgk/edit#gid=1419236962" target="_blank" title="https://docs.google.com/spreadsheets/d/1PaFYPSSq4oplTvw_4OgOn6h2Bs_CMvCAU9CqC4tPBgk/edit#gid=1419236962">https://docs.google.com/spreadsheets/d/1PaFYPSSq4oplTvw_4OgOn6h2Bs_CMvCAU9CqC4tPBgk/edit#gid=1419236962</a>) to a FHIR construct that would actually be persisted in gitHub and become the source of truth.<br>
There are currently two options being considered: using ConceptMap to transform the spreadsheets into and out of, or StructureMap.<br>
Attached is a link to the ConceptMap profile proposal to enable such mapping (StructureMap to follow in separate thread soon): <a href="https://docs.google.com/spreadsheets/d/1O0MoF8ioE3ZeCg8ToLLMESEUzM7vX8bmRDX29gb6oWA/edit#gid=0" target="_blank" title="https://docs.google.com/spreadsheets/d/1O0MoF8ioE3ZeCg8ToLLMESEUzM7vX8bmRDX29gb6oWA/edit#gid=0">https://docs.google.com/spreadsheets/d/1O0MoF8ioE3ZeCg8ToLLMESEUzM7vX8bmRDX29gb6oWA/edit#gid=0</a>.</p>
<p>Columns A and B represent the most curent build of ConceptMap I used.  Text in red in columns B through E represent proposed use in general, and if proposed extensions, their general characteristics.  Columns F onward represent the proposed profile definition for each of the spreadsheet types we currently require.  The proposal is to use four profiles against ConceptMap, even though some are very similar, just to keep the context simple.  The proposal is also that one ConceptMap instance would be representative of one spreadsheet that you can find in the master list referenced above.</p>
<p>To visualize further, an example for the PID segment (some of the fields) is available here:  <a href="https://confluence.hl7.org/download/attachments/20022006/ConceptMap%20Mapping%20Example.json?api=v2" target="_blank" title="https://confluence.hl7.org/download/attachments/20022006/ConceptMap%20Mapping%20Example.json?api=v2">https://confluence.hl7.org/download/attachments/20022006/ConceptMap%20Mapping%20Example.json?api=v2</a>.  Note that necessary escape characters, commas, and other formatting may not be computable yet, but the intent was to get an idea what it would look like, not have it perfect yet.</p>
<p>Please review and use this thread to make suggestions on making the proposal implementable, or argue why something else would be better to provide the core representation.  Note that we will continue with spreadsheets as the main format to develop and review the mappings.</p>



<a name="185646717"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179188-v2%20to%20FHIR/topic/Spreadsheets%20and%20ConceptMaps/near/185646717" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hans Buitendijk <a href="https://fhir.github.io/chat-archive/stream/179188-v2-to-FHIR/topic/Spreadsheets.20and.20ConceptMaps.html#185646717">(Jan 14 2020 at 22:15)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> : Will you have time in Sydney to go through how StructureMap could be used to capture the spreadsheet contents?  ConceptMap was easy, but StructureMap relies on id-s which seems to complicate matters, plus would end up with a similar set of extensions to capture the different columns.  Not sure I'm missing something.</p>



<a name="185647201"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179188-v2%20to%20FHIR/topic/Spreadsheets%20and%20ConceptMaps/near/185647201" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179188-v2-to-FHIR/topic/Spreadsheets.20and.20ConceptMaps.html#185647201">(Jan 14 2020 at 22:19)</a>:</h4>
<p>yes I will have time</p>



<a name="185647226"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179188-v2%20to%20FHIR/topic/Spreadsheets%20and%20ConceptMaps/near/185647226" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179188-v2-to-FHIR/topic/Spreadsheets.20and.20ConceptMaps.html#185647226">(Jan 14 2020 at 22:19)</a>:</h4>
<p>how many people in on that discussion?</p>



<a name="185720731"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179188-v2%20to%20FHIR/topic/Spreadsheets%20and%20ConceptMaps/near/185720731" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hans Buitendijk <a href="https://fhir.github.io/chat-archive/stream/179188-v2-to-FHIR/topic/Spreadsheets.20and.20ConceptMaps.html#185720731">(Jan 15 2020 at 17:21)</a>:</h4>
<p>Probably 3-5-ish as not everybody will be there.  Best would be Monday afternoon sometime as one of those who will be there is only going to be there during the Connectathon.  BTW, for everybody, the initial thoughts/questions in the same spreadsheet where ConceptMap is fleshed under the StructureMap tab.</p>



<a name="185908246"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179188-v2%20to%20FHIR/topic/Spreadsheets%20and%20ConceptMaps/near/185908246" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> robert worden <a href="https://fhir.github.io/chat-archive/stream/179188-v2-to-FHIR/topic/Spreadsheets.20and.20ConceptMaps.html#185908246">(Jan 17 2020 at 11:44)</a>:</h4>
<p>I won't be at Sydney but will be interested in both the  ConceptMap and the StructureMap discussions. If it was at the right time of day, eg Thursday breakfast, I could join in remotely - but don't worry if that is not convenient.</p>
<p>Also it would be good to have some discussion at  Sydney on the Transform Validator - see post above - with me or without me.</p>
<p>On the use of ConceptMap for V2 Mappings:</p>
<p>The core use case for ConceptMap is like a table with 2 columns - corresponding code values.  So our use case - a mapping table with N columns - is a bit of a stretch, and needs extensions. We have discussed the pros and cons of using several extensions, roughly one for each column, versus one generic extension for any new column.</p>
<p>Irrespective of this decision, we will need a tool to generate a ConceptMap from a Google sheet. This tool is pretty easy to write, and I suggest that it should give each ConceptMap instance a narrative section which is an html table - just like the source mapping sheet. This is easy to do.</p>



<a name="185908322"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179188-v2%20to%20FHIR/topic/Spreadsheets%20and%20ConceptMaps/near/185908322" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179188-v2-to-FHIR/topic/Spreadsheets.20and.20ConceptMaps.html#185908322">(Jan 17 2020 at 11:45)</a>:</h4>
<p>I've already written that. I only needed 2 extensions</p>



<a name="185908573"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179188-v2%20to%20FHIR/topic/Spreadsheets%20and%20ConceptMaps/near/185908573" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> robert worden <a href="https://fhir.github.io/chat-archive/stream/179188-v2-to-FHIR/topic/Spreadsheets.20and.20ConceptMaps.html#185908573">(Jan 17 2020 at 11:49)</a>:</h4>
<p>How much have you written? The profile for ConceptMap? The tool to generate it  from a mapping sheet? Can you share the profile and maybe an example?</p>



<a name="185909118"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179188-v2%20to%20FHIR/topic/Spreadsheets%20and%20ConceptMaps/near/185909118" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179188-v2-to-FHIR/topic/Spreadsheets.20and.20ConceptMaps.html#185909118">(Jan 17 2020 at 11:57)</a>:</h4>
<p>the code: <a href="https://github.com/hapifhir/org.hl7.fhir.core/blob/master/org.hl7.fhir.r5/src/main/java/org/hl7/fhir/r5/utils/MappingSheetParser.java" target="_blank" title="https://github.com/hapifhir/org.hl7.fhir.core/blob/master/org.hl7.fhir.r5/src/main/java/org/hl7/fhir/r5/utils/MappingSheetParser.java">https://github.com/hapifhir/org.hl7.fhir.core/blob/master/org.hl7.fhir.r5/src/main/java/org/hl7/fhir/r5/utils/MappingSheetParser.java</a></p>



<a name="185909392"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179188-v2%20to%20FHIR/topic/Spreadsheets%20and%20ConceptMaps/near/185909392" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179188-v2-to-FHIR/topic/Spreadsheets.20and.20ConceptMaps.html#185909392">(Jan 17 2020 at 12:01)</a>:</h4>
<p>agree that the narrative should match the spreadhsheet- I don't remember whether I did that yet</p>



<a name="186199658"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179188-v2%20to%20FHIR/topic/Spreadsheets%20and%20ConceptMaps/near/186199658" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hans Buitendijk <a href="https://fhir.github.io/chat-archive/stream/179188-v2-to-FHIR/topic/Spreadsheets.20and.20ConceptMaps.html#186199658">(Jan 21 2020 at 16:26)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> : See <a href="https://docs.google.com/spreadsheets/d/1PaFYPSSq4oplTvw_4OgOn6h2Bs_CMvCAU9CqC4tPBgk/edit#gid=1419236962" target="_blank" title="https://docs.google.com/spreadsheets/d/1PaFYPSSq4oplTvw_4OgOn6h2Bs_CMvCAU9CqC4tPBgk/edit#gid=1419236962">https://docs.google.com/spreadsheets/d/1PaFYPSSq4oplTvw_4OgOn6h2Bs_CMvCAU9CqC4tPBgk/edit#gid=1419236962</a> where I ended up with more than 2 extensions.  Curious where we can reduce, which would be fine.</p>



<a name="186205675"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179188-v2%20to%20FHIR/topic/Spreadsheets%20and%20ConceptMaps/near/186205675" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hans Buitendijk <a href="https://fhir.github.io/chat-archive/stream/179188-v2-to-FHIR/topic/Spreadsheets.20and.20ConceptMaps.html#186205675">(Jan 21 2020 at 17:22)</a>:</h4>
<p>URL correction: <a href="https://docs.google.com/spreadsheets/d/1O0MoF8ioE3ZeCg8ToLLMESEUzM7vX8bmRDX29gb6oWA/edit#gid=0" target="_blank" title="https://docs.google.com/spreadsheets/d/1O0MoF8ioE3ZeCg8ToLLMESEUzM7vX8bmRDX29gb6oWA/edit#gid=0">https://docs.google.com/spreadsheets/d/1O0MoF8ioE3ZeCg8ToLLMESEUzM7vX8bmRDX29gb6oWA/edit#gid=0</a></p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
