---
layout: page
title: "FHIR Chat  · Immunization NDC coding · inferno"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/index.html">inferno</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/Immunization.20NDC.20coding.html">Immunization NDC coding</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="203724256"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/Immunization%20NDC%20coding/near/203724256" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthew Dugal <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/Immunization.20NDC.20coding.html#203724256">(Jul 13 2020 at 14:48)</a>:</h4>
<p>I am having an issue with inferno test for Immunizations and am hoping you can tell me what is going wrong. The error I am receiving is:<br>
The code "49281-0286-01" is not valid in the system <a href="http://hl7.org/fhir/sid/ndc">http://hl7.org/fhir/sid/ndc</a></p>
<p>The json code element for the resource is:</p>
<div class="codehilite"><pre><span></span><code>&quot;vaccineCode&quot;: {
  &quot;coding&quot;: [
    {
      &quot;system&quot;: &quot;http://hl7.org/fhir/sid/cvx&quot;,
      &quot;code&quot;: &quot;106&quot;,
      &quot;display&quot;: &quot;Tetanus and diphtheria toxoids&quot;
    },
    {
      &quot;system&quot;: &quot;http://hl7.org/fhir/sid/ndc&quot;,
      &quot;code&quot;: &quot;49281-0286-01&quot;,
      &quot;display&quot;: &quot;Tetanus and diphtheria toxoids&quot;
    }
  ]
},
</code></pre></div>


<p>US Core says NDC should be provided<br>
<a href="https://build.fhir.org/ig/HL7/US-Core-R4/StructureDefinition-us-core-immunization.html">https://build.fhir.org/ig/HL7/US-Core-R4/StructureDefinition-us-core-immunization.html</a></p>
<p>The code exists in the concept map<br>
<a href="https://build.fhir.org/ig/HL7/US-Core-R4/ConceptMap-ndc-cvx.html">https://build.fhir.org/ig/HL7/US-Core-R4/ConceptMap-ndc-cvx.html</a></p>
<p>And the provided example uses the same code system URL.<br>
<a href="https://build.fhir.org/ig/HL7/US-Core-R4/Immunization-imm-1.json.html">https://build.fhir.org/ig/HL7/US-Core-R4/Immunization-imm-1.json.html</a></p>



<a name="203724608"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/Immunization%20NDC%20coding/near/203724608" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert Scanlon <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/Immunization.20NDC.20coding.html#203724608">(Jul 13 2020 at 14:51)</a>:</h4>
<p>I'm not sure it makes a difference in this case (it probably doesn't), but make sure you are looking at US Core v3.1.0 (<a href="http://hl7.org/fhir/us/core/STU3.1/">http://hl7.org/fhir/us/core/STU3.1/</a>), not the version on <a href="http://build.fhir.org">build.fhir.org</a>.</p>



<a name="203727309"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/Immunization%20NDC%20coding/near/203727309" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert Scanlon <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/Immunization.20NDC.20coding.html#203727309">(Jul 13 2020 at 15:12)</a>:</h4>
<p>I double checked and this applies to v3.1.0 (so no difference)</p>



<a name="203727324"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/Immunization%20NDC%20coding/near/203727324" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Reece Adamson <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/Immunization.20NDC.20coding.html#203727324">(Jul 13 2020 at 15:12)</a>:</h4>
<p><span class="user-mention" data-user-id="191473">@Matthew Dugal</span> are you getting an error or a warning?  I'd expect a warning here because <code>vaccineCode</code> has an extensible binding to a ValueSet which only includes codes from <a href="http://hl7.org/fhir/sid/cvx">http://hl7.org/fhir/sid/cvx</a>.  Inferno will throw warnings on any code that is outside a ValueSet for an element for an extensible binding so that a user or tester can review.</p>



<a name="203727498"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/Immunization%20NDC%20coding/near/203727498" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Reece Adamson <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/Immunization.20NDC.20coding.html#203727498">(Jul 13 2020 at 15:13)</a>:</h4>
<p>Inferno does not evaluate the ConceptMap provided to try and do a more automated assessment of whether a code could have been covered by a concept existing in this extensible ValueSet (in which case you might get a failure), but this is the only ConceptMap provided in US Core so they are just generally handled as warnings at this point.</p>



<a name="203727589"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/Immunization%20NDC%20coding/near/203727589" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthew Dugal <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/Immunization.20NDC.20coding.html#203727589">(Jul 13 2020 at 15:14)</a>:</h4>
<p>This appears to be an error with a red X. <br>
Error Message: Invalid Immunization: Immunization.vaccineCode.coding[1]: The code "49281-0286-01" is not valid in the system <a href="http://hl7.org/fhir/sid/ndc">http://hl7.org/fhir/sid/ndc</a>; The code provided (<a href="http://hl7.org/fhir/sid/ndc#49281-0286-01">http://hl7.org/fhir/sid/ndc#49281-0286-01</a>) is not valid in the value set All codes known to the system for '<a href="http://hl7.org/fhir/sid/ndc#49281-0286-01">http://hl7.org/fhir/sid/ndc#49281-0286-01</a>'</p>



<a name="203727937"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/Immunization%20NDC%20coding/near/203727937" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Reece Adamson <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/Immunization.20NDC.20coding.html#203727937">(Jul 13 2020 at 15:17)</a>:</h4>
<p>ahh I see, this looks like a validation against the code system itself.  Are you running on <a href="http://inferno.healthit.gov">inferno.healthit.gov</a> or locally?</p>



<a name="203727995"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/Immunization%20NDC%20coding/near/203727995" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthew Dugal <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/Immunization.20NDC.20coding.html#203727995">(Jul 13 2020 at 15:17)</a>:</h4>
<p>Running against the public <a href="http://inferno.healthit.gov">inferno.healthit.gov</a>.</p>



<a name="203735222"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/Immunization%20NDC%20coding/near/203735222" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Reece Adamson <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/Immunization.20NDC.20coding.html#203735222">(Jul 13 2020 at 16:12)</a>:</h4>
<p>Investigating now...  I think we might have a bug when evaluating codes when we don't have the codesystem loaded to check against (in which case there should just be a warning that the code wasn't checked).  Thanks for reporting this and we'll update once we know more!</p>



<a name="203736832"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/Immunization%20NDC%20coding/near/203736832" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vishak OS <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/Immunization.20NDC.20coding.html#203736832">(Jul 13 2020 at 16:27)</a>:</h4>
<p>I ran the same patient test across the Public Program Edition and Public Community Edition(US Core v3.1.0).<br>
The Community edition is the one giving the below Error; Program edition is good and conforms to the U.S Core profile.<br>
Immunization.vaccineCode: The code "49281-0710-40" is not valid in the system <a href="http://hl7.org/fhir/sid/ndc">http://hl7.org/fhir/sid/ndc</a>;</p>



<a name="203740282"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/Immunization%20NDC%20coding/near/203740282" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Reece Adamson <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/Immunization.20NDC.20coding.html#203740282">(Jul 13 2020 at 16:58)</a>:</h4>
<p>Thanks <span class="user-mention" data-user-id="194413">@Vishak OS</span>!  <span class="user-mention" data-user-id="191473">@Matthew Dugal</span> were you testing against Community Edition in this case as well?  Might be worth testing against Program if possible as some of the bug fixes and features in Program are not present in Community at this time.</p>



<a name="203744426"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/Immunization%20NDC%20coding/near/203744426" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vishak OS <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/Immunization.20NDC.20coding.html#203744426">(Jul 13 2020 at 17:30)</a>:</h4>
<p><span class="user-mention" data-user-id="197651">@Reece Adamson</span> : We tried to check with the Community Edition initially, since couple of the optional tests are present in the Community Edition compared to the program edition.<br>
Eg:  Immunization search by patient+status</p>
<p>btw, <span class="user-mention" data-user-id="191473">@Matthew Dugal</span>  and I work on the same team.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
