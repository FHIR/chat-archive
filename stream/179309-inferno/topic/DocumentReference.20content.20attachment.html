---
layout: page
title: "FHIR Chat  · DocumentReference content attachment · inferno"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/index.html">inferno</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/DocumentReference.20content.20attachment.html">DocumentReference content attachment</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="228682999"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/DocumentReference%20content%20attachment/near/228682999" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lakshmi Bhamidipati <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/DocumentReference.20content.20attachment.html#228682999">(Mar 03 2021 at 22:50)</a>:</h4>
<p>Hello,<br>
We are using  <a href="http://DocumentReference.content.attachment.data">DocumentReference.content.attachment.data</a> (Data inline, base64ed) to display document data.  The contentType is "application/pdf" or "text/plain".<br>
However one of the Inferno tests is failing because of this error -<br>
USCDR-13: All must support elements are provided in the DocumentReference resources returned.<br>
Could not find content.attachment.url in any of the resources.<br>
Is it something we must support or is there a way to get around this test?<br>
Thank you!</p>



<a name="228686533"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/DocumentReference%20content%20attachment/near/228686533" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/DocumentReference.20content.20attachment.html#228686533">(Mar 03 2021 at 23:16)</a>:</h4>
<p>You need to have at least one DocumentReference resource with content.url</p>



<a name="228687376"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/DocumentReference%20content%20attachment/near/228687376" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lakshmi Bhamidipati <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/DocumentReference.20content.20attachment.html#228687376">(Mar 03 2021 at 23:24)</a>:</h4>
<p>Thank you <span class="user-mention" data-user-id="191506">@Yunwei Wang</span> . I was almost sure you would say that. I guess it goes with the "must support" requirement. Since our FHIR server is a facade, I don't know how we can specify urls. The data resides in the database. We read it, encode it and display it in the FHIR resource.</p>



<a name="228691588"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/DocumentReference%20content%20attachment/near/228691588" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert Scanlon <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/DocumentReference.20content.20attachment.html#228691588">(Mar 04 2021 at 00:02)</a>:</h4>
<p><span class="user-mention" data-user-id="191506">@Yunwei Wang</span> -- Did you open a ticket regarding clarification on must support requirements for DocumentReference.content in US Core?   It doesn't mention that element in the <a href="http://hl7.org/fhir/us/core/STU3.1.1/StructureDefinition-us-core-documentreference.html#mandatory-and-must-support-data-elements">must support description</a>.  I think we were looking initially at this because it did seem odd to require support for both representations.  Did you ask that question as well?</p>



<a name="228691664"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/DocumentReference%20content%20attachment/near/228691664" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert Scanlon <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/DocumentReference.20content.20attachment.html#228691664">(Mar 04 2021 at 00:03)</a>:</h4>
<p>I would think that either the data or uri elements need to be supported.  Requiring both seems strange to me.  But maybe there is a reason.</p>



<a name="228699002"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/DocumentReference%20content%20attachment/near/228699002" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/DocumentReference.20content.20attachment.html#228699002">(Mar 04 2021 at 01:14)</a>:</h4>
<p>Yes. I raised a JIRA ticket to US Core  that whole content attribute is not mentioned  in the must support narrative. <a href="http://jira.hl7.org/browse/FHIR-31364">FHIR-31364</a>. <br>
There is ticket <a href="http://jira.hl7.org/browse/FHIR-30111">FHIR-30111</a> which clarifies that </p>
<blockquote>
<p>Systems are not required to support both DocumentReference.content.attachment.url AND <a href="http://DocumentReference.content.attachment.data">DocumentReference.content.attachment.data</a></p>
<p>Make it clear although both marked MUST SUPPORT, systems may chose to only support one.</p>
</blockquote>
<p>This ticket is raised on the ballot version of US Core (3.2.0). Unless US Core backport this ticket  to next technical correction (if there is any),  we have to stick with current interpretation that both are must supported in 3.1.1.</p>



<a name="228699873"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/DocumentReference%20content%20attachment/near/228699873" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/DocumentReference.20content.20attachment.html#228699873">(Mar 04 2021 at 01:22)</a>:</h4>
<p><span class="user-mention" data-user-id="224800">@Lakshmi Bhamidipati</span> The US Core state that </p>
<blockquote>
<p>If both data and url are provided, the url SHALL point to the same content as the data contains.</p>
</blockquote>



<a name="228701931"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/DocumentReference%20content%20attachment/near/228701931" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lakshmi Bhamidipati <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/DocumentReference.20content.20attachment.html#228701931">(Mar 04 2021 at 01:44)</a>:</h4>
<p>Thank you for your reply. I hope US Core specification changes such that systems may chose to support only one.</p>



<a name="228755790"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/DocumentReference%20content%20attachment/near/228755790" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert Scanlon <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/DocumentReference.20content.20attachment.html#228755790">(Mar 04 2021 at 11:31)</a>:</h4>
<p>Thanks for tracking that down <span class="user-mention" data-user-id="191506">@Yunwei Wang</span> -- is there any real talk of a technical correction or is everything going into v3.2.0?  It seems like the industry expectation is that v3.2.0 will be available for certification through the ONC Standards Version Advancement Process, and if that is the case there wouldn't be a need for a TC from a certification perspective.</p>



<a name="228780865"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/DocumentReference%20content%20attachment/near/228780865" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/DocumentReference.20content.20attachment.html#228780865">(Mar 04 2021 at 14:27)</a>:</h4>
<p>I think it depends on how regulator adopts US Core v3.2.0. One possibility is regulator adopts v3.2.0 as a Voluntary certification (v3.1.1 is Mandatory certification). In such case, vendor will have a chance to choose which certification to pass. I am not sure. We have to wait any instructions coming out about future US Core versions.</p>



<a name="228966464"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/DocumentReference%20content%20attachment/near/228966464" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lakshmi Bhamidipati <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/DocumentReference.20content.20attachment.html#228966464">(Mar 05 2021 at 14:57)</a>:</h4>
<p><span class="user-mention" data-user-id="191506">@Yunwei Wang</span> <span class="user-mention" data-user-id="192576">@Robert Scanlon</span>  - Regarding Document Reference, this is what the profile says - "This profile sets minimum expectations for searching and fetching fetching patient documents including Clinical Notes using the DocumentReference resource." Is "Clinical Notes" the only type of document that is expected in the response? The category description says - "The codes SHALL be taken from US Core DocumentReference Category; other codes may be used where these codes are not suitable".<br>
Include all codes defined in <a href="http://hl7.org/fhir/us/core/CodeSystem/us-core-documentreference-category">http://hl7.org/fhir/us/core/CodeSystem/us-core-documentreference-category</a>. However the code system has only 1 code - "Clinical Note". Thank you.</p>



<a name="228967278"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/DocumentReference%20content%20attachment/near/228967278" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/DocumentReference.20content.20attachment.html#228967278">(Mar 05 2021 at 15:01)</a>:</h4>
<p>the profile merely indicates to use the clinical note code when looking for clinical notes. It says nothing about other uses (For which there are other implementation guides that do express other uses of DocumentReference and other document categories, types, formats, etc)</p>



<a name="228978426"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/DocumentReference%20content%20attachment/near/228978426" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lakshmi Bhamidipati <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/DocumentReference.20content.20attachment.html#228978426">(Mar 05 2021 at 16:10)</a>:</h4>
<p>Thank you <span class="user-mention" data-user-id="191404">@John Moehrke</span> Since we are working towards implementing the USCDI elements in the US Core Profile, I am assuming we should be displaying at least all the clinical notes in our system by setting the code system to  <a href="http://hl7.org/fhir/us/core/CodeSystem/us-core-documentreference-category">http://hl7.org/fhir/us/core/CodeSystem/us-core-documentreference-category</a>.</p>



<a name="228980844"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/DocumentReference%20content%20attachment/near/228980844" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert Scanlon <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/DocumentReference.20content.20attachment.html#228980844">(Mar 05 2021 at 16:23)</a>:</h4>
<p><span class="user-mention" data-user-id="224800">@Lakshmi Bhamidipati</span> -- DocumentReference.category has an extensible binding to US Core Document Reference category (which only has that 1 code: Clinical Note).  An extensible binding means you are free to have other codes there, as long as they do not mean the same thing as 'Clinical Note'.  So essentially what this is saying is that you are free to use DocumentReference for things other than Clinical Notes, and you can categorize your DocumentReferences however you want, but for anything that is a "Clinical Note" as we define it, you MUST use the "Clinical Note" category.  And we then add some more rules around things that are "Clinical Notes" in guidance.</p>



<a name="228981567"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/DocumentReference%20content%20attachment/near/228981567" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lakshmi Bhamidipati <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/DocumentReference.20content.20attachment.html#228981567">(Mar 05 2021 at 16:27)</a>:</h4>
<p>Thank you <span class="user-mention" data-user-id="192576">@Robert Scanlon</span>.</p>



<a name="228981966"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/DocumentReference%20content%20attachment/near/228981966" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert Scanlon <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/DocumentReference.20content.20attachment.html#228981966">(Mar 05 2021 at 16:29)</a>:</h4>
<p>For the required search without category, you can send things other than clinical notes (but it must also include all of your clinical notes).  All resources returned have to conform to the profile, because this is a general 'DocumentReference' profile.  For the required search WITH category, if you search by the "Clinical Note" category, you must return all references that are "Clinical Notes" as defined in this guide.  But users can search by other category codes, if you have other codes in your system.</p>



<a name="228982343"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/DocumentReference%20content%20attachment/near/228982343" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert Scanlon <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/DocumentReference.20content.20attachment.html#228982343">(Mar 05 2021 at 16:31)</a>:</h4>
<p>In our 'DocumentReference' profile set of tests, we may end up performing that category search with something other than that clinical note category, if you happen to return a different category code from the first (most general) search.  We have a separate test sequence for 'Clinical Notes Guidance' that actually ensures you have clinical notes in your system.</p>



<a name="229030392"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/DocumentReference%20content%20attachment/near/229030392" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lakshmi Bhamidipati <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/DocumentReference.20content.20attachment.html#229030392">(Mar 05 2021 at 21:50)</a>:</h4>
<p>Please pardon me for asking multiple questions on this topic. According to clinical notes guidance tests, the system must implement the US Core DiagnosticReport Profile for Report and Note exchange and to support a minimum of the three report categories - Radiology, Pathology and Cardilogy. My question is - If I represent a clinical note in DocumentReference in the binary format (either as text/plain or application/pdf), am I expected to display the same data in DiagnosticReport resource? Thank you.</p>



<a name="229312126"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/DocumentReference%20content%20attachment/near/229312126" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/DocumentReference.20content.20attachment.html#229312126">(Mar 08 2021 at 15:01)</a>:</h4>
<p>According to the US Core 3.1.1 Clinical Notes Guidance, </p>
<blockquote>
<p>In order to enable consistent access to scanned narrative-only clinical reports the Argonaut Clinical Note Server SHALL expose these reports through both DiagnosticReport and DocumentReference by representing the same attachment url using the corresponding elements listed below</p>
</blockquote>
<p>and</p>
<blockquote>
<p>This guide requires servers implement the duplicate reference to allow a client to find a Pathology report, or other Diagnostic Reports, in either Resource.</p>
</blockquote>
<p>If the binary format is one of the Diagnostic Reports, then it shall be also attached in DiagnosticReport resource using <code>DiagnosticReport.presentedForm.url</code>.</p>



<a name="229328800"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/DocumentReference%20content%20attachment/near/229328800" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lakshmi Bhamidipati <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/DocumentReference.20content.20attachment.html#229328800">(Mar 08 2021 at 16:24)</a>:</h4>
<p>Thank you <span class="user-mention" data-user-id="191506">@Yunwei Wang</span></p>



<a name="230050659"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/DocumentReference%20content%20attachment/near/230050659" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lakshmi Bhamidipati <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/DocumentReference.20content.20attachment.html#230050659">(Mar 12 2021 at 15:47)</a>:</h4>
<p>Hello, getting back to DocumentReference :) If I have documents that are NOT clinical notes in the DocumentReference Resource and I don't know how to categorize them, since it is a codeableconcept, if it okay for me to just populate "Text" element? Thank you.</p>



<a name="230079921"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/DocumentReference%20content%20attachment/near/230079921" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/DocumentReference.20content.20attachment.html#230079921">(Mar 12 2021 at 18:55)</a>:</h4>
<p>According to FHIR binding rules, you are free to use either text or your own coding if concept is not covered by extensible binding. The receiving implementation may nor may not such resource with additional coding.</p>



<a name="230470347"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/DocumentReference%20content%20attachment/near/230470347" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santosh Pai <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/DocumentReference.20content.20attachment.html#230470347">(Mar 16 2021 at 07:38)</a>:</h4>
<p>Running  inferno locally on docker. Was running fine , but now giving “ internal server error” on launch - any clues how to fix this error ?</p>



<a name="230511684"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/DocumentReference%20content%20attachment/near/230511684" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert Scanlon <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/DocumentReference.20content.20attachment.html#230511684">(Mar 16 2021 at 13:30)</a>:</h4>
<p>It's off-topic for the thread, but Santosh let us know he was able to get it working again. <span class="user-mention" data-user-id="316810">@Santosh Pai</span> -- feel free to open another thread in the <a class="stream" data-stream-id="179309" href="/#narrow/stream/179309-inferno">#inferno</a> stream if you continue to have problems, or reach out by email.  Thanks for letting us know.</p>



<a name="230512041"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/DocumentReference%20content%20attachment/near/230512041" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santosh Pai <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/DocumentReference.20content.20attachment.html#230512041">(Mar 16 2021 at 13:33)</a>:</h4>
<p>Will do Rob. Thanks for the quick response.</p>



<a name="230512217"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/DocumentReference%20content%20attachment/near/230512217" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santosh Pai <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/DocumentReference.20content.20attachment.html#230512217">(Mar 16 2021 at 13:34)</a>:</h4>
<p>note : we have docker desktop on a WVD ( windows virtual device) just wanted to let you know</p>



<a name="230738766"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/DocumentReference%20content%20attachment/near/230738766" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lakshmi Bhamidipati <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/DocumentReference.20content.20attachment.html#230738766">(Mar 17 2021 at 18:01)</a>:</h4>
<p>Hello <span class="user-mention" data-user-id="191506">@Yunwei Wang</span> <span class="user-mention" data-user-id="192576">@Robert Scanlon</span>  - for US Core compliance and certification, is our FHIR server expected to support this  section under Clinical Notes - Determining Server Note Type Support Using The Value Set Expansion Operation ($expand)  ? Thank you.</p>



<a name="230741513"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/DocumentReference%20content%20attachment/near/230741513" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert Scanlon <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/DocumentReference.20content.20attachment.html#230741513">(Mar 17 2021 at 18:18)</a>:</h4>
<p>No, that is an optional feature to support for servers, so we do not test it -- <a href="https://www.hl7.org/fhir/us/core/clinical-notes-guidance.html#using-expand">see here</a></p>
<blockquote>
<p>A FHIR server claiming support to this guide SHOULD support the $expand operation.</p>
</blockquote>
<p>A few sentences before that, the guide states "a client can determine the note and report types support by a server", which I think is misleading because we usually interpret "a client can/may" as "a server shall", but that clearly isn't the case here.  What are your thoughts about that "can" there <span class="user-mention" data-user-id="191506">@Yunwei Wang</span>, is that something worth open a ticket to consider rephrasing?</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
