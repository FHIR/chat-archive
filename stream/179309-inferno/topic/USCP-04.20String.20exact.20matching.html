---
layout: page
title: "FHIR Chat  · USCP-04 String exact matching · inferno"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/index.html">inferno</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/USCP-04.20String.20exact.20matching.html">USCP-04 String exact matching</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="243164162"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/USCP-04%20String%20exact%20matching/near/243164162" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Bradley <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/USCP-04.20String.20exact.20matching.html#243164162">(Jun 18 2021 at 13:58)</a>:</h4>
<p>Hello, we're testing our Patient API using inferno and believe we've encountered an issue. Specifically for USCP-04 - we are passing in <code>Patient?birthdate=1900-01-01&amp;family=Ach</code> this returns a patient with the last name "Achie". The test fails because I assume its looking for an exact match - but the spec seems to indicate that the default mode is a "starts with" match <a href="http://hl7.org/fhir/R4/search.html#string">http://hl7.org/fhir/R4/search.html#string</a> . Can someone confirm our understanding is correct?</p>



<a name="243172597"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/USCP-04%20String%20exact%20matching/near/243172597" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/USCP-04.20String.20exact.20matching.html#243172597">(Jun 18 2021 at 15:02)</a>:</h4>
<p>Yes, the default is 'starts with' - but are you sure that the test is not failing due to the birthdate? It is a weird value to find matches for</p>



<a name="243173815"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/USCP-04%20String%20exact%20matching/near/243173815" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert Scanlon <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/USCP-04.20String.20exact.20matching.html#243173815">(Jun 18 2021 at 15:12)</a>:</h4>
<p>That was my thought first too, but in looking at the code it does seem like we do exact string matches on <code>family</code> unfortunately.  This is not required for ONC Certification, so only shows up in our 'Community' set of tests.  But we need to fix it.  Thanks for letting us know.</p>



<a name="243173926"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/USCP-04%20String%20exact%20matching/near/243173926" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert Scanlon <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/USCP-04.20String.20exact.20matching.html#243173926">(Jun 18 2021 at 15:13)</a>:</h4>
<p>(it isn't required for ONC certification, because <code>birthDate+family</code> is 'SHOULD', not 'SHALL' in US Core -- so we don't test it)</p>



<a name="243174094"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/USCP-04%20String%20exact%20matching/near/243174094" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert Scanlon <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/USCP-04.20String.20exact.20matching.html#243174094">(Jun 18 2021 at 15:14)</a>:</h4>
<p><code>birthDate+name</code> is required for certification, and I believe we do handle it correctly there. Could you confirm that you pass <del>BDE-04</del> USCP-04 (whoops, looked at wrong window) ?</p>



<a name="243185282"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/USCP-04%20String%20exact%20matching/near/243185282" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert Scanlon <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/USCP-04.20String.20exact.20matching.html#243185282">(Jun 18 2021 at 16:52)</a>:</h4>
<p><span class="user-mention" data-user-id="210024">@James Bradley</span> -- I just realized something is a little off here.  Our <code>USCP-04</code> tests are searching by <code>birthdate+name</code>, not <code>birthdate+family</code>, and I do not think they exhibit this bug.  Our <code>USCP-06</code> tests (Community version only because it is optional to implement) do search by <code>birthdate+family</code>, and I believe they do exhibit this bug.  You stated <code>USCP-04</code> was searching by <code>birthdate+family</code> above, but that shouldn't be happening.  Could you confirm which test number, which search parameter (<code>family</code> or <code>name</code>), and which version of inferno ('community' or 'program') so I can make sure I understand the problem?</p>



<a name="243193180"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/USCP-04%20String%20exact%20matching/near/243193180" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Bradley <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/USCP-04.20String.20exact.20matching.html#243193180">(Jun 18 2021 at 18:12)</a>:</h4>
<p>Thanks for the response! I'm going to confirm with the team but I wouldn't be surprised if they were testing using the community edition (we've integrated the community version into our development process). Thanks for checking it out.</p>



<a name="243382031"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/USCP-04%20String%20exact%20matching/near/243382031" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cooper Thompson <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/USCP-04.20String.20exact.20matching.html#243382031">(Jun 21 2021 at 13:31)</a>:</h4>
<p>We've run into similar issues too, where we apply "fuzzy" logic to names and date of birth.  For example, if you search for John, we might return patients that have a name of Jon.  Similarly with date of birth, we support single digit transposition and off-by-one fuzziness to handle fat-fingering.  Per the base FHIR spec, this is acceptable based on this bit:  </p>
<p><a href="http://build.fhir.org/search.html#Introduction">http://build.fhir.org/search.html#Introduction</a></p>
<div class="codehilite"><pre><span></span><code>The server determines which of their resources meet the criteria contained in
the search parameters as described below. However, the server has the prerogative
to return additional search results if it believes them to be relevant.
</code></pre></div>
<p>For the actual certification, we can just turn off our fuzzy matching logic, but since we expect most users to want it enabled, would it make sense to have Inferno accept fuzzy matches?</p>



<a name="247618249"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/USCP-04%20String%20exact%20matching/near/247618249" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert Scanlon <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/USCP-04.20String.20exact.20matching.html#247618249">(Jul 29 2021 at 17:52)</a>:</h4>
<p><span class="user-mention" data-user-id="191764">@Cooper Thompson</span> -- thanks for highlighting this, we are looking at how to address this next.  There is also explicit leniency given towards fuzzy matches on names: "When searching whole names and addresses (not parts), servers may also use flexible match or a free-text style searches on names to achieve the best results." <a href="https://www.hl7.org/fhir/search.html#string">ref</a>.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
