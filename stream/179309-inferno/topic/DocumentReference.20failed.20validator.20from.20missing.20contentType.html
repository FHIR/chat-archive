---
layout: page
title: "FHIR Chat  · DocumentReference failed validator from missing contentType · inferno"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/index.html">inferno</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/DocumentReference.20failed.20validator.20from.20missing.20contentType.html">DocumentReference failed validator from missing contentType</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="278058793"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/DocumentReference%20failed%20validator%20from%20missing%20contentType/near/278058793" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nathan Loyer <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/DocumentReference.20failed.20validator.20from.20missing.20contentType.html#278058793">(Apr 06 2022 at 17:32)</a>:</h4>
<p>Hey, continuing a conversation that was started here:</p>
<p><a href="https://github.com/onc-healthit/onc-certification-g10-test-kit/issues/67">https://github.com/onc-healthit/onc-certification-g10-test-kit/issues/67</a></p>
<p>So here's another failure we're having when running the g10 tests. We have a DocumentReference being returned for a patient that has a status of entered-in-error, and thus we have no attachment that we want to return for the resource. Because of this, we are setting the data-absent-reason extensions on DocumentReference.content.attachment, DocumentReference.content.attachment.contentType, and <a href="http://DocumentReference.content.attachment.data">DocumentReference.content.attachment.data</a>. The FHIR validator doesn't seem to like this, and it returns an error because we have no code in the contentType field. So is our implementation wrong to return data like this? Or is this something the validator needs to be updated to handle?</p>
<p>Here's an example of the data that triggers this:</p>
<div class="codehilite"><pre><span></span><code>{
  &quot;custodian&quot;: {
    &quot;reference&quot;: &quot;Organization/234124&quot;
  },
  &quot;resourceType&quot;: &quot;DocumentReference&quot;,
  &quot;date&quot;: &quot;2017-01-01T00:00:00.000Z&quot;,
  &quot;status&quot;: &quot;entered-in-error&quot;,
  &quot;subject&quot;: {
    &quot;reference&quot;: &quot;Patient/978124&quot;
  },
  &quot;content&quot;: [
    {
      &quot;attachment&quot;: {
        &quot;extension&quot;: [
          {
            &quot;url&quot;: &quot;http://hl7.org/fhir/StructureDefinition/data-absent-reason&quot;,
            &quot;valueCode&quot;: &quot;unknown&quot;
          }
        ],
        &quot;_data&quot;: {
          &quot;extension&quot;: [
            {
              &quot;url&quot;: &quot;http://hl7.org/fhir/StructureDefinition/data-absent-reason&quot;,
              &quot;valueCode&quot;: &quot;unknown&quot;
            }
          ]
        },
        &quot;_contentType&quot;: {
          &quot;extension&quot;: [
            {
              &quot;url&quot;: &quot;http://hl7.org/fhir/StructureDefinition/data-absent-reason&quot;,
              &quot;valueCode&quot;: &quot;unknown&quot;
            }
          ]
        }
      },
      &quot;extension&quot;: [
        {
          &quot;url&quot;: &quot;http://hl7.org/fhir/StructureDefinition/data-absent-reason&quot;,
          &quot;valueCode&quot;: &quot;unknown&quot;
        }
      ]
    }
  ],
  &quot;author&quot;: [
    {
      &quot;reference&quot;: &quot;Organization/1237648&quot;
    }
  ],
  &quot;meta&quot;: {
    &quot;security&quot;: [
      {
        &quot;system&quot;: &quot;http://terminology.hl7.org/CodeSystem/v3-ActCode&quot;,
        &quot;code&quot;: &quot;NOPAT&quot;,
        &quot;display&quot;: &quot;no disclosure to patient, family or caregivers without attending provider&#39;s authorization&quot;
      }
    ]
  },
  &quot;identifier&quot;: [
    {
      &quot;system&quot;: &quot;https://fhir.athena.io/sid/ah-documentreference&quot;,
      &quot;value&quot;: &quot;12489&quot;
    }
  ],
  &quot;context&quot;: {
    &quot;encounter&quot;: [
      {
        &quot;identifier&quot;: {
          &quot;system&quot;: &quot;https://fhir.athena.io/sid/ah-encounter&quot;,
          &quot;value&quot;: &quot;1039478&quot;
        },
        &quot;reference&quot;: &quot;Encounter/1239487&quot;
      }
    ],
    &quot;period&quot;: {
      &quot;end&quot;: &quot;2021-01-01&quot;,
      &quot;start&quot;: &quot;2021-01-01&quot;
    }
  },
  &quot;category&quot;: [
    {
      &quot;coding&quot;: [
        {
          &quot;system&quot;: &quot;http://hl7.org/fhir/us/core/CodeSystem/us-core-documentreference-category&quot;,
          &quot;code&quot;: &quot;clinical-note&quot;,
          &quot;display&quot;: &quot;Clinical Note&quot;
        }
      ]
    }
  ],
  &quot;id&quot;: &quot;01927834&quot;,
  &quot;type&quot;: {
    &quot;coding&quot;: [
      {
        &quot;system&quot;: &quot;http://loinc.org&quot;,
        &quot;code&quot;: &quot;75425-9&quot;,
        &quot;display&quot;: &quot;Cardiology Diagnostic Study Note&quot;
      }
    ]
  }
}
</code></pre></div>
<p>and the error: </p>
<div class="codehilite"><pre><span></span><code>{
  &quot;resourceType&quot;: &quot;OperationOutcome&quot;,
  &quot;text&quot;: {
    &quot;status&quot;: &quot;extensions&quot;,
    &quot;div&quot;: &quot;&lt;div xmlns=\&quot;http://www.w3.org/1999/xhtml\&quot;&gt;&lt;table class=\&quot;grid\&quot;&gt;&lt;tr&gt;&lt;td&gt;&lt;b&gt;Severity&lt;/b&gt;&lt;/td&gt;&lt;td&gt;&lt;b&gt;Location&lt;/b&gt;&lt;/td&gt;&lt;td&gt;&lt;b&gt;Code&lt;/b&gt;&lt;/td&gt;&lt;td&gt;&lt;b&gt;Details&lt;/b&gt;&lt;/td&gt;&lt;td&gt;&lt;b&gt;Diagnostics&lt;/b&gt;&lt;/td&gt;&lt;td&gt;&lt;b&gt;Source&lt;/b&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;ERROR&lt;/td&gt;&lt;td/&gt;&lt;td&gt;Invalid Code&lt;/td&gt;&lt;td&gt;No code provided, and a code is required from the value set&lt;/td&gt;&lt;td/&gt;&lt;td&gt;No display for Extension&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;&quot;
  },
  &quot;issue&quot;: [
    {
      &quot;extension&quot;: [
        {
          &quot;url&quot;: &quot;http://hl7.org/fhir/StructureDefinition/operationoutcome-issue-line&quot;,
          &quot;valueInteger&quot;: 29
        },
        {
          &quot;url&quot;: &quot;http://hl7.org/fhir/StructureDefinition/operationoutcome-issue-col&quot;,
          &quot;valueInteger&quot;: 27
        },
        {
          &quot;url&quot;: &quot;http://hl7.org/fhir/StructureDefinition/operationoutcome-issue-source&quot;,
          &quot;valueCode&quot;: &quot;InstanceValidator&quot;
        }
      ],
      &quot;severity&quot;: &quot;error&quot;,
      &quot;code&quot;: &quot;code-invalid&quot;,
      &quot;details&quot;: {
        &quot;text&quot;: &quot;No code provided, and a code is required from the value set&quot;
      },
      &quot;expression&quot;: [
        &quot;DocumentReference.content[0].attachment.contentType&quot;
      ]
    }
  ]
}
</code></pre></div>



<a name="278058843"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/DocumentReference%20failed%20validator%20from%20missing%20contentType/near/278058843" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nathan Loyer <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/DocumentReference.20failed.20validator.20from.20missing.20contentType.html#278058843">(Apr 06 2022 at 17:32)</a>:</h4>
<p><span class="user-mention" data-user-id="191506">@Yunwei Wang</span></p>



<a name="278059719"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/DocumentReference%20failed%20validator%20from%20missing%20contentType/near/278059719" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/DocumentReference.20failed.20validator.20from.20missing.20contentType.html#278059719">(Apr 06 2022 at 17:39)</a>:</h4>
<p>interesting point. I would expect the profile is mostly targetting active DocumentReference, not entered-in-error.</p>



<a name="278060294"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/DocumentReference%20failed%20validator%20from%20missing%20contentType/near/278060294" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nathan Loyer <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/DocumentReference.20failed.20validator.20from.20missing.20contentType.html#278060294">(Apr 06 2022 at 17:43)</a>:</h4>
<p>I believe in this case the data is soft-deleted in our servers, which we've decided to represent as entered-in-error and not return the data</p>



<a name="278060451"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/DocumentReference%20failed%20validator%20from%20missing%20contentType/near/278060451" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/DocumentReference.20failed.20validator.20from.20missing.20contentType.html#278060451">(Apr 06 2022 at 17:44)</a>:</h4>
<p>I run the resource with HL7 fhir-validator jar. According to the result, you have to provide content-type code. You cannot use DAR extension there.</p>



<a name="278060555"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/DocumentReference%20failed%20validator%20from%20missing%20contentType/near/278060555" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/DocumentReference.20failed.20validator.20from.20missing.20contentType.html#278060555">(Apr 06 2022 at 17:45)</a>:</h4>
<p>The tricky thing is that the content-type has a datatype of <code>code</code>.</p>



<a name="278060722"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/DocumentReference%20failed%20validator%20from%20missing%20contentType/near/278060722" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/DocumentReference.20failed.20validator.20from.20missing.20contentType.html#278060722">(Apr 06 2022 at 17:47)</a>:</h4>
<p>Seems there should be a different profile expectation for entered-in-error. Not unusual for an instance that was formerly published that was eventually found to be wrong, to be marked as entered-in-error to notify previous readers that the data they pulled should be not relied upon, and not unusual for this instance to have all former element values blanked...   (vs delete, which is not very transparent).</p>



<a name="278061197"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/DocumentReference%20failed%20validator%20from%20missing%20contentType/near/278061197" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/DocumentReference.20failed.20validator.20from.20missing.20contentType.html#278061197">(Apr 06 2022 at 17:51)</a>:</h4>
<p>Oh, I got it. contentType has a "required" binding. It shows in the "Full View". So you must provide a value from the bound valueset.</p>
<p><a href="/user_uploads/10155/ZxvrPiOqhTB-2aUL2V4FwehW/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/10155/ZxvrPiOqhTB-2aUL2V4FwehW/image.png" title="image.png"><img src="/user_uploads/10155/ZxvrPiOqhTB-2aUL2V4FwehW/image.png"></a></div>



<a name="278061256"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/DocumentReference%20failed%20validator%20from%20missing%20contentType/near/278061256" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nathan Loyer <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/DocumentReference.20failed.20validator.20from.20missing.20contentType.html#278061256">(Apr 06 2022 at 17:51)</a>:</h4>
<p>right, so what do we do when there isn't actually any content we want to share?</p>



<a name="278061310"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/DocumentReference%20failed%20validator%20from%20missing%20contentType/near/278061310" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nathan Loyer <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/DocumentReference.20failed.20validator.20from.20missing.20contentType.html#278061310">(Apr 06 2022 at 17:51)</a>:</h4>
<p>Seems like we could choose to leave the resource as-is but set the contentType to something. I don't see any mime types that correspond to empty data or null data, but I found a stack overflow page suggesting example/example could be used for this purpose</p>



<a name="278061385"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/DocumentReference%20failed%20validator%20from%20missing%20contentType/near/278061385" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nathan Loyer <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/DocumentReference.20failed.20validator.20from.20missing.20contentType.html#278061385">(Apr 06 2022 at 17:52)</a>:</h4>
<p><a href="https://stackoverflow.com/a/56295737">https://stackoverflow.com/a/56295737</a></p>



<a name="278061627"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/DocumentReference%20failed%20validator%20from%20missing%20contentType/near/278061627" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/DocumentReference.20failed.20validator.20from.20missing.20contentType.html#278061627">(Apr 06 2022 at 17:54)</a>:</h4>
<p>I run some test. These should work</p>
<div class="codehilite"><pre><span></span><code>  &quot;content&quot;: [
    {
      &quot;attachment&quot;: {
        &quot;extension&quot;: [
          {
            &quot;url&quot;: &quot;http://hl7.org/fhir/StructureDefinition/data-absent-reason&quot;,
            &quot;valueCode&quot;: &quot;unknown&quot;
          }
        ]
      },
      &quot;extension&quot;: [
        {
          &quot;url&quot;: &quot;http://hl7.org/fhir/StructureDefinition/data-absent-reason&quot;,
          &quot;valueCode&quot;: &quot;unknown&quot;
        }
      ]
    }
  ],
</code></pre></div>



<a name="278061655"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/DocumentReference%20failed%20validator%20from%20missing%20contentType/near/278061655" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/DocumentReference.20failed.20validator.20from.20missing.20contentType.html#278061655">(Apr 06 2022 at 17:54)</a>:</h4>
<p>I think this is a failure of the specification, not the test tool. right?</p>



<a name="278061764"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/DocumentReference%20failed%20validator%20from%20missing%20contentType/near/278061764" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nathan Loyer <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/DocumentReference.20failed.20validator.20from.20missing.20contentType.html#278061764">(Apr 06 2022 at 17:55)</a>:</h4>
<p><span class="user-mention" data-user-id="191506">@Yunwei Wang</span> that however fails the US Core tests</p>
<div class="codehilite"><pre><span></span><code>        &quot;text&quot;: &quot;us-core-6: &#39;DocumentReference.content.attachment.url or  DocumentReference.content.attachment.data or both SHALL be present.&#39; Rule &#39;DocumentReference.content.attachment.url or  DocumentReference.content.attachment.data or both SHALL be present.&#39; Failed&quot;
</code></pre></div>



<a name="278061920"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/DocumentReference%20failed%20validator%20from%20missing%20contentType/near/278061920" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nathan Loyer <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/DocumentReference.20failed.20validator.20from.20missing.20contentType.html#278061920">(Apr 06 2022 at 17:56)</a>:</h4>
<p>aha!</p>
<div class="codehilite"><pre><span></span><code>&quot;content&quot;: [
      {
        &quot;attachment&quot;: {
          &quot;extension&quot;: [
            {
              &quot;url&quot;: &quot;http://hl7.org/fhir/StructureDefinition/data-absent-reason&quot;,
              &quot;valueCode&quot;: &quot;unknown&quot;
            }
          ],
          &quot;_url&quot;: {
            &quot;extension&quot;: [
              {
                &quot;url&quot;: &quot;http://hl7.org/fhir/StructureDefinition/data-absent-reason&quot;,
                &quot;valueCode&quot;: &quot;unknown&quot;
              }
            ]
          }
        },
        &quot;extension&quot;: [
          {
            &quot;url&quot;: &quot;http://hl7.org/fhir/StructureDefinition/data-absent-reason&quot;,
            &quot;valueCode&quot;: &quot;unknown&quot;
          }
        ]
      }
    ],
</code></pre></div>



<a name="278061932"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/DocumentReference%20failed%20validator%20from%20missing%20contentType/near/278061932" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nathan Loyer <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/DocumentReference.20failed.20validator.20from.20missing.20contentType.html#278061932">(Apr 06 2022 at 17:56)</a>:</h4>
<p>that passes everything</p>



<a name="278061966"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/DocumentReference%20failed%20validator%20from%20missing%20contentType/near/278061966" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/DocumentReference.20failed.20validator.20from.20missing.20contentType.html#278061966">(Apr 06 2022 at 17:57)</a>:</h4>
<p><span aria-label="tada" class="emoji emoji-1f389" role="img" title="tada">:tada:</span></p>



<a name="278061981"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/DocumentReference%20failed%20validator%20from%20missing%20contentType/near/278061981" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nathan Loyer <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/DocumentReference.20failed.20validator.20from.20missing.20contentType.html#278061981">(Apr 06 2022 at 17:57)</a>:</h4>
<p>so I think we can just switch to setting url to have the absent reason and remove content type and data</p>



<a name="278062175"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/DocumentReference%20failed%20validator%20from%20missing%20contentType/near/278062175" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nathan Loyer <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/DocumentReference.20failed.20validator.20from.20missing.20contentType.html#278062175">(Apr 06 2022 at 17:58)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191404">John Moehrke</span> <a href="#narrow/stream/179309-inferno/topic/DocumentReference.20failed.20validator.20from.20missing.20contentType/near/278061655">said</a>:</p>
<blockquote>
<p>I think this is a failure of the specification, not the test tool. right?</p>
</blockquote>
<p>I'm not sure... seems like we have the option to work around this by using url instead of data + contentType</p>



<a name="278062314"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/DocumentReference%20failed%20validator%20from%20missing%20contentType/near/278062314" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/DocumentReference.20failed.20validator.20from.20missing.20contentType.html#278062314">(Apr 06 2022 at 18:00)</a>:</h4>
<p><span class="user-mention" data-user-id="191401">@Eric Haas</span> Is this the correct way to express a DocuemntReference without attachment? It valid (according to validator) but looks strange.</p>



<a name="278063025"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/DocumentReference%20failed%20validator%20from%20missing%20contentType/near/278063025" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/DocumentReference.20failed.20validator.20from.20missing.20contentType.html#278063025">(Apr 06 2022 at 18:05)</a>:</h4>
<p>well, I took this discussion and decided that I will file an "improvement opportunity" for the parallel work using DocumentReference in IHE (aka MHD).</p>



<a name="278063693"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/DocumentReference%20failed%20validator%20from%20missing%20contentType/near/278063693" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nathan Loyer <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/DocumentReference.20failed.20validator.20from.20missing.20contentType.html#278063693">(Apr 06 2022 at 18:10)</a>:</h4>
<p>my teammate pointed out contentType seems to still be required even if url is provided instead of data...</p>



<a name="278068003"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/DocumentReference%20failed%20validator%20from%20missing%20contentType/near/278068003" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/DocumentReference.20failed.20validator.20from.20missing.20contentType.html#278068003">(Apr 06 2022 at 18:40)</a>:</h4>
<p>Yes. you still need to provide contentType. My mistake. I didn't provide <code>-profile</code> parameter in my previous testings.</p>



<a name="278068839"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/DocumentReference%20failed%20validator%20from%20missing%20contentType/near/278068839" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/DocumentReference.20failed.20validator.20from.20missing.20contentType.html#278068839">(Apr 06 2022 at 18:47)</a>:</h4>
<p><span class="user-mention" data-user-id="279806">@Nathan Loyer</span> Your use case is similar to what discussed in this thread: <a href="#narrow/stream/179166-implementers/topic/Period.20Datatype.20Invariant">https://chat.fhir.org/#narrow/stream/179166-implementers/topic/Period.20Datatype.20Invariant</a></p>



<a name="278068982"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/DocumentReference%20failed%20validator%20from%20missing%20contentType/near/278068982" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andrew Feeney <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/DocumentReference.20failed.20validator.20from.20missing.20contentType.html#278068982">(Apr 06 2022 at 18:48)</a>:</h4>
<p>Is it correct for us-core-6 to be checked on an object that is indicated to be missing? That seems strange.</p>



<a name="278070610"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/DocumentReference%20failed%20validator%20from%20missing%20contentType/near/278070610" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/DocumentReference.20failed.20validator.20from.20missing.20contentType.html#278070610">(Apr 06 2022 at 19:01)</a>:</h4>
<p>I tried the latest validator_cli v5.6.40. It gives the same error.</p>



<a name="278076324"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/DocumentReference%20failed%20validator%20from%20missing%20contentType/near/278076324" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/DocumentReference.20failed.20validator.20from.20missing.20contentType.html#278076324">(Apr 06 2022 at 19:47)</a>:</h4>
<p>Entered in error is not the same as missing  US Core latest guidance on entered in error data is here: <a href="http://build.fhir.org/ig/HL7/US-Core/general-guidance.html#representing-entered-in-error-and-deleted-information">http://build.fhir.org/ig/HL7/US-Core/general-guidance.html#representing-entered-in-error-and-deleted-information</a></p>
<p>and it states :</p>
<blockquote>
<p>Note this typically will not be conformant with the US Core or FHIR StructureDefinitions.</p>
</blockquote>



<a name="278076527"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/DocumentReference%20failed%20validator%20from%20missing%20contentType/near/278076527" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/DocumentReference.20failed.20validator.20from.20missing.20contentType.html#278076527">(Apr 06 2022 at 19:48)</a>:</h4>
<p>nice... but then the profile should not allow entered-in-error status... right?</p>



<a name="278081257"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/DocumentReference%20failed%20validator%20from%20missing%20contentType/near/278081257" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nathan Loyer <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/DocumentReference.20failed.20validator.20from.20missing.20contentType.html#278081257">(Apr 06 2022 at 20:24)</a>:</h4>
<p>I guess it seems like you're suggesting if the status is entered-in-error then it is expected for the resource to not conform with the profile... but this data exists on a patient we intended to test with inferno for our certification, so... do we just not use this patient?</p>



<a name="278081293"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/DocumentReference%20failed%20validator%20from%20missing%20contentType/near/278081293" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nathan Loyer <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/DocumentReference.20failed.20validator.20from.20missing.20contentType.html#278081293">(Apr 06 2022 at 20:24)</a>:</h4>
<p>er, patient. I'll edit that</p>



<a name="278150951"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/DocumentReference%20failed%20validator%20from%20missing%20contentType/near/278150951" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/DocumentReference.20failed.20validator.20from.20missing.20contentType.html#278150951">(Apr 07 2022 at 11:45)</a>:</h4>
<p>Yes, i am saying that when status is entered-in-error, it should not be tested against the profiles. Which Eric has found the text that indicates this.</p>



<a name="278151083"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/DocumentReference%20failed%20validator%20from%20missing%20contentType/near/278151083" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/DocumentReference.20failed.20validator.20from.20missing.20contentType.html#278151083">(Apr 07 2022 at 11:46)</a>:</h4>
<p>it is unfortunate that the profiles do allow for entered-in-error, as that implies that they shall be compliant. But together the profile and the note indicate to me that entered-in-error might be compliant, but might not... therefore, no use in validating it.</p>



<a name="278198139"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/DocumentReference%20failed%20validator%20from%20missing%20contentType/near/278198139" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nathan Loyer <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/DocumentReference.20failed.20validator.20from.20missing.20contentType.html#278198139">(Apr 07 2022 at 17:23)</a>:</h4>
<p>Maybe inferno tests should be updated to turn fhir validator failures into warnings when the status is entered-in-error</p>



<a name="278208713"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/DocumentReference%20failed%20validator%20from%20missing%20contentType/near/278208713" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/DocumentReference.20failed.20validator.20from.20missing.20contentType.html#278208713">(Apr 07 2022 at 18:44)</a>:</h4>
<p>Inferno has to follow the US Core v3.1.1 which is required by g10 test procedure. You can <br>
1) raise a JIRA ticket on US Core IG asking to 'patch' US Core 3.1.1 with the same guidance as Eric quoted<br>
2) raise a feedback to ONC to clarify the test procedure on error data</p>



<a name="278220846"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/DocumentReference%20failed%20validator%20from%20missing%20contentType/near/278220846" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nathan Loyer <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/DocumentReference.20failed.20validator.20from.20missing.20contentType.html#278220846">(Apr 07 2022 at 20:20)</a>:</h4>
<p>The us core 3.1.1 docs seem to say the same thing as the page Eric linked:<br>
<a href="https://hl7.org/fhir/us/core/STU3.1.1/general-guidance.html#representing-entered-in-error-and-deleted-information">https://hl7.org/fhir/us/core/STU3.1.1/general-guidance.html#representing-entered-in-error-and-deleted-information</a></p>



<a name="278220883"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/DocumentReference%20failed%20validator%20from%20missing%20contentType/near/278220883" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nathan Loyer <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/DocumentReference.20failed.20validator.20from.20missing.20contentType.html#278220883">(Apr 07 2022 at 20:20)</a>:</h4>
<p>I don't think any updates to the spec are needed</p>



<a name="278221178"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/DocumentReference%20failed%20validator%20from%20missing%20contentType/near/278221178" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nathan Loyer <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/DocumentReference.20failed.20validator.20from.20missing.20contentType.html#278221178">(Apr 07 2022 at 20:23)</a>:</h4>
<p>It doesn't have that note</p>
<blockquote>
<p>Note this typically will not be conformant with the US Core or FHIR StructureDefinitions.</p>
</blockquote>
<p>but it does have </p>
<blockquote>
<p>If the status is entered-in-error:<br>
for patient viewing systems the content of resource SHOULD be removed. In other words a blank resource.<br>
A provider facing system MAY be supplied with additional details that the patient viewing system would typically not have access to.</p>
</blockquote>
<p>which seems to still be the spec saying that if the status is entered-in-error, then it wont be completely compliant with the profiles</p>



<a name="278233669"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/DocumentReference%20failed%20validator%20from%20missing%20contentType/near/278233669" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/DocumentReference.20failed.20validator.20from.20missing.20contentType.html#278233669">(Apr 07 2022 at 22:16)</a>:</h4>
<p>IMO, this is why we have DAR extension. I know the problem here is the BCP code. Other than that, DAR should be used.</p>



<a name="278317408"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/DocumentReference%20failed%20validator%20from%20missing%20contentType/near/278317408" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Drew Torres <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/DocumentReference.20failed.20validator.20from.20missing.20contentType.html#278317408">(Apr 08 2022 at 15:04)</a>:</h4>
<p>The intent of the spec and language was to always hide data that was potentially dangerous to show certain audiences. That is why we carved out the exceptions around entered-in-error. If a provider puts in data for the wrong patient and a patient facing application downloaded that data. The status was a way to cue that application to remove that resource. The intent was to only populate fields that were absolutely required to remain FHIR compliant and not to meet the requirements of the profile....</p>
<p>IMO DAR is getting used a bit too much. Why populate a bunch of fields with DAR unknown? It bloats the resource and articulates nothing more than what the status already did.</p>



<a name="278319320"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/DocumentReference%20failed%20validator%20from%20missing%20contentType/near/278319320" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nathan Loyer <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/DocumentReference.20failed.20validator.20from.20missing.20contentType.html#278319320">(Apr 08 2022 at 15:18)</a>:</h4>
<p>I would agree there. We only add the DAR objects so our resources are compliant with the profiles.</p>



<a name="278319483"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/DocumentReference%20failed%20validator%20from%20missing%20contentType/near/278319483" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nathan Loyer <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/DocumentReference.20failed.20validator.20from.20missing.20contentType.html#278319483">(Apr 08 2022 at 15:20)</a>:</h4>
<p><span class="user-mention silent" data-user-id="279806">Nathan Loyer</span> <a href="#narrow/stream/179309-inferno/topic/DocumentReference.20failed.20validator.20from.20missing.20contentType/near/278061920">said</a>:</p>
<blockquote>
<p>aha!</p>
<p><div class="codehilite"><pre><span></span><code>&quot;content&quot;: [
      {
        &quot;attachment&quot;: {
          &quot;extension&quot;: [
            {
              &quot;url&quot;: &quot;http://hl7.org/fhir/StructureDefinition/data-absent-reason&quot;,
              &quot;valueCode&quot;: &quot;unknown&quot;
            }
          ],
          &quot;_url&quot;: {
            &quot;extension&quot;: [
              {
                &quot;url&quot;: &quot;http://hl7.org/fhir/StructureDefinition/data-absent-reason&quot;,
                &quot;valueCode&quot;: &quot;unknown&quot;
              }
            ]
          }
        },
        &quot;extension&quot;: [
          {
            &quot;url&quot;: &quot;http://hl7.org/fhir/StructureDefinition/data-absent-reason&quot;,
            &quot;valueCode&quot;: &quot;unknown&quot;
          }
        ]
      }
    ],
</code></pre></div><br>
</p>
</blockquote>
<p>So back to the issue at hand... I can't duplicate what I did the other day anymore... I think I might have accidentally scrolled up to much to a previous response or something. I don't have my cli logs for these runs anymore because I rebooted, and I can't replicate my success. So now we're back to the drawing board of what to do for this resource.</p>



<a name="278320477"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/DocumentReference%20failed%20validator%20from%20missing%20contentType/near/278320477" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nathan Loyer <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/DocumentReference.20failed.20validator.20from.20missing.20contentType.html#278320477">(Apr 08 2022 at 15:28)</a>:</h4>
<p>options that I am considering... </p>
<ul>
<li>add a contentType setting to something even though there is no content, could use example/example or something</li>
<li>just hard delete this record so the tests pass</li>
<li>convince yall to update inferno to not fail when a resource with status of entered-in-error resource fails profile validation</li>
</ul>
<p>My preference is the third item :) </p>
<p><span class="user-mention silent" data-user-id="191506">Yunwei Wang</span> <a href="#narrow/stream/179309-inferno/topic/DocumentReference.20failed.20validator.20from.20missing.20contentType/near/278208713">said</a>:</p>
<blockquote>
<p>Inferno has to follow the US Core v3.1.1 which is required by g10 test procedure. You can <br>
1) raise a JIRA ticket on US Core IG asking to 'patch' US Core 3.1.1 with the same guidance as Eric quoted<br>
2) raise a feedback to ONC to clarify the test procedure on error data</p>
</blockquote>
<p>Do you still think those items are necessary to change this? I feel like the current text of 3.1.1 says the same thing as what Eric quoted, albeit less explicitly.</p>



<a name="278321241"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/DocumentReference%20failed%20validator%20from%20missing%20contentType/near/278321241" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/DocumentReference.20failed.20validator.20from.20missing.20contentType.html#278321241">(Apr 08 2022 at 15:34)</a>:</h4>
<p>I think Eric gave the golden quote...</p>



<a name="278322223"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/DocumentReference%20failed%20validator%20from%20missing%20contentType/near/278322223" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nathan Loyer <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/DocumentReference.20failed.20validator.20from.20missing.20contentType.html#278322223">(Apr 08 2022 at 15:41)</a>:</h4>
<p>Right, but that was in the us core 4.0.0 and above and not in 3.1.1</p>



<a name="278322394"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/DocumentReference%20failed%20validator%20from%20missing%20contentType/near/278322394" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/DocumentReference.20failed.20validator.20from.20missing.20contentType.html#278322394">(Apr 08 2022 at 15:42)</a>:</h4>
<p>it does set precedence. and there is no way to change 3.1.1... right?</p>



<a name="278322509"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/DocumentReference%20failed%20validator%20from%20missing%20contentType/near/278322509" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Drew Torres <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/DocumentReference.20failed.20validator.20from.20missing.20contentType.html#278322509">(Apr 08 2022 at 15:43)</a>:</h4>
<p><a href="http://hl7.org/fhir/us/core/STU3.1.1/general-guidance.html#representing-deleted-information">http://hl7.org/fhir/us/core/STU3.1.1/general-guidance.html#representing-deleted-information</a><br>
If the status is entered-in-error:</p>
<p>for patient viewing systems the content of resource SHOULD be removed. In other words a blank resource.</p>



<a name="278322545"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/DocumentReference%20failed%20validator%20from%20missing%20contentType/near/278322545" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Drew Torres <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/DocumentReference.20failed.20validator.20from.20missing.20contentType.html#278322545">(Apr 08 2022 at 15:44)</a>:</h4>
<p>That language is in 3.1.1</p>



<a name="278322649"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/DocumentReference%20failed%20validator%20from%20missing%20contentType/near/278322649" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nathan Loyer <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/DocumentReference.20failed.20validator.20from.20missing.20contentType.html#278322649">(Apr 08 2022 at 15:44)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191404">John Moehrke</span> <a href="#narrow/stream/179309-inferno/topic/DocumentReference.20failed.20validator.20from.20missing.20contentType/near/278322394">said</a>:</p>
<blockquote>
<p>it does set precedence. and there is no way to change 3.1.1... right?</p>
</blockquote>
<p>I believe Yunwei's comments were specifying how we can get 3.1.1 updated to add this bit of clarity, but I'm trying to argue that the current text is sufficient to justify our interpretation.</p>



<a name="278325425"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/DocumentReference%20failed%20validator%20from%20missing%20contentType/near/278325425" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/DocumentReference.20failed.20validator.20from.20missing.20contentType.html#278325425">(Apr 08 2022 at 16:03)</a>:</h4>
<p>First, the narrative in v4.0 is much better than v3.1.1. That is why I mentioned the narrative in v3.1.1 should be 'patched'</p>
<p>I am concerned this could fundamentally change the FHIR validation. Should FHIR validator just ignore any resources with enter-in-error status? </p>
<p>We should be very careful here. If a server only provides "incomplete" (I don't know what the correct phrase is to describe this use case) resources with enter-in-error status, does that server conforms to US Core IG? (<span class="user-mention" data-user-id="191401">@Eric Haas</span> )</p>
<p>Even this is the intention of US Core, (g)(10) certification has higher bar than US Core. According to the test procedure</p>
<div class="codehilite"><pre><span></span><code>The health IT developer demonstrates the ability of the Health IT Module to respond with data that meet the following conditions:
All data elements indicated with a cardinality of one or greater and / or “must support” are included;
</code></pre></div>
<p>ONC has the final word on this test procedure requirement.</p>



<a name="278326425"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/DocumentReference%20failed%20validator%20from%20missing%20contentType/near/278326425" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Drew Torres <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/DocumentReference.20failed.20validator.20from.20missing.20contentType.html#278326425">(Apr 08 2022 at 16:10)</a>:</h4>
<p>The correct course would be to log a JIRA to ONC for clarification on that language, but that language doesn't dictate or take into consideration of conditionality. That language is merely saying that the certified system must support every field that profile calls out. That language was probably included because of how everyone thinks of must support differently. It doesn't say that in the error example that every field must be populated that the profile calls out because the IG specifically calls out the entered-in-error example and allows for the exception.</p>



<a name="278326578"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/DocumentReference%20failed%20validator%20from%20missing%20contentType/near/278326578" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Drew Torres <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/DocumentReference.20failed.20validator.20from.20missing.20contentType.html#278326578">(Apr 08 2022 at 16:11)</a>:</h4>
<p>The question of entered-in-error for any resource... I would say yes because the language is included in a section of specification above specific profile artifacts and each profile should inherit that rule.</p>



<a name="278327268"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/DocumentReference%20failed%20validator%20from%20missing%20contentType/near/278327268" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/DocumentReference.20failed.20validator.20from.20missing.20contentType.html#278327268">(Apr 08 2022 at 16:16)</a>:</h4>
<p>what is the use in having entered-in-error count towards compliance at all? I definitely think it must not be forbidden, but successfully having resources with entered-in-error are simply a fact-of-life. Their existence should be agnostic to compliance.</p>



<a name="278327469"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/DocumentReference%20failed%20validator%20from%20missing%20contentType/near/278327469" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Drew Torres <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/DocumentReference.20failed.20validator.20from.20missing.20contentType.html#278327469">(Apr 08 2022 at 16:18)</a>:</h4>
<p>And to the other question if a server only support "incomplete" data... That has always stumped us. We never know what it means to be "fully" compliant. Because there is a capability statement that include all sorts of operations included in the IG. If the server support only 1 resource is that compliant? I think some people would say yes. </p>
<p>Certification calls out what must be tested and creates the context of compliance here. There isn't anything in certification that says what the IG has called out as being against the rules.</p>



<a name="278327601"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/DocumentReference%20failed%20validator%20from%20missing%20contentType/near/278327601" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Drew Torres <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/DocumentReference.20failed.20validator.20from.20missing.20contentType.html#278327601">(Apr 08 2022 at 16:19)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191404">John Moehrke</span> <a href="#narrow/stream/179309-inferno/topic/DocumentReference.20failed.20validator.20from.20missing.20contentType/near/278327268">said</a>:</p>
<blockquote>
<p>what is the use in having entered-in-error count towards compliance at all? I definitely think it must not be forbidden, but successfully having resources with entered-in-error are simply a fact-of-life. Their existence should be agnostic to compliance.</p>
</blockquote>
<p>Exactly right. It is an unfortunate reality of humans entering data into the system. We cannot hold mistakes up to the same standard and valid data.</p>



<a name="278329462"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/DocumentReference%20failed%20validator%20from%20missing%20contentType/near/278329462" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nathan Loyer <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/DocumentReference.20failed.20validator.20from.20missing.20contentType.html#278329462">(Apr 08 2022 at 16:34)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191506">Yunwei Wang</span> <a href="#narrow/stream/179309-inferno/topic/DocumentReference.20failed.20validator.20from.20missing.20contentType/near/278325425">said</a>:</p>
<blockquote>
<p>I am concerned this could fundamentally change the FHIR validation. Should FHIR validator just ignore any resources with enter-in-error status? </p>
<p>We should be very careful here. If a server only provides "incomplete" (I don't know what the correct phrase is to describe this use case) resources with enter-in-error status, does that server conforms to US Core IG? (<span class="user-mention silent" data-user-id="191401">Eric Haas</span> )</p>
</blockquote>
<p>I would say if a server only returns DocRef resources that are entered-in-error and have no data for anything required, then that would not be compliant, but if the server returns 20 DocRefs for the test patients, 19 of which are fully compliant with the spec, but one has entered-in-error status and no other data, then that should count as being compliant.</p>



<a name="278329562"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/DocumentReference%20failed%20validator%20from%20missing%20contentType/near/278329562" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nathan Loyer <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/DocumentReference.20failed.20validator.20from.20missing.20contentType.html#278329562">(Apr 08 2022 at 16:34)</a>:</h4>
<p>Which that is what is happening for us with our current test runs.</p>



<a name="278329935"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/DocumentReference%20failed%20validator%20from%20missing%20contentType/near/278329935" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nathan Loyer <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/DocumentReference.20failed.20validator.20from.20missing.20contentType.html#278329935">(Apr 08 2022 at 16:37)</a>:</h4>
<p>So it sounds like we need ONC to give us a judgement here, even if that amounts to them approving of our interpretation and giving yall the greenlight to make a corresponding update to the test code without changes to the us core spec. </p>
<p>I've never spoken directly with them, how do we initiate that? You mentioned a Jira board, which one would that be?</p>



<a name="278330619"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/DocumentReference%20failed%20validator%20from%20missing%20contentType/near/278330619" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/DocumentReference.20failed.20validator.20from.20missing.20contentType.html#278330619">(Apr 08 2022 at 16:42)</a>:</h4>
<p>This is an edge case where systems are not going to expose this information to their patients no matter the conformance implications.</p>



<a name="278331266"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/DocumentReference%20failed%20validator%20from%20missing%20contentType/near/278331266" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Drew Torres <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/DocumentReference.20failed.20validator.20from.20missing.20contentType.html#278331266">(Apr 08 2022 at 16:46)</a>:</h4>
<p>Right the question is whether on not we want a bunch of DARs... Which seem like a waste of resources.</p>



<a name="278331538"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/DocumentReference%20failed%20validator%20from%20missing%20contentType/near/278331538" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Drew Torres <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/DocumentReference.20failed.20validator.20from.20missing.20contentType.html#278331538">(Apr 08 2022 at 16:48)</a>:</h4>
<p>Not sure if this is the right place to log a clarifying question to ONC: <a href="https://oncprojectracking.healthit.gov/wiki/olp">https://oncprojectracking.healthit.gov/wiki/olp</a><br>
Create issue: <a href="https://oncprojectracking.healthit.gov/support/login.jsp?os_destination=%2Fsecure%2FCreateIssue%21default.jspa">https://oncprojectracking.healthit.gov/support/login.jsp?os_destination=%2Fsecure%2FCreateIssue%21default.jspa</a><br>
Search issue: <a href="https://oncprojectracking.healthit.gov/support/issues/?jql=">https://oncprojectracking.healthit.gov/support/issues/?jql=</a></p>



<a name="278331587"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/DocumentReference%20failed%20validator%20from%20missing%20contentType/near/278331587" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Drew Torres <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/DocumentReference.20failed.20validator.20from.20missing.20contentType.html#278331587">(Apr 08 2022 at 16:49)</a>:</h4>
<p>I suspect they are going to defer to the spec here.</p>



<a name="278332039"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/DocumentReference%20failed%20validator%20from%20missing%20contentType/near/278332039" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/DocumentReference.20failed.20validator.20from.20missing.20contentType.html#278332039">(Apr 08 2022 at 16:52)</a>:</h4>
<p>That loops back to <span class="user-mention" data-user-id="191404">@John Moehrke</span> 's question. If we say that enter-in-error is an exception from other status, why do we even have enter-in-error in US Core?</p>



<a name="278332475"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/DocumentReference%20failed%20validator%20from%20missing%20contentType/near/278332475" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Drew Torres <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/DocumentReference.20failed.20validator.20from.20missing.20contentType.html#278332475">(Apr 08 2022 at 16:55)</a>:</h4>
<p>Because it isn't a final say that all entered-in-error won't follow us-core... There may be instances where a provider app, or some other integration may be allowed to get all data and may be returned... I think there is some weird thing because it is a status you can't modify the values because it is required and dictated by the base spec. In reality what is probably a good middle ground is some mechanism for a server to communicate at a per resource level if it conforms to the profile for that resource.... Not sure it is really needed, but it is probably the best of both worlds.</p>



<a name="278332608"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/DocumentReference%20failed%20validator%20from%20missing%20contentType/near/278332608" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Drew Torres <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/DocumentReference.20failed.20validator.20from.20missing.20contentType.html#278332608">(Apr 08 2022 at 16:56)</a>:</h4>
<p>Removing entered-in-error from the value set creates another set of problems.</p>



<a name="278334298"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/DocumentReference%20failed%20validator%20from%20missing%20contentType/near/278334298" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/DocumentReference.20failed.20validator.20from.20missing.20contentType.html#278334298">(Apr 08 2022 at 17:07)</a>:</h4>
<p>just because an entered-in-error might be compliant, does not mean that concept needs to be inscope.</p>



<a name="278334403"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/DocumentReference%20failed%20validator%20from%20missing%20contentType/near/278334403" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/DocumentReference.20failed.20validator.20from.20missing.20contentType.html#278334403">(Apr 08 2022 at 17:08)</a>:</h4>
<p>This came out from an edge case that there is not unknown code for contentType. In general, is this a common process for an EHR to serve incomplete resource through FHIR API?</p>



<a name="278334496"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/DocumentReference%20failed%20validator%20from%20missing%20contentType/near/278334496" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Drew Torres <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/DocumentReference.20failed.20validator.20from.20missing.20contentType.html#278334496">(Apr 08 2022 at 17:09)</a>:</h4>
<p>What are you defining as incomplete?</p>



<a name="278334523"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/DocumentReference%20failed%20validator%20from%20missing%20contentType/near/278334523" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Drew Torres <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/DocumentReference.20failed.20validator.20from.20missing.20contentType.html#278334523">(Apr 08 2022 at 17:09)</a>:</h4>
<p>In any definition... the answer is yes.</p>



<a name="278334579"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/DocumentReference%20failed%20validator%20from%20missing%20contentType/near/278334579" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Drew Torres <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/DocumentReference.20failed.20validator.20from.20missing.20contentType.html#278334579">(Apr 08 2022 at 17:09)</a>:</h4>
<p>Because it potentially just as dangerous to "hide" resources to expose "incomplete" resources.</p>



<a name="278334609"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/DocumentReference%20failed%20validator%20from%20missing%20contentType/near/278334609" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/DocumentReference.20failed.20validator.20from.20missing.20contentType.html#278334609">(Apr 08 2022 at 17:10)</a>:</h4>
<p>I found a similar discussion already happened at <br>
<a href="#narrow/stream/179166-implementers/topic/Period.20Datatype.20Invariant">https://chat.fhir.org/#narrow/stream/179166-implementers/topic/Period.20Datatype.20Invariant</a><br>
and<br>
<a href="#narrow/stream/179175-argonaut/topic/US.20Core.3AExtensible.20and.20Required.20bindings.20for.20historical.20data">https://chat.fhir.org/#narrow/stream/179175-argonaut/topic/US.20Core.3AExtensible.20and.20Required.20bindings.20for.20historical.20data</a><br>
and a JIRA ticket<br>
<a href="https://jira.hl7.org/browse/FHIR-25183">https://jira.hl7.org/browse/FHIR-25183</a></p>



<a name="278334863"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/DocumentReference%20failed%20validator%20from%20missing%20contentType/near/278334863" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/DocumentReference.20failed.20validator.20from.20missing.20contentType.html#278334863">(Apr 08 2022 at 17:11)</a>:</h4>
<p>After three years, we are still looking for an answer.</p>



<a name="278334868"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/DocumentReference%20failed%20validator%20from%20missing%20contentType/near/278334868" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Drew Torres <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/DocumentReference.20failed.20validator.20from.20missing.20contentType.html#278334868">(Apr 08 2022 at 17:12)</a>:</h4>
<p>LOL</p>



<a name="278334913"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/DocumentReference%20failed%20validator%20from%20missing%20contentType/near/278334913" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Drew Torres <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/DocumentReference.20failed.20validator.20from.20missing.20contentType.html#278334913">(Apr 08 2022 at 17:12)</a>:</h4>
<p>I was about to day the same thing...</p>



<a name="278335176"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/DocumentReference%20failed%20validator%20from%20missing%20contentType/near/278335176" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Drew Torres <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/DocumentReference.20failed.20validator.20from.20missing.20contentType.html#278335176">(Apr 08 2022 at 17:14)</a>:</h4>
<p>I mean interoperability is hard.... Especially with how people understand things differently, when we have 20+ years of data that don't meet today's standards, and when humans are still involved.. The intent of what we did in US-Core is create meaningful profiles that are usable. We tried to allow for "bad" data to be communicated without being too overbearing to implementers.... The fact that we have an EHR trying to stick DARs for a bunch a fields just to pass a test goes against what we intended.</p>



<a name="278335508"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/DocumentReference%20failed%20validator%20from%20missing%20contentType/near/278335508" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Drew Torres <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/DocumentReference.20failed.20validator.20from.20missing.20contentType.html#278335508">(Apr 08 2022 at 17:17)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191404">John Moehrke</span> <a href="#narrow/stream/179309-inferno/topic/DocumentReference.20failed.20validator.20from.20missing.20contentType/near/278334298">said</a>:</p>
<blockquote>
<p>just because an entered-in-error might be compliant, does not mean that concept needs to be inscope.</p>
</blockquote>
<p>Fair enough. I think some of the things that would have to be figured out if we go down that route (BTW doesn't solve for current certification because SVAP wouldn't include it so the current tests/tools would need to abide by what the IG states currently):<br>
1.)  Are we allowed to change the required status binding? I thought not, but I may be making it up.<br>
2.) How do we remove that one field?<br>
3.) What happens when you have an entered-in-error in a bundle of "compliant" resources? Doesn't the consumer still have to code for this exception anyways?</p>



<a name="278335689"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/DocumentReference%20failed%20validator%20from%20missing%20contentType/near/278335689" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/DocumentReference.20failed.20validator.20from.20missing.20contentType.html#278335689">(Apr 08 2022 at 17:18)</a>:</h4>
<p>Postel's Law</p>



<a name="278335872"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/DocumentReference%20failed%20validator%20from%20missing%20contentType/near/278335872" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Drew Torres <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/DocumentReference.20failed.20validator.20from.20missing.20contentType.html#278335872">(Apr 08 2022 at 17:20)</a>:</h4>
<p>That is always best practice :-D</p>



<a name="278550608"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/DocumentReference%20failed%20validator%20from%20missing%20contentType/near/278550608" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Keith Carlson <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/DocumentReference.20failed.20validator.20from.20missing.20contentType.html#278550608">(Apr 11 2022 at 13:09)</a>:</h4>
<p><span class="user-mention silent" data-user-id="279806">Nathan Loyer</span> <a href="#narrow/stream/179309-inferno/topic/DocumentReference.20failed.20validator.20from.20missing.20contentType/near/278329935">said</a>:</p>
<blockquote>
<p>So it sounds like we need ONC to give us a judgement here, even if that amounts to them approving of our interpretation and giving yall the greenlight to make a corresponding update to the test code without changes to the us core spec. </p>
<p>I've never spoken directly with them, how do we initiate that? You mentioned a Jira board, which one would that be?</p>
</blockquote>
<p>ONC's official inquiry portal is located here: <a href="https://www.healthit.gov/feedback">https://www.healthit.gov/feedback</a> and please feel free to submit your questions to us</p>



<a name="278714284"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/DocumentReference%20failed%20validator%20from%20missing%20contentType/near/278714284" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nathan Loyer <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/DocumentReference.20failed.20validator.20from.20missing.20contentType.html#278714284">(Apr 12 2022 at 16:03)</a>:</h4>
<p>So I was chatting with <span class="user-mention" data-user-id="211704">@Joe Paquette</span> about this today... he pointed out something that I missed, which is that the caveats in the spec about returning empty/blank resources when the status is entered-in-error are specific to patient viewing systems, which I took to mean when the request has a token for a patient standalone launch. There is no claim in here saying that the data should be removed when the request is coming from provider facing systems or backend system/system calls, which I took to mean EHR launch tokens and 2-legged tokens respectively. </p>
<p>Note that when we are running this single patient API test suite, we are using the EHR launch tokens... so that is leading me to believe that we should be returning all of this data if we still have it in the database with the status of entered-in-error. When it's a patient user token making the request the data should be redacted, but all other use cases should return the data if it is available.</p>
<p>I haven't logged a ticket to the ONC Jira yet, we were working on how we wanted to write up the request when we discovered this caveat, which might make a ticket for this unnecessary...</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
