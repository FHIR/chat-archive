---
layout: page
title: "FHIR Chat  · Search when authenticated as a patient · inferno"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/index.html">inferno</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/Search.20when.20authenticated.20as.20a.20patient.html">Search when authenticated as a patient</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="227046382"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/Search%20when%20authenticated%20as%20a%20patient/near/227046382" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lakshmi Bhamidipati <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/Search.20when.20authenticated.20as.20a.20patient.html#227046382">(Feb 19 2021 at 23:32)</a>:</h4>
<p>Hello,<br>
When I am authenticated as a patient and have a patient token, the tool allows search using name, birthDate etc..<br>
../Patient?birthdate=1990-01-01&amp;name=Defect ,<br>
We coded such that the FHIR server returns an access violation (a patient should not be allowed to search another patient's data) .<br>
The Inferno test is expecting a success. <br>
Please advise.<br>
Thank you.</p>



<a name="227274538"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/Search%20when%20authenticated%20as%20a%20patient/near/227274538" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert Scanlon <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/Search.20when.20authenticated.20as.20a.20patient.html#227274538">(Feb 22 2021 at 14:31)</a>:</h4>
<p>There is the assumption on the US Core 3.1.1 tests ('Single Patient API' for ONC Standardized API certification) that a token is being used that provides sufficient access to perform all required US Core searches.  Otherwise we have no way of verifying support for all required US Core searches.  In other words, a token with full access to the required searches is prerequisite for the test.</p>



<a name="227274962"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/Search%20when%20authenticated%20as%20a%20patient/near/227274962" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert Scanlon <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/Search.20when.20authenticated.20as.20a.20patient.html#227274962">(Feb 22 2021 at 14:33)</a>:</h4>
<p>It isn't clear to me that your implementation is the proper behavior.  Another way for you to handle this search is to allow patients to search by birthdate/name, but restrict it such that it will at most return their own patient record.</p>



<a name="227277026"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/Search%20when%20authenticated%20as%20a%20patient/near/227277026" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert Scanlon <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/Search.20when.20authenticated.20as.20a.20patient.html#227277026">(Feb 22 2021 at 14:48)</a>:</h4>
<p>Just like how a patient doing a search with a patient-scoped bearer token for Condition?patient=[my_patientid] needs to return records if they exist, but searching for Condition?patient=[someone_elses_patient_id] must not return any records.  Abstractly it would be more consistent to have the search by birthdate/name be the same, where searching by their own name/birthdate gives them back the record they have access to (their own), and searching by someone elses name/birthdate does not return any records.</p>



<a name="227277534"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/Search%20when%20authenticated%20as%20a%20patient/near/227277534" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert Scanlon <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/Search.20when.20authenticated.20as.20a.20patient.html#227277534">(Feb 22 2021 at 14:51)</a>:</h4>
<p>However, I can't think of a reason why allowing patients to search for their own record by name/birthdate is useful, and I'm not aware of anywhere that states that your interpretation is invalid (just deny patients ever from searching by birthdate/name), so the other option for our testing is for you to use a user-level token that does have access to searching by that to demonstrate support.</p>



<a name="227280201"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/Search%20when%20authenticated%20as%20a%20patient/near/227280201" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert Scanlon <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/Search.20when.20authenticated.20as.20a.20patient.html#227280201">(Feb 22 2021 at 15:08)</a>:</h4>
<p>This may be a good question for <span class="user-mention" data-user-id="191410">@Brett Marquard</span> and <span class="user-mention" data-user-id="191401">@Eric Haas</span> .  Do patients need to have access to searching <code>Patient?birthdate=[their_birthdate]&amp;name=[their_name]</code>, which will return their own record if they put in the right birthdate/name?  Or is it valid for systems to decide to deny the whole search because it isn't intended to be used by patients using a patient-scoped token?</p>



<a name="227298004"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/Search%20when%20authenticated%20as%20a%20patient/near/227298004" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lakshmi Bhamidipati <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/Search.20when.20authenticated.20as.20a.20patient.html#227298004">(Feb 22 2021 at 16:48)</a>:</h4>
<p><span class="user-mention" data-user-id="192576">@Robert Scanlon</span> - Thank you. For patient scoped tokens, as you mentioned, I guess we would have to code such that the search result returns just 1 record (ie the patient's own record) if there is a match with DOB or identifier or name, instead of throwing an error.</p>



<a name="227298053"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/Search%20when%20authenticated%20as%20a%20patient/near/227298053" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/Search.20when.20authenticated.20as.20a.20patient.html#227298053">(Feb 22 2021 at 16:49)</a>:</h4>
<p>I agree the logical intent of this particular search is for providers and agree this is expected system behavior:</p>
<blockquote>
<p>Another way for you to handle this search is to allow patients to search by birthdate/name, but restrict it such that it will at most return their own patient record.</p>
</blockquote>
<p>We have not considered the intersection of scope and search in the IG and am reluctant to consider it unless the community sees it as a critical issue.</p>



<a name="227303798"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/Search%20when%20authenticated%20as%20a%20patient/near/227303798" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert Scanlon <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/Search.20when.20authenticated.20as.20a.20patient.html#227303798">(Feb 22 2021 at 17:21)</a>:</h4>
<p><span class="user-mention" data-user-id="224800">@Lakshmi Bhamidipati</span> -- yes, that is what you would need to do to pass the tests while using a patient scoped token.  Which sounds like the expected behavior based on <span class="user-mention" data-user-id="191401">@Eric Haas</span>'s response.  Though to be precise, you only need to support <a href="https://www.hl7.org/fhir/us/core/StructureDefinition-us-core-patient.html#mandatory-search-parameters">DOB searches when paired with name</a>  as defined in the mandatory search parameters section.  Though you can support searching by DOB without name too if you'd like.</p>



<a name="227314700"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/Search%20when%20authenticated%20as%20a%20patient/near/227314700" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lakshmi Bhamidipati <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/Search.20when.20authenticated.20as.20a.20patient.html#227314700">(Feb 22 2021 at 18:32)</a>:</h4>
<p><span class="user-mention" data-user-id="192576">@Robert Scanlon</span>  - Other mandatory searches need to follow the same logic too, correct? -<br>
SHALL support searching for a patient by a string match of any part of name using the name search parameter<br>
SHALL support searching using the combination of the gender and name search parameters<br>
SHALL support searching a patient by an identifier such as a MPI using the identifier search parameter<br>
Thanks!</p>



<a name="227316618"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/Search%20when%20authenticated%20as%20a%20patient/near/227316618" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert Scanlon <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/Search.20when.20authenticated.20as.20a.20patient.html#227316618">(Feb 22 2021 at 18:45)</a>:</h4>
<p>Yes, the same logic would apply to all mandatory searches on the Patient resource.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
