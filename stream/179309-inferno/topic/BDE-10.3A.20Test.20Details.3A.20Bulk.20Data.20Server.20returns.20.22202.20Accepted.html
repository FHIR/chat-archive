---
layout: page
title: "FHIR Chat  · BDE-10: Test Details: Bulk Data Server returns &quot;202 Accepted · inferno"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/index.html">inferno</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/BDE-10.3A.20Test.20Details.3A.20Bulk.20Data.20Server.20returns.20.22202.20Accepted.html">BDE-10: Test Details: Bulk Data Server returns &quot;202 Accepted</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="269135775"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/BDE-10%3A%20Test%20Details%3A%20Bulk%20Data%20Server%20returns%20%22202%20Accepted/near/269135775" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michelle Vondercrone <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/BDE-10.3A.20Test.20Details.3A.20Bulk.20Data.20Server.20returns.20.22202.20Accepted.html#269135775">(Jan 24 2022 at 16:59)</a>:</h4>
<p>Inferno test is for Delete Request, but Inferno is making GET request to the /$export, whereas, it should have sent a DELETE request to the content-location URL.</p>
<p>I have never opened a ticket to Inferno before, but there needs to be one opened for this.  If someone could walk me through how to do that, I'd appreciate it.</p>



<a name="269143889"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/BDE-10%3A%20Test%20Details%3A%20Bulk%20Data%20Server%20returns%20%22202%20Accepted/near/269143889" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/BDE-10.3A.20Test.20Details.3A.20Bulk.20Data.20Server.20returns.20.22202.20Accepted.html#269143889">(Jan 24 2022 at 17:56)</a>:</h4>
<p>BDE-10 has two queries. The first is, as you mentioned, a GET to the $export endpoint to generate a new export request. The 2nd is a DELETE request to cancel the just created export request. The reason is that Inferno uses the export request created in BED-06 in the next test sequence "Group Compartment Export Validation Tests". Depending on server's business logic, the server MAY remove exported files with the DELETE request. To avoid that from happening, BED-10 creates and then deletes a separated $export request.</p>



<a name="269149550"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/BDE-10%3A%20Test%20Details%3A%20Bulk%20Data%20Server%20returns%20%22202%20Accepted/near/269149550" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/BDE-10.3A.20Test.20Details.3A.20Bulk.20Data.20Server.20returns.20.22202.20Accepted.html#269149550">(Jan 24 2022 at 18:36)</a>:</h4>
<p>BTW, <span class="user-mention" data-user-id="258504">@Michelle Vondercrone</span> here is how to open an Inferno ticket: <br>
If you are using web client, no matter it is <a href="http://inferno.healthit.gov">inferno.healthit.gov</a> or locally installed docker image, you could find the "Issues" link at the bottom of page, like<br>
<a href="/user_uploads/10155/mgoNus9VTjjVin2BukytBaeC/image.png">image.png</a> <br>
That "Issues" link redirects to either <a href="https://github.com/onc-healthit/inferno-program/issues">https://github.com/onc-healthit/inferno-program/issues</a> (for Inferno Program edition) or <a href="https://github.com/onc-healthit/inferno/issues">https://github.com/onc-healthit/inferno/issues</a> (for Inferno Community edition).<br>
Then you can create a new issue for Inferno following the template.</p>
<div class="message_inline_image"><a href="/user_uploads/10155/mgoNus9VTjjVin2BukytBaeC/image.png" title="image.png"><img src="/user_uploads/10155/mgoNus9VTjjVin2BukytBaeC/image.png"></a></div>



<a name="269179314"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/BDE-10%3A%20Test%20Details%3A%20Bulk%20Data%20Server%20returns%20%22202%20Accepted/near/269179314" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michelle Vondercrone <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/BDE-10.3A.20Test.20Details.3A.20Bulk.20Data.20Server.20returns.20.22202.20Accepted.html#269179314">(Jan 24 2022 at 22:03)</a>:</h4>
<p>Problem wit BDE-10 for me is that we have coded condition where if the request is the same (same _type, same _since, same group id) and has not been previously deleted, we will return a http 409 for duplicate request.  :(</p>



<a name="269431462"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/BDE-10%3A%20Test%20Details%3A%20Bulk%20Data%20Server%20returns%20%22202%20Accepted/near/269431462" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michelle Vondercrone <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/BDE-10.3A.20Test.20Details.3A.20Bulk.20Data.20Server.20returns.20.22202.20Accepted.html#269431462">(Jan 26 2022 at 15:43)</a>:</h4>
<p><span class="user-mention" data-user-id="191506">@Yunwei Wang</span>  - any suggestions related to my previous comment?  Should I open a ticket to Inferno requesting changes for this test?</p>



<a name="269439405"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/BDE-10%3A%20Test%20Details%3A%20Bulk%20Data%20Server%20returns%20%22202%20Accepted/near/269439405" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/BDE-10.3A.20Test.20Details.3A.20Bulk.20Data.20Server.20returns.20.22202.20Accepted.html#269439405">(Jan 26 2022 at 16:27)</a>:</h4>
<p><span class="user-mention" data-user-id="258504">@Michelle Vondercrone</span> sorry that I missed your reply. This is an interesting use case. Think about this work flow:</p>
<ol>
<li>Client creates an $export request, </li>
<li>Server generates nsjson files, </li>
<li>Client downloads those files (optional), </li>
<li>Client create another $export request (with the same parameters: _type, _since, group id)<br>
Does your server reject the 2nd $export request in this work flow?</li>
</ol>



<a name="269442110"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/BDE-10%3A%20Test%20Details%3A%20Bulk%20Data%20Server%20returns%20%22202%20Accepted/near/269442110" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michelle Vondercrone <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/BDE-10.3A.20Test.20Details.3A.20Bulk.20Data.20Server.20returns.20.22202.20Accepted.html#269442110">(Jan 26 2022 at 16:43)</a>:</h4>
<p><span class="user-mention" data-user-id="191506">@Yunwei Wang</span>  <br>
Yes, for #4 above, we would reject with a http 409 Duplicate Request.  We supply an Operation Outcome with this information: </p>
<ol>
<li>Severity = Error</li>
<li>Code = Duplicate</li>
<li>Details/Text = Existing request &lt;92d73dec-b9e8-436d-bc10-24deaa3287b8&gt; from population application  has the same parameter values. If the same export request is desired to pick up the latest data, a Delete Request can be performed against the existing request using URL: &lt;[http://ASCAPPNV8560.usmlvv1d0a.smshsc.net/Patientapi/fhir-api/bulk-api/r4/request/92d73dec-b9e8-436d-bc10-24deaa3287b8]&gt;.</li>
<li>Diagnostics = Duplicate request received from population application  using the same values in _since parameter and in _type parameter. Reference id for support: [d948ebfa-6c3d-4a51-8d8b-a57685faaf26].</li>
</ol>
<p>If a DELETE request is sent (or a cancel request from a Request Manager UI we've created), then we set a Purge status = requested and then a new group export with those same values would be accepted without failure.</p>



<a name="269444480"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/BDE-10%3A%20Test%20Details%3A%20Bulk%20Data%20Server%20returns%20%22202%20Accepted/near/269444480" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/BDE-10.3A.20Test.20Details.3A.20Bulk.20Data.20Server.20returns.20.22202.20Accepted.html#269444480">(Jan 26 2022 at 16:57)</a>:</h4>
<p>This is interesting because after server generates ndjson files, the $export request is in complete status as defined <a href="http://hl7.org/fhir/uv/bulkdata/STU1.0.1/export/index.html#response---complete-status">here</a>. Why does a server require client to send DELETE to a completed $export request? Assume a client runs daily export job, the client has to DELETE prior day's export first in order to run current day's export. Is that correct?</p>



<a name="269459861"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/BDE-10%3A%20Test%20Details%3A%20Bulk%20Data%20Server%20returns%20%22202%20Accepted/near/269459861" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/BDE-10.3A.20Test.20Details.3A.20Bulk.20Data.20Server.20returns.20.22202.20Accepted.html#269459861">(Jan 26 2022 at 18:36)</a>:</h4>
<p>Presumably the current day export would have a different _since from the last day one</p>



<a name="269460014"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/BDE-10%3A%20Test%20Details%3A%20Bulk%20Data%20Server%20returns%20%22202%20Accepted/near/269460014" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/BDE-10.3A.20Test.20Details.3A.20Bulk.20Data.20Server.20returns.20.22202.20Accepted.html#269460014">(Jan 26 2022 at 18:37)</a>:</h4>
<p>But still it seems fine for clients to request twice the same exact export - maybe the files got corrupted somehow, or maybe it just want all the new data and also the one it already got. I don't think a server should reject that</p>



<a name="269461629"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179309-inferno/topic/BDE-10%3A%20Test%20Details%3A%20Bulk%20Data%20Server%20returns%20%22202%20Accepted/near/269461629" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179309-inferno/topic/BDE-10.3A.20Test.20Details.3A.20Bulk.20Data.20Server.20returns.20.22202.20Accepted.html#269461629">(Jan 26 2022 at 18:49)</a>:</h4>
<p>Yes. I think it is reasonable to limit a client having one "processing" request at any time point but a server should allow a client to create new request after previous one completed.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
