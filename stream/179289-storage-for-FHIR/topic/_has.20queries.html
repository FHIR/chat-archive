---
layout: page
title: "FHIR Chat  · _has queries · storage for FHIR"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179289-storage-for-FHIR/index.html">storage for FHIR</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179289-storage-for-FHIR/topic/_has.20queries.html">_has queries</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="169204161"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179289-storage%20for%20FHIR/topic/_has%20queries/near/169204161" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andrew Blundell <a href="https://fhir.github.io/chat-archive/stream/179289-storage-for-FHIR/topic/_has.20queries.html#169204161">(Jun 28 2019 at 07:27)</a>:</h4>
<p>Hi, I'm trying (but struggling) to query my HAPI FHIR server across multiple resource types (applying conditions to each of those resource types within the one query), and I think _has is the correct query construction, but I can't find any suitable examples.</p>
<p>Here are a couple of examples of the sorts of queries I'm trying to do -</p>
<p>1. Fetch all patient resources of a particular gender who have no associated communication resources<br>
2. Fetch all patient resources within an age range who have at least one associated observation resource with specific attributes<br>
Is anyone able to confirm whether this sort of thing is possible using _has (or using some other construction), ideally pointing me at some handy examples?</p>
<p>Thanks very much!</p>



<a name="179408812"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179289-storage%20for%20FHIR/topic/_has%20queries/near/179408812" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Christiaan Knaap <a href="https://fhir.github.io/chat-archive/stream/179289-storage-for-FHIR/topic/_has.20queries.html#179408812">(Oct 30 2019 at 07:41)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="228286">@Andrew Blundell</span> ,</p>
<p>A bit late, but:</p>
<ol>
<li>There is no way in the search mechanism to find missing references (:not can't be combined with _has).</li>
<li>{{url}}/Patient?birthdate=gt2010-01-01&amp;birthdate=lt2011-01-01&amp;_has:Observation:patient:code=abc<br>
where 'patient' is the reference from the Observation to Patient and 'code' is a searchparameter on Observation.<br>
You cannot AND multiple searchparameters on Observation in the way you could in a SQL subquery.<br>
So you can't say that Patient must have an Observation with code=abc AND status=final.</li>
</ol>
<p>(BTW: This question was probably overlooked because it was in the storage stream - <a class="stream" data-stream-id="179166" href="/#narrow/stream/179166-implementers">#implementers</a> was probably a better fit).</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
