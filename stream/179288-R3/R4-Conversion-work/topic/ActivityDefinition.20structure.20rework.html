---
layout: page
title: "FHIR Chat  · ActivityDefinition structure rework · R3/R4 Conversion work"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179288-R3/R4-Conversion-work/index.html">R3/R4 Conversion work</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179288-R3/R4-Conversion-work/topic/ActivityDefinition.20structure.20rework.html">ActivityDefinition structure rework</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="154021408"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179288-R3/R4%20Conversion%20work/topic/ActivityDefinition%20structure%20rework/near/154021408" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kenneth Myhra <a href="https://fhir.github.io/chat-archive/stream/179288-R3/R4-Conversion-work/topic/ActivityDefinition.20structure.20rework.html#154021408">(Nov 28 2018 at 20:15)</a>:</h4>
<p>I'm working on the AcitvityDefinition map and trying to map contributor (R3) to author, editor, etc (R4).</p>
<p>I have the following conditions, but I still end up with all 4 fields in my R4 output as if all the conditions evaluate to true. The R3 input contains only one contributor of type "author".</p>
<div class="codehilite"><pre><span></span>  src.contributor as vs where vs.type = &quot;author&quot; then {
    vs.contact -&gt; tgt.author;
  };
  src.contributor as vs where vs.type = &quot;editor&quot; then {
    vs.contact -&gt; tgt.editor;
  };
  src.contributor as vs where vs.type = &quot;reviewer&quot; then {
    vs.contact -&gt; tgt.reviewer;
  };
  src.contributor as vs where vs.type = &quot;endorser&quot; then {
    vs.contact -&gt; tgt.endorser;
  };
</pre></div>



<a name="154021446"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179288-R3/R4%20Conversion%20work/topic/ActivityDefinition%20structure%20rework/near/154021446" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179288-R3/R4-Conversion-work/topic/ActivityDefinition.20structure.20rework.html#154021446">(Nov 29 2018 at 02:01)</a>:</h4>
<p>copy how I did it in Library</p>



<a name="154021485"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179288-R3/R4%20Conversion%20work/topic/ActivityDefinition%20structure%20rework/near/154021485" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kenneth Myhra <a href="https://fhir.github.io/chat-archive/stream/179288-R3/R4-Conversion-work/topic/ActivityDefinition.20structure.20rework.html#154021485">(Nov 29 2018 at 07:55)</a>:</h4>
<p>Thanks, that did the trick! One outstanding issue on ActivityDefintion before I can consider it done. I can't map ReferralRequest for attribute kind since it is not part of <a href="http://build.fhir.org/valueset-request-resource-types.html" target="_blank" title="http://build.fhir.org/valueset-request-resource-types.html">http://build.fhir.org/valueset-request-resource-types.html</a>. Should I just ignore it?</p>



<a name="154021501"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179288-R3/R4%20Conversion%20work/topic/ActivityDefinition%20structure%20rework/near/154021501" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179288-R3/R4-Conversion-work/topic/ActivityDefinition.20structure.20rework.html#154021501">(Nov 29 2018 at 08:22)</a>:</h4>
<p>it changes to...</p>



<a name="154021505"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179288-R3/R4%20Conversion%20work/topic/ActivityDefinition%20structure%20rework/near/154021505" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179288-R3/R4-Conversion-work/topic/ActivityDefinition.20structure.20rework.html#154021505">(Nov 29 2018 at 08:23)</a>:</h4>
<p>ServiceRequest</p>



<a name="154021507"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179288-R3/R4%20Conversion%20work/topic/ActivityDefinition%20structure%20rework/near/154021507" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kenneth Myhra <a href="https://fhir.github.io/chat-archive/stream/179288-R3/R4-Conversion-work/topic/ActivityDefinition.20structure.20rework.html#154021507">(Nov 29 2018 at 08:24)</a>:</h4>
<p>Thanks!</p>



<a name="154021509"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179288-R3/R4%20Conversion%20work/topic/ActivityDefinition%20structure%20rework/near/154021509" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179288-R3/R4-Conversion-work/topic/ActivityDefinition.20structure.20rework.html#154021509">(Nov 29 2018 at 08:25)</a>:</h4>
<p>I'm going to do the ReferralRequest --&gt; ServiceRequest now</p>



<a name="154021515"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179288-R3/R4%20Conversion%20work/topic/ActivityDefinition%20structure%20rework/near/154021515" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kenneth Myhra <a href="https://fhir.github.io/chat-archive/stream/179288-R3/R4-Conversion-work/topic/ActivityDefinition.20structure.20rework.html#154021515">(Nov 29 2018 at 08:34)</a>:</h4>
<p>How do we usually merge a conceptmap back to R4 when two values have merged like in the ServiceRequest case. It now maps both ProcedureRequest and ReferralRequest to ServiceRequest, just pick one? :)</p>



<a name="154021516"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179288-R3/R4%20Conversion%20work/topic/ActivityDefinition%20structure%20rework/near/154021516" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179288-R3/R4-Conversion-work/topic/ActivityDefinition.20structure.20rework.html#154021516">(Nov 29 2018 at 08:35)</a>:</h4>
<p>it's tricky... but there was a case in R3...</p>



<a name="154021519"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179288-R3/R4%20Conversion%20work/topic/ActivityDefinition%20structure%20rework/near/154021519" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179288-R3/R4-Conversion-work/topic/ActivityDefinition.20structure.20rework.html#154021519">(Nov 29 2018 at 08:45)</a>:</h4>
<p>look in implementations\r2maps\R3toR2\ProcedureRequestDO.map</p>



<a name="154021537"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179288-R3/R4%20Conversion%20work/topic/ActivityDefinition%20structure%20rework/near/154021537" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kenneth Myhra <a href="https://fhir.github.io/chat-archive/stream/179288-R3/R4-Conversion-work/topic/ActivityDefinition.20structure.20rework.html#154021537">(Nov 29 2018 at 09:33)</a>:</h4>
<p>Issued a PR for ActivityDefinition now. I'll look into the conceptmap thingy tonight</p>



<a name="154021563"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179288-R3/R4%20Conversion%20work/topic/ActivityDefinition%20structure%20rework/near/154021563" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179288-R3/R4-Conversion-work/topic/ActivityDefinition.20structure.20rework.html#154021563">(Nov 29 2018 at 10:11)</a>:</h4>
<p>great. I just made a PR for working conversions for those resources</p>



<a name="154026155"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179288-R3/R4%20Conversion%20work/topic/ActivityDefinition%20structure%20rework/near/154026155" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kenneth Myhra <a href="https://fhir.github.io/chat-archive/stream/179288-R3/R4-Conversion-work/topic/ActivityDefinition.20structure.20rework.html#154026155">(Dec 18 2018 at 20:17)</a>:</h4>
<blockquote>
<p>look in implementations\r2maps\R3toR2\ProcedureRequestDO.map</p>
</blockquote>
<p>Sorry for late answer, but I looked into this and there was no obvious discriminator like the intent attribute for ProcedureRequest that lets me convert back to R3 easily</p>



<a name="154026161"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179288-R3/R4%20Conversion%20work/topic/ActivityDefinition%20structure%20rework/near/154026161" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179288-R3/R4-Conversion-work/topic/ActivityDefinition.20structure.20rework.html#154026161">(Dec 18 2018 at 20:38)</a>:</h4>
<p>no. it's an underlying challenge</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
