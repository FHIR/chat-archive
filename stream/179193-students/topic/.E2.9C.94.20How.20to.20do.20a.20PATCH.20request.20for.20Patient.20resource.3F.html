---
layout: page
title: "FHIR Chat  · ✔ How to do a PATCH request for Patient resource? · students"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179193-students/index.html">students</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179193-students/topic/.E2.9C.94.20How.20to.20do.20a.20PATCH.20request.20for.20Patient.20resource.3F.html">✔ How to do a PATCH request for Patient resource?</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="251703394"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179193-students/topic/%E2%9C%94%20How%20to%20do%20a%20PATCH%20request%20for%20Patient%20resource%3F/near/251703394" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hank Lenzi <a href="https://fhir.github.io/chat-archive/stream/179193-students/topic/.E2.9C.94.20How.20to.20do.20a.20PATCH.20request.20for.20Patient.20resource.3F.html#251703394">(Sep 02 2021 at 12:00)</a>:</h4>
<p>Hi everyone --<br>
I've created, successfully, a Patient Resource, but then I tried to do a PATCH request, adding ("op":"add") maritalStatus, and the server (I'm using the one on: <a href="https://github.com/hapifhir/hapi-fhir-jpaserver-starter">https://github.com/hapifhir/hapi-fhir-jpaserver-starter</a> installed via docker container) responded with the following diagnostics error below. Why? </p>
<p>{<br>
  "resourceType": "OperationOutcome",<br>
  "text": {<br>
    "status": "generated",<br>
    "div": "&lt;div xmlns=\"http://www.w3.org/1999/xhtml\"&gt;&lt;h1&gt;Operation Outcome&lt;/h1&gt;&lt;table border=\"0\"&gt;&lt;tr&gt;&lt;td style=\"font-weight: bold;\"&gt;ERROR&lt;/td&gt;&lt;td&gt;[]&lt;/td&gt;&lt;td&gt;&lt;pre&gt;parent of node to add does not exist&lt;/pre&gt;&lt;/td&gt;\n\t\t\t&lt;/tr&gt;\n\t\t&lt;/table&gt;\n\t&lt;/div&gt;"<br>
  },<br>
  "issue": [ {<br>
    "severity": "error",<br>
    "code": "processing",<br>
    "diagnostics": "parent of node to add does not exist"<br>
  } ]<br>
}</p>
<p>The resource was this patient:</p>
<p>{<br>
  "resourceType": "Patient",<br>
  "identifier": [<br>
    {<br>
      "value": "Johny"<br>
    }<br>
  ],<br>
  "name": [<br>
    {<br>
      "family": "Goode",<br>
      "given": [<br>
        "Johny B."<br>
      ]<br>
    }<br>
  ],<br>
  "telecom": [<br>
    {<br>
      "value": "(03) 5555 6789",<br>
      "use": "home"<br>
    }<br>
  ],<br>
  "gender": "male",<br>
  "birthDate": "1977-07-17",<br>
  "address": [<br>
    {<br>
      "line": [<br>
        "3300 Washtenaw"<br>
      ],<br>
      "city": "Ann Harbour",<br>
      "district": "Washtenaw",<br>
      "state": "MI",<br>
      "postalCode": "48104",<br>
      "country": "EUA"<br>
    }<br>
  ],<br>
  "communication": [<br>
    {<br>
      "language": {<br>
        "coding": [<br>
          {<br>
            "system": "urn:ietf:bcp:47",<br>
            "code": "pt-br",<br>
            "display": "Português"<br>
          }<br>
        ]<br>
      }<br>
    }<br>
  ]<br>
}</p>
<p>And this is the curl PATCH command:<br>
curl -X PATCH -H "Content-Type: application/json-patch+json" -d '[ { "op" : "add",  "path" : "/maritalStatus/text", "value" : "Polygamous" } ]' <a href="http://localhost:8080/fhir/Patient/1">http://localhost:8080/fhir/Patient/1</a></p>
<p>TIA <br>
-- Hank</p>



<a name="251750662"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179193-students/topic/%E2%9C%94%20How%20to%20do%20a%20PATCH%20request%20for%20Patient%20resource%3F/near/251750662" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179193-students/topic/.E2.9C.94.20How.20to.20do.20a.20PATCH.20request.20for.20Patient.20resource.3F.html#251750662">(Sep 02 2021 at 17:14)</a>:</h4>
<p>"maritalStatus" isn't an element you can add.  You'd have to add an 'extension' element (with the relevant URL and value children)</p>



<a name="251751844"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179193-students/topic/%E2%9C%94%20How%20to%20do%20a%20PATCH%20request%20for%20Patient%20resource%3F/near/251751844" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hank Lenzi <a href="https://fhir.github.io/chat-archive/stream/179193-students/topic/.E2.9C.94.20How.20to.20do.20a.20PATCH.20request.20for.20Patient.20resource.3F.html#251751844">(Sep 02 2021 at 17:20)</a>:</h4>
<p>Oh, I see...because it said "extensible" on the Patient resource page...Thanks, Lloyd</p>



<a name="251763270"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179193-students/topic/%E2%9C%94%20How%20to%20do%20a%20PATCH%20request%20for%20Patient%20resource%3F/near/251763270" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hank Lenzi <a href="https://fhir.github.io/chat-archive/stream/179193-students/topic/.E2.9C.94.20How.20to.20do.20a.20PATCH.20request.20for.20Patient.20resource.3F.html#251763270">(Sep 02 2021 at 18:29)</a>:</h4>
<p>Hi --</p>
<p>I finally understood how to get (non-extension) JSON patches to work. So I'm posting a (self)follow-up here, for the record, because it might be of interest to other newbies. <br>
For the current task, I wish to to add a new telephone number. Currently, for the above patient, it is:</p>
<p>"telecom": [ {<br>
    "value": "(03) 5555 6789",<br>
    "use": "home"<br>
  } ],</p>
<p>By reading the Patient resource, we can see that telecom has arity 0..*. This means this will boil down to a JSON array. <br>
Also, we see, by reading the Patient resource page and following telecom that it of type ContactPoint.<br>
ContactPoint is a General-Purpose FHIR Data Type, and, according to:<br>
<a href="http://hl7.org/fhir/r4/datatypes.html#ContactPoint">http://hl7.org/fhir/r4/datatypes.html#ContactPoint</a><br>
it can be defined wrt to system (code:phone | fax | email | pager | url | sms | other), value(string), use(code:home | work | temp | old | mobile), etc<br>
Patient → telecom → ContactPoint (General-Purpose Data types) → ContactPoint </p>
<p>Let's try to add the following work number: (03) 5555-5555 which, again, has to fit here:<br>
  "telecom": [ {<br>
    "value": "(03) 5555 6789",<br>
    "use": "home"<br>
  } ],</p>
<p>Let's read the JSON PATCH RFC, shall we?<br>
<a href="https://datatracker.ietf.org/doc/html/rfc6902#page-12">https://datatracker.ietf.org/doc/html/rfc6902#page-12</a></p>
<p>Adding an Array Element</p>
<p>An example target JSON document:</p>
<p>{ "foo": [ "bar", "baz" ] }</p>
<p>A JSON Patch document:</p>
<p>[<br>
     { "op": "add", "path": "/foo/1", "value": "qux" }<br>
   ]</p>
<p>So, likewise, in our case, we'll be adding an element to an array (the telcom array). What element? Well, a set of the following key/value pairs:<br>
{ "value": "(03) 5555 6789",  "use": "home"   }<br>
and we will choose to add it in the "1" position of the telecom array. So, by following the RFC, we conclude that the JSON syntax we need for our patch is:<br>
[ <br>
   { "op" : "add", "path" : "/telecom/1", "value" : { "value" : "(03) 5555-5555", "use" : "work" } } <br>
]</p>
<p>We use curl for this:<br>
curl -X PATCH -H "Accept: Accept: application/fhir+json; fhirVersion=4.0" -H "Content-Type: application/json-patch+json" -d '[ { "op" : "add", "path" : "/telecom/1", "value" : { "value" : "(03) 5555-5555", "use" : "work" } } ]' <a href="http://localhost:8080/fhir/Patient/1">http://localhost:8080/fhir/Patient/1</a></p>
<p>DONE!</p>
<p>❯ curl -X PATCH -H "Accept: Accept: application/fhir+json; fhirVersion=4.0" -H "Content-Type: application/json-patch+json" -d '[ { "op" : "add", "path" : "/telecom/1", "value" : { "value" : "(03) 5555-5555", "use" : "work" } } ]' <a href="http://localhost:8080/fhir/Patient/1">http://localhost:8080/fhir/Patient/1</a></p>
<p>{<br>
  "resourceType": "Patient",<br>
  "id": "1",<br>
  "meta": {<br>
    "versionId": "2",<br>
    "lastUpdated": "2021-09-02T17:52:15.017+00:00",<br>
    "source": "#mxZztGmxiV2ewr57"<br>
  },<br>
  "text": {<br>
    "status": "generated",<br>
    "div": "&lt;div xmlns=\"http://www.w3.org/1999/xhtml\"&gt;&lt;div class=\"hapiHeaderText\"&gt;Johny B. &lt;b&gt;GOODE &lt;/b&gt;&lt;/div&gt;&lt;table class=\"hapiPropertyTable\"&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;Identifier&lt;/td&gt;&lt;td&gt;Johny&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Address&lt;/td&gt;&lt;td&gt;&lt;span&gt;3300 Washtenaw &lt;/span&gt;&lt;br/&gt;&lt;span&gt;Ann Harbour &lt;/span&gt;&lt;span&gt;MI &lt;/span&gt;&lt;span&gt;EUA &lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Date of birth&lt;/td&gt;&lt;td&gt;&lt;span&gt;17 July 1977&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/div&gt;"<br>
  },<br>
  "identifier": [ {<br>
    "value": "Johny"<br>
  } ],<br>
  "name": [ {<br>
    "family": "Goode",<br>
    "given": [ "Johny B." ]<br>
  } ],<br>
  "telecom": [ {<br>
    "value": "(03) 5555 6789",<br>
    "use": "home"<br>
  }, {<br>
    "value": "(03) 5555-5555",<br>
    "use": "work"<br>
  } ],<br>
  "gender": "female",<br>
  "birthDate": "1977-07-17",<br>
  "address": [ {<br>
    "line": [ "3300 Washtenaw" ],<br>
    "city": "Ann Harbour",<br>
    "district": "Washtenaw",<br>
    "state": "MI",<br>
    "postalCode": "48104",<br>
    "country": "EUA"<br>
  } ],<br>
  "communication": [ {<br>
    "language": {<br>
      "coding": [ {<br>
        "system": "urn:ietf:bcp:47",<br>
        "code": "pt-br",<br>
        "display": "Português"<br>
      } ]<br>
    }<br>
  } ]<br>
}</p>



<a name="251763299"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179193-students/topic/%E2%9C%94%20How%20to%20do%20a%20PATCH%20request%20for%20Patient%20resource%3F/near/251763299" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Notification Bot <a href="https://fhir.github.io/chat-archive/stream/179193-students/topic/.E2.9C.94.20How.20to.20do.20a.20PATCH.20request.20for.20Patient.20resource.3F.html#251763299">(Sep 02 2021 at 18:29)</a>:</h4>
<p><span class="user-mention silent" data-user-id="437401">Hank Lenzi</span> has marked this topic as resolved.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
