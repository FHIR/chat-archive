---
layout: page
title: "FHIR Chat  · Substitution · Medication"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179249-Medication/index.html">Medication</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179249-Medication/topic/Substitution.html">Substitution</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153991761"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179249-Medication/topic/Substitution/near/153991761" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Townley-O&#x27;Neill <a href="https://fhir.github.io/chat-archive/stream/179249-Medication/topic/Substitution.html#153991761">(Aug 30 2018 at 05:02)</a>:</h4>
<p>MedicationRequest.substitution covers substitution of one medication for another.<br>
In Australia, in community prescribing and dispensing,  substitution of one brand for another is common, but substitution of one active ingredient for another is forbidden. In hospital prescribing, substitution of one active ingredient for another is permitted.<br>
The element MedicationRequest.substitution seems to be designed for active ingredient substitution, rather than brand substitution. It looks as if it cannot do both, e.g. cannot say "can substitute brand, but not active ingredient".</p>



<a name="153991762"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179249-Medication/topic/Substitution/near/153991762" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/179249-Medication/topic/Substitution.html#153991762">(Aug 30 2018 at 05:06)</a>:</h4>
<p>No, you could totally do that with the proper terminology.  The existing value set is just an example and I've used different value sets to convey similar semantics to what you are asking for.  I can't find the specific value set that I used (I've archived that material) but it was something like "All substitution allowed", "Stay in drug class", "Same Active Ingredient", "No Substitution".</p>



<a name="153991763"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179249-Medication/topic/Substitution/near/153991763" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Townley-O&#x27;Neill <a href="https://fhir.github.io/chat-archive/stream/179249-Medication/topic/Substitution.html#153991763">(Aug 30 2018 at 05:13)</a>:</h4>
<p>I thought about that, but the element <a href="http://hl7.org/fhir/STU3/medicationrequest-definitions.html#MedicationRequest.substitution.reason" target="_blank" title="http://hl7.org/fhir/STU3/medicationrequest-definitions.html#MedicationRequest.substitution.reason">MedicationRequest.substitution.reason</a> seems to be about <strong>why</strong> substitution is allowed/prohibited or why it was done.<br>
Using it to say "this is the type of substitution I'm talking about" seems like a misuse of the design.</p>



<a name="153991765"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179249-Medication/topic/Substitution/near/153991765" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/179249-Medication/topic/Substitution.html#153991765">(Aug 30 2018 at 05:15)</a>:</h4>
<p>Yeah, we should probably tighten up our language here.  Because saying substitution.allowed = true with a reason of "keep within the same drug class" seems to be a common enough use case and I'm not sure we (the committee) meant to restrict that.</p>



<a name="153991766"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179249-Medication/topic/Substitution/near/153991766" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/179249-Medication/topic/Substitution.html#153991766">(Aug 30 2018 at 05:18)</a>:</h4>
<p>Tracker item raised about this.</p>



<a name="153991769"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179249-Medication/topic/Substitution/near/153991769" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Townley-O&#x27;Neill <a href="https://fhir.github.io/chat-archive/stream/179249-Medication/topic/Substitution.html#153991769">(Aug 30 2018 at 05:32)</a>:</h4>
<p>The general case could be complex, if there is a need to record two types of substitution, both with reasons. e.g. type_of_substitution="brand but not drug" with reasons "to allow cheaper brands" and "prohibited by regulation".<br>
I think that I don't need two reason codes, so I'd be fine with the addition of a substitution type code element.</p>



<a name="153991770"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179249-Medication/topic/Substitution/near/153991770" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Townley-O&#x27;Neill <a href="https://fhir.github.io/chat-archive/stream/179249-Medication/topic/Substitution.html#153991770">(Aug 30 2018 at 05:39)</a>:</h4>
<p>Tracker <a href="https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=17769&amp;start=0" target="_blank" title="https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=17769&amp;start=0">#17769</a></p>



<a name="164451514"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179249-Medication/topic/Substitution/near/164451514" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jay Lyle <a href="https://fhir.github.io/chat-archive/stream/179249-Medication/topic/Substitution.html#164451514">(Apr 29 2019 at 13:24)</a>:</h4>
<p>In DSTU2, the MedicationDispense.substitution boolean is presumably set to True if the dispensed medication differs from the ordered medication. However, the MedicationOrder also supports substitution, allowing the pharmacist to specify a MedicationOrder.dispenseRequest.medication different from that ordered by the clinician.</p>
<p>1. Does DSTU2 MedicationDispense.substitution indicate a difference from MedicationOrder.medication, MedicationOrder.dispenseRequest.medication, or either?<br>
2. Should DSTU2 MedicationOrder.substitution reflect a difference within the MedicationOrder (.medication vs .dispenseRequest)?<br>
3. In R4, there is no MedicationRequest.dispenseRequest.medication. If the pharmacist makes a substitution prior to Dispensing, do we expect the processing entity to revise the MedicationRequest? How would such a modification be flagged?<br>
This difficulty may result from different perspectives on the pharmacy process. We are supporting a pharmacy process where the MedicationOrder may pass through several states before resulting in a Dispense.</p>



<a name="164457856"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179249-Medication/topic/Substitution/near/164457856" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179249-Medication/topic/Substitution.html#164457856">(Apr 29 2019 at 14:39)</a>:</h4>
<p>Dispense (and the attributes incl substitution) is about what happened i.e. if there was a substitution.<br>
MedRequest is about what is allowed to happen. so, starting with question 3. this is not flagged. it is a new medrequest - something the pharmacist says is planned to happen</p>



<a name="164457925"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179249-Medication/topic/Substitution/near/164457925" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179249-Medication/topic/Substitution.html#164457925">(Apr 29 2019 at 14:40)</a>:</h4>
<p>similar to v2 OMP/RXE</p>



<a name="164458023"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179249-Medication/topic/Substitution/near/164458023" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179249-Medication/topic/Substitution.html#164458023">(Apr 29 2019 at 14:41)</a>:</h4>
<p>1 and 2. i dont understand. substitution in a request is whether product ban be substituted</p>



<a name="164459086"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179249-Medication/topic/Substitution/near/164459086" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179249-Medication/topic/Substitution.html#164459086">(Apr 29 2019 at 14:55)</a>:</h4>
<p>MedicationOrder.substitution is about whether substitution is permitted, not about whether it's happened.</p>



<a name="164459131"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179249-Medication/topic/Substitution/near/164459131" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179249-Medication/topic/Substitution.html#164459131">(Apr 29 2019 at 14:55)</a>:</h4>
<p>Reasons for changes between what's in the placer order and filler order are not reflected anywhere to my knowledge</p>



<a name="164459320"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179249-Medication/topic/Substitution/near/164459320" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jay Lyle <a href="https://fhir.github.io/chat-archive/stream/179249-Medication/topic/Substitution.html#164459320">(Apr 29 2019 at 14:57)</a>:</h4>
<p>Thanks, Jose. Check my understanding:<br>
For R4, if the pharmacist tweaks the request, it's a new request. It may have the same native identifier, but the FHIR resource identifier is different; it's not just a version.<br>
That seems self-consistent, though it will make our design more complicated.</p>
<p>Re questions 1 &amp; 2: DSTU2 MedicationOrder supports two medications: the root medication (which we are thinking is what the clincian said) and the dispenseRequest.medication, which is what we are thinking is how the Pharmacist interprets it. But before dispense.</p>



<a name="164460077"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179249-Medication/topic/Substitution/near/164460077" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179249-Medication/topic/Substitution.html#164460077">(Apr 29 2019 at 15:07)</a>:</h4>
<p>The dispenseRequest.medication has nothing to do with how the pharmacist interprets it.  It reflects the fact that you might order a product that comes packaged a particular way - e.g. with a device - and want to specify the code for that - but when you talk about administering you point to the specific drug, not the "package" to be dispensed.</p>



<a name="164463064"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179249-Medication/topic/Substitution/near/164463064" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jay Lyle <a href="https://fhir.github.io/chat-archive/stream/179249-Medication/topic/Substitution.html#164463064">(Apr 29 2019 at 15:46)</a>:</h4>
<p>That's very interesting. so, which is which? and why was it removed in R4?</p>



<a name="164463400"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179249-Medication/topic/Substitution/near/164463400" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179249-Medication/topic/Substitution.html#164463400">(Apr 29 2019 at 15:50)</a>:</h4>
<p><span class="user-mention" data-user-id="191759">@Melva Peters</span> might be able to comment on reason for removal - my guess is that it was an 80% call.  The one on dispense was what was being authorized to be supplied, the higher level one was what was to be administered.</p>



<a name="164463420"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179249-Medication/topic/Substitution/near/164463420" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/179249-Medication/topic/Substitution.html#164463420">(Apr 29 2019 at 15:50)</a>:</h4>
<p>It was removed much earlier in STU3 v1.6.  The Pharmacy WG would have to search hard to find out why, but I suspect we had feedback from implementers that they didn't handle this.</p>



<a name="164498908"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179249-Medication/topic/Substitution/near/164498908" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Melva Peters <a href="https://fhir.github.io/chat-archive/stream/179249-Medication/topic/Substitution.html#164498908">(Apr 29 2019 at 23:55)</a>:</h4>
<p>The MedicationRequest.dispenseRequest.medication was removed as part of tracker 8476.  It didn't make sense to have two medication attributes so Pharmacy decided to remove the medication in the DispenseRequest attribute.  There is another tracker item 10406 from Lloyd that also points this out.</p>



<a name="164727771"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179249-Medication/topic/Substitution/near/164727771" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jay Lyle <a href="https://fhir.github.io/chat-archive/stream/179249-Medication/topic/Substitution.html#164727771">(May 02 2019 at 17:33)</a>:</h4>
<p>Thanks. So the request identifies the clinically indicated substance (possibly a product but not preferably, contrary to DSTU2); and the product selection shows up in Dispense, right? In DSTU2 way may opt to ignore the dispenseRequest.medication to better align for migration to R4.</p>



<a name="164856258"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179249-Medication/topic/Substitution/near/164856258" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179249-Medication/topic/Substitution.html#164856258">(May 04 2019 at 08:03)</a>:</h4>
<p>more like (IMO)<br>
clinically indicated substance goes into a request.<br>
if there is a step to define what medication is to be dispensed, it goes into another medRequest (in v2 this is the RXE)<br>
then the medication actually dispensed is in the medDispense</p>
<p>This is similar but better than V2 approach where you would have OMP and RXE, but the boundary between OMP and RXE was not clear in implementations. Now it is easy: as long as you are stating an intent, you use a request.</p>



<a name="164856271"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179249-Medication/topic/Substitution/near/164856271" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179249-Medication/topic/Substitution.html#164856271">(May 04 2019 at 08:03)</a>:</h4>
<p>I would indeed ignore MedicationRequest.DispenseRequest</p>



<a name="164866676"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179249-Medication/topic/Substitution/near/164866676" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jay Lyle <a href="https://fhir.github.io/chat-archive/stream/179249-Medication/topic/Substitution.html#164866676">(May 04 2019 at 12:46)</a>:</h4>
<p>Many thanks Jose; I think that's where we're headed but good to hear stated clearly.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
