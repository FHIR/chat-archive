---
layout: page
title: "FHIR Chat  · docs / Issue #45 FHIRCast Prototype with Websocket client... · fhircast-github"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179269-fhircast-github/index.html">fhircast-github</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179269-fhircast-github/topic/docs.20.2F.20Issue.20.2345.20FHIRCast.20Prototype.20with.20Websocket.20client.2E.2E.2E.html">docs / Issue #45 FHIRCast Prototype with Websocket client...</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="154019200"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179269-fhircast-github/topic/docs%20/%20Issue%20%2345%20FHIRCast%20Prototype%20with%20Websocket%20client.../near/154019200" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Github Notifications (FHIRcast) <a href="https://fhir.github.io/chat-archive/stream/179269-fhircast-github/topic/docs.20.2F.20Issue.20.2345.20FHIRCast.20Prototype.20with.20Websocket.20client.2E.2E.2E.html#154019200">(Nov 16 2018 at 17:04)</a>:</h4>
<p>gkustas opened <a href="https://github.com/fhircast/docs/issues/45" target="_blank" title="https://github.com/fhircast/docs/issues/45">Issue #45</a></p>
<blockquote>
<p>I am currently implementing a prototype FHIRCast implementation that includes:</p>
<p>1. A FHIR Hub. <br>
2. A FHIRCast integration module for the Powerscribe360 Reporting solution (by Nuance)<br>
3. A Test Client application (used to simulate other clients, such as PACS)</p>
<p>Items #1 and #3 are running, and item #2 is partially running. I'm hoping to have something ready for testing in a week or two.</p>
<p>At this point, I would like to share the technical specification details. Because this implementation supports Websockets, there are going to be several conformance issues that have been discussed in other issues on this forum. Particularly in how the FHIRCast(WebSub) subscription/publication model works with regards to callbacks.</p>
<p>My implementation proposes a solution that attempts to closely follow the FHIR and FHIRCast specifications for use with Radiology reporting context changes. The events supported by the hub include:</p>
<p>open-imaging-study<br>
switch-imaging-study<br>
close-imaging-study<br>
user-logoff</p>
<p>I'm attaching a MS Word document which describes the implementation and specifications in more detail. I wold love to get feedback from all of you, particularly someone interested in implementing a FHIRCast client (like PACS).</p>
<p>There are several areas of the FHIR and FHIRCast specs that are unclear to me. Among them:<br>
1. For studies, what are the standards for specifying an accession number identifier (what is the system value?).<br>
2. For patients, what are the standards for patient MRN, etc.?<br>
3. Error handling - so many things to discuss eventually, but at this prototype stage I am going to defer implementation. Discussion would be helpful though at this time.<br>
4. Like error handling, authentication needs to be discussed, but is being deferred from implementation.<br>
5. Topics: I view the topic as an identifier for a user session. User Joe logs into PACS, and then into Powerscribe360 to dictate a report for the study.  The user session is defined as all of the software being used by user Joe. But if user Joe doesn't have identical user names on each of his software systems, what can be used to identify the user session (topic name)?</p>
<p>If anyone is interested, I can share source code, put our hub in the cloud, and perform unit testing with Powerscribe360.</p>
<p><a href="https://github.com/fhircast/docs/files/2590183/FHIR.Websockets.docx" target="_blank" title="https://github.com/fhircast/docs/files/2590183/FHIR.Websockets.docx">FHIR Websockets.docx</a></p>
</blockquote>



<a name="154019204"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179269-fhircast-github/topic/docs%20/%20Issue%20%2345%20FHIRCast%20Prototype%20with%20Websocket%20client.../near/154019204" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Github Notifications (FHIRcast) <a href="https://fhir.github.io/chat-archive/stream/179269-fhircast-github/topic/docs.20.2F.20Issue.20.2345.20FHIRCast.20Prototype.20with.20Websocket.20client.2E.2E.2E.html#154019204">(Nov 16 2018 at 17:22)</a>:</h4>
<p>gkustas edited <a href="https://github.com/fhircast/docs/issues/45" target="_blank" title="https://github.com/fhircast/docs/issues/45">Issue #45</a></p>
<blockquote>
<p>I am currently implementing a prototype FHIRCast implementation that includes:</p>
<p>1. A FHIR Hub. <br>
2. A FHIRCast integration module for the Powerscribe360 Reporting solution (by Nuance)<br>
3. A Test Client application (used to simulate other clients, such as PACS)</p>
<p>Items #1 and #3 are running, and item #2 is partially running. I'm hoping to have something ready for testing in a week or two.</p>
<p>At this point, I would like to share the technical specification details. Because this implementation supports Websockets, there are going to be several conformance issues that have been discussed in other issues on this forum. Particularly in how the FHIRCast(WebSub) subscription/publication model works with regards to callbacks.</p>
<p>My implementation proposes a solution that attempts to closely follow the FHIR and FHIRCast specifications for use with Radiology reporting context changes. The events supported by the hub include:</p>
<p>open-imaging-study<br>
switch-imaging-study<br>
close-imaging-study<br>
user-logoff</p>
<p>I'm attaching a MS Word document which describes the implementation and specifications in more detail. I wold love to get feedback from all of you, particularly someone interested in implementing a FHIRCast client (like PACS).</p>
<p>There are several areas of the FHIR and FHIRCast specs that are unclear to me. Among them:<br>
1. For studies, what are the standards for specifying an accession number identifier (what is the system value?).<br>
2. For patients, what are the standards for patient MRN, etc.?<br>
3. Error handling - so many things to discuss eventually, but at this prototype stage I am going to defer implementation. Discussion would be helpful though at this time.<br>
4. Like error handling, authentication needs to be discussed, but is being deferred from implementation.<br>
5. Topics: I view the topic as an identifier for a user session. User Joe logs into PACS, and then into Powerscribe360 to dictate a report for the study.  The user session is defined as all of the software being used by user Joe. But if user Joe doesn't have identical user names on each of his software systems, what can be used to identify the user session (topic name)?</p>
<p>If anyone is interested, I can share source code, put our hub in the cloud, and perform unit testing with Powerscribe360.</p>
<p><a href="https://github.com/fhircast/docs/files/2590272/FHIR.Websockets.docx" target="_blank" title="https://github.com/fhircast/docs/files/2590272/FHIR.Websockets.docx">FHIR Websockets.docx</a></p>
</blockquote>



<a name="154019386"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179269-fhircast-github/topic/docs%20/%20Issue%20%2345%20FHIRCast%20Prototype%20with%20Websocket%20client.../near/154019386" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Github Notifications (FHIRcast) <a href="https://fhir.github.io/chat-archive/stream/179269-fhircast-github/topic/docs.20.2F.20Issue.20.2345.20FHIRCast.20Prototype.20with.20Websocket.20client.2E.2E.2E.html#154019386">(Nov 17 2018 at 19:27)</a>:</h4>
<p>jeremysrichardson <a href="https://github.com/fhircast/docs/issues/45#issuecomment-439641439" target="_blank" title="https://github.com/fhircast/docs/issues/45#issuecomment-439641439">commented</a> on <a href="https://github.com/fhircast/docs/issues/45" target="_blank" title="https://github.com/fhircast/docs/issues/45">Issue #45</a></p>
<blockquote>
<p>Hey @gkustas I read your document and have similar concerns related to integration of reporting.  We should connect and discuss.</p>
<p>Also, @lbergnehr has been doing some SignalR work, which fits your use cases, and mine, and apparently his, significantly better.</p>
</blockquote>



<a name="154019387"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179269-fhircast-github/topic/docs%20/%20Issue%20%2345%20FHIRCast%20Prototype%20with%20Websocket%20client.../near/154019387" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Github Notifications (FHIRcast) <a href="https://fhir.github.io/chat-archive/stream/179269-fhircast-github/topic/docs.20.2F.20Issue.20.2345.20FHIRCast.20Prototype.20with.20Websocket.20client.2E.2E.2E.html#154019387">(Nov 17 2018 at 19:28)</a>:</h4>
<p>jeremysrichardson {} a <a href="https://github.com/fhircast/docs/issues/45#issuecomment-439641439" target="_blank" title="https://github.com/fhircast/docs/issues/45#issuecomment-439641439">comment</a> on <a href="https://github.com/fhircast/docs/issues/45" target="_blank" title="https://github.com/fhircast/docs/issues/45">Issue #45</a></p>
<blockquote>
<p>Hey @gkustas I read your document and have similar concerns related to integration of reporting.  We should connect and discuss.  Are you or anyone concerned with context sync going to be at RSNA?</p>
<p>Also, @lbergnehr has been doing some SignalR work, which fits your use cases, and mine, and apparently his, significantly better.</p>
</blockquote>



<a name="154019401"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179269-fhircast-github/topic/docs%20/%20Issue%20%2345%20FHIRCast%20Prototype%20with%20Websocket%20client.../near/154019401" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Github Notifications (FHIRcast) <a href="https://fhir.github.io/chat-archive/stream/179269-fhircast-github/topic/docs.20.2F.20Issue.20.2345.20FHIRCast.20Prototype.20with.20Websocket.20client.2E.2E.2E.html#154019401">(Nov 18 2018 at 08:43)</a>:</h4>
<p>mbellehumeur <a href="https://github.com/fhircast/docs/issues/45#issuecomment-439676778" target="_blank" title="https://github.com/fhircast/docs/issues/45#issuecomment-439676778">commented</a> on <a href="https://github.com/fhircast/docs/issues/45" target="_blank" title="https://github.com/fhircast/docs/issues/45">Issue #45</a></p>
<blockquote>
<p>Hi @gkustas,<br>
I have the same issue with the “session-id/hub.topic”.  In my mind, the hub has to resolve session assignment through some mechanism (same user id, if not  same hostname,..). <br>
Regarding the need for the client to listen on a socket, I had a different understanding.  To me, only the application servers needs to receive notification and they would take care to notify their clients with whatever is convenient for their app.  I tried to convey that in the JS sandbox (<a href="https://github.com/fhircast/sandbox.js" target="_blank" title="https://github.com/fhircast/sandbox.js">https://github.com/fhircast/sandbox.js</a>).  <br>
That said I am interested in your proposal of websockets directly to the hub and would like to prototype something to that effect.   Could we have a chat early this week?  I’m on Frankfurt time .  Thanks, Martin </p>
</blockquote>



<a name="154019430"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179269-fhircast-github/topic/docs%20/%20Issue%20%2345%20FHIRCast%20Prototype%20with%20Websocket%20client.../near/154019430" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Github Notifications (FHIRcast) <a href="https://fhir.github.io/chat-archive/stream/179269-fhircast-github/topic/docs.20.2F.20Issue.20.2345.20FHIRCast.20Prototype.20with.20Websocket.20client.2E.2E.2E.html#154019430">(Nov 18 2018 at 14:24)</a>:</h4>
<p>gkustas <a href="https://github.com/fhircast/docs/issues/45#issuecomment-439696786" target="_blank" title="https://github.com/fhircast/docs/issues/45#issuecomment-439696786">commented</a> on <a href="https://github.com/fhircast/docs/issues/45" target="_blank" title="https://github.com/fhircast/docs/issues/45">Issue #45</a></p>
<blockquote>
<p>@jeremysrichardson , @mbellehumeur <br>
Thanks for posting. </p>
<p>I will not be at RSNA, but my manager Dave Rubin will be in the Nuance booth (and around) all week. He is the engineering manager for this project and all of Powerscribe360. Over the last 15 years or so, we've both been working on radiology reporting interfaces (HL7) and desktop integrations. We currently have over a dozen different flavors including our standard XML file, our proprietary COM API, and several other vendor proprietary integrations (GE, Mckesson, Sectra, etc.). We're really hoping FHIRCast can eventually replace them all.</p>
<p>Concerning SignalR, I don't have a strong feeling about it. I chose Websockets because it is now supported in all common browsers and web servers. I was thinking SignalR would be overkill. My Websocket implementation is incredibly simple - especially in this "context" (pun intended).</p>
<p>Before going in this direction, I did pursue the idea of creating an "application server" as you describe @mbellehumeur. I read your post just the other day. Our product is a thick client (Windows Forms) and our application server is essentially a web service used for data access (SQL DB). There currently is no unsolicited messaging to the app. We would have to create all that, and probably do it the same way I'm doing it in our hub (via Websockets).  In my mind it just creates another layer (message router) into the equation - another point of failure. It also means that every player involved would have to implement both a FHIRCast client and a FHIRCast application server which is more work, obviously, than just the client. Not just implementation, but installation and support.</p>
<p>That said, if Websockets aren't going to be accepted in the FHIRCast specification, then we'll have to consider falling back to that approach.</p>
<p>I would like to connect with both of you this week prior to RSNA if possible. I can be reached best via email at <a href="mailto:george.kustas@nuance.com" title="mailto:george.kustas@nuance.com">george.kustas@nuance.com</a></p>
</blockquote>



<a name="154019580"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179269-fhircast-github/topic/docs%20/%20Issue%20%2345%20FHIRCast%20Prototype%20with%20Websocket%20client.../near/154019580" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Github Notifications (FHIRcast) <a href="https://fhir.github.io/chat-archive/stream/179269-fhircast-github/topic/docs.20.2F.20Issue.20.2345.20FHIRCast.20Prototype.20with.20Websocket.20client.2E.2E.2E.html#154019580">(Nov 19 2018 at 15:12)</a>:</h4>
<p>gkustas closed <a href="https://github.com/fhircast/docs/issues/45" target="_blank" title="https://github.com/fhircast/docs/issues/45">Issue #45</a></p>
<blockquote>
<p>I am currently implementing a prototype FHIRCast implementation that includes:</p>
<p>1. A FHIR Hub. <br>
2. A FHIRCast integration module for the Powerscribe360 Reporting solution (by Nuance)<br>
3. A Test Client application (used to simulate other clients, such as PACS)</p>
<p>Items #1 and #3 are running, and item #2 is partially running. I'm hoping to have something ready for testing in a week or two.</p>
<p>At this point, I would like to share the technical specification details. Because this implementation supports Websockets, there are going to be several conformance issues that have been discussed in other issues on this forum. Particularly in how the FHIRCast(WebSub) subscription/publication model works with regards to callbacks.</p>
<p>My implementation proposes a solution that attempts to closely follow the FHIR and FHIRCast specifications for use with Radiology reporting context changes. The events supported by the hub include:</p>
<p>open-imaging-study<br>
switch-imaging-study<br>
close-imaging-study<br>
user-logoff</p>
<p>I'm attaching a MS Word document which describes the implementation and specifications in more detail. I wold love to get feedback from all of you, particularly someone interested in implementing a FHIRCast client (like PACS).</p>
<p>There are several areas of the FHIR and FHIRCast specs that are unclear to me. Among them:<br>
1. For studies, what are the standards for specifying an accession number identifier (what is the system value?).<br>
2. For patients, what are the standards for patient MRN, etc.?<br>
3. Error handling - so many things to discuss eventually, but at this prototype stage I am going to defer implementation. Discussion would be helpful though at this time.<br>
4. Like error handling, authentication needs to be discussed, but is being deferred from implementation.<br>
5. Topics: I view the topic as an identifier for a user session. User Joe logs into PACS, and then into Powerscribe360 to dictate a report for the study.  The user session is defined as all of the software being used by user Joe. But if user Joe doesn't have identical user names on each of his software systems, what can be used to identify the user session (topic name)?</p>
<p>If anyone is interested, I can share source code, put our hub in the cloud, and perform unit testing with Powerscribe360.</p>
<p><a href="https://github.com/fhircast/docs/files/2590272/FHIR.Websockets.docx" target="_blank" title="https://github.com/fhircast/docs/files/2590272/FHIR.Websockets.docx">FHIR Websockets.docx</a></p>
</blockquote>



<a name="154022528"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179269-fhircast-github/topic/docs%20/%20Issue%20%2345%20FHIRCast%20Prototype%20with%20Websocket%20client.../near/154022528" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Martin Bellehumeur (Visage Imaging) <a href="https://fhir.github.io/chat-archive/stream/179269-fhircast-github/topic/docs.20.2F.20Issue.20.2345.20FHIRCast.20Prototype.20with.20Websocket.20client.2E.2E.2E.html#154022528">(Dec 03 2018 at 15:59)</a>:</h4>
<p>Hi George,  I updated the sandbox.js code and readme with websocket channel option:<br>
<a href="https://github.com/fhircast/sandbox.js/blob/master/README.md#try-the-websocket-channel-proposed-addition" target="_blank" title="https://github.com/fhircast/sandbox.js/blob/master/README.md#try-the-websocket-channel-proposed-addition">https://github.com/fhircast/sandbox.js/blob/master/README.md#try-the-websocket-channel-proposed-addition</a><br>
it's not clear however how the client should publish events *websocket or JSON post like websub?).  So I left websub for sending event to the hub for now.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
