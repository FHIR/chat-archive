---
layout: page
title: "FHIR Chat  · fhircast-docs / Issue #341 How can an application signal ... · fhircast-github"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179269-fhircast-github/index.html">fhircast-github</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179269-fhircast-github/topic/fhircast-docs.20.2F.20Issue.20.23341.20How.20can.20an.20application.20signal.20.2E.2E.2E.html">fhircast-docs / Issue #341 How can an application signal ...</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="216082270"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179269-fhircast-github/topic/fhircast-docs%20/%20Issue%20%23341%20How%20can%20an%20application%20signal%20.../near/216082270" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Github Notifications (FHIRcast) <a href="https://fhir.github.io/chat-archive/stream/179269-fhircast-github/topic/fhircast-docs.20.2F.20Issue.20.23341.20How.20can.20an.20application.20signal.20.2E.2E.2E.html#216082270">(Nov 09 2020 at 13:20)</a>:</h4>
<p>bvdh opened <a href="https://github.com/HL7/fhircast-docs/issues/341">Issue #341</a>:</p>
<blockquote>
<p>When an application cannot follow a context change event, it will respond with a sync-error. This will notify the other applications that they are no longer in sync. <br>
When the application has resolved the issue - how does it signal that context can be changed? Does it wait for a resend of the -open/-close event or can it actively signal this?</p>
</blockquote>



<a name="216403998"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179269-fhircast-github/topic/fhircast-docs%20/%20Issue%20%23341%20How%20can%20an%20application%20signal%20.../near/216403998" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Github Notifications (FHIRcast) <a href="https://fhir.github.io/chat-archive/stream/179269-fhircast-github/topic/fhircast-docs.20.2F.20Issue.20.23341.20How.20can.20an.20application.20signal.20.2E.2E.2E.html#216403998">(Nov 11 2020 at 22:01)</a>:</h4>
<p>isaacvetter <a href="https://github.com/HL7/fhircast-docs/issues/341#issuecomment-725685269">commented</a> on <a href="https://github.com/HL7/fhircast-docs/issues/341">Issue #341</a>:</p>
<blockquote>
<p>There is no way to currently actively signal the ending of a synchronization failure. It's a good idea. </p>
<p>What would you name such an event? I suppose it would be broadcasted to systems that subscribed to it?</p>
</blockquote>



<a name="217885207"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179269-fhircast-github/topic/fhircast-docs%20/%20Issue%20%23341%20How%20can%20an%20application%20signal%20.../near/217885207" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Github Notifications (FHIRcast) <a href="https://fhir.github.io/chat-archive/stream/179269-fhircast-github/topic/fhircast-docs.20.2F.20Issue.20.23341.20How.20can.20an.20application.20signal.20.2E.2E.2E.html#217885207">(Nov 25 2020 at 13:42)</a>:</h4>
<p>bvdh <a href="https://github.com/HL7/fhircast-docs/issues/341#issuecomment-733713471">commented</a> on <a href="https://github.com/HL7/fhircast-docs/issues/341">Issue #341</a>:</p>
<blockquote>
<p>Some thoughts.</p>
<p>A sync-error means that one or or more applications are not in sync - did not follow the event indicated by the event-id.<br>
Re-establishing sync, means that all applications are in sync again. </p>
<p>Root causes of sync-errors are:<br>
1 application refuses change<br>
2 an error in the application makes it impossible to process the change.<br>
3 network error when sending the event<br>
4 application has closed and did not unsubscribe</p>
<p>The only mechanism in the current specification is that the sender of the original spec, will resend the event after a short time.</p>
<p>Sync can only be re-established when the "network" is sound again - all application can receive events and are present. Topic 3 and 4 will be automatically handled as websockets will be closed and the application needs to resubscribe.</p>
<p>2 should be handled by the hub - if an error occurs regularly, the hub should unsubscribe it. Which will happen anyway after the timeout.</p>
<p>That leaves 1. The application could "withdraw" a syncerror with a syncrestored message. This could be a trigger to the hub to resend the original event (only when it is still the current one).<br>
The advantage of this approach is that no .write authorization is required for the application that sends the syncrestored message. Note that the resending of the Patient-open by original and hub are still valid options also in this situation.</p>
<p>Conclusion:</p>
<ul>
<li>hubs SHALL resend an event that causes a sync-error, unless issue has been resolved by newer events.</li>
<li>applications SHOULD resent an event that causes a sync-error</li>
<li>applications SHOULD send a syncrestored event when the sync-error cause has been restored. This will trigger the hub to resent the original event (when relevant).</li>
</ul>
<p>Would this work&gt;</p>
</blockquote>



<a name="217912889"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179269-fhircast-github/topic/fhircast-docs%20/%20Issue%20%23341%20How%20can%20an%20application%20signal%20.../near/217912889" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Github Notifications (FHIRcast) <a href="https://fhir.github.io/chat-archive/stream/179269-fhircast-github/topic/fhircast-docs.20.2F.20Issue.20.23341.20How.20can.20an.20application.20signal.20.2E.2E.2E.html#217912889">(Nov 25 2020 at 17:09)</a>:</h4>
<p>gkustas <a href="https://github.com/HL7/fhircast-docs/issues/341#issuecomment-733835630">commented</a> on <a href="https://github.com/HL7/fhircast-docs/issues/341">Issue #341</a>:</p>
<blockquote>
<p>I just left a comment in #311 regarding syncerror. My scenario falls into your second root causes @bvdh - an error in the application (PowerScribe) that made it impossible to process the change. How would your proposal work in this situation? </p>
<p>Like I said in the other thread, the end user sees the original error, and hopefully can rectify the error. In our case, the user will choose the appropriate study (accession from the proper RIS site) from the PowerScribe worklist, re-open the report causing another DiagnosticReport-open, and everyone would be back in sync again.</p>
<p>Or do you see other scenarios where the syncerror is used effectively?</p>
</blockquote>



<a name="217974292"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179269-fhircast-github/topic/fhircast-docs%20/%20Issue%20%23341%20How%20can%20an%20application%20signal%20.../near/217974292" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Github Notifications (FHIRcast) <a href="https://fhir.github.io/chat-archive/stream/179269-fhircast-github/topic/fhircast-docs.20.2F.20Issue.20.23341.20How.20can.20an.20application.20signal.20.2E.2E.2E.html#217974292">(Nov 26 2020 at 08:12)</a>:</h4>
<p>bvdh <a href="https://github.com/HL7/fhircast-docs/issues/341#issuecomment-734143931">commented</a> on <a href="https://github.com/HL7/fhircast-docs/issues/341">Issue #341</a>:</p>
<blockquote>
<p>Sync-error will also be effective in indicating any of the other scenario's and can be used as a trigger to provide visual feedback to the user that sync is lost.<br>
I think your scenario is good example of where an application due to a reason outside the scope of networking etc. refuses a context-change. I think that my solution will cover this. <br>
Are we in sufficient agreement to move this into the spec (STU3 or STU2?).</p>
</blockquote>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
