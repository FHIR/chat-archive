---
layout: page
title: "FHIR Chat  · docs / Issue #33 why must a subscriber have an accessible... · fhircast-github"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179269-fhircast-github/index.html">fhircast-github</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179269-fhircast-github/topic/docs.20.2F.20Issue.20.2333.20why.20must.20a.20subscriber.20have.20an.20accessible.2E.2E.2E.html">docs / Issue #33 why must a subscriber have an accessible...</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153965229"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179269-fhircast-github/topic/docs%20/%20Issue%20%2333%20why%20must%20a%20subscriber%20have%20an%20accessible.../near/153965229" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Github Notifications (FHIRcast) <a href="https://fhir.github.io/chat-archive/stream/179269-fhircast-github/topic/docs.20.2F.20Issue.20.2333.20why.20must.20a.20subscriber.20have.20an.20accessible.2E.2E.2E.html#153965229">(May 29 2018 at 14:45)</a>:</h4>
<p>isaacvetter edited <a href="https://github.com/fhircast/docs/issues/33" target="_blank" title="https://github.com/fhircast/docs/issues/33">Issue #33</a></p>
<blockquote>
<p>During the HL7 working group meeting in May in Köln, there was strong feedback from @bvhd and @joshmandel a subscriber ought not to be required to host an accessible url. WebSub requires that the subscriber host an accessible url which receives notifications. </p>
<p>This requirement can dictate a subscriber's use of a client/server architecture. Alternatives could include using a long-running server/client communication method such as HTTP Long-Polling/Comet, HTML Server Sent Events (SSE) or websockets, thereby allowing the subscriber to not host a url accessible to the Hub. </p>
<p>The downside to these approaches is that the use of proxies (proxy or reverse proxy servers, firewalls, load-balancing routers and so on) between the browser and the Hub which are often designed for short-lived HTTP requests and multiple network hops increase the expense of keeping sockets.</p>
<p>Generally, long-polling is the most primitive and expensive method. Server-Sent Events are uni-directional (server-&gt;client) and further, are not supported by IE 10 or 11. Websockets is the server &lt;-&gt;client contender.</p>
<p>Is the use of websockets viable? Hosting FHIRcast applications within the same network as the Hub would help address common problems experienced due to proxies. What about a hub or client hosted within a multi-application/user app server, such as Citrix? -- a common deployment method for fat clients in healthcare. </p>
</blockquote>



<a name="153965236"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179269-fhircast-github/topic/docs%20/%20Issue%20%2333%20why%20must%20a%20subscriber%20have%20an%20accessible.../near/153965236" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Github Notifications (FHIRcast) <a href="https://fhir.github.io/chat-archive/stream/179269-fhircast-github/topic/docs.20.2F.20Issue.20.2333.20why.20must.20a.20subscriber.20have.20an.20accessible.2E.2E.2E.html#153965236">(May 29 2018 at 17:25)</a>:</h4>
<p>isaacvetter assigned <a href="https://github.com/fhircast/docs/issues/33" target="_blank" title="https://github.com/fhircast/docs/issues/33">Issue #33</a>(assigned to isaacvetter)</p>
<blockquote>
<p>During the HL7 working group meeting in May in Köln, there was strong feedback from @bvhd and @joshmandel a subscriber ought not to be required to host an accessible url. WebSub requires that the subscriber host an accessible url which receives notifications. </p>
<p>This requirement can dictate a subscriber's use of a client/server architecture. Alternatives could include using a long-running server/client communication method such as HTTP Long-Polling/Comet, HTML Server Sent Events (SSE) or websockets, thereby allowing the subscriber to not host a url accessible to the Hub. </p>
<p>The downside to these approaches is that the use of proxies (proxy or reverse proxy servers, firewalls, load-balancing routers and so on) between the browser and the Hub which are often designed for short-lived HTTP requests and multiple network hops increase the expense of keeping sockets.</p>
<p>Generally, long-polling is the most primitive and expensive method. Server-Sent Events are uni-directional (server-&gt;client) and further, are not supported by IE 10 or 11. Websockets is the server &lt;-&gt;client contender.</p>
<p>Is the use of websockets viable? Hosting FHIRcast applications within the same network as the Hub would help address common problems experienced due to proxies. What about a hub or client hosted within a multi-application/user app server, such as Citrix? -- a common deployment method for fat clients in healthcare. </p>
</blockquote>



<a name="153971820"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179269-fhircast-github/topic/docs%20/%20Issue%20%2333%20why%20must%20a%20subscriber%20have%20an%20accessible.../near/153971820" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Github Notifications (FHIRcast) <a href="https://fhir.github.io/chat-archive/stream/179269-fhircast-github/topic/docs.20.2F.20Issue.20.2333.20why.20must.20a.20subscriber.20have.20an.20accessible.2E.2E.2E.html#153971820">(Jun 26 2018 at 15:41)</a>:</h4>
<p>isaacvetter <a href="https://github.com/fhircast/docs/issues/33#issuecomment-400357588" target="_blank" title="https://github.com/fhircast/docs/issues/33#issuecomment-400357588">commented</a> on <a href="https://github.com/fhircast/docs/issues/33" target="_blank" title="https://github.com/fhircast/docs/issues/33">Issue #33</a></p>
<blockquote>
<p>@lbergnehr , @wmaethner and I talked through this issue offline today. </p>
<p>This issue is important for enabling simple, standalone native apps (desktop and mobile) and single page applications and also potentially improves the user experience of synchronization (app receives notifications faster). This moves effort from the subscribing app and puts it on the Hub, which seems appropriate. Further, support of web sockets also means that a internet-hosted sandbox (not running locally) can be tested against with a local app, which should improve the onboarding of new developers. </p>
<p>Websocket support is <a href="https://caniuse.com/#search=websockets" target="_blank" title="https://caniuse.com/#search=websockets">available</a> starting in IE 10, and is widely supported by both browsers and <a href="https://developer.mozilla.org/en-US/docs/Web/API/WebSockets_API" target="_blank" title="https://developer.mozilla.org/en-US/docs/Web/API/WebSockets_API">various libraries</a>. </p>
<p>I'm going to draft a PR that adds web socket support for the event notification message that's sent from the Hub over a connection established by the the subscribing app.  We're going to keep the existing rest hook/ WebSub messaging mechanism as well. </p>
<p>Hubs MUST support the rest hook method and SHOULD also support web socket connections. This creates optionality, the enemy of interoperability, but we think that it's appropriate in this case.</p>
<p>The bidirectional event notification requests described in #24 will remain distinct HTTP Posts (not use the web sockets communication channel). This allows the Hub to support only a single mechanism for receiving these requests, while allowing the client to potentially not have a web server. </p>
</blockquote>



<a name="154003050"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179269-fhircast-github/topic/docs%20/%20Issue%20%2333%20why%20must%20a%20subscriber%20have%20an%20accessible.../near/154003050" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Github Notifications (FHIRcast) <a href="https://fhir.github.io/chat-archive/stream/179269-fhircast-github/topic/docs.20.2F.20Issue.20.2333.20why.20must.20a.20subscriber.20have.20an.20accessible.2E.2E.2E.html#154003050">(Sep 30 2018 at 15:48)</a>:</h4>
<p>isaacvetter <a href="https://github.com/fhircast/docs/issues/33#issuecomment-425730218" target="_blank" title="https://github.com/fhircast/docs/issues/33#issuecomment-425730218">commented</a> on <a href="https://github.com/fhircast/docs/issues/33" target="_blank" title="https://github.com/fhircast/docs/issues/33">Issue #33</a></p>
<blockquote>
<p>In conversation with Glenn Potter, Sagy Mintz, @jeremysrichardson during the FHIR connectathon this weekend, we talked through the importance of a websocket-type communication channel for FHIRcast and, on Sunday, decided on this path forward:</p>
<p>1) Continue with rest-hook support in the first iteration of the specification. While a rest-hook approach does require the subscribing app to host a publically accessible endpoint, this is both reasonable and simpler for a significant number of subscribing applications. <br>
2) Add optional and experimental websocket support to the specification following the lead of <a href="https://www.hl7.org/fhir/subscription.html#2.46.6.2" target="_blank" title="https://www.hl7.org/fhir/subscription.html#2.46.6.2">FHIR Subscriptions</a>. This area needs implementer feedback and is likely to change.</p>
</blockquote>



<a name="154005211"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179269-fhircast-github/topic/docs%20/%20Issue%20%2333%20why%20must%20a%20subscriber%20have%20an%20accessible.../near/154005211" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Github Notifications (FHIRcast) <a href="https://fhir.github.io/chat-archive/stream/179269-fhircast-github/topic/docs.20.2F.20Issue.20.2333.20why.20must.20a.20subscriber.20have.20an.20accessible.2E.2E.2E.html#154005211">(Oct 03 2018 at 12:44)</a>:</h4>
<p>isaacvetter {} a <a href="https://github.com/fhircast/docs/issues/33#issuecomment-425730218" target="_blank" title="https://github.com/fhircast/docs/issues/33#issuecomment-425730218">comment</a> on <a href="https://github.com/fhircast/docs/issues/33" target="_blank" title="https://github.com/fhircast/docs/issues/33">Issue #33</a></p>
<blockquote>
<p>In conversation with Glenn Potter, Sagy Mintz, @jeremysrichardson during the FHIR connectathon this weekend, we talked through the importance of a websocket-type communication channel for FHIRcast and, on Sunday, decided on this path forward:</p>
<p>1) Continue with rest-hook support in the first iteration of the specification. While a rest-hook approach does require the subscribing app to host a publically accessible endpoint, this is both reasonable and simpler for a significant number of subscribing applications. <br>
2) Add optional and experimental websocket support to the specification following the lead of <a href="https://www.hl7.org/fhir/subscription.html#2.46.6.2" target="_blank" title="https://www.hl7.org/fhir/subscription.html#2.46.6.2">FHIR Subscriptions</a>. This area needs implementer feedback and is likely to change.</p>
<p>Draft<br>
## WebSockets<br>
Following WebSub, FHIRcast is modeled on a rest-hook interaction in which a subscribing app receives notifications over REST. Some apps may be unable to expose an outward-facing HTTP server to receive triggered notifications. For example, a pure client-side Web app or mobile app may want to receive notifications of context changes directly. This can be accomplished using a websocket notification channel.</p>
<p>This capability is experimental, likely to change and implementer feedback is welcome. <br>
- Client authenticates to server using a server-specified Web socket protocol (e.g. OAuth bearer token presentation).<br>
- Client sends a bind :id message over the socket (using the logical id of the subscription). For example, the client might issue: bind 123).<br>
- Server responds with a "bound :id" message to acknowledge.<br>
- Server sends a "ping :id" message to notify the client each time a new result is available</p>
</blockquote>



<a name="154009456"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179269-fhircast-github/topic/docs%20/%20Issue%20%2333%20why%20must%20a%20subscriber%20have%20an%20accessible.../near/154009456" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Github Notifications (FHIRcast) <a href="https://fhir.github.io/chat-archive/stream/179269-fhircast-github/topic/docs.20.2F.20Issue.20.2333.20why.20must.20a.20subscriber.20have.20an.20accessible.2E.2E.2E.html#154009456">(Oct 16 2018 at 16:38)</a>:</h4>
<p>gkustas <a href="https://github.com/fhircast/docs/issues/33#issuecomment-430308473" target="_blank" title="https://github.com/fhircast/docs/issues/33#issuecomment-430308473">commented</a> on <a href="https://github.com/fhircast/docs/issues/33" target="_blank" title="https://github.com/fhircast/docs/issues/33">Issue #33</a></p>
<blockquote>
<p>Thanks @isaacvetter ,</p>
<p>At Nuance we are just starting with FHIR, and we were wondering what the community was doing about this issue. We want to avoid installing SSL certs on EVERY one of our desktop clients. We were wondering if SignalR was going to be supported, because there are the beginnings of implementation in the sandbox source code :-)</p>
<p>We are happy to start our prototype using the webhooks (rest-hook) on our clients if we know that we have other radiology vendors (like Sectra and Epic) to test it against. I look forward to further discussion!</p>
</blockquote>



<a name="154009458"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179269-fhircast-github/topic/docs%20/%20Issue%20%2333%20why%20must%20a%20subscriber%20have%20an%20accessible.../near/154009458" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Github Notifications (FHIRcast) <a href="https://fhir.github.io/chat-archive/stream/179269-fhircast-github/topic/docs.20.2F.20Issue.20.2333.20why.20must.20a.20subscriber.20have.20an.20accessible.2E.2E.2E.html#154009458">(Oct 16 2018 at 16:55)</a>:</h4>
<p>gkustas {} a <a href="https://github.com/fhircast/docs/issues/33#issuecomment-430308473" target="_blank" title="https://github.com/fhircast/docs/issues/33#issuecomment-430308473">comment</a> on <a href="https://github.com/fhircast/docs/issues/33" target="_blank" title="https://github.com/fhircast/docs/issues/33">Issue #33</a></p>
<blockquote>
<p>Thanks @isaacvetter ,</p>
<p>At Nuance we are just starting with FHIR, and we were wondering what the community was doing about this issue. We want to avoid installing SSL certs on EVERY one of our desktop clients. We were wondering if SignalR was going to be supported, because there are the beginnings of implementation in the sandbox source code :-)</p>
<p>We are happy to start our prototype using the webhooks (rest-hook) on our clients if we know that we have other radiology vendors (like Sectra and Epic) to test it against. I look forward to further discussion!</p>
<p>We are also interested in participating with the experimental WebSockets if it will eliminate the need for SSL certs and provide robust security as well. Is that something I can assume? How is the data encrypted over a websocket, or isn't it?</p>
</blockquote>



<a name="154019900"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179269-fhircast-github/topic/docs%20/%20Issue%20%2333%20why%20must%20a%20subscriber%20have%20an%20accessible.../near/154019900" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Github Notifications (FHIRcast) <a href="https://fhir.github.io/chat-archive/stream/179269-fhircast-github/topic/docs.20.2F.20Issue.20.2333.20why.20must.20a.20subscriber.20have.20an.20accessible.2E.2E.2E.html#154019900">(Nov 20 2018 at 22:07)</a>:</h4>
<p>isaacvetter <a href="https://github.com/fhircast/docs/issues/33#issuecomment-440446786" target="_blank" title="https://github.com/fhircast/docs/issues/33#issuecomment-440446786">commented</a> on <a href="https://github.com/fhircast/docs/issues/33" target="_blank" title="https://github.com/fhircast/docs/issues/33">Issue #33</a></p>
<blockquote>
<p>Hey @gkustas, apologies for the delayed response. </p>
<p>As Leo pointed out in another issue, websockets are securing via TLS using the wss protocol. </p>
<p>The problem with SignalR is that it's not a standard and wraps the bare websocket communication with it's own thin, comm layer, such that only a SignalR client can communicate with a SignalR server. </p>
<p>To support websockets in FHIRcast, we can't mandate use of a tech-stack specific technology. </p>
<p>Happy to talk more about this as you work on websockets. </p>
</blockquote>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
