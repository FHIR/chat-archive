---
layout: page
title: "FHIR Chat  · fhircast-docs / Issue #309 Stand-alone launch - context s... · fhircast-github"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179269-fhircast-github/index.html">fhircast-github</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179269-fhircast-github/topic/fhircast-docs.20.2F.20Issue.20.23309.20Stand-alone.20launch.20-.20context.20s.2E.2E.2E.html">fhircast-docs / Issue #309 Stand-alone launch - context s...</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="196624404"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179269-fhircast-github/topic/fhircast-docs%20/%20Issue%20%23309%20Stand-alone%20launch%20-%20context%20s.../near/196624404" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Github Notifications (FHIRcast) <a href="https://fhir.github.io/chat-archive/stream/179269-fhircast-github/topic/fhircast-docs.20.2F.20Issue.20.23309.20Stand-alone.20launch.20-.20context.20s.2E.2E.2E.html#196624404">(May 06 2020 at 12:09)</a>:</h4>
<p>mbellehumeur opened <a href="https://github.com/HL7/fhircast-docs/issues/309" title="https://github.com/HL7/fhircast-docs/issues/309">Issue #309</a>:</p>
<blockquote>
<p>To facilitate applications joining an on-going workflow independently, we propose to have the subscription process provide the last event.<br>
There are two opportunities in the current protocol to provide that information: in the body of the subscription response itself which is currently empty or as an additional field in the subscription confirmation message.</p>
<p>This would also mitigate the need for a get-context query which was pushed out in the last ballot:<br>
<a href="https://github.com/HL7/fhircast-docs/issues/143" title="https://github.com/HL7/fhircast-docs/issues/143">https://github.com/HL7/fhircast-docs/issues/143</a></p>
</blockquote>



<a name="197275661"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179269-fhircast-github/topic/fhircast-docs%20/%20Issue%20%23309%20Stand-alone%20launch%20-%20context%20s.../near/197275661" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Github Notifications (FHIRcast) <a href="https://fhir.github.io/chat-archive/stream/179269-fhircast-github/topic/fhircast-docs.20.2F.20Issue.20.23309.20Stand-alone.20launch.20-.20context.20s.2E.2E.2E.html#197275661">(May 12 2020 at 13:33)</a>:</h4>
<p>isaacvetter <a href="https://github.com/HL7/fhircast-docs/issues/309#issuecomment-627348225">commented</a> on <a href="https://github.com/HL7/fhircast-docs/issues/309">Issue #309</a>:</p>
<blockquote>
<p>Hey @mbellehumeur ,</p>
<p>Wouldn't it make more sense for the hub to follow up a successful subscription with a normal event notification, sent to the new subscriber?</p>
<p>The selection of what events to send, to different subscribers with different subscriptions is tricky. We wouldn't want to send a -close event, for example. Nor an -open for which a -close had occurred. </p>
<p>It does seem that capabilities of Hubs will differ, the amount of time which a Hub caches/remembers these events will naturally vary, therefore this should be an optional feature of a Hub. </p>
<p>What do you think, Martin?</p>
<p>Isaac</p>
<p>Related: <a href="https://jira.hl7.org/browse/FHIR-25877">https://jira.hl7.org/browse/FHIR-25877</a></p>
</blockquote>



<a name="197283369"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179269-fhircast-github/topic/fhircast-docs%20/%20Issue%20%23309%20Stand-alone%20launch%20-%20context%20s.../near/197283369" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Github Notifications (FHIRcast) <a href="https://fhir.github.io/chat-archive/stream/179269-fhircast-github/topic/fhircast-docs.20.2F.20Issue.20.23309.20Stand-alone.20launch.20-.20context.20s.2E.2E.2E.html#197283369">(May 12 2020 at 14:24)</a>:</h4>
<p>mbellehumeur <a href="https://github.com/HL7/fhircast-docs/issues/309#issuecomment-627378340">commented</a> on <a href="https://github.com/HL7/fhircast-docs/issues/309">Issue #309</a>:</p>
<blockquote>
<p>Thanks @isaacvetter !<br>
I’m fine with the mechanism but it needs to be in the standard.  <br>
I think just sending the last event will cover &gt;80% use cases.  <br>
An app should know that if the last event was a “close” then it should do nothing.<br>
It should be an additional  parameter of the subscription so that only client that want to receive this “last event” do.  Can we have this added?</p>
</blockquote>



<a name="197319957"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179269-fhircast-github/topic/fhircast-docs%20/%20Issue%20%23309%20Stand-alone%20launch%20-%20context%20s.../near/197319957" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Github Notifications (FHIRcast) <a href="https://fhir.github.io/chat-archive/stream/179269-fhircast-github/topic/fhircast-docs.20.2F.20Issue.20.23309.20Stand-alone.20launch.20-.20context.20s.2E.2E.2E.html#197319957">(May 12 2020 at 18:42)</a>:</h4>
<p>isaacvetter <a href="https://github.com/HL7/fhircast-docs/issues/309#issuecomment-627522519">commented</a> on <a href="https://github.com/HL7/fhircast-docs/issues/309">Issue #309</a>:</p>
<blockquote>
<p>Eric Martin made the point during our II call this afternoon, that an event notification communicating current context following a successful subscription also persists the problem of potentially stale information. There's will also be timing issues unless the subscription is atomic.</p>
</blockquote>



<a name="199029657"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179269-fhircast-github/topic/fhircast-docs%20/%20Issue%20%23309%20Stand-alone%20launch%20-%20context%20s.../near/199029657" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Github Notifications (FHIRcast) <a href="https://fhir.github.io/chat-archive/stream/179269-fhircast-github/topic/fhircast-docs.20.2F.20Issue.20.23309.20Stand-alone.20launch.20-.20context.20s.2E.2E.2E.html#199029657">(May 28 2020 at 14:30)</a>:</h4>
<p>gkustas <a href="https://github.com/HL7/fhircast-docs/issues/309#issuecomment-635385712">commented</a> on <a href="https://github.com/HL7/fhircast-docs/issues/309">Issue #309</a>:</p>
<blockquote>
<p>This question of "how to replace get context" doesn't want to go away. My take on it, FWIW, is that we really shouldn't create a Hub standard for getting current context, until we standardize events/workflows and clearly define just "what context is" for any event/workflow. I don't know if that is possible or not, but consider the following:</p>
<ol>
<li>A Hub can optionally choose to provide context and versioning (standard FHIR version numbers for resources).</li>
<li>The context is defined as the FHIR resource(s) identified by the event(s) sent in the topic session. Events would have to follow the spec definition [FHIR Resource]-[open|close|...|...|...]. Question: do we need to support multiple resources in a single session (ie. DiagnosticReport, ImagingStudy, etc.)?</li>
<li>Whenever a [FHIR Resource]-open event is received, the Hub stores the resource and versions it. Likewise, when a [FHIR Resource]-update is received, the Hub applies the changes and increments the version number prior to broadcasting the update message. THIS IS THE IMPORTANT PART: Nuance currently uses a Bundle of transactions for the DiagnosticReport-update. We, as in FHIRCast, would have to define this or some other message structure as a standard for ALL EVENTS if we want to implement a "smart Hub" that can provide the current context. </li>
<li>When a [FHIR Resource-close is received, the Hub can clear the context. There are probably other implementation details to consider here to ensure that old, unused topic sessions are cleaned up before a new session is started again.</li>
<li>When a client determines it needs to get the current context, it could hit an endpoint on the Hub which would return a context array of every open FHIR Resource, complete with a version number. </li>
</ol>
<p>There are probably other issues to consider, but by far the biggest would be standardizing the event message structure, especially for updates.</p>
</blockquote>



<a name="199029901"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179269-fhircast-github/topic/fhircast-docs%20/%20Issue%20%23309%20Stand-alone%20launch%20-%20context%20s.../near/199029901" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Github Notifications (FHIRcast) <a href="https://fhir.github.io/chat-archive/stream/179269-fhircast-github/topic/fhircast-docs.20.2F.20Issue.20.23309.20Stand-alone.20launch.20-.20context.20s.2E.2E.2E.html#199029901">(May 28 2020 at 14:32)</a>:</h4>
<p>gkustas edited a <a href="https://github.com/HL7/fhircast-docs/issues/309#issuecomment-635385712">comment</a> on <a href="https://github.com/HL7/fhircast-docs/issues/309">Issue #309</a>:</p>
<blockquote>
<p>This question of "how to replace get context" doesn't want to go away. My take on it, FWIW, is that we really shouldn't create a Hub standard for getting current context, until we standardize events/workflows and clearly define just "what context is" for any event/workflow. I don't know if that is possible or not, but consider the following:</p>
<ol>
<li>A Hub can optionally choose to provide context and versioning (standard FHIR version numbers for resources).</li>
<li>The context is defined as the FHIR resource(s) identified by the event(s) sent in the topic session. Events would have to follow the spec definition [FHIR Resource]-[open|close|...|...|...]. Question: do we need to support multiple resources in a single session (ie. DiagnosticReport, ImagingStudy, etc.)?</li>
<li>Whenever a [FHIR Resource]-open event is received, the Hub stores the resource and versions it. Likewise, when a [FHIR Resource]-update is received, the Hub applies the changes and increments the version number prior to broadcasting the update message. THIS IS THE IMPORTANT PART: Nuance currently uses a Bundle of transactions for the DiagnosticReport-update. We, as in FHIRCast, would have to define this or some other message structure as a standard for ALL EVENTS if we want to implement a "smart Hub" that can provide the current context. </li>
<li>When a [FHIR Resource-close is received, the Hub can clear the context. There are probably other implementation details to consider here to ensure that old, unused topic sessions are cleaned up before a new session is started again.</li>
<li>When a client determines it needs to get the current context, it could hit an endpoint on the Hub which would return a context array of every open FHIR Resource, complete with a version number. </li>
</ol>
<p>There are probably other issues to consider, but by far the biggest would be standardizing the event message structure, especially for updates.</p>
<p>@isaacvetter @mbellehumeur ???</p>
</blockquote>



<a name="199034025"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179269-fhircast-github/topic/fhircast-docs%20/%20Issue%20%23309%20Stand-alone%20launch%20-%20context%20s.../near/199034025" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Github Notifications (FHIRcast) <a href="https://fhir.github.io/chat-archive/stream/179269-fhircast-github/topic/fhircast-docs.20.2F.20Issue.20.23309.20Stand-alone.20launch.20-.20context.20s.2E.2E.2E.html#199034025">(May 28 2020 at 15:00)</a>:</h4>
<p>gkustas edited a <a href="https://github.com/HL7/fhircast-docs/issues/309#issuecomment-635385712">comment</a> on <a href="https://github.com/HL7/fhircast-docs/issues/309">Issue #309</a>:</p>
<blockquote>
<p>This question of "how to replace get context" doesn't want to go away. My take on it, FWIW, is that we really shouldn't create a Hub standard for getting current context, until we standardize events/workflows and clearly define just "what context is" for any event/workflow. I don't know if that is possible or not, but consider the following:</p>
<ol>
<li>A Hub can optionally choose to provide context and versioning (standard FHIR version numbers for resources).</li>
<li>The context is defined as the FHIR resource(s) identified by the event(s) sent in the topic session. Events would have to follow the spec definition [FHIR Resource]-[open|close|...|...|...]. NOTE: a FHIR Resource may <strong>contain</strong> one or more other FHIR  Resources. In our implementation, a DiagnosticReport is the "context" and it contains ImagingStudy resource(s) and optionally Observation resources.  Question: do we need to support multiple top-level resources in a single session (for example ImagingStudy-open and DiagnosticReport-open)?</li>
<li>Whenever a [FHIR Resource]-open event is received, the Hub stores the resource and versions it. Likewise, when a [FHIR Resource]-update is received, the Hub applies the changes and increments the version number prior to broadcasting the update message. THIS IS THE IMPORTANT PART: Nuance currently uses a Bundle of transactions for the DiagnosticReport-update. We, as in FHIRCast, would have to define this or some other message structure as a standard for ALL EVENTS if we want to implement a "smart Hub" that can provide the current context. </li>
<li>When a [FHIR Resource-close is received, the Hub can clear the context. There are probably other implementation details to consider here to ensure that old, unused topic sessions are cleaned up before a new session is started again.</li>
<li>When a client determines it needs to get the current context, it could hit an endpoint on the Hub which would return a context array of every open FHIR Resource, complete with a version number. </li>
</ol>
<p>There are probably other issues to consider, but by far the biggest would be standardizing the event message structure, especially for updates.</p>
<p>@isaacvetter @mbellehumeur ???</p>
</blockquote>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
