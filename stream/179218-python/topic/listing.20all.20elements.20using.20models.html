---
layout: page
title: "FHIR Chat  · listing all elements using models · python"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179218-python/index.html">python</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179218-python/topic/listing.20all.20elements.20using.20models.html">listing all elements using models</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="155272041"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179218-python/topic/listing%20all%20elements%20using%20models/near/155272041" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179218-python/topic/listing.20all.20elements.20using.20models.html#155272041">(Jan 16 2019 at 17:36)</a>:</h4>
<p>using the model I can easily list all the objects props using...</p>
<p>for i in [type]().elementProperties():<br>
    print(i)</p>
<p>e.g.   <br>
(ignoring my r4 hack for _elements)</p>
<div class="codehilite"><pre><span></span>for i in p.elementProperties():
    print(i[0])

id
implicitRules
_implicitRules
language
_language
meta
contained
extension
modifierExtension
text
active
_active
address
birthDate
communication
contact
deceasedBoolean
_deceasedBoolean
deceasedDateTime
gender
_gender
generalPractitioner
identifier
link
managingOrganization
maritalStatus
multipleBirthBoolean
_multipleBirthBoolean
multipleBirthInteger
_multipleBirthInteger
name
photo
telecom
</pre></div>


<p>but I would like to know if there is a simple way to do something like...</p>
<p>for i in [type].[element].elementProperties():<br>
    print(i)</p>
<div class="codehilite"><pre><span></span>(Note this is desired but  does not work like this!!)
for i in p.name.elementProperties():
    print(i[0])

Coding
text

for j in p.name.Coding.elementProperties():
   print (j[0])

code
display
text

~~~~
</pre></div>



<a name="155272254"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179218-python/topic/listing%20all%20elements%20using%20models/near/155272254" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179218-python/topic/listing.20all.20elements.20using.20models.html#155272254">(Jan 16 2019 at 17:39)</a>:</h4>
<p>like using namedTuple or something?</p>



<a name="155272750"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179218-python/topic/listing%20all%20elements%20using%20models/near/155272750" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179218-python/topic/listing.20all.20elements.20using.20models.html#155272750">(Jan 16 2019 at 17:46)</a>:</h4>
<p>(deleted)</p>



<a name="155312717"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179218-python/topic/listing%20all%20elements%20using%20models/near/155312717" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179218-python/topic/listing.20all.20elements.20using.20models.html#155312717">(Jan 17 2019 at 05:36)</a>:</h4>
<p>What I'm looking for is a way to list the "snapshot of element" recursing through the elements until I get to the primitives.  I've done this using the bracket notation but would like to know if there is an easier way.</p>



<a name="155317761"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179218-python/topic/listing%20all%20elements%20using%20models/near/155317761" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179218-python/topic/listing.20all.20elements.20using.20models.html#155317761">(Jan 17 2019 at 08:00)</a>:</h4>
<div class="codehilite"><pre><span></span>from fhirclient.models import patient as P

def get_eps(name,o,depth=0):
    print(&#39;--&#39;*depth, name)
    print(&#39;--&#39;,&#39;id&#39;) if depth == 0 else False
    for i,j,k,l,m,n in o.elementProperties():
        if i in [&#39;extension&#39;,&#39;modifierExtension&#39;,&#39;assigner&#39;,&#39;id&#39;] :
            continue
        if i ==&#39;contained&#39;:
            print(&#39;--&#39;,i)
            continue
        try:
            get_eps(i,k(), depth+1) if k() else print(&#39;--&#39;*(depth+1),j)
        except AttributeError:
            pass

p = P.Patient()
get_eps(p.resource_type,p)
</pre></div>



<a name="155317799"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179218-python/topic/listing%20all%20elements%20using%20models/near/155317799" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179218-python/topic/listing.20all.20elements.20using.20models.html#155317799">(Jan 17 2019 at 08:01)</a>:</h4>
<p>gives you </p>
<div class="codehilite"><pre><span></span> Patient
-- id
-- implicitRules
-- language
-- meta
---- lastUpdated
---- profile
---- security
etc...
~~~
</pre></div>



<a name="156490821"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179218-python/topic/listing%20all%20elements%20using%20models/near/156490821" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179218-python/topic/listing.20all.20elements.20using.20models.html#156490821">(Jan 20 2019 at 17:49)</a>:</h4>
<p>here is a more flexible version that allows you to list all elements in dot notation or snake case.</p>
<div class="codehilite"><pre><span></span>from fhirr4models import observation as O   # my R4 model library which includes a fhir primitive hack

recursives = [&#39;extension&#39;,&#39;modifierExtension&#39;,&#39;assigner&#39;]
root_ignore = [&#39;contained&#39;,&#39;implicitRules&#39;,&#39;language&#39;,&#39;meta&#39;,&#39;extension&#39;,&#39;modifierExtension&#39;,&#39;text&#39;]
datatype_ignore = [&#39;id&#39;,&#39;userSelected&#39;, &#39;version&#39;]
ignore_fhirprimitive = True
delimiter = &#39;.&#39;
list_notation =&#39;[0]&#39;

def get_eps(element,path, level = 0):
    print(path)

    for i,j,k,l,m,n in element.elementProperties():
        if level &gt; 0 and (i in recursives):  # ignore recursive elements except for root level
            continue
        elif level == 0 and i in root_ignore:  # ignore these root elements
            continue
        elif level &gt; 0 and i in datatype_ignore:  # ignore these datatype elements
            continue
        elif i.startswith(&#39;_&#39;) and ignore_fhirprimitive:  # ignore _elements
            continue

        try:
            get_eps(element=k(),path=f&#39;{path}{delimiter}{i}{list_notation}&#39; if l else f&#39;{path}{delimiter}{i}&#39;,level = level +1)
        except AttributeError:
            pass

a = O.Observation()
get_eps(element=a,path=a.resource_type,level=0)
</pre></div>



<a name="156490891"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179218-python/topic/listing%20all%20elements%20using%20models/near/156490891" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179218-python/topic/listing.20all.20elements.20using.20models.html#156490891">(Jan 20 2019 at 17:51)</a>:</h4>
<p>will give you...</p>
<div class="codehilite"><pre><span></span>Observation
Observation.id
Observation.basedOn[0]
Observation.basedOn[0].display
Observation.basedOn[0].identifier
Observation.basedOn[0].identifier.period
Observation.basedOn[0].identifier.period.end
Observation.basedOn[0].identifier.period.start
Observation.basedOn[0].identifier.system
Observation.basedOn[0].identifier.type
Observation.basedOn[0].identifier.type.coding[0]
Observation.basedOn[0].identifier.type.coding[0].code
Observation.basedOn[0].identifier.type.coding[0].display
Observation.basedOn[0].identifier.type.coding[0].system
Observation.basedOn[0].identifier.type.text
Observation.basedOn[0].identifier.use
Observation.basedOn[0].identifier.value
Observation.basedOn[0].reference
....
</pre></div>



<a name="156773236"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179218-python/topic/listing%20all%20elements%20using%20models/near/156773236" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Geoff Low <a href="https://fhir.github.io/chat-archive/stream/179218-python/topic/listing.20all.20elements.20using.20models.html#156773236">(Jan 24 2019 at 13:51)</a>:</h4>
<p>Cool, how do you work the extensions that are on the model (eg working group, etc) versus those that are potentially available (extension-definitions.json); the way I see it the defined elements (ie Observations.extensions = []) could be 'hard-coded' with the values - you'd need to load the extension definitions to get what the class attribute should be called and multiplicity, but then instantiate it as an extension.Extension instance?</p>



<a name="156783421"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179218-python/topic/listing%20all%20elements%20using%20models/near/156783421" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179218-python/topic/listing.20all.20elements.20using.20models.html#156783421">(Jan 24 2019 at 16:00)</a>:</h4>
<p>I omitted the extensions since they recurse reaching a recursion limit in the script but you certainly could add them in as you describe.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
