---
layout: page
title: "FHIR Chat  · Creating Python model from logical model SD · python"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179218-python/index.html">python</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179218-python/topic/Creating.20Python.20model.20from.20logical.20model.20SD.html">Creating Python model from logical model SD</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153909541"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179218-python/topic/Creating%20Python%20model%20from%20logical%20model%20SD/near/153909541" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179218-python/topic/Creating.20Python.20model.20from.20logical.20model.20SD.html#153909541">(Sep 20 2017 at 23:28)</a>:</h4>
<p>I looked at the <a href="https://github.com/smart-on-fhir/fhir-parser/tree/6eb44a9639a7fdab9d8f62781b33ecf5d7a9f40e" target="_blank" title="https://github.com/smart-on-fhir/fhir-parser/tree/6eb44a9639a7fdab9d8f62781b33ecf5d7a9f40e">fhir-parser</a>  to see if there was a way to use it to create a  python model from logical model SD file.  Short of adding a SD to the build bundle, I could not see an obvious entry point for a single custom resource that would still be using all the base types.   Any ideas?</p>



<a name="153909542"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179218-python/topic/Creating%20Python%20model%20from%20logical%20model%20SD/near/153909542" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pascal Pfiffner <a href="https://fhir.github.io/chat-archive/stream/179218-python/topic/Creating.20Python.20model.20from.20logical.20model.20SD.html#153909542">(Sep 20 2017 at 23:31)</a>:</h4>
<p>Try running fhir-parser once, then add your SD into the "downloads" folder and run it again. That could work.</p>



<a name="153909796"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179218-python/topic/Creating%20Python%20model%20from%20logical%20model%20SD/near/153909796" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179218-python/topic/Creating.20Python.20model.20from.20logical.20model.20SD.html#153909796">(Sep 21 2017 at 21:05)</a>:</h4>
<p>Thanks I tried it and did not work.  It seem that classes are not being  generated from the  <code>.../client-py/fhir-parser/downloads</code> folder. - I removed the SD for Account from the directory but its class was still generated anyway.</p>



<a name="153910111"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179218-python/topic/Creating%20Python%20model%20from%20logical%20model%20SD/near/153910111" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pascal Pfiffner <a href="https://fhir.github.io/chat-archive/stream/179218-python/topic/Creating.20Python.20model.20from.20logical.20model.20SD.html#153910111">(Sep 24 2017 at 04:37)</a>:</h4>
<p><span class="user-mention" data-user-id="191401">@Eric Haas</span> I just checked, and the parser simply reads <code>downloads/profiles-resources.json</code>, which is a Bundle containing all StructureDefinitons of the resources. You can either run the generator (from client-py) once, then replace that file with a Bundle of your own SDs, or give your Bundle of SDs a custom name, place it into <code>downloads</code> as well and edit <code>fhirspec.py</code> on line 95 to also read your file (there's a commented out part in place already also looking for <code>profiles-others.json</code>).</p>



<a name="153910112"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179218-python/topic/Creating%20Python%20model%20from%20logical%20model%20SD/near/153910112" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pascal Pfiffner <a href="https://fhir.github.io/chat-archive/stream/179218-python/topic/Creating.20Python.20model.20from.20logical.20model.20SD.html#153910112">(Sep 24 2017 at 04:38)</a>:</h4>
<p>LMK how that goes!</p>



<a name="153910521"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179218-python/topic/Creating%20Python%20model%20from%20logical%20model%20SD/near/153910521" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179218-python/topic/Creating.20Python.20model.20from.20logical.20model.20SD.html#153910521">(Sep 25 2017 at 16:31)</a>:</h4>
<p>yes that works well - thanks</p>



<a name="153930786"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179218-python/topic/Creating%20Python%20model%20from%20logical%20model%20SD/near/153930786" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179218-python/topic/Creating.20Python.20model.20from.20logical.20model.20SD.html#153930786">(Jan 25 2018 at 22:51)</a>:</h4>
<p>I'm using the Python model for creating a Flask scheduling application and was going well until this mysterious message:</p>
<p>fhirclient.models.fhirabstractbase.FHIRValidationError</p>
<p>fhirclient.models.fhirabstractbase.FHIRValidationError: {root}: 'Non-optional property "type" on &lt;fhirclient.models.bundle.Bundle object at 0x101ff0ac8&gt; is missing'</p>



<a name="153930787"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179218-python/topic/Creating%20Python%20model%20from%20logical%20model%20SD/near/153930787" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179218-python/topic/Creating.20Python.20model.20from.20logical.20model.20SD.html#153930787">(Jan 25 2018 at 22:52)</a>:</h4>
<p>the bundles I created all have the type elements and I reverted back to a working version and can't find the source.  Anyway is there a way to turn off the validation?</p>



<a name="153930815"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179218-python/topic/Creating%20Python%20model%20from%20logical%20model%20SD/near/153930815" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Geoff Low <a href="https://fhir.github.io/chat-archive/stream/179218-python/topic/Creating.20Python.20model.20from.20logical.20model.20SD.html#153930815">(Jan 26 2018 at 12:30)</a>:</h4>
<p>It looks like you can pass a strict=False to the initialisation and it will probably work (ie _bundle = bundle.Bundle(jsondict=dict(XX), strict=False) - it defaults to True.  type is a reserved word in python so their may be some clash on that maybe?</p>
<div class="codehilite"><pre><span></span><span class="n">c</span> <span class="o">=</span> <span class="n">bundle</span><span class="o">.</span><span class="n">Bundle</span><span class="p">(</span><span class="n">jsondict</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="nb">type</span><span class="o">=</span><span class="s2">&quot;sausage&quot;</span><span class="p">,</span> <span class="n">identifier</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">system</span><span class="o">=</span><span class="s2">&quot;https://example.org/glow&quot;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="s1">&#39;my_erroneous_bundle&#39;</span><span class="p">)))</span>
<span class="n">c</span> <span class="o">=</span> <span class="n">bundle</span><span class="o">.</span><span class="n">Bundle</span><span class="p">(</span><span class="n">jsondict</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">identifier</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">system</span><span class="o">=</span><span class="s2">&quot;https://example.org/glow&quot;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="s1">&#39;my_erroneous_bundle&#39;</span><span class="p">)))</span>
<span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
  <span class="n">File</span> <span class="s2">&quot;&lt;input&gt;&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">1</span><span class="p">,</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
  <span class="n">File</span> <span class="s2">&quot;/Users/glow/Documents/Devel/PycharmProjects/fhirton/models/models_r4/bundle.py&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">55</span><span class="p">,</span> <span class="ow">in</span> <span class="fm">__init__</span>
    <span class="nb">super</span><span class="p">(</span><span class="n">Bundle</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">jsondict</span><span class="o">=</span><span class="n">jsondict</span><span class="p">,</span> <span class="n">strict</span><span class="o">=</span><span class="n">strict</span><span class="p">)</span>
  <span class="n">File</span> <span class="s2">&quot;/Users/glow/Documents/Devel/PycharmProjects/fhirton/models/models_r4/resource.py&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">42</span><span class="p">,</span> <span class="ow">in</span> <span class="fm">__init__</span>
    <span class="nb">super</span><span class="p">(</span><span class="n">Resource</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">jsondict</span><span class="o">=</span><span class="n">jsondict</span><span class="p">,</span> <span class="n">strict</span><span class="o">=</span><span class="n">strict</span><span class="p">)</span>
  <span class="n">File</span> <span class="s2">&quot;/Users/glow/Documents/Devel/PycharmProjects/fhirton/models/models_r4/fhirabstractresource.py&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">25</span><span class="p">,</span> <span class="ow">in</span> <span class="fm">__init__</span>
    <span class="nb">super</span><span class="p">(</span><span class="n">FHIRAbstractResource</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">jsondict</span><span class="o">=</span><span class="n">jsondict</span><span class="p">,</span> <span class="n">strict</span><span class="o">=</span><span class="n">strict</span><span class="p">)</span>
  <span class="n">File</span> <span class="s2">&quot;/Users/glow/Documents/Devel/PycharmProjects/fhirton/models/models_r4/fhirabstractbase.py&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">61</span><span class="p">,</span> <span class="ow">in</span> <span class="fm">__init__</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">update_with_json</span><span class="p">(</span><span class="n">jsondict</span><span class="p">)</span>
  <span class="n">File</span> <span class="s2">&quot;/Users/glow/Documents/Devel/PycharmProjects/fhirton/models/models_r4/fhirabstractbase.py&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">226</span><span class="p">,</span> <span class="ow">in</span> <span class="n">update_with_json</span>
    <span class="k">raise</span> <span class="n">FHIRValidationError</span><span class="p">(</span><span class="n">errs</span><span class="p">)</span>
<span class="n">models</span><span class="o">.</span><span class="n">models_r4</span><span class="o">.</span><span class="n">fhirabstractbase</span><span class="o">.</span><span class="n">FHIRValidationError</span><span class="p">:</span> <span class="p">{</span><span class="n">root</span><span class="p">}:</span>
  <span class="s1">&#39;Non-optional property &quot;type&quot; on &lt;models.models_r4.bundle.Bundle object at 0x10b463ba8&gt; is missing&#39;</span>
<span class="n">c</span> <span class="o">=</span> <span class="n">bundle</span><span class="o">.</span><span class="n">Bundle</span><span class="p">(</span><span class="n">jsondict</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">identifier</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">system</span><span class="o">=</span><span class="s2">&quot;https://example.org/glow&quot;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="s1">&#39;my_erroneous_bundle&#39;</span><span class="p">)),</span> <span class="n">strict</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">WARNING</span><span class="p">:</span><span class="n">root</span><span class="p">:</span><span class="s1">&#39;Non-optional property &quot;type&quot; on &lt;models.models_r4.bundle.Bundle object at 0x10b456dd8&gt; is missing&#39;</span>
</pre></div>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
