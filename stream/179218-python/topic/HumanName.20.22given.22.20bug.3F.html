---
layout: page
title: "FHIR Chat  · HumanName &quot;given&quot; bug? · python"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179218-python/index.html">python</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179218-python/topic/HumanName.20.22given.22.20bug.3F.html">HumanName &quot;given&quot; bug?</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="240130725"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179218-python/topic/HumanName%20%22given%22%20bug%3F/near/240130725" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alice Sartori Monteiro de Barros <a href="https://fhir.github.io/chat-archive/stream/179218-python/topic/HumanName.20.22given.22.20bug.3F.html#240130725">(May 25 2021 at 00:39)</a>:</h4>
<p>Hello all,<br>
I am getting this Exception from time to time in my program:</p>
<p>File "C:\Users\Sartori\Documents\ADT\sapadt_to_fhir\segments\patient_identification.py", line 195, in post_process<br>
    self.patient_json = self.patient_object.as_json()<br>
  File "C:\Users\Sartori\AppData\Roaming\Python\Python38\site-packages\fhirclient\models\fhirabstractresource.py", line 42, in as_json<br>
    js = super(FHIRAbstractResource, self).as_json()<br>
  File "C:\Users\Sartori\AppData\Roaming\Python\Python38\site-packages\fhirclient\models\fhirabstractbase.py", line 297, in as_json<br>
    raise FHIRValidationError(errs)<br>
fhirclient.models.fhirabstractbase.FHIRValidationError: {root}:<br>
  contact.0:<br>
    name:<br>
      given:<br>
        Expecting property "given" on &lt;class 'fhirclient.models.humanname.HumanName'&gt; to be &lt;class 'str'&gt;, but is &lt;class 'list'&gt;</p>
<p>Is this a bug? "Given" in Humanname clearly supposed to be a list according to documentation <a href="https://simplifier.net/packages/hl7.fhir.r4.core/4.0.1/files/78879">https://simplifier.net/packages/hl7.fhir.r4.core/4.0.1/files/78879</a>. The strangest thing is that I only get this exception from time to time (like 1/1000 patient ressources created).</p>
<p>My code builds the name like this:</p>
<p>name_obj = humanname.HumanName()<br>
<a href="http://name_obj.family">name_obj.family</a> = family<br>
name_obj.given = [given] if given else None<br>
name_obj.use = "official"<br>
 name_obj.suffix = [suffix] if suffix else None</p>



<a name="240177716"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179218-python/topic/HumanName%20%22given%22%20bug%3F/near/240177716" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Julian Sass <a href="https://fhir.github.io/chat-archive/stream/179218-python/topic/HumanName.20.22given.22.20bug.3F.html#240177716">(May 25 2021 at 12:16)</a>:</h4>
<p>HumanName.given is a list of strings. I think your code works as long as the given variable here is a string because you're already assigning it inside a list. But if your source patient data has multiple given names already in a list, this will probably cause this error because then you're putting a list inside a list.</p>



<a name="240213520"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179218-python/topic/HumanName%20%22given%22%20bug%3F/near/240213520" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179218-python/topic/HumanName.20.22given.22.20bug.3F.html#240213520">(May 25 2021 at 16:23)</a>:</h4>
<h1>here is what <span class="user-mention" data-user-id="194952">@Julian Sass</span>  is talking about...</h1>
<div class="codehilite" data-code-language="Python"><pre><span></span><code><span class="kn">from</span>  <span class="nn">fhirclient.r4models</span> <span class="kn">import</span> <span class="n">humanname</span>
<span class="kn">from</span> <span class="nn">json</span> <span class="kn">import</span> <span class="n">dumps</span><span class="p">,</span> <span class="n">loads</span><span class="p">,</span> <span class="n">load</span>
</code></pre></div>
<div class="codehilite" data-code-language="Python"><pre><span></span><code><span class="n">given</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'given1'</span><span class="p">,</span><span class="s1">'given2'</span><span class="p">]</span>
<span class="n">suffix</span> <span class="o">=</span> <span class="kc">None</span>

<span class="n">name_obj</span><span class="o">.</span><span class="n">family</span> <span class="o">=</span> <span class="s1">'family'</span>
<span class="n">name_obj</span><span class="o">.</span><span class="n">given</span> <span class="o">=</span> <span class="p">[</span><span class="n">given</span><span class="p">]</span> <span class="k">if</span> <span class="n">given</span> <span class="k">else</span> <span class="kc">None</span>
<span class="n">name_obj</span><span class="o">.</span><span class="n">use</span> <span class="o">=</span> <span class="s2">"official"</span>
<span class="n">name_obj</span><span class="o">.</span><span class="n">suffix</span> <span class="o">=</span> <span class="p">[</span><span class="n">suffix</span><span class="p">]</span> <span class="k">if</span> <span class="n">suffix</span> <span class="k">else</span> <span class="kc">None</span>

<span class="n">name_obj</span><span class="o">.</span><span class="n">as_json</span><span class="p">()</span>
</code></pre></div>
<div class="codehilite"><pre><span></span><code>---------------------------------------------------------------------------

FHIRValidationError                       Traceback (most recent call last)

&lt;ipython-input-44-f9172b1b931a&gt; in &lt;module&gt;
      7 name_obj.suffix = [suffix] if suffix else None
      8 
----&gt; 9 name_obj.as_json()


~/Documents/Python/Venv/venv37/lib/python3.7/site-packages/fhirclient/r4models/fhirabstractbase.py in as_json(self)
    295 
    296         if len(errs) &gt; 0:
--&gt; 297             raise FHIRValidationError(errs)
    298         return js
    299


FHIRValidationError: {root}:
  given:
    Expecting property &quot;given&quot; on &lt;class &#39;fhirclient.r4models.humanname.HumanName&#39;&gt; to be &lt;class &#39;str&#39;&gt;, but is &lt;class &#39;list&#39;&gt;
</code></pre></div>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
