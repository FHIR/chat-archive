---
layout: page
title: "FHIR Chat  · basic python · python"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179218-python/index.html">python</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179218-python/topic/basic.20python.html">basic python</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="203410547"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179218-python/topic/basic%20python/near/203410547" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> René Spronk <a href="https://fhir.github.io/chat-archive/stream/179218-python/topic/basic.20python.html#203410547">(Jul 09 2020 at 16:44)</a>:</h4>
<p>def pp(a, b=None):<br>
    print(b)</p>
<p>pp('a')<br>
pp('a',b='hello')<br>
pp('a') </p>
<p>Outputs None, 'hello', None.  (as one would expect)</p>
<p>But I seem to have the situation whereby after pp('a',b='hello') all pp('a') calls afterwards regard b as being 'hello'. Any thoughts as to what might cause that to happen?</p>



<a name="203411656"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179218-python/topic/basic%20python/near/203411656" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/179218-python/topic/basic.20python.html#203411656">(Jul 09 2020 at 16:54)</a>:</h4>
<p>what do you mean "regard b as being 'hello'"?  the fact that the third pp('a') prints None means that b doesn't have a value.</p>



<a name="203417741"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179218-python/topic/basic%20python/near/203417741" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179218-python/topic/basic.20python.html#203417741">(Jul 09 2020 at 17:50)</a>:</h4>
<p>Your example and your description seem to contradict one another :-)</p>



<a name="203417762"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179218-python/topic/basic%20python/near/203417762" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179218-python/topic/basic.20python.html#203417762">(Jul 09 2020 at 17:50)</a>:</h4>
<p>Maybe create a runnable example with something like <a href="https://notebooks.azure.com/">https://notebooks.azure.com/</a> and share a link?</p>



<a name="203417808"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179218-python/topic/basic%20python/near/203417808" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179218-python/topic/basic.20python.html#203417808">(Jul 09 2020 at 17:50)</a>:</h4>
<p>(deleted)</p>



<a name="203436969"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179218-python/topic/basic%20python/near/203436969" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Carl Anderson <a href="https://fhir.github.io/chat-archive/stream/179218-python/topic/basic.20python.html#203436969">(Jul 09 2020 at 20:36)</a>:</h4>
<p>The <a href="https://google.github.io/styleguide/pyguide.html#212-default-argument-values">google python style guide</a> recommends against using mutable object types as default parameters.</p>
<blockquote>
<p>Default arguments are evaluated once at module load time. This may cause problems if the argument is a mutable object such as a list or a dictionary. If the function modifies the object (e.g., by appending an item to a list), the default value is modified.</p>
</blockquote>
<p>So, if you're seeing this with an immutable type like a string, that would be odd.  But if it's an instance of something mutable, that might explain it.</p>



<a name="203465596"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179218-python/topic/basic%20python/near/203465596" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ilya Beda <a href="https://fhir.github.io/chat-archive/stream/179218-python/topic/basic.20python.html#203465596">(Jul 10 2020 at 03:14)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="191372">@René Spronk</span> </p>
<div class="codehilite"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="k">def</span> <span class="nf">pp</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="o">=</span><span class="s1">&#39;hello&#39;</span><span class="p">):</span>
<span class="o">...</span>     <span class="nb">print</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
<span class="o">...</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">pp</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="n">hello</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">pp</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
<span class="mi">2</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">pp</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="n">hello</span>
</code></pre></div>


<p>Your example works fine.</p>
<p>However, if you mutate default argument value it changes permanently.</p>
<div class="codehilite"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="k">def</span> <span class="nf">pp</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="o">=</span><span class="p">{}):</span>
<span class="o">...</span>     <span class="n">b</span><span class="p">[</span><span class="n">a</span><span class="p">]</span> <span class="o">=</span> <span class="n">a</span>
<span class="o">...</span>     <span class="nb">print</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
<span class="o">...</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">pp</span><span class="p">(</span><span class="mi">1</span><span class="p">,{})</span>
<span class="p">{</span><span class="mi">1</span><span class="p">:</span> <span class="mi">1</span><span class="p">}</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">pp</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="p">{</span><span class="mi">2</span><span class="p">:</span> <span class="mi">2</span><span class="p">}</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">pp</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="p">{</span><span class="mi">2</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">:</span> <span class="mi">3</span><span class="p">}</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">pp</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="p">{})</span>
<span class="p">{</span><span class="mi">4</span><span class="p">:</span> <span class="mi">4</span><span class="p">}</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">pp</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="p">{</span><span class="mi">2</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">:</span> <span class="mi">5</span><span class="p">}</span>
<span class="o">&gt;&gt;&gt;</span>
</code></pre></div>



<a name="203478543"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179218-python/topic/basic%20python/near/203478543" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> René Spronk <a href="https://fhir.github.io/chat-archive/stream/179218-python/topic/basic.20python.html#203478543">(Jul 10 2020 at 07:50)</a>:</h4>
<p>Thanks - as it turned this was the classic 'by reference' vs 'by value' issue - using a global dict in a procedure, assigning a local variable name to a part of that global dict, modification of the local variable (and hence: of the global). Solved it by casting the gobal to dict() which forces a copy by value. (I wrote my own FHIR/REST module, just to learn Py, not because I'd do a better job than some of the libraries out there - I'm a trainer, not a programmer).</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
