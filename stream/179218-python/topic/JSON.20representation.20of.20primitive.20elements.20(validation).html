---
layout: page
title: "FHIR Chat  · JSON representation of primitive elements (validation) · python"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179218-python/index.html">python</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179218-python/topic/JSON.20representation.20of.20primitive.20elements.20(validation).html">JSON representation of primitive elements (validation)</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="214788008"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179218-python/topic/JSON%20representation%20of%20primitive%20elements%20%28validation%29/near/214788008" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Stephen Whitney <a href="https://fhir.github.io/chat-archive/stream/179218-python/topic/JSON.20representation.20of.20primitive.20elements.20(validation).html#214788008">(Oct 28 2020 at 01:54)</a>:</h4>
<p><a href="https://www.hl7.org/fhir/json.html#primitive">https://www.hl7.org/fhir/json.html#primitive</a> We're using SOF python model classes to create a Bundle resource with MedicationRequest entries. The MedicationRequest resources we're trying to add as an entry are leveraging the concept of prepending an underscore to the "intent" element name because there's no data to populate from the backend. The open hapi FHIR server validates the "_intent" field with an extension but neither SOF fhirclient nor fhir.resources will validate "_intent". Has anyone else experienced this issue or have a suggestion?</p>



<a name="214834110"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179218-python/topic/JSON%20representation%20of%20primitive%20elements%20%28validation%29/near/214834110" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jason Teeple <a href="https://fhir.github.io/chat-archive/stream/179218-python/topic/JSON.20representation.20of.20primitive.20elements.20(validation).html#214834110">(Oct 28 2020 at 13:18)</a>:</h4>
<p><span class="user-mention silent" data-user-id="269724">Stephen Whitney</span> <a href="#narrow/stream/179218-python/topic/JSON.20representation.20of.20primitive.20elements.20(validation)/near/214788008">said</a>:</p>
<blockquote>
<p><a href="https://www.hl7.org/fhir/json.html#primitive">https://www.hl7.org/fhir/json.html#primitive</a> We're using SOF python model classes to create a Bundle resource with MedicationRequest entries. The MedicationRequest resources we're trying to add as an entry are leveraging the concept of prepending an underscore to the "intent" element name because there's no data to populate from the backend. The open hapi FHIR server validates the "_intent" field with an extension but neither SOF fhirclient nor fhir.resources will validate "_intent". Has anyone else experienced this issue or have a suggestion?</p>
</blockquote>
<p>adding <span class="user-mention" data-user-id="191401">@Eric Haas</span>  <span class="user-mention" data-user-id="197422">@Md Nazrul Islam</span></p>



<a name="214834853"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179218-python/topic/JSON%20representation%20of%20primitive%20elements%20%28validation%29/near/214834853" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Stephen Whitney <a href="https://fhir.github.io/chat-archive/stream/179218-python/topic/JSON.20representation.20of.20primitive.20elements.20(validation).html#214834853">(Oct 28 2020 at 13:24)</a>:</h4>
<p><span class="user-mention" data-user-id="197422">@Md Nazrul Islam</span> I tested with beta 6.x.x version and this doesn't pass validation:</p>
<p>"_intent": {<br>
                    "extension": [<br>
                        {<br>
                            "url": "<a href="http://hl7.org/fhir/StructureDefinition/data-absent-reason">http://hl7.org/fhir/StructureDefinition/data-absent-reason</a>",<br>
                            "valueCode": "unknown"<br>
                        }<br>
                    ]<br>
                },</p>
<p>Am I doing something wrong? </p>
<p>pydantic.error_wrappers.ValidationError: 1 validation error for MedicationRequest<br>
intent<br>
  field required (type=value_error.missing)</p>



<a name="214835283"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179218-python/topic/JSON%20representation%20of%20primitive%20elements%20%28validation%29/near/214835283" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Md Nazrul Islam <a href="https://fhir.github.io/chat-archive/stream/179218-python/topic/JSON.20representation.20of.20primitive.20elements.20(validation).html#214835283">(Oct 28 2020 at 13:28)</a>:</h4>
<p><span class="user-mention" data-user-id="269724">@Stephen Whitney</span>  can you paste full json, so that I can test also</p>



<a name="214835656"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179218-python/topic/JSON%20representation%20of%20primitive%20elements%20%28validation%29/near/214835656" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Stephen Whitney <a href="https://fhir.github.io/chat-archive/stream/179218-python/topic/JSON.20representation.20of.20primitive.20elements.20(validation).html#214835656">(Oct 28 2020 at 13:30)</a>:</h4>
<p>{<br>
  "resourceType": "MedicationRequest",<br>
  "id": "1620518",<br>
  "meta": {<br>
    "versionId": "1",<br>
    "lastUpdated": "2020-10-27T11:04:42.215+00:00",<br>
    "source": "#z072VeAlQWM94jpc",<br>
    "tag": [ {<br>
      "system": "<a href="http://www.alpha.alp/use-case">http://www.alpha.alp/use-case</a>",<br>
      "code": "EX20"<br>
    } ]<br>
  },<br>
  "text": {<br>
    "status": "generated",<br>
    "div": "&lt;div xmlns=\"http://www.w3.org/1999/xhtml\"&gt;\n            &lt;p&gt;Prescription: Erythromycin 250 MG Oral Tablet\n            &lt;/p&gt;\n          &lt;/div&gt;"<br>
  },<br>
  "status": "completed",<br>
  "_intent": {<br>
                    "extension": [<br>
                        {<br>
                            "url": "<a href="http://hl7.org/fhir/StructureDefinition/data-absent-reason">http://hl7.org/fhir/StructureDefinition/data-absent-reason</a>",<br>
                            "valueCode": "unknown"<br>
                        }<br>
                    ]<br>
                },<br>
  "medicationReference": {<br>
    "reference": "Medication/1620516",<br>
    "display": "Erythromycin 250 MG Oral Tablet"<br>
  },<br>
  "subject": {<br>
    "reference": "Patient/1620472"<br>
  },<br>
  "encounter": {<br>
    "reference": "Encounter/1620506",<br>
    "display": "Follow up encounter"<br>
  },<br>
  "authoredOn": "2018-06-16",<br>
  "requester": {<br>
    "reference": "Practitioner/1620502",<br>
    "display": "Dr. Harold Hippocrates"<br>
  },<br>
  "reasonReference": [ {<br>
    "reference": "Condition/1620514",<br>
    "display": "Otitis Media"<br>
  } ],<br>
  "dosageInstruction": [ {<br>
    "text": "250 mg 4 times per day for 10 days",<br>
    "timing": {<br>
      "repeat": {<br>
        "boundsDuration": {<br>
          "value": 10,<br>
          "unit": "day",<br>
          "system": "<a href="http://unitsofmeasure.org">http://unitsofmeasure.org</a>",<br>
          "code": "d"<br>
        },<br>
        "frequency": 4,<br>
        "period": 1,<br>
        "periodUnit": "d"<br>
      }<br>
    },<br>
    "doseAndRate": [ {<br>
      "doseQuantity": {<br>
        "value": 250,<br>
        "unit": "mg",<br>
        "system": "<a href="http://unitsofmeasure.org">http://unitsofmeasure.org</a>",<br>
        "code": "mg"<br>
      }<br>
    } ]<br>
  } ],<br>
  "priorPrescription": {<br>
    "reference": "MedicationRequest/1620517",<br>
    "display": "Amoxicillin prescription"<br>
  }<br>
}</p>



<a name="214836849"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179218-python/topic/JSON%20representation%20of%20primitive%20elements%20%28validation%29/near/214836849" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Md Nazrul Islam <a href="https://fhir.github.io/chat-archive/stream/179218-python/topic/JSON.20representation.20of.20primitive.20elements.20(validation).html#214836849">(Oct 28 2020 at 13:39)</a>:</h4>
<p><span class="user-mention" data-user-id="269724">@Stephen Whitney</span>  thanks a lot, I tested your json, there is nothing wrong with <code>_intent</code> value instead <code>intent</code> field value is missing as this field value is required.</p>



<a name="214838928"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179218-python/topic/JSON%20representation%20of%20primitive%20elements%20%28validation%29/near/214838928" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jason Teeple <a href="https://fhir.github.io/chat-archive/stream/179218-python/topic/JSON.20representation.20of.20primitive.20elements.20(validation).html#214838928">(Oct 28 2020 at 13:55)</a>:</h4>
<p><span class="user-mention" data-user-id="197422">@Md Nazrul Islam</span> Does there need to be a preprocess to strip the _ from the incoming request or is there a more graceful way to handle? Responses with Data absence reason extension for primitive types coming from the HAPI framework need an _ to support the extension.</p>



<a name="214839115"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179218-python/topic/JSON%20representation%20of%20primitive%20elements%20%28validation%29/near/214839115" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Stephen Whitney <a href="https://fhir.github.io/chat-archive/stream/179218-python/topic/JSON.20representation.20of.20primitive.20elements.20(validation).html#214839115">(Oct 28 2020 at 13:56)</a>:</h4>
<p>I see thanks <span class="user-mention" data-user-id="197422">@Md Nazrul Islam</span>. It passes validation using open hapi fhir server as written at <a href="http://hapi.fhir.org/baseR4/Bundle/$validate">http://hapi.fhir.org/baseR4/Bundle/$validate</a></p>



<a name="214839830"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179218-python/topic/JSON%20representation%20of%20primitive%20elements%20%28validation%29/near/214839830" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Md Nazrul Islam <a href="https://fhir.github.io/chat-archive/stream/179218-python/topic/JSON.20representation.20of.20primitive.20elements.20(validation).html#214839830">(Oct 28 2020 at 14:00)</a>:</h4>
<p><span class="user-mention silent" data-user-id="197108">Jason Teeple</span> <a href="#narrow/stream/179218-python/topic/JSON.20representation.20of.20primitive.20elements.20(validation)/near/214838928">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="197422">Md Nazrul Islam</span> Does there need to be a preprocess to strip the _ from the incoming request or is there a more graceful way to handle? Responses with Data absence reason extension for primitive types coming from the HAPI framework need an _ to support the extension.</p>
</blockquote>
<p>No,  it's fine with _, the problem here <code>intent</code> field is required</p>



<a name="214840441"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179218-python/topic/JSON%20representation%20of%20primitive%20elements%20%28validation%29/near/214840441" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Md Nazrul Islam <a href="https://fhir.github.io/chat-archive/stream/179218-python/topic/JSON.20representation.20of.20primitive.20elements.20(validation).html#214840441">(Oct 28 2020 at 14:04)</a>:</h4>
<p><span class="user-mention silent" data-user-id="269724">Stephen Whitney</span> <a href="#narrow/stream/179218-python/topic/JSON.20representation.20of.20primitive.20elements.20(validation)/near/214839115">said</a>:</p>
<blockquote>
<p>I see thanks <span class="user-mention silent" data-user-id="197422">Md Nazrul Islam</span>. It passes validation using open hapi fhir server as written at <a href="http://hapi.fhir.org/baseR4/Bundle/$validate">http://hapi.fhir.org/baseR4/Bundle/$validate</a></p>
</blockquote>
<p>Ok, that is something a little bit long discussion need to be done. Maybe there should be when <code>_intent</code> value is provided then the <code>intent</code> field should be optional.</p>



<a name="214850390"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179218-python/topic/JSON%20representation%20of%20primitive%20elements%20%28validation%29/near/214850390" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Damian Smith <a href="https://fhir.github.io/chat-archive/stream/179218-python/topic/JSON.20representation.20of.20primitive.20elements.20(validation).html#214850390">(Oct 28 2020 at 15:14)</a>:</h4>
<p>I think intent being optional would be key - when our ETL process doesn't have a value, having to choose one is misleading. A third party app would have to know to look for an underscore value of an element to see if that element is to be trusted or not</p>



<a name="214894657"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179218-python/topic/JSON%20representation%20of%20primitive%20elements%20%28validation%29/near/214894657" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Md Nazrul Islam <a href="https://fhir.github.io/chat-archive/stream/179218-python/topic/JSON.20representation.20of.20primitive.20elements.20(validation).html#214894657">(Oct 28 2020 at 20:40)</a>:</h4>
<p>Added issue <a href="https://github.com/nazrulworld/fhir.resources/issues/40">https://github.com/nazrulworld/fhir.resources/issues/40</a> here</p>



<a name="214974580"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179218-python/topic/JSON%20representation%20of%20primitive%20elements%20%28validation%29/near/214974580" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jason Teeple <a href="https://fhir.github.io/chat-archive/stream/179218-python/topic/JSON.20representation.20of.20primitive.20elements.20(validation).html#214974580">(Oct 29 2020 at 14:34)</a>:</h4>
<p><span class="user-mention" data-user-id="191315">@Josh Mandel</span> Would you have any insights on how SOF would handle the above situation?</p>



<a name="214981981"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179218-python/topic/JSON%20representation%20of%20primitive%20elements%20%28validation%29/near/214981981" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179218-python/topic/JSON.20representation.20of.20primitive.20elements.20(validation).html#214981981">(Oct 29 2020 at 15:23)</a>:</h4>
<p>Certainly SMART doesn't impose any limits on how FHIR JSON works -- it sounds like there's some question about how FHIR treats extensions that are present <em>in place of</em> required elements.  <a href="https://www.hl7.org/fhir/extensibility.html#Special-Case">https://www.hl7.org/fhir/extensibility.html#Special-Case</a> provides the official guidance to corroborate <span class="user-mention" data-user-id="197422">@Md Nazrul Islam</span>'s note above that "Maybe... when _intent value is provided then the intent field should be optional." -- indeed, required elements can be missing if extensions are provided.</p>



<a name="214982665"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179218-python/topic/JSON%20representation%20of%20primitive%20elements%20%28validation%29/near/214982665" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Md Nazrul Islam <a href="https://fhir.github.io/chat-archive/stream/179218-python/topic/JSON.20representation.20of.20primitive.20elements.20(validation).html#214982665">(Oct 29 2020 at 15:27)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191315">Josh Mandel</span> <a href="#narrow/stream/179218-python/topic/JSON.20representation.20of.20primitive.20elements.20(validation)/near/214981981">said</a>:</p>
<blockquote>
<p>Certainly SMART doesn't impose any limits on how FHIR JSON works -- it sounds like there's some question about how FHIR treats extensions that are present <em>in place of</em> required elements.  <a href="https://www.hl7.org/fhir/extensibility.html#Special-Case">https://www.hl7.org/fhir/extensibility.html#Special-Case</a> provides the official guidance to corroborate <span class="user-mention silent" data-user-id="197422">Md Nazrul Islam</span>'s note above that "Maybe... when _intent value is provided then the intent field should be optional." -- indeed, required elements can be missing if extensions are provided.</p>
</blockquote>
<p>Thanks a lot for the clarification</p>



<a name="215004723"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179218-python/topic/JSON%20representation%20of%20primitive%20elements%20%28validation%29/near/215004723" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pascal Pfiffner <a href="https://fhir.github.io/chat-archive/stream/179218-python/topic/JSON.20representation.20of.20primitive.20elements.20(validation).html#215004723">(Oct 29 2020 at 17:56)</a>:</h4>
<p>This is part of this issue: <a href="https://github.com/smart-on-fhir/client-py/issues/30">https://github.com/smart-on-fhir/client-py/issues/30</a></p>



<a name="215125577"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179218-python/topic/JSON%20representation%20of%20primitive%20elements%20%28validation%29/near/215125577" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Julian Sass <a href="https://fhir.github.io/chat-archive/stream/179218-python/topic/JSON.20representation.20of.20primitive.20elements.20(validation).html#215125577">(Oct 30 2020 at 17:25)</a>:</h4>
<p><span class="user-mention silent" data-user-id="197108">Jason Teeple</span> <a href="#narrow/stream/179218-python/topic/JSON.20representation.20of.20primitive.20elements.20(validation)/near/214974580">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="191315">Josh Mandel</span> Would you have any insights on how SOF would handle the above situation?</p>
</blockquote>
<p>I encountered the same problem. At the moment, with SOF you can't have extensions like dataAbsentReason on primitive types. The only workaround I found was handling extensions on primitives with Python's built-in json module outside of fhirclient.</p>



<a name="215129679"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179218-python/topic/JSON%20representation%20of%20primitive%20elements%20%28validation%29/near/215129679" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179218-python/topic/JSON.20representation.20of.20primitive.20elements.20(validation).html#215129679">(Oct 30 2020 at 17:59)</a>:</h4>
<p>I see now you're referring not to SMART on FHIR in general, but to the python bindings at <a href="http://github.com/smart-on-fhir/client-py">github.com/smart-on-fhir/client-py</a>. <span class="user-mention" data-user-id="191660">@Harold Solbrig</span> I wonder if you have eyes here?</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
