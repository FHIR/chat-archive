---
layout: page
title: "FHIR Chat  · posting transaction bundles · python"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179218-python/index.html">python</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179218-python/topic/posting.20transaction.20bundles.html">posting transaction bundles</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153977334"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179218-python/topic/posting%20transaction%20bundles/near/153977334" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a>  Bob Milius <a href="https://fhir.github.io/chat-archive/stream/179218-python/topic/posting.20transaction.20bundles.html#153977334">(Jul 23 2018 at 16:30)</a>:</h4>
<p>How do I post a transaction bundle in python?</p>
<div class="codehilite"><pre><span></span>settings = {
    &#39;app_id&#39;: &#39;my_web_app&#39;,
    &#39;api_base&#39;: &#39;http://fhirtest.b12x.org/r3&#39;
}
smart = client.FHIRClient(settings=settings)
response = bundle.create(smart.server)
</pre></div>


<p>will POST to the bundle endpoint, but not to the base url where it needs to go for transactions to be processed.</p>



<a name="153977335"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179218-python/topic/posting%20transaction%20bundles/near/153977335" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a>  Bob Milius <a href="https://fhir.github.io/chat-archive/stream/179218-python/topic/posting.20transaction.20bundles.html#153977335">(Jul 23 2018 at 16:32)</a>:</h4>
<p><code>requests.exceptions.HTTPError: 422 Client Error: Unprocessable Entity for url: http://fhirtest.b12x.org/r3/Bundle</code></p>



<a name="153977343"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179218-python/topic/posting%20transaction%20bundles/near/153977343" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pascal Pfiffner <a href="https://fhir.github.io/chat-archive/stream/179218-python/topic/posting.20transaction.20bundles.html#153977343">(Jul 23 2018 at 17:27)</a>:</h4>
<p>Indeed, <code>create</code> always posts to base_url + resource_type, you'll need to do that manually. Look at <code>def create(...)</code> in <code>fhirabstractresource.py</code> (9 lines of code, around line 114) and create a method that does the same, expect using <code>None</code> instead of <code>self.relativeBase()</code> in the <code>post_json</code> call.</p>



<a name="153977344"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179218-python/topic/posting%20transaction%20bundles/near/153977344" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pascal Pfiffner <a href="https://fhir.github.io/chat-archive/stream/179218-python/topic/posting.20transaction.20bundles.html#153977344">(Jul 23 2018 at 17:27)</a>:</h4>
<p>*except</p>



<a name="153977351"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179218-python/topic/posting%20transaction%20bundles/near/153977351" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a>  Bob Milius <a href="https://fhir.github.io/chat-archive/stream/179218-python/topic/posting.20transaction.20bundles.html#153977351">(Jul 23 2018 at 17:49)</a>:</h4>
<p>Thanks! <span class="user-mention" data-user-id="191339">@Pascal Pfiffner</span></p>



<a name="153977358"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179218-python/topic/posting%20transaction%20bundles/near/153977358" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mike Halagan <a href="https://fhir.github.io/chat-archive/stream/179218-python/topic/posting.20transaction.20bundles.html#153977358">(Jul 23 2018 at 18:29)</a>:</h4>
<p>If we created a new method, say "create_bundle", then it would be accessible to all resource models even though it should only be used with a bundle resource. Does checking to see if it's a Bundle transaction make sense instead of creating a new method? Adding the following lines of code to the <code>create</code> method works.</p>
<div class="codehilite"><pre><span></span>    base_url = self.relativeBase()
    if(self.resource_type == &quot;Bundle&quot;
       and self.type == &quot;transaction&quot;):
        base_url = None
</pre></div>



<a name="153977365"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179218-python/topic/posting%20transaction%20bundles/near/153977365" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a>  Bob Milius <a href="https://fhir.github.io/chat-archive/stream/179218-python/topic/posting.20transaction.20bundles.html#153977365">(Jul 23 2018 at 18:56)</a>:</h4>
<p>should also test for self.type == "batch" which should also be processed</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
