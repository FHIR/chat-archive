---
layout: page
title: "FHIR Chat  · Validation · smart/health-cards"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/index.html">smart/health-cards</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/Validation.html">Validation</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="253358201"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/Validation/near/253358201" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/Validation.html#253358201">(Sep 15 2021 at 03:46)</a>:</h4>
<p>Presently, you can use <a href="https://demo-portals.smarthealth.cards/VerifierPortal.html">https://demo-portals.smarthealth.cards/VerifierPortal.html</a> or <a href="https://github.com/smart-on-fhir/health-cards-dev-tools">https://github.com/smart-on-fhir/health-cards-dev-tools</a> to validate your smart health cards. These validators do a super good job of validating all the card stuff - crypto signatures etc. but they don't do a great job of validating inside the bundle. </p>
<p>So from the next release, the validator will be able to validate Smart Health Cards directly. You can give it a jwt (jws) or a qr code as text (shc:/...). It will open up the jwt, validate the payload and the bundle against the recommended profiles. (I got a long list of errors for mine...)</p>



<a name="253358228"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/Validation/near/253358228" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/Validation.html#253358228">(Sep 15 2021 at 03:46)</a>:</h4>
<p>it does not validate the signature, and I'm not planning to work on that part, since we already have excellent tools for that</p>



<a name="253401504"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/Validation/near/253401504" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/Validation.html#253401504">(Sep 15 2021 at 12:01)</a>:</h4>
<p>I updated the  documentation too - <a href="https://confluence.hl7.org/display/FHIR/Using+the+FHIR+Validator#UsingtheFHIRValidator-Choosingwhattovalidate">https://confluence.hl7.org/display/FHIR/Using+the+FHIR+Validator#UsingtheFHIRValidator-Choosingwhattovalidate</a></p>



<a name="262459187"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/Validation/near/262459187" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Poonam Kariya <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/Validation.html#262459187">(Nov 23 2021 at 14:02)</a>:</h4>
<p>We are trying to verify Canada covid pass of our employee and we are facing following error:</p>
<div class="codehilite"><pre><span></span><code>&quot;errors&quot;: [
    &quot;JWS verification failed: can&#39;t find key with &#39;kid&#39; = qFdl0tDZK9JAWP6g9_cAv57c3KWxMKwvxCrRVSzcxvM in issuer set&quot;,
    &quot;JWS.payload.vc shouldn&#39;t have a @context property&quot;,
    &quot;JWS.payload.vc.type : &#39;VerifiableCredential&#39; is not required and may be omitted to conserve space&quot;,
    &quot;Schema: /type error : must be equal to one of the allowed values&quot;,
    &quot;Schema:  property must must match exactly one schema in oneOf&quot;,
    &quot;Schema: /type error : must be equal to one of the allowed values&quot;,
    &quot;Schema:  property must must match exactly one schema in oneOf&quot;
</code></pre></div>



<a name="262463700"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/Validation/near/262463700" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/Validation.html#262463700">(Nov 23 2021 at 14:37)</a>:</h4>
<p>What's the source of the data you're using, and what's the process by which you're receiving these errors?</p>



<a name="262465100"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/Validation/near/262465100" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vitor Pamplona <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/Validation.html#262465100">(Nov 23 2021 at 14:46)</a>:</h4>
<p>Quebec rotates the KID on their servers frequently. Unless you have saved KIDs for the previous months, Quebec's records will almost always fail (the QR is generally older than the KID on their server)</p>



<a name="262465162"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/Validation/near/262465162" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vitor Pamplona <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/Validation.html#262465162">(Nov 23 2021 at 14:47)</a>:</h4>
<p><span class="user-mention" data-user-id="433194">@Poonam Kariya</span> here's the key you are looking for: </p>
<div class="codehilite"><pre><span></span><code>    {
        &quot;kty&quot;: &quot;EC&quot;,
        &quot;kid&quot;: &quot;qFdl0tDZK9JAWP6g9_cAv57c3KWxMKwvxCrRVSzcxvM&quot;,
        &quot;use&quot;: &quot;sig&quot;,
        &quot;alg&quot;: &quot;ES256&quot;,
        &quot;crv&quot;: &quot;P-256&quot;,
        &quot;x&quot;: &quot;XSxuwW_VI_s6lAw6LAlL8N7REGzQd_zXeIVDHP_j_Do&quot;,
        &quot;y&quot;: &quot;88-aI4WAEl4YmUpew40a9vq_w5OcFvsuaKMxJRLRLL0&quot;
      }
</code></pre></div>



<a name="262465440"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/Validation/near/262465440" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/Validation.html#262465440">(Nov 23 2021 at 14:49)</a>:</h4>
<p>It sounds like this key publication behavior is not compliant with the SHC specification, so it's worth asking Quebec about whether these failures are intended.</p>



<a name="262467906"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/Validation/near/262467906" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vitor Pamplona <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/Validation.html#262467906">(Nov 23 2021 at 15:08)</a>:</h4>
<p>I am not sure if it is intentional. Quebec's own verifier app ignores the KID and verifies each QR against all available keys in the server. Ignoring the KID field is a very common feature among JOSE libraries. They might be using KID rotations to represent some internal status without noticing that it breaks any app checking and only verifying against the right KID.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
