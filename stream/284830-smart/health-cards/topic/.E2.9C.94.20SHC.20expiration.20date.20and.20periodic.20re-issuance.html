---
layout: page
title: "FHIR Chat  · ✔ SHC expiration date and periodic re-issuance · smart/health-cards"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/index.html">smart/health-cards</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/.E2.9C.94.20SHC.20expiration.20date.20and.20periodic.20re-issuance.html">✔ SHC expiration date and periodic re-issuance</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="252379439"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/%E2%9C%94%20SHC%20expiration%20date%20and%20periodic%20re-issuance/near/252379439" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Deftdawg <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/.E2.9C.94.20SHC.20expiration.20date.20and.20periodic.20re-issuance.html#252379439">(Sep 07 2021 at 22:17)</a>:</h4>
<p>My stakeholder would like to force the credential to expire 6 months after it is issued.  <br>
I believe their thinking is that they want to insure people are using the most up-to-date credential (that includes boosters, etc), rather than say a 2 year-old document.</p>
<p>I noticed that fhir-schema.json only has expirationDate for immunizations and medications not for the broader shc document. </p>
<p>Does anyone have thoughts on how best to manage this type of scenario?  Is the best case for managing this just issue a new public key each month and nuke them when they get to 7 months old?</p>



<a name="252380647"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/%E2%9C%94%20SHC%20expiration%20date%20and%20periodic%20re-issuance/near/252380647" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/.E2.9C.94.20SHC.20expiration.20date.20and.20periodic.20re-issuance.html#252380647">(Sep 07 2021 at 22:31)</a>:</h4>
<p>Immunization.expirationDate is the vaccine expirationDate, not the record. But expired credentials is a rule about the use of the credential, not a property of the credential itself</p>



<a name="252398249"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/%E2%9C%94%20SHC%20expiration%20date%20and%20periodic%20re-issuance/near/252398249" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Deftdawg <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/.E2.9C.94.20SHC.20expiration.20date.20and.20periodic.20re-issuance.html#252398249">(Sep 08 2021 at 02:42)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191316">Grahame Grieve</span> <a href="#narrow/stream/284830-smart.2Fhealth-cards/topic/SHC.20expiration.20date.20and.20periodic.20re-issuance/near/252380647">said</a>:</p>
<blockquote>
<p>Immunization.expirationDate is the vaccine expirationDate, not the record. But expired credentials is a rule about the use of the credential, not a property of the credential itself</p>
</blockquote>
<p>Ok thanks, I'll let them know it's up to the verifier to decide.</p>



<a name="252398254"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/%E2%9C%94%20SHC%20expiration%20date%20and%20periodic%20re-issuance/near/252398254" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Notification Bot <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/.E2.9C.94.20SHC.20expiration.20date.20and.20periodic.20re-issuance.html#252398254">(Sep 08 2021 at 02:42)</a>:</h4>
<p><span class="user-mention silent" data-user-id="437951">Deftdawg</span> has marked this topic as resolved.</p>



<a name="252478819"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/%E2%9C%94%20SHC%20expiration%20date%20and%20periodic%20re-issuance/near/252478819" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Christian Paquin <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/.E2.9C.94.20SHC.20expiration.20date.20and.20periodic.20re-issuance.html#252478819">(Sep 08 2021 at 15:15)</a>:</h4>
<p><span class="user-mention silent" data-user-id="437951">Deftdawg</span> <a href="#narrow/stream/284830-smart.2Fhealth-cards/topic/.E2.9C.94.20SHC.20expiration.20date.20and.20periodic.20re-issuance/near/252379439">said</a>:</p>
<blockquote>
<p>Does anyone have thoughts on how best to manage this type of scenario?  Is the best case for managing this just issue a new public key each month and nuke them when they get to 7 months old?</p>
</blockquote>
<p>The SHC spec does not provide a mechanism to expire cards; the cards encode medical facts that do not expire. A validator might enforce a specific policy of what is deemed acceptable, using the various dates in the SHC (its issuance <code>nbf</code> timestamp, the immunization <code>occurrenceDateTime</code> fields). Rotating keys is useful for security purposes, not to use the same private key for too long (one year recommended), but rotating them to expire issued SHCs is problematic: if the corresponding public key is removed from the issuer key set, then valid "old" SHCs become undistinguishable from forged ones.</p>



<a name="252495577"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/%E2%9C%94%20SHC%20expiration%20date%20and%20periodic%20re-issuance/near/252495577" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Deftdawg <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/.E2.9C.94.20SHC.20expiration.20date.20and.20periodic.20re-issuance.html#252495577">(Sep 08 2021 at 16:57)</a>:</h4>
<p>I assume the reason for rotating keys is precisely so a batch of documents issued with that key can be invalidated should a bad actor have gained access to the system during the time that particular private key was in use.   </p>
<p>It could also be used as I mentioned to invalidate documents older than a certain time period, however that's a potential usability nightmare for the bearer  of the credential and I've relayed that back to the stakeholder who asked for it and we agreed to drop that from the JWT payload.</p>
<p>I believe the requirement originated from the paper records that predated the use of the QR codes within the vaccine record documents, as those were easy to forge.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
