---
layout: page
title: "FHIR Chat  · OpenSSL · smart/health-cards"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/index.html">smart/health-cards</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/OpenSSL.html">OpenSSL</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="252943450"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/OpenSSL/near/252943450" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/OpenSSL.html#252943450">(Sep 11 2021 at 23:41)</a>:</h4>
<p>Has anyone tried to implement the JWS part of the spec using openSSL? I'm using the EVP_DigestVerifyInit | EVP_DigestUpdate | EVP_DigestVerifyFinal methods, and openSSL generates ok, and verifies it's own signatures, but the signatures are different to other ones, and it doesn't verify other signatures. </p>
<p>My take is that openSSL EVP_DigestVerifyFinal doesn't conform to this rule</p>
<blockquote>
<p>"The JWS Signature is the value R || S." </p>
</blockquote>
<p>from <a href="https://datatracker.ietf.org/doc/html/rfc7515#appendix-A.3.1">https://datatracker.ietf.org/doc/html/rfc7515#appendix-A.3.1</a> but all the openSSL implementations I can find and understand use EVP_DigestVerifyFinal and the openSSL mailing list said I was doing something wrong - well, I can't figure out what it could be. the OpenSSL signatures include a nonce and are not reproducible, so I don't see how they can conform to the rule I quoted. And I haven't found a non-openSSL based implementation I can use in an open source win64 application.</p>
<p>Can anyone comment?</p>



<a name="252944979"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/OpenSSL/near/252944979" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/OpenSSL.html#252944979">(Sep 12 2021 at 00:12)</a>:</h4>
<p>I'm assuming you're familiar with the aspects of representation discussed in <a href="https://stackoverflow.com/questions/59904522/asn1-encoding-routines-errors-when-verifying-ecdsa-signature-type-with-openssl">https://stackoverflow.com/questions/59904522/asn1-encoding-routines-errors-when-verifying-ecdsa-signature-type-with-openssl</a> ?</p>



<a name="252945226"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/OpenSSL/near/252945226" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/OpenSSL.html#252945226">(Sep 12 2021 at 00:17)</a>:</h4>
<p>well, I wasn't. I found that by accident searching for the openSSL error message a couple of minutes before you posted it. How did you find it so easy?</p>



<a name="252945351"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/OpenSSL/near/252945351" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/OpenSSL.html#252945351">(Sep 12 2021 at 00:19)</a>:</h4>
<ul>
<li><a href="https://duckduckgo.com/?q=es256+signature+with+openssl">https://duckduckgo.com/?q=es256+signature+with+openssl</a></li>
<li><a href="https://gist.github.com/timmc/d2814d7da19521dda1883dd3cc046217">https://gist.github.com/timmc/d2814d7da19521dda1883dd3cc046217</a></li>
<li>SO post</li>
</ul>



<a name="252945395"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/OpenSSL/near/252945395" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/OpenSSL.html#252945395">(Sep 12 2021 at 00:20)</a>:</h4>
<p>(I feel like getting search terms right requires a good dose of luck.)</p>



<a name="252945400"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/OpenSSL/near/252945400" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/OpenSSL.html#252945400">(Sep 12 2021 at 00:20)</a>:</h4>
<p>thx. seems obvious but I didn't find it :-(</p>



<a name="252945418"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/OpenSSL/near/252945418" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/OpenSSL.html#252945418">(Sep 12 2021 at 00:20)</a>:</h4>
<p>I'm not clear on the nonce related issues you described, but getting the binary representation of the signature right seems like a good start.</p>



<a name="252945638"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/OpenSSL/near/252945638" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/OpenSSL.html#252945638">(Sep 12 2021 at 00:25)</a>:</h4>
<p>yes that does sort things out.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
