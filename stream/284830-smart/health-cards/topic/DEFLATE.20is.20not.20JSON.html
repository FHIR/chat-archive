---
layout: page
title: "FHIR Chat  · DEFLATE is not JSON · smart/health-cards"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/index.html">smart/health-cards</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/DEFLATE.20is.20not.20JSON.html">DEFLATE is not JSON</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="238239382"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/DEFLATE%20is%20not%20JSON/near/238239382" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Angus Millar <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/DEFLATE.20is.20not.20JSON.html#238239382">(May 11 2021 at 01:53)</a>:</h4>
<p>Hi Guys, I've been trying to generate a SMART Health Card JWT using .net and have struggled with the requirement that the payload is compressed with DEFLATE. I'm no expert at JWT but my reading leads me to believe that a JWT payload must be JSON and not compressed JSON. Of course, I do understand why compression is desired but do the specifications for JWT allow this? If I read RCF 7519 section 7.2 Validating a JWT, it says in point 10 "Verify that the resulting octet sequence is a UTF-8-encoded representation of a completely valid JSON object conforming to RFC 7159 [RFC7159]; let the JWT Claims Set be this JSON object" I'm also lead to the very same reference if I paste one of the examples from the   <a href="https://smarthealth.cards/">https://smarthealth.cards/</a> into the site <a href="https://jwt.io/">https://jwt.io/</a>. Can someone help me understand what I am missing here? Is it possible that I struggle with the standard .net classes for JWT generation due to this point?</p>



<a name="238311416"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/DEFLATE%20is%20not%20JSON/near/238311416" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Stephen MacVicar <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/DEFLATE.20is.20not.20JSON.html#238311416">(May 11 2021 at 13:56)</a>:</h4>
<p>I went through the same thing. A SMART Health Card is a JWS, not a JWT. A JWT has a JSON payload, but a JWS can have an arbitrary payload. Since it's not a JWT, <a href="http://jwt.io">jwt.io</a> isn't very helpful, and you'll need to be sure that you are using a JWS library rather than a JWT library.</p>



<a name="238356478"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/DEFLATE%20is%20not%20JSON/near/238356478" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/DEFLATE.20is.20not.20JSON.html#238356478">(May 11 2021 at 18:04)</a>:</h4>
<p>Indeed -- <a href="https://github.com/smart-on-fhir/health-cards/issues/128#issuecomment-826854186">https://github.com/smart-on-fhir/health-cards/issues/128#issuecomment-826854186</a> has some additional details and background on this point.</p>



<a name="238356597"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/DEFLATE%20is%20not%20JSON/near/238356597" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/DEFLATE.20is.20not.20JSON.html#238356597">(May 11 2021 at 18:04)</a>:</h4>
<p>Let us know if you're having trouble finding libraries that work with JWS, once you get to this stage; we'd like to have good library references/recommendations for common languages.</p>



<a name="238390707"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/DEFLATE%20is%20not%20JSON/near/238390707" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Angus Millar <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/DEFLATE.20is.20not.20JSON.html#238390707">(May 11 2021 at 22:23)</a>:</h4>
<p>Ok, thankyou <span class="user-mention" data-user-id="225612">@Stephen MacVicar</span>  and <span class="user-mention" data-user-id="191315">@Josh Mandel</span> , I will keep digging</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
