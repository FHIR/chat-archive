---
layout: page
title: "FHIR Chat  · $health-cards-issue operation giving 404 from Cerner sandbox · smart/health-cards"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/index.html">smart/health-cards</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/.24health-cards-issue.20operation.20giving.20404.20from.20Cerner.20sandbox.html">$health-cards-issue operation giving 404 from Cerner sandbox</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="234236078"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/%24health-cards-issue%20operation%20giving%20404%20from%20Cerner%20sandbox/near/234236078" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santosh Jami <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/.24health-cards-issue.20operation.20giving.20404.20from.20Cerner.20sandbox.html#234236078">(Apr 12 2021 at 21:46)</a>:</h4>
<p>As mentioned in the scenario in the Confluence page: <a href="https://confluence.hl7.org/display/CAR/Track+Page+for+the+SMART+Health+Card">https://confluence.hl7.org/display/CAR/Track+Page+for+the+SMART+Health+Card</a>, I tried the following against this reference server <a href="https://fhir-myrecord.stagingcerner.com/beta/ec2458f2-1e24-41c8-b71b-0e701af7583d">https://fhir-myrecord.stagingcerner.com/beta/ec2458f2-1e24-41c8-b71b-0e701af7583d</a>:</p>
<ol>
<li>Registered a holder application with sand box server</li>
<li>Got an access token from the authorization end point: <a href="https://authorization.cerner.com/tenants/ec2458f2-1e24-41c8-b71b-0e701af7583d/protocols/oauth2/profiles/smart-v1/token">https://authorization.cerner.com/tenants/ec2458f2-1e24-41c8-b71b-0e701af7583d/protocols/oauth2/profiles/smart-v1/token</a></li>
<li>Got the patient id from Patient info : 12724067 (GET <a href="https://fhir-myrecord.stagingcerner.com/beta/ec2458f2-1e24-41c8-b71b-0e701af7583d/Patient?given=JOE&amp;family=SMART&amp;birthdate=1976-04-29&amp;gender=male">https://fhir-myrecord.stagingcerner.com/beta/ec2458f2-1e24-41c8-b71b-0e701af7583d/Patient?given=JOE&amp;family=SMART&amp;birthdate=1976-04-29&amp;gender=male</a>)</li>
<li>Now on trying the $health-cards-issue operation with the access token, it is giving 404 response<br>
Here are the API request / response, please review:</li>
</ol>
<div class="codehilite"><pre><span></span><code>POST https://fhir-myrecord.stagingcerner.com/beta/ec2458f2-1e24-41c8-b71b-0e701af7583d/Patient/12724067/$health-cards-issue
Content-Type: application/fhir+json
Accept: application/fhir+json
Authorization: Bearer eyJraWQiOiIyMDIxLTA0LTEyVDAzOjIxOjU5LjgyNS5lYyIsInR5cCI6IkpXVCIsImFsZyI6IkVTMjU2In0.eyJpc3MiOiJodHRwczpcL1wvYXV0aG9yaXphdGlvbi5jZXJuZXIuY29tXC8iLCJleHAiOjE2MTgyNjQwNTEsImlhdCI6MTYxODI2MzQ1MSwianRpIjoiNGZkOTdjYTItZTgxNS00MTc0LWE3OWEtNTIzMDExOGNkMjg1IiwidXJuOmNlcm5lcjphdXRob3JpemF0aW9uOmNsYWltczp2ZXJzaW9uOjEiOnsidmVyIjoiMS4wIiwicHJvZmlsZXMiOnsic21hcnQtdjEiOnsiYXpzIjoic3lzdGVtXC9BbGxlcmd5SW50b2xlcmFuY2UucmVhZCBzeXN0ZW1cL0NvbmRpdGlvbi5yZWFkIHN5c3RlbVwvQ29uc2VudC5yZWFkIHN5c3RlbVwvQ292ZXJhZ2UucmVhZCBzeXN0ZW1cL0RvY3VtZW50UmVmZXJlbmNlLnJlYWQgc3lzdGVtXC9FbmNvdW50ZXIucmVhZCBzeXN0ZW1cL0dvYWwucmVhZCBzeXN0ZW1cL0ltbXVuaXphdGlvbi5yZWFkIHN5c3RlbVwvTG9jYXRpb24ucmVhZCBzeXN0ZW1cL01lZGljYXRpb25SZXF1ZXN0LnJlYWQgc3lzdGVtXC9OdXRyaXRpb25PcmRlci5yZWFkIHN5c3RlbVwvT2JzZXJ2YXRpb24ucmVhZCBzeXN0ZW1cL09yZ2FuaXphdGlvbi5yZWFkIHN5c3RlbVwvUGF0aWVudC5yZWFkIHN5c3RlbVwvUHJhY3RpdGlvbmVyLnJlYWQgc3lzdGVtXC9Qcm9jZWR1cmUucmVhZCBzeXN0ZW1cL0FsbGVyZ3lJbnRvbGVyYW5jZS53cml0ZSBzeXN0ZW1cL0Jhc2ljLndyaXRlIHN5c3RlbVwvQ29uZGl0aW9uLndyaXRlIHN5c3RlbVwvQ292ZXJhZ2Uud3JpdGUgc3lzdGVtXC9Eb2N1bWVudFJlZmVyZW5jZS53cml0ZSBzeXN0ZW1cL0VuY291bnRlci53cml0ZSBzeXN0ZW1cL0ltbXVuaXphdGlvbi53cml0ZSBzeXN0ZW1cL01lZGljYXRpb25SZXF1ZXN0LndyaXRlIHN5c3RlbVwvT2JzZXJ2YXRpb24ud3JpdGUgc3lzdGVtXC9Pcmdhbml6YXRpb24ud3JpdGUgc3lzdGVtXC9QYXRpZW50LndyaXRlIHN5c3RlbVwvUHJhY3RpdGlvbmVyLndyaXRlIHN5c3RlbVwvUHJvY2VkdXJlLndyaXRlIHN5c3RlbVwvRmluYW5jaWFsVHJhbnNhY3Rpb24ud3JpdGUifX0sImNsaWVudCI6eyJuYW1lIjoiU2FmZUhlYWx0aCIsImlkIjoiYjE5YmJlYTItNmQ3Yi00YjQ4LWJlOTItMjM0MjE4YjhhMGU5In0sInRlbmFudCI6ImVjMjQ1OGYyLTFlMjQtNDFjOC1iNzFiLTBlNzAxYWY3NTgzZCJ9fQ.Kzp_TtDEiqLresNjnUUz6Dw6lPYA-XdHcTE9cKTazKFn0WU3heb1krvimFe6etE-UrCX0DijtnrhX173OZ_A_Q
User-Agent: PostmanRuntime/7.26.10
Cache-Control: no-cache
Postman-Token: 97a3c6ad-ef66-4f68-ac95-7a6ddf15adc9
Host: fhir-myrecord.stagingcerner.com
Accept-Encoding: gzip, deflate, br
Connection: keep-alive
Content-Length: 188
{
&quot;resourceType&quot;: &quot;Parameters&quot;,
&quot;parameter&quot;: [
{
&quot;name&quot;: &quot;credentialType&quot;,
&quot;valueUri&quot;: &quot;https://smarthealth.cards#covid19&quot;
}
]
}


HTTP/1.1 404 Not Found
Content-Type: application/fhir+json; charset=utf-8
Content-Length: 120
Connection: keep-alive
Cache-Control: no-cache
Date: Mon, 12 Apr 2021 21:38:43 GMT
Server-Response-Time: 11.043107
Status: 404 Not Found
Vary: Origin
X-Request-Id: 091e2d6f-8348-4e13-9bb1-8f75789fd820
X-Runtime: 0.010245
X-Cache: Error from cloudfront
Via: 1.1 e840fad61f5e0035145abd6ba7445b2a.cloudfront.net (CloudFront)
X-Amz-Cf-Pop: BOM50-C1
X-Amz-Cf-Id: gD05hmKKl3uWZU-I-Wwd95DmmyssA3s-oqv3QSPz3_QR4ekU-fgeZw==
{&quot;resourceType&quot;:&quot;OperationOutcome&quot;,&quot;issue&quot;:[{&quot;severity&quot;:&quot;error&quot;,&quot;code&quot;:&quot;not-supported&quot;,&quot;details&quot;:{&quot;text&quot;:&quot;Not Found&quot;}}]}
</code></pre></div>
<p>Am I missing something here? What is the cause of the 404 error?<br>
cc: <span class="user-mention" data-user-id="353749">@Michael Turman</span> <span class="user-mention" data-user-id="191809">@Joe Rattazzi</span> <span class="user-mention" data-user-id="341228">@Suprakash Maity</span> <span class="user-mention" data-user-id="321627">@Cibi Siddharth</span></p>



<a name="234236654"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/%24health-cards-issue%20operation%20giving%20404%20from%20Cerner%20sandbox/near/234236654" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joe Rattazzi <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/.24health-cards-issue.20operation.20giving.20404.20from.20Cerner.20sandbox.html#234236654">(Apr 12 2021 at 21:52)</a>:</h4>
<p>Thanks for trying it out. Looks like we have some documentation to provide.</p>
<p>The Health Cards workflow doesn't support a System/B2B authorization, as it's meant to be a patient directly requesting their own data.</p>
<p>edit: I'm assuming you're making a system/B2B call, given your provided token is using <code>system/</code> scopes.</p>



<a name="234236702"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/%24health-cards-issue%20operation%20giving%20404%20from%20Cerner%20sandbox/near/234236702" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joe Rattazzi <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/.24health-cards-issue.20operation.20giving.20404.20from.20Cerner.20sandbox.html#234236702">(Apr 12 2021 at 21:53)</a>:</h4>
<p>If you try removing your authorization header, and call <code>fhir-open</code> instead of <code>fhir-myrecord</code>,  you should get a successful call</p>



<a name="234236764"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/%24health-cards-issue%20operation%20giving%20404%20from%20Cerner%20sandbox/near/234236764" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/.24health-cards-issue.20operation.20giving.20404.20from.20Cerner.20sandbox.html#234236764">(Apr 12 2021 at 21:54)</a>:</h4>
<p>(or if you want to try with authorization, presumably you can initiate a smart standalone launch with patient context.)</p>



<a name="234237058"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/%24health-cards-issue%20operation%20giving%20404%20from%20Cerner%20sandbox/near/234237058" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joe Rattazzi <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/.24health-cards-issue.20operation.20giving.20404.20from.20Cerner.20sandbox.html#234237058">(Apr 12 2021 at 21:56)</a>:</h4>
<p>Agreed with Josh. </p>
<p>If you do register a Patient app with Cerner's Code Portal (<a href="https://code.cerner.com/developer/smart-on-fhir/apps">https://code.cerner.com/developer/smart-on-fhir/apps</a>), you'll need to make sure you are using the following Scopes: <code>patient/Patient.read
patient/Immunization.read</code> <del>user/Location.read</del> </p>
<p>Edit: <code>user/Location.read</code> is no longer required</p>



<a name="234238971"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/%24health-cards-issue%20operation%20giving%20404%20from%20Cerner%20sandbox/near/234238971" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santosh Jami <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/.24health-cards-issue.20operation.20giving.20404.20from.20Cerner.20sandbox.html#234238971">(Apr 12 2021 at 22:16)</a>:</h4>
<p>Thanks <span class="user-mention" data-user-id="191315">@Josh Mandel</span> and <span class="user-mention" data-user-id="191809">@Joe Rattazzi</span> for your inputs.</p>
<p>To begin with, I tried the fhir-open, and I got the "verifiableCredential"<br>
Another follow up query, how do I decode the JWS valueString ?</p>



<a name="234241348"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/%24health-cards-issue%20operation%20giving%20404%20from%20Cerner%20sandbox/near/234241348" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Turman <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/.24health-cards-issue.20operation.20giving.20404.20from.20Cerner.20sandbox.html#234241348">(Apr 12 2021 at 22:42)</a>:</h4>
<p>There are open source libraries for decoding a JWT (<a href="https://jwt.io/">https://jwt.io/</a>). Keep in mind, the payload is also compressed using DEFLATE compression.</p>
<p>We have an open endpoint you can use to decode and decompress the VC as part of our test reference implementation (not intended for production use):</p>
<p>Additional Utility Endpoints</p>
<p>Decode/Decompress and verify JWS signature<br>
Uses the iss in the jws payload to retrieve the public jwks for the issuer to use while validating the signature.</p>
<p>Endpoint: POST <a href="https://fhir-open.stagingcerner.com/beta/admin/health-cards/decode">https://fhir-open.stagingcerner.com/beta/admin/health-cards/decode</a></p>
<p>Request Parameters:<br>
•   jws: The JWS token to decode<br>
•   verify_signature: Whether public jwks retrieval and signature verification should be performed</p>



<a name="234241690"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/%24health-cards-issue%20operation%20giving%20404%20from%20Cerner%20sandbox/near/234241690" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Turman <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/.24health-cards-issue.20operation.20giving.20404.20from.20Cerner.20sandbox.html#234241690">(Apr 12 2021 at 22:47)</a>:</h4>
<p>Obligatory reference to relevant section of the SHC spec: <a href="https://smarthealth.cards/#health-cards-are-encoded-as-compact-serialization-json-web-signatures-jws">https://smarthealth.cards/#health-cards-are-encoded-as-compact-serialization-json-web-signatures-jws</a></p>



<a name="234412863"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/%24health-cards-issue%20operation%20giving%20404%20from%20Cerner%20sandbox/near/234412863" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joe Rattazzi <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/.24health-cards-issue.20operation.20giving.20404.20from.20Cerner.20sandbox.html#234412863">(Apr 13 2021 at 22:39)</a>:</h4>
<p>As a follow-up here, we've got a guide for integrating with Cerner's  reference implementation: <a href="https://github.com/joeratt/connectathon_notes/blob/april_2021-health_cards/health_cards/Cerner%20SMART%20Health%20Cards%20-%20Proof%20of%20Concept%20-%20Integration%20Notes.md">https://github.com/joeratt/connectathon_notes/blob/april_2021-health_cards/health_cards/Cerner%20SMART%20Health%20Cards%20-%20Proof%20of%20Concept%20-%20Integration%20Notes.md</a></p>



<a name="234518553"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/%24health-cards-issue%20operation%20giving%20404%20from%20Cerner%20sandbox/near/234518553" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Abbie Watson <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/.24health-cards-issue.20operation.20giving.20404.20from.20Cerner.20sandbox.html#234518553">(Apr 14 2021 at 15:18)</a>:</h4>
<p>For the SmartOnFhir configuration using the <code>fhirclient</code> node client, does <a href="https://fhir-open.stagingcerner.com/beta/ec2458f2-1e24-41c8-b71b-0e701af7583d/">https://fhir-open.stagingcerner.com/beta/ec2458f2-1e24-41c8-b71b-0e701af7583d/</a> go in both <code>iss</code> and <code>fhirServiceUrl</code> parameters?</p>



<a name="234519944"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/%24health-cards-issue%20operation%20giving%20404%20from%20Cerner%20sandbox/near/234519944" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joe Rattazzi <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/.24health-cards-issue.20operation.20giving.20404.20from.20Cerner.20sandbox.html#234519944">(Apr 14 2021 at 15:25)</a>:</h4>
<p>yep</p>



<a name="234523690"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/%24health-cards-issue%20operation%20giving%20404%20from%20Cerner%20sandbox/near/234523690" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Denning <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/.24health-cards-issue.20operation.20giving.20404.20from.20Cerner.20sandbox.html#234523690">(Apr 14 2021 at 15:46)</a>:</h4>
<p>I was expecting the <a href="https://github.com/joeratt/connectathon_notes/blob/april_2021-health_cards/health_cards/Cerner%20SMART%20Health%20Cards%20-%20Proof%20of%20Concept%20-%20Integration%20Notes.md#example-response">example</a> to have "shc:/..." for valueString</p>



<a name="234524085"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/%24health-cards-issue%20operation%20giving%20404%20from%20Cerner%20sandbox/near/234524085" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matt Printz <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/.24health-cards-issue.20operation.20giving.20404.20from.20Cerner.20sandbox.html#234524085">(Apr 14 2021 at 15:49)</a>:</h4>
<p><span class="user-mention" data-user-id="194174">@Paul Denning</span> "shc:/" prefix is only for the numerically encoded version of the data.</p>



<a name="234524155"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/%24health-cards-issue%20operation%20giving%20404%20from%20Cerner%20sandbox/near/234524155" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/.24health-cards-issue.20operation.20giving.20404.20from.20Cerner.20sandbox.html#234524155">(Apr 14 2021 at 15:49)</a>:</h4>
<p>That's right.</p>
<p>The FHIR issuance API returns JWSs directly. These can be then: 1) packaged into <code>.smart-health-card</code> JSON files, or 2) encoded into QRs (Where the prefix comes into play.)</p>



<a name="234527203"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/%24health-cards-issue%20operation%20giving%20404%20from%20Cerner%20sandbox/near/234527203" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joe Rattazzi <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/.24health-cards-issue.20operation.20giving.20404.20from.20Cerner.20sandbox.html#234527203">(Apr 14 2021 at 16:06)</a>:</h4>
<p><span class="user-mention" data-user-id="191678">@Abigail Watson</span> - i just re-read your message and realized that you're hitting the open endpoint. I'm trying it out myself now, but I'm curious if you got the launch to work with the open endpoint</p>



<a name="234527316"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/%24health-cards-issue%20operation%20giving%20404%20from%20Cerner%20sandbox/near/234527316" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joe Rattazzi <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/.24health-cards-issue.20operation.20giving.20404.20from.20Cerner.20sandbox.html#234527316">(Apr 14 2021 at 16:07)</a>:</h4>
<p>most examples use the closed endpoints to test patient launches (where the iss comes into play)</p>



<a name="234528970"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/%24health-cards-issue%20operation%20giving%20404%20from%20Cerner%20sandbox/near/234528970" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Abbie Watson <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/.24health-cards-issue.20operation.20giving.20404.20from.20Cerner.20sandbox.html#234528970">(Apr 14 2021 at 16:17)</a>:</h4>
<p>It's been a year or more since I've looked at a SmartOnFhir launch context, but as I recall the <code>fhirServiceUrl</code> field is there as a bootstrap/helper field to shortcut what would normally be returned in the <code>iss</code> after patient auth negotiations.    <code>fhirServiceUrl</code> isn't the same as <code>fhirBase</code> or <code>baseUrl</code>.  It's a thing specific to the <code>fhirclient</code> library and the SMART protocol, not the FHIR protocol.</p>



<a name="234529244"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/%24health-cards-issue%20operation%20giving%20404%20from%20Cerner%20sandbox/near/234529244" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Abbie Watson <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/.24health-cards-issue.20operation.20giving.20404.20from.20Cerner.20sandbox.html#234529244">(Apr 14 2021 at 16:19)</a>:</h4>
<p>Put another way, if you're going to try to launch from an open endpoint, you have to use the <code>fhirServiceUrl</code>.  As I recall.  Will be testing if that assumption still holds in just a few.  ;)</p>



<a name="234533489"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/%24health-cards-issue%20operation%20giving%20404%20from%20Cerner%20sandbox/near/234533489" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Abbie Watson <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/.24health-cards-issue.20operation.20giving.20404.20from.20Cerner.20sandbox.html#234533489">(Apr 14 2021 at 16:46)</a>:</h4>
<p>Jinkies!  Got it to redirect back to the PatientDashboard.  Dashboard is broken, but the redirect... worked.  How about that....</p>



<a name="234534151"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/%24health-cards-issue%20operation%20giving%20404%20from%20Cerner%20sandbox/near/234534151" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joe Rattazzi <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/.24health-cards-issue.20operation.20giving.20404.20from.20Cerner.20sandbox.html#234534151">(Apr 14 2021 at 16:50)</a>:</h4>
<p>sweet!</p>



<a name="234538452"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/%24health-cards-issue%20operation%20giving%20404%20from%20Cerner%20sandbox/near/234538452" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Abbie Watson <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/.24health-cards-issue.20operation.20giving.20404.20from.20Cerner.20sandbox.html#234538452">(Apr 14 2021 at 17:16)</a>:</h4>
<p>I think we're going to need a <code>patientId</code> for the open endpoint.  I have pretty much everything else ready and set up to do a POST.  </p>
<p>Will also get started on the authenticated flow, and see if we can get a <code>patientId</code> that way.  </p>
<p>Found the <code>patientId</code> in the Google Doc.  Thanks.</p>



<a name="234544993"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/%24health-cards-issue%20operation%20giving%20404%20from%20Cerner%20sandbox/near/234544993" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Abbie Watson <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/.24health-cards-issue.20operation.20giving.20404.20from.20Cerner.20sandbox.html#234544993">(Apr 14 2021 at 17:54)</a>:</h4>
<p>Got a <code>200</code> response for Nancy Smart on the open endpoint!  </p>
<p><a href="/user_uploads/10155/O7xmhOEzQzg0BNF0WYNUlXXv/Screen-Shot-2021-04-14-at-12.53.45-PM.png">Screen-Shot-2021-04-14-at-12.53.45-PM.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/10155/O7xmhOEzQzg0BNF0WYNUlXXv/Screen-Shot-2021-04-14-at-12.53.45-PM.png" title="Screen-Shot-2021-04-14-at-12.53.45-PM.png"><img src="/user_uploads/10155/O7xmhOEzQzg0BNF0WYNUlXXv/Screen-Shot-2021-04-14-at-12.53.45-PM.png"></a></div>



<a name="234545638"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/%24health-cards-issue%20operation%20giving%20404%20from%20Cerner%20sandbox/near/234545638" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joe Rattazzi <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/.24health-cards-issue.20operation.20giving.20404.20from.20Cerner.20sandbox.html#234545638">(Apr 14 2021 at 17:58)</a>:</h4>
<p>Oh sorry about that - I didn't realize you were indicating you needed the patient id <span aria-label="face palm" class="emoji emoji-1f926" role="img" title="face palm">:face_palm:</span>  Glad you found it and got it working!</p>



<a name="234575154"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/%24health-cards-issue%20operation%20giving%20404%20from%20Cerner%20sandbox/near/234575154" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Abbie Watson <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/.24health-cards-issue.20operation.20giving.20404.20from.20Cerner.20sandbox.html#234575154">(Apr 14 2021 at 21:04)</a>:</h4>
<p>So, I'm trying to inflate the decoded token payload, and getting an <code>invalid code lengths set</code> error.  <br>
<a href="/user_uploads/10155/8Z4J1tGtISlQyuHLL8HBVnLY/Screen-Shot-2021-04-14-at-3.59.18-PM.png">Screen-Shot-2021-04-14-at-3.59.18-PM.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/10155/8Z4J1tGtISlQyuHLL8HBVnLY/Screen-Shot-2021-04-14-at-3.59.18-PM.png" title="Screen-Shot-2021-04-14-at-3.59.18-PM.png"><img src="/user_uploads/10155/8Z4J1tGtISlQyuHLL8HBVnLY/Screen-Shot-2021-04-14-at-3.59.18-PM.png"></a></div>



<a name="234576854"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/%24health-cards-issue%20operation%20giving%20404%20from%20Cerner%20sandbox/near/234576854" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/.24health-cards-issue.20operation.20giving.20404.20from.20Cerner.20sandbox.html#234576854">(Apr 14 2021 at 21:11)</a>:</h4>
<p>It looks like you're trying to inflate <code>undefined</code> instead of inflating a JWS payload. Is Cerner giving you a missing payload?</p>



<a name="234577642"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/%24health-cards-issue%20operation%20giving%20404%20from%20Cerner%20sandbox/near/234577642" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Abbie Watson <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/.24health-cards-issue.20operation.20giving.20404.20from.20Cerner.20sandbox.html#234577642">(Apr 14 2021 at 21:14)</a>:</h4>
<p>Maybe.  Could be that <code>base64</code> encoding issue, or maybe they're not using the raw DEFLATE algorithm.  Something.  I'm using the same libraries and calls as for the QR code.  Nothing new or different on my side.  The variable change here is different issuer and payload generator.</p>



<a name="234577977"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/%24health-cards-issue%20operation%20giving%20404%20from%20Cerner%20sandbox/near/234577977" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joe Rattazzi <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/.24health-cards-issue.20operation.20giving.20404.20from.20Cerner.20sandbox.html#234577977">(Apr 14 2021 at 21:16)</a>:</h4>
<p>we are using DEFLATE, for what it's worth</p>



<a name="234578099"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/%24health-cards-issue%20operation%20giving%20404%20from%20Cerner%20sandbox/near/234578099" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/.24health-cards-issue.20operation.20giving.20404.20from.20Cerner.20sandbox.html#234578099">(Apr 14 2021 at 21:16)</a>:</h4>
<p>I can confirm that the Cerner QRs do generally work, from the demo <span class="user-mention" data-user-id="328301">@JP Pollak</span> gave on today's VCI big-group call, I used <a href="https://joshuamandel.com/health-card-scanner-demo/">https://joshuamandel.com/health-card-scanner-demo/</a> to successfully scan the QR from his CommonHealth demo ;-)</p>



<a name="234583108"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/%24health-cards-issue%20operation%20giving%20404%20from%20Cerner%20sandbox/near/234583108" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Abbie Watson <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/.24health-cards-issue.20operation.20giving.20404.20from.20Cerner.20sandbox.html#234583108">(Apr 14 2021 at 21:57)</a>:</h4>
<p>Swapping out the native Node zlib library for the <code>pako</code> implementation.  Should have it all sorted out in short order.</p>
<p>I suppose I could have looked closer at the SDK utility, and saved myself a lot of troubleshooting.  :sigh:</p>



<a name="234583799"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/%24health-cards-issue%20operation%20giving%20404%20from%20Cerner%20sandbox/near/234583799" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/.24health-cards-issue.20operation.20giving.20404.20from.20Cerner.20sandbox.html#234583799">(Apr 14 2021 at 22:02)</a>:</h4>
<p>Well, especially in a connectathon there's value in independent implementations!</p>



<a name="234588464"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/%24health-cards-issue%20operation%20giving%20404%20from%20Cerner%20sandbox/near/234588464" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Abbie Watson <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/.24health-cards-issue.20operation.20giving.20404.20from.20Cerner.20sandbox.html#234588464">(Apr 14 2021 at 22:47)</a>:</h4>
<p>Success, sort of.  Hello Carlos HWMockOne.</p>
<div class="codehilite"><pre><span></span><code>{&quot;iss&quot;:&quot;https://fhir-open.stagingcerner.com/beta/ec2458f2-1e24-41c8-b71b-0e701af7583d&quot;,&quot;nbf&quot;:1618440157,&quot;vc&quot;:{&quot;@context&quot;:[&quot;https://www.w3.org/2018/credentials/v1&quot;],&quot;type&quot;:[&quot;VerifiableCredential&quot;,&quot;https://smarthealth.cards#health-card&quot;,&quot;https://smarthealth.cards#covid19&quot;,&quot;https://smarthealth.cards#immunization&quot;],&quot;credentialSubject&quot;:{&quot;fhirVersion&quot;:&quot;4.0.0&quot;,&quot;fhirBundle&quot;:{&quot;resourceType&quot;:&quot;Bundle&quot;,&quot;type&quot;:&quot;collection&quot;,&quot;entry&quot;:[{&quot;fullUrl&quot;:&quot;resource:0&quot;,&quot;resource&quot;:{&quot;resourceType&quot;:&quot;Patient&quot;,&quot;name&quot;:[{&quot;family&quot;:&quot;HWMockOne&quot;,&quot;given&quot;:[&quot;Carlos&quot;,&quot;Shyann&quot;]}],&quot;birthDate&quot;:&quot;1970-01-02&quot;}},{&quot;fullUrl&quot;:&quot;resource:1&quot;,&quot;resource&quot;:{&quot;resourceType&quot;:&quot;Immunization&quot;,&quot;status&quot;:&quot;completed&quot;,&quot;vaccineCode&quot;:{&quot;coding&quot;:[{&quot;system&quot;:&quot;http://hl7.org/fhir/sid/cvx&quot;,&quot;code&quot;:&quot;207&quot;}]},&quot;patient&quot;:{&quot;reference&quot;:&quot;resource:0&quot;},&quot;occurrenceDateTime&quot;:&quot;2021-02-18&quot;,&quot;lotNumber&quot;:&quot;000002&quot;,&quot;performer&quot;:[{&quot;actor&quot;:{&quot;display&quot;:&quot;Model Hospital&quot;}}]}},{&quot;fullUrl&quot;:&quot;resource:2&quot;,&quot;resource&quot;:{&quot;resourceType&quot;:&quot;Immunization&quot;,&quot;status&quot;:&quot;completed&quot;,&quot;vaccineCode&quot;:{&quot;coding&quot;:[{&quot;system&quot;:&quot;http://hl7.org/fhir/sid/cvx&quot;,&quot;code&quot;:&quot;207&quot;}]},&quot;patient&quot;:{&quot;reference&quot;:&quot;resource:0&quot;},&quot;occurrenceDateTime&quot;:&quot;2021-01-28&quot;,&quot;lotNumber&quot;:&quot;0000001&quot;,&quot;performer&quot;:[{&quot;actor&quot;:{&quot;display&quot;:&quot;Model Hospital&quot;}}]}}]}}}}
</code></pre></div>
<p>Small problem:  was querying for Nancy Smart's healthcards.</p>



<a name="234588744"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/%24health-cards-issue%20operation%20giving%20404%20from%20Cerner%20sandbox/near/234588744" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Turman <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/.24health-cards-issue.20operation.20giving.20404.20from.20Cerner.20sandbox.html#234588744">(Apr 14 2021 at 22:50)</a>:</h4>
<p>All roads lead to Carlos HWMockOne, currently.</p>



<a name="234588817"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/%24health-cards-issue%20operation%20giving%20404%20from%20Cerner%20sandbox/near/234588817" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Turman <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/.24health-cards-issue.20operation.20giving.20404.20from.20Cerner.20sandbox.html#234588817">(Apr 14 2021 at 22:51)</a>:</h4>
<p>When we get a 'real' sandbox deployment (this summer), the Smart family should have a full battery of SHC test scenarios.</p>



<a name="234589390"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/%24health-cards-issue%20operation%20giving%20404%20from%20Cerner%20sandbox/near/234589390" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Abbie Watson <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/.24health-cards-issue.20operation.20giving.20404.20from.20Cerner.20sandbox.html#234589390">(Apr 14 2021 at 22:57)</a>:</h4>
<p>Then I'm declaring victory for the connectathon.  <span aria-label="sunglasses" class="emoji emoji-1f60e" role="img" title="sunglasses">:sunglasses:</span></p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
