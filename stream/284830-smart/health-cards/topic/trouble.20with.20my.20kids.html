---
layout: page
title: "FHIR Chat  · trouble with my kids · smart/health-cards"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/index.html">smart/health-cards</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/trouble.20with.20my.20kids.html">trouble with my kids</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="240141123"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/trouble%20with%20my%20kids/near/240141123" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Angus Millar <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/trouble.20with.20my.20kids.html#240141123">(May 25 2021 at 04:25)</a>:</h4>
<p>Hi Guys,<br>
I was using this very useful validator site: <a href="https://demo-portals.smarthealth.cards/VerifierPortal.html">VerifierPortal</a> and ran into an error which I'm not clear on. I provided my Smart Health Card token as raw QR numeric and it neatly parsed out my token correctly. It shows my token header as follows:</p>
<div class="codehilite" data-code-language="JSON"><pre><span></span><code><span class="p">{</span>
  <span class="nt">"alg"</span><span class="p">:</span> <span class="s2">"ES256"</span><span class="p">,</span>
  <span class="nt">"zip"</span><span class="p">:</span> <span class="s2">"DEF"</span><span class="p">,</span>
  <span class="nt">"kid"</span><span class="p">:</span> <span class="s2">"tuqnKddcsvXI94xWCK8NJRsZ5YQQY_QwTjMzMfNjMIc"</span>
<span class="p">}</span>
</code></pre></div>
<p>As I don't yet have a public endpoint to serve my JWKS on, I instead pasted it in manually. <br>
Here it is:</p>
<div class="codehilite" data-code-language="JSON"><pre><span></span><code><span class="p">{</span>
  <span class="nt">"keys"</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nt">"kty"</span><span class="p">:</span> <span class="s2">"EC"</span><span class="p">,</span>
      <span class="nt">"kid"</span><span class="p">:</span> <span class="s2">"tuqnKddcsvXI94xWCK8NJRsZ5YQQY_QwTjMzMfNjMIc"</span><span class="p">,</span>
      <span class="nt">"use"</span><span class="p">:</span> <span class="s2">"sig"</span><span class="p">,</span>
      <span class="nt">"alg"</span><span class="p">:</span> <span class="s2">"ES256"</span><span class="p">,</span>
      <span class="nt">"cry"</span><span class="p">:</span> <span class="s2">"P-256"</span><span class="p">,</span>
      <span class="nt">"x"</span><span class="p">:</span> <span class="s2">"j2oyU1JyNT1x66i-PFsdsU1qL-y_Nxq7RjwKkd5kNyc"</span><span class="p">,</span>
      <span class="nt">"y"</span><span class="p">:</span> <span class="s2">"OPR0AnWPAmhFC6y1RAXFvsAGS0ptfUwuoTKkWXpP4bE"</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
</code></pre></div>
<p>It then parses the JWKS and shows this error message:</p>
<div class="codehilite"><pre><span></span><code>{&quot;message&quot;:&quot;key[tuqnKddcsvXI94xWCK8NJRsZ5YQQY_QwTjMzMfNjMIc]: &#39;kid&#39; does not match thumbprint in issuer key. expected: 3BQKJkOvOmXWApViNdYTTpkN8ZVnDI23c10KXgBsjow, actual: tuqnKddcsvXI94xWCK8NJRsZ5YQQY_QwTjMzMfNjMIc&quot;,&quot;code&quot;:203,&quot;level&quot;:3}
</code></pre></div>
<p>I'm a little confused as the 'kid' in the token header and in the JWKS match, yet it seems there is some other conversion occurring that I'm not aware of. Is anyone able to point me in the right direction?</p>
<p>########################################################<br>
Update: I believe I found my answer here <a href="https://datatracker.ietf.org/doc/html/rfc7638#section-3.1">https://datatracker.ietf.org/doc/html/rfc7638#section-3.1</a><br>
And I found my typo I my JWKS json file , 'cry' should be 'crv'.</p>



<a name="240171557"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/trouble%20with%20my%20kids/near/240171557" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Christian Paquin <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/trouble.20with.20my.20kids.html#240171557">(May 25 2021 at 11:11)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191391">Angus Millar</span> <a href="#narrow/stream/284830-smart.2Fhealth-cards/topic/trouble.20with.20my.20kids/near/240141123">said</a>:</p>
<blockquote>
<p>Update: I believe I found my answer here <a href="https://datatracker.ietf.org/doc/html/rfc7638#section-3.1">https://datatracker.ietf.org/doc/html/rfc7638#section-3.1</a><br>
And I found my typo I my JWKS json file , 'cry' should be 'crv'.</p>
</blockquote>
<p>Does that resolve the issue? If not, I can run your sample in the underlying <a href="https://github.com/microsoft/health-cards-validation-SDK">validator tool</a>, to get more details.</p>



<a name="240202709"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/trouble%20with%20my%20kids/near/240202709" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Angus Millar <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/trouble.20with.20my.20kids.html#240202709">(May 25 2021 at 15:13)</a>:</h4>
<p>Thanks for the offer <span class="user-mention" data-user-id="385047">@Christian Paquin</span> , however it did resolve it, all good.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
