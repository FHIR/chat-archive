---
layout: page
title: "FHIR Chat  · Leading or trailing whitespace · smart/health-cards"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/index.html">smart/health-cards</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/Leading.20or.20trailing.20whitespace.html">Leading or trailing whitespace</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="255228836"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/Leading%20or%20trailing%20whitespace/near/255228836" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Stephen Whitney <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/Leading.20or.20trailing.20whitespace.html#255228836">(Sep 28 2021 at 14:47)</a>:</h4>
<p><span class="user-mention" data-user-id="191315">@Josh Mandel</span>  When I validate our SHC using the Microsoft SDK, I receive the error mentioned here: <a href="https://github.com/smart-on-fhir/health-cards-dev-tools/issues/145">https://github.com/smart-on-fhir/health-cards-dev-tools/issues/145</a></p>
<p>Can you help me determine where I need to strip the whitespace? Is it before I deflate and base64 encode?</p>



<a name="255230010"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/Leading%20or%20trailing%20whitespace/near/255230010" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Stephen Whitney <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/Leading.20or.20trailing.20whitespace.html#255230010">(Sep 28 2021 at 14:54)</a>:</h4>
<p><span class="user-mention silent" data-user-id="269724">Stephen Whitney</span> <a href="#narrow/stream/284830-smart.2Fhealth-cards/topic/Leading.20or.20trailing.20whitespace/near/255228836">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="191315">Josh Mandel</span>  When I validate our SHC using the Microsoft SDK, I receive the error mentioned here: <a href="https://github.com/smart-on-fhir/health-cards-dev-tools/issues/145">https://github.com/smart-on-fhir/health-cards-dev-tools/issues/145</a></p>
<p>Can you help me determine where I need to strip the whitespace? Is it before I deflate and base64 encode?</p>
</blockquote>
<p>Disregard, it looks like I got past the error.</p>



<a name="255244647"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/Leading%20or%20trailing%20whitespace/near/255244647" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/Leading.20or.20trailing.20whitespace.html#255244647">(Sep 28 2021 at 16:19)</a>:</h4>
<blockquote>
<p>Disregard, it looks like I got past the error.</p>
</blockquote>
<p>Great! (Any quick lesson you can share here?)</p>



<a name="255271723"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/Leading%20or%20trailing%20whitespace/near/255271723" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Stephen Whitney <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/Leading.20or.20trailing.20whitespace.html#255271723">(Sep 28 2021 at 18:17)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191315">Josh Mandel</span> <a href="#narrow/stream/284830-smart.2Fhealth-cards/topic/Leading.20or.20trailing.20whitespace/near/255244647">said</a>:</p>
<blockquote>
<blockquote>
<p>Disregard, it looks like I got past the error.</p>
</blockquote>
<p>Great! (Any quick lesson you can share here?)</p>
</blockquote>
<p>Surprisingly, once I handled the Warning for JWS.payload.vc.type: "VerifiableCredential" it went away:</p>
<p>JWS-compact<br>
   │<br>
   ├─ Error<br>
   │    · JWS has leading or trailing spaces<br>
   │<br>
   └─ JWS.payload<br>
         │<br>
         ├─ Warning<br>
         │    · JWS.payload.vc.type : 'VerifiableCredential' is not required and may be omitted to conserve space<br>
         │<br>
         └─ FhirBundle<br>
Can't determine the latest dev tools version. Make sure you have the latest version.<br>
Can't determine the latest spec version.</p>
<p>Validation completed</p>
<p>I also always had this python json.dumps with whitespace removal in place:</p>
<div class="codehilite"><pre><span></span><code>    base64url_payload = self._deflate_and_base64url_encode(
        json.dumps(payload, separators=(&quot;,&quot;, &quot;:&quot;)).encode(&quot;utf-8&quot;)
    )
</code></pre></div>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
