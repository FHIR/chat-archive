---
layout: page
title: "FHIR Chat  · Connectathon 27 Cerner Issuer Testing · smart/health-cards"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/index.html">smart/health-cards</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/Connectathon.2027.20Cerner.20Issuer.20Testing.html">Connectathon 27 Cerner Issuer Testing</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="239283900"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/Connectathon%2027%20Cerner%20Issuer%20Testing/near/239283900" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Reece Adamson <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/Connectathon.2027.20Cerner.20Issuer.20Testing.html#239283900">(May 18 2021 at 16:28)</a>:</h4>
<p>Just tested out the Cerner Issuer <code>$health-cards-issue</code> operation and it worked like a charm! <span aria-label="party ball" class="emoji emoji-1f38a" role="img" title="party ball">:party_ball:</span> </p>
<p>Only thing our tests noticed is that there is no <code>./well-known/smart-configuration</code> file.</p>
<p><a href="/user_uploads/10155/NfqB5eMXqtJXf-VF3iIIwweA/Screen-Shot-2021-05-18-at-12.27.53-PM.png">Screen-Shot-2021-05-18-at-12.27.53-PM.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/10155/NfqB5eMXqtJXf-VF3iIIwweA/Screen-Shot-2021-05-18-at-12.27.53-PM.png" title="Screen-Shot-2021-05-18-at-12.27.53-PM.png"><img src="/user_uploads/10155/NfqB5eMXqtJXf-VF3iIIwweA/Screen-Shot-2021-05-18-at-12.27.53-PM.png"></a></div>



<a name="239284083"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/Connectathon%2027%20Cerner%20Issuer%20Testing/near/239284083" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Reece Adamson <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/Connectathon.2027.20Cerner.20Issuer.20Testing.html#239284083">(May 18 2021 at 16:29)</a>:</h4>
<p><span class="user-mention" data-user-id="191315">@Josh Mandel</span> I don't see an explicit SHOULD or SHALL for supporting <code>/.well-known/smart-configuration</code> and indicating support for the <code>health-cards</code> capability (<a href="https://smarthealth.cards/#via-fhir-health-cards-issue-operation">link to section of the spec</a>). Is this something that should be an optional test or that we should clarify the language for?</p>



<a name="239284537"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/Connectathon%2027%20Cerner%20Issuer%20Testing/near/239284537" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/Connectathon.2027.20Cerner.20Issuer.20Testing.html#239284537">(May 18 2021 at 16:32)</a>:</h4>
<blockquote>
<p>A SMART on FHIR Server advertises support for issuing VCs according to this specification by adding the health-cards capability to its /.well-known/smart-configuration JSON file</p>
</blockquote>
<p>This should be updated to say:</p>
<blockquote>
<p>A SMART on FHIR Server SHALL advertise support for issuing VCs according to this specification by adding the health-cards capability to its /.well-known/smart-configuration JSON file</p>
</blockquote>
<p>I'll create a PR.</p>



<a name="239284540"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/Connectathon%2027%20Cerner%20Issuer%20Testing/near/239284540" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Zameer Sura <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/Connectathon.2027.20Cerner.20Issuer.20Testing.html#239284540">(May 18 2021 at 16:32)</a>:</h4>
<p>We do not publish /.well-known/smart-configuration on our Open/Insecure endpoint as it is not backed by SMART authorization. It should pass if you try using the patient access endpoint.</p>



<a name="239284793"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/Connectathon%2027%20Cerner%20Issuer%20Testing/near/239284793" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/Connectathon.2027.20Cerner.20Issuer.20Testing.html#239284793">(May 18 2021 at 16:34)</a>:</h4>
<p>Added <a href="https://github.com/smart-on-fhir/health-cards/pull/145">https://github.com/smart-on-fhir/health-cards/pull/145</a></p>



<a name="239285166"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/Connectathon%2027%20Cerner%20Issuer%20Testing/near/239285166" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Isaac Vetter <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/Connectathon.2027.20Cerner.20Issuer.20Testing.html#239285166">(May 18 2021 at 16:36)</a>:</h4>
<p>would this only be in the case of the $issue operation?</p>



<a name="239285233"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/Connectathon%2027%20Cerner%20Issuer%20Testing/near/239285233" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/Connectathon.2027.20Cerner.20Issuer.20Testing.html#239285233">(May 18 2021 at 16:36)</a>:</h4>
<p>Yes -- it's a requirement for FHIR servers supporting issuance.</p>



<a name="239285374"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/Connectathon%2027%20Cerner%20Issuer%20Testing/near/239285374" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/Connectathon.2027.20Cerner.20Issuer.20Testing.html#239285374">(May 18 2021 at 16:37)</a>:</h4>
<p>Added further clarification to PR#145.</p>



<a name="239288196"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/Connectathon%2027%20Cerner%20Issuer%20Testing/near/239288196" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Reece Adamson <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/Connectathon.2027.20Cerner.20Issuer.20Testing.html#239288196">(May 18 2021 at 16:56)</a>:</h4>
<p>Tested against the secured endpoint where the SMART configuration test passes <span aria-label="congratulations" class="emoji emoji-1f389" role="img" title="congratulations">:congratulations:</span> </p>
<p><a href="/user_uploads/10155/3IiEDyirp0QQZFp9PT1illx-/Screen-Shot-2021-05-18-at-12.55.11-PM.png">Screen-Shot-2021-05-18-at-12.55.11-PM.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/10155/3IiEDyirp0QQZFp9PT1illx-/Screen-Shot-2021-05-18-at-12.55.11-PM.png" title="Screen-Shot-2021-05-18-at-12.55.11-PM.png"><img src="/user_uploads/10155/3IiEDyirp0QQZFp9PT1illx-/Screen-Shot-2021-05-18-at-12.55.11-PM.png"></a></div>



<a name="239289385"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/Connectathon%2027%20Cerner%20Issuer%20Testing/near/239289385" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Kizer <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/Connectathon.2027.20Cerner.20Issuer.20Testing.html#239289385">(May 18 2021 at 17:03)</a>:</h4>
<p><span class="user-mention" data-user-id="197651">@Reece Adamson</span> what tool is that?</p>



<a name="239289736"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/Connectathon%2027%20Cerner%20Issuer%20Testing/near/239289736" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Stephen MacVicar <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/Connectathon.2027.20Cerner.20Issuer.20Testing.html#239289736">(May 18 2021 at 17:06)</a>:</h4>
<p>It's an alpha release of a new version of inferno: <a href="https://inferno-dev.healthit.gov/">https://inferno-dev.healthit.gov/</a></p>



<a name="239289828"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/Connectathon%2027%20Cerner%20Issuer%20Testing/near/239289828" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Reece Adamson <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/Connectathon.2027.20Cerner.20Issuer.20Testing.html#239289828">(May 18 2021 at 17:06)</a>:</h4>
<p><span class="user-mention" data-user-id="199274">@Zameer Sura</span> it does give a warning that the JWKS response does not include the <code>Access-Control-Allow-Origin</code> header expected by the spec (<a href="https://smarthealth.cards/#determining-keys-associated-with-an-issuer">https://smarthealth.cards/#determining-keys-associated-with-an-issuer</a>).</p>
<p>This is required, but for the tests we have it tuned to a warning so that it doesn't halt the following tests.</p>



<a name="239300363"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/Connectathon%2027%20Cerner%20Issuer%20Testing/near/239300363" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Zameer Sura <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/Connectathon.2027.20Cerner.20Issuer.20Testing.html#239300363">(May 18 2021 at 18:14)</a>:</h4>
<p><span class="user-mention silent" data-user-id="197651">Reece Adamson</span> <a href="#narrow/stream/284830-smart.2Fhealth-cards/topic/Connectathon.2027.20Cerner.20Issuer.20Testing/near/239289828">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="199274">Zameer Sura</span> it does give a warning that the JWKS response does not include the <code>Access-Control-Allow-Origin</code> header expected by the spec (<a href="https://smarthealth.cards/#determining-keys-associated-with-an-issuer">https://smarthealth.cards/#determining-keys-associated-with-an-issuer</a>).</p>
<p>This is required, but for the tests we have it tuned to a warning so that it doesn't halt the following tests.</p>
</blockquote>
<p>Our endpoints do support CORS but it seems like the inferno test is making the calls without an <code>Origin</code> header set, basically in <code>no-cors</code> mode which is why our server is not responding with the required CORS headers.</p>
<p>See: <a href="https://www.test-cors.org/#?client_method=GET&amp;client_credentials=false&amp;server_url=https%3A%2F%2Ffhir-myrecord.stagingcerner.com%2Fbeta%2Fec2458f2-1e24-41c8-b71b-0e701af7583d%2F.well-known%2Fjwks.json&amp;server_enable=true&amp;server_status=200&amp;server_credentials=false&amp;server_tabs=remote">Here</a>, which shows the CORS headers being returned if you look under your browser developer tools.</p>



<a name="239302438"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/Connectathon%2027%20Cerner%20Issuer%20Testing/near/239302438" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Reece Adamson <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/Connectathon.2027.20Cerner.20Issuer.20Testing.html#239302438">(May 18 2021 at 18:26)</a>:</h4>
<p>Good catch <span class="user-mention" data-user-id="199274">@Zameer Sura</span> - we'll debug that now</p>



<a name="239302633"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/Connectathon%2027%20Cerner%20Issuer%20Testing/near/239302633" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Zameer Sura <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/Connectathon.2027.20Cerner.20Issuer.20Testing.html#239302633">(May 18 2021 at 18:28)</a>:</h4>
<p>Reece, aside from the CORS warning i also see the inferno tool giving a warning about the payload length</p>
<blockquote>
<p>Payload may not be properly minified. Received a payload with length 1448, but was able to generate a payload with length 1167</p>
</blockquote>
<p>This seems to be performing the check against the decompressed payload instead of the JWS token. Lengths of the responses, decompressed payload = 1448, jws token = 889</p>



<a name="239302863"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/Connectathon%2027%20Cerner%20Issuer%20Testing/near/239302863" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Reece Adamson <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/Connectathon.2027.20Cerner.20Issuer.20Testing.html#239302863">(May 18 2021 at 18:29)</a>:</h4>
<p>The payload length checks have some known issues we're looking at so you can ignore that warning.</p>



<a name="239305982"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/Connectathon%2027%20Cerner%20Issuer%20Testing/near/239305982" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Stephen MacVicar <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/Connectathon.2027.20Cerner.20Issuer.20Testing.html#239305982">(May 18 2021 at 18:48)</a>:</h4>
<p>That test is intended to specifically check against the decompressed payload. We take the payload, minify it ourselves and compare the lengths. It's tricky to say for sure that a difference in length is an actual problem, so it's just a warning and the wording says "may". Due to an issue that we are unlikely to resolve before the connectathon, the length we're checking against is ~40 characters shorter than it should be. A difference of 300 characters seems like it indicates a problem with one of our implementations.</p>



<a name="239400344"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/Connectathon%2027%20Cerner%20Issuer%20Testing/near/239400344" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vijayendra Prabhakar <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/Connectathon.2027.20Cerner.20Issuer.20Testing.html#239400344">(May 19 2021 at 10:34)</a>:</h4>
<p><span class="user-mention" data-user-id="199274">@Zameer Sura</span>  One query for the cerner issuer,  is authentication through SmartOnFHIR required to access the API through Patient Access? We have enabled authentication through Bearer  token from our Holder App.</p>



<a name="239404755"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/Connectathon%2027%20Cerner%20Issuer%20Testing/near/239404755" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Reece Adamson <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/Connectathon.2027.20Cerner.20Issuer.20Testing.html#239404755">(May 19 2021 at 11:16)</a>:</h4>
<p><span class="user-mention" data-user-id="306186">@Vijayendra Prabhakar</span> I was able to test with the Cerner open endpoint.</p>
<p><a href="https://github.com/joeratt/connectathon_notes/blob/may_2021-HL7-health_cards/health_cards/Cerner%20SMART%20Health%20Cards%20-%20Integration%20Notes.md#health-card-endpoints">Documentation is here</a></p>
<p>For convenience here is the open endpoint: <code>https://fhir-open.stagingcerner.com/beta/ec2458f2-1e24-41c8-b71b-0e701af7583d/Patient/{id}/$health-cards-issue</code></p>



<a name="239417735"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/Connectathon%2027%20Cerner%20Issuer%20Testing/near/239417735" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Zameer Sura <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/Connectathon.2027.20Cerner.20Issuer.20Testing.html#239417735">(May 19 2021 at 12:53)</a>:</h4>
<p><span class="user-mention" data-user-id="306186">@Vijayendra Prabhakar</span>, yes in a production system you got to access the Patient Access API through the SMART On FHIR OAuth2 authentication. The documentation that Reece linked describes how you can register your application to connect with this endpoint.<br>
Please let me know if you require assistance with this.</p>
<p>Additionally we provide the open endpoint to test in our public sandbox/connectathon domain that does not require authentication.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
