---
layout: page
title: "FHIR Chat  · SHC: QR Links · smart/health-cards"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/index.html">smart/health-cards</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/SHC.3A.20QR.20Links.html">SHC: QR Links</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="254736559"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/SHC%3A%20QR%20Links/near/254736559" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/SHC.3A.20QR.20Links.html#254736559">(Sep 24 2021 at 16:56)</a>:</h4>
<p>I'd like to explore a general pattern of creating "SMART Health Card Links", so QRs can link to bundles of data when the data are too big to fit in a SMART Health Card directly. Given <a class="stream-topic" data-stream-id="284830" href="/#narrow/stream/284830-smart.2Fhealth-cards/topic/Digital.20Insurance.20Card">#smart/health-cards &gt; Digital Insurance Card</a> discussion, CARIN's digital insurance card use case may be a good first target for this technique.</p>



<a name="254742979"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/SHC%3A%20QR%20Links/near/254742979" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Adam Culbertson <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/SHC.3A.20QR.20Links.html#254742979">(Sep 24 2021 at 17:38)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> I am not sure if we should abandon the idea or trim the data payload.  <span class="user-mention" data-user-id="191315">@Josh Mandel</span> yes would be great to explore this.  So basically there are two options with the QR code either embed the data directly in QR which is 7089 characters or link to a bundle of data.  The latter option may be ideal.  For the use case of vaccines or lab tests, the results don't change.  Insurance cards on the other hand can change and so this functionality would be a value add to the digital version of the card.</p>



<a name="254744012"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/SHC%3A%20QR%20Links/near/254744012" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Adam Culbertson <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/SHC.3A.20QR.20Links.html#254744012">(Sep 24 2021 at 17:44)</a>:</h4>
<p><span class="user-mention" data-user-id="216906">@Amy Ballard</span> curious to get your take on this?</p>



<a name="254760065"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/SHC%3A%20QR%20Links/near/254760065" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Isaac Vetter <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/SHC.3A.20QR.20Links.html#254760065">(Sep 24 2021 at 19:35)</a>:</h4>
<p>yeah, the QR code containing a link really does seem to be the best option. Unlike COVID/clinical data use-cases, there's not a goal of minimizing the amount of data in the card, right? Further, the privacy concerns of a server knowing when you used your card are lessoned as well. Josh, how would a "SHC Link" differ from a normal QR card with an https url in it? Or do you mean that you'd just profile the Bundle? or authnz?</p>



<a name="254767284"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/SHC%3A%20QR%20Links/near/254767284" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/SHC.3A.20QR.20Links.html#254767284">(Sep 24 2021 at 20:25)</a>:</h4>
<blockquote>
<p>7089 characters</p>
</blockquote>
<p>This is beyond the <em>usable</em> range  that you'll get out of QRs. I'd stick to V22 or lower.</p>



<a name="254767681"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/SHC%3A%20QR%20Links/near/254767681" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/SHC.3A.20QR.20Links.html#254767681">(Sep 24 2021 at 20:28)</a>:</h4>
<p>the workflow is a whole lot simpler if you don't need links. But I suspected that you would get there... I was leading towards that conclusion slower than Josh went there.</p>



<a name="254767980"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/SHC%3A%20QR%20Links/near/254767980" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/SHC.3A.20QR.20Links.html#254767980">(Sep 24 2021 at 20:30)</a>:</h4>
<p>if it's a QR code link... it's just a URL? A quick assessment in my head says that there's not really a need to sign the URL, since it's the integrity of the target that matters. You just need to wrap it with an identifying protocol so it gets handled right?</p>



<a name="254768056"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/SHC%3A%20QR%20Links/near/254768056" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/SHC.3A.20QR.20Links.html#254768056">(Sep 24 2021 at 20:31)</a>:</h4>
<p><span class="user-mention" data-user-id="191315">@Josh Mandel</span> still would use shc:/ for the protocol benefits?</p>



<a name="254769107"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/SHC%3A%20QR%20Links/near/254769107" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/SHC.3A.20QR.20Links.html#254769107">(Sep 24 2021 at 20:39)</a>:</h4>
<p>Just a URL is not great unless you have a good process for managing expirations -- and those goal of de-activating the URL can conflict with the goal of allowing long-term access to the data for some recipeints. I have a bunch of thoughts here, all 10% baked. (For background, we considered some options for links back before we launched the SHC 1.0 spec, and ultimately <a href="https://github.com/smart-on-fhir/health-cards/pull/49">decided against it</a>, which was absolutely the right call given our 1.0 focus.)</p>



<a name="254769212"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/SHC%3A%20QR%20Links/near/254769212" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/SHC.3A.20QR.20Links.html#254769212">(Sep 24 2021 at 20:40)</a>:</h4>
<p>My update recent thoughts (from, like... this week) are at <a href="https://hackmd.io/kvyVFD5cQK2Bg1_vnXSh_Q?both">https://hackmd.io/kvyVFD5cQK2Bg1_vnXSh_Q?both</a> (you should probably just squint at and ignore the GNAP stuff in there -- this was mainly an excuse for me to take a closer look at how GNAP is coming along, and I like what I see but it's early days.)</p>



<a name="254769268"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/SHC%3A%20QR%20Links/near/254769268" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/SHC.3A.20QR.20Links.html#254769268">(Sep 24 2021 at 20:41)</a>:</h4>
<p>This kind of thing will need a lot focus and scoping, and some reference implementations to give us a feel for it. So I'm definitely not proposing anything at this stage, just noodling (and now... noodling out in the open).</p>



<a name="254769488"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/SHC%3A%20QR%20Links/near/254769488" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> JP Pollak <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/SHC.3A.20QR.20Links.html#254769488">(Sep 24 2021 at 20:43)</a>:</h4>
<p>are there cases where it would be useful to put some of the clinical data along with the URL in the QR? for partial offline support, for example?</p>



<a name="254769795"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/SHC%3A%20QR%20Links/near/254769795" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/SHC.3A.20QR.20Links.html#254769795">(Sep 24 2021 at 20:45)</a>:</h4>
<p>Yes, I think if we have a way of doing "persistent links" on their own, then having a way to stick such links into a "regular 1.0" health card alongside the fhirBundle makes good sense.</p>



<a name="254779352"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/SHC%3A%20QR%20Links/near/254779352" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Isaac Vetter <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/SHC.3A.20QR.20Links.html#254779352">(Sep 24 2021 at 22:01)</a>:</h4>
<p>Josh, the "claiming" of a link to enable single or limited uses is really neat. The AS encrypts and generates the QR with the decryption key, right? Is it therefore able to decrypt the file?</p>



<a name="254789431"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/SHC%3A%20QR%20Links/near/254789431" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/SHC.3A.20QR.20Links.html#254789431">(Sep 24 2021 at 23:55)</a>:</h4>
<blockquote>
<p>The AS encrypts and generates the QR with the decryption key, right</p>
</blockquote>
<p>Not quite -- whoever uploads the file to the server would (could) encrypt it prior to upload. If you want your AS to handle this, then sure it'd have access to the raw data. But the proposed design allows for separation.</p>



<a name="254791114"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/SHC%3A%20QR%20Links/near/254791114" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/SHC.3A.20QR.20Links.html#254791114">(Sep 25 2021 at 00:15)</a>:</h4>
<p>I see how my write-up is confused on this point though; the (minimally scoped) authorization server would only provide part of the data for the QR code and not actually generate the full thing. Client would insert any description key</p>



<a name="256815939"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/SHC%3A%20QR%20Links/near/256815939" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/SHC.3A.20QR.20Links.html#256815939">(Oct 08 2021 at 22:42)</a>:</h4>
<p>Figured I'd record a quick video sketching out this design space as I see it. I think there could be tie-ins with projects like CARIN's digital insurance card, HL7 advance directives, and other patient access initiatives. Would love to get feedback or questions on the concept.</p>
<p><a href="https://youtu.be/SbM9I20lH64">https://youtu.be/SbM9I20lH64</a></p>
<div class="youtube-video message_inline_image"><a data-id="SbM9I20lH64" href="https://youtu.be/SbM9I20lH64"><img src="https://uploads.zulipusercontent.net/811e1a6f72e6b753398862512a394a97724bad76/68747470733a2f2f692e7974696d672e636f6d2f76692f53624d394932306c4836342f64656661756c742e6a7067"></a></div><p>From the YouTube description...</p>
<blockquote>
<p>This is a quick design sketch for a data sharing concept I'm calling (for now) 'SMART Health Links". It's intended as the starting point for a broader conversation;  my goal is to provide a few specific examples while leaving the concept open-ended so we can explore where else it might fit, or how it might morph into something different.</p>
<p>Design goals: <a href="https://hackmd.io/kvyVFD5cQK2Bg1_vnXSh_Q">https://hackmd.io/kvyVFD5cQK2Bg1_vnXSh_Q</a><br>
API sketch: <a href="https://hackmd.io/qx2capMpSTSz488f8juf_A">https://hackmd.io/qx2capMpSTSz488f8juf_A</a><br>
Prototype: <a href="https://github.com/jmandel/shclinks">https://github.com/jmandel/shclinks</a></p>
</blockquote>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
