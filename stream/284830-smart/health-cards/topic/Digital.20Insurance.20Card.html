---
layout: page
title: "FHIR Chat  · Digital Insurance Card · smart/health-cards"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/index.html">smart/health-cards</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/Digital.20Insurance.20Card.html">Digital Insurance Card</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="254605400"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/Digital%20Insurance%20Card/near/254605400" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/Digital.20Insurance.20Card.html#254605400">(Sep 23 2021 at 21:06)</a>:</h4>
<p><span class="user-mention" data-user-id="238353">@Mark Roberts</span> <span class="user-mention" data-user-id="191648">@Adam Culbertson</span> Creating this topic to discuss the use of the SHC card framework for Digital Insurance cards.</p>



<a name="254605448"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/Digital%20Insurance%20Card/near/254605448" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/Digital.20Insurance.20Card.html#254605448">(Sep 23 2021 at 21:06)</a>:</h4>
<p>First, do you have a spec or an example at this time?</p>



<a name="254696697"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/Digital%20Insurance%20Card/near/254696697" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Adam Culbertson <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/Digital.20Insurance.20Card.html#254696697">(Sep 24 2021 at 12:40)</a>:</h4>
<p>thanks <span class="user-mention" data-user-id="191316">@Grahame Grieve</span>  we do have a sample JSON object.</p>



<a name="254697253"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/Digital%20Insurance%20Card/near/254697253" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/Digital.20Insurance.20Card.html#254697253">(Sep 24 2021 at 12:45)</a>:</h4>
<p>want to share it here?</p>



<a name="254697623"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/Digital%20Insurance%20Card/near/254697623" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Adam Culbertson <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/Digital.20Insurance.20Card.html#254697623">(Sep 24 2021 at 12:48)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191316">Grahame Grieve</span> <a href="#narrow/stream/284830-smart.2Fhealth-cards/topic/Digital.20Insurance.20Card/near/254697253">said</a>:</p>
<blockquote>
<p>want to share it here?</p>
</blockquote>
<p>Yes let me see if <span class="user-mention" data-user-id="238353">@Mark Roberts</span> can post here.  My work computer doesn't like to post things outside of our firewall.</p>



<a name="254703326"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/Digital%20Insurance%20Card/near/254703326" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Roberts <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/Digital.20Insurance.20Card.html#254703326">(Sep 24 2021 at 13:27)</a>:</h4>
<p>I am trying to post it here. If this doesn't work, all of our content is posted here: <a href="https://confluence.hl7.org/display/CAR/Resources">https://confluence.hl7.org/display/CAR/Resources</a>  </p>
<p><a href="/user_uploads/10155/iwl0kxg3pn6638UKTBk5CWnc/DRAFT-JSONs-for-Digital-Insurance-Card-IG.json">DRAFT-JSONs-for-Digital-Insurance-Card-IG.json</a></p>



<a name="254704782"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/Digital%20Insurance%20Card/near/254704782" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/Digital.20Insurance.20Card.html#254704782">(Sep 24 2021 at 13:37)</a>:</h4>
<p>18kb... massive. A key aspect of the SHC framework that makes it very robust is that the data is extremely parsimonious. Your example is not; it seems extremely unlikely to me that all the information you're representing is on an existing card.</p>



<a name="254707120"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/Digital%20Insurance%20Card/near/254707120" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Adam Culbertson <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/Digital.20Insurance.20Card.html#254707120">(Sep 24 2021 at 13:52)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> good point.  If we want to leverage SMART Health Cards this piece would have to be widdled down to the essential data.</p>



<a name="254707325"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/Digital%20Insurance%20Card/near/254707325" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Roberts <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/Digital.20Insurance.20Card.html#254707325">(Sep 24 2021 at 13:53)</a>:</h4>
<p>We captured a pretty comprehensive list of data elements that are commonly found on commercial insurance cards in the document below. We started to look at Medicare and Medicaid cards, but need more work  on those sections. <span class="user-mention" data-user-id="191648">@Adam Culbertson</span> correct me if I am wrong, but I think the JSON includes all the commercial data elements in the document below.</p>
<p><a href="/user_uploads/10155/4DsO_w4fC6Fqpmn9ZxKfjo__/CARIN-IG-for-Digital-Insurance-Card-Data-Elements-9.9.211.xlsx">CARIN-IG-for-Digital-Insurance-Card-Data-Elements-9.9.211.xlsx</a></p>



<a name="254711575"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/Digital%20Insurance%20Card/near/254711575" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Adam Culbertson <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/Digital.20Insurance.20Card.html#254711575">(Sep 24 2021 at 14:18)</a>:</h4>
<p><span class="user-mention" data-user-id="238353">@Mark Roberts</span> yes this is indeed this list of elements.  But I think perhaps what <span class="user-mention" data-user-id="191316">@Grahame Grieve</span>  is getting at is perhaps of that list there may be a few we would want to prioritize for including into a SMART health card that would be exchanged with a partner.  Perhaps the SMART health card framework is out of scope here.  But I think something we need to think about the breath of data we have and thing about what is essential for our use case.</p>



<a name="254716094"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/Digital%20Insurance%20Card/near/254716094" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/Digital.20Insurance.20Card.html#254716094">(Sep 24 2021 at 14:47)</a>:</h4>
<p>the first question that leaped out to me is the multiple person question. Does the digital insurance card need to capture all the persons on the logical card in the one digital card?</p>



<a name="254716951"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/Digital%20Insurance%20Card/near/254716951" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Adam Culbertson <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/Digital.20Insurance.20Card.html#254716951">(Sep 24 2021 at 14:53)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> great question and one we wrestled with as a group.  Some plans do list multiple persons on the same card and that is why we ultimately choose to support them.  But again coming back to SMART health cards.  If we want to support there is probably a compelling reason to break it at to one person per card.</p>



<a name="254717112"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/Digital%20Insurance%20Card/near/254717112" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/Digital.20Insurance.20Card.html#254717112">(Sep 24 2021 at 14:54)</a>:</h4>
<p>perhaps, yes. But if you want QR codes, and you aren't going to do it the SHC way because you have too much data, what option is left?</p>



<a name="254717730"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/Digital%20Insurance%20Card/near/254717730" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Adam Culbertson <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/Digital.20Insurance.20Card.html#254717730">(Sep 24 2021 at 14:58)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> Yes, I agree.  I think that is a question the group needs to wrestle with.  Hence we either need to abandon the idea of using SMART Health cards, narrow down the JSON object, or find some middle of the road solution.</p>



<a name="254717965"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/Digital%20Insurance%20Card/near/254717965" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/Digital.20Insurance.20Card.html#254717965">(Sep 24 2021 at 14:59)</a>:</h4>
<p>sounds like it, but does that imply you also need to abandon the idea of using QR codes? And what would a middle of the road solution look like?</p>



<a name="254718248"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/Digital%20Insurance%20Card/near/254718248" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Adam Culbertson <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/Digital.20Insurance.20Card.html#254718248">(Sep 24 2021 at 15:01)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> what's the time difference between US eastern time and you?</p>



<a name="254718399"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/Digital%20Insurance%20Card/near/254718399" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/Digital.20Insurance.20Card.html#254718399">(Sep 24 2021 at 15:02)</a>:</h4>
<p>10 hours right now. It's 1 am and I have a long night ahead of me</p>



<a name="254782270"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/Digital%20Insurance%20Card/near/254782270" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Amy Ballard <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/Digital.20Insurance.20Card.html#254782270">(Sep 24 2021 at 22:30)</a>:</h4>
<p>The QR codes we are talking about supporting in this IG are not SMART Health Card QR codes. Many insurance cards have QR codes on them. Ex. <a href="https://hmsa.com/Media/Default/images/member-id-card-ppo-compmed.jpg">https://hmsa.com/Media/Default/images/member-id-card-ppo-compmed.jpg</a>  We are planning on allowing providers to include an image of these QR codes as an Attachment in an Extension</p>
<div class="message_inline_image"><a href="https://hmsa.com/Media/Default/images/member-id-card-ppo-compmed.jpg"><img src="https://uploads.zulipusercontent.net/ab3fb5093c2608a1aed7ddaef6b5e2b579204c64/68747470733a2f2f686d73612e636f6d2f4d656469612f44656661756c742f696d616765732f6d656d6265722d69642d636172642d70706f2d636f6d706d65642e6a7067"></a></div>



<a name="254784745"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/Digital%20Insurance%20Card/near/254784745" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Amy Ballard <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/Digital.20Insurance.20Card.html#254784745">(Sep 24 2021 at 22:57)</a>:</h4>
<p>In a future version of the IG, we could support issuing a type of SMART Health Card, at which time we'd need to have profiles constraining the allowed data for the card. The user could potentially retrieve the full set of Coverage data mapped for this IG and also request a SMART Health Card be issued. The same way a user can currently retrieve all their immunizations from their provider and also request a SMART Health Card with their COVID vaccines.</p>



<a name="254789362"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/Digital%20Insurance%20Card/near/254789362" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/Digital.20Insurance.20Card.html#254789362">(Sep 24 2021 at 23:54)</a>:</h4>
<p>The QR in this example is super tiny -- what does it convey / how is it used?</p>



<a name="254794615"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/Digital%20Insurance%20Card/near/254794615" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Amy Ballard <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/Digital.20Insurance.20Card.html#254794615">(Sep 25 2021 at 01:03)</a>:</h4>
<p>For this example, it appears to be the Subscriber ID, not sure how it's intended to be used. We have discussed that insurance cards have images, which could be logos, bar codes and QR codes. We'd like to define a way for insurers to optionally include these in the Coverage resource. We have not yet worked out the details of how we might convey the meaning/intended use for each image. QR codes are likely be used differently by different insurers. The "images" discussions are yet to come.</p>



<a name="254794781"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/Digital%20Insurance%20Card/near/254794781" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/Digital.20Insurance.20Card.html#254794781">(Sep 25 2021 at 01:06)</a>:</h4>
<p>that'll be a simple avoidance of keyboard entry errors - scan the barcode into the UI entry with a simple USB scanner</p>



<a name="255150142"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/Digital%20Insurance%20Card/near/255150142" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Adam Culbertson <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/Digital.20Insurance.20Card.html#255150142">(Sep 28 2021 at 02:07)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> yes agreed and then you sovle 90% of my patient matching problem. :</p>



<a name="255150673"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/Digital%20Insurance%20Card/near/255150673" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/Digital.20Insurance.20Card.html#255150673">(Sep 28 2021 at 02:15)</a>:</h4>
<p>Mistyping insurance numbers can't really be be 90% of the problem with patient matching, can it?</p>



<a name="255230230"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/Digital%20Insurance%20Card/near/255230230" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Adam Culbertson <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/Digital.20Insurance.20Card.html#255230230">(Sep 28 2021 at 14:55)</a>:</h4>
<p><span class="user-mention" data-user-id="191315">@Josh Mandel</span>No the data on the insurance card won't solve 90% of the problem.  But to Grahme'ss comment "simple avoidance of simple keyboard entry errors"  such as mistyping names, addresses, and DOB would solve a significant portion of it.</p>



<a name="267905747"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/Digital%20Insurance%20Card/near/267905747" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ryan Howells <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/Digital.20Insurance.20Card.html#267905747">(Jan 13 2022 at 17:52)</a>:</h4>
<p>We are SUPER early in this discussion. In fact, we really haven't had any meaningful conversations about this because health plans have not indicated this is a priority for them right now. The goal has been to publish STU1 and simply make room for images as <span class="user-mention" data-user-id="216906">@Amy Ballard</span> mentioned. As background, there are significant differences between what data elements health plan membership cards include across lines of business, employer groups, and states. Early indications are that it would be a heavy (maybe too difficult) lift to provide uniform SHC guidance as to what the ~1200 characters should include for each of the possible combinations but again, we need to discuss in more detail. <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> Is there a specific demand out there regarding why you are asking that we may be failing to take into account? Happy to reprioritize this discussion if that's the case. <span class="user-mention" data-user-id="260046">@Cille Kissel Watkins</span> <span class="user-mention" data-user-id="243554">@Pat Taylor</span> <span class="user-mention" data-user-id="231038">@Gail Kocher</span> may also want to weigh in from the payer community.</p>



<a name="267908606"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/Digital%20Insurance%20Card/near/267908606" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cille Kissel Watkins <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/Digital.20Insurance.20Card.html#267908606">(Jan 13 2022 at 18:13)</a>:</h4>
<p>Hi all - I second Amy's comments wholeheartedly. For STU1 of the IG, we focused on enabling essential elements found on the physical insurance cards to be passed, including a few image types. QR codes are used by a small number of plans to communicate MemberID or SubscriberIDs; barcodes are far more common communicating MemberIDs, names of beneficiaries, and plan details. Would be happy to point you all to some sample insurance cards from US insurers if there is confusion or concern about the data elements we are exposing in the initial IG. </p>
<p>For future versions of the IG (assuming there is interest from the community to take this forward), we are very interested in understanding how the insurance card data could be passed as a verifiable SMART health card. We had some initial dialogue with Josh about this a few months ago but would need to have more formal dialogue as a community. Once we get past this ballot reconciliation, we would welcome participation in our regularly scheduled Thursday meetings to discuss how we could make this a reality for STU2. If that timing is not convenient, we could organize another time to connect to augment our regularly schedule touch bases.</p>



<a name="267918416"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/Digital%20Insurance%20Card/near/267918416" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/Digital.20Insurance.20Card.html#267918416">(Jan 13 2022 at 19:29)</a>:</h4>
<p>Clearly none of this should be affecting current term ballots. But it would be great to build some prototypes that explore what it would mean to support smart health links,  as a background process.</p>
<p>If you want to schedule a conversation or better yet a working session to hack on some demonstrations here, I would be very happy to participate:-</p>



<a name="267923319"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/Digital%20Insurance%20Card/near/267923319" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/Digital.20Insurance.20Card.html#267923319">(Jan 13 2022 at 20:07)</a>:</h4>
<p><span class="user-mention" data-user-id="196361">@Ryan Howells</span> </p>
<blockquote>
<p>@Grahame Grieve Is there a specific demand out there regarding why you are asking that we may be failing to take into account?</p>
</blockquote>
<p>I have no particular stake in the ground regarding functionality. Just that the project when presented to FMG indicated an intention to use SHCs, but the way the project was progressing indicated incompatible technical thinking with SHC constraints. So I'm exploring that. </p>
<ul>
<li>strip the data down to what can be in an SHC</li>
<li>use the QR code to refer to data elsewhere </li>
<li>have a QR code that's only a limited portion of the data that is transferred at point of clerical processing</li>
<li>don't use QR codes</li>
</ul>
<p>I'm not invested in any of those, just trying to make sure that the project's work and it's stated goals align</p>



<a name="267926912"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/Digital%20Insurance%20Card/near/267926912" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vitor Pamplona <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/Digital.20Insurance.20Card.html#267926912">(Jan 13 2022 at 20:38)</a>:</h4>
<p>I will be very interested in working with the group to fit a large payload into a single QR. I actually think the previous proposals are not really that large and can be made to fit into a QR with some encoding magic.</p>



<a name="267926975"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/Digital%20Insurance%20Card/near/267926975" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/Digital.20Insurance.20Card.html#267926975">(Jan 13 2022 at 20:39)</a>:</h4>
<p>well, the proposal I looked at was 18k and wasn't going to fit any time</p>



<a name="267927085"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/Digital%20Insurance%20Card/near/267927085" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vitor Pamplona <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/Digital.20Insurance.20Card.html#267927085">(Jan 13 2022 at 20:40)</a>:</h4>
<p>In raw, yes it will never fit</p>



<a name="267927412"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/Digital%20Insurance%20Card/near/267927412" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/Digital.20Insurance.20Card.html#267927412">(Jan 13 2022 at 20:43)</a>:</h4>
<p>right. so my point was that either you aren't using SHCs, or you are working towards meeting the technical constraints, or you are working with the SHC group to find a 3rd course</p>



<a name="267927572"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/Digital%20Insurance%20Card/near/267927572" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vitor Pamplona <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/Digital.20Insurance.20Card.html#267927572">(Jan 13 2022 at 20:44)</a>:</h4>
<p>SHCs support multiple QRs. One could definitely do that.</p>



<a name="267927676"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/Digital%20Insurance%20Card/near/267927676" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vitor Pamplona <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/Digital.20Insurance.20Card.html#267927676">(Jan 13 2022 at 20:45)</a>:</h4>
<p>But there are better compression mechanisms out there. It would be a different spec, but you can expect to put a 60KB sparse json file into a 4Kb QR</p>



<a name="267930540"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/Digital%20Insurance%20Card/near/267930540" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vitor Pamplona <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/Digital.20Insurance.20Card.html#267930540">(Jan 13 2022 at 21:06)</a>:</h4>
<p>Like I said, it's not really that big. Here's the JSON from <span class="user-mention" data-user-id="238353">@Mark Roberts</span>  signed following SHC: <a href="/user_uploads/10155/KRymZ3EZ4eDDkVH5l3eUAmxY/Mark-Roberts-JSON-as-an-SHC.png">Mark-Roberts-JSON-as-an-SHC.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/10155/KRymZ3EZ4eDDkVH5l3eUAmxY/Mark-Roberts-JSON-as-an-SHC.png" title="Mark-Roberts-JSON-as-an-SHC.png"><img src="/user_uploads/10155/KRymZ3EZ4eDDkVH5l3eUAmxY/Mark-Roberts-JSON-as-an-SHC.png"></a></div>



<a name="267930577"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/Digital%20Insurance%20Card/near/267930577" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vitor Pamplona <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/Digital.20Insurance.20Card.html#267930577">(Jan 13 2022 at 21:07)</a>:</h4>
<p>Without any additional compression.</p>



<a name="267941786"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/Digital%20Insurance%20Card/near/267941786" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/Digital.20Insurance.20Card.html#267941786">(Jan 13 2022 at 22:40)</a>:</h4>
<p>These 4kb QRs aren't easy to scan, especially when printed on paper or scanned from a consumer grade camera (subject is not perfectly flat, not evenly lit). We chose V22 as a pragmatic upper bound in SHC.</p>



<a name="267941979"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/Digital%20Insurance%20Card/near/267941979" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/Digital.20Insurance.20Card.html#267941979">(Jan 13 2022 at 22:41)</a>:</h4>
<p>In any case, it's worth exploring density of inline data as well as approaches that link to external data.</p>



<a name="267943849"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/Digital%20Insurance%20Card/near/267943849" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/Digital.20Insurance.20Card.html#267943849">(Jan 13 2022 at 22:59)</a>:</h4>
<p>the Australian ICAO QR codes are more dense than SHCs (they have all the X509 stuff in there) and I have had problems scanning them all over the place</p>



<a name="267945676"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/Digital%20Insurance%20Card/near/267945676" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vitor Pamplona <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/Digital.20Insurance.20Card.html#267945676">(Jan 13 2022 at 23:16)</a>:</h4>
<p>So, what's the limit for you? 1Kb?</p>



<a name="267945934"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/Digital%20Insurance%20Card/near/267945934" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vitor Pamplona <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/Digital.20Insurance.20Card.html#267945934">(Jan 13 2022 at 23:19)</a>:</h4>
<p>We could use the EU's DCC standard to put all that data under 1KB QRs if we wanted to</p>



<a name="267946750"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/Digital%20Insurance%20Card/near/267946750" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/Digital.20Insurance.20Card.html#267946750">(Jan 13 2022 at 23:27)</a>:</h4>
<p>I think the limit is best expressed in terms of QR symbol version rather than bytes -- V22, for example.</p>



<a name="267948620"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/Digital%20Insurance%20Card/near/267948620" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vitor Pamplona <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/Digital.20Insurance.20Card.html#267948620">(Jan 13 2022 at 23:43)</a>:</h4>
<p>So, is V22 the limit for SHCs?</p>



<a name="267960839"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/Digital%20Insurance%20Card/near/267960839" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/Digital.20Insurance.20Card.html#267960839">(Jan 14 2022 at 02:33)</a>:</h4>
<p>Yes, see <a href="https://spec.smarthealth.cards/#chunking">https://spec.smarthealth.cards/#chunking</a> for details</p>



<a name="268009464"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/Digital%20Insurance%20Card/near/268009464" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vitor Pamplona <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/Digital.20Insurance.20Card.html#268009464">(Jan 14 2022 at 12:56)</a>:</h4>
<p>Hum.. which mode is the V22 for? Based on Example 2, it looks like that limitation requires folks to use QR's ECC <code>L</code>, which is not great. Otherwise that same QR goes into v25 for M, v30 for Q and v34 for H.</p>



<a name="268010477"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/Digital%20Insurance%20Card/near/268010477" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vitor Pamplona <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/Digital.20Insurance.20Card.html#268010477">(Jan 14 2022 at 13:04)</a>:</h4>
<p>I would strongly suggest upping it to v25-28 and requiring to <code>M</code>. The <code>L</code> mode is probably the reason why <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> is having a hard time with ICAO cards (which can only use <code>L</code>), since the vast majority of reading inconsistencies out there come from "damaged" QR.</p>



<a name="268026350"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/Digital%20Insurance%20Card/near/268026350" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/Digital.20Insurance.20Card.html#268026350">(Jan 14 2022 at 15:14)</a>:</h4>
<p>Keep in mind that v22 is an upper limit;  implementers can increase error correction when they have smaller data sets, otherwise we break the data across multiple QRs (and again, these can be populated with less data if more air correction is desired).  We chose an upper bound based on some testing, and we certainly have not discovered evidence that we have a lot of headroom here  to increase the cap.</p>



<a name="268027633"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/Digital%20Insurance%20Card/near/268027633" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vitor Pamplona <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/Digital.20Insurance.20Card.html#268027633">(Jan 14 2022 at 15:23)</a>:</h4>
<p>Sure, but what I am saying is that, in practice, a print of v22 on <code>L</code> is worse than v25 on <code>M</code> just because of the way people manage their QR papers (folding, scratching, oils, water damage, etc). Using only the version as a guide on the spec misses the point.</p>



<a name="268028144"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/Digital%20Insurance%20Card/near/268028144" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vitor Pamplona <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/Digital.20Insurance.20Card.html#268028144">(Jan 14 2022 at 15:26)</a>:</h4>
<p>And if people are only using screens (like their phones instead of a printed card), the display reflections alone, especially in lower-end phones which are less bright and more reflective, makes any <code>L</code> QR hard to read.</p>



<a name="268029131"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/Digital%20Insurance%20Card/near/268029131" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vitor Pamplona <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/Digital.20Insurance.20Card.html#268029131">(Jan 14 2022 at 15:33)</a>:</h4>
<p>In other words, <strong>in practice</strong>, the QR density is less impactful than the QR correction capabilities.</p>



<a name="268030845"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/Digital%20Insurance%20Card/near/268030845" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/Digital.20Insurance.20Card.html#268030845">(Jan 14 2022 at 15:44)</a>:</h4>
<p>Are you familiar with some best practice guidance or data driven recommendation in this space? We struggled to find these, and relied on feedback from participants during spec development to set limits.</p>



<a name="268031676"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/Digital%20Insurance%20Card/near/268031676" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vitor Pamplona <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/Digital.20Insurance.20Card.html#268031676">(Jan 14 2022 at 15:50)</a>:</h4>
<p>We did a study for the Good Health Pass blueprint last year. There are some very good considerations at the GS1 2D Barcode Verification Process Implementation Guideline: <a href="https://www.gs1.org/docs/barcodes/2D_Barcode_Verification_Process_Implementation_Guideline.pdf">https://www.gs1.org/docs/barcodes/2D_Barcode_Verification_Process_Implementation_Guideline.pdf</a></p>



<a name="268031809"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/Digital%20Insurance%20Card/near/268031809" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vitor Pamplona <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/Digital.20Insurance.20Card.html#268031809">(Jan 14 2022 at 15:51)</a>:</h4>
<p>But my comments here are based on the use of our universal verifier, with around 75K stored pictures of COVID QRs from the app in one of our client's databases.</p>



<a name="268063944"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/Digital%20Insurance%20Card/near/268063944" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vitor Pamplona <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/Digital.20Insurance.20Card.html#268063944">(Jan 14 2022 at 19:57)</a>:</h4>
<p>Ok, I played a bit with this Insurance Card payload. Here's a SHC QR (v22 on <code>L</code>) with most of the information from the original JSON. </p>
<p>Changes were: </p>
<ol start="0">
<li>All Plan members were turned into Patients inside the Bundle. This allows for the use of references in the other objects</li>
<li>The organization's contact information should not be on the QR. This is mutable data and the QR should simply have a URL to download the most up-to-date contact information for each one of the purposes listed here. </li>
<li>The logo and color information should not be in the QR. </li>
<li>Instructions in English (due to internationalization issues) and Display names for the codes (which is alredy available from the coding system) were removed. </li>
<li>All extensions should be turned into regular fields. </li>
<li>This is using Brotli compression instead of ZLib, which produces 25% smaller QRs, and will require updating the SHC spec to support another compression algorithm. </li>
</ol>
<p>The final payload looks like this: </p>
<div class="codehilite" data-code-language="JSON"><pre><span></span><code><span class="p">{</span>
  <span class="nt">"type"</span><span class="p">:</span> <span class="p">[</span> <span class="s2">"https://smarthealth.cards#insurance-card"</span> <span class="p">],</span>
  <span class="nt">"credentialSubject"</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">"fhirVersion"</span><span class="p">:</span> <span class="s2">"4.0.1"</span><span class="p">,</span>
    <span class="nt">"fhirBundle"</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">"resourceType"</span><span class="p">:</span> <span class="s2">"Bundle"</span><span class="p">,</span>
      <span class="nt">"entry"</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span> <span class="nt">"resourceType"</span><span class="p">:</span> <span class="s2">"Patient"</span><span class="p">,</span> <span class="nt">"name"</span><span class="p">:</span> <span class="p">[</span> <span class="p">{</span> <span class="nt">"family"</span><span class="p">:</span> <span class="s2">"Doe"</span><span class="p">,</span> <span class="nt">"given"</span><span class="p">:</span> <span class="p">[</span><span class="s2">"John"</span><span class="p">]</span> <span class="p">}</span> <span class="p">],</span> <span class="nt">"id"</span><span class="p">:</span> <span class="s2">"102345672-01"</span><span class="p">},</span>
        <span class="p">{</span> <span class="nt">"resourceType"</span><span class="p">:</span> <span class="s2">"Patient"</span><span class="p">,</span> <span class="nt">"name"</span><span class="p">:</span> <span class="p">[</span> <span class="p">{</span> <span class="nt">"family"</span><span class="p">:</span> <span class="s2">"Doe"</span><span class="p">,</span> <span class="nt">"given"</span><span class="p">:</span> <span class="p">[</span><span class="s2">"Jane"</span><span class="p">]</span> <span class="p">}</span> <span class="p">],</span> <span class="nt">"id"</span><span class="p">:</span> <span class="s2">"102345672-02"</span><span class="p">},</span>
        <span class="p">{</span> <span class="nt">"resourceType"</span><span class="p">:</span> <span class="s2">"Patient"</span><span class="p">,</span> <span class="nt">"name"</span><span class="p">:</span> <span class="p">[</span> <span class="p">{</span> <span class="nt">"family"</span><span class="p">:</span> <span class="s2">"Doe"</span><span class="p">,</span> <span class="nt">"given"</span><span class="p">:</span> <span class="p">[</span><span class="s2">"Jimmy"</span><span class="p">]}</span> <span class="p">],</span> <span class="nt">"id"</span><span class="p">:</span> <span class="s2">"102345672-03"</span><span class="p">},</span>
        <span class="p">{</span> <span class="nt">"resourceType"</span><span class="p">:</span> <span class="s2">"Patient"</span><span class="p">,</span> <span class="nt">"name"</span><span class="p">:</span> <span class="p">[</span> <span class="p">{</span> <span class="nt">"family"</span><span class="p">:</span> <span class="s2">"Doe"</span><span class="p">,</span> <span class="nt">"given"</span><span class="p">:</span> <span class="p">[</span><span class="s2">"Ginny"</span><span class="p">]}</span> <span class="p">],</span> <span class="nt">"id"</span><span class="p">:</span> <span class="s2">"102345672-04"</span><span class="p">},</span>
        <span class="p">{</span>
          <span class="nt">"resourceType"</span><span class="p">:</span> <span class="s2">"Coverage"</span><span class="p">,</span>
          <span class="nt">"id"</span><span class="p">:</span> <span class="s2">"8a01955891bc1c1262d689b616fb6e9e32d268e7a65632ce62ac347263112345"</span><span class="p">,</span>
          <span class="nt">"identifier"</span><span class="p">:</span> <span class="p">[</span> <span class="p">{</span> <span class="nt">"value"</span><span class="p">:</span> <span class="s2">"102345672-02"</span><span class="p">,</span> <span class="nt">"assigner"</span><span class="p">:</span> <span class="p">{</span> <span class="nt">"reference"</span><span class="p">:</span> <span class="s2">"Organization/2222222222"</span> <span class="p">}</span> <span class="p">}</span> <span class="p">],</span>
          <span class="nt">"type"</span><span class="p">:</span> <span class="p">{</span> <span class="nt">"coding"</span><span class="p">:</span> <span class="p">[</span> <span class="p">{</span> <span class="nt">"system"</span><span class="p">:</span> <span class="s2">"http://terminology.hl7.org/CodeSystem/v3-ActCode"</span><span class="p">,</span> <span class="nt">"code"</span><span class="p">:</span> <span class="s2">"HIP"</span> <span class="p">}</span> <span class="p">]</span> <span class="p">},</span>
          <span class="nt">"subscriber"</span><span class="p">:</span> <span class="p">{</span> <span class="nt">"reference"</span><span class="p">:</span> <span class="s2">"Patient/102345672-01"</span> <span class="p">},</span>
          <span class="nt">"beneficiary"</span><span class="p">:</span> <span class="p">{</span> <span class="nt">"reference"</span><span class="p">:</span> <span class="s2">"Patient/102345672-02"</span> <span class="p">},</span>
          <span class="nt">"relationship"</span><span class="p">:</span> <span class="p">{</span> <span class="nt">"coding"</span><span class="p">:</span> <span class="p">[</span> <span class="p">{</span> <span class="nt">"system"</span><span class="p">:</span> <span class="s2">"http://terminology.hl7.org/CodeSystem/subscriber-relationship"</span><span class="p">,</span> <span class="nt">"code"</span><span class="p">:</span> <span class="s2">"spouse"</span> <span class="p">}</span> <span class="p">]</span> <span class="p">},</span>
          <span class="nt">"period"</span><span class="p">:</span> <span class="p">{</span> <span class="nt">"start"</span><span class="p">:</span> <span class="s2">"2021-01-01"</span> <span class="p">},</span>
          <span class="nt">"payor"</span><span class="p">:</span> <span class="p">[</span> <span class="p">{</span> <span class="nt">"reference"</span><span class="p">:</span> <span class="s2">"Organization/2222222222"</span> <span class="p">}</span> <span class="p">],</span>
          <span class="nt">"class"</span><span class="p">:</span> <span class="p">[</span>
            <span class="p">{</span> <span class="nt">"type"</span><span class="p">:</span> <span class="p">{</span> <span class="nt">"coding"</span><span class="p">:</span> <span class="p">[</span> <span class="p">{</span> <span class="nt">"system"</span><span class="p">:</span> <span class="s2">"http://terminology.hl7.org/CodeSystem/coverage-class"</span><span class="p">,</span> <span class="nt">"code"</span><span class="p">:</span> <span class="s2">"group"</span>   <span class="p">}]},</span><span class="nt">"value"</span><span class="p">:</span> <span class="s2">"993355"</span><span class="p">,</span>   <span class="nt">"name"</span><span class="p">:</span> <span class="s2">"Stars Inc"</span><span class="p">},</span>
            <span class="p">{</span> <span class="nt">"type"</span><span class="p">:</span> <span class="p">{</span> <span class="nt">"coding"</span><span class="p">:</span> <span class="p">[</span> <span class="p">{</span> <span class="nt">"system"</span><span class="p">:</span> <span class="s2">"http://terminology.hl7.org/CodeSystem/coverage-class"</span><span class="p">,</span> <span class="nt">"code"</span><span class="p">:</span> <span class="s2">"plan"</span>    <span class="p">}]},</span><span class="nt">"value"</span><span class="p">:</span> <span class="s2">"11461128"</span><span class="p">,</span> <span class="nt">"name"</span><span class="p">:</span> <span class="s2">"Acme Gold Plus"</span><span class="p">},</span>
            <span class="p">{</span> <span class="nt">"type"</span><span class="p">:</span> <span class="p">{</span> <span class="nt">"coding"</span><span class="p">:</span> <span class="p">[</span> <span class="p">{</span> <span class="nt">"system"</span><span class="p">:</span> <span class="s2">"http://terminology.hl7.org/CodeSystem/coverage-class"</span><span class="p">,</span> <span class="nt">"code"</span><span class="p">:</span> <span class="s2">"division"</span><span class="p">}]},</span><span class="nt">"value"</span><span class="p">:</span> <span class="s2">"11"</span><span class="p">},</span>
            <span class="p">{</span> <span class="nt">"type"</span><span class="p">:</span> <span class="p">{</span> <span class="nt">"coding"</span><span class="p">:</span> <span class="p">[</span> <span class="p">{</span> <span class="nt">"system"</span><span class="p">:</span> <span class="s2">"http://terminology.hl7.org/CodeSystem/coverage-class"</span><span class="p">,</span> <span class="nt">"code"</span><span class="p">:</span> <span class="s2">"network"</span> <span class="p">}]},</span><span class="nt">"value"</span><span class="p">:</span> <span class="s2">"561490"</span><span class="p">,</span>   <span class="nt">"name"</span><span class="p">:</span> <span class="s2">"Acme Gold Plus South"</span><span class="p">},</span>
            <span class="p">{</span> <span class="nt">"type"</span><span class="p">:</span> <span class="p">{</span> <span class="nt">"coding"</span><span class="p">:</span> <span class="p">[</span> <span class="p">{</span> <span class="nt">"system"</span><span class="p">:</span> <span class="s2">"http://terminology.hl7.org/CodeSystem/coverage-class"</span><span class="p">,</span> <span class="nt">"code"</span><span class="p">:</span> <span class="s2">"rxbin"</span>   <span class="p">}]},</span><span class="nt">"value"</span><span class="p">:</span> <span class="s2">"100045"</span><span class="p">},</span>
            <span class="p">{</span> <span class="nt">"type"</span><span class="p">:</span> <span class="p">{</span> <span class="nt">"coding"</span><span class="p">:</span> <span class="p">[</span> <span class="p">{</span> <span class="nt">"system"</span><span class="p">:</span> <span class="s2">"http://terminology.hl7.org/CodeSystem/coverage-class"</span><span class="p">,</span> <span class="nt">"code"</span><span class="p">:</span> <span class="s2">"rxpcn"</span>   <span class="p">}]},</span><span class="nt">"value"</span><span class="p">:</span> <span class="s2">"1234000"</span><span class="p">}</span>
          <span class="p">],</span>
          <span class="nt">"costToBeneficiary"</span><span class="p">:</span> <span class="p">[</span>
            <span class="p">{</span> <span class="nt">"type"</span><span class="p">:</span> <span class="p">{</span> <span class="nt">"coding"</span><span class="p">:</span> <span class="p">[</span> <span class="p">{</span> <span class="nt">"system"</span><span class="p">:</span> <span class="s2">"https://hl7.org/fhir/ValueSet/coverage-copay-type"</span><span class="p">,</span> <span class="nt">"code"</span><span class="p">:</span> <span class="s2">"gpvisit"</span>    <span class="p">}]},</span><span class="nt">"valueString"</span><span class="p">:</span> <span class="s2">"N/A"</span> <span class="p">},</span>
            <span class="p">{</span> <span class="nt">"type"</span><span class="p">:</span> <span class="p">{</span> <span class="nt">"coding"</span><span class="p">:</span> <span class="p">[</span> <span class="p">{</span> <span class="nt">"system"</span><span class="p">:</span> <span class="s2">"https://hl7.org/fhir/ValueSet/coverage-copay-type"</span><span class="p">,</span> <span class="nt">"code"</span><span class="p">:</span> <span class="s2">"spvisit"</span>    <span class="p">}]},</span><span class="nt">"valueString"</span><span class="p">:</span> <span class="s2">"N/A"</span> <span class="p">},</span>
            <span class="p">{</span> <span class="nt">"type"</span><span class="p">:</span> <span class="p">{</span> <span class="nt">"coding"</span><span class="p">:</span> <span class="p">[</span> <span class="p">{</span> <span class="nt">"system"</span><span class="p">:</span> <span class="s2">"https://hl7.org/fhir/ValueSet/coverage-copay-type"</span><span class="p">,</span> <span class="nt">"code"</span><span class="p">:</span> <span class="s2">"emergency"</span>  <span class="p">}]},</span><span class="nt">"valueString"</span><span class="p">:</span> <span class="s2">"N/A"</span><span class="p">},</span>
            <span class="p">{</span> <span class="nt">"type"</span><span class="p">:</span> <span class="p">{</span> <span class="nt">"coding"</span><span class="p">:</span> <span class="p">[</span> <span class="p">{</span> <span class="nt">"system"</span><span class="p">:</span> <span class="s2">"https://hl7.org/fhir/ValueSet/coverage-copay-type"</span><span class="p">,</span> <span class="nt">"code"</span><span class="p">:</span> <span class="s2">"urgentcare"</span> <span class="p">}]},</span><span class="nt">"valueString"</span><span class="p">:</span> <span class="s2">"N/A"</span> <span class="p">},</span>
            <span class="p">{</span> <span class="nt">"type"</span><span class="p">:</span> <span class="p">{</span> <span class="nt">"coding"</span><span class="p">:</span> <span class="p">[</span> <span class="p">{</span> <span class="nt">"system"</span><span class="p">:</span> <span class="s2">"https://hl7.org/fhir/ValueSet/coverage-copay-type"</span><span class="p">,</span> <span class="nt">"code"</span><span class="p">:</span> <span class="s2">"rx"</span>         <span class="p">}]},</span><span class="nt">"valueString"</span><span class="p">:</span> <span class="s2">"DED THEN $10/$40/$70/25%"</span><span class="p">},</span>
            <span class="p">{</span> <span class="nt">"type"</span><span class="p">:</span> <span class="p">{</span> <span class="nt">"coding"</span><span class="p">:</span> <span class="p">[</span> <span class="p">{</span> <span class="nt">"system"</span><span class="p">:</span> <span class="s2">"https://hl7.org/fhir/valueset-coverage-copay-type"</span><span class="p">,</span> <span class="nt">"code"</span><span class="p">:</span> <span class="s2">"FamOutDed"</span>  <span class="p">}]},</span><span class="nt">"valueMoney"</span><span class="p">:</span> <span class="p">{</span><span class="nt">"value"</span><span class="p">:</span> <span class="s2">"10000.00"</span><span class="p">,</span> <span class="nt">"currency"</span><span class="p">:</span> <span class="s2">"USD"</span><span class="p">}},</span>
            <span class="p">{</span> <span class="nt">"type"</span><span class="p">:</span> <span class="p">{</span> <span class="nt">"coding"</span><span class="p">:</span> <span class="p">[</span> <span class="p">{</span> <span class="nt">"system"</span><span class="p">:</span> <span class="s2">"https://hl7.org/fhir/valueset-coverage-copay-type"</span><span class="p">,</span> <span class="nt">"code"</span><span class="p">:</span> <span class="s2">"FamInDed"</span>   <span class="p">}]},</span><span class="nt">"valueMoney"</span><span class="p">:</span> <span class="p">{</span><span class="nt">"value"</span><span class="p">:</span>  <span class="s2">"8000.00"</span><span class="p">,</span> <span class="nt">"currency"</span><span class="p">:</span> <span class="s2">"USD"</span><span class="p">}},</span>
            <span class="p">{</span> <span class="nt">"type"</span><span class="p">:</span> <span class="p">{</span> <span class="nt">"coding"</span><span class="p">:</span> <span class="p">[</span> <span class="p">{</span> <span class="nt">"system"</span><span class="p">:</span> <span class="s2">"https://hl7.org/fhir/valueset-coverage-copay-type"</span><span class="p">,</span> <span class="nt">"code"</span><span class="p">:</span> <span class="s2">"FamRxOutDed"</span><span class="p">}]},</span><span class="nt">"valueMoney"</span><span class="p">:</span> <span class="p">{</span><span class="nt">"value"</span><span class="p">:</span>  <span class="s2">"2000.00"</span><span class="p">,</span> <span class="nt">"currency"</span><span class="p">:</span> <span class="s2">"USD"</span><span class="p">}},</span>
            <span class="p">{</span> <span class="nt">"type"</span><span class="p">:</span> <span class="p">{</span> <span class="nt">"coding"</span><span class="p">:</span> <span class="p">[</span> <span class="p">{</span> <span class="nt">"system"</span><span class="p">:</span> <span class="s2">"https://hl7.org/fhir/valueset-coverage-copay-type"</span><span class="p">,</span> <span class="nt">"code"</span><span class="p">:</span> <span class="s2">"FamRxInDed"</span> <span class="p">}]},</span><span class="nt">"valueMoney"</span><span class="p">:</span> <span class="p">{</span><span class="nt">"value"</span><span class="p">:</span>  <span class="s2">"1500.00"</span><span class="p">,</span> <span class="nt">"currency"</span><span class="p">:</span> <span class="s2">"USD"</span><span class="p">}},</span>
            <span class="p">{</span> <span class="nt">"type"</span><span class="p">:</span> <span class="p">{</span> <span class="nt">"coding"</span><span class="p">:</span> <span class="p">[</span> <span class="p">{</span> <span class="nt">"system"</span><span class="p">:</span> <span class="s2">"https://hl7.org/fhir/valueset-coverage-copay-type"</span><span class="p">,</span> <span class="nt">"code"</span><span class="p">:</span> <span class="s2">"FamOutMax"</span>  <span class="p">}]},</span><span class="nt">"valueMoney"</span><span class="p">:</span> <span class="p">{</span><span class="nt">"value"</span><span class="p">:</span> <span class="s2">"12000.00"</span><span class="p">,</span> <span class="nt">"currency"</span><span class="p">:</span> <span class="s2">"USD"</span><span class="p">}},</span>
            <span class="p">{</span> <span class="nt">"type"</span><span class="p">:</span> <span class="p">{</span> <span class="nt">"coding"</span><span class="p">:</span> <span class="p">[</span> <span class="p">{</span> <span class="nt">"system"</span><span class="p">:</span> <span class="s2">"https://hl7.org/fhir/valueset-coverage-copay-type"</span><span class="p">,</span> <span class="nt">"code"</span><span class="p">:</span> <span class="s2">"FamInMax"</span>   <span class="p">}]},</span><span class="nt">"valueMoney"</span><span class="p">:</span> <span class="p">{</span><span class="nt">"value"</span><span class="p">:</span> <span class="s2">"10000.00"</span><span class="p">,</span> <span class="nt">"currency"</span><span class="p">:</span> <span class="s2">"USD"</span><span class="p">}},</span>
            <span class="p">{</span> <span class="nt">"type"</span><span class="p">:</span> <span class="p">{</span> <span class="nt">"coding"</span><span class="p">:</span> <span class="p">[</span> <span class="p">{</span> <span class="nt">"system"</span><span class="p">:</span> <span class="s2">"https://hl7.org/fhir/valueset-coverage-copay-type"</span><span class="p">,</span> <span class="nt">"code"</span><span class="p">:</span> <span class="s2">"FamRxOutMax"</span><span class="p">}]},</span><span class="nt">"valueMoney"</span><span class="p">:</span> <span class="p">{</span><span class="nt">"value"</span><span class="p">:</span>  <span class="s2">"3000.00"</span><span class="p">,</span> <span class="nt">"currency"</span><span class="p">:</span> <span class="s2">"USD"</span><span class="p">}},</span>
            <span class="p">{</span> <span class="nt">"type"</span><span class="p">:</span> <span class="p">{</span> <span class="nt">"coding"</span><span class="p">:</span> <span class="p">[</span> <span class="p">{</span> <span class="nt">"system"</span><span class="p">:</span> <span class="s2">"https://hl7.org/fhir/valueset-coverage-copay-type"</span><span class="p">,</span> <span class="nt">"code"</span><span class="p">:</span> <span class="s2">"FamRxInMax"</span> <span class="p">}]},</span><span class="nt">"valueMoney"</span><span class="p">:</span> <span class="p">{</span><span class="nt">"value"</span><span class="p">:</span>  <span class="s2">"2000.00"</span><span class="p">,</span> <span class="nt">"currency"</span><span class="p">:</span> <span class="s2">"USD"</span><span class="p">}}</span>
          <span class="p">]</span>
        <span class="p">},</span>
        <span class="p">{</span>
          <span class="nt">"resourceType"</span><span class="p">:</span> <span class="s2">"Organization"</span><span class="p">,</span>
          <span class="nt">"id"</span><span class="p">:</span> <span class="s2">"2222222222"</span><span class="p">,</span>
          <span class="nt">"identifier"</span><span class="p">:</span> <span class="p">[{</span><span class="nt">"system"</span><span class="p">:</span> <span class="s2">"http://hl7.org/fhir/us/carin-bb/CodeSystem-C4BBIdentifierType.html"</span><span class="p">,</span><span class="nt">"code"</span><span class="p">:</span> <span class="s2">"payerid"</span><span class="p">,</span><span class="nt">"value"</span><span class="p">:</span> <span class="s2">"45002"</span> <span class="p">}],</span>
          <span class="nt">"name"</span><span class="p">:</span> <span class="s2">"Acme Insurance Co"</span><span class="p">,</span>
          <span class="nt">"contact"</span><span class="p">:</span> <span class="s2">"http://acmeinsurance.com/contactInfo"</span>
        <span class="p">}</span>
      <span class="p">]</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p><a href="/user_uploads/10155/6gm6Zh9RyBwZY9-UZD7YpB81/Screen-Shot-2022-01-14-at-2.43.37-PM.png">Screen-Shot-2022-01-14-at-2.43.37-PM.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/10155/6gm6Zh9RyBwZY9-UZD7YpB81/Screen-Shot-2022-01-14-at-2.43.37-PM.png" title="Screen-Shot-2022-01-14-at-2.43.37-PM.png"><img src="/user_uploads/10155/6gm6Zh9RyBwZY9-UZD7YpB81/Screen-Shot-2022-01-14-at-2.43.37-PM.png"></a></div>



<a name="268065073"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/Digital%20Insurance%20Card/near/268065073" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vitor Pamplona <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/Digital.20Insurance.20Card.html#268065073">(Jan 14 2022 at 20:05)</a>:</h4>
<p>If the group is willing to transfer non FHIR-based payloads in the QR, then the QR size can be further cut in half  for the same payload. As you can see, most of the QR is being occupied by overhead of FHIR. The content itself is quite minimal</p>



<a name="268065820"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/Digital%20Insurance%20Card/near/268065820" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/Digital.20Insurance.20Card.html#268065820">(Jan 14 2022 at 20:11)</a>:</h4>
<p>Neat! I really do appreciate the very concrete suggestions and example here. I should say though:  keep in mind that the changes you're describing would be significant breaking changes to the SHC spec;  FHIR can't turn extensions into regular fields;  FHIR also expects <code>Bundle.entry.fullUrl</code>. And at the end of the day even with these kinds of tweaks we still hit a capacity wall. Yes, overhead of FHIR is significant here; but other approaches require interop compromises or limit the ability to extend the data payloads or introduce new operational compelxity.</p>



<a name="268065959"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/Digital%20Insurance%20Card/near/268065959" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vitor Pamplona <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/Digital.20Insurance.20Card.html#268065959">(Jan 14 2022 at 20:12)</a>:</h4>
<p>Agree. For the new fields, they would need to get those extensions into the usual FHIR process to turn them into fields. I think it is worth doing. They should have been there already.</p>



<a name="268066306"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/Digital%20Insurance%20Card/near/268066306" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/Digital.20Insurance.20Card.html#268066306">(Jan 14 2022 at 20:15)</a>:</h4>
<p>Agree, but for context the "usual FHIR process" will take O(years)</p>



<a name="268066436"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/Digital%20Insurance%20Card/near/268066436" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vitor Pamplona <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/Digital.20Insurance.20Card.html#268066436">(Jan 14 2022 at 20:16)</a>:</h4>
<p>In terms of the non-Fhir Payload,  if a given Profile is "enforced" by the spec (similar to how Immunizations on SHC have a specific /constrict profile), then the extensibility is already compromised. An intermediary StructureMap could serve as a leaner version of the same payload without leaving the "FHIR Realm".</p>



<a name="268066471"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/Digital%20Insurance%20Card/near/268066471" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vitor Pamplona <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/Digital.20Insurance.20Card.html#268066471">(Jan 14 2022 at 20:16)</a>:</h4>
<p>Basically, doing what the EU does. From FHIR to the EU DCC and then Back to FHIR when the verifier loads it.</p>



<a name="268066843"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/Digital%20Insurance%20Card/near/268066843" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vitor Pamplona <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/Digital.20Insurance.20Card.html#268066843">(Jan 14 2022 at 20:19)</a>:</h4>
<p>Brotli compression is something you can add to the SHC spec very quickly. </p>
<div class="codehilite" data-code-language="JavaScript"><pre><span></span><code><span class="k">if</span> <span class="p">(</span><span class="nx">header</span><span class="p">.</span><span class="nx">zip</span> <span class="o">==</span> <span class="s1">'DEF'</span><span class="p">)</span> <span class="p">{</span>
   <span class="c1">// zlib compression/decompression</span>
<span class="p">}</span> <span class="k">else</span>  <span class="k">if</span> <span class="p">(</span><span class="nx">header</span><span class="p">.</span><span class="nx">zip</span> <span class="o">==</span> <span class="s1">'BR'</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// Brotli</span>
<span class="p">}</span>
</code></pre></div>



<a name="268067105"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/Digital%20Insurance%20Card/near/268067105" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/Digital.20Insurance.20Card.html#268067105">(Jan 14 2022 at 20:20)</a>:</h4>
<p>Adding it to the spec is easy, but adding it to every implementation not so much. (We did comparison testing early on with example payloads and chose zlib as a compromise between wide/easy support and perf.)</p>



<a name="268067275"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/Digital%20Insurance%20Card/near/268067275" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/Digital.20Insurance.20Card.html#268067275">(Jan 14 2022 at 20:22)</a>:</h4>
<p>Agreed we may want more flexibily here, but the backwards compatibility story is tricky. Probably would need to introduce a new SHC version, and how does that play out for consumers who just seee a QR?</p>



<a name="268067613"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/Digital%20Insurance%20Card/near/268067613" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vitor Pamplona <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/Digital.20Insurance.20Card.html#268067613">(Jan 14 2022 at 20:25)</a>:</h4>
<p>Verifiers are super used to the idea of certain QRs not working or even straight up crashing the app. Every issuer has a little customization that we need to adapt the code to. So, I wouldn't be that worried about it.</p>



<a name="268068711"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/Digital%20Insurance%20Card/near/268068711" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vitor Pamplona <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/Digital.20Insurance.20Card.html#268068711">(Jan 14 2022 at 20:31)</a>:</h4>
<p>Another way to remove the FHIR Overhead is by using templates. Both CBOR-LD and JSONXT can kill those large field names and system values automatically. If the SHC creates a standardized "Profile" for each card type, the template would just be a coded version of that Profile. It would enforce that certain fields are and are not used and because it knows all possible valid combinations, it can encode most of these common strings into fixed integers, significantly reducing the payload size.</p>



<a name="268081562"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/Digital%20Insurance%20Card/near/268081562" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/Digital.20Insurance.20Card.html#268081562">(Jan 14 2022 at 22:24)</a>:</h4>
<p>Encoding JSON property name strings into fixed integers was helpful but had a surprisingly small effect on payload size when we tested this (&lt;10% on realistic examples if I recall)</p>



<a name="268081632"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/Digital%20Insurance%20Card/near/268081632" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/Digital.20Insurance.20Card.html#268081632">(Jan 14 2022 at 22:25)</a>:</h4>
<p>Profiling everything up front is super powerful but you lose flexibility; at that point, you can throw away FHIR models in the payload altogether (like EU DCC)</p>



<a name="268084653"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/Digital%20Insurance%20Card/near/268084653" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vitor Pamplona <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/Digital.20Insurance.20Card.html#268084653">(Jan 14 2022 at 22:55)</a>:</h4>
<blockquote>
<p>payload size when we tested this (&lt;10% on realistic examples if I recall)</p>
</blockquote>
<p>It depends on how many times field names and values duplicate. Zlib takes care of duplications really well. So, the benefit is bigger when you have extensions, for instance, because each url is different. So, for cases with multiple immunizations of the same manufacturer, the zlib does a good job. CBOR-LD keeps the hierarchy and JSONXT fully removes field names and flattens the JSON out (Basically turning into a CSV file), bringing more gains.</p>



<a name="268084895"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/Digital%20Insurance%20Card/near/268084895" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vitor Pamplona <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/Digital.20Insurance.20Card.html#268084895">(Jan 14 2022 at 22:58)</a>:</h4>
<p>But, for JSONXT to work well, the number of filled fields needs to be bigger than the number of nulls, which makes it horrible to encode the FHIR payloads without a specific Profile.</p>



<a name="268085092"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/284830-smart/health-cards/topic/Digital%20Insurance%20Card/near/268085092" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/284830-smart/health-cards/topic/Digital.20Insurance.20Card.html#268085092">(Jan 14 2022 at 23:00)</a>:</h4>
<blockquote>
<blockquote>
<p>payload size when we tested this (&lt;10% on realistic examples if I recall)</p>
</blockquote>
</blockquote>
<blockquote>
<p>It depends on how many times field names and values duplicate.</p>
</blockquote>
<p>Yes, this is why I specified realistic payloads</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
