---
layout: page
title: "FHIR Chat  · docs / Issue #162 Clarification on datatype of Context an... · cds hooks/github"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179276-cds-hooks/github/index.html">cds hooks/github</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179276-cds-hooks/github/topic/docs.20.2F.20Issue.20.23162.20Clarification.20on.20datatype.20of.20Context.20an.2E.2E.2E.html">docs / Issue #162 Clarification on datatype of Context an...</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153934387"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179276-cds%20hooks/github/topic/docs%20/%20Issue%20%23162%20Clarification%20on%20datatype%20of%20Context%20an.../near/153934387" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Github Notifications <a href="https://fhir.github.io/chat-archive/stream/179276-cds-hooks/github/topic/docs.20.2F.20Issue.20.23162.20Clarification.20on.20datatype.20of.20Context.20an.2E.2E.2E.html#153934387">(Jan 31 2018 at 21:26)</a>:</h4>
<p>mattvarghese opened <a href="https://github.com/cds-hooks/docs/issues/162" target="_blank" title="https://github.com/cds-hooks/docs/issues/162">Issue #162</a></p>
<blockquote>
<p>With clarifying that Context is an object, Context and Prefetch are both similar JSON Objects which have member properties as FHIR objects, and are therefore very much alike, except for Context is defined by the hook and Prefetch by the CDS service. So far, this is great. </p>
<p>However, with moving patient and encounter into Context, this opens a new can of worms. <br>
Now some properties in the Context are string - patient and encounter, whereas others are FHIR objects. <br>
1. Will there be other properties that are not FHIR objects? <br>
2. Will we have properties with a different datatype than string or FHIR object? <br>
3. Will prefetch also contain non FHIR object properties? </p>
<p>It would be great from a CDS-Hooks Client / EMR perspective to have these clarified. </p>
</blockquote>



<a name="153934388"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179276-cds%20hooks/github/topic/docs%20/%20Issue%20%23162%20Clarification%20on%20datatype%20of%20Context%20an.../near/153934388" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Github Notifications <a href="https://fhir.github.io/chat-archive/stream/179276-cds-hooks/github/topic/docs.20.2F.20Issue.20.23162.20Clarification.20on.20datatype.20of.20Context.20an.2E.2E.2E.html#153934388">(Jan 31 2018 at 21:28)</a>:</h4>
<p>mattvarghese edited <a href="https://github.com/cds-hooks/docs/issues/162" target="_blank" title="https://github.com/cds-hooks/docs/issues/162">Issue #162</a></p>
<blockquote>
<p>With clarifying that Context is an object and not an array, Context and Prefetch are both similar JSON Objects which have member properties as FHIR objects, and are therefore very much alike, except for Context is defined by the hook and Prefetch by the CDS service. So far, this is great. </p>
<p>However, with moving patient and encounter into Context, this opens a new can of worms. <br>
Now some properties in the Context are string - patient and encounter, whereas others are FHIR objects. <br>
1. Will there be other properties that are not FHIR objects? <br>
2. Will we have properties with a different datatype than string or FHIR object? <br>
3. Will prefetch also contain non FHIR object properties? </p>
<p>It would be great from a CDS-Hooks Client / EMR perspective to have these clarified. </p>
</blockquote>



<a name="153934395"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179276-cds%20hooks/github/topic/docs%20/%20Issue%20%23162%20Clarification%20on%20datatype%20of%20Context%20an.../near/153934395" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Github Notifications <a href="https://fhir.github.io/chat-archive/stream/179276-cds-hooks/github/topic/docs.20.2F.20Issue.20.23162.20Clarification.20on.20datatype.20of.20Context.20an.2E.2E.2E.html#153934395">(Jan 31 2018 at 21:37)</a>:</h4>
<p>mattvarghese <a href="https://github.com/cds-hooks/docs/issues/162#issuecomment-362078937" target="_blank" title="https://github.com/cds-hooks/docs/issues/162#issuecomment-362078937">commented</a> on <a href="https://github.com/cds-hooks/docs/issues/162" target="_blank" title="https://github.com/cds-hooks/docs/issues/162">Issue #162</a></p>
<blockquote>
<p>Likewise, at the connectathon there were a few different CDS Services that needed the Patient resource as prefetch. But each of these used a different property name for the patient resource. One was just "patient," another was "requestedPatient," and the example in the specification uses "patientToGreet." This does not play nicely with the objective in the spec:</p>
<blockquote>
<p>The EHR may compute an efficient set of prefetch templates from multiple CDS Services, thereby reducing the number of network calls to a minimum</p>
</blockquote>
<p>since to make a consolidated prefetch template, now the patient may need to be included three times under three different names.</p>
<p>How do we resolve this? And should this be also scoped under this issue, or does this merit opening a new issue?</p>
</blockquote>



<a name="153934396"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179276-cds%20hooks/github/topic/docs%20/%20Issue%20%23162%20Clarification%20on%20datatype%20of%20Context%20an.../near/153934396" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Github Notifications <a href="https://fhir.github.io/chat-archive/stream/179276-cds-hooks/github/topic/docs.20.2F.20Issue.20.23162.20Clarification.20on.20datatype.20of.20Context.20an.2E.2E.2E.html#153934396">(Jan 31 2018 at 21:37)</a>:</h4>
<p>jmandel <a href="https://github.com/cds-hooks/docs/issues/162#issuecomment-362078949" target="_blank" title="https://github.com/cds-hooks/docs/issues/162#issuecomment-362078949">commented</a> on <a href="https://github.com/cds-hooks/docs/issues/162" target="_blank" title="https://github.com/cds-hooks/docs/issues/162">Issue #162</a></p>
<blockquote>
<p>Agreed we should clarify — and my preference would be to leave this open, at the CDS Hooks overall specification level, to say that Context values can be any valid JSON datatype (and that specific hooks will provide constraints/guidance on their own Context values).</p>
</blockquote>



<a name="153934415"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179276-cds%20hooks/github/topic/docs%20/%20Issue%20%23162%20Clarification%20on%20datatype%20of%20Context%20an.../near/153934415" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Github Notifications <a href="https://fhir.github.io/chat-archive/stream/179276-cds-hooks/github/topic/docs.20.2F.20Issue.20.23162.20Clarification.20on.20datatype.20of.20Context.20an.2E.2E.2E.html#153934415">(Jan 31 2018 at 22:00)</a>:</h4>
<p>kpshek <a href="https://github.com/cds-hooks/docs/issues/162#issuecomment-362085266" target="_blank" title="https://github.com/cds-hooks/docs/issues/162#issuecomment-362085266">commented</a> on <a href="https://github.com/cds-hooks/docs/issues/162" target="_blank" title="https://github.com/cds-hooks/docs/issues/162">Issue #162</a></p>
<blockquote>
<p>In the specification we do say that the Context values are any valid JSON datatype (emphasis mine):</p>
<p>"Description: The value of the property in the context JSON object, <strong>expressed both as the JSON data type</strong> as well as a functional description of the value. If this value can change according to the FHIR version in use, the description SHOULD describe the value for each supported FHIR version."</p>
<p>If we can make this more clear, I'm open to suggestions.</p>
</blockquote>



<a name="153934416"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179276-cds%20hooks/github/topic/docs%20/%20Issue%20%23162%20Clarification%20on%20datatype%20of%20Context%20an.../near/153934416" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Github Notifications <a href="https://fhir.github.io/chat-archive/stream/179276-cds-hooks/github/topic/docs.20.2F.20Issue.20.23162.20Clarification.20on.20datatype.20of.20Context.20an.2E.2E.2E.html#153934416">(Jan 31 2018 at 22:00)</a>:</h4>
<p>kpshek <a href="https://github.com/cds-hooks/docs/issues/162#issuecomment-362085457" target="_blank" title="https://github.com/cds-hooks/docs/issues/162#issuecomment-362085457">commented</a> on <a href="https://github.com/cds-hooks/docs/issues/162" target="_blank" title="https://github.com/cds-hooks/docs/issues/162">Issue #162</a></p>
<blockquote>
<blockquote>
<p>3. Will prefetch also contain non FHIR object properties?</p>
</blockquote>
<p>IMHO, prefetch should be reserved for FHIR data exclusively (extensions aside)</p>
</blockquote>



<a name="153934647"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179276-cds%20hooks/github/topic/docs%20/%20Issue%20%23162%20Clarification%20on%20datatype%20of%20Context%20an.../near/153934647" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Github Notifications <a href="https://fhir.github.io/chat-archive/stream/179276-cds-hooks/github/topic/docs.20.2F.20Issue.20.23162.20Clarification.20on.20datatype.20of.20Context.20an.2E.2E.2E.html#153934647">(Feb 01 2018 at 16:14)</a>:</h4>
<p>JustinStauffer <a href="https://github.com/cds-hooks/docs/issues/162#issuecomment-362316423" target="_blank" title="https://github.com/cds-hooks/docs/issues/162#issuecomment-362316423">commented</a> on <a href="https://github.com/cds-hooks/docs/issues/162" target="_blank" title="https://github.com/cds-hooks/docs/issues/162">Issue #162</a></p>
<blockquote>
<p>Aren't we really risking the robustness of the specification by allowing _anything_ in the Context element? Isn't there a risk that CDS Hooks services (or clients) will put things in there that maybe shouldn't be or do so in an unorthodox manner that would cause problems with reusability across different servers?</p>
<p>For example, one server could say "I want an array of Encounter IDs in format X" and another server could say "I want an array of Encounter IDs in format Y". Now a client that wants to connect to both servers has to do development to support both when they probably want the same thing and could have done it consistently.</p>
<p>Just feels a little messy to me and like we're kicking the can down the road instead of coming up with smart recommendations now. After all, if someone needs to add something outside the scope of the specification, isn't that what extensions are for?</p>
</blockquote>



<a name="153934838"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179276-cds%20hooks/github/topic/docs%20/%20Issue%20%23162%20Clarification%20on%20datatype%20of%20Context%20an.../near/153934838" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Github Notifications <a href="https://fhir.github.io/chat-archive/stream/179276-cds-hooks/github/topic/docs.20.2F.20Issue.20.23162.20Clarification.20on.20datatype.20of.20Context.20an.2E.2E.2E.html#153934838">(Feb 01 2018 at 21:09)</a>:</h4>
<p>robs16 <a href="https://github.com/cds-hooks/docs/issues/162#issuecomment-362402424" target="_blank" title="https://github.com/cds-hooks/docs/issues/162#issuecomment-362402424">commented</a> on <a href="https://github.com/cds-hooks/docs/issues/162" target="_blank" title="https://github.com/cds-hooks/docs/issues/162">Issue #162</a></p>
<blockquote>
<p>So from my perspective, for approved hooks, prefetch is FHIR only, context is defined per spec and agreed by the community (ie voted on). This should be prescriptive enough to stop format X, format Y issues. </p>
<p>For proprietary hooks, do as both parties agree assuming it doesn't change pre-defined structure defined in the spec - If on my proprietary 270-hook, I want a context to include a X.12 message as a string (or the JSON equivalent) and a prefetch which provides an encoded CDA in a string, I am stretching the structure a bit, but in this case I am using the interaction model of cds hooks, which is useful with or without FHIR. Of course, such a proprietary hook cannot become part of the standard and would require proprietary coding on both sides. </p>
</blockquote>



<a name="153935086"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179276-cds%20hooks/github/topic/docs%20/%20Issue%20%23162%20Clarification%20on%20datatype%20of%20Context%20an.../near/153935086" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Github Notifications <a href="https://fhir.github.io/chat-archive/stream/179276-cds-hooks/github/topic/docs.20.2F.20Issue.20.23162.20Clarification.20on.20datatype.20of.20Context.20an.2E.2E.2E.html#153935086">(Feb 02 2018 at 19:30)</a>:</h4>
<p>mattvarghese <a href="https://github.com/cds-hooks/docs/issues/162#issuecomment-362683133" target="_blank" title="https://github.com/cds-hooks/docs/issues/162#issuecomment-362683133">commented</a> on <a href="https://github.com/cds-hooks/docs/issues/162" target="_blank" title="https://github.com/cds-hooks/docs/issues/162">Issue #162</a></p>
<blockquote>
<p>My way of looking at it is to try to find use cases (standard ones - I am ignoring non-standard hooks for now) for such data of type other than FHIR object in the Context. Can we enumerate some good clinically valid use-cases which will justify us taking the effort?</p>
</blockquote>



<a name="153935097"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179276-cds%20hooks/github/topic/docs%20/%20Issue%20%23162%20Clarification%20on%20datatype%20of%20Context%20an.../near/153935097" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Github Notifications <a href="https://fhir.github.io/chat-archive/stream/179276-cds-hooks/github/topic/docs.20.2F.20Issue.20.23162.20Clarification.20on.20datatype.20of.20Context.20an.2E.2E.2E.html#153935097">(Feb 02 2018 at 20:46)</a>:</h4>
<p>kpshek <a href="https://github.com/cds-hooks/docs/issues/162#issuecomment-362702445" target="_blank" title="https://github.com/cds-hooks/docs/issues/162#issuecomment-362702445">commented</a> on <a href="https://github.com/cds-hooks/docs/issues/162" target="_blank" title="https://github.com/cds-hooks/docs/issues/162">Issue #162</a></p>
<blockquote>
<p>This is great discussion everyone!</p>
<p>@mattvarghese - I agree with @robs16 and think he did provide some good napkin sketches of potential hooks that would make use of non-FHIR data.</p>
<p>The most compelling reason that prefetch leverages FHIR data is because our prefetch template is expressed as a FHIR query path thereby predicating that the result would be FHIR. For context, there is no similar constraint. Additionally, I don't see a reason why context <em>cannot</em> contain any valid JSON datatype. Context is workflow/EHR dependent (we obviously want to align/standardize common hooks like <code>patient-view</code>) and the contextual data may fall outside of FHIR.</p>
<p>I don't feel like we're shirking our responsibilities here. I think defining context as we've done today is prudent and, until we start seeing the hooks defined by the community, we can start promoting concrete best practices. Until we have a far more robust hook catalog, I don't see increasing our initial release scope to embark on an effort to determine such guidelines, recommendations, or best practices nor establish what an official hook registry may contain. In the latter case, we made a conscious design to break the individual hooks out of the specification -- both so that we can add/modify hooks without releasing a new specification version as well as the ability to defer some of these questions which will remain unanswered until we see more hook definitions being prototyped and implemented in production.</p>
<p>In an effort to keep these ideas flowing around hook design best practices, I've started this <a href="https://github.com/cds-hooks/docs/wiki/Hook-Design-Best-Practices" target="_blank" title="https://github.com/cds-hooks/docs/wiki/Hook-Design-Best-Practices">Wiki page</a>. Please feel free to add to it and suggest additional best practices.</p>
</blockquote>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
