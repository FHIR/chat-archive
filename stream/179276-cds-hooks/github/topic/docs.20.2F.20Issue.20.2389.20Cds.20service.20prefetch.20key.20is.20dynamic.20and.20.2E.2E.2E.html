---
layout: page
title: "FHIR Chat  · docs / Issue #89 Cds service prefetch key is dynamic and ... · cds hooks/github"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179276-cds-hooks/github/index.html">cds hooks/github</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179276-cds-hooks/github/topic/docs.20.2F.20Issue.20.2389.20Cds.20service.20prefetch.20key.20is.20dynamic.20and.20.2E.2E.2E.html">docs / Issue #89 Cds service prefetch key is dynamic and ...</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153905582"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179276-cds%20hooks/github/topic/docs%20/%20Issue%20%2389%20Cds%20service%20prefetch%20key%20is%20dynamic%20and%20.../near/153905582" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Github Notifications <a href="https://fhir.github.io/chat-archive/stream/179276-cds-hooks/github/topic/docs.20.2F.20Issue.20.2389.20Cds.20service.20prefetch.20key.20is.20dynamic.20and.20.2E.2E.2E.html#153905582">(Sep 09 2017 at 23:18)</a>:</h4>
<p>isaacvetter opened <a href="https://github.com/cds-hooks/docs/issues/89" target="_blank" title="https://github.com/cds-hooks/docs/issues/89">Issue #89</a></p>
<blockquote>
<p>Here's our sample discovery pre-fetch example:<br>
      "prefetch": {<br>
        "patientToGreet": "Patient/{{Patient.id}}"<br>
      }</p>
<p>By having the cds service define the "patientToGreet" key, serialization of a CDS Hooks request message by the EHR is many programming languages doesn't allow the use of standard serialization tools.</p>
</blockquote>



<a name="153906087"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179276-cds%20hooks/github/topic/docs%20/%20Issue%20%2389%20Cds%20service%20prefetch%20key%20is%20dynamic%20and%20.../near/153906087" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Github Notifications <a href="https://fhir.github.io/chat-archive/stream/179276-cds-hooks/github/topic/docs.20.2F.20Issue.20.2389.20Cds.20service.20prefetch.20key.20is.20dynamic.20and.20.2E.2E.2E.html#153906087">(Sep 11 2017 at 14:10)</a>:</h4>
<p>JustinStauffer <a href="https://github.com/cds-hooks/docs/issues/89#issuecomment-328541079" target="_blank" title="https://github.com/cds-hooks/docs/issues/89#issuecomment-328541079">commented</a> on <a href="https://github.com/cds-hooks/docs/issues/89" target="_blank" title="https://github.com/cds-hooks/docs/issues/89">Issue #89</a></p>
<blockquote>
<p>I brought this concern up to Isaac while investigating CDS Hooks. Having a dynamically named element in the message content essentially means there can be no schema defining the message structure and therefore, you cannot build a code-representation of the message at compile time. That seems like a very big problem to me.</p>
<p>Perhaps you can work around it by creating custom serializers/formatters but that also looks like a big red flag to me. When the solution to a problem with a spec is "Just write a custom _____", that doesn't smell right.</p>
</blockquote>



<a name="153907056"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179276-cds%20hooks/github/topic/docs%20/%20Issue%20%2389%20Cds%20service%20prefetch%20key%20is%20dynamic%20and%20.../near/153907056" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Github Notifications <a href="https://fhir.github.io/chat-archive/stream/179276-cds-hooks/github/topic/docs.20.2F.20Issue.20.2389.20Cds.20service.20prefetch.20key.20is.20dynamic.20and.20.2E.2E.2E.html#153907056">(Sep 12 2017 at 18:18)</a>:</h4>
<p>brynrhodes labeled <a href="https://github.com/cds-hooks/docs/issues/89" target="_blank" title="https://github.com/cds-hooks/docs/issues/89">Issue #89</a></p>



<a name="153907058"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179276-cds%20hooks/github/topic/docs%20/%20Issue%20%2389%20Cds%20service%20prefetch%20key%20is%20dynamic%20and%20.../near/153907058" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Github Notifications <a href="https://fhir.github.io/chat-archive/stream/179276-cds-hooks/github/topic/docs.20.2F.20Issue.20.2389.20Cds.20service.20prefetch.20key.20is.20dynamic.20and.20.2E.2E.2E.html#153907058">(Sep 12 2017 at 18:22)</a>:</h4>
<p>jmandel <a href="https://github.com/cds-hooks/docs/issues/89#issuecomment-328939610" target="_blank" title="https://github.com/cds-hooks/docs/issues/89#issuecomment-328939610">commented</a> on <a href="https://github.com/cds-hooks/docs/issues/89" target="_blank" title="https://github.com/cds-hooks/docs/issues/89">Issue #89</a></p>
<blockquote>
<p>Are you asking for something more like:</p>
<div class="codehilite"><pre><span></span>&quot;prefetch&quot;: [{
  &quot;key&quot;: &quot;patientToGreet&quot;,
  &quot;value&quot;: &quot;Patient/{{Patient.id}}&quot;
}]
</pre></div>


<p>... the same assessment should apply to <code>.context</code> and other places where hook-specific variation may be introduced.</p>
</blockquote>



<a name="153907059"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179276-cds%20hooks/github/topic/docs%20/%20Issue%20%2389%20Cds%20service%20prefetch%20key%20is%20dynamic%20and%20.../near/153907059" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Github Notifications <a href="https://fhir.github.io/chat-archive/stream/179276-cds-hooks/github/topic/docs.20.2F.20Issue.20.2389.20Cds.20service.20prefetch.20key.20is.20dynamic.20and.20.2E.2E.2E.html#153907059">(Sep 12 2017 at 18:23)</a>:</h4>
<p>jmandel edited <a href="https://github.com/cds-hooks/docs/issues/89" target="_blank" title="https://github.com/cds-hooks/docs/issues/89">Issue #89</a></p>
<blockquote>
<p>Here's our sample discovery pre-fetch example:</p>
<div class="codehilite"><pre><span></span>      &quot;prefetch&quot;: {
        &quot;patientToGreet&quot;: &quot;Patient/{{Patient.id}}&quot;
      }
</pre></div>


<p>By having the cds service define the "patientToGreet" key, serialization of a CDS Hooks request message by the EHR is many programming languages doesn't allow the use of standard serialization tools.</p>
</blockquote>



<a name="153907065"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179276-cds%20hooks/github/topic/docs%20/%20Issue%20%2389%20Cds%20service%20prefetch%20key%20is%20dynamic%20and%20.../near/153907065" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Github Notifications <a href="https://fhir.github.io/chat-archive/stream/179276-cds-hooks/github/topic/docs.20.2F.20Issue.20.2389.20Cds.20service.20prefetch.20key.20is.20dynamic.20and.20.2E.2E.2E.html#153907065">(Sep 12 2017 at 18:39)</a>:</h4>
<p>kpshek <a href="https://github.com/cds-hooks/docs/issues/89#issuecomment-328943959" target="_blank" title="https://github.com/cds-hooks/docs/issues/89#issuecomment-328943959">commented</a> on <a href="https://github.com/cds-hooks/docs/issues/89" target="_blank" title="https://github.com/cds-hooks/docs/issues/89">Issue #89</a></p>
<blockquote>
<p>Per discussion at the Sept WGM (Tue Q2), this is something we need to decide if we change prior to the 1.0 release (since it would represent a breaking change).</p>
<p>We want to talk with @JustinStauffer &amp; <span class="user-mention" data-user-email="isaacvetter@gmail.com" data-user-id="558">@Isaac Vetter</span> more on this issue to understand this in further detail.</p>
</blockquote>



<a name="153907066"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179276-cds%20hooks/github/topic/docs%20/%20Issue%20%2389%20Cds%20service%20prefetch%20key%20is%20dynamic%20and%20.../near/153907066" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Github Notifications <a href="https://fhir.github.io/chat-archive/stream/179276-cds-hooks/github/topic/docs.20.2F.20Issue.20.2389.20Cds.20service.20prefetch.20key.20is.20dynamic.20and.20.2E.2E.2E.html#153907066">(Sep 12 2017 at 18:39)</a>:</h4>
<p>kpshek milestoned <a href="https://github.com/cds-hooks/docs/issues/89" target="_blank" title="https://github.com/cds-hooks/docs/issues/89">Issue #89</a></p>



<a name="153907094"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179276-cds%20hooks/github/topic/docs%20/%20Issue%20%2389%20Cds%20service%20prefetch%20key%20is%20dynamic%20and%20.../near/153907094" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Github Notifications <a href="https://fhir.github.io/chat-archive/stream/179276-cds-hooks/github/topic/docs.20.2F.20Issue.20.2389.20Cds.20service.20prefetch.20key.20is.20dynamic.20and.20.2E.2E.2E.html#153907094">(Sep 12 2017 at 19:15)</a>:</h4>
<p>jaredrn <a href="https://github.com/cds-hooks/docs/issues/89#issuecomment-328953681" target="_blank" title="https://github.com/cds-hooks/docs/issues/89#issuecomment-328953681">commented</a> on <a href="https://github.com/cds-hooks/docs/issues/89" target="_blank" title="https://github.com/cds-hooks/docs/issues/89">Issue #89</a></p>
<blockquote>
<p>I would agree that prefetch is a little tricky for a statically typed language like C#.  It can be overcome with a little custom serialization logic to bridge the gap between a JSON parsing library and the C# reference implementation, but it's not entirely intuitive.</p>
</blockquote>



<a name="153907106"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179276-cds%20hooks/github/topic/docs%20/%20Issue%20%2389%20Cds%20service%20prefetch%20key%20is%20dynamic%20and%20.../near/153907106" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Github Notifications <a href="https://fhir.github.io/chat-archive/stream/179276-cds-hooks/github/topic/docs.20.2F.20Issue.20.2389.20Cds.20service.20prefetch.20key.20is.20dynamic.20and.20.2E.2E.2E.html#153907106">(Sep 12 2017 at 20:39)</a>:</h4>
<p>JustinStauffer <a href="https://github.com/cds-hooks/docs/issues/89#issuecomment-328977734" target="_blank" title="https://github.com/cds-hooks/docs/issues/89#issuecomment-328977734">commented</a> on <a href="https://github.com/cds-hooks/docs/issues/89" target="_blank" title="https://github.com/cds-hooks/docs/issues/89">Issue #89</a></p>
<blockquote>
<p>Yes (to Josh / <span class="user-mention" data-user-email="jmandel@gmail.com" data-user-id="9">@Josh Mandel</span>). That would work because the _value_ is dynamic and not the element name.</p>
</blockquote>



<a name="153907108"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179276-cds%20hooks/github/topic/docs%20/%20Issue%20%2389%20Cds%20service%20prefetch%20key%20is%20dynamic%20and%20.../near/153907108" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Github Notifications <a href="https://fhir.github.io/chat-archive/stream/179276-cds-hooks/github/topic/docs.20.2F.20Issue.20.2389.20Cds.20service.20prefetch.20key.20is.20dynamic.20and.20.2E.2E.2E.html#153907108">(Sep 12 2017 at 20:49)</a>:</h4>
<p>grahamegrieve <a href="https://github.com/cds-hooks/docs/issues/89#issuecomment-328980343" target="_blank" title="https://github.com/cds-hooks/docs/issues/89#issuecomment-328980343">commented</a> on <a href="https://github.com/cds-hooks/docs/issues/89" target="_blank" title="https://github.com/cds-hooks/docs/issues/89">Issue #89</a></p>
<blockquote>
<p>I think that there's some mus-understanding here. </p>
<p>"prefetch": [ "patientToGreet", "value": "Patient/{{Patient.id}}" ]</p>
<p>this is easy to serialise natively - if you have a definition for <em>this specific hook</em>. </p>
</blockquote>



<a name="153907109"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179276-cds%20hooks/github/topic/docs%20/%20Issue%20%2389%20Cds%20service%20prefetch%20key%20is%20dynamic%20and%20.../near/153907109" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Github Notifications <a href="https://fhir.github.io/chat-archive/stream/179276-cds-hooks/github/topic/docs.20.2F.20Issue.20.2389.20Cds.20service.20prefetch.20key.20is.20dynamic.20and.20.2E.2E.2E.html#153907109">(Sep 12 2017 at 20:52)</a>:</h4>
<p>JustinStauffer <a href="https://github.com/cds-hooks/docs/issues/89#issuecomment-328980919" target="_blank" title="https://github.com/cds-hooks/docs/issues/89#issuecomment-328980919">commented</a> on <a href="https://github.com/cds-hooks/docs/issues/89" target="_blank" title="https://github.com/cds-hooks/docs/issues/89">Issue #89</a></p>
<blockquote>
<p>@grahamegrieve - Yes but if you want to create a generic framework to handle many hooks, this would become unscalable.</p>
</blockquote>



<a name="153907115"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179276-cds%20hooks/github/topic/docs%20/%20Issue%20%2389%20Cds%20service%20prefetch%20key%20is%20dynamic%20and%20.../near/153907115" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Github Notifications <a href="https://fhir.github.io/chat-archive/stream/179276-cds-hooks/github/topic/docs.20.2F.20Issue.20.2389.20Cds.20service.20prefetch.20key.20is.20dynamic.20and.20.2E.2E.2E.html#153907115">(Sep 12 2017 at 21:05)</a>:</h4>
<p>grahamegrieve <a href="https://github.com/cds-hooks/docs/issues/89#issuecomment-328984171" target="_blank" title="https://github.com/cds-hooks/docs/issues/89#issuecomment-328984171">commented</a> on <a href="https://github.com/cds-hooks/docs/issues/89" target="_blank" title="https://github.com/cds-hooks/docs/issues/89">Issue #89</a></p>
<blockquote>
<p>Yes. so you trade between various optimisation here. you can make it so that the generic format is a hard schema that's simple to write with OTS schema tools, but the consequence of this is that it's now equally hard to do it by schema the other way. For me, this is a bad idea - servers that handle many hooks should pay the price, not clients that handle single hooks</p>
</blockquote>



<a name="153907116"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179276-cds%20hooks/github/topic/docs%20/%20Issue%20%2389%20Cds%20service%20prefetch%20key%20is%20dynamic%20and%20.../near/153907116" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Github Notifications <a href="https://fhir.github.io/chat-archive/stream/179276-cds-hooks/github/topic/docs.20.2F.20Issue.20.2389.20Cds.20service.20prefetch.20key.20is.20dynamic.20and.20.2E.2E.2E.html#153907116">(Sep 12 2017 at 21:06)</a>:</h4>
<p>jmandel <a href="https://github.com/cds-hooks/docs/issues/89#issuecomment-328984559" target="_blank" title="https://github.com/cds-hooks/docs/issues/89#issuecomment-328984559">commented</a> on <a href="https://github.com/cds-hooks/docs/issues/89" target="_blank" title="https://github.com/cds-hooks/docs/issues/89">Issue #89</a></p>
<blockquote>
<p>+1 to @grahamegrieve's assessment here.</p>
</blockquote>



<a name="153907118"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179276-cds%20hooks/github/topic/docs%20/%20Issue%20%2389%20Cds%20service%20prefetch%20key%20is%20dynamic%20and%20.../near/153907118" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Github Notifications <a href="https://fhir.github.io/chat-archive/stream/179276-cds-hooks/github/topic/docs.20.2F.20Issue.20.2389.20Cds.20service.20prefetch.20key.20is.20dynamic.20and.20.2E.2E.2E.html#153907118">(Sep 12 2017 at 21:11)</a>:</h4>
<p>JustinStauffer <a href="https://github.com/cds-hooks/docs/issues/89#issuecomment-328985564" target="_blank" title="https://github.com/cds-hooks/docs/issues/89#issuecomment-328985564">commented</a> on <a href="https://github.com/cds-hooks/docs/issues/89" target="_blank" title="https://github.com/cds-hooks/docs/issues/89">Issue #89</a></p>
<blockquote>
<p>I'm not following what you mean by "it's now equally hard to do it by schema the other way". Also, I'm looking at this from the perspective of a client that may want to call many different servers. Or perhaps more accurately, many instances of a client spread across the world invoking different servers at each instance. If customer A wants to connect to CDS Hooks server A that supports prefetch/patientToGreet but then customer B wants to connect to CDS Hooks server B that supports prefetch/patientToSmileAt, I need to write two clients for them. What happens if customer A wants to connect to CDS Hooks servers A, B, C, D, etc. who all do it differently? That's unscalable.</p>
</blockquote>



<a name="153907120"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179276-cds%20hooks/github/topic/docs%20/%20Issue%20%2389%20Cds%20service%20prefetch%20key%20is%20dynamic%20and%20.../near/153907120" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Github Notifications <a href="https://fhir.github.io/chat-archive/stream/179276-cds-hooks/github/topic/docs.20.2F.20Issue.20.2389.20Cds.20service.20prefetch.20key.20is.20dynamic.20and.20.2E.2E.2E.html#153907120">(Sep 12 2017 at 21:16)</a>:</h4>
<p>kensaku-kawamoto <a href="https://github.com/cds-hooks/docs/issues/89#issuecomment-328986898" target="_blank" title="https://github.com/cds-hooks/docs/issues/89#issuecomment-328986898">commented</a> on <a href="https://github.com/cds-hooks/docs/issues/89" target="_blank" title="https://github.com/cds-hooks/docs/issues/89">Issue #89</a></p>
<blockquote>
<p>I would +1 the thoughts from @JustinStauffer</p>
</blockquote>



<a name="153907124"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179276-cds%20hooks/github/topic/docs%20/%20Issue%20%2389%20Cds%20service%20prefetch%20key%20is%20dynamic%20and%20.../near/153907124" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Github Notifications <a href="https://fhir.github.io/chat-archive/stream/179276-cds-hooks/github/topic/docs.20.2F.20Issue.20.2389.20Cds.20service.20prefetch.20key.20is.20dynamic.20and.20.2E.2E.2E.html#153907124">(Sep 12 2017 at 21:22)</a>:</h4>
<p>JustinStauffer <a href="https://github.com/cds-hooks/docs/issues/89#issuecomment-328988218" target="_blank" title="https://github.com/cds-hooks/docs/issues/89#issuecomment-328988218">commented</a> on <a href="https://github.com/cds-hooks/docs/issues/89" target="_blank" title="https://github.com/cds-hooks/docs/issues/89">Issue #89</a></p>
<blockquote>
<p>As a compromise, I'd be fine with either approach as long as the list of choices for that element name were defined in a finite list. Honestly, I think that is my bigger issue. This could be _anything_. There's nowhere else in an industry standard that I'm aware of where an element in a message can be named _anything_. It's actually an ugly piece of ebXML/IHE that has the generic Slot structure.</p>
<p>So if we had a well defined list of options (like a FHIR resource container), that'd be fine by me.</p>
</blockquote>



<a name="153907134"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179276-cds%20hooks/github/topic/docs%20/%20Issue%20%2389%20Cds%20service%20prefetch%20key%20is%20dynamic%20and%20.../near/153907134" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Github Notifications <a href="https://fhir.github.io/chat-archive/stream/179276-cds-hooks/github/topic/docs.20.2F.20Issue.20.2389.20Cds.20service.20prefetch.20key.20is.20dynamic.20and.20.2E.2E.2E.html#153907134">(Sep 12 2017 at 21:28)</a>:</h4>
<p>jmandel <a href="https://github.com/cds-hooks/docs/issues/89#issuecomment-328989705" target="_blank" title="https://github.com/cds-hooks/docs/issues/89#issuecomment-328989705">commented</a> on <a href="https://github.com/cds-hooks/docs/issues/89" target="_blank" title="https://github.com/cds-hooks/docs/issues/89">Issue #89</a></p>
<blockquote>
<p>In general, the job of <code>prefetch</code> is to support ad-hoc, client-specific requirements. So we won't be able to enumerate a finite list of what these should be called.</p>
</blockquote>



<a name="153907140"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179276-cds%20hooks/github/topic/docs%20/%20Issue%20%2389%20Cds%20service%20prefetch%20key%20is%20dynamic%20and%20.../near/153907140" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Github Notifications <a href="https://fhir.github.io/chat-archive/stream/179276-cds-hooks/github/topic/docs.20.2F.20Issue.20.2389.20Cds.20service.20prefetch.20key.20is.20dynamic.20and.20.2E.2E.2E.html#153907140">(Sep 12 2017 at 21:32)</a>:</h4>
<p>JustinStauffer <a href="https://github.com/cds-hooks/docs/issues/89#issuecomment-328990548" target="_blank" title="https://github.com/cds-hooks/docs/issues/89#issuecomment-328990548">commented</a> on <a href="https://github.com/cds-hooks/docs/issues/89" target="_blank" title="https://github.com/cds-hooks/docs/issues/89">Issue #89</a></p>
<blockquote>
<p>Then the ad-hoc portion of it needs to be part of dynamic _content_ -- not part of message structure itself. (for the reasons I mentioned above).</p>
</blockquote>



<a name="153907158"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179276-cds%20hooks/github/topic/docs%20/%20Issue%20%2389%20Cds%20service%20prefetch%20key%20is%20dynamic%20and%20.../near/153907158" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Github Notifications <a href="https://fhir.github.io/chat-archive/stream/179276-cds-hooks/github/topic/docs.20.2F.20Issue.20.2389.20Cds.20service.20prefetch.20key.20is.20dynamic.20and.20.2E.2E.2E.html#153907158">(Sep 12 2017 at 21:43)</a>:</h4>
<p>jmandel <a href="https://github.com/cds-hooks/docs/issues/89#issuecomment-328993038" target="_blank" title="https://github.com/cds-hooks/docs/issues/89#issuecomment-328993038">commented</a> on <a href="https://github.com/cds-hooks/docs/issues/89" target="_blank" title="https://github.com/cds-hooks/docs/issues/89">Issue #89</a></p>
<blockquote>
<p>I think the distinction between "content" and "message structure" is not so stark. In any case, "<em>needs</em>" is a bit strong (after all, that's the subject of discussion here :-))</p>
</blockquote>



<a name="153907275"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179276-cds%20hooks/github/topic/docs%20/%20Issue%20%2389%20Cds%20service%20prefetch%20key%20is%20dynamic%20and%20.../near/153907275" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Github Notifications <a href="https://fhir.github.io/chat-archive/stream/179276-cds-hooks/github/topic/docs.20.2F.20Issue.20.2389.20Cds.20service.20prefetch.20key.20is.20dynamic.20and.20.2E.2E.2E.html#153907275">(Sep 13 2017 at 02:50)</a>:</h4>
<p>kensaku-kawamoto <a href="https://github.com/cds-hooks/docs/issues/89#issuecomment-329042340" target="_blank" title="https://github.com/cds-hooks/docs/issues/89#issuecomment-329042340">commented</a> on <a href="https://github.com/cds-hooks/docs/issues/89" target="_blank" title="https://github.com/cds-hooks/docs/issues/89">Issue #89</a></p>
<blockquote>
<p>This is probably pretty obvious -- but is there a reason why there needs to be name(s) associated with the data asked for in a prefetch in any case?</p>
</blockquote>



<a name="153907280"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179276-cds%20hooks/github/topic/docs%20/%20Issue%20%2389%20Cds%20service%20prefetch%20key%20is%20dynamic%20and%20.../near/153907280" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Github Notifications <a href="https://fhir.github.io/chat-archive/stream/179276-cds-hooks/github/topic/docs.20.2F.20Issue.20.2389.20Cds.20service.20prefetch.20key.20is.20dynamic.20and.20.2E.2E.2E.html#153907280">(Sep 13 2017 at 03:47)</a>:</h4>
<p>olbrich <a href="https://github.com/cds-hooks/docs/issues/89#issuecomment-329050988" target="_blank" title="https://github.com/cds-hooks/docs/issues/89#issuecomment-329050988">commented</a> on <a href="https://github.com/cds-hooks/docs/issues/89" target="_blank" title="https://github.com/cds-hooks/docs/issues/89">Issue #89</a></p>
<blockquote>
<p>I'll just re-iterate my comment from the connectathon.  It seems like a bad idea to me to allow the structure of the message to be dictated by implementation details of the underlying languages.  There are systems that are quite capable of handling the originally proposed structure with little modification.  Making the proposed change will undoubtedly inconvenience those developers.  </p>
<p>Another option might be to package the prefetch data as a Bundle (of type 'collection') and give each <code>entry</code> an id in a cds-hooks specific code system so the CDS service can easily determine which one is which.</p>
</blockquote>



<a name="153907385"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179276-cds%20hooks/github/topic/docs%20/%20Issue%20%2389%20Cds%20service%20prefetch%20key%20is%20dynamic%20and%20.../near/153907385" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Github Notifications <a href="https://fhir.github.io/chat-archive/stream/179276-cds-hooks/github/topic/docs.20.2F.20Issue.20.2389.20Cds.20service.20prefetch.20key.20is.20dynamic.20and.20.2E.2E.2E.html#153907385">(Sep 13 2017 at 13:56)</a>:</h4>
<p>JustinStauffer <a href="https://github.com/cds-hooks/docs/issues/89#issuecomment-329175609" target="_blank" title="https://github.com/cds-hooks/docs/issues/89#issuecomment-329175609">commented</a> on <a href="https://github.com/cds-hooks/docs/issues/89" target="_blank" title="https://github.com/cds-hooks/docs/issues/89">Issue #89</a></p>
<blockquote>
<p>Does anyone have examples of other healthcare interoperability standards where an element name in a message is variable?</p>
<p>FHIR does not do this as far as I'm aware. The closest thing I know of is the ResourceContainer that can contain any type of resource. However, those resource types are finite and defined at "design time" so that type is represented in schema as a choice element. How would you represent the current approach in a schema? Do we not care about this?</p>
<p>@olbrich , yes anyone can handle this with modification with some programming (what problem cannot be solved with programming?). However, I'm pretty sure one of the goals of FHIR (and presumably, CDS Hooks too) is to lower the implementation barrier versus prior standards (e.g. HL7v3). By requiring people to customize off-the-shelf functionality provided in well-known programming libraries, we're raising a barrier to implementation and then we need to ask ourselves what we're really trying to do here...</p>
<p>Also, other than "This is the way it has been proposed and that's how I already wrote my system based on a draft specification", I have seen no argument for why the current approach is better than a key/value pair as Josh replied with above. Perhaps Grahame could clarify what he meant by "it's now equally hard to do it by schema the other way" as I don't understand what he means by that.</p>
</blockquote>



<a name="153911908"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179276-cds%20hooks/github/topic/docs%20/%20Issue%20%2389%20Cds%20service%20prefetch%20key%20is%20dynamic%20and%20.../near/153911908" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Github Notifications <a href="https://fhir.github.io/chat-archive/stream/179276-cds-hooks/github/topic/docs.20.2F.20Issue.20.2389.20Cds.20service.20prefetch.20key.20is.20dynamic.20and.20.2E.2E.2E.html#153911908">(Oct 02 2017 at 21:15)</a>:</h4>
<p>isaacvetter assigned <a href="https://github.com/cds-hooks/docs/issues/89" target="_blank" title="https://github.com/cds-hooks/docs/issues/89">Issue #89</a></p>



<a name="153912071"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179276-cds%20hooks/github/topic/docs%20/%20Issue%20%2389%20Cds%20service%20prefetch%20key%20is%20dynamic%20and%20.../near/153912071" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Github Notifications <a href="https://fhir.github.io/chat-archive/stream/179276-cds-hooks/github/topic/docs.20.2F.20Issue.20.2389.20Cds.20service.20prefetch.20key.20is.20dynamic.20and.20.2E.2E.2E.html#153912071">(Oct 03 2017 at 14:18)</a>:</h4>
<p>JustinStauffer <a href="https://github.com/cds-hooks/docs/issues/89#issuecomment-333856591" target="_blank" title="https://github.com/cds-hooks/docs/issues/89#issuecomment-333856591">commented</a> on <a href="https://github.com/cds-hooks/docs/issues/89" target="_blank" title="https://github.com/cds-hooks/docs/issues/89">Issue #89</a></p>
<blockquote>
<p>Note that the CDS service response handles this issue just fine in via the Action type. This is used in cards/suggestions/actions.</p>
<p>The structure of Action is:<br>
- type - Type of action being performed: create, update, delete<br>
- resource - The associated resource info</p>
<p>Prefetch could work the same way by using the exact same type. This way, the element name wouldn't be variable -- the value of the "type" field would be variable.</p>
<p><code>"prefetch": {
      "action": {
           "type": "patientToGreet",
           "description": "This is the patient to greet when they arrive."
           "resource": {
                 "resourceType": "Patient",
                 "gender": "male",
                  ... etc ...</code></p>
</blockquote>



<a name="153920830"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179276-cds%20hooks/github/topic/docs%20/%20Issue%20%2389%20Cds%20service%20prefetch%20key%20is%20dynamic%20and%20.../near/153920830" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Github Notifications <a href="https://fhir.github.io/chat-archive/stream/179276-cds-hooks/github/topic/docs.20.2F.20Issue.20.2389.20Cds.20service.20prefetch.20key.20is.20dynamic.20and.20.2E.2E.2E.html#153920830">(Nov 21 2017 at 22:34)</a>:</h4>
<p>isaacvetter <a href="https://github.com/cds-hooks/docs/issues/89#issuecomment-346183559" target="_blank" title="https://github.com/cds-hooks/docs/issues/89#issuecomment-346183559">commented</a> on <a href="https://github.com/cds-hooks/docs/issues/89" target="_blank" title="https://github.com/cds-hooks/docs/issues/89">Issue #89</a></p>
<blockquote>
<p>Ultimately, yes, serialization is harder because of this format. It's not impossible. This issue is the only feedback that CDS Hooks has received around this issue. </p>
<p>I think that @grahamegrieve 's point is ultimately persuasive: </p>
<blockquote>
<p>Yes. so you trade between various optimisation here. you can make it so that the generic format is a hard schema that's simple to write with OTS schema tools, but the consequence of this is that it's now equally hard to do it by schema the other way. For me, this is a bad idea - servers that handle many hooks should pay the price, not clients that handle single hooks</p>
</blockquote>
<p>Closing.</p>
</blockquote>



<a name="153920831"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179276-cds%20hooks/github/topic/docs%20/%20Issue%20%2389%20Cds%20service%20prefetch%20key%20is%20dynamic%20and%20.../near/153920831" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Github Notifications <a href="https://fhir.github.io/chat-archive/stream/179276-cds-hooks/github/topic/docs.20.2F.20Issue.20.2389.20Cds.20service.20prefetch.20key.20is.20dynamic.20and.20.2E.2E.2E.html#153920831">(Nov 21 2017 at 22:34)</a>:</h4>
<p>isaacvetter closed <a href="https://github.com/cds-hooks/docs/issues/89" target="_blank" title="https://github.com/cds-hooks/docs/issues/89">Issue #89</a></p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
