---
layout: page
title: "FHIR Chat  · docs / Issue #154 Hook Versioning · cds hooks/github"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179276-cds-hooks/github/index.html">cds hooks/github</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179276-cds-hooks/github/topic/docs.20.2F.20Issue.20.23154.20Hook.20Versioning.html">docs / Issue #154 Hook Versioning</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153932017"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179276-cds%20hooks/github/topic/docs%20/%20Issue%20%23154%20Hook%20Versioning/near/153932017" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Github Notifications <a href="https://fhir.github.io/chat-archive/stream/179276-cds-hooks/github/topic/docs.20.2F.20Issue.20.23154.20Hook.20Versioning.html#153932017">(Jan 28 2018 at 17:34)</a>:</h4>
<p>AlexTatiyants opened <a href="https://github.com/cds-hooks/docs/issues/154" target="_blank" title="https://github.com/cds-hooks/docs/issues/154">Issue #154</a></p>
<blockquote>
<p>Given that hook definitions are independent from the overall specification, is there a need to version them individually? So, for instance, one can talk about using <code>CDS Hooks V1.0</code> along with <code>order-review v1.2</code> hook.</p>
<p>As to what specific changes will require versioning hooks, I'm primarily concerned with changes to the hook context.</p>
<p>cc @kpshek </p>
</blockquote>



<a name="153932290"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179276-cds%20hooks/github/topic/docs%20/%20Issue%20%23154%20Hook%20Versioning/near/153932290" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Github Notifications <a href="https://fhir.github.io/chat-archive/stream/179276-cds-hooks/github/topic/docs.20.2F.20Issue.20.23154.20Hook.20Versioning.html#153932290">(Jan 28 2018 at 20:59)</a>:</h4>
<p>kpshek milestoned <a href="https://github.com/cds-hooks/docs/issues/154" target="_blank" title="https://github.com/cds-hooks/docs/issues/154">Issue #154</a></p>



<a name="153933088"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179276-cds%20hooks/github/topic/docs%20/%20Issue%20%23154%20Hook%20Versioning/near/153933088" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Github Notifications <a href="https://fhir.github.io/chat-archive/stream/179276-cds-hooks/github/topic/docs.20.2F.20Issue.20.23154.20Hook.20Versioning.html#153933088">(Jan 29 2018 at 20:52)</a>:</h4>
<p>olbrich <a href="https://github.com/cds-hooks/docs/issues/154#issuecomment-361382300" target="_blank" title="https://github.com/cds-hooks/docs/issues/154#issuecomment-361382300">commented</a> on <a href="https://github.com/cds-hooks/docs/issues/154" target="_blank" title="https://github.com/cds-hooks/docs/issues/154">Issue #154</a></p>
<blockquote>
<p>Perhaps the core defined hooks can be defined as part of the standard, so you can only refer to <code>cds-hooks v1.0 patient-view</code>.  Custom ones that deviate from the standard ones can use the url naming convention.</p>
</blockquote>



<a name="153933164"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179276-cds%20hooks/github/topic/docs%20/%20Issue%20%23154%20Hook%20Versioning/near/153933164" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Github Notifications <a href="https://fhir.github.io/chat-archive/stream/179276-cds-hooks/github/topic/docs.20.2F.20Issue.20.23154.20Hook.20Versioning.html#153933164">(Jan 30 2018 at 00:00)</a>:</h4>
<p>bvdh <a href="https://github.com/cds-hooks/docs/issues/154#issuecomment-361429049" target="_blank" title="https://github.com/cds-hooks/docs/issues/154#issuecomment-361429049">commented</a> on <a href="https://github.com/cds-hooks/docs/issues/154" target="_blank" title="https://github.com/cds-hooks/docs/issues/154">Issue #154</a></p>
<blockquote>
<p>I totally agree, versioning hooks is a good idea. I would not make a distinction between what hooks to version and which not. Also the core-hooks can have changes.</p>
</blockquote>



<a name="153939400"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179276-cds%20hooks/github/topic/docs%20/%20Issue%20%23154%20Hook%20Versioning/near/153939400" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Github Notifications <a href="https://fhir.github.io/chat-archive/stream/179276-cds-hooks/github/topic/docs.20.2F.20Issue.20.23154.20Hook.20Versioning.html#153939400">(Feb 21 2018 at 16:46)</a>:</h4>
<p>isaacvetter assigned <a href="https://github.com/cds-hooks/docs/issues/154" target="_blank" title="https://github.com/cds-hooks/docs/issues/154">Issue #154</a></p>



<a name="153944655"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179276-cds%20hooks/github/topic/docs%20/%20Issue%20%23154%20Hook%20Versioning/near/153944655" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Github Notifications <a href="https://fhir.github.io/chat-archive/stream/179276-cds-hooks/github/topic/docs.20.2F.20Issue.20.23154.20Hook.20Versioning.html#153944655">(Mar 14 2018 at 04:33)</a>:</h4>
<p>abrooke <a href="https://github.com/cds-hooks/docs/issues/154#issuecomment-372901604" target="_blank" title="https://github.com/cds-hooks/docs/issues/154#issuecomment-372901604">commented</a> on <a href="https://github.com/cds-hooks/docs/issues/154" target="_blank" title="https://github.com/cds-hooks/docs/issues/154">Issue #154</a></p>
<blockquote>
<p>A new version property can be added to the CDS Service objects returned from the  discovery endpoint, the version attribute would be located at the following JSONPath:</p>
<div class="codehilite"><pre><span></span>$.services[*].version
</pre></div>


<p>The version attribute would be an array of objects, where each object would indicate version compatibility of a CDS service. An example of the version compatibility object would be:</p>
<div class="codehilite"><pre><span></span><span class="p">{</span>
   <span class="nt">&quot;cds&quot;</span><span class="p">:</span><span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
   <span class="nt">&quot;hook&quot;</span><span class="p">:</span><span class="s2">&quot;1.2&quot;</span>
<span class="p">}</span>
</pre></div>


<p>The above version means that the specific CDS Service object has attributes according to CDS Hooks version 1.0 and prefetch specification compatible with hook version 1.2.  A complete CDS Services object example returned from the discovery endpoint is as follows:</p>
<div class="codehilite"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;services&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nt">&quot;hook&quot;</span><span class="p">:</span> <span class="s2">&quot;patient-view&quot;</span><span class="p">,</span>
      <span class="nt">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;Static CDS Service Example&quot;</span><span class="p">,</span>
      <span class="nt">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;An example of a CDS Service that returns a static set of cards&quot;</span><span class="p">,</span>
      <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;static-patient-greeter&quot;</span><span class="p">,</span>
      <span class="nt">&quot;prefetch&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;patientToGreet&quot;</span><span class="p">:</span> <span class="s2">&quot;Patient/{{Patient.id}}&quot;</span>
      <span class="p">},</span>
      <span class="nt">&quot;version&quot;</span> <span class="p">:</span> <span class="p">[</span> <span class="p">{</span> <span class="nt">&quot;cds&quot;</span><span class="p">:</span><span class="s2">&quot;1.0&quot;</span><span class="p">,</span><span class="nt">&quot;hook&quot;</span><span class="p">:</span><span class="s2">&quot;1.2&quot;</span> <span class="p">}</span> <span class="p">]</span>
    <span class="p">}]</span>
<span class="p">}</span>
</pre></div>


<p>The above CDS Service would be compatible with CDS Hooks version 1.0 and patient-view hook version 1.2 (with a prefetch that potentially made use of the context specification for patient-view version 1.2).</p>
</blockquote>



<a name="153944695"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179276-cds%20hooks/github/topic/docs%20/%20Issue%20%23154%20Hook%20Versioning/near/153944695" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Github Notifications <a href="https://fhir.github.io/chat-archive/stream/179276-cds-hooks/github/topic/docs.20.2F.20Issue.20.23154.20Hook.20Versioning.html#153944695">(Mar 14 2018 at 07:41)</a>:</h4>
<p>rongchen <a href="https://github.com/cds-hooks/docs/issues/154#issuecomment-372931111" target="_blank" title="https://github.com/cds-hooks/docs/issues/154#issuecomment-372931111">commented</a> on <a href="https://github.com/cds-hooks/docs/issues/154" target="_blank" title="https://github.com/cds-hooks/docs/issues/154">Issue #154</a></p>
<blockquote>
<p>Versioning of individual services (hooks) are necessary. We include version information in the URL.</p>
</blockquote>



<a name="153946870"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179276-cds%20hooks/github/topic/docs%20/%20Issue%20%23154%20Hook%20Versioning/near/153946870" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Github Notifications <a href="https://fhir.github.io/chat-archive/stream/179276-cds-hooks/github/topic/docs.20.2F.20Issue.20.23154.20Hook.20Versioning.html#153946870">(Mar 21 2018 at 15:48)</a>:</h4>
<p>kpshek <a href="https://github.com/cds-hooks/docs/issues/154#issuecomment-374987767" target="_blank" title="https://github.com/cds-hooks/docs/issues/154#issuecomment-374987767">commented</a> on <a href="https://github.com/cds-hooks/docs/issues/154" target="_blank" title="https://github.com/cds-hooks/docs/issues/154">Issue #154</a></p>
<blockquote>
<p>@rongchen - This issue is discussing the version of the hook definition, not the version of your CDS Service.</p>
</blockquote>



<a name="153946891"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179276-cds%20hooks/github/topic/docs%20/%20Issue%20%23154%20Hook%20Versioning/near/153946891" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Github Notifications <a href="https://fhir.github.io/chat-archive/stream/179276-cds-hooks/github/topic/docs.20.2F.20Issue.20.23154.20Hook.20Versioning.html#153946891">(Mar 21 2018 at 17:37)</a>:</h4>
<p>bkaney <a href="https://github.com/cds-hooks/docs/issues/154#issuecomment-375031921" target="_blank" title="https://github.com/cds-hooks/docs/issues/154#issuecomment-375031921">commented</a> on <a href="https://github.com/cds-hooks/docs/issues/154" target="_blank" title="https://github.com/cds-hooks/docs/issues/154">Issue #154</a></p>
<blockquote>
<p>FYI -- This is a duplicate of the issue I opened: <a href="https://github.com/cds-hooks/docs/issues/74" target="_blank" title="https://github.com/cds-hooks/docs/issues/74">https://github.com/cds-hooks/docs/issues/74</a></p>
</blockquote>



<a name="153946892"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179276-cds%20hooks/github/topic/docs%20/%20Issue%20%23154%20Hook%20Versioning/near/153946892" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Github Notifications <a href="https://fhir.github.io/chat-archive/stream/179276-cds-hooks/github/topic/docs.20.2F.20Issue.20.23154.20Hook.20Versioning.html#153946892">(Mar 21 2018 at 17:42)</a>:</h4>
<p>brynrhodes <a href="https://github.com/cds-hooks/docs/issues/154#issuecomment-375033532" target="_blank" title="https://github.com/cds-hooks/docs/issues/154#issuecomment-375033532">commented</a> on <a href="https://github.com/cds-hooks/docs/issues/154" target="_blank" title="https://github.com/cds-hooks/docs/issues/154">Issue #154</a></p>
<blockquote>
<p>@bkaney, looking at #74, that's talking about services, right? This issue is talking about the version of the hook definition, not the version of the service.</p>
</blockquote>



<a name="153948010"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179276-cds%20hooks/github/topic/docs%20/%20Issue%20%23154%20Hook%20Versioning/near/153948010" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Github Notifications <a href="https://fhir.github.io/chat-archive/stream/179276-cds-hooks/github/topic/docs.20.2F.20Issue.20.23154.20Hook.20Versioning.html#153948010">(Mar 26 2018 at 14:04)</a>:</h4>
<p>bkaney <a href="https://github.com/cds-hooks/docs/issues/154#issuecomment-376177229" target="_blank" title="https://github.com/cds-hooks/docs/issues/154#issuecomment-376177229">commented</a> on <a href="https://github.com/cds-hooks/docs/issues/154" target="_blank" title="https://github.com/cds-hooks/docs/issues/154">Issue #154</a></p>
<blockquote>
<blockquote>
<p>@bkaney, looking at #74, that's talking about services, right? This issue is talking about the version of the hook definition, not the version of the service</p>
</blockquote>
<p>Hmm, #74 is about just the version of CDS Hooks. Upon re-reading this issue seems to conflate that  and the specific hook definition version at first, but then seems to move toward only to the hook definition version. So yea, not a dupe :)</p>
<p>Is there consensus forming that the hook definition version ought to be handled by the service discovery endpoint using different URLs? I guess it might be nice to advertise when a hook has been deprecated in favor of another...</p>
</blockquote>



<a name="153948085"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179276-cds%20hooks/github/topic/docs%20/%20Issue%20%23154%20Hook%20Versioning/near/153948085" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Github Notifications <a href="https://fhir.github.io/chat-archive/stream/179276-cds-hooks/github/topic/docs.20.2F.20Issue.20.23154.20Hook.20Versioning.html#153948085">(Mar 26 2018 at 17:07)</a>:</h4>
<p>kpshek <a href="https://github.com/cds-hooks/docs/issues/154#issuecomment-376239994" target="_blank" title="https://github.com/cds-hooks/docs/issues/154#issuecomment-376239994">commented</a> on <a href="https://github.com/cds-hooks/docs/issues/154" target="_blank" title="https://github.com/cds-hooks/docs/issues/154">Issue #154</a></p>
<blockquote>
<p>This has been addressed in PR #154 which was just merged to master.</p>
</blockquote>



<a name="153948086"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179276-cds%20hooks/github/topic/docs%20/%20Issue%20%23154%20Hook%20Versioning/near/153948086" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Github Notifications <a href="https://fhir.github.io/chat-archive/stream/179276-cds-hooks/github/topic/docs.20.2F.20Issue.20.23154.20Hook.20Versioning.html#153948086">(Mar 26 2018 at 17:07)</a>:</h4>
<p>kpshek closed <a href="https://github.com/cds-hooks/docs/issues/154" target="_blank" title="https://github.com/cds-hooks/docs/issues/154">Issue #154</a></p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
