---
layout: page
title: "FHIR Chat  · docs / Issue #123 CDS hook calls as part of a FHIR-based ... · cds hooks/github"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179276-cds-hooks/github/index.html">cds hooks/github</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179276-cds-hooks/github/topic/docs.20.2F.20Issue.20.23123.20CDS.20hook.20calls.20as.20part.20of.20a.20FHIR-based.20.2E.2E.2E.html">docs / Issue #123 CDS hook calls as part of a FHIR-based ...</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153922696"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179276-cds%20hooks/github/topic/docs%20/%20Issue%20%23123%20CDS%20hook%20calls%20as%20part%20of%20a%20FHIR-based%20.../near/153922696" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Github Notifications <a href="https://fhir.github.io/chat-archive/stream/179276-cds-hooks/github/topic/docs.20.2F.20Issue.20.23123.20CDS.20hook.20calls.20as.20part.20of.20a.20FHIR-based.20.2E.2E.2E.html#153922696">(Dec 03 2017 at 08:20)</a>:</h4>
<p>vlindhol opened <a href="https://github.com/cds-hooks/docs/issues/123" target="_blank" title="https://github.com/cds-hooks/docs/issues/123">Issue #123</a></p>
<blockquote>
<p>Hi!</p>
<p>I'm working on a CDS service that will provide so-called "CarePlan templates". What this means is:</p>
<ul>
<li>A patient has a CarePlan, which describes his or her entire interaction with my country's healthcare system.</li>
<li>When using different services, this patient may be put on individual "tracks" or "sub-plans". An example would be if the patient is diagnosed with heart disease, at which point some heart disease-related protocol is activated for him, containing some predefined set of steps.</li>
<li>Some of these steps may be conditional, i.e. the sub-plan may contain forks. My CDS will be used at these forks to read the relevant patient data (most often some fresh measurement data), calculate which path to take next, and return the next steps in the plan. In practice this means that our medical professionals define a complete PlanDefinition for the entire sub-plan, out of which fragments are handed out to the patient in question, one piece at a time, depending on measurement results.</li>
</ul>
<p>Hopefully my use-case is clear. What I am wondering is: when returning a "plan fragment", say, "perform steps A, B and C and then call decision support", what would actually be a good way to encode this action of calling the CDS? We are naturally using CDS hooks. Is there some obvious resource to do this in? Usually, for other actions, we only return ActivityDefinitions, since the actions will be further "enriched" by the calling service before the actions get turned into more precise FHIR resources.</p>
<p>The simplest way would be to just have an ActivityDefinition with a code containing the hook name. However, we also need to pass in the "fork ID" so the CDS knows which fork we are at. Creating one hook per fork seems a bit counterproductive, I'd rather have one hook, e.g. <code>evaluate-template-fork</code> and a parameter <code>forkId</code> with some unique string. Where would I put this parameter in a CDS hook call?</p>
</blockquote>



<a name="153922697"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179276-cds%20hooks/github/topic/docs%20/%20Issue%20%23123%20CDS%20hook%20calls%20as%20part%20of%20a%20FHIR-based%20.../near/153922697" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Github Notifications <a href="https://fhir.github.io/chat-archive/stream/179276-cds-hooks/github/topic/docs.20.2F.20Issue.20.23123.20CDS.20hook.20calls.20as.20part.20of.20a.20FHIR-based.20.2E.2E.2E.html#153922697">(Dec 03 2017 at 08:20)</a>:</h4>
<p>vlindhol edited <a href="https://github.com/cds-hooks/docs/issues/123" target="_blank" title="https://github.com/cds-hooks/docs/issues/123">Issue #123</a></p>
<blockquote>
<p>Hi!</p>
<p>I'm working on a CDS service that will provide so-called "CarePlan templates". What this means is:</p>
<ul>
<li>A patient has a CarePlan, which describes his or her entire interaction with my country's healthcare system.</li>
<li>When using different services, this patient may be put on individual "sub-plans". An example would be if the patient is diagnosed with heart disease, at which point some heart disease-related protocol is activated for him, containing some predefined set of steps.</li>
<li>Some of these steps may be conditional, i.e. the sub-plan may contain forks. My CDS will be used at these forks to read the relevant patient data (most often some fresh measurement data), calculate which path to take next, and return the next steps in the plan. In practice this means that our medical professionals define a complete PlanDefinition for the entire sub-plan, out of which fragments are handed out to the patient in question, one piece at a time, depending on measurement results.</li>
</ul>
<p>Hopefully my use-case is clear. What I am wondering is: when returning a "plan fragment", say, "perform steps A, B and C and then call decision support", what would actually be a good way to encode this action of calling the CDS? We are naturally using CDS hooks. Is there some obvious resource to do this in? Usually, for other actions, we only return ActivityDefinitions, since the actions will be further "enriched" by the calling service before the actions get turned into more precise FHIR resources.</p>
<p>The simplest way would be to just have an ActivityDefinition with a code containing the hook name. However, we also need to pass in the "fork ID" so the CDS knows which fork we are at. Creating one hook per fork seems a bit counterproductive, I'd rather have one hook, e.g. <code>evaluate-template-fork</code> and a parameter <code>forkId</code> with some unique string. Where would I put this parameter in a CDS hook call?</p>
</blockquote>



<a name="153922698"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179276-cds%20hooks/github/topic/docs%20/%20Issue%20%23123%20CDS%20hook%20calls%20as%20part%20of%20a%20FHIR-based%20.../near/153922698" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Github Notifications <a href="https://fhir.github.io/chat-archive/stream/179276-cds-hooks/github/topic/docs.20.2F.20Issue.20.23123.20CDS.20hook.20calls.20as.20part.20of.20a.20FHIR-based.20.2E.2E.2E.html#153922698">(Dec 03 2017 at 08:33)</a>:</h4>
<p>vlindhol <a href="https://github.com/cds-hooks/docs/issues/123#issuecomment-348748952" target="_blank" title="https://github.com/cds-hooks/docs/issues/123#issuecomment-348748952">commented</a> on <a href="https://github.com/cds-hooks/docs/issues/123" target="_blank" title="https://github.com/cds-hooks/docs/issues/123">Issue #123</a></p>
<blockquote>
<p>Since it looks like both <code>context</code> and <code>prefetch</code> are described by FHIR search strings, should there be some place to place a <code>Parameters</code> resource?</p>
</blockquote>



<a name="153922707"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179276-cds%20hooks/github/topic/docs%20/%20Issue%20%23123%20CDS%20hook%20calls%20as%20part%20of%20a%20FHIR-based%20.../near/153922707" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Github Notifications <a href="https://fhir.github.io/chat-archive/stream/179276-cds-hooks/github/topic/docs.20.2F.20Issue.20.23123.20CDS.20hook.20calls.20as.20part.20of.20a.20FHIR-based.20.2E.2E.2E.html#153922707">(Dec 03 2017 at 17:55)</a>:</h4>
<p>brynrhodes <a href="https://github.com/cds-hooks/docs/issues/123#issuecomment-348801135" target="_blank" title="https://github.com/cds-hooks/docs/issues/123#issuecomment-348801135">commented</a> on <a href="https://github.com/cds-hooks/docs/issues/123" target="_blank" title="https://github.com/cds-hooks/docs/issues/123">Issue #123</a></p>
<blockquote>
<p>If I'm understanding correctly, the use case requires that you be able to indicate which points in the PlanDefinition should trigger an evaluation. We have typically used the <a href="http://build.fhir.org/plandefinition-definitions.html#PlanDefinition.action.triggerDefinition" target="_blank" title="http://build.fhir.org/plandefinition-definitions.html#PlanDefinition.action.triggerDefinition">triggerDefinition</a> element to indicate this, and you could define the hook to accept an <code>actionId</code> with the <code>id</code> of the action. Would that work?</p>
</blockquote>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
