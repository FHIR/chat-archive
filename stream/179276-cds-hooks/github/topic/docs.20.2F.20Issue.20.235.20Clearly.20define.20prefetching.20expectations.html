---
layout: page
title: "FHIR Chat  · docs / Issue #5 Clearly define prefetching expectations · cds hooks/github"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179276-cds-hooks/github/index.html">cds hooks/github</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179276-cds-hooks/github/topic/docs.20.2F.20Issue.20.235.20Clearly.20define.20prefetching.20expectations.html">docs / Issue #5 Clearly define prefetching expectations</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153892324"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179276-cds%20hooks/github/topic/docs%20/%20Issue%20%235%20Clearly%20define%20prefetching%20expectations/near/153892324" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Github Notifications <a href="https://fhir.github.io/chat-archive/stream/179276-cds-hooks/github/topic/docs.20.2F.20Issue.20.235.20Clearly.20define.20prefetching.20expectations.html#153892324">(Jun 05 2017 at 21:15)</a>:</h4>
<p>kpshek <a href="https://github.com/cds-hooks/docs/issues/5#issuecomment-306312492" target="_blank" title="https://github.com/cds-hooks/docs/issues/5#issuecomment-306312492">commented</a> on <a href="https://github.com/cds-hooks/docs/issues/5" target="_blank" title="https://github.com/cds-hooks/docs/issues/5">Issue #5</a></p>
<blockquote>
<p>Spinning this off from #37, the root issue was that the EHR was sending prefetched data to the CDS Service as:</p>
<div class="codehilite"><pre><span></span>&quot;prefetch&quot;: {
        &quot;medicationOrders&quot;: {
            &quot;resource&quot;: &quot;&lt;html&gt;&lt;head&gt;&lt;title&gt;Apache Tomcat/7.0.53 - Error report&lt;/title&gt;&lt;style&gt;&lt;!--H1 {font-family:Tahoma,Arial,sans-serif;color:white;background-color:#525D76;font-size:22px;} H2 {font-family:Tahoma,Arial,sans-serif;color:white;background-color:#525D76;font-size:16px;} H3 {font-family:Tahoma,Arial,sans-serif;color:white;background-color:#525D76;font-size:14px;} BODY {font-family:Tahoma,Arial,sans-serif;color:black;background-color:white;} B {font-family:Tahoma,Arial,sans-serif;color:white;background-color:#525D76;} P {font-family:Tahoma,Arial,sans-serif;background:white;color:black;font-size:12px;}A {color : black;}A.name {color : black;}HR {color : #525D76;}--&gt;&lt;/style&gt; &lt;/head&gt;&lt;body&gt;&lt;h1&gt;HTTP Status 404 - &lt;/h1&gt;&lt;HR size=\&quot;1\&quot; noshade=\&quot;noshade\&quot;&gt;&lt;p&gt;&lt;b&gt;type&lt;/b&gt; Status report&lt;/p&gt;&lt;p&gt;&lt;b&gt;message&lt;/b&gt; &lt;u&gt;&lt;/u&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;description&lt;/b&gt; &lt;u&gt;The requested resource is not available.&lt;/u&gt;&lt;/p&gt;&lt;HR size=\&quot;1\&quot; noshade=\&quot;noshade\&quot;&gt;&lt;h3&gt;Apache Tomcat/7.0.53&lt;/h3&gt;&lt;/body&gt;&lt;/html&gt;&quot;,
            &quot;response&quot;: {
                &quot;status&quot;: &quot;404Not Found&quot;
            }
        },
        &quot;patient&quot;: {
            &quot;resource&quot;: &quot;&lt;html&gt;&lt;head&gt;&lt;title&gt;Apache Tomcat/7.0.53 - Error report&lt;/title&gt;&lt;style&gt;&lt;!--H1 {font-family:Tahoma,Arial,sans-serif;color:white;background-color:#525D76;font-size:22px;} H2 {font-family:Tahoma,Arial,sans-serif;color:white;background-color:#525D76;font-size:16px;} H3 {font-family:Tahoma,Arial,sans-serif;color:white;background-color:#525D76;font-size:14px;} BODY {font-family:Tahoma,Arial,sans-serif;color:black;background-color:white;} B {font-family:Tahoma,Arial,sans-serif;color:white;background-color:#525D76;} P {font-family:Tahoma,Arial,sans-serif;background:white;color:black;font-size:12px;}A {color : black;}A.name {color : black;}HR {color : #525D76;}--&gt;&lt;/style&gt; &lt;/head&gt;&lt;body&gt;&lt;h1&gt;HTTP Status 404 - &amp;quot;/WEB-INF/grails-app/views/api/read.gsp&amp;quot; not found.&lt;/h1&gt;&lt;HR size=\&quot;1\&quot; noshade=\&quot;noshade\&quot;&gt;&lt;p&gt;&lt;b&gt;type&lt;/b&gt; Status report&lt;/p&gt;&lt;p&gt;&lt;b&gt;message&lt;/b&gt; &lt;u&gt;&amp;quot;/WEB-INF/grails-app/views/api/read.gsp&amp;quot; not found.&lt;/u&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;description&lt;/b&gt; &lt;u&gt;The requested resource is not available.&lt;/u&gt;&lt;/p&gt;&lt;HR size=\&quot;1\&quot; noshade=\&quot;noshade\&quot;&gt;&lt;h3&gt;Apache Tomcat/7.0.53&lt;/h3&gt;&lt;/body&gt;&lt;/html&gt;&quot;,
            &quot;response&quot;: {
                &quot;status&quot;: &quot;404 Not Found&quot;
            }
        }
    },
</pre></div>


<p>We need to clearly define expectations for the EHR and CDS Service in these error scenarios. If the error information is <strong>not</strong> important to communicate to the CDS Service, we can simply ensure the EHR either:</p>
<p>1. Doesn't include the particular prefetch data key<br>
2. Does something like <code>"medicationOrders": null</code></p>
<p>If the error information is important to CDS Services, we could return the OperationOutcome from the FHIR server. However, what if the error occurs outside of the FHIR server or the FHIR server had some unhandled error in which case an OperationOutcome isn't available? Now the EHR would need to construct the OperationOutcome itself.</p>
<p>Additionally, one of the main intentions/notions of prefetch is that the EHR can send data which is already in memory to the CDS Service, removing the need for a FHIR service call. In other words, the EHR may never interact with its FHIR server to satisfy desired prefetched data.</p>
<p>Perhaps a more important question is what is a CDS Service going to do with this error information? It really cannot act on it and if the prefetched data is necessary for the CDS logic, the CDS Service needs to attempt to retrieve the prefetched data themselves (as they would need to do if the EHR was not able to satisfy the prefetched data).</p>
<p>In talking offline with @brynrhodes, we both agree that the prefetch error information isn't necessary to communicate with CDS Services and that EHR's should go with option 1 above where the prefetch data key is not present in the <code>prefetch</code> object.</p>
</blockquote>



<a name="153896521"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179276-cds%20hooks/github/topic/docs%20/%20Issue%20%235%20Clearly%20define%20prefetching%20expectations/near/153896521" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Github Notifications <a href="https://fhir.github.io/chat-archive/stream/179276-cds-hooks/github/topic/docs.20.2F.20Issue.20.235.20Clearly.20define.20prefetching.20expectations.html#153896521">(Jul 10 2017 at 20:52)</a>:</h4>
<p>isaacvetter assigned <a href="https://github.com/cds-hooks/docs/issues/5" target="_blank" title="https://github.com/cds-hooks/docs/issues/5">Issue #5</a></p>



<a name="153901354"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179276-cds%20hooks/github/topic/docs%20/%20Issue%20%235%20Clearly%20define%20prefetching%20expectations/near/153901354" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Github Notifications <a href="https://fhir.github.io/chat-archive/stream/179276-cds-hooks/github/topic/docs.20.2F.20Issue.20.235.20Clearly.20define.20prefetching.20expectations.html#153901354">(Aug 09 2017 at 18:31)</a>:</h4>
<p>kpshek closed <a href="https://github.com/cds-hooks/docs/issues/5" target="_blank" title="https://github.com/cds-hooks/docs/issues/5">Issue #5</a></p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
