---
layout: page
title: "FHIR Chat  · docs / Issue #7 Determine an approach to security · cds hooks/github"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179276-cds-hooks/github/index.html">cds hooks/github</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179276-cds-hooks/github/topic/docs.20.2F.20Issue.20.237.20Determine.20an.20approach.20to.20security.html">docs / Issue #7 Determine an approach to security</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153890478"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179276-cds%20hooks/github/topic/docs%20/%20Issue%20%237%20Determine%20an%20approach%20to%20security/near/153890478" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Github Notifications <a href="https://fhir.github.io/chat-archive/stream/179276-cds-hooks/github/topic/docs.20.2F.20Issue.20.237.20Determine.20an.20approach.20to.20security.html#153890478">(May 18 2017 at 21:05)</a>:</h4>
<p>yashaskram <a href="https://github.com/cds-hooks/docs/issues/7#issuecomment-302541281" target="_blank" title="https://github.com/cds-hooks/docs/issues/7#issuecomment-302541281">commented</a> on <a href="https://github.com/cds-hooks/docs/issues/7" target="_blank" title="https://github.com/cds-hooks/docs/issues/7">Issue #7</a></p>
<blockquote>
<p>@kpshek - thx for putting together the security proposal. </p>
<p>Is there an option to use the same trust detailed in <a href="https://github.com/cds-hooks/docs/wiki/Proposed-Security-Model#ehr-trust-of-cds-services" target="_blank" title="https://github.com/cds-hooks/docs/wiki/Proposed-Security-Model#ehr-trust-of-cds-services">https://github.com/cds-hooks/docs/wiki/Proposed-Security-Model#ehr-trust-of-cds-services</a> for the CDS Service trust on EHR + client credential flow <a href="https://tools.ietf.org/html/rfc6749#section-4.4" target="_blank" title="https://tools.ietf.org/html/rfc6749#section-4.4">https://tools.ietf.org/html/rfc6749#section-4.4</a> (with unsigned jwt token ) assuming offline client  registration (cds service registration on the EHRauth server)</p>
<p>There will be two calls [1) token endpoint 2) token requestover] over the wire which can bring up latency concerns. In the proposed model there will be similar calls to discover jwks_uri and inturn get the public key (or atleast one)</p>
<p>While I generally prefer to use JWS and moved beyond JWT even for SMART on FHIR token response, I was wondering if we should be aligned with SMART on FHIR at this point atleast to begin with. </p>
<p>I missed the discussion happened in San Antonia early this year and also Security WG presentation in Madrid. So appreciate any input</p>
<p>To the outstanding question at the end of proposed model (if we decide go with the proposed model), I am inclined to having FHIR server as the issuer (again to be in sync with SMART on FHIR) and adding jwks_uri ( or public key) to Conformance</p>
</blockquote>



<a name="153896507"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179276-cds%20hooks/github/topic/docs%20/%20Issue%20%237%20Determine%20an%20approach%20to%20security/near/153896507" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Github Notifications <a href="https://fhir.github.io/chat-archive/stream/179276-cds-hooks/github/topic/docs.20.2F.20Issue.20.237.20Determine.20an.20approach.20to.20security.html#153896507">(Jul 10 2017 at 20:25)</a>:</h4>
<p>kpshek assigned <a href="https://github.com/cds-hooks/docs/issues/7" target="_blank" title="https://github.com/cds-hooks/docs/issues/7">Issue #7</a></p>



<a name="153902426"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179276-cds%20hooks/github/topic/docs%20/%20Issue%20%237%20Determine%20an%20approach%20to%20security/near/153902426" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Github Notifications <a href="https://fhir.github.io/chat-archive/stream/179276-cds-hooks/github/topic/docs.20.2F.20Issue.20.237.20Determine.20an.20approach.20to.20security.html#153902426">(Aug 14 2017 at 20:39)</a>:</h4>
<p>yashaskram <a href="https://github.com/cds-hooks/docs/issues/7#issuecomment-322302917" target="_blank" title="https://github.com/cds-hooks/docs/issues/7#issuecomment-322302917">commented</a> on <a href="https://github.com/cds-hooks/docs/issues/7" target="_blank" title="https://github.com/cds-hooks/docs/issues/7">Issue #7</a></p>
<blockquote>
<p>The latest iteration - [<a href="https://cds-hooks-docs-pr-72.herokuapp.com/#security" target="_blank" title="https://cds-hooks-docs-pr-72.herokuapp.com/#security">_link_</a>] looks good and covers both ends robustly which is great. </p>
<p>id_token should be signed. I don't think CDS vendors would like to trust an unsigned jwt for SSO (authentication) when pushed as opposed to pulling (or requesting) the token in the case of the authorization grant or client credential flow. I agree with preference to have an FHIR extension to serve the public key uri </p>
<p>With the assumption of requiring id_token to be signed and using the same for discovery end point calls, we should think about how to exchange the FHIR base URL assuming FHIR Conformance is used serve public key uri</p>
<p>Keeping the cost of handling the token proactively on the EHR for performance reasons is great, but there will be over the wire transactions to get the public key (basically hitting FHIR server to get the conformance to get the public key (jwks_uri) end point and in turn public key for CDS Service provider to validate the id_token with incoming requests. Question:  Based on the scope authorized by a particular CDS Hook service, I would assume there will be more than one access token generated and cached at the EHR side based on the user/cds hook service. How do EHR plan to handle this? </p>
</blockquote>



<a name="153904481"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179276-cds%20hooks/github/topic/docs%20/%20Issue%20%237%20Determine%20an%20approach%20to%20security/near/153904481" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Github Notifications <a href="https://fhir.github.io/chat-archive/stream/179276-cds-hooks/github/topic/docs.20.2F.20Issue.20.237.20Determine.20an.20approach.20to.20security.html#153904481">(Sep 05 2017 at 16:10)</a>:</h4>
<p>isaacvetter <a href="https://github.com/cds-hooks/docs/issues/7#issuecomment-327225346" target="_blank" title="https://github.com/cds-hooks/docs/issues/7#issuecomment-327225346">commented</a> on <a href="https://github.com/cds-hooks/docs/issues/7" target="_blank" title="https://github.com/cds-hooks/docs/issues/7">Issue #7</a></p>
<blockquote>
<p>Hey Guys,</p>
<p>We're assuming / leaning towards documenting the FHIR Server's public key (that's used to sign/encrypt the JWT) in the CapabilityStatement. Note that this is not consistent with the SMART spec that's being balloted, which essentially locates the key outside of FHIR: <a href="http://hl7.org/fhir/smart-app-launch/scopes-and-launch-context/#steps-for-using-an-id-token" target="_blank" title="http://hl7.org/fhir/smart-app-launch/scopes-and-launch-context/#steps-for-using-an-id-token">http://hl7.org/fhir/smart-app-launch/scopes-and-launch-context/#steps-for-using-an-id-token</a></p>
<p>I think that CDS Hooks should stay consistent with SMART. </p>
</blockquote>



<a name="153904487"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179276-cds%20hooks/github/topic/docs%20/%20Issue%20%237%20Determine%20an%20approach%20to%20security/near/153904487" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Github Notifications <a href="https://fhir.github.io/chat-archive/stream/179276-cds-hooks/github/topic/docs.20.2F.20Issue.20.237.20Determine.20an.20approach.20to.20security.html#153904487">(Sep 05 2017 at 16:38)</a>:</h4>
<p>jmandel <a href="https://github.com/cds-hooks/docs/issues/7#issuecomment-327233145" target="_blank" title="https://github.com/cds-hooks/docs/issues/7#issuecomment-327233145">commented</a> on <a href="https://github.com/cds-hooks/docs/issues/7" target="_blank" title="https://github.com/cds-hooks/docs/issues/7">Issue #7</a></p>
<blockquote>
<p>Good point! It's worth proposing this as part of a ballot comment on the SMART spec if you haven't already done so <span class="user-mention" data-user-email="isaacvetter@gmail.com" data-user-id="558">@Isaac Vetter</span>  :-)</p>
</blockquote>



<a name="153904490"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179276-cds%20hooks/github/topic/docs%20/%20Issue%20%237%20Determine%20an%20approach%20to%20security/near/153904490" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Github Notifications <a href="https://fhir.github.io/chat-archive/stream/179276-cds-hooks/github/topic/docs.20.2F.20Issue.20.237.20Determine.20an.20approach.20to.20security.html#153904490">(Sep 05 2017 at 16:55)</a>:</h4>
<p>isaacvetter <a href="https://github.com/cds-hooks/docs/issues/7#issuecomment-327237961" target="_blank" title="https://github.com/cds-hooks/docs/issues/7#issuecomment-327237961">commented</a> on <a href="https://github.com/cds-hooks/docs/issues/7" target="_blank" title="https://github.com/cds-hooks/docs/issues/7">Issue #7</a></p>
<blockquote>
<p>Thanks, <span class="user-mention" data-user-email="jmandel@gmail.com" data-user-id="9">@Josh Mandel</span> -- Will do.</p>
<p>@whitehatguy, @kpshek  - are you currently publishing a public key for the purposes of OIDC validation? If so, does a client follow <a href="http://hl7.org/fhir/smart-app-launch/scopes-and-launch-context/#steps-for-using-an-id-token" target="_blank" title="http://hl7.org/fhir/smart-app-launch/scopes-and-launch-context/#steps-for-using-an-id-token">these steps</a> to retrieve it, or rather, have you extended your Conformance/CapabilityStatement resource?</p>
</blockquote>



<a name="153914954"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179276-cds%20hooks/github/topic/docs%20/%20Issue%20%237%20Determine%20an%20approach%20to%20security/near/153914954" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Github Notifications <a href="https://fhir.github.io/chat-archive/stream/179276-cds-hooks/github/topic/docs.20.2F.20Issue.20.237.20Determine.20an.20approach.20to.20security.html#153914954">(Oct 19 2017 at 20:37)</a>:</h4>
<p>isaacvetter labeled <a href="https://github.com/cds-hooks/docs/issues/7" target="_blank" title="https://github.com/cds-hooks/docs/issues/7">Issue #7</a></p>



<a name="153916860"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179276-cds%20hooks/github/topic/docs%20/%20Issue%20%237%20Determine%20an%20approach%20to%20security/near/153916860" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Github Notifications <a href="https://fhir.github.io/chat-archive/stream/179276-cds-hooks/github/topic/docs.20.2F.20Issue.20.237.20Determine.20an.20approach.20to.20security.html#153916860">(Oct 30 2017 at 21:04)</a>:</h4>
<p>kpshek <a href="https://github.com/cds-hooks/docs/issues/7#issuecomment-340583955" target="_blank" title="https://github.com/cds-hooks/docs/issues/7#issuecomment-340583955">commented</a> on <a href="https://github.com/cds-hooks/docs/issues/7" target="_blank" title="https://github.com/cds-hooks/docs/issues/7">Issue #7</a></p>
<blockquote>
<p>Resolving this issue with the merge of #72 (ae86854). We are embarking on a external security assessment with a 3rd party security firm. We will address any changes from that on additional issues.</p>
<p>Closing.</p>
</blockquote>



<a name="153916861"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179276-cds%20hooks/github/topic/docs%20/%20Issue%20%237%20Determine%20an%20approach%20to%20security/near/153916861" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Github Notifications <a href="https://fhir.github.io/chat-archive/stream/179276-cds-hooks/github/topic/docs.20.2F.20Issue.20.237.20Determine.20an.20approach.20to.20security.html#153916861">(Oct 30 2017 at 21:04)</a>:</h4>
<p>kpshek closed <a href="https://github.com/cds-hooks/docs/issues/7" target="_blank" title="https://github.com/cds-hooks/docs/issues/7">Issue #7</a></p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
