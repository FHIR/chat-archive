---
layout: page
title: "FHIR Chat  · Size limit · bulk data"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/index.html">bulk data</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Size.20limit.html">Size limit</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="247157288"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Size%20limit/near/247157288" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dsh <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Size.20limit.html#247157288">(Jul 26 2021 at 02:24)</a>:</h4>
<p>Hi am new to bulk data export so this may be a childish question. Our server has close 500K Condition resources and I want to fetch all of them to figure out the population distribution across <code>Condition.code</code> so when I issue this bulk data request</p>
<p><code>/$export?_outputFormat=ndjson&amp;_type=Condition&amp;_since=2020-01-01T00:00:00.000Z</code></p>
<p>I get only 200 Condition resources with no ability to paginate to next 200, so is there a way to get all Condition resources in one bulk data export ?</p>



<a name="247157415"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Size%20limit/near/247157415" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dsh <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Size.20limit.html#247157415">(Jul 26 2021 at 02:27)</a>:</h4>
<p>I don't think it makes sense to change the <code>max_page_size: 200</code> in <code>application.yml</code> of the server to get bulk data export exporting everything <span aria-label="anguished" class="emoji emoji-1f627" role="img" title="anguished">:anguished:</span></p>



<a name="247176768"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Size%20limit/near/247176768" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dsh <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Size.20limit.html#247176768">(Jul 26 2021 at 08:47)</a>:</h4>
<p>any ideas?</p>



<a name="247193533"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Size%20limit/near/247193533" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vassil Peytchev <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Size.20limit.html#247193533">(Jul 26 2021 at 12:09)</a>:</h4>
<p>Which server for implementation are you using?</p>



<a name="247223147"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Size%20limit/near/247223147" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dsh <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Size.20limit.html#247223147">(Jul 26 2021 at 16:02)</a>:</h4>
<p><span class="user-mention silent" data-user-id="192685">Vassil Peytchev</span> <a href="#narrow/stream/179250-bulk-data/topic/Size.20limit/near/247193533">said</a>:</p>
<blockquote>
<p>Which server for implementation are you using?</p>
</blockquote>
<p>JPA server 5.3.0</p>



<a name="247225170"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Size%20limit/near/247225170" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vladimir Ignatov <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Size.20limit.html#247225170">(Jul 26 2021 at 16:16)</a>:</h4>
<p>That is probably a HAPI server then? Assuming your page size is 200, you should get multiple files with 200 conditions in each of them.</p>
<p>Or perhaps only 200 have been modified since 2020-01-01? Anyhow, if you want to get all the conditions, then try removing the <code>_since</code> parameter.</p>



<a name="247225571"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Size%20limit/near/247225571" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dsh <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Size.20limit.html#247225571">(Jul 26 2021 at 16:19)</a>:</h4>
<p>First I tried without <code>_since</code> but it didn't work and there are about 500K Conditions resources modified since 2020/01/01 ... then frustratingly I increased the <code>max_page_size</code> parameter to 1 million to fetch all Conditions</p>



<a name="247225762"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Size%20limit/near/247225762" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dsh <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Size.20limit.html#247225762">(Jul 26 2021 at 16:21)</a>:</h4>
<p>I am not sure if this is a bug but if others can confirm and or tell me what I might be doing wrong that will help</p>



<a name="247225986"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Size%20limit/near/247225986" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vladimir Ignatov <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Size.20limit.html#247225986">(Jul 26 2021 at 16:22)</a>:</h4>
<p>Were you only getting a single file link in your export manifest (before increasing the limit)?</p>



<a name="247226375"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Size%20limit/near/247226375" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dsh <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Size.20limit.html#247226375">(Jul 26 2021 at 16:25)</a>:</h4>
<p><span class="user-mention silent" data-user-id="193731">Vladimir Ignatov</span> <a href="#narrow/stream/179250-bulk-data/topic/Size.20limit/near/247225986">said</a>:</p>
<blockquote>
<p>Were you only getting a single file link in your export manifest (before increasing the limit)?</p>
</blockquote>
<p>Yes and that was the weird part</p>



<a name="247226549"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Size%20limit/near/247226549" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dsh <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Size.20limit.html#247226549">(Jul 26 2021 at 16:27)</a>:</h4>
<p>after I increased the limit I got about 418 links</p>



<a name="247227428"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Size%20limit/near/247227428" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vladimir Ignatov <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Size.20limit.html#247227428">(Jul 26 2021 at 16:34)</a>:</h4>
<ol>
<li>With 500K records and limit of 200 you should have gotten 2.5K links (if they fit into the manifest response size limit)</li>
<li>With 500K records and limit of 1M you should have gotten 1 link to file with 500K rows</li>
</ol>
<p>That is just the simple math without the internal implementation details that could affect how pagination really works. I would suggest going to the HAPI GitHub and searching for this issue (and maybe posting new one if you don't find anything)</p>



<a name="247227562"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Size%20limit/near/247227562" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dsh <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Size.20limit.html#247227562">(Jul 26 2021 at 16:36)</a>:</h4>
<p><span class="user-mention silent" data-user-id="193731">Vladimir Ignatov</span> <a href="#narrow/stream/179250-bulk-data/topic/Size.20limit/near/247227428">said</a>:</p>
<blockquote>
<ol>
<li>With 500K records and limit of 200 you should have gotten 2.5K links (if they fit into the manifest response size limit)</li>
<li>With 500K records and limit of 1M you should have gotten 1 link to file with 500K rows</li>
</ol>
<p>That is just the simple math without the internal implementation details that could affect how pagination really works. I would suggest going to the HAPI GitHub and searching for this issue (and maybe posting new one if you don't find anything)</p>
</blockquote>
<p>your logic makes sense ... but that's not how the server behaved ... this may be a bug ... I will search in GitHub</p>



<a name="247230220"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Size%20limit/near/247230220" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert Scanlon <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Size.20limit.html#247230220">(Jul 26 2021 at 16:56)</a>:</h4>
<p>You could also try asking this question over in the <a class="stream" data-stream-id="179167" href="/#narrow/stream/179167-hapi">#hapi</a> stream (if that is what you are using), which may catch the attention of someone that knows the specifics of its bulk data implementation.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
