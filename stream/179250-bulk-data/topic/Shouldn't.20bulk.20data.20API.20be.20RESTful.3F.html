---
layout: page
title: "FHIR Chat  · Shouldn&#x27;t bulk data API be RESTful? · bulk data"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/index.html">bulk data</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Shouldn&#x27;t.20bulk.20data.20API.20be.20RESTful.3F.html">Shouldn&#x27;t bulk data API be RESTful?</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153932998"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Shouldn%27t%20bulk%20data%20API%20be%20RESTful%3F/near/153932998" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ed Martin <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Shouldn&#x27;t.20bulk.20data.20API.20be.20RESTful.3F.html#153932998">(Jan 29 2018 at 18:15)</a>:</h4>
<p>For a first time participant at a Connectathon, thanks to all participants, and especially those who provided help to me.  It was an eye-opening experience for me, and I look forward to future participation.   Please forgive me if this is a newbie question that’s been previously discussed, but after I left the Connectathon, I had this questions..</p>
<p>Why isn’t the proposed Bulk Data API RESTful?  If we’re supposed to be following the FHIR API model, couldn’t there be a BulkDataQuery resource that we can POST, GET, PUT and DELETE from the FHIR Server?</p>
<p>Something like this:</p>
<p>BulkDataQuery Resource</p>
<ul>
<li>Id - FHIR resource id</li>
<li>QueryParameters - e.g. Patient/$export or whatever gets decided</li>
<li>Status - done, not done or perhaps Queued, Completed, InProgress, Cancelled</li>
<li>InitialRequestDateTime</li>
<li>CompletedDateTime</li>
<li>Results - List of URI’s</li>
<li>ResultsExpirationDateTime - the date/time when the results will no longer be available.</li>
</ul>
<p>POST - initiates a bulk data request, creates a new BulkDataQuery resource on the server<br>
GET - gets the BulkDataQuery resource via id (and support some search parameters)<br>
DELETE - cancels the BulkDataQuery request</p>



<a name="153933775"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Shouldn%27t%20bulk%20data%20API%20be%20RESTful%3F/near/153933775" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Shouldn&#x27;t.20bulk.20data.20API.20be.20RESTful.3F.html#153933775">(Jan 30 2018 at 19:41)</a>:</h4>
<p>This is an interesting suggestion. Overall it introduces some indirection (i.e., rather than asking for an async response to your query, you're talking to an entirely different endpoint) and some more functionality (e.g., it implies that a client should be able to receive some interim results, or search for previously generated exports, etc -- which could either be an benefit or a needless complexity, depending on perspective).</p>



<a name="153933778"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Shouldn%27t%20bulk%20data%20API%20be%20RESTful%3F/near/153933778" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Shouldn&#x27;t.20bulk.20data.20API.20be.20RESTful.3F.html#153933778">(Jan 30 2018 at 19:42)</a>:</h4>
<p>it overlaps with the Task resource</p>



<a name="153933780"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Shouldn%27t%20bulk%20data%20API%20be%20RESTful%3F/near/153933780" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Shouldn&#x27;t.20bulk.20data.20API.20be.20RESTful.3F.html#153933780">(Jan 30 2018 at 19:46)</a>:</h4>
<p>Really? (I mean, on some level: what doesn't — but I never thought of <code>Task</code> as an infrastructure resource.)</p>



<a name="153933781"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Shouldn%27t%20bulk%20data%20API%20be%20RESTful%3F/near/153933781" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Shouldn&#x27;t.20bulk.20data.20API.20be.20RESTful.3F.html#153933781">(Jan 30 2018 at 19:46)</a>:</h4>
<p>The asynch response pattern we're doing is a Rest approach (if that's the concern). IE: I could GET all Patients where DOB is after 1970 asynchronously. I wonder if it feels more "funky" becuase of the Operation? But then this would be a concern with operations.</p>



<a name="153933783"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Shouldn%27t%20bulk%20data%20API%20be%20RESTful%3F/near/153933783" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Shouldn&#x27;t.20bulk.20data.20API.20be.20RESTful.3F.html#153933783">(Jan 30 2018 at 19:49)</a>:</h4>
<p>If the concern is specifically with the asynch nature, then it wouldn't just be the Bulk Data concern - it would be with all the resources you could select this way.</p>



<a name="153933784"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Shouldn%27t%20bulk%20data%20API%20be%20RESTful%3F/near/153933784" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Shouldn&#x27;t.20bulk.20data.20API.20be.20RESTful.3F.html#153933784">(Jan 30 2018 at 19:50)</a>:</h4>
<p>I think the pattern we're describing generalizes to any call (which came up in discussion here), so it'd be sensible to think of it for non-bulk-export use cases like:</p>
<p>1.</p>
<div class="codehilite"><pre><span></span>GET /Observation?code=123
Prefer: respond-async
</pre></div>


<p>(Or whatever).</p>
<p>This feels more natural to me than:</p>
<p>2. </p>
<div class="codehilite"><pre><span></span>POST /AsyncJob
content-type: application/json

{
  &quot;query&quot;: &quot;Observation?code=123&quot;,
  &quot;outptFormat&quot;: &quot;application/fhir+ndjson&quot;
}
</pre></div>



<a name="153933786"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Shouldn%27t%20bulk%20data%20API%20be%20RESTful%3F/near/153933786" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Shouldn&#x27;t.20bulk.20data.20API.20be.20RESTful.3F.html#153933786">(Jan 30 2018 at 19:51)</a>:</h4>
<p>Now we could say that requests like #1 tie into #2 by returning results like </p>
<div class="codehilite"><pre><span></span>Content-location: https://server/fhir/AsyncJob/123
</pre></div>


<p>... which acts like a FHIR resource. But I'm not sure what problem this solves.</p>



<a name="153933787"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Shouldn%27t%20bulk%20data%20API%20be%20RESTful%3F/near/153933787" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Shouldn&#x27;t.20bulk.20data.20API.20be.20RESTful.3F.html#153933787">(Jan 30 2018 at 19:52)</a>:</h4>
<p>(I wrote <code>AsyncJob</code> here where where  <span class="user-mention" data-user-id="195152">@Ed Martin</span> wrote <code>BulkDataQuery</code> -- you should read these as equivalent.)</p>



<a name="153933793"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Shouldn%27t%20bulk%20data%20API%20be%20RESTful%3F/near/153933793" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Shouldn&#x27;t.20bulk.20data.20API.20be.20RESTful.3F.html#153933793">(Jan 30 2018 at 20:01)</a>:</h4>
<p>a resource would potentially mean that you could find each other's requests etc. That's probably not a desired feature. (though that's not something it has to mean)</p>



<a name="153933803"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Shouldn%27t%20bulk%20data%20API%20be%20RESTful%3F/near/153933803" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bas van den Heuvel <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Shouldn&#x27;t.20bulk.20data.20API.20be.20RESTful.3F.html#153933803">(Jan 30 2018 at 20:17)</a>:</h4>
<p>Hiding responses from other users is certainly something that we need to support.</p>



<a name="153933804"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Shouldn%27t%20bulk%20data%20API%20be%20RESTful%3F/near/153933804" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Shouldn&#x27;t.20bulk.20data.20API.20be.20RESTful.3F.html#153933804">(Jan 30 2018 at 20:18)</a>:</h4>
<p>I agree, <span class="user-mention" data-user-id="191315">@Josh Mandel</span> - your GET example is significantly more straightforward.</p>



<a name="153933805"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Shouldn%27t%20bulk%20data%20API%20be%20RESTful%3F/near/153933805" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Shouldn&#x27;t.20bulk.20data.20API.20be.20RESTful.3F.html#153933805">(Jan 30 2018 at 20:20)</a>:</h4>
<p>my server already does GET that way</p>



<a name="153934007"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Shouldn%27t%20bulk%20data%20API%20be%20RESTful%3F/near/153934007" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nagesh Bashyam <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Shouldn&#x27;t.20bulk.20data.20API.20be.20RESTful.3F.html#153934007">(Jan 31 2018 at 00:01)</a>:</h4>
<p>I am thinking out loud ...What Use Case would use the Async capability on regular FHIR APIs ? (Publish - Subscribe type use cases ? ) Doesn't async make the backend more complicated to spin off requests , keep track of them and create some kind of a bundle that has to persist for some time and then clean up ...is that really required for Base FHIR use cases ?  I can see that complexity being necessary for bulk apis or even for jobs (tasks that are workflow dependent (i.e human intervention) and/or complex, time consuming in nature. (i.e complex queries using some query language or execution of jobs)</p>



<a name="153934028"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Shouldn%27t%20bulk%20data%20API%20be%20RESTful%3F/near/153934028" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Shouldn&#x27;t.20bulk.20data.20API.20be.20RESTful.3F.html#153934028">(Jan 31 2018 at 02:15)</a>:</h4>
<p>I think there's value in saying "here's a consistent way to request data, whether it's in a giant bundle or in an async pile of ndjson files". That said: there's no expectation that most servers would support this async model on "normal" requests; it's only important on requests that require large responses.</p>



<a name="153934042"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Shouldn%27t%20bulk%20data%20API%20be%20RESTful%3F/near/153934042" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Shouldn&#x27;t.20bulk.20data.20API.20be.20RESTful.3F.html#153934042">(Jan 31 2018 at 02:54)</a>:</h4>
<p>it is more complicated for server and client but that doesn't mean it isn't functional</p>



<a name="153934334"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Shouldn%27t%20bulk%20data%20API%20be%20RESTful%3F/near/153934334" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vladimir Ignatov <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Shouldn&#x27;t.20bulk.20data.20API.20be.20RESTful.3F.html#153934334">(Jan 31 2018 at 18:34)</a>:</h4>
<p>How about a note in the spec saying that the servers may send a Retry-After header <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Retry-After" target="_blank" title="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Retry-After">https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Retry-After</a>? I think in some cases this can lead to better pooling then using the back-off algorithm.</p>



<a name="153934343"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Shouldn%27t%20bulk%20data%20API%20be%20RESTful%3F/near/153934343" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Shouldn&#x27;t.20bulk.20data.20API.20be.20RESTful.3F.html#153934343">(Jan 31 2018 at 19:11)</a>:</h4>
<p>I think that's a super helpful suggestion for hinting clients when to poll.</p>



<a name="153934349"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Shouldn%27t%20bulk%20data%20API%20be%20RESTful%3F/near/153934349" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Shouldn&#x27;t.20bulk.20data.20API.20be.20RESTful.3F.html#153934349">(Jan 31 2018 at 19:49)</a>:</h4>
<p>This is a solid strategy.</p>



<a name="153934352"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Shouldn%27t%20bulk%20data%20API%20be%20RESTful%3F/near/153934352" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nagesh Bashyam <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Shouldn&#x27;t.20bulk.20data.20API.20be.20RESTful.3F.html#153934352">(Jan 31 2018 at 20:00)</a>:</h4>
<p>Agreed</p>



<a name="153934464"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Shouldn%27t%20bulk%20data%20API%20be%20RESTful%3F/near/153934464" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bas van den Heuvel <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Shouldn&#x27;t.20bulk.20data.20API.20be.20RESTful.3F.html#153934464">(Feb 01 2018 at 04:51)</a>:</h4>
<p>besides large requests it is also usefull for requests that potentially take a lot of time, e.g. evaluation of a population measure.</p>



<a name="153934694"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Shouldn%27t%20bulk%20data%20API%20be%20RESTful%3F/near/153934694" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan Gottlieb <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Shouldn&#x27;t.20bulk.20data.20API.20be.20RESTful.3F.html#153934694">(Feb 01 2018 at 17:30)</a>:</h4>
<p>I added a note about the retry-after header to the write up: <a href="https://github.com/smart-on-fhir/fhir-bulk-data-docs/blob/master/README.md" target="_blank" title="https://github.com/smart-on-fhir/fhir-bulk-data-docs/blob/master/README.md">https://github.com/smart-on-fhir/fhir-bulk-data-docs/blob/master/README.md</a></p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
