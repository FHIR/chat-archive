---
layout: page
title: "FHIR Chat  · Shall server metadata have $export operation · bulk data"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/index.html">bulk data</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Shall.20server.20metadata.20have.20.24export.20operation.html">Shall server metadata have $export operation</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="174543912"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Shall%20server%20metadata%20have%20%24export%20operation/near/174543912" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Shall.20server.20metadata.20have.20.24export.20operation.html#174543912">(Aug 30 2019 at 13:27)</a>:</h4>
<p>Logically bulk-data server shall have $export operation in metadata. But I don't find such statement in Bulk Data IG and smart-it reference server does not have $export operation in metadata. <br>
Any idea?<br>
<span class="user-mention" data-user-id="191315">@Josh Mandel</span> <span class="user-mention" data-user-id="191414">@Dan Gottlieb</span></p>



<a name="174545098"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Shall%20server%20metadata%20have%20%24export%20operation/near/174545098" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan Gottlieb <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Shall.20server.20metadata.20have.20.24export.20operation.html#174545098">(Aug 30 2019 at 13:40)</a>:</h4>
<p>The metadata is described in the IG here: <a href="http://hl7.org/fhir/uv/bulkdata/STU1/CapabilityStatement-bulk-data.json.html" target="_blank" title="http://hl7.org/fhir/uv/bulkdata/STU1/CapabilityStatement-bulk-data.json.html">http://hl7.org/fhir/uv/bulkdata/STU1/CapabilityStatement-bulk-data.json.html</a> .</p>



<a name="174545159"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Shall%20server%20metadata%20have%20%24export%20operation/near/174545159" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan Gottlieb <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Shall.20server.20metadata.20have.20.24export.20operation.html#174545159">(Aug 30 2019 at 13:41)</a>:</h4>
<p><span class="user-mention" data-user-id="193731">@Vladimir Ignatov</span> it looks like the capability statement on the bulk data server is a little behind the spec</p>



<a name="174973058"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Shall%20server%20metadata%20have%20%24export%20operation/near/174973058" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Shall.20server.20metadata.20have.20.24export.20operation.html#174973058">(Sep 05 2019 at 13:27)</a>:</h4>
<p><span class="user-mention" data-user-id="191414">@Dan Gottlieb</span> When I read IG capability statement, I saw that group-export operation is declared in the <code>rest</code> level. Should that be under <code>group</code> resource? According to the IG, group level export endpoint is <code>GET [fhir base]/Group/[id]/$export</code>.</p>



<a name="174991791"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Shall%20server%20metadata%20have%20%24export%20operation/near/174991791" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan Gottlieb <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Shall.20server.20metadata.20have.20.24export.20operation.html#174991791">(Sep 05 2019 at 16:39)</a>:</h4>
<p>Yup, looks like an error in the conformance statement. <span class="user-mention" data-user-id="191315">@Josh Mandel</span> do you know the mechanism for doing these sort of corrections in a balloted IG?</p>



<a name="175001468"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Shall%20server%20metadata%20have%20%24export%20operation/near/175001468" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Shall.20server.20metadata.20have.20.24export.20operation.html#175001468">(Sep 05 2019 at 18:22)</a>:</h4>
<p>Thanks for catching this! I've added <a href="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=23864" target="_blank" title="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=23864">GF#23864</a> to track.</p>



<a name="175755352"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Shall%20server%20metadata%20have%20%24export%20operation/near/175755352" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Shall.20server.20metadata.20have.20.24export.20operation.html#175755352">(Sep 15 2019 at 16:13)</a>:</h4>
<p>I've also added <a href="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=24434" target="_blank" title="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=24434">GF#24434</a>  to track a set of issues for technical correction.</p>



<a name="175755724"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Shall%20server%20metadata%20have%20%24export%20operation/near/175755724" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Sayer <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Shall.20server.20metadata.20have.20.24export.20operation.html#175755724">(Sep 15 2019 at 16:24)</a>:</h4>
<p><span class="user-mention" data-user-id="191414">@Dan Gottlieb</span>  OK, I'll stop over after lunch. Would like to discuss using Parameter resources</p>



<a name="175758649"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Shall%20server%20metadata%20have%20%24export%20operation/near/175758649" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Robison <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Shall.20server.20metadata.20have.20.24export.20operation.html#175758649">(Sep 15 2019 at 17:43)</a>:</h4>
<p>Just chiming in, I think the STU3 Capability Statement doesn't support listing operations at the <code>rest</code> level, any recommendations for dealing with this? We have our listed in the sever operations. Possible I'm missing something.</p>



<a name="175761581"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Shall%20server%20metadata%20have%20%24export%20operation/near/175761581" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Shall.20server.20metadata.20have.20.24export.20operation.html#175761581">(Sep 15 2019 at 19:03)</a>:</h4>
<p>In STU3 it's just <a href="http://hl7.org/fhir/STU3/capabilitystatement-definitions.html#CapabilityStatement.rest.operation" target="_blank" title="http://hl7.org/fhir/STU3/capabilitystatement-definitions.html#CapabilityStatement.rest.operation">http://hl7.org/fhir/STU3/capabilitystatement-definitions.html#CapabilityStatement.rest.operation</a> -- so you can <em>only</em> list at the REST (i.e., top) level, and not at the resource-type level. So you'd just document everything there, I suppose.</p>



<a name="175762673"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Shall%20server%20metadata%20have%20%24export%20operation/near/175762673" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Cosmo <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Shall.20server.20metadata.20have.20.24export.20operation.html#175762673">(Sep 15 2019 at 19:33)</a>:</h4>
<p><strong>GCP Fhir Store with $export</strong></p>
<p>This is probably a bit too late for most, but in case you're interested to try this, it is now available:</p>
<p>1. To get an access token: <br>
curl -X POST <a href="https://pcosmo72-eval-prod.apigee.net/fhir/oauth2/accesstoken" target="_blank" title="https://pcosmo72-eval-prod.apigee.net/fhir/oauth2/accesstoken">https://pcosmo72-eval-prod.apigee.net/fhir/oauth2/accesstoken</a> -H 'Accept: application/json' -H 'Authorization: Basic VUZHSGhGdnJzb0d4Z0RRRkI0anpNdXVHVGp1UDczR1Y6anBIODBDWGdiblpYSmp5NQ==' -H 'Cache-Control: no-cache' -H 'Content-Type: application/json' -d '{ "grantType" : "client_credentials", "scopes" : "user/*.read" }'</p>
<p>This call will return an access token which you will need to use in the Authorization Bearer header for calls to the following FHIR store.</p>
<p>2. FHIR Path: <a href="https://pcosmo72-eval-prod.apigee.net/fhir/stu3" target="_blank" title="https://pcosmo72-eval-prod.apigee.net/fhir/stu3">https://pcosmo72-eval-prod.apigee.net/fhir/stu3</a><br>
For example, export (replace <strong>&lt;your name&gt;</strong> so that the export goes into your own specific bucket sub-directory, and don't forget to replace <strong>&lt;access token&gt; </strong>as well):</p>
<p>curl -i -X GET <a href="https://pcosmo72-eval-prod.apigee.net/fhir/stu3/\$export?gcsDestination=gs://fhirexport/**&lt;your" target="_blank" title="https://pcosmo72-eval-prod.apigee.net/fhir/stu3/\$export?gcsDestination=gs://fhirexport/**&lt;your">https://pcosmo72-eval-prod.apigee.net/fhir/stu3/\$export?gcsDestination=gs://fhirexport/**&lt;your</a> name&gt;<strong> -H 'Accept: application/fhir+json' -H 'Authorization: Bearer </strong>&lt;access token&gt;**' -H 'Cache-Control: no-cache' -H 'Content-Type: application/fhir+json;charset=utf-8' -H 'Prefer: respond-async'</p>
<p>Note that the operation ID will be returned as the last value of the Content-Location header that is returned. The Content-Location value itself is wrong because the FHIR store is behind a proxy, however, the operation ID is correct, for example:</p>
<p>Content-Location: projects/pcosmo-test/locations/us-central1/datasets/connectathon/fhirStores/test001/exports/<strong>7011541669862440961</strong></p>
<p>You can use this operation ID to get the operation status:</p>
<p>curl -X GET <a href="https://pcosmo72-eval-prod.apigee.net/fhir/stu3/exports/**7011541669862440961**" target="_blank" title="https://pcosmo72-eval-prod.apigee.net/fhir/stu3/exports/**7011541669862440961**">https://pcosmo72-eval-prod.apigee.net/fhir/stu3/exports/**7011541669862440961**</a> -H 'Accept: application/fhir+json;charset=utf-8' -H 'Authorization: Bearer NEVOpfc4fhGAbfp15c7vvZA8u4II' -H 'Cache-Control: no-cache' -H 'Content-Type: application/fhir+json;charset=utf-8'</p>
<p>In order to get access to the GCS bucket send me (<a href="mailto:pcosmo@google.com" title="mailto:pcosmo@google.com">pcosmo@google.com</a>) the email for your GCP account and I'll give you read access.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
