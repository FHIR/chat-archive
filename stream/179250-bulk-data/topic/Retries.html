---
layout: page
title: "FHIR Chat  · Retries · bulk data"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/index.html">bulk data</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Retries.html">Retries</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153963299"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Retries/near/153963299" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Retries.html#153963299">(May 17 2018 at 15:38)</a>:</h4>
<p>We don't provide any advice for what to do if an attempted download fails at the end of the bulk data. Should a client retry? How many times?</p>



<a name="153963302"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Retries/near/153963302" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Retries.html#153963302">(May 17 2018 at 15:45)</a>:</h4>
<p>Should we have advice on this? Beyond "use appropriate HTC status code to indicate and respond to errors"? Some error statuses indicate that they are transient and retry makes sense;  others don't.</p>



<a name="153963318"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Retries/near/153963318" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Retries.html#153963318">(May 17 2018 at 16:29)</a>:</h4>
<p>I don't know. it feels as though it would be unfriendly to hammer on the server in case the problem resolved but it would also be unfriendly to the client to just give up... I'm not sure how to handle this .</p>



<a name="153963324"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Retries/near/153963324" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Retries.html#153963324">(May 17 2018 at 16:38)</a>:</h4>
<p>ok, so other than this, I - finally - have a general client that you can point to any server to do a bulk download. Let me know if you want me to point it to your server and try it out</p>



<a name="153963332"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Retries/near/153963332" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan Gottlieb <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Retries.html#153963332">(May 17 2018 at 18:30)</a>:</h4>
<p>Sure - the front end to the SMART bulk data server is at <a href="https://bulk-data.smarthealthit.org/" target="_blank" title="https://bulk-data.smarthealthit.org/">https://bulk-data.smarthealthit.org/</a></p>



<a name="153963743"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Retries/near/153963743" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Retries.html#153963743">(May 18 2018 at 18:58)</a>:</h4>
<p>Dan, that server returns a json capability statement even if you ask for an XML one</p>



<a name="153963744"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Retries/near/153963744" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan Gottlieb <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Retries.html#153963744">(May 18 2018 at 19:01)</a>:</h4>
<p>Yup, we only have json support implemented so far :)</p>



<a name="153963745"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Retries/near/153963745" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Retries.html#153963745">(May 18 2018 at 19:01)</a>:</h4>
<p>(I think the "fix" is to return 406, and to ensure the Capability Statement represents this fact )</p>



<a name="153963746"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Retries/near/153963746" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Retries.html#153963746">(May 18 2018 at 19:02)</a>:</h4>
<p>yes.</p>



<a name="153963747"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Retries/near/153963747" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Retries.html#153963747">(May 18 2018 at 19:03)</a>:</h4>
<p>I made the request for xml by mistake, but you should return an error if you're not going to support xml</p>



<a name="153963748"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Retries/near/153963748" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Retries.html#153963748">(May 18 2018 at 19:06)</a>:</h4>
<p>also, this is a fragment of what you return for Group?_summary=true</p>



<a name="153963749"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Retries/near/153963749" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Retries.html#153963749">(May 18 2018 at 19:06)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="s2">&quot;entry&quot;</span><span class="err">:</span> <span class="p">[{</span>
        <span class="nt">&quot;resourceType&quot;</span><span class="p">:</span> <span class="s2">&quot;Group&quot;</span><span class="p">,</span>
        <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="nt">&quot;quantity&quot;</span><span class="p">:</span> <span class="mi">27</span><span class="p">,</span>
        <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Blue Cross Blue Shield&quot;</span><span class="p">,</span>
        <span class="nt">&quot;text&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;status&quot;</span><span class="p">:</span> <span class="s2">&quot;generated&quot;</span><span class="p">,</span>
            <span class="nt">&quot;div&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;div xmlns=\&quot;http://www.w3.org/1999/xhtml\&quot;&gt;Blue Cross Blue Shield&lt;/div&gt;&quot;</span>
        <span class="p">},</span>
        <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;person&quot;</span><span class="p">,</span>
        <span class="nt">&quot;actual&quot;</span><span class="p">:</span> <span class="kc">true</span>
    <span class="p">},</span>
</pre></div>



<a name="153963750"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Retries/near/153963750" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Retries.html#153963750">(May 18 2018 at 19:06)</a>:</h4>
<p>this is not valid...</p>



<a name="153963751"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Retries/near/153963751" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Retries.html#153963751">(May 18 2018 at 19:09)</a>:</h4>
<p>so then I initiate a bulk data request, get a response, and then check on the task to see how it's going. I get this:</p>



<a name="153963752"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Retries/near/153963752" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Retries.html#153963752">(May 18 2018 at 19:09)</a>:</h4>
<div class="codehilite"><pre><span></span>---------------------------
Debugger Exception Notification
---------------------------
Project FHIRToolkitR3.exe raised exception class Exception with message &#39;&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
&lt;meta charset=&quot;utf-8&quot;&gt;
&lt;title&gt;Error&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;pre&gt;Cannot GET /eyJlcnIiOiIiLCJwYWdlIjoxMDAwMCwiZHVyIjoxMCwidGx0IjoxNSwibSI6MX0/fhir/OiI2NDgwYWM4YjJjZDBmYjhkMjc3MTRiNzg2MGFlMzEyYTNkNGE5NzdkYTFlYzc3OTA2MGY0MWVkZGFiOTVlOWUzIiwicmVxdWVzdFN0YXJ0IjoxNTI2NjcwNTI3NjY1LCJzZWN1cmUiOmZhbHNlLCJyZXF1ZXN0IjoiaHR0cDovL2J1bGstZGF0YS5zbWFydGhlYWx0aGl0Lm9yZy9leUpsY25JaU9pSWlMQ0p3WVdkbElqb3hNREF3TUN3aVpIVnlJam94TUN3aWRHeDBJam94TlN3aWJTSTZNWDAvZmhpci9QYXRpZW50LyRleHBvcnQ_X291dHB1dEZvcm1hdD1hcHBsaWNhdGlvbi94LW5kanNvbiJ9/fhir/bulkstatus&lt;/pre&gt;
&lt;/body&gt;
&lt;/html&gt;
&#39;.
---------------------------
Break   Continue   Help
---------------------------
</pre></div>



<a name="153963753"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Retries/near/153963753" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Retries.html#153963753">(May 18 2018 at 19:09)</a>:</h4>
<p>?</p>



<a name="153963754"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Retries/near/153963754" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Retries.html#153963754">(May 18 2018 at 19:14)</a>:</h4>
<p>Is this HTML from your FHIRToolkit app Grahame?</p>



<a name="153963756"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Retries/near/153963756" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan Gottlieb <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Retries.html#153963756">(May 18 2018 at 19:18)</a>:</h4>
<p>So the issue with groups is the lack of support for the _summary parameter?</p>



<a name="153963757"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Retries/near/153963757" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan Gottlieb <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Retries.html#153963757">(May 18 2018 at 19:26)</a>:</h4>
<p>Also, that url doesn't look right (two /fhir path segments) - here's what the url I get from the content-location header looks like: <a href="https://bulk-data.smarthealthit.org/eyJlcnIiOiIiLCJwYWdlIjoxMDAwMCwiZHVyIjoxMCwidGx0IjoxNSwibSI6MSwiaWQiOiJmMjEyOGIxYThmY2ZkMmJmMjg0MTI0ZTNiZTZiMTBjZjY4YWM1OWE2MGI1MTc1NDc2Mjk1M2NkNTFkYjdmZWZkIiwicmVxdWVzdFN0YXJ0IjoxNTI2NjcxNDc5MDczLCJzZWN1cmUiOmZhbHNlLCJyZXF1ZXN0IjoiaHR0cDovL2J1bGstZGF0YS5zbWFydGhlYWx0aGl0Lm9yZy9leUpsY25JaU9pSWlMQ0p3WVdkbElqb3hNREF3TUN3aVpIVnlJam94TUN3aWRHeDBJam94TlN3aWJTSTZNWDAvZmhpci9QYXRpZW50LyRleHBvcnQifQ/fhir/bulkstatus" target="_blank" title="https://bulk-data.smarthealthit.org/eyJlcnIiOiIiLCJwYWdlIjoxMDAwMCwiZHVyIjoxMCwidGx0IjoxNSwibSI6MSwiaWQiOiJmMjEyOGIxYThmY2ZkMmJmMjg0MTI0ZTNiZTZiMTBjZjY4YWM1OWE2MGI1MTc1NDc2Mjk1M2NkNTFkYjdmZWZkIiwicmVxdWVzdFN0YXJ0IjoxNTI2NjcxNDc5MDczLCJzZWN1cmUiOmZhbHNlLCJyZXF1ZXN0IjoiaHR0cDovL2J1bGstZGF0YS5zbWFydGhlYWx0aGl0Lm9yZy9leUpsY25JaU9pSWlMQ0p3WVdkbElqb3hNREF3TUN3aVpIVnlJam94TUN3aWRHeDBJam94TlN3aWJTSTZNWDAvZmhpci9QYXRpZW50LyRleHBvcnQifQ/fhir/bulkstatus">https://bulk-data.smarthealthit.org/eyJlcnIiOiIiLCJwYWdlIjoxMDAwMCwiZHVyIjoxMCwidGx0IjoxNSwibSI6MSwiaWQiOiJmMjEyOGIxYThmY2ZkMmJmMjg0MTI0ZTNiZTZiMTBjZjY4YWM1OWE2MGI1MTc1NDc2Mjk1M2NkNTFkYjdmZWZkIiwicmVxdWVzdFN0YXJ0IjoxNTI2NjcxNDc5MDczLCJzZWN1cmUiOmZhbHNlLCJyZXF1ZXN0IjoiaHR0cDovL2J1bGstZGF0YS5zbWFydGhlYWx0aGl0Lm9yZy9leUpsY25JaU9pSWlMQ0p3WVdkbElqb3hNREF3TUN3aVpIVnlJam94TUN3aWRHeDBJam94TlN3aWJTSTZNWDAvZmhpci9QYXRpZW50LyRleHBvcnQifQ/fhir/bulkstatus</a></p>



<a name="153963781"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Retries/near/153963781" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Retries.html#153963781">(May 20 2018 at 12:19)</a>:</h4>
<p>no the HTML is from the server</p>



<a name="153963782"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Retries/near/153963782" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Retries.html#153963782">(May 20 2018 at 12:19)</a>:</h4>
<p>the issue with groups is that the bundle is not valid</p>



<a name="153963846"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Retries/near/153963846" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan Gottlieb <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Retries.html#153963846">(May 21 2018 at 13:45)</a>:</h4>
<p>Ah, I see what you mean about the bundle now - we'll fix that.</p>



<a name="153963847"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Retries/near/153963847" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan Gottlieb <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Retries.html#153963847">(May 21 2018 at 13:46)</a>:</h4>
<p>Regarding the 404, is it possible the client is modifying the url it's getting from the header?</p>



<a name="153963856"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Retries/near/153963856" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Retries.html#153963856">(May 21 2018 at 15:25)</a>:</h4>
<p>it's not supposed to be, but I'll double check</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
