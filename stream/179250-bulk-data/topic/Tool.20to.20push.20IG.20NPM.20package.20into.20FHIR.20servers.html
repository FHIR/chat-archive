---
layout: page
title: "FHIR Chat  · Tool to push IG NPM package into FHIR servers · bulk data"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/index.html">bulk data</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Tool.20to.20push.20IG.20NPM.20package.20into.20FHIR.20servers.html">Tool to push IG NPM package into FHIR servers</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="235515075"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Tool%20to%20push%20IG%20NPM%20package%20into%20FHIR%20servers/near/235515075" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Stanley <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Tool.20to.20push.20IG.20NPM.20package.20into.20FHIR.20servers.html#235515075">(Apr 21 2021 at 14:01)</a>:</h4>
<p>(Redirect from Implementers channel) Hi folks. I'm looking for an existing (preferably open source) tool that can push FHIR IG NPM packages (.tgz) built by Publisher into a FHIR server. With IGs being fundamental to FHIR, and the NPM IG packaging being the supported approach, I would find it odd if such a tool does not already exist. SmileCDR has an API to ingest NPM packages, but I'm looking to push and prefer non-proprietary.</p>



<a name="235520622"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Tool%20to%20push%20IG%20NPM%20package%20into%20FHIR%20servers/near/235520622" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Tool.20to.20push.20IG.20NPM.20package.20into.20FHIR.20servers.html#235520622">(Apr 21 2021 at 14:35)</a>:</h4>
<p>Can you say more about what it means to push an npm package into a server, and how this relates to block data?</p>



<a name="235522358"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Tool%20to%20push%20IG%20NPM%20package%20into%20FHIR%20servers/near/235522358" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Stanley <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Tool.20to.20push.20IG.20NPM.20package.20into.20FHIR.20servers.html#235522358">(Apr 21 2021 at 14:45)</a>:</h4>
<p>Graham suggested asking here. By pushing, I mean taking apart an NPM IG package into the constituent resources, and POSTing to FHIR server. The reason I ask is because my use case requires loading FHIR servers with IGs and would expect there is existing tooling to do so. As NPM packaging is the supported format, then what workflow are folks using load them into FHIR servers.</p>



<a name="235529159"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Tool%20to%20push%20IG%20NPM%20package%20into%20FHIR%20servers/near/235529159" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Church <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Tool.20to.20push.20IG.20NPM.20package.20into.20FHIR.20servers.html#235529159">(Apr 21 2021 at 15:15)</a>:</h4>
<p>I assume Grahame was thinking of bulk import, otherwise I don't see the relevance. I have an IG that consists of a bunch of resources, I want to load the resources into my server to configure it for use, how do I do that?</p>
<p>We use the google proprietary import operation for this general use case, but it doesn't support NPMs specifically. Might be an area for future improvement. Do other servers have support for loading resources from an NPM package?</p>



<a name="235529907"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Tool%20to%20push%20IG%20NPM%20package%20into%20FHIR%20servers/near/235529907" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Stanley <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Tool.20to.20push.20IG.20NPM.20package.20into.20FHIR.20servers.html#235529907">(Apr 21 2021 at 15:19)</a>:</h4>
<p>Ahh ok. I wondered why he sent me here :) Yeah, no direct relevance.</p>
<p>SmileCDR supports it but there's isn't an API exposed to do so in HAPI. If this tooling doesn't exist, I can do it manually in Go or Python, but I expected perhaps incorrectly that someone had made an open tool to do so.</p>



<a name="235554399"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Tool%20to%20push%20IG%20NPM%20package%20into%20FHIR%20servers/near/235554399" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Martin Höcker <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Tool.20to.20push.20IG.20NPM.20package.20into.20FHIR.20servers.html#235554399">(Apr 21 2021 at 17:58)</a>:</h4>
<p>Did you have a look at <a href="https://fire.ly/products/firely-terminal/">firely terminal</a>? I only tried it briefly, but I think it's compatible with the use-case you are describing. Most of the features are free, but the tool is not open source.</p>



<a name="235555019"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Tool%20to%20push%20IG%20NPM%20package%20into%20FHIR%20servers/near/235555019" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Stanley <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Tool.20to.20push.20IG.20NPM.20package.20into.20FHIR.20servers.html#235555019">(Apr 21 2021 at 18:03)</a>:</h4>
<p>I don't have it, but thanks for the tip. Will have a look!</p>



<a name="235564881"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Tool%20to%20push%20IG%20NPM%20package%20into%20FHIR%20servers/near/235564881" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Egger <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Tool.20to.20push.20IG.20NPM.20package.20into.20FHIR.20servers.html#235564881">(Apr 21 2021 at 19:09)</a>:</h4>
<p>there is in addition python upload code and you can configure hapi, see <a href="#narrow/stream/179167-hapi/topic/How.20to.20install.20the.20FHIR.20NPM.20Package.3F">https://chat.fhir.org/#narrow/stream/179167-hapi/topic/How.20to.20install.20the.20FHIR.20NPM.20Package.3F</a></p>



<a name="235575806"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Tool%20to%20push%20IG%20NPM%20package%20into%20FHIR%20servers/near/235575806" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Tool.20to.20push.20IG.20NPM.20package.20into.20FHIR.20servers.html#235575806">(Apr 21 2021 at 20:27)</a>:</h4>
<p>I think this is bulk import, just a variant format</p>



<a name="237970984"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Tool%20to%20push%20IG%20NPM%20package%20into%20FHIR%20servers/near/237970984" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Stanley <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Tool.20to.20push.20IG.20NPM.20package.20into.20FHIR.20servers.html#237970984">(May 08 2021 at 17:13)</a>:</h4>
<p>HI folks. Just a quick update, I'm writing an open source tool to push FHIR NPM IG packages to FHIR servers. What I'm seeing in loading (PUTting) FHIR resources is that there is an order of precendence for them to be accepted by HAPI (and maybe other servers), e.g. CodeSystem before ValueSet, etc. Is there a machine parseable list somewhere which lists dependencies between resources types?</p>



<a name="237972550"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Tool%20to%20push%20IG%20NPM%20package%20into%20FHIR%20servers/near/237972550" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Tool.20to.20push.20IG.20NPM.20package.20into.20FHIR.20servers.html#237972550">(May 08 2021 at 17:39)</a>:</h4>
<p>Is the order you're referring to just "a resource needs to be loaded before any resources that depend on it"? In general you can't do this calculation based on resource types alone; it is the actual references inside of instances that matter. For example, any resource can include an extension with a valueReference pointing to any other resource.</p>



<a name="237972761"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Tool%20to%20push%20IG%20NPM%20package%20into%20FHIR%20servers/near/237972761" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Tool.20to.20push.20IG.20NPM.20package.20into.20FHIR.20servers.html#237972761">(May 08 2021 at 17:43)</a>:</h4>
<p>So you'd need to do some kind of topological ordering on your actual data set rather than on an abstract list of resource types. Alternatively, you may be able to disable integrity checks while loading a large data set into the servers. Alternatively, you could partition data into self-contained subsets that you represent with transaction bundles, to handle cross-resource references within each bundle.</p>
<p>In general, all these considerations are something that a server would take care of with a well crafted $import operation; there is work on going to define the details for a standardized import operation, but right now your best bet would be to look at server specific capabilities, since we don't yet have standards for this beyond the draft stage.</p>



<a name="237977051"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Tool%20to%20push%20IG%20NPM%20package%20into%20FHIR%20servers/near/237977051" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Stanley <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Tool.20to.20push.20IG.20NPM.20package.20into.20FHIR.20servers.html#237977051">(May 08 2021 at 18:56)</a>:</h4>
<p>Thanks <span class="user-mention" data-user-id="191315">@Josh Mandel</span> for a wonderfully detailed answer. Yes, that's my use case and I understand better now the constraints.</p>



<a name="237977634"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Tool%20to%20push%20IG%20NPM%20package%20into%20FHIR%20servers/near/237977634" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Tool.20to.20push.20IG.20NPM.20package.20into.20FHIR.20servers.html#237977634">(May 08 2021 at 19:06)</a>:</h4>
<p>I would expect a server would consume an NPM package the same way it consumes a transaction - and there's no ordering required for a transaction.  Servers just need to manage the dependency links they find in whatever manner works best for them.</p>



<a name="237978580"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Tool%20to%20push%20IG%20NPM%20package%20into%20FHIR%20servers/near/237978580" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Stanley <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Tool.20to.20push.20IG.20NPM.20package.20into.20FHIR.20servers.html#237978580">(May 08 2021 at 19:22)</a>:</h4>
<p>Thanks <span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> Ok, so that implies a way to implement, put all the resources into a transaction and then let the server manage them. I wonder if there's a future feature here for FHIR NPM packages, e.g. have publisher create a transaction bundle of the resources? For now my little CLI app just grabs the package.tgz into memory and uses the .index.json to figure out what needs to be pushed to the FHIR server. (Related -- I wonder if .index.json could be included directly in /output rather than only in the tgz).  Again, thanks for the advice.</p>



<a name="238062359"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Tool%20to%20push%20IG%20NPM%20package%20into%20FHIR%20servers/near/238062359" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Tool.20to.20push.20IG.20NPM.20package.20into.20FHIR.20servers.html#238062359">(May 09 2021 at 21:15)</a>:</h4>
<p>I'm not sure what it would mean to include .index.json outside the package, since all the names in it are the names inside the package</p>



<a name="238134248"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Tool%20to%20push%20IG%20NPM%20package%20into%20FHIR%20servers/near/238134248" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Christian Gulden <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Tool.20to.20push.20IG.20NPM.20package.20into.20FHIR.20servers.html#238134248">(May 10 2021 at 12:49)</a>:</h4>
<p><span class="user-mention" data-user-id="194192">@Richard Stanley</span> have you seen HAPI's support for loading IGs? You can specify a registry or load the IG from a .tgz: <a href="https://github.com/hapifhir/hapi-fhir-jpaserver-starter/blob/master/src/main/resources/application.yaml#L43-L52">https://github.com/hapifhir/hapi-fhir-jpaserver-starter/blob/master/src/main/resources/application.yaml#L43-L52</a>. Of course this is HAPI-specific, but the implementation may be interesting to you. E.g. there seems to be an implicit ordering by resource types used when loading them into the server: <a href="https://github.com/hapifhir/hapi-fhir/blob/75c74a22dbd1f0dde3631b540d1898eef2a2666f/hapi-fhir-jpaserver-base/src/main/java/ca/uhn/fhir/jpa/packages/PackageInstallerSvcImpl.java#L85-L93">https://github.com/hapifhir/hapi-fhir/blob/75c74a22dbd1f0dde3631b540d1898eef2a2666f/hapi-fhir-jpaserver-base/src/main/java/ca/uhn/fhir/jpa/packages/PackageInstallerSvcImpl.java#L85-L93</a> (briefly skimming over the source code) - which might work well here due to the way these specific resources reference each other.</p>



<a name="238138213"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Tool%20to%20push%20IG%20NPM%20package%20into%20FHIR%20servers/near/238138213" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Stanley <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Tool.20to.20push.20IG.20NPM.20package.20into.20FHIR.20servers.html#238138213">(May 10 2021 at 13:06)</a>:</h4>
<p>Thanks <span class="user-mention" data-user-id="254858">@Christian Gulden</span> I'm happy for the link to the code!</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
