---
layout: page
title: "FHIR Chat  · Bulk Data Upload · bulk data"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/index.html">bulk data</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Bulk.20Data.20Upload.html">Bulk Data Upload</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="159398392"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Bulk%20Data%20Upload/near/159398392" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Bulk.20Data.20Upload.html#159398392">(Feb 26 2019 at 04:56)</a>:</h4>
<p>I'm chatting with a vendor about uploading bulk data. They would like to know how we would recommend uploading the results of a bulk data query to their own FHIR server .</p>



<a name="159398394"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Bulk%20Data%20Upload/near/159398394" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Bulk.20Data.20Upload.html#159398394">(Feb 26 2019 at 04:56)</a>:</h4>
<p>here's my thoughts:</p>



<a name="159398425"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Bulk%20Data%20Upload/near/159398425" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Bulk.20Data.20Upload.html#159398425">(Feb 26 2019 at 04:57)</a>:</h4>
<p>(we're also planning to define an $import operation this spring)</p>



<a name="159398443"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Bulk%20Data%20Upload/near/159398443" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Bulk.20Data.20Upload.html#159398443">(Feb 26 2019 at 04:58)</a>:</h4>
<p>Would love your thoughts!</p>



<a name="159398490"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Bulk%20Data%20Upload/near/159398490" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Bulk.20Data.20Upload.html#159398490">(Feb 26 2019 at 04:58)</a>:</h4>
<p>Post the nd-json files, one at a time to [base], the base URL for the service, with a mime type of application/fhir+ndjson, and the server automatically treats this is a batch operation to upload the resources in the nd-json file</p>



<a name="159398496"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Bulk%20Data%20Upload/near/159398496" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Bulk.20Data.20Upload.html#159398496">(Feb 26 2019 at 04:58)</a>:</h4>
<p>this is less than the $import operation we've previously talked about, but very simple to get going with.</p>



<a name="159398559"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Bulk%20Data%20Upload/near/159398559" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Bulk.20Data.20Upload.html#159398559">(Feb 26 2019 at 05:00)</a>:</h4>
<p>If we're talking about net new server behavior, might be more robust to post something like the full status response so the server can process files in the background ... But sure, if processing full ndjson files synchronously is feasible for this server, I'd say go for it.</p>



<a name="159398597"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Bulk%20Data%20Upload/near/159398597" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Bulk.20Data.20Upload.html#159398597">(Feb 26 2019 at 05:01)</a>:</h4>
<p>How would that work if there are references between some of the resources - e.g. a Patient pointing to Organization</p>



<a name="159398605"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Bulk%20Data%20Upload/near/159398605" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Bulk.20Data.20Upload.html#159398605">(Feb 26 2019 at 05:01)</a>:</h4>
<p>Uploading large files can be a pain because (as far as I know) there's no good standardized resume approach. (Is there?)</p>



<a name="159398653"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Bulk%20Data%20Upload/near/159398653" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Bulk.20Data.20Upload.html#159398653">(Feb 26 2019 at 05:02)</a>:</h4>
<p>upload - would have to accept broken links. resume - not catering for that in this simple API</p>



<a name="159398667"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Bulk%20Data%20Upload/near/159398667" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Bulk.20Data.20Upload.html#159398667">(Feb 26 2019 at 05:03)</a>:</h4>
<p>Accept them, sure.  But would it repair them as other resources are loaded?</p>



<a name="159398677"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Bulk%20Data%20Upload/near/159398677" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Bulk.20Data.20Upload.html#159398677">(Feb 26 2019 at 05:03)</a>:</h4>
<p>If it keeps the original ids, that's easy.  But if it changes them, there'd be update work involved</p>



<a name="159398679"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Bulk%20Data%20Upload/near/159398679" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Bulk.20Data.20Upload.html#159398679">(Feb 26 2019 at 05:03)</a>:</h4>
<p>Makes sense. You could also just have the client turn ndjson files into bundles (can be done in a streaming fashion even) so the server doesn't need special behavior</p>



<a name="159398721"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Bulk%20Data%20Upload/near/159398721" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Bulk.20Data.20Upload.html#159398721">(Feb 26 2019 at 05:04)</a>:</h4>
<p>If synchronous upload and one file at a time and suspended referential integrity checks are all okay.</p>



<a name="159401142"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Bulk%20Data%20Upload/near/159401142" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Bulk.20Data.20Upload.html#159401142">(Feb 26 2019 at 06:02)</a>:</h4>
<blockquote>
<p>you could also just have the client turn ndjson files into bundles</p>
</blockquote>
<p>yes, you could. Not really consistent with our general philosophy of shoving work to the server where it's convenient</p>



<a name="159407133"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Bulk%20Data%20Upload/near/159407133" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Bulk.20Data.20Upload.html#159407133">(Feb 26 2019 at 08:20)</a>:</h4>
<p>Could we post the export status result, then let the server manage the rest?</p>



<a name="159407208"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Bulk%20Data%20Upload/near/159407208" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Bulk.20Data.20Upload.html#159407208">(Feb 26 2019 at 08:21)</a>:</h4>
<p>Grabbing the large binaries as it can.</p>



<a name="159407282"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Bulk%20Data%20Upload/near/159407282" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Bulk.20Data.20Upload.html#159407282">(Feb 26 2019 at 08:23)</a>:</h4>
<p>Not a fan of the post ndjson to the root... The size of these files is likely larger than post can handle.</p>



<a name="159407389"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Bulk%20Data%20Upload/near/159407389" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Bulk.20Data.20Upload.html#159407389">(Feb 26 2019 at 08:25)</a>:</h4>
<p>And status and delete processing could work the same as export.</p>



<a name="159407457"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Bulk%20Data%20Upload/near/159407457" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nicola (RIO/SS) <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Bulk.20Data.20Upload.html#159407457">(Feb 26 2019 at 08:26)</a>:</h4>
<p>My research in uploading large files was dissapointing. There is no good way (most of services like dropbox, s3 just split and upload  in chunks). Even streaming http working only for download. We can turn upload into download pointing server to download api?</p>



<a name="159407550"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Bulk%20Data%20Upload/near/159407550" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Bulk.20Data.20Upload.html#159407550">(Feb 26 2019 at 08:29)</a>:</h4>
<p>My suggestion was to post the final output of the export to the import.</p>



<a name="159408012"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Bulk%20Data%20Upload/near/159408012" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nicola (RIO/SS) <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Bulk.20Data.20Upload.html#159408012">(Feb 26 2019 at 08:37)</a>:</h4>
<p>Another option is use web sockets channel  - but it does not look resty :)</p>



<a name="159425745"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Bulk%20Data%20Upload/near/159425745" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Bulk.20Data.20Upload.html#159425745">(Feb 26 2019 at 14:03)</a>:</h4>
<p>What’s the limit on post size? I don’t have any limits....</p>



<a name="159425998"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Bulk%20Data%20Upload/near/159425998" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Bulk.20Data.20Upload.html#159425998">(Feb 26 2019 at 14:06)</a>:</h4>
<blockquote>
<blockquote>
<p>you could also just have the client turn ndjson files into bundles</p>
</blockquote>
<p>yes, you could. Not really consistent with our general philosophy of shoving work to the server where it's convenient</p>
</blockquote>
<p>The context for this discussion was, I thought, a simple stopgap -- before we define an import operation. But if your client only needs to work with one server and that server developer is willing to do the work, then by all means :-)</p>



<a name="159443516"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Bulk%20Data%20Upload/near/159443516" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nicola (RIO/SS) <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Bulk.20Data.20Upload.html#159443516">(Feb 26 2019 at 18:00)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> it is usually limited by your web server implementation, memory buffers and disk cache and all proxies on the way. In google cloud or aws if i’m not wrong - max size is about 4g, but real chunks sent by official sdk are much smaller.</p>



<a name="159443920"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Bulk%20Data%20Upload/near/159443920" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nicola (RIO/SS) <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Bulk.20Data.20Upload.html#159443920">(Feb 26 2019 at 18:06)</a>:</h4>
<p>For downloading you can use <a href="https://ru.wikipedia.org/wiki/Chunked_transfer_encoding" target="_blank" title="https://ru.wikipedia.org/wiki/Chunked_transfer_encoding">https://ru.wikipedia.org/wiki/Chunked_transfer_encoding</a> and be memory efficient with ndjson processing data in a stream.</p>



<a name="159444077"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Bulk%20Data%20Upload/near/159444077" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nicola (RIO/SS) <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Bulk.20Data.20Upload.html#159444077">(Feb 26 2019 at 18:09)</a>:</h4>
<p>But this protocol almost not supported by HTTP client libraries for uploading.</p>



<a name="159444191"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Bulk%20Data%20Upload/near/159444191" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nicola (RIO/SS) <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Bulk.20Data.20Upload.html#159444191">(Feb 26 2019 at 18:10)</a>:</h4>
<p>Potentially we can open web socket and stream data with back pressure and some type of cursor to restore upload in a specific position, but this is not REST at all :(</p>



<a name="159444371"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Bulk%20Data%20Upload/near/159444371" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nicola (RIO/SS) <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Bulk.20Data.20Upload.html#159444371">(Feb 26 2019 at 18:13)</a>:</h4>
<p>Databases replicate data thro socket connection or by producing  chunks of replication log as small files indexed by counter - <a href="/user_uploads/10155/Q7ItgcAJ853wp4m6YTlvAOj6/pasted_image.png" target="_blank" title="pasted_image.png">pasted image</a> <a href="http://1.bp.blogspot.com/_26KnjtB2MFo/SYVDrEr1HXI/AAAAAAAAAEY/ncq_AW-Vv-w/s320/pg_warm_standby.png" target="_blank" title="http://1.bp.blogspot.com/_26KnjtB2MFo/SYVDrEr1HXI/AAAAAAAAAEY/ncq_AW-Vv-w/s320/pg_warm_standby.png">http://1.bp.blogspot.com/_26KnjtB2MFo/SYVDrEr1HXI/AAAAAAAAAEY/ncq_AW-Vv-w/s320/pg_warm_standby.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/10155/Q7ItgcAJ853wp4m6YTlvAOj6/pasted_image.png" target="_blank" title="pasted image"><img src="/user_uploads/10155/Q7ItgcAJ853wp4m6YTlvAOj6/pasted_image.png"></a></div><div class="message_inline_image"><a href="http://1.bp.blogspot.com/_26KnjtB2MFo/SYVDrEr1HXI/AAAAAAAAAEY/ncq_AW-Vv-w/s320/pg_warm_standby.png" target="_blank" title="http://1.bp.blogspot.com/_26KnjtB2MFo/SYVDrEr1HXI/AAAAAAAAAEY/ncq_AW-Vv-w/s320/pg_warm_standby.png"><img src="https://uploads.zulipusercontent.net/af805a1b2e8d51dea75a5cd54d09fbb392667eb3/687474703a2f2f312e62702e626c6f6773706f742e636f6d2f5f32364b6e6a7442324d466f2f53595644724572314858492f41414141414141414145592f6e63715f41572d56762d772f733332302f70675f7761726d5f7374616e6462792e706e67"></a></div>



<a name="159444609"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Bulk%20Data%20Upload/near/159444609" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nicola (RIO/SS) <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Bulk.20Data.20Upload.html#159444609">(Feb 26 2019 at 18:16)</a>:</h4>
<p><a href="https://gist.github.com/niquola/2bf49e7c9119c425261389e3a7a3d1d3" target="_blank" title="https://gist.github.com/niquola/2bf49e7c9119c425261389e3a7a3d1d3">https://gist.github.com/niquola/2bf49e7c9119c425261389e3a7a3d1d3</a> here is my notes from amsterdam discussion</p>



<a name="159452130"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Bulk%20Data%20Upload/near/159452130" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Bulk.20Data.20Upload.html#159452130">(Feb 26 2019 at 19:49)</a>:</h4>
<p>Usually a setting in iis, and default isn't that big, nowhere near gigabytes that I've experienced. That's where compression denial of service attacks go. I'll try dig out the setting I use in .Net to make it bigger (to 4mb I think I made it so larger codesystems can be loaded)</p>



<a name="159477529"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Bulk%20Data%20Upload/near/159477529" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Hansen <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Bulk.20Data.20Upload.html#159477529">(Feb 27 2019 at 02:45)</a>:</h4>
<p>In my opinion uploading the files directly through the API doesn't seem practical except in use cases where the amount of data is very small. In those cases batch bundles seem to be a better option. Giving the server something like the result of an export (with a list of files) seems more practical.</p>



<a name="159861807"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Bulk%20Data%20Upload/near/159861807" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Bulk.20Data.20Upload.html#159861807">(Mar 03 2019 at 19:40)</a>:</h4>
<p>indeed. but we were looking for a stop gap measure</p>



<a name="159862757"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Bulk%20Data%20Upload/near/159862757" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Bulk.20Data.20Upload.html#159862757">(Mar 03 2019 at 20:08)</a>:</h4>
<p>(for stop gap, I still think I'd  just have the client produce a normal, compliant bundle)</p>



<a name="161090651"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Bulk%20Data%20Upload/near/161090651" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Church <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Bulk.20Data.20Upload.html#161090651">(Mar 18 2019 at 19:56)</a>:</h4>
<p>We have been experimenting with bulk import in Google Cloud quite a bit. I'll start a separate thread with some lessons learned for the general case. For the stopgap case, you can do a lot with batch/transaction bundles if the client does the preprocessing.</p>
<p>We wrote some client code that walks a set of input files, parses resources, constructs the reference graph, does reference tiering, and produces a sequence of transaction bundles that can be executed in sequential order to accomplish the import while preserving referential integrity at every point. There is some risk that the data could have reference cycles too large to post as a bundle and/or to execute in a single transaction, but that's pretty unlikely in our experience. In practice this has been quite successful at getting data in, at the cost of some heavy lifting on the client side.</p>
<p>I'm bringing this up partly just to agree with what has already been said above, but also because referential integrity and bundle semantics are a major challenge in defining the general $import operation.</p>



<a name="161091079"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Bulk%20Data%20Upload/near/161091079" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Bulk.20Data.20Upload.html#161091079">(Mar 18 2019 at 20:01)</a>:</h4>
<p>how have you handled circular dependencies?</p>



<a name="161096680"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Bulk%20Data%20Upload/near/161096680" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Church <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Bulk.20Data.20Upload.html#161096680">(Mar 18 2019 at 21:08)</a>:</h4>
<p>Put the whole cycle in a single bundle. As part of the transaction, the bundle's local references will either remain intact (for PUT) or get rewritten to server-assigned IDs (for POST).</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
