---
layout: page
title: "FHIR Chat  · Epic Bulk Data Export 401 Error · bulk data"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/index.html">bulk data</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Epic.20Bulk.20Data.20Export.20401.20Error.html">Epic Bulk Data Export 401 Error</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="264211899"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Epic%20Bulk%20Data%20Export%20401%20Error/near/264211899" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert Barrett <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Epic.20Bulk.20Data.20Export.20401.20Error.html#264211899">(Dec 08 2021 at 20:00)</a>:</h4>
<p>Hey all,</p>
<p>I'm implementing a FHIR integration in Python to pull data from Epic's sandbox environment. I wanted to see if anyone else has attempted this, or has had any issues with token authentication when doing the kick-off request.</p>
<p>Some notable information on my build/progress:</p>
<ol>
<li>I'm using  <a href="https://fhir.epic.com/interconnect-fhir-oauth/oauth2/token">https://fhir.epic.com/interconnect-fhir-oauth/oauth2/token</a> to get the token</li>
<li>The JWT passed back is valid and signed</li>
<li>Per Epic's bulk export specification, I'm using <a href="https://apporchard.epic.com/interconnect-aocurprd-oauth/api/FHIR/R4/Group/eIscQb2HmqkT.aPxBKDR1mIj3721CpVk1suC7rlu3yX83/$export">https://apporchard.epic.com/interconnect-aocurprd-oauth/api/FHIR/R4/Group/eIscQb2HmqkT.aPxBKDR1mIj3721CpVk1suC7rlu3yX83/$export</a> as the endpoint to request data from.</li>
<li>
<p>To the above url, in my get request, I pass the following headers:<br>
        'Accept':'application/fhir+json',<br>
        'Content-type' : 'application/fhir+json', &lt;- I've also tried removing this as it isn't explicitly stated to be passed<br>
        'Prefer':'respond-async',<br>
        'Authorization' : 'Bearer ' + token</p>
</li>
<li>
<p>I use a session to handle requests, and preserve the Authorization header by overriding NoRebuildAuthSession in requests.Session</p>
</li>
</ol>
<p>The response from the get request comes  back with a 401 error and the following information under www-authenticate:<br>
Bearer error="invalid_token", error_description="The access token provided is not valid"</p>
<p>Any guidance would be helpful! I think I might be using the wrong endpoint but I'm totally stumped right now.</p>



<a name="264237147"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Epic%20Bulk%20Data%20Export%20401%20Error/near/264237147" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Epic.20Bulk.20Data.20Export.20401.20Error.html#264237147">(Dec 08 2021 at 23:37)</a>:</h4>
<p><a href="https://stackoverflow.com/questions/70281101/issues-with-epic-bulk-data-request-401-error">https://stackoverflow.com/questions/70281101/issues-with-epic-bulk-data-request-401-error</a> - please only ask in one place at a time</p>



<a name="264249452"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Epic%20Bulk%20Data%20Export%20401%20Error/near/264249452" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert Barrett <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Epic.20Bulk.20Data.20Export.20401.20Error.html#264249452">(Dec 09 2021 at 02:36)</a>:</h4>
<p>Apologies - I haven't used this forum before and wasn't sure if it was the appropriate place to ask questions pertaining to Epic.</p>



<a name="264252087"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Epic%20Bulk%20Data%20Export%20401%20Error/near/264252087" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Epic.20Bulk.20Data.20Export.20401.20Error.html#264252087">(Dec 09 2021 at 03:23)</a>:</h4>
<p>probably this is the best place</p>



<a name="264306150"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Epic%20Bulk%20Data%20Export%20401%20Error/near/264306150" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cooper Thompson <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Epic.20Bulk.20Data.20Export.20401.20Error.html#264306150">(Dec 09 2021 at 14:09)</a>:</h4>
<p>For troubleshooting Epic sandbox auth issues, <a href="mailto:open@epic.com">open@epic.com</a> is probably the best support channel.  Can you send your issue there, and include your client ID and the access token you got from the sandbox?</p>



<a name="264356417"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Epic%20Bulk%20Data%20Export%20401%20Error/near/264356417" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Justin Kenel <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Epic.20Bulk.20Data.20Export.20401.20Error.html#264356417">(Dec 09 2021 at 19:48)</a>:</h4>
<p><span class="user-mention" data-user-id="463053">@Robert Barrett</span> I've been running into a similar issue and have sent a similar e-mail to Epic. I _think_ in your case that the access token is invalid because you got a token from <a href="https://fhir.epic.com/interconnect-fhir-oauth/oauth2/token">https://fhir.epic.com/interconnect-fhir-oauth/oauth2/token</a> and are trying to use it against app orchard, which I believe is different.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
