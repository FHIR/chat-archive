---
layout: page
title: "FHIR Chat  · _type parameter · bulk data"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/index.html">bulk data</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/_type.20parameter.html">_type parameter</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="177277334"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/_type%20parameter/near/177277334" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/_type.20parameter.html#177277334">(Oct 03 2019 at 19:18)</a>:</h4>
<p>While reading the spec, I think the description about _type parameter is confusing. For example, the first sentence says </p>
<p><code>Only resources of the specified resource types(s) SHALL be included in the response.</code></p>
<p>but then the following paragraph says </p>
<p><code>However, other resources outside of the patient compartment that are helpful in interpreting the patient data (such as Organization and Practitioner) may also be returned.</code> </p>
<p>If I send request with <code>_type=Patient</code> and server returns both <code>Patient</code> and <code>Condition</code>. According to the first sentence, the response is invalid. According to the second sentence, the response is fine.<br>
Also, what if server does NOT have all type of resources specified in <code>_type</code>, ie <code>_type=Patient,Condition,Practitioner</code>, but server cannot return <code>Practitioner</code>. Should server throw out the request with 4xx error?</p>



<a name="177528987"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/_type%20parameter/near/177528987" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/_type.20parameter.html#177528987">(Oct 07 2019 at 15:14)</a>:</h4>
<p>Another question:<br>
<code>Servers unable to support _type SHOULD return an error</code><br>
Should we say where the error code shall be?<br>
<span class="user-mention" data-user-id="191414">@Dan Gottlieb</span> <span class="user-mention" data-user-id="191315">@Josh Mandel</span></p>



<a name="177536626"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/_type%20parameter/near/177536626" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan Gottlieb <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/_type.20parameter.html#177536626">(Oct 07 2019 at 16:34)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="191506">@Yunwei Wang</span> ! On your first question, I think the sentence around providing additional resources outside the patient compartment is guidance on the immediately preceding sentence around what resources the sever should make available for Patient and Group requests - eg. the set of resource types that the _type parameter can subset. When _type is provided, servers should only return the resource types specified by the parameter. The way this is written is pretty confusing though - we should definitely clarify the language (or move this sentence) in the next version of the IG.</p>



<a name="177536681"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/_type%20parameter/near/177536681" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan Gottlieb <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/_type.20parameter.html#177536681">(Oct 07 2019 at 16:35)</a>:</h4>
<p>In terms of errors, the IG says that "If the client explicitly asks for export of resources that the bulk data server doesn’t support, the server SHOULD return details via an OperationOutcome resource in an error response to the request." Of course, for resource types that are supported but don't have data, the server would just return a response with no files.</p>



<a name="177537108"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/_type%20parameter/near/177537108" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan Gottlieb <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/_type.20parameter.html#177537108">(Oct 07 2019 at 16:40)</a>:</h4>
<p>Regarding error codes, I agree that 4xx seems appropriate if the _type parameter isn't supported by the server or lists an invalid resource type. The IG generally specifies using a 4xx or 5xx code for kickoff request errors, but it's probably worth adding more specific guidance in future versions. Does anyone think something other than 4xx should be used for this scenario?</p>



<a name="201460313"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/_type%20parameter/near/201460313" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/_type.20parameter.html#201460313">(Jun 20 2020 at 03:56)</a>:</h4>
<p>I don't understand the definition for the _type parameter on the $export operation. The definition is:</p>
<blockquote>
<p>A string of comma-delimited FHIR resource types. Only resources of the specified resource types(s) SHOULD be included in the response. If this parameter is omitted, the server SHOULD return all supported resources within the scope of the client authorization. For non-system-level requests, the Patient Compartment SHOULD be used as a point of reference for recommended resources to be returned as well as other resources outside of the patient compartment that are helpful in interpreting the patient data such as Organization and Practitioner. Resource references MAY be relative URIs with the format &lt;resource type&gt;/&lt;id&gt;, or absolute URIs with the same structure rooted in the base URI for the server from which the export was performed. References will be resolved looking for a resource with the specified type and id within the file set. Note: Implementations MAY limit the resources returned to specific subsets of FHIR, such as those defined in the Argonaut Implementation Guide.</p>
</blockquote>



<a name="201460327"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/_type%20parameter/near/201460327" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/_type.20parameter.html#201460327">(Jun 20 2020 at 03:57)</a>:</h4>
<p>This bit makes sense:</p>
<blockquote>
<p>A string of comma-delimited FHIR resource types. Only resources of the specified resource types(s) SHOULD be included in the response. If this parameter is omitted, the server SHOULD return all supported resources within the scope of the client authorization. For non-system-level requests, the Patient Compartment SHOULD be used as a point of reference for recommended resources to be returned as well as other resources outside of the patient compartment that are helpful in interpreting the patient data such as Organization and Practitioner. </p>
</blockquote>
<p>But this next bit.... I don't know what it's talking about:</p>
<blockquote>
<p>Resource references MAY be relative URIs with the format &lt;resource type&gt;/&lt;id&gt;, or absolute URIs with the same structure rooted in the base URI for the server from which the export was performed. References will be resolved looking for a resource with the specified type and id within the file set. </p>
</blockquote>
<p>This bit makes sense:</p>
<blockquote>
<p>Note: Implementations MAY limit the resources returned to specific subsets of FHIR, such as those defined in the Argonaut Implementation Guide.</p>
</blockquote>



<a name="201462531"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/_type%20parameter/near/201462531" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/_type.20parameter.html#201462531">(Jun 20 2020 at 05:06)</a>:</h4>
<p>I can only guess that it's stating the the resource content might have relative or absolute references inside, e.g. From patient to the managing organization resource? Even if those are also included in the bulk export?</p>



<a name="201462538"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/_type%20parameter/near/201462538" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/_type.20parameter.html#201462538">(Jun 20 2020 at 05:06)</a>:</h4>
<p>if that's what it's saying it shouldn't be inside the definition of the type parameter</p>



<a name="201462544"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/_type%20parameter/near/201462544" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/_type.20parameter.html#201462544">(Jun 20 2020 at 05:07)</a>:</h4>
<p>Hmm.</p>



<a name="201478447"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/_type%20parameter/near/201478447" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan Gottlieb <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/_type.20parameter.html#201478447">(Jun 20 2020 at 13:50)</a>:</h4>
<p>Yup, that paragraph is in the wrong place (I suspect it got misplaced when the params were moved into a table, and no one caught it prior to publication). I fixed it on Github a few weeks ago as part of the v1.2 work: <a href="https://github.com/HL7/bulk-data/commit/3e89cd152838ce82c8e0370e2bc6cab7fe0b7bca">https://github.com/HL7/bulk-data/commit/3e89cd152838ce82c8e0370e2bc6cab7fe0b7bca</a> .</p>



<a name="259267839"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/_type%20parameter/near/259267839" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Zautke <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/_type.20parameter.html#259267839">(Oct 27 2021 at 16:38)</a>:</h4>
<p>Looking at the operation definitions for $export, _type is defined as repeating. Does this mean that a client could in theory sent multiple comma-separated lists? Or was this cardinality only choosen to reflect the part that you can have multiple single values that should be treated as a comma-separated list?</p>



<a name="259278179"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/_type%20parameter/near/259278179" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan Gottlieb <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/_type.20parameter.html#259278179">(Oct 27 2021 at 17:47)</a>:</h4>
<p>Yup, the language in the IG is:</p>
<blockquote>
<p>A client MAY repeat kick-off parameters that accept comma delimited values multiple times in a kick-off request. The server SHALL treat the values provided as if they were comma delimited values within a single instance of the parameter. Note that we will be soliciting feedback on the use of comma delimited values within parameters, and depending on the response may consider deprecating this input approach in favor of repeating parameters in a future version of this IG.</p>
</blockquote>



<a name="259278845"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/_type%20parameter/near/259278845" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan Gottlieb <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/_type.20parameter.html#259278845">(Oct 27 2021 at 17:51)</a>:</h4>
<p>(This is a consequence of adding support for kick-off requests that POST a FHIR Parameters resource in v2 (which have a convention of repeating parameters when there are multiple values) while retaining support for v1's comma delimited FHIR search style parameters)</p>



<a name="259302477"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/_type%20parameter/near/259302477" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Zautke <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/_type.20parameter.html#259302477">(Oct 27 2021 at 20:34)</a>:</h4>
<p>Alright, thanks for the clarification, will clean up my implementation :)</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
