---
layout: page
title: "FHIR Chat  · Scopes for export · bulk data"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/index.html">bulk data</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Scopes.20for.20export.html">Scopes for export</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="239643692"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Scopes%20for%20export/near/239643692" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vladimir Ignatov <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Scopes.20for.20export.html#239643692">(May 20 2021 at 19:08)</a>:</h4>
<p>The default scope for bulk data export is <code>system/*.read</code>. However, some servers currently support (or even require) <code>system/*.*</code>. I may be wrong but for me <code>*</code> at the end implies write access and the bulk data clients should operate in read-only mode.</p>
<p>My question is related to testing. I wonder if the following would be a correct way to classify server behavior:</p>
<ol>
<li>The server <em>requires</em> <code>system/*.*</code> or other scopes like <code>system/Patient.*</code> -&gt; ERROR</li>
<li>The server <em>allows</em> <code>system/*.*</code> or other scopes like <code>system/Patient.*</code>, but also supports <code>system/*.read</code> -&gt; WARNING</li>
<li>The server <em>rejects</em> any scope not ending in <code>.read</code> -&gt; CORRECT</li>
</ol>
<p>Perhaps another version of the same question - even though Backend Services do allow <code>write</code> and <code>*</code> in system scopes, should we be more explicit in the bulk export use case?</p>



<a name="239646233"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Scopes%20for%20export/near/239646233" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Scopes.20for.20export.html#239646233">(May 20 2021 at 19:28)</a>:</h4>
<p>In general, an OAuth request is a negotiation; a client can ask for <code>system/*.*</code> and the server could decide to grant <code>system/*.read</code>.  I think from an interop perspective, we should make sure that servers don't <em>prevent</em> requests like <code>system/*.read</code>, and don't prevent requests like <code>system/Patient.read system/Observation.read</code>. But if they want to accept (and even grant) broader permissions that's OK.</p>



<a name="239649312"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Scopes%20for%20export/near/239649312" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vladimir Ignatov <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Scopes.20for.20export.html#239649312">(May 20 2021 at 19:51)</a>:</h4>
<p>OK, makes sense. Then would this be correct:</p>
<ol>
<li>The server requires <code>system/*.*</code> -&gt; OK if read access is granted</li>
<li>The server allows system/<em>.</em> or other scopes like system/Patient.<em>, but also supports system/</em>.read -&gt; OK</li>
<li>The server rejects any scope not ending in .read -&gt; no need to test this (but is acceptable behavior)</li>
</ol>



<a name="239677897"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Scopes%20for%20export/near/239677897" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Scopes.20for.20export.html#239677897">(May 21 2021 at 00:07)</a>:</h4>
<blockquote>
<p>The server requires system/<em>.</em> -&gt; OK if read access is granted</p>
</blockquote>
<p>No, I think this <em>breaks</em> a client asking for <code>system/Patient.read system/Observation.read</code> or <code>system/*.read</code>. Servers should support these read requests, even if they <em>also</em> support write requests.</p>



<a name="239677911"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Scopes%20for%20export/near/239677911" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Scopes.20for.20export.html#239677911">(May 21 2021 at 00:07)</a>:</h4>
<p>I agree with (2) and (3)</p>



<a name="239682224"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Scopes%20for%20export/near/239682224" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vladimir Ignatov <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Scopes.20for.20export.html#239682224">(May 21 2021 at 01:04)</a>:</h4>
<p>Yes, I test for <code>.read</code> separately and I expect that to be supported. What I meant is that if I request <code>system/a.*</code>, it is OK to receive any of <code>system/a.read, system/a.*, system/*.read, system/*.*</code> because that should mean i got the read access that I need.</p>



<a name="239682269"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Scopes%20for%20export/near/239682269" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Scopes.20for.20export.html#239682269">(May 21 2021 at 01:05)</a>:</h4>
<p>Perfect</p>



<a name="239685615"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Scopes%20for%20export/near/239685615" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vladimir Ignatov <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Scopes.20for.20export.html#239685615">(May 21 2021 at 01:52)</a>:</h4>
<p><span aria-label="+1" class="emoji emoji-1f44d" role="img" title="+1">:+1:</span>  Thanks</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
