---
layout: page
title: "FHIR Chat  · CapabilityStatement $export operation · bulk data"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/index.html">bulk data</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/CapabilityStatement.20.24export.20operation.html">CapabilityStatement $export operation</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="274568849"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/CapabilityStatement%20%24export%20operation/near/274568849" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/CapabilityStatement.20.24export.20operation.html#274568849">(Mar 08 2022 at 16:49)</a>:</h4>
<p>Bulk Data IG states that</p>
<div class="codehilite"><pre><span></span><code>        {
          &quot;type&quot; : &quot;Group&quot;,
          &quot;operation&quot; : [
            {
              &quot;extension&quot; : [
                {
                  &quot;url&quot; : &quot;http://hl7.org/fhir/StructureDefinition/capabilitystatement-expectation&quot;,
                  &quot;valueCode&quot; : &quot;SHOULD&quot;
                }
              ],
              &quot;name&quot; : &quot;group-export&quot;,
              &quot;definition&quot; : &quot;http://hl7.org/fhir/uv/bulkdata/OperationDefinition/group-export&quot;,
              &quot;documentation&quot; : &quot;FHIR Operation to obtain a detailed set of FHIR resources of diverse resource types pertaining to all patients in specified [Group](https://www.hl7.org/fhir/group.html).\n\nIf a FHIR server supports Group-level data export, it SHOULD support reading and searching for `Group` resource. This enables clients to discover available groups based on stable characteristics such as `Group.identifier`.\n\nThe [Patient Compartment](https://www.hl7.org/fhir/compartmentdefinition-patient.html) SHOULD be used as a point of reference for recommended resources to be returned and, where applicable, Patient resources SHOULD be returned. Other resources outside of the patient compartment that are helpful in interpreting the patient data (such as Organization and Practitioner) MAY also be returned.&quot;
            }
          ]
        },
</code></pre></div>
<p>ONC (g)(10) test procedure requires server implementation support Multi-Patient export so Inferno has a validation test verify that Server declare its support of "<a href="http://hl7.org/fhir/uv/bulkdata/OperationDefinition/group-export">http://hl7.org/fhir/uv/bulkdata/OperationDefinition/group-export</a>" in it's CapabilityStatement.<br>
We received a question from an implementer recently that they profiled OperationDefinition of group-export to indicate that their server supports only subset of the input parameters defined in Bulk IG's group-export. They put their own operation definition in server's CS, like</p>
<div class="codehilite"><pre><span></span><code>              &quot;name&quot; : &quot;group-export&quot;,
              &quot;definition&quot; : &quot;http://myserver/OperationDefinition/group-export&quot;,
</code></pre></div>
<p>where <a href="http://myserver/OperationDefinition/group-export">http://myserver/OperationDefinition/group-export</a> is a constrained OperationDefinition of <a href="http://hl7.org/fhir/uv/bulkdata/OperationDefinition/group-export">http://hl7.org/fhir/uv/bulkdata/OperationDefinition/group-export</a><br>
This sounds good but fails Inferno test since Inferno expects the Bulk IG's group-export url.<br>
Here are some questions<br>
1) if server declares "<a href="http://hl7.org/fhir/uv/bulkdata/OperationDefinition/group-export">http://hl7.org/fhir/uv/bulkdata/OperationDefinition/group-export</a>" in its CS, does that mean it supports all parameters declared in that OD?<br>
2) how could a server indicate that it supports a constrained group-export operation?<br>
a) using a same name 'group-export' but with different definition url?<br>
b) using a different name 'my-group-export' and with different url?<br>
c) list both 'group-export' and 'my-group-export' side by side (like resource.supportedProfile)<br>
3) how does a client know a server support group-export definition?<br>
a) looking the name 'group-definition'<br>
b) get the OperationDefinition and verify it is either Bulk IG's group-export or descendent of Bulk IG's group-export <br>
4) Should we consider add operation.supportedOperation [0..*] to CapabilityStatement?</p>



<a name="274690096"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/CapabilityStatement%20%24export%20operation/near/274690096" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/CapabilityStatement.20.24export.20operation.html#274690096">(Mar 09 2022 at 13:53)</a>:</h4>
<p>Can you include a link to the source for the first snippet you embedded (with the <code>SHOULD</code> extension)?</p>



<a name="274690286"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/CapabilityStatement%20%24export%20operation/near/274690286" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/CapabilityStatement.20.24export.20operation.html#274690286">(Mar 09 2022 at 13:54)</a>:</h4>
<ol>
<li><a href="http://hl7.org/fhir/uv/bulkdata/STU2/export.html#query-parameters">http://hl7.org/fhir/uv/bulkdata/STU2/export.html#query-parameters</a> documents which parameters a server is allowed to ignore.</li>
</ol>



<a name="274691564"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/CapabilityStatement%20%24export%20operation/near/274691564" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/CapabilityStatement.20.24export.20operation.html#274691564">(Mar 09 2022 at 14:03)</a>:</h4>
<ol start="2">
<li><a href="http://hl7.org/fhir/uv/bulkdata/STU2/index.html#conformance">http://hl7.org/fhir/uv/bulkdata/STU2/index.html#conformance</a> documents what we specific about advertising conformance --  I.e. populating <code>CapabilityStatement.instantiates</code>. The rest falls back to standard FHIR rules, but in practice it sounds like the vendor you're working with actually supports the full group export operation definition (which allows servers to ignore certain parameters but not others).</li>
</ol>
<p>(If I wanted to advertise support for a constrained profile I'd advertise just that constrained profile, and populate <code>OperationDefinition.base</code> and host it at $export because -- let's face it -- clients are going to hardcode this path.)</p>



<a name="274692019"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/CapabilityStatement%20%24export%20operation/near/274692019" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/CapabilityStatement.20.24export.20operation.html#274692019">(Mar 09 2022 at 14:06)</a>:</h4>
<ol start="3">
<li>see (1) above plus core FHIR spec for ways to advertise</li>
<li>I think core FHIR spec already provides a dizzying array of ways to advertise support for capabilities. If you think something new would help, do you want to write up a proposal for FHIR- I (and especially provide an example showing what you could communicate with this new mechanism that was difficult to communicate with a standard mechanisms)?</li>
</ol>



<a name="274715683"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/CapabilityStatement%20%24export%20operation/near/274715683" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/CapabilityStatement.20.24export.20operation.html#274715683">(Mar 09 2022 at 16:47)</a>:</h4>
<p>Thanks <span class="user-mention" data-user-id="191315">@Josh Mandel</span> Most of the question actually belongs to general FHIR discussion. I will move the discussion to implementer thread. <br>
The quote is from CapabilityStatement in Bulk IG: <a href="https://hl7.org/fhir/uv/bulkdata/CapabilityStatement-bulk-data.json.html">https://hl7.org/fhir/uv/bulkdata/CapabilityStatement-bulk-data.json.html</a><br>
I am always confused by the CapabilityStatement with "requirement" kind.<br>
Since Bulk IG states that requirement CS (as above), shall server implementation declare the same name/definition in its instance kind CS?</p>



<a name="274717325"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/CapabilityStatement%20%24export%20operation/near/274717325" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/CapabilityStatement.20.24export.20operation.html#274717325">(Mar 09 2022 at 16:58)</a>:</h4>
<p>I have no official answer on this. My personal perspective is:</p>
<ul>
<li>
<p>servers need to include the <code>instantiates</code> field in their CapabilityStatement, per <a href="https://hl7.org/fhir/uv/bulkdata/index.html#conformance">https://hl7.org/fhir/uv/bulkdata/index.html#conformance</a> -- this is how clients learn "this server does bulk export"</p>
</li>
<li>
<p>servers should host a spec-compliant operation for at least one of:</p>
<ul>
<li><code>/$export</code></li>
<li><code>/Patient/$export</code></li>
<li><code>/Group/:id/$export</code> </li>
</ul>
</li>
</ul>
<p>Other modeling of "how do I advertise the details of what I do" is outside the scope of Bulk Data; can take this up in FHIR-I.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
