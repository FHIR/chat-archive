---
layout: page
title: "FHIR Chat  · Servers · bulk data"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/index.html">bulk data</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Servers.html">Servers</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153930194"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Servers/near/153930194" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Servers.html#153930194">(Jan 22 2018 at 22:42)</a>:</h4>
<p>thanks <span class="user-mention" data-user-id="191414">@Dan Gottlieb</span> . do you know of any API differences between my server and yours?</p>



<a name="153930220"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Servers/near/153930220" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan Gottlieb <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Servers.html#153930220">(Jan 23 2018 at 00:21)</a>:</h4>
<p>I think the main API difference is how they handle requests where no data is found - your server returns 200 and a link to an empty bundle and the SMART server returns a 204. Also, it looks like your server is returning links to a bundle.ndjson and a .zip(?) file in addition to the resource ndjson files, while the SMART server only returns the resource ndjson files.</p>



<a name="153930221"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Servers/near/153930221" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan Gottlieb <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Servers.html#153930221">(Jan 23 2018 at 00:22)</a>:</h4>
<p>Does your server support the backend services auth API? If so, how can I register a client to test it out?</p>



<a name="153930310"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Servers/near/153930310" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Servers.html#153930310">(Jan 23 2018 at 15:52)</a>:</h4>
<p>yes supports back-end services</p>



<a name="153930311"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Servers/near/153930311" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Servers.html#153930311">(Jan 23 2018 at 15:53)</a>:</h4>
<p>to register a client, use your browser to login through <a href="https://test.fhir.org/r3" target="_blank" title="https://test.fhir.org/r3">https://test.fhir.org/r3</a></p>



<a name="153930312"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Servers/near/153930312" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Servers.html#153930312">(Jan 23 2018 at 15:53)</a>:</h4>
<p>.. which doesn't work...</p>



<a name="153930319"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Servers/near/153930319" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Servers.html#153930319">(Jan 23 2018 at 16:04)</a>:</h4>
<p>while I'm debugging that...</p>



<a name="153930321"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Servers/near/153930321" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Servers.html#153930321">(Jan 23 2018 at 16:06)</a>:</h4>
<p>I think it's worth returning the bundle. It can help to determine the structure of the data returned. I don't have a solid use case to present right now for why that might matter, but the data returned might be a fairly deep web, and the bundle will help determine which are proximal resources, if you care</p>



<a name="153930322"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Servers/near/153930322" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Servers.html#153930322">(Jan 23 2018 at 16:07)</a>:</h4>
<p>and it's because I always return the bundle, which all the information in it, that I don't return a 204</p>



<a name="153930330"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Servers/near/153930330" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan Gottlieb <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Servers.html#153930330">(Jan 23 2018 at 16:24)</a>:</h4>
<p>The single bundle could potentially have millions of entries though - I thought that was one of the things we were trying to avoid?</p>



<a name="153930331"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Servers/near/153930331" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan Gottlieb <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Servers.html#153930331">(Jan 23 2018 at 16:24)</a>:</h4>
<p>Also, how would this be used - if the client loads and parses the bundle they still have to etl the ndjson files for it to be any use, at which point they have the same data in the db?</p>



<a name="153930336"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Servers/near/153930336" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Servers.html#153930336">(Jan 23 2018 at 16:27)</a>:</h4>
<p>the bundle is split at entry.resource  - so the ndjson files are all still one resource type, and resources are not carried twice</p>



<a name="153930339"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Servers/near/153930339" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan Gottlieb <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Servers.html#153930339">(Jan 23 2018 at 16:30)</a>:</h4>
<p>It looks like it has a fullUrl for each resource though - for a few hundred thousand paitents, wouldn't this be millions of rows?</p>



<a name="153930340"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Servers/near/153930340" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Servers.html#153930340">(Jan 23 2018 at 16:31)</a>:</h4>
<p>yes it could be plenty. It would still be a small % of the total though</p>



<a name="153930342"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Servers/near/153930342" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan Gottlieb <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Servers.html#153930342">(Jan 23 2018 at 16:40)</a>:</h4>
<p>I wonder if we should return an index to the files in the body of the final status response instead of having the links header and the bundle file. It would enable us to include metadata like the transaction date, whether auth is needed to download the files, and number of resources in each file. Also, implementers won't have to worry about bumping into header size restrictions.</p>



<a name="153930343"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Servers/near/153930343" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan Gottlieb <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Servers.html#153930343">(Jan 23 2018 at 16:40)</a>:</h4>
<p>It does break the paradigm of the client not having to parse anything but headers though, which is a nice flow.</p>



<a name="153930345"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Servers/near/153930345" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Servers.html#153930345">(Jan 23 2018 at 16:50)</a>:</h4>
<p>it wouldn't be a substitute for the bundle directly, in that form at least. it carries other infomration</p>



<a name="153930346"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Servers/near/153930346" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Servers.html#153930346">(Jan 23 2018 at 16:51)</a>:</h4>
<p>I'm not sure how significant the header size issue is. the HTTP/2.0 analysis said that it was normal to see 8k+ of headers</p>



<a name="153930347"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Servers/near/153930347" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Servers.html#153930347">(Jan 23 2018 at 16:51)</a>:</h4>
<p>but i don't recall whether that analysis was scope limited</p>



<a name="153930350"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Servers/near/153930350" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan Gottlieb <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Servers.html#153930350">(Jan 23 2018 at 16:56)</a>:</h4>
<p>What info is in the bundle that we need to get to clients? We've talked about transaction date and possibly resource count - are there other items?</p>



<a name="153930356"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Servers/near/153930356" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Servers.html#153930356">(Jan 23 2018 at 17:05)</a>:</h4>
<p>fundamentally the element of interest is entry.search.mode, though I think it's use is ambiguous for $everything</p>



<a name="153930431"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Servers/near/153930431" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Servers.html#153930431">(Jan 24 2018 at 00:20)</a>:</h4>
<p>For http, of course we're targeting http/1.1 support here too. I understand nothing about long headers is against the protocol, but going against the grain of default server configurations could be painful (or not...)</p>



<a name="153930433"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Servers/near/153930433" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Servers.html#153930433">(Jan 24 2018 at 00:36)</a>:</h4>
<p>For the bundle, hmm, I'm still not sure I understand -- is it that the bundle contains one entry for every unique resource returned (i.e. the number of entries in like <code>wc -l *.ndjson</code> if you've downloaded all the ndjson files?)</p>



<a name="153930443"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Servers/near/153930443" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Servers.html#153930443">(Jan 24 2018 at 03:48)</a>:</h4>
<p>my bundle does. It was my intent that it would be useful to allow you to know whether a resource is directly linked to a patient, or brought in by chasing the graph. This is most relevant for resources that are affected by the $list considerations, (which are current medications, vs other past records of medications). But it may be that Bundle.entry.search.mode is a very blunt device for that tricky problem even if we clarified it's usage</p>



<a name="153930468"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Servers/near/153930468" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Servers.html#153930468">(Jan 24 2018 at 11:59)</a>:</h4>
<p><span class="user-mention" data-user-id="191414">@Dan Gottlieb</span> : server login using OAuth is fixed - login to my server using OAuth at <a href="https://test.fhir.org/r3" target="_blank" title="https://test.fhir.org/r3">https://test.fhir.org/r3</a>, and then choose 'register a client' , with mode = backend services client</p>



<a name="153930469"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Servers/near/153930469" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Servers.html#153930469">(Jan 24 2018 at 12:00)</a>:</h4>
<p>I can create you an account if you won't want to use HL7/facebook/google identity providers</p>



<a name="153930470"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Servers/near/153930470" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Servers.html#153930470">(Jan 24 2018 at 12:01)</a>:</h4>
<p><span class="user-mention" data-user-id="191315">@Josh Mandel</span> - my comments about HTTP/2.0 were referring the source analysis the WG used when optimising http/2.0: it was analysis of how http/1.1 is actually being used</p>



<a name="153930503"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Servers/near/153930503" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan Gottlieb <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Servers.html#153930503">(Jan 24 2018 at 17:10)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> It times out when I click the login through google link. When I tried with hl7, I got this error "The state does not match. You may be a victim of a cross-site spoof (or this server has restarted, try again)".</p>



<a name="153930506"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Servers/near/153930506" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vladimir Ignatov <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Servers.html#153930506">(Jan 24 2018 at 17:26)</a>:</h4>
<p>I made a sample CLI client for bulk data servers (<a href="https://github.com/smart-on-fhir/sample-apps-stu3/tree/master/fhir-downloader" target="_blank" title="https://github.com/smart-on-fhir/sample-apps-stu3/tree/master/fhir-downloader">https://github.com/smart-on-fhir/sample-apps-stu3/tree/master/fhir-downloader</a>) and I am currently trying to make it compatible with <a href="https://test.fhir.org/r3" target="_blank" title="https://test.fhir.org/r3">https://test.fhir.org/r3</a>. While doing that I noticed some interesting behavior that is probably worth discussing:</p>
<p>After I manage to get through the entire flow and try to download a file, I still have to provide an "Accept: application/fhir+ndjson". Otherwise I receive an error saying:<br>
<code>Mime Type mismatch. Original request was for application/x-ndjson, current request is for ""</code></p>
<p>I wonder if this should be added to (or removed from) the spec? Is that really needed at this point?</p>



<a name="153930530"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Servers/near/153930530" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vladimir Ignatov <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Servers.html#153930530">(Jan 24 2018 at 20:47)</a>:</h4>
<p>Also, is the <code>_type</code> parameter implemented there? I was trying with  <code>http://test.fhir.org/r3/Patient/$everything?_type=CarePlan,Claim&amp;start=2016</code> but it returns all kinds of resources.</p>



<a name="153930567"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Servers/near/153930567" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Servers.html#153930567">(Jan 24 2018 at 22:32)</a>:</h4>
<p><span class="user-mention" data-user-id="191414">@Dan Gottlieb</span> did you go back? that's an issue I haven't got around to resolving - if you try one kind of authentication, you have to refresh the form if you go back</p>



<a name="153930569"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Servers/near/153930569" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Servers.html#153930569">(Jan 24 2018 at 22:34)</a>:</h4>
<p><span class="user-mention" data-user-id="193731">@Vladimir Ignatov</span> - I will drop the requirement that accept must not be empty. But it must be correct if present</p>



<a name="153930571"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Servers/near/153930571" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Servers.html#153930571">(Jan 24 2018 at 22:34)</a>:</h4>
<p>e.g. you can't, at this point, ask for xml after all</p>



<a name="153930573"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Servers/near/153930573" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Servers.html#153930573">(Jan 24 2018 at 22:35)</a>:</h4>
<p>and no, my server doesn't support the _type parameter at this point</p>



<a name="153930702"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Servers/near/153930702" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan Gottlieb <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Servers.html#153930702">(Jan 25 2018 at 14:49)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> In each instance I started from <a href="http://test.fhir.org/r3" target="_blank" title="http://test.fhir.org/r3">test.fhir.org/r3</a> and cleared my cookies. I just tried it again and am having the same issues. Do you know if the social login is working for other folks?</p>



<a name="153930710"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Servers/near/153930710" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Servers.html#153930710">(Jan 25 2018 at 15:46)</a>:</h4>
<p>(Trying now... the redirect back to <a href="http://test.fhir.org" target="_blank" title="http://test.fhir.org">test.fhir.org</a> from Google seems to hang; <a href="http://test.fhir.org" target="_blank" title="http://test.fhir.org">test.fhir.org</a> isn't serving up a page.)</p>



<a name="153930798"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Servers/near/153930798" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Servers.html#153930798">(Jan 26 2018 at 00:58)</a>:</h4>
<p>hmm. it works for me on my debug version... how useful....</p>



<a name="153930803"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Servers/near/153930803" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Servers.html#153930803">(Jan 26 2018 at 02:31)</a>:</h4>
<p>seems as if the issue is lack of memory on the server.... bumping it's size up now</p>



<a name="153930807"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Servers/near/153930807" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Servers.html#153930807">(Jan 26 2018 at 05:55)</a>:</h4>
<p>That did the trick, thanks!</p>



<a name="153930809"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Servers/near/153930809" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Servers.html#153930809">(Jan 26 2018 at 09:08)</a>:</h4>
<p>great.</p>



<a name="153944437"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Servers/near/153944437" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Informatics User <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Servers.html#153944437">(Mar 13 2018 at 17:37)</a>:</h4>
<p>Are there any EHR vendors (eg, Epic) who plan to pilot bulk export functionality?</p>



<a name="153944750"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Servers/near/153944750" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan Gottlieb <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Servers.html#153944750">(Mar 14 2018 at 14:34)</a>:</h4>
<p>A number of EHR vendors will be exploring the bulk data effort in 2018 as part of the HL7 Argonaut Project (which includes Epic, Cerner, athenahealth, Meditech, McKesson, and others vendors), but have not yet committed to specific pilots: <a href="http://www.hl7.org/documentcenter/public_temp_6FECF0C3-1C23-BA17-0CB268745144461B/pressreleases/HL7_PRESS_20180227.pdf" target="_blank" title="http://www.hl7.org/documentcenter/public_temp_6FECF0C3-1C23-BA17-0CB268745144461B/pressreleases/HL7_PRESS_20180227.pdf">http://www.hl7.org/documentcenter/public_temp_6FECF0C3-1C23-BA17-0CB268745144461B/pressreleases/HL7_PRESS_20180227.pdf</a></p>



<a name="153944945"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Servers/near/153944945" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Isaac Vetter <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Servers.html#153944945">(Mar 15 2018 at 04:22)</a>:</h4>
<p>Hi Vojtech/@<strong>Informatics User</strong> ,  To add on to Dan's answer -- Epic specifically should have a prototype server (and hopefully client too!) by the May connectathon. By the Sept connectathon, our prototype will be more stable. Let me know if you're specifically interested in testing with Epic.</p>



<a name="153994367"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Servers/near/153994367" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Karen Fairchild <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Servers.html#153994367">(Sep 07 2018 at 18:30)</a>:</h4>
<p>Isaac - is your Epic Bulk Data server available?  We would like to test with it and we will be at the Sept Connectathon.</p>



<a name="153994368"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Servers/near/153994368" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Isaac Vetter <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Servers.html#153994368">(Sep 07 2018 at 18:31)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="195992">@Karen Fairchild</span> - oh man, almost. We've been working on getting it all setup for the past couple of weeks. Will you ask <span class="user-mention" data-user-id="195242">@Justin Stauffer</span> and I this question again next week?</p>



<a name="153994369"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Servers/near/153994369" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Karen Fairchild <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Servers.html#153994369">(Sep 07 2018 at 18:32)</a>:</h4>
<p>Will do!  Thanks for the update!</p>



<a name="153994392"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Servers/near/153994392" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Servers.html#153994392">(Sep 07 2018 at 19:52)</a>:</h4>
<p>I'm updating our URL on the documentation, but the Cerner server is up: <a href="https://fhir-open.stagingcerner.com/r4/a758f80e-aa74-4118-80aa-98cc75846c76/Patient/$export" target="_blank" title="https://fhir-open.stagingcerner.com/r4/a758f80e-aa74-4118-80aa-98cc75846c76/Patient/$export">https://fhir-open.stagingcerner.com/r4/a758f80e-aa74-4118-80aa-98cc75846c76/Patient/$export</a></p>



<a name="153994393"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Servers/near/153994393" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Servers.html#153994393">(Sep 07 2018 at 19:52)</a>:</h4>
<p>There may still be some data issues, let us know if you find something</p>



<a name="153994394"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Servers/near/153994394" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Servers.html#153994394">(Sep 07 2018 at 19:52)</a>:</h4>
<p>Currently no OAuth support</p>



<a name="153995771"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Servers/near/153995771" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Karen Fairchild <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Servers.html#153995771">(Sep 11 2018 at 15:48)</a>:</h4>
<p>Is this supposed to have security or not?  We are having issues connecting to your server.</p>



<a name="153995772"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Servers/near/153995772" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Karen Fairchild <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Servers.html#153995772">(Sep 11 2018 at 15:49)</a>:</h4>
<p>Jenni - is your Cerner bulk data server secured or not?  We are having issues connecting to it.</p>



<a name="153996243"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Servers/near/153996243" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Karen Fairchild <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Servers.html#153996243">(Sep 12 2018 at 14:14)</a>:</h4>
<p><span class="user-mention" data-user-id="191356">@Jenni Syed</span>  - still having issues connecting to your Cerner bulk data server.  What if any security is required for <a href="https://fhir-open.stagingcerner.com/r4/a758f80e-aa74-4118-80aa-98cc75846c76/Patient/$export" target="_blank" title="https://fhir-open.stagingcerner.com/r4/a758f80e-aa74-4118-80aa-98cc75846c76/Patient/$export">https://fhir-open.stagingcerner.com/r4/a758f80e-aa74-4118-80aa-98cc75846c76/Patient/$export</a></p>



<a name="153996264"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Servers/near/153996264" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Servers.html#153996264">(Sep 12 2018 at 14:36)</a>:</h4>
<p>Should be none - what error are you seeing? What is the X-REquest-Id value returned with the error?</p>



<a name="153996290"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Servers/near/153996290" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Karen Fairchild <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Servers.html#153996290">(Sep 12 2018 at 15:41)</a>:</h4>
<p>Thanks.  <span class="user-mention" data-user-id="191356">@Jenni Syed</span>  We thought it needed a token -- we'll take that out and retry it.</p>



<a name="153997075"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Servers/near/153997075" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Karen Fairchild <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Servers.html#153997075">(Sep 14 2018 at 17:25)</a>:</h4>
<p><span class="user-mention" data-user-id="191356">@Jenni Syed</span>  -we processed data from your Cerner bulk data server and were able to correlate the clinical data with the patient data.  We did not see any MR (Medical Record Number) identifiers in your data.  Are you able to populate MRNs?  We use that for the bulk data "de-id" view for researchers.  Also noticed no race or ethnicity.  I realize those are argonaut extensions but If you had race or ethnicity we would be pulling that data also for the research scenario in the connectathon also.   <span class="user-mention" data-user-id="191864">@Isaac Vetter</span>  - will Epic have MRNs for the connectathon?</p>



<a name="153997365"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Servers/near/153997365" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Karen Fairchild <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Servers.html#153997365">(Sep 17 2018 at 14:37)</a>:</h4>
<p><span class="user-mention" data-user-id="191864">@Isaac Vetter</span>  <span class="user-mention" data-user-id="195242">@Justin Stauffer</span></p>



<a name="153997366"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Servers/near/153997366" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Karen Fairchild <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Servers.html#153997366">(Sep 17 2018 at 14:38)</a>:</h4>
<p><span class="user-mention" data-user-id="191864">@Isaac Vetter</span> <span class="user-mention" data-user-id="195242">@Justin Stauffer</span>  checking in on the Epic bulk data server - ETA for when it is ready - also, will Epic be able to supply an MR type identifier for patient medical record numbers - we were planning on using that to assign a pseudo patient identifier of type ANON in the patient resource in the connectathon for the "research" view of bulk data.</p>



<a name="153997597"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Servers/near/153997597" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Justin Stauffer <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Servers.html#153997597">(Sep 18 2018 at 13:26)</a>:</h4>
<p>We're still working on some setup for the Epic FHIR Bulk Data Server. It shouldn't be much longer. I'm not 100% clear on your question about the patient identifiers but in addition to returning the FHIR ID for a patient resource, we also return other MRNs for the patient that we have on file.</p>



<a name="153997619"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Servers/near/153997619" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Servers.html#153997619">(Sep 18 2018 at 15:19)</a>:</h4>
<p>How long did it take to get the data from the Cerner server? My client has been running for more than 30 minutes and still not done</p>



<a name="153997620"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Servers/near/153997620" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Servers.html#153997620">(Sep 18 2018 at 15:19)</a>:</h4>
<p>...also, I guess the Cerner server returns R4 resources? ...any chance to have STU3 or (even better) DSTU2 ?</p>



<a name="153997622"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Servers/near/153997622" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dennis Patterson <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Servers.html#153997622">(Sep 18 2018 at 15:21)</a>:</h4>
<p>There was a discussion on <a href="#narrow/stream/95-bulk-data/subject/Gzip.20compression.20on.20Cerner.20staging.20server" title="#narrow/stream/95-bulk-data/subject/Gzip.20compression.20on.20Cerner.20staging.20server">https://chat.fhir.org/#narrow/stream/95-bulk-data/subject/Gzip.20compression.20on.20Cerner.20staging.20server</a>, but I'm planning to make gzipped ndjson fields available for download</p>



<a name="153997623"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Servers/near/153997623" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dennis Patterson <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Servers.html#153997623">(Sep 18 2018 at 15:22)</a>:</h4>
<p>Our connectathon Server will fall under the r4 path (dstu2 is in production and stu3 is under development), but I mentioned on the kickoff call that I'll be aiming for STU3 compliance on those files... they likely already are</p>



<a name="153997636"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Servers/near/153997636" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Servers.html#153997636">(Sep 18 2018 at 15:46)</a>:</h4>
<p>...completed in 50 minutes, that's a lot of data! (that I actually failed to download...working on that)</p>



<a name="153997667"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Servers/near/153997667" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Karen Fairchild <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Servers.html#153997667">(Sep 18 2018 at 17:14)</a>:</h4>
<p><span class="user-mention" data-user-id="195242">@Justin Stauffer</span>  - thanks Justin.  Glad to hear you will popoulate MRNs in the Patient structure  where you have them as we will use those for our de-identification use case.</p>



<a name="153997757"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Servers/near/153997757" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dennis Patterson <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Servers.html#153997757">(Sep 18 2018 at 19:56)</a>:</h4>
<p><span class="user-mention" data-user-id="195992">@Karen Fairchild</span>  I noticed your request about the Cerner server.  My priority right now is uplifting the API to the newest version of the spec, making some hosting changes to our mock data, and then digging into the Backend Services spec.  I have noted the desire for MRNs and race/ethnicity extensions, but can't make any promises for the connectathon timeline</p>



<a name="153997763"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Servers/near/153997763" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Karen Fairchild <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Servers.html#153997763">(Sep 18 2018 at 20:04)</a>:</h4>
<p>Thanks!</p>



<a name="153998119"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Servers/near/153998119" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Justin Stauffer <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Servers.html#153998119">(Sep 19 2018 at 14:38)</a>:</h4>
<p>OK, I think our test bulk data server is up and ready to go. The URL is as follows:<br>
<a href="https://connectathon.epic.com/interconnect-fhir-bulk/api/FHIR/STU3/Group/ebUKRzWjCOkHtNr8R-zHgzc4TdaZx9-TOvXKIeP0bLnM3/$export" target="_blank" title="https://connectathon.epic.com/interconnect-fhir-bulk/api/FHIR/STU3/Group/ebUKRzWjCOkHtNr8R-zHgzc4TdaZx9-TOvXKIeP0bLnM3/$export">https://connectathon.epic.com/interconnect-fhir-bulk/api/FHIR/STU3/Group/ebUKRzWjCOkHtNr8R-zHgzc4TdaZx9-TOvXKIeP0bLnM3/$export</a></p>
<p>Some things to note:<br>
- You'll notice I provided a Group ID in the URL above – this is the only Group I have defined on the test server right now and it should return data for 2 patients. We do not support the "all patients" or "system level export" options.<br>
- Right now this test endpoint does not currently require OAuth2 but that will be subject to change as we're testing things at the Connectathon.<br>
- Since we're not requiring OAuth2 but we still need to know who is requesting the data from our test endpoint, we require clients to provide a custom HTTP header identifying themselves. This header is called "Epic-Client-ID" and you will need to specify one of the Client IDs mentioned below. So for example, the header would look like this:<br>
Epic-Client-ID: JJJJJJJJJJJJJJJJJJJJJJJJJJJJJJ01<br>
I have a few such example client IDs that will allow multiple bulk data clients to request the same group's data at once since we normally only allow a particular client to request the so often (I think it's once per day or something along those lines). These test Client IDs are: JJJJJJJJJJJJJJJJJJJJJJJJJJJJJJ01, JJJJJJJJJJJJJJJJJJJJJJJJJJJJJJ02, JJJJJJJJJJJJJJJJJJJJJJJJJJJJJJ03, and JJJJJJJJJJJJJJJJJJJJJJJJJJJJJJ04.<br>
- You'll also notice our complete status response always returns requiresAccessToken=true right now. This is because we never intend to use this in an unsecured fashion in the real world so I just hard-coded that. If that's an issue for some clients at the Connectathon, I can probably tweak that logic.<br>
- The resources returned are STU3.</p>



<a name="153998171"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Servers/near/153998171" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Servers.html#153998171">(Sep 19 2018 at 15:22)</a>:</h4>
<p>To be pedantic, I should say that "requiresAccessToken: false" doesn't mean that a system is insecure; it just implies that any required authentications is baked into the URL (e.g., a URL with a signed authentication parameter baked in).</p>



<a name="153998175"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Servers/near/153998175" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Servers.html#153998175">(Sep 19 2018 at 15:24)</a>:</h4>
<p>(deleted)</p>



<a name="153998176"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Servers/near/153998176" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Servers.html#153998176">(Sep 19 2018 at 15:24)</a>:</h4>
<p>For the connnectathon, if you're hard coding rules, can you relax the once daily restriction?</p>



<a name="153998179"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Servers/near/153998179" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Servers.html#153998179">(Sep 19 2018 at 15:26)</a>:</h4>
<p>Otherwise, four client IDs would mean that only eight exports could be performed all weekend, if I understood correctly? In my experience during testing and debugging, we are likely to need to kick off several hundred exports each.</p>



<a name="153998180"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Servers/near/153998180" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Servers.html#153998180">(Sep 19 2018 at 15:26)</a>:</h4>
<p><span class="user-mention" data-user-id="195242">@Justin Stauffer</span></p>



<a name="153998194"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Servers/near/153998194" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Servers.html#153998194">(Sep 19 2018 at 15:46)</a>:</h4>
<p>we likely need to identify a set of reasonable alternative security models and describe how they are declared in CapabilityStatement. Such as mutual-authenticated-TLS (IHE-ATNA), or API-KEY and https, or ???  The security wg would love to help, but we need the active development environment to come up with some patterns. Note that no pattern will ever be perfectly secure, so we should not be afraid of being realistic. Also, some data does not require transport security (de-identified data assessed as publicly exportable)</p>



<a name="153998278"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Servers/near/153998278" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Justin Stauffer <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Servers.html#153998278">(Sep 19 2018 at 17:07)</a>:</h4>
<p><span class="user-mention" data-user-id="191315">@Josh Mandel</span> Yeah, I can mess with those rules as needed. That's not a problem.</p>



<a name="153998637"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Servers/near/153998637" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Justin Stauffer <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Servers.html#153998637">(Sep 20 2018 at 14:55)</a>:</h4>
<p>Oh, and if anyone foresees their system having an issue with my non-GUID client IDs, please let me know. I may adjust them anyway but we don't /really/ care what the client ID is as long as it's unique to us.</p>



<a name="153999508"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Servers/near/153999508" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Karen Fairchild <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Servers.html#153999508">(Sep 24 2018 at 18:13)</a>:</h4>
<p><span class="user-mention" data-user-id="195242">@Justin Stauffer</span>  - just checking to see if you are doing gzip files from your bulk data server or are they the original standard ndjson files?</p>



<a name="153999821"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Servers/near/153999821" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Justin Stauffer <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Servers.html#153999821">(Sep 25 2018 at 20:52)</a>:</h4>
<p><span class="user-mention" data-user-id="195992">@Karen Fairchild</span> We return the raw ndjson files (no zipping).</p>



<a name="153999833"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Servers/near/153999833" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Karen Fairchild <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Servers.html#153999833">(Sep 25 2018 at 22:37)</a>:</h4>
<p>Thanks <span class="user-mention" data-user-id="195242">@Justin Stauffer</span></p>



<a name="154001376"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Servers/near/154001376" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Justin Stauffer <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Servers.html#154001376">(Sep 29 2018 at 13:29)</a>:</h4>
<p><span class="user-mention" data-user-id="195992">@Karen Fairchild</span> Here is an example request that I've sent from Fiddler with HTTP headers, etc.:<br>
<strong>HTTP GET to:</strong> <a href="https://connectathon.epic.com/interconnect-fhir-bulk/api/FHIR/STU3/Group/ebUKRzWjCOkHtNr8R-zHgzc4TdaZx9-TOvXKIeP0bLnM3/$export" target="_blank" title="https://connectathon.epic.com/interconnect-fhir-bulk/api/FHIR/STU3/Group/ebUKRzWjCOkHtNr8R-zHgzc4TdaZx9-TOvXKIeP0bLnM3/$export">https://connectathon.epic.com/interconnect-fhir-bulk/api/FHIR/STU3/Group/ebUKRzWjCOkHtNr8R-zHgzc4TdaZx9-TOvXKIeP0bLnM3/$export</a></p>
<p><strong>HTTP Headers:</strong><br>
User-Agent: Fiddler<br>
Host: <a href="http://connectathon.epic.com" target="_blank" title="http://connectathon.epic.com">connectathon.epic.com</a><br>
Content-Type: application/fhir+json<br>
Accept: application/json<br>
Epic-Client-ID: JJJJJJJJJJJJJJJJJJJJJJJJJJJJJJ01<br>
Content-Length: 0</p>



<a name="154001553"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Servers/near/154001553" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Justin Stauffer <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Servers.html#154001553">(Sep 29 2018 at 14:29)</a>:</h4>
<p>Epic OAuth2 secured server info:<br>
OAuth2 Token Endpoint (expecting Client Credentials with JWT): <a href="https://connectathon.epic.com/interconnect-fhir-oauth/oauth2/token" target="_blank" title="https://connectathon.epic.com/interconnect-fhir-oauth/oauth2/token">https://connectathon.epic.com/interconnect-fhir-oauth/oauth2/token</a><br>
Secured Bulk Data server URL: <a href="https://connectathon.epic.com/interconnect-fhir-bulk-secure/api/FHIR/STU3/Group/ebUKRzWjCOkHtNr8R-zHgzc4TdaZx9-TOvXKIeP0bLnM3/$export" target="_blank" title="https://connectathon.epic.com/interconnect-fhir-bulk-secure/api/FHIR/STU3/Group/ebUKRzWjCOkHtNr8R-zHgzc4TdaZx9-TOvXKIeP0bLnM3/$export">https://connectathon.epic.com/interconnect-fhir-bulk-secure/api/FHIR/STU3/Group/ebUKRzWjCOkHtNr8R-zHgzc4TdaZx9-TOvXKIeP0bLnM3/$export</a></p>
<p>You must use this client ID to make a request for the token: 4E5DF30EC3EF11E8845F0050568B2116<br>
I have a certificate created that I can send you the keys for as well (I'm just doing manual client registration right now so I thought that would be easiest to supply the key).</p>



<a name="154001572"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Servers/near/154001572" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan Gottlieb <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Servers.html#154001572">(Sep 29 2018 at 14:35)</a>:</h4>
<p><span class="user-mention" data-user-id="195242">@Justin Stauffer</span> <span class="user-mention" data-user-id="191358">@Dennis Patterson</span> we posted some sample keys on the bulk data docs repo so people don't have to host jwks files for testing. Is it possible to register these too? <a href="https://github.com/smart-on-fhir/fhir-bulk-data-docs/tree/master/sample-jwks" target="_blank" title="https://github.com/smart-on-fhir/fhir-bulk-data-docs/tree/master/sample-jwks">https://github.com/smart-on-fhir/fhir-bulk-data-docs/tree/master/sample-jwks</a></p>



<a name="154001577"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Servers/near/154001577" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dennis Patterson <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Servers.html#154001577">(Sep 29 2018 at 14:36)</a>:</h4>
<p>Sure I'll get to work registering these in the Cerner server</p>



<a name="154001674"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Servers/near/154001674" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Justin Stauffer <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Servers.html#154001674">(Sep 29 2018 at 15:20)</a>:</h4>
<p>This zip file has the key data for Epic. There are multiple representations of the keys in here to make it easy for people using different systems.</p>
<p>Public Key:                      connectathon-2018-09-a.cer<br>
Private Key:                     connectathon-2018-09-a.key (encrypted with the password "epic")<br>
Private Key Unencrypted:         connectathon-2018-09-a-unencrypted.key (not encrypted, in base64 format)<br>
Combined Pub/Priv Key (PEM):     connectathon-2018-09-a.pem (encrypted with password "epic")<br>
Combined Pub/Priv Key (PFX):     connectathon-2018-09-a.pfx (encrypted with password "epic")<br>
Public Key in RSA Crypto Form:   connectathon-2018-09-a-rsacrypto-pub.txt<br>
Private Key in RSA Crypto Form:  connectathon-2018-09-a-rsacrypto-priv.txt</p>
<p><a href="/user_uploads/10155/KbdzHh3Hh8be8puo9VZxjsxC/HL7-Connectathon-2018-09.7z" target="_blank" title="HL7-Connectathon-2018-09.7z">HL7-Connectathon-2018-09.7z</a><br>
<a href="user_uploads/10155/4NpGIvDAwYG-JUtFM1ytS5I9/HL7-Connectathon-2018-09.zip" target="_blank" title="user_uploads/10155/4NpGIvDAwYG-JUtFM1ytS5I9/HL7-Connectathon-2018-09.zip">HL7-Connectathon-2018-09.zip</a></p>



<a name="154001683"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Servers/near/154001683" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dennis Patterson <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Servers.html#154001683">(Sep 29 2018 at 15:25)</a>:</h4>
<p><span class="user-mention" data-user-id="191414">@Dan Gottlieb</span>  and others: I've registered the sample jwks in the Cerner server under the "sample_jwks_es384" and "sample_jwks_rs384" client ids</p>



<a name="154001685"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Servers/near/154001685" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan Gottlieb <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Servers.html#154001685">(Sep 29 2018 at 15:26)</a>:</h4>
<p><span class="user-mention" data-user-id="191358">@Dennis Patterson</span>  awesome!</p>



<a name="154001686"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Servers/near/154001686" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan Gottlieb <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Servers.html#154001686">(Sep 29 2018 at 15:26)</a>:</h4>
<p>One note - we've discovered you have use the rawgit service to get a proper content type on the key files. For example, <a href="https://cdn.rawgit.com/smart-on-fhir/fhir-bulk-data-docs/master/sample-jwks/ES384.public.json" target="_blank" title="https://cdn.rawgit.com/smart-on-fhir/fhir-bulk-data-docs/master/sample-jwks/ES384.public.json">https://cdn.rawgit.com/smart-on-fhir/fhir-bulk-data-docs/master/sample-jwks/ES384.public.json</a> .</p>



<a name="154001688"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Servers/near/154001688" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan Gottlieb <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Servers.html#154001688">(Sep 29 2018 at 15:27)</a>:</h4>
<p>Is it possible to alter the jwks url for the registered keys?</p>



<a name="154001689"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Servers/near/154001689" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dennis Patterson <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Servers.html#154001689">(Sep 29 2018 at 15:28)</a>:</h4>
<p>I used <a href="https://raw.githubusercontent.com/smart-on-fhir/fhir-bulk-data-docs/master/sample-jwks/ES384.public.json" target="_blank" title="https://raw.githubusercontent.com/smart-on-fhir/fhir-bulk-data-docs/master/sample-jwks/ES384.public.json">https://raw.githubusercontent.com/smart-on-fhir/fhir-bulk-data-docs/master/sample-jwks/ES384.public.json</a> which I <em>think</em> gets the same results</p>



<a name="154001691"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Servers/near/154001691" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Servers.html#154001691">(Sep 29 2018 at 15:28)</a>:</h4>
<p>Yes, save for content type headers</p>



<a name="154001693"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Servers/near/154001693" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan Gottlieb <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Servers.html#154001693">(Sep 29 2018 at 15:29)</a>:</h4>
<p>It should, but it returns a content type of text instead of JSON. This broke the SMART server, but may work with yours :)</p>



<a name="154001696"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Servers/near/154001696" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dennis Patterson <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Servers.html#154001696">(Sep 29 2018 at 15:29)</a>:</h4>
<p>gotcha</p>



<a name="154001723"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Servers/near/154001723" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dennis Patterson <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Servers.html#154001723">(Sep 29 2018 at 15:33)</a>:</h4>
<p>I did some testing and it doesn't choke on the content type header, but I'll push out the change for consistency on the next deployment.  If anybody tries these client ids, let me know if you run into any issues</p>



<a name="154002021"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Servers/near/154002021" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan Gottlieb <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Servers.html#154002021">(Sep 29 2018 at 18:38)</a>:</h4>
<p><span class="user-mention" data-user-id="191358">@Dennis Patterson</span> the SMART client now works your server!</p>



<a name="154002247"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Servers/near/154002247" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Justin Stauffer <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Servers.html#154002247">(Sep 29 2018 at 20:28)</a>:</h4>
<p>If you want to use the shared RSA key that Dan posted to access the Epic URL, you can do so now as long as you use this Client ID to obtain your access token: DD794EAEC42511E88BE00050568B2116</p>



<a name="154016644"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Servers/near/154016644" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Servers.html#154016644">(Nov 08 2018 at 13:51)</a>:</h4>
<p><span class="user-mention" data-user-id="193731">@Vladimir Ignatov</span> : cannot use the SMART bulk data test server - it gives me <code>Unable to verify the token with any of the public keys found in the JWKS</code>, not sure what changed</p>



<a name="154016645"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Servers/near/154016645" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Servers.html#154016645">(Nov 08 2018 at 13:51)</a>:</h4>
<p>I tried to re-create the client id, double-checked the client credentials, everything seems fine</p>



<a name="154016646"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Servers/near/154016646" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Servers.html#154016646">(Nov 08 2018 at 13:52)</a>:</h4>
<p>Client assertion that fails: <code>eyJ0eXAiOiJKV1QiLCJrdHkiOiJSU0EiLCJhbGciOiJSUzM4NCIsImtpZCI6IjY2NjJGMkY4MUMxQTQ1QTcxNTNEREI3NUM4MjJCNjY3M0U2RTdBMjkifQ.eyJpc3MiOiJleUpoYkdjaU9pSklVekkxTmlJc0luUjVjQ0k2SWtwWFZDSXNJbXRwWkNJNkluSmxaMmx6ZEhKaGRHbHZiaTEwYjJ0bGJpSjkuZXlKcWQydHpYM1Z5YkNJNkltaDBkSEJ6T2k4dlpHVnRieTVqWVhKbFpYWnZiSFYwYVc5dUxtTnZiUzlEVG1wM2RHTmhjbVZsZG05c2RYUnBiMjVqYjIwdWFuTnZiaUlzSW1GalkyVnpjMVJ2YTJWdWMwVjRjR2x5WlVsdUlqb3hOU3dpYVdGMElqb3hOVFF4TmpnME1ETTJmUS5MY2dYeTN5VEJtNFQ2bnN0XzBDVzg0T29wU24xUmwxbVc1azEtNGNTM2Z3Iiwic3ViIjoiZXlKaGJHY2lPaUpJVXpJMU5pSXNJblI1Y0NJNklrcFhWQ0lzSW10cFpDSTZJbkpsWjJsemRISmhkR2x2YmkxMGIydGxiaUo5LmV5SnFkMnR6WDNWeWJDSTZJbWgwZEhCek9pOHZaR1Z0Ynk1allYSmxaWFp2YkhWMGFXOXVMbU52YlM5RFRtcDNkR05oY21WbGRtOXNkWFJwYjI1amIyMHVhbk52YmlJc0ltRmpZMlZ6YzFSdmEyVnVjMFY0Y0dseVpVbHVJam94TlN3aWFXRjBJam94TlRReE5qZzBNRE0yZlEuTGNnWHkzeVRCbTRUNm5zdF8wQ1c4NE9vcFNuMVJsMW1XNWsxLTRjUzNmdyIsImF1ZCI6Imh0dHBzOi8vYnVsay1kYXRhLnNtYXJ0aGVhbHRoaXQub3JnL2F1dGgvdG9rZW4iLCJqdGkiOiI1Njg2ZjdkMy03YzlkLTQ5MjUtOWM2My0xOTIxZDNmYmQ3YjMiLCJuYmYiOjE1NDE2ODQ0MjcsImV4cCI6MTU0MTY4NDcyN30.sa_ntw7ZcUbuFoGYRel4M-Jrx16GUmvKg8p7LGKnSVYm5WzPrx7EWZ_TOjxtl1d2t4Cw2AdF34ftcHjI8wTHXzMV1QgqXsPELFwUYPmp8xol54Fjx1wYkah0kraFJ8hED1nrjfTkm873M3lldELhAxCc7pMnTLFpepRG7R5ENepimP9uIqYyiAwYVKy5kbAWA839yb1Dolw4JSVqJEFFvbAiVCzi-_pLzFIugu1JWVRC3yYEY8uFJHkkurjEac7snd-pRo4E6u-aKn0vFc4NzcUFNb6FOXeBiHhZI6Rk1jq4spepvfUhxZTvW7uU3Ek2ZeCZSTzRrmqIUPD8J7kjpw</code></p>



<a name="154016654"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Servers/near/154016654" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Servers.html#154016654">(Nov 08 2018 at 14:11)</a>:</h4>
<p><span class="user-mention" data-user-id="195242">@Justin Stauffer</span> :  getting authentication problems with Epic server as well, using client ID <code>4E5DF30EC3EF11E8845F0050568B2116</code></p>



<a name="154016655"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Servers/near/154016655" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Servers.html#154016655">(Nov 08 2018 at 14:12)</a>:</h4>
<p>Client assertion:</p>



<a name="154016656"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Servers/near/154016656" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Servers.html#154016656">(Nov 08 2018 at 14:12)</a>:</h4>
<p><code>eyJ0eXAiOiJKV1QiLCJrdHkiOiJSU0EiLCJhbGciOiJSUzM4NCIsImtpZCI6IkQ3NjU0NDAyQkZDMzkzNzQyN0VBMzlBNTRBOTQzQUNENDlGNEU4MTYifQ.eyJpc3MiOiI0RTVERjMwRUMzRUYxMUU4ODQ1RjAwNTA1NjhCMjExNiIsInN1YiI6IjRFNURGMzBFQzNFRjExRTg4NDVGMDA1MDU2OEIyMTE2IiwiYXVkIjoiaHR0cHM6Ly9jb25uZWN0YXRob24uZXBpYy5jb20vaW50ZXJjb25uZWN0LWZoaXItb2F1dGgvb2F1dGgyL3Rva2VuIiwianRpIjoiYWU0YmM2ODgtN2U0MS00ZDBmLTk4NzgtYjBhMTM1ZjdjYzE3IiwibmJmIjoxNTQxNjg1NDY3LCJleHAiOjE1NDE2ODU3Njd9.WXdMO-9SHUMsL_YBMPA69xS0TnO-2RaDz5zGMWPL66Z0uLvjvoi6KFo6Ku8OXW828eYhvtP26ad-ysrFxZ8vA2n45jk18MRfqmXYBxZzb_rWpYMZwfz6DoJ8AYrgQXfzXv4_BNU4P6vsr1DN96xNgUszCdbiPESQY8CQv4JgJ9n6PDhIOdEIczxw1xtItVQ0XXP8p495OJhIcME4ZQyS5u83s1vfkkCd7HUENv5DV70rbnTqdrUyEX6dl4ShwIKk8ml3VPD-zt5uEGQCu44zkcSsiMkZh9aenTQz7STYoJU9xvjFytnW5Iigu4pXOBTVCsIki0n0I2gS-_nU3Kee1Q</code></p>



<a name="154016657"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Servers/near/154016657" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Servers.html#154016657">(Nov 08 2018 at 14:12)</a>:</h4>
<p>Getting back <code>invalid_client</code></p>



<a name="154016725"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Servers/near/154016725" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vladimir Ignatov <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Servers.html#154016725">(Nov 08 2018 at 15:54)</a>:</h4>
<p>Nothing has changed in the last month. Could it be a change on your end?</p>



<a name="154016727"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Servers/near/154016727" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Servers.html#154016727">(Nov 08 2018 at 16:10)</a>:</h4>
<p>It might well be, but I cannot find anything wrong: <code>"kid": "6662F2F81C1A45A7153DDB75C822B6673E6E7A29"</code>, the client_id is:</p>



<a name="154016728"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Servers/near/154016728" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Servers.html#154016728">(Nov 08 2018 at 16:10)</a>:</h4>
<p>{<br>
  "jwks_url": "<a href="https://demo.careevolution.com/CNjwtcareevolutioncom.json" target="_blank" title="https://demo.careevolution.com/CNjwtcareevolutioncom.json">https://demo.careevolution.com/CNjwtcareevolutioncom.json</a>",<br>
  "accessTokensExpireIn": 15,<br>
  "iat": 1541684036<br>
}</p>



<a name="154016729"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Servers/near/154016729" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Servers.html#154016729">(Nov 08 2018 at 16:11)</a>:</h4>
<p>and that jwks_url resolves correctly</p>



<a name="154016730"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Servers/near/154016730" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Servers.html#154016730">(Nov 08 2018 at 16:11)</a>:</h4>
<p>Maybe the server did not switch from daylight saving time?</p>



<a name="154016762"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Servers/near/154016762" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vladimir Ignatov <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Servers.html#154016762">(Nov 08 2018 at 17:02)</a>:</h4>
<p>Here is your error log:</p>
<p>{ TokenExpiredError: jwt expired<br>
    at /app/node_modules/jsonwebtoken/verify.js:141:21<br>
    at getSecret (/app/node_modules/jsonwebtoken/verify.js:76:14)<br>
    at Object.module.exports [as verify] (/app/node_modules/jsonwebtoken/verify.js:80:10)<br>
    ...<br>
name: 'TokenExpiredError',<br>
message: 'jwt expired',<br>
expiredAt: 2018-11-08T13:45:27.000Z }</p>



<a name="154016763"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Servers/near/154016763" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Servers.html#154016763">(Nov 08 2018 at 17:04)</a>:</h4>
<p>Ah ok, so it is a time-related problem - let me double-check that I am sending the right expiration time</p>



<a name="154016766"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Servers/near/154016766" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Servers.html#154016766">(Nov 08 2018 at 17:11)</a>:</h4>
<p>So I sent that request at 8:40 AM EST = 13:40 UTC, with that expiration time - so it should not have been considered expired?</p>



<a name="154016767"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Servers/near/154016767" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Servers.html#154016767">(Nov 08 2018 at 17:11)</a>:</h4>
<p>What's the current time now according to your server?</p>



<a name="154016771"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Servers/near/154016771" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vladimir Ignatov <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Servers.html#154016771">(Nov 08 2018 at 17:13)</a>:</h4>
<p>2018-11-08T17:13:03.755563+00:00</p>



<a name="154016773"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Servers/near/154016773" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Servers.html#154016773">(Nov 08 2018 at 17:17)</a>:</h4>
<p>looks right - let me try again</p>



<a name="154016775"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Servers/near/154016775" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Servers.html#154016775">(Nov 08 2018 at 17:23)</a>:</h4>
<p>same error - I am sending <code>"exp": 1541698009</code></p>



<a name="154016776"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Servers/near/154016776" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Servers.html#154016776">(Nov 08 2018 at 17:23)</a>:</h4>
<p>that should be 17:26 UTC</p>



<a name="154016780"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Servers/near/154016780" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Servers.html#154016780">(Nov 08 2018 at 17:28)</a>:</h4>
<p>the problem is not the expiration, is the <code>nbf</code> claim - removed that and it works</p>



<a name="154016781"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Servers/near/154016781" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vladimir Ignatov <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Servers.html#154016781">(Nov 08 2018 at 17:28)</a>:</h4>
<p>Are you also adding some lifetime to the current timestamp? For example, 5 min in JS would be:<br>
exp: Date.now()/1000 + 300, // 5 min</p>



<a name="154016784"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Servers/near/154016784" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Servers.html#154016784">(Nov 08 2018 at 17:29)</a>:</h4>
<p>I was sending nbf = current time, exp = current time + 5 minutes</p>



<a name="154016786"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Servers/near/154016786" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Servers.html#154016786">(Nov 08 2018 at 17:29)</a>:</h4>
<p>Now I am just sending exp = current time + 5 minutes and it works</p>



<a name="154016789"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Servers/near/154016789" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Servers.html#154016789">(Nov 08 2018 at 17:29)</a>:</h4>
<p>I guess my clock is a bit later than your server one and that's enough to make the nbf not valid</p>



<a name="154016800"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Servers/near/154016800" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Servers.html#154016800">(Nov 08 2018 at 17:34)</a>:</h4>
<p>I think I'll just remove the <code>nbf</code> claim - it just causes problems</p>



<a name="154016801"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Servers/near/154016801" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vladimir Ignatov <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Servers.html#154016801">(Nov 08 2018 at 17:36)</a>:</h4>
<p>Yes, <code>nbf</code> seem confusing to me. Who knows how the underlying libraries will interpret it...</p>



<a name="154016802"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Servers/near/154016802" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Servers.html#154016802">(Nov 08 2018 at 17:41)</a>:</h4>
<p>Agreed</p>



<a name="154016803"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Servers/near/154016803" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Servers.html#154016803">(Nov 08 2018 at 17:41)</a>:</h4>
<p>Thanks Vladimir</p>



<a name="154016804"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Servers/near/154016804" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vladimir Ignatov <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Servers.html#154016804">(Nov 08 2018 at 17:44)</a>:</h4>
<p>Sure</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
