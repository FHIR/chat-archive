---
layout: page
title: "FHIR Chat  · $export operation · bulk data"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/index.html">bulk data</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/.24export.20operation.html">$export operation</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="155145073"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/%24export%20operation/near/155145073" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/.24export.20operation.html#155145073">(Jan 15 2019 at 04:40)</a>:</h4>
<p>Is there formal definition of $export operation in FHIR spec?</p>



<a name="155145087"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/%24export%20operation/near/155145087" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/.24export.20operation.html#155145087">(Jan 15 2019 at 04:40)</a>:</h4>
<p>No -- but we're planning on creating one in an IG as we formalize this through the ballot process!</p>



<a name="155145192"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/%24export%20operation/near/155145192" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/.24export.20operation.html#155145192">(Jan 15 2019 at 04:43)</a>:</h4>
<p>I am considering using $export operation on ValueSet resource. Is that OK?</p>



<a name="155145199"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/%24export%20operation/near/155145199" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/.24export.20operation.html#155145199">(Jan 15 2019 at 04:44)</a>:</h4>
<p>To export all the valuesets on a server?</p>



<a name="155145245"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/%24export%20operation/near/155145245" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/.24export.20operation.html#155145245">(Jan 15 2019 at 04:44)</a>:</h4>
<p>In which case you'd do  <code>[base]/$export?_type=ValueSet</code></p>



<a name="155145257"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/%24export%20operation/near/155145257" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/.24export.20operation.html#155145257">(Jan 15 2019 at 04:45)</a>:</h4>
<p>Kindly. If someone want to get all HL7 FHIR value sets from my server, I need to find a way to support that.<br>
I am thinking [base]/ValueSet/$export?_typeFilter=ValueSet.publisher=HL7&amp;_since=2018-01-01</p>



<a name="155145315"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/%24export%20operation/near/155145315" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/.24export.20operation.html#155145315">(Jan 15 2019 at 04:46)</a>:</h4>
<p>We don't currently define an operation at /ValueSet/$export, but the example I gave above should do what you're looking for</p>



<a name="155145325"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/%24export%20operation/near/155145325" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/.24export.20operation.html#155145325">(Jan 15 2019 at 04:47)</a>:</h4>
<p>I.e. at base/$export</p>



<a name="155145327"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/%24export%20operation/near/155145327" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/.24export.20operation.html#155145327">(Jan 15 2019 at 04:47)</a>:</h4>
<p>Oh. That is correct.</p>



<a name="157065793"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/%24export%20operation/near/157065793" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/.24export.20operation.html#157065793">(Jan 28 2019 at 23:09)</a>:</h4>
<p>Reading the current version of the spec, wondering why the <code>Accept</code> header can only be json at the moment?<br>
Is that really still intentional?</p>



<a name="157065870"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/%24export%20operation/near/157065870" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/.24export.20operation.html#157065870">(Jan 28 2019 at 23:10)</a>:</h4>
<p>On the status API call? We only define a JSON status response.</p>



<a name="157066100"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/%24export%20operation/near/157066100" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/.24export.20operation.html#157066100">(Jan 28 2019 at 23:15)</a>:</h4>
<p>Any reason why that didn't use a Task resource as the response instead of a hand crafted json object?</p>



<a name="157066112"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/%24export%20operation/near/157066112" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/.24export.20operation.html#157066112">(Jan 28 2019 at 23:15)</a>:</h4>
<p>Or is that as it's likely not a FHIR server doing it.</p>



<a name="157066196"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/%24export%20operation/near/157066196" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/.24export.20operation.html#157066196">(Jan 28 2019 at 23:16)</a>:</h4>
<p>Mainly clarity, and the fact that we didn't expect that a bulk data server would necessarily be a more general FHIR server.</p>



<a name="157066573"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/%24export%20operation/near/157066573" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/.24export.20operation.html#157066573">(Jan 28 2019 at 23:23)</a>:</h4>
<p>And the in-progress status has no return body?</p>



<a name="157066690"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/%24export%20operation/near/157066690" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/.24export.20operation.html#157066690">(Jan 28 2019 at 23:24)</a>:</h4>
<p>Could that do an OperationOutcome just as the delete and $export has?</p>



<a name="157066947"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/%24export%20operation/near/157066947" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/.24export.20operation.html#157066947">(Jan 28 2019 at 23:28)</a>:</h4>
<p>There is also no mention of if deleted resources should be included in the output or not (especially since there is the _since parameter) and if they are, how these would be represented in the ndjson file.</p>



<a name="157067003"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/%24export%20operation/near/157067003" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/.24export.20operation.html#157067003">(Jan 28 2019 at 23:29)</a>:</h4>
<p>This would be required to use the format to exchange regular updates to content (such as the provider directory), catalogs, terminologies ...</p>



<a name="157067082"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/%24export%20operation/near/157067082" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/.24export.20operation.html#157067082">(Jan 28 2019 at 23:30)</a>:</h4>
<p>(really search vs history to get deltas)</p>



<a name="157068343"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/%24export%20operation/near/157068343" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/.24export.20operation.html#157068343">(Jan 28 2019 at 23:53)</a>:</h4>
<p>There's also nothing in the status tracking that talks about the requiresAccessToken, only the final result.<br>
Does this mean that the DELETE doesn't require the access token? - Should it? (feels like it should)</p>



<a name="157068424"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/%24export%20operation/near/157068424" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/.24export.20operation.html#157068424">(Jan 28 2019 at 23:55)</a>:</h4>
<blockquote>
<p>And the in-progress status has no return body?</p>
</blockquote>
<p>Correct</p>



<a name="157068487"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/%24export%20operation/near/157068487" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/.24export.20operation.html#157068487">(Jan 28 2019 at 23:56)</a>:</h4>
<p>Re: obtaining records of deleted resources, this has been out of scope; the official advice is basically "occasionally you should query without a _since to learn what has disappeared".</p>



<a name="157068527"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/%24export%20operation/near/157068527" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/.24export.20operation.html#157068527">(Jan 28 2019 at 23:58)</a>:</h4>
<p>And then perform a match across all the data to determine what is missing, and therefore deleted.<br>
(which could also be that security has changed too - but same effect right?)</p>



<a name="157068587"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/%24export%20operation/near/157068587" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/.24export.20operation.html#157068587">(Jan 28 2019 at 23:58)</a>:</h4>
<p>Re: access tokens, all API operations (kick off, status, delete) require Authorization. The "requiresAccessToken" property is specific to the final step of retrieving results files, which may be hosted somewhere entirely separate. That's why this property needs to be communicated in band</p>



<a name="157068676"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/%24export%20operation/near/157068676" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/.24export.20operation.html#157068676">(Jan 29 2019 at 00:00)</a>:</h4>
<blockquote>
<p>And then perform a match across all the data to determine what is missing, and therefore deleted. (which could also be that security has changed too - but same effect right?)</p>
</blockquote>
<p>Yes, I think that's right. We could think about an operation to bulk fetching History entries, but that's a different thing</p>



<a name="157068737"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/%24export%20operation/near/157068737" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/.24export.20operation.html#157068737">(Jan 29 2019 at 00:01)</a>:</h4>
<p>"transactionTime": "[instant]" is a little bit obscure to me. <code>... that indicates the server's time when the query is run</code> doesn't quite work for me. Isn't this really the point in time that the last transaction occurred?<br>
I'm thinking that in some cases we would probably have a pre-prepared daily dump of the store that we can return and the last transaction record would be the end of that day (or hour etc) So isn't really the time when the query is run (and there are many queries here)</p>



<a name="157068800"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/%24export%20operation/near/157068800" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/.24export.20operation.html#157068800">(Jan 29 2019 at 00:02)</a>:</h4>
<p>Can we assume that this is really just the point in time where the data was "snapshotted" or something like that?</p>



<a name="157068829"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/%24export%20operation/near/157068829" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/.24export.20operation.html#157068829">(Jan 29 2019 at 00:03)</a>:</h4>
<p>The important thing is that all transactions up to this time are included; that's why we write "Note: to properly meet these constraints, a FHIR Server might need to wait for any pending transactions to resolve in its database, before starting the export process". Is this unclear?</p>



<a name="157068832"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/%24export%20operation/near/157068832" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/.24export.20operation.html#157068832">(Jan 29 2019 at 00:03)</a>:</h4>
<p>As this is the value that I'm expecting that a following export would use<br>
e.g. $export?_since=[transactionTime from last call]</p>



<a name="157068876"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/%24export%20operation/near/157068876" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/.24export.20operation.html#157068876">(Jan 29 2019 at 00:04)</a>:</h4>
<p>Precisely</p>



<a name="157068883"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/%24export%20operation/near/157068883" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/.24export.20operation.html#157068883">(Jan 29 2019 at 00:04)</a>:</h4>
<p>That pattern of client behavior needs to "work".</p>



<a name="157068897"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/%24export%20operation/near/157068897" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/.24export.20operation.html#157068897">(Jan 29 2019 at 00:04)</a>:</h4>
<p>(fetching all expected results without introducing a gap)</p>



<a name="157068932"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/%24export%20operation/near/157068932" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/.24export.20operation.html#157068932">(Jan 29 2019 at 00:05)</a>:</h4>
<p>That's why I'm not a fan of <code>the server's time when the query is run</code>, can we re-word that to something more around <code>the point in time where the data was current</code>?</p>



<a name="157068943"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/%24export%20operation/near/157068943" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/.24export.20operation.html#157068943">(Jan 29 2019 at 00:05)</a>:</h4>
<p>When it's run isn't quite the same thing.</p>



<a name="157069011"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/%24export%20operation/near/157069011" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/.24export.20operation.html#157069011">(Jan 29 2019 at 00:06)</a>:</h4>
<p>Sure -- we've thrashed on the language for this a bit. Happy to accept a PR that clarifies, consistent with the discussion here!</p>



<a name="157069015"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/%24export%20operation/near/157069015" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/.24export.20operation.html#157069015">(Jan 29 2019 at 00:06)</a>:</h4>
<p>(Good to have confirmed that this was the intention - thanks)</p>



<a name="157069052"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/%24export%20operation/near/157069052" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/.24export.20operation.html#157069052">(Jan 29 2019 at 00:07)</a>:</h4>
<p>Will write one when I finish the review and how we might do this for directory exchange in the VhDir IG</p>



<a name="157069340"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/%24export%20operation/near/157069340" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/.24export.20operation.html#157069340">(Jan 29 2019 at 00:13)</a>:</h4>
<p>Did we end up with a mechanism for requesting that the files be zipped?</p>



<a name="157069389"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/%24export%20operation/near/157069389" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/.24export.20operation.html#157069389">(Jan 29 2019 at 00:14)</a>:</h4>
<p>Gzip in transit, yes (http negotiation)</p>



<a name="157069394"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/%24export%20operation/near/157069394" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/.24export.20operation.html#157069394">(Jan 29 2019 at 00:14)</a>:</h4>
<p>Did you mean something else?</p>



<a name="157069401"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/%24export%20operation/near/157069401" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/.24export.20operation.html#157069401">(Jan 29 2019 at 00:14)</a>:</h4>
<p>"url" : "<a href="http://serverpath2/patient_file_1.ndjson.zip" target="_blank" title="http://serverpath2/patient_file_1.ndjson.zip">http://serverpath2/patient_file_1.ndjson.zip</a>"</p>



<a name="157069416"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/%24export%20operation/near/157069416" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/.24export.20operation.html#157069416">(Jan 29 2019 at 00:14)</a>:</h4>
<p>binary file request</p>



<a name="157069435"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/%24export%20operation/near/157069435" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/.24export.20operation.html#157069435">(Jan 29 2019 at 00:15)</a>:</h4>
<p>Or is that implied to be done on the wire - compressing in realtime over the http channel.</p>



<a name="157069441"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/%24export%20operation/near/157069441" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/.24export.20operation.html#157069441">(Jan 29 2019 at 00:15)</a>:</h4>
<p>That we didn't define; but you can request gzip on the http connection and then stream into a compression algorithm of your choice</p>



<a name="157069487"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/%24export%20operation/near/157069487" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/.24export.20operation.html#157069487">(Jan 29 2019 at 00:16)</a>:</h4>
<p>Yeah, we're hoping that's good enough, rather than specifying negotiation of different file formats.</p>



<a name="157069518"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/%24export%20operation/near/157069518" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/.24export.20operation.html#157069518">(Jan 29 2019 at 00:16)</a>:</h4>
<p>This is then going to take up much more disk space on the content server holding the staging files too.</p>



<a name="157069562"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/%24export%20operation/near/157069562" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/.24export.20operation.html#157069562">(Jan 29 2019 at 00:17)</a>:</h4>
<p>Hmm, I'm going to look into the costing of Azure storage space here, as that could be relevant for me...</p>



<a name="157069581"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/%24export%20operation/near/157069581" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/.24export.20operation.html#157069581">(Jan 29 2019 at 00:17)</a>:</h4>
<p>That's an interesting point. In many architectures, a server can store files compressed under the hood  -- but maybe not everywhere</p>



<a name="157069758"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/%24export%20operation/near/157069758" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/.24export.20operation.html#157069758">(Jan 29 2019 at 00:20)</a>:</h4>
<p>On a quick look, I can't see anything in the Azure portal to configure transparent compression (only encryption).<br>
So might have to do something fancy here, can't just let the web server static file handler serve up the file :(</p>



<a name="157069790"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/%24export%20operation/near/157069790" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/.24export.20operation.html#157069790">(Jan 29 2019 at 00:22)</a>:</h4>
<p><a href="https://www.stefangordon.com/azure-storage-gzip-encoding/" target="_blank" title="https://www.stefangordon.com/azure-storage-gzip-encoding/">https://www.stefangordon.com/azure-storage-gzip-encoding/</a> has some info to suggest an approach ; I haven't tried this.</p>



<a name="157069834"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/%24export%20operation/near/157069834" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/.24export.20operation.html#157069834">(Jan 29 2019 at 00:22)</a>:</h4>
<p>_outputEncoding perhaps?</p>



<a name="157069856"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/%24export%20operation/near/157069856" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/.24export.20operation.html#157069856">(Jan 29 2019 at 00:23)</a>:</h4>
<p>But would you say "we don't support clients that request an unencoded output"? If so, you might as well use http headers and always return gzip content</p>



<a name="157069929"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/%24export%20operation/near/157069929" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/.24export.20operation.html#157069929">(Jan 29 2019 at 00:24)</a>:</h4>
<p>Interesting, gzip content, vs a zipfile with the data in it.</p>



<a name="157069959"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/%24export%20operation/near/157069959" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/.24export.20operation.html#157069959">(Jan 29 2019 at 00:25)</a>:</h4>
<p>The Cerner demo implementation works this way, from static S3 hosting, for what it's worth.</p>



<a name="157070006"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/%24export%20operation/near/157070006" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/.24export.20operation.html#157070006">(Jan 29 2019 at 00:26)</a>:</h4>
<p>(files are served up gzip'd, with http headers indicating this is the case.)</p>



<a name="157070089"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/%24export%20operation/near/157070089" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/.24export.20operation.html#157070089">(Jan 29 2019 at 00:28)</a>:</h4>
<p>And the filenames are still .ndjson, and assuming that they use http rather than some other mechanism to get them they never see anything.</p>



<a name="157070110"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/%24export%20operation/near/157070110" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/.24export.20operation.html#157070110">(Jan 29 2019 at 00:29)</a>:</h4>
<p>I don't remember what the filenames are (but the names are technically opaque)...</p>



<a name="157070113"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/%24export%20operation/near/157070113" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/.24export.20operation.html#157070113">(Jan 29 2019 at 00:29)</a>:</h4>
<p>It the process was internal and used a file:// location, then no compression would occur.</p>



<a name="157070122"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/%24export%20operation/near/157070122" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/.24export.20operation.html#157070122">(Jan 29 2019 at 00:30)</a>:</h4>
<p>(But I guess this is really internal only, so who cares)</p>



<a name="157070186"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/%24export%20operation/near/157070186" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/.24export.20operation.html#157070186">(Jan 29 2019 at 00:30)</a>:</h4>
<p>Yeah.</p>



<a name="157071073"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/%24export%20operation/near/157071073" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/.24export.20operation.html#157071073">(Jan 29 2019 at 00:49)</a>:</h4>
<p>Has there been discussion on returning the names of the files as they are completed? I.e. returning the complete body as an inprogress body to show what is complete... which could permit in progress downloads for the parts that are complete.</p>



<a name="157071184"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/%24export%20operation/near/157071184" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/.24export.20operation.html#157071184">(Jan 29 2019 at 00:51)</a>:</h4>
<p>There has been discussion; we deferred this capability because of the complexities of tracking errors, estimating progress, aligning expiration times, etc. The design was simpler with an atomic complete response.</p>



<a name="157071197"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/%24export%20operation/near/157071197" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/.24export.20operation.html#157071197">(Jan 29 2019 at 00:51)</a>:</h4>
<p><span class="user-mention" data-user-id="191414">@Dan Gottlieb</span> in case I forgot some of the rationale.</p>



<a name="157071632"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/%24export%20operation/near/157071632" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/.24export.20operation.html#157071632">(Jan 29 2019 at 01:01)</a>:</h4>
<p>Hmm, tracking errors could be interesting there. Also would be nice if there was a way to associate the errors with the section if that was relevant - having not done the implementation, not even sure if that would be a requirement.</p>



<a name="157072308"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/%24export%20operation/near/157072308" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/.24export.20operation.html#157072308">(Jan 29 2019 at 01:16)</a>:</h4>
<p>Also assuming that the count would be an integer in the json format, so no quotes around it.</p>



<a name="157075659"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/%24export%20operation/near/157075659" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/.24export.20operation.html#157075659">(Jan 29 2019 at 02:38)</a>:</h4>
<p>I can confirm Cerner gzip content though the file name is xxx.ndjson. I need to add DecompressionMethods to HttpClientHandler.</p>
<div class="codehilite"><pre><span></span>            var handler = new HttpClientHandler
            {
                AutomaticDecompression = DecompressionMethods.GZip | DecompressionMethods.None
            };
</pre></div>



<a name="157077359"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/%24export%20operation/near/157077359" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/.24export.20operation.html#157077359">(Jan 29 2019 at 03:25)</a>:</h4>
<p>And it has the content-encoding header defined?</p>



<a name="157077406"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/%24export%20operation/near/157077406" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/.24export.20operation.html#157077406">(Jan 29 2019 at 03:26)</a>:</h4>
<p>I guess so.</p>



<a name="157077410"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/%24export%20operation/near/157077410" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/.24export.20operation.html#157077410">(Jan 29 2019 at 03:26)</a>:</h4>
<p>Thanks.</p>



<a name="157145754"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/%24export%20operation/near/157145754" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/.24export.20operation.html#157145754">(Jan 29 2019 at 22:48)</a>:</h4>
<p>Yes. It does.<br>
Content-Encoding: gzip</p>



<a name="162353398"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/%24export%20operation/near/162353398" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Douglas DeShazo <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/.24export.20operation.html#162353398">(Apr 02 2019 at 16:59)</a>:</h4>
<p>Where is $export with respect to normative status?</p>



<a name="162353809"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/%24export%20operation/near/162353809" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/.24export.20operation.html#162353809">(Apr 02 2019 at 17:03)</a>:</h4>
<p>It's being balloted for trial use this month, for the first time.</p>



<a name="162369031"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/%24export%20operation/near/162369031" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Douglas DeShazo <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/.24export.20operation.html#162369031">(Apr 02 2019 at 20:01)</a>:</h4>
<p>Thanks Josh.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
