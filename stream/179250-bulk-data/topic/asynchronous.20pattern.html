---
layout: page
title: "FHIR Chat  · asynchronous pattern · bulk data"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/index.html">bulk data</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/asynchronous.20pattern.html">asynchronous pattern</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153957700"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/asynchronous%20pattern/near/153957700" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/asynchronous.20pattern.html#153957700">(May 11 2018 at 01:41)</a>:</h4>
<p>The current doc for Asynchronous API indicates that it is client initiated via the <code>Prefer: response-async</code> header.  However, is it valid for a server to initiate the protocol without that header (I very much hope so)</p>



<a name="153957719"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/asynchronous%20pattern/near/153957719" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/asynchronous.20pattern.html#153957719">(May 11 2018 at 07:41)</a>:</h4>
<p>We haven't discussed this. Can you say more about why allowing this behavior would be helpful for you (as apposed to specifying that it's an error, for example)?</p>



<a name="153957944"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/asynchronous%20pattern/near/153957944" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/asynchronous.20pattern.html#153957944">(May 11 2018 at 17:05)</a>:</h4>
<p>I don't think the server should initiate this. I think we should define a clear way for the server to inform the client that it needs to make a request asynchronously</p>



<a name="153959931"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/asynchronous%20pattern/near/153959931" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/asynchronous.20pattern.html#153959931">(May 14 2018 at 06:19)</a>:</h4>
<p>We have a deployment model (to enable horizontal scaling) that means all updates are queued and processed asynchronously.</p>
<p>This doesn't need to require a client to make the request differently; the only difference is that the response code is 202 indicating that the async protocol is in play (even if the client didn't say <code>Prefer: response-async</code>.</p>
<p>Requiring a client to make the requests "differently" (ie add the header) seems needlessly onerous, when it is only the responses that need to be handled differently.</p>
<p>However, just requiring servers to announce that they behave this way via something in the <code>CapabilityStatement</code> would be good.</p>



<a name="153959972"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/asynchronous%20pattern/near/153959972" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/asynchronous.20pattern.html#153959972">(May 14 2018 at 07:04)</a>:</h4>
<p>why should the server be able to decide that the client can handle an async redirect properly?</p>



<a name="153960083"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/asynchronous%20pattern/near/153960083" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/asynchronous.20pattern.html#153960083">(May 14 2018 at 09:26)</a>:</h4>
<p>Are you suggesting that the server should refuse to accept the request then?  I can understand that behaviour if the client includes the header <code>Prefer: return=representation</code>, but if the client expresses no explicit preference, then why can't the server choose what best suits it?</p>



<a name="153960123"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/asynchronous%20pattern/near/153960123" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/asynchronous.20pattern.html#153960123">(May 14 2018 at 09:51)</a>:</h4>
<p>When you add an item to your queue, do you return a <code>Location</code> header with the location where the resource will appear?</p>



<a name="153960124"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/asynchronous%20pattern/near/153960124" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/asynchronous.20pattern.html#153960124">(May 14 2018 at 09:52)</a>:</h4>
<p>Just trying to assess how much your server follows the rules for "a FHIR REST API server". The <a href="http://hl7.org/fhir/STU3/http.html#create" target="_blank" title="http://hl7.org/fhir/STU3/http.html#create">current FHIR definition</a> is a bit limited / doesn't anticipate async creation. E.g. it says:</p>
<blockquote>
<p>SHALL also return a Location header</p>
</blockquote>



<a name="153960215"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/asynchronous%20pattern/near/153960215" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/asynchronous.20pattern.html#153960215">(May 14 2018 at 10:37)</a>:</h4>
<p>We can return either a Location URL for status of the queue entry or for the eventual location of the created resource (since that is determined before the request is enqueued)<br>
We're not sure which would be better</p>



<a name="153960217"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/asynchronous%20pattern/near/153960217" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/asynchronous.20pattern.html#153960217">(May 14 2018 at 10:38)</a>:</h4>
<p>Most of these things will be processed very quickly, so it's probably not worth the client being forced into a poll for the result type of interaction</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
