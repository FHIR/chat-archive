---
layout: page
title: "FHIR Chat  · bulk data api client · bulk data"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/index.html">bulk data</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/bulk.20data.20api.20client.html">bulk data api client</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="223395785"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/bulk%20data%20api%20client/near/223395785" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vasyl Herman <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/bulk.20data.20api.20client.html#223395785">(Jan 20 2021 at 16:16)</a>:</h4>
<p>Hello,<br>
I am looking for a JS or Python implementation of bulk client to pull the data from a FHIR bulk API and save it localy. I would appritiate any help on discovering such implementation. Could anybody help?</p>



<a name="223396093"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/bulk%20data%20api%20client/near/223396093" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vladimir Ignatov <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/bulk.20data.20api.20client.html#223396093">(Jan 20 2021 at 16:18)</a>:</h4>
<p>Here is a JS client you can try: <a href="https://github.com/smart-on-fhir/sample-apps-stu3/tree/master/fhir-downloader">https://github.com/smart-on-fhir/sample-apps-stu3/tree/master/fhir-downloader</a></p>



<a name="223428547"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/bulk%20data%20api%20client/near/223428547" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vasyl Herman <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/bulk.20data.20api.20client.html#223428547">(Jan 20 2021 at 20:12)</a>:</h4>
<p>Thanks! Could you please help me figure out why it gives me an error:<br>
413 Payload Too Large<br>
Too many files</p>
<p>PS: I've found this link <br>
<a href="https://bulk-data.smarthealthit.org/?m=10&amp;stu=4">https://bulk-data.smarthealthit.org/?m=10&amp;stu=4</a><br>
it works if I set Database Size to 1.000 Patients. however if I set more it throws the same error.<br>
Should I increace some system limits? Could you help please? or it is the server side limit?</p>



<a name="223434853"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/bulk%20data%20api%20client/near/223434853" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vladimir Ignatov <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/bulk.20data.20api.20client.html#223434853">(Jan 20 2021 at 21:01)</a>:</h4>
<p>That is specific to that server only. To avoid it, restrict the export by passing a <code>_since</code> and/or <code>_type</code> parameter. To do so with this client you can pass the <code>-T</code> and <code>-s</code> options like so:</p>
<p><code>node . -T Patient,Observation -s 2020-01-01T00:00:00</code><br>
This basically means "Give me only patients and observations modified since 2020".</p>
<p>There are too many variables involved in this. It might be a good idea to play a little with <a href="https://bulk-data.smarthealthit.org/sample-app/index.html?server=https%3A%2F%2Fbulk-data.smarthealthit.org%2FeyJlcnIiOiIiLCJwYWdlIjoxMDAwMCwiZHVyIjoxMCwidGx0IjoxNSwibSI6MSwic3R1Ijo0LCJkZWwiOjB9%2Ffhir">https://bulk-data.smarthealthit.org/sample-app/index.html?server=https%3A%2F%2Fbulk-data.smarthealthit.org%2FeyJlcnIiOiIiLCJwYWdlIjoxMDAwMCwiZHVyIjoxMCwidGx0IjoxNSwibSI6MSwic3R1Ijo0LCJkZWwiOjB9%2Ffhir</a>. Once you are satisfied with what gets exported, you can "translate" the used parameters to the CLI command.</p>



<a name="223435593"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/bulk%20data%20api%20client/near/223435593" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vasyl Herman <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/bulk.20data.20api.20client.html#223435593">(Jan 20 2021 at 21:07)</a>:</h4>
<p><span class="user-mention" data-user-id="193731">@Vladimir Ignatov</span> Thank you!!!</p>



<a name="223485626"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/bulk%20data%20api%20client/near/223485626" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vasyl Herman <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/bulk.20data.20api.20client.html#223485626">(Jan 21 2021 at 09:32)</a>:</h4>
<p>I am wondering if there is a way of convenrting ndjson files to FHIR Bundles. I am going to use cql-exec-fhir library to perform healthcare quality measures. The FHIR Data Source (for cql-exec-fhir library) expects each patient to be represented as a single FHIR Bundle containing all of the patient's relevant data but we have .ndjson as output of fhir-downloader.</p>



<a name="223511540"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/bulk%20data%20api%20client/near/223511540" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/bulk.20data.20api.20client.html#223511540">(Jan 21 2021 at 14:04)</a>:</h4>
<p>The main challenge here isn't ndjson-&gt;bundle; it's bringing together all data about a patient (spread across multiple ndjson files) into a single file. It's easy enough at small scale... you can pretty much do this in a single pass over the ndjson files, scanning for resources linked to your "target patient ID".</p>



<a name="223514778"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/bulk%20data%20api%20client/near/223514778" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Stanley <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/bulk.20data.20api.20client.html#223514778">(Jan 21 2021 at 14:27)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="191315">@Josh Mandel</span>  I had a look at the Bulk Data API early on and I had thought I saw that each record for a resource was an individual file. Now I notice that in the Synthea generator output that all of one type of resource are in one file. This means that, for example, the Patient.ndjson has many patients in it. I'm curious as to this structure. I use Go a bit, and the 'everything in one file' per resource type creates additional compute steps to unmarshall into structs, vs each individual resource on its own.</p>



<a name="223518711"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/bulk%20data%20api%20client/near/223518711" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/bulk.20data.20api.20client.html#223518711">(Jan 21 2021 at 14:56)</a>:</h4>
<p>The motivation for "each file has resources of a specific type" was designed to optimize loading into database / analysis tools. We don't optimize for "ease of querying data about a single patient" because bulk data is explicitly focused on larger populations.</p>



<a name="223520414"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/bulk%20data%20api%20client/near/223520414" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Stanley <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/bulk.20data.20api.20client.html#223520414">(Jan 21 2021 at 15:07)</a>:</h4>
<p>Ok, great. Thanks. I'm trying to push into a FHIR server efficiently. So, the current practice to load bulk data is to POST the entire file, rather than PUT (which requires a resource ID in path)?</p>



<a name="223522263"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/bulk%20data%20api%20client/near/223522263" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Stanley <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/bulk.20data.20api.20client.html#223522263">(Jan 21 2021 at 15:19)</a>:</h4>
<p>Sorry, I'm trying to understand and will try to be more clear. With everything in one file the assumption seems to be that it's for POSTing new resources to the target server. Otherwise you have to parse the bulk data file and get IDs for a PUT (requires service_url/resource/id in the path). THis means that updating resources with PUT is not an anticipated use case.</p>



<a name="223523517"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/bulk%20data%20api%20client/near/223523517" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/bulk.20data.20api.20client.html#223523517">(Jan 21 2021 at 15:26)</a>:</h4>
<p>This is out of scope for what we've tried to specify, so I don't have precise guidance for you. Specific servers often have "fast path" capabilities for bringing in large data sets all at once (e.g. <a href="https://cloud.google.com/solutions/importing-fhir-clinical-data">this capability in GCP</a>) but this is "below the abstraction barrier" of the FHIR API.</p>



<a name="223523678"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/bulk%20data%20api%20client/near/223523678" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/bulk.20data.20api.20client.html#223523678">(Jan 21 2021 at 15:27)</a>:</h4>
<p>More broadly: you can decide whether you want to preserve IDs when you import if your server supports this (in which case, you can use PUTs, or batch bundles of PUTs, or transaction bundles of PUTs) or not (in which case, you might need to remap IDs to match the constraints of your server).</p>



<a name="223824962"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/bulk%20data%20api%20client/near/223824962" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vasyl Herman <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/bulk.20data.20api.20client.html#223824962">(Jan 24 2021 at 17:31)</a>:</h4>
<p>I am trying to export bulk data from HAPI FHIR Server <a href="https://github.com/hapifhir/hapi-fhir-jpaserver-starter">built from master</a> using the fhir-downloader. Seems like it works fine, but it gives me back ndjson files named in a weird way. How this is controlled? I expected to see [Resource-name].ndjson files. <br>
<a href="/user_uploads/10155/2evHfkSnWI5e9JeqGth8HX2O/bulk-data.jpg">bulk-data.jpg</a></p>
<div class="message_inline_image"><a href="/user_uploads/10155/2evHfkSnWI5e9JeqGth8HX2O/bulk-data.jpg" title="bulk-data.jpg"><img src="/user_uploads/10155/2evHfkSnWI5e9JeqGth8HX2O/bulk-data.jpg"></a></div>



<a name="223825161"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/bulk%20data%20api%20client/near/223825161" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/bulk.20data.20api.20client.html#223825161">(Jan 24 2021 at 17:35)</a>:</h4>
<p>Server can name the files whatever they like</p>



<a name="223825320"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/bulk%20data%20api%20client/near/223825320" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vasyl Herman <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/bulk.20data.20api.20client.html#223825320">(Jan 24 2021 at 17:39)</a>:</h4>
<p><span class="user-mention" data-user-id="191912">@Michele Mottini</span> Thanks! I just thought there is a way to setup naming thru <code>application.yaml</code> or something</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
