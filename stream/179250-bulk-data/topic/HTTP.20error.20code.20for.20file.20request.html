---
layout: page
title: "FHIR Chat  · HTTP error code for file request · bulk data"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/index.html">bulk data</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/HTTP.20error.20code.20for.20file.20request.html">HTTP error code for file request</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="189250652"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/HTTP%20error%20code%20for%20file%20request/near/189250652" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/HTTP.20error.20code.20for.20file.20request.html#189250652">(Feb 27 2020 at 19:58)</a>:</h4>
<p>In <a href="http://hl7.org/fhir/uv/bulkdata/export/index.html#file-request" target="_blank" title="http://hl7.org/fhir/uv/bulkdata/export/index.html#file-request">File Request</a>, "If the requiresAccessToken field in the Complete Status body is set to true, the request SHALL include a valid access token." So if client does NOT include bearer token, or include an invalid token, should the error code be 400 (bad request) or 401(unauthorized)?<br>
<span class="user-mention" data-user-id="191315">@Josh Mandel</span> <span class="user-mention" data-user-id="191414">@Dan Gottlieb</span></p>



<a name="189251671"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/HTTP%20error%20code%20for%20file%20request/near/189251671" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan Gottlieb <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/HTTP.20error.20code.20for.20file.20request.html#189251671">(Feb 27 2020 at 20:09)</a>:</h4>
<p>Hmm,  since it's a token related error, any reason it shouldn't be a 401?</p>



<a name="189251931"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/HTTP%20error%20code%20for%20file%20request/near/189251931" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/HTTP.20error.20code.20for.20file.20request.html#189251931">(Feb 27 2020 at 20:12)</a>:</h4>
<p>I think it should be 401 but I could not find anywhere (bulk-data, FHIR, OAuth, etc) says that it MUST/SHALL be 401.</p>



<a name="189252034"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/HTTP%20error%20code%20for%20file%20request/near/189252034" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Isaac Vetter <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/HTTP.20error.20code.20for.20file.20request.html#189252034">(Feb 27 2020 at 20:13)</a>:</h4>
<p>Yunwei - does <a href="https://tools.ietf.org/html/rfc7235#section-3.1" target="_blank" title="https://tools.ietf.org/html/rfc7235#section-3.1">HTTP</a> say that it should be 401?</p>



<a name="189252241"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/HTTP%20error%20code%20for%20file%20request/near/189252241" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/HTTP.20error.20code.20for.20file.20request.html#189252241">(Feb 27 2020 at 20:15)</a>:</h4>
<p>(Answered over at <a class="stream-topic" data-stream-id="179166" href="/#narrow/stream/179166-implementers/topic/HTTP.20code.20400.20or.20401">#implementers &gt; HTTP code 400 or 401</a>  as well as I could.)</p>



<a name="189252414"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/HTTP%20error%20code%20for%20file%20request/near/189252414" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/HTTP.20error.20code.20for.20file.20request.html#189252414">(Feb 27 2020 at 20:17)</a>:</h4>
<p>I think if you control this server, then a 401 is probably a good way to communicate it -- but of course if <code>requiresAccessToken</code> is <em>false</em>, we're typically talking about a non-FHIR file server.</p>



<a name="189252605"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/HTTP%20error%20code%20for%20file%20request/near/189252605" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/HTTP.20error.20code.20for.20file.20request.html#189252605">(Feb 27 2020 at 20:19)</a>:</h4>
<p>But when <code>requiresAccessToken</code> is <em>true</em>, the one strong thing we can say is that the error response must have a <code>WWW-Authenticate</code> header. That's from <a href="https://tools.ietf.org/html/rfc6750#section-3" target="_blank" title="https://tools.ietf.org/html/rfc6750#section-3">https://tools.ietf.org/html/rfc6750#section-3</a>, which holds for any OAuth 2.0 bearer token-protected server.</p>



<a name="189252888"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/HTTP%20error%20code%20for%20file%20request/near/189252888" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/HTTP.20error.20code.20for.20file.20request.html#189252888">(Feb 27 2020 at 20:22)</a>:</h4>
<p>For a client, if it does NOT send bearer token, then it could get either 400 (less common), or 401 (more common). If the client sends invalid token, then it shall get 401. Is that understanding correct?</p>



<a name="189253047"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/HTTP%20error%20code%20for%20file%20request/near/189253047" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/HTTP.20error.20code.20for.20file.20request.html#189253047">(Feb 27 2020 at 20:24)</a>:</h4>
<p>With an invalid token, the use of a 401 status is a SHOULD. See <a href="https://tools.ietf.org/html/rfc6750#section-3.1" target="_blank" title="https://tools.ietf.org/html/rfc6750#section-3.1">https://tools.ietf.org/html/rfc6750#section-3.1</a> which says:</p>
<div class="codehilite"><pre><span></span>   invalid_token
         The access token provided is expired, revoked, malformed, or
         invalid for other reasons.  The resource SHOULD respond with
         the HTTP 401 (Unauthorized) status code.  The client MAY
         request a new access token and retry the protected resource
         request.
</pre></div>



<a name="189253092"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/HTTP%20error%20code%20for%20file%20request/near/189253092" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/HTTP.20error.20code.20for.20file.20request.html#189253092">(Feb 27 2020 at 20:25)</a>:</h4>
<p>But the <code>invalid_token</code> error code in the <code>WWW-Authenticate</code>: that's what's required.</p>



<a name="189253309"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/HTTP%20error%20code%20for%20file%20request/near/189253309" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/HTTP.20error.20code.20for.20file.20request.html#189253309">(Feb 27 2020 at 20:27)</a>:</h4>
<p><code>SHOULD</code> mean exception is possible. Sigh.</p>



<a name="189253385"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/HTTP%20error%20code%20for%20file%20request/near/189253385" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/HTTP.20error.20code.20for.20file.20request.html#189253385">(Feb 27 2020 at 20:28)</a>:</h4>
<p>Gotta love standards ;-)</p>



<a name="189262075"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/HTTP%20error%20code%20for%20file%20request/near/189262075" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/HTTP.20error.20code.20for.20file.20request.html#189262075">(Feb 27 2020 at 22:02)</a>:</h4>
<p>as I indicated elsewhere... access denied needs to allow for many return codes as possibility .. see <a href="http://build.fhir.org/security.html#AccessDenied" target="_blank" title="http://build.fhir.org/security.html#AccessDenied">http://build.fhir.org/security.html#AccessDenied</a></p>



<a name="189271632"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/HTTP%20error%20code%20for%20file%20request/near/189271632" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/HTTP.20error.20code.20for.20file.20request.html#189271632">(Feb 28 2020 at 00:13)</a>:</h4>
<p>Move to argonaut</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
