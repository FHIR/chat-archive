---
layout: page
title: "FHIR Chat  · Inferno / bdt test error for Auth-01.0.0 and Auth-01.0.1 · bulk data"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/index.html">bulk data</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Inferno.20.2F.20bdt.20test.20error.20for.20Auth-01.2E0.2E0.20and.20Auth-01.2E0.2E1.html">Inferno / bdt test error for Auth-01.0.0 and Auth-01.0.1</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="267640493"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Inferno%20/%20bdt%20test%20error%20for%20Auth-01.0.0%20and%20Auth-01.0.1/near/267640493" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Inferno.20.2F.20bdt.20test.20error.20for.20Auth-01.2E0.2E0.20and.20Auth-01.2E0.2E1.html#267640493">(Jan 11 2022 at 20:29)</a>:</h4>
<p>I think we had discussed this one at the last connectathon, but unfortunately I didn't open any thread / issue to track it.<br>
Our server implementation is failing the following two tests from the inferno (community edition) Bulk Data Test:</p>
<ul>
<li>Auth-01.0.0: Kick-off request at the system-level export endpoint requires authorization header</li>
<li>Auth-01.0.1: Kick-off request at the system-level export endpoint rejects invalid token</li>
</ul>
<p>In both cases, our auth layer is intercepting the call and rejecting the invalid request with a response code of 401 and no body.<br>
I believe that behavior should be valid (and I think folks agreed in september), but I'm hoping to follow up on that and make a specific change request this time around (so that I don't forget and then re-discover it next connectathon).</p>



<a name="267641027"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Inferno%20/%20bdt%20test%20error%20for%20Auth-01.0.0%20and%20Auth-01.0.1/near/267641027" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Inferno.20.2F.20bdt.20test.20error.20for.20Auth-01.2E0.2E0.20and.20Auth-01.2E0.2E1.html#267641027">(Jan 11 2022 at 20:33)</a>:</h4>
<p>For Auth-01.0.0, we are failing with this messages:</p>
<div class="codehilite"><pre><span></span><code>Error: In case of error, the response body must be an OperationOutcome Expected the request to return an OperationOutcome but the response has no body.

The server does not respond with JSON regardless of the accept header! Error: the server must reply with JSON content-type header (application/json, application/json+fhir or application/fhir+json).
</code></pre></div>
<p>But I don't think the Content-Type header matters much when we return an empty response.</p>



<a name="267641063"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Inferno%20/%20bdt%20test%20error%20for%20Auth-01.0.0%20and%20Auth-01.0.1/near/267641063" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Inferno.20.2F.20bdt.20test.20error.20for.20Auth-01.2E0.2E0.20and.20Auth-01.2E0.2E1.html#267641063">(Jan 11 2022 at 20:33)</a>:</h4>
<p>For Auth-01.0.1, we are failing with this message:</p>
<div class="codehilite"><pre><span></span><code>Error: In case of error, the response body must be an OperationOutcome Expected the request to return an OperationOutcome but the response has no body.

 The server does not respond with JSON regardless of the accept header!
</code></pre></div>



<a name="267641177"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Inferno%20/%20bdt%20test%20error%20for%20Auth-01.0.0%20and%20Auth-01.0.1/near/267641177" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Inferno.20.2F.20bdt.20test.20error.20for.20Auth-01.2E0.2E0.20and.20Auth-01.2E0.2E1.html#267641177">(Jan 11 2022 at 20:34)</a>:</h4>
<p>Do we agree that servers are allowed to return a 401 with an empty body for unauthorized $export requests (instead of always returning an OperationOutcome)?<br>
I think that was asserted in the bulk data v2 timeframe, but not sure if this clarification ever made it into the spec or not...</p>



<a name="267641645"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Inferno%20/%20bdt%20test%20error%20for%20Auth-01.0.0%20and%20Auth-01.0.1/near/267641645" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Inferno.20.2F.20bdt.20test.20error.20for.20Auth-01.2E0.2E0.20and.20Auth-01.2E0.2E1.html#267641645">(Jan 11 2022 at 20:39)</a>:</h4>
<p>ok, I think I tracked down the specific clarification I was thinking of:  <a href="https://github.com/HL7/bulk-data/pull/94/files">https://github.com/HL7/bulk-data/pull/94/files</a><br>
so I think we just need advice on where to open this issue / how to help progress it along</p>



<a name="267652389"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Inferno%20/%20bdt%20test%20error%20for%20Auth-01.0.0%20and%20Auth-01.0.1/near/267652389" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan Gottlieb <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Inferno.20.2F.20bdt.20test.20error.20for.20Auth-01.2E0.2E0.20and.20Auth-01.2E0.2E1.html#267652389">(Jan 11 2022 at 22:04)</a>:</h4>
<p>Yup, agree that this behavior is in line with the v2 requirements. Can you open an issue at <a href="https://github.com/smart-on-fhir/bdt">https://github.com/smart-on-fhir/bdt</a> ?</p>



<a name="267666129"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Inferno%20/%20bdt%20test%20error%20for%20Auth-01.0.0%20and%20Auth-01.0.1/near/267666129" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Inferno.20.2F.20bdt.20test.20error.20for.20Auth-01.2E0.2E0.20and.20Auth-01.2E0.2E1.html#267666129">(Jan 12 2022 at 00:15)</a>:</h4>
<p>actually, it looks like vlad already fixed this one in bdt:  <a href="https://github.com/smart-on-fhir/bdt/issues/7">https://github.com/smart-on-fhir/bdt/issues/7</a><br>
so i guess we just need inferno to pick up an updated version.</p>



<a name="267671256"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Inferno%20/%20bdt%20test%20error%20for%20Auth-01.0.0%20and%20Auth-01.0.1/near/267671256" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Inferno.20.2F.20bdt.20test.20error.20for.20Auth-01.2E0.2E0.20and.20Auth-01.2E0.2E1.html#267671256">(Jan 12 2022 at 01:19)</a>:</h4>
<p>I opened <a href="https://github.com/onc-healthit/inferno/issues/592">https://github.com/onc-healthit/inferno/issues/592</a> for it</p>



<a name="267673287"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/Inferno%20/%20bdt%20test%20error%20for%20Auth-01.0.0%20and%20Auth-01.0.1/near/267673287" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/Inferno.20.2F.20bdt.20test.20error.20for.20Auth-01.2E0.2E0.20and.20Auth-01.2E0.2E1.html#267673287">(Jan 12 2022 at 01:50)</a>:</h4>
<p>I admit that our Inferno community edition is kinda fall behind because we are so focused to get program edition done.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
