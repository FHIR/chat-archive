---
layout: page
title: "FHIR Chat  · $export operation and deletions · bulk data"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/index.html">bulk data</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/.24export.20operation.20and.20deletions.html">$export operation and deletions</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="158579439"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/%24export%20operation%20and%20deletions/near/158579439" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/.24export.20operation.20and.20deletions.html#158579439">(Feb 15 2019 at 00:47)</a>:</h4>
<p>When using the resource type based $export operations since a timestamp, could deletions be included in a bundle file in the output called <br>
[resource type]_deletions.json for each resource type?</p>



<a name="158581765"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/%24export%20operation%20and%20deletions/near/158581765" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/.24export.20operation.20and.20deletions.html#158581765">(Feb 15 2019 at 01:35)</a>:</h4>
<p>Well, the filenames themselves don't have meaning, but we could specify another top-level array alongside outputs if we wanted to convey this. Wouldn't you also want a serious intermediate states too, for resources that had been altered _since your last request?</p>



<a name="158582138"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/%24export%20operation%20and%20deletions/near/158582138" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/.24export.20operation.20and.20deletions.html#158582138">(Feb 15 2019 at 01:46)</a>:</h4>
<p>It's a question of is this the history, or the latest (where deleted is the latest) I'm content with this just being the most recent version (assuming it was deleted and not re-created)</p>



<a name="158582398"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/%24export%20operation%20and%20deletions/near/158582398" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/.24export.20operation.20and.20deletions.html#158582398">(Feb 15 2019 at 01:52)</a>:</h4>
<p>I do like the idea of this being another array in the output though - especially since the content is probably json, not ndjson as it is a bundle, and not a list of resources. And they wouldn't have any links inside?</p>



<a name="158619480"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/%24export%20operation%20and%20deletions/near/158619480" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/.24export.20operation.20and.20deletions.html#158619480">(Feb 15 2019 at 14:53)</a>:</h4>
<p>I think most "deleted" is not a physical delete but a status update from active to "non-active". $export "deleted" actually mean $export latest _history item. Is my understanding correct?</p>



<a name="158621695"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/%24export%20operation%20and%20deletions/near/158621695" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/.24export.20operation.20and.20deletions.html#158621695">(Feb 15 2019 at 15:21)</a>:</h4>
<p>The language there about "status" is confusing me; I agree it's about conveying the same kind of information you'd have in a _historu bundle.</p>



<a name="158621719"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/%24export%20operation%20and%20deletions/near/158621719" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/.24export.20operation.20and.20deletions.html#158621719">(Feb 15 2019 at 15:22)</a>:</h4>
<p>There is also the <span class="user-mention" data-user-id="191318">@nicola (RIO/SS)</span> use case about being able to convey which sets of changes occurred as part of the same transaction.</p>



<a name="158654284"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/%24export%20operation%20and%20deletions/near/158654284" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/.24export.20operation.20and.20deletions.html#158654284">(Feb 15 2019 at 22:12)</a>:</h4>
<p>This doesn't handle the issue <span class="user-mention" data-user-id="191318">@nicola (RIO/SS)</span> describes.</p>



<a name="158656888"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/%24export%20operation%20and%20deletions/near/158656888" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/.24export.20operation.20and.20deletions.html#158656888">(Feb 15 2019 at 22:50)</a>:</h4>
<p><span class="user-mention" data-user-id="191506">@Yunwei Wang</span> is correct, this usually isn't an issue with directory content, as they should be marking as inactive, or end-dating entries. But deletions do happen, and can be used to clear out over stale content occasionally.</p>



<a name="158656940"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/%24export%20operation%20and%20deletions/near/158656940" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/.24export.20operation.20and.20deletions.html#158656940">(Feb 15 2019 at 22:51)</a>:</h4>
<p>I've updated the proposal making the deletions property the same as the others, and made the note that total is the number of deletion bundles, not the number of resources deleted (which would be the sum of the bundle totals).<br>
Unless we decided to make each bundle contain only 1 deletion - which I guess we could do, would just make the file larger.</p>



<a name="158664489"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/%24export%20operation%20and%20deletions/near/158664489" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/.24export.20operation.20and.20deletions.html#158664489">(Feb 16 2019 at 00:56)</a>:</h4>
<p>Interesting, so you'd have multiple bundles each of which could capture an arbitrary number of deletes?</p>



<a name="158664508"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/%24export%20operation%20and%20deletions/near/158664508" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/.24export.20operation.20and.20deletions.html#158664508">(Feb 16 2019 at 00:56)</a>:</h4>
<p>(for consistency, should say <code>deletion</code> rather than <code>deletions</code> as the field name)</p>



<a name="158664660"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/%24export%20operation%20and%20deletions/near/158664660" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/.24export.20operation.20and.20deletions.html#158664660">(Feb 16 2019 at 00:59)</a>:</h4>
<p>Also given the bundle approach, this could communicate more than just deletions; might even generalize the name to something like <code>history</code>.</p>



<a name="158673351"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/%24export%20operation%20and%20deletions/near/158673351" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/.24export.20operation.20and.20deletions.html#158673351">(Feb 16 2019 at 03:31)</a>:</h4>
<p>I thought the reason we did ndjson and only single type per file to make parsing easier for some reason.<br>
And history could still be done with the structure we have now.</p>



<a name="158743914"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/%24export%20operation%20and%20deletions/near/158743914" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/.24export.20operation.20and.20deletions.html#158743914">(Feb 17 2019 at 13:36)</a>:</h4>
<p>I really don't think we want to conflate history and $export. I don't understand where this list of deletions is supposed to go?</p>



<a name="158743975"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/%24export%20operation%20and%20deletions/near/158743975" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/.24export.20operation.20and.20deletions.html#158743975">(Feb 17 2019 at 13:38)</a>:</h4>
<p>oh ok found the other thread. I don't think it should be in the status json.  it should be in some downloadable file. though no obvious format definition jumps out</p>



<a name="158762763"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/%24export%20operation%20and%20deletions/near/158762763" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/.24export.20operation.20and.20deletions.html#158762763">(Feb 17 2019 at 22:57)</a>:</h4>
<p>The file(s) that have the deletions in it are referenced in the status json, so that you can download those. And suggested  bundle format as the way to define which ones were deleted (as per history bundles).<br>
And if you want to ignore the deletions, don't download them (as they are referenced separately to the resource files), and is only relevant if using the _since parameter.</p>



<a name="159070854"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/%24export%20operation%20and%20deletions/near/159070854" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/.24export.20operation.20and.20deletions.html#159070854">(Feb 21 2019 at 14:21)</a>:</h4>
<p>an alternative is to use Provenance of Removal -- <a href="http://build.fhir.org/provenance.html#removal" target="_blank" title="http://build.fhir.org/provenance.html#removal">http://build.fhir.org/provenance.html#removal</a></p>



<a name="159071237"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/%24export%20operation%20and%20deletions/near/159071237" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/.24export.20operation.20and.20deletions.html#159071237">(Feb 21 2019 at 14:26)</a>:</h4>
<p>That's interesting and pretty clean</p>



<a name="159102374"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/%24export%20operation%20and%20deletions/near/159102374" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/.24export.20operation.20and.20deletions.html#159102374">(Feb 21 2019 at 20:38)</a>:</h4>
<p>That's not bad, I'll take a look at what that would be like.</p>



<a name="167870263"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/%24export%20operation%20and%20deletions/near/167870263" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/.24export.20operation.20and.20deletions.html#167870263">(Jun 11 2019 at 17:15)</a>:</h4>
<p>Resurrecting this - is there a consensus on what's the best way to export what has been deleted?</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
