---
layout: page
title: "FHIR Chat  · _since parameter · bulk data"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/index.html">bulk data</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/_since.20parameter.html">_since parameter</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="189553954"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/_since%20parameter/near/189553954" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matt Snook <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/_since.20parameter.html#189553954">(Mar 03 2020 at 01:01)</a>:</h4>
<p>We are in the process of adding <code>_since</code> support to our bulk data export.  The downstream data server that our Bulk FHIR API pulls from has years of historical data, but has only recently started adding <code>lastUpdated</code> to its data loads (for the purposes of discussion, lets say this date is 1/1/20).  Therefore, usage of <code>_since</code> when interacting with our Bulk FHIR API is really only effective as of the first date that the downstream server has begun adding <code>lastUpdated</code> to its data.  </p>
<p>I'm looking for suggestions from this group on a standard way to handle this situation in a user-friendly manner.  <br>
Some options we've been kicking around:<br>
(1) Add some logic to our API implementation which returns a <code>4xx</code> error code (possibly <code>422</code>) if a date prior to 1/1/20 is passed to the <code>_since</code> parameter by a user of our API.  An <code>OperationOutcome</code> specifying the reason for error would also be returned.  The idea here, is that if a user inputs a date prior to 1/1/20 (lets say they input 1/1/19), they might be expecting data that goes back to 1/1/19 but we'd only send them data from 1/1/20 to now.  We would also update our Capability Statement indicating the limitation on the dates supported by <code>_since</code>.<br>
(2) Add no internal logic to prevent a date prior to 1/1/20.  A user submitting a date prior to 1/1/20 (i.e., 1/1/19) would expect data from 1/1/19 but only receive it from 1/1/20.  Of course, interacting with the API and omitting <code>_since</code> would give the user the ability to receive all historical data (no date bounds).</p>
<p>Feedback appreciated.  Thanks!</p>



<a name="189554972"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/_since%20parameter/near/189554972" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/_since.20parameter.html#189554972">(Mar 03 2020 at 01:21)</a>:</h4>
<p>as far as API compatibility goes, I don't see any reason not to just provide what would be the default logic on your server based on the fact that all last updated dates for older resources are (for the sake of your example) 1/1/2020. The FHIR lastUpdated value is specifically tied to the times at which FHIR resources were last changed -- and for your historical data, they will all be 1/1/2020.</p>



<a name="189554977"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/_since%20parameter/near/189554977" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/_since.20parameter.html#189554977">(Mar 03 2020 at 01:21)</a>:</h4>
<p>I think this corresponds to what you have described as option number two above. That has my vote :-)</p>



<a name="189555032"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/_since%20parameter/near/189555032" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/_since.20parameter.html#189555032">(Mar 03 2020 at 01:22)</a>:</h4>
<p>It is perfectly consistent for a client to ask what is new since 2018, and to get a whole pile of data that might actually be related to care provided in 2017, if the FHIR resources were last updated in 2020.</p>



<a name="189555050"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/_since%20parameter/near/189555050" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/_since.20parameter.html#189555050">(Mar 03 2020 at 01:23)</a>:</h4>
<p>Keep in mind that the primary goal of the  _since parameter (design-wise) is to allow for incremental updates after a client has performed an initial fetch. So in the case of your server, this will work perfectly. No special behavior required.</p>



<a name="189607605"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/_since%20parameter/near/189607605" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matt Snook <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/_since.20parameter.html#189607605">(Mar 03 2020 at 16:12)</a>:</h4>
<p><span class="user-mention" data-user-id="191315">@Josh Mandel</span> Thanks for the feedback.<br>
I think this assumption that you made might be incorrect: <code>The FHIR lastUpdated value is specifically tied to the times at which FHIR resources were last changed -- and for your historical data, they will all be 1/1/2020.</code><br>
One clarifying point I'd like to bring up, is that in our case, the downstream server's historical data does NOT have a <code>lastUpdated</code> marker.  Only newly loaded data is marked with <code>lastUpdated</code>. <br>
So if the downstream server's data has data that goes all the way back to 2010, none of that data will be marked as <code>lastUpdated</code>.  Therefore, none of that data will be included in a request made by a user specifying <code>_since</code>.  This is the primary reason why we are considering sending a <code>4xx</code> if a date prior to 1/1/20 is specified in <code>_since</code>.  <br>
Does this change your vote or line of thinking?  Thanks again!</p>



<a name="189608086"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/_since%20parameter/near/189608086" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/_since.20parameter.html#189608086">(Mar 03 2020 at 16:17)</a>:</h4>
<blockquote>
<p>So if the downstream server's data has data that goes all the way back to 2010, none of that data will be marked as lastUpdated.</p>
</blockquote>
<p>I think what should happen here is that you should populate your <code>.meta.lastUpdated</code> data <em>always</em>. So any data older than your "date of origin" should be marked as <code>lastUpdated</code> at your date of origin, and the FHIR resources should reflect this. In other words, use the actual date at which the FHIR resources are first generated (from your source data warehouse)  as their <code>lastUpdated</code>.</p>



<a name="189615673"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/_since%20parameter/near/189615673" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rick Hawes <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/_since.20parameter.html#189615673">(Mar 03 2020 at 17:37)</a>:</h4>
<p><span class="user-mention" data-user-id="191315">@Josh Mandel</span> so a wrong <code>lastUpdated</code> value is better than a missing value? Just to be clear on what you are suggesting.</p>



<a name="189618489"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/_since%20parameter/near/189618489" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/_since.20parameter.html#189618489">(Mar 03 2020 at 18:11)</a>:</h4>
<p>Let's see -- I'm not trying to describe a <em>wrong</em> value :-)</p>



<a name="189618503"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/_since%20parameter/near/189618503" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/_since.20parameter.html#189618503">(Mar 03 2020 at 18:11)</a>:</h4>
<p>I'm trying to describe the true semantics of what's happening here.</p>



<a name="189618601"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/_since%20parameter/near/189618601" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/_since.20parameter.html#189618601">(Mar 03 2020 at 18:12)</a>:</h4>
<p>Which, if I understood correctly is: </p>
<ol>
<li>There's a data warehouse of "old stuff"</li>
<li>At some point in time <code>t</code>, all the old stuff is converted to FHIR</li>
<li>Beyond point <code>t</code>, new resources sometimes land in the data warehouse</li>
<li>At intervals, these new resources are also converted to FHIR</li>
</ol>



<a name="189618660"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/_since%20parameter/near/189618660" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/_since.20parameter.html#189618660">(Mar 03 2020 at 18:13)</a>:</h4>
<p>If that's the scenario, then marking all the "old stuff" as <code>lastUpdated: t</code> seems semantically correct. (And marking the new resources are <code>lastUpdated: t+n*interval</code>, based on the actual time at which they're converted to FHIR.)</p>



<a name="189618788"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/_since%20parameter/near/189618788" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/_since.20parameter.html#189618788">(Mar 03 2020 at 18:14)</a>:</h4>
<p>The FHIR representation of the "old stuff"  was last (and, incidentally also <em>first</em>) updated at <code>t</code>.</p>



<a name="189630677"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/_since%20parameter/near/189630677" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rick Hawes <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/_since.20parameter.html#189630677">(Mar 03 2020 at 20:24)</a>:</h4>
<p>Good idea to state a clarifying timeline. Here's the timeline</p>
<ol>
<li>There is a data warehouse of old stuff</li>
<li>A couple of years ago <code>t1</code>, the warehouse converted to FHIR. All resources do not have the <code>lastUpdated</code> field. </li>
<li>New data arrives at the warehouse on a weekly basis. The timestamp for these inserts is not recorded. </li>
<li>About a month ago <code>t2</code>, the warehouse started to record the <code>lastUpdated</code> field for new resources as they land into the warehouse. </li>
</ol>
<p>Currently, when resources are retrieved from the warehouse, there is a mix of resources with <code>lastUpdated</code> set and those with <code>lastUpdated</code> empty. </p>
<p>If I understand your suggestion, we should set <code>t2</code> for the <code>lastUpdated</code> timestamp for resources that currently do not have <code>lastUpdated</code>.</p>



<a name="189655399"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/_since%20parameter/near/189655399" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/_since.20parameter.html#189655399">(Mar 04 2020 at 02:34)</a>:</h4>
<p>Exactly (or set it to <code>t1</code> -- either way seems semantically reasonable and provides similar behavior).</p>



<a name="189713589"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/_since%20parameter/near/189713589" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rick Hawes <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/_since.20parameter.html#189713589">(Mar 04 2020 at 17:21)</a>:</h4>
<p><span class="user-mention" data-user-id="191315">@Josh Mandel</span> Thanks. We are going to take your suggestion.</p>



<a name="189714427"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/_since%20parameter/near/189714427" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matt Snook <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/_since.20parameter.html#189714427">(Mar 04 2020 at 17:29)</a>:</h4>
<p>Thanks for the great feedback <span class="user-mention" data-user-id="191315">@Josh Mandel</span></p>



<a name="189719951"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179250-bulk%20data/topic/_since%20parameter/near/189719951" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gino Canessa <a href="https://fhir.github.io/chat-archive/stream/179250-bulk-data/topic/_since.20parameter.html#189719951">(Mar 04 2020 at 18:24)</a>:</h4>
<p>Pretty late jumping in, but please document whatever decision is taken in a durable manner, so that people analyzing the data in the future understand what was done (e.g., data from this date to this date is all tagged as t.x).</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
