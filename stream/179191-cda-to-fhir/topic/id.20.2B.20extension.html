---
layout: page
title: "FHIR Chat  · id + extension · cda to fhir"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179191-cda-to-fhir/index.html">cda to fhir</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179191-cda-to-fhir/topic/id.20.2B.20extension.html">id + extension</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153832999"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179191-cda%20to%20fhir/topic/id%20%2B%20extension/near/153832999" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179191-cda-to-fhir/topic/id.20.2B.20extension.html#153832999">(Jun 15 2016 at 12:46)</a>:</h4>
<p>How is an id + extension, commonly seen in CDA documents, handled in FHIR Identifier?</p>



<a name="153833007"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179191-cda%20to%20fhir/topic/id%20%2B%20extension/near/153833007" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179191-cda-to-fhir/topic/id.20.2B.20extension.html#153833007">(Jun 15 2016 at 13:56)</a>:</h4>
<p>Do you mean root + extension?</p>



<a name="153833017"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179191-cda%20to%20fhir/topic/id%20%2B%20extension/near/153833017" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179191-cda-to-fhir/topic/id.20.2B.20extension.html#153833017">(Jun 15 2016 at 14:36)</a>:</h4>
<p>yes</p>



<a name="153833019"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179191-cda%20to%20fhir/topic/id%20%2B%20extension/near/153833019" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179191-cda-to-fhir/topic/id.20.2B.20extension.html#153833019">(Jun 15 2016 at 14:38)</a>:</h4>
<p>root goes into system, extension goes into value.  Root must be transformed into a uri.  This can be done using "urn:oid:[old root]", though we encourage implementers to consider mapping from OIDs to human-readable URIs for the benefit of long-term maintainability/ease of use</p>



<a name="153833021"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179191-cda%20to%20fhir/topic/id%20%2B%20extension/near/153833021" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179191-cda-to-fhir/topic/id.20.2B.20extension.html#153833021">(Jun 15 2016 at 14:40)</a>:</h4>
<p>sounds reasonable. Did I miss this explanation in the spec?</p>



<a name="153833033"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179191-cda%20to%20fhir/topic/id%20%2B%20extension/near/153833033" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179191-cda-to-fhir/topic/id.20.2B.20extension.html#153833033">(Jun 15 2016 at 17:03)</a>:</h4>
<p>It's in the RIM mappings for the data type.  As a rule, we don't talk about v2 or v3 mapping too much in the text of the spec because they're no more relevant/important than mapping X12 or ebXML or any of the other numerous data exchange standards out there.</p>



<a name="153833036"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179191-cda%20to%20fhir/topic/id%20%2B%20extension/near/153833036" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179191-cda-to-fhir/topic/id.20.2B.20extension.html#153833036">(Jun 15 2016 at 17:19)</a>:</h4>
<p>okay. I will add it to the IHE profiles.</p>



<a name="153839807"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179191-cda%20to%20fhir/topic/id%20%2B%20extension/near/153839807" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179191-cda-to-fhir/topic/id.20.2B.20extension.html#153839807">(Jul 19 2016 at 20:52)</a>:</h4>
<p>So the question we have is related to how does a reader of an Identifier know that one is using this RIM mapping rule, vs a normal use of Identifier? The only way one can determine this is to know by context where the Identifier sits within that it is likely to be a RIM mapping and not a normal Identifier?</p>



<a name="153839809"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179191-cda%20to%20fhir/topic/id%20%2B%20extension/near/153839809" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179191-cda-to-fhir/topic/id.20.2B.20extension.html#153839809">(Jul 19 2016 at 20:53)</a>:</h4>
<p>which conflicts with the recommendation found in the Identifier section that says if the identifier value is globally unique that it should be put into the value with the system defined as the RFC3986</p>



<a name="153839811"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179191-cda%20to%20fhir/topic/id%20%2B%20extension/near/153839811" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179191-cda-to-fhir/topic/id.20.2B.20extension.html#153839811">(Jul 19 2016 at 21:00)</a>:</h4>
<p>that's a really confusing question for me.</p>



<a name="153839812"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179191-cda%20to%20fhir/topic/id%20%2B%20extension/near/153839812" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179191-cda-to-fhir/topic/id.20.2B.20extension.html#153839812">(Jul 19 2016 at 21:00)</a>:</h4>
<p>you don't 'use the mapping rule' - it just exists</p>



<a name="153839826"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179191-cda%20to%20fhir/topic/id%20%2B%20extension/near/153839826" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179191-cda-to-fhir/topic/id.20.2B.20extension.html#153839826">(Jul 19 2016 at 22:04)</a>:</h4>
<p>The problem is that the FHIR spec has two conflicting instructions for how to handle globally unique identifiers. One says to use rfc3986, one for RIM identifiers. This might be clear for how to take a value and put it into FHIR Identifier. My question is if I am looking at a FHIR Identifier, how to I know that the Identifier I am looking at is one that was put in there using the RIM mapping, or is really an assigning authority assigned value.</p>



<a name="153839828"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179191-cda%20to%20fhir/topic/id%20%2B%20extension/near/153839828" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179191-cda-to-fhir/topic/id.20.2B.20extension.html#153839828">(Jul 19 2016 at 22:04)</a>:</h4>
<p>mostly because as a receiver of this information I need to know so that I can query my possible non-FHIR information sources.</p>



<a name="153839829"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179191-cda%20to%20fhir/topic/id%20%2B%20extension/near/153839829" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179191-cda-to-fhir/topic/id.20.2B.20extension.html#153839829">(Jul 19 2016 at 22:05)</a>:</h4>
<p>I don't understand what the conflicting instructions are </p>



<a name="153839830"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179191-cda%20to%20fhir/topic/id%20%2B%20extension/near/153839830" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179191-cda-to-fhir/topic/id.20.2B.20extension.html#153839830">(Jul 19 2016 at 22:07)</a>:</h4>
<p>In the datatypes page for Identifier is this sentence "If the identifier itself is naturally globally unique (e.g. an OID, a UUID, or a URI with no trailing local part), then the system SHALL be "urn:ietf:rfc:3986", and the URI is in the value."</p>



<a name="153839831"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179191-cda%20to%20fhir/topic/id%20%2B%20extension/near/153839831" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179191-cda-to-fhir/topic/id.20.2B.20extension.html#153839831">(Jul 19 2016 at 22:07)</a>:</h4>
<p>yes</p>



<a name="153839832"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179191-cda%20to%20fhir/topic/id%20%2B%20extension/near/153839832" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179191-cda-to-fhir/topic/id.20.2B.20extension.html#153839832">(Jul 19 2016 at 22:07)</a>:</h4>
<p>YET, in the same page, the 'mapping' for Identifier <a href="https://www.hl7.org/fhir/datatypes-mappings.html#Identifier" target="_blank" title="https://www.hl7.org/fhir/datatypes-mappings.html#Identifier">https://www.hl7.org/fhir/datatypes-mappings.html#Identifier</a></p>



<a name="153839833"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179191-cda%20to%20fhir/topic/id%20%2B%20extension/near/153839833" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179191-cda-to-fhir/topic/id.20.2B.20extension.html#153839833">(Jul 19 2016 at 22:07)</a>:</h4>
<p>says that with RIM mapping</p>



<a name="153839834"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179191-cda%20to%20fhir/topic/id%20%2B%20extension/near/153839834" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179191-cda-to-fhir/topic/id.20.2B.20extension.html#153839834">(Jul 19 2016 at 22:07)</a>:</h4>
<p>it is different</p>



<a name="153839835"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179191-cda%20to%20fhir/topic/id%20%2B%20extension/near/153839835" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179191-cda-to-fhir/topic/id.20.2B.20extension.html#153839835">(Jul 19 2016 at 22:08)</a>:</h4>
<p>system   II.root or Role.id.root<br>
    value   II.extension or II.root if system indicates OID or GUID (Or Role.id.extension or root)</p>



<a name="153839836"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179191-cda%20to%20fhir/topic/id%20%2B%20extension/near/153839836" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179191-cda-to-fhir/topic/id.20.2B.20extension.html#153839836">(Jul 19 2016 at 22:09)</a>:</h4>
<p>that is not in conflict, but it is worded badly now. 'indicates OID or GUID actually means, urn:ietf:rfc:3986"</p>



<a name="153839840"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179191-cda%20to%20fhir/topic/id%20%2B%20extension/near/153839840" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179191-cda-to-fhir/topic/id.20.2B.20extension.html#153839840">(Jul 19 2016 at 22:18)</a>:</h4>
<p>but that clause is useless... as the problem is that I can't tell the meaning of system is... is it a RIM like system, or is it a real identifier assiging authority</p>



<a name="153839841"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179191-cda%20to%20fhir/topic/id%20%2B%20extension/near/153839841" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179191-cda-to-fhir/topic/id.20.2B.20extension.html#153839841">(Jul 19 2016 at 22:22)</a>:</h4>
<p>that difference I don't understand either</p>



<a name="153839847"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179191-cda%20to%20fhir/topic/id%20%2B%20extension/near/153839847" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/179191-cda-to-fhir/topic/id.20.2B.20extension.html#153839847">(Jul 19 2016 at 22:39)</a>:</h4>
<p>Consider if i have a CDA document id which is 1.2.3.4.5. I code it as system=rfc3986, code=1.2.3.4.5. But if I have a CDA document id which is 1.2.3.4.5^678, I have to code it as system=1.2.3.4.5, code=678. That seems weird, in one case 1.2.3.4.5 is the system, but in another place it is the value?</p>



<a name="153839849"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179191-cda%20to%20fhir/topic/id%20%2B%20extension/near/153839849" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert Horn <a href="https://fhir.github.io/chat-archive/stream/179191-cda-to-fhir/topic/id.20.2B.20extension.html#153839849">(Jul 19 2016 at 22:40)</a>:</h4>
<p>My understanding, and it is not fully clear in FHIR, is that the result is that when I take a CDA document ID, I first check for extension.  If no extension, I use system = "rfc3986".  But if there is an extension I use system="OID-root-of-CDA-DocumentID".   This means when I receive an ID, I have to make a context based decision.  If system is an OID, I need to guess based on context whether that OID is the OID for some coding system that I don't know or it's the OID from a CDA Document ID.  I think I can guess based on larger context, but if the ID ever gets separated from context I won't know what to do.</p>



<a name="153839850"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179191-cda%20to%20fhir/topic/id%20%2B%20extension/near/153839850" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert Horn <a href="https://fhir.github.io/chat-archive/stream/179191-cda-to-fhir/topic/id.20.2B.20extension.html#153839850">(Jul 19 2016 at 22:41)</a>:</h4>
<p>This makes the parsing and matching logic very complex.</p>



<a name="153839851"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179191-cda%20to%20fhir/topic/id%20%2B%20extension/near/153839851" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179191-cda-to-fhir/topic/id.20.2B.20extension.html#153839851">(Jul 19 2016 at 22:42)</a>:</h4>
<p>well, yes, the mapping is complex. I think we got it wrong in v3 - everyone gets root/extension wrong, and we just don't have that problem in FHIR - except when we talk about II....</p>



<a name="153839852"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179191-cda%20to%20fhir/topic/id%20%2B%20extension/near/153839852" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179191-cda-to-fhir/topic/id.20.2B.20extension.html#153839852">(Jul 19 2016 at 22:43)</a>:</h4>
<p>I don't understand the context bit though - the decisions are solely made on the II itself. </p>



<a name="153839853"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179191-cda%20to%20fhir/topic/id%20%2B%20extension/near/153839853" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179191-cda-to-fhir/topic/id.20.2B.20extension.html#153839853">(Jul 19 2016 at 22:43)</a>:</h4>
<p>the formal mapping I did migth clarify:</p>



<a name="153839854"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179191-cda%20to%20fhir/topic/id%20%2B%20extension/near/153839854" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179191-cda-to-fhir/topic/id.20.2B.20extension.html#153839854">(Jul 19 2016 at 22:45)</a>:</h4>
<p>(deleted)</p>



<a name="153839856"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179191-cda%20to%20fhir/topic/id%20%2B%20extension/near/153839856" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179191-cda-to-fhir/topic/id.20.2B.20extension.html#153839856">(Jul 19 2016 at 22:45)</a>:</h4>
<div class="codehilite"><pre>group II2Identifier extends ANY2Element
  input src : II as source;
  input tgt : Identifier as target;

  root1: for src.root as r where extension.exists() make tgt.system = translate(r, &quot;http://hl7.org/fhir/ConceptMap/special-oid2uri&quot;, &quot;uri&quot;)  
  ext1: for src.extension as e make tgt.value = e

  root2: for src.root as r where extension.empty() make tgt.system = &quot;urn:ietf:rfc:3986&quot;, tgt.value = translate(r, &quot;http://hl7.org/fhir/ConceptMap/special-oid2uri&quot;, &quot;uri&quot;)

endgroup
</pre></div>



<a name="153839857"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179191-cda%20to%20fhir/topic/id%20%2B%20extension/near/153839857" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert Horn <a href="https://fhir.github.io/chat-archive/stream/179191-cda-to-fhir/topic/id.20.2B.20extension.html#153839857">(Jul 19 2016 at 22:45)</a>:</h4>
<p>I was kind of hoping we could phase out the extension.  FHIR isn't the only place affected.</p>
<p>The context issue is that II is that the data structure for coded terms and II are very similar.  If the context saying whether it's an II or coded term gets lost, you are in trouble.  There are lots of applications that like to strip out identifiers.</p>



<a name="153839859"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179191-cda%20to%20fhir/topic/id%20%2B%20extension/near/153839859" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179191-cda-to-fhir/topic/id.20.2B.20extension.html#153839859">(Jul 19 2016 at 22:45)</a>:</h4>
<p>if there's an extension, then treat the root as the system (but translate it to a URI), and map the extension to the value</p>
<p>if there's no extension, then make the system = urn:ietf:rfc:3986, and make the value the root converted to a URI</p>



<a name="153839860"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179191-cda%20to%20fhir/topic/id%20%2B%20extension/near/153839860" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179191-cda-to-fhir/topic/id.20.2B.20extension.html#153839860">(Jul 19 2016 at 22:47)</a>:</h4>
<p>The problem is in the other direction</p>



<a name="153839861"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179191-cda%20to%20fhir/topic/id%20%2B%20extension/near/153839861" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179191-cda-to-fhir/topic/id.20.2B.20extension.html#153839861">(Jul 19 2016 at 22:47)</a>:</h4>
<p>if you lose the difference between code and identifier, then you're screwed. yes. But fior us, that's type not context</p>



<a name="153839862"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179191-cda%20to%20fhir/topic/id%20%2B%20extension/near/153839862" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179191-cda-to-fhir/topic/id.20.2B.20extension.html#153839862">(Jul 19 2016 at 22:47)</a>:</h4>
<p>if I have a FHIR Identifier, how do I know how to read it</p>



<a name="153839863"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179191-cda%20to%20fhir/topic/id%20%2B%20extension/near/153839863" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179191-cda-to-fhir/topic/id.20.2B.20extension.html#153839863">(Jul 19 2016 at 22:47)</a>:</h4>
<p>why is it a problem? </p>



<a name="153839864"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179191-cda%20to%20fhir/topic/id%20%2B%20extension/near/153839864" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179191-cda-to-fhir/topic/id.20.2B.20extension.html#153839864">(Jul 19 2016 at 22:48)</a>:</h4>
<p>because FHIR is not a bitbucket</p>



<a name="153839865"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179191-cda%20to%20fhir/topic/id%20%2B%20extension/near/153839865" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/179191-cda-to-fhir/topic/id.20.2B.20extension.html#153839865">(Jul 19 2016 at 22:48)</a>:</h4>
<p>I may need to take that identifier out of a closed FHIR system.</p>



<a name="153839866"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179191-cda%20to%20fhir/topic/id%20%2B%20extension/near/153839866" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179191-cda-to-fhir/topic/id.20.2B.20extension.html#153839866">(Jul 19 2016 at 22:48)</a>:</h4>
<p>or is it?</p>



<a name="153839867"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179191-cda%20to%20fhir/topic/id%20%2B%20extension/near/153839867" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179191-cda-to-fhir/topic/id.20.2B.20extension.html#153839867">(Jul 19 2016 at 22:48)</a>:</h4>
<p>if the root is urn:ietf:rfc:3986, then if you can translate the value to an OID or UUID, put it in the root. else error</p>
<p>if the root is not urn:ietf:rfc:3986, then see if you can translate the system to an OID or UUID, else error, then put the value in extension</p>



<a name="153839868"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179191-cda%20to%20fhir/topic/id%20%2B%20extension/near/153839868" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179191-cda-to-fhir/topic/id.20.2B.20extension.html#153839868">(Jul 19 2016 at 22:49)</a>:</h4>
<p>the princple problem is that the FHIR identiifer can represent things that the II can't</p>



<a name="153839869"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179191-cda%20to%20fhir/topic/id%20%2B%20extension/near/153839869" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179191-cda-to-fhir/topic/id.20.2B.20extension.html#153839869">(Jul 19 2016 at 22:49)</a>:</h4>
<p>right... so the problem comes in when the root is NOT rfc3986</p>



<a name="153839870"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179191-cda%20to%20fhir/topic/id%20%2B%20extension/near/153839870" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179191-cda-to-fhir/topic/id.20.2B.20extension.html#153839870">(Jul 19 2016 at 22:50)</a>:</h4>
<p>I don't think it's a problem, it just might fail. It's not unclear, anyway</p>



<a name="153839871"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179191-cda%20to%20fhir/topic/id%20%2B%20extension/near/153839871" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert Horn <a href="https://fhir.github.io/chat-archive/stream/179191-cda-to-fhir/topic/id.20.2B.20extension.html#153839871">(Jul 19 2016 at 22:50)</a>:</h4>
<p>For example, how would I create a CDA from a FHIR resource, when that FHIR resource was created from a CDA with an extension.  I want to be sure I get the same result.</p>



<a name="153839873"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179191-cda%20to%20fhir/topic/id%20%2B%20extension/near/153839873" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179191-cda-to-fhir/topic/id.20.2B.20extension.html#153839873">(Jul 19 2016 at 22:50)</a>:</h4>
<p>following the method above, you will. It might fail if the source was outside CDA in the first place, but it round trips for II</p>



<a name="153839874"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179191-cda%20to%20fhir/topic/id%20%2B%20extension/near/153839874" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/179191-cda-to-fhir/topic/id.20.2B.20extension.html#153839874">(Jul 19 2016 at 22:51)</a>:</h4>
<p>Or, how would I know that it is a OID+extension identifier and not some other identifier with an OID identifying the system?</p>



<a name="153839875"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179191-cda%20to%20fhir/topic/id%20%2B%20extension/near/153839875" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179191-cda-to-fhir/topic/id.20.2B.20extension.html#153839875">(Jul 19 2016 at 22:53)</a>:</h4>
<p>what's the difference?</p>



<a name="153839877"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179191-cda%20to%20fhir/topic/id%20%2B%20extension/near/153839877" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179191-cda-to-fhir/topic/id.20.2B.20extension.html#153839877">(Jul 19 2016 at 22:56)</a>:</h4>
<p>if you can convert the source system to an OID, then you represent it as a root+extension, otherwise it's an error</p>



<a name="153839878"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179191-cda%20to%20fhir/topic/id%20%2B%20extension/near/153839878" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179191-cda-to-fhir/topic/id.20.2B.20extension.html#153839878">(Jul 19 2016 at 22:56)</a>:</h4>
<p>I don't understand the problem you're seeing there</p>



<a name="153839879"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179191-cda%20to%20fhir/topic/id%20%2B%20extension/near/153839879" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179191-cda-to-fhir/topic/id.20.2B.20extension.html#153839879">(Jul 19 2016 at 22:57)</a>:</h4>
<p>the key is that you need to be able to convert from URI to OID Or UUID. I believe there's 3 states for that:<br>
- the URI starts with urn:oid: or urn:uuid:<br>
- I can look up the URI in some table of URIs, and find the associated OID or UUID (might be a naming system table)<br>
- I don't know an equivalent OID</p>



<a name="153839880"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179191-cda%20to%20fhir/topic/id%20%2B%20extension/near/153839880" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179191-cda-to-fhir/topic/id.20.2B.20extension.html#153839880">(Jul 19 2016 at 22:58)</a>:</h4>
<p>so, yes, you probably need a look up table. But other than that. there's no issue here I can see</p>



<a name="153841635"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179191-cda%20to%20fhir/topic/id%20%2B%20extension/near/153841635" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Keith Boone <a href="https://fhir.github.io/chat-archive/stream/179191-cda-to-fhir/topic/id.20.2B.20extension.html#153841635">(Jul 29 2016 at 09:37)</a>:</h4>
<p>See <a href="http://motorcycleguy.blogspot.com/2016/07/round-tripping-identifiers-from-cda-to.html" target="_blank" title="http://motorcycleguy.blogspot.com/2016/07/round-tripping-identifiers-from-cda-to.html">http://motorcycleguy.blogspot.com/2016/07/round-tripping-identifiers-from-cda-to.html</a> for what I figured out on this a while back</p>



<a name="153841647"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179191-cda%20to%20fhir/topic/id%20%2B%20extension/near/153841647" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179191-cda-to-fhir/topic/id.20.2B.20extension.html#153841647">(Jul 29 2016 at 13:45)</a>:</h4>
<p>There must be a better way. This is an hl7 created problem.  How real are the problem cases?</p>



<a name="153841653"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179191-cda%20to%20fhir/topic/id%20%2B%20extension/near/153841653" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179191-cda-to-fhir/topic/id.20.2B.20extension.html#153841653">(Jul 29 2016 at 14:27)</a>:</h4>
<p>I don't know what problem you still see here?</p>



<a name="153842062"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179191-cda%20to%20fhir/topic/id%20%2B%20extension/near/153842062" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179191-cda-to-fhir/topic/id.20.2B.20extension.html#153842062">(Aug 02 2016 at 12:43)</a>:</h4>
<p>There are cases where I have a FHIR Identifier, properly filled out; but I can't tell how to put that into a CDA or HL7 v2 or HL7 v3 form deterministically. The proposal that I have a registry of roots is not scaleable. -- I am not saying that all cases are problematic; but there are some that are.</p>



<a name="153842080"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179191-cda%20to%20fhir/topic/id%20%2B%20extension/near/153842080" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179191-cda-to-fhir/topic/id.20.2B.20extension.html#153842080">(Aug 02 2016 at 21:03)</a>:</h4>
<p>so my view is that an identifier oriinally populated from an II can be determistically converted back to an II. One that is outside the space of II, not so easily. That fact was written into the Identifier data type when we changed the semantic scope of it on day 1</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
