---
layout: page
title: "FHIR Chat  · AllergyIntolerance · cda to fhir"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179191-cda-to-fhir/index.html">cda to fhir</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179191-cda-to-fhir/topic/AllergyIntolerance.html">AllergyIntolerance</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153964351"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179191-cda%20to%20fhir/topic/AllergyIntolerance/near/153964351" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ilayaraja Mahalingam <a href="https://fhir.github.io/chat-archive/stream/179191-cda-to-fhir/topic/AllergyIntolerance.html#153964351">(May 23 2018 at 16:31)</a>:</h4>
<p>Hi,</p>
<p>I am trying to assign Patient resource as inline reference to AllergyIntolerance.recorder but it is always coming as "Contained" resource.<br>
Below is the sample code I am using,</p>
<div class="codehilite"><pre><span></span>org.hl7.fhir.dstu3.model.AllergyIntolerance allergyIntolerance = new org.hl7.fhir.dstu3.model.AllergyIntolerance();
org.hl7.fhir.dstu3.model.Patient patient = new org.hl7.fhir.dstu3.model.Patient();
org.hl7.fhir.dstu3.model.Identifier identifier = new org.hl7.fhir.dstu3.model.Identifier();
org.hl7.fhir.dstu3.model.Reference reference = new org.hl7.fhir.dstu3.model.Reference();

identifier.setSystem(&quot;system&quot;);
identifier.setValue(&quot;value&quot;);
patient.addIdentifier(identifier);
reference.setResource(patient);
allergyIntolerance.setRecorder(reference);
System.out.println(&quot;op:&quot; + ca.uhn.fhir.context.FhirContext.forDstu3().newXmlParser().encodeResourceToString(allergyIntolerance));
</pre></div>


<p>_op:&lt;AllergyIntolerance xmlns="http://hl7.org/fhir"&gt;&lt;contained&gt;&lt;Patient xmlns="http://hl7.org/fhir"&gt;&lt;id value="1"/&gt;&lt;identifier&gt;&lt;system value="system"/&gt;&lt;value value="value"/&gt;&lt;/identifier&gt;&lt;/Patient&gt;&lt;/contained&gt;&lt;recorder&gt;&lt;reference value="#1"/&gt;&lt;/recorder&gt;&lt;/AllergyIntolerance&gt;_</p>
<p>Like said above, Patient resource is coming as contained resource in the above response, but my expected response is like below,<br>
_&lt;AllergyIntolerance xmlns="http://hl7.org/fhir"&gt;&lt;recorder&gt;&lt;Patient&gt;&lt;identifier&gt;&lt;system value="system"/&gt;&lt;value value="value"/&gt;&lt;/identifier&gt;&lt;/Patient&gt;&lt;/recorder&gt;&lt;/AllergyIntolerance&gt;_</p>
<p>Below are my maven dependencies for HAPI library,<br>
**&lt;dependency&gt;<br>
    &lt;groupId&gt;ca.uhn.hapi.fhir&lt;/groupId&gt;<br>
    &lt;artifactId&gt;hapi-fhir-base&lt;/artifactId&gt;<br>
    &lt;version&gt;1.5&lt;/version&gt;<br>
&lt;/dependency&gt;<br>
&lt;dependency&gt;<br>
    &lt;groupId&gt;ca.uhn.hapi.fhir&lt;/groupId&gt;<br>
    &lt;artifactId&gt;hapi-fhir-structures-dstu3&lt;/artifactId&gt;<br>
    &lt;version&gt;1.5&lt;/version&gt;<br>
&lt;/dependency&gt;**</p>
<p>Somebody can help me here?</p>



<a name="153964356"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179191-cda%20to%20fhir/topic/AllergyIntolerance/near/153964356" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/179191-cda-to-fhir/topic/AllergyIntolerance.html#153964356">(May 23 2018 at 16:48)</a>:</h4>
<p>Your response with the contained resource is correct.  FHIR will never inline one resource inside of another.  (And this shouldn't be in the <a class="stream" data-stream-id="21" href="/#narrow/stream/21-cda-to-fhir">#cda to fhir</a> topic as it is not CDA-specific.)</p>



<a name="153964821"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179191-cda%20to%20fhir/topic/AllergyIntolerance/near/153964821" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ilayaraja Mahalingam <a href="https://fhir.github.io/chat-archive/stream/179191-cda-to-fhir/topic/AllergyIntolerance.html#153964821">(May 25 2018 at 09:32)</a>:</h4>
<p>Thanks Jean for your prompt response.</p>



<a name="153965073"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179191-cda%20to%20fhir/topic/AllergyIntolerance/near/153965073" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ilayaraja Mahalingam <a href="https://fhir.github.io/chat-archive/stream/179191-cda-to-fhir/topic/AllergyIntolerance.html#153965073">(May 28 2018 at 02:19)</a>:</h4>
<p>Thanks Jean for your prompt response.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
