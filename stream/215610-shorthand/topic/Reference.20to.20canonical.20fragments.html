---
layout: page
title: "FHIR Chat  · Reference to canonical fragments · shorthand"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/index.html">shorthand</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Reference.20to.20canonical.20fragments.html">Reference to canonical fragments</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="207228911"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Reference%20to%20canonical%20fragments/near/207228911" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Reference.20to.20canonical.20fragments.html#207228911">(Aug 18 2020 at 07:01)</a>:</h4>
<p>I am working on an IG, and have defined a logical model (StructureDefinition instance). I have also defined a Questionnaire instance. I'd like  items in the Questionnaire to use the logical model, but can't figure out how to specify the canonical fragment. For example, my logical model has</p>
<div class="codehilite"><pre><span></span><code>Instance: DataDictionary
InstanceOf: StructureDefinition
Description: &quot;Data Dictionary Logical Model&quot;
Title: &quot;Data Dictionary&quot;
Usage: #definition

* insert PublisherContext
* name = &quot;SurveillanceDataDictionary&quot;
* id = &quot;SurveillanceDataDictionary&quot;
* url = &quot;http://example.org/fhir/cr/StructureDefinition/SurveillanceDataDictionary&quot;
...
* differential.element[1].id = &quot;SurveillanceDataDictionary.report.date&quot;
* differential.element[1].path = &quot;SurveillanceDataDictionary.report.date&quot;
* differential.element[1].short = &quot;Date of reporting&quot;
* differential.element[1].definition = &quot;Date of reporting&quot;
* differential.element[1].type.code = #date
* differential.element[1].min = 0
* differential.element[1].max = &quot;1&quot;
</code></pre></div>


<p>If my Questionnaire contains:</p>
<div class="codehilite"><pre><span></span><code>* item[0].linkId    = &quot;report_date&quot;
* item[0].text    = &quot;Date of reporting to health authority:&quot;
* item[0].type    = #date
* item[0].definition    =  ?????
</code></pre></div>


<p>What should I put in where the question marks are? I can hard code  "<a href="http://example.org/fhir/cr/StructureDefinition/SurveillanceDataDictionary#SurveillanceDataDictionary.report.date">http://example.org/fhir/cr/StructureDefinition/SurveillanceDataDictionary#SurveillanceDataDictionary.report.date</a>" and that seems to work. I'd rather use Canonical(), but can't figure out how to structure it.</p>



<a name="207254295"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Reference%20to%20canonical%20fragments/near/207254295" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Freiter <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Reference.20to.20canonical.20fragments.html#207254295">(Aug 18 2020 at 12:46)</a>:</h4>
<p>As of right now, you're best option is to hard code this. SUSHI only supports using the <code>Canonical</code> keyword when the element on the left hand side of the <code>=</code> is of type canonical. I think we should consider if that should be expanded so that <code>Canonical</code> can be used on uri elements like you would want in this case. But in this case I'm still not sure <code>Canonical</code> would work for you even if we could use it on uri elements, because we would need some sort of syntax for selecting a specific ElementDefinition. The <code>Canonical</code> keyword would only be able to get the "<a href="http://example.org/fhir/cr/StructureDefinition/SurveillanceDataDictionary">http://example.org/fhir/cr/StructureDefinition/SurveillanceDataDictionary</a>" part, but there isn't a way to express in FSH that you want to append the "#SurveillanceDataDictionary.report.date" part.</p>



<a name="207254984"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Reference%20to%20canonical%20fragments/near/207254984" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Freiter <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Reference.20to.20canonical.20fragments.html#207254984">(Aug 18 2020 at 12:53)</a>:</h4>
<p>I've made an issue to track this: <a href="https://github.com/FHIR/sushi/issues/572">https://github.com/FHIR/sushi/issues/572</a></p>



<a name="207271874"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Reference%20to%20canonical%20fragments/near/207271874" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Reference.20to.20canonical.20fragments.html#207271874">(Aug 18 2020 at 15:12)</a>:</h4>
<p>Good to know I wasn't missing something. Thank you.</p>
<p>By the way, in the absence of auto-indexing and shorthand for nested elements, doing logical models and questionnaires is a pain in fsh. I'm not sure the logical model was any shorter in fsh than hand writing the JSON.</p>



<a name="207572356"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Reference%20to%20canonical%20fragments/near/207572356" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Reference.20to.20canonical.20fragments.html#207572356">(Aug 20 2020 at 20:44)</a>:</h4>
<p>Thanks for the feedback.  We have some ideas about how to make some of these things more succinct in a future version of FSH (via "soft indexing" and "ruleset macros"), so stay tuned!  We also hope to update the syntax to support logical models using many of the same constructs as available in profiling -- so that should help in that regard.  That said, we're allowing community feedback to help drive the priorities, so I can't promise when that will happen.</p>



<a name="207579356"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Reference%20to%20canonical%20fragments/near/207579356" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Reference.20to.20canonical.20fragments.html#207579356">(Aug 20 2020 at 22:00)</a>:</h4>
<p>As I renumber my 70+ element logical model for the umpteenth time, please consider this as community feedback. :-)</p>



<a name="207581999"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Reference%20to%20canonical%20fragments/near/207581999" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Hay <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Reference.20to.20canonical.20fragments.html#207581999">(Aug 20 2020 at 22:28)</a>:</h4>
<p>BTW - are you aware of the <a href="https://fhirblog.com/2018/04/29/creating-models-with-the-logical-modeler/">clinFHIR logical modeller</a>? It can create models (StructureDefinitions) through a graphical interface. Reach out privately if you want to discuss further...</p>



<a name="207582189"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Reference%20to%20canonical%20fragments/near/207582189" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Reference.20to.20canonical.20fragments.html#207582189">(Aug 20 2020 at 22:31)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191380">Elliot Silver</span> <a href="#narrow/stream/215610-shorthand/topic/Reference.20to.20canonical.20fragments/near/207579356">said</a>:</p>
<blockquote>
<p>As I renumber my 70+ element logical model for the umpteenth time, please consider this as community feedback. :-)</p>
</blockquote>
<p>Ugh.  I feel your pain and I'm sorry.  We wanted to solve the array issue on time for 1.0.0, but we couldn't get community agreement on the approach, so we had to push it back.</p>



<a name="207582258"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Reference%20to%20canonical%20fragments/near/207582258" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Reference.20to.20canonical.20fragments.html#207582258">(Aug 20 2020 at 22:32)</a>:</h4>
<p>Hi David, yes I am aware, and I started with it. However, I was aiming for a FSH-only IG, and didn't appreciate the difference in effort. I think I found some limitations too, but don't recall what those are right now.</p>



<a name="207583918"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Reference%20to%20canonical%20fragments/near/207583918" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Hay <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Reference.20to.20canonical.20fragments.html#207583918">(Aug 20 2020 at 22:54)</a>:</h4>
<p>No worries ...</p>
<p>If you do recall the limitations then it would be good to know them. I am aware that the SD does need tidying before IG publisher will accept them (I have a script for that). Actually, as I write this, I wonder if an 'export to FSH' mightn't be a good idea - or just incorporate the 'tidy script' into the app...  - maybe something for connectathon!</p>



<a name="208152411"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Reference%20to%20canonical%20fragments/near/208152411" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Kramer <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Reference.20to.20canonical.20fragments.html#208152411">(Aug 26 2020 at 21:38)</a>:</h4>
<p><span class="user-mention" data-user-id="191380">@Elliot Silver</span> we are going to take care of you (in a good way) <span aria-label="grinning face with smiling eyes" class="emoji emoji-1f601" role="img" title="grinning face with smiling eyes">:grinning_face_with_smiling_eyes:</span></p>



<a name="208159873"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Reference%20to%20canonical%20fragments/near/208159873" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Reference.20to.20canonical.20fragments.html#208159873">(Aug 26 2020 at 22:58)</a>:</h4>
<p><span class="user-mention" data-user-id="191447">@Mark Kramer</span> thank you.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
