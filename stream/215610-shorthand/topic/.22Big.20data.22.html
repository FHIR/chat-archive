---
layout: page
title: "FHIR Chat  · &quot;Big data&quot; · shorthand"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/index.html">shorthand</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/.22Big.20data.22.html">&quot;Big data&quot;</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="266731252"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/%22Big%20data%22/near/266731252" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/.22Big.20data.22.html#266731252">(Jan 03 2022 at 20:08)</a>:</h4>
<p><span class="user-mention" data-user-id="191469">@Chris Moesel</span> I think I have a feature request for sushi ... - when I ask it to pass large files like eg. <a href="https://github.com/hl7-eu/gravitate-health/blob/master/input/fsh/Suliqua-instances-en/11-documentreference/suliqua-mp4.fsh">https://github.com/hl7-eu/gravitate-health/blob/master/input/fsh/Suliqua-instances-en/11-documentreference/suliqua-mp4.fsh</a> it throws an error like this:</p>
<div class="codehilite"><pre><span></span><code>error Maximum call stack size exceeded
  File: /Users/jvi/gravitate-health/input/fsh/Suliqua-instances-en/11-documentreference/suliqua-mp4.fsh
  Line: 10
</code></pre></div>
<p>-which isn't really an error I think</p>



<a name="266731755"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/%22Big%20data%22/near/266731755" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/.22Big.20data.22.html#266731755">(Jan 03 2022 at 20:13)</a>:</h4>
<p>Oh wow.  Yeah, I see.  You have a huge base64-encoded attachment in there.  Ideally you would use the binary adjunct loading to handle that rather than shoving it in the FSH file.  But I do agree it would be nice if we didn't choke on this FSH (pun totally intended).  <code>Maximum call stack size exceeded</code> usually means that the Node.js interpreter ran into a circular processing chain -- although I don't fully understand why a large file would cause this.  We'll have to do some investigation.  Depending on where the problem lies, we may or may not be able to fix this.  But hopefully we can?</p>



<a name="266783817"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/%22Big%20data%22/near/266783817" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vadim Peretokin <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/.22Big.20data.22.html#266783817">(Jan 04 2022 at 09:01)</a>:</h4>
<blockquote>
<p>Ideally you would use the binary adjunct </p>
</blockquote>
<p>How would that work? I had a glance at the shorthand documentation but didn't find anything relevant</p>



<a name="266783934"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/%22Big%20data%22/near/266783934" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vadim Peretokin <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/.22Big.20data.22.html#266783934">(Jan 04 2022 at 09:02)</a>:</h4>
<p>Answer: <a href="#narrow/stream/215610-shorthand/topic/Binary.20Adjunct/near/240180681">https://chat.fhir.org/#narrow/stream/215610-shorthand/topic/Binary.20Adjunct/near/240180681</a></p>



<a name="266784339"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/%22Big%20data%22/near/266784339" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/.22Big.20data.22.html#266784339">(Jan 04 2022 at 09:07)</a>:</h4>
<p><a href="https://confluence.hl7.org/pages/viewpage.action?pageId=66938614#ImplementationGuideParameters-BinaryAdjunctFiles">https://confluence.hl7.org/pages/viewpage.action?pageId=66938614#ImplementationGuideParameters-BinaryAdjunctFiles</a> doesn't metion my media type (<code>video/mp4</code>). Is that a problem?</p>



<a name="266807544"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/%22Big%20data%22/near/266807544" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/.22Big.20data.22.html#266807544">(Jan 04 2022 at 13:32)</a>:</h4>
<p><span class="user-mention" data-user-id="191427">@Jens Villadsen</span> -- it might be? I guess I don't know.  Truthfully, I don't have much experience w/ binary adjunct files -- I just know that they are a thing.  TBH, I've had some luck with them in testing but also some trouble.  I was actually going to try a little again today because <span class="user-mention" data-user-id="191404">@John Moehrke</span> was running into some trouble with it.</p>



<a name="266808824"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/%22Big%20data%22/near/266808824" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/.22Big.20data.22.html#266808824">(Jan 04 2022 at 13:46)</a>:</h4>
<p>I didn't try media types other than those listed. It would seem that the solution given should not care what the media type is, thus supporting any media type.</p>



<a name="266808920"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/%22Big%20data%22/near/266808920" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/.22Big.20data.22.html#266808920">(Jan 04 2022 at 13:47)</a>:</h4>
<p>In my case, I have xml and didn't see xml on the list... so I just named my file with a .txt extension. The contentType is applied at the resource level, so this trick at my filesystem level didn't matter... and an xml file is a text file.</p>



<a name="266809120"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/%22Big%20data%22/near/266809120" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/.22Big.20data.22.html#266809120">(Jan 04 2022 at 13:49)</a>:</h4>
<p>note Binary does work. there is just an "file type" error thrown in the IG QA report.</p>



<a name="267058348"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/%22Big%20data%22/near/267058348" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/.22Big.20data.22.html#267058348">(Jan 06 2022 at 13:06)</a>:</h4>
<p><span class="user-mention" data-user-id="191469">@Chris Moesel</span> Grahame is insisting that the <code>implementationguide-resource-format</code> extension is needed. <br>
I have a very focused test IG. <a href="https://github.com/JohnMoehrke/testBinary">https://github.com/JohnMoehrke/testBinary</a><br>
not clear to me how to get that extension thru sushi-config into the IG json.</p>



<a name="267067252"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/%22Big%20data%22/near/267067252" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/.22Big.20data.22.html#267067252">(Jan 06 2022 at 14:36)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="191404">@John Moehrke</span>.  Thanks for the example project.  I now see what you mean and understand what you're trying to do.  You <em>should</em> be able to add this to your <code>sushi-config.yaml</code> file:</p>
<div class="codehilite" data-code-language="YAML"><pre><span></span><code><span class="nt">resources</span><span class="p">:</span>
  <span class="nt">Binary/B-hello-world</span><span class="p">:</span>
    <span class="nt">extension</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="nt">url</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">http://hl7.org/fhir/StructureDefinition/implementationguide-resource-format</span>
        <span class="nt">valueCode</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">text/plain</span>
</code></pre></div>
<p>But... it's not working.  SUSHI is dropping it when it generates the IG JSON.  I swear this worked when we tested it last (as it's a necessary part to supporting logical model examples).  We'll have to take a look at it!</p>



<a name="267067457"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/%22Big%20data%22/near/267067457" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/.22Big.20data.22.html#267067457">(Jan 06 2022 at 14:38)</a>:</h4>
<p>okay, I had tried it that way... so I figured I didn't do it right.</p>



<a name="267068574"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/%22Big%20data%22/near/267068574" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/.22Big.20data.22.html#267068574">(Jan 06 2022 at 14:48)</a>:</h4>
<p><a href="https://github.com/FHIR/sushi/issues/1005">SUSHI#1005</a></p>



<a name="273293212"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/%22Big%20data%22/near/273293212" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/.22Big.20data.22.html#273293212">(Feb 25 2022 at 22:27)</a>:</h4>
<p><span class="user-mention" data-user-id="191404">@John Moehrke</span> - the issue w/ adding extensions to resources in <code>sushi-config.yaml</code> is fixed in the latest SUSHI 2.3.0 release!</p>



<a name="273293771"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/%22Big%20data%22/near/273293771" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/.22Big.20data.22.html#273293771">(Feb 25 2022 at 22:31)</a>:</h4>
<p><span class="user-mention" data-user-id="191427">@Jens Villadsen</span> - the issue with handling large base64 values is also fixed in the latest SUSHI 2.3.0 release.  I think you found other approaches by now, but if you ever need to put a large Base64 string into a FSH file again, it should work!</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
