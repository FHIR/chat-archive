---
layout: page
title: "FHIR Chat  · Query · shorthand"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/index.html">shorthand</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Query.html">Query</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="199245956"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Query/near/199245956" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shovan Roy <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Query.html#199245956">(May 30 2020 at 08:39)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="191469">@Chris Moesel</span> </p>
<p>I am new to Sushi and just able to write my first Observation resource using Sushi. This is amazing !!. loving it <span aria-label="slight smile" class="emoji emoji-1f642" role="img" title="slight smile">:slight_smile:</span><br>
just have few queries about resource profiling using sushi:</p>
<ol>
<li>How can I add copyright information in a resource?</li>
<li>How can I declare a profile as abstract?</li>
</ol>
<p>Thanks,<br>
Shovan</p>



<a name="199247351"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Query/near/199247351" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Query.html#199247351">(May 30 2020 at 09:20)</a>:</h4>
<p><span class="user-mention silent" data-user-id="193760">Shovan Roy</span> <a href="#narrow/stream/215610-shorthand/topic/Query/near/199245956">said</a>:</p>
<blockquote>
<ol>
<li>How can I add copyright information in a resource?</li>
<li>How can I declare a profile as abstract?</li>
</ol>
</blockquote>
<ol>
<li></li>
</ol>
<div class="codehilite"><pre><span></span><code>* ^copyright = &quot;Mine&quot;
</code></pre></div>


<ol start="2">
<li></li>
</ol>
<div class="codehilite"><pre><span></span><code>* ^abstract = true
</code></pre></div>



<a name="199247736"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Query/near/199247736" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Query.html#199247736">(May 30 2020 at 09:31)</a>:</h4>
<p>(i'm curious about the abstract though - are you trying to make logical models?)</p>



<a name="199275558"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Query/near/199275558" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Hay <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Query.html#199275558">(May 30 2020 at 20:54)</a>:</h4>
<p>Of course, in the spirit of the community the first should be </p>
<div class="codehilite"><pre><span></span><code>* ^copyright = &quot;Ours&quot;
</code></pre></div>


<p>:)</p>



<a name="199325904"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Query/near/199325904" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shovan Roy <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Query.html#199325904">(May 31 2020 at 23:35)</a>:</h4>
<p>thanks a lot <span class="user-mention" data-user-id="191832">@Jose Costa Teixeira</span> , <span class="user-mention" data-user-id="191321">@David Hay</span>  I was able to populate both the 'abstract' and 'copyright' in my resource as per your guideline.</p>
<p>I was just wondering if there is any way by which I can add common elements like 'copyright', 'publisher' in  a single place and all resources can inherit them other than duplicating these in individual resource? can this go as an input in "ImplementationGuide-fhir.fsh.json" file?</p>



<a name="199326161"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Query/near/199326161" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shovan Roy <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Query.html#199326161">(May 31 2020 at 23:42)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191832">Jose Costa Teixeira</span> <a href="#narrow/stream/215610-shorthand/topic/Query/near/199247736">said</a>:</p>
<blockquote>
<p>(i'm curious about the abstract though - are you trying to make logical models?)</p>
</blockquote>
<p><span class="user-mention" data-user-id="191832">@Jose Costa Teixeira</span>  In my IG, I'm creating a base profile for all resource types used and marking them as 'abstract'. Adding all common stuff as per our project requirement in the base profile. All profiles in the project are meant to extend that base profile of that resource type.  Implementing inheritance of profiles.</p>



<a name="199363176"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Query/near/199363176" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Freiter <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Query.html#199363176">(Jun 01 2020 at 12:35)</a>:</h4>
<blockquote>
<p>I was just wondering if there is any way by which I can add common elements like 'copyright', 'publisher' in a single place and all resources can inherit them other than duplicating these in individual resource? can this go as an input in "ImplementationGuide-fhir.fsh.json" file?</p>
</blockquote>
<p>This is possible with the use of RuleSets. RuleSets act as a group of rules that can be applied to resources. As an example:</p>
<div class="codehilite"><pre><span></span><code>RuleSet: USCoreMetadata
* ^version = &quot;3.1.0&quot;
* ^status = #active
* ^experimental = false
* ^publisher = &quot;HL7 US Realm Steering Committee&quot;
* ^contact.telecom.system = #url
* ^contact.telecom.value = &quot;http://www.healthit.gov&quot;
* ^jurisdiction.coding = COUNTRY#US &quot;United States of America&quot;

Profile: MyUSCorePatientProfile
Parent: Patient
Mixins: USCoreMetadata
* deceased[x] only deceasedBoolean
// More profile rules
</code></pre></div>


<p>The rules defined on the <code>USCoreMetadata</code> RuleSet will be applied to the <code>MyUSCorePatientProfile</code> profile, and if you had more profiles, you could apply the same metadata to all those profiles in a similar way. I took this example from the documentation on RuleSets found here <a href="http://build.fhir.org/ig/HL7/fhir-shorthand/branches/master/reference.html#defining-rule-sets">http://build.fhir.org/ig/HL7/fhir-shorthand/branches/master/reference.html#defining-rule-sets</a>.</p>



<a name="199363258"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Query/near/199363258" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Query.html#199363258">(Jun 01 2020 at 12:36)</a>:</h4>
<p>also, you can just define these in the IG and tell the IG publisher to fix the values in everything</p>



<a name="199363268"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Query/near/199363268" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Query.html#199363268">(Jun 01 2020 at 12:36)</a>:</h4>
<p>that's not a shorthand feature</p>



<a name="199382886"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Query/near/199382886" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Query.html#199382886">(Jun 01 2020 at 15:28)</a>:</h4>
<p>To use the approach Grahame is referring to, you need to be able to control specific values in the IG resource.  You can't do this with SUSHI 0.12.x, but it is possible with SUSHI 0.13.x-beta.2.  We're gathering one more round of feedback on the beta before we make it an official release.</p>
<p>If you use the beta, then in the <code>config.yaml</code>, you'll want to set the relevant parameters (e.g., <code>copyright</code>) and then set the corresponding <code>apply-[x]</code> parameter, like so:</p>
<div class="codehilite"><pre><span></span><code><span class="c1"># not showing all the other config.yaml properties;</span>
<span class="c1"># only showing those relevant to this conversation.</span>
<span class="nt">copyright</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Ours</span>
<span class="nt">parameters</span><span class="p">:</span>
  <span class="nt">apply-copyright</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
</code></pre></div>


<p>See the <a href="https://confluence.hl7.org/display/FHIR/Implementation+Guide+Parameters">parameter documentation</a> for all of the supported <code>apply-[x]</code> parameters.</p>
<p><em>NOTE: If you have an existing SUSHI 0.12.x project, the first time you run 0.13.0-beta.2, it will generate a config.yaml for you -- then you can add the properties as shown above to it.</em></p>



<a name="199428506"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Query/near/199428506" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shovan Roy <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Query.html#199428506">(Jun 01 2020 at 21:50)</a>:</h4>
<p>awesome <span class="user-mention" data-user-id="191469">@Chris Moesel</span> let me explore sushi 013.0 beta</p>



<a name="199689780"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Query/near/199689780" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shovan Roy <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Query.html#199689780">(Jun 03 2020 at 23:26)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="191469">@Chris Moesel</span> I have used the copyright in the config.yml and I can see that the generated ig has them populated. Though I don't see them populated in the other resources (under profile folder) generated from the corresponding fsh file. shall I use the RuleSet for that purpose?</p>
<p>Also, this could be too much of ask <span aria-label="slight smile" class="emoji emoji-1f642" role="img" title="slight smile">:slight_smile:</span> I was wondering if there anyway by which I can generate fsh file out of existing profile json files?</p>



<a name="199690182"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Query/near/199690182" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Query.html#199690182">(Jun 03 2020 at 23:32)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="193760">@Shovan Roy</span>, if you also use the <code>apply-copyright</code> parameter in config.yaml (as shown in my earlier post), then the copyright <em>should</em> be applied to all your definitions by the IG Publisher.  Note that the raw FSH-generated profiles won't have them, but when you run your IG through the IG Publisher, the final versions of those profiles <em>will</em> have the copyright.  It gets applied by the IG Publisher, not by SUSHI.  I haven't tested it, but my understanding is that this should work.</p>



<a name="199690451"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Query/near/199690451" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Query.html#199690451">(Jun 03 2020 at 23:36)</a>:</h4>
<blockquote>
<p>I was wondering if there anyway by which I can generate fsh file out of existing profile json files?</p>
</blockquote>
<p>Someone created a proof-of-concept tool for this called <a href="https://github.com/lantanagroup/fshfood">FSH Food</a> at the January Connectathon, but it hasn't been updated since February -- so it's buggy and not up to date w/ the latest FHIR Shorthand features.  We're not sure if FSH Food will progress any further so we're considering picking up the effort for a SD --&gt; FSH converter.  Stay tuned (although it will probably take a little while).</p>



<a name="199690819"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Query/near/199690819" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shovan Roy <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Query.html#199690819">(Jun 03 2020 at 23:42)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191469">Chris Moesel</span> <a href="#narrow/stream/215610-shorthand/topic/Query/near/199690182">said</a>:</p>
<blockquote>
<p>Hi <span class="user-mention silent" data-user-id="193760">Shovan Roy</span>, if you also use the <code>apply-copyright</code> parameter in config.yaml (as shown in my earlier post), then the copyright <em>should</em> be applied to all your definitions by the IG Publisher.  Note that the raw FSH-generated profiles won't have them, but when you run your IG through the IG Publisher, the final versions of those profiles <em>will</em> have the copyright.  It gets applied by the IG Publisher, not by SUSHI.  I haven't tested it, but my understanding is that this should work.</p>
</blockquote>
<p><span class="user-mention" data-user-id="191469">@Chris Moesel</span>  yes, I have used that configuration. Here is a snippet from the config.yaml <br>
dependencies:<br>
  hl7.fhir.au.base: current<br>
parameters:<br>
  show-inherited-invariants: false<br>
  apply-copyright: true<br>
  apply-jurisdiction: true<br>
  apply-publisher: true<br>
  apply-version: true  <br>
  releaselabel: qa-preview  </p>
<p>and I can see this coming up in the IG as :{<br>
        "code": "apply-copyright",<br>
        "value": "true"<br>
      },<br>
But when I check the individual resource, I don't see them. probably I will do some more review of what's happening or anything missing in my setup and take some advice from Grahame on this.</p>



<a name="199691013"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Query/near/199691013" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Query.html#199691013">(Jun 03 2020 at 23:45)</a>:</h4>
<p>Are you looking at the profiles <em>after</em> running the IG Publisher on them?</p>



<a name="199691131"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Query/near/199691131" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shovan Roy <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Query.html#199691131">(Jun 03 2020 at 23:46)</a>:</h4>
<p>yes</p>



<a name="199691177"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Query/near/199691177" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shovan Roy <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Query.html#199691177">(Jun 03 2020 at 23:47)</a>:</h4>
<p>let me do a clean build after removing everything and see what happens. I will keep you posted with the outcome .. thanks very much <span class="user-mention" data-user-id="191469">@Chris Moesel</span></p>



<a name="199797828"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Query/near/199797828" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Reynolds <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Query.html#199797828">(Jun 04 2020 at 19:33)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="191469">@Chris Moesel</span> </p>
<p>I am also fairly new to FSH, but I have a lot of experience with FHIR and I attended the FSH track at the connectathon.  I am demoing the capabilities of FSH to other members of my company so that we can start using it across all of the IGs we create. </p>
<p>My question is similar to <a href="#narrow/stream/215610-shorthand/topic/Query/near/199363176">https://chat.fhir.org/#narrow/stream/215610-shorthand/topic/Query/near/199363176</a>, is it possible to use RuleSets to define a set of rules for an Example in order to reuse common attributes across examples?</p>
<p>For example:<br>
if every Example Patient had</p>
<ul>
<li>extension[us-core-race].extension[ombCategory].url = "ombCategory"</li>
<li>extension[us-core-race].extension[ombCategory].valueCoding = Race#2106-3 "White"</li>
<li>extension[us-core-race].extension[text].url = "text"</li>
<li>extension[us-core-race].extension[text].valueString = "White"</li>
</ul>



<a name="199799300"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Query/near/199799300" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Freiter <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Query.html#199799300">(Jun 04 2020 at 19:44)</a>:</h4>
<p><span class="user-mention" data-user-id="294341">@Joshua Reynolds</span> that seems like a good use case for RuleSets. Here is how what you are describing might look in FSH:</p>
<div class="codehilite"><pre><span></span><code>Alias: Race = https://www.hl7.org/fhir/us/core/ValueSet-omb-race-category.html

RuleSet: PatientRace
* extension[us-core-race].extension[ombCategory].url = &quot;ombCategory&quot;
* extension[us-core-race].extension[ombCategory].valueCoding = Race#2106-3 &quot;White&quot;
* extension[us-core-race].extension[text].url = &quot;text&quot;
* extension[us-core-race].extension[text].valueString = &quot;White&quot;

Instance: P1
InstanceOf: http://hl7.org/fhir/us/core/StructureDefinition/us-core-patient
Mixins: PatientRace
* name.given = &quot;James&quot;
* name.family = &quot;Cod&quot;

Instance: P2
InstanceOf: http://hl7.org/fhir/us/core/StructureDefinition/us-core-patient
Mixins: PatientRace
* name.given = &quot;Bill&quot;
* name.family = &quot;Reef&quot;
</code></pre></div>


<p>On any Instance I make of a Patient, I can add <code>Mixins: PatientRace</code> to add the rules listed in that RuleSet to my FSH definition.</p>



<a name="199799640"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Query/near/199799640" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Reynolds <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Query.html#199799640">(Jun 04 2020 at 19:46)</a>:</h4>
<p>Awesome!<br>
I did not fully understand how that would look when applied to an Example, but this clears it all up.<br>
 Thank you very much <span class="user-mention" data-user-id="239822">@Nick Freiter</span></p>



<a name="199805133"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Query/near/199805133" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Reynolds <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Query.html#199805133">(Jun 04 2020 at 20:35)</a>:</h4>
<p><a href="/user_uploads/10155/b-7rpKES1jaaRlrxJ5L9b48o/image.png">image.png</a> <br>
<a href="/user_uploads/10155/tp6yt1CGROtrq2RAChVydOIY/image.png">image.png</a><br>
I am getting a "Cannot resolve element from path: extension[us-core-race].extension[text].url"<br>
I had the IG building and just copied the rules and put them into a RuleSet.<br>
Does the RuleSet need to know about the us-core-patient Profile?</p>
<div class="message_inline_image"><a href="/user_uploads/10155/b-7rpKES1jaaRlrxJ5L9b48o/image.png" title="image.png"><img src="/user_uploads/10155/b-7rpKES1jaaRlrxJ5L9b48o/image.png"></a></div><div class="message_inline_image"><a href="/user_uploads/10155/tp6yt1CGROtrq2RAChVydOIY/image.png" title="image.png"><img src="/user_uploads/10155/tp6yt1CGROtrq2RAChVydOIY/image.png"></a></div>



<a name="199805776"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Query/near/199805776" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Kramer <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Query.html#199805776">(Jun 04 2020 at 20:41)</a>:</h4>
<p>The other way to do this is to create a rule set, then mix in that rule set in every profile. It still requires touching each profile, but it is one line in each profile.</p>



<a name="199806680"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Query/near/199806680" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Reynolds <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Query.html#199806680">(Jun 04 2020 at 20:49)</a>:</h4>
<p>I'm sorry I must have missed something I just walked through it deleting each extension and adding it to the RuleSet and it is working.</p>



<a name="205549814"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Query/near/205549814" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shovan Roy <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Query.html#205549814">(Jul 31 2020 at 01:24)</a>:</h4>
<p>Hi All,</p>
<p>I need some guidance on slicing using sushi. I'm trying to draft a profile using sushi. The profile extends the international vital-sign body weight(<a href="http://hl7.org/fhir/StructureDefinition/bodyweight">http://hl7.org/fhir/StructureDefinition/bodyweight</a>). My objective is to include additional SNOMED based slice on Observation.code.coding in the derived vital sign profile.  <br>
I'am trying to do that by adding the following in the .fsh file (Parent:  observation-bodyweight)<br>
/* code.coding contains<br>
/          bodyWeightSNOMED-CT 0..1 MS   <br>
/* code.coding[bodyWeightSNOMED-CT] = SCT#27113001<br>
I'm facing issues with it. as per my understanding it is failing since the vital sign profiles are not sliced based on pattern but sushi is trying add a pattern by using the above code.  Please suggest me how I can achieve this.<br>
Error: Internal error: Could not match any discriminators ([code, system]) for slice Observation.code.coding:bodyWeightSNOMED-CT in profile <a href="http://build.fhir.org/ig/hl7au/au-fhir-childhealth/StructureDefinition/ncdhc-observation-vitalsign-bodyweight">http://build.fhir.org/ig/hl7au/au-fhir-childhealth/StructureDefinition/ncdhc-observation-vitalsign-bodyweight</a> - None of the discriminator [code, system] have fixed value, binding or existence assertions</p>



<a name="205656553"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Query/near/205656553" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shovan Roy <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Query.html#205656553">(Aug 01 2020 at 01:05)</a>:</h4>
<p><span class="user-mention" data-user-id="191469">@Chris Moesel</span> any suggestion for me?</p>



<a name="205790277"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Query/near/205790277" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Query.html#205790277">(Aug 03 2020 at 12:59)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="193760">@Shovan Roy</span>.  I apologize for the delay, when I read this the first time, I did not have time to look into it.  But then, after it was marked "read", I forgot to look at it again.  I wish Zulip had a way to re-mark something as "unread"!</p>
<p>Your hunch is correct. The parent profile (<a href="http://hl7.org/fhir/StructureDefinition/bodyweight">http://hl7.org/fhir/StructureDefinition/bodyweight</a>) slices <code>coding</code> using the <code>value</code> discriminator type and <em>two</em> paths (both <code>system</code> and <code>code</code>).  That being the case, any additional slices need to follow that approach, meaning:</p>
<ol>
<li>They must fix <code>system</code> and <code>code</code> independently (not via a <code>pattern[x]</code> on a parent path)</li>
<li>They must fix them using <code>fixed[x]</code> (since the discriminator type is <code>value</code>, not <code>pattern</code>)</li>
</ol>
<p>The following FSH worked for me using SUSHI 0.15.0:</p>
<div class="codehilite"><pre><span></span><code>Alias: SCT = http://snomed.info/sct
Alias: LOINC = http://loinc.org
Alias: OBSCAT = http://terminology.hl7.org/CodeSystem/observation-category

Profile: MyWeightProfile
Parent: http://hl7.org/fhir/StructureDefinition/bodyweight
* code.coding contains bodyWeightSNOMED-CT 0..1 MS
* code.coding[bodyWeightSNOMED-CT].system = SCT (exactly)     // discriminator requires fixed[x]
* code.coding[bodyWeightSNOMED-CT].code = #27113001 (exactly) // discriminator requires fixed[x]

Instance: MyWeightInstance
InstanceOf: MyWeightProfile
* code.coding[BodyWeightCode] = LOINC#29463-7
* code.coding[bodyWeightSNOMED-CT] = SCT#27113001
* category = OBSCAT#vital-signs
* status = #final
* subject = Reference(Patient/example)
* effectiveDateTime = 2020-08-01T00:00:00.000-05:00
* valueQuantity = 100 &#39;[lb_av]&#39;
* valueQuantity.unit = &quot;lbs&quot;
</code></pre></div>



<a name="205824595"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Query/near/205824595" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Hay <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Query.html#205824595">(Aug 03 2020 at 17:45)</a>:</h4>
<p>You know,  'how to'  replies like this are gold! We should have a way to 'tag' them - or copy them somewhere so they can be more easily found. sort of an examples 'how to' annex in the spec or somewhere...</p>



<a name="205851450"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Query/near/205851450" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shovan Roy <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Query.html#205851450">(Aug 03 2020 at 21:53)</a>:</h4>
<p><span class="user-mention" data-user-id="191469">@Chris Moesel</span> thank you so much. This works perfectly. This is 'exactly' what I was looking for <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span><br>
I love sushi !</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
