---
layout: page
title: "FHIR Chat  · contained resources of different types · shorthand"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/index.html">shorthand</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/contained.20resources.20of.20different.20types.html">contained resources of different types</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="194757692"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/contained%20resources%20of%20different%20types/near/194757692" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Hay <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/contained.20resources.20of.20different.20types.html#194757692">(Apr 21 2020 at 03:27)</a>:</h4>
<p>I'm trying to add contained resources to an instance - where the contained resources are of different types, but getting the error:</p>
<blockquote>
<p>error Cannot fix Resource value on this element since this element does not have a single type</p>
</blockquote>
<p>Is this a sushi limitation?</p>
<div class="codehilite"><pre><span></span>* contained[0] = medicalHistoryEmpty
* contained[1] = adverseReactionEmpty
* contained[2] = immunizationEmpty
* contained[3] = medicineListEmpty
</pre></div>


<p>The referenced instances are instances of profiled List resources</p>



<a name="194761859"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/contained%20resources%20of%20different%20types/near/194761859" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/contained.20resources.20of.20different.20types.html#194761859">(Apr 21 2020 at 05:23)</a>:</h4>
<p>Hmmmm.  I <em>thought</em> we had tested this situation, but maybe you found an edge case?  Are you using SUSHI 0.12.2 (released on Friday)?  That's the release that I<em>thought</em> addressed this...</p>



<a name="194762203"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/contained%20resources%20of%20different%20types/near/194762203" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Hay <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/contained.20resources.20of.20different.20types.html#194762203">(Apr 21 2020 at 05:31)</a>:</h4>
<p>Yep - 0.12.2 ...</p>



<a name="194790774"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/contained%20resources%20of%20different%20types/near/194790774" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Freiter <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/contained.20resources.20of.20different.20types.html#194790774">(Apr 21 2020 at 11:50)</a>:</h4>
<p>What does the <code>contained</code> element look like on the StructureDefinition that you are making an instance of? It looks like SUSHI is taking issue with the types on <code>contained</code>. Does <code>contained</code> have more than a single type? Or is that error incorrect altogether?</p>



<a name="194808997"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/contained%20resources%20of%20different%20types/near/194808997" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Freiter <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/contained.20resources.20of.20different.20types.html#194808997">(Apr 21 2020 at 14:24)</a>:</h4>
<p>So what I'm guessing is happening here is that the <code>contained</code> element on the Profile you are making an instance of is constrained to be a choice of several types of Resources. In other situations, SUSHI does not allow you to set an element that is a choice equal to a single value. As in you can't set <code>value[x]</code> equal to some specific string, you must instead set <code>valueString</code>.  That logic was being applied to this situation as well. We would not let you set a specific value, since <code>contained</code> is a choice of types. But I now see resources cannot be treated the same as other data types, so we should allow you to set resources inline into that <code>contained</code> array, as long as their <code>resourceType</code> matches one of the types of the <code>contained</code> array. I've made an issue to track this here: <a href="https://github.com/FHIR/sushi/issues/377" title="https://github.com/FHIR/sushi/issues/377">https://github.com/FHIR/sushi/issues/377</a>.</p>



<a name="194809392"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/contained%20resources%20of%20different%20types/near/194809392" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Freiter <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/contained.20resources.20of.20different.20types.html#194809392">(Apr 21 2020 at 14:27)</a>:</h4>
<p>This is all assuming that the Profile you are making an instance of does have some choice of several types on its <code>contained</code> array. If that is not the case, then all of the above is just a bonus that you've helped us discover!</p>



<a name="194846348"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/contained%20resources%20of%20different%20types/near/194846348" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Hay <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/contained.20resources.20of.20different.20types.html#194846348">(Apr 21 2020 at 18:52)</a>:</h4>
<p>So this is the ancestor profile I'm constraining from : <a href="http://hl7.org.au/fhir/aubase1/StructureDefinition-au-composition.json.html" title="http://hl7.org.au/fhir/aubase1/StructureDefinition-au-composition.json.html">http://hl7.org.au/fhir/aubase1/StructureDefinition-au-composition.json.html</a><br>
It has some constraints on contained - but not restricting to one type I believe. The actual profile doesn't constrain contained any further.<br>
I can add one instance to contained (an instance of a profiled List) but cannot add an instance of another List profile...</p>



<a name="194846490"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/contained%20resources%20of%20different%20types/near/194846490" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Hay <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/contained.20resources.20of.20different.20types.html#194846490">(Apr 21 2020 at 18:53)</a>:</h4>
<p>So sorry, glad to have helped with the bonus, but I don't think it's the issue here!</p>



<a name="194858148"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/contained%20resources%20of%20different%20types/near/194858148" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/contained.20resources.20of.20different.20types.html#194858148">(Apr 21 2020 at 20:37)</a>:</h4>
<p>OK... so you're attempting to apply different profiles of the same resource (List).  Maybe that's the difference here...  I'm not sure if we've tested that -- although I would not have expected it to be a problem!  We can take a look.  Thanks for your patience!</p>



<a name="194874140"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/contained%20resources%20of%20different%20types/near/194874140" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Hay <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/contained.20resources.20of.20different.20types.html#194874140">(Apr 21 2020 at 23:30)</a>:</h4>
<p>no worries! Thanks (as always) for your work on this...</p>



<a name="194925579"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/contained%20resources%20of%20different%20types/near/194925579" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Freiter <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/contained.20resources.20of.20different.20types.html#194925579">(Apr 22 2020 at 12:58)</a>:</h4>
<p>After some further investigation, this just looks like a bug with how we are handling arrays of contained resources. It doesn't seem like there is anything specific to the profiles that is causing this. I've started work on a fix. Thanks for the find! (And the bonus)</p>



<a name="194968128"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/contained%20resources%20of%20different%20types/near/194968128" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Hay <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/contained.20resources.20of.20different.20types.html#194968128">(Apr 22 2020 at 17:53)</a>:</h4>
<p>you're welcome!</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
