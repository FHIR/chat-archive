---
layout: page
title: "FHIR Chat  · The element Extension.url has a fixed of type uri · shorthand"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/index.html">shorthand</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/The.20element.20Extension.2Eurl.20has.20a.20fixed.20of.20type.20uri.html">The element Extension.url has a fixed of type uri</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="229020458"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/The%20element%20Extension.url%20has%20a%20fixed%20of%20type%20uri/near/229020458" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/The.20element.20Extension.2Eurl.20has.20a.20fixed.20of.20type.20uri.html#229020458">(Mar 05 2021 at 20:36)</a>:</h4>
<p>Hi Fsh-folks. I've gofsh'ed my IG and now I have an error on the QA page I don't really understand. The error is the following: <code> The element Extension.url has a fixed of type uri, which is not in the list of allowed types ([http://hl7.org/fhirpath/System.String]) </code></p>
<p>The QA page can be found here: <a href="https://build.fhir.org/ig/hl7dk/dk-core/branches/going-fshing/qa.html#_scratch_ig-build-temp-6H6E5O_repo_fsh-generated_resources_StructureDefinition-dk-core-RegionalSubDivisionCodes">https://build.fhir.org/ig/hl7dk/dk-core/branches/going-fshing/qa.html#_scratch_ig-build-temp-6H6E5O_repo_fsh-generated_resources_StructureDefinition-dk-core-RegionalSubDivisionCodes</a> and the source is here: <a href="https://github.com/hl7dk/dk-core/blob/going-fshing/input/fsh/extensions.fsh">https://github.com/hl7dk/dk-core/blob/going-fshing/input/fsh/extensions.fsh</a> </p>
<p>From the sources I can't really understand where that error is comming from. Help would be much appreciated (<span class="user-mention" data-user-id="191469">@Chris Moesel</span> ).</p>



<a name="229122856"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/The%20element%20Extension.url%20has%20a%20fixed%20of%20type%20uri/near/229122856" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Kramer <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/The.20element.20Extension.2Eurl.20has.20a.20fixed.20of.20type.20uri.html#229122856">(Mar 06 2021 at 19:35)</a>:</h4>
<p>Hi Jens, I have the same error, and it doesn't seem to be related to SUSHI or FSH. It appeared somewhere around IG Publisher version 1.1.60. At that time, I didn't change SUSHI, just the IG Publisher - and <em>poof</em> - all of a sudden I had 60+ instances of this error. <br>
If you look at the latest build of US Core IG, they have the same error, and they aren't using SUSHI for their StructureDefinitions.</p>



<a name="229123677"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/The%20element%20Extension.url%20has%20a%20fixed%20of%20type%20uri/near/229123677" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Kramer <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/The.20element.20Extension.2Eurl.20has.20a.20fixed.20of.20type.20uri.html#229123677">(Mar 06 2021 at 19:47)</a>:</h4>
<p><a href="https://github.com/HL7/fhir-ig-publisher/issues/240">https://github.com/HL7/fhir-ig-publisher/issues/240</a></p>



<a name="229175121"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/The%20element%20Extension.url%20has%20a%20fixed%20of%20type%20uri/near/229175121" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/The.20element.20Extension.2Eurl.20has.20a.20fixed.20of.20type.20uri.html#229175121">(Mar 07 2021 at 10:07)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> you might want to look into this</p>



<a name="229281461"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/The%20element%20Extension.url%20has%20a%20fixed%20of%20type%20uri/near/229281461" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Torben M. Hagensen <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/The.20element.20Extension.2Eurl.20has.20a.20fixed.20of.20type.20uri.html#229281461">(Mar 08 2021 at 11:07)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191427">Jens Villadsen</span> <a href="#narrow/stream/215610-shorthand/topic/The.20element.20Extension.2Eurl.20has.20a.20fixed.20of.20type.20uri/near/229020458">said</a>:</p>
<blockquote>
<p>Hi Fsh-folks. I've gofsh'ed my IG and now I have an error on the QA page I don't really understand. The error is the following: <code> The element Extension.url has a fixed of type uri, which is not in the list of allowed types ([http://hl7.org/fhirpath/System.String]) </code></p>
<p>The QA page can be found here: <a href="https://build.fhir.org/ig/hl7dk/dk-core/branches/going-fshing/qa.html#_scratch_ig-build-temp-6H6E5O_repo_fsh-generated_resources_StructureDefinition-dk-core-RegionalSubDivisionCodes">https://build.fhir.org/ig/hl7dk/dk-core/branches/going-fshing/qa.html#_scratch_ig-build-temp-6H6E5O_repo_fsh-generated_resources_StructureDefinition-dk-core-RegionalSubDivisionCodes</a> and the source is here: <a href="https://github.com/hl7dk/dk-core/blob/going-fshing/input/fsh/extensions.fsh">https://github.com/hl7dk/dk-core/blob/going-fshing/input/fsh/extensions.fsh</a> </p>
<p>From the sources I can't really understand where that error is comming from. Help would be much appreciated (<span class="user-mention silent" data-user-id="191469">Chris Moesel</span> ).</p>
</blockquote>
<p>I have the same issue after updating IG publisher. FSH generated a fixedUri by default which generates the error in IG publisher.<br>
Can't say  what's right though.</p>



<a name="229297829"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/The%20element%20Extension.url%20has%20a%20fixed%20of%20type%20uri/near/229297829" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/The.20element.20Extension.2Eurl.20has.20a.20fixed.20of.20type.20uri.html#229297829">(Mar 08 2021 at 13:30)</a>:</h4>
<p>I don't know what's going on either -- but <code>fixedUri</code> should be appropriate since <code>Extension.url</code> is defined as having the <code>uri</code> type: <a href="/user_uploads/10155/l4BZv1fMKRAJGPtF8EBjRwcs/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/10155/l4BZv1fMKRAJGPtF8EBjRwcs/image.png" title="image.png"><img src="/user_uploads/10155/l4BZv1fMKRAJGPtF8EBjRwcs/image.png"></a></div>



<a name="229383113"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/The%20element%20Extension.url%20has%20a%20fixed%20of%20type%20uri/near/229383113" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gino Canessa <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/The.20element.20Extension.2Eurl.20has.20a.20fixed.20of.20type.20uri.html#229383113">(Mar 08 2021 at 22:05)</a>:</h4>
<p>This <em>looks</em> like a problem in the publisher, since I just started getting these errors too, and:</p>
<ul>
<li>Internally the specs use .fixedValueUri for extension urls, so that is the correct type.</li>
<li>The error seems to be indicating the type must be <code>http://hl7.org/fhirpath/System.String</code>, which is the backing type for uri.</li>
</ul>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> , thoughts?</p>



<a name="229508772"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/The%20element%20Extension.url%20has%20a%20fixed%20of%20type%20uri/near/229508772" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a>  Bob Milius <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/The.20element.20Extension.2Eurl.20has.20a.20fixed.20of.20type.20uri.html#229508772">(Mar 09 2021 at 16:42)</a>:</h4>
<p>another data point... This sushi snippet from my patient profile produces no publisher errors:</p>
<div class="codehilite"><pre><span></span><code>Alias: PatientBirthPlaceExtension = http://hl7.org/fhir/StructureDefinition/patient-birthPlace
* extension contains PatientBirthPlaceExtension named PatBirthPlaceExt 0..1 MS
// * extension[PatBirthPlaceExt].valueAddress.country MS
</code></pre></div>
<p>but if I uncomment the last line, I get the error</p>
<div class="codehilite"><pre><span></span><code>The element Patient.extension:PatBirthPlaceExt.url has a fixed of type uri, which is not in the list of allowed types ([http://hl7.org/fhirpath/System.String])
</code></pre></div>



<a name="229517528"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/The%20element%20Extension.url%20has%20a%20fixed%20of%20type%20uri/near/229517528" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gino Canessa <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/The.20element.20Extension.2Eurl.20has.20a.20fixed.20of.20type.20uri.html#229517528">(Mar 09 2021 at 17:31)</a>:</h4>
<p>Doing a little digging, and just want to put my thoughts down in case it saves anyone time.</p>
<ul>
<li>This appears to be caused by changes in the <a href="https://github.com/hapifhir/org.hl7.fhir.core/">FHIR Core</a> library.</li>
<li>I believe this appeared in either <a href="https://github.com/hapifhir/org.hl7.fhir.core/commits/5.3.3">5.3.3</a> or <a href="https://github.com/hapifhir/org.hl7.fhir.core/commits/5.3.4">5.3.4</a>, when <code>SD_VALUE_TYPE_IILEGAL</code> was added.</li>
<li>With the understanding that this is my first time looking through this code...<ul>
<li>In <a href="https://github.com/hapifhir/org.hl7.fhir.core/blob/dfc59882cac54d06637f765c587c05b45f3e58cd/org.hl7.fhir.validation/src/main/java/org/hl7/fhir/validation/instance/type/StructureDefinitionValidator.java#L150-L164">StructureDefinitionValidator.java</a>, these lines look like the change that we are looking for</li>
<li><a href="https://github.com/hapifhir/org.hl7.fhir.core/blob/dfc59882cac54d06637f765c587c05b45f3e58cd/org.hl7.fhir.validation/src/main/java/org/hl7/fhir/validation/instance/type/StructureDefinitionValidator.java#L158">This line</a> in particular is the error that is being logged.</li>
<li>However, the Structure Definitions I'm getting errors on (exported by FSH) do not have a snapshot section, only a differential.</li>
</ul>
</li>
</ul>
<p>Having never played with the validator code, I am loathe to start tinkering (or even set up my environment to do so).  That said, I don't know how much more I can learn from just browsing the source.</p>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> is my reading of this correct?  If so, is there a change to be made to the validator and/or should FSH be exporting a snapshot in addition to the differential?</p>



<a name="229560373"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/The%20element%20Extension.url%20has%20a%20fixed%20of%20type%20uri/near/229560373" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/The.20element.20Extension.2Eurl.20has.20a.20fixed.20of.20type.20uri.html#229560373">(Mar 09 2021 at 21:51)</a>:</h4>
<p><span class="user-mention" data-user-id="222054">@Gino Canessa</span> im pretty sure that the differential made by fsh is sufficient. My guess would be that it is the generation of the snapshot, but I haven't had time to have a look yet</p>



<a name="229680064"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/The%20element%20Extension.url%20has%20a%20fixed%20of%20type%20uri/near/229680064" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gino Canessa <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/The.20element.20Extension.2Eurl.20has.20a.20fixed.20of.20type.20uri.html#229680064">(Mar 10 2021 at 15:25)</a>:</h4>
<p>Thanks <span class="user-mention" data-user-id="191427">@Jens Villadsen</span>!  As I mentioned, I just started looking at commits around when the error started appearing.  I know how busy people are, so was trying to think on ways around it.  Cheers!</p>



<a name="230527433"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/The%20element%20Extension.url%20has%20a%20fixed%20of%20type%20uri/near/230527433" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/The.20element.20Extension.2Eurl.20has.20a.20fixed.20of.20type.20uri.html#230527433">(Mar 16 2021 at 15:00)</a>:</h4>
<p>Re-raised the issue here: <a href="#narrow/stream/179252-IG-creation/topic/BUG.3A.20The.20element.20Extension.2Eurl.20has.20a.20fixed.20of.20type.20uri">https://chat.fhir.org/#narrow/stream/179252-IG-creation/topic/BUG.3A.20The.20element.20Extension.2Eurl.20has.20a.20fixed.20of.20type.20uri</a> so I could get Mark's attention too.</p>



<a name="231088410"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/The%20element%20Extension.url%20has%20a%20fixed%20of%20type%20uri/near/231088410" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/The.20element.20Extension.2Eurl.20has.20a.20fixed.20of.20type.20uri.html#231088410">(Mar 19 2021 at 20:53)</a>:</h4>
<p>Alright so, I think this is related to a commit made on March 2-3 (14dc86e3a2f895498d5a63aa8baefa0c5283fc85)</p>



<a name="231088489"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/The%20element%20Extension.url%20has%20a%20fixed%20of%20type%20uri/near/231088489" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/The.20element.20Extension.2Eurl.20has.20a.20fixed.20of.20type.20uri.html#231088489">(Mar 19 2021 at 20:54)</a>:</h4>
<p>There was code added in the validation process to add the message you are encountering</p>



<a name="231088535"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/The%20element%20Extension.url%20has%20a%20fixed%20of%20type%20uri/near/231088535" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/The.20element.20Extension.2Eurl.20has.20a.20fixed.20of.20type.20uri.html#231088535">(Mar 19 2021 at 20:54)</a>:</h4>
<p>specifically:<br>
<code>    // in a snapshot, we validate that fixedValue, pattern, and defaultValue, if present, are all of the right type
    if (snapshot &amp;&amp; element.getIdBase().contains(".")) {
      if (rule(errors, IssueType.EXCEPTION, stack.getLiteralPath(), !typeCodes.isEmpty() || element.hasChild("contentReference"), I18nConstants.SD_NO_TYPES_OR_CONTENTREF, element.getIdBase())) {
        Element v = element.getNamedChild("defaultValue");
        if (v != null) {
          rule(errors, IssueType.EXCEPTION, stack.push(v, -1, null, null).getLiteralPath(), typeCodes.contains(v.fhirType()), I18nConstants.SD_VALUE_TYPE_IILEGAL, element.getIdBase(), "defaultValue", v.fhirType(), typeCodes);
        }
        v = element.getNamedChild("fixed");
        if (v != null) {
          rule(errors, IssueType.EXCEPTION, stack.push(v, -1, null, null).getLiteralPath(), typeCodes.contains(v.fhirType()), I18nConstants.SD_VALUE_TYPE_IILEGAL, element.getIdBase(), "fixed", v.fhirType(), typeCodes);
        }
        v = element.getNamedChild("pattern");
        if (v != null) {
          rule(errors, IssueType.EXCEPTION, stack.push(v, -1, null, null).getLiteralPath(), typeCodes.contains(v.fhirType()), I18nConstants.SD_VALUE_TYPE_IILEGAL, element.getIdBase(), "pattern", v.fhirType(), typeCodes);
        }
      }
    }</code></p>



<a name="231088629"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/The%20element%20Extension.url%20has%20a%20fixed%20of%20type%20uri/near/231088629" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/The.20element.20Extension.2Eurl.20has.20a.20fixed.20of.20type.20uri.html#231088629">(Mar 19 2021 at 20:55)</a>:</h4>
<p>That is the only time this message is used in the core.</p>



<a name="231088637"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/The%20element%20Extension.url%20has%20a%20fixed%20of%20type%20uri/near/231088637" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/The.20element.20Extension.2Eurl.20has.20a.20fixed.20of.20type.20uri.html#231088637">(Mar 19 2021 at 20:55)</a>:</h4>
<p><code>SD_VALUE_TYPE_IILEGAL = The element {0} has a {1} of type {2}, which is not in the list of allowed types ({3})</code></p>



<a name="231088763"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/The%20element%20Extension.url%20has%20a%20fixed%20of%20type%20uri/near/231088763" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/The.20element.20Extension.2Eurl.20has.20a.20fixed.20of.20type.20uri.html#231088763">(Mar 19 2021 at 20:56)</a>:</h4>
<p>This is in the StructureDefinitionValidator</p>



<a name="231088832"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/The%20element%20Extension.url%20has%20a%20fixed%20of%20type%20uri/near/231088832" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/The.20element.20Extension.2Eurl.20has.20a.20fixed.20of.20type.20uri.html#231088832">(Mar 19 2021 at 20:57)</a>:</h4>
<p>actually, I'm giong to post this all in the other thread Lloyd made</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
