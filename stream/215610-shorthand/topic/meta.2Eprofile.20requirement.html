---
layout: page
title: "FHIR Chat  · meta.profile requirement · shorthand"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/index.html">shorthand</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/meta.2Eprofile.20requirement.html">meta.profile requirement</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="218621228"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/meta.profile%20requirement/near/218621228" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Saul Kravitz <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/meta.2Eprofile.20requirement.html#218621228">(Dec 02 2020 at 21:19)</a>:</h4>
<p>In CarinBB we required meta.profile 1..*, but what we meant was that an instance of each profile must declare that it is an instance of that profile.</p>
<p>Since meta.profile is 1..* (not 1..1), how can I specify that ONE of the values is equal to the canonical URL for that profile?</p>



<a name="218630847"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/meta.profile%20requirement/near/218630847" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/meta.2Eprofile.20requirement.html#218630847">(Dec 02 2020 at 22:43)</a>:</h4>
<p>I don't understand the question. You have a profile P1 and in there you declare that all instance resources shall have at least one meta-profile...</p>



<a name="218631020"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/meta.profile%20requirement/near/218631020" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/meta.2Eprofile.20requirement.html#218631020">(Dec 02 2020 at 22:44)</a>:</h4>
<p>do you want to go beyond "at least one value" and require "at least this value once"?</p>



<a name="218631464"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/meta.profile%20requirement/near/218631464" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/meta.2Eprofile.20requirement.html#218631464">(Dec 02 2020 at 22:48)</a>:</h4>
<p>I think he's looking for instances of the profile are required to declare that in meta.profile.</p>



<a name="218631858"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/meta.profile%20requirement/near/218631858" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/meta.2Eprofile.20requirement.html#218631858">(Dec 02 2020 at 22:53)</a>:</h4>
<p>I'm assuming it ties back to <a href="#narrow/stream/179252-IG-creation/topic/Requiring.20meta.2Eprofile.20be.20populated/near/210455639">https://chat.fhir.org/#narrow/stream/179252-IG-creation/topic/Requiring.20meta.2Eprofile.20be.20populated/near/210455639</a>.</p>



<a name="218632311"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/meta.profile%20requirement/near/218632311" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gino Canessa <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/meta.2Eprofile.20requirement.html#218632311">(Dec 02 2020 at 22:57)</a>:</h4>
<p>I'd guess the cleanest would be to use slicing (never thought I'd say those words together =).  It will probably look something like:</p>
<div class="codehilite"><pre><span></span><code>Profile: TestProfile
Parent:  Meta
* profile ^slicing.discriminator.type = #value
* profile ^slicing.discriminator.path = &quot;$this&quot;
* profile ^slicing.rules = #open
* profile ^slicing.ordered = false
* profile ^slicing.description = &quot;Slice based on value&quot;
* profile contains supportedProfile 1..1 MS
* profile[supportedProfile] 1..1 MS
* profile[supportedProfile] = &quot;http://example.org/profile&quot;
</code></pre></div>
<p>Though I'm no expert, so it may not be 100%.  Note that if you have examples with other values in there (likely), it will throw warnings about slices that don't match the slice discriminator - this is fine to add to ignorewarning.txt.</p>
<p>(also, we should add FSH to the list of langauges in Zulip)</p>



<a name="218632472"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/meta.profile%20requirement/near/218632472" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/meta.2Eprofile.20requirement.html#218632472">(Dec 02 2020 at 22:58)</a>:</h4>
<p><span class="user-mention silent" data-user-id="222054">Gino Canessa</span> <a href="#narrow/stream/215610-shorthand/topic/meta.2Eprofile.20requirement/near/218632311">said</a>:</p>
<blockquote>
<p>(also, we should add FSH to the list of langauges in Zulip)</p>
</blockquote>
<p><span aria-label="+1" class="emoji emoji-1f44d" role="img" title="+1">:+1:</span></p>



<a name="218644657"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/meta.profile%20requirement/near/218644657" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/meta.2Eprofile.20requirement.html#218644657">(Dec 03 2020 at 01:42)</a>:</h4>
<p>I was going to suggest what <span class="user-mention" data-user-id="222054">@Gino Canessa</span> has already suggested: the best way to say "one of the things in this array should look like this" is through slicing.  The only modification I'd suggest to the FSH that Gino arleady supplied is that if the discriminator type is <code>#value</code> than the assignment rule (last line of code in the example) should use <code>(exactly)</code> so that it uses the <code>value[x]</code> constraint (rather than the <code>pattern[x]</code> constraint).  Or, if you prefer, keep using <code>=</code> without <code>(exactly)</code> and change the discriminator type to <code>#pattern</code>.</p>



<a name="218645091"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/meta.profile%20requirement/near/218645091" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/meta.2Eprofile.20requirement.html#218645091">(Dec 03 2020 at 01:50)</a>:</h4>
<blockquote>
<p>(also, we should add FSH to the list of langauges in Zulip)</p>
</blockquote>
<p>Based on <a href="https://zulip.com/help/format-your-message-using-markdown#code">this</a>, it looks like Zulip uses <a href="https://pygments.org/docs/lexers/">Pygments</a> -- but it's not clear if we can congifure our own language implementations for a Zulip instance.  If someone can confirm that this is possible, we'd be glad to look into it!</p>



<a name="218695924"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/meta.profile%20requirement/near/218695924" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Saul Kravitz <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/meta.2Eprofile.20requirement.html#218695924">(Dec 03 2020 at 14:01)</a>:</h4>
<p>Thanks <span class="user-mention" data-user-id="222054">@Gino Canessa</span> and <span class="user-mention" data-user-id="191469">@Chris Moesel</span> .   </p>
<p>As a comment on the FHIR Specification:  This seems like a remarkably complicated way to express a simple requirement.</p>



<a name="218700341"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/meta.profile%20requirement/near/218700341" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/meta.2Eprofile.20requirement.html#218700341">(Dec 03 2020 at 14:35)</a>:</h4>
<p><span class="user-mention" data-user-id="215604">@Saul Kravitz</span> -- at one point we were thinking of adding a "ginzu slicing" feature to FHIR Shorthand that would hide some of the complication in things like this.  If we had ginzu slicing, then you would not need to specify any of the slicing rules in this specific use case (since it is a fairly common one); SUSHI would figure them out for you based on how you define the individual slices.</p>
<p>I don't know if we'll ever do ginzu slicing, but if it's something you'd like to see, then let us know so we can tabulate the votes. ;-)</p>



<a name="218700544"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/meta.profile%20requirement/near/218700544" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/meta.2Eprofile.20requirement.html#218700544">(Dec 03 2020 at 14:36)</a>:</h4>
<p>Oh, by the way, I just realized, in Gino's example, you also don't need the line <code>* profile[supportedProfile] 1..1 MS</code> since the <code>contains</code> rule already specifies that information.</p>



<a name="218759086"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/meta.profile%20requirement/near/218759086" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Saul Kravitz <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/meta.2Eprofile.20requirement.html#218759086">(Dec 03 2020 at 21:47)</a>:</h4>
<p>Works beautifully -- thx.<br>
<a href="https://build.fhir.org/ig/HL7/carin-bb/branches/v1.0.1/StructureDefinition-C4BB-ExplanationOfBenefit-Inpatient-Institutional.html#profile">https://build.fhir.org/ig/HL7/carin-bb/branches/v1.0.1/StructureDefinition-C4BB-ExplanationOfBenefit-Inpatient-Institutional.html#profile</a></p>



<a name="218762507"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/meta.profile%20requirement/near/218762507" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Saul Kravitz <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/meta.2Eprofile.20requirement.html#218762507">(Dec 03 2020 at 22:15)</a>:</h4>
<p><span class="user-mention" data-user-id="191469">@Chris Moesel</span>  I don't know what ginzu slicing is, but... would it be worthwhile having a library of standard RuleSets (macros) that users could insert? Or even better parameterized Rulesets.</p>
<ul>
<li>insert RequireProfile(Canonical(profilename))</li>
</ul>
<p>Currently I had to do this in each profile, and I had to define the ruleset following what you guys told me like a monkey.</p>
<ul>
<li>insert Metaprofile-supportedProfile-slice</li>
<li>meta.profile[supportedProfile] = Canonical(C4BBOrganization)</li>
</ul>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
