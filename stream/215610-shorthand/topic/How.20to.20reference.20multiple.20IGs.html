---
layout: page
title: "FHIR Chat  · How to reference multiple IGs · shorthand"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/index.html">shorthand</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/How.20to.20reference.20multiple.20IGs.html">How to reference multiple IGs</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="248641002"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/How%20to%20reference%20multiple%20IGs/near/248641002" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikas Sinha <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/How.20to.20reference.20multiple.20IGs.html#248641002">(Aug 06 2021 at 17:20)</a>:</h4>
<p>I am new to FSH and have not been able to find any documentation to fix the issue I am currently encountering. Basically, for my custom IG I need to reference both the core FHIR v4 and US Core v3 specifications. I included the 2 dependencies in my package.json file as shown below. I need this so that I can extend my Patient resource using the USCore Patient profile but for other resources like Encounter I want to extend the core FHIR profile. </p>
<p>"dependencies": {<br>
    "hl7.fhir.r4.core": "4.0.1",<br>
    "hl7.fhir.us.core": "3.1.0"<br>
  },<br>
In my FSH file for Patient I have referenced the URL of the USCore Patient profile (see below)</p>
<p>Profile: RWDPatient<br>
Parent: <a href="http://hl7.org/fhir/us/core/StructureDefinition/us-core-patient">http://hl7.org/fhir/us/core/StructureDefinition/us-core-patient</a><br>
Id: RWDPatient</p>
<p>Now when I trigger the SUSHI script it returns the Error "Parent <a href="http://hl7.org/fhir/us/core/StructureDefinition/us-core-patient">http://hl7.org/fhir/us/core/StructureDefinition/us-core-patient</a> not found  for RWDPatient"</p>
<p>Am I missing any step? What is the correct way of implementing my requirement?<br>
Appreciate any help to resolve my issue.</p>



<a name="248643274"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/How%20to%20reference%20multiple%20IGs/near/248643274" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/How.20to.20reference.20multiple.20IGs.html#248643274">(Aug 06 2021 at 17:37)</a>:</h4>
<p>you say that you've put the dependencies in your "package.json" file, but I'm not sure what file that is since there is no package.json file that the publisher or sushi looks at (as far as I know).  You want to declare your dependencies in the sushi-config.yaml file:</p>
<div class="codehilite"><pre><span></span><code>fhirVersion: 4.0.1
dependencies:
  hl7.fhir.us.core: 4.0.1
  hl7.fhir.us.core: 3.1.0
</code></pre></div>



<a name="248644977"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/How%20to%20reference%20multiple%20IGs/near/248644977" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/How.20to.20reference.20multiple.20IGs.html#248644977">(Aug 06 2021 at 17:51)</a>:</h4>
<p>Isn't that an invalid "dependencies" object, since it has two values associated with the same key? <a href="https://yaml.org/spec/1.2/spec.html#mapping">https://yaml.org/spec/1.2/spec.html#mapping</a> says:</p>
<blockquote>
<p>a mapping node is an unordered set of key: value node pairs, with the restriction that <em>each of the keys is unique</em></p>
</blockquote>



<a name="248652046"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/How%20to%20reference%20multiple%20IGs/near/248652046" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikas Sinha <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/How.20to.20reference.20multiple.20IGs.html#248652046">(Aug 06 2021 at 18:45)</a>:</h4>
<p>Thanks Jean. I was able to make it run using the following update to the sushi-config.yaml file. I corrected the package name for core fhir specification. In addition, SUSHI made me add the URI and version as I have mentioned below </p>
<p>dependencies:<br>
  hl7.fhir.r4.core:<br>
    uri: <a href="http://my-fhir-ig.org/ImplementationGuide/123">http://my-fhir-ig.org/ImplementationGuide/123</a><br>
    version: 4.0.1<br>
  hl7.fhir.us.core: 3.1.0</p>



<a name="248675935"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/How%20to%20reference%20multiple%20IGs/near/248675935" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/How.20to.20reference.20multiple.20IGs.html#248675935">(Aug 06 2021 at 22:29)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191315">Josh Mandel</span> <a href="#narrow/stream/215610-shorthand/topic/How.20to.20reference.20multiple.20IGs/near/248644977">said</a>:</p>
<blockquote>
<p>Isn't that an invalid "dependencies" object, since it has two values associated with the same key? <a href="https://yaml.org/spec/1.2/spec.html#mapping">https://yaml.org/spec/1.2/spec.html#mapping</a> says:</p>
<blockquote>
<p>a mapping node is an unordered set of key: value node pairs, with the restriction that <em>each of the keys is unique</em></p>
</blockquote>
</blockquote>
<p>Yeah, I made a copy and paste error.  One of those should be the base fhir dependency and the other US-Core.</p>



<a name="248676109"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/How%20to%20reference%20multiple%20IGs/near/248676109" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/How.20to.20reference.20multiple.20IGs.html#248676109">(Aug 06 2021 at 22:32)</a>:</h4>
<p><span class="user-mention silent" data-user-id="431090">Vikas Sinha</span> <a href="#narrow/stream/215610-shorthand/topic/How.20to.20reference.20multiple.20IGs/near/248652046">said</a>:</p>
<blockquote>
<p>Thanks Jean. I was able to make it run using the following update to the sushi-config.yaml file. I corrected the package name for core fhir specification. In addition, SUSHI made me add the URI and version as I have mentioned below </p>
<p>dependencies:<br>
  hl7.fhir.r4.core:<br>
    uri: <a href="http://my-fhir-ig.org/ImplementationGuide/123">http://my-fhir-ig.org/ImplementationGuide/123</a><br>
    version: 4.0.1<br>
  hl7.fhir.us.core: 3.1.0</p>
</blockquote>
<p>I'm not sure that what you put is correct.  The uri for fhir.r4.core defintely shouldn't be there.  You should look at the documentation at <a href="https://fshschool.org/docs/sushi/configuration/">https://fshschool.org/docs/sushi/configuration/</a></p>
<p>Here is the recommended configuration:</p>
<div class="codehilite"><pre><span></span><code>id: fhir.us.example
canonical: http://hl7.org/fhir/us/example
name: ExampleIG
title: &quot;HL7 FHIR Implementation Guide: Example IG Release 1 - US Realm | STU1&quot;
description: An example IG that exercises many of the fields in a SUSHI configuration
status: draft
license: CC0-1.0
version: 0.1.0
fhirVersion: 4.0.1
copyrightYear: 2020+
releaseLabel: ci-build
publisher:
  name: HL7 International - US Realm Steering Committee
  url: http://www.hl7.org/Special/committees/usrealm/index.cfm
  email: usrsc@lists.HL7.org
dependencies:
  hl7.fhir.us.core: 3.1.0
</code></pre></div>



<a name="248690848"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/How%20to%20reference%20multiple%20IGs/near/248690848" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/How.20to.20reference.20multiple.20IGs.html#248690848">(Aug 07 2021 at 02:39)</a>:</h4>
<p><span class="user-mention" data-user-id="431090">@Vikas Sinha</span> be aware that having multiple profiles with the same canonical URL but different versions SHOULD be supported, but you may run into issues as it's not well tested.  So be on the lookout and holler if you find any.</p>



<a name="249749362"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/How%20to%20reference%20multiple%20IGs/near/249749362" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/How.20to.20reference.20multiple.20IGs.html#249749362">(Aug 17 2021 at 17:13)</a>:</h4>
<p>I can confirm, SUSHI has not been tested well for this use case.  If you declare a parent profile for which two versions exist in the dependencies, I think that the selection of which one to use will be arbitrary.  I'm not even sure if SUSHI will correctly work when you specify the version you want using a canonical form.  I agree w/ Lloyd that it <em>should</em> work -- but I'm not sure that it <em>does</em> work.  This may be an area in which we need to improve SUSHI.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
