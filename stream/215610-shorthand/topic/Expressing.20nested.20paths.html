---
layout: page
title: "FHIR Chat  · Expressing nested paths · shorthand"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/index.html">shorthand</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Expressing.20nested.20paths.html">Expressing nested paths</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="191481396"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Expressing%20nested%20paths/near/191481396" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Kramer <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Expressing.20nested.20paths.html#191481396">(Mar 23 2020 at 14:35)</a>:</h4>
<p>An issue came up in the context of populating Questionnaire and Questionnaire responses. These resources involve deeply nested paths and arrays. The current FSH syntax is (admittedly) awkward in cases like this, and gives rise to expressions like this: <code>* item[3].item[0].item[2].text = "Oral hygiene - functional ability during assessment period"</code>.  In the current grammar, the entire path has to be included in each rule. It's very index-heavy. So, we're exploring better ways to express this, perhaps escaping into YAML, perhaps something like YAML but with FSH-like values, or creating extensions to FSH grammar. <br>
The FSH-SUSHI team would appreciate feedback. Here's the discussion so far: <a href="https://github.com/FHIR/sushi/issues/291" target="_blank" title="https://github.com/FHIR/sushi/issues/291">https://github.com/FHIR/sushi/issues/291</a>.</p>



<a name="191624858"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Expressing%20nested%20paths/near/191624858" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Kramer <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Expressing.20nested.20paths.html#191624858">(Mar 24 2020 at 15:16)</a>:</h4>
<p>Here's one possible approach. It depends on having leading white space having meaning:<br>
Old way:</p>
<div class="codehilite"><pre><span></span>Instance: BetsySmithMDSResponse
InstanceOf: PACIOquestionaireResponse
* subject.reference  = &quot;Betsy Smith&quot;
* status = #completed
* item.text =  &quot;Section GG: Functional Abilities and Goals&quot;
* item.linkId = &quot;Section-37&quot;
* item.item.text =  &quot;Self-Care. Code the {patient&#39;s/resident&#39;s} usual performance at {admission} for each activity using the 6-point scale. If activity was not attempted at {admission}, code the reason. Code the {patient&#39;s/resident&#39;s} {discharge} goal(s) using the 6 point scale. Use of codes 07, 09, 10, or 88 is permissible to code {discharge} goal(s).&quot;
* item.item.linkId = &quot;Section-37/GG0130&quot;
* item[0].item[0].item[0].text = &quot;Oral hygiene - functional ability during 3D assessment period [CMS Assessment]&quot;
* item[0].item[0].item[0].linkId = &quot;Section-37/GG0130B1&quot;
* item[0].item[0].item[0].answer.valueReference = Reference(BetsySmithMDSOralHygiene)
* item[0].item[0].item[1].text = &quot;Eating - functional ability during 3D assessment period [CMS Assessment]&quot;
* item[0].item[0].item[1].linkId = &quot;Section-37/GG0130A1&quot;
* item[0].item[0].item[1].answer.valueReference = Reference(BetsySmithMDSEating)
</pre></div>


<p>Proposal:</p>
<div class="codehilite"><pre><span></span>Instance: BetsySmithMDSResponse
InstanceOf: PACIOquestionaireResponse
* subject.reference  = &quot;Betsy Smith&quot;
* status = #completed
* item:
    text =  &quot;Section GG: Functional Abilities and Goals&quot;
    linkId = &quot;Section-37&quot;
    item:
        text =  &quot;Self-Care. Code the {patient&#39;s/resident&#39;s} usual performance at {admission} for each activity using the 6-point scale. If activity was not attempted at {admission}, code the reason. Code the {patient&#39;s/resident&#39;s} {discharge} goal(s) using the 6 point scale. Use of codes 07, 09, 10, or 88 is permissible to code {discharge} goal(s).&quot;
        linkId = &quot;Section-37/GG0130&quot;
        item:
            text = &quot;Oral hygiene - functional ability during 3D assessment period [CMS Assessment]&quot;
            linkId = &quot;Section-37/GG0130B1&quot;
            answer.valueReference = Reference(BetsySmithMDSOralHygiene)
        item:
            text = &quot;Eating - functional ability during 3D assessment period [CMS Assessment]&quot;
            linkId = &quot;Section-37/GG0130A1&quot;
            answer.valueReference = Reference(BetsySmithMDSEating)
</pre></div>



<a name="191631280"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Expressing%20nested%20paths/near/191631280" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Expressing.20nested.20paths.html#191631280">(Mar 24 2020 at 15:55)</a>:</h4>
<p>I'd have to look at this some more, but off-hand I feel like parsing would be easier if we at least maintained the <code>*</code> on each line.  It's a good hint to the parser that we're on a new rule.  Otherwise we're probably giving up some of the other features of FSH that allow authors to format things as they wish (taking advantage of insignificant whitespace).</p>



<a name="191635531"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Expressing%20nested%20paths/near/191635531" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vassil Peytchev <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Expressing.20nested.20paths.html#191635531">(Mar 24 2020 at 16:21)</a>:</h4>
<p>In general, I think, either have white space always being significant (Python), or never have it being significant.</p>



<a name="191644103"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Expressing%20nested%20paths/near/191644103" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Kramer <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Expressing.20nested.20paths.html#191644103">(Mar 24 2020 at 17:19)</a>:</h4>
<p>To make white space insignificant, there has to be a mechanism for grouping. If curly brackets are used, it would be something like this:</p>
<div class="codehilite"><pre><span></span>Instance: BetsySmithMDSResponse
InstanceOf: PACIOquestionaireResponse
* subject.reference  = &quot;Betsy Smith&quot;
* status = #completed
* item {
    * text =  &quot;Section GG: Functional Abilities and Goals&quot;
    * linkId = &quot;Section-37&quot;
    * item {
        * text =  &quot;Self-Care. Code the {patient&#39;s/resident&#39;s} usual performance at {admission} for each activity using the 6-point scale. If activity was not attempted at {admission}, code the reason. Code the {patient&#39;s/resident&#39;s} {discharge} goal(s) using the 6 point scale. Use of codes 07, 09, 10, or 88 is permissible to code {discharge} goal(s).&quot;
        * linkId = &quot;Section-37/GG0130&quot;
        * item {
            * text = &quot;Oral hygiene - functional ability during 3D assessment period [CMS Assessment]&quot;
            * linkId = &quot;Section-37/GG0130B1&quot;
            * answer.valueReference = Reference(BetsySmithMDSOralHygiene)
        }
        * item {
            * text = &quot;Eating - functional ability during 3D assessment period [CMS Assessment]&quot;
            * linkId = &quot;Section-37/GG0130A1&quot;
            * answer.valueReference = Reference(BetsySmithMDSEating)
        }
    }
}
</pre></div>


<p>This is indented for readability, but the indentation is not meaningful.<br>
PS - I added the <code>*</code> back in for <span class="user-mention" data-user-id="191469">@Chris Moesel</span></p>



<a name="191644739"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Expressing%20nested%20paths/near/191644739" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Expressing.20nested.20paths.html#191644739">(Mar 24 2020 at 17:23)</a>:</h4>
<ol>
<li>could we benefit from aliases here?</li>
</ol>



<a name="191644796"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Expressing%20nested%20paths/near/191644796" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Expressing.20nested.20paths.html#191644796">(Mar 24 2020 at 17:23)</a>:</h4>
<ol start="2">
<li>personally I prefer an indented syntax</li>
</ol>



<a name="191645946"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Expressing%20nested%20paths/near/191645946" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Expressing.20nested.20paths.html#191645946">(Mar 24 2020 at 17:31)</a>:</h4>
<p>Ha.  I was about to say "Personally, I prefer the syntax with some kind of delimeters (e.g., <code>{</code> <code>}</code> or some other symbol(s)) if you're going to nest."  So, I guess it's pretty subjective.</p>



<a name="191646114"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Expressing%20nested%20paths/near/191646114" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Expressing.20nested.20paths.html#191646114">(Mar 24 2020 at 17:32)</a>:</h4>
<p>yes, i 'm Pascal / Python flavour, with a twist of YAML, so obviously it's a preference</p>



<a name="191646166"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Expressing%20nested%20paths/near/191646166" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Expressing.20nested.20paths.html#191646166">(Mar 24 2020 at 17:32)</a>:</h4>
<p>I'm not sure exactly what you are proposing w/ aiases <span class="user-mention" data-user-id="191832">@Jose Costa Teixeira</span>, but on the GitHub issue I floated an example of how this would be done using "inline" references: <a href="https://github.com/FHIR/sushi/issues/291#issuecomment-602604604" target="_blank" title="https://github.com/FHIR/sushi/issues/291#issuecomment-602604604">https://github.com/FHIR/sushi/issues/291#issuecomment-602604604</a></p>



<a name="191646209"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Expressing%20nested%20paths/near/191646209" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Expressing.20nested.20paths.html#191646209">(Mar 24 2020 at 17:32)</a>:</h4>
<p>what about aliases? if we are going to repeat * item[0].item[0].item[0] many times, we may call it something</p>



<a name="191646250"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Expressing%20nested%20paths/near/191646250" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Expressing.20nested.20paths.html#191646250">(Mar 24 2020 at 17:33)</a>:</h4>
<p>à la yaml ;)</p>



<a name="191648136"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Expressing%20nested%20paths/near/191648136" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Expressing.20nested.20paths.html#191648136">(Mar 24 2020 at 17:46)</a>:</h4>
<p>as you do that.. you head away from one of the nice parts of shorthand, that being more git friendly. And you head into the complexity of json/xm that you are saving us from. If we head that direction, then it seems we should just stick with StructureDefinition</p>



<a name="191648282"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Expressing%20nested%20paths/near/191648282" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Expressing.20nested.20paths.html#191648282">(Mar 24 2020 at 17:47)</a>:</h4>
<p>that gives me an idea.<br>
Could we embed a fhirpath inside shorthand? for these edge cases (without changing the syntax)</p>



<a name="191651202"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Expressing%20nested%20paths/near/191651202" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Expressing.20nested.20paths.html#191651202">(Mar 24 2020 at 18:09)</a>:</h4>
<p><span class="user-mention" data-user-id="191404">@John Moehrke</span> -- when we first looked at using YAML (back in December), we came to a similar conclusion at the time: it didn't seem to be different enough from the status quo to justify the investment.  I guess now we're trying to see what we've learned since then and if there is a more intelligent approach that could keep the strengths of FSH while mitigating some of the weaknesses (mainly being verbosity and repetition in this case).</p>



<a name="191651258"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Expressing%20nested%20paths/near/191651258" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Expressing.20nested.20paths.html#191651258">(Mar 24 2020 at 18:09)</a>:</h4>
<p>But I think it's wise for you to remind us to keep the original goals of FSH in mind.  So thank you!</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
