---
layout: page
title: "FHIR Chat  · example FSH DocumentReference with a Binary · shorthand"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/index.html">shorthand</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/example.20FSH.20DocumentReference.20with.20a.20Binary.html">example FSH DocumentReference with a Binary</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="222611155"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/example%20FSH%20DocumentReference%20with%20a%20Binary/near/222611155" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/example.20FSH.20DocumentReference.20with.20a.20Binary.html#222611155">(Jan 13 2021 at 16:57)</a>:</h4>
<p>DocumentReference.content.attachment.url can point at a Binary.. but I can't figure out how to get Sushi to like that. It seems to think that because the element is url datatype that it can't contain a Reference. but it can.</p>



<a name="222635798"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/example%20FSH%20DocumentReference%20with%20a%20Binary/near/222635798" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/example.20FSH.20DocumentReference.20with.20a.20Binary.html#222635798">(Jan 13 2021 at 19:50)</a>:</h4>
<p>SUSHI does require <code>url</code> datatypes to be set to a URL (e.g., a <em>string</em> URL).  Are you trying to set it using something like <code>Reference(MyBinary)</code> -- and expecting it to resolve to relative path <code>Binary/MyBinaryId</code>?  I can see why you would <em>want</em> that to work, but the trouble is that the only hint we have that it might be a valid approach is in the narrative content about <code>Attachment.url</code>. To support this in FSH/SUSHI, we'd need to make it valid to use <code>Reference(...)</code> for <em>all</em> <code>url</code> types.  Maybe that's fine -- and something we should consider -- but for now it's not supported; so you'll need to just put <code>"Binary/MyBinaryId"</code>.</p>



<a name="222636141"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/example%20FSH%20DocumentReference%20with%20a%20Binary/near/222636141" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/example.20FSH.20DocumentReference.20with.20a.20Binary.html#222636141">(Jan 13 2021 at 19:53)</a>:</h4>
<p>I feared that would happen... yes the intention was that sometimes .url would be manipulated like a Reference.reference, but sometimes it would be a natural url.</p>



<a name="222647508"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/example%20FSH%20DocumentReference%20with%20a%20Binary/near/222647508" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/example.20FSH.20DocumentReference.20with.20a.20Binary.html#222647508">(Jan 13 2021 at 21:22)</a>:</h4>
<p>It would be great to have a Url() function just like the Canonical() function. And also to be able to compose urls, so I can do siteurl + resourceId.</p>



<a name="222661422"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/example%20FSH%20DocumentReference%20with%20a%20Binary/near/222661422" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/example.20FSH.20DocumentReference.20with.20a.20Binary.html#222661422">(Jan 13 2021 at 23:21)</a>:</h4>
<p>so.,.. is it possible to get this fix into the this release of sushi too?</p>



<a name="222661577"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/example%20FSH%20DocumentReference%20with%20a%20Binary/near/222661577" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/example.20FSH.20DocumentReference.20with.20a.20Binary.html#222661577">(Jan 13 2021 at 23:23)</a>:</h4>
<p>it is especially important for examples of the MHD Provide Document Bundle transaction which is a Transaction Bundle with a List(submissionset) + some DocumentReference(s) with their Binary(s)... thus in the bundle it needs to be appropriate bundle references, that the server fixes up to server side url references...</p>



<a name="222661846"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/example%20FSH%20DocumentReference%20with%20a%20Binary/near/222661846" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/example.20FSH.20DocumentReference.20with.20a.20Binary.html#222661846">(Jan 13 2021 at 23:26)</a>:</h4>
<p>No, I don't think this will make it into the release.  For one, it's actually a change to the FSH spec itself (or at least a looser interpretation of it).  So we probably need to think on it a bit more.</p>
<p>Is there a reason you can't just put in the relative URLs as strings?  You should know the <code>type</code> and <code>id</code> at authoring time, so isn't it just setting the <code>url</code> to <code>{Type}/{id}</code> (for whatever type/id you're referring to)?</p>



<a name="222661937"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/example%20FSH%20DocumentReference%20with%20a%20Binary/near/222661937" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/example.20FSH.20DocumentReference.20with.20a.20Binary.html#222661937">(Jan 13 2021 at 23:27)</a>:</h4>
<p>I will try that. but I think they are expecting the fullUrl value is used... not sure, will need to try some stuff</p>



<a name="222662001"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/example%20FSH%20DocumentReference%20with%20a%20Binary/near/222662001" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/example.20FSH.20DocumentReference.20with.20a.20Binary.html#222662001">(Jan 13 2021 at 23:28)</a>:</h4>
<p>this is where we need the reference servers to speak up on how they implemented it.  There was discussion with them long time ago.</p>



<a name="222663109"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/example%20FSH%20DocumentReference%20with%20a%20Binary/near/222663109" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/example.20FSH.20DocumentReference.20with.20a.20Binary.html#222663109">(Jan 13 2021 at 23:41)</a>:</h4>
<p>I don't think I understand how one would arrive at the full URL value from a simple <code>Reference</code> anyway (using SUSHI).  I don't think there is anyway for SUSHI to know what the base URL should be for an instance (unless the author specifically provides it).</p>



<a name="222663305"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/example%20FSH%20DocumentReference%20with%20a%20Binary/near/222663305" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/example.20FSH.20DocumentReference.20with.20a.20Binary.html#222663305">(Jan 13 2021 at 23:44)</a>:</h4>
<p>no, in the bundle the DocumentReference.content.attachment.url would contain the same value that Bundle.entry[x].fullUrl for the entry the Binary is in.</p>



<a name="222663795"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/example%20FSH%20DocumentReference%20with%20a%20Binary/near/222663795" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/example.20FSH.20DocumentReference.20with.20a.20Binary.html#222663795">(Jan 13 2021 at 23:50)</a>:</h4>
<p>see this xml example  <a href="https://github.com/usnistgov/asbestos/blob/master/asbestos-mhd/src/test/resources/gov/nist/asbestos/mhd/translation/shared/bundle.xml">https://github.com/usnistgov/asbestos/blob/master/asbestos-mhd/src/test/resources/gov/nist/asbestos/mhd/translation/shared/bundle.xml</a></p>



<a name="222665541"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/example%20FSH%20DocumentReference%20with%20a%20Binary/near/222665541" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/example.20FSH.20DocumentReference.20with.20a.20Binary.html#222665541">(Jan 14 2021 at 00:10)</a>:</h4>
<p>OK, right.  But we can't translate that into a general behavior that FSH/SUSHI should follow.  That's some very specific behavior there (needing to know to search for the entry that contains the matching Binary and then take the URL from the entry's fullUrl field).  That's not like anything that FSH currently supports.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
