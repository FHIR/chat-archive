---
layout: page
title: "FHIR Chat  · References to custom resources · shorthand"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/index.html">shorthand</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/References.20to.20custom.20resources.html">References to custom resources</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="241537215"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/References%20to%20custom%20resources/near/241537215" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Martin Höcker <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/References.20to.20custom.20resources.html#241537215">(Jun 04 2021 at 13:49)</a>:</h4>
<p>How strict should SUSHI be with References to custom resources? The following <code>FSH</code> works on the master branch (not released on npm yet!):</p>
<div class="codehilite"><pre><span></span><code>Resource: TestResource
* isValid 1..1 boolean &quot;this is something&quot;


Instance: MyTestResource
InstanceOf: TestResource
* isValid = true


Instance: MyPatient
InstanceOf: Patient
* name.given = &quot;Bob&quot;
* extension.url = &quot;http://example.com/test&quot;
* extension.valueReference = Reference(MyTestResource)
</code></pre></div>
<p>It produces the following MyPatient in json-form: </p>
<div class="codehilite" data-code-language="JSON"><pre><span></span><code><span class="p">{</span>
  <span class="nt">"resourceType"</span><span class="p">:</span> <span class="s2">"Patient"</span><span class="p">,</span>
  <span class="nt">"id"</span><span class="p">:</span> <span class="s2">"MyPatient"</span><span class="p">,</span>
  <span class="nt">"name"</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nt">"given"</span><span class="p">:</span> <span class="p">[</span>
        <span class="s2">"Bob"</span>
      <span class="p">]</span>
    <span class="p">}</span>
  <span class="p">],</span>
  <span class="nt">"extension"</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nt">"url"</span><span class="p">:</span> <span class="s2">"http://example.com/test"</span><span class="p">,</span>
      <span class="nt">"valueReference"</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">"reference"</span><span class="p">:</span> <span class="s2">"TestResource/MyTestResource"</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
</code></pre></div>
<p>I realize that the usage of custom-resources <a href="#narrow/stream/179166-implementers/topic/Linking.20to.20custom.20resource.20types">is strongly discouraged</a>. But if  for some reason I have to use them, I would like to do it in the minimally breaking way possible. I like the idea by <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> <a href="#narrow/stream/179166-implementers/topic/Custom.20Resources.2C.20Basic-derived.20resources.20and.20Logical.20Models">for handling references to custom resources</a>: Use the datatype <code>uri</code> instead of <code>Reference</code>.</p>
<p>Would it make sense that SUSHI emits a warning when the user defines a standard resource that references a custom resource? This would inform the user that even the instance of the standard resource is no longer FHIR compliant, and could help establish best-practices for working with custom resources.</p>



<a name="241545453"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/References%20to%20custom%20resources/near/241545453" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/References.20to.20custom.20resources.html#241545453">(Jun 04 2021 at 14:42)</a>:</h4>
<p><span class="user-mention" data-user-id="217988">@Martin Höcker</span> - that's a great question, and kudos to you for finding and using an advanced feature only merged to master <em>yesterday</em>!  I think what you propose (issuing a warning when an instance of a standard resource references a custom resource) makes sense.  I imagine it would be the same for a profile of a standard resource that references a custom resource.  What about an extension definition that constrains <code>valueReference</code> to a custom resource type? Is the definition of that extension warnable? or only if you use that extension in a profile or instance of a standard resource?</p>



<a name="241558627"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/References%20to%20custom%20resources/near/241558627" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/References.20to.20custom.20resources.html#241558627">(Jun 04 2021 at 16:15)</a>:</h4>
<p>I would think that if you are going to support  custom resources, and if you are going to warn about them, then you need to warn on any use. An extension could be defined in an IG and, other than that, never used within the IG. That should trigger a warning because it's an issue that any user of the extension is going to need to be aware of.</p>



<a name="241685664"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/References%20to%20custom%20resources/near/241685664" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Martin Höcker <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/References.20to.20custom.20resources.html#241685664">(Jun 06 2021 at 10:48)</a>:</h4>
<p><span class="user-mention" data-user-id="191469">@Chris Moesel</span> The extension-definition that constraints valueReference to a custom resource is an interesting point. I understand <span class="user-mention" data-user-id="191380">@Elliot Silver</span>'s argument that if we warn about standard resources referencing custom resources, we should also warn when the standard resource is a StructureDefinition. </p>
<p>But I think it would be OK to omit the warning in this special case, maybe on the condition that StructureDefinition.context constaints usage to one or more custom resources.</p>



<a name="241685700"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/References%20to%20custom%20resources/near/241685700" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Martin Höcker <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/References.20to.20custom.20resources.html#241685700">(Jun 06 2021 at 10:49)</a>:</h4>
<p>Side question: Would it be possible to "transpile" definitions of custom resources to profiles of the Basic resource?</p>



<a name="241691000"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/References%20to%20custom%20resources/near/241691000" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/References.20to.20custom.20resources.html#241691000">(Jun 06 2021 at 13:05)</a>:</h4>
<p>The publisher will error/warn on non-resolved content.  Why should FSH take that on?  (And why is FSH supporting custom resources at all??)</p>



<a name="241716339"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/References%20to%20custom%20resources/near/241716339" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Kramer <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/References.20to.20custom.20resources.html#241716339">(Jun 06 2021 at 23:40)</a>:</h4>
<p>Lloyd, we believe some work groups will migrate along a path where they eventually design, create, and maintain their base resources in FSH.</p>



<a name="241727890"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/References%20to%20custom%20resources/near/241727890" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/References.20to.20custom.20resources.html#241727890">(Jun 07 2021 at 04:35)</a>:</h4>
<p>Creating resources is non-conformant unless you're HL7.  I'm not understanding why FSH would support non-conformant behavior?</p>



<a name="241729232"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/References%20to%20custom%20resources/near/241729232" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/References.20to.20custom.20resources.html#241729232">(Jun 07 2021 at 04:54)</a>:</h4>
<p>We want to support the HL7 use case.  But in addition, FSH users <em>have</em> specifically requested support for defining custom FHIR resources. The most common reason is if they want to exhange proprietary data <em>in-house</em> using the FHIR exchange API.  If you need to design a custom API for in house use anyway, why not piggyback on the FHIR spec rather than creating something from scratch?  We specifically warn in the docs that you must not use custom resources for inter-organizational data exchange.</p>



<a name="241731488"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/References%20to%20custom%20resources/near/241731488" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/References.20to.20custom.20resources.html#241731488">(Jun 07 2021 at 05:43)</a>:</h4>
<p>I'm interested in report backs from such organizations - what challenges do they have with an approach like that?</p>



<a name="241774559"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/References%20to%20custom%20resources/near/241774559" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/References.20to.20custom.20resources.html#241774559">(Jun 07 2021 at 13:18)</a>:</h4>
<p>Do you also warn that they can't use standard XML or JSON schemas, can't use public test servers or registries and can't use standard validation or publication tooling?</p>



<a name="241774590"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/References%20to%20custom%20resources/near/241774590" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/References.20to.20custom.20resources.html#241774590">(Jun 07 2021 at 13:18)</a>:</h4>
<p>And that any such systems are explicitly non-conformant?</p>



<a name="241775181"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/References%20to%20custom%20resources/near/241775181" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/References.20to.20custom.20resources.html#241775181">(Jun 07 2021 at 13:23)</a>:</h4>
<p>We note that they do not work w/ the FHIR IG Publisher.  It seems kind of obvious to me that custom resources wouldn't work with the standard FHIR schemas, public test servers, validators, or registries.  Do you really think we need to point that out?</p>



<a name="241775652"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/References%20to%20custom%20resources/near/241775652" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Pyke <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/References.20to.20custom.20resources.html#241775652">(Jun 07 2021 at 13:26)</a>:</h4>
<p>It should probably have a large warning with all that content and a special flag in sushi-config.yaml to shut it up</p>



<a name="241775751"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/References%20to%20custom%20resources/near/241775751" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Pyke <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/References.20to.20custom.20resources.html#241775751">(Jun 07 2021 at 13:27)</a>:</h4>
<p>something like:  Non-conformant FHIR creation warning: false</p>



<a name="241783485"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/References%20to%20custom%20resources/near/241783485" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/References.20to.20custom.20resources.html#241783485">(Jun 07 2021 at 14:21)</a>:</h4>
<p>The more red flags and warning bells we can raise when implementers pursue non-conformant solutions, the better.</p>



<a name="241783522"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/References%20to%20custom%20resources/near/241783522" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/References.20to.20custom.20resources.html#241783522">(Jun 07 2021 at 14:21)</a>:</h4>
<p>Might also be useful to nudge them towards Basic as an alternative.</p>



<a name="241791421"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/References%20to%20custom%20resources/near/241791421" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/References.20to.20custom.20resources.html#241791421">(Jun 07 2021 at 15:11)</a>:</h4>
<p>Yeah, it might be interesting to support something like <span class="user-mention" data-user-id="217988">@Martin Höcker</span> suggested above -- an automated solution to make <code>Basic</code> variants of the resources.  But I don't think you can define new extensions inline in a profile, right?  So that will result in a new extension for every element in the Resource, right?</p>



<a name="241791793"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/References%20to%20custom%20resources/near/241791793" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/References.20to.20custom.20resources.html#241791793">(Jun 07 2021 at 15:13)</a>:</h4>
<blockquote>
<p>Do you really think we need to point that out?</p>
</blockquote>
<p>Sadly the answer is: I don't believe that you have to, and I still can't believe that you have to, in spite of years of evidence that, yes, you do have to</p>



<a name="241792037"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/References%20to%20custom%20resources/near/241792037" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/References.20to.20custom.20resources.html#241792037">(Jun 07 2021 at 15:14)</a>:</h4>
<blockquote>
<p>So that will result in a new extension for every element in the Resource, right?</p>
</blockquote>
<p>Yes. At least technically. I'm not sure all the tools support it but they can be contained resources but that would change the extension ids.</p>



<a name="241792104"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/References%20to%20custom%20resources/near/241792104" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/References.20to.20custom.20resources.html#241792104">(Jun 07 2021 at 15:15)</a>:</h4>
<p>But.... you don't necessarily have to publish them? (I mean, there's no way not to right now but that doesn't have to be final?)</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
