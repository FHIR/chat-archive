---
layout: page
title: "FHIR Chat  · Defining nested inline extensions · shorthand"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/index.html">shorthand</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Defining.20nested.20inline.20extensions.html">Defining nested inline extensions</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="217188583"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Defining%20nested%20inline%20extensions/near/217188583" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Defining.20nested.20inline.20extensions.html#217188583">(Nov 18 2020 at 19:59)</a>:</h4>
<p>I thought I had done this before but I can't find any examples in my IGuides.  I want to create a complex inline extension where one of the extension slices has extensions:</p>
<div class="codehilite"><pre><span></span><code>Extension: ItemRule
Id: extension-itemRule
Description: &quot;Provides a set of rules that provide logic on which questions should be navigated to&quot;
* extension contains ruleType 1..1 MS and rules 1..* MS and skipTo 1..1 MS
* extension[ruleType].value[x] only code
* extension[ruleType].valueCode from ItemRuleType (required)
* extension[skipTo].value[x] only string
* extension[rules] contains operator 1..1 MS and value 1..1 MS and fact 1..1 MS
* extension[rules][operator].value[x] only code
* extension[rules][operator].valueCode from ItemRuleOperatorType (required)
* extension[rules][operator].value[x] only string
* extension[rules][fact].value[x] only string
</code></pre></div>
<p>When I do this, I get an error about not being to create the operator slice:</p>
<div class="codehilite"><pre><span></span><code>error Cannot create operator slice. No slicing found for Extension.extension:rules.
  File: /Users/jeanduteau/Documents/DDIWork/IBM-BEST/datastandards/questionnaire-fsh/Questionnaire.fsh
  Line: 179
</code></pre></div>
<p>Help me Obi-Wan Kenobi, you're my only hope!</p>



<a name="217195776"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Defining%20nested%20inline%20extensions/near/217195776" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Defining.20nested.20inline.20extensions.html#217195776">(Nov 18 2020 at 20:58)</a>:</h4>
<p>This is confusing for sure, but I think that <code>extension[rules] contains...</code> actually <em>re-slices</em> the <code>rules</code> slice -- because <code>extension[rules]</code> is still referring to the <code>rules</code> extension itself.</p>
<p>I think what you really want is <code>extension[rules].extension contains...</code> and then refer to the sub-extensions by <code>extension[rules].extension[operator]</code>, etc.</p>



<a name="217196537"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Defining%20nested%20inline%20extensions/near/217196537" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Defining.20nested.20inline.20extensions.html#217196537">(Nov 18 2020 at 21:04)</a>:</h4>
<p>I just tested this in FSH Online and it worked:</p>
<div class="codehilite"><pre><span></span><code>Extension: ItemRule
Id: extension-itemRule
Description: &quot;Provides a set of rules that provide logic on which questions should be navigated to&quot;
* extension contains ruleType 1..1 MS and rules 1..* MS and skipTo 1..1 MS
* extension[ruleType].value[x] only code
* extension[ruleType].valueCode from ItemRuleType (required)
* extension[skipTo].value[x] only string
* extension[rules].extension contains operator 1..1 MS and value 1..1 MS and fact 1..1 MS
* extension[rules].extension[operator].value[x] only code
* extension[rules].extension[operator].valueCode from ItemRuleOperatorType (required)
* extension[rules].extension[fact].value[x] only string

ValueSet: ItemRuleType

ValueSet: ItemRuleOperatorType
</code></pre></div>
<p>Note that in your original FSH you tried to constrain the operator to a <code>code</code> and a <code>string</code>, so I removed the 2nd constraint.</p>



<a name="217199434"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Defining%20nested%20inline%20extensions/near/217199434" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Defining.20nested.20inline.20extensions.html#217199434">(Nov 18 2020 at 21:31)</a>:</h4>
<p>thanks.  that makes way more sense</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
