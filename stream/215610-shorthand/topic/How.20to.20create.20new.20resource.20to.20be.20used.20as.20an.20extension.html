---
layout: page
title: "FHIR Chat  · How to create new resource to be used as an extension · shorthand"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/index.html">shorthand</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/How.20to.20create.20new.20resource.20to.20be.20used.20as.20an.20extension.html">How to create new resource to be used as an extension</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="277939308"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/How%20to%20create%20new%20resource%20to%20be%20used%20as%20an%20extension/near/277939308" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Al Pivonka <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/How.20to.20create.20new.20resource.20to.20be.20used.20as.20an.20extension.html#277939308">(Apr 05 2022 at 20:31)</a>:</h4>
<p>I may be going about his all wrong. <br>
We have some custom groupings of attributes that we need to store at the Questionnaire.item groups of "settings"(general, scale, data). <br>
I've created a Resource "QuestionnaireItemSettings" that I hope to add to Questionnaire.item as an extension (is this a good idea or not?)</p>
<p>The resource is basically the following after generation to json.</p>
<div class="codehilite"><pre><span></span><code>{
&quot;general&quot;:{
   ...
}
&quot;data&quot; :{
 ....
}
&quot;scale&quot; :{
 ...
}
}
</code></pre></div>
<div class="codehilite"><pre><span></span><code>...     Indicates attributes just not shown.
</code></pre></div>
<p>I'd like to reuse how questionnaire.maxvalue is defined and add a max/min value to my Resource above. </p>
<p>So I copied the defintion of questionnaire.maxvalue and saw it formats the attribute as </p>
<ul>
<li>minValue 0..1  only date or dateTime or time or instant or decimal or integer "minValue"</li>
</ul>
<p>Yet FSH complains about the keyword 'only'</p>
<div class="codehilite"><pre><span></span><code>error As a FHIR choice data type, the specified data.minValue for AddElementRule must end with &#39;[x]&#39;.
</code></pre></div>
<p>How would one define a minValue to allow the use of those datatypes ?</p>



<a name="278022533"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/How%20to%20create%20new%20resource%20to%20be%20used%20as%20an%20extension/near/278022533" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/How.20to.20create.20new.20resource.20to.20be.20used.20as.20an.20extension.html#278022533">(Apr 06 2022 at 13:24)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="193364">@Al Pivonka</span>.  I think you've raised a few questions here.  I'll try to respond as best I can, but let me know if anything is unclear.</p>
<p>While FSH allows you to create custom resources, this should be done with care -- as you can't expect any other systems to support them.  Typically, custom resources would only be used in an enclosed system where you control all of the FHIR-related software and can build in support for your custom resources.  Custom resources are <em>not</em> generally a good solution for cross-system interoperability.</p>
<p>As for carrying a custom resource in an extension, this would likely also cause issues (even in a closed system as described above).  The <a href="http://hl7.org/fhir/R4/extensibility.html#extension">Extension definition</a> only allows a particular list of types (see the <em>Notes</em> in the previously linked definition) -- so you couldn't define an extension whose value is a custom resource.</p>
<p>If you want to add <code>general</code>, <code>data</code>, and <code>scale</code> attributes to <code>Questionnaire.item</code>, the most common approach would be to create a complex extension for them (assuming they should always be grouped together).  You would then apply that extension to <code>Questionnaire.item</code>.  The <a href="http://hl7.org/fhir/R4/extensibility.html">extensibility page</a> discusses simple and complex extensions.  The FHIR Shorthand spec discusses extensions w/ examples in the <a href="http://hl7.org/fhir/uv/shorthand/reference.html#defining-extensions">Defining Extensions</a> section.   It describes how to apply them to a profile in the <a href="http://hl7.org/fhir/uv/shorthand/reference.html#contains-rules-for-extensions">Contains Rules for Extensions</a> section.  Since <code>Questionnaire.item</code> is recursive, if you wanted to apply this extension to all recursions, you should also see Jean Duteau's recent thread <a href="#narrow/stream/215610-shorthand/topic/HowTo.3A.20Recursive.20element.20restrictions">here</a> (and my response to it).</p>
<p>As for your last question about the <code>only</code> rule -- you're getting that error because FHIR choices (where more than one data type is allowed) <em>must</em> have names ending in <code>[x]</code>.  So to make it work, you would have to say <code>minValue[x]</code>.  But <code>minValue[x]</code> is actually a property of <code>ElementDefinition</code>, which is the backing type for all elements -- so depending on your use case, it might be more appropriate to set it via a <a href="http://hl7.org/fhir/uv/shorthand/reference.html#caret-paths">caret path assignment rule</a>.</p>



<a name="278034731"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/How%20to%20create%20new%20resource%20to%20be%20used%20as%20an%20extension/near/278034731" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Al Pivonka <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/How.20to.20create.20new.20resource.20to.20be.20used.20as.20an.20extension.html#278034731">(Apr 06 2022 at 14:50)</a>:</h4>
<p><span class="user-mention" data-user-id="191469">@Chris Moesel</span> thank you for your response. <br>
Great information and I will continue to push onward.</p>



<a name="278064774"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/How%20to%20create%20new%20resource%20to%20be%20used%20as%20an%20extension/near/278064774" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Al Pivonka <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/How.20to.20create.20new.20resource.20to.20be.20used.20as.20an.20extension.html#278064774">(Apr 06 2022 at 18:16)</a>:</h4>
<p><span class="user-mention" data-user-id="191469">@Chris Moesel</span> </p>
<p>You may know.. I'm searching GITHUB for examples of what I'm trying to do; " I know they will be things I will have to interpret from those examples"</p>
<p>I'm hoping to find std. tag that is used for FHIR-FSH within GITHUB.   Any Ideas?</p>
<p>Any assistance you can provide would be greatly appreciated.</p>



<a name="278069008"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/How%20to%20create%20new%20resource%20to%20be%20used%20as%20an%20extension/near/278069008" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/How.20to.20create.20new.20resource.20to.20be.20used.20as.20an.20extension.html#278069008">(Apr 06 2022 at 18:48)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="193364">@Al Pivonka</span> -- I'm afraid I don't really have any tips for searching GitHub.  If it's helpful, <a href="https://fshschool.org/fsh-finder/">FSH Finder</a> lists IGs that use FSH.  So you could look through them for examples.  <a href="https://fshschool.org/FSHOnline/#/">FSH Online</a> also has some built-in examples.  Otherwise, searching Zulip can be very helpful too.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
