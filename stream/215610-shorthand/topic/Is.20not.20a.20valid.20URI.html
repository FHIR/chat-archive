---
layout: page
title: "FHIR Chat  · Is not a valid URI · shorthand"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/index.html">shorthand</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Is.20not.20a.20valid.20URI.html">Is not a valid URI</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="204440170"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Is%20not%20a%20valid%20URI/near/204440170" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Muthu Muthuraj <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Is.20not.20a.20valid.20URI.html#204440170">(Jul 20 2020 at 15:53)</a>:</h4>
<p>I am pretty new to FSH and learning things.... I am doing profiling for my teams and I have the following questions. I am enclosing two short hand scripts, the first one works, and the second one does not. The variation is the former is a ValueSet and the later is a CodeSystem. Can you experts help point out what am I doing wrong here?</p>
<p>Working version.</p>
<p>Snippet from the Specimen profile FSH Script<br>
=======================================</p>
<ul>
<li>identifier.type 1..1</li>
<li>identifier.type from xxx-specimen-id-types</li>
</ul>
<p>The Specimen ID types ValueSet derived from HL7 types<br>
================================================<br>
Alias:  IDT = <a href="http://hl7.org/fhir/ValueSet/identifier-type">http://hl7.org/fhir/ValueSet/identifier-type</a><br>
ValueSet:       xxxSpecimentIdentifierTypes<br>
Id:             xxx-specimen-id-types<br>
Title:          "xxx Specimen Identifier types"<br>
Description:    "Specimen Identifier types supported by xxx"</p>
<ul>
<li>IDT#PLAC  "Specimen's identifier if accessioned outside of xxx"</li>
<li>IDT#ACSN  "Accession ID - If accessioned using xxx workflow"</li>
<li>IDT#FILL  "Specifimen identifier for internal tracking in xxx"</li>
</ul>
<p>This compiles perfectly, no issues.</p>
<p>Snippet from the ServiceRequest profile FSH Script<br>
=======================================</p>
<ul>
<li>identifier.type 1..1</li>
<li>identifier.type from xxx-order-id-types</li>
</ul>
<p>The Order ID types CodeSystem of our own list<br>
=======================================<br>
CodeSystem: xxxOrderIdentifierTypes<br>
Id: xxx-order-id-types<br>
Title: "Various types of identifiers that can be used in diagnostic order to xxx"<br>
Description: "Various types of identifiers that can be used in diagnostic order to xxx"</p>
<ul>
<li>#MR   "MR" "Medical record number"</li>
<li>#ACSN "ACSN" "Accession ID"</li>
<li>#PRN  "PRN" "Physician ID"</li>
<li>#NPI "NPI" "Physician NPI"</li>
<li>#ACCN "ACCN" "Account Number" </li>
<li>#PLAC "PLAC" "Placer Order ID"</li>
<li>#FILL "FILL" "Filler Order ID"</li>
<li>#PREQ "PREQ" "Placer Request ID"</li>
<li>#REQ  "REQ" "Request ID"</li>
</ul>
<p>The above fails<br>
error Resolved value "xxx-order-id-types" is not a valid URI.</p>
<p>My custom extensions to ID types are only PRN, NPI PREQ and REQ the rest are in the ValueSet <a href="http://hl7.org/fhir/ValueSet/identifier-type">http://hl7.org/fhir/ValueSet/identifier-type</a>.  I did not find instruction how to form a ValueSet (if possible) derived partly from mulitple ValueSets intermixed with our own CodeSystem values.</p>
<p>Thanks for your help in advance.</p>



<a name="204441215"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Is%20not%20a%20valid%20URI/near/204441215" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Is.20not.20a.20valid.20URI.html#204441215">(Jul 20 2020 at 16:01)</a>:</h4>
<p>The error is in your ServiceRequest FSH script and it is because you can't bind an element to a code system.</p>



<a name="204450393"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Is%20not%20a%20valid%20URI/near/204450393" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Is.20not.20a.20valid.20URI.html#204450393">(Jul 20 2020 at 17:23)</a>:</h4>
<p>Thanks, <span class="user-mention" data-user-id="192166">@Jean Duteau</span>.  I think you nailed it.  That said, it seems that SUSHI should provide a more helpful error message there.  I'll add an issue to improve that.</p>



<a name="204451489"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Is%20not%20a%20valid%20URI/near/204451489" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Muthu Muthuraj <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Is.20not.20a.20valid.20URI.html#204451489">(Jul 20 2020 at 17:33)</a>:</h4>
<p>Can you guys provide me guidance on what is the right way to use Code Systems. SUSHI site tells us how to define one, but does not tell us how to use them with an example?</p>



<a name="204451660"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Is%20not%20a%20valid%20URI/near/204451660" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Is.20not.20a.20valid.20URI.html#204451660">(Jul 20 2020 at 17:34)</a>:</h4>
<p>I told you in our private chat.  Your CodeSystem is just fine. You now need to create a ValueSet that references the codes you want.  And then the Profile binds the ServiceRequest.identifier.type to that value set.  Just like you did in your Specimen profile.</p>



<a name="204451893"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Is%20not%20a%20valid%20URI/near/204451893" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Muthu Muthuraj <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Is.20not.20a.20valid.20URI.html#204451893">(Jul 20 2020 at 17:36)</a>:</h4>
<p>I just saw it! Thanks Jean!</p>



<a name="204453415"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Is%20not%20a%20valid%20URI/near/204453415" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Muthu Muthuraj <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Is.20not.20a.20valid.20URI.html#204453415">(Jul 20 2020 at 17:50)</a>:</h4>
<p><span class="user-mention silent" data-user-id="192166">Jean Duteau</span> <a href="#narrow/pm-with/192166,285733-pm/near/204446647">said</a>:</p>
<blockquote>
<p>your codesystem is just fine.  it's the fact that profile elements can't reference a codesystem directly.  profile elements always have to reference a valueset.  so you would need to define a value set that references the codesystem and then the profile element reference that value set.</p>
</blockquote>
<p>Can I do this to resolve the problem? I am still getting the same error:</p>
<ul>
<li>identifier.type 1..1</li>
<li>identifier.type from xxx-order-id-vs</li>
</ul>
<p>ValueSet:   xxxOrderIdVS<br>
Id:         xxx-order-id-vs<br>
Title:      "Valid Order ID types for xxx"<br>
Description:    "Valid Order ID types for xxx"</p>
<p>*include codes from CodeSystem  xxx-order-id-cs</p>



<a name="204453907"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Is%20not%20a%20valid%20URI/near/204453907" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Freiter <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Is.20not.20a.20valid.20URI.html#204453907">(Jul 20 2020 at 17:55)</a>:</h4>
<p>Instead of <code>include codes from CodeSystem xxx-order-id-cs</code>,  the FSH syntax is <code>include codes from system xxx-order-id-cs</code>.</p>



<a name="204454351"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Is%20not%20a%20valid%20URI/near/204454351" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Is.20not.20a.20valid.20URI.html#204454351">(Jul 20 2020 at 17:58)</a>:</h4>
<p>Also... you need a space between the <code>*</code> and <code>include</code> (i.e., <code>* include</code> not <code>*include</code>).</p>



<a name="204454578"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Is%20not%20a%20valid%20URI/near/204454578" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Is.20not.20a.20valid.20URI.html#204454578">(Jul 20 2020 at 18:00)</a>:</h4>
<p>And in case you were not aware, you don't have to reference it by the <code>Id</code> -- you can reference it by the name if that is easier (the name is the part after <code>CodeSystem:</code>).</p>



<a name="204456556"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Is%20not%20a%20valid%20URI/near/204456556" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Muthu Muthuraj <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Is.20not.20a.20valid.20URI.html#204456556">(Jul 20 2020 at 18:16)</a>:</h4>
<p>Thank you for pointing out the typo on *include.... Here is what I have</p>
<ul>
<li>identifier.type 1..1</li>
<li>identifier.type from xxx-order-id-vs</li>
</ul>
<p>ValueSet:   xxxOrderIDTypeVS<br>
Id:         xxx-order-id-vs<br>
Title:      "Valid Order requests for xxx"<br>
Description:    "Valid Order requests for xxx"</p>
<ul>
<li>include codes from system xxx-order-id-cs</li>
</ul>
<p>CodeSystem: xxxOrderIdentifierCS<br>
Id: xxx-order-id-cs<br>
Title: "Various types of identifiers that can be used in diagnostic order to xxx"<br>
Description: "Various types of identifiers that can be used in diagnostic order to xxx"</p>
<ul>
<li>#MR   "MR" "Medical record number"</li>
<li>#ACSN "ACSN" "Accession ID"</li>
<li>#PRN  "PRN" "Physician ID requestForms.PhysicianID"</li>
<li>#NPI  "NPI" "Physician NPI"<br>
...<br>
...</li>
</ul>
<p>error mismatched input 'codes' expecting CARET_SEQUENCE<br>
  File: xxxOrderIdTypeVS.fsh<br>
  Line: 6</p>
<p>error Error in parsing: Cannot read property 'getText' of null<br>
  File: xxxOrderIdTypeVS.fsh<br>
  Line: 1 - 6</p>
<p>error Resolved value "xxx-order-id-vs" is not a valid URI.<br>
  File: xxxOrder.fsh<br>
  Line: 44</p>



<a name="204457816"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Is%20not%20a%20valid%20URI/near/204457816" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Is.20not.20a.20valid.20URI.html#204457816">(Jul 20 2020 at 18:27)</a>:</h4>
<p><span class="user-mention silent" data-user-id="239822">Nick Freiter</span> <a href="#narrow/stream/215610-shorthand/topic/Is.20not.20a.20valid.20URI/near/204453907">said</a>:</p>
<blockquote>
<p>Instead of <code>include codes from CodeSystem xxx-order-id-cs</code>,  the FSH syntax is <code>include codes from system xxx-order-id-cs</code>.</p>
</blockquote>
<p><span class="user-mention" data-user-id="239822">@Nick Freiter</span> With SUSHI 0.13.1, * include codes from ... fails with the errors that Muthu posted above.</p>
<p><span class="user-mention" data-user-id="285733">@Muthu Muthuraj</span> You need to have SUSHI 0.14.0 to use the * include codes from ...  line.<br>
Here is a test file that processes successfully in SUSHI 0.13.1 (which I suspect you are using) or 0.14.0.<br>
<a href="/user_uploads/10155/DTXlHFsEMQG9Yq0E-LGwVWhY/TestScript.fsh">TestScript.fsh</a></p>



<a name="204458554"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Is%20not%20a%20valid%20URI/near/204458554" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Muthu Muthuraj <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Is.20not.20a.20valid.20URI.html#204458554">(Jul 20 2020 at 18:33)</a>:</h4>
<p>Running SUSHI v0.12.5</p>
<p>I guess I have not been upgrading in a while... I will have to figure out how to update...</p>



<a name="204458584"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Is%20not%20a%20valid%20URI/near/204458584" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Is.20not.20a.20valid.20URI.html#204458584">(Jul 20 2020 at 18:34)</a>:</h4>
<p>npm install -g fsh-sushi :)</p>



<a name="204458850"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Is%20not%20a%20valid%20URI/near/204458850" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Muthu Muthuraj <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Is.20not.20a.20valid.20URI.html#204458850">(Jul 20 2020 at 18:36)</a>:</h4>
<p><span class="user-mention silent" data-user-id="192166">Jean Duteau</span> <a href="#narrow/stream/215610-shorthand/topic/Is.20not.20a.20valid.20URI/near/204458584">said</a>:</p>
<blockquote>
<p>npm install -g fsh-sushi :)</p>
</blockquote>
<p>Alright!! That fixed it :) Where do I send your bottle of red wine from my side .. :)</p>



<a name="204459449"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Is%20not%20a%20valid%20URI/near/204459449" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Hay <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Is.20not.20a.20valid.20URI.html#204459449">(Jul 20 2020 at 18:42)</a>:</h4>
<p>I'lll send you the address - you can trust me to pass it on...</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
