---
layout: page
title: "FHIR Chat  · Duplicate codes in Sushi generated example · shorthand"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/index.html">shorthand</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Duplicate.20codes.20in.20Sushi.20generated.20example.html">Duplicate codes in Sushi generated example</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="268613764"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Duplicate%20codes%20in%20Sushi%20generated%20example/near/268613764" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nathan Davis <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Duplicate.20codes.20in.20Sushi.20generated.20example.html#268613764">(Jan 19 2022 at 22:36)</a>:</h4>
<p>I have a profile in which I set the Observation.code to a LOINC code (patternCodeableConcept by default).  Code snippet...</p>
<div class="codehilite"><pre><span></span><code>Profile: BodyMassIndex
Parent: BMI
...
* code = LNC#39156-5
</code></pre></div>
<p>I have an example of this profile that gives instance data for it.....</p>
<div class="codehilite"><pre><span></span><code>Instance: bmi-example
InstanceOf: BodyMassIndex
Description: &quot;Body Mass Index example&quot;
...
* code = LNC#39156-5 &quot;Body mass index (BMI) [Ratio]&quot;
</code></pre></div>
<p>Sushi then generates the example with both codes in it.</p>
<div class="codehilite"><pre><span></span><code>  &quot;code&quot;: {
    &quot;coding&quot;: [
      {
        &quot;code&quot;: &quot;39156-5&quot;,
        &quot;system&quot;: &quot;http://loinc.org&quot;,
        &quot;display&quot;: &quot;Body mass index (BMI) [Ratio]&quot;
      },
      {
        &quot;system&quot;: &quot;http://loinc.org&quot;,
        &quot;code&quot;: &quot;39156-5&quot;
      }
    ]
  },
</code></pre></div>
<p>I appropriately get an error when running the publisher that there are too many Observation.code instances.  What am I doing wrong?</p>



<a name="268617748"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Duplicate%20codes%20in%20Sushi%20generated%20example/near/268617748" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Duplicate.20codes.20in.20Sushi.20generated.20example.html#268617748">(Jan 19 2022 at 23:10)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="191411">@Nathan Davis</span>. I think you stumbled upon a recently discovered bug in SUSHI (see <a href="https://github.com/FHIR/sushi/issues/1008">SUSHI#1008</a>).  Basically, in some cases, if a profile fixes a value to an element, but the parent profile has also already fixed the same values, then SUSHI will output both values in instances of the child profile.  Now, ideally SUSHI should handle this, but currently it does not.</p>
<p>The best way to avoid this bug is by not re-specifying fixed values for elements that are already properly fixed to a value.  In your case, you're setting <code>code</code> to the LOINC code for BMI, but this is probably not necessary, because I think your parent profile (<code>BMI</code>) has already done that.  So... if you remove the line that fixes <code>code</code> to <code>LNC#39156-5</code>, then this problem goes away (and your profile still requires it - but it just inherits it from the parent instead).  If that is an acceptable solution, then I recommend it.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
