---
layout: page
title: "FHIR Chat  · External extension used in instance · shorthand"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/index.html">shorthand</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/External.20extension.20used.20in.20instance.html">External extension used in instance</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="246679584"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/External%20extension%20used%20in%20instance/near/246679584" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/External.20extension.20used.20in.20instance.html#246679584">(Jul 21 2021 at 04:52)</a>:</h4>
<p>Are all three of these extension uses  valid? For some reason only the third is accepted. </p>
<p>The extension is defined in an IG that this IG has a dependency on.</p>
<div class="codehilite"><pre><span></span><code>Alias: $ext-ca-aboriginalidentitygroup = http://hl7.org/fhir/ca/baseline/StructureDefinition/ext-aboriginalidentitygroup
Alias: $cs-hl7-dar  = http://terminology.hl7.org/CodeSystem/data-absent-reason

Instance: CaPatientInstance
InstanceOf: http://hl7.org/fhir/ca/baseline/StructureDefinition/profile-patient
Title: &quot;Sample CA Baseline Patient Instance&quot;
Description: &quot;Patient instance conforming to CA Baseline PatientProfile&quot;
Usage: #example

* extension[$ext-ca-aboriginalidentitygroup].valueCoding = $cs-hl7-dar#not-asked

* extension[http://hl7.org/fhir/ca/baseline/StructureDefinition/ext-aboriginalidentitygroup].valueCoding = $cs-hl7-dar#not-asked

* extension[+].url = &quot;http://hl7.org/fhir/ca/baseline/StructureDefinition/ext-aboriginalidentitygroup&quot;
* extension[=].valueCoding = $cs-hl7-dar#not-asked
</code></pre></div>



<a name="246716260"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/External%20extension%20used%20in%20instance/near/246716260" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/External.20extension.20used.20in.20instance.html#246716260">(Jul 21 2021 at 13:06)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="191380">@Elliot Silver</span>.  All three approaches should work.  I have a simple demonstration here w/ one of the extensions that comes in FHIR core: <a href="https://fshschool.org/FSHOnline/#/share/3iwFJAz">https://fshschool.org/FSHOnline/#/share/3iwFJAz</a></p>
<p>The problem you're running into is that the particular extension you're using has an incomplete snapshot.  This actually has come up before with this very same extension!  See: <a href="#narrow/stream/215610-shorthand/topic/How.20to.20add.20extension.20using.20Sushi/near/226152809">https://chat.fhir.org/#narrow/stream/215610-shorthand/topic/How.20to.20add.20extension.20using.20Sushi/near/226152809</a></p>



<a name="246733006"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/External%20extension%20used%20in%20instance/near/246733006" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/External.20extension.20used.20in.20instance.html#246733006">(Jul 21 2021 at 15:06)</a>:</h4>
<p>Wow, thanks for tracking that down. So this comes from the Simplifier issue of not generating snapshots?</p>



<a name="246751418"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/External%20extension%20used%20in%20instance/near/246751418" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/External.20extension.20used.20in.20instance.html#246751418">(Jul 21 2021 at 17:26)</a>:</h4>
<p>No.  There <em>is</em> a snapshot.  The problem is that the snapshot is <em>incomplete</em>.  More specifically, it does not contain the base <code>Extension.value[x]</code> element in it.  It contains the slice (<code>Extension.value[x]:valueCoding</code>), but not the actual element that is _being_ sliced.</p>



<a name="246755249"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/External%20extension%20used%20in%20instance/near/246755249" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/External.20extension.20used.20in.20instance.html#246755249">(Jul 21 2021 at 17:53)</a>:</h4>
<p>That sounds like an error with Simplifier, rather than CA Baseline, correct? </p>
<p>(<span class="user-mention" data-user-id="203235">@Ward Weistra</span>, <span class="user-mention" data-user-id="222582">@Sheridan Cook</span> , <span class="user-mention" data-user-id="193795">@Joel Francis</span> )</p>



<a name="246758292"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/External%20extension%20used%20in%20instance/near/246758292" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/External.20extension.20used.20in.20instance.html#246758292">(Jul 21 2021 at 18:16)</a>:</h4>
<p>I don't know how that snapshot was generated, so it's hard to say...</p>



<a name="246759775"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/External%20extension%20used%20in%20instance/near/246759775" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/External.20extension.20used.20in.20instance.html#246759775">(Jul 21 2021 at 18:29)</a>:</h4>
<p>My understanding is that they're developing the profiles in Simplifier, then downloading the package, and using it as input for the IG publisher. (Which also means we're straying from FSH concerns.)</p>



<a name="247189416"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/External%20extension%20used%20in%20instance/near/247189416" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ward Weistra <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/External.20extension.20used.20in.20instance.html#247189416">(Jul 26 2021 at 11:17)</a>:</h4>
<p><span class="user-mention" data-user-id="191380">@Elliot Silver</span> I don't think this is on the Simplifier side either.<br>
Indeed, CA Core is being developed on Simplifier, but without snapshots (as is good practice in development): <a href="https://simplifier.net/CanadianFHIRBaselineProfilesCA-Core/ExtensionAboriginalIdentityGroup/~xml">https://simplifier.net/CanadianFHIRBaselineProfilesCA-Core/ExtensionAboriginalIdentityGroup/~xml</a>. If you download the resource with snapshot from Simplifier (Download &gt; Download snapshot as JSON) it includes the <code>Extension.value[x]</code> element in the snapshot that is missing from the published version.</p>
<p>Even if they would give them with snapshots to the IG publisher, I assume the IG publisher would regenerate them. But I'm not sure about that.</p>



<a name="247216861"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/External%20extension%20used%20in%20instance/near/247216861" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/External.20extension.20used.20in.20instance.html#247216861">(Jul 26 2021 at 15:17)</a>:</h4>
<p>Hi Ward, it looks like I misunderstood the CA Baseline workflow -- they are editing the IG by hand and using GitHub sync to copy into simplifier. As I dig further, it doesn't look like a Simplifier issue. Sorry.</p>



<a name="247302398"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/External%20extension%20used%20in%20instance/near/247302398" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ward Weistra <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/External.20extension.20used.20in.20instance.html#247302398">(Jul 27 2021 at 07:32)</a>:</h4>
<p><span class="user-mention" data-user-id="191380">@Elliot Silver</span> No worries, always happy to help debugging!</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
