---
layout: page
title: "FHIR Chat  · valueSet with regex · shorthand"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/index.html">shorthand</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/valueSet.20with.20regex.html">valueSet with regex</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="249358380"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/valueSet%20with%20regex/near/249358380" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/valueSet.20with.20regex.html#249358380">(Aug 13 2021 at 13:14)</a>:</h4>
<p>I am trying to re-create the iso3166-1-3 valueSet in sushi (for some reason that valueset does not work today).</p>
<p>All I need to do is include all the codes from iso3166 given a regex, but I can't get that regex to work. I have pulled the regex from the above valueset, but don't seem to be able to get sushi valueset include regex syntax right</p>
<div class="codehilite"><pre><span></span><code>* include codes from system ISO where code regex &quot;[A-Z]{3}&quot;
</code></pre></div>



<a name="249364615"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/valueSet%20with%20regex/near/249364615" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Freiter <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/valueSet.20with.20regex.html#249364615">(Aug 13 2021 at 14:08)</a>:</h4>
<p>For regex codes, the FSH requires that the value <code>"[A-Z]{3}"</code> be specified using regex syntax, indicated by leading and trailing <code>/</code>. So in this case the value would be <code>/[A-Z]{3}/</code>. See this <a href="https://fshschool.org/FSHOnline/#/share/2XpExIh">example</a>.</p>



<a name="249367199"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/valueSet%20with%20regex/near/249367199" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/valueSet.20with.20regex.html#249367199">(Aug 13 2021 at 14:29)</a>:</h4>
<p>thanks. I forgot to check fsh school.. I was focused on the shorthand specification that simply indicated regex and pointed at the FHIR core where what I had was fine. So this special pattern should be in the shorthand specification</p>



<a name="249369838"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/valueSet%20with%20regex/near/249369838" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Freiter <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/valueSet.20with.20regex.html#249369838">(Aug 13 2021 at 14:50)</a>:</h4>
<p>Yeah you're right, it isn't very well documented.</p>



<a name="249369883"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/valueSet%20with%20regex/near/249369883" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Freiter <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/valueSet.20with.20regex.html#249369883">(Aug 13 2021 at 14:51)</a>:</h4>
<p>Or rather isn't documented at all in the spec</p>



<a name="249370407"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/valueSet%20with%20regex/near/249370407" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/valueSet.20with.20regex.html#249370407">(Aug 13 2021 at 14:55)</a>:</h4>
<p>my position is that it is documented... and it is documented to be different than it actually is.</p>



<a name="249378829"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/valueSet%20with%20regex/near/249378829" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Freiter <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/valueSet.20with.20regex.html#249378829">(Aug 13 2021 at 16:01)</a>:</h4>
<p>Where are you seeing it documented? I don't see any place in the shorthand spec where we discuss the syntax for a regular expression in a <code>ValueSet</code> include statement.</p>



<a name="249379389"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/valueSet%20with%20regex/near/249379389" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/valueSet.20with.20regex.html#249379389">(Aug 13 2021 at 16:05)</a>:</h4>
<p><a href="https://build.fhir.org/ig/HL7/fhir-shorthand/reference.html#filters">https://build.fhir.org/ig/HL7/fhir-shorthand/reference.html#filters</a></p>



<a name="249379454"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/valueSet%20with%20regex/near/249379454" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/valueSet.20with.20regex.html#249379454">(Aug 13 2021 at 16:06)</a>:</h4>
<div class="codehilite"><pre><span></span><code>A filter is a logical statement in the form {property} {operator} {value}, where operator is chosen from the FilterOperator value set. Not all operators in that value set are valid for all code systems. The property and value are dependent on the code system. For choices for the most common code systems, see the FHIR documentation on filters.
</code></pre></div>



<a name="249379468"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/valueSet%20with%20regex/near/249379468" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/valueSet.20with.20regex.html#249379468">(Aug 13 2021 at 16:06)</a>:</h4>
<p>which I followed the link</p>



<a name="249379767"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/valueSet%20with%20regex/near/249379767" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/valueSet.20with.20regex.html#249379767">(Aug 13 2021 at 16:09)</a>:</h4>
<p>hmm, I thought that at one of those FHIR core links was something helpful.. but I don't find it..</p>



<a name="249379782"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/valueSet%20with%20regex/near/249379782" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Kramer <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/valueSet.20with.20regex.html#249379782">(Aug 13 2021 at 16:09)</a>:</h4>
<p>If it doesn't work, it might be that ISO is either unknown to the terminology server or that code system doesn't expose the property "code" in FHIR.</p>



<a name="249379813"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/valueSet%20with%20regex/near/249379813" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/valueSet.20with.20regex.html#249379813">(Aug 13 2021 at 16:09)</a>:</h4>
<p>what I did find, because I was focused on 3166-1-3; was to look at that and pull the regex out of that.</p>



<a name="249379899"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/valueSet%20with%20regex/near/249379899" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Kramer <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/valueSet.20with.20regex.html#249379899">(Aug 13 2021 at 16:10)</a>:</h4>
<p>John, you can probably get around it using an invariant</p>



<a name="249379914"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/valueSet%20with%20regex/near/249379914" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/valueSet.20with.20regex.html#249379914">(Aug 13 2021 at 16:10)</a>:</h4>
<p><span class="user-mention" data-user-id="191447">@Mark Kramer</span> I got sushi to work...  <span class="user-mention" data-user-id="239822">@Nick Freiter</span> explained my problem</p>



<a name="249379946"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/valueSet%20with%20regex/near/249379946" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Kramer <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/valueSet.20with.20regex.html#249379946">(Aug 13 2021 at 16:10)</a>:</h4>
<p><span aria-label="+1" class="emoji emoji-1f44d" role="img" title="+1">:+1:</span></p>



<a name="249379948"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/valueSet%20with%20regex/near/249379948" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/valueSet.20with.20regex.html#249379948">(Aug 13 2021 at 16:10)</a>:</h4>
<p>I am stuck on a vocabulary support issue.. but that is down in the vocabulary stream</p>



<a name="249380010"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/valueSet%20with%20regex/near/249380010" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/valueSet.20with.20regex.html#249380010">(Aug 13 2021 at 16:11)</a>:</h4>
<p>my residual sushi problem is that it was not clear reading shorthand specification how to do regex and that I needed to use <code>/</code> rather than <code>"</code></p>



<a name="249380020"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/valueSet%20with%20regex/near/249380020" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Freiter <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/valueSet.20with.20regex.html#249380020">(Aug 13 2021 at 16:11)</a>:</h4>
<p>But <span class="user-mention" data-user-id="191447">@Mark Kramer</span>, this does point to a problem in the shorthand spec. Namely that regex values are undocumented.</p>



<a name="249380208"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/valueSet%20with%20regex/near/249380208" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Kramer <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/valueSet.20with.20regex.html#249380208">(Aug 13 2021 at 16:13)</a>:</h4>
<p>We don't attempt to document property-operator-value combinations because they are specific to individual code systems. But Regex is an excellent example, it should be added.</p>



<a name="249380311"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/valueSet%20with%20regex/near/249380311" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/valueSet.20with.20regex.html#249380311">(Aug 13 2021 at 16:14)</a>:</h4>
<p>yup, should not need to define everything. A simple example likely would have been enough.</p>



<a name="249380349"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/valueSet%20with%20regex/near/249380349" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/valueSet.20with.20regex.html#249380349">(Aug 13 2021 at 16:14)</a>:</h4>
<p><code>* include codes from system urn:iso:std:iso:3166 where code regex /[A-Z]{3}/</code></p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
