---
layout: page
title: "FHIR Chat  · Open slicing forcing a minimum cardinality · shorthand"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/index.html">shorthand</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Open.20slicing.20forcing.20a.20minimum.20cardinality.html">Open slicing forcing a minimum cardinality</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="222623957"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Open%20slicing%20forcing%20a%20minimum%20cardinality/near/222623957" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Open.20slicing.20forcing.20a.20minimum.20cardinality.html#222623957">(Jan 13 2021 at 18:24)</a>:</h4>
<p>I am setting up slicing on AdverseEvent and I want an open slice where at least one slice is fixed to a specific type or profile.  I'm sure I've done this before and I have the following:</p>
<div class="codehilite"><pre><span></span><code>* suspectEntity ^slicing.discriminator.type = #profile
* suspectEntity ^slicing.discriminator.path = &quot;type&quot;
* suspectEntity ^slicing.rules = #open
* suspectEntity ^slicing.description = &quot;Slice based on the allowed suspect entity.&quot;
* suspectEntity contains Immunization 1..1 MS
* suspectEntity[Immunization].instance only Reference(ICSRImmunization)
</code></pre></div>
<p>In my example instance, I have the following:</p>
<div class="codehilite"><pre><span></span><code>Instance: VAERSExampleEvent
InstanceOf: VAERSAdverseEvent
* suspectEntity[0].instance = Reference(VAERSExampleImmunization)
* suspectEntity[0].causality.productRelatedness = &quot;Suspect&quot;
* suspectEntity[1].instance = Reference(VAERSHydrocortisoneAdministration)
* suspectEntity[1].causality.productRelatedness = &quot;Concomitant&quot;

Instance: VAERSExampleImmunization
InstanceOf: ICSRImmunization
</code></pre></div>
<p>I'm getting an error and it's a range of lines:</p>
<div class="codehilite"><pre><span></span><code>error Element AdverseEvent.suspectEntity:Immunization has minimum cardinality 1 but occurs 0 time(s).
  File: /Users/jeanduteau/Documents/DDIWork/IBM-BEST/fhir-icsr-ae-reporting/input/fsh/Examples.fsh
  Line: 327 - 339
</code></pre></div>



<a name="222624355"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Open%20slicing%20forcing%20a%20minimum%20cardinality/near/222624355" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Open.20slicing.20forcing.20a.20minimum.20cardinality.html#222624355">(Jan 13 2021 at 18:27)</a>:</h4>
<p>as I wrote that, I remembered specifying the slice name and when I did that, the error went away.  So SUSHI is looking <em>explicitly</em> for the slice name?</p>



<a name="222625368"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Open%20slicing%20forcing%20a%20minimum%20cardinality/near/222625368" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> ryan moehrke <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Open.20slicing.20forcing.20a.20minimum.20cardinality.html#222625368">(Jan 13 2021 at 18:34)</a>:</h4>
<p>your slicing path looks like it's pointing to suspectEntity.type which does not look like it exists. I think you want "instance.resolve()" no?</p>



<a name="222625439"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Open%20slicing%20forcing%20a%20minimum%20cardinality/near/222625439" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Open.20slicing.20forcing.20a.20minimum.20cardinality.html#222625439">(Jan 13 2021 at 18:35)</a>:</h4>
<p>yes, just figured that out after I got Sushi to move forward. :)</p>



<a name="222625459"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Open%20slicing%20forcing%20a%20minimum%20cardinality/near/222625459" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Open.20slicing.20forcing.20a.20minimum.20cardinality.html#222625459">(Jan 13 2021 at 18:35)</a>:</h4>
<p>do I want instance.resolve()?  or just instance?</p>



<a name="222626349"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Open%20slicing%20forcing%20a%20minimum%20cardinality/near/222626349" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Open.20slicing.20forcing.20a.20minimum.20cardinality.html#222626349">(Jan 13 2021 at 18:42)</a>:</h4>
<p>ah, instance.resolve() is needed.</p>



<a name="222626686"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Open%20slicing%20forcing%20a%20minimum%20cardinality/near/222626686" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> ryan moehrke <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Open.20slicing.20forcing.20a.20minimum.20cardinality.html#222626686">(Jan 13 2021 at 18:45)</a>:</h4>
<p>Yup, if you were say, checking a Bundle.entry.resource you wouldn't use resolve because the resource is inline, but because it's a reference you need to add the resolve in order to do checks like profile etc. on that referenced resource.</p>



<a name="222626740"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Open%20slicing%20forcing%20a%20minimum%20cardinality/near/222626740" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Open.20slicing.20forcing.20a.20minimum.20cardinality.html#222626740">(Jan 13 2021 at 18:45)</a>:</h4>
<p>right.  thanks!</p>



<a name="222709369"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Open%20slicing%20forcing%20a%20minimum%20cardinality/near/222709369" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Freiter <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Open.20slicing.20forcing.20a.20minimum.20cardinality.html#222709369">(Jan 14 2021 at 12:19)</a>:</h4>
<p><span class="user-mention" data-user-id="192166">@Jean Duteau</span>, SUSHI is looking explicitly for the slice name. However, we've realized that this is probably a bit too limiting, so we have relaxed that constraint in <a href="#narrow/stream/215610-shorthand/topic/SUSHI.201.2E1.2E0">SUSHI 1.1.0</a> which was just released. In that version of SUSHI, you won't see that error about a missing slice.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
