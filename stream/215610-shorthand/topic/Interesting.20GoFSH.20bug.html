---
layout: page
title: "FHIR Chat  · Interesting GoFSH bug · shorthand"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/index.html">shorthand</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Interesting.20GoFSH.20bug.html">Interesting GoFSH bug</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="265418816"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Interesting%20GoFSH%20bug/near/265418816" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hank Lenzi <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Interesting.20GoFSH.20bug.html#265418816">(Dec 18 2021 at 13:35)</a>:</h4>
<p>Hello --<br>
Not exactly sure this is a real bug, but I just passed a bunch of files through gofsh and one of them (below) had a "/" in the "name:" (see below) and this caused gofsh to convert the file opening a new "/Cor" directory<br>
{<br>
    "resourceType": "CodeSystem",<br>
    "id": "br-core-codesystem-patient-raceethnicity-race",<br>
    "meta": {<br>
        "lastUpdated": "2020-03-11T18:20:19.538+00:00"<br>
    },<br>
    "language": "pt-BR",<br>
    "url": "<a href="http://www.saude.gov.br/fhir/r4/CodeSystem/BRRacaCor">http://www.saude.gov.br/fhir/r4/CodeSystem/BRRacaCor</a>",<br>
    "version": "201701A",<br>
    "name": "Raça/Cor",<br>
    "status": "active",<br>
    "experimental": false,<br>
    "date": "2020-03-11T18:20:40.0457007+00:00",<br>
    "publisher": "Ministério da Saúde do Brasil",<br>
    "description": "Códigos para representação de raça/cor.",<br>
    "content": "complete",<br>
    "concept": [<br>
        {<br>
            "code": "01",<br>
            "display": "Branca"<br>
        },<br>
        {<br>
            "code": "02",<br>
            "display": "Preta"<br>
        },<br>
        {<br>
            "code": "03",<br>
            "display": "Parda"<br>
        },<br>
        {<br>
            "code": "04",<br>
            "display": "Amarela"<br>
        },<br>
        {<br>
            "code": "05",<br>
            "display": "Indígena"<br>
        }<br>
    ]<br>
}</p>
<p><a href="/user_uploads/10155/4QCFxk-_Q5SEfSKPo_ei37Pq/image.png">image.png</a> </p>
<div class="message_inline_image"><a href="/user_uploads/10155/4QCFxk-_Q5SEfSKPo_ei37Pq/image.png" title="image.png"><img src="/user_uploads/10155/4QCFxk-_Q5SEfSKPo_ei37Pq/image.png"></a></div><p>This is interesting because, of course, per the spec for the string data type, this is not a bug (<a href="https://hl7.org/fhir/r4/datatypes.html#string">https://hl7.org/fhir/r4/datatypes.html#string</a>)<br>
Just thought you guys might like to know this.  I'd be interested in your comments.<br>
Cheers,<br>
Hank.</p>



<a name="265445741"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Interesting%20GoFSH%20bug/near/265445741" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hank Lenzi <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Interesting.20GoFSH.20bug.html#265445741">(Dec 18 2021 at 21:56)</a>:</h4>
<p>If this wasn't clear: "name":  "Raça/Cor" (← this string) caused gofsh to split into a new directory (the string means: "Race/Color").</p>



<a name="265447080"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Interesting%20GoFSH%20bug/near/265447080" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Interesting.20GoFSH.20bug.html#265447080">(Dec 18 2021 at 22:24)</a>:</h4>
<p>True that it’s not really a bug but the name of a profile is expected to be computer friendly so the / character would raise a warning</p>



<a name="265558657"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Interesting%20GoFSH%20bug/near/265558657" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mint Thompson <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Interesting.20GoFSH.20bug.html#265558657">(Dec 20 2021 at 12:57)</a>:</h4>
<p>This is absolutely a real bug, as a maliciously crafted input could end up overwriting a file in an arbitrary location. I'll let the team know ASAP.</p>



<a name="265567645"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Interesting%20GoFSH%20bug/near/265567645" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hank Lenzi <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Interesting.20GoFSH.20bug.html#265567645">(Dec 20 2021 at 14:09)</a>:</h4>
<p>Oh, boy I'm glad I reported this!</p>



<a name="265568166"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Interesting%20GoFSH%20bug/near/265568166" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Interesting.20GoFSH.20bug.html#265568166">(Dec 20 2021 at 14:13)</a>:</h4>
<p>Yep.  We'll work on a fix!</p>
<p><span class="user-mention" data-user-id="192166">@Jean Duteau</span> is correct, however, that names <em>should</em> not contain characters like <code>/</code>.  According to the spec, names should be alphanumeric.  More specifically, they should start with an uppercase letter and be followed by any combination of uppercase or lowercase letters, digits, and the underscore character (<code>_</code>).  That said, it is SHOULD, not SHALL.  See <a href="http://hl7.org/fhir/R4/structuredefinition-definitions.html#StructureDefinition.name">StructureDefinition.name</a>.</p>



<a name="265585792"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Interesting%20GoFSH%20bug/near/265585792" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Interesting.20GoFSH.20bug.html#265585792">(Dec 20 2021 at 16:31)</a>:</h4>
<p>Is that invariant enforced anywhere? (I’d never noticed the capitalization requirement before, and suspect many of my resources are non-conformant.) Actually, seems like something the IG publisher should check.</p>



<a name="265590543"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Interesting%20GoFSH%20bug/near/265590543" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Interesting.20GoFSH.20bug.html#265590543">(Dec 20 2021 at 17:11)</a>:</h4>
<p>sushi does throw an error, I recall that the IG publisher does "warn". I am sure I recall seeing that as a warn or error. ... but if you are not using sushi to start with (why would you be using GoFSH), or the IG publisher, or a validator, etc. I think in this case GoFSH is starting with an IG that was not formally published (or not lately)</p>



<a name="265590958"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Interesting%20GoFSH%20bug/near/265590958" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Interesting.20GoFSH.20bug.html#265590958">(Dec 20 2021 at 17:14)</a>:</h4>
<p>but Postel's Law needs to be applied to GoFSH too. Be robust, don't assume well structured input.</p>



<a name="265609368"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Interesting%20GoFSH%20bug/near/265609368" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Interesting.20GoFSH.20bug.html#265609368">(Dec 20 2021 at 20:00)</a>:</h4>
<p>For GoFSH, except in very extreme circumstances, we prioritize consistency w/ the input source over best practice / correctness.  E.g., if you pass GoFSH a FHIR project, it will try to create FSH that reflects that FHIR project as closely as possible (warts and all).  If we changed ids/names to follow best practices then we'd be creating a project that is not backward compatible to the input project you passed us.  That doesn't seem like a good idea, so we try not to do that.</p>



<a name="265642825"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Interesting%20GoFSH%20bug/near/265642825" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Interesting.20GoFSH.20bug.html#265642825">(Dec 21 2021 at 03:13)</a>:</h4>
<p><span class="user-mention" data-user-id="437401">@Hank Lenzi</span> - this bug is fixed in the newly released GoFSH 1.4.2.  See my other post for details.</p>



<a name="265690302"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Interesting%20GoFSH%20bug/near/265690302" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hank Lenzi <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Interesting.20GoFSH.20bug.html#265690302">(Dec 21 2021 at 14:25)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191469">Chris Moesel</span> <a href="#narrow/stream/215610-shorthand/topic/Interesting.20GoFSH.20bug/near/265642825">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="437401">Hank Lenzi</span> - this bug is fixed in the newly released GoFSH 1.4.2.  See my other post for details.</p>
</blockquote>
<p>Fantastic! Kudos for the quick response!</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
