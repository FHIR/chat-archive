---
layout: page
title: "FHIR Chat  · Reference Keyword · shorthand"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/index.html">shorthand</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Reference.20Keyword.html">Reference Keyword</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="199629218"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Reference%20Keyword/near/199629218" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Freiter <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Reference.20Keyword.html#199629218">(Jun 03 2020 at 14:50)</a>:</h4>
<p>Hey all, we are trying to make a decision about the syntax of FSH going forward, and we are hoping to get some feedback.</p>
<p>In FSH, the <code>Reference</code> keyword is used in situations where we are handling <br>
elements of type Reference. As an example, on an Observation profile we may constrain <code>subject</code> as:</p>
<div class="codehilite"><pre><span></span><code>* subject only Reference(Patient | Group)
</code></pre></div>


<p>this is different from a non-reference type constraint such as:</p>
<div class="codehilite"><pre><span></span><code>* value[x] only Quantity or CodeableConcept
</code></pre></div>


<p>We have had requests to unite these two syntaxes, and eliminate the <code>Reference</code> keyword, so that the first example would be expressed as:</p>
<div class="codehilite"><pre><span></span><code>* subject only Patient or Group
</code></pre></div>


<p>The <code>Reference</code> keyword is not strictly necessary since SUSHI can infer it is a reference by looking at <code>subject</code>'s type.<br>
We're seeking feedback on this.  Should FHIR Shorthand:</p>
<ol>
<li>Require the <code>Reference</code> keyword, which makes the FSH more verbose, but also explicitly expresses the intent; or</li>
<li>Remove the <code>Reference</code> keyword, which makes the FSH more succinct, but obscures the fact that it is a reference.</li>
</ol>
<p>Note that this discussion also pertains to canonical types and a potential Canonical keyword.</p>



<a name="199632779"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Reference%20Keyword/near/199632779" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Reference.20Keyword.html#199632779">(Jun 03 2020 at 15:17)</a>:</h4>
<p>So using option 1:</p>
<div class="codehilite"><pre><span></span><code>Extension: ...
* value[x] only CodeableConcept or Reference
* valueReference only Reference(BeNlPatient | BeFr-Patient | BeNlOrganization | BeFrOrganization)
</code></pre></div>


<p>and 2:</p>
<div class="codehilite"><pre><span></span><code>Extension: ...
* value[x] only CodeableConcept or Reference
* valueReference only BeNlPatient or BeFrPatient or BeNlOrganization or BeFrOrganization
</code></pre></div>


<p>?</p>



<a name="199635656"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Reference%20Keyword/near/199635656" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Reference.20Keyword.html#199635656">(Jun 03 2020 at 15:36)</a>:</h4>
<p>Yes, I think that covers the basic idea well.  Good example.</p>



<a name="199635909"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Reference%20Keyword/near/199635909" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Reference.20Keyword.html#199635909">(Jun 03 2020 at 15:38)</a>:</h4>
<p>Note also that an even shorter variant would be allowed (combining the two lines into one):<br>
Option 1:</p>
<div class="codehilite"><pre><span></span><code>Extension: ...
* value[x] only CodeableConcept or Reference(BeNlPatient | BeFr-Patient | BeNlOrganization | BeFrOrganization)
</code></pre></div>


<p>Option 2:</p>
<div class="codehilite"><pre><span></span><code>Extension: ...
* value[x] only CodeableConcept or BeNlPatient or BeFrPatient or BeNlOrganization or BeFrOrganization
</code></pre></div>



<a name="199636666"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Reference%20Keyword/near/199636666" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Reference.20Keyword.html#199636666">(Jun 03 2020 at 15:44)</a>:</h4>
<p>Is there a problem with Bundle.entry (and potentially other cases) where it is an actual type that is specified?</p>



<a name="199637580"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Reference%20Keyword/near/199637580" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Reference.20Keyword.html#199637580">(Jun 03 2020 at 15:51)</a>:</h4>
<p>(i updated my example to have 2 sibling profiles, not parent-child - I assume that is supported but it's off topic anyway).</p>



<a name="199637648"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Reference%20Keyword/near/199637648" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Reference.20Keyword.html#199637648">(Jun 03 2020 at 15:52)</a>:</h4>
<p><span class="user-mention" data-user-id="192166">@Jean Duteau</span> -  I don't think so... <code>Bundle.entry.resource</code> and <code>contained</code> (both of which use inline resources instead of references) would still be done the same way as now (without a <code>Reference</code> keyword).  The only place where there could be ambiguity is if you had a choice that allowed <code>Reference</code> and inlined resources (like <code>Patient</code>, not data types) at the same time.  But I don't think that ever happens.</p>



<a name="199637738"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Reference%20Keyword/near/199637738" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Reference.20Keyword.html#199637738">(Jun 03 2020 at 15:53)</a>:</h4>
<div class="codehilite"><pre><span></span><code>Option 2:
```
Extension: ...
* value[x] only CodeableConcept or BePatient or BeOrganization
```
</code></pre></div>


<p>this makes me feel that option 1 is clearer. (And I would prefer "or" instead of pipes)?</p>



<a name="199638204"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Reference%20Keyword/near/199638204" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Reference.20Keyword.html#199638204">(Jun 03 2020 at 15:56)</a>:</h4>
<p><span class="user-mention" data-user-id="191832">@Jose Costa Teixeira</span> -- I updated my replies to match your updated example.  And yes, option 1 is clearer at the expense of being more verbose (and requiring the author to explicitly state things that can be implied).  That's the tradeoff!  Within option 1, we could have the option to switch <code>|</code> to <code>or</code>... we have a ballot comment on that.</p>



<a name="199638395"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Reference%20Keyword/near/199638395" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Reference.20Keyword.html#199638395">(Jun 03 2020 at 15:58)</a>:</h4>
<p>Not for being verbose but for being explicit, I'd vote for option 1</p>



<a name="199642550"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Reference%20Keyword/near/199642550" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Kavanagh <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Reference.20Keyword.html#199642550">(Jun 03 2020 at 16:29)</a>:</h4>
<p>+1 for Option #1</p>



<a name="199649459"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Reference%20Keyword/near/199649459" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Kramer <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Reference.20Keyword.html#199649459">(Jun 03 2020 at 17:22)</a>:</h4>
<p><span class="user-mention" data-user-id="191362">@Richard Kavanagh</span> <span class="user-mention" data-user-id="191832">@Jose Costa Teixeira</span> Note that Option #1 mixes "or" and "|", both meaning "or".  Is that confusing? (We got multiple votes asking us to choose one or the other)</p>



<a name="199651291"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Reference%20Keyword/near/199651291" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Reference.20Keyword.html#199651291">(Jun 03 2020 at 17:37)</a>:</h4>
<p>I think I agree with Option #1 - it is more explicit that these are references than types.  Although I can tell that BePatient is a profile and probably a profile on Patient, if the name of the profile wasn't that explicit, it would be hard to know whether this is a profile on a datatype or a profile on a Object, i.e. a Reference.</p>



<a name="199654895"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Reference%20Keyword/near/199654895" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Reference.20Keyword.html#199654895">(Jun 03 2020 at 18:05)</a>:</h4>
<p>I think <span class="user-mention" data-user-id="191832">@Jose Costa Teixeira</span> already expressed a preference for switching <code>|</code> to <code>or</code>:</p>
<blockquote>
<p>And I would prefer "or" instead of pipes</p>
</blockquote>



<a name="199665527"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Reference%20Keyword/near/199665527" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Kavanagh <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Reference.20Keyword.html#199665527">(Jun 03 2020 at 19:32)</a>:</h4>
<p>It's the brackets in Option #1 that swings it for me. The use of "or" and "|" does not bother me, though I can understand the desirevfor consistency</p>



<a name="199982621"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Reference%20Keyword/near/199982621" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Keith Boone <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Reference.20Keyword.html#199982621">(Jun 06 2020 at 16:24)</a>:</h4>
<p>I can live with either, but would honestly prefer option 2.  My rational is that Reference is noise, and SUSHI fails to adequately report the error when you say * field only Xyz instead of * field only Reference(Xyz).  So, if we go with option 1, please clean up the error reporting when somebody forgets to use Reference() appropriately.  It will at least make it easier for someone to fix the problem.</p>



<a name="199988152"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Reference%20Keyword/near/199988152" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Reference.20Keyword.html#199988152">(Jun 06 2020 at 18:51)</a>:</h4>
<p>option 2</p>



<a name="199988995"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Reference%20Keyword/near/199988995" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gino Canessa <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Reference.20Keyword.html#199988995">(Jun 06 2020 at 19:12)</a>:</h4>
<p>For my (one? relatively late to the party on this :-) cent,  I'd vote option 1.</p>
<ul>
<li>I think it's important to be explicit in the actual data type being used</li>
<li>I worry about overloading the resource types (e.g., sometimes Patient means Patient, sometimes it means Reference(Patient))</li>
<li>Right now you can imply it's a reference, but there may be additional possibilities in the future</li>
</ul>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
