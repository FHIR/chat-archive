---
layout: page
title: "FHIR Chat  · Logical Models in FSH (Take 2) · shorthand"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/index.html">shorthand</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20FSH.20(Take.202).html">Logical Models in FSH (Take 2)</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="228674070"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20FSH%20%28Take%202%29/near/228674070" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20FSH.20(Take.202).html#228674070">(Mar 03 2021 at 21:44)</a>:</h4>
<p>We previously confused the discussion on logical models by introducing too many things at the same time (logical models, context paths, offloaded language resources).  We'd like to rein in the discussion by focusing ONLY on the syntax <em>necessary</em> to create logical models.</p>
<p>We propose that support for defining logical models requires only two new features of FSH:</p>
<ul>
<li>A new <code>Logical</code> keyword</li>
<li>A new <em>AddElement Rule</em> w/ the following syntax:</li>
</ul>
<div class="codehilite"><pre><span></span><code>* {path} {min}..{max} {flags} {type (or type or...)} &quot;{short}&quot; &quot;{definition}&quot;
</code></pre></div>
<p>(where <code>path</code>, <code>min</code>, <code>max</code>, and <code>type</code> are <em>required</em>, but <code>flags</code>, <code>short</code>, and <code>definition</code> are <em>optional</em>).</p>



<a name="228674236"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20FSH%20%28Take%202%29/near/228674236" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20FSH.20(Take.202).html#228674236">(Mar 03 2021 at 21:45)</a>:</h4>
<p>An example logical model inspired by <a href="http://build.fhir.org/ig/openhie/hiv-ig/branches/master/StructureDefinition-model-hiv-record.html">Open HIE's HIV Record</a>:<br>
<a href="/user_uploads/10155/-QKHgcm0mLWBSNIoYj-fiydk/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/10155/-QKHgcm0mLWBSNIoYj-fiydk/image.png" title="image.png"><img src="/user_uploads/10155/-QKHgcm0mLWBSNIoYj-fiydk/image.png"></a></div>



<a name="228674650"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20FSH%20%28Take%202%29/near/228674650" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20FSH.20(Take.202).html#228674650">(Mar 03 2021 at 21:48)</a>:</h4>
<p>Or if you don't like the long busy lines, you can put the text on separate lines (partial definition in image to illustrate): <a href="/user_uploads/10155/-jl8chN-xjmtMHfDHAmmCdVo/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/10155/-jl8chN-xjmtMHfDHAmmCdVo/image.png" title="image.png"><img src="/user_uploads/10155/-jl8chN-xjmtMHfDHAmmCdVo/image.png"></a></div>



<a name="228674759"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20FSH%20%28Take%202%29/near/228674759" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20FSH.20(Take.202).html#228674759">(Mar 03 2021 at 21:49)</a>:</h4>
<p>For the moment, forget everything we ever said about context paths, offloaded text, etc...  What do you think?</p>



<a name="228674901"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20FSH%20%28Take%202%29/near/228674901" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20FSH.20(Take.202).html#228674901">(Mar 03 2021 at 21:50)</a>:</h4>
<p>BTW -- I forgot to mention -- all other things you might want to do (like binding value sets, etc) would use the same exact rules and rule syntax as when you author profiles.</p>



<a name="228680293"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20FSH%20%28Take%202%29/near/228680293" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Hay <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20FSH.20(Take.202).html#228680293">(Mar 03 2021 at 22:28)</a>:</h4>
<p>looks good to me...</p>



<a name="228683908"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20FSH%20%28Take%202%29/near/228683908" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20FSH.20(Take.202).html#228683908">(Mar 03 2021 at 22:57)</a>:</h4>
<p>I presume AddElement is then a built-in rule that gets activated for Logical definitions?</p>



<a name="228684071"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20FSH%20%28Take%202%29/near/228684071" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20FSH.20(Take.202).html#228684071">(Mar 03 2021 at 22:58)</a>:</h4>
<p>I like the compactness of the language. A few comments:</p>



<a name="228684104"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20FSH%20%28Take%202%29/near/228684104" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20FSH.20(Take.202).html#228684104">(Mar 03 2021 at 22:58)</a>:</h4>
<ol>
<li>type is not required in LMs</li>
</ol>



<a name="228684309"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20FSH%20%28Take%202%29/near/228684309" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20FSH.20(Take.202).html#228684309">(Mar 03 2021 at 23:00)</a>:</h4>
<p>(deleted)</p>



<a name="228684554"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20FSH%20%28Take%202%29/near/228684554" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20FSH.20(Take.202).html#228684554">(Mar 03 2021 at 23:02)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191469">Chris Moesel</span> <a href="#narrow/stream/215610-shorthand/topic/Logical.20Models.20in.20FSH.20(Take.202)/near/228674759">said</a>:</p>
<blockquote>
<p>For the moment, forget everything we ever said about context paths, offloaded text, etc...  What do you think?</p>
</blockquote>
<p>I like where this is going</p>



<a name="228684665"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20FSH%20%28Take%202%29/near/228684665" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20FSH.20(Take.202).html#228684665">(Mar 03 2021 at 23:03)</a>:</h4>
<p>(just to be clear: I also like where it is right now, and i think it will get even better)</p>



<a name="228684747"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20FSH%20%28Take%202%29/near/228684747" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20FSH.20(Take.202).html#228684747">(Mar 03 2021 at 23:03)</a>:</h4>
<p>I just wonder about a specific syntax for LMs, but I don't see a better way</p>



<a name="228685501"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20FSH%20%28Take%202%29/near/228685501" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Hay <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20FSH.20(Take.202).html#228685501">(Mar 03 2021 at 23:09)</a>:</h4>
<p>Which type are you referring to?</p>



<a name="228685659"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20FSH%20%28Take%202%29/near/228685659" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20FSH.20(Take.202).html#228685659">(Mar 03 2021 at 23:10)</a>:</h4>
<p>data element type</p>



<a name="228685712"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20FSH%20%28Take%202%29/near/228685712" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20FSH.20(Take.202).html#228685712">(Mar 03 2021 at 23:10)</a>:</h4>
<p>Yes, the <em>AddElement</em> rule would only be valid for Logical Models (and Resources).  You could also put it in a RuleSet, but then you could only apply that RuleSet to Logical Models and Resources.  Regarding the notion that <code>type</code> is not required in Logical Models, can you describe what it means to have an element without a type (aside from the root element)?</p>



<a name="228685765"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20FSH%20%28Take%202%29/near/228685765" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20FSH.20(Take.202).html#228685765">(Mar 03 2021 at 23:11)</a>:</h4>
<p>a mode abstract-ish logical model...</p>



<a name="228685859"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20FSH%20%28Take%202%29/near/228685859" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20FSH.20(Take.202).html#228685859">(Mar 03 2021 at 23:11)</a>:</h4>
<p>Is <a href="http://element.id">element.id</a> automatically generated?</p>



<a name="228686622"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20FSH%20%28Take%202%29/near/228686622" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20FSH.20(Take.202).html#228686622">(Mar 03 2021 at 23:17)</a>:</h4>
<p><span class="user-mention" data-user-id="191832">@Jose Costa Teixeira</span> - OK.  And I just realized it is also absent on elements that have a <code>contentReference</code>.  We kind of need <code>type</code> in the grammar to distinguish an <em>AddElement Rule</em> from a normal <em>Cardinality Rule</em>.  So perhaps we'd need to introduce something like:</p>
<div class="codehilite"><pre><span></span><code>* foo 0..1 &lt;no-type&gt; &quot;My element with no type&quot;
</code></pre></div>



<a name="228686796"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20FSH%20%28Take%202%29/near/228686796" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20FSH.20(Take.202).html#228686796">(Mar 03 2021 at 23:19)</a>:</h4>
<p><span class="user-mention" data-user-id="191380">@Elliot Silver</span> -- yes, <code>Element.id</code> and <code>Element.path</code> would be automatically generated.  FHIR has rules around how those should be constructed anyway, so we'd just be following those rules.</p>



<a name="228687212"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20FSH%20%28Take%202%29/near/228687212" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Hay <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20FSH.20(Take.202).html#228687212">(Mar 03 2021 at 23:23)</a>:</h4>
<p>Don't quite understand why elements wouldn't need a datatype...</p>



<a name="228687261"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20FSH%20%28Take%202%29/near/228687261" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20FSH.20(Take.202).html#228687261">(Mar 03 2021 at 23:23)</a>:</h4>
<p>We may just want to explain a data structure without defining the types.</p>



<a name="228687480"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20FSH%20%28Take%202%29/near/228687480" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20FSH.20(Take.202).html#228687480">(Mar 03 2021 at 23:25)</a>:</h4>
<p>Also note that data types are FHIR data types (except if we are brave enough to create abstract types), so a Logical Model with a physical data type is not purebred</p>



<a name="228687603"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20FSH%20%28Take%202%29/near/228687603" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Hay <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20FSH.20(Take.202).html#228687603">(Mar 03 2021 at 23:26)</a>:</h4>
<p>Hmm. You could always use a string. I like having datatypes in there myself (admitting that it is a chimera)...</p>



<a name="228687689"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20FSH%20%28Take%202%29/near/228687689" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20FSH.20(Take.202).html#228687689">(Mar 03 2021 at 23:27)</a>:</h4>
<p>saying it is a string may be actually incorrect</p>



<a name="228687798"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20FSH%20%28Take%202%29/near/228687798" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Hay <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20FSH.20(Take.202).html#228687798">(Mar 03 2021 at 23:28)</a>:</h4>
<p>But if you don't want datatypes, then why would you care?</p>



<a name="228687827"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20FSH%20%28Take%202%29/near/228687827" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Hay <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20FSH.20(Take.202).html#228687827">(Mar 03 2021 at 23:28)</a>:</h4>
<p>I like binding to ValueSets in models, for example...</p>



<a name="228687847"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20FSH%20%28Take%202%29/near/228687847" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Hay <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20FSH.20(Take.202).html#228687847">(Mar 03 2021 at 23:29)</a>:</h4>
<p>I find it helps clinical users with context...</p>



<a name="228687915"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20FSH%20%28Take%202%29/near/228687915" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20FSH.20(Take.202).html#228687915">(Mar 03 2021 at 23:29)</a>:</h4>
<p>we also do bindings to valuesets in models. We should have an abstract data type for that, but it is not only "nice to have"  - it is really important. Some elements are bound to a vocabulary at a functional level, not only at technical level</p>



<a name="228687926"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20FSH%20%28Take%202%29/near/228687926" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20FSH.20(Take.202).html#228687926">(Mar 03 2021 at 23:30)</a>:</h4>
<blockquote>
<ul>
<li>foo 0..1 &lt;no-type&gt; "My element with no type"</li>
</ul>
</blockquote>
<p>why not use this and define a consistent syntax for defining types?</p>



<a name="228687999"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20FSH%20%28Take%202%29/near/228687999" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20FSH.20(Take.202).html#228687999">(Mar 03 2021 at 23:30)</a>:</h4>
<p>where else do we define types in fsh?</p>



<a name="228688081"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20FSH%20%28Take%202%29/near/228688081" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20FSH.20(Take.202).html#228688081">(Mar 03 2021 at 23:31)</a>:</h4>
<p>in profiles we use only {type}... anywhere else?</p>



<a name="228688255"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20FSH%20%28Take%202%29/near/228688255" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20FSH.20(Take.202).html#228688255">(Mar 03 2021 at 23:32)</a>:</h4>
<p>where I'm heading with this, <span class="user-mention" data-user-id="191469">@Chris Moesel</span> : if we define a way to express type constraints, something that works here AND does not conflict (and could also be used in) profiles, that would be a good thing.</p>



<a name="228688388"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20FSH%20%28Take%202%29/near/228688388" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20FSH.20(Take.202).html#228688388">(Mar 03 2021 at 23:33)</a>:</h4>
<p>taking the <code>&lt; &gt;</code> as example</p>



<a name="228688577"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20FSH%20%28Take%202%29/near/228688577" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20FSH.20(Take.202).html#228688577">(Mar 03 2021 at 23:34)</a>:</h4>
<p>then indeed </p>
<ul>
<li>foo 0..1 &lt;&gt; "I don't want to have a type" could work</li>
</ul>



<a name="228688606"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20FSH%20%28Take%202%29/near/228688606" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20FSH.20(Take.202).html#228688606">(Mar 03 2021 at 23:34)</a>:</h4>
<p>(unless we really need the dedicated keyword)</p>



<a name="228688797"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20FSH%20%28Take%202%29/near/228688797" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20FSH.20(Take.202).html#228688797">(Mar 03 2021 at 23:36)</a>:</h4>
<p>and if we can use </p>
<div class="codehilite"><pre><span></span><code>* element &lt;string&gt;
</code></pre></div>
<p>the same way we use</p>
<div class="codehilite"><pre><span></span><code>* element only string
</code></pre></div>
<p>then our grammar is a bit more consistent</p>
<p>(I think  <code>( )</code>  or <code>[ ]</code> are better than <code>&lt; &gt;</code> )</p>



<a name="228688900"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20FSH%20%28Take%202%29/near/228688900" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20FSH.20(Take.202).html#228688900">(Mar 03 2021 at 23:37)</a>:</h4>
<p><span class="user-mention" data-user-id="191321">@David Hay</span> if we don't have a type because we don't care that's one thing. If we don't have a type because we want to say "no types here, this is just about the structure and cardinalities. if you want data types, go one level down", we should not abandon that.</p>



<a name="228689069"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20FSH%20%28Take%202%29/near/228689069" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20FSH.20(Take.202).html#228689069">(Mar 03 2021 at 23:39)</a>:</h4>
<p>Note that I recommend always having a LM for everything we do, and I do use (FHIR) types in my IGs. But I don't think a logical model should be forced to have a type if it's done in sushi</p>



<a name="228769559"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20FSH%20%28Take%202%29/near/228769559" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20FSH.20(Take.202).html#228769559">(Mar 04 2021 at 13:16)</a>:</h4>
<p><span class="user-mention" data-user-id="191832">@Jose Costa Teixeira</span> -- we do want to try to be consistent, but having no type is the exception to the rule.  Given the choice, at this point in time, I'd rather introduce something a little different for a minority use case (e.g., <code>&lt;no-type&gt;</code>) than change the approach for the majority use case (e.g., require <code>&lt;string&gt;</code> syntax everywhere) -- which would affect the 50+ IGs already using FSH.</p>



<a name="228769808"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20FSH%20%28Take%202%29/near/228769808" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20FSH.20(Take.202).html#228769808">(Mar 04 2021 at 13:18)</a>:</h4>
<p>If it feels better, another approach could be using <code>-</code> in place of the type, like this:</p>
<div class="codehilite"><pre><span></span><code>* foo 0..1 - &quot;My element with no type&quot;
</code></pre></div>



<a name="228770562"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20FSH%20%28Take%202%29/near/228770562" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20FSH.20(Take.202).html#228770562">(Mar 04 2021 at 13:23)</a>:</h4>
<p><span class="user-mention" data-user-id="191832">@Jose Costa Teixeira</span> -- I want to be sure we're on the same page here.  You said:</p>
<blockquote>
<p>But I don't think a logical model should be forced to have a type if it's done in sushi</p>
</blockquote>
<p>Is a typeless element (aside from a <code>contentReference</code>) allowed by the IG Publisher today?  Or are you actually proposing that it <em>should</em> be allowed in FHIR overall (even if it isn't currently)?  Because I assumed when you said you could use it in abstract models that it was a current feature of FHIR -- but I can't find it documented anywhere.</p>
<p>In fact, looking at the (very brief) <a href="http://hl7.org/fhir/R4/structuredefinition.html">Logical Model documentation</a>, it says (<strong>emphsasis</strong> mine):</p>
<blockquote>
<p>StructureDefinitions are used to define the basic structures of FHIR: data types, resources, extensions, and profiles. The same definition structure can also be used to define any arbitrary structures that are a directed acyclic graph <strong>with typed nodes</strong>, where the primitive types are those defined by the FHIR specification.</p>
</blockquote>



<a name="228771611"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20FSH%20%28Take%202%29/near/228771611" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20FSH.20(Take.202).html#228771611">(Mar 04 2021 at 13:30)</a>:</h4>
<p>Typeless LMs are allowed today in the publisher (well, "today" is relative). Type is also 0..* - and I presume this is not only for differential purposes, but it would also make sense to keep them typeless. <br>
Indeed we should have a page on LMs in the core spec (pinging <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> on this, I can volunteer to helw write)</p>



<a name="228772263"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20FSH%20%28Take%202%29/near/228772263" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20FSH.20(Take.202).html#228772263">(Mar 04 2021 at 13:34)</a>:</h4>
<p><span class="user-mention" data-user-id="191469">@Chris Moesel</span> my idea would not be to replace anything on the (hundreds of ?) existing IGs. Just to allow a new syntax that allows people to say either <code>value only string</code> or <code>value &lt;string&gt;</code></p>



<a name="228800073"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20FSH%20%28Take%202%29/near/228800073" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20FSH.20(Take.202).html#228800073">(Mar 04 2021 at 16:09)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191832">Jose Costa Teixeira</span> <a href="#narrow/stream/215610-shorthand/topic/Logical.20Models.20in.20FSH.20(Take.202)/near/228771611">said</a>:</p>
<blockquote>
<p>Typeless LMs are allowed today in the publisher (well, "today" is relative). Type is also 0..* - and I presume this is not only for differential purposes, but it would also make sense to keep them typeless.</p>
</blockquote>
<p>I looked into this last night and although type is 0..*, there are a few constraints and some wording in ElementDefinition that I <em>think</em> makes it required for most logical models.  I got bogged down by the language on the page about which category a Logical Model fit into.  <a href="http://hl7.org/fhir/elementdefinition.html#interpretation">http://hl7.org/fhir/elementdefinition.html#interpretation</a></p>



<a name="228806342"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20FSH%20%28Take%202%29/near/228806342" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20FSH.20(Take.202).html#228806342">(Mar 04 2021 at 16:40)</a>:</h4>
<p>Good point, <span class="user-mention" data-user-id="192166">@Jean Duteau</span>.  I missed that table, but it does indicate that <code>type</code> is <em>required</em> for "Type definition, first element" and "Type definition, following elements" -- and I do believe that LMs meet the definition of "Type definition":</p>
<blockquote>
<p>Type definition: A StructureDefinition without a baseDefinition element, or where the derivation type is 'specialization'</p>
</blockquote>



<a name="228806539"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20FSH%20%28Take%202%29/near/228806539" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20FSH.20(Take.202).html#228806539">(Mar 04 2021 at 16:41)</a>:</h4>
<p>Yeah, that is what I think to, but where I got confused was trying to determine if a LM is a Type definition or not.</p>



<a name="228807305"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20FSH%20%28Take%202%29/near/228807305" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20FSH.20(Take.202).html#228807305">(Mar 04 2021 at 16:45)</a>:</h4>
<p>is a constrained LM still an LM or is that now a profile?  that was the question that I couldn't figure out because it made my brain hurt. :)</p>



<a name="228807533"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20FSH%20%28Take%202%29/near/228807533" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20FSH.20(Take.202).html#228807533">(Mar 04 2021 at 16:46)</a>:</h4>
<p>all I know is that all of my LMs would be considered base definitions of a data type so they would have type required for all elements.</p>



<a name="228812154"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20FSH%20%28Take%202%29/near/228812154" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20FSH.20(Take.202).html#228812154">(Mar 04 2021 at 17:12)</a>:</h4>
<p>If your LM adds any new elements (not inherited from the <code>baseDefinition</code>), then I believe it has to be a <code>specialization</code> -- and that makes it a <code>Type</code>.   If you have an LM that doesn't add anything new, I'm not sure if that's still an LM then.  Good question.</p>



<a name="228826839"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20FSH%20%28Take%202%29/near/228826839" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20FSH.20(Take.202).html#228826839">(Mar 04 2021 at 18:39)</a>:</h4>
<blockquote>
<p>typeless LMs are allowed today in the publisher (well, "today" is relative)</p>
</blockquote>
<p>yesterday that was true, but not today.</p>



<a name="228829061"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20FSH%20%28Take%202%29/near/228829061" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20FSH.20(Take.202).html#228829061">(Mar 04 2021 at 18:52)</a>:</h4>
<p>I don't see why we should force a physical data type on a LM</p>



<a name="228829963"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20FSH%20%28Take%202%29/near/228829963" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20FSH.20(Take.202).html#228829963">(Mar 04 2021 at 18:58)</a>:</h4>
<p>and we could express a data structure without types to leave it open (I did use string before but that felt weird)</p>



<a name="228830016"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20FSH%20%28Take%202%29/near/228830016" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20FSH.20(Take.202).html#228830016">(Mar 04 2021 at 18:58)</a>:</h4>
<p>what is a data structure without types?  that's basically just a bunch of strings</p>



<a name="228830375"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20FSH%20%28Take%202%29/near/228830375" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20FSH.20(Take.202).html#228830375">(Mar 04 2021 at 19:00)</a>:</h4>
<p><span class="user-mention" data-user-id="191832">@Jose Costa Teixeira</span> - couldn't you just use <code>Element</code> as the type?  It's a real type but it doesn't really say much (so doesn't feel as weird as a more specific type like <code>string</code>).</p>



<a name="228830459"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20FSH%20%28Take%202%29/near/228830459" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20FSH.20(Take.202).html#228830459">(Mar 04 2021 at 19:01)</a>:</h4>
<p><a href="http://hl7.org/fhir/R4/element.html">http://hl7.org/fhir/R4/element.html</a></p>



<a name="228830629"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20FSH%20%28Take%202%29/near/228830629" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20FSH.20(Take.202).html#228830629">(Mar 04 2021 at 19:02)</a>:</h4>
<p>less weird indeed</p>



<a name="228830717"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20FSH%20%28Take%202%29/near/228830717" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20FSH.20(Take.202).html#228830717">(Mar 04 2021 at 19:03)</a>:</h4>
<p>Actually, looks like <code>ele-1</code> might get in the way of that idea:<br>
<a href="/user_uploads/10155/0EnKFLh56DqLcWal-L4xDjER/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/10155/0EnKFLh56DqLcWal-L4xDjER/image.png" title="image.png"><img src="/user_uploads/10155/0EnKFLh56DqLcWal-L4xDjER/image.png"></a></div>



<a name="228831096"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20FSH%20%28Take%202%29/near/228831096" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20FSH.20(Take.202).html#228831096">(Mar 04 2021 at 19:05)</a>:</h4>
<p>Although I'm not 100% sure how to interpret that constraint, so maybe not?  Maybe that says that in an <em>instance</em> an element must have a value or children, but perhaps it's fine in a LM since we don't typically create instances of LM.</p>



<a name="229668042"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20FSH%20%28Take%202%29/near/229668042" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joe Paquette <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20FSH.20(Take.202).html#229668042">(Mar 10 2021 at 14:24)</a>:</h4>
<p><span class="user-mention" data-user-id="191469">@Chris Moesel</span>  So, can you share any info on when logical model support in FSH might appear in a new version of  fsh-sushi? I'm not looking for a specific date, just an idea as to if/when it might appear.  We're looking forward to its availability!!</p>



<a name="229728088"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20FSH%20%28Take%202%29/near/229728088" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20FSH.20(Take.202).html#229728088">(Mar 10 2021 at 19:31)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="211704">@Joe Paquette</span> -- we're actually just in the middle of figuring that out.  I can tell you, we haven't started implementation yet but want to start it very soon (ideally next week).  A few people have indicated they might be willing to help w/ implementing this feature, so we're currently chasing them down!</p>



<a name="229738913"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20FSH%20%28Take%202%29/near/229738913" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20FSH.20(Take.202).html#229738913">(Mar 10 2021 at 20:33)</a>:</h4>
<p>Here's a "typeless" but I think still meaningful structure:<br>
<a href="/user_uploads/10155/xvN10hBN-5Gu-pEpsRH-ThjT/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/10155/xvN10hBN-5Gu-pEpsRH-ThjT/image.png" title="image.png"><img src="/user_uploads/10155/xvN10hBN-5Gu-pEpsRH-ThjT/image.png"></a></div>



<a name="229739271"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20FSH%20%28Take%202%29/near/229739271" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20FSH.20(Take.202).html#229739271">(Mar 10 2021 at 20:35)</a>:</h4>
<p><span class="user-mention silent" data-user-id="192166">Jean Duteau</span> <a href="#narrow/stream/215610-shorthand/topic/Logical.20Models.20in.20FSH.20(Take.202)/near/228807305">said</a>:</p>
<blockquote>
<p>is a constrained LM still an LM or is that now a profile?  that was the question that I couldn't figure out because it made my brain hurt. :)</p>
</blockquote>
<p>A constrained LM is still a LM. Going from LM to profile is not constraining, it is moving to the implementation level.</p>



<a name="229739511"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20FSH%20%28Take%202%29/near/229739511" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20FSH.20(Take.202).html#229739511">(Mar 10 2021 at 20:36)</a>:</h4>
<p>(depending on what you mean by Profile). You could say that the above is a "profiled LM" but that would keep me up at night.</p>



<a name="229740679"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20FSH%20%28Take%202%29/near/229740679" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20FSH.20(Take.202).html#229740679">(Mar 10 2021 at 20:43)</a>:</h4>
<p><span class="user-mention" data-user-id="191469">@Chris Moesel</span> to summarise: my suggestion is to avoid any positional syntax (where type is the nth keyword. I'd find a way to express type.<br>
For sake of language simplicity/consistency, I would prefer that syntax for type to be not exclusive for LM - if you define it as &lt;type&gt;, then eventually in a profile definition we could also use &lt;type&gt; - without affecting the keyword "only". Seen from a different angle, <code>&lt;type&gt;</code> would just be a shorter-hand for "only", because they mean the same.</p>



<a name="229740687"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20FSH%20%28Take%202%29/near/229740687" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20FSH.20(Take.202).html#229740687">(Mar 10 2021 at 20:44)</a>:</h4>
<p>Is that sensible?</p>



<a name="229746948"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20FSH%20%28Take%202%29/near/229746948" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20FSH.20(Take.202).html#229746948">(Mar 10 2021 at 21:21)</a>:</h4>
<p>I don't think I understand the value of what you're proposing.  As a domain specific language w/ a formal grammar, I think it's fair to have positional syntax -- and I actually like that it enforces some consistency.  We already have 50+ projects that use FSH, and I feel like having some syntactical constraints in place to force some consistency is actually <em>helpful</em>.</p>
<p>We also intentionally want the element creation syntax to be <em>different</em> from the constraint syntax.  While we want <em>elements</em> of the syntax to be consistent w/ other rules, we don't want people to have to think too much when they look at a rule to determine if it is constraining something or adding something.  By having a unique syntactical shape to the rule, we also ensure that it's not possible for an author to mistakenly create a new element because they mistyped the path of an element they meant to constrain.</p>



<a name="229758253"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20FSH%20%28Take%202%29/near/229758253" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20FSH.20(Take.202).html#229758253">(Mar 10 2021 at 22:23)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191469">Chris Moesel</span> <a href="#narrow/stream/215610-shorthand/topic/Logical.20Models.20in.20FSH.20(Take.202)/near/229746948">said</a>:</p>
<blockquote>
<p>I think it's fair to have positional syntax -- and I actually like that it enforces some consistency.  </p>
</blockquote>
<p>Right. It's fair to have it, my idea is that it's fair not to have it too :)</p>
<blockquote>
<p>I feel like having some syntactical constraints in place to force some consistency is actually helpful.</p>
</blockquote>
<p>My preference for constraints and consistency (and the experience I have atm) just makes me _slightly_ lean to the other side.</p>
<blockquote>
<p>We also intentionally want the element creation syntax to be different from the constraint syntax.<br>
we don't want people to have to think too much when they look at a rule to determine if it is constraining something or adding something. </p>
</blockquote>
<p>That is a deciding preference. Personally I do not see a big difference between those - it's an ElementDefinition in both cases, right?</p>



<a name="229758732"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20FSH%20%28Take%202%29/near/229758732" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20FSH.20(Take.202).html#229758732">(Mar 10 2021 at 22:26)</a>:</h4>
<p>I'm not pulling down your proposal, just trying to build on it and adding a perspective. I hope that makes your decision - whatever it is - more solid.</p>



<a name="229758852"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20FSH%20%28Take%202%29/near/229758852" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20FSH.20(Take.202).html#229758852">(Mar 10 2021 at 22:28)</a>:</h4>
<p>I really don't mind the positional syntax to express a type that much / I cannot express what makes me somewhat itchy (maybe it because I don't see how that would evolve).</p>



<a name="229759249"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20FSH%20%28Take%202%29/near/229759249" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20FSH.20(Take.202).html#229759249">(Mar 10 2021 at 22:31)</a>:</h4>
<p>TBH, in the syntax you write seems ok. There are more important things to discuss - <br>
the "with" or equivalent syntax to avoid all that repeated typing, or the lookup functionality to create test data.</p>



<a name="229759938"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20FSH%20%28Take%202%29/near/229759938" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20FSH.20(Take.202).html#229759938">(Mar 10 2021 at 22:36)</a>:</h4>
<blockquote>
<p>That is a deciding preference. Personally I do not see a big difference between those - it's an ElementDefinition in both cases, right?</p>
</blockquote>
<p>Yes, but maybe it is easier to explain via example... Consider this line of FSH:</p>
<div class="codehilite"><pre><span></span><code>* justification 1..1
</code></pre></div>
<p>If we allowed the syntax <code>* {path} {min}..{max}</code> to be a constraint on an existing element, <em>or</em> a new element declaration without a type -- then what happens is based on whether or not the path <code>justification</code> already exists.</p>
<p>So now imagine the author wants to constrain an existing <code>justification</code> element in the LM, but mistakenly fat-fingers it:</p>
<div class="codehilite"><pre><span></span><code>* justfication 1..1
</code></pre></div>
<p>If we allow that syntax to be constraint <em>or</em> add, this typo results in a <em>new</em> element called <code>justficaton</code> being added.  No errors are emitted because SUSHI does not know the intent was to constrain an existing path.  It just knows that <code>justfication</code> does not exist, so the author must have meant to add that element.  On the other hand, if we <em>require</em> type in order for it to be an "add element" operation, then the above is flagged as an error (because it can only constrain and the path is not valid).</p>
<p>The opposite situation also applies.  Maybe the author intends to create a new element and does not realize that an element of the same name already exists.  If the syntax can be constrain or add -- if the user meant to add, but it exists already, it would just become a constraint (and no error is emitted).  On the other hand, if "add element" has a unique syntax, SUSHI would emit an error saying that it can't create an element because an element with that name already exists.</p>



<a name="229760257"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20FSH%20%28Take%202%29/near/229760257" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20FSH.20(Take.202).html#229760257">(Mar 10 2021 at 22:39)</a>:</h4>
<blockquote>
<p>TBH, in the syntax you write seems ok. There are more important things to discuss - <br>
the "with" or equivalent syntax to avoid all that repeated typing, or the lookup functionality to create test data.</p>
</blockquote>
<p>I'll be posting an updated proposal for handling nested paths later tonight or tomorrow.  We've been wrestling with that a lot -- trying to iron out the implications and such.  We've arrived on an approach that is a little different than previously proposed, but somewhat similar to what some people have asked for in the past, so... stay tuned. ;-)</p>



<a name="229760988"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20FSH%20%28Take%202%29/near/229760988" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20FSH.20(Take.202).html#229760988">(Mar 10 2021 at 22:45)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191832">Jose Costa Teixeira</span> <a href="#narrow/stream/215610-shorthand/topic/Logical.20Models.20in.20FSH.20(Take.202)/near/229739271">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="192166">Jean Duteau</span> <a href="#narrow/stream/215610-shorthand/topic/Logical.20Models.20in.20FSH.20(Take.202)/near/228807305">said</a>:</p>
<blockquote>
<p>is a constrained LM still an LM or is that now a profile?  that was the question that I couldn't figure out because it made my brain hurt. :)</p>
</blockquote>
<p>A constrained LM is still a LM. Going from LM to profile is not constraining, it is moving to the implementation level.</p>
</blockquote>
<p>OKay, then if that is true, then all LMs must have typed Elements.  ElementDefinition has a constraint that type is required whenever it is used in a StructureDefinition that defines a type, which is what a LM is doing.</p>
<p>But I'm not sure that your language was precise according to the specification.  There are different rules on ElementDefinition.type depending on whether you are a Type definition or a Constraint definition.  Normal LMs are Type Definitions and thus must have a type specified for each element.  It seems that you can create a StructureDefinition LM that is a constraint of a different LM StructureDefinition.  I'm unsure whether that is defining a new type or just a constraint on a type.  If you are saying that it is defining a new type, then my interpretation holds.</p>



<a name="229765140"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20FSH%20%28Take%202%29/near/229765140" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20FSH.20(Take.202).html#229765140">(Mar 10 2021 at 23:19)</a>:</h4>
<p>OK.  So I'm not sure about the exact terminology, but perhaps the word "Profile" implies it is a constraint of a Resource (not a constraint of a Logical Model).  In that case, you have two flavors of Logical Model:</p>
<ul>
<li><strong>derivation = "specialization"</strong> -- this logical model can add new elements (and I assume constraint inherited elements?)</li>
<li><strong>derivation = "constraint"</strong> -- this logical model can only constrain inherited elements (it cannot create new elements)</li>
</ul>



<a name="229768388"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20FSH%20%28Take%202%29/near/229768388" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20FSH.20(Take.202).html#229768388">(Mar 10 2021 at 23:50)</a>:</h4>
<p><span class="user-mention silent" data-user-id="192166">Jean Duteau</span> <a href="#narrow/stream/215610-shorthand/topic/Logical.20Models.20in.20FSH.20(Take.202)/near/229760988">said</a>:</p>
<blockquote>
<p>ElementDefinition has a constraint that type is required whenever it is used in a StructureDefinition that defines a type, which is what a LM is doing.</p>
</blockquote>
<p>Where is this constraint? I didn't see it, I may have missed that.</p>
<p>And a LM is a "type" - but not a physical one. I understand the impact of having a "physical" representation of an abstract model, but if our physical constraints prevent us from representing a logical model, I would assume that this is not intentional?.. not sure.</p>



<a name="229774665"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20FSH%20%28Take%202%29/near/229774665" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20FSH.20(Take.202).html#229774665">(Mar 11 2021 at 00:52)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191832">Jose Costa Teixeira</span> <a href="#narrow/stream/215610-shorthand/topic/Logical.20Models.20in.20FSH.20(Take.202)/near/229768388">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="192166">Jean Duteau</span> <a href="#narrow/stream/215610-shorthand/topic/Logical.20Models.20in.20FSH.20(Take.202)/near/229760988">said</a>:</p>
<blockquote>
<p>ElementDefinition has a constraint that type is required whenever it is used in a StructureDefinition that defines a type, which is what a LM is doing.</p>
</blockquote>
<p>Where is this constraint? I didn't see it, I may have missed that.</p>
</blockquote>
<p>I provided the link earlier in this topic: <a href="http://hl7.org/fhir/elementdefinition.html#interpretation">http://hl7.org/fhir/elementdefinition.html#interpretation</a><br>
Basically, all Logical Models are the definition of a type - they are represented as StructureDefinitions with a baseDefinition of 'Element' and a derivation type of 'specialization', so that makes ElementDefinition.type required.<br>
As Chris said, when derivation = 'constraint', you're only constraining elements so you can't create new ones.</p>



<a name="229778380"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20FSH%20%28Take%202%29/near/229778380" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20FSH.20(Take.202).html#229778380">(Mar 11 2021 at 01:35)</a>:</h4>
<p>It's kind of hidden in a whole lot of data, but I highlighted the relevant portions in this screenshot: <a href="/user_uploads/10155/Vi75JXh8DdBUfu2BQ87OP3r1/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/10155/Vi75JXh8DdBUfu2BQ87OP3r1/image.png" title="image.png"><img src="/user_uploads/10155/Vi75JXh8DdBUfu2BQ87OP3r1/image.png"></a></div>



<a name="235488819"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20FSH%20%28Take%202%29/near/235488819" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Kavanagh <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20FSH.20(Take.202).html#235488819">(Apr 21 2021 at 10:49)</a>:</h4>
<p>I've been away from the FSH scene for a while, so just catching up on the status re Logical model generation. <br>
I see the grammar on GitHub now makes provision for Logical models, but I am not sure how far the development has got.</p>
<p>I tried running an example through, I got no errors but also no output either.<br>
<a href="/user_uploads/10155/8VG5v0kBY6cYNrtv5GdBR5SV/image.png">image.png</a><br>
Either I'm too keen and this has not fully arrived yet, or I crested my FSH file incorrectly...</p>
<div class="message_inline_image"><a href="/user_uploads/10155/8VG5v0kBY6cYNrtv5GdBR5SV/image.png" title="image.png"><img src="/user_uploads/10155/8VG5v0kBY6cYNrtv5GdBR5SV/image.png"></a></div>



<a name="235494670"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20FSH%20%28Take%202%29/near/235494670" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Martin Höcker <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20FSH.20(Take.202).html#235494670">(Apr 21 2021 at 11:40)</a>:</h4>
<p>Not a developer, just an observer: The current SUSHI release (v1.3.1) includes the parser for the updated grammar, but no output is generated yet. In the repo, there has been some activity regarding the output side. There is a PR for the export, but it is currently in draft-mode: <a href="https://github.com/FHIR/sushi/pull/802">https://github.com/FHIR/sushi/pull/802</a></p>



<a name="235496785"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20FSH%20%28Take%202%29/near/235496785" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joe Paquette <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20FSH.20(Take.202).html#235496785">(Apr 21 2021 at 11:56)</a>:</h4>
<p><span class="user-mention" data-user-id="191362">@Richard Kavanagh</span>  Martin is correct. The grammar had to be completed before we could proceed with the rest of the development. We are actively working on adding support for both logical models and for resources. We are getting close, so stay tuned!</p>



<a name="236323650"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20FSH%20%28Take%202%29/near/236323650" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20FSH.20(Take.202).html#236323650">(Apr 27 2021 at 12:03)</a>:</h4>
<p>is there a sample IG with some logical modeling in FSH? I think I have a need, but am unclear on the concept or how to do it with FSH.</p>



<a name="236335508"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20FSH%20%28Take%202%29/near/236335508" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20FSH.20(Take.202).html#236335508">(Apr 27 2021 at 13:24)</a>:</h4>
<p>Support for logical models in FSH has not yet been released, so there are not yet any IGs in the wild that do logical models w/ FSH.  Right now, the very top of this thread probably contains the best publicly available examples of logical models in FSH.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
