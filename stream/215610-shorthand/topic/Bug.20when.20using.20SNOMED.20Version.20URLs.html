---
layout: page
title: "FHIR Chat  · Bug when using SNOMED Version URLs · shorthand"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/index.html">shorthand</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Bug.20when.20using.20SNOMED.20Version.20URLs.html">Bug when using SNOMED Version URLs</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="194431658"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Bug%20when%20using%20SNOMED%20Version%20URLs/near/194431658" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noemi Deppenwiese <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Bug.20when.20using.20SNOMED.20Version.20URLs.html#194431658">(Apr 17 2020 at 12:27)</a>:</h4>
<p>I want to create a ValueSet with some SNOMED CT codes. Per <a href="https://www.hl7.org/fhir/snomedct.html#4.3.1.0.3" title="https://www.hl7.org/fhir/snomedct.html#4.3.1.0.3">https://www.hl7.org/fhir/snomedct.html#4.3.1.0.3</a>, Versions of SCT should be given with a Version URL, so i wrote the following in FSH:</p>
<div class="codehilite"><pre><span></span>Alias: SCT = http://snomed.info/sct
Alias: SCTIntlMar2020 = http://snomed.info/sct/900000000000207008/20200309

ValueSet:  SCTBodySitesVS
Id: sctBodySitesVS
Title: &quot;Seitenlokalisation nach SNOMED CT&quot;
Description:  &quot;Seitenlokalisation z.B. einer Prozedure&quot;

* SCT|SCTIntlMar2020#85421007 &quot;Structure of right half of body (body structure)&quot;
* SCT|SCTIntlMar2020#31156008 &quot;Structure of left half of body (body structure)&quot;
</pre></div>


<p>Unfortunaltely, SUSHI gives me an <code>Resolved value "SCT|SCTIntlMar2020" is not a valid URI.</code> error... Not using the Alias for the version also doesn't work.</p>



<a name="194434639"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Bug%20when%20using%20SNOMED%20Version%20URLs/near/194434639" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Freiter <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Bug.20when.20using.20SNOMED.20Version.20URLs.html#194434639">(Apr 17 2020 at 12:52)</a>:</h4>
<p>Combining Aliases in that way isn't currently a feature of SUSHI. Generally speaking, you have to use one single Alias at a time. If you wanted output like the following:</p>
<div class="codehilite"><pre><span></span>&quot;compose&quot;: {
    &quot;include&quot;: [
      {
        &quot;system&quot;: &quot;http://snomed.info/sct&quot;,
        &quot;version&quot;: &quot;http://snomed.info/sct/900000000000207008/20200309&quot;,
        &quot;concept&quot;: [
          {
            &quot;code&quot;: &quot;85421007&quot;,
            &quot;display&quot;: &quot;Structure of right half of body (body structure)&quot;
          },
          {
            &quot;code&quot;: &quot;31156008&quot;,
            &quot;display&quot;: &quot;Structure of left half of body (body structure)&quot;
          }
        ]
      }
    ]
  }
</pre></div>


<p>you will want to just make one single Alias that combines the both the system and version that you want:</p>
<div class="codehilite"><pre><span></span>Alias: SCTIntlMar2020 =  http://snomed.info/sct|http://snomed.info/sct/900000000000207008/20200309

ValueSet:  SCTBodySitesVS
Id: sctBodySitesVS
Title: &quot;Seitenlokalisation nach SNOMED CT&quot;
Description:  &quot;Seitenlokalisation z.B. einer Prozedure&quot;

* SCTIntlMar2020#85421007 &quot;Structure of right half of body (body structure)&quot;
* SCTIntlMar2020#31156008 &quot;Structure of left half of body (body structure)&quot;
</pre></div>


<p>This is somewhat related to an existing feature request that we have <a href="https://github.com/FHIR/sushi/issues/356" title="https://github.com/FHIR/sushi/issues/356">https://github.com/FHIR/sushi/issues/356</a>, so this is something we can look into adding in the future, since multiple users are interested in this kind of behavior with Aliases and it seems like a natural idea that Aliases would work in that way.</p>



<a name="194451404"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Bug%20when%20using%20SNOMED%20Version%20URLs/near/194451404" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Bug.20when.20using.20SNOMED.20Version.20URLs.html#194451404">(Apr 17 2020 at 14:48)</a>:</h4>
<p>I just tried that and I still get the same error:<br>
Alias: SNOMED-US = <a href="http://snomed.info/sct|http://snomed.info/sct/731000124108" title="http://snomed.info/sct|http://snomed.info/sct/731000124108">http://snomed.info/sct|http://snomed.info/sct/731000124108</a></p>
<ul>
<li>SNOMED-US#39579001 "Anaphylaxis"</li>
<li>SNOMED-US#419042001 "Anaphylactic shock, caused by adverse effect of correct medicinal substance properly administered"<br>
Resolved value "<a href="http://snomed.info/sct|http://snomed.info/sct/731000124108" title="http://snomed.info/sct|http://snomed.info/sct/731000124108">http://snomed.info/sct|http://snomed.info/sct/731000124108</a>" is not a valid URI</li>
</ul>



<a name="194451748"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Bug%20when%20using%20SNOMED%20Version%20URLs/near/194451748" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Bug.20when.20using.20SNOMED.20Version.20URLs.html#194451748">(Apr 17 2020 at 14:50)</a>:</h4>
<p>NOTE: I just tried it without aliases altogether and get the same error:</p>
<ul>
<li><a href="http://snomed.info/sct|http://snomed.info/sct/731000124108#39579001" title="http://snomed.info/sct|http://snomed.info/sct/731000124108#39579001">http://snomed.info/sct|http://snomed.info/sct/731000124108#39579001</a> "Anaphylaxis"</li>
</ul>



<a name="194452238"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Bug%20when%20using%20SNOMED%20Version%20URLs/near/194452238" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Bug.20when.20using.20SNOMED.20Version.20URLs.html#194452238">(Apr 17 2020 at 14:53)</a>:</h4>
<p>NM, I was running 0.12.0 and not 0.12.1</p>



<a name="194456998"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Bug%20when%20using%20SNOMED%20Version%20URLs/near/194456998" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noemi Deppenwiese <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Bug.20when.20using.20SNOMED.20Version.20URLs.html#194456998">(Apr 17 2020 at 15:21)</a>:</h4>
<p>Worked for me with one single Alias and 0.12.1 too :)</p>



<a name="194457461"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Bug%20when%20using%20SNOMED%20Version%20URLs/near/194457461" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Bug.20when.20using.20SNOMED.20Version.20URLs.html#194457461">(Apr 17 2020 at 15:24)</a>:</h4>
<p>hmm, although SUSHI now doesn't complain, I don't think it's moving the version over properly.  I want to make sure that what I'm expecting is what is supposed to happen...</p>
<div class="codehilite"><pre><span></span>Alias: SNOMED-US = http://snomed.info/sct|http://snomed.info/sct/731000124108
ValueSet: AnaphylaxisAdverseEventVS
Title: &quot;Anaphylaxis Adverse Event Value Set&quot;
Description: &quot;Codes that represent an Anaphylaxis Adverse Event&quot;
* SNOMED-US#39579001 &quot;Anaphylaxis&quot;
* SNOMED-US#419042001 &quot;Anaphylactic shock, caused by adverse effect of correct medicinal substance properly administered&quot;
</pre></div>


<div class="codehilite"><pre><span></span>{
  &quot;resourceType&quot;: &quot;ValueSet&quot;,
  &quot;status&quot;: &quot;active&quot;,
  &quot;name&quot;: &quot;AnaphylaxisAdverseEventVS&quot;,
  &quot;id&quot;: &quot;AnaphylaxisAdverseEventVS&quot;,
  &quot;title&quot;: &quot;Anaphylaxis Adverse Event Value Set&quot;,
  &quot;description&quot;: &quot;Codes that represent an Anaphylaxis Adverse Event&quot;,
  &quot;version&quot;: &quot;0.1.0&quot;,
  &quot;url&quot;: &quot;http://ibm.com/fhir/fda/icsr/ValueSet/AnaphylaxisAdverseEventVS&quot;,
  &quot;compose&quot;: {
    &quot;include&quot;: [
      {
        &quot;system&quot;: &quot;http://snomed.info/sct&quot;,
        &quot;concept&quot;: [
          {
            &quot;code&quot;: &quot;39579001&quot;,
            &quot;display&quot;: &quot;Anaphylaxis&quot;
          },
          {
            &quot;code&quot;: &quot;419042001&quot;,
            &quot;display&quot;: &quot;Anaphylactic shock, caused by adverse effect of correct medicinal substance properly administered&quot;
          },
</pre></div>


<p>Shouldn't there be a "version" tag in the compose.include?</p>



<a name="194457997"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Bug%20when%20using%20SNOMED%20Version%20URLs/near/194457997" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noemi Deppenwiese <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Bug.20when.20using.20SNOMED.20Version.20URLs.html#194457997">(Apr 17 2020 at 15:28)</a>:</h4>
<p>My compose has the Tag:</p>
<div class="codehilite"><pre><span></span>Alias: SCTIntlMar2020 = http://snomed.info/sct|http://snomed.info/sct/900000000000207008/20200309

ValueSet:  SCTBodySitesVS
Id: sctBodySitesVS
Title: &quot;Seitenlokalisation nach SNOMED CT&quot;
Description:  &quot;Seitenlokalisation z.B. einer Prozedure&quot;

* SCTIntlMar2020#85421007 &quot;Structure of right half of body (body structure)&quot;
* SCTIntlMar2020#31156008 &quot;Structure of left half of body (body structure)&quot;
</pre></div>


<p>leads to</p>
<div class="codehilite"><pre><span></span>  &quot;description&quot; : &quot;Seitenlokalisation z.B. einer Prozedure&quot;,
  &quot;compose&quot; : {
    &quot;include&quot; : [
      {
        &quot;system&quot; : &quot;http://snomed.info/sct&quot;,
        &quot;version&quot; : &quot;http://snomed.info/sct/900000000000207008/20200309&quot;,
        &quot;concept&quot; : [
          {
            &quot;code&quot; : &quot;85421007&quot;,
            &quot;display&quot; : &quot;Structure of right half of body (body structure)&quot;
          },
          {
            &quot;code&quot; : &quot;31156008&quot;,
            &quot;display&quot; : &quot;Structure of left half of body (body structure)&quot;
          }
        ]
      }
    ]
</pre></div>



<a name="194458069"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Bug%20when%20using%20SNOMED%20Version%20URLs/near/194458069" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Bug.20when.20using.20SNOMED.20Version.20URLs.html#194458069">(Apr 17 2020 at 15:28)</a>:</h4>
<p>okay, then I'm doing something wrong....</p>



<a name="194458484"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Bug%20when%20using%20SNOMED%20Version%20URLs/near/194458484" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Freiter <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Bug.20when.20using.20SNOMED.20Version.20URLs.html#194458484">(Apr 17 2020 at 15:31)</a>:</h4>
<p><span class="user-mention" data-user-id="192166">@Jean Duteau</span> the FSH looks right, and when I tried that FSH with 0.12.1 I did get the <code>version</code> tag. Is  it possible that was output from an older run of SUSHI on that FSH?</p>



<a name="194458713"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Bug%20when%20using%20SNOMED%20Version%20URLs/near/194458713" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Bug.20when.20using.20SNOMED.20Version.20URLs.html#194458713">(Apr 17 2020 at 15:33)</a>:</h4>
<p>yeah, i blew away the input directory and it generated properly.</p>



<a name="194473860"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Bug%20when%20using%20SNOMED%20Version%20URLs/near/194473860" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Keith Boone <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Bug.20when.20using.20SNOMED.20Version.20URLs.html#194473860">(Apr 17 2020 at 17:27)</a>:</h4>
<p>I would love an option the blew away the output folder before building (but NOT as default behavior), and a informational message that other content existed when it doesn’t do a blow it away.</p>



<a name="194510224"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Bug%20when%20using%20SNOMED%20Version%20URLs/near/194510224" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Hay <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Bug.20when.20using.20SNOMED.20Version.20URLs.html#194510224">(Apr 17 2020 at 23:01)</a>:</h4>
<p>output or input?</p>



<a name="194573738"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Bug%20when%20using%20SNOMED%20Version%20URLs/near/194573738" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Keith Boone <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Bug.20when.20using.20SNOMED.20Version.20URLs.html#194573738">(Apr 19 2020 at 01:55)</a>:</h4>
<p>Yeah, that too.</p>



<a name="194573754"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Bug%20when%20using%20SNOMED%20Version%20URLs/near/194573754" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Keith Boone <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Bug.20when.20using.20SNOMED.20Version.20URLs.html#194573754">(Apr 19 2020 at 01:55)</a>:</h4>
<p>I actually blow away both input and output folders when I start with Sushi these days (When I can, which I try to make sure I can).</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
