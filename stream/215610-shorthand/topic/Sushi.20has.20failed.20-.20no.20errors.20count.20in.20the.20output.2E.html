---
layout: page
title: "FHIR Chat  · Sushi has failed - no errors count in the output. · shorthand"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/index.html">shorthand</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Sushi.20has.20failed.20-.20no.20errors.20count.20in.20the.20output.2E.html">Sushi has failed - no errors count in the output.</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="194634597"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Sushi%20has%20failed%20-%20no%20errors%20count%20in%20the%20output./near/194634597" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Keith Boone <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Sushi.20has.20failed.20-.20no.20errors.20count.20in.20the.20output.2E.html#194634597">(Apr 20 2020 at 05:33)</a>:</h4>
<p>I'm running latest IG-Builder and getting this:</p>
<p>Package Cache: C:\Users\kboone\.fhir\packages                                    (00:00.0140)<br>
Run Sushi on C:\Users\kboone\git\fhir-saner                                      (00:00.0140)<br>
Sushi: info  Running SUSHI v0.12.0                                               (00:01.0233)<br>
Sushi: info  Current FSH tank conforms to an IG Publisher context. Output will be adjusted accordingly. (00:01.0233)<br>
Sushi: info  Checking local cache for hl7.fhir.r4.core#4.0.1...                  (00:01.0246)<br>
Sushi: info  Found hl7.fhir.r4.core#4.0.1 in local cache.                        (00:02.0707)<br>
Sushi: info  Importing FSH text...                                               (00:02.0712)<br>
Sushi: info  Preprocessed 11 documents with 1 aliases.                           (00:02.0909)<br>
Sushi: info  Imported 36 definitions and 25 instances.                           (00:02.0931)<br>
Sushi: info  Loaded package hl7.fhir.r4.core#4.0.1                               (00:02.0939)<br>
Sushi: info  Converting FSH to FHIR resources...                                 (00:02.0946)<br>
<strong>Sushi has failed - no errors count in the output.</strong> Complete output from running Sushi : warn  Extension with slice name 'type' will be treated as an inline extension, even though the name can be resolved to the external extension: <a href="http://hl7.org/fhir/StructureDefinition/familymemberhistory-type" title="http://hl7.org/fhir/StructureDefinition/familymemberhistory-type">http://hl7.org/fhir/StructureDefinition/familymemberhistory-type</a>. Starting with SUSHI 0.10.0, extension slices us (00:08.0665)<br>
Load Template from #ig-template    </p>
<p>I don't know if I'd call this a Sushi error or a ig-publisher error.</p>



<a name="194634669"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Sushi%20has%20failed%20-%20no%20errors%20count%20in%20the%20output./near/194634669" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Keith Boone <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Sushi.20has.20failed.20-.20no.20errors.20count.20in.20the.20output.2E.html#194634669">(Apr 20 2020 at 05:34)</a>:</h4>
<p>It's actually fine if there really aren't any errors, but if there are, <br>
a) I'm not seeing the output in Eclipse Console view of my batch script<br>
b) The build hangs waiting for sushi to finish.<br>
<span class="user-mention" data-user-id="191469">@Chris Moesel</span> <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> <span class="user-mention" data-user-id="191315">@Josh Mandel</span></p>



<a name="194634752"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Sushi%20has%20failed%20-%20no%20errors%20count%20in%20the%20output./near/194634752" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Sushi.20has.20failed.20-.20no.20errors.20count.20in.20the.20output.2E.html#194634752">(Apr 20 2020 at 05:36)</a>:</h4>
<p>the publisher thinks that the warning from sushi is an error when it isn't.  but with my publisher run where I have the same error, it doesn't hang the publisher</p>



<a name="194634779"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Sushi%20has%20failed%20-%20no%20errors%20count%20in%20the%20output./near/194634779" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Sushi.20has.20failed.20-.20no.20errors.20count.20in.20the.20output.2E.html#194634779">(Apr 20 2020 at 05:37)</a>:</h4>
<p>Sushi: info  Converting FSH to FHIR resources...                                 (00:03.0419)<br>
Sushi has failed - no errors count in the output. Complete output from running Sushi : warn  Extension with slice name 'question' will be treated as an inline extension, even though the name can be resolved to the external extension: <a href="http://hl7.org/fhir/StructureDefinition/elementdefinition-question" title="http://hl7.org/fhir/StructureDefinition/elementdefinition-question">http://hl7.org/fhir/StructureDefinition/elementdefinition-question</a>. Starting with SUSHI 0.10.0, extension sli (00:05.0565)<br>
Load Template from fhir.base.template                                            (00:07.0006)</p>
<p>onLoad.findSpreadsheets:</p>
<p>onLoad.updateIg:<br>
...</p>
<p>and so on</p>



<a name="194634835"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Sushi%20has%20failed%20-%20no%20errors%20count%20in%20the%20output./near/194634835" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Keith Boone <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Sushi.20has.20failed.20-.20no.20errors.20count.20in.20the.20output.2E.html#194634835">(Apr 20 2020 at 05:39)</a>:</h4>
<p>If I don't actually have any errors, the publisher continues.  Otherwise, it waits for a while.</p>



<a name="194634847"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Sushi%20has%20failed%20-%20no%20errors%20count%20in%20the%20output./near/194634847" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Keith Boone <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Sushi.20has.20failed.20-.20no.20errors.20count.20in.20the.20output.2E.html#194634847">(Apr 20 2020 at 05:39)</a>:</h4>
<p>And then I get bored and kill it, because it clearly isn't doing anything but waiting for Sushi to finish, which it already has.</p>



<a name="194634892"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Sushi%20has%20failed%20-%20no%20errors%20count%20in%20the%20output./near/194634892" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Sushi.20has.20failed.20-.20no.20errors.20count.20in.20the.20output.2E.html#194634892">(Apr 20 2020 at 05:40)</a>:</h4>
<p>if your build is hanging, could it be the template load that is wrong:<br>
hmm, this line in your log does look suspicious:<br>
Load Template from #ig-template</p>
<p>I think #ig-template should have been replaced with the specific template that you want your guide to use?</p>



<a name="194634925"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Sushi%20has%20failed%20-%20no%20errors%20count%20in%20the%20output./near/194634925" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Sushi.20has.20failed.20-.20no.20errors.20count.20in.20the.20output.2E.html#194634925">(Apr 20 2020 at 05:41)</a>:</h4>
<p>yeah, I just checked and when it spits out that "Load Template..." line, it's done with sushi and has moved on</p>
<div class="codehilite"><pre><span></span>logger.logMessage(Utilities.padLeft(&quot;&quot;, &#39; &#39;, level) + &quot;Load Template from &quot;+template);
NpmPackage npm = loadPackage(template, rootFolder);
</pre></div>



<a name="194635336"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Sushi%20has%20failed%20-%20no%20errors%20count%20in%20the%20output./near/194635336" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Keith Boone <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Sushi.20has.20failed.20-.20no.20errors.20count.20in.20the.20output.2E.html#194635336">(Apr 20 2020 at 05:52)</a>:</h4>
<p>Um, no.  #ig-template means load a local template from the ig-template folder.  I add a small thing or do to CSS to make some things less hard.<br>
more trouble than it's worth to turn into a full-blown template.</p>



<a name="194635339"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Sushi%20has%20failed%20-%20no%20errors%20count%20in%20the%20output./near/194635339" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Sushi.20has.20failed.20-.20no.20errors.20count.20in.20the.20output.2E.html#194635339">(Apr 20 2020 at 05:52)</a>:</h4>
<p>oh okay.  just wondering</p>



<a name="194635347"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Sushi%20has%20failed%20-%20no%20errors%20count%20in%20the%20output./near/194635347" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Sushi.20has.20failed.20-.20no.20errors.20count.20in.20the.20output.2E.html#194635347">(Apr 20 2020 at 05:52)</a>:</h4>
<p>but I am right that it's not longer waiting for sushi when it spits out that line</p>



<a name="194635352"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Sushi%20has%20failed%20-%20no%20errors%20count%20in%20the%20output./near/194635352" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Keith Boone <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Sushi.20has.20failed.20-.20no.20errors.20count.20in.20the.20output.2E.html#194635352">(Apr 20 2020 at 05:53)</a>:</h4>
<p>Right.</p>



<a name="194635354"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Sushi%20has%20failed%20-%20no%20errors%20count%20in%20the%20output./near/194635354" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Sushi.20has.20failed.20-.20no.20errors.20count.20in.20the.20output.2E.html#194635354">(Apr 20 2020 at 05:53)</a>:</h4>
<p>what a complex web we've weaved! :)</p>



<a name="194635364"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Sushi%20has%20failed%20-%20no%20errors%20count%20in%20the%20output./near/194635364" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Keith Boone <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Sushi.20has.20failed.20-.20no.20errors.20count.20in.20the.20output.2E.html#194635364">(Apr 20 2020 at 05:53)</a>:</h4>
<p>So my first dump was from a build that was completing, because It never gets to the line "Sushi has failed" when it hangs, but it's all related.</p>



<a name="194635431"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Sushi%20has%20failed%20-%20no%20errors%20count%20in%20the%20output./near/194635431" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Keith Boone <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Sushi.20has.20failed.20-.20no.20errors.20count.20in.20the.20output.2E.html#194635431">(Apr 20 2020 at 05:54)</a>:</h4>
<p>So, there's a problem in the interface between Sushi and IG-builder.  Now we understand ourselves the kind of frustrations our customers have.</p>



<a name="194663097"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Sushi%20has%20failed%20-%20no%20errors%20count%20in%20the%20output./near/194663097" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Sushi.20has.20failed.20-.20no.20errors.20count.20in.20the.20output.2E.html#194663097">(Apr 20 2020 at 11:42)</a>:</h4>
<p>IG builder checks that Sushi says no errors. if it doesn't then the IG builder assumes that Sushi failed in some unusual way</p>



<a name="194672897"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Sushi%20has%20failed%20-%20no%20errors%20count%20in%20the%20output./near/194672897" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Sushi.20has.20failed.20-.20no.20errors.20count.20in.20the.20output.2E.html#194672897">(Apr 20 2020 at 13:16)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> -- are you attempting to parse the output text to see if there are errors or are you checking the exit code of the process?  Ideally the IG Publisher should just look at the exit code.  If it's <code>0</code>, you're good to go; otherwise there was an error.  Parsing the text will be subject to changes in how we log output, which, by the way, changed in the last few versions.</p>



<a name="194674691"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Sushi%20has%20failed%20-%20no%20errors%20count%20in%20the%20output./near/194674691" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Sushi.20has.20failed.20-.20no.20errors.20count.20in.20the.20output.2E.html#194674691">(Apr 20 2020 at 13:30)</a>:</h4>
<p>in that past I've found that exit code is a quite unreliable way to assess that, but if you're confident about it, I'll change to do that</p>



<a name="194677559"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Sushi%20has%20failed%20-%20no%20errors%20count%20in%20the%20output./near/194677559" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Sushi.20has.20failed.20-.20no.20errors.20count.20in.20the.20output.2E.html#194677559">(Apr 20 2020 at 13:52)</a>:</h4>
<p>We've coded SUSHI to use exit code to indicate whether or not there are errors, specifically with CI use cases in mind.  That said, I've just done some further testing and found that if I force a thrown exception to bubble all the way to the top, Node suppresses the exception and exits w/ error code <code>0</code>.  That should be very rare (I'm not aware of any cases where that <em>would</em> happen), but we do call them "unexpected errors" for a reason -- so we'll update SUSHI to try to catch those at the top level and return a non-zero error code.</p>



<a name="194682808"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Sushi%20has%20failed%20-%20no%20errors%20count%20in%20the%20output./near/194682808" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Sushi.20has.20failed.20-.20no.20errors.20count.20in.20the.20output.2E.html#194682808">(Apr 20 2020 at 14:31)</a>:</h4>
<p>Logged as <a href="https://github.com/FHIR/sushi/issues/375" title="https://github.com/FHIR/sushi/issues/375">fhir/sushi#375</a></p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
