---
layout: page
title: "FHIR Chat  · specify path when nested · shorthand"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/index.html">shorthand</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/specify.20path.20when.20nested.html">specify path when nested</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="199439756"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/specify%20path%20when%20nested/near/199439756" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Kaney <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/specify.20path.20when.20nested.html#199439756">(Jun 02 2020 at 00:43)</a>:</h4>
<p>Consider a PlanDefinition with multiple nested actions. Is there a way to target say the very first action? <code>* action.trigger 1..1</code> applies to all actions.</p>



<a name="199456287"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/specify%20path%20when%20nested/near/199456287" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Kavanagh <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/specify.20path.20when.20nested.html#199456287">(Jun 02 2020 at 07:08)</a>:</h4>
<p><span class="user-mention" data-user-id="191782">@Brian Kaney</span>  you can just add indexes into the repeating components, along the lines of</p>
<div class="codehilite"><pre><span></span><code>Instance: PlanDef1
InstanceOf: PlanDefinition
* subtitle = &quot;bar&quot;
* status = #draft
* action[0].trigger[0].type = #named-event
* action[0].trigger[0].name = &quot;abc&quot;
* action[0].trigger[1].type = #periodic
* action[0].trigger[1].name = &quot;def&quot;
* action[1].trigger[0].type = #data-added
* action[1].trigger[0].name = &quot;xyz&quot;
</code></pre></div>



<a name="199456431"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/specify%20path%20when%20nested/near/199456431" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Kavanagh <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/specify.20path.20when.20nested.html#199456431">(Jun 02 2020 at 07:10)</a>:</h4>
<p>Also with FSH, when a path with a repeating element is used and the index is not included, SUSHI assumes you mean the zero index. As such</p>
<div class="codehilite"><pre><span></span><code>* action.trigger 1..1
</code></pre></div>


<p>is the same as</p>
<div class="codehilite"><pre><span></span><code>* action[0].trigger[0] 1..1
</code></pre></div>



<a name="199487116"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/specify%20path%20when%20nested/near/199487116" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/specify.20path.20when.20nested.html#199487116">(Jun 02 2020 at 13:00)</a>:</h4>
<p>Indexes work well for defining <em>instances</em>, but when defining <em>profiles</em>, it is a little trickier to apply a constraint to only a specific element in an array -- particularly when you want to identify that element by its position.</p>
<p>If you have a meaningful way to slice the array, it's fairly straightforward to apply constraints to individual slices by their slice name (FSH documentation covers this fairly well, so I won't repeat it here).  So that would be my first suggestion; if there is some differentiating aspect to each <code>action</code>, then use slices to differentiate the actions and apply the constraints as you wish to each slice.</p>
<p>If you really need to apply constraints by an element's position (i.e., its index), then I think the only way you can do that is via FHIRPath invariants.  That might look something like this:</p>
<div class="codehilite"><pre><span></span><code>Invariant:  my-ig-1
Description: &quot;The first action should have exactly one trigger&quot;
Expression: &quot;first().trigger.count() = 1&quot;
Severity:   #error
</code></pre></div>


<p>then in your PlanDefinition profile:</p>
<div class="codehilite"><pre><span></span><code>* action obeys my-ig-1
</code></pre></div>


<p><em>NOTE: I didn't test the FHIRPath, so I can't guarantee it's 100% right, but hopefully my example at least gets across the idea.</em></p>



<a name="199487486"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/specify%20path%20when%20nested/near/199487486" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/specify.20path.20when.20nested.html#199487486">(Jun 02 2020 at 13:03)</a>:</h4>
<p>Also, see this thread for a related conversation: <a href="#narrow/stream/215610-shorthand/topic/Constraining.20a.20Resource/near/198232962">https://chat.fhir.org/#narrow/stream/215610-shorthand/topic/Constraining.20a.20Resource/near/198232962</a></p>



<a name="199498295"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/specify%20path%20when%20nested/near/199498295" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Kaney <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/specify.20path.20when.20nested.html#199498295">(Jun 02 2020 at 14:22)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="191469">@Chris Moesel</span>  -- I didn't think of <code>Expression</code>, but I think this is the direction I'll explore. Thanks again!</p>



<a name="199540812"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/specify%20path%20when%20nested/near/199540812" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Keith Boone <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/specify.20path.20when.20nested.html#199540812">(Jun 02 2020 at 19:24)</a>:</h4>
<p>Yeah, actually, I don't know that the FSH documentation does cover that fairly well.  There's enough in the documentation to figure it out, but frankly, this needs a book to describe how to use FSH to create an IG .  I know someone with experience writing books, but he might not be available for a bit... ;-)</p>



<a name="199542483"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/specify%20path%20when%20nested/near/199542483" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/specify.20path.20when.20nested.html#199542483">(Jun 02 2020 at 19:38)</a>:</h4>
<p>Ha.  Yeah, I know there's plenty of places where you still need to connect the dots -- and creating an IG (with or without FSH) is extremely complex.  I was referring more specifically to <a href="https://build.fhir.org/ig/HL7/fhir-shorthand/reference.html#sliced-array-paths">how to reference slices by path</a> and <a href="https://build.fhir.org/ig/HL7/fhir-shorthand/reference.html#step-2-defining-slice-contents">how to set constraints on specific slices</a> -- which at least have some decent examples.  Now... how to correctly decide what the <code>slicing</code> rules should be in the first place... that's the hard part.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
