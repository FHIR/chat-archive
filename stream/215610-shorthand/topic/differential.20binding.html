---
layout: page
title: "FHIR Chat  · differential binding · shorthand"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/index.html">shorthand</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/differential.20binding.html">differential binding</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="204598801"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/differential%20binding/near/204598801" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Hay <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/differential.20binding.html#204598801">(Jul 21 2020 at 20:25)</a>:</h4>
<p>So I've got a multi element extension - elements name (string) and value (CodeableConcept). Is it possible to 'slice' it so that the value binding is dependant on the value of name? Ie a specific ValueSet for each name...</p>



<a name="204599449"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/differential%20binding/near/204599449" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/differential.20binding.html#204599449">(Jul 21 2020 at 20:30)</a>:</h4>
<p>slice the extension with discriminator of extension.extension.valueString and within each slice give a different binding?<br>
that seems like it should work</p>



<a name="204600074"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/differential%20binding/near/204600074" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Hay <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/differential.20binding.html#204600074">(Jul 21 2020 at 20:37)</a>:</h4>
<p>Yeah - I did try that - will have another go...</p>



<a name="204600915"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/differential%20binding/near/204600915" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/differential.20binding.html#204600915">(Jul 21 2020 at 20:46)</a>:</h4>
<p>hmm, here is what I thought the syntax would allow but it didn't work...</p>
<div class="codehilite"><pre><span></span><code>Profile: TestProcedure
Parent: Procedure
* extension contains SlicedExtension named slicedExtension 0..*
* extension[slicedExtension] ^slicing.discriminator.type = #pattern
* extension[slicedExtension] ^slicing.discriminator.path = &quot;extension[namepart].valueString&quot;

* extension[slicedExtension] contains test1 0..1 and test2 0..1
* extension[slicedExtension][test1].extension[namepart].valueString = &quot;test1&quot; (exactly)
* extension[slicedExtension][test1].extension[valuepart].valueCodeableConcept from TransfusionProcedureCodeVS (extensible)

Extension: SlicedExtension
* extension contains namepart 1..1 valuepart 1..1
* extension[namepart].value[x] only string
* extension[valuepart].value[x] only CodeableConcept
</code></pre></div>



<a name="204600967"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/differential%20binding/near/204600967" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/differential.20binding.html#204600967">(Jul 21 2020 at 20:46)</a>:</h4>
<p>here were my errors...</p>
<div class="codehilite"><pre><span></span><code>error Cannot read property &#39;fixValue&#39; of undefined
  File: /Users/jeanduteau/Documents/DDIWork/IBM-BEST/datastandards/fsh/TestSlice.fsh
  Line: 7
error No element found at path extension[slicedExtension][test1] for TestProcedure, skipping rule
  File: /Users/jeanduteau/Documents/DDIWork/IBM-BEST/datastandards/fsh/TestSlice.fsh
  Line: 7
error No element found at path extension[slicedExtension][test2] for TestProcedure, skipping rule
  File: /Users/jeanduteau/Documents/DDIWork/IBM-BEST/datastandards/fsh/TestSlice.fsh
  Line: 7
error No element found at path extension[slicedExtension][test1].extension[namepart].valueString for TestProcedure, skipping rule
  File: /Users/jeanduteau/Documents/DDIWork/IBM-BEST/datastandards/fsh/TestSlice.fsh
  Line: 8
error No element found at path extension[slicedExtension][test1].extension[valuepart].valueCodeableConcept for TestProcedure, skipping rule
  File: /Users/jeanduteau/Documents/DDIWork/IBM-BEST/datastandards/fsh/TestSlice.fsh
  Line: 9
error No element found at path extension[slicedExtension][test1].value[x] for TestProcedure, skipping rule
error No element found at path extension[slicedExtension][test1].extension[namepart].extension for TestProcedure, skipping rule
error No element found at path extension[slicedExtension][test1].extension[valuepart].extension for TestProcedure, skipping rule
</code></pre></div>



<a name="204601949"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/differential%20binding/near/204601949" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Hay <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/differential.20binding.html#204601949">(Jul 21 2020 at 20:57)</a>:</h4>
<p>Maybe the extension definition needs to be sliced on url and namePart (somehow)?</p>



<a name="204602133"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/differential%20binding/near/204602133" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/differential.20binding.html#204602133">(Jul 21 2020 at 20:59)</a>:</h4>
<p>yeah, it is that "(somehow)" that is the kicker</p>



<a name="204658545"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/differential%20binding/near/204658545" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Freiter <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/differential.20binding.html#204658545">(Jul 22 2020 at 12:27)</a>:</h4>
<p>I think what <span class="user-mention" data-user-id="192166">@Jean Duteau</span> ran into is that SUSHI doesn't really have support for reslicing slices. I know SUSHI can work with a profile that already has resliced slices, but SUSHI can't actually correctly add reslices using the <code>contains</code> keyword. I've made a bug for this here <a href="https://github.com/FHIR/sushi/issues/542">https://github.com/FHIR/sushi/issues/542</a>.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
