---
layout: page
title: "FHIR Chat  · [sushi] pattern in Instance applied twice · shorthand"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/index.html">shorthand</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/.5Bsushi.5D.20pattern.20in.20Instance.20applied.20twice.html">[sushi] pattern in Instance applied twice</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="268375871"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/%5Bsushi%5D%20pattern%20in%20Instance%20applied%20twice/near/268375871" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/.5Bsushi.5D.20pattern.20in.20Instance.20applied.20twice.html#268375871">(Jan 18 2022 at 11:15)</a>:</h4>
<p>The RR profile in the german base profiles contains a pattern on component[]code and component[].code.coding[slicename]:<br>
<a href="https://simplifier.net/basisprofil-de-r4/vitalsigndeblutdruck">https://simplifier.net/basisprofil-de-r4/vitalsigndeblutdruck</a></p>
<p>If i use sushi to generate an Instance the code element then contains two identical coding elements, which causes validation to fail.<br>
Example: <a href="https://fshschool.org/FSHOnline/#/share/3twlbzc">https://fshschool.org/FSHOnline/#/share/3twlbzc</a> (all needed profiles included here)</p>



<a name="268376043"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/%5Bsushi%5D%20pattern%20in%20Instance%20applied%20twice/near/268376043" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/.5Bsushi.5D.20pattern.20in.20Instance.20applied.20twice.html#268376043">(Jan 18 2022 at 11:17)</a>:</h4>
<p>I think sushi could should check coding arrays for duplicates to prevent this inconvenience.</p>



<a name="268398090"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/%5Bsushi%5D%20pattern%20in%20Instance%20applied%20twice/near/268398090" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/.5Bsushi.5D.20pattern.20in.20Instance.20applied.20twice.html#268398090">(Jan 18 2022 at 14:28)</a>:</h4>
<p>Hmmm... It seems unnecessary (and potentially confusing) for the profile to declare that pattern twice (from two different root points), BUT...  I agree that SUSHI should be smart enough to only insert that value once.</p>
<p>I did some investigation and found that in many cases, SUSHI <em>does</em> de-duplicate values applied by multiple patterns.  But in this specific case, when multiple slicings are declared and the pattern is specified in a higher-level and lower-level slice, SUSHI is not de-duplicating.</p>
<p>I've logged this as <a href="https://github.com/FHIR/sushi/issues/1008">SUSHI#1008</a>.</p>



<a name="268426979"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/%5Bsushi%5D%20pattern%20in%20Instance%20applied%20twice/near/268426979" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/.5Bsushi.5D.20pattern.20in.20Instance.20applied.20twice.html#268426979">(Jan 18 2022 at 17:27)</a>:</h4>
<p>Thanks a lot <span class="user-mention" data-user-id="191469">@Chris Moesel</span> <br>
I agree that this style ist 'special'. This was needed to not trigger a bug in the .net libraries.</p>



<a name="268427019"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/%5Bsushi%5D%20pattern%20in%20Instance%20applied%20twice/near/268427019" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/.5Bsushi.5D.20pattern.20in.20Instance.20applied.20twice.html#268427019">(Jan 18 2022 at 17:27)</a>:</h4>
<p>fyi <span class="user-mention" data-user-id="193430">@Alexander Zautke</span></p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
