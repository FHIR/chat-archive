---
layout: page
title: "FHIR Chat  · Weird non-rendering of xhtml in generated resource · shorthand"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/index.html">shorthand</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Weird.20non-rendering.20of.20xhtml.20in.20generated.20resource.html">Weird non-rendering of xhtml in generated resource</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="275690452"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Weird%20non-rendering%20of%20xhtml%20in%20generated%20resource/near/275690452" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Weird.20non-rendering.20of.20xhtml.20in.20generated.20resource.html#275690452">(Mar 17 2022 at 16:49)</a>:</h4>
<p>I have a Composition.section.text that I'm setting and my end tags aren't showing up:<br>
<code>  * text.div = """&lt;div xmlns="http://www.w3.org/1999/xhtml"&gt;&lt;img src="allopurinol-usp-3.jpg"&gt;SPL Image&lt;/img&gt;&lt;/div&gt;"""</code><br>
This is becoming this:<br>
<code>"div": "&lt;div xmlns=\"http://www.w3.org/1999/xhtml\"&gt;&lt;img src=\"allopurinol-usp-3.jpg\"&gt;SPL Image&lt;/div&gt;"</code></p>
<p>The closing &lt;/img&gt; tag has disappeared.</p>



<a name="275710670"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Weird%20non-rendering%20of%20xhtml%20in%20generated%20resource/near/275710670" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Julia Afeltra <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Weird.20non-rendering.20of.20xhtml.20in.20generated.20resource.html#275710670">(Mar 17 2022 at 19:05)</a>:</h4>
<p>This looks like a bug in SUSHI in how it parses the XHTML. I've created an issue to track it: <a href="https://github.com/FHIR/sushi/issues/1048">SUSHI #1048</a>.</p>



<a name="275717860"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Weird%20non-rendering%20of%20xhtml%20in%20generated%20resource/near/275717860" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Julia Afeltra <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Weird.20non-rendering.20of.20xhtml.20in.20generated.20resource.html#275717860">(Mar 17 2022 at 20:03)</a>:</h4>
<p><span class="user-mention" data-user-id="192166">@Jean Duteau</span> I looked at this a bit more and chatted with <span class="user-mention" data-user-id="191469">@Chris Moesel</span>, and I realized that this is actually not valid XHTML, which I think is why the end tag doesn't show up. The <code>img</code> tag is an empty element, which means it cannot have any child nodes, so it should not have the "SPL Image" text between the <code>&lt;img&gt;</code> and <code>&lt;/img&gt;</code> tags.</p>
<p>I think you can move the "SPL Image" text to <code>id</code> or <code>alt</code> attributes on the <code>img</code> tag or just move it outside the <code>img</code> tag completely, depending on how you are using it.</p>
<p>Because the <code>img</code> tag should not have content in it, I think it might be okay that SUSHI does not support this. However, it might be helpful if SUSHI could output a warning to explain what happened. I will update the linked issue. Hopefully that makes sense! Sorry for any confusion!</p>



<a name="275727824"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Weird%20non-rendering%20of%20xhtml%20in%20generated%20resource/near/275727824" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Weird.20non-rendering.20of.20xhtml.20in.20generated.20resource.html#275727824">(Mar 17 2022 at 21:12)</a>:</h4>
<p>Ah right, that is bad on my transform that wasn't putting that text in the alt attribute.  I didn't look closely enough to see that was incorrect.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
