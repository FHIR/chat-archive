---
layout: page
title: "FHIR Chat  · Build failure in auto-build? · shorthand"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/index.html">shorthand</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Build.20failure.20in.20auto-build.3F.html">Build failure in auto-build?</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="213290687"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Build%20failure%20in%20auto-build%3F/near/213290687" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Power <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Build.20failure.20in.20auto-build.3F.html#213290687">(Oct 14 2020 at 13:50)</a>:</h4>
<p>Seems like we are getting build failures because of the sushi version in the autobuild?<br>
<a href="http://build.fhir.org/ig/HL7/genomics-reporting/branches/genomics-reporting-fsh/failure/build.log">http://build.fhir.org/ig/HL7/genomics-reporting/branches/genomics-reporting-fsh/failure/build.log</a></p>
<p>CC: <span class="user-mention" data-user-id="191451">@Patrick Werner</span> / <span class="user-mention" data-user-id="192302">@May Terry</span></p>



<a name="213291323"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Build%20failure%20in%20auto-build%3F/near/213291323" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Freiter <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Build.20failure.20in.20auto-build.3F.html#213291323">(Oct 14 2020 at 13:55)</a>:</h4>
<p>Are you hoping to run the 1.0.0-beta version of SUSHI? Currently the IG autobuild doesn't allow you to use which version of SUSHI you want to use, it is locked in at the latest "official" version, which is 0.16.0, since 1.0.0 is still a beta. There is conversation happening here: <a href="#narrow/stream/179252-IG-creation/topic/Selecting.20SUSHI.20Versions.20in.20AutoBuild">https://chat.fhir.org/#narrow/stream/179252-IG-creation/topic/Selecting.20SUSHI.20Versions.20in.20AutoBuild</a> on how this needs to change, and will hopefully be changed soon.</p>



<a name="213291326"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Build%20failure%20in%20auto-build%3F/near/213291326" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> May Terry <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Build.20failure.20in.20auto-build.3F.html#213291326">(Oct 14 2020 at 13:55)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191913">Kevin Power</span> <a href="#narrow/stream/215610-shorthand/topic/Build.20failure.20in.20auto-build.3F/near/213290687">said</a>:</p>
<blockquote>
<p>Seems like we are getting build failures because of the sushi version in the autobuild?<br>
<a href="http://build.fhir.org/ig/HL7/genomics-reporting/branches/genomics-reporting-fsh/failure/build.log">http://build.fhir.org/ig/HL7/genomics-reporting/branches/genomics-reporting-fsh/failure/build.log</a></p>
<p>CC: <span class="user-mention silent" data-user-id="191451">Patrick Werner</span> / <span class="user-mention silent" data-user-id="192302">May Terry</span></p>
</blockquote>
<p>Thanks <span class="user-mention" data-user-id="191913">@Kevin Power</span> - to be precise, here's the relevant error message: <code>Run Sushi on /scratch/ig-build-temp-U6MNU5/repo                                  (00:00.0020)
Sushi: info  Running SUSHI v0.16.0 (implements FHIR Shorthand specification v0.13.x) (00:00.0493)
Sushi: info  SUSHI detected a "fsh" directory in the input path. As a result, SUSHI will operate in "IG Publisher integration" mode. This means: (00:00.0494)</code><br>
Is this something the SUSHI team coordinates with the maintainers of the autobuild.  I don't think our CG team has this ability right now.</p>



<a name="213291594"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Build%20failure%20in%20auto-build%3F/near/213291594" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> May Terry <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Build.20failure.20in.20auto-build.3F.html#213291594">(Oct 14 2020 at 13:57)</a>:</h4>
<p><span class="user-mention" data-user-id="239822">@Nick Freiter</span> - yeh, we were encouraged by <span class="user-mention" data-user-id="191447">@Mark Kramer</span>  to upgrade to 1.0beta so we did.  <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span></p>



<a name="213291662"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Build%20failure%20in%20auto-build%3F/near/213291662" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Kramer <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Build.20failure.20in.20auto-build.3F.html#213291662">(Oct 14 2020 at 13:57)</a>:</h4>
<p>You can run the publisher locally, no problem.</p>



<a name="213291718"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Build%20failure%20in%20auto-build%3F/near/213291718" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Kramer <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Build.20failure.20in.20auto-build.3F.html#213291718">(Oct 14 2020 at 13:57)</a>:</h4>
<p>And every branch gets its own auto-build.</p>



<a name="213291821"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Build%20failure%20in%20auto-build%3F/near/213291821" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Freiter <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Build.20failure.20in.20auto-build.3F.html#213291821">(Oct 14 2020 at 13:58)</a>:</h4>
<p>And should be able to autobuild soon, if you check out that linked conversation, I believe it was settled that the IG Publisher will soon support <code>fsh.ini</code>, which will allow you to specify the SUSHI version.</p>



<a name="213292077"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Build%20failure%20in%20auto-build%3F/near/213292077" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> May Terry <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Build.20failure.20in.20auto-build.3F.html#213292077">(Oct 14 2020 at 14:00)</a>:</h4>
<p><span class="user-mention" data-user-id="239822">@Nick Freiter</span> - yeh, but going back to 0.16 will require that we reorganize our file structure and config file changes, only to change it back again.  It's a rather suboptimal adjustment.</p>



<a name="213292280"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Build%20failure%20in%20auto-build%3F/near/213292280" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Kramer <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Build.20failure.20in.20auto-build.3F.html#213292280">(Oct 14 2020 at 14:01)</a>:</h4>
<p>Same situation with mCODE, though, and the <a href="http://build.fhir.org">build.fhir.org</a> version is still the latest under 0.16.0</p>



<a name="213292479"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Build%20failure%20in%20auto-build%3F/near/213292479" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> May Terry <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Build.20failure.20in.20auto-build.3F.html#213292479">(Oct 14 2020 at 14:03)</a>:</h4>
<p>Yeh, but my concern is not mCODE, but the CG WG which has a migration workflow that leverages the autobuild for QA by subject matter experts, not all software engineers who will each have their own local build to run.</p>



<a name="213292990"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Build%20failure%20in%20auto-build%3F/near/213292990" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> May Terry <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Build.20failure.20in.20auto-build.3F.html#213292990">(Oct 14 2020 at 14:06)</a>:</h4>
<p>It's kind of a catch-22 here.  We're encouraged to test beta releases but the npm option for installing SUSHI makes this change globally on dev systems at the cost of losing a workflow that depends upon an autobuild environment which doesn't trust beta releases.</p>



<a name="213293136"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Build%20failure%20in%20auto-build%3F/near/213293136" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Kramer <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Build.20failure.20in.20auto-build.3F.html#213293136">(Oct 14 2020 at 14:07)</a>:</h4>
<p>I apologize. I was interested in having you test the beta and the upgrade instructions, and neglected the autobuild breakage situation.  My fault.</p>



<a name="213293637"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Build%20failure%20in%20auto-build%3F/near/213293637" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> May Terry <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Build.20failure.20in.20auto-build.3F.html#213293637">(Oct 14 2020 at 14:10)</a>:</h4>
<p>Ok. we'll make it work somehow. <span class="user-mention" data-user-id="191913">@Kevin Power</span> and <span class="user-mention" data-user-id="191451">@Patrick Werner</span> - I think perhaps we can find a place to upload the IG as a zip file for SMEs to review until SUSHI 1.0 is production and we can go back to the autobuild QA workflow.  It's a good note however for others doing migrations.  Thanks!</p>



<a name="213294940"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Build%20failure%20in%20auto-build%3F/near/213294940" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Kramer <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Build.20failure.20in.20auto-build.3F.html#213294940">(Oct 14 2020 at 14:19)</a>:</h4>
<p>Chris is going to ping Grahame again. This might be resolved very soon if we get Grahame's attention. You might want to just use local builds for today and wait and see.</p>



<a name="213365948"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Build%20failure%20in%20auto-build%3F/near/213365948" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Build.20failure.20in.20auto-build.3F.html#213365948">(Oct 15 2020 at 00:07)</a>:</h4>
<p>OK.  Grahame released a new IG Publisher today -- and you can now control the SUSHI version by placing a <code>fsh.ini</code> file in the root folder of your IG (sibling to the <code>ig.ini</code>).  The contents of <code>fsh.ini</code> should be something like this:</p>
<div class="codehilite"><pre><span></span><code>[FSH]
sushi-version=beta
</code></pre></div>


<p>The above will force the publisher to download and use the SUSHI release tagged as beta.  This is a good choice during the 1.0.0 beta because as we release new betas, we'll move the <code>beta</code> tag -- this way your IG always uses the latest beta.  Once we get out of beta, you can remove <code>fsh.ini</code> (or comment out that line) to go back to the normal "latest official release" approach.</p>
<p>NOTE: You can also use specific versions as the value, so you could say <code>sushi-version=1.0.0-beta.1</code> to lock it to that specific version, or once we officially release 1.0.0, you could say <code>sushi-version=0.16.0</code> if you absolutely must use the older version of SUSHI.</p>



<a name="213366034"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Build%20failure%20in%20auto-build%3F/near/213366034" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> May Terry <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Build.20failure.20in.20auto-build.3F.html#213366034">(Oct 15 2020 at 00:09)</a>:</h4>
<p>Thanks for the really quick turnaround <span class="user-mention" data-user-id="191469">@Chris Moesel</span> !  <br>
cc: <span class="user-mention" data-user-id="191913">@Kevin Power</span>  and <span class="user-mention" data-user-id="191451">@Patrick Werner</span> </p>
<p><span class="user-mention silent" data-user-id="191469">Chris Moesel</span> <a href="#narrow/stream/215610-shorthand/topic/Build.20failure.20in.20auto-build.3F/near/213365948">said</a>:</p>
<blockquote>
<p>OK.  Grahame released a new IG Publisher today -- and you can now control the SUSHI version by placing a <code>fsh.ini</code> file in the root folder of your IG (sibling to the <code>ig.ini</code>).  The contents of <code>fsh.ini</code> should be something like this:</p>
<div class="codehilite"><pre><span></span><code>[FSH]
sushi-version=beta
</code></pre></div>


<p>The above will force the publisher to download and use the SUSHI release tagged as beta.  This is a good choice during the 1.0.0 beta because as we release new betas, we'll move the <code>beta</code> tag -- this way your IG always uses the latest beta.  Once we get out of beta, you can remove <code>fsh.ini</code> (or comment out that line) to go back to the normal "latest official release" approach.</p>
<p>NOTE: You can also use specific versions as the value, so you could say <code>sushi-version=1.0.0-beta.1</code> to lock it to that specific version, or once we officially release 1.0.0, you could say <code>sushi-version=0.16.0</code> if you absolutely must use the older version of SUSHI.</p>
</blockquote>



<a name="213375765"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Build%20failure%20in%20auto-build%3F/near/213375765" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> May Terry <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Build.20failure.20in.20auto-build.3F.html#213375765">(Oct 15 2020 at 03:06)</a>:</h4>
<p><span class="user-mention" data-user-id="191469">@Chris Moesel</span> - quick update. easy change and verified the fix. we have our auto-build again. Thanks to you and <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> for the really quick turnaround on this. <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span></p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
