---
layout: page
title: "FHIR Chat  · SUSHI 0.13.0-beta.1 · shorthand"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/index.html">shorthand</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/SUSHI.200.2E13.2E0-beta.2E1.html">SUSHI 0.13.0-beta.1</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="197486198"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/SUSHI%200.13.0-beta.1/near/197486198" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Freiter <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/SUSHI.200.2E13.2E0-beta.2E1.html#197486198">(May 13 2020 at 22:39)</a>:</h4>
<p><strong>Announcing SUSHI 0.13.0-beta.1</strong> which adds a new experimental approach to configuring SUSHI.  Further details are available in the release notes: <a href="https://github.com/FHIR/sushi/releases/tag/v0.13.0-beta.1">https://github.com/FHIR/sushi/releases/tag/v0.13.0-beta.1</a>.</p>
<p><strong>NOTE</strong>: This is an experimental beta recommended for established users only.</p>
<p><strong>Install or Update</strong>:<br>
To install or update to the beta version, run the following command:<br>
<code>$ npm install -g fsh-sushi@beta</code></p>



<a name="197486336"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/SUSHI%200.13.0-beta.1/near/197486336" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/SUSHI.200.2E13.2E0-beta.2E1.html#197486336">(May 13 2020 at 22:41)</a>:</h4>
<p><span class="user-mention" data-user-id="191321">@David Hay</span> -- this one's for you!</p>



<a name="197486508"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/SUSHI%200.13.0-beta.1/near/197486508" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Hay <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/SUSHI.200.2E13.2E0-beta.2E1.html#197486508">(May 13 2020 at 22:43)</a>:</h4>
<p>hurrah!</p>



<a name="197489589"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/SUSHI%200.13.0-beta.1/near/197489589" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Hay <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/SUSHI.200.2E13.2E0-beta.2E1.html#197489589">(May 13 2020 at 23:20)</a>:</h4>
<p>Pretty disappointing so far - it just seems to work!  Where are the fireworks I was expecting?  :)</p>



<a name="197489659"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/SUSHI%200.13.0-beta.1/near/197489659" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Hay <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/SUSHI.200.2E13.2E0-beta.2E1.html#197489659">(May 13 2020 at 23:21)</a>:</h4>
<p>One question - how can I specify that a page should open in a separate tab? ie replicating:</p>
<div class="codehilite"><pre><span></span><code>      &lt;li&gt;
        &lt;a target=&quot;_blank&quot; href=&quot;{{site.data.fhir.path}}index.html&quot;&gt;FHIR Spec &lt;img src=&quot;external.png&quot; style=&quot;text-align: baseline&quot;/&gt;&lt;/a&gt;
      &lt;/li&gt;
</code></pre></div>



<a name="197490220"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/SUSHI%200.13.0-beta.1/near/197490220" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pétur Valdimarsson <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/SUSHI.200.2E13.2E0-beta.2E1.html#197490220">(May 13 2020 at 23:28)</a>:</h4>
<p>This is AWESOME! Now I can remove quite a few <code>sed -i</code> workarounds from my build script :D Trying it out first thing in the Swedish morning.</p>



<a name="197494398"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/SUSHI%200.13.0-beta.1/near/197494398" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/SUSHI.200.2E13.2E0-beta.2E1.html#197494398">(May 14 2020 at 00:24)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191321">David Hay</span> <a href="#narrow/stream/215610-shorthand/topic/SUSHI.200.2E13.2E0-beta.2E1/near/197489659">said</a>:</p>
<blockquote>
<p>One question - how can I specify that a page should open in a separate tab?:</p>
</blockquote>
<p>You can't.  There.  Is that the firework you were looking for?</p>



<a name="197494456"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/SUSHI%200.13.0-beta.1/near/197494456" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/SUSHI.200.2E13.2E0-beta.2E1.html#197494456">(May 14 2020 at 00:25)</a>:</h4>
<p>But seriously... it's not a current feature.  Maybe we can come up w/ something.  But for now, if you want "advanced" menu features, I guess you need to provide your own <code>menu.xml</code>.</p>



<a name="197494581"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/SUSHI%200.13.0-beta.1/near/197494581" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/SUSHI.200.2E13.2E0-beta.2E1.html#197494581">(May 14 2020 at 00:27)</a>:</h4>
<p>TBH though -- there are some who think SUSHI should not be doing anything at all w/ menu.xml, package-list.json, pages, etc -- so depending on what the feedback is and how discussions go, the entire menu feature may or may not make it through the beta.</p>



<a name="197543824"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/SUSHI%200.13.0-beta.1/near/197543824" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Kramer <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/SUSHI.200.2E13.2E0-beta.2E1.html#197543824">(May 14 2020 at 12:14)</a>:</h4>
<p>In markdown, you can always fall back on plain html &lt;a href&gt; with target = "_blank"</p>



<a name="197547817"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/SUSHI%200.13.0-beta.1/near/197547817" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/SUSHI.200.2E13.2E0-beta.2E1.html#197547817">(May 14 2020 at 12:54)</a>:</h4>
<p>That's true and helpful for pages -- but the <code>menu</code> format in config.yaml isn't markdown, nor is <code>menu.xml</code>, so it doesn't get at <span class="user-mention" data-user-id="191321">@David Hay</span>'s question.  One thing we could possibly do is support a <code>new-tab</code> keyword in the config.yaml to indicate it should open in a new tab, and maybe <code>external</code> to indicate you want the little external icon.  What do you think of something like:</p>
<div class="codehilite"><pre><span></span><code><span class="nt">menu</span><span class="p">:</span>
  <span class="nt">Home</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">index.md</span>
  <span class="nt">FHIR Spec</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">external new-tab {{site.data.fhir.path}}index.html</span>
</code></pre></div>



<a name="197584918"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/SUSHI%200.13.0-beta.1/near/197584918" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Hay <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/SUSHI.200.2E13.2E0-beta.2E1.html#197584918">(May 14 2020 at 16:54)</a>:</h4>
<p>Yep - that should work. In my specific case the url is fixed, so I wouldn't need the {{}} - but it's a good option to have. Interestingly, the other option to use is an iframe - <span class="user-mention" data-user-id="191832">@Jose Costa Teixeira</span> figured that out for me - works well for my specific use case (I wanted to embed an example query page for developers), though won't suit all use cases of course...</p>



<a name="197713853"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/SUSHI%200.13.0-beta.1/near/197713853" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a>  Bob Milius <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/SUSHI.200.2E13.2E0-beta.2E1.html#197713853">(May 15 2020 at 16:05)</a>:</h4>
<p>I think I found a bug. If I add more than one <code>special-url</code> parameter to <code>config.yaml</code>, sushi stops. </p>
<div class="codehilite"><pre><span></span><code>parameters:
  show-inherited-invariants: true
  special-url: http://www.genenames.org/geneId
  special-url: http://glstring.org
</code></pre></div>


<p>results in</p>
<div class="codehilite"><pre><span></span><code>$ sushi
info  Running SUSHI v0.13.0-beta.1
info  path-to-fsh-defs defaulted to current working directory
info  Using configuration file: /Users/bmilius/Documents/src/fsh/hla-reporting-ig/config.yaml
$
</code></pre></div>



<a name="197716028"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/SUSHI%200.13.0-beta.1/near/197716028" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/SUSHI.200.2E13.2E0-beta.2E1.html#197716028">(May 15 2020 at 16:22)</a>:</h4>
<p>Yep.  I think you found a bug!  SUSHI definitely shouldn't just <em>stop</em> without any output or errors.</p>
<p>That said, the way you do multi-value parameters in config.yaml is by declaring the parameter once but using a list as its value.  So try this instead:</p>
<div class="codehilite"><pre><span></span><code>parameters:
  show-inherited-invariants: true
  special-url:
    - http://www.genenames.org/geneId
    - http://glstring.org
</code></pre></div>



<a name="197720388"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/SUSHI%200.13.0-beta.1/near/197720388" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a>  Bob Milius <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/SUSHI.200.2E13.2E0-beta.2E1.html#197720388">(May 15 2020 at 16:51)</a>:</h4>
<p>about time for me to learn yaml <span aria-label="upside down" class="emoji emoji-1f643" role="img" title="upside down">:upside_down:</span></p>



<a name="197728293"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/SUSHI%200.13.0-beta.1/near/197728293" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/SUSHI.200.2E13.2E0-beta.2E1.html#197728293">(May 15 2020 at 17:53)</a>:</h4>
<p>Actually, YAML doesn't explicitly forbid repeated keys in its spec -- but <em>we</em> do.  ;-)</p>



<a name="197850902"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/SUSHI%200.13.0-beta.1/near/197850902" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kurt Allen <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/SUSHI.200.2E13.2E0-beta.2E1.html#197850902">(May 17 2020 at 14:05)</a>:</h4>
<p>Yo <span class="user-mention" data-user-id="191469">@Chris Moesel</span> - thanks for the work you all did last week, FSH is really taking off...<br>
I got a couple questions.<br>
a) How do I set a Range to a fixed code system. i.e. I want to constrain value[x] to a Range  of Quantities and constrain the upper and lower units. Not sure hot to do this.<br>
b) This is an expansion of (a). I want to constrain Observation.value[x] to be a Quantity or a Range. I want to constrain the Range and Quantity units to a fixed value (UCUM).<br>
Unless I misunderstand FHIR, I believe I need to slice value[x], so I have a valueQuanityt slice and a valueRange slice and then set each slices pattern to appropriately.<br>
I tried doing this, and I can't access the slices properly.</p>
<ul>
<li>value[x] contains quantity 0..1 and range 0..1</li>
<li>value[x][quantity] only Quantity</li>
<li>value[x][quantity] units <a href="http://hl7.org/fhir/us/breast-radiology/ValueSet/UnitsOfLengthVS#abc">http://hl7.org/fhir/us/breast-radiology/ValueSet/UnitsOfLengthVS#abc</a></li>
</ul>
<p>sushi doesn't like value[x][quantity] - I assume I have the slice name syntax wrong?</p>
<p>Thx,<br>
Kurt A.</p>



<a name="197929170"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/SUSHI%200.13.0-beta.1/near/197929170" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Freiter <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/SUSHI.200.2E13.2E0-beta.2E1.html#197929170">(May 18 2020 at 12:50)</a>:</h4>
<p><span class="user-mention" data-user-id="192611">@Kurt Allen</span> although <code>value[x]</code> properties are represented using slicing, they require special treatment, and they are very commonly constrained, so they are treated specially in SUSHI. So instead of accessing slices as <code>value[x][quantity]</code>, you simply access the <code>valueQuantity</code> element. I think the following example shows how you would want to achieve what you described:</p>
<div class="codehilite"><pre><span></span><code>Profile: MyObservation
Parent: Observation
* value[x] only Quantity or Range
// Setting the units on the quantities and range
* valueQuantity units = http://hl7.org/fhir/us/breast-radiology/ValueSet/UnitsOfLengthVS#abc
* valueRange.low units = http://hl7.org/fhir/us/breast-radiology/ValueSet/UnitsOfLengthVS#def
* valueRange.high units = http://hl7.org/fhir/us/breast-radiology/ValueSet/UnitsOfLengthVS#def

Profile: MyObservation2
Parent: Observation
* value[x] only Quantity or Range
// Setting fixed values on the quantity and range, automatically assuming UCUM units
* valueQuantity = 10 &#39;mm&#39;
* valueRange.low = 5 &#39;mm&#39;
* valueRange.high = 20 &#39;mm&#39;
</code></pre></div>


<p>I think the first example is doing what you described, setting the units system and code on the Quantity and Range. The second example shows how to set a value and units code on a quantity, where the system is automatically assumed to be UCUM. I don't think this is what you were asking about, but I'm adding that on just in case.</p>



<a name="198055768"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/SUSHI%200.13.0-beta.1/near/198055768" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Kramer <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/SUSHI.200.2E13.2E0-beta.2E1.html#198055768">(May 19 2020 at 12:13)</a>:</h4>
<p><span class="user-mention" data-user-id="239822">@Nick Freiter</span> <span class="user-mention" data-user-id="192611">@Kurt Allen</span> The first example is not actually correct. Codes follow the pattern {system}#{code}, not {value set}#{code} . It should be something like this:</p>
<div class="codehilite"><pre><span></span><code>* valueQuantity units = UCUM#abc
* valueRange.low units = UCUM#def
* valueRange.high units = UCUM#def
</code></pre></div>


<p>The value set only comes into play when an instance is validated (i.e., the code is checked to see it is in the required value set).</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
