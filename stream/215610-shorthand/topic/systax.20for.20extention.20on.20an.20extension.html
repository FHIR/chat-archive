---
layout: page
title: "FHIR Chat  · systax for extention on an extension · shorthand"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/index.html">shorthand</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/systax.20for.20extention.20on.20an.20extension.html">systax for extention on an extension</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="275434410"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/systax%20for%20extention%20on%20an%20extension/near/275434410" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Catherine Hosage Norman <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/systax.20for.20extention.20on.20an.20extension.html#275434410">(Mar 15 2022 at 20:59)</a>:</h4>
<p>This is a profile on a standard extension.  It was fine until I added the container information which defined as an extension on the manufacturing batch extension.  I get this error:  The sum of mins of slices must be &lt;= max of sliced element, but sum of mins (1) &gt; max (0) of Extension.extension:container.extension.   The error repeats for each element in the sub-extension.</p>
<p>Profile: DrugProductmanufacturingBatch<br>
Parent: <a href="http://hl7.org/fhir/StructureDefinition/medication-manufacturingBatch">http://hl7.org/fhir/StructureDefinition/medication-manufacturingBatch</a><br>
Id: drug-product-manufacturing-batch<br>
Title: "Drug Product Manufacturing Batch"<br>
Description: "This profile defines the details of a batch of medicine."</p>
<ul>
<li>^url = "<a href="https://hl7.org/fhir/pq-cmc/StructureDefinition/extDrugProductMfgBatch">https://hl7.org/fhir/pq-cmc/StructureDefinition/extDrugProductMfgBatch</a>"</li>
<li>extension[manufacturingDate] 1..1 MS </li>
<li>extension[manufacturingDate] ^short = "Manufacturing Date"  </li>
<li>extension[manufacturingDate].valueDateTime MS </li>
<li>extension[manufacturingDateClassification] 1..1 MS </li>
<li>extension[manufacturingDateClassification] ^short = "Manufacturing Date Description"  </li>
<li>extension[manufacturingDateClassification].valueCodeableConcept MS </li>
<li>extension[assignedManufacturer] 1..1 MS </li>
<li>extension[assignedManufacturer] ^short = "Assigned Manufacturer"  </li>
<li>extension[assignedManufacturer].valueReference only Reference(MfgTestSiteOrganization)</li>
<li>extension[expirationDateClassification] 1..1 MS </li>
<li>extension[expirationDateClassification] ^short = "Expiration Date Classification"  </li>
<li>extension[expirationDateClassification].valueCodeableConcept MS</li>
<li>extension[batchUtilization] 1..1 MS </li>
<li>extension[batchUtilization] ^short = "Batch Utilization"  </li>
<li>extension[batchUtilization].valueCodeableConcept MS </li>
<li>extension[batchQuantity] 1..1 MS</li>
<li>extension[batchQuantity] ^short = "Batch Size"  </li>
<li>extension[batchQuantity].valueQuantity MS </li>
<li>extension[additionalInformation] MS </li>
<li>extension[additionalInformation] ^short = "Additional Information"  </li>
<li>extension[additionalInformation].valueString MS </li>
<li>extension[container] 1..*  MS</li>
<li>extension[container] ^short = "Container"</li>
<li>extension[container].extension[lotNumber] 1..1 MS</li>
<li>extension[container].extension[lotNumber] ^short = "Container Lot Number"</li>
<li>extension[container].extension[lotNumber].string  1..1 MS</li>
<li>extension[container].extension[type] 1..1 MS</li>
<li>extension[container].extension[type] ^short = "Container Type"</li>
<li>extension[container].extension[type].CodeableConcept  1..1 MS</li>
<li>extension[container].extension[quantity] 1..1 MS</li>
<li>extension[container].extension[quantity] ^short = "Container Fill per Container Size" </li>
<li>extension[container].extension[quantity].Ratio  1..1 MS</li>
<li>extension[container].extension[closureSystemDescription] 1..1 MS</li>
<li>extension[container].extension[closureSystemDescription] ^short = "Closure System Description" </li>
<li>extension[container].extension[closureSystemDescription].string  1..1 MS</li>
<li>extension[container].extension[closureType] 1..1 MS</li>
<li>extension[container].extension[closureType] ^short = "Closure Type"</li>
<li>extension[container].extension[closureType].CodeableConcept  1..1 MS</li>
</ul>



<a name="275505571"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/systax%20for%20extention%20on%20an%20extension/near/275505571" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mint Thompson <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/systax.20for.20extention.20on.20an.20extension.html#275505571">(Mar 16 2022 at 12:51)</a>:</h4>
<p>interesting! this definitely appears to be an incorrectly reported error, I'm investigating it now.</p>



<a name="275506379"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/systax%20for%20extention%20on%20an%20extension/near/275506379" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mint Thompson <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/systax.20for.20extention.20on.20an.20extension.html#275506379">(Mar 16 2022 at 12:59)</a>:</h4>
<p>I think I've found the cause: in the definition of the parent extension, the max of <code>Extension.extension:container.extension</code> is, in fact, 0. This is very strange, considering that there are slices defined on this element, but that is why SUSHI is reporting this error.</p>



<a name="275527103"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/systax%20for%20extention%20on%20an%20extension/near/275527103" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/systax.20for.20extention.20on.20an.20extension.html#275527103">(Mar 16 2022 at 15:24)</a>:</h4>
<p><span class="user-mention" data-user-id="242620">@Mint Thompson</span> is exactly right.  The <a href="https://hl7.org/fhir/5.0.0-snapshot1/extension-medication-manufacturingbatch.html">manufacturingBatch extension</a> defines <a href="https://hl7.org/fhir/5.0.0-snapshot1/extension-medication-manufacturingbatch-definitions.html#medication-manufacturingBatch.Extension.extension:container.extension">Extension.extension:container.extension</a> with <code>"max": "0"</code>:<br>
<a href="/user_uploads/10155/uGlhhkG7ud1_c9XZoLagWG_C/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/10155/uGlhhkG7ud1_c9XZoLagWG_C/image.png" title="image.png"><img src="/user_uploads/10155/uGlhhkG7ud1_c9XZoLagWG_C/image.png"></a></div>



<a name="275527527"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/systax%20for%20extention%20on%20an%20extension/near/275527527" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/systax.20for.20extention.20on.20an.20extension.html#275527527">(Mar 16 2022 at 15:27)</a>:</h4>
<p>But it then goes on to specify 5 slices for sub-extensions on it.  So, clearly, that seems like an error.</p>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> -- is this the sort of thing that the IG Publisher should catch (defining <code>extension 0..0</code> and then defining a bunch of slices on it)?  If we wanted to get this fixed in the extension, who is the right person to contact?  Or should we just submit a tracker?</p>



<a name="275531461"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/systax%20for%20extention%20on%20an%20extension/near/275531461" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/systax.20for.20extention.20on.20an.20extension.html#275531461">(Mar 16 2022 at 15:53)</a>:</h4>
<p>This seems much like the problem I have been asking about in the slicing and extension on a slice... I have a small example</p>



<a name="275533559"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/systax%20for%20extention%20on%20an%20extension/near/275533559" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/systax.20for.20extention.20on.20an.20extension.html#275533559">(Mar 16 2022 at 16:03)</a>:</h4>
<p>I don't think so.  The problem here is pretty clear (or at least seems to be).  It doesn't make sense to have something <code>0..0</code> and then go and slice it.</p>



<a name="275534010"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/systax%20for%20extention%20on%20an%20extension/near/275534010" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/systax.20for.20extention.20on.20an.20extension.html#275534010">(Mar 16 2022 at 16:06)</a>:</h4>
<p>i'm making the change in a branch.  Not sure how that got there.  I <em>think</em> I actually created this extension with FSH and then put the resulting SD in the FHIR build.  but it was quite a while ago.</p>



<a name="276431970"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/systax%20for%20extention%20on%20an%20extension/near/276431970" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Catherine Hosage Norman <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/systax.20for.20extention.20on.20an.20extension.html#276431970">(Mar 24 2022 at 04:42)</a>:</h4>
<p>Jean,  Any progress on this.  I just un-commented the lines, tried it  and it is not fixed in the latest release of the publisher.</p>



<a name="276434584"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/systax%20for%20extention%20on%20an%20extension/near/276434584" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/systax.20for.20extention.20on.20an.20extension.html#276434584">(Mar 24 2022 at 05:41)</a>:</h4>
<p>it's not a publisher fix, it's how the extension was defined in the build.</p>



<a name="276479576"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/systax%20for%20extention%20on%20an%20extension/near/276479576" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Catherine Hosage Norman <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/systax.20for.20extention.20on.20an.20extension.html#276479576">(Mar 24 2022 at 14:03)</a>:</h4>
<p>I need to get my IG out by the end of the month.  Should I write an extension in the IG to add these elements and then change when the build gets fixed?</p>



<a name="276489126"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/systax%20for%20extention%20on%20an%20extension/near/276489126" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/systax.20for.20extention.20on.20an.20extension.html#276489126">(Mar 24 2022 at 15:06)</a>:</h4>
<p>yes, timing wise that's what you'll need to do.  I'm not even sure process-wise how we can get this technical correction into the R4 builds.</p>



<a name="276508592"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/systax%20for%20extention%20on%20an%20extension/near/276508592" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Catherine Hosage Norman <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/systax.20for.20extention.20on.20an.20extension.html#276508592">(Mar 24 2022 at 17:08)</a>:</h4>
<p>I am working against R5.  None of medication extension was in R4.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
