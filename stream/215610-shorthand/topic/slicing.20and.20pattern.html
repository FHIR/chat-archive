---
layout: page
title: "FHIR Chat  · slicing and pattern · shorthand"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/index.html">shorthand</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/slicing.20and.20pattern.html">slicing and pattern</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="207787264"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/slicing%20and%20pattern/near/207787264" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mika Tuomainen <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/slicing.20and.20pattern.html#207787264">(Aug 23 2020 at 19:19)</a>:</h4>
<p>Hi,</p>
<p>I have tried to do slicing with shorthand. Here is the content of the .fsh file which I used for testing slicing:</p>
<div class="codehilite"><pre><span></span><code>Profile:        FSHTestObsDeeperSlicev1
Parent:         Observation
Id:             fhstestobsdeeperslicev1
Title:          &quot;FSHTestObsDeeperSlicev1&quot;
Description:    &quot;Test observation version 1, slicing deeper structure Observation.code.coding, done with Shorthand&quot;
* ^status = #draft

* code.coding ^slicing.discriminator.type = #value
* code.coding ^slicing.discriminator.path = &quot;code&quot;
* code.coding ^slicing.rules = #open

* code.coding contains generalCode 1..1 and oralCode 0..1
* code.coding[generalCode].code = #8310-5
* code.coding[oralCode].code = #8331-1
</code></pre></div>


<p>I am trying to make generalCode and oralCode as fixedCode(s). But when I compile this with Sushi, I got StructureDefinition (SD) which shows that they are as patternCode(s). Am I doing something wrong in FSH grammar? The SD looks like this with those slices:</p>
<div class="codehilite"><pre><span></span><code>&quot;differential&quot;: {
    &quot;element&quot;: [
      {
        &quot;id&quot;: &quot;Observation.code.coding&quot;,
        &quot;path&quot;: &quot;Observation.code.coding&quot;,
        &quot;slicing&quot;: {
          &quot;discriminator&quot;: [
            {
              &quot;type&quot;: &quot;value&quot;,
              &quot;path&quot;: &quot;code&quot;
            }
          ],
          &quot;rules&quot;: &quot;open&quot;
        },
        &quot;min&quot;: 1
      },
      {
        &quot;id&quot;: &quot;Observation.code.coding:generalCode&quot;,
        &quot;path&quot;: &quot;Observation.code.coding&quot;,
        &quot;sliceName&quot;: &quot;generalCode&quot;,
        &quot;min&quot;: 1,
        &quot;max&quot;: &quot;1&quot;
      },
      {
        &quot;id&quot;: &quot;Observation.code.coding:generalCode.code&quot;,
        &quot;path&quot;: &quot;Observation.code.coding.code&quot;,
        &quot;min&quot;: 1,
        &quot;patternCode&quot;: &quot;8310-5&quot;
      },
      {
        &quot;id&quot;: &quot;Observation.code.coding:oralCode&quot;,
        &quot;path&quot;: &quot;Observation.code.coding&quot;,
        &quot;sliceName&quot;: &quot;oralCode&quot;,
        &quot;min&quot;: 0,
        &quot;max&quot;: &quot;1&quot;
      },
      {
        &quot;id&quot;: &quot;Observation.code.coding:oralCode.code&quot;,
        &quot;path&quot;: &quot;Observation.code.coding.code&quot;,
        &quot;min&quot;: 1,
        &quot;patternCode&quot;: &quot;8331-1&quot;
      }
    ]
  }
</code></pre></div>



<a name="207788746"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/slicing%20and%20pattern/near/207788746" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/slicing.20and.20pattern.html#207788746">(Aug 23 2020 at 19:59)</a>:</h4>
<p>Yes, you need to add the "(exactly)" after your code.coding... = ... lines.  FSH assumes you want patterns by default so you have to tell it that you want an exact match.</p>



<a name="207788813"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/slicing%20and%20pattern/near/207788813" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/slicing.20and.20pattern.html#207788813">(Aug 23 2020 at 20:00)</a>:</h4>
<p>having said that, i think you actually want patternCode as that says that one of the codings must match this pattern but that others can be translations of that.  Which is generally what we as IG authors want.</p>



<a name="207811911"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/slicing%20and%20pattern/near/207811911" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mika Tuomainen <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/slicing.20and.20pattern.html#207811911">(Aug 24 2020 at 06:48)</a>:</h4>
<p>Thank you <span class="user-mention" data-user-id="192166">@Jean Duteau</span> ! "(exactly)" makes the trick I wanted. </p>
<p>My example is just a testing case. I was trying to produce something like this: <a href="https://www.hl7.org/fhir/bodyheight.profile.json.html">https://www.hl7.org/fhir/bodyheight.profile.json.html</a>, there "Observation.code.coding:BodyHeightCode.code" is fixedCode.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
