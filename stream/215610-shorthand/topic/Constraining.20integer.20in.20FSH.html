---
layout: page
title: "FHIR Chat  · Constraining integer in FSH · shorthand"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/index.html">shorthand</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Constraining.20integer.20in.20FSH.html">Constraining integer in FSH</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="211635700"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Constraining%20integer%20in%20FSH/near/211635700" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nathan Davis <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Constraining.20integer.20in.20FSH.html#211635700">(Sep 29 2020 at 15:18)</a>:</h4>
<p>How do I restrict valueInteger to values of 0-10 in FSH?</p>



<a name="211639944"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Constraining%20integer%20in%20FSH/near/211639944" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Constraining.20integer.20in.20FSH.html#211639944">(Sep 29 2020 at 15:44)</a>:</h4>
<p>Sounds like either an fp invariant or a valueset binding to me</p>



<a name="211644459"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Constraining%20integer%20in%20FSH/near/211644459" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Constraining.20integer.20in.20FSH.html#211644459">(Sep 29 2020 at 16:13)</a>:</h4>
<p>Yes, I think you'd need to create in invariant using FHIRPath.  First you <a href="https://build.fhir.org/ig/HL7/fhir-shorthand/reference.html#defining-invariants">create the Invariant</a>.  Something like this:</p>
<div class="codehilite"><pre><span></span><code>Invariant:  zero-to-ten
Description: &quot;Value must be an integer between 0 and 10 (inclusive)&quot;
Expression: &quot;$this &gt;= 0 and $this &lt;= 10&quot;
Severity:   #error
</code></pre></div>


<p>And then in your profile (assuming on Observation):</p>
<div class="codehilite"><pre><span></span><code>* valueInteger obeys zero-to-ten
</code></pre></div>


<p>Or if <code>value[x]</code> is restricted to only allow integer anyway, you can just do:</p>
<div class="codehilite"><pre><span></span><code>* value[x] obeys zero-to-ten
</code></pre></div>



<a name="211647259"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Constraining%20integer%20in%20FSH/near/211647259" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nathan Davis <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Constraining.20integer.20in.20FSH.html#211647259">(Sep 29 2020 at 16:32)</a>:</h4>
<p><span class="user-mention" data-user-id="191427">@Jens Villadsen</span> <span class="user-mention" data-user-id="191469">@Chris Moesel</span> Thank you!</p>



<a name="211684250"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Constraining%20integer%20in%20FSH/near/211684250" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Constraining.20integer.20in.20FSH.html#211684250">(Sep 29 2020 at 21:06)</a>:</h4>
<p>why not use minValue and maxValue ?</p>



<a name="211688036"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Constraining%20integer%20in%20FSH/near/211688036" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Constraining.20integer.20in.20FSH.html#211688036">(Sep 29 2020 at 21:38)</a>:</h4>
<p>Honestly?  Because I forgot they exist?</p>



<a name="211688350"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Constraining%20integer%20in%20FSH/near/211688350" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Constraining.20integer.20in.20FSH.html#211688350">(Sep 29 2020 at 21:41)</a>:</h4>
<p>OK.  So a better way would be:</p>
<div class="codehilite"><pre><span></span><code>* valueInteger ^minValueInteger = 0
* valueInteger ^maxValueInteger = 10
</code></pre></div>


<p>Or if <code>value[x]</code> is restricted to only allow integer anyway:</p>
<div class="codehilite"><pre><span></span><code>* value[x] ^minValueInteger = 0
* value[x] ^maxValueInteger = 10
</code></pre></div>


<p>Thanks for keeping me honest, <span class="user-mention" data-user-id="191316">@Grahame Grieve</span>!</p>



<a name="211739972"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Constraining%20integer%20in%20FSH/near/211739972" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Constraining.20integer.20in.20FSH.html#211739972">(Sep 30 2020 at 10:21)</a>:</h4>
<p>Lol</p>



<a name="263969205"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Constraining%20integer%20in%20FSH/near/263969205" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Moritz Kähler <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Constraining.20integer.20in.20FSH.html#263969205">(Dec 07 2021 at 08:08)</a>:</h4>
<p>Hi, I'm not sure if it's correct to post the question here.<br>
If I try to express min/max value in the same way for valueQuantity it does not work. </p>
<ul>
<li>valueQuantity ^minValueQuantity = 0</li>
<li>valueQuantity ^maxValueQuantity  = 100</li>
</ul>
<p>see example here<br>
<a href="https://fshschool.org/FSHOnline/#/share/3pRcOuL">https://fshschool.org/FSHOnline/#/share/3pRcOuL</a></p>
<p>causes: <br>
error Cannot assign number value: 0. Value does not match element type: Quantity<br>
  Line: 12<br>
error Cannot assign number value: 100. Value does not match element type: Quantity<br>
  Line: 13</p>
<p>In XML/JSON format this is supported. <br>
Any ideas?</p>



<a name="264000640"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Constraining%20integer%20in%20FSH/near/264000640" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Constraining.20integer.20in.20FSH.html#264000640">(Dec 07 2021 at 13:30)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="355911">@Moritz Kähler</span>.  Assigning a Quantity in FSH requires you to specify the units.  So you need to do something more like this:</p>
<div class="codehilite"><pre><span></span><code>* valueQuantity ^minValueQuantity = 0 &#39;kg&#39;
* valueQuantity ^maxValueQuantity  = 100 &#39;kg&#39;
</code></pre></div>
<p>If you really wanted to specify the value only (without units), then you'd need to do this:</p>
<div class="codehilite"><pre><span></span><code>* valueQuantity ^minValueQuantity.value = 0
* valueQuantity ^maxValueQuantity.value  = 100
</code></pre></div>
<p>BUT... I would not recommend that.  For the min/max to be meaningful, you really ought to set the units.</p>



<a name="264011265"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Constraining%20integer%20in%20FSH/near/264011265" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Moritz Kähler <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Constraining.20integer.20in.20FSH.html#264011265">(Dec 07 2021 at 14:48)</a>:</h4>
<p>Hi Chris Moesel, thank you for the quick answer. <br>
I can build the .fsh files now. But if I validate resources against the profile (using hapi server) the validation does not fail if I provide a value less than 0. <br>
If I use Invariants, the validation fails. Is this an issue with hapi or is this the intended behavior?</p>



<a name="264064484"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Constraining%20integer%20in%20FSH/near/264064484" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Constraining.20integer.20in.20FSH.html#264064484">(Dec 07 2021 at 20:10)</a>:</h4>
<p>That sounds like a HAPI validator issue to me.</p>



<a name="264109013"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Constraining%20integer%20in%20FSH/near/264109013" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Constraining.20integer.20in.20FSH.html#264109013">(Dec 08 2021 at 03:56)</a>:</h4>
<p>you're right. The validator will start validating min and max quantities when next released</p>



<a name="264124006"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Constraining%20integer%20in%20FSH/near/264124006" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Moritz Kähler <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Constraining.20integer.20in.20FSH.html#264124006">(Dec 08 2021 at 08:19)</a>:</h4>
<p>Thanks for confirming the issue with validator. Good to know, that this will be fixed in the next release.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
