---
layout: page
title: "FHIR Chat  · gofsh gotchas - watch out for file name clobbering · shorthand"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/index.html">shorthand</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/gofsh.20gotchas.20-.20watch.20out.20for.20file.20name.20clobbering.html">gofsh gotchas - watch out for file name clobbering</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="265569494"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/gofsh%20gotchas%20-%20watch%20out%20for%20file%20name%20clobbering/near/265569494" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hank Lenzi <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/gofsh.20gotchas.20-.20watch.20out.20for.20file.20name.20clobbering.html#265569494">(Dec 20 2021 at 14:23)</a>:</h4>
<div class="codehilite"><pre><span></span><code>I just bumped into this issue, and I thought it might be worth writing a note for the gofsh newbie (me included):
When one does a
gofsh . -o &lt;DIRECTORY&gt;
In the ouptut directory (specified with &quot;-o&quot;), gofsh will create a directory
tree
&lt;DIRECTORY&gt;/fsh/input
Then, it will separate codesystems and valueset in /different/ directories.
This has practical consequences: it will create two directories:
/valuesets /codesystems
Here&#39;s the gotcha: they will have two files with the /same name/

input/fsh/valuesets on  master 
❯ cat Raça-Cor.fsh 
ValueSet: Raça-Cor
Id: br-core-valueset-patient-raceethnicity-race
Description: &quot;Códigos para representação de raça/cor no Brasil.&quot;

* ^meta.lastUpdated = &quot;2020-03-12T13:25:39.619+00:00&quot;
* ^language = #pt-BR
* ^url = &quot;http://www.saude.gov.br/fhir/r4/ValueSet/BRRacaCor-1.0&quot;
* ^version = &quot;1.0&quot;
* ^status = #active
* ^experimental = false
* ^publisher = &quot;Ministério da Saúde do Brasil&quot;
* ^immutable = false
* include codes from system $BRRacaCor

❯ cd ../codesystems/

input/fsh/codesystems on  master 
❯ cat Raça-Cor.fsh 
CodeSystem: Raça-Cor
Id: br-core-codesystem-patient-raceethnicity-race
Description: &quot;Códigos para representação de raça/cor.&quot;

* ^meta.lastUpdated = &quot;2020-03-11T18:20:19.538+00:00&quot;
* ^language = #pt-BR
* ^url = &quot;http://www.saude.gov.br/fhir/r4/CodeSystem/BRRacaCor&quot;
* ^version = &quot;201701A&quot;
* ^status = #active
* ^experimental = false
* ^publisher = &quot;Ministério da Saúde do Brasil&quot;
* ^content = #complete
* #01 &quot;Branca&quot;
* #02 &quot;Preta&quot;
* #03 &quot;Parda&quot;
* #04 &quot;Amarela&quot;
* #05 &quot;Indígena&quot;

What is the problem with that? It&#39;s that you must fuse those 2 directories into
a single one (input/fsh/resources/) so that you can use sushi and the IG publisher.
When you move those files, one will clobber the other, as they will have the _same_
name (as above: &quot;Raça-Cor.fsh&quot;). So, be careful.
</code></pre></div>



<a name="265573829"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/gofsh%20gotchas%20-%20watch%20out%20for%20file%20name%20clobbering/near/265573829" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mareike Przysucha <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/gofsh.20gotchas.20-.20watch.20out.20for.20file.20name.20clobbering.html#265573829">(Dec 20 2021 at 15:00)</a>:</h4>
<p>I don't see the problem right now. I also had files with the same name in different folders, yet sushi made it correct. Do you have a description of unwanted behaviour in sushi?</p>



<a name="265608859"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/gofsh%20gotchas%20-%20watch%20out%20for%20file%20name%20clobbering/near/265608859" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/gofsh.20gotchas.20-.20watch.20out.20for.20file.20name.20clobbering.html#265608859">(Dec 20 2021 at 19:55)</a>:</h4>
<p>I agree with <span class="user-mention" data-user-id="196115">@Mareike Przysucha</span>.  You shouldn't have to move those files into a shared folder.  You can keep the input folder (and subfolders) exactly as GoFSH creates it.</p>



<a name="265608895"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/gofsh%20gotchas%20-%20watch%20out%20for%20file%20name%20clobbering/near/265608895" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/gofsh.20gotchas.20-.20watch.20out.20for.20file.20name.20clobbering.html#265608895">(Dec 20 2021 at 19:55)</a>:</h4>
<p>Also note that if you prefer that GoFSH output it a different way, GoFSH supports a few different output "styles": <a href="https://fshschool.org/docs/gofsh/running/#style">https://fshschool.org/docs/gofsh/running/#style</a></p>



<a name="265686865"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/gofsh%20gotchas%20-%20watch%20out%20for%20file%20name%20clobbering/near/265686865" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hank Lenzi <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/gofsh.20gotchas.20-.20watch.20out.20for.20file.20name.20clobbering.html#265686865">(Dec 21 2021 at 13:51)</a>:</h4>
<p>You've misunderstood. This is not about sushi. This is about gofsh creating two files with the same name. When you move those into sushir /resources, file name clobbering occurs (in the case you want to keep you codesystems and valuesets in the same file). I hope I've made myself clear now.</p>



<a name="265687936"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/gofsh%20gotchas%20-%20watch%20out%20for%20file%20name%20clobbering/near/265687936" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hank Lenzi <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/gofsh.20gotchas.20-.20watch.20out.20for.20file.20name.20clobbering.html#265687936">(Dec 21 2021 at 14:00)</a>:</h4>
<p>You take two different JSON files with different names (one for codesystem the othe for vaueset), pass them through gofsh, the output will be two files with the same name. <br>
❯ cat codesystem-br-core-address-line-streettype.json <br>
{<br>
    "resourceType": "CodeSystem",<br>
    "id": "br-core-codesystem-streettype",<br>
    "meta": {<br>
        "lastUpdated": "2020-04-02T13:03:21.687+00:00"<br>
    },<br>
    "language": "pt-BR",<br>
    "url": "<a href="http://www.saude.gov.br/fhir/r4/CodeSystem/BRTipoLogradouro">http://www.saude.gov.br/fhir/r4/CodeSystem/BRTipoLogradouro</a>",<br>
    "version": "201701A",<br>
    "name": "Tipo_de_Logradouro",<br>
    "status": "active",<br>
    "experimental": false,<br>
    "date": "2020-04-02T13:03:18.6480245+00:00",<br>
    "publisher": "Ministério da Saúde do Brasil",<br>
    "description": "Classificação os tipos de logradouros existentes para uso em endereços estruturados.",<br>
    "content": "complete",<br>
    "concept": [<br>
        {<br>
            "code": "008",<br>
            "display": "Avenida"<br>
        },<br>
        {<br>
            "code": "081",<br>
            "display": "Rua"<br>
        }<br>
    ]<br>
}❯ cat valueset-br-core-address-line-streettype.json <br>
{<br>
    "resourceType": "ValueSet",<br>
    "id": "br-core-valueset-address-line-streettype",<br>
    "meta": {<br>
        "lastUpdated": "2020-03-12T14:50:48.259+00:00"<br>
    },<br>
    "language": "pt-BR",<br>
    "url": "<a href="http://www.saude.gov.br/fhir/r4/ValueSet/BRTipoLogradouro-1.0">http://www.saude.gov.br/fhir/r4/ValueSet/BRTipoLogradouro-1.0</a>",<br>
    "version": "1.0",<br>
    "name": "Tipo_de_Logradouro",<br>
    "status": "active",<br>
    "experimental": false,<br>
    "date": "2020-03-12T14:50:47.8940392+00:00",<br>
    "publisher": "Ministério da Saúde do Brasil",<br>
    "description": "Classifica o tipo de logradouro.",<br>
    "immutable": false,<br>
    "compose": {<br>
        "include": [<br>
            {<br>
                "system": "<a href="http://www.saude.gov.br/fhir/r4/CodeSystem/BRTipoLogradouro">http://www.saude.gov.br/fhir/r4/CodeSystem/BRTipoLogradouro</a>",<br>
                "version": "*"<br>
            }<br>
        ]<br>
    }<br>
}</p>
<p>The output:</p>
<p>❯ cat Tipo_de_Logradouro.fsh <br>
ValueSet: Tipo_de_Logradouro<br>
Id: br-core-valueset-address-line-streettype<br>
Description: "Classifica o tipo de logradouro."</p>
<ul>
<li>^meta.lastUpdated = "2020-03-12T14:50:48.259+00:00"</li>
<li>^language = #pt-BR</li>
<li>^url = "<a href="http://www.saude.gov.br/fhir/r4/ValueSet/BRTipoLogradouro-1.0">http://www.saude.gov.br/fhir/r4/ValueSet/BRTipoLogradouro-1.0</a>"</li>
<li>^version = "1.0"</li>
<li>^status = #active</li>
<li>^experimental = false</li>
<li>^date = "2020-03-12T14:50:47.8940392+00:00"</li>
<li>^publisher = "Ministério da Saúde do Brasil"</li>
<li>^immutable = false</li>
<li>include codes from system <a href="http://www.saude.gov.br/fhir/r4/CodeSystem/BRTipoLogradouro|*">http://www.saude.gov.br/fhir/r4/CodeSystem/BRTipoLogradouro|*</a></li>
</ul>
<p>input/fsh/codesystems on  master [!?] <br>
❯ cat Tipo_de_Logradouro.fsh <br>
CodeSystem: Tipo_de_Logradouro<br>
Id: br-core-codesystem-streettype<br>
Description: "Classificação os tipos de logradouros existentes para uso em endereços estruturados."</p>
<ul>
<li>^meta.lastUpdated = "2020-04-02T13:03:21.687+00:00"</li>
<li>^language = #pt-BR</li>
<li>^url = "<a href="http://www.saude.gov.br/fhir/r4/CodeSystem/BRTipoLogradouro">http://www.saude.gov.br/fhir/r4/CodeSystem/BRTipoLogradouro</a>"</li>
<li>^version = "201701A"</li>
<li>^status = #active</li>
<li>^experimental = false</li>
<li>^date = "2020-04-02T13:03:18.6480245+00:00"</li>
<li>^publisher = "Ministério da Saúde do Brasil"</li>
<li>^content = #complete</li>
<li>#008 "Avenida"</li>
<li>#081 "Rua"</li>
</ul>
<p>Two files with the same name, from two files, with different names.</p>



<a name="265687968"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/gofsh%20gotchas%20-%20watch%20out%20for%20file%20name%20clobbering/near/265687968" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hank Lenzi <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/gofsh.20gotchas.20-.20watch.20out.20for.20file.20name.20clobbering.html#265687968">(Dec 21 2021 at 14:01)</a>:</h4>
<p>You take two different JSON files with different names (one for codesystem the othe for vaueset), pass them through gofsh, the output will be two files with the same name. <br>
❯ cat codesystem-br-core-address-line-streettype.json <br>
{<br>
    "resourceType": "CodeSystem",<br>
    "id": "br-core-codesystem-streettype",<br>
    "meta": {<br>
        "lastUpdated": "2020-04-02T13:03:21.687+00:00"<br>
    },<br>
    "language": "pt-BR",<br>
    "url": "<a href="http://www.saude.gov.br/fhir/r4/CodeSystem/BRTipoLogradouro">http://www.saude.gov.br/fhir/r4/CodeSystem/BRTipoLogradouro</a>",<br>
    "version": "201701A",<br>
    "name": "Tipo_de_Logradouro",<br>
    "status": "active",<br>
    "experimental": false,<br>
    "date": "2020-04-02T13:03:18.6480245+00:00",<br>
    "publisher": "Ministério da Saúde do Brasil",<br>
    "description": "Classificação os tipos de logradouros existentes para uso em endereços estruturados.",<br>
    "content": "complete",<br>
    "concept": [<br>
        {<br>
            "code": "008",<br>
            "display": "Avenida"<br>
        },<br>
        {<br>
            "code": "081",<br>
            "display": "Rua"<br>
        }<br>
    ]<br>
}❯ cat valueset-br-core-address-line-streettype.json <br>
{<br>
    "resourceType": "ValueSet",<br>
    "id": "br-core-valueset-address-line-streettype",<br>
    "meta": {<br>
        "lastUpdated": "2020-03-12T14:50:48.259+00:00"<br>
    },<br>
    "language": "pt-BR",<br>
    "url": "<a href="http://www.saude.gov.br/fhir/r4/ValueSet/BRTipoLogradouro-1.0">http://www.saude.gov.br/fhir/r4/ValueSet/BRTipoLogradouro-1.0</a>",<br>
    "version": "1.0",<br>
    "name": "Tipo_de_Logradouro",<br>
    "status": "active",<br>
    "experimental": false,<br>
    "date": "2020-03-12T14:50:47.8940392+00:00",<br>
    "publisher": "Ministério da Saúde do Brasil",<br>
    "description": "Classifica o tipo de logradouro.",<br>
    "immutable": false,<br>
    "compose": {<br>
        "include": [<br>
            {<br>
                "system": "<a href="http://www.saude.gov.br/fhir/r4/CodeSystem/BRTipoLogradouro">http://www.saude.gov.br/fhir/r4/CodeSystem/BRTipoLogradouro</a>",<br>
                "version": "*"<br>
            }<br>
        ]<br>
    }<br>
}</p>
<p>The output:</p>
<p>❯ cat Tipo_de_Logradouro.fsh <br>
ValueSet: Tipo_de_Logradouro<br>
Id: br-core-valueset-address-line-streettype<br>
Description: "Classifica o tipo de logradouro."</p>
<ul>
<li>^meta.lastUpdated = "2020-03-12T14:50:48.259+00:00"</li>
<li>^language = #pt-BR</li>
<li>^url = "<a href="http://www.saude.gov.br/fhir/r4/ValueSet/BRTipoLogradouro-1.0">http://www.saude.gov.br/fhir/r4/ValueSet/BRTipoLogradouro-1.0</a>"</li>
<li>^version = "1.0"</li>
<li>^status = #active</li>
<li>^experimental = false</li>
<li>^date = "2020-03-12T14:50:47.8940392+00:00"</li>
<li>^publisher = "Ministério da Saúde do Brasil"</li>
<li>^immutable = false</li>
<li>include codes from system <a href="http://www.saude.gov.br/fhir/r4/CodeSystem/BRTipoLogradouro|*">http://www.saude.gov.br/fhir/r4/CodeSystem/BRTipoLogradouro|*</a></li>
</ul>
<p>input/fsh/codesystems on  master [!?] <br>
❯ cat Tipo_de_Logradouro.fsh <br>
CodeSystem: Tipo_de_Logradouro<br>
Id: br-core-codesystem-streettype<br>
Description: "Classificação os tipos de logradouros existentes para uso em endereços estruturados."</p>
<ul>
<li>^meta.lastUpdated = "2020-04-02T13:03:21.687+00:00"</li>
<li>^language = #pt-BR</li>
<li>^url = "<a href="http://www.saude.gov.br/fhir/r4/CodeSystem/BRTipoLogradouro">http://www.saude.gov.br/fhir/r4/CodeSystem/BRTipoLogradouro</a>"</li>
<li>^version = "201701A"</li>
<li>^status = #active</li>
<li>^experimental = false</li>
<li>^date = "2020-04-02T13:03:18.6480245+00:00"</li>
<li>^publisher = "Ministério da Saúde do Brasil"</li>
<li>^content = #complete</li>
<li>#008 "Avenida"</li>
<li>#081 "Rua"</li>
</ul>
<p>Two files with the same name, from two files, with different names.</p>



<a name="265688156"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/gofsh%20gotchas%20-%20watch%20out%20for%20file%20name%20clobbering/near/265688156" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hank Lenzi <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/gofsh.20gotchas.20-.20watch.20out.20for.20file.20name.20clobbering.html#265688156">(Dec 21 2021 at 14:02)</a>:</h4>
<p>Sorry, I don't know what I did in Zulip, I double-posted. I apologize for that.</p>



<a name="265689836"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/gofsh%20gotchas%20-%20watch%20out%20for%20file%20name%20clobbering/near/265689836" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/gofsh.20gotchas.20-.20watch.20out.20for.20file.20name.20clobbering.html#265689836">(Dec 21 2021 at 14:20)</a>:</h4>
<p>OK.  GoFSH uses the <code>name</code> of the entity as the file name.  Since your CS and VS have the same <code>name</code> (i.e., the <code>name</code> property in the original JSON), then they result in FSH files with the same name.  Since GoFSH puts them in different folders, there is no clash there.</p>
<p>You can <em>keep</em> them in separate folders in a SUSHI project (just like GoFSH produces them).  But if you <em>want</em> to move them so they are in the same folder, you will need to rename at least one of the files.  Renaming files is safe; it should not affect the output.  Since GoFSH is intended to be a <em>one-time</em> operation, you'll just need to do this that one time (and, again, that's only if you choose to move all your files into the same folder).</p>



<a name="265691470"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/gofsh%20gotchas%20-%20watch%20out%20for%20file%20name%20clobbering/near/265691470" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hank Lenzi <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/gofsh.20gotchas.20-.20watch.20out.20for.20file.20name.20clobbering.html#265691470">(Dec 21 2021 at 14:36)</a>:</h4>
<p>Well, I suppose gofsh was meant, indeed,  to be a one-time operation. But then you create something, put it out to the World, and users like me start using it a little bit differently. The way we're using is to reverse-engineer a buggy "BR-Core" with the much more readable FSH syntax.  FSH is the future of FHIR information modelling  (there's no doubt in my mind), and we're resolute on learning it. Hence, our process of shoving everything in /resource so we can navigate the file tree easily. <br>
I see the issue with "name". I didn't create those and I try no to deviate to much from the original source. <br>
This is a minor issue. Thanks for the answers. It wasn't really clear to me that gofsh used name of the entity (eventually, I got that from debugging my error logs). <br>
I would, however, warn about this somewhere in the documentation.</p>



<a name="265692299"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/gofsh%20gotchas%20-%20watch%20out%20for%20file%20name%20clobbering/near/265692299" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/gofsh.20gotchas.20-.20watch.20out.20for.20file.20name.20clobbering.html#265692299">(Dec 21 2021 at 14:43)</a>:</h4>
<p>Thanks, <span class="user-mention" data-user-id="437401">@Hank Lenzi</span>.  It's always fun and interesting to see our stuff used in new and interesting ways!  Depending on how buggy BR-Core is, GoFSH might still stumble around a little.  It does expect the input to follow the FHIR spec to at least <em>some</em> degree!</p>
<p>If you haven't already, I would encourage you to try playing with the different output styles.  Maybe you'll see something you like better.  We'll also consider adding a new style that does a file-per-definition but dumps them all into the same folder.  In the case, we'd probably prefix them w/ the type (So, <code>ValueSet-SomeName</code>, <code>CodeSystem-SomeName</code>, etc.).</p>



<a name="265692500"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/gofsh%20gotchas%20-%20watch%20out%20for%20file%20name%20clobbering/near/265692500" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/gofsh.20gotchas.20-.20watch.20out.20for.20file.20name.20clobbering.html#265692500">(Dec 21 2021 at 14:45)</a>:</h4>
<p>It's <a href="https://github.com/FHIR/GoFSH/issues/169">GoFSH#169</a> if you'd like to track it (although I cannot guarantee if/when we'll get to it).</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
