---
layout: page
title: "FHIR Chat  · Slicing help ? · shorthand"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/index.html">shorthand</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Slicing.20help.20.3F.html">Slicing help ?</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="250617806"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Slicing%20help%20%3F/near/250617806" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Janaka Peiris <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Slicing.20help.20.3F.html#250617806">(Aug 25 2021 at 13:16)</a>:</h4>
<p>I need to slice Reference.identifier into 4 slices. SUSHI does not give any validation error on this, but IG Publisher does:</p>
<div class="codehilite"><pre><span></span><code>Generating Snapshots                                                             (00:36.0602)
Unable to generate snapshot for http://hl7.no/fhir/StructureDefinition/no-domain-vitalsignsobservation-subjectreference: Attempt to a slice an element that does not repeat: Reference.identifier/Reference.identifier from http://hl7.org/fhir/StructureDefinition/Reference in http://hl7.no/fhir/StructureDefinition/no-domain-vitalsignsobservation-subjectreference, at element Reference.identifier (slice = FNR, DNR, HNR, FHN)
</code></pre></div>
<p>FSH:</p>
<div class="codehilite"><pre><span></span><code>* identifier ^slicing.discriminator.type = #value
* identifier ^slicing.discriminator.path = &quot;system&quot;
* identifier ^slicing.rules = #open
* identifier contains
    FNR 0..1 and
    DNR 0..1 and
    HNR 0..1 and
    FHN 0..1
</code></pre></div>
<p>What changes are needed in FSH ?</p>



<a name="250621047"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Slicing%20help%20%3F/near/250621047" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Slicing.20help.20.3F.html#250621047">(Aug 25 2021 at 13:39)</a>:</h4>
<p>In some cases around slicing, SUSHI has a more hands-off approach and allows you to specify some things that may not be technically correct/allowed.  It's my understanding that FHIR only allows you to slice lists (upper cardinality &gt; 1) or choice elements (elements ending in <code>[x]</code>).  This is likely why the IG publisher is complaining, because <code>Reference.identifier</code> is neither a list nor a choice.  I think I recall some conversations where others have asked for single-cardinality non-choice elements to be supported, so you could try to do some searching to find those threads if you want to add your voice to them.</p>
<p>Depending on what you want to do and where you need to do it, you may have a few choices:</p>
<ul>
<li>Do the slicing in the profiles where the reference is used (although this only works if the reference path itself is a list -- and I'm not sure that happens much with references).</li>
<li>Create a different profile on Reference for each identifier type you want to support and then constrain the reference uses to only allow those profiles (but then you're not allowing other, non-conforming reference types).</li>
<li>Use invariants to specify whatever conformance rules you were going to try to specify in the slices.</li>
</ul>



<a name="250632481"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Slicing%20help%20%3F/near/250632481" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Corey Spears <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Slicing.20help.20.3F.html#250632481">(Aug 25 2021 at 15:01)</a>:</h4>
<p>Just for reference (in case it might be helpful to anyone), there was another discussion about slicing non-repeating non-polymorphic elements: <a href="#narrow/stream/179252-IG-creation/topic/Slicing.20non-repeating.20elements">https://chat.fhir.org/#narrow/stream/179252-IG-creation/topic/Slicing.20non-repeating.20elements</a></p>



<a name="250640293"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Slicing%20help%20%3F/near/250640293" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Slicing.20help.20.3F.html#250640293">(Aug 25 2021 at 16:01)</a>:</h4>
<p>Ah yes, that's the one I was thinking of.  Thanks, <span class="user-mention" data-user-id="191529">@Corey Spears</span>!</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
