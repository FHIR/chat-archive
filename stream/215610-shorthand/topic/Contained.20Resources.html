---
layout: page
title: "FHIR Chat  · Contained Resources · shorthand"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/index.html">shorthand</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Contained.20Resources.html">Contained Resources</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="188108708"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Contained%20Resources/near/188108708" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Contained.20Resources.html#188108708">(Feb 13 2020 at 14:05)</a>:</h4>
<p>Is there support for contained resources?</p>



<a name="188109622"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Contained%20Resources/near/188109622" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Contained.20Resources.html#188109622">(Feb 13 2020 at 14:16)</a>:</h4>
<p>That's a good question...  We don't have tests for that.  As you know, <code>contained</code> has type <code>Resource</code> -- so I suspect that maybe SUSHI would only allow you to set fields that are on <code>Resource</code> (if you defined the contained resources inline in the instance).  We probably need to come up w/ a syntax that would allow the author to indicate a more specific type (than <code>Resource</code>) when doing that.  We also could/should consider allowing authors to define contained resources as separate instances (using <code>Instance:</code> keyword) and then reference them as a contained resource in another instance.</p>



<a name="188110959"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Contained%20Resources/near/188110959" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Contained.20Resources.html#188110959">(Feb 13 2020 at 14:32)</a>:</h4>
<p>I didn't mean to go as far to allow collaborative work. I was wondering how to reference them since we cannot put Reference(#contained_resource_01)</p>



<a name="188111191"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Contained%20Resources/near/188111191" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Contained.20Resources.html#188111191">(Feb 13 2020 at 14:35)</a>:</h4>
<p>syntax for declaration - could be a nested syntax? <br>
e.g. everything under the keyword "contained" would be a contained resource.</p>



<a name="199046976"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Contained%20Resources/near/199046976" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Pyke <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Contained.20Resources.html#199046976">(May 28 2020 at 16:37)</a>:</h4>
<p>I'm trying to add a contained resources with a choice of resources allowed to an extension (because I like being an edge case) and can't find an example of contained resources in FSH or any mention of it in the docs.  Can anyone show me a pointer or example as to how that might be done?</p>



<a name="199048707"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Contained%20Resources/near/199048707" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Contained.20Resources.html#199048707">(May 28 2020 at 16:52)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="192587">@David Pyke</span>.  Here's a quick example.  Let me know if you were looking for something different:</p>
<div class="codehilite"><pre><span></span><code>// First define the instances you want contained as inline instances
Instance: ShirleyTemple
InstanceOf: Patient
Usage: #inline
* name.given = &quot;Shirley&quot;
* name.family = &quot;Temple&quot;

// You could define more the same way...

// Now in your instance that you want to contain it in, assign it to contained
Instance: MyExtension
InstanceOf: SomeExtension
Usage: #example
* contained[0] = ShirleyTemple
// you could add others via contained[1], contained[2], etc
</code></pre></div>



<a name="199048774"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Contained%20Resources/near/199048774" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Pyke <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Contained.20Resources.html#199048774">(May 28 2020 at 16:52)</a>:</h4>
<p>I meant  an example of how to define the extension.  Sorry</p>



<a name="199048873"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Contained%20Resources/near/199048873" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Pyke <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Contained.20Resources.html#199048873">(May 28 2020 at 16:53)</a>:</h4>
<p>Or really, how to define a contained resource in FSH in general</p>



<a name="199049206"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Contained%20Resources/near/199049206" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Contained.20Resources.html#199049206">(May 28 2020 at 16:56)</a>:</h4>
<p>Oh.  Do you mean something like this:</p>
<div class="codehilite"><pre><span></span><code>Extension: MyExtension
* contained only Condition or Procedure or MedicationOrder
</code></pre></div>


<p>If so, that's how you do it... <em>but</em> it seems that SUSHI might generate the StructureDefinition in a way that the IG Publisher no longer supports.  I'm not sure on that though -- so if you run into issues, do let us know.  It's something we need to look into.</p>



<a name="199049587"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Contained%20Resources/near/199049587" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Pyke <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Contained.20Resources.html#199049587">(May 28 2020 at 16:59)</a>:</h4>
<p>THat's exactly what I was looking for. I'll see what the publisher does with it</p>



<a name="199050463"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Contained%20Resources/near/199050463" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Pyke <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Contained.20Resources.html#199050463">(May 28 2020 at 17:06)</a>:</h4>
<p>I probably should have mentioned it was a sub-extension.  I defined it as:</p>
<ul>
<li>extension[subscriber].contained only Patient or Practitioner or RelatedPerson or Organization<br>
sushi fails with <br>
error No element found at path extension[subscriber].contained for CEQextension, skipping rule</li>
</ul>



<a name="199052107"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Contained%20Resources/near/199052107" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Pyke <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Contained.20Resources.html#199052107">(May 28 2020 at 17:17)</a>:</h4>
<p>extension[subscriber].value[x] only contained didn't work.  Not that I expected it to.</p>



<a name="199052739"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Contained%20Resources/near/199052739" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Freiter <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Contained.20Resources.html#199052739">(May 28 2020 at 17:21)</a>:</h4>
<p>I could be missing something here, but does Extension have a <code>contained</code> field on it? I know <code>contained</code> is defined on DomainResource, and therefore most resources, but I didn't think that Extension had a <code>contained</code>.</p>



<a name="199053665"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Contained%20Resources/near/199053665" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Pyke <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Contained.20Resources.html#199053665">(May 28 2020 at 17:26)</a>:</h4>
<p>It doesn't, it only has value[x].  THat's my problem I'm not sure how to set the value to a contained resource.</p>



<a name="199053824"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Contained%20Resources/near/199053824" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Pyke <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Contained.20Resources.html#199053824">(May 28 2020 at 17:27)</a>:</h4>
<p>If I'm trying to do the impossible, that might be my problem</p>



<a name="199054137"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Contained%20Resources/near/199054137" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Pyke <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Contained.20Resources.html#199054137">(May 28 2020 at 17:29)</a>:</h4>
<p>I'm assuming extension[subscriber].value[x] only valueReference([list of Resources]) contained would be something like what I want</p>



<a name="199054160"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Contained%20Resources/near/199054160" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vassil Peytchev <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Contained.20Resources.html#199054160">(May 28 2020 at 17:29)</a>:</h4>
<p>Are you trying to define a valueReference pointing to a contained resource?</p>



<a name="199054177"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Contained%20Resources/near/199054177" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Pyke <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Contained.20Resources.html#199054177">(May 28 2020 at 17:29)</a>:</h4>
<p>Yes</p>



<a name="199054674"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Contained%20Resources/near/199054674" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Pyke <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Contained.20Resources.html#199054674">(May 28 2020 at 17:33)</a>:</h4>
<p>Ultimately, I'm trying to create a subextension that is a contained resource with a choice of 4 different resource options</p>



<a name="199054712"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Contained%20Resources/near/199054712" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Pyke <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Contained.20Resources.html#199054712">(May 28 2020 at 17:33)</a>:</h4>
<p>How that would be done is the exciting part</p>



<a name="199055800"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Contained%20Resources/near/199055800" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> ryan moehrke <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Contained.20Resources.html#199055800">(May 28 2020 at 17:43)</a>:</h4>
<p>If you want a reference to only point to a contained resource, isn't that declared in the aggregation element? <a href="https://www.hl7.org/fhir/elementdefinition-definitions.html#ElementDefinition.type.aggregation">https://www.hl7.org/fhir/elementdefinition-definitions.html#ElementDefinition.type.aggregation</a><br>
But that would mean you couldn't require it on every use of that extension, just on ones you have added in an extension slice to the structureDefinition..</p>
<p>The other terrible idea I had was to add an invariant that requires the reference value to start with "#" but that seems just as unlikely to be usable</p>



<a name="199057434"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Contained%20Resources/near/199057434" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Pyke <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Contained.20Resources.html#199057434">(May 28 2020 at 17:55)</a>:</h4>
<p>That would work, how do you do that in fsh?</p>



<a name="199057706"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Contained%20Resources/near/199057706" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Pyke <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Contained.20Resources.html#199057706">(May 28 2020 at 17:57)</a>:</h4>
<p>The heck with this, I'm going to push back and do it as a bundle.  I'm sure there's a way to do this but I can't figure it out.</p>



<a name="199058746"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Contained%20Resources/near/199058746" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> ryan moehrke <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Contained.20Resources.html#199058746">(May 28 2020 at 18:04)</a>:</h4>
<p>I just used a lot of ^ escaped lines, obviously you would use #contained not #bundled but this is the format:</p>
<p>Profile:        PatientSingleAgg<br>
Parent:         Patient<br>
Id:             PatientSingleAgg<br>
Title:          "PatientSingleAgg"<br>
Description:    "PatientSingleAgg profile for testing"</p>
<ul>
<li>contact.organization ^type.code = Reference</li>
<li>contact.organization ^type.targetProfile = <a href="http://hl7.org/fhir/StructureDefinition/Organization">http://hl7.org/fhir/StructureDefinition/Organization</a></li>
<li>contact.organization ^type.aggregation = #bundled</li>
</ul>



<a name="199058973"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Contained%20Resources/near/199058973" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Pyke <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Contained.20Resources.html#199058973">(May 28 2020 at 18:06)</a>:</h4>
<p>I'll give it a shot and see how sushi and the publisher like that</p>



<a name="199060071"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Contained%20Resources/near/199060071" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vassil Peytchev <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Contained.20Resources.html#199060071">(May 28 2020 at 18:12)</a>:</h4>
<p><span class="user-mention silent" data-user-id="192587">David Pyke</span> <a href="#narrow/stream/215610-shorthand/topic/Contained.20Resources/near/199057706">said</a>:</p>
<blockquote>
<p>The heck with this, I'm going to push back and do it as a bundle.  I'm sure there's a way to do this but I can't figure it out.</p>
</blockquote>
<p>If it can be done as a bundle, it probably should be done as a bundle. Contained resources are not a "packaging" structure...</p>



<a name="199083139"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Contained%20Resources/near/199083139" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Pyke <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Contained.20Resources.html#199083139">(May 28 2020 at 20:36)</a>:</h4>
<p>I agree, I was asked to attempt this by Those That Rule.  Now that I've tried a bunch of different ways, I'm going to just bundle them</p>



<a name="199086246"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Contained%20Resources/near/199086246" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Contained.20Resources.html#199086246">(May 28 2020 at 21:02)</a>:</h4>
<p>Thanks everyone for working this one out.  Sorry I totally misunderstood the question!  BTW, <span class="user-mention" data-user-id="237342">@ryan moehrke</span> -- I think yours could be simplified, right?  The type is already a reference to an Organization, so I don't think you need to repeat that.  You should only need:</p>
<div class="codehilite"><pre><span></span><code>* contact.organization ^type.aggregation = #bundled
</code></pre></div>



<a name="199086344"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Contained%20Resources/near/199086344" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Contained.20Resources.html#199086344">(May 28 2020 at 21:03)</a>:</h4>
<p>Unless you were trying to just show how you could restrict the type to only certain types.  In that case, I think <code>only</code> would still work and would be simpler than using <code>^</code> all the way.</p>



<a name="199088489"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Contained%20Resources/near/199088489" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> ryan moehrke <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Contained.20Resources.html#199088489">(May 28 2020 at 21:25)</a>:</h4>
<p>thanks, for my purposes its probably good as-is but it's good to know there's a better way of going about it</p>



<a name="220159086"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Contained%20Resources/near/220159086" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jabeen Mohammed <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Contained.20Resources.html#220159086">(Dec 16 2020 at 19:13)</a>:</h4>
<p>Hello, <span class="user-mention" data-user-id="191469">@Chris Moesel</span> <span class="user-mention" data-user-id="191832">@Jose Costa Teixeira</span> . wondering if you folks have an syntax on  "contained". I am creating profile of PractitionerRole and looking for a way to have contained Resource type to be only InsurancePlan with card. 1..*</p>



<a name="220159213"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Contained%20Resources/near/220159213" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Contained.20Resources.html#220159213">(Dec 16 2020 at 19:14)</a>:</h4>
<p>so you want to disallow any other contained resources?</p>



<a name="220159304"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Contained%20Resources/near/220159304" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jabeen Mohammed <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Contained.20Resources.html#220159304">(Dec 16 2020 at 19:15)</a>:</h4>
<p>yes</p>



<a name="220159359"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Contained%20Resources/near/220159359" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Contained.20Resources.html#220159359">(Dec 16 2020 at 19:15)</a>:</h4>
<p>and how is the relation between insuranceplan and practitionerrole?</p>



<a name="220159381"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Contained%20Resources/near/220159381" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Contained.20Resources.html#220159381">(Dec 16 2020 at 19:16)</a>:</h4>
<p>PractitionerRole does not link to InsurancePlan normally..</p>



<a name="220160021"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Contained%20Resources/near/220160021" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jabeen Mohammed <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Contained.20Resources.html#220160021">(Dec 16 2020 at 19:21)</a>:</h4>
<p>insuranceplan own the networks which practionerrole participates</p>



<a name="220162046"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Contained%20Resources/near/220162046" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Contained.20Resources.html#220162046">(Dec 16 2020 at 19:35)</a>:</h4>
<p>how do you link? PractitionerRole does not have an attribute that would is a reference to InsurancePlan</p>



<a name="220163143"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Contained%20Resources/near/220163143" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Saul Kravitz <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Contained.20Resources.html#220163143">(Dec 16 2020 at 19:44)</a>:</h4>
<p>Completely off topic:   in the Plan-Net IG, we added an extension to provide the reference from a PractitionerRole to a Network (a profile of Organization, owned by a Payer.   <a href="https://build.fhir.org/ig/HL7/davinci-pdex-plan-net/StructureDefinition-plannet-PractitionerRole.html">https://build.fhir.org/ig/HL7/davinci-pdex-plan-net/StructureDefinition-plannet-PractitionerRole.html</a></p>



<a name="220164309"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Contained%20Resources/near/220164309" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jabeen Mohammed <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Contained.20Resources.html#220164309">(Dec 16 2020 at 19:54)</a>:</h4>
<p>we don't have much information about InsurancePlan resource (were are not the payer) nor we maintained the resource. kind of place holder for downstream system use this and build actual resource (it up to downstream system). this is not reference outside of that specific PractitionerRole.<br>
<span class="user-mention" data-user-id="215604">@Saul Kravitz</span>  our system is back-end processing service.</p>



<a name="220167197"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Contained%20Resources/near/220167197" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Contained.20Resources.html#220167197">(Dec 16 2020 at 20:18)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="343998">@Jabeen Mohammed</span>.  I think <span class="user-mention" data-user-id="191832">@Jose Costa Teixeira</span> is concerned because normally a contained resource is <em>referenced</em> from the profile in some way.  This reference shows how the contained resource is related to the thing that contains it.  A contained resource that is <em>not</em> referenced at all has no formal relationship to the thing containing it.  People can <em>guess</em> at the relationship, but you really ought to formalize it.  One way to do that, as <span class="user-mention" data-user-id="215604">@Saul Kravitz</span> suggested, is to create an extension that references an <code>InsurancePlan</code> to formally represent the relationship between <code>PractitionerRole</code> and <code>InsurancePlan</code>.</p>
<p>I'm not very familiar w/ this domain, so my suggestion may not be exactly right (semantically), but here is an example of how you might do this with FSH if you wanted to represent a <code>PractitionerRole</code> that "accepts" one or more <code>InsurancePlan</code>s (that you want contained):</p>
<div class="codehilite"><pre><span></span><code>Extension: AcceptsInsurancePlan
Id: accepts-insurance-plan
* value[x] 1..1
* value[x] only Reference(InsurancePlan)

Profile: MyPractitionerRole
Parent: PractitionerRole
Id: my-practitioner-role
* contained 1..*
* contained only InsurancePlan
* extension contains AcceptsInsurancePlan named accepts 1..*
</code></pre></div>



<a name="220167911"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Contained%20Resources/near/220167911" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Contained.20Resources.html#220167911">(Dec 16 2020 at 20:23)</a>:</h4>
<p>yes, i was asking because resources can only be contained in other resources if there is a reference from the resource to the contained resource, or if the contained resource references the container resource.</p>



<a name="220167998"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Contained%20Resources/near/220167998" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Contained.20Resources.html#220167998">(Dec 16 2020 at 20:24)</a>:</h4>
<p>if such an extension is created, then the problem is solved</p>



<a name="220171707"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Contained%20Resources/near/220171707" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jabeen Mohammed <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Contained.20Resources.html#220171707">(Dec 16 2020 at 20:55)</a>:</h4>
<p><span class="user-mention" data-user-id="191469">@Chris Moesel</span> <span class="user-mention" data-user-id="191832">@Jose Costa Teixeira</span>  I wish my client client's agree to extension which more of norm. but got find way... hopefully can convince them on extension <span aria-label="grinning face with smiling eyes" class="emoji emoji-1f601" role="img" title="grinning face with smiling eyes">:grinning_face_with_smiling_eyes:</span></p>



<a name="220172228"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Contained%20Resources/near/220172228" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jabeen Mohammed <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Contained.20Resources.html#220172228">(Dec 16 2020 at 20:59)</a>:</h4>
<p><span class="user-mention" data-user-id="191469">@Chris Moesel</span>  thanks for example... <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span></p>



<a name="220172294"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Contained%20Resources/near/220172294" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Contained.20Resources.html#220172294">(Dec 16 2020 at 20:59)</a>:</h4>
<p>A contained resource only makes sense if the parent resource points to it, or if it points to the parent resource</p>



<a name="220172376"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Contained%20Resources/near/220172376" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Contained.20Resources.html#220172376">(Dec 16 2020 at 21:00)</a>:</h4>
<p><a href="http://build.fhir.org/references.html#contained">http://build.fhir.org/references.html#contained</a></p>



<a name="220203724"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Contained%20Resources/near/220203724" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jabeen Mohammed <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Contained.20Resources.html#220203724">(Dec 17 2020 at 03:30)</a>:</h4>
<p><span class="user-mention" data-user-id="191469">@Chris Moesel</span> <span class="user-mention" data-user-id="191832">@Jose Costa Teixeira</span> <span class="user-mention" data-user-id="215604">@Saul Kravitz</span>  thanks for guys...<br>
I was able to share the comparison "contained" vs "extension" with my clients customers and the winner was "extension".</p>



<a name="227409765"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Contained%20Resources/near/227409765" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Juan Manuel Caputo <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Contained.20Resources.html#227409765">(Feb 23 2021 at 10:38)</a>:</h4>
<p>Hello,<br>
Im building an IG using  FHIR Shorthand,  and I need to specifiy a resource with acontained resource in it.</p>
<p>I've been doing a reserch and I also asked in this forum on other topic (Implementors), because i didn't know that this stream exists, an until now I found that a contained resource only can be use in the instance of a resource. </p>
<p>¿It's not possible to use  in the definition of the resource?</p>
<p>greetins and thanks in advance</p>



<a name="227427032"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Contained%20Resources/near/227427032" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Freiter <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Contained.20Resources.html#227427032">(Feb 23 2021 at 13:11)</a>:</h4>
<p>You can add a contained resource to a Profile of a resource using the <code>^</code> syntax. Here is a contrived but simple example:</p>
<div class="codehilite"><pre><span></span><code>Instance: ContainedResource
InstanceOf: Observation
* status = #final

Profile: PatientProfile
Parent: Patient
* ^contained[0] = ContainedResource
</code></pre></div>
<p>This will create a StructureDefinition for the PatientProfile, and that StructureDefinition will contain the ContainedResource Observation.</p>



<a name="249993688"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Contained%20Resources/near/249993688" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Barbro Vessman <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Contained.20Resources.html#249993688">(Aug 19 2021 at 14:22)</a>:</h4>
<p>Hello</p>
<p>How can I add info about a contained resource? I'm trying different ways but do not succeed. </p>
<div class="codehilite"><pre><span></span><code>* ^contained[+] = List
* ^contained[=].status 1..1 MS
* ^contained[=].status ^short = &quot;current | retired | entered-in-error&quot;&quot;
</code></pre></div>
<p>The second and third lines give errors:</p>
<ul>
<li>Assignment rules must include at least one space both before and after the '=' sign</li>
<li>The element or path you referenced does not exist: contained[0].status</li>
</ul>
<p>How can this be expressed?</p>



<a name="249994022"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Contained%20Resources/near/249994022" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Pyke <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Contained.20Resources.html#249994022">(Aug 19 2021 at 14:25)</a>:</h4>
<p>You add all that data in the contained resource profile and instance definition, not in the parent profile itself.</p>



<a name="249994256"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Contained%20Resources/near/249994256" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Contained.20Resources.html#249994256">(Aug 19 2021 at 14:26)</a>:</h4>
<p>you don't need the '^' unless you mean to add a contained resource to the underlying StructureDefinition. Here's what I do in one of my profiles:</p>
<div class="codehilite"><pre><span></span><code>* contained contains BusinessOperation 1..* MS and USAgentAffiliation 0..1 MS and USAgent 0..1 MS
* contained[BusinessOperation] only LabelerBusinessOperation
* contained[USAgentAffiliation] only USAgentAffiliation
* contained[USAgent] only USAgentOrganization
</code></pre></div>
<p>And then in the instance:</p>
<div class="codehilite"><pre><span></span><code>* contained[USAgentAffiliation] = SampleLabelerUSAgentAffiliation
* contained[USAgentAffiliation].organization.reference = &quot;#&quot;
* contained[USAgentAffiliation].participatingOrganization.reference = &quot;#usagent&quot;
* contained[USAgent] = SampleLabelerUSAgent
* contained[USAgent].id = &quot;usagent&quot;
* contained[BusinessOperation] = SampleLabelerBusinessOperation
* contained[BusinessOperation].providedBy.reference = &quot;#&quot;
</code></pre></div>



<a name="249996166"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Contained%20Resources/near/249996166" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Barbro Vessman <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Contained.20Resources.html#249996166">(Aug 19 2021 at 14:41)</a>:</h4>
<p>OK, thanks a lot  <span class="user-mention" data-user-id="192587">@David Pyke</span>  and <span class="user-mention" data-user-id="192166">@Jean Duteau</span> . Great with examples! Same thing with referenced resources then I suppose</p>



<a name="267683833"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Contained%20Resources/near/267683833" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Catherine Hosage Norman <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Contained.20Resources.html#267683833">(Jan 12 2022 at 05:17)</a>:</h4>
<p>What is the correct syntax to specify another profile needs to be used for a contained resource that will be referred to in the file?</p>
<p>Profile: DrugProduct<br>
Parent: MedicinalProductDefinition<br>
Id: pqcmc-DrugProduct<br>
Title: "Drug Product"<br>
Description: "Includes the properties of the drug product, its components and impurities"<br>
// ComponentSubstance is a profile</p>
<ul>
<li>
<p>.contained = ComponentSubstance <br>
 // this gave the error: Cannot assign Instance at path contained to element of type Resource. Definition not found for Instance: </p>
</li>
<li>
<p>description ^short = "Drug Product Description"<br>
// This gave the error: Cannot assign Reference value: Reference(ComponentSubstance). Value does not match element type: Resource<br>
The last seems closer, but it is not catching on that behind the ComponentSubstance is a parent resource.  So is there a way to specify use this profile with the resource?</p>
</li>
</ul>



<a name="267683971"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Contained%20Resources/near/267683971" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Catherine Hosage Norman <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Contained.20Resources.html#267683971">(Jan 12 2022 at 05:20)</a>:</h4>
<p>correction to the  last bullet</p>
<ul>
<li>.contained = Reference(ComponentSubstance)  not description ^short = "Drug Product Description".</li>
</ul>



<a name="267684912"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Contained%20Resources/near/267684912" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Contained.20Resources.html#267684912">(Jan 12 2022 at 05:46)</a>:</h4>
<p>Contained is a resource array so you probably need to slice it first and then restrict the slice to a specific profile.</p>



<a name="267685034"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Contained%20Resources/near/267685034" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Contained.20Resources.html#267685034">(Jan 12 2022 at 05:48)</a>:</h4>
<p>If you mean to say that all contained resources have to be of the same type, then the example I gave earlier would work: contained only ComponentSubstance</p>



<a name="267751477"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Contained%20Resources/near/267751477" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Catherine Hosage Norman <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Contained.20Resources.html#267751477">(Jan 12 2022 at 16:48)</a>:</h4>
<p>Bingo!  thanks</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
