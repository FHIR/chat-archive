---
layout: page
title: "FHIR Chat  · example of a FSH Instance with contained resources · shorthand"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/index.html">shorthand</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/example.20of.20a.20FSH.20Instance.20with.20contained.20resources.html">example of a FSH Instance with contained resources</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="217698306"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/example%20of%20a%20FSH%20Instance%20with%20contained%20resources/near/217698306" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/example.20of.20a.20FSH.20Instance.20with.20contained.20resources.html#217698306">(Nov 23 2020 at 23:42)</a>:</h4>
<p>Is there an example of how to define a FSH instance with contained resources?</p>



<a name="217701268"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/example%20of%20a%20FSH%20Instance%20with%20contained%20resources/near/217701268" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/example.20of.20a.20FSH.20Instance.20with.20contained.20resources.html#217701268">(Nov 24 2020 at 00:21)</a>:</h4>
<p>We call this capability "inlined" instances.  There is an example or two in the spec, but not specific to how it is used with contained.  So here is one:</p>
<div class="codehilite"><pre><span></span><code>Instance: EveAnyperson
InstanceOf: Patient
Usage: #inline // #inline means this instance should not be exported as a separate example
* name.given[0] = &quot;Eve&quot;
* name.family = &quot;Anyperson&quot;

Instance: EvesCondition
InstanceOf: Condition
Usage: #example
Description: &quot;An example that uses contained&quot;
* contained[0] = EveAnyperson // this inlines EveAnyperson definition here
* code = http://foo.org#bar
* subject = Reference(EveAnyperson) // this automatically creates the relative reference correctly
</code></pre></div>
<p>That produces:</p>
<div class="codehilite" data-code-language="JSON"><pre><span></span><code><span class="p">{</span>
  <span class="nt">"resourceType"</span><span class="p">:</span> <span class="s2">"Condition"</span><span class="p">,</span>
  <span class="nt">"id"</span><span class="p">:</span> <span class="s2">"EvesCondition"</span><span class="p">,</span>
  <span class="nt">"contained"</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nt">"resourceType"</span><span class="p">:</span> <span class="s2">"Patient"</span><span class="p">,</span>
      <span class="nt">"id"</span><span class="p">:</span> <span class="s2">"EveAnyperson"</span><span class="p">,</span>
      <span class="nt">"name"</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
          <span class="nt">"given"</span><span class="p">:</span> <span class="p">[</span>
            <span class="s2">"Eve"</span>
          <span class="p">],</span>
          <span class="nt">"family"</span><span class="p">:</span> <span class="s2">"Anyperson"</span>
        <span class="p">}</span>
      <span class="p">]</span>
    <span class="p">}</span>
  <span class="p">],</span>
  <span class="nt">"code"</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">"coding"</span><span class="p">:</span> <span class="p">[</span>
      <span class="p">{</span>
        <span class="nt">"code"</span><span class="p">:</span> <span class="s2">"bar"</span><span class="p">,</span>
        <span class="nt">"system"</span><span class="p">:</span> <span class="s2">"http://foo.org"</span>
      <span class="p">}</span>
    <span class="p">]</span>
  <span class="p">},</span>
  <span class="nt">"subject"</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">"reference"</span><span class="p">:</span> <span class="s2">"#EveAnyperson"</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<div class="codehilite"><pre><span></span><code>
</code></pre></div>



<a name="217748620"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/example%20of%20a%20FSH%20Instance%20with%20contained%20resources/near/217748620" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/example.20of.20a.20FSH.20Instance.20with.20contained.20resources.html#217748620">(Nov 24 2020 at 12:50)</a>:</h4>
<p>thanks. Would be good to have a sentence in the shorthand spec that states that inline means contained... inline is a good word, but not when one is thinking they need to figure out how to do a contained resource.</p>



<a name="217748862"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/example%20of%20a%20FSH%20Instance%20with%20contained%20resources/near/217748862" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/example.20of.20a.20FSH.20Instance.20with.20contained.20resources.html#217748862">(Nov 24 2020 at 12:52)</a>:</h4>
<p>I now see a sentence, but it is a sentence in the middle of a paragraph.</p>



<a name="217749943"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/example%20of%20a%20FSH%20Instance%20with%20contained%20resources/near/217749943" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Pyke <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/example.20of.20a.20FSH.20Instance.20with.20contained.20resources.html#217749943">(Nov 24 2020 at 13:02)</a>:</h4>
<p>An example in the docs would be very helpful</p>



<a name="217754536"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/example%20of%20a%20FSH%20Instance%20with%20contained%20resources/near/217754536" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/example.20of.20a.20FSH.20Instance.20with.20contained.20resources.html#217754536">(Nov 24 2020 at 13:41)</a>:</h4>
<p>or just link the examples already in the spec... given that DrDavidAnydoc is defined as #inline... using it somewhere would show how to use it.</p>



<a name="217808839"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/example%20of%20a%20FSH%20Instance%20with%20contained%20resources/near/217808839" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/example.20of.20a.20FSH.20Instance.20with.20contained.20resources.html#217808839">(Nov 24 2020 at 20:24)</a>:</h4>
<p><span class="user-mention" data-user-id="191447">@Mark Kramer</span> -- John and David suggest that we provide clarification and more complete examples in the spec for using <code>#inline</code> instances with <code>contained</code>.</p>



<a name="217898082"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/example%20of%20a%20FSH%20Instance%20with%20contained%20resources/near/217898082" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Kramer <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/example.20of.20a.20FSH.20Instance.20with.20contained.20resources.html#217898082">(Nov 25 2020 at 15:23)</a>:</h4>
<p>Good suggestion. I will add an example of this sort. It will appear on the continuous integration version of the docs</p>



<a name="217902707"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/example%20of%20a%20FSH%20Instance%20with%20contained%20resources/near/217902707" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Petter Wolff <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/example.20of.20a.20FSH.20Instance.20with.20contained.20resources.html#217902707">(Nov 25 2020 at 15:58)</a>:</h4>
<p>Thanks John, Chris and Mark, was just looking for this!</p>



<a name="218040808"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/example%20of%20a%20FSH%20Instance%20with%20contained%20resources/near/218040808" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/example.20of.20a.20FSH.20Instance.20with.20contained.20resources.html#218040808">(Nov 26 2020 at 21:51)</a>:</h4>
<p>Inline seems to work nicely with standard resources, but how do you do a contained ValueSet? I can't specify usage, can I?</p>
<p>My use case is that I have a questionnaire. I want question Q.n to be: "select all values that apply or other", and Q.n.1 to be a text field for the other text, enabled only when "other" is selected from the first question. When the response is filled out, I don't want "other" to be an accepted value, so I don't want to "publicly" define the valueset to contain other, I'd like a contained valueset within the questionnaire defined as standard valueset + "other".</p>



<a name="218055906"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/example%20of%20a%20FSH%20Instance%20with%20contained%20resources/near/218055906" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/example.20of.20a.20FSH.20Instance.20with.20contained.20resources.html#218055906">(Nov 27 2020 at 04:22)</a>:</h4>
<p>So... you want to use the FSH syntax to create a ValueSet that includes "other", but you want that ValueSet <em>only</em> to be used as a contained resource in a Questionnaire, and <em>not</em> to be published as an official ValueSet of the IG?  Do I have that right?  As you noted, you can't mark a FSH ValueSet as inline, so you'd probably need to define it using the <code>Instance:</code> syntax instead (it would be an <code>InstanceOf: ValueSet</code>.  In truth, <code>ValueSet</code>s aren't terribly complicated, so it might not be too bad?</p>



<a name="218055952"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/example%20of%20a%20FSH%20Instance%20with%20contained%20resources/near/218055952" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/example.20of.20a.20FSH.20Instance.20with.20contained.20resources.html#218055952">(Nov 27 2020 at 04:24)</a>:</h4>
<p>Yes, that was what I was trying to do, and how I was thinking I’d have to do it.</p>



<a name="218056028"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/example%20of%20a%20FSH%20Instance%20with%20contained%20resources/near/218056028" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/example.20of.20a.20FSH.20Instance.20with.20contained.20resources.html#218056028">(Nov 27 2020 at 04:26)</a>:</h4>
<p>Actually, there is another thing you could try -- if you're letting SUSHI generate your IG JSON.  There is a little known feature in the config to have SUSHI <em>omit</em> a FSH resource from the IG.  I nearly forgot about it myself.  Look at the <a href="https://fshschool.org/docs/sushi/configuration/">SUSHI Configuration</a> documentation and search the page for "omit".  You'll find info for how to do this.  But basically, in your <code>sushi-config.yaml</code>, you'll want to add something like this:</p>
<div class="codehilite" data-code-language="YAML"><pre><span></span><code><span class="nt">resources</span><span class="p">:</span>
  <span class="nt">ValueSet/id-of-vs-to-omit</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">omit</span>
</code></pre></div>



<a name="218056098"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/example%20of%20a%20FSH%20Instance%20with%20contained%20resources/near/218056098" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/example.20of.20a.20FSH.20Instance.20with.20contained.20resources.html#218056098">(Nov 27 2020 at 04:28)</a>:</h4>
<p>So, put it in Questionnaire.contained, but omit it from being generated as an independent resource? Hmm, sounds interesting.</p>



<a name="218056176"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/example%20of%20a%20FSH%20Instance%20with%20contained%20resources/near/218056176" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/example.20of.20a.20FSH.20Instance.20with.20contained.20resources.html#218056176">(Nov 27 2020 at 04:31)</a>:</h4>
<p>Yeah.  I've never tried this exact use case, but I think that, in theory, it should work.  The only thing I can't remember for sure is if it</p>
<ul>
<li>still generates the omitted file but just doesn't put it in the IG JSON, or</li>
<li>doesn't generate the file at all</li>
</ul>
<p>I'd check the code, but I'm not even supposed to be working right now. ;-)</p>



<a name="218056195"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/example%20of%20a%20FSH%20Instance%20with%20contained%20resources/near/218056195" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/example.20of.20a.20FSH.20Instance.20with.20contained.20resources.html#218056195">(Nov 27 2020 at 04:31)</a>:</h4>
<p>I can check it out tomorrow too, don’t bother—enjoy your holiday.</p>



<a name="218056243"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/example%20of%20a%20FSH%20Instance%20with%20contained%20resources/near/218056243" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/example.20of.20a.20FSH.20Instance.20with.20contained.20resources.html#218056243">(Nov 27 2020 at 04:32)</a>:</h4>
<p>Alright, you too (that is, if you're U.S.-based).  Have a great rest of your day/night!</p>



<a name="218489882"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/example%20of%20a%20FSH%20Instance%20with%20contained%20resources/near/218489882" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/example.20of.20a.20FSH.20Instance.20with.20contained.20resources.html#218489882">(Dec 01 2020 at 22:14)</a>:</h4>
<p><span class="user-mention" data-user-id="191469">@Chris Moesel</span>, over the weekend, I tried creating just a regular FSH ValueSet, containing it, and omitting the resource. This doesn't seem to work. I'm going to have to look at it again in the next day or two to see if I can come up with a solution.</p>



<a name="218490372"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/example%20of%20a%20FSH%20Instance%20with%20contained%20resources/near/218490372" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/example.20of.20a.20FSH.20Instance.20with.20contained.20resources.html#218490372">(Dec 01 2020 at 22:18)</a>:</h4>
<p>I am struggling with understanding any possible use-case for a contained valueSet... What is wrong with an IG defined valueSet?</p>



<a name="218491425"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/example%20of%20a%20FSH%20Instance%20with%20contained%20resources/near/218491425" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/example.20of.20a.20FSH.20Instance.20with.20contained.20resources.html#218491425">(Dec 01 2020 at 22:28)</a>:</h4>
<p>I have a published Flavours value set with values Vanilla, Chocolate, Strawberry. I want a questionnaire with:</p>
<blockquote>
<p>What is your favourite ice cream flavour:
* Vanilla
* Chocolate
* Strawberry
* Other<br>
If Other, please specify: [                 ]<br>
The response goes into a codeableConcept.</p>
</blockquote>
<p>I don't want to hard-code 4 answerOption, I'd like to use answerValueSet. But I'd also prefer not to have "Other" as a published value in the ValueSet. So, my plan is to create a contained ValueSet with all of the Flavours plus "Other" that I can reference from within the Questionnaire, but not use anywhere else.</p>
<p>(I'm open to a better approach. This is tied to the fact that the Questionnaire "open-choice" question type doesn't actually have the "other text", only  Vanilla, Chocolate, Strawberry [   ], which is a poor UI in my mind. Maybe <span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> has a better idea.)</p>



<a name="218492587"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/example%20of%20a%20FSH%20Instance%20with%20contained%20resources/near/218492587" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/example.20of.20a.20FSH.20Instance.20with.20contained.20resources.html#218492587">(Dec 01 2020 at 22:41)</a>:</h4>
<p>Your approach seems viable to me</p>



<a name="218492889"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/example%20of%20a%20FSH%20Instance%20with%20contained%20resources/near/218492889" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Keyes <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/example.20of.20a.20FSH.20Instance.20with.20contained.20resources.html#218492889">(Dec 01 2020 at 22:44)</a>:</h4>
<p>Great -- thanks everyone!</p>



<a name="218493117"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/example%20of%20a%20FSH%20Instance%20with%20contained%20resources/near/218493117" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/example.20of.20a.20FSH.20Instance.20with.20contained.20resources.html#218493117">(Dec 01 2020 at 22:47)</a>:</h4>
<p>Thanks <span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> </p>
<p>Ideally, it would be nice to not have to do this, but instead to have an element/extension for open-choice questions to be able to specify the "other" text.</p>



<a name="218494587"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/example%20of%20a%20FSH%20Instance%20with%20contained%20resources/near/218494587" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/example.20of.20a.20FSH.20Instance.20with.20contained.20resources.html#218494587">(Dec 01 2020 at 23:03)</a>:</h4>
<p>You can submit a change request if you wish :)</p>



<a name="218494927"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/example%20of%20a%20FSH%20Instance%20with%20contained%20resources/near/218494927" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/example.20of.20a.20FSH.20Instance.20with.20contained.20resources.html#218494927">(Dec 01 2020 at 23:06)</a>:</h4>
<p><span class="user-mention" data-user-id="191380">@Elliot Silver</span> -- after you look at it again, if it's still not working, let us know some more details about _how_ it's not working.  If it's a bug in SUSHI, we'd like to know!</p>



<a name="218502161"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/example%20of%20a%20FSH%20Instance%20with%20contained%20resources/near/218502161" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/example.20of.20a.20FSH.20Instance.20with.20contained.20resources.html#218502161">(Dec 02 2020 at 00:40)</a>:</h4>
<p>if the valueset is contained in the questionnaire, then it is effectively static values.... distinction without a difference.... I am unclear as to the down side of an IG based valueset.</p>



<a name="218502214"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/example%20of%20a%20FSH%20Instance%20with%20contained%20resources/near/218502214" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/example.20of.20a.20FSH.20Instance.20with.20contained.20resources.html#218502214">(Dec 02 2020 at 00:42)</a>:</h4>
<p>Is it static? even if it is build using compose?</p>



<a name="218508147"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/example%20of%20a%20FSH%20Instance%20with%20contained%20resources/near/218508147" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/example.20of.20a.20FSH.20Instance.20with.20contained.20resources.html#218508147">(Dec 02 2020 at 02:19)</a>:</h4>
<p>The contained value set is important a non-contained value set - so it's not static.</p>



<a name="218576825"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/example%20of%20a%20FSH%20Instance%20with%20contained%20resources/near/218576825" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gino Canessa <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/example.20of.20a.20FSH.20Instance.20with.20contained.20resources.html#218576825">(Dec 02 2020 at 15:58)</a>:</h4>
<p>If this is a common pattern, I think I'd like to see it specified in a different way.  E.g., an extension on the question to enable an <code>Other</code> (or specified text value prompt), show a text field to input the data, and (I assume) stuff the text into a <code>CodeableConcept.text</code> field.</p>
<p>Creating/maintaining a separate custom ValueSet for every question with this behavior feels error-prone.</p>



<a name="218773957"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/example%20of%20a%20FSH%20Instance%20with%20contained%20resources/near/218773957" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/example.20of.20a.20FSH.20Instance.20with.20contained.20resources.html#218773957">(Dec 04 2020 at 00:26)</a>:</h4>
<p>Hmm, so Questionnaire.item.answerValueSet needs a canonical url to the value set. What does a canonical url for a contained resource look like? Do I need to specify ValueSet.url, or is it something inherited from the enclosing Questionnaire?</p>



<a name="218774920"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/example%20of%20a%20FSH%20Instance%20with%20contained%20resources/near/218774920" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/example.20of.20a.20FSH.20Instance.20with.20contained.20resources.html#218774920">(Dec 04 2020 at 00:40)</a>:</h4>
<p>Nevermind -- there is an example in the spec (<a href="https://www.hl7.org/fhir/references.html#canonical-fragments">https://www.hl7.org/fhir/references.html#canonical-fragments</a>) of exactly this issue.</p>



<a name="218775121"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/example%20of%20a%20FSH%20Instance%20with%20contained%20resources/near/218775121" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/example.20of.20a.20FSH.20Instance.20with.20contained.20resources.html#218775121">(Dec 04 2020 at 00:42)</a>:</h4>
<p>(Relevant to FSH, there doesn't appear to be an automated way to reference the contained resource as a canonical fragment. I have to explicitly put in <code>#my-instance-name</code>.)</p>



<a name="218832756"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/example%20of%20a%20FSH%20Instance%20with%20contained%20resources/near/218832756" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/example.20of.20a.20FSH.20Instance.20with.20contained.20resources.html#218832756">(Dec 04 2020 at 13:34)</a>:</h4>
<p>Thanks for letting us know, <span class="user-mention" data-user-id="191380">@Elliot Silver</span>.  I've logged a bug: <a href="https://github.com/FHIR/sushi/issues/688">SUSHI #688</a></p>



<a name="263420965"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/example%20of%20a%20FSH%20Instance%20with%20contained%20resources/near/263420965" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vadim Peretokin <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/example.20of.20a.20FSH.20Instance.20with.20contained.20resources.html#263420965">(Dec 02 2021 at 11:03)</a>:</h4>
<p>I also needed to contain a valueset in a questionnaire, though for a different reason - the rendering tool I'm looking at only supports valueset inclusion this way. This doesn't mean that the valueset should be published separately in the IG, I'd like that to be as-is.</p>
<p>The challenge with doing this out of the box is that you can't point to an instance of a valueset in the contained field, it needs to be an instance of a non-terminology resource. Trying to represent the valueset as an instance instead, like Chris suggested earlier, raised quite a few errors and looked a bit like a rabbithole - due to time pressure I decided not to go that way, but thought I'd raise the usecase here just so we're across it.</p>



<a name="263512688"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/example%20of%20a%20FSH%20Instance%20with%20contained%20resources/near/263512688" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/example.20of.20a.20FSH.20Instance.20with.20contained.20resources.html#263512688">(Dec 02 2021 at 23:08)</a>:</h4>
<p>I think this conversation took a few turns (ending in discussion about canonicals) and perhaps we lost sight of one of the original issues -- which was containing a non-instance definition.  So <span class="user-mention" data-user-id="191363">@Vadim Peretokin</span> -- are you saying that if you define a value set (using <code>ValueSet:</code>), that you can't assign it as a contained resource in something else?  I just want to be sure I understand the issue.</p>



<a name="263513583"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/example%20of%20a%20FSH%20Instance%20with%20contained%20resources/near/263513583" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/example.20of.20a.20FSH.20Instance.20with.20contained.20resources.html#263513583">(Dec 02 2021 at 23:17)</a>:</h4>
<p>OK.  I see now.  I was able to reproduce.  What's interesting is that we <em>do</em> support this when you're assigning a VS to <code>^contained</code> in a profile -- but we <em>don't</em> when assigning it to <code>contained</code> on an instance.  This seems like an oversight to me and hopefully something that is easy to remedy.  I've reproduced it here: <a href="https://fshschool.org/FSHOnline/#/share/3rLqOJ5">https://fshschool.org/FSHOnline/#/share/3rLqOJ5</a></p>
<p>I've logged it as <a href="https://github.com/FHIR/sushi/issues/971">SUSHI#971</a></p>



<a name="263551819"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/example%20of%20a%20FSH%20Instance%20with%20contained%20resources/near/263551819" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vadim Peretokin <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/example.20of.20a.20FSH.20Instance.20with.20contained.20resources.html#263551819">(Dec 03 2021 at 09:09)</a>:</h4>
<p>That's exactly it. Thanks, <span class="user-mention" data-user-id="191469">@Chris Moesel</span></p>



<a name="267013392"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/example%20of%20a%20FSH%20Instance%20with%20contained%20resources/near/267013392" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/example.20of.20a.20FSH.20Instance.20with.20contained.20resources.html#267013392">(Jan 06 2022 at 00:46)</a>:</h4>
<p><span class="user-mention" data-user-id="191363">@Vadim Peretokin</span> -- this has been fixed in <a href="#narrow/stream/215610-shorthand/topic/SUSHI.202.2E2.2E6/near/267013186">SUSHI 2.2.6</a>.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
