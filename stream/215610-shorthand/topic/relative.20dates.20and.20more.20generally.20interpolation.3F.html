---
layout: page
title: "FHIR Chat  · relative dates and more generally interpolation? · shorthand"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/index.html">shorthand</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/relative.20dates.20and.20more.20generally.20interpolation.3F.html">relative dates and more generally interpolation?</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="204106228"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/relative%20dates%20and%20more%20generally%20interpolation%3F/near/204106228" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Kaney <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/relative.20dates.20and.20more.20generally.20interpolation.3F.html#204106228">(Jul 16 2020 at 16:12)</a>:</h4>
<p>We are finding a nice use for FSH to construct sample/demo/development fixtures. We would like to express the source with relative dates (not literal absolute). Is there presently  (or plans to) support interpolation so we could store variables in FSH source and  substitute with computed values during build time? This feature could help in other areas where we would like to have certain fields derivable.</p>



<a name="204107825"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/relative%20dates%20and%20more%20generally%20interpolation%3F/near/204107825" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/relative.20dates.20and.20more.20generally.20interpolation.3F.html#204107825">(Jul 16 2020 at 16:24)</a>:</h4>
<p>I don't think we've thought of something like that, <span class="user-mention" data-user-id="191782">@Brian Kaney</span>.  That's an interesting idea!  Are you thinking strict replacement of variables with provided values, or are you thinking some limited syntax for dynamic values too (like <code>${today() - 3 weeks}</code>)?</p>



<a name="204109701"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/relative%20dates%20and%20more%20generally%20interpolation%3F/near/204109701" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/relative.20dates.20and.20more.20generally.20interpolation.3F.html#204109701">(Jul 16 2020 at 16:39)</a>:</h4>
<p>We should think about what the equivalent would be in non-shorthand representations.  Presumably some sort of extension instead of the value?</p>



<a name="204109902"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/relative%20dates%20and%20more%20generally%20interpolation%3F/near/204109902" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/relative.20dates.20and.20more.20generally.20interpolation.3F.html#204109902">(Jul 16 2020 at 16:41)</a>:</h4>
<p><span class="user-mention" data-user-id="191782">@Brian Kaney</span> do you mean that, every time you regenerated your guide, that the examples would have values that would change based on the computation?</p>



<a name="204110146"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/relative%20dates%20and%20more%20generally%20interpolation%3F/near/204110146" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/relative.20dates.20and.20more.20generally.20interpolation.3F.html#204110146">(Jul 16 2020 at 16:43)</a>:</h4>
<p>I don't think this makes as much sense for IG development.  My understanding was that Brian is using it for other things (not IGs).  And my understanding was that it gets resolved at SUSHI compile-time, so once you get to the formal FHIR representations, the variable/expression is gone.</p>



<a name="204110258"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/relative%20dates%20and%20more%20generally%20interpolation%3F/near/204110258" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/relative.20dates.20and.20more.20generally.20interpolation.3F.html#204110258">(Jul 16 2020 at 16:44)</a>:</h4>
<p>sure, i was using "guide" in a more general sense. :)  I just wanted to confirm that because if it using FSH to generate FHIR artifacts outside of a guide context, then Lloyd's question might not be relevant.</p>



<a name="204110436"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/relative%20dates%20and%20more%20generally%20interpolation%3F/near/204110436" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/relative.20dates.20and.20more.20generally.20interpolation.3F.html#204110436">(Jul 16 2020 at 16:45)</a>:</h4>
<p>Right -- I was thinking Brian was suggesting it happen at SUSHI compile time.  But... if <span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> is interested in using extensions for dynamic values (esp. relative dates), I believe that <span class="user-mention" data-user-id="191359">@Bryn Rhodes</span> has implemented something like that to support CQL testing w/ FHIR patients that should be a certain age, etc.</p>



<a name="204114919"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/relative%20dates%20and%20more%20generally%20interpolation%3F/near/204114919" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/relative.20dates.20and.20more.20generally.20interpolation.3F.html#204114919">(Jul 16 2020 at 17:21)</a>:</h4>
<p>I would appreciate something like that for generating test data. A couple of simple functions, ideally a lookup function, and we could use sushi to generate a lot of instances at once</p>



<a name="204115654"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/relative%20dates%20and%20more%20generally%20interpolation%3F/near/204115654" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/relative.20dates.20and.20more.20generally.20interpolation.3F.html#204115654">(Jul 16 2020 at 17:27)</a>:</h4>
<p>FHIR-I has a back-burner initiative to allow generation of 'templated' examples (for situations where we might want to have 50+ example instances to demonstrate a given scenario).  Date generation would be part of that.  A key thing for me with FSH is that as "shorthand", it should still be possible to express the same content without losing information.</p>



<a name="204118073"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/relative%20dates%20and%20more%20generally%20interpolation%3F/near/204118073" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/relative.20dates.20and.20more.20generally.20interpolation.3F.html#204118073">(Jul 16 2020 at 17:47)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191320">Lloyd McKenzie</span> <a href="#narrow/stream/215610-shorthand/topic/relative.20dates.20and.20more.20generally.20interpolation.3F/near/204109701">said</a>:</p>
<blockquote>
<p>We should think about what the equivalent would be in non-shorthand representations.  Presumably some sort of extension instead of the value?</p>
</blockquote>
<p>and the value would be empty? Or some sort of magic value?</p>



<a name="204124633"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/relative%20dates%20and%20more%20generally%20interpolation%3F/near/204124633" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/relative.20dates.20and.20more.20generally.20interpolation.3F.html#204124633">(Jul 16 2020 at 18:38)</a>:</h4>
<p>omitted.  You can have an extension instead of a value</p>



<a name="204126887"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/relative%20dates%20and%20more%20generally%20interpolation%3F/near/204126887" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Kaney <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/relative.20dates.20and.20more.20generally.20interpolation.3F.html#204126887">(Jul 16 2020 at 18:55)</a>:</h4>
<p>The use-case in a IG might be coordination/computation of name, url, and version (during publish-time). I imagine there could be other patterns like this for IGs. However, our use-case presently regarding dates is outside IGs.</p>
<p>Here is the process we roughly have:</p>
<div class="codehilite"><pre><span></span><code>FSH.template --( interpolate )--&gt; FSH --( sushi )--&gt; FHIR JSON
</code></pre></div>


<p>We find this sort of thing super useful, so I though I would share as others might think an  interpolation syntax in FSH would be swimmingly.</p>



<a name="204129117"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/relative%20dates%20and%20more%20generally%20interpolation%3F/near/204129117" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Silva <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/relative.20dates.20and.20more.20generally.20interpolation.3F.html#204129117">(Jul 16 2020 at 19:11)</a>:</h4>
<p>Is there something in FHIRPath that can be used to represent 'relative dates' , e.g. <a href="https://build.fhir.org/ig/FHIR/fluentpath/#datetime-arithmetic">https://build.fhir.org/ig/FHIR/fluentpath/#datetime-arithmetic</a></p>



<a name="204130774"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/relative%20dates%20and%20more%20generally%20interpolation%3F/near/204130774" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/relative.20dates.20and.20more.20generally.20interpolation.3F.html#204130774">(Jul 16 2020 at 19:24)</a>:</h4>
<p><span class="user-mention silent" data-user-id="298707">John Silva</span> <a href="#narrow/stream/215610-shorthand/topic/relative.20dates.20and.20more.20generally.20interpolation.3F/near/204129117">said</a>:</p>
<blockquote>
<p>Is there something in FHIRPath that can be used to represent 'relative dates' </p>
</blockquote>
<p>Yes, in fact the example I used above (<code>today() - 3 weeks</code>) is valid FHIRPath already.  If we wanted to support dynamic expressions for interpolation, I'd definitely try to borrow from FHIRPath and CQL as much as possible.</p>



<a name="204160105"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/relative%20dates%20and%20more%20generally%20interpolation%3F/near/204160105" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Silva <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/relative.20dates.20and.20more.20generally.20interpolation.3F.html#204160105">(Jul 17 2020 at 00:31)</a>:</h4>
<p>This (relative dates) would be a great help for using FSH (and SUSHI) for demo data.   It might be useful to have other 'computable values', e.g. a valueDecimal as a random(x .. y) or randomized valueStrings,  codes (valueCodableConcept) from a set of values, again, maybe randomly choosing one of N specified, etc.   This could be useful not only for populating 'demo data' but also testing with different datasets.</p>



<a name="204197400"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/relative%20dates%20and%20more%20generally%20interpolation%3F/near/204197400" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Keith Boone <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/relative.20dates.20and.20more.20generally.20interpolation.3F.html#204197400">(Jul 17 2020 at 12:01)</a>:</h4>
<p>I like the idea of being able to write a guide using both Relative dates, and some computational capabilities.  We are storing a good bit of test data in FSH format for the SANER Project, in some cases, to make it relevant, only the dates need to be adjusted, in others, we want to be able to load up some constrained random data values.  I could see doing some of that with a preprocessor as well though.</p>



<a name="204718794"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/relative%20dates%20and%20more%20generally%20interpolation%3F/near/204718794" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/relative.20dates.20and.20more.20generally.20interpolation.3F.html#204718794">(Jul 22 2020 at 20:30)</a>:</h4>
<p>Yes, we do this with the <code>cqf-expression</code> extension today, providing dynamic values for our test cases so that they remain current. It introduces a pre-processing step into the test pipeline, but it's super useful for tests that rely on the moving point now.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
