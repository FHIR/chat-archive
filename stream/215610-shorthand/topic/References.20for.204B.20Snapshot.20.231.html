---
layout: page
title: "FHIR Chat  · References for 4B Snapshot #1 · shorthand"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/index.html">shorthand</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/References.20for.204B.20Snapshot.20.231.html">References for 4B Snapshot #1</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="274743533"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/References%20for%204B%20Snapshot%20%231/near/274743533" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Giorgio Cangioli <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/References.20for.204B.20Snapshot.20.231.html#274743533">(Mar 09 2022 at 19:57)</a>:</h4>
<p>I've a new errors in the FHIR for FAIR IG  moving from FHIR 4b to FHIR 4b snapshot 1. </p>
<p>The problem seems to be related to the fact that in one of the extension defined </p>
<ul>
<li>value[x] only Reference(Resource)<br>
is now converted into a <em>CodeableReference</em> instead of a <em>Reference</em>.</li>
</ul>
<p>Is there a way to force the element to be a Reference ?</p>



<a name="274747067"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/References%20for%204B%20Snapshot%20%231/near/274747067" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/References.20for.204B.20Snapshot.20.231.html#274747067">(Mar 09 2022 at 20:22)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="191415">@Giorgio Cangioli</span>.  Wow.  I thought maybe I misunderstood what you were saying, but I just tried this in an R4B Snapshot1 project myself with simple extension:</p>
<div class="codehilite"><pre><span></span><code>Extension: MyExtension
* value[x] only Reference(Resource)
</code></pre></div>
<p>and see this in the resulting SD JSON:</p>
<div class="codehilite" data-code-language="JSON"><pre><span></span><code><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Extension.value[x]"</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nt">"path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Extension.value[x]"</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">   </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="nt">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CodeableReference"</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">"targetProfile"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">        </span><span class="s2">"http://hl7.org/fhir/StructureDefinition/Resource"</span><span class="w"></span>
<span class="w">      </span><span class="p">]</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="p">]</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>Yikes!  That is surprising.  I have no idea why that would happen, but we'll definitely look into it!</p>



<a name="274747612"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/References%20for%204B%20Snapshot%20%231/near/274747612" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/References.20for.204B.20Snapshot.20.231.html#274747612">(Mar 09 2022 at 20:26)</a>:</h4>
<p>Luckily, there is a harmless workaround if you just need this to work now.  It is to first restrict the type to a <code>Reference</code> and then to a <code>Reference(Resource)</code>.  E.g., this works as expected:</p>
<div class="codehilite"><pre><span></span><code>Extension: MyExtension
* value[x] only Reference
* value[x] only Reference(Resource)
</code></pre></div>
<p>resulting in:</p>
<div class="codehilite" data-code-language="JSON"><pre><span></span><code><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Extension.value[x]"</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nt">"path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Extension.value[x]"</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">   </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="nt">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Reference"</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">"targetProfile"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">        </span><span class="s2">"http://hl7.org/fhir/StructureDefinition/Resource"</span><span class="w"></span>
<span class="w">      </span><span class="p">]</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="p">]</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>



<a name="274748287"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/References%20for%204B%20Snapshot%20%231/near/274748287" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/References.20for.204B.20Snapshot.20.231.html#274748287">(Mar 09 2022 at 20:32)</a>:</h4>
<p><a href="https://github.com/FHIR/sushi/issues/1044">SUSHI#1044</a></p>



<a name="274797922"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/References%20for%204B%20Snapshot%20%231/near/274797922" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Giorgio Cangioli <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/References.20for.204B.20Snapshot.20.231.html#274797922">(Mar 10 2022 at 07:12)</a>:</h4>
<p>Thank you so much <span class="user-mention" data-user-id="191469">@Chris Moesel</span>  :-)</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
