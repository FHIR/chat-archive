---
layout: page
title: "FHIR Chat  · extensions on repeating elements · shorthand"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/index.html">shorthand</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/extensions.20on.20repeating.20elements.html">extensions on repeating elements</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="201906629"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/extensions%20on%20repeating%20elements/near/201906629" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Hay <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/extensions.20on.20repeating.20elements.html#201906629">(Jun 24 2020 at 21:33)</a>:</h4>
<p>so I have this sushi fragment (on an instance):</p>
<div class="codehilite"><pre><span></span><code>* generalPractitioner[0] = Reference(drwelby)       //the GP
* generalPractitioner[0].display = &quot;Dr Marcus Welby&quot;

* generalPractitioner[1] = Reference(gp-org1)       //the GP Practice
* generalPractitioner[1].display = &quot;Good Health Medcial Centre&quot;
* generalPractitioner[1].extension[edi-address].valueString = &quot;hl-001&quot;
* generalPractitioner[1].extension[gp-practice-enrollment-date].valueDate = &quot;2020-01-01&quot;
</code></pre></div>


<p>which generates this instance</p>
<div class="codehilite"><pre><span></span><code>  &quot;generalPractitioner&quot;: [
    {
      &quot;extension&quot;: [
        {
          &quot;url&quot;: &quot;http://hl7.org.nz/fhir/StructureDefinition/edi-address&quot;
        },
        {
          &quot;url&quot;: &quot;http://hl7.org.nz/fhir/nhi/StructureDefinition/gp-practice-enrollment-date&quot;
        }
      ],
      &quot;reference&quot;: &quot;Practitioner/drwelby&quot;,
      &quot;display&quot;: &quot;Dr Marcus Welby&quot;
    },
    {
      &quot;extension&quot;: [
        {
          &quot;url&quot;: &quot;http://hl7.org.nz/fhir/StructureDefinition/edi-address&quot;,
          &quot;valueString&quot;: &quot;hl-001&quot;
        },
        {
          &quot;url&quot;: &quot;http://hl7.org.nz/fhir/nhi/StructureDefinition/gp-practice-enrollment-date&quot;,
          &quot;valueDate&quot;: &quot;2020-01-01&quot;
        }
      ],
      &quot;reference&quot;: &quot;Organization/gp-org1&quot;,
      &quot;display&quot;: &quot;Good Health Medcial Centre&quot;
    }
  ],
</code></pre></div>


<p>The first entry should not have the extension - right?</p>



<a name="201906842"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/extensions%20on%20repeating%20elements/near/201906842" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/extensions.20on.20repeating.20elements.html#201906842">(Jun 24 2020 at 21:35)</a>:</h4>
<p>it shouldn't, but it depends on your profile definition, if you had one.</p>



<a name="201907852"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/extensions%20on%20repeating%20elements/near/201907852" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Hay <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/extensions.20on.20repeating.20elements.html#201907852">(Jun 24 2020 at 21:46)</a>:</h4>
<p>Well - here's the profile segment:</p>
<div class="codehilite"><pre><span></span><code>* generalPractitioner only Reference(HaPractitioner | HaOrganization)
* generalPractitioner.extension contains
    $edi-address named edi-address 0..1 and
    $gp-enrollmentDate named gp-practice-enrollment-date 0..1
</code></pre></div>


<p>The issue is that only one of the references in the instance had the extension defined. I could try explicitly removing it from the instance - hold on...</p>



<a name="201907943"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/extensions%20on%20repeating%20elements/near/201907943" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/extensions.20on.20repeating.20elements.html#201907943">(Jun 24 2020 at 21:47)</a>:</h4>
<p>hmm, yeah, that seems like it should only include the extension if it was defined (0..1) on both</p>



<a name="201907977"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/extensions%20on%20repeating%20elements/near/201907977" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Hay <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/extensions.20on.20repeating.20elements.html#201907977">(Jun 24 2020 at 21:47)</a>:</h4>
<p>Actually, of course, i can't 'remove' the extension from an instance of course...</p>



<a name="201908184"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/extensions%20on%20repeating%20elements/near/201908184" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/extensions.20on.20repeating.20elements.html#201908184">(Jun 24 2020 at 21:50)</a>:</h4>
<p>no, but if you don't define it in either repetition, do you still get the extension 'stub'?</p>



<a name="201908682"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/extensions%20on%20repeating%20elements/near/201908682" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/extensions.20on.20repeating.20elements.html#201908682">(Jun 24 2020 at 21:55)</a>:</h4>
<p>This looks like a bug in SUSHI to me.  You probably shouldn't be getting those extension 'stub's in the <code>generalPractitioner[0]</code> entry.  I don't have time to investigate right now, but we can try to look into that tomorrow!</p>



<a name="201909031"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/extensions%20on%20repeating%20elements/near/201909031" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Hay <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/extensions.20on.20repeating.20elements.html#201909031">(Jun 24 2020 at 21:59)</a>:</h4>
<p>No worries - I'll work around it...</p>



<a name="201965601"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/extensions%20on%20repeating%20elements/near/201965601" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Freiter <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/extensions.20on.20repeating.20elements.html#201965601">(Jun 25 2020 at 13:03)</a>:</h4>
<p>I was able to reproduce this and can confirm it is definitely a bug. I made an issue to track the bug here: <a href="https://github.com/FHIR/sushi/issues/502">https://github.com/FHIR/sushi/issues/502</a>.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
