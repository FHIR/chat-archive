---
layout: page
title: "FHIR Chat  · instance: extension at element level · shorthand"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/index.html">shorthand</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/instance.3A.20extension.20at.20element.20level.html">instance: extension at element level</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="225036934"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/instance%3A%20extension%20at%20element%20level/near/225036934" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michaela Ziegler <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/instance.3A.20extension.20at.20element.20level.html#225036934">(Feb 03 2021 at 16:04)</a>:</h4>
<p>I would be glad for help with inserting an extension for an instance at the element level.</p>
<hr>
<p>It works on resource level:<br>
SD for Device :</p>
<div class="codehilite"><pre><span></span><code>* extension contains StraumannExtensionAbutmentClass named abutmentclass 0..1
</code></pre></div>
<p>EX for Device:</p>
<div class="codehilite"><pre><span></span><code>* extension[abutmentclass].valueCodeableConcept = SCT#468936006 &quot;Dental implant suprastructure, permanent (physical object)&quot;
</code></pre></div>
<hr>
<p>It doesn't work on element level -&gt; <strong>Sushi: error Element Device.type.extension:abutmentclass.url has minimum cardinality 1 but occurs 0 time(s).</strong><br>
SD for Device :</p>
<div class="codehilite"><pre><span></span><code>* type.extension contains StraumannExtensionAbutmentClass named abutmentclass 0..1
</code></pre></div>
<p>EX for Device:</p>
<div class="codehilite"><pre><span></span><code>* type.extension[abutmentclass].valueCodeableConcept = SCT#468936006 &quot;Dental implant suprastructure, permanent (physical object)&quot;
</code></pre></div>
<hr>
<div class="codehilite"><pre><span></span><code>Extension: StraumannExtensionAbutmentClass
Id: straumann-extension-abutmentclass
Title: &quot;Straumann Extension Abutment Class&quot;
Description: &quot;Straumann Extension Abutment Class&quot;
* valueCodeableConcept only CodeableConcept
* valueCodeableConcept ^min = 1
* valueCodeableConcept from StraumannVSAbutmentClass (required)
</code></pre></div>



<a name="225043215"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/instance%3A%20extension%20at%20element%20level/near/225043215" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/instance.3A.20extension.20at.20element.20level.html#225043215">(Feb 03 2021 at 16:46)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="233842">@Michaela Ziegler</span> -- what version of SUSHI are you using?  It seems to work for me using SUSHI 1.1.0.  I put it in FSH Online and it compiles correctly there: <a href="https://fshschool.org/FSHOnline/#/share/2YE8x0b">https://fshschool.org/FSHOnline/#/share/2YE8x0b</a></p>



<a name="225048195"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/instance%3A%20extension%20at%20element%20level/near/225048195" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michaela Ziegler <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/instance.3A.20extension.20at.20element.20level.html#225048195">(Feb 03 2021 at 17:18)</a>:</h4>
<p>Sushi: info  Running SUSHI v1.1.0 (implements FHIR Shorthand specification v1.1.0)</p>
<p>I have just seen that the problem only arises when I add the type. What am I doing wrong?<br>
<a href="https://fshschool.org/FSHOnline/#/share/3rnFkmP">https://fshschool.org/FSHOnline/#/share/3rnFkmP</a></p>



<a name="225064303"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/instance%3A%20extension%20at%20element%20level/near/225064303" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/instance.3A.20extension.20at.20element.20level.html#225064303">(Feb 03 2021 at 19:02)</a>:</h4>
<p>Actually your shared code did not give me that error, but that is because setting <code>type</code> <em>after</em> setting <code>type.extension</code> wiped out the extension (since you re-assigned the whole <code>type</code> value including the extensions).  But if I change the order and assign <code>type</code> and <em>then</em> <code>type.extension</code>, I see the problem.  Looks like a bug to me; I don't think there is anything you did wrong.  <a href="https://fshschool.org/FSHOnline/#/share/3toDtQo">https://fshschool.org/FSHOnline/#/share/3toDtQo</a></p>



<a name="225065059"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/instance%3A%20extension%20at%20element%20level/near/225065059" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/instance.3A.20extension.20at.20element.20level.html#225065059">(Feb 03 2021 at 19:07)</a>:</h4>
<p>For now, you can work around the bug by inserting this rule to explicitly set the URL:</p>
<div class="codehilite"><pre><span></span><code>* type.extension[abutmentclass].url = Canonical(StraumannExtensionAbutmentClass)
</code></pre></div>
<p>I also noticed one rule that I'd typically write a different way than you did:</p>
<div class="codehilite"><pre><span></span><code>* valueCodeableConcept ^min = 1
</code></pre></div>
<p>would usually be written as:</p>
<div class="codehilite"><pre><span></span><code>* valueCodeableConcept 1..1
</code></pre></div>
<p>or if you really don't want to state the max (since you're not changing it), you can also do:</p>
<div class="codehilite"><pre><span></span><code>* valueCodeableConcept 1..
</code></pre></div>



<a name="225078137"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/instance%3A%20extension%20at%20element%20level/near/225078137" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michaela Ziegler <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/instance.3A.20extension.20at.20element.20level.html#225078137">(Feb 03 2021 at 20:41)</a>:</h4>
<p>Great, thx for your support!</p>



<a name="225214099"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/instance%3A%20extension%20at%20element%20level/near/225214099" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/instance.3A.20extension.20at.20element.20level.html#225214099">(Feb 04 2021 at 19:59)</a>:</h4>
<p>I filed a bug for this: <a href="https://github.com/FHIR/sushi/issues/751">SUSHI#751</a></p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
