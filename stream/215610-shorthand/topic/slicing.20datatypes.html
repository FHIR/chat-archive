---
layout: page
title: "FHIR Chat  · slicing datatypes · shorthand"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/index.html">shorthand</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/slicing.20datatypes.html">slicing datatypes</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="276429212"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/slicing%20datatypes/near/276429212" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Catherine Hosage Norman <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/slicing.20datatypes.html#276429212">(Mar 24 2022 at 03:31)</a>:</h4>
<p>I do not get a Sushi error on  this</p>
<p>Profile: DrugProductIngredient      <br>
Parent: Ingredient      <br>
Id: pqcmc-ingredient        <br>
Title: "Drug Product Ingredient"        <br>
Description: "The amount detais about the drug product ingredients in the batch. Use for Batch Formula."        </p>
<ul>
<li>^url = "<a href="https://hl7.org/fhir/pq-cmc/StructureDefinition/prf-pqcmc-ingredient">https://hl7.org/fhir/pq-cmc/StructureDefinition/prf-pqcmc-ingredient</a>"     </li>
<li>.extension contains pq-additional-info-extension named additional-info 0..1 MS        </li>
<li>.extension[additional-info] ^short = "Drug Product Ingredient Additional Information" </li>
<li>substance.code.reference 1..1 MS      </li>
<li>substance.code.reference ^short = "Ingredient Substance"  </li>
<li>substance.code.reference only Reference(pqcmc-routine-drug-substance)     </li>
<li>substance.strength.extension contains pq-quantity-percent-extension named quantity-percent 1..1 MS        </li>
<li>substance.strength.extension[quantity-percent] ^short = "Quantity Percent"    </li>
<li>substance.strength.extension contains pq-overage-extension named overage 0..1 MS      </li>
<li>substance.strength.extension[overage] ^short = "Overage"  </li>
<li>substance.strength.concentration[x] 1..1 MS</li>
<li>substance.strength.concentration[x] only Quantity     </li>
<li>substance.strength.concentrationQuantity ^short = "Component Quanty Per Batch"    </li>
<li>substance.strength.concentrationText 1..1 MS      </li>
<li>substance.strength.concentrationText ^short = "Strength Textual"  </li>
<li>substance.strength.concentrationText ^definition = """A written description of the strength of the ingredient.[Source: SME Defined] <br>
 Note:  This is typically applicable to biologics <br>
 Example: International Units for Enzymes <br>
 """</li>
</ul>
<p>I get this from the build tool:</p>
<p>Caused by: org.hl7.fhir.exceptions.FHIRException: Invalid slicing: there is more than one type slice at Ingredient.substance.strength.concentrationQuantity, but one of them (concentrationQuantity) has min = 1, so the other slices cannot exist</p>
<p>However, that is exactly what I want.  I want only Quantity.  Don't want them to use ratio, explicitly, or codeable concept.   I have tried explicitly setting the other to 0..0.   What is the syntax for this?</p>



<a name="276434733"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/slicing%20datatypes/near/276434733" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/slicing.20datatypes.html#276434733">(Mar 24 2022 at 05:44)</a>:</h4>
<p>The problem is the name of the second attribute 'concentrationText'.  The publisher is confusing that as a slice on 'concentration[x]'.  <span class="user-mention" data-user-id="191651">@Rik Smithies</span> I think this has been raised as an issue before and it's the same with presentation[x] and presentationText.</p>



<a name="276440246"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/slicing%20datatypes/near/276440246" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rik Smithies <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/slicing.20datatypes.html#276440246">(Mar 24 2022 at 07:34)</a>:</h4>
<p><span class="user-mention" data-user-id="192166">@Jean Duteau</span> I assume this is a bug in the publisher process rather than a problem with the model? I can see that the two attributes e.g. presentationText and presentation[x] could be confused, but 'text' is not a datatype, so I'm not sure why this is happening.</p>



<a name="276506164"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/slicing%20datatypes/near/276506164" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/slicing.20datatypes.html#276506164">(Mar 24 2022 at 16:54)</a>:</h4>
<p>You're not allowed to have a presentation[x] element and any other element that starts with 'presentation'</p>



<a name="276506812"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/slicing%20datatypes/near/276506812" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/slicing.20datatypes.html#276506812">(Mar 24 2022 at 16:58)</a>:</h4>
<p>Whether 'text' is a data type or not doesn't matter.  (Kindling should actually be treating this as an error in the resource design - I've raised <a href="https://github.com/HL7/kindling/issues/68">https://github.com/HL7/kindling/issues/68</a>)</p>



<a name="276517360"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/slicing%20datatypes/near/276517360" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Alper <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/slicing.20datatypes.html#276517360">(Mar 24 2022 at 18:04)</a>:</h4>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> We just made a FHIR tracker today for EvidenceVariable (<a href="https://jira.hl7.org/browse/FHIR-36635">https://jira.hl7.org/browse/FHIR-36635</a>) to simplify implementation by having definition[x], definitionTypeAndValue, and definitionCombination to help clarify there is 1 and only 1 approach to definition, though two of the options are not datatypes.  Can/should we modify this to definition[x], defByTypeAndValue, and defByCombination?  Or is this break another rule by using def instead of definition in the element name?</p>



<a name="276518561"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/slicing%20datatypes/near/276518561" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Alper <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/slicing.20datatypes.html#276518561">(Mar 24 2022 at 18:12)</a>:</h4>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> Should we consider a TypeAndValue datatype and Combination Datatype? Then it can all fit in definition[x].</p>



<a name="276528153"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/slicing%20datatypes/near/276528153" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/slicing.20datatypes.html#276528153">(Mar 24 2022 at 19:29)</a>:</h4>
<p>Definitely don't want a type &amp; value data type.  (We don't generally like name-value pairs because they're just extension by another mechanism.)  There's no issue with using 'def' if that's the best solution you can come up with.</p>



<a name="277899943"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/slicing%20datatypes/near/277899943" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rik Smithies <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/slicing.20datatypes.html#277899943">(Apr 05 2022 at 15:49)</a>:</h4>
<p><span class="user-mention" data-user-id="192166">@Jean Duteau</span> if this is breaking profiles we could rename these from concentrationText and presentationText to textConcentration and textPresentation</p>



<a name="277902490"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/slicing%20datatypes/near/277902490" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/slicing.20datatypes.html#277902490">(Apr 05 2022 at 16:04)</a>:</h4>
<p>yeah, it will be a problem in profiles, but more importantly, I think it's a rule in FHIR (as Lloyd noted above) that you can't have a choice attribute and another attribute named the same.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
