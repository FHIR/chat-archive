---
layout: page
title: "FHIR Chat  · Strange error about a string · shorthand"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/index.html">shorthand</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Strange.20error.20about.20a.20string.html">Strange error about a string</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="242143839"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Strange%20error%20about%20a%20string/near/242143839" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Strange.20error.20about.20a.20string.html#242143839">(Jun 09 2021 at 23:32)</a>:</h4>
<p>I have this invariant expression:</p>
<div class="codehilite"><pre><span></span><code>Expression: &quot;(system = &#39;phone&#39; or system = &#39;fax&#39;) implies value.matches(&#39;^+d{1,3}-d{1,3}-d{3,4}-d{4}(;ext\=d+)?$&#39;)&quot;
</code></pre></div>
<p>And it causes this error:</p>
<div class="codehilite"><pre><span></span><code>mismatched input &#39;&quot;(system&#39; expecting STRING
</code></pre></div>
<p>I'm assuming it has something to do with my regex, but this line is just fine:</p>
<div class="codehilite"><pre><span></span><code>Expression: &quot;country = &#39;USA&#39; implies postalCode.matches(&#39;^d{5}(-d{4})?$&#39;)&quot;
</code></pre></div>
<p>I don't see anything obvious...</p>



<a name="242143917"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Strange%20error%20about%20a%20string/near/242143917" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Strange.20error.20about.20a.20string.html#242143917">(Jun 09 2021 at 23:33)</a>:</h4>
<p>nm, solved it.  it's the '\' character.  that needs to be escaped.</p>



<a name="242227771"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Strange%20error%20about%20a%20string/near/242227771" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Strange.20error.20about.20a.20string.html#242227771">(Jun 10 2021 at 15:47)</a>:</h4>
<p><span class="user-mention" data-user-id="192166">@Jean Duteau</span>, does that mean you don't allow phone numbers of the form "tel://..."? <span aria-label="grinning face with smiling eyes" class="emoji emoji-1f601" role="img" title="grinning face with smiling eyes">:grinning_face_with_smiling_eyes:</span></p>



<a name="242229561"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Strange%20error%20about%20a%20string/near/242229561" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Strange.20error.20about.20a.20string.html#242229561">(Jun 10 2021 at 15:59)</a>:</h4>
<p>yep.  we have a pretty strict telephone requirement for this project.  they actually have to look like real telephone numbers.  the work I've done to take V3 TEL and parse it to FHIR ContactPoints has been fun.</p>



<a name="242229773"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Strange%20error%20about%20a%20string/near/242229773" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Strange.20error.20about.20a.20string.html#242229773">(Jun 10 2021 at 16:00)</a>:</h4>
<p>BTW, for those who might care, here is the regexs for tel/fax and emails:</p>
<div class="codehilite"><pre><span></span><code>Expression: &quot;(system = &#39;phone&#39; or system = &#39;fax&#39;) implies value.matches(&#39;^\\\\+[0-9]{1,3}-[0-9]{1,3}-[0-9]{3,4}-[0-9]{4}(;ext=[0-9]+)?$&#39;)&quot;
Expression: &quot;system = &#39;email&#39; implies value.matches(&#39;^[a-zA-Z0-9.!#$%&amp;’*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(\\\\.[a-zA-Z0-9-]+)*$&#39;)&quot;
</code></pre></div>



<a name="242234626"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Strange%20error%20about%20a%20string/near/242234626" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Pyke <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Strange.20error.20about.20a.20string.html#242234626">(Jun 10 2021 at 16:34)</a>:</h4>
<p>So, not just XTN format?</p>



<a name="242238769"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Strange%20error%20about%20a%20string/near/242238769" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Strange.20error.20about.20a.20string.html#242238769">(Jun 10 2021 at 17:06)</a>:</h4>
<p>Do you mean to allow two digit area codes, exchange codes and station numbers? Area codes and exchange codes starting with zero or one? Exchange codes of x11? Disallow numbers outside NANP areas?</p>



<a name="242244776"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Strange%20error%20about%20a%20string/near/242244776" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Strange.20error.20about.20a.20string.html#242244776">(Jun 10 2021 at 17:48)</a>:</h4>
<p>I'll admit that it's not the most complete regex in that it allows numbers that might not be valid, but, as far as I know, all valid numbers will pass that regex.</p>



<a name="242244881"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Strange%20error%20about%20a%20string/near/242244881" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Pyke <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Strange.20error.20about.20a.20string.html#242244881">(Jun 10 2021 at 17:49)</a>:</h4>
<p>This is what I've used in the past : ^(\+\d{1,2}\s)?\(?\d{3}\)?[\s.-]?\d{3}[\s.-]?\d{4}$</p>



<a name="242244963"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Strange%20error%20about%20a%20string/near/242244963" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Pyke <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Strange.20error.20about.20a.20string.html#242244963">(Jun 10 2021 at 17:50)</a>:</h4>
<p>That only works for NA numbers.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
