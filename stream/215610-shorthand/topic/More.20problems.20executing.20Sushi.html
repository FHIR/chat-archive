---
layout: page
title: "FHIR Chat  · More problems executing Sushi · shorthand"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/index.html">shorthand</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/More.20problems.20executing.20Sushi.html">More problems executing Sushi</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="267686672"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/More%20problems%20executing%20Sushi/near/267686672" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/More.20problems.20executing.20Sushi.html#267686672">(Jan 12 2022 at 06:26)</a>:</h4>
<p>I've got a wrapper around the IG publisher that runs the IG publisher and manages my workflow for me. Works fine on windows. but on unix systems, the IG publisher can't run sushi when I launch it myself. I suspect it's got something to do with non-interactive shells and not hooking NPM in, but (as always for unix) there is a myriad of proposed solutions, none of which seem like a general solution. <span class="user-mention" data-user-id="191469">@Chris Moesel</span> am I making sense, and how would you recommend solving it. (the most general solutions seems to be 'set the BASH_ENV variable' but what do you set it too?)</p>



<a name="267722939"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/More%20problems%20executing%20Sushi/near/267722939" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/More.20problems.20executing.20Sushi.html#267722939">(Jan 12 2022 at 13:23)</a>:</h4>
<p>Hmmm... I use Mac (not Linux) and I don't generally have to do anything special, but I'm not running your wrapper either.  That said, the <code>_genonce.sh</code> script is a wrapper of sorts, and it "just works".  Is your wrapper a shell script or something else? What is the specific error you get when IG Publisher fails to launch SUSHI?</p>



<a name="267756068"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/More%20problems%20executing%20Sushi/near/267756068" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/More.20problems.20executing.20Sushi.html#267756068">(Jan 12 2022 at 17:17)</a>:</h4>
<p>it's not a shell script, it's an exe file. And the error is that fsh is an unknown command.</p>



<a name="267756865"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/More%20problems%20executing%20Sushi/near/267756865" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/More.20problems.20executing.20Sushi.html#267756865">(Jan 12 2022 at 17:22)</a>:</h4>
<p>Do you mean that <code>sushi</code> is an unknown command?  Or is it really saying <code>fsh</code> is an unknown command?  And, pardon my ignorance, but if it is an exe then how are you running it on Linux?</p>



<a name="267756868"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/More%20problems%20executing%20Sushi/near/267756868" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Pyke <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/More.20problems.20executing.20Sushi.html#267756868">(Jan 12 2022 at 17:22)</a>:</h4>
<p>fsh?  not sushi?</p>



<a name="269574569"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/More%20problems%20executing%20Sushi/near/269574569" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/More.20problems.20executing.20Sushi.html#269574569">(Jan 27 2022 at 13:54)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> -- did you get past this?  If it's still a problem, could you provide a little more info (by clarifying some of my questions above)?  And if there is a way to reproduce, that would be cool.</p>



<a name="269623602"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/More%20problems%20executing%20Sushi/near/269623602" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/More.20problems.20executing.20Sushi.html#269623602">(Jan 27 2022 at 19:20)</a>:</h4>
<p>sushi not fsh. I haven't got back to this - too many other problems to look at. It's certainly something to do with a non-interactive shell though</p>



<a name="271335098"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/More%20problems%20executing%20Sushi/near/271335098" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/More.20problems.20executing.20Sushi.html#271335098">(Feb 09 2022 at 19:36)</a>:</h4>
<p>this is now jumped to the very top of my todo list. I've switched to OSX, which is much more traumatic than I expected. grr. But I can't run sushi from eclipse. I can run it from the terminal:</p>



<a name="271335130"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/More%20problems%20executing%20Sushi/near/271335130" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/More.20problems.20executing.20Sushi.html#271335130">(Feb 09 2022 at 19:36)</a>:</h4>
<div class="codehilite"><pre><span></span><code> sushi
info  path-to-fsh-defs defaulted to current working directory
info  Running SUSHI v2.2.6 (implements FHIR Shorthand specification v1.2.0)
info  Arguments:
info    /Users/grahamegrieve
</code></pre></div>



<a name="271335163"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/More%20problems%20executing%20Sushi/near/271335163" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/More.20problems.20executing.20Sushi.html#271335163">(Feb 09 2022 at 19:36)</a>:</h4>
<p>but trying to run it from the IG publisher under the debugger gives:</p>



<a name="271335192"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/More%20problems%20executing%20Sushi/near/271335192" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/More.20problems.20executing.20Sushi.html#271335192">(Feb 09 2022 at 19:37)</a>:</h4>
<div class="codehilite"><pre><span></span><code>Sushi couldn&#39;t be run. Complete output from running Sushi :                      (00:00.0025)
Note: Check that Sushi is installed correctly (&quot;npm install -g fsh-sushi&quot;. On windows, get npm from https://www.npmjs.com/get-npm) (00:00.0025)
Exception: Cannot run program &quot;sushi&quot; (in directory &quot;/Users/grahamegrieve/temp/igs/swissnoso&quot;): error=2, No such file or directory (00:00.0025)
Publishing Content Failed: Cannot run program &quot;sushi&quot; (in directory &quot;/Users/grahamegrieve/temp/igs/swissnoso&quot;): error=2, No such file or directory (00:00.0026)
</code></pre></div>



<a name="271338135"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/More%20problems%20executing%20Sushi/near/271338135" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/More.20problems.20executing.20Sushi.html#271338135">(Feb 09 2022 at 19:56)</a>:</h4>
<p>this presumably is the answer: <a href="https://stackoverflow.com/questions/40503074/how-to-run-npm-command-in-java-using-process-builder">https://stackoverflow.com/questions/40503074/how-to-run-npm-command-in-java-using-process-builder</a></p>



<a name="271338170"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/More%20problems%20executing%20Sushi/near/271338170" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/More.20problems.20executing.20Sushi.html#271338170">(Feb 09 2022 at 19:56)</a>:</h4>
<p>answer 2</p>



<a name="271338198"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/More%20problems%20executing%20Sushi/near/271338198" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/More.20problems.20executing.20Sushi.html#271338198">(Feb 09 2022 at 19:56)</a>:</h4>
<p>but what should the hardcoded path be?</p>



<a name="271355026"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/More%20problems%20executing%20Sushi/near/271355026" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/More.20problems.20executing.20Sushi.html#271355026">(Feb 09 2022 at 22:10)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> I don't have any suggestions for you, but I've got sushi working on my mac. Let me know if there's anything you'd like me to try out.</p>



<a name="271355206"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/More%20problems%20executing%20Sushi/near/271355206" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/More.20problems.20executing.20Sushi.html#271355206">(Feb 09 2022 at 22:12)</a>:</h4>
<p>I don't know how the publisher tries to invoke SUSHI, but if you think answer 2 in the stack overflow article is right, then you can find out where your npm lives by running <code>which npm</code> in your terminal.  E.g., for me it is:</p>
<p><a href="/user_uploads/10155/10OZlhG1ZVcz9W1xKF0ZppuR/image.png">image.png</a> </p>
<div class="message_inline_image"><a href="/user_uploads/10155/10OZlhG1ZVcz9W1xKF0ZppuR/image.png" title="image.png"><img src="/user_uploads/10155/10OZlhG1ZVcz9W1xKF0ZppuR/image.png"></a></div><p>... so I would want /Users/cmoesel/.nvm/versions/node/bin` in my env path.  But this is of course very user-specific, so if you're looking for something that will work for everyone, we'd need to find a more robust solution.</p>
<p>I am using Mac.  Is this something I can easily reproduce?  I've never tried running IGP in Eclipse or a debugger.</p>



<a name="271356028"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/More%20problems%20executing%20Sushi/near/271356028" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/More.20problems.20executing.20Sushi.html#271356028">(Feb 09 2022 at 22:18)</a>:</h4>
<p>hmm <code>which npm</code> gives me /user/local/bin/npm.</p>



<a name="271359199"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/More%20problems%20executing%20Sushi/near/271359199" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/More.20problems.20executing.20Sushi.html#271359199">(Feb 09 2022 at 22:48)</a>:</h4>
<p>Right.  The location is user-specific, depending on how you installed node (and what version).  This is why I said we'd need to find a more robust solution if Grahame needs something that will work for everyone.  On the other hand, if he only needs something that will work for his own personal debugging, this might get him by.</p>



<a name="271365233"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/More%20problems%20executing%20Sushi/near/271365233" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/More.20problems.20executing.20Sushi.html#271365233">(Feb 09 2022 at 23:48)</a>:</h4>
<p>well, it needs to work for anyone who runs the IG publisher from a GUI application, not from terminal</p>



<a name="271365274"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/More%20problems%20executing%20Sushi/near/271365274" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/More.20problems.20executing.20Sushi.html#271365274">(Feb 09 2022 at 23:48)</a>:</h4>
<p>and setting environment variables is just crazy hard - if not impossible - on a mac.</p>



<a name="271365304"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/More%20problems%20executing%20Sushi/near/271365304" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/More.20problems.20executing.20Sushi.html#271365304">(Feb 09 2022 at 23:49)</a>:</h4>
<p>that is, system wide environment variables that GUI applications can see</p>



<a name="271461779"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/More%20problems%20executing%20Sushi/near/271461779" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/More.20problems.20executing.20Sushi.html#271461779">(Feb 10 2022 at 17:06)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> -- I think you implied in another thread that you resolved the SUSHI issue.  Is that true?  Or is there still more to be done here?</p>



<a name="271488752"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/More%20problems%20executing%20Sushi/near/271488752" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/More.20problems.20executing.20Sushi.html#271488752">(Feb 10 2022 at 20:20)</a>:</h4>
<p>actually, I did. From the next release, there's a file ~/.fhir/fhir-tool-settings.conf, which in format is a windows ini file. If you put the npm pathway in there, the IG publisher will add that path when running sushi.</p>
<div class="codehilite" data-code-language="INI"><pre><span></span><code><span class="k">[paths]</span><span class="w"></span>
<span class="na">npm</span><span class="o">=</span><span class="s">/Users/grahamegrieve/.nvm/versions/node/v17.4.0/bin</span><span class="w"></span>
<span class="na">ruby</span><span class="o">=</span><span class="s">/Users/grahamegrieve/.gem/ruby/3.1.0/bin:/Users/grahamegrieve/.gem/ruby/3.1.0/bin:/opt/homebrew/opt/ruby/bin:/Users/grahamegrieve/.nvm/versions/node/v17.4.0/bin:/opt/homebrew/bin:/opt/homebrew/sbin</span><span class="w"></span>
<span class="na">tests</span><span class="o">=</span><span class="s">/Users/grahamegrieve/work/test-cases</span><span class="w"></span>
<span class="na">compare</span><span class="o">=</span><span class="s">opendiff</span><span class="w"></span>
<span class="na">temp</span><span class="o">=</span><span class="s">/Users/grahamegrieve/temp</span><span class="w"></span>
</code></pre></div>



<a name="271504969"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/More%20problems%20executing%20Sushi/near/271504969" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/More.20problems.20executing.20Sushi.html#271504969">(Feb 10 2022 at 22:31)</a>:</h4>
<p><a href="https://confluence.hl7.org/display/FHIR/Using+fhir-tool-settings.conf">https://confluence.hl7.org/display/FHIR/Using+fhir-tool-settings.conf</a></p>



<a name="271859965"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/More%20problems%20executing%20Sushi/near/271859965" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick George <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/More.20problems.20executing.20Sushi.html#271859965">(Feb 14 2022 at 17:30)</a>:</h4>
<p>I was suggesting in an earlier thread, it would be nice to allow a flag for location of sushi binary, rather than relying on path resolution for unqualified <code>sushi</code></p>



<a name="271870766"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/More%20problems%20executing%20Sushi/near/271870766" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/More.20problems.20executing.20Sushi.html#271870766">(Feb 14 2022 at 18:52)</a>:</h4>
<p>well i think this is what you were looking for</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
