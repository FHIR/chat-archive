---
layout: page
title: "FHIR Chat  · Error in SUSHI with extensions? · shorthand"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/index.html">shorthand</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Error.20in.20SUSHI.20with.20extensions.3F.html">Error in SUSHI with extensions?</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="207418937"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Error%20in%20SUSHI%20with%20extensions%3F/near/207418937" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Silva <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Error.20in.20SUSHI.20with.20extensions.3F.html#207418937">(Aug 19 2020 at 15:00)</a>:</h4>
<p>I'm trying to use SUSHI/FSH to define an extension and even took, verbatim. the example from the FHIR FSH reference page:</p>
<ul>
<li>
<p>extension contains<br>
      ombCategory 0..5 MS<br>
      detailed 0..*<br>
      text 1..1 MS<br>
// rules defining the inline extensions would typically follow:</p>
</li>
<li>
<p>extension[ombCategory].value[x] only Coding</p>
</li>
<li>extension[ombCategory].valueCoding from <a href="http://hl7.org/fhir/us/core/ValueSet/omb-race-category">http://hl7.org/fhir/us/core/ValueSet/omb-race-category</a> (required)</li>
<li>extension[text].value[x] only string</li>
</ul>
<p>SUSHI returns this error:   (I've tried this with 0.12.7 and 0.15.1 and get the same error)</p>
<p>error mismatched input 'contains' expecting {'units', '='}<br>
 File: /Users/john/Vermonster/rule-engine-content/fsh/ACR-Headache.fsh<br>
 Line: 39<br>
error mismatched input 'only' expecting {'units', '='}</p>



<a name="207421067"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Error%20in%20SUSHI%20with%20extensions%3F/near/207421067" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Error.20in.20SUSHI.20with.20extensions.3F.html#207421067">(Aug 19 2020 at 15:15)</a>:</h4>
<p>can you share your actual file because what you posted above has an error that aren't related to the error you're showing, but I suspect that's just because we're not seeing the raw file (you are missing 'and' between the three extension names).</p>



<a name="207422578"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Error%20in%20SUSHI%20with%20extensions%3F/near/207422578" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Pyke <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Error.20in.20SUSHI.20with.20extensions.3F.html#207422578">(Aug 19 2020 at 15:27)</a>:</h4>
<p>Not having the "and" will cause that error.  I know from experience</p>



<a name="207424966"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Error%20in%20SUSHI%20with%20extensions%3F/near/207424966" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Silva <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Error.20in.20SUSHI.20with.20extensions.3F.html#207424966">(Aug 19 2020 at 15:46)</a>:</h4>
<p>Thanks David; I'll check that.  If that's the case then this page, which is where I got this example, needs to be fixed:</p>
<p><a href="https://build.fhir.org/ig/HL7/fhir-shorthand/reference.html#contains-rules-for-extensions">https://build.fhir.org/ig/HL7/fhir-shorthand/reference.html#contains-rules-for-extensions</a>.  (it;'s the last example just before sectin 3.5.5)</p>
<p>I cut-and-pasted that code exactly.   However, I also got the same error if I only had one lineL</p>



<a name="207425193"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Error%20in%20SUSHI%20with%20extensions%3F/near/207425193" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Silva <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Error.20in.20SUSHI.20with.20extensions.3F.html#207425193">(Aug 19 2020 at 15:47)</a>:</h4>
<p>I also tried this simple example and got the same error:</p>
<p>// Define extension inline for now</p>
<ul>
<li>extension contains display 0..1</li>
<li>extension[display].value[x] only string</li>
</ul>



<a name="207425881"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Error%20in%20SUSHI%20with%20extensions%3F/near/207425881" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Error.20in.20SUSHI.20with.20extensions.3F.html#207425881">(Aug 19 2020 at 15:53)</a>:</h4>
<p>Here is what I tried and it succeeded:</p>
<div class="codehilite"><pre><span></span><code>Profile: TestOrganization
Parent: Organization
* extension contains display 0..1
* extension[display].value[x] only string
</code></pre></div>


<p>NOTE: I think there is something else wrong in your file because when I copy and paste the example that is missing the 'and's, I get the following error:</p>
<div class="codehilite"><pre><span></span><code>error extraneous input &#39;detailed&#39; expecting {&lt;EOF&gt;, KW_ALIAS, KW_PROFILE, KW_EXTENSION, KW_INSTANCE, KW_INVARIANT, KW_VALUESET, KW_CODESYSTEM, KW_RULESET, KW_MAPPING}
  File: /Users/jeanduteau/Documents/DDIWork/IBM-BEST/datastandards/fsh/MessageOrganization.fsh
  Line: 76
</code></pre></div>



<a name="207434292"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Error%20in%20SUSHI%20with%20extensions%3F/near/207434292" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Freiter <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Error.20in.20SUSHI.20with.20extensions.3F.html#207434292">(Aug 19 2020 at 17:03)</a>:</h4>
<p>Thanks for noticing that <span class="user-mention" data-user-id="298707">@John Silva</span> , we will update that documentation to correctly include the "and"</p>



<a name="207466932"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Error%20in%20SUSHI%20with%20extensions%3F/near/207466932" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Silva <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Error.20in.20SUSHI.20with.20extensions.3F.html#207466932">(Aug 19 2020 at 22:04)</a>:</h4>
<p>Thanks <span class="user-mention" data-user-id="239822">@Nick Freiter</span> , thanks <span class="user-mention" data-user-id="192166">@Jean Duteau</span> .    A team member showed me how to do this but using an external extension not an inline one.   At least we were able to get it to work with external (which is actually better, because I need to reuse this on multiple PlanDefinition FSH files, in the action[].input[] structure.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
