---
layout: page
title: "FHIR Chat  · unsupported rule · shorthand"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/index.html">shorthand</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/unsupported.20rule.html">unsupported rule</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="183320594"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/unsupported%20rule/near/183320594" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Hay <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/unsupported.20rule.html#183320594">(Dec 13 2019 at 01:26)</a>:</h4>
<p>Getting this error (note lack of spaces)</p>
<blockquote>
<p>warn: Unsupported rule: *identifiercontainsHPI0..1MS   </p>
</blockquote>
<p>from this file</p>
<div class="codehilite"><pre><span></span>Profile:        HPIPractitioner
Parent:         Practitioner
Id:             hpi-practitioner
Title:          &quot;HPI Practitioner&quot;
Description:    &quot;The practitioner exposed by the HPI.&quot;
* identifier contains HPI 0..1 MS
* identifier 1..*
* identifier[HPI].system = &quot;https://standards.digital.health.nz/id/hpi-person&quot;
* name 1..*
* name.family 1..1
</pre></div>



<a name="183321474"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/unsupported%20rule/near/183321474" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Hay <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/unsupported.20rule.html#183321474">(Dec 13 2019 at 01:46)</a>:</h4>
<p>updated sushi and the errors are slightly different...</p>
<div class="codehilite"><pre><span></span>error: Cannot create HPI slice. No slicing found for Practitioner.identifier.
  File: /Users/davidhay/clinfhir/sushi/samples/HPIPractitioner.fsh
  Line: 7
error: No element found at path identifier[HPI] for HPIPractitioner, skipping rule
  File: /Users/davidhay/clinfhir/sushi/samples/HPIPractitioner.fsh
  Line: 7
error: No element found at path identifier[HPI] for HPIPractitioner, skipping rule
  File: /Users/davidhay/clinfhir/sushi/samples/HPIPractitioner.fsh
  Line: 7
error: No element found at path identifier[HPI].system for HPIPractitioner, skipping rule
  File: /Users/davidhay/clinfhir/sushi/samples/HPIPractitioner.fsh
  Line: 10
</pre></div>



<a name="183358993"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/unsupported%20rule/near/183358993" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/unsupported.20rule.html#183358993">(Dec 13 2019 at 13:34)</a>:</h4>
<p>In the current version of SUSHI, we have not implemented "Ginzu" slicing yet.  This means that we cannot <em>infer</em> slicing discriminators.  You need to set them yourself.  If you try to add a slice to an element that doesn't have a discriminator defined, you'll get that first error.  The next three errors are because creating that slice failed (due to no discriminator) -- so attempting to reference it will fail as well.</p>



<a name="183359333"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/unsupported%20rule/near/183359333" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/unsupported.20rule.html#183359333">(Dec 13 2019 at 13:39)</a>:</h4>
<p>You should be able to setup the discriminator in your above example using a syntax like this:</p>
<div class="codehilite"><pre><span></span>* identifier ^slicing.discriminator[0].type = #value
* identifier ^slicing.discriminator[0].path = &quot;system&quot;
* identifier ^slicing.ordered = false
* identifier ^slicing.rules = #open
</pre></div>


<p>... and you should do it <em>before</em> you use the <code>contains</code> rule to add the HPI slice.</p>



<a name="183423582"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/unsupported%20rule/near/183423582" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Hay <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/unsupported.20rule.html#183423582">(Dec 14 2019 at 04:32)</a>:</h4>
<p>Thanks! Figured that the first one was the root cause - but I copied the file from the docs and didn't realize that it wasn't supported yet...</p>



<a name="183545082"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/unsupported%20rule/near/183545082" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Kramer <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/unsupported.20rule.html#183545082">(Dec 16 2019 at 12:43)</a>:</h4>
<p><span class="user-mention" data-user-id="191321">@David Hay</span> I think two things are going on, related to the early phase of development of SUSHI... <br>
(1) Auto-slicing is not yet implemented. Therefore, you need to specify the slicing using the caret (escape) syntax:</p>
<div class="codehilite"><pre><span></span>* extension ^slicing.discriminator.type = #value
* extension ^slicing.discriminator.path = &quot;url&quot;
</pre></div>


<p>(This is an example for slicing an extension, which will no longer be necessary after 0.4 release, I'm told).</p>
<p>(2) The error "No element found at path" is something <span class="user-mention" data-user-id="239822">@Nick Freiter</span> is looking into now. We think it should be working, and it is just a bug.</p>



<a name="183551818"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/unsupported%20rule/near/183551818" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/unsupported.20rule.html#183551818">(Dec 16 2019 at 14:12)</a>:</h4>
<p><span class="user-mention" data-user-id="239822">@Nick Freiter</span> -  The "No element found at path" is expected since the rule that introduced the slice failed (therefore there the reference to the <em>failed</em> slice won't find anything).</p>



<a name="183552333"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/unsupported%20rule/near/183552333" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Freiter <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/unsupported.20rule.html#183552333">(Dec 16 2019 at 14:19)</a>:</h4>
<p>I think you are correct Chris. Mark has also found a bug with slicing that I am looking at now which can cause "No element found at path", but I don't believe that bug should be an issue in this case.</p>



<a name="207786449"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/unsupported%20rule/near/207786449" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mika Tuomainen <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/unsupported.20rule.html#207786449">(Aug 23 2020 at 18:59)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191469">Chris Moesel</span> <a href="#narrow/stream/215610-shorthand/topic/unsupported.20rule/near/183359333">said</a>:</p>
<blockquote>
<p>You should be able to setup the discriminator in your above example using a syntax like this:</p>
<div class="codehilite"><pre><span></span><code>* identifier ^slicing.discriminator[0].type = #value
* identifier ^slicing.discriminator[0].path = &quot;system&quot;
* identifier ^slicing.ordered = false
* identifier ^slicing.rules = #open
</code></pre></div>


<p>... and you should do it <em>before</em> you use the <code>contains</code> rule to add the HPI slice.</p>
</blockquote>
<p>Hi,</p>
<p>I have done some testing how to do slicing with Shorthand. I got the same error as the first writer (David) of this thread. I have done testing with examples found here (<a href="http://build.fhir.org/ig/HL7/fhir-shorthand/index.html">http://build.fhir.org/ig/HL7/fhir-shorthand/index.html</a>) and also in Shorthand tutorial slides.  I found the reason for this error when Grahame pointed this #shorthand stream and found the Chris's answer. I think it could be useful to instruct slicing order here: <a href="http://build.fhir.org/ig/HL7/fhir-shorthand/reference.html#contains-rules-for-slicing">http://build.fhir.org/ig/HL7/fhir-shorthand/reference.html#contains-rules-for-slicing</a>. Now there it reads: "In FSH, slicing is addressed in three steps: (1) identifying the slices, (2) defining each slice’s contents, and (3) specifying the slicing logic.". Maybe the firs step should be "specifying the slicing logic". And also in tutorial slides the order of the steps could be the right one <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span></p>



<a name="207835441"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/unsupported%20rule/near/207835441" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Freiter <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/unsupported.20rule.html#207835441">(Aug 24 2020 at 12:12)</a>:</h4>
<p><span class="user-mention" data-user-id="192558">@Mika Tuomainen</span> You make a very good point, the order of that documentation is confusing for someone first using FSH. I'm not sure how much freedom we have to make changes to the documentation at this point thought. <span class="user-mention" data-user-id="191447">@Mark Kramer</span> would know better than me.</p>
<p>Another thing to consider is that this documentation defines the FSH specification, and one could think of this requirement that the <code>^</code> rules come first as a weakness of the SUSHI reference implementation, and not something that is necessarily baked into FSH. If that is the case, then we should just fix this requirement in SUSHI and leave the documentation as-is.</p>



<a name="207843326"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/unsupported%20rule/near/207843326" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Kramer <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/unsupported.20rule.html#207843326">(Aug 24 2020 at 13:35)</a>:</h4>
<p>Good point. I added some documentation to make is clear that the three slicing steps are presented in <em>logical</em> order, but the rules from step (3) must physically occur BEFORE the rules in steps (1) and (2).</p>



<a name="207844617"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/unsupported%20rule/near/207844617" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Kramer <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/unsupported.20rule.html#207844617">(Aug 24 2020 at 13:47)</a>:</h4>
<p>Actually, strike that previous comment. I ended up re-ordering the three steps.</p>



<a name="207857123"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/unsupported%20rule/near/207857123" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/unsupported.20rule.html#207857123">(Aug 24 2020 at 15:25)</a>:</h4>
<p>Oh good. The incorrect order tripped me up too.</p>



<a name="207858028"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/unsupported%20rule/near/207858028" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/unsupported.20rule.html#207858028">(Aug 24 2020 at 15:31)</a>:</h4>
<p>I would agree with this - either fix the SUSHI implementation so that it does not matter what order it comes or make the change to the documentation as a technical correction.  And I should have read the rest of the replies in the thread. :)</p>



<a name="208152068"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/unsupported%20rule/near/208152068" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Kramer <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/unsupported.20rule.html#208152068">(Aug 26 2020 at 21:35)</a>:</h4>
<p>It's fixed now: <a href="http://build.fhir.org/ig/HL7/fhir-shorthand/reference.html#contains-rules-for-slicing">http://build.fhir.org/ig/HL7/fhir-shorthand/reference.html#contains-rules-for-slicing</a></p>



<a name="208152186"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/unsupported%20rule/near/208152186" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Kramer <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/unsupported.20rule.html#208152186">(Aug 26 2020 at 21:36)</a>:</h4>
<blockquote>
<p>one could think of this requirement that the ^ rules come first as a weakness of the SUSHI reference implementation, and not something that is necessarily baked into FSH.</p>
</blockquote>
<p><span class="user-mention" data-user-id="239822">@Nick Freiter</span>  Yes , I agree. We can relax this rule later.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
