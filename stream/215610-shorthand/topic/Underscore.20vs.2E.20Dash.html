---
layout: page
title: "FHIR Chat  · Underscore vs. Dash · shorthand"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/index.html">shorthand</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Underscore.20vs.2E.20Dash.html">Underscore vs. Dash</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="260333077"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Underscore%20vs.%20Dash/near/260333077" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matt Rouhana <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Underscore.20vs.2E.20Dash.html#260333077">(Nov 04 2021 at 20:53)</a>:</h4>
<p>It seems that you can use an underscore character (<code>_</code>) in logical model element names, SUSHI converts these to dashes/hyphens (<code>-</code>) if you try to profile the logical model reference the element. Is this intentional?</p>



<a name="260333730"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Underscore%20vs.%20Dash/near/260333730" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Freiter <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Underscore.20vs.2E.20Dash.html#260333730">(Nov 04 2021 at 20:58)</a>:</h4>
<p>I'm having trouble imagining exactly what you're describing, could you give an example?</p>



<a name="260356218"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Underscore%20vs.%20Dash/near/260356218" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matt Rouhana <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Underscore.20vs.2E.20Dash.html#260356218">(Nov 05 2021 at 01:19)</a>:</h4>
<p>I'm defining a logical model (<code>Logical</code>) in FSH. One of the elements looks like this:</p>
<div class="codehilite" data-code-language="Fish"><pre><span></span><code>* _source 1..1 code <span class="s2">"A value representing the source of the data captured within this record"</span>
</code></pre></div>
<p>When I run SUSHI, this shows up correctly in the corresponding StructureDefinition:</p>
<div class="codehilite" data-code-language="JSON"><pre><span></span><code>      <span class="p">{</span>
        <span class="nt">"id"</span><span class="p">:</span> <span class="s2">"my-logical-model._source"</span><span class="p">,</span>
        <span class="nt">"path"</span><span class="p">:</span> <span class="s2">"my-logical-model._source"</span><span class="p">,</span>
        <span class="nt">"short"</span><span class="p">:</span> <span class="s2">"A value representing the source of the data captured within this record"</span><span class="p">,</span>
        <span class="nt">"definition"</span><span class="p">:</span> <span class="s2">"A value representing the source of the data captured within this record"</span><span class="p">,</span>
        <span class="nt">"min"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="nt">"max"</span><span class="p">:</span> <span class="s2">"1"</span><span class="p">,</span>
        <span class="nt">"type"</span><span class="p">:</span> <span class="p">[</span>
          <span class="p">{</span>
            <span class="nt">"code"</span><span class="p">:</span> <span class="s2">"code"</span>
          <span class="p">}</span>
        <span class="p">]</span>
      <span class="p">},</span>
</code></pre></div>
<p>However, when I profile the logical model:</p>
<div class="codehilite" data-code-language="Fish"><pre><span></span><code>* _source MS
</code></pre></div>
<p>The corresponding StructureDefinition changes the <code>_</code> to a <code>-</code>:</p>
<div class="codehilite" data-code-language="JSON"><pre><span></span><code>      <span class="p">{</span>
        <span class="nt">"id"</span><span class="p">:</span> <span class="s2">"my-logical-model.-source"</span><span class="p">,</span>
        <span class="nt">"path"</span><span class="p">:</span> <span class="s2">"my-logical-model.-source"</span><span class="p">,</span>
        <span class="nt">"mustSupport"</span><span class="p">:</span> <span class="kc">true</span>
      <span class="p">},</span>
</code></pre></div>
<p>This causes all sorts of weirdness when rendering an IG, as it looks like the element isn't defined in the parent.</p>



<a name="260398211"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Underscore%20vs.%20Dash/near/260398211" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Stephen MacVicar <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Underscore.20vs.2E.20Dash.html#260398211">(Nov 05 2021 at 12:28)</a>:</h4>
<p>Underscores are not allowed in ids. <a href="https://www.hl7.org/fhir/datatypes.html#id">https://www.hl7.org/fhir/datatypes.html#id</a></p>



<a name="260402932"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Underscore%20vs.%20Dash/near/260402932" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matt Rouhana <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Underscore.20vs.2E.20Dash.html#260402932">(Nov 05 2021 at 13:13)</a>:</h4>
<p>Thanks <span class="user-mention" data-user-id="225612">@Stephen MacVicar</span> - I think SUSHI should throw a warning about this rather than silently changing the character. I'll add an issue in GitHub.</p>



<a name="260433757"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Underscore%20vs.%20Dash/near/260433757" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Silva <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Underscore.20vs.2E.20Dash.html#260433757">(Nov 05 2021 at 17:00)</a>:</h4>
<p>I ran into the underscore problem with some of the DaVinci profiles; hopefully they have been fixed to not use underscores.</p>



<a name="260800225"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Underscore%20vs.%20Dash/near/260800225" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Underscore.20vs.2E.20Dash.html#260800225">(Nov 09 2021 at 13:56)</a>:</h4>
<p><span class="user-mention" data-user-id="251487">@Matt Rouhana</span> -- I agree.  SUSHI needs to warn in these cases.  It's also inconsistent that SUSHI actually <em>allows</em> the underscore in the logical definition but transforms it in the profile.  I was about to log an issue for this, but see that you already did (<a href="https://github.com/FHIR/sushi/issues/950">SUSHI#950</a>)!  Thanks!</p>



<a name="264889918"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Underscore%20vs.%20Dash/near/264889918" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mint Thompson <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Underscore.20vs.2E.20Dash.html#264889918">(Dec 14 2021 at 17:04)</a>:</h4>
<p>I've done some investigation on this issue, and here's what I can report:</p>
<ul>
<li>This behavior does not appear to occur in recent versions of SUSHI. FSH Online is currently using SUSHI v2.2.1. The example used to demonstrate this is <a href="https://fshschool.org/FSHOnline/#/share/3IRjku7">https://fshschool.org/FSHOnline/#/share/3IRjku7</a></li>
<li>Underscores are not allowed in elements of type <code>id</code>, but <code>ElementDefinition.id</code>, which is inherited from <code>Element</code>, is <code>string</code> type, and there are no listed restrictions on <code>_</code> in <code>Element.id</code>.</li>
<li><code>ElementDefinition.path</code> contains the name of the element. <code>_</code> is not in the list of prohibited characters for <code>ElementDefinition.path</code>: <a href="https://hl7.org/fhir/elementdefinition.html#path">https://hl7.org/fhir/elementdefinition.html#path</a><br>
Therefore, the behavior as of SUSHI v2.2.1 seems to be in compliance with the specifications, and since <code>_</code> are no longer being changed to <code>-</code>,  there is no longer an inconsistency in the <code>id</code> and <code>path</code>. Please let me know if there is some additional detail about this scenario that I have not considered. Otherwise, I think that there is nothing that needs to change in SUSHI.</li>
</ul>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
