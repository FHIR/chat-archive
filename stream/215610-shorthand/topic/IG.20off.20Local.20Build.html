---
layout: page
title: "FHIR Chat  · IG off Local Build · shorthand"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/index.html">shorthand</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/IG.20off.20Local.20Build.html">IG off Local Build</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="230847494"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/IG%20off%20Local%20Build/near/230847494" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hugh Glover <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/IG.20off.20Local.20Build.html#230847494">(Mar 18 2021 at 11:28)</a>:</h4>
<p>Can I use FSH and the IG builder based on a build on my local machine rather than an "official" build?   I think I must be able to change some of the configuration paths, but I'm not clear which, and I can't find it in the documentation anywhere.</p>



<a name="230849934"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/IG%20off%20Local%20Build/near/230849934" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Egger <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/IG.20off.20Local.20Build.html#230849934">(Mar 18 2021 at 11:53)</a>:</h4>
<p>use "dev" (instead of current or the published version) in FSH and/or IG. In FSH you have a sushi-config.yaml where the dependencies are specified, in  the IG Publisher you specify the dependency in the ImplementationGuide resource provided to the IGPublisher.</p>



<a name="230856793"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/IG%20off%20Local%20Build/near/230856793" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/IG.20off.20Local.20Build.html#230856793">(Mar 18 2021 at 12:51)</a>:</h4>
<p>Right.  I believe when you specify a dependency version as <code>dev</code> it uses the <em>last local build</em> of the dependency -- so do note that if you make changes to the dependency locally, you need to build the dependency (using IG Publisher) in order for those changes to be reflected in the project that depends on it.</p>



<a name="230935175"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/IG%20off%20Local%20Build/near/230935175" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hugh Glover <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/IG.20off.20Local.20Build.html#230935175">(Mar 18 2021 at 20:49)</a>:</h4>
<p>Thanks both - I've added dependencies with an id and DEV and sushi is finding something it thinks matches that, but it doesn't have the content my local build has created.  I suspect the local build is putting stuff into one cache and sushi is looking in another.  Beyond that I don't really know what I'm looking for or how to fix it.  Words of wisdom and experience would be appreciated.</p>



<a name="230943999"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/IG%20off%20Local%20Build/near/230943999" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hugh Glover <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/IG.20off.20Local.20Build.html#230943999">(Mar 18 2021 at 21:59)</a>:</h4>
<p>OK some progress ... doing  a full build updates a folder .fhir with hl7.fhir.r5.core#current<br>
If I put this in the dependencies in Sushi-config.yaml Sushi finds it but then says "Downloading hl7.fhir.r5.core#current since SUSHI cannot determine if the version in the local cache is the most recent build"</p>
<p>My IG then fails to build because it cant see my local updates.  Is this a reasonable analysis and if so how do I force it to use the local copy not download a copy?</p>



<a name="231014294"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/IG%20off%20Local%20Build/near/231014294" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/IG.20off.20Local.20Build.html#231014294">(Mar 19 2021 at 12:25)</a>:</h4>
<p>Are you trying to use a local build of a dependency IG or a local build of FHIR R5?  Do you mind sharing your configuration.yaml file (either here or via direct message to me and <span class="user-mention" data-user-id="239822">@Nick Freiter</span> )?</p>
<p>The <code>current</code> version is supposed to mean "last auto build", so when you specify the version as <code>current</code> SUSHI will always try to download and use the last build from the build server.</p>



<a name="231045195"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/IG%20off%20Local%20Build/near/231045195" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hugh Glover <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/IG.20off.20Local.20Build.html#231045195">(Mar 19 2021 at 15:53)</a>:</h4>
<p>We are making significant changes to a resource for R5 and my plan was to build some examples on my local instance before putting anything into the official current build.  The reason being to allow people to consider and understand the effects of changes (and it is very likely they will change their minds on some things) before going through the formal process.  This will also give me examples I can put into the resource documentation.  I'm not at this point actually trying to build an IG though this almost certainly will morph into one at some point in the future.</p>



<a name="231045396"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/IG%20off%20Local%20Build/near/231045396" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hugh Glover <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/IG.20off.20Local.20Build.html#231045396">(Mar 19 2021 at 15:54)</a>:</h4>
<p>id: fhir.example.brandr.researchstudy<br>
canonical: <a href="http://example.org/brandr/researchstudy">http://example.org/brandr/researchstudy</a><br>
name: ResearchStudyIG<br>
title: "HL7 FHIR ResearchStudy Example"<br>
description: An illustrtation of representing a real regulated study in the ResearchStudy resource<br>
status: draft<br>
version: 0.1.0<br>
fhirVersion: 4.0.1<br>
copyrightYear: 2021+<br>
releaseLabel: draft<br>
publisher:<br>
    name: HL7 International - BR&amp;R Work Group<br>
    url: <a href="https://confluence.hl7.org/display/BRR/Biomedical+Research+and+Regulation">https://confluence.hl7.org/display/BRR/Biomedical+Research+and+Regulation</a><br>
dependencies:<br>
    hl7.fhir.r5.core : current</p>
<p>menu:<br>
  Home: index.html<br>
  Artifacts: artifacts.html</p>



<a name="231046763"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/IG%20off%20Local%20Build/near/231046763" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hugh Glover <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/IG.20off.20Local.20Build.html#231046763">(Mar 19 2021 at 16:02)</a>:</h4>
<p>Thinking about it and what you said about current the queston is how I get the local FHIR build to generate hl7.fhir.r5.core : dev</p>



<a name="231047924"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/IG%20off%20Local%20Build/near/231047924" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/IG.20off.20Local.20Build.html#231047924">(Mar 19 2021 at 16:10)</a>:</h4>
<p>Ah.. OK.  So I think there are a few things going on here:</p>
<ol>
<li>
<p>I think you're running into trouble because your <code>fhirVersion</code> says <code>4.0.1</code>, but you're trying to pull in FHIR R5 as a dependency.  I don't think an R4 project can depend on R5.  So you really need to change the <code>fhirVersion</code> and <em>remove</em> the <code>hl7.fhir.r5.core</code> from the dependencies.</p>
</li>
<li>
<p>Right now, we support <code>fhirVersion: current</code>, but as I noted before, this will always pull down the latest build from the build server.  What you really want is <code>fhirVersion: dev</code>, but right now SUSHI will not allow that.</p>
</li>
<li>
<p>It sounds like you've also found that when you do a local core FHIR build, it is not creating <code>~/.fhir/packages/hl7.fhir.r5.core#dev</code> -- so even if SUSHI allowed for it, it wouldn't be able to find it.  <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> / <span class="user-mention" data-user-id="248736">@Mark Iantorno</span> -- when you build core FHIR locally, does it put a package anywhere in the local FHIR cache?  If so, where?  If not, any ideas on where/how SUSHI could find a locally built FHIR core package?</p>
</li>
</ol>



<a name="231049357"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/IG%20off%20Local%20Build/near/231049357" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/IG.20off.20Local.20Build.html#231049357">(Mar 19 2021 at 16:20)</a>:</h4>
<p>I ended up asking #3 above in committers, as it seems that's probably the right place to ask.  <a href="#narrow/stream/179165-committers/topic/Cached.20R5.20.23dev.20packages.3F">https://chat.fhir.org/#narrow/stream/179165-committers/topic/Cached.20R5.20.23dev.20packages.3F</a></p>



<a name="231206498"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/IG%20off%20Local%20Build/near/231206498" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hugh Glover <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/IG.20off.20Local.20Build.html#231206498">(Mar 21 2021 at 10:07)</a>:</h4>
<p>My core build does produce a new  hl7.fhir.r5.core#current .user/.FHIR so I need to produce a dev version of that</p>



<a name="232274353"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/IG%20off%20Local%20Build/near/232274353" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hugh Glover <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/IG.20off.20Local.20Build.html#232274353">(Mar 29 2021 at 14:12)</a>:</h4>
<p>I've now got the changes to the resource into the current build (rather than trying to do it locally).  Setting <code>fhirVersion</code> to <code>current</code> downloads the latest build and sushi runs correctly.  However the IG publisher (I think) then complains it doesn't like <code>current</code>.  I can make it work by renaming <code>hl7.fhir.r5.core#</code> to <code>hl7.fhir.r5.core#4.5.0</code> but this is a hack.  What am I tripping over?</p>



<a name="232294009"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/IG%20off%20Local%20Build/near/232294009" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/IG.20off.20Local.20Build.html#232294009">(Mar 29 2021 at 16:14)</a>:</h4>
<p>I can confirm.  When I try to build a simple project w/ fhirVersion <code>current</code>, the IG Publisher emits this error:</p>
<blockquote>
<p>java.lang.Exception: Error Parsing File /Users/cmoesel/dev/fsh/R5Test/fsh-generated/resources/ImplementationGuide-fhir.example.json: Unknown FHIRVersion code 'current'</p>
</blockquote>
<p>I'm 99% sure this used to work.  <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> / <span class="user-mention" data-user-id="191832">@Jose Costa Teixeira</span> / <span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> -- do you have any insight into this?  Shouldn't the IG publisher support IG builds based on the "current" version of FHIR?  If so, is there a special way to do this?  We're currently setting <code>"fhirVersion": ["current"]</code> in the IG JSON file.  I think this used to work (unless we somehow missed testing it?).</p>



<a name="232294329"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/IG%20off%20Local%20Build/near/232294329" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/IG.20off.20Local.20Build.html#232294329">(Mar 29 2021 at 16:16)</a>:</h4>
<p>I don't recall if it ever worked - "current" is not in the valueset, so an IG with that value would be non-conformant.</p>



<a name="232294403"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/IG%20off%20Local%20Build/near/232294403" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/IG.20off.20Local.20Build.html#232294403">(Mar 29 2021 at 16:17)</a>:</h4>
<p>I do not know if there was an exception for the publisher to support "current".</p>



<a name="232294596"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/IG%20off%20Local%20Build/near/232294596" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/IG.20off.20Local.20Build.html#232294596">(Mar 29 2021 at 16:19)</a>:</h4>
<p>the place where "current" shows up is in the package-list</p>



<a name="232302920"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/IG%20off%20Local%20Build/near/232302920" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/IG.20off.20Local.20Build.html#232302920">(Mar 29 2021 at 17:17)</a>:</h4>
<p>Good point re: the value set.  Perhaps I am remembering it wrong...  But it seems we must have some way of building IGs against FHIR current, right?</p>



<a name="232303101"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/IG%20off%20Local%20Build/near/232303101" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/IG.20off.20Local.20Build.html#232303101">(Mar 29 2021 at 17:18)</a>:</h4>
<p>'current' is fine for IG dependencies, I don't think it's ever worked for fhirVersion.  That's a fixed enumeration.  Right now, it should be 4.5.0</p>



<a name="232303651"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/IG%20off%20Local%20Build/near/232303651" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gino Canessa <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/IG.20off.20Local.20Build.html#232303651">(Mar 29 2021 at 17:22)</a>:</h4>
<p>How does it determine if you want the 'local' 4.5.0 vs. the published 4.5.0 (September 2020)?</p>



<a name="232312236"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/IG%20off%20Local%20Build/near/232312236" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/IG.20off.20Local.20Build.html#232312236">(Mar 29 2021 at 18:17)</a>:</h4>
<p>Right.  In our case, I believe <span class="user-mention" data-user-id="196523">@Hugh Glover</span> needs to build against changes that were just recently made in R5 (not in the preview 3 release that was published as <code>4.5.0</code>).</p>



<a name="232312506"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/IG%20off%20Local%20Build/near/232312506" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/IG.20off.20Local.20Build.html#232312506">(Mar 29 2021 at 18:19)</a>:</h4>
<p>I presume Grahame will increment the release to 4.6.0 soon-ish.  I don't know what 4.5.0 resolves to right now...</p>



<a name="232318593"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/IG%20off%20Local%20Build/near/232318593" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hugh Glover <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/IG.20off.20Local.20Build.html#232318593">(Mar 29 2021 at 19:02)</a>:</h4>
<p>Looks like I have to keep hacking it to work ... sigh ...</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
