---
layout: page
title: "FHIR Chat  · Setting value[x] to a string in an example · shorthand"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/index.html">shorthand</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Setting.20value.5Bx.5D.20to.20a.20string.20in.20an.20example.html">Setting value[x] to a string in an example</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="215911651"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Setting%20value%5Bx%5D%20to%20a%20string%20in%20an%20example/near/215911651" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Setting.20value.5Bx.5D.20to.20a.20string.20in.20an.20example.html#215911651">(Nov 06 2020 at 22:27)</a>:</h4>
<p>I'm having some trouble with creating some examples where I either get a validation error or a "cannot fix string value" error from SUSHI.</p>
<p>Questionnaire.item.answerOption is the element that I'm trying to set.</p>
<p>If I do:<br>
<code>item[RadioGroup].answerOption[0].valueString = "1"</code><br>
I get:<br>
<code>Element Questionnaire.item.answerOption.value[x] has minimum cardinality 1 but occurs 0 time(s)</code></p>
<p>If I do:<br>
<code>item[RadioGroup].answerOption[0].value[x] = "1"</code><br>
I get:<br>
<code>Cannot fix string value on this element since this element does not have a single type</code></p>
<p>I'm reading the language reference and I can't see how to get out of this dilemma.</p>



<a name="215913011"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Setting%20value%5Bx%5D%20to%20a%20string%20in%20an%20example/near/215913011" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Setting.20value.5Bx.5D.20to.20a.20string.20in.20an.20example.html#215913011">(Nov 06 2020 at 22:40)</a>:</h4>
<p>Are you profiling or creating an instance? For an instance, shouldn't that be:</p>
<div class="codehilite"><pre><span></span><code> item[1234].answerOption[0].valueString = &quot;1&quot;
</code></pre></div>



<a name="215927244"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Setting%20value%5Bx%5D%20to%20a%20string%20in%20an%20example/near/215927244" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Setting.20value.5Bx.5D.20to.20a.20string.20in.20an.20example.html#215927244">(Nov 07 2020 at 02:33)</a>:</h4>
<p>duouh!  mixing my profiling and my instancing :)</p>



<a name="216085010"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Setting%20value%5Bx%5D%20to%20a%20string%20in%20an%20example/near/216085010" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Setting.20value.5Bx.5D.20to.20a.20string.20in.20an.20example.html#216085010">(Nov 09 2020 at 13:45)</a>:</h4>
<p>Actually, if there is a slice called "RadioGroup", then I think you <em>should</em> be able to say:</p>
<div class="codehilite"><pre><span></span><code>item[RadioGroup].answerOption[0].valueString = &quot;1&quot;
</code></pre></div>
<p>IIRC, that would create an instance of <code>item</code> w/ the <code>RadioGroup</code> constraints.  That said, I don't remember how that works if the <code>RadioGroup</code> slice has upper card &gt; 1 (i.e., how you specify the second item in the <code>RadioGroup</code> slice).</p>
<p>So, <span class="user-mention" data-user-id="192166">@Jean Duteau</span> -- this may be a real bug.  If you can provide more detail to help us reproduce it, we can take a look.</p>



<a name="273079588"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Setting%20value%5Bx%5D%20to%20a%20string%20in%20an%20example/near/273079588" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Setting.20value.5Bx.5D.20to.20a.20string.20in.20an.20example.html#273079588">(Feb 24 2022 at 11:59)</a>:</h4>
<p>I think this is a bug. Ended up with something similar: <code>error Element Questionnaire.item.item:currentValue.answerOption.value[x] has minimum cardinality 1 but occurs 0 time(s).</code></p>



<a name="273079778"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Setting%20value%5Bx%5D%20to%20a%20string%20in%20an%20example/near/273079778" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Setting.20value.5Bx.5D.20to.20a.20string.20in.20an.20example.html#273079778">(Feb 24 2022 at 12:01)</a>:</h4>
<p>answerOption.value[x] is populated:</p>
<div class="codehilite"><pre><span></span><code>* item[=].item[=].answerOption[+].valueCoding = exampleUserDefinedAnswer#answer-a
* item[=].item[=].answerOption[+].valueCoding = exampleUserDefinedAnswer#answer-b &quot;Antwort B&quot;
</code></pre></div>



<a name="273080007"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Setting%20value%5Bx%5D%20to%20a%20string%20in%20an%20example/near/273080007" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Setting.20value.5Bx.5D.20to.20a.20string.20in.20an.20example.html#273080007">(Feb 24 2022 at 12:03)</a>:</h4>
<p>It seems, that sushi doesn't accept valueConcept as value[x] in the cardinality check.</p>



<a name="273080068"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Setting%20value%5Bx%5D%20to%20a%20string%20in%20an%20example/near/273080068" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Setting.20value.5Bx.5D.20to.20a.20string.20in.20an.20example.html#273080068">(Feb 24 2022 at 12:04)</a>:</h4>
<p>The generated Profiles/Instances are valid. I checked them with the java validator.</p>



<a name="273080087"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Setting%20value%5Bx%5D%20to%20a%20string%20in%20an%20example/near/273080087" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Setting.20value.5Bx.5D.20to.20a.20string.20in.20an.20example.html#273080087">(Feb 24 2022 at 12:04)</a>:</h4>
<p>Example: <a href="https://fshschool.org/FSHOnline/#/share/3C0Uxkl">https://fshschool.org/FSHOnline/#/share/3C0Uxkl</a></p>



<a name="273095975"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Setting%20value%5Bx%5D%20to%20a%20string%20in%20an%20example/near/273095975" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Setting.20value.5Bx.5D.20to.20a.20string.20in.20an.20example.html#273095975">(Feb 24 2022 at 14:29)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="191451">@Patrick Werner</span>.  Thank you for the FSH Online link to reproduce this.  That is extremely helpful!</p>
<p>It seems there are a few things going on with SUSHI here, and that's confusing matters.  In general, if you're trying to assign things to slices, SUSHI does better if you name the slices in your path, rather than using indices.  This is because SUSHI is not a full-on validator/conformance engine, so it can't determine what elements are in what slices unless you tell it.  E.g., don't say</p>
<div class="codehilite"><pre><span></span><code>* item[=].item[+].linkId = &quot;a_current_value&quot;
</code></pre></div>
<p>but instead say </p>
<div class="codehilite"><pre><span></span><code>* item[=].item[currentValue].linkId = &quot;a_current_value&quot;
</code></pre></div>
<p>That said, the error above is curious, because it is complaining about the <code>answerOption.value[x]</code> in the <code>currentValue</code> slice.  But... looking at your example, your <code>currentValue</code> slice does not <em>have</em> an <code>answerOption</code> at all.  And your profile doesn't require one.  So SUSHI is definitely confused here.</p>
<p>I changed your example to call out all slices by name like this and it worked:</p>
<div class="codehilite"><pre><span></span><code>* item[=].item[question].linkId = &quot;a_question&quot;
* item[=].item[question].type = #choice
* item[=].item[question].readOnly = false
* item[=].item[question].text = &quot;This is the Question&quot;
* item[=].item[question].answerOption[+].valueCoding = exampleUserDefinedAnswer#answer-a
* item[=].item[question].answerOption[+].valueCoding = exampleUserDefinedAnswer#answer-b &quot;Antwort B&quot;
* item[=].item[currentValue].linkId = &quot;a_current_value&quot;
* item[=].item[currentValue].type = #string
* item[=].item[currentValue].readOnly = true
* item[=].item[currentValue].text = &quot;Current Value&quot;
* item[=].item[answerSuggestion].linkId = &quot;a_answer_suggestion&quot;
* item[=].item[answerSuggestion].type = #choice
* item[=].item[answerSuggestion].readOnly = true
* item[=].item[answerSuggestion].text = &quot;Answer Suggestion&quot;
* item[=].item[answerSuggestion].answerOption[+].valueCoding = exampleUserDefinedAnswer#answer-a &quot;Antwort A&quot;
* item[=].item[answerSuggestion].answerOption[+].valueCoding = exampleUserDefinedAnswer#answer-b &quot;Antwort B&quot;
</code></pre></div>
<p>(FSH Online: <a href="https://fshschool.org/FSHOnline/#/share/3Hljd7Y">https://fshschool.org/FSHOnline/#/share/3Hljd7Y</a>)</p>
<p>The downside, however, is that it outputs the items in a different order: <code>currentValue</code>, <code>answerSuggestion</code>, <code>question</code>.  This is neither the order you specified in the instance, nor the order you declared the slices in your profile, so I'm not sure where this ordering is coming from.  But, order is important in <code>Questionnaire.item</code>, so... this is not a good thing.</p>
<p>We'll have to look into this some more.</p>



<a name="273097119"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Setting%20value%5Bx%5D%20to%20a%20string%20in%20an%20example/near/273097119" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Setting.20value.5Bx.5D.20to.20a.20string.20in.20an.20example.html#273097119">(Feb 24 2022 at 14:38)</a>:</h4>
<p>thanks for diggin into it.</p>



<a name="273103745"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Setting%20value%5Bx%5D%20to%20a%20string%20in%20an%20example/near/273103745" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Setting.20value.5Bx.5D.20to.20a.20string.20in.20an.20example.html#273103745">(Feb 24 2022 at 15:26)</a>:</h4>
<p>(deleted)</p>



<a name="273104265"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Setting%20value%5Bx%5D%20to%20a%20string%20in%20an%20example/near/273104265" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Setting.20value.5Bx.5D.20to.20a.20string.20in.20an.20example.html#273104265">(Feb 24 2022 at 15:30)</a>:</h4>
<p>Oh.  Shoot. I think I kind of know what's happening here.  Since those are <em>required</em> slices, SUSHI tries to be "helpful" and auto-populates them into the instance <em>before</em> processing your rules.  Which means that the <code>currentValue</code> is already at index 0, <code>answerSuggestion</code> is at index 1, and <code>question</code> is at index 2.  Then your rules w/ soft-indexing are applied, your first item gets merged into the <code>currentValue</code> already at index 0, the next item gets merged into the <code>answerSuggestion</code> already at index 1, and the last item gets merged into the <code>question</code> already at index 2.  (sigh).</p>



<a name="273116694"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Setting%20value%5Bx%5D%20to%20a%20string%20in%20an%20example/near/273116694" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Setting.20value.5Bx.5D.20to.20a.20string.20in.20an.20example.html#273116694">(Feb 24 2022 at 16:52)</a>:</h4>
<p><span class="user-mention" data-user-id="191451">@Patrick Werner</span> - your use case resulted in the following two issues: <a href="https://github.com/FHIR/sushi/issues/1028">SUSHI-1028</a> and <a href="https://github.com/FHIR/sushi/issues/1029">SUSHI-1029</a>.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
