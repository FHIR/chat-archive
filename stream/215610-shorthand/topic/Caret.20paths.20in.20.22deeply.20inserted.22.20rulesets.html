---
layout: page
title: "FHIR Chat  · Caret paths in &quot;deeply inserted&quot; rulesets · shorthand"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/index.html">shorthand</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Caret.20paths.20in.20.22deeply.20inserted.22.20rulesets.html">Caret paths in &quot;deeply inserted&quot; rulesets</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="244675513"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Caret%20paths%20in%20%22deeply%20inserted%22%20rulesets/near/244675513" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Martin Höcker <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Caret.20paths.20in.20.22deeply.20inserted.22.20rulesets.html#244675513">(Jul 02 2021 at 08:54)</a>:</h4>
<p>Hooray for the new 2.0.0.beta2 release! I played around with the new "deep" insertion of rulesets, and I like it! But there is one thing I can't quite figure out. I would like to use caret-paths in rulesets, a little bit like so:</p>
<div class="codehilite"><pre><span></span><code>RuleSet: rs
* ^short = &quot;test&quot;

Profile: TestPatient
Parent: Patient
* name insert rs
</code></pre></div>
<p>Unfortunately, this leads to the error <code>No element found at path name. for CaretValueRule in TestPatient, skipping rule</code>.</p>
<p>The following things are additional variants of "deeply inserted" rulesets, where I also need caret paths:</p>
<p>Using parameterized rulesets:</p>
<div class="codehilite"><pre><span></span><code>RuleSet: rs(thing)
* ^short = &quot;{thing}&quot;

Profile: TestPatient
Parent: Patient
* name insert rs(hello)
</code></pre></div>
<p>Placing extensions into the StructureDefinition:</p>
<div class="codehilite"><pre><span></span><code>RuleSet: rs(thing)
* ^extension[MyExt].valueString = &quot;{thing}&quot;

Profile: TestPatient
Parent: Patient
* name insert rs(hello)
</code></pre></div>
<p>Both these examples lead to the same error as the first example. </p>
<p>As a workaround, I currently parameterize the preceding path. It "feels" wrong, but it works! Applied to the last example, it looks like this:</p>
<div class="codehilite"><pre><span></span><code>RuleSet: rs(path, thing)
* {path} ^extension[MyExt].valueString = &quot;{thing}&quot;

Profile: TestPatient
Parent: Patient
* insert rs(name, hello)
</code></pre></div>
<p>Is there a better way to use caret-paths with inserted rulesets?</p>



<a name="244702768"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Caret%20paths%20in%20%22deeply%20inserted%22%20rulesets/near/244702768" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Caret.20paths.20in.20.22deeply.20inserted.22.20rulesets.html#244702768">(Jul 02 2021 at 13:35)</a>:</h4>
<p><span class="user-mention" data-user-id="239822">@Nick Freiter</span> -- can you take a look at this and/or advise?</p>



<a name="244706260"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Caret%20paths%20in%20%22deeply%20inserted%22%20rulesets/near/244706260" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Freiter <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Caret.20paths.20in.20.22deeply.20inserted.22.20rulesets.html#244706260">(Jul 02 2021 at 14:01)</a>:</h4>
<p><span class="user-mention" data-user-id="217988">@Martin Höcker</span>, what you're trying to do is valid, that is definitely a bug. We will get that fixed as soon as possible. Sorry to make you use that workaround in the mean time, thanks for taking on the testing burden of being a <code>beta</code> user!</p>



<a name="244713026"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Caret%20paths%20in%20%22deeply%20inserted%22%20rulesets/near/244713026" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Martin Höcker <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Caret.20paths.20in.20.22deeply.20inserted.22.20rulesets.html#244713026">(Jul 02 2021 at 14:47)</a>:</h4>
<p>Thank you for raising <a href="https://github.com/FHIR/sushi/pull/866">the PR</a> so quickly! I tested it and it is indeed solving my issue!</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
