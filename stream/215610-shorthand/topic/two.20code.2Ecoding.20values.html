---
layout: page
title: "FHIR Chat  · two code.coding values · shorthand"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/index.html">shorthand</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/two.20code.2Ecoding.20values.html">two code.coding values</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="217305457"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/two%20code.coding%20values/near/217305457" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/two.20code.2Ecoding.20values.html#217305457">(Nov 19 2020 at 17:46)</a>:</h4>
<p>How do I specify that I want to force in a profile that the coding element in a code have TWO specific values?<br>
For example in Observation.code, where I need to indicate both a LOINC and SNOMED code for this Observation.<br>
Instance looks like:</p>
<blockquote>
<ul>
<li>code.coding = LOINC#72514-3 "Pain severity - 0-10 verbal numeric rating"</li>
<li>code.coding[1] = SNO#225908003 "Pain Score"</li>
</ul>
</blockquote>



<a name="217305583"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/two%20code.coding%20values/near/217305583" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/two.20code.2Ecoding.20values.html#217305583">(Nov 19 2020 at 17:47)</a>:</h4>
<p>Is this a resource example or a profile you're trying to create?</p>



<a name="217305644"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/two%20code.coding%20values/near/217305644" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/two.20code.2Ecoding.20values.html#217305644">(Nov 19 2020 at 17:47)</a>:</h4>
<p>I am trying to make a profile that would force instances to have these two codes</p>



<a name="217305785"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/two%20code.coding%20values/near/217305785" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/two.20code.2Ecoding.20values.html#217305785">(Nov 19 2020 at 17:48)</a>:</h4>
<p>so the example above comes from an instance that builds... but if I put that same thing into a profile, sushi complains about the second coding</p>



<a name="217305793"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/two%20code.coding%20values/near/217305793" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/two.20code.2Ecoding.20values.html#217305793">(Nov 19 2020 at 17:48)</a>:</h4>
<p>You'll probably need to define slices for them and require each to be present.</p>



<a name="217305877"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/two%20code.coding%20values/near/217305877" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/two.20code.2Ecoding.20values.html#217305877">(Nov 19 2020 at 17:49)</a>:</h4>
<p>show me</p>



<a name="217306379"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/two%20code.coding%20values/near/217306379" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/two.20code.2Ecoding.20values.html#217306379">(Nov 19 2020 at 17:53)</a>:</h4>
<p>I think this might do what you want...</p>
<div class="codehilite"><pre><span></span><code>code ^slicing.discriminator.type = #value
code ^slicing.discriminator.path = &quot;coding&quot;
code contains loincCode 1..1 MS and snomedCode 1..1 MS
code[loincCode].coding = LOINC#stuff (exactly)
code[snomedCode].coding = SNO#stuff (exactly)
</code></pre></div>



<a name="217306623"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/two%20code.coding%20values/near/217306623" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/two.20code.2Ecoding.20values.html#217306623">(Nov 19 2020 at 17:55)</a>:</h4>
<p>John, are you trying to bind to specific values or just say that there must be a LOINC code and a SNOMED code?</p>



<a name="217308023"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/two%20code.coding%20values/near/217308023" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/two.20code.2Ecoding.20values.html#217308023">(Nov 19 2020 at 18:05)</a>:</h4>
<p>specific values</p>



<a name="217308080"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/two%20code.coding%20values/near/217308080" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/two.20code.2Ecoding.20values.html#217308080">(Nov 19 2020 at 18:05)</a>:</h4>
<p>@jean. the repetition is not on .code... it is on code.coding</p>



<a name="217308275"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/two%20code.coding%20values/near/217308275" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/two.20code.2Ecoding.20values.html#217308275">(Nov 19 2020 at 18:06)</a>:</h4>
<p>yes, but coding doesn't repeat.  code does.  so you slice on code</p>



<a name="217308483"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/two%20code.coding%20values/near/217308483" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/two.20code.2Ecoding.20values.html#217308483">(Nov 19 2020 at 18:08)</a>:</h4>
<p>not in Observation</p>



<a name="217308527"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/two%20code.coding%20values/near/217308527" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/two.20code.2Ecoding.20values.html#217308527">(Nov 19 2020 at 18:08)</a>:</h4>
<p>.code is 1..1</p>



<a name="217308558"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/two%20code.coding%20values/near/217308558" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/two.20code.2Ecoding.20values.html#217308558">(Nov 19 2020 at 18:09)</a>:</h4>
<p>thus I need to repeat at .code.coding</p>



<a name="217308579"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/two%20code.coding%20values/near/217308579" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/two.20code.2Ecoding.20values.html#217308579">(Nov 19 2020 at 18:09)</a>:</h4>
<p>the loinc and snomed codes are equivilant</p>



<a name="217310835"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/two%20code.coding%20values/near/217310835" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/two.20code.2Ecoding.20values.html#217310835">(Nov 19 2020 at 18:28)</a>:</h4>
<p>Yeah, you're right.  maybe this is better...</p>
<div class="codehilite"><pre><span></span><code>code.coding ^slicing.discriminator.type = #value
code.coding ^slicing.discriminator.path = &quot;this&quot;
code.coding contains loincCode 1..1 MS and snomedCode 1..1 MS
code.coding[loincCode] = LOINC#stuff (exactly)
code.coding[snomedCode] = SNO#stuff (exactly)
</code></pre></div>



<a name="217311748"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/two%20code.coding%20values/near/217311748" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/two.20code.2Ecoding.20values.html#217311748">(Nov 19 2020 at 18:35)</a>:</h4>
<p>It worked!!!!! <span aria-label="heart" class="emoji emoji-2764" role="img" title="heart">:heart:</span>      Excellent. thanks</p>



<a name="217316229"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/two%20code.coding%20values/near/217316229" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/two.20code.2Ecoding.20values.html#217316229">(Nov 19 2020 at 19:13)</a>:</h4>
<p>I tried to make it a closed slice by adding</p>
<blockquote>
<ul>
<li>code.coding ^slicing.rules = #closed </li>
</ul>
</blockquote>
<p>but it doesn't seem to stop instances from having MORE coding than these two.</p>



<a name="217316572"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/two%20code.coding%20values/near/217316572" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/two.20code.2Ecoding.20values.html#217316572">(Nov 19 2020 at 19:14)</a>:</h4>
<p>yeah, I think you'd have to profile code.coding to be 2..2.  #closed should mean that you can only have those so you could have 20 repetitions but only of those 2 specific codings.</p>



<a name="217316903"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/two%20code.coding%20values/near/217316903" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/two.20code.2Ecoding.20values.html#217316903">(Nov 19 2020 at 19:17)</a>:</h4>
<p>yeah... again, that did work.</p>



<a name="217316958"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/two%20code.coding%20values/near/217316958" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/two.20code.2Ecoding.20values.html#217316958">(Nov 19 2020 at 19:17)</a>:</h4>
<p>wow, I actually am starting to understand this FHIR and FSH stuff! :)</p>



<a name="217317078"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/two%20code.coding%20values/near/217317078" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/two.20code.2Ecoding.20values.html#217317078">(Nov 19 2020 at 19:18)</a>:</h4>
<p>Just for fun, here is another approach:</p>
<div class="codehilite"><pre><span></span><code>* code ^patternCodeableConcept.coding[0].system = LOINC
* code ^patternCodeableConcept.coding[0].code = #stuff
* code ^patternCodeableConcept.coding[1].system = SNO
* code ^patternCodeableConcept.coding[1].code = #stuff
</code></pre></div>
<p>It results in:</p>
<div class="codehilite" data-code-language="JSON"><pre><span></span><code><span class="p">{</span>
  <span class="nt">"id"</span><span class="p">:</span> <span class="s2">"Observation.code"</span><span class="p">,</span>
  <span class="nt">"path"</span><span class="p">:</span> <span class="s2">"Observation.code"</span><span class="p">,</span>
  <span class="nt">"patternCodeableConcept"</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">"coding"</span><span class="p">:</span> <span class="p">[</span>
      <span class="p">{</span>
        <span class="nt">"system"</span><span class="p">:</span> <span class="s2">"http://loinc.org"</span><span class="p">,</span>
        <span class="nt">"code"</span><span class="p">:</span> <span class="s2">"stuff"</span>
      <span class="p">},</span>
      <span class="p">{</span>
        <span class="nt">"system"</span><span class="p">:</span> <span class="s2">"http://snomed.info/sct"</span><span class="p">,</span>
        <span class="nt">"code"</span><span class="p">:</span> <span class="s2">"stuff"</span>
      <span class="p">}</span>
    <span class="p">]</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>



<a name="217317109"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/two%20code.coding%20values/near/217317109" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/two.20code.2Ecoding.20values.html#217317109">(Nov 19 2020 at 19:19)</a>:</h4>
<p>well. slight change of topic... I need ValueQuantity.value to be between 0-10. So I tried this</p>
<blockquote>
<ul>
<li>valueQuantity.value ^minValueInteger = 0</li>
<li>valueQuantity.value ^maxValueInteger = 10</li>
</ul>
</blockquote>
<p>but this seems to allow 11</p>



<a name="217317146"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/two%20code.coding%20values/near/217317146" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/two.20code.2Ecoding.20values.html#217317146">(Nov 19 2020 at 19:19)</a>:</h4>
<p>Regarding my last approach, one thing I don't recall is if patterns enforce ordering in arrays or not.</p>



<a name="217317412"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/two%20code.coding%20values/near/217317412" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/two.20code.2Ecoding.20values.html#217317412">(Nov 19 2020 at 19:21)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191404">John Moehrke</span> <a href="#narrow/stream/215610-shorthand/topic/two.20code.2Ecoding.20values/near/217317109">said</a>:</p>
<blockquote>
<p>well. slight change of topic... I need ValueQuantity.value to be between 0-10. So I tried this</p>
<blockquote>
<ul>
<li>valueQuantity.value ^minValueInteger = 0</li>
<li>valueQuantity.value ^maxValueInteger = 10</li>
</ul>
</blockquote>
<p>but this seems to allow 11</p>
</blockquote>
<p>What do you mean by "this seems to allow 11"?  If you're saying that <em>SUSHI</em> allows you to create an instance with the value <code>11</code> then that doesn't really mean anything -- because SUSHI only does very very limited validation.  You'd want to test it w/ a real FHIR validator to see if it works as expected.</p>



<a name="217317555"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/two%20code.coding%20values/near/217317555" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/two.20code.2Ecoding.20values.html#217317555">(Nov 19 2020 at 19:22)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191404">John Moehrke</span> <a href="#narrow/stream/215610-shorthand/topic/two.20code.2Ecoding.20values/near/217317109">said</a>:</p>
<blockquote>
<p>well. slight change of topic... I need ValueQuantity.value to be between 0-10. So I tried this</p>
<blockquote>
<ul>
<li>valueQuantity.value ^minValueInteger = 0</li>
<li>valueQuantity.value ^maxValueInteger = 10</li>
</ul>
</blockquote>
<p>but this seems to allow 11</p>
</blockquote>
<p>Does that mean it’s louder? Is it any louder?  Well, it’s one louder, isn’t it? It’s not ten. You see, most blokes, you know, will be playing at ten...Where can you go from there? Where?</p>



<a name="217318038"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/two%20code.coding%20values/near/217318038" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/two.20code.2Ecoding.20values.html#217318038">(Nov 19 2020 at 19:25)</a>:</h4>
<p>Oh man, <span class="user-mention" data-user-id="192166">@Jean Duteau</span> -- I can't believe I missed that opportunity.  There I was, like a dope, providing a serious answer.</p>



<a name="217319671"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/two%20code.coding%20values/near/217319671" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/two.20code.2Ecoding.20values.html#217319671">(Nov 19 2020 at 19:36)</a>:</h4>
<p>I am not disappointed... yes, I understand Sushi would not be validating. but the build continues and does not complain. so I wondered if I had done the right sushi thing. first always expect chair-to-keyboard failure</p>



<a name="217321500"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/two%20code.coding%20values/near/217321500" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/two.20code.2Ecoding.20values.html#217321500">(Nov 19 2020 at 19:51)</a>:</h4>
<p>note.. I am getting a build error with that code.coding slicing trick.  I might have messed something up in the slicing trick?<br>
I have</p>
<p>"</p>
<ul>
<li>code.coding ^slicing.discriminator.type = #value</li>
<li>code.coding ^slicing.discriminator.path = "this"</li>
<li>code.coding ^slicing.rules = #closed</li>
<li>code.coding 2..2</li>
<li>code.coding contains loincCode 1..1 and snomedCode 1..1</li>
<li>code.coding[loincCode] = LOINC#72514-3 "Pain severity - 0-10 verbal numeric rating [Score] - Reported"</li>
<li>code.coding[snomedCode] = SNO#225908003 "Pain Score"<br>
"</li>
</ul>
<p>but get this error from the build</p>
<p>"<br>
Observation/ex-MHV-pain-0: Observation.code.coding[0] (l28/c8)  error   Internal error: Unable to resolve discriminator in definitions: this (@char 1)<br>
Observation/ex-MHV-pain-0: Observation.code.coding[1] (l33/c8)  error   Internal error: Unable to resolve discriminator in definitions: this (@char 1)<br>
Observation/ex-MHV-pain-0: Observation.code (l27/c16)   information Observation.code.coding:loincCode: Unable to check minimum required (Observation.code.coding) due to lack of slicing validation (from <a href="https://johnmoehrke.github.io/MHV-PGHD/StructureDefinition/VA.MHV.pain">https://johnmoehrke.github.io/MHV-PGHD/StructureDefinition/VA.MHV.pain</a>)<br>
Observation/ex-MHV-pain-0: Observation.code (l27/c16)   information Observation.code.coding:snomedCode: Unable to check minimum required (Observation.code.coding) due to lack of slicing validation (from <a href="https://johnmoehrke.github.io/MHV-PGHD/StructureDefinition/VA.MHV.pain">https://johnmoehrke.github.io/MHV-PGHD/StructureDefinition/VA.MHV.pain</a>)<br>
"</p>



<a name="217321908"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/two%20code.coding%20values/near/217321908" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Pyke <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/two.20code.2Ecoding.20values.html#217321908">(Nov 19 2020 at 19:54)</a>:</h4>
<p>i might be wrong but shouldn't it be "$this"?</p>



<a name="217322424"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/two%20code.coding%20values/near/217322424" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/two.20code.2Ecoding.20values.html#217322424">(Nov 19 2020 at 19:58)</a>:</h4>
<p>see... problem is in the chair-to-keyboard interface implementation</p>



<a name="217322725"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/two%20code.coding%20values/near/217322725" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Pyke <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/two.20code.2Ecoding.20values.html#217322725">(Nov 19 2020 at 20:00)</a>:</h4>
<p>Time to get a new, more intuitive keyboard</p>



<a name="236499125"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/two%20code.coding%20values/near/236499125" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Julian Sass <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/two.20code.2Ecoding.20values.html#236499125">(Apr 28 2021 at 12:39)</a>:</h4>
<p>Picking up on this with a question about two <code>codings</code> inside <code>code</code>. I'm defining two <code>coding</code> slices, one of which should be optional. And I want <code>code.coding</code> to remain <code>0..*</code>.  Sushi sets the minimum cardinality of <code>code.coding</code> to the number of slices defined. Plus it sets the minimum cardinality of the optional slice to 1. Am I missing something in my FSH file? Here's my snippet:</p>
<div class="codehilite"><pre><span></span><code>Alias: $loinc = http://loinc.org
Alias: $snomed = http://snomed.info/sct

Profile: RespRate
Parent: Observation
* code.coding ^slicing.discriminator[0].type = #pattern
* code.coding ^slicing.discriminator[0].path = &quot;$this&quot;
* code.coding ^slicing.rules = #open
* code.coding contains
    loinc 1..* and
    snomed 0..*
* code.coding[loinc] = $loinc#9279-1
* code.coding[loinc].system 1..
* code.coding[loinc].code 1..
* code.coding[snomed] = $snomed#86290005
* code.coding[snomed].system 1..
* code.coding[snomed].code 1..
</code></pre></div>
<p><a href="https://fshschool.org/FSHOnline/#/share/3tZBeml">https://fshschool.org/FSHOnline/#/share/3tZBeml</a></p>



<a name="236504873"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/two%20code.coding%20values/near/236504873" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Freiter <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/two.20code.2Ecoding.20values.html#236504873">(Apr 28 2021 at 13:19)</a>:</h4>
<p>I'm not quite sure what is going on here, it seems like for some reason this line</p>
<div class="codehilite"><pre><span></span><code>* code.coding[snomed] = $snomed#86290005
</code></pre></div>
<p>leads SUSHI to believe that <code>code.coding</code> must contain <code>$snomed#86290005</code>, but that does not seem right. We will have to investigate this more, I'll log it as a bug. In the meantime, you should be able to accomplish something logically equivalent to what you want by applying that assignment constraint  at the <code>system</code> and <code>code</code> level instead of the <code>coding</code> level. See here <a href="https://fshschool.org/FSHOnline/#/share/3vE7JXZ">https://fshschool.org/FSHOnline/#/share/3vE7JXZ</a> for an example of what I mean.</p>



<a name="236505775"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/two%20code.coding%20values/near/236505775" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Freiter <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/two.20code.2Ecoding.20values.html#236505775">(Apr 28 2021 at 13:24)</a>:</h4>
<p>Here is the bug: <a href="https://github.com/FHIR/sushi/issues/810">https://github.com/FHIR/sushi/issues/810</a>.</p>



<a name="236506112"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/two%20code.coding%20values/near/236506112" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Julian Sass <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/two.20code.2Ecoding.20values.html#236506112">(Apr 28 2021 at 13:26)</a>:</h4>
<p>Thanks <span class="user-mention" data-user-id="239822">@Nick Freiter</span></p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
