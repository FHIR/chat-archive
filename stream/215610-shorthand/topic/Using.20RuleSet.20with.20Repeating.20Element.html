---
layout: page
title: "FHIR Chat  · Using RuleSet with Repeating Element · shorthand"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/index.html">shorthand</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Using.20RuleSet.20with.20Repeating.20Element.html">Using RuleSet with Repeating Element</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="211796200"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Using%20RuleSet%20with%20Repeating%20Element/near/211796200" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jason Evans <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Using.20RuleSet.20with.20Repeating.20Element.html#211796200">(Sep 30 2020 at 17:45)</a>:</h4>
<p>Is there a way to insert a ruleset on an &lt;element&gt; the same way the obeys keyword allows? This is the syntax that I would expect:</p>
<ul>
<li>insert {RuleSet name} -- this works</li>
<li>&lt;element&gt; insert {RuleSet name} -- is there a way to do this?</li>
</ul>
<p>My goal is to consolidate PlanDefinition.action elements that exist in multiple PlanDefinition instances. For example: PlanDefinition1 has actions { A, B, C, D }, PlanDefinition2 has actions { A, B }, and PlanDefinition3 as actions { A, D }. Right now I'm faced with copy-pasting the action[A] into each definition, but I'd like to have a single source of truth for that action definition.</p>
<p>RuleSet: A</p>
<ul>
<li>title = "Title A"</li>
</ul>
<p>RuleSet: B</p>
<ul>
<li>title = "Title B"</li>
</ul>
<p>RuleSet: C</p>
<ul>
<li>title = "Title C"</li>
</ul>
<p>RuleSet: D</p>
<ul>
<li>title = "Title D"</li>
</ul>
<p>Instance: PlanDefinition1<br>
InstanceOf: PlanDefinition</p>
<ul>
<li>action[0] insert A</li>
<li>action[1] insert B</li>
<li>action[2] insert C</li>
<li>action[3] insert D</li>
</ul>
<p>Instance: PlanDefinition2<br>
InstanceOf: PlanDefinition</p>
<ul>
<li>action[0] insert A</li>
<li>action[1] insert B</li>
</ul>
<p>Instance: PlanDefinition3<br>
InstanceOf: PlanDefinition</p>
<ul>
<li>action[0] insert A</li>
<li>action[1] insert D</li>
</ul>



<a name="211797428"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Using%20RuleSet%20with%20Repeating%20Element/near/211797428" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Using.20RuleSet.20with.20Repeating.20Element.html#211797428">(Sep 30 2020 at 17:55)</a>:</h4>
<p>Unfortunately, the short answer to your question is "No, that's not supported."  But we have some features planned for STU2 that I think would work really well for what you're wanting to do.  See the <a href="https://fshschool.org/downloads/sept-2020-fsh-tutorial-part-3.pptx">Wicked FSH</a> powerpoint for a quick overview of what you might expect to see in STU2.</p>



<a name="211797830"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Using%20RuleSet%20with%20Repeating%20Element/near/211797830" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jason Evans <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Using.20RuleSet.20with.20Repeating.20Element.html#211797830">(Sep 30 2020 at 17:58)</a>:</h4>
<p>Thanks for responding! I had hoped there was an undocumented way to achieve this, but I'll deal with keeping the multiple sources of truth in lockstep for now.</p>



<a name="211798292"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Using%20RuleSet%20with%20Repeating%20Element/near/211798292" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Using.20RuleSet.20with.20Repeating.20Element.html#211798292">(Sep 30 2020 at 18:02)</a>:</h4>
<p>Well, in your example above, I think you could at least extract action A, right?  You said Action A is in common across all of them, and assuming Action A is always at <code>action[0]</code> you could have:</p>
<div class="codehilite"><pre><span></span><code>RuleSet: A
* action[0].title = &quot;Title A&quot;
// ...
</code></pre></div>


<p>then</p>
<div class="codehilite"><pre><span></span><code>Instance: PlanDefinition1
InstanceOf: PlanDefinition
* insert A
// ...
</code></pre></div>



<a name="211798403"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Using%20RuleSet%20with%20Repeating%20Element/near/211798403" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jason Evans <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Using.20RuleSet.20with.20Repeating.20Element.html#211798403">(Sep 30 2020 at 18:03)</a>:</h4>
<p>Agreed, A could be extracted (and probably B given my naive example), but D could not.</p>



<a name="211798902"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Using%20RuleSet%20with%20Repeating%20Element/near/211798902" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jason Evans <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Using.20RuleSet.20with.20Repeating.20Element.html#211798902">(Sep 30 2020 at 18:07)</a>:</h4>
<p>I think the STU2 release would solve my issue with the soft indexing feature. I'm looking forward to that!</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
