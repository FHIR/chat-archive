---
layout: page
title: "FHIR Chat  · Slicing  with profile discriminator · shorthand"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/index.html">shorthand</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Slicing.20.20with.20profile.20discriminator.html">Slicing  with profile discriminator</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="207499619"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Slicing%20%20with%20profile%20discriminator/near/207499619" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Torben M. Hagensen <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Slicing.20.20with.20profile.20discriminator.html#207499619">(Aug 20 2020 at 08:28)</a>:</h4>
<p>Can anyone please help me?</p>
<p>I'm trying to slice a bundle entry using the profile as discriminator, but SUSHI give me an "Value does not match element type" error.<br>
I have provided a simple example of my approach below. What am I missing?</p>
<p>Thanks, Torben</p>
<p>Profile: MyBundle<br>
Parent: Bundle<br>
...</p>
<ul>
<li>entry ^slicing.discriminator.type = #profile</li>
<li>entry ^slicing.discriminator.path = "item.resolve()"</li>
<li>entry contains myPatient 1..1 and ...</li>
<li>entry[myPatient ].resource 1..1</li>
<li>entry[myPatient ].resource only MyPatient<br>
...</li>
</ul>
<p>Profile: MyPatient<br>
Parent: Patient<br>
...</p>
<p>Instance: TestPatient<br>
InstanceOf: MyPatient<br>
...</p>
<p>Instance: TestBundle<br>
InstanceOf: MyBundle<br>
...</p>
<ul>
<li>entry[myPatient ].resource = Reference(TestPatient) // Fails: Cannot fix Reference value: Reference(Patient/TestPatient). Value does not match element type: Patient<br>
...</li>
</ul>



<a name="207504524"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Slicing%20%20with%20profile%20discriminator/near/207504524" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Torben M. Hagensen <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Slicing.20.20with.20profile.20discriminator.html#207504524">(Aug 20 2020 at 09:32)</a>:</h4>
<p><span class="user-mention silent" data-user-id="240678">Torben M. Hagensen</span> <a href="#narrow/stream/215610-shorthand/topic/Slicing.20.20with.20profile.20discriminator/near/207499619">said</a>:</p>
<blockquote>
<ul>
<li>entry ^slicing.discriminator.path = "item.resolve()"</li>
</ul>
</blockquote>
<p>It seems to ignore the path entirely???<br>
Tried "resource" and "adkfkjhk" with no effect at all.</p>
<p>I hope someone can tell me how to do this <span aria-label="sweat" class="emoji emoji-1f613" role="img" title="sweat">:sweat:</span></p>



<a name="207515873"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Slicing%20%20with%20profile%20discriminator/near/207515873" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Torben M. Hagensen <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Slicing.20.20with.20profile.20discriminator.html#207515873">(Aug 20 2020 at 12:23)</a>:</h4>
<p><span class="user-mention silent" data-user-id="240678">Torben M. Hagensen</span> <a href="#narrow/stream/215610-shorthand/topic/Slicing.20.20with.20profile.20discriminator/near/207499619">said</a>:</p>
<blockquote>
<ul>
<li>entry[myPatient ].resource = Reference(TestPatient) // Fails: Cannot fix Reference value: Reference(Patient/TestPatient). Value does not match element type: Patient</li>
</ul>
</blockquote>
<p>Stupid me. This line should be:</p>
<ul>
<li>entry[myPatient].resource = TestPatient</li>
</ul>
<p>Actually, what the error said <span aria-label="weary" class="emoji emoji-1f629" role="img" title="weary">:weary:</span></p>



<a name="207555763"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Slicing%20%20with%20profile%20discriminator/near/207555763" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Slicing.20.20with.20profile.20discriminator.html#207555763">(Aug 20 2020 at 18:15)</a>:</h4>
<p>Ha.  Yeah, it was complaining because you used a reference where a inline instance (not reference) was needed.  That said, although the error did say that, it didn't say it as clearly as it could have.  I can see how the error could be misunderstood to mean that the reference is of the wrong type (which it's not).  I'll file an issue to see if we can provide a clearer error for this type of situation.  Maybe something like:</p>



<a name="207556083"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Slicing%20%20with%20profile%20discriminator/near/207556083" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Slicing.20.20with.20profile.20discriminator.html#207556083">(Aug 20 2020 at 18:18)</a>:</h4>
<blockquote>
<p>Cannot fix Reference value: Reference(Patient/TestPatient). References are not allowed at this path; use a value directly instead.</p>
</blockquote>



<a name="207556596"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Slicing%20%20with%20profile%20discriminator/near/207556596" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Slicing.20.20with.20profile.20discriminator.html#207556596">(Aug 20 2020 at 18:23)</a>:</h4>
<p>Logged: <a href="https://github.com/FHIR/sushi/issues/575">https://github.com/FHIR/sushi/issues/575</a></p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
