---
layout: page
title: "FHIR Chat  · ig-loader examples · shorthand"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/index.html">shorthand</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/ig-loader.20examples.html">ig-loader examples</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="264493590"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/ig-loader%20examples/near/264493590" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/ig-loader.20examples.html#264493590">(Dec 10 2021 at 19:05)</a>:</h4>
<p>Does someone have a working use of "ig-loader" Binary adjunct files support? I am reading the documentation and not grok<br>
<a href="https://confluence.hl7.org/pages/viewpage.action?pageId=66938614#ImplementationGuideParameters-BinaryAdjunctFiles">https://confluence.hl7.org/pages/viewpage.action?pageId=66938614#ImplementationGuideParameters-BinaryAdjunctFiles</a></p>



<a name="264858868"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/ig-loader%20examples/near/264858868" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/ig-loader.20examples.html#264858868">(Dec 14 2021 at 13:46)</a>:</h4>
<p>I would like to use this ig-loader functionality, but I can't get it to work.</p>



<a name="264861337"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/ig-loader%20examples/near/264861337" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/ig-loader.20examples.html#264861337">(Dec 14 2021 at 14:02)</a>:</h4>
<p>I feel like I tried this once before.  I will check to see if I still have that example lying around somewhere.</p>



<a name="264866877"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/ig-loader%20examples/near/264866877" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/ig-loader.20examples.html#264866877">(Dec 14 2021 at 14:40)</a>:</h4>
<p>OK.  I found it and experimented some more.  When I use it w/ CQL (which includes special behavior to also compile to ELM), it works well.  When I use it w/ a JPG, it causes errors.  But... it does seem to populate the base64 data anyway (although I thought it would also populate <code>contentType</code>, which doesn't seem to be happening).</p>
<p>Here's my sample project: <a href="/user_uploads/10155/0QhZvnHF4N8SFrIrZekDjJNC/BinaryAdjunct.zip">BinaryAdjunct.zip</a></p>



<a name="265069932"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/ig-loader%20examples/near/265069932" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/ig-loader.20examples.html#265069932">(Dec 15 2021 at 20:21)</a>:</h4>
<p>I tried it with .txt files. It did not appear to put the file into the DocumentReference.content</p>



<a name="265071282"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/ig-loader%20examples/near/265071282" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/ig-loader.20examples.html#265071282">(Dec 15 2021 at 20:32)</a>:</h4>
<p><span class="user-mention" data-user-id="191832">@Jose Costa Teixeira</span> have you used ig-loader to load binary?</p>



<a name="265073599"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/ig-loader%20examples/near/265073599" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/ig-loader.20examples.html#265073599">(Dec 15 2021 at 20:53)</a>:</h4>
<p>I just got it to work with Binary and a jpg file... (my own fat fingers typo to blame).</p>



<a name="265074756"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/ig-loader%20examples/near/265074756" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/ig-loader.20examples.html#265074756">(Dec 15 2021 at 21:03)</a>:</h4>
<p>do notice that in DocumentReference. It will work, but will not set the contentType, and if you try to set the contentType, the the ig-loader solution will not work (just puts the ig-loader filename on the id). I think this is the first problem I was noticing. So, this works</p>
<div class="codehilite"><pre><span></span><code>Instance: Dr-SAML-QDI
InstanceOf: DocumentReference
* status = #current
* content.attachment.id = &quot;ig-loader-QDI-SAML-20211210.jpg&quot;
</code></pre></div>
<p>but will not give you a DocumentReference with a contentType.</p>
<p>If you add contentType, then you will not get what you want.</p>



<a name="265076083"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/ig-loader%20examples/near/265076083" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/ig-loader.20examples.html#265076083">(Dec 15 2021 at 21:16)</a>:</h4>
<p>And as <span class="user-mention" data-user-id="191469">@Chris Moesel</span> mentions two errors do show up in the QA report</p>
<div class="codehilite"><pre><span></span><code>att-1: &#39;If the Attachment has data, it SHALL have a contentType&#39; Rule &#39;If the Attachment has data, it SHALL have a contentType&#39; Failed
</code></pre></div>
<p>and</p>
<div class="codehilite"><pre><span></span><code>Unknown file type foobar.txt
</code></pre></div>



<a name="265078269"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/ig-loader%20examples/near/265078269" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/ig-loader.20examples.html#265078269">(Dec 15 2021 at 21:34)</a>:</h4>
<p>so, is this a problem in sushi support for ig-loader? Or is this a problem in IG builder? or both? ... meaning, where should I log an issue?</p>



<a name="265159865"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/ig-loader%20examples/near/265159865" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/ig-loader.20examples.html#265159865">(Dec 16 2021 at 14:03)</a>:</h4>
<p>I believe it's in the IG Publisher.  SUSHI doesn't do anything special for adjunct binary.  It's just another instance from SUSHI's point of view.  All of the magic is in IG Publisher.</p>



<a name="265160397"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/ig-loader%20examples/near/265160397" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/ig-loader.20examples.html#265160397">(Dec 16 2021 at 14:07)</a>:</h4>
<p>That said, the one thing SUSHI could potentially improve here is its treatment of <code>Binary</code> when the <code>data</code> field starts w/ <code>ig-loader-</code>.  Since SUSHI treats it like a normal instance, it emits an error if you don't specify <code>contentType</code> (since it is 1..1), but if the IG Publisher populates <code>contentType</code> for adjunct binaries, then SUSHI could potentially detect that the <code>data</code> value starts with <code>ig-loader-</code> and then relax the cardinality check...  but I don't think that would fix the issue you see here.</p>



<a name="265161961"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/ig-loader%20examples/near/265161961" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/ig-loader.20examples.html#265161961">(Dec 16 2021 at 14:20)</a>:</h4>
<p>that seems right. I will record as ig-publisher bug.</p>



<a name="265165690"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/ig-loader%20examples/near/265165690" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/ig-loader.20examples.html#265165690">(Dec 16 2021 at 14:45)</a>:</h4>
<p><a href="https://github.com/HL7/fhir-ig-publisher/issues/355">https://github.com/HL7/fhir-ig-publisher/issues/355</a></p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
