---
layout: page
title: "FHIR Chat  · Problem assigning values to specific slice · shorthand"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/index.html">shorthand</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Problem.20assigning.20values.20to.20specific.20slice.html">Problem assigning values to specific slice</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="194013313"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Problem%20assigning%20values%20to%20specific%20slice/near/194013313" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pétur Valdimarsson <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Problem.20assigning.20values.20to.20specific.20slice.html#194013313">(Apr 15 2020 at 11:00)</a>:</h4>
<p>Thanks for the new release!<br>
Ran into an issue when trying it out on my fsh-tanks. If I try to assign a value to a specific slice I get an error.</p>
<div class="codehilite"><pre><span></span>Cannot read property &#39;some&#39; of undefined
  File: /[...]/Patient.fsh
  Line: 9
</pre></div>


<p>Here is a sample file that I created to isolate the problem:</p>
<div class="codehilite"><pre><span></span>Profile:        OurNewProfile
Parent:         Patient
Id:             our-new-profile

* telecom 2..
* telecom ^slicing.rules = #closed
* telecom contains phone 1..1 and email 1..1
* telecom[phone].system = #phone
</pre></div>


<p>Unsure if this is related to <a href="https://github.com/FHIR/sushi/issues/357" title="https://github.com/FHIR/sushi/issues/357">#357</a></p>



<a name="194016724"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Problem%20assigning%20values%20to%20specific%20slice/near/194016724" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Freiter <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Problem.20assigning.20values.20to.20specific.20slice.html#194016724">(Apr 15 2020 at 11:44)</a>:</h4>
<p>This looks to be an issue with a place in the code where we assumed a <code>slicing.discriminator</code> would exist but it actually does not.  You'll notice that if you add something along the lines of:</p>
<div class="codehilite"><pre><span></span>* telecom ^slicing.discriminator.type = #value
* telecom ^slicing.discriminator.path = &quot;system&quot;
</pre></div>


<p>the error should go away. But, the <code>discriminator</code> has cardinality <code>0..1</code>, so we should not be assuming it exists, and you should not be required to add the two lines shown above, so this is a bug we will fix. Thanks for the find!</p>



<a name="194213829"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Problem%20assigning%20values%20to%20specific%20slice/near/194213829" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Problem.20assigning.20values.20to.20specific.20slice.html#194213829">(Apr 15 2020 at 19:12)</a>:</h4>
<p><span class="user-mention" data-user-id="193397">@Pétur Valdimarsson</span> -- this is fixed in the newly released SUSHI 0.12.1 (which also contains your _updatePublisher contribution!).</p>



<a name="194263741"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Problem%20assigning%20values%20to%20specific%20slice/near/194263741" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pétur Valdimarsson <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Problem.20assigning.20values.20to.20specific.20slice.html#194263741">(Apr 16 2020 at 07:03)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191469">Chris Moesel</span> <a href="#narrow/stream/215610-shorthand/topic/Problem.20assigning.20values.20to.20specific.20slice/near/194213829" title="#narrow/stream/215610-shorthand/topic/Problem.20assigning.20values.20to.20specific.20slice/near/194213829">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="193397">Pétur Valdimarsson</span> -- this is fixed in the newly released SUSHI 0.12.1 (which also contains your _updatePublisher contribution!).</p>
</blockquote>
<p>Excellent! I've verified that this works as expected. Thank you guys for the incredibly fast response :)</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
