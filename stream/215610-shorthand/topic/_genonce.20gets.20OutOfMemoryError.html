---
layout: page
title: "FHIR Chat  · _genonce gets OutOfMemoryError · shorthand"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/index.html">shorthand</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/_genonce.20gets.20OutOfMemoryError.html">_genonce gets OutOfMemoryError</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="195116928"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/_genonce%20gets%20OutOfMemoryError/near/195116928" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Discenza <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/_genonce.20gets.20OutOfMemoryError.html#195116928">(Apr 23 2020 at 20:43)</a>:</h4>
<p>I'm getting a java.lang.OutOfMemoryError trying to run _genonce on a Windows 10 system. <a href="/user_uploads/10155/wyuoq-62ObAQ2N2LGeGY67jH/image.png" title="image.png">image.png</a>    Can anyone advise me as to how to deal with this? Thx.</p>
<div class="message_inline_image"><a href="/user_uploads/10155/wyuoq-62ObAQ2N2LGeGY67jH/image.png" title="image.png"><img src="/user_uploads/10155/wyuoq-62ObAQ2N2LGeGY67jH/image.png"></a></div>



<a name="195117032"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/_genonce%20gets%20OutOfMemoryError/near/195117032" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Discenza <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/_genonce.20gets.20OutOfMemoryError.html#195117032">(Apr 23 2020 at 20:44)</a>:</h4>
<p>In case it helps, here is the stack trace: <a href="/user_uploads/10155/fgPNOlEHwxv_9KsDdMTmGLPu/image.png" title="image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/10155/fgPNOlEHwxv_9KsDdMTmGLPu/image.png" title="image.png"><img src="/user_uploads/10155/fgPNOlEHwxv_9KsDdMTmGLPu/image.png"></a></div>



<a name="195119783"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/_genonce%20gets%20OutOfMemoryError/near/195119783" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/_genonce.20gets.20OutOfMemoryError.html#195119783">(Apr 23 2020 at 21:07)</a>:</h4>
<p>can you show earlier in the log - how much memory is available? (note that this is not a shorthand issue)</p>



<a name="195123819"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/_genonce%20gets%20OutOfMemoryError/near/195123819" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Discenza <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/_genonce.20gets.20OutOfMemoryError.html#195123819">(Apr 23 2020 at 21:50)</a>:</h4>
<p>If I'm looking at the right line of output, it would be 512MB   <a href="/user_uploads/10155/OvikxfnNiGQDByrP1P8Gsesh/image.png" title="image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/10155/OvikxfnNiGQDByrP1P8Gsesh/image.png" title="image.png"><img src="/user_uploads/10155/OvikxfnNiGQDByrP1P8Gsesh/image.png"></a></div>



<a name="195141848"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/_genonce%20gets%20OutOfMemoryError/near/195141848" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/_genonce.20gets.20OutOfMemoryError.html#195141848">(Apr 24 2020 at 02:51)</a>:</h4>
<p>try giving it more</p>



<a name="195150459"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/_genonce%20gets%20OutOfMemoryError/near/195150459" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Etienne Cantineau <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/_genonce.20gets.20OutOfMemoryError.html#195150459">(Apr 24 2020 at 06:25)</a>:</h4>
<p>Hello, i had the same problem. I now run a custom _genonce file (the original is always overwritten by sushi) where i've added "-Xmx1g" at the java call</p>



<a name="195186195"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/_genonce%20gets%20OutOfMemoryError/near/195186195" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/_genonce.20gets.20OutOfMemoryError.html#195186195">(Apr 24 2020 at 13:18)</a>:</h4>
<p><span class="user-mention" data-user-id="243697">@Etienne Cantineau</span> said:</p>
<blockquote>
<p>Hello, i had the same problem. I now run a custom _genonce file (the original is always overwritten by sushi) where i've added "-Xmx1g" at the java call</p>
</blockquote>
<p>We've received some feedback that perhaps SUSHI shouldn't provide these batch files at all (<code>_updatePublisher</code>, <code>_genonce</code>).  Or if we detect one there already, we could not overwrite it.  Interested in your feedback.</p>



<a name="195188995"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/_genonce%20gets%20OutOfMemoryError/near/195188995" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Etienne Cantineau <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/_genonce.20gets.20OutOfMemoryError.html#195188995">(Apr 24 2020 at 13:41)</a>:</h4>
<p>It's nice to already have them when you start and maybe enough for some users. I don't have a problem to use a custom one with different name, same for ig.ini.</p>



<a name="195228249"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/_genonce%20gets%20OutOfMemoryError/near/195228249" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Keith Boone <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/_genonce.20gets.20OutOfMemoryError.html#195228249">(Apr 24 2020 at 18:38)</a>:</h4>
<p>There should be a setting to pull that -Xmx value from the environment, and if not set to use a default value.</p>



<a name="195234473"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/_genonce%20gets%20OutOfMemoryError/near/195234473" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/_genonce.20gets.20OutOfMemoryError.html#195234473">(Apr 24 2020 at 19:31)</a>:</h4>
<p>We're trying to stay aligned w/ the batch scripts in <a href="https://github.com/FHIR/sample-ig" title="https://github.com/FHIR/sample-ig">sample-ig</a>, so while I agree that using an env variable is a good idea, we should aim to do it in sample-ig first.</p>



<a name="195237279"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/_genonce%20gets%20OutOfMemoryError/near/195237279" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/_genonce.20gets.20OutOfMemoryError.html#195237279">(Apr 24 2020 at 19:56)</a>:</h4>
<p>What would that look like? Specifically, what is the right amount of ram, and are there any concerns about over sizing?</p>



<a name="195239619"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/_genonce%20gets%20OutOfMemoryError/near/195239619" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Discenza <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/_genonce.20gets.20OutOfMemoryError.html#195239619">(Apr 24 2020 at 20:18)</a>:</h4>
<p>I jacked up the RAM 10 1024MB and then _genonce ran clean. It took about an hour to run, most of it spent waiting at the onGenerate: label in the output. My FSH tank had 22 profiles, 33 valuesets, 3 extensions, 1 ruleset. I don't know if this time is excessive or not, given the contents of the FSH tank. But I thought I  would report it and get your take on it. <span class="user-mention" data-user-id="191316">@Grahame Grieve</span></p>



<a name="195239920"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/_genonce%20gets%20OutOfMemoryError/near/195239920" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/_genonce.20gets.20OutOfMemoryError.html#195239920">(Apr 24 2020 at 20:21)</a>:</h4>
<p>I would look at your value sets - I found that one of my value sets that had codes that couldn't be validated made the processing take a long time - it added 15 minutes just for that one value set</p>



<a name="195252330"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/_genonce%20gets%20OutOfMemoryError/near/195252330" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/_genonce.20gets.20OutOfMemoryError.html#195252330">(Apr 24 2020 at 22:33)</a>:</h4>
<p>an hour to run is ridiculous, but maybe you have some large snomed expansions? the time I'm interested in is the second run, though. If that's longer than a few minutes, I'll have a look</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
