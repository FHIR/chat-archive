---
layout: page
title: "FHIR Chat  · fixedString in a profile causing errors in instance · shorthand"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/index.html">shorthand</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/fixedString.20in.20a.20profile.20causing.20errors.20in.20instance.html">fixedString in a profile causing errors in instance</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="195794615"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/fixedString%20in%20a%20profile%20causing%20errors%20in%20instance/near/195794615" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Hay <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/fixedString.20in.20a.20profile.20causing.20errors.20in.20instance.html#195794615">(Apr 30 2020 at 03:15)</a>:</h4>
<p>Trying to create an instance of the <a href="http://build.fhir.org/ig/hl7au/au-fhir-base/StructureDefinition-au-immunization.html" title="http://build.fhir.org/ig/hl7au/au-fhir-base/StructureDefinition-au-immunization.html">Australian Imm profile</a> and getting an error when setting a value on a sliced element:</p>
<div class="codehilite"><pre><span></span><code>* performer[administeredBy].function = http://terminology.hl7.org/CodeSystem/v2-0443#AP &quot;Administering Provider&quot;
* performer[administeredBy].function.text = &quot;Administering Provider&quot; // a fixed string in the profile
* performer[administeredBy].actor = Reference(aupc-practitioner1)
</code></pre></div>


<p>Error (on the second line): </p>
<blockquote>
<p>Cannot fix this element using a pattern; as it is already fixed in the StructureDefinition using fixedString. Since fixed[x] requires exact matches, while pattern[x] allows for variation in unspecified properties, fixed[x] cannot be replaced by pattern[x] since it would loosen the constraint.</p>
</blockquote>



<a name="195794825"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/fixedString%20in%20a%20profile%20causing%20errors%20in%20instance/near/195794825" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/fixedString.20in.20a.20profile.20causing.20errors.20in.20instance.html#195794825">(Apr 30 2020 at 03:20)</a>:</h4>
<p>I got that and realized that I just had to leave it empty - i.e don't put it on the instance.  Even though the string was exactly what was specified in the profile, it wouldn't work.  I believe that this is also true if it was a code instead of a string.</p>



<a name="195797390"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/fixedString%20in%20a%20profile%20causing%20errors%20in%20instance/near/195797390" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Hay <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/fixedString.20in.20a.20profile.20causing.20errors.20in.20instance.html#195797390">(Apr 30 2020 at 04:24)</a>:</h4>
<p>I did try that - unfortunately I still got an error:</p>
<blockquote>
<p>error Element Immunization.performer:administeredBy.function.text has minimum cardinality 1 but occurs 0 time(s).</p>
</blockquote>



<a name="195797479"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/fixedString%20in%20a%20profile%20causing%20errors%20in%20instance/near/195797479" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Hay <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/fixedString.20in.20a.20profile.20causing.20errors.20in.20instance.html#195797479">(Apr 30 2020 at 04:26)</a>:</h4>
<p>I have noted that leaving it out is fine if the profile is defined in FSH though...</p>



<a name="195797847"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/fixedString%20in%20a%20profile%20causing%20errors%20in%20instance/near/195797847" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/fixedString.20in.20a.20profile.20causing.20errors.20in.20instance.html#195797847">(Apr 30 2020 at 04:37)</a>:</h4>
<p>Right.  my profile was defined in FSH.  Even though that works, that still points to a problem with SUSHI being overzealous.</p>



<a name="195797927"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/fixedString%20in%20a%20profile%20causing%20errors%20in%20instance/near/195797927" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Hay <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/fixedString.20in.20a.20profile.20causing.20errors.20in.20instance.html#195797927">(Apr 30 2020 at 04:39)</a>:</h4>
<p>Yes - it's an interesting question whether or not sushu should apply 'defaults'...</p>



<a name="195834170"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/fixedString%20in%20a%20profile%20causing%20errors%20in%20instance/near/195834170" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Freiter <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/fixedString.20in.20a.20profile.20causing.20errors.20in.20instance.html#195834170">(Apr 30 2020 at 12:54)</a>:</h4>
<p>This looks like it is an artifact of when we added the new <code>exactly</code> keyword for fixing values on Profiles and Extensions. Some of the logic for determining whether or not a value can be fixed is shared between Profiles/Extensions and Instances, so it looks like when we changed the logic for Profiles/Extensions to work with the <code>exactly</code> keyword, we missed this side effect on Instances.</p>
<p>Normally SUSHI should actually automatically set the value of <code>performer[administeredBy].function.text</code>, but the same error that is stopping you from setting it manually is stopping SUSHI from setting it by hand. Unfortunately I don't think there is really any workaround until we fix this.</p>



<a name="195834204"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/fixedString%20in%20a%20profile%20causing%20errors%20in%20instance/near/195834204" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Freiter <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/fixedString.20in.20a.20profile.20causing.20errors.20in.20instance.html#195834204">(Apr 30 2020 at 12:54)</a>:</h4>
<p>Tracking this as an issue <a href="https://github.com/FHIR/sushi/issues/398" title="https://github.com/FHIR/sushi/issues/398">https://github.com/FHIR/sushi/issues/398</a></p>



<a name="195881368"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/fixedString%20in%20a%20profile%20causing%20errors%20in%20instance/near/195881368" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Hay <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/fixedString.20in.20a.20profile.20causing.20errors.20in.20instance.html#195881368">(Apr 30 2020 at 18:26)</a>:</h4>
<p>Thanks!</p>



<a name="195914107"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/fixedString%20in%20a%20profile%20causing%20errors%20in%20instance/near/195914107" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Hay <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/fixedString.20in.20a.20profile.20causing.20errors.20in.20instance.html#195914107">(Apr 30 2020 at 23:15)</a>:</h4>
<p>Hi Nick - is this another example of this issue?</p>
<p>profile</p>
<div class="codehilite"><pre><span></span><code>* identifier ^slicing.discriminator.type = #value
* identifier ^slicing.discriminator.path = &quot;system&quot;
* identifier ^slicing.rules = #openAtEnd

//The slice has the name NHI
* identifier contains
    NHI 1..1

* identifier[NHI].system = &quot;https://standards.digital.health.nz/id/nhi&quot; (exactly)
</code></pre></div>


<p>Instance:</p>
<div class="codehilite"><pre><span></span><code>* identifier[NHI].system = &quot;https://standards.digital.health.nz/id/nhi&quot;
* identifier[NHI].value = &quot;ABC1234&quot;
</code></pre></div>


<p>Error:</p>
<div class="codehilite"><pre><span></span><code>error Cannot fix this element using a pattern; as it is already fixed in the StructureDefinition using fixedUri. Since fixed[x] requires exact matches, while pattern[x] allows for variation in unspecified properties, fixed[x] cannot be replaced by pattern[x] since it would loosen the constraint.
</code></pre></div>



<a name="195953536"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/fixedString%20in%20a%20profile%20causing%20errors%20in%20instance/near/195953536" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Freiter <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/fixedString.20in.20a.20profile.20causing.20errors.20in.20instance.html#195953536">(May 01 2020 at 11:49)</a>:</h4>
<p>Yeah, looks like the same issue to me! We are working on a fix, and will test out to see how it works with the examples you gave above.</p>



<a name="196011566"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/fixedString%20in%20a%20profile%20causing%20errors%20in%20instance/near/196011566" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Freiter <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/fixedString.20in.20a.20profile.20causing.20errors.20in.20instance.html#196011566">(May 01 2020 at 21:20)</a>:</h4>
<p>This should be fixed in SUSHI 0.12.5 <a href="https://github.com/FHIR/sushi/releases/tag/v0.12.5" title="https://github.com/FHIR/sushi/releases/tag/v0.12.5">https://github.com/FHIR/sushi/releases/tag/v0.12.5</a></p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
