---
layout: page
title: "FHIR Chat  · Logical Models in shorthand · shorthand"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/index.html">shorthand</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20shorthand.html">Logical Models in shorthand</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="182967089"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20shorthand/near/182967089" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20shorthand.html#182967089">(Dec 09 2019 at 15:36)</a>:</h4>
<p>Here is a first poke to see how would FSH look like for a Logical Model.</p>



<a name="182967142"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20shorthand/near/182967142" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20shorthand.html#182967142">(Dec 09 2019 at 15:36)</a>:</h4>
<p>Any ideas? Is this something for a call (I can try to join)?</p>



<a name="182968036"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20shorthand/near/182968036" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20shorthand.html#182968036">(Dec 09 2019 at 15:44)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="191832">@Jose Costa Teixeira</span> -- the wiki hides it behind an obscure "show 15 more pages" link, but we do have a very notional logical model syntax documented here: <a href="https://github.com/HL7/fhir-shorthand/wiki/5.2-Logical-Models" target="_blank" title="https://github.com/HL7/fhir-shorthand/wiki/5.2-Logical-Models">https://github.com/HL7/fhir-shorthand/wiki/5.2-Logical-Models</a></p>



<a name="182968232"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20shorthand/near/182968232" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20shorthand.html#182968232">(Dec 09 2019 at 15:46)</a>:</h4>
<p>I don't think we've discussed it w/ the community yet as we had been focusing on the profiling piece.  <span class="user-mention" data-user-id="191447">@Mark Kramer</span> -- what do you think about adding this to the agenda for Thursday?</p>



<a name="182968281"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20shorthand/near/182968281" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20shorthand.html#182968281">(Dec 09 2019 at 15:46)</a>:</h4>
<p>Thanks. Looks flat'ish - can we put some structure there?</p>



<a name="182968469"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20shorthand/near/182968469" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20shorthand.html#182968469">(Dec 09 2019 at 15:48)</a>:</h4>
<p>I mean, how to put structure? is it by doing <br>
Element: parent<br>
...<br>
Element: parent.child<br>
...</p>



<a name="182978098"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20shorthand/near/182978098" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20shorthand.html#182978098">(Dec 09 2019 at 17:21)</a>:</h4>
<p>I think the way it is currently written up, each "level" of the structure is defined as a separate component.  So the way you introduce another level deep is by defining a new complex element with the sub-children.  In the example in the doc, this is shown by the <code>Model</code> called <code>MyClass</code>, which contains a property that is a <code>Backbone</code> called <code>bar</code>, which then has nested <code>Element</code>s called <code>baz</code> and <code>qux</code>.</p>



<a name="182978194"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20shorthand/near/182978194" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20shorthand.html#182978194">(Dec 09 2019 at 17:22)</a>:</h4>
<p>So you're suggesting that perhaps the syntax should allow that nesting inline in a single element definition?  Did I understand correctly?</p>



<a name="182986887"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20shorthand/near/182986887" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20shorthand.html#182986887">(Dec 09 2019 at 18:53)</a>:</h4>
<p>Not sure. If the purpose is to make it easier to read, I would expect more something like</p>
<div class="codehilite"><pre><span></span><span class="nn">---</span>
<span class="nt">MyClass</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">foo 0..1</span>
    <span class="l l-Scalar l-Scalar-Plain">Description</span><span class="p p-Indicator">:</span> <span class="s">&quot;An</span><span class="nv"> </span><span class="s">element&quot;</span>
    <span class="nt">Datatype</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">string or CodeableConcept</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">bar 0..*</span>
    <span class="l l-Scalar l-Scalar-Plain">Description</span><span class="p p-Indicator">:</span> <span class="s">&quot;A</span><span class="nv"> </span><span class="s">backbone</span><span class="nv"> </span><span class="s">element&quot;</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">baz 0..1</span>
        <span class="l l-Scalar l-Scalar-Plain">Description</span><span class="p p-Indicator">:</span> <span class="s">&quot;Element</span><span class="nv"> </span><span class="s">in</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">backbone&quot;</span>
        <span class="nt">Datatype</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Patient or Provider</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">qux 0..1</span>
        <span class="l l-Scalar l-Scalar-Plain">Description</span><span class="p p-Indicator">:</span> <span class="s">&quot;Another</span><span class="nv"> </span><span class="s">element</span><span class="nv"> </span><span class="s">in</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">backbone&quot;</span>
        <span class="nt">Datatype</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Quantity</span>
</pre></div>



<a name="182986919"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20shorthand/near/182986919" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20shorthand.html#182986919">(Dec 09 2019 at 18:53)</a>:</h4>
<p>Just exploring. I do not know the impact.</p>



<a name="183286991"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20shorthand/near/183286991" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Kramer <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20shorthand.html#183286991">(Dec 12 2019 at 18:31)</a>:</h4>
<p><span class="user-mention" data-user-id="191832">@Jose Costa Teixeira</span>  I'm open to that suggestion. The proposed syntax that you were looking at was spun off CIMPL, where the emphasis was on reuse of any element, at any level. But I do like the compactness of your approach</p>



<a name="207859668"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20shorthand/near/207859668" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20shorthand.html#207859668">(Aug 24 2020 at 15:44)</a>:</h4>
<p>Are there any news on this topic?</p>



<a name="207879329"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20shorthand/near/207879329" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20shorthand.html#207879329">(Aug 24 2020 at 18:32)</a>:</h4>
<p>Not yet.  FSH 1.0.0 is not yet officially out nor is SUSHI 1.0.0.  After we get those out the door, we'll start talking about post-1.0.0 features more...</p>



<a name="208151764"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20shorthand/near/208151764" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Kramer <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20shorthand.html#208151764">(Aug 26 2020 at 21:32)</a>:</h4>
<p>We are on the verge of the STU 1 release. Just one more approval and we're there.</p>



<a name="208349581"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20shorthand/near/208349581" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20shorthand.html#208349581">(Aug 28 2020 at 14:29)</a>:</h4>
<p>cc the above syntax: if we don't want to bring indenting, perhaps we can use the "with" syntax - or even a shorter version of it.</p>



<a name="208356401"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20shorthand/near/208356401" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20shorthand.html#208356401">(Aug 28 2020 at 15:20)</a>:</h4>
<p>if instead of </p>
<div class="codehilite"><pre><span></span><code>* with a:
   a1 = x
   a2 = y
</code></pre></div>


<p>we have a syntax like </p>
<div class="codehilite"><pre><span></span><code>* a:
    a1 =
    a2 =
</code></pre></div>


<p>(in practice, the <code>with:</code> is replaced by a <code>:</code>)</p>



<a name="208356476"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20shorthand/near/208356476" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20shorthand.html#208356476">(Aug 28 2020 at 15:21)</a>:</h4>
<p>(not sure how to close the <code>with</code> - semicolon?). <br>
Anyway, this is just an idea that might be useful for the LMs</p>



<a name="225745907"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20shorthand/near/225745907" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20shorthand.html#225745907">(Feb 09 2021 at 19:43)</a>:</h4>
<p><span class="user-mention" data-user-id="191469">@Chris Moesel</span> <span class="user-mention" data-user-id="191447">@Mark Kramer</span> Any updates to logical model support in FSH/SUSHI? Looking thru the docs/source and not able to figure out the current state of support...</p>



<a name="225746246"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20shorthand/near/225746246" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20shorthand.html#225746246">(Feb 09 2021 at 19:45)</a>:</h4>
<p>it is possible to create logical models in shorthand.  but you have to create them as Instances of StructureDefinition.  Support for syntax that makes it easier isn't there yet as far as I know.  I've attached a sample of one of my logical models. <a href="/user_uploads/10155/xP13nyFdNv4PQTZkz3WBXDk3/LabelerLogicalModel.fsh">LabelerLogicalModel.fsh</a></p>



<a name="225757119"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20shorthand/near/225757119" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20shorthand.html#225757119">(Feb 09 2021 at 21:04)</a>:</h4>
<p>I know during the last connectathon there was some discussion of more "direct" support (e.g. <a href="https://github.com/HL7/fhir-shorthand/wiki/5.2-Logical-Models">https://github.com/HL7/fhir-shorthand/wiki/5.2-Logical-Models</a>). Any more on that thread?</p>



<a name="225757221"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20shorthand/near/225757221" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20shorthand.html#225757221">(Feb 09 2021 at 21:05)</a>:</h4>
<p>We started off STU2 work by focusing on soft indexing and parameterized rule sets, but we've just started thinking about logical models and resource definitions again.  We have a few different syntax ideas and examples kicking around.  I'll post a few snippets here so you can see what we're thinking (and offer any feedback)...</p>



<a name="225758152"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20shorthand/near/225758152" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20shorthand.html#225758152">(Feb 09 2021 at 21:12)</a>:</h4>
<p><strong>Logical model example using <a href="http://build.fhir.org/ig/openhie/hiv-ig/branches/master/StructureDefinition-model-hiv-record.html">HIV Record</a> as the example.</strong></p>
<p>Key to the grammar:</p>
<ul>
<li>Use <code>+</code> instead of <code>*</code> to <em>create</em> a new element</li>
<li><code>+ {path} {min}..{max} {type (or type or...)} {short} {definition}</code></li>
<li>Use <code>*</code> to constrain an existing element (same rules and syntax as profiling)</li>
<li>Use multiple <code>+</code>/<code>*</code> to operate in context of last element path with one fewer <code>+</code>/<code>*</code></li>
</ul>
<p><a href="/user_uploads/10155/bcxzGzHwLw-dhM-skwuEYAr9/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/10155/bcxzGzHwLw-dhM-skwuEYAr9/image.png" title="image.png"><img src="/user_uploads/10155/bcxzGzHwLw-dhM-skwuEYAr9/image.png"></a></div>



<a name="225758606"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20shorthand/near/225758606" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20shorthand.html#225758606">(Feb 09 2021 at 21:15)</a>:</h4>
<p>Or if we don't like the <code>+</code>, we can introduce a new keyword <code>is</code> instead.  But we do think it is important to be explicit about <em>creating</em> a new element vs <em>constraining</em> an existing element.<br>
<a href="/user_uploads/10155/g7TZSiCkjug6EcEwPdI6yaeA/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/10155/g7TZSiCkjug6EcEwPdI6yaeA/image.png" title="image.png"><img src="/user_uploads/10155/g7TZSiCkjug6EcEwPdI6yaeA/image.png"></a></div>



<a name="225759154"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20shorthand/near/225759154" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20shorthand.html#225759154">(Feb 09 2021 at 21:19)</a>:</h4>
<p><strong>Patient resource</strong></p>
<p>Here are some examples of using a similar grammar to define resources.  But note that it get's a lot more unwieldy because resources are very text-heavy.  This is only the first few elements of <code>Patient</code>:<br>
<a href="/user_uploads/10155/Bx0zjW72vJ2kFS44XeEkbgIj/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/10155/Bx0zjW72vJ2kFS44XeEkbgIj/image.png" title="image.png"><img src="/user_uploads/10155/Bx0zjW72vJ2kFS44XeEkbgIj/image.png"></a></div>



<a name="225759411"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20shorthand/near/225759411" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20shorthand.html#225759411">(Feb 09 2021 at 21:21)</a>:</h4>
<p>So... another idea is introducing the concept of <code>TextContent</code>- a way to outboard your text content to another file, optionally even allowing for multiple languages.  In that case we'd have a <code>Patient</code> resource w/ just the structural rules:<br>
<a href="/user_uploads/10155/dNEHk0U3utJ2oRXgXVeStW7H/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/10155/dNEHk0U3utJ2oRXgXVeStW7H/image.png" title="image.png"><img src="/user_uploads/10155/dNEHk0U3utJ2oRXgXVeStW7H/image.png"></a></div>



<a name="225759650"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20shorthand/near/225759650" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20shorthand.html#225759650">(Feb 09 2021 at 21:22)</a>:</h4>
<p>And another file w/ all the text content:<br>
<a href="/user_uploads/10155/WMdsAHtb9i-Y_7AaHALMMIgw/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/10155/WMdsAHtb9i-Y_7AaHALMMIgw/image.png" title="image.png"><img src="/user_uploads/10155/WMdsAHtb9i-Y_7AaHALMMIgw/image.png"></a></div>



<a name="225759966"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20shorthand/near/225759966" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20shorthand.html#225759966">(Feb 09 2021 at 21:24)</a>:</h4>
<p>We also experimented w/ putting text content in YAML, Java resource bundles (property files), etc.  But just re-using the FSH syntax seemed most consistent.</p>



<a name="225760890"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20shorthand/near/225760890" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20shorthand.html#225760890">(Feb 09 2021 at 21:31)</a>:</h4>
<p>Awesome work <span class="user-mention" data-user-id="191469">@Chris Moesel</span> ! Building a system right now that's going to use a lot of FHIR logical models, and this looks like something that would be absolutely invaluable in that.</p>



<a name="225760960"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20shorthand/near/225760960" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20shorthand.html#225760960">(Feb 09 2021 at 21:31)</a>:</h4>
<p>Are you working on a public branch here? Has any of this made its way into SUSHI?</p>



<a name="225761013"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20shorthand/near/225761013" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20shorthand.html#225761013">(Feb 09 2021 at 21:32)</a>:</h4>
<p>May be able to bring some contribution to the effort....</p>



<a name="225761743"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20shorthand/near/225761743" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20shorthand.html#225761743">(Feb 09 2021 at 21:36)</a>:</h4>
<p>At this point we were just tossing around syntax ideas and experimenting. The experimental files are all local and exist only as text files like I screenshotted above.  We have not built any of this into SUSHI or any other tooling -- because it's still very subject to change based on feedback from people like you!</p>
<p>Also, we've been heads down trying to get a GoFSH 1.0 release out the door, so we haven't had the time to focus on this quite yet.</p>



<a name="225774796"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20shorthand/near/225774796" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20shorthand.html#225774796">(Feb 09 2021 at 23:44)</a>:</h4>
<p>I think the TextContent is equivalent to the idea of "with: ", right?</p>



<a name="225775209"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20shorthand/near/225775209" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20shorthand.html#225775209">(Feb 09 2021 at 23:49)</a>:</h4>
<p>I like the shortness of the first approach and the precision of the second, so, just spitballing: </p>
<ul>
<li>I'd like <code>++</code> instead of <code>+ +</code> (with space)?</li>
<li>TextContent feel strange. I'd like more words like <code>with</code>, <code>use</code>...</li>
</ul>



<a name="225775801"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20shorthand/near/225775801" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20shorthand.html#225775801">(Feb 09 2021 at 23:56)</a>:</h4>
<p>My idea would be this:</p>
<div class="codehilite"><pre><span></span><code>* Patient.identifier[+]:
** system = $ssnnumbers
** value = &quot;123&quot;
* Patient.identifier[+]:
** type = $hospitalids
** value = &quot;456&quot;
</code></pre></div>



<a name="225775977"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20shorthand/near/225775977" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20shorthand.html#225775977">(Feb 09 2021 at 23:58)</a>:</h4>
<p>in this case: <br>
the <code>:</code> tells the parser: From now on, when you see n+1 stars, prefix that element with the expression between this colon and the star(s) before.<br>
the number of stars tells us how deep we are (this could be nested)</p>



<a name="225776028"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20shorthand/near/225776028" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20shorthand.html#225776028">(Feb 09 2021 at 23:59)</a>:</h4>
<p>we can use a reserved keyword such as "with" or "TextContent".. but is it necessary?</p>



<a name="225797251"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20shorthand/near/225797251" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20shorthand.html#225797251">(Feb 10 2021 at 05:54)</a>:</h4>
<p>The <code>Logical</code> and <code>Resource</code> syntaxes use the <code>with</code> idea, but <em>without</em> the <code>with</code> (no pun intended).  We actually started by using <code>with</code> but then realized it was completely unnecessary.  Whenever you go from <code>n</code> to <code>n+1</code> <code>*</code>s, that's an indicator you're going into the context of the previous path.  The <code>with</code> or <code>:</code> doesn't seem to buy us much except for extra typing.</p>
<p>As for whether it is <code>**</code> or <code>* *</code> (or <code>++</code> vs <code>+ +</code>) since FSH is (mostly) whitespace-insensitive, the spaces would be optional.  I tried both ways and found that for large complex definitions, my eye could parse the whole thing much easier when I put spaces between the bullets (to effectively double the indent size).</p>



<a name="225797884"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20shorthand/near/225797884" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20shorthand.html#225797884">(Feb 10 2021 at 06:06)</a>:</h4>
<p>The idea for <code>TextContent</code> was that it would be just that -- reserved for specifying text content.  What makes it different than just doing it in a <code>RuleSet</code> or inline in the definition is that it is optimized for the common use case that every <em>element</em> (e.g., <code>Patient.identifier</code>) will have multiple text components <em>within</em> the element  (e.g., <code>short</code>, <code>definition</code>, <code>requirements</code>, <code>comment</code>, etc).  In standard syntax you would need to access all those things via caret rules:</p>
<div class="codehilite"><pre><span></span><code>* ^title = &quot;Patient&quot;
* ^description = &quot;&quot;&quot;
   Demographics and other administrative information about an individual or animal
   receiving care or other health-related services.
   &quot;&quot;&quot;
* ^publisher = &quot;Health Level Seven International (Patient Administration)&quot;
* ^purpose = &quot;Tracking patient is the center of the healthcare process.&quot;
* Patient.identifier
** ^short = &quot;An identifier for this patient&quot;
** ^definition = &quot;An identifier for this patient&quot;
** ^requirements = &quot;Patients are almost always assigned specific numerical identifiers.&quot;
* Patient.active
** ^short = &quot;Whether this patient&#39;s record is in active use&quot;
** ^definition = &quot;&quot;&quot;
    Whether this patient record is in active use. \nMany systems use this property to mark
    as non-current patients, such as those that have not been seen for a period of time based
    on an organization&#39;s business rules.\n\nIt is often used to filter patient lists to
    exclude inactive patients\n\nDeceased patients may also be marked as inactive for the
    same reasons, but may be active for some time after death.
    &quot;&quot;&quot;
** ^comment = &quot;&quot;&quot;
    If a record is inactive, and linked to an active record, then future patient/record
    updates should occur on the other patient.
    &quot;&quot;&quot;
** ^requirements = &quot;&quot;&quot;
    Need to be able to mark a patient record as not to be used because it was created
    in error.
    &quot;&quot;&quot;
** ^meaningWhenMissing = &quot;&quot;&quot;
    This resource is generally assumed to be active if no value is provided for the
    active element
    &quot;&quot;&quot;
** ^sModifierReason = &quot;&quot;&quot;
    This element is labelled as a modifier because it is a status element that can
    indicate that a record should not be treated as valid
    &quot;&quot;&quot;
</code></pre></div>
<p>That's a lot of caret rules.  TBH, I don't love caret rules.  I prefer to avoid them.  In addition, there's not an obvious way to support multiple languages there.</p>
<p><code>TextContent</code> on the other hand, avoids carets because within the element you're defining, we can just <em>assume</em> the paths are relative to the <code>ElementDefinition</code>.  It also gives us a place to put the language.  The same example as above would be:</p>
<div class="codehilite"><pre><span></span><code>TextContent: Patient
Language: en
* title = &quot;Patient&quot;
* description = &quot;&quot;&quot;
  Demographics and other administrative information about an individual or animal
  receiving care or other health-related services.
  &quot;&quot;&quot;
* publisher = &quot;Health Level Seven International (Patient Administration)&quot;
* purpose = &quot;Tracking patient is the center of the healthcare process.&quot;

TextContent: Patient.identifier
* short = &quot;An identifier for this patient&quot;
* definition = &quot;An identifier for this patient&quot;
* requirements = &quot;Patients are almost always assigned specific numerical identifiers.&quot;

TextContent: Patient.active
* short = &quot;Whether this patient&#39;s record is in active use&quot;
* definition = &quot;&quot;&quot;
    Whether this patient record is in active use. \nMany systems use this property to mark
    as non-current patients, such as those that have not been seen for a period of time based
    on an organization&#39;s business rules.\n\nIt is often used to filter patient lists to
    exclude inactive patients\n\nDeceased patients may also be marked as inactive for the
    same reasons, but may be active for some time after death.
    &quot;&quot;&quot;
* comment = &quot;&quot;&quot;
    If a record is inactive, and linked to an active record, then future patient/record
    updates should occur on the other patient.
    &quot;&quot;&quot;
* requirements = &quot;&quot;&quot;
    Need to be able to mark a patient record as not to be used because it was created
    in error.
    &quot;&quot;&quot;
* meaningWhenMissing = &quot;&quot;&quot;
    This resource is generally assumed to be active if no value is provided for the
    active element
    &quot;&quot;&quot;
* isModifierReason = &quot;&quot;&quot;
    This element is labelled as a modifier because it is a status element that can
    indicate that a record should not be treated as valid
</code></pre></div>
<p>Personally I just find that cleaner, but it is a matter of preference.  Anyway, I just wanted to clarify what I was going for with <code>TextContent</code>.  Of course if nobody gets it then that will be a good sign that it's probably not the right approach.</p>



<a name="225802519"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20shorthand/near/225802519" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20shorthand.html#225802519">(Feb 10 2021 at 07:41)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191469">Chris Moesel</span> <a href="#narrow/stream/215610-shorthand/topic/Logical.20Models.20in.20shorthand/near/225797251">said</a>:</p>
<blockquote>
<p>The <code>Logical</code> and <code>Resource</code> syntaxes use the <code>with</code> idea, but <em>without</em> the <code>with</code> (no pun intended).  We actually started by using <code>with</code> but then realized it was completely unnecessary.  Whenever you go from <code>n</code> to <code>n+1</code> <code>*</code>s, that's an indicator you're going into the context of the previous path.  The <code>with</code> or <code>:</code> doesn't seem to buy us much except for extra typing.</p>
<p>As for whether it is <code>**</code> or <code>* *</code> (or <code>++</code> vs <code>+ +</code>) since FSH is (mostly) whitespace-insensitive, the spaces would be optional.  I tried both ways and found that for large complex definitions, my eye could parse the whole thing much easier when I put spaces between the bullets (to effectively double the indent size).</p>
</blockquote>
<p>Agree. I also think the <code>with</code> is optional <br>
And I thought "TextContent" would be a bizarre keyword for "with", and simply use the colon would be better.</p>



<a name="225802605"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20shorthand/near/225802605" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20shorthand.html#225802605">(Feb 10 2021 at 07:43)</a>:</h4>
<p>My idea for the colon is to make sure that the **s are not referring to the parent elementdefinition, but to whatever is in between the <code>*</code> and the <code>:</code><br>
it could be a slice, for example.</p>



<a name="225857247"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20shorthand/near/225857247" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20shorthand.html#225857247">(Feb 10 2021 at 15:58)</a>:</h4>
<p>OK.  The <code>TextContent</code> really is an entirely different concept than <em>with</em> (or nested contexts) -- it just happens to use nested contexts as part of its grammar.  But they're not the point of <code>TextContent</code>.</p>
<p>As for the <code>**</code>, I interpret that to mean <em>in the context of the last path</em> -- which may be something simple, like <code>referenceRange</code>, a slice, like <code>component[systolic]</code>, an extension, like <code>extension[http://foo.org/bar-ext]</code>, a choice, like <code>valueQuantity</code>, or a nested combination of these, like <code>component[systolic].extension[http://foo.org/bar-ext].valueQuantity</code>.  In short, <em>whatever</em> the previous path was, that is the context inherited by <code>**</code>.  I still don't think <code>:</code> is necessary.</p>



<a name="225860806"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20shorthand/near/225860806" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20shorthand.html#225860806">(Feb 10 2021 at 16:12)</a>:</h4>
<p>so whatever is after the * before the **s, right?</p>



<a name="225860966"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20shorthand/near/225860966" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20shorthand.html#225860966">(Feb 10 2021 at 16:12)</a>:</h4>
<p>Yeah.</p>



<a name="225861077"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20shorthand/near/225861077" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20shorthand.html#225861077">(Feb 10 2021 at 16:13)</a>:</h4>
<p>i was thinking that the colon could be interesting to tell the compiler why this is not a finished sentence</p>



<a name="225861571"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20shorthand/near/225861571" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20shorthand.html#225861571">(Feb 10 2021 at 16:15)</a>:</h4>
<p>(and visually it feels good - but I was a Pascal guy, so I may be biased to appreciate the begins and ends of sentences)</p>



<a name="225866633"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20shorthand/near/225866633" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20shorthand.html#225866633">(Feb 10 2021 at 16:34)</a>:</h4>
<p>OK.  I get that.  The rule with just a path and no other action can seem a little odd to someone who's used to always seeing something after the path.  I guess I'd ask if that is the _only_ way you can establish a context?  Or can you establish a context under a rule that also does other things.  For example, do you think this should be allowed?</p>



<a name="225866821"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20shorthand/near/225866821" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20shorthand.html#225866821">(Feb 10 2021 at 16:34)</a>:</h4>
<div class="codehilite"><pre><span></span><code>* identifier 1..1 MS
** system = &quot;http://foo.org/mysystem&quot;
</code></pre></div>



<a name="225866984"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20shorthand/near/225866984" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20shorthand.html#225866984">(Feb 10 2021 at 16:35)</a>:</h4>
<p>I think a problem with the : syntax is that there is no way to mark the "end of the sentence." Or at least not in a way that provides a benefit over just using *'s.</p>



<a name="225867135"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20shorthand/near/225867135" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20shorthand.html#225867135">(Feb 10 2021 at 16:36)</a>:</h4>
<p>Is this general idea also being considered for Questionnaire?</p>



<a name="225867173"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20shorthand/near/225867173" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20shorthand.html#225867173">(Feb 10 2021 at 16:37)</a>:</h4>
<p>Right.  From a parsing perspective, the <code>*</code> is all I need in order to know that the previous "sentence" is done.  I don't really need the <code>:</code>.</p>



<a name="225867544"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20shorthand/near/225867544" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20shorthand.html#225867544">(Feb 10 2021 at 16:39)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191380">Elliot Silver</span> <a href="#narrow/stream/215610-shorthand/topic/Logical.20Models.20in.20shorthand/near/225867135">said</a>:</p>
<blockquote>
<p>Is this general idea also being considered for Questionnaire?</p>
</blockquote>
<p>The notion of contexts is actually separate from logical models, but logical models really highlight why such a thing is useful.    So, yes, this notion of contexts with <code>**</code> and <code>***</code>, etc, would apply throughout most of the shorthand language.  In profile definitions, extension definitions, instances (including Questionnaire), etc.  You could always use <code>**</code> (or <code>* *</code>) to work within the context of the last stated path.</p>



<a name="225868301"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20shorthand/near/225868301" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20shorthand.html#225868301">(Feb 10 2021 at 16:42)</a>:</h4>
<p>We do need to figure out if/how it interacts w/ RuleSets though.  For example, if I do <code>** insert MyRuleSet</code>, should all paths in the ruleset be interpreted at the inherited context?  In some cases, that would be quite nice, but maybe there are others where it would be confusing.  We need to work that out some more I think.</p>



<a name="225868933"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20shorthand/near/225868933" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20shorthand.html#225868933">(Feb 10 2021 at 16:46)</a>:</h4>
<p>We'd love more feedback on the proposed logical model approach (and context too) so we can nail it down before we beginning development (or taking up others' offers to help with development!).  <span class="user-mention" data-user-id="203235">@Ward Weistra</span>, I know your crew has some experience with logical models.  Any feedback?  <span class="user-mention" data-user-id="192166">@Jean Duteau</span> -- you've been a FSH advocate and power user from the start.  Any thoughts?  Same for <span class="user-mention" data-user-id="192611">@Kurt Allen</span>, <span class="user-mention" data-user-id="191321">@David Hay</span>, and many others...  Appreciate your thoughts.  Our first starts at a logical model and/or resource syntax introduced halfway through the thread <a href="#narrow/stream/215610-shorthand/topic/Logical.20Models.20in.20shorthand/near/225757221">here</a>.</p>



<a name="225873627"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20shorthand/near/225873627" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20shorthand.html#225873627">(Feb 10 2021 at 17:14)</a>:</h4>
<p>I don't object to the idea of TextContent (ugh, I keep reading/typing Context), but...</p>
<p>I like that it allows you to split content into multiple files and define a context  for that file. That's a positive, but we already could split content into multiple files, e.g. using rulesets, so the real main advantage is the context.</p>
<p>On the other hand, what makes the text elements special? I think in part, you've eliminated the need for ^ syntax for most common uses with custom syntax for cardinality, must support, binding, etc. But, how do I set the item's ElementDefinition.code, or alias, or any of the other less common definitional elements? I think I still need to drop down to ^ syntax. Perhaps what is needed is the ability to use any element without using ^ syntax (based on one of your examples above):</p>
<div class="codehilite"><pre><span></span><code>+ communication is 0..* BackboneElement
* * obeys ele-1
+ + language is 1..1 CodeableConcept
* * * obeys ele-1
* * * from LANGUAGES (preferred)
* * * code = $LNC#1234
* * * short = &quot;my short description&quot;
* * * example[+]
* * * * label = &quot;this is an example&quot;
* * * * valueDate = &#39;2021-01-01&#39;
</code></pre></div>
<p>The outstanding capability is to be able to specify the language(s).</p>
<p>It would be nice to clarify if there is a difference between <code>+ +</code> and <code>* +</code>. Are both valid? Are do they mean the same?</p>



<a name="225878006"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20shorthand/near/225878006" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Hay <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20shorthand.html#225878006">(Feb 10 2021 at 17:43)</a>:</h4>
<p>I quite like the idea of TextContent. In the clinFHIR modeller I've found that the textual stuff is important - especially when using the model to capture input from domain experts  - but  inserting it in the main model would certainly obfsucate the model definition (IMHO)</p>



<a name="225878794"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20shorthand/near/225878794" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20shorthand.html#225878794">(Feb 10 2021 at 17:48)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191469">Chris Moesel</span> <a href="#narrow/stream/215610-shorthand/topic/Logical.20Models.20in.20shorthand/near/225866821">said</a>:</p>
<blockquote>
<p><div class="codehilite"><pre><span></span><code>* identifier 1..1 MS
** system = &quot;http://foo.org/mysystem&quot;
</code></pre></div><br>
</p>
</blockquote>
<p>Indeed, I don't like this (atm I cannot explain why)</p>



<a name="225879377"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20shorthand/near/225879377" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20shorthand.html#225879377">(Feb 10 2021 at 17:51)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191469">Chris Moesel</span> <a href="#narrow/stream/215610-shorthand/topic/Logical.20Models.20in.20shorthand/near/225868301">said</a>:</p>
<blockquote>
<p>We do need to figure out if/how it interacts w/ RuleSets though.  For example, if I do <code>** insert MyRuleSet</code>, should all paths in the ruleset be interpreted at the inherited context?  In some cases, that would be quite nice, but maybe there are others where it would be confusing.  We need to work that out some more I think.</p>
</blockquote>
<p>this discovery is fundamental, I think. </p>
<ul>
<li>I think <code>**</code> insert MyRuleSet should indeed apply to the context determined by the <code>**</code></li>
</ul>



<a name="225879427"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20shorthand/near/225879427" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Hay <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20shorthand.html#225879427">(Feb 10 2021 at 17:51)</a>:</h4>
<p>of the examples thus far, I found the HIV one (with + symbols) the easiest to grok...</p>



<a name="225879936"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20shorthand/near/225879936" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Hay <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20shorthand.html#225879936">(Feb 10 2021 at 17:54)</a>:</h4>
<p>How would you represent elements with different possible datatypes? like Patient.multipleBirth[x] ?</p>



<a name="225885593"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20shorthand/near/225885593" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20shorthand.html#225885593">(Feb 10 2021 at 18:33)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191321">David Hay</span> <a href="#narrow/stream/215610-shorthand/topic/Logical.20Models.20in.20shorthand/near/225879936">said</a>:</p>
<blockquote>
<p>How would you represent elements with different possible datatypes? like Patient.multipleBirth[x] ?</p>
</blockquote>
<p>Similar to how you do it in an <code>only</code> rule: by using <code>or</code>:</p>
<div class="codehilite"><pre><span></span><code>+ multipleBirth[x] 0..1 boolean or integer &quot;Whether patient is part of a multiple birth&quot;
</code></pre></div>



<a name="225887349"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20shorthand/near/225887349" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20shorthand.html#225887349">(Feb 10 2021 at 18:44)</a>:</h4>
<p><span class="user-mention" data-user-id="191380">@Elliot Silver</span> -- I think we need the <code>^</code> to indicate if you're talking about a property from the <code>ElementDefinition</code> or a sub-path of the element in context.  E.g., a shortened (And slightly modified) version of your example:</p>
<div class="codehilite"><pre><span></span><code>+ communication is 0..* BackboneElement
+ + language is 1..1 CodeableConcept
* * * coding = $LNC#1234
* * * short = &quot;my short description&quot;
</code></pre></div>
<p>In the case above:</p>
<ul>
<li><code>coding</code> refers to <code>communication.language.coding</code> (the <code>coding</code> sub-path of the <code>communication.language</code> CodeableConcept)</li>
<li><code>short</code> refers to <code>communication.language ^short</code> (the <code>short</code> property in the <code>communication.language</code> ElementDefinition)</li>
</ul>
<p>There is no syntactic hint for which is which.  You need to be familiar with the structure of <code>CodeableConcept</code> and the structure of <code>ElementDefinition</code> to ascertain what is going on.</p>
<p>There is also potential for ambiguity.  How should I interpret this in the context of an Observation profile?</p>
<div class="codehilite"><pre><span></span><code>* component
* * code = LOINC#1234-5
</code></pre></div>
<p>Is that a pattern[x] assignment on <code>component.code</code> or is that setting <code>component ^code</code> (e.g., <code>ElementDefintion.code</code> for the <code>component</code> element?</p>



<a name="225887864"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20shorthand/near/225887864" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20shorthand.html#225887864">(Feb 10 2021 at 18:47)</a>:</h4>
<blockquote>
<p>It would be nice to clarify if there is a difference between + + and * +. Are both valid? Are do they mean the same?</p>
</blockquote>
<p>Good question.  Discussing this with <span class="user-mention" data-user-id="191447">@Mark Kramer</span>, he thought that the bullet style should be consistent on a given line.  So we're going in with the idea that it's either <code>* *</code> or <code>+ +</code>, but never <code>* +</code> or <code>+ *</code>.  This approach probably is best at eliminating any ambiguity, but it (and all of this) is certainly up for discussion.</p>



<a name="225893555"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20shorthand/near/225893555" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20shorthand.html#225893555">(Feb 10 2021 at 19:24)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191469">Chris Moesel</span> [said](<a href="#narrow/stream/215610-">https://chat.fhir.org/#narrow/stream/215610-</a></p>
<div class="codehilite"><pre><span></span><code>In the case above:
* `coding` refers to `communication.language.coding` (the `coding` sub-path of the `communication.language` CodeableConcept)
* `short` refers to `communication.language ^short` (the `short` property in the `communication.language` ElementDefinition)
</code></pre></div>
<p>Perhaps this is a place where "with" or equivalent is needed. E.g.</p>
<div class="codehilite"><pre><span></span><code>+ communication is 0..* BackboneElement
+ + language is 1..1 CodeableConcept with:
* * * short = &quot;my short description&quot;
* * * endwith
* * * coding = $LNC#1234
</code></pre></div>
<p>I think the key is that there are two "modes" (although I'm having trouble articulating what those two are; describing the element attributes, and ...?) You've eliminated the many places where the element attributes are described by defining special syntax: obeys, is, etc. and thus you assume any other content is the (?) use. Currently to get back to the element attribute you need to use ^ syntax.</p>



<a name="225991081"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20shorthand/near/225991081" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ward Weistra <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20shorthand.html#225991081">(Feb 11 2021 at 13:43)</a>:</h4>
<ul>
<li>Like the ability to separate out text labels to a separate file, especially if you can start using those for different languages (<code>nl-NL</code>, <code>en-US</code>)</li>
<li>Would definitely directly look at ability to define Custom Resources and editing the core resources while you're at Logical Models, which you already seem to be doing.</li>
</ul>



<a name="226065234"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20shorthand/near/226065234" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Kramer <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20shorthand.html#226065234">(Feb 11 2021 at 22:08)</a>:</h4>
<p>I just think of trying to explain that to someone who is new to FSH and blowing their minds. Keeping it simple is a VERY important goal here.</p>



<a name="226078088"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20shorthand/near/226078088" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20shorthand.html#226078088">(Feb 12 2021 at 00:18)</a>:</h4>
<p>I agree, and I think consistency will address that. The above discussion is not simple, but the solutions seems reasonably simple.</p>



<a name="226078183"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20shorthand/near/226078183" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20shorthand.html#226078183">(Feb 12 2021 at 00:20)</a>:</h4>
<p>I presume the same way to do a LM will be the same to create a custom resource thus addressing <span class="user-mention" data-user-id="203235">@Ward Weistra</span>'s request <br>
(The syntax above just helps to simplify the nesting)</p>



<a name="226078305"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20shorthand/near/226078305" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20shorthand.html#226078305">(Feb 12 2021 at 00:21)</a>:</h4>
<p>I also struggle with the caret topic that Elliot and Chris are bringing up</p>



<a name="226137193"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20shorthand/near/226137193" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20shorthand.html#226137193">(Feb 12 2021 at 13:37)</a>:</h4>
<p>Mark and I discussed the concept of <code>TextContent</code> a little more, and given that it does seem to have caused some confusion, we think maybe it goes to the back-burner for now.  If you want to separate out text from structure, that <em>is</em> possible using RuleSets.  E.g.:</p>
<div class="codehilite"><pre><span></span><code>Resource: Patient
Parent: DomainResource
* insert PatientText
+ identifier is 0..* SU Identifier
// etc.

RuleSet: PatientText
* ^title = &quot;Patient&quot;
* ^description = &quot;&quot;&quot;
  Demographics and other administrative information about an individual or animal
  receiving care or other health-related services.
  &quot;&quot;&quot;
* ^purpose = &quot;Tracking patient is the center of the healthcare process.&quot;
* identifier
* * ^short = &quot;An identifier for this patient&quot;
* * ^definition = &quot;An identifier for this patient&quot;
* * ^requirements = &quot;Patients are almost always assigned specific numerical identifiers.&quot;
</code></pre></div>
<p>Then we're not introducing as many ideas at once.  And maybe the existing mechanims work just fine.  We shall see.</p>



<a name="226174518"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20shorthand/near/226174518" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20shorthand.html#226174518">(Feb 12 2021 at 18:05)</a>:</h4>
<p>I agree with <span class="user-mention" data-user-id="191447">@Mark Kramer</span> about keeping it simple. I think the debate was about what is "simple." <span aria-label="wink" class="emoji emoji-1f609" role="img" title="wink">:wink:</span> <br>
I also think there is some value to easily being able to do multi-language content, or pass narrative off to someone different than the person writing the technical content, so I don't want to dismiss TextContent, but it does seem rather arbitrary which elements are supported. Would it only be a set of predefined elements, or any string, markdown, html element?</p>



<a name="226314640"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20shorthand/near/226314640" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Kramer <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20shorthand.html#226314640">(Feb 14 2021 at 17:05)</a>:</h4>
<p>For TextContent, I think a lot can be done without special constructs using RuleSet. There are several possible approaches to factor the text content into a different file or files using that approach.</p>



<a name="226429477"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20shorthand/near/226429477" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Martin Höcker <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20shorthand.html#226429477">(Feb 15 2021 at 21:00)</a>:</h4>
<p>Thank you <span class="user-mention" data-user-id="191469">@Chris Moesel</span>  for showing the example of how to separate text from the rest of the structure using a RuleSet! This is solving a problem I was facing. I also really liked the syntactic sugar of your TextContent-proposal. It looks a lot cleaner. Texts and translation are often captured and edited by domain experts and/or  translation specialists, and I'm sure they would greatly appreciate the visual simplicity of TextContent. I understand this is not a priority right now, but I would certainly appreciate seeing it implemented sometime!</p>
<p>Regarding the new syntax to distinguish between <em>creating</em> elements and <em>constraining</em> elements: Might we be able to get by without this per-rule distinction? In my (limited) understanding, one either creates a new resource-type using a StructureDefinition with .derivation = #specialization, or one would constrain a resource-type/data-type using a StructureDefinition with .derivation = #constraint. Assuming that specialization and constraint are never mixed, then the new "Resource"-keyword you proposed would be distinctive enough for me.</p>



<a name="226432923"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Logical%20Models%20in%20shorthand/near/226432923" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Logical.20Models.20in.20shorthand.html#226432923">(Feb 15 2021 at 21:45)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="217988">@Martin Höcker</span> -- thanks for the feedback and glad we could provide an approach that might be useful today!</p>
<p>As for <em>create</em> vs <em>constrain</em> -- you're right that in general a <code>specialization</code> will create and a <code>constraint</code> will constrain, but I was thinking that within a logical model, you might need to further <em>constrain</em> one of the elements you <em>created</em> (like binding to a VS) -- and I wanted to make those clear so that if you had a typo (<code>desgnation</code> vs <code>designation</code>), it would be obvious that you weren't trying to <em>create</em> a new thing called <code>desgnation</code>.</p>
<p>But... as I think it through, I guess that if we only create using a rule of the form <code>{path} {card} {optional-flags} {type}</code>, then any other form of rule is by-definition a constraint.  So maybe the form of the rule itself is enough to indicate it is creating something...  I think you may be on to something -- but I'll have to think it through some more.  Thanks!</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
