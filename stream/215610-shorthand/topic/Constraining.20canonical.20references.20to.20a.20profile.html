---
layout: page
title: "FHIR Chat  · Constraining canonical references to a profile · shorthand"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/index.html">shorthand</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Constraining.20canonical.20references.20to.20a.20profile.html">Constraining canonical references to a profile</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="209120650"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Constraining%20canonical%20references%20to%20a%20profile/near/209120650" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Keith Boone <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Constraining.20canonical.20references.20to.20a.20profile.html#209120650">(Sep 04 2020 at 17:30)</a>:</h4>
<p>What is the syntax to tell Sushi that the resource at the specified canonical URL will conform to a profile?  Specifically, I'm looking to say that there must be at least one Measure.library that conforms to a specifc profile of Library.</p>



<a name="209120759"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Constraining%20canonical%20references%20to%20a%20profile/near/209120759" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Keith Boone <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Constraining.20canonical.20references.20to.20a.20profile.html#209120759">(Sep 04 2020 at 17:31)</a>:</h4>
<p>Ideally, I want to say all libraries referenced by a measure will conform to such-and -such profile..</p>



<a name="209126624"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Constraining%20canonical%20references%20to%20a%20profile/near/209126624" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Freiter <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Constraining.20canonical.20references.20to.20a.20profile.html#209126624">(Sep 04 2020 at 18:31)</a>:</h4>
<p>I can't figure out how to do this using the <code>only</code> syntax. It feels like you should be able to, but maybe that is something that is missing from FSH. You should be able to specify that a canonical will conform to a profile using the caret syntax:</p>
<div class="codehilite"><pre><span></span><code>Profile: MyMeasure
Parent: Measure
* library ^type[0].targetProfile = Canonical(NamedLibrary)
// * library ^type[0].targetProfile = &quot;http://example.org/StructureDefinition/NamedLibrary&quot;

Profile: NamedLibrary
Parent: Library
* name 1..1
</code></pre></div>


<p>where the first line shows how you would accomplish that if you are referencing a locally defined Library, and the commented out line shows how you could do this if just wanted to hard-code the URL.</p>



<a name="209131400"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Constraining%20canonical%20references%20to%20a%20profile/near/209131400" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Keith Boone <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Constraining.20canonical.20references.20to.20a.20profile.html#209131400">(Sep 04 2020 at 19:16)</a>:</h4>
<p>This worked for me, thanks!<br>
Yes, ideally, we'd be able to say * library only Canonical(NamedLibrary) and it would work the way we'd expect.  I think that works with Reference, and it should work with Canonical().</p>



<a name="209151484"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Constraining%20canonical%20references%20to%20a%20profile/near/209151484" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Keith Boone <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Constraining.20canonical.20references.20to.20a.20profile.html#209151484">(Sep 05 2020 at 00:03)</a>:</h4>
<p>I spoke too soon.  Sushi liked it, but Publisher complained: <br>
java.lang.Exception: Error generating snapshot for C:\Users\kboone\git\fhir-saner\input\profiles\StructureDefinition-PublicHealthMeasure(PublicHealthMeasure): Unable to generate snapshot for <a href="http://hl7.org/fhir/us/saner/StructureDefinition/PublicHealthMeasure">http://hl7.org/fhir/us/saner/StructureDefinition/PublicHealthMeasure</a> in C:\Users\kboone\git\fhir-saner\input\profiles\StructureDefinition-PublicHealthMeasure<br>
    at org.hl7.fhir.igtools.publisher.Publisher.generateSnapshots(Publisher.java:4360)<br>
    at org.hl7.fhir.igtools.publisher.Publisher.loadConformance(Publisher.java:3699)<br>
    at org.hl7.fhir.igtools.publisher.Publisher.createIg(Publisher.java:854)<br>
    at org.hl7.fhir.igtools.publisher.Publisher.execute(Publisher.java:715)<br>
    at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:7946)<br>
Caused by: org.hl7.fhir.exceptions.FHIRException: Unable to generate snapshot for <a href="http://hl7.org/fhir/us/saner/StructureDefinition/PublicHealthMeasure">http://hl7.org/fhir/us/saner/StructureDefinition/PublicHealthMeasure</a> in C:\Users\kboone\git\fhir-saner\input\profiles\StructureDefinition-PublicHealthMeasure<br>
    at org.hl7.fhir.igtools.publisher.Publisher.generateSnapshot(Publisher.java:4413)<br>
    at org.hl7.fhir.igtools.publisher.Publisher.generateSnapshots(Publisher.java:4358)<br>
    ... 4 more<br>
Caused by: org.hl7.fhir.exceptions.DefinitionException: Type mismatch processing profile <a href="http://hl7.org/fhir/us/saner/StructureDefinition/PublicHealthMeasureLibrary">http://hl7.org/fhir/us/saner/StructureDefinition/PublicHealthMeasureLibrary</a> at path Measure.library: The element type is canonical, but the profile <a href="http://hl7.org/fhir/us/saner/StructureDefinition/PublicHealthMeasureLibrary">http://hl7.org/fhir/us/saner/StructureDefinition/PublicHealthMeasureLibrary</a> is for a different type Library<br>
    at org.hl7.fhir.r5.conformance.ProfileUtilities.processPaths(ProfileUtilities.java:929)<br>
    at org.hl7.fhir.r5.conformance.ProfileUtilities.generateSnapshot(ProfileUtilities.java:539)<br>
    at org.hl7.fhir.igtools.publisher.Publisher.generateSnapshot(Publisher.java:4411)<br>
    ... 5 more</p>
<p>I think I'll have to wait for <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> or <span class="user-mention" data-user-id="191315">@Josh Mandel</span>  or <span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> to explain this one to me.</p>



<a name="209153349"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Constraining%20canonical%20references%20to%20a%20profile/near/209153349" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Constraining.20canonical.20references.20to.20a.20profile.html#209153349">(Sep 05 2020 at 00:48)</a>:</h4>
<p>looks like you meant to specify a targetProfile but you specified a profile instead</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
