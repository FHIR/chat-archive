---
layout: page
title: "FHIR Chat  · Extension in Profile in Extension · shorthand"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/index.html">shorthand</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Extension.20in.20Profile.20in.20Extension.html">Extension in Profile in Extension</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="198129578"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Extension%20in%20Profile%20in%20Extension/near/198129578" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jill Doty <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Extension.20in.20Profile.20in.20Extension.html#198129578">(May 19 2020 at 21:31)</a>:</h4>
<p>I've defined a profile with an extension (ReferenceWithPeriod) </p>
<div class="codehilite"><pre><span></span><code>Extension: ReferencePeriod
Title: &quot;Reference Period&quot;
Id: reference-period
* value[x] only Period

Profile: ReferenceWithPeriod
Parent: Reference
Title: &quot;Reference with Period&quot;
Id: reference-with-period
* extension contains ReferencePeriod named period 1..1
</code></pre></div>


<p>I'd like to define an extension using that profile, and set the value of the original period extension.  I'm struggling to find syntax that doesn't cause an error - any advice is appreciated.</p>
<p>Below are some of the options that don't work... (attempted one at a time)</p>
<div class="codehilite"><pre><span></span><code>Extension: FixedStartReference
Title: &quot;FixedStartReference&quot;
Id: fixed-start-reference
* value[x] only ReferenceWithPeriod
* value[x].extension[period].start = &quot;2020-01-01&quot;
* value[x].valuePeriod.start = &quot;2020-01-01&quot;
* value[x].period.start = &quot;2020-01-01&quot;
</code></pre></div>



<a name="198192760"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Extension%20in%20Profile%20in%20Extension/near/198192760" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Freiter <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Extension.20in.20Profile.20in.20Extension.html#198192760">(May 20 2020 at 12:49)</a>:</h4>
<p>What you are trying to do should be possible, and I explain the syntax below, but up front I want to warn you that it seems like you have found a bug specific to Reference unfortunately, so the syntax I explain <em>should</em> work, but doesn't in this case. </p>
<p>The syntax you would want in this case looks more like this:</p>
<div class="codehilite"><pre><span></span><code>Extension: FixedStartReference
Title: &quot;FixedStartReference&quot;
Id: fixed-start-reference
* value[x] only ReferenceWithPeriod
* valueReference.extension[period].valuePeriod.start = &quot;2020-01-01&quot;
</code></pre></div>


<p>Once a <code>value[x]</code> element has been constrained to only one choice, you use the syntax <code>valueDataType</code>, where DataType is the capitalized name of the data type that the choice has been constrained to. We do it this way, because this is how the data would be represented on an actual instance of a FHIR resource. Note that we do not do <code>valueReferenceWithPeriod</code>, because <code>ReferenceWithPeriod</code> is just a profile of <code>Reference</code>, the underlying datatype is still <code>Reference</code>. Then you had the right idea to next access <code>extension[period]</code>. But keep in mind that at this point we are accessing the <code>ReferencePeriod</code> extension, which does not have a <code>start</code> on it. The <code>ReferencePeriod</code> extension has a <code>value[x]</code> constrained to Period, and the Period has a start. So we access that as <code>valuePeriod.start</code>. Then the full path becomes the one shown above.</p>



<a name="198192898"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Extension%20in%20Profile%20in%20Extension/near/198192898" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Freiter <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Extension.20in.20Profile.20in.20Extension.html#198192898">(May 20 2020 at 12:50)</a>:</h4>
<p>Again though, my example will still not work. I've replicated your example with other datatypes, and it does work. It is just in the case of Reference that things break down, so this is definitely a bug, which we will work to fix soon. Thanks for the find!</p>



<a name="198194170"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Extension%20in%20Profile%20in%20Extension/near/198194170" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Freiter <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Extension.20in.20Profile.20in.20Extension.html#198194170">(May 20 2020 at 13:00)</a>:</h4>
<p>Here is the issue where we will be tracking this: <a href="https://github.com/FHIR/sushi/issues/451">https://github.com/FHIR/sushi/issues/451</a></p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
