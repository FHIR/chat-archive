---
layout: page
title: "FHIR Chat  · Soft Indexing downside · shorthand"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/index.html">shorthand</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Soft.20Indexing.20downside.html">Soft Indexing downside</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="224426563"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Soft%20Indexing%20downside/near/224426563" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Soft.20Indexing.20downside.html#224426563">(Jan 29 2021 at 03:19)</a>:</h4>
<p>So, I just discovered an issue with soft indexing. QA.html is reporting an error at "Questionnaire/WhoCrQuestionnaireCovid19Surveillance: Questionnaire.item[7].item[9].code[0]". How the heck am I supposed to figure out where that is? (I'd better not make any more wishes.)</p>



<a name="224426782"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Soft%20Indexing%20downside/near/224426782" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Soft.20Indexing.20downside.html#224426782">(Jan 29 2021 at 03:23)</a>:</h4>
<p>Also, the fsh language reference example of using parameterized rules and soft indexing for a questionnaire, works only if your questionnaire is a flat list (and if you aren't specifying additional elements like valuesets, etc., but I suppose that is understandable).</p>



<a name="224428040"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Soft%20Indexing%20downside/near/224428040" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Soft.20Indexing.20downside.html#224428040">(Jan 29 2021 at 03:51)</a>:</h4>
<p>Next up:</p>
<div class="codehilite"><pre><span></span><code>* contained[0] = WhoCrValueSetQuestionnaireCountry
* contained[1] = WhoCrValueSetQuestionnaireReasonForTesting
* meta.profile[0] = Canonical(http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire)
* meta.profile[1] = Canonical(http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-extr-defn)
</code></pre></div>
<p>The above seems to work fine, but changing all the indexes to <code>+</code> causes errors in sushi:</p>
<div class="codehilite"><pre><span></span><code>Sushi: error The element or path you referenced does not exist: contained[+]     (00:16.0063)
</code></pre></div>



<a name="224473248"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Soft%20Indexing%20downside/near/224473248" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Soft.20Indexing.20downside.html#224473248">(Jan 29 2021 at 13:57)</a>:</h4>
<p>That's a good point about the references... that does make it more difficult to track back errors...  I guess you need to do some counting?  Perhaps in the future we can output a set of FSH w/ all the indexes resolved (or some kind of answer key) -- but I don't know how easy it would be and it's probably not our top priority at the moment.</p>
<p>As for your example, replacing those with <code>[+]</code> should be fine.  I've whipped up a quick example myself and it seems to work: <a href="https://fshschool.org/FSHOnline/#/share/2KZEKMl">https://fshschool.org/FSHOnline/#/share/2KZEKMl</a></p>
<p>Note that I did have to change your <code>Canonical(...)</code> references because I didn't have SDC as a dependency so they did not resolve -- but also note that if you already have the canonical URL, you can just put it in as a string (like in my example).  <code>Canonical(...)</code> is really just a convenience function for converting a name/id to a canonical -- so if you already have the canonical, it's not necessary.</p>



<a name="224474072"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Soft%20Indexing%20downside/near/224474072" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Pyke <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Soft.20Indexing.20downside.html#224474072">(Jan 29 2021 at 14:03)</a>:</h4>
<p>HAving a preprocessor-only command for sushi which resolves macros, aliases and indexes might be useful</p>



<a name="224474994"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Soft%20Indexing%20downside/near/224474994" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Soft.20Indexing.20downside.html#224474994">(Jan 29 2021 at 14:10)</a>:</h4>
<p>Yeah, that's an interesting idea, <span class="user-mention" data-user-id="192587">@David Pyke</span>.  I don't think we do all of those strictly as pre-processors right now -- at least not with a clear division between the pre-processing and the rest of the stuff.  But it might be possible...</p>



<a name="224498328"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Soft%20Indexing%20downside/near/224498328" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Soft.20Indexing.20downside.html#224498328">(Jan 29 2021 at 16:36)</a>:</h4>
<p>I think I was falling into <span class="user-mention" data-user-id="192587">@David Pyke</span> 's problem last night -- I was using stale sushi. I'll give it a try again this morning and see if the contained/meta issues clear up.<br>
I'm not really complaining about the counting thing; it <em>is</em> doing what we asked for. I may try to see what a hybrid approach looks like (use explicit numbering instead of +, but continue to use =).</p>



<a name="224501777"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Soft%20Indexing%20downside/near/224501777" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Kramer <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Soft.20Indexing.20downside.html#224501777">(Jan 29 2021 at 16:58)</a>:</h4>
<p>+1 for output option after macro expand.</p>



<a name="224503606"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Soft%20Indexing%20downside/near/224503606" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Soft.20Indexing.20downside.html#224503606">(Jan 29 2021 at 17:11)</a>:</h4>
<p>Would that option be  a command line parameter?<br>
And how would it work when called by the publisher?</p>



<a name="224510536"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Soft%20Indexing%20downside/near/224510536" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Soft.20Indexing.20downside.html#224510536">(Jan 29 2021 at 18:00)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191380">Elliot Silver</span> <a href="#narrow/stream/215610-shorthand/topic/Soft.20Indexing.20downside/near/224498328">said</a>:</p>
<blockquote>
<p>I think I was falling into <span class="user-mention silent" data-user-id="192587">David Pyke</span> 's problem last night -- I was using stale sushi. I'll give it a try again this morning and see if the contained/meta issues clear up.</p>
</blockquote>
<p>Yup -- and it got weirder too -- commandline sushi worked ok, but publisher-invoked was failing. Turns out fsh.ini was pinning the sushi version to 1.0. I fixed that, and all seems good.</p>



<a name="224527555"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Soft%20Indexing%20downside/near/224527555" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Soft.20Indexing.20downside.html#224527555">(Jan 29 2021 at 20:19)</a>:</h4>
<p>Yeah, that's the danger of specifying a version of SUSHI in fsh.ini.  I think maybe I'll look into a feature to log out a hard-to-ignore message if SUSHI detects that there are updates available.  Then at least when you look through the logs, you can notice that SUSHI is old.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
