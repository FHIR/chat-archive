---
layout: page
title: "FHIR Chat  · ConceptMap shorthand · shorthand"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/index.html">shorthand</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/ConceptMap.20shorthand.html">ConceptMap shorthand</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="202018423"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/ConceptMap%20shorthand/near/202018423" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/ConceptMap.20shorthand.html#202018423">(Jun 25 2020 at 20:09)</a>:</h4>
<p>Has anyone done work on a shorthand syntax for ConceptMap?</p>



<a name="202018704"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/ConceptMap%20shorthand/near/202018704" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/ConceptMap.20shorthand.html#202018704">(Jun 25 2020 at 20:12)</a>:</h4>
<p>I found you can create an Instance for one like this:</p>
<div class="codehilite"><pre><span></span><code>Instance: SnomedToUcum
InstanceOf: ConceptMap
* url = &quot;http://example.com/fhir/ConceptMap/snomed-ucum&quot;
* version = &quot;0.0.1&quot;
* status = #draft
* sourceCanonical = &quot;http://snomed.info/sct?fhir_vs&quot;
* targetCanonical = &quot;http://hl7.org/fhir/ValueSet/ucum-common&quot;
* group[0].source = &quot;http://snomed.info/sct&quot;
* group[0].target = &quot;http://unitsofmeasure.org&quot;
* group[0].element[0].code = #258672001
* group[0].element[0].target.code = #cm
* group[0].element[0].target.equivalence = #equivalent
* group[0].element[1].code = #258672002&quot;
* group[0].element[1].target.code = #mL
* group[0].element[1].target.equivalence = #equivalent
</code></pre></div>



<a name="202018774"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/ConceptMap%20shorthand/near/202018774" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/ConceptMap.20shorthand.html#202018774">(Jun 25 2020 at 20:12)</a>:</h4>
<p>but I was wondering if we could do better with a new top-level reserved ConceptMap concept</p>



<a name="202019559"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/ConceptMap%20shorthand/near/202019559" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/ConceptMap.20shorthand.html#202019559">(Jun 25 2020 at 20:19)</a>:</h4>
<p>my colleague found a commented-out syntax for conceptmaps in FHIR Mapping Language, so maybe some combination of these two approaches could work?</p>
<div class="codehilite"><pre><span></span><code>    /*
     * Syntax for embedded ConceptMaps excluded for now
     *
    conceptMap
        : &#39;conceptMap&#39; &#39;&quot;#&#39; IDENTIFIER &#39;{&#39; (prefix)+ conceptMapping &#39;}&#39;
        ;
    prefix
        : &#39;prefix&#39; conceptMappingVar &#39;=&#39; URL
        ;
    conceptMappingVar
        :  IDENTIFIER
        ;
    conceptMapping
        :  conceptMappingVar &#39;:&#39; field
           ((&#39;&lt;=&#39; | &#39;=&#39; | &#39;==&#39; | &#39;!=&#39; &#39;&gt;=&#39; &#39;&gt;-&#39; | &#39;&lt;-&#39; | &#39;~&#39;) conceptMappingVar &#39;:&#39; field) | &#39;--&#39;
        ;
    */
</code></pre></div>



<a name="202021460"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/ConceptMap%20shorthand/near/202021460" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/ConceptMap.20shorthand.html#202021460">(Jun 25 2020 at 20:36)</a>:</h4>
<p>without knowing much of anything about the FSH/SUSHI design, here's the result of the thought exercise on trying to combine these:</p>
<div class="codehilite"><pre><span></span><code>Alias: s = http://snomed.info/sct
Alias: u = http://unitsofmeasure.org

ConceptMap: SnomedToUcum
Url: http://ibm.com/fhir/ConceptMap/snomed-ucum
Version: 0.1.0
Status: #draft
SourceCanonical: http://snomed.info/sct?fhir_vs
TargetCanonical: http://hl7.org/fhir/ValueSet/ucum-common
* s#258672001 == u#cm
* s#258672002 == u#mL
</code></pre></div>


<p>thoughts?</p>



<a name="202026488"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/ConceptMap%20shorthand/near/202026488" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/ConceptMap.20shorthand.html#202026488">(Jun 25 2020 at 21:20)</a>:</h4>
<p>I don't really have any experience w/ <code>ConceptMap</code>, but you're not the first person to ask for something like this.  Once FSH 1.0.0 is finalized, we'll be considering other candidates for dedicated syntaxes -- and <code>ConceptMap</code> will certainly be considered!</p>
<p>Your proposed syntax looks a whole lot like the FSH syntax for Mapping (which is used for defining mappings in StructureDefinitions).  Check it out: <a href="https://build.fhir.org/ig/HL7/fhir-shorthand/reference.html#defining-mappings">https://build.fhir.org/ig/HL7/fhir-shorthand/reference.html#defining-mappings</a></p>
<p>If we adopted some of the existing syntax of <code>Mapping</code> (and other existing FSH), then you're example above might look something more like:</p>
<div class="codehilite"><pre><span></span><code>Alias: SCT = http://snomed.info/sct
Alias: UCUM = http://unitsofmeasure.org

ConceptMap: SnomedToUcum
Id: snomed-ucum
Source: http://snomed.info/sct?fhir_vs
Target: http://hl7.org/fhir/ValueSet/ucum-common
* ^version = 0.1.0
* ^status = #draft
* SCT#258672001 -&gt; UCUM#cm
* SCT#258672002 -&gt; UCUM#mL
</code></pre></div>


<p>Although usually we would just default to the IG version and status, so you probably wouldn't need to specify the <code>^version</code> and <code>^status</code> rules.  And I wonder if it might be possible to <em>infer</em> the code systems so that each mapping is really more like this:</p>
<div class="codehilite"><pre><span></span><code>* #258672001 -&gt; #cm
* #258672002 -&gt; #mL
</code></pre></div>


<p>Anyway, those are my thoughts without looking at the ConceptMap resource at all, but we'll certainly take a closer look when we start working on FSH STU2.</p>



<a name="202027747"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/ConceptMap%20shorthand/near/202027747" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/ConceptMap.20shorthand.html#202027747">(Jun 25 2020 at 21:31)</a>:</h4>
<p>you could add the relationship type in the syntax:</p>
<div class="codehilite"><pre><span></span><code>* SCT#258672001 -[rel]-&gt; UCUM#cm
* SCT#258672002 -[eq]-&gt; UCUM#mL
</code></pre></div>



<a name="202042022"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/ConceptMap%20shorthand/near/202042022" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Keith Boone <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/ConceptMap.20shorthand.html#202042022">(Jun 26 2020 at 00:37)</a>:</h4>
<p>Plant much?</p>



<a name="202047770"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/ConceptMap%20shorthand/near/202047770" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/ConceptMap.20shorthand.html#202047770">(Jun 26 2020 at 02:54)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191387">Keith Boone</span> <a href="#narrow/stream/215610-shorthand/topic/ConceptMap.20shorthand/near/202042022">said</a>:</p>
<blockquote>
<p>Plant much?</p>
</blockquote>
<p>what else?  (besides, they started it ) <span aria-label="grinning face with smiling eyes" class="emoji emoji-1f601" role="img" title="grinning face with smiling eyes">:grinning_face_with_smiling_eyes:</span></p>



<a name="202050260"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/ConceptMap%20shorthand/near/202050260" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/ConceptMap.20shorthand.html#202050260">(Jun 26 2020 at 03:51)</a>:</h4>
<p>Yeah, I probably should have looked closer at the syntax to see that <code>-&gt;</code> was probably too simple of a solution.  Oh well.  I'm not really supposed to be looking at this right now anway.  Stop drawing me in. ;-)</p>



<a name="202323785"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/ConceptMap%20shorthand/near/202323785" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/ConceptMap.20shorthand.html#202323785">(Jun 29 2020 at 15:09)</a>:</h4>
<p>ConceptMap is undergoing changes in R5 -- need to ensure vocab is looped in on any plans for a syntax; clarity of direction is important!</p>



<a name="202326939"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/ConceptMap%20shorthand/near/202326939" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Keith Boone <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/ConceptMap.20shorthand.html#202326939">(Jun 29 2020 at 15:31)</a>:</h4>
<p>Changes in R5 ContextMap seem to be more about syntax in FHIR rather than semantics of what a ConceptMap conveys, with the syntax allowing specification of more detail and clarity about mapping.  So far I haven't seen many changes to it that would conceptually be a big different in the meaning of the content.  I agree that Vocab should be involved, but it doesn't seem to be a tremendously complicated effort to capture the essentials needed for most of the cases I've ever developed a concept map for in an IG.</p>



<a name="204624282"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/ConceptMap%20shorthand/near/204624282" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/ConceptMap.20shorthand.html#204624282">(Jul 22 2020 at 02:17)</a>:</h4>
<p>There are things you can say in a pre-R5 map that you can't say in an R5 map, and some things have moved from being a specific code in one field to a new (boolean-typed) field.  If a custom syntax doesn't address these issues then there'll be significant cost in maintaining multi-version ConceptMaps and possibly also significant cognitive dissonance for users as the conceptual model aligned with the syntax diverges from the model of the Resource.</p>



<a name="204631170"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/ConceptMap%20shorthand/near/204631170" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/ConceptMap.20shorthand.html#204631170">(Jul 22 2020 at 05:16)</a>:</h4>
<p><a href="#narrow/stream/179252-IG-creation/topic/Representation.20of.20StructureMap.20in.20IGuides.3F/near/204464007">https://chat.fhir.org/#narrow/stream/179252-IG-creation/topic/Representation.20of.20StructureMap.20in.20IGuides.3F/near/204464007</a></p>



<a name="204631188"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/ConceptMap%20shorthand/near/204631188" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/ConceptMap.20shorthand.html#204631188">(Jul 22 2020 at 05:17)</a>:</h4>
<p>would be a good starting point, no?</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
