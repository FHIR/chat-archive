---
layout: page
title: "FHIR Chat  · Reverse Engineer Structure Definitions to FSH · shorthand"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/index.html">shorthand</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Reverse.20Engineer.20Structure.20Definitions.20to.20FSH.html">Reverse Engineer Structure Definitions to FSH</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="203341864"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Reverse%20Engineer%20Structure%20Definitions%20to%20FSH/near/203341864" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> ben <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Reverse.20Engineer.20Structure.20Definitions.20to.20FSH.html#203341864">(Jul 09 2020 at 01:07)</a>:</h4>
<p>Hi, I am working on changing from using XML/JSON based structure definitions to use the FSH ones, however we have quite a base and I looking for a better way to reverse engineer the files, can you recommend any tool/ example to do this?</p>



<a name="203344005"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Reverse%20Engineer%20Structure%20Definitions%20to%20FSH/near/203344005" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> ben <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Reverse.20Engineer.20Structure.20Definitions.20to.20FSH.html#203344005">(Jul 09 2020 at 01:52)</a>:</h4>
<p><span class="user-mention" data-user-id="191469">@Chris Moesel</span> can you point me somewhere?</p>



<a name="203346838"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Reverse%20Engineer%20Structure%20Definitions%20to%20FSH/near/203346838" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Reverse.20Engineer.20Structure.20Definitions.20to.20FSH.html#203346838">(Jul 09 2020 at 02:59)</a>:</h4>
<p>Hey <span class="user-mention" data-user-id="319828">@ben</span> -- this is a fairly common request.  Up until now, we've been focusing on SUSHI, a tool for translating FSH --&gt; SD JSON.  But we've just started working on <em>GoFSH</em>, a tool for translating SD JSON --&gt; FSH.  It's still very early on, so we haven't yet pushed anything up to GitHub.  If we pushed it up soon, is this something you might be interested in contributing to?</p>



<a name="203346934"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Reverse%20Engineer%20Structure%20Definitions%20to%20FSH/near/203346934" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Reverse.20Engineer.20Structure.20Definitions.20to.20FSH.html#203346934">(Jul 09 2020 at 03:01)</a>:</h4>
<p>There is also an early prototype from Lantana called <a href="https://github.com/lantanagroup/fshfood">FSH Food</a>, but it's fairly out of date now.  The GoFSH implementation is based on TypeScript, while FSH Food was prototyped using XSLT.</p>



<a name="203757160"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Reverse%20Engineer%20Structure%20Definitions%20to%20FSH/near/203757160" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Halina Labikova <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Reverse.20Engineer.20Structure.20Definitions.20to.20FSH.html#203757160">(Jul 13 2020 at 19:08)</a>:</h4>
<p>On a similar note - any plans for developing a tool for reverse engineering of valueset files? I find that dynamic valuesets are much easier to maintain in fsh  than manipulating the xml/jsons inside the vocab folder.</p>



<a name="203783426"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Reverse%20Engineer%20Structure%20Definitions%20to%20FSH/near/203783426" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Reverse.20Engineer.20Structure.20Definitions.20to.20FSH.html#203783426">(Jul 13 2020 at 23:25)</a>:</h4>
<p>Yes, <span class="user-mention" data-user-id="194075">@Halina Labikova</span>.  Translating value sets to FSH is part of the plan as well -- although StructureDefinitions are the first priority.  We're also going to have to figure out what to do for Value Sets that use features that don't have a FSH syntax (yet).  We may have to translate them as straight-up <em>Instance</em>s (of ValueSet) -- which won't be quite as nice...</p>



<a name="203808428"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Reverse%20Engineer%20Structure%20Definitions%20to%20FSH/near/203808428" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Kavanagh <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Reverse.20Engineer.20Structure.20Definitions.20to.20FSH.html#203808428">(Jul 14 2020 at 08:11)</a>:</h4>
<p>I have C# code to generate FSH from STU3 ValueSet/CodeSystems - I need to get that on GitHub somewhere.</p>



<a name="203841285"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Reverse%20Engineer%20Structure%20Definitions%20to%20FSH/near/203841285" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gino Canessa <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Reverse.20Engineer.20Structure.20Definitions.20to.20FSH.html#203841285">(Jul 14 2020 at 14:42)</a>:</h4>
<p>I have a project on GitHub (<a href="https://github.com/microsoft/fhir-codegen">fhir-codegen</a>) that loads, parses, and filters FHIR (DSTU2 through R5 beta).  It supports most all FHIR features (StructureDefs, Codes, CodeSystems, ValueSets / Expansions, Operations, SearchParameters...), though Interactions need work (noted below).   Export "Languages" are defined via an <a href="https://github.com/microsoft/fhir-codegen/blob/main/src/Microsoft.Health.Fhir.SpecManager/Language/ILanguage.cs">interface</a>, which lets you traverse the loaded structures and output whatever you want.</p>
<p>I've already done exports of</p>
<ul>
<li>Plain Text: <a href="https://github.com/microsoft/fhir-codegen/blob/main/src/Microsoft.Health.Fhir.SpecManager/Language/Info.cs">language definition</a>, <a href="https://github.com/microsoft/fhir-codegen/blob/main/generated/R4.txt">R4 output</a></li>
<li>TypeScript <a href="https://github.com/microsoft/fhir-codegen/blob/main/src/Microsoft.Health.Fhir.SpecManager/Language/TypeScript.cs">language definition</a>, <a href="https://github.com/microsoft/fhir-codegen/blob/main/generated/R5.ts">R4 output</a></li>
<li>Simple C# (for prototyping/simple projects) <a href="https://github.com/microsoft/fhir-codegen/blob/main/src/Microsoft.Health.Fhir.SpecManager/Language/CSharpBasic.cs">language definition</a>, <a href="https://github.com/microsoft/fhir-codegen/blob/main/generated/R4.cs">R4 output</a></li>
<li>Still testing: Firely-style C# (replacing the <code>generated</code> content from the T4 templates) <a href="https://github.com/microsoft/fhir-codegen/blob/main/src/Microsoft.Health.Fhir.SpecManager/Language/CSharpFirely.cs">language definition</a></li>
</ul>
<p>I'm working on OpenAPI next (as noted above, I need to flesh out support for Interactions, so it will take a little longer than just a language export), but I can add FSH  to my list if you let me know what you want them to look like.  Or, anyone else could take a stab at defining the export file and I'm happy to review/merge.</p>
<p>Edit: docs <a href="https://microsoft.github.io/fhir-codegen/">here</a></p>



<a name="203852761"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Reverse%20Engineer%20Structure%20Definitions%20to%20FSH/near/203852761" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Reverse.20Engineer.20Structure.20Definitions.20to.20FSH.html#203852761">(Jul 14 2020 at 16:10)</a>:</h4>
<p><span class="user-mention" data-user-id="222054">@Gino Canessa</span> do you have a cloud hosted service? I have some StructureDef that I would really like converted to FSH, and I am not looking forward to doing it by hand.</p>



<a name="203852861"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Reverse%20Engineer%20Structure%20Definitions%20to%20FSH/near/203852861" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gino Canessa <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Reverse.20Engineer.20Structure.20Definitions.20to.20FSH.html#203852861">(Jul 14 2020 at 16:11)</a>:</h4>
<p>I plan to, but building the UI is <del>behind some of the languages on the list</del> down a bit on the list.</p>



<a name="203861430"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Reverse%20Engineer%20Structure%20Definitions%20to%20FSH/near/203861430" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Reverse.20Engineer.20Structure.20Definitions.20to.20FSH.html#203861430">(Jul 14 2020 at 17:22)</a>:</h4>
<p><span class="user-mention" data-user-id="222054">@Gino Canessa</span> -- the "Usage" and "Extending" links in that doc are <code>404</code>.</p>



<a name="203866843"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Reverse%20Engineer%20Structure%20Definitions%20to%20FSH/near/203866843" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gino Canessa <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Reverse.20Engineer.20Structure.20Definitions.20to.20FSH.html#203866843">(Jul 14 2020 at 18:07)</a>:</h4>
<p>Thanks <span class="user-mention" data-user-id="191469">@Chris Moesel</span> .  GH Pages isn't serving the updated content for some reason - until it updates you can access them via the <code>Articles</code> tab.<br>
Edit: done, though you may need to force-refresh the page.  Thanks again!</p>



<a name="217039099"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Reverse%20Engineer%20Structure%20Definitions%20to%20FSH/near/217039099" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Reverse.20Engineer.20Structure.20Definitions.20to.20FSH.html#217039099">(Nov 17 2020 at 18:00)</a>:</h4>
<p><span class="user-mention" data-user-id="222054">@Gino Canessa</span> how do you handle invariants in your code generation  ?</p>



<a name="217039140"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Reverse%20Engineer%20Structure%20Definitions%20to%20FSH/near/217039140" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Reverse.20Engineer.20Structure.20Definitions.20to.20FSH.html#217039140">(Nov 17 2020 at 18:01)</a>:</h4>
<p>as in invariants in the profiles</p>



<a name="217125950"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Reverse%20Engineer%20Structure%20Definitions%20to%20FSH/near/217125950" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gino Canessa <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Reverse.20Engineer.20Structure.20Definitions.20to.20FSH.html#217125950">(Nov 18 2020 at 12:07)</a>:</h4>
<p>Hi Jens, I was just looking and it doesn't seem that's come up yet.  I've added it to my list for parsing, but it would be up to each exported 'language' to decide what to do with them.</p>



<a name="217320255"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Reverse%20Engineer%20Structure%20Definitions%20to%20FSH/near/217320255" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Reverse.20Engineer.20Structure.20Definitions.20to.20FSH.html#217320255">(Nov 19 2020 at 19:41)</a>:</h4>
<p>right ... makes sense. Any class annotation / class documentation would however be helpful</p>



<a name="217320502"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Reverse%20Engineer%20Structure%20Definitions%20to%20FSH/near/217320502" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Reverse.20Engineer.20Structure.20Definitions.20to.20FSH.html#217320502">(Nov 19 2020 at 19:43)</a>:</h4>
<p><span class="user-mention" data-user-id="222054">@Gino Canessa</span> an annotation of mine (just as an example, to make your head spin):</p>
<p>Category message invariant:</p>
<p><code> category.coding.code = 'message' implies (recipient.reference.contains('Patient/') and ( sender.reference.contains('Device/') or contained.ofType(Device).where('#' + id = %resource.sender.reference).empty().not() or extension.where(url = 'http://ehealth.sundhed.dk/fhir/StructureDefinition/ehealth-communication-senderCareTeam').valueReference.exists())) or (( extension.where(url = 'http://ehealth.sundhed.dk/fhir/StructureDefinition/ehealth-communication-recipientCareTeam').valueReference.exists()) and (sender.reference.contains('Patient/') or sender.reference.contains('Device/'))) or (extension.where(url = 'http://ehealth.sundhed.dk/fhir/StructureDefinition/ehealth-communication-recipientCareTeam').valueReference.exists() and extension.where(url = 'http://ehealth.sundhed.dk/fhir/StructureDefinition/ehealth-communication-senderCareTeam').valueReference.exists() )</code></p>



<a name="217321182"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Reverse%20Engineer%20Structure%20Definitions%20to%20FSH/near/217321182" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gino Canessa <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Reverse.20Engineer.20Structure.20Definitions.20to.20FSH.html#217321182">(Nov 19 2020 at 19:48)</a>:</h4>
<p>Yep.  I can see the value, just hadn't been added yet since none of the languages were using them.  The first step will be getting the invariants parsed (across all FHIR versions) and into a common set of models.</p>
<p>From there, it is straightforward to add <em>something</em> to export in various languages (e.g., annotations, FHIRpath strings, etc.).  But there is a long tail around functionality that would be possible (e.g., converting FHIRpath into language-appropriate validation checks using the exported model hierarchy).</p>



<a name="217321920"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Reverse%20Engineer%20Structure%20Definitions%20to%20FSH/near/217321920" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Reverse.20Engineer.20Structure.20Definitions.20to.20FSH.html#217321920">(Nov 19 2020 at 19:54)</a>:</h4>
<p>I agree - first step is simply to just generate  helper functions (at least in Java) in order to support extensions and associated mechanisms for codeableconcepts and such stuff I guess. I've previously given it a shot where the generation was based on top of HAPI FHIR classes as most Java FHIR devs will probably be using HAPI, and by using extended HAPI classes, everything just works out of the box.</p>



<a name="217322002"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Reverse%20Engineer%20Structure%20Definitions%20to%20FSH/near/217322002" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Reverse.20Engineer.20Structure.20Definitions.20to.20FSH.html#217322002">(Nov 19 2020 at 19:55)</a>:</h4>
<p>I actually came pretty far but realised that the need wasn't proportional with the effort of maintaining it</p>



<a name="217322044"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Reverse%20Engineer%20Structure%20Definitions%20to%20FSH/near/217322044" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Reverse.20Engineer.20Structure.20Definitions.20to.20FSH.html#217322044">(Nov 19 2020 at 19:55)</a>:</h4>
<p>and I eventually did abandon it</p>



<a name="217325018"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Reverse%20Engineer%20Structure%20Definitions%20to%20FSH/near/217325018" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gino Canessa <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Reverse.20Engineer.20Structure.20Definitions.20to.20FSH.html#217325018">(Nov 19 2020 at 20:19)</a>:</h4>
<p>That's one of the primary drivers for the project - by separating out the parsing and normalizing everything (which still has to be done, but that's generally me), the language exports are a lot less work to maintain.  Hopefully as it matures, we can build more extended / fun things (e.g., I was playing with an export for cytoscape to use as visualization for the spec).</p>
<p>I'll ping you when I have the invariants added to the core, but it may be a little bit until I get there.</p>



<a name="233309091"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Reverse%20Engineer%20Structure%20Definitions%20to%20FSH/near/233309091" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Janaka Peiris <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Reverse.20Engineer.20Structure.20Definitions.20to.20FSH.html#233309091">(Apr 06 2021 at 12:26)</a>:</h4>
<p>I see a tool called "Hatchery", at <a href="https://github.com/HL7/fhir-shorthand/wiki/4.1-Hatchery">https://github.com/HL7/fhir-shorthand/wiki/4.1-Hatchery</a>.   <span class="user-mention" data-user-id="191469">@Chris Moesel</span> is this the same tool you were talking about ? But could not see any code checked in to download. Can you help ?</p>



<a name="233314867"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Reverse%20Engineer%20Structure%20Definitions%20to%20FSH/near/233314867" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Reverse.20Engineer.20Structure.20Definitions.20to.20FSH.html#233314867">(Apr 06 2021 at 13:07)</a>:</h4>
<p>if you are looking for a tool to go from FHIR structuredefinitions to FSH then it is GoFSH: <a href="https://github.com/FHIR/GoFSH">https://github.com/FHIR/GoFSH</a>. (documentation is here: <a href="https://fshschool.org/docs/gofsh/">https://fshschool.org/docs/gofsh/</a>)</p>



<a name="233370330"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Reverse%20Engineer%20Structure%20Definitions%20to%20FSH/near/233370330" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Reverse.20Engineer.20Structure.20Definitions.20to.20FSH.html#233370330">(Apr 06 2021 at 18:54)</a>:</h4>
<p><span class="user-mention" data-user-id="192166">@Jean Duteau</span> is exactly right.  Hatchery was the early concept name for it, but we eventually ended up calling it GoFSH.  That Wiki is fairly outdated at this point.  We need to update it or retire it.  Thanks for the reminder!</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
