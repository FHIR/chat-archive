---
layout: page
title: "FHIR Chat  · Defining a Max binding? · shorthand"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/index.html">shorthand</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Defining.20a.20Max.20binding.3F.html">Defining a Max binding?</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="193809256"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Defining%20a%20Max%20binding%3F/near/193809256" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Defining.20a.20Max.20binding.3F.html#193809256">(Apr 13 2020 at 19:15)</a>:</h4>
<p>Is there an easy way to define a max binding on a coded value?  If not, what would be the non-easy way to do this?</p>



<a name="193809722"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Defining%20a%20Max%20binding%3F/near/193809722" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Keith Boone <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Defining.20a.20Max.20binding.3F.html#193809722">(Apr 13 2020 at 19:19)</a>:</h4>
<p>I used to know what that means, but have forgotten.  What does it mean?</p>



<a name="193810066"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Defining%20a%20Max%20binding%3F/near/193810066" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Defining.20a.20Max.20binding.3F.html#193810066">(Apr 13 2020 at 19:22)</a>:</h4>
<p>the max binding defines the full set of codes that you'd accept with your actual binding being the preferred (or extensible) set of codes that you want<br>
the common example is language where the binding is CommonLanguages with a MaxBinding of AllLanguages.<br>
in my case, I have a Condition representing Anaphylaxis so I have a set of SNOMED and ICD-10-CM codes that represent Anaphylaxis.  I have Condition.code with a preferred binding to this value set, because we might miss some but I want to ensure that if you do send me a code, that you are restricted to the US Core Condition Code value set.</p>



<a name="193810841"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Defining%20a%20Max%20binding%3F/near/193810841" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Freiter <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Defining.20a.20Max.20binding.3F.html#193810841">(Apr 13 2020 at 19:29)</a>:</h4>
<p>In this example from US Core, <a href="https://build.fhir.org/ig/HL7/US-Core-R4/StructureDefinition-us-core-documentreference.html" title="https://build.fhir.org/ig/HL7/US-Core-R4/StructureDefinition-us-core-documentreference.html">https://build.fhir.org/ig/HL7/US-Core-R4/StructureDefinition-us-core-documentreference.html</a>, the <code>DocumentReference.type</code> element has a Min binding on it, here is how you would accomplish that with FSH:</p>
<div class="codehilite"><pre><span></span>Profile: MyDocReference
Parent: DocumentReference
* type ^binding.extension[1].url = &quot;http://hl7.org/fhir/StructureDefinition/elementdefinition-minValueSet&quot;
* type ^binding.extension[1].valueCanonical = &quot;http://hl7.org/fhir/us/core/ValueSet/us-core-clinical-note-type&quot;
</pre></div>


<p>You have to use the ^ syntax to directly operate on the <code>type</code> element. The extension is not being placed on an element in the Structure Definition, but rather on a field within the <code>type</code> element itself. I think you'd want to do something very similar to set a max binding.</p>



<a name="193811020"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Defining%20a%20Max%20binding%3F/near/193811020" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Defining.20a.20Max.20binding.3F.html#193811020">(Apr 13 2020 at 19:30)</a>:</h4>
<p><span class="user-mention" data-user-id="239822">@Nick Freiter</span> thanks, that looks perfect.</p>



<a name="193811824"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Defining%20a%20Max%20binding%3F/near/193811824" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Defining.20a.20Max.20binding.3F.html#193811824">(Apr 13 2020 at 19:37)</a>:</h4>
<p>BTW -- in the example above, <span class="user-mention" data-user-id="239822">@Nick Freiter</span> used <code>type ^binding.extension[1]</code> because <code>type</code> already had another extension on it in the US Core example.  Assuming max value is the only extension on your use case (<code>Condition.code</code>), you'd want to use: <code>code ^binding.extension[0]</code>...</p>



<a name="193828836"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Defining%20a%20Max%20binding%3F/near/193828836" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Hay <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Defining.20a.20Max.20binding.3F.html#193828836">(Apr 13 2020 at 22:20)</a>:</h4>
<p>Shouldn't the parent be the US-Core DocumentReference rather than the base DocumentReference then?</p>



<a name="193829098"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Defining%20a%20Max%20binding%3F/near/193829098" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Defining.20a.20Max.20binding.3F.html#193829098">(Apr 13 2020 at 22:22)</a>:</h4>
<p>no, he's showing us how you would replicate the US-Core DocReference in FSH</p>



<a name="193829565"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Defining%20a%20Max%20binding%3F/near/193829565" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Hay <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Defining.20a.20Max.20binding.3F.html#193829565">(Apr 13 2020 at 22:27)</a>:</h4>
<p>Ah - he left out the existing extension (from USCore) in the example above...</p>



<a name="193829583"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Defining%20a%20Max%20binding%3F/near/193829583" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Defining.20a.20Max.20binding.3F.html#193829583">(Apr 13 2020 at 22:27)</a>:</h4>
<p>yes</p>



<a name="193829824"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Defining%20a%20Max%20binding%3F/near/193829824" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Hay <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Defining.20a.20Max.20binding.3F.html#193829824">(Apr 13 2020 at 22:30)</a>:</h4>
<p>Just out of interest (and as I'm too lazy to check for myself) if the example HAD set the parent to USCore, would you still need to use the [1] indexer? (as the parent already had the extension on it) or could you leave it out (or use [0])...</p>



<a name="193830521"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Defining%20a%20Max%20binding%3F/near/193830521" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Defining.20a.20Max.20binding.3F.html#193830521">(Apr 13 2020 at 22:39)</a>:</h4>
<p>Actually, I just looked at the US Core DocumentReference and it looks like the minValueSet extension is the <em>only</em> extension on <code>type</code> in US Core -- so I don't know why <span class="user-mention" data-user-id="239822">@Nick Freiter</span> used the <code>[1]</code> indexer.  I suspect it was a copy/paste error.  Nick's example should have used <code>extension[0]</code>.</p>
<p>To answer <span class="user-mention" data-user-id="191321">@David Hay</span>'s question, if you declare US Core DocumentReference as your parent, you automatically inherit its constraints, so you get the minValueSet extension for free (whether you want it or not).  If you wanted to add a maxValueSet extension, you would need to use <code>extension[1]</code> because if you tried to use <code>extension[0]</code>, it would attempt to overwrite the existing extension (which is not allowed).</p>



<a name="193831007"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Defining%20a%20Max%20binding%3F/near/193831007" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Hay <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Defining.20a.20Max.20binding.3F.html#193831007">(Apr 13 2020 at 22:45)</a>:</h4>
<p>Thanks <span class="user-mention" data-user-id="191469">@Chris Moesel</span> !</p>



<a name="193852438"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Defining%20a%20Max%20binding%3F/near/193852438" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Keith Boone <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Defining.20a.20Max.20binding.3F.html#193852438">(Apr 14 2020 at 05:45)</a>:</h4>
<p>So if we put Max binding and min binding into FHIR Terms, the min = the preferred set, and the max = required set.  I would a) bind to a required value set (that's the max), and define that value set in terms of two other value sets: a) The preferred value set (the min), and b) everything else.  Creating an extension for Max doesn't establish an enforced constraint with existing tooling, which is perhaps why there's already a min extension rather than a max.  The min extension sort of does what I suggested using already existing value set mechanisms, but makes it clear that one of them is the MIN.</p>



<a name="193853734"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Defining%20a%20Max%20binding%3F/near/193853734" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Defining.20a.20Max.20binding.3F.html#193853734">(Apr 14 2020 at 06:13)</a>:</h4>
<p>min != preferred</p>



<a name="193853750"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Defining%20a%20Max%20binding%3F/near/193853750" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Defining.20a.20Max.20binding.3F.html#193853750">(Apr 14 2020 at 06:13)</a>:</h4>
<blockquote>
<p>Creating an extension for Max doesn't establish an enforced constraint with existing tooling</p>
</blockquote>
<p>yes it does</p>



<a name="193885650"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Defining%20a%20Max%20binding%3F/near/193885650" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Freiter <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Defining.20a.20Max.20binding.3F.html#193885650">(Apr 14 2020 at 11:59)</a>:</h4>
<p>I used the <code>[1]</code> indexer intentionally because the original base DocumentReference resource does have an existing extension on <code>type.binding</code>. The FSH I gave leaves this existing extension, while it appears this extension is overwritten in US Core. I didn't want to give FSH that overwrites the existing extension, so that is why there is a difference.</p>



<a name="193942977"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Defining%20a%20Max%20binding%3F/near/193942977" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Reece Adamson <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Defining.20a.20Max.20binding.3F.html#193942977">(Apr 14 2020 at 19:04)</a>:</h4>
<p>TIL, interesting thread.  I saw this previous discussion that discusses minValueSet and maxValueSet for those who want some more background: </p>
<p><a href="#narrow/stream/179202-terminology/topic/required.20binding.20meaning.20for.20source.20system" title="#narrow/stream/179202-terminology/topic/required.20binding.20meaning.20for.20source.20system">https://chat.fhir.org/#narrow/stream/179202-terminology/topic/required.20binding.20meaning.20for.20source.20system</a></p>



<a name="194540537"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Defining%20a%20Max%20binding%3F/near/194540537" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Kramer <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Defining.20a.20Max.20binding.3F.html#194540537">(Apr 18 2020 at 11:52)</a>:</h4>
<p>What if FSH offered something like this?</p>
<ul>
<li>foo from MyPreferredValueSet (preferred)</li>
<li>foo from MyMaxValueSet (max)</li>
</ul>



<a name="194548628"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Defining%20a%20Max%20binding%3F/near/194548628" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Defining.20a.20Max.20binding.3F.html#194548628">(Apr 18 2020 at 14:59)</a>:</h4>
<p>and </p>
<ul>
<li>foo from MyMinValueSet (min)</li>
</ul>



<a name="194597442"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Defining%20a%20Max%20binding%3F/near/194597442" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Kramer <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Defining.20a.20Max.20binding.3F.html#194597442">(Apr 19 2020 at 13:22)</a>:</h4>
<p>Submitted issue: <a href="https://github.com/FHIR/sushi/issues/371" title="https://github.com/FHIR/sushi/issues/371">https://github.com/FHIR/sushi/issues/371</a></p>



<a name="194675492"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Defining%20a%20Max%20binding%3F/near/194675492" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Defining.20a.20Max.20binding.3F.html#194675492">(Apr 20 2020 at 13:37)</a>:</h4>
<p>I think the question here is whether or not min/max VS are used enough to warrant adding them as a 1st-class feature of FSH.  For some reason, FHIR has chosen <em>not</em> to support them as 1st-class properties -- so why should FSH?  That's an honest question, with no negative connotation intended.</p>
<p>If they are not commonly used, including them in FSH may just make things more complicated/confusing for the 95% (???) of authors who don't use them -- as now you need to understand not only the differences between the normative bindings, but also the <code>min</code>/<code>max</code> bindings and understand which binding flavors can be applied concurrently and which ones cancel out previous values...  Again, not arguing against it, but trying to think of the implications of adding these to FSH grammar (as every feature you add to the grammar, by definition, increases the grammar's complexity).</p>



<a name="194701838"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Defining%20a%20Max%20binding%3F/near/194701838" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Kramer <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Defining.20a.20Max.20binding.3F.html#194701838">(Apr 20 2020 at 16:41)</a>:</h4>
<p>The issue is there to be racked and stacked against priority of other issues.</p>



<a name="194734421"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Defining%20a%20Max%20binding%3F/near/194734421" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Defining.20a.20Max.20binding.3F.html#194734421">(Apr 20 2020 at 21:14)</a>:</h4>
<blockquote>
<p>For some reason, FHIR has chosen not to support them as 1st-class properties</p>
</blockquote>
<p>It's on the plan for R5</p>



<a name="194734473"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Defining%20a%20Max%20binding%3F/near/194734473" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Defining.20a.20Max.20binding.3F.html#194734473">(Apr 20 2020 at 21:15)</a>:</h4>
<p>you need some strategy to avoid people having to say "I just can't use FSH because I need a min or max value set"</p>



<a name="194748644"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Defining%20a%20Max%20binding%3F/near/194748644" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Defining.20a.20Max.20binding.3F.html#194748644">(Apr 21 2020 at 00:17)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> said:</p>
<blockquote>
<p>you need some strategy to avoid people having to say "I just can't use FSH because I need a min or max value set"</p>
</blockquote>
<p>FSH supports it now via the same way FHIR does: by allowing the author to specify an extension.  So it's no harder in FSH than it currently is in FHIR.</p>
<p>This discussion was about whether we should make it even <em>easier</em> to do in FSH than in FHIR (by abstracting away the fact that it is an extension).  Knowing that FHIR R5 will support min / max VS more directly, I think it's easy to justify FSH adding special support in the grammar for it.  Thanks for that tidbit of info!</p>



<a name="194751003"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Defining%20a%20Max%20binding%3F/near/194751003" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Defining.20a.20Max.20binding.3F.html#194751003">(Apr 21 2020 at 00:54)</a>:</h4>
<p>I don't think it should be easier than that.</p>



<a name="194755567"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Defining%20a%20Max%20binding%3F/near/194755567" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Defining.20a.20Max.20binding.3F.html#194755567">(Apr 21 2020 at 02:32)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> -- I think I may be confused.  You said above that "It's on the plan for R5" regarding making min/max VS "1st-class properties".  So that sounds to me like FHIR is planning to make min/max VS easier to use.  But you also said "I don't think it should be easier than that" regarding the need to currently use extensions for min/max VS.  Did I misunderstand something?</p>



<a name="194756948"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Defining%20a%20Max%20binding%3F/near/194756948" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Defining.20a.20Max.20binding.3F.html#194756948">(Apr 21 2020 at 03:06)</a>:</h4>
<p>for now, you shouldn't make it easier. When we add multiple bindings in R5, then FSH should follow along.</p>



<a name="194756954"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/215610-shorthand/topic/Defining%20a%20Max%20binding%3F/near/194756954" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/215610-shorthand/topic/Defining.20a.20Max.20binding.3F.html#194756954">(Apr 21 2020 at 03:06)</a>:</h4>
<p>cause then we'll know what it looks like</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
