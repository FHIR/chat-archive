---
layout: page
title: "FHIR Chat  · scheduling / Issue #59 Prefetch issues: &quot;Smart Polling&quot;  ... · argonaut"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179175-argonaut/index.html">argonaut</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179175-argonaut/topic/scheduling.20.2F.20Issue.20.2359.20Prefetch.20issues.3A.20.22Smart.20Polling.22.20.20.2E.2E.2E.html">scheduling / Issue #59 Prefetch issues: &quot;Smart Polling&quot;  ...</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153931295"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179175-argonaut/topic/scheduling%20/%20Issue%20%2359%20Prefetch%20issues%3A%20%22Smart%20Polling%22%20%20.../near/153931295" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> argo-scheduling-bot <a href="https://fhir.github.io/chat-archive/stream/179175-argonaut/topic/scheduling.20.2F.20Issue.20.2359.20Prefetch.20issues.3A.20.22Smart.20Polling.22.20.20.2E.2E.2E.html#153931295">(Jan 27 2018 at 18:11)</a>:</h4>
<p>Healthedata1 opened <a href="https://github.com/argonautproject/scheduling/issues/59" target="_blank" title="https://github.com/argonautproject/scheduling/issues/59">Issue #59</a></p>
<blockquote>
<p>"Smart Polling"<br>
1. single operation for load, updates, reconciliation.<br>
     - inputs  providers and date range ( possible others)<br>
1.  initial load mode - give me everything<br>
     - max date ranges<br>
     - run periodically to reset or to resync<br>
     - minimum daily<br>
1.  server informs what changes<br>
     - Triggers<br>
        1. Schedule changes<br>
        1. Visit type changes?<br>
     - Suggested Approach is FHIR Subscription using Schedule<br>
     - Notifies<br>
        - date range<br>
           - often single day<br>
    - provider/facility/group (depending on system)<br>
        -  SHOULD be lowest schedulable entity<br>
        - time horizon needs to be defined by clients  - events beyond time horizon would be discarded.<br>
    - "heartbeat" every  frequency is site specific<br>
        - content: ?<br>
        - per location/facility<br>
    - on/off event service notification ??</p>
<p>example:  e.g., provider x gets 6 new appointments  get booked - EHR sends 6 notifications</p>
<p>Questions:  <br>
1.  Whether is technically a "feed" or FHIR Based sub/pub "Subscription." </p>
</blockquote>
<p>Design Pattern using a "Feed Handler" in the middle.</p>
<p>Long pull on the Feed Handler by many clients possible without burdening server.</p>
<div class="codehilite"><pre><span></span>1.  Does CapabilityStatement cover subscription events and plans.
</pre></div>



<a name="153931301"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179175-argonaut/topic/scheduling%20/%20Issue%20%2359%20Prefetch%20issues%3A%20%22Smart%20Polling%22%20%20.../near/153931301" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> argo-scheduling-bot <a href="https://fhir.github.io/chat-archive/stream/179175-argonaut/topic/scheduling.20.2F.20Issue.20.2359.20Prefetch.20issues.3A.20.22Smart.20Polling.22.20.20.2E.2E.2E.html#153931301">(Jan 27 2018 at 18:34)</a>:</h4>
<p>Healthedata1 <a href="https://github.com/argonautproject/scheduling/issues/59#issuecomment-361005276" target="_blank" title="https://github.com/argonautproject/scheduling/issues/59#issuecomment-361005276">commented</a> on <a href="https://github.com/argonautproject/scheduling/issues/59" target="_blank" title="https://github.com/argonautproject/scheduling/issues/59">Issue #59</a></p>
<blockquote>
<p>New Operation to differentiates from runtime fetch:</p>
<p>name <strong>Availability Prefetch</strong>  : <code>$prefetch</code></p>
<p>see the  attached figure for inputs.</p>
<p>output  (e.g., session limit example) server would apply to slots there logic prior to returning. </p>
<p>See similar language in $find</p>
</blockquote>



<a name="153931454"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179175-argonaut/topic/scheduling%20/%20Issue%20%2359%20Prefetch%20issues%3A%20%22Smart%20Polling%22%20%20.../near/153931454" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> argo-scheduling-bot <a href="https://fhir.github.io/chat-archive/stream/179175-argonaut/topic/scheduling.20.2F.20Issue.20.2359.20Prefetch.20issues.3A.20.22Smart.20Polling.22.20.20.2E.2E.2E.html#153931454">(Jan 27 2018 at 21:37)</a>:</h4>
<p>Healthedata1 <a href="https://github.com/argonautproject/scheduling/issues/59#issuecomment-361017193" target="_blank" title="https://github.com/argonautproject/scheduling/issues/59#issuecomment-361017193">commented</a> on <a href="https://github.com/argonautproject/scheduling/issues/59" target="_blank" title="https://github.com/argonautproject/scheduling/issues/59">Issue #59</a></p>
<blockquote>
<p>See <a href="https://docs.google.com/document/d/1P8yLaXp9aE1rxM8-ey9-7x-VCwwdmGmOASx9vuq1Ius/edit?usp=sharing" target="_blank" title="https://docs.google.com/document/d/1P8yLaXp9aE1rxM8-ey9-7x-VCwwdmGmOASx9vuq1Ius/edit?usp=sharing">https://docs.google.com/document/d/1P8yLaXp9aE1rxM8-ey9-7x-VCwwdmGmOASx9vuq1Ius/edit?usp=sharing</a>  for PreFetch output content and guidance.</p>
</blockquote>



<a name="153932253"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179175-argonaut/topic/scheduling%20/%20Issue%20%2359%20Prefetch%20issues%3A%20%22Smart%20Polling%22%20%20.../near/153932253" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> argo-scheduling-bot <a href="https://fhir.github.io/chat-archive/stream/179175-argonaut/topic/scheduling.20.2F.20Issue.20.2359.20Prefetch.20issues.3A.20.22Smart.20Polling.22.20.20.2E.2E.2E.html#153932253">(Jan 28 2018 at 20:42)</a>:</h4>
<p>Healthedata1 <a href="https://github.com/argonautproject/scheduling/issues/59#issuecomment-361094107" target="_blank" title="https://github.com/argonautproject/scheduling/issues/59#issuecomment-361094107">commented</a> on <a href="https://github.com/argonautproject/scheduling/issues/59" target="_blank" title="https://github.com/argonautproject/scheduling/issues/59">Issue #59</a></p>
<blockquote>
<p>for hold and book:<br>
<strong>POST</strong> Appt<br>
  - equivalent to $hold = with slots ids, status of <strong>pending</strong> , patient optional<br>
  - client needs to create or fetch patient first and server should return a valid<br>
    - server return valid id  or reject if slots not available, etc<br>
   patient id  e.g. server side conditional create (server side impementation )<br>
  - equivalent to $book = with slots ids,status of <strong>booked</strong> and patient as referencer<br>
  - server return valid id  or reject if slots not available, etc</p>
</blockquote>



<a name="153932257"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179175-argonaut/topic/scheduling%20/%20Issue%20%2359%20Prefetch%20issues%3A%20%22Smart%20Polling%22%20%20.../near/153932257" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> argo-scheduling-bot <a href="https://fhir.github.io/chat-archive/stream/179175-argonaut/topic/scheduling.20.2F.20Issue.20.2359.20Prefetch.20issues.3A.20.22Smart.20Polling.22.20.20.2E.2E.2E.html#153932257">(Jan 28 2018 at 20:44)</a>:</h4>
<p>Healthedata1 <a href="https://github.com/argonautproject/scheduling/issues/59#issuecomment-361094252" target="_blank" title="https://github.com/argonautproject/scheduling/issues/59#issuecomment-361094252">commented</a> on <a href="https://github.com/argonautproject/scheduling/issues/59" target="_blank" title="https://github.com/argonautproject/scheduling/issues/59">Issue #59</a></p>
<blockquote>
<p>implement</p>
</blockquote>



<a name="153937020"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179175-argonaut/topic/scheduling%20/%20Issue%20%2359%20Prefetch%20issues%3A%20%22Smart%20Polling%22%20%20.../near/153937020" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> argo-scheduling-bot <a href="https://fhir.github.io/chat-archive/stream/179175-argonaut/topic/scheduling.20.2F.20Issue.20.2359.20Prefetch.20issues.3A.20.22Smart.20Polling.22.20.20.2E.2E.2E.html#153937020">(Feb 13 2018 at 01:56)</a>:</h4>
<p>Healthedata1 <a href="https://github.com/argonautproject/scheduling/issues/59#issuecomment-365125978" target="_blank" title="https://github.com/argonautproject/scheduling/issues/59#issuecomment-365125978">commented</a> on <a href="https://github.com/argonautproject/scheduling/issues/59" target="_blank" title="https://github.com/argonautproject/scheduling/issues/59">Issue #59</a></p>
<blockquote>
<p>### Issues with current way Subscription works and what was discussed for updating slots.</p>
<p>From above</p>
<ul>
<li>
<p>Subscribe to receive notification of changes to free slots from server.  Each notification needs to contain the date and provider id (lowest schedulable entity) so that the client can refetch that day's worth of slots for that actor.</p>
</li>
<li>
<p>We talked about using Schedule and I am unclear how that would work with the existing FHIR Subscription resource.</p>
</li>
<li>
<p>Here is what I propose:<br>
     - Option 1  <br>
       -  Can add extension topic extension to subscription to describe event ( I hope something like it will be in the next release of FHIR)<br>
       -  output slot from which the date and actor can be obtained.</p>
</li>
</ul>
<div class="codehilite"><pre><span></span>   Example:

   The app creates a Subscription on the EHR&#39;s FHIR server for the given EventDefinition
   ~~~
   POST &lt;fhir base url&gt;/Subscription

   {
     &quot;resourceType&quot;: &quot;Subscription&quot;,
     &quot;extension&quot;: {[
    &quot;url&quot;: &quot;[argo-scheduling-url]subscription-topic&quot;,
    &quot;valueString&quot;: {trigger notification when free slots change}
        ]
     }
     &quot;channel&quot;: {
       &quot;type&quot;: &quot;rest-hook&quot;,
       &quot;endpoint&quot;: &quot;[prefetch endpoint]&quot;,
       &quot;payload&quot;: &quot;application/fhir+json&quot;
     }
   }
   ~~~

   EHR notifies app of change
   ~~~
   PUT &lt;app notification endpoint&gt;/free-slot-change/Slot

   {
          &quot;resourceType&quot;: &quot;Slot&quot;,
          &quot;id&quot;: &quot;example&quot;,
          &quot;text&quot;: {
            &quot;status&quot;: &quot;generated&quot;,
            &quot;div&quot;: &quot;&lt;div xmlns=\&quot;http://www.w3.org/1999/xhtml\&quot;&gt;\n\t\t\t25 Dec 2013 9:15am - 9:30am: &lt;b&gt;Busy&lt;/b&gt; Physiotherapy\n\t\t&lt;/div&gt;&quot;
          },
          &quot;serviceCategory&quot;: {
            &quot;coding&quot;: [
              {
                &quot;code&quot;: &quot;17&quot;,
                &quot;display&quot;: &quot;General Practice&quot;
              }
            ]
          },
          &quot;serviceType&quot;: [
            {
              &quot;coding&quot;: [
                {
                  &quot;code&quot;: &quot;57&quot;,
                  &quot;display&quot;: &quot;Immunization&quot;
                }
              ]
            }
          ],
          &quot;specialty&quot;: [
            {
              &quot;coding&quot;: [
                {
                  &quot;code&quot;: &quot;408480009&quot;,
                  &quot;display&quot;: &quot;Clinical immunology&quot;
                }
              ]
            }
          ],
          &quot;appointmentType&quot;: {
            &quot;coding&quot;: [
              {
                &quot;system&quot;: &quot;http://hl7.org/fhir/v2/0276&quot;,
                &quot;code&quot;: &quot;WALKIN&quot;,
                &quot;display&quot;: &quot;A previously unscheduled walk-in visit&quot;
              }
            ]
          },
          &quot;schedule&quot;: {
            &quot;reference&quot;: &quot;Schedule/example&quot;
          },
          &quot;status&quot;: &quot;busy&quot;,
          &quot;start&quot;: &quot;2013-12-25T09:15:00Z&quot;,
          &quot;end&quot;: &quot;2013-12-25T09:30:00Z&quot;,
          &quot;comment&quot;: &quot;Assessments should be performed before requesting appointments in this slot.&quot;
        }
         ~~~

       - Option 2 can simply describe how the subscription service should behave
       - Other suggestions?
</pre></div>


</blockquote>



<a name="153945198"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179175-argonaut/topic/scheduling%20/%20Issue%20%2359%20Prefetch%20issues%3A%20%22Smart%20Polling%22%20%20.../near/153945198" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> argo-scheduling-bot <a href="https://fhir.github.io/chat-archive/stream/179175-argonaut/topic/scheduling.20.2F.20Issue.20.2359.20Prefetch.20issues.3A.20.22Smart.20Polling.22.20.20.2E.2E.2E.html#153945198">(Mar 15 2018 at 18:37)</a>:</h4>
<p>Healthedata1 <a href="https://github.com/argonautproject/scheduling/issues/59#issuecomment-373480784" target="_blank" title="https://github.com/argonautproject/scheduling/issues/59#issuecomment-373480784">commented</a> on <a href="https://github.com/argonautproject/scheduling/issues/59" target="_blank" title="https://github.com/argonautproject/scheduling/issues/59">Issue #59</a></p>
<blockquote>
<p>Option 2: </p>
<p>Will trigger on Slots but send the Schedule ( referenced in the triggering Slot.schedule) in the notification payload.</p>
</blockquote>



<a name="153946108"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179175-argonaut/topic/scheduling%20/%20Issue%20%2359%20Prefetch%20issues%3A%20%22Smart%20Polling%22%20%20.../near/153946108" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> argo-scheduling-bot <a href="https://fhir.github.io/chat-archive/stream/179175-argonaut/topic/scheduling.20.2F.20Issue.20.2359.20Prefetch.20issues.3A.20.22Smart.20Polling.22.20.20.2E.2E.2E.html#153946108">(Mar 19 2018 at 04:43)</a>:</h4>
<p>Healthedata1 <a href="https://github.com/argonautproject/scheduling/issues/59#issuecomment-374099974" target="_blank" title="https://github.com/argonautproject/scheduling/issues/59#issuecomment-374099974">commented</a> on <a href="https://github.com/argonautproject/scheduling/issues/59" target="_blank" title="https://github.com/argonautproject/scheduling/issues/59">Issue #59</a></p>
<blockquote>
<p>applied to IG</p>
</blockquote>



<a name="153946109"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179175-argonaut/topic/scheduling%20/%20Issue%20%2359%20Prefetch%20issues%3A%20%22Smart%20Polling%22%20%20.../near/153946109" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> argo-scheduling-bot <a href="https://fhir.github.io/chat-archive/stream/179175-argonaut/topic/scheduling.20.2F.20Issue.20.2359.20Prefetch.20issues.3A.20.22Smart.20Polling.22.20.20.2E.2E.2E.html#153946109">(Mar 19 2018 at 04:43)</a>:</h4>
<p>Healthedata1 closed <a href="https://github.com/argonautproject/scheduling/issues/59" target="_blank" title="https://github.com/argonautproject/scheduling/issues/59">Issue #59</a></p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
