---
layout: page
title: "FHIR Chat  · Subscribing to events · argonaut"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179175-argonaut/index.html">argonaut</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179175-argonaut/topic/Subscribing.20to.20events.html">Subscribing to events</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="164643059"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179175-argonaut/topic/Subscribing%20to%20events/near/164643059" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179175-argonaut/topic/Subscribing.20to.20events.html#164643059">(May 01 2019 at 18:01)</a>:</h4>
<p>There are three concepts to a subscription that can easily be conflated:<br>
1. The subject of a subscription (e.g. a patient or any patient with a certain PCP)<br>
2. When you want to hear about that subject (e.g. when the patient has a new appointment or when a patient with that PCP is admitted)<br>
3. The content of the notification.  <br>
I think it behooves us to treat these as separate concepts and answer what we want before diving into the details of how to do it.</p>



<a name="164656255"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179175-argonaut/topic/Subscribing%20to%20events/near/164656255" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179175-argonaut/topic/Subscribing.20to.20events.html#164656255">(May 01 2019 at 20:45)</a>:</h4>
<p>Agree on separation of concerns here. I think (3) is the clearest -- or the least confusing with our current "payload" approach, though it's still interesting in its own right.</p>



<a name="164656334"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179175-argonaut/topic/Subscribing%20to%20events/near/164656334" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179175-argonaut/topic/Subscribing.20to.20events.html#164656334">(May 01 2019 at 20:46)</a>:</h4>
<p>For (1) and (2), the way I look at the world, "subject" is a bit slippery. It's clearer for me to think about an event stream (e.g., all events that match a specific definition like "admission") and then a series of filters that narrow things down (e.g, by subject, but possibly by diverse parameters, like time range, codes, etc).</p>



<a name="164656399"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179175-argonaut/topic/Subscribing%20to%20events/near/164656399" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179175-argonaut/topic/Subscribing.20to.20events.html#164656399">(May 01 2019 at 20:47)</a>:</h4>
<p>I'm still trying to articulate this properly, but <strong><a href="https://gist.github.com/jmandel/f57fda6ce92174af663abe13cbb4612e" target="_blank" title="https://gist.github.com/jmandel/f57fda6ce92174af663abe13cbb4612e">this gist is a start</a></strong>, in terms of how I'd think about breaking down the "events" (more or less your (2), <span class="user-mention" data-user-id="191936">@Michael Donnelly</span>) and "filters" (a generalization of your (1), <span class="user-mention" data-user-id="191936">@Michael Donnelly</span> ).</p>



<a name="164656490"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179175-argonaut/topic/Subscribing%20to%20events/near/164656490" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179175-argonaut/topic/Subscribing.20to.20events.html#164656490">(May 01 2019 at 20:48)</a>:</h4>
<p>(For those who haven't seen it, this is building on the "named event" approach that's <a href="https://confluence.hl7.org/pages/viewpage.action?pageId=46596101#id-2019-05SubscriptionsTrack-ExampleEventDefinitionextension" target="_blank" title="https://confluence.hl7.org/pages/viewpage.action?pageId=46596101#id-2019-05SubscriptionsTrack-ExampleEventDefinitionextension">being tested at connectathon</a>. You may have to "expand source" in Jira to see it properly.)</p>



<a name="164661356"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179175-argonaut/topic/Subscribing%20to%20events/near/164661356" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179175-argonaut/topic/Subscribing.20to.20events.html#164661356">(May 01 2019 at 21:54)</a>:</h4>
<p>Our system support event definition and subscriptions based on these user-definable queries:<br>
<a href="/user_uploads/10155/hYHCOjX-OKwDNrb8nseWTvHa/pasted_image.png" target="_blank" title="pasted_image.png">pasted image</a></p>
<div class="message_inline_image"><a href="/user_uploads/10155/hYHCOjX-OKwDNrb8nseWTvHa/pasted_image.png" target="_blank" title="pasted image"><img src="/user_uploads/10155/hYHCOjX-OKwDNrb8nseWTvHa/pasted_image.png"></a></div>



<a name="164661400"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179175-argonaut/topic/Subscribing%20to%20events/near/164661400" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179175-argonaut/topic/Subscribing.20to.20events.html#164661400">(May 01 2019 at 21:55)</a>:</h4>
<p>Can you help explain what "Wrap query" means <span class="user-mention" data-user-id="191912">@Michele Mottini</span> ?</p>



<a name="164661470"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179175-argonaut/topic/Subscribing%20to%20events/near/164661470" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179175-argonaut/topic/Subscribing.20to.20events.html#164661470">(May 01 2019 at 21:56)</a>:</h4>
<p>Also, if you have a chance to glance through my gist, whether this makes sense to you (and/or seems like a good direction)?</p>



<a name="164661501"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179175-argonaut/topic/Subscribing%20to%20events/near/164661501" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179175-argonaut/topic/Subscribing.20to.20events.html#164661501">(May 01 2019 at 21:56)</a>:</h4>
<p>oh I have no idea - there are a ton of options there I do not know how to use</p>



<a name="164661575"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179175-argonaut/topic/Subscribing%20to%20events/near/164661575" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179175-argonaut/topic/Subscribing.20to.20events.html#164661575">(May 01 2019 at 21:57)</a>:</h4>
<p>basically it is impossible to define those 'events' via FHIR in some reasonable way</p>



<a name="164661632"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179175-argonaut/topic/Subscribing%20to%20events/near/164661632" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179175-argonaut/topic/Subscribing.20to.20events.html#164661632">(May 01 2019 at 21:58)</a>:</h4>
<p>so what we are doing are just exposing them as List</p>



<a name="164661640"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179175-argonaut/topic/Subscribing%20to%20events/near/164661640" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179175-argonaut/topic/Subscribing.20to.20events.html#164661640">(May 01 2019 at 21:58)</a>:</h4>
<p>and then you can subscribe (via FHIR) to one of these List</p>



<a name="164661669"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179175-argonaut/topic/Subscribing%20to%20events/near/164661669" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179175-argonaut/topic/Subscribing.20to.20events.html#164661669">(May 01 2019 at 21:59)</a>:</h4>
<p>I wonder if that's an approach that could be of general use</p>



<a name="164661812"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179175-argonaut/topic/Subscribing%20to%20events/near/164661812" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179175-argonaut/topic/Subscribing.20to.20events.html#164661812">(May 01 2019 at 22:01)</a>:</h4>
<p>(I checked: wrap query is 'Except', 'Intersect', 'Union' - basically you can have a list of different filters there and 'Wrap query' tells the system how to combine them)</p>



<a name="164661918"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179175-argonaut/topic/Subscribing%20to%20events/near/164661918" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179175-argonaut/topic/Subscribing.20to.20events.html#164661918">(May 01 2019 at 22:03)</a>:</h4>
<p>(here is an example - Anticoagulant Therapy Surveillance:)<br>
<a href="/user_uploads/10155/fzCGnu5EpTk_D2mwa4LKftq6/pasted_image.png" target="_blank" title="pasted_image.png">pasted image</a></p>
<div class="message_inline_image"><a href="/user_uploads/10155/fzCGnu5EpTk_D2mwa4LKftq6/pasted_image.png" target="_blank" title="pasted image"><img src="/user_uploads/10155/fzCGnu5EpTk_D2mwa4LKftq6/pasted_image.png"></a></div>



<a name="164662609"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179175-argonaut/topic/Subscribing%20to%20events/near/164662609" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179175-argonaut/topic/Subscribing.20to.20events.html#164662609">(May 01 2019 at 22:14)</a>:</h4>
<p>Huh! So is all of that backed by EventDefinition? How does it represent "except" for instance?</p>



<a name="164666097"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179175-argonaut/topic/Subscribing%20to%20events/near/164666097" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179175-argonaut/topic/Subscribing.20to.20events.html#164666097">(May 01 2019 at 23:13)</a>:</h4>
<p>No, it is not backed by EventDefinition - it is totally not-FHIR</p>



<a name="164666171"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179175-argonaut/topic/Subscribing%20to%20events/near/164666171" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179175-argonaut/topic/Subscribing.20to.20events.html#164666171">(May 01 2019 at 23:14)</a>:</h4>
<p>and I don't think is feasible to define such a thing via FHIR - hence the idea that you keep defining them out of band and just publish them as List</p>



<a name="164669462"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179175-argonaut/topic/Subscribing%20to%20events/near/164669462" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179175-argonaut/topic/Subscribing.20to.20events.html#164669462">(May 02 2019 at 00:14)</a>:</h4>
<p>Gotcha -- thanks!</p>



<a name="164671599"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179175-argonaut/topic/Subscribing%20to%20events/near/164671599" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179175-argonaut/topic/Subscribing.20to.20events.html#164671599">(May 02 2019 at 01:03)</a>:</h4>
<p>I think that's a valid way of looking at it Josh, <del>but I'd like to explore a different angle and see if it works at all.</del>  </p>
<p><del>When an event occurs, it has two parts</del><br>
<del>A. The EventDefinition (the platonic form of the event)</del><br>
<del>B. Contextual data</del></p>



<a name="164671774"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179175-argonaut/topic/Subscribing%20to%20events/near/164671774" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179175-argonaut/topic/Subscribing.20to.20events.html#164671774">(May 02 2019 at 01:06)</a>:</h4>
<p><del>For ADT or scheduling events, the Encounter is the context.</del></p>



<a name="164671792"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179175-argonaut/topic/Subscribing%20to%20events/near/164671792" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179175-argonaut/topic/Subscribing.20to.20events.html#164671792">(May 02 2019 at 01:07)</a>:</h4>
<p><del>There are a bunch of indirect contextual data as well: the Patient for the Encounter, the Location where it occurs, the Practitioner for the attending provider.</del></p>



<a name="164671805"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179175-argonaut/topic/Subscribing%20to%20events/near/164671805" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179175-argonaut/topic/Subscribing.20to.20events.html#164671805">(May 02 2019 at 01:07)</a>:</h4>
<p><del>Another layer deeper, we have the Patient's PCP, etc.</del></p>



<a name="164671978"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179175-argonaut/topic/Subscribing%20to%20events/near/164671978" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179175-argonaut/topic/Subscribing.20to.20events.html#164671978">(May 02 2019 at 01:11)</a>:</h4>
<p>Now that I've started writing it out, I think my idea adds complexity without adding value.</p>



<a name="164672168"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179175-argonaut/topic/Subscribing%20to%20events/near/164672168" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179175-argonaut/topic/Subscribing.20to.20events.html#164672168">(May 02 2019 at 01:15)</a>:</h4>
<p>Your first two examples (each with its explicit EventDefinition and EventFilter) look great.  I believe it'd be clear to the client what it's asking for and what it'll get, and a system that already triggers v2 shouldn't have trouble with that.</p>



<a name="164672430"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179175-argonaut/topic/Subscribing%20to%20events/near/164672430" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179175-argonaut/topic/Subscribing.20to.20events.html#164672430">(May 02 2019 at 01:20)</a>:</h4>
<p>The <a href="https://gist.github.com/jmandel/f57fda6ce92174af663abe13cbb4612e#expressiveness" target="_blank" title="https://gist.github.com/jmandel/f57fda6ce92174af663abe13cbb4612e#expressiveness">Expressiveness</a> example makes perfect sense.  I think having named events like that is a good idea; easier for client developers to understand, fewer fiddly bits.  The status part <em>could</em> be problematic depending on the mapping involved and how much processing is involved in getting the %previous.status.</p>



<a name="164672467"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179175-argonaut/topic/Subscribing%20to%20events/near/164672467" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179175-argonaut/topic/Subscribing.20to.20events.html#164672467">(May 02 2019 at 01:21)</a>:</h4>
<p>...but since that'd be agreed upon ahead of time in a spec or IG, there's plenty of room to work that out ahead of time.</p>



<a name="164672787"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179175-argonaut/topic/Subscribing%20to%20events/near/164672787" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179175-argonaut/topic/Subscribing.20to.20events.html#164672787">(May 02 2019 at 01:27)</a>:</h4>
<p>Getting into <a href="https://gist.github.com/jmandel/f57fda6ce92174af663abe13cbb4612e#continuing-to-explore-expressiveness" target="_blank" title="https://gist.github.com/jmandel/f57fda6ce92174af663abe13cbb4612e#continuing-to-explore-expressiveness">Continuing to explore expressiveness</a> is thinner ice.  Instead of  the trigger being an EventDefinition based on an actual step in a workflow, the trigger is or could be perceived to be based on a change to a datum.</p>



<a name="164672864"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179175-argonaut/topic/Subscribing%20to%20events/near/164672864" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179175-argonaut/topic/Subscribing.20to.20events.html#164672864">(May 02 2019 at 01:28)</a>:</h4>
<p>Practically, if we needed to implement that, we'd take all the specific events in our system, put it through a generalization layer (for all events in a set) and then doing the filtering.</p>



<a name="164673583"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179175-argonaut/topic/Subscribing%20to%20events/near/164673583" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179175-argonaut/topic/Subscribing.20to.20events.html#164673583">(May 02 2019 at 01:45)</a>:</h4>
<p>Would it be too confusing if EventDefinitions could refer to other event definitions?  E.g.</p>
<div class="codehilite"><pre><span></span>{
  &quot;resourceType&quot;: &quot;EventDefinition&quot;,
  &quot;id&quot;: &quot;admission-by-patient&quot;,
  &quot;trigger&quot;: {
    &quot;type&quot;: &quot;named-event&quot;,
    &quot;name&quot;: &quot;admission-by-patient&quot;,
    &quot;condition&quot;: &quot;eventDefinition = &#39;EventDefinition/admission&#39; and eventFilter = &#39;EventFilter/by-patient&#39;&quot;
  }
}
</pre></div>



<a name="164673640"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179175-argonaut/topic/Subscribing%20to%20events/near/164673640" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179175-argonaut/topic/Subscribing.20to.20events.html#164673640">(May 02 2019 at 01:46)</a>:</h4>
<p>Then if we wanted a more general version for multiple events without the client having to explicitly make multiple subscriptions, we could do something like</p>
<div class="codehilite"><pre><span></span>{
  &quot;resourceType&quot;: &quot;EventDefinition&quot;,
  &quot;id&quot;: &quot;inpatient-status-change-by-patient&quot;,
  &quot;trigger&quot;: {
    &quot;type&quot;: &quot;named-event&quot;,
    &quot;name&quot;: &quot;inpatient-status-change-by-patient&quot;,
    &quot;condition&quot;: &quot;(eventDefinition = &#39;EventDefinition/admission&#39; or eventDefinition = &#39;EventDefinition/transfer&#39; or eventDefinition = &#39;EventDefinition/discharge&#39;) and eventFilter = &#39;EventFilter/by-patient&#39;&quot;
  }
}
</pre></div>



<a name="164673767"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179175-argonaut/topic/Subscribing%20to%20events/near/164673767" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179175-argonaut/topic/Subscribing.20to.20events.html#164673767">(May 02 2019 at 01:50)</a>:</h4>
<p>Before putting in that effort, I'd want a better idea of which clients actually wanted a set like that.  If it's common that clients want multiple event definitions and (understandably) don't want a separate subscription for each, we could let them specify multiple EventDefinitions in the triggers:</p>
<div class="codehilite"><pre><span></span>{
  &quot;resourceType&quot;: &quot;Subscription&quot;,
  &quot;triggerParameter&quot;: [
    {&quot;name&quot;: &quot;patientId&quot;, &quot;value&quot;: &quot;Patient/123&quot;}
  ],
  &quot;trigger&quot;: [{&quot;reference&quot;: &quot;EventDefinition/admission&quot;},
              {&quot;reference&quot;: &quot;EventDefinition/transfer&quot;},
              {&quot;reference&quot;: &quot;EventDefinition/discharge&quot;},
              {&quot;reference&quot;: &quot;EventFilter/by-patient&quot;}]
}
</pre></div>



<a name="164673785"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179175-argonaut/topic/Subscribing%20to%20events/near/164673785" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179175-argonaut/topic/Subscribing.20to.20events.html#164673785">(May 02 2019 at 01:51)</a>:</h4>
<p>With the EventDefinitions having OR logic, naturally.</p>



<a name="164674391"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179175-argonaut/topic/Subscribing%20to%20events/near/164674391" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179175-argonaut/topic/Subscribing.20to.20events.html#164674391">(May 02 2019 at 02:06)</a>:</h4>
<p>Ooh, I really like the final bit you arrived at there <span class="user-mention" data-user-id="191936">@Michael Donnelly</span>  -- this kind of thing is super practical and potentially could span across multiple resource types (encounter events and <code>EventDefinition/new-lab-result</code> or whatever, so there's a pool of Observations + Encounters that can be then filtered down <code>by-patient</code>).</p>



<a name="164674460"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179175-argonaut/topic/Subscribing%20to%20events/near/164674460" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179175-argonaut/topic/Subscribing.20to.20events.html#164674460">(May 02 2019 at 02:08)</a>:</h4>
<p>(Separately: the joining of EventDefinitions like:</p>
<blockquote>
<div class="codehilite"><pre><span></span>&quot;condition&quot;: &quot;eventDefinition = &#39;EventDefinition/admission&#39; and eventFilter = &#39;EventFilter/by-patient&#39;&quot;
</pre></div>


<p>confuses me a bit, because I was assuming that the "condition" would be a valid FHIRpath expression over some input resource, and if I think about what you wrote here:</p>
</blockquote>
<p>1. My head hurts, and <br>
2. It would seem to emit  stream of EventDefinitions rather than a stream of events)</p>



<a name="164674547"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179175-argonaut/topic/Subscribing%20to%20events/near/164674547" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179175-argonaut/topic/Subscribing.20to.20events.html#164674547">(May 02 2019 at 02:10)</a>:</h4>
<p>I think it ends up not being worth it anyway; if clients can assemble their own set of EventDefinitions in the Subscription itself, the need for combo EventDefinitions isn't crucial.</p>



<a name="164674558"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179175-argonaut/topic/Subscribing%20to%20events/near/164674558" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179175-argonaut/topic/Subscribing.20to.20events.html#164674558">(May 02 2019 at 02:10)</a>:</h4>
<p>And I totally agree; no reason why a client couldn't put as many EventDefinitions into the same Subscription as long as they all use the same EventFilter.</p>



<a name="164674693"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179175-argonaut/topic/Subscribing%20to%20events/near/164674693" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179175-argonaut/topic/Subscribing.20to.20events.html#164674693">(May 02 2019 at 02:14)</a>:</h4>
<p>I'm stealing your example for my gist :)</p>



<a name="164675028"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179175-argonaut/topic/Subscribing%20to%20events/near/164675028" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179175-argonaut/topic/Subscribing.20to.20events.html#164675028">(May 02 2019 at 02:23)</a>:</h4>
<p>Added <a href="https://gist.github.com/jmandel/f57fda6ce92174af663abe13cbb4612e#the-rules" target="_blank" title="https://gist.github.com/jmandel/f57fda6ce92174af663abe13cbb4612e#the-rules">"The Rules"</a> and incorporated your example below, <span class="user-mention" data-user-id="191936">@Michael Donnelly</span>.</p>



<a name="164676533"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179175-argonaut/topic/Subscribing%20to%20events/near/164676533" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179175-argonaut/topic/Subscribing.20to.20events.html#164676533">(May 02 2019 at 03:02)</a>:</h4>
<p>That works.</p>



<a name="164676606"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179175-argonaut/topic/Subscribing%20to%20events/near/164676606" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179175-argonaut/topic/Subscribing.20to.20events.html#164676606">(May 02 2019 at 03:04)</a>:</h4>
<p>Good balance of letting servers base events off workflow rather than data model and giving clients the power to hear about the specific things that matter to them.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
