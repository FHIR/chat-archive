---
layout: page
title: "FHIR Chat  · Patient Operators, applicable in all data models? · cql"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179220-cql/index.html">cql</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Patient.20Operators.2C.20applicable.20in.20all.20data.20models.3F.html">Patient Operators, applicable in all data models?</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="166938806"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Patient%20Operators%2C%20applicable%20in%20all%20data%20models%3F/near/166938806" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Adam Rodriguez <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Patient.20Operators.2C.20applicable.20in.20all.20data.20models.3F.html#166938806">(May 30 2019 at 19:32)</a>:</h4>
<p>Hello <span class="user-mention" data-user-id="191359">@Bryn Rhodes</span> , <span class="user-mention" data-user-id="191469">@Chris Moesel</span> ,</p>
<p>Another inquiry today from me - this time about Patient operators and whether or not they are applicable to all data models.</p>
<p>Reference, section 5.8.4 in: <a href="https://cql.hl7.org/02-authorsguide.html#clinical-operators" target="_blank" title="https://cql.hl7.org/02-authorsguide.html#clinical-operators">https://cql.hl7.org/02-authorsguide.html#clinical-operators</a></p>
<p>I'm interested in creating an initial population of patients &lt;= 18 years of age.  I see that there are operators such as 'AgeInYearsAt(X)' and 'AgeInYears()' that are available.</p>
<p>For example, given that a MeasurementPeriod was pre-defined:</p>
<p><code>define InDemographic:
  AgeInYearsAt(start of MeasurementPeriod) &gt;= 16
    and AgeInYearsAt(start of MeasurementPeriod) &lt; 24</code></p>
<p>Questions:</p>
<p>1. If I were using the FHIR data model, would either 'AgeInYearsAt(X)' or 'AgeInYears()' inherently know to look for the Patient.birthDate path in FHIR?<br>
2. If not, how would I incorporate the Patient.birthDate path into an Initial Population definition?<br>
As always, your time and guidance are much appreciated!<br>
Patient Operators, applicable in all data models?</p>



<a name="166941742"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Patient%20Operators%2C%20applicable%20in%20all%20data%20models%3F/near/166941742" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Patient.20Operators.2C.20applicable.20in.20all.20data.20models.3F.html#166941742">(May 30 2019 at 20:09)</a>:</h4>
<blockquote>
<p>1. If I were using the FHIR data model, would either 'AgeInYearsAt(X)' or 'AgeInYears()' inherently know to look for the Patient.birthDate path in FHIR?</p>
</blockquote>
<p>Yes.  The FHIR model info actually specifies the <code>patientBirthDatePropertyName</code> as seen here:<br>
<a href="https://github.com/cqframework/clinical_quality_language/blob/master/Src/java/quick/src/main/resources/org/hl7/fhir/fhir-modelinfo-3.0.0.xml#L8" target="_blank" title="https://github.com/cqframework/clinical_quality_language/blob/master/Src/java/quick/src/main/resources/org/hl7/fhir/fhir-modelinfo-3.0.0.xml#L8">https://github.com/cqframework/clinical_quality_language/blob/master/Src/java/quick/src/main/resources/org/hl7/fhir/fhir-modelinfo-3.0.0.xml#L8</a><br>
CQL uses this information to support the age-based queries.  The CQL spec discusses this feature here:<br>
<a href="https://cql.hl7.org/07-physicalrepresentation.html#data-model-references" target="_blank" title="https://cql.hl7.org/07-physicalrepresentation.html#data-model-references">https://cql.hl7.org/07-physicalrepresentation.html#data-model-references</a></p>
<blockquote>
<p>2. If not, how would I incorporate the Patient.birthDate path into an Initial Population definition?</p>
</blockquote>
<p>As noted above, you'll get this for free.  But if you're interested in how you'd do it otherwise, you can use the <code>CalculateAgeIn[X]At</code> functions as specified here:<br>
<a href="https://cql.hl7.org/09-b-cqlreference.html#calculateage" target="_blank" title="https://cql.hl7.org/09-b-cqlreference.html#calculateage">https://cql.hl7.org/09-b-cqlreference.html#calculateage</a></p>
<div class="codehilite"><pre><span></span>define InDemographic:
  CalculateAgeInYearsAt(Patient.birthDate.value, start of MeasurementPeriod) &gt;= 16
    and CalculateAgeInYearsAt(Patient.birthDate.value, start of MeasurementPeriod) &lt; 24
</pre></div>



<a name="166961345"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Patient%20Operators%2C%20applicable%20in%20all%20data%20models%3F/near/166961345" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Adam Rodriguez <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Patient.20Operators.2C.20applicable.20in.20all.20data.20models.3F.html#166961345">(May 31 2019 at 01:51)</a>:</h4>
<p>Thank you <span class="user-mention" data-user-id="191469">@Chris Moesel</span>  for the great explanation.  Knowing the "long form" version of calculating age is great to keep in my back pocket. Though, I think I'll take advantage of the patient operators whenever possible :)</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
