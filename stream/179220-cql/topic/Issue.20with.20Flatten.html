---
layout: page
title: "FHIR Chat  · Issue with Flatten · cql"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179220-cql/index.html">cql</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Issue.20with.20Flatten.html">Issue with Flatten</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="233716548"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Issue%20with%20Flatten/near/233716548" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Christa Wan <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Issue.20with.20Flatten.html#233716548">(Apr 08 2021 at 19:45)</a>:</h4>
<p>When I try to flatten the list  { { 1, 2, 3 }, 2, 3, 4 }, I should get {1, 2, 3, 2, 3, 4}, but instead, when I run the following code:  </p>
<div class="codehilite"><pre><span></span><code>define &quot;Flatten Lists and Elements&quot;:
  flatten { { 1, 2, 3 }, 2, 3, 4 }
</code></pre></div>
<p>I get a null value as a result. Does anyone know why?</p>



<a name="233720930"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Issue%20with%20Flatten/near/233720930" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Issue.20with.20Flatten.html#233720930">(Apr 08 2021 at 20:16)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="400829">@Christa Wan</span> -- <code>flatten</code> is supposed to take a list of lists as its argument, but some of your list items are not lists.  That said, it seems that the CQL-to-ELM translator fixes this during translation by applying <code>ToList</code> to the single elements, so it <em>should</em> work anyway.  Which CQL engine are you using?</p>



<a name="233816883"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Issue%20with%20Flatten/near/233816883" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Christa Wan <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Issue.20with.20Flatten.html#233816883">(Apr 09 2021 at 13:05)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="191469">@Chris Moesel</span> ! Thank you for your answer - I am using the Atom CQL plug in.</p>



<a name="233817437"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Issue%20with%20Flatten/near/233817437" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Issue.20with.20Flatten.html#233817437">(Apr 09 2021 at 13:09)</a>:</h4>
<p><span class="user-mention" data-user-id="191359">@Bryn Rhodes</span> <span class="user-mention" data-user-id="194178">@JP</span> -- I think this one is for you...</p>



<a name="233846381"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Issue%20with%20Flatten/near/233846381" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Issue.20with.20Flatten.html#233846381">(Apr 09 2021 at 15:49)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="400829">@Christa Wan</span> , we are looking at this, and it should be working, the problem appears to be in the translator options. We'll update as soon as we have a solution here.</p>



<a name="233849251"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Issue%20with%20Flatten/near/233849251" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Issue.20with.20Flatten.html#233849251">(Apr 09 2021 at 16:07)</a>:</h4>
<p>We think it's related to this issue for the Atom plugin: <a href="https://github.com/cqframework/atom_cql_support/issues/19">https://github.com/cqframework/atom_cql_support/issues/19</a></p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
