---
layout: page
title: "FHIR Chat  · Java CQL Engine Error · cql"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179220-cql/index.html">cql</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Java.20CQL.20Engine.20Error.html">Java CQL Engine Error</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="197326835"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Java%20CQL%20Engine%20Error/near/197326835" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Benjamin Langley <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Java.20CQL.20Engine.20Error.html#197326835">(May 12 2020 at 19:32)</a>:</h4>
<p>Hello all,<br>
I'm attempting to use the Java CQL engine however I am getting an error whenever I try to access a property of a resource. For example<br>
<code>define CLAIM: [Claim]</code><br>
will return the Claim object. But when I do something like<br>
<code>define CLAIM: [Claim] C return C.id.value</code><br>
I get the following error</p>
<blockquote>
<p>WARNING: An illegal reflective access operation has occurred<br>
WARNING: Illegal reflective access by com.sun.xml.bind.v2.runtime.reflect.opt.Injector (file:/Users/blangley/.gradle/caches/modules-2/files-2.1/com.sun.xml.bind/jaxb-impl/2.3.0.1/2e979dabb3e5e74a0686115075956391a14dece8/jaxb-impl-2.3.0.1.jar) to method java.lang.ClassLoader.defineClass(java.lang.String,byte[],int,int)<br>
WARNING: Please consider reporting this to the maintainers of com.sun.xml.bind.v2.runtime.reflect.opt.Injector<br>
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations<br>
WARNING: All illegal access operations will be denied in a future release</p>
</blockquote>
<p>Which is coming from the line<br>
<code>CqlTranslator translator = CqlTranslator.fromText(this.cql, modelManager, libraryManager);</code></p>
<p>Does anyone know what is causing this or what I am doing wrong?<br>
Thanks!</p>



<a name="197330529"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Java%20CQL%20Engine%20Error/near/197330529" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Benjamin Langley <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Java.20CQL.20Engine.20Error.html#197330529">(May 12 2020 at 20:02)</a>:</h4>
<p>Correction: that error is happening from the translator but that is not the error from attempting to access a property of a resource. That error occurs when executing the CQL:</p>
<blockquote>
<p>Servlet.service() for servlet [dispatcherServlet] in context with path [/fhir] threw exception [Handler dispatch failed; nested exception is java.lang.NoSuchMethodError: ca/uhn/fhir/context/BaseRuntimeChildDefinition$IAccessor.getValues(Lorg/hl7/fhir/instance/model/api/IBase;)Ljava/util/List; (loaded from file:/Users/blangley/.gradle/caches/modules-2/files-2.1/ca.uhn.hapi.fhir/hapi-fhir-base/3.7.0/e31584e480341990c3faa6833782922106a77cef/hapi-fhir-base-3.7.0.jar by jdk.internal.loader.ClassLoaders$AppClassLoader@a8cf518a) called from class org.opencds.cqf.cql.model.FhirModelResolver (loaded from file:/Users/blangley/.gradle/caches/modules-2/files-2.1/org.opencds.cqf/cql-engine-fhir/1.3.12.1/e97627594b257806e4d0c89fe8274fd4f4941ff8/cql-engine-fhir-1.3.12.1.jar by jdk.internal.loader.ClassLoaders$AppClassLoader@a8cf518a).] with root cause</p>
<p>java.lang.NoSuchMethodError: ca/uhn/fhir/context/BaseRuntimeChildDefinition$IAccessor.getValues(Lorg/hl7/fhir/instance/model/api/IBase;)Ljava/util/List; (loaded from file:/Users/blangley/.gradle/caches/modules-2/files-2.1/ca.uhn.hapi.fhir/hapi-fhir-base/3.7.0/e31584e480341990c3faa6833782922106a77cef/hapi-fhir-base-3.7.0.jar by jdk.internal.loader.ClassLoaders$AppClassLoader@a8cf518a) called from class org.opencds.cqf.cql.model.FhirModelResolver (loaded from file:/Users/blangley/.gradle/caches/modules-2/files-2.1/org.opencds.cqf/cql-engine-fhir/1.3.12.1/e97627594b257806e4d0c89fe8274fd4f4941ff8/cql-engine-fhir-1.3.12.1.jar by jdk.internal.loader.ClassLoaders$AppClassLoader@a8cf518a).<br>
        at org.opencds.cqf.cql.model.FhirModelResolver.resolveProperty(FhirModelResolver.java:334) ~[cql-engine-fhir-1.3.12.1.jar:na]<br>
....</p>
</blockquote>



<a name="197351366"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Java%20CQL%20Engine%20Error/near/197351366" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Java.20CQL.20Engine.20Error.html#197351366">(May 12 2020 at 23:03)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="236429">@Benjamin Langley</span> , are you running this inside a ruler? Or standalone? What version of FHIR are you using in the CQL?</p>



<a name="197406367"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Java%20CQL%20Engine%20Error/near/197406367" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Benjamin Langley <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Java.20CQL.20Engine.20Error.html#197406367">(May 13 2020 at 12:44)</a>:</h4>
<p><span class="user-mention" data-user-id="191359">@Bryn Rhodes</span> I am running stand alone using FHIR 4.0.0</p>



<a name="197504926"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Java%20CQL%20Engine%20Error/near/197504926" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Java.20CQL.20Engine.20Error.html#197504926">(May 14 2020 at 04:20)</a>:</h4>
<p>Can you try this with the 1.4.0-SNAPSHOT?</p>



<a name="197505246"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Java%20CQL%20Engine%20Error/near/197505246" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Java.20CQL.20Engine.20Error.html#197505246">(May 14 2020 at 04:28)</a>:</h4>
<p>No, wait, looking at that stack, it looks like you're loading the 3.7 version of HAPI, but the 1.3.12.1 engine was built with HAPI 4.1, so you'll need at least that version to run</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
