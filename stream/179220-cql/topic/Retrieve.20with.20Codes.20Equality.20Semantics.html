---
layout: page
title: "FHIR Chat  · Retrieve with Codes Equality Semantics · cql"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179220-cql/index.html">cql</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Retrieve.20with.20Codes.20Equality.20Semantics.html">Retrieve with Codes Equality Semantics</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="182484470"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Retrieve%20with%20Codes%20Equality%20Semantics/near/182484470" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Kiel <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Retrieve.20with.20Codes.20Equality.20Semantics.html#182484470">(Dec 03 2019 at 19:14)</a>:</h4>
<p>The equivalent (~) operation compares codes only by system and code ignoring the version, were the equal (=) operation also compares for version. What equality semantics are used in retrieves with codes - equal or equivalent?</p>



<a name="182488505"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Retrieve%20with%20Codes%20Equality%20Semantics/near/182488505" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Retrieve.20with.20Codes.20Equality.20Semantics.html#182488505">(Dec 03 2019 at 19:55)</a>:</h4>
<p><span class="user-mention" data-user-id="191359">@Bryn Rhodes</span></p>



<a name="182489867"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Retrieve%20with%20Codes%20Equality%20Semantics/near/182489867" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Retrieve.20with.20Codes.20Equality.20Semantics.html#182489867">(Dec 03 2019 at 20:07)</a>:</h4>
<p><span class="user-mention" data-user-id="197470">@Alexander Kiel</span> -- I suppose the spec doesn't make it 100% clear, but I believe that retrieves are intended to use <em>equivalence</em>.  The behavior of a retrieve using a valueset is the same as using the <code>In (ValueSet)</code> function, which specifies that <em>equivalence</em> is used for codes and concepts (<a href="https://cql.hl7.org/09-b-cqlreference.html#in-valueset" target="_blank" title="https://cql.hl7.org/09-b-cqlreference.html#in-valueset">doc</a>).  And while it's just a passing reference, <a href="https://cql.hl7.org/02-authorsguide.html#filtering-with-terminology" target="_blank" title="https://cql.hl7.org/02-authorsguide.html#filtering-with-terminology">section 2.2</a> also states (when referring to an example):</p>
<blockquote>
<p>The "Get Condition from Code Declaration" expression returns conditions for the patient where the code is equivalent to the "Acute Pharyngitis Code" code.</p>
</blockquote>



<a name="182494131"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Retrieve%20with%20Codes%20Equality%20Semantics/near/182494131" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Retrieve.20with.20Codes.20Equality.20Semantics.html#182494131">(Dec 03 2019 at 20:55)</a>:</h4>
<p>Yes, it's implied, but you're right, never explicitly stated. I've submitted an STU comment to clarify this in the specification, as the intent is definitely to use equivalence semantics (and at least the Java-based engine does that currently).</p>



<a name="182494141"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Retrieve%20with%20Codes%20Equality%20Semantics/near/182494141" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Retrieve.20with.20Codes.20Equality.20Semantics.html#182494141">(Dec 03 2019 at 20:55)</a>:</h4>
<p><a href="http://www.hl7.org/dstucomments/showdetail_comment.cfm?commentid=1882" target="_blank" title="http://www.hl7.org/dstucomments/showdetail_comment.cfm?commentid=1882">http://www.hl7.org/dstucomments/showdetail_comment.cfm?commentid=1882</a></p>



<a name="182494215"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Retrieve%20with%20Codes%20Equality%20Semantics/near/182494215" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Kiel <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Retrieve.20with.20Codes.20Equality.20Semantics.html#182494215">(Dec 03 2019 at 20:55)</a>:</h4>
<p><span class="user-mention" data-user-id="191469">@Chris Moesel</span> Thanks. I also checked <a href="https://github.com/DBCG/cql_engine/blob/7c0be74090666a0d85859d283c2a649301fa10e9/cql-engine-fhir/src/main/java/org/opencds/cqf/cql/data/fhir/FhirDataProviderR4.java" target="_blank" title="https://github.com/DBCG/cql_engine/blob/7c0be74090666a0d85859d283c2a649301fa10e9/cql-engine-fhir/src/main/java/org/opencds/cqf/cql/data/fhir/FhirDataProviderR4.java">FhirDataProviderR4</a> and it also doesn't use the version. In addition to that, <a href="https://www.hl7.org/fhir/search.html#token" target="_blank" title="https://www.hl7.org/fhir/search.html#token">FHIR token search</a> also doesn't support version.</p>
<p>Ah thanks <span class="user-mention" data-user-id="191359">@Bryn Rhodes</span>  I see you comment while writing this. :-)</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
