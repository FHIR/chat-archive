---
layout: page
title: "FHIR Chat  · at the pointy end · cql"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179220-cql/index.html">cql</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/at.20the.20pointy.20end.html">at the pointy end</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153834956"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/at%20the%20pointy%20end/near/153834956" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Erich Schulz <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/at.20the.20pointy.20end.html#153834956">(Jun 26 2016 at 03:18)</a>:</h4>
<div class="codehilite"><pre> 22 //  system.interface.Retrieve({                                 
 23 //    type: &quot;Observation&quot;,                                      
 24 //    typeUri: &quot;http://hl7.org/fhir&quot;,                           
 25 //    codeProperty: &#39;code&#39;,                                     
 26 //    codes: priv[&#39;Systolic blood pressure&#39;](),                 
 27 //    dateProperty: &#39;effectiveDateTime.value&#39;,                  
 28 //    dateRange: ,                                              
 29 //    patient: context.patient.id                               
 30 //  })                                                          
 31                                                                 
 32   fhir.retrieve = function(params) {                            
 33     var patients = params.patient_id                            
 34       ? [params.patient_id] // wrap provided individual in []   
 35       : all_test_patients // no patient provided so grab all    
 36     // get array of resources                                   
 37     return multiPatientResourceByType(patients, params.type)    
 38     // apply the filter                                         
 39     .then(function (resources) {                                
 40       debug(&#39;resources&#39;, resources)                             
 41       return _.filter(resources, function(r) {                  
 42         return true // all for now                              
 43       })                                                        
 44     })                                                          
 45   }                                                             
</pre></div>



<a name="153834957"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/at%20the%20pointy%20end/near/153834957" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Erich Schulz <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/at.20the.20pointy.20end.html#153834957">(Jun 26 2016 at 03:20)</a>:</h4>
<p>lines 22 are what a call from the compiled CQL will look like</p>



<a name="153834958"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/at%20the%20pointy%20end/near/153834958" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Erich Schulz <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/at.20the.20pointy.20end.html#153834958">(Jun 26 2016 at 03:22)</a>:</h4>
<p>all I need to do now is apply the criteria given in lines 25-28 in a Boolean expression (to drop into line 42)</p>



<a name="153834960"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/at%20the%20pointy%20end/near/153834960" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Erich Schulz <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/at.20the.20pointy.20end.html#153834960">(Jun 26 2016 at 03:33)</a>:</h4>
<p>mmmm actually looking at the testdata that gives me the format i should follow...</p>



<a name="153834961"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/at%20the%20pointy%20end/near/153834961" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Erich Schulz <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/at.20the.20pointy.20end.html#153834961">(Jun 26 2016 at 03:34)</a>:</h4>
<div class="codehilite"><pre> &quot;code&quot;:{                                         
     &quot;coding&quot;:[{                                  
             &quot;system&quot;:&quot;http://loinc.org&quot;,         
             &quot;code&quot;:&quot;8310-5&quot;                      
         }],                                      
     &quot;text&quot;:&quot;Body Temperature&quot;                    
 },                                               
 &quot;subject&quot;:{&quot;reference&quot;:&quot;Patient/105738&quot;},        
 &quot;effectiveDateTime&quot;:&quot;2016-06-24T20:44:01+10:00&quot;,
</pre></div>



<a name="153834962"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/at%20the%20pointy%20end/near/153834962" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Erich Schulz <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/at.20the.20pointy.20end.html#153834962">(Jun 26 2016 at 05:15)</a>:</h4>
<p>mmm I guess I just look for an intersection between the code lists</p>



<a name="153834963"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/at%20the%20pointy%20end/near/153834963" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Erich Schulz <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/at.20the.20pointy.20end.html#153834963">(Jun 26 2016 at 05:16)</a>:</h4>
<p>the range thing is more complex due to uncertainty and funky range specs within cql...</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
