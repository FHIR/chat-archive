---
layout: page
title: "FHIR Chat  · BCSE MedicationDispense resource · cql"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179220-cql/index.html">cql</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/BCSE.20MedicationDispense.20resource.html">BCSE MedicationDispense resource</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="242771865"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/BCSE%20MedicationDispense%20resource/near/242771865" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vasyl Herman <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/BCSE.20MedicationDispense.20resource.html#242771865">(Jun 15 2021 at 17:46)</a>:</h4>
<p>Hello, I am testing the BCSE measure. The problem is that <code>Dementia Medications In Year Before or During Measurement Period</code> always returns <code>false</code> unless I set <code>[MedicationDispense]</code> instead of <code>[MedicationDispense: "Dementia Medications"]</code>. I have checked <code>vsac_cache/valueset-db.json</code> file and yes <code>314214</code> exists there. I am wondering what could be a problem. My Bandle? Please help!<br>
I am using <code>cql-execution</code> library. Everything worked fine unless I started to test <code>MedicationDispense</code>. I am not sure how the <code>type.conding</code> list works here.<br>
Here we have a piece of cql code:</p>
<div class="codehilite" data-code-language="Bash"><pre><span></span><code>library BCSe version <span class="s1">'0.0.1'</span>
using FHIR version <span class="s1">'4.0.1'</span>

valueset <span class="s2">"Dementia Medications"</span>: <span class="s1">'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.196.12.1510'</span>
parameter <span class="s2">"Measurement Period"</span> Interval&lt;DateTime&gt;

define <span class="s2">"Dementia Medications In Year Before or During Measurement Period"</span>:
  exists <span class="o">([</span>MedicationDispense: <span class="s2">"Dementia Medications"</span><span class="o">])</span>
</code></pre></div>
<p>I am trying to construct Patient bundle file like that:</p>
<div class="codehilite" data-code-language="Bash"><pre><span></span><code><span class="o">{</span>
  <span class="s2">"resourceType"</span>: <span class="s2">"Bundle"</span>,
  <span class="s2">"entry"</span>: <span class="o">[</span>
    <span class="o">{</span>
      <span class="s2">"resource"</span>: <span class="o">{</span>
        <span class="s2">"resourceType"</span>: <span class="s2">"Patient"</span>,
        <span class="s2">"id"</span>: <span class="s2">"97373"</span>,
        <span class="s2">"gender"</span>: <span class="s2">"female"</span>,
        <span class="s2">"birthDate"</span>: <span class="s2">"1952-01-20"</span>
      <span class="o">}</span>
    <span class="o">}</span>,
    <span class="o">{</span>
      <span class="s2">"resource"</span>: <span class="o">{</span>
        <span class="s2">"resourceType"</span>: <span class="s2">"MedicationDispense"</span>,
        <span class="s2">"id"</span>: <span class="s2">"286b7c84-60d6-4ab5-ad7f-571fa1f93051"</span>,
        <span class="s2">"type"</span>: <span class="o">{</span>
          <span class="s2">"coding"</span>: <span class="o">[</span>
            <span class="o">{</span>
              <span class="s2">"system"</span>: <span class="s2">"http://www.nlm.nih.gov/research/umls/rxnorm"</span>,
              <span class="s2">"code"</span>: <span class="s2">"314214"</span>
            <span class="o">}</span>
          <span class="o">]</span>
        <span class="o">}</span>,
        <span class="s2">"subject"</span>: <span class="o">{</span>
          <span class="s2">"reference"</span>: <span class="s2">"Patient/97373"</span>
        <span class="o">}</span>,
        <span class="s2">"whenHandedOver"</span>: <span class="s2">"2020-04-11"</span>
      <span class="o">}</span>
    <span class="o">}</span>
  <span class="o">]</span>
<span class="o">}</span>
</code></pre></div>



<a name="242780256"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/BCSE%20MedicationDispense%20resource/near/242780256" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vasyl Herman <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/BCSE.20MedicationDispense.20resource.html#242780256">(Jun 15 2021 at 18:44)</a>:</h4>
<p>Here is my <code>vsac_cache/valueset-db.json</code>:</p>
<div class="codehilite" data-code-language="Bash"><pre><span></span><code><span class="o">{</span>
  <span class="s2">"2.16.840.1.113883.3.464.1003.196.12.1510"</span>: <span class="o">{</span>
    <span class="s2">"Latest"</span>: <span class="o">{</span>
      <span class="s2">"oid"</span>: <span class="s2">"2.16.840.1.113883.3.464.1003.196.12.1510"</span>,
      <span class="s2">"version"</span>: <span class="s2">"Latest"</span>,
      <span class="s2">"codes"</span>: <span class="o">[</span>
        <span class="o">{</span>
          <span class="s2">"code"</span>: <span class="s2">"1100184"</span>,
          <span class="s2">"system"</span>: <span class="s2">"http://www.nlm.nih.gov/research/umls/rxnorm"</span>,
          <span class="s2">"version"</span>: <span class="s2">"2021-05"</span>
        <span class="o">}</span>,
        <span class="o">{</span>
          <span class="s2">"code"</span>: <span class="s2">"1308569"</span>,
          <span class="s2">"system"</span>: <span class="s2">"http://www.nlm.nih.gov/research/umls/rxnorm"</span>,
          <span class="s2">"version"</span>: <span class="s2">"2021-05"</span>
        <span class="o">}</span>,
        <span class="o">{</span>
          <span class="s2">"code"</span>: <span class="s2">"1599803"</span>,
          <span class="s2">"system"</span>: <span class="s2">"http://www.nlm.nih.gov/research/umls/rxnorm"</span>,
          <span class="s2">"version"</span>: <span class="s2">"2021-05"</span>
        <span class="o">}</span>,
        <span class="o">{</span>
          <span class="s2">"code"</span>: <span class="s2">"1599805"</span>,
          <span class="s2">"system"</span>: <span class="s2">"http://www.nlm.nih.gov/research/umls/rxnorm"</span>,
          <span class="s2">"version"</span>: <span class="s2">"2021-05"</span>
        <span class="o">}</span>,
        <span class="o">{</span>
          <span class="s2">"code"</span>: <span class="s2">"1805420"</span>,
          <span class="s2">"system"</span>: <span class="s2">"http://www.nlm.nih.gov/research/umls/rxnorm"</span>,
          <span class="s2">"version"</span>: <span class="s2">"2021-05"</span>
        <span class="o">}</span>,
        <span class="o">{</span>
          <span class="s2">"code"</span>: <span class="s2">"1805425"</span>,
          <span class="s2">"system"</span>: <span class="s2">"http://www.nlm.nih.gov/research/umls/rxnorm"</span>,
          <span class="s2">"version"</span>: <span class="s2">"2021-05"</span>
        <span class="o">}</span>,
        <span class="o">{</span>
          <span class="s2">"code"</span>: <span class="s2">"310436"</span>,
          <span class="s2">"system"</span>: <span class="s2">"http://www.nlm.nih.gov/research/umls/rxnorm"</span>,
          <span class="s2">"version"</span>: <span class="s2">"2021-05"</span>
        <span class="o">}</span>,
        <span class="o">{</span>
          <span class="s2">"code"</span>: <span class="s2">"310437"</span>,
          <span class="s2">"system"</span>: <span class="s2">"http://www.nlm.nih.gov/research/umls/rxnorm"</span>,
          <span class="s2">"version"</span>: <span class="s2">"2021-05"</span>
        <span class="o">}</span>,
        <span class="o">{</span>
          <span class="s2">"code"</span>: <span class="s2">"312835"</span>,
          <span class="s2">"system"</span>: <span class="s2">"http://www.nlm.nih.gov/research/umls/rxnorm"</span>,
          <span class="s2">"version"</span>: <span class="s2">"2021-05"</span>
        <span class="o">}</span>,
        <span class="o">{</span>
          <span class="s2">"code"</span>: <span class="s2">"312836"</span>,
          <span class="s2">"system"</span>: <span class="s2">"http://www.nlm.nih.gov/research/umls/rxnorm"</span>,
          <span class="s2">"version"</span>: <span class="s2">"2021-05"</span>
        <span class="o">}</span>,
        <span class="o">{</span>
          <span class="s2">"code"</span>: <span class="s2">"314214"</span>,
          <span class="s2">"system"</span>: <span class="s2">"http://www.nlm.nih.gov/research/umls/rxnorm"</span>,
          <span class="s2">"version"</span>: <span class="s2">"2021-05"</span>
        <span class="o">}</span>,
        <span class="o">{</span>
          <span class="s2">"code"</span>: <span class="s2">"314215"</span>,
          <span class="s2">"system"</span>: <span class="s2">"http://www.nlm.nih.gov/research/umls/rxnorm"</span>,
          <span class="s2">"version"</span>: <span class="s2">"2021-05"</span>
        <span class="o">}</span>,
        <span class="o">{</span>
          <span class="s2">"code"</span>: <span class="s2">"579148"</span>,
          <span class="s2">"system"</span>: <span class="s2">"http://www.nlm.nih.gov/research/umls/rxnorm"</span>,
          <span class="s2">"version"</span>: <span class="s2">"2021-05"</span>
        <span class="o">}</span>,
        <span class="o">{</span>
          <span class="s2">"code"</span>: <span class="s2">"725021"</span>,
          <span class="s2">"system"</span>: <span class="s2">"http://www.nlm.nih.gov/research/umls/rxnorm"</span>,
          <span class="s2">"version"</span>: <span class="s2">"2021-05"</span>
        <span class="o">}</span>,
        <span class="o">{</span>
          <span class="s2">"code"</span>: <span class="s2">"725023"</span>,
          <span class="s2">"system"</span>: <span class="s2">"http://www.nlm.nih.gov/research/umls/rxnorm"</span>,
          <span class="s2">"version"</span>: <span class="s2">"2021-05"</span>
        <span class="o">}</span>,
        <span class="o">{</span>
          <span class="s2">"code"</span>: <span class="s2">"860695"</span>,
          <span class="s2">"system"</span>: <span class="s2">"http://www.nlm.nih.gov/research/umls/rxnorm"</span>,
          <span class="s2">"version"</span>: <span class="s2">"2021-05"</span>
        <span class="o">}</span>,
        <span class="o">{</span>
          <span class="s2">"code"</span>: <span class="s2">"860707"</span>,
          <span class="s2">"system"</span>: <span class="s2">"http://www.nlm.nih.gov/research/umls/rxnorm"</span>,
          <span class="s2">"version"</span>: <span class="s2">"2021-05"</span>
        <span class="o">}</span>,
        <span class="o">{</span>
          <span class="s2">"code"</span>: <span class="s2">"860715"</span>,
          <span class="s2">"system"</span>: <span class="s2">"http://www.nlm.nih.gov/research/umls/rxnorm"</span>,
          <span class="s2">"version"</span>: <span class="s2">"2021-05"</span>
        <span class="o">}</span>,
        <span class="o">{</span>
          <span class="s2">"code"</span>: <span class="s2">"860901"</span>,
          <span class="s2">"system"</span>: <span class="s2">"http://www.nlm.nih.gov/research/umls/rxnorm"</span>,
          <span class="s2">"version"</span>: <span class="s2">"2021-05"</span>
        <span class="o">}</span>,
        <span class="o">{</span>
          <span class="s2">"code"</span>: <span class="s2">"996561"</span>,
          <span class="s2">"system"</span>: <span class="s2">"http://www.nlm.nih.gov/research/umls/rxnorm"</span>,
          <span class="s2">"version"</span>: <span class="s2">"2021-05"</span>
        <span class="o">}</span>,
        <span class="o">{</span>
          <span class="s2">"code"</span>: <span class="s2">"996571"</span>,
          <span class="s2">"system"</span>: <span class="s2">"http://www.nlm.nih.gov/research/umls/rxnorm"</span>,
          <span class="s2">"version"</span>: <span class="s2">"2021-05"</span>
        <span class="o">}</span>,
        <span class="o">{</span>
          <span class="s2">"code"</span>: <span class="s2">"996594"</span>,
          <span class="s2">"system"</span>: <span class="s2">"http://www.nlm.nih.gov/research/umls/rxnorm"</span>,
          <span class="s2">"version"</span>: <span class="s2">"2021-05"</span>
        <span class="o">}</span>,
        <span class="o">{</span>
          <span class="s2">"code"</span>: <span class="s2">"996603"</span>,
          <span class="s2">"system"</span>: <span class="s2">"http://www.nlm.nih.gov/research/umls/rxnorm"</span>,
          <span class="s2">"version"</span>: <span class="s2">"2021-05"</span>
        <span class="o">}</span>,
        <span class="o">{</span>
          <span class="s2">"code"</span>: <span class="s2">"996609"</span>,
          <span class="s2">"system"</span>: <span class="s2">"http://www.nlm.nih.gov/research/umls/rxnorm"</span>,
          <span class="s2">"version"</span>: <span class="s2">"2021-05"</span>
        <span class="o">}</span>,
        <span class="o">{</span>
          <span class="s2">"code"</span>: <span class="s2">"996615"</span>,
          <span class="s2">"system"</span>: <span class="s2">"http://www.nlm.nih.gov/research/umls/rxnorm"</span>,
          <span class="s2">"version"</span>: <span class="s2">"2021-05"</span>
        <span class="o">}</span>,
        <span class="o">{</span>
          <span class="s2">"code"</span>: <span class="s2">"996740"</span>,
          <span class="s2">"system"</span>: <span class="s2">"http://www.nlm.nih.gov/research/umls/rxnorm"</span>,
          <span class="s2">"version"</span>: <span class="s2">"2021-05"</span>
        <span class="o">}</span>,
        <span class="o">{</span>
          <span class="s2">"code"</span>: <span class="s2">"997220"</span>,
          <span class="s2">"system"</span>: <span class="s2">"http://www.nlm.nih.gov/research/umls/rxnorm"</span>,
          <span class="s2">"version"</span>: <span class="s2">"2021-05"</span>
        <span class="o">}</span>,
        <span class="o">{</span>
          <span class="s2">"code"</span>: <span class="s2">"997223"</span>,
          <span class="s2">"system"</span>: <span class="s2">"http://www.nlm.nih.gov/research/umls/rxnorm"</span>,
          <span class="s2">"version"</span>: <span class="s2">"2021-05"</span>
        <span class="o">}</span>,
        <span class="o">{</span>
          <span class="s2">"code"</span>: <span class="s2">"997226"</span>,
          <span class="s2">"system"</span>: <span class="s2">"http://www.nlm.nih.gov/research/umls/rxnorm"</span>,
          <span class="s2">"version"</span>: <span class="s2">"2021-05"</span>
        <span class="o">}</span>,
        <span class="o">{</span>
          <span class="s2">"code"</span>: <span class="s2">"997229"</span>,
          <span class="s2">"system"</span>: <span class="s2">"http://www.nlm.nih.gov/research/umls/rxnorm"</span>,
          <span class="s2">"version"</span>: <span class="s2">"2021-05"</span>
        <span class="o">}</span>
      <span class="o">]</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre></div>



<a name="242867228"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/BCSE%20MedicationDispense%20resource/near/242867228" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Ryan <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/BCSE.20MedicationDispense.20resource.html#242867228">(Jun 16 2021 at 11:31)</a>:</h4>
<p>(deleted)</p>



<a name="242949089"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/BCSE%20MedicationDispense%20resource/near/242949089" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/BCSE.20MedicationDispense.20resource.html#242949089">(Jun 16 2021 at 22:02)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="376706">@Vasyl Herman</span> , I suspect the problem is that the MedicationDispense has a choice type for the primary code path. Can you try putting an explicit code path in the retrieve:</p>
<div class="codehilite"><pre><span></span><code>[MedicationDispense: medication in &quot;Dementia Medications&quot;]
</code></pre></div>



<a name="243050054"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/BCSE%20MedicationDispense%20resource/near/243050054" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vasyl Herman <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/BCSE.20MedicationDispense.20resource.html#243050054">(Jun 17 2021 at 17:01)</a>:</h4>
<p>Thanks, it worked out!<br>
Could you please give me a clue how can I check what is default code path?</p>



<a name="243064451"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/BCSE%20MedicationDispense%20resource/near/243064451" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/BCSE.20MedicationDispense.20resource.html#243064451">(Jun 17 2021 at 18:41)</a>:</h4>
<p>There is documentation here: <a href="https://github.com/cqframework/clinical_quality_language/wiki/FHIRModelInfo#retrievable-types-r4">https://github.com/cqframework/clinical_quality_language/wiki/FHIRModelInfo#retrievable-types-r4</a></p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
