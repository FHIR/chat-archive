---
layout: page
title: "FHIR Chat  · Filtering queries with single code · cql"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179220-cql/index.html">cql</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Filtering.20queries.20with.20single.20code.html">Filtering queries with single code</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153953406"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Filtering%20queries%20with%20single%20code/near/153953406" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Carlson <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Filtering.20queries.20with.20single.20code.html#153953406">(Apr 20 2018 at 14:57)</a>:</h4>
<p>The current CQL spec indicates in section 2.2 that retrieve expressions can be filtered using a single code.  This works in <a href="http://cql-runner.dataphoria.org/" target="_blank" title="http://cql-runner.dataphoria.org/">http://cql-runner.dataphoria.org/</a> but fails with an error in the cql-to-elm tooling (built from either master or v13 branch in clinical_quality_language.  My example looks like this:</p>



<a name="153953408"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Filtering%20queries%20with%20single%20code/near/153953408" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Carlson <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Filtering.20queries.20with.20single.20code.html#153953408">(Apr 20 2018 at 14:58)</a>:</h4>
<p>codesystem "LOINC": '<a href="http://loinc.org" target="_blank" title="http://loinc.org">http://loinc.org</a>'</p>
<p>code "Body weight": '29463-7' from "LOINC"</p>
<p>define "Last Body Weight":<br>
  Last( [Observation: "Body weight"] )</p>



<a name="153953409"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Filtering%20queries%20with%20single%20code/near/153953409" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Carlson <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Filtering.20queries.20with.20single.20code.html#153953409">(Apr 20 2018 at 14:59)</a>:</h4>
<p>cql-to-elm tooling returns an error: Could not resolve membership operator for terminology target of the retrieve.</p>



<a name="153953484"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Filtering%20queries%20with%20single%20code/near/153953484" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Carlson <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Filtering.20queries.20with.20single.20code.html#153953484">(Apr 21 2018 at 03:47)</a>:</h4>
<p>Turns out that it is OK to ignore these errors, ELM xml was generated and executes as expected on cqf-ruler server.</p>



<a name="153953499"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Filtering%20queries%20with%20single%20code/near/153953499" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Filtering.20queries.20with.20single.20code.html#153953499">(Apr 22 2018 at 18:55)</a>:</h4>
<p>What that warning is saying is that the translator could not resolve an operator to deal with the filter inside the retrieve. It's only a warning because effectively, the data access layer is responsible for implementing that filter.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
