---
layout: page
title: "FHIR Chat  · CQL FHIR follow and read reference instead of searching · cql"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179220-cql/index.html">cql</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/CQL.20FHIR.20follow.20and.20read.20reference.20instead.20of.20searching.html">CQL FHIR follow and read reference instead of searching</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="263894907"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/CQL%20FHIR%20follow%20and%20read%20reference%20instead%20of%20searching/near/263894907" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Riley <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/CQL.20FHIR.20follow.20and.20read.20reference.20instead.20of.20searching.html#263894907">(Dec 06 2021 at 18:30)</a>:</h4>
<p>Hi all, I know I've talked about this issue before, but I was wondering if there was anymore work in using references to pull related information on MedicationStatements/MedicationReferences before.</p>
<p>Let's say I have a script that is something like:</p>
<div class="codehilite"><pre><span></span><code>using FHIR version &#39;3.0.0&#39;
codesystem &quot;icd10cm&quot;: &#39;http://hl7.org/fhir/sid/icd-10-cm&#39;
define &quot;MedAConcept&quot;: Concept { Code &#39;A&#39; from icd10cm }
define &quot;MedAMedication&quot;: [Medication: &quot;MedAConcept&quot;]
define &quot;MedAMedicationRequest&quot;: [MedicationStatement: &quot;MedAConcept&quot;] medStatement
    with &quot;MedAMedication&quot; med
    such that exists (
        (medStatement.medication.reference) ref
            where EndsWith(ref, &#39;/&#39; + meds.id)
   )
</code></pre></div>
<p>So this block has multiple issues with it:<br>
1) It will only work with MedicationStatements that have a medicationReference, not a medicationCodeableConcept, so the statement must be revised based on how the FHIR server presents its resources.<br>
2) It requires a SEARCH on Medication and a SEARCH on MedicationStatement. This is an issue I'm running into right now with an Epic server, the epic server supports SEARCH on MedicationStatement, but only a READ on the Medication, so the script will 405 Method not allow in these cases.</p>
<p>Is there anyway we could use a SEARCH then READ strategy somehow? All I really want is to pull some codes from the medication into the relevant medicationstatement context. It really should not have to be 2 different searches to find supplemental information like this. Is there grammer to support some sort of WITH clause in the retrieval context?</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
