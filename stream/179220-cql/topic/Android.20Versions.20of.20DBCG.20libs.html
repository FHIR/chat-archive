---
layout: page
title: "FHIR Chat  · Android Versions of DBCG libs · cql"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179220-cql/index.html">cql</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Android.20Versions.20of.20DBCG.20libs.html">Android Versions of DBCG libs</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="263485935"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Android%20Versions%20of%20DBCG%20libs/near/263485935" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vitor Pamplona <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Android.20Versions.20of.20DBCG.20libs.html#263485935">(Dec 02 2021 at 19:06)</a>:</h4>
<p>Has anybody worked on Android ports of the <a href="https://github.com/DBCG/cql_engine">https://github.com/DBCG/cql_engine</a> and <a href="https://github.com/DBCG/cql-evaluator">https://github.com/DBCG/cql-evaluator</a> libs? </p>
<p>It feels like the project could benefit from a pure Android-based dependency stack to reduce the chance of runtime errors between the multiple versions of Android out there. I saw the SampleApp from the DBCG team and even that Sample code is not that stable on multiple android devices. :(</p>



<a name="263486311"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Android%20Versions%20of%20DBCG%20libs/near/263486311" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vitor Pamplona <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Android.20Versions.20of.20DBCG.20libs.html#263486311">(Dec 02 2021 at 19:09)</a>:</h4>
<p>For additional information, Moxy has a dependency on <code>java.awt.Image</code> which is not part of Java anymore and if an Android project is compiled with the latest Android Studio, which Java 11 is used by default, it causes a RuntimeError when trying to unmarshal an XML Library because <code>java.awt</code> is not there. (Don't ask why an XML lib needs AWT... )</p>



<a name="263486701"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Android%20Versions%20of%20DBCG%20libs/near/263486701" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vitor Pamplona <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Android.20Versions.20of.20DBCG.20libs.html#263486701">(Dec 02 2021 at 19:12)</a>:</h4>
<p>At the same time, Context has a dependency on ZonedDateTime, which is not included in some Android &lt;=7.0 devices which are still widely used :(</p>



<a name="263488106"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Android%20Versions%20of%20DBCG%20libs/near/263488106" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vitor Pamplona <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Android.20Versions.20of.20DBCG.20libs.html#263488106">(Dec 02 2021 at 19:23)</a>:</h4>
<p>Since the CQL evaluator and engine don't actually need <code>java.awt</code> and the <code>ZonedDateTime evaluationDateTime</code> field on Context doesn't seem to be that useful, a dependency clean up + field deletion could improve the stability of the lib without affecting it's utility.</p>



<a name="263488702"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Android%20Versions%20of%20DBCG%20libs/near/263488702" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> JP <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Android.20Versions.20of.20DBCG.20libs.html#263488702">(Dec 02 2021 at 19:27)</a>:</h4>
<p>the main is the use of JAXB for serialization and serialization of ELM, and of the ModelInfo in the cql-translator. There are a few issues tracking that, such as these:</p>
<p><a href="https://github.com/cqframework/clinical_quality_language/issues/640">https://github.com/cqframework/clinical_quality_language/issues/640</a><br>
<a href="https://github.com/DBCG/cql_engine/issues/405">https://github.com/DBCG/cql_engine/issues/405</a></p>



<a name="263488823"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Android%20Versions%20of%20DBCG%20libs/near/263488823" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> JP <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Android.20Versions.20of.20DBCG.20libs.html#263488823">(Dec 02 2021 at 19:28)</a>:</h4>
<p>Short version is that running on Android is a goal, but there's some legwork to do before we can get there.</p>



<a name="263491082"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Android%20Versions%20of%20DBCG%20libs/near/263491082" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vitor Pamplona <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Android.20Versions.20of.20DBCG.20libs.html#263491082">(Dec 02 2021 at 19:46)</a>:</h4>
<p>Nice! Sorry, what's the difference between the XML from the cql-translator and the XML from the engine? Issue 405 speaks about both as if they were different, but they seem to be calling the same JAXB processor. Are they the same?</p>



<a name="263500610"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Android%20Versions%20of%20DBCG%20libs/near/263500610" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> JP <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Android.20Versions.20of.20DBCG.20libs.html#263500610">(Dec 02 2021 at 21:08)</a>:</h4>
<p>The XML content itself is identical, but the two projects are independent so both implement JAXB serialization / deserialization separately. There are a couple cases where the behavior isn't consistent between the two.</p>



<a name="263580768"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Android%20Versions%20of%20DBCG%20libs/near/263580768" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vitor Pamplona <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Android.20Versions.20of.20DBCG.20libs.html#263580768">(Dec 03 2021 at 13:40)</a>:</h4>
<p>If we could put some resources to help you out on this process, where or which tasks would you ask us to look into first? :)</p>



<a name="263638405"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Android%20Versions%20of%20DBCG%20libs/near/263638405" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> JP <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Android.20Versions.20of.20DBCG.20libs.html#263638405">(Dec 03 2021 at 21:04)</a>:</h4>
<p>I'll try to give an overview here but I'm happy to jump on a call with you and your team to talk through some considerations if that's helpful. Also, <span class="user-mention" data-user-id="366686">@Jing Tang</span> is working on an Android SDK so he may also be interested in this.</p>
<p>A a high level, CQL (human-readable) is translated by the cql-translator to produce ELM, which is machine-readable. The ELM is the executable code. Technically, the cql-engine and cql-evaluator do not need CQL at all. They can run directly on ELM assuming that ELM is available in the execution environment (the cql-evaluator will do CQL translation on the fly if CQL is available and the execution environment supports it).</p>
<p>ELM has a number of different serialization formats, which are what are being discussed in this issue:</p>
<p><a href="https://github.com/DBCG/cql_engine/issues/405">https://github.com/DBCG/cql_engine/issues/405</a></p>
<p>JSON = JSON serializaed by JAXB<br>
XML = XML serialized by JAXB<br>
JXSON = JSON serialized by Jackson</p>
<p>JAXB is (generally) unsupported by Android, so only the JXSON format can be used. </p>
<p>The CPG IG defines a few profiles that constrain Clinical Reasoning resources such that ELM is always present, such as CPGExecutableLibrary. An overview of that is here:</p>
<p><a href="https://build.fhir.org/ig/HL7/cqf-recommendations/profiles.html#artifact-profiles">https://build.fhir.org/ig/HL7/cqf-recommendations/profiles.html#artifact-profiles</a></p>
<p>So, if you generate ELM ahead of time, and if you serialize it as JXSON, and it you attach that to your FHIR resources (or provide some other means of loading it), and if you have a fairly recent version of Android, the cql-engine will work. That's a lot of ifs, but some of that is already automated by the IG publisher tooling or cqf-tooling projects.</p>
<p>On issue #405, we've come to the consensus that we can phase out JSON/XML support in the cql-engine and support only the JXSON format. So, the work to do there is create a PR that removes JAXB and the associated dependencies entirely. You'll still have to pregenerate the ELM, and you'll still have to serialize it as JXSON, but at least it should work on more versions of Android.</p>



<a name="263653621"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Android%20Versions%20of%20DBCG%20libs/near/263653621" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> JP <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Android.20Versions.20of.20DBCG.20libs.html#263653621">(Dec 03 2021 at 21:11)</a>:</h4>
<p>An approach I'd actually prefer is to provide some mechanism such that the JAXB-related dependencies can be loaded dynamically, such as putting them in their own module, marking them "optional" in the pom.xml, and providing some way to detect those on the classpath. The core HAPI libraries use such an approach to support Android:</p>
<p><a href="https://github.com/hapifhir/hapi-fhir/tree/d1c2d839d187b0820e3c38658a2fef889a908dd3/hapi-fhir-android">https://github.com/hapifhir/hapi-fhir/tree/d1c2d839d187b0820e3c38658a2fef889a908dd3/hapi-fhir-android</a></p>
<p>(they swap-out HTTP client implementations)</p>
<p>I haven't sat down and thought through exactly what the design for this should be, or sketched out what the interface for a serialization format "module" would look like. If you or your team wanted to take a stab at that, it'd be helpful and probably pay dividends on the cql-translator side as well.</p>



<a name="263653755"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Android%20Versions%20of%20DBCG%20libs/near/263653755" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> JP <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Android.20Versions.20of.20DBCG.20libs.html#263653755">(Dec 03 2021 at 21:13)</a>:</h4>
<p>That gets us running ELM consistently across most versions of Android, I think.</p>



<a name="263654381"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Android%20Versions%20of%20DBCG%20libs/near/263654381" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> JP <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Android.20Versions.20of.20DBCG.20libs.html#263654381">(Dec 03 2021 at 21:19)</a>:</h4>
<p>The next step is to be able to do CQL translation on Android so that you don't necessarily have to pregenerate the ELM. There are a couple of related issues on the cql-translator side that need to be addressed to make that possible. First, the serialization of the translated ELM which effectively needs the same "optional JAXB modules" solution.</p>
<p>Second, the cql-translator internally uses a "ModelInfo" to store meta-data about the data model. It loads these whenever it encounters a "using" statement in CQL:</p>
<div class="codehilite"><pre><span></span><code>library Test

using FHIR version 3.0.0
</code></pre></div>
<p>or </p>
<div class="codehilite"><pre><span></span><code>using QDM version 5.6
</code></pre></div>
<p>or whatever.</p>



<a name="263654757"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Android%20Versions%20of%20DBCG%20libs/near/263654757" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> JP <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Android.20Versions.20of.20DBCG.20libs.html#263654757">(Dec 03 2021 at 21:22)</a>:</h4>
<p>The structure of the ModelInfo is documented here:<br>
<a href="https://cql.hl7.org/elm.html">https://cql.hl7.org/elm.html</a></p>
<p>And there are a number of examples here:<br>
<a href="https://github.com/cqframework/clinical_quality_language/tree/master/Src/java/quick/src/main/resources/org/hl7/fhir">https://github.com/cqframework/clinical_quality_language/tree/master/Src/java/quick/src/main/resources/org/hl7/fhir</a></p>
<p>You'll notice they are all XML. This is because the cql-translator uses JAXB to read those. We need the equivalent of JXSON-based serialization for those ModelInfos in order to be able to use them on Android.</p>



<a name="263655093"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Android%20Versions%20of%20DBCG%20libs/near/263655093" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> JP <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Android.20Versions.20of.20DBCG.20libs.html#263655093">(Dec 03 2021 at 21:26)</a>:</h4>
<p>The FHIR ModelInfos are generated based on the StructureDefintions, so they are pretty easily recreated. The generation tooling will need to write those out as JXSON (or whatever) and then the cql-translator will need to be able to load those. The code that currently does that is here:<br>
<a href="https://github.com/cqframework/clinical_quality_language/blob/68e6861b38603e6d87d822b938cc1a5ed354d7a7/Src/java/cql-to-elm/src/main/java/org/cqframework/cql/cql2elm/FhirModelInfoProvider.java">https://github.com/cqframework/clinical_quality_language/blob/68e6861b38603e6d87d822b938cc1a5ed354d7a7/Src/java/cql-to-elm/src/main/java/org/cqframework/cql/cql2elm/FhirModelInfoProvider.java</a></p>



<a name="263655739"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Android%20Versions%20of%20DBCG%20libs/near/263655739" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> JP <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Android.20Versions.20of.20DBCG.20libs.html#263655739">(Dec 03 2021 at 21:32)</a>:</h4>
<p>To summarize, full CQL to ELM to execution support on Android needs:</p>
<ol>
<li>The ELM JAXB dependencies removed (or made optional) in the cql-engine</li>
<li>The ELM JAXB dependencies removed (or made optional)  in the cql-translator</li>
<li>The ModelInfo JXSON format added to the ModelInfo generation tooling</li>
<li>The ModelInfo JAXB dependencies removed (or made optional) in the cql-translator</li>
<li>The ModelInfo JXSON format added to the cql-translator</li>
</ol>



<a name="263655835"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Android%20Versions%20of%20DBCG%20libs/near/263655835" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> JP <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Android.20Versions.20of.20DBCG.20libs.html#263655835">(Dec 03 2021 at 21:33)</a>:</h4>
<p>It's not a <em>ton</em> of work but it requires digging around in the internals of those projects a bit.</p>



<a name="263660033"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Android%20Versions%20of%20DBCG%20libs/near/263660033" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vitor Pamplona <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Android.20Versions.20of.20DBCG.20libs.html#263660033">(Dec 03 2021 at 22:11)</a>:</h4>
<p>Wow! Thank you so much for this detailed description. How confident are we to use the current translator to produce the Jackson files correctly? I saw some fears of incorrectly translating it on the referred issue links. Do you think this XML to Jackson conversion will be a one and done event or something that we will need to keep updating as an upstream updates itself?</p>



<a name="263660167"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Android%20Versions%20of%20DBCG%20libs/near/263660167" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vitor Pamplona <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Android.20Versions.20of.20DBCG.20libs.html#263660167">(Dec 03 2021 at 22:12)</a>:</h4>
<p>Flagging for <span class="user-mention" data-user-id="191604">@Carl Leitner</span></p>



<a name="263660973"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Android%20Versions%20of%20DBCG%20libs/near/263660973" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Android.20Versions.20of.20DBCG.20libs.html#263660973">(Dec 03 2021 at 22:18)</a>:</h4>
<p>For a target here, do we have a minimum Android version we want to make sure we support? I see <code>&lt;= 7.0</code> above, but does that really mean all the way back to 1.0?</p>



<a name="263662362"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Android%20Versions%20of%20DBCG%20libs/near/263662362" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vitor Pamplona <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Android.20Versions.20of.20DBCG.20libs.html#263662362">(Dec 03 2021 at 22:32)</a>:</h4>
<p>My initial goal was to go down to Android 5.0, but any gains are welcome.</p>



<a name="263662607"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Android%20Versions%20of%20DBCG%20libs/near/263662607" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vitor Pamplona <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Android.20Versions.20of.20DBCG.20libs.html#263662607">(Dec 03 2021 at 22:35)</a>:</h4>
<p>For the project, the goal has to be a clear definition of which versions of Android the lib would work with a single line to be added to the gradle file (no gradle setup shenanigans).</p>



<a name="263662866"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Android%20Versions%20of%20DBCG%20libs/near/263662866" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Android.20Versions.20of.20DBCG.20libs.html#263662866">(Dec 03 2021 at 22:38)</a>:</h4>
<p>For context on the issues with translation, they are all around the "annotations" which we use to include debug/source information in the output ELM. The core ELM translation is fine, and we have an issue to change how we do annotations so that it's not an issue going forward. Ultimately, we want to be able to remove the JAXB dependencies entirely.</p>



<a name="263666214"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Android%20Versions%20of%20DBCG%20libs/near/263666214" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> JP <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Android.20Versions.20of.20DBCG.20libs.html#263666214">(Dec 03 2021 at 23:19)</a>:</h4>
<p>Right, we are fairly confident in JXSON overall with the exception of the annotations. We've used the JXSON pretty extensively at this point. We are tracking of couple issues to improve the test coverage but I don't foresee any real changes with respect to the actual executable content.</p>



<a name="263666637"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Android%20Versions%20of%20DBCG%20libs/near/263666637" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> JP <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Android.20Versions.20of.20DBCG.20libs.html#263666637">(Dec 03 2021 at 23:25)</a>:</h4>
<p>As far as the minimum Android version supported... I'll have to go back and figure out what's possible. I did some testing last year and as I recall there were some other issues that prevented supporting an API level below ~24, which is ~75% of Android devices. Apparently I didn't write it down in my notes though. Getting down to 20 would give us ~98% of the Android ecosystem.</p>



<a name="263856049"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Android%20Versions%20of%20DBCG%20libs/near/263856049" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Denning <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Android.20Versions.20of.20DBCG.20libs.html#263856049">(Dec 06 2021 at 14:20)</a>:</h4>
<p>Note that CQL to ELM translations can use cql-options.json so any on-the-fly translation of CQL to ELM needs to consider those options.<br>
for example <a href="https://github.com/cqframework/ecqm-content-r4/blob/master/input/cql/cql-options.json">https://github.com/cqframework/ecqm-content-r4/blob/master/input/cql/cql-options.json</a></p>
<p>Also tools which expect JAXB ELM to do CQL highlighting may break if given JXSON</p>



<a name="263943139"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Android%20Versions%20of%20DBCG%20libs/near/263943139" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vitor Pamplona <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Android.20Versions.20of.20DBCG.20libs.html#263943139">(Dec 07 2021 at 00:13)</a>:</h4>
<p>Quick report on how this is going. I was able to remove most of the JAXB dependencies (Moxy is not there anymore) and change the source and test cases to save and load JXSON. There are some failing tests remaining (20 or so) but we should be able to get it ready soon.</p>



<a name="263943213"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Android%20Versions%20of%20DBCG%20libs/near/263943213" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vitor Pamplona <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Android.20Versions.20of.20DBCG.20libs.html#263943213">(Dec 07 2021 at 00:14)</a>:</h4>
<p>Code is here: <a href="https://github.com/Path-Check/cql_engine">https://github.com/Path-Check/cql_engine</a> I will do a PR a soon as we feel comfortable with these changes</p>



<a name="264024552"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Android%20Versions%20of%20DBCG%20libs/near/264024552" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vitor Pamplona <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Android.20Versions.20of.20DBCG.20libs.html#264024552">(Dec 07 2021 at 16:18)</a>:</h4>
<p>FYI, I had to force </p>
<p><code>CqlTranslator.getJxsonMapper().setSerializationInclusion(Include.NON_NULL);</code></p>
<p>before calling <code>translator.toJxson</code> everywhere because the JXSON translator ignores empty ('') strings in the default <code>CqlTranslator.getJxsonMapper()</code> behavior.</p>



<a name="264024753"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Android%20Versions%20of%20DBCG%20libs/near/264024753" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vitor Pamplona <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Android.20Versions.20of.20DBCG.20libs.html#264024753">(Dec 07 2021 at 16:19)</a>:</h4>
<p>Other than that, all tests pass with the JXSON conversion instead of the old XML/JAXB methods</p>



<a name="264068920"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Android%20Versions%20of%20DBCG%20libs/near/264068920" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vitor Pamplona <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Android.20Versions.20of.20DBCG.20libs.html#264068920">(Dec 07 2021 at 20:45)</a>:</h4>
<p><span class="user-mention" data-user-id="194178">@JP</span> do we like big PRs or small PRs? I think I am ready to do the first one that addresses your first point: <br>
<code>1. The ELM JAXB dependencies removed (or made optional) in the cql-engine</code></p>



<a name="264068971"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Android%20Versions%20of%20DBCG%20libs/near/264068971" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> JP <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Android.20Versions.20of.20DBCG.20libs.html#264068971">(Dec 07 2021 at 20:45)</a>:</h4>
<p>Smaller is better.</p>



<a name="264072366"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Android%20Versions%20of%20DBCG%20libs/near/264072366" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vitor Pamplona <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Android.20Versions.20of.20DBCG.20libs.html#264072366">(Dec 07 2021 at 21:12)</a>:</h4>
<p>Ok, PR up: <a href="https://github.com/DBCG/cql_engine/pull/518">https://github.com/DBCG/cql_engine/pull/518</a></p>



<a name="264099574"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Android%20Versions%20of%20DBCG%20libs/near/264099574" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vitor Pamplona <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Android.20Versions.20of.20DBCG.20libs.html#264099574">(Dec 08 2021 at 01:26)</a>:</h4>
<p><span class="user-mention" data-user-id="194178">@JP</span> <span class="user-mention" data-user-id="191359">@Bryn Rhodes</span> I am assuming the next step is to move the XML files <a href="https://github.com/cqframework/clinical_quality_language/tree/master/Src/java/quick/src/main/resources/org/hl7/fhir">here</a> to JSON. Were these XML files manually generated or is there a tool doing it inside the repo?  (I can't find it)</p>



<a name="264192652"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Android%20Versions%20of%20DBCG%20libs/near/264192652" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> JP <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Android.20Versions.20of.20DBCG.20libs.html#264192652">(Dec 08 2021 at 17:47)</a>:</h4>
<p>The code for the FHIR ModelInfo generation is in the cqf-tooling project:<br>
<a href="https://github.com/cqframework/cqf-tooling/blob/002fbccbd76e0f9d4c7a871173829cb80d25e5c9/src/main/java/org/opencds/cqf/tooling/modelinfo/StructureDefinitionToModelInfo.java#L45">https://github.com/cqframework/cqf-tooling/blob/002fbccbd76e0f9d4c7a871173829cb80d25e5c9/src/main/java/org/opencds/cqf/tooling/modelinfo/StructureDefinitionToModelInfo.java#L45</a></p>
<p>We've thought about moving that to the cql-translator project to keep them collocated. I don't think I've made an issue for that yet though, so I'll do that (and it doesn't need to be done as part of this effort, IMO, unless that's an easier approach for you).</p>



<a name="264192972"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Android%20Versions%20of%20DBCG%20libs/near/264192972" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> JP <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Android.20Versions.20of.20DBCG.20libs.html#264192972">(Dec 08 2021 at 17:49)</a>:</h4>
<p>The QDM ModelInfoes are created separately. As long as we retain the ability to load those as XML I don't think you need to worry about them for your current use case:<br>
<a href="https://github.com/cqframework/clinical_quality_language/tree/master/Src/java/qdm/src/main/resources/gov/healthit/qdm">https://github.com/cqframework/clinical_quality_language/tree/master/Src/java/qdm/src/main/resources/gov/healthit/qdm</a></p>



<a name="264193227"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Android%20Versions%20of%20DBCG%20libs/near/264193227" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> JP <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Android.20Versions.20of.20DBCG.20libs.html#264193227">(Dec 08 2021 at 17:51)</a>:</h4>
<p>As far as your engine PR, thanks for the contribution! I'll review it as soon as I can. It might take me a couple days to get started on it. Unless <span class="user-mention" data-user-id="191359">@Bryn Rhodes</span> can jump on it first... <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span></p>



<a name="264227712"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Android%20Versions%20of%20DBCG%20libs/near/264227712" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vitor Pamplona <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Android.20Versions.20of.20DBCG.20libs.html#264227712">(Dec 08 2021 at 22:06)</a>:</h4>
<p>Nice! Do you mind sharing what is on your FHIR-Spec folder? I don't know how to download all specs for all versions easily.</p>



<a name="264231287"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Android%20Versions%20of%20DBCG%20libs/near/264231287" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> JP <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Android.20Versions.20of.20DBCG.20libs.html#264231287">(Dec 08 2021 at 22:37)</a>:</h4>
<p>Unfortunately there's not a way to easily download all the specs or every version including US/QICore, but here's a link to my FHIR-Spec folder:<br>
<a href="https://drive.google.com/file/d/1YsJd2AIg1DijCQTtmsqN592JcdQjb2S9/view?usp=sharing">https://drive.google.com/file/d/1YsJd2AIg1DijCQTtmsqN592JcdQjb2S9/view?usp=sharing</a></p>



<a name="264231412"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Android%20Versions%20of%20DBCG%20libs/near/264231412" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> JP <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Android.20Versions.20of.20DBCG.20libs.html#264231412">(Dec 08 2021 at 22:39)</a>:</h4>
<p>(collected from downloads like this one: <a href="https://www.hl7.org/fhir/downloads.html">https://www.hl7.org/fhir/downloads.html</a>)</p>



<a name="264233520"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Android%20Versions%20of%20DBCG%20libs/near/264233520" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vitor Pamplona <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Android.20Versions.20of.20DBCG.20libs.html#264233520">(Dec 08 2021 at 23:00)</a>:</h4>
<p>Há! Thank you <span class="user-mention" data-user-id="194178">@JP</span></p>



<a name="264478262"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Android%20Versions%20of%20DBCG%20libs/near/264478262" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Carl Leitner <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Android.20Versions.20of.20DBCG.20libs.html#264478262">(Dec 10 2021 at 17:17)</a>:</h4>
<p>Beyond the above discussion, how much is left to do to get $apply fully working on android?  Is that spec'ed out anywhere?  I didn't see it on the kanban.   <span class="user-mention" data-user-id="194178">@JP</span>  <span class="user-mention" data-user-id="191359">@Bryn Rhodes</span></p>



<a name="264480102"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Android%20Versions%20of%20DBCG%20libs/near/264480102" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> JP <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Android.20Versions.20of.20DBCG.20libs.html#264480102">(Dec 10 2021 at 17:30)</a>:</h4>
<p>There’s a some work in progress here:</p>
<p><a href="https://github.com/DBCG/cql-evaluator/pull/42">https://github.com/DBCG/cql-evaluator/pull/42</a></p>
<p>It’s probably 3/4 complete. The caveats due to the JAXB issues means it only works for a very narrow range of content and Android devices.</p>



<a name="264481668"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Android%20Versions%20of%20DBCG%20libs/near/264481668" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Carl Leitner <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Android.20Versions.20of.20DBCG.20libs.html#264481668">(Dec 10 2021 at 17:43)</a>:</h4>
<p>OK.  So if combined with <a href="https://github.com/DBCG/cql_engine/pull/518">https://github.com/DBCG/cql_engine/pull/518</a> does that get us most of the way there?   Is the other 1/4 something someone can pick-up?</p>



<a name="264482377"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Android%20Versions%20of%20DBCG%20libs/near/264482377" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> JP <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Android.20Versions.20of.20DBCG.20libs.html#264482377">(Dec 10 2021 at 17:48)</a>:</h4>
<p>There’s feedback on the PR that needs to be addressed. Specifically, the operation API is not aligned correctly with the CPG $apply specification. It’d be easiest for the original dev to make those changes and address any bit rot, but they are currently occupied with some other work. If you want to jump in there or know someone that can you are welcome to. If not, I’ll get to it “soon”.</p>



<a name="264482608"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Android%20Versions%20of%20DBCG%20libs/near/264482608" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Carl Leitner <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Android.20Versions.20of.20DBCG.20libs.html#264482608">(Dec 10 2021 at 17:50)</a>:</h4>
<p><span class="user-mention silent" data-user-id="194178">JP</span> <a href="#narrow/stream/179220-cql/topic/Android.20Versions.20of.20DBCG.20libs/near/264482377">said</a>:</p>
<blockquote>
<p>There’s feedback on the PR that needs to be addressed. Specifically, the operation API is not aligned correctly with the CPG $apply specification. It’d be easiest for the original dev to make those changes and address any bit rot, but they are currently occupied with some other work. If you want to jump in there or know someone that can you are welcome to. If not, I’ll get to it “soon”.</p>
</blockquote>
<p><span class="user-mention" data-user-id="458846">@Vitor Pamplona</span> ?</p>



<a name="264482642"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Android%20Versions%20of%20DBCG%20libs/near/264482642" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> JP <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Android.20Versions.20of.20DBCG.20libs.html#264482642">(Dec 10 2021 at 17:50)</a>:</h4>
<p><span class="user-mention" data-user-id="458846">@Vitor Pamplona</span> - Bryn’s working on some translator changes that should clean up the engine PR a bit:</p>
<p><a href="https://github.com/cqframework/clinical_quality_language/issues/702">https://github.com/cqframework/clinical_quality_language/issues/702</a></p>



<a name="264494049"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Android%20Versions%20of%20DBCG%20libs/near/264494049" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vitor Pamplona <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Android.20Versions.20of.20DBCG.20libs.html#264494049">(Dec 10 2021 at 19:08)</a>:</h4>
<p>Nice! I was going to do a PR on the cqframework/clinical_quality_language but that project is way too crazy for me :)</p>



<a name="264494358"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Android%20Versions%20of%20DBCG%20libs/near/264494358" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vitor Pamplona <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Android.20Versions.20of.20DBCG.20libs.html#264494358">(Dec 10 2021 at 19:11)</a>:</h4>
<p>But I am getting ready to open a PR for the CQL-Evaluator to remove JAXB-based things from the <code>evaluator.engine</code> and <code>evaluator.fhir</code></p>



<a name="264494404"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Android%20Versions%20of%20DBCG%20libs/near/264494404" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vitor Pamplona <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Android.20Versions.20of.20DBCG.20libs.html#264494404">(Dec 10 2021 at 19:11)</a>:</h4>
<p>After changes to the engine and evaluator, I was able to successfully open a JSON CQL on Android</p>



<a name="264598556"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Android%20Versions%20of%20DBCG%20libs/near/264598556" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vitor Pamplona <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Android.20Versions.20of.20DBCG.20libs.html#264598556">(Dec 12 2021 at 02:33)</a>:</h4>
<p>App is here if anyone wants to see how it worked: <a href="https://github.com/Path-Check/who-verifier-app">https://github.com/Path-Check/who-verifier-app</a></p>



<a name="264600487"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Android%20Versions%20of%20DBCG%20libs/near/264600487" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vitor Pamplona <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Android.20Versions.20of.20DBCG.20libs.html#264600487">(Dec 12 2021 at 03:31)</a>:</h4>
<p>Next up, we will be investigating why it takes so long to load and run Jackson-based CQL on Android (4-5 seconds).</p>



<a name="264715563"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Android%20Versions%20of%20DBCG%20libs/near/264715563" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> JP <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Android.20Versions.20of.20DBCG.20libs.html#264715563">(Dec 13 2021 at 14:44)</a>:</h4>
<p>There’s a few places that benefit from caching, if you’ve not already done so:</p>
<p><a href="https://github.com/DBCG/cql-evaluator/blob/master/evaluator.cql2elm/src/main/java/org/opencds/cqf/cql/evaluator/cql2elm/model/CacheAwareModelManager.java">https://github.com/DBCG/cql-evaluator/blob/master/evaluator.cql2elm/src/main/java/org/opencds/cqf/cql/evaluator/cql2elm/model/CacheAwareModelManager.java</a></p>
<p><a href="https://github.com/DBCG/cql-evaluator/blob/master/evaluator.engine/src/main/java/org/opencds/cqf/cql/evaluator/engine/model/CachingModelResolverDecorator.java">https://github.com/DBCG/cql-evaluator/blob/master/evaluator.engine/src/main/java/org/opencds/cqf/cql/evaluator/engine/model/CachingModelResolverDecorator.java</a></p>
<p>In particular the ModelResolvers use quite a bit of reflection. I think the ideal end goal for these is a code gen step in the cql-engine build, but in the meantime this may help.</p>



<a name="264715734"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Android%20Versions%20of%20DBCG%20libs/near/264715734" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> JP <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Android.20Versions.20of.20DBCG.20libs.html#264715734">(Dec 13 2021 at 14:45)</a>:</h4>
<p><a href="https://github.com/Path-Check/who-verifier-app/blob/main/app/src/main/java/org/who/ddccverifier/services/CQLEvaluator.kt#L26">https://github.com/Path-Check/who-verifier-app/blob/main/app/src/main/java/org/who/ddccverifier/services/CQLEvaluator.kt#L26</a></p>
<p>There’s where you’d use the caching decorator.</p>



<a name="264755016"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Android%20Versions%20of%20DBCG%20libs/near/264755016" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vitor Pamplona <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Android.20Versions.20of.20DBCG.20libs.html#264755016">(Dec 13 2021 at 19:08)</a>:</h4>
<p>Any strong feelings about the SLF4J dependency? It's quite useless for Android.</p>



<a name="264757440"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Android%20Versions%20of%20DBCG%20libs/near/264757440" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> JP <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Android.20Versions.20of.20DBCG.20libs.html#264757440">(Dec 13 2021 at 19:28)</a>:</h4>
<p>The api or the simple-logger? No opinion on the simple-logger and it should be marked as optional.</p>
<p>For the api, we're supporting a number of platforms besides Android and the slf4j-api allows us to use whatever logging implementation is available on the platform. If slf4j-api is not supported on Android we need _some_ logging solution that works "everywhere". What's the recommended approach on Android?</p>
<p>A quick google search suggests there are slf4j binding available for android. I have no idea how mature they might be though:</p>
<p><a href="https://github.com/nomis/slf4j-android">https://github.com/nomis/slf4j-android</a><br>
<a href="https://github.com/tony19/logback-android">https://github.com/tony19/logback-android</a></p>



<a name="265239808"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Android%20Versions%20of%20DBCG%20libs/near/265239808" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vitor Pamplona <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Android.20Versions.20of.20DBCG.20libs.html#265239808">(Dec 17 2021 at 00:31)</a>:</h4>
<p><span class="user-mention" data-user-id="194178">@JP</span> <span class="user-mention" data-user-id="191359">@Bryn Rhodes</span>  I just opened another PR to update the Branch of the previous PlanDefinition/$apply PR: <a href="https://github.com/DBCG/cql-evaluator/pull/74">https://github.com/DBCG/cql-evaluator/pull/74</a></p>



<a name="265239881"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Android%20Versions%20of%20DBCG%20libs/near/265239881" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vitor Pamplona <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Android.20Versions.20of.20DBCG.20libs.html#265239881">(Dec 17 2021 at 00:32)</a>:</h4>
<p>This solves most of the easy requests by @JP. However, the test suite is not complete and the code is still quite verbose/ugly.</p>



<a name="265239989"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Android%20Versions%20of%20DBCG%20libs/near/265239989" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vitor Pamplona <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Android.20Versions.20of.20DBCG.20libs.html#265239989">(Dec 17 2021 at 00:34)</a>:</h4>
<p>I recommend merging PR 74 with PR 42 and merging PR 42 into master nevertheless. With the code on master, we can start to improve both the tests and the current implementation with new PRs.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
