---
layout: page
title: "FHIR Chat  · Execute with HAPI · cql"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179220-cql/index.html">cql</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Execute.20with.20HAPI.html">Execute with HAPI</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="232372032"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Execute%20with%20HAPI/near/232372032" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aditya Kurkure <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Execute.20with.20HAPI.html#232372032">(Mar 30 2021 at 04:23)</a>:</h4>
<p>I'm a newbie , trying to find documentation on how to execute CQL using hapi-fhir-jpa-server-starter (R4). I have enabled cql by setting <code>hapi.fhir.cql_enabled=true</code>.  I don't know how to send my cql file to the server for execution. Can someone point me to the relevant documentation?</p>



<a name="232441704"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Execute%20with%20HAPI/near/232441704" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vasyl Herman <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Execute.20with.20HAPI.html#232441704">(Mar 30 2021 at 15:06)</a>:</h4>
<p>Hi, I am not sure how it happens on hapi side, you may need to translate CQL to EML first. </p>
<p>For our experiments we are using <a href="https://github.com/cqframework/clinical_quality_language/blob/master/Src/java/cql-to-elm/OVERVIEW.md">cql2elm</a> to translate CQL to ELM, then we are running <a href="https://github.com/cqframework/cql-execution">cql-execution</a> to execute a ELM files.</p>
<p>I'd be happy to learn how to execute CQL using hapi-fhir-jpa-server-starter as well.</p>



<a name="232444228"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Execute%20with%20HAPI/near/232444228" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> JP <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Execute.20with.20HAPI.html#232444228">(Mar 30 2021 at 15:20)</a>:</h4>
<p>The hapi fhir server does not (yet) support executing arbitrary cql. It only supports cql evaluation in the context of <code>$evaluate-measure</code> at this time. It does support operating from cql directly when evaluating a Measure, there's no need to translate to ELM ahead of time.</p>



<a name="232444625"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Execute%20with%20HAPI/near/232444625" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> JP <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Execute.20with.20HAPI.html#232444625">(Mar 30 2021 at 15:23)</a>:</h4>
<p>The cqf-ruler does support executing arbitrary cql with an operation defined here:</p>
<p><a href="https://github.com/DBCG/cqf-ruler/blob/b4156f0431dd672d5df6ed1324babbefd42d0645/r4/src/main/java/org/opencds/cqf/r4/providers/CqlExecutionProvider.java#L233">https://github.com/DBCG/cqf-ruler/blob/b4156f0431dd672d5df6ed1324babbefd42d0645/r4/src/main/java/org/opencds/cqf/r4/providers/CqlExecutionProvider.java#L233</a></p>
<p>I expect that to migrate to the hapi server in the near future.</p>



<a name="232572627"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Execute%20with%20HAPI/near/232572627" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Johannes Oehm <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Execute.20with.20HAPI.html#232572627">(Mar 31 2021 at 11:16)</a>:</h4>
<p>Hey, you can orient yourself at the following file: <a href="https://github.com/juliangruendner/fhir-benchmarking/blob/master/cql/evaluate-measure.sh">https://github.com/juliangruendner/fhir-benchmarking/blob/master/cql/evaluate-measure.sh</a></p>
<p>Please be aware, that there must be some changes made to the script to work with HAPI (the system must be added to Library.type, and canonical urls are not yet supported in Measure.library, see the Pull Request)</p>



<a name="232919798"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Execute%20with%20HAPI/near/232919798" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aditya Kurkure <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Execute.20with.20HAPI.html#232919798">(Apr 02 2021 at 16:31)</a>:</h4>
<p>Hi thankyou for the help everyone. I'll try them out and let you know <span aria-label="big smile" class="emoji emoji-1f604" role="img" title="big smile">:big_smile:</span>.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
