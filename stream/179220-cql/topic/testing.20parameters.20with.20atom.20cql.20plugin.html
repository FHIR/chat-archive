---
layout: page
title: "FHIR Chat  · testing parameters with atom cql plugin · cql"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179220-cql/index.html">cql</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/testing.20parameters.20with.20atom.20cql.20plugin.html">testing parameters with atom cql plugin</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="234614082"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/testing%20parameters%20with%20atom%20cql%20plugin/near/234614082" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aziz Boxwala <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/testing.20parameters.20with.20atom.20cql.20plugin.html#234614082">(Apr 15 2021 at 04:07)</a>:</h4>
<p>How does one pass parameter values when testing a library in the cql plugin in Atom?</p>



<a name="234620555"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/testing%20parameters%20with%20atom%20cql%20plugin/near/234620555" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> JP <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/testing.20parameters.20with.20atom.20cql.20plugin.html#234620555">(Apr 15 2021 at 05:47)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="195129">@Aziz Boxwala</span> ,</p>
<p>Passing parameters is currently not supported in the Atom plugin but it's on the backlog. Currently the easiest workaround is to set a default parameter in the CQL directly, like so:</p>
<div class="codehilite" data-code-language="cql"><pre><span></span><code>parameter "Measurement Period" Interval&lt;DateTime&gt;
  default Interval[@2019-01-01T00:00:00.0, @2020-01-01T00:00:00.0)
</code></pre></div>



<a name="234675926"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/testing%20parameters%20with%20atom%20cql%20plugin/near/234675926" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aziz Boxwala <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/testing.20parameters.20with.20atom.20cql.20plugin.html#234675926">(Apr 15 2021 at 13:37)</a>:</h4>
<p>Thank you <span class="user-mention" data-user-id="194178">@JP</span></p>



<a name="234832524"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/testing%20parameters%20with%20atom%20cql%20plugin/near/234832524" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vasyl Herman <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/testing.20parameters.20with.20atom.20cql.20plugin.html#234832524">(Apr 16 2021 at 10:51)</a>:</h4>
<p>Hi, I was also looking for how to pass parameter values to the <code>cql-execution</code>. <br>
The only solution I found is to set a default parameter in the CQL directly before translation.</p>



<a name="234843110"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/testing%20parameters%20with%20atom%20cql%20plugin/near/234843110" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/testing.20parameters.20with.20atom.20cql.20plugin.html#234843110">(Apr 16 2021 at 12:22)</a>:</h4>
<p>It's possible to pass parameters to <code>cql-execution</code>.  I don't know how well it works if the parameter is a complex type from the FHIR data model, but if it's one of the CQL system types, it definitely ought to work.  See: <a href="https://github.com/cqframework/cql-execution/blob/master/OVERVIEW.md#executing-cql-libraries">https://github.com/cqframework/cql-execution/blob/master/OVERVIEW.md#executing-cql-libraries</a></p>



<a name="234843124"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/testing%20parameters%20with%20atom%20cql%20plugin/near/234843124" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/testing.20parameters.20with.20atom.20cql.20plugin.html#234843124">(Apr 16 2021 at 12:22)</a>:</h4>
<p><span class="user-mention" data-user-id="376706">@Vasil Herman</span></p>



<a name="234986529"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/testing%20parameters%20with%20atom%20cql%20plugin/near/234986529" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vasyl Herman <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/testing.20parameters.20with.20atom.20cql.20plugin.html#234986529">(Apr 17 2021 at 12:51)</a>:</h4>
<p><span class="user-mention" data-user-id="191469">@Chris Moesel</span> Thanks! you are amazing! I'll test it later. It's exactly what I was looking for! How could I miss it <span aria-label="nerd" class="emoji emoji-1f913" role="img" title="nerd">:nerd:</span></p>



<a name="235001587"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/testing%20parameters%20with%20atom%20cql%20plugin/near/235001587" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/testing.20parameters.20with.20atom.20cql.20plugin.html#235001587">(Apr 17 2021 at 16:48)</a>:</h4>
<p>You're welcome.  We need to improve our documentation. It's easy to look at the README and assume that's it and miss the OVERVIEW.  Unfortunately, you're probably not the first person to miss it.  But I'm glad it looks like it does what you need!</p>



<a name="235261458"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/testing%20parameters%20with%20atom%20cql%20plugin/near/235261458" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aziz Boxwala <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/testing.20parameters.20with.20atom.20cql.20plugin.html#235261458">(Apr 19 2021 at 22:49)</a>:</h4>
<p>Is there a way to define a FHIR resource as a literal in CQL (for testing)?  The library is used in an ECA rule. The parameter is the med request that triggers the rule. I want to use the default value for testing purposes.</p>



<a name="235265237"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/testing%20parameters%20with%20atom%20cql%20plugin/near/235265237" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/testing.20parameters.20with.20atom.20cql.20plugin.html#235265237">(Apr 19 2021 at 23:27)</a>:</h4>
<p>Yes, you use an Instance selector. Here's an example from OpioidCDSR4: <a href="https://github.com/cqframework/opioid-cds-r4/blob/develop/input/pagecontent/cql/OpioidCDSREC11PatientView.cql#L69">https://github.com/cqframework/opioid-cds-r4/blob/develop/input/pagecontent/cql/OpioidCDSREC11PatientView.cql#L69</a></p>



<a name="235265313"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/testing%20parameters%20with%20atom%20cql%20plugin/near/235265313" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/testing.20parameters.20with.20atom.20cql.20plugin.html#235265313">(Apr 19 2021 at 23:28)</a>:</h4>
<p>And here's an example of building a Composition:</p>
<div class="codehilite"><pre><span></span><code>define &quot;eICR Composition&quot;:
  Composition {
    id: id { value: &#39;XXX&#39; },
    identifier:
      Identifier {
        system: uri { value: &#39;urn:ieft:rfc:3986&#39; },
        value: string { value: &#39;xxx&#39; }
      },
    status: CompositionStatus { value: &#39;final&#39; },
    type: DocumentType,
    category: { DocumentCategory },
    subject: ReferenceTo(Patient),
    encounter: ReferenceTo(Encounter),
    date: dateTime { value: Now() },
    author: { ReferenceTo(Author) },
    title: String(DocumentType.text),
    section: {
      &quot;History of Present Illness Section&quot;,
      &quot;Reason for Visit Section&quot;
    }
  }
</code></pre></div>



<a name="235265404"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/testing%20parameters%20with%20atom%20cql%20plugin/near/235265404" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/testing.20parameters.20with.20atom.20cql.20plugin.html#235265404">(Apr 19 2021 at 23:29)</a>:</h4>
<p>You have to construct the values as FHIR types, FHIRHelpers doesn't go the other direction, so instead of just providing a string, you have to construct a FHIR <code>string</code>: <code>string { value: 'the string' }</code></p>



<a name="235265421"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/testing%20parameters%20with%20atom%20cql%20plugin/near/235265421" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/testing.20parameters.20with.20atom.20cql.20plugin.html#235265421">(Apr 19 2021 at 23:29)</a>:</h4>
<p>You could pretty easily imagine some FHIRHelpers along those lines, but I haven't built those out.</p>



<a name="235285167"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/testing%20parameters%20with%20atom%20cql%20plugin/near/235285167" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aziz Boxwala <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/testing.20parameters.20with.20atom.20cql.20plugin.html#235285167">(Apr 20 2021 at 04:18)</a>:</h4>
<p>Thanks Bryn. This will do the trick.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
