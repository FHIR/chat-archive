---
layout: page
title: "FHIR Chat  · Testing · cql"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179220-cql/index.html">cql</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Testing.html">Testing</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="246730488"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Testing/near/246730488" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sreekanth Puram <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Testing.html#246730488">(Jul 21 2021 at 14:52)</a>:</h4>
<p>We ran the tests on FHIR347 with the sample patients given. I see that we get the following errors. I see that all these errors are related to the sample connectathon data like Timezone not being set for onsetdate etc. We are currently fixing it in the data supplied.</p>



<a name="246730503"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Testing/near/246730503" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sreekanth Puram <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Testing.html#246730503">(Jul 21 2021 at 14:52)</a>:</h4>
<p>ERROR: if a date has a time, it must have a timezone. Location: MeasureReport.contained.entry[2].resource.onset.ofType(dateTime) (line 104, col 48).<br>
ERROR: if a date has a time, it must have a timezone. Location: MeasureReport.contained.entry[2].resource.abatement.ofType(dateTime) (line 106, col 8).<br>
ERROR: if a date has a time, it must have a timezone. Location: MeasureReport.contained.entry[3].resource.period.start (line 133, col 42).<br>
ERROR: if a date has a time, it must have a timezone. Location: MeasureReport.contained.entry[3].resource.period.end (line 135, col 10).<br>
ERROR: Profile <a href="http://hl7.org/fhir/us/core/StructureDefinition/us-core-race">http://hl7.org/fhir/us/core/StructureDefinition/us-core-race</a>, Element 'MeasureReport.contained.entry[1].resource.extension[0].extension[text]': minimum required = 1, but only found 0. Location: MeasureReport.contained.entry[1].resource.extension[0] (line 38, col 25).<br>
ERROR: Profile <a href="http://hl7.org/fhir/us/core/StructureDefinition/us-core-ethnicity">http://hl7.org/fhir/us/core/StructureDefinition/us-core-ethnicity</a>, Element 'MeasureReport.contained.entry[1].resource.extension[1].extension[text]': minimum required = 1, but only found 0. Location: MeasureReport.contained.entry[1].resource.extension[1] (line 48, col 13).<br>
ERROR: Profile <a href="http://hl7.org/fhir/us/core/StructureDefinition/us-core-condition">http://hl7.org/fhir/us/core/StructureDefinition/us-core-condition</a>, Element 'MeasureReport.contained.entry[2].resource.category': minimum required = 1, but only found 0. Location: MeasureReport.contained.entry[2].resource (line 101, col 21)<br>
ERROR: If condition is abated, then clinicalStatus must be either inactive, resolved, or remission [abatement.empty() or clinicalStatus.coding.where((system = '<a href="http://terminology.hl7.org/CodeSystem/condition-clinical">http://terminology.hl7.org/CodeSystem/condition-clinical</a>') and ((code = 'resolved') or (code = 'remission') or (code = 'inactive'))).exists()]. Location: MeasureReport.contained.entry[2].resource (line 101, col 21).</p>



<a name="246730593"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Testing/near/246730593" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sreekanth Puram <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Testing.html#246730593">(Jul 21 2021 at 14:52)</a>:</h4>
<p>These errors were fixed after changing the patient data</p>



<a name="246737036"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Testing/near/246737036" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sreekanth Puram <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Testing.html#246737036">(Jul 21 2021 at 15:37)</a>:</h4>
<p>We have a server ready for whoever wants to test.</p>



<a name="246737074"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Testing/near/246737074" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sreekanth Puram <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Testing.html#246737074">(Jul 21 2021 at 15:37)</a>:</h4>
<p>Please let us know</p>



<a name="246761036"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Testing/near/246761036" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Testing.html#246761036">(Jul 21 2021 at 18:38)</a>:</h4>
<p>Hi Sreekanth! Fantastic, thank you. Can your server accept any measure/library content, or is it limited to the measures provided for this connectathon?</p>



<a name="246781159"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Testing/near/246781159" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Denning <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Testing.html#246781159">(Jul 21 2021 at 21:19)</a>:</h4>
<p>I was going to try using Touchstone as the client and Mettles as the server, but I was hoping to find a patient to test with (without adding more, since there are already over 1100 patients on that server).  <a href="https://fhir-dev.mettles.com/interop/fhir/Patient?_format=json&amp;_count=100&amp;_summary=true&amp;family=denom">https://fhir-dev.mettles.com/interop/fhir/Patient?_format=json&amp;_count=100&amp;_summary=true&amp;family=denom</a> for example does not find any, so the Bonnie naming convention of using family name to indicate expected population is not used.  (Not used on <a href="https://cqm-sandbox.alphora.com/cqf-ruler-r4/fhir/Patient?_format=json&amp;family=numer">https://cqm-sandbox.alphora.com/cqf-ruler-r4/fhir/Patient?_format=json&amp;family=numer</a>  either) Any suggestion for finding a patient to test with for any of the measures of interest for the connectathon?</p>



<a name="246781359"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Testing/near/246781359" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Peter Muir <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Testing.html#246781359">(Jul 21 2021 at 21:21)</a>:</h4>
<p>Hey Paul, suggest search for pertinent diagnosis or observation related to target measure?  eg essential hypertension, diabetes, etc using Postman</p>



<a name="246783075"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Testing/near/246783075" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Denning <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Testing.html#246783075">(Jul 21 2021 at 21:38)</a>:</h4>
<p>Thanks.  Tried <a href="https://fhir-dev.mettles.com/interop/fhir/Condition?_format=json&amp;_count=200&amp;_summary=true&amp;code:in=https://fhir-dev.mettles.com/interop/fhir/ValueSet/2.16.840.1.113883.3.464.1003.104.12.1011">https://fhir-dev.mettles.com/interop/fhir/Condition?_format=json&amp;_count=200&amp;_summary=true&amp;code:in=https://fhir-dev.mettles.com/interop/fhir/ValueSet/2.16.840.1.113883.3.464.1003.104.12.1011</a></p>
<p>based on .url in<br>
<a href="https://fhir-dev.mettles.com/interop/fhir/ValueSet/2.16.840.1.113883.3.464.1003.104.12.1011?_format=json">https://fhir-dev.mettles.com/interop/fhir/ValueSet/2.16.840.1.113883.3.464.1003.104.12.1011?_format=json</a><br>
since <a href="https://fhir-dev.mettles.com/interop/fhir/Condition?_format=json&amp;_count=200&amp;_summary=true&amp;code:in=http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.104.12.1011">https://fhir-dev.mettles.com/interop/fhir/Condition?_format=json&amp;_count=200&amp;_summary=true&amp;code:in=http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.104.12.1011</a><br>
did not work</p>
<p>There are no CodeSystem resources, so $expand does not work e.g.<br>
<a href="https://fhir-dev.mettles.com/interop/fhir/ValueSet/2.16.840.1.113883.3.464.1003.104.12.1011/$expand?_format=json">https://fhir-dev.mettles.com/interop/fhir/ValueSet/2.16.840.1.113883.3.464.1003.104.12.1011/$expand?_format=json</a></p>
<p><a href="https://uat-cts.nlm.nih.gov/fhir/r4/ValueSet/2.16.840.1.113883.3.464.1003.104.12.1011?_format=json">https://uat-cts.nlm.nih.gov/fhir/r4/ValueSet/2.16.840.1.113883.3.464.1003.104.12.1011?_format=json</a><br>
shows ... "include": [ {<br>
      "valueSet": [ "<a href="http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.104.11.1031">http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.104.11.1031</a>" ]<br>
    }, {<br>
      "valueSet": [ "<a href="http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.104.11.1029">http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.104.11.1029</a>" ]<br>
    }, {<br>
      "valueSet": [ "<a href="http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.104.11.1030">http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.104.11.1030</a>" ]<br>
    } ]<br>
and <a href="https://uat-cts.nlm.nih.gov/fhir/r4/ValueSet/2.16.840.1.113883.3.464.1003.104.12.1011/$expand?_format=json">https://uat-cts.nlm.nih.gov/fhir/r4/ValueSet/2.16.840.1.113883.3.464.1003.104.12.1011/$expand?_format=json</a><br>
provides the expansion<br>
(as noted earlier using <a href="https://github.com/RESTEDClient/RESTED">https://github.com/RESTEDClient/RESTED</a> firefox extension to use apiKey)</p>



<a name="246783323"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Testing/near/246783323" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Denning <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Testing.html#246783323">(Jul 21 2021 at 21:41)</a>:</h4>
<p><a href="https://fhir-dev.mettles.com/interop/fhir/Condition?_format=json&amp;_count=200&amp;_summary=true&amp;code=I10">https://fhir-dev.mettles.com/interop/fhir/Condition?_format=json&amp;_count=200&amp;_summary=true&amp;code=I10</a> shows 4 condition resources</p>



<a name="246889754"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Testing/near/246889754" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vishnu Yarmaneni <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Testing.html#246889754">(Jul 22 2021 at 18:48)</a>:</h4>
<p>I am getting the following error when running end to end testing for caregaps</p>
<p>ERROR: Unknown Code <a href="http://terminology.hl7.org/CodeSystem/v3-ActCode#CAREGAP">http://terminology.hl7.org/CodeSystem/v3-ActCode#CAREGAP</a> in <a href="http://terminology.hl7.org/CodeSystem/v3-ActCode">http://terminology.hl7.org/CodeSystem/v3-ActCode</a> for '<a href="http://terminology.hl7.org/CodeSystem/v3-ActCode#CAREGAP">http://terminology.hl7.org/CodeSystem/v3-ActCode#CAREGAP</a>'. Location: Parameters.parameter[0].resource.entry[5].resource.code.coding[0] (line 315, col 26).<br>
The resource in entry is the detected issue.</p>
<p>As per the profile at <a href="http://build.fhir.org/ig/HL7/davinci-deqm/StructureDefinition-gaps-detectedissue-deqm.html">http://build.fhir.org/ig/HL7/davinci-deqm/StructureDefinition-gaps-detectedissue-deqm.html</a> the code values are fixed which is the same as being seen in the error.</p>
<p>This is a known  issue.</p>



<a name="246889827"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Testing/near/246889827" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vishnu Yarmaneni <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Testing.html#246889827">(Jul 22 2021 at 18:48)</a>:</h4>
<p>One more issue with the Test setup with the end to end testing for caregaps</p>
<p>While creating test server, the script is deleting the encounter and then procedure.<br>
the order should be<br>
deleting measure report<br>
deleting procedure<br>
deleting encounter</p>
<p>If this order is not followed, 409 Response (Conflict ) will be received and the test script execution will be stopped.</p>
<p>currently the order being followed by the script is<br>
delete encounter<br>
delete procedure</p>
<p>This is also a known issue</p>



<a name="247133394"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Testing/near/247133394" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Reynolds <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Testing.html#247133394">(Jul 25 2021 at 16:28)</a>:</h4>
<p>Yes, this is a known issue.  The test needs to be fixed.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
