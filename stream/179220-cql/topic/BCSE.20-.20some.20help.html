---
layout: page
title: "FHIR Chat  · BCSE - some help · cql"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179220-cql/index.html">cql</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/BCSE.20-.20some.20help.html">BCSE - some help</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="243692599"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/BCSE%20-%20some%20help/near/243692599" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vasyl Herman <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/BCSE.20-.20some.20help.html#243692599">(Jun 23 2021 at 18:22)</a>:</h4>
<p>Hello, <br>
I got stuck on <code>AdvancedIllnessFrailty."Acute Inpatient Discharge with Advanced Illness"</code> <br>
Here: <a href="https://github.com/cql-fhir-project/ecqm-content-r4-2021/blob/master/bundles/ncqa/BCSE_HEDIS_MY2022-1.0.0/libraryCql/NCQA_AdvancedIllnessandFrailty-1.0.0.cql#L120-L125">https://github.com/cql-fhir-project/ecqm-content-r4-2021/blob/master/bundles/ncqa/BCSE_HEDIS_MY2022-1.0.0/libraryCql/NCQA_AdvancedIllnessandFrailty-1.0.0.cql#L120-L125</a> </p>
<p>Could any body give an example of Patient's Bundle that would hit  <code>Acute Inpatient Discharge with Advanced Illness</code> definition, please?</p>



<a name="243696997"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/BCSE%20-%20some%20help/near/243696997" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vasyl Herman <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/BCSE.20-.20some.20help.html#243696997">(Jun 23 2021 at 18:56)</a>:</h4>
<p><code>AdvancedIllnessFrailty."Nonacute Inpatient Discharge with Advanced Illness"</code> the same situation:</p>
<div class="codehilite" data-code-language="Bash"><pre><span></span><code>define <span class="s2">"Nonacute Inpatient Discharge with Advanced Illness"</span>:
  <span class="o">(</span> <span class="o">(</span> Claims.<span class="s2">"Medical Claims With Diagnosis"</span> <span class="o">(</span> Claims.<span class="s2">"Medical Claims With Nonacute or Acute Inpatient Discharge"</span> <span class="o">(</span> <span class="o">[</span>Claim<span class="o">]</span> <span class="o">)</span>.NonacuteInpatientDischarge, <span class="s2">"Advanced Illness ValueSet"</span> <span class="o">)</span>.ServicePeriod <span class="o">)</span> DischargeWithDiagnosis
    where date from
    end of DischargeWithDiagnosis during Interval<span class="o">[</span>date from start of <span class="s2">"Measurement Period"</span> - <span class="m">1</span> year, date from
    end of <span class="s2">"Measurement Period"</span><span class="o">])</span> InpatientDischarge
    <span class="k">return</span> date from
    end of InpatientDischarge
</code></pre></div>
<p>To be more specific I am having trouble with <code>Claims."Medical Claims With Nonacute or Acute Inpatient Discharge"</code>  function <a href="https://github.com/cql-fhir-project/ecqm-content-r4-2021/blob/master/bundles/ncqa/BCSE_HEDIS_MY2022-1.0.0/libraryCql/NCQA_Claims-1.0.0.cql#L519-L550">github link</a><br>
Could anybody please explain on high level what means <code>Tuple return tuple return tuple</code>? or give a Bundle ?<br>
Thanks in advanced!</p>



<a name="243811249"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/BCSE%20-%20some%20help/near/243811249" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> JP <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/BCSE.20-.20some.20help.html#243811249">(Jun 24 2021 at 16:28)</a>:</h4>
<p>I'll take a stab at explaining it. The overall goal of the function is to go from a set of Claims, to a set of Line Items that are grouped by category. There are 3 main sections of that function. Each builds on the last and filters/transforms the data along the way.</p>
<p>Input data (Claims) -&gt; (apply filter) -&gt;<br>
Tuple 1 (Medical Claims) -&gt;  (group line items by acute inpatient and non acute inpatient) -&gt;<br>
Tuple 2 (InpatientStayLineItems, NonacuteInpatientLineItems) -&gt; (further separate the line items) -&gt;<br>
Tuple 3 (InpatientDischarge, NonacuteInpatientDischarge, AcuteInpatientDischarge)</p>
<p>A difference between the <code>return</code> statement in CQL and many other programming languages is that the <code>return</code> is at the query level and not the function level (specifically, <code>return</code> is used for query shaping - <a href="https://cql.hl7.org/02-authorsguide.html#queries">https://cql.hl7.org/02-authorsguide.html#queries</a>). In other words, the <code>return</code>s that occur midstream are transient and only feed into the next step in the pipeline. The return value of the overall function is a List of Tuple 3 which is the last step in that pipeline.</p>



<a name="243825872"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/BCSE%20-%20some%20help/near/243825872" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vasyl Herman <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/BCSE.20-.20some.20help.html#243825872">(Jun 24 2021 at 18:19)</a>:</h4>
<p>Thaks! It helped a lot!<br>
Basically, at the end you will have an Object of arrays. <code>AcuteInpatientDischarge</code> is empty if there is a <code>NonacuteInpatientDischarge</code>, right?</p>
<p><a href="/user_uploads/10155/Zs6_5kBbHxBLPM0SimHdBD0a/Screenshot-2021-06-24-at-21.15.46.png">Screenshot-2021-06-24-at-21.15.46.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/10155/Zs6_5kBbHxBLPM0SimHdBD0a/Screenshot-2021-06-24-at-21.15.46.png" title="Screenshot-2021-06-24-at-21.15.46.png"><img src="/user_uploads/10155/Zs6_5kBbHxBLPM0SimHdBD0a/Screenshot-2021-06-24-at-21.15.46.png"></a></div>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
