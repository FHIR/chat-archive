---
layout: page
title: "FHIR Chat  · Filtering with Multiple Terminologies · cql"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179220-cql/index.html">cql</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Filtering.20with.20Multiple.20Terminologies.html">Filtering with Multiple Terminologies</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="273107597"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Filtering%20with%20Multiple%20Terminologies/near/273107597" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matt Rouhana <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Filtering.20with.20Multiple.20Terminologies.html#273107597">(Feb 24 2022 at 15:53)</a>:</h4>
<p>Is there standard CQL syntax for retrieving clinical entities while filtering on multiple terminologies? For example, given two valuesets "Office Visit" and "Outpatient Consultation", is something akin to the following possible?</p>
<div class="codehilite"><pre><span></span><code>define &quot;Qualifying Encounter&quot;:
  [Encounter: &quot;Outpatient Consultation&quot; or &quot;Office Visit&quot;]
</code></pre></div>



<a name="273111029"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Filtering%20with%20Multiple%20Terminologies/near/273111029" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Corey Sanders <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Filtering.20with.20Multiple.20Terminologies.html#273111029">(Feb 24 2022 at 16:15)</a>:</h4>
<p>The typical pattern that I've seen for filtering by multiple valuesets is to use a union. For example...</p>
<p><code>[Encounter: "Outpatient Consultation"]
   union [Encounter: "Office Visit"]</code></p>
<p>You can see a more complicated example <a href="https://github.com/DBCG/connectathon/blob/28d976d5e2ecf8ffa9badb82964395877323b63f/fhir401/bundles/measure/EXM108-8.3.000/EXM108-8.3.000-files/EXM108-8.3.000.cql#L138]">here</a> which applies a where clause to all of the union'ed results.</p>
<p>In the Java reference implementation, each retrieve (square bracket) is a separate REST API call, which isn't necessarily ideal, but that is a requirement if the retrieve provider wants to take advantage of the :in modifier of the FHIR <a href="https://www.hl7.org/fhir/search.html#token">token</a> search parameter for filtering.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
