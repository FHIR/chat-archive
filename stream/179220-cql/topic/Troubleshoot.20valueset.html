---
layout: page
title: "FHIR Chat  · Troubleshoot valueset · cql"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179220-cql/index.html">cql</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Troubleshoot.20valueset.html">Troubleshoot valueset</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="154013502"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Troubleshoot%20valueset/near/154013502" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aslan Brooke <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Troubleshoot.20valueset.html#154013502">(Oct 30 2018 at 01:40)</a>:</h4>
<p>I'm trying to get a valueset to work in CQL. How can I troubleshoot, is there someway to see what valueset codes are available through a CQL statement? <span class="user-mention" data-user-id="191359">@Bryn Rhodes</span></p>



<a name="154013503"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Troubleshoot%20valueset/near/154013503" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Troubleshoot.20valueset.html#154013503">(Oct 30 2018 at 01:42)</a>:</h4>
<p>You can issue an $expand against that valueset on the server.</p>



<a name="154013504"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Troubleshoot%20valueset/near/154013504" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aslan Brooke <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Troubleshoot.20valueset.html#154013504">(Oct 30 2018 at 01:54)</a>:</h4>
<p><span class="user-mention" data-user-id="191359">@Bryn Rhodes</span> So $expand works fine: <a href="http://hapi.fhir.org/baseDstu3/ValueSet/368154/$expand" target="_blank" title="http://hapi.fhir.org/baseDstu3/ValueSet/368154/$expand">http://hapi.fhir.org/baseDstu3/ValueSet/368154/$expand</a><br>
Here is the valueset: <a href="http://hapi.fhir.org/baseDstu3/ValueSet/368154" target="_blank" title="http://hapi.fhir.org/baseDstu3/ValueSet/368154">http://hapi.fhir.org/baseDstu3/ValueSet/368154</a><br>
But when I try to use in CQL, I can't make sense of the write valueset statement:</p>
<div class="codehilite"><pre><span></span>valueset &quot;Heart Failure&quot; : &#39;https://ontoserver.csiro.au/stu3-latest/ValueSet/HeartFailure&#39;
valueset &quot;Heart Failure&quot; : &#39;http://hapi.fhir.org/baseDstu3/ValueSet/368154&#39;
valueset &quot;Heart Failure&quot; : &#39;http://hapi.fhir.org/baseDstu3/ValueSet/368154&#39;
valueset &quot;Heart Failure&quot; : &#39;HeartFailure&#39;
</pre></div>



<a name="154013505"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Troubleshoot%20valueset/near/154013505" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aslan Brooke <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Troubleshoot.20valueset.html#154013505">(Oct 30 2018 at 01:55)</a>:</h4>
<p>None of them seem to allow me filter the patient id=367771 by condition.<br>
Using:</p>
<div class="codehilite"><pre><span></span>define &quot;test&quot; : [Condition : &quot;Heart Failure&quot;] C
</pre></div>



<a name="154013506"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Troubleshoot%20valueset/near/154013506" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Troubleshoot.20valueset.html#154013506">(Oct 30 2018 at 01:56)</a>:</h4>
<p>So the first declaration is the right one because it's using the canonical URL for the value set.</p>



<a name="154013507"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Troubleshoot%20valueset/near/154013507" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Troubleshoot.20valueset.html#154013507">(Oct 30 2018 at 01:56)</a>:</h4>
<p>Is that value set loaded on the same server that has the patient data?</p>



<a name="154013508"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Troubleshoot%20valueset/near/154013508" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aslan Brooke <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Troubleshoot.20valueset.html#154013508">(Oct 30 2018 at 01:57)</a>:</h4>
<p>Yes.</p>



<a name="154013509"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Troubleshoot%20valueset/near/154013509" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aslan Brooke <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Troubleshoot.20valueset.html#154013509">(Oct 30 2018 at 01:57)</a>:</h4>
<p>I copied the valueset over from the ontoserver tool: <a href="http://clinfhir.com/valuesetCreator.html" target="_blank" title="http://clinfhir.com/valuesetCreator.html">http://clinfhir.com/valuesetCreator.html</a></p>



<a name="154013512"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Troubleshoot%20valueset/near/154013512" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aslan Brooke <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Troubleshoot.20valueset.html#154013512">(Oct 30 2018 at 02:00)</a>:</h4>
<p>The Patient/367771 on the <a href="http://hapi.fhir.org/baseDstu3" target="_blank" title="http://hapi.fhir.org/baseDstu3">hapi.fhir.org/baseDstu3</a> has a condition with:</p>
<div class="codehilite"><pre><span></span>  &quot;code&quot;: {
    &quot;coding&quot;: [
      {
        &quot;system&quot;: &quot;http://hl7.org/fhir/sid/icd-10&quot;,
        &quot;code&quot;: &quot;I50221&quot;,
        &quot;display&quot;: &quot;Systolic heart failure, chronic&quot;
      }
    ]
  }
</pre></div>


<p>This code is in the valueset as seen in the expansion: <a href="http://hapi.fhir.org/baseDstu3/ValueSet/368154/$expand" target="_blank" title="http://hapi.fhir.org/baseDstu3/ValueSet/368154/$expand">http://hapi.fhir.org/baseDstu3/ValueSet/368154/$expand</a></p>



<a name="154013517"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Troubleshoot%20valueset/near/154013517" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Troubleshoot.20valueset.html#154013517">(Oct 30 2018 at 02:10)</a>:</h4>
<p>Yeah, that all looks right.</p>



<a name="154013518"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Troubleshoot%20valueset/near/154013518" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Troubleshoot.20valueset.html#154013518">(Oct 30 2018 at 02:11)</a>:</h4>
<p>Can you share the patient Resource and I'll see if I can reproduce it?</p>



<a name="154013519"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Troubleshoot%20valueset/near/154013519" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Troubleshoot.20valueset.html#154013519">(Oct 30 2018 at 02:12)</a>:</h4>
<p>Oh, nevermind, I see it.</p>



<a name="154013520"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Troubleshoot%20valueset/near/154013520" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aslan Brooke <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Troubleshoot.20valueset.html#154013520">(Oct 30 2018 at 02:12)</a>:</h4>
<p><a href="http://hapi.fhir.org/baseDstu3/Patient?_id=367771" target="_blank" title="http://hapi.fhir.org/baseDstu3/Patient?_id=367771">http://hapi.fhir.org/baseDstu3/Patient?_id=367771</a></p>



<a name="154013521"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Troubleshoot%20valueset/near/154013521" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Troubleshoot.20valueset.html#154013521">(Oct 30 2018 at 02:18)</a>:</h4>
<p>Yeah, reproduced, definitely seems like that should be coming back, I'll dig in and see what's going on.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
