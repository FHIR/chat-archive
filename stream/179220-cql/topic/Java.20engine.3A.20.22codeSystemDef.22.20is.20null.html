---
layout: page
title: "FHIR Chat  · Java engine: &quot;codeSystemDef&quot; is null · cql"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179220-cql/index.html">cql</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Java.20engine.3A.20.22codeSystemDef.22.20is.20null.html">Java engine: &quot;codeSystemDef&quot; is null</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="269527458"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Java%20engine%3A%20%22codeSystemDef%22%20is%20null/near/269527458" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Stanley <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Java.20engine.3A.20.22codeSystemDef.22.20is.20null.html#269527458">(Jan 27 2022 at 05:23)</a>:</h4>
<p>I have a CQL file that has no errors from the VSCode plugin, and evaluates (Java engine) the test data properly. However, there is an error with <a href="http://_refresh.sh">_refresh.sh</a> which is "ELM generation failed with the following error: Cannot invoke "org.hl7.elm.r1.CodeSystemDef.getId()" because "codeSystemDef" is null". The CQL file in question imports concepts from another CQL file. Other than that, I'm sort of lost as to what that error indicates or where to look.</p>



<a name="269603418"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Java%20engine%3A%20%22codeSystemDef%22%20is%20null/near/269603418" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Java.20engine.3A.20.22codeSystemDef.22.20is.20null.html#269603418">(Jan 27 2022 at 17:03)</a>:</h4>
<p>What version of the CQFTooling are you running?</p>



<a name="269634718"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Java%20engine%3A%20%22codeSystemDef%22%20is%20null/near/269634718" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Stanley <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Java.20engine.3A.20.22codeSystemDef.22.20is.20null.html#269634718">(Jan 27 2022 at 20:42)</a>:</h4>
<p>The bash script, <code>_updateCQFTooling.sh</code> seems to lock it to 1.3.1</p>



<a name="269637085"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Java%20engine%3A%20%22codeSystemDef%22%20is%20null/near/269637085" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Stanley <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Java.20engine.3A.20.22codeSystemDef.22.20is.20null.html#269637085">(Jan 27 2022 at 21:00)</a>:</h4>
<p>Oh, I see 1.4.0 was released. I'll update the scripts and have a go.</p>



<a name="269639448"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Java%20engine%3A%20%22codeSystemDef%22%20is%20null/near/269639448" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Stanley <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Java.20engine.3A.20.22codeSystemDef.22.20is.20null.html#269639448">(Jan 27 2022 at 21:18)</a>:</h4>
<p>So, updated tooling. The error persists, but is now more consistent. Anything importing from this CQL file has the error. I was copying the approach for the WHO SMART ANC for CQL file structure, e.g. separate concepts file. <a href="https://github.com/intrahealth/simple-hiv-ig/blob/master/input/cql/HIVConcepts.cql">https://github.com/intrahealth/simple-hiv-ig/blob/master/input/cql/HIVConcepts.cql</a></p>



<a name="269780571"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Java%20engine%3A%20%22codeSystemDef%22%20is%20null/near/269780571" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Java.20engine.3A.20.22codeSystemDef.22.20is.20null.html#269780571">(Jan 28 2022 at 18:29)</a>:</h4>
<p>Hmmm.... try 1.4.1-SNAPSHOT, I am pretty sure that issue has been addressed</p>



<a name="269780878"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Java%20engine%3A%20%22codeSystemDef%22%20is%20null/near/269780878" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Stanley <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Java.20engine.3A.20.22codeSystemDef.22.20is.20null.html#269780878">(Jan 28 2022 at 18:31)</a>:</h4>
<p>Thanks will do</p>



<a name="269973659"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Java%20engine%3A%20%22codeSystemDef%22%20is%20null/near/269973659" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Stanley <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Java.20engine.3A.20.22codeSystemDef.22.20is.20null.html#269973659">(Jan 31 2022 at 02:43)</a>:</h4>
<p>I built the 1.4.1-SNAPSHOT from the main branch. The tooling complains that "The package 'cqf.fhir.common' has no entry on the current build server". Is this related to the work to use CQF Common for FHIRHelpers and FHIR-ModelInfo that I may need to configure?</p>



<a name="270217158"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Java%20engine%3A%20%22codeSystemDef%22%20is%20null/near/270217158" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Stanley <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Java.20engine.3A.20.22codeSystemDef.22.20is.20null.html#270217158">(Feb 01 2022 at 14:17)</a>:</h4>
<p>I triggered the fhir build server for the missing cqf packages and now 1.4.1-snapshot runs. However, the error above persists: "ELM generation failed with the following error: Cannot invoke "org.hl7.elm.r1.CodeSystemDef.getId()" because "codeSystemDef" is null"</p>



<a name="270411354"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Java%20engine%3A%20%22codeSystemDef%22%20is%20null/near/270411354" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Java.20engine.3A.20.22codeSystemDef.22.20is.20null.html#270411354">(Feb 02 2022 at 16:18)</a>:</h4>
<p>Hmm.... it shouldn't be preventing the build or packaging of the Library resources, but it is still an issue. I will take a look and see what the issue is, but I'm going to have to debug.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
