---
layout: page
title: "FHIR Chat  · Editor packages · cql"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179220-cql/index.html">cql</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Editor.20packages.html">Editor packages</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="264280186"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Editor%20packages/near/264280186" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Frank Adrian <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Editor.20packages.html#264280186">(Dec 09 2021 at 10:16)</a>:</h4>
<p>I've enjoyed using the CQL packages for the Atom editor in the past. Our team has recently upgraded our compiler to accept FHIR 4.0.1. However, the Atom CQL package doesn't seem to recognize this FHIR version. Does anyone know of any plans to update the CQL packages in Atom to support FHIR 4.0.1? Or am I missing some updates from somewhere?</p>
<p>I've also tried the plugins for VSCode. In my setup, they tend to spew NPEs into the output tab and don't show errors in the problems tab. It could be that there's something wrong with my setup.</p>
<p>So are there any working editor environments for CQL using FHIR 4.0.1 right now? If not, are there any plans to get them to a working state? Or am I doing something wrong?</p>



<a name="264334881"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Editor%20packages/near/264334881" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> JP <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Editor.20packages.html#264334881">(Dec 09 2021 at 17:22)</a>:</h4>
<p>Atom should support 4.0.1. All of the Measures in the ecqm-content-r4 ig <a href="https://github.com/cqframework/ecqm-content-r4/blob/master/input/cql">here</a> were authored using Atom/VS Code. Do you have a repro? I'm happy to take a look.</p>
<p>Same goes for VS Code. Where are you seeing the NPEs?</p>



<a name="264493733"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Editor%20packages/near/264493733" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Frank Adrian <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Editor.20packages.html#264493733">(Dec 10 2021 at 19:06)</a>:</h4>
<p>Thanks, JP. I started with a vanilla Atom editor. I added the packages  language-cql 2.10.1 and language-preview-cql 0.0.8. As far as I know these are the most recent versions. When I load a library using FHIR version 4.0.1, I get an error that says:<br>
"Could not resolve model info provider for model FHIR, version 4.0.1."</p>
<p>Similarly in VSCode, I installed the Clinical Quality Language v0.1.1 extension. I am now getting NPEs on hover:</p>
<p>[Error - 10:42:59 AM] Request textDocument/hover failed.<br>
  Message: Internal error.<br>
  Code: -32603 <br>
java.util.concurrent.CompletionException: java.lang.NullPointerException<br>
    at java.base/java.util.concurrent.CompletableFuture.encodeThrowable(CompletableFuture.java:332)<br>
    at java.base/java.util.concurrent.CompletableFuture.uniAcceptNow(CompletableFuture.java:747)<br>
    at java.base/java.util.concurrent.CompletableFuture.uniAcceptStage(CompletableFuture.java:735)<br>
    at java.base/java.util.concurrent.CompletableFuture.thenAccept(CompletableFuture.java:2182)<br>
    at org.eclipse.lsp4j.jsonrpc.RemoteEndpoint.handleRequest(RemoteEndpoint.java:279)<br>
    at org.eclipse.lsp4j.jsonrpc.RemoteEndpoint.consume(RemoteEndpoint.java:190)<br>
    at org.eclipse.lsp4j.jsonrpc.json.StreamMessageProducer.handleMessage(StreamMessageProducer.java:194)<br>
    at org.eclipse.lsp4j.jsonrpc.json.StreamMessageProducer.listen(StreamMessageProducer.java:94)<br>
    at org.eclipse.lsp4j.jsonrpc.json.ConcurrentMessageProcessor.run(ConcurrentMessageProcessor.java:113)<br>
    at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)<br>
    at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)<br>
    at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)<br>
    at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)<br>
    at java.base/java.lang.Thread.run(Thread.java:833)<br>
Caused by: java.lang.NullPointerException</p>
<p>as well as:</p>
<p>Dec 10, 2021 10:43:12 AM org.eclipse.lsp4j.jsonrpc.RemoteEndpoint handleCancellation<br>
WARNING: Unmatched cancel notification for request id 6400</p>
<p>That's basically what's going on. PM me if you need more info.</p>



<a name="264501047"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Editor%20packages/near/264501047" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> JP <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Editor.20packages.html#264501047">(Dec 10 2021 at 20:07)</a>:</h4>
<p>Try uninstalling language-preview-cql 0.0.8. Those two extensions may be conflicting.</p>



<a name="264563918"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Editor%20packages/near/264563918" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Frank Adrian <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Editor.20packages.html#264563918">(Dec 11 2021 at 13:53)</a>:</h4>
<p>Perfect! Thanks for your help. I had no idea that those packages interfered with each other.<br>
Any idea about VSCode (which is my preferred editor these days).</p>



<a name="264576210"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Editor%20packages/near/264576210" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> JP <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Editor.20packages.html#264576210">(Dec 11 2021 at 18:12)</a>:</h4>
<p>Nothing offhand. I’ll take a look this weekend and see if I can repro the issue.</p>



<a name="264585423"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Editor%20packages/near/264585423" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> JP <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Editor.20packages.html#264585423">(Dec 11 2021 at 21:20)</a>:</h4>
<p><span class="user-mention" data-user-id="336710">@Frank Adrian</span> - Messed with it a bit and the VS Code plugin seems to be working as expected for the igs I tried. Do you have a couple CQL files that I can use to attempt to repro?</p>



<a name="264712327"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Editor%20packages/near/264712327" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Frank Adrian <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Editor.20packages.html#264712327">(Dec 13 2021 at 14:22)</a>:</h4>
<p><span class="user-mention silent" data-user-id="194178">JP</span> <a href="#narrow/stream/179220-cql/topic/Editor.20packages/near/264585423">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="336710">Frank Adrian</span> - Messed with it a bit and the VS Code plugin seems to be working as expected for the igs I tried. Do you have a couple CQL files that I can use to attempt to repro?</p>
</blockquote>
<p>Unfortunately, nothing I can share. Oddly enough, I do not get the errors on the NCQA digital measures I have checked. I'll do a bit more digging from my side.</p>



<a name="264957593"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Editor%20packages/near/264957593" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Frank Adrian <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Editor.20packages.html#264957593">(Dec 15 2021 at 02:26)</a>:</h4>
<p>By the way, JP, I don't seem to be getting warning messages out of the Atom package. I used to get warnings like this one:<br>
"Warning:[459:12, 459:28] List-valued expression was demoted to a singleton.", but I haven't seen any from the latest CQL package. Is there some configuration setting I'm overlooking?</p>



<a name="265087541"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Editor%20packages/near/265087541" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> JP <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Editor.20packages.html#265087541">(Dec 15 2021 at 22:50)</a>:</h4>
<p>Are you still getting any warnings at all? Or just not that specific one?</p>



<a name="265320915"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Editor%20packages/near/265320915" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Frank Adrian <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Editor.20packages.html#265320915">(Dec 17 2021 at 16:18)</a>:</h4>
<p>Hi JP. I'm not getting any, but then that's sort of hard to tell because it's hard to tell the absence of something. I know that I get the demotion warnings on another CQL-&gt;ELM translator setup, and I don't have any other ones coming out of it, so I figure there are no other ones there.</p>



<a name="265351737"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Editor%20packages/near/265351737" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> JP <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Editor.20packages.html#265351737">(Dec 17 2021 at 19:51)</a>:</h4>
<p>Gave Atom a whirl and it seems to be working ok. Not sure how to best help resolve your issues without some type of repro of the issue. <span aria-label="frown" class="emoji emoji-1f641" role="img" title="frown">:frown:</span></p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
