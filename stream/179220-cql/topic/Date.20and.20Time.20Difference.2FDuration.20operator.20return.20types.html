---
layout: page
title: "FHIR Chat  · Date and Time Difference/Duration operator return types · cql"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179220-cql/index.html">cql</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Date.20and.20Time.20Difference.2FDuration.20operator.20return.20types.html">Date and Time Difference/Duration operator return types</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="180566280"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Date%20and%20Time%20Difference/Duration%20operator%20return%20types/near/180566280" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Zach Smith <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Date.20and.20Time.20Difference.2FDuration.20operator.20return.20types.html#180566280">(Nov 12 2019 at 21:53)</a>:</h4>
<p>The docs for the <a href="https://cql.hl7.org/09-b-cqlreference.html#difference" target="_blank" title="https://cql.hl7.org/09-b-cqlreference.html#difference">difference</a> and <a href="https://cql.hl7.org/09-b-cqlreference.html#duration" target="_blank" title="https://cql.hl7.org/09-b-cqlreference.html#duration">duration</a> operators say the result type is always an <code>Integer</code>. However, one of the examples on each operation makes it seem like it might return an <code>Interval&lt;Integer&gt;</code> for imprecise comparisons. Specifically:</p>
<div class="codehilite"><pre><span></span>define UncertainDifferenceInMonths: difference in months between @2012-01-02 and @2012 // [0, 11]
define UncertainDurationInMonths: months between @2012-01-02 and @2012 // [0, 10]
</pre></div>



<a name="180567409"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Date%20and%20Time%20Difference/Duration%20operator%20return%20types/near/180567409" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Date.20and.20Time.20Difference.2FDuration.20operator.20return.20types.html#180567409">(Nov 12 2019 at 22:05)</a>:</h4>
<p>Uncertainty is used to get more intuitive semantics in cases where partial date time comparisons would otherwise result in null. So an implementation can return null if it doesn't support the uncertainty calculations, or it can use implicit conversions to make the uncertainties transparent to authors: <a href="https://cql.hl7.org/05-languagesemantics.html#implicit-conversion" target="_blank" title="https://cql.hl7.org/05-languagesemantics.html#implicit-conversion">https://cql.hl7.org/05-languagesemantics.html#implicit-conversion</a></p>



<a name="180568162"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Date%20and%20Time%20Difference/Duration%20operator%20return%20types/near/180568162" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Zach Smith <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Date.20and.20Time.20Difference.2FDuration.20operator.20return.20types.html#180568162">(Nov 12 2019 at 22:15)</a>:</h4>
<p>I see, so those comments represent an uncertainty. That makes sense, thanks</p>



<a name="180568224"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Date%20and%20Time%20Difference/Duration%20operator%20return%20types/near/180568224" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Zach Smith <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Date.20and.20Time.20Difference.2FDuration.20operator.20return.20types.html#180568224">(Nov 12 2019 at 22:16)</a>:</h4>
<p>Is the concept of uncertainty represented in the type system at all in CQL?</p>



<a name="180568264"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Date%20and%20Time%20Difference/Duration%20operator%20return%20types/near/180568264" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Zach Smith <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Date.20and.20Time.20Difference.2FDuration.20operator.20return.20types.html#180568264">(Nov 12 2019 at 22:16)</a>:</h4>
<p>or is the type of <code>uncertainty[0, 10]</code> just an <code>Integer</code>?</p>



<a name="180568648"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Date%20and%20Time%20Difference/Duration%20operator%20return%20types/near/180568648" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Date.20and.20Time.20Difference.2FDuration.20operator.20return.20types.html#180568648">(Nov 12 2019 at 22:21)</a>:</h4>
<p>No, it’s intentionally not surfaced in the type system so that implementations can choose whether to support it, though currently both the JavaScript and java reference implementations do support it. So yes, from the type perspective, the type of an uncertainty over integers is integer.</p>



<a name="180569141"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Date%20and%20Time%20Difference/Duration%20operator%20return%20types/near/180569141" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Zach Smith <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Date.20and.20Time.20Difference.2FDuration.20operator.20return.20types.html#180569141">(Nov 12 2019 at 22:28)</a>:</h4>
<p>Got it, thanks Bryn!</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
