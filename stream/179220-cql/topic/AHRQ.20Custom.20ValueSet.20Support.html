---
layout: page
title: "FHIR Chat  · AHRQ Custom ValueSet Support · cql"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179220-cql/index.html">cql</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/AHRQ.20Custom.20ValueSet.20Support.html">AHRQ Custom ValueSet Support</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="254430243"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/AHRQ%20Custom%20ValueSet%20Support/near/254430243" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Raghavan Chandrabalan <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/AHRQ.20Custom.20ValueSet.20Support.html#254430243">(Sep 22 2021 at 20:05)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="191469">@Chris Moesel</span>, I'm using the AHRQ CQL Services and would like to know if there's a way to reference a ValueSet that's not on VSAC in an imported CQL Library or any tools available to support this case?</p>



<a name="254433778"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/AHRQ%20Custom%20ValueSet%20Support/near/254433778" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/AHRQ.20Custom.20ValueSet.20Support.html#254433778">(Sep 22 2021 at 20:29)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="432571">@Raghavan Chandrabalan</span>.  The AHRQ CQL Services currently works only with VSAC "out of the box".  I was thinking you might be able to get it working for other value sets by editing the <code>.vsca_cache/valueset-db.json</code> file -- but on second thought, I'm not sure that would work either -- as I think the CodeService expects to extract an OID from the value set URL before doing the lookup in that file.  So... I think the only approach that would work right now would be to replace the <code>code-service-loader.js</code> with another implementation that defines a new <code>CodeService</code> that works with other value sets (which, as far as I know, does not exist).</p>
<p>This is something I'd like to add support for in the future, but I'm not sure exactly when (or even if) we'll be able to get to it.  Support for VSAC is currently our primary use case.</p>



<a name="254441971"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/AHRQ%20Custom%20ValueSet%20Support/near/254441971" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Denning <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/AHRQ.20Custom.20ValueSet.20Support.html#254441971">(Sep 22 2021 at 21:25)</a>:</h4>
<p><a href="https://github.com/cqframework/cqf-tooling/pull/298">https://github.com/cqframework/cqf-tooling/pull/298</a> may be of interest</p>



<a name="254526954"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/AHRQ%20Custom%20ValueSet%20Support/near/254526954" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/AHRQ.20Custom.20ValueSet.20Support.html#254526954">(Sep 23 2021 at 12:35)</a>:</h4>
<p><span class="user-mention" data-user-id="194174">@Paul Denning</span> - that is for the Java based CQL tools, so it won't help with the Node-based CQL Services; except to provide some insight into approaches one might take to implement something like this in JavaScript.</p>



<a name="254566351"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/AHRQ%20Custom%20ValueSet%20Support/near/254566351" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Raghavan Chandrabalan <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/AHRQ.20Custom.20ValueSet.20Support.html#254566351">(Sep 23 2021 at 16:44)</a>:</h4>
<p>Thanks for the info, defining a new <code>CodeService</code> sounds like a good way to go about it. It looks like the method of editing <code>valueset-db.json</code> would technically work though since any non-URL OID found is returned as-is to <code>CodeService</code>.</p>



<a name="254775166"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/AHRQ%20Custom%20ValueSet%20Support/near/254775166" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/AHRQ.20Custom.20ValueSet.20Support.html#254775166">(Sep 24 2021 at 21:26)</a>:</h4>
<p><span class="user-mention" data-user-id="432571">@Raghavan Chandrabalan</span>, note that there is tooling to go from FHIR ValueSet resources to the valueset-db.json format expected by the CodeService: <a href="https://github.com/cqframework/cqf-tooling/blob/master/src/main/java/org/opencds/cqf/tooling/terminology/ToJsonValueSetDbOperation.java#L18">https://github.com/cqframework/cqf-tooling/blob/master/src/main/java/org/opencds/cqf/tooling/terminology/ToJsonValueSetDbOperation.java#L18</a></p>



<a name="254791276"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/AHRQ%20Custom%20ValueSet%20Support/near/254791276" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/AHRQ.20Custom.20ValueSet.20Support.html#254791276">(Sep 25 2021 at 00:17)</a>:</h4>
<p>Thanks, <span class="user-mention" data-user-id="191359">@Bryn Rhodes</span>!  I forgot about that.  I need to bookmark it or something.  And add it to the docs.  Thanks!</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
