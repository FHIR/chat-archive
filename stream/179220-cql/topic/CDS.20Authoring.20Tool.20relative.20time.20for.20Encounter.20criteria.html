---
layout: page
title: "FHIR Chat  · CDS Authoring Tool relative time for Encounter criteria · cql"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179220-cql/index.html">cql</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/CDS.20Authoring.20Tool.20relative.20time.20for.20Encounter.20criteria.html">CDS Authoring Tool relative time for Encounter criteria</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="264066804"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/CDS%20Authoring%20Tool%20relative%20time%20for%20Encounter%20criteria/near/264066804" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Raghavan Chandrabalan <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/CDS.20Authoring.20Tool.20relative.20time.20for.20Encounter.20criteria.html#264066804">(Dec 07 2021 at 20:27)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="191469">@Chris Moesel</span>, I'm trying to create an inclusion criteria for the existence of some Encounter within a relative time frame, like one that ended in the last week at the time of execution. Do you know if such a criteria is possible to implement using the Authoring Tool? </p>
<p>I noticed Observations and Procedures have the "Look back" modifier that would work for this, but that modifier isn't available for Encounters. Building a new modifier using the Period property seems close, but the operators only accept absolute datetimes.</p>
<p>Thank you</p>



<a name="264074103"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/CDS%20Authoring%20Tool%20relative%20time%20for%20Encounter%20criteria/near/264074103" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/CDS.20Authoring.20Tool.20relative.20time.20for.20Encounter.20criteria.html#264074103">(Dec 07 2021 at 21:24)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="432571">@Raghavan Chandrabalan</span>. You're right.  Encounters lack a "lookback" modifier and the operators for Encounter period don't support a lookback either.  This is a good area for the Authoring Tool to improve.</p>
<p>If you're familiar enough w/ CQL to write a small library by hand, you could create a library that has a function called "EncounterLookback" that takes a List&lt;Encounter&gt; as the first argument and a quantity or integer as the second argument -- then upload it and use it as an <a href="https://cds.ahrq.gov/authoring/documentation#Using_External_CQL_Expression_Modifiers">External CQL Modifier</a>.</p>



<a name="264076618"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/CDS%20Authoring%20Tool%20relative%20time%20for%20Encounter%20criteria/near/264076618" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Raghavan Chandrabalan <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/CDS.20Authoring.20Tool.20relative.20time.20for.20Encounter.20criteria.html#264076618">(Dec 07 2021 at 21:40)</a>:</h4>
<p>Ah I see, I'll try making an external library. Thanks!</p>



<a name="264081735"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/CDS%20Authoring%20Tool%20relative%20time%20for%20Encounter%20criteria/near/264081735" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/CDS.20Authoring.20Tool.20relative.20time.20for.20Encounter.20criteria.html#264081735">(Dec 07 2021 at 22:17)</a>:</h4>
<p>Sorry for the current limitation.  Let me know if you run into any issues!</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
