---
layout: page
title: "FHIR Chat  · Underscores · cql"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179220-cql/index.html">cql</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Underscores.html">Underscores</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="243927298"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Underscores/near/243927298" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Denning <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Underscores.html#243927298">(Jun 25 2021 at 14:59)</a>:</h4>
<p>MAT says CQL  Library names must start with an upper case letter, followed by alpha-numeric character(s) and must not contain spaces, '_' (underscores), or other special characters.</p>
<p>Where does this requirement come from?</p>
<p>Also in MAT, Measure name does not allow underscores; where does this come from?</p>



<a name="243945617"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Underscores/near/243945617" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> JP <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Underscores.html#243945617">(Jun 25 2021 at 17:24)</a>:</h4>
<p>Here's the standard for CQL identifiers:<br>
<a href="https://cql.hl7.org/03-developersguide.html#identifiers">https://cql.hl7.org/03-developersguide.html#identifiers</a></p>
<p>Here's the standard for Measure names:<br>
<a href="https://www.hl7.org/fhir/measure.html#invs">https://www.hl7.org/fhir/measure.html#invs</a></p>
<p>Both allow underscores. However, FHIR ids (separate from both Measure names and CQL identifiers) do not:<br>
<a href="https://www.hl7.org/fhir/resource.html#id">https://www.hl7.org/fhir/resource.html#id</a></p>
<p>I can't speak with certainty since I'm not on the MAT team but I'd guess they've chosen to use the lowest common denominator between those requirements.</p>



<a name="243955334"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Underscores/near/243955334" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Underscores.html#243955334">(Jun 25 2021 at 18:49)</a>:</h4>
<p>It's actually a new requirement based on experience with underscores causing problems, introduced as part of the latest QM IG ballot:</p>



<a name="243955335"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Underscores/near/243955335" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Underscores.html#243955335">(Jun 25 2021 at 18:49)</a>:</h4>
<p><a href="http://hl7.org/fhir/us/cqfmeasures/2021May/using-cql.html#library-name-and-url">http://hl7.org/fhir/us/cqfmeasures/2021May/using-cql.html#library-name-and-url</a></p>



<a name="243971241"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Underscores/near/243971241" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Silva <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Underscores.html#243971241">(Jun 25 2021 at 21:10)</a>:</h4>
<p>At the last FHIR Connectathon I noticed that some of the DaVinci DTR profile libraries use underscores, e.g. CDS_Connect_Commons_for_FHIRv400</p>
<p><a href="http://www.hl7.org/fhir/us/davinci-dtr/resources__home-o2-prepopulation.html">http://www.hl7.org/fhir/us/davinci-dtr/resources__home-o2-prepopulation.html</a><br>
and some can be found here: <a href="https://github.com/HL7-DaVinci/CDS-Library/tree/master/CRD-DTR">https://github.com/HL7-DaVinci/CDS-Library/tree/master/CRD-DTR</a></p>



<a name="243974182"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Underscores/near/243974182" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Underscores.html#243974182">(Jun 25 2021 at 21:39)</a>:</h4>
<p><span class="user-mention" data-user-id="298707">@John Silva</span> -  Thanks for noticing this.  CDS_Connect_Commons_for_FHIRv400 comes from the CDS Connect project, which I am a part of.  When those libraries were created, issues w/ underscores had not yet come up.  As they're intended for CDS (not measures), they are not governed by the Quality Measure Implementation Guide. BUT... I've just looked now and it appears that FHIR Clinical Guidelines <a href="http://hl7.org/fhir/uv/cpg/STU1/libraries.html#library-name-and-url">also prohibits underscores in names</a> -- so... it's probably something that we should look into.</p>



<a name="243975201"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Underscores/near/243975201" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Silva <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Underscores.html#243975201">(Jun 25 2021 at 21:50)</a>:</h4>
<p>Thanks Chris!   When I was trying to use the CQL Libraries and FHIR resources from the DTR IG I ran into this and had to rename things.  (Separately, I also changed to use FHIR 4.0.1 instead of the 4.0.0 used in these.)</p>



<a name="244080988"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Underscores/near/244080988" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Underscores.html#244080988">(Jun 27 2021 at 19:25)</a>:</h4>
<p>The challenge was that we wanted to use the library <code>name</code> directly in the canonical URL, and since the publisher requires canonical URLs to match resource IDs, it made things simpler all around to introduce that constraint.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
