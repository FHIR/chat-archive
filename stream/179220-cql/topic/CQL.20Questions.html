---
layout: page
title: "FHIR Chat  · CQL Questions · cql"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179220-cql/index.html">cql</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/CQL.20Questions.html">CQL Questions</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153897752"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/CQL%20Questions/near/153897752" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/CQL.20Questions.html#153897752">(Jul 21 2017 at 20:49)</a>:</h4>
<p><span class="user-mention" data-user-id="191359">@Bryn Rhodes</span> shouldn't there be a way to associate a namespace with a CQL library?</p>



<a name="153897764"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/CQL%20Questions/near/153897764" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/CQL.20Questions.html#153897764">(Jul 22 2017 at 07:19)</a>:</h4>
<p>another more simple question: I'm having trouble with parsing this:</p>



<a name="153897765"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/CQL%20Questions/near/153897765" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/CQL.20Questions.html#153897765">(Jul 22 2017 at 07:19)</a>:</h4>
<div class="codehilite"><pre><span></span>[Condition: severity in &quot;Acute Severity&quot;
</pre></div>



<a name="153897766"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/CQL%20Questions/near/153897766" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/CQL.20Questions.html#153897766">(Jul 22 2017 at 07:21)</a>:</h4>
<p>for which the Antlr grammar is :</p>



<a name="153897767"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/CQL%20Questions/near/153897767" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/CQL.20Questions.html#153897767">(Jul 22 2017 at 07:22)</a>:</h4>
<div class="codehilite"><pre><span></span>&#39;[&#39; namedTypeSpecifier (&#39;:&#39; (codePath &#39;in&#39;)? terminology)? &#39;]&#39;
</pre></div>



<a name="153897768"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/CQL%20Questions/near/153897768" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/CQL.20Questions.html#153897768">(Jul 22 2017 at 07:22)</a>:</h4>
<p>why is it 'codepath' if it can't be a code path? What are you supposed to do if it is a code path?</p>



<a name="153897769"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/CQL%20Questions/near/153897769" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/CQL.20Questions.html#153897769">(Jul 22 2017 at 07:23)</a>:</h4>
<div class="codehilite"><pre><span></span>&quot;AllergyIntolerance&quot; : reaction.substance in &quot;x&quot;]
</pre></div>



<a name="153897770"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/CQL%20Questions/near/153897770" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/CQL.20Questions.html#153897770">(Jul 22 2017 at 07:24)</a>:</h4>
<p>the other thing I don't like about it - and this seems often true of cql - is that you have to parse ahead to know what the thing is.</p>



<a name="153897771"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/CQL%20Questions/near/153897771" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/CQL.20Questions.html#153897771">(Jul 22 2017 at 10:35)</a>:</h4>
<p>like how far you have to parse into a statement before you find out whether you parsing a retrieve or a query. That's just nuts....</p>



<a name="153897772"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/CQL%20Questions/near/153897772" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/CQL.20Questions.html#153897772">(Jul 22 2017 at 10:39)</a>:</h4>
<p>in fact, as far as I can tell, the only way to know, once you get to the ] of a retrieve, whether what follows is the alias is to read over it and look for 'where' or something. That's pretty unfriendly.</p>



<a name="153897773"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/CQL%20Questions/near/153897773" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/CQL.20Questions.html#153897773">(Jul 22 2017 at 13:34)</a>:</h4>
<p>as for this:</p>



<a name="153897774"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/CQL%20Questions/near/153897774" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/CQL.20Questions.html#153897774">(Jul 22 2017 at 13:34)</a>:</h4>
<div class="codehilite"><pre><span></span>    not exists (Common.&quot;Results Present For Chlamydia Screening&quot; S where S.&quot;issued&quot; during Interval[Today() - 1 years, Today()])
</pre></div>



<a name="153897775"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/CQL%20Questions/near/153897775" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/CQL.20Questions.html#153897775">(Jul 22 2017 at 13:34)</a>:</h4>
<p>so far as I can figure, the only way to know that "S" is an alias is because it's not an operation or a reserved word</p>



<a name="153897776"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/CQL%20Questions/near/153897776" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/CQL.20Questions.html#153897776">(Jul 22 2017 at 13:35)</a>:</h4>
<p>I really miss a keyword like 'alias' to stabilise the syntax here</p>



<a name="153897781"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/CQL%20Questions/near/153897781" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/CQL.20Questions.html#153897781">(Jul 22 2017 at 22:39)</a>:</h4>
<p>there's a typo in one of the example CQL files...</p>



<a name="153897782"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/CQL%20Questions/near/153897782" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/CQL.20Questions.html#153897782">(Jul 22 2017 at 22:39)</a>:</h4>
<div class="codehilite"><pre><span></span>parameter MeasurementPeriod default Interval[DateTime(2013, 1, 1, 0, 0, 0, 0), DateTime(2014, 1, 1, 0, 0, 0, 0))
</pre></div>



<a name="153897783"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/CQL%20Questions/near/153897783" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/CQL.20Questions.html#153897783">(Jul 22 2017 at 22:39)</a>:</h4>
<p>should be</p>



<a name="153897784"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/CQL%20Questions/near/153897784" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/CQL.20Questions.html#153897784">(Jul 22 2017 at 22:39)</a>:</h4>
<div class="codehilite"><pre><span></span>parameter MeasurementPeriod default Interval[DateTime(2013, 1, 1, 0, 0, 0, 0), DateTime(2014, 1, 1, 0, 0, 0, 0)]
</pre></div>



<a name="153897785"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/CQL%20Questions/near/153897785" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/CQL.20Questions.html#153897785">(Jul 22 2017 at 22:39)</a>:</h4>
<p>ChlamydiaScreening_CQM.cql</p>



<a name="153897877"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/CQL%20Questions/near/153897877" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/CQL.20Questions.html#153897877">(Jul 24 2017 at 07:35)</a>:</h4>
<p><span class="user-mention" data-user-email="grahame@healthintersections.com.au" data-user-id="10">@Grahame Grieve</span>, on the namespace question, the name of the library is the namespace, in general, but you can also alias a referenced library using the <code>called</code> clause of the <code>include</code> declaration.</p>



<a name="153897878"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/CQL%20Questions/near/153897878" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/CQL.20Questions.html#153897878">(Jul 24 2017 at 07:38)</a>:</h4>
<p>I suspect global namespaces will be called for</p>



<a name="153897879"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/CQL%20Questions/near/153897879" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/CQL.20Questions.html#153897879">(Jul 24 2017 at 07:39)</a>:</h4>
<p>that typo appears in about 2/3 of the example CQL files packaged with the spec - closing an interval declaration with a ) instead of ]</p>



<a name="153897880"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/CQL%20Questions/near/153897880" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/CQL.20Questions.html#153897880">(Jul 24 2017 at 07:41)</a>:</h4>
<p>On the typo, that's not a typo, Interval syntax in CQL indicates open/closed boundaries with <code>(</code> for open and <code>[</code> for closed.</p>



<a name="153897881"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/CQL%20Questions/near/153897881" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/CQL.20Questions.html#153897881">(Jul 24 2017 at 07:41)</a>:</h4>
<p>So those are DateTime intervals beginning on the first day of the year and ending immediately before the first day of the next year.</p>



<a name="153897883"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/CQL%20Questions/near/153897883" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/CQL.20Questions.html#153897883">(Jul 24 2017 at 07:43)</a>:</h4>
<p>hm I missed that in the grammar</p>



<a name="153897884"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/CQL%20Questions/near/153897884" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/CQL.20Questions.html#153897884">(Jul 24 2017 at 07:44)</a>:</h4>
<p>On the codePath question, yes, that should be a path in general, but we left it as an identifier for simplicity at this point. You can specify a codePath with full path syntax in the model info for the default codePath, but allowing it in the retrieve would be a good enhancement.</p>



<a name="153897885"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/CQL%20Questions/near/153897885" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/CQL.20Questions.html#153897885">(Jul 24 2017 at 07:45)</a>:</h4>
<p>Submit a comment?</p>



<a name="153897886"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/CQL%20Questions/near/153897886" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/CQL.20Questions.html#153897886">(Jul 24 2017 at 07:46)</a>:</h4>
<p>well, it might connect as is with the split between parameter and path in FHIR.</p>



<a name="153897887"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/CQL%20Questions/near/153897887" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/CQL.20Questions.html#153897887">(Jul 24 2017 at 07:47)</a>:</h4>
<p>where would I submit a comment for CQL?</p>



<a name="153897888"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/CQL%20Questions/near/153897888" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/CQL.20Questions.html#153897888">(Jul 24 2017 at 07:48)</a>:</h4>
<p><a href="http://www.hl7.org/dstucomments/showdetail.cfm?dstuid=211" target="_blank" title="http://www.hl7.org/dstucomments/showdetail.cfm?dstuid=211">http://www.hl7.org/dstucomments/showdetail.cfm?dstuid=211</a></p>



<a name="153897890"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/CQL%20Questions/near/153897890" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/CQL.20Questions.html#153897890">(Jul 24 2017 at 07:50)</a>:</h4>
<p>On the missing an "alias" keyword, we purposely omitted a query-start token (except for multi-source queries, which start with <code>from</code>) because it cluttered the simplest case. We've received mixed feedback on that feature though, and I'd be happy to see a comment on that as well.</p>



<a name="153897925"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/CQL%20Questions/near/153897925" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/CQL.20Questions.html#153897925">(Jul 24 2017 at 12:32)</a>:</h4>
<p>this I think is a typo:</p>



<a name="153897926"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/CQL%20Questions/near/153897926" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/CQL.20Questions.html#153897926">(Jul 24 2017 at 12:32)</a>:</h4>
<div class="codehilite"><pre><span></span>with &quot;InpatientEncounters&quot; E such that ED.&quot;period&quot; ends 1 hour or less before start of E.&quot;period&quot;
</pre></div>



<a name="153897927"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/CQL%20Questions/near/153897927" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/CQL.20Questions.html#153897927">(Jul 24 2017 at 12:32)</a>:</h4>
<p>should be</p>



<a name="153897928"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/CQL%20Questions/near/153897928" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/CQL.20Questions.html#153897928">(Jul 24 2017 at 12:32)</a>:</h4>
<div class="codehilite"><pre><span></span>with &quot;InpatientEncounters&quot; E such that ED.&quot;period&quot; ends 1 hours or less before start of E.&quot;period&quot;
</pre></div>



<a name="153897940"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/CQL%20Questions/near/153897940" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/CQL.20Questions.html#153897940">(Jul 24 2017 at 14:11)</a>:</h4>
<p>No, the language allows both plural and singular time durations.</p>



<a name="153897947"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/CQL%20Questions/near/153897947" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/CQL.20Questions.html#153897947">(Jul 24 2017 at 15:35)</a>:</h4>
<p>really? i just cannot find that in the antlr grammar</p>



<a name="153897948"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/CQL%20Questions/near/153897948" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/CQL.20Questions.html#153897948">(Jul 24 2017 at 15:41)</a>:</h4>
<p>do you have to get that right with the value? 1 hour or 2 hours? or is 1 hours or 2 hour acceptable?</p>



<a name="153897952"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/CQL%20Questions/near/153897952" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/CQL.20Questions.html#153897952">(Jul 24 2017 at 17:30)</a>:</h4>
<p>It's in the quantity rule, which is in the imported fhirpath.g4. unit can be a dateTimePrecision, or a pluralDateTimePrecision, or a UCUM string.</p>



<a name="153897954"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/CQL%20Questions/near/153897954" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/CQL.20Questions.html#153897954">(Jul 24 2017 at 17:31)</a>:</h4>
<p>And no, it doesn't have to match with the value, <code>1 hours</code> and <code>2 hour</code> are both acceptable. It's a flexibility to enable authors to write the most natural phrasing, but doesn't have any impact on the semantics.</p>



<a name="250017329"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/CQL%20Questions/near/250017329" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tien Thai <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/CQL.20Questions.html#250017329">(Aug 19 2021 at 17:19)</a>:</h4>
<p>Is there a way to check if a given RxNORM is part of a Value Set in CQL?  Basically, I would like to define a function that takes an RxNORM as a parameter and check if this RxNORM code is part of a value set (e.g. "Opioid Medications")?  Thanks very much for your help.</p>



<a name="250026787"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/CQL%20Questions/near/250026787" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Riley <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/CQL.20Questions.html#250026787">(Aug 19 2021 at 18:24)</a>:</h4>
<p>Why do you want to do this in CQL? You  could use a terminology server like the Value Set Authority Center (VSAC) <a href="https://vsac.nlm.nih.gov/">https://vsac.nlm.nih.gov/</a> which has an api to expand  valuesets into collections of  codes.</p>



<a name="250030256"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/CQL%20Questions/near/250030256" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tien Thai <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/CQL.20Questions.html#250030256">(Aug 19 2021 at 18:50)</a>:</h4>
<p>Michael,<br>
Thank you very much for your response.  Can you please point me to such API as I could not find any API in the VSAC site? <br>
 The reason for this check is that we want to be able to tell if the given RxNORM is part of our specific value set and if it is return the name of the medication back to caller.</p>



<a name="250031131"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/CQL%20Questions/near/250031131" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/CQL.20Questions.html#250031131">(Aug 19 2021 at 18:56)</a>:</h4>
<p>CQL has terminology declarations to allow you to do this in CQL, but engage a terminology server to perform the actual check when the CQL is evaluated. See the <a href="https://cql.hl7.org/02-authorsguide.html#terminology">Terminology</a> section of the author's guide for examples and discussion.</p>



<a name="250148551"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/CQL%20Questions/near/250148551" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Riley <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/CQL.20Questions.html#250148551">(Aug 20 2021 at 17:34)</a>:</h4>
<p>Tien, sorry that front page link isn't very helpful is it? This is a more in depth documentation on how to use the FHIR Terminology Service that VSAC hosts. You have to sign up and get an api key, but you can expand valuesets there with an HTTP request, no CQL required. <a href="https://www.nlm.nih.gov/vsac/support/usingvsac/vsacfhirapi.html">https://www.nlm.nih.gov/vsac/support/usingvsac/vsacfhirapi.html</a>. You can even use the $validate-code operation they provide to check if a specific code is in the valueset on a request, instead of parsing yourself.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
