---
layout: page
title: "FHIR Chat  · &#x27;return&#x27; semantics · cql"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179220-cql/index.html">cql</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/&#x27;return&#x27;.20semantics.html">&#x27;return&#x27; semantics</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="154010162"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/%27return%27%20semantics/near/154010162" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Georg Fette <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/&#x27;return&#x27;.20semantics.html#154010162">(Oct 18 2018 at 08:03)</a>:</h4>
<p>Hello,<br>
I have some questions related to the 'return' operand in CQL:<br>
- Is another structure other than 'Tuple' allowed to form results ? If arbitrary structures are allowed to be constructed in the return part how does the syntax of the 'constructors' of those structures look like ? On page 46 of the CQL documentation there is an example of a 'Concept' literal. But it is not clear to me how the values in the winged brackets are assigned to the members of the concept in the example. How would it look like if the returned results would be e.g. ad hoc constructed patient resources that are created by values retrieved by the query statment ?<br>
- If 'Tuple' is used as return type, how does it look like when elements with different cardinality are used as the elements of the tuple ? Like in<br>
 [Encounter] E return Tuple { id: E.identifier, diagnosis: E.diagnosis }<br>
Does in this case each tuple contain a list as its second element ?<br>
- If 'Tuple' is used as return type, is it allowed to create the tuple of elements of differnt types mentioned in the query statement ? Something like:<br>
[Encounter] E with [Condition] C return Tuple { id: E.identifier, c: C.identifier }<br>
Does the list of returned tuple represent the cartesian product of all encounters and conditions that are found ? I have thought of the cartesian product because every valid encounter would have to be combined with every valid condition. It would look a bit like an unconstrained join in SQL which would as well return a cartesian product.<br>
Greetings<br>
Georg</p>



<a name="154011253"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/%27return%27%20semantics/near/154011253" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/&#x27;return&#x27;.20semantics.html#154011253">(Oct 23 2018 at 00:07)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="196537">@Georg Fette</span>, the short answer is yes to all of the above. CQL supports a tuple selector <code>{ id: 1, name: 'Joe' }</code> (the <code>Tuple</code> keyword is optional), but CQL also supports instance selectors using the same syntax, but with the name of the type as a prefix. So something like  <code>Encounter { id: 1, period: ... }</code>.</p>



<a name="154011254"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/%27return%27%20semantics/near/154011254" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/&#x27;return&#x27;.20semantics.html#154011254">(Oct 23 2018 at 00:07)</a>:</h4>
<p>And yes, the unfiltered result of a multi-source query is the Cartesian product of all the input sources.</p>



<a name="154011255"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/%27return%27%20semantics/near/154011255" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/&#x27;return&#x27;.20semantics.html#154011255">(Oct 23 2018 at 00:07)</a>:</h4>
<p>Exactly like an unconstrained join in SQL.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
