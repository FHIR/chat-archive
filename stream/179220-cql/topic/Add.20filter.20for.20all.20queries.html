---
layout: page
title: "FHIR Chat  · Add filter for all queries · cql"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179220-cql/index.html">cql</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Add.20filter.20for.20all.20queries.html">Add filter for all queries</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="245145475"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Add%20filter%20for%20all%20queries/near/245145475" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Adrien Prost <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Add.20filter.20for.20all.20queries.html#245145475">(Jul 07 2021 at 08:25)</a>:</h4>
<p>Hello, is there a way to restrict all conditions/observation retrieved in queries with a specific time frame? I would like to be able to do so without adding that filter in each query/clause. More generally, is there a feature that lets you add filters for specific resources such that all queries done on these resources use the filter ?</p>



<a name="245216757"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Add%20filter%20for%20all%20queries/near/245216757" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Riley <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Add.20filter.20for.20all.20queries.html#245216757">(Jul 07 2021 at 17:43)</a>:</h4>
<p>Is this using the FhirDataProvider? I don't believe there is one here, unfortunately.</p>



<a name="245254521"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Add%20filter%20for%20all%20queries/near/245254521" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> JP <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Add.20filter.20for.20all.20queries.html#245254521">(Jul 07 2021 at 23:17)</a>:</h4>
<p>The only implicit restriction is the context that's set:</p>
<p><code>context Patient</code></p>
<p>That automatically applies a restriction to the specific Patient. There aren't any implicit restrictions for time-based queries.</p>



<a name="245288692"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Add%20filter%20for%20all%20queries/near/245288692" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Adrien Prost <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Add.20filter.20for.20all.20queries.html#245288692">(Jul 08 2021 at 09:06)</a>:</h4>
<p>Okay so in this case this would mean I would have to add as a parameter a time period filter to all functions?</p>



<a name="245288710"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Add%20filter%20for%20all%20queries/near/245288710" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Adrien Prost <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Add.20filter.20for.20all.20queries.html#245288710">(Jul 08 2021 at 09:07)</a>:</h4>
<p><span class="user-mention silent" data-user-id="194612">Michael Riley</span> <a href="#narrow/stream/179220-cql/topic/Add.20filter.20for.20all.20queries/near/245216757">said</a>:</p>
<blockquote>
<p>Is this using the FhirDataProvider? I don't believe there is one here, unfortunately.</p>
</blockquote>
<p>yes</p>



<a name="245335767"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Add%20filter%20for%20all%20queries/near/245335767" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Add.20filter.20for.20all.20queries.html#245335767">(Jul 08 2021 at 16:13)</a>:</h4>
<p>Yes, that's typically the way that it is done. For example measures all specify a Measurement Period parameter to specify the reporting period. This is really common though (contextualizing to a timeframe) and so I'm introducing an "AsOf" parameter into some data elements I'm building now. For your use case, would a single timepoint work, or would you need an interval?</p>



<a name="245369045"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Add%20filter%20for%20all%20queries/near/245369045" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Riley <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Add.20filter.20for.20all.20queries.html#245369045">(Jul 08 2021 at 20:39)</a>:</h4>
<p><span class="user-mention" data-user-id="191359">@Bryn Rhodes</span> 90 percent of my usecases are on a single index datetime. Sometimes there's a range though.</p>



<a name="245409824"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Add%20filter%20for%20all%20queries/near/245409824" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Adrien Prost <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Add.20filter.20for.20all.20queries.html#245409824">(Jul 09 2021 at 07:28)</a>:</h4>
<p><span class="user-mention" data-user-id="191359">@Bryn Rhodes</span>  My main use case would be a single time period in order to retrieve all recent Encounters for examples</p>



<a name="246006109"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179220-cql/topic/Add%20filter%20for%20all%20queries/near/246006109" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179220-cql/topic/Add.20filter.20for.20all.20queries.html#246006109">(Jul 14 2021 at 19:15)</a>:</h4>
<p>So perhaps an "Relevant Period" parameter. In the case of decision support, that would be Interval[Now() - 1 year, Now()], and for quality measurement it would be the reporting period.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
