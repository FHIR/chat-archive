---
layout: page
title: "FHIR Chat  · IG error - contained referencing other contained · genomics/committers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179304-genomics/committers/index.html">genomics/committers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179304-genomics/committers/topic/IG.20error.20-.20contained.20referencing.20other.20contained.html">IG error - contained referencing other contained</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="178702618"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179304-genomics/committers/topic/IG%20error%20-%20contained%20referencing%20other%20contained/near/178702618" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Power <a href="https://fhir.github.io/chat-archive/stream/179304-genomics/committers/topic/IG.20error.20-.20contained.20referencing.20other.20contained.html#178702618">(Oct 21 2019 at 21:57)</a>:</h4>
<p>I am not sure how long this has been occurring, but I noticed an error that seems new after reviewing the latest QA (on AnnotationExample.json).  This example is a DiagnosticReport with two Observation resources as 'contained' inside the DR.  One of the contained Observation resources tries to 'derivedFrom' the other contained Observation resource, but it throws this error: </p>
<div class="codehilite"><pre><span></span>SHALL have a contained resource if a local reference is provided ( (url: 2; ids: )) [reference.startsWith(&#39;#&#39;).not() or (reference.substring(1).trace(&#39;url&#39;) in %resource.contained.id.trace(&#39;ids&#39;))]
</pre></div>


<p>It seems that one contained resource cannot reference another contained resource even when they are in the same container?</p>



<a name="178704351"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179304-genomics/committers/topic/IG%20error%20-%20contained%20referencing%20other%20contained/near/178704351" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jamie Jones <a href="https://fhir.github.io/chat-archive/stream/179304-genomics/committers/topic/IG.20error.20-.20contained.20referencing.20other.20contained.html#178704351">(Oct 21 2019 at 22:17)</a>:</h4>
<p>I don't think it was tracking that error before but it is a great catch and makes sense re: contained resources. That effectively means we can't do implications as contained, should push for sending them as bundles.</p>



<a name="178704431"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179304-genomics/committers/topic/IG%20error%20-%20contained%20referencing%20other%20contained/near/178704431" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jamie Jones <a href="https://fhir.github.io/chat-archive/stream/179304-genomics/committers/topic/IG.20error.20-.20contained.20referencing.20other.20contained.html#178704431">(Oct 21 2019 at 22:18)</a>:</h4>
<p>Contained resources aren't exposed to queries as far as I know as well</p>



<a name="178704744"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179304-genomics/committers/topic/IG%20error%20-%20contained%20referencing%20other%20contained/near/178704744" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bret H <a href="https://fhir.github.io/chat-archive/stream/179304-genomics/committers/topic/IG.20error.20-.20contained.20referencing.20other.20contained.html#178704744">(Oct 21 2019 at 22:22)</a>:</h4>
<p>are both observations in the results section of the diagnostic report?</p>



<a name="178704956"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179304-genomics/committers/topic/IG%20error%20-%20contained%20referencing%20other%20contained/near/178704956" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Power <a href="https://fhir.github.io/chat-archive/stream/179304-genomics/committers/topic/IG.20error.20-.20contained.20referencing.20other.20contained.html#178704956">(Oct 21 2019 at 22:25)</a>:</h4>
<p>Agree with the move to bundles. And yes, they are referenced from the results section of diagnostic report. But that works since the report is the container.</p>



<a name="178705119"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179304-genomics/committers/topic/IG%20error%20-%20contained%20referencing%20other%20contained/near/178705119" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bret H <a href="https://fhir.github.io/chat-archive/stream/179304-genomics/committers/topic/IG.20error.20-.20contained.20referencing.20other.20contained.html#178705119">(Oct 21 2019 at 22:27)</a>:</h4>
<p>I'm confused. Sorry. from the above I see 'one contained resource...' and then 'that works since the report is the container.' What is the example url?</p>



<a name="178721273"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179304-genomics/committers/topic/IG%20error%20-%20contained%20referencing%20other%20contained/near/178721273" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Power <a href="https://fhir.github.io/chat-archive/stream/179304-genomics/committers/topic/IG.20error.20-.20contained.20referencing.20other.20contained.html#178721273">(Oct 22 2019 at 04:08)</a>:</h4>
<p><a href="http://build.fhir.org/ig/HL7/genomics-reporting/AnnotationExample.html" target="_blank" title="http://build.fhir.org/ig/HL7/genomics-reporting/AnnotationExample.html">http://build.fhir.org/ig/HL7/genomics-reporting/AnnotationExample.html</a></p>



<a name="178759314"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179304-genomics/committers/topic/IG%20error%20-%20contained%20referencing%20other%20contained/near/178759314" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Power <a href="https://fhir.github.io/chat-archive/stream/179304-genomics/committers/topic/IG.20error.20-.20contained.20referencing.20other.20contained.html#178759314">(Oct 22 2019 at 14:08)</a>:</h4>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> - I assume you concur this is a real error?  And if so, is there some way to fix it while keeping the contained resources?  I know contained resources are meant to stay 'contained' within the container - but does that imply the contained resources should not be able to refer to each other?</p>



<a name="178760757"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179304-genomics/committers/topic/IG%20error%20-%20contained%20referencing%20other%20contained/near/178760757" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Power <a href="https://fhir.github.io/chat-archive/stream/179304-genomics/committers/topic/IG.20error.20-.20contained.20referencing.20other.20contained.html#178760757">(Oct 22 2019 at 14:24)</a>:</h4>
<p>After doing some more research on this - I did find another example in FHIR core that does this (one contained resource referring to another): <a href="http://build.fhir.org/claim-example-oral-contained.xml.html" target="_blank" title="http://build.fhir.org/claim-example-oral-contained.xml.html">http://build.fhir.org/claim-example-oral-contained.xml.html</a></p>
<p>The Coverage resource (id = coverage-1) has two properties (subscriber, beneficiary) that reference #patient-1, which is another contained resource.  I did run the validator on it, and it does generate the same errors as we are seeing.</p>



<a name="178762787"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179304-genomics/committers/topic/IG%20error%20-%20contained%20referencing%20other%20contained/near/178762787" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179304-genomics/committers/topic/IG.20error.20-.20contained.20referencing.20other.20contained.html#178762787">(Oct 22 2019 at 14:47)</a>:</h4>
<p>Contained resources should be able to refer to each other using #id</p>



<a name="178762837"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179304-genomics/committers/topic/IG%20error%20-%20contained%20referencing%20other%20contained/near/178762837" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179304-genomics/committers/topic/IG.20error.20-.20contained.20referencing.20other.20contained.html#178762837">(Oct 22 2019 at 14:47)</a>:</h4>
<p>They just can't (easily) refer to resources contained in a different resource</p>



<a name="178777321"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179304-genomics/committers/topic/IG%20error%20-%20contained%20referencing%20other%20contained/near/178777321" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Power <a href="https://fhir.github.io/chat-archive/stream/179304-genomics/committers/topic/IG.20error.20-.20contained.20referencing.20other.20contained.html#178777321">(Oct 22 2019 at 17:33)</a>:</h4>
<p>If this should be OK, then this is a problem in the validator?  Seems perhaps we should log a tracker?</p>



<a name="178799242"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179304-genomics/committers/topic/IG%20error%20-%20contained%20referencing%20other%20contained/near/178799242" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179304-genomics/committers/topic/IG.20error.20-.20contained.20referencing.20other.20contained.html#178799242">(Oct 22 2019 at 21:04)</a>:</h4>
<p>Y</p>



<a name="178799970"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179304-genomics/committers/topic/IG%20error%20-%20contained%20referencing%20other%20contained/near/178799970" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Power <a href="https://fhir.github.io/chat-archive/stream/179304-genomics/committers/topic/IG.20error.20-.20contained.20referencing.20other.20contained.html#178799970">(Oct 22 2019 at 21:14)</a>:</h4>
<p><a href="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=25042" target="_blank" title="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=25042">GF#25042</a></p>



<a name="178866954"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179304-genomics/committers/topic/IG%20error%20-%20contained%20referencing%20other%20contained/near/178866954" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jamie Jones <a href="https://fhir.github.io/chat-archive/stream/179304-genomics/committers/topic/IG.20error.20-.20contained.20referencing.20other.20contained.html#178866954">(Oct 23 2019 at 15:44)</a>:</h4>
<p>We ought to consider guidance on where contained resources are most/least appropriate for future release as well</p>



<a name="178868856"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179304-genomics/committers/topic/IG%20error%20-%20contained%20referencing%20other%20contained/near/178868856" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Power <a href="https://fhir.github.io/chat-archive/stream/179304-genomics/committers/topic/IG.20error.20-.20contained.20referencing.20other.20contained.html#178868856">(Oct 23 2019 at 16:05)</a>:</h4>
<p>-1 for contained <span aria-label="slight smile" class="emoji emoji-1f642" role="img" title="slight smile">:slight_smile:</span></p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
