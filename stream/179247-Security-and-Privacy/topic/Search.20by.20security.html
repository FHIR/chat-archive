---
layout: page
title: "FHIR Chat  · Search by security · Security and Privacy"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/index.html">Security and Privacy</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html">Search by security</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="167428558"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167428558" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167428558">(Jun 05 2019 at 20:43)</a>:</h4>
<p>I'm thinking about examples that illustrate the concept of structured scopes, as part of a (not super directly related) DevDays session next week. I was trying to write an example that said "Meds and Labs are fine, but not sensitive labs" and wanted to write something like the following (recognizing it's probably not easy or practical to support, but just exploring syntax and semantics a bit):</p>
<div class="codehilite"><pre><span></span>{
  &quot;terms&quot; [
    {&quot;allow&quot;: &quot;MedicationStatement?patient=$patient&quot;},
    {&quot;allow&quot;: &quot;Observation?patient=$patient&amp;category=laboratory&quot;},
    {&quot;deny&quot;: &quot;_security:below=http://terminology.hl7.org/CodeSystem/v3-Confidentiality|R&quot;}
  ]
}
</pre></div>


<p>When I did this, I realized that in the <a href="https://www.hl7.org/fhir/v3/ConfidentialityClassification/vs.html" target="_blank" title="https://www.hl7.org/fhir/v3/ConfidentialityClassification/vs.html">confidentiality classification</a>, <code>V</code> ("Very Restricted") is not modeled as a sub-concept of <code>R</code> ("Restricted"), so the <code>:below</code> query in my <code>deny</code> example would block access to "Restricted" content, but would fail to block access to "Very Restricted" Content.  <span class="user-mention" data-user-id="191404">@John Moehrke</span> do you know why <code>V</code> is not modeled as a sub-concept of <code>R</code>?</p>



<a name="167429245"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167429245" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167429245">(Jun 05 2019 at 20:52)</a>:</h4>
<p>the codes in confidentialityCode are non-overlapping risk evaluation. So they are not sub-concepts.  So it seems :below is speaking of hierarchy. This seems logical for most codes.... To make this work with confidentialityCode we would need to have each value to be a sub-concept of the other.</p>



<a name="167432502"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167432502" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167432502">(Jun 05 2019 at 21:38)</a>:</h4>
<p>I guess the question is, would you want to do this? I think it'd be nice to express the semantics in the hierarchy, personally (because it makes it easy to do things like "no more than moderately sensitive"</p>



<a name="167434520"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167434520" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167434520">(Jun 05 2019 at 22:09)</a>:</h4>
<p>Given that there are only 6 values confidentiality code values, it is usually done by just listing each value allowed.<br>
This below concept might be more valuable with PurposeOfUse which is a hierarchy -- <a href="http://build.fhir.org/v3/SecurityPolicy/vs.html" target="_blank" title="http://build.fhir.org/v3/SecurityPolicy/vs.html">http://build.fhir.org/v3/SecurityPolicy/vs.html</a></p>



<a name="167434569"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167434569" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167434569">(Jun 05 2019 at 22:21)</a>:</h4>
<p>Fair enough. I'll update my example to just list multiple codes. Thanks!</p>



<a name="167435000"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167435000" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mohammad Jafari <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167435000">(Jun 05 2019 at 22:31)</a>:</h4>
<p>on that note <span class="user-mention" data-user-id="191315">@Josh Mandel</span>, is that a teaser for the next generation of SMART scopes? If yes, please tell more! :-)</p>



<a name="167448638"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167448638" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167448638">(Jun 06 2019 at 03:23)</a>:</h4>
<p>It really wasn't -- more like, I'm trying to describe a spectrum of "scope expressiveness" to talk about tradeoffs</p>



<a name="167448688"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167448688" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167448688">(Jun 06 2019 at 03:24)</a>:</h4>
<p>Draft deck for the devdays talk is at <a href="https://docs.google.com/presentation/d/1CqRCrNB17XXzeff0guDo1inM-gdy2k0aBc16OcdZKHM/edit" target="_blank" title="https://docs.google.com/presentation/d/1CqRCrNB17XXzeff0guDo1inM-gdy2k0aBc16OcdZKHM/edit">https://docs.google.com/presentation/d/1CqRCrNB17XXzeff0guDo1inM-gdy2k0aBc16OcdZKHM/edit</a>?</p>



<a name="167544977"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167544977" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167544977">(Jun 07 2019 at 04:05)</a>:</h4>
<p><span class="user-mention" data-user-id="191315">@Josh Mandel</span> this would be a search by value set. But the Ian McNicoll thinks that ordering in code systems is more widespread than we admit, and this is one that is clearly ordered.</p>



<a name="167544982"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167544982" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167544982">(Jun 07 2019 at 04:05)</a>:</h4>
<p>we might allow gt[code] in a future version...</p>



<a name="167583625"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167583625" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167583625">(Jun 07 2019 at 14:52)</a>:</h4>
<p>Search by value-set meaning ... ? Is my example wrong?</p>
<div class="codehilite"><pre><span></span>_security=http://terminology.hl7.org/CodeSystem/v3-Confidentiality|R
</pre></div>



<a name="167590418"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167590418" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mohammad Jafari <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167590418">(Jun 07 2019 at 16:14)</a>:</h4>
<p>I checked with <span class="user-mention" data-user-id="199026">@k connor</span> and she confirmed that this value set was intended from the outset to be a 'total order' as the following: <br>
<code>V &gt; R &gt; N &gt; M &gt; L &gt; U</code> Adding the subsumption to the vocabulary definition might be worth it if there are no undesirable consequences.<br>
In our demos I have always followed what John suggested above since the number of codes is small and "not belonging to a range" can be turned into a conjunction of negations against specific codes.<br>
But this only applies to confidentiality labels and not for instance to sensitivity labels which are covered  by the same query parameter.</p>



<a name="167603407"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167603407" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167603407">(Jun 07 2019 at 18:55)</a>:</h4>
<p>order is not subsumption.</p>



<a name="167603447"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167603447" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167603447">(Jun 07 2019 at 18:55)</a>:</h4>
<p>Josh: _security:in=http://my-value-set </p>
<p>where my-value-set specifies the values you care about.</p>



<a name="167603449"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167603449" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167603449">(Jun 07 2019 at 18:55)</a>:</h4>
<p>though</p>



<a name="167603461"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167603461" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167603461">(Jun 07 2019 at 18:55)</a>:</h4>
<p>_security=R,X</p>



<a name="167606227"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167606227" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mohammad Jafari <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167606227">(Jun 07 2019 at 19:29)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span>  The subsumption relationship on the confidentiality codes set is a "total order" in the algebraic sense of "order." Order is not subsumption but the subsumption relationship orders a set of codes. That's what I meant in the above. Has "order" been defined in a different sense in this context? If it has, Kathleen and I will revise to clarify and avoid confusion.</p>



<a name="167608688"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167608688" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167608688">(Jun 07 2019 at 19:57)</a>:</h4>
<blockquote>
<p>Josh: _security:in=http://my-value-set </p>
<p>where my-value-set specifies the values you care about.</p>
</blockquote>
<p>Is this to suggest that I should define a new valueset containing just R and X and then get servers to recognize it? The latter option (supplying values directly) seems more staightforward.</p>



<a name="167609354"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167609354" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167609354">(Jun 07 2019 at 20:05)</a>:</h4>
<p>for a few values, the second approach is clearly better, but once you have enough values, it's not practical anymore</p>



<a name="167609720"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167609720" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167609720">(Jun 07 2019 at 20:09)</a>:</h4>
<p>Agreed. Here it's a short list at least. And obviously <code>geR</code>("Restricted or greater") would be even more convenient.</p>



<a name="167654046"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167654046" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167654046">(Jun 08 2019 at 14:50)</a>:</h4>
<p>Good to see confirmation of my approach... Note that I would expect that an organization would create a valueSet of the sensitivity codes that they consider Restricted... (where organization could be a large domain of organizations). Related to that would be a set of valueSet(s) of loinc/snomed codes that they consider are indicators of each of the sensitivity codes, something for a Security-Labeling-Service (SLS) to operate on. The SLS also is expected to use all the power of a CDS to mark as sensitive, data that has inference to a sensitivity... Thus we (security/privacy) want to engage the good works of CDS and vocabulary to tell us what is (and is not) sensitive, we will be happy to leverage that in access control decisions and enforcement. We engage a SLS which engages CDS... because security geeks are not good at figuring out what is sensitive...</p>



<a name="167654172"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167654172" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167654172">(Jun 08 2019 at 14:54)</a>:</h4>
<p>My take is that "sensitive" tends to be extremely personal, cultural, and other flavors of contextual -- by place, time, political alignment. I'm all for trying to find some low hanging fruit, but I'm skeptical that institutions can make these kinds of determinations on behalf of individual patients/consumers.</p>



<a name="167654398"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167654398" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167654398">(Jun 08 2019 at 15:00)</a>:</h4>
<p>There are multiple sides of sensitive. It does NOT address all vectors. I was only speaking of the data classification found in the sensitive valueset.  <a href="http://build.fhir.org/v3/InformationSensitivityPolicy/vs.html" target="_blank" title="http://build.fhir.org/v3/InformationSensitivityPolicy/vs.html">http://build.fhir.org/v3/InformationSensitivityPolicy/vs.html</a>  There are people that find 'sensitive' things beyond this vocabulary, but it is there as a vocabulary to use. This does not mean it is the only thing that can be sensitive. There are clearly not things on the list that have not yet been discovered or deemed sensitive. A locally managed valueset can more quickly adjust to these 'norms', that was my point. Yes a person will have an episode they want marked sensitive, timerange often works well.</p>



<a name="167654800"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167654800" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167654800">(Jun 08 2019 at 15:10)</a>:</h4>
<p>The patient can/should be allowed to manually mark data. There is legitimate concern for how this can e done in an informed way, or at scale.  Further concern is that a crafty malicious (e.g. drug seeking person) can use this to hide information that would prevent them from some goal (e.g. getting more narcotics).  Logging, and review of actions is likely an effective defense against this, but does require comprehensive logging and system of continual evaluation.</p>



<a name="167724391"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167724391" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mohammad Jafari <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167724391">(Jun 10 2019 at 00:41)</a>:</h4>
<p>I think we should make a distinction between <em>sensitive</em> data in the colloquial sense (which is deeply subjective and personal) and sensitivity as defined by the sensitivity vocabulary. I think the intention of the vocabulary was to identify any category of information which has been singled out for additional protections by the existing laws and regulations. This is clearly jurisdiction-dependent and also changes with time. For example, I have heard some people questioning whether Sickle Cell anemia is still a sensitive condition although it is a protected category by the law. <br>
Then there is the issue of categories of information which are personally sensitive to a patient but not singled out by the law. For example, a knee injury could be considered very sensitive information for a high profile athlete. In these cases, I think the patient or someone on their behalf can directly assign a confidentiality label to that information where overarching policies enable them to do so. For example the resources related to the knee injury can be marked as <code>R</code> by the patient or by the clinician.<br>
Also, determining the sensitivity labels by the SLS can be more complicated than a simple list of SNOMED or LOINC codes although that's a good place to start as we have shown in our demos. Aside from the complexities resulting from the use of unstructured text and use of NLP, even in structured information, there are issues around inference and related resources which cannot be addressed with simple codes; for example one case we encountered was when antibiotics prescriptions which are not sensitive per se, would have to be marked as HIV-sensitive if other information in the patient's information could be indicative of HIV. So, supporting basic conjunction and disjunction seemed necessary alongside having a list of LOINC and SNOMED codes in order to be able to assign sensitivity codes with less false positives and false negatives. As soon as we had to consider AND/OR rules, we realized that there are probably cases which call for more complicated rules or where non-rule-based and learning-based methods would be applicable.</p>



<a name="167753851"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167753851" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167753851">(Jun 10 2019 at 12:15)</a>:</h4>
<p>Should a patient be able to tag a resource with a patient confidentiality without claiming that this is the overall confidentiality? RIght now, they can't, but this discussion seems to imply that they should be able to. Seems like a missing security label to me?</p>



<a name="167757710"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167757710" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167757710">(Jun 10 2019 at 13:14)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> what part of FHIR keeps them from being able to do that?</p>



<a name="167757830"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167757830" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167757830">(Jun 10 2019 at 13:16)</a>:</h4>
<p>well, how would they do that? putting a security label on a resource? what kind of label?</p>



<a name="167758280"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167758280" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167758280">(Jun 10 2019 at 13:22)</a>:</h4>
<p>This seems in line with what we discussed last week, <span class="user-mention" data-user-id="191404">@John Moehrke</span> <span class="user-mention" data-user-id="192587">@David Pyke</span> : a resource that describes the permission including the scope of that permission. That scope can be for many dimensions : only some content, or some categories of data, or some parties or some purposes...</p>



<a name="167758483"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167758483" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167758483">(Jun 10 2019 at 13:24)</a>:</h4>
<p>I think the initial topic is about some categories of data, and I agree classification is not something we can completely standardize.</p>



<a name="167758485"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167758485" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167758485">(Jun 10 2019 at 13:24)</a>:</h4>
<blockquote>
<p>well, how would they do that? putting a security label on a resource? what kind of label?</p>
</blockquote>
<p>They would be using some tool that understands the policies and organization (aka patient portal), and it offers a vocabulary for this purpose. It might be a standards vocabulary (TABOO), or it might be a local vocabulary.</p>



<a name="167758667"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167758667" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167758667">(Jun 10 2019 at 13:26)</a>:</h4>
<p>so they put TABOO on there - is that different in meaning than if a clinician puts TABOO on there?</p>



<a name="167758705"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167758705" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167758705">(Jun 10 2019 at 13:26)</a>:</h4>
<p>I'm asking for a standard vocab approach....</p>



<a name="167758718"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167758718" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167758718">(Jun 10 2019 at 13:26)</a>:</h4>
<p>is loinc 1234 different if a patient puts it in vs provider?</p>



<a name="167758722"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167758722" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167758722">(Jun 10 2019 at 13:27)</a>:</h4>
<p>vocabulary are vocabulary... right?</p>



<a name="167758744"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167758744" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167758744">(Jun 10 2019 at 13:27)</a>:</h4>
<p>I don't think so, no. But I think there is a difference in this use case.</p>



<a name="167758755"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167758755" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167758755">(Jun 10 2019 at 13:27)</a>:</h4>
<p>why?</p>



<a name="167758771"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167758771" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167758771">(Jun 10 2019 at 13:27)</a>:</h4>
<p>Do the same rules apply in all contexts for the same term in the vocabulary?</p>



<a name="167758778"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167758778" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167758778">(Jun 10 2019 at 13:27)</a>:</h4>
<p>note that I did preferece that a authorized app is doinging the marking.. this is not a patient twiddeling bits</p>



<a name="167758876"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167758876" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167758876">(Jun 10 2019 at 13:29)</a>:</h4>
<p>More likely they just list the specific FHIR objects by .id and put them in a Consent.provision with provision.type==DENY and provision.data.reference listing all those things they want hidden</p>



<a name="167758916"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167758916" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167758916">(Jun 10 2019 at 13:29)</a>:</h4>
<p><span class="user-mention" data-user-id="191832">@Jose Costa Teixeira</span> you know that the world is full of too many variations on privacy policy to think that there is one policy that rules them all...</p>



<a name="167759034"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167759034" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167759034">(Jun 10 2019 at 13:30)</a>:</h4>
<p>but, yes I do expect that the definitions that a vocabulary has been given by a standards organization is universally understood as having THAT definition</p>



<a name="167759179"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167759179" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167759179">(Jun 10 2019 at 13:32)</a>:</h4>
<p>and, I totally expect that some messed-up organization will not follow those definitions.. nothing any vocabulary organization can do to prevent idiots from using their vocabulary improperly.  but we don't design to this abuse... right?</p>



<a name="167759335"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167759335" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167759335">(Jun 10 2019 at 13:34)</a>:</h4>
<p><span class="user-mention" data-user-id="191404">@John Moehrke</span> ok i don't mind the notion of using Consent, but which consent? I don't believe that there's a way to know what Consent resource applies</p>



<a name="167759393"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167759393" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167759393">(Jun 10 2019 at 13:35)</a>:</h4>
<p>what&gt;?</p>



<a name="167759550"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167759550" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167759550">(Jun 10 2019 at 13:37)</a>:</h4>
<p>In the simplest of environment, there is only ONE...In a slightly more complex one, they are likely based on PurposeOfUse... in a more complex environment, they better explain their complexity.</p>



<a name="167760259"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167760259" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167760259">(Jun 10 2019 at 13:46)</a>:</h4>
<p>The application(s) responsible for supporting updating of consent must recognize previous, likely offer that set of terms, and offer changes. The resulting update of Consent replaces the previous.  If you have more than one consent, and they appear to conflict, then there is some consent application problem.</p>



<a name="167760484"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167760484" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167760484">(Jun 10 2019 at 13:49)</a>:</h4>
<p>so you think this should be said in the core? I was hoping it would be the kind of thing that an IG would say... Seems core should not include a policy statement like this (there shall be only one).  If so, please make a CR; as your CR will carry more emphasis than one I might enter...</p>



<a name="167761703"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167761703" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167761703">(Jun 10 2019 at 14:04)</a>:</h4>
<p>I'm not sure how much core should say. but I expect that a patient will have multiple different consent arrangements applicable to the control of the information, made at different times, for different purposes, with different parts of a provider organization. Is there some expectation that a consumer will only have one? If there's more than one, how are they supposed to differentiate them? would they differentiate by category?</p>
<p>Also, If a consent agreement is subject to control, it doesn't seem like it's easy add some random resource id to it - that's a process question</p>



<a name="167769558"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167769558" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mohammad Jafari <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167769558">(Jun 10 2019 at 15:37)</a>:</h4>
<p>I think it's not realistic to assume that there will only be a single applicable consent at any given time. It's an integrity rule that's hard to enforce when multiple systems are involved. Especially where the patient can use multiple consent management systems to file a consent, it's practically inevitable to have conflicting consents ending up in the system. <br>
It's matter of policy and configuration to handle such cases, for example, "most recent consent overrides" or "the one filed in the EHR's own consent management system overrides", etc.</p>



<a name="167769713"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167769713" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167769713">(Jun 10 2019 at 15:39)</a>:</h4>
<p>so that's the problem  I'm concerned about. How can this be manageable from the consumer point of view? WHat's a consumer App to do? (specially if we don't let the consumer tag resources as confidential)</p>



<a name="167770233"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167770233" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167770233">(Jun 10 2019 at 15:46)</a>:</h4>
<p>so in the core... we do allow resources to be individually tagged... but a more realistic solution is to have consent that targets the data by id, type, timeframe, or the other vectors found in .provisions. These vectors are in the model, because they are the vectors that consent use-cases brought to us needed. It is hard to model something that no-one brings forward a realistic example.</p>



<a name="167770254"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167770254" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167770254">(Jun 10 2019 at 15:46)</a>:</h4>
<p>I don't feel as though that is more realistic given the discussion here</p>



<a name="167770261"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167770261" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167770261">(Jun 10 2019 at 15:46)</a>:</h4>
<p>as to the question of ONE or MANY.. this is a domain choice. There are definitely domains that have indeed chosen that there shall be only ONE.</p>



<a name="167770291"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167770291" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167770291">(Jun 10 2019 at 15:47)</a>:</h4>
<blockquote>
<p>I don't feel as though that is more realistic given the discussion here</p>
</blockquote>
<p>and I am trying to understand why you don't 'feel' this</p>



<a name="167770332"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167770332" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167770332">(Jun 10 2019 at 15:47)</a>:</h4>
<p>yet, somehow you think it is easier to support access-control rules that allow for CHANGING EHR data?  touching the .meta element of Resources inside the EHR.</p>



<a name="167770335"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167770335" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167770335">(Jun 10 2019 at 15:47)</a>:</h4>
<p>because you can't know which consent to do that in</p>



<a name="167770395"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167770395" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167770395">(Jun 10 2019 at 15:48)</a>:</h4>
<p>In any given domain... yes I can.</p>



<a name="167770415"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167770415" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167770415">(Jun 10 2019 at 15:48)</a>:</h4>
<p>because any given reality based domain will need to answer the questino you find unanswered</p>



<a name="167770462"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167770462" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167770462">(Jun 10 2019 at 15:49)</a>:</h4>
<p>For example, In the VA there is only ONE consent on file at any time. Any updates can be done at any time, but result in replacing the existing consent with a new one.</p>



<a name="167770503"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167770503" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167770503">(Jun 10 2019 at 15:49)</a>:</h4>
<p>This has been the model in multiple HIE based on XDS and XCA using BPPC and now APPC.</p>



<a name="167770523"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167770523" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167770523">(Jun 10 2019 at 15:49)</a>:</h4>
<p>at some point, rubber hits the road, and a policy model must be chosen.</p>



<a name="167770698"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167770698" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167770698">(Jun 10 2019 at 15:51)</a>:</h4>
<p>I can confidently say that they all start with 'there can be only ONE'.</p>



<a name="167770961"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167770961" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167770961">(Jun 10 2019 at 15:54)</a>:</h4>
<p>well... there can be only one Privacy Consent.</p>



<a name="167770977"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167770977" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Pyke <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167770977">(Jun 10 2019 at 15:54)</a>:</h4>
<p>All of the implementations I have worked with have a single registry with all records tied to the patient MRN/eMPI with specific exceptions.  I'm not aware of a system that would allow multiple records to affect a single patient for the same context</p>



<a name="167771217"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167771217" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167771217">(Jun 10 2019 at 15:57)</a>:</h4>
<p>I think that we need some special query to fetch the consents applicable to the interface like</p>
<p>[base]/Consent?list=$applicable</p>



<a name="167771278"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167771278" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167771278">(Jun 10 2019 at 15:58)</a>:</h4>
<p>which returns all consent resources that have bearing on requests made through the interface (though policy would dictate whether they are all actually visible or not)</p>



<a name="167771717"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167771717" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Pyke <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167771717">(Jun 10 2019 at 16:02)</a>:</h4>
<p>That's a privacy violation as that would show that such information exists.</p>



<a name="167771995"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167771995" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Pyke <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167771995">(Jun 10 2019 at 16:05)</a>:</h4>
<p>Having the ability to fish for consent policies is a terrible idea</p>



<a name="167775527"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167775527" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Pyke <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167775527">(Jun 10 2019 at 16:54)</a>:</h4>
<p>John and I have worked out possible pseudo code for searches.  Comments are requested:</p>
<p>1. Request one or more Consent where status=active by Consent.scope (with patient(s), if none specified, get all)<br>
2. Locally inspect Consent.provision for base policy acceptance/denial with Consent.policyRule<br>
    If failure mode for policyRule not understandable, refer to Privacy Office <br>
3. Locally inspect Consent.provision for contexts as above<br>
4. Inspect Consent.provision.provision (<a href="http://et.al" target="_blank" title="http://et.al">et.al</a>) for exceptions<br>
Note: server required to filter based on Consent.provision.period for only active consents.</p>



<a name="167776306"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167776306" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Pyke <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167776306">(Jun 10 2019 at 17:04)</a>:</h4>
<p>Contexts aren't above, they're:<br>
Who - The patient<br>
What - The data - specific resources are listed, empty list means all data covered by the consent.<br>
Where - The organization- what is the location boundary and authority boundary of this consent<br>
When - The issued or captured<br>
When - The timeframe for which the Consent applies<br>
How - The actions covered. (such as purposes of use that are covered)<br>
Whom - The  actor who is/are are grantees by the consent.</p>



<a name="167776614"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167776614" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167776614">(Jun 10 2019 at 17:08)</a>:</h4>
<p>How does this relate to the discussion we had 1 week ago, about consent!=permission? I think the above reads well as if consent actually means permission, whether given by the subject or by the law</p>



<a name="167777791"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167777791" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Pyke <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167777791">(Jun 10 2019 at 17:24)</a>:</h4>
<p>It fits with our discussion</p>



<a name="167778395"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167778395" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167778395">(Jun 10 2019 at 17:31)</a>:</h4>
<p>Hope so. I will work on what we agreed</p>



<a name="167778417"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167778417" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167778417">(Jun 10 2019 at 17:31)</a>:</h4>
<p>I don't understand why providing a query where the server figures out what is valid is a privacy violation. Is it a privacy violation to propose that the server knows what consents are relevant for the interface?</p>



<a name="167778731"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167778731" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Pyke <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167778731">(Jun 10 2019 at 17:35)</a>:</h4>
<p>No, we just need to make sure that the query has to provide proof they are authorized to know consents (like a consent management server).  I just am paranoid that it would be used to find out if patient X has hidden information</p>



<a name="167778973"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167778973" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167778973">(Jun 10 2019 at 17:38)</a>:</h4>
<p>well, we always take it for granted that the server has to check access control. What the search I proposed does is not short circuit access control but short circuit error prone logic on the part of the client trying to figure out which consents it has access to are relevant for the interface it is working with</p>



<a name="167779004"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167779004" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mohammad Jafari <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167779004">(Jun 10 2019 at 17:38)</a>:</h4>
<p><span class="user-mention" data-user-id="192587">@David Pyke</span> I think we should not conflate defining a query at the API level with authorizing the ability to run that query to clients.</p>



<a name="167779342"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167779342" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mohammad Jafari <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167779342">(Jun 10 2019 at 17:42)</a>:</h4>
<p>RE finding applicable consent, here is an excerpt from our demo report from 2017:<br>
<em>In this demo, we simply used a query mechanism to find the patient to whose FHIR Compartment the requested resource belongs. To find a patient’s applicable consent, we relied on a Consent Discovery component within the Consent Handler module. A simple instantiation of this component was used in the original demo which accepts the URI for a number of FHIR repositories where it can look for a patient’s consents by a simple FHIR search query based on that patient’s identifier assumed to be uniquely identifying a patient across different consent repositories (not to be confused with local FHIR server id for the patient resource). Moreover, this component will also look for Consents filed by others (e.g. a legal guardian) on behalf of the patient in question. In general, this mechanism can be expanded to include more sophisticated forms of consent lookup, such as direct Consent push by the requester in which the Client provides a copy of the patient’s consent as an evidence for proving it has earned the patient’s approval for the requested access.</em></p>



<a name="167779449"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167779449" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167779449">(Jun 10 2019 at 17:44)</a>:</h4>
<p>ouch. I want to move that load from the client to the server</p>



<a name="167779511"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167779511" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mohammad Jafari <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167779511">(Jun 10 2019 at 17:45)</a>:</h4>
<p>This was not implemented in the client; it was implemented in the "authorization service" protecting the FHIR server. At the time it was implemented as a Servlet Interceptor inside HAPI. <span class="user-mention" data-user-id="191316">@Grahame Grieve</span></p>



<a name="167779540"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167779540" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Pyke <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167779540">(Jun 10 2019 at 17:45)</a>:</h4>
<p>"In general, this mechanism can be expanded to include more sophisticated forms of consent lookup, such as direct Consent push by the requester in which the Client provides a copy of the patient’s consent as an evidence for proving it has earned the patient’s approval for the requested access."</p>
<p>We are discussing this aspect via an X-Consent header</p>



<a name="167779601"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167779601" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167779601">(Jun 10 2019 at 17:46)</a>:</h4>
<p>could there be more than one such header?</p>



<a name="167779687"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167779687" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Pyke <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167779687">(Jun 10 2019 at 17:47)</a>:</h4>
<p>What is the use case for more than one?</p>



<a name="167779818"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167779818" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167779818">(Jun 10 2019 at 17:48)</a>:</h4>
<p>if more than one was involved in earning the patient's approval</p>



<a name="167779876"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167779876" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mohammad Jafari <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167779876">(Jun 10 2019 at 17:49)</a>:</h4>
<p>X-Consent header was not a thing at the time but we <em>did</em> consider something like a subscription service to ensure the authorization service receives regular updates on Consent resources to sync up.</p>



<a name="167779898"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167779898" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Pyke <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167779898">(Jun 10 2019 at 17:49)</a>:</h4>
<p>They would all be attached to the Consent resource under Consent.source referred to by the X-Consent header</p>



<a name="167780027"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167780027" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mohammad Jafari <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167780027">(Jun 10 2019 at 17:50)</a>:</h4>
<blockquote>
<p>could there be more than one such header?</p>
</blockquote>
<p>hard to think of a use-case where that's a requirement because the idea of X-Consent is primarily based on the use-case in which the client has confidence that it has <em>the</em> consent which authorizes the request.</p>



<a name="167780144"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167780144" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167780144">(Jun 10 2019 at 17:52)</a>:</h4>
<p>it might not though. And David's response inplies that it creates a new one that quotes other ones that it inlines?</p>



<a name="167780218"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167780218" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Pyke <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167780218">(Jun 10 2019 at 17:53)</a>:</h4>
<p>Yes, you can attach Consent resources as Consent.source.  But I was assuming that you meant signed documents, not resources.</p>



<a name="167780289"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167780289" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167780289">(Jun 10 2019 at 17:54)</a>:</h4>
<p>I think we are getting close to helping the audience understand realistic situations... I don't think we need to get sidetracked by theory of two client side consents... not saying we won't address it, but rather asking that we get the realistic situation down first</p>



<a name="167780314"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167780314" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167780314">(Jun 10 2019 at 17:54)</a>:</h4>
<p>it's not realistic?</p>



<a name="167780332"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167780332" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167780332">(Jun 10 2019 at 17:54)</a>:</h4>
<p>I don't think so... do you have example?</p>



<a name="167780437"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167780437" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167780437">(Jun 10 2019 at 17:55)</a>:</h4>
<p>What do systems do today? what happens in the paper world today? I really don't think multiple client side consents to enable access to a single patient record is realistic.</p>



<a name="167780492"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167780492" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167780492">(Jun 10 2019 at 17:56)</a>:</h4>
<p>if the client doesn't know what the consents the server will offer - it just gathers the ones it has an hopes for the best... seems realistic to me...</p>



<a name="167780510"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167780510" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167780510">(Jun 10 2019 at 17:56)</a>:</h4>
<p>why would a client do that?</p>



<a name="167780536"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167780536" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167780536">(Jun 10 2019 at 17:56)</a>:</h4>
<p>in what way does a server ever 'offer' a consent&gt;?</p>



<a name="167780582"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167780582" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167780582">(Jun 10 2019 at 17:57)</a>:</h4>
<p>offer : I meant honor</p>



<a name="167780732"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167780732" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167780732">(Jun 10 2019 at 17:59)</a>:</h4>
<p>I think this is a side project, and want the basics worked out first.... But I think you are asking about the situation where a client could get a point-of-care consent, and it just doesn't know which of a small set of them that it knows how to execute on, would satisfy the server... right?</p>



<a name="167780847"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167780847" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167780847">(Jun 10 2019 at 18:00)</a>:</h4>
<p>We have not addressed that in FHIR... in XCA we addressed it through error processing... as in the initial query was consentless, and got a specific error indicating that the request was mostly okay, but was lacking a consent... and in that error package was a list of policy identifiers that could satisfy the server.</p>



<a name="167780954"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167780954" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167780954">(Jun 10 2019 at 18:01)</a>:</h4>
<p>In this way the client knows that it is not being told to go away completely, but is given the list of policy identifiers that it can then use to determine which of the point of care consents it will interact wiht the patient to achieve. Once it has that, recorded somewhere. If that somewhere is not on the target server, then it could use the x-consent header to point at it.</p>



<a name="167780963"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167780963" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167780963">(Jun 10 2019 at 18:01)</a>:</h4>
<p>is that the workflow you are asking about?</p>



<a name="167781145"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167781145" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167781145">(Jun 10 2019 at 18:03)</a>:</h4>
<p>note that the list of policy identifiers returned by the server might be trimmed based on the client context... and the acceptance (honoring) of the x-header may also be based on the client context and server context... so no guarantee, but it is a process.</p>



<a name="167781246"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167781246" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167781246">(Jun 10 2019 at 18:04)</a>:</h4>
<p>In the context of FHIR consent the policy identifier would be the Consent.policyRule value.</p>



<a name="167782010"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167782010" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167782010">(Jun 10 2019 at 18:12)</a>:</h4>
<p>I'm just not sure what a practical argonaut level consent api looks like, how it's framed. Any discussion turns so complicated - I want something as simple as posible for patient apps</p>



<a name="167782194"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167782194" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167782194">(Jun 10 2019 at 18:14)</a>:</h4>
<p>Do we have a good write-up on when we'd favor consent-via-OAuth (with some kind of scopes v2) vs when we'd favor consent-via-explicit-FHIR-Consent-Resource?</p>



<a name="167782277"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167782277" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167782277">(Jun 10 2019 at 18:15)</a>:</h4>
<p>that's for discussion this afternoon for me. I think of smart on fhir authorization as a connection specific consent, that would best build on top of the general patient consent</p>



<a name="167782454"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167782454" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167782454">(Jun 10 2019 at 18:17)</a>:</h4>
<p>In other words, I think this is saying "the venn diagram of use cases for OAuth vs. FHIR Consent Resource is highly overlapping" -- in fact, maybe the OAuth use cases are entirely subsumed by FHIR Consent Resource use cases. But we might still like the OAuth approach for the subset where it applies, because we like something about the UX or consistency with other web workflows?</p>



<a name="167782457"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167782457" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167782457">(Jun 10 2019 at 18:17)</a>:</h4>
<blockquote>
<p>Do we have a good write-up on when we'd favor consent-via-OAuth (with some kind of scopes v2) vs when we'd favor consent-via-explicit-FHIR-Consent-Resource?</p>
</blockquote>
<p>that i what HEART supports... so, when is tied up in lots of deployment and trust issues</p>



<a name="167782576"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167782576" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167782576">(Jun 10 2019 at 18:18)</a>:</h4>
<p>OAuth scopes are just maps into a consent resource, for me - a simple facade to it</p>



<a name="167782582"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167782582" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167782582">(Jun 10 2019 at 18:18)</a>:</h4>
<blockquote>
<p>In other words, I think this is saying "the venn diagram of use cases for OAuth vs. FHIR Consent Resource is highly overlapping" -- in fact, maybe the OAuth use cases are entirely subsumed by FHIR Consent Resource use cases. But we might still like the OAuth approach for the subset where it applies, because we like something about the UX or consistency with other web workflows?</p>
</blockquote>
<p>I think that the consent rules should not be duplicated in a normal SMART scope. The scope authorizes based on app/user/role... and the server enforces that, and addes consent enforcement.</p>



<a name="167782608"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167782608" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167782608">(Jun 10 2019 at 18:19)</a>:</h4>
<p>trying to move the complexity of the consent rules into scopes adds no value</p>



<a name="167782631"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167782631" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167782631">(Jun 10 2019 at 18:19)</a>:</h4>
<p>unless you are creating a third party consent service.. like HEART... and if you are doing that, then use HEART</p>



<a name="167782653"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167782653" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167782653">(Jun 10 2019 at 18:19)</a>:</h4>
<p>all the scopes <em>are</em> in consent. I don't think we should try squeezing everything into scopes but we need to do more</p>



<a name="167782741"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167782741" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mohammad Jafari <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167782741">(Jun 10 2019 at 18:20)</a>:</h4>
<blockquote>
<p>Do we have a good write-up on when we'd favor consent-via-OAuth (with some kind of scopes v2) vs when we'd favor consent-via-explicit-FHIR-Consent-Resource?</p>
</blockquote>
<p>we have also demo-ed a hybrid approach, i.e. an OAuth server that issues tokens based on the consents stored in a (potentially separate) FHIR server.</p>



<a name="167782775"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167782775" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167782775">(Jun 10 2019 at 18:20)</a>:</h4>
<p>why? What is the value of passing something from the authorization server to the resource server through the client... when the resource server MUST check again</p>



<a name="167782854"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167782854" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167782854">(Jun 10 2019 at 18:21)</a>:</h4>
<blockquote>
<p>OAuth scopes are just maps into a consent resource,</p>
</blockquote>
<p>I'm more interested in when we'd deploy an OAuth flow, though (because that's a consumer-facing workflow). How the details are modeled under the hood (mapped into Consent or whatever) is an implementation detail. (And on the flip side: when/where do we advocate for pre-sepcified Consents that authorize a diverse set of downstream access? When/where do consumers go through the workflow to establish this, review, etc?)</p>



<a name="167782860"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167782860" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167782860">(Jun 10 2019 at 18:21)</a>:</h4>
<p>unless you are doing the configuration that HEART is targetting.... and if you are doing that, then look to HEART; and have no FHIR Consent resources.</p>



<a name="167782964"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167782964" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167782964">(Jun 10 2019 at 18:22)</a>:</h4>
<p>I don't understand this question:</p>
<blockquote>
<p>why? What is the value of passing something from the authorization server to the resource server through the client... when the resource server MUST check again</p>
</blockquote>



<a name="167782993"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167782993" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167782993">(Jun 10 2019 at 18:22)</a>:</h4>
<p>SMART binds closely the authorization server with the resource server... right?</p>



<a name="167783169"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167783169" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167783169">(Jun 10 2019 at 18:24)</a>:</h4>
<p>it doesn't bind it. It say nothing about it. in practice, that means bound yes</p>



<a name="167783241"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167783241" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167783241">(Jun 10 2019 at 18:25)</a>:</h4>
<p>If you want to encode the power of consent into OAuth scopes.. then this is what HEART tried to address. Not saying they have everything solved, but it is what they focused on. In their case they kept the consent rules as a propritary responsibility of the design of the authZ server, and only defined scope values for permissions allowed.  This is a different design decision than we addrssed with the FHIR Consent, where we focused on how to encode the rules, and left as an implemention detail how to decide and enforce.</p>



<a name="167783394"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167783394" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167783394">(Jun 10 2019 at 18:27)</a>:</h4>
<p>I didn't say I wanted to do that. All I said was: the existing smart on fhir scopes are a connection specific consent that can be represented as a consent resource</p>



<a name="167783662"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167783662" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167783662">(Jun 10 2019 at 18:30)</a>:</h4>
<p>"Can be represented as a consent resource" is true, but not super interesting yet: I mean, the Consent resource is super flexible right now, so sure anything can be mapped.</p>



<a name="167783666"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167783666" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167783666">(Jun 10 2019 at 18:30)</a>:</h4>
<p>Do we have use cases where we want consumers to create proactive Consent policies and manage them centrally (within an org? across orgs? worldwide?) Where/how should these be used by third parties? It'd be good to spell these out. Maybe this has already been done?</p>



<a name="167783692"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167783692" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167783692">(Jun 10 2019 at 18:30)</a>:</h4>
<p>I can parse your statement at least two different ways, one that I am worried about....    FHIR scopes could stop at what the app/user is authorized by Role/Organization to do leaving Privacy/Consent rules to be applied later at the server... Or we could improve FHIR scopes so that they can do THAT and also encoee Privacy/Consent restrictions... But we should not assume that because we have addressed the first, that it automatically has addresed th esecond</p>



<a name="167783697"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167783697" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167783697">(Jun 10 2019 at 18:30)</a>:</h4>
<p>yes very much we have use cases. The Australian national program is drifting that way</p>



<a name="167783771"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167783771" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167783771">(Jun 10 2019 at 18:31)</a>:</h4>
<p>Cool -- is there a write-up of the use case, who'll participate, etc?</p>



<a name="167783781"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167783781" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167783781">(Jun 10 2019 at 18:31)</a>:</h4>
<p>me too.</p>



<a name="167783853"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167783853" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167783853">(Jun 10 2019 at 18:32)</a>:</h4>
<p>John the scopes need to get more useful. I don't know how much complexity that means. But we need to give the patient a useful language to say what they want to say to control sharing on a particular connection</p>



<a name="167783887"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167783887" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167783887">(Jun 10 2019 at 18:32)</a>:</h4>
<p>the only publish write up is:</p>



<a name="167783925"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167783925" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167783925">(Jun 10 2019 at 18:33)</a>:</h4>
<p><a href="http://www.healthintersections.com.au/?p=2868" target="_blank" title="http://www.healthintersections.com.au/?p=2868">http://www.healthintersections.com.au/?p=2868</a></p>



<a name="167783953"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167783953" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167783953">(Jun 10 2019 at 18:33)</a>:</h4>
<p>analysis is going to give slightly different details, of course</p>



<a name="167784107"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167784107" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167784107">(Jun 10 2019 at 18:35)</a>:</h4>
<blockquote>
<p>A consumer’s consent choices might look something like:<br>
[√] Share my records between organisations that provide care for me<br>
[  ] Share my records with [choose organisation]<br>
[√] Only share my records if I set up the connection<br>
[  ] Register all my care providers in [choose record location service]<br>
[√] Keep a copy of my health records in [choose repository]<br>
[  ] My care plan is found [choose care plan repository]<br>
[√] My advance care directive is [choose repository+document]<br>
[  ] Approve all/de-identified research use | check with me when research use is requested</p>
</blockquote>
<p>This is super interesting. A lot of these don't seem obviously tied to Consent for me, but they're certainly relevant consumer-centric system behaviors (like requesting records be forwarded to a specific repository, or setting up an advance care directive).</p>



<a name="167784252"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167784252" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167784252">(Jun 10 2019 at 18:36)</a>:</h4>
<p>The idea here is that once a Consent repository is in place, the national system will do some kind of system-level authorization that's backed by these policies (like, it'd have a bunch of clients allowed to connect, on behalf of certain care providers, and then the central system would compute a graph of patient/provider relations to enforce policies like "Share my records between organisations that provide care for me"?</p>



<a name="167784268"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167784268" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167784268">(Jun 10 2019 at 18:36)</a>:</h4>
<p>the relationship between "consent (information sharing permissions)" and "information sharing instructions" is slippery and not useful for us to draw</p>



<a name="167784329"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167784329" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167784329">(Jun 10 2019 at 18:37)</a>:</h4>
<p>the idea is that the clinical systems trust the central consent server and ask it what the patient choices are</p>



<a name="167784349"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167784349" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167784349">(Jun 10 2019 at 18:37)</a>:</h4>
<p>Oh, so the data aren't actually centralized here, just the consent?</p>



<a name="167784352"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167784352" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167784352">(Jun 10 2019 at 18:37)</a>:</h4>
<p>the central system doesn't do no computing</p>



<a name="167784358"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167784358" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167784358">(Jun 10 2019 at 18:37)</a>:</h4>
<p>right</p>



<a name="167784420"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167784420" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167784420">(Jun 10 2019 at 18:38)</a>:</h4>
<p>And how does System A determine that System B is providing care for Patient 123?</p>



<a name="167784446"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167784446" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167784446">(Jun 10 2019 at 18:38)</a>:</h4>
<p>(In order to act on Patient 123's centralized Consent that says "Share my records between organisations that provide care for me" -- which System A can read.)</p>



<a name="167784504"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167784504" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167784504">(Jun 10 2019 at 18:39)</a>:</h4>
<p>I expected that this would be based on the existing connection points established by referrals in the system</p>



<a name="167784520"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167784520" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167784520">(Jun 10 2019 at 18:39)</a>:</h4>
<p>that leaves some gaps that I did not address</p>



<a name="167784544"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167784544" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167784544">(Jun 10 2019 at 18:39)</a>:</h4>
<p>Sure. So "out of scope" for now; that's fair.</p>



<a name="167784647"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167784647" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167784647">(Jun 10 2019 at 18:40)</a>:</h4>
<p>MIHIN are aggressively collecting and collating the Patient's careteam to enable consent agreements framed like that (among other things)</p>



<a name="167784678"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167784678" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167784678">(Jun 10 2019 at 18:41)</a>:</h4>
<p>To be clear, in this framework if I write:</p>
<blockquote>
<p>[√] Keep a copy of my health records in ["Apple Health"]</p>
</blockquote>
<p>... this is where the scope obviously overlaps with our existing workflows.</p>



<a name="167784834"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167784834" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167784834">(Jun 10 2019 at 18:42)</a>:</h4>
<p>yes. In this case, I would imagine that the OAuth login for a healthcare service for apple would work like this:</p>
<ul>
<li>connect to Provider RS end-point, get redirected to Provider  AS</li>
<li>provider AS redirects you to national authentication server</li>
<li>that returns you to provider AS, which looks at the consent registry (and sees Apple is already consented)</li>
<li>it preselects "yes" to selection and asks user to confirm</li>
<li>user decides "yes" and then gets token etc</li>
</ul>



<a name="167784863"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167784863" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167784863">(Jun 10 2019 at 18:43)</a>:</h4>
<p>so the consent repository could be implemented as a 'there shall be only one' system. which simplifies everything at run-time. pushes the complexity at user-giving-their-consent time.</p>



<a name="167784899"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167784899" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Pyke <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167784899">(Jun 10 2019 at 18:44)</a>:</h4>
<p>Only one per Consent.scope</p>



<a name="167784965"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167784965" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167784965">(Jun 10 2019 at 18:44)</a>:</h4>
<p>It's not my intent that there is only one consent repository</p>



<a name="167784980"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167784980" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167784980">(Jun 10 2019 at 18:44)</a>:</h4>
<p>the idea of 'preferences' has not come up yet.. (dealt with it elsewhere, where it is a special case of Privacy Consent that simply has no custodian or performer</p>



<a name="167784982"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167784982" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167784982">(Jun 10 2019 at 18:44)</a>:</h4>
<p>Hmm, so:</p>
<blockquote>
<p>user decides "yes" and then gets token etc</p>
</blockquote>
<p>suggests the national registry is really just a kind of hint, and that it has no direct effect without the user taking action on the bilateral (Apply / Provider 123) authorization step.</p>



<a name="167785072"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167785072" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Pyke <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167785072">(Jun 10 2019 at 18:46)</a>:</h4>
<p>Then there would be only one per repository and you'd need very specific requirements for conflict resolution</p>



<a name="167785115"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167785115" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167785115">(Jun 10 2019 at 18:46)</a>:</h4>
<blockquote>
<p>It's not my intent that there is only one consent repository</p>
</blockquote>
<p>so there might be multiple consent repositories... and multiple consents at each?   sounds like an NP problem</p>



<a name="167785153"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167785153" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167785153">(Jun 10 2019 at 18:46)</a>:</h4>
<p>fill out each repository with conflicting consents and watch the system tip over</p>



<a name="167785155"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167785155" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167785155">(Jun 10 2019 at 18:46)</a>:</h4>
<p>there's always that, but I think it's inevitaable - which is why we need to be clear about how to find the applicable consents</p>



<a name="167785214"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167785214" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167785214">(Jun 10 2019 at 18:47)</a>:</h4>
<p>multiple repositories doesn't seem too bad, but there should be a rule that any patient can only have their consents managed by ONE of them..</p>



<a name="167785284"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167785284" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Pyke <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167785284">(Jun 10 2019 at 18:48)</a>:</h4>
<p>Or you end up needing a central query responder that queries all the repositories and gives back the aggregated reply</p>



<a name="167785359"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167785359" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167785359">(Jun 10 2019 at 18:49)</a>:</h4>
<blockquote>
<p>fill out each repository with conflicting consents and watch the system tip over</p>
</blockquote>
<p>repeat</p>



<a name="167785363"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167785363" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167785363">(Jun 10 2019 at 18:49)</a>:</h4>
<blockquote>
<p>there should be a rule that any patient can only have their consents managed by ONE of them</p>
</blockquote>
<p>Seems unlikely to me</p>



<a name="167785403"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167785403" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167785403">(Jun 10 2019 at 18:49)</a>:</h4>
<blockquote>
<p>fill out each repository with conflicting consents and watch the system tip over</p>
</blockquote>
<p>repeat</p>



<a name="167785406"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167785406" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167785406">(Jun 10 2019 at 18:49)</a>:</h4>
<p>I would have consents centrally and then make very specific consents with my actual health services</p>



<a name="167785560"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167785560" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167785560">(Jun 10 2019 at 18:51)</a>:</h4>
<p>but that doesn't keep me  from putting 'specific to each health service' conflicting consents in the various consent repositories... and watching the system tip over</p>



<a name="167785599"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167785599" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167785599">(Jun 10 2019 at 18:51)</a>:</h4>
<p>why would the system let you do that?</p>



<a name="167785605"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167785605" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167785605">(Jun 10 2019 at 18:51)</a>:</h4>
<p>push the complexity to the consent-capturing time... so that real-time is clean</p>



<a name="167785690"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167785690" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167785690">(Jun 10 2019 at 18:52)</a>:</h4>
<blockquote>
<p>why would the system let you do that?</p>
</blockquote>
<p>I would hope it wouldn't... but it seems every solution I have offered has been rejected... so clearly there is nothing preventing it</p>



<a name="167785741"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167785741" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167785741">(Jun 10 2019 at 18:53)</a>:</h4>
<p>I missed it if you offered a solution. National (or HIE) consents for general agrements overriden by local consent agreements - is that unreasonable ?</p>



<a name="167785776"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167785776" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167785776">(Jun 10 2019 at 18:53)</a>:</h4>
<p>so then in this central consent repository is only one per patient... right?</p>



<a name="167785847"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167785847" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167785847">(Jun 10 2019 at 18:54)</a>:</h4>
<p>where the local are... local to the custodian of that data... local</p>



<a name="167785882"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167785882" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Pyke <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167785882">(Jun 10 2019 at 18:54)</a>:</h4>
<p>Not at all, the central consent repository is the HIE for consents across organizations and consents that only impact local users are managed locally.</p>



<a name="167785931"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167785931" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167785931">(Jun 10 2019 at 18:55)</a>:</h4>
<p>not at all? I think we just said the same thing</p>



<a name="167786482"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167786482" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167786482">(Jun 10 2019 at 19:01)</a>:</h4>
<p>so I think the pseudocode that Dave and I worked up should work for this central consent repository. That pseudocode does not assume consents are managed in the same place anything else is managed... However the software doing this pseudocode should be a consent service, as it needs authorization to do a potentially sensitive query... and it should only expose appropriate results... and it is the results that I think we have been discussiong mostly all day.. is the results a OAuth scope? Is the results a pointer to a FHIR Consent? Is the results a XACML policyset ID? etc... what is the result.. There is not a good solution yet, because we are not there yet.</p>



<a name="167786489"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167786489" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167786489">(Jun 10 2019 at 19:01)</a>:</h4>
<p>ok so we have 2 different use cases: </p>
<ul>
<li>a central consent repository which stores all the consents for the inter-system</li>
<li>a central consent rspository that stores the consent arrangements pertinent to the inter-system</li>
</ul>



<a name="167786581"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167786581" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167786581">(Jun 10 2019 at 19:02)</a>:</h4>
<p>im not sure I understand what a consent arrangements pertinent means</p>



<a name="167786657"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167786657" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167786657">(Jun 10 2019 at 19:03)</a>:</h4>
<p>well, consent about the central store, and default consent arrangements for the inter-system, but maybe overridden in the systems</p>



<a name="167786793"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167786793" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167786793">(Jun 10 2019 at 19:05)</a>:</h4>
<p>are you trying to apply consent rules to accessing of consent rules? I don't think that is needed. The service that does the consent management and the service that does the consent decision are privileged enough to access consents (tends to not be privileged to access anything else).</p>



<a name="167786870"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167786870" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167786870">(Jun 10 2019 at 19:06)</a>:</h4>
<p>no I said nothing about that</p>



<a name="167786897"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167786897" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167786897">(Jun 10 2019 at 19:06)</a>:</h4>
<p>whew... well then what is "consent about the centeral store" mean?</p>



<a name="167787091"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167787091" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167787091">(Jun 10 2019 at 19:09)</a>:</h4>
<p>cosent about the health records stored in the central store (e.g. an HIE)</p>



<a name="167787127"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167787127" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167787127">(Jun 10 2019 at 19:09)</a>:</h4>
<p>clinical repository service?</p>



<a name="167787190"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167787190" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167787190">(Jun 10 2019 at 19:10)</a>:</h4>
<p>we don't usually use that term but yes</p>



<a name="167787214"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167787214" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167787214">(Jun 10 2019 at 19:10)</a>:</h4>
<p>you used it on your blog article, so I was confused</p>



<a name="167787249"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167787249" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167787249">(Jun 10 2019 at 19:11)</a>:</h4>
<p>YES, you must have a policy for "what should happen if the patient as ZERO consents"</p>



<a name="167787360"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167787360" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167787360">(Jun 10 2019 at 19:12)</a>:</h4>
<p>I will say that there could be a design criteria that indicates that for any one patient they only have one Privacy Consent... thus a business rule that means a patient must pick a consent repository, or have a way to move their rules from one consent repository to another.</p>



<a name="167787484"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167787484" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167787484">(Jun 10 2019 at 19:14)</a>:</h4>
<p>and then one FHIR Consent can have provisions sighting the rules for each clinical repository, possibly for each requesting organization, for each PurposeOfUse, for each type of data, for various timeframes within that repository... One big massive Consent. Assured as consistent by the consent management UI before it commits that Consent..</p>



<a name="167787547"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167787547" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167787547">(Jun 10 2019 at 19:15)</a>:</h4>
<p>or it could work harder, and have a different Consent for each clinical repository...   or different Consents for each PurposeOfUse... or different Consents for each requesting organization... and make sure that they are always not conflicting prior to saving them.</p>



<a name="167788419"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167788419" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167788419">(Jun 10 2019 at 19:26)</a>:</h4>
<p>Patient may have expressed no consent (which is most likely) but patient will have many permissions defined by policy.</p>



<a name="167788585"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167788585" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167788585">(Jun 10 2019 at 19:28)</a>:</h4>
<blockquote>
<p>YES, you must have a policy for "what should happen if the patient as ZERO consents"</p>
</blockquote>
<p>I think that is what I said here...  right?</p>



<a name="167788618"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167788618" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167788618">(Jun 10 2019 at 19:28)</a>:</h4>
<p>Imo a patient might not "pick" a consent. The permissions applicable are selected for the patient.</p>



<a name="167788782"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167788782" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167788782">(Jun 10 2019 at 19:30)</a>:</h4>
<blockquote>
<blockquote>
<p>YES, you must have a policy for "what should happen if the patient as ZERO consents"</p>
</blockquote>
<p>I think that is what I said here...  right?</p>
</blockquote>
<p>Yes, and that policy should be linked to the patient's data, and be expressed as a Permission or something</p>



<a name="167788927"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167788927" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167788927">(Jun 10 2019 at 19:32)</a>:</h4>
<p>That policy is a statement of rules and situations that are authorized (permissions) when no consent is found for the patient. The lack of a Patient specific Consent is what activates this default policy.</p>



<a name="167789021"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167789021" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167789021">(Jun 10 2019 at 19:33)</a>:</h4>
<p>If a patient enters a ER there may not be any consent. Just a legal policy that applies to the patient's data, some of which applies whether the patient consents or not.</p>



<a name="167789110"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167789110" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167789110">(Jun 10 2019 at 19:34)</a>:</h4>
<p>yes. that default policy is a hard thing to write... and does need to concern itself with safety of the patient, safety of the care-givers, etc... Yup, very hard to write</p>



<a name="167789153"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167789153" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167789153">(Jun 10 2019 at 19:35)</a>:</h4>
<p>that default policy needs to deal with physical actions as well... so it is beyond the domain of FHIR.</p>



<a name="167789166"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167789166" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167789166">(Jun 10 2019 at 19:35)</a>:</h4>
<p>True and my concern here is not how hard it is, but how is it transmitted in a computable way</p>



<a name="167789184"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167789184" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167789184">(Jun 10 2019 at 19:35)</a>:</h4>
<p>why does it need to be transmitted?</p>



<a name="167789260"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167789260" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167789260">(Jun 10 2019 at 19:36)</a>:</h4>
<p>We will soon work on a couple of use cases for this incl GDPR.</p>



<a name="167789311"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167789311" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167789311">(Jun 10 2019 at 19:37)</a>:</h4>
<p>Then what do you search? What metadata do you obtain that says "hey CPOE, here is what you can do with this data"?</p>



<a name="167789396"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167789396" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167789396">(Jun 10 2019 at 19:38)</a>:</h4>
<p>I agree that many people spend hours with lawyers and clinicians writing these default policies.. I just don't know of why they need to be encoded in an interoperable. There is no CPOE today that can read a defult policy and self-configure. That is a dream that is 50 years out.</p>



<a name="167789443"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167789443" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167789443">(Jun 10 2019 at 19:39)</a>:</h4>
<p>CPOE is configured by hand, with legal text from the lawyers in hand... hopefully the legal and clinician people test that it got configured properly.</p>



<a name="167789584"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167789584" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167789584">(Jun 10 2019 at 19:40)</a>:</h4>
<p>most important is that the default policy includes many physical access rules, many rules accessing systems that are not FHIR, and more... so to have a rules language that is that generic is to re-invent good rules languages such as XACML.</p>



<a name="167789661"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167789661" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167789661">(Jun 10 2019 at 19:41)</a>:</h4>
<p>default policy is hard enough to write in human readable language safactory to lawyers and clinicians.</p>



<a name="167789772"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167789772" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167789772">(Jun 10 2019 at 19:42)</a>:</h4>
<p>I will look at the use cases. In any case, if we set some clarity between patient-expressed-consent and permission-to-operate-with-data that would be a step forward, i think</p>



<a name="167789796"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167789796" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167789796">(Jun 10 2019 at 19:42)</a>:</h4>
<p>note that the same is true of what "Permit HIE access for Treatment"... this short form is built upon a large document (e.g. DURSA) that expreses what HIE is, what 'access' is, what 'for' means, what 'Treatment' is and is not...</p>



<a name="167792451"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Search%20by%20security/near/167792451" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> k connor <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Search.20by.20security.html#167792451">(Jun 10 2019 at 20:15)</a>:</h4>
<p>RE Sensitive clinical information.  SAMHSA registered a set of condition, procedure, observation, medication and Lab codes that map to some of the HL7 Sensitivity codes in VSAC. These were drawn from sensitive clinical code value sets used by 42 CFR Part 2 facilities, and mental health and HIV as sensitive categories to accommodate state and local consent requirements. As I understand it, some are from the VA for Title 38 Section 7332 protected conditions such as sickle cell anemia, substance use disorders, and HIV/AIDS.  To access, use your UMLS account.  Search for SAMHSA stewarded value sets.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
