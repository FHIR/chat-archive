---
layout: page
title: "FHIR Chat  · best practices? app shares access token with aggregator · Security and Privacy"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/index.html">Security and Privacy</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/best.20practices.3F.20app.20shares.20access.20token.20with.20aggregator.html">best practices? app shares access token with aggregator</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="259460362"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/best%20practices%3F%20app%20shares%20access%20token%20with%20aggregator/near/259460362" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Isaac Vetter <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/best.20practices.3F.20app.20shares.20access.20token.20with.20aggregator.html#259460362">(Oct 28 2021 at 22:26)</a>:</h4>
<p>I'm hoping to hear the community's perspective on the following scenario -- </p>
<p>A SMART on FHIR app contracts with a 3rd party middleware vendor. The app passes it's access_token to the middleware which reads and writes to the resource server on its behalf. Please indicate in which scenarios you'd deem this appropriate:</p>



<a name="259460442"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/best%20practices%3F%20app%20shares%20access%20token%20with%20aggregator/near/259460442" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Isaac Vetter <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/best.20practices.3F.20app.20shares.20access.20token.20with.20aggregator.html#259460442">(Oct 28 2021 at 22:27)</a>:</h4>
<p>/poll the middleware is a library or compiled in SDK<br>
Yes, that's okay</p>



<a name="259460577"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/best%20practices%3F%20app%20shares%20access%20token%20with%20aggregator/near/259460577" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Isaac Vetter <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/best.20practices.3F.20app.20shares.20access.20token.20with.20aggregator.html#259460577">(Oct 28 2021 at 22:29)</a>:</h4>
<p>/poll the app is patient facing and the patient agreed to the disclosure in the EULA<br>
yes, okay<br>
No, bad security</p>



<a name="259460595"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/best%20practices%3F%20app%20shares%20access%20token%20with%20aggregator/near/259460595" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Isaac Vetter <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/best.20practices.3F.20app.20shares.20access.20token.20with.20aggregator.html#259460595">(Oct 28 2021 at 22:29)</a>:</h4>
<p>/poll the app is operated by a covered entity and the CE signed a BAA with both parties<br>
yes, okay<br>
no, bad security</p>



<a name="259460685"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/best%20practices%3F%20app%20shares%20access%20token%20with%20aggregator/near/259460685" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Isaac Vetter <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/best.20practices.3F.20app.20shares.20access.20token.20with.20aggregator.html#259460685">(Oct 28 2021 at 22:30)</a>:</h4>
<p>/poll instead of acquiring then sharing the access token, the middleware performs the full auth code flow on behalf of the app<br>
yes, okay<br>
no, bad security</p>



<a name="259462781"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/best%20practices%3F%20app%20shares%20access%20token%20with%20aggregator/near/259462781" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/best.20practices.3F.20app.20shares.20access.20token.20with.20aggregator.html#259462781">(Oct 28 2021 at 22:54)</a>:</h4>
<p><span class="user-mention" data-user-id="191864">@Isaac Vetter</span> I'm not sure how to answer these. Who's the "CE"? What's the details of the contract between app vendor and middleware vendor? Who offered the app to the patient? What's do you mean by 'security'? (some of you options appear to provide good technical security - maybe - and you're asking about perceptions). in the last option, how does the app authz to the middleware?</p>



<a name="259466652"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/best%20practices%3F%20app%20shares%20access%20token%20with%20aggregator/near/259466652" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/best.20practices.3F.20app.20shares.20access.20token.20with.20aggregator.html#259466652">(Oct 28 2021 at 23:42)</a>:</h4>
<p>I don't think the blanket terms "okay" and "bad" are meaningful here. Practices must be evaluated in the context of individual agency, informedness, understanding, expectations...</p>



<a name="259512835"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/best%20practices%3F%20app%20shares%20access%20token%20with%20aggregator/near/259512835" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jeffy Mathew Jose <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/best.20practices.3F.20app.20shares.20access.20token.20with.20aggregator.html#259512835">(Oct 29 2021 at 11:49)</a>:</h4>
<p>In general, sharing of access_token is not a good security practice. The whole idea of OAuth and related specs builds on the idea of not sharing security tokens/secrets (which has caused issues). There are standards (or ideas in draft) for delegated access which can be better than blind sharing.</p>
<p>Having said that there may be cases where some business partnership nudges towards common access token b/w systems which need to be evaluated case by case. (those should be exceptional and rare)</p>



<a name="259513707"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/best%20practices%3F%20app%20shares%20access%20token%20with%20aggregator/near/259513707" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/best.20practices.3F.20app.20shares.20access.20token.20with.20aggregator.html#259513707">(Oct 29 2021 at 11:57)</a>:</h4>
<p><span class="user-mention" data-user-id="194170">@Jeffy Mathew Jose</span> you 'share' your token with your application libraries without even thinking about it. Why would splitting libraries into client and server module be any different? There's some reasons, yes, but not convincing ones - depends on how. I think the problem is in 'horizontal' sharing = between apps, rather than vertical sharing. but that also assumes a particular concept of 'between apps'</p>



<a name="259517273"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/best%20practices%3F%20app%20shares%20access%20token%20with%20aggregator/near/259517273" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vadim Peretokin <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/best.20practices.3F.20app.20shares.20access.20token.20with.20aggregator.html#259517273">(Oct 29 2021 at 12:31)</a>:</h4>
<p>While there's always exceptions, it seems fine to give an opinion on the 'general case'.</p>



<a name="259520970"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/best%20practices%3F%20app%20shares%20access%20token%20with%20aggregator/near/259520970" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cooper Thompson <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/best.20practices.3F.20app.20shares.20access.20token.20with.20aggregator.html#259520970">(Oct 29 2021 at 13:06)</a>:</h4>
<p>It seems fine to share an access token with a party that you explicitly trust for a specific purpose.  But the "explicit trust" is the essential part.</p>



<a name="259521012"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/best%20practices%3F%20app%20shares%20access%20token%20with%20aggregator/near/259521012" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cooper Thompson <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/best.20practices.3F.20app.20shares.20access.20token.20with.20aggregator.html#259521012">(Oct 29 2021 at 13:06)</a>:</h4>
<p>And should probably involve vetting, security review, etc.</p>



<a name="259528666"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/best%20practices%3F%20app%20shares%20access%20token%20with%20aggregator/near/259528666" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/best.20practices.3F.20app.20shares.20access.20token.20with.20aggregator.html#259528666">(Oct 29 2021 at 14:03)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191316">Grahame Grieve</span> <a href="#narrow/stream/179247-Security-and.20Privacy/topic/best.20practices.3F.20app.20shares.20access.20token.20with.20aggregator/near/259513707">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="194170">Jeffy Mathew Jose</span> you 'share' your token with your application libraries without even thinking about it. Why would splitting libraries into client and server module be any different? There's some reasons, yes, but not convincing ones - depends on how. I think the problem is in 'horizontal' sharing = between apps, rather than vertical sharing. but that also assumes a particular concept of 'between apps'</p>
</blockquote>
<p>that is the last case we were asked about. The first cases didn't express a business relationship.</p>



<a name="259528828"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/best%20practices%3F%20app%20shares%20access%20token%20with%20aggregator/near/259528828" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/best.20practices.3F.20app.20shares.20access.20token.20with.20aggregator.html#259528828">(Oct 29 2021 at 14:04)</a>:</h4>
<p>These all seem to be asking for a legal opinion on a policy statement relative to HIPAA and other USA regulations.... I am not a lawyer</p>



<a name="259529092"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/best%20practices%3F%20app%20shares%20access%20token%20with%20aggregator/near/259529092" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/best.20practices.3F.20app.20shares.20access.20token.20with.20aggregator.html#259529092">(Oct 29 2021 at 14:06)</a>:</h4>
<p>As a security person,  I would favor architectures that have a clear chain of trust. Implied trust (where the intermediary is allowed to hit the backend onbehalf of the app and user based solely on some unstated trust) are always problematic. But sometimes they can be build using good old legal contracts. But there needs to be a clear chain of trust.</p>



<a name="259529165"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/best%20practices%3F%20app%20shares%20access%20token%20with%20aggregator/near/259529165" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/best.20practices.3F.20app.20shares.20access.20token.20with.20aggregator.html#259529165">(Oct 29 2021 at 14:07)</a>:</h4>
<p>thus, the all could be acceptable... but generally only the last one is provable in technical terms.</p>



<a name="259566062"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/best%20practices%3F%20app%20shares%20access%20token%20with%20aggregator/near/259566062" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Isaac Vetter <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/best.20practices.3F.20app.20shares.20access.20token.20with.20aggregator.html#259566062">(Oct 29 2021 at 18:35)</a>:</h4>
<p>Thank you, guys. The real-world scenario is an intermediary (that perhaps aggregates) in front of a provider-facing app sold to health systems.</p>



<a name="259566073"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/best%20practices%3F%20app%20shares%20access%20token%20with%20aggregator/near/259566073" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Isaac Vetter <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/best.20practices.3F.20app.20shares.20access.20token.20with.20aggregator.html#259566073">(Oct 29 2021 at 18:35)</a>:</h4>
<p>To answer Grahame's questions explicitly:</p>
<ul>
<li>
<p>Who's the "CE"? <br>
** A healthcare delivery system in the US.</p>
</li>
<li>
<p>What's the details of the contract between app vendor and middleware vendor? <br>
** I don't know. Re: business contract -- the app vendor pays the middleware vendor. Re: technical contract --  I'm guessing that the middleware vendor provides a RESTful and messaging FHIR server that the app vendor entirely interacts with. And that they've established some type of tenant id to identify which health system is using the app.  I don't know how the app authnz's to the middleware. </p>
</li>
<li>
<p>Who offered the app to the patient? <br>
** This was a made-up scenario, the straighforward case would be that the app developer offered the app (e.g. not a covered entity).</p>
</li>
<li>
<p>What's do you mean by 'security'? <br>
** I think security best practice or maybe technical acceptableness.</p>
</li>
</ul>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
