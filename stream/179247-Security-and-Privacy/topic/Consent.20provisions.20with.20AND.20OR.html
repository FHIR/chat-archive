---
layout: page
title: "FHIR Chat  · Consent provisions with AND OR · Security and Privacy"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/index.html">Security and Privacy</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Consent.20provisions.20with.20AND.20OR.html">Consent provisions with AND OR</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="160015387"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Consent%20provisions%20with%20AND%20OR/near/160015387" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Consent.20provisions.20with.20AND.20OR.html#160015387">(Mar 05 2019 at 16:08)</a>:</h4>
<p>I have submitted <a href="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=20503" target="_blank" title="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=20503">GF#20503</a> given some discussion on monday's GDPR call. I am interested in discussion that would help us understand the need and understand if the solution I mention is sufficient. Here is the body of the GF item<br>
There are needs to encode into a privacy Consent provisions of various combinations. That is there are times when I want to say:</p>
<p>a) AND -- these two element values MUST exist for the provision to be evaluated</p>
<p>b) OR -- either of these two element values MUST exist for the provision to be evaluated</p>
<p>For example:</p>
<p>a) The consent authorizes access when the request for data has both RESEARCH and RESEARCH_XYZ purposeOfUse</p>
<p>b) The consent authorizaes access when the request for data is either RESEARCH or RESEARCH_XYZ purposeOfUse</p>
<p>Back when consent had .except; this was handled by</p>
<p>a)  One except would include in the purpseOfUse two values for RESEARCH and RESEARCH_XYZ</p>
<p>b) Two except would exist with one including purposeOfUse of RESEARCH, the other except would have RESEARCH_XYZ.</p>
<p>Thus OR is handled at the .except repitition level, and AND is handled with repitition of the element within the .except</p>
<p>With .provision this is unclear, especially since .provision can infinitely nest. Is it true that repitition at the .provision level is always OR, and repitition at the elements within .provision is always AND (with the exception of provision.provision).?  It is not clear this is the intent, and not clear if this is possible,.</p>
<p>Would be good to have the examples I give above expressed as examples of this, and encoded in examples.</p>
<p>This topic came up on the HL7 GDPR call March 4, 2019; as they were trying to encode some GDPR like consents and needed AND/OR logic.</p>
<p>I submitted <a href="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=13420" target="_blank" title="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=13420">GF#13420</a> which was dismissed withiout understanding my request for AND/OR capability.</p>



<a name="160016567"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Consent%20provisions%20with%20AND%20OR/near/160016567" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Consent.20provisions.20with.20AND.20OR.html#160016567">(Mar 05 2019 at 16:22)</a>:</h4>
<p><span class="user-mention" data-user-id="192587">@David Pyke</span></p>



<a name="160017281"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Consent%20provisions%20with%20AND%20OR/near/160017281" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Pyke <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Consent.20provisions.20with.20AND.20OR.html#160017281">(Mar 05 2019 at 16:28)</a>:</h4>
<p>Ah, that makes more sense.  We need to handle the nested provisions as either specifically or/and.  My understanding of the design was that a nested provision was to make an exception to the parent provision.  Additions would be handled at the parent.  I can ask this at today's CBCP meeting.</p>



<a name="160017769"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Consent%20provisions%20with%20AND%20OR/near/160017769" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Consent.20provisions.20with.20AND.20OR.html#160017769">(Mar 05 2019 at 16:34)</a>:</h4>
<p>I am just not sure that my recommendation (repeated .provisions are considered OR, repeated elements inside .provision are AND) will always work. Need to setup some examples of permit vs deny to determine if this works. It was far easier to understand when there was just one level of .except</p>



<a name="160018502"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Consent%20provisions%20with%20AND%20OR/near/160018502" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Pyke <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Consent.20provisions.20with.20AND.20OR.html#160018502">(Mar 05 2019 at 16:43)</a>:</h4>
<p>My thought it we need a flag inside provision to mark it as "or" or "except"</p>



<a name="160018566"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Consent%20provisions%20with%20AND%20OR/near/160018566" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Consent.20provisions.20with.20AND.20OR.html#160018566">(Mar 05 2019 at 16:44)</a>:</h4>
<p>I hope not. but we did discuss that on monday... it would make processing much harder</p>



<a name="160018583"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Consent%20provisions%20with%20AND%20OR/near/160018583" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Consent.20provisions.20with.20AND.20OR.html#160018583">(Mar 05 2019 at 16:44)</a>:</h4>
<p>I think if we need to start down that path, we should abandon the whole provision and just tell people to use XACML</p>



<a name="160018599"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Consent%20provisions%20with%20AND%20OR/near/160018599" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Pyke <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Consent.20provisions.20with.20AND.20OR.html#160018599">(Mar 05 2019 at 16:44)</a>:</h4>
<p>It was designed around except logic for sub-provisions.  I don't think anyone considered the Or case</p>



<a name="160018698"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Consent%20provisions%20with%20AND%20OR/near/160018698" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Consent.20provisions.20with.20AND.20OR.html#160018698">(Mar 05 2019 at 16:46)</a>:</h4>
<p>I did include it in the original Consent that had .except</p>



<a name="160018720"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Consent%20provisions%20with%20AND%20OR/near/160018720" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Consent.20provisions.20with.20AND.20OR.html#160018720">(Mar 05 2019 at 16:46)</a>:</h4>
<p>and I am sure I described AND and OR logic -- as I have expressed in the new gForge.</p>



<a name="160018880"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Consent%20provisions%20with%20AND%20OR/near/160018880" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Pyke <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Consent.20provisions.20with.20AND.20OR.html#160018880">(Mar 05 2019 at 16:48)</a>:</h4>
<p>It is mentioned in the description in STU3 but not how one distinguishes between except and OR</p>



<a name="160018898"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Consent%20provisions%20with%20AND%20OR/near/160018898" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Pyke <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Consent.20provisions.20with.20AND.20OR.html#160018898">(Mar 05 2019 at 16:48)</a>:</h4>
<p>CBCP meets in 12 minutes so we can discuss it there</p>



<a name="160037768"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Consent%20provisions%20with%20AND%20OR/near/160037768" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Consent.20provisions.20with.20AND.20OR.html#160037768">(Mar 05 2019 at 20:37)</a>:</h4>
<p>Here are two distinct use-cases to show AND vs OR. They are somewhat contrived to be compact, but not really unusual. I will use purposeOfUse as a flat vocabulary, where as there is some structure such that Research_XYZ would be seen as a more specific version of Research, thus a request for data on Research_XYZ could be seen as the same as Research+Research_XYZ In the first one ( 1 ) the patient is authorizing requests that have purpose of either Research or the xyz specific research project; and ( 2 ) the patient is authorizing only requests that are declared as both Research and xyz specific research project.</p>
<p>Given that the root provision must exist, I simply made the root .provision that denies all access to everything covered by the .policy. Presumably .policy is clear about how it relates to other Consent(s) so as to not have this policy negate another that is Treatment authorizing. This root level and combination with other Consents is the topic of another discussion with @grahame. There was a root level set of context setting elements (period, actor, purpose, etc), where these context setting elements were simply identifying the context that this Consent applies to. Thus a transaction that does not fit within the context given, is not applicable to that Consent. </p>
<p>trying to do a compact pseudo json... I might be horably wrong with this pseudo-json encoding</p>
<p>1) Authorize all requests for data with purpose of Research and all requests with purpose of Research_XYZ<br>
.provision <br>
 {<br>
 "type":"deny",<br>
 "provision": <br>
   [{"type":"permit","purpose":["RESEARCH"]},<br>
    {"type":"permit","purpose":["RESEARCH_XYZ"]}]<br>
  }</p>
<p>2) Authorize all requests for data that have both purpose of Research and Research_XYZ indicated. Meaning a request that just asks for purpose of Research would be denied.<br>
.provision <br>
 {<br>
 "type":"deny",<br>
 "provision": <br>
   [{"type":"permit","purpose":["RESEARCH", "RESEARCH_XYZ"]}],<br>
  }  </p>
<p>I guess in the case of ( 1 ), one could/should have a deeper nested deny for the opposite purpose value. (e.g. permit research and deny research_xyz; or permit research_xyz and deny research)  Which is where I am not clear everything works.</p>
<p>I wonder if the structure of .provision is going to work.</p>



<a name="160037795"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Consent%20provisions%20with%20AND%20OR/near/160037795" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Consent.20provisions.20with.20AND.20OR.html#160037795">(Mar 05 2019 at 20:37)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> ?</p>



<a name="161651719"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Consent%20provisions%20with%20AND%20OR/near/161651719" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Giorgio Cangioli <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Consent.20provisions.20with.20AND.20OR.html#161651719">(Mar 25 2019 at 14:59)</a>:</h4>
<p>Hi everyone. Any conclusion on this thread ? What about to consider OR what is inside the same element (e.g. policyRule; provision) and consider  AND the relationship between elements. I prepared a matrix with possible combinations based on the above case that I hope we can discuss in the incoming GDPR on FHIR call.</p>



<a name="161651919"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Consent%20provisions%20with%20AND%20OR/near/161651919" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Consent.20provisions.20with.20AND.20OR.html#161651919">(Mar 25 2019 at 15:01)</a>:</h4>
<p><span class="user-mention" data-user-id="192587">@David Pyke</span> can you join the HL7 GDPR call today?</p>



<a name="161652408"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Consent%20provisions%20with%20AND%20OR/near/161652408" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Pyke <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Consent.20provisions.20with.20AND.20OR.html#161652408">(Mar 25 2019 at 15:05)</a>:</h4>
<p>Yep, I'll bethere</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
