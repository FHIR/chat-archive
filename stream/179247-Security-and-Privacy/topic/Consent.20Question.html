---
layout: page
title: "FHIR Chat  · Consent Question · Security and Privacy"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/index.html">Security and Privacy</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Consent.20Question.html">Consent Question</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="159312274"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Consent%20Question/near/159312274" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Consent.20Question.html#159312274">(Feb 25 2019 at 04:38)</a>:</h4>
<p>I'm looking at the R4 consent - it no longer has a basic policy like Consent.policyRule to which exceptions apply to. If, when I'm processing the R4 Consent, none of the provisions  apply, how do I know whether the default answer is yes or no?</p>



<a name="159312280"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Consent%20Question/near/159312280" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Consent.20Question.html#159312280">(Feb 25 2019 at 04:38)</a>:</h4>
<p><span class="user-mention" data-user-id="191404">@John Moehrke</span> <span class="user-mention" data-user-id="192248">@Alexander Mense</span></p>



<a name="159312372"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Consent%20Question/near/159312372" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Consent.20Question.html#159312372">(Feb 25 2019 at 04:41)</a>:</h4>
<p>Also, I'd like to clarify the use of Consent.provision.actor.role - what would the right role be for the person using the restful interface to get information about the patient?</p>



<a name="159341797"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Consent%20Question/near/159341797" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Consent.20Question.html#159341797">(Feb 25 2019 at 14:43)</a>:</h4>
<p>The .policyRule is still at the root. <br>
Im not happy about it either.. but the group chose to force all of that into the first provision. So you would put that base policy into the first provision, and nested provisions in provision.provision would be counter access rules, with potential to have provision.provision.provision counter rules to those.     It seems that each provision should have had a .policyRule?</p>



<a name="159351003"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Consent%20Question/near/159351003" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Pyke <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Consent.20Question.html#159351003">(Feb 25 2019 at 16:33)</a>:</h4>
<p>The actor.role is a policy decision.  We simply allow for filtering based on that</p>



<a name="159351201"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Consent%20Question/near/159351201" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Pyke <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Consent.20Question.html#159351201">(Feb 25 2019 at 16:35)</a>:</h4>
<p>Both Consent.policy and Consent.policyRule exist at the root.  Where are you looking to see that it no longer applies or am I reading your comment wrong?</p>



<a name="159359389"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Consent%20Question/near/159359389" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mohammad Jafari <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Consent.20Question.html#159359389">(Feb 25 2019 at 18:25)</a>:</h4>
<p>I want to add that the outcome of evaluating a consent resource against an access request is not necessarily either a yes or a no. It can be neither, as captured by the XACML <code>NotApplicable</code>. Whether or not a <code>NotApplicable</code> eventually results in denying or permitting access depends on the overarching policies and is beyond the scope of an individual consent policy.</p>



<a name="159381379"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Consent%20Question/near/159381379" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Consent.20Question.html#159381379">(Feb 25 2019 at 23:12)</a>:</h4>
<p>ok it did not change. But what's a consent engine to do if it runs through the provisions, and none of them apply?</p>



<a name="159381415"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Consent%20Question/near/159381415" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Consent.20Question.html#159381415">(Feb 25 2019 at 23:13)</a>:</h4>
<p>and I don't understand the response about actor role - if I'm making a consent statement, but I don't know how to describe what I'm consenting to, how can that work?</p>



<a name="159381430"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Consent%20Question/near/159381430" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Consent.20Question.html#159381430">(Feb 25 2019 at 23:13)</a>:</h4>
<p>in that case then that consent doesn't apply... this will happen... a Consent that authorizes a Research project will NOT apply to a Treatment usecase</p>



<a name="159381602"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Consent%20Question/near/159381602" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Consent.20Question.html#159381602">(Feb 25 2019 at 23:16)</a>:</h4>
<p>so. that raises question for me... how would a server know what the use case is?</p>



<a name="159381625"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Consent%20Question/near/159381625" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Consent.20Question.html#159381625">(Feb 25 2019 at 23:17)</a>:</h4>
<p>I don't believe that we've described that (or any options for that). The nearest we've come is: <a href="http://hl7.org/fhir/security-labels.html#break-the-glass" target="_blank" title="http://hl7.org/fhir/security-labels.html#break-the-glass">http://hl7.org/fhir/security-labels.html#break-the-glass</a></p>



<a name="159381761"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Consent%20Question/near/159381761" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mohammad Jafari <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Consent.20Question.html#159381761">(Feb 25 2019 at 23:19)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> <br>
As I mentioned above, in this case the result should be <code>NotApplicable</code>. This is a common case in policy evaluation by an authorization engine.<br>
"Grahame Grieve: ok it did not change. But what's a consent engine to do if it runs through the provisions, and none of them apply?"</p>



<a name="159381908"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Consent%20Question/near/159381908" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Consent.20Question.html#159381908">(Feb 25 2019 at 23:21)</a>:</h4>
<p>well, ok. have we defined a way for patient to say anything about the global outcome?</p>



<a name="159381949"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Consent%20Question/near/159381949" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Consent.20Question.html#159381949">(Feb 25 2019 at 23:21)</a>:</h4>
<p>actually, I guess, I'm asking whether we've defined anything about whether to stop processing and say that you've found an answer, or whether to keep looking for further exceptions to the rule</p>



<a name="159428489"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Consent%20Question/near/159428489" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Consent.20Question.html#159428489">(Feb 26 2019 at 14:39)</a>:</h4>
<p>Within one Consent, one walks all the provisions. When one finds a provision that applies and none of the nested exceptions apply; then that provision (PERMIT/DENY) applies...  The vision that I originally had, which has been slightly upset by the redesign, was to lay the structure of the provisions very similar to XACML. Where in XACML the top most rule is the default that will be enforced if no underlying exceptions apply. This is somewhat how I explained the Consent provisions above.   The main difference I had with XACML is that provisions are nested to show precidence, where in XACML it is an ordered list of rules with the last one stated in the policy-set is the default to use if no previous rule fired. The unknown is how exhaustively one must search the provisions, that is to say, how does one know that a provision applies 'better' than a provision that is listed later. XACML deals with this with ordered rules. <br>
How one knows which Consent applies and which ones don't apply at all; likely requires exhaustive search.</p>



<a name="159441523"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Consent%20Question/near/159441523" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mohammad Jafari <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Consent.20Question.html#159441523">(Feb 26 2019 at 17:32)</a>:</h4>
<p><span class="user-mention" data-user-id="191404">@John Moehrke</span> XACML uses <code>target</code> essentially as a mechanism to index policies/rules to match them against an incoming request. The idea is to have a simple condition (e.g. PoU) based on which rules can be indexed so that a quick scan of that index can narrow down the set of potentially applicable target policies/rules to examine further. More complex conditions are then expressed in the <code>condition</code> element which should be evaluated exhaustively for every matching target rule. <br>
This model has been criticized and some have called to deprecate <code>target</code> and only use <code>condition</code> but I think it provides a flexible indexing/look-up mechanism in cases where the number of rules/policies is large. <br>
In the case of Consent, I think the patient ID and the date provides a very efficient way to index and narrow down the search space for an incoming request in most use-cases (bulk access could be an exception) so we already have something like <code>target</code>. </p>
<p>XACML also uses decision-combining algorithms for resolving potentially conflicting decisions from different matching rules/policies and the order-based precedence you mentioned is just one of them. I think the more common ones are <code>deny-overrides</code> and <code>permit-overrides</code>.  Personally, I think this is less complicated compared to the hierarchical rule structure currently defined in the consent resource. I think when we think of expressing access control rules, intuitively we often think of <code>AND/OR</code>-ing  exceptions rather than a deep chain of exceptions to other exceptions. </p>
<p>Aside from that, I think the most important thing that is missing from the Consent specifications right now is defining the semantics of the rule language in the <code>provision</code> element. It is currently not clearly defined how these rules must be processed and interpreted. I think we should have at least an informal definition for the semantics to answer some of the questions in this thread.</p>



<a name="159442206"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Consent%20Question/near/159442206" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Consent.20Question.html#159442206">(Feb 26 2019 at 17:43)</a>:</h4>
<p>Note that we did loose a section on how to interpret the consent -- see this historic <a href="http://hl7.org/fhir/2016Sep/consent.html#int" target="_blank" title="http://hl7.org/fhir/2016Sep/consent.html#int">http://hl7.org/fhir/2016Sep/consent.html#int</a></p>



<a name="159442341"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Consent%20Question/near/159442341" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Consent.20Question.html#159442341">(Feb 26 2019 at 17:44)</a>:</h4>
<p>it wasn't great, but it did try to cover some of this.</p>



<a name="159442388"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Consent%20Question/near/159442388" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Consent.20Question.html#159442388">(Feb 26 2019 at 17:45)</a>:</h4>
<p>we did explictly not take on all of the complexity of XACML, with th expectation that if someone really needs that complexity then they should use XACML and not .provisions</p>



<a name="159488088"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Consent%20Question/near/159488088" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Consent.20Question.html#159488088">(Feb 27 2019 at 07:13)</a>:</h4>
<p>I am certainly interested in the rule language of the provision element. I’m not sure that ‘semantics’ is quite the right word. I want to choose a subset of it, and find a way to have consistent implementations across the RESTful API</p>



<a name="159488143"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Consent%20Question/near/159488143" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Consent.20Question.html#159488143">(Feb 27 2019 at 07:14)</a>:</h4>
<p>What I haven’t figured out right now is, I can see how I process a set of provisions in a single Consent resource... but I have a set of resources. Do I have to decide which applicable provision is the narrowest? Can you supersede a consent agreement with an additional one on one specific provision without rendering the entire original consent invalid?</p>



<a name="159519600"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Consent%20Question/near/159519600" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Consent.20Question.html#159519600">(Feb 27 2019 at 14:35)</a>:</h4>
<p>the easy answer is: thats policy... but I expect that you do need to exhaustively process all consents. Usually we recommend that harmonization of a set of consents should be done when consents are created/updated; so that processing consents in real-time are not burdened. This sometimes results in a policy that allows only one consent, thus finding more than one is a policy failure.</p>



<a name="159558090"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Consent%20Question/near/159558090" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mohammad Jafari <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Consent.20Question.html#159558090">(Feb 27 2019 at 22:19)</a>:</h4>
<p>In our preliminary demo, the Consent Decision Point would look at all the consents applicable to a patient and then use a <code>most-recent-overrides</code> strategy for resolving any potential conflicts. This implementation would still needs to fetch and parse all the Consents for the given patient before being able to determine whether the Consent is applicable to the current access request (because the patient may have different consents focused on different purposes, organizations, etc.) One area I think we can improve and elaborate in an implementation guide is how to use search parameters to narrow this down so a more precise set of applicable Consents is fetched, parsed, and examined.</p>



<a name="159739285"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Consent%20Question/near/159739285" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Consent.20Question.html#159739285">(Mar 01 2019 at 18:58)</a>:</h4>
<p><span class="user-mention" data-user-id="191920">@Mohammad Jafari</span> what is "all the consents applicable to a patient"?</p>



<a name="159740071"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Consent%20Question/near/159740071" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Consent.20Question.html#159740071">(Mar 01 2019 at 19:08)</a>:</h4>
<p>just checking because it reads similarly to "purpose" and I am always afraid that we use consent for purpose.</p>



<a name="159754519"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179247-Security%20and%20Privacy/topic/Consent%20Question/near/159754519" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mohammad Jafari <a href="https://fhir.github.io/chat-archive/stream/179247-Security-and-Privacy/topic/Consent.20Question.html#159754519">(Mar 01 2019 at 22:19)</a>:</h4>
<p>This was a simple query based on <code>Consent.patient</code> which would return all the consents applied to the given patient. I agree that this query can definitely improved to filter out consents with other purposes etc.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
