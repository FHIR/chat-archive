---
layout: page
title: "FHIR Chat  · Invariant expressions · committers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179165-committers/index.html">committers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/Invariant.20expressions.html">Invariant expressions</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="154012797"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/Invariant%20expressions/near/154012797" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/Invariant.20expressions.html#154012797">(Oct 27 2018 at 02:54)</a>:</h4>
<p>Are we still populating the XPath expression definition?</p>



<a name="154012798"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/Invariant%20expressions/near/154012798" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/Invariant.20expressions.html#154012798">(Oct 27 2018 at 02:56)</a>:</h4>
<p>If so, need a little help with the fhirpath expression <code>appointment.cancelationReason.exists() implies (Appointment.status='no-show' or Appointment.status='cancelled')</code> as XPath</p>



<a name="154012799"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/Invariant%20expressions/near/154012799" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/Invariant.20expressions.html#154012799">(Oct 27 2018 at 03:04)</a>:</h4>
<p>I came up with this, hope its right - tested ok with an online tester</p>
<div class="codehilite"><pre><span></span>not(exists(Appointment/cancellationReason)) or (exists(Appointment/cancellationReason) and (Appointment/status/@value=&#39;no-show&#39; or Appointment/status/@value=&#39;cancelled&#39;))
</pre></div>



<a name="154012807"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/Invariant%20expressions/near/154012807" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/Invariant.20expressions.html#154012807">(Oct 27 2018 at 04:06)</a>:</h4>
<p>Why is appointment part of the invariant?  Isn't that the context?</p>



<a name="154012809"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/Invariant%20expressions/near/154012809" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/Invariant.20expressions.html#154012809">(Oct 27 2018 at 05:15)</a>:</h4>
<p>This invariant is on the appointment resource, in the fhirpath expression its not required, but others have it and is more illustrative</p>



<a name="154012810"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/Invariant%20expressions/near/154012810" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/Invariant.20expressions.html#154012810">(Oct 27 2018 at 05:16)</a>:</h4>
<p>And in the XPath, isn't the top level the context, so has to be applied there?</p>



<a name="154012819"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/Invariant%20expressions/near/154012819" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/Invariant.20expressions.html#154012819">(Oct 27 2018 at 05:46)</a>:</h4>
<p>In XPath the context would be the Appointment resource, so the invariant refers to nodes that exist beneath that</p>



<a name="154012820"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/Invariant%20expressions/near/154012820" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/Invariant.20expressions.html#154012820">(Oct 27 2018 at 05:47)</a>:</h4>
<p>not(exists(f:cancellationReason)) or f:status/@value=('no-show', 'cancelled')</p>



<a name="154012821"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/Invariant%20expressions/near/154012821" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/Invariant.20expressions.html#154012821">(Oct 27 2018 at 05:54)</a>:</h4>
<p>Thanks, I'll update it</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
