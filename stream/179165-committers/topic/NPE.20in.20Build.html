---
layout: page
title: "FHIR Chat  · NPE in Build · committers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179165-committers/index.html">committers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/NPE.20in.20Build.html">NPE in Build</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="233501094"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/NPE%20in%20Build/near/233501094" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/NPE.20in.20Build.html#233501094">(Apr 07 2021 at 14:48)</a>:</h4>
<p>I'm getting a NullPointerException in the build that I don't get locally:</p>
<div class="codehilite"><pre><span></span><code>This was a Full Build                                                      2.722  52sec  862MB
FHIR build failure @ Wed, Apr 7, 2021 14:09+0000                           0.109  52sec  862MB
Error: null
java.lang.NullPointerException
    at org.hl7.fhir.definitions.validation.ResourceValidator.noExternals(ResourceValidator.java:1199)
    at org.hl7.fhir.definitions.validation.ResourceValidator.check(ResourceValidator.java:1155)
    at org.hl7.fhir.definitions.validation.ResourceValidator.checkElement(ResourceValidator.java:728)
    at org.hl7.fhir.definitions.validation.ResourceValidator.checkElement(ResourceValidator.java:779)
    at org.hl7.fhir.definitions.validation.ResourceValidator.check(ResourceValidator.java:184)
    at org.hl7.fhir.definitions.validation.ResourceValidator.check(ResourceValidator.java:594)
    at org.hl7.fhir.tools.publisher.Publisher.validate(Publisher.java:1786)
    at org.hl7.fhir.tools.publisher.Publisher.execute(Publisher.java:608)
    at org.hl7.fhir.tools.publisher.Publisher.main(Publisher.java:473)
</code></pre></div>
<p>Anyone seen this/have any ideas where to check?</p>



<a name="233513910"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/NPE%20in%20Build/near/233513910" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/NPE.20in.20Build.html#233513910">(Apr 07 2021 at 15:46)</a>:</h4>
<p>Looks like you've got a binding with no ValueSet declared and it's not handling that gracefully.  No clue why it would be different locally vs. in the build...  If you can share the branch, <span class="user-mention" data-user-id="248736">@Mark Iantorno</span> might be able to dig and fix.</p>



<a name="233524463"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/NPE%20in%20Build/near/233524463" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/NPE.20in.20Build.html#233524463">(Apr 07 2021 at 16:52)</a>:</h4>
<p>Thank you for the hint, that helped track down that I missed committing the value set, I think that was it</p>



<a name="260407527"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/NPE%20in%20Build/near/260407527" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/NPE.20in.20Build.html#260407527">(Nov 05 2021 at 13:52)</a>:</h4>
<p>I'm also getting an NPE, but for a different reason:</p>
<div class="codehilite"><pre><span></span><code>Candidate for CodeableReference: [ClinicalImpression.prognosis]
This was a Full Build                                                      0.742  26sec 1536MB
FHIR build failure @ Fri, Nov 5, 2021 06:43-0700                           0.965  27sec 1536MB
Error: null
java.lang.NullPointerException
        at java.base/java.util.ResourceBundle.containsKey(ResourceBundle.java:2302)
        at org.hl7.fhir.utilities.i18n.I18nBase.messageExistsForLocale(I18nBase.java:50)
        at org.hl7.fhir.utilities.i18n.I18nBase.formatMessage(I18nBase.java:67)
        at org.hl7.fhir.validation.BaseValidator.ruleHtml(BaseValidator.java:425)
        at org.hl7.fhir.definitions.validation.ResourceValidator.rule(ResourceValidator.java:124)
        at org.hl7.fhir.definitions.validation.ResourceValidator.checkSearchParams(ResourceValidator.java:383)
        at org.hl7.fhir.definitions.validation.ResourceValidator.check(ResourceValidator.java:217)
        at org.hl7.fhir.definitions.validation.ResourceValidator.check(ResourceValidator.java:594)
        at org.hl7.fhir.tools.publisher.Publisher.validate(Publisher.java:1791)
        at org.hl7.fhir.tools.publisher.Publisher.execute(Publisher.java:613)
        at org.hl7.fhir.tools.publisher.Publisher.main(Publisher.java:478)
</code></pre></div>
<p>Can someone help me figure this out. It is demonstrated by this PR: <a href="https://github.com/HL7/fhir/pull/1478">https://github.com/HL7/fhir/pull/1478</a><br>
I made changes to Composition's StructureDefinition and examples. I didn't touch ClinicalImpression. I've also looked at ClinicalImpression and don't see <code>.prognosisCodeableReference</code>... There <em>is no</em> CodeableReference within the ClinicalImpression profile, so I'm not sure why it's talking about a "candidate for CodeableReference" in the error.</p>



<a name="260459540"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/NPE%20in%20Build/near/260459540" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/NPE.20in.20Build.html#260459540">(Nov 05 2021 at 20:21)</a>:</h4>
<p>the pattern of definitions suggests to the build that prognosis should be a CodeableReference. So it won't be - wouldn't say that if it was. But that's nothing to do with your build error</p>



<a name="261147162"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/NPE%20in%20Build/near/261147162" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/NPE.20in.20Build.html#261147162">(Nov 11 2021 at 15:26)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> so what do I do here? the main build doesn't seem to be failing... Only my branch. But, I haven't touched ClinicalImpression! I don't know how to get this dang PR to build!</p>



<a name="261147303"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/NPE%20in%20Build/near/261147303" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/NPE.20in.20Build.html#261147303">(Nov 11 2021 at 15:27)</a>:</h4>
<p>I was told , and it worked, to clone FHIR core fresh. make the changes you need to THAT clone.. and it will work fine. It seems old clones get somehow out-of-sync.</p>



<a name="261148195"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/NPE%20in%20Build/near/261148195" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/NPE.20in.20Build.html#261148195">(Nov 11 2021 at 15:34)</a>:</h4>
<p>ugh. that's a timely solution when I already don't have any time.</p>



<a name="261148202"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/NPE%20in%20Build/near/261148202" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/NPE.20in.20Build.html#261148202">(Nov 11 2021 at 15:34)</a>:</h4>
<p><em>sigh</em></p>



<a name="261158255"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/NPE%20in%20Build/near/261158255" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/NPE.20in.20Build.html#261158255">(Nov 11 2021 at 16:55)</a>:</h4>
<p>you already have your changes.. so just copy those files to the new clone. bingo, done</p>



<a name="261158341"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/NPE%20in%20Build/near/261158341" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/NPE.20in.20Build.html#261158341">(Nov 11 2021 at 16:56)</a>:</h4>
<p>the problem is not with what you edited.</p>



<a name="261159015"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/NPE%20in%20Build/near/261159015" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/NPE.20in.20Build.html#261159015">(Nov 11 2021 at 17:01)</a>:</h4>
<p>and the ClinicalImpression is <em>not</em> the error.  That was just an information message that was printed out before the build failed.  This error is in the publisher code and <span class="user-mention" data-user-id="248736">@Mark Iantorno</span> or <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> need to find it and squash it.  You can do what John suggests and copy your changes over, but I suspect that whatever you did has caused some error but when it goes to spit out the error, it can't find the appropriate message and that is failing.</p>



<a name="261160878"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/NPE%20in%20Build/near/261160878" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/NPE.20in.20Build.html#261160878">(Nov 11 2021 at 17:15)</a>:</h4>
<p>my experience was that I was getting dozens of errors in other resources. I cloned new, copied my edited changes to that clone, and built. zero errors.</p>



<a name="261160929"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/NPE%20in%20Build/near/261160929" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/NPE.20in.20Build.html#261160929">(Nov 11 2021 at 17:15)</a>:</h4>
<p>I thank <span class="user-mention" data-user-id="192587">@David Pyke</span> for that recommendation.</p>



<a name="261824590"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/NPE%20in%20Build/near/261824590" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/NPE.20in.20Build.html#261824590">(Nov 17 2021 at 18:10)</a>:</h4>
<p>Trying your suggesting now <span class="user-mention" data-user-id="191404">@John Moehrke</span>...<br>
Re-cloned the repository, doing a fresh (no changes) publish, and getting errors:</p>
<div class="codehilite"><pre><span></span><code>FHIR build failure @ Wed, Nov 17, 2021 09:16-0800                           0.96 2258sec 1740MB
Error: Resource Examples failed instance validation
org.hl7.fhir.tools.publisher.ExampleInspector$EValidationFailed: Resource Examples failed instance validation
        at org.hl7.fhir.tools.publisher.ExampleInspector.summarise(ExampleInspector.java:421)
        at org.hl7.fhir.tools.publisher.Publisher.validationProcess(Publisher.java:5821)
        at org.hl7.fhir.tools.publisher.Publisher.execute(Publisher.java:703)
        at org.hl7.fhir.tools.publisher.Publisher.main(Publisher.java:487)
</code></pre></div>



<a name="261825015"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/NPE%20in%20Build/near/261825015" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/NPE.20in.20Build.html#261825015">(Nov 17 2021 at 18:13)</a>:</h4>
<p>well, last updates by Grahame are failing. so, yes <a class="stream" data-stream-id="179297" href="/#narrow/stream/179297-committers.2Fnotification">#committers/notification</a> is important to follow</p>



<a name="261828426"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/NPE%20in%20Build/near/261828426" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/NPE.20in.20Build.html#261828426">(Nov 17 2021 at 18:37)</a>:</h4>
<p>yah, glanced. missed it</p>



<a name="261856071"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/NPE%20in%20Build/near/261856071" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/NPE.20in.20Build.html#261856071">(Nov 17 2021 at 21:58)</a>:</h4>
<p>should be building OK for me by the end of the day</p>



<a name="261943911"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/NPE%20in%20Build/near/261943911" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/NPE.20in.20Build.html#261943911">(Nov 18 2021 at 15:39)</a>:</h4>
<p>Looking through <a class="stream" data-stream-id="179297" href="/#narrow/stream/179297-committers.2Fnotification">#committers/notification</a> can't see anything about the build being fixed... <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> did you ever get it working again? I just tried cleaning and re-publishing the core fhir spec, and it failed with the same issue as above. Something more I need to do? Or it just isn't fixed yet?</p>



<a name="261968640"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/NPE%20in%20Build/near/261968640" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/NPE.20in.20Build.html#261968640">(Nov 18 2021 at 18:24)</a>:</h4>
<p>I spent all day wrangling with the build pipeline</p>



<a name="261988885"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/NPE%20in%20Build/near/261988885" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/NPE.20in.20Build.html#261988885">(Nov 18 2021 at 20:52)</a>:</h4>
<p>ok, in , and updated</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
