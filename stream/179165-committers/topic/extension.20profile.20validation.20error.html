---
layout: page
title: "FHIR Chat  · extension profile validation error · committers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179165-committers/index.html">committers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/extension.20profile.20validation.20error.html">extension profile validation error</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="206740588"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/extension%20profile%20validation%20error/near/206740588" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rik Smithies <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/extension.20profile.20validation.20error.html#206740588">(Aug 12 2020 at 19:38)</a>:</h4>
<p>I am getting an error profile validation error, on a profile that works with an old version of the validator (4.1.44) but not the latest (5.0.7-SNAPSHOT, but still with the -version 4.0 setting).</p>
<p>It now complains that the extension is not allowed at this point. I have no context element on the extension, so it should be allowed anywhere I thought.</p>
<p>If I add a context element it then says this, but the incorrect location it states seems to be correct (other than the "x:"):</p>
<div class="codehilite"><pre><span></span><code>*FAILURE* validating examples\MATest-create-r401(forR5validator).xml:  error:1 warn:3 info:0
  Error @ MedicinalProductAuthorization (line 3, col60) : The extension http://ema.europa.eu/fhir/extension/targetSpecies
is not allowed to be used at this point (allowed = x:MedicinalProductAuthorization;
this element is [[MedicinalProductAuthorization])
</code></pre></div>



<a name="206775512"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/extension%20profile%20validation%20error/near/206775512" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/extension.20profile.20validation.20error.html#206775512">(Aug 13 2020 at 02:38)</a>:</h4>
<p>how to reproduce this?</p>



<a name="206833197"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/extension%20profile%20validation%20error/near/206833197" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vassil Peytchev <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/extension.20profile.20validation.20error.html#206833197">(Aug 13 2020 at 15:52)</a>:</h4>
<blockquote>
<p>I am getting an error profile validation error, on a profile that works with an old version of the validator (4.1.44) but not the latest (5.0.7-SNAPSHOT, but still with the -version 4.0 setting).</p>
</blockquote>
<p>The <a href="#narrow/stream/217600-tooling.2Freleases/topic/Validator/near/206828798">latest validator is 5.1.1</a>, isn't it?</p>



<a name="206849196"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/extension%20profile%20validation%20error/near/206849196" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rik Smithies <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/extension.20profile.20validation.20error.html#206849196">(Aug 13 2020 at 18:06)</a>:</h4>
<p>profile is:</p>
<div class="codehilite"><pre><span></span><code>&lt;StructureDefinition xmlns=&quot;http://hl7.org/fhir&quot;&gt;
   &lt;url value=&quot;http://hl7.org/fhir/StructureDefinition/MAProfileTest-Create&quot;/&gt;
   &lt;fhirVersion value=&quot;4.0.1&quot;/&gt;
   &lt;kind value=&quot;resource&quot;/&gt;
   &lt;abstract value=&quot;false&quot;/&gt;
   &lt;type value=&quot;MedicinalProductAuthorization&quot;/&gt;
   &lt;baseDefinition value=&quot;http://hl7.org/fhir/StructureDefinition/MedicinalProductAuthorization&quot;/&gt;
   &lt;derivation value=&quot;constraint&quot;/&gt;
   &lt;differential&gt;
      &lt;element id=&quot;MedicinalProductAuthorization.extension:targetSpecies&quot;&gt;
         &lt;path value=&quot;MedicinalProductAuthorization.extension&quot;/&gt;
         &lt;sliceName value=&quot;targetSpecies&quot;/&gt;
         &lt;min value=&quot;1&quot;/&gt;
         &lt;max value=&quot;*&quot;/&gt;
         &lt;type&gt;
            &lt;code value=&quot;Extension&quot;/&gt;
            &lt;profile value=&quot;http://ema.europa.eu/fhir/extension/targetSpecies&quot;/&gt;
         &lt;/type&gt;
      &lt;/element&gt;
   &lt;/differential&gt;
&lt;/StructureDefinition&gt;
</code></pre></div>


<p>extension is:</p>
<div class="codehilite"><pre><span></span><code>&lt;StructureDefinition xmlns=&quot;http://hl7.org/fhir&quot;&gt;
   &lt;id value=&quot;EMATargetSpecies&quot;/&gt;
   &lt;url value=&quot;http://ema.europa.eu/fhir/extension/targetSpecies&quot;/&gt;
   &lt;name value=&quot;EMATargetSpecies&quot;/&gt;
   &lt;status value=&quot;draft&quot;/&gt;
   &lt;kind value=&quot;complex-type&quot;/&gt;
   &lt;abstract value=&quot;false&quot;/&gt;
   &lt;!-- originally this context was not present. but the profile doesnt work with new validator (extention context is not recognised),
        so I have added this to try to force it. It didnt help but the error message is now a little clearer --&gt;
   &lt;context&gt;
      &lt;type value=&quot;extension&quot;/&gt;
      &lt;expression value=&quot;MarketingAuthorization&quot;/&gt;
   &lt;/context&gt;
   &lt;type value=&quot;Extension&quot;/&gt;
   &lt;baseDefinition value=&quot;http://hl7.org/fhir/StructureDefinition/Extension&quot;/&gt;
   &lt;derivation value=&quot;constraint&quot;/&gt;
   &lt;differential&gt;
      &lt;element id=&quot;Extension.url&quot;&gt;
         &lt;path value=&quot;Extension.url&quot;/&gt;
         &lt;fixedUri value=&quot;http://ema.europa.eu/fhir/extension/targetSpecies&quot;/&gt;
      &lt;/element&gt;
   &lt;/differential&gt;
&lt;/StructureDefinition&gt;
</code></pre></div>


<p>example that fails is:</p>
<div class="codehilite"><pre><span></span><code>&lt;MedicinalProductAuthorization xmlns=&quot;http://hl7.org/fhir&quot;&gt;
    &lt;extension url=&quot;http://ema.europa.eu/fhir/extension/targetSpecies&quot;&gt;
        &lt;valueString value=&quot;dog&quot;/&gt;
    &lt;/extension&gt;
&lt;/MedicinalProductAuthorization&gt;
</code></pre></div>



<a name="206849707"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/extension%20profile%20validation%20error/near/206849707" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rik Smithies <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/extension.20profile.20validation.20error.html#206849707">(Aug 13 2020 at 18:10)</a>:</h4>
<p><span class="user-mention" data-user-id="192685">@Vassil Peytchev</span> maybe but this is the one at <a href="http://build.fhir.org">build.fhir.org</a> today and in both the R5 preview 1 and preview 2 releases, so I went for stability. I didn't get if direct from github.</p>



<a name="206855840"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/extension%20profile%20validation%20error/near/206855840" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vassil Peytchev <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/extension.20profile.20validation.20error.html#206855840">(Aug 13 2020 at 19:01)</a>:</h4>
<p><span class="user-mention" data-user-id="191315">@Josh Mandel</span> - I am not sure if this is an issue or not, but the CI build seems to not be tracking the updates to the validator</p>



<a name="206862966"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/extension%20profile%20validation%20error/near/206862966" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/extension.20profile.20validation.20error.html#206862966">(Aug 13 2020 at 20:00)</a>:</h4>
<p>That sounds like an issue!</p>



<a name="206863045"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/extension%20profile%20validation%20error/near/206863045" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/extension.20profile.20validation.20error.html#206863045">(Aug 13 2020 at 20:00)</a>:</h4>
<p>Which validator? Can you point me to a built IG with this issue so we can look at the build log and see where/how it (wrongly) fetched the validator?</p>



<a name="206863765"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/extension%20profile%20validation%20error/near/206863765" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/extension.20profile.20validation.20error.html#206863765">(Aug 13 2020 at 20:06)</a>:</h4>
<p>It's on my todo list today to update the build to the latest validator / core</p>



<a name="206863836"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/extension%20profile%20validation%20error/near/206863836" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/extension.20profile.20validation.20error.html#206863836">(Aug 13 2020 at 20:07)</a>:</h4>
<p><span class="user-mention" data-user-id="191315">@Josh Mandel</span> it's the ivy.xml, but updating it has many consequences I have to work through, and I finally have a clean build based on the current release</p>



<a name="206864689"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/extension%20profile%20validation%20error/near/206864689" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/extension.20profile.20validation.20error.html#206864689">(Aug 13 2020 at 20:13)</a>:</h4>
<p>OK, thanks for the clarification!</p>



<a name="209576203"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/extension%20profile%20validation%20error/near/209576203" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rik Smithies <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/extension.20profile.20validation.20error.html#209576203">(Sep 09 2020 at 22:26)</a>:</h4>
<p>the new validator still shows the same issue I was getting. A profile that works in older validator no longer does. Don't know it is a validator or structure definition issue.</p>



<a name="209967263"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/extension%20profile%20validation%20error/near/209967263" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/extension.20profile.20validation.20error.html#209967263">(Sep 14 2020 at 05:51)</a>:</h4>
<p>how do I reproduce this?</p>



<a name="209988346"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/extension%20profile%20validation%20error/near/209988346" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rik Smithies <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/extension.20profile.20validation.20error.html#209988346">(Sep 14 2020 at 10:47)</a>:</h4>
<p>I gave the XML that reproduces it earlier in this thread</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
