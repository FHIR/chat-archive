---
layout: page
title: "FHIR Chat  · ci-build length limit · committers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179165-committers/index.html">committers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/ci-build.20length.20limit.html">ci-build length limit</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="175022156"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/ci-build%20length%20limit/near/175022156" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/ci-build.20length.20limit.html#175022156">(Sep 05 2019 at 22:54)</a>:</h4>
<p>hey <span class="user-mention" data-user-id="191315">@Josh Mandel</span> - check <a href="http://build.fhir.org/ig/HL7/UTG/branches/master/build.log" target="_blank" title="http://build.fhir.org/ig/HL7/UTG/branches/master/build.log">http://build.fhir.org/ig/HL7/UTG/branches/master/build.log</a> - what is the timeout limit for a IG build on the ci-build?</p>



<a name="175023686"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/ci-build%20length%20limit/near/175023686" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/ci-build.20length.20limit.html#175023686">(Sep 05 2019 at 23:27)</a>:</h4>
<p><a href="https://github.com/FHIR/auto-ig-builder/blob/master/triggers/ig-commit-trigger/job.json#L11" target="_blank" title="https://github.com/FHIR/auto-ig-builder/blob/master/triggers/ig-commit-trigger/job.json#L11">https://github.com/FHIR/auto-ig-builder/blob/master/triggers/ig-commit-trigger/job.json#L11</a></p>



<a name="175023691"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/ci-build%20length%20limit/near/175023691" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/ci-build.20length.20limit.html#175023691">(Sep 05 2019 at 23:27)</a>:</h4>
<p>Looks like 30min</p>



<a name="175024478"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/ci-build%20length%20limit/near/175024478" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/ci-build.20length.20limit.html#175024478">(Sep 05 2019 at 23:43)</a>:</h4>
<p>hmmm but the log seems to be about 11 min... I'm investigating</p>



<a name="175027914"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/ci-build%20length%20limit/near/175027914" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/ci-build.20length.20limit.html#175027914">(Sep 06 2019 at 01:04)</a>:</h4>
<p><span class="user-mention" data-user-id="191315">@Josh Mandel</span> so I fixed something up, and committed it back to the repo, which should have kicked off another build.. but it did not. is there any way I can investigate why nothing happened?</p>



<a name="175029300"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/ci-build%20length%20limit/near/175029300" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/ci-build.20length.20limit.html#175029300">(Sep 06 2019 at 01:45)</a>:</h4>
<p>well, it didn't appear in the notification stream here, but it did try ,and the log is here: <a href="https://build.fhir.org/ig/HL7/UTG/branches/master/build.log" target="_blank" title="https://build.fhir.org/ig/HL7/UTG/branches/master/build.log">https://build.fhir.org/ig/HL7/UTG/branches/master/build.log</a></p>



<a name="175029351"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/ci-build%20length%20limit/near/175029351" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/ci-build.20length.20limit.html#175029351">(Sep 06 2019 at 01:46)</a>:</h4>
<p>there's something off about it - I cut the build time in half, but it still timed out....</p>



<a name="175079597"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/ci-build%20length%20limit/near/175079597" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/ci-build.20length.20limit.html#175079597">(Sep 06 2019 at 16:16)</a>:</h4>
<p>It seems to have actually taken &gt;30min and been killed, per the time limit. Is there a reason to think something else happened?</p>



<a name="175083757"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/ci-build%20length%20limit/near/175083757" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/ci-build.20length.20limit.html#175083757">(Sep 06 2019 at 17:08)</a>:</h4>
<p>That's what I saw, too.  Do we just extend the time limit?  Currently the UTG CI build is still failed.</p>



<a name="175098122"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/ci-build%20length%20limit/near/175098122" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/ci-build.20length.20limit.html#175098122">(Sep 06 2019 at 19:55)</a>:</h4>
<p>well, we didn't get notification in the committers channel. that's the first issue. The second is what's going on, I'll investigate. but can we get notification?</p>



<a name="175107240"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/ci-build%20length%20limit/near/175107240" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/ci-build.20length.20limit.html#175107240">(Sep 06 2019 at 21:58)</a>:</h4>
<p>Notifications: yes, this is doable but requires a bit of a re-write. I won't get to it this weekend unless someone thinks it's urgent.</p>



<a name="175107254"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/ci-build%20length%20limit/near/175107254" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/ci-build.20length.20limit.html#175107254">(Sep 06 2019 at 21:59)</a>:</h4>
<p>Re: time limit, sure I'll update to 1h now.</p>



<a name="175107426"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/ci-build%20length%20limit/near/175107426" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/ci-build.20length.20limit.html#175107426">(Sep 06 2019 at 22:02)</a>:</h4>
<p>Just updated at <a href="https://github.com/FHIR/auto-ig-builder/commit/1c341475da149452395eba71718b7d9f9248af92" target="_blank" title="https://github.com/FHIR/auto-ig-builder/commit/1c341475da149452395eba71718b7d9f9248af92">https://github.com/FHIR/auto-ig-builder/commit/1c341475da149452395eba71718b7d9f9248af92</a></p>



<a name="175107434"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/ci-build%20length%20limit/near/175107434" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/ci-build.20length.20limit.html#175107434">(Sep 06 2019 at 22:02)</a>:</h4>
<p>ok thanks</p>



<a name="175107447"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/ci-build%20length%20limit/near/175107447" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/ci-build.20length.20limit.html#175107447">(Sep 06 2019 at 22:03)</a>:</h4>
<p>... and kicked off a build job for  UTG.</p>



<a name="175107930"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/ci-build%20length%20limit/near/175107930" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/ci-build.20length.20limit.html#175107930">(Sep 06 2019 at 22:11)</a>:</h4>
<p>thx. 12 min for me. I just added late logging so I can see where it's going wrong</p>



<a name="175108117"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/ci-build%20length%20limit/near/175108117" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/ci-build.20length.20limit.html#175108117">(Sep 06 2019 at 22:14)</a>:</h4>
<p>Hmm, that's a big difference in build times.</p>



<a name="175108123"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/ci-build%20length%20limit/near/175108123" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/ci-build.20length.20limit.html#175108123">(Sep 06 2019 at 22:14)</a>:</h4>
<p>12 vs &gt;30.</p>



<a name="175108143"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/ci-build%20length%20limit/near/175108143" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/ci-build.20length.20limit.html#175108143">(Sep 06 2019 at 22:15)</a>:</h4>
<p>y</p>



<a name="175108481"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/ci-build%20length%20limit/near/175108481" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/ci-build.20length.20limit.html#175108481">(Sep 06 2019 at 22:21)</a>:</h4>
<p>Let's see about throwing some faster CPUs at it.</p>



<a name="175108502"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/ci-build%20length%20limit/near/175108502" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/ci-build.20length.20limit.html#175108502">(Sep 06 2019 at 22:21)</a>:</h4>
<p>Just added a new node pool and over the weekend will switch over to it.</p>



<a name="175108575"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/ci-build%20length%20limit/near/175108575" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/ci-build.20length.20limit.html#175108575">(Sep 06 2019 at 22:22)</a>:</h4>
<p>ok thanks. btw, I just learnt something.... maven will happily release a snapshot when it doesn't compile...</p>



<a name="175108581"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/ci-build%20length%20limit/near/175108581" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/ci-build.20length.20limit.html#175108581">(Sep 06 2019 at 22:22)</a>:</h4>
<p>Oh, that's delightful.</p>



<a name="175108597"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/ci-build%20length%20limit/near/175108597" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/ci-build.20length.20limit.html#175108597">(Sep 06 2019 at 22:23)</a>:</h4>
<p>this log from running UTG: </p>
<div class="codehilite"><pre><span></span>Connect to Terminology Server at http://tx.fhir.org                              (00:30.0066)
Load Content                                                                     (00:30.0577)
Exception in thread &quot;main&quot; java.lang.Error: Unresolved compilation problems:
    The method Log(String) is undefined for the type Publisher
    The method Log(String) is undefined for the type Publisher

    at org.hl7.fhir.igtools.publisher.Publisher.load(Publisher.java:2541)
    at org.hl7.fhir.igtools.publisher.Publisher.createIg(Publisher.java:716)
    at org.hl7.fhir.igtools.publisher.Publisher.execute(Publisher.java:609)
    at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:6398)
</pre></div>



<a name="175112442"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/ci-build%20length%20limit/near/175112442" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/ci-build.20length.20limit.html#175112442">(Sep 06 2019 at 23:23)</a>:</h4>
<p>can we make more memory available?</p>



<a name="175113093"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/ci-build%20length%20limit/near/175113093" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/ci-build.20length.20limit.html#175113093">(Sep 06 2019 at 23:32)</a>:</h4>
<p>ok I have a log now. It runs ok for 15 min or so, and then it runs out of RAM and slows down to a crawl (managing memory). Now that you've extended the time out to 60 minutes, it finally runs out of heap space at 45 minutes. On the ci-build it has 4GB, but I'm running it locally with 7GB</p>



<a name="175113105"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/ci-build%20length%20limit/near/175113105" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/ci-build.20length.20limit.html#175113105">(Sep 06 2019 at 23:32)</a>:</h4>
<p>you might ask whether we need all of that RAM... I'll consider that, but it would be a major rework to change that</p>



<a name="175113290"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/ci-build%20length%20limit/near/175113290" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/ci-build.20length.20limit.html#175113290">(Sep 06 2019 at 23:35)</a>:</h4>
<p>I've been running UTG locally with 8GB (6GB seemed not quite enough) - and that was before Ted made his latest updates</p>



<a name="175113779"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/ci-build%20length%20limit/near/175113779" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ted Klein <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/ci-build.20length.20limit.html#175113779">(Sep 06 2019 at 23:45)</a>:</h4>
<p>When I added the value sets for CDA (&gt;325 of them) it slowed down on my local build very considerably.  My laptop howls and can do little else for about 25 minutes until finished.  I have a 4 core i9 with 32Gb of RAM.   If we cannot get this working over the weekend, I will update the CDA content manifest to only include a few dozen value sets and see if that will run to completion.  Or if it will help to debug, I can do that tonight.</p>



<a name="175116163"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/ci-build%20length%20limit/near/175116163" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/ci-build.20length.20limit.html#175116163">(Sep 07 2019 at 00:28)</a>:</h4>
<p>I'm still running in 12 min with all the CDA value sets. And the build is about 1/2 that speed until it his the RAM wall</p>



<a name="175118006"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/ci-build%20length%20limit/near/175118006" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/ci-build.20length.20limit.html#175118006">(Sep 07 2019 at 01:09)</a>:</h4>
<p>I can give it as much RAM as we want.. will have a go at quadrupling RAM tomorrow.</p>



<a name="175121084"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/ci-build%20length%20limit/near/175121084" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/ci-build.20length.20limit.html#175121084">(Sep 07 2019 at 02:45)</a>:</h4>
<p>wooah thanks</p>



<a name="175121451"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/ci-build%20length%20limit/near/175121451" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/ci-build.20length.20limit.html#175121451">(Sep 07 2019 at 02:59)</a>:</h4>
<p>built successfully in 19 min with 8GB RAM</p>



<a name="175146995"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/ci-build%20length%20limit/near/175146995" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/ci-build.20length.20limit.html#175146995">(Sep 07 2019 at 16:36)</a>:</h4>
<p>Okay, with 20GB RAM on the latest cascade lake CPU, builds in 13min (that includes the time for the cluster manager to notice that it needed to boot a new VM, and boot it).</p>
<p><a href="#narrow/stream/179297-committers.2Fnotification/topic/ig-build/near/175146721" title="#narrow/stream/179297-committers.2Fnotification/topic/ig-build/near/175146721">success notice</a></p>



<a name="175147589"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/ci-build%20length%20limit/near/175147589" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/ci-build.20length.20limit.html#175147589">(Sep 07 2019 at 16:54)</a>:</h4>
<p>(Er, 11 min when I actually set the right machine type, of which 9 are actual container running time.)</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
