---
layout: page
title: "FHIR Chat  · NPE Error running FHIR build · committers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179165-committers/index.html">committers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/NPE.20Error.20running.20FHIR.20build.html">NPE Error running FHIR build</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="216921627"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/NPE%20Error%20running%20FHIR%20build/near/216921627" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/NPE.20Error.20running.20FHIR.20build.html#216921627">(Nov 16 2020 at 19:47)</a>:</h4>
<p>I'm trying to do a FHIR core build after being away for awhile.  I keep getting a NullPointer when it is trying to produce schemas.  To make sure it wasn't something I did, I just cloned a fresh repository and ran it and am getting the same error.  I had Melva do a build on her machine and it got past this point:</p>
<div class="codehilite"><pre><span></span><code>     [java] Generate RDF                                                               0.458  50sec 1121MB
     [java] Produce Schemas                                                            2.605  53sec  592MB
     [java] This was a Full Build                                                      0.015  53sec  596MB
     [java] java.lang.NullPointerException
     [java]     at org.hl7.fhir.definitions.generators.xsd.XSDBaseGenerator.genIncludedCode(XSDBaseGenerator.java:560)
     [java]     at org.hl7.fhir.definitions.generators.xsd.XSDBaseGenerator.generateEnum(XSDBaseGenerator.java:533)
     [java]     at org.hl7.fhir.definitions.generators.xsd.XSDBaseGenerator.genType(XSDBaseGenerator.java:451)
     [java]     at org.hl7.fhir.definitions.generators.xsd.XSDBaseGenerator.generate(XSDBaseGenerator.java:128)
     [java]     at org.hl7.fhir.definitions.generators.xsd.SchemaGenerator.generate(SchemaGenerator.java:74)
     [java]     at org.hl7.fhir.tools.publisher.Publisher.produceSpecification(Publisher.java:2125)
     [java]     at org.hl7.fhir.tools.publisher.Publisher.execute(Publisher.java:628)
     [java]     at org.hl7.fhir.tools.publisher.Publisher.main(Publisher.java:488)
     [java] FHIR build failure @ Mon, Nov 16, 2020 12:46-0700                          1.328  54sec  596MB
     [java] Error: null
</code></pre></div>



<a name="216921896"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/NPE%20Error%20running%20FHIR%20build/near/216921896" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/NPE.20Error.20running.20FHIR.20build.html#216921896">(Nov 16 2020 at 19:50)</a>:</h4>
<p>In the code at that spot, it's trying to output some code system:</p>
<div class="codehilite"><pre><span></span><code>    write(&quot;      &lt;xs:enumeration value=\&quot;&quot; + Utilities.escapeXml(cc.getCode()) + &quot;\&quot;&gt;\r\n&quot;);
    write(&quot;        &lt;xs:annotation&gt;\r\n&quot;);
    write(&quot;          &lt;xs:documentation xml:lang=\&quot;en\&quot;&gt;&quot; + Utilities.escapeXml(cc.getDisplay()) + &quot;&lt;/xs:documentation&gt;\r\n&quot;); // todo: do we need to look the definition up?
    CodeSystem cs = workerContext.fetchCodeSystem(cc.getSystem());
    if (cs != null &amp;&amp; cc.hasCode()) {
      ConceptDefinitionComponent c = getCodeDefinition(cc.getCode(), cs.getConcept());
      for (ConceptDefinitionDesignationComponent l : c.getDesignation())
        if (l.hasLanguage())
          write(&quot;          &lt;xs:documentation xml:lang=\&quot;&quot;+l.getLanguage()+&quot;\&quot;&gt;&quot;+Utilities.escapeXml(l.getValue())+&quot;&lt;/xs:documentation&gt;\r\n&quot;);
    }
</code></pre></div>



<a name="216922585"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/NPE%20Error%20running%20FHIR%20build/near/216922585" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/NPE.20Error.20running.20FHIR.20build.html#216922585">(Nov 16 2020 at 19:55)</a>:</h4>
<p>adding some debug code and the error occurs when it's trying to write out http://unitsofmeasure.org#s</p>



<a name="216923825"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/NPE%20Error%20running%20FHIR%20build/near/216923825" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/NPE.20Error.20running.20FHIR.20build.html#216923825">(Nov 16 2020 at 20:04)</a>:</h4>
<p>I added a null check around the for statement above as a workaround</p>



<a name="216926370"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/NPE%20Error%20running%20FHIR%20build/near/216926370" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vassil Peytchev <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/NPE.20Error.20running.20FHIR.20build.html#216926370">(Nov 16 2020 at 20:20)</a>:</h4>
<p>Did you run clean before trying to build?</p>



<a name="216926684"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/NPE%20Error%20running%20FHIR%20build/near/216926684" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/NPE.20Error.20running.20FHIR.20build.html#216926684">(Nov 16 2020 at 20:23)</a>:</h4>
<p>yep.  and as I said, I also created a clean new repository clone</p>



<a name="216932110"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/NPE%20Error%20running%20FHIR%20build/near/216932110" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/NPE.20Error.20running.20FHIR.20build.html#216932110">(Nov 16 2020 at 21:06)</a>:</h4>
<p>http://unitsofmeasure.org#s ? or http://unitsofmeasure.org#vs</p>



<a name="216932236"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/NPE%20Error%20running%20FHIR%20build/near/216932236" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/NPE.20Error.20running.20FHIR.20build.html#216932236">(Nov 16 2020 at 21:07)</a>:</h4>
<p>i spit out code system and code and that was spit out just before the NPE</p>



<a name="216934221"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/NPE%20Error%20running%20FHIR%20build/near/216934221" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/NPE.20Error.20running.20FHIR.20build.html#216934221">(Nov 16 2020 at 21:23)</a>:</h4>
<p>ah</p>



<a name="216941426"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/NPE%20Error%20running%20FHIR%20build/near/216941426" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/NPE.20Error.20running.20FHIR.20build.html#216941426">(Nov 16 2020 at 22:25)</a>:</h4>
<p>oh, this is a downstream consequence of UTG fake declarations...</p>



<a name="220631724"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/NPE%20Error%20running%20FHIR%20build/near/220631724" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/NPE.20Error.20running.20FHIR.20build.html#220631724">(Dec 21 2020 at 21:19)</a>:</h4>
<p>I'm still getting this NPE when I try to build FHIR locally.  I'm not sure why others aren't seeing this.</p>



<a name="220632463"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/NPE%20Error%20running%20FHIR%20build/near/220632463" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/NPE.20Error.20running.20FHIR.20build.html#220632463">(Dec 21 2020 at 21:26)</a>:</h4>
<p>I had to add this line in XSDBaseGenerator to get around the NPE:</p>
<div class="codehilite"><pre><span></span><code>      ConceptDefinitionComponent c = getCodeDefinition(cc.getCode(), cs.getConcept());
      if (c != null)
      for (ConceptDefinitionDesignationComponent l : c.getDesignation())
</code></pre></div>
<p>(line 559-560)</p>



<a name="220752909"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/NPE%20Error%20running%20FHIR%20build/near/220752909" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/NPE.20Error.20running.20FHIR.20build.html#220752909">(Dec 23 2020 at 01:13)</a>:</h4>
<p>what code does this trigger for&gt;?</p>



<a name="220752916"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/NPE%20Error%20running%20FHIR%20build/near/220752916" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/NPE.20Error.20running.20FHIR.20build.html#220752916">(Dec 23 2020 at 01:13)</a>:</h4>
<p>because there's an underlying problem if this happens</p>



<a name="220812596"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/NPE%20Error%20running%20FHIR%20build/near/220812596" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/NPE.20Error.20running.20FHIR.20build.html#220812596">(Dec 23 2020 at 18:06)</a>:</h4>
<p>I'm assuming the same one as before (http://unitsofmeasure.org#s)  but I'll put my debugging code back in to double-check</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
