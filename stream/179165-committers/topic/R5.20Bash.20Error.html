---
layout: page
title: "FHIR Chat  · R5 Bash Error · committers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179165-committers/index.html">committers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/R5.20Bash.20Error.html">R5 Bash Error</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="230597020"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/R5%20Bash%20Error/near/230597020" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marc Duteau <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/R5.20Bash.20Error.html#230597020">(Mar 16 2021 at 21:51)</a>:</h4>
<p>Ran into the following error while making a pull request to the master branch:</p>
<div class="codehilite"><pre><span></span><code>mv: cannot stat &#39;/home/***/uploading/www/branches/r5-mnm-changes-1&#39;: No such file or directory
find: &#39;./Pharmacy20210218&#39;: No such file or directory
##[error]Bash exited with code &#39;1&#39;.
</code></pre></div>
<p>It looks similar to the issue that <span class="user-mention" data-user-id="248736">@Mark Iantorno</span> ran into with the R4B branch if that helps, though I'm not sure if that issue got resolved.</p>



<a name="230697444"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/R5%20Bash%20Error/near/230697444" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/R5.20Bash.20Error.html#230697444">(Mar 17 2021 at 14:18)</a>:</h4>
<p>You might ask here: <a href="#narrow/stream/179293-committers.2Fgit-help">https://chat.fhir.org/#narrow/stream/179293-committers.2Fgit-help</a>.  That's where the experts who promised to help with Git issues hang out.  (Unfortunately, I'm not one of them...)</p>



<a name="230709769"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/R5%20Bash%20Error/near/230709769" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/R5.20Bash.20Error.html#230709769">(Mar 17 2021 at 15:31)</a>:</h4>
<p>This isn't a git error, it's an error in the build process.  It's basically the same error that some of us saw on the R4B branch and it's affecting this pull request on R5.</p>



<a name="230738468"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/R5%20Bash%20Error/near/230738468" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/R5.20Bash.20Error.html#230738468">(Mar 17 2021 at 18:00)</a>:</h4>
<p>Yeah, this is an error that is occurring server side when it tries to upload the built branch to the server. What I don't understand is why it only happens to some people and not others... It's trying to look for a branch name that doesn't exist</p>



<a name="230919875"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/R5%20Bash%20Error/near/230919875" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/R5.20Bash.20Error.html#230919875">(Mar 18 2021 at 18:58)</a>:</h4>
<p><span class="user-mention" data-user-id="248736">@Mark Iantorno</span>  now I have the same error on a different branch/pull request:</p>
<div class="codehilite"><pre><span></span><code>Publishing to target jd-pharmacy
501M    .
962M    .
1.5G    .
mv: cannot stat &#39;/home/***/uploading/www/branches/jd-pharmacy&#39;: No such file or directory
find: &#39;./Consent-for-R4B&#39;: No such file or directory
##[error]Bash exited with code &#39;1&#39;.
</code></pre></div>



<a name="230920040"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/R5%20Bash%20Error/near/230920040" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Pyke <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/R5.20Bash.20Error.html#230920040">(Mar 18 2021 at 18:59)</a>:</h4>
<p>Consent-for-R4B was merged and deleted.  You need to update your branch list</p>



<a name="230920188"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/R5%20Bash%20Error/near/230920188" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Pyke <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/R5.20Bash.20Error.html#230920188">(Mar 18 2021 at 19:00)</a>:</h4>
<p>git fetch -p</p>



<a name="230920604"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/R5%20Bash%20Error/near/230920604" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/R5.20Bash.20Error.html#230920604">(Mar 18 2021 at 19:02)</a>:</h4>
<p>Thanks David, I had not had the chance to look into a solution for this</p>



<a name="230931077"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/R5%20Bash%20Error/near/230931077" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/R5.20Bash.20Error.html#230931077">(Mar 18 2021 at 20:20)</a>:</h4>
<p><span class="user-mention" data-user-id="192587">@David Pyke</span> Are you saying I need to do that?  Or does Mark need to do that?</p>



<a name="230931137"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/R5%20Bash%20Error/near/230931137" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Pyke <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/R5.20Bash.20Error.html#230931137">(Mar 18 2021 at 20:20)</a>:</h4>
<p>you need to do that</p>



<a name="230931323"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/R5%20Bash%20Error/near/230931323" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/R5.20Bash.20Error.html#230931323">(Mar 18 2021 at 20:21)</a>:</h4>
<p>okay, except that I started with a brand new clone of the repository this morning, made a branch, made changes, pushed the changes, and made a pull request.  Why would my branch list be out-of-date?</p>



<a name="230931494"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/R5%20Bash%20Error/near/230931494" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Pyke <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/R5.20Bash.20Error.html#230931494">(Mar 18 2021 at 20:22)</a>:</h4>
<p>It does.  I get that all the time.  I even have a script to run to clean it up after a pull request</p>



<a name="230931558"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/R5%20Bash%20Error/near/230931558" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Pyke <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/R5.20Bash.20Error.html#230931558">(Mar 18 2021 at 20:23)</a>:</h4>
<p>git fetch -p<br>
git branch --unset-upstream<br>
git checkout master<br>
git pull</p>



<a name="230931694"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/R5%20Bash%20Error/near/230931694" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Melva Peters <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/R5.20Bash.20Error.html#230931694">(Mar 18 2021 at 20:24)</a>:</h4>
<p>Is this something new?  I've never seen this and there are branches merged and deleted all of the time.</p>



<a name="230931811"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/R5%20Bash%20Error/near/230931811" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/R5.20Bash.20Error.html#230931811">(Mar 18 2021 at 20:25)</a>:</h4>
<p>i don't think that will solve anything.  your git commands don't do anything to my branch and certainly doesn't do anything to the build pipeline that is set up and is trying to copy a branch that a) may not exist and b) I don't even reference in my pull request.</p>



<a name="230932294"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/R5%20Bash%20Error/near/230932294" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/R5.20Bash.20Error.html#230932294">(Mar 18 2021 at 20:28)</a>:</h4>
<p>yeah, this isn't going to solve anything because it doesn't change anything on my branch.  the problem is still in Mark's build pipeline scripts.</p>



<a name="231024803"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/R5%20Bash%20Error/near/231024803" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michelle (Moseman) Miller <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/R5.20Bash.20Error.html#231024803">(Mar 19 2021 at 13:47)</a>:</h4>
<p>I'm now getting a similar error for the first time today (and did the exact same steps as earlier this week without issue).<br>
<a href="https://github.com/HL7/fhir/pull/1184/">https://github.com/HL7/fhir/pull/1184/</a></p>
<blockquote>
<p>mv: cannot stat '/home/***/uploading/www/branches/michelle-miller-30769-Procedure-method-extension-cardinality': No such file or directory</p>
</blockquote>
<p>What is the fix?</p>



<a name="231025002"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/R5%20Bash%20Error/near/231025002" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/R5.20Bash.20Error.html#231025002">(Mar 19 2021 at 13:49)</a>:</h4>
<p><span class="user-mention" data-user-id="248736">@Mark Iantorno</span> <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> Given that R5 changes for the upcoming ballot are due in 11 days, these issues are a definite problem.  Is one of you digging into them?</p>



<a name="231026878"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/R5%20Bash%20Error/near/231026878" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/R5.20Bash.20Error.html#231026878">(Mar 19 2021 at 14:01)</a>:</h4>
<p>I will dig into it now</p>



<a name="231037832"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/R5%20Bash%20Error/near/231037832" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/R5.20Bash.20Error.html#231037832">(Mar 19 2021 at 15:08)</a>:</h4>
<p>Alright, so here's where I'm at so far. I cannot replicated this locally...yet. I was able to run the same publish commands locally on my box with no issues...in fact, you can see Michelle's published branch here: <a href="https://build.fhir.org/branches/michelle-miller-30769-Procedure-method-extension-cardinality/">https://build.fhir.org/branches/michelle-miller-30769-Procedure-method-extension-cardinality/</a></p>
<p>I'm unsure why there are conflicts with branch names...that no longer exist. I'm trying once again with my own, new, local branch, but I suspect that will succeed as well. I think this has to do with the way that Azure pipelines is cloning the repo. I'm going to look into that, and attempt to replicate the exact steps azure uses to clone from git to see why this might be happening.</p>



<a name="231039564"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/R5%20Bash%20Error/near/231039564" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/R5.20Bash.20Error.html#231039564">(Mar 19 2021 at 15:16)</a>:</h4>
<p>So, I can replicate this now. The uploads _are_ actually working, it's just returning an error that the folder name doesn't exist? I will figure out why that is happening.</p>



<a name="231043277"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/R5%20Bash%20Error/near/231043277" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/R5.20Bash.20Error.html#231043277">(Mar 19 2021 at 15:41)</a>:</h4>
<p>It always works the second time, the issue is that the server tries to execute a move to a folder that doesn't exist yet</p>



<a name="231043355"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/R5%20Bash%20Error/near/231043355" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/R5.20Bash.20Error.html#231043355">(Mar 19 2021 at 15:42)</a>:</h4>
<p><span class="user-mention" data-user-id="191315">@Josh Mandel</span> you sent me this code snippet before, but in the code here: <a href="https://github.com/FHIR/auto-ig-builder/blob/master/images/ci-build/publish#L22-L25">https://github.com/FHIR/auto-ig-builder/blob/master/images/ci-build/publish#L22-L25</a></p>



<a name="231043426"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/R5%20Bash%20Error/near/231043426" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/R5.20Bash.20Error.html#231043426">(Mar 19 2021 at 15:42)</a>:</h4>
<p>specifically line 23</p>



<a name="231043530"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/R5%20Bash%20Error/near/231043530" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/R5.20Bash.20Error.html#231043530">(Mar 19 2021 at 15:43)</a>:</h4>
<p>shouldn't it be <code>mkdir -p ~/uploading/www/branches/$DEPLOY_TO_BRANCH</code></p>



<a name="231043578"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/R5%20Bash%20Error/near/231043578" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/R5.20Bash.20Error.html#231043578">(Mar 19 2021 at 15:43)</a>:</h4>
<p>I think line 24 is where the error is occurring</p>



<a name="231043722"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/R5%20Bash%20Error/near/231043722" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/R5.20Bash.20Error.html#231043722">(Mar 19 2021 at 15:44)</a>:</h4>
<p>if you don't mind me asking, why is it trying to move the folder?  Isn't the point of this pull request process just to see if the build passed without errors?  Why do we then need to move that branch anywhere when it is just trying to be merged and might be deleted shortly?</p>



<a name="231043840"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/R5%20Bash%20Error/near/231043840" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/R5.20Bash.20Error.html#231043840">(Mar 19 2021 at 15:45)</a>:</h4>
<p>This is occurring on the server, I didn't write this code, so I am unsure. If I had to guess, I would assume the uploaded tar is unzipped and then moved to the proper directory</p>



<a name="231044007"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/R5%20Bash%20Error/near/231044007" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/R5.20Bash.20Error.html#231044007">(Mar 19 2021 at 15:46)</a>:</h4>
<p>The issue is that the server is returning an error, which while not detrimental to the build process, is being caught by azure and it is flagging it as a fail</p>



<a name="231044040"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/R5%20Bash%20Error/near/231044040" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/R5.20Bash.20Error.html#231044040">(Mar 19 2021 at 15:46)</a>:</h4>
<p>which is the correct thing for azure to do</p>



<a name="231044157"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/R5%20Bash%20Error/near/231044157" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/R5.20Bash.20Error.html#231044157">(Mar 19 2021 at 15:47)</a>:</h4>
<p>understood, except I'm wondering why this step is occurring at all.  In the azure pipeline for FHIR core builds, it seems like it should just build the branch and if that passes without error, stop.</p>



<a name="231044163"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/R5%20Bash%20Error/near/231044163" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/R5.20Bash.20Error.html#231044163">(Mar 19 2021 at 15:47)</a>:</h4>
<p>I'm just doing a test right now, re-running this build here: <a href="https://dev.azure.com/fhir-pipelines/fhir-publisher/_build/results?buildId=2841&amp;view=logs&amp;j=ab68b630-6476-573a-954f-d89e4292687e">https://dev.azure.com/fhir-pipelines/fhir-publisher/_build/results?buildId=2841&amp;view=logs&amp;j=ab68b630-6476-573a-954f-d89e4292687e</a></p>



<a name="231044337"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/R5%20Bash%20Error/near/231044337" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/R5.20Bash.20Error.html#231044337">(Mar 19 2021 at 15:48)</a>:</h4>
<p>I'm curious if the behaviour I'm seeing locally on my machine (fail always the first time, succeeds afterwards) is going to be mirrored by the pipeline</p>



<a name="231044363"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/R5%20Bash%20Error/near/231044363" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/R5.20Bash.20Error.html#231044363">(Mar 19 2021 at 15:48)</a>:</h4>
<p>if it is, then I'm 99% sure this is the issue</p>



<a name="231044412"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/R5%20Bash%20Error/near/231044412" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/R5.20Bash.20Error.html#231044412">(Mar 19 2021 at 15:48)</a>:</h4>
<p>if it fails again, I will have to start digging again</p>



<a name="231046741"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/R5%20Bash%20Error/near/231046741" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/R5.20Bash.20Error.html#231046741">(Mar 19 2021 at 16:02)</a>:</h4>
<p><span class="user-mention" data-user-id="192166">@Jean Duteau</span> Some users want to preview their build on the website before the merge?</p>



<a name="231047270"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/R5%20Bash%20Error/near/231047270" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/R5.20Bash.20Error.html#231047270">(Mar 19 2021 at 16:05)</a>:</h4>
<p>Yeah the upload I just tested worked the second time. This is a server side problem with the way the files are moved around.</p>



<a name="231047391"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/R5%20Bash%20Error/near/231047391" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/R5.20Bash.20Error.html#231047391">(Mar 19 2021 at 16:06)</a>:</h4>
<p>sure, but that seems like it should be a different process from the pull request.  Obviously the error needs to be fixed but for merging pull requests, all we need is confirmation that the branch build succeeds.</p>



<a name="231047577"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/R5%20Bash%20Error/near/231047577" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/R5.20Bash.20Error.html#231047577">(Mar 19 2021 at 16:07)</a>:</h4>
<p>It's more part of the CI process, in theory, we want to do a full upload and test before merging into master</p>



<a name="231047639"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/R5%20Bash%20Error/near/231047639" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/R5.20Bash.20Error.html#231047639">(Mar 19 2021 at 16:08)</a>:</h4>
<p>because, if it does fail, we want it to fail on the branch and not master</p>



<a name="231047683"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/R5%20Bash%20Error/near/231047683" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/R5.20Bash.20Error.html#231047683">(Mar 19 2021 at 16:08)</a>:</h4>
<p>a full CI is not just about "does it build"</p>



<a name="231047759"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/R5%20Bash%20Error/near/231047759" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/R5.20Bash.20Error.html#231047759">(Mar 19 2021 at 16:08)</a>:</h4>
<p>gotta run it end to end. ...Ideally, we should have a process that tests if the branch webpage is live and working</p>



<a name="231048262"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/R5%20Bash%20Error/near/231048262" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/R5.20Bash.20Error.html#231048262">(Mar 19 2021 at 16:12)</a>:</h4>
<p>i guess.  i'm not sure that is really needed, but I don't know enough about the CI pipeline :)</p>



<a name="231048361"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/R5%20Bash%20Error/near/231048361" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/R5.20Bash.20Error.html#231048361">(Mar 19 2021 at 16:13)</a>:</h4>
<p>There is a balance, I push things from a purely technical point of view, and then I get push back from the standards world.</p>



<a name="231048394"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/R5%20Bash%20Error/near/231048394" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/R5.20Bash.20Error.html#231048394">(Mar 19 2021 at 16:13)</a>:</h4>
<p>the hope is that we meet somewhere that works for both worlds</p>



<a name="231048818"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/R5%20Bash%20Error/near/231048818" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/R5.20Bash.20Error.html#231048818">(Mar 19 2021 at 16:16)</a>:</h4>
<p>I'm re-running everyone's jobs right now, in the hope that they succeed the second time as we've seen</p>



<a name="231048894"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/R5%20Bash%20Error/near/231048894" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/R5.20Bash.20Error.html#231048894">(Mar 19 2021 at 16:17)</a>:</h4>
<p>I'm going to ignore error on the upload step for now, in hopes that I can talk with <span class="user-mention" data-user-id="191315">@Josh Mandel</span> to resolve this</p>



<a name="231052570"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/R5%20Bash%20Error/near/231052570" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/R5.20Bash.20Error.html#231052570">(Mar 19 2021 at 16:40)</a>:</h4>
<blockquote>
<p>Mark Iantorno: shouldn't it be mkdir -p ~/uploading/www/branches/$DEPLOY_TO_BRANCH</p>
</blockquote>
<p>No, if you do:</p>
<div class="codehilite"><pre><span></span><code>$ mkdir test-ig
$ mkdir /tmp/test-ig
$ mv test-ig/ /tmp/test-ig
</code></pre></div>
<p>then you wind up with <code>/tmp/test-ig/test-ig</code> when you want <code>/tmp/test-ig</code>.</p>



<a name="231052760"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/R5%20Bash%20Error/near/231052760" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/R5.20Bash.20Error.html#231052760">(Mar 19 2021 at 16:41)</a>:</h4>
<blockquote>
<p>I think line 24 is where the error is occurring</p>
</blockquote>
<div class="codehilite"><pre><span></span><code> mv ~/uploading/$TARGET/ ~/uploading/www/branches/$DEPLOY_TO_BRANCH
</code></pre></div>

<p>How is this failing? Maybe I'm being dense here --- what specifically is going wrong, and why do you think so?</p>



<a name="231063456"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/R5%20Bash%20Error/near/231063456" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/R5.20Bash.20Error.html#231063456">(Mar 19 2021 at 17:50)</a>:</h4>
<p>So, the error is happening when I execute this command: <br>
<code> tar czf - * | ssh  -i $(Agent.TempDirectory)/deploy.rsa -p 2222 $(BUILD_FHIR_ORG_USERNAME)@build.fhir.org ./publish $TARGET_DIRECTORY</code><br>
...which I don't think should be executing any <code>mv</code> commands locally...unless I truly have no idea what is going on. </p>
<p>I think that error: <code>mv: cannot stat '/home/fhir_upload/uploading/www/branches/&lt;branch-name-here&gt;': No such file or directory</code> is coming from the server. This error only happens the first time a branch is uploaded, every subsequent run succeeds no problem. </p>
<p>So we know from that, </p>
<ol>
<li>The first run will always fail on a new branch, all run after succeed</li>
<li>There is due to the fact that a mv command is being executed, with the destination location being a directory with the branch name</li>
<li>The first run actually still succeeds on the server, despite this error being returned. We know this because the website for that branch is live and working, even after the first run</li>
</ol>
<p>I think that the first time an upload runs, whatever process is on the server is creating the folder with the branch name successfully, but only after a mv is attempted and failed at some point. I'm not sure how to prove this though.</p>



<a name="231063466"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/R5%20Bash%20Error/near/231063466" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/R5.20Bash.20Error.html#231063466">(Mar 19 2021 at 17:50)</a>:</h4>
<p><span class="user-mention" data-user-id="191315">@Josh Mandel</span></p>



<a name="231064211"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/R5%20Bash%20Error/near/231064211" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/R5.20Bash.20Error.html#231064211">(Mar 19 2021 at 17:55)</a>:</h4>
<blockquote>
<p>mv: cannot stat '/home/fhir_upload/uploading/www/branches/&lt;branch-name-here&gt;': No such file or directory</p>
</blockquote>
<p>Yes you're getting this output -- but is the build <em>failing</em> at this step? the <code> || true</code> should prevent failure.</p>



<a name="231064331"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/R5%20Bash%20Error/near/231064331" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/R5.20Bash.20Error.html#231064331">(Mar 19 2021 at 17:56)</a>:</h4>
<p>Yeah, I would ahve thought so as well, but...it is not?</p>



<a name="231064489"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/R5%20Bash%20Error/near/231064489" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/R5.20Bash.20Error.html#231064489">(Mar 19 2021 at 17:57)</a>:</h4>
<p>So the publish script is printing this and <em>exiting</em>?</p>



<a name="231064895"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/R5%20Bash%20Error/near/231064895" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/R5.20Bash.20Error.html#231064895">(Mar 19 2021 at 18:00)</a>:</h4>
<p>it's printing that and continuing, but Azure is detecting it and failing the step I'm pretty sure?</p>



<a name="231066384"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/R5%20Bash%20Error/near/231066384" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/R5.20Bash.20Error.html#231066384">(Mar 19 2021 at 18:09)</a>:</h4>
<p>I'm not sure what it means to <em>continue</em> and to also <em>fail</em> the step. With <code>set -e</code> any failed step should exit the scrit. My understanding might be off here; is there a minimal example that might help reveal what's happening? Like when I test locally...</p>
<div class="codehilite" data-code-language="Bash"><pre><span></span><code>$ bash -c <span class="s1">'exit 5'</span>
$ <span class="nb">echo</span> <span class="nv">$?</span>
<span class="m">5</span>

$ bash -c <span class="s1">'exit 5'</span> <span class="o">||</span> <span class="nb">true</span>
$ <span class="nb">echo</span> <span class="nv">$?</span>
<span class="m">0</span>
</code></pre></div>



<a name="231066925"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/R5%20Bash%20Error/near/231066925" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/R5.20Bash.20Error.html#231066925">(Mar 19 2021 at 18:13)</a>:</h4>
<p>Once the backlog of branches completes, I will try that, however...</p>



<a name="231066947"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/R5%20Bash%20Error/near/231066947" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/R5.20Bash.20Error.html#231066947">(Mar 19 2021 at 18:13)</a>:</h4>
<p>this is another example of one that hard fails</p>



<a name="231066973"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/R5%20Bash%20Error/near/231066973" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/R5.20Bash.20Error.html#231066973">(Mar 19 2021 at 18:13)</a>:</h4>
<div class="codehilite" data-code-language="publishing"><pre><span></span><code>502M    .
962M    .
1.5G    .
mv: cannot stat '/home/***/uploading/www/branches/michelle-miller-30769-Procedure-method-extension-cardinality': No such file or directory
find: './R4B-EBMonFHIR-Part-3': No such file or directory
find: './R4B-EBMonFHIR-Part-4': No such file or directory
##[error]Bash exited with code '1'.
Finishing: Bash
</code></pre></div>



<a name="231067025"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/R5%20Bash%20Error/near/231067025" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/R5.20Bash.20Error.html#231067025">(Mar 19 2021 at 18:14)</a>:</h4>
<p>the upload is initiated locally with the command I posted before, but then the server throws those errors</p>



<a name="231067086"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/R5%20Bash%20Error/near/231067086" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/R5.20Bash.20Error.html#231067086">(Mar 19 2021 at 18:14)</a>:</h4>
<p>the mv command tell us it cannot stat</p>



<a name="231067101"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/R5%20Bash%20Error/near/231067101" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/R5.20Bash.20Error.html#231067101">(Mar 19 2021 at 18:14)</a>:</h4>
<p>then two find commands fail back to back'</p>



<a name="231067130"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/R5%20Bash%20Error/near/231067130" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/R5.20Bash.20Error.html#231067130">(Mar 19 2021 at 18:14)</a>:</h4>
<p>those are run remotely not locally</p>



<a name="231067154"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/R5%20Bash%20Error/near/231067154" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/R5.20Bash.20Error.html#231067154">(Mar 19 2021 at 18:14)</a>:</h4>
<p>they cause bash to hard exit</p>



<a name="231067327"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/R5%20Bash%20Error/near/231067327" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/R5.20Bash.20Error.html#231067327">(Mar 19 2021 at 18:15)</a>:</h4>
<p>the upload operation shouldn't care about those other two branches: R4B-EBMon...-3 &amp; -4</p>



<a name="231067388"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/R5%20Bash%20Error/near/231067388" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/R5.20Bash.20Error.html#231067388">(Mar 19 2021 at 18:16)</a>:</h4>
<p>yet it tries to find them and do something with them?</p>



<a name="231067413"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/R5%20Bash%20Error/near/231067413" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/R5.20Bash.20Error.html#231067413">(Mar 19 2021 at 18:16)</a>:</h4>
<p>Why is the server even concerned with them?</p>



<a name="231067615"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/R5%20Bash%20Error/near/231067615" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/R5.20Bash.20Error.html#231067615">(Mar 19 2021 at 18:17)</a>:</h4>
<blockquote>
<p>find commands fail back to back</p>
</blockquote>
<p>This is what I was wondering about -- these aren't guarded by a <code>|| true</code>, so I could understand how these break a build (though I don't know what's going wrong with them)</p>



<a name="231067671"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/R5%20Bash%20Error/near/231067671" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/R5.20Bash.20Error.html#231067671">(Mar 19 2021 at 18:18)</a>:</h4>
<p>Do you know what <code>find</code> is failing on?</p>



<a name="231067724"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/R5%20Bash%20Error/near/231067724" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/R5.20Bash.20Error.html#231067724">(Mar 19 2021 at 18:18)</a>:</h4>
<p>I do not? This is all jsut from executing that one upload command</p>



<a name="231067743"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/R5%20Bash%20Error/near/231067743" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/R5.20Bash.20Error.html#231067743">(Mar 19 2021 at 18:18)</a>:</h4>
<blockquote>
<p>upload operation shouldn't care about those other two branches</p>
</blockquote>
<p>We use "someone uploaded something" as a trigger for "hey let's clean up old stuff"</p>



<a name="231067802"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/R5%20Bash%20Error/near/231067802" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/R5.20Bash.20Error.html#231067802">(Mar 19 2021 at 18:18)</a>:</h4>
<p>can we make that clean up process not cause a fail if something goes wrong?</p>



<a name="231067872"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/R5%20Bash%20Error/near/231067872" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/R5.20Bash.20Error.html#231067872">(Mar 19 2021 at 18:19)</a>:</h4>
<p>Yeah, I'd look at <a href="https://github.com/FHIR/auto-ig-builder/blob/master/images/ci-build/publish#L33-L35">https://github.com/FHIR/auto-ig-builder/blob/master/images/ci-build/publish#L33-L35</a> as the culprit ; consider adding a guard around this.</p>



<a name="231067895"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/R5%20Bash%20Error/near/231067895" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/R5.20Bash.20Error.html#231067895">(Mar 19 2021 at 18:19)</a>:</h4>
<p>But... I don't know <em>why</em> that find should be able to fail.</p>



<a name="231067908"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/R5%20Bash%20Error/near/231067908" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/R5.20Bash.20Error.html#231067908">(Mar 19 2021 at 18:19)</a>:</h4>
<p>like, what is going wrong?</p>



<a name="231068033"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/R5%20Bash%20Error/near/231068033" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/R5.20Bash.20Error.html#231068033">(Mar 19 2021 at 18:20)</a>:</h4>
<p>no clue</p>



<a name="231068088"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/R5%20Bash%20Error/near/231068088" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/R5.20Bash.20Error.html#231068088">(Mar 19 2021 at 18:20)</a>:</h4>
<p>if I commit to that branch and that repo will it automatically go into prod?</p>



<a name="231068417"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/R5%20Bash%20Error/near/231068417" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/R5.20Bash.20Error.html#231068417">(Mar 19 2021 at 18:22)</a>:</h4>
<p>No, there's a manual step to build and re-deploy these.</p>



<a name="231068514"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/R5%20Bash%20Error/near/231068514" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/R5.20Bash.20Error.html#231068514">(Mar 19 2021 at 18:23)</a>:</h4>
<p>But I'm wary about skipping things without understanding why they break. Let me try manually running this <code>find</code> in the current container and see what happens.</p>



<a name="231068716"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/R5%20Bash%20Error/near/231068716" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/R5.20Bash.20Error.html#231068716">(Mar 19 2021 at 18:24)</a>:</h4>
<p>KK thank you</p>



<a name="231069020"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/R5%20Bash%20Error/near/231069020" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/R5.20Bash.20Error.html#231069020">(Mar 19 2021 at 18:27)</a>:</h4>
<p>It... runs fine with exit code 0 and no output.</p>



<a name="231069463"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/R5%20Bash%20Error/near/231069463" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/R5.20Bash.20Error.html#231069463">(Mar 19 2021 at 18:30)</a>:</h4>
<p>Try with a brand new branch</p>



<a name="231069490"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/R5%20Bash%20Error/near/231069490" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/R5.20Bash.20Error.html#231069490">(Mar 19 2021 at 18:30)</a>:</h4>
<p>It consistently happens on the first try with a new branch</p>



<a name="231069771"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/R5%20Bash%20Error/near/231069771" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/R5.20Bash.20Error.html#231069771">(Mar 19 2021 at 18:32)</a>:</h4>
<p>I'm running this <code>find</code> command directly, not in the context of a branch upload.</p>



<a name="231069802"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/R5%20Bash%20Error/near/231069802" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/R5.20Bash.20Error.html#231069802">(Mar 19 2021 at 18:32)</a>:</h4>
<p>What is <code>./R4B-EBMonFHIR-Part-3'</code> ? The find seems to be mentioning it in the output you shared above.</p>



<a name="231069865"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/R5%20Bash%20Error/near/231069865" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/R5.20Bash.20Error.html#231069865">(Mar 19 2021 at 18:33)</a>:</h4>
<p>I would guess it was a branch at one point that existed</p>



<a name="231069879"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/R5%20Bash%20Error/near/231069879" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/R5.20Bash.20Error.html#231069879">(Mar 19 2021 at 18:33)</a>:</h4>
<p>And does not anymore</p>



<a name="231070064"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/R5%20Bash%20Error/near/231070064" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/R5.20Bash.20Error.html#231070064">(Mar 19 2021 at 18:34)</a>:</h4>
<p>So in that log out I sent above the person was trying to upload their branch, but somehow, a job on the server is looking for that other folder belonging to that other branch to do something with</p>



<a name="231070140"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/R5%20Bash%20Error/near/231070140" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/R5.20Bash.20Error.html#231070140">(Mar 19 2021 at 18:35)</a>:</h4>
<p>Each time an upload is performed we run</p>
<div class="codehilite"><pre><span></span><code>find . -path ./master -prune -o -type d -ctime +21  -path &#39;./*&#39;
</code></pre></div>

<p>which says "which branches here are &gt;21 days old"?</p>



<a name="231070171"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/R5%20Bash%20Error/near/231070171" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/R5.20Bash.20Error.html#231070171">(Mar 19 2021 at 18:35)</a>:</h4>
<p>The upload has completed though, even though you get the bash upload failed, you can still navigate to <a href="http://build.fhir.org/branches">build.fhir.org/branches</a> and see the newly uploaded branch</p>



<a name="231070200"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/R5%20Bash%20Error/near/231070200" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/R5.20Bash.20Error.html#231070200">(Mar 19 2021 at 18:35)</a>:</h4>
<p>Yeah I think this might be a result of that cleaning job</p>



<a name="231070207"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/R5%20Bash%20Error/near/231070207" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/R5.20Bash.20Error.html#231070207">(Mar 19 2021 at 18:35)</a>:</h4>
<p>Right, so that's consistent with failing near the <code>find</code> step. Which happens after the upload and "move into web hosting tree" is done.</p>



<a name="231070381"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/R5%20Bash%20Error/near/231070381" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/R5.20Bash.20Error.html#231070381">(Mar 19 2021 at 18:37)</a>:</h4>
<p>When you get an error is is <em>always</em> about "./R4B-EBMonFHIR-Part-3" ?</p>



<a name="231070392"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/R5%20Bash%20Error/near/231070392" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/R5.20Bash.20Error.html#231070392">(Mar 19 2021 at 18:37)</a>:</h4>
<p>No</p>



<a name="231070411"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/R5%20Bash%20Error/near/231070411" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/R5.20Bash.20Error.html#231070411">(Mar 19 2021 at 18:37)</a>:</h4>
<p>The branch name varies</p>



<a name="231070537"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/R5%20Bash%20Error/near/231070537" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/R5.20Bash.20Error.html#231070537">(Mar 19 2021 at 18:38)</a>:</h4>
<p>Are they always branches with something in common? Some special character, some particular age? What's the pattern here?</p>



<a name="231070588"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/R5%20Bash%20Error/near/231070588" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/R5.20Bash.20Error.html#231070588">(Mar 19 2021 at 18:38)</a>:</h4>
<p>I'll go through the last 5 failed builds and get the branch names</p>



<a name="231070592"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/R5%20Bash%20Error/near/231070592" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/R5.20Bash.20Error.html#231070592">(Mar 19 2021 at 18:38)</a>:</h4>
<p>one sec</p>



<a name="231070647"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/R5%20Bash%20Error/near/231070647" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/R5.20Bash.20Error.html#231070647">(Mar 19 2021 at 18:39)</a>:</h4>
<p>OK., thanks!</p>



<a name="231071016"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/R5%20Bash%20Error/near/231071016" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/R5.20Bash.20Error.html#231071016">(Mar 19 2021 at 18:41)</a>:</h4>
<p>find: './R4B-EBMonFHIR-Part-3': No such file or directory<br>
find: './R4B-EBMonFHIR-Part-4': No such file or directory<br>
find: './R4B-EBMonFHIR-Part-5': No such file or directory<br>
find: './Consent-for-R4B': No such file or directory<br>
find: './R4B-EBMonFHIR-Part-1': No such file or directory<br>
find: './Pharmacy-20210223': No such file or directory<br>
find: './rik-meddef': No such file or directory<br>
find: './Pharmacy20210218': No such file or directory</p>



<a name="231071048"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/R5%20Bash%20Error/near/231071048" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/R5.20Bash.20Error.html#231071048">(Mar 19 2021 at 18:41)</a>:</h4>
<p>those are the last 4 or so failed pipeline runs</p>



<a name="231071491"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/R5%20Bash%20Error/near/231071491" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/R5.20Bash.20Error.html#231071491">(Mar 19 2021 at 18:44)</a>:</h4>
<p>Searching Zulip for these names... I see some of these branches (all?) deleted yesterday (like from GH). Should that matter?</p>



<a name="231071768"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/R5%20Bash%20Error/near/231071768" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/R5.20Bash.20Error.html#231071768">(Mar 19 2021 at 18:46)</a>:</h4>
<p>I am unsure...? It shouldn't matter for the upload push though, right?</p>



<a name="231072601"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/R5%20Bash%20Error/near/231072601" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/R5.20Bash.20Error.html#231072601">(Mar 19 2021 at 18:52)</a>:</h4>
<p>Shouldn't. But... looking for patterns :)</p>



<a name="231073008"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/R5%20Bash%20Error/near/231073008" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/R5.20Bash.20Error.html#231073008">(Mar 19 2021 at 18:55)</a>:</h4>
<p>If you have a reliable way to trigger this error, I can try disabling the <code>find</code> step manually and we can test that (will have to be later though -- I'm in a workshop with divided attention).</p>



<a name="231073271"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/R5%20Bash%20Error/near/231073271" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/R5.20Bash.20Error.html#231073271">(Mar 19 2021 at 18:57)</a>:</h4>
<p>I can trigger the error with a new branch publish</p>



<a name="231073289"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/R5%20Bash%20Error/near/231073289" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/R5.20Bash.20Error.html#231073289">(Mar 19 2021 at 18:57)</a>:</h4>
<p>let me know and I will run one</p>



<a name="231073300"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/R5%20Bash%20Error/near/231073300" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/R5.20Bash.20Error.html#231073300">(Mar 19 2021 at 18:57)</a>:</h4>
<p>takes 25 min</p>



<a name="231073317"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/R5%20Bash%20Error/near/231073317" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/R5.20Bash.20Error.html#231073317">(Mar 19 2021 at 18:57)</a>:</h4>
<p>to run on azure</p>



<a name="231075044"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/R5%20Bash%20Error/near/231075044" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/R5.20Bash.20Error.html#231075044">(Mar 19 2021 at 19:08)</a>:</h4>
<p><span class="user-mention" data-user-id="191315">@Josh Mandel</span> I'm just stepping away for a few minutes, but if you get your changes in before I get  back, you can start the test by opening this PR: <a href="https://github.com/HL7/fhir/compare/server_side_error_test_branch?expand=1">https://github.com/HL7/fhir/compare/server_side_error_test_branch?expand=1</a></p>



<a name="231089361"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/R5%20Bash%20Error/near/231089361" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/R5.20Bash.20Error.html#231089361">(Mar 19 2021 at 21:01)</a>:</h4>
<p><span class="user-mention" data-user-id="191315">@Josh Mandel</span> have you had a chance to push the changes in?</p>



<a name="231089862"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/R5%20Bash%20Error/near/231089862" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/R5.20Bash.20Error.html#231089862">(Mar 19 2021 at 21:05)</a>:</h4>
<p>Just getting a chance -- OK, edited</p>



<a name="231089875"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/R5%20Bash%20Error/near/231089875" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/R5.20Bash.20Error.html#231089875">(Mar 19 2021 at 21:05)</a>:</h4>
<p>creating your test PR</p>



<a name="231089906"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/R5%20Bash%20Error/near/231089906" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/R5.20Bash.20Error.html#231089906">(Mar 19 2021 at 21:05)</a>:</h4>
<p>ah don't merge!</p>



<a name="231089915"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/R5%20Bash%20Error/near/231089915" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/R5.20Bash.20Error.html#231089915">(Mar 19 2021 at 21:05)</a>:</h4>
<p>just create the pr</p>



<a name="231096973"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/R5%20Bash%20Error/near/231096973" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/R5.20Bash.20Error.html#231096973">(Mar 19 2021 at 22:14)</a>:</h4>
<p>It worked?</p>



<a name="231096977"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/R5%20Bash%20Error/near/231096977" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/R5.20Bash.20Error.html#231096977">(Mar 19 2021 at 22:14)</a>:</h4>
<p><a href="https://github.com/HL7/fhir/pull/1185">https://github.com/HL7/fhir/pull/1185</a></p>



<a name="231096995"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/R5%20Bash%20Error/near/231096995" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/R5.20Bash.20Error.html#231096995">(Mar 19 2021 at 22:14)</a>:</h4>
<p>I will monitor the issue</p>



<a name="231097026"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/R5%20Bash%20Error/near/231097026" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/R5.20Bash.20Error.html#231097026">(Mar 19 2021 at 22:14)</a>:</h4>
<p>can you send me the commit with the changes you made when you get the chance please</p>



<a name="231098004"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/R5%20Bash%20Error/near/231098004" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/R5.20Bash.20Error.html#231098004">(Mar 19 2021 at 22:25)</a>:</h4>
<p>I'm not comfortable committing these changes because I still don't know why they would help :/</p>



<a name="231098017"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/R5%20Bash%20Error/near/231098017" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/R5.20Bash.20Error.html#231098017">(Mar 19 2021 at 22:25)</a>:</h4>
<p>But I guess you're confirming that they <em>have</em> helped?</p>



<a name="231098170"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/R5%20Bash%20Error/near/231098170" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/R5.20Bash.20Error.html#231098170">(Mar 19 2021 at 22:27)</a>:</h4>
<p>I'm going to revert and poke again with another PR</p>



<a name="231098766"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/R5%20Bash%20Error/near/231098766" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/R5.20Bash.20Error.html#231098766">(Mar 19 2021 at 22:34)</a>:</h4>
<p>Okay, makes sense</p>



<a name="231098807"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/R5%20Bash%20Error/near/231098807" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/R5.20Bash.20Error.html#231098807">(Mar 19 2021 at 22:34)</a>:</h4>
<p>The PR worked</p>



<a name="231098900"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/R5%20Bash%20Error/near/231098900" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/R5.20Bash.20Error.html#231098900">(Mar 19 2021 at 22:35)</a>:</h4>
<p>it is still throwing this error: mv: cannot stat '/home/***/uploading/www/branches/server_side_error_test_branch': No such file or directory<br>
but the other ones are not occuring</p>



<a name="231098923"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/R5%20Bash%20Error/near/231098923" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/R5.20Bash.20Error.html#231098923">(Mar 19 2021 at 22:35)</a>:</h4>
<p>but that's fine as it's not causing the crash, the other ones were for sure</p>



<a name="231099009"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/R5%20Bash%20Error/near/231099009" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/R5.20Bash.20Error.html#231099009">(Mar 19 2021 at 22:36)</a>:</h4>
<p>I also put a || true in the upload command locally to deal with the <code>\mv: cannot stat '/home/***/uploading/www/branches/server_side_error_test_branch': No such file or directory issue</code></p>



<a name="231099432"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/R5%20Bash%20Error/near/231099432" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/R5.20Bash.20Error.html#231099432">(Mar 19 2021 at 22:41)</a>:</h4>
<p>I don't think the line with <code>mv</code> is ever returning an exit status code other than <code>0</code>, is it? I'll instrument with more debugging output.</p>



<a name="231099441"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/R5%20Bash%20Error/near/231099441" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/R5.20Bash.20Error.html#231099441">(Mar 19 2021 at 22:41)</a>:</h4>
<p>kk</p>



<a name="231099444"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/R5%20Bash%20Error/near/231099444" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/R5.20Bash.20Error.html#231099444">(Mar 19 2021 at 22:41)</a>:</h4>
<p>it was jsut the other two then</p>



<a name="231099454"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/R5%20Bash%20Error/near/231099454" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/R5.20Bash.20Error.html#231099454">(Mar 19 2021 at 22:41)</a>:</h4>
<p>and they did not occur</p>



<a name="231103834"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/R5%20Bash%20Error/near/231103834" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/R5.20Bash.20Error.html#231103834">(Mar 19 2021 at 23:28)</a>:</h4>
<p>OK, got it.  Adding an "echo" to the rm arg makes it clear what's happening:</p>
<div class="codehilite"><pre><span></span><code>find  .  -path ./master -prune  -o -type d  -path &#39;./*&#39;  -exec echo rm  -rf {}  \;
rm -rf ./b
rm -rf ./b/a
rm -rf ./b/b
rm -rf ./a
rm -rf ./a/b
rm -rf ./a/a
</code></pre></div>
<p>... we delete <code>b</code> and then try to delete <code>b/a</code> after <code>b</code> is gone.</p>



<a name="231103897"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/R5%20Bash%20Error/near/231103897" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/R5.20Bash.20Error.html#231103897">(Mar 19 2021 at 23:29)</a>:</h4>
<p><a href="https://github.com/FHIR/auto-ig-builder/commit/fe48dde73835582f97ec9a6b4a9c29223dc58c47">https://github.com/FHIR/auto-ig-builder/commit/fe48dde73835582f97ec9a6b4a9c29223dc58c47</a> should take care of it. Deploying...</p>



<a name="231104138"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/R5%20Bash%20Error/near/231104138" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/R5.20Bash.20Error.html#231104138">(Mar 19 2021 at 23:32)</a>:</h4>
<p>(<a href="http://build.fhir.org">build.fhir.org</a> should be back in a minute... and back!)</p>



<a name="231108770"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/R5%20Bash%20Error/near/231108770" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/R5.20Bash.20Error.html#231108770">(Mar 20 2021 at 00:36)</a>:</h4>
<p>Wonderful. Thanks Josh.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
