---
layout: page
title: "FHIR Chat  · Fix bug in IG generation · committers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179165-committers/index.html">committers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/Fix.20bug.20in.20IG.20generation.html">Fix bug in IG generation</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="160970342"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/Fix%20bug%20in%20IG%20generation/near/160970342" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/Fix.20bug.20in.20IG.20generation.html#160970342">(Mar 16 2019 at 22:16)</a>:</h4>
<p>I've just fixed a significant bug in the IG generator. Here's the bug:</p>
<ul>
<li>as part of the publication process, the IG pubisher generates snapshots for any profiles <em>that don't have snapshots</em></li>
<li>It carefully checks the outcomes of the generation process and puts any exceptions/errors in the qa.html file</li>
<li>but snapshots are generated earlier in the process under a variety of conditions</li>
<li>if that process fails there, errors are not trapped - <em>and the partially generated snapshot remains in place</em></li>
<li>so when the IG publisher goes to check the snapshot, it already exists - and errors are not reported</li>
</ul>



<a name="160970415"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/Fix%20bug%20in%20IG%20generation/near/160970415" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/Fix.20bug.20in.20IG.20generation.html#160970415">(Mar 16 2019 at 22:18)</a>:</h4>
<p>The first and most obvious fix is that partially generated snapshots should not be left in place - which I've fixed.</p>



<a name="160970477"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/Fix%20bug%20in%20IG%20generation/near/160970477" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/Fix.20bug.20in.20IG.20generation.html#160970477">(Mar 16 2019 at 22:20)</a>:</h4>
<p>a deeper question is whether the IG publisher should accept snapshots at all.</p>



<a name="160970564"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/Fix%20bug%20in%20IG%20generation/near/160970564" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/Fix.20bug.20in.20IG.20generation.html#160970564">(Mar 16 2019 at 22:22)</a>:</h4>
<p>but irrespective of that, as of the next release, the IG publisher will be making more checks on the profiles, and you may get more qa issues, or your build might fail. Once it's released, I'll do rebuild the current set of IGs on the ci-build to see if there's any problems</p>



<a name="160988978"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/Fix%20bug%20in%20IG%20generation/near/160988978" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rick Geimer <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/Fix.20bug.20in.20IG.20generation.html#160988978">(Mar 17 2019 at 08:00)</a>:</h4>
<p>Maybe we add a command line option for the IG publisher about whether or not to accept snapshots, since I could definitely see that as a performance enhancement for local builds, but I don't think the CI build should use that option.</p>



<a name="161008167"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/Fix%20bug%20in%20IG%20generation/near/161008167" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/Fix.20bug.20in.20IG.20generation.html#161008167">(Mar 17 2019 at 17:49)</a>:</h4>
<p>I don't see many advantages to using snapshots for defining profiles.  It may be useful for logical models and narrative or other text generation.  I only use the differential when IG authoring and let the tooling deal with the snaphot generation.</p>



<a name="161040457"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/Fix%20bug%20in%20IG%20generation/near/161040457" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> AbdulMalik Shakir <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/Fix.20bug.20in.20IG.20generation.html#161040457">(Mar 18 2019 at 08:55)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> The IGs for VRDR and BSeR no longer build. I've made no changes to resources or profiles. All that I've done is remove some broken links and made minor modification to text. Also, the links <a href="http://build.fhir.org/ig/HL7/bser/index.html" target="_blank" title="http://build.fhir.org/ig/HL7/bser/index.html">http://build.fhir.org/ig/HL7/bser/index.html</a> and <a href="http://build.fhir.org/ig/HL7/vrdr/index.html" target="_blank" title="http://build.fhir.org/ig/HL7/vrdr/index.html">http://build.fhir.org/ig/HL7/vrdr/index.html</a> no longer point to the prior successful build. I think that this fix to the IG generation may have been a breaking change for my IGs. Is the fix absolutely necessary?</p>



<a name="161051580"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/Fix%20bug%20in%20IG%20generation/near/161051580" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/Fix.20bug.20in.20IG.20generation.html#161051580">(Mar 18 2019 at 12:10)</a>:</h4>
<p>yes it is necessary and you need to fix your IGs</p>



<a name="161051598"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/Fix%20bug%20in%20IG%20generation/near/161051598" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/Fix.20bug.20in.20IG.20generation.html#161051598">(Mar 18 2019 at 12:10)</a>:</h4>
<blockquote>
<p>Unable to generate snapshot for <a href="http://hl7.org/fhir/us/bser/StructureDefinition/PatientAllergy" target="_blank" title="http://hl7.org/fhir/us/bser/StructureDefinition/PatientAllergy">http://hl7.org/fhir/us/bser/StructureDefinition/PatientAllergy</a> because StructureDefinition PatientAllergy at AllergyIntolerance.verificationStatus: illegal constrained type code from CodeableConcept</p>
</blockquote>



<a name="161051605"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/Fix%20bug%20in%20IG%20generation/near/161051605" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/Fix.20bug.20in.20IG.20generation.html#161051605">(Mar 18 2019 at 12:10)</a>:</h4>
<p>this you <em>must</em> fix</p>



<a name="161051706"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/Fix%20bug%20in%20IG%20generation/near/161051706" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/Fix.20bug.20in.20IG.20generation.html#161051706">(Mar 18 2019 at 12:12)</a>:</h4>
<blockquote>
<p>Unable to generate snapshot for <a href="http://hl7.org/fhir/us/vrdr/StructureDefinition/VRDR-Funeral-Home-Director" target="_blank" title="http://hl7.org/fhir/us/vrdr/StructureDefinition/VRDR-Funeral-Home-Director">http://hl7.org/fhir/us/vrdr/StructureDefinition/VRDR-Funeral-Home-Director</a> because StructureDefinition VRDR-Funeral-Home-Director.meta at PractitionerRole.meta.profile: illegal constrained type Reference from uri</p>
</blockquote>
<p>this one too</p>



<a name="161057129"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/Fix%20bug%20in%20IG%20generation/near/161057129" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> AbdulMalik Shakir <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/Fix.20bug.20in.20IG.20generation.html#161057129">(Mar 18 2019 at 13:31)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> Any idea how many others might be affected and not know it?</p>



<a name="161086339"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/Fix%20bug%20in%20IG%20generation/near/161086339" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/Fix.20bug.20in.20IG.20generation.html#161086339">(Mar 18 2019 at 19:01)</a>:</h4>
<p>no.</p>



<a name="161087235"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/Fix%20bug%20in%20IG%20generation/near/161087235" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/Fix.20bug.20in.20IG.20generation.html#161087235">(Mar 18 2019 at 19:13)</a>:</h4>
<p>I've posted to the committers/announce stream.  That should let everyone know.</p>



<a name="161087313"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/Fix%20bug%20in%20IG%20generation/near/161087313" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/Fix.20bug.20in.20IG.20generation.html#161087313">(Mar 18 2019 at 19:13)</a>:</h4>
<p>Anyone impacted has profiles that are already broken - they just might not have known prior to the fix</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
