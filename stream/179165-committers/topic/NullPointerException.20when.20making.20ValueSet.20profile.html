---
layout: page
title: "FHIR Chat  · NullPointerException when making ValueSet profile · committers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179165-committers/index.html">committers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/NullPointerException.20when.20making.20ValueSet.20profile.html">NullPointerException when making ValueSet profile</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="232481586"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/NullPointerException%20when%20making%20ValueSet%20profile/near/232481586" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marc Duteau <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/NullPointerException.20when.20making.20ValueSet.20profile.html#232481586">(Mar 30 2021 at 19:16)</a>:</h4>
<p>While making the VSD Profile I ran into a NullPointerException and I'm not exactly sure what's causing it: java.lang.NullPointerException<br>
        at org.hl7.fhir.r5.conformance.ProfileUtilities.processElementsIntoTree(ProfileUtilities.java:5285)<br>
        at org.hl7.fhir.r5.conformance.ProfileUtilities.processElementsIntoTree(ProfileUtilities.java:5296)<br>
        at org.hl7.fhir.r5.conformance.ProfileUtilities.sortDifferential(ProfileUtilities.java:5247)<br>
        at org.hl7.fhir.tools.publisher.Publisher.sortProfile(Publisher.java:1096)<br>
        at org.hl7.fhir.tools.publisher.Publisher.processProfile(Publisher.java:1062)<br>
        at org.hl7.fhir.tools.publisher.Publisher.processProfiles(Publisher.java:910)<br>
        at org.hl7.fhir.tools.publisher.Publisher.execute(Publisher.java:609)<br>
        at org.hl7.fhir.tools.publisher.Publisher.main(Publisher.java:473)</p>



<a name="232482438"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/NullPointerException%20when%20making%20ValueSet%20profile/near/232482438" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/NullPointerException.20when.20making.20ValueSet.20profile.html#232482438">(Mar 30 2021 at 19:22)</a>:</h4>
<p>weird. how do I reproduce that?</p>



<a name="232482720"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/NullPointerException%20when%20making%20ValueSet%20profile/near/232482720" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marc Duteau <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/NullPointerException.20when.20making.20ValueSet.20profile.html#232482720">(Mar 30 2021 at 19:24)</a>:</h4>
<p>I've uploaded the files to the branch I'd made. <a href="https://github.com/HL7/fhir/tree/vocab-vsdalignedprofile-r5">https://github.com/HL7/fhir/tree/vocab-vsdalignedprofile-r5</a></p>



<a name="232483634"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/NullPointerException%20when%20making%20ValueSet%20profile/near/232483634" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marc Duteau <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/NullPointerException.20when.20making.20ValueSet.20profile.html#232483634">(Mar 30 2021 at 19:30)</a>:</h4>
<p>But what I did was I made the vsd-alignedvalueset profile structure definition, an implementationguide-ValueSet-vsdalignedvalueset.xml file for it, like the one for the shareable valueset profile, and then the reference to that file in the list-ValueSet-packs.xml file.</p>



<a name="232502371"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/NullPointerException%20when%20making%20ValueSet%20profile/near/232502371" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marc Duteau <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/NullPointerException.20when.20making.20ValueSet.20profile.html#232502371">(Mar 30 2021 at 21:40)</a>:</h4>
<p>Appears to be solved. My structure definition got very very messed up somehow.</p>



<a name="232520512"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/NullPointerException%20when%20making%20ValueSet%20profile/near/232520512" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/NullPointerException.20when.20making.20ValueSet.20profile.html#232520512">(Mar 31 2021 at 00:56)</a>:</h4>
<p>i took over (tag team) and we have an NPE in a different spot:<br>
java.lang.NullPointerException<br>
        at org.hl7.fhir.tools.publisher.PageProcessor.produceProfiles(PageProcessor.java:7451)<br>
        at org.hl7.fhir.tools.publisher.PageProcessor.processResourceIncludes(PageProcessor.java:6119)<br>
        at org.hl7.fhir.tools.publisher.Publisher.produceResource2(Publisher.java:3995)<br>
        at org.hl7.fhir.tools.publisher.Publisher.loadValueSets2(Publisher.java:1275)<br>
        at org.hl7.fhir.tools.publisher.Publisher.produceSpec(Publisher.java:2339)<br>
        at org.hl7.fhir.tools.publisher.Publisher.produceSpecification(Publisher.java:2180)<br>
        at org.hl7.fhir.tools.publisher.Publisher.execute(Publisher.java:613)<br>
        at org.hl7.fhir.tools.publisher.Publisher.main(Publisher.java:473)</p>
<p>I'm sure this is still something we've done to the structure, but the NPE doesn't help us figure it out.</p>



<a name="232521901"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/NullPointerException%20when%20making%20ValueSet%20profile/near/232521901" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/NullPointerException.20when.20making.20ValueSet.20profile.html#232521901">(Mar 31 2021 at 01:18)</a>:</h4>
<p>same branch as above if anyone wants to tell me what the NPE is actually trying to tell us.  (<span class="user-mention" data-user-id="191316">@Grahame Grieve</span> <span class="user-mention" data-user-id="248736">@Mark Iantorno</span>)</p>



<a name="232525992"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/NullPointerException%20when%20making%20ValueSet%20profile/near/232525992" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/NullPointerException.20when.20making.20ValueSet.20profile.html#232525992">(Mar 31 2021 at 02:14)</a>:</h4>
<p>Did the pipeline produce this output, or was this local to your computer?</p>



<a name="232526000"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/NullPointerException%20when%20making%20ValueSet%20profile/near/232526000" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/NullPointerException.20when.20making.20ValueSet.20profile.html#232526000">(Mar 31 2021 at 02:14)</a>:</h4>
<p>If produced by the pipeline, can you please link to the build</p>



<a name="232526696"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/NullPointerException%20when%20making%20ValueSet%20profile/near/232526696" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/NullPointerException.20when.20making.20ValueSet.20profile.html#232526696">(Mar 31 2021 at 02:24)</a>:</h4>
<p>local.  i haven't tried a pull request merge because I get that error on the local build</p>



<a name="232527190"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/NullPointerException%20when%20making%20ValueSet%20profile/near/232527190" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/NullPointerException.20when.20making.20ValueSet.20profile.html#232527190">(Mar 31 2021 at 02:31)</a>:</h4>
<p>but i did check everything in, so a clone of that branch should cause the same error</p>



<a name="232578479"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/NullPointerException%20when%20making%20ValueSet%20profile/near/232578479" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/NullPointerException.20when.20making.20ValueSet.20profile.html#232578479">(Mar 31 2021 at 12:08)</a>:</h4>
<p>I'm going to open a pr so I can view the entire logs</p>



<a name="232609651"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/NullPointerException%20when%20making%20ValueSet%20profile/near/232609651" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/NullPointerException.20when.20making.20ValueSet.20profile.html#232609651">(Mar 31 2021 at 15:17)</a>:</h4>
<p>yay, you get the same error on CI.</p>



<a name="232630118"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/NullPointerException%20when%20making%20ValueSet%20profile/near/232630118" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/NullPointerException.20when.20making.20ValueSet.20profile.html#232630118">(Mar 31 2021 at 17:16)</a>:</h4>
<p>You are currently 3rd in my queue of issues to look at. FYI</p>



<a name="232634251"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/NullPointerException%20when%20making%20ValueSet%20profile/near/232634251" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/NullPointerException.20when.20making.20ValueSet.20profile.html#232634251">(Mar 31 2021 at 17:41)</a>:</h4>
<p>no worries.  Marc and I have other issues to work on.  i'm just glad that someone else got the error so it's not in our setup.</p>



<a name="232634449"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/NullPointerException%20when%20making%20ValueSet%20profile/near/232634449" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/NullPointerException.20when.20making.20ValueSet.20profile.html#232634449">(Mar 31 2021 at 17:42)</a>:</h4>
<p>In cases like this, I would always advise taking the time to build on the CI by creating a pull request</p>



<a name="232634501"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/NullPointerException%20when%20making%20ValueSet%20profile/near/232634501" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/NullPointerException.20when.20making.20ValueSet.20profile.html#232634501">(Mar 31 2021 at 17:43)</a>:</h4>
<p>The cloud environment is a 'clean' environment that we use as the baseline for testing</p>



<a name="232634571"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/NullPointerException%20when%20making%20ValueSet%20profile/near/232634571" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/NullPointerException.20when.20making.20ValueSet.20profile.html#232634571">(Mar 31 2021 at 17:43)</a>:</h4>
<p>if it is broken on the cloud, that means it's most likely broken everywhere</p>



<a name="232634573"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/NullPointerException%20when%20making%20ValueSet%20profile/near/232634573" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/NullPointerException.20when.20making.20ValueSet.20profile.html#232634573">(Mar 31 2021 at 17:43)</a>:</h4>
<p>makes sense</p>



<a name="232655120"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/NullPointerException%20when%20making%20ValueSet%20profile/near/232655120" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/NullPointerException.20when.20making.20ValueSet.20profile.html#232655120">(Mar 31 2021 at 19:56)</a>:</h4>
<p>the profile vsd-alignedvalueset is not registered in an IG</p>



<a name="232656881"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/NullPointerException%20when%20making%20ValueSet%20profile/near/232656881" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/NullPointerException.20when.20making.20ValueSet.20profile.html#232656881">(Mar 31 2021 at 20:07)</a>:</h4>
<p>correct, it is a profile that we're defining in FHIR Core</p>



<a name="232659037"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/NullPointerException%20when%20making%20ValueSet%20profile/near/232659037" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/NullPointerException.20when.20making.20ValueSet.20profile.html#232659037">(Mar 31 2021 at 20:23)</a>:</h4>
<p>yes so you need to register it in the core ig</p>



<a name="232659834"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/NullPointerException%20when%20making%20ValueSet%20profile/near/232659834" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/NullPointerException.20when.20making.20ValueSet.20profile.html#232659834">(Mar 31 2021 at 20:29)</a>:</h4>
<p>we did create an implementationguide instance in source/valueset.  There is the implementationguide-ValueSet-core.xml that previously existed and we created a new implementationguide-ValueSet-vsdalignedvalueset.xml.  Are you saying that we should just incorporate our profile and needed extensions in the existing ig resource?</p>



<a name="232660612"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/NullPointerException%20when%20making%20ValueSet%20profile/near/232660612" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/NullPointerException.20when.20making.20ValueSet.20profile.html#232660612">(Mar 31 2021 at 20:33)</a>:</h4>
<p>yes that one should be in core, not a new IG</p>



<a name="232660627"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/NullPointerException%20when%20making%20ValueSet%20profile/near/232660627" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/NullPointerException.20when.20making.20ValueSet.20profile.html#232660627">(Mar 31 2021 at 20:34)</a>:</h4>
<p>ok</p>



<a name="232660711"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/NullPointerException%20when%20making%20ValueSet%20profile/near/232660711" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/NullPointerException.20when.20making.20ValueSet.20profile.html#232660711">(Mar 31 2021 at 20:34)</a>:</h4>
<p>adding a new ig is a much bigger thing I would have to do</p>



<a name="232661077"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/NullPointerException%20when%20making%20ValueSet%20profile/near/232661077" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/NullPointerException.20when.20making.20ValueSet.20profile.html#232661077">(Mar 31 2021 at 20:36)</a>:</h4>
<p>okay, i'll make that happen</p>



<a name="232664774"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/NullPointerException%20when%20making%20ValueSet%20profile/near/232664774" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/NullPointerException.20when.20making.20ValueSet.20profile.html#232664774">(Mar 31 2021 at 21:03)</a>:</h4>
<p><span class="user-mention" data-user-id="248736">@Mark Iantorno</span> can I take over your PR and actually merge it if the checks pass?</p>



<a name="232668125"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/NullPointerException%20when%20making%20ValueSet%20profile/near/232668125" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/NullPointerException.20when.20making.20ValueSet.20profile.html#232668125">(Mar 31 2021 at 21:29)</a>:</h4>
<p>Yeah, that's not an issue</p>



<a name="232668224"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/NullPointerException%20when%20making%20ValueSet%20profile/near/232668224" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/NullPointerException.20when.20making.20ValueSet.20profile.html#232668224">(Mar 31 2021 at 21:30)</a>:</h4>
<p>It is labelled "DONT MERGE THIS PR", so you might want to close it and open a new one</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
