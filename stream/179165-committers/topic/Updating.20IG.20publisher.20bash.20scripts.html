---
layout: page
title: "FHIR Chat  · Updating IG publisher bash scripts · committers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179165-committers/index.html">committers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/Updating.20IG.20publisher.20bash.20scripts.html">Updating IG publisher bash scripts</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="202837734"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/Updating%20IG%20publisher%20bash%20scripts/near/202837734" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/Updating.20IG.20publisher.20bash.20scripts.html#202837734">(Jul 03 2020 at 21:24)</a>:</h4>
<p>Anyone willing to update the <a href="http://_updatePublisher.sh">_updatePublisher.sh</a> to match the _updatePublisher.bat ?<br>
<a href="https://github.com/FHIR/sample-ig/blob/master/_updatePublisher.sh">https://github.com/FHIR/sample-ig/blob/master/_updatePublisher.sh</a></p>



<a name="202837737"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/Updating%20IG%20publisher%20bash%20scripts/near/202837737" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/Updating.20IG.20publisher.20bash.20scripts.html#202837737">(Jul 03 2020 at 21:24)</a>:</h4>
<p>What needs to be done: After downloading the publisher, it should ask the user whether to update the scripts (_genOnce, _genContinuous, _updatePublisher) and if Yes, download and replace existing ones (including itself).</p>



<a name="202838079"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/Updating%20IG%20publisher%20bash%20scripts/near/202838079" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/Updating.20IG.20publisher.20bash.20scripts.html#202838079">(Jul 03 2020 at 21:32)</a>:</h4>
<p><a href="https://github.com/FHIR/sample-ig/blob/master/_updatePublisher.bat">https://github.com/FHIR/sample-ig/blob/master/_updatePublisher.bat</a> shows how, but it is rather simple:</p>
<ol>
<li>declare url variables:</li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="k">set</span> <span class="nv">update_bat_url</span><span class="p">=</span>https://raw.githubusercontent.com/FHIR/sample-ig/master/_updatePublisher.bat
<span class="k">set</span> <span class="nv">gen_bat_url</span><span class="p">=</span>https://raw.githubusercontent.com/FHIR/sample-ig/master/_genonce.bat
<span class="k">set</span> <span class="nv">gencont_bat_url</span><span class="p">=</span>https://raw.githubusercontent.com/FHIR/sample-ig/master/_gencontinuous.bat
<span class="k">set</span> <span class="nv">gencont_sh_url</span><span class="p">=</span>https://raw.githubusercontent.com/FHIR/sample-ig/master/_gencontinuous.sh
<span class="k">set</span> <span class="nv">gen_sh_url</span><span class="p">=</span>https://raw.githubusercontent.com/FHIR/sample-ig/master/_genonce.sh
<span class="k">set</span> <span class="nv">update_sh_url</span><span class="p">=</span>https://raw.githubusercontent.com/FHIR/sample-ig/master/_updatePublisher.sh
</code></pre></div>


<ol start="2">
<li>
<p>(update the promping logic with the ifs /elses</p>
</li>
<li>
<p>for each of the urls, download the file under a new name, and if no errors, start a new process to copy the downloaded file to the right name , delete the downloaded file, and exit the new process</p>
</li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="p">:</span><span class="nl">dl_script_6</span>
<span class="k">ECHO</span> Updating _updatePublisher.bat
<span class="k">call</span> POWERSHELL -command if (&#39;System.Net.WebClient&#39; -as [type]) {(new-object System.Net.WebClient).DownloadFile(\<span class="s2">&quot;</span><span class="nv">%update_bat_url%</span><span class="s2">\&quot;</span>,\<span class="s2">&quot;_updatePublisher.new.bat\&quot;</span>) } else { Invoke-WebRequest -Uri <span class="s2">&quot;</span><span class="nv">%update_bat_url%</span><span class="s2">&quot;</span> -Outfile <span class="s2">&quot;_updatePublisher.new.bat&quot;</span> }
<span class="k">if</span> <span class="nv">%ERRORLEVEL%</span> <span class="o">==</span> 0 <span class="k">goto</span> <span class="nl">upd_script_6</span>
<span class="k">echo</span> <span class="s2">&quot;Errors encountered during download: </span><span class="nv">%errorlevel%</span><span class="s2">&quot;</span>
<span class="k">goto</span> <span class="nl">end</span>
<span class="p">:</span><span class="nl">upd_script_6</span>
<span class="k">start</span> copy /y <span class="s2">&quot;_updatePublisher.new.bat&quot;</span> <span class="s2">&quot;_updatePublisher.bat&quot;</span> <span class="se">^&amp;^&amp;</span> del <span class="s2">&quot;_updatePublisher.new.bat&quot;</span> <span class="se">^&amp;^&amp;</span> exit
</code></pre></div>


<p>(trick is to make sure that the action performed by <a href="http://_updatePublisher.sh">_updatePublisher.sh</a> is to launch a new process to replace itself, this way the file is no longer in use and can be replaced).</p>



<a name="204678811"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/Updating%20IG%20publisher%20bash%20scripts/near/204678811" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/Updating.20IG.20publisher.20bash.20scripts.html#204678811">(Jul 22 2020 at 15:10)</a>:</h4>
<p>ping anyone?</p>



<a name="204683254"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/Updating%20IG%20publisher%20bash%20scripts/near/204683254" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Pyke <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/Updating.20IG.20publisher.20bash.20scripts.html#204683254">(Jul 22 2020 at 15:41)</a>:</h4>
<p>I'll take a kick at it.</p>



<a name="204683861"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/Updating%20IG%20publisher%20bash%20scripts/near/204683861" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/Updating.20IG.20publisher.20bash.20scripts.html#204683861">(Jul 22 2020 at 15:46)</a>:</h4>
<p>thanks</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
