---
layout: page
title: "FHIR Chat  · &quot;Truncated ZIP file&quot; error · committers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179165-committers/index.html">committers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/.22Truncated.20ZIP.20file.22.20error.html">&quot;Truncated ZIP file&quot; error</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="226991060"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/%22Truncated%20ZIP%20file%22%20error/near/226991060" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/.22Truncated.20ZIP.20file.22.20error.html#226991060">(Feb 19 2021 at 16:40)</a>:</h4>
<p>Any idea what this error means?</p>
<div class="codehilite"><pre><span></span><code>This was a Full Build                                                      0.001  55sec  291MB
FHIR build failure @ Fri, Feb 19, 2021 10:38-0600                          0.756  56sec  291MB
Error: Truncated ZIP file
java.io.IOException: Truncated ZIP file
        at org.apache.commons.compress.archivers.zip.ZipArchiveInputStream.readDeflated(ZipArchiveInputStream.java:590)
        at org.apache.commons.compress.archivers.zip.ZipArchiveInputStream.read(ZipArchiveInputStream.java:488)
        at java.base/java.io.FilterInputStream.read(FilterInputStream.java:132)
        at org.apache.poi.openxml4j.util.ZipArchiveThresholdInputStream.read(ZipArchiveThresholdInputStream.java:78)
        at org.apache.poi.util.IOUtils.toByteArray(IOUtils.java:151)
        at org.apache.poi.util.IOUtils.toByteArray(IOUtils.java:120)
        at org.apache.poi.util.IOUtils.toByteArray(IOUtils.java:107)
        at org.apache.poi.openxml4j.util.ZipArchiveFakeEntry.&lt;init&gt;(ZipArchiveFakeEntry.java:47)
        at org.apache.poi.openxml4j.util.ZipInputStreamZipEntrySource.&lt;init&gt;(ZipInputStreamZipEntrySource.java:51)
        at org.apache.poi.openxml4j.opc.ZipPackage.&lt;init&gt;(ZipPackage.java:106)
        at org.apache.poi.openxml4j.opc.OPCPackage.open(OPCPackage.java:299)
        at org.apache.poi.ooxml.util.PackageHelper.open(PackageHelper.java:37)
        at org.apache.poi.xssf.usermodel.XSSFWorkbook.&lt;init&gt;(XSSFWorkbook.java:307)
        at org.hl7.fhir.definitions.parsers.spreadsheets.SpreadSheetReloader.process(SpreadSheetReloader.java:90)
        at org.hl7.fhir.definitions.parsers.SourceParser.loadResource(SourceParser.java:1259)
        at org.hl7.fhir.definitions.parsers.SourceParser.parse(SourceParser.java:274)
        at org.hl7.fhir.tools.publisher.Publisher.execute(Publisher.java:580)
        at org.hl7.fhir.tools.publisher.Publisher.main(Publisher.java:473)
</code></pre></div>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span>? <span class="user-mention" data-user-id="248736">@Mark Iantorno</span>?</p>



<a name="227002248"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/%22Truncated%20ZIP%20file%22%20error/near/227002248" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/.22Truncated.20ZIP.20file.22.20error.html#227002248">(Feb 19 2021 at 17:57)</a>:</h4>
<p>wild guess: is your xslx correctly saved? <br>
(asking this because the xlsx is basically a zip file and the top message seems to say it's not able to deflate)</p>



<a name="227188773"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/%22Truncated%20ZIP%20file%22%20error/near/227188773" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/.22Truncated.20ZIP.20file.22.20error.html#227188773">(Feb 21 2021 at 19:32)</a>:</h4>
<p><span class="user-mention" data-user-id="191832">@Jose Costa Teixeira</span> You were on the right track.  I reverted back to a completely clean repo on master and also removed the observationdefinition spreadsheet that I had been working on (as they aren't checked in to GH) and I still kept getting the error.  But finally I tried removing all .xlsx files in source, and that resolved the error!  It doesn't explain what was corrupted or how it got that way, but at least it finally worked.  One thing that I think would be really helpful is when the process fails with the "Truncated ZIP file" message it should tell you which file it was working on that failed. <span class="user-mention" data-user-id="191316">@Grahame Grieve</span></p>



<a name="227540059"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/%22Truncated%20ZIP%20file%22%20error/near/227540059" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/.22Truncated.20ZIP.20file.22.20error.html#227540059">(Feb 24 2021 at 02:51)</a>:</h4>
<p>the xlsx file internally is a zip file. So that means that something about it wasn't right</p>



<a name="227553024"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/%22Truncated%20ZIP%20file%22%20error/near/227553024" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/.22Truncated.20ZIP.20file.22.20error.html#227553024">(Feb 24 2021 at 06:12)</a>:</h4>
<p>Yes, that makes sense - and Jose pointed me in that direction.  What wasn't clear, though, was what was the change that caused the error, as it turned out not to be from the observationdefinition spreadsheet that I had been working on (and I still don't know which one it was).  Since the *.xlsx files aren't in source control it's not easy to see if any of them have changed - so having the error message state which file was being processed that generated the error would be very useful.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
