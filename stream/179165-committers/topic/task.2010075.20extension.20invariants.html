---
layout: page
title: "FHIR Chat  · task 10075 extension invariants · committers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179165-committers/index.html">committers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/task.2010075.20extension.20invariants.html">task 10075 extension invariants</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153840447"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/task%2010075%20extension%20invariants/near/153840447" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/task.2010075.20extension.20invariants.html#153840447">(Jul 22 2016 at 00:02)</a>:</h4>
<p>task <a href="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=10075" target="_blank" title="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=10075">GF#10075</a> - I'm not following this one - looks like the information is out of date, and I'm not sure what the source is trying to do. Can <span class="user-mention" data-user-id="191405">@Rob Hausam</span>  or <span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> clarify?</p>



<a name="153840467"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/task%2010075%20extension%20invariants/near/153840467" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/task.2010075.20extension.20invariants.html#153840467">(Jul 22 2016 at 01:08)</a>:</h4>
<p>Look at this: <a href="http://hl7.org/fhir/extension-allergyintolerance-resolutionage.html" target="_blank" title="http://hl7.org/fhir/extension-allergyintolerance-resolutionage.html">http://hl7.org/fhir/extension-allergyintolerance-resolutionage.html</a><br>
Then look at this: <a href="http://hl7-fhir.github.io/extension-allergyintolerance-resolutionage.html" target="_blank" title="http://hl7-fhir.github.io/extension-allergyintolerance-resolutionage.html">http://hl7-fhir.github.io/extension-allergyintolerance-resolutionage.html</a><br>
ext-1 is new for STU3.  The other two should still exist, but they're not appearing</p>



<a name="153840468"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/task%2010075%20extension%20invariants/near/153840468" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/task.2010075.20extension.20invariants.html#153840468">(Jul 22 2016 at 01:10)</a>:</h4>
<p>Yes, I was just about to post the same examples.</p>



<a name="153840470"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/task%2010075%20extension%20invariants/near/153840470" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/task.2010075.20extension.20invariants.html#153840470">(Jul 22 2016 at 01:10)</a>:</h4>
<p>I don't see them in the spreadsheet</p>



<a name="153840477"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/task%2010075%20extension%20invariants/near/153840477" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/task.2010075.20extension.20invariants.html#153840477">(Jul 22 2016 at 02:05)</a>:</h4>
<p>allergyintolerance-extensions-spreadsheet, Extensions-Inv tab</p>



<a name="153840478"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/task%2010075%20extension%20invariants/near/153840478" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/task.2010075.20extension.20invariants.html#153840478">(Jul 22 2016 at 02:05)</a>:</h4>
<p>"code or substanceExposureRisk"</p>



<a name="153840485"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/task%2010075%20extension%20invariants/near/153840485" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/task.2010075.20extension.20invariants.html#153840485">(Jul 22 2016 at 02:40)</a>:</h4>
<p>and what has that to do with any of the extensions?</p>



<a name="153840513"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/task%2010075%20extension%20invariants/near/153840513" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/task.2010075.20extension.20invariants.html#153840513">(Jul 22 2016 at 04:30)</a>:</h4>
<p>"If the substanceExposureRisk extension element is present, the AllergyIntolerance.code element must be omitted."?</p>



<a name="153840515"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/task%2010075%20extension%20invariants/near/153840515" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/task.2010075.20extension.20invariants.html#153840515">(Jul 22 2016 at 04:31)</a>:</h4>
<p>question on that?</p>



<a name="153840516"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/task%2010075%20extension%20invariants/near/153840516" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/task.2010075.20extension.20invariants.html#153840516">(Jul 22 2016 at 04:33)</a>:</h4>
<p>not sure that the references and the rest of the syntax is all entirely correct (or even allowed), but I tried to get as close as possible, and it didn't complain at me - <span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> I was actually going to ask you to look at it at some point and see what I needed to tweak  </p>



<a name="153840519"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/task%2010075%20extension%20invariants/near/153840519" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/task.2010075.20extension.20invariants.html#153840519">(Jul 22 2016 at 05:17)</a>:</h4>
<p>so this is all confusing. The claim wsa that there is constraints for two extensions which aren't showing, but I don't see them</p>



<a name="153840520"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/task%2010075%20extension%20invariants/near/153840520" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/task.2010075.20extension.20invariants.html#153840520">(Jul 22 2016 at 05:17)</a>:</h4>
<p>there is an invariant but it has no extension as context, so the build ignores it</p>



<a name="153840540"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/task%2010075%20extension%20invariants/near/153840540" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/task.2010075.20extension.20invariants.html#153840540">(Jul 22 2016 at 09:27)</a>:</h4>
<p>The build used to not ignore it.  If it needs to be updated to have a different context, that's doable.  Also, the one from Quantity is gone too.</p>



<a name="153840541"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/task%2010075%20extension%20invariants/near/153840541" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/task.2010075.20extension.20invariants.html#153840541">(Jul 22 2016 at 09:30)</a>:</h4>
<p>which one from quantity?</p>



<a name="153840542"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/task%2010075%20extension%20invariants/near/153840542" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/task.2010075.20extension.20invariants.html#153840542">(Jul 22 2016 at 09:34)</a>:</h4>
<p>From STU2:<br>
qty-3: On Extension.valueQuantity: If a code for the unit is present, the system SHALL also be present (xpath on f:Extension/f:valueQuantity: not(exists(f:code)) or exists(f:system))</p>



<a name="153840544"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/task%2010075%20extension%20invariants/near/153840544" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/task.2010075.20extension.20invariants.html#153840544">(Jul 22 2016 at 09:44)</a>:</h4>
<p>umm</p>



<a name="153840545"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/task%2010075%20extension%20invariants/near/153840545" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/task.2010075.20extension.20invariants.html#153840545">(Jul 22 2016 at 09:44)</a>:</h4>
<p>it's still present every where it should be</p>



<a name="153840546"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/task%2010075%20extension%20invariants/near/153840546" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/task.2010075.20extension.20invariants.html#153840546">(Jul 22 2016 at 09:52)</a>:</h4>
<p>So it shouldn't show up on extensions with a type of Age?</p>



<a name="153840550"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/task%2010075%20extension%20invariants/near/153840550" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/task.2010075.20extension.20invariants.html#153840550">(Jul 22 2016 at 11:08)</a>:</h4>
<p>it should. that's a snapshot generation problem</p>



<a name="153840554"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/task%2010075%20extension%20invariants/near/153840554" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/task.2010075.20extension.20invariants.html#153840554">(Jul 22 2016 at 13:53)</a>:</h4>
<p>yes - if we need to change/add the context, that's fine - just need to know that's what's needed </p>



<a name="153840680"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/task%2010075%20extension%20invariants/near/153840680" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/task.2010075.20extension.20invariants.html#153840680">(Jul 22 2016 at 20:47)</a>:</h4>
<p>the context must be exactly the same as the 'code' for the extension in the spreadsheet, and then the invariant will be added to the extension - otherwise the invariant will be ignored</p>



<a name="153840714"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/task%2010075%20extension%20invariants/near/153840714" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/task.2010075.20extension.20invariants.html#153840714">(Jul 23 2016 at 04:33)</a>:</h4>
<p>Thanks for that clarification, <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> It seems that this behavior changed at some point following STU3 candidate, but as long as it's clear and understood (which it obviously wasn't for me), it's not a problem.  My invariants are showing up now (only on my local build at the moment), so that's great.  Now I just need to verify that the XPath (shouldn't we be using FluentPath now?) is correct so that they actually work as intended - I'm pretty sure that some of the references aren't correct at the moment. </p>



<a name="153840715"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/task%2010075%20extension%20invariants/near/153840715" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/task.2010075.20extension.20invariants.html#153840715">(Jul 23 2016 at 04:35)</a>:</h4>
<p>we are transitioning to XPath. For now, both are required</p>



<a name="153840716"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/task%2010075%20extension%20invariants/near/153840716" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/task.2010075.20extension.20invariants.html#153840716">(Jul 23 2016 at 04:48)</a>:</h4>
<p>you mean transitioning to FluentPath?<br>
that's what I thought, but didn't really know both were required - and is that actually true at this point for invariants?<br>
the FHIR Spreadsheet Authoring Wiki page doesn't seem to reflect all of that guidance - and that threw me off</p>



<a name="153840717"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/task%2010075%20extension%20invariants/near/153840717" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/task.2010075.20extension.20invariants.html#153840717">(Jul 23 2016 at 04:50)</a>:</h4>
<p>can't say I'm particularly surprised that documentation lags behind - but it's good to find out</p>



<a name="153840744"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/task%2010075%20extension%20invariants/near/153840744" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/task.2010075.20extension.20invariants.html#153840744">(Jul 23 2016 at 22:38)</a>:</h4>
<p>is this resolved, now that I am generating the inherited constraints on Age etc?</p>



<a name="153840852"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/task%2010075%20extension%20invariants/near/153840852" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/task.2010075.20extension.20invariants.html#153840852">(Jul 25 2016 at 03:35)</a>:</h4>
<p>I suspect it is resolved, Grahame, but I haven't necessarily been able to  verify that yet</p>



<a name="153840867"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/task%2010075%20extension%20invariants/near/153840867" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/task.2010075.20extension.20invariants.html#153840867">(Jul 25 2016 at 04:27)</a>:</h4>
<p>ok</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
