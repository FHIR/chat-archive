---
layout: page
title: "FHIR Chat  · PR builds -- what is happening with the clock? · committers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179165-committers/index.html">committers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/PR.20builds.20--.20what.20is.20happening.20with.20the.20clock.3F.html">PR builds -- what is happening with the clock?</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="268615700"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/PR%20builds%20--%20what%20is%20happening%20with%20the%20clock%3F/near/268615700" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/PR.20builds.20--.20what.20is.20happening.20with.20the.20clock.3F.html#268615700">(Jan 19 2022 at 22:56)</a>:</h4>
<p>Taking <a href="https://github.com/HL7/fhir/pull/1597">https://github.com/HL7/fhir/pull/1597</a> as an examlpe, github shows:</p>
<p><a href="/user_uploads/10155/Tuqx4dulE2_iPXSgCYJwhZc2/image.png">image.png</a> </p>
<div class="message_inline_image"><a href="/user_uploads/10155/Tuqx4dulE2_iPXSgCYJwhZc2/image.png" title="image.png"><img src="/user_uploads/10155/Tuqx4dulE2_iPXSgCYJwhZc2/image.png"></a></div><p>and the Azure Pipelines detail page shows:</p>
<p><a href="/user_uploads/10155/EsEBHuCDAVmqv1xTaOitOaVi/image.png">image.png</a> </p>
<div class="message_inline_image"><a href="/user_uploads/10155/EsEBHuCDAVmqv1xTaOitOaVi/image.png" title="image.png"><img src="/user_uploads/10155/EsEBHuCDAVmqv1xTaOitOaVi/image.png"></a></div><p><span class="user-mention" data-user-id="248736">@Mark Iantorno</span> do you know what this means? The build seems to have completed (took 25min) but there's a <code>successNotification</code> step with a clock icon... so it seems like the checks aren't fully completed. Do you know what is going on here?</p>



<a name="268623874"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/PR%20builds%20--%20what%20is%20happening%20with%20the%20clock%3F/near/268623874" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/PR.20builds.20--.20what.20is.20happening.20with.20the.20clock.3F.html#268623874">(Jan 20 2022 at 00:22)</a>:</h4>
<p>PR builds seem... stuck overall. But maybe just trickling through; I can't tell with the permissions I have.</p>



<a name="268854928"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/PR%20builds%20--%20what%20is%20happening%20with%20the%20clock%3F/near/268854928" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/PR.20builds.20--.20what.20is.20happening.20with.20the.20clock.3F.html#268854928">(Jan 21 2022 at 15:08)</a>:</h4>
<p>Let me take a look</p>



<a name="268855042"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/PR%20builds%20--%20what%20is%20happening%20with%20the%20clock%3F/near/268855042" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/PR.20builds.20--.20what.20is.20happening.20with.20the.20clock.3F.html#268855042">(Jan 21 2022 at 15:09)</a>:</h4>
<p>Seems to have passed now? Maybe there was  a stall.</p>



<a name="268873359"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/PR%20builds%20--%20what%20is%20happening%20with%20the%20clock%3F/near/268873359" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/PR.20builds.20--.20what.20is.20happening.20with.20the.20clock.3F.html#268873359">(Jan 21 2022 at 17:18)</a>:</h4>
<p>Thanks. Next up <span class="user-mention" data-user-id="248736">@Mark Iantorno</span>  in our github branch protection settings we have:</p>
<p><a href="/user_uploads/10155/0LLKuyU5hrEa-yhbXwHisCGw/image.png">image.png</a> </p>
<div class="message_inline_image"><a href="/user_uploads/10155/0LLKuyU5hrEa-yhbXwHisCGw/image.png" title="image.png"><img src="/user_uploads/10155/0LLKuyU5hrEa-yhbXwHisCGw/image.png"></a></div><p>... meaning that branches don't need to be fully up to date before they can be merged. However, the Azure pipeline setup prevents a branch from being merged if it's not up to date. E.g. from <a href="https://github.com/HL7/fhir/pull/1604">https://github.com/HL7/fhir/pull/1604</a>:</p>
<p><a href="/user_uploads/10155/I8IOtQ-FZ7NZTKEOTky98OD0/image.png">image.png</a> </p>
<div class="message_inline_image"><a href="/user_uploads/10155/I8IOtQ-FZ7NZTKEOTky98OD0/image.png" title="image.png"><img src="/user_uploads/10155/I8IOtQ-FZ7NZTKEOTky98OD0/image.png"></a></div><p>This means we're faced with O(N^2) builds to merge N branches, which is especially painful during a "bug bash" like we're hosting this week. Do we want to update the Azure Pipeline so it's consistent with the GH Build protections, meaning that a PR could be merged even if some additional commits have landed in master since the PR branch was last built? Or do we want to just want to manually create PRs with multiple changes lumped together?</p>



<a name="268883086"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/PR%20builds%20--%20what%20is%20happening%20with%20the%20clock%3F/near/268883086" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/PR.20builds.20--.20what.20is.20happening.20with.20the.20clock.3F.html#268883086">(Jan 21 2022 at 18:26)</a>:</h4>
<p>Interesting -- looks like a bug in GH. I tried unchecking and rechecking this checkbox, and wound up in a spot where GH <em>does</em> now allow merging of stale (but CI'd) branches:</p>
<p><a href="/user_uploads/10155/WSb_G-yKQPZx3XeuTYDhWR-t/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/10155/WSb_G-yKQPZx3XeuTYDhWR-t/image.png" title="image.png"><img src="/user_uploads/10155/WSb_G-yKQPZx3XeuTYDhWR-t/image.png"></a></div>



<a name="268883337"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/PR%20builds%20--%20what%20is%20happening%20with%20the%20clock%3F/near/268883337" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/PR.20builds.20--.20what.20is.20happening.20with.20the.20clock.3F.html#268883337">(Jan 21 2022 at 18:28)</a>:</h4>
<p>This leaves open the question of what protections we actually <em>want</em>. Currently the "up to date before merging" requirement <em>is</em> set on <code>master</code> even though it's not set on <code>R4B</code>. I don't know whether that's intentional.</p>



<a name="268889842"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/PR%20builds%20--%20what%20is%20happening%20with%20the%20clock%3F/near/268889842" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/PR.20builds.20--.20what.20is.20happening.20with.20the.20clock.3F.html#268889842">(Jan 21 2022 at 19:13)</a>:</h4>
<p>Ah, R4B was always it's own monster in the way it was set up. I'd prefer to keep the requirement on Master. If there is a lot of work going on with rapid commits, it might be a good idea to create a <code>development</code> branch that everyone works off of, and can quickly iterate on, then once the changes are finalized, it can be merged into master</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
