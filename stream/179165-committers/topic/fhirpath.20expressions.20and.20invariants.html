---
layout: page
title: "FHIR Chat  · fhirpath expressions and invariants · committers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179165-committers/index.html">committers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/fhirpath.20expressions.20and.20invariants.html">fhirpath expressions and invariants</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153873938"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/fhirpath%20expressions%20and%20invariants/near/153873938" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/fhirpath.20expressions.20and.20invariants.html#153873938">(Feb 28 2017 at 04:15)</a>:</h4>
<p>Currently we are displaying the xpath expressions for invariants, are we planning to also display the fhirpath (that is in the back there)<br>
Note that there is an issue with the fhirpath expression in vital signs vs-1<br>
<a href="http://build.fhir.org/vitalsigns.html" target="_blank" title="http://build.fhir.org/vitalsigns.html">http://build.fhir.org/vitalsigns.html</a><br>
the fhirpath expression doesn't consider the casting of the type to datetime.</p>



<a name="153873939"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/fhirpath%20expressions%20and%20invariants/near/153873939" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/fhirpath.20expressions.20and.20invariants.html#153873939">(Feb 28 2017 at 04:18)</a>:</h4>
<p>The correct expression should have been (effective as dateTime).all(toString().length() &gt;= 8)<br>
(At least it works with the dotnet expression evaluator and does look right)</p>



<a name="153873940"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/fhirpath%20expressions%20and%20invariants/near/153873940" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/fhirpath.20expressions.20and.20invariants.html#153873940">(Feb 28 2017 at 04:19)</a>:</h4>
<p>This invariant expression fails on example observation-f004-erythrocyte(f004).xml</p>



<a name="153873941"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/fhirpath%20expressions%20and%20invariants/near/153873941" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/fhirpath.20expressions.20and.20invariants.html#153873941">(Feb 28 2017 at 04:26)</a>:</h4>
<p>($this as dateTime).toString().length() &gt;= 8<br>
Is probably more accurate (as the context is on the property, so can't cast around the name of the property)</p>



<a name="153873942"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/fhirpath%20expressions%20and%20invariants/near/153873942" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/fhirpath.20expressions.20and.20invariants.html#153873942">(Feb 28 2017 at 04:42)</a>:</h4>
<p>(Making this change then all examples pass this invariant too), but I still have issues with vs-4 in the vital signs profile and 22 of the examples</p>



<a name="153873943"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/fhirpath%20expressions%20and%20invariants/near/153873943" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/fhirpath.20expressions.20and.20invariants.html#153873943">(Feb 28 2017 at 04:55)</a>:</h4>
<p>Now that I've looked at the vs-4 more closely, and with the examples too, the xpath and fhirpath expressions are incorrect. The code should be 'vital-signs' not 'laboratory'</p>



<a name="153873944"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/fhirpath%20expressions%20and%20invariants/near/153873944" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/fhirpath.20expressions.20and.20invariants.html#153873944">(Feb 28 2017 at 05:03)</a>:</h4>
<p>Logged as tracker #12916</p>



<a name="153873946"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/fhirpath%20expressions%20and%20invariants/near/153873946" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/fhirpath.20expressions.20and.20invariants.html#153873946">(Feb 28 2017 at 05:10)</a>:</h4>
<p>umm we are supposed to displaying fhir paths not xpaths</p>



<a name="153873947"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/fhirpath%20expressions%20and%20invariants/near/153873947" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/fhirpath.20expressions.20and.20invariants.html#153873947">(Feb 28 2017 at 05:10)</a>:</h4>
<p>where are we displaying xpaths?</p>



<a name="153873948"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/fhirpath%20expressions%20and%20invariants/near/153873948" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/fhirpath.20expressions.20and.20invariants.html#153873948">(Feb 28 2017 at 05:11)</a>:</h4>
<p><a href="http://build.fhir.org/vitalsigns.html" target="_blank" title="http://build.fhir.org/vitalsigns.html">http://build.fhir.org/vitalsigns.html</a><br>
in the invariants section at the bottom</p>



<a name="153873949"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/fhirpath%20expressions%20and%20invariants/near/153873949" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/fhirpath.20expressions.20and.20invariants.html#153873949">(Feb 28 2017 at 05:13)</a>:</h4>
<p>k. will fix</p>



<a name="153873950"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/fhirpath%20expressions%20and%20invariants/near/153873950" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/fhirpath.20expressions.20and.20invariants.html#153873950">(Feb 28 2017 at 05:14)</a>:</h4>
<p>I'll have to look at why the invariants aren't running - they're supposed to be</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
