---
layout: page
title: "FHIR Chat  · Build Problem · committers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179165-committers/index.html">committers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/Build.20Problem.html">Build Problem</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="173251336"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/Build%20Problem/near/173251336" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/Build.20Problem.html#173251336">(Aug 14 2019 at 23:19)</a>:</h4>
<p><span class="user-mention" data-user-id="191315">@Josh Mandel</span> see <a href="https://build.fhir.org/ig/HL7/UTG/" target="_blank" title="https://build.fhir.org/ig/HL7/UTG/">https://build.fhir.org/ig/HL7/UTG/</a> - this failed to build - but it's not listed in <a href="https://fhir.github.io/auto-ig-builder/builds.html" target="_blank" title="https://fhir.github.io/auto-ig-builder/builds.html">https://fhir.github.io/auto-ig-builder/builds.html</a></p>



<a name="173251888"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/Build%20Problem/near/173251888" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/Build.20Problem.html#173251888">(Aug 14 2019 at 23:29)</a>:</h4>
<p>Did it trigger a notification here?</p>



<a name="173252186"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/Build%20Problem/near/173252186" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/Build.20Problem.html#173252186">(Aug 14 2019 at 23:34)</a>:</h4>
<p>looks like no</p>



<a name="173252297"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/Build%20Problem/near/173252297" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/Build.20Problem.html#173252297">(Aug 14 2019 at 23:36)</a>:</h4>
<p>it does have a webhook for <a href="https://us-central1-fhir-org-starter-project.cloudfunctions.net/ig-commit-trigger" target="_blank" title="https://us-central1-fhir-org-starter-project.cloudfunctions.net/ig-commit-trigger">https://us-central1-fhir-org-starter-project.cloudfunctions.net/ig-commit-trigger</a>  (push)</p>



<a name="173253085"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/Build%20Problem/near/173253085" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/Build.20Problem.html#173253085">(Aug 14 2019 at 23:49)</a>:</h4>
<p>Okay -- there are certainly some failure states that might prevent a message from coming through. I will plan to take a look at this tomorrow unless there is urgency?</p>



<a name="173254003"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/Build%20Problem/near/173254003" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/Build.20Problem.html#173254003">(Aug 15 2019 at 00:06)</a>:</h4>
<p>(in any it looks like the build was triggered and it failed because the publish-box was missing.)</p>



<a name="173259608"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/Build%20Problem/near/173259608" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/Build.20Problem.html#173259608">(Aug 15 2019 at 02:10)</a>:</h4>
<p>yes that will be why. But it should go into the list of IGs, right?</p>



<a name="173311568"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/Build%20Problem/near/173311568" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/Build.20Problem.html#173311568">(Aug 15 2019 at 18:16)</a>:</h4>
<p>Yes -- actually UTG was showing up as failed in <a href="https://fhir.github.io/auto-ig-builder/builds.html" target="_blank" title="https://fhir.github.io/auto-ig-builder/builds.html">https://fhir.github.io/auto-ig-builder/builds.html</a> but it was put at the bottom as "unknown date of failure". There are two issues: first is that no <code>qa.json</code> file is generated; and second is my logic for parsing dates out of <code>build.log</code> was wrong. I fixed the date parsing there, so UTG appears in the right spot. (I'm still unclear on why no qa.json is generated though.) </p>
<p><a href="/user_uploads/10155/i2xJAVS7zC2TdUCgKLcdrXxz/pasted_image.png" target="_blank" title="pasted_image.png">pasted image</a></p>
<div class="message_inline_image"><a href="/user_uploads/10155/i2xJAVS7zC2TdUCgKLcdrXxz/pasted_image.png" target="_blank" title="pasted image"><img src="/user_uploads/10155/i2xJAVS7zC2TdUCgKLcdrXxz/pasted_image.png"></a></div>



<a name="173313366"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/Build%20Problem/near/173313366" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/Build.20Problem.html#173313366">(Aug 15 2019 at 18:40)</a>:</h4>
<p>thx. I'll investigate the qa.json issue</p>



<a name="173314015"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/Build%20Problem/near/173314015" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/Build.20Problem.html#173314015">(Aug 15 2019 at 18:48)</a>:</h4>
<p>As far as I can see, this is the issue with the UTG build:</p>
<div class="codehilite"><pre><span></span>Exception in thread &quot;main&quot; java.lang.Error: The auto-build infrastructure does not publish IGs that contain HTML pages without the publish-box present. For further information, see note at http://wiki.hl7.org/index.php?title=FHIR_Implementation_Guide_Publishing_Requirements#HL7_HTML_Standards_considerations
</pre></div>


<p>Ted and I discussed this yesterday.  Does UTG need to somehow be an exception to the publish box requirement, as it's not a typical IG?  Or does that need to be updated in UTG? <span class="user-mention" data-user-id="191316">@Grahame Grieve</span></p>



<a name="173314963"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/Build%20Problem/near/173314963" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/Build.20Problem.html#173314963">(Aug 15 2019 at 18:59)</a>:</h4>
<p>no it's very much not an exception to the version handling requirement</p>



<a name="173314973"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/Build%20Problem/near/173314973" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/Build.20Problem.html#173314973">(Aug 15 2019 at 18:59)</a>:</h4>
<p>I committed a fix for this</p>



<a name="173314977"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/Build%20Problem/near/173314977" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/Build.20Problem.html#173314977">(Aug 15 2019 at 18:59)</a>:</h4>
<p>(to UTG)</p>



<a name="173316043"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/Build%20Problem/near/173316043" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/Build.20Problem.html#173316043">(Aug 15 2019 at 19:11)</a>:</h4>
<p>sounds good</p>



<a name="187594182"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/Build%20Problem/near/187594182" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/Build.20Problem.html#187594182">(Feb 06 2020 at 22:13)</a>:</h4>
<p><span class="user-mention" data-user-id="191315">@Josh Mandel</span> the current failing build is caused by a change in <a href="https://build.fhir.org/ig/qas.json" target="_blank" title="https://build.fhir.org/ig/qas.json">https://build.fhir.org/ig/qas.json</a>:</p>
<p>it used to say     </p>
<p><code>"repo": "nrdavis1/HSPCFHIRtest"</code></p>
<p>But it's changed to </p>
<p><code>    "repo": "nrdavis1/HSPCFHIRtest/branches/master/demo/qa.json"</code></p>



<a name="187594187"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/Build%20Problem/near/187594187" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/Build.20Problem.html#187594187">(Feb 06 2020 at 22:13)</a>:</h4>
<p>at least, i think that's what it used to say</p>



<a name="187594272"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/Build%20Problem/near/187594272" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/Build.20Problem.html#187594272">(Feb 06 2020 at 22:14)</a>:</h4>
<p>Ooh, indeed. So, this is a change I made to support branches other than master -- didn't realize you have a dependency on qas.json!</p>



<a name="187594310"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/Build%20Problem/near/187594310" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/Build.20Problem.html#187594310">(Feb 06 2020 at 22:15)</a>:</h4>
<p>So: I can change this back, or we can update the build. I'd prefer to keep the full paths, because it opens up the possibiliy for doing more downstream. But let me know.</p>



<a name="187594345"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/Build%20Problem/near/187594345" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/Build.20Problem.html#187594345">(Feb 06 2020 at 22:15)</a>:</h4>
<p>hmm</p>



<a name="187594397"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/Build%20Problem/near/187594397" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/Build.20Problem.html#187594397">(Feb 06 2020 at 22:16)</a>:</h4>
<p>can you explain how it supports branches other than master?</p>



<a name="187594417"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/Build%20Problem/near/187594417" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/Build.20Problem.html#187594417">(Feb 06 2020 at 22:16)</a>:</h4>
<p>it's the 'qa.json' bit that's the real problem.</p>



<a name="187594423"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/Build%20Problem/near/187594423" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/Build.20Problem.html#187594423">(Feb 06 2020 at 22:16)</a>:</h4>
<p>The idea is that each qa.json file identifies which org, repo, and branch it's associated with.</p>



<a name="187594447"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/Build%20Problem/near/187594447" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/Build.20Problem.html#187594447">(Feb 06 2020 at 22:17)</a>:</h4>
<p>Like, you'd be okay with <code>"nrdavis1/HSPCFHIRtest/branches/master/demo"</code> or <code>"nrdavis1/HSPCFHIRtest/branches/master/"</code> ?</p>



<a name="187594451"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/Build%20Problem/near/187594451" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/Build.20Problem.html#187594451">(Feb 06 2020 at 22:17)</a>:</h4>
<p>hmm. ok. so in that URL there, what does 'demo' mean?</p>



<a name="187594486"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/Build%20Problem/near/187594486" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/Build.20Problem.html#187594486">(Feb 06 2020 at 22:17)</a>:</h4>
<p>I'd be ok with anything if I know what it means and how I have to process it</p>



<a name="187594487"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/Build%20Problem/near/187594487" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/Build.20Problem.html#187594487">(Feb 06 2020 at 22:17)</a>:</h4>
<p>Um, I'm not sure. <code>demo</code> is a directory inside the output, where qa.json resides.</p>



<a name="187594511"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/Build%20Problem/near/187594511" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/Build.20Problem.html#187594511">(Feb 06 2020 at 22:18)</a>:</h4>
<p>but I've been ignoring the whole branching thing when processing the list... I'm not sure what the right behavior is</p>



<a name="187594552"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/Build%20Problem/near/187594552" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/Build.20Problem.html#187594552">(Feb 06 2020 at 22:18)</a>:</h4>
<p>Looks like maybe a mistake: <a href="https://github.com/nrdavis1/HSPCFHIRtest/blob/master/demo/qa.json" target="_blank" title="https://github.com/nrdavis1/HSPCFHIRtest/blob/master/demo/qa.json">https://github.com/nrdavis1/HSPCFHIRtest/blob/master/demo/qa.json</a> is checked into github!</p>



<a name="187594624"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/Build%20Problem/near/187594624" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/Build.20Problem.html#187594624">(Feb 06 2020 at 22:19)</a>:</h4>
<p>So, this gets at the question of how <code>qas.json</code> is created in the first place: by scanning the directory tree for any <code>qa.json</code> files. But I can filter that further, to make sure I only look at qa.json files in the root of the output of a successful build.</p>



<a name="187594634"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/Build%20Problem/near/187594634" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/Build.20Problem.html#187594634">(Feb 06 2020 at 22:19)</a>:</h4>
<p>so you're just finding a qa.json somewhere ? the other ones:</p>
<p><code>cqframework/opioid-cds-r4/branches/Recommendations_Test/qa.json</code></p>
<p>that makes sense</p>



<a name="187594651"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/Build%20Problem/near/187594651" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/Build.20Problem.html#187594651">(Feb 06 2020 at 22:19)</a>:</h4>
<p>qa.json that I produce will always and only be in output</p>



<a name="187594749"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/Build%20Problem/near/187594749" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/Build.20Problem.html#187594749">(Feb 06 2020 at 22:20)</a>:</h4>
<p>Right, that one in cqframework is fine. OK. so two follow-ups:</p>
<p>1) I'll update my <code>find</code> command to be more specific, and <br>
2) Maybe the author of <a href="https://github.com/nrdavis1/HSPCFHIRtest/blob/master/demo/qa.json" target="_blank" title="https://github.com/nrdavis1/HSPCFHIRtest/blob/master/demo/qa.json">https://github.com/nrdavis1/HSPCFHIRtest/blob/master/demo/qa.json</a> wants to clean up that repo (<span class="user-mention" data-user-id="191411">@Nathan Davis</span>  I think) -- but obviously we should be robust to stuff like this.</p>



<a name="187595212"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/Build%20Problem/near/187595212" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/Build.20Problem.html#187595212">(Feb 06 2020 at 22:26)</a>:</h4>
<p>On (1), deploying a fix now. Will then trigger a rebuild of <code>qas.json</code></p>



<a name="187595633"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/Build%20Problem/near/187595633" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/Build.20Problem.html#187595633">(Feb 06 2020 at 22:31)</a>:</h4>
<p>OK, done.</p>



<a name="187595695"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/Build%20Problem/near/187595695" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/Build.20Problem.html#187595695">(Feb 06 2020 at 22:32)</a>:</h4>
<p>So you'll still see outputs like <code>"repo": "HL7/cimi-vital-signs/branches/master/qa.json"</code>, but never to sub-paths like <code>demo</code>.</p>



<a name="187595725"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/Build%20Problem/near/187595725" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/Build.20Problem.html#187595725">(Feb 06 2020 at 22:32)</a>:</h4>
<p>If you'd like, I can also strip the final path segment off of the output.</p>



<a name="187596040"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/Build%20Problem/near/187596040" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/Build.20Problem.html#187596040">(Feb 06 2020 at 22:36)</a>:</h4>
<p>no it's fine. I'm doing a release shortly that fixes it</p>



<a name="187596248"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/Build%20Problem/near/187596248" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/Build.20Problem.html#187596248">(Feb 06 2020 at 22:39)</a>:</h4>
<p>Thanks, and sorry for the change without notice! (These paths were previosuly all kinds of broken, with random truncations on branches other than master.)</p>



<a name="187597647"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/Build%20Problem/near/187597647" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/Build.20Problem.html#187597647">(Feb 06 2020 at 22:59)</a>:</h4>
<p><span class="user-mention" data-user-id="191315">@Josh Mandel</span> and <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> -- I haven't looked into it yet, so feel free to disregard if you'd like.  But... SUSHI's ability to resolve <code>#current</code> versions of IGs just broke.  And I think it resolves from the build server.  So I'm guessing that maybe some of those layout changes affected our IG resolution code for <code>#current</code> versions.  And I expect that if others (Forge?) had similar code, it might affect them too.</p>



<a name="187597678"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/Build%20Problem/near/187597678" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/Build.20Problem.html#187597678">(Feb 06 2020 at 22:59)</a>:</h4>
<p>But right now that is a hypothesis.  I can let you know when I've looked into it and have some proof one way or another.</p>



<a name="187598474"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/Build%20Problem/near/187598474" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/Build.20Problem.html#187598474">(Feb 06 2020 at 23:11)</a>:</h4>
<p>Thanks for the heads up -- please let me know what you find. The joys of iteratively discovering that an initially single-purpose file (designed to fuel the build dashboard) has become a dependency for a bunch of other tools ;-)</p>



<a name="187598485"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/Build%20Problem/near/187598485" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/Build.20Problem.html#187598485">(Feb 06 2020 at 23:11)</a>:</h4>
<p>Sorry for any trouble with this.</p>



<a name="187599780"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/Build%20Problem/near/187599780" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/Build.20Problem.html#187599780">(Feb 06 2020 at 23:32)</a>:</h4>
<blockquote>
<p>SUSHI's ability to resolve #current versions of IGs just broke</p>
</blockquote>
<p>I expect that's what we're talking about in this thread</p>



<a name="187606408"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/Build%20Problem/near/187606408" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/Build.20Problem.html#187606408">(Feb 07 2020 at 01:45)</a>:</h4>
<p><span class="user-mention" data-user-id="191315">@Josh Mandel</span> hate to bug you, but this thread was kicked off when <span class="user-mention" data-user-id="192993">@Peter Williams</span> snomed ig didn't build... but it is not listed in the IG page at all right now.</p>



<a name="187607954"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/Build%20Problem/near/187607954" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/Build.20Problem.html#187607954">(Feb 07 2020 at 02:25)</a>:</h4>
<p>OK, so I can confirm that it is the change to the <code>repo</code> property in the <code>qas.json</code> that is causing the issue for SUSHI.  We're actually following the exact formula that Grahame gave us for locating the current package, so it's no wonder we both were affected. ;-)</p>
<blockquote>
<p>how it works is that you access <a href="https://build.fhir.org/ig/qas.json" target="_blank" title="https://build.fhir.org/ig/qas.json">https://build.fhir.org/ig/qas.json</a>. then, you sort that by date, and then iterate that json array from most recent to oldest to find either the package-id or canonical url that you are looking for the #current package for, and then fetch the package from <a href="https://build.fhir.org/ig/[repo]/package.tgz" target="_blank" title="https://build.fhir.org/ig/[repo]/package.tgz">https://build.fhir.org/ig/[repo]/package.tgz</a></p>
</blockquote>
<p><a href="#narrow/stream/179239-tooling/topic/NPM.20package.20system/near/183582585" title="#narrow/stream/179239-tooling/topic/NPM.20package.20system/near/183582585">https://chat.fhir.org/#narrow/stream/179239-tooling/topic/NPM.20package.20system/near/183582585</a></p>



<a name="187608193"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/Build%20Problem/near/187608193" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/Build.20Problem.html#187608193">(Feb 07 2020 at 02:30)</a>:</h4>
<p>So I assume the fix is just to replace the trailing <code>/qa.json</code> with <code>/package.tgz</code>...  Should be easy enough.</p>



<a name="187610137"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/Build%20Problem/near/187610137" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/Build.20Problem.html#187610137">(Feb 07 2020 at 03:20)</a>:</h4>
<p>well.... I changed my pproach to just use the first 2 folders - org/repo, and drop all the branch information - I'm not sure when/whether I want the branch or the root. For the moment, I'm using the root only</p>



<a name="187610385"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/Build%20Problem/near/187610385" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/Build.20Problem.html#187610385">(Feb 07 2020 at 03:27)</a>:</h4>
<p>Ah, OK.  Then we'll match your approach.  It probably wouldn't be good if we used a different approach than the publisher.  Thanks for the heads up.  But in that case, sorting by date probably doesn't matter, right?  I mean, I expect the the first two folders (org/repo) will probably be the same for all of them?  We'll still do the sort just in case though.</p>



<a name="187610501"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/Build%20Problem/near/187610501" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/Build.20Problem.html#187610501">(Feb 07 2020 at 03:31)</a>:</h4>
<p>yes I still sort by date too</p>



<a name="187612201"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/Build%20Problem/near/187612201" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ward Weistra <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/Build.20Problem.html#187612201">(Feb 07 2020 at 04:16)</a>:</h4>
<p><span class="user-mention" data-user-id="191469">@Chris Moesel</span> Thanks for the Forge ping, but we haven't built in logic yet that would try to find (#dev or) #current packages on the build server. We'll likely expose those versions from Simplifier too, so we'll need to think about generalizing that package logic anyway.</p>



<a name="187633685"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/Build%20Problem/near/187633685" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/Build.20Problem.html#187633685">(Feb 07 2020 at 12:12)</a>:</h4>
<blockquote>
<p><span class="user-mention silent" data-user-id="191315">Josh Mandel</span> hate to bug you, but this thread was kicked off when <span class="user-mention silent" data-user-id="192993">Peter Williams</span> snomed ig didn't build... but it is not listed in the IG page at all right now.</p>
</blockquote>
<p>No bother, but I do see it there now. In a success state from 10 hours ago. Is the issue that it is was not showing up when it fails?</p>



<a name="187681325"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/Build%20Problem/near/187681325" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/Build.20Problem.html#187681325">(Feb 07 2020 at 21:20)</a>:</h4>
<p>I think so</p>



<a name="187681774"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/Build%20Problem/near/187681774" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/Build.20Problem.html#187681774">(Feb 07 2020 at 21:25)</a>:</h4>
<p>hmm, OK. Right now I see other failed builds, so it must be something specific to the snomed IG. Maybe save a copy of qas.json and builds.json if this happens again?</p>



<a name="187681878"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/Build%20Problem/near/187681878" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/Build.20Problem.html#187681878">(Feb 07 2020 at 21:27)</a>:</h4>
<p>ok</p>



<a name="187860145"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/Build%20Problem/near/187860145" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nathan Davis <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/Build.20Problem.html#187860145">(Feb 10 2020 at 21:28)</a>:</h4>
<p>I've cleaned up (deleted actually) my repo that was mentioned last Friday. (<a href="https://github/nrdavis1/HSPCFHIRtest" target="_blank" title="https://github/nrdavis1/HSPCFHIRtest">https://github/nrdavis1/HSPCFHIRtest</a>).  I have a question tho.  Why was this repo part of whatever process you were running that flagged it as an issue?  It wasn't an HL7 official repo.</p>



<a name="187866556"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/Build%20Problem/near/187866556" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/Build.20Problem.html#187866556">(Feb 10 2020 at 22:40)</a>:</h4>
<p>we were doing maintenance on the ci-build subsystem, and yours uses the ci-build.</p>



<a name="187866802"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/Build%20Problem/near/187866802" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/Build.20Problem.html#187866802">(Feb 10 2020 at 22:44)</a>:</h4>
<p>(as it should)</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
