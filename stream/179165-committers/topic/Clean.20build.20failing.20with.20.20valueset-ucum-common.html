---
layout: page
title: "FHIR Chat  · Clean build failing with  valueset-ucum-common · committers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179165-committers/index.html">committers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/Clean.20build.20failing.20with.20.20valueset-ucum-common.html">Clean build failing with  valueset-ucum-common</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="258946873"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/Clean%20build%20failing%20with%20%20valueset-ucum-common/near/258946873" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rik Smithies <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/Clean.20build.20failing.20with.20.20valueset-ucum-common.html#258946873">(Oct 25 2021 at 11:41)</a>:</h4>
<p>For me, on 2 machines, a clean newly downloaded build is failing when processing valueset-ucum-common:</p>
<p>Error on line 14<br>
  XTTE0570: An empty sequence is not allowed as the value of variable $groups<br>
  in variable groups<br>
Error<br>
  SXXP0003: Error reported by XML parser: Premature end of file.<br>
This was a Full Build                                                       2.45 163sec 3270MB<br>
FHIR build failure @ Mon, Oct 25, 2021 11:42+0100                          1.338 164sec 3270MB<br>
java.lang.Exception: processing valueset-ucum-commonError: processing valueset-ucum-common<br>
        at org.hl7.fhir.tools.publisher.Publisher.produceResource2(Publisher.java:3985)<br>
        at org.hl7.fhir.tools.publisher.Publisher.loadValueSets2(Publisher.java:1280)<br>
        at org.hl7.fhir.tools.publisher.Publisher.produceSpec(Publisher.java:2344)<br>
        at org.hl7.fhir.tools.publisher.Publisher.produceSpecification(Publisher.java:2185)<br>
        at org.hl7.fhir.tools.publisher.Publisher.execute(Publisher.java:618)<br>
        at org.hl7.fhir.tools.publisher.Publisher.main(Publisher.java:478)<br>
Caused by: org.hl7.fhir.exceptions.FHIRException: Unable to parse D:\work\HL7\FHIR\gittrunk\fhirclean\publish\valueset-ucum-common.xml: null<br>
        at org.hl7.fhir.tools.publisher.Publisher.processExample(Publisher.java:4424)<br>
        at org.hl7.fhir.tools.publisher.Publisher.produceResource2(Publisher.java:3983)<br>
        ... 5 more<br>
Caused by: java.lang.NullPointerException<br>
        at org.hl7.fhir.r5.context.BaseWorkerContext.validateCodeBatch(BaseWorkerContext.java:833)<br>
        at org.hl7.fhir.r5.renderers.ValueSetRenderer.getConceptsForCodes(ValueSetRenderer.java:1009)<br>
        at org.hl7.fhir.r5.renderers.ValueSetRenderer.genInclude(ValueSetRenderer.java:825)<br>
        at org.hl7.fhir.r5.renderers.ValueSetRenderer.generateComposition(ValueSetRenderer.java:748)<br>
        at org.hl7.fhir.r5.renderers.ValueSetRenderer.render(ValueSetRenderer.java:84)<br>
        at org.hl7.fhir.r5.renderers.ValueSetRenderer.render(ValueSetRenderer.java:73)<br>
        at org.hl7.fhir.r5.renderers.ResourceRenderer.render(ResourceRenderer.java:74)<br>
        at org.hl7.fhir.tools.publisher.Publisher.addToResourceFeed(Publisher.java:4774)<br>
        at org.hl7.fhir.tools.publisher.Publisher.processExample(Publisher.java:4418)<br>
        ... 6 more</p>



<a name="259001633"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/Clean%20build%20failing%20with%20%20valueset-ucum-common/near/259001633" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/Clean.20build.20failing.20with.20.20valueset-ucum-common.html#259001633">(Oct 25 2021 at 18:36)</a>:</h4>
<p>r5 or r4b?</p>



<a name="259017178"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/Clean%20build%20failing%20with%20%20valueset-ucum-common/near/259017178" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rik Smithies <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/Clean.20build.20failing.20with.20.20valueset-ucum-common.html#259017178">(Oct 25 2021 at 20:37)</a>:</h4>
<p>R5 main build</p>



<a name="259479986"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/Clean%20build%20failing%20with%20%20valueset-ucum-common/near/259479986" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/Clean.20build.20failing.20with.20.20valueset-ucum-common.html#259479986">(Oct 29 2021 at 03:56)</a>:</h4>
<p>I can't reproduce this?</p>



<a name="259537426"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/Clean%20build%20failing%20with%20%20valueset-ucum-common/near/259537426" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rik Smithies <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/Clean.20build.20failing.20with.20.20valueset-ucum-common.html#259537426">(Oct 29 2021 at 15:05)</a>:</h4>
<p>I have run another clean downloaded build and it got stuck at:<br>
[main] DEBUG org.hl7.fhir.convertors.context.VersionConvertorContext - org.hl7.fhir.convert<br>
ors.conv30_50.VersionConvertor_30_50@76cc7585<br>
for 11 hours. </p>
<p>Killed it and and did a "publish clean". </p>
<p>It then failed with ERROR @ TerminologyCapabilities.url (line 0, col0): terminologycapabilities-example:: TerminologyCapabilities.url: UUIDs must be valid (src = InstanceValidator)<br>
This was a Full Build                                                      3.442 2340sec 1632MB<br>
FHIR build failure @ Fri, Oct 29, 2021 13:47+0100                          2.737 2343sec 1632MB<br>
Error: Resource Examples failed instance validation<br>
org.hl7.fhir.tools.publisher.ExampleInspector$EValidationFailed: Resource Examples failed instance validation<br>
        at org.hl7.fhir.tools.publisher.ExampleInspector.summarise(ExampleInspector.java:421)<br>
        at org.hl7.fhir.tools.publisher.Publisher.validationProcess(Publisher.java:5740)<br>
        at org.hl7.fhir.tools.publisher.Publisher.execute(Publisher.java:623)<br>
        at org.hl7.fhir.tools.publisher.Publisher.main(Publisher.java:478)</p>
<blockquote>
<p>Task :publish FAILED</p>
</blockquote>
<p>so that is different but still a failure on a clean build. This is the 4th time I have downloaded the source clean. Is it just me?</p>



<a name="259549784"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/Clean%20build%20failing%20with%20%20valueset-ucum-common/near/259549784" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vassil Peytchev <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/Clean.20build.20failing.20with.20.20valueset-ucum-common.html#259549784">(Oct 29 2021 at 16:29)</a>:</h4>
<p>What is a "publish clean"? I think the proper sequence is<br>
<code>.\clean.bat</code> or <code>./clean.sh</code><br>
followed by<br>
<code>.\publish.bat</code> or <code>./publish.sh</code></p>
<p>Is that what you are referring to?</p>



<a name="259566193"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/Clean%20build%20failing%20with%20%20valueset-ucum-common/near/259566193" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/Clean.20build.20failing.20with.20.20valueset-ucum-common.html#259566193">(Oct 29 2021 at 18:36)</a>:</h4>
<p>I can't get a clean build on R5 because of NDC issues - see thread in <a class="stream" data-stream-id="179249" href="/#narrow/stream/179249-Medication">#Medication</a></p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
