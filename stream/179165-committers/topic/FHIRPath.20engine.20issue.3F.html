---
layout: page
title: "FHIR Chat  · FHIRPath engine issue? · committers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179165-committers/index.html">committers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/FHIRPath.20engine.20issue.3F.html">FHIRPath engine issue?</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153870731"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/FHIRPath%20engine%20issue%3F/near/153870731" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michelle (Moseman) Miller <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/FHIRPath.20engine.20issue.3F.html#153870731">(Feb 08 2017 at 14:27)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> ,  I'm trying to apply a new invariant for CareTeam, <a href="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=12647" target="_blank" title="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=12647">GF#12647</a>, but after working with <span class="user-mention" data-user-id="191359">@Bryn Rhodes</span> , he suggested I log <a href="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=12707" target="_blank" title="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=12707">GF#12707</a> to investigate the FHIRPath engine.  The issue is that the (local) build chokes on an example, <a href="http://build.fhir.org/careteam-example.xml.html" target="_blank" title="http://build.fhir.org/careteam-example.xml.html">http://build.fhir.org/careteam-example.xml.html</a>, that should be fine.</p>
<p>FYI, <span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> , the Request pattern has a very similar invariant to what I'm trying to do with <a href="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=12647" target="_blank" title="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=12647">GF#12647</a>. </p>
<p>Request pattern invariant expression:  (agent is Practitioner) or (agent is Device) or onBehalfOf.exists().not()</p>
<p>CareTeam invariant expression: (member is Practitioner) or onBehalfOf.exists().not()</p>
<p>The exact build error is:  <br>
     [java] ERROR @ CareTeam.participant[2] (line 0, col0) careteam-example:: CareTeam.participant[2]: onBehalfOf can only be specified if member is practitioner [(member is Practitioner) or onBehalfOf.exists().not()] (src = InstanceValidator)<br>
      [java] ERROR @ CareTeam.participant[2] careteam-example:: CareTeam.participant[2]: onBehalfOf can only be specified if member is practitioner [(member is Practitioner) or onBehalfOf.exists().not()] (src = InstanceValidator)</p>
<p>It seems like the issue is related to the "member is Practitioner" part and with Bryn's help, I've tried a few other variations like "member.resolve() is Practitioner" and "member.resolve().is(Practitioner)" with no luck.</p>
<p>Any other suggestions?</p>



<a name="153870813"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/FHIRPath%20engine%20issue%3F/near/153870813" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/FHIRPath.20engine.20issue.3F.html#153870813">(Feb 09 2017 at 04:33)</a>:</h4>
<p>definitely need the .resolve() - but I'm not sure what the actual error you are getting is?</p>



<a name="153870840"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/FHIRPath%20engine%20issue%3F/near/153870840" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michelle (Moseman) Miller <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/FHIRPath.20engine.20issue.3F.html#153870840">(Feb 09 2017 at 11:13)</a>:</h4>
<p>The error I saw after building is below, but was not very descriptive.  Just seems like it thinks my example, <a href="http://build.fhir.org/careteam-example.xml.html" target="_blank" title="http://build.fhir.org/careteam-example.xml.html">http://build.fhir.org/careteam-example.xml.html</a>, violates the invariant.</p>
<div class="codehilite"><pre> [java] ERROR @ CareTeam.participant[2] (line 0, col0) careteam-example:: CareTeam.participant[2]: onBehalfOf can only be specified if member is practitioner [(member is Practitioner) or onBehalfOf.exists().not()] (src = InstanceValidator)
 [java] ERROR @ CareTeam.participant[2] careteam-example:: CareTeam.participant[2]: onBehalfOf can only be specified if member is practitioner [(member is Practitioner) or onBehalfOf.exists().not()] (src = InstanceValidator)
</pre></div>



<a name="153870841"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/FHIRPath%20engine%20issue%3F/near/153870841" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michelle (Moseman) Miller <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/FHIRPath.20engine.20issue.3F.html#153870841">(Feb 09 2017 at 11:16)</a>:</h4>
<p>Same type of error when I use   (onBehalfOf.exists()).not() or (member.resolve() is Practitioner)</p>
<p>[java] careteam-example:: CareTeam.participant[2]: CareTeam.participant.onBehalfOf can only be populated when CareTeam.participant.member is a Practitioner [(onBehalfOf.exists()).not() or (member.resolve() is Practitioner)]<br>
 [java] careteam-example:: CareTeam.participant[2]: CareTeam.participant.onBehalfOf can only be populated when CareTeam.participant.member is a Practitioner [(onBehalfOf.exists()).not() or (member.resolve() is Practitioner)]</p>



<a name="153870843"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/FHIRPath%20engine%20issue%3F/near/153870843" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/FHIRPath.20engine.20issue.3F.html#153870843">(Feb 09 2017 at 11:25)</a>:</h4>
<p>hmm. I'm going to have to debug this</p>



<a name="153870919"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/FHIRPath%20engine%20issue%3F/near/153870919" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/FHIRPath.20engine.20issue.3F.html#153870919">(Feb 09 2017 at 20:27)</a>:</h4>
<p>fixed</p>



<a name="153870923"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179165-committers/topic/FHIRPath%20engine%20issue%3F/near/153870923" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michelle (Moseman) Miller <a href="https://fhir.github.io/chat-archive/stream/179165-committers/topic/FHIRPath.20engine.20issue.3F.html#153870923">(Feb 09 2017 at 20:50)</a>:</h4>
<p>thanks!!</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
