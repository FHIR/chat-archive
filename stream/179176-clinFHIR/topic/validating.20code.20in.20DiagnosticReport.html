---
layout: page
title: "FHIR Chat  · validating code in DiagnosticReport · clinFHIR"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179176-clinFHIR/index.html">clinFHIR</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179176-clinFHIR/topic/validating.20code.20in.20DiagnosticReport.html">validating code in DiagnosticReport</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153918512"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179176-clinFHIR/topic/validating%20code%20in%20DiagnosticReport/near/153918512" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a>  Bob Milius <a href="https://fhir.github.io/chat-archive/stream/179176-clinFHIR/topic/validating.20code.20in.20DiagnosticReport.html#153918512">(Nov 09 2017 at 16:17)</a>:</h4>
<p>I'm getting a validation error in ClinFHIR when using a valueset in code in DiagnosticReport. The DiagnostReport spec says code is  "Name/Code for this diagnostic report. LOINC Diagnostic Report Codes (Preferred)" and the link points to a valueset (<a href="https://www.hl7.org/fhir/valueset-report-codes.html" target="_blank" title="https://www.hl7.org/fhir/valueset-report-codes.html">https://www.hl7.org/fhir/valueset-report-codes.html</a>). Any suggestions?</p>



<a name="153918552"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179176-clinFHIR/topic/validating%20code%20in%20DiagnosticReport/near/153918552" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Hay <a href="https://fhir.github.io/chat-archive/stream/179176-clinFHIR/topic/validating.20code.20in.20DiagnosticReport.html#153918552">(Nov 09 2017 at 18:28)</a>:</h4>
<p>Hi Bob - I presume you get this when you click 'validate'? Which server are you using? can you copy/paste the error report? Thanks...</p>



<a name="153918613"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179176-clinFHIR/topic/validating%20code%20in%20DiagnosticReport/near/153918613" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a>  Bob Milius <a href="https://fhir.github.io/chat-archive/stream/179176-clinFHIR/topic/validating.20code.20in.20DiagnosticReport.html#153918613">(Nov 09 2017 at 20:41)</a>:</h4>
<p><span class="user-mention" data-user-id="191321">@David Hay</span> here's the resource instance from the clinfhir view: </p>
<div class="codehilite"><pre><span></span>{
  &quot;status&quot;: &quot;final&quot;,
  &quot;category&quot;: {
    &quot;coding&quot;: {
      &quot;code&quot;: &quot;GE&quot;,
      &quot;system&quot;: &quot;http://hl7.org/fhir/ValueSet/diagnostic-service-sections&quot;,
      &quot;display&quot;: &quot;Genetics&quot;
    }
  },
  &quot;code&quot;: {
    &quot;coding&quot;: {
      &quot;code&quot;: &quot;13303-3&quot;,
      &quot;system&quot;: &quot;http://loinc.org&quot;,
      &quot;display&quot;: &quot;HLA-A+B+C (class I) [Type]&quot;
    }
  },
  &quot;resourceType&quot;: &quot;DiagnosticReport&quot;,
  &quot;effectiveDateTime&quot;: &quot;2017-11-08&quot;,
  &quot;subject&quot;: {
    &quot;reference&quot;: &quot;urn:uuid:a4efdb30-c5c2-4e3a-aa98-4346e707a5e2&quot;
  },
  &quot;id&quot;: &quot;urn:uuid:89a93f0f-9502-4549-af1b-4bbc7a592b98&quot;
}```
</pre></div>



<a name="153918614"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179176-clinFHIR/topic/validating%20code%20in%20DiagnosticReport/near/153918614" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a>  Bob Milius <a href="https://fhir.github.io/chat-archive/stream/179176-clinFHIR/topic/validating.20code.20in.20DiagnosticReport.html#153918614">(Nov 09 2017 at 20:43)</a>:</h4>
<p><span class="user-mention" data-user-id="191321">@David Hay</span> and here's the error msg: </p>
<div class="codehilite"><pre><span></span>  &quot;resourceType&quot;: &quot;OperationOutcome&quot;,
  &quot;text&quot;: {
    &quot;status&quot;: &quot;generated&quot;,
    &quot;div&quot;: &quot;&lt;div xmlns=\&quot;http://www.w3.org/1999/xhtml\&quot;&gt;&lt;h1&gt;Operation Outcome&lt;/h1&gt;&lt;table border=\&quot;0\&quot;&gt;&lt;tr&gt;&lt;td style=\&quot;font-weight: bold;\&quot;&gt;ERROR&lt;/td&gt;&lt;td&gt;[Parameters.parameter.resource.category.coding]&lt;/td&gt;&lt;td&gt;&lt;pre&gt;The Coding references a value set, not a code system (&amp;quot;http://hl7.org/fhir/ValueSet/diagnostic-service-sections&amp;quot;)&lt;/pre&gt;&lt;/td&gt;\n\t\t\t\t\t\n\t\t\t\t\n\t\t\t&lt;/tr&gt;\n\t\t\t&lt;tr&gt;\n\t\t\t\t&lt;td style=\&quot;font-weight: bold;\&quot;&gt;ERROR&lt;/td&gt;\n\t\t\t\t&lt;td&gt;[Parameters.parameter.resource.category.coding]&lt;/td&gt;\n\t\t\t\t\n\t\t\t\t\t\n\t\t\t\t\t\n\t\t\t\t\t\t&lt;td&gt;&lt;pre&gt;Error org.hl7.fhir.dstu3.model.ValueSet cannot be cast to org.hl7.fhir.dstu3.model.CodeSystem validating Coding&lt;/pre&gt;&lt;/td&gt;\n\t\t\t\t\t\n\t\t\t\t\n\t\t\t&lt;/tr&gt;\n\t\t\t&lt;tr&gt;\n\t\t\t\t&lt;td style=\&quot;font-weight: bold;\&quot;&gt;INFORMATION&lt;/td&gt;\n\t\t\t\t&lt;td&gt;[Parameters.parameter.resource.code]&lt;/td&gt;\n\t\t\t\t\n\t\t\t\t\t\n\t\t\t\t\t\n\t\t\t\t\t\t&lt;td&gt;&lt;pre&gt;None of the codes provided are in the value set http://hl7.org/fhir/ValueSet/report-codes (http://hl7.org/fhir/ValueSet/report-codes, and a code is recommended to come from this value set) (codes = http://loinc.org#13303-3)&lt;/pre&gt;&lt;/td&gt;\n\t\t\t\t\t\n\t\t\t\t\n\t\t\t&lt;/tr&gt;\n\t\t&lt;/table&gt;\n\t&lt;/div&gt;&quot;
  },
  &quot;issue&quot;: [
    {
      &quot;severity&quot;: &quot;error&quot;,
      &quot;code&quot;: &quot;processing&quot;,
      &quot;diagnostics&quot;: &quot;The Coding references a value set, not a code system (\&quot;http://hl7.org/fhir/ValueSet/diagnostic-service-sections\&quot;)&quot;,
      &quot;location&quot;: [
        &quot;Parameters.parameter.resource.category.coding&quot;
      ]
    },
    {
      &quot;severity&quot;: &quot;error&quot;,
      &quot;code&quot;: &quot;processing&quot;,
      &quot;diagnostics&quot;: &quot;Error org.hl7.fhir.dstu3.model.ValueSet cannot be cast to org.hl7.fhir.dstu3.model.CodeSystem validating Coding&quot;,
      &quot;location&quot;: [
        &quot;Parameters.parameter.resource.category.coding&quot;
      ]
    },
    {
      &quot;severity&quot;: &quot;information&quot;,
      &quot;code&quot;: &quot;processing&quot;,
      &quot;diagnostics&quot;: &quot;None of the codes provided are in the value set http://hl7.org/fhir/ValueSet/report-codes (http://hl7.org/fhir/ValueSet/report-codes, and a code is recommended to come from this value set) (codes = http://loinc.org#13303-3)&quot;,
      &quot;location&quot;: [
        &quot;Parameters.parameter.resource.code&quot;
      ]
    }
  ]
}```
</pre></div>



<a name="153918620"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179176-clinFHIR/topic/validating%20code%20in%20DiagnosticReport/near/153918620" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a>  Bob Milius <a href="https://fhir.github.io/chat-archive/stream/179176-clinFHIR/topic/validating.20code.20in.20DiagnosticReport.html#153918620">(Nov 09 2017 at 20:53)</a>:</h4>
<p><span class="user-mention" data-user-id="191321">@David Hay</span> oh, I'm using the Public HAPI STU3 server for everything</p>



<a name="153918625"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179176-clinFHIR/topic/validating%20code%20in%20DiagnosticReport/near/153918625" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Hay <a href="https://fhir.github.io/chat-archive/stream/179176-clinFHIR/topic/validating.20code.20in.20DiagnosticReport.html#153918625">(Nov 09 2017 at 20:58)</a>:</h4>
<p>Hi Bob - this looks like a HAPI issue (I assume you pasted this resource in?) . I'll ping <span class="user-mention" data-user-id="191319">@James Agnew</span></p>



<a name="153918629"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179176-clinFHIR/topic/validating%20code%20in%20DiagnosticReport/near/153918629" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a>  Bob Milius <a href="https://fhir.github.io/chat-archive/stream/179176-clinFHIR/topic/validating.20code.20in.20DiagnosticReport.html#153918629">(Nov 09 2017 at 21:03)</a>:</h4>
<p>Thanks, <span class="user-mention" data-user-id="191321">@David Hay</span> Yeah, I'm pasting it in and importing it.</p>



<a name="153918730"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179176-clinFHIR/topic/validating%20code%20in%20DiagnosticReport/near/153918730" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Hay <a href="https://fhir.github.io/chat-archive/stream/179176-clinFHIR/topic/validating.20code.20in.20DiagnosticReport.html#153918730">(Nov 10 2017 at 00:21)</a>:</h4>
<p>Do you get the same error if you use the $validate operation against the HAPI server?</p>



<a name="153919213"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179176-clinFHIR/topic/validating%20code%20in%20DiagnosticReport/near/153919213" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joel Schneider <a href="https://fhir.github.io/chat-archive/stream/179176-clinFHIR/topic/validating.20code.20in.20DiagnosticReport.html#153919213">(Nov 13 2017 at 09:32)</a>:</h4>
<p><span class="user-mention" data-user-id="191916">@ Bob Milius</span> looks like the category.coding.system should be <code>http://hl7.org/fhir/v2/0074</code>, not <code>http://hl7.org/fhir/ValueSet/diagnostic-service-sections</code>.</p>



<a name="153919229"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179176-clinFHIR/topic/validating%20code%20in%20DiagnosticReport/near/153919229" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> shivnath shelake <a href="https://fhir.github.io/chat-archive/stream/179176-clinFHIR/topic/validating.20code.20in.20DiagnosticReport.html#153919229">(Nov 13 2017 at 13:50)</a>:</h4>
<p>Hi,<br>
I created vonk FHIR server on my local machine...<br>
I added my server in ClinFhir but I unable to add patient getting below error..<br>
<a href="/user_uploads/10155/4O0rZuxoTRC59Vkivd7-5QAM/pasted_image.png" target="_blank" title="pasted_image.png">pasted image</a> </p>
<p>Event in local machine vonk folder in web.config file i added below code but still getting same issue..</p>
<p>&lt;system.webServer&gt;<br>
    &lt;handlers&gt;<br>
      &lt;add name="aspNetCore" path="<em>" verb="</em>" modules="AspNetCoreModule" resourceType="Unspecified"  /&gt;<br>
    &lt;/handlers&gt;<br>
    &lt;aspNetCore processPath="dotnet" arguments=".\Vonk.Server.dll" stdoutLogEnabled="false" stdoutLogFile=".\logs\stdout" forwardWindowsAuthToken="false" /&gt;<br>
    &lt;httpProtocol&gt;<br>
        &lt;customHeaders&gt;<br>
          &lt;add name="Access-Control-Allow-Origin" value="*" /&gt;<br>
          &lt;add name="Access-Control-Allow-Headers" value="Content-Type, Authorization, x-id, Content-Length, X-Requested-With" /&gt;                <br>
          &lt;add name="Access-Control-Allow-Methods" value="GET,POST,PUT,DELETE,OPTIONS" /&gt;<br>
         &lt;add name="Access-Control-Allow-Credentials" value="true" /&gt;<br>
        &lt;/customHeaders&gt;<br>
      &lt;/httpProtocol&gt;<br>
  &lt;/system.webServer&gt;</p>
<p>help is greatly appreciated...</p>
<div class="message_inline_image"><a href="/user_uploads/10155/4O0rZuxoTRC59Vkivd7-5QAM/pasted_image.png" target="_blank" title="pasted image"><img src="/user_uploads/10155/4O0rZuxoTRC59Vkivd7-5QAM/pasted_image.png"></a></div>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
