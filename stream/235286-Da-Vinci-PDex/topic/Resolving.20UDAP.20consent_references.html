---
layout: page
title: "FHIR Chat  · Resolving UDAP consent_references · Da Vinci PDex"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/235286-Da-Vinci-PDex/index.html">Da Vinci PDex</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/235286-Da-Vinci-PDex/topic/Resolving.20UDAP.20consent_references.html">Resolving UDAP consent_references</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="261837392"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/235286-Da%20Vinci%20PDex/topic/Resolving%20UDAP%20consent_references/near/261837392" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Spencer Kathol <a href="https://fhir.github.io/chat-archive/stream/235286-Da-Vinci-PDex/topic/Resolving.20UDAP.20consent_references.html#261837392">(Nov 17 2021 at 19:44)</a>:</h4>
<p>I'm trying to implement requirements here: <br>
<a href="http://build.fhir.org/ig/HL7/davinci-ehrx/consent-oauth.html">http://build.fhir.org/ig/HL7/davinci-ehrx/consent-oauth.html</a><br>
Also relevant: <br>
<a href="http://hl7.org/fhir/us/udap-security/2021Sep/b2b.html">http://hl7.org/fhir/us/udap-security/2021Sep/b2b.html</a></p>
<p>We are expecting the consent_reference extension value in the token request to be a URL to a Consent resource.  Per the UDAP B2B spec, it must be resolvable by the receiving party, but does not describe authorization requirements.  Is there an expectation that the token-issuing party authenticate with the Consent resource owner in order to retrieve that information, and if so is there guidance on how that should be done?</p>



<a name="261870380"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/235286-Da%20Vinci%20PDex/topic/Resolving%20UDAP%20consent_references/near/261870380" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/235286-Da-Vinci-PDex/topic/Resolving.20UDAP.20consent_references.html#261870380">(Nov 18 2021 at 00:23)</a>:</h4>
<p>We hadn't really talked about that.  Presumably a simple mutual TLS connection would suffice, but we should make that explicit.  Can you submit a change request?</p>



<a name="261879464"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/235286-Da%20Vinci%20PDex/topic/Resolving%20UDAP%20consent_references/near/261879464" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/235286-Da-Vinci-PDex/topic/Resolving.20UDAP.20consent_references.html#261879464">(Nov 18 2021 at 02:40)</a>:</h4>
<p>"simple"?</p>



<a name="261918374"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/235286-Da%20Vinci%20PDex/topic/Resolving%20UDAP%20consent_references/near/261918374" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Spencer Kathol <a href="https://fhir.github.io/chat-archive/stream/235286-Da-Vinci-PDex/topic/Resolving.20UDAP.20consent_references.html#261918374">(Nov 18 2021 at 12:08)</a>:</h4>
<p>Presumably in the future, there will be a central authority issuing client certificates - those will be used earlier in the process as well such as for the member match call.  So these calls would use the same client cert... I think that should be OK.  Jira ticket created: <a href="https://jira.hl7.org/browse/FHIR-34333">https://jira.hl7.org/browse/FHIR-34333</a></p>



<a name="261933659"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/235286-Da%20Vinci%20PDex/topic/Resolving%20UDAP%20consent_references/near/261933659" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/235286-Da-Vinci-PDex/topic/Resolving.20UDAP.20consent_references.html#261933659">(Nov 18 2021 at 14:26)</a>:</h4>
<p>'simple' as in only mTLS needed, not OAuth.  Given that OAuth can require having a consent, we might end up in a situation where you need a consent to view the consent to...  Also, mTLS is already mandatory for payer-to-payer unless both agree to do full UDAP.  (Speaking of which, this would also need to be landed if doing full UDAP, so might not be a bad idea to raise a tracker against the UDAP spec too <span class="user-mention" data-user-id="363194">@Spencer Kathol</span>)</p>



<a name="261938663"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/235286-Da%20Vinci%20PDex/topic/Resolving%20UDAP%20consent_references/near/261938663" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/235286-Da-Vinci-PDex/topic/Resolving.20UDAP.20consent_references.html#261938663">(Nov 18 2021 at 15:02)</a>:</h4>
<p>The 'standard' FHIR way to do system-to-system authentication (so far) is SMART backend auth. Using mutual TLS would add a different  way to do the same thing</p>



<a name="261940553"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/235286-Da%20Vinci%20PDex/topic/Resolving%20UDAP%20consent_references/near/261940553" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/235286-Da-Vinci-PDex/topic/Resolving.20UDAP.20consent_references.html#261940553">(Nov 18 2021 at 15:16)</a>:</h4>
<p>SMART backend requires the client to register with the server.  mTLS means that so long as the systems can find each other in a trusted registry, they can talk to each other.  mTLS is also already supported by payers, so it's an easier lift.</p>



<a name="261940901"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/235286-Da%20Vinci%20PDex/topic/Resolving%20UDAP%20consent_references/near/261940901" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/235286-Da-Vinci-PDex/topic/Resolving.20UDAP.20consent_references.html#261940901">(Nov 18 2021 at 15:18)</a>:</h4>
<p>Is there a trusted registry? And no, not all payers already support mutual TLS: our system do support SMART backend but not mutual TLS for FHIR access</p>



<a name="261943501"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/235286-Da%20Vinci%20PDex/topic/Resolving%20UDAP%20consent_references/near/261943501" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/235286-Da-Vinci-PDex/topic/Resolving.20UDAP.20consent_references.html#261943501">(Nov 18 2021 at 15:37)</a>:</h4>
<p><span class="user-mention" data-user-id="196359">@Robert Dieterle</span></p>



<a name="261961806"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/235286-Da%20Vinci%20PDex/topic/Resolving%20UDAP%20consent_references/near/261961806" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Spencer Kathol <a href="https://fhir.github.io/chat-archive/stream/235286-Da-Vinci-PDex/topic/Resolving.20UDAP.20consent_references.html#261961806">(Nov 18 2021 at 17:35)</a>:</h4>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> I'll get another ticket submitted for UDAP today.</p>



<a name="261966392"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/235286-Da%20Vinci%20PDex/topic/Resolving%20UDAP%20consent_references/near/261966392" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Spencer Kathol <a href="https://fhir.github.io/chat-archive/stream/235286-Da-Vinci-PDex/topic/Resolving.20UDAP.20consent_references.html#261966392">(Nov 18 2021 at 18:05)</a>:</h4>
<p>My take on mTLS vs oAuth: this use case is embedded in a flow that does specify mTLS (currently).  It would differ with other use cases that require SMART backend auth (I haven't implemented one of these yet).  I believe the expectation per HRex is to have a central trusted registry but that hasn't been established yet afaik.  In theory, the consent-collecting payer can derive the consent-requesting payer's identity from the client certificate, but many implementations terminate the TLS connection on a web server, and need to check identity in the application which complicates implementation for this approach.  OAuth also introduces some hoops - such as per-payer OAuth client registration.  I don't think I have a firm preference - just providing thoughts for discussion.</p>



<a name="261970832"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/235286-Da%20Vinci%20PDex/topic/Resolving%20UDAP%20consent_references/near/261970832" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Spencer Kathol <a href="https://fhir.github.io/chat-archive/stream/235286-Da-Vinci-PDex/topic/Resolving.20UDAP.20consent_references.html#261970832">(Nov 18 2021 at 18:41)</a>:</h4>
<p>One more related question - is there a place in the token request that we would expect to find the member ID other than the consent_reference object?</p>



<a name="262005908"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/235286-Da%20Vinci%20PDex/topic/Resolving%20UDAP%20consent_references/near/262005908" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Spencer Kathol <a href="https://fhir.github.io/chat-archive/stream/235286-Da-Vinci-PDex/topic/Resolving.20UDAP.20consent_references.html#262005908">(Nov 18 2021 at 23:16)</a>:</h4>
<p><a href="https://jira.hl7.org/browse/FHIR-34342">https://jira.hl7.org/browse/FHIR-34342</a></p>



<a name="262025842"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/235286-Da%20Vinci%20PDex/topic/Resolving%20UDAP%20consent_references/near/262025842" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/235286-Da-Vinci-PDex/topic/Resolving.20UDAP.20consent_references.html#262025842">(Nov 19 2021 at 04:29)</a>:</h4>
<p><span class="user-mention silent" data-user-id="363194">Spencer Kathol</span> <a href="#narrow/stream/235286-Da-Vinci.20PDex/topic/Resolving.20UDAP.20consent_references/near/261970832">said</a>:</p>
<blockquote>
<p>One more related question - is there a place in the token request that we would expect to find the member ID other than the consent_reference object?</p>
</blockquote>
<p>No.  Is one needed?</p>



<a name="262085137"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/235286-Da%20Vinci%20PDex/topic/Resolving%20UDAP%20consent_references/near/262085137" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Spencer Kathol <a href="https://fhir.github.io/chat-archive/stream/235286-Da-Vinci-PDex/topic/Resolving.20UDAP.20consent_references.html#262085137">(Nov 19 2021 at 15:56)</a>:</h4>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> If the responding payer was willing to use the presence of a Consent resource as proof of consent without validating the actual resource, there would be a more readily available value to establish patient context.  Sounds like that's not the case.  That's what I expected, but wanted to ask just in case.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
