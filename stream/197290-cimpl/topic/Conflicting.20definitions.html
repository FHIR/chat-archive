---
layout: page
title: "FHIR Chat  · Conflicting definitions · cimpl"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/197290-cimpl/index.html">cimpl</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/197290-cimpl/topic/Conflicting.20definitions.html">Conflicting definitions</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="176612935"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/197290-cimpl/topic/Conflicting%20definitions/near/176612935" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kurt Allen <a href="https://fhir.github.io/chat-archive/stream/197290-cimpl/topic/Conflicting.20definitions.html#176612935">(Sep 25 2019 at 22:58)</a>:</h4>
<p><span class="user-mention" data-user-id="191469">@Chris Moesel</span> </p>
<p>(Really, I have not been storing these up just sp I can dump them all at once and ruin your day, really...)</p>
<p>I have a case where I have a Use with two namespaces in it, both of which define a Code element, and I getting the following error.</p>
<p>ERROR 11047:  'Resolution error: Found conflicting definitions for Code in multiple namespaces: fhir.observation,fhir.quantity '****</p>
<p>One Use is to define the parent class, and the other to define a member type. I can not use the full namespace and remove either of the two use's because the full namespace appears to be only partially implemented.<br>
i.e. I cant say <br>
ValueX[fhir.quantity.Quantity].System</p>
<p>and <br>
Parent: fhir.observation.Observation<br>
also returns compiel errors.</p>
<p>I really don't use either of these definitions, except in a context where it is obvious which one I mean. Is there a possible to ignore this error unless that code needs to reference a 'Code' where it is not in contect determinable which one we mean?</p>
<p>I.E. Code below is used only when referring to a Quantity, so the s/w could be able to determine the correct Code...</p>
<p>Kurt A.</p>
<p>Grammar: DataElement 6.0<br>
Namespace: brr<br>
Uses: fhir.observation, fhir.quantity</p>
<p>Entry: BreastRadiologyAbnormalityMaxLength<br>
Parent: Observation<br>
    ValueX 1..1<br>
    ValueX only Quantity<br>
    ValueX[Quantity].System = "<a href="http://unitsofmeasure.org" target="_blank" title="http://unitsofmeasure.org">http://unitsofmeasure.org</a>"<br>
    ValueX[Quantity].Code from UnitsOfLengthVS</p>



<a name="176619230"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/197290-cimpl/topic/Conflicting%20definitions/near/176619230" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/197290-cimpl/topic/Conflicting.20definitions.html#176619230">(Sep 26 2019 at 00:50)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="192611">@Kurt Allen</span> -- I think you identified the two potential approaches to fixing this...  one would be adding support for the fully qualified names in those areas you found they are not supported.  Another would be trying to determine which element it is through the context of where it is used (i.e., your <code>ValueX[Quantity].Code</code> example).  Both of these require code changes in the CLI.  The most immediate fix, of course, would be for you to change the name of one of them to something unique (if you need a fix now).</p>



<a name="176619312"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/197290-cimpl/topic/Conflicting%20definitions/near/176619312" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/197290-cimpl/topic/Conflicting.20definitions.html#176619312">(Sep 26 2019 at 00:52)</a>:</h4>
<p>We now use Jira to track issues.  I wonder if perhaps you could log this as a Jira issue?  That would make it easier for us to track it and would allow you to track it as well.  You can find our Jira here: <a href="https://standardhealthrecord.atlassian.net/projects/CIMPL/issues" target="_blank" title="https://standardhealthrecord.atlassian.net/projects/CIMPL/issues">https://standardhealthrecord.atlassian.net/projects/CIMPL/issues</a></p>
<p>You may have to sign up for a free account to log a bug.</p>



<a name="176619404"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/197290-cimpl/topic/Conflicting%20definitions/near/176619404" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/197290-cimpl/topic/Conflicting.20definitions.html#176619404">(Sep 26 2019 at 00:54)</a>:</h4>
<p>Also, <span class="user-mention" data-user-id="191447">@Mark Kramer</span> spent a lot of time on defining OBF and the mappings to FHIR so that most everything would work as needed.  I'm curious why you have chosen to move away from OBF and write your own FHIR base elements and mappings?  Is there a deficiency in OBF that we could fix there that would keep you from having to do all that work?</p>



<a name="176657290"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/197290-cimpl/topic/Conflicting%20definitions/near/176657290" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kurt Allen <a href="https://fhir.github.io/chat-archive/stream/197290-cimpl/topic/Conflicting.20definitions.html#176657290">(Sep 26 2019 at 13:24)</a>:</h4>
<p>Hello <span class="user-mention" data-user-id="191469">@Chris Moesel</span> We had some concerns raised vis-a-vis breast radiology profile that it was derived from US-Core and we wanted to see what these looked like working directly from the fhir resources.<br>
For the short term I will just overload the name. Esp. with fields named 'code that makes more sense.</p>



<a name="176657778"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/197290-cimpl/topic/Conflicting%20definitions/near/176657778" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/197290-cimpl/topic/Conflicting.20definitions.html#176657778">(Sep 26 2019 at 13:30)</a>:</h4>
<p><span class="user-mention" data-user-id="192611">@Kurt Allen</span> -- as you know, similar concerns were raised about mCODE at the Connectathon. We should circle with <span class="user-mention" data-user-id="191447">@Mark Kramer</span> to see if he has plans to do a non-US-Core OBF.</p>
<p>In the mean time (or if he doesn't) -- it seems like you <em>should</em> be able to take the OBF source and:<br>
1) Change any mappings from elements to US Core profiles just to map to the base resource instead<br>
2) Remove/replace references to US Core extensions in the mapping files<br>
3) Remove/replace US Core value sets in the CIMPL definition files</p>
<p>This would essentially maintain the structure and general mapping approach of OBF while removing the US-Core-centric aspects of it.  It might be easier than trying to create new classes and mappings from the ground up.</p>



<a name="176715235"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/197290-cimpl/topic/Conflicting%20definitions/near/176715235" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kurt Allen <a href="https://fhir.github.io/chat-archive/stream/197290-cimpl/topic/Conflicting.20definitions.html#176715235">(Sep 27 2019 at 03:14)</a>:</h4>
<p><span class="user-mention" data-user-id="191447">@Mark Kramer</span> Is this something you are thinking of doing?</p>



<a name="176753788"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/197290-cimpl/topic/Conflicting%20definitions/near/176753788" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kurt Allen <a href="https://fhir.github.io/chat-archive/stream/197290-cimpl/topic/Conflicting.20definitions.html#176753788">(Sep 27 2019 at 14:59)</a>:</h4>
<p><span class="user-mention" data-user-id="191469">@Chris Moesel</span> I am getting some parse errors, and I cant find any indication of the file or line # where the error is. Any ideas on how I can track down the offending line? Unfortunately I made a log of changes all at once, and it would not be easy to back them all out and do them one by one to see where I made the booboo...<br>
Kurt</p>
<p>INFO 05001:  'Starting CLI Import/Export'<br>
    During:         shr-cli</p>
<p>INFO 01012:  'Using config file C:\Development\MITRE\cimpl\Fhir-BreastRadiologyReport\CIMPL\ig-breastRad-config.v4.json'<br>
    During:         shr-text-input</p>
<p>ERROR 11015:  'token recognition error at: '/''<br>
    During:         shr-text-input<br>
    Suggested Fix:  This is usually a typo issue. Investigate keywords and missing colons around the specificed text input.</p>
<p>ERROR 11023:  'extraneous input '*' expecting {&lt;EOF&gt;, 'Abstract:', 'Element:', 'Entry:', 'Value', 'Property:', 'or', 'Group:', '_Entry', 'boolean', 'integer', 'string', 'decimal', 'uri', 'base64Binary', 'instant', 'date', 'dateTime', 'time', 'concept', 'oid', 'id', 'markdown', 'unsignedInt', 'positiveInt', 'xhtml', null, null, null, null}'<br>
    During:         shr-text-input<br>
    Suggested Fix:  This is usually a typo issue. Investigate spelling and keywords used around the specificied text input.</p>



<a name="176755553"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/197290-cimpl/topic/Conflicting%20definitions/near/176755553" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kurt Allen <a href="https://fhir.github.io/chat-archive/stream/197290-cimpl/topic/Conflicting.20definitions.html#176755553">(Sep 27 2019 at 15:18)</a>:</h4>
<p><span class="user-mention" data-user-id="191469">@Chris Moesel</span> I found the problem, a file had a trailing '{asterix}/' in it (without a starting '/{asterix}').<br>
(zulip wont let me use a asterix directly, so use your imagination)</p>
<p>But I had to <br>
a) set log level to debug<br>
b) find the last file that compiled properly in the output<br>
c) open the next file in the directory and search for a compile error.</p>
<p>It would be really helpful if  a log message was added detailing the file in which the error ocurred?<br>
Thanks,<br>
K</p>



<a name="176781869"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/197290-cimpl/topic/Conflicting%20definitions/near/176781869" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kurt Allen <a href="https://fhir.github.io/chat-archive/stream/197290-cimpl/topic/Conflicting.20definitions.html#176781869">(Sep 27 2019 at 20:07)</a>:</h4>
<p>Hey <span class="user-mention" data-user-id="191469">@Chris Moesel</span></p>
<p>Re clean differential.</p>
<p>I am using the obf base classes (minus is core stuff), and I create an entry derived from Observation, and don't constrain Observation.basedOn. In the output json, I see the definition below.<br>
The reason that the differential has a value for basedOn in it is because I guess shr-cli is constraining the target profile from (for instance) MedicationRequest to  obf-MedicationRequest.</p>
<p>How can I stop that from happening, so we get a clean differential?</p>
<p>Kurt</p>
<div class="codehilite"><pre><span></span>  {
    &quot;id&quot;: &quot;Observation.basedOn&quot;,
    &quot;path&quot;: &quot;Observation.basedOn&quot;,
    &quot;short&quot;: &quot;Fulfills plan, proposal or order&quot;,
    &quot;type&quot;: [
      {
        &quot;code&quot;: &quot;Reference&quot;,
        &quot;targetProfile&quot;: [
          &quot;http://hl7.org/fhir/us/breast-radiology/StructureDefinition/obf-MedicationRequest&quot;,
          &quot;http://hl7.org/fhir/us/breast-radiology/StructureDefinition/obf-ServiceRequest&quot;,
          &quot;http://hl7.org/fhir/us/breast-radiology/StructureDefinition/obf-ProcedureRequest&quot;,
          &quot;http://hl7.org/fhir/us/breast-radiology/StructureDefinition/obf-ReferralRequest&quot;
        ]
      }
    ],
</pre></div>



<a name="176783555"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/197290-cimpl/topic/Conflicting%20definitions/near/176783555" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/197290-cimpl/topic/Conflicting.20definitions.html#176783555">(Sep 27 2019 at 20:28)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="192611">@Kurt Allen</span></p>
<p>Re: log output for syntax errors, we can take a look as see if we can output more information (file and line #).  I thought we did this before, but I may be mistaken, or it may have been mistakenly removed when we changed the log format.</p>
<p>Re: not wanting those profiles on the basedOn targets, you're using a CP file, right?  If so, I think you want to have these in it:</p>
<div class="codehilite"><pre><span></span>Namespace: obf NP
Namespace: obf.datatype NP
</pre></div>


<p>That says not to create profiles from any of the definitions in the obf or obf.datatype namespaces.</p>



<a name="176791335"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/197290-cimpl/topic/Conflicting%20definitions/near/176791335" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kurt Allen <a href="https://fhir.github.io/chat-archive/stream/197290-cimpl/topic/Conflicting.20definitions.html#176791335">(Sep 27 2019 at 22:30)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="191469">@Chris Moesel</span> <br>
I added the two namesapce lines as per you note (I removed those when I was playing around - sorry should have remembered).<br>
I have modified the obf files to remove all references to US-Core (i.e. I may have introduced an error)<br>
When I added them back in, I get the error below. I have no idea what this error is trying to tell me :-)<br>
K</p>
<p>INFO 03007:  'Exporting FHIR using target: FHIR_R4'<br>
    During:         FHIR Export<br>
    Target Class:   FHIR_R4</p>
<p>ERROR 13064:  'Could not find FHIR element for content profile rule with path '<br>
    During:         FHIR Export<br>
    Class:          MedicationDispense<br>
    Target Class:   DomainResource</p>



<a name="176791356"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/197290-cimpl/topic/Conflicting%20definitions/near/176791356" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kurt Allen <a href="https://fhir.github.io/chat-archive/stream/197290-cimpl/topic/Conflicting.20definitions.html#176791356">(Sep 27 2019 at 22:31)</a>:</h4>
<p>P.S. This will keep until Monday.... :-)</p>



<a name="176825823"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/197290-cimpl/topic/Conflicting%20definitions/near/176825823" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kurt Allen <a href="https://fhir.github.io/chat-archive/stream/197290-cimpl/topic/Conflicting.20definitions.html#176825823">(Sep 28 2019 at 13:13)</a>:</h4>
<p>Update: Tried reverting to the shr-spec files that are checked in (tried both master - sep 5 and most recent version). Got same error. Don't think problem is caused by any changed I made to obf files.</p>



<a name="176932808"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/197290-cimpl/topic/Conflicting%20definitions/near/176932808" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/197290-cimpl/topic/Conflicting.20definitions.html#176932808">(Sep 30 2019 at 13:42)</a>:</h4>
<p>Hmmm... <span class="user-mention" data-user-id="191447">@Mark Kramer</span> -- have you run into this?</p>



<a name="176945687"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/197290-cimpl/topic/Conflicting%20definitions/near/176945687" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Kramer <a href="https://fhir.github.io/chat-archive/stream/197290-cimpl/topic/Conflicting.20definitions.html#176945687">(Sep 30 2019 at 15:53)</a>:</h4>
<p><span class="user-mention" data-user-id="192611">@Kurt Allen</span>  can you check your content profile file for any mention of MedicationDispense? Perhaps the namespace might be incorrect? Or MedicationDispense is not defined in the CIMPL files?</p>



<a name="176971021"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/197290-cimpl/topic/Conflicting%20definitions/near/176971021" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kurt Allen <a href="https://fhir.github.io/chat-archive/stream/197290-cimpl/topic/Conflicting.20definitions.html#176971021">(Sep 30 2019 at 20:28)</a>:</h4>
<p><span class="user-mention" data-user-id="191447">@Mark Kramer</span> The only references are from shr-spec.<br>
A) obf_finding.txt line 332 (ObservationPartOf) and<br>
B) obf-medication.txt LINE 133 &amp; 197.</p>



<a name="177632183"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/197290-cimpl/topic/Conflicting%20definitions/near/177632183" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Freiter <a href="https://fhir.github.io/chat-archive/stream/197290-cimpl/topic/Conflicting.20definitions.html#177632183">(Oct 08 2019 at 16:17)</a>:</h4>
<p><span class="user-mention" data-user-id="192611">@Kurt Allen</span> Hello, I'm a developer working on CIMPL with Chris. That "Error 13064" that you are seeing was actually a bug, and we are fixing it now. The bug causing the error message did not cause any unexpected functionality, so you can just ignore that error message until our fix is published. </p>
<p>As for directly using <code>MedicationRequest</code> instead of <code>obf-MedicationRequest</code>, you do want to use the <code>NP</code> flag that Chris mentioned, but you likely want to be more careful about how you apply it. In the example Chris showed, the <code>NP</code> flag will prevent profiles from being made for definitions in the obf or obf.datatype namespaces, but it will also prevent profiles from being made for definitions that inherit from definitions in obf or obf.datatype. So you probably do not want to <code>NP</code> all of obf, since you have definitions that inherit from definitions in obf. You can apply the <code>NP</code> flag at a definition specific level instead of applying it to the entire namespace in the following way:</p>
<div class="codehilite"><pre><span></span>Namespace: obf // Don&#39;t apply NP at this level
  MedicationRequest: NP // apply NP at this level
  ServiceRequest: NP
  ProcedureRequest: NP
  ReferralRequest: NP
  // and so on for definitions that you wish to not have a profile for
</pre></div>


<p>This gives you the ability to pick and choose which definitions that you want to apply the <code>NP</code> flag to.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
