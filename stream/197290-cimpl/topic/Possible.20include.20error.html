---
layout: page
title: "FHIR Chat  · Possible include error · cimpl"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/197290-cimpl/index.html">cimpl</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/197290-cimpl/topic/Possible.20include.20error.html">Possible include error</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="168868380"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/197290-cimpl/topic/Possible%20include%20error/near/168868380" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kurt Allen <a href="https://fhir.github.io/chat-archive/stream/197290-cimpl/topic/Possible.20include.20error.html#168868380">(Jun 24 2019 at 17:32)</a>:</h4>
<p>I am getting output that doesn't look right. I don't know if it is a bug or a CIMPL user error (:-)).<br>
I derived a class from Composition and am slicing on Section</p>
<p>Entry: BreastRadiologyReport<br>
Parent: Composition<br>
        Section<br>
        includes PatientHistory 0..1<br>
                ...</p>
<p>Group: PatientHistory<br>
Description:    "Patient History"<br>
Parent: Section<br>
            Code[concept] = LOINC#34117-2</p>
<p>When I look at the output StructureDefinition, I don't see any reference to PatientHistory, no slices, nothing.<br>
Is this my error or a possible bug?<br>
I have included the original CIMPL file and the output StructureDefinition json file.</p>
<p>Thanks in advance,<br>
Kurt A.</p>
<p><a href="/user_uploads/10155/gHcjZyukI2WsI4xrVO3kuZso/structuredefinition-xxyyz-BreastRadiologyReport.json" target="_blank" title="structuredefinition-xxyyz-BreastRadiologyReport.json">structuredefinition-xxyyz-BreastRadiologyReport.json</a> <a href="/user_uploads/10155/f0OL6dZq57NkRQ1mFgR-Ehhk/BreastRad.txt" target="_blank" title="BreastRad.txt">BreastRad.txt</a></p>



<a name="168869995"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/197290-cimpl/topic/Possible%20include%20error/near/168869995" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/197290-cimpl/topic/Possible.20include.20error.html#168869995">(Jun 24 2019 at 17:51)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="192611">@Kurt Allen</span>.  Thanks for sending along these details.  I think this is an issue with the FHIR mappings for Composition in OBF.  I think that the mapping <code>Section maps to section</code> needs a slicing directive.  I haven't had a chance to test it, but try modifying the file <code>obf_foundation_map_r4.txt</code>.   Find this line in the <code>Composition</code> mapping:</p>
<div class="codehilite"><pre><span></span>Section maps to section
</pre></div>


<p>and change it to:</p>
<div class="codehilite"><pre><span></span>Section maps to section (slice on = code)
</pre></div>


<p>I <em>think</em> that should work, but would appreciate your confirmation (or denial) if you get a chance to try it!</p>



<a name="168875359"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/197290-cimpl/topic/Possible%20include%20error/near/168875359" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kurt Allen <a href="https://fhir.github.io/chat-archive/stream/197290-cimpl/topic/Possible.20include.20error.html#168875359">(Jun 24 2019 at 18:52)</a>:</h4>
<p>Yo <span class="user-mention" data-user-id="191469">@Chris Moesel</span> <br>
Thanks for the info.  I added the slice on code to foundation, and now it adds the slicing discriminator definition to the structure def, but still no references to the actual slices (PatientHistory et all).<br>
I have included the output StructDef.<br>
Gettin' closer!<br>
Kurt A</p>
<p><a href="/user_uploads/10155/AzY3-8qPX70utcxpODD2zPyS/BreastRad.txt" target="_blank" title="BreastRad.txt">BreastRad.txt</a> <a href="/user_uploads/10155/w1N99fLYWW1ofmbIWo676LU_/obf_foundation_map_r4.txt" target="_blank" title="obf_foundation_map_r4.txt">obf_foundation_map_r4.txt</a> <a href="/user_uploads/10155/gcqjYkYthDvMSHyOhAmaqRaM/structuredefinition-xxyyz-BreastRadiologyReport.json" target="_blank" title="structuredefinition-xxyyz-BreastRadiologyReport.json">structuredefinition-xxyyz-BreastRadiologyReport.json</a></p>



<a name="168876456"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/197290-cimpl/topic/Possible%20include%20error/near/168876456" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/197290-cimpl/topic/Possible.20include.20error.html#168876456">(Jun 24 2019 at 19:05)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="192611">@Kurt Allen</span>.  Oh, right.  I forgot that since <code>Section</code> uses the <code>includes</code> constraint, you actually need:</p>
<div class="codehilite"><pre><span></span>Section maps to section (slice on = code; slice strategy = includes)
</pre></div>


<p>Again, I <em>think</em> that should work. Sorry I'm unable to test it myself right now...  If the above doesn't work, I'll try to get a chance to dig deeper tomorrow.</p>
<p>In future versions of CIMPL, I hope to make stuff like this a lot simpler (and hopefully automagic).  But we're not quite there yet.</p>



<a name="168878218"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/197290-cimpl/topic/Possible%20include%20error/near/168878218" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kurt Allen <a href="https://fhir.github.io/chat-archive/stream/197290-cimpl/topic/Possible.20include.20error.html#168878218">(Jun 24 2019 at 19:32)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="191469">@Chris Moesel</span> . That did it! Thanks.</p>



<a name="168879524"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/197290-cimpl/topic/Possible%20include%20error/near/168879524" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/197290-cimpl/topic/Possible.20include.20error.html#168879524">(Jun 24 2019 at 19:50)</a>:</h4>
<p>Great!  <span class="user-mention" data-user-id="191447">@Mark Kramer</span> -- can you update the mapping for OBF <code>Composition</code> per the above conversation?  I think that Kurt is using composition in the expected way for multiple sections, right?</p>



<a name="168881167"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/197290-cimpl/topic/Possible%20include%20error/near/168881167" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Kramer <a href="https://fhir.github.io/chat-archive/stream/197290-cimpl/topic/Possible.20include.20error.html#168881167">(Jun 24 2019 at 20:10)</a>:</h4>
<p>Yes, I can. I'll ping the list when it is promoted to master.</p>



<a name="168883946"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/197290-cimpl/topic/Possible%20include%20error/near/168883946" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Kramer <a href="https://fhir.github.io/chat-archive/stream/197290-cimpl/topic/Possible.20include.20error.html#168883946">(Jun 24 2019 at 20:48)</a>:</h4>
<p>Here's the PR: <a href="https://github.com/standardhealth/shr_spec/pull/308" target="_blank" title="https://github.com/standardhealth/shr_spec/pull/308">https://github.com/standardhealth/shr_spec/pull/308</a>. <span class="user-mention" data-user-id="192611">@Kurt Allen</span> can you review the PR and merge it if it seems correct? (this will be a landmark as the first commit at least reviewed by a non-MITRE person...  we truly become open source project). On second thought, I'm not sure you have commit rights.  Let me know.</p>



<a name="168888176"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/197290-cimpl/topic/Possible%20include%20error/near/168888176" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/197290-cimpl/topic/Possible.20include.20error.html#168888176">(Jun 24 2019 at 21:51)</a>:</h4>
<p>Kurt would need to have write access to the project in order to accept and merge a PR.  He does not have that.  The best he can do is comment on the PR to confirm that he approves it.  I think that's the normal model for project consumers to indicate their support of a PR anyway.  Then someone on the CIMPL team can merge it.</p>



<a name="168893750"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/197290-cimpl/topic/Possible%20include%20error/near/168893750" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kurt Allen <a href="https://fhir.github.io/chat-archive/stream/197290-cimpl/topic/Possible.20include.20error.html#168893750">(Jun 24 2019 at 23:22)</a>:</h4>
<p>Hello <span class="user-mention" data-user-id="191447">@Mark Kramer</span> and <span class="user-mention" data-user-id="191469">@Chris Moesel</span> :  I downloaded #308 and ran a build of the R4 mappings with my code and all seamed well. The R3 and R2 looked good, but all they got was a visual inspection. Thanks for the quick turnaround...</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
