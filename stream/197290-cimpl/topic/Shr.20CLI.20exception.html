---
layout: page
title: "FHIR Chat  · Shr CLI exception · cimpl"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/197290-cimpl/index.html">cimpl</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/197290-cimpl/topic/Shr.20CLI.20exception.html">Shr CLI exception</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="170915300"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/197290-cimpl/topic/Shr%20CLI%20exception/near/170915300" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kurt Allen <a href="https://fhir.github.io/chat-archive/stream/197290-cimpl/topic/Shr.20CLI.20exception.html#170915300">(Jul 15 2019 at 17:45)</a>:</h4>
<p>Hey <span class="user-mention" data-user-id="191469">@Chris Moesel</span>  and <span class="user-mention" data-user-id="191447">@Mark Kramer</span> <br>
 I am getting an exception in the cli. I sont know if I am doing something wrong, or if this might be a bug.</p>
<p>The offending Entry is:</p>
<p>*Element: BreastBodyLocation<br>
Parent: BodyLocation<br>
Description: "Location of the breast abnormality."<br>
Property: breastrad.Breastdepth 0..1<br>
    Code = SCT#76752008<br>
    RelationToLandmark.LandmarkToBodyLocationDirection only ClockFaceDirection<br>
    RelationToLandmark.LandmarkLocation.Code = SCT#181139003<br>
    RelationToLandmark.LandmarkType = SCT#361083003<br>
    RelationToLandmark.LandmarkToBodyLocationDistance[Quantity].Units = UCUM#cm<br>
*<br>
If I remove the line</p>
<ul>
<li>RelationToLandmark.LandmarkToBodyLocationDirection only ClockFaceDirection<br>
*<br>
then I do not get the exception erro rmessage.</li>
</ul>
<p>The exception message is:</p>
<p>*[17:36:59.573Z] ERROR shr:  (module=shr-fhir-export, shrId=breastrad.BreastAbnormality, target=Observation)<br>
    Unexpected error processing mapping rule. ERROR_CODE:13050 TypeError: Cannot read property 'type' of undefined<br>
        at FHIRExporter.getElementInExtension (C:\Development\MITRE\cimpl\shr-cli\node_modules\shr-fhir-export\lib\export.js:2504:12)<br>
        at FHIRExporter.getElementInExtension (C:\Development\MITRE\cimpl\shr-cli\node_modules\shr-fhir-export\lib\export.js:2505:19)<br>
        at FHIRExporter.applyConstraints (C:\Development\MITRE\cimpl\shr-cli\node_modules\shr-fhir-export\lib\export.js:2229:32)<br>
        at FHIRExporter.addExtension (C:\Development\MITRE\cimpl\shr-cli\node_modules\shr-fhir-export\lib\export.js:3282:10)<br>
        at FHIRExporter.processFieldToExtensionMappingRule (C:\Development\MITRE\cimpl\shr-cli\node_modules\shr-fhir-export\lib\export.js:1050:10)<br>
        at FHIRExporter.processMappingRules (C:\Development\MITRE\cimpl\shr-cli\node_modules\shr-fhir-export\lib\export.js:1005:18)<br>
        at FHIRExporter.mappingToProfile (C:\Development\MITRE\cimpl\shr-cli\node_modules\shr-fhir-export\lib\export.js:359:12)<br>
        at FHIRExporter.export (C:\Development\MITRE\cimpl\shr-cli\node_modules\shr-fhir-export\lib\export.js<span aria-label="100" class="emoji emoji-1f4af" role="img" title="100">:100:</span>14)<br>
        at Object.exportToFHIR (C:\Development\MITRE\cimpl\shr-cli\node_modules\shr-fhir-export\lib\export.js:44:25)<br>
        at Object.&lt;anonymous&gt; (C:\Development\MITRE\cimpl\shr-cli\app.js:255:23)<br>
        at Module._compile (internal/modules/cjs/loader.js:701:30)<br>
        at Object.Module._extensions..js (internal/modules/cjs/loader.js:712:10)<br>
        at Module.load (internal/modules/cjs/loader.js:600:32)<br>
        at tryModuleLoad (internal/modules/cjs/loader.js:539:12)<br>
        at Function.Module._load (internal/modules/cjs/loader.js:531:3)<br>
        at Function.Module.runMain (internal/modules/cjs/loader.js:754:12)<br>
    --<br>
    mappingRule: BreastBodyLocation.RelationToLandmark maps to bodySite.extension<br>
*</p>
<p>If you want, you can get the full code at <a href="https://github.com/applicadia/Fhir-BreastRadiologyReport.git" target="_blank" title="https://github.com/applicadia/Fhir-BreastRadiologyReport.git">https://github.com/applicadia/Fhir-BreastRadiologyReport.git</a><br>
(It should be public, let me know if not)<br>
I put the directory <strong>Fhir-BreastRadiologyReport </strong> in the directory that contains the <strong>shr-cli</strong> subdirectory. <strong>BuildProfiles.bat</strong> executes the cli build (windows...)</p>



<a name="170915675"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/197290-cimpl/topic/Shr%20CLI%20exception/near/170915675" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/197290-cimpl/topic/Shr.20CLI.20exception.html#170915675">(Jul 15 2019 at 17:50)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="192611">@Kurt Allen</span> -- I'm afraid I can't look at this right now (about to go into a meeting), but I wanted you to know we just released a new CLI: <a href="https://github.com/standardhealth/shr-cli/releases/tag/v6.2.2" target="_blank" title="https://github.com/standardhealth/shr-cli/releases/tag/v6.2.2">https://github.com/standardhealth/shr-cli/releases/tag/v6.2.2</a></p>
<p>I doubt it fixes the problem above, but still wanted you to know.</p>



<a name="170916222"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/197290-cimpl/topic/Shr%20CLI%20exception/near/170916222" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kurt Allen <a href="https://fhir.github.io/chat-archive/stream/197290-cimpl/topic/Shr.20CLI.20exception.html#170916222">(Jul 15 2019 at 17:57)</a>:</h4>
<p>Hey <span class="user-mention" data-user-id="191469">@Chris Moesel</span> Have fun! I did just download and compiled  6.2.2 (thanks for the heads up) and have the same issue.</p>
<p>Below is the 6.2.2 exception message</p>
<p>*[17:53:07.456Z] ERROR shr:  (module=shr-fhir-export, shrId=breastrad.BreastAbnormality, target=Observation)<br>
    Unexpected error processing mapping rule. ERROR_CODE:13050 TypeError: Cannot read property 'type' of undefined<br>
        at FHIRExporter.getElementInExtension (C:\Development\MITRE\cimpl\shr-cli\node_modules\shr-fhir-export\lib\export.js:2504:12)<br>
        at FHIRExporter.getElementInExtension (C:\Development\MITRE\cimpl\shr-cli\node_modules\shr-fhir-export\lib\export.js:2505:19)<br>
        at FHIRExporter.applyConstraints (C:\Development\MITRE\cimpl\shr-cli\node_modules\shr-fhir-export\lib\export.js:2229:32)<br>
        at FHIRExporter.addExtension (C:\Development\MITRE\cimpl\shr-cli\node_modules\shr-fhir-export\lib\export.js:3282:10)<br>
        at FHIRExporter.processFieldToExtensionMappingRule (C:\Development\MITRE\cimpl\shr-cli\node_modules\shr-fhir-export\lib\export.js:1050:10)<br>
        at FHIRExporter.processMappingRules (C:\Development\MITRE\cimpl\shr-cli\node_modules\shr-fhir-export\lib\export.js:1005:18)<br>
        at FHIRExporter.mappingToProfile (C:\Development\MITRE\cimpl\shr-cli\node_modules\shr-fhir-export\lib\export.js:359:12)<br>
        at FHIRExporter.export (C:\Development\MITRE\cimpl\shr-cli\node_modules\shr-fhir-export\lib\export.js<span aria-label="100" class="emoji emoji-1f4af" role="img" title="100">:100:</span>14)<br>
        at Object.exportToFHIR (C:\Development\MITRE\cimpl\shr-cli\node_modules\shr-fhir-export\lib\export.js:44:25)<br>
        at Object.&lt;anonymous&gt; (C:\Development\MITRE\cimpl\shr-cli\app.js:255:23)<br>
        at Module._compile (internal/modules/cjs/loader.js:701:30)<br>
        at Object.Module._extensions..js (internal/modules/cjs/loader.js:712:10)<br>
        at Module.load (internal/modules/cjs/loader.js:600:32)<br>
        at tryModuleLoad (internal/modules/cjs/loader.js:539:12)<br>
        at Function.Module._load (internal/modules/cjs/loader.js:531:3)<br>
        at Function.Module.runMain (internal/modules/cjs/loader.js:754:12)<br>
    --<br>
    mappingRule: BreastBodyLocation.RelationToLandmark maps to bodySite.extension*</p>



<a name="171079645"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/197290-cimpl/topic/Shr%20CLI%20exception/near/171079645" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/197290-cimpl/topic/Shr.20CLI.20exception.html#171079645">(Jul 17 2019 at 13:49)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="192611">@Kurt Allen</span> -- I tried to look at this, but I can't find the definition of <code>BreastBodyLocation</code> that you reference.  When I grep for it, I find two definitions.</p>
<p>The first is in BreastAbnormality.txt:<br>
<a href="/user_uploads/10155/nNUDcipO1dbnvZSS3SYa7Q8k/pasted_image.png" target="_blank" title="pasted_image.png">pasted image</a> </p>
<div class="message_inline_image"><a href="/user_uploads/10155/nNUDcipO1dbnvZSS3SYa7Q8k/pasted_image.png" target="_blank" title="pasted image"><img src="/user_uploads/10155/nNUDcipO1dbnvZSS3SYa7Q8k/pasted_image.png"></a></div><p>And the second is in <code>BreastBodyLocation.txt</code>:<br>
<a href="/user_uploads/10155/LOX2pOzNbXK7tEQZgsLcUQ47/pasted_image.png" target="_blank" title="pasted_image.png">pasted image</a> </p>
<div class="message_inline_image"><a href="/user_uploads/10155/LOX2pOzNbXK7tEQZgsLcUQ47/pasted_image.png" target="_blank" title="pasted image"><img src="/user_uploads/10155/LOX2pOzNbXK7tEQZgsLcUQ47/pasted_image.png"></a></div><p>Did you recently change this?  Is it still an issue or is it OBE?</p>



<a name="171098633"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/197290-cimpl/topic/Shr%20CLI%20exception/near/171098633" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kurt Allen <a href="https://fhir.github.io/chat-archive/stream/197290-cimpl/topic/Shr.20CLI.20exception.html#171098633">(Jul 17 2019 at 17:32)</a>:</h4>
<p>Yo <span class="user-mention" data-user-id="191469">@Chris Moesel</span> <br>
(Sorry to take so long getting back to you, my Dad is having some health issues and my time is kinda fragmented...)</p>
<p>My bad, I think you were using the master branch, and I should have said use the development branch. Sorry about that. I created a CliException branch that has the bug in it,so if you wanna checkout that branch and run BuildProfiles.bat you should get the same exception.</p>
<p>Many Thanks!<br>
Kurt A.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
