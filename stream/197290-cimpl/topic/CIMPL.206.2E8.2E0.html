---
layout: page
title: "FHIR Chat  · CIMPL 6.8.0 · cimpl"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/197290-cimpl/index.html">cimpl</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/197290-cimpl/topic/CIMPL.206.2E8.2E0.html">CIMPL 6.8.0</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="176230276"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/197290-cimpl/topic/CIMPL%206.8.0/near/176230276" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/197290-cimpl/topic/CIMPL.206.2E8.2E0.html#176230276">(Sep 20 2019 at 21:04)</a>:</h4>
<p>CIMPL 6.8.0 has just been released.  See the release notes for a full list of changes:<br>
<a href="https://github.com/standardhealth/shr-cli/releases/tag/v6.8.0" target="_blank" title="https://github.com/standardhealth/shr-cli/releases/tag/v6.8.0">https://github.com/standardhealth/shr-cli/releases/tag/v6.8.0</a></p>



<a name="176564149"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/197290-cimpl/topic/CIMPL%206.8.0/near/176564149" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kurt Allen <a href="https://fhir.github.io/chat-archive/stream/197290-cimpl/topic/CIMPL.206.2E8.2E0.html#176564149">(Sep 25 2019 at 13:28)</a>:</h4>
<p>Hey <span class="user-mention" data-user-id="191469">@Chris Moesel</span> <br>
I have been doing a lot of refactoring of the breast radiology to reflect comments from the ballot, and I am seeing some issues<br>
I am using 6.8.0.<br>
So I am not using Objective Fhir, but have created my own Fhir base classes.<br>
Thinking of calling 'em Direct Fhir :-)<br>
Anyways my first issue is that I am getting items in the StructureDef.Differential that I didnt change.</p>
<p>So, I created a (r4) DiagnosticReport entry (see attached), and I derived a class "BreastRadiologyReport.txt" from it.<br>
When I run shr-cli, there is an entry in the differential for DiagnosticReport.basedOn (amoung others) that I didnt change.<br>
In the spirit of outputting a clean ig, it would be best if entries only showed up in the differential if they arr actual changes.<br>
Is this something I did wrong?</p>
<p>This is still in the same repository <a href="https://github.com/applicadia/Fhir-BreastRadiologyReport" target="_blank" title="https://github.com/applicadia/Fhir-BreastRadiologyReport">https://github.com/applicadia/Fhir-BreastRadiologyReport</a>, development branch. Execute R4.BuildProfiles.bat to run shr-cli. <a href="/user_uploads/10155/dj5-78jSazdsYfVYcgNYcXcI/DiagnosticReport.txt" target="_blank" title="DiagnosticReport.txt">DiagnosticReport.txt</a> <a href="/user_uploads/10155/CgoK_E4w_sD4ez2MG_IUkE7m/DiagnosticReport_map_r4.txt" target="_blank" title="DiagnosticReport_map_r4.txt">DiagnosticReport_map_r4.txt</a> <a href="/user_uploads/10155/kJT19DPSGES5aN3lcop4W7Oz/BreastRadiologyReport.txt" target="_blank" title="BreastRadiologyReport.txt">BreastRadiologyReport.txt</a></p>



<a name="176564898"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/197290-cimpl/topic/CIMPL%206.8.0/near/176564898" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/197290-cimpl/topic/CIMPL.206.2E8.2E0.html#176564898">(Sep 25 2019 at 13:37)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="192611">@Kurt Allen</span> -- I'll try to take a look at this later...  But you are correct; things should only show up in differential if something changed (or if one of its children changed, since IG publisher doesn't deal well with "sparse" differentials).</p>
<p>Occasionally something <em>has</em> changed but it's not rendered in the differential view of the profile page in the IG.  Have you looked at the actual JSON profile definition to see what it includes in the differential for that element?</p>



<a name="176565001"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/197290-cimpl/topic/CIMPL%206.8.0/near/176565001" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kurt Allen <a href="https://fhir.github.io/chat-archive/stream/197290-cimpl/topic/CIMPL.206.2E8.2E0.html#176565001">(Sep 25 2019 at 13:38)</a>:</h4>
<p><span class="user-mention" data-user-id="191469">@Chris Moesel</span>  (sorry to dump on you today, getting back to work on this stuff and finding stuff...)<br>
in BreastRadiologyObservation<br>
I added the following lines<br>
    HasMember<br>
    includes BreastRadiologyObservationPatientHistory 0..1</p>
<p>and I get the error:<br>
ERROR 12018:  'Cannot constrain element BreastRadiologyObservationPatientHistory to fhir.observation.HasMember since it is an invalid sub-type'<br>
    During:         Model Expansion<br>
    Class:          BreastRadiologyObservation<br>
    Suggested Fix:  Element has to be based on or otherwise a child of sub-type.</p>
<p>Observation.HasMember is defined as:<br>
// Entry definition of Observation.hasMember<br>
Element: HasMember <br>
Value: fhir.observation.Observation<br>
      or fhir.questionnaireresponse.QuestionnaireResponse<br>
      or fhir.molecularsequence.MolecularSequence </p>
<p>BreastRadiologyObservationPatientHistory is derived from fhir.observation.Observation.</p>
<p>Is this an issue with my code?</p>



<a name="176565436"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/197290-cimpl/topic/CIMPL%206.8.0/near/176565436" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kurt Allen <a href="https://fhir.github.io/chat-archive/stream/197290-cimpl/topic/CIMPL.206.2E8.2E0.html#176565436">(Sep 25 2019 at 13:43)</a>:</h4>
<p>Yo <span class="user-mention" data-user-id="191469">@Chris Moesel</span> <br>
I looked both in the output structure def profile resource and the ig. It was included in both places.<br>
This is from the BreastRadiologyReport differential:<br>
      {<br>
        "id": "DiagnosticReport.basedOn",<br>
        "path": "DiagnosticReport.basedOn",<br>
        "type": [<br>
          {<br>
            "code": "Reference",<br>
            "targetProfile": [<br>
              "<a href="http://hl7.org/fhir/StructureDefinition/CarePlan" target="_blank" title="http://hl7.org/fhir/StructureDefinition/CarePlan">http://hl7.org/fhir/StructureDefinition/CarePlan</a>",<br>
              "<a href="http://hl7.org/fhir/StructureDefinition/ImmunizationRecommendation" target="_blank" title="http://hl7.org/fhir/StructureDefinition/ImmunizationRecommendation">http://hl7.org/fhir/StructureDefinition/ImmunizationRecommendation</a>",<br>
              "<a href="http://hl7.org/fhir/StructureDefinition/MedicationRequest" target="_blank" title="http://hl7.org/fhir/StructureDefinition/MedicationRequest">http://hl7.org/fhir/StructureDefinition/MedicationRequest</a>",<br>
              "<a href="http://hl7.org/fhir/StructureDefinition/NutritionOrder" target="_blank" title="http://hl7.org/fhir/StructureDefinition/NutritionOrder">http://hl7.org/fhir/StructureDefinition/NutritionOrder</a>",<br>
              "<a href="http://hl7.org/fhir/StructureDefinition/ServiceRequest" target="_blank" title="http://hl7.org/fhir/StructureDefinition/ServiceRequest">http://hl7.org/fhir/StructureDefinition/ServiceRequest</a>"<br>
            ]<br>
          }<br>
        ]<br>
      },</p>
<p>I attached the DiagnosticReport and BreastRadiologyReport structure definitions<br>
<a href="/user_uploads/10155/9TluwAjG8kGrNuousYUIX7Tv/structuredefinition-fhir-diagnosticreport-DiagnosticReport.json" target="_blank" title="structuredefinition-fhir-diagnosticreport-DiagnosticReport.json">structuredefinition-fhir-diagnosticreport-DiagnosticReport.json</a> <a href="/user_uploads/10155/4ylb7Orq60OYESzhdFtdK7tl/structuredefinition-brr-BreastRadiologyReport.json" target="_blank" title="structuredefinition-brr-BreastRadiologyReport.json">structuredefinition-brr-BreastRadiologyReport.json</a></p>



<a name="176565493"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/197290-cimpl/topic/CIMPL%206.8.0/near/176565493" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kurt Allen <a href="https://fhir.github.io/chat-archive/stream/197290-cimpl/topic/CIMPL.206.2E8.2E0.html#176565493">(Sep 25 2019 at 13:43)</a>:</h4>
<p>Thanks! (and welcome back :-))</p>



<a name="176565701"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/197290-cimpl/topic/CIMPL%206.8.0/near/176565701" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/197290-cimpl/topic/CIMPL.206.2E8.2E0.html#176565701">(Sep 25 2019 at 13:45)</a>:</h4>
<p>When you use <code>includes</code>, the thing on the left (<code>HasMember</code>) needs to be a supertype of the thing on the right (<code>BreastRadiologyObservationPatientHistory</code>).  That's not the case in your example above -- so that's why it's not working. </p>
<p>Since it is <code>HasMember</code> that repeats (<code>0..*</code>) and not it's <code>Value</code>, you can't simply do <code>HasMember.Value includes...</code> though.  There might need to be some refactoring of the model to support this.  Have you looked at how Mark models it in obf?</p>



<a name="176566006"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/197290-cimpl/topic/CIMPL%206.8.0/near/176566006" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/197290-cimpl/topic/CIMPL.206.2E8.2E0.html#176566006">(Sep 25 2019 at 13:49)</a>:</h4>
<p>Regarding the DiagnosticReport and basedOn, we'll have to take a look at that more closely... I agree that the differential seems entirely unnecessary.</p>



<a name="176566513"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/197290-cimpl/topic/CIMPL%206.8.0/near/176566513" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kurt Allen <a href="https://fhir.github.io/chat-archive/stream/197290-cimpl/topic/CIMPL.206.2E8.2E0.html#176566513">(Sep 25 2019 at 13:54)</a>:</h4>
<p>My bad.. Thanks!</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
