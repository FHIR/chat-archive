[
    {
        "content": "<p>The IG says, (from inpatient</p>\n<p>Name    Flags   Card.   Type    Description &amp; Constraintsdoco<br>\n.. ExplanationOfBenefit I   0..*    C4BBExplanationOfBenefit    Explanation of Benefit resource<br>\n... meta    SΣ  1..1    Meta    Metadata about the resource<br>\n.... profile    SΣ  1..*    canonical(StructureDefinition)  Profiles this resource claims to conform to</p>\n<p>What it doesn't say is what the value shall be. <br>\nI can look at an example, BUT I don't think coding to an example (which may not be correct) is the correct thing to do.<br>\n  \"meta\" : {<br>\n    \"lastUpdated\" : \"2019-12-12T09:14:11+00:00\",<br>\n    \"profile\" : [<br>\n      \"<a href=\"http://hl7.org/fhir/us/carin-bb/StructureDefinition/C4BB-ExplanationOfBenefit-Inpatient-Institutional\">http://hl7.org/fhir/us/carin-bb/StructureDefinition/C4BB-ExplanationOfBenefit-Inpatient-Institutional</a>\"<br>\n    ]<br>\n  },</p>\n<p>Is that the value that conformance requires? If so where is it stated in the IG (non-example)?</p>",
        "id": 218562175,
        "sender_full_name": "Daniel Venton",
        "timestamp": 1606919041
    },
    {
        "content": "<p>Good point!   Not sure whether this is best specified with an invariant (one of the elements of meta.profile must refer to the appropriate profile) or through a hard coded constraint.</p>",
        "id": 218599084,
        "sender_full_name": "Saul Kravitz",
        "timestamp": 1606933768
    },
    {
        "content": "<p>See discussion here: <a href=\"#narrow/stream/215610-shorthand/topic/meta.2Eprofile.20requirement\">https://chat.fhir.org/#narrow/stream/215610-shorthand/topic/meta.2Eprofile.20requirement</a></p>",
        "id": 218696862,
        "sender_full_name": "Saul Kravitz",
        "timestamp": 1607004531
    },
    {
        "content": "<p>I think the heart of this issue is that the profile should not require meta.profile for validation since the data within the model can change and the validity of the profile will always need verified. Also, the client posting the data may not be aware of every profile the resource conforms to. By keeping this as optional (will not fail during profile validation) we can validate first, and include the profile in meta.profile when appropriate. There are some cases, such as Inpatient vs Outpatient where a single resource could be valid according to two profiles. In this case it may be beneficial to assert the desired profile beforehand.</p>",
        "id": 218731710,
        "sender_full_name": "Josh Lamb",
        "timestamp": 1607018556
    },
    {
        "content": "<p>It is beneficial to declare the profile to which an instance is intended to conform as you often cannot determine instance accuracy from the instance alone.  That an instance conforms to multiple profiles is often not useful, and certainly it is not efficient to take each instance received and then check it's conformance to all known profiles to derive an assumption of what was intended. <br>\nFor example,  profile A has element x as optional, profile B has element x as required. If an instance received does not include element x is it a valid instance of profile A and therefore may be accepted or an invalid instance of profile B and therefore should be rejected?</p>",
        "id": 218736486,
        "sender_full_name": "Paul Knapp",
        "timestamp": 1607020886
    },
    {
        "content": "<p>Good points Paul. I agree this does not sound efficient. Both approaches are supported though by leaving meta.profile as optional.</p>",
        "id": 218745065,
        "sender_full_name": "Josh Lamb",
        "timestamp": 1607024893
    },
    {
        "content": "<p>This was debated, and the decision was made to require the profile be declared.   The implementation of that decision by yours. truly in the IG was incorrect. Now I know how to do it correctly.</p>",
        "id": 218759333,
        "sender_full_name": "Saul Kravitz",
        "timestamp": 1607032196
    }
]