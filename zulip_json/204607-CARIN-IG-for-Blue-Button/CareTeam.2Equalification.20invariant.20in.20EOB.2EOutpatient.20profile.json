[
    {
        "content": "<p>Running FHIR Validator on an outpatient EOB against the CARIN 1.1 Outpatient Profile, and cannot seem to get past the invariant \"EOB-careteam-qualification\".  The error is </p>\n<p><em>\"EOB-careteam-qualification: 'Care Team Performing physician's qualifications are from US-Core-Provider-Specialty Value Set' Rule 'Care Team Performing physician's qualifications are from US-Core-Provider-Specialty Value Set' Failed\"</em></p>\n<p>See my JSON snippet at the bottom of this thread.</p>\n<p>I'm wondering if this is a FHIR Path issue with the invariant, similar <a href=\"#narrow/stream/204607-CARIN-IG.20for.20Blue.20Button.C2.AE/topic/Poor.20fhirpath.20in.20EOB-inst-careTeam.20constraints\">to this thread</a> and <a href=\"https://jira.hl7.org/browse/FHIR-28530\">this JIRA issue</a></p>\n<p>I may be misreading the FHIRPath but I think the expression right of the IMPLIES operator has a small error.  </p>\n<div class=\"codehilite\"><pre><span></span><code>implies\ncareTeam.role.where(coding.where(code in (&#39;performing&#39; )).exists()).exists().qualification.memberOf(&#39;http://hl7.org/fhir/us/core/ValueSet/us-core-provider-specialty&#39;)\n</code></pre></div>\n<p>I believe the expression above references qualification as a child of role, not a sibling.  I think the correct expression would look something like this:</p>\n<div class=\"codehilite\"><pre><span></span><code>implies\ncareTeam.where(role.coding.where(code=&#39;performing&#39;)).qualification.memberOf(&#39;http://hl7.org/fhir/us/core/ValueSet/us-core-provider-specialty&#39;)\n</code></pre></div>\n<p>Here is a snippet of the JSON that is failing the validator.  Is this incorrect?</p>\n<div class=\"codehilite\"><pre><span></span><code>    &quot;role&quot; : {\n      &quot;coding&quot; : [ {\n        &quot;system&quot; : &quot;http://hl7.org/fhir/us/carin-bb/CodeSystem/C4BBClaimCareTeamRole&quot;,\n        &quot;code&quot; : &quot;performing&quot;,\n        &quot;display&quot; : &quot;Performing provider&quot;\n      } ]\n    },\n    &quot;qualification&quot;: {\n        &quot;coding&quot; : [ {\n            &quot;system&quot; : &quot;https://nucc.org/provider-taxonomy&quot;,\n            &quot;code&quot; : &quot;103TC0700X&quot;,\n            &quot;display&quot; : &quot;Clinical Psychologist&quot;\n          } ]\n    }\n</code></pre></div>\n<p>Thanks for any insight/help with this.</p>",
        "id": 266995935,
        "sender_full_name": "Bill Harty",
        "timestamp": 1641419235
    },
    {
        "content": "<p>Can you let me know what version of the IG you are looking at?</p>",
        "id": 266999582,
        "sender_full_name": "Corey Spears",
        "timestamp": 1641421082
    },
    {
        "content": "<p>Our intention is to validate against STU1 (1.1).   The resource I'm using has a Meta.profile = \"<a href=\"http://hl7.org/fhir/us/carin-bb/StructureDefinition/C4BB-ExplanationOfBenefit-Outpatient-Institutional|1.1.0\">http://hl7.org/fhir/us/carin-bb/StructureDefinition/C4BB-ExplanationOfBenefit-Outpatient-Institutional|1.1.0</a>\".   Here is the validator command I'm using (with json file attached.... synthetic data so PHI-safe)</p>\n<div class=\"codehilite\"><pre><span></span><code>java -jar validator_cli.jar    eob.json   -ig http://hl7.org/fhir/us/carin-bb/STU1.1\n</code></pre></div>\n<p>thanks for helping with this. </p>\n<p><a href=\"/user_uploads/10155/UWkjvv98ezDf_rQ3UV1VDpYA/eob.json\">eob.json</a></p>",
        "id": 267071254,
        "sender_full_name": "Bill Harty",
        "timestamp": 1641481844
    },
    {
        "content": "<p>I am not entirely sure what the issue is here. I know US Core changed a number of the ValueSets from US Core IG defined to point to VSAC ValueSets in US Core 4.x. The provider specialty is one such ValueSet. Looking at <a href=\"http://tx.fhir.org\">tx.fhir.org</a>, I am not seeing the original \"<a href=\"http://hl7.org/fhir/us/core/ValueSet/us-core-provider-specialty\">http://hl7.org/fhir/us/core/ValueSet/us-core-provider-specialty</a>\" ValueSet loaded. I am not sure what it is validating against. </p>\n<p>We may need someone like <span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> , <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> , or <span class=\"user-mention\" data-user-id=\"191405\">@Rob Hausam</span> to chime in on a couple of things including:</p>\n<ul>\n<li>What happens to previously published ValueSets that no longer appear in the latest version of the IG (And the canonical no longer resolves)?</li>\n<li>How can validations be run on these older ValueSet definitions?</li>\n<li>Is the ValueSet missing from <a href=\"http://tx.fhir.org\">tx.fhir.org</a>, and if it is, should it? And if it should be missing, should it being throwing this error?</li>\n</ul>",
        "id": 267244951,
        "sender_full_name": "Corey Spears",
        "timestamp": 1641590862
    },
    {
        "content": "<p>Any thoughts on this <span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span>  or <span class=\"user-mention\" data-user-id=\"191405\">@Rob Hausam</span> ?</p>",
        "id": 268481620,
        "sender_full_name": "Corey Spears",
        "timestamp": 1642556158
    },
    {
        "content": "<p>When you invoke the validator, does it tell you that it's importing the FHIR core IG and does it tell you the correct version?  It should...  All of the old value sets should be in the package for that IG which should be available to the validator.  If it doesn't tell you it's grabbing that IG, then you MAY need to specify a -ig parameter that specifies the US core value set version too.</p>",
        "id": 268493330,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1642569395
    }
]