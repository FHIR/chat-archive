[
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"296344\">@Joel Hansen (Aetna)</span> I registered on you developer portal, but I cannot figure out what the FHIR end point is, can you help?</p>",
        "id": 217143146,
        "sender_full_name": "Michele Mottini",
        "timestamp": 1605710705
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"296344\">@Joel Hansen (Aetna)</span> OneRecord registered our application but we are getting an error when calling the authorize endpoint.  The error is:  Missing aud or invalid value passed in Request</p>\n<p>We are passing aud=https://vteapif1.aetna.com/fhirdemo/v1/patientaccess.  Is there a different value we need to pass?  Thanks!</p>",
        "id": 217151874,
        "sender_full_name": "Kate Skrocki",
        "timestamp": 1605714179
    },
    {
        "content": "<p>OK, now I know the end point!</p>",
        "id": 217152076,
        "sender_full_name": "Michele Mottini",
        "timestamp": 1605714258
    },
    {
        "content": "<p>great!</p>",
        "id": 217160866,
        "sender_full_name": "Bea Thompson",
        "timestamp": 1605717416
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"337885\">Kate Skrocki</span> <a href=\"#narrow/stream/204607-CARIN-IG.20for.20Blue.20Button.C2.AE/topic/11.2F18-19.20CARIN.20Connectathon.20-.20Aetna.20server/near/217151874\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"296344\">Joel Hansen (Aetna)</span> OneRecord registered our application but we are getting an error when calling the authorize endpoint.  The error is:  Missing aud or invalid value passed in Request</p>\n<p>We are passing aud=https://vteapif1.aetna.com/fhirdemo/v1/patientaccess.  Is there a different value we need to pass?  Thanks!</p>\n</blockquote>\n<p>Kate - looking into your access, I sent Jennifer an email yesterday - did you guys create an application on the dev portal and subscribe to the API?  If so I need to get you approved.  Tx!  Bea</p>",
        "id": 217161269,
        "sender_full_name": "Bea Thompson",
        "timestamp": 1605717562
    },
    {
        "content": "<p>I cannot connect because the CapabilityStatement does not contain the SMART OAuth2 URLs</p>",
        "id": 217161775,
        "sender_full_name": "Michele Mottini",
        "timestamp": 1605717729
    },
    {
        "content": "<p>Hi Bea.  Yes, Jennifer created an application yesterday.  Thank you!</p>",
        "id": 217162739,
        "sender_full_name": "Kate Skrocki",
        "timestamp": 1605718096
    },
    {
        "content": "<p>OK will reach out to our folks, will get back to you</p>",
        "id": 217162826,
        "sender_full_name": "Bea Thompson",
        "timestamp": 1605718127
    },
    {
        "content": "<p>I hard-coded the OAuth2 URLs to get around the problem but now I get:</p>\n<div class=\"codehilite\"><pre><span></span><code>&lt;status&gt;\n&lt;statusCode&gt;400&lt;/statusCode&gt;\n&lt;detail&gt;Bad Request&lt;/detail&gt;\n&lt;severity&gt;E&lt;/severity&gt;\n&lt;additionalStatus&gt;\n&lt;statusCode&gt;400&lt;/statusCode&gt;\n&lt;serviceName&gt;v1fhirserverauthoauth2authorization&lt;/serviceName&gt;\n&lt;detail&gt;Missing code_challenge in Request&lt;/detail&gt;\n&lt;severity&gt;E&lt;/severity&gt;\n&lt;loginAttempts&gt;No Login Attempts made&lt;/loginAttempts&gt;\n&lt;/additionalStatus&gt;\n&lt;/status&gt;\n</code></pre></div>\n<p>from the authorization page at <a href=\"https://vteapif1.aetna.com/fhirdemo/v1/fhirserver_auth/oauth2/authorize\">https://vteapif1.aetna.com/fhirdemo/v1/fhirserver_auth/oauth2/authorize</a>. Is it expecting PKCE?</p>",
        "id": 217163767,
        "sender_full_name": "Michele Mottini",
        "timestamp": 1605718500
    },
    {
        "content": "<p>Kate - you guys haven't subscribed to the API - go into Your applications, under your app click API's you should see a subscribe now button pop up to the left in the purple bar.  Once you subscribe I can approve it.  Thanks!  Bea</p>",
        "id": 217164265,
        "sender_full_name": "Bea Thompson",
        "timestamp": 1605718702
    },
    {
        "content": "<p>Michele  - did you use the test members on our developer portal site to login?</p>",
        "id": 217164666,
        "sender_full_name": "Janice Hsieh",
        "timestamp": 1605718873
    },
    {
        "content": "<p>I cannot get to the login form - I get the error I posted above</p>",
        "id": 217164756,
        "sender_full_name": "Michele Mottini",
        "timestamp": 1605718913
    },
    {
        "content": "<p>PKCE is required for members accessing the smart app though user token</p>",
        "id": 217164914,
        "sender_full_name": "Janice Hsieh",
        "timestamp": 1605718965
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"365375\">@Bea Thompson</span> We are now subscribed.  Please let me know when we are approved.  Thank you!</p>",
        "id": 217165220,
        "sender_full_name": "Kate Skrocki",
        "timestamp": 1605719095
    },
    {
        "content": "<p>Great - will ask developers now</p>",
        "id": 217165254,
        "sender_full_name": "Bea Thompson",
        "timestamp": 1605719110
    },
    {
        "content": "<blockquote>\n<p>PKCE is required for members accessing the smart app though user token</p>\n</blockquote>\n<p>That is not compliant with SMART auth</p>",
        "id": 217165628,
        "sender_full_name": "Michele Mottini",
        "timestamp": 1605719261
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"337885\">@Kate Skrocki</span>   You should be good to go!</p>",
        "id": 217165646,
        "sender_full_name": "Bea Thompson",
        "timestamp": 1605719272
    },
    {
        "content": "<p>Thanks <span class=\"user-mention\" data-user-id=\"365375\">@Bea Thompson</span> will try again.</p>",
        "id": 217165705,
        "sender_full_name": "Kate Skrocki",
        "timestamp": 1605719286
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191912\">@Michele Mottini</span>  our understanding is that provider can impose PKCE as  additional security and it's recommended by our security team.  Can you point out the SMART auth spec that says PKCE is not compliant?</p>",
        "id": 217168904,
        "sender_full_name": "Janice Hsieh",
        "timestamp": 1605720616
    },
    {
        "content": "<p>It is never even mentioned in the SMART specs - so you cannot impose it <span class=\"user-mention\" data-user-id=\"191315\">@Josh Mandel</span></p>",
        "id": 217169269,
        "sender_full_name": "Michele Mottini",
        "timestamp": 1605720783
    },
    {
        "content": "<p>Is there any update on the CapabilityStatement not containing the OAuth 2 urls? CommonHealth uses the CapabilityStatement for authorization / token endpoint discovery and we're blocked without them</p>",
        "id": 217169442,
        "sender_full_name": "James Kizer",
        "timestamp": 1605720847
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"365382\">@Janice Hsieh</span> Yea, <span class=\"user-mention\" data-user-id=\"191912\">@Michele Mottini</span> is correct. The SMART auth spec is required under the CMS rule. Here's the relevant section and link to the rule. <a href=\"https://www.govinfo.gov/content/pkg/FR-2020-05-01/pdf/2020-05050.pdf\">https://www.govinfo.gov/content/pkg/FR-2020-05-01/pdf/2020-05050.pdf</a>  We are all learning as we go! <br>\nC. Application Programming Interface (API) Standard<br>\nIn section III.C.2.b. of the CMS Interoperability and Patient Access proposed rule, we proposed to require compliance with the API technical standard proposed by ONC for HHS adoption at 45 CFR 170.215 as finalized (84 FR 7589). By requiring compliance with 45 CFR 170.215, we proposed to require use of the foundational Health Level 7® (HL7) Fast Healthcare Interoperability Resources® (FHIR)<br>\nstandard, several implementation specifications specific to FHIR, and complementary security and app registration protocols, specifically the Substitutable Medical Applications, Reusable Technologies (SMART) Application Launch Implementation Guide (IG) 1.0.0 (including mandatory support for ‘‘refresh tokens,’’ \"Standalone Launch,’’ and ‘‘EHR Launch’’ requirements), which is a profile of the OAuth 2.0 specification, as well as the OpenID Connect Core 1.0 standard, incorporating errata set 1.</p>",
        "id": 217170224,
        "sender_full_name": "Ryan Howells",
        "timestamp": 1605721219
    },
    {
        "content": "<p>Hi Ryan/Michele, yes we do realize SMART is required &amp; are complying.... however, we understood that we could add on top of SMART, as long as it didn't conflict</p>",
        "id": 217170768,
        "sender_full_name": "Barbara Valeno",
        "timestamp": 1605721438
    },
    {
        "content": "<p>You can add PKCE but your cannot _require_ it</p>",
        "id": 217170858,
        "sender_full_name": "Michele Mottini",
        "timestamp": 1605721469
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"365375\">@Bea Thompson</span> We are still getting a \"Missing aud or invalid value passed in Request\" error when attempting to call authorize.   We are passing aud as aud=https://vteapif1.aetna.com/fhirdemo/v1/patientaccess.  Thanks.</p>",
        "id": 217172618,
        "sender_full_name": "Kate Skrocki",
        "timestamp": 1605722234
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191912\">@Michele Mottini</span> our security team is requiring PKCE for public endpoint... &amp; it appears at least one other payer is doing the same</p>",
        "id": 217173348,
        "sender_full_name": "Barbara Valeno",
        "timestamp": 1605722546
    },
    {
        "content": "<p>Kate - Please use aud=https://vteapif1.aetna.com/fhirdemo</p>",
        "id": 217174273,
        "sender_full_name": "Janice Hsieh",
        "timestamp": 1605722952
    },
    {
        "content": "<p>Thankyou <span class=\"user-mention\" data-user-id=\"365382\">@Janice Hsieh</span> .  That worked.</p>",
        "id": 217174745,
        "sender_full_name": "Kate Skrocki",
        "timestamp": 1605723185
    },
    {
        "content": "<p>James, we are working on updating the capability statement.</p>",
        "id": 217178372,
        "sender_full_name": "Janice Hsieh",
        "timestamp": 1605724903
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"365382\">Janice Hsieh</span> <a href=\"#narrow/stream/204607-CARIN-IG.20for.20Blue.20Button.C2.AE/topic/11.2F18-19.20CARIN.20Connectathon.20-.20Aetna.20server/near/217178372\">said</a>:</p>\n<blockquote>\n<p>James, we are working on updating the capability statement.</p>\n</blockquote>\n<p>Thanks <span class=\"user-mention\" data-user-id=\"365382\">@Janice Hsieh</span></p>",
        "id": 217179190,
        "sender_full_name": "James Kizer",
        "timestamp": 1605725286
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"337885\">Kate Skrocki</span> <a href=\"#narrow/stream/204607-CARIN-IG.20for.20Blue.20Button.C2.AE/topic/11.2F18-19.20CARIN.20Connectathon.20-.20Aetna.20server/near/217174745\">said</a>:</p>\n<blockquote>\n<p>Thankyou <span class=\"user-mention silent\" data-user-id=\"365382\">Janice Hsieh</span> .  That worked.</p>\n</blockquote>\n<p><span class=\"user-mention\" data-user-id=\"337885\">@Kate Skrocki</span>  are you able to connect to our patient API?</p>",
        "id": 217180424,
        "sender_full_name": "Janice Hsieh",
        "timestamp": 1605725876
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"365382\">@Janice Hsieh</span> We are getting an invalid_grant error when attempting to retrieve a token.</p>",
        "id": 217184744,
        "sender_full_name": "Kate Skrocki",
        "timestamp": 1605727748
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"337885\">@Kate Skrocki</span> are you able to join the zoom Aetna breakout? maybe we can talk through &amp; help resolve there</p>",
        "id": 217186156,
        "sender_full_name": "Barbara Valeno",
        "timestamp": 1605728398
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"270281\">@Barbara Valeno</span> I was able to load the Patient resource.  Thanks again!</p>",
        "id": 217189051,
        "sender_full_name": "Kate Skrocki",
        "timestamp": 1605729771
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"337885\">@Kate Skrocki</span> great! any chance you can send me a screen shot showing the patient data?</p>",
        "id": 217189599,
        "sender_full_name": "Barbara Valeno",
        "timestamp": 1605730017
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"270281\">@Barbara Valeno</span> It's just in Postman right now,  I will get it configured in our app and retest.  Thanks.</p>",
        "id": 217189690,
        "sender_full_name": "Kate Skrocki",
        "timestamp": 1605730066
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"365368\">@James Kizer</span> can you join the breakout session to see if we can work around the capability statement?</p>",
        "id": 217193268,
        "sender_full_name": "Janice Hsieh",
        "timestamp": 1605731770
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"337885\">@Kate Skrocki</span>   0 HI Kate - would you be able to demo your testing with us at tomorrow's \"demo\" session?</p>",
        "id": 217195358,
        "sender_full_name": "Barbara Valeno",
        "timestamp": 1605732943
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"270281\">@Barbara Valeno</span> we have a bit more config and testing to do to call it from our app.  Let me confirm that we can get that all working and get back to you.  Thanks.</p>",
        "id": 217196652,
        "sender_full_name": "Kate Skrocki",
        "timestamp": 1605733547
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"337885\">@Kate Skrocki</span> sounds good - thank you</p>",
        "id": 217199897,
        "sender_full_name": "Barbara Valeno",
        "timestamp": 1605735362
    }
]