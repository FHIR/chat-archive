[
    {
        "content": "<p>hey all. There was some short discussion at FHIR DevDays about coming up with a standard query language for analytics - e.g. if you have a common data store of JSON resources, you could share queries. </p>\n<p>is anyone interested in this?</p>",
        "id": 153973949,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1530843315
    },
    {
        "content": "<p>I'm interested. In what ways would this differ from Clinical Quality Language, if at all?</p>",
        "id": 153974001,
        "sender_full_name": "Kevin Weaver",
        "timestamp": 1530875112
    },
    {
        "content": "<p>very different... <span class=\"user-mention\" data-user-id=\"193657\">@Ryan Brush</span> might want to comment further</p>",
        "id": 153974009,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1530876008
    },
    {
        "content": "<p>Something more akin to writing SQL queries against a JSON document store perhaps? Sort of like <a href=\"https://engineering.cerner.com/blog/announcing-bunsen-fhir-data-with-apache-spark/\" target=\"_blank\" title=\"https://engineering.cerner.com/blog/announcing-bunsen-fhir-data-with-apache-spark/\">Cerner's Bunsen</a>, or the kind of thing you could do with <a href=\"https://aws.amazon.com/athena/\" target=\"_blank\" title=\"https://aws.amazon.com/athena/\">Amazon Athena</a> or Redshift using their semi-structured data querying capabilities?</p>",
        "id": 153974012,
        "sender_full_name": "Kevin Weaver",
        "timestamp": 1530876788
    },
    {
        "content": "<p>yes Bunsen is one of the projects at question</p>",
        "id": 153974013,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1530877667
    },
    {
        "content": "<p>I would be interested as well. Do you already have some use cases in mind for sharing the queries?</p>",
        "id": 153974271,
        "sender_full_name": "Alexander Zautke",
        "timestamp": 1531117427
    },
    {
        "content": "<p>Bunsen looks interesting. I like solutions that stick very closely to the original format. My concern with the protobuf implementation is that inevitably it must make decisions about format conversion whereas other similar engines simply read the original JSON.  Looks like Bunsen is the latter.  Apache Drill over nd-json is another.</p>",
        "id": 153974319,
        "sender_full_name": "Chris Grenz",
        "timestamp": 1531146144
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> I’m interested as well, I’ve planned to look more closely at Bunsen(w/ AWS EMR/RedshIft) and the Protobuf(w/ Goofle BIgQuery) implementation.  This is the first time I’ve heard of Apache Drill over nd-json, I’ll be sure to take a look at that too.</p>",
        "id": 153974364,
        "sender_full_name": "Aslan Brooke",
        "timestamp": 1531164209
    },
    {
        "content": "<p>Hey everyone, author of Bunsen here. I'd be happy to answer any Bunsen-related questions or discuss these SQL-over-FHIR options more broadly. For those who weren't at the FHIR DevDays talk, much of the content is now a blog post at <a href=\"https://engineering.cerner.com/blog/data-engineering-with-bunsen/\" target=\"_blank\" title=\"https://engineering.cerner.com/blog/data-engineering-with-bunsen/\">https://engineering.cerner.com/blog/data-engineering-with-bunsen/</a>,  and the examples I showed at DevDays are here: <a href=\"https://github.com/cerner/bunsen-tutorial/blob/master/data_engineering_tutorial.ipynb\" target=\"_blank\" title=\"https://github.com/cerner/bunsen-tutorial/blob/master/data_engineering_tutorial.ipynb\">https://github.com/cerner/bunsen-tutorial/blob/master/data_engineering_tutorial.ipynb</a></p>",
        "id": 153974366,
        "sender_full_name": "Ryan Brush",
        "timestamp": 1531164644
    },
    {
        "content": "<p>While Bunsen itself is fully open source, I think we can broaden this approach by working towards common standards for representing FHIR in SQL-queryable structures. Ideally we could take the same structure-aware SQL queries over large FHIR datasets and run them on many different query engines, making our work portable. If this has broad interest it might be worth formalizing the effort. (After chatting informally with Eyal and Patrik from Google, I think they are open to the idea.)</p>",
        "id": 153974368,
        "sender_full_name": "Ryan Brush",
        "timestamp": 1531164936
    },
    {
        "content": "<p>I'm also interested. To <span class=\"user-mention\" data-user-id=\"193430\">@Alexander Zautke</span>'s question above, do we have an initial set of use cases?</p>",
        "id": 153974459,
        "sender_full_name": "Kenny Blanchette",
        "timestamp": 1531230524
    },
    {
        "content": "<p>Our use cases center on leveraging the excellent work done in defining and curating the FHIR data models in a \"data lake\"-style environment. So we might query billions of observations and hundreds of millions of conditions to identify people at risk of some given complication, for instance. Another example is using FHIR as a basis for machine learning workloads...by making it natively usable in a data lake, we can directly apply ML techniques to it. This makes predictive models easier to implement, since they are already expressed in terms of the FHIR standard.</p>\n<p>We happen to use Apache Spark (and its Spark SQL query language) for this type of analysis, so the Bunsen project's goal is just to make very large collections of FHIR records easily used in Spark.  However, this approach shouldn't be unique to any specific technology....there are several excellent analytic query engines that can handle nested structures like FHIR resources.</p>",
        "id": 153974506,
        "sender_full_name": "Ryan Brush",
        "timestamp": 1531255354
    },
    {
        "content": "<p>I think, it can be extension of SQL - because now SQL is lingua franca for analytic and supported by many databases and more and more of them started support for JSON. We can use SQL standard as basis and design embeded language to address json fields in resources and then transpile it to different dialects (postgres, bigquery, etc)</p>",
        "id": 153974944,
        "sender_full_name": "nicola (RIO/SS)",
        "timestamp": 1531408426
    },
    {
        "content": "<p>For starters, I had something much less ambitious than a transpiled SQL dialect, although that would be interesting. There are multiple instances today where large store of FHIR resources are being directly queried by analytic tools, such as Google BigQuery (as seen in these examples: <a href=\"https://github.com/google/fhir/tree/master/examples/bigquery\" target=\"_blank\" title=\"https://github.com/google/fhir/tree/master/examples/bigquery\">https://github.com/google/fhir/tree/master/examples/bigquery</a>) and Apache Spark (as seen in these examples: <a href=\"https://github.com/cerner/bunsen-tutorial/blob/master/data_engineering_tutorial.ipynb\" target=\"_blank\" title=\"https://github.com/cerner/bunsen-tutorial/blob/master/data_engineering_tutorial.ipynb\">https://github.com/cerner/bunsen-tutorial/blob/master/data_engineering_tutorial.ipynb</a>). I know Apache Drill is being used for similar workloads as well. The thing is these all use a slightly different approach to representing the FHIR resources in SQL schemas (with nested structures), meaning queries aren't portable between these systems. A common way to represent FHIR in SQL schemas -- possibly combined with some high-value SQL UDFs like \"in_valueset\" -- would make it much easier to share and migrate large-scale analysis of FHIR data.</p>",
        "id": 153975006,
        "sender_full_name": "Ryan Brush",
        "timestamp": 1531426493
    },
    {
        "content": "<p>The above also be a foundation for richer functionality, like the transpiler idea over resources. I'm not sure we can fully abstract away the query engine itself for many workloads, since a lot of involved data analysis leverages (for example) the creation of temporary views of large complex datasets that are cached for a user's session. But I think we can 1.) make SQL queries over large FHIR datasets largely portable and 2.) make it easy to move between query engines and representations (like Protocol Buffers), so users can easily apply whatever tool makes the most sense for their analysis.</p>",
        "id": 153975007,
        "sender_full_name": "Ryan Brush",
        "timestamp": 1531426778
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> Are we planning to start a work group around this topic? Or is the next step a bit more informal - potentially a topic at the upcoming Connectathon in Sept?</p>",
        "id": 153981766,
        "sender_full_name": "Kenny Blanchette",
        "timestamp": 1533300286
    },
    {
        "content": "<p>I'm not sure. Any further discussions <span class=\"user-mention\" data-user-id=\"194832\">@Eyal Oren</span> and <span class=\"user-mention\" data-user-id=\"193657\">@Ryan Brush</span> ?</p>",
        "id": 153981775,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1533301300
    },
    {
        "content": "<p>I am interested in moving forward with this, even if it is informal to start. I'll reach out to <span class=\"user-mention\" data-user-id=\"194832\">@Eyal Oren</span> as well...I've had a few conversations with him and <span class=\"user-mention\" data-user-id=\"194833\">@Patrik Sundberg</span>, so I think they're interested too.</p>",
        "id": 153981823,
        "sender_full_name": "Ryan Brush",
        "timestamp": 1533309074
    },
    {
        "content": "<p>yes, we should move forward. reasonable next steps including getting a group together to highlight potentially tricky areas (choice types, contained resources, valuesets, extensions, etc) and see if we can come to a consensus. i'll be at the connectathon in sept and i believe <span class=\"user-mention\" data-user-id=\"193657\">@Ryan Brush</span> will be as well.</p>",
        "id": 153982801,
        "sender_full_name": "Patrik Sundberg",
        "timestamp": 1533590099
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"195380\">@Kenny Blanchette</span> , <span class=\"user-mention\" data-user-id=\"193657\">@Ryan Brush</span>  and <span class=\"user-mention\" data-user-id=\"194833\">@Patrik Sundberg</span>   -  may be reuse our new <code>Storage and Analytic track</code> for that?</p>",
        "id": 153983314,
        "sender_full_name": "nicola (RIO/SS)",
        "timestamp": 1533669060
    },
    {
        "content": "<p>Here is the repo - <a href=\"https://github.com/fhir-fuel/fhir-storage-and-analytics-track\" target=\"_blank\" title=\"https://github.com/fhir-fuel/fhir-storage-and-analytics-track\">https://github.com/fhir-fuel/fhir-storage-and-analytics-track</a></p>",
        "id": 153983319,
        "sender_full_name": "nicola (RIO/SS)",
        "timestamp": 1533669551
    },
    {
        "content": "<p>We can start discussion in github issues and define scope for next connectathon</p>",
        "id": 153983320,
        "sender_full_name": "nicola (RIO/SS)",
        "timestamp": 1533669582
    },
    {
        "content": "<p>And here is our initial ideas for storage format for databases - <a href=\"https://github.com/fhir-fuel/fhir-fuel.github.io/issues\" target=\"_blank\" title=\"https://github.com/fhir-fuel/fhir-fuel.github.io/issues\">https://github.com/fhir-fuel/fhir-fuel.github.io/issues</a></p>",
        "id": 153983326,
        "sender_full_name": "nicola (RIO/SS)",
        "timestamp": 1533670072
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191318\">@nicola (RIO/SS)</span> These topics certainly seem to align, so using the same track makes sense to me.</p>",
        "id": 153983332,
        "sender_full_name": "Ryan Brush",
        "timestamp": 1533672813
    },
    {
        "content": "<p>As an aside,  here are some initial notes we had on this topic: <a href=\"https://docs.google.com/document/d/1IPyI-4GYlF400vmZvrtjDYL6jauHdjeLfjGJMo6yWtA/edit?usp=sharing\" target=\"_blank\" title=\"https://docs.google.com/document/d/1IPyI-4GYlF400vmZvrtjDYL6jauHdjeLfjGJMo6yWtA/edit?usp=sharing\">https://docs.google.com/document/d/1IPyI-4GYlF400vmZvrtjDYL6jauHdjeLfjGJMo6yWtA/edit?usp=sharing</a></p>\n<p>I think a number of us are converging from different directions and use cases. So far I've emphasized a desire for simple and portable SQL over FHIR data models across a number of systems in the above link, but I think we can achieve that along with other objectives -- like ease of integration into machine learning tools.</p>",
        "id": 153983333,
        "sender_full_name": "Ryan Brush",
        "timestamp": 1533673141
    },
    {
        "content": "<p>Cool, i see your sections are very similar to our issues - may be merge it?</p>",
        "id": 153983339,
        "sender_full_name": "nicola (RIO/SS)",
        "timestamp": 1533674224
    },
    {
        "content": "<p>I'm open to that. I have to confess I'm somewhat new to the process here. Are we far enough along to formally create a Connectathon track? There are a number of specific questions in that document (and that <span class=\"user-mention\" data-user-id=\"194833\">@Patrik Sundberg</span> mentioned above) that we'll need to drill into. Are GitHub issues the best place to track those?</p>\n<p>Also, just an FYI: I'm in the middle of a long-distance relocation this week, so I'll have limited connectivity for the next several days, but should be in good shape starting next week.</p>",
        "id": 153983368,
        "sender_full_name": "Ryan Brush",
        "timestamp": 1533674892
    },
    {
        "content": "<p>It supposed to be self-organizing :) I like, discussion in issues more than in chat or document. <span class=\"user-mention\" data-user-id=\"194833\">@Patrik Sundberg</span> ? For track we have to create announce and plan for participants. Potentially we can start weekly or 2weekly calls to work on this track starting from next week?</p>",
        "id": 153983380,
        "sender_full_name": "nicola (RIO/SS)",
        "timestamp": 1533675814
    },
    {
        "content": "<p>In theory, the tracks were supposed to be proposed a few weeks back :) . In practice, it's not always as neat as that (but as soon as possible would be appreciated)! Here's the place to add the proposal: <a href=\"http://wiki.hl7.org/index.php?title=Category:201809_FHIR_Connectathon_Track_Proposals\" target=\"_blank\" title=\"http://wiki.hl7.org/index.php?title=Category:201809_FHIR_Connectathon_Track_Proposals\">http://wiki.hl7.org/index.php?title=Category:201809_FHIR_Connectathon_Track_Proposals</a> . There's a template that can be used...</p>",
        "id": 153983391,
        "sender_full_name": "David Hay",
        "timestamp": 1533676606
    },
    {
        "content": "<p>(deleted)</p>",
        "id": 153983537,
        "sender_full_name": "nicola (RIO/SS)",
        "timestamp": 1533711579
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191321\">@David Hay</span>  -  I've just created proposal for next connectathon - <a href=\"http://wiki.hl7.org/index.php?title=201809_FHIR_Storage_and_Analytics\" target=\"_blank\" title=\"http://wiki.hl7.org/index.php?title=201809_FHIR_Storage_and_Analytics\">http://wiki.hl7.org/index.php?title=201809_FHIR_Storage_and_Analytics</a>; <span class=\"user-mention\" data-user-id=\"193657\">@Ryan Brush</span>  &amp; <span class=\"user-mention\" data-user-id=\"194833\">@Patrik Sundberg</span>  please review and fix it.</p>",
        "id": 153983567,
        "sender_full_name": "nicola (RIO/SS)",
        "timestamp": 1533714535
    },
    {
        "content": "<p>Will add to the connectathon wiki page (actually hopefully <span class=\"user-mention\" data-user-id=\"194993\">@Sandra Vance</span> will!) . We'll review at the FMG meeting next wednesday (US time) so would be great if any edits were complete by then...</p>",
        "id": 153983907,
        "sender_full_name": "David Hay",
        "timestamp": 1533766114
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191321\">@David Hay</span>  Hello. I’m going to work on this page with Nicola.Does this mean that we will receive feedback on Wednesday 15/08 or even later?</p>",
        "id": 153984193,
        "sender_full_name": "Grigory Nokhrin",
        "timestamp": 1533824196
    },
    {
        "content": "<p>Well, that will be more of a QA review rather than a comprehensive check - we check for basic things like  a track lead, description and scenarios. Would be best if you have all that stuff entered ahead of then...</p>",
        "id": 153984351,
        "sender_full_name": "David Hay",
        "timestamp": 1533838197
    },
    {
        "content": "<blockquote>\n<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> Are we planning to start a work group around this topic? Or is the next step a bit more informal - potentially a topic at the upcoming Connectathon in Sept?</p>\n</blockquote>\n<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span>  proposed us to create FHIR Foundation Project . It would be nice to have a weekly calls/meetings and start working on track for next connectathon and possibly produce some artefacts :). Should we move this discussion into separate topic?</p>",
        "id": 153986900,
        "sender_full_name": "nicola (RIO/SS)",
        "timestamp": 1534340446
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> can you tell us more - what means FHIR Foundation Project?</p>",
        "id": 153986901,
        "sender_full_name": "nicola (RIO/SS)",
        "timestamp": 1534340483
    },
    {
        "content": "<p>I'm not sure that this work sits nicely in HL7. And there'd be an overhead for HL7. The Foundation would have lower overhead, and is a better home for code etc</p>",
        "id": 153987237,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1534378501
    },
    {
        "content": "<p>who else is interested?</p>",
        "id": 153987238,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1534378508
    },
    {
        "content": "<p>I'm definitely interested though I'm not sure what exactly i'm signing up for :).</p>\n<p>As for the connectathon, I feel pretty confident we'll have code on <a href=\"http://github.com/google/fhir\" target=\"_blank\" title=\"http://github.com/google/fhir\">github.com/google/fhir</a> by then for people to play with. It would be nice to have a track where people bring code to transform/load sample resources, and we can all play with the results to get a feel for the strengths and weaknesses of various approaches.</p>",
        "id": 153987419,
        "sender_full_name": "Patrik Sundberg",
        "timestamp": 1534399891
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"194833\">@Patrik Sundberg</span> we want to do the same with postgresql and fhirbase. So people will be able compare bigquery and postgresql :). David Hay asked us to formulate scenarios for track! May be <span class=\"user-mention\" data-user-id=\"193657\">@Ryan Brush</span> can do the same with spark and bunsen. Then we can discuss common subset of SQL for FHIR.</p>",
        "id": 153987526,
        "sender_full_name": "nicola (RIO/SS)",
        "timestamp": 1534421409
    },
    {
        "content": "<p>Has anybody ever used ElasticSearch to store fhir resources? Its a noSQL database that stores documents as JSON objects and supports nested structures very well. The JSON query language has a steep learning curve, but the combination of lucene black magic, inversed indices, and consistency sacrifices makes for unbelievably fast queries and aggregations over massive amounts of data.</p>",
        "id": 154009406,
        "sender_full_name": "Corey Pauley",
        "timestamp": 1539700150
    },
    {
        "content": "<p>Just curious if that route has been explored by anybody.</p>",
        "id": 154009407,
        "sender_full_name": "Corey Pauley",
        "timestamp": 1539700206
    },
    {
        "content": "<p>We played with elastic - it works good for simple cases. But you need to generate schema for fhir data and it is tricky to make it work for more complex queries, which require joining.</p>",
        "id": 154009409,
        "sender_full_name": "nicola (RIO/SS)",
        "timestamp": 1539700552
    },
    {
        "content": "<p><a href=\"https://github.com/jamesagnew/hapi-fhir/tree/master/hapi-fhir-jpaserver-example#using-elasticsearch-as-the-search-engine-instead-of-the-default-apache-lucene\" target=\"_blank\" title=\"https://github.com/jamesagnew/hapi-fhir/tree/master/hapi-fhir-jpaserver-example#using-elasticsearch-as-the-search-engine-instead-of-the-default-apache-lucene\">HAPI JPA Server</a> uses Lucene and optionally ElasticSearch for its full text search.</p>",
        "id": 154009746,
        "sender_full_name": "Christiaan Knaap",
        "timestamp": 1539770219
    }
]