[
    {
        "content": "<p>Has anyone seen a public domain FHIR-based relational schema?</p>",
        "id": 229771186,
        "sender_full_name": "Chris Busch",
        "timestamp": 1615421822
    },
    {
        "content": "<p>Hi. We used pg admin to get the schema</p>",
        "id": 229802334,
        "sender_full_name": "Vasyl Herman",
        "timestamp": 1615444994
    },
    {
        "content": "<p>Also interested in the official one.</p>",
        "id": 229802414,
        "sender_full_name": "Vasyl Herman",
        "timestamp": 1615445056
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"376706\">@Vasyl Herman</span>  Can you share details on \"using pg admin to get the schema\"?</p>",
        "id": 229852233,
        "sender_full_name": "Chris Busch",
        "timestamp": 1615471399
    },
    {
        "content": "<p>I am not sure that a generic relational schema is possible. FHIR makes heavy use of the document-like data representation, concretely 'nestedness', optional data points, etc., and resources keep getting updated.<br>\nThis would be really hard to track in a normalized relational schema.  And a schema export from an existing dataset (e.g. with pg admin) is only valid at this point in time. Any resource added might make a re-design necessary.... (whether this is likely depends on the size and variety of the existing dataset, of course)</p>\n<p>For our analytics we go with a limited relational schema, i.e. we extract only the key/value pairs we need for our visualizations.</p>",
        "id": 229852880,
        "sender_full_name": "Paul Hellwig",
        "timestamp": 1615471636
    },
    {
        "content": "<p>There is no \"official\" schema - any FHIR-based schema is going to have trade-offs driven by how you plan to use the data.</p>",
        "id": 229868543,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1615476884
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"396450\">@Chris Busch</span> Hello, clone <code>hapi-fhir-jpaserver-starter</code> <br>\nMy datasource config looks like this:</p>\n<div class=\"codehilite\" data-code-language=\"YAML\"><pre><span></span><code><span class=\"nt\">spring</span><span class=\"p\">:</span>\n  <span class=\"nt\">datasource</span><span class=\"p\">:</span>\n    <span class=\"nt\">url</span><span class=\"p\">:</span> <span class=\"s\">'jdbc:postgresql://hapi-fhir-pg:5432/hapi'</span>\n    <span class=\"nt\">username</span><span class=\"p\">:</span> <span class=\"l l-Scalar l-Scalar-Plain\">user</span>\n    <span class=\"nt\">password</span><span class=\"p\">:</span> <span class=\"l l-Scalar l-Scalar-Plain\">passwd</span>\n    <span class=\"nt\">driverClassName</span><span class=\"p\">:</span> <span class=\"l l-Scalar l-Scalar-Plain\">org.postgresql.Driver</span>\n</code></pre></div>\n<p>docker-compose.yml like this:</p>\n<div class=\"codehilite\" data-code-language=\"YAML\"><pre><span></span><code><span class=\"nt\">version</span><span class=\"p\">:</span> <span class=\"s\">\"3.7\"</span>\n<span class=\"nt\">services</span><span class=\"p\">:</span>\n  <span class=\"nt\">hapi-fhir-jpaserver-start</span><span class=\"p\">:</span>\n    <span class=\"nt\">depends_on</span><span class=\"p\">:</span>\n      <span class=\"p p-Indicator\">-</span> <span class=\"l l-Scalar l-Scalar-Plain\">hapi-fhir-mysql</span>\n<span class=\"c1\">#    image: \"hapiproject/hapi:latest\"</span>\n    <span class=\"nt\">build</span><span class=\"p\">:</span> <span class=\"l l-Scalar l-Scalar-Plain\">.</span>\n    <span class=\"nt\">restart</span><span class=\"p\">:</span> <span class=\"l l-Scalar l-Scalar-Plain\">on-failure</span>\n    <span class=\"nt\">ports</span><span class=\"p\">:</span>\n      <span class=\"p p-Indicator\">-</span> <span class=\"s\">\"8080:8080\"</span>\n    <span class=\"nt\">volumes</span><span class=\"p\">:</span>\n      <span class=\"p p-Indicator\">-</span> <span class=\"l l-Scalar l-Scalar-Plain\">hapi-data:/data/hapi</span>\n      <span class=\"p p-Indicator\">-</span> <span class=\"l l-Scalar l-Scalar-Plain\">./configs/application.yaml:/data/hapi/application.yaml</span>\n    <span class=\"nt\">environment</span><span class=\"p\">:</span>\n      <span class=\"nt\">SPRING_CONFIG_LOCATION</span><span class=\"p\">:</span> <span class=\"s\">'file:///data/hapi/application.yaml'</span>\n\n  <span class=\"nt\">hapi-fhir-pg</span><span class=\"p\">:</span>\n    <span class=\"nt\">image</span><span class=\"p\">:</span> <span class=\"l l-Scalar l-Scalar-Plain\">postgres:10</span>\n    <span class=\"nt\">restart</span><span class=\"p\">:</span> <span class=\"l l-Scalar l-Scalar-Plain\">always</span>\n    <span class=\"nt\">volumes</span><span class=\"p\">:</span>\n      <span class=\"p p-Indicator\">-</span> <span class=\"l l-Scalar l-Scalar-Plain\">hapi-fhir-pg:/var/lib/postgresql/data:Z</span>\n    <span class=\"nt\">environment</span><span class=\"p\">:</span>\n      <span class=\"nt\">POSTGRES_USER</span><span class=\"p\">:</span> <span class=\"l l-Scalar l-Scalar-Plain\">admin</span>\n      <span class=\"nt\">POSTGRES_PASSWORD</span><span class=\"p\">:</span> <span class=\"l l-Scalar l-Scalar-Plain\">admin</span>\n      <span class=\"nt\">POSTGRES_DB</span><span class=\"p\">:</span> <span class=\"l l-Scalar l-Scalar-Plain\">hapi</span>\n      <span class=\"nt\">http_proxy</span><span class=\"p\">:</span>\n      <span class=\"nt\">https_proxy</span><span class=\"p\">:</span>\n      <span class=\"nt\">no_proxy</span><span class=\"p\">:</span>\n    <span class=\"nt\">ports</span><span class=\"p\">:</span>\n    <span class=\"p p-Indicator\">-</span> <span class=\"l l-Scalar l-Scalar-Plain\">5431:5432</span>\n\n  <span class=\"nt\">pgadmin</span><span class=\"p\">:</span>\n    <span class=\"nt\">image</span><span class=\"p\">:</span> <span class=\"l l-Scalar l-Scalar-Plain\">dpage/pgadmin4</span>\n    <span class=\"nt\">restart</span><span class=\"p\">:</span> <span class=\"l l-Scalar l-Scalar-Plain\">always</span>\n    <span class=\"nt\">ports</span><span class=\"p\">:</span>\n      <span class=\"p p-Indicator\">-</span> <span class=\"l l-Scalar l-Scalar-Plain\">8280:80</span>\n    <span class=\"nt\">environment</span><span class=\"p\">:</span>\n      <span class=\"nt\">PGADMIN_DEFAULT_EMAIL</span><span class=\"p\">:</span> <span class=\"l l-Scalar l-Scalar-Plain\">yours</span>\n      <span class=\"nt\">PGADMIN_DEFAULT_PASSWORD</span><span class=\"p\">:</span> <span class=\"l l-Scalar l-Scalar-Plain\">admin</span>\n    <span class=\"nt\">volumes</span><span class=\"p\">:</span>\n    <span class=\"p p-Indicator\">-</span> <span class=\"l l-Scalar l-Scalar-Plain\">pgadmin-data:/var/lib/pgadmin</span>\n\n<span class=\"nt\">volumes</span><span class=\"p\">:</span>\n  <span class=\"nt\">hapi-data</span><span class=\"p\">:</span>\n  <span class=\"nt\">hapi-fhir-pg</span><span class=\"p\">:</span>\n</code></pre></div>\n<p>then start docker-compose and finally you can use pg admin to backup the shcema</p>",
        "id": 229869846,
        "sender_full_name": "Vasyl Herman",
        "timestamp": 1615477366
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"396450\">@Chris Busch</span> I am wondering why you need this?</p>",
        "id": 229870176,
        "sender_full_name": "Vasyl Herman",
        "timestamp": 1615477481
    },
    {
        "content": "<p>I'll toss in here that the firebase folks used binary blobs (jsonb) in postgres for the full resource content, and IIRC only create fields for resource id. The binary blobs can be indexed as one wishes.</p>",
        "id": 229874430,
        "sender_full_name": "Richard Stanley",
        "timestamp": 1615478668
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"376706\">Vasyl Herman</span> [said](<a href=\"#narrow/stream/179219-analytics-on.20FHIR/topic/FHIR-\">https://chat.fhir.org/#narrow/stream/179219-analytics-on.20FHIR/topic/FHIR-</a><br>\n<span class=\"user-mention\" data-user-id=\"396450\">@Chris Busch</span> I am wondering why you need this?</p>\n<p>We are creating a persistent database which will receive and send data in FHIR but the primary use is analytics.  Thinking it will make life easier to follow the FHIR organization and naming to the extent possible.</p>",
        "id": 229898364,
        "sender_full_name": "Chris Busch",
        "timestamp": 1615486285
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"396450\">@Chris Busch</span><br>\nThanks for answering. I hope it helps you.</p>",
        "id": 229919767,
        "sender_full_name": "Vasyl Herman",
        "timestamp": 1615494287
    }
]