[
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"340597\">@Ryan Owens</span> have you had a chance to get started with generating data for SMART Scheduling Links? Want to make sure you have what you need to be productive.</p>",
        "id": 234177674,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1618240624
    },
    {
        "content": "<p>Our development team is working on producing some sample output. Our goal is to be able to provide zipped files to consumers at some point during the event. I don't have a specific date right now but the team knows that consumers are ready to look at our sample whenever we can produce it.</p>",
        "id": 234199206,
        "sender_full_name": "Ryan Owens",
        "timestamp": 1618248904
    },
    {
        "content": "<p>Thanks Ryan! Definitely keep us updated when you know more about the timing -- and of course I should highlight that while starting with a .zip file will let us review data by hand, we're really hoping to get to the point where you can make a testing endpoint available over https, since this is how client apps are designed to retrieve data.</p>",
        "id": 234350087,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1618328340
    },
    {
        "content": "<p>An HTTP(S) endpoint most likely won't be available until perhaps the week after the connectathon at the earliest. We have been given an estimate of one to two weeks for our API gateway team to build their integration for this (since internally we're publishing to a static web site instead of standing up a \"proper\" RESTful API) and then there would be follow-on red tape to configuring the access for participating consumers. Our original plan was to simply expose a static website, but that is not the direction that was ultimately chosen.</p>",
        "id": 234356845,
        "sender_full_name": "Ryan Owens",
        "timestamp": 1618330765
    },
    {
        "content": "<blockquote>\n<p>since internally we're publishing to a static web site instead of standing up a \"proper\" RESTful API</p>\n</blockquote>\n<p>That sounds like a good direction, and very much in line with what SMART Scheduling Links optimizes for !</p>",
        "id": 234358041,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1618331176
    },
    {
        "content": "<p>FYI: The Kroger team is hoping to have sample data available by end of day today. This will be all fictitious data but will represent the structure and granularity we would expect to have when we go to production.</p>",
        "id": 235198286,
        "sender_full_name": "Ryan Owens",
        "timestamp": 1618845331
    },
    {
        "content": "<p>Here is a sample for the Kroger team.   Right now we have a single location, schedule, and slot file but plan making a slot file for each state.   By tomorrow morning we hold to have the site/manifest, slot and location files updated to represent this structure.   The data in these files right now is fictitious but the structure and elements are those that we plan to provide. <br>\n<a href=\"https://schedulingavbsadev.z20.web.core.windows.net/$bulk-publish\">https://schedulingavbsadev.z20.web.core.windows.net/$bulk-publish</a></p>",
        "id": 235408456,
        "sender_full_name": "Mike Maass",
        "timestamp": 1618950072
    },
    {
        "content": "<p>Thanks for sharing this! (And awesome to see that all 2799 locations are in my hometown ;-))</p>",
        "id": 235410275,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1618950833
    },
    {
        "content": "<p>Now that you've had a chance to work on this a bit, any new thoughts on <a href=\"#narrow/stream/281612-smart.2Fscheduling-links/topic/How.20often.20are.20Published.20Data.20refreshed.3F\">update frequency</a>?</p>",
        "id": 235410702,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1618950971
    },
    {
        "content": "<p>Kroger's sample data has been updated to provide a more realistic representation of locations and the slot files have been broken up by state.</p>",
        "id": 235507322,
        "sender_full_name": "Mike Maass",
        "timestamp": 1619010966
    },
    {
        "content": "<p>The Kroger team has our API in production and ready for consumers to start checking out. There may be a few fixes yet to come, but it's generally ready for use. To access it, go to <a href=\"https://developer.kroger.com/\">https://developer.kroger.com/</a> and sign up for a developer account. Once you have completed that, go to <a href=\"https://developer.kroger.com/documentation/partner#s-partnership-request\">https://developer.kroger.com/documentation/partner#s-partnership-request</a> and submit a partner request. Request access to the \"Vaccine Finder API\" in the partner request. Feel free to reach out to me if you need further assistance. You can e-mail me directly at ryan.owens at <a href=\"http://kroger.com\">kroger.com</a>.</p>",
        "id": 240319308,
        "sender_full_name": "Ryan Owens",
        "timestamp": 1622033737
    },
    {
        "content": "<p>Awesome <span class=\"user-mention\" data-user-id=\"340597\">@Ryan Owens</span>! Will you add the Endpoint info to the registry? <a href=\"https://github.com/smart-on-fhir/smart-scheduling-links/tree/master/publisher-repository\">https://github.com/smart-on-fhir/smart-scheduling-links/tree/master/publisher-repository</a></p>",
        "id": 240320316,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1622034164
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191315\">@Josh Mandel</span>  I think that's the wrong link. I did just submit a PR to what I think is the correct registry.</p>",
        "id": 240345032,
        "sender_full_name": "Ryan Owens",
        "timestamp": 1622043591
    },
    {
        "content": "<p>Ha, sorry (copy/paste error -- fixing my link above). And thanks!!</p>",
        "id": 240348021,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1622044840
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"340597\">@Ryan Owens</span> tried to register for this, but \"Vaccine Finder API\" is not in the list of APIs I can request at <a href=\"https://developer.kroger.com/admin/user/apps/register/\">https://developer.kroger.com/admin/user/apps/register/</a><br>\nAm I in the right place?</p>",
        "id": 240356081,
        "sender_full_name": "Rob Brackett",
        "timestamp": 1622048139
    },
    {
        "content": "<p>It's unlisted. You have to complete the support form and ask to have it added to your profile for access. Our business team wanted it to be \"by request only\" and not listed for all developers.</p>",
        "id": 240356678,
        "sender_full_name": "Ryan Owens",
        "timestamp": 1622048362
    },
    {
        "content": "<p>Ah, I see now, the partner URL you sent doesn't go to the right place until after I've registered, so I was looking at the wrong form!</p>",
        "id": 240356975,
        "sender_full_name": "Rob Brackett",
        "timestamp": 1622048480
    },
    {
        "content": "<p>(The other form is a select list, so I couldn't put in something that's not there.)</p>",
        "id": 240357023,
        "sender_full_name": "Rob Brackett",
        "timestamp": 1622048499
    },
    {
        "content": "<p>Oh, which link was wrong? I haven't gone through the flow, so maybe I've got something off.</p>",
        "id": 240357043,
        "sender_full_name": "Ryan Owens",
        "timestamp": 1622048509
    },
    {
        "content": "<p>If you're not logged in, <a href=\"https://developer.kroger.com/documentation/partner#s-partnership-request\">https://developer.kroger.com/documentation/partner#s-partnership-request</a> took me to a different page, which had a \"register\" link that went to <a href=\"https://developer.kroger.com/admin/user/apps/register/\">https://developer.kroger.com/admin/user/apps/register/</a></p>",
        "id": 240357799,
        "sender_full_name": "Rob Brackett",
        "timestamp": 1622048851
    },
    {
        "content": "<p>Actually, looks like it's working in a private window now, so maybe I just got browser tabs mixed up. Hmmm.</p>",
        "id": 240357909,
        "sender_full_name": "Rob Brackett",
        "timestamp": 1622048890
    },
    {
        "content": "<p>Sorry for false alarm</p>",
        "id": 240357920,
        "sender_full_name": "Rob Brackett",
        "timestamp": 1622048896
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"340597\">@Ryan Owens</span> I finally got access approved! Thanks for the details on how to navigate the process. I have a few questions after trying it out:</p>\n<ul>\n<li>\n<p>Do you have any plans to add product or dose information to the schedules? I think I mentioned on this week’s call, but in both New Jersey and Alaska (two states I’m working directly with), focus has shifted a lot from just yes/no availability to getting more details, <em>especially</em> product type. Since many regions of their states have regular availability now, the vaccine finder is helping their case workers and volunteers sign people up, and being able to show people which product is available where (so they can choose) has gone a long way towards reducing friction and hesitancy and getting more shots in arms.</p>\n</li>\n<li>\n<p>Do you have any plans to add capacity information to the slots? We try to prioritize locations with more availability in our search results when possible. USDR has also been working on analytics and decision-making tools for health officers with this data, and knowing the capacity of <em>unavailable</em> slots is super valuable when we can get it (so we can start to say something about how utilized various locations are).</p>\n</li>\n<li>\n<p>Finally, we were curious about situations where different chains/brands are at the same location. For example, the King Soopers with ID \"62000019\" and the Little Clinic with ID \"06104\" have the same address (\"3100 S Sheridan Blvd, Denver, CO\"), and looking at the King Soopers website, it seems like the Little Clinic is inside the King Soopers. I would have expected them to have the same availability (or one to have availability listed and the other none), but they have different availability. For example, reading both of these from the same request:</p>\n</li>\n</ul>\n<table>\n<thead>\n<tr>\n<th>Start Time</th>\n<th>King Soopers</th>\n<th>Little Clinic</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>2021-05-28T09:00:00-06:00</code></td>\n<td>free</td>\n<td>free</td>\n</tr>\n<tr>\n<td><code>2021-05-29T11:00:00-06:00</code></td>\n<td>busy</td>\n<td>free</td>\n</tr>\n<tr>\n<td><code>2021-05-30T11:00:00-06:00</code></td>\n<td>busy</td>\n<td>free</td>\n</tr>\n<tr>\n<td><code>2021-05-31T09:00:00-06:00</code></td>\n<td>free</td>\n<td>free</td>\n</tr>\n<tr>\n<td><code>2021-06-01T09:00:00-06:00</code></td>\n<td>free</td>\n<td>free</td>\n</tr>\n<tr>\n<td><code>2021-06-02T09:00:00-06:00</code></td>\n<td>free</td>\n<td>free</td>\n</tr>\n<tr>\n<td><code>2021-06-03T09:00:00-06:00</code></td>\n<td>free</td>\n<td>busy</td>\n</tr>\n<tr>\n<td><code>2021-06-04T09:00:00-06:00</code></td>\n<td>busy</td>\n<td>busy</td>\n</tr>\n</tbody>\n</table>",
        "id": 240625547,
        "sender_full_name": "Rob Brackett",
        "timestamp": 1622217978
    },
    {
        "content": "<p>Also, as a more basic question: roughly how frequently are you refreshing/how frequently can I call the API? The response’s <code>access-control-max-age</code> header is set to <code>3628800</code> (42 days)!</p>",
        "id": 240627601,
        "sender_full_name": "Rob Brackett",
        "timestamp": 1622218905
    },
    {
        "content": "<p>Is the $ in $bulk-publish only recommended or is it required? We have some concerns about compatibility when propagating the character through our network layers.</p>",
        "id": 240637029,
        "sender_full_name": "Patrick Stuart",
        "timestamp": 1622223446
    },
    {
        "content": "<p>Required.</p>",
        "id": 240650583,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1622230360
    },
    {
        "content": "<p>(It's a FHIR operation convention.)</p>",
        "id": 240650591,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1622230369
    },
    {
        "content": "<p>Would be good to understand if there are specific software tools known to choke on this, though. We haven't heard reports of this.</p>",
        "id": 240650648,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1622230401
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"398591\">@Rob Brackett</span>  Sorry for the delay - I took a few days off. Regarding your questions on content (product and capacity), those were questions which we debated with our product team extensively and our business and product teams did not want to expose that information through an API. Their decision was that if customers wanted that level of data, they needed to get it through our web properties. I will pass your comments along to our product team, but at this time I do not know of any plans to expand the data we are providing.</p>\n<p>To your third question, our pharmacies and TLC clinics maintain separate inventory so it is very possible that a pharmacy may have product and a TLC clinic at the same location may not or vice versa. They operate largely as two separate businesses. They do not share inventory as far as I'm aware.</p>\n<p>For frequency, I <em>think</em> we are currently updating the data every 15 or 30 minutes but that is temporary. Over the next several weeks we will be moving to more of an event driven model. It sounds like the header is messed up, so I'll follow up with the team to find out what's going on there. My guess is that it's related to a default value being added by a team up the chain from our dev team, but I'm not sure. Thanks for the info.</p>",
        "id": 240937015,
        "sender_full_name": "Ryan Owens",
        "timestamp": 1622552268
    },
    {
        "content": "<blockquote>\n<p>on content (product and capacity)… our business and product teams did not want to expose that information through an API. Their decision was that if customers wanted that level of data, they needed to get it through our web properties.</p>\n</blockquote>\n<p>OK. FWIW, having this kind of data (including busy capacity) would be <em>extremely</em> helpful for us both in resident facing tools (product is the biggest deal here) and in decision-making tools/analysis for states.</p>",
        "id": 240960860,
        "sender_full_name": "Rob Brackett",
        "timestamp": 1622561902
    },
    {
        "content": "<blockquote>\n<p>our pharmacies and TLC clinics maintain separate inventory so it is very possible that a pharmacy may have product and a TLC clinic at the same location may not or vice versa.</p>\n</blockquote>\n<p>Ah, thanks for the clarification. I had foolishly assumed that, where a TLC was embedded in and listed as a service of another store, it was functioning <em>as</em> the store’s pharmacy.</p>",
        "id": 240960995,
        "sender_full_name": "Rob Brackett",
        "timestamp": 1622561972
    },
    {
        "content": "<p>No, TLC's are healthcare clinics with Nurse Practitioners. They do not operate as pharmacies. Separate lines of business for us.</p>",
        "id": 241063308,
        "sender_full_name": "Ryan Owens",
        "timestamp": 1622575737
    },
    {
        "content": "<p>Hi , This is Hemanth from CastlightHealth . When we try accessing the Kroger fhir api, <a href=\"https://api.kroger.com/v1/health-wellness/schedules/vaccines/$bulk-publish\">https://api.kroger.com/v1/health-wellness/schedules/vaccines/$bulk-publish</a> we run into access token error. Can someone form Kroger help with removing the access token. The MVP appointment availability system is to integrate with fhir implementations that don't need authentication.</p>\n<p>Hemanth Gorur: {<br>\n\"error_description\": \"The access token is missing\",<br>\n\"error\": \"invalid_request\"<br>\n}</p>",
        "id": 241979055,
        "sender_full_name": "Hemanth Gorur",
        "timestamp": 1623183065
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"410156\">@Hemanth Gorur</span>  you're describing the current scope of work for <a href=\"http://vaccines.gov\">vaccines.gov</a>?</p>",
        "id": 241989856,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1623188136
    },
    {
        "content": "<p>Yes , I am describing the current state of work . I was wondering if the  api, <a href=\"https://api.kroger.com/v1/health-wellness/schedules/vaccines/$bulk-publish\">https://api.kroger.com/v1/health-wellness/schedules/vaccines/$bulk-publish</a> can be made open ( without Authentication ) . This will help us surface Appointment Availability for  Kroger in MVP.</p>",
        "id": 241991906,
        "sender_full_name": "Hemanth Gorur",
        "timestamp": 1623188762
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"340597\">@Ryan Owens</span> I know this has come up before, and was out of scope initially; from the experience to-date, is there a chance to align Kroger's access policy with other pharmacies (CVS, Walgreens, and Rite-Aid)?</p>",
        "id": 241992311,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1623188993
    },
    {
        "content": "<p>At this time, there has been no interest on our business team side to changing the authentication requirements. We knew this was going to be a consideration for some which is why we pushed to make sure the spec included support for OAuth, which I think it does (or at least it did when we started development). I have passed feedback like this along to our business leadership, but there has been no appetite so far to make any changes.</p>",
        "id": 242054779,
        "sender_full_name": "Ryan Owens",
        "timestamp": 1623240538
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"340597\">@Ryan Owens</span> I was working with <span class=\"user-mention\" data-user-id=\"406306\">@Nick Muerdter</span> tonight and we noticed an interesting discrepancy between the Kroger locations API and the SMART Scheduling links API — the locations with the IDs <code>85000898</code> and <code>85000899</code> are both marked as Frys Pharmacies in the SMART Scheduling links API, but the same IDs and addresses are shown as community clinics in the locations API (“Grace Methodist Church - Mesa” and “Dysart Community Center - El Mirage” respectively).</p>\n<p>A quick check on Google Street View seems to indicate the non-Fry's names are correct, and I’m worried there might be a more widespread issue with the locations in the SMART Scheduling Links API. Do you have any insight as to what might be happening here?</p>",
        "id": 242302308,
        "sender_full_name": "Rob Brackett",
        "timestamp": 1623388802
    },
    {
        "content": "<p>Hmmm... I have a theory about why this would be, but I'll have to pass this along to the dev team to have them take a look. I suspect it has to do with how we internally handle temporary clinic locations. Thanks for letting us know.</p>",
        "id": 242339405,
        "sender_full_name": "Ryan Owens",
        "timestamp": 1623415549
    },
    {
        "content": "<p>No problem! Thanks for providing a good channel for feedback. <span aria-label=\"smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"smile\">:smile:</span></p>",
        "id": 242342401,
        "sender_full_name": "Rob Brackett",
        "timestamp": 1623417066
    },
    {
        "content": "<p>As of this afternoon, Kroger has removed the authentication requirement for our vaccine appoint availability API endpoint. Consumers should be able to access it now without a token.</p>",
        "id": 247033812,
        "sender_full_name": "Ryan Owens",
        "timestamp": 1627075061
    },
    {
        "content": "<p>Amazing!! Thanks for the update and the leadership on this <span class=\"user-mention\" data-user-id=\"340597\">@Ryan Owens</span>.</p>",
        "id": 247034458,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1627075476
    },
    {
        "content": "<p>Hi <span class=\"user-mention\" data-user-id=\"340597\">@Ryan Owens</span> we noticed that the published data is 2021-08-11T00:38:40+00:00, which is not aligned with the format in spec 2021-08-11T03:46:20.534Z</p>",
        "id": 249115957,
        "sender_full_name": "Dennis Ai",
        "timestamp": 1628692218
    },
    {
        "content": "<p>Is that something you could take a look at?</p>",
        "id": 249115993,
        "sender_full_name": "Dennis Ai",
        "timestamp": 1628692232
    },
    {
        "content": "<p>Both of the examples you wrote here <span class=\"user-mention\" data-user-id=\"402529\">@Dennis Ai</span>  look like valid ISO 8601 dates to me.</p>",
        "id": 249120827,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1628694290
    },
    {
        "content": "<p>Are you using a standard parser that is choking on one of these? The constraints on the fhir instant data type are that it needs to be at least to the one second precision, and then it must include a time zone specifier. Both of the examples here seem to meet both of those requirements.</p>",
        "id": 249121189,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1628694451
    },
    {
        "content": "<p><a href=\"http://hl7.org/fhir/datatypes.html#instant\">http://hl7.org/fhir/datatypes.html#instant</a></p>",
        "id": 249121321,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1628694499
    },
    {
        "content": "<p>I would agree with Josh. The spec specifically says ISO8601, with which our data appears to be compliant. While I also agree that the examples in the spec use the \"Z\" notation, those are just examples and not the actual spec.</p>",
        "id": 249121399,
        "sender_full_name": "Ryan Owens",
        "timestamp": 1628694542
    },
    {
        "content": "<p>We will evaluate the data and start the integration.</p>",
        "id": 249766561,
        "sender_full_name": "Hemanth Gorur",
        "timestamp": 1629228432
    },
    {
        "content": "<p>We are close to pushing the Kroger appointment availability to production. We are matching on the store id ( location Id ). </p>\n<p>However I want to report what we found after analyzing the Appointment data published on <a href=\"https://api.kroger.com/v1/health-wellness/schedules/vaccines/$bulk-publish\">https://api.kroger.com/v1/health-wellness/schedules/vaccines/$bulk-publish</a>. </p>\n<p>The value for  <a href=\"https://cdc.gov/vaccines/programs/vtrcks\">https://cdc.gov/vaccines/programs/vtrcks</a> is repeated. Here are some examples of it. </p>\n<p>{\"resourceType\":\"Location\",\"id\":\"70300108\",\"identifier\":[{\"system\":\"https://cdc.gov/vaccines/programs/vtrcks\",\"value\":\"40173619\"}],\"name\":\"Ralphs Pharmacy #70300108\",\"telecom\":[{\"system\":\"phone\",\"value\":\"8585971550\"},{\"system\":\"url\",\"value\":\"https://www.ralphs.com/rx/landing-page\"}],\"address\":{\"line\":[\"8657 Villa La Jolla Dr\"],\"city\":\"La Jolla\",\"state\":\"CA\",\"postalCode\":\"92037\"}}<br>\n{\"resourceType\":\"Location\",\"id\":\"03108\",\"identifier\":[{\"system\":\"https://cdc.gov/vaccines/programs/vtrcks\",\"value\":\"40173619\"}],\"name\":\"The Little Clinic #03108\",\"telecom\":[{\"system\":\"phone\",\"value\":\"6026802386\"},{\"system\":\"url\",\"value\":\"https://www.thelittleclinic.com\"}],\"address\":{\"line\":[\"2727 W Bell Rd\"],\"city\":\"Phoenix\",\"state\":\"AZ\",\"postalCode\":\"85053\"}}<br>\n{\"resourceType\":\"Location\",\"id\":\"03111\",\"identifier\":[{\"system\":\"https://cdc.gov/vaccines/programs/vtrcks\",\"value\":\"40173621\"}],\"name\":\"The Little Clinic #03111\",\"telecom\":[{\"system\":\"phone\",\"value\":\"4803396178\"},{\"system\":\"url\",\"value\":\"https://www.thelittleclinic.com\"}],\"address\":{\"line\":[\"1935 N Stapley Dr\"],\"city\":\"Mesa\",\"state\":\"AZ\",\"postalCode\":\"85203\"}}<br>\n{\"resourceType\":\"Location\",\"id\":\"70300111\",\"identifier\":[{\"system\":\"https://cdc.gov/vaccines/programs/vtrcks\",\"value\":\"40173621\"}],\"name\":\"Ralphs Pharmacy #70300111\",\"telecom\":[{\"system\":\"phone\",\"value\":\"3105389008\"},{\"system\":\"url\",\"value\":\"https://www.ralphs.com/rx/landing-page\"}],\"address\":{\"line\":[\"2201 W Redondo Beach Blvd\"],\"city\":\"Gardena\",\"state\":\"CA\",\"postalCode\":\"90247\"}}<br>\n{\"resourceType\":\"Location\",\"id\":\"03113\",\"identifier\":[{\"system\":\"https://cdc.gov/vaccines/programs/vtrcks\",\"value\":\"40173622\"}],\"name\":\"The Little Clinic #03113\",\"telecom\":[{\"system\":\"phone\",\"value\":\"4808092409\"},{\"system\":\"url\",\"value\":\"https://www.thelittleclinic.com\"}],\"address\":{\"line\":[\"6470 S Higley Rd\"],\"city\":\"Gilbert\",\"state\":\"AZ\",\"postalCode\":\"85298\"}}<br>\n{\"resourceType\":\"Location\",\"id\":\"70300113\",\"identifier\":[{\"system\":\"https://cdc.gov/vaccines/programs/vtrcks\",\"value\":\"40173622\"}],\"name\":\"Ralphs Pharmacy #70300113\",\"telecom\":[{\"system\":\"phone\",\"value\":\"9093571380\"},{\"system\":\"url\",\"value\":\"https://www.ralphs.com/rx/landing-page\"}],\"address\":{\"line\":[\"16225 Sierra Lakes Pkwy\"],\"city\":\"Fontana\",\"state\":\"CA\",\"postalCode\":\"92336\"}}</p>",
        "id": 250418407,
        "sender_full_name": "Hemanth Gorur",
        "timestamp": 1629756421
    },
    {
        "content": "<p>Hi <span class=\"user-mention\" data-user-id=\"340597\">@Ryan Owens</span> we noticed that the data is only being updated every few days</p>",
        "id": 250421552,
        "sender_full_name": "Dennis Ai",
        "timestamp": 1629758564
    },
    {
        "content": "<p>Can you give us a better understanding of how often the data is refreshed? I was under the impression that it was every 15 or 30 minutes</p>",
        "id": 250421587,
        "sender_full_name": "Dennis Ai",
        "timestamp": 1629758588
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"402529\">@Dennis Ai</span>  The team is investigating, but what specifically leads you to think it is only refreshed every few days? Is it a timestamp? Or are you just not seeing changes? If it's the latter, that may be entirely correct. Our stores open up additional appointments periodically (every few days sounds believable) and I don't think demand is high enough right now for most of our sites to have status changes from available to unavailable, so you may only see data changes every few days even though we are refreshing much more often. On the other hand, if you aren't seeing a timestamp update, then that's another matter.</p>",
        "id": 250546954,
        "sender_full_name": "Ryan Owens",
        "timestamp": 1629838298
    },
    {
        "content": "<p>Hopefully I'm able to clarify a few things here in-regards to the data currently being published.   </p>\n<ol>\n<li>\n<p>We have verified there is an issue with the vtrcks pin for several locations and we are currently working on a resolution that we hope to have released in the near future. </p>\n</li>\n<li>\n<p>As far as the data refresh interval we are currently updating our availability using a batch process that runs every 30 minutes but in the near future will be moving to an event based model where the availability data will be updated every 5 minutes.   With that being said since we are only reporting whether a location has availability (free) or has no availability (Busy) and not specifically on the individual timeslots at the locations.   In addition we only update the FHIR files (slot files) when the availability changes for a location within said file.  As a result the timestamp on many of the files may only get updated a couple times a day.</p>\n</li>\n</ol>",
        "id": 250831589,
        "sender_full_name": "Mike Maass",
        "timestamp": 1630008220
    },
    {
        "content": "<p>If I'm understanding correctly, the timestamp on the manifest should still always be correct (and less than 30 minutes old, and soon to be less than 5 minutes old), even if the manifest is pointing to (some) files that have not changed recently</p>",
        "id": 250834185,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1630009300
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"405431\">@Mike Maass</span>  Can you follow up on Josh's question?</p>",
        "id": 250837009,
        "sender_full_name": "Ryan Owens",
        "timestamp": 1630010473
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191315\">@Josh Mandel</span>   We missed updating the timestamp on the manifest file when incremental updates are being done.   We have a planned release next week and we add a fix for the timestamp in the upcoming release.</p>",
        "id": 250934379,
        "sender_full_name": "Mike Maass",
        "timestamp": 1630072239
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"340597\">@Ryan Owens</span> I was recently cleaning up some of our stuff, and noticed several places where there are &gt;2 locations with the same name at the same address in Kroger's API. I think we talked earlier about a different pharmacy sometimes being embedded within a Grocery store, so I wasn’t suprised to see a \"Kroger Pharmacy\" at the same address as a \"Ralphs.\" However, here's one with <em>three</em> Kroger Pharmacies at the same address as Ralphs!</p>\n<div class=\"codehilite\"><pre><span></span><code>curl &quot;https://api.kroger.com/v1/health-wellness/schedules/vaccines/locations.ndjson&quot; | grep -i &#39;260 S La Brea&#39; | jq\n</code></pre></div>\n<p>I saw more like this, but haven't had a chance to make an exhaustive search. Do you know if this is correct?</p>",
        "id": 258780291,
        "sender_full_name": "Rob Brackett",
        "timestamp": 1634939806
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"398591\">@Rob Brackett</span>  I'll pass this on to the support team. Just to be clear, we would only ever have one pharmacy at a given location. I think what you're referring to as a \"different pharmacy\" is not actually a pharmacy but rather one of our \"The Little Clinic\" locations, our nurse practitioner clinics. They also give vaccines but operate as a different business unit, but they are not pharmacies - they are more like medical practices than pharmacies. We do provide their data though as part of our feed. Having said that though, I don't know that we have any TLC locations in Ralph's (don't quote me on that though) and I think the name in the record would state that it is a TLC location if that were the case. My best guess is that this pharmacy likely operated some off-site pop-up clinics and somehow that's throwing things off. I'll have to wait for the team to investigate.</p>",
        "id": 258961809,
        "sender_full_name": "Ryan Owens",
        "timestamp": 1635169898
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"453025\">@Kyle Boroff</span> leads the team that will be investigating.</p>",
        "id": 258961922,
        "sender_full_name": "Ryan Owens",
        "timestamp": 1635169946
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"398591\">@Rob Brackett</span> We identified the issue.  The multiple extra pharmacies were inactive 'associate only' pop up locations tied to that store.  We have a bug where we are not filtering out these inactive locations.  I am working with the team now to work on the fix and can keep you updated.</p>",
        "id": 258965927,
        "sender_full_name": "Kyle Boroff",
        "timestamp": 1635171771
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"340597\">@Ryan Owens</span> <span class=\"user-mention\" data-user-id=\"453025\">@Kyle Boroff</span> thanks for looking into it! FWIW, I just ran a quick check to find situations where there were multiple locations at the same address, and where the names weren't just \"The Little Clinic\" and one other. There are quite a reasonable number:</p>\n<ul>\n<li><a href=\"/user_uploads/10155/GHOpu4CvESALoR-xKKDZ0dV8/multiple-kroger-locations-by-address.txt\">multiple-kroger-locations-by-address.txt</a></li>\n<li><a href=\"/user_uploads/10155/FWx5sq5uK-rBwrHwQbwrAHsx/multiple-kroger-locations-more-than-two-tlcs.txt\">multiple-kroger-locations-more-than-two-tlcs.txt</a></li>\n</ul>\n<p>Examples from the above files:</p>\n<div class=\"codehilite\"><pre><span></span><code>31 Sherwood Blvd, 87547\n  Smith&#39;s Pharmacy #70600432\n  Kroger Pharmacy #43992\n  Dillons Pharmacy #85000992\n  Kroger Pharmacy #70609\n\n535 E Palmer Wasilla Hwy, 99645\n  Fred Meyer Pharmacy #70100649\n  Fred Meyer Pharmacy #70100669\n</code></pre></div>",
        "id": 258982606,
        "sender_full_name": "Rob Brackett",
        "timestamp": 1635178420
    },
    {
        "content": "<p>I also get the impression from looking at the data that the first 2 or 3 digits of the 8 digit IDs (which not all locations use) are some kind of meaningful prefix (although some names cross multiple prefixes), and that <code>85*</code> might be some kind of ad hoc or community clinics. Is that right?</p>",
        "id": 258983314,
        "sender_full_name": "Rob Brackett",
        "timestamp": 1635178727
    },
    {
        "content": "<p>In particular, we have some older records of places with those IDs having different names (which we wind up keeping, based on how the system works), and I never noticed that some of them changed to a more generic \"The Little Clinic #xyz\", for example. (See this earlier discussion: <a href=\"#narrow/stream/281612-smart.2Fscheduling-links/topic/Publisher.3A.20Kroger/near/242302308\">https://chat.fhir.org/#narrow/stream/281612-smart.2Fscheduling-links/topic/Publisher.3A.20Kroger/near/242302308</a>)</p>",
        "id": 258983518,
        "sender_full_name": "Rob Brackett",
        "timestamp": 1635178817
    },
    {
        "content": "<p>Finally, we have 8-digit IDs for all The Little Clinics from an older(?) system that I realized we were duplicating because The Little Clinics in the SMART Scheduling Links API only have 5 digits. It seems like there’s a clean mapping, though (which harkens back to the question about prefixes above). Is this getting at something more meaningful about the types of locations under the hood?</p>\n<table>\n<thead>\n<tr>\n<th>5-digit Prefix</th>\n<th>8-digit Prefix</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>03</td>\n<td>85100</td>\n</tr>\n<tr>\n<td>06</td>\n<td>85200</td>\n</tr>\n<tr>\n<td>11</td>\n<td>85600</td>\n</tr>\n<tr>\n<td>15</td>\n<td>85800</td>\n</tr>\n<tr>\n<td>17</td>\n<td>86100</td>\n</tr>\n<tr>\n<td>18</td>\n<td>85300</td>\n</tr>\n<tr>\n<td>36</td>\n<td>85400</td>\n</tr>\n<tr>\n<td>43</td>\n<td>85500</td>\n</tr>\n<tr>\n<td>47</td>\n<td>85900</td>\n</tr>\n</tbody>\n</table>\n<p>For example, if the SMART SL has a The Little Clinic with the ID <code>03102</code>, its 8-digit ID is <code>85100102</code>.</p>",
        "id": 258983825,
        "sender_full_name": "Rob Brackett",
        "timestamp": 1635178961
    },
    {
        "content": "<p>I can't fill in all of the gaps here but our normal numbering system is a 3 digit division followed by a 5 digit store number. So for example, our \"Mid Atlantic\" division is 029, Nashville is 026, etc. Store number usually start with 00 followed by three digits. If you use <a href=\"http://www.kroger.com\">www.kroger.com</a> store locator and pay attention to the URLs, you'll be able to see this pattern I believe (based on memory - could be wrong). Where it gets weird is the pop-up clinics and things of that nature. They tend to use made up store numbers for those in ranges they know will not collide with real stores. They (our business team) may use various patterns for this that Kroger Technology is not necessarily aware of. So all I personally can tell you for certain is that our real store locations will have eight digit (3 + 5) IDs. Anything else is probably something special (but an eight digit ID by itself doesn't necessarily mean it's automatically a real store).</p>",
        "id": 258985879,
        "sender_full_name": "Ryan Owens",
        "timestamp": 1635179950
    },
    {
        "content": "<p>Oh, fascinating! Thanks for filling that in.</p>",
        "id": 258986379,
        "sender_full_name": "Rob Brackett",
        "timestamp": 1635180186
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"340597\">@Ryan Owens</span> I’m also now noticing that there are currently 610 schedules that reference locations that don’t exist… is that many expected? I think I’d noticed  this before but assumed they might not always perfectly match a while back when you mentioned switching to a more evented model. This seems like a lot, though.</p>",
        "id": 259020089,
        "sender_full_name": "Rob Brackett",
        "timestamp": 1635195715
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"398591\">@Rob Brackett</span>  <span class=\"user-mention\" data-user-id=\"340597\">@Ryan Owens</span>  I saw Rob's message and was curious about the number as well. I think I know what the issue is and I'll forward along to the team</p>",
        "id": 259023607,
        "sender_full_name": "Alex Olear",
        "timestamp": 1635197551
    }
]