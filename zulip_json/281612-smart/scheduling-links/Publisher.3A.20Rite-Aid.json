[
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191315\">Josh Mandel</span> <a href=\"#narrow/stream/281612-smart.2Fscheduling-links/topic/Publisher.3A.20Kroger/near/240650648\">said</a>:</p>\n<blockquote>\n<p>Would be good to understand if there are specific software tools known to choke on this, though. We haven't heard reports of this.</p>\n</blockquote>\n<p>Insomnia is URL-encoding the character which confuses our server. <a href=\"user_uploads/10155/wfhwpsRkGerXVovOOrwmpK9D/Capture.PNG\">Capture.PNG</a></p>\n<div class=\"message_inline_image\"><a href=\"user_uploads/10155/wfhwpsRkGerXVovOOrwmpK9D/Capture.PNG\" title=\"Capture.PNG\"><img src=\"user_uploads/10155/wfhwpsRkGerXVovOOrwmpK9D/Capture.PNG\"></a></div>",
        "id": 241083720,
        "sender_full_name": "Patrick Stuart",
        "timestamp": 1622586543
    },
    {
        "content": "<p>Huh, those URLs (<code>$</code> and <code>%24</code>) should be semantically equivalent, meaning that both should work. What Web server are you using that's differentiating between them?</p>",
        "id": 241099978,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1622601827
    },
    {
        "content": "<p>I don't feel comfortable sharing our internal frameworks.</p>\n<p>I can say I posted this request through two layers on two entirely different frameworks. It got stuck on both of them.</p>",
        "id": 241177168,
        "sender_full_name": "Patrick Stuart",
        "timestamp": 1622652787
    },
    {
        "content": "<p>Huh. It looks like the riteaid's server performs correct decoding for other characters, e.g.</p>\n<div class=\"codehilite\"><pre><span></span><code>GET /digital/vaccine-provider/$%62ulk-publish\n</code></pre></div>\n\n<p>works, with <code>b</code> encoded a <code>%62</code>. The issue appears to be specific to decoding <code>%24</code>.</p>",
        "id": 241181213,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1622654658
    },
    {
        "content": "<p>Oh, interesting. We’re using Express (JavaScript) and it looks like it has a similar bug: <a href=\"http://getmyvax.org/smart-scheduling/%24bulk-publish\">http://getmyvax.org/smart-scheduling/%24bulk-publish</a><br>\nWill have to fix.</p>",
        "id": 241319135,
        "sender_full_name": "Rob Brackett",
        "timestamp": 1622667586
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"416184\">@Patrick Stuart</span> bottom line I wouldn't get stuck on this point -- if you need to host the manifest at <code>/bulk-publish</code> to keep going, I'd say just keep going and we can revisit this later.</p>",
        "id": 241326255,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1622671712
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191315\">@Josh Mandel</span> unless I'm calling it wrong, the InfernoTest tool appears to be stuck... <a href=\"/user_uploads/10155/bcA_R6fA8UxyOfaBViJ9cvtU/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/bcA_R6fA8UxyOfaBViJ9cvtU/image.png\" title=\"image.png\"><img src=\"/user_uploads/10155/bcA_R6fA8UxyOfaBViJ9cvtU/image.png\"></a></div>",
        "id": 241404177,
        "sender_full_name": "Patrick Stuart",
        "timestamp": 1622732828
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"192576\">@Robert Scanlon</span> are there logs available? It it possible Inferno is crashing with something specific to the Rite-Aid endpoint?</p>",
        "id": 241412336,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1622736185
    },
    {
        "content": "<p>Looking through the logs now.  Looks like the server failed a test, then Inferno's test runner crashed when trying to persist the failure message.  We recently swapped the ORM we are using, which may have something to do with the crash.</p>",
        "id": 241429002,
        "sender_full_name": "Robert Scanlon",
        "timestamp": 1622743098
    },
    {
        "content": "<p>While we figure out why Inferno crashed, it looks like the server doesn't like the accept header we are sending?</p>\n<blockquote>\n<p>ERROR | Inferno | Fatal Error: 784: unexpected token at '&lt;!doctype html&gt;&lt;html lang=\"en\"&gt;&lt;head&gt;&lt;title&gt;HTTP Status 406 – Not Acceptable&lt;/title&gt;&lt;style type=\"text/css\"&gt;body {font-family:Tahoma,Arial,sans-serif;} h1, h2, h3, b {color:white;background-color:#525D76;} h1 {font-size:22px;} h2 {font-size:16px;} h3 {font-size:14px;} p {font-size:12px;} a {color:black;} .line {height:1px;background-color:#525D76;border:none;}&lt;/style&gt;&lt;/head&gt;&lt;body&gt;&lt;h1&gt;HTTP Status 406 – Not Acceptable&lt;/h1&gt;&lt;hr class=\"line\" /&gt;&lt;p&gt;&lt;b&gt;Type&lt;/b&gt; Status Report&lt;/p&gt;&lt;p&gt;&lt;b&gt;Message&lt;/b&gt; Not Acceptable&lt;/p&gt;&lt;p&gt;&lt;b&gt;Description&lt;/b&gt; The target resource does not have a current representation that would be acceptable to the user agent, according to the proactive negotiation header fields received in the request, and the server is unwilling to supply a default representation.&lt;/p&gt;&lt;hr class=\"line\" /&gt;&lt;h3&gt;Apache Tomcat/9.0.36&lt;/h3&gt;&lt;/body&gt;&lt;/html&gt;'</p>\n</blockquote>",
        "id": 241429300,
        "sender_full_name": "Robert Scanlon",
        "timestamp": 1622743234
    },
    {
        "content": "<p>I believe we are sending 'Accept: application/fhir+ndjson'</p>",
        "id": 241429429,
        "sender_full_name": "Robert Scanlon",
        "timestamp": 1622743297
    },
    {
        "content": "<p>Cool. This is the first time we're seeing an issue here, but we should probably add to the spec something like:</p>\n<ol>\n<li>Servers SHALL support <code>Accept: application/fhir+ndjson</code></li>\n<li>Servers SHALL support <code>Accept: application/x-ndjson</code> (??)</li>\n<li>Servers SHALL support  requests without an <code>Accept</code> header</li>\n</ol>",
        "id": 241437041,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1622746882
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"416184\">@Patrick Stuart</span> does this give you enough to get un-stuck?</p>",
        "id": 241437070,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1622746899
    },
    {
        "content": "<p>I think that would be a good idea, even if it feels a bit tedious to be explicit about this kind of detail.  I wouldn't want to have to configure the client which Accept to use on an endpoint-to-endpoint basis.</p>",
        "id": 241439401,
        "sender_full_name": "Robert Scanlon",
        "timestamp": 1622748011
    },
    {
        "content": "<p>Also, slightly related, I noticed the content-type header returned from $bulk-publish in this server is 'application/x-ndjson' which is technically incorrect (I think?), though we do not check that in our tests.  I suppose we could flag a warning.</p>",
        "id": 241439690,
        "sender_full_name": "Robert Scanlon",
        "timestamp": 1622748165
    },
    {
        "content": "<p>Warning seems OK on the output. I'll add a PR to include these details.</p>",
        "id": 241448578,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1622752333
    },
    {
        "content": "<p>Added <a href=\"https://github.com/smart-on-fhir/smart-scheduling-links/pull/43\">https://github.com/smart-on-fhir/smart-scheduling-links/pull/43</a></p>",
        "id": 241449545,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1622752847
    },
    {
        "content": "<p>Thank you! I'll take a look at what might be causing this issue.</p>",
        "id": 241456192,
        "sender_full_name": "Patrick Stuart",
        "timestamp": 1622755271
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191315\">@Josh Mandel</span> did you include <code>application/fhir+json</code> as an option for the Accept header for the bulk manifest file because the bulk manifest file qualifies as <code>application/fhir+json</code>, or simply to make things a little easier for clients?  I assumed that <code>application/fhir+json</code> was only for FHIR resources, which this is not.  No objection either way, just curious.</p>",
        "id": 241541690,
        "sender_full_name": "Robert Scanlon",
        "timestamp": 1622816246
    },
    {
        "content": "<p>You're right <span class=\"user-mention\" data-user-id=\"192576\">@Robert Scanlon</span>  -- I'll fix this by deleting that bullet.</p>",
        "id": 241552409,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1622820619
    },
    {
        "content": "<p><a href=\"https://github.com/smart-on-fhir/smart-scheduling-links/commit/1cb31bd9555e5861bb09b198457f160e2296e3b7\">Done</a></p>",
        "id": 241552489,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1622820660
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191315\">Josh Mandel</span> <a href=\"#narrow/stream/281612-smart.2Fscheduling-links/topic/Publisher.3A.20Kroger/near/241437041\">said</a>:</p>\n<blockquote>\n<p>Cool. This is the first time we're seeing an issue here, but we should probably add to the spec something like:</p>\n<ol>\n<li>Servers SHALL support <code>Accept: application/fhir+ndjson</code></li>\n<li>Servers SHALL support <code>Accept: application/x-ndjson</code> (??)</li>\n<li>Servers SHALL support  requests without an <code>Accept</code> header</li>\n</ol>\n</blockquote>\n<p>Hi Josh,</p>\n<p>Even after setting the header as application/fhir+ndjson it is failing inferno tests can you let me know what exactly I need to pass in header. to pass this test case.<br>\n<a href=\"/user_uploads/10155/Z_nb9GdZeyNnurkwXUaFtG3r/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/Z_nb9GdZeyNnurkwXUaFtG3r/image.png\" title=\"image.png\"><img src=\"/user_uploads/10155/Z_nb9GdZeyNnurkwXUaFtG3r/image.png\"></a></div><p><a href=\"/user_uploads/10155/mqccd_iicFc7UdDab6A85Ep2/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/mqccd_iicFc7UdDab6A85Ep2/image.png\" title=\"image.png\"><img src=\"/user_uploads/10155/mqccd_iicFc7UdDab6A85Ep2/image.png\"></a></div>",
        "id": 241681476,
        "sender_full_name": "Ashwath Ramesh",
        "timestamp": 1622969665
    },
    {
        "content": "<p>Just to check, did you review the updated spec section at <a href=\"https://github.com/smart-on-fhir/smart-scheduling-links/blob/master/specification.md#accept-headers\">https://github.com/smart-on-fhir/smart-scheduling-links/blob/master/specification.md#accept-headers</a>, and can you include the rest of the logs here <span class=\"user-mention\" data-user-id=\"418615\">@Ashwath Ramesh</span> ? The result in your screenshot is cut off z so maybe you can copy snd paste the text?</p>\n<p>Or perhaps <span class=\"user-mention\" data-user-id=\"192576\">@Robert Scanlon</span> can check on the Inferno server side?</p>",
        "id": 241689760,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1622982975
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"418615\">@Ashwath Ramesh</span> Could you confirm that you do not reject requests to Bulk Download Files (e.g. <code>PA.ndjson</code>) that have the Accept header of <code>Accept: application/fhir+ndjson</code>.  I'm still seeing the following response in our logs when trying to access those URLs:</p>",
        "id": 241698745,
        "sender_full_name": "Robert Scanlon",
        "timestamp": 1622996317
    },
    {
        "content": "<p><code>&lt;!doctype html&gt;&lt;html lang=\"en\"&gt;&lt;head&gt;&lt;title&gt;HTTP Status 406 – Not Acceptable&lt;/title&gt;&lt;style type=\"text/css\"&gt;body {font-family:Tahoma,Arial,sans-serif;} h1, h2, h3, b {color:white;background-color:#525D76;} h1 {font-size:22px;} h2 {font-size:16px;} h3 {font-size:14px;} p {font-size:12px;} a {color:black;} .line {height:1px;background-color:#525D76;border:none;}&lt;/style&gt;&lt;/head&gt;&lt;body&gt;&lt;h1&gt;HTTP Status 406 – Not Acceptable&lt;/h1&gt;&lt;hr class=\"line\" /&gt;&lt;p&gt;&lt;b&gt;Type&lt;/b&gt; Status Report&lt;/p&gt;&lt;p&gt;&lt;b&gt;Message&lt;/b&gt; Not Acceptable&lt;/p&gt;&lt;p&gt;&lt;b&gt;Description&lt;/b&gt; The target resource does not have a current representation that would be acceptable to the user agent, according to the proactive negotiation header fields received in the request, and the server is unwilling to supply a default representation.&lt;/p&gt;&lt;hr class=\"line\" /&gt;&lt;h3&gt;Apache Tomcat/9.0.36&lt;/h3&gt;&lt;/body&gt;&lt;/html&gt;</code></p>",
        "id": 241698759,
        "sender_full_name": "Robert Scanlon",
        "timestamp": 1622996349
    },
    {
        "content": "<p>e.g. <code>curl https://apicar.riteaid.com/digital/vaccine-provider/states/locations/PA.ndjson -H \"Accept: application/fhir+ndjson\"</code></p>",
        "id": 241699074,
        "sender_full_name": "Robert Scanlon",
        "timestamp": 1622996788
    },
    {
        "content": "<p>Thanks for the help, team! This was a deployment issue on our end... nothing further for you guys to handle for now.</p>",
        "id": 241716820,
        "sender_full_name": "Patrick Stuart",
        "timestamp": 1623023646
    },
    {
        "content": "<p>all the tests are passed except these two <a href=\"/user_uploads/10155/jGj8pB2s8AlMFiKQhnsEM8jz/image.png\">image.png</a> <br>\n<a href=\"/user_uploads/10155/xd-PIv9sE51ugtMZhsQ4j9WA/image.png\">image.png</a>  am passing the below fields for servicetype in schedules  \"serviceType\": [<br>\n        {<br>\n            \"coding\": [<br>\n                {<br>\n                    \"system\": \"<a href=\"https://www.riteaid.com/covid-19\">https://www.riteaid.com/covid-19</a>\",<br>\n                    \"code\": \"covid19vaccine\",<br>\n                    \"display\": \"COVID-19 Immunization Appointment\"<br>\n                }<br>\n            ]<br>\n        }<br>\n    ],<br>\nI dont know why its failing and in slots am passing store number as part of reference <a href=\"/user_uploads/10155/ylGFguIv76lVhxwMP6RG1c9u/image.png\">image.png</a> <br>\n \"schedule\": {<br>\n        \"reference\": \"Schedule/5644\"<br>\n    },</p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/jGj8pB2s8AlMFiKQhnsEM8jz/image.png\" title=\"image.png\"><img src=\"/user_uploads/10155/jGj8pB2s8AlMFiKQhnsEM8jz/image.png\"></a></div><div class=\"message_inline_image\"><a href=\"/user_uploads/10155/xd-PIv9sE51ugtMZhsQ4j9WA/image.png\" title=\"image.png\"><img src=\"/user_uploads/10155/xd-PIv9sE51ugtMZhsQ4j9WA/image.png\"></a></div><div class=\"message_inline_image\"><a href=\"/user_uploads/10155/ylGFguIv76lVhxwMP6RG1c9u/image.png\" title=\"image.png\"><img src=\"/user_uploads/10155/ylGFguIv76lVhxwMP6RG1c9u/image.png\"></a></div>",
        "id": 241796115,
        "sender_full_name": "Ashwath Ramesh",
        "timestamp": 1623080404
    },
    {
        "content": "<p>The example you pasted above <span class=\"user-mention\" data-user-id=\"418615\">@Ashwath Ramesh</span>  is missing  a coding -- if you want to advertise covid-19 immunization appointments, then <code>serviceType</code> should look like:</p>\n<div class=\"spoiler-block\"><div class=\"spoiler-header\">\n<p>json</p>\n</div><div class=\"spoiler-content\" aria-hidden=\"true\">\n<p>[{<br>\n  \"system\": \"<a href=\"http://terminology.hl7.org/CodeSystem/service-type\">http://terminology.hl7.org/CodeSystem/service-type</a>\",<br>\n  \"code\": \"57\",<br>\n  \"display\": \"Immunization\"<br>\n}, {<br>\n  \"system\": \"<a href=\"http://fhir-registry.smarthealthit.org/CodeSystem/service-type\">http://fhir-registry.smarthealthit.org/CodeSystem/service-type</a>\",<br>\n  \"code\": \"covid19-immunization\"<br>\n  \"display\": \"COVID-19 Immunization Appointment\"<br>\n}]</p>\n</div></div>\n<p>see <a href=\"https://github.com/smart-on-fhir/smart-scheduling-links/blob/master/specification.md#schedule-file\">https://github.com/smart-on-fhir/smart-scheduling-links/blob/master/specification.md#schedule-file</a> for details</p>",
        "id": 241796738,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1623080659
    },
    {
        "content": "<p><a href=\"/user_uploads/10155/20WY3Lal3y3CPx90Ci2bLHU2/image.png\">image.png</a> <br>\n\"serviceType\": [<br>\n        {<br>\n            \"coding\": [<br>\n                {<br>\n                    \"system\": \"<a href=\"http://terminology.hl7.org/CodeSystem/service-type\">http://terminology.hl7.org/CodeSystem/service-type</a>\",<br>\n                    \"code\": \"5426\",<br>\n                    \"display\": \"Immunization\"<br>\n                },<br>\n                {<br>\n                    \"system\": \"<a href=\"http://fhir-registry.smarthealthit.org/CodeSystem/service-type\">http://fhir-registry.smarthealthit.org/CodeSystem/service-type</a>\",<br>\n                    \"code\": \"covid19-immunization\",<br>\n                    \"display\": \"COVID-19 Immunization Appointment\"<br>\n                }<br>\n            ]<br>\n        }<br>\n    ],<br>\nAm passing whatever you suggested but still test cases are not getting passed. <a href=\"/user_uploads/10155/83MXKpv-pAOx0EU51qpoBBL7/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/20WY3Lal3y3CPx90Ci2bLHU2/image.png\" title=\"image.png\"><img src=\"/user_uploads/10155/20WY3Lal3y3CPx90Ci2bLHU2/image.png\"></a></div><div class=\"message_inline_image\"><a href=\"/user_uploads/10155/83MXKpv-pAOx0EU51qpoBBL7/image.png\" title=\"image.png\"><img src=\"/user_uploads/10155/83MXKpv-pAOx0EU51qpoBBL7/image.png\"></a></div>",
        "id": 241804887,
        "sender_full_name": "Ashwath Ramesh",
        "timestamp": 1623084051
    },
    {
        "content": "<p>The Coding your showed here (code 5426) doesn't match the required coding (code 57)</p>",
        "id": 241822210,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1623091505
    },
    {
        "content": "<p>thanks Josh coding is fixed but last test case is failing am setting schedule  in slots service as per the  sample file but it is failing:<br>\n<a href=\"/user_uploads/10155/NwVjTKKAoCLispXr7FrBMxxv/image.png\">image.png</a> <br>\n<a href=\"/user_uploads/10155/_THClHiGg7f7sT_7RuKTxGpg/image.png\">image.png</a><br>\n<a href=\"user_uploads/10155/uhpEghhB8Rz3IbTxCOjhQypH/image.png\">image.png</a> <br>\n<a href=\"user_uploads/10155/v5Sg8jw8pZkfThAfnyulkKS0/image.png\">image.png</a> <a href=\"user_uploads/10155/M8c6sp8VG2KyHevoX4xRKVCg/slot\">slot</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/NwVjTKKAoCLispXr7FrBMxxv/image.png\" title=\"image.png\"><img src=\"/user_uploads/10155/NwVjTKKAoCLispXr7FrBMxxv/image.png\"></a></div><div class=\"message_inline_image\"><a href=\"/user_uploads/10155/_THClHiGg7f7sT_7RuKTxGpg/image.png\" title=\"image.png\"><img src=\"/user_uploads/10155/_THClHiGg7f7sT_7RuKTxGpg/image.png\"></a></div><div class=\"message_inline_image\"><a href=\"user_uploads/10155/uhpEghhB8Rz3IbTxCOjhQypH/image.png\" title=\"image.png\"><img src=\"user_uploads/10155/uhpEghhB8Rz3IbTxCOjhQypH/image.png\"></a></div><div class=\"message_inline_image\"><a href=\"user_uploads/10155/v5Sg8jw8pZkfThAfnyulkKS0/image.png\" title=\"image.png\"><img src=\"user_uploads/10155/v5Sg8jw8pZkfThAfnyulkKS0/image.png\"></a></div><p>Can it be a store number or store id?</p>",
        "id": 241874833,
        "sender_full_name": "Ashwath Ramesh",
        "timestamp": 1623133251
    },
    {
        "content": "<p>The format for an ID is opaque; it's any string consisting of letters and numbers that is less than 64 characters long (see spec for details).</p>",
        "id": 241918342,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1623158766
    },
    {
        "content": "<p>The screenshots you are showing from the validator indicate that the validator is seeing a reference to <code>Schedule/13</code> from an appointment slot, but that no Schedule with id <code>13</code> is findable from your manifest.  (And apparently this is an issue for a couple of dozen IDs.)</p>",
        "id": 241918682,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1623158889
    },
    {
        "content": "<p>Hi Josh,<br>\nPFB the latest screenshots am passing the same id which I pass in schedule, in slot's reference, but its failing,<br>\n<a href=\"/user_uploads/10155/TuXoNIqCwDEI6zI_0bMVQ9UB/image.png\">image.png</a><br>\n<a href=\"/user_uploads/10155/5fiF47f2uWN9IMkzKcWtkg2C/image.png\">image.png</a> <br>\n<a href=\"/user_uploads/10155/QbDmT8fNSU_Ku3W-wIRZdSH0/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/TuXoNIqCwDEI6zI_0bMVQ9UB/image.png\" title=\"image.png\"><img src=\"/user_uploads/10155/TuXoNIqCwDEI6zI_0bMVQ9UB/image.png\"></a></div><div class=\"message_inline_image\"><a href=\"/user_uploads/10155/5fiF47f2uWN9IMkzKcWtkg2C/image.png\" title=\"image.png\"><img src=\"/user_uploads/10155/5fiF47f2uWN9IMkzKcWtkg2C/image.png\"></a></div><div class=\"message_inline_image\"><a href=\"/user_uploads/10155/QbDmT8fNSU_Ku3W-wIRZdSH0/image.png\" title=\"image.png\"><img src=\"/user_uploads/10155/QbDmT8fNSU_Ku3W-wIRZdSH0/image.png\"></a></div>",
        "id": 241923527,
        "sender_full_name": "Ashwath Ramesh",
        "timestamp": 1623160771
    },
    {
        "content": "<p>The Slot is given a reference to a Schedule with an ID of <code>5617</code>.  The Schedule resource you are showing there has an id of <code>Schedule5617</code>, not <code>5617</code>.  You can either change the Slot to reference <code>Schedule/Schedule5617</code> or change the Schedule to have an ID of <code>5617</code>.</p>",
        "id": 241924357,
        "sender_full_name": "Robert Scanlon",
        "timestamp": 1623161077
    },
    {
        "content": "<p>Note that when one resource references another, the reference is in the form <code>{ResourceType}/{id}</code>.  So when the Slot references <code>Schedule/5617</code>, that means there needs to be a Schedule resource with an ID of <code>5617</code>.</p>",
        "id": 241925217,
        "sender_full_name": "Robert Scanlon",
        "timestamp": 1623161425
    },
    {
        "content": "<p>This is spelled out explicitly at <a href=\"https://github.com/smart-on-fhir/smart-scheduling-links/blob/master/specification.md#schedule-file\">https://github.com/smart-on-fhir/smart-scheduling-links/blob/master/specification.md#schedule-file</a> -- it is worth reading through the doc top to bottom in case there are other issues you may have missed as well</p>",
        "id": 241925778,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1623161657
    },
    {
        "content": "<p><a href=\"/user_uploads/10155/bzv3PFGmtjIj7-j548MKJJKU/image.png\">image.png</a>  all the tests have passed thanks Josh and Robert for answering my questions</p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/bzv3PFGmtjIj7-j548MKJJKU/image.png\" title=\"image.png\"><img src=\"/user_uploads/10155/bzv3PFGmtjIj7-j548MKJJKU/image.png\"></a></div>",
        "id": 241926047,
        "sender_full_name": "Ashwath Ramesh",
        "timestamp": 1623161757
    },
    {
        "content": "<p>FYI we are still on schedule for deployment Thursday.</p>",
        "id": 242013180,
        "sender_full_name": "Patrick Stuart",
        "timestamp": 1623207983
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"418615\">Ashwath Ramesh</span> <a href=\"#narrow/stream/281612-smart.2Fscheduling-links/topic/Publisher.3A.20CVS/near/242183917\">said</a>:</p>\n<blockquote>\n<p>Hi Josh, The deployment is done in production it will be helpful if you could please validate the services now and approve the pull request and merge it to the publisher repository. <a href=\"/user_uploads/10155/HAXfPTbMbA4IQaeYjKEYqwRH/image.png\">image.png</a> <a href=\"/user_uploads/10155/JZqYSgYbCs_7WlvfuGXsHiL2/image.png\">image.png</a></p>\n</blockquote>\n<p>I don't think we need Josh to verify anything.</p>",
        "id": 242224793,
        "sender_full_name": "Patrick Stuart",
        "timestamp": 1623338838
    },
    {
        "content": "<p>Great! I merged the PR last week, but placed the metadata files In an \"awaiting validation\" folder. It's now in the main folder at <a href=\"https://github.com/smart-on-fhir/smart-scheduling-links/blob/master/publisher-repository/riteaid.json\">https://github.com/smart-on-fhir/smart-scheduling-links/blob/master/publisher-repository/riteaid.json</a> -- let me know if anything looks off!</p>",
        "id": 242233031,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1623342168
    },
    {
        "content": "<p>Hi I am from Castlight , we have been trying to use the RiteAid Fhir API to get appointment availability. Since VTrckS PINs were not part of the payload for uniquely identifying a location, we tried using Store Id. The two fields labeled ID is either black or populated with zip code. <span class=\"user-mention\" data-user-id=\"416184\">@Patrick Stuart</span>  had indicated that the Fhir API's have some bugs. Just wanted to check if this will be addressed in the Thursday release.</p>",
        "id": 242275380,
        "sender_full_name": "Hemanth Gorur",
        "timestamp": 1623361459
    },
    {
        "content": "<p>For the Rite-Aid team <span class=\"user-mention\" data-user-id=\"416184\">@Patrick Stuart</span> , the preferred approach here is to populate <code>Location.identifier</code> with an entry like:</p>\n<div class=\"codehilite\"><pre><span></span><code>&quot;identifier&quot;: [{\n  &quot;system&quot;: &quot;https://locations.riteaid.com&quot;,\n  &quot;value&quot;: &quot;10209&quot;\n}]\n</code></pre></div>\n<p>(for store #10209; this is totally independent of how you populate <a href=\"http://Location.id\">Location.id</a>, since the semantics of <a href=\"http://Location.id\">Location.id</a> are opaque to clients.)</p>",
        "id": 242275751,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1623361684
    },
    {
        "content": "<p>It also looks like the current endpoint only provides appointment availability for <em>today</em> -- is there a plan to publish for 1-2 weeks out?</p>",
        "id": 242276094,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1623361896
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191315\">@Josh Mandel</span>  sure Josh will set store id in location identifier value, currently we are setting the zip code. Will discuss with Patrick and finalize for displaying appointments availability for 1-2 weeks.</p>",
        "id": 242294940,
        "sender_full_name": "Ashwath Ramesh",
        "timestamp": 1623379217
    },
    {
        "content": "<p>Is <code>https://api.riteaid.com/digital/vaccine-provider/$bulk-publish</code> still the right URL? Taking a look at it now, I’m seeing all the schedules with malformed <code>vaccine-product</code> extensions:</p>\n<div class=\"codehilite\" data-code-language=\"JavaScript\"><pre><span></span><code><span class=\"p\">{</span>\n  <span class=\"s2\">\"extension\"</span><span class=\"o\">:</span> <span class=\"p\">[</span>\n    <span class=\"p\">{</span>\n      <span class=\"s2\">\"url\"</span><span class=\"o\">:</span> <span class=\"s2\">\"http://fhir-registry.smarthealthit.org/StructureDefinition/vaccine-dose\"</span><span class=\"p\">,</span>\n      <span class=\"s2\">\"valueInteger\"</span><span class=\"o\">:</span> <span class=\"mf\">1</span>\n    <span class=\"p\">},</span>\n    <span class=\"p\">{</span>\n      <span class=\"s2\">\"url\"</span><span class=\"o\">:</span> <span class=\"s2\">\"http://fhir-registry.smarthealthit.org/StructureDefinition/vaccine-product\"</span><span class=\"p\">,</span>\n      <span class=\"s2\">\"valueCoding\"</span><span class=\"o\">:</span> <span class=\"p\">{</span>\n        <span class=\"s2\">\"system\"</span><span class=\"o\">:</span> <span class=\"s2\">\"http://terminology.hl7.org/CodeSystem/service-type\"</span><span class=\"p\">,</span>\n        <span class=\"s2\">\"code\"</span><span class=\"o\">:</span> <span class=\"s2\">\"57\"</span><span class=\"p\">,</span>\n        <span class=\"s2\">\"display\"</span><span class=\"o\">:</span> <span class=\"s2\">\"Immunization\"</span>\n      <span class=\"p\">}</span>\n    <span class=\"p\">}</span>\n  <span class=\"p\">]</span>\n<span class=\"p\">}</span>\n</code></pre></div>\n<p>^ The dose extension is fine, but product is clearly one of the codings from the service type, which is way off spec. (Maybe Inferno is not validating these extensions?)</p>",
        "id": 242302688,
        "sender_full_name": "Rob Brackett",
        "timestamp": 1623389293
    },
    {
        "content": "<p>Looks like a bug. This might be worth addressing in the validator (presence of a CVC code on vaccine product extensions) <span class=\"user-mention\" data-user-id=\"192576\">@Robert Scanlon</span></p>",
        "id": 242342066,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1623416898
    },
    {
        "content": "<p>Hmm, we'll take a look.  FYI <span class=\"user-mention\" data-user-id=\"191647\">@Michael O'Keefe</span></p>",
        "id": 242345079,
        "sender_full_name": "Robert Scanlon",
        "timestamp": 1623418306
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191647\">@Michael O'Keefe</span> it looks like <a href=\"https://github.com/inferno-community/fsh-smart-scheduling-links/blob/main/input/fsh/vaccine_schedule.fsh#L26\">that coding</a> is bound to <a href=\"http://hl7.org/fhir/uv/smarthealthcards-vaccination/ValueSet/vaccination-credential-vaccine-value-set\">http://hl7.org/fhir/uv/smarthealthcards-vaccination/ValueSet/vaccination-credential-vaccine-value-set</a>, which we aren't providing, and I'm not seeing how the validator would know where to find it (presumably in the HealthCards/VCI IG, or something like that?).  I don't know if this is what is causing this issue or not, but regardless I wonder if it makes sense to have this \"IG\" depend on that IG. Would it make more sense to bind to <a href=\"http://hl7.org/fhir/ValueSet/vaccine-code\">http://hl7.org/fhir/ValueSet/vaccine-code</a> (which is more than just CVX, but I'm not sure if that matters), or create our own ValueSet that just wraps CVX?</p>",
        "id": 242356642,
        "sender_full_name": "Robert Scanlon",
        "timestamp": 1623423337
    },
    {
        "content": "<p>In theory that valueset should be validated through <code>tx.fhir.org</code>. I believe the VCI/SMART Health Cards team said they were able to get that valueset added to <a href=\"http://tx.fhir.org\">tx.fhir.org</a>; not sure why it wouldn't be resolving</p>",
        "id": 242598139,
        "sender_full_name": "Michael O'Keefe",
        "timestamp": 1623678040
    },
    {
        "content": "<p>It looks like that <a href=\"https://github.com/dvci/vaccine-credential-ig/blob/main/input/fsh/value_sets.fsh\">ValueSet doesn't exist any more</a> in the IG (looks like they renamed it <a href=\"https://github.com/dvci/vaccine-credential-ig/commit/87efc4a75f25e672190a755a16dc38d1b69e830f#diff-1b5db95526aae608476ae4b639ebd9e7eed139b98752690b864fc1b3f17bb33c\">here</a>).</p>",
        "id": 242609048,
        "sender_full_name": "Robert Scanlon",
        "timestamp": 1623682402
    },
    {
        "content": "<p>And I can't find the <a href=\"http://build.fhir.org/ig/dvci/vaccine-credential-ig/branches/main/ValueSet-vaccine-product-cvx.html\">replacement</a> on <a href=\"http://tx.fhir.org\">tx.fhir.org</a> (not 100% sure this is the <a href=\"http://tx.fhir.org/r4/ValueSet/_search?_content=&amp;_content%3Amissing=&amp;_filter=&amp;_filter%3Amissing=&amp;_id=&amp;_id%3Amissing=&amp;_lastUpdated=&amp;_lastUpdated%3Amissing=&amp;_lastUpdated%3Abefore=&amp;_lastUpdated%3Aafter=&amp;_profile=&amp;_profile%3Amissing=&amp;_query=&amp;_query%3Amissing=&amp;_security=&amp;_security%3Amissing=&amp;_source=&amp;_source%3Amissing=&amp;_tag=&amp;_tag%3Amissing=&amp;_text=&amp;_text%3Amissing=&amp;code=&amp;code%3Amissing=&amp;context=&amp;context%3Amissing=&amp;context-quantity=&amp;context-quantity%3Amissing=&amp;context-type=&amp;context-type%3Amissing=&amp;context-type-quantity=&amp;context-type-quantity%3Amissing=&amp;context-type-value=&amp;context-type-value%3Amissing=&amp;date=&amp;date%3Amissing=&amp;date%3Abefore=&amp;date%3Aafter=&amp;description=&amp;description%3Amissing=&amp;expansion=&amp;expansion%3Amissing=&amp;identifier=&amp;identifier%3Amissing=&amp;jurisdiction=&amp;jurisdiction%3Amissing=&amp;name=&amp;name%3Amissing=&amp;publisher=&amp;publisher%3Amissing=&amp;reference=&amp;reference%3Amissing=&amp;status=&amp;status%3Amissing=&amp;title=&amp;title%3Amissing=&amp;url=http%3A%2F%2Fhl7.org%2Ffhir%2Fuv%2Fsmarthealthcards-vaccination%2FValueSet%2Fvaccine-product-cvx&amp;url%3Amissing=&amp;version=&amp;version%3Amissing=&amp;_text=&amp;search-offset=&amp;_count=&amp;_sort=_content\">right query though</a>).</p>",
        "id": 242609352,
        "sender_full_name": "Robert Scanlon",
        "timestamp": 1623682533
    },
    {
        "content": "<p>Does <a href=\"http://tx.fhir.org\">tx.fhir.org</a> keep ValueSets around after restarts? Regardless, I think having a dependency on such an actively developed IG for such a small thing is probably not a good idea and may result in us under-validating without realizing it (as happened here).</p>",
        "id": 242610176,
        "sender_full_name": "Robert Scanlon",
        "timestamp": 1623682808
    },
    {
        "content": "<p>I suppose. I really don't like the idea of creating a second, mostly-identical valueset, if one already exists, but if it's what people want to do.</p>",
        "id": 242612409,
        "sender_full_name": "Michael O'Keefe",
        "timestamp": 1623683627
    },
    {
        "content": "<p>Hi Josh<br>\nwe have deployed the fix to display slots for seven days in dev environment. It passed all the inferno test <a href=\"/user_uploads/10155/m02R6txCKz1Tq7RDIc6iM-De/image.png\">image.png</a> . please let me know whether it is looking good. PFB url : Inferno Logo Small <a href=\"https://apidev.riteaid.com/digital/vaccine-provider/$bulk-publish\">https://apidev.riteaid.com/digital/vaccine-provider/$bulk-publish</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/m02R6txCKz1Tq7RDIc6iM-De/image.png\" title=\"image.png\"><img src=\"/user_uploads/10155/m02R6txCKz1Tq7RDIc6iM-De/image.png\"></a></div>",
        "id": 242910629,
        "sender_full_name": "Ashwath Ramesh",
        "timestamp": 1623862948
    },
    {
        "content": "<p>Thanks -- confirmed I'm seeing seven days of results in the Slot files</p>",
        "id": 242921921,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1623867953
    },
    {
        "content": "<p>In <a href=\"https://api.riteaid.com/digital/vaccine-provider/$bulk-publish\">https://api.riteaid.com/digital/vaccine-provider/$bulk-publish</a>, \"transactionTime\" is given in format of \"yyyy-MM-dd HH:mm\", e.g. \"2021-06-18 21:04\". I am curious about time zone. It is EST?</p>",
        "id": 243408176,
        "sender_full_name": "Yijie Hong",
        "timestamp": 1624293064
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"402522\">Yijie Hong</span> <a href=\"#narrow/stream/281612-smart.2Fscheduling-links/topic/Publisher.3A.20Rite-Aid/near/243408176\">said</a>:</p>\n<blockquote>\n<p>In <a href=\"https://api.riteaid.com/digital/vaccine-provider/$bulk-publish\">https://api.riteaid.com/digital/vaccine-provider/$bulk-publish</a>, \"transactionTime\" is given in format of \"yyyy-MM-dd HH:mm\", e.g. \"2021-06-18 21:04\". I am curious about time zone. It is EST?</p>\n</blockquote>\n<p>Yep it's in EST.</p>",
        "id": 243430165,
        "sender_full_name": "Patrick Stuart",
        "timestamp": 1624303319
    },
    {
        "content": "<p>Latest release is published.</p>\n<p>Change log: </p>\n<ul>\n<li>VTRKs PIN added</li>\n<li>Endpoint is 14 days out, not 1.</li>\n<li>Slot ndjson files have valid extensions</li>\n<li>Properly formed vaccine-product extensions</li>\n</ul>",
        "id": 243430502,
        "sender_full_name": "Patrick Stuart",
        "timestamp": 1624303485
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"416184\">Patrick Stuart</span> <a href=\"#narrow/stream/281612-smart.2Fscheduling-links/topic/Publisher.3A.20Rite-Aid/near/243430502\">said</a>:</p>\n<blockquote>\n<p>Latest release is published.</p>\n<p>Change log: </p>\n<ul>\n<li>VTRKs PIN added</li>\n<li>Endpoint is 14 days out, not 1.</li>\n<li>Slot ndjson files have valid extensions</li>\n<li>Properly formed vaccine-product extensions</li>\n</ul>\n</blockquote>\n<p>Thanks!</p>",
        "id": 243459114,
        "sender_full_name": "Yijie Hong",
        "timestamp": 1624320724
    },
    {
        "content": "<p>Just took a look at this and noticed that <code>address.district</code> in the locations is the name of the city, not the county. (Turns out that’s also the case in the the internal API, so I’ve got a lot of Rite Aid locations to go find the actual county for and fix…)</p>",
        "id": 243553004,
        "sender_full_name": "Rob Brackett",
        "timestamp": 1624383898
    },
    {
        "content": "<p>Seems like the URL that should be in <code>telecom</code> is set as the location's description, too. For example, here's one from Deleware:</p>\n<div class=\"codehilite\" data-code-language=\"JavaScript\"><pre><span></span><code><span class=\"p\">{</span>\n  <span class=\"s2\">\"resourceType\"</span><span class=\"o\">:</span> <span class=\"s2\">\"Location\"</span><span class=\"p\">,</span>\n  <span class=\"s2\">\"id\"</span><span class=\"o\">:</span> <span class=\"s2\">\"129\"</span><span class=\"p\">,</span>\n  <span class=\"s2\">\"telecom\"</span><span class=\"o\">:</span> <span class=\"p\">[</span>\n    <span class=\"p\">{</span>\n      <span class=\"s2\">\"system\"</span><span class=\"o\">:</span> <span class=\"s2\">\"phone\"</span><span class=\"p\">,</span>\n      <span class=\"s2\">\"value\"</span><span class=\"o\">:</span> <span class=\"s2\">\"(302) 368-1614\"</span>\n    <span class=\"p\">}</span>\n  <span class=\"p\">],</span>\n  <span class=\"s2\">\"description\"</span><span class=\"o\">:</span> <span class=\"s2\">\"https://www.riteaid.com/covid-19\"</span><span class=\"p\">,</span>\n  <span class=\"c1\">// ...other properties here...</span>\n<span class=\"p\">}</span>\n</code></pre></div>",
        "id": 243553364,
        "sender_full_name": "Rob Brackett",
        "timestamp": 1624384072
    },
    {
        "content": "<p>Also just noticed that, in the manifest, <code>State</code> is capitalized when it should not be:</p>\n<div class=\"codehilite\" data-code-language=\"JavaScript\"><pre><span></span><code>    <span class=\"p\">{</span>\n      <span class=\"s2\">\"type\"</span><span class=\"o\">:</span> <span class=\"s2\">\"Slot\"</span><span class=\"p\">,</span>\n      <span class=\"s2\">\"url\"</span><span class=\"o\">:</span> <span class=\"s2\">\"https://api.riteaid.com/digital/vaccine-provider/states/slots/DE.ndjson\"</span><span class=\"p\">,</span>\n      <span class=\"s2\">\"extension\"</span><span class=\"o\">:</span> <span class=\"p\">{</span>\n        <span class=\"s2\">\"State\"</span><span class=\"o\">:</span> <span class=\"p\">[</span>\n          <span class=\"s2\">\"DE\"</span>\n        <span class=\"p\">]</span>\n      <span class=\"p\">}</span>\n    <span class=\"p\">},</span>\n</code></pre></div>\n<p>The validator isn’t erroring on it because it’s just seeing it as an unknown, extra extension, but you can see that it’s not seeing it as the state extension:<br>\n<a href=\"/user_uploads/10155/oEy26774R4NhElj1TShC5XRc/Screen-Shot-2021-06-22-at-10.58.02-AM.png\">Screen-Shot-2021-06-22-at-10.58.02-AM.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/oEy26774R4NhElj1TShC5XRc/Screen-Shot-2021-06-22-at-10.58.02-AM.png\" title=\"Screen-Shot-2021-06-22-at-10.58.02-AM.png\"><img src=\"/user_uploads/10155/oEy26774R4NhElj1TShC5XRc/Screen-Shot-2021-06-22-at-10.58.02-AM.png\"></a></div>",
        "id": 243554928,
        "sender_full_name": "Rob Brackett",
        "timestamp": 1624384696
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"402522\">Yijie Hong</span> <a href=\"#narrow/stream/281612-smart.2Fscheduling-links/topic/Publisher.3A.20Rite-Aid/near/243459114\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"416184\">Patrick Stuart</span> <a href=\"#narrow/stream/281612-smart.2Fscheduling-links/topic/Publisher.3A.20Rite-Aid/near/243430502\">said</a>:</p>\n<blockquote>\n<p>Latest release is published.</p>\n<p>Change log: </p>\n<ul>\n<li>VTRKs PIN added</li>\n<li>Endpoint is 14 days out, not 1.</li>\n<li>Slot ndjson files have valid extensions</li>\n<li>Properly formed vaccine-product extensions</li>\n</ul>\n</blockquote>\n<p>Thanks!</p>\n</blockquote>\n<p><span class=\"user-mention\" data-user-id=\"402522\">@Yijie Hong</span> we can fix this in an upcoming release to use UTC.</p>",
        "id": 243568566,
        "sender_full_name": "Patrick Stuart",
        "timestamp": 1624390774
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"398591\">Rob Brackett</span> <a href=\"#narrow/stream/281612-smart.2Fscheduling-links/topic/Publisher.3A.20Rite-Aid/near/243553004\">said</a>:</p>\n<blockquote>\n<p>Just took a look at this and noticed that <code>address.district</code> in the locations is the name of the city, not the county. (Turns out that’s also the case in the the internal API, so I’ve got a lot of Rite Aid locations to go find the actual county for and fix…)</p>\n</blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"398591\">Rob Brackett</span> <a href=\"#narrow/stream/281612-smart.2Fscheduling-links/topic/Publisher.3A.20Rite-Aid/near/243553364\">said</a>:</p>\n<blockquote>\n<p>Seems like the URL that should be in <code>telecom</code> is set as the location's description, too. For example, here's one from Deleware:</p>\n<p><div class=\"codehilite\" data-code-language=\"JavaScript\"><pre><span></span><code><span class=\"p\">{</span>\n  <span class=\"s2\">\"resourceType\"</span><span class=\"o\">:</span> <span class=\"s2\">\"Location\"</span><span class=\"p\">,</span>\n  <span class=\"s2\">\"id\"</span><span class=\"o\">:</span> <span class=\"s2\">\"129\"</span><span class=\"p\">,</span>\n  <span class=\"s2\">\"telecom\"</span><span class=\"o\">:</span> <span class=\"p\">[</span>\n    <span class=\"p\">{</span>\n      <span class=\"s2\">\"system\"</span><span class=\"o\">:</span> <span class=\"s2\">\"phone\"</span><span class=\"p\">,</span>\n      <span class=\"s2\">\"value\"</span><span class=\"o\">:</span> <span class=\"s2\">\"(302) 368-1614\"</span>\n    <span class=\"p\">}</span>\n  <span class=\"p\">],</span>\n  <span class=\"s2\">\"description\"</span><span class=\"o\">:</span> <span class=\"s2\">\"https://www.riteaid.com/covid-19\"</span><span class=\"p\">,</span>\n  <span class=\"c1\">// ...other properties here...</span>\n<span class=\"p\">}</span>\n</code></pre></div><br>\n</p>\n</blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"398591\">Rob Brackett</span> <a href=\"#narrow/stream/281612-smart.2Fscheduling-links/topic/Publisher.3A.20Rite-Aid/near/243554928\">said</a>:</p>\n<blockquote>\n<p>Also just noticed that, in the manifest, <code>State</code> is capitalized when it should not be:</p>\n<div class=\"codehilite\" data-code-language=\"JavaScript\"><pre><span></span><code>    <span class=\"p\">{</span>\n      <span class=\"s2\">\"type\"</span><span class=\"o\">:</span> <span class=\"s2\">\"Slot\"</span><span class=\"p\">,</span>\n      <span class=\"s2\">\"url\"</span><span class=\"o\">:</span> <span class=\"s2\">\"https://api.riteaid.com/digital/vaccine-provider/states/slots/DE.ndjson\"</span><span class=\"p\">,</span>\n      <span class=\"s2\">\"extension\"</span><span class=\"o\">:</span> <span class=\"p\">{</span>\n        <span class=\"s2\">\"State\"</span><span class=\"o\">:</span> <span class=\"p\">[</span>\n          <span class=\"s2\">\"DE\"</span>\n        <span class=\"p\">]</span>\n      <span class=\"p\">}</span>\n    <span class=\"p\">},</span>\n</code></pre></div>\n<p>The validator isn’t erroring on it because it’s just seeing it as an unknown, extra extension, but you can see that it’s not seeing it as the state extension:<br>\n<a href=\"/user_uploads/10155/oEy26774R4NhElj1TShC5XRc/Screen-Shot-2021-06-22-at-10.58.02-AM.png\">Screen-Shot-2021-06-22-at-10.58.02-AM.png</a></p>\n</blockquote>\n<p><span class=\"user-mention\" data-user-id=\"398591\">@Rob Brackett</span> we will fix these in an upcoming release. Can you check to ensure you aren't seeing any other issues, please? Each of these changes has to go through QA.</p>",
        "id": 243569075,
        "sender_full_name": "Patrick Stuart",
        "timestamp": 1624391018
    },
    {
        "content": "<p>I noticed Slots that are free seem to have narrower hours that might be meaningful:</p>\n<div class=\"codehilite\" data-code-language=\"JavaScript\"><pre><span></span><code><span class=\"p\">{</span>\n  <span class=\"s2\">\"status\"</span><span class=\"o\">:</span> <span class=\"s2\">\"free\"</span><span class=\"p\">,</span>\n  <span class=\"s2\">\"start\"</span><span class=\"o\">:</span> <span class=\"s2\">\"2021-06-26T09:00:00Z\"</span><span class=\"p\">,</span>\n  <span class=\"s2\">\"end\"</span><span class=\"o\">:</span> <span class=\"s2\">\"2021-06-26T18:00:00Z\"</span><span class=\"p\">,</span>\n<span class=\"p\">}</span>\n</code></pre></div>\n<p>But busy slots are all day:</p>\n<div class=\"codehilite\" data-code-language=\"JavaScript\"><pre><span></span><code><span class=\"p\">{</span>\n  <span class=\"s2\">\"status\"</span><span class=\"o\">:</span> <span class=\"s2\">\"busy\"</span><span class=\"p\">,</span>\n  <span class=\"s2\">\"start\"</span><span class=\"o\">:</span> <span class=\"s2\">\"2021-06-27T00:00:00Z\"</span><span class=\"p\">,</span>\n  <span class=\"s2\">\"end\"</span><span class=\"o\">:</span> <span class=\"s2\">\"2021-06-27T23:59:59.999999999Z\"</span><span class=\"p\">,</span>\n<span class=\"p\">}</span>\n</code></pre></div>\n<p>Wondering if I can or should infer something like business hours from the free times (although it looks like maybe the timezone offset is wrong — those examples were from California, so the timeframe for that slot is 2am–11am local time).</p>",
        "id": 243570754,
        "sender_full_name": "Rob Brackett",
        "timestamp": 1624391744
    },
    {
        "content": "<p>I don’t see any other obvious technical issues besides the ones I and others already noted, though! <span aria-label=\"thumbs up\" class=\"emoji emoji-1f44d\" role=\"img\" title=\"thumbs up\">:thumbs_up:</span></p>",
        "id": 243570877,
        "sender_full_name": "Rob Brackett",
        "timestamp": 1624391794
    },
    {
        "content": "<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"402522\">Yijie Hong</span> <a href=\"#narrow/stream/281612-smart.2Fscheduling-links/topic/Publisher.3A.20Rite-Aid/near/243408176\">said</a>:</p>\n</blockquote>\n<blockquote>\n<p>In <a href=\"https://api.riteaid.com/digital/vaccine-provider/$bulk-publish\">https://api.riteaid.com/digital/vaccine-provider/$bulk-publish</a>, \"transactionTime\" is given in format of \"yyyy-MM-dd HH:mm\", e.g. \"2021-06-18 21:04\". I am curious about time zone. It is EST?</p>\n</blockquote>\n<p>Just to note, this isn't a valid timestamp; it should have a <code>T</code> before the time, and an offset specifier at the end. <span class=\"user-mention\" data-user-id=\"192576\">@Robert Scanlon</span>  is there an opportunity to validate these?</p>",
        "id": 243572426,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1624392587
    },
    {
        "content": "<p>See also:</p>\n<ul>\n<li><a href=\"#narrow/stream/281612-smart.2Fscheduling-links/topic/Consumer.3A.20MITRE.20.2F.20Inferno.20Tests/near/243555366\">https://chat.fhir.org/#narrow/stream/281612-smart.2Fscheduling-links/topic/Consumer.3A.20MITRE.20.2F.20Inferno.20Tests/near/243555366</a> and</li>\n<li><a href=\"https://github.com/smart-on-fhir/smart-scheduling-links/pull/48\">https://github.com/smart-on-fhir/smart-scheduling-links/pull/48</a><br>\n<span aria-label=\"grinning face with smiling eyes\" class=\"emoji emoji-1f601\" role=\"img\" title=\"grinning face with smiling eyes\">:grinning_face_with_smiling_eyes:</span></li>\n</ul>",
        "id": 243572714,
        "sender_full_name": "Rob Brackett",
        "timestamp": 1624392725
    },
    {
        "content": "<p>Thanks Rob (and just merged your PR)</p>",
        "id": 243573434,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1624393115
    },
    {
        "content": "<p>(redacted)</p>",
        "id": 243602085,
        "sender_full_name": "Patrick Stuart",
        "timestamp": 1624416482
    },
    {
        "content": "<p>(redacted)</p>",
        "id": 243602404,
        "sender_full_name": "Patrick Stuart",
        "timestamp": 1624417043
    },
    {
        "content": "<p>Good morning. I have a technical question on how we should indicate the free vs. busy slots.</p>\n<p>It looks like our developer provided an aggregate slot capacity on the whole day and only provided free slots.</p>\n<p>Is this acceptable or should we be listing each busy/free slot individually?</p>\n<p>For what it's worth, this doesn't easily fit our paradigm as we occasionally have more slots available than actual vaccines to give. We close the remaining slots once the vaccines have hit a maximum number.</p>",
        "id": 243680106,
        "sender_full_name": "Patrick Stuart",
        "timestamp": 1624467048
    },
    {
        "content": "<p>In general, we encourage publishing fine-grained slot information indicating specific times when appointments can be booked. If you can do this, it's preferred. If you have 1 dose of vaccines but 10 open time slots, it's okay to transition from 10 open slots to 0 open slots when that final dose is spoken for.</p>",
        "id": 243681105,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1624467509
    },
    {
        "content": "<p>But when this happens, you shouldn't mark all 10 slots as busy -- one would become busy and 9 would disappear (no longer actually an appointment slot for this service; we could talk about other options for how to model this, too...)</p>",
        "id": 243681388,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1624467624
    },
    {
        "content": "<p>We have a release scheduled for tomorrow evening Eastern time. </p>\n<p>Change log:</p>\n<ul>\n<li>Remove district (optional field that had an incorrect value)</li>\n<li>Added URL to Telecom</li>\n<li>Fixed capitalization on state</li>\n<li>Added correct time zone on slots</li>\n<li>Fixed transaction time format as well as added time zone</li>\n<li>FIxed location description</li>\n<li>Added consistent time reporting</li>\n</ul>\n<p>Future changes:</p>\n<ul>\n<li>Listing slots individually. Currently it aggregates them over the day and doesn't report busy slots unless they're all used.</li>\n<li>Add county.</li>\n<li>Add a URL that will bring users to the qualifier for the store in question. Currently we use the same URL for every store.</li>\n</ul>\n<p>A preview is here: <a href=\"https://apicar.riteaid.com/digital/vaccine-provider/$bulk-publish\">https://apicar.riteaid.com/digital/vaccine-provider/$bulk-publish</a>.</p>\n<p>We would love and appreciate any feedback anyone has. Thank you.</p>",
        "id": 243729514,
        "sender_full_name": "Patrick Stuart",
        "timestamp": 1624493985
    },
    {
        "content": "<p>Hi Josh, We fixed few issues in the apis But we are seeing different inferno test results in different environments. All test are passing in our Test env, But failing in QA. From the inferno error, I understand that it is expecting a value for description in location API, But according to the spec it should be a string. Could you please suggest what could be the issue here. Here is the link of the results.<br>\n<a href=\"https://infernotest.healthit.gov/community/9ECyD0BkVtz/test_sets/ad_hoc_testing/#SMARTSchedulingLinksSlotPublisherTests/ad_hoc_testing_SMARTSchedulingLinksSlotPublisherTests_SmartSchedulingLinksBasicSequence\">https://infernotest.healthit.gov/community/9ECyD0BkVtz/test_sets/ad_hoc_testing/#SMARTSchedulingLinksSlotPublisherTests/ad_hoc_testing_SMARTSchedulingLinksSlotPublisherTests_SmartSchedulingLinksBasicSequence</a></p>",
        "id": 243813341,
        "sender_full_name": "Madhura Chinthala",
        "timestamp": 1624553004
    },
    {
        "content": "<p>Ping <span class=\"user-mention\" data-user-id=\"398591\">@Rob Brackett</span>  who wrote the service.</p>",
        "id": 243816412,
        "sender_full_name": "Patrick Stuart",
        "timestamp": 1624554443
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"416184\">Patrick Stuart</span> <a href=\"#narrow/stream/281612-smart.2Fscheduling-links/topic/Publisher.3A.20Rite-Aid/near/243816412\">said</a>:</p>\n<blockquote>\n<p>Ping <span class=\"user-mention silent\" data-user-id=\"398591\">Rob Brackett</span>  who wrote the service.</p>\n</blockquote>\n<p>Oh, that’s not me! I <em>believe</em> you want <span class=\"user-mention\" data-user-id=\"192576\">@Robert Scanlon</span>, but am not 100% sure on that.</p>",
        "id": 243816582,
        "sender_full_name": "Rob Brackett",
        "timestamp": 1624554505
    },
    {
        "content": "<p>That said, the error in that output looks accurate. There is at least one empty description (in PA). There should be a value or the property should simply not be present.<br>\nHere's what I did to quickly check that:</p>\n<div class=\"codehilite\" data-code-language=\"Bash\"><pre><span></span><code><span class=\"k\">for</span> STATE <span class=\"k\">in</span> DE OR WA NY VA PA CT MA MD OH NH ID MI NJ CA<span class=\"p\">;</span> <span class=\"k\">do</span>\n  <span class=\"nb\">echo</span> <span class=\"s2\">\"Checking </span><span class=\"nv\">$STATE</span><span class=\"s2\">\"</span>\n  http <span class=\"s2\">\"https://apisqa.riteaid.com/digital/vaccine-provider/states/locations/</span><span class=\"si\">${</span><span class=\"nv\">STATE</span><span class=\"si\">}</span><span class=\"s2\">.ndjson\"</span> <span class=\"p\">|</span> jq .description\n<span class=\"k\">done</span>\n</code></pre></div>",
        "id": 243817717,
        "sender_full_name": "Rob Brackett",
        "timestamp": 1624555012
    },
    {
        "content": "<p>(That's bash, so you should be able to run it on a *nix/MacOS terminal or WSL on Windows)</p>",
        "id": 243817798,
        "sender_full_name": "Rob Brackett",
        "timestamp": 1624555049
    },
    {
        "content": "<p>Thanks for the quick response on this, we will fix that data,  Along with this error, we are seeing a different error as below<br>\n\"1167 unknown Locations referenced as actor (e.g. Location/4062)\"</p>\n<p>Could you please elaborate on that as well.</p>",
        "id": 243819186,
        "sender_full_name": "Madhura Chinthala",
        "timestamp": 1624555728
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"398591\">@Rob Brackett</span>  thank you! In fact, it succeeded after we fixed the description issue. Seems it was a downstream failure.</p>",
        "id": 243819480,
        "sender_full_name": "Patrick Stuart",
        "timestamp": 1624555847
    },
    {
        "content": "<p>Looking forward to seeing this ship tonight! :)</p>\n<p>Two questions:</p>\n<ol>\n<li>Is the API reporting live results or, if not, at what rate is it updating? (Apologies if this was already stated somewhere and I just lost track)</li>\n<li>Do you have any future plans to include vaccine product info in the schedule endpoint?</li>\n</ol>",
        "id": 243820393,
        "sender_full_name": "Rob Brackett",
        "timestamp": 1624556232
    },
    {
        "content": "<p>Sorry for not responding quicker here regarding the Inferno error messages. The results from that test session you linked above all now pass - I assume that’s because you were able to fix the issues Inferno was providing and reran the tests?</p>",
        "id": 243824070,
        "sender_full_name": "Robert Scanlon",
        "timestamp": 1624557954
    },
    {
        "content": "<p>Yes, all tests are passing now after fixing the description.</p>",
        "id": 243824320,
        "sender_full_name": "Madhura Chinthala",
        "timestamp": 1624558047
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191315\">Josh Mandel</span> <a href=\"#narrow/stream/281612-smart.2Fscheduling-links/topic/Publisher.3A.20Rite-Aid/near/243572426\">said</a>:</p>\n<blockquote>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"402522\">Yijie Hong</span> <a href=\"#narrow/stream/281612-smart.2Fscheduling-links/topic/Publisher.3A.20Rite-Aid/near/243408176\">said</a>:</p>\n</blockquote>\n<blockquote>\n<p>In <a href=\"https://api.riteaid.com/digital/vaccine-provider/$bulk-publish\">https://api.riteaid.com/digital/vaccine-provider/$bulk-publish</a>, \"transactionTime\" is given in format of \"yyyy-MM-dd HH:mm\", e.g. \"2021-06-18 21:04\". I am curious about time zone. It is EST?</p>\n</blockquote>\n<p>Just to note, this isn't a valid timestamp; it should have a <code>T</code> before the time, and an offset specifier at the end. <span class=\"user-mention silent\" data-user-id=\"192576\">Robert Scanlon</span>  is there an opportunity to validate these?</p>\n</blockquote>\n<p>Hmmm this is a surprising miss by the HL7 FHIR validator. We’ll look into it.</p>",
        "id": 243824470,
        "sender_full_name": "Robert Scanlon",
        "timestamp": 1624558109
    },
    {
        "content": "<p>It's a field from <a href=\"http://hl7.org/fhir/async.html\">http://hl7.org/fhir/async.html</a> which kind of exists outside of the world of StructureDefinitions, so it's not quite an HL7 validation issue.</p>",
        "id": 243844296,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1624567686
    },
    {
        "content": "<p>Ah, didn't read that close enough, we could add that too</p>",
        "id": 243848980,
        "sender_full_name": "Robert Scanlon",
        "timestamp": 1624569978
    },
    {
        "content": "<p>Castlight reviewed the store id published by Rite-Aid on FHIR API. The store ld is populated and we were able to match it with store id coming from CDC. Thank you.</p>",
        "id": 243851777,
        "sender_full_name": "Hemanth Gorur",
        "timestamp": 1624571695
    },
    {
        "content": "<p>Just a heads up RiteAid should now also be published on Google Search and Maps, thanks for everyone's work on this</p>",
        "id": 244731780,
        "sender_full_name": "Dennis Ai",
        "timestamp": 1625245887
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"416184\">Patrick Stuart</span> <a href=\"#narrow/stream/281612-smart.2Fscheduling-links/topic/Publisher.3A.20Rite-Aid/near/241083720\">said</a>:</p>\n<blockquote>\n<p>Insomnia is URL-encoding the character which confuses our server. <a href=\"/user_uploads/10155/wfhwpsRkGerXVovOOrwmpK9D/Capture.PNG\">Capture.PNG</a></p>\n</blockquote>\n<p><span class=\"user-mention\" data-user-id=\"191315\">@Josh Mandel</span> <br>\nFYI this is fixed in the latest version of Insomnia</p>",
        "id": 245816319,
        "sender_full_name": "Patrick Stuart",
        "timestamp": 1626179218
    },
    {
        "content": "<p>Excellent!</p>",
        "id": 245825814,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1626183598
    },
    {
        "content": "<p>Castlight integrated the Appointment availability data being shared by CVS, Rite-Aid and walgreens. Here is a demo of how the information will be presented on <a href=\"http://vaccines.gov\">vaccines.gov</a> <a href=\"https://vimeo.com/575047522/b7d63395d5\">https://vimeo.com/575047522/b7d63395d5</a> .</p>",
        "id": 246015039,
        "sender_full_name": "Hemanth Gorur",
        "timestamp": 1626294251
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"398591\">@Rob Brackett</span> our stores without availability are still being listed as unknown on <a href=\"http://vaccines.gov\">vaccines.gov</a>. Can you assist or point us in the relevant direction?</p>",
        "id": 247093915,
        "sender_full_name": "Patrick Stuart",
        "timestamp": 1627160869
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"416184\">@Patrick Stuart</span> I don't work directly on <a href=\"http://vaccines.gov\">vaccines.gov</a> (I’m with USDR, working with state govs and on <a href=\"http://getmyvax.org\">getmyvax.org</a>, as well as some community/grassroots groups), so <span class=\"user-mention\" data-user-id=\"418358\">@sophia golden</span>, <span class=\"user-mention\" data-user-id=\"410156\">@Hemanth Gorur</span>, or <span class=\"user-mention\" data-user-id=\"415381\">@Gavin Thompson</span> are probably the people you want help from here.</p>\n<p>Are you talking about the production <a href=\"http://vaccines.gov\">vaccines.gov</a>, or the in-development appointment stuff at <a href=\"http://dev.vaccinefinder.org\">dev.vaccinefinder.org</a>? (I don't even have a login to view the latter.)</p>",
        "id": 247397774,
        "sender_full_name": "Rob Brackett",
        "timestamp": 1627423275
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"416184\">@Patrick Stuart</span> both the old Rite Aid API that requires a key (<code>https://api.riteaid.com/digital/Covid19-Vaccine/ProviderDetails</code>) and the SMART Scheduling Links API (<code>https://api.riteaid.com/digital/vaccine-provider/$bulk-publish</code>) have been erroring for the last two days. Do you know what’s going on? These APIs are still a pretty big deal for our partners at the state of NJ, especially now that there’s a crunch for pediatric vaccines.</p>",
        "id": 262029611,
        "sender_full_name": "Rob Brackett",
        "timestamp": 1637300596
    },
    {
        "content": "<p>Requests to the API are currently returning:</p>\n<div class=\"codehilite\"><pre><span></span><code>{\n  &quot;Data&quot;: null,\n  &quot;Status&quot;: &quot;ERROR&quot;,\n  &quot;ErrCde&quot;: &quot;RA0005&quot;,\n  &quot;ErrMsg&quot;: &quot;Something went wrong. Please contact Customer Care to continue.&quot;,\n  &quot;ErrMsgDtl&quot;: null\n}\n</code></pre></div>",
        "id": 262029684,
        "sender_full_name": "Rob Brackett",
        "timestamp": 1637300653
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"416184\">@Patrick Stuart</span> If you've at least got any background on what's going on, and if we and our state partners can expect a fix at some point (even if there's no timeframe yet), that would be super helpful.</p>",
        "id": 262372274,
        "sender_full_name": "Rob Brackett",
        "timestamp": 1637612332
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"416184\">@Patrick Stuart</span> FYI, we’ve switched from the API to querying the same XHR endpoints used by the web-based booking flow, since this info was critical for our state partners. We’ll happily switch back to an API actually designed for public use whenever the issues are resolved, though.</p>",
        "id": 263041901,
        "sender_full_name": "Rob Brackett",
        "timestamp": 1638207451
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"416184\">@Patrick Stuart</span>  Are the Rite-Aid fhir api's back to working ?</p>",
        "id": 264046745,
        "sender_full_name": "Hemanth Gorur",
        "timestamp": 1638900929
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191315\">@Josh Mandel</span> Do you have sample examples to include pediatrics vaccinations?</p>",
        "id": 272039876,
        "sender_full_name": "Hemalatha Ravishankar",
        "timestamp": 1644960064
    }
]