[
    {
        "content": "<p>Hei FHIR Venner! <br>\nPrøver å bruke No-basis-composition som underliggende profil for en ny composition profil som jeg bygger med FSH/SUSHI, men SUSHI gir feilmelding: <br>\n<code>error Structure Definition http://hl7.no/fhir/StructureDefinition/no-basis-Composition is missing snapshot. Snapshot is required for import.</code><br>\nNoen som har ide til hva jeg gjør feil, eller hvordan jeg kan omgå det?</p>",
        "id": 259059920,
        "sender_full_name": "Ingvar Sørlien",
        "timestamp": 1635232873
    },
    {
        "content": "<p>Får også samme feilmelding hvis jeg prøver å benytte NoBasisPasient til grunn for pasient.</p>\n<p>Litt mer detaljer:<br>\nDet jeg prøver å gjøre i første omgang er å bygge noen eksempel-ressurser som bygger på NoBasis profilene. Jeg har skrevet eksemplene i FSH, og legger da NoBasis ressursene som jeg ønsker å bygge videre på i JSON-format inn i katalogen input/resources.</p>",
        "id": 259061157,
        "sender_full_name": "Ingvar Sørlien",
        "timestamp": 1635233663
    },
    {
        "content": "<p>Og der kunne jeg svare på mitt eget spørsmål:<br>\nI Simplifier kan man laste ned enkeltressurser med snapshot, men tydelig vis ikke hel IG'en. Hentet ressursene en for en:</p>\n<div class=\"codehilite\" data-code-language=\"Bash\"><pre><span></span><code>curl.exe -OJ <span class=\"s1\">'https://simplifier.net/hl7norwayno-basis/nobasiscomposition/$downloadsnapshot?format=json'</span>\n</code></pre></div>\n<p>Så gikk sushi igjennom uten feilmeldinger.<br>\nNoen som vet om det finnes en enklere løsning på dette?</p>",
        "id": 259064224,
        "sender_full_name": "Ingvar Sørlien",
        "timestamp": 1635235680
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"256280\">Ingvar Sørlien</span> <a href=\"#narrow/stream/179226-norway/topic/Bruke.20NO-basis.20Composition.20for.20.C3.A5.20bygge.20videre.20profil/near/259059920\">said</a>:</p>\n<blockquote>\n<p>Hei FHIR Venner! <br>\nPrøver å bruke No-basis-composition som underliggende profil for en ny composition profil som jeg bygger med FSH/SUSHI, men SUSHI gir feilmelding: <br>\n<code>error Structure Definition http://hl7.no/fhir/StructureDefinition/no-basis-Composition is missing snapshot. Snapshot is required for import.</code><br>\nNoen som har ide til hva jeg gjør feil, eller hvordan jeg kan omgå det?</p>\n</blockquote>\n<p>Du kan laste ned hele IGen som en FHIR package <a href=\"https://simplifier.net/packages/hl7.fhir.no.basis/2.0.17-alpha/~introduction\">fra Simplifier</a><br>\n<a href=\"/user_uploads/10155/xGmd4l9_4CcYiovuTzM4zY8a/Untitled.png\">Untitled.png</a> </p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/xGmd4l9_4CcYiovuTzM4zY8a/Untitled.png\" title=\"Untitled.png\"><img src=\"/user_uploads/10155/xGmd4l9_4CcYiovuTzM4zY8a/Untitled.png\"></a></div><p>Alternativt kan du spesifisere en dependency på hl7.fhir.no.basis i sushi-config.yaml filen, <a href=\"https://fshschool.org/docs/sushi/configuration/#dependencies\">se doc.</a>. Da skal dependencies resolves automatisk vha. NPM når du kjører SUSHI.</p>",
        "id": 259140141,
        "sender_full_name": "Eirik Myklebost",
        "timestamp": 1635272881
    },
    {
        "content": "<p>Takk for svar <span class=\"user-mention\" data-user-id=\"223185\">@Eirik Myklebost</span> Det å benyte pakker er jo en åpenbar løsning. Ser at det kan fungere for <a href=\"https://simplifier.net/HL7Norwayno-basis/~packages\">no-basis</a>, men <a href=\"https://simplifier.net/HL7NorwayNationalprofiles/~packages\">no-domain</a> og <a href=\"https://simplifier.net/VelferdteknologiskknutepunktR4/~packages\">Velferdsteknologisk knutepunkt</a> kan jeg ikke se at har frigitt noen pakker. <br>\nJeg så også på muligheten til å spesifisere dependencies i sushi-config, men da forstod jeg det som at URL'ene det pekes til må være aktive, og så vidt jeg kan se stemmer ikke dette for noen av URL'ene som er brukt i de norske profilene (eks. <a href=\"https://www.ehelse.no/fhir/StructureDefinition/vkp-Patient-v090\">vkp-patient</a>, <a href=\"http://hl7.no/fhir/StructureDefinition/no-basis-Composition\">no-basis-composition</a>. Noen som kjenner til hvilke planer som ligger for å få URL'ene til å fungere? <span class=\"user-mention\" data-user-id=\"192856\">@Thomas Tveit Rosenlund</span> eller <span class=\"user-mention\" data-user-id=\"192654\">@Øyvind Aassve</span> ?</p>",
        "id": 259200257,
        "sender_full_name": "Ingvar Sørlien",
        "timestamp": 1635318571
    },
    {
        "content": "<p>I teorien skal det være nok å ha en kopi av ressursdefinisjonene du bygger på lokalt. Men det er mye plunder og heft med å gjennomføre dette hvis du ikke har en pakke du kan benytte til byggearbeidet. Alternativet er at canonical er resolvable, da skal SUSHI klare å finne disse der de ligger, det er dessverre ingen konkrete planer for å gå til akkurat det p.t. men vi har tenkt på det lenge...</p>",
        "id": 259202471,
        "sender_full_name": "Thomas Tveit Rosenlund",
        "timestamp": 1635320285
    },
    {
        "content": "<p>Siden det ikke er vanlig å lage pakker for prosjekter som er i startfasen vil dette kunne forhindre gjenbruk i noen grad, men VKP burde uansett ha publisert pakker for definisjonene sine.</p>",
        "id": 259202520,
        "sender_full_name": "Thomas Tveit Rosenlund",
        "timestamp": 1635320342
    },
    {
        "content": "<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"192856\">Thomas Tveit Rosenlund</span> :<br>\nAlternativet er at canonical er resolvable, da skal SUSHI klare å finne disse der de ligger, det er dessverre ingen konkrete planer for å gå til akkurat det p.t. men vi har tenkt på det lenge...</p>\n</blockquote>\n<p>Noe å ta inn i <a href=\"https://github.com/HL7Norway/best-practice/blob/master/docs/dgi/index.md\">Den gode implementasjonsguide</a>?</p>",
        "id": 259202841,
        "sender_full_name": "Ingvar Sørlien",
        "timestamp": 1635320628
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"256280\">@Ingvar Sørlien</span> Det tror jeg er mer mer et  no-FHIR-I(nfrastructure) prosjekt å få dette til for HL7 Norge  IG'er</p>",
        "id": 259202991,
        "sender_full_name": "Thomas Tveit Rosenlund",
        "timestamp": 1635320722
    },
    {
        "content": "<p>Det er forresten noe galt i package registry: <a href=\"/user_uploads/10155/p8xehaTIdOCx7Vm1TCqq0YL3/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/p8xehaTIdOCx7Vm1TCqq0YL3/image.png\" title=\"image.png\"><img src=\"/user_uploads/10155/p8xehaTIdOCx7Vm1TCqq0YL3/image.png\"></a></div>",
        "id": 259203170,
        "sender_full_name": "Thomas Tveit Rosenlund",
        "timestamp": 1635320844
    },
    {
        "content": "<p>Den siste ig definisjonen vi har pushet til ig-registry er v2.0.15</p>",
        "id": 259203209,
        "sender_full_name": "Thomas Tveit Rosenlund",
        "timestamp": 1635320879
    },
    {
        "content": "<p>Men den siste pakken er 2.0.17-alpha</p>",
        "id": 259203252,
        "sender_full_name": "Thomas Tveit Rosenlund",
        "timestamp": 1635320891
    },
    {
        "content": "<p>Vi må visst få strømlinjeformet CI-CD og publiserings prosessen vår. <span class=\"user-mention\" data-user-id=\"192654\">@Øyvind Aassve</span> <span class=\"user-mention\" data-user-id=\"192681\">@Espen Stranger Seland</span> <br>\nHmm, det er kanskje jeg som må gjøre det, håper jeg kan få hjelp :-P</p>",
        "id": 259203384,
        "sender_full_name": "Thomas Tveit Rosenlund",
        "timestamp": 1635321011
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"192856\">Thomas Tveit Rosenlund</span> <a href=\"#narrow/stream/179226-norway/topic/Bruke.20NO-basis.20Composition.20for.20.C3.A5.20bygge.20videre.20profil/near/259202520\">said</a>:</p>\n<blockquote>\n<p>Siden det ikke er vanlig å lage pakker for prosjekter som er i startfasen vil dette kunne forhindre gjenbruk i noen grad, men VKP burde uansett ha publisert pakker for definisjonene sine.</p>\n</blockquote>\n<p><span class=\"user-mention\" data-user-id=\"361776\">@Jon N. Didriksen</span> eller <span class=\"user-mention\" data-user-id=\"380139\">@Alexander Svae</span>: Har dere noen konkrete planer for å publisere VKP-IG som pakke?</p>",
        "id": 259203592,
        "sender_full_name": "Ingvar Sørlien",
        "timestamp": 1635321194
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"192856\">@Thomas Tveit Rosenlund</span> -   Vi har helt klart bruk for flere Thomas-er her :). Har satt opp diskusjon rundt CI-CD prosesser og verktøystøtte på neste møte i TSK, men utfordringen koker mye ned til ressursmangel. For å drive litt markedsføring - vi pusher behov på EHIN-foredrag 8.november. <a href=\"https://ehin.no/2021/sessions/d6-1/\">https://ehin.no/2021/sessions/d6-1/</a></p>",
        "id": 259204214,
        "sender_full_name": "Øyvind Aassve",
        "timestamp": 1635321606
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"192856\">Thomas Tveit Rosenlund</span> <a href=\"#narrow/stream/179226-norway/topic/Bruke.20NO-basis.20Composition.20for.20.C3.A5.20bygge.20videre.20profil/near/259203170\">said</a>:</p>\n<blockquote>\n<p>Det er forresten noe galt i package registry: <a href=\"/user_uploads/10155/p8xehaTIdOCx7Vm1TCqq0YL3/image.png\">image.png</a></p>\n</blockquote>\n<p>2.0.15 er bare den nyeste ikke-prerelease versionen; de andre versionene, inkludert 2.0.17-alpha, er også der, men de er tagget som pre-release.</p>",
        "id": 259217954,
        "sender_full_name": "Eirik Myklebost",
        "timestamp": 1635330128
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"256280\">@Ingvar Sørlien</span> <span class=\"user-mention\" data-user-id=\"192856\">@Thomas Tveit Rosenlund</span> <br>\nFikk sushi til å laste ned nyeste no.basis ved å ha følgende i sushi-config.</p>\n<div class=\"codehilite\" data-code-language=\"YAML\"><pre><span></span><code><span class=\"nt\">dependencies</span><span class=\"p\">:</span>\n  <span class=\"nt\">hl7.fhir.no.basis</span><span class=\"p\">:</span>\n    <span class=\"nt\">uri</span><span class=\"p\">:</span> <span class=\"l l-Scalar l-Scalar-Plain\">https://simplifier.net/guide/no-basis-entities-individuals/introduction</span>\n    <span class=\"nt\">version</span><span class=\"p\">:</span> <span class=\"l l-Scalar l-Scalar-Plain\">2.0.17-alpha</span>\n</code></pre></div>\n<p>Jeg antar at IG-canonicalen ikke er ment å se slik ut, men det er den som er i bruk nå. Ellers inneholder pakken structure-definitions både med og uten snapshots og kan derfor skape problemer ved kjøring av SUSHI, dette antar jeg heller ikke er hensikten.</p>",
        "id": 259219795,
        "sender_full_name": "Eirik Myklebost",
        "timestamp": 1635331233
    },
    {
        "content": "<p>Jeg mener å ha lest at IG publisher bygger egne snapshot før IG-generering? Er det feil?</p>\n<p>Den uri'en er en direkte lenke til IG'en som er publisert, og det er et fullgodt alternativ for å inkludere no-basis i byggeprosessen. Men du burde kanskje heller skrive uri'en til selve pakken? Da skal SIMPLIFIER i prinsippet generere snapshots for alle ressursene før disse legges inn i pakken.</p>",
        "id": 259225033,
        "sender_full_name": "Thomas Tveit Rosenlund",
        "timestamp": 1635334410
    },
    {
        "content": "<p>For eksempel denne? <a href=\"https://simplifier.net/packages/hl7.fhir.no.basis/2.0.17-alpha\">https://simplifier.net/packages/hl7.fhir.no.basis/2.0.17-alpha</a></p>",
        "id": 259225398,
        "sender_full_name": "Thomas Tveit Rosenlund",
        "timestamp": 1635334610
    },
    {
        "content": "<p>Ja, vi må vel ta en kikk på den (\"Den gode implementasjonsguide\"), både hva en IG bør inneholde av (god, tekstlig) dokumentasjon og hvordan man lager en god pipeline med f.eks. .fsh etc. <br>\nHåper du får vervet noen <span class=\"user-mention\" data-user-id=\"192654\">@Øyvind Aassve</span>  - vi trenger helt klart flere \"nerds\" som kan ta i et tak :-)</p>",
        "id": 259225829,
        "sender_full_name": "Espen Stranger Seland",
        "timestamp": 1635334892
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"223185\">Eirik Myklebost</span> <a href=\"#narrow/stream/179226-norway/topic/Bruke.20NO-basis.20Composition.20for.20.C3.A5.20bygge.20videre.20profil/near/259219795\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"256280\">Ingvar Sørlien</span> <span class=\"user-mention silent\" data-user-id=\"192856\">Thomas Tveit Rosenlund</span> <br>\nFikk sushi til å laste ned nyeste no.basis ved å ha følgende i sushi-config.</p>\n<div class=\"codehilite\" data-code-language=\"YAML\"><pre><span></span><code><span class=\"nt\">dependencies</span><span class=\"p\">:</span>\n  <span class=\"nt\">hl7.fhir.no.basis</span><span class=\"p\">:</span>\n    <span class=\"nt\">uri</span><span class=\"p\">:</span> <span class=\"l l-Scalar l-Scalar-Plain\">https://simplifier.net/guide/no-basis-entities-individuals/introduction</span>\n    <span class=\"nt\">version</span><span class=\"p\">:</span> <span class=\"l l-Scalar l-Scalar-Plain\">2.0.17-alpha</span>\n</code></pre></div>\n<p>Jeg antar at IG-canonicalen ikke er ment å se slik ut, men det er den som er i bruk nå. Ellers inneholder pakken structure-definitions både med og uten snapshots og kan derfor skape problemer ved kjøring av SUSHI, dette antar jeg heller ikke er hensikten.</p>\n</blockquote>\n<p>Det er ikke Canonical-url for no-basis eller no-basis IG. Det er url'en hvor vi har publisert IG'en på SIMPLIFIER.</p>",
        "id": 259226052,
        "sender_full_name": "Thomas Tveit Rosenlund",
        "timestamp": 1635335030
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"JSON\"><pre><span></span><code><span class=\"nt\">\"canonical\"</span><span class=\"p\">:</span> <span class=\"s2\">\"http://hl7.no/fhir/\"</span><span class=\"p\">,</span>\n      <span class=\"nt\">\"editions\"</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n        <span class=\"p\">{</span>\n          <span class=\"nt\">\"name\"</span><span class=\"p\">:</span> <span class=\"s2\">\"HL7 Norway no-basis\"</span><span class=\"p\">,</span>\n          <span class=\"nt\">\"ig-version\"</span><span class=\"p\">:</span> <span class=\"s2\">\"2.0.15\"</span><span class=\"p\">,</span>\n          <span class=\"nt\">\"package\"</span><span class=\"p\">:</span> <span class=\"s2\">\"hl7.fhir.no.basis#2.0.15\"</span><span class=\"p\">,</span>\n          <span class=\"nt\">\"fhir-version\"</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n            <span class=\"s2\">\"4.0.1\"</span>\n          <span class=\"p\">],</span>\n          <span class=\"nt\">\"url\"</span><span class=\"p\">:</span> <span class=\"s2\">\"https://simplifier.net/guide/no-basis-entities-individuals/introduction\"</span>\n        <span class=\"p\">}</span>\n      <span class=\"p\">]</span>\n</code></pre></div>",
        "id": 259226273,
        "sender_full_name": "Thomas Tveit Rosenlund",
        "timestamp": 1635335150
    },
    {
        "content": "<p>Dette er Canonical som vi har publisert som en del av IG:</p>\n<div class=\"codehilite\" data-code-language=\"XML\"><pre><span></span><code>http://hl7.no/fhir/ImplementationGuide/no-basis-ImplementationGuide-v2015\n</code></pre></div>\n<p>Men vi må ta bort versjonsnummeret her, og i forsøksbuild-pipen min får jeg et annet namespace siden jeg har satt en annen id (pakkenavnet). Så spørsmålet er om vi bør endre canonical for no-basis helt. Eller om vi bare skal ta bort versjonsnummeret. Dette blir styrt av \"id\" elementet i sushi-config.yaml</p>",
        "id": 259227381,
        "sender_full_name": "Thomas Tveit Rosenlund",
        "timestamp": 1635335781
    },
    {
        "content": "<p>Slik jeg har forstått det er det ingen føringer på at id på ig og id på pakke skal samsvare, men det er kanskje praktisk?</p>",
        "id": 259227494,
        "sender_full_name": "Thomas Tveit Rosenlund",
        "timestamp": 1635335870
    },
    {
        "content": "<p>Ah, canonicals og resolvable URLs er en klassisk kilde til forvirring <span aria-label=\"sweat smile\" class=\"emoji emoji-1f605\" role=\"img\" title=\"sweat smile\">:sweat_smile:</span> </p>\n<p>Logical id, Canonical-url og pakke-id kan være forskjellig, default i sushi er bare å bruke samme ved mindre du er eksplisitt.</p>\n<p>sushi-config.yaml har følgende elementer:<br>\nid required<br>\nurl, optional, defaults to {canonical}/ImplementationGuide/{id}<br>\npackageId, optional, defaults to id</p>",
        "id": 259227988,
        "sender_full_name": "Eirik Myklebost",
        "timestamp": 1635336175
    },
    {
        "content": "<p>Det ser ikke ut til at det har noe å si hva du plasserer i URI i sushi-config dependency, den lastes ned fra package registry uansett. Selv <a href=\"http://vg.no\">vg.no</a> fungerer, også etter at jeg sletter package-cache</p>",
        "id": 259229213,
        "sender_full_name": "Eirik Myklebost",
        "timestamp": 1635336885
    },
    {
        "content": "<p>Å få til en publisering (resolvable) på <a href=\"http://hl7.no\">hl7.no</a> burde være et mål, men kanskje long shot akkurat nå. En mer like \"offisiell\" måte hadde vært å brukt <a href=\"http://hl7.org\">hl7.org</a>, eksempelvis <a href=\"http://hl7.org/fhir/no/no-basis/\">http://hl7.org/fhir/no/no-basis/</a> etc., med <a href=\"http://build.hl7.org\">build.hl7.org</a> for versjoner - jeg tror det er lettere med IG Publisher-basert pipeline og ikke Simplifier.</p>",
        "id": 259358683,
        "sender_full_name": "Espen Stranger Seland",
        "timestamp": 1635411581
    }
]