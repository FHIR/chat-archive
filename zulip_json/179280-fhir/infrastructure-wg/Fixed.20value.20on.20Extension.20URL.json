[
    {
        "content": "<p>When an extension is added to a profile, the url for that extension becomes a fixed value, so canonical versioning in extension urls is not allowed.<br>\nThe only thing we were able to find about this in the spec is that the URL of the extension (<a href=\"https://www.hl7.org/fhir/extensibility-definitions.html#Extension.url\">https://www.hl7.org/fhir/extensibility-definitions.html#Extension.url</a>) is of type uri and not of type canonical. So | has no special meaning.</p>\n<p>When the derived profile states:<br>\n        &lt;element id=\"Patient.extension:birthPlace\"&gt;<br>\n            &lt;path value=\"Patient.extension\" /&gt;<br>\n            &lt;sliceName value=\"birthPlace\" /&gt;<br>\n            &lt;min value=\"1\" /&gt;<br>\n            &lt;type&gt;<br>\n                &lt;code value=\"Extension\" /&gt;<br>\n                &lt;profile value=\"<a href=\"http://hl7.org/fhir/StructureDefinition/patient-birthPlace\">http://hl7.org/fhir/StructureDefinition/patient-birthPlace</a>\" /&gt;<br>\n            &lt;/type&gt;<br>\n        &lt;/element&gt;</p>\n<p>An instance can't say that it wants to use a specific version of that extension like this:<br>\n &lt;extension url=\"<a href=\"http://hl7.org/fhir/StructureDefinition/patient-birthPlace|4.0.1\">http://hl7.org/fhir/StructureDefinition/patient-birthPlace|4.0.1</a>\"&gt;<br>\n        &lt;valueAddress&gt;<br>\n            &lt;text value=\"MakeUpStreet 845\" /&gt;<br>\n        &lt;/valueAddress&gt;</p>\n<p>The instance literally refers to the extension with the set uri, so the extension uri with |4.0.1 added is not valid. </p>\n<p>Can a case be made that the spec can say something like: \"Fixed\" values for canonicals could be treated as \"somewhat fixed\"?</p>",
        "id": 208804507,
        "sender_full_name": "Matthijs van der Wielen",
        "timestamp": 1599042768
    },
    {
        "content": "<p>This is deliberately different; the meaning of the extension must be established by a version-less reference to the extension. If the extension changes so that this is not enough, it's time for a different extension.</p>",
        "id": 208804930,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1599043069
    },
    {
        "content": "<p>but you can version a reference to an extension in the profile when you reference it, as you you show. So for validation purposes, you be specific about which versions.</p>",
        "id": 208805017,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1599043125
    },
    {
        "content": "<p>Thank you <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> ,<br>\nWould this mean that the validator would need to infer the correct version from the profile?</p>",
        "id": 208820955,
        "sender_full_name": "Matthijs van der Wielen",
        "timestamp": 1599052383
    },
    {
        "content": "<p>it will when validating, yes</p>",
        "id": 208821029,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1599052414
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"259036\">@Matthijs van der Wielen</span> Thank you for checking this</p>",
        "id": 208921575,
        "sender_full_name": "Maximilian Reith",
        "timestamp": 1599109770
    }
]