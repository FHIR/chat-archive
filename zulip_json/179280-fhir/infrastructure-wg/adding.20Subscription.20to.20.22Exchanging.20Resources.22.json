[
    {
        "content": "<p>in this section on the doco page:</p>\n<p><a href=\"/user_uploads/10155/Zktw0bDxeuH3dPHTbzG9t15L/Screen-Shot-2020-02-05-at-12.37.15-pm.png\" target=\"_blank\" title=\"Screen-Shot-2020-02-05-at-12.37.15-pm.png\">Screen-Shot-2020-02-05-at-12.37.15-pm.png</a> </p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/Zktw0bDxeuH3dPHTbzG9t15L/Screen-Shot-2020-02-05-at-12.37.15-pm.png\" target=\"_blank\" title=\"Screen-Shot-2020-02-05-at-12.37.15-pm.png\"><img src=\"/user_uploads/10155/Zktw0bDxeuH3dPHTbzG9t15L/Screen-Shot-2020-02-05-at-12.37.15-pm.png\"></a></div><p>In INM today we talked about adding  a section on Subscriptions/FHIRCast and comparing and contrasting  between messaging and when to use which for each use case/when. </p>\n<p>Would like more thoughts before making a tracker?</p>",
        "id": 187418655,
        "sender_full_name": "Eric Haas",
        "timestamp": 1580867319
    },
    {
        "content": "<p>this would help implementers to decide early what to do and possibly make rational choices</p>",
        "id": 187418681,
        "sender_full_name": "Eric Haas",
        "timestamp": 1580867385
    },
    {
        "content": "<p>Sounds like a good idea to me.</p>",
        "id": 187418909,
        "sender_full_name": "Michael Donnelly",
        "timestamp": 1580867663
    },
    {
        "content": "<p>-deleted, Zulip glitch I assume-</p>",
        "id": 187424351,
        "sender_full_name": "Ward Weistra",
        "timestamp": 1580876545
    },
    {
        "content": "<p>I'm for it, I do have some text around Subscription/FHIRCast in the <a href=\"http://build.fhir.org/branches/argonaut-subscription/subscription.html#relationtofhircast\" target=\"_blank\" title=\"http://build.fhir.org/branches/argonaut-subscription/subscription.html#relationtofhircast\">draft spec</a>, but haven't received a similar request for messaging yet (unless I count this thread :-).</p>",
        "id": 187482155,
        "sender_full_name": "Gino Canessa",
        "timestamp": 1580928320
    },
    {
        "content": "<p>Does it belong there, or on the super page: <a href=\"/user_uploads/10155/E7cca2gw6Pcfi4xy8MCgYAVj/pasted_image.png\" target=\"_blank\" title=\"pasted_image.png\">pasted image</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/E7cca2gw6Pcfi4xy8MCgYAVj/pasted_image.png\" target=\"_blank\" title=\"pasted image\"><img src=\"/user_uploads/10155/E7cca2gw6Pcfi4xy8MCgYAVj/pasted_image.png\"></a></div>",
        "id": 187601726,
        "sender_full_name": "Anthony(Tony) Julian",
        "timestamp": 1581033722
    },
    {
        "content": "<p>I will look at the text, and see if I can morph into the requested area.</p>",
        "id": 187928198,
        "sender_full_name": "Anthony(Tony) Julian",
        "timestamp": 1581438868
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"222054\">@Gino Canessa</span> - tp which specific section of the draft spec are you referring?</p>",
        "id": 187928803,
        "sender_full_name": "Anthony(Tony) Julian",
        "timestamp": 1581439262
    },
    {
        "content": "<p>The link I've posted above goes to the section \"Relation to FHIRCast\", which is as much content as I have so far.  Happy to add more, but I don't have the knowledge of the other areas (e.g., FHIRCast and Messaging)</p>",
        "id": 187928982,
        "sender_full_name": "Gino Canessa",
        "timestamp": 1581439396
    },
    {
        "content": "<p>The page <a href=\"http://hl7.org/fhir/2020Feb/exchange-module.html\" target=\"_blank\" title=\"http://hl7.org/fhir/2020Feb/exchange-module.html\">http://hl7.org/fhir/2020Feb/exchange-module.html</a> gives the high-level detail of Rest, Messages, Documents, Services, and Database/Persistent storage.   The ask is for information on when it is appropriate to use which, possibly with the pros/cons.  I suspect I will start something, and let folks throw darts at it.</p>",
        "id": 187947878,
        "sender_full_name": "Anthony(Tony) Julian",
        "timestamp": 1581450916
    },
    {
        "content": "<p>There's at least some guidance that should be relevant here: <a href=\"https://docs.google.com/document/d/1OHfFcJ-OZvC81OFOOFudmcG3Lg5Wrrwo4n0dA09z40o/edit\" target=\"_blank\" title=\"https://docs.google.com/document/d/1OHfFcJ-OZvC81OFOOFudmcG3Lg5Wrrwo4n0dA09z40o/edit\">https://docs.google.com/document/d/1OHfFcJ-OZvC81OFOOFudmcG3Lg5Wrrwo4n0dA09z40o/edit</a></p>",
        "id": 187962785,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1581459938
    },
    {
        "content": "<p>This really is a teaser to the bigger question what can FHIR messaging do that REST + subscriptions can't do.  We are getting hammered on this in the notifications IG and since that IG very closely and carefully follows the core specification, I think it is appropriate to answer some of these questions here.</p>",
        "id": 188040489,
        "sender_full_name": "Eric Haas",
        "timestamp": 1581532978
    },
    {
        "content": "<p>Subscription should be seen as supporting REST and also Messaging. It should not be bright-line separation into either / or.</p>",
        "id": 188146403,
        "sender_full_name": "John Moehrke",
        "timestamp": 1581625213
    },
    {
        "content": "<p>throwing Jenni under the bus... \" I think most of the arguments I hear of subscription over message is more: Messaging feels like a way we \"ported\" V2 style communication into the FHIR world - in which case we aren't gaining much. We already have V2 capabilities that can be used if you want messaging style interaction :) Subscriptions is better for more web/restful common patterns that FHIR has been very successful with.\"  Which begs the question \"whither FHIR messaging?..\" and I don't see a suitable non hand wavy answer.</p>",
        "id": 188150152,
        "sender_full_name": "Eric Haas",
        "timestamp": 1581627585
    },
    {
        "content": "<p>yet</p>",
        "id": 188150231,
        "sender_full_name": "Eric Haas",
        "timestamp": 1581627607
    },
    {
        "content": "<p>the web world is full of examples of push messaging... just because HL7 has history with messaging that has a sour taste because of v2, should not be used as an excuse to denigrate the concept of messaging.</p>",
        "id": 188151634,
        "sender_full_name": "John Moehrke",
        "timestamp": 1581628225
    },
    {
        "content": "<p>Messaging makes sense when you need routing and when query/polling isn't reasonable due to architectural or business/regulatory reasons.  (In some cases, being pushed data isn't an issue, but going looking for data and pulling it isn't permitted/is frowned upon/incurs much greater administrative effort)</p>",
        "id": 188156592,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1581631005
    },
    {
        "content": "<p>REST tends to scale much better than messaging because messaging is purpose-specific while REST is generally purpose-agnostic.</p>",
        "id": 188156645,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1581631039
    },
    {
        "content": "<p>I'm finding this dsicussion confusing because it seems to me that it conflates to different things</p>",
        "id": 188156695,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1581631074
    },
    {
        "content": "<ul>\n<li>how to decide what gets sent</li>\n<li>how to send what is being sent</li>\n</ul>",
        "id": 188156773,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1581631111
    },
    {
        "content": "<p>traditional messaging has answers to both these.</p>",
        "id": 188156778,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1581631121
    },
    {
        "content": "<p>subscription is about the first</p>",
        "id": 188156792,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1581631130
    },
    {
        "content": "<p>messaging is about the second</p>",
        "id": 188156800,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1581631135
    },
    {
        "content": "<p>no?</p>",
        "id": 188156803,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1581631137
    },
    {
        "content": "<p>Subscription is about 'when' and perhaps somewhat about 'what'.  Messaging allows an elaborate definition of 'what'.  And subscription covers only one of the use-cases for messaging.</p>",
        "id": 188156982,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1581631259
    },
    {
        "content": "<p>so what's at issue here?</p>",
        "id": 188157368,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1581631514
    },
    {
        "content": "<p>Why would messaging get used (as opposed to non-messaging subscription notifications + query for additional data if needed)</p>",
        "id": 188162422,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1581635411
    },
    {
        "content": "<blockquote>\n<p>why would messaging get used</p>\n</blockquote>\n<p>for which bit?</p>",
        "id": 188162486,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1581635466
    },
    {
        "content": "<p>I think of Subscriptions as more than the how.   It has the possibility of defining the what so in my mind there is lots of overlap on the what.</p>",
        "id": 188162530,
        "sender_full_name": "Eric Haas",
        "timestamp": 1581635496
    },
    {
        "content": "<p>I think Lloyd refers to 'what is sent' which is not that specified in Subscriptions. Though I think it's not that well specified in Messaging either. Though it appears to me that a subscription that results in a message that has a message definition at least appears to give you the sense of control over content. Though I suspect it's largely a fantasy in that case</p>",
        "id": 188162654,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1581635586
    },
    {
        "content": "<p>Lloyd McKenzie1:56 PM</p>\n<blockquote>\n<p>... and when query/polling isn't reasonable due to architectural or business/regulatory reasons. (In some cases,</p>\n</blockquote>\n<p>which means \"when you are stuck messaging... not really a choice.</p>",
        "id": 188162656,
        "sender_full_name": "Eric Haas",
        "timestamp": 1581635591
    },
    {
        "content": "<p>We have discussed defining the content using graphs in the topic too.  fantasy now maybe...</p>",
        "id": 188162765,
        "sender_full_name": "Eric Haas",
        "timestamp": 1581635663
    },
    {
        "content": "<p>I don't understand routing.  why couldn't a subscription notification be routed?</p>",
        "id": 188162820,
        "sender_full_name": "Eric Haas",
        "timestamp": 1581635736
    },
    {
        "content": "<p>part of the message header is the things you need to make routing manageable. You can always route any push message (eg http proxies) but typically people mean interface engines, and message header includes things like intended destination endpoint and person that make this much more manageable</p>",
        "id": 188163139,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1581635958
    },
    {
        "content": "<p>Actually, interface engines make it possible not to care what the intended destination point is - the rules in the engine determine where the message goes (including multiple destinations). <br>\nI general, I believe there is a need to start describing in more detail the different uses of messaging. Some thoughts in no particular order:</p>\n<ul>\n<li>There isn't a hard distinction between  subscriptions and messaging, there is a spectrum. </li>\n<li>I think one of the issues with FHIR messaging is that it cannot fuel the \"app economy\" (if you sense a hint of sarcasm, you are not necessarily wrong).</li>\n<li>As far as I understand, currently the only safe assumption to make, when you receive a message, is that the resources within are ephemeral, and they should be thrown away. This, I believe, causes an architectural friction between the REST-based parts, and  FHIR messaging.</li>\n<li>If we take the Da Vinci Alerts IG as an example, there are two ways to look at the purpose of a notification. <ul>\n<li>One is that the event described in the notification is recorded in the receiving system, and that is as far as it goes. If that is the case, then indeed, why not use an HL7 V2 ADT message, send it over HTTPS, and be done with it? I believe it is trivial for most existing engines to add an additional destination for hospital admits that they already manage anyway. If the recipient needs the data in FHIR format, the V2-to-FHIR project will likely lead to several transformation tools to be employed for this purpose.</li>\n<li>The other purpose of a notification is to be the starting point of additional data exchange, e.g. queries from the recipient of the notification to the sender of the notification  for additional information. If that's the case, FHIR messaging for the notification part doesn't give you what you want, because there is no guarantee that the information in the message is queryable. If the IG adds the stipulation that the resources in the message need to be accessible via REST by the recipient, only then you can be certain that the subsequent steps of the data exchange can occur. And if you go that far, then why go through the trouble of messaging, when subscription will work and scale better?</li>\n</ul>\n</li>\n</ul>\n<p>Maybe we need to use some of the workflow calls on this...</p>",
        "id": 188176293,
        "sender_full_name": "Vassil Peytchev",
        "timestamp": 1581652788
    },
    {
        "content": "<blockquote>\n<p>interface engines make it possible not to care what the intended destination point is - the rules in the engine determine where the message goes (including multiple destinations)</p>\n</blockquote>\n<p>This is only true for some uses of messaging. For others, you need the extra information so the interface engine can decide.</p>",
        "id": 188176576,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1581653177
    },
    {
        "content": "<blockquote>\n<p>the only safe assumption to make, when you receive a message, is that the resources within are ephemeral, and they should be thrown away.</p>\n</blockquote>\n<p>Unless  there is additional documentation that explains why you can</p>",
        "id": 188176585,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1581653198
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191316\">Grahame Grieve</span> <a href=\"#narrow/stream/179280-fhir.2Finfrastructure-wg/topic/adding.20Subscription.20to.20.22Exchanging.20Resources.22/near/188162654\" title=\"#narrow/stream/179280-fhir.2Finfrastructure-wg/topic/adding.20Subscription.20to.20.22Exchanging.20Resources.22/near/188162654\">said</a>:</p>\n<blockquote>\n<p>I think Lloyd refers to 'what is sent' which is not that specified in Subscriptions. Though I think it's not that well specified in Messaging either. Though it appears to me that a subscription that results in a message that has a message definition at least appears to give you the sense of control over content. Though I suspect it's largely a fantasy in that case</p>\n</blockquote>\n<p>A bit late to this party, but Subscriptions does define what is sent (e.g., MIME type, empty/id/resource, etc.).  Due to feedback, the current version has  been limited to a single resource, but it has been discussed to allow graphs, etc. (Primary concerns are around security - trying to evaluate a graph without a logged-in user)</p>",
        "id": 188231272,
        "sender_full_name": "Gino Canessa",
        "timestamp": 1581704326
    },
    {
        "content": "<p>I think of Subscriptions as:</p>\n<ul>\n<li>definition of topics</li>\n<li>definition of filters</li>\n<li>definition of channel</li>\n<li>client ability to request notifications on a topic, with filters</li>\n<li>notification being sent across channel</li>\n<li>ability to figure out something is wrong</li>\n</ul>\n<p>I'm not as well-informed on messaging, but so far I've treated it as a channel available for use.  Perhaps someone else can jump in with why that is or isn't appropriate.</p>",
        "id": 188231668,
        "sender_full_name": "Gino Canessa",
        "timestamp": 1581704582
    },
    {
        "content": "<p>why couldn't the horribly named SubStatus serve the same function with re routing as MessageHeader then Subscription could use the same routing mechanism?</p>",
        "id": 188258883,
        "sender_full_name": "Eric Haas",
        "timestamp": 1581724572
    },
    {
        "content": "<p>So far we have use FHIR Messaging when you have no choice or for V2-&gt;FHIR.... ( partly being provocative but also need to point out that not all use cases are based on rationale analysis so these are still legit)</p>",
        "id": 188259192,
        "sender_full_name": "Eric Haas",
        "timestamp": 1581724848
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191401\">Eric Haas</span> <a href=\"#narrow/stream/179280-fhir.2Finfrastructure-wg/topic/adding.20Subscription.20to.20.22Exchanging.20Resources.22/near/188258883\" title=\"#narrow/stream/179280-fhir.2Finfrastructure-wg/topic/adding.20Subscription.20to.20.22Exchanging.20Resources.22/near/188258883\">said</a>:</p>\n<blockquote>\n<p>why couldn't the horribly named SubStatus serve the same function with re routing as MessageHeader then Subscription could use the same routing mechanism?</p>\n</blockquote>\n<p>Theoretically it could, since I haven't finished drafting it yet.  However, that was not the purpose of the resource, so it would need to be discussed.</p>\n<p>I will note that the name poll still has <code>SubscriptionStatus</code> as the  leading name  though.</p>",
        "id": 188260817,
        "sender_full_name": "Gino Canessa",
        "timestamp": 1581726490
    },
    {
        "content": "<p>the crowd is not always wise :-)</p>",
        "id": 188262583,
        "sender_full_name": "Eric Haas",
        "timestamp": 1581728753
    },
    {
        "content": "<blockquote>\n<p>So far we have use FHIR Messaging when you have no choice or for V2-&gt;FHIR.... ( partly being provocative but also need to point out that not all use cases are based on rationale analysis so these are still legit)</p>\n</blockquote>\n<p>I think there is some variety behind \"no choice\" that is worth investigating and providing at least some guidance for IG authors.</p>\n<p>On a related note, I am somewhat surprised that the MessageHeader resource is at FMM 4. It's the resource  which is at the core of the whole messaging paradigm, and I feel like we are just now getting into that area.</p>",
        "id": 188263461,
        "sender_full_name": "Vassil Peytchev",
        "timestamp": 1581730203
    },
    {
        "content": "<blockquote>\n<p>we are just now getting into that area.</p>\n</blockquote>\n<p>In the US that is; other parties have more extensive experience. But I didn't realise it was at 4. 3 feels more appropriate</p>",
        "id": 188320257,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1581847388
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"222054\">@Gino Canessa</span> have we had any discussion about using MessageHeader for what the new resource is proposed to do?</p>",
        "id": 188320266,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1581847441
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span>, not yet.  So far, the sum total was:</p>\n<ul>\n<li>a new resource to act as the first resource in the notification bundles</li>\n<li>move all the 'status' extensions off bundle.meta into that resource</li>\n<li>the name of the resource, by vote: <code>SubscriptionStatus</code></li>\n</ul>\n<p>After a cursory glance at <code>MessageHeader</code> my initial concerns are:</p>\n<ul>\n<li>we've already received feedback that the notifications are 'heavy', this would add more weight</li>\n<li>notifications are may go to non-FHIR server recipients, is this too complex?</li>\n</ul>\n<p>On the other hand, I'm a big fan of only having one way of doing something.</p>",
        "id": 188331124,
        "sender_full_name": "Gino Canessa",
        "timestamp": 1581871409
    },
    {
        "content": "<p>I guess I was waiting to pounce after the first version of SS was penned.  I think the whole routing thing may be legit for sub status.  Second the idea of a focus is akin to the topic  On the other hand, making a hybrid MH + SS would have elements that would make no sense for one vs the other which might be more trouble than it is worth.   ( Maybe a baby step to merging would be to call it 'SubscriptionHeader' ;-) )</p>",
        "id": 188402627,
        "sender_full_name": "Eric Haas",
        "timestamp": 1581968652
    },
    {
        "content": "<p>Re: the original request for this topic (<a href=\"http://jira.hl7.org/browse/FHIR-25928\" title=\"http://jira.hl7.org/browse/FHIR-25928\">FHIR#25928</a>): most of the content that would fit in <a href=\"http://build.fhir.org/documentation.html\" title=\"http://build.fhir.org/documentation.html\">documentation</a> already exists on the <code>Subscription</code> page.  Should:</p>\n<ul>\n<li><code>documentation</code> have a header that points to <code>Subscription</code></li>\n<li>Move applicable content from <code>Subscription</code> to <code>documentation</code> (and point from <code>Subscription</code>)</li>\n<li>something else?</li>\n</ul>",
        "id": 195098821,
        "sender_full_name": "Gino Canessa",
        "timestamp": 1587665351
    },
    {
        "content": "<p>I think there needs to be a page similar to Messaging, and both <code>documentation</code> and the subscription-relevant resources will point to it. Since it can't be called <code>Subscription</code> (that's the name of the resource), maybe call it <code>SubscriptionFramework</code>?</p>",
        "id": 195114449,
        "sender_full_name": "Vassil Peytchev",
        "timestamp": 1587673309
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"192685\">@Vassil Peytchev</span>  FHIR-I already approved <a href=\"http://jira.hl7.org/browse/FHIR-25928\" title=\"http://jira.hl7.org/browse/FHIR-25928\">FHIR#25928</a> which addresses this.</p>",
        "id": 195120102,
        "sender_full_name": "Eric Haas",
        "timestamp": 1587676222
    },
    {
        "content": "<p>I am having a hard time figuring out what exactly was approved in  <a href=\"http://jira.hl7.org/browse/FHIR-25928\" title=\"http://jira.hl7.org/browse/FHIR-25928\">FHIR#25928</a>. It just points to this Zulip topic. Is it any different from what I posted? Or is it just your way of telling me \"just get on with making these changes happen\" <span aria-label=\"grinning face with smiling eyes\" class=\"emoji emoji-1f601\" role=\"img\" title=\"grinning face with smiling eyes\">:grinning_face_with_smiling_eyes:</span></p>",
        "id": 195120916,
        "sender_full_name": "Vassil Peytchev",
        "timestamp": 1587676758
    },
    {
        "content": "<p>Yes, that is the Issue I was working through at the time (I'm reviewing every issue with the word 'subscription' in it right now).  There's approval for adding \"something\" to the \"Exchanging Resources\" section - I posted the question while trying to figure out what that \"something\" should look like (the Jira page is decidedly thin on details).</p>\n<p>Since there was only a resource page, it has both the general/conceptual and the specific/concrete details together.  Splitting them will be somewhat non-trivial (separation of concerns, repeated info, etc.) and I wanted to make sure I was on the right track before starting.</p>\n<p>I won't start that piece until tomorrow, so if there are other opinions I'd like to hear them.  But I feel good in that Vassil's thoughts align with mine, so I'm happy to take a stab at it as is.</p>",
        "id": 195123080,
        "sender_full_name": "Gino Canessa",
        "timestamp": 1587678183
    },
    {
        "content": "<p>FHIR-I is grossly behind at applying approved CR, and often the CR doesn't indicate what will be changed. This is very concerning governance problem.</p>",
        "id": 195195036,
        "sender_full_name": "John Moehrke",
        "timestamp": 1587738333
    },
    {
        "content": "<p>Volunteers to start applying stuff?</p>",
        "id": 195198469,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1587739673
    },
    {
        "content": "<p>note, that I was willing to apply some... but  I looked at the jira ticket and can't tell what I should do. As you can see above in this thread.</p>",
        "id": 195208562,
        "sender_full_name": "John Moehrke",
        "timestamp": 1587743843
    },
    {
        "content": "<p>I think if the ticket isn't clear, it makes sense to ask rather than doing nothing.</p>\n<p>When tackling issues, I typically check in on Zulip before starting anyway, then ask for review after a cut is done.</p>",
        "id": 195212015,
        "sender_full_name": "Gino Canessa",
        "timestamp": 1587745470
    },
    {
        "content": "<p>Also, feel free to cherry-pick and work on the ones where the change is straight-forward/clear.  Every little bit helps...</p>",
        "id": 195217914,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1587748201
    }
]