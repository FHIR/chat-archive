[
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"275500\">@James Berry</span> would you mind documenting the OpenVidu setup?</p>",
        "id": 192347639,
        "sender_full_name": "Vadim Peretokin",
        "timestamp": 1585633889
    },
    {
        "content": "<p>Actually I am in the process of turning it into software using Pulumi - but yes I will document it as well</p>",
        "id": 192347791,
        "sender_full_name": "James Berry",
        "timestamp": 1585634140
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"275500\">@James Berry</span> let me know if you need any assistance on this..<br>\nbwn..I would love to see the Pulumi config.. <span aria-label=\"slight smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"slight smile\">:slight_smile:</span></p>",
        "id": 192453298,
        "sender_full_name": "Shovan Roy",
        "timestamp": 1585690739
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> I need to create access keys for programmatic access to AWS but don't have the following permission<br>\n'''User: arn:aws:iam::515384486676:user/James.Berry is not authorized to perform: iam:ListAccessKeys on resource: user James.Berry'''<br>\n'''User: arn:aws:iam::515384486676:user/James.Berry is not authorized to perform: iam:CreateAccessKey on resource: user James.Berry'''<br>\n'''User: arn:aws:iam::515384486676:user/James.Berry is not authorized to perform: iam:GetUser on resource: user James.Berry'''<br>\nPlease add permissions <a href=\"http://docs.aws.amazon.com/console/iam/about_permissions\" title=\"http://docs.aws.amazon.com/console/iam/about_permissions\">http://docs.aws.amazon.com/console/iam/about_permissions</a></p>",
        "id": 192469394,
        "sender_full_name": "James Berry",
        "timestamp": 1585699985
    },
    {
        "content": "<p>Hi <span class=\"user-mention\" data-user-id=\"193760\">@Shovan Roy</span> so what I am going to do first is programmatic creation of single OpenVidu server in parallel to the one that is being used, which will effectively document the process. Then I will look at how to autoscale it.</p>",
        "id": 192469684,
        "sender_full_name": "James Berry",
        "timestamp": 1585700230
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"275500\">@James Berry</span> try again</p>",
        "id": 192470767,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1585701206
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> nope, still have same lack of permissions, signed out and in and tried again twice, no change</p>",
        "id": 192471162,
        "sender_full_name": "James Berry",
        "timestamp": 1585701497
    },
    {
        "content": "<p>do you know what permissions I actually need to add ?</p>",
        "id": 192472113,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1585702272
    },
    {
        "content": "<p><a href=\"https://docs.aws.amazon.com/IAM/latest/UserGuide/tutorial_users-self-manage-mfa-and-creds.html\" title=\"https://docs.aws.amazon.com/IAM/latest/UserGuide/tutorial_users-self-manage-mfa-and-creds.html\">https://docs.aws.amazon.com/IAM/latest/UserGuide/tutorial_users-self-manage-mfa-and-creds.html</a> this would give me full access to my credentials on the proviso that I have MFA enabled</p>",
        "id": 192472354,
        "sender_full_name": "James Berry",
        "timestamp": 1585702517
    },
    {
        "content": "<p>Seeing as we are already using C# for the desktop app I am using it for the Pulumi deployment of AWS infrastructure. It's currently in preview but should go GA this month. Other choices are Node.js (TypeScript or JavaScript), Python, or Go (also in preview). Reason I suggest C# is to minimise the languages in use. Alternatively, we could go with JS as it is in use for the webapp however I think this is a weaker reason. What does everyone think?</p>",
        "id": 192481762,
        "sender_full_name": "James Berry",
        "timestamp": 1585714546
    },
    {
        "content": "<p>C# is fine, and we're not limited by desktop deployments here so we can use the modern .net core</p>",
        "id": 192481924,
        "sender_full_name": "Vadim Peretokin",
        "timestamp": 1585714703
    },
    {
        "content": "<p>That's my 2c</p>",
        "id": 192481929,
        "sender_full_name": "Vadim Peretokin",
        "timestamp": 1585714713
    },
    {
        "content": "<p>Yes it is .NET Core 3.1 atm</p>",
        "id": 192481937,
        "sender_full_name": "James Berry",
        "timestamp": 1585714733
    },
    {
        "content": "<p>Also it will have two GitHub Actions workflows</p>",
        "id": 192481964,
        "sender_full_name": "James Berry",
        "timestamp": 1585714761
    },
    {
        "content": "<p>What would the workflows and the code do?</p>",
        "id": 192482027,
        "sender_full_name": "Vadim Peretokin",
        "timestamp": 1585714826
    },
    {
        "content": "<p><a href=\"https://www.pulumi.com/docs/get-started/aws\" title=\"https://www.pulumi.com/docs/get-started/aws\">https://www.pulumi.com/docs/get-started/aws</a><br>\n<a href=\"https://www.pulumi.com/docs/guides/continuous-delivery/github-actions/\" title=\"https://www.pulumi.com/docs/guides/continuous-delivery/github-actions/\">https://www.pulumi.com/docs/guides/continuous-delivery/github-actions/</a><br>\n<a href=\"https://www.pulumi.com/docs/guides/continuous-delivery/github-app/\" title=\"https://www.pulumi.com/docs/guides/continuous-delivery/github-app/\">https://www.pulumi.com/docs/guides/continuous-delivery/github-app/</a></p>",
        "id": 192482237,
        "sender_full_name": "James Berry",
        "timestamp": 1585715084
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191316\">Grahame Grieve</span> <a href=\"#narrow/stream/227888-clinic-arrivals/topic/OpenVidu.20setup/near/192472113\" title=\"#narrow/stream/227888-clinic-arrivals/topic/OpenVidu.20setup/near/192472113\">said</a>:</p>\n<blockquote>\n<p>do you know what permissions I actually need to add ?</p>\n</blockquote>\n<p>Or you can create access keys for me and send them <a href=\"https://docs.aws.amazon.com/cli/latest/userguide/cli-chap-configure.html#cli-quick-configuration\" title=\"https://docs.aws.amazon.com/cli/latest/userguide/cli-chap-configure.html#cli-quick-configuration\">https://docs.aws.amazon.com/cli/latest/userguide/cli-chap-configure.html#cli-quick-configuration</a> see the section To create access keys for an IAM user</p>",
        "id": 192482480,
        "sender_full_name": "James Berry",
        "timestamp": 1585715435
    },
    {
        "content": "<p>I've got the first cut of the video infrastructure in my fork at <a href=\"https://github.com/jamesianberry/ClinicArrivals\" title=\"https://github.com/jamesianberry/ClinicArrivals\">https://github.com/jamesianberry/ClinicArrivals</a><br>\nI am using my domain and AWS to test it out. It builds a video server OK, and letsencrypt works, but there is some timeout happening in the provisioning process which I still need to work out - also the outputs aren't being parsed properly. But it's a good first step. I don't want to submit a pull request yet because we need to set up AWS credentials and secrets. But have a look at the changes in the video directory and two more GitHub Actions workflows</p>",
        "id": 192518796,
        "sender_full_name": "James Berry",
        "timestamp": 1585743789
    },
    {
        "content": "<p>You can setup a draft pull request, what about that?</p>",
        "id": 192557021,
        "sender_full_name": "Vadim Peretokin",
        "timestamp": 1585759451
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> actually what you should do is create a new user for automation with a set of limited rights to provision EC2 and CloudFormation and generate access keys for it, then load those secrets into GitHub. That is what I have done in my AWS</p>",
        "id": 192608775,
        "sender_full_name": "James Berry",
        "timestamp": 1585787175
    },
    {
        "content": "<p>getting to it</p>",
        "id": 192609104,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1585787555
    },
    {
        "content": "<p>call the secrets in GitHub AWS_ACCESS_KEY_ID and AWS_SECRET_ACCESS_KEY</p>",
        "id": 192609302,
        "sender_full_name": "James Berry",
        "timestamp": 1585787820
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191363\">Vadim Peretokin</span> <a href=\"#narrow/stream/227888-clinic-arrivals/topic/OpenVidu.20setup/near/192557021\" title=\"#narrow/stream/227888-clinic-arrivals/topic/OpenVidu.20setup/near/192557021\">said</a>:</p>\n<blockquote>\n<p>You can setup a draft pull request, what about that?</p>\n</blockquote>\n<p>Happy to do that - submitted. <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> will also need to:</p>\n<ol>\n<li>sign up to <a href=\"http://app.pulumi.com\" title=\"http://app.pulumi.com\">app.pulumi.com</a></li>\n<li>create a Pulumi access token <a href=\"https://app.pulumi.com/account/tokens\" title=\"https://app.pulumi.com/account/tokens\">https://app.pulumi.com/account/tokens</a></li>\n<li>add PULUMI_ACCESS_TOKEN to GitHub secrets</li>\n<li>install Pulumi GitHub App <a href=\"https://github.com/apps/pulumi\" title=\"https://github.com/apps/pulumi\">https://github.com/apps/pulumi</a><br>\nOnce that and the AWS credentials are sorted, we can update the parameters and it will build new infrastructure - but we will continue to use the current server until we are happy it is working fine</li>\n</ol>",
        "id": 192622795,
        "sender_full_name": "James Berry",
        "timestamp": 1585805894
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"193760\">Shovan Roy</span> <a href=\"#narrow/stream/227888-clinic-arrivals/topic/OpenVidu.20setup/near/192453298\" title=\"#narrow/stream/227888-clinic-arrivals/topic/OpenVidu.20setup/near/192453298\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"275500\">James Berry</span> let me know if you need any assistance on this..<br>\nbwn..I would love to see the Pulumi config.. :)</p>\n</blockquote>\n<p>Hi Shovan, have a look at <a href=\"https://github.com/grahamegrieve/ClinicArrivals/pull/47/files\" title=\"https://github.com/grahamegrieve/ClinicArrivals/pull/47/files\">https://github.com/grahamegrieve/ClinicArrivals/pull/47/files</a></p>",
        "id": 192623361,
        "sender_full_name": "James Berry",
        "timestamp": 1585806622
    },
    {
        "content": "<p>Ah there is a separate dropdown button when submitting a pull request to explicitly mark it as draft: &lt;<a href=\"https://github.blog/2019-02-14-introducing-draft-pull-requests/\" title=\"https://github.blog/2019-02-14-introducing-draft-pull-requests/\">https://github.blog/2019-02-14-introducing-draft-pull-requests/</a>&gt;</p>\n<p>Unfortunately you can't re-set a real PR back to draft state</p>",
        "id": 192623852,
        "sender_full_name": "Vadim Peretokin",
        "timestamp": 1585807342
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191363\">Vadim Peretokin</span> <a href=\"#narrow/stream/227888-clinic-arrivals/topic/OpenVidu.20setup/near/192623852\" title=\"#narrow/stream/227888-clinic-arrivals/topic/OpenVidu.20setup/near/192623852\">said</a>:</p>\n<blockquote>\n<p>Ah there is a separate dropdown button when submitting a pull request to explicitly mark it as draft: &lt;<a href=\"https://github.blog/2019-02-14-introducing-draft-pull-requests/\" title=\"https://github.blog/2019-02-14-introducing-draft-pull-requests/\">https://github.blog/2019-02-14-introducing-draft-pull-requests/</a>&gt;</p>\n<p>Unfortunately you can't re-set a real PR back to draft state</p>\n</blockquote>\n<p>should I just close it? Actually, I don't think it is a real problem - it can just stay there until we think it's ready. I don't see it causing any problem even if merged because it build infrastructure in parallel - or nothing at all until the prerequisites are met. Meanwhile I can keep developed the code in my fork.</p>",
        "id": 192625253,
        "sender_full_name": "James Berry",
        "timestamp": 1585809444
    },
    {
        "content": "<p>It's no problem at all, keep it as it is. Just something for the future</p>",
        "id": 192628718,
        "sender_full_name": "Vadim Peretokin",
        "timestamp": 1585812296
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"275500\">@James Berry</span> maybe we should do a zoom call so you can walk me through this?</p>",
        "id": 192649448,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1585825407
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191316\">Grahame Grieve</span> <a href=\"#narrow/stream/227888-clinic-arrivals/topic/OpenVidu.20setup/near/192649448\" title=\"#narrow/stream/227888-clinic-arrivals/topic/OpenVidu.20setup/near/192649448\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"275500\">James Berry</span> maybe we should do a zoom call so you can walk me through this?</p>\n</blockquote>\n<p>Ready when you are - you'll have to invite me I think as I don't have an account but can join</p>",
        "id": 192732570,
        "sender_full_name": "James Berry",
        "timestamp": 1585864856
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191363\">Vadim Peretokin</span> <a href=\"#narrow/stream/227888-clinic-arrivals/topic/OpenVidu.20setup/near/192628718\" title=\"#narrow/stream/227888-clinic-arrivals/topic/OpenVidu.20setup/near/192628718\">said</a>:</p>\n<blockquote>\n<p>It's no problem at all, keep it as it is. Just something for the future</p>\n</blockquote>\n<p><a href=\"https://github.blog/changelog/2020-04-08-convert-pull-request-to-draft/\" title=\"https://github.blog/changelog/2020-04-08-convert-pull-request-to-draft/\">https://github.blog/changelog/2020-04-08-convert-pull-request-to-draft/</a></p>",
        "id": 193558633,
        "sender_full_name": "James Berry",
        "timestamp": 1586516641
    }
]