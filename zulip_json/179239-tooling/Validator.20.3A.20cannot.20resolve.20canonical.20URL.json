[
    {
        "content": "<p>I made a very simple profile (Patient) and I want to validate a ressource against it.<br>\nThe profile has this URL : <a href=\"https://opikanoba.org/fhir/structuresefinition/opik-test-patient\">https://opikanoba.org/fhir/structuresefinition/opik-test-patient</a><br>\nThe URL is OK, and the structure definition available</p>\n<p>And the sample json </p>\n<div class=\"codehilite\"><pre><span></span><code>{\n    &quot;resourceType&quot;: &quot;Patient&quot;,\n    &quot;meta&quot;: {\n    &quot;profile&quot;: [\n      &quot;https://opikanoba.org/fhir/structuredefinition/opik-test-patient&quot;\n      ]\n    },\n    &quot;name&quot;:  [\n        {\n            &quot;use&quot;: &quot;official&quot;,\n            &quot;family&quot;: &quot;MANDELBROT&quot;\n        },\n    ],\n    &quot;telecom&quot;:  [\n        {\n            &quot;system&quot;: &quot;phone&quot;,\n            &quot;value&quot;: &quot;(01) 5555 4444&quot;,\n            &quot;use&quot;: &quot;work&quot;\n        },\n    ],\n    &quot;gender&quot;: &quot;male&quot;,\n    &quot;birthDate&quot;: &quot;1924-11-20&quot;,\n    &quot;deceasedBoolean&quot;: true\n}\n</code></pre></div>\n<p>With the <code>validator_cli.jar</code>, the validation is not made, and the output displays :</p>\n<div class=\"codehilite\"><pre><span></span><code>  Information @ Patient.meta.profile[0] (line 6, col8) : Canonical URL &#39;https://opikanoba.org/fhir/structuredefinition/opik-test-patient&#39;\ndoes not resolve\n  Warning @ Patient.meta.profile[0] (line 1, col2) : Profile reference &#39;https://opikanoba.org/fhir/structuredefinition/opik-test-patient&#39;\nhas not been checked because it is unknown, and fetching it resulted in the error The URL &#39;https://opikanoba.org/fhir/structuredefinition/opik-test-patient&#39;\nis not known to the FHIR validator, and has not been provided as part of the setup / parameters\n</code></pre></div>\n<p>So I  set the <code>-profile</code> parameter, but:</p>\n<div class=\"codehilite\"><pre><span></span><code>java -jar validator_cli.jar test_patient.json -profile https://opikanoba.org/fhir/structuredefinition/opik-test-patient\nAn error occurs\n  Validate test_patient.jsonException in thread &quot;main&quot; java.lang.Error: Unable to resolve profile https://opikanoba.org/fhir/structuredefinition/opik-test-patient\n    at org.hl7.fhir.validation.ValidationEngine.asSdList(ValidationEngine.java:299)\n</code></pre></div>\n<p>What am I missing ?</p>",
        "id": 241683734,
        "sender_full_name": "Frédéric Laurent",
        "timestamp": 1622973344
    },
    {
        "content": "<p>Did you use the <code>-ig</code> parameter to point the validator to the directory containing the profile (StructureDefinition file)? Otherwise, the validator cannot find it. Conversely, if you declare the profile in <code>meta.profile</code> in the Patient resource, it should trigger validation against that profile in the validator, even without passing the <code>-profile</code> parameter.</p>",
        "id": 241684791,
        "sender_full_name": "Morten Ernebjerg",
        "timestamp": 1622975137
    },
    {
        "content": "<p>I didn't make an IG. I wanted to start with the validation against a simple profile. The validator don't get my StructureDefinition even if I declare it in <code>meta.profile</code> because it is unknown (output of the validator-cli). That's why I thought that I could explicitly set it with the <code>-profile</code> parameter.<br>\nBut both don't work.</p>",
        "id": 241710626,
        "sender_full_name": "Frédéric Laurent",
        "timestamp": 1623013227
    },
    {
        "content": "<p>you have to tell the validator where to find and load your profile - that's what the -ig parameter is for (it also loads any kind of profile etc you point it at). Once you do that, the validation should work</p>",
        "id": 241718347,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1623026265
    },
    {
        "content": "<p>OK, I made an IG description file to reference the profile, then by setting <code>-ig</code> and <code>-profile</code> parameters, the validation can be done. Thanks.</p>",
        "id": 241831961,
        "sender_full_name": "Frédéric Laurent",
        "timestamp": 1623095908
    },
    {
        "content": "<p>you don't need the IG description file</p>",
        "id": 241832007,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1623095941
    },
    {
        "content": "<p>ok right, only the directory structure with the local profile file, and it works. thanks</p>",
        "id": 241833450,
        "sender_full_name": "Frédéric Laurent",
        "timestamp": 1623096553
    }
]