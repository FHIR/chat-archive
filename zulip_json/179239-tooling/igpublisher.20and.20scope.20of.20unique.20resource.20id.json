[
    {
        "content": "<p>I want to create a CodeSystem and ValueSet with the same  id and name, though with different file names.<br>\nI believe that this is possible and appropriate.<br>\nThe FHIR IG Publisher Version 1.1.3 gives me an error about there being a duplicate resource.</p>\n<div class=\"codehilite\"><pre><span></span><code>Duplicate Resource in IG: ValueSet/sra-external-service-type\nException in thread &quot;main&quot; java.lang.Error: Unable to continue because duplicate input resources were identified\n        at org.hl7.fhir.igtools.publisher.Publisher.load(Publisher.java:3012)\n        at org.hl7.fhir.igtools.publisher.Publisher.createIg(Publisher.java:842)\n        at org.hl7.fhir.igtools.publisher.Publisher.execute(Publisher.java:708)\n        at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:7835)\n</code></pre></div>\n\n\n<p>Is this an IGPublisher bug? Is this expected behaviour?</p>",
        "id": 205080583,
        "sender_full_name": "Richard Townley-O'Neill",
        "timestamp": 1595823165
    },
    {
        "content": "<p><a href=\"/user_uploads/10155/X8MpyOgnKs17npf_-XRmDQN9/implementationguide-serviceregistrationassistant-2.xml\">implementationguide-serviceregistrationassistant-2.xml</a> <a href=\"/user_uploads/10155/iGF5Q_1rzHpIhdtQt51WBC-F/sra-external-service-type.xml\">sra-external-service-type.xml</a> <a href=\"/user_uploads/10155/8gcokgioa9dg6OJ7rsqzJATV/sra-external-service-type-codesystem.xml\">sra-external-service-type-codesystem.xml</a></p>",
        "id": 205080595,
        "sender_full_name": "Richard Townley-O'Neill",
        "timestamp": 1595823213
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span>  ?</p>",
        "id": 205080633,
        "sender_full_name": "Richard Townley-O'Neill",
        "timestamp": 1595823243
    },
    {
        "content": "<p>ValueSets and CodeSystems exist in the same conceptual namespace wrt URI uniqueness i.e., they are not allowed to share a URI</p>",
        "id": 205080635,
        "sender_full_name": "Michael Lawley",
        "timestamp": 1595823262
    },
    {
        "content": "<p>One URI contains CodeSystem and one ValueSet.<br>\nThey are not quite the same.</p>",
        "id": 205080643,
        "sender_full_name": "Richard Townley-O'Neill",
        "timestamp": 1595823310
    },
    {
        "content": "<p>It may also be that the URI for the default \"all codes\" implicit ValueSet is clashing?</p>",
        "id": 205080645,
        "sender_full_name": "Michael Lawley",
        "timestamp": 1595823325
    },
    {
        "content": "<p>i.e., the value of <code>CodeSystem.valueSet</code></p>",
        "id": 205080648,
        "sender_full_name": "Michael Lawley",
        "timestamp": 1595823346
    },
    {
        "content": "<p>Maybe.</p>",
        "id": 205080695,
        "sender_full_name": "Richard Townley-O'Neill",
        "timestamp": 1595823425
    },
    {
        "content": "<p>the check is for duplicates on type/id, not just id. That suggests that there's something more going on that you appreciate</p>",
        "id": 205080766,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1595823555
    },
    {
        "content": "<p>(deleted)</p>",
        "id": 205080865,
        "sender_full_name": "Richard Townley-O'Neill",
        "timestamp": 1595823736
    },
    {
        "content": "<p>(deleted)</p>",
        "id": 205080867,
        "sender_full_name": "Richard Townley-O'Neill",
        "timestamp": 1595823757
    },
    {
        "content": "<p>I get the same problem, with a different error message if I change nothing but the names of the files: <em>sra-external-service-type.xml</em> to * sra-external-service-type-valueset.xml* and <em>sra-external-service-type-codesystem.xml</em> to <em>sra-external-service-type.xml</em></p>\n<p>Now the reported duplicate resource is in CodeSystem/... not ValueSet/...</p>\n<div class=\"codehilite\"><pre><span></span><code>Duplicate Resource in IG: CodeSystem/sra-external-service-type\nException in thread &quot;main&quot; java.lang.Error: Unable to continue because duplicate input resources were identified\n        at org.hl7.fhir.igtools.publisher.Publisher.load(Publisher.java:3012)\n        at org.hl7.fhir.igtools.publisher.Publisher.createIg(Publisher.java:842)\n        at org.hl7.fhir.igtools.publisher.Publisher.execute(Publisher.java:708)\n        at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:7835)\n</code></pre></div>\n\n\n<p>Which suggests that it is not a clash with the name for an implicit valueset.</p>",
        "id": 205081283,
        "sender_full_name": "Richard Townley-O'Neill",
        "timestamp": 1595824710
    },
    {
        "content": "<p><a href=\"/user_uploads/10155/uzCQgt61wcIqWHhkCYiucHBD/sra-external-service-type.xml\">sra-external-service-type.xml</a> <a href=\"/user_uploads/10155/_e49iZYqM-K-QMMmkU-QcRgI/sra-external-service-type-valueset.xml\">sra-external-service-type-valueset.xml</a> <a href=\"/user_uploads/10155/zpPADU5Gk3bGO5_HWFvWLlDV/implementationguide-serviceregistrationassistant-2.xml\">implementationguide-serviceregistrationassistant-2.xml</a></p>",
        "id": 205081292,
        "sender_full_name": "Richard Townley-O'Neill",
        "timestamp": 1595824746
    },
    {
        "content": "<p>Any idea what might be going on?</p>",
        "id": 205081298,
        "sender_full_name": "Richard Townley-O'Neill",
        "timestamp": 1595824787
    },
    {
        "content": "<p>Is it a bad idea to give a codesystem and a valueset of all of its contents the URIs CodeSystem/a-name and ValueSet/a-name ?<br>\nI thought it was preferred.</p>",
        "id": 205081356,
        "sender_full_name": "Richard Townley-O'Neill",
        "timestamp": 1595824885
    },
    {
        "content": "<p>it's certainly common. I don't know about preferred. It suggests that you have some registration problem somewhere</p>",
        "id": 205081403,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1595824925
    },
    {
        "content": "<p>It is all in a local build using ig.json.</p>",
        "id": 205081415,
        "sender_full_name": "Richard Townley-O'Neill",
        "timestamp": 1595824969
    },
    {
        "content": "<p>There is not much to cause problems as the three posted resources are all that there is in the resources directory.</p>",
        "id": 205081488,
        "sender_full_name": "Richard Townley-O'Neill",
        "timestamp": 1595825109
    },
    {
        "content": "<p>Any suggestions as to where to look?</p>",
        "id": 205081497,
        "sender_full_name": "Richard Townley-O'Neill",
        "timestamp": 1595825145
    },
    {
        "content": "<p>looks ok. can you package up the whole thing so I don't have to spend time doing it?</p>",
        "id": 205081565,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1595825232
    },
    {
        "content": "<p>How do I package an IG that does not build?</p>",
        "id": 205081606,
        "sender_full_name": "Richard Townley-O'Neill",
        "timestamp": 1595825289
    },
    {
        "content": "<p>the problem here is the way that the publisher loads content. It's pretty resilient, but the resilience has a price. You can have more than one resource with the same id, but if you do, you cannot have a source file with just [id] as the name (sra-external-service-type in your case). you need to be explicit about the type for all files: codeystem-sra-external-service-type</p>",
        "id": 205083414,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1595828370
    },
    {
        "content": "<p>works a treat.<br>\nThanks.</p>",
        "id": 205084314,
        "sender_full_name": "Richard Townley-O'Neill",
        "timestamp": 1595829969
    },
    {
        "content": "<p><span aria-label=\"disappointed\" class=\"emoji emoji-1f61e\" role=\"img\" title=\"disappointed\">:disappointed:</span> This still has problems.<br>\nWhile it builds fine The ValueSet's links to the CodeSystem are wrong.<br>\nFor example the text</p>\n<div class=\"codehilite\"><pre><span></span><code>Include all codes defined in http://sra.digitalhealth.gov.au/fhir/CodeSystem/sra-external-service-category\n</code></pre></div>\n\n\n<p>has a '/' instead of a '-' and links to <br>\nfile:///C:/work/git/sra-fhir-release-2/output/CodeSystem/sra-external-service-category.html instead of <br>\nfile:///C:/work/git/sra-fhir-release-2/output/CodeSystem-sra-external-service-category.html</p>",
        "id": 205197531,
        "sender_full_name": "Richard Townley-O'Neill",
        "timestamp": 1595910989
    },
    {
        "content": "<p>that's in your set up - not to do with the ids</p>",
        "id": 205197770,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1595911426
    },
    {
        "content": "<p>Can you suggest where to start looking?</p>",
        "id": 205197953,
        "sender_full_name": "Richard Townley-O'Neill",
        "timestamp": 1595911735
    },
    {
        "content": "<p>what template are you using?</p>",
        "id": 205197958,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1595911751
    },
    {
        "content": "<p>I'm using pre-template ig.json</p>",
        "id": 205197966,
        "sender_full_name": "Richard Townley-O'Neill",
        "timestamp": 1595911784
    },
    {
        "content": "<p>I might have it: vs.html in the same directory as the ig.json</p>",
        "id": 205198084,
        "sender_full_name": "Richard Townley-O'Neill",
        "timestamp": 1595911979
    },
    {
        "content": "<p>then you need to specify the file output pattern</p>",
        "id": 205198717,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1595912887
    }
]