[
    {
        "content": "<p>So, a GitHub issue was posted on Synthea today, saying that the FHIR validator errors out on our synthetic data, because we're using deprecated codes.</p>\n<p><a href=\"https://github.com/synthetichealth/synthea/issues/902\">https://github.com/synthetichealth/synthea/issues/902</a></p>\n<div class=\"codehilite\"><pre><span></span><code>Error: HTTP 422 Unprocessable Entity: Unknown code {http://snomed.info/sct}698360004 for &#39;http://snomed.info/sct#698360004&#39;\n\n698360004 is deprecated the correct code is  http://snomed.info/sct#735985000\n</code></pre></div>\n<p>This has probably been discussed a lot previously, but is this the behavior we should expect from the validator? Part of me says \"yes, the codes are no longer valid\" and another part of me says \"we can't expect older data to be updated, possibly incorrectly, just because a code was deprecated. At one point it was valid.\"</p>\n<p>I suppose I could write a script to occasionally scan Synthea for deprecated codes and we can replace them, but that just sort of sweeps the issue under the table.</p>\n<p>Would the correct thing to do be to change my use of  the system from <code>http://snomed.info/sct</code> to <code>http://snomed.info/sct/[sctid]</code> or <code>http://snomed.info/sct/[sctid]/version/[YYYYMMDD]</code> as according to <a href=\"http://hl7.org/fhir/R4/snomedct.html#4.3.1.0.3\">http://hl7.org/fhir/R4/snomedct.html#4.3.1.0.3</a>?</p>\n<p>Which in practice would look like changing this:</p>\n<div class=\"codehilite\" data-code-language=\"JSON\"><pre><span></span><code><span class=\"p\">{</span>\n        <span class=\"nt\">\"coding\"</span><span class=\"p\">:</span> <span class=\"p\">[</span> <span class=\"p\">{</span>\n          <span class=\"nt\">\"system\"</span><span class=\"p\">:</span> <span class=\"s2\">\"http://snomed.info/sct\"</span><span class=\"p\">,</span>\n          <span class=\"nt\">\"code\"</span><span class=\"p\">:</span> <span class=\"s2\">\"698360004\"</span><span class=\"p\">,</span>\n          <span class=\"nt\">\"display\"</span><span class=\"p\">:</span> <span class=\"s2\">\"Diabetes self management plan\"</span>\n        <span class=\"p\">}</span> <span class=\"p\">],</span>\n        <span class=\"nt\">\"text\"</span><span class=\"p\">:</span> <span class=\"s2\">\"Diabetes self management plan\"</span>\n      <span class=\"p\">}</span>\n</code></pre></div>\n<p>to this:</p>\n<div class=\"codehilite\" data-code-language=\"JSON\"><pre><span></span><code><span class=\"p\">{</span>\n        <span class=\"nt\">\"coding\"</span><span class=\"p\">:</span> <span class=\"p\">[</span> <span class=\"p\">{</span>\n          <span class=\"nt\">\"system\"</span><span class=\"p\">:</span> <span class=\"s2\">\"http://snomed.info/sct/900000000000207008/version/20210131\"</span><span class=\"p\">,</span>\n          <span class=\"nt\">\"code\"</span><span class=\"p\">:</span> <span class=\"s2\">\"735985000\"</span><span class=\"p\">,</span>\n          <span class=\"nt\">\"display\"</span><span class=\"p\">:</span> <span class=\"s2\">\"Diabetes self management plan\"</span>\n        <span class=\"p\">}</span> <span class=\"p\">],</span>\n        <span class=\"nt\">\"text\"</span><span class=\"p\">:</span> <span class=\"s2\">\"Diabetes self management plan\"</span>\n      <span class=\"p\">}</span>\n</code></pre></div>\n<p>Would the FHIR Validator handle that correctly?</p>",
        "id": 243162844,
        "sender_full_name": "Jason Walonoski",
        "timestamp": 1624024034
    },
    {
        "content": "<p>you'd leave the system alone and introduce a  version. But where exactly is this error coming from? I don't recognise it</p>",
        "id": 243211994,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1624053470
    },
    {
        "content": "<p>Nor do I.</p>",
        "id": 243225661,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1624072717
    },
    {
        "content": "<p>I'm not sure where the error is coming from, the person who posted the issue just reported <code>the FHIR validator</code> -- I'll try to get more information.</p>",
        "id": 243376141,
        "sender_full_name": "Jason Walonoski",
        "timestamp": 1624279462
    },
    {
        "content": "<p>FWIW, the person who reported the bug said it was the HAPI FHIR Server (<a href=\"https://hapifhir.io/\">https://hapifhir.io/</a>), their own installation with MariaDB as backend database â€“ With FHIR validator activated.</p>",
        "id": 243387642,
        "sender_full_name": "Jason Walonoski",
        "timestamp": 1624284637
    }
]