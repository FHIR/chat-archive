[
    {
        "content": "<p>We started to use firely terminal in our IG pipelines to install needed packages. Doing this we found 3 issues:</p>\n<ul>\n<li>fhir install --file throws an error if the local package isn't known to the package servers:</li>\n</ul>\n<div class=\"codehilite\"><pre><span></span><code>fhir install Downloads/term_0.2.0.tgz --file                                                                                          ✔  4383  17:46:50\nAdded: molit.fhir.common-terminology 0.2.0.\nRestore could not be completed.\nPackage not found: molit.fhir.common-terminology 0.2.0\n</code></pre></div>",
        "id": 261470895,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1636966236
    },
    {
        "content": "<ul>\n<li>fhir bake creates snapshots with missing/wrong ids on elements (<span class=\"user-mention\" data-user-id=\"193430\">@Alexander Zautke</span> <span class=\"user-mention\" data-user-id=\"191469\">@Chris Moesel</span> <span class=\"user-mention\" data-user-id=\"260054\">@Yannick Börner</span> )</li>\n</ul>",
        "id": 261471036,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1636966323
    },
    {
        "content": "<p>see: <a href=\"#narrow/stream/215610-shorthand/topic/Bug.3A.20No.20element.20found.20at.20path\">https://chat.fhir.org/#narrow/stream/215610-shorthand/topic/Bug.3A.20No.20element.20found.20at.20path</a></p>",
        "id": 261471093,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1636966355
    },
    {
        "content": "<ul>\n<li>fhir install installs packages in: /root/.local/share/.fhir instead of /root/.fhir which then lets sushi &amp; IG publisher fail (can be fixed with a symlink, would be nice of firely terminal always would use the correct/same folder as sushi/IG publisher</li>\n</ul>",
        "id": 261471198,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1636966438
    },
    {
        "content": "<p>I vaguely remember we had a specific reason to use .local/share/, I think it had to do with permissions.</p>",
        "id": 261760059,
        "sender_full_name": "Martijn Harthoorn",
        "timestamp": 1637141181
    },
    {
        "content": "<p>And of course there are a lot of users that now have their cache in there, which I cannot just bust. But I'll check what we can do. Maybe make it configurable.</p>",
        "id": 261760127,
        "sender_full_name": "Martijn Harthoorn",
        "timestamp": 1637141242
    },
    {
        "content": "<p>Wouldn't the Sushi/IG publisher have the same permission problems then?</p>",
        "id": 261760286,
        "sender_full_name": "Ewout Kramer",
        "timestamp": 1637141340
    },
    {
        "content": "<p>Would it be possible to use the same directory across tools and let the tools create the symlink so both situations work?</p>",
        "id": 261760403,
        "sender_full_name": "Ewout Kramer",
        "timestamp": 1637141404
    },
    {
        "content": "<p>there is a spec, <span class=\"user-mention\" data-user-id=\"191335\">@Martijn Harthoorn</span> even wrote it. And that's root/.fhir</p>",
        "id": 261761969,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1637142417
    },
    {
        "content": "<p>I tried to check it out myself, but cannot find it. Where is it?</p>",
        "id": 261762771,
        "sender_full_name": "Ewout Kramer",
        "timestamp": 1637142935
    },
    {
        "content": "<p>I know about <a href=\"https://confluence.hl7.org/display/FHIR/FHIR+Package+Cache\">https://confluence.hl7.org/display/FHIR/FHIR+Package+Cache</a> and <a href=\"https://confluence.hl7.org/display/FHIR/NPM+Package+Specification\">https://confluence.hl7.org/display/FHIR/NPM+Package+Specification</a>, but cannot find that location...</p>",
        "id": 261762855,
        "sender_full_name": "Ewout Kramer",
        "timestamp": 1637142977
    },
    {
        "content": "<p><a href=\"https://confluence.hl7.org/display/FHIR/FHIR+Package+Cache\">https://confluence.hl7.org/display/FHIR/FHIR+Package+Cache</a><br>\nworks for me.</p>",
        "id": 261763834,
        "sender_full_name": "Martijn Harthoorn",
        "timestamp": 1637143457
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> , you're right. I can't remember why we changed in FT. I vaguely remember some Linux guy told me that I should not put it directly under ~/, but apparently I forgot to bring it up for discussion.</p>",
        "id": 261765910,
        "sender_full_name": "Martijn Harthoorn",
        "timestamp": 1637144655
    },
    {
        "content": "<p>well, it's kind of late to change it now - There's a lot of tooling out there following the spec</p>",
        "id": 261857306,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1637186713
    },
    {
        "content": "<p>afaik there is no difference in permissions between ~ and ~/.local<br>\n.local ist normally was brought up by GNOME and is for \"non-user-generated data\" but for program data. I think firely terminal just should use ~/.local - how it is stated in the FHIR spec.</p>",
        "id": 261912247,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1637233134
    },
    {
        "content": "<p>But the spec does not mention .local</p>",
        "id": 262675749,
        "sender_full_name": "Martijn Harthoorn",
        "timestamp": 1637827344
    },
    {
        "content": "<p>+1 for changing it to the folder mentioned in the spec, so \"/~/.fhir/packages\" (not .local!)</p>",
        "id": 262693779,
        "sender_full_name": "Alexander Zautke",
        "timestamp": 1637839184
    },
    {
        "content": "<p>In case someone needs to debug the issue and ends up here... the symlink can be created with \"ln -s ~/.local/share/.fhir ~/.fhir\".</p>",
        "id": 262693907,
        "sender_full_name": "Alexander Zautke",
        "timestamp": 1637839272
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191335\">Martijn Harthoorn</span> <a href=\"#narrow/stream/179239-tooling/topic/Firely.20Terminal.3A.20Issues.20install.20local.20package/near/262675749\">said</a>:</p>\n<blockquote>\n<p>But the spec does not mention .local</p>\n</blockquote>\n<p>my bad, sorry i meant ~/.fhir</p>",
        "id": 262705988,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1637847319
    },
    {
        "content": "<p>ok. So I think everyone agrees.<br>\nI have made a new release for Firely Terminal with that path for linux. (2.5.0-beta-2)</p>",
        "id": 262706100,
        "sender_full_name": "Martijn Harthoorn",
        "timestamp": 1637847387
    },
    {
        "content": "<p>(the local package issue is on our radar, but not fixed yet)</p>",
        "id": 262706136,
        "sender_full_name": "Martijn Harthoorn",
        "timestamp": 1637847416
    }
]