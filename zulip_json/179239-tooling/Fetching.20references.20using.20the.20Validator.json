[
    {
        "content": "<p>Hi,</p>\n<p>I'm trying to validate an instance of a profile that uses slicing by target profile, using the HL7 Validator. However, the Validator cannot resolve the referenced instance:</p>\n<div class=\"codehilite\"><pre><span></span><code>Error @ Encounter.participant[0] (line 16, col17) : Slicing cannot be evaluated: Problem evaluating slicing expression for element in profile http://nictiz.nl/fhir/StructureDefinition/nl-core-Encounter path Encounter.participant[0] (fhirPath = true and individual.resolve().conformsTo(&#39;http://nictiz.nl/fhir/StructureDefinition/nl-core-HealthProfessional-PractitionerRole&#39;)): The URL &#39;PractitionerRole/nl-core-HealthProfessional-PractitionerRole-01&#39; is not known to the FHIR validator, and has not been provided as part of the setup / parameters\n</code></pre></div>\n<p>So I'd like to provide the target instance as part of the setup / parameters, but unfortunately this section on the Confluence page is marked \"TODO\". I tried supplying the target as an additional instance to validate and tried to include it as an <code>-ig</code>, but the error persists. Could someone point me in the right direction?</p>",
        "id": 255584340,
        "sender_full_name": "Pieter Edelman",
        "timestamp": 1633012326
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span></p>",
        "id": 255612623,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1633022457
    },
    {
        "content": "<p>how do I reproduce this?</p>",
        "id": 255635999,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1633031089
    },
    {
        "content": "<p>The command I use is <code>java -jar /path/to/validator_cli.jar -version 4.0 -ig resources/ -recurse examples/nl-core-Encounter-01.xml</code></p>\n<p>The \"resources\" dir (<a href=\"/user_uploads/10155/99gGXV00G_aYxkIftCmxFySn/resources.zip\">resources.zip</a>)  contains a set of conformance resources, including the profile containing the slicing logic. The \"examples\" dir (<a href=\"/user_uploads/10155/KKGT6TYKVF8uIfk1FAXlXJiW/examples.zip\">examples.zip</a>) contains all examples, including the filed \"nl-core-Encounter-01.xml\" and \"nl-core-HealthProfessional-PractitionerRole-01.xml\", which both have the <code>.id</code>'s identical to the file names.</p>\n<p>Variants I tried:</p>\n<ul>\n<li><code>java -jar /path/to/validator_cli.jar -version 4.0 -ig resources/ -recurse examples/nl-core-Encounter-01.xml examples/nl-core-HealthProfessional-PractitionerRole-01.xml</code></li>\n<li><code>java -jar /path/to/validator_cli.jar -version 4.0 -ig resources/ -ig examples/ -recurse examples/nl-core-Encounter-01.xml</code></li>\n<li>From the examples dir <code>java -jar /path/to/validator_cli.jar -version 4.0 -ig /full/path/to/resources/ -recurse nl-core-Encounter-01.xml</code></li>\n</ul>",
        "id": 255697742,
        "sender_full_name": "Pieter Edelman",
        "timestamp": 1633070816
    },
    {
        "content": "<p>I don't know if references to files on disk even work for the Validator, but they work for the IG Publisher so I kinda assumed that it would work similarly.</p>",
        "id": 255697889,
        "sender_full_name": "Pieter Edelman",
        "timestamp": 1633070930
    },
    {
        "content": "<blockquote>\n<p>if references to files on disk even work for the Validator</p>\n</blockquote>\n<p>No, they don't. Which is why I wondered how you were doing it</p>",
        "id": 256008547,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1633325512
    },
    {
        "content": "<p>it's a todo, as you saw</p>",
        "id": 256008598,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1633325536
    },
    {
        "content": "<p>Ah ... I just thought the documentation was \"TODO\" ;)</p>",
        "id": 256039579,
        "sender_full_name": "Pieter Edelman",
        "timestamp": 1633345126
    },
    {
        "content": "<p>sadly no</p>",
        "id": 256040178,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1633345430
    },
    {
        "content": "<p>Also running into </p>\n<div class=\"codehilite\"><pre><span></span><code>-  error at Observation.hasMember[0] (38, 16):\n     Slicing cannot be evaluated: Problem evaluating slicing expression for element in profile &lt;cut&gt;/TNMStaging path Observation.hasMember[0] (fhirPath = true and (resolve() is Observation)): The URL &#39;Observation/ils-test-TumorStage&#39; is not known to the FHIR validator, and has not been provided as part of the setup / parameters\n</code></pre></div>\n<p>where we reference Resources on local disk/folder, adjacent to the being-validated Resource</p>\n<div class=\"codehilite\"><pre><span></span><code>    &lt;hasMember&gt;\n        &lt;reference value=&quot;Observation/ils-test-TumorStage&quot;/&gt;\n    &lt;/hasMember&gt;\n</code></pre></div>",
        "id": 265009153,
        "sender_full_name": "David Simons",
        "timestamp": 1639574772
    },
    {
        "content": "<p>There's a ticket for this feature request: <a href=\"https://github.com/hapifhir/org.hl7.fhir.core/issues/644\">https://github.com/hapifhir/org.hl7.fhir.core/issues/644</a></p>",
        "id": 265063828,
        "sender_full_name": "Pieter Edelman",
        "timestamp": 1639597264
    }
]