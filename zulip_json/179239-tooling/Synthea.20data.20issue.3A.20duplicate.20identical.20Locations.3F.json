[
    {
        "content": "<p>Rather than piling on the other <a href=\"#narrow/stream/179239-tooling/topic/Synthea\">Synthea</a> stream, I'm starting a new one for a separate data issue.</p>\n<p>First, some background.  I generated about 1,000 patients a while back to load them into a HAPI server for a connectathon scenario.  I selected a handful of patients from the 1,000 to load at first, and ran into some issues right away with duplicate, identical resources being created for each patient due to the way I was loading the data - there was no flaw in the Synthea data itself.</p>\n<p>I've resolved those duplicate identical resources issues by using conditional references and re-ordering the resources in the batch slightly to load all resources before they are referenced elsewhere.  This works fine.</p>\n<p>The latest problem appears to be in the Synthea data itself.  I've found several <code>Location</code> resources which are identical across patients, but who have different <code>id</code> values.  I have not found other resource types yet that follow this pattern - it appears to be an issue with Locations (although I haven't checked everything else).</p>\n<h3><code>abbie.location</code></h3>\n<div class=\"codehilite\" data-code-language=\"JSON\"><pre><span></span><code>    <span class=\"p\">{</span>\n      <span class=\"nt\">\"fullUrl\"</span><span class=\"p\">:</span> <span class=\"s2\">\"urn:uuid:5f0a03d6-92b8-6ec2-cdd2-893281c43776\"</span><span class=\"p\">,</span>\n      <span class=\"nt\">\"resource\"</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n        <span class=\"nt\">\"resourceType\"</span><span class=\"p\">:</span> <span class=\"s2\">\"Location\"</span><span class=\"p\">,</span>\n        <span class=\"nt\">\"id\"</span><span class=\"p\">:</span> <span class=\"s2\">\"5f0a03d6-92b8-6ec2-cdd2-893281c43776\"</span><span class=\"p\">,</span>\n        <span class=\"nt\">\"meta\"</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n          <span class=\"nt\">\"profile\"</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n            <span class=\"s2\">\"http://hl7.org/fhir/us/core/StructureDefinition/us-core-location\"</span>\n          <span class=\"p\">]</span>\n        <span class=\"p\">},</span>\n        <span class=\"nt\">\"status\"</span><span class=\"p\">:</span> <span class=\"s2\">\"active\"</span><span class=\"p\">,</span>\n        <span class=\"nt\">\"name\"</span><span class=\"p\">:</span> <span class=\"s2\">\"UNITYPOINT HEALTH - MERITER\"</span><span class=\"p\">,</span>\n        <span class=\"nt\">\"telecom\"</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n          <span class=\"p\">{</span>\n            <span class=\"nt\">\"system\"</span><span class=\"p\">:</span> <span class=\"s2\">\"phone\"</span><span class=\"p\">,</span>\n            <span class=\"nt\">\"value\"</span><span class=\"p\">:</span> <span class=\"s2\">\"6084176000\"</span>\n          <span class=\"p\">}</span>\n        <span class=\"p\">],</span>\n        <span class=\"nt\">\"address\"</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n          <span class=\"nt\">\"line\"</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n            <span class=\"s2\">\"202 S PARK ST\"</span>\n          <span class=\"p\">],</span>\n          <span class=\"nt\">\"city\"</span><span class=\"p\">:</span> <span class=\"s2\">\"MADISON\"</span><span class=\"p\">,</span>\n          <span class=\"nt\">\"state\"</span><span class=\"p\">:</span> <span class=\"s2\">\"WI\"</span><span class=\"p\">,</span>\n          <span class=\"nt\">\"postalCode\"</span><span class=\"p\">:</span> <span class=\"s2\">\"53715\"</span><span class=\"p\">,</span>\n          <span class=\"nt\">\"country\"</span><span class=\"p\">:</span> <span class=\"s2\">\"US\"</span>\n        <span class=\"p\">},</span>\n        <span class=\"nt\">\"position\"</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n          <span class=\"nt\">\"longitude\"</span><span class=\"p\">:</span> <span class=\"mf\">-89.430121</span><span class=\"p\">,</span>\n          <span class=\"nt\">\"latitude\"</span><span class=\"p\">:</span> <span class=\"mf\">43.087806</span>\n        <span class=\"p\">},</span>\n        <span class=\"nt\">\"managingOrganization\"</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n          <span class=\"nt\">\"reference\"</span><span class=\"p\">:</span> <span class=\"s2\">\"urn:uuid:e6c5d179-370a-3659-9ce6-3d09da3c3ad0\"</span><span class=\"p\">,</span>\n          <span class=\"nt\">\"display\"</span><span class=\"p\">:</span> <span class=\"s2\">\"UNITYPOINT HEALTH - MERITER\"</span>\n        <span class=\"p\">}</span>\n      <span class=\"p\">},</span>\n      <span class=\"nt\">\"request\"</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n        <span class=\"nt\">\"method\"</span><span class=\"p\">:</span> <span class=\"s2\">\"POST\"</span><span class=\"p\">,</span>\n        <span class=\"nt\">\"url\"</span><span class=\"p\">:</span> <span class=\"s2\">\"Location\"</span>\n      <span class=\"p\">}</span>\n    <span class=\"p\">}</span>\n</code></pre></div>\n\n<h3><code>adolfo.location</code></h3>\n<div class=\"codehilite\" data-code-language=\"JSON\"><pre><span></span><code>    <span class=\"p\">{</span>\n      <span class=\"nt\">\"fullUrl\"</span><span class=\"p\">:</span> <span class=\"s2\">\"urn:uuid:47ba9ed9-92d1-4727-7089-ced1836ea2a9\"</span><span class=\"p\">,</span>\n      <span class=\"nt\">\"resource\"</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n        <span class=\"nt\">\"resourceType\"</span><span class=\"p\">:</span> <span class=\"s2\">\"Location\"</span><span class=\"p\">,</span>\n        <span class=\"nt\">\"id\"</span><span class=\"p\">:</span> <span class=\"s2\">\"47ba9ed9-92d1-4727-7089-ced1836ea2a9\"</span><span class=\"p\">,</span>\n        <span class=\"nt\">\"meta\"</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n          <span class=\"nt\">\"profile\"</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n            <span class=\"s2\">\"http://hl7.org/fhir/us/core/StructureDefinition/us-core-location\"</span>\n          <span class=\"p\">]</span>\n        <span class=\"p\">},</span>\n        <span class=\"nt\">\"status\"</span><span class=\"p\">:</span> <span class=\"s2\">\"active\"</span><span class=\"p\">,</span>\n        <span class=\"nt\">\"name\"</span><span class=\"p\">:</span> <span class=\"s2\">\"UNITYPOINT HEALTH - MERITER\"</span><span class=\"p\">,</span>\n        <span class=\"nt\">\"telecom\"</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n          <span class=\"p\">{</span>\n            <span class=\"nt\">\"system\"</span><span class=\"p\">:</span> <span class=\"s2\">\"phone\"</span><span class=\"p\">,</span>\n            <span class=\"nt\">\"value\"</span><span class=\"p\">:</span> <span class=\"s2\">\"6084176000\"</span>\n          <span class=\"p\">}</span>\n        <span class=\"p\">],</span>\n        <span class=\"nt\">\"address\"</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n          <span class=\"nt\">\"line\"</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n            <span class=\"s2\">\"202 S PARK ST\"</span>\n          <span class=\"p\">],</span>\n          <span class=\"nt\">\"city\"</span><span class=\"p\">:</span> <span class=\"s2\">\"MADISON\"</span><span class=\"p\">,</span>\n          <span class=\"nt\">\"state\"</span><span class=\"p\">:</span> <span class=\"s2\">\"WI\"</span><span class=\"p\">,</span>\n          <span class=\"nt\">\"postalCode\"</span><span class=\"p\">:</span> <span class=\"s2\">\"53715\"</span><span class=\"p\">,</span>\n          <span class=\"nt\">\"country\"</span><span class=\"p\">:</span> <span class=\"s2\">\"US\"</span>\n        <span class=\"p\">},</span>\n        <span class=\"nt\">\"position\"</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n          <span class=\"nt\">\"longitude\"</span><span class=\"p\">:</span> <span class=\"mf\">-89.430121</span><span class=\"p\">,</span>\n          <span class=\"nt\">\"latitude\"</span><span class=\"p\">:</span> <span class=\"mf\">43.087806</span>\n        <span class=\"p\">},</span>\n        <span class=\"nt\">\"managingOrganization\"</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n          <span class=\"nt\">\"reference\"</span><span class=\"p\">:</span> <span class=\"s2\">\"urn:uuid:e6c5d179-370a-3659-9ce6-3d09da3c3ad0\"</span><span class=\"p\">,</span>\n          <span class=\"nt\">\"display\"</span><span class=\"p\">:</span> <span class=\"s2\">\"UNITYPOINT HEALTH - MERITER\"</span>\n        <span class=\"p\">}</span>\n      <span class=\"p\">},</span>\n      <span class=\"nt\">\"request\"</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n        <span class=\"nt\">\"method\"</span><span class=\"p\">:</span> <span class=\"s2\">\"POST\"</span><span class=\"p\">,</span>\n        <span class=\"nt\">\"url\"</span><span class=\"p\">:</span> <span class=\"s2\">\"Location\"</span>\n      <span class=\"p\">}</span>\n    <span class=\"p\">}</span>\n</code></pre></div>\n\n<h3><code>diff abbie.location adolfo.location</code></h3>\n<div class=\"codehilite\" data-code-language=\"Diff\"><pre><span></span><code>2c2\n&lt;       \"fullUrl\": \"urn:uuid:5f0a03d6-92b8-6ec2-cdd2-893281c43776\",\n<span class=\"gd\">---</span>\n&gt;       \"fullUrl\": \"urn:uuid:47ba9ed9-92d1-4727-7089-ced1836ea2a9\",\n5c5\n&lt;         \"id\": \"5f0a03d6-92b8-6ec2-cdd2-893281c43776\",\n<span class=\"gd\">---</span>\n&gt;         \"id\": \"47ba9ed9-92d1-4727-7089-ced1836ea2a9\",\n</code></pre></div>\n\n<p>Considering that the <code>Organiation.id</code> is constant across locations and patients, shouldn't the <code>Location.id</code> also be constant?</p>",
        "id": 211013279,
        "sender_full_name": "Carl Anderson",
        "timestamp": 1600872205
    },
    {
        "content": "<p>Yep, looks like a bug.</p>",
        "id": 211026041,
        "sender_full_name": "Jason Walonoski",
        "timestamp": 1600877630
    },
    {
        "content": "<p>Created <a href=\"https://github.com/synthetichealth/synthea/issues/797\">https://github.com/synthetichealth/synthea/issues/797</a></p>",
        "id": 211026243,
        "sender_full_name": "Jason Walonoski",
        "timestamp": 1600877702
    }
]