[
    {
        "content": "<p>It appears that the validator sometimes (e.g., when validating a ValueSet that is defined extensionally) calls <code>/ValueSet/$validate-code</code> without specifying a ValueSet and that <a href=\"http://tx.fhir.org\">tx.fhir.org</a> behaves as if <code>/CodeSystem/$validate-code</code> were called, but other terminology servers do not.</p>\n<p>It appears that <a href=\"http://tx.fhir.org\">tx.fhir.org</a> is wrong in this case (and thus the validator is behaving badly) since the normative definition of <code>/ValueSet/$validate-code</code> explicitly states:</p>\n<blockquote>\n<p>If the operation is not called at the instance level, one of the in parameters url, context or valueSet must be provided.</p>\n</blockquote>",
        "id": 238385307,
        "sender_full_name": "Michael Lawley",
        "timestamp": 1620768700
    },
    {
        "content": "<p>how to reproduce this?</p>",
        "id": 238465484,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1620822828
    },
    {
        "content": "<p>I think this description should help: <a href=\"https://github.com/hapifhir/org.hl7.fhir.core/issues/494\">https://github.com/hapifhir/org.hl7.fhir.core/issues/494</a></p>",
        "id": 238579653,
        "sender_full_name": "Michael Lawley",
        "timestamp": 1620879902
    },
    {
        "content": "<p>I believe it should just be enough to change the call to <code>CodeSystem/$validate-code</code> in these batch requests</p>",
        "id": 238579738,
        "sender_full_name": "Michael Lawley",
        "timestamp": 1620879974
    },
    {
        "content": "<p>I think you still need to add the <code>url</code> parameter, but when calling <code>CodeSystem/$validate-code</code> that is the same as the <code>system</code> in the coding.</p>",
        "id": 238580020,
        "sender_full_name": "Alejandro Metke",
        "timestamp": 1620880244
    },
    {
        "content": "<p>The spec for <code>CodeSystem/$validate-code</code> says 'If the operation is not called at the instance level, one of the parameters \"url\" or \"codeSystem\" must be provided.'</p>",
        "id": 238580072,
        "sender_full_name": "Alejandro Metke",
        "timestamp": 1620880322
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> easiest way to reproduce is to create a simple extensional VS with SCT codes and run the publisher with <code>-tx https://r4.ontoserver.csiro.au/fhir</code>. I did this with a FSH project.</p>",
        "id": 238580313,
        "sender_full_name": "Alejandro Metke",
        "timestamp": 1620880515
    },
    {
        "content": "<p>hmm, a pity -- if you pass in a Coding, then surely you want to validate against the <code>system</code> and shouldn't need to also specify a value for <code>url</code></p>",
        "id": 238580436,
        "sender_full_name": "Michael Lawley",
        "timestamp": 1620880634
    },
    {
        "content": "<p>Yes, I agree!</p>",
        "id": 238580597,
        "sender_full_name": "Alejandro Metke",
        "timestamp": 1620880809
    },
    {
        "content": "<blockquote>\n<p>easiest way to reproduce is to create a simple extensional VS with SCT codes and run the publisher with -tx <a href=\"https://r4.ontoserver.csiro.au/fhir\">https://r4.ontoserver.csiro.au/fhir</a>. I did this with a FSH project</p>\n</blockquote>\n<p>This is hardly quick. Do you want to send me the project?</p>",
        "id": 238690601,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1620944923
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191316\">Grahame Grieve</span> <a href=\"#narrow/stream/179239-tooling/topic/Validator.20calls.20.2FValueSet.2F.24validate-code.20without.20a.20ValueSet/near/238690601\">said</a>:</p>\n<blockquote>\n<blockquote>\n<p>easiest way to reproduce is to create a simple extensional VS with SCT codes and run the publisher with -tx <a href=\"https://r4.ontoserver.csiro.au/fhir\">https://r4.ontoserver.csiro.au/fhir</a>. I did this with a FSH project</p>\n</blockquote>\n<p>This is hardly quick. Do you want to send me the project?</p>\n</blockquote>\n<p>Fair enough. Here is the project <a href=\"/user_uploads/10155/r20gZOG_lbxW9ym23PK9HEdR/ExampleIG.zip\">ExampleIG.zip</a>.</p>\n<p>I'm sure you already know this, but just for completeness, what you need to do is unzip it and then:</p>\n<div class=\"codehilite\"><pre><span></span><code>sushi .\n./_updatePublisher.sh\n./_genonce.sh -tx https://r4.ontoserver.csiro.au/fhir\n</code></pre></div>\n<p>The warnings will be on output/qa.html.</p>",
        "id": 238702639,
        "sender_full_name": "Alejandro Metke",
        "timestamp": 1620953619
    },
    {
        "content": "<p>fixed next release</p>",
        "id": 238711523,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1620961175
    }
]