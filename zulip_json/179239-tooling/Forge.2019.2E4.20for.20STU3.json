[
    {
        "content": "<p>Forge 19.4 for STU3 is now available for download from <a href=\"https://simplifier.net/forge\" target=\"_blank\" title=\"https://simplifier.net/forge\">https://simplifier.net/forge</a>.</p>\n<p>This release introduces a revamped user interface.</p>\n<ul>\n<li>\n<p>NEW: Folder Explorer<br>\n<a href=\"http://docs.simplifier.net/forge/forgeFeaturesOpenFolder.html\" target=\"_blank\" title=\"http://docs.simplifier.net/forge/forgeFeaturesOpenFolder.html\">http://docs.simplifier.net/forge/forgeFeaturesOpenFolder.html</a></p>\n</li>\n<li>\n<p>NEW: Select Extension dialog<br>\n<a href=\"http://docs.simplifier.net/forge/forgeFeaturesExtensions.html\" target=\"_blank\" title=\"http://docs.simplifier.net/forge/forgeFeaturesExtensions.html\">http://docs.simplifier.net/forge/forgeFeaturesExtensions.html</a></p>\n</li>\n</ul>\n<p>Change log: <a href=\"https://simplifier.net/organization/firely/news/57\" target=\"_blank\" title=\"https://simplifier.net/organization/firely/news/57\">https://simplifier.net/organization/firely/news/57</a></p>\n<p>If you find a new issue or would like to submit a feature request, please contact us at <a href=\"mailto:forge@fire.ly\" title=\"mailto:forge@fire.ly\">forge@fire.ly</a>.</p>\n<p>Happy profiling!</p>",
        "id": 154000235,
        "sender_full_name": "Michel Rutten",
        "timestamp": 1538048404
    },
    {
        "content": "<p>I just tried to open the profile folder from this repository (downloaded everything as zip and expanded it):<br>\n<a href=\"https://simplifier.net/terminologiatfcdraft/\" target=\"_blank\" title=\"https://simplifier.net/terminologiatfcdraft/\">https://simplifier.net/terminologiatfcdraft/</a><br>\nWhen i use \"open profile folder\" i don't see profiles, if i click refresh i get the error: </p>\n<div class=\"codehilite\"><pre><span></span>2018-10-20T00:43:05\nForge Forge 19.4.1 for HL7 FHIR STU3\nVersion: Version 19.4.1.0 (ClickOnce)\nFHIR Version: FHIR .NET API library for 3.0.1\n--------------------------------------------------\nInvalidOperationException in System:\nThis operation is not supported for a relative URI.\n   at System.Uri.MakeRelativeUri(Uri uri)\n   at Hl7.Fhir.Model.ModelInfo.IsCoreModelTypeUri(Uri uri)\n   at Forge.ViewModels.ArtifactSummaryVM..ctor(ArtifactSummary summary, String contentDirectory)\n   at Forge.ViewModels.SessionDirectoryFolderVM.&lt;&gt;c__DisplayClass36_0.&lt;GenerateFolderItems&gt;b__2(ArtifactSummary s)\n   at System.Linq.Enumerable.WhereSelectEnumerableIterator`2.MoveNext()\n   at System.Collections.Generic.List`1.InsertRange(Int32 index, IEnumerable`1 collection)\n   at Forge.ViewModels.SessionDirectoryFolderVM.GenerateFolderItems(IEnumerable`1 summaries)\n   at Forge.ViewModels.SessionDirectoryFolderVM.LoadSummaries()\n   at Forge.ViewModels.SessionDirectoryFolderVM.Refresh()\n   at Forge.ViewModels.SessionVM.&lt;&gt;c.&lt;onRefreshDirectory&gt;b__267_0(SessionDirectoryFolderVM folder)\n   at Forge.ViewModels.SessionVM.&lt;&gt;c__DisplayClass194_0`1.&lt;executeFolderCommand&gt;b__0()\n   at Forge.Common.UIServices.ExecuteOnUIThread(Action action)\n   at Forge.ViewModels.SessionVM.executeCommand(Action action)\n</pre></div>",
        "id": 154010686,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1539989309
    },
    {
        "content": "<p>Hi <span class=\"user-mention\" data-user-id=\"191451\">@Patrick Werner</span>, thank you for reporting this issue!<br>\nWe've received a similar error report from another customer. Apparently, the current Forge release does not like/handle profiles with a relative canonical url. If your directory contains one or more of such profiles, then Forge will complain. Workaround is to (manually) update relative canonical url's to absolute form.<br>\nI'll definitely try and fix this in the next release.</p>",
        "id": 154010886,
        "sender_full_name": "Michel Rutten",
        "timestamp": 1540201924
    },
    {
        "content": "<p>Hi <span class=\"user-mention\" data-user-id=\"191336\">@Michel Rutten</span>, <br>\ni profiled some structuredefinitions and saved them together with their snapshots. I updated Forge and now i receive failures when opening the resources(not all, but nearly). The position of the faults are weird...</p>\n<p>2018-10-24T10:35:12<br>\nForge Forge 19.4.1 for HL7 FHIR STU3<br>\nVersion: Version 19.4.1.0 (ClickOnce)<br>\nFHIR Version: FHIR .NET API library for 3.0.1</p>\n<hr>\n<p>FormatException in Hl7.Fhir.Support:<br>\nThe attribute 'value' in element 'meaningWhenMissing' has an empty value, which is not allowed. (at line 0, 0)<br>\n   bei Hl7.Fhir.Utility.ExceptionSourceExtensions.NotifyOrThrow(ExceptionNotificationHandler handler, Object source, ExceptionNotification args)<br>\n   bei Hl7.Fhir.Serialization.PocoBuilder.&lt;&gt;c__DisplayClass9_0.&lt;buildInternal&gt;b__1(Object o, ExceptionNotification a)<br>\n   bei Hl7.Fhir.Utility.ExceptionSourceExtensions.ExceptionInterceptor.&lt;&gt;c__DisplayClass3_0.&lt;.ctor&gt;g__nestedHandler|0(Object s, ExceptionNotification a)<br>\n   bei Hl7.Fhir.Utility.ExceptionSourceExtensions.NotifyOrThrow(ExceptionNotificationHandler handler, Object source, ExceptionNotification args)<br>\n   bei Hl7.Fhir.ElementModel.Adapters.ElementNavToSourceNodeAdapter.&lt;.ctor&gt;b__1_0(Object o, ExceptionNotification a)<br>\n   bei Hl7.Fhir.Utility.ExceptionSourceExtensions.NotifyOrThrow(ExceptionNotificationHandler handler, Object source, ExceptionNotification args)<br>\n   bei Hl7.Fhir.ElementModel.Adapters.SourceNodeToElementNavAdapter.&lt;.ctor&gt;b__4_0(Object o, ExceptionNotification a)<br>\n   bei Hl7.Fhir.Utility.ExceptionSourceExtensions.NotifyOrThrow(IExceptionSource ies, Object source, ExceptionNotification args)<br>\n   bei Hl7.Fhir.Serialization.FhirXmlNode.raiseFormatError(Object source, IExceptionSource ies, String message, XObject position)<br>\n   bei Hl7.Fhir.Serialization.FhirXmlNode.verifyXObject(XObject node, XNamespace[] AllowedExternalNamespaces, Object source, IExceptionSource ies)<br>\n   bei Hl7.Fhir.Serialization.FhirXmlNode.&lt;enumerateChildren&gt;d__33.MoveNext()<br>\n   bei Hl7.Fhir.Serialization.FhirXmlNode.&lt;Children&gt;d__32.MoveNext()<br>\n   bei System.Collections.Generic.List<code>1..ctor(IEnumerable</code>1 collection)<br>\n   bei System.Linq.Enumerable.ToList<a href=\"http://IEnumerable1%20source)\n%20%20%20bei%20Hl7.Fhir.ElementModel.Adapters.SourceNodeToElementNavAdapter.MoveToFirstChild(String%20nameFilter)\n%20%20%20bei%20Hl7.Fhir.ElementModel.ElementNavigatorExtensions.&lt;Children&gt;d__0.MoveNext()\n%20%20%20bei%20System.Linq.Enumerable.WhereSelectEnumerableIterator2.MoveNext()\n%20%20%20bei%20System.Linq.Enumerable.WhereEnumerableIterator1.MoveNext()\n%20%20%20bei%20Hl7.Fhir.Serialization.ComplexTypeReader.read(ClassMapping%20mapping,%20IEnumerable1%20members,%20Base%20existing\" target=\"_blank\" title=\"http://IEnumerable1%20source)\n%20%20%20bei%20Hl7.Fhir.ElementModel.Adapters.SourceNodeToElementNavAdapter.MoveToFirstChild(String%20nameFilter)\n%20%20%20bei%20Hl7.Fhir.ElementModel.ElementNavigatorExtensions.&lt;Children&gt;d__0.MoveNext()\n%20%20%20bei%20System.Linq.Enumerable.WhereSelectEnumerableIterator2.MoveNext()\n%20%20%20bei%20System.Linq.Enumerable.WhereEnumerableIterator1.MoveNext()\n%20%20%20bei%20Hl7.Fhir.Serialization.ComplexTypeReader.read(ClassMapping%20mapping,%20IEnumerable1%20members,%20Base%20existing\">TSource</a><br>\n   bei Hl7.Fhir.Serialization.ComplexTypeReader.Deserialize(ClassMapping mapping, Base existing)<br>\n   bei Hl7.Fhir.Serialization.DispatchingReader.Deserialize(PropertyMapping prop, String memberName, Object existing)<br>\n   bei Hl7.Fhir.Serialization.ComplexTypeReader.read(ClassMapping mapping, IEnumerable<code>1 members, Base existing)\n   bei Hl7.Fhir.Serialization.ComplexTypeReader.Deserialize(ClassMapping mapping, Base existing)\n   bei Hl7.Fhir.Serialization.DispatchingReader.Deserialize(PropertyMapping prop, String memberName, Object existing)\n   bei Hl7.Fhir.Serialization.RepeatingElementReader.Deserialize(PropertyMapping prop, String memberName, IList existing)\n   bei Hl7.Fhir.Serialization.DispatchingReader.Deserialize(PropertyMapping prop, String memberName, Object existing)\n   bei Hl7.Fhir.Serialization.ComplexTypeReader.read(ClassMapping mapping, IEnumerable</code>1 members, Base existing)<br>\n   bei Hl7.Fhir.Serialization.ComplexTypeReader.Deserialize(ClassMapping mapping, Base existing)<br>\n   bei Hl7.Fhir.Serialization.DispatchingReader.Deserialize(PropertyMapping prop, String memberName, Object existing)<br>\n   bei Hl7.Fhir.Serialization.ComplexTypeReader.read(ClassMapping mapping, IEnumerable<code>1 members, Base existing)\n   bei Hl7.Fhir.Serialization.ComplexTypeReader.Deserialize(ClassMapping mapping, Base existing)\n   bei Hl7.Fhir.Serialization.ResourceReader.Deserialize(Resource existing)\n   bei Hl7.Fhir.Serialization.PocoBuilder.&lt;&gt;c__DisplayClass9_0.&lt;buildInternal&gt;g__build|0()\n   bei Hl7.Fhir.Serialization.PocoBuilder.buildInternal(ISourceNode source, Type typeToBuild)\n   bei Hl7.Fhir.Serialization.PocoBuilder.BuildFrom(ISourceNode source, Type dataType)\n   bei Hl7.Fhir.ElementModel.PocoBuilderExtensions.ToPoco(IElementNavigator navigator, Type pocoType, PocoBuilderSettings settings)\n   bei Hl7.Fhir.ElementModel.PocoBuilderExtensions.ToPoco[T](IElementNavigator navigator, PocoBuilderSettings settings)\n   bei Hl7.Fhir.Serialization.BaseFhirParser.Parse[T](IElementNavigator nav)\n   bei Hl7.Fhir.Specification.Source.DirectorySource.loadResourceInternal[T](ArtifactSummary summary)\n   bei Hl7.Fhir.Specification.Source.DirectorySource.ResolveByCanonicalUri(String uri)\n   bei Hl7.Fhir.Specification.Source.CachedResolver.InternalResolveByCanonicalUri(String url)\n   bei Hl7.Fhir.Specification.Source.CachedResolver.&lt;.ctor&gt;b__3_1(String id)\n   bei Hl7.Fhir.Specification.Source.CachedResolver.Cache</code>1.Get(String identifier, CachedResolverLoadingStrategy strategy)<br>\n   bei Hl7.Fhir.Specification.Source.CachedResolver.ResolveByCanonicalUri(String url)<br>\n   bei Hl7.Fhir.Specification.Source.MultiResolver.ResolveByCanonicalUri(String uri)<br>\n   bei Forge.ViewModels.ElementTypeMatcher.findCandidateBaseTypesForTargetProfile(IEnumerable<code>1 candidates, String targetProfileUri)\n   bei Forge.ViewModels.ElementTypeMatcher.findBaseForReferenceType(IEnumerable</code>1 baseTypes, TypeRefComponent type)<br>\n   bei Forge.ViewModels.ElementTypeMatcher.FindBaseType(IList<code>1 baseTypes, TypeRefComponent type)\n   bei Forge.ViewModels.TypeStorageHandler.&lt;CreateItems&gt;d__19.MoveNext()\n   bei Forge.ViewModels.MultipleValueProperty</code>1.set_StorageHandler(IStorageHandler value)<br>\n   bei Forge.ViewModels.TypeProperty.set_StorageHandler(IStorageHandler value)<br>\n   bei Forge.ViewModels.DefinitionVM.setModelElement(ElementDefinition definition, IElementsStorageHandler elementsStorageHandler)<br>\n   bei Forge.ViewModels.DefinitionVM.initialize(Base modelElement, Base baseElement, IElementsStorageHandler elementsStorageHandler)<br>\n   bei Forge.ViewModels.ElementsStorageHandler.get_Value()<br>\n   bei Forge.ViewModels.SingleValueProperty<code>1.set_StorageHandler(IStorageHandler value)\n   bei Forge.ViewModels.RestrictingElementDefinitionVM.set_StorageHandler(IStorageHandler value)\n   bei Forge.ViewModels.RestrictingElementDefinitionVM..ctor(MultipleValueProperty</code>1 owner, ElementsStorageHandler storageHandler)<br>\n   bei Forge.ViewModels.ElementsStorageHandler.&lt;CreateItems&gt;d__76.MoveNext()<br>\n   bei Forge.ViewModels.MultipleValueProperty`1.set_StorageHandler(IStorageHandler value)<br>\n   bei Forge.ViewModels.ProfileVM.set_ModelElement(Base value)<br>\n   bei Forge.ViewModels.ProfileVM.Initialize(Base modelElement, Base baseElement)<br>\n   bei Forge.ViewModels.ProfileVM..ctor(ISessionNode owner, StructureDefinition model, StructureDefinition baseModel)<br>\n   bei Forge.ViewModels.SessionItemVM.CreateResourceVM(ISessionFolder parentFolder, SessionItemVM owner, Resource model)<br>\n   bei Forge.ViewModels.SessionItemVM..ctor(ISessionFolder owner, Resource model)<br>\n   bei Forge.ViewModels.SessionFolderVM.Open(Resource model)<br>\n   bei Forge.ViewModels.SessionDirectoryFolderVM.openArtifact(ArtifactSummaryVM summaryVM, Boolean asCopy)<br>\n   bei Forge.ViewModels.SessionDirectoryFolderVM.Open(ArtifactSummaryVM summaryVM, Boolean asCopy)<br>\n   bei Forge.ViewModels.SessionVM.&lt;&gt;c.&lt;onOpenDirectoryItem&gt;b__262_0(SessionDirectoryFolderVM folder, ArtifactSummaryVM selItem)<br>\n   bei Forge.ViewModels.SessionVM.&lt;&gt;c__DisplayClass202_0.&lt;executeDirectoryItemCommand&gt;b__0()<br>\n   bei Forge.Common.UIServices.ExecuteOnUIThread(Action action)<br>\n   bei Forge.ViewModels.SessionVM.executeCommand(Action action)</p>\n<p>2018-10-24T10:39:00<br>\nForge Forge 19.4.1 for HL7 FHIR STU3<br>\nVersion: Version 19.4.1.0 (ClickOnce)<br>\nFHIR Version: FHIR .NET API library for 3.0.1</p>\n<hr>\n<p>FormatException in Hl7.Fhir.Support:<br>\nThe attribute 'value' in element 'comment' has an empty value, which is not allowed. (at line 0, 0)<br>\n   bei Hl7.Fhir.Utility.ExceptionSourceExtensions.NotifyOrThrow(ExceptionNotificationHandler handler, Object source, ExceptionNotification args)<br>\n   bei Hl7.Fhir.Serialization.PocoBuilder.&lt;&gt;c__DisplayClass9_0.&lt;buildInternal&gt;b__1(Object o, ExceptionNotification a)<br>\n   bei Hl7.Fhir.Utility.ExceptionSourceExtensions.ExceptionInterceptor.&lt;&gt;c__DisplayClass3_0.&lt;.ctor&gt;g__nestedHandler|0(Object s, ExceptionNotification a)<br>\n   bei Hl7.Fhir.Utility.ExceptionSourceExtensions.NotifyOrThrow(ExceptionNotificationHandler handler, Object source, ExceptionNotification args)<br>\n   bei Hl7.Fhir.ElementModel.Adapters.ElementNavToSourceNodeAdapter.&lt;.ctor&gt;b__1_0(Object o, ExceptionNotification a)<br>\n   bei Hl7.Fhir.Utility.ExceptionSourceExtensions.NotifyOrThrow(ExceptionNotificationHandler handler, Object source, ExceptionNotification args)<br>\n   bei Hl7.Fhir.ElementModel.Adapters.SourceNodeToElementNavAdapter.&lt;.ctor&gt;b__4_0(Object o, ExceptionNotification a)<br>\n   bei Hl7.Fhir.Utility.ExceptionSourceExtensions.NotifyOrThrow(IExceptionSource ies, Object source, ExceptionNotification args)<br>\n   bei Hl7.Fhir.Serialization.FhirXmlNode.raiseFormatError(Object source, IExceptionSource ies, String message, XObject position)<br>\n   bei Hl7.Fhir.Serialization.FhirXmlNode.verifyXObject(XObject node, XNamespace[] AllowedExternalNamespaces, Object source, IExceptionSource ies)</p>",
        "id": 154011744,
        "sender_full_name": "Maximilian Reith",
        "timestamp": 1540372069
    },
    {
        "content": "<p>Hi @<strong>Maximilian Fechteler</strong>, according to the error message, apparently your profiles contain empty values, e.g. <code>&lt;meaningWhenMissing value=\"\"/&gt;</code>, which are disallowed by FHIR:<br>\n<a href=\"http://hl7.org/fhir/formats.html\" target=\"_blank\" title=\"http://hl7.org/fhir/formats.html\">http://hl7.org/fhir/formats.html</a></p>\n<blockquote>\n<p>\"This value attribute/property can never be empty. Either it is absent, or it is present with at least one character of non-whitespace content\"</p>\n</blockquote>\n<p>The current Forge release is based on a new (de-)serialization layer, which is more flexible but also more strict in reporting errors. Forge Error reporting could use a bit of work to make it more user friendly (TODO).<br>\nAs a workaround, I suggest you manually edit the profiles (via text editor) and remove the illegal empty value attributes.</p>\n<p>Hope this helps!</p>\n<p>Cheers, Michel</p>",
        "id": 154011748,
        "sender_full_name": "Michel Rutten",
        "timestamp": 1540372495
    },
    {
        "content": "<p>but at line 0.0 is no meaningWhenMissing and the only existing element is not empty       &lt;meaningWhenMissing value=\"If missing, this task should be performed with normal priority\" /&gt;</p>",
        "id": 154011750,
        "sender_full_name": "Maximilian Reith",
        "timestamp": 1540372833
    },
    {
        "content": "<p>all resources could get opened properly before the update occurs</p>",
        "id": 154011751,
        "sender_full_name": "Maximilian Reith",
        "timestamp": 1540372972
    },
    {
        "content": "<p>in some cases no meaningWhenMissing is present at all</p>",
        "id": 154011753,
        "sender_full_name": "Maximilian Reith",
        "timestamp": 1540373212
    },
    {
        "content": "<p>Hi @<strong>Maximilian Fechteler</strong>, looks like you found another issue. Can you share your set of profiles with me, for debugging purposes? Then I will try to reproduce the issue on my machine.</p>",
        "id": 154011754,
        "sender_full_name": "Michel Rutten",
        "timestamp": 1540373930
    },
    {
        "content": "<p>BTW Could be that one or more referenced external profiles/extensions introduce empty value(s), instead of your own profile.</p>",
        "id": 154011756,
        "sender_full_name": "Michel Rutten",
        "timestamp": 1540374087
    },
    {
        "content": "<p>Hey <span class=\"user-mention\" data-user-id=\"191336\">@Michel Rutten</span>, you can have all of it ;-) <br>\nftp://ftp.kbv.de/ita-update/291d-Schnittstellen/PVS-Archivierungs-_Wechsel-Schnittstelle/FHIR-Definition-SST-AW.zip</p>\n<p>nearly every profile has an issue (comment or meaningWhenMisssing bug)<br>\nprofile: 74_PR_AW_Leistungsanfrage_Psychotherapie has no meaningWhenMissing element<br>\nfault is in every case at 0,0</p>",
        "id": 154011762,
        "sender_full_name": "Maximilian Reith",
        "timestamp": 1540376327
    },
    {
        "content": "<p>could you provide an earlier version of forge?</p>",
        "id": 154011763,
        "sender_full_name": "Maximilian Reith",
        "timestamp": 1540376676
    },
    {
        "content": "<p>Hi @<strong>Maximilian Fechteler</strong>, thank you for the link, I will try to reproduce the issue.<br>\nForge always automatically updates to the latest version. Commercial customers also have access to historic versions.</p>",
        "id": 154011771,
        "sender_full_name": "Michel Rutten",
        "timestamp": 1540379358
    },
    {
        "content": "<p>I @<strong>Maximilian Fechteler</strong>, I investigated the issue. Indeed, many of the profiles contain (illegal) empty value attributes:<br>\n<code>&lt;someElement value=\" \"/&gt;</code><br>\nThis triggers exceptions during de-serialization.<br>\nNote: syntax errors can originate from the profile you're currently trying to open, but also from externally referenced profiles, such as an extension definitions. Unfortunately, the error message does not (yet) report the name or url of the invalid profile...</p>\n<p>As a workaround, you could remove all elements with empty values from all profiles in the working folder. Quite tedious to do this manually, preferably create a simple xslt or script to process and correct all your profiles.</p>\n<p>The new de-serialization logic in the API exposes some internal configuration options that control behavior for dealing with invalid input such as empty value attributes. In a future Forge update, I want to leverage/expose relevant configuration options in the UI. Once this is in place, you will be able to open profiles with (minor) errors and correct them in the application.<br>\nWe will also try to improve API error reporting, to clearly indicate the invalid target profile to the end user.</p>",
        "id": 154011897,
        "sender_full_name": "Michel Rutten",
        "timestamp": 1540394799
    },
    {
        "content": "<p>Hi <span class=\"user-mention\" data-user-id=\"191336\">@Michel Rutten</span>, thank you for the fast response. But all of these <code> &lt;someElement value=\" \"/&gt;</code>  Elemetns are in the snapshot part, so i think you may have to improve the automated snapshot generation.</p>",
        "id": 154012096,
        "sender_full_name": "Maximilian Reith",
        "timestamp": 1540456496
    },
    {
        "content": "<p>Actually, it's more subtle. The new (de-)serializer logic in the API now by default aborts on any syntax error in the input. There is a provision for clients to override the default behavior, however I haven't leveraged that in Forge yet (TODO).<br>\nThe existing snapshots may have been generated by a previous version of the .NET FHIR API, or another system.<br>\nAnyway, I'm working on improving this for the next update.<br>\nBTW Forge always re-generates every snapshot component on demand. So you could safely delete all the snapshot components from the input files.</p>",
        "id": 154012097,
        "sender_full_name": "Michel Rutten",
        "timestamp": 1540456952
    },
    {
        "content": "<p>yes i generated these profiles with forge 19.1.0900 and i will update the snapshots in the next release. Thanks a lot...</p>",
        "id": 154012102,
        "sender_full_name": "Maximilian Reith",
        "timestamp": 1540458169
    },
    {
        "content": "<p>No problem. This is an annoying but temporary tooling issue that we're going to address ASAP.</p>",
        "id": 154012103,
        "sender_full_name": "Michel Rutten",
        "timestamp": 1540458687
    }
]