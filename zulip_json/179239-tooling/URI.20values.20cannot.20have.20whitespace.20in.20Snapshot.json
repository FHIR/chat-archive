[
    {
        "content": "<p>Hey,</p>\n<p>i got a lot of validation errors in the snapshot part of some resources. I developed these resources with forge...</p>\n<p>HAPI 3.8 Validation Error: <strong>URI values cannot have whitespace</strong></p>\n<div class=\"codehilite\"><pre><span></span>&lt;element id=&quot;Extension.value[x]:valueIdentifier.system&quot;&gt;\n  &lt;path value=&quot;Extension.valueIdentifier.system&quot; /&gt;\n  &lt;short value=&quot;NamingSystem der ASV-Teamnummer&quot; /&gt;\n  &lt;definition value=&quot;Establishes the namespace for the value - that is, a URL that describes a set values that are unique.&quot; /&gt;\n  &lt;comment value=&quot;see http://en.wikipedia.org/wiki/Uniform_resource_identifier&quot; /&gt;\n  &lt;requirements value=&quot;There are many sets  of identifiers.  To perform matching of two identifiers, we need to know what set we&#39;re dealing with. The system identifies a particular set of unique identifiers.&quot; /&gt;\n  &lt;min value=&quot;1&quot; /&gt;\n  &lt;max value=&quot;1&quot; /&gt;\n  &lt;base&gt;\n    &lt;path value=&quot;Identifier.system&quot; /&gt;\n    &lt;min value=&quot;0&quot; /&gt;\n    &lt;max value=&quot;1&quot; /&gt;\n  &lt;/base&gt;\n  &lt;type&gt;\n    &lt;code value=&quot;uri&quot; /&gt;\n  &lt;/type&gt;\n  &lt;fixedUri value=&quot;http://fhir.de/NamingSystem/asv/teamnummer&quot; /&gt;\n  &lt;example&gt;\n    &lt;label value=&quot;General&quot; /&gt;\n    &lt;valueUri value=&quot;http://www.acme.com/identifiers/patient or urn:ietf:rfc:3986 if the Identifier.value itself is a full uri&quot; /&gt;\n  &lt;/example&gt;\n</pre></div>\n\n\n<p>i think <strong>valueUri</strong> might be invalid...Could anybody confirm this?</p>\n<p>greetings Max</p>",
        "id": 173631830,
        "sender_full_name": "Maximilian Reith",
        "timestamp": 1566281492
    },
    {
        "content": "<p>yes that's the subject of a technical correction... one that I thought we'd done... where are you encountering this?</p>",
        "id": 173632964,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1566283273
    },
    {
        "content": "<p>FHIR DSTU 3; Forge 22.0 in several Extensions and Profiles(Practitioner, Organziation, Bundle...) or do you need to know the exact position e.g. which element?</p>",
        "id": 173633811,
        "sender_full_name": "Maximilian Reith",
        "timestamp": 1566284468
    },
    {
        "content": "<p>Indeed! Apparently, the STU3 <code>Identifier</code> datatype definition is responsible for introducing the invalid example Uri: <a href=\"http://hl7.org/fhir/stu3/identifier.profile.xml.html\" target=\"_blank\" title=\"http://hl7.org/fhir/stu3/identifier.profile.xml.html\">http://hl7.org/fhir/stu3/identifier.profile.xml.html</a><br>\nThe invalid uri can \"leak\" into the snapshot of datatypes &amp; resources that constrain <code>Identifier</code>, causing validation errors. Therefore you cannot fix this in your own derived profiles; this requires a technical correction of STU3.</p>",
        "id": 173639562,
        "sender_full_name": "Michel Rutten",
        "timestamp": 1566291108
    },
    {
        "content": "<p>ok this is on my list for the R3 technical correction. I'm not sure when I'll be doing that - soon.</p>",
        "id": 173696885,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1566335741
    },
    {
        "content": "<p>I've found that DSTU2/STU3 also has some <code>mapping</code> URIs with spaces in them as well.  I'll see if I can get you a list of the transgressors.</p>",
        "id": 173791850,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1566392910
    },
    {
        "content": "<p>OK.  Wrote a little script.  Here is what I found if it is helpful.  I essentially looked at all types, resources, profiles, and extensions in the downloaded definitions of DSTU2, STU3, and R4 specs.</p>\n<div class=\"codehilite\"><pre><span></span>========================================\nDSTU2\n========================================\n\nDSTU2 Type: Identifier\n  snapshot[5].exampleUri = &#39;http://www.acme.com/identifiers/patient or urn:ietf:rfc:3986 if the Identifier.value itself is a full uri\nDSTU2 Profile: uslab-do\n  snapshot[21].exampleUri = &#39;http://www.acme.com/identifiers/patient or urn:ietf:rfc:3986 if the Identifier.value itself is a full uri\nDSTU2 Profile: uslab-dr\n  snapshot[14].exampleUri = &#39;http://www.acme.com/identifiers/patient or urn:ietf:rfc:3986 if the Identifier.value itself is a full uri\nDSTU2 Profile: uslab-obscode\n  snapshot[31].exampleUri = &#39;http://www.acme.com/identifiers/patient or urn:ietf:rfc:3986 if the Identifier.value itself is a full uri\nDSTU2 Profile: uslab-obsquantity\n  snapshot[31].exampleUri = &#39;http://www.acme.com/identifiers/patient or urn:ietf:rfc:3986 if the Identifier.value itself is a full uri\nDSTU2 Profile: uslab-obsother\n  snapshot[31].exampleUri = &#39;http://www.acme.com/identifiers/patient or urn:ietf:rfc:3986 if the Identifier.value itself is a full uri\nDSTU2 Profile: uslab-obsrange\n  snapshot[31].exampleUri = &#39;http://www.acme.com/identifiers/patient or urn:ietf:rfc:3986 if the Identifier.value itself is a full uri\nDSTU2 Profile: uslab-obsratio\n  snapshot[31].exampleUri = &#39;http://www.acme.com/identifiers/patient or urn:ietf:rfc:3986 if the Identifier.value itself is a full uri\nDSTU2 Profile: uslab-obspanel\n  snapshot[31].exampleUri = &#39;http://www.acme.com/identifiers/patient or urn:ietf:rfc:3986 if the Identifier.value itself is a full uri\nDSTU2 Profile: uslab-orderfacility\n  snapshot[15].exampleUri = &#39;http://www.acme.com/identifiers/patient or urn:ietf:rfc:3986 if the Identifier.value itself is a full uri\nDSTU2 Profile: uslab-performinglab\n  snapshot[15].exampleUri = &#39;http://www.acme.com/identifiers/patient or urn:ietf:rfc:3986 if the Identifier.value itself is a full uri\nDSTU2 Profile: uslab-cctarget\n  snapshot[15].exampleUri = &#39;http://www.acme.com/identifiers/patient or urn:ietf:rfc:3986 if the Identifier.value itself is a full uri\nDSTU2 Profile: uslab-patient\n  snapshot[46].exampleUri = &#39;http://www.acme.com/identifiers/patient or urn:ietf:rfc:3986 if the Identifier.value itself is a full uri\nDSTU2 Profile: uslab-phpatient\n  snapshot[46].exampleUri = &#39;http://www.acme.com/identifiers/patient or urn:ietf:rfc:3986 if the Identifier.value itself is a full uri\nDSTU2 Profile: uslab-pract\n  snapshot[14].exampleUri = &#39;http://www.acme.com/identifiers/patient or urn:ietf:rfc:3986 if the Identifier.value itself is a full uri\nDSTU2 Profile: uslab-phpract\n  snapshot[14].exampleUri = &#39;http://www.acme.com/identifiers/patient or urn:ietf:rfc:3986 if the Identifier.value itself is a full uri\nDSTU2 Profile: uslab-spec\n  snapshot[14].exampleUri = &#39;http://www.acme.com/identifiers/patient or urn:ietf:rfc:3986 if the Identifier.value itself is a full uri\n  snapshot[38].exampleUri = &#39;http://www.acme.com/identifiers/patient or urn:ietf:rfc:3986 if the Identifier.value itself is a full uri\nDSTU2 Profile: daf-diagnosticorder\n  snapshot[16].exampleUri = &#39;http://www.acme.com/identifiers/patient or urn:ietf:rfc:3986 if the Identifier.value itself is a full uri\nDSTU2 Profile: daf-diagnosticreport\n  snapshot[14].exampleUri = &#39;http://www.acme.com/identifiers/patient or urn:ietf:rfc:3986 if the Identifier.value itself is a full uri\nDSTU2 Profile: daf-resultobs\n  snapshot[14].exampleUri = &#39;http://www.acme.com/identifiers/patient or urn:ietf:rfc:3986 if the Identifier.value itself is a full uri\nDSTU2 Profile: daf-patient\n  snapshot[19].exampleUri = &#39;http://www.acme.com/identifiers/patient or urn:ietf:rfc:3986 if the Identifier.value itself is a full uri\nDSTU2 Profile: daf-pract\n  snapshot[18].exampleUri = &#39;NPI could be used as the identifier system in the US.\nDSTU2 Profile: daf-spec\n  snapshot[14].exampleUri = &#39;http://www.acme.com/identifiers/patient or urn:ietf:rfc:3986 if the Identifier.value itself is a full uri\n  snapshot[38].exampleUri = &#39;http://www.acme.com/identifiers/patient or urn:ietf:rfc:3986 if the Identifier.value itself is a full uri\n\n========================================\nSTU3\n========================================\n\nSTU3 Type: Identifier\n  snapshot[5].example[0].valueUri = &#39;http://www.acme.com/identifiers/patient or urn:ietf:rfc:3986 if the Identifier.value itself is a full uri&#39;\n\n========================================\nR4\n========================================\n\nNone\n</pre></div>",
        "id": 173799113,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1566397816
    },
    {
        "content": "<p>Note that those argo/us core profiles are the ones that were actually packaged <em>in</em> the FHIR spec; not the ones in the separately packaged IGs.</p>",
        "id": 173799202,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1566397877
    },
    {
        "content": "<p>on my list. we won't be fixing r2, I think</p>",
        "id": 173799232,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1566397902
    },
    {
        "content": "<p>Whoops, my bad.  It turns out I <em>was</em> loading in the official US Core definitions too.  I unloaded those and ran it again -- then updated my list in the post above.  Now STU3 is only reporting that one thing you already knew about Identifier.</p>",
        "id": 173802473,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1566399889
    }
]