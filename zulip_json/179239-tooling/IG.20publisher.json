[
    {
        "content": "<p>I'm still pretty blocked on this publisher error - I started working off of the sample-ig, which works and which I can modify and see results, but if I try to swap out a xml structure definition for a json one, I get </p>\n<div class=\"codehilite\"><pre><span></span>org.hl7.fhir.exceptions.FHIRFormatError: Unknown type ElementDefinition\n    at org.hl7.fhir.r4.formats.XmlParser.parseType(XmlParser.java:24274)\n    at org.hl7.fhir.r4.formats.XmlParserBase.parseType(XmlParserBase.java:133)\n    at org.hl7.fhir.r4.formats.ParserBase.parseType(ParserBase.java:92)\n    at org.hl7.fhir.r4.formats.ParserBase.parseType(ParserBase.java:83)\n    at org.hl7.fhir.igtools.publisher.Publisher$TypeParserR4.parseType(Publisher.java:437)\n    at org.hl7.fhir.r5.utils.NarrativeGenerator.parseType(NarrativeGenerator.java:1061)\n    at org.hl7.fhir.r5.utils.NarrativeGenerator$BaseWrapperMetaElement.getBase(NarrativeGenerator.java:625)\n    at org.hl7.fhir.r5.utils.NarrativeGenerator.renderLeaf(NarrativeGenerator.java:1426)\n    at org.hl7.fhir.r5.utils.NarrativeGenerator.addColumnValues(NarrativeGenerator.java:1365)\n    at org.hl7.fhir.r5.utils.NarrativeGenerator.generateByProfile(NarrativeGenerator.java:1239)\n    at org.hl7.fhir.r5.utils.NarrativeGenerator.generate(NarrativeGenerator.java:1144)\n    at org.hl7.fhir.igtools.publisher.Publisher.generateNarratives(Publisher.java:929)\n    at org.hl7.fhir.igtools.publisher.Publisher.loadConformance(Publisher.java:3341)\n    at org.hl7.fhir.igtools.publisher.Publisher.createIg(Publisher.java:805)\n    at org.hl7.fhir.igtools.publisher.Publisher.execute(Publisher.java:666)\n    at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:6933)\n</pre></div>",
        "id": 191806185,
        "sender_full_name": "Nick George",
        "timestamp": 1585167814
    },
    {
        "content": "<p>Is there somewhere I need to specify that it is json and not XML?</p>",
        "id": 191806408,
        "sender_full_name": "Nick George",
        "timestamp": 1585167935
    },
    {
        "content": "<p>can I see your json?</p>",
        "id": 191806698,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1585168090
    },
    {
        "content": "<p>Seems the parser is hardcoded to XML?  is it not possible to use the publisher on json resources? <a href=\"https://github.com/HL7/fhir-ig-publisher/blob/master/org.hl7.fhir.publisher.core/src/main/java/org/hl7/fhir/igtools/publisher/Publisher.java#L438\" title=\"https://github.com/HL7/fhir-ig-publisher/blob/master/org.hl7.fhir.publisher.core/src/main/java/org/hl7/fhir/igtools/publisher/Publisher.java#L438\">https://github.com/HL7/fhir-ig-publisher/blob/master/org.hl7.fhir.publisher.core/src/main/java/org/hl7/fhir/igtools/publisher/Publisher.java#L438</a></p>",
        "id": 191807471,
        "sender_full_name": "Nick George",
        "timestamp": 1585168457
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191832\">@Jose Costa Teixeira</span>  The resource Json?  I just copied the US-core patient profile and updated the url</p>",
        "id": 191822727,
        "sender_full_name": "Nick George",
        "timestamp": 1585178026
    },
    {
        "content": "<p>which worked when I copied the US Core xml, but not json</p>",
        "id": 191822734,
        "sender_full_name": "Nick George",
        "timestamp": 1585178036
    },
    {
        "content": "<p>(the structure definition is quite large but you can see it here: <a href=\"https://build.fhir.org/ig/HL7/US-Core-R4/StructureDefinition-us-core-patient.json.html\" title=\"https://build.fhir.org/ig/HL7/US-Core-R4/StructureDefinition-us-core-patient.json.html\">https://build.fhir.org/ig/HL7/US-Core-R4/StructureDefinition-us-core-patient.json.html</a></p>",
        "id": 191822805,
        "sender_full_name": "Nick George",
        "timestamp": 1585178065
    },
    {
        "content": "<p>json artifacts also work. I tested with this json and it builds ok</p>",
        "id": 191823978,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1585179021
    },
    {
        "content": "<p>do you have  a repo or other way to look at your ig?</p>",
        "id": 191824085,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1585179112
    },
    {
        "content": "<p>is this an R4 IG?</p>",
        "id": 191833229,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1585188439
    },
    {
        "content": "<p>Sorry for the spam, I'm making progress here.  Not sure what that ElementDefinition was, but it's gone now.  Current issue:  is there guidance somewhere for how to specify dependencies?  E.g., how do I pull in UsCore?</p>",
        "id": 191956564,
        "sender_full_name": "Nick George",
        "timestamp": 1585261344
    },
    {
        "content": "<p>ah just found <a href=\"https://confluence.hl7.org/display/FHIR/IG+Publisher+Documentation#IGPublisherDocumentation-DependencyList\" title=\"https://confluence.hl7.org/display/FHIR/IG+Publisher+Documentation#IGPublisherDocumentation-DependencyList\">https://confluence.hl7.org/display/FHIR/IG+Publisher+Documentation#IGPublisherDocumentation-DependencyList</a> - looks like that's out of date, but the dependsOn property of implementationguide seems to work</p>",
        "id": 191956769,
        "sender_full_name": "Nick George",
        "timestamp": 1585261479
    },
    {
        "content": "<p>Gonna keep posting questions here as I find them, to give a sense of pain-points:<br>\nThere are a number of errors in qa.html that it's not obvious what they mean to me.</p>",
        "id": 192064941,
        "sender_full_name": "Nick George",
        "timestamp": 1585335593
    },
    {
        "content": "<p><code>Unable to find name for the resource StructureDefinition/Patient. Names are mandatory to allow proper population of the artifact list.</code>  I don't know what name it's looking for here - the name field on the structure definitions is populated</p>",
        "id": 192064951,
        "sender_full_name": "Nick George",
        "timestamp": 1585335596
    },
    {
        "content": "<p>a million errors like<br>\n<code>The link 'background.html' for \"Background\" cannot be resolved</code><br>\nI have a background.xml but it doesn't seem to generate an html</p>",
        "id": 192065176,
        "sender_full_name": "Nick George",
        "timestamp": 1585335666
    },
    {
        "content": "<p>[edit, deleted one that I figured out, my mistake]</p>",
        "id": 192067055,
        "sender_full_name": "Nick George",
        "timestamp": 1585336550
    },
    {
        "content": "<p>The name missing seems to be in the implementationguide resource. <a href=\"http://Implementationguide.definition.resource.name\" title=\"http://Implementationguide.definition.resource.name\">Implementationguide.definition.resource.name</a></p>",
        "id": 192068858,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1585337355
    },
    {
        "content": "<p>you should ask questions about IG creation in <a class=\"stream\" data-stream-id=\"179252\" href=\"/#narrow/stream/179252-IG-creation\">#IG creation</a> - I and others check this thread much less often</p>",
        "id": 192068885,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1585337372
    },
    {
        "content": "<blockquote>\n<p>Unable to find name for the resource StructureDefinition/Patient</p>\n</blockquote>\n<p>looks like an error in the template <span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span></p>",
        "id": 192069049,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1585337442
    },
    {
        "content": "<p>ack, thanks Grahame.</p>",
        "id": 192070969,
        "sender_full_name": "Nick George",
        "timestamp": 1585338595
    },
    {
        "content": "<p>Do I need to list the names of all the resources in the implementation guide resource itself?  I assumed that would just get pulled from the StructureDefinitions themselves</p>",
        "id": 192071097,
        "sender_full_name": "Nick George",
        "timestamp": 1585338662
    },
    {
        "content": "<p>oh I think I see the problem with my backgound.html links</p>",
        "id": 192071181,
        "sender_full_name": "Nick George",
        "timestamp": 1585338703
    },
    {
        "content": "<p>Publisher using wrong text for short and definition.</p>\n<p>When a profile defines the types of an element, the IG Publisher replaces the short and definition of the element with values from the first mentioned type, rather than from the base definition.</p>\n<p>For example, if PratitionerRole.identifier has its type set to Identifier, AUMedicareProviderNumber, the short is changed from \"Business Identifiers that are specific to a role/location\" to \"An identifier intended for computation\".<br>\nThis can be managed by explicitly setting PractitionerRole.identifier.short to the value that it should inherit from PractitionerRole.</p>\n<p>See <a href=\"http://build.fhir.org/ig/hl7au/au-fhir-base/StructureDefinition-au-practitionerrole.html\">http://build.fhir.org/ig/hl7au/au-fhir-base/StructureDefinition-au-practitionerrole.html</a> <br>\nand <a href=\"https://github.com/hl7au/au-fhir-base/blob/master/resources/au-practitionerrole.xml\">https://github.com/hl7au/au-fhir-base/blob/master/resources/au-practitionerrole.xml</a><br>\nThis has had the correct text added to the difference</p>",
        "id": 223333679,
        "sender_full_name": "Richard Townley-O'Neill",
        "timestamp": 1611120131
    },
    {
        "content": "<p>In <a href=\"https://build.fhir.org/ig/ci-collaborative/au-fhir-base-r4//StructureDefinition-au-organization.html\">AU Organization</a> address shows the short which is not edited in the differential. It has the text from the Address data type instead of from the Organisation resource.</p>",
        "id": 223338989,
        "sender_full_name": "Richard Townley-O'Neill",
        "timestamp": 1611127027
    },
    {
        "content": "<p>Now in GitHub <a href=\"https://github.com/HL7/fhir-ig-publisher/issues/227\">https://github.com/HL7/fhir-ig-publisher/issues/227</a></p>",
        "id": 224141778,
        "sender_full_name": "Richard Townley-O'Neill",
        "timestamp": 1611724982
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191682\">@Richard Townley-O'Neill</span> it's not clear to my why this is wrong</p>",
        "id": 225119186,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1612414588
    },
    {
        "content": "<p>Why use the short from the first listed type instead of from the base definition when more than one type is listed?</p>",
        "id": 225126306,
        "sender_full_name": "Richard Townley-O'Neill",
        "timestamp": 1612423196
    },
    {
        "content": "<p>Now I describe it it sounds like an enhancement.</p>",
        "id": 225126362,
        "sender_full_name": "Richard Townley-O'Neill",
        "timestamp": 1612423224
    },
    {
        "content": "<p>Or a complication.</p>",
        "id": 225126371,
        "sender_full_name": "Richard Townley-O'Neill",
        "timestamp": 1612423244
    },
    {
        "content": "<p>I don't understand. the short definition is specified in the differential, so that's what's used</p>",
        "id": 225253057,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1612491447
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> I've created a rather better demo at <a href=\"http://build.fhir.org/ig/ci-collaborative/au-fhir-base-r4/branches/demo-of-inherited-test/StructureDefinition-au-practitionerrole.html\">http://build.fhir.org/ig/ci-collaborative/au-fhir-base-r4/branches/demo-of-inherited-test/StructureDefinition-au-practitionerrole.html</a></p>\n<p>In the differential there is no short or definition for PractitionerRole.identifier, so I expect snapshot to inherit them from core  <a href=\"http://hl7.org/fhir/R4/practitionerrole.html\">PractitionerRole</a>.<br>\nBut, in the snapshot short and definition have values from the <a href=\"http://hl7.org/fhir/R4/datatypes.html#Identifier\">Identifier</a> data type rather than from core <a href=\"http://hl7.org/fhir/R4/practitionerrole.html\">PractitionerRole</a>.</p>\n<p>I want to keep the short and definition from core. To do that I have to include them in differential. That is counter intuitive to me.</p>",
        "id": 225267877,
        "sender_full_name": "Richard Townley-O'Neill",
        "timestamp": 1612509584
    }
]