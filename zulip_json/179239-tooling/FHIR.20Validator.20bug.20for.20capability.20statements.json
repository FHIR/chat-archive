[
    {
        "content": "<p>I'm having some issues with the validator relating to capability statements. The capability statement that is returned is of kind \"instance\" and has both the software and implementation fields set, however despite that I see the below errors complaining about the kind field. The validator is being used in a JAVA springboot server and is loaded from import ca.uhn.fhir.validation.FhirValidator. I didn't use to have this issue before, it just started popping up and is now causing my test cases to fail. Any thoughts or advice on how to fix this?</p>\n<div class=\"codehilite\"><pre><span></span><code>[SingleValidationMessage[col=-1,row=-1,locationString=CapabilityStatement,message=[error] in /*:CapabilityStatement[namespace-uri()=&#39;http://hl7.org/fhir&#39;][1] @ CapabilityStatement cpb-16: If kind = requirements, implementation and software must be absent Test=not(f:kind/@value=&#39;instance&#39;) or (not(exists(f:implementation)) and not(exists(f:software))),severity=error]\n</code></pre></div>\n<div class=\"codehilite\"><pre><span></span><code>SingleValidationMessage[col=-1,row=-1,locationString=CapabilityStatement,message=[error] in /*:CapabilityStatement[namespace-uri()=&#39;http://hl7.org/fhir&#39;][1] @ CapabilityStatement cpb-15: If kind = capability, implementation must be absent, software must be present Test=not(f:kind/@value=&#39;instance&#39;) or (not(exists(f:implementation)) and exists(f:software)),severity=error]]\n</code></pre></div>\n<p>Edit: I think the tests being run for the validation and need to be changes as follows</p>\n<div class=\"codehilite\"><pre><span></span><code>Test=not(f:kind/@value=&#39;instance&#39;) or (not(exists(f:implementation)) and not(exists(f:software)))  ---&gt;  Test=(f:kind/@value=&#39;requirements&#39;) and (not(exists(f:implementation)) and not(exists(f:software)))\n</code></pre></div>\n<div class=\"codehilite\"><pre><span></span><code>Test=not(f:kind/@value=&#39;instance&#39;) or (not(exists(f:implementation)) and exists(f:software))  ---&gt;  Test=(f:kind/@value=&#39;capability&#39;) and (not(exists(f:implementation)) and exists(f:software))\n</code></pre></div>",
        "id": 262369820,
        "sender_full_name": "Sahil Malhotra",
        "timestamp": 1637611084
    },
    {
        "content": "<p>why this suddenly started happening is something that we can't help you with. It looks like it should happen from the POV of the validator. If the invariants are wrong, that's a subject to take up on <a class=\"stream\" data-stream-id=\"179280\" href=\"/#narrow/stream/179280-fhir.2Finfrastructure-wg\">#fhir/infrastructure-wg</a> (I think)</p>",
        "id": 262379814,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1637616417
    },
    {
        "content": "<p>I'll try forwarding this post in <a class=\"stream\" data-stream-id=\"179280\" href=\"/#narrow/stream/179280-fhir.2Finfrastructure-wg\">#fhir/infrastructure-wg</a> then to see if anyone there can help me out</p>",
        "id": 262466227,
        "sender_full_name": "Sahil Malhotra",
        "timestamp": 1637679345
    }
]