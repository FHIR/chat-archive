[
    {
        "content": "<p>The Subscription documentation suggests that multiple criteria are possible in a single Subscription resource...</p>\n<blockquote>\n<p>The criteria are Search <em>strings</em> that ...</p>\n</blockquote>\n<p>But no guidance or instruction how to delimit the strings.  For example for a provider directory push to a  local directory,  I would like to  query for the  all the updated Practitioners, PractitionerRoles and Endpoints in  a single subscription.</p>\n<ul>\n<li>Practitioner?address-postalcode=[zip list]</li>\n<li>PractitionerRole?practitioner.address-postalcode=[zip list]</li>\n<li>Endpoint?_has:PractitionerRole:endpoint:practitioner.address-postalcode=[zip list]</li>\n</ul>\n<p>something like...</p>\n<div class=\"codehilite\"><pre><span></span>{\n  &quot;resourceType&quot;: &quot;Subscription&quot;,\n  &quot;id&quot;: &quot;vhdir-connectathon-scenario-12&quot;,\n  &quot;status&quot;: &quot;requested&quot;,\n  &quot;contact&quot;: [\n    {\n      &quot;system&quot;: &quot;phone&quot;,\n      &quot;value&quot;: &quot;ext 4123&quot;\n    }\n  ],\n  &quot;end&quot;: &quot;2020-01-01T00:00:00Z&quot;,\n  &quot;reason&quot;: &quot;(push) healthcare directory data to multiple local directories&quot;,\n  &quot;criteria&quot;: &quot;Practitioner?address-postalcode=[zip list],PractitionerRole?practitioner.address-postalcode=[zip list],Endpoint?_has:PractitionerRole:endpoint:practitioner.address-postalcode=[zip list]&quot;,\n  &quot;channel&quot;: {\n    &quot;type&quot;: &quot;rest-hook&quot;,\n    &quot;endpoint&quot;: &quot;https://directory.com/sub-endpoint&quot;,\n    &quot;payload&quot;: &quot;application/fhir+json&quot;,\n    &quot;header&quot;: [\n      &quot;Authorization: Bearer secret-token-abc-123&quot;\n    ]\n  }\n}\n</pre></div>\n\n\n<p>spaces, commas? am I interpreting this correctly?</p>",
        "id": 156710121,
        "sender_full_name": "Eric Haas",
        "timestamp": 1548266429
    },
    {
        "content": "<p>that's misleading language. It's a set of search parameters in a single string</p>",
        "id": 156711594,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1548267637
    },
    {
        "content": "<p>so within the string are the  set of search parameters separated by a space?</p>",
        "id": 156724761,
        "sender_full_name": "Eric Haas",
        "timestamp": 1548277180
    },
    {
        "content": "<p>no a single normal search string</p>",
        "id": 156728798,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1548280651
    },
    {
        "content": "<p>let me restate this..  I  want all the updated Practitioners, PractiionerRoles and Endpoints.   Since this isn't possible in a single search expression - do I need 3 separate Subscriptions?</p>",
        "id": 156730382,
        "sender_full_name": "Eric Haas",
        "timestamp": 1548281924
    },
    {
        "content": "<p>I think so</p>",
        "id": 156730553,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1548282067
    },
    {
        "content": "<p>is there anything else?</p>",
        "id": 156730658,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1548282146
    },
    {
        "content": "<p>I'd like to know from others  whether or not is appropriate to have multiple criteria in a single subscription.  If I'm a directory, I'd like all the information pushed at once in a single bundle e.g  for referential integrity i'd expect the new Practitioner and all her PractitionerRoles and Endpoints to come as a bundle...  <span class=\"user-mention\" data-user-id=\"191367\">@Brian Postlethwaite</span> ?</p>",
        "id": 156735321,
        "sender_full_name": "Eric Haas",
        "timestamp": 1548286750
    },
    {
        "content": "<p>It wouldn’t make many difference. You’d get individual resources either way, and you can use multiple subscriptions for the same channel</p>",
        "id": 156761564,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1548324545
    },
    {
        "content": "<p>OK  I misunderstood how the REST Hook works,  to clarify: The subscription resource is  based upon a  <em>single</em> search string.  The subscription service  \" forwards\" ( e.g. updates)  a copy of <strong>each individual resource</strong>  to the nominated  endpoint aka FHIR Server  ( for the sake of argument -  a middleman server)   as opposed to rebundling a resultant  search bundle as a batch and  batching it.  The Subscriber would then pull from the middleman server  at its leisure.   With a middleman this workflow is more like directed polling than pure push.  if I described this correctly ,  I think it would be helpful to create trackers for:</p>\n<ul>\n<li>flesh out an example rest hook workflow a little more in the spec with pretty diagrams etc</li>\n<li>clarify the text to state one search: one subscription resource</li>\n<li>clarify that the payload is a resource and not a (search bundle)  if that is true</li>\n</ul>",
        "id": 156786350,
        "sender_full_name": "Eric Haas",
        "timestamp": 1548347920
    },
    {
        "content": "<p>BTW TY @GG</p>",
        "id": 156786587,
        "sender_full_name": "Eric Haas",
        "timestamp": 1548348107
    },
    {
        "content": "<p>depends on whether there's a payload or not - no payload = directed polling. Payload = push</p>",
        "id": 156800791,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1548359438
    }
]