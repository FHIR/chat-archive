[
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191401\">@Eric Haas</span> - changing title.</p>\n<p>Just thinking about this a bit more. What I think needs to happen is that when determining possible reference targets, CF will need to look at the ElementDefinition in the source (which will reference, say, argonaut Patient, retrieve the corresponding SD from a registry, determine the base type, and allow a reference to all resource instances conformant to the base type. So, for example, a target resource conformant to a CareConnect Patient would also be a valid target in this scenario, agree?</p>",
        "id": 153914888,
        "sender_full_name": "David Hay",
        "timestamp": 1508434150
    },
    {
        "content": "<p>putting it another way, the ability to make a reference will be based on the FHIR base type, irrespective of the profile in the source or the target...</p>",
        "id": 153914890,
        "sender_full_name": "David Hay",
        "timestamp": 1508434621
    },
    {
        "content": "<p>Yes, I agree with that</p>",
        "id": 153914913,
        "sender_full_name": "Eric Haas",
        "timestamp": 1508440927
    },
    {
        "content": "<p>OK - have uploaded an update that should work - can you take a look &amp; check?</p>",
        "id": 153915145,
        "sender_full_name": "David Hay",
        "timestamp": 1508529636
    },
    {
        "content": "<p>btw - a logical model can also be the target of a reference, provided it has an extension like this in it (off the root). This is added by the Logical Modeller, but no reason why it won't work if added to a model created outside of CF... (Though do remember that the Scenario Builder won't handle very complex models)...</p>\n<div class=\"codehilite\"><pre><span></span>{\n      &quot;url&quot;: &quot;http://clinfhir.com/fhir/StructureDefinition/baseTypeForModel&quot;,\n      &quot;valueString&quot;: &quot;Condition&quot;\n    }\n</pre></div>",
        "id": 153915168,
        "sender_full_name": "David Hay",
        "timestamp": 1508610184
    },
    {
        "content": "<p>I tested it out and got this alert....</p>",
        "id": 153915289,
        "sender_full_name": "Eric Haas",
        "timestamp": 1508739717
    },
    {
        "content": "<p><a href=\"/user_uploads/10155/hs4uiBQ-uYQxZ7T9or6ZY-uz/Screen-Shot-2017-10-22-at-11.21.12-PM.png\" target=\"_blank\" title=\"Screen-Shot-2017-10-22-at-11.21.12-PM.png\">Screen-Shot-2017-10-22-at-11.21.12-PM.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/hs4uiBQ-uYQxZ7T9or6ZY-uz/Screen-Shot-2017-10-22-at-11.21.12-PM.png\" target=\"_blank\" title=\"Screen-Shot-2017-10-22-at-11.21.12-PM.png\"><img src=\"/user_uploads/10155/hs4uiBQ-uYQxZ7T9or6ZY-uz/Screen-Shot-2017-10-22-at-11.21.12-PM.png\"></a></div>",
        "id": 153915291,
        "sender_full_name": "Eric Haas",
        "timestamp": 1508739810
    },
    {
        "content": "<p>Does your Logical Model have that URL? CF is looking for it on the HAPI sever using a query...    Also - what were you doing when you got the error?</p>",
        "id": 153915473,
        "sender_full_name": "David Hay",
        "timestamp": 1508782260
    },
    {
        "content": "<p>I'll check</p>",
        "id": 153915475,
        "sender_full_name": "Eric Haas",
        "timestamp": 1508783332
    },
    {
        "content": "<p>SB still not allowing a reference to the FHIR base type, irrespective of the profile in the source or the target...</p>",
        "id": 153915751,
        "sender_full_name": "Eric Haas",
        "timestamp": 1508872084
    },
    {
        "content": "<p><a href=\"/user_uploads/10155/Wv5Tiu7GOlSTCBqI0lrazV5F/10-24-2017-12-03-45-PM.png\" target=\"_blank\" title=\"10-24-2017-12-03-45-PM.png\">10-24-2017-12-03-45-PM.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/Wv5Tiu7GOlSTCBqI0lrazV5F/10-24-2017-12-03-45-PM.png\" target=\"_blank\" title=\"10-24-2017-12-03-45-PM.png\"><img src=\"/user_uploads/10155/Wv5Tiu7GOlSTCBqI0lrazV5F/10-24-2017-12-03-45-PM.png\"></a></div>",
        "id": 153915752,
        "sender_full_name": "Eric Haas",
        "timestamp": 1508872132
    },
    {
        "content": "<p>are both core resource types? I was able to create a reference from Communication -&gt; PlanDefinition...</p>",
        "id": 153915802,
        "sender_full_name": "David Hay",
        "timestamp": 1508885223
    },
    {
        "content": "<p>Communication is a profile with a reference to a profile on PlanDef.  SB would not let me use a core resource for PlanDef instead of the target profile on PlanDef.</p>",
        "id": 153915812,
        "sender_full_name": "Eric Haas",
        "timestamp": 1508887843
    },
    {
        "content": "<p>I uploaded this profile directly to hapi.  I did not add the extension you mentioned above</p>",
        "id": 153915813,
        "sender_full_name": "Eric Haas",
        "timestamp": 1508887899
    },
    {
        "content": "<p>OK so both are profiles? I think the issue is that without the extension, SB doesn't know what 'type' it is profiling- hence it cannot create the reference. If you  add the following extension to the planDef logical model, then you should be able to create the reference:  (assuming that the reference from Comunication is to PlanDefinition...</p>\n<div class=\"codehilite\"><pre><span></span>{\n      &quot;url&quot;: &quot;http://clinfhir.com/fhir/StructureDefinition/baseTypeForModel&quot;,\n      &quot;valueString&quot;: &quot;PlanDefinition&quot;\n    }\n</pre></div>",
        "id": 153915816,
        "sender_full_name": "David Hay",
        "timestamp": 1508889118
    },
    {
        "content": "<p>tried that and no luck -  Is there an example in the library of what I am trying to do?</p>",
        "id": 153915829,
        "sender_full_name": "Eric Haas",
        "timestamp": 1508891903
    },
    {
        "content": "<p>works great with core resources though which is what i did.</p>",
        "id": 153915831,
        "sender_full_name": "Eric Haas",
        "timestamp": 1508891949
    },
    {
        "content": "<p>dang! both profiles are in the hapi server? what id's are they?</p>",
        "id": 153915856,
        "sender_full_name": "David Hay",
        "timestamp": 1508905826
    },
    {
        "content": "<p>oh, and I assume you are not creating the LM's in the Logical Modeler? (You shouldn't need to of course)...</p>",
        "id": 153915857,
        "sender_full_name": "David Hay",
        "timestamp": 1508905923
    },
    {
        "content": "<p>no I created using IG published and uploaded to HAPI.   Ids are Communication = rr-communication  and PlanDefinition = rr-plandefinition.</p>",
        "id": 153916022,
        "sender_full_name": "Eric Haas",
        "timestamp": 1508945339
    },
    {
        "content": "<p>should be fixed now. I was confusing myself between logical models and profiles - it's logical models that need the extension, not profiles. btw - do note that CF won't handle complicated profiles all that well at the moment - sliced profiles will confuse it, and where the 'child' elements of a complex datatype are displayed it will offer them up for potential data entry - then barf at the result. Working on that, but it's kinda complex!</p>",
        "id": 153916039,
        "sender_full_name": "David Hay",
        "timestamp": 1508951091
    },
    {
        "content": "<p>the communication profile is indeed complicated</p>",
        "id": 153916068,
        "sender_full_name": "Eric Haas",
        "timestamp": 1508961866
    },
    {
        "content": "<p>Unfortunately when I create a link between the Communication Profile and PlanDefinition core resource SB pops into read only mode  :-(</p>",
        "id": 153916188,
        "sender_full_name": "Eric Haas",
        "timestamp": 1508975659
    },
    {
        "content": "<p>I am able to do want I want with the core resources right now so no need to hurry up and fix it right now.</p>",
        "id": 153916189,
        "sender_full_name": "Eric Haas",
        "timestamp": 1508975707
    },
    {
        "content": "<p>Thanks for your efforts so far</p>",
        "id": 153916190,
        "sender_full_name": "Eric Haas",
        "timestamp": 1508975728
    },
    {
        "content": "<p>no worries - glad for your testing! Did you download the scenario from the library, or create it directly?</p>",
        "id": 153916196,
        "sender_full_name": "David Hay",
        "timestamp": 1508979599
    },
    {
        "content": "<blockquote>\n<p>no worries - glad for your testing! Did you download the scenario from the library, or create it directly?</p>\n</blockquote>\n<p>from library</p>",
        "id": 153916284,
        "sender_full_name": "Eric Haas",
        "timestamp": 1509035285
    },
    {
        "content": "<p>That's the issue then. I need to work on tidying that up...</p>",
        "id": 153916293,
        "sender_full_name": "David Hay",
        "timestamp": 1509038019
    }
]