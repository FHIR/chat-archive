[
    {
        "content": "<p>I'm working on the AcitvityDefinition map and trying to map contributor (R3) to author, editor, etc (R4).</p>\n<p>I have the following conditions, but I still end up with all 4 fields in my R4 output as if all the conditions evaluate to true. The R3 input contains only one contributor of type \"author\".</p>\n<div class=\"codehilite\"><pre><span></span>  src.contributor as vs where vs.type = &quot;author&quot; then {\n    vs.contact -&gt; tgt.author;\n  };\n  src.contributor as vs where vs.type = &quot;editor&quot; then {\n    vs.contact -&gt; tgt.editor;\n  };\n  src.contributor as vs where vs.type = &quot;reviewer&quot; then {\n    vs.contact -&gt; tgt.reviewer;\n  };\n  src.contributor as vs where vs.type = &quot;endorser&quot; then {\n    vs.contact -&gt; tgt.endorser;\n  };\n</pre></div>",
        "id": 154021408,
        "sender_full_name": "Kenneth Myhra",
        "timestamp": 1543436158
    },
    {
        "content": "<p>copy how I did it in Library</p>",
        "id": 154021446,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1543456884
    },
    {
        "content": "<p>Thanks, that did the trick! One outstanding issue on ActivityDefintion before I can consider it done. I can't map ReferralRequest for attribute kind since it is not part of <a href=\"http://build.fhir.org/valueset-request-resource-types.html\" target=\"_blank\" title=\"http://build.fhir.org/valueset-request-resource-types.html\">http://build.fhir.org/valueset-request-resource-types.html</a>. Should I just ignore it?</p>",
        "id": 154021485,
        "sender_full_name": "Kenneth Myhra",
        "timestamp": 1543478140
    },
    {
        "content": "<p>it changes to...</p>",
        "id": 154021501,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1543479766
    },
    {
        "content": "<p>ServiceRequest</p>",
        "id": 154021505,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1543479833
    },
    {
        "content": "<p>Thanks!</p>",
        "id": 154021507,
        "sender_full_name": "Kenneth Myhra",
        "timestamp": 1543479894
    },
    {
        "content": "<p>I'm going to do the ReferralRequest --&gt; ServiceRequest now</p>",
        "id": 154021509,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1543479946
    },
    {
        "content": "<p>How do we usually merge a conceptmap back to R4 when two values have merged like in the ServiceRequest case. It now maps both ProcedureRequest and ReferralRequest to ServiceRequest, just pick one? :)</p>",
        "id": 154021515,
        "sender_full_name": "Kenneth Myhra",
        "timestamp": 1543480485
    },
    {
        "content": "<p>it's tricky... but there was a case in R3...</p>",
        "id": 154021516,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1543480550
    },
    {
        "content": "<p>look in implementations\\r2maps\\R3toR2\\ProcedureRequestDO.map</p>",
        "id": 154021519,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1543481121
    },
    {
        "content": "<p>Issued a PR for ActivityDefinition now. I'll look into the conceptmap thingy tonight</p>",
        "id": 154021537,
        "sender_full_name": "Kenneth Myhra",
        "timestamp": 1543483983
    },
    {
        "content": "<p>great. I just made a PR for working conversions for those resources</p>",
        "id": 154021563,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1543486269
    },
    {
        "content": "<blockquote>\n<p>look in implementations\\r2maps\\R3toR2\\ProcedureRequestDO.map</p>\n</blockquote>\n<p>Sorry for late answer, but I looked into this and there was no obvious discriminator like the intent attribute for ProcedureRequest that lets me convert back to R3 easily</p>",
        "id": 154026155,
        "sender_full_name": "Kenneth Myhra",
        "timestamp": 1545164246
    },
    {
        "content": "<p>no. it's an underlying challenge</p>",
        "id": 154026161,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1545165492
    }
]