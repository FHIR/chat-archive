[
    {
        "content": "<p>Hey everyone <span aria-label=\"wave\" class=\"emoji emoji-1f44b\" role=\"img\" title=\"wave\">:wave:</span> ! I'm new to FHIR and just got started with exploring Crucible. </p>\n<p>When doing a local deployment on Docker (on WSL), I keep getting the error \"Task runner waiting for crucible web app to load on port 3000\". I don't have any other local applications running on Port 3000. Has anyone else seen this issue and had luck resolving it?</p>\n<p>I also noticed that the package was last updated in July 2019 and there were a number of deprecation warnings when I installed. Could this also be why?</p>\n<p>Thanks,<br>\nShreshta</p>",
        "id": 219092641,
        "sender_full_name": "Shreshta Balachandar",
        "timestamp": 1607354413
    },
    {
        "content": "<p>Hi <span class=\"user-mention\" data-user-id=\"351108\">@Shreshta Balachandar</span>  -- thanks for letting us know.  I am getting what looks to be the same error on my machine, which is using Docker on a Mac.  If you run the following command: <code>docker-compose up mongo</code> are you getting something that looks like the following?</p>\n<div class=\"codehilite\" data-code-language=\"Bash\"><pre><span></span><code>mongo_1  <span class=\"p\">|</span> mongod --help <span class=\"k\">for</span> <span class=\"nb\">help</span> and startup options\nmongo_1  <span class=\"p\">|</span> <span class=\"m\">2020</span>-12-09T21:17:58.672+0000 <span class=\"o\">[</span>initandlisten<span class=\"o\">]</span> MongoDB starting : <span class=\"nv\">pid</span><span class=\"o\">=</span><span class=\"m\">1</span> <span class=\"nv\">port</span><span class=\"o\">=</span><span class=\"m\">27017</span> <span class=\"nv\">dbpath</span><span class=\"o\">=</span>/data/db <span class=\"m\">64</span>-bit <span class=\"nv\">host</span><span class=\"o\">=</span>4c61d4f2b0fb\nmongo_1  <span class=\"p\">|</span> <span class=\"m\">2020</span>-12-09T21:17:58.672+0000 <span class=\"o\">[</span>initandlisten<span class=\"o\">]</span> db version v2.6.12\nmongo_1  <span class=\"p\">|</span> <span class=\"m\">2020</span>-12-09T21:17:58.672+0000 <span class=\"o\">[</span>initandlisten<span class=\"o\">]</span> git version: d73c92b1c85703828b55c2916a5dd4ad46535f6a\nmongo_1  <span class=\"p\">|</span> <span class=\"m\">2020</span>-12-09T21:17:58.672+0000 <span class=\"o\">[</span>initandlisten<span class=\"o\">]</span> build info: Linux build5.ny.cbi.10gen.cc <span class=\"m\">2</span>.6.32-431.3.1.el6.x86_64 <span class=\"c1\">#1 SMP Fri Jan 3 21:39:27 UTC 2014 x86_64 BOOST_LIB_VERSION=1_49</span>\nmongo_1  <span class=\"p\">|</span> <span class=\"m\">2020</span>-12-09T21:17:58.672+0000 <span class=\"o\">[</span>initandlisten<span class=\"o\">]</span> allocator: tcmalloc\nmongo_1  <span class=\"p\">|</span> <span class=\"m\">2020</span>-12-09T21:17:58.672+0000 <span class=\"o\">[</span>initandlisten<span class=\"o\">]</span> options: <span class=\"o\">{}</span>\nmongo_1  <span class=\"p\">|</span> <span class=\"m\">2020</span>-12-09T21:17:58.673+0000 <span class=\"o\">[</span>initandlisten<span class=\"o\">]</span> journal <span class=\"nv\">dir</span><span class=\"o\">=</span>/data/db/journal\nmongo_1  <span class=\"p\">|</span> <span class=\"m\">2020</span>-12-09T21:17:58.673+0000 <span class=\"o\">[</span>initandlisten<span class=\"o\">]</span> recover : no journal files present, no recovery needed\nmongo_1  <span class=\"p\">|</span> <span class=\"m\">2020</span>-12-09T21:17:58.673+0000 <span class=\"o\">[</span>initandlisten<span class=\"o\">]</span>\nmongo_1  <span class=\"p\">|</span> <span class=\"m\">2020</span>-12-09T21:17:58.673+0000 <span class=\"o\">[</span>initandlisten<span class=\"o\">]</span> ERROR: Insufficient free space <span class=\"k\">for</span> journal files\nmongo_1  <span class=\"p\">|</span> <span class=\"m\">2020</span>-12-09T21:17:58.673+0000 <span class=\"o\">[</span>initandlisten<span class=\"o\">]</span> Please make at least 3379MB available in /data/db/journal or use --smallfiles\nmongo_1  <span class=\"p\">|</span> <span class=\"m\">2020</span>-12-09T21:17:58.673+0000 <span class=\"o\">[</span>initandlisten<span class=\"o\">]</span>\nmongo_1  <span class=\"p\">|</span> <span class=\"m\">2020</span>-12-09T21:17:58.673+0000 <span class=\"o\">[</span>initandlisten<span class=\"o\">]</span> exception in initAndListen: <span class=\"m\">15926</span> Insufficient free space <span class=\"k\">for</span> journals, terminating\nmongo_1  <span class=\"p\">|</span> <span class=\"m\">2020</span>-12-09T21:17:58.673+0000 <span class=\"o\">[</span>initandlisten<span class=\"o\">]</span> dbexit:\nmongo_1  <span class=\"p\">|</span> <span class=\"m\">2020</span>-12-09T21:17:58.673+0000 <span class=\"o\">[</span>initandlisten<span class=\"o\">]</span> shutdown: going to close listening sockets...\nmongo_1  <span class=\"p\">|</span> <span class=\"m\">2020</span>-12-09T21:17:58.673+0000 <span class=\"o\">[</span>initandlisten<span class=\"o\">]</span> shutdown: going to flush diaglog...\nmongo_1  <span class=\"p\">|</span> <span class=\"m\">2020</span>-12-09T21:17:58.673+0000 <span class=\"o\">[</span>initandlisten<span class=\"o\">]</span> shutdown: going to close sockets...\nmongo_1  <span class=\"p\">|</span> <span class=\"m\">2020</span>-12-09T21:17:58.673+0000 <span class=\"o\">[</span>initandlisten<span class=\"o\">]</span> shutdown: waiting <span class=\"k\">for</span> fs preallocator...\nmongo_1  <span class=\"p\">|</span> <span class=\"m\">2020</span>-12-09T21:17:58.673+0000 <span class=\"o\">[</span>initandlisten<span class=\"o\">]</span> shutdown: lock <span class=\"k\">for</span> final commit...\nmongo_1  <span class=\"p\">|</span> <span class=\"m\">2020</span>-12-09T21:17:58.673+0000 <span class=\"o\">[</span>initandlisten<span class=\"o\">]</span> shutdown: final commit...\nmongo_1  <span class=\"p\">|</span> <span class=\"m\">2020</span>-12-09T21:17:58.673+0000 <span class=\"o\">[</span>initandlisten<span class=\"o\">]</span> shutdown: closing all files...\nmongo_1  <span class=\"p\">|</span> <span class=\"m\">2020</span>-12-09T21:17:58.673+0000 <span class=\"o\">[</span>initandlisten<span class=\"o\">]</span> closeAllFiles<span class=\"o\">()</span> finished\nmongo_1  <span class=\"p\">|</span> <span class=\"m\">2020</span>-12-09T21:17:58.673+0000 <span class=\"o\">[</span>initandlisten<span class=\"o\">]</span> journalCleanup...\nmongo_1  <span class=\"p\">|</span> <span class=\"m\">2020</span>-12-09T21:17:58.673+0000 <span class=\"o\">[</span>initandlisten<span class=\"o\">]</span> removeJournalFiles\nmongo_1  <span class=\"p\">|</span> <span class=\"m\">2020</span>-12-09T21:17:58.674+0000 <span class=\"o\">[</span>initandlisten<span class=\"o\">]</span> shutdown: removing fs lock...\nmongo_1  <span class=\"p\">|</span> <span class=\"m\">2020</span>-12-09T21:17:58.675+0000 <span class=\"o\">[</span>initandlisten<span class=\"o\">]</span> dbexit: really exiting now\n</code></pre></div>",
        "id": 219399591,
        "sender_full_name": "Robert Scanlon",
        "timestamp": 1607548809
    },
    {
        "content": "<p>Also, are you using WSL2 (I assume if you are using Docker?)</p>",
        "id": 219399749,
        "sender_full_name": "Robert Scanlon",
        "timestamp": 1607548884
    },
    {
        "content": "<p>Hi <span class=\"user-mention\" data-user-id=\"192576\">@Robert Scanlon</span> - Yes I am on WSL2.</p>\n<p>I followed the instructions found on GitHub here: <a href=\"https://github.com/fhir-crucible/crucible#docker-installation\">https://github.com/fhir-crucible/crucible#docker-installation</a>.</p>\n<p>I ran the commands in the following order:<br>\n<code>docker-compose build</code><br>\n<code>docker-compose up</code> (Getting the error:  \"Task runner waiting for crucible web app to load on port 3000\")</p>\n<p>and then again in this order:<br>\n<code>docker-compose build</code><br>\n<code>docker-compose up mongo</code> (this exited with code 139 quickly)<br>\n<code>docker-compose up</code> (Getting the error:  \"Task runner waiting for crucible web app to load on port 3000\", and the mongo instance also shut down immediately here)</p>\n<p>I did not see the same error that you showed above.</p>\n<p>However a new error I noticed this time said: \"Could not connect to a primary node for replica set\" with an error marked ConnectionFailure. Is this because the Mongo instance isn't staying attached?</p>",
        "id": 219401677,
        "sender_full_name": "Shreshta Balachandar",
        "timestamp": 1607549714
    },
    {
        "content": "<p>It is likely an issue with the Mongo container, since that is what is happening on my machine, but I just wanted to verify that.  Could you provide the last 25 lines or so of <code>docker-compose logs mongo</code>?</p>",
        "id": 219402138,
        "sender_full_name": "Robert Scanlon",
        "timestamp": 1607549925
    },
    {
        "content": "<p>Tried the command and the only thing I see is: \"Attaching to crucible_mongo_1\"</p>",
        "id": 219406964,
        "sender_full_name": "Shreshta Balachandar",
        "timestamp": 1607552104
    },
    {
        "content": "<p>I took a look and it seems that the mongo container we are referencing is hopelessly old and shouldn't be used.  If you update <code>docker-compose.yml</code> and change the line that says \"mongo:2.6\" to \"mongo:3.6\", that seemed to work on my WSL2 machine (then <code>docker-compose up</code> again). The only thing that appears to not work for the 3.6 version of mongo is some roll-up stats on the main page, which  doesn't affect its ability to run or display test results.</p>",
        "id": 220050570,
        "sender_full_name": "Robert Scanlon",
        "timestamp": 1608070455
    },
    {
        "content": "<p>Could you give that a shot?</p>",
        "id": 220050581,
        "sender_full_name": "Robert Scanlon",
        "timestamp": 1608070460
    },
    {
        "content": "<p>I assume this isn't on the docker hub registry?</p>",
        "id": 221708741,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1609884661
    },
    {
        "content": "<p>Crucible itself?  It wasn't, but in case it is useful I just linked it up so that it is published here: <a href=\"https://hub.docker.com/repository/docker/projectcrucible/crucible\">https://hub.docker.com/repository/docker/projectcrucible/crucible</a></p>",
        "id": 221777100,
        "sender_full_name": "Robert Scanlon",
        "timestamp": 1609945532
    },
    {
        "content": "<p>Hey Robert, thanks for your note! Apologies for the delay. I have tested it out against a sample server and everything works well. Really appreciate it!</p>",
        "id": 222424264,
        "sender_full_name": "Shreshta Balachandar",
        "timestamp": 1610455114
    }
]