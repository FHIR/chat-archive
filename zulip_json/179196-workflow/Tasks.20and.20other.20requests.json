[
    {
        "content": "<p>Since we've identified many places where a Task might be the only resource tracking a request, is there a reason not to allow <code>Observation.basedOn</code> to reference a task?</p>",
        "id": 243854567,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1624573763
    },
    {
        "content": "<p>(And presumably this question applies to many other references to request-y type stuff.)</p>",
        "id": 243854593,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1624573793
    },
    {
        "content": "<p>basedOn is about the flow of 'authorization'.  In general Tasks drive workflow, but not authorization.  If an Event is linked with a Task, it's typically done via Task.output.  Do you have a use-case where there would be an Observation with <em>no</em> corresponding ServiceRequest or other driving Request instance where the authorization would flow only from a Task?</p>",
        "id": 243859793,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1624577795
    },
    {
        "content": "<p>I have use cases where things like observations and questionnaire responses might be associated with a task. Earlier you were saying how for things like communication request you would just skip the request resource and use a task to model the workflow, so I'm trying to figure out where the boundaries are.</p>",
        "id": 243860390,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1624578212
    },
    {
        "content": "<p>In practice I could create all kinds of pseudo request resources artificially -- tasks, service requests, etc. It's frustrating to have to pick the \"right\" kind of request bucket in circumstances where all you really are going to know is a code. Some codes might have to do with nutrition, others might have to do with procedures, others might have to do with at home exercises or meds...</p>",
        "id": 243860513,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1624578304
    },
    {
        "content": "<p>I was thinking that task was the way to get around this pain.</p>",
        "id": 243860524,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1624578317
    },
    {
        "content": "<p>Ok.  The question then is whether there's a reason for the Event to point to the Task when the typical behavior is for the Task to point to the Event (and we prefer not to have bi-directional references).</p>",
        "id": 243862358,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1624579798
    },
    {
        "content": "<p>The use case here has to do with demonstrating (at the time of creating the event) that it is being created because of an existing task/request/whatever</p>",
        "id": 243862803,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1624580113
    },
    {
        "content": "<p>And is linking it from the Task not sufficient?</p>",
        "id": 243869532,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1624588415
    },
    {
        "content": "<p>There will be an ongoing stream of data arriving. Can't easily link to all of it from the task.</p>",
        "id": 243869756,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1624588719
    },
    {
        "content": "<p>I guess I just don't understand why we <em>wouldn't</em> allow pointing to a task as the basis for an Observation</p>",
        "id": 243869771,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1624588751
    },
    {
        "content": "<p>You absolutely can.  It just creates a challenge of Task pointing to the Observation as output and Observation pointing to the Task as basedOn - which is something we generally prefer not to do.</p>",
        "id": 243913908,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1624627041
    },
    {
        "content": "<blockquote>\n<p>You absolutely can</p>\n</blockquote>\n<p><a href=\"/user_uploads/10155/JchhA_bLfRpdPsNd9a4IVCKu/image.png\">image.png</a> </p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/JchhA_bLfRpdPsNd9a4IVCKu/image.png\" title=\"image.png\"><img src=\"/user_uploads/10155/JchhA_bLfRpdPsNd9a4IVCKu/image.png\"></a></div><p>How? There's <a href=\"http://build.fhir.org/observation-definitions.html#Observation.basedOn\">no option</a> for Reference(Task).</p>",
        "id": 243959376,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1624649099
    },
    {
        "content": "<p>I think Lloyd means that you can keep adding links to Observation to Task.output</p>",
        "id": 243961025,
        "sender_full_name": "Vassil Peytchev",
        "timestamp": 1624649911
    },
    {
        "content": "<p>Right now you'd have to do it with an extension.  I'm saying that if we decide it's necessary, it can be done and if we decide the need is common enough, it can be added to core.  I just think it creates challenges with bi-directional references and will also create confusion in cases where there's both a Request and a Task.</p>",
        "id": 243981764,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1624663849
    },
    {
        "content": "<p>Right now if you want to represent a task to for patient to create observation X  without extensions you would need:</p>\n<p><a href=\"/user_uploads/10155/DjuBppxwLDCL2dBsFzf-w5xI/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/DjuBppxwLDCL2dBsFzf-w5xI/image.png\" title=\"image.png\"><img src=\"/user_uploads/10155/DjuBppxwLDCL2dBsFzf-w5xI/image.png\"></a></div>",
        "id": 244096843,
        "sender_full_name": "Eric Haas",
        "timestamp": 1624847727
    },
    {
        "content": "<p>Looking at <a href=\"http://hl7.org/fhir/us/davinci-hrex/2020Sep/exchanging.html#decision-points\">this decision tree</a>  It does not cover pushing data where the push may be rejected or accepted or may need human review and may be async.   This tree would lead me to propose an operation, but I think <em>Task</em> could do the same thing.   The use case is \"solicited or unsolicited\" Patient Write/ \"unsolicited\" Provider - Provider write (CDEX and Argo).   A basic FHIR RESTful CREATE is looking less feasible unless it is really an operation in disguise ( which I am fine with as long as we are all aware what it is)</p>",
        "id": 244166336,
        "sender_full_name": "Eric Haas",
        "timestamp": 1624895858
    },
    {
        "content": "<p>I think the decision tree has some changes to it. I was trying to reconcile it with decisions related to workflow management, but ran out of time, and didn't want to hold up the IG just for it. I think once you add workflow considerations to it, it may become a matrix, and not a tree.</p>",
        "id": 244175551,
        "sender_full_name": "Vassil Peytchev",
        "timestamp": 1624900048
    },
    {
        "content": "<p>If the Task is saying \"please fulfill this request\", the link from Task would be 'focus', not 'basedOn'.</p>",
        "id": 244177106,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1624900748
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191320\">Lloyd McKenzie</span> <a href=\"#narrow/stream/179196-workflow/topic/Tasks.20and.20other.20requests/near/244177106\">said</a>:</p>\n<blockquote>\n<p>If the Task is saying \"please fulfill this request\", the link from Task would be 'focus', not 'basedOn'.</p>\n</blockquote>\n<p>always a source of confusion for me  since it is anti-pattern to all other event resources.</p>\n<p>see <a href=\"http://jira.hl7.org/browse/FHIR-29636\">FHIR-29636</a></p>",
        "id": 244321439,
        "sender_full_name": "Eric Haas",
        "timestamp": 1624989472
    },
    {
        "content": "<p><a href=\"/user_uploads/10155/7iAuxSORGs7nTrVxWayIzzM_/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/7iAuxSORGs7nTrVxWayIzzM_/image.png\" title=\"image.png\"><img src=\"/user_uploads/10155/7iAuxSORGs7nTrVxWayIzzM_/image.png\"></a></div>",
        "id": 244322314,
        "sender_full_name": "Eric Haas",
        "timestamp": 1624989803
    },
    {
        "content": "<p>Also, the Observation is the output of the Task, isn't it?</p>",
        "id": 244323983,
        "sender_full_name": "Vassil Peytchev",
        "timestamp": 1624990433
    },
    {
        "content": "<p>yes this only show the\"pre-completed\" state.</p>",
        "id": 244334177,
        "sender_full_name": "Eric Haas",
        "timestamp": 1624994843
    },
    {
        "content": "<p>Task.basedOn is \"where does the authorization for this flow from\".  Task.focus is \"what am I supposed to perform the Task.code action on\".  When you're seeking fulfillment, the thing to fulfill is definitely the latter.</p>",
        "id": 244344639,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1624999266
    },
    {
        "content": "<p>I've got a slight mapping issue. What I want to represent is a prescription order fulfilment which can have several medicationrequests.</p>\n<p>At present I've put the medication requests in input and used a snomed procedure code to represent the Task type. I don't have a focus.</p>\n<p>My use of type in task.input.type doesn't feel right, it feels like it's a task type.</p>",
        "id": 253931029,
        "sender_full_name": "Kevin Mayfield",
        "timestamp": 1632042722
    },
    {
        "content": "<p>Focus I'm using to link to groupIdentifier</p>",
        "id": 253931809,
        "sender_full_name": "Kevin Mayfield",
        "timestamp": 1632043636
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191687\">Kevin Mayfield</span> <a href=\"#narrow/stream/179196-workflow/topic/Tasks.20and.20other.20requests/near/253931029\">said</a>:</p>\n<blockquote>\n<p>I've got a slight mapping issue. What I want to represent is a prescription order fulfilment which can have several medicationrequests.</p>\n<p>At present I've put the medication requests in input and used a snomed procedure code to represent the Task type. I don't have a focus.</p>\n<p>My use of type in task.input.type doesn't feel right, it feels like it's a task type.</p>\n</blockquote>\n<p>Wouldn't the requests go into basedOn?</p>",
        "id": 253932005,
        "sender_full_name": "Parnesh Raniga",
        "timestamp": 1632043855
    },
    {
        "content": "<p>The requests definitely don't go into 'basedOn'.  That would be \"what authorizes you to ask for fulfillment\".  It would never be \"what you're asking to be fulfilled\".  What you want to be fulfilled is always Task.focus.</p>\n<p>If you want to ask for 3 distinct orders to be fulfilled, you'll need 3 distinct Tasks, as a different decision could be made about each of them.  If you want to treat the fulfillments as part of an overall request, you could certainly make them sub-tasks.</p>",
        "id": 253953906,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1632067180
    },
    {
        "content": "<p>Thanks <span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> . I got my wires crossed between \"what authorizes you to ask for fullfillment\" and \"what you're asking to be fulfilled\".</p>",
        "id": 253981781,
        "sender_full_name": "Parnesh Raniga",
        "timestamp": 1632096454
    },
    {
        "content": "<p>Do we ever need medication requests to be fulfilled as a single entity? It all or nothing.</p>\n<p>I’m after discounting that as a use case.</p>",
        "id": 254491473,
        "sender_full_name": "Kevin Mayfield",
        "timestamp": 1632381280
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191687\">@Kevin Mayfield</span>, I'm not quite following your question</p>",
        "id": 254622510,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1632440415
    },
    {
        "content": "<p>I need an example. I was thinking drug A and B need to be fulfilled together.</p>",
        "id": 254658348,
        "sender_full_name": "Kevin Mayfield",
        "timestamp": 1632465591
    },
    {
        "content": "<p>So you're asking if there's a business requirement for that sort of behavior?  Might be better asking that on <a class=\"stream\" data-stream-id=\"179249\" href=\"/#narrow/stream/179249-Medication\">#Medication</a></p>",
        "id": 254730143,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1632500127
    },
    {
        "content": "<p>thanks. I'll check internally - gut feeling is it may happen but not often.</p>",
        "id": 255178537,
        "sender_full_name": "Kevin Mayfield",
        "timestamp": 1632816796
    }
]