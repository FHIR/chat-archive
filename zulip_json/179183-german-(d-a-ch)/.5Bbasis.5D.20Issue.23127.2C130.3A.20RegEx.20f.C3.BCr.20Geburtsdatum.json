[
    {
        "content": "<p><a href=\"https://github.com/hl7germany/basisprofil-de/issues/127\" target=\"_blank\" title=\"https://github.com/hl7germany/basisprofil-de/issues/127\">https://github.com/hl7germany/basisprofil-de/issues/127</a><br>\nKommentar:</p>\n<blockquote>\n<p>Gemäß der eGK-Spezifikation sind folgende Konstellationen des Geburtsdatums möglich:<br>\nnur der Tag ist 00<br>\nTag und Monat sind jeweils 00 --&gt; 00.00<br>\nTag, Monat und Jahr sind 00 --&gt; 00.00.0000<br>\nDer reguläre Ausdruck des date-Datentyps (-?[0-9]{4}(-(0[1-9]|1[0-2])(-(0[0-9]|[1-2][0-9]|3[0-1]))?)?) erlaubt den Tag 00, allerdings nicht den Monat 00. In bestimmten Fällen ist es notwendig das Geburtsdatum 00.00.0000 zu übertragen. Daher wäre es von großem Vorteil dieses zu ermöglichen.</p>\n</blockquote>\n<p>eingereicht von <span class=\"user-mention\" data-user-id=\"194307\">@Willi Roos</span><br>\nDuplikat von <a href=\"https://github.com/hl7germany/basisprofil-de/issues/130\" target=\"_blank\" title=\"https://github.com/hl7germany/basisprofil-de/issues/130\">https://github.com/hl7germany/basisprofil-de/issues/130</a><br>\neingereicht von <span class=\"user-mention\" data-user-id=\"194649\">@Michael Sauer</span></p>",
        "id": 154580229,
        "sender_full_name": "Simone Heckmann",
        "timestamp": 1546877705
    },
    {
        "content": "<p>Hier geht es allgemein um die Repräsentation von fehlenden Werten im Datentyp <code>date</code><br>\nSpezifikation hier: <a href=\"http://hl7.org/implement/standards/fhir/datatypes.html#date\" target=\"_blank\" title=\"http://hl7.org/implement/standards/fhir/datatypes.html#date\">http://hl7.org/implement/standards/fhir/datatypes.html#date</a></p>",
        "id": 154580398,
        "sender_full_name": "Simone Heckmann",
        "timestamp": 1546877853
    },
    {
        "content": "<p>In der aktuellen Version R4 ist der Wert \"00\" für Tag nicht mehr zulässig. Ich vermute, dass das ein Fehler in der RegEx von STU3 war.<br>\nIn FHIR werden fehlende Datums-und Monatswerte grundsätzlich weggelassen.<br>\nFür die von Michael zitierte Beispiele würde folgendes Mapping gelten:</p>\n<p><em>VSDM -&gt; FHIR</em><br>\nYYYY0000 -&gt; YYYY<br>\nYYYYMM00 -&gt; YYYY-MM<br>\n YYYYMMDD -&gt; YYYY-MM-DD</p>\n<p>Für den VSDM Wert 000000000 würde in FHIR das jeweilige Datumsfeld schlicht weggelassen.<br>\nFalls der Nullwert in VSDM eine bestimmte Semantik hat, die sich durch das Weglassen des Datums nicht ausdrücken lässt, müsste man ggf. zur nullFlavor-Extension greifen:<br>\n<a href=\"http://hl7.org/implement/standards/fhir/extension-iso21090-nullflavor.html\" target=\"_blank\" title=\"http://hl7.org/implement/standards/fhir/extension-iso21090-nullflavor.html\">http://hl7.org/implement/standards/fhir/extension-iso21090-nullflavor.html</a><br>\nDann hätte man in FHIR ind er Instanz ein Datumsfeld mit einer Extension anstelle eines Wertes.</p>",
        "id": 154581411,
        "sender_full_name": "Simone Heckmann",
        "timestamp": 1546878716
    },
    {
        "content": "<p>Innerhalb der VSDM \"Persönlich Versichertendaten\" steht Geburtsdatum auf 1..1, daher der Behelf mit 000000000 wenn nicht verfügbar/bekannt.<br>\n+1 für dein Mapping, für 000000000 lassen wir birtDate einfach weg.</p>",
        "id": 154582472,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1546879546
    },
    {
        "content": "<p>...also in der Konsequenz die Kardinalität von birthDate in VSDM auf 0..1 korrigieren?</p>",
        "id": 154582589,
        "sender_full_name": "Simone Heckmann",
        "timestamp": 1546879651
    },
    {
        "content": "<p>ja</p>",
        "id": 154582731,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1546879792
    },
    {
        "content": "<p>Viele abgeleitete Profile (z.B. Medikationsplan) setzen die Kardinalität für das Geburtsdatum auf 1..1. Weglassen bei Geburtstag 00000000 ist daher nicht zielführend.</p>",
        "id": 154597875,
        "sender_full_name": "Michael Sauer",
        "timestamp": 1546891998
    },
    {
        "content": "<p>Der Medikationsplan kann durchaus strengere Vorgaben machen als der VSDM Datensatz, wenn das so gewünscht/bzw. erforderlich ist.<br>\nWenn jedoch ein fehlendes Geburtsdatum zulässig ist, dann muss die Kardinalität auf 0..1 gesetzt werden. Ich gehe davon aus, dass die Entscheidung, das im Medikationsplan nicht zuzulassen, bewusst getroffen wurde. (<span class=\"user-mention\" data-user-id=\"191532\">@dr Kai U. Heitmann</span> ?)</p>\n<p>Wenn man erlaubt, dass Elemente fehlen dürfen, wenn die Werte unbekannt sind, sollte das Element zusätzlich als \"MustSupport\" geflagged werden, da dies impliziert, dass das Geburtsdatum - sofern bekannt - immer übermittelt werden muss, aber eben auch fehlen kann, wenn unbekannt.</p>\n<p>Das Problem ist dann halt nur, dass sich algorithmisch in der Validierung nicht mehr unterscheiden lässt, ob das Datum aus Nachlässigkeit oder gerechtfertigt weggelassen wurde.</p>\n<p>Wollte man erzielen, dass die Instanzen <em>immer</em> ein Geburtsdatum haben, außer in ganz bestimmten, sehr seltenen Ausnahmefällen, in denen der fehlende Wert dann auch explizit als fehlend gekennzeichnet werden soll, dann würde ich empfehlen, die Kardinalität auf 1..1 zu belassen und in den Sonderfällen dann die nullFlavor-Extension zu verwenden um die Validierung zu \"überlisten\".</p>",
        "id": 154598272,
        "sender_full_name": "Simone Heckmann",
        "timestamp": 1546892592
    },
    {
        "content": "<p>Da 00000000 bedeutet, dass die konkrete Person ihr Geburtsdatum nicht kennt (z.B. weil sie in einem Land geboren wurden in dem das keine Rolle spielt) würde ich vorschlagen es bei 1..1 zu belassen und die nullFlavor-Extension zu verwenden.</p>",
        "id": 154599088,
        "sender_full_name": "Michael Sauer",
        "timestamp": 1546893403
    },
    {
        "content": "<p>Daher meine Frage nach der Semantik. Wäre das dann sinngemäß <br>\n<code>ASKU  asked but unknown   Information was sought but not found (e.g., patient was asked but didn't know)</code><br>\naus <a href=\"http://hl7.org/implement/standards/fhir/v3/NullFlavor/vs.html\" target=\"_blank\" title=\"http://hl7.org/implement/standards/fhir/v3/NullFlavor/vs.html\">http://hl7.org/implement/standards/fhir/v3/NullFlavor/vs.html</a>?</p>",
        "id": 154599314,
        "sender_full_name": "Simone Heckmann",
        "timestamp": 1546893584
    },
    {
        "content": "<p>NullPointerExceptions, ick hör euch trapsen... <span class=\"emoji emoji-1f628\" title=\"scared\">:scared:</span></p>",
        "id": 154599525,
        "sender_full_name": "Simone Heckmann",
        "timestamp": 1546893725
    },
    {
        "content": "<p>Wo steht eigentlich die Zulässigkeit und Semantik von 00000000 als Geburtsdatum ??<br>\nIn der Spezifikation des Fachmoduls VSDM Version 2.4 vom 26.10.2018 jedenfalls nicht:</p>\n<blockquote>\n<p>Im Feld Geburtsdatum ist die Angabe von Tag 00 und Monat 00 zulässig. Im <br>\nMonat ist 00 nur in Verbindung mit Tag 00 zulässig.</p>\n</blockquote>\n<p>Aus <a href=\"https://www.vesta-gematik.de/standard/formhandler/324/gemSpec_FM_VSDM_V2_4_0.pdf\" target=\"_blank\" title=\"https://www.vesta-gematik.de/standard/formhandler/324/gemSpec_FM_VSDM_V2_4_0.pdf\">https://www.vesta-gematik.de/standard/formhandler/324/gemSpec_FM_VSDM_V2_4_0.pdf</a> S. 104</p>",
        "id": 154633784,
        "sender_full_name": "Peter Scholz",
        "timestamp": 1546940636
    },
    {
        "content": "<blockquote>\n<p>Wo steht eigentlich die Zulässigkeit und Semantik von 00000000 als Geburtsdatum ??</p>\n</blockquote>\n<p>Siehe z.B. <br>\n<a href=\"https://fachportal.gematik.de/fileadmin/user_upload/fachportal/files/Spezifikationen/Basis-Rollout/Fachanwendungen/SRQ_1231_gemFA_VSDM_V2_5_0_VSD_Schemaversion_5_2-DMP.pdf\" target=\"_blank\" title=\"https://fachportal.gematik.de/fileadmin/user_upload/fachportal/files/Spezifikationen/Basis-Rollout/Fachanwendungen/SRQ_1231_gemFA_VSDM_V2_5_0_VSD_Schemaversion_5_2-DMP.pdf\">https://fachportal.gematik.de/fileadmin/user_upload/fachportal/files/Spezifikationen/Basis-Rollout/Fachanwendungen/SRQ_1231_gemFA_VSDM_V2_5_0_VSD_Schemaversion_5_2-DMP.pdf</a></p>\n<p>Wenn ich mich recht erinnere, ist das mit Schmea-Version 5.2. dazu gekommen. (d.h. ab VSDM V2.5 ff), Seite 59 (Regex)</p>",
        "id": 154649793,
        "sender_full_name": "Michael Sauer",
        "timestamp": 1546959419
    },
    {
        "content": "<p>Die Angaben in dem Vesta-Link beziehen sich auf die alte Krankenversichertenkarte...</p>",
        "id": 154650139,
        "sender_full_name": "Michael Sauer",
        "timestamp": 1546959767
    },
    {
        "content": "<p>Die KBV schreibt es auch (ftp://ftp.kbv.de/ita-update/Abrechnung/KBV_ITA_VGEX_Datensatzbeschreibung_KVDT.pdf, Seite 104): \"Geburtsdaten in der Form JJJJMM00, JJJJ0000 und 00000000 sind gültige Datumsformate.Anlass ist die Ausgabe von Versichertenkarten mit unvollständigen Geburtsdaten, z. B. ohne Angabe eines Geburtsmonats und/oder eines Geburtstages.\"</p>\n<p>Allerdings steht in der DEÜV auch, dass ein Geburtsjahr in jedem Fall angegeben werden muss. Dann wäre abweichend von oben genanntem 00000000 nur für Menschen erlaubt, die im Jahre 0 geboren wurden</p>",
        "id": 154651329,
        "sender_full_name": "Michael Sauer",
        "timestamp": 1546960880
    },
    {
        "content": "<p>Unter diesen Gesichtspunkten wäre ich auch für die Kardinalität 0:1 (die KBV könnte dann den von ihr verwendeten Ersatzwert 0000000 auf kein Gebursdatum mappen) und mindestens der Angabe eines Jahres zu fordern - wie auch im Original-FHIR-Standard vorgesehen.</p>",
        "id": 154652078,
        "sender_full_name": "Michael Sauer",
        "timestamp": 1546961557
    },
    {
        "content": "<p>Im Medikationsplan PLUS ist das Geburtsdatum 1..1 R, also es kann ein nullFlavor angegeben werden, es muss aber unterstützt werden. Grundsätzlich können Geburtsdatumsangaben nur das Jahr YYYY betreffen oder Jahr+Monat YYYYMM oder ein konkretes Datum YYYYMMDD, in der Geburtshilfe auch noch mit Stunde und Minute. Nullen wie 00 sind im Geburtsdatum nicht vorzusehen.<br>\nWahrscheinlich ist im Medikationsplan PLUS in FHIR Geburtsdatum 0..1 und must-support das Pendant zu 1..1 R im Szenario oder man führt tatsächlich eine nullFlavor Extension hinzu.</p>",
        "id": 154661747,
        "sender_full_name": "dr Kai U. Heitmann",
        "timestamp": 1546969212
    },
    {
        "content": "<blockquote>\n<p>Unter diesen Gesichtspunkten wäre ich auch für die Kardinalität 0:1 (die KBV könnte dann den von ihr verwendeten Ersatzwert 0000000 auf kein Gebursdatum mappen) und mindestens der Angabe eines Jahres zu fordern - wie auch im Original-FHIR-Standard vorgesehen.</p>\n</blockquote>\n<p>Das verstehe ich jetzt nicht ganz... Wenn stets mindestens die Angabe eines Jahres gefordert ist, dann können wir doch das Geburtsdatum auf 1..1 lassen, oder? YYYY ist auch in FHIR ein zulässiges Datum.<br>\nFür den <em>extremen</em> Ausnahmefall, dass wirklich nicht einmal das Jahr bekannt ist, wäre dann die NullFlavor-Extension der allerletze Ausweg. Aber auch das bei einer Kardinalität von 1..1</p>",
        "id": 154664746,
        "sender_full_name": "Simone Heckmann",
        "timestamp": 1546971673
    },
    {
        "content": "<p>Das GebDatum in der Gematik ist ein ISO8601 Datenfeld. Das Problem ist die RegEx der Gematik die nicht mit der FHIR Regex kompatibel ist, sie erzwingt immer einen 8 stelligen Date Wert.<br>\nDie Gematik setzt alles auf \"00\" bzw. \"0000\" wenn Teile des Datums nicht bekannt  sind.  Also komplett unbekannt = 00000000, nur das Jahr: xxxx0000, nur Jahr Monat: xxxxxx00.<br>\nFür mich wäre von daher 00000000 = Geburtsdatum nicht bekannt/verfügbar -&gt; in FHIR das Geburtsdatum wegzulassen, also die Kardinalität auf 0..1.</p>\n<blockquote>\n<p>Wahrscheinlich ist im Medikationsplan PLUS in FHIR Geburtsdatum 0..1 und must-support das Pendant zu 1..1 R im Szenario oder man führt tatsächlich eine nullFlavor Extension hinzu.</p>\n</blockquote>\n<p>Sehe ich auch exakt so, 0..1 mit must support = 1..1 R in CDA.</p>\n<p>Anmerkung: In FHIR sind Stunden und Minuten beim Patienten-Geburtsdatum nicht erlaubt das der DatenTyp date und nicht DateTime ist</p>",
        "id": 154717754,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1547034085
    },
    {
        "content": "<p>Es kommt ja nicht darauf an, identische Formate zu übertragen, sondern identische Aussagen. FHIR \"1970\" === Gematik \"19700000\" usw.<br>\nSomit: ebenfalls pro 0..1, wenn unbedingt benötigt die NullFlavor-Extension.<br>\nUnd für die Geburtszeit gibt's auch schon was: <a href=\"https://www.hl7.org/fhir/extension-patient-birthtime.html\" target=\"_blank\" title=\"https://www.hl7.org/fhir/extension-patient-birthtime.html\">https://www.hl7.org/fhir/extension-patient-birthtime.html</a></p>",
        "id": 154721311,
        "sender_full_name": "Stefan Lang",
        "timestamp": 1547038685
    },
    {
        "content": "<blockquote>\n<p>Somit: ebenfalls pro 0..1, wenn unbedingt benötigt die NullFlavor-Extension.</p>\n</blockquote>\n<p>Bei 0..1 benötigen wir die Extension ja gerade <em>nicht</em>. Dann kann man das Datum ja einfach weglassen...</p>",
        "id": 154726437,
        "sender_full_name": "Simone Heckmann",
        "timestamp": 1547043523
    },
    {
        "content": "<p>jopps</p>",
        "id": 154726467,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1547043545
    },
    {
        "content": "<p>+1</p>",
        "id": 154732178,
        "sender_full_name": "Peter Scholz",
        "timestamp": 1547047868
    },
    {
        "content": "<p>die Regex des Schemas erlaubt zwar 00000000 es wird aber keine Aussage über die Semantik getroffen,<br>\ndie findet sich eher in der Definitiion des Fachmoduls, und dort geht es nicht ohne jahr.</p>\n<p>von daher 00000000 =&gt; kein Geburtsdatum in der Ressource =&gt; 0..1<br>\nMehr müssen wir im Basisprofil nicht aussagen</p>",
        "id": 154732419,
        "sender_full_name": "Peter Scholz",
        "timestamp": 1547048051
    },
    {
        "content": "<p>Im Basisprofil eh nicht. Die Anfrage bezog sich auf das VSDM-Profil, also das Profil, dass die Erwartungen an eine Patient-Ressource darstellen soll, die aus dem VSDM-Datensatz erstellt wurde. Aber ich vermute, deine Aussage schließt dieses Profil ein, Peter?</p>",
        "id": 154744143,
        "sender_full_name": "Simone Heckmann",
        "timestamp": 1547057011
    },
    {
        "content": "<blockquote>\n<blockquote>\n<p>Somit: ebenfalls pro 0..1, wenn unbedingt benötigt die NullFlavor-Extension.</p>\n</blockquote>\n<p>Bei 0..1 benötigen wir die Extension ja gerade <em>nicht</em>. Dann kann man das Datum ja einfach weglassen...</p>\n</blockquote>\n<p>Sorry, war etwas flapsig formuliert. Ich meinte eigentlich: wenn jemand unbedingt explizit ein \"unbekannt\" ausdrücken will, kann er in einem abgeleiteten Profil die NullFlavor-Extension benutzen.</p>",
        "id": 154752789,
        "sender_full_name": "Stefan Lang",
        "timestamp": 1547063944
    },
    {
        "content": "<p>In Bezug auf VSDM reicht 0..1 aus, mit dem Anwendungshinweis, dass \"kein birthDate\" === \"00000000\"</p>",
        "id": 154752960,
        "sender_full_name": "Stefan Lang",
        "timestamp": 1547064051
    },
    {
        "content": "<p>Ok, dann versuche ich mich mal an einer Motion:</p>\n<blockquote>\n<p>Die Kardinalität von birthDate im VSDM-Profil wird auf 0..1 gesetzt. Im Beschreibungstext (Basis und VSDM) von birthDate wird der Hinweis auf das Mapping der VSDM-Nullwerte auf partielle Daten ergänzt.</p>\n</blockquote>",
        "id": 154821523,
        "sender_full_name": "Simone Heckmann",
        "timestamp": 1547105266
    },
    {
        "content": "<p>I second</p>",
        "id": 154826452,
        "sender_full_name": "Stefan Lang",
        "timestamp": 1547112247
    },
    {
        "content": "<blockquote>\n<p>Ok, dann versuche ich mich mal an einer Motion:</p>\n<blockquote>\n<p>Die Kardinalität von birthDate im VSDM-Profil wird auf 0..1 gesetzt. Im Beschreibungstext (Basis und VSDM) von birthDate wird der Hinweis auf das Mapping der VSDM-Nullwerte auf partielle Daten ergänzt.</p>\n</blockquote>\n</blockquote>\n<p>Finde ich gut - damit ist jedem gedient!</p>\n<p>Noch zur ergänzenden Info: Anhand unserer Stichprobe habe ich mal ca. 1/4 Mio. Karten geprüft. Tatsächlich ist bei 0,1 Promille das Geburtsdatum im Format YYYY0000 angegeben, bei 0,05 Promille im Format YYYYMM00. Der Wert \"00000000\" kommt auf den eGks nicht vor (was auch lt. DEÜV nicht vorkommen darf). <br>\nAlles in allem dürfte der Wert \"00000000\" eine Erfindung der KBV sein.</p>",
        "id": 154922069,
        "sender_full_name": "Michael Sauer",
        "timestamp": 1547218681
    },
    {
        "content": "<p>Damit haben wir eine Lösung: </p>\n<blockquote>\n<p>Die Kardinalität von birthDate im VSDM-Profil wird auf 0..1 gesetzt. Im Beschreibungstext (Basis und VSDM) von birthDate wird der Hinweis auf das Mapping der VSDM-Nullwerte auf partielle Daten ergänzt.</p>\n</blockquote>\n<p>Disposition: Modifiziert angenommen<br>\nMotion: Simone Heckmann <br>\nSecond: Stefan Lang <br>\nDafür: 3<br>\nDagegen: 0</p>",
        "id": 155094864,
        "sender_full_name": "Simone Heckmann",
        "timestamp": 1547482519
    }
]