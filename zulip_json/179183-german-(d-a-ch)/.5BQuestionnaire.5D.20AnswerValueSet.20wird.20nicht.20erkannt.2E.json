[
    {
        "content": "<p>Hallo,<br>\nich habe ein Questionnaire mit einem <code>choice </code> Feld. Außerdem habe ich ein <code>answerValueSet</code> angegeben welches die URL eines selbst definierten Value-Sets enthält.<br>\nBei der <code>QuestioinnaireResponse</code> gebe ich für das Feld als <code>answer</code> ein <code>valueCoding</code> an.<br>\nAls <code>system</code> habe ich die URL des benutzerdefinierten Code-Systems hinterlegt, welches als Basis für das Value-Set dient.</p>\n<p>Beim validieren der QuestionnaireResponse erhalte ich jedoch den <code>error</code> \"The value provided (<a href=\"https://my.custom.url/CodeSystem/aaa::CODE1\">https://my.custom.url/CodeSystem/aaa::CODE1</a>) is not in the options value set in the questionnaire.\"</p>\n<p>Woran könnte das liegen?<br>\nVG, Christian</p>",
        "id": 225302942,
        "sender_full_name": "Christian Nau",
        "timestamp": 1612534494
    },
    {
        "content": "<p>Kannst du mal den Snippet aus deinem Q /QR posten? Hast du die ValueSet Ressource erstellt und hat dein Validator Zugriff darauf? Ist die VS-Ressource valide?</p>",
        "id": 225322640,
        "sender_full_name": "Simone Heckmann",
        "timestamp": 1612543108
    },
    {
        "content": "<p>Ich vermute auch ein fehlendes VS im Validator.</p>",
        "id": 225462751,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1612702316
    },
    {
        "content": "<p>Ich habe seit langem immer wieder dieses Problem (oder was ähnliches) gehabt und habe jetzt ein Minimalbeispiel gemacht (Dateien sind angehängt). Es scheint, dass man diesen Fehler hervorrufen kann, in dem man</p>\n<ol>\n<li>eine eigene VS benutzt</li>\n<li>diese VS an mehrere Fragen als Antwort-VS bindet, und</li>\n<li>eine QuestionnaireResponse validiert, in der <em>mehrere verschiedene Codes</em> vom VS als Antwort vorkommt (!)</li>\n</ol>\n<p>Im Beispiel unten gibt es zwei Fragen, beiden mit der gleichen Antwort- VS (zwei LOINC-Codes). Wenn ich das QuestionnaireResponse  mit dem neusten Validator dagegen R4-validiere (mit der VS in den gleichen Ordner wie das Questionnaire), kriege ich diesen (falschen) Fehler:</p>\n<div class=\"codehilite\"><pre><span></span><code>*FAILURE*: 1 errors, 0 warnings, 0 notes\n  Error @ QuestionnaireResponse.item[0].answer[0] (line 10, col68) : The value provided (http://loinc.org::LA32-8) is not in the options value set in the questionnaire\n</code></pre></div>\n<p>Wenn ich die QuestionnaireResponse so ändere, dass der <em>gleiche</em> Code (egal welcher) zweimal als Antwort vorkommt, kommt keinen Fehler. Wäre ein recht komischer Bug, also Frage ich mich, ob ich was offensichtliches übersehe...?</p>\n<ul>\n<li><a href=\"/user_uploads/10155/16kcGI4O2P-9bfTbz7w07LXO/qr.questionnaireresponse.json\">qr.questionnaireresponse.json</a></li>\n<li><a href=\"/user_uploads/10155/KADmBOYBTuEYjQt4z0SCoSoH/yesno.ValueSet.json\">yesno.ValueSet.json</a> </li>\n<li><a href=\"/user_uploads/10155/B_8xPzr9E3_2cfqDnGKEA5XQ/q.questionnaire.json\">q.questionnaire.json</a></li>\n</ul>",
        "id": 226021413,
        "sender_full_name": "Morten Ernebjerg",
        "timestamp": 1613062279
    },
    {
        "content": "<p>Hm! Das würde erklären, warum in seltenen Fällen die Validierung bei mir funktioniert hat, nämlich genau dann, wenn die Antworten zufällig alle den gleichen Code hatten.</p>\n<p>Allerdings erhalte ich den Fehler auch bei Questionnaires mit nur einer coded Frage.</p>",
        "id": 226361206,
        "sender_full_name": "Christian Nau",
        "timestamp": 1613381530
    },
    {
        "content": "<p>Was vielleicht noch relevant ist: Mein selbst erstelltes ValueSet zeigt auf eine ebenfalls selbst erstelltes Code-System.</p>",
        "id": 226361794,
        "sender_full_name": "Christian Nau",
        "timestamp": 1613381885
    },
    {
        "content": "<blockquote>\n<p>Allerdings erhalte ich den Fehler auch bei Questionnaires mit nur einer coded Frage.</p>\n</blockquote>\n<p>Hm, interessant! - ich konnte es leider nicht auf die Schnelle mit meinem Minimalbeispiel reproduzieren. Ich denke, ich werde das Problem &amp; mein Beispiel in <a class=\"stream\" data-stream-id=\"179239\" href=\"/#narrow/stream/179239-tooling\">#tooling</a> in die internationale Runde werfen und hier verlinken, vielleicht koenntest Du da Deine Variante schildern?</p>",
        "id": 226369113,
        "sender_full_name": "Morten Ernebjerg",
        "timestamp": 1613386322
    },
    {
        "content": "<p>Klar!</p>",
        "id": 226369532,
        "sender_full_name": "Christian Nau",
        "timestamp": 1613386573
    },
    {
        "content": "<p><a class=\"stream\" data-stream-id=\"179239\" href=\"/#narrow/stream/179239-tooling\">#tooling</a> - thread : <a href=\"#narrow/stream/179239-tooling/topic/False.20JAR.20validator.20errors.20for.20certain.20questionnaire.20answers/near/226372015\">https://chat.fhir.org/#narrow/stream/179239-tooling/topic/False.20JAR.20validator.20errors.20for.20certain.20questionnaire.20answers/near/226372015</a></p>",
        "id": 226372061,
        "sender_full_name": "Morten Ernebjerg",
        "timestamp": 1613388443
    }
]