[
    {
        "content": "<p>Hi. Can I have a hint as the way to troubleshoot this error: \"ELM generation failed with the following error: Cannot determine expression for data requirement because source is not an AliasedQuerySource or LetClause\". ELM generation from the Atom plugin shows no errors. The CQL seems to evaluate correctly with test data. (The error is reported out from running <a href=\"http://_refresh.sh\">_refresh.sh</a>)</p>",
        "id": 248168813,
        "sender_full_name": "Richard Stanley",
        "timestamp": 1627949515
    },
    {
        "content": "<p>Hi Richard, that's an issue I'm currently working on, we've recently added some data requirements analysis to the refresh and it (apparently) has some issues. Do you have a repro library I could use to make sure I address the issue for your case as well?</p>",
        "id": 248350087,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1628084016
    },
    {
        "content": "<p>Hi Bryn, thanks! It's KitchenSink.cql here: <a href=\"https://github.com/intrahealth/simple-hiv-ig/blob/master/input/cql/KitchenSink.cql\">https://github.com/intrahealth/simple-hiv-ig/blob/master/input/cql/KitchenSink.cql</a></p>",
        "id": 248360408,
        "sender_full_name": "Richard Stanley",
        "timestamp": 1628088497
    },
    {
        "content": "<p>Hi Richard, I believe I've fixes this, can you update your CQF Tooling and try again?</p>",
        "id": 248633207,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1628267098
    },
    {
        "content": "<p>Hi. Awesome. Indeed, it gets past that error now. I see an error with not seeing FHIR Helpers although it is copied into input/resources:</p>\n<div class=\"codehilite\"><pre><span></span><code>No paths found for the Directory /Users/richard/src/github.com/intrahealth/simple-hiv-ig/input/tests/measure/KitchenSink:\n12:29:42.414 [main] WARN  o.o.cqf.tooling.utilities.LogUtils - Measure-HIVSimpleGenderSuppDataIndiv could not be processed:\n          Resource could not be processed: KitchenSink\n                    1 included cql Libraries not found:\nFHIRHelpers MISSING\n</code></pre></div>",
        "id": 248634930,
        "sender_full_name": "Richard Stanley",
        "timestamp": 1628267785
    },
    {
        "content": "<p>Hmm.... do you have a FHIRHelpers.cql source file?</p>",
        "id": 248635176,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1628267896
    },
    {
        "content": "<p>You shouldn't need it, but it sounds like maybe the bundling we're doing is requiring it.</p>",
        "id": 248635225,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1628267927
    },
    {
        "content": "<p>Yeah, looking through different projects that are all known to be working right now, they all have a FHIRHelpers.cql source file.</p>",
        "id": 248635342,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1628267983
    },
    {
        "content": "<p>Sure, I'll get one and try it.</p>",
        "id": 248635439,
        "sender_full_name": "Richard Stanley",
        "timestamp": 1628268015
    },
    {
        "content": "<p>Use the one from here as the source of truth:</p>",
        "id": 248635453,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1628268021
    },
    {
        "content": "<p><a href=\"https://github.com/cqframework/cqf/blob/master/input/cql/FHIRHelpers.cql\">https://github.com/cqframework/cqf/blob/master/input/cql/FHIRHelpers.cql</a></p>",
        "id": 248635454,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1628268021
    },
    {
        "content": "<p>Ok, that seems to be accepted. Great. Next error :) </p>\n<div class=\"codehilite\"><pre><span></span><code>2 missing ValueSets:\nhttp://fhir.org/guides/cqf/cqf-common/ValueSet/inactive-condition MISSING\nhttp://fhir.org/guides/cqf/cqf-common/ValueSet/active-condition MISSING\n\n12:51:19.145 [main] WARN  o.o.cqf.tooling.utilities.LogUtils - Measure will not be bundled because ValueSet bundling failed.\nNo paths found for the Directory /Users/richard/src/github.com/intrahealth/simple-hiv-ig/input/tests/measure/KitchenSink:\n12:51:19.145 [main] WARN  o.o.cqf.tooling.utilities.LogUtils - Measure-HIVSimpleGenderSuppDataIndiv could not be processed:\n          Resource could not be processed: KitchenSink\n                    2 missing ValueSets:\nhttp://fhir.org/guides/cqf/cqf-common/ValueSet/inactive-condition MISSING\nhttp://fhir.org/guides/cqf/cqf-common/ValueSet/active-condition MISSING\n</code></pre></div>",
        "id": 248637050,
        "sender_full_name": "Richard Stanley",
        "timestamp": 1628268726
    },
    {
        "content": "<p>'inactive-condition' is in my FHIRCommon</p>",
        "id": 248637416,
        "sender_full_name": "Richard Stanley",
        "timestamp": 1628268872
    },
    {
        "content": "<p>Is there a canonical fhir common to use?</p>",
        "id": 248638931,
        "sender_full_name": "Richard Stanley",
        "timestamp": 1628269494
    },
    {
        "content": "<p>Weird, still seeing bundling errors with FHIR Helpers</p>\n<div class=\"codehilite\"><pre><span></span><code>java.lang.RuntimeException: /Users/richard/src/github.com/intrahealth/simple-hiv-ig/fsh-generated/resources/FHIRHelpers.json (No such file or directory)\n    at org.opencds.cqf.tooling.utilities.IOUtils.readResource(IOUtils.java:240)\n    at org.opencds.cqf.tooling.utilities.IOUtils.readResource(IOUtils.java:203)\n    at org.opencds.cqf.tooling.utilities.ResourceUtils.getR4DepLibraryResources(ResourceUtils.java:219)\n    at org.opencds.cqf.tooling.utilities.ResourceUtils.getDepLibraryResources(ResourceUtils.java:136)\n    at org.opencds.cqf.tooling.library.LibraryProcessor.bundleLibraryDependencies(LibraryProcessor.java:67)\n    at org.opencds.cqf.tooling.measure.MeasureProcessor.bundleMeasures(MeasureProcessor.java:124)\n    at org.opencds.cqf.tooling.processor.IGBundleProcessor.bundleIg(IGBundleProcessor.java:25)\n    at org.opencds.cqf.tooling.processor.IGProcessor.publishIG(IGProcessor.java:79)\n    at org.opencds.cqf.tooling.operation.RefreshIGOperation.execute(RefreshIGOperation.java:34)\n    at org.opencds.cqf.tooling.Main.main(Main.java:195)\n13:09:27.870 [main] WARN  o.o.cqf.tooling.utilities.LogUtils - Measure will not be bundled because Library Dependency bundling failed.\n</code></pre></div>",
        "id": 248639764,
        "sender_full_name": "Richard Stanley",
        "timestamp": 1628269849
    },
    {
        "content": "<p>FHIRCommon in CQF is the source of truth.</p>",
        "id": 248641738,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1628270770
    },
    {
        "content": "<p>I can’t run refresh on your ig though because there’s no ig reaource; coming from sushi and I don’t have that</p>",
        "id": 248641852,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1628270832
    },
    {
        "content": "<p>After running sushi it will be in fsh-generated/resources. I'll try the only true and living fhircommon and see how that goes.</p>",
        "id": 248649580,
        "sender_full_name": "Richard Stanley",
        "timestamp": 1628274391
    }
]