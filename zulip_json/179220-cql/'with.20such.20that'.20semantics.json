[
    {
        "content": "<p>Hello,<br>\nI have some questions related to the 'with such that' operator in CQL <br>\nPage 41 of the CQL documentation contains this statement:</p>\n<p>[Encounter: \"Ambulatory/ED Visit\"] E <br>\n   with [Condition: \"Acute Pharyngitis\"] P<br>\n      such that P.onsetDateTime during E.period <br>\n         and P.abatementDate after end of E.period</p>\n<p>I assume that the model this statement is working on is FHIR v3.0.1.<br>\n- What ensures that the encounter E is the encounter that contains the condition P ? And in which member of the encounter is the condition contained ? It could be 'diagnosis.condition'. Or the connection could be found from the other because condition contains the member 'context' which can reference the encounter. What if the resources contain two different members of the same required type ? If the connection between the resources is not explicitly given it is not clear to me how to interpret the query.<br>\n- Is it possible to use 'with such that' in a context in which the two resources are not connected at all ? That would allow queries that could find e.g. encounters that happended at the same time but are otherwise not related, like with:<br>\n[Encounter] E1 with [Encounter] E2 such that E1.period during E2.period<br>\n- Why is the 'such that' part in the operator necessary at all ? Why can't the statment from page 41 be expressed with 'where' and look like this<br>\n[Encounter: \"Ambulatory/ED Visit\"] E with [Condition: \"Acute Pharyngitis\"] P<br>\n      where P.onsetDateTime during E.period and P.abatementDate after end of E.period<br>\nWhat is the difference between 'such that' and 'where' ?</p>\n<p>Greetings<br>\nGeorg</p>",
        "id": 154010156,
        "sender_full_name": "Georg Fette",
        "timestamp": 1539845623
    }
]