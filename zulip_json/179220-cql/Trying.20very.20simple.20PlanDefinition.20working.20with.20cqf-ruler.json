[
    {
        "content": "<p>Hi <span class=\"user-mention\" data-user-id=\"191359\">@Bryn Rhodes</span> and others working on the cqf-ruler. I am trying  get our tooling updated for work on the PDDI CDS IG. I am starting with a very simple custom PlanDefinition and Library using the latest cqf-ruler project. Unfortunately, I can't get a simple $apply to work. </p>\n<p>Would you please help me to know what I am doing wrong?  I appreciate any help....</p>\n<p>Here is what I am doing:</p>\n<p>1) clean build of the cqf-ruler project from <a href=\"https://github.com/DBCG/cqf-ruler\" target=\"_blank\" title=\"https://github.com/DBCG/cqf-ruler\">https://github.com/DBCG/cqf-ruler</a> . The server starts fine on custom port 2020 and I am able to load  STU3  resources to <a href=\"http://localhost:2020/cqf-ruler/baseDstu3/\" target=\"_blank\" title=\"http://localhost:2020/cqf-ruler/baseDstu3/\">http://localhost:2020/cqf-ruler/baseDstu3/</a> </p>\n<p>2) very simple CQL that I converted to ELM+XML using a fresh install of cql-to-elm:</p>\n<div class=\"codehilite\"><pre><span></span>library Test_Warfarin_CQL version &#39;1.0&#39;\n\nusing FHIR version &#39;3.0.1&#39;\n\ncodesystem &quot;RXNORM&quot;: &#39;http://www.nlm.nih.gov/research/umls/rxnorm&#39;\n\ncontext Patient\n\ndefine AlwaysTrue:\n  true\n</pre></div>\n\n\n<p>3) The Library and PlanDefinition resources at these links  - the PlanDefinition has a simple action that calls the boolean expression 'AlwaysTrue' in the CQL library: </p>\n<ul>\n<li>Library: <a href=\"https://drive.google.com/open?id=1EqGmvHbVQbsDGDX_iZanQfj1vutISuN_\" target=\"_blank\" title=\"https://drive.google.com/open?id=1EqGmvHbVQbsDGDX_iZanQfj1vutISuN_\">https://drive.google.com/open?id=1EqGmvHbVQbsDGDX_iZanQfj1vutISuN_</a></li>\n<li>PlanDefinition:  <a href=\"https://drive.google.com/open?id=1IQ8llwgDm2J3suWaasqHAoAWv_duDlMt\" target=\"_blank\" title=\"https://drive.google.com/open?id=1IQ8llwgDm2J3suWaasqHAoAWv_duDlMt\">https://drive.google.com/open?id=1IQ8llwgDm2J3suWaasqHAoAWv_duDlMt</a></li>\n</ul>\n<p>4) After uploading these with tag-uploader, I try to run <a href=\"http://localhost:2020/cqf-ruler/baseDstu3/PlanDefinition/test-cql-1/$apply\" target=\"_blank\" title=\"http://localhost:2020/cqf-ruler/baseDstu3/PlanDefinition/test-cql-1/$apply\">http://localhost:2020/cqf-ruler/baseDstu3/PlanDefinition/test-cql-1/$apply</a> </p>\n<p>Errors:</p>\n<div class=\"codehilite\"><pre><span></span>Failed to call access method: java.lang.IllegalArgumentException: [unknown[1:115, 1:115]extraneous input &#39;-&#39; expecting {&lt;EOF&gt;, &#39;include&#39;, &#39;public&#39;, &#39;private&#39;, &#39;parameter&#39;, &#39;codesystem&#39;, &#39;valueset&#39;, &#39;code&#39;, &#39;concept&#39;, &#39;define&#39;, &#39;context&#39;}, unknown[1:115, 1:115]extraneous input &#39;-&#39; expecting {&lt;EOF&gt;, &#39;include&#39;, &#39;public&#39;, &#39;private&#39;, &#39;parameter&#39;, &#39;codesystem&#39;, &#39;valueset&#39;, &#39;code&#39;, &#39;concept&#39;, &#39;define&#39;, &#39;context&#39;},\n\nLocalLibrary[1:104, 1:115]Could not load source for library test, version null.,\n\nLocalLibrary[1:228, 1:237]Could not resolve identifier AlwaysTrue in the current library.]\n</pre></div>\n\n\n<p>It looks like the LIbrary is not  being loaded or referenced. I can see it in the cqf-ruler FHIR server (<a href=\"http://localhost:2020/cqf-ruler/baseDstu3/Library/test-1\" target=\"_blank\" title=\"http://localhost:2020/cqf-ruler/baseDstu3/Library/test-1\">http://localhost:2020/cqf-ruler/baseDstu3/Library/test-1</a>)  - so I don't know what I am doing wrong.</p>\n<p>thanks,<br>\n-R</p>",
        "id": 173142543,
        "sender_full_name": "Rich Boyce",
        "timestamp": 1565723970
    },
    {
        "content": "<p>Hi <span class=\"user-mention\" data-user-id=\"196276\">@Rich Boyce</span> , the ruler repository has several branches that we're working to get consolidated, but until that work completes, the most stable STU3 platform is the <a href=\"https://github.com/DBCG/cqf-ruler/tree/connectathon-21-enableannotations\" target=\"_blank\" title=\"https://github.com/DBCG/cqf-ruler/tree/connectathon-21-enableannotations\">connectathon21-enableannotations</a> branch. Note that library resolution has evolved, so the Library resource needs to have <code>name</code> and <code>version</code> elements that match the name and version of the CQL library content.</p>",
        "id": 173149300,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1565728678
    },
    {
        "content": "<p>Hi <span class=\"user-mention\" data-user-id=\"191359\">@Bryn Rhodes</span> , thanks for the quick reply. I checked out the branch  connectathon-21-enableannotations and did a clean install. Ran again, reloading the LIbrary and PlanDefinition after changing the Library name to match the CQL library name. I also had to load FHIRHelpers which I did after creating a Library bundle with the from the FHIR Model Definition and FHIR Helpers  content on <a href=\"http://hl7.org/fhir/STU3/library-examples.html\" target=\"_blank\" title=\"http://hl7.org/fhir/STU3/library-examples.html\">http://hl7.org/fhir/STU3/library-examples.html</a>. All resources are here:   <br>\n<a href=\"https://drive.google.com/drive/u/0/folders/1hi3hWmRnP5dOfRkie_yYUG_lNCP-um35\" target=\"_blank\" title=\"https://drive.google.com/drive/u/0/folders/1hi3hWmRnP5dOfRkie_yYUG_lNCP-um35\">https://drive.google.com/drive/u/0/folders/1hi3hWmRnP5dOfRkie_yYUG_lNCP-um35</a></p>\n<p>Now it shows that $apply is ran and the 'test' Library is found. However, there is a vague null pointer exception. Any thoughts?</p>\n<div class=\"codehilite\"><pre><span></span>2019-08-13 19:56:50.368 [qtp2128310218-46] INFO  o.o.c.p.FHIRPlanDefinitionResourceProvider [FHIRPlanDefinitionResourceProvider.java:96] Performing $apply operation on PlanDefinition/PlanDefinition/test-cql-1\n2019-08-13 19:56:50.372 [qtp2128310218-46] INFO  o.o.c.p.FHIRPlanDefinitionResourceProvider [FHIRPlanDefinitionResourceProvider.java:234] Evaluating action condition expression AlwaysTrue\n2019-08-13 19:56:50.940 [qtp2128310218-46] INFO  c.u.f.j.s.SearchCoordinatorSvcImpl [SearchCoordinatorSvcImpl.java:547] Proceeding, as we have 1 results\n2019-08-13 19:56:50.963 [search_coord_1] INFO  c.u.f.j.s.SearchCoordinatorSvcImpl [SearchCoordinatorSvcImpl.java:687] Completed search for [Library?name:exact=FHIRHelpers] and found 1 resources in 91ms\n2019-08-13 19:56:51.173 [qtp2128310218-46] INFO  c.u.f.j.s.SearchCoordinatorSvcImpl [SearchCoordinatorSvcImpl.java:547] Proceeding, as we have 1 results\n2019-08-13 19:56:51.179 [search_coord_1] INFO  c.u.f.j.s.SearchCoordinatorSvcImpl [SearchCoordinatorSvcImpl.java:687] Completed search for [Library?name:exact=test] and found 1 resources in 14ms\n2019-08-13 19:56:52.495 [qtp2128310218-46] ERROR c.u.f.r.s.i.ExceptionHandlingInterceptor [ExceptionHandlingInterceptor.java:134] Failure during REST processing\nca.uhn.fhir.rest.server.exceptions.InternalErrorException: Failed to call access method: java.lang.NullPointerException\n    at ca.uhn.fhir.rest.server.method.BaseMethodBinding.invokeServerMethod(BaseMethodBinding.java:265)\n    at ca.uhn.fhir.rest.server.method.OperationMethodBinding.invokeServer(OperationMethodBinding.java:288)\n    at ca.uhn.fhir.rest.server.method.BaseResourceReturningMethodBinding.doInvokeServer(BaseResourceReturningMethodBinding.java:228)\n    at ca.uhn.fhir.rest.server.method.BaseResourceReturningMethodBinding.invokeServer(BaseResourceReturningMethodBinding.java:362)\n    at ca.uhn.fhir.rest.server.method.OperationMethodBinding.invokeServer(OperationMethodBinding.java:263)\n    at ca.uhn.fhir.rest.server.RestfulServer.handleRequest(RestfulServer.java:973)\n    at ca.uhn.fhir.rest.server.RestfulServer.doGet(RestfulServer.java:328)\n    at ca.uhn.fhir.rest.server.RestfulServer.service(RestfulServer.java:1536)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:790)\n    at org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:867)\n    at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1623)\n    at org.eclipse.jetty.websocket.server.WebSocketUpgradeFilter.doFilter(WebSocketUpgradeFilter.java:214)\n    at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1610)\n    at org.eclipse.jetty.servlets.CrossOriginFilter.handle(CrossOriginFilter.java:311)\n    at org.eclipse.jetty.servlets.CrossOriginFilter.doFilter(CrossOriginFilter.java:265)\n    at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1602)\n    at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:540)\n    at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:146)\n    at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:548)\n    at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:132)\n    at org.eclipse.jetty.server.handler.ScopedHandler.nextHandle(ScopedHandler.java:257)\n    at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:1588)\n    at org.eclipse.jetty.server.handler.ScopedHandler.nextHandle(ScopedHandler.java:255)\n    at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1345)\n    at org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:203)\n    at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:480)\n    at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:1557)\n    at org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:201)\n    at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1247)\n    at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:144)\n    at org.eclipse.jetty.server.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:220)\n    at org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:126)\n    at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:132)\n    at org.eclipse.jetty.server.Server.handle(Server.java:502)\n    at org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:364)\n    at org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:260)\n    at org.eclipse.jetty.io.AbstractConnection$ReadCallback.succeeded(AbstractConnection.java:305)\n    at org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:103)\n    at org.eclipse.jetty.io.ChannelEndPoint$2.run(ChannelEndPoint.java:118)\n    at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.runTask(EatWhatYouKill.java:333)\n    at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.doProduce(EatWhatYouKill.java:310)\n    at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.tryProduce(EatWhatYouKill.java:168)\n    at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.run(EatWhatYouKill.java:126)\n    at org.eclipse.jetty.util.thread.ReservedThreadExecutor$ReservedThread.run(ReservedThreadExecutor.java:366)\n    at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:765)\n    at org.eclipse.jetty.util.thread.QueuedThreadPool$2.run(QueuedThreadPool.java:683)\n    at java.lang.Thread.run(Thread.java:748)\nCaused by: java.lang.reflect.InvocationTargetException: null\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at ca.uhn.fhir.rest.server.method.BaseMethodBinding.invokeServerMethod(BaseMethodBinding.java:260)\n    ... 46 common frames omitted\nCaused by: java.lang.NullPointerException: null\n    at org.opencds.cqf.providers.FHIRPlanDefinitionResourceProvider.meetsConditions(FHIRPlanDefinitionResourceProvider.java:239)\n    at org.opencds.cqf.providers.FHIRPlanDefinitionResourceProvider.resolveActions(FHIRPlanDefinitionResourceProvider.java:120)\n    at org.opencds.cqf.providers.FHIRPlanDefinitionResourceProvider.applyPlanDefinition(FHIRPlanDefinitionResourceProvider.java:114)\n    ... 51 common frames omitted\n</pre></div>",
        "id": 173163110,
        "sender_full_name": "Rich Boyce",
        "timestamp": 1565741086
    },
    {
        "content": "<p>Nothing jumps out, we will take a look and see why this isn't working.</p>",
        "id": 173240020,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1565815117
    },
    {
        "content": "<p>Apologies for the delay here, I can't access those resource files. I've requested access.</p>",
        "id": 173815849,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1566409107
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191359\">@Bryn Rhodes</span>  - no problem. I just granted you user access. Sorry for the delay and for  not doing that before. Btw, I was able to run the same super simple CQL in the AHRQ cql testing environment. So curious as to what I am doing wrong in cqf ruler....</p>",
        "id": 173831455,
        "sender_full_name": "Rich Boyce",
        "timestamp": 1566421145
    },
    {
        "content": "<p>That turned out to be a combination of several different issues, including some that result from changes in how we're loading libraries in the ruler. I've committed a PR to address the issues in the ruler, but the library resource will need to have text/cql content, rather than just application/elm+xml. We turned off some of the caching because it forces server restart when debugging, so we load from the cql content.</p>",
        "id": 173843105,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1566433362
    },
    {
        "content": "<p>Bryn, thanks for the update. Unfortunately, still can't run it even after adding text/cql to the Library resource. I checked out the plandefinition-apply-fixes branch . Got a different error this time (see below). I also  tried in connectathon-21-enableannotations</p>\n<p>plandefinition-a</p>\n<div class=\"codehilite\"><pre><span></span>2019-08-22 08:15:53.541 [qtp2128310218-25] INFO  ca.uhn.fhir.context.FhirContext [FhirContext.java:171] Creating new FHIR context for FHIR version [DSTU3]\n2019-08-22 08:15:58.016 [qtp2128310218-21] INFO  o.o.c.p.FHIRPlanDefinitionResourceProvider [FHIRPlanDefinitionResourceProvider.java:96] Performing $apply operation on PlanDefinition/PlanDefinition/test-cql-1\n2019-08-22 08:15:58.018 [qtp2128310218-21] INFO  o.o.c.p.FHIRPlanDefinitionResourceProvider [FHIRPlanDefinitionResourceProvider.java:234] Evaluating action condition expression AlwaysTrue()\n2019-08-22 08:15:58.103 [qtp2128310218-21] INFO  c.u.f.j.s.SearchCoordinatorSvcImpl [SearchCoordinatorSvcImpl.java:547] Proceeding, as we have 1 results\n2019-08-22 08:15:58.128 [search_coord_1] INFO  c.u.f.j.s.SearchCoordinatorSvcImpl [SearchCoordinatorSvcImpl.java:687] Completed search for [Library?name:exact=test] and found 1 resources in 88ms\n2019-08-22 08:15:58.607 [qtp2128310218-21] ERROR c.u.f.r.s.i.ExceptionHandlingInterceptor [ExceptionHandlingInterceptor.java:134] Failure during REST processing\nca.uhn.fhir.rest.server.exceptions.InternalErrorException: Failed to call access method: java.lang.IllegalArgumentException: [Test-1.0[3:1, 3:26]Conversion from FHIR.AccountStatus to System.String is already defined.]\n    at ca.uhn.fhir.rest.server.method.BaseMethodBinding.invokeServerMethod(BaseMethodBinding.java:265)\n    at ca.uhn.fhir.rest.server.method.OperationMethodBinding.invokeServer(OperationMethodBinding.java:288)\n    at ca.uhn.fhir.rest.server.method.BaseResourceReturningMethodBinding.doInvokeServer(BaseResourceReturningMethodBinding.java:228)\n    at ca.uhn.fhir.rest.server.method.BaseResourceReturningMethodBinding.invokeServer(BaseResourceReturningMethodBinding.java:362)\n    at ca.uhn.fhir.rest.server.method.OperationMethodBinding.invokeServer(OperationMethodBinding.java:263)\n    at ca.uhn.fhir.rest.server.RestfulServer.handleRequest(RestfulServer.java:973)\n    at ca.uhn.fhir.rest.server.RestfulServer.doGet(RestfulServer.java:328)\n    at ca.uhn.fhir.rest.server.RestfulServer.service(RestfulServer.java:1536)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:790)\n    at org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:867)\n    at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1623)\n    at org.eclipse.jetty.websocket.server.WebSocketUpgradeFilter.doFilter(WebSocketUpgradeFilter.java:214)\n    at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1610)\n    at org.eclipse.jetty.servlets.CrossOriginFilter.handle(CrossOriginFilter.java:311)\n    at org.eclipse.jetty.servlets.CrossOriginFilter.doFilter(CrossOriginFilter.java:265)\n    at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1602)\n    at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:540)\n    at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:146)\n    at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:548)\n    at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:132)\n    at org.eclipse.jetty.server.handler.ScopedHandler.nextHandle(ScopedHandler.java:257)\n    at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:1588)\n    at org.eclipse.jetty.server.handler.ScopedHandler.nextHandle(ScopedHandler.java:255)\n    at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1345)\n    at org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:203)\n    at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:480)\n    at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:1557)\n    at org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:201)\n    at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1247)\n    at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:144)\n    at org.eclipse.jetty.server.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:220)\n    at org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:126)\n    at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:132)\n    at org.eclipse.jetty.server.Server.handle(Server.java:502)\n    at org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:364)\n    at org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:260)\n    at org.eclipse.jetty.io.AbstractConnection$ReadCallback.succeeded(AbstractConnection.java:305)\n    at org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:103)\n    at org.eclipse.jetty.io.ChannelEndPoint$2.run(ChannelEndPoint.java:118)\n    at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.runTask(EatWhatYouKill.java:333)\n    at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.doProduce(EatWhatYouKill.java:310)\n    at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.tryProduce(EatWhatYouKill.java:168)\n    at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.run(EatWhatYouKill.java:126)\n    at org.eclipse.jetty.util.thread.ReservedThreadExecutor$ReservedThread.run(ReservedThreadExecutor.java:366)\n    at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:765)\n    at org.eclipse.jetty.util.thread.QueuedThreadPool$2.run(QueuedThreadPool.java:683)\n    at java.lang.Thread.run(Thread.java:748)\nCaused by: java.lang.reflect.InvocationTargetException: null\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at ca.uhn.fhir.rest.server.method.BaseMethodBinding.invokeServerMethod(BaseMethodBinding.java:260)\n    ... 46 common frames omitted\nCaused by: java.lang.IllegalArgumentException: [Test-1.0[3:1, 3:26]Conversion from FHIR.AccountStatus to System.String is already defined.]\n    at org.opencds.cqf.config.STU3LibraryLoader.loadLibrary(STU3LibraryLoader.java:92)\n    at org.opencds.cqf.config.STU3LibraryLoader.resolveLibrary(STU3LibraryLoader.java:68)\n    at org.opencds.cqf.config.STU3LibraryLoader.load(STU3LibraryLoader.java:114)\n    at org.opencds.cqf.helpers.LibraryHelper.resolveLibraryById(LibraryHelper.java:156)\n    at org.opencds.cqf.helpers.LibraryHelper.resolvePrimaryLibrary(LibraryHelper.java:191)\n    at org.opencds.cqf.providers.CqlExecutionProvider.evaluateInContext(CqlExecutionProvider.java:177)\n    at org.opencds.cqf.providers.FHIRPlanDefinitionResourceProvider.meetsConditions(FHIRPlanDefinitionResourceProvider.java:236)\n    at org.opencds.cqf.providers.FHIRPlanDefinitionResourceProvider.resolveActions(FHIRPlanDefinitionResourceProvider.java:120)\n    at org.opencds.cqf.providers.FHIRPlanDefinitionResourceProvider.applyPlanDefinition(FHIRPlanDefinitionResourceProvider.java:114)\n    ... 51 common frames omitted\n</pre></div>\n\n\n<p>connectathon-21-enablea</p>\n<div class=\"codehilite\"><pre><span></span>2019-08-22 08:24:17.593 [qtp2128310218-44] INFO  o.o.c.p.FHIRPlanDefinitionResourceProvider [FHIRPlanDefinitionResourceProvider.java:96] Performing $apply operation on PlanDefinition/PlanDefinition/test-cql-1\n2019-08-22 08:24:17.594 [qtp2128310218-44] INFO  o.o.c.p.FHIRPlanDefinitionResourceProvider [FHIRPlanDefinitionResourceProvider.java:234] Evaluating action condition expression AlwaysTrue()\n2019-08-22 08:24:17.689 [qtp2128310218-44] INFO  c.u.f.j.s.SearchCoordinatorSvcImpl [SearchCoordinatorSvcImpl.java:547] Proceeding, as we have 1 results\n2019-08-22 08:24:17.695 [search_coord_2] INFO  c.u.f.j.s.SearchCoordinatorSvcImpl [SearchCoordinatorSvcImpl.java:687] Completed search for [Library?name:exact=FHIRHelpers] and found 1 resources in 15ms\n2019-08-22 08:24:17.759 [qtp2128310218-44] INFO  c.u.f.j.s.SearchCoordinatorSvcImpl [SearchCoordinatorSvcImpl.java:547] Proceeding, as we have 1 results\n2019-08-22 08:24:17.764 [search_coord_2] INFO  c.u.f.j.s.SearchCoordinatorSvcImpl [SearchCoordinatorSvcImpl.java:687] Completed search for [Library?name:exact=test] and found 1 resources in 10ms\n2019-08-22 08:24:17.835 [qtp2128310218-44] ERROR c.u.f.r.s.i.ExceptionHandlingInterceptor [ExceptionHandlingInterceptor.java:134] Failure during REST processing\nca.uhn.fhir.rest.server.exceptions.InternalErrorException: Failed to call access method: java.lang.NullPointerException\n    at ca.uhn.fhir.rest.server.method.BaseMethodBinding.invokeServerMethod(BaseMethodBinding.java:265)\n    at ca.uhn.fhir.rest.server.method.OperationMethodBinding.invokeServer(OperationMethodBinding.java:288)\n    at ca.uhn.fhir.rest.server.method.BaseResourceReturningMethodBinding.doInvokeServer(BaseResourceReturningMethodBinding.java:228)\n    at ca.uhn.fhir.rest.server.method.BaseResourceReturningMethodBinding.invokeServer(BaseResourceReturningMethodBinding.java:362)\n    at ca.uhn.fhir.rest.server.method.OperationMethodBinding.invokeServer(OperationMethodBinding.java:263)\n    at ca.uhn.fhir.rest.server.RestfulServer.handleRequest(RestfulServer.java:973)\n    at ca.uhn.fhir.rest.server.RestfulServer.doGet(RestfulServer.java:328)\n    at ca.uhn.fhir.rest.server.RestfulServer.service(RestfulServer.java:1536)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:790)\n    at org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:867)\n    at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1623)\n    at org.eclipse.jetty.websocket.server.WebSocketUpgradeFilter.doFilter(WebSocketUpgradeFilter.java:214)\n    at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1610)\n    at org.eclipse.jetty.servlets.CrossOriginFilter.handle(CrossOriginFilter.java:311)\n    at org.eclipse.jetty.servlets.CrossOriginFilter.doFilter(CrossOriginFilter.java:265)\n    ```\n</pre></div>",
        "id": 173877379,
        "sender_full_name": "Rich Boyce",
        "timestamp": 1566476808
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191359\">@Bryn Rhodes</span>  No rush on figuring this out. I have moved on to working with the last stable tag release v0.1.2 - I checked this out and branched to v0.1.2-PDDI-CDS. I am now adding order-select and order-sign hooks so we can demonstrate them for the PDDI CDS IG.</p>",
        "id": 173984330,
        "sender_full_name": "Rich Boyce",
        "timestamp": 1566579456
    }
]