[
    {
        "content": "<p>Hi folks. I'm trying to get to the contract under which an Encounter occurred. The path is Encounter -&gt; Account -&gt; Coverage -&gt; Contract. Is this possible in CQL? This is for attributing an Encounter to a funder. Alternately, a simpler path is Encounter -&gt; serviceProvider (org). But, I want to understand if the more complex approach is feasible.</p>",
        "id": 267025814,
        "sender_full_name": "Richard Stanley",
        "timestamp": 1641445161
    },
    {
        "content": "<p>Something like</p>\n<div class=\"codehilite\"><pre><span></span><code>define function &quot;EncounterAccount&quot;(Enc Encounter ):\n  Enc.account EA\n    return singleton from ([Account] A where A.id = &quot;GetId&quot;(EA.reference))\n\ndefine function &quot;GetId&quot;(uri String ):\n  Last(Split(uri, &#39;/&#39;))\n\ndefine function &quot;AccountCoverage&quot;(Acct Account ):\n  Acct.coverage AC\n    return singleton from ([Coverage] CV where CV.id = &quot;GetId&quot;(AC.reference))\n\ndefine function &quot;CoverageContract&quot;(Cov Coverage ):\n  Cov.contract CK\n    return singleton from ([Contract] K where K.id = &quot;GetId&quot;(CK.reference))\n</code></pre></div>\n<p>Based on <a href=\"https://github.com/cqframework/ecqm-content-r4-2021/blob/master/input/cql/MATGlobalCommonFunctionsFHIR4.cql#L266-L272\">https://github.com/cqframework/ecqm-content-r4-2021/blob/master/input/cql/MATGlobalCommonFunctionsFHIR4.cql#L266-L272</a></p>",
        "id": 267079756,
        "sender_full_name": "Paul Denning",
        "timestamp": 1641485882
    }
]