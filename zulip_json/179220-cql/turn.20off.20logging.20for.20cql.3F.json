[
    {
        "content": "<p>On larger measures with larger quantities of patients, it seems that the system produces MANY mb's of logs very quickly.</p>\n<ol>\n<li>Do you think this impacts performance?</li>\n<li>Is there a way to turn off the detailed logging?</li>\n</ol>",
        "id": 247422448,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1627448703
    },
    {
        "content": "<p>There's not currently a way to turn off the detailed logging. There needed to be some changes in the upstream Java cql-engine to facilitate that and they are done, but haven't been released yet.</p>",
        "id": 247474666,
        "sender_full_name": "JP",
        "timestamp": 1627486279
    },
    {
        "content": "<p>Any thoughts on the performance impacts? Think the excessive logging causes performance degredation at a larger scale?&gt;</p>",
        "id": 247478084,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1627487932
    },
    {
        "content": "<p>I think it's really dependent upon your specific logging implementation. You could hypothetically redirect logging to <code>/dev/null</code> and just send all the logs to the void which would cause little performance impact. If on the other hand you're sticking all the logs into a transactional db, it'd probably slow you down a bunch.</p>",
        "id": 247491524,
        "sender_full_name": "JP",
        "timestamp": 1627494046
    },
    {
        "content": "<p>In my scenario, the logs aren't being recorded to a db, but they are within a kubernetes deployment, and kubernetes keeps all logs</p>",
        "id": 247492539,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1627494544
    },
    {
        "content": "<p>So, might be slowing the k8s cluster down persisting all the logs</p>",
        "id": 247492568,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1627494558
    },
    {
        "content": "<p>FWIW, making that configurable is high-priority item for the round of work once cql-engine 1.5.2 is released.</p>",
        "id": 247493467,
        "sender_full_name": "JP",
        "timestamp": 1627494929
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"194178\">@JP</span>  I might be missing some context here, but can't the CQL Engine logging already be controlled via the DebugMap that is passed as input to the CQLEngine / Context? We had a similar problem that we overcame using <code>DebugMap.setIsLoggingEnabled(false).</code> </p>\n<p>The DebugMap logging is hard-coded to true in the <a href=\"https://github.com/DBCG/cqf-ruler/blob/131a2ddccd9962b861c9f4e19502dd84ab8ad46a/r4/src/main/java/org/opencds/cqf/r4/evaluation/MeasureEvaluationSeed.java#L108\">CQF Ruler MeasureEvaluationSeed</a>, but it could be disabled with existing features I think.</p>",
        "id": 247588986,
        "sender_full_name": "Corey Sanders",
        "timestamp": 1627568233
    },
    {
        "content": "<p>I could be mistaken, but last I knew <span class=\"user-mention\" data-user-id=\"191505\">@Sean McIlvenna</span> was using HAPI FHIR server as opposed to the cqf-ruler. HAPI is slightly behind the cqf-ruler as of this moment. cql-engine 1.5.2-SNAPSHOT also uses a logging framework as opposed to writing to stdout making log management easier.</p>",
        "id": 247604656,
        "sender_full_name": "JP",
        "timestamp": 1627574933
    },
    {
        "content": "<p>You around correct <span class=\"user-mention\" data-user-id=\"194178\">@JP</span></p>",
        "id": 247609001,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1627577043
    },
    {
        "content": "<p>Ok, yeah. HAPI FHIR has that same hard-coded value set to true. <a href=\"https://github.com/hapifhir/hapi-fhir/blob/1b9761c91b8cab8c8fa8c7766192a67c04edc105/hapi-fhir-jpaserver-cql/src/main/java/ca/uhn/fhir/cql/r4/evaluation/MeasureEvaluationSeed.java#L135\">https://github.com/hapifhir/hapi-fhir/blob/1b9761c91b8cab8c8fa8c7766192a67c04edc105/hapi-fhir-jpaserver-cql/src/main/java/ca/uhn/fhir/cql/r4/evaluation/MeasureEvaluationSeed.java#L135</a></p>",
        "id": 247611225,
        "sender_full_name": "Corey Sanders",
        "timestamp": 1627578130
    }
]