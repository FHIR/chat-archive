[
    {
        "content": "<p>Hello, <br>\nI got stuck on <code>AdvancedIllnessFrailty.\"Acute Inpatient Discharge with Advanced Illness\"</code> <br>\nHere: <a href=\"https://github.com/cql-fhir-project/ecqm-content-r4-2021/blob/master/bundles/ncqa/BCSE_HEDIS_MY2022-1.0.0/libraryCql/NCQA_AdvancedIllnessandFrailty-1.0.0.cql#L120-L125\">https://github.com/cql-fhir-project/ecqm-content-r4-2021/blob/master/bundles/ncqa/BCSE_HEDIS_MY2022-1.0.0/libraryCql/NCQA_AdvancedIllnessandFrailty-1.0.0.cql#L120-L125</a> </p>\n<p>Could any body give an example of Patient's Bundle that would hit  <code>Acute Inpatient Discharge with Advanced Illness</code> definition, please?</p>",
        "id": 243692599,
        "sender_full_name": "Vasyl Herman",
        "timestamp": 1624472527
    },
    {
        "content": "<p><code>AdvancedIllnessFrailty.\"Nonacute Inpatient Discharge with Advanced Illness\"</code> the same situation:</p>\n<div class=\"codehilite\" data-code-language=\"Bash\"><pre><span></span><code>define <span class=\"s2\">\"Nonacute Inpatient Discharge with Advanced Illness\"</span>:\n  <span class=\"o\">(</span> <span class=\"o\">(</span> Claims.<span class=\"s2\">\"Medical Claims With Diagnosis\"</span> <span class=\"o\">(</span> Claims.<span class=\"s2\">\"Medical Claims With Nonacute or Acute Inpatient Discharge\"</span> <span class=\"o\">(</span> <span class=\"o\">[</span>Claim<span class=\"o\">]</span> <span class=\"o\">)</span>.NonacuteInpatientDischarge, <span class=\"s2\">\"Advanced Illness ValueSet\"</span> <span class=\"o\">)</span>.ServicePeriod <span class=\"o\">)</span> DischargeWithDiagnosis\n    where date from\n    end of DischargeWithDiagnosis during Interval<span class=\"o\">[</span>date from start of <span class=\"s2\">\"Measurement Period\"</span> - <span class=\"m\">1</span> year, date from\n    end of <span class=\"s2\">\"Measurement Period\"</span><span class=\"o\">])</span> InpatientDischarge\n    <span class=\"k\">return</span> date from\n    end of InpatientDischarge\n</code></pre></div>\n<p>To be more specific I am having trouble with <code>Claims.\"Medical Claims With Nonacute or Acute Inpatient Discharge\"</code>  function <a href=\"https://github.com/cql-fhir-project/ecqm-content-r4-2021/blob/master/bundles/ncqa/BCSE_HEDIS_MY2022-1.0.0/libraryCql/NCQA_Claims-1.0.0.cql#L519-L550\">github link</a><br>\nCould anybody please explain on high level what means <code>Tuple return tuple return tuple</code>? or give a Bundle ?<br>\nThanks in advanced!</p>",
        "id": 243696997,
        "sender_full_name": "Vasyl Herman",
        "timestamp": 1624474612
    },
    {
        "content": "<p>I'll take a stab at explaining it. The overall goal of the function is to go from a set of Claims, to a set of Line Items that are grouped by category. There are 3 main sections of that function. Each builds on the last and filters/transforms the data along the way.</p>\n<p>Input data (Claims) -&gt; (apply filter) -&gt;<br>\nTuple 1 (Medical Claims) -&gt;  (group line items by acute inpatient and non acute inpatient) -&gt;<br>\nTuple 2 (InpatientStayLineItems, NonacuteInpatientLineItems) -&gt; (further separate the line items) -&gt;<br>\nTuple 3 (InpatientDischarge, NonacuteInpatientDischarge, AcuteInpatientDischarge)</p>\n<p>A difference between the <code>return</code> statement in CQL and many other programming languages is that the <code>return</code> is at the query level and not the function level (specifically, <code>return</code> is used for query shaping - <a href=\"https://cql.hl7.org/02-authorsguide.html#queries\">https://cql.hl7.org/02-authorsguide.html#queries</a>). In other words, the <code>return</code>s that occur midstream are transient and only feed into the next step in the pipeline. The return value of the overall function is a List of Tuple 3 which is the last step in that pipeline.</p>",
        "id": 243811249,
        "sender_full_name": "JP",
        "timestamp": 1624552104
    },
    {
        "content": "<p>Thaks! It helped a lot!<br>\nBasically, at the end you will have an Object of arrays. <code>AcuteInpatientDischarge</code> is empty if there is a <code>NonacuteInpatientDischarge</code>, right?</p>\n<p><a href=\"/user_uploads/10155/Zs6_5kBbHxBLPM0SimHdBD0a/Screenshot-2021-06-24-at-21.15.46.png\">Screenshot-2021-06-24-at-21.15.46.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/Zs6_5kBbHxBLPM0SimHdBD0a/Screenshot-2021-06-24-at-21.15.46.png\" title=\"Screenshot-2021-06-24-at-21.15.46.png\"><img src=\"/user_uploads/10155/Zs6_5kBbHxBLPM0SimHdBD0a/Screenshot-2021-06-24-at-21.15.46.png\"></a></div>",
        "id": 243825872,
        "sender_full_name": "Vasyl Herman",
        "timestamp": 1624558789
    }
]