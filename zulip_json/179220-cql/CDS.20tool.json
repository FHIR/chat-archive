[
    {
        "content": "<p>Hi All,<br>\nIn search of CQL  tools , We have came across AHRQ CDS Authoring  Tool .Is it helpful in creation of cql's? Can anyone suggest me??<br>\nThanks in advance.</p>",
        "id": 158520098,
        "sender_full_name": "rekha",
        "timestamp": 1550141496
    },
    {
        "content": "<p>Hi @rekha, yes, the AHRQ CDS Authoring Tool is helpful for authoring CQL libraries. There are links to other tools available in the <a href=\"https://cql.hl7.org/10-c-referenceimplementations.html\" target=\"_blank\" title=\"https://cql.hl7.org/10-c-referenceimplementations.html\">Reference Implementations</a> appendix of the specification. In particular, there is an atom package for CQL highlighting, and there is an ad-hoc execution environment <a href=\"http://cql-runner.dataphoria.org\" target=\"_blank\" title=\"http://cql-runner.dataphoria.org\">here</a>.</p>",
        "id": 158657970,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1550272146
    },
    {
        "content": "<p>Thank you <span class=\"user-mention\" data-user-id=\"191359\">@Bryn Rhodes</span>  ,We are having different  fields to define, among them in CDS Tool we are having dropdown for different fields but it doesn't contain some of the representations like Diagnostic report,initialpopulation,numerator,denominator and so on and can we create our  valuesets apart from VSAC?</p>",
        "id": 158777356,
        "sender_full_name": "rekha",
        "timestamp": 1550470780
    },
    {
        "content": "<p>Hi <span class=\"user-mention\" data-user-id=\"197485\">@rekha</span>.  If your last comment is talking about the CDS Authoring Tool, I can answer some of those questions...</p>\n<p>The CDS Authoring Tool does not currently support every FHIR resource type -- but does support the ones that we've found to be most common.  I'll make a note to consider adding DiagnosticReport.</p>\n<p>InitialPopulation, Numerator, and Denominator are terms more often seen in electronic Clinical Quality Measures (eCQM).  That said, the CDS Authoring Tool does have some similar concepts.  In the workspace, there are tabs for \"Inclusions\", \"Exclusions\", and \"Subpopulations\" (among other things).</p>\n<p>Currently the CDS Authoring Tool only supports value sets from the VSAC -- but we hope to support other value set sources in the coming months.</p>\n<p>If the CDS Authoring Tool does not fully meet your needs, you should consider some of the other options that Bryn linked to above.  You could also consider using the CDS Authoring Tool to get a good head start on the CQL.  Then you could export the CQL and modify or extend it in another tool.</p>",
        "id": 158801819,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1550498404
    },
    {
        "content": "<p>Thank you @ <strong>Chris Moesel</strong>.Can we use this tool for creating Measures and as well as CDS HOOKS? <br>\nFor creating which CQLthis tool is more useful??</p>",
        "id": 158874907,
        "sender_full_name": "rekha",
        "timestamp": 1550576843
    },
    {
        "content": "<p>Hi <span class=\"user-mention\" data-user-id=\"197485\">@rekha</span>. The CDS Authoring Tool is designed for creating CDS logic and exporting it as CQL.  It would require modification to support measures.</p>\n<p>Since the CQL represents only the CDS logic, there are still additional steps needed to integrate it into an EHR.  One approach is to expose the CQL logic using CDS Hooks.  The CDS Connect project has an open source project called CQL Services to support this type of integration: <a href=\"https://github.com/AHRQ-CDS/AHRQ-CDS-Connect-CQL-SERVICES\" target=\"_blank\" title=\"https://github.com/AHRQ-CDS/AHRQ-CDS-Connect-CQL-SERVICES\">https://github.com/AHRQ-CDS/AHRQ-CDS-Connect-CQL-SERVICES</a></p>",
        "id": 158888813,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1550588955
    },
    {
        "content": "<p>Thank you @ Chris Moesel. I am able to create valuesets and codesystems but How to declare expressions in define statements?? like this<br>\n**define OnDialysis:<br>\n  Exists(C3F.ProcedureLookBack(C3F.Completed([Procedure: \"Dialysis services\"]), 1 week))<br>\n  or Exists(C3F.ProcedureLookBack(C3F.Completed([Procedure: \"Vascular access for dialysis\"]), 1 week))<br>\n  or Exists(C3F.ProcedureLookBack(C3F.Completed([Procedure: \"ESRD monthly outpatient services\"]), 1 week))** <br>\nand whether Node.js and Yarn required for creating CQL's.</p>",
        "id": 158963849,
        "sender_full_name": "rekha",
        "timestamp": 1550658442
    },
    {
        "content": "<p>To create a statement on its own, outside the context of Inclusion or Exclusion, you can use the \"Base Elements\" tab.  Since your statement is a set of ORs, you want to start with a list operation of OR.</p>\n<ul>\n<li>In the element choose, pick \"List Operations\", then choose \"Or\"</li>\n<li>Name the BaseElement \"OnDialysis\"</li>\n<li>In the first sub-element, choose \"Procedure\"</li>\n<li>Associate it w/ the \"Dialysis Services\" ValueSet</li>\n<li>Add the expressions to get \"Completed\", the 1-week lookback, and exists</li>\n<li>Now add the second and third sub-elements the same way</li>\n<li>When you export the CQL, you should have an \"OnDialysis\" statement that is equivalent to your CQL above (but it will use variables for the different parts).</li>\n</ul>",
        "id": 159009836,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1550693237
    },
    {
        "content": "<p>Here is a screenshot of what it looks like when I build it:<br>\n<a href=\"/user_uploads/10155/EtPSkT5ITRK148fb0x4wBkIx/OnDialysis_Screenshot.jpg\" target=\"_blank\" title=\"OnDialysis_Screenshot.jpg\">OnDialysis_Screenshot.jpg</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/EtPSkT5ITRK148fb0x4wBkIx/OnDialysis_Screenshot.jpg\" target=\"_blank\" title=\"OnDialysis_Screenshot.jpg\"><img src=\"/user_uploads/10155/EtPSkT5ITRK148fb0x4wBkIx/OnDialysis_Screenshot.jpg\"></a></div>",
        "id": 159010270,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1550693517
    },
    {
        "content": "<p>And the relevant part of the CQL that it produced:</p>\n<div class=\"codehilite\"><pre><span></span>define &quot;Dialysis Services&quot;:\n  exists(C3F.ProcedureLookBack(C3F.Completed([Procedure: &quot;Dialysis Services VS&quot;]), 1 week))\n\ndefine &quot;Vascular Access for Dialysis&quot;:\n  exists(C3F.ProcedureLookBack(C3F.Completed([Procedure: &quot;Vascular Access for Dialysis VS&quot;]), 1 week))\n\ndefine &quot;ESRD Monthly Outpatient Services&quot;:\n  exists(C3F.ProcedureLookBack(C3F.Completed([Procedure: &quot;ESRD Monthly Outpatient Services VS&quot;]), 1 week))\n\ndefine &quot;OnDialysis&quot;:\n  &quot;Dialysis Services&quot;\n  or &quot;Vascular Access for Dialysis&quot;\n  or &quot;ESRD Monthly Outpatient Services&quot;\n</pre></div>",
        "id": 159010367,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1550693590
    },
    {
        "content": "<p>Thank you@Chris Moesel. The information you have given  for declaring expressions is very helpful.Iam able to create them but Iam not able to get the structure like this<br>\n **define HDLTests:<br>\n  [Observation] O<br>\n    where O.code in \"HDL-C Laboratory Test\" or O.code in \"High Density Lipoprotein (HDL)\"**. <br>\nCan you please provide a demo for creating a CQL. How to use all the tabs in CDS Authoring Tool??</p>",
        "id": 159053758,
        "sender_full_name": "rekha",
        "timestamp": 1550742724
    },
    {
        "content": "<p>Hi <span class=\"user-mention\" data-user-id=\"197485\">@rekha</span>.  To get something semantically equivalent to:</p>\n<div class=\"codehilite\"><pre><span></span>define HDLTests:\n[Observation] O\nwhere O.code in &quot;HDL-C Laboratory Test&quot; or O.code in &quot;High Density Lipoprotein (HDL)&quot;\n</pre></div>\n\n\n<p>you would do something like the following:</p>\n<ul>\n<li>Choose the \"Base Elements\" tab if this isn't specific to inclusion/exclusion criteria</li>\n<li>Use the element picker to choose \"Observation\"</li>\n<li>\"Authenticate VSAC\" (if not already authenticated)</li>\n<li>Add ValueSet for the first one (\"HDL-C Laboratory Test\")</li>\n<li>Add ValueSet again for the second one (\"High Density Lipoprotein\")</li>\n</ul>\n<p>If I recall, this won't create CQL exactly like you stated above, but it will create CQL that is semantically equivalent.  I <em>think</em> it does two separate queries (one for each value set) and then unions them together.</p>\n<p>If you're really interested in having complete control over the CQL, and you understand CQL (or are willing to learn), then you may be better off writing the CQL by hand.</p>",
        "id": 160005569,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1551795117
    },
    {
        "content": "<p>Hi All,<br>\nIn CDS Authoring Tool after creation of cql ,In testing section which type of json file we need to upload. Can anyone suggest me?</p>",
        "id": 163787886,
        "sender_full_name": "rekha",
        "timestamp": 1555738575
    },
    {
        "content": "<p>Which tool are you using?</p>",
        "id": 163807843,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1555774409
    },
    {
        "content": "<p>AHRQ CDS Authoring tool</p>",
        "id": 163882658,
        "sender_full_name": "rekha",
        "timestamp": 1555907377
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191359\">@Bryn Rhodes</span> ?</p>",
        "id": 163906157,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1555942149
    },
    {
        "content": "<p>I'm not very familiar with the CDS Authoring tool, <span class=\"user-mention\" data-user-id=\"191469\">@Chris Moesel</span> ?</p>",
        "id": 163919164,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1555953106
    },
    {
        "content": "<p>If you have the content packaged as a Library and PlanDefinition, then you can run it in a CQF Ruler.</p>",
        "id": 163919245,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1555953140
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"197485\">@rekha</span>  - The AHRQ CDS Authoring Tool testing capability expects you to upload synthetic patient data as FHIR bundles.  Since the AT supports FHIR DSTU2 and STU3, you can upload bundles of either type.  Each bundle should contain a Patient resource (representing the synthetic test patient) and any other resources representing the patient's data.</p>",
        "id": 163919665,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1555953526
    },
    {
        "content": "<p>If you need a jump start, <a href=\"https://synthetichealth.github.io/synthea/\" target=\"_blank\" title=\"https://synthetichealth.github.io/synthea/\">Synthea</a> generates synthetic patients as FHIR bundles.  Note that you'll need to modify the config file to indicate you want DSTU2 and/or STU3 output.</p>",
        "id": 163919795,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1555953613
    },
    {
        "content": "<p>Thank you @ Chris Moesel</p>",
        "id": 163961035,
        "sender_full_name": "rekha",
        "timestamp": 1555994218
    },
    {
        "content": "<p>Hi, </p>\n<p>I am not sure if this is the right forum to ask questions related to CDS authoring tool. (please guide me, if it is not). </p>\n<p>Could you please share how one would configure \"missing information\" on CDS authoring tool? For instance, I want to check to see if there are any \"observations\" in general, and if there is no observation, return a \"missing information\". Right now, it seems like on CDS tool, I have to select a particular \"code\" exists -- and I cannot do the \"exists\" check at the observation level. Help?</p>",
        "id": 238144783,
        "sender_full_name": "Ashmit Pyakurel",
        "timestamp": 1620654551
    },
    {
        "content": "<p>Hi <span class=\"user-mention\" data-user-id=\"407374\">@Ashmit Pyakurel</span>.  If I understand correctly, you want to do a query for ALL Observations and then check if the result is empty.  This is difficult in the CDS Authoring Tool because it always wants you to choose a Value Set or Concept to apply to the query (instead of allowing an open Observation query).  Do I have that right?</p>\n<p>If so, there is a workaround you can do.  If you create an Observation element and associate it with a Value Set, you can then <em>delete</em> the value set from the element -- and that will leave it as an open query on Observation.  Then you can apply the \"Exists\" and \"Not\" modifiers as appropriate.  I've put a few screenshots below to demonstrate this:</p>\n<p><a href=\"/user_uploads/10155/HqQzY2Vt5mP3aUDlc5vJpSSf/image.png\">image.png</a> <br>\n<a href=\"/user_uploads/10155/7IZ2S5mipCLHmAuVofPQeKMS/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/HqQzY2Vt5mP3aUDlc5vJpSSf/image.png\" title=\"image.png\"><img src=\"/user_uploads/10155/HqQzY2Vt5mP3aUDlc5vJpSSf/image.png\"></a></div><div class=\"message_inline_image\"><a href=\"/user_uploads/10155/7IZ2S5mipCLHmAuVofPQeKMS/image.png\" title=\"image.png\"><img src=\"/user_uploads/10155/7IZ2S5mipCLHmAuVofPQeKMS/image.png\"></a></div>",
        "id": 238319448,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1620744190
    },
    {
        "content": "<p>Note, however, that an open query on Observation might be a performance issue for FHIR servers, as some patients may have many observations, and CQL doesn't define any type of paging mechanism to limit the query to a certain number of results.</p>",
        "id": 238319819,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1620744322
    },
    {
        "content": "<p>You, my sir, get a Big cookie! Thank you so much!! This is exactly what I wanted. The intent is to gradually move away from CDS into CQL -- this is is a tool that would enable us to scale much quickly for the prototype</p>",
        "id": 238320146,
        "sender_full_name": "Ashmit Pyakurel",
        "timestamp": 1620744446
    },
    {
        "content": "<p>FYI, I was just made aware of this online CQL tool that might be helpful:  <a href=\"https://cql-runner.dataphoria.org/\">https://cql-runner.dataphoria.org/</a></p>",
        "id": 238357213,
        "sender_full_name": "John Silva",
        "timestamp": 1620756531
    },
    {
        "content": "<p>Hello,</p>\n<p>We used the CDS Authoring Tool (CDSAT) to develop a CDS artifact which incorporates an external CQL library to returns a simple recommendation if the patient meets the Inclusion criteria.  We then downloaded the CDS artifact and re-defined the Recommendation with some additional elements defined in the included external CQL library.  Please note that we could not add those elements to the Recommendation in the CDSAT and that is why we modified the  CQL artifact outside of the CDSAT.   How do we  get the updated CDS artifact back to the CDSAT?  Your help is appreciated.  Thank you very much for your help.</p>",
        "id": 277300921,
        "sender_full_name": "Tien Thai",
        "timestamp": 1648741413
    },
    {
        "content": "<p>Hi <span class=\"user-mention\" data-user-id=\"249396\">@Tien Thai</span> -- the AHRQ CDS Authoring Tool does not support re-uploading a library for continued editing.  Once you make manual modifications to the CQL, you need to continue any further modifications manually.  We're looking into adding capabilities to support more flexible definitions of recommendations, which <em>might</em> have helped you -- but that won't be ready for a while.</p>\n<p>The CDS AT does allow you to upload CQL libraries to it (as I think you already discovered), but they can only be <em>referenced</em> from your artifact.  You cannot use the AT to edit uploaded libraries.  Depending on what you need to do, there may be some creative workarounds using this capability.  Or, if you wish to continue editing the artifact in the CDS AT, you may need to make your edits as usual and then re-apply the recommendation changes after every time you download a new version from the AT.</p>",
        "id": 277304422,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1648742865
    }
]