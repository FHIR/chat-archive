[
    {
        "content": "<p>I've been experimenting with the proposed <code>$cql</code> operation that is implemented in the cqf-ruler.</p>\n<p>I'm trying to do a simple test query to query for all the male patients in the server. I'm issuing a <code>POST</code> to <code>http://cqm-sandbox.alphora.com/cqf-ruler-dstu3/fhir/$cql</code> with the following body</p>\n<div class=\"codehilite\"><pre><span></span>{\n&quot;resourceType&quot;: &quot;Parameters&quot;,\n&quot;parameter&quot;: [\n        {\n            &quot;name&quot;: &quot;code&quot;,\n            &quot;valueString&quot;: &quot;using FHIR version &#39;3.0.0&#39; context Patient define IsMale: Patient.gender.value = &#39;male&#39;&quot;\n        },\n        {\n            &quot;name&quot;: &quot;context&quot;,\n            &quot;valueString&quot;: &quot;Population&quot;\n        }\n    ]\n}\n</pre></div>\n\n\n<p>I think i expect some sort of Bundle or Array of patients back. I can't seem to get any meaningful response back. Am i doing something technically wrong, or are my expectations wrong?</p>",
        "id": 189752924,
        "sender_full_name": "Jeffrey Taylor",
        "timestamp": 1583371140
    },
    {
        "content": "<p>Try:</p>\n<p>using FHIR version '3.0.0' <br>\ncontext Population <br>\ndefine IsMale: [Patient] P where P.gender.value = 'male'</p>",
        "id": 189821350,
        "sender_full_name": "Christopher Schuler",
        "timestamp": 1583432672
    },
    {
        "content": "<p>Thanks <span class=\"user-mention\" data-user-id=\"191897\">@Christopher Schuler</span>  that worked! The patients that match the criteria came back as expected.</p>\n<p>Out of curiosity, an unexpected thing happened however (probably another of my syntax errors?). The return bundle includes an error, seemingly about my <code>context?</code>. See below. What is causing this?</p>\n<div class=\"codehilite\"><pre><span></span>{\n  &quot;resourceType&quot;: &quot;Bundle&quot;,\n  &quot;type&quot;: &quot;collection&quot;,\n  &quot;entry&quot;: [\n    {\n      &quot;fullUrl&quot;: &quot;Patient&quot;,\n      &quot;resource&quot;: {\n        &quot;resourceType&quot;: &quot;Parameters&quot;,\n        &quot;id&quot;: &quot;Patient&quot;,\n        &quot;parameter&quot;: [\n          {\n            &quot;name&quot;: &quot;location&quot;,\n            &quot;valueString&quot;: &quot;[1:28]&quot;\n          },\n          {\n            &quot;name&quot;: &quot;error&quot;,\n            &quot;valueString&quot;: &quot;Expected a list with at most one element, but found a list with multiple elements.&quot;\n          }\n        ]\n      }\n    },\n    {\n      &quot;fullUrl&quot;: &quot;IsMale&quot;,\n      &quot;resource&quot;: {\n        &quot;resourceType&quot;: &quot;Parameters&quot;,\n        &quot;id&quot;: &quot;IsMale&quot;,\n        &quot;parameter&quot;: [\n          {\n            &quot;name&quot;: &quot;location&quot;,\n            &quot;valueString&quot;: &quot;[1:47]&quot;\n          },\n          {\n            &quot;name&quot;: &quot;value&quot;,\n            &quot;resource&quot;: {\n              &quot;resourceType&quot;: &quot;Bundle&quot;,\n              &quot;type&quot;: &quot;collection&quot;,\n              &quot;entry&quot;: [ ALL PATIENTS IN THIS ARRAY AS EXPECTED ]\n</pre></div>",
        "id": 189823590,
        "sender_full_name": "Jeffrey Taylor",
        "timestamp": 1583434029
    },
    {
        "content": "<p>Hmm. Not sure. I will look into that and get back to you. Thanks!</p>",
        "id": 189824646,
        "sender_full_name": "Christopher Schuler",
        "timestamp": 1583434764
    },
    {
        "content": "<p>I did some digging, it looks like it may be the same error reported here: <a href=\"https://github.com/DBCG/cql_runner/issues/32\" target=\"_blank\" title=\"https://github.com/DBCG/cql_runner/issues/32\">https://github.com/DBCG/cql_runner/issues/32</a>. If so, that's helpful to know (maybe it's not with cql input, but something underlying in the execution engine - to be fixed for others to benefit.). I'll dive in and take a look too.</p>",
        "id": 189825175,
        "sender_full_name": "Jeffrey Taylor",
        "timestamp": 1583435088
    }
]