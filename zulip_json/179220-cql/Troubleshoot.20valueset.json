[
    {
        "content": "<p>I'm trying to get a valueset to work in CQL. How can I troubleshoot, is there someway to see what valueset codes are available through a CQL statement? <span class=\"user-mention\" data-user-id=\"191359\">@Bryn Rhodes</span></p>",
        "id": 154013502,
        "sender_full_name": "Aslan Brooke",
        "timestamp": 1540863634
    },
    {
        "content": "<p>You can issue an $expand against that valueset on the server.</p>",
        "id": 154013503,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1540863723
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191359\">@Bryn Rhodes</span> So $expand works fine: <a href=\"http://hapi.fhir.org/baseDstu3/ValueSet/368154/$expand\" target=\"_blank\" title=\"http://hapi.fhir.org/baseDstu3/ValueSet/368154/$expand\">http://hapi.fhir.org/baseDstu3/ValueSet/368154/$expand</a><br>\nHere is the valueset: <a href=\"http://hapi.fhir.org/baseDstu3/ValueSet/368154\" target=\"_blank\" title=\"http://hapi.fhir.org/baseDstu3/ValueSet/368154\">http://hapi.fhir.org/baseDstu3/ValueSet/368154</a><br>\nBut when I try to use in CQL, I can't make sense of the write valueset statement:</p>\n<div class=\"codehilite\"><pre><span></span>valueset &quot;Heart Failure&quot; : &#39;https://ontoserver.csiro.au/stu3-latest/ValueSet/HeartFailure&#39;\nvalueset &quot;Heart Failure&quot; : &#39;http://hapi.fhir.org/baseDstu3/ValueSet/368154&#39;\nvalueset &quot;Heart Failure&quot; : &#39;http://hapi.fhir.org/baseDstu3/ValueSet/368154&#39;\nvalueset &quot;Heart Failure&quot; : &#39;HeartFailure&#39;\n</pre></div>",
        "id": 154013504,
        "sender_full_name": "Aslan Brooke",
        "timestamp": 1540864483
    },
    {
        "content": "<p>None of them seem to allow me filter the patient id=367771 by condition.<br>\nUsing:</p>\n<div class=\"codehilite\"><pre><span></span>define &quot;test&quot; : [Condition : &quot;Heart Failure&quot;] C\n</pre></div>",
        "id": 154013505,
        "sender_full_name": "Aslan Brooke",
        "timestamp": 1540864553
    },
    {
        "content": "<p>So the first declaration is the right one because it's using the canonical URL for the value set.</p>",
        "id": 154013506,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1540864586
    },
    {
        "content": "<p>Is that value set loaded on the same server that has the patient data?</p>",
        "id": 154013507,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1540864619
    },
    {
        "content": "<p>Yes.</p>",
        "id": 154013508,
        "sender_full_name": "Aslan Brooke",
        "timestamp": 1540864638
    },
    {
        "content": "<p>I copied the valueset over from the ontoserver tool: <a href=\"http://clinfhir.com/valuesetCreator.html\" target=\"_blank\" title=\"http://clinfhir.com/valuesetCreator.html\">http://clinfhir.com/valuesetCreator.html</a></p>",
        "id": 154013509,
        "sender_full_name": "Aslan Brooke",
        "timestamp": 1540864671
    },
    {
        "content": "<p>The Patient/367771 on the <a href=\"http://hapi.fhir.org/baseDstu3\" target=\"_blank\" title=\"http://hapi.fhir.org/baseDstu3\">hapi.fhir.org/baseDstu3</a> has a condition with:</p>\n<div class=\"codehilite\"><pre><span></span>  &quot;code&quot;: {\n    &quot;coding&quot;: [\n      {\n        &quot;system&quot;: &quot;http://hl7.org/fhir/sid/icd-10&quot;,\n        &quot;code&quot;: &quot;I50221&quot;,\n        &quot;display&quot;: &quot;Systolic heart failure, chronic&quot;\n      }\n    ]\n  }\n</pre></div>\n\n\n<p>This code is in the valueset as seen in the expansion: <a href=\"http://hapi.fhir.org/baseDstu3/ValueSet/368154/$expand\" target=\"_blank\" title=\"http://hapi.fhir.org/baseDstu3/ValueSet/368154/$expand\">http://hapi.fhir.org/baseDstu3/ValueSet/368154/$expand</a></p>",
        "id": 154013512,
        "sender_full_name": "Aslan Brooke",
        "timestamp": 1540864836
    },
    {
        "content": "<p>Yeah, that all looks right.</p>",
        "id": 154013517,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1540865448
    },
    {
        "content": "<p>Can you share the patient Resource and I'll see if I can reproduce it?</p>",
        "id": 154013518,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1540865480
    },
    {
        "content": "<p>Oh, nevermind, I see it.</p>",
        "id": 154013519,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1540865545
    },
    {
        "content": "<p><a href=\"http://hapi.fhir.org/baseDstu3/Patient?_id=367771\" target=\"_blank\" title=\"http://hapi.fhir.org/baseDstu3/Patient?_id=367771\">http://hapi.fhir.org/baseDstu3/Patient?_id=367771</a></p>",
        "id": 154013520,
        "sender_full_name": "Aslan Brooke",
        "timestamp": 1540865565
    },
    {
        "content": "<p>Yeah, reproduced, definitely seems like that should be coming back, I'll dig in and see what's going on.</p>",
        "id": 154013521,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1540865924
    }
]