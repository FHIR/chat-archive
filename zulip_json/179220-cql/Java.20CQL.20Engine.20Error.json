[
    {
        "content": "<p>Hello all,<br>\nI'm attempting to use the Java CQL engine however I am getting an error whenever I try to access a property of a resource. For example<br>\n<code>define CLAIM: [Claim]</code><br>\nwill return the Claim object. But when I do something like<br>\n<code>define CLAIM: [Claim] C return C.id.value</code><br>\nI get the following error</p>\n<blockquote>\n<p>WARNING: An illegal reflective access operation has occurred<br>\nWARNING: Illegal reflective access by com.sun.xml.bind.v2.runtime.reflect.opt.Injector (file:/Users/blangley/.gradle/caches/modules-2/files-2.1/com.sun.xml.bind/jaxb-impl/2.3.0.1/2e979dabb3e5e74a0686115075956391a14dece8/jaxb-impl-2.3.0.1.jar) to method java.lang.ClassLoader.defineClass(java.lang.String,byte[],int,int)<br>\nWARNING: Please consider reporting this to the maintainers of com.sun.xml.bind.v2.runtime.reflect.opt.Injector<br>\nWARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations<br>\nWARNING: All illegal access operations will be denied in a future release</p>\n</blockquote>\n<p>Which is coming from the line<br>\n<code>CqlTranslator translator = CqlTranslator.fromText(this.cql, modelManager, libraryManager);</code></p>\n<p>Does anyone know what is causing this or what I am doing wrong?<br>\nThanks!</p>",
        "id": 197326835,
        "sender_full_name": "Benjamin Langley",
        "timestamp": 1589311954
    },
    {
        "content": "<p>Correction: that error is happening from the translator but that is not the error from attempting to access a property of a resource. That error occurs when executing the CQL:</p>\n<blockquote>\n<p>Servlet.service() for servlet [dispatcherServlet] in context with path [/fhir] threw exception [Handler dispatch failed; nested exception is java.lang.NoSuchMethodError: ca/uhn/fhir/context/BaseRuntimeChildDefinition$IAccessor.getValues(Lorg/hl7/fhir/instance/model/api/IBase;)Ljava/util/List; (loaded from file:/Users/blangley/.gradle/caches/modules-2/files-2.1/ca.uhn.hapi.fhir/hapi-fhir-base/3.7.0/e31584e480341990c3faa6833782922106a77cef/hapi-fhir-base-3.7.0.jar by jdk.internal.loader.ClassLoaders$AppClassLoader@a8cf518a) called from class org.opencds.cqf.cql.model.FhirModelResolver (loaded from file:/Users/blangley/.gradle/caches/modules-2/files-2.1/org.opencds.cqf/cql-engine-fhir/1.3.12.1/e97627594b257806e4d0c89fe8274fd4f4941ff8/cql-engine-fhir-1.3.12.1.jar by jdk.internal.loader.ClassLoaders$AppClassLoader@a8cf518a).] with root cause</p>\n<p>java.lang.NoSuchMethodError: ca/uhn/fhir/context/BaseRuntimeChildDefinition$IAccessor.getValues(Lorg/hl7/fhir/instance/model/api/IBase;)Ljava/util/List; (loaded from file:/Users/blangley/.gradle/caches/modules-2/files-2.1/ca.uhn.hapi.fhir/hapi-fhir-base/3.7.0/e31584e480341990c3faa6833782922106a77cef/hapi-fhir-base-3.7.0.jar by jdk.internal.loader.ClassLoaders$AppClassLoader@a8cf518a) called from class org.opencds.cqf.cql.model.FhirModelResolver (loaded from file:/Users/blangley/.gradle/caches/modules-2/files-2.1/org.opencds.cqf/cql-engine-fhir/1.3.12.1/e97627594b257806e4d0c89fe8274fd4f4941ff8/cql-engine-fhir-1.3.12.1.jar by jdk.internal.loader.ClassLoaders$AppClassLoader@a8cf518a).<br>\n        at org.opencds.cqf.cql.model.FhirModelResolver.resolveProperty(FhirModelResolver.java:334) ~[cql-engine-fhir-1.3.12.1.jar:na]<br>\n....</p>\n</blockquote>",
        "id": 197330529,
        "sender_full_name": "Benjamin Langley",
        "timestamp": 1589313734
    },
    {
        "content": "<p>Hi <span class=\"user-mention\" data-user-id=\"236429\">@Benjamin Langley</span> , are you running this inside a ruler? Or standalone? What version of FHIR are you using in the CQL?</p>",
        "id": 197351366,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1589324597
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191359\">@Bryn Rhodes</span> I am running stand alone using FHIR 4.0.0</p>",
        "id": 197406367,
        "sender_full_name": "Benjamin Langley",
        "timestamp": 1589373853
    },
    {
        "content": "<p>Can you try this with the 1.4.0-SNAPSHOT?</p>",
        "id": 197504926,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1589430017
    },
    {
        "content": "<p>No, wait, looking at that stack, it looks like you're loading the 3.7 version of HAPI, but the 1.3.12.1 engine was built with HAPI 4.1, so you'll need at least that version to run</p>",
        "id": 197505246,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1589430490
    }
]