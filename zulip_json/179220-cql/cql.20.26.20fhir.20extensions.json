[
    {
        "content": "<p>Is there a way to specific a FHIR extension in a CQL query?</p>\n<p>Here is an example:</p>\n<div class=\"codehilite\"><pre><span></span>library &quot;test&quot; version &#39;1&#39;\n\nvalueset &quot;Some Condition VS&quot;: &#39;1.2.3.4&#39;\n\ncontext Patient\n\ndefine &quot;Some Condition&quot;:\n  exists([Condition: &quot;Some Condition VS&quot;])\n  and exists // extension with url &quot;http://test.com&quot; &amp; valueString &quot;123&quot;\n</pre></div>\n\n\n<p>The operator <code>exists([Condition: \"Some Condition VS\"])</code> finds the patients that have a condition inside of the <code>'1.2.3.4'</code> valueset, but I want to further restrain the query by looking for a specific value on a fhir extension.</p>",
        "id": 178887925,
        "sender_full_name": "Jeffrey Taylor",
        "timestamp": 1571859438
    },
    {
        "content": "<p>Yes, extensions are exposed in the FHIR model, so you can access them like any other element:</p>\n<div class=\"codehilite\"><pre><span></span>library &quot;test&quot; version &#39;1&#39;\n\nvalueset &quot;Some Condition VS&quot;: &#39;1.2.3.4&#39;\n\ncontext Patient\n\ndefine &quot;Some Condition&quot;:\n  exists(\n        [Condition: &quot;Some Condition VS&quot;] C\n          where exists (\n                C.extension E\n                  where E.url = &#39;http://test.com&#39;\n                      and E.value = &#39;123&#39;\n            )\n    )\n</pre></div>",
        "id": 178903922,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1571870707
    },
    {
        "content": "<p>(deleted)</p>",
        "id": 178909060,
        "sender_full_name": "Mohammad Afaq Khan",
        "timestamp": 1571875777
    },
    {
        "content": "<p>Hi ,<br>\ni want to test cqf-ruler-0.1.13-SNAPSHOT.jar with hapi-fhir-3.8 , to test $evaluate-measure <br>\nbut it's not working with example given by hspc in there documentation <br>\nanybody know about where i will get example related to $evaluate-measure, $apply, cds-hooks etc...<br>\nThank you in advance.</p>",
        "id": 178942201,
        "sender_full_name": "Saoji Adhe",
        "timestamp": 1571916398
    },
    {
        "content": "<p>Thanks <span class=\"user-mention\" data-user-id=\"191359\">@Bryn Rhodes</span>, this clicked - appreciate you sharing this example.</p>",
        "id": 178949645,
        "sender_full_name": "Jeffrey Taylor",
        "timestamp": 1571922551
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"196449\">@Saoji Adhe</span> I would be more than happy, if you gave <a href=\"https://alexanderkiel.gitbook.io/blaze/deployment/quick-start\" target=\"_blank\" title=\"https://alexanderkiel.gitbook.io/blaze/deployment/quick-start\">Blaze</a> a try. It supports $evaluate-measure, although with <code>initial-population</code> only were the CQL expression has to be called <code>InInitialPopulation</code>. Please also see this <a href=\"https://github.com/life-research/blaze/blob/master/evaluate-measure.sh\" target=\"_blank\" title=\"https://github.com/life-research/blaze/blob/master/evaluate-measure.sh\">script</a> which calls $evaluate-measure the way it's currently supported.</p>",
        "id": 178954872,
        "sender_full_name": "Alexander Kiel",
        "timestamp": 1571925908
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191359\">@Bryn Rhodes</span>  Thanks you for sharing the fhir extension cql  query structure  <br>\nPlease find below a code snap and test patient extension structure I am testing out  <br>\ndefine ValidBasic: <br>\n  exists(<br>\n        [Basic] B<br>\n          where exists (<br>\n                B.extension HE<br>\n                  where HE.url = '<a href=\"http://sample.com/fhir/StructureDefinition/isHospice\" target=\"_blank\" title=\"http://sample.com/fhir/StructureDefinition/isHospice\">http://sample.com/fhir/StructureDefinition/isHospice</a>'<br>\n                      and HE.value = true<br>\n            )<br>\n    )</p>\n<p>\"extension\": [<br>\n     {<br>\n      \"url\": \"<a href=\"http://sample.com/fhir-extensions/Basic-originalReasonEntitlementCode\" target=\"_blank\" title=\"http://sample.com/fhir-extensions/Basic-originalReasonEntitlementCode\">http://sample.com/fhir-extensions/Basic-originalReasonEntitlementCode</a>\",<br>\n      \"valueCodeableConcept\": {<br>\n        \"coding\": [<br>\n          {<br>\n            \"system\": \"CodeSystem\",<br>\n            \"code\": \"11429006\",<br>\n            \"display\": \"OREC\"<br>\n          }<br>\n        ]<br>\n      }},<br>\n    {<br>\n      \"url\": \"<a href=\"http://sample.com/fhir/StructureDefinition/isHospice\" target=\"_blank\" title=\"http://sample.com/fhir/StructureDefinition/isHospice\">http://sample.com/fhir/StructureDefinition/isHospice</a>\",<br>\n      \"valueBoolean\": \"true\"<br>\n    }<br>\n  ],</p>\n<p>My results evaluate to a false when I execute my test case, even though the URL and the value are both contained within the extension</p>",
        "id": 188146394,
        "sender_full_name": "Eghonghon Okpah",
        "timestamp": 1581625207
    },
    {
        "content": "<p>Hi <span class=\"user-mention\" data-user-id=\"221800\">@Eghonghon Okpah</span> , I can confirm this behavior in the cql-runner, but I think we have fixed this already in the latest version of the engine. Where are you seeing this behavior?</p>",
        "id": 188254194,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1581719915
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191359\">@Bryn Rhodes</span>  we are using CQL Engine Version: 1.3.10-SNAPSHOT</p>",
        "id": 188521181,
        "sender_full_name": "Eghonghon Okpah",
        "timestamp": 1582097333
    },
    {
        "content": "<p>So digging on this a bit more and it is a known issue that we are currently working on a fix for: <a href=\"https://github.com/DBCG/cql_engine/issues/262\" target=\"_blank\" title=\"https://github.com/DBCG/cql_engine/issues/262\">https://github.com/DBCG/cql_engine/issues/262</a> and <a href=\"https://github.com/cqframework/clinical_quality_language/pull/482\" target=\"_blank\" title=\"https://github.com/cqframework/clinical_quality_language/pull/482\">https://github.com/cqframework/clinical_quality_language/pull/482</a></p>",
        "id": 188554465,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1582126233
    }
]