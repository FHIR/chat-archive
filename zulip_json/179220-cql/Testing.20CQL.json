[
    {
        "content": "<p>My CQL file was successfully compiled by the Measure Authoring Tool (MAT) but the MAT produced a \"System error.  Unable to process information\" error when packaging the eCQM.  I have also checked this CQL file with the CQL-To_ELM translator and the translation completed successfully.   As a result of this error,  I will not be able to test my eCQM using the Bonnie tool.  Is there any other tool that I can use to test my eCQM?  Thank you very much.</p>",
        "id": 180636458,
        "sender_full_name": "Tien Thai",
        "timestamp": 1573658441
    },
    {
        "content": "<p>Assuming that your eCQM is using the QDM data model (and not FHIR), I'm not aware of any other tools specifically for testing QDM-based eCQMs (especially if you want them also to consider the HQMF).  I think <span class=\"user-mention\" data-user-id=\"191359\">@Bryn Rhodes</span> has a Java CQL engine that supports the QDM data model, but I suspect it would take some work to get it to support eCQM testing in a user-friendly way.</p>\n<p>I'd suggest reaching out to the MAT/Bonnie team for help.  I think it's actually the same team behind both tools now, so hopefully they can help you!</p>",
        "id": 180636935,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1573658684
    },
    {
        "content": "<p>Thanks very much, Chris.</p>",
        "id": 180637498,
        "sender_full_name": "Tien Thai",
        "timestamp": 1573659003
    },
    {
        "content": "<p>We can use flatten to have duplicates added to a list but is there a way except doesnt remove all occurrences of an object in the first list?</p>",
        "id": 181232032,
        "sender_full_name": "Mohammad Afaq Khan",
        "timestamp": 1574272475
    },
    {
        "content": "<p>I'm not sure I understand your question, <span class=\"user-mention\" data-user-id=\"245475\">@Mohammad Afaq Khan</span>.  Are you saying that <code>List{1, 2, 2, 3, 4} except {2, 3}</code> currently returns <code>List{1, 4}</code> but you want it to return <code>List{1, 2, 4}</code> (removing only the <em>first</em> <code>2</code>)?</p>",
        "id": 181236765,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1574275869
    },
    {
        "content": "<p>Yes, that is my desired outcome</p>",
        "id": 181236809,
        "sender_full_name": "Mohammad Afaq Khan",
        "timestamp": 1574275918
    },
    {
        "content": "<p>It's very hard to do because we cant loop and set counters up when we define something as an integer we cant update its value</p>",
        "id": 181236894,
        "sender_full_name": "Mohammad Afaq Khan",
        "timestamp": 1574275970
    },
    {
        "content": "<p>I want to remove the number of occurrences of \"2\" present in the second list from the first list so if the second list had 2 instances of \"2\" the returned list after the except should have no \"2\"s in it</p>",
        "id": 181237433,
        "sender_full_name": "Mohammad Afaq Khan",
        "timestamp": 1574276344
    },
    {
        "content": "<p>You're right.  That's a tough one!  Although it may be possible, no simple solutions come to mind...  I'll think about it some more though.</p>",
        "id": 181238608,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1574277110
    },
    {
        "content": "<p>Ok thanks <span class=\"user-mention\" data-user-id=\"191469\">@Chris Moesel</span>  appreciate the help</p>",
        "id": 181238990,
        "sender_full_name": "Mohammad Afaq Khan",
        "timestamp": 1574277316
    },
    {
        "content": "<p>Btw IndexOf only returns the first instance of the second argument</p>",
        "id": 181246622,
        "sender_full_name": "Mohammad Afaq Khan",
        "timestamp": 1574282102
    },
    {
        "content": "<p>I thought I had a nice solution, but then I remembered that CQL doesn't support recursion (when it wouldn't compile).  Anyway, in case it sparks any ideas for you:</p>\n<div class=\"codehilite\"><pre><span></span>library Test version &#39;1.0&#39;\n\ncontext Patient\n\n// NOTE: This does NOT compile because of recursive reference to strictExcept!\ndefine function strictExcept(sourceList List&lt;Integer&gt;, exceptList List&lt;Integer&gt;):\n  if Count(exceptList) &gt; 0 then\n    strictExcept(removeFirstOccurrence(sourceList, First(exceptList)), Tail(exceptList))\n  else\n    sourceList\n\ndefine function removeFirstOccurrence(list List&lt;Integer&gt;, item Integer):\n  if item in list then\n    flatten List{Take(list, IndexOf(list, item)), Skip(list, IndexOf(list, item) + 1)}\n  else\n    list\n\ndefine strictExceptTest: strictExcept(List{1,2,2,2,3,4}, List{2,3})\n</pre></div>",
        "id": 181264729,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1574295993
    },
    {
        "content": "<p>Whoops -- copied in the wrong one up there at first.  Now it's fixed.  Well, still <em>broken</em> -- but broken in the <em>expected</em> way.  Again, just hoping it might help spur some other ideas.</p>",
        "id": 181264937,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1574296211
    },
    {
        "content": "<p>Is it just that you want to compute the distinct before you do the except?</p>",
        "id": 181294710,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1574334723
    },
    {
        "content": "<p>in QDM, is it safe to assume that each medication order must have a relevant period (i.e. start date and end date)?  By that I mean the values for both medication's start date and end date are always available?   If one of them is missing, lets say if the end date is NULL, is it possible to assign todays' date to this end date?  Thanks.</p>",
        "id": 182043717,
        "sender_full_name": "Tien Thai",
        "timestamp": 1574877843
    },
    {
        "content": "<p>Hi <span class=\"user-mention\" data-user-id=\"249396\">@Tien Thai</span> , no, in QDM, whether the start and end date are present for a given interval is determined by the underlying data. If end date is null for an inclusive interval, then that indicates that the interval continues to the \"end of time\".</p>",
        "id": 182491292,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1575404642
    },
    {
        "content": "<p>Assigning today's date for missing dates in source data is typically not advised, since it is making assumptions about what the underlying system means.</p>",
        "id": 182491346,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1575404676
    }
]