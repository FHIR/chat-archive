[
    {
        "content": "<p>Hi <span class=\"user-mention\" data-user-id=\"191359\">@Bryn Rhodes</span> , <span class=\"user-mention\" data-user-id=\"191469\">@Chris Moesel</span>  et al.</p>\n<p>Thank you again for all your (continued) help and guidance with my other recent posts.  This new topic covers a third area in my cql exploration that I think will set me up to start drafting some experimental measures.</p>\n<p>As mentioned in my other post about validating a code in a medicationRequest resource, my context is accessing FHIR data.  I've also been referencing existing eCQMs based on the QDM for inspiration and am now attempting to write a FHIR equivalent retrieve  for a case that has a temporal relationship between resources. (I'll also be looking at the other resources that I realized you sent me on the other topic while I was drafting this new post).</p>\n<p>Here's a generic relational retrieve in QDM:</p>\n<p><code>Define “Patient Encounter”:\n[Encounter, Performed: “encounterValueSet”] patientEncounter</code></p>\n<p><code>Define “Encounter with Diagnosis”:\n“Patient Encounter” patientEncounter\nwith [Diagnosis: “diagnosisValueSet”] patientDiagnosis\nsuch that patientDiagnosis.prevalencePeriod overlaps patientEncounter.relevantPeriod</code></p>\n<p>Using (<a href=\"http://hl7.org/fhir/us/qicore/2018Jan/qdm-to-qicore.html\" target=\"_blank\" title=\"http://hl7.org/fhir/us/qicore/2018Jan/qdm-to-qicore.html\">http://hl7.org/fhir/us/qicore/2018Jan/qdm-to-qicore.html</a>), it looks like:</p>\n<p><code>Diagnosis: Prevalence Period</code> maps to <code> Condition.onset[x]</code> and <code>Condition.abatement[x]</code></p>\n<p>and</p>\n<p><code>Encounter, Performed: Relevant Period</code> maps to <code>Encounter.period</code></p>\n<p>and</p>\n<p><code>Encounter, Performed: Code</code> maps to <code>Encounter.class</code></p>\n<p>Since the prevalence period for Diagnosis seems to be broken up into two data “pieces” in FHIR, and it is to be compared to a period with implied start/end datetimes, I’d like to know if the following retrieve could be considered the FHIR equivalent to the generic QDM example:</p>\n<p><code>Define “Patient Encounter”:\n[Encounter] patientEncounter\n    where patientEncounter.class in “encounterValueSet”</code></p>\n<p><code>Define “Patient Diagnosis”:\n[Condition] patientCondition\n    where patientCondition.code in “conditionValueSet”</code></p>\n<p><code>Define “Encounter with Diagnosis”\n“Patient Encounter” patientEncounter\n    with “patientCondition” patientCondition\n        such that patientEncounter.period overlaps between patientCondition.onsetDateTime and patientCondition.abatementDateTime</code></p>\n<p>In my attempt to write the FHIR equivalent relational retrieve, I thought maybe the <code>between</code> comparison operator seemed appropriate.  I also assumed it was better for me to define the <code>\"Patient Diagnosis\"</code> retrieve here since I wasn't sure how this part would be written in the <code>\"Encounter with Diagnosis\"</code> the same way it was done in the QDM example.</p>\n<p>Hoping you all can help confirm if these assumptions are correct or if there is a better method to use when two discrete datetimes are to be compared to a period (or even when two discrete datetimes are compared against two other discrete datetimes when an overlap or other interval comparison is needed).</p>\n<p>As always, many many thanks!</p>",
        "id": 167260931,
        "sender_full_name": "Adam Rodriguez",
        "timestamp": 1559628933
    }
]