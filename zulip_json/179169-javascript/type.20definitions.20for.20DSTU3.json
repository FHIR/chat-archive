[
    {
        "content": "<p>Hi, is anyone already working on typescript type definitions for DSTU3 ?</p>",
        "id": 153867579,
        "sender_full_name": "Andreas Keil",
        "timestamp": 1484583434
    },
    {
        "content": "<p>This would be awesome to have.</p>",
        "id": 153867581,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1484583504
    },
    {
        "content": "<p>any update on this?</p>",
        "id": 153874390,
        "sender_full_name": "Emre Avsar",
        "timestamp": 1488447194
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191451\">@Patrick Werner</span> do you know whether <span class=\"user-mention\" data-user-id=\"191379\">@Andreas Keil</span> already started on this, or just was interested in ts?</p>",
        "id": 153874393,
        "sender_full_name": "Emre Avsar",
        "timestamp": 1488447564
    },
    {
        "content": "<p>he already started the TS typings file and is using fhir actively with angular2 / ionic2</p>",
        "id": 153874394,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1488447985
    },
    {
        "content": "<p>alright. thx. let's see what he got already. in the meanwhile, this could be also a option: <a href=\"https://github.com/bobby-brennan/fhir-swagger/issues/2\" target=\"_blank\" title=\"https://github.com/bobby-brennan/fhir-swagger/issues/2\">https://github.com/bobby-brennan/fhir-swagger/issues/2</a></p>\n<p>1. generating a swagger definition for the fhir resources via fhir-swagger<br>\n2. use swagger to generate TS</p>\n<p>*but* for dstu3 it does not work atm</p>",
        "id": 153874395,
        "sender_full_name": "Emre Avsar",
        "timestamp": 1488448087
    },
    {
        "content": "<p>Hi <span class=\"user-mention\" data-user-id=\"193288\">@Emre Avsar</span> you can find the stu3 typings here: <a href=\"https://github.com/t4deon/FHIR-STU3-TS-Typings/blob/master/typings.d.ts\" target=\"_blank\" title=\"https://github.com/t4deon/FHIR-STU3-TS-Typings/blob/master/typings.d.ts\">https://github.com/t4deon/FHIR-STU3-TS-Typings/blob/master/typings.d.ts</a> I haven't had the time yet to write some unit tests and documentation but as soon as this is done I will submit a pull request to DefinitelyTyped so you can use the typings via npm. </p>",
        "id": 153874399,
        "sender_full_name": "Andreas Keil",
        "timestamp": 1488449946
    },
    {
        "content": "<p>yay. commited 9 minutes ago :-D</p>",
        "id": 153874400,
        "sender_full_name": "Emre Avsar",
        "timestamp": 1488450026
    },
    {
        "content": "<p>have you generated the stuff here?</p>",
        "id": 153874401,
        "sender_full_name": "Emre Avsar",
        "timestamp": 1488450048
    },
    {
        "content": "<p>yes. They are generated from the StructureDefinitions. I'm not sure if all interfaces are correct so far as I'm using just a few currently. Tell me if you find any bugs there so I can correct them.</p>",
        "id": 153874403,
        "sender_full_name": "Andreas Keil",
        "timestamp": 1488450232
    },
    {
        "content": "<p>cool. and have you also thought about custom extenions?</p>",
        "id": 153874404,
        "sender_full_name": "Emre Avsar",
        "timestamp": 1488450289
    },
    {
        "content": "<p>There are also interfaces for extensions but I haven't used them so far. You are very welcome to contribute :)</p>",
        "id": 153874407,
        "sender_full_name": "Andreas Keil",
        "timestamp": 1488450580
    },
    {
        "content": "<p>def. when i have some examples. this means that i have two places where i have to adjust my 'models' -&gt; FHIR server and my angular app using the fhir server's api</p>",
        "id": 153874408,
        "sender_full_name": "Emre Avsar",
        "timestamp": 1488450833
    },
    {
        "content": "<p>btw <span class=\"user-mention\" data-user-id=\"191379\">@Andreas Keil</span> regarding your repo. i tried to get it as a node module by using it via <a href=\"https://github.com/shama/napa\" target=\"_blank\" title=\"https://github.com/shama/napa\">https://github.com/shama/napa</a>, this works fine. but you didn't do any exports in the typings.d.ts file. how can I use the typings?</p>",
        "id": 153874409,
        "sender_full_name": "Emre Avsar",
        "timestamp": 1488451943
    },
    {
        "content": "<p>ok got it, poor visual studio code showed a wrong warning.</p>",
        "id": 153874410,
        "sender_full_name": "Emre Avsar",
        "timestamp": 1488452329
    },
    {
        "content": "<p>hey <span class=\"user-mention\" data-user-id=\"191379\">@Andreas Keil</span> i'm still struggling to use your typing.d.ts file in my angular2 app. how can I import it right away?</p>",
        "id": 153874426,
        "sender_full_name": "Emre Avsar",
        "timestamp": 1488459685
    },
    {
        "content": "<p>You need to add the .d.ts file to your project and then install it: typings install file:./path/to/typings.d.ts --save --global</p>",
        "id": 153874427,
        "sender_full_name": "Andreas Keil",
        "timestamp": 1488460972
    },
    {
        "content": "<p>no imports needed then?</p>",
        "id": 153874434,
        "sender_full_name": "Emre Avsar",
        "timestamp": 1488464919
    },
    {
        "content": "<p>ok i got it in the meanwhile.</p>",
        "id": 153874438,
        "sender_full_name": "Emre Avsar",
        "timestamp": 1488466823
    },
    {
        "content": "<p>but you don't combine it with the fhir.js lib, do you?</p>",
        "id": 153874439,
        "sender_full_name": "Emre Avsar",
        "timestamp": 1488466838
    },
    {
        "content": "<p>the problem i'm facing at the moment is, when I create a fhir resource, lets say Observation like this:</p>\n<div class=\"codehilite\"><pre>const observation: fhir.Observation = {\n      status: &#39;final&#39;,\n      code: {\n        id: &#39;1234&#39;,\n        text: &#39;codeable concept test&#39;,\n        coding: null\n      }\n    };\n</pre></div>\n\n\n<p>I don't have the <strong>mandatory</strong> fields like <code>resourceType: 'Observation',</code> </p>",
        "id": 153874441,
        "sender_full_name": "Emre Avsar",
        "timestamp": 1488468267
    },
    {
        "content": "<p>i tried to make this resourceType thing automatically filled out, by <strong>trying</strong> to get the interfacename which is also the resourceType and add it to the instance of the interface. but unfortunatelly the interface is not enough, i need a class. do you have any idea whether it is possible to get the typings as classes instead of interfaces?</p>",
        "id": 153874445,
        "sender_full_name": "Emre Avsar",
        "timestamp": 1488470698
    },
    {
        "content": "<p>When you start discussing how to specify mandatory fields and default values, you're no longer talking about type definitions, but about schema definitions.  You'll need a library like <code>node-simple-schema</code>.  </p>\n<p><a href=\"https://github.com/aldeed/node-simple-schema\" target=\"_blank\" title=\"https://github.com/aldeed/node-simple-schema\">https://github.com/aldeed/node-simple-schema</a></p>",
        "id": 153874452,
        "sender_full_name": "Abbie Watson",
        "timestamp": 1488476949
    },
    {
        "content": "<p>We've implemented schema definitions for ~40 of the DSTU2 resources.  They take longer to implement than type definitions, so slower going.  </p>\n<p><a href=\"https://github.com/clinical-meteor?utf8=%E2%9C%93&amp;q=hl7-resource&amp;type=&amp;language=\" target=\"_blank\" title=\"https://github.com/clinical-meteor?utf8=%E2%9C%93&amp;q=hl7-resource&amp;type=&amp;language=\">https://github.com/clinical-meteor?utf8=%E2%9C%93&amp;q=hl7-resource&amp;type=&amp;language=</a></p>\n<p>They're currently implemented as Atmosphere packages and require a Meteor data infrastructure, but that supports Angular2 and TypeScript.  If you want to pull them out and use them in an express or webpack app, just copy the Schema definition and include <code>node-simple-schema</code> and you should be able to selectively use them on the server or client as needed, with the <code>.clean()</code>, <code>.validate()</code> and other schema validation functions.  </p>\n<p>Pull requests to bring them up from DTSU2 to DTSU3 happily accepted.</p>",
        "id": 153874454,
        "sender_full_name": "Abbie Watson",
        "timestamp": 1488477339
    },
    {
        "content": "<p>hi <span class=\"user-mention\" data-user-id=\"191678\">@Abigail Watson</span> i'm not directly interested into schema validation, but the <code>resourceType</code> look very clear for me. at least this field I'd like to have automatically filled out.</p>",
        "id": 153874601,
        "sender_full_name": "Emre Avsar",
        "timestamp": 1488523328
    },
    {
        "content": "<p>are these schemas generated or do you have to adjust it to changes?</p>",
        "id": 153874602,
        "sender_full_name": "Emre Avsar",
        "timestamp": 1488523550
    },
    {
        "content": "<p>btw I just pushed a forked version of bunyaminsg's ng-fhir-example for angular2 which uses the typings of <span class=\"user-mention\" data-user-id=\"191379\">@Andreas Keil</span> . you can find the example project here. <a href=\"https://github.com/emreavsar/ng-fhir-example\" target=\"_blank\" title=\"https://github.com/emreavsar/ng-fhir-example\">https://github.com/emreavsar/ng-fhir-example</a></p>",
        "id": 153874605,
        "sender_full_name": "Emre Avsar",
        "timestamp": 1488529987
    },
    {
        "content": "<p>We have good json schemata for FHIR if you are interested we could share it with community</p>",
        "id": 153874608,
        "sender_full_name": "nicola (RIO/SS)",
        "timestamp": 1488530841
    },
    {
        "content": "<p>@<strong>nicola (RIO)</strong> aren't there there already json schema available from the official fhir site? for stu3 <a href=\"https://hl7.org/fhir/2017Jan/downloads.html\" target=\"_blank\" title=\"https://hl7.org/fhir/2017Jan/downloads.html\">https://hl7.org/fhir/2017Jan/downloads.html</a></p>",
        "id": 153874609,
        "sender_full_name": "Emre Avsar",
        "timestamp": 1488530934
    },
    {
        "content": "<p>but of course the more we have in the community, the more we profit anyway.</p>",
        "id": 153874610,
        "sender_full_name": "Emre Avsar",
        "timestamp": 1488532379
    },
    {
        "content": "<p>Yes, but it does not validate a lot of things :)</p>",
        "id": 153874619,
        "sender_full_name": "nicola (RIO/SS)",
        "timestamp": 1488538411
    },
    {
        "content": "<p>Current JSON representation in FHIR is logically impcompatible with JSON schema - we fixed it by extending JSON schema, but also  i'm working on new JSON format proposal for FHIR.</p>",
        "id": 153874621,
        "sender_full_name": "nicola (RIO/SS)",
        "timestamp": 1488538584
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"193288\">@Emre Avsar</span> I would be happy to accept if you can send a pull request to <code>ng-fhir-example</code> repository. </p>",
        "id": 153874628,
        "sender_full_name": "Bünyamin Sarıgül",
        "timestamp": 1488543841
    },
    {
        "content": "<p>With <code>node-simple-schema</code> you would do something like <code>ObservationSchema.validate(fhir.Observation)</code>, and it would fill in the <code>resourceType</code> on your <code>fhir.Observation</code> object.  And any other default values, missing fields, etc.  We've got it all configured with Meteor so that's triggered on Collection.insert(), and can be called isomorphically from the server, client, or database.</p>",
        "id": 153874690,
        "sender_full_name": "Abbie Watson",
        "timestamp": 1488571860
    },
    {
        "content": "<p>what is logically incompatible?</p>",
        "id": 153874933,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1488789367
    },
    {
        "content": "<p>If I understand nicola correctly, there is a library called JSON Schema (it happens to be the top match when you search <a href=\"http://npmjs.com\" target=\"_blank\" title=\"http://npmjs.com\">npmjs.com</a> for 'json schema'); and the current FHIR resources don't match its conception of how a JSON object should be structured.  <br>\n<a href=\"http://json-schema.org/\" target=\"_blank\" title=\"http://json-schema.org/\">http://json-schema.org/</a></p>",
        "id": 153874936,
        "sender_full_name": "Abbie Watson",
        "timestamp": 1488791585
    },
    {
        "content": "<p>And his team extended that library, and would like to recommend some changes to the FHIR schemas, to better align with that library.</p>",
        "id": 153874937,
        "sender_full_name": "Abbie Watson",
        "timestamp": 1488791620
    },
    {
        "content": "<p>well, I'll wait to hear. I did agree to do a new set of json schemas for swagger restrictions, but I haven't got to that yet</p>",
        "id": 153874945,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1488792604
    },
    {
        "content": "<p>@<strong>nicola (RIO)</strong> so where can I find the code? </p>",
        "id": 153874955,
        "sender_full_name": "Emre Avsar",
        "timestamp": 1488800505
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"193288\">@Emre Avsar</span> do you mean our extension to JSON schema to support FHIR?</p>",
        "id": 153874960,
        "sender_full_name": "nicola (RIO/SS)",
        "timestamp": 1488803464
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191678\">@Abigail Watson</span> JSON schema and swagger is kinda standards, like FHIR, but for any REST API. It has many implementations in different languages, good adoption and a lot of tooling on top, also supported by many API management services etc.</p>",
        "id": 153874961,
        "sender_full_name": "nicola (RIO/SS)",
        "timestamp": 1488803889
    },
    {
        "content": "<p>@<strong>nicola (RIO)</strong> i think so. atm i'm only working wiht <span class=\"user-mention\" data-user-id=\"191379\">@Andreas Keil</span> 's typings.d.ts file</p>",
        "id": 153874973,
        "sender_full_name": "Emre Avsar",
        "timestamp": 1488806448
    },
    {
        "content": "<p>Here is the tests with our extensions - <a href=\"https://github.com/niquola/json-schema.clj/blob/master/test/json_schema/custom_extensions_test.clj\" target=\"_blank\" title=\"https://github.com/niquola/json-schema.clj/blob/master/test/json_schema/custom_extensions_test.clj\">https://github.com/niquola/json-schema.clj/blob/master/test/json_schema/custom_extensions_test.clj</a>. We introduced 3 new keywords - descriminator (from swagger), exclusiveProperties and oneOfRequired (to support polymorphic elements and primitive extensions).</p>",
        "id": 153874996,
        "sender_full_name": "nicola (RIO/SS)",
        "timestamp": 1488811594
    },
    {
        "content": "<p>It's an Informational standard, is all.  I could point out that Meteor is the most popular web framework on GitHub, having surpassed Rails, Express, and Django, which makes it something of a standard too with good adoption, tooling, etc.  And we managed to mostly solve those problems you mentioned with the current existing FHIR schemas.  What you're suggesting potentially represents a lot of unnecessary work for the Meteor community.  </p>",
        "id": 153875043,
        "sender_full_name": "Abbie Watson",
        "timestamp": 1488817180
    },
    {
        "content": "<p>I did log an issue with the simple-schema maintainers to get their take on IETF Json Schema support though.  They may find it easy to implement; or have alternate standards that they recommend, or other thoughts.  Waiting to find out what they say.</p>",
        "id": 153875044,
        "sender_full_name": "Abbie Watson",
        "timestamp": 1488817258
    },
    {
        "content": "<p>hey <span class=\"user-mention\" data-user-id=\"191379\">@Andreas Keil</span> i'm right now at the point where I have to extend a fhir resource, like i already did on the fhir server. (i'm using the typings client-side in my ng2 app). so I could of course do a local extension manually, but then i have to sync always, when the fhir server has changed the extensions. so any suggestions for this? </p>\n<p>may i ask you also how you generated the typings file from the structure definitions?</p>\n<p>anyone else having something like that at the moment? (again fhir swagger would solve this problem..)</p>",
        "id": 153875467,
        "sender_full_name": "Emre Avsar",
        "timestamp": 1488955711
    },
    {
        "content": "<p>I haven't used extensions yet with the typings but you can provide extensions to a resource as follows:</p>\n<div class=\"codehilite\"><pre>    let pat : fhir.Patient = {\n     extension: [\n       {\n         url: &quot;some url&quot;,\n         valueCode: &quot;some code&quot;\n       }\n     ]\n    };\n</pre></div>\n\n\n<p>I developed a little program to generate the typings. I will publish it soon.</p>",
        "id": 153875735,
        "sender_full_name": "Andreas Keil",
        "timestamp": 1489056889
    },
    {
        "content": "<p>can you maybe share this tool, so that I can also use it for my extensions to generate the typings based on my structure definitions? that would be cool <span class=\"user-mention\" data-user-id=\"191379\">@Andreas Keil</span> !</p>",
        "id": 153875992,
        "sender_full_name": "Emre Avsar",
        "timestamp": 1489158084
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191379\">@Andreas Keil</span> this would be very helpful in our work as well. We would appreciate if you can share it.</p>",
        "id": 153876929,
        "sender_full_name": "Bünyamin Sarıgül",
        "timestamp": 1489579317
    },
    {
        "content": "<p>How are folks going with typescript templates? I'd love to do the ground work for generating the entire model if someone has a sample for one or 2 I can follor for code generation (total TS/Angular noob here)</p>",
        "id": 153903660,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1503634932
    },
    {
        "content": "<p>Yes please.. typescript templates would be awesome especially in an Angular 2+ world (spoken as a possible downstream user, not as anyone who can actually help create them though)</p>",
        "id": 153903664,
        "sender_full_name": "Andrew Patterson",
        "timestamp": 1503644823
    },
    {
        "content": "<p><a href=\"https://github.com/t4deon/FHIR-STU3-TS-Typings\" target=\"_blank\" title=\"https://github.com/t4deon/FHIR-STU3-TS-Typings\">https://github.com/t4deon/FHIR-STU3-TS-Typings</a></p>",
        "id": 153903665,
        "sender_full_name": "Andrew Patterson",
        "timestamp": 1503644883
    },
    {
        "content": "<p>Thanks for the link Andrew</p>",
        "id": 153903783,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1503824390
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191367\">@Brian Postlethwaite</span> be aware of these typings, since they were generated 6 months ago, and some fhir resources has changed in the meanwhile.</p>",
        "id": 153903819,
        "sender_full_name": "Emre Avsar",
        "timestamp": 1503923812
    },
    {
        "content": "<p>but  maybe <span class=\"user-mention\" data-user-id=\"191379\">@Andreas Keil</span> can update the repo by regenerating the dstu typings?</p>",
        "id": 153903820,
        "sender_full_name": "Emre Avsar",
        "timestamp": 1503923866
    },
    {
        "content": "<p>i'd really appreciate that!</p>",
        "id": 153903821,
        "sender_full_name": "Emre Avsar",
        "timestamp": 1503923873
    },
    {
        "content": "<p>I just updated them :)</p>",
        "id": 153903886,
        "sender_full_name": "Andreas Keil",
        "timestamp": 1503947674
    },
    {
        "content": "<p>thanks <span class=\"user-mention\" data-user-id=\"191379\">@Andreas Keil</span> , but can you give it another try? see my comment: <a href=\"https://github.com/t4deon/FHIR-STU3-TS-Typings/issues/1#issuecomment-325453381\" target=\"_blank\" title=\"https://github.com/t4deon/FHIR-STU3-TS-Typings/issues/1#issuecomment-325453381\">https://github.com/t4deon/FHIR-STU3-TS-Typings/issues/1#issuecomment-325453381</a></p>",
        "id": 153904168,
        "sender_full_name": "Emre Avsar",
        "timestamp": 1504179651
    },
    {
        "content": "<p>I didn't see this, sorry. DomainResource is in now!</p>",
        "id": 153904175,
        "sender_full_name": "Andreas Keil",
        "timestamp": 1504180259
    },
    {
        "content": "<p>no worries. i will test it later, and hopefully i don't have to ping you again with some other missing stuff :-)</p>",
        "id": 153904176,
        "sender_full_name": "Emre Avsar",
        "timestamp": 1504180356
    }
]