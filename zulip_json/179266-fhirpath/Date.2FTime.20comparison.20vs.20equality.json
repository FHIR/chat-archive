[
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> , starting a new thread for this test:</p>\n<div class=\"codehilite\"><pre><span></span><code>    &lt;test name=&quot;testStringQuantityDayLiteralToQuantity&quot; inputfile=&quot;patient-example.xml&quot;&gt;&lt;expression&gt;&#39;1 day&#39;.toQuantity() = 1 &#39;d&#39;&lt;/expression&gt;&lt;output type=&quot;boolean&quot;&gt;true&lt;/output&gt;&lt;/test&gt;\n</code></pre></div>",
        "id": 208095190,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1598450668
    },
    {
        "content": "<p>This one is actually highlighting an inconsistency in the spec, there is a tracker <a href=\"https://jira.hl7.org/browse/FHIR-28144\">#28144</a> to address that, but since UCUM definite-duration quantities and calendar durations above seconds are uncomparable, the result should be empty.</p>",
        "id": 208095292,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1598450726
    },
    {
        "content": "<p>the issue is units, not math logic. {day} is a non-unit</p>",
        "id": 208137891,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1598470673
    },
    {
        "content": "<p>Agree that {day} is a non-unit, this issue is different, specifically day and d are not comparable, so should return empty.</p>",
        "id": 208171963,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1598494177
    },
    {
        "content": "<p>how are they not comparable?</p>",
        "id": 208172731,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1598495310
    },
    {
        "content": "<p>For the same reason that <code>year</code> and <code>'a'</code> are not comparable, one is a calendar duration, the other is a definite-duration UCUM unit.</p>",
        "id": 208868101,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1599071919
    },
    {
        "content": "<p>I understand why year and a are not comparable. And month. But I don't understand why for periods of week or less</p>",
        "id": 208883776,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1599078917
    },
    {
        "content": "<p>Because of the possibility of leap seconds, only seconds and below are technically exactly the same between the calendar and UCUM units.</p>",
        "id": 208884296,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1599079126
    },
    {
        "content": "<p>that's not exactly a real world issue.</p>",
        "id": 208885452,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1599079644
    },
    {
        "content": "<p>That's fair, but that was the resolution. If the reference implementations behave differently, we can deal with that as an errata I think.</p>",
        "id": 208888774,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1599081212
    },
    {
        "content": "<p>Added a comment to this effect to this tracker: <a href=\"https://jira.hl7.org/browse/FHIR-28144?filter=12608\">https://jira.hl7.org/browse/FHIR-28144?filter=12608</a></p>",
        "id": 209114649,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1599237122
    },
    {
        "content": "<p>And committed a change to the fhir-path-tests to address it. Specifically:</p>\n<div class=\"codehilite\"><pre><span></span><code>&#39;1 day&#39;.toQuantity() = 1 &#39;d&#39; // true\n&#39;1 \\&#39;wk\\&#39;&#39;.toQuantity() = 1 week // true\n&#39;1 \\&#39;mo\\&#39;&#39;.toQuantity() = 1 month // empty\n&#39;1 \\&#39;a\\&#39;&#39;.toQuantity() = 1 year // empty\n</code></pre></div>",
        "id": 209115412,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1599237628
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191359\">Bryn Rhodes</span> <a href=\"#narrow/stream/179266-fhirpath/topic/Date.2FTime.20comparison.20vs.20equality/near/209115412\">said</a>:</p>\n<blockquote>\n<p>And committed a change to the fhir-path-tests to address it. Specifically:</p>\n<div class=\"codehilite\"><pre><span></span><code>&#39;1 day&#39;.toQuantity() = 1 &#39;d&#39; // true\n&#39;1 \\&#39;wk\\&#39;&#39;.toQuantity() = 1 week // true\n&#39;1 \\&#39;mo\\&#39;&#39;.toQuantity() = 1 month // empty\n&#39;1 \\&#39;a\\&#39;&#39;.toQuantity() = 1 year // empty\n</code></pre></div>\n\n\n</blockquote>\n<p><span class=\"user-mention\" data-user-id=\"191359\">@Bryn Rhodes</span>  - Your proposed resolution to <a href=\"http://jira.hl7.org/browse/FHIR-28144\">J#28144</a> says \"above days\" should return empty, not \"above weeks\".  (I am just objecting to apparent inconsistency, not to \"weeks\".)</p>",
        "id": 211790736,
        "sender_full_name": "Paul Lynch",
        "timestamp": 1601485357
    },
    {
        "content": "<p>Agreed, and when I applied this to CQL as part of alignment/reconciliation there, I noted weeks everywhere. See <a href=\"http://build.fhir.org/ig/HL7/cql/09-b-cqlreference.html#equal\">Equal</a> for example.</p>",
        "id": 211813800,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1601496744
    },
    {
        "content": "<p>I've added this as a note to the comment on that tracker.</p>",
        "id": 211813819,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1601496755
    }
]