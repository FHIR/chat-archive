[
    {
        "content": "<p>Hi! I have a use case where I'm trying to use a List of Encounters as the Environment variable <code>%encounters</code>. In trying to implement the <code>IEvaluationContext</code> interface I discovered that it expects to return a single <code>Base</code> object:</p>\n<p><a href=\"https://hapifhir.io/hapi-fhir/apidocs/hapi-fhir-structures-r5/org/hl7/fhir/r5/utils/FHIRPathEngine.IEvaluationContext.html#resolveConstant(java.lang.Object,java.lang.String,boolean)\">https://hapifhir.io/hapi-fhir/apidocs/hapi-fhir-structures-r5/org/hl7/fhir/r5/utils/FHIRPathEngine.IEvaluationContext.html#resolveConstant(java.lang.Object,java.lang.String,boolean)</a></p>\n<p>I can't find any restriction on the use of collections in FHIRPath in any of the relevant guidance, and in fact it seems that everything should be treated as a collection:</p>\n<p><a href=\"http://hl7.org/fhir/fhirpath.html#vars\">http://hl7.org/fhir/fhirpath.html#vars</a></p>\n<blockquote>\n<p>Note that these tokens are not restricted to simple types,</p>\n</blockquote>\n<p><a href=\"http://hl7.org/fhirpath/#collections\">http://hl7.org/fhirpath/#collections</a></p>\n<blockquote>\n<p>Collections are fundamental to FHIRPath, in that the result of every expression is a collection</p>\n</blockquote>\n<p>Is there a different interface I should be implementing? Or is this an oversight in the <code>IEvaluationContext</code> interface?</p>",
        "id": 242104409,
        "sender_full_name": "JP",
        "timestamp": 1623260958
    },
    {
        "content": "<p>Is this a question more appropriate for the hapi thread?</p>",
        "id": 242244763,
        "sender_full_name": "JP",
        "timestamp": 1623347327
    },
    {
        "content": "<p>Possibly.  I know FHIRPath, but I don't know what IEvaluationContext or Base are.  But, there are probably some people on this stream who do.</p>",
        "id": 242247000,
        "sender_full_name": "Paul Lynch",
        "timestamp": 1623348355
    },
    {
        "content": "<p>That makes sense. They are part of the org.hl7.fhir implementation of a FhirPath engine.</p>",
        "id": 242247451,
        "sender_full_name": "JP",
        "timestamp": 1623348577
    },
    {
        "content": "<p>it looks like an oversight to me</p>",
        "id": 242249498,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1623349447
    },
    {
        "content": "<p><a href=\"https://github.com/hapifhir/org.hl7.fhir.core/issues/535\">https://github.com/hapifhir/org.hl7.fhir.core/issues/535</a></p>",
        "id": 242254033,
        "sender_full_name": "JP",
        "timestamp": 1623351477
    }
]