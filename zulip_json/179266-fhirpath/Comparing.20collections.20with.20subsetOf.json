[
    {
        "content": "<p>I have a situation where I want to make sure I want the all of the values of one collection of elements be a subset of the collection of other values. It is working on <a href=\"https://hl7.github.io/fhirpath.js/\">https://hl7.github.io/fhirpath.js/</a> but not in the build.<br>\nSpecifically I need to make sure all of the numbers in Explanation.supportingInfo.sequence (where supporting info has certain info in it) are included in the collection of ExplanationOfBenefit.item.informationSequence values.</p>\n<p>Here is the example. I would expect [1, 2] to be a subset of [1, 2]<br>\nFHIRPath expression: <code>supportingInfo.where(category.coding.code = 'additionalbodysite').sequence.subsetOf(item.informationSequence)</code><br>\nStripped Resource:</p>\n<div class=\"codehilite\"><pre><span></span><code>{\n  &quot;resourceType&quot; : &quot;ExplanationOfBenefit&quot;,\n  &quot;supportingInfo&quot; : [\n    {\n      &quot;sequence&quot; : 1,\n      &quot;category&quot; : {\n        &quot;coding&quot; : [\n          {\n            &quot;system&quot; : &quot;http://hl7.org/fhir/us/carin-bb/CodeSystem/C4BBSupportingInfoType&quot;,\n            &quot;code&quot; : &quot;additionalbodysite&quot;\n          }\n        ]\n      }\n    },\n    {\n      &quot;sequence&quot; : 2,\n      &quot;category&quot; : {\n        &quot;coding&quot; : [\n          {\n            &quot;system&quot; : &quot;http://hl7.org/fhir/us/carin-bb/CodeSystem/C4BBSupportingInfoType&quot;,\n            &quot;code&quot; : &quot;additionalbodysite&quot;\n          }\n        ]\n      }\n    }\n  ],\n  &quot;item&quot; : [\n    {\n      &quot;sequence&quot; : 1,\n      &quot;informationSequence&quot; : [\n        2\n      ]\n    },\n    {\n      &quot;sequence&quot; : 2,\n      &quot;informationSequence&quot; : [\n        1\n      ]\n    }\n  ]\n}\n</code></pre></div>",
        "id": 261044537,
        "sender_full_name": "Corey Spears",
        "timestamp": 1636573763
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span></p>",
        "id": 261364776,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1636815917
    },
    {
        "content": "<p>Added a test case for this:</p>",
        "id": 261376458,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1636832493
    },
    {
        "content": "<p><a href=\"https://github.com/FHIR/fhir-test-cases/pull/100\">https://github.com/FHIR/fhir-test-cases/pull/100</a></p>",
        "id": 261376460,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1636832493
    },
    {
        "content": "<p>I'm not able to debug though because the current master of org.hl7.fhir.core fails for me on package tests, not sure what's happening there.</p>",
        "id": 261379247,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1636836436
    },
    {
        "content": "<p>not failing for me. what's your error?</p>",
        "id": 261379299,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1636836506
    },
    {
        "content": "<p>Hmm... testJavaHomeDirectory failed:</p>",
        "id": 261379810,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1636837302
    },
    {
        "content": "<p>org.opentest4j.AssertionFailedError: <br>\nExpected :C:\\Program Files\\AdoptOpenJDK\\jdk-11.0.5.10-openj9\\test.txt<br>\nActual   :C:\\Program Files\\AdoptOpenJDK\\jdk-11.0.5.10-openj9\\\\test.txt</p>",
        "id": 261379811,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1636837303
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"453078\">@David Otasek</span> can you look into this? </p>\n<p><span class=\"user-mention\" data-user-id=\"191359\">@Bryn Rhodes</span> what OS is this on?</p>",
        "id": 263805332,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1638761505
    },
    {
        "content": "<p>I'll look into it. From the path, it looks to be triggered by Windows, but it would be good to have this confirmed. It also looks to be very similar to the MacOS test I fixed a few weeks ago, so the fix might be pretty easy.</p>",
        "id": 263856561,
        "sender_full_name": "David Otasek",
        "timestamp": 1638800656
    },
    {
        "content": "<p>Fix is in this PR: <a href=\"https://github.com/hapifhir/org.hl7.fhir.core/pull/683/\">https://github.com/hapifhir/org.hl7.fhir.core/pull/683/</a></p>\n<p>I'm waiting for the other PRs and builds to settle down, and then I'll merge.</p>",
        "id": 263936000,
        "sender_full_name": "David Otasek",
        "timestamp": 1638830975
    }
]