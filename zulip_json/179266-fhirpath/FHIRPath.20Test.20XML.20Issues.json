[
    {
        "content": "<p>I noticed a few issues while trying to use the FHIRPath test artifacts.  I grabbed them from <a href=\"http://build.fhir.org/ig/HL7/FHIRPath/branches/master/N1/tests.html\" target=\"_blank\" title=\"http://build.fhir.org/ig/HL7/FHIRPath/branches/master/N1/tests.html\">http://build.fhir.org/ig/HL7/FHIRPath/branches/master/N1/tests.html</a> but I assume the issues are carry-overs from other versions.</p>",
        "id": 180247731,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1573231506
    },
    {
        "content": "<p>&lt;?xml version=\"1.0\" encoding=\"utf-8\" ?&gt; on line two (I assume it should be at the very top)</p>",
        "id": 180247884,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1573231576
    },
    {
        "content": "<p>lines 217,218: <code>invalid</code> attribute appears on the test element, but I think it should be on the expression</p>",
        "id": 180247957,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1573231629
    },
    {
        "content": "<p>lines 760-764 and 790-794:  unencoded <code>&lt;</code> symbols</p>",
        "id": 180248081,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1573231691
    },
    {
        "content": "<p>line 1052:  duplicate \"name\" attributes...perhaps the latter should be \"description\"?</p>",
        "id": 180248141,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1573231734
    },
    {
        "content": "<p>i'll open a single GForge for all 4 (unless I hear otherwise).  I'm also happy to open a pull request to fix it if that will be helpful.</p>",
        "id": 180248209,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1573231783
    },
    {
        "content": "<p>ok, i opened <a href=\"https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=25194\" target=\"_blank\" title=\"https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=25194\">https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=25194</a> and <a href=\"https://github.com/HL7/FHIRPath/pull/9\" target=\"_blank\" title=\"https://github.com/HL7/FHIRPath/pull/9\">https://github.com/HL7/FHIRPath/pull/9</a></p>",
        "id": 180249846,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1573232669
    },
    {
        "content": "<p>actually, the tests I'm using are here:</p>",
        "id": 180264630,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1573242349
    },
    {
        "content": "<p><a href=\"https://github.com/FHIR/fhir-test-cases/blob/master/r5/fhirpath/tests-fhir-r4.xml\" target=\"_blank\" title=\"https://github.com/FHIR/fhir-test-cases/blob/master/r5/fhirpath/tests-fhir-r4.xml\">https://github.com/FHIR/fhir-test-cases/blob/master/r5/fhirpath/tests-fhir-r4.xml</a></p>",
        "id": 180264707,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1573242388
    },
    {
        "content": "<p>use these against the standard set of resources in the FHIR spec</p>",
        "id": 180264735,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1573242408
    },
    {
        "content": "<p>I confirmed this version doesn't have any of the above issues.  Will the normative FHIRPath spec (R2?) be updated to point at this version?  Or maybe it already has been and I was just looking in the wrong spot?</p>",
        "id": 180431290,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1573485285
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span><br>\nI noticed that some of the tests (maybe a dozen or so) are missing &lt;output&gt; elements. For example:</p>\n<div class=\"codehilite\"><pre><span></span>&lt;test inputfile=&quot;patient-example.xml&quot;&gt;&lt;expression&gt;@2012-04-15 = @2012-04-15T10:00:00&lt;/expression&gt;&lt;/test&gt;\n&lt;test inputfile=&quot;patient-example.xml&quot;&gt;&lt;expression&gt;{} != {}&lt;/expression&gt;&lt;/test&gt;\n&lt;test name=&quot;testLessThan23&quot; inputfile=&quot;patient-example.xml&quot;&gt;&lt;expression&gt;@2018-03 &amp;lt; @2018-03-01&lt;/expression&gt;&lt;/test&gt;\n&lt;test name=&quot;testLessThan24&quot; inputfile=&quot;patient-example.xml&quot;&gt;&lt;expression&gt;@2018-03-01T10 &amp;lt; @2018-03-01T10:30&lt;/expression&gt;&lt;/test&gt;\n&lt;test name=&quot;testLessThan25&quot; inputfile=&quot;patient-example.xml&quot;&gt;&lt;expression&gt;@T10 &amp;lt; @T10:30&lt;/expression&gt;&lt;/test&gt;\n</pre></div>\n\n\n<p>Do you have an updated version that includes the expected output for these?</p>",
        "id": 181642106,
        "sender_full_name": "John Timm",
        "timestamp": 1574432760
    },
    {
        "content": "<p>I see now that <code>{}</code> is implied when no output element is present.</p>",
        "id": 181720860,
        "sender_full_name": "John Timm",
        "timestamp": 1574524864
    },
    {
        "content": "<p>I am curious about this one:</p>\n<div class=\"codehilite\"><pre><span></span>&lt;test name=&quot;testEquality7&quot; inputfile=&quot;patient-example.xml&quot;&gt;&lt;expression&gt;(1 | 1) = (1 | 2 | {})&lt;/expression&gt;&lt;/test&gt;\n</pre></div>\n\n\n<p>I think this is saying that we are performing a union of 1 | 1 which results in singleton collection containing 1 (an integer) and comparing that to a set containing two values (1 and 2). Because the operands are not of the same cardinality the result is <code>{}</code>.<br>\nThe spec says:<br>\nNote that this implies that if the collections have a different number of items to compare, the result will be false.</p>",
        "id": 181720934,
        "sender_full_name": "John Timm",
        "timestamp": 1574524999
    },
    {
        "content": "<p>I see you have commented it out in your version here:<br>\n<a href=\"https://github.com/FHIR/fhir-test-cases/blob/1ec63a139850dc1b3834642e8837531a444ccbde/r5/fhirpath/tests-fhir-r4.xml#L607\" target=\"_blank\" title=\"https://github.com/FHIR/fhir-test-cases/blob/1ec63a139850dc1b3834642e8837531a444ccbde/r5/fhirpath/tests-fhir-r4.xml#L607\">https://github.com/FHIR/fhir-test-cases/blob/1ec63a139850dc1b3834642e8837531a444ccbde/r5/fhirpath/tests-fhir-r4.xml#L607</a><br>\n<span aria-label=\"slight smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"slight smile\">:slight_smile:</span></p>",
        "id": 181721055,
        "sender_full_name": "John Timm",
        "timestamp": 1574525184
    },
    {
        "content": "<p>hm. the union of 1 | 2 | {} is {}, no?</p>",
        "id": 181765200,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1574609564
    },
    {
        "content": "<p>I think it would be <code>{ 1, 2 }</code>. The union of a non-empty set and the empty set should be the non-empty set. The intersection of a non-empty set and the empty set should be the empty set.</p>",
        "id": 181837526,
        "sender_full_name": "John Timm",
        "timestamp": 1574698837
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191359\">@Bryn Rhodes</span> this is an unfortunate consequence of the conflation of unknown and empty set.</p>",
        "id": 181838282,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1574699310
    },
    {
        "content": "<p>Yes, John is right, for operations like union and intersect that expect lists, <code>{ }</code> is always the empty set.</p>",
        "id": 182494553,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1575406759
    }
]