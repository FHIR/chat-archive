[
    {
        "content": "<p>Attempting to craft an expression stating effectiveDateTime shall be greater than a 9 character string. Have tried variations of 'DiagnosticReport.effective.ofType(DateTime).length()&gt;9' and 'DiagnosticReport.effectiveDateTime.length()&gt;9' with no luck. Any hints are much appreciated</p>",
        "id": 270107988,
        "sender_full_name": "David deRoode",
        "timestamp": 1643664531
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191359\">@Bryn Rhodes</span> <span class=\"user-mention\" data-user-id=\"195344\">@Paul Lynch</span></p>",
        "id": 270111605,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1643666185
    },
    {
        "content": "<p>effective.toString().Length()</p>",
        "id": 270151675,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1643690220
    },
    {
        "content": "<p>Thanks Brian. For StructureDefinition:<br>\n         &lt;element id=\"DiagnosticReport.effective[x]\"&gt;<br>\n            &lt;path value=\"DiagnosticReport.effective[x]\"/&gt;<br>\n            &lt;constraint&gt;<br>\n                &lt;key value=\"0o95dEq9\"/&gt;<br>\n                &lt;severity value=\"error\"/&gt;<br>\n                &lt;human value=\"effectiveDateTime SHALL include the month and day\"/&gt;<br>\n                &lt;expression value=\"DiagnosticReport.effective.toString().Length()&gt;9\"/&gt;<br>\n            &lt;/constraint&gt;<br>\n        &lt;/element&gt;...</p>\n<p>I'm still seeing:<br>\n&lt;issue&gt;<br>\n        &lt;severity value=\"error\"/&gt;<br>\n        &lt;code value=\"processing\"/&gt;<br>\n        &lt;diagnostics value=\"0o95dEq9: 'effectiveDateTime SHALL include the month and day' Rule 'effectiveDateTime SHALL include the month and day' Failed\"/&gt;<br>\n        &lt;location value=\"DiagnosticReport.effective.ofType(dateTime)\"/&gt;<br>\n        &lt;location value=\"Line 1, Col 1467\"/&gt;<br>\n    &lt;/issue&gt;</p>\n<p>In response to /$validate an example with:  &lt;effectiveDateTime value=\"2021-01-01T21:39:30.000Z\"/&gt;</p>",
        "id": 270278815,
        "sender_full_name": "David deRoode",
        "timestamp": 1643746837
    },
    {
        "content": "<p>When you have the constraint at the element level you don't spcifiy the entire path.</p>",
        "id": 270289725,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1643750811
    },
    {
        "content": "<p>(if you put the constraint at the root, then the full path)</p>",
        "id": 270289843,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1643750862
    },
    {
        "content": "<p>ah, makes sense- thanks for the help!</p>",
        "id": 270327481,
        "sender_full_name": "David deRoode",
        "timestamp": 1643771760
    },
    {
        "content": "<p>Just to share the working expression for this: got it to work with the expression in the root of the resource and included the full path. Also, lowercase 'l' in .length():<br>\n &lt;element id=\"DiagnosticReport\"&gt;<br>\n            &lt;path value=\"DiagnosticReport\"/&gt;<br>\n              &lt;constraint&gt;<br>\n                &lt;key value=\"0o95dEq9\"/&gt;<br>\n                &lt;severity value=\"error\"/&gt;<br>\n                &lt;human value=\"effectiveDateTime SHALL include the month and day\"/&gt;<br>\n                &lt;expression value=\"effective.toString().length()&gt;9\"/&gt;<br>\n            &lt;/constraint&gt;</p>",
        "id": 270753221,
        "sender_full_name": "David deRoode",
        "timestamp": 1643999046
    },
    {
        "content": "<p>Just a note that this expression would make effective mandatory too.<br>\nIf that's not intended, move the constraint into the effective element and remove it from the expression, making it <code>toString().length() &gt;9</code><br>\nOr in the constraint put effective.exists() implies effective.toString....</p>",
        "id": 270769231,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1644006916
    }
]