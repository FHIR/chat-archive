[
    {
        "content": "<p>I tried looking through the spec to see if there was specific guidance towards this and I didn't notice any, but my question revolves around methods like .contains() and .single() that require the input collection to be one item. <br>\nIf you put those types of methods into a select() or where() as parameters, are those supposed to resolve without error if the input collection <em>to the select method</em> has multiple items.<br>\nFor an esoteric example Patient.name.given.select($this.single()) - In my interpretation of the spec this would be equivalent to Patient.name.given as the context that single() is being run in mean that it wouldn't know of any more than one item at a time.<br>\nFor a more nuanced example Patient.name.given.select($this.contains('Ryan')) - the substring match would normally fail vs an array of names (say, there is a usual \"Ryan M\" an official \"Ryan Moehrke\") But again, in my interpretation the select() would allow the contains() method to run against each item individually and get back a list of 'Ryan's that I could assert exist</p>\n<p>I bring this up because my quick go-to fhirpath evaluator for testing out my wild theories (<a href=\"https://hl7.github.io/fhirpath.js/\">https://hl7.github.io/fhirpath.js/</a>) does not work this way, both of my examples here throw errors and I honestly don't know who is right..</p>",
        "id": 222906604,
        "sender_full_name": "ryan moehrke",
        "timestamp": 1610736917
    },
    {
        "content": "<p>Now that work group week is mostly over, can I get a read on this?</p>",
        "id": 224528519,
        "sender_full_name": "ryan moehrke",
        "timestamp": 1611952100
    },
    {
        "content": "<p>My read is that you're correct, but I'm not an expert.  <span class=\"user-mention\" data-user-id=\"191359\">@Bryn Rhodes</span> <span class=\"user-mention\" data-user-id=\"195344\">@Paul Lynch</span></p>",
        "id": 224537301,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1611956346
    },
    {
        "content": "<p>That looks like a bug in fhirpath.js to me.  Patient.name.given.select(length) works, but Patient.name.given.select($this.length) does not work correctly.  I think $this is set to all of \"given\", but should be each item.</p>",
        "id": 224541219,
        "sender_full_name": "Paul Lynch",
        "timestamp": 1611958020
    },
    {
        "content": "<p>Yes, <span class=\"user-mention\" data-user-id=\"237342\">@ryan moehrke</span>, you are correct, the <code>$this</code> is an iterator variable and only contains the item in the current iteration.</p>",
        "id": 224595028,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1612026960
    },
    {
        "content": "<p>We will try to get a fix for this into fhirpath.js, but it might be a couple of weeks.</p>",
        "id": 224723694,
        "sender_full_name": "Paul Lynch",
        "timestamp": 1612185513
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"237342\">@ryan moehrke</span> This is now fixed in version 2.7.3 of fhirpath.js.</p>",
        "id": 225102839,
        "sender_full_name": "Paul Lynch",
        "timestamp": 1612397755
    }
]