[
    {
        "content": "<p>Hello,</p>\n<p>I am trying to filter the resources by the zip code. The scenario is to extract from a FHIR bundle postal codes where value of the postalCode ='44124'. I tried different variations like PractitionerRole.healthcareService.resolve().location.resolve().address.postalCode('44124').value. It didnt work.Then I tried PractitionerRole.healthcareService.resolve().location.resolve().address.postalCode.where(postalCode='44124'). It didn't work.I also tried PractitionerRole.healthcareService.resolve().location.resolve().address.postalCode.(postalCode='44124') , didnt get result. Can somebody please suggest what would be the correct syntaxt to handle this. Thanks in advance. <span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span></p>",
        "id": 250871840,
        "sender_full_name": "Tushar Nair",
        "timestamp": 1630030853
    },
    {
        "content": "<p>I think what you want is <code>PractitionerRole.where(healthcareService.resolve().location.resolve().address.postalCode='44124')</code>?</p>",
        "id": 250873251,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1630031214
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> , it is bringing the entire PractitionerRole resource back, I simply want to extract the zip code. nothing else</p>",
        "id": 250873874,
        "sender_full_name": "Tushar Nair",
        "timestamp": 1630031601
    },
    {
        "content": "<p>how do you mean, 'bringing the whole resource back'. How are you executing the FHIRPath?</p>",
        "id": 250873892,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1630031631
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191316\">Grahame Grieve</span>  like this:<br>\n{<br>\n    \"name\": \"result\",<br>\n    \"resource\": {<br>\n      \"resourceType\": \"PractitionerRole\",<br>\n      \"id\": \"1912884\",<br>\n      \"meta\": {<br>\n        \"versionId\": \"1\",<br>\n        \"lastUpdated\": \"2021-02-28T22:55:47.367+00:00\",<br>\n        \"source\": \"#WjJ32gkJCVMoR6YU\"<br>\n      },<br>\n      \"active\": true,<br>\n      \"practitioner\": {<br>\n        \"reference\": \"Practitioner/1912759\",<br>\n        \"type\": \"Practitioner\"<br>\n      },<br>\n      \"organization\": {<br>\n        \"reference\": \"Organization/1912733\",<br>\n        \"type\": \"Organization\"<br>\n      },<br>\n      \"code\": [ {<br>\n        \"coding\": [ {<br>\n          \"system\": \"<a href=\"http://terminology.hl7.org/CodeSystem/practitioner-role\">http://terminology.hl7.org/CodeSystem/practitioner-role</a>\",<br>\n          \"code\": \"doctor\"<br>\n        } ]<br>\n      } ],<br>\n      \"location\": [ {<br>\n        \"reference\": \"Location/1912741\",<br>\n        \"type\": \"Location\"<br>\n      } ],<br>\n      \"healthcareService\": [ {<br>\n        \"reference\": \"HealthcareService/1863096\",<br>\n        \"type\": \"HealthcareService\"<br>\n      } ]<br>\n    }<br>\n  }</p>",
        "id": 250874083,
        "sender_full_name": "Tushar Nair",
        "timestamp": 1630031818
    },
    {
        "content": "<p>You want to bring back a zip code that is equal to a string you're passing in?</p>",
        "id": 250874116,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1630031873
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191320\">Lloyd McKenzie</span> Yes please</p>",
        "id": 250874160,
        "sender_full_name": "Tushar Nair",
        "timestamp": 1630031892
    },
    {
        "content": "<p>example:<br>\n{<br>\n    \"name\": \"result\",<br>\n    \"valueString\": \"94538\"<br>\n  }</p>",
        "id": 250874193,
        "sender_full_name": "Tushar Nair",
        "timestamp": 1630031954
    },
    {
        "content": "<p>How does that help?  You'll get back a collection of strings with the value '44124'</p>",
        "id": 250874195,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1630031954
    },
    {
        "content": "<p>trying to extract and export as a report where i have Practioner name which would be a separate fhirpath, practitioner NPI-separate fhirpath and the zip code separate fhirpath</p>",
        "id": 250874291,
        "sender_full_name": "Tushar Nair",
        "timestamp": 1630032057
    },
    {
        "content": "<p>But why return the zip code if you're matching for a specific zip code?</p>",
        "id": 250874310,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1630032089
    },
    {
        "content": "<p>Do you just want the zip code(s) regardless of value?  (You'll probably get more than one as there will likely be multiple locations, healthcareservices and addresses)</p>",
        "id": 250874428,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1630032209
    },
    {
        "content": "<p>I was trying to extract a report where the Practitioner name, NPI &amp; zip code are presented to the user. To do so i used the query: PractitionerRole?_profile=http://hl7.org/fhir/us/davinci-pdex-plan-net/StructureDefinition/plannet-PractitionerRole&amp;_include=PractitionerRole:practitioner&amp;_include=PractitionerRole:service&amp;_include:iterate=HealthcareService:location&amp;service.location.address-postalcode=${PostalCode}</p>\n<div class=\"codehilite\"><pre><span></span><code>\n</code></pre></div>",
        "id": 250874570,
        "sender_full_name": "Tushar Nair",
        "timestamp": 1630032360
    },
    {
        "content": "<p>But as you pinted out - the PractitionerRole had multiple locations.Some of those locations had zip codes other than what was used as input in the query, so I was trying to extract the zip codes that really were used in the query. But I guess u have a point-i can do away with the zip code</p>",
        "id": 250874687,
        "sender_full_name": "Tushar Nair",
        "timestamp": 1630032479
    },
    {
        "content": "<p>Just one question though - do you think the query shall work correctly , I am not sure how to ascertain it is filtering only by the input zip code. I tried it on a small sample created by me and it seem to be working though</p>",
        "id": 250874854,
        "sender_full_name": "Tushar Nair",
        "timestamp": 1630032605
    },
    {
        "content": "<p>First, I don't think you can rely on searching by _profile.  There's no expectation that plan-net compliant PractitionerRole instances will actually declare that profile (or any profile) and _profile will only match on PractitionerRoles that declare the profile, not those that comply (unless you have a server that's pre-emptively testing that).</p>\n<p>So you've got the PractitionerRole as well as the HealthCareService and Location, but you're choosing to extract the information using FHIRPath rather than code.  Any particular reason why?</p>",
        "id": 250877631,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1630035502
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> apologies for the delayed response, was away for a while. The reason we chose to extract using FHIRPath is because users would like to have the full set of results in one go, rather than navigating through multiple pages. Another reason was scenarios like a Practitioner having multiple practicing location addresses. So basically we tried to extract the data using FHIRPath and then export it as a CSV file so that the user could further perform slide and dice analytics, like importing to excel using vlookup etc.</p>",
        "id": 252828419,
        "sender_full_name": "Tushar Nair",
        "timestamp": 1631298182
    },
    {
        "content": "<p>I'm still not really understanding you're use-case.  You're filtering by postal code and then trying to extract the postal code of <em>other</em> addresses for the same individual?</p>",
        "id": 252852286,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1631308797
    }
]