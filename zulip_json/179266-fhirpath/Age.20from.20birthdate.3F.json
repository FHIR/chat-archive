[
    {
        "content": "<p>Is there a way to compute a patient's current age from their birth date?</p>",
        "id": 154435379,
        "sender_full_name": "Paul Lynch",
        "timestamp": 1546634087
    },
    {
        "content": "<p>Use now() function? <a href=\"http://hl7.org/fhirpath/#utility-functions\" target=\"_blank\" title=\"http://hl7.org/fhirpath/#utility-functions\">http://hl7.org/fhirpath/#utility-functions</a></p>",
        "id": 154559545,
        "sender_full_name": "Michel Rutten",
        "timestamp": 1546857625
    },
    {
        "content": "<p>It would be nice to be able write \"now() - Patient.birthDate\", but I don't see any support in the spec for subtracting two dates.   The section on <a href=\"http://hl7.org/fhirpath/#datetime-arithmetic\" target=\"_blank\" title=\"http://hl7.org/fhirpath/#datetime-arithmetic\">Date/Time Arithmetic</a> says, \"The left operand must be a dateTime or time value, and <em>the right operand must be a quantity</em> with a time-valued unit\".</p>",
        "id": 154582073,
        "sender_full_name": "Paul Lynch",
        "timestamp": 1546879212
    },
    {
        "content": "<p>Indeed, seem's like an oversight.</p>",
        "id": 154582655,
        "sender_full_name": "Michel Rutten",
        "timestamp": 1546879686
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"195344\">@Paul Lynch</span> Sounds like a good gForge tracker item if you care to submit it</p>",
        "id": 154585756,
        "sender_full_name": "Rick Geimer",
        "timestamp": 1546882659
    },
    {
        "content": "<p>Sure-- <a href=\"https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=19896\" target=\"_blank\" title=\"https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=19896\">GF#19896</a>.</p>",
        "id": 154587365,
        "sender_full_name": "Paul Lynch",
        "timestamp": 1546884131
    },
    {
        "content": "<p>And while we're there, maybe the date/time primitives should be able to expose their components, so you can use Patient.birthDate.year</p>",
        "id": 154616584,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1546912290
    },
    {
        "content": "<p>I'm more of a CQL guy than FHIRPath, but in regard to <code>now() - Patient.birthDate</code>, CQL has a few approaches.  One is something like this: <code>duration in years between Patient.birthDate and now()</code>.  But for this specific use case, you could use <code>CalculateAgeInYears(Patient.birthDate)</code>.  I guess those aren't exposed in FHIRPath though?</p>",
        "id": 154647889,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1546957552
    },
    {
        "content": "<p>As for <code>Patient.birthDate.year</code>, CQL does this as <code>year from Patient.birthDate</code> -- but again, I don't know if that made it into the subset that is FHIRPath.</p>",
        "id": 154647991,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1546957645
    },
    {
        "content": "<p>Did we end up adding year, month and day properties to the date/datetime types?</p>",
        "id": 185783823,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1579147504
    },
    {
        "content": "<p>Looks like it is still open.<br>\n<a href=\"https://jira.hl7.org/browse/FHIR-19896\" target=\"_blank\" title=\"https://jira.hl7.org/browse/FHIR-19896\">https://jira.hl7.org/browse/FHIR-19896</a><br>\nI was looking to do something here around data extraction (for search fields &amp; Questionnaire pre-population)</p>",
        "id": 185783898,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1579147578
    },
    {
        "content": "<p>This is a sample of what I would kinda like (as was contemplating adding to my server's custom fhirpath functions)<br>\n%LaunchPatient.birthDate.ageAt(today())<br>\n%LaunchPatient.birthDate.ageAt(%LaunchPatient.deceasedDate)</p>",
        "id": 185783973,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1579147706
    },
    {
        "content": "<p>Since the age calculation involves the difference of two dates, which might have other applications, why limit the functionality to just \"age\" calculations?</p>",
        "id": 185821119,
        "sender_full_name": "Paul Lynch",
        "timestamp": 1579186347
    }
]