[
    {
        "content": "<p>I'm currently implementing logic in the .NET validator that invariants that result in <code>empty</code>,  evaluate to <code>false</code>instead of true, based on this topic here:<br>\n<a href=\"#narrow/stream/179166-implementers/topic/Period.20Datatype.20Invariant\">https://chat.fhir.org/#narrow/stream/179166-implementers/topic/Period.20Datatype.20Invariant</a></p>\n<p>While running our unit tests after this fix, validation of Bundles that have entries without a <code>fullUrl</code> result in <code>false</code>, because <code>bld-8</code> (<code>fullUrl.contains('/_history/').not()</code>) goes off. </p>\n<p>Shouldn't this invariant be <code>fullUrl.exists.not() or fullUrl.contains('/_history/').not()</code> instead of just <code>fullUrl.contains('/_history/').not()</code>?</p>",
        "id": 271454640,
        "sender_full_name": "Marten Smits",
        "timestamp": 1644509853
    },
    {
        "content": "<p>If this is an issue, we need to get the fix into R4B...  <span class=\"user-mention\" data-user-id=\"191359\">@Bryn Rhodes</span> <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span></p>",
        "id": 271455189,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1644510065
    },
    {
        "content": "<p>Agree, that constraint should account for the case that fullUrl is not present.</p>",
        "id": 271456603,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1644510710
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191334\">@Marten Smits</span>, can you submit a change request?</p>",
        "id": 271495712,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1644527868
    },
    {
        "content": "<p>Will do!</p>",
        "id": 271500384,
        "sender_full_name": "Marten Smits",
        "timestamp": 1644529936
    },
    {
        "content": "<p>Done: <a href=\"https://jira.hl7.org/browse/FHIR-36006\">https://jira.hl7.org/browse/FHIR-36006</a></p>",
        "id": 271504732,
        "sender_full_name": "Marten Smits",
        "timestamp": 1644532125
    },
    {
        "content": "<p>How's that not been breaking things like HAPI if that's the case?</p>",
        "id": 271511873,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1644537095
    },
    {
        "content": "<p>Wow, that is a fun gotcha. Fwiw I find the \"implies\" syntax a bit more readable:</p>\n<div class=\"codehilite\"><pre><span></span><code>fullUrl.exists() implies fullUrl.contains(&#39;/_history/&#39;).not()\n</code></pre></div>\n\n<p>Or if you want terse:</p>\n<div class=\"codehilite\"><pre><span></span><code>fullUrl.contains(&#39;/_history/&#39;).allFalse()\n</code></pre></div>",
        "id": 271526262,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1644549628
    },
    {
        "content": "<p>Yeah, the <code>implies</code> is nice.</p>",
        "id": 271938955,
        "sender_full_name": "Ewout Kramer",
        "timestamp": 1644912733
    }
]