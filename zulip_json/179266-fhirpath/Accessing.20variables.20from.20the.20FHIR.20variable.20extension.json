[
    {
        "content": "<p>Are variables provided by <a href=\"http://hl7.org/fhir/StructureDefinition/variable\" target=\"_blank\" title=\"http://hl7.org/fhir/StructureDefinition/variable\">http://hl7.org/fhir/StructureDefinition/variable</a> (which says they appear in the FHIRPath context) to be accessed like environment variables by prefixing them with '%'?  Both the FHIR-specific variables (<a href=\"http://hl7.org/fhir/2018Sep/fhirpath.html#variables\" target=\"_blank\" title=\"http://hl7.org/fhir/2018Sep/fhirpath.html#variables\">http://hl7.org/fhir/2018Sep/fhirpath.html#variables</a>) and environment variables start with %.  I don't see anything in either the main FHIRPath spec or the FHIR extensions that discusses accessing other types of variables-- though I guess that is because <a href=\"http://hl7.org/fhir/StructureDefinition/variable\" target=\"_blank\" title=\"http://hl7.org/fhir/StructureDefinition/variable\">http://hl7.org/fhir/StructureDefinition/variable</a> is new.  I did notice that Grahame's blog post (<a href=\"http://www.healthintersections.com.au/?p=2835\" target=\"_blank\" title=\"http://www.healthintersections.com.au/?p=2835\">http://www.healthintersections.com.au/?p=2835</a>) used variable names without %, but I am wondering if maybe that was an oversight, since there is the potential then for confusion between a variable name and an attribute name of the structure being traversed.  (The confusion could be resolved by specifying a priority, but that priority would then need to be documented somewhere.)</p>",
        "id": 154011896,
        "sender_full_name": "Paul Lynch",
        "timestamp": 1540394560
    },
    {
        "content": "<p>I guess that was an oversight</p>",
        "id": 154012399,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1540559955
    },
    {
        "content": "<p>I added <a href=\"https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=19530&amp;start=0\" target=\"_blank\" title=\"https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=19530&amp;start=0\">GF#19530</a>-- a request for documentation about this.  For now, I will just assume that % should be used.</p>",
        "id": 154012659,
        "sender_full_name": "Paul Lynch",
        "timestamp": 1540572830
    },
    {
        "content": "<p>I had assumed that the % is what would be used,  or $ but haven't started to implement that part yet.</p>",
        "id": 154012747,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1540589670
    },
    {
        "content": "<p>I would just as soon stick with % for all variable types, unless there is a need to give the variables types separate name-spaces.  (My preference for that is becoming stronger as I am writing the code for it right now... but it not too much code to change if it goes a different way.)</p>",
        "id": 154012748,
        "sender_full_name": "Paul Lynch",
        "timestamp": 1540589847
    },
    {
        "content": "<p>$ is already a variable for $this</p>",
        "id": 154012762,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1540592594
    },
    {
        "content": "<p>So would be consistent with that too, where % is environment, including %resource, which feels like ore like a variable. So I'm on the fence on this too.</p>",
        "id": 154012763,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1540592679
    },
    {
        "content": "<p>In the grammar, '$this' is a very special thing defined as that particular string.  The % comes from \"externalConstant\", which I am happy to consider variable values, since they are passed in (i.e. external) to the fhirpath engine.</p>",
        "id": 154012765,
        "sender_full_name": "Paul Lynch",
        "timestamp": 1540592952
    },
    {
        "content": "<p>That makes some sense. Happy to continue with that. Did we get a tracker logged to clarify this?</p>",
        "id": 154012784,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1540598184
    },
    {
        "content": "<p>yes $ is special. % should be used in this case</p>",
        "id": 154012837,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1540627177
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191367\">@Brian Postlethwaite</span>  <a href=\"https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=19530&amp;start=0\" target=\"_blank\" title=\"https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=19530&amp;start=0\">GF#19530</a></p>",
        "id": 154012920,
        "sender_full_name": "Paul Lynch",
        "timestamp": 1540667628
    }
]