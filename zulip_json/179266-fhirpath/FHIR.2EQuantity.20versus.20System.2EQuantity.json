[
    {
        "content": "<p>The FHIR spec mentions the implicit conversion between FHIR.Quantity and System.Quantity including how to handle time-valued UCUM units:</p>\n<p><a href=\"http://hl7.org/fhir/fhirpath.html#quantity\" target=\"_blank\" title=\"http://hl7.org/fhir/fhirpath.html#quantity\">http://hl7.org/fhir/fhirpath.html#quantity</a></p>\n<p>but doesn't say much about how to compare quantities if they are not UCUM-based. How should a FHIRPath evaluation engine handle comparisons between two FHIR.Quantity nodes that are <em>not</em> UCUM quantities (either they have a code from a system other than UCUM or they do not use system/code and only unit)?</p>",
        "id": 180635544,
        "sender_full_name": "John Timm",
        "timestamp": 1573658004
    },
    {
        "content": "<p>FHIRPath requires that quantities be either UCUM units, or a calendar duration unit: <a href=\"http://build.fhir.org/ig/HL7/FHIRPath/branches/master/N1/#quantity\" target=\"_blank\" title=\"http://build.fhir.org/ig/HL7/FHIRPath/branches/master/N1/#quantity\">http://build.fhir.org/ig/HL7/FHIRPath/branches/master/N1/#quantity</a></p>",
        "id": 180639974,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1573660299
    },
    {
        "content": "<p>So if you wanted to deal with a Quantity value in FHIR that wasn't UCUM-coded, then you would have to either convert that to a UCUM unit (so it could be represented as a System.Quantity) or deal with it specifically as a FHIR.Quantity (i.e. doing the unit and value comparisons directly, rather than treating it as a quantity).</p>",
        "id": 180640128,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1573660380
    },
    {
        "content": "<p>Should <a href=\"https://build.fhir.org/fhirpath.html#types\" target=\"_blank\" title=\"https://build.fhir.org/fhirpath.html#types\">https://build.fhir.org/fhirpath.html#types</a> or <a href=\"https://build.fhir.org/fhirpath.html#quantity\" target=\"_blank\" title=\"https://build.fhir.org/fhirpath.html#quantity\">https://build.fhir.org/fhirpath.html#quantity</a> cover the expected behavior in this case?  What do the various implementations do?  Seems a bit under-specified...</p>",
        "id": 180648705,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1573665009
    },
    {
        "content": "<p>what could we specify?</p>",
        "id": 180668777,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1573677158
    },
    {
        "content": "<p>That two FHIR_Quantity are comparable if they have the same coded units (even if those units aren't UCUM)?</p>",
        "id": 180678383,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1573682964
    },
    {
        "content": "<p>yeah I guess we could do that. do you want to make a task?</p>",
        "id": 180678488,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1573683046
    },
    {
        "content": "<p>sure</p>",
        "id": 180678498,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1573683058
    },
    {
        "content": "<p>ok, i submitted <a href=\"https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=25216\" target=\"_blank\" title=\"https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=25216\">https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=25216</a></p>",
        "id": 180681036,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1573684611
    },
    {
        "content": "<p>I think for equality and equivalence, the definition follows from equality and equivalence for objects.</p>",
        "id": 180784875,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1573772145
    },
    {
        "content": "<p>From the perspective of FHIRPath, a FHIR.Quantity is a complex object, so the standard <code>=</code> and <code>~</code> operators apply.</p>",
        "id": 180784955,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1573772172
    }
]