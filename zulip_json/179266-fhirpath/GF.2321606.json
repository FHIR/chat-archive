[
    {
        "content": "<p>Lloyd correctly pointed out that this disposition is incorrectly assigning semantics to annotations in UCUM. Therefore the disposition should be applied with the following adjustments:</p>\n<ol>\n<li>\n<p>Quantities in FHIRPath use _either_ a UCUM unit or a calendar duration keyword</p>\n</li>\n<li>\n<p>Calendar duration keywords are represented as the keyword as a string (without curly braces), and are not represented as UCUM units.</p>\n</li>\n</ol>\n<p>Updated the proposed disposition for this tracker to reflect the use of calendar duration as the unit, rather than a UCUM annotation.</p>",
        "id": 178258272,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1571200438
    },
    {
        "content": "<p>I have applied this adjustment to the publication draft. <span class=\"user-mention\" data-user-id=\"194452\">@Bas van den Heuvel</span> , <span class=\"user-mention\" data-user-id=\"191328\">@Ewout Kramer</span> , <span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span>, <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> , <span class=\"user-mention\" data-user-id=\"195344\">@Paul Lynch</span> , <span class=\"user-mention\" data-user-id=\"191367\">@Brian Postlethwaite</span>, please take a look and let me know if you have any concerns with this adjustment.</p>",
        "id": 178258390,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1571200565
    },
    {
        "content": "<p>Previously, <a href=\"https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=20682&amp;start=0\" target=\"_blank\" title=\"https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=20682&amp;start=0\">GF#20682</a> effectively made 'a' be treated as \"year\" (calendar) for arithmetic purposes.  So I think the only change here is to disallow the use of 'min' through 'a'  in quantities being added to date/times.  That should not be a difficult change from an implementation point of view.  However, I am a little concerned that if the quantity is not under the expression author's control (e.g. if it comes from some FHIR resource) then there could be difficulties if those quantities come with UCUM units like 'a' or 'd'.   For instance, if a Questionnaire author is pulling some time value from an Observation and trying to add it to a date, I am not sure what facility the Questionnaire author would have for ensuring that the time Quantity is first converted to 's' or 'ms'.</p>",
        "id": 178293091,
        "sender_full_name": "Paul Lynch",
        "timestamp": 1571235435
    },
    {
        "content": "<p>Oh-- there is \"toQuantity\".  I guess that should work, though it will require an adjustment to existing FHIRPath expressions (if there are any doing date/time &amp; quantity arithmetic).</p>",
        "id": 178293296,
        "sender_full_name": "Paul Lynch",
        "timestamp": 1571235584
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"195344\">@Paul Lynch</span> , note also that <a href=\"http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=24856\" target=\"_blank\" title=\"http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=24856\">GF#24856</a> indicates that when FHIRPath is used within FHIR, UCUM time quantities are implicitly converted to their calendar equivalents, on the grounds that that is how the implementations already work.</p>",
        "id": 178295566,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1571236878
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191359\">@Bryn Rhodes</span>  That one (<a href=\"http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=24856\" target=\"_blank\" title=\"http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=24856\">GF#24856</a>) also mentions \"1 '{year}'\".  Is that resolution going to be updated as well?</p>",
        "id": 178301433,
        "sender_full_name": "Paul Lynch",
        "timestamp": 1571240544
    },
    {
        "content": "<p>Oops, I see that I had some outstanding changes on that (never clicked Save on my browser)</p>",
        "id": 178308245,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1571245510
    },
    {
        "content": "<p>Should be updated now</p>",
        "id": 178308348,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1571245574
    },
    {
        "content": "<p>Okay, so in <a href=\"http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=24856\" target=\"_blank\" title=\"http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=24856\">GF#24856</a>, when does that implicit conversion happen?  If it happens immediately prior to being used in arithmetic, then I think we are back the behavior of <a href=\"http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=20682\" target=\"_blank\" title=\"http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=20682\">GF#20682</a>-- you can use 'a' as a unit, and it means \"year\" in date/time arithmetic.  That sounds different than what <a href=\"http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=21606\" target=\"_blank\" title=\"http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=21606\">GF#21606</a> is saying.</p>",
        "id": 178309404,
        "sender_full_name": "Paul Lynch",
        "timestamp": 1571246381
    },
    {
        "content": "<p>When FHIRPath is used from FHIR, yes, that's the behavior. You can still get the definite quantity behavior if you want it, but you have to be explicit about it.</p>",
        "id": 178309835,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1571246679
    },
    {
        "content": "<p><a href=\"http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=21606\" target=\"_blank\" title=\"http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=21606\">GF#21606</a> is only about FHIRPath.</p>",
        "id": 178309842,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1571246689
    }
]