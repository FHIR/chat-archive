[
    {
        "content": "<p>hl7-fhircast-bot opened <a href=\"https://github.com/HL7/fhircast-docs/issues/104\" target=\"_blank\" title=\"https://github.com/HL7/fhircast-docs/issues/104\">Issue #104</a></p>\n<blockquote>\n<p>## May 2019 Ballot Comment: Include web sockets proposal</p>\n<p>Submitted by @MichaelTClifton on behalf of @isaacvetter (<a href=\"mailto:isaac@epic.com\" title=\"mailto:isaac@epic.com\">isaac@epic.com</a> )<br>\n<strong>Chapter/section:</strong>  Overall<br>\n<strong>Url:</strong> <br>\n<strong>Type:</strong> NEG <span aria-label=\"exclamation\" class=\"emoji emoji-2757\" role=\"img\" title=\"exclamation\">:exclamation:</span> Enhancement</p>\n<p><strong>Summary:</strong> Include web sockets proposal</p>\n<p><strong>Comment:</strong> We should include the draft web sockets interactions as defined in this github PR: <a href=\"https://github.com/HL7/fhircast-docs/pull/57\" target=\"_blank\" title=\"https://github.com/HL7/fhircast-docs/pull/57\">https://github.com/HL7/fhircast-docs/pull/57</a></p>\n<p>Multiple implementers have tested this functionality.</p>\n<hr>\n<p>_This issue was imported by @hl7-fhircast-bot from the <a href=\"https://bit.ly/fhircast-May-2019-ballot-comments\" target=\"_blank\" title=\"https://bit.ly/fhircast-May-2019-ballot-comments\">consolidated FHIRcast May 2019 ballot spreadsheet</a>._</p>\n</blockquote>",
        "id": 164570222,
        "sender_full_name": "Github Notifications (FHIRcast)",
        "timestamp": 1556653891
    },
    {
        "content": "<p>hl7-fhircast-bot labeled <a href=\"https://github.com/HL7/fhircast-docs/issues/104\" target=\"_blank\" title=\"https://github.com/HL7/fhircast-docs/issues/104\">Issue #104</a></p>\n<blockquote>\n<p>## May 2019 Ballot Comment: Include web sockets proposal</p>\n<p>Submitted by @MichaelTClifton on behalf of @isaacvetter (<a href=\"mailto:isaac@epic.com\" title=\"mailto:isaac@epic.com\">isaac@epic.com</a> )<br>\n<strong>Chapter/section:</strong>  Overall<br>\n<strong>Url:</strong> <br>\n<strong>Type:</strong> NEG <span aria-label=\"exclamation\" class=\"emoji emoji-2757\" role=\"img\" title=\"exclamation\">:exclamation:</span> Enhancement</p>\n<p><strong>Summary:</strong> Include web sockets proposal</p>\n<p><strong>Comment:</strong> We should include the draft web sockets interactions as defined in this github PR: <a href=\"https://github.com/HL7/fhircast-docs/pull/57\" target=\"_blank\" title=\"https://github.com/HL7/fhircast-docs/pull/57\">https://github.com/HL7/fhircast-docs/pull/57</a></p>\n<p>Multiple implementers have tested this functionality.</p>\n<hr>\n<p>_This issue was imported by @hl7-fhircast-bot from the <a href=\"https://bit.ly/fhircast-May-2019-ballot-comments\" target=\"_blank\" title=\"https://bit.ly/fhircast-May-2019-ballot-comments\">consolidated FHIRcast May 2019 ballot spreadsheet</a>._</p>\n</blockquote>",
        "id": 164570223,
        "sender_full_name": "Github Notifications (FHIRcast)",
        "timestamp": 1556653891
    },
    {
        "content": "<p>hl7-fhircast-bot labeled <a href=\"https://github.com/HL7/fhircast-docs/issues/104\" target=\"_blank\" title=\"https://github.com/HL7/fhircast-docs/issues/104\">Issue #104</a></p>\n<blockquote>\n<p>## May 2019 Ballot Comment: Include web sockets proposal</p>\n<p>Submitted by @MichaelTClifton on behalf of @isaacvetter (<a href=\"mailto:isaac@epic.com\" title=\"mailto:isaac@epic.com\">isaac@epic.com</a> )<br>\n<strong>Chapter/section:</strong>  Overall<br>\n<strong>Url:</strong> <br>\n<strong>Type:</strong> NEG <span aria-label=\"exclamation\" class=\"emoji emoji-2757\" role=\"img\" title=\"exclamation\">:exclamation:</span> Enhancement</p>\n<p><strong>Summary:</strong> Include web sockets proposal</p>\n<p><strong>Comment:</strong> We should include the draft web sockets interactions as defined in this github PR: <a href=\"https://github.com/HL7/fhircast-docs/pull/57\" target=\"_blank\" title=\"https://github.com/HL7/fhircast-docs/pull/57\">https://github.com/HL7/fhircast-docs/pull/57</a></p>\n<p>Multiple implementers have tested this functionality.</p>\n<hr>\n<p>_This issue was imported by @hl7-fhircast-bot from the <a href=\"https://bit.ly/fhircast-May-2019-ballot-comments\" target=\"_blank\" title=\"https://bit.ly/fhircast-May-2019-ballot-comments\">consolidated FHIRcast May 2019 ballot spreadsheet</a>._</p>\n</blockquote>",
        "id": 164570224,
        "sender_full_name": "Github Notifications (FHIRcast)",
        "timestamp": 1556653891
    },
    {
        "content": "<p>hl7-fhircast-bot edited <a href=\"https://github.com/HL7/fhircast-docs/issues/104\" target=\"_blank\" title=\"https://github.com/HL7/fhircast-docs/issues/104\">Issue #104</a></p>\n<blockquote>\n<p>## May 2019 Ballot Comment: Include web sockets proposal</p>\n<p>Submitted by @MichaelTClifton on behalf of @isaacvetter (<a href=\"mailto:isaac@epic.com\" title=\"mailto:isaac@epic.com\">isaac@epic.com</a> )<br>\n<strong>Chapter/section:</strong>  Overall<br>\n<strong>Url:</strong> <br>\n<strong>Type:</strong> NEG <span aria-label=\"exclamation\" class=\"emoji emoji-2757\" role=\"img\" title=\"exclamation\">:exclamation:</span> Enhancement</p>\n<p><strong>Summary:</strong> Include web sockets proposal</p>\n<p><strong>Comment:</strong> We should include the draft web sockets interactions as defined in this github PR: <a href=\"https://github.com/HL7/fhircast-docs/pull/57\" target=\"_blank\" title=\"https://github.com/HL7/fhircast-docs/pull/57\">https://github.com/HL7/fhircast-docs/pull/57</a></p>\n<p>Multiple implementers have tested this functionality.</p>\n<hr>\n<p>_This issue was imported by @hl7-fhircast-bot from the <a href=\"https://bit.ly/fhircast-May-2019-ballot-comments\" target=\"_blank\" title=\"https://bit.ly/fhircast-May-2019-ballot-comments\">consolidated FHIRcast May 2019 ballot spreadsheet</a>._</p>\n</blockquote>",
        "id": 164570225,
        "sender_full_name": "Github Notifications (FHIRcast)",
        "timestamp": 1556653891
    },
    {
        "content": "<p>isaacvetter labeled <a href=\"https://github.com/HL7/fhircast-docs/issues/104\" target=\"_blank\" title=\"https://github.com/HL7/fhircast-docs/issues/104\">Issue #104</a></p>\n<blockquote>\n<p>## May 2019 Ballot Comment: Include web sockets proposal</p>\n<p>Submitted by @MichaelTClifton on behalf of @isaacvetter (<a href=\"mailto:isaac@epic.com\" title=\"mailto:isaac@epic.com\">isaac@epic.com</a> )<br>\n<strong>Chapter/section:</strong>  Overall<br>\n<strong>Url:</strong> <br>\n<strong>Type:</strong> NEG <span aria-label=\"exclamation\" class=\"emoji emoji-2757\" role=\"img\" title=\"exclamation\">:exclamation:</span> Enhancement</p>\n<p><strong>Summary:</strong> Include web sockets proposal</p>\n<p><strong>Comment:</strong> We should include the draft web sockets interactions as defined in this github PR: <a href=\"https://github.com/HL7/fhircast-docs/pull/57\" target=\"_blank\" title=\"https://github.com/HL7/fhircast-docs/pull/57\">https://github.com/HL7/fhircast-docs/pull/57</a></p>\n<p>Multiple implementers have tested this functionality.</p>\n<hr>\n<p>_This issue was imported by @hl7-fhircast-bot from the <a href=\"https://bit.ly/fhircast-May-2019-ballot-comments\" target=\"_blank\" title=\"https://bit.ly/fhircast-May-2019-ballot-comments\">consolidated FHIRcast May 2019 ballot spreadsheet</a>._</p>\n</blockquote>",
        "id": 164574934,
        "sender_full_name": "Github Notifications (FHIRcast)",
        "timestamp": 1556656981
    },
    {
        "content": "<p>gkustas <a href=\"https://github.com/HL7/fhircast-docs/issues/104#issuecomment-489734528\" target=\"_blank\" title=\"https://github.com/HL7/fhircast-docs/issues/104#issuecomment-489734528\">commented</a> on <a href=\"https://github.com/HL7/fhircast-docs/issues/104\" target=\"_blank\" title=\"https://github.com/HL7/fhircast-docs/issues/104\">Issue #104</a></p>\n<blockquote>\n<p>I too would like the websocket proposal added, but for other reasons than the single page application. Several discussions have occurred on the subject in Zulip as well.</p>\n</blockquote>",
        "id": 165008691,
        "sender_full_name": "Github Notifications (FHIRcast)",
        "timestamp": 1557168989
    },
    {
        "content": "<p>bvdh <a href=\"https://github.com/HL7/fhircast-docs/issues/104#issuecomment-490220565\" target=\"_blank\" title=\"https://github.com/HL7/fhircast-docs/issues/104#issuecomment-490220565\">commented</a> on <a href=\"https://github.com/HL7/fhircast-docs/issues/104\" target=\"_blank\" title=\"https://github.com/HL7/fhircast-docs/issues/104\">Issue #104</a></p>\n<blockquote>\n<p>Websocket options that where discussed include:<br>\n1 STOMP<br>\n2 basic websocket</p>\n<p><strong>Basic requirements to be met with the web-socket solution:</strong><br>\n1 Allow web-only clients to receive FHIR-Cast events.<br>\n2 Allow to subscribe to events, unsubscribe from events.<br>\n3 Only clients authorized for an event can receive it.<br>\n4 Only clients authorized to send an event can send it.<br>\n5 Easily implementable using available technologies</p>\n<p><strong>STOMP</strong><br>\nSTOMP (<a href=\"https://stomp.github.io/\" target=\"_blank\" title=\"https://stomp.github.io/\">https://stomp.github.io/</a>) supports all of these requirements out of the box. It is a full alternative to the web-sub approach and can be seen as an alternative implementation. Libraries are available for all common languages: <a href=\"https://stomp.github.io/implementations.html\" target=\"_blank\" title=\"https://stomp.github.io/implementations.html\">https://stomp.github.io/implementations.html</a><br>\nSTOMP libraries typically have native support for authentication.</p>\n<p><strong>Basic Websocket</strong><br>\nThis approach indicates websocket as an alternative channel for sending events. Subscribe/Unsubscribe to events is done using the WebSub pattern. Additional specification is required to verify that the receiver is the one that made the request and is the only one that can receive the events. The websocket URL would be unique for each client and difficult to guess in order to prevent that unauthorized clients can connect.<br>\nA pattern that could work could be something like the following:<br>\n  A-&gt;B : POST with channel = websocket<br>\n  Return -&gt;  202 Accepted – include websocket URL to be used.<br>\n  A-&gt;B: connect to websocket URL<br>\n  B-&gt;B detects websocket connection<br>\n  B -&gt; A: send intent verification (over websocket)<br>\n  A-&gt;B: send verification response (REST-full or over websocket?)<br>\nThis approach will also cover the requirements but does require further FHIRCast specific specification and verification effort.</p>\n<p>Based on an ease of implementation and specification effort, the STOMP approach would have my preference.</p>\n</blockquote>",
        "id": 165102022,
        "sender_full_name": "Github Notifications (FHIRcast)",
        "timestamp": 1557256771
    },
    {
        "content": "<p>isaacvetter <a href=\"https://github.com/HL7/fhircast-docs/issues/104#issuecomment-490270605\" target=\"_blank\" title=\"https://github.com/HL7/fhircast-docs/issues/104#issuecomment-490270605\">commented</a> on <a href=\"https://github.com/HL7/fhircast-docs/issues/104\" target=\"_blank\" title=\"https://github.com/HL7/fhircast-docs/issues/104\">Issue #104</a></p>\n<blockquote>\n<p>Hey @bvdh ,</p>\n<p>For your <strong>Basic Websocket</strong> feedback, can you read this proposal as the [proposed websocket](<a href=\"https://github.com/HL7/fhircast-docs/pull/57/files?short_path=1a523bd#diff-1a523bd9fa0dbf998008b37579210e12\" target=\"_blank\" title=\"https://github.com/HL7/fhircast-docs/pull/57/files?short_path=1a523bd#diff-1a523bd9fa0dbf998008b37579210e12\">https://github.com/HL7/fhircast-docs/pull/57/files?short_path=1a523bd#diff-1a523bd9fa0dbf998008b37579210e12</a> ?</p>\n<p>What do you think about this?</p>\n<p>Isaac</p>\n</blockquote>",
        "id": 165115187,
        "sender_full_name": "Github Notifications (FHIRcast)",
        "timestamp": 1557266364
    },
    {
        "content": "<p>isaacvetter edited a <a href=\"https://github.com/HL7/fhircast-docs/issues/104#issuecomment-490270605\" target=\"_blank\" title=\"https://github.com/HL7/fhircast-docs/issues/104#issuecomment-490270605\">comment</a> on <a href=\"https://github.com/HL7/fhircast-docs/issues/104\" target=\"_blank\" title=\"https://github.com/HL7/fhircast-docs/issues/104\">Issue #104</a></p>\n<blockquote>\n<p>Hey @bvdh ,</p>\n<p>For your <strong>Basic Websocket</strong> feedback, can you read this proposal as the <a href=\"https://github.com/HL7/fhircast-docs/pull/57/files?short_path=1a523bd#diff-1a523bd9fa0dbf998008b37579210e12\" target=\"_blank\" title=\"https://github.com/HL7/fhircast-docs/pull/57/files?short_path=1a523bd#diff-1a523bd9fa0dbf998008b37579210e12\">proposed websocket solution</a> ?</p>\n<p>What do you think about this?</p>\n<p>Isaac</p>\n</blockquote>",
        "id": 165115225,
        "sender_full_name": "Github Notifications (FHIRcast)",
        "timestamp": 1557266402
    },
    {
        "content": "<p>gkustas <a href=\"https://github.com/HL7/fhircast-docs/issues/104#issuecomment-490280424\" target=\"_blank\" title=\"https://github.com/HL7/fhircast-docs/issues/104#issuecomment-490280424\">commented</a> on <a href=\"https://github.com/HL7/fhircast-docs/issues/104\" target=\"_blank\" title=\"https://github.com/HL7/fhircast-docs/issues/104\">Issue #104</a></p>\n<blockquote>\n<p>Bas, Isaac</p>\n<p>I need to read through this all more carefully, but just for starters:</p>\n<p>Regarding the websocket connection and validation:</p>\n<p>The important thing that isn't mentioned here is the authentication<br>\nmechanism and how it relates to obtaining a \"topic\" (or user session). We<br>\ndiscussed this in great detail at the last connectathon.</p>\n<p>Once a client has authenticated and receives a topic, it can establish a<br>\nsecure websocket connection with the hub. It simply uses an \"application<br>\nsecret\" in the bearer authentication header and a topic. The hub can easily<br>\nvalidate this identity and allow/disallow the connection, correct? I don't<br>\nsee the need for the protocol you provided in the \"basic\" approach.</p>\n<p>This is what I've implemented in out prototype. I proposed it a while ago<br>\nin Zulip:</p>\n<p>1. Client calls a GetTopic RESTful method on the authentication server<br>\n(which is our hub). It sends an application secret and a user name. The<br>\nuser name is configured somewhere is persistent storage, in our case an SQL<br>\ntable, and it is associated with a randomly created topic (another<br>\ndiscussion: these topics should probably be automatically recreated<br>\nperiodically as an additional security precaution).</p>\n<p>We envision this current implementation moving to an OAuth version and<br>\nhopefully standardizing on email addresses as identifiers for radiologists<br>\nacross applications (PACS, RIS, etc.)</p>\n<p>2. If the application secret and the user name jive, the topic is returned<br>\nto the client.</p>\n<p>3. The client then subscribes to the hub using the application secret (in<br>\nthe header) and topic, and specifying the websocket channel type</p>\n<p>4. The client establishes a websocket connection with the hub using the<br>\nhub's base url and the topic as an endpoint, like<br>\nwss://fhirhub.company.com/&lt;topic<br>\ngoes here&gt;. The hub can re-authenticate the topic as belonging to the<br>\napplication identified by the secret, reasonably assuring that this<br>\nconnection attempt is valid.</p>\n<p>I think that limiting websocket use to where it is needed (events only)<br>\nwould help keep the implementation \"clean\" with respect to the RESTful<br>\nspec. Remember, as Martin recommended, we also wrap our websocket messages<br>\nin an object that contains a \"header\" and \"body\" which also aids in that<br>\neffort. The header will always contain the app secret. The body will<br>\ncontain a notification event which will have an ID (defined by the<br>\npublisher) and a timestamp.</p>\n<p>On Tue, May 7, 2019 at 5:59 PM Isaac Vetter &lt;<a href=\"mailto:notifications@github.com\" title=\"mailto:notifications@github.com\">notifications@github.com</a>&gt;<br>\nwrote:</p>\n<blockquote>\n<p>Hey @bvdh &lt;<a href=\"https://github.com/bvdh\" target=\"_blank\" title=\"https://github.com/bvdh\">https://github.com/bvdh</a>&gt; ,</p>\n<p>For your <em>Basic Websocket</em> feedback, can you read this proposal as the<br>\n[proposed websocket](<br>\n<a href=\"https://github.com/HL7/fhircast-docs/pull/57/files?short_path=1a523bd#diff-1a523bd9fa0dbf998008b37579210e12\" target=\"_blank\" title=\"https://github.com/HL7/fhircast-docs/pull/57/files?short_path=1a523bd#diff-1a523bd9fa0dbf998008b37579210e12\">https://github.com/HL7/fhircast-docs/pull/57/files?short_path=1a523bd#diff-1a523bd9fa0dbf998008b37579210e12</a><br>\n?</p>\n<p>What do you think about this?</p>\n<p>Isaac</p>\n<p>—<br>\nYou are receiving this because you commented.<br>\nReply to this email directly, view it on GitHub<br>\n&lt;<a href=\"https://github.com/HL7/fhircast-docs/issues/104#issuecomment-490270605\" target=\"_blank\" title=\"https://github.com/HL7/fhircast-docs/issues/104#issuecomment-490270605\">https://github.com/HL7/fhircast-docs/issues/104#issuecomment-490270605</a>&gt;,<br>\nor mute the thread<br>\n&lt;<a href=\"https://github.com/notifications/unsubscribe-auth/ABODZ3QBOALOZBMSEBFOJKLPUH3T3ANCNFSM4HJPVEHA\" target=\"_blank\" title=\"https://github.com/notifications/unsubscribe-auth/ABODZ3QBOALOZBMSEBFOJKLPUH3T3ANCNFSM4HJPVEHA\">https://github.com/notifications/unsubscribe-auth/ABODZ3QBOALOZBMSEBFOJKLPUH3T3ANCNFSM4HJPVEHA</a>&gt;<br>\n.</p>\n</blockquote>\n<p>-- <br>\nGeorge Kustas</p>\n</blockquote>",
        "id": 165117988,
        "sender_full_name": "Github Notifications (FHIRcast)",
        "timestamp": 1557268833
    },
    {
        "content": "<p>bvdh <a href=\"https://github.com/HL7/fhircast-docs/issues/104#issuecomment-490410342\" target=\"_blank\" title=\"https://github.com/HL7/fhircast-docs/issues/104#issuecomment-490410342\">commented</a> on <a href=\"https://github.com/HL7/fhircast-docs/issues/104\" target=\"_blank\" title=\"https://github.com/HL7/fhircast-docs/issues/104\">Issue #104</a></p>\n<blockquote>\n<p>There are multiple topics in this discussion we should separate from each other.</p>\n<p><strong>Determination of the topic to be used</strong><br>\nThis is an important topic but outside the scope of the websocket discussion. I propose to keep this in line with the current spec.  The controlling application (by magic) can create a sessions, the Smart launch mechanism is used to communicate this to the clients. If we want to change this, this should be handled as a separate ticket.</p>\n<p><strong>Feedback on Basic Websocket proposal</strong><br>\nIt starts with indication that websocket is to be used using Subscribe(hub.channel.type=websocket).<br>\nThe result of this action is that: client is subscribed to a sub-set of events to be send over websocket.</p>\n<p>Based on the session management I can distinguish between the different web-socket sessions. <br>\nIn order to send the correct events to the correct client, I need to link the session to a subscription.<br>\nThe handshake I indicated in my previous proposal will allow for such linkage. Other approaches are also possible.<br>\nI have difficulties understanding what is meant in step 4 with “The hub can re-authenticate the topic as belonging to the application identified by the secret, reasonably assuring that this connection attempt is valid.”  Is this step intended to link the session to the subscription?</p>\n<p>Overall, I do agree that using the Websocket only for sending events has it advantages. It reuses the websub pattern in an elegant way and prevents having to implement a bidirectional protocol over websosckets. <br>\nBut, the discussion presented above does provide proof that this will require us to specify, test and verify a new way to use websockets. STOMP has already walked that path and would prevent us doing this additional work. It also comes with an extensive set of libraries we can use. <br>\nWhat advantages does this alternative approach have that justifies us spending this time and effort?</p>\n<p>As such I still propose that we use the STOMP approach.</p>\n</blockquote>",
        "id": 165146225,
        "sender_full_name": "Github Notifications (FHIRcast)",
        "timestamp": 1557306479
    },
    {
        "content": "<p>gkustas <a href=\"https://github.com/HL7/fhircast-docs/issues/104#issuecomment-490489657\" target=\"_blank\" title=\"https://github.com/HL7/fhircast-docs/issues/104#issuecomment-490489657\">commented</a> on <a href=\"https://github.com/HL7/fhircast-docs/issues/104\" target=\"_blank\" title=\"https://github.com/HL7/fhircast-docs/issues/104\">Issue #104</a></p>\n<blockquote>\n<p>Yes, in step 4, the hub checks that the application secret and topic are<br>\nvalid (using the authentication data in the DB using our implementation). I<br>\nsee how that is not exactly elegant, and I am open to any suggestion. The<br>\nproblem is I don't understand how STOMP is doing for us. You mention the<br>\nsteps:</p>\n<p>1. A-&gt;B : POST with channel = websocket<br>\n   2. Return -&gt; 202 Accepted – include websocket URL to be used.<br>\n   3. A-&gt;B: connect to websocket URL<br>\n   4. B-&gt;B detects websocket connection<br>\n   5. B -&gt; A: send intent verification (over websocket)<br>\n   6. A-&gt;B: send verification response (REST-full or over websocket?)<br>\n   - How does STOMP accomplish this for us? Can you provide a pseudo-code<br>\n   example possibly (don't go to a lot of effort)<br>\n   - I assume step 1 is the RESTful call to subscribe, and the hub would<br>\n   return an endpoint similar to our implementation using some unique id?<br>\n   - What is step 5-6? After step 4 isn't everything done?<br>\n   - Sending and acknowledging events (although another \"topic\") still<br>\n   needs to be considered. How will STOMP work compared to a simple JSON<br>\n   approach?</p>\n<p>I will need to read more about it, but steps 1-4 seem like what we are<br>\ndoing, the only difference being the hub returns the endpoint in the<br>\nSubscribe (which I like - I should have done that to begin with).</p>\n<p>Like I said, I'm open, but I was very intimidated by STOMP when I looked at<br>\nit. It seemed like a lot of work.</p>\n<p>On Wed, May 8, 2019 at 5:08 AM Bas van den Heuvel &lt;<a href=\"mailto:notifications@github.com\" title=\"mailto:notifications@github.com\">notifications@github.com</a>&gt;<br>\nwrote:</p>\n<blockquote>\n<p>There are multiple topics in this discussion we should separate from each<br>\nother.</p>\n<p><em>Determination of the topic to be used</em><br>\nThis is an important topic but outside the scope of the websocket<br>\ndiscussion. I propose to keep this in line with the current spec. The<br>\ncontrolling application (by magic) can create a sessions, the Smart launch<br>\nmechanism is used to communicate this to the clients. If we want to change<br>\nthis, this should be handled as a separate ticket.</p>\n<p><em>Feedback on Basic Websocket proposal</em><br>\nIt starts with indication that websocket is to be used using<br>\nSubscribe(hub.channel.type=websocket).<br>\nThe result of this action is that: client is subscribed to a sub-set of<br>\nevents to be send over websocket.</p>\n<p>Based on the session management I can distinguish between the different<br>\nweb-socket sessions.<br>\nIn order to send the correct events to the correct client, I need to link<br>\nthe session to a subscription.<br>\nThe handshake I indicated in my previous proposal will allow for such<br>\nlinkage. Other approaches are also possible.<br>\nI have difficulties understanding what is meant in step 4 with “The hub<br>\ncan re-authenticate the topic as belonging to the application identified by<br>\nthe secret, reasonably assuring that this connection attempt is valid.” Is<br>\nthis step intended to link the session to the subscription?</p>\n<p>Overall, I do agree that using the Websocket only for sending events has<br>\nit advantages. It reuses the websub pattern in an elegant way and prevents<br>\nhaving to implement a bidirectional protocol over websosckets.<br>\nBut, the discussion presented above does provide proof that this will<br>\nrequire us to specify, test and verify a new way to use websockets. STOMP<br>\nhas already walked that path and would prevent us doing this additional<br>\nwork. It also comes with an extensive set of libraries we can use.<br>\nWhat advantages does this alternative approach have that justifies us<br>\nspending this time and effort?</p>\n<p>As such I still propose that we use the STOMP approach.</p>\n<p>—<br>\nYou are receiving this because you commented.<br>\nReply to this email directly, view it on GitHub<br>\n&lt;<a href=\"https://github.com/HL7/fhircast-docs/issues/104#issuecomment-490410342\" target=\"_blank\" title=\"https://github.com/HL7/fhircast-docs/issues/104#issuecomment-490410342\">https://github.com/HL7/fhircast-docs/issues/104#issuecomment-490410342</a>&gt;,<br>\nor mute the thread<br>\n&lt;<a href=\"https://github.com/notifications/unsubscribe-auth/ABODZ3Q4PA4RHXBZR46NFB3PUKJ67ANCNFSM4HJPVEHA\" target=\"_blank\" title=\"https://github.com/notifications/unsubscribe-auth/ABODZ3Q4PA4RHXBZR46NFB3PUKJ67ANCNFSM4HJPVEHA\">https://github.com/notifications/unsubscribe-auth/ABODZ3Q4PA4RHXBZR46NFB3PUKJ67ANCNFSM4HJPVEHA</a>&gt;<br>\n.</p>\n</blockquote>\n<p>-- <br>\nGeorge Kustas</p>\n</blockquote>",
        "id": 165163679,
        "sender_full_name": "Github Notifications (FHIRcast)",
        "timestamp": 1557322828
    },
    {
        "content": "<p>bvdh <a href=\"https://github.com/HL7/fhircast-docs/issues/104#issuecomment-490502506\" target=\"_blank\" title=\"https://github.com/HL7/fhircast-docs/issues/104#issuecomment-490502506\">commented</a> on <a href=\"https://github.com/HL7/fhircast-docs/issues/104\" target=\"_blank\" title=\"https://github.com/HL7/fhircast-docs/issues/104\">Issue #104</a></p>\n<blockquote>\n<p>The example above is not a STOMP proposal but my take on Basic Websockets.</p>\n<p>An example of a STOMP implementation can be found at <a href=\"https://github.com/PhilipsOnFhir/fhir-cast\" target=\"_blank\" title=\"https://github.com/PhilipsOnFhir/fhir-cast\">https://github.com/PhilipsOnFhir/fhir-cast</a></p>\n<p>The server side implementation is <a href=\"https://github.com/PhilipsOnFhir/fhir-cast/tree/develop/library/src/main/java/com/github/philipsonfhir/fhircast/server/wsstomp\" target=\"_blank\" title=\"https://github.com/PhilipsOnFhir/fhir-cast/tree/develop/library/src/main/java/com/github/philipsonfhir/fhircast/server/wsstomp\">https://github.com/PhilipsOnFhir/fhir-cast/tree/develop/library/src/main/java/com/github/philipsonfhir/fhircast/server/wsstomp</a></p>\n<p>The client side implementation (angular) <br>\n<a href=\"https://github.com/PhilipsOnFhir/fhir-cast/tree/develop/websocket\" target=\"_blank\" title=\"https://github.com/PhilipsOnFhir/fhir-cast/tree/develop/websocket\">https://github.com/PhilipsOnFhir/fhir-cast/tree/develop/websocket</a></p>\n<p>STOMP is a full alternative to the websub specification. Implementing it from scratch will be more work than the Basic Websocket approach. Implementing it based on libraries is a lot easier because a lot of the current websocket deployments are using STOMP.</p>\n</blockquote>",
        "id": 165166381,
        "sender_full_name": "Github Notifications (FHIRcast)",
        "timestamp": 1557324830
    },
    {
        "content": "<p>isaacvetter <a href=\"https://github.com/HL7/fhircast-docs/issues/104#issuecomment-490506203\" target=\"_blank\" title=\"https://github.com/HL7/fhircast-docs/issues/104#issuecomment-490506203\">commented</a> on <a href=\"https://github.com/HL7/fhircast-docs/issues/104\" target=\"_blank\" title=\"https://github.com/HL7/fhircast-docs/issues/104\">Issue #104</a></p>\n<blockquote>\n<p>Resolution: Considered for future use</p>\n<p>Websocket support is critical path for FHIRcast, we still need more implementer feedback and experience. Following STU1 ballot, will publish #57 and specifically test websocket support at connectathon in Sept.</p>\n<p>Mover: Isaac, Niklas<br>\nAffirmative, Abstention, Negative: 14-0-0</p>\n</blockquote>",
        "id": 165167159,
        "sender_full_name": "Github Notifications (FHIRcast)",
        "timestamp": 1557325407
    },
    {
        "content": "<p>wmaethner labeled <a href=\"https://github.com/HL7/fhircast-docs/issues/104\" target=\"_blank\" title=\"https://github.com/HL7/fhircast-docs/issues/104\">Issue #104</a></p>\n<blockquote>\n<p>## May 2019 Ballot Comment: Include web sockets proposal</p>\n<p>Submitted by @MichaelTClifton on behalf of @isaacvetter (<a href=\"mailto:isaac@epic.com\" title=\"mailto:isaac@epic.com\">isaac@epic.com</a> )<br>\n<strong>Chapter/section:</strong>  Overall<br>\n<strong>Url:</strong> <br>\n<strong>Type:</strong> NEG <span aria-label=\"exclamation\" class=\"emoji emoji-2757\" role=\"img\" title=\"exclamation\">:exclamation:</span> Enhancement</p>\n<p><strong>Summary:</strong> Include web sockets proposal</p>\n<p><strong>Comment:</strong> We should include the draft web sockets interactions as defined in this github PR: <a href=\"https://github.com/HL7/fhircast-docs/pull/57\" target=\"_blank\" title=\"https://github.com/HL7/fhircast-docs/pull/57\">https://github.com/HL7/fhircast-docs/pull/57</a></p>\n<p>Multiple implementers have tested this functionality.</p>\n<hr>\n<p>_This issue was imported by @hl7-fhircast-bot from the <a href=\"https://bit.ly/fhircast-May-2019-ballot-comments\" target=\"_blank\" title=\"https://bit.ly/fhircast-May-2019-ballot-comments\">consolidated FHIRcast May 2019 ballot spreadsheet</a>._</p>\n</blockquote>",
        "id": 165167174,
        "sender_full_name": "Github Notifications (FHIRcast)",
        "timestamp": 1557325420
    },
    {
        "content": "<p>gkustas <a href=\"https://github.com/HL7/fhircast-docs/issues/104#issuecomment-490567139\" target=\"_blank\" title=\"https://github.com/HL7/fhircast-docs/issues/104#issuecomment-490567139\">commented</a> on <a href=\"https://github.com/HL7/fhircast-docs/issues/104\" target=\"_blank\" title=\"https://github.com/HL7/fhircast-docs/issues/104\">Issue #104</a></p>\n<blockquote>\n<p>Thanks Isaac. I agree we all need more experience. I hope we can attract<br>\nall the players to FHIRCast.</p>\n<p>Thanks to you too Bas. I started looking at your angular app to get a<br>\nbetter understanding. I'd like to continue the conversation sometime. Right<br>\nnow Nuance is pushing us to get this going, so I'm hoping that whatever I<br>\nimplement at least comes close to the eventual spec ;-)</p>\n<p>On Wed, May 8, 2019 at 10:23 AM Isaac Vetter &lt;<a href=\"mailto:notifications@github.com\" title=\"mailto:notifications@github.com\">notifications@github.com</a>&gt;<br>\nwrote:</p>\n<blockquote>\n<p>Resolution: Considered for future use</p>\n<p>Websocket support is critical path for FHIRcast, we still need more<br>\nimplementer feedback and experience. Following STU1 ballot, will publish<br>\n#57 &lt;<a href=\"https://github.com/HL7/fhircast-docs/pull/57\" target=\"_blank\" title=\"https://github.com/HL7/fhircast-docs/pull/57\">https://github.com/HL7/fhircast-docs/pull/57</a>&gt; and specifically test<br>\nwebsocket support at connectathon in Sept.</p>\n<p>Mover: Isaac, Niklas<br>\nAffirmative, Abstention, Negative: 14-0-0</p>\n<p>—<br>\nYou are receiving this because you commented.<br>\nReply to this email directly, view it on GitHub<br>\n&lt;<a href=\"https://github.com/HL7/fhircast-docs/issues/104#issuecomment-490506203\" target=\"_blank\" title=\"https://github.com/HL7/fhircast-docs/issues/104#issuecomment-490506203\">https://github.com/HL7/fhircast-docs/issues/104#issuecomment-490506203</a>&gt;,<br>\nor mute the thread<br>\n&lt;<a href=\"https://github.com/notifications/unsubscribe-auth/ABODZ3URWW5NJWBU3LL3K6DPULO57ANCNFSM4HJPVEHA\" target=\"_blank\" title=\"https://github.com/notifications/unsubscribe-auth/ABODZ3URWW5NJWBU3LL3K6DPULO57ANCNFSM4HJPVEHA\">https://github.com/notifications/unsubscribe-auth/ABODZ3URWW5NJWBU3LL3K6DPULO57ANCNFSM4HJPVEHA</a>&gt;<br>\n.</p>\n</blockquote>\n<p>-- <br>\nGeorge Kustas</p>\n</blockquote>",
        "id": 165180490,
        "sender_full_name": "Github Notifications (FHIRcast)",
        "timestamp": 1557334767
    },
    {
        "content": "<p>gkustas <a href=\"https://github.com/HL7/fhircast-docs/issues/104#issuecomment-491295848\" target=\"_blank\" title=\"https://github.com/HL7/fhircast-docs/issues/104#issuecomment-491295848\">commented</a> on <a href=\"https://github.com/HL7/fhircast-docs/issues/104\" target=\"_blank\" title=\"https://github.com/HL7/fhircast-docs/issues/104\">Issue #104</a>:</p>\n<blockquote>\n<p>Bas, Can a client communicate to a FHIRCast hub that is implemented using<br>\nSTOMP, without using STOMP itself?</p>\n<p>- If a vendor doesn't want to use a third party library, can they simply<br>\n   send messages to the hub per the STOMP format/spec? I realize that this<br>\n   would be re-building the STOMP library (or a small subset of it).<br>\n   - What does STOMP do other than support a message format and initial<br>\n   handshaking, and is that in a spec?<br>\n   - The FHIR data is represented in JSON or XML. It would remain that way<br>\n   embedded in a STOMP message, correct?</p>\n<p>I don't know if I'm making sense, because I haven't researched STOMP fully<br>\n- I am starting on it this morning.</p>\n<p>I don't think Nuance will have a problem with the third party library as<br>\nlong as it is open source, but I'm concerned someone might.</p>\n<p>Thanks very much!</p>\n<p>On Wed, May 8, 2019 at 12:59 PM George Kustas &lt;<a href=\"mailto:gkustas@gmail.com\" title=\"mailto:gkustas@gmail.com\">gkustas@gmail.com</a>&gt; wrote:</p>\n<blockquote>\n<p>Thanks Isaac. I agree we all need more experience. I hope we can attract<br>\nall the players to FHIRCast.</p>\n<p>Thanks to you too Bas. I started looking at your angular app to get a<br>\nbetter understanding. I'd like to continue the conversation sometime. Right<br>\nnow Nuance is pushing us to get this going, so I'm hoping that whatever I<br>\nimplement at least comes close to the eventual spec ;-)</p>\n<p>On Wed, May 8, 2019 at 10:23 AM Isaac Vetter &lt;<a href=\"mailto:notifications@github.com\" title=\"mailto:notifications@github.com\">notifications@github.com</a>&gt;<br>\nwrote:</p>\n<blockquote>\n<p>Resolution: Considered for future use</p>\n<p>Websocket support is critical path for FHIRcast, we still need more<br>\nimplementer feedback and experience. Following STU1 ballot, will publish<br>\n#57 &lt;<a href=\"https://github.com/HL7/fhircast-docs/pull/57\" target=\"_blank\" title=\"https://github.com/HL7/fhircast-docs/pull/57\">https://github.com/HL7/fhircast-docs/pull/57</a>&gt; and specifically test<br>\nwebsocket support at connectathon in Sept.</p>\n<p>Mover: Isaac, Niklas<br>\nAffirmative, Abstention, Negative: 14-0-0</p>\n<p>—<br>\nYou are receiving this because you commented.<br>\nReply to this email directly, view it on GitHub<br>\n&lt;<a href=\"https://github.com/HL7/fhircast-docs/issues/104#issuecomment-490506203\" target=\"_blank\" title=\"https://github.com/HL7/fhircast-docs/issues/104#issuecomment-490506203\">https://github.com/HL7/fhircast-docs/issues/104#issuecomment-490506203</a>&gt;,<br>\nor mute the thread<br>\n&lt;<a href=\"https://github.com/notifications/unsubscribe-auth/ABODZ3URWW5NJWBU3LL3K6DPULO57ANCNFSM4HJPVEHA\" target=\"_blank\" title=\"https://github.com/notifications/unsubscribe-auth/ABODZ3URWW5NJWBU3LL3K6DPULO57ANCNFSM4HJPVEHA\">https://github.com/notifications/unsubscribe-auth/ABODZ3URWW5NJWBU3LL3K6DPULO57ANCNFSM4HJPVEHA</a>&gt;<br>\n.</p>\n</blockquote>\n<p>--<br>\nGeorge Kustas<br>\n</p>\n</blockquote>\n<p>-- <br>\nGeorge Kustas</p>\n</blockquote>",
        "id": 165337548,
        "sender_full_name": "Github Notifications (FHIRcast)",
        "timestamp": 1557496248
    },
    {
        "content": "<p>isaacvetter edited a <a href=\"https://github.com/HL7/fhircast-docs/issues/104#issuecomment-490506203\" target=\"_blank\" title=\"https://github.com/HL7/fhircast-docs/issues/104#issuecomment-490506203\">comment</a> on <a href=\"https://github.com/HL7/fhircast-docs/issues/104\" target=\"_blank\" title=\"https://github.com/HL7/fhircast-docs/issues/104\">Issue #104</a>:</p>\n<blockquote>\n<h2>Montreal May 2019 Working Group Vote</h2>\n<p>@isaacvetter moved the following disposition, seconded by Niklas</p>\n<p><strong>Disposition:</strong> Considered for future use<br>\n<strong>Disposition Comment:</strong> Websocket support is critical path for FHIRcast, we still need more implementer feedback and experience. Following STU1 ballot, will publish #57 and specifically test websocket support at connectathon in Sept.</p>\n<p><span aria-label=\"+1\" class=\"emoji emoji-1f44d\" role=\"img\" title=\"+1\">:+1:</span> For: 14<br>\n<span aria-label=\"expressionless\" class=\"emoji emoji-1f611\" role=\"img\" title=\"expressionless\">:expressionless:</span> Abstain: 0<br>\n<span aria-label=\"-1\" class=\"emoji emoji-1f44e\" role=\"img\" title=\"-1\">:-1:</span> Against: 0</p>\n<p><span aria-label=\"tada\" class=\"emoji emoji-1f389\" role=\"img\" title=\"tada\">:tada:</span> The motion passed! <span aria-label=\"tada\" class=\"emoji emoji-1f389\" role=\"img\" title=\"tada\">:tada:</span></p>\n</blockquote>",
        "id": 174834386,
        "sender_full_name": "Github Notifications (FHIRcast)",
        "timestamp": 1567548764
    },
    {
        "content": "<p>isaacvetter assigned <a href=\"https://github.com/HL7/fhircast-docs/issues/104\" target=\"_blank\" title=\"https://github.com/HL7/fhircast-docs/issues/104\">Issue #104</a>:</p>\n<blockquote>\n<h2>May 2019 Ballot Comment: Include web sockets proposal</h2>\n<p>Submitted by @MichaelTClifton on behalf of @isaacvetter (<a href=\"mailto:isaac@epic.com\" title=\"mailto:isaac@epic.com\">isaac@epic.com</a> )<br>\n<strong>Chapter/section:</strong>  Overall<br>\n<strong>Url:</strong> <br>\n<strong>Type:</strong> NEG <span aria-label=\"exclamation\" class=\"emoji emoji-2757\" role=\"img\" title=\"exclamation\">:exclamation:</span> Enhancement</p>\n<p><strong>Summary:</strong> Include web sockets proposal</p>\n<p><strong>Comment:</strong> We should include the draft web sockets interactions as defined in this github PR: <a href=\"https://github.com/HL7/fhircast-docs/pull/57\" target=\"_blank\" title=\"https://github.com/HL7/fhircast-docs/pull/57\">https://github.com/HL7/fhircast-docs/pull/57</a></p>\n<p>Multiple implementers have tested this functionality.</p>\n<hr>\n<p>_This issue was imported by @hl7-fhircast-bot from the <a href=\"https://bit.ly/fhircast-May-2019-ballot-comments\" target=\"_blank\" title=\"https://bit.ly/fhircast-May-2019-ballot-comments\">consolidated FHIRcast May 2019 ballot spreadsheet</a>._</p>\n</blockquote>",
        "id": 174834406,
        "sender_full_name": "Github Notifications (FHIRcast)",
        "timestamp": 1567548784
    },
    {
        "content": "<p>isaacvetter <a href=\"https://github.com/HL7/fhircast-docs/issues/104#issuecomment-527661447\" target=\"_blank\" title=\"https://github.com/HL7/fhircast-docs/issues/104#issuecomment-527661447\">commented</a> on <a href=\"https://github.com/HL7/fhircast-docs/issues/104\" target=\"_blank\" title=\"https://github.com/HL7/fhircast-docs/issues/104\">Issue #104</a>:</p>\n<blockquote>\n<p>No action as part of ballot resolution is necessary for this issue, but leaving open to merge websocket proposal into draft spec as soon as ballot is published. </p>\n</blockquote>",
        "id": 174834451,
        "sender_full_name": "Github Notifications (FHIRcast)",
        "timestamp": 1567548841
    }
]