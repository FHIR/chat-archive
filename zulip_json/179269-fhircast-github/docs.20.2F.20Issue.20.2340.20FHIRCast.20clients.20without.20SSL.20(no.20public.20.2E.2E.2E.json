[
    {
        "content": "<p>gkustas opened <a href=\"https://github.com/fhircast/docs/issues/40\" target=\"_blank\" title=\"https://github.com/fhircast/docs/issues/40\">Issue #40</a></p>\n<blockquote>\n<p>Not unlike issue #33 (why must a subscriber have an accessible URL?), we want to implement FHIRCast as a context sharing mechanism between our Windows desktop application (C# forms app) and other third party apps (mostly PACS). I started looking at WebSockets thinking it may solve our problem, but it really doesn't. While we could use the WebSocket as a means for the hub to notify the client (real time) of events, we still can't allow the hub to send sensitive information over that WebSocket and still be secure.</p>\n<p>I started thinking that we could have \"limited\" event data posted to the client over the WebSocket, where only some notification id is sent - nothing sensitive. Then the client could issue a query request to the hub (over secure HTTPS) to obtain the event data (eg. rest hook method GetEvent(int notificationId). But, this would require a new extension to FHIRCast, and it also goes against the WebSub specification intent - correct?</p>\n<p>Additionally, the WebSub specification requires that subscriptions have a callback verification (see related issue #27 Callback URL Verification). Unless we change that specification making that callback optional, the client still needs to have a secure HTTPS accessible URL. We could say the verification payload contains NO sensitive data, and host the callback url on insecure HTTP, but I don't know if that is wise.   </p>\n<p>If we are going to consider the option of non-conformance with WebSub (which I have no problem with), and extending the FHIRCast specification to add event queries, I suggest we consider the following proposal:</p>\n<p>1. Allow a subscriber to send a subscription parameter indicating that its callback URL is not secure, and all content (including the verification) WILL NOT contain sensitive information.</p>\n<p>2. When an event occurs for such a subscriber, the Hub will send a \"safe\" notification event which will contain an id referencing the event.</p>\n<p>3. The client then gets the notification event details using the new rest-hook method, eg. GetEvent(int notificationId). </p>\n<p>Another option for us is to implement a \"broker\" as described by @RazStorm in issue #27. This would allow us to conform to all WebSub specifications, and would not require additional Hub methods. However, this would be a much more complex solution for us (and other PACS vendors) to implement. The broker would essentially implement the above proposal, and it would have to maintain routing, authorization and notification to all of the clients in its domain. It's also another point of failure added to the equation.</p>\n</blockquote>",
        "id": 154012225,
        "sender_full_name": "Github Notifications (FHIRcast)",
        "timestamp": 1540488697
    },
    {
        "content": "<p>gkustas edited <a href=\"https://github.com/fhircast/docs/issues/40\" target=\"_blank\" title=\"https://github.com/fhircast/docs/issues/40\">Issue #40</a></p>\n<blockquote>\n<p>Not unlike issue #33 (why must a subscriber have an accessible URL?), we want to implement FHIRCast as a context sharing mechanism between our Windows desktop application (C# forms app) and other third party apps (mostly PACS). I started looking at WebSockets thinking it may solve our problem, but it really doesn't. While we could use the WebSocket as a means for the hub to notify the client (real time) of events, we still can't allow the hub to send sensitive information over that WebSocket and still be secure. We might as well replace the WebSocket with an insecure HTTP Rest server on the client.</p>\n<p>I started thinking that we could have \"limited\" event notification data posted to the client, where only some notification id is sent - nothing sensitive. Then the client could issue a query request to the hub (over secure HTTPS) to obtain the event data (eg. rest hook method GetEvent(int notificationId).  This would require a new extension to FHIRCast, and it also goes against the WebSub specification intent - correct? </p>\n<p>The <a href=\"https://www.w3.org/TR/websub\" target=\"_blank\" title=\"https://www.w3.org/TR/websub\">WebSub specification</a> requires that subscriptions have a callback verification (see related issue #27 Callback URL Verification). Unless we change that specification making that callback optional, the client still needs to have a secure HTTPS accessible URL. We could say the verification payload contains NO sensitive data, and host the callback url on insecure HTTP, but I don't know if that is wise.  </p>\n<p>So to conclude, I have to ask, why do we need conformance with WebSub? It is a great model for what FHIRCast is designed for (subscription/publication), but FHIRCast doesn't NEED to be WebSub compatible, does it? Does the FHIR specification say so? If it doesn't, I suggest we consider the following proposal or something similar:</p>\n<p>1. Allow a subscriber to send a subscription parameter indicating that its callback URL is not secure, and all content (including the verification) WILL NOT contain sensitive information. The hub will return a response containing a unique subscription id if the subscription succeeds.</p>\n<p>2. When an event occurs for such a subscriber, the Hub will send a \"safe\" notification event which will contain an id referencing the event notification.</p>\n<p>3. The client then gets the notification event details using the new rest-hook method, eg. GetEvent(int notificationId). </p>\n<p>4. All other protocols would remain the same.</p>\n<p>Another option for us is to implement a \"broker\" as described by @RazStorm in issue #27. This would allow us to conform to all WebSub specifications, and would not require additional Hub methods. However, this would be a much more complex solution for us (and other PACS vendors) to implement. The broker would essentially implement the above proposal, and it would have to maintain routing, authorization and notification to all of the clients in its domain. It's also another point of failure added to the equation.</p>\n</blockquote>",
        "id": 154012227,
        "sender_full_name": "Github Notifications (FHIRcast)",
        "timestamp": 1540489478
    },
    {
        "content": "<p>lbergnehr <a href=\"https://github.com/fhircast/docs/issues/40#issuecomment-433152506\" target=\"_blank\" title=\"https://github.com/fhircast/docs/issues/40#issuecomment-433152506\">commented</a> on <a href=\"https://github.com/fhircast/docs/issues/40\" target=\"_blank\" title=\"https://github.com/fhircast/docs/issues/40\">Issue #40</a></p>\n<blockquote>\n<p>I've always thought about FHIRcast using https and <a href=\"https://tools.ietf.org/html/rfc6455#section-11.1.2\" target=\"_blank\" title=\"https://tools.ietf.org/html/rfc6455#section-11.1.2\">wss</a> when in an open environment. Are you saying that won't be enough? Perhaps I'm missing your concern.</p>\n</blockquote>",
        "id": 154012230,
        "sender_full_name": "Github Notifications (FHIRcast)",
        "timestamp": 1540491179
    },
    {
        "content": "<p>gkustas <a href=\"https://github.com/fhircast/docs/issues/40#issuecomment-433154414\" target=\"_blank\" title=\"https://github.com/fhircast/docs/issues/40#issuecomment-433154414\">commented</a> on <a href=\"https://github.com/fhircast/docs/issues/40\" target=\"_blank\" title=\"https://github.com/fhircast/docs/issues/40\">Issue #40</a></p>\n<blockquote>\n<p>Yes. Because unless I'm wrong, wss (Websockets with TLS) still requires<br>\nthat the client has an SSL certificate. Correct? That is the biggest<br>\nproblem we have right now.</p>\n<p>On Thu, Oct 25, 2018 at 2:13 PM Leo Bergnéhr &lt;<a href=\"mailto:notifications@github.com\" title=\"mailto:notifications@github.com\">notifications@github.com</a>&gt;<br>\nwrote:</p>\n<blockquote>\n<p>I've always thought about FHIRcast using https and wss<br>\n&lt;<a href=\"https://tools.ietf.org/html/rfc6455#section-11.1.2\" target=\"_blank\" title=\"https://tools.ietf.org/html/rfc6455#section-11.1.2\">https://tools.ietf.org/html/rfc6455#section-11.1.2</a>&gt; when in an open<br>\nenvironment. Are you saying that won't be enough? Perhaps I'm missing your<br>\nconcern.</p>\n<p>—<br>\nYou are receiving this because you authored the thread.<br>\nReply to this email directly, view it on GitHub<br>\n&lt;<a href=\"https://github.com/fhircast/docs/issues/40#issuecomment-433152506\" target=\"_blank\" title=\"https://github.com/fhircast/docs/issues/40#issuecomment-433152506\">https://github.com/fhircast/docs/issues/40#issuecomment-433152506</a>&gt;, or mute<br>\nthe thread<br>\n&lt;<a href=\"https://github.com/notifications/unsubscribe-auth/AFw87qsND4Tn0DE1QDziGqrZ5jwa7hvZks5uof8rgaJpZM4X6whK\" target=\"_blank\" title=\"https://github.com/notifications/unsubscribe-auth/AFw87qsND4Tn0DE1QDziGqrZ5jwa7hvZks5uof8rgaJpZM4X6whK\">https://github.com/notifications/unsubscribe-auth/AFw87qsND4Tn0DE1QDziGqrZ5jwa7hvZks5uof8rgaJpZM4X6whK</a>&gt;<br>\n.</p>\n</blockquote>\n</blockquote>",
        "id": 154012232,
        "sender_full_name": "Github Notifications (FHIRcast)",
        "timestamp": 1540491541
    },
    {
        "content": "<p>gkustas <a href=\"https://github.com/fhircast/docs/issues/40#issuecomment-433159071\" target=\"_blank\" title=\"https://github.com/fhircast/docs/issues/40#issuecomment-433159071\">commented</a> on <a href=\"https://github.com/fhircast/docs/issues/40\" target=\"_blank\" title=\"https://github.com/fhircast/docs/issues/40\">Issue #40</a></p>\n<blockquote>\n<p>Looking further into it I believe I was incorrect. It doesn't appear that<br>\nthe WSS client requires a certificate as long as the WSS server has a valid<br>\nthird party cert. This would be acceptable to us. I have to re-think<br>\n(again!).</p>\n<p>Maybe I should remove my post to prevent others from wasting their time -<br>\nor maybe I should just edit it?</p>\n<p>On Thu, Oct 25, 2018 at 2:18 PM George Kustas &lt;<a href=\"mailto:gkustas@gmail.com\" title=\"mailto:gkustas@gmail.com\">gkustas@gmail.com</a>&gt; wrote:</p>\n<blockquote>\n<p>Yes. Because unless I'm wrong, wss (Websockets with TLS) still requires<br>\nthat the client has an SSL certificate. Correct? That is the biggest<br>\nproblem we have right now.</p>\n<p>On Thu, Oct 25, 2018 at 2:13 PM Leo Bergnéhr &lt;<a href=\"mailto:notifications@github.com\" title=\"mailto:notifications@github.com\">notifications@github.com</a>&gt;<br>\nwrote:</p>\n<blockquote>\n<p>I've always thought about FHIRcast using https and wss<br>\n&lt;<a href=\"https://tools.ietf.org/html/rfc6455#section-11.1.2\" target=\"_blank\" title=\"https://tools.ietf.org/html/rfc6455#section-11.1.2\">https://tools.ietf.org/html/rfc6455#section-11.1.2</a>&gt; when in an open<br>\nenvironment. Are you saying that won't be enough? Perhaps I'm missing your<br>\nconcern.</p>\n<p>—<br>\nYou are receiving this because you authored the thread.<br>\nReply to this email directly, view it on GitHub<br>\n&lt;<a href=\"https://github.com/fhircast/docs/issues/40#issuecomment-433152506\" target=\"_blank\" title=\"https://github.com/fhircast/docs/issues/40#issuecomment-433152506\">https://github.com/fhircast/docs/issues/40#issuecomment-433152506</a>&gt;, or mute<br>\nthe thread<br>\n&lt;<a href=\"https://github.com/notifications/unsubscribe-auth/AFw87qsND4Tn0DE1QDziGqrZ5jwa7hvZks5uof8rgaJpZM4X6whK\" target=\"_blank\" title=\"https://github.com/notifications/unsubscribe-auth/AFw87qsND4Tn0DE1QDziGqrZ5jwa7hvZks5uof8rgaJpZM4X6whK\">https://github.com/notifications/unsubscribe-auth/AFw87qsND4Tn0DE1QDziGqrZ5jwa7hvZks5uof8rgaJpZM4X6whK</a>&gt;<br>\n.</p>\n</blockquote>\n</blockquote>\n</blockquote>",
        "id": 154012241,
        "sender_full_name": "Github Notifications (FHIRcast)",
        "timestamp": 1540492364
    },
    {
        "content": "<p>lbergnehr <a href=\"https://github.com/fhircast/docs/issues/40#issuecomment-433597415\" target=\"_blank\" title=\"https://github.com/fhircast/docs/issues/40#issuecomment-433597415\">commented</a> on <a href=\"https://github.com/fhircast/docs/issues/40\" target=\"_blank\" title=\"https://github.com/fhircast/docs/issues/40\">Issue #40</a></p>\n<blockquote>\n<blockquote>\n<p>Maybe I should remove my post to prevent others from wasting their time - or maybe I should just edit it?</p>\n</blockquote>\n<p>I think it's good to keep it in case anyone else has the same thoughts.</p>\n</blockquote>",
        "id": 154012826,
        "sender_full_name": "Github Notifications (FHIRcast)",
        "timestamp": 1540623945
    },
    {
        "content": "<p>lbergnehr {} a <a href=\"https://github.com/fhircast/docs/issues/40#issuecomment-433597415\" target=\"_blank\" title=\"https://github.com/fhircast/docs/issues/40#issuecomment-433597415\">comment</a> on <a href=\"https://github.com/fhircast/docs/issues/40\" target=\"_blank\" title=\"https://github.com/fhircast/docs/issues/40\">Issue #40</a></p>\n<blockquote>\n<blockquote>\n<p>Maybe I should remove my post to prevent others from wasting their time - or maybe I should just edit it?</p>\n</blockquote>\n<p>I think it's good to keep it in case anyone else has the same thoughts.</p>\n<p>@isaacvetter, could you close this one, please?</p>\n</blockquote>",
        "id": 154012827,
        "sender_full_name": "Github Notifications (FHIRcast)",
        "timestamp": 1540623988
    },
    {
        "content": "<p>isaacvetter closed <a href=\"https://github.com/fhircast/docs/issues/40\" target=\"_blank\" title=\"https://github.com/fhircast/docs/issues/40\">Issue #40</a></p>\n<blockquote>\n<p>Not unlike issue #33 (why must a subscriber have an accessible URL?), we want to implement FHIRCast as a context sharing mechanism between our Windows desktop application (C# forms app) and other third party apps (mostly PACS). I started looking at WebSockets thinking it may solve our problem, but it really doesn't. While we could use the WebSocket as a means for the hub to notify the client (real time) of events, we still can't allow the hub to send sensitive information over that WebSocket and still be secure. We might as well replace the WebSocket with an insecure HTTP Rest server on the client.</p>\n<p>I started thinking that we could have \"limited\" event notification data posted to the client, where only some notification id is sent - nothing sensitive. Then the client could issue a query request to the hub (over secure HTTPS) to obtain the event data (eg. rest hook method GetEvent(int notificationId).  This would require a new extension to FHIRCast, and it also goes against the WebSub specification intent - correct? </p>\n<p>The <a href=\"https://www.w3.org/TR/websub\" target=\"_blank\" title=\"https://www.w3.org/TR/websub\">WebSub specification</a> requires that subscriptions have a callback verification (see related issue #27 Callback URL Verification). Unless we change that specification making that callback optional, the client still needs to have a secure HTTPS accessible URL. We could say the verification payload contains NO sensitive data, and host the callback url on insecure HTTP, but I don't know if that is wise.  </p>\n<p>So to conclude, I have to ask, why do we need conformance with WebSub? It is a great model for what FHIRCast is designed for (subscription/publication), but FHIRCast doesn't NEED to be WebSub compatible, does it? Does the FHIR specification say so? If it doesn't, I suggest we consider the following proposal or something similar:</p>\n<p>1. Allow a subscriber to send a subscription parameter indicating that its callback URL is not secure, and all content (including the verification) WILL NOT contain sensitive information. The hub will return a response containing a unique subscription id if the subscription succeeds.</p>\n<p>2. When an event occurs for such a subscriber, the Hub will send a \"safe\" notification event which will contain an id referencing the event notification.</p>\n<p>3. The client then gets the notification event details using the new rest-hook method, eg. GetEvent(int notificationId). </p>\n<p>4. All other protocols would remain the same.</p>\n<p>Another option for us is to implement a \"broker\" as described by @RazStorm in issue #27. This would allow us to conform to all WebSub specifications, and would not require additional Hub methods. However, this would be a much more complex solution for us (and other PACS vendors) to implement. The broker would essentially implement the above proposal, and it would have to maintain routing, authorization and notification to all of the clients in its domain. It's also another point of failure added to the equation.</p>\n</blockquote>",
        "id": 154019584,
        "sender_full_name": "Github Notifications (FHIRcast)",
        "timestamp": 1542640982
    },
    {
        "content": "<p>Hi,  would websocket over TLS be ok.  That's what I'm using (wss instead of ws).</p>",
        "id": 154019606,
        "sender_full_name": "Martin Bellehumeur (Visage Imaging)",
        "timestamp": 1542643639
    }
]