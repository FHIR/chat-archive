[
    {
        "content": "<p>lbergnehr opened <a href=\"https://github.com/fhircast/docs/issues/41\" target=\"_blank\" title=\"https://github.com/fhircast/docs/issues/41\">Issue #41</a></p>\n<blockquote>\n<p>I've tried this for some time, but cannot get the request body of the example on <a href=\"http://fhircast.org\" target=\"_blank\" title=\"http://fhircast.org\">fhircast.org</a> to hash to what's in the <code>X-Hub-Signature</code> header. Just so I'm not missing anything, here's what I'm doing in ruby:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"nb\">require</span> <span class=\"s1\">&#39;openssl&#39;</span>\n\n<span class=\"n\">request_body</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;{</span>\n<span class=\"s1\">  &quot;timestamp&quot;: &quot;2018-01-08T01:37:05.14&quot;,</span>\n<span class=\"s1\">  &quot;id&quot;: &quot;q9v3jubddqt63n1&quot;,</span>\n<span class=\"s1\">  &quot;event&quot;: {</span>\n<span class=\"s1\">    &quot;hub.topic&quot;: &quot;https://hub.example.com/7jaa86kgdudewiaq0wtu&quot;,</span>\n<span class=\"s1\">    &quot;hub.event&quot;: &quot;open-patient-chart&quot;,</span>\n<span class=\"s1\">    &quot;context&quot;: [</span>\n<span class=\"s1\">      {</span>\n<span class=\"s1\">        &quot;key&quot;: &quot;patient&quot;,</span>\n<span class=\"s1\">        &quot;resource&quot;: {</span>\n<span class=\"s1\">          &quot;resourceType&quot;: &quot;Patient&quot;,</span>\n<span class=\"s1\">          &quot;id&quot;: &quot;ewUbXT9RWEbSj5wPEdgRaBw3&quot;,</span>\n<span class=\"s1\">          &quot;identifier&quot;: [</span>\n<span class=\"s1\">            {</span>\n<span class=\"s1\">              &quot;system&quot;: &quot;urn:oid:1.2.840.114350&quot;,</span>\n<span class=\"s1\">              &quot;value&quot;: &quot;185444&quot;</span>\n<span class=\"s1\">            },</span>\n<span class=\"s1\">            {</span>\n<span class=\"s1\">              &quot;system&quot;: &quot;urn:oid:1.2.840.114350.1.13.861.1.7.5.737384.27000&quot;,</span>\n<span class=\"s1\">              &quot;value&quot;: &quot;2667&quot;</span>\n<span class=\"s1\">            }</span>\n<span class=\"s1\">          ]</span>\n<span class=\"s1\">        }</span>\n<span class=\"s1\">      }</span>\n<span class=\"s1\">    ]</span>\n<span class=\"s1\">  }</span>\n<span class=\"s1\">}&#39;</span>\n<span class=\"n\">secret</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;shhh-this-is-a-secret&#39;</span>\n\n<span class=\"nb\">hash</span> <span class=\"o\">=</span> <span class=\"no\">OpenSSL</span><span class=\"o\">::</span><span class=\"no\">HMAC</span><span class=\"o\">.</span><span class=\"n\">hexdigest</span><span class=\"p\">(</span><span class=\"s1\">&#39;sha256&#39;</span><span class=\"p\">,</span> <span class=\"n\">secret</span><span class=\"p\">,</span> <span class=\"n\">request_body</span><span class=\"p\">);</span>\n\n<span class=\"nb\">puts</span> <span class=\"nb\">hash</span>\n</pre></div>\n\n\n<p>I've verified the above to work to some extent using <a href=\"https://en.wikipedia.org/wiki/HMAC#Examples\" target=\"_blank\" title=\"https://en.wikipedia.org/wiki/HMAC#Examples\">wikipedia examples</a>.</p>\n<p>Something's off. Line-endings? Tabs vs. spaces? @isaacvetter, do you remember what you did when you wrote this?</p>\n</blockquote>",
        "id": 154015923,
        "sender_full_name": "Github Notifications (FHIRcast)",
        "timestamp": 1541516153
    },
    {
        "content": "<p>lbergnehr edited <a href=\"https://github.com/fhircast/docs/issues/41\" target=\"_blank\" title=\"https://github.com/fhircast/docs/issues/41\">Issue #41</a></p>\n<blockquote>\n<p>I've tried this for some time, but cannot get the request body of the example on <a href=\"http://fhircast.org\" target=\"_blank\" title=\"http://fhircast.org\">fhircast.org</a> to hash to what's in the <code>X-Hub-Signature</code> header. Just so I'm not missing anything, here's what I'm doing in ruby:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"nb\">require</span> <span class=\"s1\">&#39;openssl&#39;</span>\n\n<span class=\"n\">request_body</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;{</span>\n<span class=\"s1\">  &quot;timestamp&quot;: &quot;2018-01-08T01:37:05.14&quot;,</span>\n<span class=\"s1\">  &quot;id&quot;: &quot;q9v3jubddqt63n1&quot;,</span>\n<span class=\"s1\">  &quot;event&quot;: {</span>\n<span class=\"s1\">    &quot;hub.topic&quot;: &quot;https://hub.example.com/7jaa86kgdudewiaq0wtu&quot;,</span>\n<span class=\"s1\">    &quot;hub.event&quot;: &quot;open-patient-chart&quot;,</span>\n<span class=\"s1\">    &quot;context&quot;: [</span>\n<span class=\"s1\">      {</span>\n<span class=\"s1\">        &quot;key&quot;: &quot;patient&quot;,</span>\n<span class=\"s1\">        &quot;resource&quot;: {</span>\n<span class=\"s1\">          &quot;resourceType&quot;: &quot;Patient&quot;,</span>\n<span class=\"s1\">          &quot;id&quot;: &quot;ewUbXT9RWEbSj5wPEdgRaBw3&quot;,</span>\n<span class=\"s1\">          &quot;identifier&quot;: [</span>\n<span class=\"s1\">            {</span>\n<span class=\"s1\">              &quot;system&quot;: &quot;urn:oid:1.2.840.114350&quot;,</span>\n<span class=\"s1\">              &quot;value&quot;: &quot;185444&quot;</span>\n<span class=\"s1\">            },</span>\n<span class=\"s1\">            {</span>\n<span class=\"s1\">              &quot;system&quot;: &quot;urn:oid:1.2.840.114350.1.13.861.1.7.5.737384.27000&quot;,</span>\n<span class=\"s1\">              &quot;value&quot;: &quot;2667&quot;</span>\n<span class=\"s1\">            }</span>\n<span class=\"s1\">          ]</span>\n<span class=\"s1\">        }</span>\n<span class=\"s1\">      }</span>\n<span class=\"s1\">    ]</span>\n<span class=\"s1\">  }</span>\n<span class=\"s1\">}&#39;</span>\n<span class=\"n\">secret</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;shhh-this-is-a-secret&#39;</span>\n\n<span class=\"nb\">hash</span> <span class=\"o\">=</span> <span class=\"no\">OpenSSL</span><span class=\"o\">::</span><span class=\"no\">HMAC</span><span class=\"o\">.</span><span class=\"n\">hexdigest</span><span class=\"p\">(</span><span class=\"s1\">&#39;sha256&#39;</span><span class=\"p\">,</span> <span class=\"n\">secret</span><span class=\"p\">,</span> <span class=\"n\">request_body</span><span class=\"p\">);</span>\n\n<span class=\"nb\">puts</span> <span class=\"nb\">hash</span>\n</pre></div>\n\n\n<p>I'm getting <code>2e24e889827c4ab7ebd68217e12bf82d959dff4d12939e7b994fe0a197d19e1a</code> and the example states <code>dce85dc8dfde2426079063ad413268ac72dcf845f9f923193285e693be6ff3ae</code>. I mean, they're not even close! <span class=\"emoji emoji-1f609\" title=\"wink\">:wink:</span> </p>\n<p>I've verified the above to work to some extent using <a href=\"https://en.wikipedia.org/wiki/HMAC#Examples\" target=\"_blank\" title=\"https://en.wikipedia.org/wiki/HMAC#Examples\">wikipedia examples</a>.</p>\n<p>Something's off. Line-endings? Tabs vs. spaces? @isaacvetter, do you remember what you did when you wrote this?</p>\n</blockquote>",
        "id": 154015924,
        "sender_full_name": "Github Notifications (FHIRcast)",
        "timestamp": 1541516362
    },
    {
        "content": "<p>isaacvetter <a href=\"https://github.com/fhircast/docs/issues/41#issuecomment-439929395\" target=\"_blank\" title=\"https://github.com/fhircast/docs/issues/41#issuecomment-439929395\">commented</a> on <a href=\"https://github.com/fhircast/docs/issues/41\" target=\"_blank\" title=\"https://github.com/fhircast/docs/issues/41\">Issue #41</a></p>\n<blockquote>\n<p>Great catch, @lbergnehr !</p>\n<p>Using a tool like <a href=\"https://www.freeformatter.com/hmac-generator.html#ad-output\" target=\"_blank\" title=\"https://www.freeformatter.com/hmac-generator.html#ad-output\">https://www.freeformatter.com/hmac-generator.html#ad-output</a>, and the json object copied-and-pasted from <a href=\"http://fhircast.org\" target=\"_blank\" title=\"http://fhircast.org\">fhircast.org</a>, I get <code>df3e914aeeb80574a5892bd6f59099985f819a423f9ade0cfdd40d0619367d87</code>.</p>\n<p>secret = shhh-this-is-a-secret<br>\nalgo = SHA256<br>\nmessage = </p>\n<div class=\"codehilite\"><pre><span></span>{\n  &quot;timestamp&quot;: &quot;2018-01-08T01:37:05.14&quot;,\n  &quot;id&quot;: &quot;q9v3jubddqt63n1&quot;,\n  &quot;event&quot;: {\n    &quot;hub.topic&quot;: &quot;https://hub.example.com/7jaa86kgdudewiaq0wtu&quot;,\n    &quot;hub.event&quot;: &quot;open-patient-chart&quot;,\n    &quot;context&quot;: [\n      {\n        &quot;key&quot;: &quot;patient&quot;,\n        &quot;resource&quot;: {\n          &quot;resourceType&quot;: &quot;Patient&quot;,\n          &quot;id&quot;: &quot;ewUbXT9RWEbSj5wPEdgRaBw3&quot;,\n          &quot;identifier&quot;: [\n            {\n              &quot;system&quot;: &quot;urn:oid:1.2.840.114350&quot;,\n              &quot;value&quot;: &quot;185444&quot;\n            },\n            {\n              &quot;system&quot;: &quot;urn:oid:1.2.840.114350.1.13.861.1.7.5.737384.27000&quot;,\n              &quot;value&quot;: &quot;2667&quot;\n            }\n          ]\n        }\n      }\n    ]\n  }\n}\n</pre></div>\n\n\n<p>Leo, will you convince a publically accessible online HMAC digest to agree with your computed HMAC and then let's update to the specification to be correct. </p>\n<p>Isaac</p>\n</blockquote>",
        "id": 154019583,
        "sender_full_name": "Github Notifications (FHIRcast)",
        "timestamp": 1542640900
    }
]