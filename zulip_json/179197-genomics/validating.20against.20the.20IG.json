[
    {
        "content": "<p>I need to upload some examples to the Genomics Reporting IG, but want to make sure they validate against the current profile. I'm running the <a href=\"http://wiki.hl7.org/index.php?title=Using_the_FHIR_Validator\" target=\"_blank\" title=\"http://wiki.hl7.org/index.php?title=Using_the_FHIR_Validator\">FHIR Validator</a> and I can validate against the default FHIR version (3.6.0), but am having trouble when trying to validate against the IG. Any suggestions? I tried this...</p>\n<div class=\"codehilite\"><pre><span></span>$ java -jar org.hl7.fhir.validator.jar diagnosticreport-hla-r4.xml -ig http://build.fhir.org/ig/HL7/genomics-reporting -profile http://build.fhir.org/ig/HL7/genomics-reporting/StructureDefinition/diagnosticreport\nFHIR Validator Build ??\nArguments: diagnosticreport-hla-r4.xml -ig http://build.fhir.org/ig/HL7/genomics-reporting -profile http://build.fhir.org/ig/HL7/genomics-reporting/StructureDefinition/diagnosticreport -output out.txt\n  .. connect to tx server @ http://tx.fhir.org\n  .. definitions from hl7.fhir.core#3.6.0\n    <span class=\"o\">(</span>v3.6.0-null<span class=\"o\">)</span>\n+  .. load IG from http://build.fhir.org/ig/HL7/genomics-reporting\nLoading http://build.fhir.org/ig/HL7/genomics-reporting/package.tgz to the package cache\n  Fetching:.... <span class=\"k\">done</span>.\nFetch Profile from http://build.fhir.org/ig/HL7/genomics-reporting/StructureDefinition/diagnosticreport\nException in thread <span class=\"s2\">&quot;main&quot;</span> java.lang.Exception: Unable to find definitions at URL <span class=\"s1\">&#39;http://build.fhir.org/ig/HL7/genomics-reporting/StructureDefinition/diagnosticreport&#39;</span>: http://build.fhir.org/ig/HL7/genomics-reporting/StructureDefinition/diagnosticreport?nocache<span class=\"o\">=</span><span class=\"m\">1540838122053</span>\n    at org.hl7.fhir.r4.validation.ValidationEngine.loadProfileFromUrl<span class=\"o\">(</span>ValidationEngine.java:360<span class=\"o\">)</span>\n    at org.hl7.fhir.r4.validation.ValidationEngine.loadProfileSource<span class=\"o\">(</span>ValidationEngine.java:346<span class=\"o\">)</span>\n    at org.hl7.fhir.r4.validation.ValidationEngine.loadProfile<span class=\"o\">(</span>ValidationEngine.java:611<span class=\"o\">)</span>\n    at org.hl7.fhir.r4.validation.Validator.main<span class=\"o\">(</span>Validator.java:401<span class=\"o\">)</span>\nCaused by: java.io.FileNotFoundException: http://build.fhir.org/ig/HL7/genomics-reporting/StructureDefinition/diagnosticreport?nocache<span class=\"o\">=</span><span class=\"m\">1540838122053</span>\n    at sun.net.www.protocol.http.HttpURLConnection.getInputStream0<span class=\"o\">(</span>HttpURLConnection.java:1890<span class=\"o\">)</span>\n    at sun.net.www.protocol.http.HttpURLConnection.getInputStream<span class=\"o\">(</span>HttpURLConnection.java:1492<span class=\"o\">)</span>\n    at org.hl7.fhir.r4.validation.ValidationEngine.loadProfileFromUrl<span class=\"o\">(</span>ValidationEngine.java:358<span class=\"o\">)</span>\n    ... <span class=\"m\">3</span> more\n$\n</pre></div>",
        "id": 154013326,
        "sender_full_name": " Bob Milius",
        "timestamp": 1540838263
    },
    {
        "content": "<p>Might be best to raise this one on the IG creation or committers thread</p>",
        "id": 154013327,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1540838627
    },
    {
        "content": "<p>Hmm, I have never tried it this way.  Maybe when referring to the IG, you have to refer to the actual IG contents? <a href=\"http://build.fhir.org/ig/HL7/genomics-reporting/ImplementationGuide-genomics-reporting.json\" target=\"_blank\" title=\"http://build.fhir.org/ig/HL7/genomics-reporting/ImplementationGuide-genomics-reporting.json\">http://build.fhir.org/ig/HL7/genomics-reporting/ImplementationGuide-genomics-reporting.json</a></p>",
        "id": 154013329,
        "sender_full_name": "Kevin Power",
        "timestamp": 1540838829
    },
    {
        "content": "<p>And similar for the profile? <a href=\"http://build.fhir.org/ig/HL7/genomics-reporting/StructureDefinition-diagnosticreport.json\" target=\"_blank\" title=\"http://build.fhir.org/ig/HL7/genomics-reporting/StructureDefinition-diagnosticreport.json\">http://build.fhir.org/ig/HL7/genomics-reporting/StructureDefinition-diagnosticreport.json</a></p>",
        "id": 154013331,
        "sender_full_name": "Kevin Power",
        "timestamp": 1540838915
    },
    {
        "content": "<p>It looks like you may also have to specify <code>-version current</code> to confirm the build version of the IG, I haven't played around with the Validator yet.</p>",
        "id": 154013332,
        "sender_full_name": "Jamie Jones",
        "timestamp": 1540838953
    },
    {
        "content": "<p>Or this as the IG: <br>\n<code>-ig hl7.fhir.uv.genomics-reporting#dev</code></p>",
        "id": 154013338,
        "sender_full_name": "Kevin Power",
        "timestamp": 1540839460
    },
    {
        "content": "<p>Curiously, the generated structuredefns on <a href=\"http://build.fhir.org\" target=\"_blank\" title=\"http://build.fhir.org\">build.fhir.org</a> are listed as <a href=\"http://hl7.org/fhir/uv/genomics-reporting/StructureDefinition/diagnosticreport\" target=\"_blank\" title=\"http://hl7.org/fhir/uv/genomics-reporting/StructureDefinition/diagnosticreport\">http://hl7.org/fhir/uv/genomics-reporting/StructureDefinition/diagnosticreport</a> so might have to specifically target them</p>",
        "id": 154013340,
        "sender_full_name": "Jamie Jones",
        "timestamp": 1540839578
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191913\">@Kevin Power</span> from the docs, it sounds like to use the #dev, I'd have to have an implementation built on my machine</p>\n<blockquote>\n<p>if you want to validate against an implementation that you built yourself using the IG publisher on your own machine, use 'dev' as the version</p>\n</blockquote>",
        "id": 154013347,
        "sender_full_name": " Bob Milius",
        "timestamp": 1540840171
    },
    {
        "content": "<p>ahh, OK.  That would explain why it is in my cache that way.</p>",
        "id": 154013348,
        "sender_full_name": "Kevin Power",
        "timestamp": 1540840290
    },
    {
        "content": "<p>I'll try  that, ie cloning it and running the publisher locally</p>",
        "id": 154013349,
        "sender_full_name": " Bob Milius",
        "timestamp": 1540840410
    },
    {
        "content": "<p>Looking more closely at the error:</p>\n<blockquote>\n<p>Fetch Profile from <a href=\"http://build.fhir.org/ig/HL7/genomics-reporting/StructureDefinition/diagnosticreport\" target=\"_blank\" title=\"http://build.fhir.org/ig/HL7/genomics-reporting/StructureDefinition/diagnosticreport\">http://build.fhir.org/ig/HL7/genomics-reporting/StructureDefinition/diagnosticreport</a><br>\nException in thread \"main\" java.lang.Exception: Unable to find definitions at URL '<a href=\"http://build.fhir.org/ig/HL7/genomics-reporting/StructureDefinition/diagnosticreport\" target=\"_blank\" title=\"http://build.fhir.org/ig/HL7/genomics-reporting/StructureDefinition/diagnosticreport\">http://build.fhir.org/ig/HL7/genomics-reporting/StructureDefinition/diagnosticreport</a>': <a href=\"http://build.fhir.org/ig/HL7/genomics-reporting/StructureDefinition/diagnosticreport?nocache=1540838122053\" target=\"_blank\" title=\"http://build.fhir.org/ig/HL7/genomics-reporting/StructureDefinition/diagnosticreport?nocache=1540838122053\">http://build.fhir.org/ig/HL7/genomics-reporting/StructureDefinition/diagnosticreport?nocache=1540838122053</a></p>\n</blockquote>\n<p>Perhaps it how you referenced the profile?  And you need to add a .json to it to get the specific contents?</p>",
        "id": 154013353,
        "sender_full_name": "Kevin Power",
        "timestamp": 1540841517
    },
    {
        "content": "<p>Which again, is like this: <a href=\"http://build.fhir.org/ig/HL7/genomics-reporting/StructureDefinition-diagnosticreport.json\" target=\"_blank\" title=\"http://build.fhir.org/ig/HL7/genomics-reporting/StructureDefinition-diagnosticreport.json\">http://build.fhir.org/ig/HL7/genomics-reporting/StructureDefinition-diagnosticreport.json</a></p>",
        "id": 154013354,
        "sender_full_name": "Kevin Power",
        "timestamp": 1540841561
    },
    {
        "content": "<p>Okay, making progress... here's my command which seems to try to validate a very simple genotype observation after building the IG locally:</p>\n<div class=\"codehilite\"><pre><span></span>$ java -jar org.hl7.fhir.validator.jar observation_genotype_HLA-A_R4.xml -ig hl7.fhir.uv.genomics-reporting#dev -profile http://hl7.org/fhir/uv/genomics-reporting/StructureDefinition/obs-genotype\nFHIR Validator Build ??\nArguments: observation_genotype_HLA-A_R4.xml -ig hl7.fhir.uv.genomics-reporting#dev -profile http://hl7.org/fhir/uv/genomics-reporting/StructureDefinition/obs-genotype\n  .. connect to tx server @ http://tx.fhir.org\n  .. definitions from hl7.fhir.core#3.6.0\n    <span class=\"o\">(</span>v3.6.0-null<span class=\"o\">)</span>\n+  .. load IG from hl7.fhir.uv.genomics-reporting#dev\n  .. validate <span class=\"o\">[</span>observation_genotype_HLA-A_R4.xml<span class=\"o\">]</span> against <span class=\"o\">[</span>http://hl7.org/fhir/uv/genomics-reporting/StructureDefinition/obs-genotype<span class=\"o\">]</span>\nTerminology server: Check <span class=\"k\">for</span> supported code systems <span class=\"k\">for</span> http://loinc.org\nSuccess...validating observation_genotype_HLA-A_R4.xml:  error:0 warn:0 info:0\n</pre></div>",
        "id": 154013438,
        "sender_full_name": " Bob Milius",
        "timestamp": 1540851398
    },
    {
        "content": "<p>But I'm getting validation errors when I try to add a component for gene name:</p>\n<div class=\"codehilite\"><pre><span></span>    <span class=\"nt\">&lt;component&gt;</span>\n        <span class=\"nt\">&lt;code&gt;</span>\n            <span class=\"nt\">&lt;coding&gt;</span>\n                <span class=\"nt\">&lt;system</span> <span class=\"na\">value=</span><span class=\"s\">&quot;http://loinc.org&quot;</span><span class=\"nt\">/&gt;</span>\n                <span class=\"nt\">&lt;code</span> <span class=\"na\">value=</span><span class=\"s\">&quot;48018-6&quot;</span><span class=\"nt\">/&gt;</span>\n                <span class=\"nt\">&lt;display</span> <span class=\"na\">value=</span><span class=\"s\">&quot;Gene studied [ID]&quot;</span><span class=\"nt\">/&gt;</span>\n            <span class=\"nt\">&lt;/coding&gt;</span>\n        <span class=\"nt\">&lt;/code&gt;</span>\n        <span class=\"nt\">&lt;valueCodeableConcept&gt;</span>\n            <span class=\"nt\">&lt;coding&gt;</span>\n                <span class=\"nt\">&lt;system</span> <span class=\"na\">value=</span><span class=\"s\">&quot;https://www.genenames.org&quot;</span><span class=\"nt\">/&gt;</span>\n                <span class=\"nt\">&lt;code</span> <span class=\"na\">value=</span><span class=\"s\">&quot;HGNC:4931&quot;</span><span class=\"nt\">/&gt;</span>\n                <span class=\"nt\">&lt;display</span> <span class=\"na\">value=</span><span class=\"s\">&quot;HLA-A&quot;</span><span class=\"nt\">/&gt;</span>\n            <span class=\"nt\">&lt;/coding&gt;</span>\n        <span class=\"nt\">&lt;/valueCodeableConcept&gt;</span>\n    <span class=\"nt\">&lt;/component&gt;</span>\n</pre></div>\n\n\n<p>The validator gives me this error:</p>\n<div class=\"codehilite\"><pre><span></span>  Error @ Observation.component.valueCodeableConcept <span class=\"o\">(</span>line <span class=\"m\">92</span>, col31<span class=\"o\">)</span> : None of the codes provided are in the value <span class=\"nb\">set</span> http://hl7.org/fhir/uv/genomics-reporting/ValueSet/hgnc <span class=\"o\">(</span>http://hl7.org/fhir/uv/genomics-reporting/ValueSet/hgnc, and a code from this value <span class=\"nb\">set</span> is required<span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"nv\">codes</span> <span class=\"o\">=</span> https://www.genenames.org#HGNC:4931<span class=\"o\">)</span>\n</pre></div>",
        "id": 154013439,
        "sender_full_name": " Bob Milius",
        "timestamp": 1540851550
    },
    {
        "content": "<p>That is one of the things that <span class=\"user-mention\" data-user-id=\"191451\">@Patrick Werner</span> is trying to figure out by building proper value sets.  Here is the <a href=\"http://build.fhir.org/ig/HL7/genomics-reporting/valueset-hgnc.html\" target=\"_blank\" title=\"http://build.fhir.org/ig/HL7/genomics-reporting/valueset-hgnc.html\">HGNC value set</a>  as of now, which you can see is actually empty.  Meaning, we don't actually have HGNC gene codes properly handled.  Perhaps we need to make HGNC as an 'example' for now instead of 'required' so it validates until we figure out the HGNC ValueSet?</p>",
        "id": 154013441,
        "sender_full_name": "Kevin Power",
        "timestamp": 1540851931
    },
    {
        "content": "<p>yeah, at least to get the validator to handle it until something is in place</p>",
        "id": 154013442,
        "sender_full_name": " Bob Milius",
        "timestamp": 1540852019
    },
    {
        "content": "<p>Here's another validator issue... if I change the observation.code to what is required for Haplotype Observation instead of what's required for Genotype Observation, it validates fine against the genotype structuredefinition. I would think it should throw an error since the binding is required.</p>",
        "id": 154013444,
        "sender_full_name": " Bob Milius",
        "timestamp": 1540852183
    },
    {
        "content": "<p>If you have the IG local and building, you can make that change yourself to test it.  In <code>genomics-reporting/src/resources/observation-profile-spreadsheet.xml</code>, you can go to the Bindings tab, and make HGNC (and likely others) example instead of required.</p>",
        "id": 154013445,
        "sender_full_name": "Kevin Power",
        "timestamp": 1540852214
    },
    {
        "content": "<p>RE: Genotype/Haplotype - The codes are listed in the Pattern?  Would have to defer to <span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> or someone else to say how the validator would look at those.</p>",
        "id": 154013448,
        "sender_full_name": "Kevin Power",
        "timestamp": 1540852394
    },
    {
        "content": "<p>Actually, betting you have to slice the code like is done here: <a href=\"http://build.fhir.org/heartrate.html\" target=\"_blank\" title=\"http://build.fhir.org/heartrate.html\">http://build.fhir.org/heartrate.html</a></p>",
        "id": 154013450,
        "sender_full_name": "Kevin Power",
        "timestamp": 1540852705
    },
    {
        "content": "<p>The validator might think it's simplyt not a Genotype or Haplotype - are you explicitly asserting that profile?</p>",
        "id": 154013451,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1540852747
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> yep... here's my command</p>\n<div class=\"codehilite\"><pre><span></span>java -jar org.hl7.fhir.validator.jar observation_genotype_HLA-A_R4.xml -ig hl7.fhir.uv.genomics-reporting#dev -profile http://hl7.org/fhir/uv/genomics-reporting/StructureDefinition/obs-genotype\n</pre></div>",
        "id": 154013452,
        "sender_full_name": " Bob Milius",
        "timestamp": 1540852841
    },
    {
        "content": "<p>and here's my observation.code</p>\n<div class=\"codehilite\"><pre><span></span>    <span class=\"nt\">&lt;code&gt;</span>\n        <span class=\"nt\">&lt;coding&gt;</span>\n            <span class=\"nt\">&lt;system</span> <span class=\"na\">value=</span><span class=\"s\">&quot;http://loinc.org&quot;</span><span class=\"nt\">/&gt;</span>\n            <span class=\"nt\">&lt;code</span> <span class=\"na\">value=</span><span class=\"s\">&quot;84414-2&quot;</span><span class=\"nt\">/&gt;</span>\n            <span class=\"nt\">&lt;display</span> <span class=\"na\">value=</span><span class=\"s\">&quot;Haplotype name&quot;</span><span class=\"nt\">/&gt;</span>\n        <span class=\"nt\">&lt;/coding&gt;</span>\n    <span class=\"nt\">&lt;/code&gt;</span>\n</pre></div>\n\n\n<p>no errors</p>",
        "id": 154013454,
        "sender_full_name": " Bob Milius",
        "timestamp": 1540852899
    },
    {
        "content": "<p>May not be apples/apples - But here is the 'vitalsigns-heartrate-profile-spreadsheet' and how it formats the 'required' LOINC code in Observation.code:<br>\n<a href=\"/user_uploads/10155/giWAWOH75ZHoLl2Rtyg-lglQ/pasted_image.png\" target=\"_blank\" title=\"pasted_image.png\">pasted image</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/giWAWOH75ZHoLl2Rtyg-lglQ/pasted_image.png\" target=\"_blank\" title=\"pasted image\"><img src=\"/user_uploads/10155/giWAWOH75ZHoLl2Rtyg-lglQ/pasted_image.png\"></a></div>",
        "id": 154013456,
        "sender_full_name": "Kevin Power",
        "timestamp": 1540853251
    },
    {
        "content": "<p>I will admit this is a beyond my knowledge so I might be completely wrong - just trying to find something to compare.</p>",
        "id": 154013457,
        "sender_full_name": "Kevin Power",
        "timestamp": 1540853341
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191913\">@Kevin Power</span> regarding HGNC, yes, I changed binding from required to example, and rebuilt it, and validator now like it.</p>",
        "id": 154013458,
        "sender_full_name": " Bob Milius",
        "timestamp": 1540853396
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> I also have this in my Observation:</p>\n<div class=\"codehilite\"><pre><span></span>    <span class=\"nt\">&lt;meta&gt;</span>\n        <span class=\"nt\">&lt;profile</span> <span class=\"na\">value=</span><span class=\"s\">&quot;http://hl7.org/fhir/uv/genomics-reporting/StructureDefinition/obs-genotype&quot;</span><span class=\"nt\">/&gt;</span>\n    <span class=\"nt\">&lt;/meta&gt;</span>\n</pre></div>",
        "id": 154013460,
        "sender_full_name": " Bob Milius",
        "timestamp": 1540853466
    },
    {
        "content": "<p>If it's a required binding and the binding isn't met, that should cause an error.</p>",
        "id": 154013462,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1540853898
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191913\">@Kevin Power</span> are you suggesting we should add the other columns? eg Type and Value for Observation.code.coding.system and Observation.code.coding.type? Do they have anything for Pattern?</p>",
        "id": 154013463,
        "sender_full_name": " Bob Milius",
        "timestamp": 1540853917
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> yes, that's what I expected</p>",
        "id": 154013465,
        "sender_full_name": " Bob Milius",
        "timestamp": 1540853982
    },
    {
        "content": "<p>Here's my example Genotype Observation with the wrong observation.code.</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"nt\">&lt;Observation</span> <span class=\"na\">xmlns=</span><span class=\"s\">&quot;http://hl7.org/fhir&quot;</span><span class=\"nt\">&gt;</span>\n    <span class=\"nt\">&lt;meta&gt;</span>\n        <span class=\"nt\">&lt;profile</span> <span class=\"na\">value=</span><span class=\"s\">&quot;http://hl7.org/fhir/uv/genomics-reporting/StructureDefinition/obs-genotype&quot;</span><span class=\"nt\">/&gt;</span>\n    <span class=\"nt\">&lt;/meta&gt;</span>\n    <span class=\"nt\">&lt;text&gt;</span>\n        <span class=\"nt\">&lt;status</span> <span class=\"na\">value=</span><span class=\"s\">&quot;generated&quot;</span><span class=\"nt\">/&gt;</span>\n        <span class=\"nt\">&lt;div</span> <span class=\"na\">xmlns=</span><span class=\"s\">&quot;http://www.w3.org/1999/xhtml&quot;</span><span class=\"nt\">&gt;</span>\n            <span class=\"nt\">&lt;pre&gt;</span>HLA-A*03:01:01:01+HLA-A*30:01:01<span class=\"nt\">&lt;/pre&gt;</span>\n        <span class=\"nt\">&lt;/div&gt;</span>\n    <span class=\"nt\">&lt;/text&gt;</span>\n    <span class=\"nt\">&lt;basedOn&gt;</span>\n        <span class=\"nt\">&lt;reference</span> <span class=\"na\">value=</span><span class=\"s\">&quot;urn:uuid:FA407A8B-89DF-4AE9-B30D-9AA887DA7AD3&quot;</span><span class=\"nt\">/&gt;</span>\n        <span class=\"nt\">&lt;type</span> <span class=\"na\">value=</span><span class=\"s\">&quot;ServiceRequest&quot;</span><span class=\"nt\">/&gt;</span>\n        <span class=\"nt\">&lt;display</span> <span class=\"na\">value=</span><span class=\"s\">&quot;HLA-A typing for sample 001-246802468&quot;</span><span class=\"nt\">/&gt;</span>\n    <span class=\"nt\">&lt;/basedOn&gt;</span>\n    <span class=\"nt\">&lt;status</span> <span class=\"na\">value=</span><span class=\"s\">&quot;final&quot;</span><span class=\"nt\">/&gt;</span>\n    <span class=\"nt\">&lt;category&gt;</span>\n        <span class=\"nt\">&lt;coding&gt;</span>\n            <span class=\"nt\">&lt;system</span> <span class=\"na\">value=</span><span class=\"s\">&quot;http://terminology.hl7.org/CodeSystem/observation-category&quot;</span><span class=\"nt\">/&gt;</span>\n            <span class=\"nt\">&lt;code</span> <span class=\"na\">value=</span><span class=\"s\">&quot;laboratory&quot;</span><span class=\"nt\">/&gt;</span>\n        <span class=\"nt\">&lt;/coding&gt;</span>\n    <span class=\"nt\">&lt;/category&gt;</span>\n <span class=\"c\">&lt;!--</span>\n<span class=\"c\">    &lt;code&gt;</span>\n<span class=\"c\">        &lt;coding&gt;</span>\n<span class=\"c\">            &lt;system value=&quot;http://loinc.org&quot;/&gt;</span>\n<span class=\"c\">            &lt;code value=&quot;84413-4&quot;/&gt;</span>\n<span class=\"c\">            &lt;display value=&quot;Genotype display name&quot;/&gt;</span>\n<span class=\"c\">        &lt;/coding&gt;</span>\n<span class=\"c\">    &lt;/code&gt;</span>\n<span class=\"c\"> --&gt;</span>\n    <span class=\"nt\">&lt;code&gt;</span>\n        <span class=\"nt\">&lt;coding&gt;</span>\n            <span class=\"nt\">&lt;system</span> <span class=\"na\">value=</span><span class=\"s\">&quot;http://loinc.org&quot;</span><span class=\"nt\">/&gt;</span>\n            <span class=\"nt\">&lt;code</span> <span class=\"na\">value=</span><span class=\"s\">&quot;84414-2&quot;</span><span class=\"nt\">/&gt;</span>\n            <span class=\"nt\">&lt;display</span> <span class=\"na\">value=</span><span class=\"s\">&quot;Haplotype name&quot;</span><span class=\"nt\">/&gt;</span>\n        <span class=\"nt\">&lt;/coding&gt;</span>\n    <span class=\"nt\">&lt;/code&gt;</span>\n    <span class=\"nt\">&lt;effectiveDateTime</span> <span class=\"na\">value=</span><span class=\"s\">&quot;2018-07-26&quot;</span><span class=\"nt\">/&gt;</span>\n    <span class=\"nt\">&lt;performer&gt;</span>\n        <span class=\"nt\">&lt;reference</span> <span class=\"na\">value=</span><span class=\"s\">&quot;urn:uuid:1927BBEE-39A0-4E3D-A51F-FEFF7448E81E&quot;</span><span class=\"nt\">/&gt;</span>\n        <span class=\"nt\">&lt;type</span> <span class=\"na\">value=</span><span class=\"s\">&quot;Organization&quot;</span><span class=\"nt\">/&gt;</span>\n        <span class=\"nt\">&lt;display</span> <span class=\"na\">value=</span><span class=\"s\">&quot;reporting-center ID&quot;</span><span class=\"nt\">/&gt;</span>\n    <span class=\"nt\">&lt;/performer&gt;</span>\n    <span class=\"nt\">&lt;valueCodeableConcept&gt;</span>\n        <span class=\"nt\">&lt;coding&gt;</span>\n            <span class=\"nt\">&lt;system</span> <span class=\"na\">value=</span><span class=\"s\">&quot;https://glstring.org&quot;</span><span class=\"nt\">/&gt;</span>\n            <span class=\"nt\">&lt;code</span> <span class=\"na\">value=</span><span class=\"s\">&quot;hla#3.31.0#HLA-A*03:01:01:01+HLA-A*30:01:01&quot;</span><span class=\"nt\">/&gt;</span>\n        <span class=\"nt\">&lt;/coding&gt;</span>\n    <span class=\"nt\">&lt;/valueCodeableConcept&gt;</span>\n    <span class=\"nt\">&lt;method&gt;</span>\n        <span class=\"nt\">&lt;text</span> <span class=\"na\">value=</span><span class=\"s\">&quot;sbt-ngs locus=HLA-A test-id=PACBIOSequel test-id-source=Be The Match&quot;</span><span class=\"nt\">/&gt;</span>\n    <span class=\"nt\">&lt;/method&gt;</span>\n    <span class=\"nt\">&lt;specimen&gt;</span>\n        <span class=\"nt\">&lt;reference</span> <span class=\"na\">value=</span><span class=\"s\">&quot;urn:uuid:249AA766-38F0-4770-809E-C2A58B5DED8A&quot;</span><span class=\"nt\">/&gt;</span>\n        <span class=\"nt\">&lt;display</span> <span class=\"na\">value=</span><span class=\"s\">&quot;buccal swab: 001-246802468&quot;</span><span class=\"nt\">/&gt;</span>\n    <span class=\"nt\">&lt;/specimen&gt;</span>\n <span class=\"c\">&lt;!--</span>\n<span class=\"c\">    &lt;derivedFrom&gt;</span>\n<span class=\"c\">        &lt;reference value=&quot;Observation/f456&quot;/&gt;</span>\n<span class=\"c\">        &lt;type value=&quot;Observation&quot;/&gt;</span>\n<span class=\"c\">        &lt;display value=&quot;HLA-A*03:01:01:01 allele&quot;/&gt;</span>\n<span class=\"c\">    &lt;/derivedFrom&gt;</span>\n<span class=\"c\">    &lt;derivedFrom&gt;</span>\n<span class=\"c\">        &lt;reference value=&quot;Observation/f457&quot;/&gt;</span>\n<span class=\"c\">        &lt;type value=&quot;Observation&quot;/&gt;</span>\n<span class=\"c\">        &lt;display value=&quot;HLA-A*30:01:01 allele&quot;/&gt;</span>\n<span class=\"c\">    &lt;/derivedFrom&gt;</span>\n<span class=\"c\"> --&gt;</span>\n    <span class=\"nt\">&lt;component&gt;</span>\n        <span class=\"nt\">&lt;code&gt;</span>\n            <span class=\"nt\">&lt;coding&gt;</span>\n                <span class=\"nt\">&lt;system</span> <span class=\"na\">value=</span><span class=\"s\">&quot;http://loinc.org&quot;</span><span class=\"nt\">/&gt;</span>\n                <span class=\"nt\">&lt;code</span> <span class=\"na\">value=</span><span class=\"s\">&quot;48018-6&quot;</span><span class=\"nt\">/&gt;</span>\n                <span class=\"nt\">&lt;display</span> <span class=\"na\">value=</span><span class=\"s\">&quot;Gene studied [ID]&quot;</span><span class=\"nt\">/&gt;</span>\n            <span class=\"nt\">&lt;/coding&gt;</span>\n        <span class=\"nt\">&lt;/code&gt;</span>\n        <span class=\"nt\">&lt;valueCodeableConcept&gt;</span>\n            <span class=\"nt\">&lt;coding&gt;</span>\n                <span class=\"nt\">&lt;system</span> <span class=\"na\">value=</span><span class=\"s\">&quot;https://www.genenames.org&quot;</span><span class=\"nt\">/&gt;</span>\n                <span class=\"nt\">&lt;code</span> <span class=\"na\">value=</span><span class=\"s\">&quot;HGNC:4931&quot;</span><span class=\"nt\">/&gt;</span>\n                <span class=\"nt\">&lt;display</span> <span class=\"na\">value=</span><span class=\"s\">&quot;HLA-A&quot;</span><span class=\"nt\">/&gt;</span>\n            <span class=\"nt\">&lt;/coding&gt;</span>\n        <span class=\"nt\">&lt;/valueCodeableConcept&gt;</span>\n    <span class=\"nt\">&lt;/component&gt;</span>\n<span class=\"nt\">&lt;/Observation&gt;</span>\n</pre></div>",
        "id": 154013468,
        "sender_full_name": " Bob Milius",
        "timestamp": 1540854325
    },
    {
        "content": "<p>and validator says it's okay</p>\n<div class=\"codehilite\"><pre><span></span>$ java -jar org.hl7.fhir.validator.jar observation_genotype_HLA-A_R4.xml -ig hl7.fhir.uv.genomics-reporting#dev -profile http://hl7.org/fhir/uv/genomics-reporting/StructureDefinition/obs-genotype\nFHIR Validator Build ??\nArguments: observation_genotype_HLA-A_R4.xml -ig hl7.fhir.uv.genomics-reporting#dev -profile http://hl7.org/fhir/uv/genomics-reporting/StructureDefinition/obs-genotype\n  .. connect to tx server @ http://tx.fhir.org\n  .. definitions from hl7.fhir.core#3.6.0\n    <span class=\"o\">(</span>v3.6.0-null<span class=\"o\">)</span>\n+  .. load IG from hl7.fhir.uv.genomics-reporting#dev\n  .. validate <span class=\"o\">[</span>observation_genotype_HLA-A_R4.xml<span class=\"o\">]</span> against <span class=\"o\">[</span>http://hl7.org/fhir/uv/genomics-reporting/StructureDefinition/obs-genotype<span class=\"o\">]</span>\nTerminology server: Check <span class=\"k\">for</span> supported code systems <span class=\"k\">for</span> http://loinc.org\nSuccess...validating observation_genotype_HLA-A_R4.xml:  error:0 warn:0 info:0\n</pre></div>",
        "id": 154013469,
        "sender_full_name": " Bob Milius",
        "timestamp": 1540854377
    },
    {
        "content": "<p>That's definitely a validator bug.  Submit a change request and point to this thread</p>",
        "id": 154013472,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1540855165
    },
    {
        "content": "<p>will do -- <a href=\"https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=19565\" target=\"_blank\" title=\"https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=19565\">#19565</a></p>",
        "id": 154013473,
        "sender_full_name": " Bob Milius",
        "timestamp": 1540855209
    },
    {
        "content": "<p>We reference the haplotype/genotype Observation.code values as a \"Pattern\" - So <span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> you are saying that should cause the validator to reject if the instance's Observation.code doesn't match the Pattern?</p>",
        "id": 154013474,
        "sender_full_name": "Kevin Power",
        "timestamp": 1540855298
    },
    {
        "content": "<p>Maybe it should - I just asked because it is different than how I see some other Observation.code things in other profiles (like the Heartrate one I referenced earlier)</p>",
        "id": 154013475,
        "sender_full_name": "Kevin Power",
        "timestamp": 1540855406
    },
    {
        "content": "<p>Or maybe something else I noted here: <a href=\"http://wiki.hl7.org/index.php?title=FHIR_Spreadsheet_Authoring#Structure_Tab\" target=\"_blank\" title=\"http://wiki.hl7.org/index.php?title=FHIR_Spreadsheet_Authoring#Structure_Tab\">http://wiki.hl7.org/index.php?title=FHIR_Spreadsheet_Authoring#Structure_Tab</a></p>\n<blockquote>\n<p>Pattern: This specifies a set of elements and values that must be present in the instance. It should only be present for complex data types and is expressed as XML. Additional elements and values not specified in the pattern are still permitted.</p>\n</blockquote>\n<p>Note <em>XML</em> - It looks like our patterns are in JSON?  Is that just an older out of date document?  It does say its last edit was 2017.</p>",
        "id": 154013480,
        "sender_full_name": "Kevin Power",
        "timestamp": 1540855914
    },
    {
        "content": "<p>It should reject it.  But patterns aren't used as much so it's not super-surprising that the validation isn't quite right.</p>",
        "id": 154013501,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1540863250
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191913\">@Kevin Power</span> what profile is that figure from? US-Core? Argonaut? STU3 or R4? I'm trying to edit a spreadsheet to resemble that and am having issues. Now the validator is not even recognizing my observation.code even when I think it's correct, e.g.,</p>\n<div class=\"codehilite\"><pre><span></span>*FAILURE* validating observation_genotype_HLA-A_R4.xml:  error:1 warn:0 info:1\n  Error @ Observation.code <span class=\"o\">(</span>line <span class=\"m\">23</span>, col11<span class=\"o\">)</span> : Profile http://hl7.org/fhir/uv/genomics-reporting/StructureDefinition/obs-genotype, Element <span class=\"s1\">&#39;Observation.code.coding&#39;</span>: minimum <span class=\"nv\">required</span> <span class=\"o\">=</span> <span class=\"m\">1</span>, but only found <span class=\"m\">0</span>\n  Information @ Observation.code.coding <span class=\"o\">(</span>line <span class=\"m\">23</span>, col19<span class=\"o\">)</span> : This element does not match any known slice <span class=\"k\">for</span> the profile http://hl7.org/fhir/uv/genomics-reporting/StructureDefinition/obs-genotype\n</pre></div>\n\n\n<p>and here's my observation.code,</p>\n<div class=\"codehilite\"><pre><span></span>    <span class=\"nt\">&lt;code&gt;</span>\n        <span class=\"nt\">&lt;coding&gt;</span>\n            <span class=\"nt\">&lt;system</span> <span class=\"na\">value=</span><span class=\"s\">&quot;http://loinc.org&quot;</span><span class=\"nt\">/&gt;</span>\n            <span class=\"nt\">&lt;code</span> <span class=\"na\">value=</span><span class=\"s\">&quot;84413-4&quot;</span><span class=\"nt\">/&gt;</span>\n            <span class=\"nt\">&lt;display</span> <span class=\"na\">value=</span><span class=\"s\">&quot;Genotype display name&quot;</span><span class=\"nt\">/&gt;</span>\n        <span class=\"nt\">&lt;/coding&gt;</span>\n    <span class=\"nt\">&lt;/code&gt;</span>\n</pre></div>",
        "id": 154013732,
        "sender_full_name": " Bob Milius",
        "timestamp": 1540923588
    },
    {
        "content": "<p>I pulled that from FHIR Core (fhir\\source\\observation\\observation-vitalsigns-heartrate-profile-spreadsheet.xml)</p>",
        "id": 154013733,
        "sender_full_name": "Kevin Power",
        "timestamp": 1540923790
    },
    {
        "content": "<p>thanks! btw, I found a typo in my spreadsheet, so working better now.</p>",
        "id": 154013737,
        "sender_full_name": " Bob Milius",
        "timestamp": 1540924140
    },
    {
        "content": "<p>fyi, I have another issue with the validation, but asked the <a href=\"#narrow/stream/23-conformance/subject/validator.20and.20profiling.20with.20spreadsheets\" title=\"#narrow/stream/23-conformance/subject/validator.20and.20profiling.20with.20spreadsheets\">question in the conformance stream</a></p>",
        "id": 154013833,
        "sender_full_name": " Bob Milius",
        "timestamp": 1540931883
    },
    {
        "content": "<p>I'm new to building / validating, but it seems as though our latest IG build is no longer visible (e.g. <a href=\"http://build.fhir.org/ig/HL7/genomics-reporting/\" target=\"_blank\" title=\"http://build.fhir.org/ig/HL7/genomics-reporting/\">http://build.fhir.org/ig/HL7/genomics-reporting/</a>). Any idea what is happening?</p>",
        "id": 154016706,
        "sender_full_name": "Bob Dolin",
        "timestamp": 1541691250
    },
    {
        "content": "<p>Yup - Afraid it is a known issue (see the <a class=\"stream\" data-stream-id=\"99\" href=\"/#narrow/stream/99-IG-creation\">#IG creation</a> channel)</p>",
        "id": 154016708,
        "sender_full_name": "Kevin Power",
        "timestamp": 1541691357
    },
    {
        "content": "<p>Specifically the topics \"New error message in IG build\" and \"ig-autobuilder error\"</p>",
        "id": 154016710,
        "sender_full_name": "Kevin Power",
        "timestamp": 1541691558
    },
    {
        "content": "<p>ok, thanks <span class=\"user-mention\" data-user-id=\"191913\">@Kevin Power</span></p>",
        "id": 154016711,
        "sender_full_name": "Bob Dolin",
        "timestamp": 1541691635
    },
    {
        "content": "<p>I have decided to work on some cleanup activities today regarding validation.  I will look to start on errors found <a href=\"http://build.fhir.org/ig/HL7/genomics-reporting/qa.html\" target=\"_blank\" title=\"http://build.fhir.org/ig/HL7/genomics-reporting/qa.html\">here</a></p>",
        "id": 154988576,
        "sender_full_name": "Kevin Power",
        "timestamp": 1547308224
    }
]