[
    {
        "content": "<p>This is  kinda a follow on to my previous sliceing question.<br>\nI get the following error when I try to slice Observation.hasMember <br>\nERROR 13046:  'Mapping to undefined parameter 's hasMember (slice # = 1): slice could not be found.'</p>\n<p>My code is as follows.</p>\n<p>Observation:<br>\nEntry: Observation<br>\nProperty: HasMemberSlices 0..1</p>\n<p>Group: HasMemberSlices<br>\nProperty: HasMemberSlice 0..*<br>\n                                                                                                                                            // ConvertFhirClass.cs:340<br>\nGroup: HasMemberSlice<br>\nProperty: HasMember 1..1<br>\n                                                                                                                                            // ConvertFhirClass.cs:343<br>\nElement: HasMember<br>\nValue: fhir.observation.Observation<br>\n    or fhir.questionnaireresponse.QuestionnaireResponse<br>\n    or fhir.molecularsequence.MolecularSequence</p>\n<p>Entry: BreastRadiologyObservation<br>\nParent: Observation<br>\n    HasMemberSlices.HasMemberSlice<br>\n    includes PatientHistory 0..1</p>\n<p>Group: PatientHistory<br>\nParent: HasMemberSlice<br>\n    HasMember only BreastRadiologyObservationPatientHistory</p>\n<p>Entry: BreastRadiologyObservationPatientHistory<br>\nParent: Observation</p>\n<p>and my mapping file is</p>\n<p>BreastRadiologyObservation maps to Observation:<br>\n    HasMemberSlices.PatientHistory.HasMember maps to hasMember (slice # = 1)</p>\n<p>What am I doing wrong??<br>\nThanks in advance!<br>\nKurt A.</p>\n<p><a href=\"/user_uploads/10155/PhFgi1oO8fVNX5YIJKaAhV8o/Observation.txt\" target=\"_blank\" title=\"Observation.txt\">Observation.txt</a> <a href=\"/user_uploads/10155/Xhq3eyORuoeA_wChx4CFR_zw/Observation_map_r4.txt\" target=\"_blank\" title=\"Observation_map_r4.txt\">Observation_map_r4.txt</a> <br>\n<a href=\"/user_uploads/10155/XRE5HkHfLR3EbTL5y5y6shg8/BreastRadiologyObservation.txt\" target=\"_blank\" title=\"BreastRadiologyObservation.txt\">BreastRadiologyObservation.txt</a> <a href=\"/user_uploads/10155/eX_fzflHOH-DKqygk-u7m-0F/BreastRadiologyObservation_map.r4.txt\" target=\"_blank\" title=\"BreastRadiologyObservation_map.r4.txt\">BreastRadiologyObservation_map.r4.txt</a> <a href=\"/user_uploads/10155/PDriP71JsYm1Q_PJY_uGt8uH/BreastRadiologyObservationPatientHistory.txt\" target=\"_blank\" title=\"BreastRadiologyObservationPatientHistory.txt\">BreastRadiologyObservationPatientHistory.txt</a></p>",
        "id": 176598964,
        "sender_full_name": "Kurt Allen",
        "timestamp": 1569440528
    },
    {
        "content": "<p>So the basic error is that the <code>slice #</code> construct is only used to map something to an <em>existing</em> slice in an <em>existing</em> profile.  For example, if your class mapped to the official FHIR BP file, you could map your elements to the existing <code>SystolicBP</code> and <code>DiastolicBP</code> slices by their numbers (the order in which they show up in the profile).</p>\n<p>In your case, there is no existing profile w/ slices, so the <code>slice #</code> construct doesn't apply.  You would need to use one of the other constructs.  There is slicing documentation here: <a href=\"http://standardhealthrecord.org/cimpl-doc/#cimpl6LanguageReference/#slicing\" target=\"_blank\" title=\"http://standardhealthrecord.org/cimpl-doc/#cimpl6LanguageReference/#slicing\">http://standardhealthrecord.org/cimpl-doc/#cimpl6LanguageReference/#slicing</a> (but beware, it's complicated!).</p>\n<p>That said, I'm not sure if the current structure you've laid out will work well with how we slice anyway.  I think the the target being a choice of <code>Observation</code>, <code>QuestionnaireResponse</code>, or <code>MolecularSequence</code> makes things trickier.  <span class=\"user-mention\" data-user-id=\"191447\">@Mark Kramer</span> -- any ideas for how to model this?  Because of the choice, I don't think we can use \"includes\", although I may be wrong.</p>",
        "id": 176605126,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1569445269
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191469\">@Chris Moesel</span>  and <span class=\"user-mention\" data-user-id=\"191447\">@Mark Kramer</span>  I can constrain the choice to be just observation (the base code was auto generated from the fhir structure def's), so I could derive from the base class and constrain that field.<br>\nIt is kinda a problem that hasMember is not a backbone element with a Code associated with each instance. <span class=\"user-mention\" data-user-id=\"191447\">@Mark Kramer</span> Is this worthy of a request to the Fhir Gods?</p>",
        "id": 176612193,
        "sender_full_name": "Kurt Allen",
        "timestamp": 1569451616
    }
]