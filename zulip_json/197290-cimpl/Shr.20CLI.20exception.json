[
    {
        "content": "<p>Hey <span class=\"user-mention\" data-user-id=\"191469\">@Chris Moesel</span>  and <span class=\"user-mention\" data-user-id=\"191447\">@Mark Kramer</span> <br>\n I am getting an exception in the cli. I sont know if I am doing something wrong, or if this might be a bug.</p>\n<p>The offending Entry is:</p>\n<p>*Element: BreastBodyLocation<br>\nParent: BodyLocation<br>\nDescription: \"Location of the breast abnormality.\"<br>\nProperty: breastrad.Breastdepth 0..1<br>\n    Code = SCT#76752008<br>\n    RelationToLandmark.LandmarkToBodyLocationDirection only ClockFaceDirection<br>\n    RelationToLandmark.LandmarkLocation.Code = SCT#181139003<br>\n    RelationToLandmark.LandmarkType = SCT#361083003<br>\n    RelationToLandmark.LandmarkToBodyLocationDistance[Quantity].Units = UCUM#cm<br>\n*<br>\nIf I remove the line</p>\n<ul>\n<li>RelationToLandmark.LandmarkToBodyLocationDirection only ClockFaceDirection<br>\n*<br>\nthen I do not get the exception erro rmessage.</li>\n</ul>\n<p>The exception message is:</p>\n<p>*[17:36:59.573Z] ERROR shr:  (module=shr-fhir-export, shrId=breastrad.BreastAbnormality, target=Observation)<br>\n    Unexpected error processing mapping rule. ERROR_CODE:13050 TypeError: Cannot read property 'type' of undefined<br>\n        at FHIRExporter.getElementInExtension (C:\\Development\\MITRE\\cimpl\\shr-cli\\node_modules\\shr-fhir-export\\lib\\export.js:2504:12)<br>\n        at FHIRExporter.getElementInExtension (C:\\Development\\MITRE\\cimpl\\shr-cli\\node_modules\\shr-fhir-export\\lib\\export.js:2505:19)<br>\n        at FHIRExporter.applyConstraints (C:\\Development\\MITRE\\cimpl\\shr-cli\\node_modules\\shr-fhir-export\\lib\\export.js:2229:32)<br>\n        at FHIRExporter.addExtension (C:\\Development\\MITRE\\cimpl\\shr-cli\\node_modules\\shr-fhir-export\\lib\\export.js:3282:10)<br>\n        at FHIRExporter.processFieldToExtensionMappingRule (C:\\Development\\MITRE\\cimpl\\shr-cli\\node_modules\\shr-fhir-export\\lib\\export.js:1050:10)<br>\n        at FHIRExporter.processMappingRules (C:\\Development\\MITRE\\cimpl\\shr-cli\\node_modules\\shr-fhir-export\\lib\\export.js:1005:18)<br>\n        at FHIRExporter.mappingToProfile (C:\\Development\\MITRE\\cimpl\\shr-cli\\node_modules\\shr-fhir-export\\lib\\export.js:359:12)<br>\n        at FHIRExporter.export (C:\\Development\\MITRE\\cimpl\\shr-cli\\node_modules\\shr-fhir-export\\lib\\export.js<span aria-label=\"100\" class=\"emoji emoji-1f4af\" role=\"img\" title=\"100\">:100:</span>14)<br>\n        at Object.exportToFHIR (C:\\Development\\MITRE\\cimpl\\shr-cli\\node_modules\\shr-fhir-export\\lib\\export.js:44:25)<br>\n        at Object.&lt;anonymous&gt; (C:\\Development\\MITRE\\cimpl\\shr-cli\\app.js:255:23)<br>\n        at Module._compile (internal/modules/cjs/loader.js:701:30)<br>\n        at Object.Module._extensions..js (internal/modules/cjs/loader.js:712:10)<br>\n        at Module.load (internal/modules/cjs/loader.js:600:32)<br>\n        at tryModuleLoad (internal/modules/cjs/loader.js:539:12)<br>\n        at Function.Module._load (internal/modules/cjs/loader.js:531:3)<br>\n        at Function.Module.runMain (internal/modules/cjs/loader.js:754:12)<br>\n    --<br>\n    mappingRule: BreastBodyLocation.RelationToLandmark maps to bodySite.extension<br>\n*</p>\n<p>If you want, you can get the full code at <a href=\"https://github.com/applicadia/Fhir-BreastRadiologyReport.git\" target=\"_blank\" title=\"https://github.com/applicadia/Fhir-BreastRadiologyReport.git\">https://github.com/applicadia/Fhir-BreastRadiologyReport.git</a><br>\n(It should be public, let me know if not)<br>\nI put the directory <strong>Fhir-BreastRadiologyReport </strong> in the directory that contains the <strong>shr-cli</strong> subdirectory. <strong>BuildProfiles.bat</strong> executes the cli build (windows...)</p>",
        "id": 170915300,
        "sender_full_name": "Kurt Allen",
        "timestamp": 1563212725
    },
    {
        "content": "<p>Hi <span class=\"user-mention\" data-user-id=\"192611\">@Kurt Allen</span> -- I'm afraid I can't look at this right now (about to go into a meeting), but I wanted you to know we just released a new CLI: <a href=\"https://github.com/standardhealth/shr-cli/releases/tag/v6.2.2\" target=\"_blank\" title=\"https://github.com/standardhealth/shr-cli/releases/tag/v6.2.2\">https://github.com/standardhealth/shr-cli/releases/tag/v6.2.2</a></p>\n<p>I doubt it fixes the problem above, but still wanted you to know.</p>",
        "id": 170915675,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1563213044
    },
    {
        "content": "<p>Hey <span class=\"user-mention\" data-user-id=\"191469\">@Chris Moesel</span> Have fun! I did just download and compiled  6.2.2 (thanks for the heads up) and have the same issue.</p>\n<p>Below is the 6.2.2 exception message</p>\n<p>*[17:53:07.456Z] ERROR shr:  (module=shr-fhir-export, shrId=breastrad.BreastAbnormality, target=Observation)<br>\n    Unexpected error processing mapping rule. ERROR_CODE:13050 TypeError: Cannot read property 'type' of undefined<br>\n        at FHIRExporter.getElementInExtension (C:\\Development\\MITRE\\cimpl\\shr-cli\\node_modules\\shr-fhir-export\\lib\\export.js:2504:12)<br>\n        at FHIRExporter.getElementInExtension (C:\\Development\\MITRE\\cimpl\\shr-cli\\node_modules\\shr-fhir-export\\lib\\export.js:2505:19)<br>\n        at FHIRExporter.applyConstraints (C:\\Development\\MITRE\\cimpl\\shr-cli\\node_modules\\shr-fhir-export\\lib\\export.js:2229:32)<br>\n        at FHIRExporter.addExtension (C:\\Development\\MITRE\\cimpl\\shr-cli\\node_modules\\shr-fhir-export\\lib\\export.js:3282:10)<br>\n        at FHIRExporter.processFieldToExtensionMappingRule (C:\\Development\\MITRE\\cimpl\\shr-cli\\node_modules\\shr-fhir-export\\lib\\export.js:1050:10)<br>\n        at FHIRExporter.processMappingRules (C:\\Development\\MITRE\\cimpl\\shr-cli\\node_modules\\shr-fhir-export\\lib\\export.js:1005:18)<br>\n        at FHIRExporter.mappingToProfile (C:\\Development\\MITRE\\cimpl\\shr-cli\\node_modules\\shr-fhir-export\\lib\\export.js:359:12)<br>\n        at FHIRExporter.export (C:\\Development\\MITRE\\cimpl\\shr-cli\\node_modules\\shr-fhir-export\\lib\\export.js<span aria-label=\"100\" class=\"emoji emoji-1f4af\" role=\"img\" title=\"100\">:100:</span>14)<br>\n        at Object.exportToFHIR (C:\\Development\\MITRE\\cimpl\\shr-cli\\node_modules\\shr-fhir-export\\lib\\export.js:44:25)<br>\n        at Object.&lt;anonymous&gt; (C:\\Development\\MITRE\\cimpl\\shr-cli\\app.js:255:23)<br>\n        at Module._compile (internal/modules/cjs/loader.js:701:30)<br>\n        at Object.Module._extensions..js (internal/modules/cjs/loader.js:712:10)<br>\n        at Module.load (internal/modules/cjs/loader.js:600:32)<br>\n        at tryModuleLoad (internal/modules/cjs/loader.js:539:12)<br>\n        at Function.Module._load (internal/modules/cjs/loader.js:531:3)<br>\n        at Function.Module.runMain (internal/modules/cjs/loader.js:754:12)<br>\n    --<br>\n    mappingRule: BreastBodyLocation.RelationToLandmark maps to bodySite.extension*</p>",
        "id": 170916222,
        "sender_full_name": "Kurt Allen",
        "timestamp": 1563213434
    },
    {
        "content": "<p>Hi <span class=\"user-mention\" data-user-id=\"192611\">@Kurt Allen</span> -- I tried to look at this, but I can't find the definition of <code>BreastBodyLocation</code> that you reference.  When I grep for it, I find two definitions.</p>\n<p>The first is in BreastAbnormality.txt:<br>\n<a href=\"/user_uploads/10155/nNUDcipO1dbnvZSS3SYa7Q8k/pasted_image.png\" target=\"_blank\" title=\"pasted_image.png\">pasted image</a> </p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/nNUDcipO1dbnvZSS3SYa7Q8k/pasted_image.png\" target=\"_blank\" title=\"pasted image\"><img src=\"/user_uploads/10155/nNUDcipO1dbnvZSS3SYa7Q8k/pasted_image.png\"></a></div><p>And the second is in <code>BreastBodyLocation.txt</code>:<br>\n<a href=\"/user_uploads/10155/LOX2pOzNbXK7tEQZgsLcUQ47/pasted_image.png\" target=\"_blank\" title=\"pasted_image.png\">pasted image</a> </p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/LOX2pOzNbXK7tEQZgsLcUQ47/pasted_image.png\" target=\"_blank\" title=\"pasted image\"><img src=\"/user_uploads/10155/LOX2pOzNbXK7tEQZgsLcUQ47/pasted_image.png\"></a></div><p>Did you recently change this?  Is it still an issue or is it OBE?</p>",
        "id": 171079645,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1563371372
    },
    {
        "content": "<p>Yo <span class=\"user-mention\" data-user-id=\"191469\">@Chris Moesel</span> <br>\n(Sorry to take so long getting back to you, my Dad is having some health issues and my time is kinda fragmented...)</p>\n<p>My bad, I think you were using the master branch, and I should have said use the development branch. Sorry about that. I created a CliException branch that has the bug in it,so if you wanna checkout that branch and run BuildProfiles.bat you should get the same exception.</p>\n<p>Many Thanks!<br>\nKurt A.</p>",
        "id": 171098633,
        "sender_full_name": "Kurt Allen",
        "timestamp": 1563384769
    }
]