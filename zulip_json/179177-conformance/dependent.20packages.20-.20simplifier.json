[
    {
        "content": "<p>I have a package <a href=\"https://packages.simplifier.net/UK.DM.r4/-/UK.DM.r4-0.0.28-dev.tgz\">https://packages.simplifier.net/UK.DM.r4/-/UK.DM.r4-0.0.28-dev.tgz</a><br>\nwithin simplifier it depends on several other packages. How should I find these from the tgz file?</p>\n<p>What I want to do is download the package plus the related packages and run the resources through a custom FHIR Validator.</p>",
        "id": 206562617,
        "sender_full_name": "Kevin Mayfield",
        "timestamp": 1597144004
    },
    {
        "content": "<p>(or IG Package validation)</p>",
        "id": 206562638,
        "sender_full_name": "Kevin Mayfield",
        "timestamp": 1597144031
    },
    {
        "content": "<p>what's the ids of the other packages?</p>",
        "id": 206568185,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1597148894
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191687\">@Kevin Mayfield</span> Unpack the package and find package.json in the package folder. That contains:</p>\n<div class=\"codehilite\"><pre><span></span><code>&quot;dependencies&quot;: {\n    &quot;UK.Spine.r4&quot;: &quot;0.0.6-dev&quot;,\n    &quot;UK.Core.r4&quot;: &quot;1.2.0&quot;,\n    &quot;hl7.fhir.r4.core&quot;: &quot;4.0.1&quot;\n  }\n</code></pre></div>\n\n\n<p>Which gives you the components to build up the download URLs for the other packages.</p>",
        "id": 206792277,
        "sender_full_name": "Ward Weistra",
        "timestamp": 1597308125
    },
    {
        "content": "<p>How did I miss that :) thanks</p>\n<p>How would I know they were on simplifier. Using the IG Builder I would get the Uri for down within the ImplementationGuide resource e.g.</p>\n<p>&lt;dependsOn&gt;<br>\n    &lt;uri value=\"<a href=\"https://project-wildfyre.github.io/uk-testcore-r4/ImplementationGuide/uk.testcore.r4\">https://project-wildfyre.github.io/uk-testcore-r4/ImplementationGuide/uk.testcore.r4</a>\" /&gt;<br>\n    &lt;packageId value=\"uk.testcore.r4\"/&gt;<br>\n    &lt;version value=\"dev\"/&gt;<br>\n  &lt;/dependsOn&gt;</p>",
        "id": 206793305,
        "sender_full_name": "Kevin Mayfield",
        "timestamp": 1597309018
    },
    {
        "content": "<p>Should the Simplifier IG resource have entries like:</p>\n<p>&lt;dependsOn&gt;<br>\n&lt;uri value=\"<a href=\"https://packages.simplifier.net/UK.Core.r4/-/UK.Core.r4-1.2.0.tgz\">https://packages.simplifier.net/UK.Core.r4/-/UK.Core.r4-1.2.0.tgz</a>\" /&gt;<br>\n&lt;packageId value=\"UK.Core.r4\"/&gt;<br>\n&lt;version value=\"1.2.0\"/&gt;<br>\n&lt;/dependsOn&gt;</p>",
        "id": 206794288,
        "sender_full_name": "Kevin Mayfield",
        "timestamp": 1597309828
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191687\">@Kevin Mayfield</span> I believe <code>dependsOn.uri</code> should have <a href=\"https://www.hl7.org/fhir/implementationguide-definitions.html#ImplementationGuide.dependsOn.uri\">the canonical of the Implementation Guide</a> (= <a href=\"https://confluence.hl7.org/display/FHIR/NPM+Package+Specification#NPMPackageSpecification-ImplementationGuidesandpackages\">canonical of the package</a>), not the download URL of the package.</p>\n<p>Every package that is published to the package registry (like official publications by HL7, FHIR Foundation and any package published on Simplifier) is available on the package registry (available under the <a href=\"http://package.simplifier.net\">package.simplifier.net</a> or the identical <a href=\"http://packages.fhir.org\">packages.fhir.org</a> url).</p>\n<p>I understand the IG Publisher will look the package based on the <code>packageId</code> and <code>version</code> only:</p>\n<ul>\n<li>If version is <code>dev</code>: It looks in only in your local cache</li>\n<li>If version is <code>current</code>: It looks first in your local cache, if not current anymore or not available looks in <a href=\"https://build.fhir.org/ig/\">https://build.fhir.org/ig/</a></li>\n<li>If version is anything else: It looks first in your local cache, if not available looks in <a href=\"http://packages.fhir.org\">packages.fhir.org</a> (==packages.simplifier.org)</li>\n</ul>",
        "id": 206799156,
        "sender_full_name": "Ward Weistra",
        "timestamp": 1597313989
    },
    {
        "content": "<p>yes that's true, except that the package resolution can start with a canonical URL instead of a packageId</p>",
        "id": 206803834,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1597318179
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> The packages you're getting here (<a href=\"https://github.com/hapifhir/org.hl7.fhir.core/blob/master/org.hl7.fhir.utilities/src/main/java/org/hl7/fhir/utilities/cache/FilesystemPackageCacheManager.java#L89\">https://github.com/hapifhir/org.hl7.fhir.core/blob/master/org.hl7.fhir.utilities/src/main/java/org/hl7/fhir/utilities/cache/FilesystemPackageCacheManager.java#L89</a>) from the secondary package server, are those tooling related packages that Simplifier has refused to import? Or for when Simplifier doesn't pick them up quickly enough?</p>",
        "id": 206805081,
        "sender_full_name": "Ward Weistra",
        "timestamp": 1597319236
    },
    {
        "content": "<p>both.</p>",
        "id": 206805185,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1597319309
    },
    {
        "content": "<p>I don't know how quickly simplifier picks them up, but the back up scans every hour, or on demand.</p>",
        "id": 206805231,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1597319347
    },
    {
        "content": "<p>and then there's the packages that <a href=\"http://packages.fhir.org\">packages.fhir.org</a> won't pick up - hl7.fhir.pubpack being the critical one, though there are others</p>",
        "id": 206805278,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1597319397
    },
    {
        "content": "<p>btw, simplifier still does not export it's own package feed</p>",
        "id": 206805330,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1597319413
    },
    {
        "content": "<p>Cheers, I'll do some experimentation.</p>",
        "id": 206922366,
        "sender_full_name": "Kevin Mayfield",
        "timestamp": 1597406909
    },
    {
        "content": "<p><a href=\"https://github.com/hapifhir/org.hl7.fhir.core/blob/master/org.hl7.fhir.utilities/src/main/java/org/hl7/fhir/utilities/cache/FilesystemPackageCacheManager.java\">https://github.com/hapifhir/org.hl7.fhir.core/blob/master/org.hl7.fhir.utilities/src/main/java/org/hl7/fhir/utilities/cache/FilesystemPackageCacheManager.java</a></p>\n<p>Doesn't pick up dependsOn packages does it. Presume IG Builder does this?</p>",
        "id": 206925672,
        "sender_full_name": "Kevin Mayfield",
        "timestamp": 1597409427
    },
    {
        "content": "<p>Yes, I think it happens around here: <a href=\"https://github.com/HL7/fhir-ig-publisher/blob/master/org.hl7.fhir.publisher.core/src/main/java/org/hl7/fhir/igtools/publisher/Publisher.java#L2643\">https://github.com/HL7/fhir-ig-publisher/blob/master/org.hl7.fhir.publisher.core/src/main/java/org/hl7/fhir/igtools/publisher/Publisher.java#L2643</a></p>",
        "id": 207141510,
        "sender_full_name": "Ward Weistra",
        "timestamp": 1597669884
    },
    {
        "content": "<p>the version <code>current</code> means, for now, resolve on <a href=\"http://build.fhir.org\">build.fhir.org</a> build record. It's on my long term list to also mean getting the latest from simplifier, when simplifier users want that and we know how it would work</p>",
        "id": 207185871,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1597691954
    }
]