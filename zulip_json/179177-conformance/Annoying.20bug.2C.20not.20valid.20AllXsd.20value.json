[
    {
        "content": "<p>Just tried 14.4.1 version of Forge today, but can't do anything with it. As I get a bug when I choose a resource to profile (any resource). The earlier version I have installed works fine but its kind of old (13.2). Will appreciate any help. By the way I run this in a Virtual Machine, Windows 10 because of my companys policy regarding third party software.</p>\n<p>ERROR message:</p>\n<p>2017-01-03T09:20:58<br>\nForge Forge 14.4.1 for DSTU2<br>\nFHIR DevDays 2016 Edition (hotfix)<br>\nVersion: Version 14.4.1.0 (ClickOnce)<br>\nFHIR Version: Fhir.NET library for 1.0.2</p>\n<hr>\n<p>FormatException in System.Xml:<br>\nThe string '2017-01-03T09.20.48+01:00' is not a valid AllXsd value.<br>\n   at System.Xml.Schema.XsdDateTime..ctor(String text, XsdDateTimeFlags kinds)<br>\n   at System.Xml.XmlConvert.ToDateTime(String s, XmlDateTimeSerializationMode dateTimeOption)<br>\n   at Forge.ViewModels.FhirDateTimeExtensions.GetValue(FhirDateTime source)<br>\n   at Forge.ViewModels.DateTimeStorageHandler..ctor(IViewModel property, Object instance, PropertyInfo propertyInfo, Object baseInstance, Boolean isForced)<br>\n   at Forge.ViewModels.ProfileVM.set_ModelElement(Base value)<br>\n   at Forge.ViewModels.ProfileVM.Initialize(Base modelElement, Base baseElement)<br>\n   at Forge.ViewModels.ProfileVM..ctor(ISessionItem owner, StructureDefinition model, StructureDefinition baseModel, String contentDirectory)<br>\n   at Forge.ViewModels.ProfileVM.New(ISessionItem owner, TypeReference typeRef)<br>\n   at Forge.ViewModels.SessionItemVM.&lt;&gt;c__DisplayClass121_0.&lt;AddNewProfile&gt;b__0(ISessionItem owner)<br>\n   at Forge.ViewModels.SessionItemVM..ctor(ISessionItem owner, Func`2 resourceFactory, Boolean isFolder, Boolean isPackageFolder, Boolean isResourceFolder)<br>\n   at Forge.ViewModels.SessionItemVM.AddNewProfile(TypeReference typeRef)<br>\n   at Forge.UI.Views.MainPage.&lt;&gt;c__DisplayClass16_0.&lt;NewProfile_Return&gt;b__0()<br>\n   at Forge.UI.Views.MainPage.&lt;&gt;c__DisplayClass5_0.&lt;SafeAction&gt;b__0()</p>",
        "id": 153865244,
        "sender_full_name": "Thomas Tveit Rosenlund",
        "timestamp": 1483431875
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"192856\">@Thomas Tveit Rosenlund</span> the time part \"09.20.48\" has an incorrect/unrecognized format (expecting 09:20:48, so with semicolon as separator). I can't immediately reproduce the issue on my machine, but I'll investigate further. Could be b/o localized datetime formatting settings on your machine.</p>",
        "id": 153865253,
        "sender_full_name": "Michel Rutten",
        "timestamp": 1483440943
    },
    {
        "content": "<p>Thanks for your input <span class=\"user-mention\" data-user-id=\"191336\">@Michel Rutten</span> . Just tried changing my Region/Change location/Format setting from Norwegian to English (UK). And that did the trick. Somehow that regional setting overrides the time parameter in the latest Forge build to produce Norwegian time format somewhere, and that obviously triggered the bug. Thanks for the prompt reply!</p>",
        "id": 153865254,
        "sender_full_name": "Thomas Tveit Rosenlund",
        "timestamp": 1483441969
    },
    {
        "content": "<p>Hi <span class=\"user-mention\" data-user-id=\"192856\">@Thomas Tveit Rosenlund</span> that confirms my suspicion. I'm still trying to reproduce the issue in code by forcing a custom locale. Is your machine configured for the nn-NO locale?</p>",
        "id": 153865257,
        "sender_full_name": "Michel Rutten",
        "timestamp": 1483445103
    },
    {
        "content": "<p>Hi <span class=\"user-mention\" data-user-id=\"191336\">@Michel Rutten</span>, my machine was configured to the nb-NO locale, and still is. I had to change the format settings specifically for time to get rid of the bug. </p>",
        "id": 153865258,
        "sender_full_name": "Thomas Tveit Rosenlund",
        "timestamp": 1483445961
    },
    {
        "content": "<p><a href=\"/user_uploads/10155/DVRkN8d-FJ9A3Zdhd1dfW4k9/Skjermbilde-2017-01-03-13.13.12.png\" target=\"_blank\" title=\"Skjermbilde-2017-01-03-13.13.12.png\">Skjermbilde-2017-01-03-13.13.12.png</a> </p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/DVRkN8d-FJ9A3Zdhd1dfW4k9/Skjermbilde-2017-01-03-13.13.12.png\" target=\"_blank\" title=\"Skjermbilde-2017-01-03-13.13.12.png\"><img src=\"/user_uploads/10155/DVRkN8d-FJ9A3Zdhd1dfW4k9/Skjermbilde-2017-01-03-13.13.12.png\"></a></div>",
        "id": 153865259,
        "sender_full_name": "Thomas Tveit Rosenlund",
        "timestamp": 1483445996
    },
    {
        "content": "<p>Note to all: the issue proved to be related to regional (datetime format) settings. This will be fixed in the forthcoming Forge update.</p>",
        "id": 153865273,
        "sender_full_name": "Michel Rutten",
        "timestamp": 1483452266
    },
    {
        "content": "<p>Was that a forge issue, or .NET fhir client parser issue?</p>",
        "id": 153865398,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1483510286
    },
    {
        "content": "<p>Looks like this isue was fixed b/o some recent changes in the FHIR .NET API, specifically the FhirDateTime ctors now using XmlConvert.ToString to convert XML datetime strings to C# native DateTime(Offset).</p>",
        "id": 153865412,
        "sender_full_name": "Michel Rutten",
        "timestamp": 1483521426
    },
    {
        "content": "<p>In Forge, I call a different (newer) overload with an additional parameter:<br>\nXmlConvert.ToDateTime(value, XmlDateTimeSerializationMode.RoundtripKind)<br>\nThis seems to better handle timezone offset conversions. Maybe the FHIR .NET API should do this too... thoughts?</p>",
        "id": 153865413,
        "sender_full_name": "Michel Rutten",
        "timestamp": 1483521626
    }
]