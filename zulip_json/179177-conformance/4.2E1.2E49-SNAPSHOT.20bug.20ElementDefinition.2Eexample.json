[
    {
        "content": "<p>When using extensions in StructureDefinition.example i get: <br>\n<code>Error @ StructureDefinition.snapshot.element[95].example[1].value.ofType(string) (line 5356, col43) : The extension http://hl7.org/fhir/StructureDefinition/iso21090-ADXP-houseNumber is not allowed to be used at this point (allowed = e:Address.line; this element is [[StructureDefinition.snapshot.element.example.value.ofType(string), BackboneElement.element.example.value, BackboneElement.element.example.valuestring, ElementDefinition.example.value, ElementDefinition.example.valuestring, Element.value, Element.valuestring, string])</code></p>",
        "id": 186100324,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1579525874
    },
    {
        "content": "<p>to reproduce: <code>java -jar org.hl7.fhir.validator.jar https://fhir.simplifier.net/r3/StructureDefinition/2fc591f5-ac56-4d97-82fa-ffd3f6c0c179 -version 3.0.2 -ig \"hl7.fhir.core#3.0.1\"</code></p>",
        "id": 186100341,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1579525893
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span></p>",
        "id": 186107443,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1579531424
    },
    {
        "content": "<p>another bug?: </p>\n<div class=\"codehilite\"><pre><span></span>*FAILURE* validating https://fhir.simplifier.net/r3/StructureDefinition/4333bf81-210d-43bb-a5b3-7f27c3c9f66e:  error:1 warn:0 info:0\n  Error @ StructureDefinition (line 1, col2) : The extension http://hl7.org/fhir/StructureDefinition/structuredefinition-wg is not allowed to be used at this point (allowed = e:*; this element is [[StructureDefinition])\n</pre></div>",
        "id": 186113864,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1579536224
    },
    {
        "content": "<p>to reproduce: <code>java -jar org.hl7.fhir.validator.jar https://fhir.simplifier.net/r3/StructureDefinition/4333bf81-210d-43bb-a5b3-7f27c3c9f66e -version 3.0.2 -ig \"hl7.fhir.core#3.0.1\"</code></p>",
        "id": 186113907,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1579536242
    },
    {
        "content": "<p>And a third bug (in the URI check for: \"<a href=\"http://www.acme.com/identifiers/patient\" target=\"_blank\" title=\"http://www.acme.com/identifiers/patient\">http://www.acme.com/identifiers/patient</a> or urn:ietf:rfc:3986 if the Identifier.value itself is a full uri\"):<br>\n<a href=\"https://github.com/hapifhir/org.hl7.fhir.core/issues/123\" target=\"_blank\" title=\"https://github.com/hapifhir/org.hl7.fhir.core/issues/123\">https://github.com/hapifhir/org.hl7.fhir.core/issues/123</a><br>\nAlready added a fixing PR</p>",
        "id": 186118468,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1579539591
    },
    {
        "content": "<ul>\n<li>\n<p>using extensions in ElementDefinition.example - fixed. Also in ElementDefinition.fixed[x] and ElementDefinition.pattern[x]. I can't think of anywhere else similar where extensions are allowed even against their context. (aside: I could check the ElementDefinition.path, but the rules there are complicated to resolve...)</p>\n</li>\n<li>\n<p>extension context = *. I can't see that this is meaningfully documented anywhere, so I don't think it's legal. you should talk to firely about that</p>\n</li>\n<li>\n<p>PR accepted</p>\n</li>\n</ul>",
        "id": 186128760,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1579549709
    },
    {
        "content": "<ol>\n<li><span aria-label=\"thumbs up\" class=\"emoji emoji-1f44d\" role=\"img\" title=\"thumbs up\">:thumbs_up:</span> </li>\n<li><span aria-label=\"thumbs up\" class=\"emoji emoji-1f44d\" role=\"img\" title=\"thumbs up\">:thumbs_up:</span> <br>\n2: The context is actually: </li>\n</ol>\n<div class=\"codehilite\"><pre><span></span><span class=\"nt\">&lt;context&gt;</span>\n    <span class=\"nt\">&lt;type</span> <span class=\"na\">value=</span><span class=\"s\">&quot;element&quot;</span><span class=\"nt\">/&gt;</span>\n    <span class=\"nt\">&lt;expression</span> <span class=\"na\">value=</span><span class=\"s\">&quot;Element&quot;</span><span class=\"nt\">/&gt;</span>\n  <span class=\"nt\">&lt;/context&gt;</span>\n</pre></div>",
        "id": 186133898,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1579555120
    },
    {
        "content": "<p>The Extension in question is from FHIR core: <a href=\"http://hl7.org/fhir/extension-structuredefinition-wg.xml.html\" target=\"_blank\" title=\"http://hl7.org/fhir/extension-structuredefinition-wg.xml.html\">http://hl7.org/fhir/extension-structuredefinition-wg.xml.html</a></p>",
        "id": 186133926,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1579555145
    },
    {
        "content": "<p>if that's the context, then it wouldn't give that error message. I think you've got some internal versioning problem there</p>",
        "id": 186134182,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1579555360
    },
    {
        "content": "<p>I can't reproduce it</p>",
        "id": 186134189,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1579555368
    },
    {
        "content": "<p>ok. Will investigate further.</p>",
        "id": 186136847,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1579558275
    },
    {
        "content": "<p>Got it:<a href=\"http://hl7.org/fhir/STU3/extension-structuredefinition-wg.xml.html\" target=\"_blank\" title=\"http://hl7.org/fhir/STU3/extension-structuredefinition-wg.xml.html\">http://hl7.org/fhir/STU3/extension-structuredefinition-wg.xml.html</a></p>",
        "id": 186138564,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1579560313
    },
    {
        "content": "<p><code>&lt;context value=\"*\"/&gt; </code><br>\nIts like that in STU3 3.0.2</p>",
        "id": 186138637,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1579560374
    },
    {
        "content": "<p>hmm</p>",
        "id": 186139517,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1579561354
    },
    {
        "content": "<p>I thought I had eliminated all of them</p>",
        "id": 186139519,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1579561360
    },
    {
        "content": "<p><a href=\"https://github.com/hapifhir/org.hl7.fhir.core/pull/125\" target=\"_blank\" title=\"https://github.com/hapifhir/org.hl7.fhir.core/pull/125\">https://github.com/hapifhir/org.hl7.fhir.core/pull/125</a></p>",
        "id": 186139619,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1579561488
    },
    {
        "content": "<p>ok you are doing it in the STU3 StrucDef conversion, more elegant than allowing * for every version.</p>",
        "id": 186140193,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1579562186
    },
    {
        "content": "<p>yes</p>",
        "id": 186140382,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1579562454
    }
]