[
    {
        "content": "<p>sfd-20 defined on StrutureDefinition.differential is: <code>element.first().slicing.empty()</code>but says <code>No slicing on the root element</code><br>\nelement.first() != root element so i assume sfd-20 is incorrect?<br>\nShould i create a tracker item?</p>",
        "id": 153908417,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1505417639
    },
    {
        "content": "<p>it could be fixed like this: <code>element.first().slicing.empty() or element.first().id.is(parent().type).not()</code>but i couldn't find a parent operator in fluentpath at the moment.</p>",
        "id": 153908434,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1505421773
    },
    {
        "content": "<p>That seems correct, except that to my knowledge it is not possible to reference a parent element in FHIRpath, so sdf-20 would have to be moved one level up and the expression modified accordingly</p>",
        "id": 153908438,
        "sender_full_name": "Stefan Lang",
        "timestamp": 1505421991
    },
    {
        "content": "<p>i'd prefer to have the restriction of an element at the element itself. It is much easier to read it that way. But this is just my personal opinion.</p>",
        "id": 153908447,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1505422489
    },
    {
        "content": "<p>it's already on the tracker: <a href=\"https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=13768&amp;start=0\" target=\"_blank\" title=\"https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=13768&amp;start=0\">https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=13768&amp;start=0</a></p>",
        "id": 153908470,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1505423164
    },
    {
        "content": "<p>yes it's wrong</p>",
        "id": 153908505,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1505423617
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191451\">@Patrick Werner</span> I guess we could move invariant sdf-20 from StructureDefinition to ElementDefinition. Do you find the current approach unclear?</p>",
        "id": 153908571,
        "sender_full_name": "Michel Rutten",
        "timestamp": 1505430201
    },
    {
        "content": "<p>your proposal in the tracker is <code>element.where(path.contains('.').not()).slicing.empty()</code>which would be an invariant on <code>StructureDefinition.differential</code>this is perfectly fine. I just meant that moving sdf-20 from <code>StructureDefinition.differential</code>to <code>StructureDefinition</code> would be harder to read, as the the invariant is described elswhere than it acts.</p>",
        "id": 153908586,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1505430627
    },
    {
        "content": "<p>but your fluentpath expression solves that elegantly without the need of moving sfd-20</p>",
        "id": 153908588,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1505430653
    },
    {
        "content": "<p>What would be the point in moving it to ElementDefinition? I.e. where else would one need that invariant?</p>",
        "id": 153908589,
        "sender_full_name": "Stefan Lang",
        "timestamp": 1505430719
    },
    {
        "content": "<p>No functional difference. Validator will run all constraints anyway. Just a different way of expressing it. Relatively easy change, but not sure if it's worth the effort.</p>",
        "id": 153908598,
        "sender_full_name": "Michel Rutten",
        "timestamp": 1505431004
    },
    {
        "content": "<p>i don't see any benefit from moving it to ElementDefinition, as a downside sdf-20 would be evaluated on every element instead of only in StructureDefinition.differential</p>",
        "id": 153908613,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1505431322
    },
    {
        "content": "<p>Right.</p>",
        "id": 153908619,
        "sender_full_name": "Michel Rutten",
        "timestamp": 1505431608
    }
]