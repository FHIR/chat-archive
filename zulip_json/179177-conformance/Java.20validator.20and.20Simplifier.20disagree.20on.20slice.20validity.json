[
    {
        "content": "<p>I am getting a validation error with the latest Java JAR Validator when trying to validate a resource against  the following STU3 Observation profile: <a href=\"http://fhir.de/StructureDefinition/observation-de-blutdruck/0.2\" target=\"_blank\" title=\"http://fhir.de/StructureDefinition/observation-de-blutdruck/0.2\">http://fhir.de/StructureDefinition/observation-de-blutdruck/0.2</a>. The online Simplifier validator (<a href=\"https://simplifier.net/validate\" target=\"_blank\" title=\"https://simplifier.net/validate\">https://simplifier.net/validate</a>), however, says that the very same resource is valid. Is there a known problem with such cases in either validator?</p>\n<p>Here is the error I am getting from the JAR (it is a blood pressure profile in which both <code>Observation.component</code> and <code>Observation.component.code.coding</code> are sliced):</p>\n<div class=\"codehilite\"><pre><span></span>java -jar validator/org.hl7.fhir.validator.jar -version 3.0.1 -ig profiles/ examples/\n(...)\n*FAILURE* validating examples/bp-base-example.xml:  error:4 warn:0 info:0\n  Error @ Observation.component[1] (line 20, col16) : Error in discriminator at Observation.component:diastolisch.code.coding: slicing found\n  Error @ Observation.component[1] (line 20, col16) : Error in discriminator at Observation.component:systolisch.code.coding: slicing found\n  Error @ Observation.component[2] (line 34, col16) : Error in discriminator at Observation.component:diastolisch.code.coding: slicing found\n  Error @ Observation.component[2] (line 34, col16) : Error in discriminator at Observation.component:systolisch.code.coding: slicing found\n</pre></div>\n\n\n<p>and here is the example:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"nt\">&lt;Observation</span>\n    <span class=\"na\">xmlns=</span><span class=\"s\">&quot;http://hl7.org/fhir&quot;</span><span class=\"nt\">&gt;</span>\n    <span class=\"nt\">&lt;meta&gt;</span>\n        <span class=\"nt\">&lt;profile</span> <span class=\"na\">value =</span><span class=\"s\">&quot;http://fhir.de/StructureDefinition/observation-de-blutdruck/0.2&quot;</span><span class=\"nt\">/&gt;</span>\n    <span class=\"nt\">&lt;/meta&gt;</span>\n    <span class=\"nt\">&lt;status</span> <span class=\"na\">value=</span><span class=\"s\">&quot;final&quot;</span><span class=\"nt\">/&gt;</span>\n    <span class=\"nt\">&lt;code&gt;</span>\n        <span class=\"nt\">&lt;coding&gt;</span>\n            <span class=\"nt\">&lt;system</span> <span class=\"na\">value=</span><span class=\"s\">&quot;http://loinc.org&quot;</span><span class=\"nt\">/&gt;</span>\n            <span class=\"nt\">&lt;code</span> <span class=\"na\">value=</span><span class=\"s\">&quot;85354-9&quot;</span><span class=\"nt\">/&gt;</span>\n        <span class=\"nt\">&lt;/coding&gt;</span>\n    <span class=\"nt\">&lt;/code&gt;</span>\n    <span class=\"nt\">&lt;subject&gt;</span>\n        <span class=\"nt\">&lt;reference</span> <span class=\"na\">value=</span><span class=\"s\">&quot;Patient/patient-example&quot;</span><span class=\"nt\">/&gt;</span>\n    <span class=\"nt\">&lt;/subject&gt;</span>\n    <span class=\"nt\">&lt;effectiveDateTime</span> <span class=\"na\">value=</span><span class=\"s\">&quot;2016-03-21T18:01:10Z&quot;</span><span class=\"nt\">/&gt;</span>\n    <span class=\"nt\">&lt;performer&gt;</span>\n        <span class=\"nt\">&lt;reference</span> <span class=\"na\">value=</span><span class=\"s\">&quot;Practitioner/practitioner-example&quot;</span><span class=\"nt\">/&gt;</span>\n    <span class=\"nt\">&lt;/performer&gt;</span>\n    <span class=\"nt\">&lt;component&gt;</span>\n        <span class=\"nt\">&lt;code&gt;</span>\n            <span class=\"nt\">&lt;coding&gt;</span>\n                <span class=\"nt\">&lt;system</span> <span class=\"na\">value=</span><span class=\"s\">&quot;http://loinc.org&quot;</span><span class=\"nt\">/&gt;</span>\n                <span class=\"nt\">&lt;code</span> <span class=\"na\">value=</span><span class=\"s\">&quot;8462-4&quot;</span><span class=\"nt\">/&gt;</span>\n            <span class=\"nt\">&lt;/coding&gt;</span>\n        <span class=\"nt\">&lt;/code&gt;</span>\n        <span class=\"nt\">&lt;valueQuantity&gt;</span>\n            <span class=\"nt\">&lt;value</span> <span class=\"na\">value=</span><span class=\"s\">&quot;58&quot;</span><span class=\"nt\">/&gt;</span>\n            <span class=\"nt\">&lt;unit</span> <span class=\"na\">value=</span><span class=\"s\">&quot;mmHg&quot;</span><span class=\"nt\">/&gt;</span>\n            <span class=\"nt\">&lt;system</span> <span class=\"na\">value=</span><span class=\"s\">&quot;http://unitsofmeasure.org&quot;</span><span class=\"nt\">/&gt;</span>\n            <span class=\"nt\">&lt;code</span> <span class=\"na\">value=</span><span class=\"s\">&quot;mm[Hg]&quot;</span><span class=\"nt\">/&gt;</span>\n        <span class=\"nt\">&lt;/valueQuantity&gt;</span>\n    <span class=\"nt\">&lt;/component&gt;</span>\n    <span class=\"nt\">&lt;component&gt;</span>\n        <span class=\"nt\">&lt;code&gt;</span>\n            <span class=\"nt\">&lt;coding&gt;</span>\n                <span class=\"nt\">&lt;system</span> <span class=\"na\">value=</span><span class=\"s\">&quot;http://loinc.org&quot;</span><span class=\"nt\">/&gt;</span>\n                <span class=\"nt\">&lt;code</span> <span class=\"na\">value=</span><span class=\"s\">&quot;8480-6&quot;</span><span class=\"nt\">/&gt;</span>\n            <span class=\"nt\">&lt;/coding&gt;</span>\n        <span class=\"nt\">&lt;/code&gt;</span>\n        <span class=\"nt\">&lt;valueQuantity&gt;</span>\n            <span class=\"nt\">&lt;value</span> <span class=\"na\">value=</span><span class=\"s\">&quot;111&quot;</span><span class=\"nt\">/&gt;</span>\n            <span class=\"nt\">&lt;unit</span> <span class=\"na\">value=</span><span class=\"s\">&quot;mmHg&quot;</span><span class=\"nt\">/&gt;</span>\n            <span class=\"nt\">&lt;system</span> <span class=\"na\">value=</span><span class=\"s\">&quot;http://unitsofmeasure.org&quot;</span><span class=\"nt\">/&gt;</span>\n            <span class=\"nt\">&lt;code</span> <span class=\"na\">value=</span><span class=\"s\">&quot;mm[Hg]&quot;</span><span class=\"nt\">/&gt;</span>\n        <span class=\"nt\">&lt;/valueQuantity&gt;</span>\n    <span class=\"nt\">&lt;/component&gt;</span>\n<span class=\"nt\">&lt;/Observation&gt;</span>\n</pre></div>",
        "id": 154025325,
        "sender_full_name": "Morten Ernebjerg",
        "timestamp": 1544702782
    },
    {
        "content": "<p>Hi Morten, this is coming from the STU3 FHIR spec: <em>sdf-20: On StructureDefinition.differential: No slicing on the root element (expression  on StructureDefinition.differential: element.first().slicing.empty())</em></p>",
        "id": 154025347,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1544709202
    },
    {
        "content": "<p>In R4 this is fixed. Will there be a fix for STU3? <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span><br>\nI had multiple reports from users in Germany struggling while validating STU3 resources because of sdf-20. The .net validator already fixed sdf-20</p>",
        "id": 154025348,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1544709242
    },
    {
        "content": "<p>we will be considering releasing a set of technical corrections for R3 once R4 is published</p>",
        "id": 154025436,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1544732075
    },
    {
        "content": "<p>A correction would be much appreciated, e.g. we would also like to run automatic validation of  <code>StructureDefinitions</code> in our CI-pipeline but cannot due to sdf-20.</p>",
        "id": 154025625,
        "sender_full_name": "Morten Ernebjerg",
        "timestamp": 1544786319
    },
    {
        "content": "<p>Suggested (per mail) the inclusion of the corresponding GForge item (<a href=\"https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=13768&amp;start=0\" target=\"_blank\" title=\"https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=13768&amp;start=0\">#13768</a>) in the list of upcoming technical corrections to STU3, as per <a href=\"#narrow/stream/36-Announcements/subject/R3.20Technical.20Corrections\" title=\"#narrow/stream/36-Announcements/subject/R3.20Technical.20Corrections\">this announcement</a>.</p>",
        "id": 154025904,
        "sender_full_name": "Morten Ernebjerg",
        "timestamp": 1545038392
    },
    {
        "content": "<p>Link to announcement is now <a href=\"#narrow/stream/179240-Announcements/topic/R3.20Technical.20Corrections\" title=\"#narrow/stream/179240-Announcements/topic/R3.20Technical.20Corrections\">https://chat.fhir.org/#narrow/stream/179240-Announcements/topic/R3.20Technical.20Corrections</a></p>",
        "id": 163950871,
        "sender_full_name": "Richard Townley-O'Neill",
        "timestamp": 1555979321
    }
]