[
    {
        "content": "<p>what's the source for the 3rd column (<code>XML Representation</code>) in <a href=\"http://build.fhir.org/datatypes.html#primitive\">datatypes Primitive Types</a> table? (I'm happy to move this topic wherever it should be.)</p>",
        "id": 264466043,
        "sender_full_name": "Eric Prud'hommeaux",
        "timestamp": 1639151498
    },
    {
        "content": "<p>Specifically, does it appear in e.g. the JSON resource defs available on the downloads page?</p>",
        "id": 264466235,
        "sender_full_name": "Eric Prud'hommeaux",
        "timestamp": 1639151574
    },
    {
        "content": "<p>it does, yes.</p>",
        "id": 264499060,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1639165868
    },
    {
        "content": "<p>from the integer definition:</p>",
        "id": 264499114,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1639165905
    },
    {
        "content": "<p>.... no, it doesn't</p>",
        "id": 264499224,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1639165948
    },
    {
        "content": "<p>it did in R3:</p>",
        "id": 264499330,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1639166000
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"JSON\"><pre><span></span><code>  <span class=\"p\">{</span>\n                  <span class=\"nt\">\"url\"</span><span class=\"p\">:</span> <span class=\"s2\">\"http://hl7.org/fhir/StructureDefinition/structuredefinition-xml-type\"</span><span class=\"p\">,</span>\n                  <span class=\"nt\">\"valueString\"</span><span class=\"p\">:</span> <span class=\"s2\">\"xsd:int\"</span>\n                <span class=\"p\">},</span>\n</code></pre></div>",
        "id": 264499368,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1639166020
    },
    {
        "content": "<p>but I've removed that. I don't even remember why I did that</p>",
        "id": 264499389,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1639166031
    },
    {
        "content": "<p>the semantics of <code>structuredefinition-xml-type</code> is that in any XML representation (or, from my perspective, the valueString represents a QName which supercedes the stated type?</p>",
        "id": 264501386,
        "sender_full_name": "Eric Prud'hommeaux",
        "timestamp": 1639167009
    },
    {
        "content": "<p>but yeah, i don't see 'em</p>",
        "id": 264501502,
        "sender_full_name": "Eric Prud'hommeaux",
        "timestamp": 1639167072
    },
    {
        "content": "<p>should i hard-wire?:</p>\n<div class=\"codehilite\" data-code-language=\"JSON\"><pre><span></span><code><span class=\"p\">{</span>\n  <span class=\"nt\">\"boolean\"</span><span class=\"p\">:</span> <span class=\"p\">{</span> <span class=\"nt\">\"XMLRepresentation\"</span><span class=\"p\">:</span> <span class=\"s2\">\"xs:boolean\"</span><span class=\"p\">,</span> <span class=\"nt\">\"caveats\"</span><span class=\"p\">:</span> <span class=\"s2\">\"0 and 1 are not valid values\"</span> <span class=\"p\">},</span>\n  <span class=\"nt\">\"integer\"</span><span class=\"p\">:</span> <span class=\"p\">{</span> <span class=\"nt\">\"XMLRepresentation\"</span><span class=\"p\">:</span> <span class=\"s2\">\"xs:int\"</span><span class=\"p\">,</span> <span class=\"nt\">\"caveats\"</span><span class=\"p\">:</span> <span class=\"s2\">\"leading 0 digits are not allowed\"</span> <span class=\"p\">},</span>\n  <span class=\"nt\">\"integer64\"</span><span class=\"p\">:</span> <span class=\"p\">{</span> <span class=\"nt\">\"XMLRepresentation\"</span><span class=\"p\">:</span> <span class=\"s2\">\"xs:long\"</span><span class=\"p\">,</span> <span class=\"nt\">\"caveats\"</span><span class=\"p\">:</span> <span class=\"s2\">\"leading 0 digits are not allowed\"</span> <span class=\"p\">},</span>\n  <span class=\"nt\">\"string\"</span><span class=\"p\">:</span> <span class=\"p\">{</span> <span class=\"nt\">\"XMLRepresentation\"</span><span class=\"p\">:</span> <span class=\"s2\">\"xs:string\"</span> <span class=\"p\">},</span>\n  <span class=\"nt\">\"decimal\"</span><span class=\"p\">:</span> <span class=\"p\">{</span> <span class=\"nt\">\"XMLRepresentation\"</span><span class=\"p\">:</span> <span class=\"p\">[</span><span class=\"s2\">\"xs:decimal\"</span><span class=\"p\">,</span> <span class=\"s2\">\"xs:double\"</span><span class=\"p\">]</span> <span class=\"p\">},</span>\n  <span class=\"nt\">\"uri\"</span><span class=\"p\">:</span> <span class=\"p\">{</span> <span class=\"nt\">\"XMLRepresentation\"</span><span class=\"p\">:</span> <span class=\"s2\">\"xs:anyURI\"</span> <span class=\"p\">},</span>\n  <span class=\"nt\">\"url\"</span><span class=\"p\">:</span> <span class=\"p\">{</span> <span class=\"nt\">\"XMLRepresentation\"</span><span class=\"p\">:</span> <span class=\"s2\">\"xs:anyURI\"</span> <span class=\"p\">},</span>\n  <span class=\"nt\">\"canonical\"</span><span class=\"p\">:</span> <span class=\"p\">{</span> <span class=\"nt\">\"XMLRepresentation\"</span><span class=\"p\">:</span> <span class=\"s2\">\"xs:anyURI\"</span> <span class=\"p\">},</span>\n  <span class=\"nt\">\"base64Binary\"</span><span class=\"p\">:</span> <span class=\"p\">{</span> <span class=\"nt\">\"XMLRepresentation\"</span><span class=\"p\">:</span> <span class=\"s2\">\"xs:base64Binary\"</span> <span class=\"p\">},</span>\n  <span class=\"nt\">\"instant\"</span><span class=\"p\">:</span> <span class=\"p\">{</span> <span class=\"nt\">\"XMLRepresentation\"</span><span class=\"p\">:</span> <span class=\"s2\">\"xs:dateTime\"</span> <span class=\"p\">},</span>\n  <span class=\"nt\">\"date\"</span><span class=\"p\">:</span> <span class=\"p\">{</span> <span class=\"nt\">\"XMLRepresentation\"</span><span class=\"p\">:</span> <span class=\"p\">[</span><span class=\"s2\">\"xs:date\"</span><span class=\"p\">,</span> <span class=\"s2\">\"xs:gYearMonth\"</span><span class=\"p\">,</span> <span class=\"s2\">\"xs:gYear\"</span><span class=\"p\">]</span> <span class=\"p\">},</span>\n  <span class=\"nt\">\"dateTime\"</span><span class=\"p\">:</span> <span class=\"p\">{</span> <span class=\"nt\">\"XMLRepresentation\"</span><span class=\"p\">:</span> <span class=\"p\">[</span><span class=\"s2\">\"xs:dateTime\"</span><span class=\"p\">,</span> <span class=\"s2\">\"xs:date\"</span><span class=\"p\">,</span> <span class=\"s2\">\"xs:gYearMonth\"</span><span class=\"p\">,</span> <span class=\"s2\">\"xs:gYear\"</span><span class=\"p\">]</span> <span class=\"p\">},</span>\n  <span class=\"nt\">\"time\"</span><span class=\"p\">:</span> <span class=\"p\">{</span> <span class=\"nt\">\"XMLRepresentation\"</span><span class=\"p\">:</span> <span class=\"s2\">\"xs:time\"</span> <span class=\"p\">},</span>\n  <span class=\"nt\">\"code\"</span><span class=\"p\">:</span> <span class=\"p\">{</span> <span class=\"nt\">\"XMLRepresentation\"</span><span class=\"p\">:</span> <span class=\"s2\">\"xs:token\"</span> <span class=\"p\">},</span>\n  <span class=\"nt\">\"oid\"</span><span class=\"p\">:</span> <span class=\"p\">{</span> <span class=\"nt\">\"XMLRepresentation\"</span><span class=\"p\">:</span> <span class=\"s2\">\"xs:anyURI\"</span> <span class=\"p\">},</span>\n  <span class=\"nt\">\"id\"</span><span class=\"p\">:</span> <span class=\"p\">{</span> <span class=\"nt\">\"XMLRepresentation\"</span><span class=\"p\">:</span> <span class=\"s2\">\"xs:string\"</span> <span class=\"p\">},</span>\n  <span class=\"nt\">\"markdown\"</span><span class=\"p\">:</span> <span class=\"p\">{</span> <span class=\"nt\">\"XMLRepresentation\"</span><span class=\"p\">:</span> <span class=\"s2\">\"xs:string\"</span> <span class=\"p\">},</span>\n  <span class=\"nt\">\"unsignedInt\"</span><span class=\"p\">:</span> <span class=\"p\">{</span> <span class=\"nt\">\"XMLRepresentation\"</span><span class=\"p\">:</span> <span class=\"s2\">\"xs:nonNegativeInteger\"</span> <span class=\"p\">},</span>\n  <span class=\"nt\">\"positiveInt\"</span><span class=\"p\">:</span> <span class=\"p\">{</span> <span class=\"nt\">\"XMLRepresentation\"</span><span class=\"p\">:</span> <span class=\"s2\">\"xs:positiveInteger\"</span> <span class=\"p\">},</span>\n  <span class=\"nt\">\"uuid\"</span><span class=\"p\">:</span> <span class=\"p\">{</span> <span class=\"nt\">\"XMLRepresentation\"</span><span class=\"p\">:</span> <span class=\"s2\">\"xs:anyURI\"</span> <span class=\"p\">}</span>\n<span class=\"p\">}</span>\n</code></pre></div>",
        "id": 264501545,
        "sender_full_name": "Eric Prud'hommeaux",
        "timestamp": 1639167099
    },
    {
        "content": "<p>there's <code>structuredefinition-fhir-type</code>, but it doesn't seem to have the same mapping to xsd</p>",
        "id": 264501688,
        "sender_full_name": "Eric Prud'hommeaux",
        "timestamp": 1639167180
    },
    {
        "content": "<p>no. it doesn't. So yes, that table you made, that's the best way</p>",
        "id": 264506321,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1639169530
    },
    {
        "content": "<p>guess i won't delete it then</p>",
        "id": 264506364,
        "sender_full_name": "Eric Prud'hommeaux",
        "timestamp": 1639169556
    },
    {
        "content": "<p>tx!</p>",
        "id": 264506368,
        "sender_full_name": "Eric Prud'hommeaux",
        "timestamp": 1639169559
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191316\">Grahame Grieve</span> <a href=\"#narrow/stream/179177-conformance/topic/FHIR.20Specification/near/264499389\">said</a>:</p>\n<blockquote>\n<p>but I've removed that. I don't even remember why I did that</p>\n</blockquote>\n<p>These were replaced with the internal FHIR Types when they were added.  I <em>think</em> the reasoning was that the core type system should be independent of any serialization / parsing details from a specific format, but I'm a bit hazy on remembering.</p>",
        "id": 264508822,
        "sender_full_name": "Gino Canessa",
        "timestamp": 1639170701
    },
    {
        "content": "<p>there isn't a 1:1 mapping from the internal type to schema, and that's still useful for things like what Eric is doing, so I regret removing it now</p>",
        "id": 264508951,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1639170748
    },
    {
        "content": "<p>I vaguely also recall they broke one of our validation rules, but don't remember what</p>",
        "id": 264543018,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1639200647
    },
    {
        "content": "<p>(apologies for long pastes) if datatypes has:</p>\n<div class=\"codehilite\" data-code-language=\"JSON\"><pre><span></span><code>    <span class=\"p\">{</span>\n      <span class=\"nt\">\"fullUrl\"</span><span class=\"p\">:</span> <span class=\"s2\">\"http://hl7.org/fhir/StructureDefinition/string\"</span><span class=\"p\">,</span>\n      <span class=\"nt\">\"resource\"</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n        <span class=\"nt\">\"resourceType\"</span><span class=\"p\">:</span> <span class=\"s2\">\"StructureDefinition\"</span><span class=\"p\">,</span> <span class=\"nt\">\"id\"</span><span class=\"p\">:</span> <span class=\"s2\">\"string\"</span><span class=\"p\">,</span>\n        <span class=\"nt\">\"kind\"</span><span class=\"p\">:</span> <span class=\"s2\">\"primitive-type\"</span><span class=\"p\">,</span> <span class=\"nt\">\"abstract\"</span><span class=\"p\">:</span> <span class=\"kc\">false</span><span class=\"p\">,</span> <span class=\"nt\">\"type\"</span><span class=\"p\">:</span> <span class=\"s2\">\"string\"</span><span class=\"p\">,</span>\n        <span class=\"nt\">\"baseDefinition\"</span><span class=\"p\">:</span> <span class=\"s2\">\"http://hl7.org/fhir/StructureDefinition/PrimitiveType\"</span><span class=\"p\">,</span>\n        <span class=\"nt\">\"derivation\"</span><span class=\"p\">:</span> <span class=\"s2\">\"specialization\"</span><span class=\"p\">,</span>\n        <span class=\"nt\">\"differential\"</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n          <span class=\"nt\">\"element\"</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n            <span class=\"p\">{</span> <span class=\"nt\">\"id\"</span><span class=\"p\">:</span> <span class=\"s2\">\"string.value\"</span><span class=\"p\">,</span> <span class=\"nt\">\"min\"</span><span class=\"p\">:</span> <span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"nt\">\"max\"</span><span class=\"p\">:</span> <span class=\"s2\">\"1\"</span><span class=\"p\">,</span> <span class=\"nt\">\"type\"</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n                <span class=\"p\">{</span> <span class=\"nt\">\"extension\"</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n                    <span class=\"p\">{</span> <span class=\"nt\">\"url\"</span><span class=\"p\">:</span> <span class=\"s2\">\"http://hl7.org/fhir/StructureDefinition/structuredefinition-fhir-type\"</span><span class=\"p\">,</span> <span class=\"nt\">\"valueUri\"</span><span class=\"p\">:</span> <span class=\"s2\">\"string\"</span> <span class=\"p\">},</span>\n                    <span class=\"p\">{</span> <span class=\"nt\">\"url\"</span><span class=\"p\">:</span> <span class=\"s2\">\"http://hl7.org/fhir/StructureDefinition/regex\"</span><span class=\"p\">,</span> <span class=\"nt\">\"valueString\"</span><span class=\"p\">:</span> <span class=\"s2\">\"[ \\\\r\\\\n\\\\t\\\\S]+\"</span> <span class=\"p\">}</span> <span class=\"p\">],</span>\n                  <span class=\"nt\">\"code\"</span><span class=\"p\">:</span> <span class=\"s2\">\"http://hl7.org/fhirpath/System.String\"</span>\n    <span class=\"p\">}</span> <span class=\"p\">]</span> <span class=\"p\">}</span> <span class=\"p\">]</span> <span class=\"p\">}</span> <span class=\"p\">}</span> <span class=\"p\">},</span>\n    <span class=\"p\">{</span>\n      <span class=\"nt\">\"fullUrl\"</span><span class=\"p\">:</span> <span class=\"s2\">\"http://hl7.org/fhir/StructureDefinition/code\"</span><span class=\"p\">,</span>\n      <span class=\"nt\">\"resource\"</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n        <span class=\"nt\">\"resourceType\"</span><span class=\"p\">:</span> <span class=\"s2\">\"StructureDefinition\"</span><span class=\"p\">,</span> <span class=\"nt\">\"id\"</span><span class=\"p\">:</span> <span class=\"s2\">\"code\"</span><span class=\"p\">,</span>\n        <span class=\"nt\">\"kind\"</span><span class=\"p\">:</span> <span class=\"s2\">\"primitive-type\"</span><span class=\"p\">,</span> <span class=\"nt\">\"abstract\"</span><span class=\"p\">:</span> <span class=\"kc\">false</span><span class=\"p\">,</span> <span class=\"nt\">\"type\"</span><span class=\"p\">:</span> <span class=\"s2\">\"code\"</span><span class=\"p\">,</span>\n        <span class=\"nt\">\"baseDefinition\"</span><span class=\"p\">:</span> <span class=\"s2\">\"http://hl7.org/fhir/StructureDefinition/string\"</span><span class=\"p\">,</span>\n        <span class=\"nt\">\"derivation\"</span><span class=\"p\">:</span> <span class=\"s2\">\"specialization\"</span><span class=\"p\">,</span>\n        <span class=\"nt\">\"differential\"</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n          <span class=\"nt\">\"element\"</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n            <span class=\"p\">{</span> <span class=\"nt\">\"id\"</span><span class=\"p\">:</span> <span class=\"s2\">\"code.value\"</span><span class=\"p\">,</span> <span class=\"nt\">\"min\"</span><span class=\"p\">:</span> <span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"nt\">\"max\"</span><span class=\"p\">:</span> <span class=\"s2\">\"1\"</span><span class=\"p\">,</span> <span class=\"nt\">\"type\"</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n                <span class=\"p\">{</span> <span class=\"nt\">\"extension\"</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n                    <span class=\"p\">{</span> <span class=\"nt\">\"url\"</span><span class=\"p\">:</span> <span class=\"s2\">\"http://hl7.org/fhir/StructureDefinition/structuredefinition-fhir-type\"</span><span class=\"p\">,</span> <span class=\"nt\">\"valueUri\"</span><span class=\"p\">:</span> <span class=\"s2\">\"code\"</span> <span class=\"p\">},</span>\n                    <span class=\"p\">{</span> <span class=\"nt\">\"url\"</span><span class=\"p\">:</span> <span class=\"s2\">\"http://hl7.org/fhir/StructureDefinition/regex\"</span><span class=\"p\">,</span> <span class=\"nt\">\"valueString\"</span><span class=\"p\">:</span> <span class=\"s2\">\"[^\\\\s]+( [^\\\\s]+)*\"</span> <span class=\"p\">}</span> <span class=\"p\">],</span>\n                  <span class=\"nt\">\"code\"</span><span class=\"p\">:</span> <span class=\"s2\">\"http://hl7.org/fhirpath/System.String\"</span>\n    <span class=\"p\">}</span> <span class=\"p\">]</span> <span class=\"p\">}</span> <span class=\"p\">]</span> <span class=\"p\">}</span> <span class=\"p\">}</span> <span class=\"p\">},</span>\n</code></pre></div>\n<p>, how do I know that <code>code.value</code> restricts <code>string.value</code>?</p>",
        "id": 265133382,
        "sender_full_name": "Eric Prud'hommeaux",
        "timestamp": 1639649134
    },
    {
        "content": "<p><a href=\"https://build.fhir.org/structuredefinition-definitions#StructureDefinition.derivation\">https://build.fhir.org/structuredefinition-definitions#StructureDefinition.derivation</a></p>\n<blockquote>\n<p>If the definition is a specialization, then it adds new elements in the differential, and the snapshot includes the inherited elements. If the definition is a constraint, then it cannot define new elements, it can only make new rules about existing content</p>\n</blockquote>\n<p>I guess \"specialization\" can both add new elements <em>and</em> constrain already-defined ones? (otherwise, what would you do with collisions?)</p>",
        "id": 265134811,
        "sender_full_name": "Eric Prud'hommeaux",
        "timestamp": 1639649910
    },
    {
        "content": "<p>yes it can</p>",
        "id": 265189293,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1639675671
    }
]