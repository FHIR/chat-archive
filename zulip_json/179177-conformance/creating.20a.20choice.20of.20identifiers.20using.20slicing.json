[
    {
        "content": "<p>The DEQM requirement is for organization is to provide <em>at least</em> a provider NPI or an EID for an organization.   There were some other requirements such a aligning identifier type with NPI or EID.  so <a href=\"http://hl7.org/fhir/us/davinci-deqm/2018Sep/STU3/StructureDefinition-organization-deqm.html#formal-views-of-profile-content\" target=\"_blank\" title=\"http://hl7.org/fhir/us/davinci-deqm/2018Sep/STU3/StructureDefinition-organization-deqm.html#formal-views-of-profile-content\">THIS</a> is what I came up with  to try to essentially create a choice of identifier systems but allow for other  identifiers too....  <span class=\"user-mention\" data-user-id=\"191370\">@Richard Ettema</span>  created a tracker finding issue with it and preapplied <a href=\"http://build.fhir.org/ig/HL7/davinci-deqm/StructureDefinition-organization-deqm.html#formal-views-of-profile-content\" target=\"_blank\" title=\"http://build.fhir.org/ig/HL7/davinci-deqm/StructureDefinition-organization-deqm.html#formal-views-of-profile-content\">THIS</a>  which is prettier but does not constrain to require either an NPI or EID - you could add another identifier.  What is the best way to do this?  I'm thinking Richards slicing <em>plus</em> an invariant requiring one or the other identifier system? <span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span>  <span class=\"user-mention\" data-user-id=\"191336\">@Michel Rutten</span> ?</p>",
        "id": 154016559,
        "sender_full_name": "Eric Haas",
        "timestamp": 1541649323
    },
    {
        "content": "<p>Given both identifiers have knows systems, create an invariant at the top level that checks for one of them.</p>",
        "id": 154016591,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1541666305
    },
    {
        "content": "<p>Agree.  <span class=\"user-mention\" data-user-id=\"191370\">@Richard Ettema</span>'s approach plus an invariant based on identifier.system should give you what you're looking for - and be relatively \"pretty\" - i.e. readable &amp; understandable by most folks.</p>",
        "id": 154016629,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1541680515
    },
    {
        "content": "<p>thanks!</p>",
        "id": 154016749,
        "sender_full_name": "Eric Haas",
        "timestamp": 1541695844
    },
    {
        "content": "<p>In HL7 AU we slice the same way but constrain the value of type differently. See <a href=\"http://build.fhir.org/ig/hl7au/au-fhir-base/StructureDefinition-au-organisation.html\" target=\"_blank\" title=\"http://build.fhir.org/ig/hl7au/au-fhir-base/StructureDefinition-au-organisation.html\">http://build.fhir.org/ig/hl7au/au-fhir-base/StructureDefinition-au-organisation.html</a> .</p>\n<p>I think that the constraint dv-1 in  <a href=\"http://build.fhir.org/ig/HL7/davinci-deqm/StructureDefinition-organization-deqm.html#formal-views-of-profile-content\" target=\"_blank\" title=\"http://build.fhir.org/ig/HL7/davinci-deqm/StructureDefinition-organization-deqm.html#formal-views-of-profile-content\">Richard Ettema's design</a>  should have 'and' instead of 'or', as if both identifiers are supplied you will want both to have the correct type, not just one of them:<br>\n\" If present, <code>Identifier.type</code> SHALL be '<a href=\"http://hl7.org/fhir/v2/0203|PRN\" target=\"_blank\" title=\"http://hl7.org/fhir/v2/0203|PRN\">http://hl7.org/fhir/v2/0203|PRN</a>' when <code>Identifier.system</code> = '<a href=\"http://hl7.org/fhir/sid/us-npi\" target=\"_blank\" title=\"http://hl7.org/fhir/sid/us-npi\">http://hl7.org/fhir/sid/us-npi</a>', <br>\n<strong>and</strong> <br>\n<code>Identifier.type</code> SHALL be '<a href=\"http://hl7.org/fhir/v2/0203|TAX\" target=\"_blank\" title=\"http://hl7.org/fhir/v2/0203|TAX\">http://hl7.org/fhir/v2/0203|TAX</a>' when <code>Identifier.system</code> = 'urn:oid:2.16.840.1.113883.4.4'.\"</p>",
        "id": 154016938,
        "sender_full_name": "Richard Townley-O'Neill",
        "timestamp": 1541718456
    },
    {
        "content": "<p>My explanation was wrong, the problem with 'or' is worse</p>\n<blockquote>\n<p>as if both identifiers are supplied you will want both to have the correct type, not just one of them</p>\n</blockquote>\n<p>with an 'or', if you have an identifier with a system that is neither '<a href=\"http://hl7.org/fhir/sid/us-npi\" target=\"_blank\" title=\"http://hl7.org/fhir/sid/us-npi\">http://hl7.org/fhir/sid/us-npi</a>' nor 'urn:oid:2.16.840.1.113883.4.4', the invariant will be satisfied.</p>",
        "id": 154016989,
        "sender_full_name": "Richard Townley-O'Neill",
        "timestamp": 1541724415
    }
]