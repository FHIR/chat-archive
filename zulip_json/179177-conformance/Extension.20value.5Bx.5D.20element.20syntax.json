[
    {
        "content": "<p>Can someone confirm the syntax for defining an extension's value[x] element?<br>\nCurrently, I am using:<br>\n&lt;element id=\"Extension.value[x]\"&gt;<br>\n&lt;path value=\"Extension.value[x]\" /&gt;<br>\n&lt;type code=\"CodeableConcept\" /&gt;<br>\n&lt;type code=\"Coding\" /&gt;<br>\n&lt;/element&gt;</p>\n<p>However, reading the spec, I'm not sure that's correct. It mentions that the id and path should be different depending on the type. It also mentions that I should enumerate each of the types that are allowed in different elements with unique id's and path's. I've ALSO seen examples where the value uses slicing to indicate what the correct type is (with a sliceName).</p>\n<p>So, now I'm not sure what the correct syntax is for an extension's value. Can someone show the correct syntax for an extension with a value limited to a single type, as well as an extension with a value allowing multiple types (but not all types)?</p>",
        "id": 154684973,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1546988701
    },
    {
        "content": "<p>Looking at how Forge handles this... I see two different behaviors depending on whether a single type is allowed, or multiple types are allowed.</p>\n<p>WIth a single type, this is produced:<br>\n&lt;element id=\"Extension.value[x]:valueCodeableConcept\"&gt;<br>\n    &lt;path value=\"Extension.valueCodeableConcept\"/&gt;<br>\n    &lt;sliceName value=\"valueCodeableConcept\"/&gt;<br>\n    &lt;type&gt;<br>\n        &lt;code value=\"CodeableConcept\"/&gt;<br>\n    &lt;/type&gt;<br>\n&lt;/element&gt;</p>\n<p>With multiple types being allowed, this is produced:<br>\n&lt;element id=\"Extension.value[x]\"&gt;<br>\n    &lt;path value=\"Extension.value[x]\"/&gt;<br>\n    &lt;type&gt;<br>\n        &lt;code value=\"code\"/&gt;<br>\n    &lt;/type&gt;<br>\n    &lt;type&gt;<br>\n        &lt;code value=\"CodeableConcept\"/&gt;<br>\n    &lt;/type&gt;<br>\n    &lt;type&gt;<br>\n        &lt;code value=\"Coding\"/&gt;<br>\n    &lt;/type&gt;<br>\n&lt;/element&gt;</p>",
        "id": 154766808,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1547076946
    },
    {
        "content": "<p>I'm interested in the details of this, too - for the IPS IG.</p>",
        "id": 154952434,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1547245667
    },
    {
        "content": "<p>Maybe during the connectathon we can get a couple people together to answer this</p>",
        "id": 154987410,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1547306144
    },
    {
        "content": "<p>this looks like an evening subject this week to me</p>",
        "id": 154989910,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1547310541
    },
    {
        "content": "<p>Sure</p>",
        "id": 154996994,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1547322197
    },
    {
        "content": "<p>When and where?</p>",
        "id": 154997242,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1547322633
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span></p>",
        "id": 154998201,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1547324429
    },
    {
        "content": "<p>not decided yet. i'll advise</p>",
        "id": 154998924,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1547325680
    },
    {
        "content": "<p>Note that R4 introduces new behavior for choice type constraints. The Forge example above describes the behavior as defined by STU3.<br>\nIn STU3, choice types are renamed if (and only if) constrained to a single type. To constrain a choice type that allows multiple type options, STU3 requires an explicit slice (on type) and disallows element renaming. Forge enforces this behavior.<br>\nIn R4, a profile is allowed to introduce multiple type-specific constraints on a choice type element, using renamed elements. Such constraints apply to the specified type only, and a profile can specify multiple of those for different type options. For example, an R4 profile can introduce both <code>valueString</code> and <code>valueBoolean</code> constraints on a <code>value[x]</code> element (w/o requiring explicit slice introduction).<br>\nAt least, that's my current understanding - please correct me if I'm wrong.</p>",
        "id": 155080983,
        "sender_full_name": "Michel Rutten",
        "timestamp": 1547469357
    },
    {
        "content": "<p>Per discussion Tuesday night at the WGM, the rules are defined here:<br>\n<a href=\"http://hl7.org/fhir/elementdefinition.html#typesx\" target=\"_blank\" title=\"http://hl7.org/fhir/elementdefinition.html#typesx\">http://hl7.org/fhir/elementdefinition.html#typesx</a></p>",
        "id": 155224757,
        "sender_full_name": "Rick Geimer",
        "timestamp": 1547609260
    },
    {
        "content": "<p>But we will file a tracker to add examples with explanatory text for this.</p>",
        "id": 155224812,
        "sender_full_name": "Rick Geimer",
        "timestamp": 1547609291
    }
]