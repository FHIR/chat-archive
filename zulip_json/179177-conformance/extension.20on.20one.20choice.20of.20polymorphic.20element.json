[
    {
        "content": "<p>Hi all - query on extending one of the datatype choices in an element for example; Patient.deceased[x] - would like to extend Patient.deceasedDateTime whilst still allowing Patient.deaceasedBoolean (with no extension).  I could not work out how to explicitly do this... do I need to extend deceased[x] then add constraint or is there a direct way to do this with a profile?</p>",
        "id": 153915837,
        "sender_full_name": "Brett Esler",
        "timestamp": 1508900833
    },
    {
        "content": "<p>In R4 draft and forward, if your profile references Patient.deceasedDateTime, whatever you say will be presumed to be about that particular type slice and will in no way prevent Patient.deceasedBoolean from being present.  (That wasn't the inference of all systems in R3 and prior.)</p>",
        "id": 153915839,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1508901324
    },
    {
        "content": "<p>Thanks <span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> can I extend deceased[x] in general for now in R3?</p>",
        "id": 153915842,
        "sender_full_name": "Brett Esler",
        "timestamp": 1508902972
    },
    {
        "content": "<p>well, pretty much, the same way, since it's the R4 logic that applies in the validator :-(</p>",
        "id": 153915843,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1508903419
    },
    {
        "content": "<p>I can't seem to slice on deceased[x] and build in IG publisher</p>\n<p>java.lang.Exception: Exception loading <a href=\"http://hl7.org.au/fhir/StructureDefinitio\" target=\"_blank\" title=\"http://hl7.org.au/fhir/StructureDefinitio\">http://hl7.org.au/fhir/StructureDefinitio</a><br>\n n/au-patient: Attempt to a slice an element that does not repeat: Patient.deceas<br>\n ed[x]/null from <a href=\"http://hl7.org/fhir/StructureDefinition/date\" target=\"_blank\" title=\"http://hl7.org/fhir/StructureDefinition/date\">http://hl7.org/fhir/StructureDefinition/date</a> in <a href=\"http://hl7.org.a\" target=\"_blank\" title=\"http://hl7.org.a\">http://hl7.org.a</a><br>\n u/fhir/StructureDefinition/au-patient<br>\n        at org.hl7.fhir.igtools.publisher.Publisher.load(Publisher.java:1950)<br>\n        at org.hl7.fhir.igtools.publisher.Publisher.loadConformance(Publisher.ja<br>\n va:1640)<br>\n         at org.hl7.fhir.igtools.publisher.Publisher.createIg(Publisher.java:366) </p>\n<div class=\"codehilite\"><pre><span></span>     at org.hl7.fhir.igtools.publisher.Publisher.execute(Publisher.java:336)\n     at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:3907)\n</pre></div>\n\n\n<p>Caused by: org.hl7.fhir.exceptions.DefinitionException: Attempt to a slice an el<br>\n ement that does not repeat: Patient.deceased[x]/null from <a href=\"http://hl7.org/fhir/St\" target=\"_blank\" title=\"http://hl7.org/fhir/St\">http://hl7.org/fhir/St</a><br>\n ructureDefinition/date in <a href=\"http://hl7.org.au/fhir/StructureDefinition/au-patient\" target=\"_blank\" title=\"http://hl7.org.au/fhir/StructureDefinition/au-patient\">http://hl7.org.au/fhir/StructureDefinition/au-patient</a><br>\n         at org.hl7.fhir.r4.conformance.ProfileUtilities.processPaths(ProfileUtil<br>\n ities.java:609)<br>\n         at org.hl7.fhir.r4.conformance.ProfileUtilities.generateSnapshot(Profile<br>\n Utilities.java:363)<br>\n         at org.hl7.fhir.r4.context.SimpleWorkerContext.seeMetadataResource(Simpl<br>\n eWorkerContext.java:568)<br>\n         at org.hl7.fhir.r4.context.BaseWorkerContext.cacheResource(BaseWorkerCon<br>\n text.java:158)<br>\n         at org.hl7.fhir.igtools.publisher.Publisher.load(Publisher.java:1948)<br>\n         ... 4 more<br>\n Exception in thread \"main\" java.lang.NullPointerException<br>\n         at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:3917)<br>\n Press any key to continue . . .</p>",
        "id": 153915844,
        "sender_full_name": "Brett Esler",
        "timestamp": 1508903480
    },
    {
        "content": "<p>I'm going to run on the validation stuff early next week</p>",
        "id": 153915845,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1508903621
    },
    {
        "content": "<p>(R unconference tmorrow/friday)</p>",
        "id": 153915846,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1508903626
    },
    {
        "content": "<p>I've hit that before.  If you declare the cardinality, the problem goes away.</p>",
        "id": 153915848,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1508904179
    },
    {
        "content": "<p>Thanks <span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span>  think that has got me past that one for the IG build... much appreciated</p>",
        "id": 153915854,
        "sender_full_name": "Brett Esler",
        "timestamp": 1508905373
    },
    {
        "content": "<p>Hi <span class=\"user-mention\" data-user-id=\"191368\">@Brett Esler</span>, in Forge you can specify this by explicitly slicing the Patient.deceased[x] element. If you slice a choice type element, Forge automatically initializes the slicinng discriminator for a type slice. Now you can add specific slices for individual type choices and define type-specific constraints.</p>",
        "id": 153915935,
        "sender_full_name": "Michel Rutten",
        "timestamp": 1508925054
    }
]