[
    {
        "content": "<p>I have some questions about using the <a href=\"http://wiki.hl7.org/index.php?title=Using_the_FHIR_Validator\" target=\"_blank\" title=\"http://wiki.hl7.org/index.php?title=Using_the_FHIR_Validator\">FHIR Validator</a> to validate examples based on profiles that have been authored with spreadsheets (xml). Is this the right stream for that?</p>",
        "id": 154013819,
        "sender_full_name": " Bob Milius",
        "timestamp": 1540929212
    },
    {
        "content": "<p>sure</p>",
        "id": 154013821,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1540929548
    },
    {
        "content": "<p>I'm working on examples for our Genomics Reporting IG, and using the FHIR Validator to validate them. I initially found an issue where a Pattern (in json) was being ignored and the observation.code binding wasn't being enforced. I created a gf ticket on this (<a href=\"https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=19565\" target=\"_blank\" title=\"https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=19565\">#19565</a>). So I tried editing the spreadsheet to do the slicing as I've seen other profiles do it (eg heartrate), and have this: <a href=\"/user_uploads/10155/_eMlyy3bqgEEpg-BBsjWNYAR/obs-genotype.png\" target=\"_blank\" title=\"obs-genotype.png\">obs-genotype.png</a>. </p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/_eMlyy3bqgEEpg-BBsjWNYAR/obs-genotype.png\" target=\"_blank\" title=\"obs-genotype.png\"><img src=\"/user_uploads/10155/_eMlyy3bqgEEpg-BBsjWNYAR/obs-genotype.png\"></a></div><p>Now the validator seems to work, ie gives me an error when I don't have the correct observation.code.coding. But it doesn't allow for other codings. e.g., if I use this coding</p>\n<div class=\"codehilite\"><pre><span></span>   <span class=\"nt\">&lt;code&gt;</span>\n        <span class=\"nt\">&lt;coding&gt;</span>\n            <span class=\"nt\">&lt;system</span> <span class=\"na\">value=</span><span class=\"s\">&quot;http://loinc.org&quot;</span><span class=\"nt\">/&gt;</span>\n            <span class=\"nt\">&lt;code</span> <span class=\"na\">value=</span><span class=\"s\">&quot;84413-4&quot;</span><span class=\"nt\">/&gt;</span>\n            <span class=\"nt\">&lt;display</span> <span class=\"na\">value=</span><span class=\"s\">&quot;Genotype display name&quot;</span><span class=\"nt\">/&gt;</span>\n        <span class=\"nt\">&lt;/coding&gt;</span>\n        <span class=\"nt\">&lt;coding&gt;</span>\n            <span class=\"nt\">&lt;system</span> <span class=\"na\">value=</span><span class=\"s\">&quot;http://loinc.org&quot;</span><span class=\"nt\">/&gt;</span>\n            <span class=\"nt\">&lt;code</span> <span class=\"na\">value=</span><span class=\"s\">&quot;57290-9&quot;</span><span class=\"nt\">/&gt;</span>\n            <span class=\"nt\">&lt;display</span> <span class=\"na\">value=</span><span class=\"s\">&quot;HLA-A [Type] by High resolution&quot;</span><span class=\"nt\">/&gt;</span>\n        <span class=\"nt\">&lt;/coding&gt;</span>\n    <span class=\"nt\">&lt;/code&gt;</span>\n</pre></div>\n\n\n<p>I get this error that tells me the second coding doesn't match any known slice. If I comment out the second coding, it passes validation.</p>\n<div class=\"codehilite\"><pre><span></span>$ java -jar org.hl7.fhir.validator.jar observation_genotype_test.xml -ig hl7.fhir.uv.genomics-reporting#dev -profile http://hl7.org/fhir/uv/genomics-reporting/StructureDefinition/obs-genotype\nFHIR Validator Build ??\nArguments: observation_genotype_test.xml -ig hl7.fhir.uv.genomics-reporting#dev -profile http://hl7.org/fhir/uv/genomics-reporting/StructureDefinition/obs-genotype\n  .. connect to tx server @ http://tx.fhir.org\n  .. definitions from hl7.fhir.core#3.6.0\n    <span class=\"o\">(</span>v3.6.0-null<span class=\"o\">)</span>\n+  .. load IG from hl7.fhir.uv.genomics-reporting#dev\n  .. validate <span class=\"o\">[</span>observation_genotype_test.xml<span class=\"o\">]</span> against <span class=\"o\">[</span>http://hl7.org/fhir/uv/genomics-reporting/StructureDefinition/obs-genotype<span class=\"o\">]</span>\nTerminology server: Check <span class=\"k\">for</span> supported code systems <span class=\"k\">for</span> http://loinc.org\nSuccess...validating observation_genotype_test.xml:  error:0 warn:0 info:1\n  Information @ Observation.code.coding<span class=\"o\">[</span><span class=\"m\">2</span><span class=\"o\">]</span> <span class=\"o\">(</span>line <span class=\"m\">24</span>, col17<span class=\"o\">)</span> : This element does not match any known slice <span class=\"k\">for</span> the profile http://hl7.org/fhir/uv/genomics-reporting/StructureDefinition/obs-genotype\n</pre></div>\n\n\n<p>I want the validator to make sure the first coding is present, but allow for other codings as well.<br>\nI hope that makes sense.</p>",
        "id": 154013830,
        "sender_full_name": " Bob Milius",
        "timestamp": 1540931506
    }
]