[
    {
        "content": "<p>How would I specify a particular set of units on a Quantity in a Logical Model? I came across this extension <a href=\"http://hl7.org/fhir/extension-elementdefinition-allowedunits.html\" target=\"_blank\" title=\"http://hl7.org/fhir/extension-elementdefinition-allowedunits.html\">http://hl7.org/fhir/extension-elementdefinition-allowedunits.html</a> but it contains limited help on where to apply, and either way it looks as if Forge would not be of help in configuring it.</p>",
        "id": 153888622,
        "sender_full_name": "Alexander Henket",
        "timestamp": 1494322278
    },
    {
        "content": "<p>it applies to any element - that's what you'd use</p>",
        "id": 153888627,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1494324442
    },
    {
        "content": "<p>Have to talk to Forge about supporting it </p>",
        "id": 153888628,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1494324450
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191336\">@Michel Rutten</span> Could you consider supporting this extension on Quantity type elements? The first issue that Forge doesnâ€™t allow extensions on Logical Models at all</p>",
        "id": 153888631,
        "sender_full_name": "Alexander Henket",
        "timestamp": 1494324898
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> I have a feeling that either Forge or Logical Models in general lack here. <br>\n- In a profile I would just apply a value set on Quantity.code and fix Quantity.system to UCUM. In case of multi datatype elements like Observation.value[x] I would first type slice to reach Quantity -- no need to use the extension, I think</p>\n<p>The added benefit of not using the extension is that more tooling would consider a value set binding than an extension.</p>\n<ul>\n<li>In a Logical Model I cannot slice or extend and I'm unsure how much of that is a limitation of Forge or FHIR core.</li>\n</ul>",
        "id": 153888634,
        "sender_full_name": "Alexander Henket",
        "timestamp": 1494325393
    },
    {
        "content": "<p>Adding <span class=\"user-mention\" data-user-id=\"192440\">@Marc de Graauw</span> </p>",
        "id": 153888636,
        "sender_full_name": "Alexander Henket",
        "timestamp": 1494325441
    },
    {
        "content": "<p>the limitations are a bit of both. But I think that the right thing to do is to create a task about 'what is the right way to constrain units' because i think the way you do it in profiles has problems, and we need a better way</p>",
        "id": 153888648,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1494332025
    },
    {
        "content": "<p>(deleted)</p>",
        "id": 153888652,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1494332986
    },
    {
        "content": "<p><a href=\"http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=13353\" target=\"_blank\" title=\"http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=13353\">GF#13353</a> added</p>",
        "id": 153888659,
        "sender_full_name": "Alexander Henket",
        "timestamp": 1494333146
    },
    {
        "content": "<p>thx</p>",
        "id": 153888725,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1494344363
    },
    {
        "content": "<p>FYI Forge does not (yet) support slicing &amp; extensions in Logical Models simply because we didn't implement it yet. It is not a technical limitation. But users haven't asked for this until now; you're the first. Some guidelines by FHIR spec about this would be helpful.</p>",
        "id": 153888805,
        "sender_full_name": "Michel Rutten",
        "timestamp": 1494356763
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191375\">@Alexander Henket</span> Out of interest, what is the use case for an extension on a LoMo?</p>",
        "id": 153889639,
        "sender_full_name": "Richard Kavanagh",
        "timestamp": 1494577279
    },
    {
        "content": "<p>Normally probably seldomly so, but currently, by the looks of it if you want to say \"Weight in kg or g\" you cannot specify this unless you use a core extension that exists for that.</p>",
        "id": 153889666,
        "sender_full_name": "Alexander Henket",
        "timestamp": 1494584001
    },
    {
        "content": "<p>Are you asking about extensions in the logical model instances, or in the definition of the logical model? Usually not much in the first case, bu quite a bit in the second</p>",
        "id": 153889689,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1494586932
    },
    {
        "content": "<p>I am unclear what you all mean - is there an example of the second use case I can look at?</p>",
        "id": 153889810,
        "sender_full_name": "Eric Haas",
        "timestamp": 1494625536
    },
    {
        "content": "<p>Well, the cda logical model has extensions for namespace etc</p>",
        "id": 153889811,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1494629810
    },
    {
        "content": "<p>I finally got to implementing the extension. In DECOR we have separate units as a list on a concept. The logical mapping would be to add as many allowedUnits extensions as there are units listed in DECOR. But the extension seems to tell me, I can only add it once per context. Is this legal or not?</p>\n<div class=\"codehilite\"><pre><span></span>    &lt;element&gt;\n        &lt;!-- unit is kg or g --&gt;\n        &lt;extension url=&quot;http://hl7.org/fhir/StructureDefinition/elementdefinition-allowedUnits&quot;&gt;\n            &lt;valueCodeableConcept&gt;\n                &lt;coding&gt;\n                    &lt;system value=&quot;http://unitsofmeasure.org/&quot;/&gt;\n                    &lt;code value=&quot;kg&quot;/&gt;\n                &lt;/coding&gt;\n            &lt;/valueCodeableConcept&gt;\n        &lt;/extension&gt;\n        &lt;extension url=&quot;http://hl7.org/fhir/StructureDefinition/elementdefinition-allowedUnits&quot;&gt;\n            &lt;valueCodeableConcept&gt;\n                &lt;coding&gt;\n                    &lt;system value=&quot;http://unitsofmeasure.org/&quot;/&gt;\n                    &lt;code value=&quot;g&quot;/&gt;\n                &lt;/coding&gt;\n            &lt;/valueCodeableConcept&gt;\n        &lt;/extension&gt;\n        &lt;path value=&quot;measurement_message.weight&quot;/&gt;\n</pre></div>\n\n\n<p>Secondly at dataset level we allow MD's to enter the units free text. The MD's do not necessarily use UCUM to express what they meant. We solve that mapping in the implementation and leave the free text unit as is. When the unit happens to be a valid UCUM unit I produce what's above, but if not I produce:</p>\n<div class=\"codehilite\"><pre><span></span>        &lt;extension url=&quot;http://hl7.org/fhir/StructureDefinition/elementdefinition-allowedUnits&quot;&gt;\n            &lt;valueCodeableConcept&gt;\n                &lt;text value=&quot;kilogram&quot;/&gt;\n            &lt;/valueCodeableConcept&gt;\n        &lt;/extension&gt;\n</pre></div>\n\n\n<p>I'm sure it's undesirable, but is it invalid?</p>",
        "id": 153892417,
        "sender_full_name": "Alexander Henket",
        "timestamp": 1496737310
    },
    {
        "content": "<p>As defined, you can only have one repetition of that type of extension.  And because there's a required binding to UCUM, you couldn't use plain text by itself either</p>",
        "id": 153892418,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1496737717
    },
    {
        "content": "<p>shouldn't you do the first as a mapping to a value set? </p>",
        "id": 153892574,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1496797643
    },
    {
        "content": "<p>and are you constraining the unit, or the system/code in the second case?</p>",
        "id": 153892575,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1496797662
    }
]