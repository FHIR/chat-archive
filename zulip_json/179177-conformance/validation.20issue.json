[
    {
        "content": "<p>In trying to resolve the remaining errors in the IPS IG, I've run into this validation issue (attempting to isolate the problem by validating directly against an example instance using the specific profile (<a href=\"http://hl7.org/fhir/uv/ips/StructureDefinition/Condition-uv-ips\" target=\"_blank\" title=\"http://hl7.org/fhir/uv/ips/StructureDefinition/Condition-uv-ips\">http://hl7.org/fhir/uv/ips/StructureDefinition/Condition-uv-ips</a>):</p>\n<div class=\"codehilite\"><pre><span></span>RHausamMacbookPro:fhir-ips rhausam$ java -jar ~/Downloads/org.hl7.fhir.validator.jar -version 4.0.1 ~/Documents/Condition-example-ips.xml -ig hl7.fhir.uv.ips -profile http://hl7.org/fhir/uv/ips/StructureDefinition/Condition-uv-ips\nFHIR Validation tool Version 4.1.41-SNAPSHOT (Git# bdab9a78b39a). Built 2019-12-31T14:32:35.701+11:00 (9 days old)\nDetected Java version: 13.0.1 from /Library/Java/JavaVirtualMachines/jdk-13.0.1.jdk/Contents/Home on x86_64 (64bit). 4096MB available\nArguments: -version 4.0.1 /Users/rhausam/Documents/Condition-example-ips.xml -ig hl7.fhir.uv.ips -profile http://hl7.org/fhir/uv/ips/StructureDefinition/Condition-uv-ips\nDirectories: Current = /Users/rhausam/git-repo/fhir-ips, Package Cache = /Users/rhausam/.fhir/packages\n  .. FHIR Version 4.0, definitions from hl7.fhir.r4.core#4.0.1\n  .. connect to tx server @ http://tx.fhir.org\n    (v4.0.1)\n+  .. load IG from hl7.fhir.uv.ips\n   ... Using version dev\n  .. validate [/Users/rhausam/Documents/Condition-example-ips.xml] against [http://hl7.org/fhir/uv/ips/StructureDefinition/Condition-uv-ips]\nTerminology server: Check for supported code systems for http://loinc.org\n*FAILURE* validating /Users/rhausam/Documents/Condition-example-ips.xml:  error:1 warn:0 info:2\n  Error @ Condition.code.coding[0] (line 35, col17) : Unable to provide support for code system http://snomed.info/sct version 900000000000207008 for &#39;http://snomed.info/sct#198436008&#39;\n  Information @ Condition.code (line 34, col11) : This element does not match any known slice for the profile http://hl7.org/fhir/uv/ips/StructureDefinition/Condition-uv-ips\n  Information @ Condition.code (line 34, col11) : None of the codes provided are in the value set http://hl7.org/fhir/uv/ips/ValueSet/core-problem-list-disorders-uv-ips (http://hl7.org/fhir/uv/ips/ValueSet/core-problem-list-disorders-uv-ips, and a code is recommended to come from this value set) (codes = http://snomed.info/sct#198436008)\n</pre></div>\n\n\n<p>This is the example instance:</p>\n<div class=\"codehilite\"><pre><span></span>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;Condition xmlns=&quot;http://hl7.org/fhir&quot; xmlns:xhtml=&quot;http://www.w3.org/1999/xhtml&quot;&gt;\n    &lt;id value=&quot;c64139e7-f02d-409c-bf34-75e8bf23bc80&quot;/&gt;\n    &lt;identifier&gt;\n        &lt;system value=&quot;urn:oid:1.2.3.999&quot;/&gt;\n        &lt;value value=&quot;c87bf51c-e53c-4bfe-b8b7-aa62bdd93002&quot;/&gt;\n    &lt;/identifier&gt;\n    &lt;clinicalStatus&gt;\n        &lt;coding&gt;\n            &lt;system value=&quot;http://terminology.hl7.org/CodeSystem/condition-clinical&quot;/&gt;\n            &lt;code value=&quot;active&quot;/&gt;\n        &lt;/coding&gt;\n    &lt;/clinicalStatus&gt;\n    &lt;verificationStatus&gt;\n        &lt;coding&gt;\n            &lt;system value=&quot;http://terminology.hl7.org/CodeSystem/condition-ver-status&quot;/&gt;\n            &lt;code value=&quot;confirmed&quot;/&gt;\n        &lt;/coding&gt;\n    &lt;/verificationStatus&gt;\n    &lt;category&gt;\n        &lt;coding&gt;\n            &lt;system value=&quot;http://loinc.org&quot;/&gt;\n            &lt;code value=&quot;75326-9&quot;/&gt;\n            &lt;display value=&quot;Problem&quot;/&gt;\n        &lt;/coding&gt;\n    &lt;/category&gt;\n    &lt;severity&gt;\n        &lt;coding&gt;\n            &lt;system value=&quot;http://loinc.org&quot;/&gt;\n            &lt;code value=&quot;LA6751-7&quot;/&gt;\n            &lt;display value=&quot;Moderate&quot;/&gt;\n        &lt;/coding&gt;\n    &lt;/severity&gt;\n    &lt;code&gt;\n        &lt;coding&gt;\n            &lt;system value=&quot;http://snomed.info/sct&quot;/&gt;\n            &lt;code value=&quot;198436008&quot;/&gt;\n            &lt;display value=&quot;Menopausal flushing (finding)&quot;&gt;\n                &lt;extension url=&quot;http://hl7.org/fhir/StructureDefinition/translation&quot;&gt;\n                    &lt;extension url=&quot;lang&quot;&gt;\n                        &lt;valueCode value=&quot;nl-NL&quot;/&gt;\n                    &lt;/extension&gt;\n                    &lt;extension url=&quot;content&quot;&gt;\n                        &lt;valueString value=&quot;opvliegers&quot;/&gt;\n                    &lt;/extension&gt;\n                &lt;/extension&gt;\n            &lt;/display&gt;\n        &lt;/coding&gt;\n        &lt;!--\n        &lt;coding&gt;\n            &lt;system value=&quot;http://hl7.org/fhir/sid/icd-10&quot;/&gt;\n            &lt;code value=&quot;N95.1&quot;/&gt;\n            &lt;display value=&quot;Menopausal and female climacteric states&quot;/&gt;\n        &lt;/coding&gt;\n        --&gt;\n    &lt;/code&gt;\n    &lt;subject&gt;\n        &lt;reference value=&quot;Patient/2b90dd2b-2dab-4c75-9bb9-a355e07401e8&quot;/&gt;\n    &lt;/subject&gt;\n    &lt;onsetDateTime value=&quot;2015&quot;/&gt;\n    &lt;recordedDate value=&quot;2016-10&quot;/&gt;\n&lt;/Condition&gt;\n</pre></div>\n\n\n<p>The validator appears to be assuming a \"version\" of '900000000000207008'?  The code system version isn't specified in the value set definition or in the example instance, and '900000000000207008' isn't a valid edition module id and obviously isn't a valid SNOMED CT version url.  The code '198436008' is a valid member of the value set.  There is not a defined slice of 'Condition.code' that matches this example instance, but that's by design with open slicing and the binding to the core-problem-list-disorders-uv-ips value set in the base 'Condition.code' element.  Unless I've missed something, it seems to me that this all should be able to validate correctly.  <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span>?  <span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span>?<br>\n<span class=\"user-mention\" data-user-id=\"191415\">@Giorgio Cangioli</span></p>",
        "id": 185189773,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1578555924
    },
    {
        "content": "<p>Any ideas on this - <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span>? <span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span>?</p>",
        "id": 185252338,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1578601834
    },
    {
        "content": "<p>There are some similar issues about the SNOMED version not being looked at correctly.  I'm deferring to <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span></p>",
        "id": 185253789,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1578602787
    },
    {
        "content": "<p>Yes, we've had some issues with that.  I thought they had been at least mostly resolved - but apparently not completely.  If Grahame isn't able to get into it at the moment I can try to take a look at the code.</p>",
        "id": 185254422,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1578603189
    },
    {
        "content": "<p>is this still an issue? I can't reproduce it?</p>",
        "id": 185466172,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1578893496
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> Yes, it's still an issue with 4.1.42-SNAPSHOT.  I'm getting the same error.</p>",
        "id": 185507409,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1578931722
    },
    {
        "content": "<p>have you cleared your txCache?</p>",
        "id": 185530230,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1578944997
    },
    {
        "content": "<p>maybe not recently - I'll see what that does</p>",
        "id": 185537550,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1578949595
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> I cleared the txCache for the IPS IG, and that did help some.  But unless I'm forgetting something, txCache isn't in play for the standalone validator which is where I'm seeing many of these issues (particularly \"Unable to provide support for code system <a href=\"http://snomed.info/sct\" target=\"_blank\" title=\"http://snomed.info/sct\">http://snomed.info/sct</a> version 900000000000207008\").  And I'm trying to work out why there is a noticeably different set of qa messages depending on whether I'm evaluating the example bundle instance while building the IG, or validating the bundle instance with the standalone validator against the IPS IG, or validating the individual resource instances (pulled out from the bundle) against the IG and the particular applicable profile - all three cases return a different set of messages for the same resource instance.</p>",
        "id": 185618236,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1579022704
    },
    {
        "content": "<p>well, what's an example with the validator directly?</p>",
        "id": 185628239,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1579028720
    },
    {
        "content": "<p>well, what's an example with the validator directly?</p>",
        "id": 185628245,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1579028730
    },
    {
        "content": "<p>well, what's an example with the validator directly?</p>",
        "id": 185628347,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1579028779
    },
    {
        "content": "<p>I'll go ahead and post the examples</p>",
        "id": 185628687,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1579029006
    },
    {
        "content": "<p>The is the example <a href=\"https://github.com/HL7/fhir-ips/blob/master/examples/IPS-bundle-01.xml\" target=\"_blank\" title=\"https://github.com/HL7/fhir-ips/blob/master/examples/IPS-bundle-01.xml\">bundle</a> instance.  The IG build (1.0.40-SNAPSHOT) information messages (no warnings or errors) for the IPS-bundle-01.xml example bundle (with no suppressed qa messages) are:</p>\n<div class=\"codehilite\"><pre><span></span>== /Users/rhausam/git-repo/fhir-ips/examples/IPS-bundle-01.xml ==\nINFORMATION: Bundle/IPS-examples-Bundle-01: Bundle.entry[4].resource.severity: None of the codes provided are in the value set http://hl7.org/fhir/ValueSet/condition-severity (http://hl7.org/fhir/ValueSet/condition-severity, and a code is recommended to come from this value set) (codes = http://loinc.org#LA6751-7)\nINFORMATION: Bundle/IPS-examples-Bundle-01: Bundle.entry[7].resource.code.coding[1]: Code System URI &#39;urn:oid:2.16.840.1.113883.2.4.4.1&#39; is unknown so the code cannot be validated\nINFORMATION: Bundle/IPS-examples-Bundle-01: Bundle.entry[7].resource.code.coding[2]: Code System URI &#39;urn:oid:2.16.840.1.113883.2.4.4.7&#39; is unknown so the code cannot be validated\nINFORMATION: Bundle/IPS-examples-Bundle-01: Bundle.entry[10].resource.severity: None of the codes provided are in the value set http://hl7.org/fhir/ValueSet/condition-severity (http://hl7.org/fhir/ValueSet/condition-severity, and a code is recommended to come from this value set) (codes = http://loinc.org#LA6750-9)\n</pre></div>\n\n\n<p>The validation results for the IPS-bundle-01.xml example bundle instance are:</p>\n<div class=\"codehilite\"><pre><span></span>RHausamMacbookPro:org.hl7.fhir.core rhausam$ java -jar ~/Downloads/org.hl7.fhir.validator.jar -version 4.0.1 ~/git-repo/fhir-ips/examples/IPS-bundle-01.xml -ig hl7.fhir.uv.ips\nFHIR Validation tool Version 4.1.45-SNAPSHOT (Git# 9f1697dad160). Built 2020-01-15T08:08:25.901+11:00 (9 hours old)\nDetected Java version: 13.0.1 from /Library/Java/JavaVirtualMachines/jdk-13.0.1.jdk/Contents/Home on x86_64 (64bit). 4096MB available\nArguments: -version 4.0.1 /Users/rhausam/git-repo/fhir-ips/examples/IPS-bundle-01.xml -ig hl7.fhir.uv.ips\nDirectories: Current = /Users/rhausam/git-repo/org.hl7.fhir.core, Package Cache = /Users/rhausam/.fhir/packages\n  .. FHIR Version 4.0, definitions from hl7.fhir.r4.core#4.0.1\n  .. connect to tx server @ http://tx.fhir.org\n    (v4.0.1)\n+  .. load IG from hl7.fhir.uv.ips\n   ... Using version dev\n  .. validate [/Users/rhausam/git-repo/fhir-ips/examples/IPS-bundle-01.xml]\nTerminology server: Check for supported code systems for http://loinc.org\n*FAILURE* validating /Users/rhausam/git-repo/fhir-ips/examples/IPS-bundle-01.xml:  error:14 warn:4 info:4\n  Error @ Bundle.entry[4].resource.code.coding[0] (line 441, col14) : Unable to provide support for code system http://snomed.info/sct version 900000000000207008 for &#39;http://snomed.info/sct#198436008&#39;\n  Error @ Bundle.entry[7].resource.code.coding[0] (line 561, col14) : Unable to provide support for code system http://snomed.info/sct version 900000000000207008 for &#39;http://snomed.info/sct#108774000&#39;\n  Error @ Bundle.entry[8].resource.code.coding[0] (line 592, col14) : Unable to provide support for code system http://snomed.info/sct version 900000000000207008 for &#39;http://snomed.info/sct#412588001&#39;\n  Error @ Bundle.entry[9].resource.code.coding[0] (line 642, col14) : Unable to provide support for code system http://snomed.info/sct version 900000000000207008 for &#39;http://snomed.info/sct#373270004&#39;\n  Error @ Bundle.entry[10].resource.code.coding[0] (line 692, col14) : Unable to provide support for code system http://snomed.info/sct version 900000000000207008 for &#39;http://snomed.info/sct#254837009&#39;\n  Error @ Bundle.entry[12].resource.value.ofType(CodeableConcept).coding[0] (line 762, col14) : Unable to provide support for code system http://snomed.info/sct version 900000000000207008 for &#39;http://snomed.info/sct#278149003&#39;\n  Error @ Bundle.entry[16].resource.hasMember[0].resource.value.ofType(CodeableConcept).coding[0] (line 762, col14) : Unable to provide support for code system http://snomed.info/sct version 900000000000207008 for &#39;http://snomed.info/sct#278149003&#39;\n  Error @ Bundle.entry[13].resource.value.ofType(CodeableConcept).coding[0] (line 796, col14) : Unable to provide support for code system http://snomed.info/sct version 900000000000207008 for &#39;http://snomed.info/sct#10828004&#39;\n  Error @ Bundle.entry[16].resource.hasMember[1].resource.value.ofType(CodeableConcept).coding[0] (line 796, col14) : Unable to provide support for code system http://snomed.info/sct version 900000000000207008 for &#39;http://snomed.info/sct#10828004&#39;\n  Error @ Bundle.entry[14].resource.value.ofType(CodeableConcept).coding[0] (line 830, col14) : Unable to provide support for code system http://snomed.info/sct version 900000000000207008 for &#39;http://snomed.info/sct#10828004&#39;\n  Error @ Bundle.entry[16].resource.hasMember[2].resource.value.ofType(CodeableConcept).coding[0] (line 830, col14) : Unable to provide support for code system http://snomed.info/sct version 900000000000207008 for &#39;http://snomed.info/sct#10828004&#39;\n  Error @ Bundle.entry[15].resource.value.ofType(CodeableConcept).coding[0] (line 864, col14) : Unable to provide support for code system http://snomed.info/sct version 900000000000207008 for &#39;http://snomed.info/sct#260385009&#39;\n  Error @ Bundle.entry[16].resource.hasMember[3].resource.value.ofType(CodeableConcept).coding[0] (line 864, col14) : Unable to provide support for code system http://snomed.info/sct version 900000000000207008 for &#39;http://snomed.info/sct#260385009&#39;\n  Error @ Bundle.entry[18].resource.value.ofType(CodeableConcept).coding[0] (line 978, col14) : Unable to provide support for code system http://snomed.info/sct version 900000000000207008 for &#39;http://snomed.info/sct#115329001&#39;\n  Information @ Bundle.entry[4].resource.severity (line 433, col15) : None of the codes provided are in the value set http://hl7.org/fhir/ValueSet/condition-severity (http://hl7.org/fhir/ValueSet/condition-severity, and a code is recommended to come from this value set) (codes = http://loinc.org#LA6751-7)\n  Information @ Bundle.entry[10].resource.severity (line 684, col15) : None of the codes provided are in the value set http://hl7.org/fhir/ValueSet/condition-severity (http://hl7.org/fhir/ValueSet/condition-severity, and a code is recommended to come from this value set) (codes = http://loinc.org#LA6750-9)\n  Information @ Bundle.entry[7].resource.code.coding[1] (line 566, col14) : Code System URI &#39;urn:oid:2.16.840.1.113883.2.4.4.1&#39; is unknown so the code cannot be validated\n  Information @ Bundle.entry[7].resource.code.coding[2] (line 571, col14) : Code System URI &#39;urn:oid:2.16.840.1.113883.2.4.4.7&#39; is unknown so the code cannot be validated\n  Warning @ Bundle.entry[1].resource.contact[0].relationship[0] (line 322, col20) : None of the codes provided are in the value set http://hl7.org/fhir/ValueSet/patient-contactrelationship (http://hl7.org/fhir/ValueSet/patient-contactrelationship, and a code should come from this value set unless it has no suitable code) (codes = http://terminology.hl7.org/CodeSystem/v3-RoleCode#MTH)\n  Warning @ Bundle.entry[4].resource.subject.resource.contact[0].relationship[0] (line 322, col20) : None of the codes provided are in the value set http://hl7.org/fhir/ValueSet/patient-contactrelationship (http://hl7.org/fhir/ValueSet/patient-contactrelationship, and a code should come from this value set unless it has no suitable code) (codes = http://terminology.hl7.org/CodeSystem/v3-RoleCode#MTH)\n  Warning @ Bundle.entry[4].resource.category[0] (line 426, col15) : None of the codes provided are in the value set http://hl7.org/fhir/ValueSet/condition-category (http://hl7.org/fhir/ValueSet/condition-category, and a code should come from this value set unless it has no suitable code) (codes = http://loinc.org#75326-9)\n  Warning @ Bundle.entry[10].resource.category[0] (line 677, col15) : None of the codes provided are in the value set http://hl7.org/fhir/ValueSet/condition-category (http://hl7.org/fhir/ValueSet/condition-category, and a code should come from this value set unless it has no suitable code) (codes = http://loinc.org#75326-9)\n</pre></div>",
        "id": 185672438,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1579070012
    },
    {
        "content": "<p>This is the Condition resource <a href=\"/user_uploads/10155/hhZP0uH1YxBNcBTtQkcP2Oy-/Condition-example-ips.xml\" target=\"_blank\" title=\"Condition-example-ips.xml\">instance</a> ([4] in the bundle) extracted from the bundle.  The validation results for the Condition resource instance are:</p>\n<div class=\"codehilite\"><pre><span></span>RHausamMacbookPro:org.hl7.fhir.core rhausam$ java -jar ~/Downloads/org.hl7.fhir.validator.jar -version 4.0.1 ~/Documents/Condition-example-ips.xml -ig hl7.fhir.uv.ips -profile http://hl7.org/fhir/uv/ips/StructureDefinition/Condition-uv-ips\nFHIR Validation tool Version 4.1.45-SNAPSHOT (Git# 9f1697dad160). Built 2020-01-15T08:08:25.901+11:00 (9 hours old)\nDetected Java version: 13.0.1 from /Library/Java/JavaVirtualMachines/jdk-13.0.1.jdk/Contents/Home on x86_64 (64bit). 4096MB available\nArguments: -version 4.0.1 /Users/rhausam/Documents/Condition-example-ips.xml -ig hl7.fhir.uv.ips -profile http://hl7.org/fhir/uv/ips/StructureDefinition/Condition-uv-ips\nDirectories: Current = /Users/rhausam/git-repo/org.hl7.fhir.core, Package Cache = /Users/rhausam/.fhir/packages\n  .. FHIR Version 4.0, definitions from hl7.fhir.r4.core#4.0.1\n  .. connect to tx server @ http://tx.fhir.org\n    (v4.0.1)\n+  .. load IG from hl7.fhir.uv.ips\n   ... Using version dev\n  .. validate [/Users/rhausam/Documents/Condition-example-ips.xml] against [http://hl7.org/fhir/uv/ips/StructureDefinition/Condition-uv-ips]\nTerminology server: Check for supported code systems for http://loinc.org\n*FAILURE* validating /Users/rhausam/Documents/Condition-example-ips.xml:  error:1 warn:0 info:2\n  Error @ Condition.code.coding[0] (line 35, col17) : Unable to provide support for code system http://snomed.info/sct version 900000000000207008 for &#39;http://snomed.info/sct#198436008&#39;\n  Information @ Condition.code (line 34, col11) : This element does not match any known slice for the profile http://hl7.org/fhir/uv/ips/StructureDefinition/Condition-uv-ips\n  Information @ Condition.code (line 34, col11) : None of the codes provided are in the value set http://hl7.org/fhir/uv/ips/ValueSet/core-problem-list-disorders-uv-ips (http://hl7.org/fhir/uv/ips/ValueSet/core-problem-list-disorders-uv-ips, and a code is recommended to come from this value set) (codes = http://snomed.info/sct#198436008)\n</pre></div>",
        "id": 185673061,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1579071044
    },
    {
        "content": "<p>I'm also getting the same <code>Unable to provide support for code system http://snomed.info/sct version 900000000000207008</code> error that <span class=\"user-mention\" data-user-id=\"191405\">@Rob Hausam</span>  is reporting.  I'm using <em>FHIR Validation tool Version 4.1.47-SNAPSHOT</em></p>",
        "id": 185877675,
        "sender_full_name": "May Terry",
        "timestamp": 1579221865
    },
    {
        "content": "<p>ok how can I reproduce this?</p>",
        "id": 185877767,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1579221977
    },
    {
        "content": "<p>I think I gave you information that should let you reproduce it in my post yesterday?  I haven't tried 4.1 47 yes - I'll be able to get back and do that a bit later.</p>",
        "id": 185879429,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1579224121
    },
    {
        "content": "<p>ok sorted next release</p>",
        "id": 185881821,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1579227539
    }
]