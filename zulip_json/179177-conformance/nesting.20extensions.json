[
    {
        "content": "<p>Has anyone created an extension that is nested more than 2 levels? In theory you can go as deep as you like, but more than 2 seems implementer unfriendly...</p>",
        "id": 167452553,
        "sender_full_name": "David Hay",
        "timestamp": 1559797536
    },
    {
        "content": "<p>right</p>",
        "id": 167453138,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1559798406
    },
    {
        "content": "<p>(Frankly two is already pretty painful to work with.)</p>",
        "id": 167631967,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1559965486
    },
    {
        "content": "<blockquote>\n<p>Has anyone created an extension that is nested more than 2 levels? In theory you can go as deep as you like, but more than 2 seems implementer unfriendly...</p>\n</blockquote>\n<p>I did make this, and I am not particularly proud of it:</p>\n<div class=\"codehilite\"><pre><span></span>&lt;extension url=&quot;http://ehelse.no/fhir/StructureDefinition/gd-person-status&quot;&gt;\n        &lt;extension url=&quot;fregPersonStatus&quot;&gt;\n            &lt;valueCode value=&quot;bosatt&quot;/&gt;\n        &lt;/extension&gt;\n        &lt;extension url=&quot;http://ehelse.no/fhir/StructureDefinition/gd-fregmetadata&quot;&gt;\n            &lt;extension url=&quot;registeredTimestamp&quot;&gt;\n                &lt;valueDateTime value=&quot;2019-09-05T11:17:43.399+02:00&quot;/&gt;\n            &lt;/extension&gt;\n            &lt;extension url=&quot;currentInfo&quot;&gt;\n                &lt;valueBoolean value=&quot;true&quot;/&gt;\n            &lt;/extension&gt;\n            &lt;extension url=&quot;source&quot;&gt;\n                &lt;valueString value=&quot;KILDE_DSF&quot;/&gt;\n            &lt;/extension&gt;\n            &lt;extension url=&quot;validFrom&quot;&gt;\n                &lt;valueDateTime value=&quot;2019-09-05T11:17:43.399+02:00&quot;/&gt;\n            &lt;/extension&gt;\n        &lt;/extension&gt;\n    &lt;/extension&gt;\n</pre></div>\n\n\n<p>The big problem is that I can't make it validate. And I can't figure out why. <span class=\"user-mention\" data-user-id=\"191321\">@David Hay</span> <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> </p>\n<p>The official validator claims there is no matching slice for the nested extension \"<a href=\"http://ehelse.no/fhir/StructureDefinition/gd-fregmetadata\" target=\"_blank\" title=\"http://ehelse.no/fhir/StructureDefinition/gd-fregmetadata\">http://ehelse.no/fhir/StructureDefinition/gd-fregmetadata</a>\":</p>\n<div class=\"codehilite\"><pre><span></span>Success...validating gd-Person-04021950128-version-2.xml:  error:0 warn:0 info:1\n  Information @ Person.extension[0].extension[1] (line 10, col78) : This element does not match any known slice for the profile http://ehelse.no/fhir/StructureDefinition/gd-person-status\n</pre></div>\n\n\n<p>The full example as well as the conformance resources are posted on GitHub: <a href=\"https://github.com/HL7Norway/Grunndata-profiles\" target=\"_blank\" title=\"https://github.com/HL7Norway/Grunndata-profiles\">https://github.com/HL7Norway/Grunndata-profiles</a></p>",
        "id": 179624976,
        "sender_full_name": "Thomas Tveit Rosenlund",
        "timestamp": 1572614368
    },
    {
        "content": "<p>is that today? or before the upgrade?</p>",
        "id": 179661999,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1572639875
    },
    {
        "content": "<p>validating extension slices is generally a problem right now after the technical corrections - I'll be working on fixing that today</p>",
        "id": 179662028,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1572639902
    },
    {
        "content": "<p>(deleted)</p>",
        "id": 179675543,
        "sender_full_name": "Eric Haas",
        "timestamp": 1572652921
    },
    {
        "content": "<blockquote>\n<p>is that today? or before the upgrade?</p>\n</blockquote>\n<p>Yes that was november 1, downloaded the new validator today v4.0.31. And still get this error on the example: <a href=\"https://github.com/HL7Norway/Grunndata-profiles/blob/master/examples/gd-Person-04021950128-version-2.xml\" target=\"_blank\" title=\"https://github.com/HL7Norway/Grunndata-profiles/blob/master/examples/gd-Person-04021950128-version-2.xml\">https://github.com/HL7Norway/Grunndata-profiles/blob/master/examples/gd-Person-04021950128-version-2.xml</a></p>",
        "id": 179911094,
        "sender_full_name": "Thomas Tveit Rosenlund",
        "timestamp": 1572942840
    },
    {
        "content": "<p>can you add it as a test case to <a href=\"https://github.com/FHIR/fhir-test-cases/validator\" target=\"_blank\" title=\"https://github.com/FHIR/fhir-test-cases/validator\">https://github.com/FHIR/fhir-test-cases/validator</a> ?</p>",
        "id": 180203314,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1573189754
    },
    {
        "content": "<blockquote>\n<blockquote>\n<p>Has anyone created an extension that is nested more than 2 levels? In theory you can go as deep as you like, but more than 2 seems implementer unfriendly...</p>\n</blockquote>\n<p>I did make this, and it's just as unfriendly, but generally computable and easy to generate.  Not even going to try to validate it though.  I use it internally to show me how something got produced when mapping from V2 to FHIR, it never goes beyond my converter.</p>\n<div class=\"codehilite\"><pre><span></span>        &lt;reference value=&quot;DiagnosticOrder/efe37c6bacb5-b8a8-4121-a12f-af41419e&quot;&gt;\n              &lt;extension url=&quot;http://ainq.com/fhir/v2/target&quot;&gt;\n                 &lt;extension url=&quot;Path&quot;&gt;\n                    &lt;valueUri value=&quot;#subject&quot;&gt;&lt;/valueUri&gt;\n                 &lt;/extension&gt;\n                 &lt;extension url=&quot;Source&quot;&gt;\n                    &lt;extension url=&quot;Location&quot;&gt;\n                       &lt;valueString value=&quot;/PATIENT_RESULT(0)/ORDER_OBSERVATION(0)/COMMON_ORDER/ORC&quot;&gt;&lt;/valueString&gt;\n                    &lt;/extension&gt;\n                    &lt;extension url=&quot;Rule&quot;&gt;\n                       &lt;valueString value=&quot;ORC-&gt;DiagnosticOrder&quot;&gt;&lt;/valueString&gt;\n                    &lt;/extension&gt;\n                 &lt;/extension&gt;\n                 &lt;extension url=&quot;Source&quot;&gt;\n                    &lt;extension url=&quot;Location&quot;&gt;\n                       &lt;valueString value=&quot;/PATIENT_RESULT(0)/PATIENT/PID&quot;&gt;&lt;/valueString&gt;\n                    &lt;/extension&gt;\n                    &lt;extension url=&quot;Rule&quot;&gt;\n                       &lt;valueString value=&quot;PID-&gt;Patient&quot;&gt;&lt;/valueString&gt;\n                    &lt;/extension&gt;\n                 &lt;/extension&gt;\n</pre></div>\n\n\n</blockquote>",
        "id": 180207403,
        "sender_full_name": "Keith Boone",
        "timestamp": 1573196544
    },
    {
        "content": "<blockquote>\n<p>can you add it as a test case to <a href=\"https://github.com/FHIR/fhir-test-cases/validator\" target=\"_blank\" title=\"https://github.com/FHIR/fhir-test-cases/validator\">https://github.com/FHIR/fhir-test-cases/validator</a> ?</p>\n</blockquote>\n<p>I could do that, but I don't think it would be very helpful without all the relevant profiles that example actually relies on:<br>\n<a href=\"https://github.com/HL7Norway/Grunndata-profiles/tree/master/for-validation-gd-r4\" target=\"_blank\" title=\"https://github.com/HL7Norway/Grunndata-profiles/tree/master/for-validation-gd-r4\">https://github.com/HL7Norway/Grunndata-profiles/tree/master/for-validation-gd-r4</a></p>",
        "id": 180415821,
        "sender_full_name": "Thomas Tveit Rosenlund",
        "timestamp": 1573472307
    }
]