[
    {
        "content": "<p>When validating a Procedure Resource with Extension i get the following error(s) from the SnapshotGenerator:</p>\n<div class=\"codehilite\"><pre><span></span><code>*FAILURE*: 3 errors, 0 warnings, 0 notes\n  Error @ StructureDefinition.differential.element.where(path = &#39;Procedure.extension&#39;) : No match found in the generated snapshot: check that the path and definitions are legal in the differential (including order)\n  Error @ StructureDefinition.differential.element.where(path = &#39;Procedure.extension:Dokumentationsdatum&#39;) : No match found in the generated snapshot: check that the path and definitions are legal in the differential (including order)\n  Error @ StructureDefinition : The profile http://gematik.de/fhir/IsiK/StructureDefinition/IsiKProzedur has 2 elements in the differential (id: Procedure.extension, id: Procedure.extension:Dokumentationsdatum) that don&#39;t have a matching element in the snapshot: check that the path and definitions are legal in the differential (including order)\n</code></pre></div>",
        "id": 216086054,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1604930108
    },
    {
        "content": "<p>to reproduce: <br>\njava -jar validator_cli.jar <a href=\"https://gist.githubusercontent.com/patrick-werner/4cd02a124312455b2147e7c4bbae9e82/raw/5020e8510ad1c2659095863b0d20a1f7a9b0720e/test.xml\">https://gist.githubusercontent.com/patrick-werner/4cd02a124312455b2147e7c4bbae9e82/raw/5020e8510ad1c2659095863b0d20a1f7a9b0720e/test.xml</a> -version 4.0  -ig de.basisprofil.r4 -ig <a href=\"https://gist.githubusercontent.com/patrick-werner/4cd02a124312455b2147e7c4bbae9e82/raw/5020e8510ad1c2659095863b0d20a1f7a9b0720e/Extension.xml\">https://gist.githubusercontent.com/patrick-werner/4cd02a124312455b2147e7c4bbae9e82/raw/5020e8510ad1c2659095863b0d20a1f7a9b0720e/Extension.xml</a></p>",
        "id": 216086104,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1604930144
    },
    {
        "content": "<p>the bit that sticks out to me in the error message is \"(including order)\" if you look at your structure definition you define .extension before .id and .meta but the order inherited by pretty much every resource (and is listed in the spec this way) is \"id, meta, implicitRules, language, text, contained, extension, modifierExtension\" <a href=\"https://www.hl7.org/fhir/procedure.html#ElementDefinition\">https://www.hl7.org/fhir/procedure.html#ElementDefinition</a> <br>\nTry pulling id and meta up to the top of the differential and see if that works</p>",
        "id": 216098025,
        "sender_full_name": "ryan moehrke",
        "timestamp": 1604935189
    },
    {
        "content": "<p>will try, thanks. Missed that</p>",
        "id": 216098425,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1604935354
    },
    {
        "content": "<p>Thank you <span class=\"user-mention\" data-user-id=\"237342\">@ryan moehrke</span> ! That was the issue (the validator didn't complain about the order explicitly like he does in other contexts).</p>",
        "id": 216099238,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1604935699
    }
]