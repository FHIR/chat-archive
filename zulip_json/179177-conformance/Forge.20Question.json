[
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191336\">@Michel Rutten</span> - how does Forge load the content models of the resources? If I generated DSTU2 structure definitions for DSTU3 resources, could we make it so you could use Forge to profile DSTU3 resources? (until you update Forge properly to DSTU3)</p>",
        "id": 153831944,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1465345207
    },
    {
        "content": "<p>I've done this.  However, it only works for resources that existed in STU 2.  For example, Forge won't support the Task resource, even if expressed in DSTU 2 syntax.  Same issue with any of the new data types or any resources that reference them (e.g. the CDS resources that now reference the \"meta\" data type)</p>",
        "id": 153831959,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1465354202
    },
    {
        "content": "<p>The content is loaded from the validation.xml.zip file located in the same directory as the Forge executable.  However, the Forge executable is *hard* to locate.  Particularly if you've got multiple installs of forge due to upgrades of the tool.  (I had to use a search tool that could search inside hidden folders and manually rename all of my forge.exe files until I found the right one.)  Happy to share my customized validation zip file if that's useful.</p>",
        "id": 153831960,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1465354315
    },
    {
        "content": "<p>well we need to make this easier</p>",
        "id": 153831961,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1465361264
    },
    {
        "content": "<p>Also, <span class=\"user-mention\" data-user-id=\"191336\">@Michel Rutten</span> , how do I setup forge to work when I open as in explorer?</p>",
        "id": 153831962,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1465361287
    },
    {
        "content": "<p>And another forge question - editing a logical model. I define all the content of a logical model in the snapshot. Forge opened it, but saved it in the differential. </p>",
        "id": 153831968,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1465362985
    },
    {
        "content": "<p>... and we need to talk about example values</p>",
        "id": 153831969,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1465363390
    },
    {
        "content": "<p>As Lloyd explains, Forge loads content models from the contents of validation.zip in the application directory. The ClickOnce installer puts the application files into some well hidden folder that is hard to find. If you start Forge, you can use the task manager to open the executable folder. Also the Options menu provides a command \"Open FHIR Artifact cache folder\", this will open an explorer window on the folder where the FHIR .NET API extracts the contents of validation.zip. Forge specifically processes profiles-resources.xml and profiles-types.xml (extracted from validation.zip) to generate the models. So you could hack these XML files in-place in order to modify the Forge models. However because of some limitations in the current .NET FHIR API library version, you cannot define custom resource/data types; this wil cause deserialization to fail. We are currently working on an updated, more flexible API design that will allow us to support this.<br>\n[Edit] I'm interesting in feedback on this. If you manage to get this working, maybe we can publish the custom STU3-on-DSTU2 validation.zip somewhere, along with some guidance on how to install this.</p>",
        "id": 153831998,
        "sender_full_name": "Michel Rutten",
        "timestamp": 1465377718
    },
    {
        "content": "<p>Concerning Forge integration with Windows Explorer, I've thought about this before, but never got around to implementing it. The easiest approach would be to define and register a custom file extension with the application, e.g. \".fhir\". However I don't think this is very practical, as most resources are persisted as \".xml\" or \".json\" files. Alternatively I could try and register the application as a handler for the generic \".xml\" extension, but then the user has to take care to open actual FHIR profiles - other types of XML files are not supported and would generate an error. It is possible to develop and register a binary file type handler component into Explorer that dynamically inspects the selected file, but this is probably not worth the effort. I'm interested in feedback on this. If we can decide on a useful approach then I'm happy to implement it.</p>",
        "id": 153831999,
        "sender_full_name": "Michel Rutten",
        "timestamp": 1465378351
    },
    {
        "content": "<p>Support for logical models is still in it's infancy. When implementing this, I simply leveraged the existing functionality in Forge. So the serialization uses the same existing logic that we've implemented to save regular profiles - generating a differential. I'll see if I can make the serialization a bit smarter, so logical models are serialized to a snapshot instead of a differential component.</p>",
        "id": 153832000,
        "sender_full_name": "Michel Rutten",
        "timestamp": 1465378557
    },
    {
        "content": "<p>As far as example resources, you can include them in a package and Forge will try to load them. However you can only edit the common Resource meta properties and see a read-only XML rendering.</p>",
        "id": 153832001,
        "sender_full_name": "Michel Rutten",
        "timestamp": 1465378620
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> I fixed the serialization of logical models in the development build. The next release of Forge will serialize logical models to a snapshot component (not a differential). Also it will automatically fix logical models created by the previous version by transfering element definitions from the differential to the snapshot component. The next release will contain a lot of small bugfixes and will be published soon (aiming for this friday). Thanks for the feedback!</p>",
        "id": 153832027,
        "sender_full_name": "Michel Rutten",
        "timestamp": 1465394552
    },
    {
        "content": "<p>with regard to integration with explorer, providing a 'copy executable name' would be great - since the binary is stored in some weird hard to find place. Open with can take it from there. </p>",
        "id": 153832088,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1465423522
    },
    {
        "content": "<p>thanks for fixing the logical models</p>",
        "id": 153832089,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1465423539
    },
    {
        "content": "<p>with regard to replacing the profiles bundles, the issue is the enumerations, right? </p>",
        "id": 153832091,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1465423595
    },
    {
        "content": "<p>The issue with examples is that in the spreadsheet, I've defined an extension for multiple example columns so that I can build multiple examples out of the spreadsheet </p>",
        "id": 153832092,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1465423896
    },
    {
        "content": "<p>now we have to migrate to Forge...</p>",
        "id": 153832093,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1465423903
    },
    {
        "content": "<p>you know what I'd love? A new view, a grid that has elements down the left, and then a column for each mapping defined in mappingspaces.xml. And another grid view for examples, a column for examples 1..10 or something. </p>",
        "id": 153832102,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1465426874
    },
    {
        "content": "<p>Open FHIR Artifact cache folder makes me nervous because it's not clear if the cache will reliably persist.</p>",
        "id": 153832125,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1465455571
    },
    {
        "content": "<p>Is there a reason the mappings and examples need to be separate from the existing grid?  I like that you can switch the columns around so you can choose what you want to look at on one screen.  And I think it would be useful to look at things like cardinality or must support when looking at mappings or examples</p>",
        "id": 153832126,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1465455666
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span>  &amp; <span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span>  Thanks for the useful feedback!</p>\n<p>I'll implement a command to open the application (executable) directory, no biggie.</p>\n<p>The current version of the .NET FHIR API is very strict on enumerations; even a single invalid enum value will cause deserialization to fail. Ewout has already implemented a more flexible approach in the development branch of the API. Once we update Forge to this new API version, the application should become more forgiving in handling unknown values.</p>\n<p>Support for examples is still quite primitive. I'm open for suggestions on how to improve this. Interesting proposal for a new \"example view\". So if I understand correctly, this view would represent a specific extension on StructureDefinition for association with a set of example resources? That sounds quite useful. Do you know where I can find the extension definition?</p>\n<p>Also interesting suggestions about a special view for mappingspaces.xml. I'm not familiar with that file, but I'll definitely investigate.</p>\n<p>The FHIR Artifact cache folder is bound to a specific version of the API. If you clear the cache folder, the API will simply re-extract validation.zip. So if you replace validation.zip in the application directory and clear the cache folder, then you should be good to go. But I consider this a hack for power users.</p>",
        "id": 153832129,
        "sender_full_name": "Michel Rutten",
        "timestamp": 1465459170
    },
    {
        "content": "<p>FYI I'm currently wrapping up a new minor update with a lot of bugfixes and small functional improvements. I'm planning to publish the update tomorrow. The minor update will still remain at the current version of the API. After that, I'm going to work on updating Forge to the new API version that is more flexible with deserialization.</p>",
        "id": 153832130,
        "sender_full_name": "Michel Rutten",
        "timestamp": 1465459555
    },
    {
        "content": "<p>so we're about to have a lot of users using forge with the current build</p>",
        "id": 153832132,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1465466699
    },
    {
        "content": "<p>it would be good if we could make some minor adjustments so that this wasn't a power user thing</p>",
        "id": 153832133,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1465466735
    },
    {
        "content": "<p>and it will take the pressure of you to upgrade to stu3 - which otherwise will be considerable</p>",
        "id": 153832134,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1465466748
    },
    {
        "content": "<p>I proposed other views because a view with too many columns becomes unmanageable...</p>",
        "id": 153832135,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1465466776
    },
    {
        "content": "<p>Agreed, that would definitely be helpful. I will integrate a new Open Application Folder command into the new release, as requested. Also I'll see if I can come up with a more user friendly solution to provide in a future release. <span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> could you please send me that custom STU3-on-DSTU2 validation.zip file, so I can evaluate the procedure?<br>\nAs for the alternate views, could you describe how you'd like the grids to be formatted? You mention one column per mapping/example. So what would be visible in each grid cell? I assume you'd want the cells to be editable. For the related examples, I could implement a url textbox with a file selector or such. But mapping is a bit harder, as these are complex components.</p>",
        "id": 153832140,
        "sender_full_name": "Michel Rutten",
        "timestamp": 1465470659
    },
    {
        "content": "<p>what I imagined:<br>\nmapping - one editable string column per entry in mappingSpaces.xml<br>\nexamples - one editable string column per # of examples added</p>",
        "id": 153832141,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1465470776
    },
    {
        "content": "<p>the way examples work is that they contain a json fragment for that element for the example. Obviously some examples can't be built that way, but many can</p>",
        "id": 153832142,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1465470815
    },
    {
        "content": "<p>I'm looking at mappingSpaces.xml (from SVN), interesting. I could integrate these into Forge, e.g. to provide drop-down options. The file is not part of validation.zip however.</p>",
        "id": 153832143,
        "sender_full_name": "Michel Rutten",
        "timestamp": 1465471161
    },
    {
        "content": "<p>I think I'm starting to understand. So the string field in the mapping grid would represent the mapping code for the system of the containing column? That would work.</p>",
        "id": 153832144,
        "sender_full_name": "Michel Rutten",
        "timestamp": 1465471264
    },
    {
        "content": "<p>And for the example grid, Forge would persist the JSON example fragments per element via an extension on ElementDefinition?</p>",
        "id": 153832145,
        "sender_full_name": "Michel Rutten",
        "timestamp": 1465471333
    },
    {
        "content": "<p>yeah. I can publish the mappingSpaces.xml somewhere if it helps. You'd know which column matched which entry in the mapping spaces, so you'd know how to propulate StructureDefinition.mapping, and the value the user entered - if they did - would go in ElementDefinition.mapping.map</p>",
        "id": 153832146,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1465471439
    },
    {
        "content": "<p>I think in this use, you'd just leave ElementDefinition.mapping.language blank</p>",
        "id": 153832147,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1465471454
    },
    {
        "content": "<p>examples - yes. and then the publisher would pull them out and populate an actual example. </p>",
        "id": 153832148,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1465471479
    },
    {
        "content": "<p>for the extension, the url is \"<a href=\"http://hl7.org/fhir/StructureDefinition/structuredefinition-example\" target=\"_blank\" title=\"http://hl7.org/fhir/StructureDefinition/structuredefinition-example\">http://hl7.org/fhir/StructureDefinition/structuredefinition-example</a>\", and it has 2 contained extensions, \"index\" which is an integer, and tells you the column, and \"exValue\" which is the value. You need only support string, and the publisher will interpret it </p>",
        "id": 153832150,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1465471628
    },
    {
        "content": "<p>I could manually include mappingSpaces.xml. I now got the current version of the file from SVN. Where can I find the official DSTU2 version?</p>",
        "id": 153832151,
        "sender_full_name": "Michel Rutten",
        "timestamp": 1465471911
    },
    {
        "content": "<p>well, just use the current one, actually</p>",
        "id": 153832152,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1465471951
    },
    {
        "content": "<p>OK</p>",
        "id": 153832153,
        "sender_full_name": "Michel Rutten",
        "timestamp": 1465471955
    },
    {
        "content": "<p>it's not version dependent</p>",
        "id": 153832154,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1465471957
    },
    {
        "content": "<p>Got it</p>",
        "id": 153832155,
        "sender_full_name": "Michel Rutten",
        "timestamp": 1465471963
    },
    {
        "content": "<p>thanks</p>",
        "id": 153832156,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1465471975
    },
    {
        "content": "<p>For mapping.language, users can still edit this property via the element tree if necessary.</p>",
        "id": 153832157,
        "sender_full_name": "Michel Rutten",
        "timestamp": 1465471980
    },
    {
        "content": "<p>Thx for the extension link!</p>",
        "id": 153832158,
        "sender_full_name": "Michel Rutten",
        "timestamp": 1465471994
    },
    {
        "content": "<p>np</p>",
        "id": 153832160,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1465473259
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191336\">@Michel Rutten</span> For fully-defined examples (and for Conformance instances too), just something that shows the metadata and lets you launch the instance in your system editor would be reasonable.  Eventually maybe a tie-in to ClinFHIR?  (And a different icon than the \"I don't know what this is\" would be good too :&gt;)  I'll send you my custom validation.zip file.</p>",
        "id": 153832188,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1465478801
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191336\">@Michel Rutten</span> - when the build starts working again (path problems) then the current build will publish a set of DSTU2 profiles for forge</p>",
        "id": 153832324,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1465541571
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> I'll try and find/create a better icon for example resources. Also I'll see if I can implement a \"Open in external editor\" command. ClinFHIR integration is a great suggestion! I'll discuss all your input with our team.<br>\n<span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> thanks! Can I fetch the DSTU2 profiles from somewhere, or do I have to run the build myself?</p>",
        "id": 153832328,
        "sender_full_name": "Michel Rutten",
        "timestamp": 1465547975
    },
    {
        "content": "<p>you'll be able to download from the current build once one of us figures out the build path problem</p>",
        "id": 153832333,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1465551486
    },
    {
        "content": "<p>OK, no rush. FYI I've implemented new application commands:<br>\n- Open the application folder (i.e. source location of validation.zip)<br>\n- Open selected resource in External Application (e.g. Notepad++, also works for example resources etc.)</p>",
        "id": 153832346,
        "sender_full_name": "Michel Rutten",
        "timestamp": 1465553113
    },
    {
        "content": "<p>love it, thanks</p>",
        "id": 153832347,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1465553146
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191336\">@Michel Rutten</span> see reorged downloads at <a href=\"http://hl7-fhir.github.io/downloads.html\" target=\"_blank\" title=\"http://hl7-fhir.github.io/downloads.html\">http://hl7-fhir.github.io/downloads.html</a> - 3rd link is a current build in as DSTU2 conformance resources</p>",
        "id": 153832411,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1465589800
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191336\">@Michel Rutten</span> - a forge question. If I wanted to launch Forge from another application, what's the most reliable to launch it - and to point it at a resource, either as a file or (ideally) on a server?</p>",
        "id": 153902973,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1503318865
    },
    {
        "content": "<p>Hi <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span>, Forge does not (yet) accept command line parameters. So you could start the application remotely, but you cannot immediately open a profile. Of course, I could add support for command line arguments in a future release.<br>\nBut I don't know an easy way to determine the application location... ClickOnce installer handles this.</p>",
        "id": 153902974,
        "sender_full_name": "Michel Rutten",
        "timestamp": 1503319726
    },
    {
        "content": "<p>or, from my point of view, ClickOnce doesn't handle this ;-)</p>",
        "id": 153902975,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1503320347
    },
    {
        "content": "<p>it would be good to handle command line parameters - you'll start getting complaints about tool integration soon....</p>",
        "id": 153902976,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1503320383
    },
    {
        "content": "<p>Basically we implement new features by popular demand, prioritizing requests from commercial customers, and you're the first one asking for this.</p>\n<p>ClickOnce is designed to allow download and installation by non-administrators. To facilitate this, ClickOnce deploys the application to a dynamic location somewhere below the user's temporary folder. However that makes it hard to locate the actual installation folder, as the location differs per machine (also dependent on the OS version).</p>\n<p>I found a workaround online. The ClickOnce installer creates a shortcut in a fixed location in the user's start menu: \"...\\Start Menu\\Programs\\Furore\\Furore FHIR Tools\\Forge for HL7 FHIR STU3.appref-ms\". You can determine the exact location of the current user's start menu programs folder by calling a Windows API. Then simply start/launch the shortcut.</p>",
        "id": 153902981,
        "sender_full_name": "Michel Rutten",
        "timestamp": 1503321196
    },
    {
        "content": "<p>I understand about priorities - why I'm raising it now so you know it's coming. I'll work on that</p>",
        "id": 153902983,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1503321829
    },
    {
        "content": "<p>I'll launch it using that method</p>",
        "id": 153902984,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1503321880
    },
    {
        "content": "<p>Understood. I'll add your feature request to our internal tracker.<br>\nBTW I've tried to launch programmatically via the shortcut and it works on my machine.</p>",
        "id": 153902986,
        "sender_full_name": "Michel Rutten",
        "timestamp": 1503322669
    },
    {
        "content": "<p>k thanks</p>",
        "id": 153902987,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1503322912
    },
    {
        "content": "<p><a href=\"https://stackoverflow.com/questions/8744927/launching-a-clickonce-application-from-another-clickonce-application\" target=\"_blank\" title=\"https://stackoverflow.com/questions/8744927/launching-a-clickonce-application-from-another-clickonce-application\">https://stackoverflow.com/questions/8744927/launching-a-clickonce-application-from-another-clickonce-application</a></p>",
        "id": 153902995,
        "sender_full_name": "Michel Rutten",
        "timestamp": 1503324785
    },
    {
        "content": "<p><a href=\"https://www.mking.io/blog/programmatically-launching-clickonce-applications\" target=\"_blank\" title=\"https://www.mking.io/blog/programmatically-launching-clickonce-applications\">https://www.mking.io/blog/programmatically-launching-clickonce-applications</a></p>",
        "id": 153902996,
        "sender_full_name": "Michel Rutten",
        "timestamp": 1503324804
    },
    {
        "content": "<p>Another good feature is to drag a file onto the app and open it (or onto an IG in the tree for inclusion)</p>",
        "id": 153903663,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1503639035
    },
    {
        "content": "<p>Hi <span class=\"user-mention\" data-user-id=\"191367\">@Brian Postlethwaite</span>, great suggestion! I've added a tracker item.</p>",
        "id": 153903714,
        "sender_full_name": "Michel Rutten",
        "timestamp": 1503662322
    },
    {
        "content": "<p>Hi all, I had created a profile for SmokingUse using forge. Whenever I am validating that profile using Simplifier.Net. It's showing some warnings as shown in the screenshot. Can anyone suggest me how to resolve it<br>\n<a href=\"/user_uploads/10155/LReeyi2mrwWvYnNMZ02M7lUv/warning2.PNG\" target=\"_blank\" title=\"warning2.PNG\">warning2.PNG</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/LReeyi2mrwWvYnNMZ02M7lUv/warning2.PNG\" target=\"_blank\" title=\"warning2.PNG\"><img src=\"/user_uploads/10155/LReeyi2mrwWvYnNMZ02M7lUv/warning2.PNG\"></a></div>",
        "id": 153903917,
        "sender_full_name": "Mounika",
        "timestamp": 1503992211
    },
    {
        "content": "<p>Hi @<strong>Mounika K</strong>, you can safely ignore the warnings about validation rule eld-16, as we recently discovered that the associated fhirpath expression is incorrect. I've submitted a gForge tracker issue, so this will be fixed in the standard.<br>\nThe remaining warning is about an unresolved reference to a valueset. The validator requires access to all the referenced external (conformance) resources. I suggest you upload the referenced valueset to your Simplifier project and retry the profile validation.</p>",
        "id": 153903924,
        "sender_full_name": "Michel Rutten",
        "timestamp": 1504000013
    },
    {
        "content": "<p>Okay <span class=\"user-mention\" data-user-id=\"191336\">@Michel Rutten</span>  Thank you</p>",
        "id": 153903926,
        "sender_full_name": "Mounika",
        "timestamp": 1504000468
    },
    {
        "content": "<p>(deleted)</p>",
        "id": 153904621,
        "sender_full_name": "Mounika",
        "timestamp": 1504696894
    },
    {
        "content": "<p>Hi <span class=\"user-mention\" data-user-id=\"191336\">@Michel Rutten</span> ,<br>\nWhen I am validating the profile in forge at that time I am getting some Exception like that:<br>\n\" No slicing on the root element\"<br>\nIf you have idea about that then ping me.</p>\n<p>Thanks</p>",
        "id": 153920181,
        "sender_full_name": "abhishek gupta",
        "timestamp": 1510919097
    }
]