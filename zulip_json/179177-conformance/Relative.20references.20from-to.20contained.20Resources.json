[
    {
        "content": "<p>I have a Resource A, which contains Resources B, C, &amp; D.  Resource D has references to both B &amp; C but I'm getting the validation error:</p>\n<p>ref-1: SHALL have a contained resource if a local reference is provided ( (url: 1; ids: )) [reference.startsWith('#').not() or (reference.substring(1).trace('url') in %resource.contained.id.trace('ids'))]</p>\n<p>I'm assuming this is because %resource resolves to D rather than A, but D cannot contain B &amp; C because that would be nested containment.</p>",
        "id": 181102711,
        "sender_full_name": "Michael Lawley",
        "timestamp": 1574162890
    },
    {
        "content": "<p>I'm getting a similar error too.</p>",
        "id": 181140653,
        "sender_full_name": "Eric Haas",
        "timestamp": 1574188495
    },
    {
        "content": "<p>Ah, I now see that the correct constraint uses <code>%rootResource</code> not <code>%resource</code>;<br>\nI think this is a HAPI issue.</p>",
        "id": 181149578,
        "sender_full_name": "Michael Lawley",
        "timestamp": 1574194312
    }
]