[
    {
        "content": "<p>Shouldn't there be an invariant on Appointments that doesn't allow end to be before start?</p>",
        "id": 210503906,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1600427019
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> is that a thing for PA WG?</p>",
        "id": 210509436,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1600430925
    },
    {
        "content": "<p>Yes it would be, feel free to log it in jira</p>",
        "id": 210509533,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1600430995
    },
    {
        "content": "<p>its actually messing up some queries/indexes as I've seen some clients actually violate this physically implicit constraint</p>",
        "id": 210509668,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1600431053
    },
    {
        "content": "<p>done - see <a href=\"https://jira.hl7.org/browse/FHIR-28578\">https://jira.hl7.org/browse/FHIR-28578</a></p>",
        "id": 210510055,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1600431309
    },
    {
        "content": "<p>I have some vague memory that there's some workflows where the end is before the start transiently, but I can't remember why. But is a resource like that technically invalid? I'm not convinced</p>",
        "id": 210510225,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1600431411
    },
    {
        "content": "<p>i would say yes - it is technically invalid. One could probably argument that start and end can be equal (in some universe), but i cannot see how an end could be before a start</p>",
        "id": 210510482,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1600431583
    },
    {
        "content": "<p>The precision could be different, so the invariant will need to take that into account</p>",
        "id": 210514029,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1600433915
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> the datatype is an instant ... so I can't  see precision as a problem</p>",
        "id": 210566232,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1600457999
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> <a href=\"/user_uploads/10155/bKAF6Z-LIexFYSrjKy5iwevt/image.png\">image.png</a> is that your case?</p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/bKAF6Z-LIexFYSrjKy5iwevt/image.png\" title=\"image.png\"><img src=\"/user_uploads/10155/bKAF6Z-LIexFYSrjKy5iwevt/image.png\"></a></div>",
        "id": 210566605,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1600458189
    },
    {
        "content": "<p>Instant seems inappropriate - precision is way too high.  <span class=\"user-mention\" data-user-id=\"191367\">@Brian Postlethwaite</span> ?</p>",
        "id": 210569352,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1600459591
    },
    {
        "content": "<p>its been like that since at least DSTU2</p>",
        "id": 210569459,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1600459658
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> change the datatype and I might as well start handing out the pitchforks and torches ;)</p>",
        "id": 210575297,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1600463145
    },
    {
        "content": "<p>You can have your imprecise appointments Lloyd... The rest of us will know when we are expected to arrive.</p>",
        "id": 210595666,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1600487509
    },
    {
        "content": "<p>This should do it: Appointment.start.exists() and Appointment.end.exists() implies Appointment.start &lt;= Appointment.end</p>",
        "id": 210614620,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1600521250
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191367\">@Brian Postlethwaite</span>  PA doesn't think that patients record appointments for themselves as just the day?</p>",
        "id": 210636554,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1600551460
    },
    {
        "content": "<p>that sounds like a presentation thingy</p>",
        "id": 210636626,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1600551558
    },
    {
        "content": "<p>oh? They have to record a full date/time but it isn't shown to them?</p>",
        "id": 210636681,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1600551606
    },
    {
        "content": "<p>well as long as the field is of type instant I can't see they can get around such precision</p>",
        "id": 210636709,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1600551683
    },
    {
        "content": "<p>so I think that use case is about more then just presentation</p>",
        "id": 210636755,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1600551729
    },
    {
        "content": "<p>that might be true - but that goes beyond the issue reported</p>",
        "id": 210636773,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1600551802
    },
    {
        "content": "<p>in respect to the current model - I would say there is a missing invariant</p>",
        "id": 210636788,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1600551841
    },
    {
        "content": "<p>if the current model is subject to be changed ... well thats another case then</p>",
        "id": 210636828,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1600551864
    },
    {
        "content": "<p>You can pencil one in using the requestedperiod which can be as fluffy as you like, or put start and end of the day in the values, and set the minutesduration to be 15 mins, which indicates that there's a slot sometime in that range.</p>",
        "id": 210640140,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1600557773
    }
]