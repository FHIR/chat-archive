[
    {
        "content": "<p>I was testing smart app launch with a new identity server and I found that it is including an unrequested scope in its token response.  I think this is permitted (per <a href=\"https://tools.ietf.org/html/rfc6749\">https://tools.ietf.org/html/rfc6749</a> at least), but it causes Inferno to mark the test failed:</p>\n<blockquote>\n<p>Token response contained unrequested scopes: &lt;bad_scope_here&gt;</p>\n</blockquote>",
        "id": 201879530,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1593020328
    },
    {
        "content": "<p>is inferno being overly-strict, or is this behavior actually prohibited in SMART (or somewhere else)?</p>",
        "id": 201879649,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1593020396
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191676\">@Lee Surprenant</span> did you observe this on Inferno Program or Community and which specific test was it?  Just want to make sure I'm looking at the right thing</p>\n<p>For token refresh the scopes must be a strict subset of the scopes granted in the original launch (<a href=\"https://github.com/onc-healthit/inferno/issues/245\">additional details here on this previous issue</a>).  If you're seeing this on another test then there may be a bug or some other requirement that I have forgotten, but that we should have included in the test description (and should update if we haven't).</p>",
        "id": 201907596,
        "sender_full_name": "Reece Adamson",
        "timestamp": 1593035010
    },
    {
        "content": "<p>This was on community edition Version 2.9.0</p>",
        "id": 201908222,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1593035428
    },
    {
        "content": "<p>I will review that issue in a moment, thanks</p>",
        "id": 201908240,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1593035445
    },
    {
        "content": "<p>ok, i reviewed that isssue and I think it is different</p>",
        "id": 201909992,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1593036623
    },
    {
        "content": "<p>my issue is during the initial token request</p>",
        "id": 201910005,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1593036640
    },
    {
        "content": "<p><code>SLS-08: Token exchange response body contains required information encoded in JSON</code></p>",
        "id": 201910129,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1593036728
    },
    {
        "content": "<p>specifically this part: </p>\n<blockquote>\n<p>scope must be a strict subset of the requested scopes, or empty.</p>\n</blockquote>",
        "id": 201910153,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1593036753
    },
    {
        "content": "<p>I'm not even saying its wrong, I'm just wondering where that requirement is coming from</p>",
        "id": 201910196,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1593036797
    },
    {
        "content": "<p>That is wrong, I believe. As stated/linked, OAuth allows the server to completely override what the client asks for.</p>",
        "id": 201977684,
        "sender_full_name": "Jenni Syed",
        "timestamp": 1593095984
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191676\">@Lee Surprenant</span> Yes. That is bug in Inferno. Do you mind to create a github issue? Thank you.</p>",
        "id": 201980863,
        "sender_full_name": "Yunwei Wang",
        "timestamp": 1593097327
    },
    {
        "content": "<p>thanks jenni and yunwei.  <a href=\"https://github.com/onc-healthit/inferno/issues/464\">https://github.com/onc-healthit/inferno/issues/464</a><br>\ni do think it should verify that you can get some set of SMART scope back, but not sure exactly how that should work</p>",
        "id": 201982956,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1593098280
    }
]