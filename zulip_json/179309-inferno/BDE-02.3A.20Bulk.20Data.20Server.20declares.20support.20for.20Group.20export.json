[
    {
        "content": "<p>This is regarding \"name\": \"group-export\" in capabilitystatement. There is an issue raised in HL7 jira that this should be \"name\": \"export\", please see thread <a href=\"#narrow/stream/179166-implementers/topic/CapStmnt.2Erest.2Eoperation.2Ename.20v.20OpDef.2Ecode\">https://chat.fhir.org/#narrow/stream/179166-implementers/topic/CapStmnt.2Erest.2Eoperation.2Ename.20v.20OpDef.2Ecode</a> . Here there are two issues mentioned which are open with HL7. Any thoughts on this issue and to consider the same in BDE-02?</p>",
        "id": 260274089,
        "sender_full_name": "Sagar Sarvankar",
        "timestamp": 1636034904
    },
    {
        "content": "<p>Inferno BDE-02 checks <code>operation.definition</code> not <code>operation.name</code>. The definition url shall be \"<a href=\"http://hl7.org/fhir/uv/bulkdata/OperationDefinition/group-export\">http://hl7.org/fhir/uv/bulkdata/OperationDefinition/group-export</a>\"</p>",
        "id": 260284931,
        "sender_full_name": "Yunwei Wang",
        "timestamp": 1636039099
    },
    {
        "content": "<p>Thanks Yunwei for a quick response. The existing definition URL we have is \"<a href=\"http://hl7.org/fhir/uv/bulkdata/OperationDefinition/group-export|1.0.1\">http://hl7.org/fhir/uv/bulkdata/OperationDefinition/group-export|1.0.1</a>\"  Does it have to be exact \"<a href=\"http://hl7.org/fhir/uv/bulkdata/OperationDefinition/group-export\">http://hl7.org/fhir/uv/bulkdata/OperationDefinition/group-export</a>\"?</p>",
        "id": 260286538,
        "sender_full_name": "Sagar Sarvankar",
        "timestamp": 1636039750
    },
    {
        "content": "<p>Yes. Inferno checks exact url match. Would you mind to raise a github issue <a href=\"https://github.com/onc-healthit/inferno-program/issues\">here</a>?</p>",
        "id": 260288687,
        "sender_full_name": "Yunwei Wang",
        "timestamp": 1636040527
    },
    {
        "content": "<p>Yes, I will go ahead and create an issue there. But does it mean that \"<a href=\"http://hl7.org/fhir/uv/bulkdata/OperationDefinition/group-export|1.0.1\">http://hl7.org/fhir/uv/bulkdata/OperationDefinition/group-export|1.0.1</a>\" is acceptable and I should mention that in the issue?</p>",
        "id": 260294405,
        "sender_full_name": "Sagar Sarvankar",
        "timestamp": 1636042497
    },
    {
        "content": "<p>According to the definition of FHIR canonical data type, it should be. Inferno does not handle that pattern now.</p>",
        "id": 260297593,
        "sender_full_name": "Yunwei Wang",
        "timestamp": 1636043718
    },
    {
        "content": "<p>Ok, I will create an issue on this. Until the time this issue is open, and during this time we plan to go for Inferno certification, BDE-02 be considered as a pass?</p>",
        "id": 260298032,
        "sender_full_name": "Sagar Sarvankar",
        "timestamp": 1636043888
    },
    {
        "content": "<p>No :( <br>\nYou have to use the url without version to pass BDE-02.</p>",
        "id": 260303048,
        "sender_full_name": "Yunwei Wang",
        "timestamp": 1636045670
    },
    {
        "content": "<p>Ok, thank you Yunwei for your support.</p>",
        "id": 260361768,
        "sender_full_name": "Sagar Sarvankar",
        "timestamp": 1636081799
    },
    {
        "content": "<p>Hello Yunwei,</p>\n<p>I have created an issue (<a href=\"https://github.com/onc-healthit/inferno-program/issues/390\">https://github.com/onc-healthit/inferno-program/issues/390</a>) on this. Please review and also let me know who should be the assignee for this.</p>\n<p>Thank you.</p>",
        "id": 260402524,
        "sender_full_name": "Sagar Sarvankar",
        "timestamp": 1636117733
    },
    {
        "content": "<p>Hello Yunwei,</p>\n<p>Did you get a chance to review the issue (<a href=\"https://github.com/onc-healthit/inferno-program/issues/390\">https://github.com/onc-healthit/inferno-program/issues/390</a>)? Please let me know if you need more information.</p>\n<p>Also, please assign the same to the concerned person.</p>\n<p>Thanks,<br>\nSagar</p>",
        "id": 260617843,
        "sender_full_name": "Sagar Sarvankar",
        "timestamp": 1636350921
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"392120\">@Sagar Sarvankar</span> We are focusing on releasing Inferno Program v1.8 and we will try to resolve this issue asap.</p>",
        "id": 260662614,
        "sender_full_name": "Yunwei Wang",
        "timestamp": 1636381310
    },
    {
        "content": "<p>Yes. Thank you <span class=\"user-mention\" data-user-id=\"191506\">@Yunwei Wang</span></p>",
        "id": 260751976,
        "sender_full_name": "Sagar Sarvankar",
        "timestamp": 1636431290
    },
    {
        "content": "<p>I will be running this test soon, so reading over this issue.  Are we saying that the version at the end of the URL will now be required to have BDE-02 pass?</p>",
        "id": 269132913,
        "sender_full_name": "Michelle Vondercrone",
        "timestamp": 1643042447
    },
    {
        "content": "<p>It is optional. Inferno accept either <code>url</code> or <code>url|version</code> format for canonical url.</p>",
        "id": 269142129,
        "sender_full_name": "Yunwei Wang",
        "timestamp": 1643046258
    },
    {
        "content": "<p>Is there a reason the url has to be that specific one? We're implementing the export operation, but we're planning on using our own Operation Definition to advertise exactly what our server supports. As far as I can tell, this isn't disallowed by the IG.</p>",
        "id": 274403963,
        "sender_full_name": "Madhur Rajendran",
        "timestamp": 1646665517
    },
    {
        "content": "<p><code>resource.operation</code> is [0..*]. You are free to add your own OperationDefinition url in addition to the required base definition.</p>",
        "id": 274407423,
        "sender_full_name": "Yunwei Wang",
        "timestamp": 1646666964
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"197634\">@Madhur Rajendran</span> so you do not support all optional parameters defined in the base bulk data  $export definition (e.g. _type), and would like to make that clear by publishing your own OperationDefinition that clients can use to determine the subset you have implemented?</p>",
        "id": 274430222,
        "sender_full_name": "Robert Scanlon",
        "timestamp": 1646675473
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191506\">@Yunwei Wang</span> the operation would be the same, we'd just be implementing a subset. I think it might be confusing to have the same operation listed twice.</p>\n<p><span class=\"user-mention\" data-user-id=\"192576\">@Robert Scanlon</span> that is correct. Our OperationDefinition would link the official one as the base.</p>\n<p><a href=\"https://www.hl7.org/fhir/operationdefinition-definitions.html#OperationDefinition.base\">https://www.hl7.org/fhir/operationdefinition-definitions.html#OperationDefinition.base</a></p>\n<p>If the test requires the specific url, it would imply that the server fully supports the guide, which ours doesn't. I think the link to the official OperationDefinition from ours should be valid for the test, as we do advertise that we're supporting that specific operation, but just a subset instead of the full thing.</p>",
        "id": 274471538,
        "sender_full_name": "Madhur Rajendran",
        "timestamp": 1646694072
    },
    {
        "content": "<p>Just wanted to bump this. Are there any thoughts about this?  I believe my scenario is still valid according to the FHIR spec, and I don't want my server to end up failing this test because of it.</p>",
        "id": 274980615,
        "sender_full_name": "Madhur Rajendran",
        "timestamp": 1647008287
    },
    {
        "content": "<p>What is the <code>name</code> you put in CS?</p>",
        "id": 274985140,
        "sender_full_name": "Yunwei Wang",
        "timestamp": 1647010364
    },
    {
        "content": "<p>we called it 'group-export'</p>",
        "id": 274990026,
        "sender_full_name": "Madhur Rajendran",
        "timestamp": 1647012528
    },
    {
        "content": "<blockquote>\n<p>If the test requires the specific url, it would imply that the server fully supports the guide, which ours doesn't. I think the link to the official OperationDefinition from ours should be valid for the test, as we do advertise that we're supporting that specific operation, but just a subset instead of the full thing.</p>\n</blockquote>\n<p>This looks right to me...  Are you planning on hosting your definition somewhere that clients could access it?  Technically, I'm not sure if you have to though.</p>",
        "id": 275005840,
        "sender_full_name": "Robert Scanlon",
        "timestamp": 1647019691
    },
    {
        "content": "<p>Definitely do not want to prevent anyone from doing the correct thing, even if it might be a little more work for clients to determine support for that operation (they would have to get your OperationDefinition to know that it is constrained version of the bulk group export operation, and not an unrelated operation, correct?)  In practice though, I doubt this would be a run-time kind of thing that clients check anyhow.  A lot of other precoordination needs to happen.</p>",
        "id": 275006956,
        "sender_full_name": "Robert Scanlon",
        "timestamp": 1647020222
    },
    {
        "content": "<p>We are hosting it at an accessible location, clients should be able to navigate to it through the url in our Capability Statement.<br>\nAnd that is true that they'll have to read the OperationDefinition to see that it's constrained from the bulk export definition, although we might utilize operation.documentation to have it documented on the CapabilityStatement as well.</p>",
        "id": 275246481,
        "sender_full_name": "Madhur Rajendran",
        "timestamp": 1647269527
    },
    {
        "content": "<p>Can you clarify what specifically you mean by implementing a \"subset\"?</p>\n<p>(<span class=\"user-mention\" data-user-id=\"191414\">@Dan Gottlieb</span> fysa)</p>",
        "id": 275256283,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1647273330
    },
    {
        "content": "<p>we're not going to be supporting all the optional parameters of the operation in our implementation. Our group export OperationDefinition will only include the parameters we support. When our implementation is able to support any additional parameters, we can update our OperationDefinition to reflect that.</p>",
        "id": 275279071,
        "sender_full_name": "Madhur Rajendran",
        "timestamp": 1647282656
    },
    {
        "content": "<p>You can ignore the optional parameters and still \"support\" them; you don't need a special operationdefinition to describe that behavior. In general I'd recommend hosing a compliant operation at <code>../$export</code> (you can host your own OperationDefinition or not).</p>",
        "id": 275284304,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1647284834
    },
    {
        "content": "<p>We're still using Group/:id/$export as the path for our operation. (That was a bug in my CS, using the value from <a href=\"http://OperationDefinition.id\">OperationDefinition.id</a>, instead of OperationDefinition.code, I'll get that updated.)</p>",
        "id": 275383489,
        "sender_full_name": "Madhur Rajendran",
        "timestamp": 1647355945
    },
    {
        "content": "<p>Is this question resolved then, without needing to alter our tests?  It seems like <span class=\"user-mention\" data-user-id=\"191315\">@Josh Mandel</span> is stating that you shouldn't create your OperationDefinition in this case.  And in looking at the <a href=\"https://build.fhir.org/ig/HL7/bulk-data/OperationDefinition-group-export.html\">documentation for the standard group-export definition</a>, it states how servers should respond if they do not support the optional parameters, which isn't quite the same thing but at least ensures consistent behavior if a parameter isn't supported by a server (e.g. \"A server that is unable to support _type SHOULD return an error and FHIR OperationOutcome resource so the client can re-submit a request omitting the _type parameter.\").  You could still create your own constrained OperationOutcome it if you want, but then have the server respond to that operation somewhere other than Group/:id/$export, and leave Group/:id/$export for the operation that points to the standard definition.  Did I get that right?</p>",
        "id": 275434103,
        "sender_full_name": "Robert Scanlon",
        "timestamp": 1647377818
    },
    {
        "content": "<p>Formally, you can host any operations at any mount points you choose -- including operations derived from others, operations that just look a lot like others without any formal derivation, and totally independent operations).</p>\n<p>Practically speaking though, I expect that clients are not going to be very sophisticated and will just call dollar sign export, so it's pretty important to just make that work. From this practical perspective it doesn't much matter what operation definition you reference, as long as the behavior matches what clients are trying to exercise.</p>",
        "id": 275434661,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1647378081
    },
    {
        "content": "<p>I guess I haven't been fully transparent about what our OperationDefinition entails (I didn't want to focus on a particular server's implementation, but rather what is possible). We're planning on supporting a subset of the optional parameters, but we're also planning on supporting some additional parameters from a more recent version of the Bulk IG as well. In this case, our Operation doesn't fully correspond to any particular version of the IG. </p>\n<p>The flexibility of having our own OperationDefinition is invaluable to us, since we'll be publishing the exact capability of our server, while also ensuring that we can advertise that the Operation is derived from the IG. Even if clients don't call into the OperationDefinition, we'd prefer it to be as accurate as possible.</p>",
        "id": 275515852,
        "sender_full_name": "Madhur Rajendran",
        "timestamp": 1647440032
    },
    {
        "content": "<p>I guess I haven't been fully transparent about what our OperationDefinition entails (I didn't want to focus on a particular server's implementation, but rather what is possible). We're planning on supporting a subset of the optional parameters, but we're also planning on supporting some additional parameters from a more recent version of the Bulk IG as well. In this case, our Operation doesn't fully correspond to any particular version of the IG. </p>\n<p>The flexibility of having our own OperationDefinition is invaluable to us, since we'll be publishing the exact capability of our server, while also ensuring that we can advertise that the Operation is derived from the IG. Even if clients don't call into the OperationDefinition, we'd prefer it to be as accurate as possible.</p>",
        "id": 275515860,
        "sender_full_name": "Madhur Rajendran",
        "timestamp": 1647440035
    },
    {
        "content": "<p>As far as the test goes, if it's supposed to be testing that the Server supports a Group Export operation that is compliant with the IG, then an OperationDefinition with the OperationDefinition.base link to the standard group-export definition should also be valid, right?</p>\n<p>The way the test currently is implemented, it seems like it's testing that the server must only support the standard group-export operation specifically.</p>",
        "id": 275516716,
        "sender_full_name": "Madhur Rajendran",
        "timestamp": 1647440366
    },
    {
        "content": "<p>Shall I raise an issue in the <a href=\"https://github.com/onc-healthit/onc-certification-g10-test-kit/issues\">github repo</a>?</p>",
        "id": 275659147,
        "sender_full_name": "Madhur Rajendran",
        "timestamp": 1647526650
    },
    {
        "content": "<p>Yes please.</p>",
        "id": 275676872,
        "sender_full_name": "Yunwei Wang",
        "timestamp": 1647532864
    }
]