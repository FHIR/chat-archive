[
    {
        "content": "<p>I am having an issue with inferno test for Immunizations and am hoping you can tell me what is going wrong. The error I am receiving is:<br>\nThe code \"49281-0286-01\" is not valid in the system <a href=\"http://hl7.org/fhir/sid/ndc\">http://hl7.org/fhir/sid/ndc</a></p>\n<p>The json code element for the resource is:</p>\n<div class=\"codehilite\"><pre><span></span><code>&quot;vaccineCode&quot;: {\n  &quot;coding&quot;: [\n    {\n      &quot;system&quot;: &quot;http://hl7.org/fhir/sid/cvx&quot;,\n      &quot;code&quot;: &quot;106&quot;,\n      &quot;display&quot;: &quot;Tetanus and diphtheria toxoids&quot;\n    },\n    {\n      &quot;system&quot;: &quot;http://hl7.org/fhir/sid/ndc&quot;,\n      &quot;code&quot;: &quot;49281-0286-01&quot;,\n      &quot;display&quot;: &quot;Tetanus and diphtheria toxoids&quot;\n    }\n  ]\n},\n</code></pre></div>\n\n\n<p>US Core says NDC should be provided<br>\n<a href=\"https://build.fhir.org/ig/HL7/US-Core-R4/StructureDefinition-us-core-immunization.html\">https://build.fhir.org/ig/HL7/US-Core-R4/StructureDefinition-us-core-immunization.html</a></p>\n<p>The code exists in the concept map<br>\n<a href=\"https://build.fhir.org/ig/HL7/US-Core-R4/ConceptMap-ndc-cvx.html\">https://build.fhir.org/ig/HL7/US-Core-R4/ConceptMap-ndc-cvx.html</a></p>\n<p>And the provided example uses the same code system URL.<br>\n<a href=\"https://build.fhir.org/ig/HL7/US-Core-R4/Immunization-imm-1.json.html\">https://build.fhir.org/ig/HL7/US-Core-R4/Immunization-imm-1.json.html</a></p>",
        "id": 203724256,
        "sender_full_name": "Matthew Dugal",
        "timestamp": 1594651687
    },
    {
        "content": "<p>I'm not sure it makes a difference in this case (it probably doesn't), but make sure you are looking at US Core v3.1.0 (<a href=\"http://hl7.org/fhir/us/core/STU3.1/\">http://hl7.org/fhir/us/core/STU3.1/</a>), not the version on <a href=\"http://build.fhir.org\">build.fhir.org</a>.</p>",
        "id": 203724608,
        "sender_full_name": "Robert Scanlon",
        "timestamp": 1594651871
    },
    {
        "content": "<p>I double checked and this applies to v3.1.0 (so no difference)</p>",
        "id": 203727309,
        "sender_full_name": "Robert Scanlon",
        "timestamp": 1594653134
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191473\">@Matthew Dugal</span> are you getting an error or a warning?  I'd expect a warning here because <code>vaccineCode</code> has an extensible binding to a ValueSet which only includes codes from <a href=\"http://hl7.org/fhir/sid/cvx\">http://hl7.org/fhir/sid/cvx</a>.  Inferno will throw warnings on any code that is outside a ValueSet for an element for an extensible binding so that a user or tester can review.</p>",
        "id": 203727324,
        "sender_full_name": "Reece Adamson",
        "timestamp": 1594653142
    },
    {
        "content": "<p>Inferno does not evaluate the ConceptMap provided to try and do a more automated assessment of whether a code could have been covered by a concept existing in this extensible ValueSet (in which case you might get a failure), but this is the only ConceptMap provided in US Core so they are just generally handled as warnings at this point.</p>",
        "id": 203727498,
        "sender_full_name": "Reece Adamson",
        "timestamp": 1594653238
    },
    {
        "content": "<p>This appears to be an error with a red X. <br>\nError Message: Invalid Immunization: Immunization.vaccineCode.coding[1]: The code \"49281-0286-01\" is not valid in the system <a href=\"http://hl7.org/fhir/sid/ndc\">http://hl7.org/fhir/sid/ndc</a>; The code provided (<a href=\"http://hl7.org/fhir/sid/ndc#49281-0286-01\">http://hl7.org/fhir/sid/ndc#49281-0286-01</a>) is not valid in the value set All codes known to the system for '<a href=\"http://hl7.org/fhir/sid/ndc#49281-0286-01\">http://hl7.org/fhir/sid/ndc#49281-0286-01</a>'</p>",
        "id": 203727589,
        "sender_full_name": "Matthew Dugal",
        "timestamp": 1594653270
    },
    {
        "content": "<p>ahh I see, this looks like a validation against the code system itself.  Are you running on <a href=\"http://inferno.healthit.gov\">inferno.healthit.gov</a> or locally?</p>",
        "id": 203727937,
        "sender_full_name": "Reece Adamson",
        "timestamp": 1594653435
    },
    {
        "content": "<p>Running against the public <a href=\"http://inferno.healthit.gov\">inferno.healthit.gov</a>.</p>",
        "id": 203727995,
        "sender_full_name": "Matthew Dugal",
        "timestamp": 1594653462
    },
    {
        "content": "<p>Investigating now...  I think we might have a bug when evaluating codes when we don't have the codesystem loaded to check against (in which case there should just be a warning that the code wasn't checked).  Thanks for reporting this and we'll update once we know more!</p>",
        "id": 203735222,
        "sender_full_name": "Reece Adamson",
        "timestamp": 1594656739
    },
    {
        "content": "<p>I ran the same patient test across the Public Program Edition and Public Community Edition(US Core v3.1.0).<br>\nThe Community edition is the one giving the below Error; Program edition is good and conforms to the U.S Core profile.<br>\nImmunization.vaccineCode: The code \"49281-0710-40\" is not valid in the system <a href=\"http://hl7.org/fhir/sid/ndc\">http://hl7.org/fhir/sid/ndc</a>;</p>",
        "id": 203736832,
        "sender_full_name": "Vishak OS",
        "timestamp": 1594657633
    },
    {
        "content": "<p>Thanks <span class=\"user-mention\" data-user-id=\"194413\">@Vishak OS</span>!  <span class=\"user-mention\" data-user-id=\"191473\">@Matthew Dugal</span> were you testing against Community Edition in this case as well?  Might be worth testing against Program if possible as some of the bug fixes and features in Program are not present in Community at this time.</p>",
        "id": 203740282,
        "sender_full_name": "Reece Adamson",
        "timestamp": 1594659514
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"197651\">@Reece Adamson</span> : We tried to check with the Community Edition initially, since couple of the optional tests are present in the Community Edition compared to the program edition.<br>\nEg:  Immunization search by patient+status</p>\n<p>btw, <span class=\"user-mention\" data-user-id=\"191473\">@Matthew Dugal</span>  and I work on the same team.</p>",
        "id": 203744426,
        "sender_full_name": "Vishak OS",
        "timestamp": 1594661438
    }
]