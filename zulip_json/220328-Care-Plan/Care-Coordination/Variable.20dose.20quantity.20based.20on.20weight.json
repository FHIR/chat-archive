[
    {
        "content": "<p>Hello everyone,<br>\nI'm trying to define an orderset with a PlanDefinition. I'm not sure how to represent a medication with a dose quantity that should be calculated using existing patient information. For example, I have a drug whose dose quantity is supposed to be 25 mg/kg of patient weight. Has anyone done this before and have an example? Or does anyone have any ideas?</p>\n<p>I've asked in <a class=\"stream\" data-stream-id=\"179166\" href=\"/#narrow/stream/179166-implementers\">#implementers</a> and was told this might be a better stream to ask :)</p>\n<p>I've looked at examples and see that ActivityDefinition.dosage, ActivityDefinition.observation, Requirement, and ActivityDefinition.dynamicValue might be useful. But I'm not sure how to use them. If anyone has experience with this, some help would be greatly appreciated!</p>",
        "id": 231235061,
        "sender_full_name": "Yi Tang",
        "timestamp": 1616353824
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191359\">@Bryn Rhodes</span></p>",
        "id": 235848342,
        "sender_full_name": "Jay Lyle",
        "timestamp": 1619187716
    },
    {
        "content": "<p>why not use the MedicationRequest for that? I believe Dosage has exactly the provisions for that</p>",
        "id": 235851718,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1619188875
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191832\">@Jose Costa Teixeira</span> , because MedicationRequest is a patient-specific resource. We can use ActivityDefinition to say \"when you create a MedicationRequest for a patient, calculate the dose as 25 mg/kg of patient weight\"</p>",
        "id": 235907436,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1619211577
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"342809\">@Yi Tang</span>, the dynamicValue elements allow you to specify calculated values for the elements of the request resource that is produced by the ActivityDefinition. In this case, you want to specify the dosage.doseAndRate.dose as \"25 mg/kg of patient weight\", so something like:</p>\n<div class=\"codehilite\"><pre><span></span><code>{\n  &quot;path&quot;: &quot;dosage.doseAndRate.dose&quot;,\n  &quot;expression&quot;: {\n    &quot;language&quot;: &quot;text/cql&quot;,\n    &quot;expression&quot;: &quot;25 mg * ([Observation: \\&quot;http://loinc.org#29463-7\\&quot;] O return O.value)&quot;\n  }\n}\n</code></pre></div>",
        "id": 235909612,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1619212135
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191359\">Bryn Rhodes</span> <a href=\"#narrow/stream/220328-Care-Plan.2FCare.20Coordination/topic/Variable.20dose.20quantity.20based.20on.20weight/near/235907436\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"191832\">Jose Costa Teixeira</span> , because MedicationRequest is a patient-specific resource. We can use ActivityDefinition to say \"when you create a MedicationRequest for a patient, calculate the dose as 25 mg/kg of patient weight\"</p>\n</blockquote>\n<p>Right, I didn't understand that, sorry</p>",
        "id": 235911099,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1619212595
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191359\">@Bryn Rhodes</span> Thank you for the example. An example like this was what I was looking for. So it looks like in the expression, we can have a calculation using a certain observation.</p>",
        "id": 236174752,
        "sender_full_name": "Yi Tang",
        "timestamp": 1619444099
    }
]