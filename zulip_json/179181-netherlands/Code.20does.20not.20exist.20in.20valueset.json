[
    {
        "content": "<p>Hi,</p>\n<p>I am validating a Practitioner resource with simplifier, scope nictiz.fhir.nl.stu3.zib2017 2.1.6 STU3<br>\nsimplifier now generates an error for the telecom extension for mobile phone (see below)<br>\nDoes this make sense?</p>\n<p>CodeInvalid : Code 'MC' from system '<a href=\"http://terminology.hl7.org/CodeSystem/v3-AddressUse\">http://terminology.hl7.org/CodeSystem/v3-AddressUse</a>' does not exist in valueset '<a href=\"http://decor.nictiz.nl/fhir/ValueSet/2.16.840.1.113883.2.4.3.11.60.40.2.20.6.1--20171231000000\">http://decor.nictiz.nl/fhir/ValueSet/2.16.840.1.113883.2.4.3.11.60.40.2.20.6.1--20171231000000</a>'<br>\nPractitioner.telecom[0].extension[0].valueCodeableConcept[0]</p>",
        "id": 257325820,
        "sender_full_name": "Piotr Chabot Stadhouders",
        "timestamp": 1634112026
    },
    {
        "content": "<p>At first sight it looks like a codesytem uri is used that is introduced since R4(considering the '..terminology.hl7.org...') Are you sure you have indeed the right system?</p>\n<p>It should be <a href=\"http://hl7.org/fhir/v3/AddressUse\">http://hl7.org/fhir/v3/AddressUse</a> for STU3</p>",
        "id": 257348629,
        "sender_full_name": "Ardon Toonstra",
        "timestamp": 1634124293
    },
    {
        "content": "<p>Hi Ardon,</p>\n<p>Since a couple of weeks I use NTS (Nationale Terminologie Server) to get the valuesets<br>\nWhen I do a GET on TelecomTypeCodelijst version 2017-12-31T00:00:00, the response has system '<a href=\"http://terminology.hl7.org/CodeSystem/v3-AddressUse\">http://terminology.hl7.org/CodeSystem/v3-AddressUse</a>' for code 'MC' and 'PG'</p>",
        "id": 257501111,
        "sender_full_name": "Piotr Chabot Stadhouders",
        "timestamp": 1634201447
    },
    {
        "content": "<p>Another thing I don't get : <br>\nWhen I validate an medicationRequest, it returns a lot of warnings<br>\nFor example, I generate an 'asNeededCodeableConcept' with value \"1144\" and system \"urn:oid:2.16.840.1.113883.2.4.4.5\"<br>\nThe validator now returns \"None of the codings provided are in the value set <a href=\"http://decor.nictiz.nl/fhir/ValueSet/2.16.840.1.113883.2.4.3.11.60.40.2.9.12.4--20171231000000\">http://decor.nictiz.nl/fhir/ValueSet/2.16.840.1.113883.2.4.3.11.60.40.2.9.12.4--20171231000000</a>\"<br>\nHowever, \"1144\" is a valid value<br>\nHas this maybe something to do with the fact that the mentioned valueset is in XML format while I am generating JSON?<br>\nIn NTS the Identifier of is ZonodigCriteriumCodelijst is \"667592bd-6fd7-4ddc-965a-d0d654a111cd\" by the way, and not \"2.16.840.1.113883.2.4.3.11.60.40.2.9.12.4--20171231000000\"</p>",
        "id": 257504170,
        "sender_full_name": "Piotr Chabot Stadhouders",
        "timestamp": 1634203020
    },
    {
        "content": "<p>AFAIK the Nationale Terminologieserver does only implement FHIR R4, while the zib2017 package is STU3 based. I don't think you can use the ValueSets from the NTS in combination with the zib2017 package.</p>",
        "id": 257533885,
        "sender_full_name": "Pieter Edelman",
        "timestamp": 1634217851
    },
    {
        "content": "<blockquote>\n<p>For example, I generate an 'asNeededCodeableConcept' with value \"1144\" and system \"urn:oid:2.16.840.1.113883.2.4.4.5\"<br>\nThe validator now returns \"None of the codings provided are in the value set <a href=\"http://decor.nictiz.nl/fhir/ValueSet/2.16.840.1.113883.2.4.3.11.60.40.2.9.12.4--20171231000000\">http://decor.nictiz.nl/fhir/ValueSet/2.16.840.1.113883.2.4.3.11.60.40.2.9.12.4--20171231000000</a>\"</p>\n</blockquote>\n<p>1144 is a valid code, but urn:oid:2.16.840.1.113883.2.4.4.5 is not the corresponding system -- this should be <a href=\"https://referentiemodel.nhg.org/tabellen/nhg-tabel-25-gebruiksvoorschrift#aanvullend-numeriek\">https://referentiemodel.nhg.org/tabellen/nhg-tabel-25-gebruiksvoorschrift#aanvullend-numeriek</a></p>",
        "id": 257534633,
        "sender_full_name": "Pieter Edelman",
        "timestamp": 1634218150
    },
    {
        "content": "<p>XML vs. JSON shouldn't be a problem, as is the id (not identifier), ValueSets are identified by the canonical URL.</p>",
        "id": 257535083,
        "sender_full_name": "Pieter Edelman",
        "timestamp": 1634218302
    },
    {
        "content": "<p>Hi Pieter,</p>\n<p>When I retrieve version 2017-12-31T00:00:00 of the valueSet resource <a href=\"https://referentiemodel.nhg.org/tabellen/nhg-tabel-25-gebruiksvoorschrift#aanvullend-numeriek\">https://referentiemodel.nhg.org/tabellen/nhg-tabel-25-gebruiksvoorschrift#aanvullend-numeriek</a> is indeed the system, so this looks good. Until now we used the OID's as system value, and I thought this should be no problem (in Zibs2017)</p>",
        "id": 257535729,
        "sender_full_name": "Piotr Chabot Stadhouders",
        "timestamp": 1634218553
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"216303\">@Pieter Edelman</span> <br>\nAnd what about this one?<br>\n'<a href=\"http://terminology.hl7.org/CodeSystem/v3-AddressUse\">http://terminology.hl7.org/CodeSystem/v3-AddressUse</a>' for code 'MC' and 'PG'</p>",
        "id": 257535939,
        "sender_full_name": "Piotr Chabot Stadhouders",
        "timestamp": 1634218629
    },
    {
        "content": "<blockquote>\n<p>Until now we used the OID's as system value, and I thought this should be no problem (in Zibs2017)</p>\n</blockquote>\n<p>Well, this is actually a bit of a nasty topic. FHIR requires a canonical URI, which is defined in formally for use in a FHIR context. An OID is not a URI, it is another identification mechanism altogether. You _can_ create OID based URI's, but this is (often) not the formally defined canonical URI for use within FHIR. So, taking a code system OID and prepending it with <code>urn:oid:</code> is usually not the way to go.</p>",
        "id": 257542319,
        "sender_full_name": "Pieter Edelman",
        "timestamp": 1634220921
    },
    {
        "content": "<blockquote>\n<p>And what about this one?<br>\n'<a href=\"http://terminology.hl7.org/CodeSystem/v3-AddressUse\">http://terminology.hl7.org/CodeSystem/v3-AddressUse</a>' for code 'MC' and 'PG'</p>\n</blockquote>\n<p>This is a bit of a nasty topic as well. \"<a href=\"http://terminology.hl7.org\">http://terminology.hl7.org</a>\" is the URL base adopted in FHIR R4 for terminology, while until STU3 the base \"<a href=\"http://hl7.org/fhir/\">http://hl7.org/fhir/</a>\" is used. If you use an R4 CodeSystem or ValueSet resource, it should use this new format, but any STU3-based resources should use the old format. I suspect that you're exporting an R4 resource from the NTS and base your instance on these resources. If you're validating against the STU3-based zib2017 package, it expects the old format: <a href=\"https://simplifier.net/packages/nictiz.fhir.nl.stu3.zib2017/2.1.6/files/406653\">https://simplifier.net/packages/nictiz.fhir.nl.stu3.zib2017/2.1.6/files/406653</a></p>",
        "id": 257543845,
        "sender_full_name": "Pieter Edelman",
        "timestamp": 1634221475
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"216303\">@Pieter Edelman</span> </p>\n<p>I export the 2017-12-31T00:00:00 version of TelecomTypeCodelijst, with id 8a4b6a11-973d-4a77-8d84-5efe8f2609c6</p>\n<p>This generates \"<a href=\"http://terminology.hl7.org/CodeSystem/v3-AddressUse\">http://terminology.hl7.org/CodeSystem/v3-AddressUse</a>\" for system for the values \"MC\" and \"PG\"<br>\nSo, I think it is a \"bug\" in the valueSet resource</p>",
        "id": 257692512,
        "sender_full_name": "Piotr Chabot Stadhouders",
        "timestamp": 1634302403
    },
    {
        "content": "<p>Yes, the Nationale Terminologieserver only supports FHIR R4, you cannot use this in the context of the STU3 based zib2017 package. All ValueSets are included in the package (in STU3 format).</p>",
        "id": 257693971,
        "sender_full_name": "Pieter Edelman",
        "timestamp": 1634303029
    }
]