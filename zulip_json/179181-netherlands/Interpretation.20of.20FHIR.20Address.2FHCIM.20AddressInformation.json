[
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"197710\">@Yuri Bonanno</span> </p>\n<blockquote>\n<p>This relates to <a href=\"https://bits.nictiz.nl/browse/MM-86\" target=\"_blank\" title=\"https://bits.nictiz.nl/browse/MM-86\">BITS#MM-86</a>:</p>\n<p>Is AddressType of AddressInformation equal to visit address when Address.use = ‘home’ AND Address.type = 'physical' AND Address.use.extension = 'PHYS'? Or is it a visit address when Address.use = ‘home’ OR Address.type = 'physical' OR Address.use.extension = 'PHYS'?</p>\n</blockquote>\n<p>Ok these are the harder questions. The mapping in the <a href=\"https://simplifier.net/NictizSTU3-Zib2017/nl-core-address\" target=\"_blank\" title=\"https://simplifier.net/NictizSTU3-Zib2017/nl-core-address\">nl-core-address</a> assumes that people upon creation of a FHIR instance conform to the rules outlined in the profile. <strong>The mapping outlined in the profile assumes AND</strong>.</p>\n<p>Upon import you probably need to be more defensive because not every sending system might have complied with the mapping rules. You <strong>SHOULD</strong> assume that any instance/context that claims conformance to the nl-core-address in some way actually does, but maybe your application functions in more contexts in the real world.</p>\n<p>Secondly:  even though we all strive towards standardization there is common wisdom to <em>be strict in what you send, be flexible in what you receive</em>. This means that you probably want to cater for what to do when the AD_use extension was not used for example. In normal circumstances, not being able to parse the address into an HCIM is not worth refusal of a MedicationRequest as a whole. How much flexibility in the import you aim for is probably something you decide on a case by case basis.</p>",
        "id": 154026311,
        "sender_full_name": "Alexander Henket",
        "timestamp": 1545212597
    },
    {
        "content": "<blockquote>\n<p><span class=\"user-mention\" data-user-id=\"197710\">@Yuri Bonanno</span> </p>\n<blockquote>\n<p>This relates to <a href=\"https://bits.nictiz.nl/browse/MM-86\" target=\"_blank\" title=\"https://bits.nictiz.nl/browse/MM-86\">BITS#MM-86</a>:</p>\n<p>Is AddressType of AddressInformation equal to visit address when Address.use = ‘home’ AND Address.type = 'physical' AND Address.use.extension = 'PHYS'? Or is it a visit address when Address.use = ‘home’ OR Address.type = 'physical' OR Address.use.extension = 'PHYS'?</p>\n</blockquote>\n<p>Ok these are the harder questions. The mapping in the <a href=\"https://simplifier.net/NictizSTU3-Zib2017/nl-core-address\" target=\"_blank\" title=\"https://simplifier.net/NictizSTU3-Zib2017/nl-core-address\">nl-core-address</a> assumes that people upon creation of a FHIR instance conform to the rules outlined in the profile. <strong>The mapping outlined in the profile assumes AND</strong>.</p>\n</blockquote>\n<p><span class=\"user-mention\" data-user-id=\"191375\">@Alexander Henket</span> I am looking at the touchstone response for patient-XML from Nictiz right now, and according to the answer on <a href=\"https://bits.nictiz.nl/browse/MM-86\" target=\"_blank\" title=\"https://bits.nictiz.nl/browse/MM-86\">BITS#MM-86</a>, there is no AddressType to be discerned. The address.use = 'home', address.type = 'both' and address.extension[official] = true but there is no address.use.extension so there is no value for addressType, the last does not comply with nictiz standards <a href=\"https://zibs.nl/wiki/AddressInformation-v1.0(2018EN)\" target=\"_blank\" title=\"https://zibs.nl/wiki/AddressInformation-v1.0(2018EN)\">Nictiz AddressInformation</a>. According to these standards there should be an AddressType.</p>\n<p>Is this a mistake in the XML or should the mapping be OR instead of AND?</p>",
        "id": 154027134,
        "sender_full_name": "Yuri Bonanno",
        "timestamp": 1545901182
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"192301\">@Ardon Toonstra</span> could this be a content problem in what we have loaded in Touchstone? I'm pretty sure the profile is not the issue</p>",
        "id": 154027180,
        "sender_full_name": "Alexander Henket",
        "timestamp": 1545990581
    },
    {
        "content": "<p>I believe this is the XML you are referring to:</p>\n<p>&lt;address&gt;<br>\n        &lt;extension url=\"<a href=\"http://fhir.nl/fhir/StructureDefinition/nl-core-address-official\" target=\"_blank\" title=\"http://fhir.nl/fhir/StructureDefinition/nl-core-address-official\">http://fhir.nl/fhir/StructureDefinition/nl-core-address-official</a>\"&gt;<br>\n            &lt;valueBoolean value=\"true\"/&gt;<br>\n        &lt;/extension&gt;<br>\n        &lt;use value=\"home\"/&gt;<br>\n        &lt;type value=\"both\"/&gt;<br>\n        &lt;line value=\"Knolweg 1002\"&gt;<br>\n            &lt;extension url=\"<a href=\"http://hl7.org/fhir/StructureDefinition/iso21090-ADXP-streetName\" target=\"_blank\" title=\"http://hl7.org/fhir/StructureDefinition/iso21090-ADXP-streetName\">http://hl7.org/fhir/StructureDefinition/iso21090-ADXP-streetName</a>\"&gt;<br>\n                &lt;valueString value=\"Knolweg\"/&gt;<br>\n            &lt;/extension&gt;<br>\n            &lt;extension url=\"<a href=\"http://hl7.org/fhir/StructureDefinition/iso21090-ADXP-houseNumber\" target=\"_blank\" title=\"http://hl7.org/fhir/StructureDefinition/iso21090-ADXP-houseNumber\">http://hl7.org/fhir/StructureDefinition/iso21090-ADXP-houseNumber</a>\"&gt;<br>\n                &lt;valueString value=\"1002\"/&gt;<br>\n            &lt;/extension&gt;<br>\n        &lt;/line&gt;<br>\n   .......<br>\n    &lt;/address&gt;</p>\n<p>Indeed, the XML does not contain an address.use.extension (I believe a lot of our example do not).  Given this example, the Zib addressType should be HP - Primary Home (Officieel adres) based on .extension[official] = True AND .use = home.</p>",
        "id": 154027200,
        "sender_full_name": "Ardon Toonstra",
        "timestamp": 1546013737
    },
    {
        "content": "<p>The address.use.extension definition states \"Further define the address use with the exact HCIM code. Mostly relevant to distinguish between different types of temporary addresses.\"  If a specific 'vakantie' of 'tijdelijk' address needs to be communicated, the  .use.extension is required to provide the exact meaning.</p>",
        "id": 154027201,
        "sender_full_name": "Ardon Toonstra",
        "timestamp": 1546014076
    },
    {
        "content": "<p>However, I do notice that in some of the addresses in our examples the entire addressType information is missing. We will adress this.</p>",
        "id": 154027202,
        "sender_full_name": "Ardon Toonstra",
        "timestamp": 1546014133
    },
    {
        "content": "<blockquote>\n<p>Indeed, the XML does not contain an address.use.extension (I believe a lot of our example do not).  Given this example, the Zib addressType should be HP - Primary Home (Officieel adres) based on .extension[official] = True AND .use = home.</p>\n</blockquote>\n<p>That is indeed the XML i am working on <span class=\"user-mention\" data-user-id=\"192301\">@Ardon Toonstra</span> .  Thanks for the answer but now I still feel that the description on the simplifier for address is not self explanatory.</p>\n<blockquote>\n<p><em>There is a variety of postal address formats defined around the world. This format defines a superset that is the basis for all addresses around the world and adds all relevant components to express Dutch addresses.</em></p>\n<p><em>A Dutch Address is a proper FHIR Address. Systems that do not understand any of the extensions, will be able to render and work with a Dutch address. Dutch addresses make certain address parts separately communicable. These parts are required for use in true Dutch systems when dealing with Dutch addresses, but may not have value for international systems when information gets sent abroad.</em></p>\n<p><em>To have true compatibility an implementer SHOULD use the core Address parts as intended. To have addresses work for Dutch context, the implementer SHOULD in addition use the extension elements.</em></p>\n<p><em>The HCIM defines certain address types in the AdresSoortCodelijst. These do not all have a one to one mapping in the FHIR Address datatype. The following explains how to deal with that.</em></p>\n<p><em>HCIM Postal Address maps to Address.type 'postal';</em></p>\n<p><strong>HCIM Primary Home Address maps to Address.extension:official 'true' + Address.use 'home' + Address.use.extension 'HP';</strong></p>\n<p><em>HCIM Visit Address (Woon-/verblijfadres) maps to Address.use 'home' + Address.type 'physical' + Address.use.extension 'PHYS';</em></p>\n<p><em>HCIM Temporary Address maps to Address.use 'temp';</em></p>\n<p><em>HCIM Work Place Address maps to Address.use 'work';</em></p>\n<p><em>HCIM Vacation Home Address maps to Address.type 'temp' + Address.use.extension 'HV'.</em></p>\n<p><em>If Address.type is \"both\" then this is to be understood as a dual purpose address (postal and physical). Systems that support importing it like this are encouraged to do so, otherwise they may need to import this as two separate addresses.</em></p>\n</blockquote>\n<p>In bold you can see the values that should be defined in the FHIR-message.  The way it is worded here, it looks like Address.Use.Extension is a value that MUST be defined with a value of HP in order to get the <em>Primary Home</em> value for AddressType, which is apparently not the case. Maybe word it as \"Optional(+ Address.use.extension 'PHYS') or something similar.</p>\n<p>Just to be sure: The AddressType is  thus only <em>Primary Home</em> when and only when <em>official = 'true' AND Address.use = 'home/both'</em>?</p>\n<p>Also: if Address.use = 'temp' and Address.type = 'physical', is the HCIM value <em>Visit Address</em> and <em>Temporary Address</em>?</p>",
        "id": 154165411,
        "sender_full_name": "Yuri Bonanno",
        "timestamp": 1546420508
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"197710\">@Yuri Bonanno</span> , thanks for pointing out the description, and your suggestion. Perhaps I was too fast with my reply and the XML snippet is indeed incorrect to our own specifications. In my opinion, the .use.extension element is a bit redundant in the mapping for an official address, where the \"extension:official\" is used. We will have a closer look and get back to you.</p>",
        "id": 154168050,
        "sender_full_name": "Ardon Toonstra",
        "timestamp": 1546425014
    },
    {
        "content": "<p>Furthermore, in <a href=\"https://bits.nictiz.nl/browse/MM-86\" target=\"_blank\" title=\"https://bits.nictiz.nl/browse/MM-86\">BITS#MM-86</a> I had one more question which was not answered.</p>\n<blockquote>\n<p><em>HCIM Vacation Home Address maps to Address.type 'temp' + Address.use.extension 'HV'.</em></p>\n</blockquote>\n<p>Address.type cannot have the value 'temp', According to <a href=\"https://simplifier.net/NictizSTU3-Zib2017/nl-core-address\" target=\"_blank\" title=\"https://simplifier.net/NictizSTU3-Zib2017/nl-core-address\">Simplifier</a>. Is this correct?</p>",
        "id": 154168080,
        "sender_full_name": "Yuri Bonanno",
        "timestamp": 1546425093
    },
    {
        "content": "<p>Hi <span class=\"user-mention\" data-user-id=\"197710\">@Yuri Bonanno</span> ,<br>\nI replied in MM-86. It indeed concerns a AND mapping. In addition, you are correct regarding the error in the mapping description for HCIM Vacation Home Address. We fixed it!</p>",
        "id": 154585710,
        "sender_full_name": "Ardon Toonstra",
        "timestamp": 1546882574
    }
]