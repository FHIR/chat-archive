[
    {
        "content": "<p>Hi there,<br>\nNCPDP is a standard for medication dispenses we pull from outpatient pharmacies. We want to encode this data back into FHIR format properly. We’ve done so for “normal” medications already.<br>\nCompound medications are trickier. We see something like this:</p>",
        "id": 271995126,
        "sender_full_name": "Brendan Keeler",
        "timestamp": 1644940893
    },
    {
        "content": "<p><a href=\"/user_uploads/10155/QCPogs-UrVTanKLXxrwTpvGW/CompoundMed.xml\">CompoundMed.xml</a></p>",
        "id": 271996130,
        "sender_full_name": "Brendan Keeler",
        "timestamp": 1644941259
    },
    {
        "content": "<p>In order to represent the compounded medication, we must use the FHIR Medication resource as a contained resource. Here’s an example compounded Medication:</p>",
        "id": 271996295,
        "sender_full_name": "Brendan Keeler",
        "timestamp": 1644941316
    },
    {
        "content": "<p><code>{\n  \"resourceType\": \"Medication\",\n  \"id\": \"med0319\",\n  \"text\": {\n    \"status\": \"generated\",\n    \"div\": \"&lt;div xmlns=\\\"http://www.w3.org/1999/xhtml\\\"&gt;&lt;p&gt;&lt;b&gt;Generated Narrative with Details&lt;/b&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;id&lt;/b&gt;: med0319&lt;/p&gt;&lt;p&gt;&lt;b&gt;form&lt;/b&gt;: Ointment &lt;span&gt;(Details : {SNOMED CT code '385101003' = 'Ointment', given as 'Ointment'})&lt;/span&gt;&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;&lt;b&gt;ingredient&lt;/b&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;item&lt;/b&gt;: Salicyclic Acid (substance) &lt;span&gt;(Details : {SNOMED CT code '387253001' = 'Salicylic acid', given as 'Salicyclic Acid (substance)'})&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;strength&lt;/b&gt;: 5 g&lt;span&gt; (Details: UCUM code g = 'g')&lt;/span&gt;/100 g&lt;span&gt; (Details: UCUM code g = 'g')&lt;/span&gt;&lt;/p&gt;&lt;/blockquote&gt;&lt;blockquote&gt;&lt;p&gt;&lt;b&gt;ingredient&lt;/b&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;item&lt;/b&gt;: Hydrocortisone (substance) &lt;span&gt;(Details : {SNOMED CT code '396458002' = 'Hydrocortisone', given as 'Hydrocortisone (substance)'})&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;strength&lt;/b&gt;: 1 g&lt;span&gt; (Details: UCUM code g = 'g')&lt;/span&gt;/100 g&lt;span&gt; (Details: UCUM code g = 'g')&lt;/span&gt;&lt;/p&gt;&lt;/blockquote&gt;&lt;blockquote&gt;&lt;p&gt;&lt;b&gt;ingredient&lt;/b&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;item&lt;/b&gt;: White Petrolatum (substance) &lt;span&gt;(Details : {SNOMED CT code '126066007' = 'White petroleum', given as 'White Petrolatum (substance)'})&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;strength&lt;/b&gt;: 94 g&lt;span&gt; (Details: UCUM code g = 'g')&lt;/span&gt;/100 g&lt;span&gt; (Details: UCUM code g = 'g')&lt;/span&gt;&lt;/p&gt;&lt;/blockquote&gt;&lt;/div&gt;\"\n  },\n  \"form\": {\n    \"coding\": [\n      {\n        \"system\": \"http://snomed.info/sct\",\n        \"code\": \"385101003\",\n        \"display\": \"Ointment\"\n      }\n    ],\n    \"text\": \"Ointment\"\n  },\n  \"ingredient\": [\n    {\n      \"itemCodeableConcept\": {\n        \"coding\": [\n          {\n            \"system\": \"http://snomed.info/sct\",\n            \"code\": \"387253001\",\n            \"display\": \"Salicyclic Acid (substance)\"\n          }\n        ]\n      },\n      \"strength\": {\n        \"numerator\": {\n          \"value\": 5,\n          \"system\": \"http://unitsofmeasure.org\",\n          \"code\": \"g\"\n        },\n        \"denominator\": {\n          \"value\": 100,\n          \"system\": \"http://unitsofmeasure.org\",\n          \"code\": \"g\"\n        }\n      }\n    },\n    {\n      \"itemCodeableConcept\": {\n        \"coding\": [\n          {\n            \"system\": \"http://snomed.info/sct\",\n            \"code\": \"396458002\",\n            \"display\": \"Hydrocortisone (substance)\"\n          }\n        ]\n      },\n      \"strength\": {\n        \"numerator\": {\n          \"value\": 1,\n          \"system\": \"http://unitsofmeasure.org\",\n          \"code\": \"g\"\n        },\n        \"denominator\": {\n          \"value\": 100,\n          \"system\": \"http://unitsofmeasure.org\",\n          \"code\": \"g\"\n        }\n      }\n    },\n    {\n      \"itemCodeableConcept\": {\n        \"coding\": [\n          {\n            \"system\": \"http://snomed.info/sct\",\n            \"code\": \"126066007\",\n            \"display\": \"White Petrolatum (substance)\"\n          }\n        ]\n      },\n      \"strength\": {\n        \"numerator\": {\n          \"value\": 94,\n          \"system\": \"http://unitsofmeasure.org\",\n          \"code\": \"g\"\n        },\n        \"denominator\": {\n          \"value\": 100,\n          \"system\": \"http://unitsofmeasure.org\",\n          \"code\": \"g\"\n        }\n      }\n    }\n  ]\n}</code></p>",
        "id": 271996336,
        "sender_full_name": "Brendan Keeler",
        "timestamp": 1644941334
    },
    {
        "content": "<p>It’s not clear how we map the quantity into the Medication. For instance, this:</p>",
        "id": 271996461,
        "sender_full_name": "Brendan Keeler",
        "timestamp": 1644941381
    },
    {
        "content": "<div class=\"codehilite\"><pre><span></span><code>                   &lt;CompoundIngredientsLotNotUsed&gt;\n                        &lt;CompoundIngredient&gt;\n                            &lt;CompoundIngredientItemDescription&gt;PLO flowable Pluronic Lecithin Organogel&lt;/CompoundIngredientItemDescription&gt;\n                            &lt;ItemNumber&gt;\n                                &lt;Code&gt;00395013501&lt;/Code&gt;\n                                &lt;Qualifier&gt;ND&lt;/Qualifier&gt;\n                            &lt;/ItemNumber&gt;\n                        &lt;/CompoundIngredient&gt;\n                        &lt;Quantity&gt;\n                            &lt;Value&gt;82.9&lt;/Value&gt;\n                            &lt;CodeListQualifier&gt;87&lt;/CodeListQualifier&gt;\n                            &lt;QuantityUnitOfMeasure&gt;\n                                &lt;Code&gt;C48155&lt;/Code&gt;\n                            &lt;/QuantityUnitOfMeasure&gt;\n                        &lt;/Quantity&gt;\n                    &lt;/CompoundIngredientsLotNotUsed&gt;\n</code></pre></div>",
        "id": 271996500,
        "sender_full_name": "Brendan Keeler",
        "timestamp": 1644941394
    },
    {
        "content": "<p>Seems to say that 82.9 grams (C48155 stands for grams) of PLO flowable Pluronic Lecithin Organogel were used, but that feels like an amount and not a strength.</p>",
        "id": 271996518,
        "sender_full_name": "Brendan Keeler",
        "timestamp": 1644941400
    },
    {
        "content": "<p>Here are my comments:<br>\n0) The HL7 Pharmacy WG has been recently discussing how to represent mixtures like this so you might want to bring your examples to our next WG call (Mondays at 4pm eastern) where you can get more advice from members who don't regularly track Zulip, including a bunch of NCPDP members who also attend the HL7 meeting.<br>\n1) If I read your NCPDP example correctly, it is indicating that there is 5g Baclofen Powder, 0.075g Capcaicin Topical Lotion, 10g Ketoprofen Powder, 2g Tetracaine Topical Cream, and 82.9g PLO flowable Pluronic Lecithin Organogel to make up 100g of the overall product.  Is that right?<br>\n2) Assuming so, all of those can be expressed as ratios - 5g / 100g, 0.075g / 100g, etc.  Alternatively, the R5 version of the Medication does have the ability to just represent those as Quantities,  so you can backport that into your resource via an extension, if you don't want to represent it as a ratio.</p>",
        "id": 272048175,
        "sender_full_name": "Jean Duteau",
        "timestamp": 1644964529
    },
    {
        "content": "<p>Thanks <span class=\"user-mention\" data-user-id=\"192166\">@Jean Duteau</span> ! Sounds like an extension might be the easiest path</p>",
        "id": 272052511,
        "sender_full_name": "Brendan Keeler",
        "timestamp": 1644967400
    },
    {
        "content": "<p>To clarify the NCPDP SCRIPT example:  the ingredient quantity is the amount of the ingredient contained in the finished product/quantity.  Jean's interpretation is correct.  There is an optional strength term for the ingredient which is used when the ingredient description/identifier does not imply a strength.</p>\n<p>Rather than an extension, the strength could be populated as 5 mg / 1  (no UOM in the denominator) in R4.</p>",
        "id": 272448073,
        "sender_full_name": "Scott Robertson",
        "timestamp": 1645213583
    },
    {
        "content": "<p>Oh that's an interesting solution</p>",
        "id": 272523588,
        "sender_full_name": "Brendan Keeler",
        "timestamp": 1645283449
    }
]