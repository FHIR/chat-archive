[
    {
        "content": "<p>In case you're not following the <a href=\"https://groups.google.com/forum/#!forum/cds-hooks\" target=\"_blank\" title=\"https://groups.google.com/forum/#!forum/cds-hooks\">CDS Hooks mailing list</a>, <a href=\"https://groups.google.com/d/msg/cds-hooks/0Wj1DeXBUwA/HUGjDXraAQAJ\" target=\"_blank\" title=\"https://groups.google.com/d/msg/cds-hooks/0Wj1DeXBUwA/HUGjDXraAQAJ\">we posted an update</a> to our work on the Clinical Reasoning &amp; CDS Hooks unification project.</p>",
        "id": 153889992,
        "sender_full_name": "Kevin Shekleton",
        "timestamp": 1494882560
    },
    {
        "content": "<p>And if you have no idea what this is and want some backstory on this, <a href=\"https://groups.google.com/d/msg/cds-hooks/5_iQykHKCX0/8MpmttH1BgAJ\" target=\"_blank\" title=\"https://groups.google.com/d/msg/cds-hooks/5_iQykHKCX0/8MpmttH1BgAJ\">please read this earlier post</a> from back in February. :-)</p>",
        "id": 153889993,
        "sender_full_name": "Kevin Shekleton",
        "timestamp": 1494882653
    },
    {
        "content": "<p>I am doing some work in this space and would like to validate the implementation with the community.  We have defined an operation in our implementation  at /GuidanceResponse/$evaluate which returns a GuidanceResponse and a RequestGroup per the spec: <a href=\"http://hl7.org/fhir/R4/clinicalreasoning-cds-on-fhir.html\">http://hl7.org/fhir/R4/clinicalreasoning-cds-on-fhir.html</a>.  </p>\n<p>Here are some questions:</p>\n<ol>\n<li>Does the spec contemplate GuidanceResponse and RequestGroup as \"contained resources\"?  I believe it does, because RequestGroup references  a CarePlan or RequestGroup.</li>\n<li>In our $evaluate operation, should the return be a Bundle with an entry for  GuidanceResponse and RequestGroup (or Careplan), or something else, and if so, what? </li>\n<li>Why isn't the RequestGroup a profiled resource in the spec like  <a href=\"http://hl7.org/fhir/R4/cdshooksguidanceresponse.html\">http://hl7.org/fhir/R4/cdshooksguidanceresponse.html</a>?  Doesn't it have to have the required fields to map to the CDS Hook card per the spec?</li>\n</ol>\n<p>I appreciate the discussion in advance</p>",
        "id": 260802905,
        "sender_full_name": "Richard Braman (FLY.HEALTH)",
        "timestamp": 1636467289
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"396697\">@Richard Braman (FLY.HEALTH)</span> , yes, the RequestGroup can be a contained resource in the response, that's often how we've done that and seen it done. Whether the result of the $evaluate should be a Bundle I think depends on whether you are going to be persisting the results of the evaluation, or if the results are always transient. We typically consider the results transient, so providing them as contained resources in the GuidanceResponse is an effective way to do that. But if they are persisted, then you'd need to return them as just references, and a Bundle starts to make more sense so that clients don't have to request the additional results. As far as RequestGroup, there is a CDSHooksRequestGroup profile defined: <a href=\"https://hl7.org/fhir/cdshooksrequestgroup.html\">https://hl7.org/fhir/cdshooksrequestgroup.html</a></p>",
        "id": 260819678,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1636473886
    },
    {
        "content": "<p>Also, I wonder about defining the $evaluate operation on the GuidanceResponse, I would expect an operation like that to be defined on a definitional resource, like the PlanDefinition or a module-definition Library?</p>",
        "id": 260819854,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1636473961
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191359\">Bryn Rhodes</span> <a href=\"#narrow/stream/179159-cds-hooks/topic/Clinical.20Reasoning.20.26.20CDS.20Hooks/near/260819854\">said</a>:</p>\n<blockquote>\n<p>Also, I wonder about defining the $evaluate operation on the GuidanceResponse, I would expect an operation like that to be defined on a definitional resource, like the PlanDefinition or a module-definition Library?</p>\n</blockquote>\n<p>Not sure.  I dont think the spec is clear.</p>",
        "id": 260836592,
        "sender_full_name": "Richard Braman (FLY.HEALTH)",
        "timestamp": 1636481408
    },
    {
        "content": "<p>Where is CDS Hooks PlanDefinition defined?  It is the only Profiled resource not linked here: <a href=\"http://hl7.org/fhir/R4/clinicalreasoning-module.html\">http://hl7.org/fhir/R4/clinicalreasoning-module.html</a></p>",
        "id": 260838047,
        "sender_full_name": "Richard Braman (FLY.HEALTH)",
        "timestamp": 1636482055
    },
    {
        "content": "<p><a href=\"http://hl7.org/fhir/stu3/servicedefinition-operations.html#evaluate\">http://hl7.org/fhir/stu3/servicedefinition-operations.html#evaluate</a><br>\n<a href=\"http://hl7.org/fhir/stu3/servicedefinition-operations.html#14.2.10.1\">http://hl7.org/fhir/stu3/servicedefinition-operations.html#14.2.10.1</a><br>\nThe evaluate operation requests clinical decision support guidance based on a specific decision support module</p>",
        "id": 260839509,
        "sender_full_name": "Richard Braman (FLY.HEALTH)",
        "timestamp": 1636482641
    },
    {
        "content": "<p>This seems fitting for the PlanDefinition $apply operation: <a href=\"http://hl7.org/fhir/R4/plandefinition-operation-apply.html\">http://hl7.org/fhir/R4/plandefinition-operation-apply.html</a> which returns a CarePlan as output. Also it seems this would nicely align with obtaining guidance from a  clinical decision support service: <a href=\"http://hl7.org/fhir/R4/clinicalreasoning-cds-on-fhir.html#processing-requests\">http://hl7.org/fhir/R4/clinicalreasoning-cds-on-fhir.html#processing-requests</a>. A CarePlan can reference one or more RequestGroup to capture detailed actions of that care plan if that kind of detail is needed and can be mapped into the Card response if called from a CDS hook flow.</p>",
        "id": 260839532,
        "sender_full_name": "Wayne Williams",
        "timestamp": 1636482649
    },
    {
        "content": "<p>It can also be /PlanDefinition/$evaluate, which returns a GuidanceResponse</p>",
        "id": 260840789,
        "sender_full_name": "Richard Braman (FLY.HEALTH)",
        "timestamp": 1636483112
    },
    {
        "content": "<p>I also found the unlinked mapping to the CDS Hooks Plan Definition here:<br>\n<a href=\"https://www.hl7.org/fhir/cdshooksserviceplandefinition.html\">https://www.hl7.org/fhir/cdshooksserviceplandefinition.html</a></p>",
        "id": 260840895,
        "sender_full_name": "Richard Braman (FLY.HEALTH)",
        "timestamp": 1636483152
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"197027\">@Wayne Williams</span> I agree that PlanDefinition is a decent resource to look at here. but our underlying database is not population level plans. It is specific plans for the care of specific patients. Which is why I think something at the GuidanceResponse level is more appropriate. The engine behind the database of plans is analogous to the PlanDefinition you are referencing. Or at least that is my interpretation.</p>",
        "id": 260842289,
        "sender_full_name": "Matt Jenks",
        "timestamp": 1636483695
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191701\">@Matt Jenks</span> I think what I am reading now says that PlanDefinition is the FHIR Resource to describe a CDS Service, thats why $apply and $evaluate are used there in the CDS context</p>",
        "id": 260845963,
        "sender_full_name": "Richard Braman (FLY.HEALTH)",
        "timestamp": 1636485059
    }
]