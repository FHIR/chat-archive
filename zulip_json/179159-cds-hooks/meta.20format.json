[
    {
        "content": "<p>What's the format that you return when trying to register a service through the 'quick add' button on <a href=\"http://hooks.fhir.me/\" target=\"_blank\" title=\"http://hooks.fhir.me/\">http://hooks.fhir.me/</a>?<br>\nI paste in a url (<a href=\"http://107.170.196.80:3000/cdshook/helloworld/$cds-hook\" target=\"_blank\" title=\"http://107.170.196.80:3000/cdshook/helloworld/$cds-hook\">http://107.170.196.80:3000/cdshook/helloworld/$cds-hook</a> )<br>\nthe client calls \"/cdshook/helloworld/$cds-hook-metadata\"<br>\nI return</p>\n<div class=\"codehilite\"><pre>{\n    &quot;resourceType&quot;: &quot;Parameters&quot;,\n    &quot;parameter&quot;: [\n        {\n            &quot;name&quot;: &quot;name&quot;,\n            &quot;valueString&quot;: &quot;helloworld&quot;\n        },\n        {\n            &quot;name&quot;: &quot;description&quot;,\n            &quot;valueString&quot;: &quot;A classic hello world service that will just display a string&quot;\n        },\n        {\n            &quot;name&quot;: &quot;activity&quot;,\n            &quot;valueCoding&quot;: {\n                &quot;system&quot;: &quot;http://cds-hooks.smarthealthit.org/activity&quot;,\n                &quot;code&quot;: &quot;patient-view&quot;\n            }\n        }\n    ]\n}\n</pre></div>\n\n\n<p>and it seems to be accepted (no error generated) - but the service is not subsequently called...</p>",
        "id": 153816653,
        "sender_full_name": "David Hay",
        "timestamp": 1458337789
    },
    {
        "content": "<p>(sorry - haven't got the formatting right yet)</p>",
        "id": 153816654,
        "sender_full_name": "David Hay",
        "timestamp": 1458337883
    },
    {
        "content": "<p>Your metadata look good -- but when I try your service  I see:</p>\n<div class=\"codehilite\"><pre>XMLHttpRequest cannot load http://107.170.196.80:3000/cdshook/helloworld/$cds-hook-metadata.\nNo &#39;Access-Control-Allow-Origin&#39; header is present on the requested resource.\nOrigin &#39;http://hooks.fhir.me&#39; is therefore not allowed access.\n</pre></div>",
        "id": 153816655,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1458337968
    },
    {
        "content": "<p>wierd - I see the call being made in the log...</p>",
        "id": 153816656,
        "sender_full_name": "David Hay",
        "timestamp": 1458338054
    },
    {
        "content": "<p>but I can add the header easily enough...</p>",
        "id": 153816657,
        "sender_full_name": "David Hay",
        "timestamp": 1458338071
    },
    {
        "content": "<p>Oh, the web app  makes the call, but doesn't return results to the JS</p>",
        "id": 153816658,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1458338073
    },
    {
        "content": "<p>That's how it knows there's no header :-)</p>",
        "id": 153816659,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1458338081
    },
    {
        "content": "<p>Not the old https page js calling a http location?</p>",
        "id": 153816660,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1458338121
    },
    {
        "content": "<p>sorry not following - I'm returning the above json when the meta is called...</p>",
        "id": 153816661,
        "sender_full_name": "David Hay",
        "timestamp": 1458338135
    },
    {
        "content": "<p>oh - https!</p>",
        "id": 153816662,
        "sender_full_name": "David Hay",
        "timestamp": 1458338154
    },
    {
        "content": "<p>Wait, everything here (the EHR and David's server) are <code>http</code>.</p>",
        "id": 153816663,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1458338413
    },
    {
        "content": "<p>is that OK in the sandbox?</p>",
        "id": 153816664,
        "sender_full_name": "David Hay",
        "timestamp": 1458338460
    },
    {
        "content": "<p>Just checking. Have been caught by that one sooooo many time</p>",
        "id": 153816665,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1458338495
    },
    {
        "content": "<p>with the js page being on https</p>",
        "id": 153816666,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1458338517
    },
    {
        "content": "<p>David, your service has the CORS headers setup right?</p>",
        "id": 153816667,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1458338555
    },
    {
        "content": "<p>Yes, <code>http</code> is A-OK</p>",
        "id": 153816668,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1458338557
    },
    {
        "content": "<p>CORS is the issue.</p>",
        "id": 153816669,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1458338560
    }
]