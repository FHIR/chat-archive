[
    {
        "content": "<p>The issue is when I convert Bundle object to a json fhir document, the reference id ads the resource type to the id.</p>\n<p>EX: FHIRConfig.getCtx().newJsonParser().setPrettyPrint(prettyPrint).encodeResourceToString(msgBundle);<br>\nwill produce the following:<br>\n..<br>\n                      \"reference\": \"Patient/04f2325e-b068-4a6e-9990-87147e918922\"<br>\n                    },<br>\n                    {<br>\n                      \"reference\": \"Practitioner/5ece02c6-551f-46ca-a35f-8b502e849fdd\"<br>\n                    },<br>\n                    {<br>\n                      \"reference\": \"Observation/0e179660-6c5e-4e87-af53-9935c57d3a59\"<br>\n..<br>\nWhat can I do to make sure the resource type is NOT tagged with the id in the output chir document:<br>\n\"reference\": \"04f2325e-b068-4a6e-9990-87147e918922\"</p>\n<p>your help is appreciated.<br>\nthanx</p>",
        "id": 203201839,
        "sender_full_name": "Zak Guler",
        "timestamp": 1594155391
    },
    {
        "content": "<p>please start by providing code so we know how you are converting</p>",
        "id": 203209422,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1594159613
    },
    {
        "content": "<p>-first we call the @Search get method in the [FHIR-CLIENT] SearchController.<br>\n-the search method calls the [FHIR-SERVER] to get the DeathRecord [Bundle].</p>\n<div class=\"codehilite\"><pre><span></span><code>    -control goes to the @Search method in the [FHIR-CLIENT] PatientResourceProvider class.\n        -[FHIR-CLIENT] passes the parameters to the search method in PatientDao class.\n        -[FHIR-CLIENT] goes to EdenmasterService class [findEdenmasterBundles()] to get the data from the database.\n        -[FHIR-CLIENT] back to PatientDao to convert the Patient data to a bundle: bundle = edenmasterEntityToFHIRPatient.convertToBundles(edenmasters)\n        -[FHIR-CLIENT] in EdenmasterEntityToFHIRPatient...convertToBundles(edenmasters) is where the magic starts:\n                            builds the Bundle, Patient, Composition, Observations...etc\n\n    -control comes back to the @Search method in PatientResourceProvider to return as a Bundle object.\n</code></pre></div>\n\n\n<p>-[FHIR-CLIENT] back in the SearchController,  the DeathRecordSubmission class merges the DeathRecord[bundle] with other resource types and creates a new expanded bundle.<br>\n-[FHIR-CLIENT] DeathRecordSubmission.toJson(-the new bundle-):</p>\n<div class=\"codehilite\"><pre><span></span><code>                return FHIRConfig.getCtx().newJsonParser().setPrettyPrint(prettyPrint).encodeResourceToString(msgBundle);\n</code></pre></div>\n\n\n<p>the full FHIR Document output is attached with this message.</p>\n<p>Note:<br>\n    The interesting thing is, when I generate the fhie document by calling the FHIR-Server from a tool like POSTMAN, it gereates the reference ids properly without the resourceTypes tagged to it.<br>\n    the conversion in the FHIR-Server does not call the FHIRConfig.getCtx().newJsonParser().setPrettyPrint(prettyPrint).encodeResourceToString(msgBundle).</p>\n<p>I am also attaching the clean file with this message.</p>\n<p>please let me know if you need additional info.<br>\nthank you very much for your help in advance. <br>\nZak </p>\n<p><a href=\"/user_uploads/10155/VtwKAiTbOzObS5bHmOZcA0x0/Fhir_Server_SRC_Chat_Fhir_Org.zip\">Fhir_Server_SRC_Chat_Fhir_Org.zip</a></p>\n<p><a href=\"/user_uploads/10155/t_CGZsQRcisfYhWK6yFuQZqZ/To_NCHS_udoh_fhir_client_R4_Chat_Fhir_Org.zip\">To_NCHS_udoh_fhir_client_R4_Chat_Fhir_Org.zip</a> <a href=\"/user_uploads/10155/vb9GP1D6q6OzNJuinWLS3Pe8/FHIR_Doc_ReferenceIds_tagged_with_resourceTypes_Chat_Fhir_org.txt\">FHIR_Doc_ReferenceIds_tagged_with_resourceTypes_Chat_Fhir_org.txt</a> <a href=\"/user_uploads/10155/cRiPsWBISRER_hYwl-cY7cFd/FHIR_Doc_ReferenceIds_withOUT_resourceTypes_Chat_Fhir_org.txt\">FHIR_Doc_ReferenceIds_withOUT_resourceTypes_Chat_Fhir_org.txt</a></p>",
        "id": 203304122,
        "sender_full_name": "Zak Guler",
        "timestamp": 1594232793
    },
    {
        "content": "<p>Hi any luck with this issue? did I provide you with more code than you requested?</p>",
        "id": 203733627,
        "sender_full_name": "Zak Guler",
        "timestamp": 1594655978
    }
]