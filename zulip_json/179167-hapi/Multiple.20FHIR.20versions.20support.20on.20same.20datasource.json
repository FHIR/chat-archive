[
    {
        "content": "<p>Hi, we are planning to setup STU3 and R4 FHIR versions on top of a single datasource? is that possible? Do we have to run two HAPI FHIR server instances for each version?</p>",
        "id": 204083350,
        "sender_full_name": "Keerthivasan Ramanathan",
        "timestamp": 1594906273
    },
    {
        "content": "<p>Can someone guide me here? Can elastic search can be used as database for storing FHIR resources? We are looking for several options for implementing. I would like to understand the views from the community. Please help with your knowledge</p>",
        "id": 204164460,
        "sender_full_name": "Keerthivasan Ramanathan",
        "timestamp": 1594951541
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"248168\">@Keerthivasan Ramanathan</span> One suggestion is to understand the HAPI DB config. Try replicating the same.</p>",
        "id": 204174211,
        "sender_full_name": "Vibin_chander",
        "timestamp": 1594967054
    },
    {
        "content": "<p>Hi Vibin, I just saw the db schema in the HAPI fhir documentation. I could understand that they store all the resources in a single table.</p>",
        "id": 204197879,
        "sender_full_name": "Keerthivasan Ramanathan",
        "timestamp": 1594987659
    },
    {
        "content": "<p>Can a single HAPI FHIR server support multiple FHIR versions?</p>",
        "id": 204197962,
        "sender_full_name": "Keerthivasan Ramanathan",
        "timestamp": 1594987701
    },
    {
        "content": "<p>Thanks Vibin for your response</p>",
        "id": 204197992,
        "sender_full_name": "Keerthivasan Ramanathan",
        "timestamp": 1594987726
    },
    {
        "content": "<p>I understood that we have to stand up a separate hapi fhir jpa server for each version of FHIR. I have to support both STU3 and R4. What is the recommended approach? we cannot store in two different databases. I think running two instance of HAPI FHIR server on top of same data source should help. I would like to hear from the others.</p>",
        "id": 204637429,
        "sender_full_name": "Keerthivasan Ramanathan",
        "timestamp": 1595403228
    },
    {
        "content": "<p>ping <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> <span class=\"user-mention\" data-user-id=\"191319\">@James Agnew</span> Sorry to pull you in. Please provide your recommendations.</p>",
        "id": 204640046,
        "sender_full_name": "Keerthivasan Ramanathan",
        "timestamp": 1595405719
    },
    {
        "content": "<p>The architecture of HAPI currently does not support concurrent versions out of the box. It utterly depends on what you are trying to achieve</p>",
        "id": 204643477,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1595408251
    },
    {
        "content": "<p>There's a Converter interceptor to convert between FHIR versions on the fly: VersionedApiConverterInterceptor.<br>\nHere's the related docs: <a href=\"https://hapifhir.io/hapi-fhir/docs/model/converter.html\">https://hapifhir.io/hapi-fhir/docs/model/converter.html</a><br>\nNot sure how good it is (configuration and performance-wise), though.</p>",
        "id": 204646649,
        "sender_full_name": "Umberto Cappellini",
        "timestamp": 1595410830
    },
    {
        "content": "<p>Yeah, I completely understand it. Can we run two hapi fhir server to support two different versions (STU3 and R4) on top of a single database? Is there any problems with that? we don't want to keep the huge data replicated. Hope it makes sense now</p>",
        "id": 204646775,
        "sender_full_name": "Keerthivasan Ramanathan",
        "timestamp": 1595410942
    },
    {
        "content": "<p>Thanks, <span class=\"user-mention\" data-user-id=\"191427\">@Jens Villadsen</span></p>",
        "id": 204646806,
        "sender_full_name": "Keerthivasan Ramanathan",
        "timestamp": 1595410988
    },
    {
        "content": "<p>Thanks <span class=\"user-mention\" data-user-id=\"197408\">@Umberto Cappellini</span> , this is amazing to know about it. I will check it out</p>",
        "id": 204646828,
        "sender_full_name": "Keerthivasan Ramanathan",
        "timestamp": 1595411008
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"197408\">@Umberto Cappellini</span>  Is there any example usage for VersionedApiConverterInterceptor? I just read the java docs. Do we have to extend this class and override the method? May i ask for some reference examples? It will be helpful to understand it well.</p>",
        "id": 205722696,
        "sender_full_name": "Keerthivasan Ramanathan",
        "timestamp": 1596366047
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"326090\">@Keerthivasan Ramanathan</span> </p>\n<p>Looking at the code of the interceptor: <br>\n<a href=\"https://github.com/jamesagnew/hapi-fhir/blob/60f16dd91d757131dbdef83359e0b8f02c323248/hapi-fhir-converter/src/main/java/ca/uhn/hapi/converters/server/VersionedApiConverterInterceptor.java\">https://github.com/jamesagnew/hapi-fhir/blob/60f16dd91d757131dbdef83359e0b8f02c323248/hapi-fhir-converter/src/main/java/ca/uhn/hapi/converters/server/VersionedApiConverterInterceptor.java</a></p>\n<p>the client specifies the desired FHIR version in the \"accept\" header as follows: Accept: application/fhir+json; fhirVersion=4.0</p>\n<p>The interceptor converts all the resources contained in the ResponseDetails to the desired FHIR version. You configure the interceptor as you do for all other interceptors in the initialize method of the server.</p>\n<p>Didn't use it myself though, not sure how good the conversions are.</p>",
        "id": 205807556,
        "sender_full_name": "Umberto Cappellini",
        "timestamp": 1596468229
    },
    {
        "content": "<p>Wow, that's amazing <span aria-label=\"sunglasses\" class=\"emoji emoji-1f60e\" role=\"img\" title=\"sunglasses\">:sunglasses:</span></p>",
        "id": 205807750,
        "sender_full_name": "Keerthivasan Ramanathan",
        "timestamp": 1596468323
    },
    {
        "content": "<p>I'll check that and give an update. Thank you so much</p>",
        "id": 205807784,
        "sender_full_name": "Keerthivasan Ramanathan",
        "timestamp": 1596468343
    }
]