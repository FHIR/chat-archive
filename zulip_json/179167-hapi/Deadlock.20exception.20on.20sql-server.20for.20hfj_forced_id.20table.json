[
    {
        "content": "<p>Hi all,<br>\nI am trying to parse some resources to the to  a HAPI server  with  a Sql Server backend. However some of the transactions fail with a deadlock exception...looking at the sql log...I can see that the lock is caused at the table <a href=\"/user_uploads/10155/jPEHCcKI5Nm9S4qGK0RzID61/forced_id.PNG\" target=\"_blank\" title=\"forced_id.PNG\">hfj_forced_id</a> </p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/jPEHCcKI5Nm9S4qGK0RzID61/forced_id.PNG\" target=\"_blank\" title=\"hfj_forced_id\"><img src=\"/user_uploads/10155/jPEHCcKI5Nm9S4qGK0RzID61/forced_id.PNG\"></a></div><p>Enabling the Hibernate SQL logs on my app shows some inserts and writes on to the table at what seems to be the same time<br>\n<a href=\"/user_uploads/10155/mHcXluZqRxzmFoPFDaqzulVp/forced_error.PNG\" target=\"_blank\" title=\"forced_error.PNG\">forced_error.PNG</a> </p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/mHcXluZqRxzmFoPFDaqzulVp/forced_error.PNG\" target=\"_blank\" title=\"forced_error.PNG\"><img src=\"/user_uploads/10155/mHcXluZqRxzmFoPFDaqzulVp/forced_error.PNG\"></a></div><p>Scenario:<br>\nI have a few hundred bundles of PractitionerRole that I am trying to POST to the HAPI server in a parallel manner at about 50 bundles per second<br>\nEach bundle has a 100 PractitionerRoles</p>\n<p>I presume this happens when creating a forced_id several times for the resources causing a deadlock. </p>\n<p>Other types of databases did not cause this (tested on hsqldb and derby), so I think this is specific to the Sql Server Engine. However I am limited to using Sql Server due to circumstances so I would like to try to resolved this issue</p>\n<p>I have also tried setting the transaction isolation level to read_uncommited to no avail at both the spring boot application level as well as the database level<br>\n<code>spring.jpa.properties.hibernate.connection.isolation=READ_UNCOMMITED</code><br>\n<code>SET TRANSACTION ISOLATION LEVEL READ UNCOMMITTED</code></p>\n<p><span class=\"user-mention\" data-user-id=\"191319\">@James Agnew</span>  do you perhaps have some insight into trying to solve this issue?</p>",
        "id": 188515497,
        "sender_full_name": "Sajith Jamal",
        "timestamp": 1582087398
    },
    {
        "content": "<p>FYI to anyone- this discussion moved to the Google Group</p>",
        "id": 188654478,
        "sender_full_name": "James Agnew",
        "timestamp": 1582216874
    },
    {
        "content": "<p>Link?</p>",
        "id": 188762309,
        "sender_full_name": "Keith Boone",
        "timestamp": 1582311063
    },
    {
        "content": "<p><a href=\"https://groups.google.com/forum/?utm_medium=email&amp;utm_source=footer#!msg/hapi-fhir/lLuRnQZoaU8/soI1OtvDAQAJ\" target=\"_blank\" title=\"https://groups.google.com/forum/?utm_medium=email&amp;utm_source=footer#!msg/hapi-fhir/lLuRnQZoaU8/soI1OtvDAQAJ\">https://groups.google.com/forum/?utm_medium=email&amp;utm_source=footer#!msg/hapi-fhir/lLuRnQZoaU8/soI1OtvDAQAJ</a></p>",
        "id": 188811597,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1582368234
    }
]