[
    {
        "content": "<p>bdenton opened <a href=\"https://github.com/jamesagnew/hapi-fhir/pull/270\" target=\"_blank\" title=\"https://github.com/jamesagnew/hapi-fhir/pull/270\">pull request 270</a></p>\n<blockquote>\n<p>James.. </p>\n<p>this is my initial commit of the RP/DAO refactoring. There is still some more work to do on the XML Spring wiring for OSGi support. Also, I am havint trouble with the Resource Provider tests. Seems to be some sort of issue with Spring/JPA transaction management</p>\n</blockquote>",
        "id": 153811593,
        "sender_full_name": "Zulip HAPI Bot",
        "timestamp": 1450140999
    },
    {
        "content": "<p>bdenton closed <a href=\"https://github.com/jamesagnew/hapi-fhir/pull/270\" target=\"_blank\" title=\"https://github.com/jamesagnew/hapi-fhir/pull/270\">pull request 270</a></p>",
        "id": 153811594,
        "sender_full_name": "Zulip HAPI Bot",
        "timestamp": 1450141083
    },
    {
        "content": "<p>bdenton reopened <a href=\"https://github.com/jamesagnew/hapi-fhir/pull/270\" target=\"_blank\" title=\"https://github.com/jamesagnew/hapi-fhir/pull/270\">pull request 270</a></p>\n<blockquote>\n<p>James.. </p>\n<p>this is my initial commit of the RP/DAO refactoring. There is still some more work to do on the XML Spring wiring for OSGi support. Also, I am havint trouble with the Resource Provider tests. Seems to be some sort of issue with Spring/JPA transaction management</p>\n</blockquote>",
        "id": 153811595,
        "sender_full_name": "Zulip HAPI Bot",
        "timestamp": 1450141099
    },
    {
        "content": "<p>jamesagnew <a href=\"https://github.com/jamesagnew/hapi-fhir/pull/270#issuecomment-164749248\" target=\"_blank\" title=\"https://github.com/jamesagnew/hapi-fhir/pull/270#issuecomment-164749248\">commented</a> on <a href=\"https://github.com/jamesagnew/hapi-fhir/pull/270\" target=\"_blank\" title=\"https://github.com/jamesagnew/hapi-fhir/pull/270\">pull request 270</a></p>\n<blockquote>\n<p>Hi Bill- I see where you're going with this. I'm not totally clear on why it's needed/how it will be used though. Is the idea that you want to have your own implementations of the DAOs that don't use hibernate than then plug those into the resource providers? If so, why do they need to be in their own JAR for that to happen? Couldn't you just create a custom spring configuration that uses the RPs but wires them to a different implementation of the DAO interfaces?</p>\n<p>Or am I misunderstanding the motivation?</p>\n<p>One other thing to note- this pull request doesn't actually merge cleanly (you can see the <code>This branch has conflicts</code> message below that indicates this). It needs to merge in order for the CI server to build it and the test coverage tools to test it. <a href=\"https://help.github.com/articles/syncing-a-fork/\" target=\"_blank\" title=\"https://help.github.com/articles/syncing-a-fork/\">here</a> are some details on how to fix this... </p>\n</blockquote>",
        "id": 153811598,
        "sender_full_name": "Zulip HAPI Bot",
        "timestamp": 1450182344
    },
    {
        "content": "<p>jamesagnew <a href=\"https://github.com/jamesagnew/hapi-fhir/pull/270#issuecomment-164750721\" target=\"_blank\" title=\"https://github.com/jamesagnew/hapi-fhir/pull/270#issuecomment-164750721\">commented</a> on <a href=\"https://github.com/jamesagnew/hapi-fhir/pull/270\" target=\"_blank\" title=\"https://github.com/jamesagnew/hapi-fhir/pull/270\">pull request 270</a></p>\n<blockquote>\n<p>One other comment- I'd prefer not to have those hardcoded METADATA.MF files in the repo if we can find a way for them to be generated by maven-bundle-plugin. They have version numbers embedded in them which will get out of date pretty quickly if we don't remember to bump them everytime we release a new version of HAPI.. and I'll guarantee that will get forgotten at some point :)</p>\n</blockquote>",
        "id": 153811599,
        "sender_full_name": "Zulip HAPI Bot",
        "timestamp": 1450182819
    },
    {
        "content": "<p>bdenton <a href=\"https://github.com/jamesagnew/hapi-fhir/pull/270#issuecomment-164839810\" target=\"_blank\" title=\"https://github.com/jamesagnew/hapi-fhir/pull/270#issuecomment-164839810\">commented</a> on <a href=\"https://github.com/jamesagnew/hapi-fhir/pull/270\" target=\"_blank\" title=\"https://github.com/jamesagnew/hapi-fhir/pull/270\">pull request 270</a></p>\n<blockquote>\n<p>James..</p>\n<p>Yes, the reason for the split is to be able to implement RPs and DAOs independently. In the OSGi world, there is good reason to keep them in separate JARs (bundles). Then you use Spring-DM (Gemini Blueprint) to wire across bundles via just interfaces.</p>\n<p>I saw that message when I made the pull request and I’ll work on the merge today. It doesn’t look like it will be a big chore.</p>\n<p>One other thing, most of the tests in ResourceProviderDstu1Test and ResourceProviderDstu2Test are failing with javax.persistence.TransactionRequiredException. However, all of the FhirResourceDaoXxxx tests succeed… Do you have any ideas why this might occur? Not having worked a bunch with Hibernate and JPA, I am looking for thoughts and ideas.</p>\n<p>Cheers, Bill</p>\n<p>From: James Agnew [mailto:notifications@github.com]<br>\nSent: Tuesday, December 15, 2015 4:26 AM<br>\nTo: jamesagnew/hapi-fhir<br>\nCc: Bill Denton<br>\nSubject: Re: [hapi-fhir] Initial commit of the refactored Resource Provider and DAO layers (#270)</p>\n<p>Hi Bill- I see where you're going with this. I'm not totally clear on why it's needed/how it will be used though. Is the idea that you want to have your own implementations of the DAOs that don't use hibernate than then plug those into the resource providers? If so, why do they need to be in their own JAR for that to happen? Couldn't you just create a custom spring configuration that uses the RPs but wires them to a different implementation of the DAO interfaces?</p>\n<p>Or am I misunderstanding the motivation?</p>\n<p>One other thing to note- this pull request doesn't actually merge cleanly (you can see the This branch has conflicts message below that indicates this). It needs to merge in order for the CI server to build it and the test coverage tools to test it. here&lt;<a href=\"https://help.github.com/articles/syncing-a-fork/\" target=\"_blank\" title=\"https://help.github.com/articles/syncing-a-fork/\">https://help.github.com/articles/syncing-a-fork/</a>&gt; are some details on how to fix this...</p>\n<p>—<br>\nReply to this email directly or view it on GitHub&lt;<a href=\"https://github.com/jamesagnew/hapi-fhir/pull/270#issuecomment-164749248\" target=\"_blank\" title=\"https://github.com/jamesagnew/hapi-fhir/pull/270#issuecomment-164749248\">https://github.com/jamesagnew/hapi-fhir/pull/270#issuecomment-164749248</a>&gt;.</p>\n</blockquote>",
        "id": 153811601,
        "sender_full_name": "Zulip HAPI Bot",
        "timestamp": 1450201810
    },
    {
        "content": "<p>bdenton <a href=\"https://github.com/jamesagnew/hapi-fhir/pull/270#issuecomment-164842038\" target=\"_blank\" title=\"https://github.com/jamesagnew/hapi-fhir/pull/270#issuecomment-164842038\">commented</a> on <a href=\"https://github.com/jamesagnew/hapi-fhir/pull/270\" target=\"_blank\" title=\"https://github.com/jamesagnew/hapi-fhir/pull/270\">pull request 270</a></p>\n<blockquote>\n<p>The METADATA.MF file is there so the project can be managed as a Plugin Project in Eclipse. This makes resolving package imports so much easier. I only put version numbers on the imports when it is actually needed. In OSGi, specifying version=”x.y.z” is just saying what the minimum version needs to be.. not the specific version. For instance, in hapi-fhir-base, the imports of org.apache.http.* specify version=”4.0” because the code references methods that were introduced in v4.0.</p>\n<p>One thing I really don’t care for in the Maven bundle plugin is that it wants to put a version on every import and this is usually the latest version of things. The problem with this is it makes it really hard to install the bundle in an existing OSGi container that might not have that exact version in place. For things that are pretty generic like commons-io or commons-lang3, the version is not really useful. For things like javax.servlet, it can actually make it impossible to deploy if the version does not match the version of the underlying platform.</p>\n<p>Like I said, I only use the versions when code references something that was not part of the base version of a package. Also, I pretty much never use “bracketing” version specifications (version=”(1.0,2.0]” which means version=1.x.x) since nearly everything has pretty good downward compatibility (v2.x will usually be compatible with code written for v1.x).</p>\n<p>Cheers, Bill</p>\n<p>From: James Agnew [mailto:notifications@github.com]<br>\nSent: Tuesday, December 15, 2015 4:34 AM<br>\nTo: jamesagnew/hapi-fhir<br>\nCc: Bill Denton<br>\nSubject: Re: [hapi-fhir] Initial commit of the refactored Resource Provider and DAO layers (#270)</p>\n<p>One other comment- I'd prefer not to have those hardcoded METADATA.MF files in the repo if we can find a way for them to be generated by maven-bundle-plugin. They have version numbers embedded in them which will get out of date pretty quickly if we don't remember to bump them everytime we release a new version of HAPI.. and I'll guarantee that will get forgotten at some point :)</p>\n<p>—<br>\nReply to this email directly or view it on GitHub&lt;<a href=\"https://github.com/jamesagnew/hapi-fhir/pull/270#issuecomment-164750721\" target=\"_blank\" title=\"https://github.com/jamesagnew/hapi-fhir/pull/270#issuecomment-164750721\">https://github.com/jamesagnew/hapi-fhir/pull/270#issuecomment-164750721</a>&gt;.</p>\n</blockquote>",
        "id": 153811602,
        "sender_full_name": "Zulip HAPI Bot",
        "timestamp": 1450202369
    },
    {
        "content": "<p>bdenton synchronized <a href=\"https://github.com/jamesagnew/hapi-fhir/pull/270\" target=\"_blank\" title=\"https://github.com/jamesagnew/hapi-fhir/pull/270\">pull request 270</a></p>",
        "id": 153811605,
        "sender_full_name": "Zulip HAPI Bot",
        "timestamp": 1450214464
    },
    {
        "content": "<p>bdenton synchronized <a href=\"https://github.com/jamesagnew/hapi-fhir/pull/270\" target=\"_blank\" title=\"https://github.com/jamesagnew/hapi-fhir/pull/270\">pull request 270</a></p>",
        "id": 153811606,
        "sender_full_name": "Zulip HAPI Bot",
        "timestamp": 1450215738
    },
    {
        "content": "<p>bdenton <a href=\"https://github.com/jamesagnew/hapi-fhir/pull/270#issuecomment-164917201\" target=\"_blank\" title=\"https://github.com/jamesagnew/hapi-fhir/pull/270#issuecomment-164917201\">commented</a> on <a href=\"https://github.com/jamesagnew/hapi-fhir/pull/270\" target=\"_blank\" title=\"https://github.com/jamesagnew/hapi-fhir/pull/270\">pull request 270</a></p>\n<blockquote>\n<p>James..</p>\n<p>I followed the instructions above and the refactoring branch is now merged into the master in my fork. I did an upstream merge prior to merging in the branch. Not a GIT expert by any means so I am hoping I did the right thing.</p>\n<p>BTW, some other commits I made to the hapi-osgi-core project slipped in as well</p>\n<p>cheers, Bill</p>\n</blockquote>",
        "id": 153811607,
        "sender_full_name": "Zulip HAPI Bot",
        "timestamp": 1450218491
    },
    {
        "content": "<p>bdenton <a href=\"https://github.com/jamesagnew/hapi-fhir/pull/270#issuecomment-164917331\" target=\"_blank\" title=\"https://github.com/jamesagnew/hapi-fhir/pull/270#issuecomment-164917331\">commented</a> on <a href=\"https://github.com/jamesagnew/hapi-fhir/pull/270\" target=\"_blank\" title=\"https://github.com/jamesagnew/hapi-fhir/pull/270\">pull request 270</a></p>\n<blockquote>\n<p>I think I need to close this pull request and open a new one on the master branch??</p>\n</blockquote>",
        "id": 153811608,
        "sender_full_name": "Zulip HAPI Bot",
        "timestamp": 1450218533
    },
    {
        "content": "<p>bdenton closed <a href=\"https://github.com/jamesagnew/hapi-fhir/pull/270\" target=\"_blank\" title=\"https://github.com/jamesagnew/hapi-fhir/pull/270\">pull request 270</a></p>",
        "id": 153811609,
        "sender_full_name": "Zulip HAPI Bot",
        "timestamp": 1450218533
    },
    {
        "content": "<p>jamesagnew <a href=\"https://github.com/jamesagnew/hapi-fhir/pull/270#issuecomment-164969546\" target=\"_blank\" title=\"https://github.com/jamesagnew/hapi-fhir/pull/270#issuecomment-164969546\">commented</a> on <a href=\"https://github.com/jamesagnew/hapi-fhir/pull/270\" target=\"_blank\" title=\"https://github.com/jamesagnew/hapi-fhir/pull/270\">pull request 270</a></p>\n<blockquote>\n<p>Hmm no, unfortunately I have no idea why that would be happening.</p>\n<p>I'll try to check it out and run it myself at some point soon and see if I<br>\nsee anything obvious.</p>\n<p>I think you need to add the new dao-base project to the list of modules in<br>\nthe ALLMODULES profile in the root pom.xml. The CI server is failing<br>\n&lt;<a href=\"https://travis-ci.org/jamesagnew/hapi-fhir/builds/97096585\" target=\"_blank\" title=\"https://travis-ci.org/jamesagnew/hapi-fhir/builds/97096585\">https://travis-ci.org/jamesagnew/hapi-fhir/builds/97096585</a>&gt; but I think<br>\nthat's just because it's not finding that module.</p>\n<p>Cheers,<br>\nJames</p>\n<p>On Tue, Dec 15, 2015 at 12:56 PM, Bill Denton &lt;<a href=\"mailto:notifications@github.com\" title=\"mailto:notifications@github.com\">notifications@github.com</a>&gt;<br>\nwrote:</p>\n<blockquote>\n<p>James..</p>\n<p>Yes, the reason for the split is to be able to implement RPs and DAOs<br>\nindependently. In the OSGi world, there is good reason to keep them in<br>\nseparate JARs (bundles). Then you use Spring-DM (Gemini Blueprint) to wire<br>\nacross bundles via just interfaces.</p>\n<p>I saw that message when I made the pull request and I’ll work on the merge<br>\ntoday. It doesn’t look like it will be a big chore.</p>\n<p>One other thing, most of the tests in ResourceProviderDstu1Test and<br>\nResourceProviderDstu2Test are failing with<br>\njavax.persistence.TransactionRequiredException. However, all of the<br>\nFhirResourceDaoXxxx tests succeed… Do you have any ideas why this might<br>\noccur? Not having worked a bunch with Hibernate and JPA, I am looking for<br>\nthoughts and ideas.</p>\n<p>Cheers, Bill</p>\n<p>From: James Agnew [mailto:notifications@github.com]<br>\nSent: Tuesday, December 15, 2015 4:26 AM<br>\nTo: jamesagnew/hapi-fhir<br>\nCc: Bill Denton<br>\nSubject: Re: [hapi-fhir] Initial commit of the refactored Resource<br>\nProvider and DAO layers (#270)</p>\n<p>Hi Bill- I see where you're going with this. I'm not totally clear on why<br>\nit's needed/how it will be used though. Is the idea that you want to have<br>\nyour own implementations of the DAOs that don't use hibernate than then<br>\nplug those into the resource providers? If so, why do they need to be in<br>\ntheir own JAR for that to happen? Couldn't you just create a custom spring<br>\nconfiguration that uses the RPs but wires them to a different<br>\nimplementation of the DAO interfaces?</p>\n<p>Or am I misunderstanding the motivation?</p>\n<p>One other thing to note- this pull request doesn't actually merge cleanly<br>\n(you can see the This branch has conflicts message below that indicates<br>\nthis). It needs to merge in order for the CI server to build it and the<br>\ntest coverage tools to test it. here&lt;<br>\n<a href=\"https://help.github.com/articles/syncing-a-fork/\" target=\"_blank\" title=\"https://help.github.com/articles/syncing-a-fork/\">https://help.github.com/articles/syncing-a-fork/</a>&gt; are some details on how<br>\nto fix this...</p>\n<p>—<br>\nReply to this email directly or view it on GitHub&lt;<br>\n<a href=\"https://github.com/jamesagnew/hapi-fhir/pull/270#issuecomment-164749248\" target=\"_blank\" title=\"https://github.com/jamesagnew/hapi-fhir/pull/270#issuecomment-164749248\">https://github.com/jamesagnew/hapi-fhir/pull/270#issuecomment-164749248</a>&gt;.</p>\n<p>—<br>\nReply to this email directly or view it on GitHub<br>\n&lt;<a href=\"https://github.com/jamesagnew/hapi-fhir/pull/270#issuecomment-164839810\" target=\"_blank\" title=\"https://github.com/jamesagnew/hapi-fhir/pull/270#issuecomment-164839810\">https://github.com/jamesagnew/hapi-fhir/pull/270#issuecomment-164839810</a>&gt;.</p>\n</blockquote>\n</blockquote>",
        "id": 153811612,
        "sender_full_name": "Zulip HAPI Bot",
        "timestamp": 1450234304
    },
    {
        "content": "<p>bdenton <a href=\"https://github.com/jamesagnew/hapi-fhir/pull/270#issuecomment-164973109\" target=\"_blank\" title=\"https://github.com/jamesagnew/hapi-fhir/pull/270#issuecomment-164973109\">commented</a> on <a href=\"https://github.com/jamesagnew/hapi-fhir/pull/270\" target=\"_blank\" title=\"https://github.com/jamesagnew/hapi-fhir/pull/270\">pull request 270</a></p>\n<blockquote>\n<p>Yes, I found that out when I finally got the merge to master finished… also need to add hapi-fhir-providers</p>\n<p>Not sure it is needed but I also added them to SITE &lt;profile&gt;</p>\n<p>From: James Agnew [mailto:notifications@github.com]<br>\nSent: Tuesday, December 15, 2015 6:52 PM<br>\nTo: jamesagnew/hapi-fhir<br>\nCc: Bill Denton<br>\nSubject: Re: [hapi-fhir] Initial commit of the refactored Resource Provider and DAO layers (#270)</p>\n<p>Hmm no, unfortunately I have no idea why that would be happening.</p>\n<p>I'll try to check it out and run it myself at some point soon and see if I<br>\nsee anything obvious.</p>\n<p>I think you need to add the new dao-base project to the list of modules in<br>\nthe ALLMODULES profile in the root pom.xml. The CI server is failing<br>\n&lt;<a href=\"https://travis-ci.org/jamesagnew/hapi-fhir/builds/97096585\" target=\"_blank\" title=\"https://travis-ci.org/jamesagnew/hapi-fhir/builds/97096585\">https://travis-ci.org/jamesagnew/hapi-fhir/builds/97096585</a>&gt; but I think<br>\nthat's just because it's not finding that module.</p>\n<p>Cheers,<br>\nJames</p>\n<p>On Tue, Dec 15, 2015 at 12:56 PM, Bill Denton &lt;notifications@github.com&lt;mailto:<a href=\"mailto:notifications@github.com\" title=\"mailto:notifications@github.com\">notifications@github.com</a>&gt;&gt;<br>\nwrote:</p>\n<blockquote>\n<p>James..</p>\n<p>Yes, the reason for the split is to be able to implement RPs and DAOs<br>\nindependently. In the OSGi world, there is good reason to keep them in<br>\nseparate JARs (bundles). Then you use Spring-DM (Gemini Blueprint) to wire<br>\nacross bundles via just interfaces.</p>\n<p>I saw that message when I made the pull request and I’ll work on the merge<br>\ntoday. It doesn’t look like it will be a big chore.</p>\n<p>One other thing, most of the tests in ResourceProviderDstu1Test and<br>\nResourceProviderDstu2Test are failing with<br>\njavax.persistence.TransactionRequiredException. However, all of the<br>\nFhirResourceDaoXxxx tests succeed… Do you have any ideas why this might<br>\noccur? Not having worked a bunch with Hibernate and JPA, I am looking for<br>\nthoughts and ideas.</p>\n<p>Cheers, Bill</p>\n<p>From: James Agnew [mailto:notifications@github.com]<br>\nSent: Tuesday, December 15, 2015 4:26 AM<br>\nTo: jamesagnew/hapi-fhir<br>\nCc: Bill Denton<br>\nSubject: Re: [hapi-fhir] Initial commit of the refactored Resource<br>\nProvider and DAO layers (#270)</p>\n<p>Hi Bill- I see where you're going with this. I'm not totally clear on why<br>\nit's needed/how it will be used though. Is the idea that you want to have<br>\nyour own implementations of the DAOs that don't use hibernate than then<br>\nplug those into the resource providers? If so, why do they need to be in<br>\ntheir own JAR for that to happen? Couldn't you just create a custom spring<br>\nconfiguration that uses the RPs but wires them to a different<br>\nimplementation of the DAO interfaces?</p>\n<p>Or am I misunderstanding the motivation?</p>\n<p>One other thing to note- this pull request doesn't actually merge cleanly<br>\n(you can see the This branch has conflicts message below that indicates<br>\nthis). It needs to merge in order for the CI server to build it and the<br>\ntest coverage tools to test it. here&lt;<br>\n<a href=\"https://help.github.com/articles/syncing-a-fork/\" target=\"_blank\" title=\"https://help.github.com/articles/syncing-a-fork/\">https://help.github.com/articles/syncing-a-fork/</a>&gt; are some details on how<br>\nto fix this...</p>\n<p>—<br>\nReply to this email directly or view it on GitHub&lt;<br>\n<a href=\"https://github.com/jamesagnew/hapi-fhir/pull/270#issuecomment-164749248\" target=\"_blank\" title=\"https://github.com/jamesagnew/hapi-fhir/pull/270#issuecomment-164749248\">https://github.com/jamesagnew/hapi-fhir/pull/270#issuecomment-164749248</a>&gt;.</p>\n<p>—<br>\nReply to this email directly or view it on GitHub<br>\n&lt;<a href=\"https://github.com/jamesagnew/hapi-fhir/pull/270#issuecomment-164839810\" target=\"_blank\" title=\"https://github.com/jamesagnew/hapi-fhir/pull/270#issuecomment-164839810\">https://github.com/jamesagnew/hapi-fhir/pull/270#issuecomment-164839810</a>&gt;.</p>\n</blockquote>\n<p>—<br>\nReply to this email directly or view it on GitHub&lt;<a href=\"https://github.com/jamesagnew/hapi-fhir/pull/270#issuecomment-164969546\" target=\"_blank\" title=\"https://github.com/jamesagnew/hapi-fhir/pull/270#issuecomment-164969546\">https://github.com/jamesagnew/hapi-fhir/pull/270#issuecomment-164969546</a>&gt;.</p>\n</blockquote>",
        "id": 153811613,
        "sender_full_name": "Zulip HAPI Bot",
        "timestamp": 1450235389
    }
]