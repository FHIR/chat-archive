[
    {
        "content": "<p>Trying to upload a CodeSystem (inside a transaction) i get  this exception for every concept:</p>\n<div class=\"codehilite\"><pre><span></span><code>May 26 13:00:55 vitu-data tomcat9[4410]: 2020-05-26 13:00:55.045 [hapi-fhir-jpa-scheduler-local-4] ERROR o.h.e.j.batch.internal.BatchingBatch [BatchingBatch.java:128] HHH000315: Exception executing batch [java.sql.BatchUpdateException: Batch entry 0 insert into TRM_CONCEPT (CODEVAL, CODESYSTEM_PID, DISPLAY, INDEX_STATUS, PARENT_PIDS, CODE_SEQUENCE, CONCEPT_UPDATED, PID) values (&#39;HGNC:3197&#39;, 72, &#39;EEF1A1P14&#39;, 1, 24122, NULL, &#39;2020-05-26 13:00:55.034+02&#39;, 12122) was aborted: ERROR: insert or update on table &quot;trm_concept&quot; violates foreign key constraint &quot;fk_concept_pid_cs_pid&quot;\nMay 26 13:00:55 vitu-data tomcat9[4410]:   Detail: Key (codesystem_pid)=(72) is not present in table &quot;trm_codesystem_ver&quot;.  Call getNextException to see other errors in the batch.], SQL: insert into TRM_CONCEPT (CODEVAL, CODESYSTEM_PID, DISPLAY, INDEX_STATUS, PARENT_PIDS, CODE_SEQUENCE, CONCEPT_UPDATED, PID) values (?, ?, ?, ?, ?, ?, ?, ?)\nMay 26 13:00:55 vitu-data tomcat9[4410]: 2020-05-26 13:00:55.045 [hapi-fhir-jpa-scheduler-local-4] WARN  o.h.e.jdbc.spi.SqlExceptionHelper [SqlExceptionHelper.java:137] SQL Error: 0, SQLState: 23503\nMay 26 13:00:55 vitu-data tomcat9[4410]: 2020-05-26 13:00:55.045 [hapi-fhir-jpa-scheduler-local-4] ERROR o.h.e.jdbc.spi.SqlExceptionHelper [SqlExceptionHelper.java:142] Batch entry 0 insert into TRM_CONCEPT (CODEVAL, CODESYSTEM_PID, DISPLAY, INDEX_STATUS, PARENT_PIDS, CODE_SEQUENCE, CONCEPT_UPDATED, PID) values (&#39;HGNC:3197&#39;, 72, &#39;EEF1A1P14&#39;, 1, 24122, NULL, &#39;2020-05-26 13:00:55.034+02&#39;, 12122) was aborted: ERROR: insert or update on table &quot;trm_concept&quot; violates foreign key constraint &quot;fk_concept_pid_cs_pid&quot;\nMay 26 13:00:55 vitu-data tomcat9[4410]:   Detail: Key (codesystem_pid)=(72) is not present in table &quot;trm_codesystem_ver&quot;.  Call getNextException to see other errors in the batch.\nMay 26 13:00:55 vitu-data tomcat9[4410]: 2020-05-26 13:00:55.045 [hapi-fhir-jpa-scheduler-local-4] ERROR o.h.e.jdbc.spi.SqlExceptionHelper [SqlExceptionHelper.java:142] ERROR: insert or update on table &quot;trm_concept&quot; violates foreign key constraint &quot;fk_concept_pid_cs_pid&quot;\nMay 26 13:00:55 vitu-data tomcat9[4410]:   Detail: Key (codesystem_pid)=(72) is not present in table &quot;trm_codesystem_ver&quot;.\nMay 26 13:00:55 vitu-data tomcat9[4410]: 2020-05-26 13:00:55.046 [hapi-fhir-jpa-scheduler-local-4] ERROR org.quartz.core.JobRunShell [JobRunShell.java:211] Job HAPI.ca.uhn.fhir.jpa.term.TermReindexingSvcImpl threw an unhandled Exception:\n</code></pre></div>",
        "id": 198746121,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1590490820
    },
    {
        "content": "<p>works fine when posting outside a bundle (maybe related to the getId Bug on urn:uuid Ids?)</p>",
        "id": 198746862,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1590491304
    }
]