[
    {
        "content": "<p>This is also in #implementers.</p>\n<p>HAPI Version 5.2 - Oracle 18xe - ojdbc 19.3.0.0</p>\n<p>I'm using the hapi-fhir-jpaserver-starter with the new JPA SearchBuilder enabled (the default).<br>\nOn startup, one of the initial SQL statements that is issued returns:  'ORA-00907: missing right parenthesis' multiple times and the app never starts.<br>\nI enabled showing SQL and found this SQL statement generated:</p>\n<div class=\"codehilite\"><pre><span></span><code>SELECT\n\n    * \nfrom\n    ( SELECT\n        RES_ID \n    FROM\n        ( SELECT\n            t0.RES_ID \n        FROM\n            HFJ_RESOURCE t0 \n        WHERE\n            (\n                (\n                    t0.RES_TYPE = ?\n                ) \n                AND (\n                    t0.RES_DELETED_AT IS NULL\n                )\n            )\n         )\n         AS RES_ID \n     )\n    WHERE\n        rownum &lt;= ?\n</code></pre></div>\n\n<p>The issue is the 'AS RES_ID'.   As far as Oracle is concerned, aliases on sub queries generally are not allowed.  If that line is removed, the query works fine.  I set the SQL Builder back to legacy mode and don't get this error.  I did nothing to the configuration except set it up to use Oracle.</p>\n<p>Let me know if more information is needed.</p>\n<p>Thanks.</p>",
        "id": 225203044,
        "sender_full_name": "Joe Atterberry",
        "timestamp": 1612463911
    }
]