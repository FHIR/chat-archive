[
    {
        "content": "<p>We want to use the expand operation for searching the code of a display value in the front-end (<a href=\"#narrow/stream/179166-implementers/topic/Codesystem.3A.20get.20code.20for.20display\" title=\"#narrow/stream/179166-implementers/topic/Codesystem.3A.20get.20code.20for.20display\">https://chat.fhir.org/#narrow/stream/179166-implementers/topic/Codesystem.3A.20get.20code.20for.20display</a>).<br>\nI just tried: <a href=\"https://fhir.molit.eu/r4/ValueSet/$expand?url=http://molit.eu/fhir/ValueSet/tumorboard-cancellation-reason&amp;filter=Sonstiger%20Grund\" target=\"_blank\" title=\"https://fhir.molit.eu/r4/ValueSet/$expand?url=http://molit.eu/fhir/ValueSet/tumorboard-cancellation-reason&amp;filter=Sonstiger%20Grund\">https://fhir.molit.eu/r4/ValueSet/$expand?url=http://molit.eu/fhir/ValueSet/tumorboard-cancellation-reason&amp;filter=Sonstiger%20Grund</a> on our server with no success.<br>\nHad also a very quick glimpse at the hapi code which looks good.</p>",
        "id": 187375548,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1580834985
    },
    {
        "content": "<p>is this a known issue or a sideffect of the _filter reworking?</p>",
        "id": 187375605,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1580835004
    },
    {
        "content": "<p>I also saw that <code>Enumerations.FilterOperator.EQUAL</code>was used. It would be nice to also have startswith or regex.<br>\nMain use case for us is autocompletion &amp; code for a display lookup. So a starts-with as the Operator would be nice.</p>",
        "id": 187375810,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1580835154
    },
    {
        "content": "<p>Actually the best option for the frontend auto-complete use-case would be a :contains</p>",
        "id": 187376218,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1580835465
    },
    {
        "content": "<p>I get a ValueSet expansion back which contains 7 items. Also I noticed that the filter in ValueSet definition is the same filter parameter you used in $expand.</p>",
        "id": 187386479,
        "sender_full_name": "Yunwei Wang",
        "timestamp": 1580841823
    },
    {
        "content": "<p>Yes, but due to the filter it only should return one</p>",
        "id": 187390109,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1580843777
    },
    {
        "content": "<p>Does your source value set have display field?</p>",
        "id": 187390825,
        "sender_full_name": "Yunwei Wang",
        "timestamp": 1580844232
    },
    {
        "content": "<p>sure: <a href=\"https://fhir.molit.eu/r4/ValueSet?url=http://molit.eu/fhir/ValueSet/tumorboard-cancellation-reason\" target=\"_blank\" title=\"https://fhir.molit.eu/r4/ValueSet?url=http://molit.eu/fhir/ValueSet/tumorboard-cancellation-reason\">https://fhir.molit.eu/r4/ValueSet?url=http://molit.eu/fhir/ValueSet/tumorboard-cancellation-reason</a></p>",
        "id": 187461506,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1580915428
    },
    {
        "content": "<p>I'd experienced same issue in my local server (hapi-4.0). <br>\nIn my case I defined several CS and VS separately, 'cause the concepts have properties. In this case the expansion with filter works fine. Have you tried on Grahames's server?</p>",
        "id": 187551765,
        "sender_full_name": "Marcelo Cabello",
        "timestamp": 1580999133
    },
    {
        "content": "<p>yes, Grahames Server throws an unsupported exception</p>",
        "id": 187553318,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1581000191
    },
    {
        "content": "<blockquote>\n<p>In my case I defined several CS and VS separately, 'cause the concepts have properties. In this case the expansion with filter works fine. Have you tried on Grahames's server?</p>\n</blockquote>\n<p>could you elaborate? We also defined our own VS and CS, but expand with filter doesn't work</p>",
        "id": 187553403,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1581000240
    },
    {
        "content": "<p>it seems a bug could be there. some days ago I got the right expansion. Now I can't do that. Using the ID instead the URL it's possible to get the right expansion  &lt;fhirUrl&gt;/ValueSet/[id]/$expand?filter=&lt;searchValue&gt;<br>\nOf course, it's not the right solution, but ...<br>\nIn this thread another user expose the same behavior: <a href=\"https://groups.google.com/forum/#!searchin/hapi-fhir/ValueSet$20contains$20include$20criteria$20with$20no$20system$20defined%7Csort:date/hapi-fhir/NrrMqselTFk/2yaOYELZBwAJ\" target=\"_blank\" title=\"https://groups.google.com/forum/#!searchin/hapi-fhir/ValueSet$20contains$20include$20criteria$20with$20no$20system$20defined%7Csort:date/hapi-fhir/NrrMqselTFk/2yaOYELZBwAJ\">https://groups.google.com/forum/#!searchin/hapi-fhir/ValueSet$20contains$20include$20criteria$20with$20no$20system$20defined%7Csort:date/hapi-fhir/NrrMqselTFk/2yaOYELZBwAJ</a></p>",
        "id": 187577396,
        "sender_full_name": "Marcelo Cabello",
        "timestamp": 1581015518
    },
    {
        "content": "<p>I see the same bug on the HAPI version in the LOINC fhir server, this request fails:</p>\n<p><a href=\"https://fhir.loinc.org/ValueSet/$expand?url=http://loinc.org/vs/top-2000-lab-observations-us&amp;filter=gluco\" target=\"_blank\" title=\"https://fhir.loinc.org/ValueSet/$expand?url=http://loinc.org/vs/top-2000-lab-observations-us&amp;filter=gluco\">https://fhir.loinc.org/ValueSet/$expand?url=http://loinc.org/vs/top-2000-lab-observations-us&amp;filter=gluco</a></p>\n<div class=\"codehilite\"><pre><span></span>  &quot;severity&quot;: &quot;error&quot;,\n  &quot;code&quot;: &quot;processing&quot;,\n  &quot;diagnostics&quot;: &quot;ValueSet contains include criteria with no system defined&quot;\n</pre></div>",
        "id": 190100221,
        "sender_full_name": "Alejandro Lopez Osornio",
        "timestamp": 1583777739
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191319\">@James Agnew</span> , can you shed some light on this? Is that a valid request? Thanks!</p>",
        "id": 193079347,
        "sender_full_name": "Alejandro Lopez Osornio",
        "timestamp": 1586196351
    }
]