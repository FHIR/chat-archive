[
    {
        "content": "<p>Hi All,</p>\n<p>Just a heads-up that the upcoming release of HAPI adds a terminology server which supports a bunch of funky new stuff including ValueSet expansion with filtering and text search, and searches like <code>Observation?code:in=foo</code> and <code>Observation?code:below=foo</code>.</p>\n<p>If anyone wants to test this, that would be greatly appreciated.  Our public server has been loaded with SNOMED CT (international edition) and LOINC.. hopefully more to come. Endpoint is here: <a href=\"http://fhirtest.uhn.ca/baseDstu3\" target=\"_blank\" title=\"http://fhirtest.uhn.ca/baseDstu3\">http://fhirtest.uhn.ca/baseDstu3</a></p>",
        "id": 153834875,
        "sender_full_name": "James Agnew",
        "timestamp": 1466804300
    },
    {
        "content": "<p>That's fabulous! Do you include load scripts for SNOMED and LOINC? </p>",
        "id": 153834876,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1466805943
    },
    {
        "content": "<p>Yup. The CLI will have the ability to load either of those CS's from their respective distribution zips.</p>\n<p>It's a bit of a painful process, the SCT import takes about an hour on my high-powered laptop but it's pretty zippy once it's loaded.</p>",
        "id": 153834877,
        "sender_full_name": "James Agnew",
        "timestamp": 1466806325
    },
    {
        "content": "<p>Before I go testing, does it support the $expand option on multiple filters?</p>",
        "id": 153835069,
        "sender_full_name": "Naminder Soorma",
        "timestamp": 1467028817
    },
    {
        "content": "<p>Yup, It should support this. FYI David Hay gave it a whirl on Friday and promptly discovered that it wasn't properly expanding codes that have multiple parents. That's now fixed.</p>\n<p>If you find anything else you think should work but doesn't, awesome.</p>",
        "id": 153835091,
        "sender_full_name": "James Agnew",
        "timestamp": 1467039017
    },
    {
        "content": "<p>Incidentally, here's a sample David provided: <a href=\"http://fhirtest.uhn.ca/baseDstu3/ValueSet/condition-code/$expand?filter=ankylosing\" target=\"_blank\" title=\"http://fhirtest.uhn.ca/baseDstu3/ValueSet/condition-code/$expand?filter=ankylosing\">http://fhirtest.uhn.ca/baseDstu3/ValueSet/condition-code/$expand?filter=ankylosing</a></p>",
        "id": 153835108,
        "sender_full_name": "James Agnew",
        "timestamp": 1467041181
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191319\">@James Agnew</span>  When I run David's sample, the output  parameter  is not a valid ValueSet resource.   There are missing elements between  the meta and expansion elements. </p>",
        "id": 153835248,
        "sender_full_name": "Eric Haas",
        "timestamp": 1467071270
    },
    {
        "content": "<p>Oops, that was missing. Fixed.</p>\n<p>This brings me to a different question though.. Should/can the output ValueSet of the expansion contain the <code>ValueSet.compose</code> element that caused the expansion? The invariants allow this, the description is silent, and the examples don't have this.</p>",
        "id": 153835456,
        "sender_full_name": "James Agnew",
        "timestamp": 1467122001
    },
    {
        "content": "<p>James - so you haven't noticed ExpansionProfile? See ExpansionProfile.includeDefinition</p>",
        "id": 153835516,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1467143345
    },
    {
        "content": "<p>whoa! no, i didn't know about that.... </p>\n<p>FHIR terminology services are really elegantly designed, I like it.</p>",
        "id": 153835518,
        "sender_full_name": "James Agnew",
        "timestamp": 1467143446
    },
    {
        "content": "<p>Mostly elegant, but not ExpansionProfile IMO - being full of binary flags leads to combinatorial explosion of instances &amp; not a good experience for client or server programmer</p>",
        "id": 153835551,
        "sender_full_name": "Michael Lawley",
        "timestamp": 1467155455
    },
    {
        "content": "<p>That's excellent, James.  I'll start testing it - both on your public server and on mine.</p>",
        "id": 153835864,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1467289147
    }
]