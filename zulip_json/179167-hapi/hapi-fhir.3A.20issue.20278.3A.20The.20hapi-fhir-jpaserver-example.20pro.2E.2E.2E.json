[
    {
        "content": "<p>karlmdavis opened <a href=\"https://github.com/jamesagnew/hapi-fhir/issues/278\" target=\"_blank\" title=\"https://github.com/jamesagnew/hapi-fhir/issues/278\">issue 278</a></p>\n<blockquote>\n<p>This class has a number of <code>if ... else</code> blocks that cope with the differences between DSTU1 and DSTU2, but does not yet include any logic for DSTU2.1.</p>\n<p>Not a big deal, but would be nice.</p>\n</blockquote>",
        "id": 153811893,
        "sender_full_name": "Zulip HAPI Bot",
        "timestamp": 1452178791
    },
    {
        "content": "<p>karlmdavis <a href=\"https://github.com/jamesagnew/hapi-fhir/issues/278#issuecomment-169689785\" target=\"_blank\" title=\"https://github.com/jamesagnew/hapi-fhir/issues/278#issuecomment-169689785\">commented</a> on <a href=\"https://github.com/jamesagnew/hapi-fhir/issues/278\" target=\"_blank\" title=\"https://github.com/jamesagnew/hapi-fhir/issues/278\">issue 278</a></p>\n<blockquote>\n<p>I've created Pull Request #279 to address the <code>JpaServerDemo</code> changes needed. In addition, the following patch can be applied manually to address the other files that need to be updated to switch things to DSTU2.1:</p>\n<div class=\"codehilite\"><pre>diff --git a/hapi-fhir-jpaserver-example/src/main/java/ca/uhn/fhir/jpa/demo/FhirServerConfig.java b/hapi-fhir-jpaserver-example/src/main/java/ca/uhn/fhir/jpa/demo/FhirServerConfig.java\nindex 9186ebd..4f6e6b1 100644\n--- a/hapi-fhir-jpaserver-example/src/main/java/ca/uhn/fhir/jpa/demo/FhirServerConfig.java\n+++ b/hapi-fhir-jpaserver-example/src/main/java/ca/uhn/fhir/jpa/demo/FhirServerConfig.java\n@@ -15,16 +15,16 @@\n import org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean;\n import org.springframework.transaction.annotation.EnableTransactionManagement;\n\n-import ca.uhn.fhir.jpa.config.BaseJavaConfigDstu2;\n+import ca.uhn.fhir.jpa.config.BaseJavaConfigDstu21;\n import ca.uhn.fhir.jpa.dao.DaoConfig;\n-import ca.uhn.fhir.jpa.util.SubscriptionsRequireManualActivationInterceptorDstu2;\n+import ca.uhn.fhir.jpa.util.SubscriptionsRequireManualActivationInterceptorDstu21;\n import ca.uhn.fhir.rest.server.interceptor.IServerInterceptor;\n import ca.uhn.fhir.rest.server.interceptor.LoggingInterceptor;\n import ca.uhn.fhir.rest.server.interceptor.ResponseHighlighterInterceptor;\n\n @Configuration\n @EnableTransactionManagement()\n-public class FhirServerConfig extends BaseJavaConfigDstu2 {\n+public class FhirServerConfig extends BaseJavaConfigDstu21 {\n\n    /**\n     * Configure FHIR properties around the the JPA server via this bean\n@@ -108,7 +108,7 @@\n\n    @Bean(autowire = Autowire.BY_TYPE)\n    public IServerInterceptor subscriptionSecurityInterceptor() {\n-       SubscriptionsRequireManualActivationInterceptorDstu2 retVal = new SubscriptionsRequireManualActivationInterceptorDstu2();\n+       SubscriptionsRequireManualActivationInterceptorDstu21 retVal = new SubscriptionsRequireManualActivationInterceptorDstu21();\n        return retVal;\n    }\n\ndiff --git a/hapi-fhir-jpaserver-example/src/main/webapp/WEB-INF/web.xml b/hapi-fhir-jpaserver-example/src/main/webapp/WEB-INF/web.xml\nindex c81a6f6..ad7ebb5 100644\n--- a/hapi-fhir-jpaserver-example/src/main/webapp/WEB-INF/web.xml\n+++ b/hapi-fhir-jpaserver-example/src/main/webapp/WEB-INF/web.xml\n@@ -42,7 +42,7 @@\n        &lt;/init-param&gt;\n        &lt;init-param&gt;\n            &lt;param-name&gt;FhirVersion&lt;/param-name&gt;\n-           &lt;param-value&gt;DSTU2&lt;/param-value&gt;\n+           &lt;param-value&gt;DSTU2_1&lt;/param-value&gt;\n        &lt;/init-param&gt;\n        &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;\n    &lt;/servlet&gt;\ndiff --git a/hapi-fhir-jpaserver-example/src/test/java/ca/uhn/fhir/jpa/demo/ExampleServerIT.java b/hapi-fhir-jpaserver-example/src/test/java/ca/uhn/fhir/jpa/demo/ExampleServerIT.java\nindex f4efde6..13463e4 100644\n--- a/hapi-fhir-jpaserver-example/src/test/java/ca/uhn/fhir/jpa/demo/ExampleServerIT.java\n+++ b/hapi-fhir-jpaserver-example/src/test/java/ca/uhn/fhir/jpa/demo/ExampleServerIT.java\n@@ -7,13 +7,13 @@\n\n import org.eclipse.jetty.server.Server;\n import org.eclipse.jetty.webapp.WebAppContext;\n+import org.hl7.fhir.dstu21.model.Patient;\n import org.hl7.fhir.instance.model.api.IIdType;\n import org.junit.AfterClass;\n import org.junit.BeforeClass;\n import org.junit.Test;\n\n import ca.uhn.fhir.context.FhirContext;\n-import ca.uhn.fhir.model.dstu2.resource.Patient;\n import ca.uhn.fhir.rest.client.IGenericClient;\n import ca.uhn.fhir.rest.client.ServerValidationModeEnum;\n import ca.uhn.fhir.rest.client.interceptor.LoggingInterceptor;\n</pre></div>\n\n\n</blockquote>",
        "id": 153811895,
        "sender_full_name": "Zulip HAPI Bot",
        "timestamp": 1452179501
    },
    {
        "content": "<p>jamesagnew closed <a href=\"https://github.com/jamesagnew/hapi-fhir/issues/278\" target=\"_blank\" title=\"https://github.com/jamesagnew/hapi-fhir/issues/278\">issue 278</a></p>",
        "id": 153811911,
        "sender_full_name": "Zulip HAPI Bot",
        "timestamp": 1452219950
    }
]