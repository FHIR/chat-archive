[
    {
        "content": "<p>Hi, </p>\n<p>I'm a bit confused how to deal with these different aspects.<br>\nI'm pretty new to profiling to forgive me if I ask stupid questions.</p>\n<p>We're working on FHIR Questionnaire solution. The end-goal is that we have an implementation of SDC. Until we get there we want to extend that profile so that the profile reflects what our application supports at the current moment in time. So profile versioning will go along with application versioning.</p>\n<p>We're using HAPI to manage the Questionnaires and I'm currently working on the $validate operator.<br>\nThis is where my confusion starts.</p>\n<ul>\n<li>Should I create a Profile in for example Forge, so that the DefaultProfileValidator picks this up and validates against our profile?</li>\n<li>Should I create a @ResourceDef that extends Questionnaire to define the extensions and add constraints to properties? (doesn't look like there is a validator that can validate a resource against a @ResourceDef class).</li>\n<li>Should I create a StructureDefinition resource first so that the validator can resolve this and perform validation?</li>\n</ul>\n<p>Can the @ResourceDef class not automatically map onto a StructureDefinition / profile for this purpose? </p>\n<p>Thanks in advance for any guidance you can give me!</p>\n<p>Kind regards,<br>\nKristof.</p>",
        "id": 208206080,
        "sender_full_name": "Kristof Taveirne",
        "timestamp": 1598529046
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"218552\">@Kristof Taveirne</span> you don't need to do any of those things in principle; you just (a) ensure that the SDC package is available in your HAPI install and (b) ask the validate to validate against the canonical e.g. <code>http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire</code>. All the other details are already sorted.</p>\n<p><span class=\"user-mention\" data-user-id=\"191319\">@James Agnew</span> I'm not sure exactly how this gets integrated - I don't know what Kristof actually needs to do</p>",
        "id": 208280504,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1598564707
    },
    {
        "content": "<p>Hi Graham,</p>\n<p>What I did until now <br>\nI implemented IValidationSupport to return a StructureDefinition.<br>\nThat StructureDefinition has \"<a href=\"http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire\">http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire</a>\" as a base and a differential.</p>\n<p>When I register that in my validationChain and add a snapshot generator it looks like I'm one step closer.</p>\n<p>Now I get the following:<br>\nUnknown base definition: <a href=\"http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire\">http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire</a></p>\n<p>Which kinda makes sense since I didn't register the base in the IValidationSupport implementation.</p>\n<p>So, I'm very much interested how I can add the SDC package to my HAPI install like you mentioned. <br>\nIs there a maven package I can install where I can get the StructureDefinition for SDC from? </p>\n<p>Thanks again!</p>\n<p>Kristof.</p>",
        "id": 208551462,
        "sender_full_name": "Kristof Taveirne",
        "timestamp": 1598877947
    },
    {
        "content": "<p>well, it's an NPM package that you need. You'll have to consult to the HAPI documentation for the version you have to see how to load NPM packages into scope</p>",
        "id": 208551737,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1598878087
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"218552\">@Kristof Taveirne</span>  hapi has the capability to load an ig since 5.1.0, see release notes <a href=\"https://hapifhir.io/hapi-fhir/blog/20200813_hapi_fhir_5_1_0\">here</a>, <span class=\"user-mention\" data-user-id=\"191427\">@Jens Villadsen</span> has provided a pr <a href=\"https://github.com/hapifhir/hapi-fhir-jpaserver-starter/pull/127\">here</a> how to use it with the jpa-server-starter project. The myNpmJpaValidationSupport is then directly integrated into the JpaValidationSupportChain.</p>",
        "id": 208573165,
        "sender_full_name": "Oliver Egger",
        "timestamp": 1598887828
    },
    {
        "content": "<p>Yep - that works</p>",
        "id": 208576357,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1598889205
    },
    {
        "content": "<p>You might wanna nudge <span class=\"user-mention\" data-user-id=\"191319\">@James Agnew</span> to accept the PR</p>",
        "id": 208576515,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1598889256
    },
    {
        "content": "<p>Or <span class=\"user-mention\" data-user-id=\"191505\">@Sean McIlvenna</span></p>",
        "id": 208576706,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1598889344
    },
    {
        "content": "<p>Looking...</p>",
        "id": 208578364,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1598889927
    },
    {
        "content": "<p>Responded with some questions</p>",
        "id": 208579107,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1598890196
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191505\">Sean McIlvenna</span> <a href=\"#narrow/stream/179167-hapi/topic/.40ResourceDef.20vs.20profile.20vs.20StructureDefinition/near/208579107\">said</a>:</p>\n<blockquote>\n<p>Responded with some questions</p>\n</blockquote>\n<p>Responded with some responses ;)</p>",
        "id": 208581897,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1598891277
    },
    {
        "content": "<p>This is great!</p>\n<p>I see this is JPA server only right now, but release notes say plain server support will be added soon. <br>\nI'm using a plain server right now so I'll keep following what's going on on the topic. In the mean time, I have some studying to do :)<br>\nLove your work guys! Thank you</p>",
        "id": 208586745,
        "sender_full_name": "Kristof Taveirne",
        "timestamp": 1598893263
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"218552\">@Kristof Taveirne</span> fyi a sample for a $validate operation with a plain server and ig support is <a href=\"https://github.com/ahdis/matchbox/blob/master/src/main/java/ch/ahdis/matchbox/\">here</a>, however it has not yet added the ig loading from 5.1.0</p>",
        "id": 208600826,
        "sender_full_name": "Oliver Egger",
        "timestamp": 1598900268
    }
]