[
    {
        "content": "<p>Is there a way I can search for resources that have a certain extension value in them? For example, I'm storing a valueString in the Patient resource that can be YES or NO or MAYBE. How do I search for patients that have this value in the extension? The URL is 'baseURL/agree'</p>",
        "id": 217848069,
        "sender_full_name": "Dexter",
        "timestamp": 1606284879
    },
    {
        "content": "<p>I'm pretty sure you should build your own search parameter for this; <a href=\"https://hl7.org/fhir/domainresource.html#search\">https://hl7.org/fhir/domainresource.html#search</a></p>",
        "id": 217863778,
        "sender_full_name": "Marc Sandberg",
        "timestamp": 1606297951
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"280425\">Marc Sandberg</span> <a href=\"#narrow/stream/179167-hapi/topic/Query.20on.20extension/near/217863778\">said</a>:</p>\n<blockquote>\n<p>I'm pretty sure you should build your own search parameter for this; <a href=\"https://hl7.org/fhir/domainresource.html#search\">https://hl7.org/fhir/domainresource.html#search</a></p>\n</blockquote>\n<p>correct</p>",
        "id": 217892442,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1606315157
    },
    {
        "content": "<p>But I read that for a search extension, I'll need to modify the server code?</p>",
        "id": 217964569,
        "sender_full_name": "Dexter",
        "timestamp": 1606364752
    },
    {
        "content": "<p>I think I was successful in making a search extension, how do I use it now?</p>",
        "id": 217968315,
        "sender_full_name": "Dexter",
        "timestamp": 1606370166
    },
    {
        "content": "<p>IIRC You create a SearchParameter resource and save to hapi. After that it will recognise the new search.</p>",
        "id": 217969580,
        "sender_full_name": "David Hay",
        "timestamp": 1606372151
    },
    {
        "content": "<p>I did create a search parameter (thanks for pointing me to the right resource!), but not sure if it's correct, and how to use it. May I paste the request body here?</p>",
        "id": 217969906,
        "sender_full_name": "Dexter",
        "timestamp": 1606372697
    },
    {
        "content": "<p>sure....</p>",
        "id": 218045416,
        "sender_full_name": "David Hay",
        "timestamp": 1606433851
    },
    {
        "content": "<p>{<br>\n  \"resourceType\" : \"SearchParameter\",<br>\n  \"name\" : \"Patient search by accept\",<br>\n  \"status\" : \"active\",<br>\n  \"description\" : \"Search by patient accepted parameter\",<br>\n  \"purpose\" : \"Search by patient accepted parameter\",<br>\n  \"code\" : \"PatientAcceptSearch\",<br>\n  \"base\" : [\"Patient\"],<br>\n  \"type\" : \"string\",<br>\n  \"xpath\" : \"f:Patient/f:extension[@url='<a href=\"https://hapi.fhir.org/baseR4/Accepted']\">https://hapi.fhir.org/baseR4/Accepted']</a>\",<br>\n  \"xpathUsage\" : \"normal\",<br>\n  \"target\" : [\"Patient\"],<br>\n  \"comparator\" : [\"eq\"],<br>\n  \"modifier\" : [\"exact\"]<br>\n}</p>\n<p>I used this to create the search parameter. How do I use this to search all patients that have \"YES\" in the extension?</p>",
        "id": 218055857,
        "sender_full_name": "Dexter",
        "timestamp": 1606450897
    },
    {
        "content": "<p>Have you tried [host]/Patient?PatientAcceptSearch=yes ? (after saving the resource on the server).  Note that this is just the way that hapi works - the spec doesn't require it AFAIK...</p>",
        "id": 218113991,
        "sender_full_name": "David Hay",
        "timestamp": 1606497747
    },
    {
        "content": "<p>Oh, and the name shouldn't have spaces ('computer friendly')...</p>",
        "id": 218115411,
        "sender_full_name": "David Hay",
        "timestamp": 1606498793
    },
    {
        "content": "<p>Wow that works! Thank you!</p>",
        "id": 218263475,
        "sender_full_name": "Dexter",
        "timestamp": 1606728148
    },
    {
        "content": "<p>Well, erm, I tried to search for another extension, and this doesn't work. What am I doing wrong?</p>\n<p>Search parameter <a href=\"http://hapi.fhir.org/baseR4/SearchParameter/1704205\">here</a></p>\n<div class=\"codehilite\"><pre><span></span><code>{\n    &quot;resourceType&quot;: &quot;SearchParameter&quot;,\n    &quot;name&quot;: &quot;PractitionerRoleSearch&quot;,\n    &quot;status&quot;: &quot;active&quot;,\n    &quot;description&quot;: &quot;Search by Practitioner their role&quot;,\n    &quot;purpose&quot;: &quot;Search by Practitioner by their role&quot;,\n    &quot;code&quot;: &quot;PractitionerRoleSearch&quot;,\n    &quot;base&quot;: [&quot;Practitioner&quot;],\n    &quot;type&quot;: &quot;string&quot;,\n    &quot;expression&quot;: &quot;Practitioner.extension(&#39;https://hapi.fhir.org/baseR4/Role&#39;)&quot;,\n    &quot;xpath&quot;: &quot;f:Practitioner/f:extension[@url=&#39;https://hapi.fhir.org/baseR4/Role&#39;]&quot;,\n    &quot;xpathUsage&quot;: &quot;normal&quot;,\n    &quot;target&quot;: [&quot;Practitioner&quot;],\n    &quot;comparator&quot;: [&quot;eq&quot;],\n    &quot;modifier&quot;: [&quot;exact&quot; ]\n}\n</code></pre></div>\n<p>I'm using it like so, <code>GET http://hapi.fhir.org/baseR4/Practitioner?PractitionerRoleSearch=Care Manager</code>, but I get an error saying <code>Unknown search parameter</code>.</p>",
        "id": 219062356,
        "sender_full_name": "Dexter",
        "timestamp": 1607336727
    },
    {
        "content": "<p>I played around with the JSON, still doesn't work, I'm not sure what I'm doing wrong</p>",
        "id": 219186636,
        "sender_full_name": "Dexter",
        "timestamp": 1607419791
    },
    {
        "content": "<p>Also, is there a way I can resolve references directly? Say I have a careteam I'm querying, is there a way I can resolve <code>subject</code> reference directly, meaning instead of <code>subject</code> having a reference, it just has the patient's data?</p>",
        "id": 219194029,
        "sender_full_name": "Dexter",
        "timestamp": 1607425364
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"359486\">Dexter</span> <a href=\"#narrow/stream/179167-hapi/topic/Query.20on.20extension/near/219194029\">said</a>:</p>\n<blockquote>\n<p>Also, is there a way I can resolve references directly? Say I have a careteam I'm querying, is there a way I can resolve <code>subject</code> reference directly, meaning instead of <code>subject</code> having a reference, it just has the patient's data?</p>\n</blockquote>\n<p>No, you cannot put the patient's data in the subject field. That would not be valid FHIR.<br>\nYou can however do a search and then include the Patient resource in the search result:<br>\n<code>GET &lt;base&gt;/CareTeam?_id=&lt;careteam_id&gt;&amp;_include=CareTeam:patient</code></p>",
        "id": 219206757,
        "sender_full_name": "Mirjam Baltus",
        "timestamp": 1607434630
    },
    {
        "content": "<p>Okay, so that's not possible, yeah makes sense. Thanks!</p>",
        "id": 219222376,
        "sender_full_name": "Dexter",
        "timestamp": 1607442496
    },
    {
        "content": "<p>In the model of CareTeam, the element subject has a type of Reference (Patient or Group).</p>",
        "id": 219284082,
        "sender_full_name": "Lin Zhang",
        "timestamp": 1607474350
    },
    {
        "content": "<p>Any pointers on the search parameters?</p>",
        "id": 219296742,
        "sender_full_name": "Dexter",
        "timestamp": 1607488047
    },
    {
        "content": "<p>Not sure - <span class=\"user-mention\" data-user-id=\"191319\">@James Agnew</span> - it used to be (I thought) that if you created a searchParameter on the hapi server that it would automatically enable that search - am I confused (again?)</p>",
        "id": 219417804,
        "sender_full_name": "David Hay",
        "timestamp": 1607558970
    },
    {
        "content": "<p>Or was that in SMILE server rather than the public test server...</p>",
        "id": 219419024,
        "sender_full_name": "David Hay",
        "timestamp": 1607560059
    },
    {
        "content": "<p>I can't seem to query on the existing search parameters defined by others on the server, I think they're okay too, what is it that is leading to the error? <code>https://hapi.fhir.org/baseR4/SearchParameter</code></p>",
        "id": 219582102,
        "sender_full_name": "Dexter",
        "timestamp": 1607679387
    },
    {
        "content": "<p>Hello <br>\nI'm struggling with the same problem as <span class=\"user-mention\" data-user-id=\"359486\">@Dexter</span>  </p>\n<p>Based on the previous conversation in this topic I tried this: </p>\n<p>1) Generate a new search parameter \"PatientAcceptSearch\"  by following POST Command: <br>\n<a href=\"/user_uploads/10155/viaIOElpZYGSZVAkG-273Ixb/image.png\">image.png</a> <br>\n-&gt; This seemed to work, since I found the ressource on the server: <br>\n<a href=\"/user_uploads/10155/CilgiYDj7ka7cj0pasleXBxW/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/viaIOElpZYGSZVAkG-273Ixb/image.png\" title=\"image.png\"><img src=\"/user_uploads/10155/viaIOElpZYGSZVAkG-273Ixb/image.png\"></a></div><div class=\"message_inline_image\"><a href=\"/user_uploads/10155/CilgiYDj7ka7cj0pasleXBxW/image.png\" title=\"image.png\"><img src=\"/user_uploads/10155/CilgiYDj7ka7cj0pasleXBxW/image.png\"></a></div><p>2) Query for Patients with that extensions <br>\n<a href=\"http://hapi.fhir.org/baseR4/Patient?PatientAcceptSearch=yes\">http://hapi.fhir.org/baseR4/Patient?PatientAcceptSearch=yes</a> <br>\n-&gt; Not working, keep getting error  \"Unknown search parameter \\\"PatientAcceptSearch\\\" for resource type \\\"Patient\\\". Valid search parameters for this search are: [_id, _language,.... \" </p>\n<p>Could someone tell me what I got wrong?</p>",
        "id": 237976104,
        "sender_full_name": "Traven",
        "timestamp": 1620499198
    }
]