[
    {
        "content": "<p>Hi,</p>\n<p>I have the issue with HAPI &gt;= 3.6.0 </p>\n<p>according to the constarints defined by the FHIR spec for a bundle resource, particulary bdl-4 constraint, which states:</p>\n<blockquote>\n<p>\"entry.response mandatory for batch-response/transaction-response/history, otherwise prohibquote</p>\n</blockquote>\n<p>, there is no «entry.response» allowed for bundle.type = searchset.</p>\n<p>However, Schematron validator returns error </p>\n<div class=\"codehilite\"><pre><span></span><span class=\"p\">{</span>\n  <span class=\"nt\">&quot;resourceType&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;OperationOutcome&quot;</span><span class=\"p\">,</span>\n  <span class=\"nt\">&quot;text&quot;</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n    <span class=\"nt\">&quot;status&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;generated&quot;</span><span class=\"p\">,</span>\n    <span class=\"nt\">&quot;div&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;&lt;div xmlns=\\&quot;http://www.w3.org/1999/xhtml\\&quot;&gt;&lt;h1&gt;Operation Outcome&lt;/h1&gt;&lt;table border=\\&quot;0\\&quot;&gt;&lt;tr&gt;&lt;td style=\\&quot;font-weight: bold;\\&quot;&gt;ERROR&lt;/td&gt;&lt;td&gt;[Bundle]&lt;/td&gt;&lt;td&gt;&lt;pre&gt;[error] in /*:Bundle[namespace-uri()=&#39;http://hl7.org/fhir&#39;][1] @ Bundle bdl-4: entry.response mandatory for batch-response/transaction-response/history, otherwise prohibited Test=not(f:entry/f:response) or (f:type/@value = &#39;batch-response&#39;) or (f:type/@value = &#39;transaction-response&#39;) or (f:type/@value = &#39;history&#39;)&lt;/pre&gt;&lt;/td&gt;\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\n\\t\\t\\t&lt;/tr&gt;\\n\\t\\t&lt;/table&gt;\\n\\t&lt;/div&gt;&quot;</span>\n  <span class=\"p\">},</span>\n  <span class=\"nt\">&quot;issue&quot;</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n    <span class=\"p\">{</span>\n      <span class=\"nt\">&quot;severity&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;error&quot;</span><span class=\"p\">,</span>\n      <span class=\"nt\">&quot;code&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;processing&quot;</span><span class=\"p\">,</span>\n      <span class=\"nt\">&quot;diagnostics&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;[error] in /*:Bundle[namespace-uri()=&#39;http://hl7.org/fhir&#39;][1] @ Bundle bdl-4: entry.response mandatory for batch-response/transaction-response/history, otherwise prohibited Test=not(f:entry/f:response) or (f:type/@value = &#39;batch-response&#39;) or (f:type/@value = &#39;transaction-response&#39;) or (f:type/@value = &#39;history&#39;)&quot;</span><span class=\"p\">,</span>\n      <span class=\"nt\">&quot;location&quot;</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n        <span class=\"s2\">&quot;Bundle&quot;</span>\n      <span class=\"p\">]</span>\n    <span class=\"p\">}</span>\n  <span class=\"p\">]</span>\n<span class=\"p\">}</span>\n</pre></div>\n\n\n<p>That looks like HAPI server  automatically adds entry.response field and seems you've mentioned that in the changelog for 3.6.0 Release: </p>\n<blockquote>\n<p>\"When operating in R4 mode, the HAPI FHIR server will now populate Bundle.entry.response for history and search results, which is did not previously do.\"</p>\n</blockquote>\n<p>So technically there are contradtiction with the specification. What is your advice to deal with that?</p>",
        "id": 157591456,
        "sender_full_name": "Anton Zhuchkov",
        "timestamp": 1549356258
    }
]