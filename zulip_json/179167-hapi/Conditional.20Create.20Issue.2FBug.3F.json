[
    {
        "content": "<p>I have an identifier in an Observation resource that looks as follows:</p>\n<div class=\"codehilite\"><pre><span></span><code>                &quot;identifier&quot;: [\n                    {\n                        &quot;value&quot;: &quot;B4E782FFFF4B4A10-VL-testing-Ren-urn:oid:2.2.2.333-150364-41.34-6048-20210427133226.444+0800&quot;\n                    }\n                ]\n</code></pre></div>\n<p>The search on this identifier works fine. However, when I have a Conditional Create in a transaction bundle</p>\n<div class=\"codehilite\"><pre><span></span><code>            &quot;request&quot;: {\n                &quot;method&quot;: &quot;POST&quot;,\n                &quot;url&quot;: &quot;Observation&quot;,\n                &quot;ifNoneExist&quot;: &quot;identifier=B4E782FFFF4B4A10-VL-testing-Ren-urn:oid:2.2.2.333-150364-41.34-6048-20210427133226.444+0800&quot;\n            }\n</code></pre></div>\n<p>It does not work and now I have multiple resources with identical content loaded on the server.</p>\n<p>However, if my resource has a 'system' entry as well as a 'value' entry, then the conditional create works. Am I doing something wrong?</p>\n<p>Just in case the problem is due to the lack of a system field I added one to the identifier, gave it a constant value, and added that to the conditional create so it mirrored the Device case. It still failed to work.</p>",
        "id": 238468352,
        "sender_full_name": "Brian Reinhold",
        "timestamp": 1620824179
    },
    {
        "content": "<p>Turns out (thanks James Agnew) that my identifier has a '+' sign in it which is okay but when used in the URL of the 'ifNoneExist' field,  the '+' sign needs to be escaped. I did not know this but there are two ways to escape a 'space' in a URL, the common %20 but also a '+' sign. Since I did not escape the plus sign, HAPI FHIR decoded the URL and the '+' sign became a 'space'. Thus the conditional create did not find such an identifier.</p>\n<p>The solution was to escape the '+' sign (%2B).</p>",
        "id": 238752851,
        "sender_full_name": "Brian Reinhold",
        "timestamp": 1620992210
    }
]