[
    {
        "content": "<p>Hi,</p>\n<p>I'm running the HAPI jpa server version 5.0.2, and when I'm running into an issue when I run the following:</p>\n<div class=\"codehilite\"><pre><span></span><code>curl -X POST \\\n  &#39;https://hapifhir-acc.mcapp.nl/hapi-fhir-jpaserver/fhir/Bundle/$validate&#39; \\\n  -H &#39;Cache-Control: no-cache&#39; \\\n  -H &#39;Content-Type: application/json&#39; \\\n  -H &#39;Postman-Token: 2eca19eb-9ebf-8442-ca6a-9de44f4a7cdf&#39; \\\n  -d &#39;{&quot;resourceType&quot;:&quot;Bundle&quot;,&quot;entry&quot;:[{&quot;fullUrl&quot;:&quot;urn:uuid:5ee894a3cee7b5.87207907&quot;,&quot;request&quot;:{&quot;method&quot;:&quot;POST&quot;,&quot;url&quot;:&quot;Organization&quot;},&quot;resource&quot;:{&quot;resourceType&quot;:&quot;Organization&quot;,&quot;meta&quot;:{&quot;profile&quot;:[&quot;http:\\/\\/fhir.nl\\/fhir\\/StructureDefinition\\/nl-core-organization&quot;],&quot;tag&quot;:[{&quot;code&quot;:&quot;epd:finaltest123&quot;,&quot;system&quot;:&quot;https:\\/\\/source-id.medicore.nl\\/&quot;}]},&quot;identifier&quot;:[{&quot;system&quot;:&quot;https:\\/\\/unique-id.medicore.nl\\/&quot;,&quot;value&quot;:&quot;epd:finaltest123&quot;}],&quot;name&quot;:&quot;JWZ&quot;}}],&quot;type&quot;:&quot;transaction&quot;}&#39;\n</code></pre></div>\n\n\n<p>(please note: the server above is not reachable from the public internet)</p>\n<p>As a result, It gives me the following validation error:</p>\n<div class=\"codehilite\"><pre><span></span><code>{\n    &quot;resourceType&quot;: &quot;OperationOutcome&quot;,\n    &quot;text&quot;: {\n        &quot;status&quot;: &quot;generated&quot;,\n        &quot;div&quot;: &quot;&lt;div xmlns=\\&quot;http://www.w3.org/1999/xhtml\\&quot;&gt;&lt;h1&gt;Operation Outcome&lt;/h1&gt;&lt;table border=\\&quot;0\\&quot;&gt;&lt;tr&gt;&lt;td style=\\&quot;font-weight: bold;\\&quot;&gt;ERROR&lt;/td&gt;&lt;td&gt;[]&lt;/td&gt;&lt;td&gt;&lt;pre&gt;Failed to call access method: org.hl7.fhir.exceptions.DefinitionException: Attempt to a slice an element that does not repeat: Extension.valueCodeableConcept/valueCodeableConcept from http://nictiz.nl/fhir/StructureDefinition/code-specification in http://fhir.nl/fhir/StructureDefinition/nl-core-contactpoint&lt;/pre&gt;&lt;/td&gt;\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\n\\t\\t\\t&lt;/tr&gt;\\n\\t\\t&lt;/table&gt;\\n\\t&lt;/div&gt;&quot;\n    },\n    &quot;issue&quot;: [\n        {\n            &quot;severity&quot;: &quot;error&quot;,\n            &quot;code&quot;: &quot;processing&quot;,\n            &quot;diagnostics&quot;: &quot;Failed to call access method: org.hl7.fhir.exceptions.DefinitionException: Attempt to a slice an element that does not repeat: Extension.valueCodeableConcept/valueCodeableConcept from http://nictiz.nl/fhir/StructureDefinition/code-specification in http://fhir.nl/fhir/StructureDefinition/nl-core-contactpoint&quot;\n        }\n    ]\n}\n</code></pre></div>\n\n\n<p>It tries to validate this (readable) bundle, that contains 1 Organization resource:</p>\n<div class=\"codehilite\"><pre><span></span><code>{\n    &quot;resourceType&quot;: &quot;Bundle&quot;,\n    &quot;entry&quot;: [{\n        &quot;fullUrl&quot;: &quot;urn:uuid:5ee894a3cee7b5.87207907&quot;,\n        &quot;request&quot;: {\n            &quot;method&quot;: &quot;POST&quot;,\n            &quot;url&quot;: &quot;Organization&quot;\n        },\n        &quot;resource&quot;: {\n            &quot;resourceType&quot;: &quot;Organization&quot;,\n            &quot;meta&quot;: {\n                &quot;profile&quot;: [&quot;http:\\/\\/fhir.nl\\/fhir\\/StructureDefinition\\/nl-core-organization&quot;],\n                &quot;tag&quot;: [{\n                    &quot;code&quot;: &quot;epd:finaltest123&quot;,\n                    &quot;system&quot;: &quot;https:\\/\\/source-id.medicore.nl\\/&quot;\n                }]\n            },\n            &quot;identifier&quot;: [{\n                &quot;system&quot;: &quot;https:\\/\\/unique-id.medicore.nl\\/&quot;,\n                &quot;value&quot;: &quot;epd:finaltest123&quot;\n            }],\n            &quot;name&quot;: &quot;JWZ&quot;\n        }\n    }],\n    &quot;type&quot;: &quot;transaction&quot;\n}\n</code></pre></div>\n\n\n<p>Now first of all, I'm not sure what to make of the \"failed to call access method ... \" error. Is this a bug in HAPI? Or is it a profile issue as suggested by the second part of the error message?</p>\n<p>Secondly, when I take the Organization resource from the Bundle, and validate it directly against the Organization endpoint, it passes:</p>\n<div class=\"codehilite\"><pre><span></span><code>curl -X POST \\\n  &#39;https://hapifhir-acc.mcapp.nl/hapi-fhir-jpaserver/fhir/Organization/$validate&#39; \\\n  -H &#39;Cache-Control: no-cache&#39; \\\n  -H &#39;Content-Type: application/json&#39; \\\n  -H &#39;Postman-Token: 1cd25175-ad8c-6b65-eed6-14dbd1e8ab22&#39; \\\n  -d &#39;{\n            &quot;resourceType&quot;: &quot;Organization&quot;,\n            &quot;meta&quot;: {\n                &quot;profile&quot;: [&quot;http:\\/\\/fhir.nl\\/fhir\\/StructureDefinition\\/nl-core-organization&quot;],\n                &quot;tag&quot;: [{\n                    &quot;code&quot;: &quot;epd:finaltest123&quot;,\n                    &quot;system&quot;: &quot;https:\\/\\/source-id.medicore.nl\\/&quot;\n                }]\n            },\n            &quot;identifier&quot;: [{\n                &quot;system&quot;: &quot;https:\\/\\/unique-id.medicore.nl\\/&quot;,\n                &quot;value&quot;: &quot;epd:finaltest123&quot;\n            }],\n            &quot;name&quot;: &quot;JWZ&quot;\n        }&#39;\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>{\n    &quot;resourceType&quot;: &quot;OperationOutcome&quot;,\n    &quot;text&quot;: {\n        &quot;status&quot;: &quot;generated&quot;,\n        &quot;div&quot;: &quot;&lt;div xmlns=\\&quot;http://www.w3.org/1999/xhtml\\&quot;&gt;&lt;h1&gt;Operation Outcome&lt;/h1&gt;&lt;table border=\\&quot;0\\&quot;&gt;&lt;tr&gt;&lt;td style=\\&quot;font-weight: bold;\\&quot;&gt;INFORMATION&lt;/td&gt;&lt;td&gt;[Organization.identifier[0], Line 10, Col 29]&lt;/td&gt;&lt;td&gt;&lt;pre&gt;This element does not match any known slice defined in the profile http://fhir.nl/fhir/StructureDefinition/nl-core-organization&lt;/pre&gt;&lt;/td&gt;\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\n\\t\\t\\t&lt;/tr&gt;\\n\\t\\t&lt;/table&gt;\\n\\t&lt;/div&gt;&quot;\n    },\n    &quot;issue&quot;: [\n        {\n            &quot;severity&quot;: &quot;information&quot;,\n            &quot;code&quot;: &quot;processing&quot;,\n            &quot;diagnostics&quot;: &quot;This element does not match any known slice defined in the profile http://fhir.nl/fhir/StructureDefinition/nl-core-organization&quot;,\n            &quot;location&quot;: [\n                &quot;Organization.identifier[0]&quot;,\n                &quot;Line 10, Col 29&quot;\n            ]\n        }\n    ]\n}\n</code></pre></div>\n\n\n<p>Any idea what is going on here? All help is very much appreciated :)</p>",
        "id": 200995396,
        "sender_full_name": "Job Schipper",
        "timestamp": 1592302725
    },
    {
        "content": "<p>Since the field that the validation error is about is part of the Organization resource (and not the Bundle), it must be that either the Bundle $validate (1st request) is failing unjustly, or that the Organization $validate (2nd request) is passing unjustly</p>",
        "id": 201033223,
        "sender_full_name": "Job Schipper",
        "timestamp": 1592321672
    },
    {
        "content": "<p>Anyone?</p>",
        "id": 201243279,
        "sender_full_name": "Job Schipper",
        "timestamp": 1592470836
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191319\">@James Agnew</span>  any idea?</p>",
        "id": 201359475,
        "sender_full_name": "Job Schipper",
        "timestamp": 1592551580
    },
    {
        "content": "<p>Well the key bit of the error message is probably this part:</p>\n<blockquote>\n<p>: Attempt to a slice an element that does not repeat: Extension.valueCodeableConcept/valueCodeableConcept from <a href=\"http://nictiz.nl/fhir/StructureDefinition/code-specification\">http://nictiz.nl/fhir/StructureDefinition/code-specification</a> in <a href=\"http://fhir.nl/fhir/StructureDefinition/nl-core-contactpoint\">http://fhir.nl/fhir/StructureDefinition/nl-core-contactpoint</a>\"</p>\n</blockquote>\n<p>I'm assuming there is probably an error in the profile you're using.</p>",
        "id": 201602144,
        "sender_full_name": "James Agnew",
        "timestamp": 1592830886
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191319\">@James Agnew</span> thanks for confirming!</p>",
        "id": 201717552,
        "sender_full_name": "Job Schipper",
        "timestamp": 1592914838
    }
]