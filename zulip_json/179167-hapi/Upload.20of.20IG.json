[
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191319\">@James Agnew</span> it looks like the <code>upload-igpack</code> (<a href=\"https://github.com/jamesagnew/hapi-fhir/blob/master/hapi-fhir-cli/hapi-fhir-cli-api/src/main/java/ca/uhn/fhir/cli/IgPackUploader.java\" title=\"https://github.com/jamesagnew/hapi-fhir/blob/master/hapi-fhir-cli/hapi-fhir-cli-api/src/main/java/ca/uhn/fhir/cli/IgPackUploader.java\">https://github.com/jamesagnew/hapi-fhir/blob/master/hapi-fhir-cli/hapi-fhir-cli-api/src/main/java/ca/uhn/fhir/cli/IgPackUploader.java</a>) could use some TLC, and I have some hours to spend on it to do so. Before I do it, I would like to hear if it was more or less deliberately abandoned in its current state?</p>",
        "id": 192524450,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1585746639
    },
    {
        "content": "<p>Hi <span class=\"user-mention\" data-user-id=\"191427\">@Jens Villadsen</span>  - We certainly would gladly accept any improvements to it, but I also consider it mostly abandoned at this point.</p>\n<p>NPM is now the \"right way\" to solve the artifact packaging problem in FHIR, so what we really need to do is get support for that implemented. All of the recent validation API changes were geared towards getting that effort started. If by chance you (or anyone) is interested, Grahame has already written lots of code to parse NPMs. The next task is to create an implementation of IValidationSupport (against current HAPI FHIR Master since that interface is fairly different now) that can open and supply artifacts from an NPM module.</p>\n<p>I'm planning on doing this soon, probably next month, but if someone beats me to it I certainly won't complain. :)</p>",
        "id": 192529774,
        "sender_full_name": "James Agnew",
        "timestamp": 1585748921
    },
    {
        "content": "<p>On another project we already do the NPM package parsing and load it into HAPI (with added bonus features of whitelisting according to specific capability statements - and we do it on servlet load directly on the resource providers instead of using an HTTP client but that is easily changed) -  basically boot strapping a HAPI FHIR instance with the contents of an IG, so the effort is very little for me to add this into the cli.</p>",
        "id": 192531233,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1585749405
    },
    {
        "content": "<p>My deadline for having this is the 14th of april - so may I suggest that you wait until that date and see what I end up with in a PR ;)</p>",
        "id": 192531463,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1585749487
    },
    {
        "content": "<p>Btw - end goal for me is to easily be able to instantiate a FHIR server with the 'rule set' of an IG - meaning that the FHIR server must have the IG loaded. All wrapped in docker compose (content is probably going to be postgres, HAPI FHIR JPA, cli client with IG url parameter and an elasticsearch instance)</p>",
        "id": 192531874,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1585749644
    },
    {
        "content": "<p>Great development! Love to see hapi npm support!<br>\n<span class=\"user-mention\" data-user-id=\"191427\">@Jens Villadsen</span> could this be implemented that we could specify the needed npm IG packages in the jpastarter project as well? <br>\nThe hapi jpaserver would then load these packages from the package repos directly.</p>",
        "id": 192539638,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1585752692
    },
    {
        "content": "<p>As not all IGs are published in the registry, an alternative config method in which you point to local IG npm packages on the filesystem would also useful.</p>",
        "id": 192539773,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1585752745
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191451\">@Patrick Werner</span> I'll see what I can do;)</p>",
        "id": 192540256,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1585752946
    },
    {
        "content": "<p>FYI - credits goes to MedCom (danish Non-profit org represented by <span class=\"user-mention\" data-user-id=\"194815\">@Irene Zuschlag</span>  &amp; <span class=\"user-mention\" data-user-id=\"195814\">@Ole Vilstrup</span> here ) for funding my hours adding this functionality once they have received my proposal ;)</p>",
        "id": 192541195,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1585753230
    },
    {
        "content": "<p>thanks sooo much. If you need a helping hand, i can invest some time as well.</p>",
        "id": 192541245,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1585753247
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191451\">@Patrick Werner</span>  - I'll let you know when we begin</p>",
        "id": 192652789,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1585827978
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191319\">@James Agnew</span> <span class=\"user-mention\" data-user-id=\"191451\">@Patrick Werner</span> initially (and as a safeguard) is it then safe to say that only instances of valuesets, codesystems and structuredefinitions should be considered?</p>",
        "id": 193376186,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1586378672
    },
    {
        "content": "<p>concept maps</p>",
        "id": 193376209,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1586378695
    },
    {
        "content": "<p>right</p>",
        "id": 193376231,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1586378707
    },
    {
        "content": "<p>NamingSystems ?</p>",
        "id": 193376257,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1586378723
    },
    {
        "content": "<p>hmmm ... sure, ok</p>",
        "id": 193376272,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1586378745
    },
    {
        "content": "<p>y for sure</p>",
        "id": 193376278,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1586378750
    },
    {
        "content": "<p>longer term, GraphDefinition, StructureMap, but those are very use case dependent</p>",
        "id": 193376292,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1586378762
    },
    {
        "content": "<p>I see no reason to add examples from the NPM package ... unless explicitly stated so</p>",
        "id": 193376350,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1586378782
    },
    {
        "content": "<p>and since you are listening <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span>  - you might wanna get a hold on the people behind <a href=\"http://build.fhir.org/ig/hl7au/au-fhir-base/downloads.html\" title=\"http://build.fhir.org/ig/hl7au/au-fhir-base/downloads.html\">http://build.fhir.org/ig/hl7au/au-fhir-base/downloads.html</a></p>",
        "id": 193376471,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1586378859
    },
    {
        "content": "<p>what do you think about SearchParameter?</p>",
        "id": 193376485,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1586378868
    },
    {
        "content": "<p>they link to the validator.pack file</p>",
        "id": 193376486,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1586378869
    },
    {
        "content": "<p>SearchParameter .... well ...</p>",
        "id": 193376502,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1586378880
    },
    {
        "content": "<p>it depends ...</p>",
        "id": 193376564,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1586378905
    },
    {
        "content": "<p>examples not by default. Could imagine having this optionally or as a seperate paramter could alos be nice to prime servers for connectathons.</p>",
        "id": 193376627,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1586378946
    },
    {
        "content": "<p>yep</p>",
        "id": 193376641,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1586378956
    },
    {
        "content": "<p>I would have thought SearchParameter for sure.. those are pretty commonly included in IGs no?</p>",
        "id": 193376747,
        "sender_full_name": "James Agnew",
        "timestamp": 1586379005
    },
    {
        "content": "<p>Thats why i was asking about SearchParameter. I personally would include it</p>",
        "id": 193376766,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1586379013
    },
    {
        "content": "<p>ok</p>",
        "id": 193376772,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1586379020
    },
    {
        "content": "<p>why are we loading things?</p>\n<ul>\n<li>because loading them changes internal server functionality (e.g. validator...)</li>\n<li>because we want them available on the FHIR API<br>\n?</li>\n</ul>",
        "id": 193376860,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1586379082
    },
    {
        "content": "<p>FYI: that also includes the use of <a href=\"https://smilecdr.com/docs/fhir_repository/search_parameters.html#unique-composite-search-parameters\" title=\"https://smilecdr.com/docs/fhir_repository/search_parameters.html#unique-composite-search-parameters\">https://smilecdr.com/docs/fhir_repository/search_parameters.html#unique-composite-search-parameters</a></p>",
        "id": 193376875,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1586379090
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> at this point by default those two things are one and the same in HAPI FHIR JPA server</p>\n<p>I.e. if you load in a bunch of StructureDefinitions, they become available to the validator for validating other resource types, but they are also regular resources available via the REST endpoint</p>\n<p>Another enhancement I definitely want to make is to allow people to separate those functions (which is how Vonk does it).. but that's not yet done</p>",
        "id": 193377089,
        "sender_full_name": "James Agnew",
        "timestamp": 1586379195
    },
    {
        "content": "<p>SearchParameters that overload existing searchparameters in order to create indexes might not be a part of an IG</p>",
        "id": 193377094,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1586379196
    },
    {
        "content": "<blockquote>\n<p>I.e. if you load in a bunch of StructureDefinitions</p>\n</blockquote>\n<p>indeed. But loading a bunch of new patients doesn't change internal functionality</p>",
        "id": 193377229,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1586379273
    },
    {
        "content": "<p>is there a list of which resources currently have internal meaning?</p>",
        "id": 193377257,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1586379292
    },
    {
        "content": "<p>gotta go - will follow up tomorrow ;)</p>",
        "id": 193377427,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1586379373
    },
    {
        "content": "<p>Presently in HAPI it would be: <code>StructureDefinition</code>, <code>CodeSystem</code>, <code>ValueSet</code>, <code>ConceptMap</code>, <code>SearchParameter</code>. Possibly <code>NamingSystem</code> will get added to that list too at some point soon-ish.</p>\n<p>I do really want to get that separated behaviour coded before too long though... truthfully to me it seems like weird behaviour to load in an NPM module and then have those resources show up through the rest endpoint. I think there should be a way perhaps through the RSET endpoint to interact with the NPM packages themselves at the package level (maybe a FHIR operation or two to manage them) but they shouldn't get exploded int your database eventually</p>",
        "id": 193377984,
        "sender_full_name": "James Agnew",
        "timestamp": 1586379639
    },
    {
        "content": "<p>i like the idea of the npm rest endpoint!</p>",
        "id": 193378079,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1586379697
    },
    {
        "content": "<p>could even only provide the npm package name and start from there</p>",
        "id": 193378204,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1586379732
    },
    {
        "content": "<p>otoh it does make sense to be able to load the NpmPackage into the rest api if that's what you want</p>",
        "id": 193378251,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1586379749
    },
    {
        "content": "<blockquote>\n<p>Possibly NamingSystem will get added to that list too at some point soon-ish.</p>\n</blockquote>\n<p>yeah because we'll be making changes for supporting v2 / CDA that make NamingSystem required inside the terminology system operations</p>",
        "id": 193378384,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1586379813
    },
    {
        "content": "<p>I guess Subscription should be added to this list too. I haven't yet seen someone including a Subscription in an IG, but I bet it's a matter of time...</p>",
        "id": 193381464,
        "sender_full_name": "James Agnew",
        "timestamp": 1586381746
    },
    {
        "content": "<p>I have seen them, but only as examples</p>",
        "id": 193381545,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1586381772
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191316\">Grahame Grieve</span> <a href=\"#narrow/stream/179167-hapi/topic/Upload.20of.20IG/near/193378251\" title=\"#narrow/stream/179167-hapi/topic/Upload.20of.20IG/near/193378251\">said</a>:</p>\n<blockquote>\n<p>otoh it does make sense to be able to load the NpmPackage into the rest api if that's what you want</p>\n</blockquote>\n<p>I'll have that need</p>",
        "id": 193411741,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1586414156
    },
    {
        "content": "<p>I my environment the Terminology Server is more often updated than the IG</p>",
        "id": 193411790,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1586414178
    },
    {
        "content": "<p>and those updates are shipped as events other an MQ</p>",
        "id": 193411835,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1586414223
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191319\">@James Agnew</span> If you would like the IG  to end up in some special NPM address, how is it supposed to work from HAPI CLI? A custom operation where an URL is passed to the system provider that then fetches the content at the specified URL?</p>",
        "id": 193730387,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1586725996
    },
    {
        "content": "<blockquote>\n<p>If you would like the IG to end up in some special NPM address</p>\n</blockquote>\n<p>I don't understand this.</p>",
        "id": 193730439,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1586726074
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191319\">James Agnew</span> <a href=\"#narrow/stream/179167-hapi/topic/Upload.20of.20IG/near/193377984\" title=\"#narrow/stream/179167-hapi/topic/Upload.20of.20IG/near/193377984\">said</a>:</p>\n<blockquote>\n<p>Presently in HAPI it would be: <code>StructureDefinition</code>, <code>CodeSystem</code>, <code>ValueSet</code>, <code>ConceptMap</code>, <code>SearchParameter</code>. Possibly <code>NamingSystem</code> will get added to that list too at some point soon-ish.</p>\n<p>I do really want to get that separated behaviour coded before too long though... truthfully to me it seems like weird behaviour to load in an NPM module and then have those resources show up through the rest endpoint. I think there should be a way perhaps through the RSET endpoint to interact with the NPM packages themselves at the package level (maybe a FHIR operation or two to manage them) but they shouldn't get exploded int your database eventually</p>\n</blockquote>",
        "id": 193730450,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1586726113
    },
    {
        "content": "<p>To me it sounds like that the content of the NPM package should be accessible through a REST interface that is decoupled from the regular FHIR REST interface</p>",
        "id": 193730502,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1586726199
    },
    {
        "content": "<p>eg. /IG/[packageName]/CodeSystem</p>",
        "id": 193730510,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1586726247
    },
    {
        "content": "<p>TBH, not yet sure... Need to spend some time thinking about how storage will work in the JPA server before figuring out how the API works.</p>\n<p>For now I definitely think it's fine to break the package apart and upload the individual components.</p>",
        "id": 193735338,
        "sender_full_name": "James Agnew",
        "timestamp": 1586734434
    },
    {
        "content": "<p>Ok</p>",
        "id": 193737495,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1586738651
    },
    {
        "content": "<p>We have order to go. Commence of development is monday :)</p>",
        "id": 194483627,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1587149085
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191427\">Jens Villadsen</span> <a href=\"#narrow/stream/179167-hapi/topic/Upload.20of.20IG/near/192531463\" title=\"#narrow/stream/179167-hapi/topic/Upload.20of.20IG/near/192531463\">said</a>:</p>\n<blockquote>\n<p>My deadline for having this is the 14th of april - so may I suggest that you wait until that date and see what I end up with in a PR ;)</p>\n</blockquote>\n<p>I meant 14th of May ;)</p>",
        "id": 194488840,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1587151624
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"294872\">@Martin Zacho Grønhøj</span> is on the assignment now ;)</p>",
        "id": 194650235,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1587374181
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191319\">@James Agnew</span> (<span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> <span class=\"user-mention\" data-user-id=\"191451\">@Patrick Werner</span> ) We intend to do the following:<br>\n1) Extend the the DSTU3 and R4 systemproviders with a operation that takes a parameter containing an URL. When invoking that FHIR operation, the server downloads the content (package.tgz) from that given URL. The server then unzips the content and installs it into the database<br>\n2) Extend the hapi-fhir-starter project by adding a property in the properties file that contains a list of URLs to package.tgz files. On startup, the HAPI FHIR starter server fetches the files and proceeds as in 1)<br>\n3) Extend the HAPI FHIR CLI tool to support either using the operation from 1) or locally unzip a package.tgz file and upload the resources either one by one or in a single transaction</p>\n<p>Please comment on our intended approach and feel free to point out any missing items.</p>",
        "id": 194652214,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1587375424
    },
    {
        "content": "<blockquote>\n<p>that takes a parameter containing an URL. When invoking that FHIR operation, the server downloads the content (package.tgz) from that given URL. The server then unzips the content and installs it into the database</p>\n</blockquote>\n<p>from my point of view it would be more natural to just provide the package id, and then ask the PackageCacheManager to resolve it. No new download if already in the cache, and you need not be concerned about where it actually is - it will all auto-resolve if it's in the package system</p>",
        "id": 194663494,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1587383228
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191316\">Grahame Grieve</span> <a href=\"#narrow/stream/179167-hapi/topic/Upload.20of.20IG/near/194663494\" title=\"#narrow/stream/179167-hapi/topic/Upload.20of.20IG/near/194663494\">said</a>:</p>\n<blockquote>\n<blockquote>\n<p>that takes a parameter containing an URL. When invoking that FHIR operation, the server downloads the content (package.tgz) from that given URL. The server then unzips the content and installs it into the database</p>\n</blockquote>\n<p>from my point of view it would be more natural to just provide the package id, and then ask the PackageCacheManager to resolve it. No new download if already in the cache, and you need not be concerned about where it actually is - it will all auto-resolve if it's in the package system</p>\n</blockquote>\n<p>Don't you then assume that the package is installed at <a href=\"http://packages.fhir.org\" title=\"http://packages.fhir.org\">http://packages.fhir.org</a> ?</p>",
        "id": 194664869,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1587384121
    },
    {
        "content": "<p>which might not be the case during development</p>",
        "id": 194664941,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1587384151
    },
    {
        "content": "<p>A way to support that could be with a custom url scheme if you are really keen on that repo - eg. fhir-ig://packageId</p>",
        "id": 194665139,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1587384264
    },
    {
        "content": "<p>indeed it might not be the case then. In which case a URL - or a file - would be good. but I expected that the majority use would be a published package</p>",
        "id": 194665320,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1587384377
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191427\">@Jens Villadsen</span> I'd rather have the server not need to fetch external content if we can avoid it, since that's a pretty big security risk.</p>\n<p>Couldn't the CLI tool read in the package and handle the \"explosion\" itself?</p>",
        "id": 194672225,
        "sender_full_name": "James Agnew",
        "timestamp": 1587388283
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191319\">@James Agnew</span>  The primary idea was that one could start a docker image with a parameter stating an IG url which then would be loaded into the HAPI FHIR instance at startup time.</p>",
        "id": 194676601,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1587390360
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> 2 out of three IG's I work on are not listed there - I can't see why such a strict binding (to the package repo) should be necessary?</p>",
        "id": 194676792,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1587390438
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191319\">@James Agnew</span> It could indeed be solved with the CLI tool. The idea however was to stay independent of any other tools</p>",
        "id": 194677025,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1587390534
    },
    {
        "content": "<p>Ideally all that a user should use was a docker image and an URL</p>",
        "id": 194677099,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1587390569
    },
    {
        "content": "<p>But I guess the explosion could be encapsulated in the client. From your comments it becomes clear that we have different needs. <span class=\"user-mention\" data-user-id=\"191319\">@James Agnew</span> does that mean that you won't accept the current design encapsulated in a SystemProvider in PR due to security risks?</p>",
        "id": 194677528,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1587390738
    },
    {
        "content": "<p>Hmm, I see.</p>\n<p>If you need this to be inside the server, let's at least put it in its own dedicated service and make the URL(s) be something that are pulled from configuration as opposed to being something that comes from user input (I guess DaoConfig is probably the right spot for it). That would mitigate the security concern mostly.</p>",
        "id": 194681647,
        "sender_full_name": "James Agnew",
        "timestamp": 1587392648
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191427\">@Jens Villadsen</span> <span class=\"user-mention\" data-user-id=\"191319\">@James Agnew</span> <br>\nI like and need both approaches. A new FHIR package service endpoint (turned off by default in the jpastarter) and a cli exploding packages and manually uploading them to a REST endpoint.<br>\nFor the latter a colleague of mine already started a small project, will be glad to add this to hapi-cli</p>",
        "id": 194684044,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1587393556
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191451\">@Patrick Werner</span> please let your colleague reach out to my colleague <span class=\"user-mention\" data-user-id=\"294872\">@Martin Zacho Grønhøj</span> who will also be looking at the CLI</p>",
        "id": 194685881,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1587394355
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191319\">@James Agnew</span> daoconfig seems like a reasonable tradeoff</p>",
        "id": 194685987,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1587394405
    },
    {
        "content": "<p>I've done something like this but I loaded in the packages during the JPAServer initialisation. <br>\nMy aim was to set a validation package in HAPI and had another IG to control server (CapabilityStatement) behaviour.</p>",
        "id": 194685990,
        "sender_full_name": "Kevin Mayfield",
        "timestamp": 1587394407
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"194909\">@Kevin Mayfield</span> we also currently load it during servlet init for validation later on</p>",
        "id": 194686211,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1587394512
    },
    {
        "content": "<p>Im sure <span class=\"user-mention\" data-user-id=\"294872\">@Martin Zacho Grønhøj</span> will add the fork url soon that will be the base for our PR</p>",
        "id": 194686370,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1587394570
    },
    {
        "content": "<blockquote>\n<p>2 out of three IG's I work on are not listed there</p>\n</blockquote>\n<p><span class=\"user-mention\" data-user-id=\"191427\">@Jens Villadsen</span> I cannot get simplifier to connect up to the wider eco-system, so I'm running a back up package server at <a href=\"http://test.fhir.org/packages\" title=\"http://test.fhir.org/packages\">http://test.fhir.org/packages</a> that has all the other packages</p>",
        "id": 194740767,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1587421319
    },
    {
        "content": "<p>the PackageCacheManager sorts this stuff automatically</p>",
        "id": 194740830,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1587421336
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191427\">@Jens Villadsen</span> I'm hoping I can get some resources to support this.  Maybe be concentrating on simplifier to HL7 IG conversion first but our aim (developers anyway) is to support validation.</p>",
        "id": 194768783,
        "sender_full_name": "Kevin Mayfield",
        "timestamp": 1587454241
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> I still think using a local version of a package should be possible</p>",
        "id": 194770938,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1587456043
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191687\">@Kevin Mayfield</span> validation is supported by HAPI FHIR out of the box once an IG is loaded into it</p>",
        "id": 194771171,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1587456151
    },
    {
        "content": "<p>as far as I remember</p>",
        "id": 194771184,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1587456162
    },
    {
        "content": "<blockquote>\n<p>using a local version of a package should be possible</p>\n</blockquote>\n<p>yes I think that makes sense too</p>",
        "id": 194779929,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1587462039
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> where does <a href=\"http://test.fhir.org/packages\" title=\"http://test.fhir.org/packages\">http://test.fhir.org/packages</a> look for packages when it scans?</p>",
        "id": 194783334,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1587464468
    },
    {
        "content": "<p>the list is here:</p>",
        "id": 194783481,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1587464560
    },
    {
        "content": "<p><a href=\"https://github.com/FHIR/ig-registry/blob/master/fhir-ig-list.json\" title=\"https://github.com/FHIR/ig-registry/blob/master/fhir-ig-list.json\">https://github.com/FHIR/ig-registry/blob/master/fhir-ig-list.json</a></p>",
        "id": 194783519,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1587464596
    },
    {
        "content": "<p>if thats the case where is my package then downloaded from? <a href=\"https://build.fhir.org/ig/hl7dk/dk-medcom/branches/master/failure/build.log\" title=\"https://build.fhir.org/ig/hl7dk/dk-medcom/branches/master/failure/build.log\">https://build.fhir.org/ig/hl7dk/dk-medcom/branches/master/failure/build.log</a></p>",
        "id": 194783671,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1587464694
    },
    {
        "content": "<p><a href=\"http://packages.fhir.org/\" title=\"http://packages.fhir.org/\">http://packages.fhir.org/</a> ?</p>",
        "id": 194783698,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1587464715
    },
    {
        "content": "<p>dk.fhir.ig.dk-medcom-core#current would be downloaded on the fly from the current build.</p>",
        "id": 194783808,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1587464769
    },
    {
        "content": "<p>based on the last successful master build</p>",
        "id": 194783831,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1587464789
    },
    {
        "content": "<p>I see it says 0.8.0 in the package itself, but that only resolves if you publish it</p>",
        "id": 194783842,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1587464798
    },
    {
        "content": "<p>e.g. you register it in a package feed the server follows, or you push it to the server directly</p>",
        "id": 194783866,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1587464824
    },
    {
        "content": "<p>Hi everyone, happy to join the heat ;-)</p>\n<p><span class=\"user-mention silent\" data-user-id=\"191319\">James Agnew</span> <a href=\"#narrow/stream/179167-hapi/topic/Upload.20of.20IG/near/194681647\" title=\"#narrow/stream/179167-hapi/topic/Upload.20of.20IG/near/194681647\">said</a>:</p>\n<blockquote>\n<p>If you need this to be inside the server, let's at least put it in its own dedicated service and make the URL(s) be something that are pulled from configuration as opposed to being something that comes from user input (I guess DaoConfig is probably the right spot for it). That would mitigate the security concern mostly.</p>\n</blockquote>\n<p>I've created af fork for development of this feature: <a href=\"https://github.com/mzgtrifork/hapi-fhir/tree/install-external-ig-package-at-startup\" title=\"https://github.com/mzgtrifork/hapi-fhir/tree/install-external-ig-package-at-startup\">https://github.com/mzgtrifork/hapi-fhir/tree/install-external-ig-package-at-startup</a><br>\nedit: renamed branch</p>\n<p><span class=\"user-mention silent\" data-user-id=\"191451\">Patrick Werner</span> <a href=\"#narrow/stream/179167-hapi/topic/Upload.20of.20IG/near/194684044\" title=\"#narrow/stream/179167-hapi/topic/Upload.20of.20IG/near/194684044\">said</a>:</p>\n<blockquote>\n<p>For the latter a colleague of mine already started a small project, will be glad to add this to hapi-cli</p>\n</blockquote>\n<p>Is the project accessible somewhere?</p>",
        "id": 194786695,
        "sender_full_name": "Martin Zacho Grønhøj",
        "timestamp": 1587466881
    },
    {
        "content": "<p>not yet. Will talk to my student today</p>",
        "id": 194787925,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1587467864
    },
    {
        "content": "<p>But this fork is for adding a backend to hapi, not for extending the cli to open a package and upload it via rest?</p>",
        "id": 194788012,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1587467912
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191451\">@Patrick Werner</span> aint the cli part of the repo at <a href=\"https://github.com/jamesagnew/hapi-fhir/tree/master/hapi-fhir-cli\" title=\"https://github.com/jamesagnew/hapi-fhir/tree/master/hapi-fhir-cli\">https://github.com/jamesagnew/hapi-fhir/tree/master/hapi-fhir-cli</a> ?</p>",
        "id": 194788794,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1587468442
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191451\">Patrick Werner</span> <a href=\"#narrow/stream/179167-hapi/topic/Upload.20of.20IG/near/194788012\" title=\"#narrow/stream/179167-hapi/topic/Upload.20of.20IG/near/194788012\">said</a>:</p>\n<blockquote>\n<p>But this fork is for adding a backend to hapi, not for extending the cli to open a package and upload it via rest?</p>\n</blockquote>\n<p>Maybe both, but on separate branches. I'm starting development of the backend on the branch install-external-ig-package-at-startup.</p>",
        "id": 194790816,
        "sender_full_name": "Martin Zacho Grønhøj",
        "timestamp": 1587469843
    },
    {
        "content": "<p>ok my colleague was more focused on the uploading of conformance resources of a package via REST</p>",
        "id": 194796659,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1587473472
    },
    {
        "content": "<p>because some servers will check if the referenced CS of a VS is present i suggest to have a order in which conformance resources should be upped:</p>",
        "id": 194796921,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1587473594
    },
    {
        "content": "<p>NamingSystem, CodeSystem, ValueSet, StructureDefinition, ConceptMap, SearchParameter, Subscription</p>",
        "id": 194797061,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1587473658
    },
    {
        "content": "<p>Also for upping the StrucDefs i would try to resolve the dependencies of contained profiles and start with the \"root\" profile</p>",
        "id": 194797163,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1587473715
    },
    {
        "content": "<p>So the snapshots of the uploaded profiles can be built properly on the server side (if needed and implemented)</p>",
        "id": 194797341,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1587473807
    },
    {
        "content": "<p>I agree - that is the same order we already use</p>",
        "id": 194798738,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1587474456
    },
    {
        "content": "<p>Building the hierachy can be a bit cumbersome</p>",
        "id": 194798822,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1587474488
    },
    {
        "content": "<p>And we haven't touched on the issue of IG dependencies and hierachies</p>",
        "id": 194798943,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1587474547
    },
    {
        "content": "<blockquote>\n<p>Building the hierachy can be a bit cumbersome</p>\n</blockquote>\n<p>especially since there are circular dependencies. (not in the heirarchy, but in the profile references). So don't worry about that, and have a load all before you generate snapshots</p>",
        "id": 194852867,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1587498788
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> aren't snapshots on the profiles generated by the IG Publisher?</p>",
        "id": 194908797,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1587548834
    },
    {
        "content": "<p>Yes the IG publisher does and any packages from it will have snapshots, but other sources don’t necessarily produce snapshots</p>",
        "id": 194912018,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1587550939
    },
    {
        "content": "<p>which sources are we talking about?</p>",
        "id": 194912058,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1587550982
    },
    {
        "content": "<p>I believe that (some?) simplifier packages don't include snapshots. Or is it forge? And FSH doesn't produce snapshots</p>",
        "id": 194921481,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1587558041
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191316\">Grahame Grieve</span> <a href=\"#narrow/stream/179167-hapi/topic/Upload.20of.20IG/near/194852867\" title=\"#narrow/stream/179167-hapi/topic/Upload.20of.20IG/near/194852867\">said</a>:</p>\n<blockquote>\n<blockquote>\n<p>Building the hierachy can be a bit cumbersome</p>\n</blockquote>\n<p>especially since there are circular dependencies. (not in the heirarchy, but in the profile references). So don't worry about that, and have a load all before you generate snapshots</p>\n</blockquote>\n<p>I tried to understand how profiles could have circular references and can't come up with an example. Could someone push me in the right direction please?</p>",
        "id": 194921962,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1587558345
    },
    {
        "content": "<p>the validator tests cases are derived from the real world case - two patients cross-linked, with a profile on primary and a profile on the secondary</p>",
        "id": 194922228,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1587558517
    },
    {
        "content": "<p>ah ok. Thats ok. Was thinking about profiles deriving from another in a circle <span aria-label=\"octopus\" class=\"emoji emoji-1f419\" role=\"img\" title=\"octopus\">:octopus:</span></p>",
        "id": 194923890,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1587559472
    },
    {
        "content": "<p>OK - producing snapshots shouldn't be much of an issue when using HAPI FHIR and its dependencies (the core lib)</p>",
        "id": 194928103,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1587561335
    },
    {
        "content": "<p>I've forked <a href=\"https://github.com/mzgtrifork/hapi-fhir-jpaserver-starter/tree/install-external-ig-package-at-startup\" title=\"https://github.com/mzgtrifork/hapi-fhir-jpaserver-starter/tree/install-external-ig-package-at-startup\">hapi-fhir-jpaserver-starter</a>, and planning to begin a top-down approach:</p>\n<ul>\n<li>Adding configuration fields \"igResourcesURL\" in HapiProperties of jpaserver-starter and DaoConfig of jpaserver-api</li>\n<li>Adding a service \"igResourcesInstaller\" in jpaserver-base (under ca.uhn.fhir.jpa.dao or maybe a dedicated namespace?), which</li>\n</ul>\n<ol>\n<li>Downloads the IG package and dependent packages/ loads them from disk (possibly using <a href=\"https://github.com/hapifhir/org.hl7.fhir.core/blob/210cc0affcf16b55dafc522b22c3dbadbe883923/org.hl7.fhir.utilities/src/main/java/org/hl7/fhir/utilities/cache/NpmPackage.java\" title=\"https://github.com/hapifhir/org.hl7.fhir.core/blob/210cc0affcf16b55dafc522b22c3dbadbe883923/org.hl7.fhir.utilities/src/main/java/org/hl7/fhir/utilities/cache/NpmPackage.java\">Grahams NpmPackage abstraction</a>), if the URL is set.</li>\n<li>Generates snapshots of StructureDefinitions if necessary.</li>\n<li>Saves all resources of type NamingSystem, CodeSystem, ValueSet, StructureDefinition (snapshots), ConceptMap, SearchParameter and Subscription to the database.</li>\n</ol>\n<p>I intend to invoke the service when the ApplicationReadyEvent is broadcastet.</p>\n<p>Comments?</p>",
        "id": 195047030,
        "sender_full_name": "Martin Zacho Grønhøj",
        "timestamp": 1587641304
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191427\">@Jens Villadsen</span> Cool stuff <span aria-label=\"up\" class=\"emoji emoji-2b06\" role=\"img\" title=\"up\">:up:</span> I assume you've found the package server documentation? <a href=\"https://simplifier.net/docs/package-server\" title=\"https://simplifier.net/docs/package-server\">https://simplifier.net/docs/package-server</a>. You will indeed encounter packages with dependencies, which you should also be able to find on <a href=\"http://packages.fhir.org\" title=\"http://packages.fhir.org\">packages.fhir.org</a>.<br>\nIndeed, having the options to point to packages which are not (yet) in the FHIR package server makes a lot of sense.</p>",
        "id": 195057335,
        "sender_full_name": "Ward Weistra",
        "timestamp": 1587647170
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"203235\">@Ward Weistra</span> <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> will there be a joined package server at some point?<br>\nI think the success of npm/maven is due to a central repository.</p>",
        "id": 195063683,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1587650037
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191451\">@Patrick Werner</span> <a href=\"http://packages.fhir.org\" title=\"http://packages.fhir.org\">packages.fhir.org</a> IS the central repository! <span aria-label=\"open mouth\" class=\"emoji emoji-1f62e\" role=\"img\" title=\"open mouth\">:open_mouth:</span> It brings together the packages from Simplifier, HL7, FHIR Foundation and all the feeds in the feeds object of <a href=\"https://github.com/FHIR/ig-registry/blob/master/fhir-ig-list.json\" title=\"https://github.com/FHIR/ig-registry/blob/master/fhir-ig-list.json\">https://github.com/FHIR/ig-registry/blob/master/fhir-ig-list.json</a>.</p>",
        "id": 195064037,
        "sender_full_name": "Ward Weistra",
        "timestamp": 1587650184
    },
    {
        "content": "<p>That doesn't mean the infrastructure is all perfect yet. We're still running the import from the other feeds by hand because we keep running into issues with the feeds and need a good way to automate the reporting and handling of them.</p>",
        "id": 195064288,
        "sender_full_name": "Ward Weistra",
        "timestamp": 1587650305
    },
    {
        "content": "<p>ah good to know! Thanks Ward.</p>",
        "id": 195064328,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1587650322
    },
    {
        "content": "<p>It also focuses on stable packages so far. There's no central solution for the #dev, #current and x.x.x-alphabeta versions yet.</p>",
        "id": 195064603,
        "sender_full_name": "Ward Weistra",
        "timestamp": 1587650435
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191316\">Grahame Grieve</span> <a href=\"#narrow/stream/179167-hapi/topic/Upload.20of.20IG/near/194740767\" title=\"#narrow/stream/179167-hapi/topic/Upload.20of.20IG/near/194740767\">said</a>:</p>\n<blockquote>\n<blockquote>\n<p>2 out of three IG's I work on are not listed there</p>\n</blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"191427\">Jens Villadsen</span> I cannot get simplifier to connect up to the wider eco-system, so I'm running a back up package server at <a href=\"http://test.fhir.org/packages\" title=\"http://test.fhir.org/packages\">http://test.fhir.org/packages</a> that has all the other packages</p>\n</blockquote>\n<p>was asking because of this statement <span class=\"user-mention\" data-user-id=\"203235\">@Ward Weistra</span></p>",
        "id": 195064766,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1587650519
    },
    {
        "content": "<p>Yeah, I assume Grahame is referring to the package server infrastructure not yet in automated fashion picking up new feeds in the feeds object or scheduled importing of the packages? Which are both things we are working towards. We just ran the importer manually again, on all feeds in there now.</p>",
        "id": 195065843,
        "sender_full_name": "Ward Weistra",
        "timestamp": 1587650944
    },
    {
        "content": "<p>sounds great. Thanks for the explanation</p>",
        "id": 195068665,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1587652091
    },
    {
        "content": "<p>What is behind <a href=\"http://packages.fhir.org\" title=\"http://packages.fhir.org\">http://packages.fhir.org</a>? A regular Nexus instance?</p>",
        "id": 195075141,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1587654567
    },
    {
        "content": "<p>Since it is an npm repo, why not use a regular Nexus for it?</p>",
        "id": 195083337,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1587657958
    },
    {
        "content": "<p>Or am i a total ignorant?</p>",
        "id": 195083446,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1587657987
    },
    {
        "content": "<blockquote>\n<p>possibly using Grahams NpmPackage abstraction</p>\n</blockquote>\n<p>We should defintely be using that... Dependency management is complex, no sense reinventing the wheel</p>",
        "id": 195088724,
        "sender_full_name": "James Agnew",
        "timestamp": 1587660421
    },
    {
        "content": "<p>Speaking of ... <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> did you have a look at how sonatype handles npm? (<a href=\"https://github.com/sonatype/nexus-public/tree/master/plugins/nexus-repository-npm/src/main/java/org/sonatype/nexus/repository/npm/internal\" title=\"https://github.com/sonatype/nexus-public/tree/master/plugins/nexus-repository-npm/src/main/java/org/sonatype/nexus/repository/npm/internal\">https://github.com/sonatype/nexus-public/tree/master/plugins/nexus-repository-npm/src/main/java/org/sonatype/nexus/repository/npm/internal</a>)</p>",
        "id": 195090087,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1587661027
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"203235\">@Ward Weistra</span> thanks for finally uploading from the package feeds. How often will this run now?</p>",
        "id": 195117215,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1587674756
    },
    {
        "content": "<p>cURL'ing <a href=\"https://packages.fhir.org/\" title=\"https://packages.fhir.org/\">https://packages.fhir.org/</a> leads to HTTP 404</p>",
        "id": 195117877,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1587675078
    },
    {
        "content": "<p>anyways - is it a regular npm repo running behind the curtains? <span class=\"user-mention\" data-user-id=\"203235\">@Ward Weistra</span></p>",
        "id": 195118031,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1587675150
    },
    {
        "content": "<p>I'm getting that too with POSTMan - GET <a href=\"http://packages.fhir.org/catalog?fhirversion=STU3\" title=\"http://packages.fhir.org/catalog?fhirversion=STU3\">http://packages.fhir.org/catalog?fhirversion=STU3</a> with Accept: application/json, but just <a href=\"http://packages.fhir.org/catalog?fhirversion=STU3&amp;prerelease=false\" title=\"http://packages.fhir.org/catalog?fhirversion=STU3&amp;prerelease=false\">http://packages.fhir.org/catalog?fhirversion=STU3&amp;prerelease=false</a> works in a browser</p>",
        "id": 195118079,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1587675176
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"203235\">@Ward Weistra</span> this is the list of packages I get for STU3 with prerelease = false:</p>\n<div class=\"codehilite\"><pre><span></span>SliceBugTest\nFuroretestproject\nSimplifier.Core.Stu3.DataTypes\nSimplifier.Core.STU3.ValueSets\nSimplifier.Core.STU3.CodeSystems\nSimplifier.Core.STU3.Extensions\nSimplifier.Core.STU3\nDemo.National.PatientCare\nDemo.Regional.PatientCare\ngefyra.sandbox\nufp.core\ndummy.first\nMySimplifierProject.core\nMySimplifier.Project\nProvincialClientRegi.core\nPGO.02\nirrs.pkg\ncihi.irrs.pkg\ncihi.irrs\nprivate.package.test\ntest.my.first.package\nTestProjekt2.test\nSimplifier.Others.Stu3\nnictiz.fhir.nl.stu3.zib2017\nSimplifier.Core.STU3.Resources\nSimplifier.Core.STU3.ProfilesOthers\nHL7Norway.STU3.no.basis\nkbv.fhir.vos\ntestontwikkel.package\ntestontwikkelz.package\ndvmd.kdl.stu3.2019\nPCR.Core.STU3\nMyDemoProject.core\nauw.dummy\nMyDemo.core\nUKKoeln.nNGM.RegistrationForm.IG\naws.dummy\ndev.cihub.ClinicalSite.org\ndev.cihub.CancerCareRecord\nTestMenno.project\nTestproject.test\nTestProjectArnim.test\nMirjamstestproject.test\nacme.base\nhl7.fhir.r2b.core\nhl7.fhir.r2b.corexml\nhl7.fhir.r2b.examples\nhl7.fhir.r2b.expansions\nhl7.fhir.r3.core\nhl7.fhir.r3.corexml\n</pre></div>",
        "id": 195118226,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1587675249
    },
    {
        "content": "<div class=\"codehilite\"><pre><span></span>jvi@Jenss-MBP-2 ~ % curl &#39;http://packages.fhir.org/catalog?fhirversion=STU3&#39;\n[{&quot;Name&quot;:&quot;SliceBugTest&quot;,&quot;Description&quot;:null,&quot;FhirVersion&quot;:&quot;STU3&quot;},{&quot;Name&quot;:&quot;Furoretestproject&quot;,&quot;Description&quot;:null,&quot;FhirVersion&quot;:&quot;STU3&quot;},{&quot;Name&quot;:&quot;Simplifier.Core.Stu3.DataTypes&quot;,&quot;Description&quot;:&quot;These are the FHIR Core STU3 Data types. This is a temporary package until the offical HL7 FHIR Core Packages are released and published on Simplifier.&quot;,&quot;FhirVersion&quot;:&quot;STU3&quot;},{&quot;Name&quot;:&quot;Simplifier.Core.STU3.ValueSets&quot;,&quot;Description&quot;:&quot;These are the FHIR Core STU3 ValueSets. This is a temporary package until the offical HL7 FHIR Core Packages are released and published on Simplifier.&quot;,&quot;FhirVersion&quot;:&quot;STU3&quot;},{&quot;Name&quot;:&quot;Simplifier.Core.STU3.CodeSystems&quot;,&quot;Description&quot;:&quot;These are the FHIR Core STU3 Code Systems. This is a temporary package until the offical HL7 FHIR Core Packages are released and published on Simplifier.&quot;,&quot;FhirVersion&quot;:&quot;STU3&quot;},{&quot;Name&quot;:&quot;Simplifier.Core.STU3.Extensions&quot;,&quot;Description&quot;:&quot;These are the FHIR Core STU3 Extensions. This is a temporary package until the offical HL7 FHIR Core Packages are released and published on Simplifier.&quot;,&quot;FhirVersion&quot;:&quot;STU3&quot;},{&quot;Name&quot;:&quot;Simplifier.Core.STU3&quot;,&quot;Description&quot;:&quot;This is a meta package that contains the FHIR Core STU3 Specification. It does not contain resources, but it has dependencies to all packages needed to get the full specification. &quot;,&quot;FhirVersion&quot;:&quot;STU3&quot;},{&quot;Name&quot;:&quot;Demo.National.PatientCare&quot;,&quot;Description&quot;:&quot;Demo project to show the use of packages&quot;,&quot;FhirVersion&quot;:&quot;STU3&quot;},{&quot;Name&quot;:&quot;Demo.Regional.PatientCare&quot;,&quot;Description&quot;:&quot;Demo project to show the use of packages &quot;,&quot;FhirVersion&quot;:&quot;STU3&quot;},{&quot;Name&quot;:&quot;gefyra.sandbox&quot;,&quot;Description&quot;:&quot;Release version&quot;,&quot;FhirVersion&quot;:&quot;STU3&quot;},{&quot;Name&quot;:&quot;ufp.core&quot;,&quot;Description&quot;:&quot;The United Federation of Planet (UFP) FHIR Implementation Guide of intergalactic scope&quot;,&quot;FhirVersion&quot;:&quot;STU3&quot;},{&quot;Name&quot;:&quot;dummy.first&quot;,&quot;Description&quot;:&quot;Dummy package testing version 2&quot;,&quot;FhirVersion&quot;:&quot;STU3&quot;},{&quot;Name&quot;:&quot;MySimplifierProject.core&quot;,&quot;Description&quot;:&quot;My Simplifier Project&quot;,&quot;FhirVersion&quot;:&quot;STU3&quot;},{&quot;Name&quot;:&quot;MySimplifier.Project&quot;,&quot;Description&quot;:&quot;My Simplifier Project&quot;,&quot;FhirVersion&quot;:&quot;STU3&quot;},{&quot;Name&quot;:&quot;ProvincialClientRegi.core&quot;,&quot;Description&quot;:&quot;FHIR based Implementation Guide for provincial CR system&quot;,&quot;FhirVersion&quot;:&quot;STU3&quot;},{&quot;Name&quot;:&quot;PGO.02&quot;,&quot;Description&quot;:&quot;WEM ZWConnect&quot;,&quot;FhirVersion&quot;:&quot;STU3&quot;},{&quot;Name&quot;:&quot;irrs.pkg&quot;,&quot;Description&quot;:&quot;IRRS Project&quot;,&quot;FhirVersion&quot;:&quot;STU3&quot;},{&quot;Name&quot;:&quot;cihi.irrs.pkg&quot;,&quot;Description&quot;:&quot;IRRS Project&quot;,&quot;FhirVersion&quot;:&quot;STU3&quot;},{&quot;Name&quot;:&quot;cihi.irrs&quot;,&quot;Description&quot;:&quot;IRRS Project&quot;,&quot;FhirVersion&quot;:&quot;STU3&quot;},{&quot;Name&quot;:&quot;private.package.test&quot;,&quot;Description&quot;:&quot;Testing private packages&quot;,&quot;FhirVersion&quot;:&quot;STU3&quot;},{&quot;Name&quot;:&quot;test.my.first.package&quot;,&quot;Description&quot;:&quot;This is my test description, see if it gets in the package.manifest&quot;,&quot;FhirVersion&quot;:&quot;STU3&quot;},{&quot;Name&quot;:&quot;TestProjekt2.test&quot;,&quot;Description&quot;:&quot;Test Projekt&quot;,&quot;FhirVersion&quot;:&quot;STU3&quot;},{&quot;Name&quot;:&quot;Simplifier.Others.Stu3&quot;,&quot;Description&quot;:&quot;Profiles that are part of the core specification but are not base profiles&quot;,&quot;FhirVersion&quot;:&quot;STU3&quot;},{&quot;Name&quot;:&quot;nictiz.fhir.nl.stu3.zib2017&quot;,&quot;Description&quot;:&quot;Nictiz NL package of FHIR STU3 conformance resources for HCIM Release 2017. Includes MedMij and HL7 NL.\\r\\n\\r\\nHCIMs: https://zibs.nl/wiki/HCIM_Release_2017(EN)&quot;,&quot;FhirVersion&quot;:&quot;STU3&quot;},{&quot;Name&quot;:&quot;Simplifier.Core.STU3.Resources&quot;,&quot;Description&quot;:&quot;These are the STU3 Core Profile StructureDefinitions describing resources.\\r\\n\\r\\n&quot;,&quot;FhirVersion&quot;:&quot;STU3&quot;},{&quot;Name&quot;:&quot;Simplifier.Core.STU3.ProfilesOthers&quot;,&quot;Description&quot;:&quot;Profiles that are part of the core specification but are not base profiles&quot;,&quot;FhirVersion&quot;:&quot;STU3&quot;},{&quot;Name&quot;:&quot;HL7Norway.STU3.no.basis&quot;,&quot;Description&quot;:&quot;Basis profiles developed by HL7 Norway.&quot;,&quot;FhirVersion&quot;:&quot;STU3&quot;},{&quot;Name&quot;:&quot;kbv.fhir.vos&quot;,&quot;Description&quot;:&quot;Beispielprojekt Version 1.1&quot;,&quot;FhirVersion&quot;:&quot;STU3&quot;},{&quot;Name&quot;:&quot;testontwikkel.package&quot;,&quot;Description&quot;:&quot;Mijn eigen test en ontwikkelproject&quot;,&quot;FhirVersion&quot;:&quot;STU3&quot;},{&quot;Name&quot;:&quot;testontwikkelz.package&quot;,&quot;Description&quot;:&quot;Mijn eigen test en ontwikkelproject&quot;,&quot;FhirVersion&quot;:&quot;STU3&quot;},{&quot;Name&quot;:&quot;dvmd.kdl.stu3.2019&quot;,&quot;Description&quot;:&quot;Publikation der Terminologie-Ressourcen für die Nutzung der Klinische Dokumentenklassen-Liste (KDL) des DVMD&quot;,&quot;FhirVersion&quot;:&quot;STU3&quot;},{&quot;Name&quot;:&quot;PCR.Core.STU3&quot;,&quot;Description&quot;:&quot;ehealth Ontario&quot;,&quot;FhirVersion&quot;:&quot;STU3&quot;},{&quot;Name&quot;:&quot;MyDemoProject.core&quot;,&quot;Description&quot;:&quot;My demo project&quot;,&quot;FhirVersion&quot;:&quot;STU3&quot;},{&quot;Name&quot;:&quot;auw.dummy&quot;,&quot;Description&quot;:&quot;Dummy-Projekt zur Erstellung des AuW Packages&quot;,&quot;FhirVersion&quot;:&quot;STU3&quot;},{&quot;Name&quot;:&quot;MyDemo.core&quot;,&quot;Descrip\n</pre></div>",
        "id": 195118244,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1587675264
    },
    {
        "content": "<p>how do we clean this up? we don't want to see non real packages..</p>",
        "id": 195118258,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1587675275
    },
    {
        "content": "<p>I didn't look at nexus. should I? What would I look for?</p>",
        "id": 195119217,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1587675744
    },
    {
        "content": "<p>parsing for starters: <a href=\"https://github.com/sonatype/nexus-public/blob/master/plugins/nexus-repository-npm/src/main/java/org/sonatype/nexus/repository/npm/internal/NpmPackageParser.java\" title=\"https://github.com/sonatype/nexus-public/blob/master/plugins/nexus-repository-npm/src/main/java/org/sonatype/nexus/repository/npm/internal/NpmPackageParser.java\">https://github.com/sonatype/nexus-public/blob/master/plugins/nexus-repository-npm/src/main/java/org/sonatype/nexus/repository/npm/internal/NpmPackageParser.java</a></p>",
        "id": 195119350,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1587675825
    },
    {
        "content": "<p>resolving would be next</p>",
        "id": 195119541,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1587675910
    },
    {
        "content": "<p>since its an open source repo that handles (among others) npm packages I would think that they have all the logic needed</p>",
        "id": 195119681,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1587675968
    },
    {
        "content": "<p>that might have helped when I was starting, but not so much now</p>",
        "id": 195119909,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1587676094
    },
    {
        "content": "<p>actually - the whole resolving thing - shouldn't that have been carried out by npm repo?</p>",
        "id": 195120005,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1587676179
    },
    {
        "content": "<p>what resolving thing?</p>",
        "id": 195120070,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1587676203
    },
    {
        "content": "<p>when you fetch a leaf IG, you traverse one node up the tree right?</p>",
        "id": 195120118,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1587676239
    },
    {
        "content": "<p>a leaf IG?</p>",
        "id": 195120208,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1587676308
    },
    {
        "content": "<p>the most outer IG in a tree of IG's</p>",
        "id": 195120271,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1587676333
    },
    {
        "content": "<p>so you mean, based on dependencies?</p>",
        "id": 195120327,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1587676382
    },
    {
        "content": "<p>yes</p>",
        "id": 195120349,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1587676399
    },
    {
        "content": "<p>so I fetch just the package asked for in the package manager when the package is loaded. The IG loader will walk the dependencies loading the packages, which will be fetched if they are needed</p>",
        "id": 195120447,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1587676446
    },
    {
        "content": "<p>yeah ok .... well ... nevermind ... hope you didn't spend too much time on that part</p>",
        "id": 195120491,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1587676494
    },
    {
        "content": "<p>I still would like to know though, if there's a regular npm repo behind <a href=\"https://packages.fhir.org/\" title=\"https://packages.fhir.org/\">https://packages.fhir.org/</a></p>",
        "id": 195120544,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1587676532
    },
    {
        "content": "<p>some time. Initially, we talked about just asking the repository for the package and all it's dependencies, but the message I have been getting is that download time matters, and why fetch what you already have?</p>",
        "id": 195120573,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1587676553
    },
    {
        "content": "<p>sure ... there's no reason to do that</p>",
        "id": 195120822,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1587676697
    },
    {
        "content": "<p>but that could also be solved ... like npm and maven does it</p>",
        "id": 195120842,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1587676712
    },
    {
        "content": "<p>maven checks can check on SHA's if I remember correct</p>",
        "id": 195120881,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1587676738
    },
    {
        "content": "<p>npm probably does the same of some sort</p>",
        "id": 195120915,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1587676756
    },
    {
        "content": "<p>so the repo gives you back a list of resolved dependencies with links, versions and SHA's ...</p>",
        "id": 195120969,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1587676794
    },
    {
        "content": "<p>then you can decide for yourself about your caching strategy</p>",
        "id": 195121046,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1587676823
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"203235\">@Ward Weistra</span> an observation - when going to <a href=\"http://packages.fhir.org\" title=\"http://packages.fhir.org\">http://packages.fhir.org</a> then you are redirected to <a href=\"https://simplifier.net/packages\" title=\"https://simplifier.net/packages\">https://simplifier.net/packages</a> - but you need to be logged in, in order to download .... that seems fishy</p>",
        "id": 195121147,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1587676904
    },
    {
        "content": "<p>you don't need to be logged to download from <a href=\"http://packages.fhir.org\" title=\"http://packages.fhir.org\">packages.fhir.org</a></p>",
        "id": 195121264,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1587676962
    },
    {
        "content": "<p><a href=\"/user_uploads/10155/QfAZrnFWTlUIUU10U7aDBFOg/image.png\" title=\"image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/QfAZrnFWTlUIUU10U7aDBFOg/image.png\" title=\"image.png\"><img src=\"/user_uploads/10155/QfAZrnFWTlUIUU10U7aDBFOg/image.png\"></a></div>",
        "id": 195121316,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1587677006
    },
    {
        "content": "<p>then why does it say \"Login to download\" <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span></p>",
        "id": 195121402,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1587677051
    },
    {
        "content": "<p>because you're not using the API. But <span class=\"user-mention\" data-user-id=\"203235\">@Ward Weistra</span> people shouldn't have to login to use the web site either, for the package registry</p>",
        "id": 195121728,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1587677278
    },
    {
        "content": "<p>I cant use an API if curl tells me 404</p>",
        "id": 195121806,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1587677314
    },
    {
        "content": "<p>the circle is closed. If regular tools are not usable and the UI locks me out it doesn't work</p>",
        "id": 195121849,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1587677344
    },
    {
        "content": "<p>If I had got a 302 in cURL it would have been sufficient to me</p>",
        "id": 195122052,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1587677470
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191427\">@Jens Villadsen</span>  the api doc is here: <a href=\"https://simplifier.net/docs/package-server/Search\" title=\"https://simplifier.net/docs/package-server/Search\">https://simplifier.net/docs/package-server/Search</a></p>",
        "id": 195150911,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1587710021
    },
    {
        "content": "<blockquote>\n<p>Because we want to make package search as useful as possible for the FHIR usecase, we are not following the NPM standard, but we implement a lean endpoint that can be used for intellisense (dropdown) and a search that can deal with the most important FHIR relevant search queries: canonicals and FHIR versions.</p>\n</blockquote>",
        "id": 195150955,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1587710043
    },
    {
        "content": "<p>Is this a defined interface for fhir packages?</p>",
        "id": 195150967,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1587710060
    },
    {
        "content": "<p><a href=\"http://docs.simplifier.net/simplifier/simplifierPackages.html\" title=\"http://docs.simplifier.net/simplifier/simplifierPackages.html\">http://docs.simplifier.net/simplifier/simplifierPackages.html</a></p>",
        "id": 195151022,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1587710149
    },
    {
        "content": "<p>Good morning!</p>\n<p><span class=\"user-mention\" data-user-id=\"191427\">@Jens Villadsen</span> While the package spec is NPM inspired, it isn't fully compatible (no single root folder, lower case package names, not handling dependencies the same way). Also, from what I hear, NPM is not a nicely defined standard, but more a bag of conventions that you have to reengineer, making it harder. There's been an earlier conversation on this, without concrete decisions afaik: <a href=\"#narrow/stream/179280-fhir.2Finfrastructure-wg/topic/NPM.20Package.20Spec/near/181766179\" title=\"#narrow/stream/179280-fhir.2Finfrastructure-wg/topic/NPM.20Package.20Spec/near/181766179\">https://chat.fhir.org/#narrow/stream/179280-fhir.2Finfrastructure-wg/topic/NPM.20Package.20Spec/near/181766179</a></p>\n<p>I would welcome FHIR-I proposals on what aligning fully would mean, while maintaining any FHIR-needed extras like defining and searching on FHIR version. I do see the benefit in people being able to reuse NPM servers. Do keep in there are already a large number of packages, so we will need package-spec versioning too (personally I would think this spec should someday be tied to the rest of the FHIR spec versioning, so e.g. have the proposals for FHIR spec alignment with NPM work for FHIR package spec in R5).<br>\nThe Simplifier package infrastructure (from which the <a href=\"http://FHIR.org\" title=\"http://FHIR.org\">FHIR.org</a> package server benefits) doesn't use an existing NPM server behind it. We do have some instructions on installing with NPM, but I've been told dependencies are not coming along (as discussed above) and NPM search is not implemented.</p>\n<p>Simplifier's priority has been on making sure the FHIR packages endpoint does what it needs for the FHIR community. This has been documented on <a href=\"https://simplifier.net/docs/package-server\" title=\"https://simplifier.net/docs/package-server\">https://simplifier.net/docs/package-server</a> and is fully open, just curl <code>https://packages.fhir.org/catalog</code> instead (see Search) to get the packages, query <code>https://packages.fhir.org/&lt;package-name&gt;</code> for the versions and query <code>https://packages.fhir.org/&lt;package-name&gt;/&lt;package-version&gt;</code> to download. The find the dependencies in <code>package.json</code> and download those with their URLs. Or use Torinox to download them all.<br>\nIf you're visiting <a href=\"https://packages.fhir.org\" title=\"https://packages.fhir.org\">https://packages.fhir.org</a> (or <a href=\"https://packages.simplifier.net\" title=\"https://packages.simplifier.net\">https://packages.simplifier.net</a>) in the browser we redirect to the Simplifier UI for searching packages. This is a better experience than a 404 for someone looking for a package, right?</p>",
        "id": 195157199,
        "sender_full_name": "Ward Weistra",
        "timestamp": 1587715833
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> We've discussed the topic of <code>prerelease</code> before <a href=\"#narrow/stream/179239-tooling/topic/NPM.20package.20system/near/188932240\" title=\"#narrow/stream/179239-tooling/topic/NPM.20package.20system/near/188932240\">here</a>.</p>\n<ul>\n<li><a href=\"http://packages.fhir.org/catalog?fhirversion=STU3&amp;prerelease=false\" title=\"http://packages.fhir.org/catalog?fhirversion=STU3&amp;prerelease=false\">http://packages.fhir.org/catalog?fhirversion=STU3&amp;prerelease=false</a> will only show you packages that have a version that is not a prerelease. According to semver versioning <code>0.0.1-anything</code> is a pre-release package, <code>0.0.1</code> is not. That seems to work correctly, unless you find packages in that list that ONLY have prerelease version.</li>\n<li>Secondly, people could of course be marking things 'ready for release' which, let's say, are not of the level of quality of hl7.fhir.us.core. But in that sense Simplifier is the Youtube of FHIR data models (user-generated content) compared to the more tv-station approach (vetted content) of the HL7/FHIR Foundation feeds. There are two likely improvements to this: Allow the user to say (in package server and also the FHIR registry on top) from which channel they want the content to come (e.g only from 'FHIR Foundation Guides' feed or not from 'FHIR Foundation Support Packages' feed. And ranking the best packages (e.g. most referred to) higher to filter out the weeds.</li>\n</ul>",
        "id": 195158769,
        "sender_full_name": "Ward Weistra",
        "timestamp": 1587716911
    },
    {
        "content": "<p>(Side note: we will very soon unlist all the <code>Simplifier.Core.*</code> packages now the real deal <code>hl7.fhir.*.core</code> is there <span aria-label=\"tada\" class=\"emoji emoji-1f389\" role=\"img\" title=\"tada\">:tada:</span>)</p>",
        "id": 195160507,
        "sender_full_name": "Ward Weistra",
        "timestamp": 1587718037
    },
    {
        "content": "<blockquote>\n<p>I would welcome FHIR-I proposals on what aligning fully would mean, while maintaining any FHIR-needed extras like defining and searching on FHIR version. I do see the benefit in people being able to reuse NPM servers. Do keep in there are already a large number of packages, so we will need package-spec versioning too (personally I would think this spec should someday be tied to the rest of the FHIR spec versioning, so e.g. have the proposals for FHIR spec alignment with NPM work for FHIR package spec in R5).</p>\n</blockquote>\n<p><span class=\"user-mention\" data-user-id=\"203235\">@Ward Weistra</span>  sounds like we are aligned ;)</p>",
        "id": 195167445,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1587722372
    },
    {
        "content": "<p>I'm no npm master ninja - I would just like to not add frustration for people used to be using npm packages and repos. That would be my 5 cents.</p>",
        "id": 195167975,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1587722678
    },
    {
        "content": "<blockquote>\n<p>According to semver versioning 0.0.1-anything is a pre-release package, 0.0.1 is not</p>\n</blockquote>\n<p>One of the trends I hate right now in the Java ecosystem is that many big libraries have decided to deviate from this. Spring labels its releases <code>1.2.3.FINAL</code>, hibernate uses <code>1.2.3.RELEASE</code>, etc.</p>",
        "id": 195187294,
        "sender_full_name": "James Agnew",
        "timestamp": 1587734862
    },
    {
        "content": "<p>Hi guys, a couple of questions:</p>\n<p>1) When installing an IG which was loaded from a file on the disk, how should its dependencies be resolved?</p>\n<p>Use the PackageCacheManager to fetch the dependencies from the global cache, or the repository at <a href=\"http://packages.fhir.org\" title=\"http://packages.fhir.org\">packages.fhir.org</a> if a dependency is not in cache?</p>\n<p>2) What should the behavior be, if an IG or (any of) its dependencies cannot be resolved? A graceful shutdown or startup without installed packages?</p>\n<p>3) When generating snapshots of IGs with dependencies, I assume that any StructureDefinitions in any of the dependencies, that does not already contain a snapshot, should also have its snapshot generated.</p>\n<p>Should this happen in a specific order, eg. snapshots of dependencies should be generated before snapshots of the dependent package?</p>",
        "id": 195187549,
        "sender_full_name": "Martin Zacho Grønhøj",
        "timestamp": 1587734986
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"203235\">@Ward Weistra</span> :</p>\n<blockquote>\n<p>While the package spec is NPM inspired, it isn't fully compatible</p>\n</blockquote>\n<p>I don't believe that this is true</p>\n<blockquote>\n<p>no single root folder</p>\n</blockquote>\n<p>I reworked all the packages to only have a single root folder, and we wrote this into the rules</p>\n<blockquote>\n<p>lower case package names</p>\n</blockquote>\n<p>That is a convention that we made, though I see it's not a convention that Simplifier follows. None of my package infrastructure depends on following it, though all the HL7 authoring rules enforce it</p>\n<blockquote>\n<p>not handling dependencies the same way</p>\n</blockquote>\n<p>Other than restricting the possible values for version, I thought it was the same</p>",
        "id": 195247105,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1587763962
    },
    {
        "content": "<blockquote>\n<p>people could of course be marking things 'ready for release' which, let's say, are not of the level of quality of hl7.fhir.us.core.</p>\n</blockquote>\n<p>Well, there's levels in between. the package server should publish packages when people are ready to publish them, irrespective of the workflow of quality. But  I think that simplifier projects should not be allowed to publish packages like <code>dummy.first</code> - they should be at least forced to namespace. And projects like that should be removed from being published.</p>",
        "id": 195247318,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1587764112
    },
    {
        "content": "<p>but whatever, we have to figure out how to tidy this up ASAP</p>",
        "id": 195247354,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1587764144
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"294872\">@Martin Zacho Grønhøj</span> </p>\n<p>1 - I'm not sure what difference you intend there - my answer is yes to both unless I misunderstand what you mean by global cache</p>\n<ol start=\"2\">\n<li>\n<p>that's an application specific question. Are you asking about HAPI installation? I would expect that in that context, you'd ask the user</p>\n</li>\n<li>\n<p>yes and yes. Though how I manage this in the core tools is :</p>\n</li>\n</ol>\n<ul>\n<li>Load all profiles</li>\n<li>iterate them all generating the snapshots</li>\n<li>generate any missing snapshots in dependencies recursively</li>\n<li>keep a watch on the stack to guard against stack crash (and produce a better error message)</li>\n</ul>",
        "id": 195247634,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1587764339
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191316\">Grahame Grieve</span> <a href=\"#narrow/stream/179167-hapi/topic/Upload.20of.20IG/near/195247634\" title=\"#narrow/stream/179167-hapi/topic/Upload.20of.20IG/near/195247634\">said</a>:</p>\n<blockquote>\n<p>1 - I'm not sure what difference you intend there - my answer is yes to both unless I misunderstand what you mean by global cache</p>\n</blockquote>\n<p>Global cache meaning the <a href=\"https://confluence.hl7.org/display/FHIR/FHIR+Package+Cache\" title=\"https://confluence.hl7.org/display/FHIR/FHIR+Package+Cache\">local cache on the machine</a>.</p>\n<p><span class=\"user-mention silent\" data-user-id=\"191316\">Grahame Grieve</span> <a href=\"#narrow/stream/179167-hapi/topic/Upload.20of.20IG/near/195247634\" title=\"#narrow/stream/179167-hapi/topic/Upload.20of.20IG/near/195247634\">said</a>:</p>\n<blockquote>\n<ol start=\"2\">\n<li>that's an application specific question. Are you asking about HAPI installation? I would expect that in that context, you'd ask the user</li>\n</ol>\n</blockquote>\n<p>Yes, in hapi-fhir-jpaserver-starter for instance. IMO it's sensible to have the default behavior be a shutdown, to inform the user of the error, but also allow a flag to be set, if the user wants to run the application anyways. So I guess my question is: Does it make sense to run a server with a package that's missing its dependencies?</p>\n<p><span class=\"user-mention silent\" data-user-id=\"191316\">Grahame Grieve</span> <a href=\"#narrow/stream/179167-hapi/topic/Upload.20of.20IG/near/195247634\" title=\"#narrow/stream/179167-hapi/topic/Upload.20of.20IG/near/195247634\">said</a>:</p>\n<blockquote>\n<ol start=\"3\">\n<li>yes and yes. Though how I manage this in the core tools is :</li>\n</ol>\n</blockquote>\n<p>Could you provide me with a link to the source code of this? I can't seem to find it.</p>",
        "id": 195259604,
        "sender_full_name": "Martin Zacho Grønhøj",
        "timestamp": 1587775274
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"294872\">Martin Zacho Grønhøj</span> <a href=\"#narrow/stream/179167-hapi/topic/Upload.20of.20IG/near/195259604\" title=\"#narrow/stream/179167-hapi/topic/Upload.20of.20IG/near/195259604\">said</a>:</p>\n<blockquote>\n<p>Could you provide me with a link to the source code of this? I can't seem to find it.</p>\n</blockquote>\n<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span></p>",
        "id": 195381622,
        "sender_full_name": "Martin Zacho Grønhøj",
        "timestamp": 1587972788
    },
    {
        "content": "<p>well, it's spread across the core code, but most of it's in org.hl7.fhir.r5.context.BaseWorkerContext</p>",
        "id": 195393350,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1587980205
    },
    {
        "content": "<p>aint much of it wrapped in <a href=\"https://github.com/hapifhir/org.hl7.fhir.core/blob/4316c81f7ef578510c0b255663dd06ff64b9b56e/org.hl7.fhir.r5/src/main/java/org/hl7/fhir/r5/conformance/ProfileUtilities.java#L463\" title=\"https://github.com/hapifhir/org.hl7.fhir.core/blob/4316c81f7ef578510c0b255663dd06ff64b9b56e/org.hl7.fhir.r5/src/main/java/org/hl7/fhir/r5/conformance/ProfileUtilities.java#L463\">https://github.com/hapifhir/org.hl7.fhir.core/blob/4316c81f7ef578510c0b255663dd06ff64b9b56e/org.hl7.fhir.r5/src/main/java/org/hl7/fhir/r5/conformance/ProfileUtilities.java#L463</a> <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> ?</p>",
        "id": 195393844,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1587980540
    },
    {
        "content": "<p>that's the logic for generating snapshots. the logic for managing the generation is in the BaseContext</p>",
        "id": 195394222,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1587980810
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191319\">James Agnew</span> <a href=\"#narrow/stream/179167-hapi/topic/Upload.20of.20IG/near/193381464\" title=\"#narrow/stream/179167-hapi/topic/Upload.20of.20IG/near/193381464\">said</a>:</p>\n<blockquote>\n<p>I guess Subscription should be added to this list too. I haven't yet seen someone including a Subscription in an IG, but I bet it's a matter of time...</p>\n</blockquote>\n<p>In our current way of uploading the resources from the IG to our server, for each resource R1 we do the following:</p>\n<ul>\n<li>search for any resource R2 with the same URL (profile?)</li>\n<li>if found, assign <a href=\"http://R2.id\" title=\"http://R2.id\">R2.id</a> to R1 and update R1</li>\n<li>otherwise, create R1</li>\n</ul>\n<p>The other resource types (NamingSystem, CodeSystem, ValueSet, StructureDefinition, ConceptMap and SearchParameter) all extend MetadataResource and thus have a searchable URL, whereas Subscription does not, since it only extends DomainResource.</p>\n<p>What parameter should be used for searching for existing subscriptions, when uploading subscriptions from an IG? I guess the ID could be used, but since it's not globally unique like the MetadataResource URL, then the IG upload could introduce duplicate data.</p>",
        "id": 195557549,
        "sender_full_name": "Martin Zacho Grønhøj",
        "timestamp": 1588077898
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"294872\">Martin Zacho Grønhøj</span> <a href=\"#narrow/stream/179167-hapi/topic/Upload.20of.20IG/near/195557549\" title=\"#narrow/stream/179167-hapi/topic/Upload.20of.20IG/near/195557549\">said</a>:</p>\n<blockquote>\n<p>The other resource types (NamingSystem, CodeSystem, ValueSet, StructureDefinition, ConceptMap and SearchParameter) all extend MetadataResource and thus have a searchable URL, whereas Subscription does not, since it only extends DomainResource.</p>\n<p>What parameter should be used for searching for existing subscriptions, when uploading subscriptions from an IG? I guess the ID could be used, but since it's not globally unique like the MetadataResource URL, then the IG upload could introduce duplicate data.</p>\n</blockquote>\n<p>Subscriptions should be unique by their Identifier, right? <span class=\"user-mention\" data-user-id=\"191319\">@James Agnew</span> <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span></p>",
        "id": 195569648,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1588083140
    },
    {
        "content": "<p>Subscriptions don't have an identifier, so I think you'd have to use the ID. It's not ideal, but there isn't really a better way I can see..</p>",
        "id": 195570504,
        "sender_full_name": "James Agnew",
        "timestamp": 1588083581
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191319\">@James Agnew</span> what is <a href=\"http://build.fhir.org/subscription-definitions.html#Subscription.identifier\" title=\"http://build.fhir.org/subscription-definitions.html#Subscription.identifier\">http://build.fhir.org/subscription-definitions.html#Subscription.identifier</a> that then?</p>",
        "id": 195595706,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1588093696
    },
    {
        "content": "<p>oh.... that is only on bleeding edge ...</p>",
        "id": 195595804,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1588093741
    },
    {
        "content": "<p><span aria-label=\"drooling\" class=\"emoji emoji-1f924\" role=\"img\" title=\"drooling\">:drooling:</span></p>",
        "id": 195595835,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1588093760
    },
    {
        "content": "<p>Ah, so it is.</p>",
        "id": 195596353,
        "sender_full_name": "James Agnew",
        "timestamp": 1588093972
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"294872\">Martin Zacho Grønhøj</span> <a href=\"#narrow/stream/179167-hapi/topic/Upload.20of.20IG/near/195047030\" title=\"#narrow/stream/179167-hapi/topic/Upload.20of.20IG/near/195047030\">said</a>:</p>\n<blockquote>\n<p>I've forked <a href=\"https://github.com/mzgtrifork/hapi-fhir-jpaserver-starter/tree/install-external-ig-package-at-startup\" title=\"https://github.com/mzgtrifork/hapi-fhir-jpaserver-starter/tree/install-external-ig-package-at-startup\">hapi-fhir-jpaserver-starter</a></p>\n</blockquote>\n<p><span class=\"user-mention\" data-user-id=\"191505\">@Sean McIlvenna</span> FYI</p>",
        "id": 195812594,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1588236716
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191319\">@James Agnew</span> - Can you be persuaded to have a look at the upcoming PR that <span class=\"user-mention\" data-user-id=\"294872\">@Martin Zacho Grønhøj</span> hopefully will make in the near future in order to get this into 5.0.0? or has that deadline already passed?</p>",
        "id": 195812877,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1588236900
    },
    {
        "content": "<p>hopefully not - I have a breaking change to commit for R5 that I haven't got around to yet</p>",
        "id": 195812939,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1588236946
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> is that a commit to something in <a href=\"https://github.com/hapifhir/org.hl7.fhir.core\" title=\"https://github.com/hapifhir/org.hl7.fhir.core\">https://github.com/hapifhir/org.hl7.fhir.core</a> ? AFAIK, <span class=\"user-mention\" data-user-id=\"294872\">@Martin Zacho Grønhøj</span>'s work will concern loading of Igs in versions DSTU3 and R4 based on the transitive dependency that HAPI FHIR runs on</p>",
        "id": 195813217,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1588237147
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> so (how) will your commit be able to break that?</p>",
        "id": 195813332,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1588237216
    },
    {
        "content": "<p>PR to hapi-fhir should be ready in a few days. It uses the npm utilities from org.hl7.fhir.utilities.cache and models from org.hl7.fhir.&lt;version&gt;.model.</p>",
        "id": 195815695,
        "sender_full_name": "Martin Zacho Grønhøj",
        "timestamp": 1588238946
    },
    {
        "content": "<p>I'm fixing some property accessors in the generated model classes</p>",
        "id": 195822482,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1588243600
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> whats your ETA for completion of that fixing?</p>",
        "id": 195886310,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1588273389
    },
    {
        "content": "<p>I don't know. soon, but people keep dropping other urgent stuff on me</p>",
        "id": 195903288,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1588281710
    },
    {
        "content": "<p><a href=\"/user_uploads/10155/31RALkyJK9BIBF5WX8BvvWZ5/image.png\" title=\"image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/31RALkyJK9BIBF5WX8BvvWZ5/image.png\" title=\"image.png\"><img src=\"/user_uploads/10155/31RALkyJK9BIBF5WX8BvvWZ5/image.png\"></a></div>",
        "id": 195903481,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1588281806
    },
    {
        "content": "<p>yeah well that's pretty topical these days</p>",
        "id": 195903599,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1588281850
    },
    {
        "content": "<p><a href=\"/user_uploads/10155/mOqVJZJkh6obgeCatCB7nZLT/image.png\" title=\"image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/mOqVJZJkh6obgeCatCB7nZLT/image.png\" title=\"image.png\"><img src=\"/user_uploads/10155/mOqVJZJkh6obgeCatCB7nZLT/image.png\"></a></div>",
        "id": 195903752,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1588281941
    },
    {
        "content": "<p>PR for hapi-fhir is ready: <a href=\"https://github.com/jamesagnew/hapi-fhir/pull/1826\" title=\"https://github.com/jamesagnew/hapi-fhir/pull/1826\">https://github.com/jamesagnew/hapi-fhir/pull/1826</a></p>\n<p>Let me know what you think/ improvements etc.</p>",
        "id": 195994148,
        "sender_full_name": "Martin Zacho Grønhøj",
        "timestamp": 1588358327
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191319\">@James Agnew</span></p>",
        "id": 196000327,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1588361683
    },
    {
        "content": "<p>I've implemented a quick reference implementation of how to use the new IgInstallerSvc in my <a href=\"https://github.com/mzgtrifork/hapi-fhir-jpaserver-starter/tree/ig_upload_reference_implementation\" title=\"https://github.com/mzgtrifork/hapi-fhir-jpaserver-starter/tree/ig_upload_reference_implementation\">hapi-fhir-jpaserver-starter fork</a> using a local built of the <a href=\"https://github.com/mzgtrifork/hapi-fhir/tree/install-external-ig-package-at-startup\" title=\"https://github.com/mzgtrifork/hapi-fhir/tree/install-external-ig-package-at-startup\">branch from my PR</a>. It is still under review.</p>\n<p>I've build a docker-image, so you can try running an instance of hapi-fhir-starter with an uploaded IG of your choice:</p>\n<div class=\"codehilite\"><pre><span></span><code>docker pull mzgtrifork/hapi-fhir-jpaserver-starter:0.0.1\n</code></pre></div>\n\n\n<p>install an implementation guide using a URL:</p>\n<div class=\"codehilite\"><pre><span></span><code>docker run \\\n       --name=hapi-fhir \\\n       --rm \\\n       -p 8080:8080 \\\n       -e HAPI_IMPLEMENTATION_GUIDE_URL=https://build.fhir.org/ig/hl7dk/dk-medcom/package.tgz \\\n       mzgtrifork/hapi-fhir-jpaserver-starter:0.0.1\n</code></pre></div>\n\n\n<p>or to fetch a package, say NHSD.Assets.STU3#1.0.0, from <a href=\"http://packages.fhir.org\" title=\"http://packages.fhir.org\">packages.fhir.org</a> and install at startup:</p>\n<div class=\"codehilite\"><pre><span></span><code>docker run \\\n       --name=hapi-fhir \\\n       --rm \\\n       -p 8080:8080 \\\n       -e HAPI_FHIR_VERSION=DSTU3 \\\n       -e HAPI_IMPLEMENTATION_GUIDE_ID=NHSD.Assets.STU3 \\\n       -e HAPI_IMPLEMENTATION_GUIDE_VERSION=1.0.0 \\\n       mzgtrifork/hapi-fhir-jpaserver-starter:0.0.1\n</code></pre></div>\n\n\n<p>So far so good - a lot of packages on <a href=\"http://packages.fhir.org\" title=\"http://packages.fhir.org\">packages.fhir.org</a> causes various errors. It seems like Simplifier doesn't validate packages according to <a href=\"https://confluence.hl7.org/display/FHIR/NPM+Package+Specification#NPMPackageSpecification-Versions\" title=\"https://confluence.hl7.org/display/FHIR/NPM+Package+Specification#NPMPackageSpecification-Versions\">the spec</a>? <span class=\"user-mention\" data-user-id=\"191319\">@James Agnew</span> <span class=\"user-mention\" data-user-id=\"203235\">@Ward Weistra</span></p>",
        "id": 196826058,
        "sender_full_name": "Martin Zacho Grønhøj",
        "timestamp": 1588883288
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> <span class=\"user-mention\" data-user-id=\"191451\">@Patrick Werner</span> have a look at the docker image and let us know what you think</p>",
        "id": 196831048,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1588886068
    },
    {
        "content": "<p>which packages cause errors? We're still working on the packages ...</p>",
        "id": 196831205,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1588886143
    },
    {
        "content": "<p><a href=\"https://simplifier.net/packages/de.medizininformatikinitiative.kerndatensatz.person/0.9.1\" title=\"https://simplifier.net/packages/de.medizininformatikinitiative.kerndatensatz.person/0.9.1\">https://simplifier.net/packages/de.medizininformatikinitiative.kerndatensatz.person/0.9.1</a> seems to be broken</p>",
        "id": 196833582,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1588887528
    },
    {
        "content": "<p><a href=\"https://simplifier.net/packages/ehelse.fhir.no.grunndata/2.2.4\" title=\"https://simplifier.net/packages/ehelse.fhir.no.grunndata/2.2.4\">https://simplifier.net/packages/ehelse.fhir.no.grunndata/2.2.4</a> seems to be broken</p>",
        "id": 196833618,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1588887555
    },
    {
        "content": "<p>the packages sourced from Simplifier... yes... lots of problems in those</p>",
        "id": 196834065,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1588887813
    },
    {
        "content": "<p>well ... how should one be able to tell where they come from?</p>",
        "id": 196834179,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1588887879
    },
    {
        "content": "<p><a href=\"https://simplifier.net/packages/hl7.fhir.uv.ips/0.3.0\" title=\"https://simplifier.net/packages/hl7.fhir.uv.ips/0.3.0\">https://simplifier.net/packages/hl7.fhir.uv.ips/0.3.0</a> is broken</p>",
        "id": 196834197,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1588887889
    },
    {
        "content": "<p>oh why?</p>",
        "id": 196834250,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1588887920
    },
    {
        "content": "<p>FHIR versions mismatch (expected &lt;=4.0.1, package uses 3.2.0)</p>",
        "id": 196834268,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1588887928
    },
    {
        "content": "<p>wait ...</p>",
        "id": 196834597,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1588888109
    },
    {
        "content": "<p>no ... ips is fine</p>",
        "id": 196834825,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1588888251
    },
    {
        "content": "<p>us core (3.1.0) however is broken: ConceptMap[url='<a href=\"http://hl7.org/fhir/us/core/ConceptMap/ndc-cvx']\" title=\"http://hl7.org/fhir/us/core/ConceptMap/ndc-cvx']\">http://hl7.org/fhir/us/core/ConceptMap/ndc-cvx']</a> contains at least one group without a value in ConceptMap.group.source</p>",
        "id": 196835191,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1588888443
    },
    {
        "content": "<p>why would you call that broken?</p>",
        "id": 196835295,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1588888522
    },
    {
        "content": "<p>because it means that the concept map cannot be stored</p>",
        "id": 196835400,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1588888570
    },
    {
        "content": "<p>i don't follow that. The specification doesn't require it, and the author didn't provide it, so why is it the package that is broken?</p>",
        "id": 196835432,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1588888612
    },
    {
        "content": "<p>let me rephrase: the implementation guide contains resources that cannot be stored using the java reference implementation. whether its a bug in the reference implementation or in the IG, i cannot say for now</p>",
        "id": 196835604,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1588888731
    },
    {
        "content": "<p>since the package was built using the reference implementation, I think that you should look elsewhere for the source of the issue</p>",
        "id": 196835653,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1588888769
    },
    {
        "content": "<p>by reference implementation I mean the java reference implementation (HAPI) - not the ig tooling</p>",
        "id": 196835807,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1588888855
    },
    {
        "content": "<p>HAPI is not the reference implementation. The reference implementation is the HAPI FHIR Core. So no doubt the problem is some business rule in HAPI somewhere, which I think it erroneous. but in this case it's not the package that is broken</p>",
        "id": 196835903,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1588888920
    },
    {
        "content": "<p>right - the loading of it is</p>",
        "id": 196835971,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1588888945
    },
    {
        "content": "<p>That is a rule in the current HAPI FHIR JPA server - There's a not-null on a table that means we can't store ConceptMap groups without a source</p>\n<p>I think Diederik assumed that was a safe rule to have when he coded it but sounds like it isn't</p>",
        "id": 196836090,
        "sender_full_name": "James Agnew",
        "timestamp": 1588889027
    },
    {
        "content": "<p>the documentation says about ConceptMap.group.source: </p>\n<blockquote>\n<p>This is not needed if the source value set is specified and it contains concepts from only a single system</p>\n</blockquote>",
        "id": 196836205,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1588889076
    },
    {
        "content": "<p>run </p>\n<div class=\"codehilite\"><pre><span></span><code>docker run \\\n       --name=hapi-fhir \\\n       --rm \\\n       -p 8080:8080 \\\n       -e HAPI_FHIR_VERSION=R4 \\\n       -e HAPI_IMPLEMENTATION_GUIDE_ID=hl7.fhir.us.core \\\n       -e HAPI_IMPLEMENTATION_GUIDE_VERSION=3.1.0 \\\n       mzgtrifork/hapi-fhir-jpaserver-starter:0.0.1\n</code></pre></div>\n\n\n<p>and you can see for yourself</p>",
        "id": 196836234,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1588889092
    },
    {
        "content": "<blockquote>\n<p>This is not needed if the source value set is specified and it contains concepts from only a single system</p>\n</blockquote>\n<p>Heh, that feels like a weird bit of context conduction to me, but if it's allowed I'll ticket it.</p>",
        "id": 196836449,
        "sender_full_name": "James Agnew",
        "timestamp": 1588889218
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"294872\">@Martin Zacho Grønhøj</span> <span class=\"user-mention\" data-user-id=\"191427\">@Jens Villadsen</span> Thanks for calling out issues. I see the two packages Jens mentions are part of a group of packages having duplicate files in there, which we are working to resolve.<br>\nAny other specific issues you are finding so I can prevent them from happening?</p>",
        "id": 196870678,
        "sender_full_name": "Ward Weistra",
        "timestamp": 1588927386
    },
    {
        "content": "<p>The bug <a href=\"https://github.com/hapifhir/org.hl7.fhir.core/issues/188#issuecomment-622565654\">I've reported here</a> is pretty common and occurs for instance in acme.base#0.0.5 and de.medizininformatikinitiative.kerndatensatz.fall#0.9.0, but it's supposedly been fixed.</p>\n<p>The package hl7.fhir.au.rcpa#0.1.0 throws a parsing error:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nx\">ca</span><span class=\"p\">.</span><span class=\"nx\">uhn</span><span class=\"p\">.</span><span class=\"nx\">fhir</span><span class=\"p\">.</span><span class=\"nx\">parser</span><span class=\"p\">.</span><span class=\"nx\">DataFormatException</span><span class=\"o\">:</span> <span class=\"nx\">Unknown</span> <span class=\"nx\">element</span> <span class=\"s1\">&#39;comments&#39;</span> <span class=\"nx\">found</span> <span class=\"nx\">during</span> <span class=\"nx\">parse</span>\n</code></pre></div>\n\n\n<p>Don't know if its an error in the parser or the package data (probably the former).</p>\n<p>The package nictiz.fhir.nl.stu3.questionnaires#1.0.0 uses <a href=\"https://github.com/npm/node-semver#advanced-range-syntax\">X-Range NPM semantic versioning</a> for the dependency nictiz.fhir.nl.stu3.zib2017#1.3.x which cannot be resolved using the PackageCacheManager#loadPackage:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nx\">org</span><span class=\"p\">.</span><span class=\"nx\">hl7</span><span class=\"p\">.</span><span class=\"nx\">fhir</span><span class=\"p\">.</span><span class=\"nx\">exceptions</span><span class=\"p\">.</span><span class=\"nx\">FHIRException</span><span class=\"o\">:</span> <span class=\"nx\">Unable</span> <span class=\"nx\">to</span> <span class=\"nx\">resolve</span> <span class=\"kr\">package</span> <span class=\"nx\">id</span> <span class=\"nx\">nictiz</span><span class=\"p\">.</span><span class=\"nx\">fhir</span><span class=\"p\">.</span><span class=\"nx\">nl</span><span class=\"p\">.</span><span class=\"nx\">stu3</span><span class=\"p\">.</span><span class=\"nx\">zib2017</span>\n\n    <span class=\"nx\">at</span> <span class=\"nx\">org</span><span class=\"p\">.</span><span class=\"nx\">hl7</span><span class=\"p\">.</span><span class=\"nx\">fhir</span><span class=\"p\">.</span><span class=\"nx\">utilities</span><span class=\"p\">.</span><span class=\"nx\">cache</span><span class=\"p\">.</span><span class=\"nx\">PackageCacheManager</span><span class=\"p\">.</span><span class=\"nx\">fetchTheOldWay</span><span class=\"p\">(</span><span class=\"nx\">PackageCacheManager</span><span class=\"p\">.</span><span class=\"nx\">java</span><span class=\"o\">:</span><span class=\"mi\">772</span><span class=\"p\">)</span>\n    <span class=\"nx\">at</span> <span class=\"nx\">org</span><span class=\"p\">.</span><span class=\"nx\">hl7</span><span class=\"p\">.</span><span class=\"nx\">fhir</span><span class=\"p\">.</span><span class=\"nx\">utilities</span><span class=\"p\">.</span><span class=\"nx\">cache</span><span class=\"p\">.</span><span class=\"nx\">PackageCacheManager</span><span class=\"p\">.</span><span class=\"nx\">loadFromPackageServer</span><span class=\"p\">(</span><span class=\"nx\">PackageCacheManager</span><span class=\"p\">.</span><span class=\"nx\">java</span><span class=\"o\">:</span><span class=\"mi\">335</span><span class=\"p\">)</span>\n    <span class=\"nx\">at</span> <span class=\"nx\">org</span><span class=\"p\">.</span><span class=\"nx\">hl7</span><span class=\"p\">.</span><span class=\"nx\">fhir</span><span class=\"p\">.</span><span class=\"nx\">utilities</span><span class=\"p\">.</span><span class=\"nx\">cache</span><span class=\"p\">.</span><span class=\"nx\">PackageCacheManager</span><span class=\"p\">.</span><span class=\"nx\">loadPackage</span><span class=\"p\">(</span><span class=\"nx\">PackageCacheManager</span><span class=\"p\">.</span><span class=\"nx\">java</span><span class=\"o\">:</span><span class=\"mi\">601</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p>The <a href=\"https://confluence.hl7.org/display/FHIR/NPM+Package+Specification#NPMPackageSpecification-Versions\">fhir package spec</a> says it's allowed, and the package ID nictiz.fhir.nl.stu3.zib2017#1.3.9 has no problems resolving using the cache manager, so I guess it's a bug in the cache manager.</p>\n<p>The package hl7.fhir.au.pd#2.0.1 has a SearchParameter, which causes the following error:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nx\">Caused</span> <span class=\"nx\">by</span><span class=\"o\">:</span> <span class=\"nx\">ca</span><span class=\"p\">.</span><span class=\"nx\">uhn</span><span class=\"p\">.</span><span class=\"nx\">fhir</span><span class=\"p\">.</span><span class=\"nx\">rest</span><span class=\"p\">.</span><span class=\"nx\">server</span><span class=\"p\">.</span><span class=\"nx\">exceptions</span><span class=\"p\">.</span><span class=\"nx\">UnprocessableEntityException</span><span class=\"o\">:</span> <span class=\"nx\">Invalid</span> <span class=\"nx\">SearchParameter</span><span class=\"p\">.</span><span class=\"nx\">expression</span> <span class=\"nx\">value</span> <span class=\"s2\">&quot;extension(‘http://hl7.org.au/fhir/StructureDefinition/au-receivingfacility’).extension(‘namespace-id’).value&quot;</span><span class=\"o\">:</span> <span class=\"nb\">Error</span> <span class=\"k\">in</span> <span class=\"o\">??</span> <span class=\"nx\">at</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"o\">:</span> <span class=\"nx\">Found</span> <span class=\"err\">‘</span> <span class=\"nx\">expecting</span> <span class=\"nx\">a</span> <span class=\"nx\">token</span> <span class=\"nx\">name</span>\n    <span class=\"nx\">at</span> <span class=\"nx\">ca</span><span class=\"p\">.</span><span class=\"nx\">uhn</span><span class=\"p\">.</span><span class=\"nx\">fhir</span><span class=\"p\">.</span><span class=\"nx\">jpa</span><span class=\"p\">.</span><span class=\"nx\">dao</span><span class=\"p\">.</span><span class=\"nx\">r4</span><span class=\"p\">.</span><span class=\"nx\">FhirResourceDaoSearchParameterR4</span><span class=\"p\">.</span><span class=\"nx\">validateSearchParam</span><span class=\"p\">(</span><span class=\"nx\">FhirResourceDaoSearchParameterR4</span><span class=\"p\">.</span><span class=\"nx\">java</span><span class=\"o\">:</span><span class=\"mi\">147</span><span class=\"p\">)</span>\n    <span class=\"nx\">at</span> <span class=\"nx\">ca</span><span class=\"p\">.</span><span class=\"nx\">uhn</span><span class=\"p\">.</span><span class=\"nx\">fhir</span><span class=\"p\">.</span><span class=\"nx\">jpa</span><span class=\"p\">.</span><span class=\"nx\">dao</span><span class=\"p\">.</span><span class=\"nx\">r4</span><span class=\"p\">.</span><span class=\"nx\">FhirResourceDaoSearchParameterR4</span><span class=\"p\">.</span><span class=\"nx\">validateResourceForStorage</span><span class=\"p\">(</span><span class=\"nx\">FhirResourceDaoSearchParameterR4</span><span class=\"p\">.</span><span class=\"nx\">java</span><span class=\"o\">:</span><span class=\"mi\">88</span><span class=\"p\">)</span>\n    <span class=\"nx\">at</span> <span class=\"nx\">ca</span><span class=\"p\">.</span><span class=\"nx\">uhn</span><span class=\"p\">.</span><span class=\"nx\">fhir</span><span class=\"p\">.</span><span class=\"nx\">jpa</span><span class=\"p\">.</span><span class=\"nx\">dao</span><span class=\"p\">.</span><span class=\"nx\">r4</span><span class=\"p\">.</span><span class=\"nx\">FhirResourceDaoSearchParameterR4</span><span class=\"p\">.</span><span class=\"nx\">validateResourceForStorage</span><span class=\"p\">(</span><span class=\"nx\">FhirResourceDaoSearchParameterR4</span><span class=\"p\">.</span><span class=\"nx\">java</span><span class=\"o\">:</span><span class=\"mi\">47</span><span class=\"p\">)</span>\n    <span class=\"nx\">at</span> <span class=\"nx\">ca</span><span class=\"p\">.</span><span class=\"nx\">uhn</span><span class=\"p\">.</span><span class=\"nx\">fhir</span><span class=\"p\">.</span><span class=\"nx\">jpa</span><span class=\"p\">.</span><span class=\"nx\">dao</span><span class=\"p\">.</span><span class=\"nx\">BaseHapiFhirDao</span><span class=\"p\">.</span><span class=\"nx\">updateEntity</span><span class=\"p\">(</span><span class=\"nx\">BaseHapiFhirDao</span><span class=\"p\">.</span><span class=\"nx\">java</span><span class=\"o\">:</span><span class=\"mi\">997</span><span class=\"p\">)</span>\n    <span class=\"nx\">at</span> <span class=\"nx\">ca</span><span class=\"p\">.</span><span class=\"nx\">uhn</span><span class=\"p\">.</span><span class=\"nx\">fhir</span><span class=\"p\">.</span><span class=\"nx\">jpa</span><span class=\"p\">.</span><span class=\"nx\">dao</span><span class=\"p\">.</span><span class=\"nx\">BaseHapiFhirResourceDao</span><span class=\"p\">.</span><span class=\"nx\">doCreate</span><span class=\"p\">(</span><span class=\"nx\">BaseHapiFhirResourceDao</span><span class=\"p\">.</span><span class=\"nx\">java</span><span class=\"o\">:</span><span class=\"mi\">515</span><span class=\"p\">)</span>\n    <span class=\"nx\">at</span> <span class=\"nx\">ca</span><span class=\"p\">.</span><span class=\"nx\">uhn</span><span class=\"p\">.</span><span class=\"nx\">fhir</span><span class=\"p\">.</span><span class=\"nx\">jpa</span><span class=\"p\">.</span><span class=\"nx\">dao</span><span class=\"p\">.</span><span class=\"nx\">BaseHapiFhirResourceDao</span><span class=\"p\">.</span><span class=\"nx\">create</span><span class=\"p\">(</span><span class=\"nx\">BaseHapiFhirResourceDao</span><span class=\"p\">.</span><span class=\"nx\">java</span><span class=\"o\">:</span><span class=\"mi\">221</span><span class=\"p\">)</span>\n    <span class=\"nx\">at</span> <span class=\"nx\">ca</span><span class=\"p\">.</span><span class=\"nx\">uhn</span><span class=\"p\">.</span><span class=\"nx\">fhir</span><span class=\"p\">.</span><span class=\"nx\">jpa</span><span class=\"p\">.</span><span class=\"nx\">dao</span><span class=\"p\">.</span><span class=\"nx\">BaseHapiFhirResourceDao</span><span class=\"p\">.</span><span class=\"nx\">create</span><span class=\"p\">(</span><span class=\"nx\">BaseHapiFhirResourceDao</span><span class=\"p\">.</span><span class=\"nx\">java</span><span class=\"o\">:</span><span class=\"mi\">185</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p>To me this looks like 1) an error in the package or 2) some kind of character encoding error in the json parser, used to parse the contents of the package, or in the dao, but I'm not sure, haven't looked into it.</p>\n<p>These are the errors I encountered in todays testing of the IG installer <span class=\"user-mention\" data-user-id=\"203235\">@Ward Weistra</span> :)</p>",
        "id": 197411637,
        "sender_full_name": "Martin Zacho Grønhøj",
        "timestamp": 1589376255
    },
    {
        "content": "<p>Thanks <span class=\"user-mention\" data-user-id=\"294872\">@Martin Zacho Grønhøj</span>. Indeed, the Simplifier packages issue of not filling the fhirVersion  has been resolved today for new newly created packages. And apparently Grahame has also updated his tooling to handle them for the few that don't <span aria-label=\"clap\" class=\"emoji emoji-1f44f\" role=\"img\" title=\"clap\">:clap:</span> </p>\n<p>The .NET tool stack supports the limited wildcard semantic versioning that the package spec allows and resolves this dependency correctly: <a href=\"https://simplifier.net/packages/nictiz.fhir.nl.stu3.questionnaires/1.0.0\">https://simplifier.net/packages/nictiz.fhir.nl.stu3.questionnaires/1.0.0</a></p>\n<p>Perhaps <span class=\"user-mention\" data-user-id=\"191368\">@Brett Esler</span> can help us debug the issues with the two <code>hl7.fhir.au</code> packages, which I assume come from <a href=\"https://github.com/FHIR/ig-registry/blob/master/fhir-ig-list.json\">his feed</a>.</p>",
        "id": 197432358,
        "sender_full_name": "Ward Weistra",
        "timestamp": 1589384797
    },
    {
        "content": "<p>Hi <span class=\"user-mention\" data-user-id=\"203235\">@Ward Weistra</span>  what is up with <a href=\"http://hl7.fhir.au\">hl7.fhir.au</a> packages?</p>",
        "id": 197629078,
        "sender_full_name": "Brett Esler",
        "timestamp": 1589497199
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191368\">@Brett Esler</span>: <span class=\"user-mention silent\" data-user-id=\"294872\">Martin Zacho Grønhøj</span> <a href=\"#narrow/stream/179167-hapi/topic/Upload.20of.20IG/near/197411637\">saw</a> the following two errors when importing them into HAPI:</p>\n<blockquote>\n<p>The package hl7.fhir.au.rcpa#0.1.0 throws a parsing error:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nx\">ca</span><span class=\"p\">.</span><span class=\"nx\">uhn</span><span class=\"p\">.</span><span class=\"nx\">fhir</span><span class=\"p\">.</span><span class=\"nx\">parser</span><span class=\"p\">.</span><span class=\"nx\">DataFormatException</span><span class=\"o\">:</span> <span class=\"nx\">Unknown</span> <span class=\"nx\">element</span> <span class=\"s1\">&#39;comments&#39;</span> <span class=\"nx\">found</span> <span class=\"nx\">during</span> <span class=\"nx\">parse</span>\n</code></pre></div>\n\n\n<p>Don't know if its an error in the parser or the package data (probably the former).</p>\n</blockquote>\n<p>Simplifier also has trouble parsing the package (<a href=\"https://simplifier.net/packages/hl7.fhir.au.rcpa/0.1.0\">no files shown</a>) and looking at what's in the package folder there is no dot between the filename base and extension: eg <code>Bundle-Colorectal-genexample-1-mapjson</code></p>\n<blockquote>\n<p>The package hl7.fhir.au.pd#2.0.1 has a SearchParameter, which causes the following error:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nx\">Caused</span> <span class=\"nx\">by</span><span class=\"o\">:</span> <span class=\"nx\">ca</span><span class=\"p\">.</span><span class=\"nx\">uhn</span><span class=\"p\">.</span><span class=\"nx\">fhir</span><span class=\"p\">.</span><span class=\"nx\">rest</span><span class=\"p\">.</span><span class=\"nx\">server</span><span class=\"p\">.</span><span class=\"nx\">exceptions</span><span class=\"p\">.</span><span class=\"nx\">UnprocessableEntityException</span><span class=\"o\">:</span> <span class=\"nx\">Invalid</span> <span class=\"nx\">SearchParameter</span><span class=\"p\">.</span><span class=\"nx\">expression</span> <span class=\"nx\">value</span> <span class=\"s2\">&quot;extension(‘http://hl7.org.au/fhir/StructureDefinition/au-receivingfacility’).extension(‘namespace-id’).value&quot;</span><span class=\"o\">:</span> <span class=\"nb\">Error</span> <span class=\"k\">in</span> <span class=\"o\">??</span> <span class=\"nx\">at</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"o\">:</span> <span class=\"nx\">Found</span> <span class=\"err\">‘</span> <span class=\"nx\">expecting</span> <span class=\"nx\">a</span> <span class=\"nx\">token</span> <span class=\"nx\">name</span>\n    <span class=\"nx\">at</span> <span class=\"nx\">ca</span><span class=\"p\">.</span><span class=\"nx\">uhn</span><span class=\"p\">.</span><span class=\"nx\">fhir</span><span class=\"p\">.</span><span class=\"nx\">jpa</span><span class=\"p\">.</span><span class=\"nx\">dao</span><span class=\"p\">.</span><span class=\"nx\">r4</span><span class=\"p\">.</span><span class=\"nx\">FhirResourceDaoSearchParameterR4</span><span class=\"p\">.</span><span class=\"nx\">validateSearchParam</span><span class=\"p\">(</span><span class=\"nx\">FhirResourceDaoSearchParameterR4</span><span class=\"p\">.</span><span class=\"nx\">java</span><span class=\"o\">:</span><span class=\"mi\">147</span><span class=\"p\">)</span>\n    <span class=\"nx\">at</span> <span class=\"nx\">ca</span><span class=\"p\">.</span><span class=\"nx\">uhn</span><span class=\"p\">.</span><span class=\"nx\">fhir</span><span class=\"p\">.</span><span class=\"nx\">jpa</span><span class=\"p\">.</span><span class=\"nx\">dao</span><span class=\"p\">.</span><span class=\"nx\">r4</span><span class=\"p\">.</span><span class=\"nx\">FhirResourceDaoSearchParameterR4</span><span class=\"p\">.</span><span class=\"nx\">validateResourceForStorage</span><span class=\"p\">(</span><span class=\"nx\">FhirResourceDaoSearchParameterR4</span><span class=\"p\">.</span><span class=\"nx\">java</span><span class=\"o\">:</span><span class=\"mi\">88</span><span class=\"p\">)</span>\n    <span class=\"nx\">at</span> <span class=\"nx\">ca</span><span class=\"p\">.</span><span class=\"nx\">uhn</span><span class=\"p\">.</span><span class=\"nx\">fhir</span><span class=\"p\">.</span><span class=\"nx\">jpa</span><span class=\"p\">.</span><span class=\"nx\">dao</span><span class=\"p\">.</span><span class=\"nx\">r4</span><span class=\"p\">.</span><span class=\"nx\">FhirResourceDaoSearchParameterR4</span><span class=\"p\">.</span><span class=\"nx\">validateResourceForStorage</span><span class=\"p\">(</span><span class=\"nx\">FhirResourceDaoSearchParameterR4</span><span class=\"p\">.</span><span class=\"nx\">java</span><span class=\"o\">:</span><span class=\"mi\">47</span><span class=\"p\">)</span>\n    <span class=\"nx\">at</span> <span class=\"nx\">ca</span><span class=\"p\">.</span><span class=\"nx\">uhn</span><span class=\"p\">.</span><span class=\"nx\">fhir</span><span class=\"p\">.</span><span class=\"nx\">jpa</span><span class=\"p\">.</span><span class=\"nx\">dao</span><span class=\"p\">.</span><span class=\"nx\">BaseHapiFhirDao</span><span class=\"p\">.</span><span class=\"nx\">updateEntity</span><span class=\"p\">(</span><span class=\"nx\">BaseHapiFhirDao</span><span class=\"p\">.</span><span class=\"nx\">java</span><span class=\"o\">:</span><span class=\"mi\">997</span><span class=\"p\">)</span>\n    <span class=\"nx\">at</span> <span class=\"nx\">ca</span><span class=\"p\">.</span><span class=\"nx\">uhn</span><span class=\"p\">.</span><span class=\"nx\">fhir</span><span class=\"p\">.</span><span class=\"nx\">jpa</span><span class=\"p\">.</span><span class=\"nx\">dao</span><span class=\"p\">.</span><span class=\"nx\">BaseHapiFhirResourceDao</span><span class=\"p\">.</span><span class=\"nx\">doCreate</span><span class=\"p\">(</span><span class=\"nx\">BaseHapiFhirResourceDao</span><span class=\"p\">.</span><span class=\"nx\">java</span><span class=\"o\">:</span><span class=\"mi\">515</span><span class=\"p\">)</span>\n    <span class=\"nx\">at</span> <span class=\"nx\">ca</span><span class=\"p\">.</span><span class=\"nx\">uhn</span><span class=\"p\">.</span><span class=\"nx\">fhir</span><span class=\"p\">.</span><span class=\"nx\">jpa</span><span class=\"p\">.</span><span class=\"nx\">dao</span><span class=\"p\">.</span><span class=\"nx\">BaseHapiFhirResourceDao</span><span class=\"p\">.</span><span class=\"nx\">create</span><span class=\"p\">(</span><span class=\"nx\">BaseHapiFhirResourceDao</span><span class=\"p\">.</span><span class=\"nx\">java</span><span class=\"o\">:</span><span class=\"mi\">221</span><span class=\"p\">)</span>\n    <span class=\"nx\">at</span> <span class=\"nx\">ca</span><span class=\"p\">.</span><span class=\"nx\">uhn</span><span class=\"p\">.</span><span class=\"nx\">fhir</span><span class=\"p\">.</span><span class=\"nx\">jpa</span><span class=\"p\">.</span><span class=\"nx\">dao</span><span class=\"p\">.</span><span class=\"nx\">BaseHapiFhirResourceDao</span><span class=\"p\">.</span><span class=\"nx\">create</span><span class=\"p\">(</span><span class=\"nx\">BaseHapiFhirResourceDao</span><span class=\"p\">.</span><span class=\"nx\">java</span><span class=\"o\">:</span><span class=\"mi\">185</span><span class=\"p\">)</span>\n</code></pre></div>\n\n\n<p>To me this looks like 1) an error in the package or 2) some kind of character encoding error in the json parser, used to parse the contents of the package, or in the dao, but I'm not sure, haven't looked into it.</p>\n</blockquote>\n<p>It seems to complain about the curly quotes (<code>‘</code> and <code>’</code>) being used in the expression of the three SearchParameters in there.</p>\n<p>Keep in mind that published packages can't be changed, so if you want to bring out fixed versions of these you will have to publish new versions (higher version number) for them to be picked up from the feed. And then the older versions of the package can be unlisted (not sure if there's a way to indicate that in the feed yet).</p>",
        "id": 197682897,
        "sender_full_name": "Ward Weistra",
        "timestamp": 1589545688
    },
    {
        "content": "<p>PR is now available on HAPI 5.1.0: <a href=\"https://github.com/hapifhir/hapi-fhir-jpaserver-starter/pull/126\">https://github.com/hapifhir/hapi-fhir-jpaserver-starter/pull/126</a></p>",
        "id": 207184668,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1597691291
    }
]