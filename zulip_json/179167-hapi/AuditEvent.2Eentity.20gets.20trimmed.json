[
    {
        "content": "<p>Trying to create an AuditEvent with more than one element in the <code>entity</code> array, this array seems to get trimmed to 1 element in the created resource --without any errors.</p>\n<p>Here is an example to re-recreate this on the public test server:<br>\nrequest body:</p>\n<div class=\"codehilite\"><pre><span></span><code>{\n  &quot;resourceType&quot;: &quot;AuditEvent&quot;,\n  &quot;type&quot;: {\n    &quot;system&quot;: &quot;http://hl7.org/fhir/ValueSet/audit-event-type&quot;,\n    &quot;code&quot;: &quot;110112&quot;,\n    &quot;display&quot;: &quot;Query&quot;\n  },\n  &quot;action&quot;: &quot;E&quot;,\n  &quot;outcome&quot;: &quot;0&quot;,\n  &quot;outcomeDesc&quot;: &quot;CONSENT_PERMIT&quot;,\n  &quot;agent&quot;: [\n    {\n      &quot;who&quot;: {\n        &quot;identifier&quot;: {\n          &quot;system&quot;: &quot;urn:ietf:rfc:3986&quot;,\n          &quot;value&quot;: &quot;urn:oid:1.1&quot;\n        }\n      }\n    }\n  ],\n  &quot;source&quot;: {\n    &quot;observer&quot;: {\n      &quot;display&quot;: &quot;LEAP Consent Decision Service&quot;\n    },\n    &quot;type&quot;: [\n      {\n        &quot;system&quot;: &quot;http://terminology.hl7.org/CodeSystem/security-source-type&quot;,\n        &quot;code&quot;: &quot;4&quot;,\n        &quot;display&quot;: &quot;Application Server&quot;\n      }\n    ]\n  },\n  &quot;entity&quot;: [\n    {\n      &quot;what&quot;: {\n        &quot;reference&quot;: &quot;Consent/2045174&quot;,\n        &quot;type&quot;: {\n          &quot;system&quot;: &quot;http://hl7.org/fhir/resource-types&quot;,\n          &quot;code&quot;: &quot;Consent&quot;\n        }\n      }\n    },\n    {\n      &quot;what&quot;: {\n        &quot;reference&quot;: {\n          &quot;reference&quot;: &quot;Patient/1731610&quot;,\n          &quot;display&quot;: &quot;Younger,Gallow&quot;\n        },\n        &quot;type&quot;: {\n          &quot;system&quot;: &quot;http://terminology.hl7.org/CodeSystem/audit-entity-type&quot;,\n          &quot;code&quot;: &quot;1&quot;,\n          &quot;display&quot;: &quot;Person&quot;\n        }\n      }\n    }\n  ]\n}\n</code></pre></div>\n<p>Response: <code>201 created</code><br>\nResponse body:</p>\n<div class=\"codehilite\"><pre><span></span><code>{\n  &quot;resourceType&quot;: &quot;AuditEvent&quot;,\n  &quot;id&quot;: &quot;2082005&quot;,\n  &quot;meta&quot;: {\n    &quot;versionId&quot;: &quot;1&quot;,\n    &quot;lastUpdated&quot;: &quot;2021-05-06T04:43:15.586+00:00&quot;\n  },\n  &quot;type&quot;: {\n    &quot;system&quot;: &quot;http://hl7.org/fhir/ValueSet/audit-event-type&quot;,\n    &quot;code&quot;: &quot;110112&quot;,\n    &quot;display&quot;: &quot;Query&quot;\n  },\n  &quot;action&quot;: &quot;E&quot;,\n  &quot;outcome&quot;: &quot;0&quot;,\n  &quot;outcomeDesc&quot;: &quot;CONSENT_PERMIT&quot;,\n  &quot;agent&quot;: [ {\n    &quot;who&quot;: {\n      &quot;identifier&quot;: {\n        &quot;system&quot;: &quot;urn:ietf:rfc:3986&quot;,\n        &quot;value&quot;: &quot;urn:oid:1.1&quot;\n      }\n    }\n  } ],\n  &quot;source&quot;: {\n    &quot;observer&quot;: {\n      &quot;display&quot;: &quot;LEAP Consent Decision Service&quot;\n    },\n    &quot;type&quot;: [ {\n      &quot;system&quot;: &quot;http://terminology.hl7.org/CodeSystem/security-source-type&quot;,\n      &quot;code&quot;: &quot;4&quot;,\n      &quot;display&quot;: &quot;Application Server&quot;\n    } ]\n  },\n  &quot;entity&quot;: [ {\n    &quot;what&quot;: {\n      &quot;reference&quot;: &quot;Consent/2045174&quot;\n    }\n  } ]\n}\n</code></pre></div>",
        "id": 237605433,
        "sender_full_name": "Mohammad Jafari",
        "timestamp": 1620276804
    },
    {
        "content": "<p>so this is a problem with the server you are using? Or do you think it is hapi api toolkit? Have you tried using a different kind of server? like Grahame's?</p>",
        "id": 237652596,
        "sender_full_name": "John Moehrke",
        "timestamp": 1620305674
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"407607\">@Daryl Moehrke</span> can your test app reproduce this?</p>",
        "id": 237652643,
        "sender_full_name": "John Moehrke",
        "timestamp": 1620305707
    },
    {
        "content": "<p>Grahame's server seems to be down. I'm suspecting that this is a HAPI bug <span class=\"user-mention\" data-user-id=\"191319\">@James Agnew</span>.</p>",
        "id": 237688459,
        "sender_full_name": "Mohammad Jafari",
        "timestamp": 1620318435
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191920\">@Mohammad Jafari</span> which Grahame server did you try? <span class=\"user-mention\" data-user-id=\"248736\">@Mark Iantorno</span> might be able to reset it</p>",
        "id": 237693084,
        "sender_full_name": "John Moehrke",
        "timestamp": 1620320315
    },
    {
        "content": "<p>Grahame has many servers</p>",
        "id": 237693365,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1620320420
    },
    {
        "content": "<p>What is the address</p>",
        "id": 237693381,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1620320425
    },
    {
        "content": "<p>or name</p>",
        "id": 237693423,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1620320436
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191920\">@Mohammad Jafari</span></p>",
        "id": 237693572,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1620320477
    },
    {
        "content": "<p>I usually go to <a href=\"https://test.fhir.org/r4\">https://test.fhir.org/r4</a></p>",
        "id": 237694844,
        "sender_full_name": "Mohammad Jafari",
        "timestamp": 1620320954
    },
    {
        "content": "<p>seems still dead. <span class=\"user-mention\" data-user-id=\"248736\">@Mark Iantorno</span> can you reset this server?</p>",
        "id": 237699359,
        "sender_full_name": "John Moehrke",
        "timestamp": 1620322822
    },
    {
        "content": "<p>That resource produces quite a few validation errors. That may well be related:</p>\n<div class=\"codehilite\" data-code-language=\"JSON\"><pre><span></span><code><span class=\"p\">{</span>\n  <span class=\"nt\">\"resourceType\"</span><span class=\"p\">:</span> <span class=\"s2\">\"OperationOutcome\"</span><span class=\"p\">,</span>\n  <span class=\"nt\">\"text\"</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n    <span class=\"nt\">\"status\"</span><span class=\"p\">:</span> <span class=\"s2\">\"generated\"</span><span class=\"p\">,</span>\n    <span class=\"nt\">\"div\"</span><span class=\"p\">:</span> <span class=\"s2\">\"&lt;div xmlns=\\\"http://www.w3.org/1999/xhtml\\\"&gt;&lt;h1&gt;Operation Outcome&lt;/h1&gt;&lt;table border=\\\"0\\\"&gt;&lt;tr&gt;&lt;td style=\\\"font-weight: bold;\\\"&gt;ERROR&lt;/td&gt;&lt;td&gt;[AuditEvent.entity[0].what.type, Line 38, Col 58]&lt;/td&gt;&lt;td&gt;&lt;pre&gt;This property must be an simple value, not an object (type at AuditEvent.entity[0].what.type)&lt;/pre&gt;&lt;/td&gt;\\n\\t\\t\\t&lt;/tr&gt;\\n\\t\\t\\t&lt;tr&gt;\\n\\t\\t\\t\\t&lt;td style=\\\"font-weight: bold;\\\"&gt;ERROR&lt;/td&gt;\\n\\t\\t\\t\\t&lt;td&gt;[AuditEvent.entity[1].what.reference, Line 46, Col 42]&lt;/td&gt;\\n\\t\\t\\t\\t&lt;td&gt;&lt;pre&gt;This property must be an simple value, not an object (reference at AuditEvent.entity[1].what.reference)&lt;/pre&gt;&lt;/td&gt;\\n\\t\\t\\t&lt;/tr&gt;\\n\\t\\t\\t&lt;tr&gt;\\n\\t\\t\\t\\t&lt;td style=\\\"font-weight: bold;\\\"&gt;ERROR&lt;/td&gt;\\n\\t\\t\\t\\t&lt;td&gt;[AuditEvent.entity[1].what.type, Line 50, Col 79]&lt;/td&gt;\\n\\t\\t\\t\\t&lt;td&gt;&lt;pre&gt;This property must be an simple value, not an object (type at AuditEvent.entity[1].what.type)&lt;/pre&gt;&lt;/td&gt;\\n\\t\\t\\t&lt;/tr&gt;\\n\\t\\t\\t&lt;tr&gt;\\n\\t\\t\\t\\t&lt;td style=\\\"font-weight: bold;\\\"&gt;WARNING&lt;/td&gt;\\n\\t\\t\\t\\t&lt;td&gt;[AuditEvent, Line 1, Col 2]&lt;/td&gt;\\n\\t\\t\\t\\t&lt;td&gt;&lt;pre&gt;dom-6: 'A resource should have narrative for robust management' failed&lt;/pre&gt;&lt;/td&gt;\\n\\t\\t\\t&lt;/tr&gt;\\n\\t\\t\\t&lt;tr&gt;\\n\\t\\t\\t\\t&lt;td style=\\\"font-weight: bold;\\\"&gt;ERROR&lt;/td&gt;\\n\\t\\t\\t\\t&lt;td&gt;[AuditEvent, Line 1, Col 2]&lt;/td&gt;\\n\\t\\t\\t\\t&lt;td&gt;&lt;pre&gt;AuditEvent.recorded: minimum required = 1, but only found 0 (from http://hl7.org/fhir/StructureDefinition/AuditEvent)&lt;/pre&gt;&lt;/td&gt;\\n\\t\\t\\t&lt;/tr&gt;\\n\\t\\t\\t&lt;tr&gt;\\n\\t\\t\\t\\t&lt;td style=\\\"font-weight: bold;\\\"&gt;ERROR&lt;/td&gt;\\n\\t\\t\\t\\t&lt;td&gt;[AuditEvent.type, Line 4, Col 63]&lt;/td&gt;\\n\\t\\t\\t\\t&lt;td&gt;&lt;pre&gt;The Coding references a value set, not a code system ('http://hl7.org/fhir/ValueSet/audit-event-type')&lt;/pre&gt;&lt;/td&gt;\\n\\t\\t\\t&lt;/tr&gt;\\n\\t\\t\\t&lt;tr&gt;\\n\\t\\t\\t\\t&lt;td style=\\\"font-weight: bold;\\\"&gt;ERROR&lt;/td&gt;\\n\\t\\t\\t\\t&lt;td&gt;[AuditEvent.type, Line 4, Col 63]&lt;/td&gt;\\n\\t\\t\\t\\t&lt;td&gt;&lt;pre&gt;Unknown Code System 'http://hl7.org/fhir/ValueSet/audit-event-type'&lt;/pre&gt;&lt;/td&gt;\\n\\t\\t\\t&lt;/tr&gt;\\n\\t\\t\\t&lt;tr&gt;\\n\\t\\t\\t\\t&lt;td style=\\\"font-weight: bold;\\\"&gt;ERROR&lt;/td&gt;\\n\\t\\t\\t\\t&lt;td&gt;[AuditEvent.agent[0], Line 12, Col 6]&lt;/td&gt;\\n\\t\\t\\t\\t&lt;td&gt;&lt;pre&gt;AuditEvent.agent.requestor: minimum required = 1, but only found 0 (from http://hl7.org/fhir/StructureDefinition/AuditEvent)&lt;/pre&gt;&lt;/td&gt;\\n\\t\\t\\t&lt;/tr&gt;\\n\\t\\t\\t&lt;tr&gt;\\n\\t\\t\\t\\t&lt;td style=\\\"font-weight: bold;\\\"&gt;WARNING&lt;/td&gt;\\n\\t\\t\\t\\t&lt;td&gt;[AuditEvent.entity[1].what, Line 49, Col 18]&lt;/td&gt;\\n\\t\\t\\t\\t&lt;td&gt;&lt;pre&gt;A Reference without an actual reference or identifier should have a display&lt;/pre&gt;&lt;/td&gt;\\n\\t\\t\\t&lt;/tr&gt;\\n\\t\\t&lt;/table&gt;\\n\\t&lt;/div&gt;\"</span>\n  <span class=\"p\">},</span>\n  <span class=\"nt\">\"issue\"</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n    <span class=\"p\">{</span>\n      <span class=\"nt\">\"severity\"</span><span class=\"p\">:</span> <span class=\"s2\">\"error\"</span><span class=\"p\">,</span>\n      <span class=\"nt\">\"code\"</span><span class=\"p\">:</span> <span class=\"s2\">\"processing\"</span><span class=\"p\">,</span>\n      <span class=\"nt\">\"diagnostics\"</span><span class=\"p\">:</span> <span class=\"s2\">\"This property must be an simple value, not an object (type at AuditEvent.entity[0].what.type)\"</span><span class=\"p\">,</span>\n      <span class=\"nt\">\"location\"</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n        <span class=\"s2\">\"AuditEvent.entity[0].what.type\"</span><span class=\"p\">,</span>\n        <span class=\"s2\">\"Line 38, Col 58\"</span>\n      <span class=\"p\">]</span>\n    <span class=\"p\">},</span>\n    <span class=\"p\">{</span>\n      <span class=\"nt\">\"severity\"</span><span class=\"p\">:</span> <span class=\"s2\">\"error\"</span><span class=\"p\">,</span>\n      <span class=\"nt\">\"code\"</span><span class=\"p\">:</span> <span class=\"s2\">\"processing\"</span><span class=\"p\">,</span>\n      <span class=\"nt\">\"diagnostics\"</span><span class=\"p\">:</span> <span class=\"s2\">\"This property must be an simple value, not an object (reference at AuditEvent.entity[1].what.reference)\"</span><span class=\"p\">,</span>\n      <span class=\"nt\">\"location\"</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n        <span class=\"s2\">\"AuditEvent.entity[1].what.reference\"</span><span class=\"p\">,</span>\n        <span class=\"s2\">\"Line 46, Col 42\"</span>\n      <span class=\"p\">]</span>\n    <span class=\"p\">},</span>\n    <span class=\"p\">{</span>\n      <span class=\"nt\">\"severity\"</span><span class=\"p\">:</span> <span class=\"s2\">\"error\"</span><span class=\"p\">,</span>\n      <span class=\"nt\">\"code\"</span><span class=\"p\">:</span> <span class=\"s2\">\"processing\"</span><span class=\"p\">,</span>\n      <span class=\"nt\">\"diagnostics\"</span><span class=\"p\">:</span> <span class=\"s2\">\"This property must be an simple value, not an object (type at AuditEvent.entity[1].what.type)\"</span><span class=\"p\">,</span>\n      <span class=\"nt\">\"location\"</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n        <span class=\"s2\">\"AuditEvent.entity[1].what.type\"</span><span class=\"p\">,</span>\n        <span class=\"s2\">\"Line 50, Col 79\"</span>\n      <span class=\"p\">]</span>\n    <span class=\"p\">},</span>\n    <span class=\"p\">{</span>\n      <span class=\"nt\">\"severity\"</span><span class=\"p\">:</span> <span class=\"s2\">\"warning\"</span><span class=\"p\">,</span>\n      <span class=\"nt\">\"code\"</span><span class=\"p\">:</span> <span class=\"s2\">\"processing\"</span><span class=\"p\">,</span>\n      <span class=\"nt\">\"diagnostics\"</span><span class=\"p\">:</span> <span class=\"s2\">\"dom-6: 'A resource should have narrative for robust management' failed\"</span><span class=\"p\">,</span>\n      <span class=\"nt\">\"location\"</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n        <span class=\"s2\">\"AuditEvent\"</span><span class=\"p\">,</span>\n        <span class=\"s2\">\"Line 1, Col 2\"</span>\n      <span class=\"p\">]</span>\n    <span class=\"p\">},</span>\n    <span class=\"p\">{</span>\n      <span class=\"nt\">\"severity\"</span><span class=\"p\">:</span> <span class=\"s2\">\"error\"</span><span class=\"p\">,</span>\n      <span class=\"nt\">\"code\"</span><span class=\"p\">:</span> <span class=\"s2\">\"processing\"</span><span class=\"p\">,</span>\n      <span class=\"nt\">\"diagnostics\"</span><span class=\"p\">:</span> <span class=\"s2\">\"AuditEvent.recorded: minimum required = 1, but only found 0 (from http://hl7.org/fhir/StructureDefinition/AuditEvent)\"</span><span class=\"p\">,</span>\n      <span class=\"nt\">\"location\"</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n        <span class=\"s2\">\"AuditEvent\"</span><span class=\"p\">,</span>\n        <span class=\"s2\">\"Line 1, Col 2\"</span>\n      <span class=\"p\">]</span>\n    <span class=\"p\">},</span>\n    <span class=\"p\">{</span>\n      <span class=\"nt\">\"severity\"</span><span class=\"p\">:</span> <span class=\"s2\">\"error\"</span><span class=\"p\">,</span>\n      <span class=\"nt\">\"code\"</span><span class=\"p\">:</span> <span class=\"s2\">\"processing\"</span><span class=\"p\">,</span>\n      <span class=\"nt\">\"diagnostics\"</span><span class=\"p\">:</span> <span class=\"s2\">\"The Coding references a value set, not a code system ('http://hl7.org/fhir/ValueSet/audit-event-type')\"</span><span class=\"p\">,</span>\n      <span class=\"nt\">\"location\"</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n        <span class=\"s2\">\"AuditEvent.type\"</span><span class=\"p\">,</span>\n        <span class=\"s2\">\"Line 4, Col 63\"</span>\n      <span class=\"p\">]</span>\n    <span class=\"p\">},</span>\n    <span class=\"p\">{</span>\n      <span class=\"nt\">\"severity\"</span><span class=\"p\">:</span> <span class=\"s2\">\"error\"</span><span class=\"p\">,</span>\n      <span class=\"nt\">\"code\"</span><span class=\"p\">:</span> <span class=\"s2\">\"processing\"</span><span class=\"p\">,</span>\n      <span class=\"nt\">\"diagnostics\"</span><span class=\"p\">:</span> <span class=\"s2\">\"Unknown Code System 'http://hl7.org/fhir/ValueSet/audit-event-type'\"</span><span class=\"p\">,</span>\n      <span class=\"nt\">\"location\"</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n        <span class=\"s2\">\"AuditEvent.type\"</span><span class=\"p\">,</span>\n        <span class=\"s2\">\"Line 4, Col 63\"</span>\n      <span class=\"p\">]</span>\n    <span class=\"p\">},</span>\n    <span class=\"p\">{</span>\n      <span class=\"nt\">\"severity\"</span><span class=\"p\">:</span> <span class=\"s2\">\"error\"</span><span class=\"p\">,</span>\n      <span class=\"nt\">\"code\"</span><span class=\"p\">:</span> <span class=\"s2\">\"processing\"</span><span class=\"p\">,</span>\n      <span class=\"nt\">\"diagnostics\"</span><span class=\"p\">:</span> <span class=\"s2\">\"AuditEvent.agent.requestor: minimum required = 1, but only found 0 (from http://hl7.org/fhir/StructureDefinition/AuditEvent)\"</span><span class=\"p\">,</span>\n      <span class=\"nt\">\"location\"</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n        <span class=\"s2\">\"AuditEvent.agent[0]\"</span><span class=\"p\">,</span>\n        <span class=\"s2\">\"Line 12, Col 6\"</span>\n      <span class=\"p\">]</span>\n    <span class=\"p\">},</span>\n    <span class=\"p\">{</span>\n      <span class=\"nt\">\"severity\"</span><span class=\"p\">:</span> <span class=\"s2\">\"warning\"</span><span class=\"p\">,</span>\n      <span class=\"nt\">\"code\"</span><span class=\"p\">:</span> <span class=\"s2\">\"processing\"</span><span class=\"p\">,</span>\n      <span class=\"nt\">\"diagnostics\"</span><span class=\"p\">:</span> <span class=\"s2\">\"A Reference without an actual reference or identifier should have a display\"</span><span class=\"p\">,</span>\n      <span class=\"nt\">\"location\"</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n        <span class=\"s2\">\"AuditEvent.entity[1].what\"</span><span class=\"p\">,</span>\n        <span class=\"s2\">\"Line 49, Col 18\"</span>\n      <span class=\"p\">]</span>\n    <span class=\"p\">}</span>\n  <span class=\"p\">]</span>\n<span class=\"p\">}</span>\n</code></pre></div>",
        "id": 237706536,
        "sender_full_name": "James Agnew",
        "timestamp": 1620325679
    },
    {
        "content": "<p>I think this set of .entity are indeed wrongly assembled</p>",
        "id": 237714370,
        "sender_full_name": "John Moehrke",
        "timestamp": 1620328750
    },
    {
        "content": "<p>\"entity\": [<br>\n    {<br>\n      \"what\": {<br>\n        \"reference\": \"Consent/2045174\",<br>\n        \"type\": {<br>\n          \"system\": \"<a href=\"http://hl7.org/fhir/resource-types\">http://hl7.org/fhir/resource-types</a>\",<br>\n          \"code\": \"Consent\"<br>\n        }<br>\n      }<br>\n    },<br>\n    {<br>\n      \"what\": {<br>\n        \"reference\": {<br>\n          \"reference\": \"Patient/1731610\",<br>\n          \"display\": \"Younger,Gallow\"<br>\n        },<br>\n        \"type\": {<br>\n          \"system\": \"<a href=\"http://terminology.hl7.org/CodeSystem/audit-entity-type\">http://terminology.hl7.org/CodeSystem/audit-entity-type</a>\",<br>\n          \"code\": \"1\",<br>\n          \"display\": \"Person\"<br>\n        }<br>\n      }</p>",
        "id": 237714425,
        "sender_full_name": "John Moehrke",
        "timestamp": 1620328780
    },
    {
        "content": "<p>the 'what' references should not need to have a reference.type. I think the type is intended to be the entity[0].type</p>",
        "id": 237714646,
        "sender_full_name": "John Moehrke",
        "timestamp": 1620328863
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191920\">@Mohammad Jafari</span> are you just wanting to say that the consent resource and the patient were involved?</p>",
        "id": 237714864,
        "sender_full_name": "John Moehrke",
        "timestamp": 1620328955
    },
    {
        "content": "<p>see my IG on this topic <a href=\"http://build.fhir.org/ig/JohnMoehrke/BasicAudit/branches/main/index.html\">http://build.fhir.org/ig/JohnMoehrke/BasicAudit/branches/main/index.html</a></p>",
        "id": 237714995,
        "sender_full_name": "John Moehrke",
        "timestamp": 1620329022
    },
    {
        "content": "<p>I realize you are doing an audit of an access control \"decision\", but the entity section should look similar to my examples</p>",
        "id": 237715195,
        "sender_full_name": "John Moehrke",
        "timestamp": 1620329121
    },
    {
        "content": "<p>see this one for a simple RESTful Create <a href=\"http://build.fhir.org/ig/JohnMoehrke/BasicAudit/branches/main/AuditEvent-ex-auditBasicCreate1.json.html\">http://build.fhir.org/ig/JohnMoehrke/BasicAudit/branches/main/AuditEvent-ex-auditBasicCreate1.json.html</a></p>",
        "id": 237715380,
        "sender_full_name": "John Moehrke",
        "timestamp": 1620329195
    },
    {
        "content": "<p>change your entity section like this<br>\n  \"entity\" : [<br>\n    {<br>\n      \"what\" : {<br>\n        \"reference\" : \"Patient/1731610\"<br>\n      },<br>\n      \"type\" : {<br>\n        \"system\" : \"<a href=\"http://terminology.hl7.org/CodeSystem/audit-entity-type\">http://terminology.hl7.org/CodeSystem/audit-entity-type</a>\",<br>\n        \"code\" : \"1\",<br>\n        \"display\" : \"Person\"<br>\n      },<br>\n      \"role\" : {<br>\n        \"system\" : \"<a href=\"http://terminology.hl7.org/CodeSystem/object-role\">http://terminology.hl7.org/CodeSystem/object-role</a>\",<br>\n        \"code\" : \"1\",<br>\n        \"display\" : \"Patient\"<br>\n      }<br>\n    },<br>\n    {<br>\n      \"what\" : {<br>\n        \"reference\" : \"Consent/2045174\"<br>\n      },<br>\n      \"type\" : {<br>\n        \"system\" : \"<a href=\"http://terminology.hl7.org/CodeSystem/audit-entity-type\">http://terminology.hl7.org/CodeSystem/audit-entity-type</a>\",<br>\n        \"code\" : \"2\",<br>\n        \"display\" : \"System Object\"<br>\n      },<br>\n      \"role\" : {<br>\n        \"system\" : \"<a href=\"http://terminology.hl7.org/CodeSystem/object-role\">http://terminology.hl7.org/CodeSystem/object-role</a>\",<br>\n        \"code\" : \"4\",<br>\n        \"display\" : \"Domain Resource\"<br>\n      }<br>\n    }<br>\n  ]</p>",
        "id": 237715629,
        "sender_full_name": "John Moehrke",
        "timestamp": 1620329318
    },
    {
        "content": "<p>i have not thought of what the entity.type or entity.role values would be for the consent... let me think...</p>",
        "id": 237715682,
        "sender_full_name": "John Moehrke",
        "timestamp": 1620329348
    },
    {
        "content": "<p>I guess type might be okay to be Consent... it is that kind of an object...</p>",
        "id": 237715918,
        "sender_full_name": "John Moehrke",
        "timestamp": 1620329457
    },
    {
        "content": "<p>role seems best to be a \"13\" Security Resource</p>",
        "id": 237715960,
        "sender_full_name": "John Moehrke",
        "timestamp": 1620329479
    },
    {
        "content": "<p>Thanks <span class=\"user-mention\" data-user-id=\"191319\">@James Agnew</span> . The server accepted the resource with no errors, so that's why I didn't think to check the validity.</p>",
        "id": 237717736,
        "sender_full_name": "Mohammad Jafari",
        "timestamp": 1620330261
    },
    {
        "content": "<p>Thanks <span class=\"user-mention\" data-user-id=\"191404\">@John Moehrke</span> for pointing out the IG. I made adjustments to comply with this IG.</p>",
        "id": 237722970,
        "sender_full_name": "Mohammad Jafari",
        "timestamp": 1620332794
    },
    {
        "content": "<p>well... it is not a formal IG... yet.... but It does all validate and It is my thinking of how this  would work.</p>",
        "id": 237723073,
        "sender_full_name": "John Moehrke",
        "timestamp": 1620332853
    }
]