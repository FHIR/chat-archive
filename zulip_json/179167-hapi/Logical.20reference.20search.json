[
    {
        "content": "<p>Hi everyone, </p>\n<p>I am trying to execute a logical reference search on the Device resource for the field Device.patient. This is the request: </p>\n<p><code>GET [base]/Device?patient:identifier=http://test.com/NamingSystem/patient-identifier|123456 </code></p>\n<p>Search results are always 0. Is there an error in my search and is HAPI supporting search for logical references?</p>",
        "id": 194896942,
        "sender_full_name": "Reto Wettstein",
        "timestamp": 1587541117
    },
    {
        "content": "<p>This style of search is not yet supported in HAPI FHIR - Hopefully coming soon.</p>",
        "id": 194918343,
        "sender_full_name": "James Agnew",
        "timestamp": 1587556132
    },
    {
        "content": "<p>enabling this would also mean 'include' would work with logical references, right?</p>",
        "id": 194918635,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1587556323
    },
    {
        "content": "<p>I wouldn't expect that to be the case by default- That would involve adding a resolve step that looked for other resources with the same identifier, either at write time or at search time, both of which would add nontrivial overhead. It could be made to work though...</p>\n<p>Technically you can kind of do this already by using HAPI's nonstandard \"embedded lookup criteria\". I.e. you can write your device with:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"p\">{</span>\n   <span class=\"nt\">&quot;subject&quot;</span><span class=\"p\">:</span> <span class=\"p\">{</span> <span class=\"nt\">&quot;reference&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;Patient?identifier=http://foo|bar&quot;</span> <span class=\"p\">}</span>\n<span class=\"p\">}</span>\n</pre></div>\n\n\n<p>..and HAPI will resolve that before writing the resource, but this is not FHIR standard behaviour and is disabled by default.</p>",
        "id": 194923459,
        "sender_full_name": "James Agnew",
        "timestamp": 1587559237
    },
    {
        "content": "<blockquote>\n<p>Technically you can kind of do this already by using HAPI's nonstandard \"embedded lookup criteria\". </p>\n</blockquote>\n<p>nice!</p>",
        "id": 194923988,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1587559516
    },
    {
        "content": "<p>Wouldn't that be simple parameter chaining, GET [base]/Device?patient.identifier=http://test.com/NamingSystem/patient-identifier|123456 (note the \".\"-character instead of the : before identifier). This style of searching (generally speaking) is supported by HAPI.</p>",
        "id": 195326108,
        "sender_full_name": "Ren√© Spronk",
        "timestamp": 1587893089
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191451\">Patrick Werner</span> <a href=\"#narrow/stream/179167-hapi/topic/Logical.20reference.20search/near/194918635\" title=\"#narrow/stream/179167-hapi/topic/Logical.20reference.20search/near/194918635\">said</a>:</p>\n<blockquote>\n<p>enabling this would also mean 'include' would work with logical references, right?</p>\n</blockquote>\n<p>Spec says:</p>\n<blockquote>\n<p>Chaining is not supported when using the :identifier modifier, nor are chaining, includes or reverse includes supported for reference elements that do not have a reference element.</p>\n</blockquote>\n<p><a href=\"http://hl7.org/fhir/search.html#reference\" title=\"http://hl7.org/fhir/search.html#reference\">http://hl7.org/fhir/search.html#reference</a></p>\n<p>But I was really just here to say that I'd love to see the :identifier-modifier implemented in HAPI <span aria-label=\"smile\" class=\"emoji emoji-263a\" role=\"img\" title=\"smile\">:smile:</span></p>",
        "id": 196309055,
        "sender_full_name": "Simone Heckmann",
        "timestamp": 1588686214
    },
    {
        "content": "<p>ah right the spec <span aria-label=\"sad\" class=\"emoji emoji-2639\" role=\"img\" title=\"sad\">:sad:</span></p>",
        "id": 196311874,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1588687603
    },
    {
        "content": "<p>Would I be right in guessing that <code>:identifier</code> has some use in a German profile? I feel like there are a lot of Germans asking me about this lately... :)</p>",
        "id": 196837202,
        "sender_full_name": "James Agnew",
        "timestamp": 1588889731
    }
]