[
    {
        "content": "<p>I am using HAPI 5.3 and  the subscription resource below never sends the payload, it only sends notification with resource ID </p>\n<div class=\"codehilite\"><pre><span></span><code>{\n  &quot;resourceType&quot;: &quot;Subscription&quot;,\n  &quot;id&quot;: &quot;810395062&quot;,\n  &quot;meta&quot;: {\n    &quot;versionId&quot;: &quot;1&quot;,\n    &quot;lastUpdated&quot;: &quot;2021-05-01T14:03:48.135+00:00&quot;,\n    &quot;source&quot;: &quot;#oRbG9W73IDtbQi7G&quot;,\n    &quot;tag&quot;: [ {\n      &quot;system&quot;: &quot;http://hapifhir.io/fhir/StructureDefinition/subscription-matching-strategy&quot;,\n      &quot;code&quot;: &quot;DATABASE&quot;,\n      &quot;display&quot;: &quot;Database&quot;\n    } ]\n  },\n  &quot;status&quot;: &quot;active&quot;,\n  &quot;reason&quot;: &quot;CareTeam assignment to be handled directly by app&quot;,\n  &quot;criteria&quot;: &quot;CareTeam?identifier:not=MCH@&quot;,\n  &quot;channel&quot;: {\n    &quot;type&quot;: &quot;rest-hook&quot;,\n    &quot;endpoint&quot;: &quot;https://xxxxxx.loca.lt/&quot;,\n    &quot;payload&quot;: &quot;application/fhir+json&quot;,\n    &quot;header&quot;: [ &quot;Authorization: Bearer xxxxxxxxxx&quot; ]\n  }\n}\n</code></pre></div>\n<p>I have tried various combination and various settings in <code>application.yml</code> to absolutely no avail. I even tried the same Subscription on <a href=\"http://hapi.fhir.org/baseR4\">hapi.fhir.org/baseR4</a> but even then I received only notification. </p>\n<p><span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> <span class=\"user-mention\" data-user-id=\"191319\">@James Agnew</span>   Any idea on what can I do to make HAPI send payload along on Subscription notification.</p>",
        "id": 237031175,
        "sender_full_name": "dsh",
        "timestamp": 1619936732
    },
    {
        "content": "<p>this seems like a new feature. I see this been reported by many. But not sure how it will help if it only sends notification with resource ID</p>",
        "id": 237033371,
        "sender_full_name": "Vibin_chander",
        "timestamp": 1619939200
    },
    {
        "content": "<p>Seems like a PR was submitted to fix this issue  <a href=\"https://github.com/hapifhir/hapi-fhir/pull/1357/files\">https://github.com/hapifhir/hapi-fhir/pull/1357/files</a> and it was even merged but later the code was removed <span class=\"user-mention\" data-user-id=\"191319\">@James Agnew</span> please comment on what's the possible path forward</p>",
        "id": 237078711,
        "sender_full_name": "dsh",
        "timestamp": 1619986262
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191505\">@Sean McIlvenna</span> any insights on Subscription payload problem ? ^^</p>",
        "id": 237085484,
        "sender_full_name": "dsh",
        "timestamp": 1619990266
    },
    {
        "content": "<p>That subscription looks right to me. You could try putting a breakpoint in <code>SubscriptionDeliveringRestHookSubscriber</code> to see if you can figure out why it's not doing what you expect</p>",
        "id": 237202370,
        "sender_full_name": "James Agnew",
        "timestamp": 1620064849
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191319\">@James Agnew</span> seems like PR had caused bunch of downstream regressions and was yanked ... it seems from your comment here <a href=\"https://github.com/hapifhir/hapi-fhir/pull/1357#issuecomment-521616804\">https://github.com/hapifhir/hapi-fhir/pull/1357#issuecomment-521616804</a></p>",
        "id": 237203507,
        "sender_full_name": "dsh",
        "timestamp": 1620065246
    },
    {
        "content": "<p>plus I am not a Java guy and won't even know how to run HAPI in debug mode to find problem with <code>SubscriptionDeliveringRestHookSubscriber</code> any instructions ? or can u call some resources to look into this as this is  becoming a show stopper for us and we are implementing a workaround using Mirth --&gt; CDR --&gt; Mirth to relay CDR's response to POST/PUT/DELETE of some resources to --&gt; AWS SNS/SQS --&gt; Our App</p>",
        "id": 237204052,
        "sender_full_name": "dsh",
        "timestamp": 1620065447
    },
    {
        "content": "<p>that does look like quite a painful way to avoid what seems like a  bug in <code>SubscriptionDeliveringRestHookSubscriber</code> <span class=\"user-mention\" data-user-id=\"191319\">@James Agnew</span></p>",
        "id": 237204563,
        "sender_full_name": "dsh",
        "timestamp": 1620065657
    },
    {
        "content": "<p>If you don't have anyone available who can work with the codebase, certainly another option would be to sign up for a support contract and someone from our team could work with your team on troubleshooting.</p>",
        "id": 237210643,
        "sender_full_name": "James Agnew",
        "timestamp": 1620068077
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191319\">@James Agnew</span> my apologies for the confusion I just found the payload was being sent on all POST/PUT  </p>\n<div class=\"codehilite\" data-code-language=\"Ruby\"><pre><span></span><code><span class=\"n\">request</span><span class=\"o\">.</span><span class=\"n\">raw_post</span>\n</code></pre></div>\n<p>(RubyOnRails) ^</p>\n<p>obviously it cannot be sent on DELETE for which we probably need some kind of interceptor</p>",
        "id": 237210992,
        "sender_full_name": "dsh",
        "timestamp": 1620068211
    }
]