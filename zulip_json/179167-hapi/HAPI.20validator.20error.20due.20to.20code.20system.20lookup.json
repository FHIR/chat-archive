[
    {
        "content": "<p>I am seeing an error in HAPI 3.6 (and 3.7) related to a code-system lookup. Specifically, the server gives a 500 response and at the bottom of the  stack trace it says (the full error stack trace: <a href=\"/user_uploads/10155/54rm4s6qpvWx8MNJ0sa_GAHD/stacktrace.txt\" target=\"_blank\" title=\"stacktrace.txt\">stacktrace.txt</a> ):</p>\n<div class=\"codehilite\"><pre><span></span>org.hl7.fhir.exceptions.TerminologyServiceException: unable to find code system urn:iso:std:iso:3166\n</pre></div>\n\n\n<p>I see this when validating against the <a href=\"https://simplifier.net/BasisprofilDE/patient-de-basis-0.2/\" target=\"_blank\" title=\"https://simplifier.net/BasisprofilDE/patient-de-basis-0.2/\">German base Patient profile</a> with a minimal example like the one given at the bottom e.g. through the <code>$validate</code>operation. We're using a simple custom validation support along the lines of what the HAPI documentation describes (only loading the profiles, no custom handling of value sets or code systems). The error is provoked by the address field which must conform to the <a href=\"https://simplifier.net/BasisprofilDE/address-de-basis-0.2\" target=\"_blank\" title=\"https://simplifier.net/BasisprofilDE/address-de-basis-0.2\">German Base address profile</a>  (also present on the server). The address profile, in turn, defines a preferred binding for the country field to the ValueSet<code>http://hl7.org/fhir/ValueSet/jurisdiction</code> (which includes all codes from <code>urn:iso:std:iso:3166</code>, as well as others).</p>\n<p>I do not see this error when using the standalone JAR validator.Is there a known issue here - or maybe rather an issue with our validation support implementation?  (If more helpful, I 'd be happy to open a GForge/GitHub ticket).</p>\n<p>Resource example: provoking error:</p>\n<div class=\"codehilite\"><pre><span></span>{\n    &quot;resourceType&quot;: &quot;Patient&quot;,\n    &quot;meta&quot;: {\n        &quot;profile&quot;: [\n            &quot;http://fhir.de/StructureDefinition/patient-de-basis/0.2&quot;\n        ]\n    },\n    &quot;address&quot;: [\n            &quot;country&quot;: &quot;DE&quot;\n        }\n    ]}\n</pre></div>",
        "id": 158963023,
        "sender_full_name": "Morten Ernebjerg",
        "timestamp": 1550657433
    }
]