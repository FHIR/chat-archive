[
    {
        "content": "<p>My apologies, I created this thread in <a href=\"#narrow/stream/179166-implementers/topic/Conditional.20PUT.20not.20working/near/244541132\">implementers</a> without checking. </p>\n<p>How do I specify resource ID in PUT request of a bundle?</p>\n<div class=\"codehilite\"><pre><span></span><code>{\n    &quot;resourceType&quot;: &quot;Bundle&quot;,\n    &quot;type&quot;: &quot;transaction&quot;,\n    &quot;entry&quot;: [\n        {\n            &quot;resource&quot;: {\n                &quot;resourceType&quot;: &quot;Group&quot;,\n                &quot;id&quot;: &quot;4812&quot;,\n                // other fields\n            },\n            &quot;request&quot;: {\n                &quot;method&quot;: &quot;PUT&quot;,\n                &quot;url&quot;: &quot;Group?identifier=3.5&quot;\n            }\n        }\n    ]\n}\n</code></pre></div>\n<p>But this updates the resource which has the identifier<code>3.5</code> (<code>4809</code>). My intention is up update <code>4812</code> when there's no other resource that has the identifier <code>3.5</code>.</p>\n<p>I expected this to have happened</p>\n<blockquote>\n<p><strong>One Match, resource id provided but does not match resource found:</strong><br>\nThe server returns a 400 Bad Request error indicating the client id specification was a problem preferably with an OperationOutcome</p>\n</blockquote>\n<p>I just noticed that normal PUT request doesn't work too. GET to <code>/Group?identifier=3.5</code> returns 1 resource with ID <code>4809</code>.</p>\n<p>I'm trying to update resource <code>4812</code> only if there's no other resource with identifier <code>3.5</code>.</p>\n<p>PUT to <code>/Group?identifier=3.5</code> updates <code>4809</code>, even though a group with that identifier exists (<code>4809</code>)</p>\n<p>Body is</p>\n<div class=\"codehilite\"><pre><span></span><code>{\n    &quot;resourceType&quot;: &quot;Group&quot;,\n    &quot;id&quot;: &quot;4812&quot;,\n    // other fields\n}\n</code></pre></div>",
        "id": 244894271,
        "sender_full_name": "Dexter",
        "timestamp": 1625460675
    },
    {
        "content": "<p>This fails too, conditional PATCH. </p>\n<div class=\"codehilite\"><pre><span></span><code>{\n    &quot;resourceType&quot;: &quot;Bundle&quot;,\n    &quot;type&quot;: &quot;transaction&quot;,\n    &quot;entry&quot;: [\n        {\n            &quot;fullUrl&quot;: &quot;urn:uuid:ad46ecad-dd94-11eb-af49-e0946771098e&quot;,\n            &quot;resource&quot;: {\n                &quot;resourceType&quot;: &quot;Patient&quot;,\n                // patient info\n            },\n            &quot;request&quot;: {\n                &quot;method&quot;: &quot;POST&quot;,\n                &quot;ifNoneExist&quot;: &quot;telecom=testuser@gmail.com&quot;\n            }\n        },\n        {\n            &quot;resource&quot;: {\n                &quot;resourceType&quot;: &quot;CareTeam&quot;,\n                &quot;identifier&quot;: [\n                    {\n                        &quot;value&quot;: &quot;CT33426163&quot;,\n                        &quot;system&quot;: &quot;EXSYS&quot;\n                    }\n                ],\n                &quot;subject&quot;: {\n                    &quot;reference&quot;: &quot;urn:uuid:ad46ecad-dd94-11eb-af49-e0946771098e&quot;,\n                    &quot;type&quot;: &quot;Patient&quot;\n                },\n                // other data\n            },\n            &quot;request&quot;: {\n                &quot;method&quot;: &quot;POST&quot;,\n                &quot;ifNoneExist&quot;: &quot;subject.telecom=testuser@gmail.com&quot;\n            }\n        }\n    ]\n}\n</code></pre></div>\n<div class=\"codehilite\"><pre><span></span><code>&quot;Failed to call access method: org.springframework.dao.InvalidDataAccessApiUsageException:\n Invalid match URL format (must match &quot;[resourceType]?[params]&quot;);\nnested exception is java.lang.IllegalArgumentException:\nInvalid match URL format (must match &quot;[resourceType]?[params]&quot;)&quot;\n</code></pre></div>\n<p>I'm facing this issue on all query parameters that use conditionals in all transactions. This is causing all major endpoints on our API to fail, what do I do?</p>",
        "id": 244935563,
        "sender_full_name": "Dexter",
        "timestamp": 1625491576
    },
    {
        "content": "<p>Kindly help, thanks :)</p>",
        "id": 245000243,
        "sender_full_name": "Dexter",
        "timestamp": 1625553230
    },
    {
        "content": "<p>You say 'conditional PATCH', but your http verb is POST. In your request, the 'ifNoneExist' is can be used on a POST (not PUT or PATCH), so maybe you actually meant to do a conditional POST. But you do not have a url listed, which the server will need to check for the type you want to create.</p>",
        "id": 245183357,
        "sender_full_name": "Mirjam Baltus",
        "timestamp": 1625666063
    }
]