[
    {
        "content": "<p>Does anyone know what might the cause for this error when I'm POSTing a transaction Bundle to the base server url?:</p>\n<div class=\"codehilite\"><pre><span></span><code>{\n    &quot;resourceType&quot;: &quot;OperationOutcome&quot;,\n    &quot;text&quot;: {\n        &quot;status&quot;: &quot;generated&quot;,\n        &quot;div&quot;: &quot;&lt;div xmlns=\\&quot;http://www.w3.org/1999/xhtml\\&quot;&gt;&lt;h1&gt;Operation Outcome&lt;/h1&gt;&lt;table border=\\&quot;0\\&quot;&gt;&lt;tr&gt;&lt;td style=\\&quot;font-weight: bold;\\&quot;&gt;ERROR&lt;/td&gt;&lt;td&gt;[]&lt;/td&gt;&lt;td&gt;&lt;pre&gt;Failed to call access method: java.lang.IndexOutOfBoundsException: Index 0 out of bounds for length 0&lt;/pre&gt;&lt;/td&gt;\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\n\\t\\t\\t&lt;/tr&gt;\\n\\t\\t&lt;/table&gt;\\n\\t&lt;/div&gt;&quot;\n    },\n    &quot;issue&quot;: [\n        {\n            &quot;severity&quot;: &quot;error&quot;,\n            &quot;code&quot;: &quot;processing&quot;,\n            &quot;diagnostics&quot;: &quot;Failed to call access method: java.lang.IndexOutOfBoundsException: Index 0 out of bounds for length 0&quot;\n        }\n    ]\n}\n</code></pre></div>\n<p>The error message itself isn't super helpful in figuring it out.  And I'm not immediately seeing anything obviously wrong with the Bundle or what I'm trying to do.  POSTing transaction bundles worked on my server before, but it's been quite a while since I've tested that (it's now at 5.4.0-PRE2-SNAPSHOT).</p>",
        "id": 239287383,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1621356659
    },
    {
        "content": "<p>which server</p>",
        "id": 239287526,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1621356721
    },
    {
        "content": "<p><a href=\"https://fhir.hausamconsulting.com/r4\">https://fhir.hausamconsulting.com/r4</a></p>",
        "id": 239287614,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1621356743
    },
    {
        "content": "<p>oh we're in the hapi stream. duh!</p>",
        "id": 239287673,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1621356770
    },
    {
        "content": "<p>yep!</p>",
        "id": 239287693,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1621356780
    },
    {
        "content": "<p>It looks like I now have the source of this error.  HAPI doesn't seem to be properly handling a CodeableConcept data type with 'text'only (no Codings).  I am not able to PUT (or POST) an Observation resource (and very likely any other resource, although I haven't tested that) with a CodeableConcept instance like:</p>\n<div class=\"codehilite\"><pre><span></span><code>    &quot;code&quot;: {\n        &quot;text&quot;: &quot;Blood typing&quot;\n    },\n</code></pre></div>\n<p>That results in the <code>Failed to call access method: java.lang.IndexOutOfBoundsException: Index 0 out of bounds for length 0</code> error, even though it's perfectly valid in the base FHIR spec and the IPS IG and it validates with Java validator just fine. If I add a 'coding' to the datatype then the resource is created without a problem.Here's the related <a href=\"#narrow/stream/207835-IPS/topic/.24document\">discussion</a> in the IPS stream.<br>\n<span class=\"user-mention\" data-user-id=\"191319\">@James Agnew</span>?</p>",
        "id": 239335661,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1621376906
    },
    {
        "content": "<p>Has anyone else seen this?  Or have you been able to successfully create an instance on the server with a CodeableConcept containing only <code>text</code>?</p>",
        "id": 239604433,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1621522122
    }
]