[
    {
        "content": "<p>I tried to start a FHIR server using the <strong>hapi-fhir-cli</strong> by running <code>java -jar hapi-fhir-cli.jar run-server</code> as stated in the <a href=\"http://hapifhir.io/doc_cli.html\" target=\"_blank\" title=\"http://hapifhir.io/doc_cli.html\">documentation</a>. However, the process gets killed, without giving much information. The output by some strange reason has varied in different tries. The most informative output that I got is:</p>\n<div class=\"codehilite\"><pre>gaston@pgx-fhir:~/bin$ java -jar hapi-fhir-cli.jar run-server\n------------------------------------------------------------\nðŸ”¥ HAPI FHIR 1.5 - Command Line Tool\n------------------------------------------------------------\nMax configured JVM memory (Xmx): 239.8MB\nDetected Java version: 1.8.0_91\n------------------------------------------------------------\n12:12:54 INFO  ca.uhn.fhir.context.FhirContext - Creating new FHIR context for FHIR version [DSTU2]\n12:12:54 INFO  ca.uhn.fhir.cli.RunServerCommand - Preparing HAPI FHIR JPA server on port 8080\n12:12:55 INFO  ca.uhn.fhir.cli.RunServerCommand - Starting HAPI FHIR JPA server in DSTU2 mode\n12:13:26 WARN  o.h.e.j.e.i.JdbcEnvironmentInitiator - HHH000342: Could not obtain connection to query metadata : Cannot create PoolableConnectionFactory (Failed to create database &#39;directory:target/jpaserver_derby_files&#39;, see the next exception for details.)\nKilled\n</pre></div>\n\n\n<p>Does anyone have any pointers? The <code>derby.log</code> file is empty and I'm not sure where to look next. Thanks a lot!</p>",
        "id": 153836046,
        "sender_full_name": "Gaston Fiore",
        "timestamp": 1467376762
    },
    {
        "content": "<p>At one stage I used this: <strong>JAVA_HOME=<code>/usr/libexec/java_home</code> ./hapi-fhir-cli run-server </strong> - though it doesn't sound like finding java is your problem...</p>",
        "id": 153836105,
        "sender_full_name": "David Hay",
        "timestamp": 1467402339
    },
    {
        "content": "<p>Thanks <span class=\"user-mention\" data-user-id=\"191321\">@David Hay</span> , indeed, I don't think that finding Java is the problem. I could finally start the server, but what's surprising is that I haven't changed anything. The output that I get changes from try to try by some strange reason. On most tries I got:</p>\n<div class=\"codehilite\"><pre><span></span>gaston@pgx-fhir:~/bin$ java -jar hapi-fhir-cli.jar run-server\n------------------------------------------------------------\nðŸ”¥ HAPI FHIR 1.5 - Command Line Tool\n------------------------------------------------------------\nMax configured JVM memory (Xmx): 239.8MB\nDetected Java version: 1.8.0_91\n------------------------------------------------------------\n12:01:54 INFO  ca.uhn.fhir.context.FhirContext - Creating new FHIR context for FHIR version [DSTU2]\n12:01:54 INFO  ca.uhn.fhir.cli.RunServerCommand - Preparing HAPI FHIR JPA server on port 8080\n12:01:55 INFO  ca.uhn.fhir.cli.RunServerCommand - Starting HAPI FHIR JPA server in DSTU2 mode\nKilled\n</pre></div>\n\n\n<p>One other time I got:</p>\n<div class=\"codehilite\"><pre><span></span>gaston@pgx-fhir:~/bin$ java -jar hapi-fhir-cli.jar run-server\n------------------------------------------------------------\nðŸ”¥ HAPI FHIR 1.5 - Command Line Tool\n------------------------------------------------------------\nMax configured JVM memory (Xmx): 239.8MB\nDetected Java version: 1.8.0_91\n------------------------------------------------------------\n12:12:54 INFO  ca.uhn.fhir.context.FhirContext - Creating new FHIR context for FHIR version [DSTU2]\n12:12:54 INFO  ca.uhn.fhir.cli.RunServerCommand - Preparing HAPI FHIR JPA server on port 8080\n12:12:55 INFO  ca.uhn.fhir.cli.RunServerCommand - Starting HAPI FHIR JPA server in DSTU2 mode\n12:13:26 WARN  o.h.e.j.e.i.JdbcEnvironmentInitiator - HHH000342: Could not obtain connection to query metadata : Cannot create PoolableConnectionFactory (Failed to create database &#39;directory:target/jpaserver_derby_files&#39;, see the next exception for details.)\nKilled\n</pre></div>\n\n\n<p>And one time the server started:</p>\n<div class=\"codehilite\"><pre><span></span>gaston@pgx-fhir:~/bin/server$ java -jar ../hapi-fhir-cli.jar run-server\n------------------------------------------------------------\nðŸ”¥ HAPI FHIR 1.5 - Command Line Tool\n------------------------------------------------------------\nMax configured JVM memory (Xmx): 239.8MB\nDetected Java version: 1.8.0_91\n------------------------------------------------------------\n17:16:21 INFO  ca.uhn.fhir.context.FhirContext - Creating new FHIR context for FHIR version [DSTU2]\n17:16:22 INFO  ca.uhn.fhir.cli.RunServerCommand - Preparing HAPI FHIR JPA server on port 8080\n17:16:22 INFO  ca.uhn.fhir.cli.RunServerCommand - Starting HAPI FHIR JPA server in DSTU2 mode\n17:16:52 INFO  ca.uhn.fhir.context.FhirContext - Creating new FHIR context for FHIR version [DSTU2]\n17:16:55 INFO  ca.uhn.fhir.context.FhirContext - Creating new FHIR context for FHIR version [DSTU1]\n17:16:55 INFO  ca.uhn.fhir.context.FhirContext - Creating new FHIR context for FHIR version [DSTU2_HL7ORG]\n17:16:56 INFO  ca.uhn.fhir.context.FhirContext - Creating new FHIR context for FHIR version [DSTU3]\n17:17:07 WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Warning Code: 10000, SQLState: 01J01\n17:17:07 WARN  o.h.e.jdbc.spi.SqlExceptionHelper - Database &#39;directory:target/jpaserver_derby_files&#39; not created, connection made to existing database instead.\n17:17:07 WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Warning Code: 10000, SQLState: 01J01\n17:17:07 WARN  o.h.e.jdbc.spi.SqlExceptionHelper - Database &#39;directory:target/jpaserver_derby_files&#39; not created, connection made to existing database instead.\n17:17:07 WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Warning Code: 10000, SQLState: 01J01\n17:17:07 WARN  o.h.e.jdbc.spi.SqlExceptionHelper - Database &#39;directory:target/jpaserver_derby_files&#39; not created, connection made to existing database instead.\n17:17:09 INFO  ca.uhn.fhir.cli.RunServerCommand - Server started on port 8080\n17:17:09 INFO  ca.uhn.fhir.cli.RunServerCommand - Web Testing UI : http://localhost:8080/\n17:17:09 INFO  ca.uhn.fhir.cli.RunServerCommand - Server Base URL: http://localhost:8080/baseDstu2/\n</pre></div>\n\n\n<p>I never changed permissions or anything. <span class=\"user-mention\" data-user-id=\"191319\">@James Agnew</span> , do you have any ideas what could be going on? I don't know why I'm not getting a consistent behavior. Thanks a lot!</p>",
        "id": 153836106,
        "sender_full_name": "Gaston Fiore",
        "timestamp": 1467402741
    },
    {
        "content": "<p>Now it did not start. Again, I have not changed anything:</p>\n<div class=\"codehilite\"><pre>gaston@pgx-fhir:~/bin/server$ java -jar ../hapi-fhir-cli.jar run-server\n------------------------------------------------------------\nðŸ”¥ HAPI FHIR 1.5 - Command Line Tool\n------------------------------------------------------------\nMax configured JVM memory (Xmx): 239.8MB\nDetected Java version: 1.8.0_91\n------------------------------------------------------------\n20:49:45 INFO  ca.uhn.fhir.context.FhirContext - Creating new FHIR context for FHIR version [DSTU2]\n20:49:46 INFO  ca.uhn.fhir.cli.RunServerCommand - Preparing HAPI FHIR JPA server on port 8080\n20:49:46 INFO  ca.uhn.fhir.cli.RunServerCommand - Starting HAPI FHIR JPA server in DSTU2 mode\nKilled\n</pre></div>",
        "id": 153836112,
        "sender_full_name": "Gaston Fiore",
        "timestamp": 1467406546
    },
    {
        "content": "<p>I wonder if it's possible it's running out of memory... Can you try it with a larger memory setting?</p>\n<div class=\"codehilite\"><pre>java -Xmx1024m -jar ../hapi-fhir-cli.jar run-server\n</pre></div>",
        "id": 153836316,
        "sender_full_name": "James Agnew",
        "timestamp": 1467670531
    },
    {
        "content": "<p>Thanks <span class=\"user-mention\" data-user-id=\"191319\">@James Agnew</span> ! I'm also going to enable swap memory in the host to see if that helps.</p>",
        "id": 153836392,
        "sender_full_name": "Gaston Fiore",
        "timestamp": 1467721352
    }
]