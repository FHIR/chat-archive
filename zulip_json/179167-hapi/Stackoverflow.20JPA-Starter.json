[
    {
        "content": "<p>Hello all,</p>\n<p>I am reliably getting stackoverflow errors (see log) on a transaction import of just under 7000 resources using the HAPI-FHIR-JPA starter 5.5 and a mysql database. Batch imports are no problem. But what surprises me is that the overflow error occurs <strong>directly after a few seconds</strong> and not as expected after some time, once the server is at the limit. <br>\nAny idea how I can fix this?</p>\n<p>The server on which the HAPI is running has only 8 GB Ram, in addition the mentioned Mysql-Db is running there.<br>\nI already tried to increase the Java heapsize with:</p>\n<div class=\"codehilite\"><pre><span></span><code>export MAVEN_OPTS=&quot;-Xmx4096m -Xms1024m&quot; &amp;&amp; mvn jetty:run\n</code></pre></div>\n<p>but without noticeable success. </p>\n<p>Here is the top of my stacktrace:</p>\n<div class=\"spoiler-block\"><div class=\"spoiler-header\">\n</div><div class=\"spoiler-content\" aria-hidden=\"true\">\n<p>2022-02-14 10:13:18.346 [qtp37590923-18] ERROR c.u.f.r.s.i.ExceptionHandlingInterceptor [ExceptionHandlingInterceptor.java:140] Failure during REST processing<br>\nca.uhn.fhir.rest.server.exceptions.InternalErrorException: Failed to call access method: java.lang.StackOverflowError<br>\n        at ca.uhn.fhir.rest.server.method.BaseMethodBinding.invokeServerMethod(BaseMethodBinding.java:272)<br>\n        at ca.uhn.fhir.rest.server.method.TransactionMethodBinding.invokeServer(TransactionMethodBinding.java:116)<br>\n        at ca.uhn.fhir.rest.server.method.BaseResourceReturningMethodBinding.doInvokeServer(BaseResourceReturningMethodBinding.java:326)<br>\n        at ca.uhn.fhir.rest.server.method.BaseResourceReturningMethodBinding.invokeServer(BaseResourceReturningMethodBinding.java:434)<br>\n        at ca.uhn.fhir.rest.server.RestfulServer.handleRequest(RestfulServer.java:1152)<br>\n        at ca.uhn.fhir.rest.server.RestfulServer.doPost(RestfulServer.java:423)<br>\n        at ca.uhn.fhir.rest.server.RestfulServer.service(RestfulServer.java:1861)<br>\n        at javax.servlet.http.HttpServlet.service(HttpServlet.java:790)<br>\n        at org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:799)<br>\n        at org.eclipse.jetty.servlet.ServletHandler$ChainEnd.doFilter(ServletHandler.java:1626)<br>\n        at org.eclipse.jetty.websocket.server.WebSocketUpgradeFilter.doFilter(WebSocketUpgradeFilter.java:228)<br>\n        at org.eclipse.jetty.servlet.FilterHolder.doFilter(FilterHolder.java:193)<br>\n        at org.eclipse.jetty.servlet.ServletHandler$Chain.doFilter(ServletHandler.java:1601)<br>\n        at org.springframework.boot.web.servlet.support.ErrorPageFilter.doFilter(ErrorPageFilter.java:126)<br>\n        at org.springframework.boot.web.servlet.support.ErrorPageFilter.access$000(ErrorPageFilter.java:64)<br>\n        at org.springframework.boot.web.servlet.support.ErrorPageFilter$1.doFilterInternal(ErrorPageFilter.java:101)<br>\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)<br>\n        at org.springframework.boot.web.servlet.support.ErrorPageFilter.doFilter(ErrorPageFilter.java:119)<br>\n        at org.eclipse.jetty.servlet.FilterHolder.doFilter(FilterHolder.java:193)<br>\n        at org.eclipse.jetty.servlet.ServletHandler$Chain.doFilter(ServletHandler.java:1601)<br>\n        at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)<br>\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)<br>\n        at org.eclipse.jetty.servlet.FilterHolder.doFilter(FilterHolder.java:193)<br>\n        at org.eclipse.jetty.servlet.ServletHandler$Chain.doFilter(ServletHandler.java:1601)<br>\n        at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:548)<br>\n        at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:143)<br>\n        at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:602)<br>\n        at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:127)<br>\n        at org.eclipse.jetty.server.handler.ScopedHandler.nextHandle(ScopedHandler.java:235)<br>\n        at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:1624)<br>\n        at org.eclipse.jetty.server.handler.ScopedHandler.nextHandle(ScopedHandler.java:233)<br>\n        at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1434)<br>\n        at org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:188)<br>\n        at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:501)<br>\n        at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:1594)<br>\n        at org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:186)<br>\n        at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1349)<br>\n        at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:141)<br>\n        at org.eclipse.jetty.server.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:191)<br>\n        at org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:146)<br>\n        at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:127)<br>\n        at org.eclipse.jetty.server.Server.handle(Server.java:516)<br>\n        at org.eclipse.jetty.server.HttpChannel.lambda$handle$1(HttpChannel.java:388)<br>\n        at org.eclipse.jetty.server.HttpChannel.dispatch(HttpChannel.java:633)<br>\n        at org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:380)<br>\n        at org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:277)<br>\n        at org.eclipse.jetty.io.AbstractConnection$ReadCallback.succeeded(AbstractConnection.java:311)<br>\n        at org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:105)<br>\n        at org.eclipse.jetty.io.ChannelEndPoint$1.run(ChannelEndPoint.java:104)<br>\n        at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:883)<br>\n        at org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.run(QueuedThreadPool.java:1034)<br>\n        at java.base/java.lang.Thread.run(Thread.java:829)<br>\nCaused by: java.lang.reflect.InvocationTargetException: null<br>\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)<br>\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)<br>\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)<br>\n        at java.base/java.lang.reflect.Method.invoke(Method.java:566)<br>\n        at ca.uhn.fhir.rest.server.method.BaseMethodBinding.invokeServerMethod(BaseMethodBinding.java:264)<br>\n        ... 51 common frames omitted<br>\nCaused by: java.lang.StackOverflowError: null<br>\n        at java.base/java.lang.Class.newInstance(Class.java:576)<br>\n        at org.hibernate.hql.internal.ast.SqlASTFactory.create(SqlASTFactory.java:249)<br>\n        at antlr.ASTFactory.create(ASTFactory.java:153)<br>\n        at antlr.ASTFactory.create(ASTFactory.java:186)</p>\n</div></div>",
        "id": 271800490,
        "sender_full_name": "David Meyers",
        "timestamp": 1644830070
    }
]