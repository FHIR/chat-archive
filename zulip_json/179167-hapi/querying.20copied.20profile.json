[
    {
        "content": "<p>I copied  the class Patient in the dst3 model package to a new class named Patient2. I renamed all mentions of \"Patient\" in that class to \"Patient2\". I added the new profile to the list of profiles in the resource \"fhirversion.properties\". I compiled everything and started a cli-server. I can now store a Patient2 in the server and retrieve all stored Patient2s with \"client.search().forResource(Patient2.class).execute();\". When I contrain the search with a where, however, I do not get any results. There seems to be a detail which I missed, to be able to search for new profile classes. Could somebody give me a hint ?</p>",
        "id": 154023689,
        "sender_full_name": "Georg Fette",
        "timestamp": 1544172437
    },
    {
        "content": "<p>Hi Georg, i tried to reproduce your issue and didn't had one.</p>",
        "id": 154023722,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1544188834
    },
    {
        "content": "<p>How i did it:<br>\n- created Patient2 <br>\n- added Patient2 to: Fhirversion.properties<br>\n- extended enum ResourceType by Patient2</p>",
        "id": 154023723,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1544188955
    },
    {
        "content": "<p>on the client side:</p>\n<div class=\"codehilite\"><pre><span></span> <span class=\"n\">ctx</span> <span class=\"o\">=</span> <span class=\"n\">FhirContext</span><span class=\"o\">.</span><span class=\"na\">forDstu3</span><span class=\"o\">();</span>\n        <span class=\"n\">String</span> <span class=\"n\">serverBase</span> <span class=\"o\">=</span> <span class=\"s\">&quot;http://localhost:8080/baseDstu3&quot;</span><span class=\"o\">;</span>\n        <span class=\"n\">client</span> <span class=\"o\">=</span> <span class=\"n\">ctx</span><span class=\"o\">.</span><span class=\"na\">newRestfulGenericClient</span><span class=\"o\">(</span><span class=\"n\">serverBase</span><span class=\"o\">);</span>\n        <span class=\"n\">ctx</span><span class=\"o\">.</span><span class=\"na\">registerCustomType</span><span class=\"o\">(</span><span class=\"n\">Patient2</span><span class=\"o\">.</span><span class=\"na\">class</span><span class=\"o\">);</span>\n\n        <span class=\"n\">Bundle</span> <span class=\"n\">results</span> <span class=\"o\">=</span> <span class=\"n\">client</span><span class=\"o\">.</span><span class=\"na\">search</span><span class=\"o\">().</span><span class=\"na\">forResource</span><span class=\"o\">(</span><span class=\"n\">Patient2</span><span class=\"o\">.</span><span class=\"na\">class</span><span class=\"o\">).</span><span class=\"na\">where</span><span class=\"o\">(</span><span class=\"n\">Patient2</span><span class=\"o\">.</span><span class=\"na\">NAME</span><span class=\"o\">.</span><span class=\"na\">matches</span><span class=\"o\">().</span><span class=\"na\">value</span><span class=\"o\">(</span><span class=\"s\">&quot;Chalmers&quot;</span><span class=\"o\">))</span>\n                <span class=\"o\">.</span><span class=\"na\">returnBundle</span><span class=\"o\">(</span><span class=\"n\">Bundle</span><span class=\"o\">.</span><span class=\"na\">class</span><span class=\"o\">).</span><span class=\"na\">execute</span><span class=\"o\">();</span>\n</pre></div>",
        "id": 154023724,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1544189116
    },
    {
        "content": "<p>ah, thank you. You hinted me to the first mistake I made:<br>\nI forgot to extend the enum ResourceType and so the Patient2 still returned ResourceType.Patient<br>\nThe seconds mistake I made was that I forgot the method fhirType(). Without this method the parts of the resource are not indexed in the tables \"hfj_spidx_token\" and \"hfj_spidx_string\" in the database. <br>\nNow everything works like a charm.<br>\nThanks a lot</p>",
        "id": 154023764,
        "sender_full_name": "Georg Fette",
        "timestamp": 1544210267
    }
]