[
    {
        "content": "<p>I am trying to \"translate\" the following query to hapi:</p>\n<div class=\"codehilite\"><pre>/EpisodeOfCare?patient=someId&amp;_revinclude=Encounter:episodeofcare&amp;_revinclude:recurse=Observation:encounter\n</pre></div>\n\n\n<p>I would expect it to be </p>\n<div class=\"codehilite\"><pre>client.search()\n      .forResource(classOf[EpisodeOfCare])\n      .where(EpisodeOfCare.PATIENT.hasId(patientId))\n      .revInclude(Encounter.INCLUDE_EPISODEOFCARE)\n      .revInclude(Observation.INCLUDE_ENCOUNTER.asRecursive())\n</pre></div>\n\n\n<p>Unfortunately the <code>asRecursive</code> does not seem to do anything, it doesn't add \":recurse\" to the query string. Is there something I am missing?</p>",
        "id": 153869588,
        "sender_full_name": "Jenny Meinsma",
        "timestamp": 1485871368
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"192540\">@Jenny Meinsma</span> Hmm, it appears you're right, HAPI isn't properly including the <code>:recurse</code> qualifier for revincludes.</p>\n<p>I'm going to check in a fix shortly.</p>\n<p>That said, I'm not sure what recurse would mean in the context of your example.. Observation.encounter doesn't point to EpisodeOfCare, so you couldn't do a revinclude like that AFAIK.</p>",
        "id": 153870418,
        "sender_full_name": "James Agnew",
        "timestamp": 1486436885
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191319\">@James Agnew</span> , thank you.<br>\nWe want to search for EpisodeOfCare for a patient and maybe include encounters and observations. Because an observation has encounters and an encounter has episodeofcares we can search those at once with reverse include. For this search we have tested the query-url above which seems to work.  </p>",
        "id": 153870493,
        "sender_full_name": "Jenny Meinsma",
        "timestamp": 1486466418
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"192540\">@Jenny Meinsma</span> Interesting... I don't suppose you have a sample link against one of the public servers that shows this type of search working? I don't think this would work on HAPI's server, I'd like to try and replicate it.</p>",
        "id": 153870501,
        "sender_full_name": "James Agnew",
        "timestamp": 1486467422
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191319\">@James Agnew</span> <br>\n<a href=\"http://fhirtest.uhn.ca/baseDstu3//EpisodeOfCare?patient=zd8&amp;_revinclude=Encounter:episodeofcare&amp;_revinclude:recurse=Observation:encounter\" target=\"_blank\" title=\"http://fhirtest.uhn.ca/baseDstu3//EpisodeOfCare?patient=zd8&amp;_revinclude=Encounter:episodeofcare&amp;_revinclude:recurse=Observation:encounter\">http://fhirtest.uhn.ca/baseDstu3//EpisodeOfCare?patient=zd8&amp;_revinclude=Encounter:episodeofcare&amp;_revinclude:recurse=Observation:encounter</a></p>",
        "id": 153870549,
        "sender_full_name": "Jenny Meinsma",
        "timestamp": 1486470183
    }
]