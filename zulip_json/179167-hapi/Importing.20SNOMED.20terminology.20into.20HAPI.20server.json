[
    {
        "content": "<p>I have created a HAPI FHIR Server running in tomcat with a mySQL database.  I am trying to import the SNOMED dataset into it.   </p>\n<p>While executing this command on the web server, it generates the following error:<br>\njava  -jar hapi-fhir-cli.jar upload-terminology -d data/SnomedCT_USEditionRF2_PRODUCTION_20200301T120000Z.zip -v r4 -t <a href=\"http://localhost:8080/hapi-fhir-jpaserver/fhir/\" title=\"http://localhost:8080/hapi-fhir-jpaserver/fhir/\">http://localhost:8080/hapi-fhir-jpaserver/fhir/</a> -u <a href=\"http://snomed.info/sct\" title=\"http://snomed.info/sct\">http://snomed.info/sct</a> -l</p>\n<p>Server:<br>\n \"resourceType\": \"CapabilityStatement\",<br>\n  \"status\": \"active\",<br>\n  \"date\": \"2020-05-05T22:24:18+00:00\",<br>\n  \"publisher\": \"Not provided\",<br>\n  \"kind\": \"instance\",<br>\n  \"software\": {<br>\n    \"name\": \"HAPI FHIR Server\",<br>\n    \"version\": \"4.2.0\"<br>\n  },<br>\n  \"implementation\": {<br>\n    \"description\": \"HAPI FHIR R4 Server\",<br>\n    \"url\": \"<a href=\"http://localhost:8080/hapi-fhir-jpaserver/fhir/\" title=\"http://localhost:8080/hapi-fhir-jpaserver/fhir/\">http://localhost:8080/hapi-fhir-jpaserver/fhir/</a>\"<br>\n  },<br>\n  \"fhirVersion\": \"4.0.1\",<br>\n  \"format\": [<br>\n    \"application/fhir+xml\",<br>\n    \"application/fhir+json\"<br>\n  ]</p>\n<p>C:\\data\\4.2&gt;java -Xms2048m -Xmx4092m -jar hapi-fhir-cli.jar upload-terminology -d C:\\data\\4.2\\data\\SnomedCT_USEditionRF2_PRODUCTION_20200301T120000Z.zip -v r4 -t <a href=\"http://localhost:8080/hapi-fhir-jpaserver/fhir\" title=\"http://localhost:8080/hapi-fhir-jpaserver/fhir\">http://localhost:8080/hapi-fhir-jpaserver/fhir</a> -u <a href=\"http://snomed.info/sct\" title=\"http://snomed.info/sct\">http://snomed.info/sct</a> -l</p>\n<hr>\n<p>?  HAPI FHIR 4.2.0 - Command Line Tool</p>\n<hr>\n<p>Process ID                      : 5304@h365hapi-web<br>\nMax configured JVM memory (Xmx) : 3.6GB<br>\nDetected Java version           : 1.8.0_221</p>\n<hr>\n<p>2020-05-05 22:39:58.925 [main] INFO  c.u.f.c.UploadTerminologyCommand Adding ZIP file: C:\\data\\4.2\\data\\SnomedCT_USEditionRF2_PRODUCTION_20200301T120000Z.zip<br>\n2020-05-05 22:40:00.191 [main] INFO  c.u.f.c.UploadTerminologyCommand File size is greater than 10 MB - Going to use a local file reference instead of a direct HTTP transfer. Note that this will only work when executing this command on the same server as the FHIR server itself.<br>\n2020-05-05 22:40:19.167 [main] INFO  c.u.f.c.UploadTerminologyCommand Beginning upload - This may take a while...<br>\n2020-05-05 22:40:58.945 [main] ERROR ca.uhn.fhir.cli.App Error during execution:<br>\nca.uhn.fhir.rest.client.exceptions.FhirClientConnectionException: Failed to parse response from server when performing POST to URL <a href=\"http://localhost:8080/hapi-fhir-jpaserver/fhir/CodeSystem/$upload-external-code-system\" title=\"http://localhost:8080/hapi-fhir-jpaserver/fhir/CodeSystem/$upload-external-code-system\">http://localhost:8080/hapi-fhir-jpaserver/fhir/CodeSystem/$upload-external-code-system</a> - org.apache.http.NoHttpResponseException: localhost:8080 failed to respond<br>\n        at ca.uhn.fhir.rest.client.impl.BaseClient.invokeClient(BaseClient.java:398)<br>\n        at ca.uhn.fhir.rest.client.impl.GenericClient$BaseClientExecutable.invoke(GenericClient.java:434)<br>\n        at ca.uhn.fhir.rest.client.impl.GenericClient$OperationInternal.execute(GenericClient.java:1173)<br>\n        at ca.uhn.fhir.cli.UploadTerminologyCommand.invokeOperation(UploadTerminologyCommand.java:204)<br>\n        at ca.uhn.fhir.cli.UploadTerminologyCommand.run(UploadTerminologyCommand.java:113)<br>\n        at ca.uhn.fhir.cli.BaseApp.run(BaseApp.java:251)<br>\n        at ca.uhn.fhir.cli.App.main(App.java:43)</p>\n<p>Thanks!</p>",
        "id": 196374704,
        "sender_full_name": "David Cagigal",
        "timestamp": 1588716529
    },
    {
        "content": "<p>Have you had a look into snowstorm <a href=\"https://github.com/IHTSDO/snowstorm\" title=\"https://github.com/IHTSDO/snowstorm\">https://github.com/IHTSDO/snowstorm</a> ?</p>",
        "id": 196607737,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1588756898
    },
    {
        "content": "<p>I have not looked into snowstorm.   Do you recommend keeping the terminology separate from the FHIR server itself?</p>",
        "id": 196635237,
        "sender_full_name": "David Cagigal",
        "timestamp": 1588772257
    },
    {
        "content": "<p>I would say that depends on your needs. If using all or a lot of SNOMED is core business I would probably go for loading it into the FHIR server itself. If not, I would consider keeping it separate and cache the stuff you need eg. like <a href=\"https://hapifhir.io/hapi-fhir/docs/validation/validation_support_modules.html#recipe-using-a-remote-terminology-server\" title=\"https://hapifhir.io/hapi-fhir/docs/validation/validation_support_modules.html#recipe-using-a-remote-terminology-server\">https://hapifhir.io/hapi-fhir/docs/validation/validation_support_modules.html#recipe-using-a-remote-terminology-server</a></p>",
        "id": 196635560,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1588772397
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191451\">@Patrick Werner</span> might be able to assist you further on that part</p>",
        "id": 196635626,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1588772413
    },
    {
        "content": "<p>Never tried snowstorm before, but looks promising.</p>",
        "id": 196636568,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1588772822
    },
    {
        "content": "<p>For such huge CodeSystems i would go with a remote terminology server, but cache the results.</p>",
        "id": 196636664,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1588772867
    },
    {
        "content": "<p>In general i keep Terminology items (VS, small CS) on the server itself. LOINC, SnomedCT, HGNC i keep on a dedicated server.</p>",
        "id": 196636930,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1588772972
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191451\">@Patrick Werner</span> - would you have a validation chain open sourced somewhere that sort of does that? I mean filtering out what should be looked up locally and what code systems that should be looked up externally - being a hybrid between the strategies on <a href=\"https://hapifhir.io/hapi-fhir/docs/validation/validation_support_modules.html#validation-support-modules\" title=\"https://hapifhir.io/hapi-fhir/docs/validation/validation_support_modules.html#validation-support-modules\">https://hapifhir.io/hapi-fhir/docs/validation/validation_support_modules.html#validation-support-modules</a></p>",
        "id": 196642471,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1588775418
    },
    {
        "content": "<p>Thanks for the snowstorm suggestion!   I was able to get that up &amp; running and successfully imported the dataset.   I am not sure that it will be a long term solution, but at least I have a terminology server ready for use.</p>",
        "id": 196798773,
        "sender_full_name": "David Cagigal",
        "timestamp": 1588870229
    },
    {
        "content": "<p>Credits for inspiration goes to <span class=\"user-mention\" data-user-id=\"192681\">@Espen Stranger Seland</span> ;)</p>",
        "id": 196803672,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1588872425
    },
    {
        "content": "<p>And <span class=\"user-mention\" data-user-id=\"192654\">@Ã˜yvind Aassve</span></p>",
        "id": 196803698,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1588872437
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191427\">Jens Villadsen</span> <a href=\"#narrow/stream/179167-hapi/topic/Importing.20SNOMED.20terminology.20into.20HAPI.20server/near/196642471\" title=\"#narrow/stream/179167-hapi/topic/Importing.20SNOMED.20terminology.20into.20HAPI.20server/near/196642471\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"191451\">Patrick Werner</span> - would you have a validation chain open sourced somewhere that sort of does that? I mean filtering out what should be looked up locally and what code systems that should be looked up externally - being a hybrid between the strategies on <a href=\"https://hapifhir.io/hapi-fhir/docs/validation/validation_support_modules.html#validation-support-modules\" title=\"https://hapifhir.io/hapi-fhir/docs/validation/validation_support_modules.html#validation-support-modules\">https://hapifhir.io/hapi-fhir/docs/validation/validation_support_modules.html#validation-support-modules</a></p>\n</blockquote>\n<p>Still have some open questions on the new hapi5 Validation architecture and experimenting. Planning to extend the hapi doc on this.</p>",
        "id": 196865613,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1588923098
    },
    {
        "content": "<p>We have a huge use of LOINC and SNOMEDs as we are implementing for a HIE. What is your recommendation? Do we load the LOINC and SNOMED into FHIR server itself? Is there any docs on how to upload the definitions into FHIR server? Please provide references, repo or examples. </p>\n<p>Addition to that, how does the validation of code systems and valuesets happen if we store internally? Do we make use of <code>PrePopulatedValidationSupport</code>? Is that right?</p>\n<p>Thanks for your guidance and support.</p>",
        "id": 205558848,
        "sender_full_name": "Keerthivasan Ramanathan",
        "timestamp": 1596173127
    }
]