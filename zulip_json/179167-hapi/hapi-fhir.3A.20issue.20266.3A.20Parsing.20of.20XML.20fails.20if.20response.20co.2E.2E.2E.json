[
    {
        "content": "<p>psosm opened <a href=\"https://github.com/jamesagnew/hapi-fhir/issues/266\" target=\"_blank\" title=\"https://github.com/jamesagnew/hapi-fhir/issues/266\">issue 266</a></p>\n<blockquote>\n<p>I have just tried to get the conformance profile from the spark server at <a href=\"http://furore.com\" target=\"_blank\" title=\"http://furore.com\">furore.com</a><br>\nusing: </p>\n<p>client.fetchConformance().ofType(Conformance.class).execute();</p>\n<p>the execution failed leaving a stack trace like:<br>\nca.uhn.fhir.parser.DataFormatException: javax.xml.stream.XMLStreamException: ParseError at [row,col]:[1,1]<br>\nMessage: Content ist nicht zul√§ssig in Prolog.<br>\n    at ca.uhn.fhir.parser.XmlParser.doXmlLoop(XmlParser.java:253)<br>\n    at ca.uhn.fhir.parser.XmlParser.parseResource(XmlParser.java:1036)<br>\n    at ca.uhn.fhir.parser.XmlParser.doParseResource(XmlParser.java:191)<br>\n    at ca.uhn.fhir.parser.BaseParser.parseResource(BaseParser.java:474)<br>\n    at ca.uhn.fhir.rest.client.BaseClient$ResourceResponseHandler.invokeClient(BaseClient.java:531)<br>\n    at ca.uhn.fhir.rest.client.BaseClient$ResourceResponseHandler.invokeClient(BaseClient.java:504)<br>\n    at ca.uhn.fhir.rest.client.BaseClient.invokeClient(BaseClient.java:354)<br>\n    at ca.uhn.fhir.rest.client.GenericClient$BaseClientExecutable.invoke(GenericClient.java:648)<br>\n    at ca.uhn.fhir.rest.client.GenericClient$FetchConformanceInternal.execute(GenericClient.java:931)<br>\n    at ca.uhn.fhir.rest.client.RestfulClientFactory.validateServerBase(RestfulClientFactory.java:293)<br>\n    at ca.uhn.fhir.rest.client.RestfulClientFactory.validateServerBaseIfConfiguredToDoSo(RestfulClientFactory.java:209)<br>\n    at ca.uhn.fhir.rest.client.BaseClient.invokeClient(BaseClient.java:188)<br>\n    at ca.uhn.fhir.rest.client.GenericClient$BaseClientExecutable.invoke(GenericClient.java:648)<br>\n    at ca.uhn.fhir.rest.client.GenericClient$FetchConformanceInternal.execute(GenericClient.java:931)</p>\n</blockquote>",
        "id": 153811420,
        "sender_full_name": "Zulip HAPI Bot",
        "timestamp": 1449152350
    },
    {
        "content": "<p>psosm <a href=\"https://github.com/jamesagnew/hapi-fhir/issues/266#issuecomment-161654034\" target=\"_blank\" title=\"https://github.com/jamesagnew/hapi-fhir/issues/266#issuecomment-161654034\">commented</a> on <a href=\"https://github.com/jamesagnew/hapi-fhir/issues/266\" target=\"_blank\" title=\"https://github.com/jamesagnew/hapi-fhir/issues/266\">issue 266</a></p>\n<blockquote>\n<p>As far as i can see there ist a problem if the response body is preluded with a byte order mark (BOM)<br>\nChanging BaseClient.java to use a BOMInputStream (of commons-io) as source for the reader in createReaderFromResponse fixed the problem</p>\n<p>I have changed line 494 of BaseClient.java from<br>\nReader reader = new InputStreamReader(theResponse.getEntity().getContent(), charset);<br>\nto<br>\n                BOMInputStream bomInputStream = new BOMInputStream(theResponse.getEntity().getContent(), false);<br>\n                Reader reader = new InputStreamReader(bomInputStream, charset);<br>\nwhich solved the problem</p>\n</blockquote>",
        "id": 153811421,
        "sender_full_name": "Zulip HAPI Bot",
        "timestamp": 1449152567
    }
]