[
    {
        "content": "<p>I'm getting this error when I try to import the Jan 2021 SNOMED CT release:</p>\n<div class=\"codehilite\"><pre><span></span><code>ubuntu@ip-172-30-0-149:~$ ./hapi-fhir-cli upload-terminology -b fhir:fhir -d SnomedCT_InternationalRF2_PRODUCTION_20210131T120000Z.zip -l -t http://localhost:8080/r4 -u http://snomed.info/sct -v r4 -m ADD\nPicked up _JAVA_OPTIONS: -Xmx3g\n------------------------------------------------------------\nðŸ”¥  HAPI FHIR 5.3.0 - Command Line Tool\n------------------------------------------------------------\nProcess ID                      : 280649@ip-172-30-0-149\nMax configured JVM memory (Xmx) : 2.7GB\nDetected Java version           : 1.8.0_181\n------------------------------------------------------------\n2021-03-25 12:53:48.923 [main] INFO  c.u.f.c.UploadTerminologyCommand Adding ZIP file: SnomedCT_InternationalRF2_PRODUCTION_20210131T120000Z.zip\n2021-03-25 12:54:15.912 [main] INFO  c.u.f.c.UploadTerminologyCommand File size is greater than 10 MB - Going to use a local file reference instead of a direct HTTP transfer. Note that this will only work when executing this command on the same server as the FHIR server itself.\n2021-03-25 12:54:27.412 [main] INFO  c.u.f.c.UploadTerminologyCommand Beginning upload - This may take a while...\n2021-03-25 13:05:48.813 [main] ERROR c.u.f.c.UploadTerminologyCommand Received the following response:\n{\n  &quot;resourceType&quot;: &quot;OperationOutcome&quot;,\n  &quot;text&quot;: {\n    &quot;status&quot;: &quot;generated&quot;,\n    &quot;div&quot;: &quot;&lt;div xmlns=\\&quot;http://www.w3.org/1999/xhtml\\&quot;&gt;&lt;h1&gt;Operation Outcome&lt;/h1&gt;&lt;table border=\\&quot;0\\&quot;&gt;&lt;tr&gt;&lt;td style=\\&quot;font-weight: bold;\\&quot;&gt;ERROR&lt;/td&gt;&lt;td&gt;[]&lt;/td&gt;&lt;td&gt;&lt;pre&gt;Did not find file matching concepts.csv&lt;/pre&gt;&lt;/td&gt;\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\n\\t\\t\\t&lt;/tr&gt;\\n\\t\\t&lt;/table&gt;\\n\\t&lt;/div&gt;&quot;\n  },\n  &quot;issue&quot;: [ {\n    &quot;severity&quot;: &quot;error&quot;,\n    &quot;code&quot;: &quot;processing&quot;,\n    &quot;diagnostics&quot;: &quot;Did not find file matching concepts.csv&quot;\n  } ]\n}\n2021-03-25 13:05:48.819 [main] ERROR ca.uhn.fhir.cli.App Error during execution:\nca.uhn.fhir.rest.server.exceptions.InvalidRequestException: HTTP 400 : Did not find file matching concepts.csv\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)\n    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\n    at java.lang.reflect.Constructor.newInstance(Constructor.java:423)\n    at ca.uhn.fhir.rest.server.exceptions.BaseServerResponseException.newInstance(BaseServerResponseException.java:305)\n    at ca.uhn.fhir.rest.client.impl.BaseClient.invokeClient(BaseClient.java:351)\n    at ca.uhn.fhir.rest.client.impl.GenericClient$BaseClientExecutable.invoke(GenericClient.java:540)\n    at ca.uhn.fhir.rest.client.impl.GenericClient$OperationInternal.execute(GenericClient.java:1314)\n    at ca.uhn.fhir.cli.UploadTerminologyCommand.invokeOperation(UploadTerminologyCommand.java:204)\n    at ca.uhn.fhir.cli.UploadTerminologyCommand.run(UploadTerminologyCommand.java:116)\n    at ca.uhn.fhir.cli.BaseApp.run(BaseApp.java:267)\n    at ca.uhn.fhir.cli.App.main(App.java:43)\n2021-03-25 13:05:49.116 [Thread-0] INFO  ca.uhn.fhir.cli.App HAPI FHIR is shutting down...\n</code></pre></div>\n<p>I'm not sure why it would be looking for a \"concepts.csv\" file, as that isn't part of the release, but I can investigate that further.  Has anyone else seen this, or found a solution?</p>",
        "id": 231801052,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1616679400
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191319\">@James Agnew</span>?</p>",
        "id": 231801347,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1616679511
    },
    {
        "content": "<p>It's supposed to be a file for loading a  Custom Terminoloy</p>",
        "id": 231894236,
        "sender_full_name": "Lin Zhang",
        "timestamp": 1616716451
    },
    {
        "content": "<p>That makes sense.  I shouldn't have used the <code>ADD</code> upload mode parameter, but at the time I hadn't yet found the documentation for it beyond the command 'help upload-terminology' response, which doesn't actually describe the behavior.  I had tried using <code>ADD</code> because without it I had gotten a different error where it failed \"because this search matched 2 resources\":</p>\n<div class=\"codehilite\"><pre><span></span><code>ubuntu@ip-172-30-0-149:~$ ./hapi-fhir-cli upload-terminology -b fhir:fhir -d SnomedCT_InternationalRF2_PRODUCTION_20210131T120000Z.zip -l -t http://localhost:8080/r4 -u http://snomed.info/sct -v r4\nPicked up _JAVA_OPTIONS: -Xmx3g\n------------------------------------------------------------\nðŸ”¥  HAPI FHIR 5.3.0 - Command Line Tool\n------------------------------------------------------------\nProcess ID                      : 4777@ip-172-30-0-149\nMax configured JVM memory (Xmx) : 3.0GB\nDetected Java version           : 11.0.10\n------------------------------------------------------------\n2021-03-26 09:42:06.241 [main] INFO  c.u.f.c.UploadTerminologyCommand Adding ZIP file: SnomedCT_InternationalRF2_PRODUCTION_20210131T120000Z.zip\n2021-03-26 09:42:48.525 [main] INFO  c.u.f.c.UploadTerminologyCommand File size is greater than 10 MB - Going to use a local file reference instead of a direct HTTP transfer. Note that this will only work when executing this command on the same server as the FHIR server itself.\n2021-03-26 09:43:18.45 [main] INFO  c.u.f.c.UploadTerminologyCommand Beginning upload - This may take a while...\n2021-03-26 09:57:26.541 [main] ERROR c.u.f.c.UploadTerminologyCommand Received the following response:\n{\n  &quot;resourceType&quot;: &quot;OperationOutcome&quot;,\n  &quot;text&quot;: {\n    &quot;status&quot;: &quot;generated&quot;,\n    &quot;div&quot;: &quot;&lt;div xmlns=\\&quot;http://www.w3.org/1999/xhtml\\&quot;&gt;&lt;h1&gt;Operation Outcome&lt;/h1&gt;&lt;table border=\\&quot;0\\&quot;&gt;&lt;tr&gt;&lt;td style=\\&quot;font-weight: bold;\\&quot;&gt;ERROR&lt;/td&gt;&lt;td&gt;[]&lt;/td&gt;&lt;td&gt;&lt;pre&gt;Failed to UPDATE resource with match URL &amp;quot;CodeSystem?url=http%3A%2F%2Fsnomed.info%2Fsct&amp;quot; because this search matched 2 resources&lt;/pre&gt;&lt;/td&gt;\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\n\\t\\t\\t&lt;/tr&gt;\\n\\t\\t&lt;/table&gt;\\n\\t&lt;/div&gt;&quot;\n  },\n  &quot;issue&quot;: [ {\n    &quot;severity&quot;: &quot;error&quot;,\n    &quot;code&quot;: &quot;processing&quot;,\n    &quot;diagnostics&quot;: &quot;Failed to UPDATE resource with match URL \\&quot;CodeSystem?url=http%3A%2F%2Fsnomed.info%2Fsct\\&quot; because this search matched 2 resources&quot;\n  } ]\n}\n2021-03-26 09:57:26.634 [main] ERROR ca.uhn.fhir.cli.App Error during execution:\nca.uhn.fhir.rest.server.exceptions.PreconditionFailedException: HTTP 412 : Failed to UPDATE resource with match URL &quot;CodeSystem?url=http%3A%2F%2Fsnomed.info%2Fsct&quot; because this search matched 2 resources\n    at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n    at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)\n    at java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\n    at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:490)\n    at ca.uhn.fhir.rest.server.exceptions.BaseServerResponseException.newInstance(BaseServerResponseException.java:305)\n    at ca.uhn.fhir.rest.client.impl.BaseClient.invokeClient(BaseClient.java:351)\n    at ca.uhn.fhir.rest.client.impl.GenericClient$BaseClientExecutable.invoke(GenericClient.java:540)\n    at ca.uhn.fhir.rest.client.impl.GenericClient$OperationInternal.execute(GenericClient.java:1314)\n    at ca.uhn.fhir.cli.UploadTerminologyCommand.invokeOperation(UploadTerminologyCommand.java:204)\n    at ca.uhn.fhir.cli.UploadTerminologyCommand.run(UploadTerminologyCommand.java:113)\n    at ca.uhn.fhir.cli.BaseApp.run(BaseApp.java:267)\n    at ca.uhn.fhir.cli.App.main(App.java:43)\n2021-03-26 09:57:26.645 [Thread-0] INFO  ca.uhn.fhir.cli.App HAPI FHIR is shutting down...\n</code></pre></div>\n<p>I'm not sure why there were 2 copies of the CodeSystem resource for SNOMED CT, as I don't recall that issue happening any time previously.  But deleting the oldest of the 2 instances seems to have fixed that problem, as after that I was able to successfully upload the Jan 2021 version of the SNOMED CT International Edition (the indexes don't seem to have caught up yet, but I assume that they should soon).</p>",
        "id": 231944327,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1616755445
    }
]