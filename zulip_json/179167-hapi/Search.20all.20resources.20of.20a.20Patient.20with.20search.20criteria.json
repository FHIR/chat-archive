[
    {
        "content": "<p>Hi, I'm looking for a way to search all resources that are linked to a Patient with a specified identifier, but with a way to filter on a list of resource types and profiles.</p>\n<p>At the moment we use the Patient search with the _revinclude parameter for the allowed resource types.</p>\n<p><a href=\"/user_uploads/10155/kZWaCPg0f9xvJ11rNOMiQQfx/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/kZWaCPg0f9xvJ11rNOMiQQfx/image.png\" title=\"image.png\"><img src=\"/user_uploads/10155/kZWaCPg0f9xvJ11rNOMiQQfx/image.png\"></a></div><p>The question is how can we filter out specific profiles? For example I want to have all Condition resources of profile A and not the other profiles.<br>\nIs there also a way to remove the Patient resource itself from the Bundle so we only see the reverse included resources?</p>\n<p>We will look into possible parameters of $everything and investigate the compartment search using GET [base]/Patient/[id]/[type]?parameter(s). But in the meantime does anyone have experience in a similar query?</p>",
        "id": 271430526,
        "sender_full_name": "Brecht Van Vooren",
        "timestamp": 1644499824
    },
    {
        "content": "<p>Someone may correct me, but I don't think there is a way to do what you want all in a single query. </p>\n<p>You can certainly search all Conditions for a single patient that match a profile: <br>\n/Condition?subject=Patient/123&amp;_profile=http://myprofile</p>\n<p>And you can limit Patient$everything to only certain resource types with the _type paramater. </p>\n<p>But I don't see a way to add additional search criteria onto Patient$everything to filter on profile there.</p>",
        "id": 271490598,
        "sender_full_name": "Craig McClendon",
        "timestamp": 1644525383
    },
    {
        "content": "<p>Thanks for your response Craig. I need to specify my question more.</p>\n<p>I don't want to have only the Condition resources of a certain profile, but also AllergyIntolerance of a specified profile like you can see in my example.<br>\nI want to avoid to execute 2 (or more) separate searches: one for Condition with profile X and one for AllergyIntolerance with profile Y, I want it to be a single query where I can specify a list of resource types and fhir profiles. <br>\nAny idea that is possible?</p>",
        "id": 271543898,
        "sender_full_name": "Brecht Van Vooren",
        "timestamp": 1644567973
    },
    {
        "content": "<p>I've never used it in this way, but I think you can submit multiple searches in a single batch Bundle. I don't think there is a way to do it with Patient$everything. see <a href=\"https://hl7.org/fhir/http.html#transaction\">https://hl7.org/fhir/http.html#transaction</a></p>",
        "id": 271630772,
        "sender_full_name": "Craig McClendon",
        "timestamp": 1644610412
    }
]