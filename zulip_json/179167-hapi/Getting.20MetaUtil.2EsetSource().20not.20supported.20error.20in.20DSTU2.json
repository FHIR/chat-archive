[
    {
        "content": "<p>We are getting the following error when trying to retrieve objects from our HAPI DSTU2 vanilla server:<br>\n2020-07-17 12:39:26.205 [http-nio-8080-exec-7] ERROR ca.uhn.fhir.util.MetaUtil [MetaUtil.java:99] MetaUtil.setSource() not supported on FHIR Version DSTU2<br>\n2020-07-17 12:39:26.256 [http-nio-8080-exec-7] INFO  fhirtest.access [LoggingInterceptor.java:175] Path[/fhir] Source[] Operation[read  Observation/118202] UA[Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/83.0.4103.116 Safari/537.36 Edg/83.0.478.64] Params[] ResponseEncoding[XML]</p>\n<p>Our Observation instances that we are creating don't have meta.source:</p>\n<p>{<br>\n    \"resourceType\": \"Observation\",<br>\n        \"meta\": {<br>\n        \"tag\": [<br>\n            {<br>\n                \"system\": \"<a href=\"http://www.medstarhealth.org\">http://www.medstarhealth.org</a>\",<br>\n                \"code\": \"deidentified_transfusion\",<br>\n                \"display\": \"deidentified_transfusion\"<br>\n            }<br>\n        ]<br>\n    },<br>\n    \"category\": {<br>\n        \"coding\": [<br>\n            {<br>\n                \"system\": \"<a href=\"http://terminology.hl7.org/CodeSystem/observation-category\">http://terminology.hl7.org/CodeSystem/observation-category</a>\",<br>\n                \"code\": \"vital-signs\",<br>\n                \"display\": \"Vital Signs\"<br>\n            }<br>\n        ],<br>\n        \"text\": \"Vital Signs\"<br>\n    },<br>\n    \"code\": {<br>\n        \"coding\": [<br>\n            {<br>\n                \"system\": \"<a href=\"http://loinc.org\">http://loinc.org</a>\",<br>\n                \"code\": \"59408-5\",<br>\n                \"display\": \"Oxygen saturation in Arterial blood by Pulse oximetry\"<br>\n            }<br>\n        ],<br>\n        \"text\": \"oxygen_saturation\"<br>\n    },<br>\n    \"subject\": {<br>\n        \"reference\": \"Patient/Pat11630204\"<br>\n    },<br>\n    \"encounter\": {<br>\n        \"reference\": \"Encounter/Enc156258930\"<br>\n    },<br>\n    \"effectiveDateTime\": \"2019-01-03T07:10:00\",<br>\n    \"issued\": \"2019-01-03T07:10:00\",<br>\n    \"valueQuantity\" : {<br>\n    \"value\" : 99.0,<br>\n    \"unit\" : \"%O2\",<br>\n    \"system\" : \"<a href=\"http://unitsofmeasure.org\">http://unitsofmeasure.org</a>\",<br>\n    \"code\" : \"%\"<br>\n  }<br>\n}</p>\n<p>So this seems to be a bug in HAPI?  I did a code search and the only thing I could find is line 964 in ca.uhn.fhir.jpa.dao.BaseHapiFhirDao.java makes that call in the public &lt;R extends IBaseResource&gt; R toResource(Class&lt;R&gt; theResourceType, IBaseResourceEntity theEntity, Collection&lt;ResourceTag&gt; theTagList, boolean theForHistoryOperation) method.</p>",
        "id": 204212626,
        "sender_full_name": "Jean Duteau",
        "timestamp": 1594996281
    }
]