[
    {
        "content": "<p>Hello! </p>\n<p>I am newer to the HAPI world and am having some issues with the JPA-starter server(HAPI 5.6.0) validating codes against a custom created valueset. The valueset and codesystem are inside a package I have stored on Github and loaded in the application.yaml. For reference the valueset/codesystem can be found here: <a href=\"https://github.com/kind-lab/fhir-packages/tree/mimic-package-0.1.0/terminology\">https://github.com/kind-lab/fhir-packages/tree/mimic-package-0.1.0/terminology</a></p>\n<p>I am getting the following error when validating my Encounter profile:</p>\n<p>\"The code provided (<a href=\"http://fhir.mimic.mit.edu/CodeSystem/admission-class#URGENT\">http://fhir.mimic.mit.edu/CodeSystem/admission-class#URGENT</a>) is not in the value set <a href=\"http://mimic.fhir.mit.edu/ValueSet/admission-class\">http://mimic.fhir.mit.edu/ValueSet/admission-class</a>, and a code from this value set is required: Unable to validate code <a href=\"http://fhir.mimic.mit.edu/CodeSystem/admission-class#URGENT-\">http://fhir.mimic.mit.edu/CodeSystem/admission-class#URGENT-</a> Unknown code <a href=\"http://fhir.mimic.mit.edu/CodeSystem/admission-class#URGENT\">http://fhir.mimic.mit.edu/CodeSystem/admission-class#URGENT</a>. Code validation occurred using a ValueSet expansion that was pre-calculated at 2022-01-26T10:22:22.613-05:00 (00:02:14 ago)\"</p>\n<p>I’ve tried a couple things to troubleshoot</p>\n<ul>\n<li>Ran <code>$validate-code</code> against the codesystem and that worked fine</li>\n<li>Ran <code>$validate-code</code> against the valueset and it tossed an error:<ul>\n<li>\"The FHIR endpoint on this server does not know how to handle GET<br>\noperation[ValueSet/admission-class/$validate-code] with parameters [[code]]\"</li>\n</ul>\n</li>\n</ul>\n<p>Any ideas why the validation isn’t working with the custom ValueSet?</p>",
        "id": 269591295,
        "sender_full_name": "Alex Bennett",
        "timestamp": 1643298302
    },
    {
        "content": "<p>does the standalone validator validate it successfully?</p>",
        "id": 269622094,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1643310517
    },
    {
        "content": "<p>Just tested and it does not. Looks like it cannot find/understand the URI. The error message was:</p>\n<ul>\n<li>Information @ Encounter.class (line 1, col323): Code System URI '<a href=\"http://fhir.mimic.mit.edu/CodeSystem/admission-class\">http://fhir.mimic.mit.edu/CodeSystem/admission-class</a>' is unknown so the code cannot be validated</li>\n</ul>\n<p>I validated against the tarball file locally with the command: </p>\n<ul>\n<li>java -jar validator_cli.jar encounter.json -version 4.0 -ig mimic-0.1.2.tgz</li>\n</ul>\n<p>My canonical URL is set to <a href=\"http://fhir.mimic.mit.edu\">http://fhir.mimic.mit.edu</a> and the CodeSystem is inside the package. Any ideas?</p>",
        "id": 269643362,
        "sender_full_name": "Alex Bennett",
        "timestamp": 1643320071
    },
    {
        "content": "<p>send me the package and instance and I'll have a look, I guess</p>",
        "id": 269645932,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1643320921
    },
    {
        "content": "<p>Here are the instance and package. Thanks so much for the help!<br>\n<a href=\"/user_uploads/10155/Ld7XmN2amKc_bLMVyo8U0eiN/encounter.json\">encounter.json</a> <a href=\"/user_uploads/10155/hHP_zfNmiX6eP0kVZ0PrcBuf/mimic-0.1.2.tgz\">mimic-0.1.2.tgz</a></p>",
        "id": 269745924,
        "sender_full_name": "Alex Bennett",
        "timestamp": 1643380941
    },
    {
        "content": "<p><a href=\"http://mimic.fhir.mit.edu/CodeSystem/admission-class\">http://mimic.fhir.mit.edu/CodeSystem/admission-class</a> vs <a href=\"http://fhir.mimic.mit.edu/CodeSystem/admission-class\">http://fhir.mimic.mit.edu/CodeSystem/admission-class</a></p>",
        "id": 269783935,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1643395835
    },
    {
        "content": "<p>Yup that's it! I knew it was something simple. I appreciate you taking the time to find the typo.</p>",
        "id": 269788357,
        "sender_full_name": "Alex Bennett",
        "timestamp": 1643397609
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"407800\">Alex Bennett</span> has marked this topic as resolved.</p>",
        "id": 269789549,
        "sender_full_name": "Notification Bot",
        "timestamp": 1643398194
    }
]