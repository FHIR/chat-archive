[
    {
        "content": "<p>I am trying to update to HAPI 4.2.0 from HAPI 4.1.0 .  Currently I have the example from the documentation in my test case:</p>\n<div class=\"codehilite\"><pre><span></span>    Bundle results = ourClient\n              .search()\n              .forResource(Patient.class)\n              .where(Patient.FAMILY.matches().value(&quot;duck&quot;))\n              .returnBundle(Bundle.class)\n              .execute();\n</pre></div>\n\n\n<p>My client search tests work in 4.1.0 but fail in 4.2.0 with a \"HTTP 500 Server Error: Column 'SEARCH_LAST_RETURNED'  cannot accept a NULL value.\".  </p>\n<p>Is there anything I am doing wrong?</p>\n<p>Here is the stack trace:</p>\n<p>ca.uhn.fhir.rest.server.exceptions.InternalErrorException: HTTP 500 Server Error: Column 'SEARCH_LAST_RETURNED'  cannot accept a NULL value.<br>\n    at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)<br>\n    at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)<br>\n    at java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)<br>\n    at java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:500)<br>\n    at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:481)<br>\n    at ca.uhn.fhir.rest.server.exceptions.BaseServerResponseException.newInstance(BaseServerResponseException.java:302)<br>\n    at ca.uhn.fhir.rest.client.impl.BaseClient.invokeClient(BaseClient.java:349)<br>\n    at ca.uhn.fhir.rest.client.impl.GenericClient$BaseClientExecutable.invoke(GenericClient.java:434)<br>\n    at ca.uhn.fhir.rest.client.impl.GenericClient$SearchInternal.execute(GenericClient.java:1838)...</p>",
        "id": 189162857,
        "sender_full_name": "Hershil Patel",
        "timestamp": 1582753494
    },
    {
        "content": "<p>Hi Hershil,</p>\n<p>Can you try running the migrator tool? <a href=\"https://hapifhir.io/hapi-fhir/docs/server_jpa/upgrading.html\" target=\"_blank\" title=\"https://hapifhir.io/hapi-fhir/docs/server_jpa/upgrading.html\">https://hapifhir.io/hapi-fhir/docs/server_jpa/upgrading.html</a> What does the output look like?</p>",
        "id": 189203259,
        "sender_full_name": "James Agnew",
        "timestamp": 1582800675
    },
    {
        "content": "<p>I am using derby, but I ended up deleting and recreating the database and that fixed it! Thanks for your help</p>",
        "id": 189330916,
        "sender_full_name": "Hershil Patel",
        "timestamp": 1582910831
    }
]