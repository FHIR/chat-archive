[
    {
        "content": "<p>Hi <span class=\"user-mention\" data-user-id=\"191319\">@James Agnew</span> , I see you're doing a bunch of work on the validator code at the moment.  I've just run into an issue where the character  &#x1D;  turns up in a CodeSystem.  This is illegal in XML 1.0 but ok in XML 1.1.  Unfortunately, <code>FhirValidator.validateWithResult</code> (HAPI 4.2.0) uses XML 1.0 when it serialises to XML (<code>XmlParser.doEncodeResourceToWriter</code>) which then fails.</p>",
        "id": 190782073,
        "sender_full_name": "Michael Lawley",
        "timestamp": 1584393906
    },
    {
        "content": "<p>Hmm.. <span class=\"user-mention\" data-user-id=\"191343\">@Michael Lawley</span> any idea how I could replicate this problem?</p>",
        "id": 190857048,
        "sender_full_name": "James Agnew",
        "timestamp": 1584456184
    },
    {
        "content": "<p>If you parse the following and pass it to <code>FhirValidator.validateWithResult</code> with just the Schema validator enabled, then that should trigger it.</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"cp\">&lt;?xml version=&quot;1.1&quot; encoding=&quot;UTF-8&quot;?&gt;</span>\n\n<span class=\"nt\">&lt;Parameters</span> <span class=\"na\">xmlns=</span><span class=\"s\">&quot;http://hl7.org/fhir&quot;</span><span class=\"nt\">&gt;</span>\n  <span class=\"nt\">&lt;parameter&gt;</span>\n    <span class=\"nt\">&lt;name</span> <span class=\"na\">value=</span><span class=\"s\">&quot;bug&quot;</span><span class=\"nt\">/&gt;</span>\n    <span class=\"nt\">&lt;valueString</span> <span class=\"na\">value=</span><span class=\"s\">&quot;Example,&amp;#x1D; problem character.&quot;</span><span class=\"nt\">/&gt;</span>\n  <span class=\"nt\">&lt;/parameter&gt;</span>\n<span class=\"nt\">&lt;/Parameters&gt;</span>\n</pre></div>",
        "id": 190858189,
        "sender_full_name": "Michael Lawley",
        "timestamp": 1584456620
    },
    {
        "content": "<p>it should be &#x001D;</p>",
        "id": 190893016,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1584470355
    },
    {
        "content": "<p>oh interesting.... do people still use the schema validator much? i assumed not.. i've been vaguely pondering whether to deprecate it in HAPI, given how much better the instance validator is</p>",
        "id": 190906821,
        "sender_full_name": "James Agnew",
        "timestamp": 1584477034
    },
    {
        "content": "<p>(not that i disagree with fixing this.. just wondering)</p>",
        "id": 190906843,
        "sender_full_name": "James Agnew",
        "timestamp": 1584477045
    },
    {
        "content": "<p>I'm not sure that the schema validator picks this up. the instance validator will from now on</p>",
        "id": 190908422,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1584477949
    },
    {
        "content": "<p>We have two paths for validation.  \"Full\" validation and \"fast\" validation.  I've been working on the, unmeasured but observed, notion that schema validation is much faster and \"good enough\" to ensure that egregious errors will be handled before we start attempting to handle $expand semantics etc.</p>\n<p>It's been on my list to circle back and validate (rimshot) this assumption, but I've been delaying as I'm aware there are changes coming down the pipeline (and <strong>now</strong> I've just read your HAPI 5 post, so I'm super super excited)</p>",
        "id": 190983762,
        "sender_full_name": "Michael Lawley",
        "timestamp": 1584540211
    },
    {
        "content": "<p>I'm interested in metrics. making the validator faster is of interest</p>",
        "id": 191033480,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1584561289
    }
]