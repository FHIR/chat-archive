[
    {
        "content": "<p>I am using JPA starter to handle FHIR CRUD and search requests.    <br>\nMy problem is that search requests with _include and _revinclude parameters do not return the resources referenced by EnrollmentRequest in the request response Bundle.   </p>\n<p>For reference there are 2 EnrollmentRequest resources in my test FHIR db. </p>\n<p>My search request is;</p>\n<div class=\"codehilite\" data-code-language=\"val\"><pre><span></span><code>      .search()\n      .forResource(classOf[EnrollmentRequest])\n      .include(new Include(\"EnrollmentRequest:*\", true))\n      .revInclude(new Include(\"Provenance:target\"))\n      .returnBundle(classOf[Bundle])\n      .execute() ```\n\nThe expected search parameters are generated;    ?_include%3Aiterate=EnrollmentRequest%3A*&amp;_revinclude=Provenance%3Atarget\n          \"link\" : [\n            {\n              \"relation\" : \"self\",\n              \"url\" : \"http://fhir-server:8011/fhir/f5f48a7b-c1ce-40e6-88e7-bf9c13785b07/EnrollmentRequest?_include%3Aiterate=EnrollmentRequest%3A*&amp;_revinclude=Provenance%3Atarget\"\n            }\n          ],\n\n\nSearchBuilder logs indicate that the referenced resources (1 patient, 1 coverage, 2 coverage) for each of the 2 EnrollmentRequest stored in the FHIR db.\n022-02-28 16:52:04.966 [http-nio-8080-exec-10] INFO  c.u.f.j.search.builder.SearchBuilder [SearchBuilder.java:966] Loaded 2 _revincludes in 1 rounds and 11 ms for search 93515fa3-3754-4e2f-88e9-8b9b854fe9b0\n2022-02-28 16:52:04.983 [http-nio-8080-exec-10] INFO  c.u.f.j.search.builder.SearchBuilder [SearchBuilder.java:966] Loaded 8 _includes in 3 rounds and 17 ms for search 93515fa3-3754-4e2f-88e9-8b9b854fe9b0\n\n2022-02-28 16:52:05.303 [http-nio-8080-exec-10] INFO  fhirtest.access [LoggingInterceptor.java:175] Path[/fhir] Source[] Operation[search-type  EnrollmentRequest] UA[HAPI-FHIR/5.5.1 (FHIR Client; FHIR 4.0.1/R4; apache)] Params[?_include%3Aiterate=EnrollmentRequest%3A*&amp;_revinclude=Provenance%3Atarget] ResponseEncoding[JSON] Operation[search-type  EnrollmentRequest] UA[HAPI-FHIR/5.5.1 (FHIR Client; FHIR 4.0.1/R4; apache)] Params[?_include%3Aiterate=EnrollmentRequest%3A*&amp;_revinclude=Provenance%3Atarget] ResponseEncoding[JSON]\n\nFinally when I curl  &lt;base&gt;/&lt;partition&gt;/EnrollmentRequest/_search?_include=EnrollmentRequest%3A*&amp;_revinclude=Provenance%3Atarget\nthe response does includes the expected  referenced resources(Patient, Coverage, Organization resources).\n\nAny direction appreciated.\n</code></pre></div>",
        "id": 273522066,
        "sender_full_name": "Gordon Wilkinson",
        "timestamp": 1646068240
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"453879\">Gordon Wilkinson</span> has marked this topic as unresolved.</p>",
        "id": 275748073,
        "sender_full_name": "Notification Bot",
        "timestamp": 1647564910
    }
]