[
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191319\">@James Agnew</span> Reading <a href=\"http://hapifhir.io/doc_validation.html\" target=\"_blank\" title=\"http://hapifhir.io/doc_validation.html\">http://hapifhir.io/doc_validation.html</a> I don't see any mention of using the <code>$validate</code> operation. Is it the case that users can POST a StructureDefinition to a HAPI server and then <code>$validate</code> new content against it? Is there a write-up anywhere of how this should work?</p>",
        "id": 153844306,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1471530283
    },
    {
        "content": "<p>Hi <span class=\"user-mention\" data-user-id=\"191315\">@Josh Mandel</span> ,</p>\n<p>Yeah, really nothing about the public server is documented very well at this point.</p>\n<p>What you're describing should work though. Basically when validating a resource, if the validator needs any profile resources (StructureDefinitions, ValueSets, etc.) it will look for them first in the ones that are bundled with HAPI (basically all of the ones that also come in the validator pack from the spec) and then looks in the local database.</p>",
        "id": 153845233,
        "sender_full_name": "James Agnew",
        "timestamp": 1472211061
    },
    {
        "content": "<p>James, did you know that we have used HAPI as an example validator behind Simplifier at the moment?</p>",
        "id": 153846056,
        "sender_full_name": "Martijn Harthoorn",
        "timestamp": 1472719238
    },
    {
        "content": "<p>Sure did! I've had some conversations about Peter Hendricks about it... Although I haven't seen it in action yet :)</p>",
        "id": 153846094,
        "sender_full_name": "James Agnew",
        "timestamp": 1472747635
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191319\">@James Agnew</span> when I try to validate <a href=\"https://gist.github.com/anonymous/2949b5068cc03bf729cdaa26ca6ac1af\" target=\"_blank\" title=\"https://gist.github.com/anonymous/2949b5068cc03bf729cdaa26ca6ac1af\">this document</a> (and, well, any document-type bundle I can come up with) in the validator at <a href=\"https://fhirtest.uhn.ca/validate\" target=\"_blank\" title=\"https://fhirtest.uhn.ca/validate\">https://fhirtest.uhn.ca/validate</a>, I get </p>\n<div class=\"codehilite\"><pre><span></span>{\n  &quot;resourceType&quot;: &quot;OperationOutcome&quot;,\n  &quot;text&quot;: {\n    &quot;status&quot;: &quot;generated&quot;,\n    &quot;div&quot;: &quot;&lt;div xmlns=\\&quot;http://www.w3.org/1999/xhtml\\&quot;&gt;&lt;h1&gt;Operation Outcome&lt;/h1&gt;&lt;table border=\\&quot;0\\&quot;&gt;&lt;tr&gt;&lt;td style=\\&quot;font-weight: bold;\\&quot;&gt;error&lt;/td&gt;&lt;td&gt;[]&lt;/td&gt;&lt;td&gt;&lt;pre&gt;Unexpected failure while validating resource&lt;/pre&gt;&lt;/td&gt;\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\n\\t\\t\\t&lt;/tr&gt;\\n\\t\\t&lt;/table&gt;\\n\\t&lt;/div&gt;&quot;\n  },\n  &quot;issue&quot;: [\n    {\n      &quot;severity&quot;: &quot;error&quot;,\n      &quot;code&quot;: &quot;processing&quot;,\n      &quot;diagnostics&quot;: &quot;Unexpected failure while validating resource&quot;\n    }\n  ]\n}\n</pre></div>\n\n\n<p>Is this a known issue?</p>",
        "id": 153847489,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1474052319
    },
    {
        "content": "<p>Hey <span class=\"user-mention\" data-user-id=\"191315\">@Josh Mandel</span> just catching up on Zulip. Yup, this was a bug in the validator. Looks like it's fixed already in RI SVN, so I'm copying that fix over now.</p>\n<p>Validating it now gives lots of other interesting errors, but they all appear to be legitimate, at least at a quick glance.</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"p\">{</span>\n  <span class=\"nt\">&quot;resourceType&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;OperationOutcome&quot;</span><span class=\"p\">,</span>\n  <span class=\"nt\">&quot;issue&quot;</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n    <span class=\"p\">{</span>\n      <span class=\"nt\">&quot;severity&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;error&quot;</span><span class=\"p\">,</span>\n      <span class=\"nt\">&quot;code&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;processing&quot;</span><span class=\"p\">,</span>\n      <span class=\"nt\">&quot;diagnostics&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;Unable to resolve the target of the reference in the bundle (Composition Subject)&quot;</span><span class=\"p\">,</span>\n      <span class=\"nt\">&quot;location&quot;</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n        <span class=\"s2\">&quot;Bundle.entry[0].resource.resource.subject.reference&quot;</span>\n      <span class=\"p\">]</span>\n    <span class=\"p\">},</span>\n    <span class=\"p\">{</span>\n      <span class=\"nt\">&quot;severity&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;error&quot;</span><span class=\"p\">,</span>\n      <span class=\"nt\">&quot;code&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;processing&quot;</span><span class=\"p\">,</span>\n      <span class=\"nt\">&quot;diagnostics&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;Relative Reference appears inside Bundle whose entry is missing a fullUrl&quot;</span><span class=\"p\">,</span>\n      <span class=\"nt\">&quot;location&quot;</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n        <span class=\"s2\">&quot;Bundle.entry:0&quot;</span>\n      <span class=\"p\">]</span>\n    <span class=\"p\">},</span>\n    <span class=\"p\">{</span>\n      <span class=\"nt\">&quot;severity&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;error&quot;</span><span class=\"p\">,</span>\n      <span class=\"nt\">&quot;code&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;processing&quot;</span><span class=\"p\">,</span>\n      <span class=\"nt\">&quot;diagnostics&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;The fullUrl element must be present when a resource is present, and not present otherwise [fullUrl.empty() xor resource.exists()]&quot;</span><span class=\"p\">,</span>\n      <span class=\"nt\">&quot;location&quot;</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n        <span class=\"s2\">&quot;Bundle.entry&quot;</span>\n      <span class=\"p\">]</span>\n    <span class=\"p\">},</span>\n    <span class=\"p\">{</span>\n      <span class=\"nt\">&quot;severity&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;error&quot;</span><span class=\"p\">,</span>\n      <span class=\"nt\">&quot;code&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;processing&quot;</span><span class=\"p\">,</span>\n      <span class=\"nt\">&quot;diagnostics&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;Resource requires an id, but none is present&quot;</span><span class=\"p\">,</span>\n      <span class=\"nt\">&quot;location&quot;</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n        <span class=\"s2\">&quot;Bundle.entry.resource&quot;</span>\n      <span class=\"p\">]</span>\n    <span class=\"p\">},</span>\n    <span class=\"p\">{</span>\n      <span class=\"nt\">&quot;severity&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;warning&quot;</span><span class=\"p\">,</span>\n      <span class=\"nt\">&quot;code&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;processing&quot;</span><span class=\"p\">,</span>\n      <span class=\"nt\">&quot;diagnostics&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;Error unable to find code system http://loinc.org validating CodeableConcept&quot;</span><span class=\"p\">,</span>\n      <span class=\"nt\">&quot;location&quot;</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n        <span class=\"s2\">&quot;Bundle.entry.resource.type&quot;</span>\n      <span class=\"p\">]</span>\n    <span class=\"p\">},</span>\n    <span class=\"p\">{</span>\n      <span class=\"nt\">&quot;severity&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;error&quot;</span><span class=\"p\">,</span>\n      <span class=\"nt\">&quot;code&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;processing&quot;</span><span class=\"p\">,</span>\n      <span class=\"nt\">&quot;diagnostics&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;Bundle entry missing fullUrl&quot;</span><span class=\"p\">,</span>\n      <span class=\"nt\">&quot;location&quot;</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n        <span class=\"s2\">&quot;Bundle.entry&quot;</span>\n      <span class=\"p\">]</span>\n    <span class=\"p\">},</span>\n    <span class=\"p\">{</span>\n      <span class=\"nt\">&quot;severity&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;error&quot;</span><span class=\"p\">,</span>\n      <span class=\"nt\">&quot;code&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;processing&quot;</span><span class=\"p\">,</span>\n      <span class=\"nt\">&quot;diagnostics&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;Relative Reference appears inside Bundle whose entry is missing a fullUrl&quot;</span><span class=\"p\">,</span>\n      <span class=\"nt\">&quot;location&quot;</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n        <span class=\"s2\">&quot;Bundle.entry.resource.subject&quot;</span>\n      <span class=\"p\">]</span>\n    <span class=\"p\">},</span>\n    <span class=\"p\">{</span>\n      <span class=\"nt\">&quot;severity&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;error&quot;</span><span class=\"p\">,</span>\n      <span class=\"nt\">&quot;code&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;processing&quot;</span><span class=\"p\">,</span>\n      <span class=\"nt\">&quot;diagnostics&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;Bundle entry missing fullUrl&quot;</span><span class=\"p\">,</span>\n      <span class=\"nt\">&quot;location&quot;</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n        <span class=\"s2\">&quot;Bundle.entry&quot;</span>\n      <span class=\"p\">]</span>\n    <span class=\"p\">},</span>\n    <span class=\"p\">{</span>\n      <span class=\"nt\">&quot;severity&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;error&quot;</span><span class=\"p\">,</span>\n      <span class=\"nt\">&quot;code&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;processing&quot;</span><span class=\"p\">,</span>\n      <span class=\"nt\">&quot;diagnostics&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;Relative Reference appears inside Bundle whose entry is missing a fullUrl&quot;</span><span class=\"p\">,</span>\n      <span class=\"nt\">&quot;location&quot;</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n        <span class=\"s2\">&quot;Bundle.entry.resource.subject&quot;</span>\n      <span class=\"p\">]</span>\n    <span class=\"p\">}</span>\n  <span class=\"p\">]</span>\n<span class=\"p\">}</span><span class=\"err\">```</span>\n</pre></div>",
        "id": 153850947,
        "sender_full_name": "James Agnew",
        "timestamp": 1475012639
    }
]