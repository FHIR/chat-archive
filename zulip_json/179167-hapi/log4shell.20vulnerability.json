[
    {
        "content": "<p>A critical vulnerability in the Java logging library log4j was just discovered: <a href=\"https://snyk.io/blog/log4j-rce-log4shell-vulnerability-cve-2021-4428\">CVE-2021-4428 aka log4shell</a>. This library is also used in HAPI and <a href=\"https://github.com/hapifhir/hapi-fhir/issues/3238\">a GitHub ticket was already created</a>.  Are you able to estimate how long it will take for a patched version of HAPI will be released? Also, is there any HAPI-specific advice for users (beyond the <a href=\"https://github.com/advisories/GHSA-jfh8-c2jp-5v3q\">generic guidance for dealing with this vulnerability</a>)?</p>",
        "id": 264624734,
        "sender_full_name": "Morten Ernebjerg",
        "timestamp": 1639317443
    },
    {
        "content": "<p>All good: <a href=\"https://www.smilecdr.com/our-blog/a-statement-on-log4shell-cve-2021-44228\">https://www.smilecdr.com/our-blog/a-statement-on-log4shell-cve-2021-44228</a></p>",
        "id": 264624805,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1639317544
    },
    {
        "content": "<p>Thanks, good to know <span aria-label=\"sweat smile\" class=\"emoji emoji-1f605\" role=\"img\" title=\"sweat smile\">:sweat_smile:</span> I was looking at <a href=\"https://search.maven.org/artifact/ca.uhn.hapi.fhir/hapi-fhir/5.6.1/pom\">the POM file for the latest release</a> and there log4j still appears. </p>\n<p>Might any of the previous HAPI/JPA starter releases affected?</p>",
        "id": 264625156,
        "sender_full_name": "Morten Ernebjerg",
        "timestamp": 1639317942
    },
    {
        "content": "<p>JpaStarter used logback from the beginning (the log4j libraries are only included for compatibility). So if you didnâ€˜t change that to Log4J  you should be good</p>",
        "id": 264625327,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1639318160
    },
    {
        "content": "<p>Would still be nice to bump the \"pseudo-dependency\" in HAPI to the patched version to avoid the vulnerable version showing up on the list of dependencies when using HAPI (which is what I saw).</p>",
        "id": 264641175,
        "sender_full_name": "Morten Ernebjerg",
        "timestamp": 1639339663
    },
    {
        "content": "<p>I thought about it in starter project</p>",
        "id": 264641234,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1639339710
    },
    {
        "content": "<p>Would b one less worry in the dependency jungle <span aria-label=\"grinning\" class=\"emoji emoji-1f600\" role=\"img\" title=\"grinning\">:grinning:</span></p>",
        "id": 264641756,
        "sender_full_name": "Morten Ernebjerg",
        "timestamp": 1639340519
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"194703\">Morten Ernebjerg</span> <a href=\"#narrow/stream/179167-hapi/topic/log4shell.20vulnerability/near/264641175\">said</a>:</p>\n<blockquote>\n<p>Would still be nice to bump the \"pseudo-dependency\" in HAPI to the patched version to avoid the vulnerable version showing up on the list of dependencies when using HAPI (which is what I saw).</p>\n</blockquote>\n<p>just created <a href=\"https://github.com/hapifhir/hapi-fhir/pull/3240\">https://github.com/hapifhir/hapi-fhir/pull/3240</a></p>",
        "id": 264644913,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1639345005
    },
    {
        "content": "<p>and its already merged. Thanks <span class=\"user-mention\" data-user-id=\"191319\">@James Agnew</span> !</p>",
        "id": 264694540,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1639395786
    },
    {
        "content": "<p>FYI to anyone looking for more detail on why we're ok (a few people have asked for more detail on the blog post, I'm doing that today)</p>\n<p>The general gist is that we only include log4j-api because Hibernate needs it. Hibernate's logging uses log4j (via log4j-api and then slf4j-over-log4j) and is therefore technically going through the vulnerable codebase. But Hibernate doesn't log any user-supplied messages in the way that HAPI FHIR uses it. So it would not be possible to exploit this vulnerability.</p>\n<p>Outside of hibernate, all logging we do goes through directly through slf4j and therefore skips log4j entirely.</p>",
        "id": 264730271,
        "sender_full_name": "James Agnew",
        "timestamp": 1639412303
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191319\">@James Agnew</span>  I don't think log4j-api is vulnerable - it's log4j-core that is vulnerable, AFAIK.</p>",
        "id": 264753910,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1639422050
    },
    {
        "content": "<p>ah interesting <span class=\"user-mention\" data-user-id=\"191427\">@Jens Villadsen</span> - When I looked at the CVE writeup on Monday it specifically called out both <code>log4j-api</code> and <code>log4j-core</code> as being vulnerable.</p>\n<p>That doesn't seem to be the case anymore, and the actual commit that fixes this only touches log4j-core: <a href=\"https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=001aaad\">https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=001aaad</a></p>",
        "id": 264896513,
        "sender_full_name": "James Agnew",
        "timestamp": 1639503862
    },
    {
        "content": "<p>Yep</p>",
        "id": 264897887,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1639504340
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191319\">@James Agnew</span> while I have your attention ... -&gt; you might wan't to update this: <a href=\"https://hapifhir.io/hapi-fhir/blog/\">https://hapifhir.io/hapi-fhir/blog/</a> as it is a bit outdated</p>",
        "id": 264929136,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1639517833
    },
    {
        "content": "<p>History repeating: The fix in log4j v2.15 was incomplete cf. <a href=\"https://www.cve.org/CVERecord?id=CVE-2021-45046\">CVE-2021-45046</a>. So 2.16 is the new 2.15 - <span class=\"user-mention\" data-user-id=\"191451\">@Patrick Werner</span> looks like another bump is needed to avoid red lights flashing....</p>",
        "id": 264973625,
        "sender_full_name": "Morten Ernebjerg",
        "timestamp": 1639553522
    },
    {
        "content": "<p>(assuming HAPI is at all affected)</p>",
        "id": 264973823,
        "sender_full_name": "Morten Ernebjerg",
        "timestamp": 1639553698
    },
    {
        "content": "<p>It aint</p>",
        "id": 264973841,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1639553720
    },
    {
        "content": "<p>HAPI uses logback</p>",
        "id": 264973856,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1639553737
    },
    {
        "content": "<p>Some people are alerted seeing log4j-api versions &lt; 2.16 in dependency, some CVE checkers are failing as well. I don't see harm in bumping the version to the latest, agreeing that this is an placebo.</p>",
        "id": 264979793,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1639558271
    },
    {
        "content": "<p><a href=\"https://jira.qos.ch/browse/LOGBACK-1591\">https://jira.qos.ch/browse/LOGBACK-1591</a><br>\nNewest logback removes JNDI and JDBC functions to mitigate a theoretical attack vector.</p>",
        "id": 264980015,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1639558407
    },
    {
        "content": "<p><a href=\"https://github.com/hapifhir/hapi-fhir/pull/3248\">https://github.com/hapifhir/hapi-fhir/pull/3248</a></p>\n<ul>\n<li>bumps log4j-to-slf4j</li>\n<li>update logback to newest version</li>\n</ul>",
        "id": 264980048,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1639558435
    },
    {
        "content": "<p>There will always be someones CVE checker tool out there that fails</p>",
        "id": 264981126,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1639559113
    },
    {
        "content": "<p>I personally totally agree with your point. Unfortunately i know to many users of hapi which are irritated by seeing smth with log4j in the project.</p>",
        "id": 264981419,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1639559286
    },
    {
        "content": "<p>Right, lowering expectable developer stress is a worthy cause, even if it is unfounded <span aria-label=\"wink\" class=\"emoji emoji-1f609\" role=\"img\" title=\"wink\">:wink:</span></p>",
        "id": 265007041,
        "sender_full_name": "Morten Ernebjerg",
        "timestamp": 1639573791
    },
    {
        "content": "<p>Yeah for sure I have no issues with bumping the log4j version even if it's unnecessary. If we're causing CVE checkers to flash, that's annoying stress for people using the library.</p>",
        "id": 265153368,
        "sender_full_name": "James Agnew",
        "timestamp": 1639660615
    }
]