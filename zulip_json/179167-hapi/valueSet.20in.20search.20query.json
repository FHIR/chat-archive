[
    {
        "content": "<p>I'm trying to query resources based on a valueSet.<br>\nTherefore I'm using following request:<br>\n<a href=\"http://hapi.fhir.org/baseR4/Observation?code:in=http://hapi.fhir.org/baseR4/ValueSet/1160250\">http://hapi.fhir.org/baseR4/Observation?code:in=http://hapi.fhir.org/baseR4/ValueSet/1160250</a></p>\n<p>but I'm getting Unknown ValueSet: http%3A%2F%2Fhapi.fhir.org%2FbaseR4%2FValueSet%2F1160250</p>\n<p>But the valueSet exists. And matching FHIR resources also exist.<br>\nI tried the same with condition resource against an DSTU3 version, and it also does not work.<br>\nThere I did not receive an error, but the result was not filtered according to the valueSet.</p>\n<p>Do I have a wrong understanding?<br>\nIs it possible to query for resources with a valueSet like it is describe here: <a href=\"https://www.hl7.org/fhir/search.html\">https://www.hl7.org/fhir/search.html</a> ?</p>",
        "id": 233603404,
        "sender_full_name": "Moritz Kähler",
        "timestamp": 1617859477
    },
    {
        "content": "<p>(deleted)</p>",
        "id": 233603416,
        "sender_full_name": "Moritz Kähler",
        "timestamp": 1617859488
    },
    {
        "content": "<p>does someone else face this problem?</p>",
        "id": 234146160,
        "sender_full_name": "Moritz Kähler",
        "timestamp": 1618229355
    },
    {
        "content": "<p>Hi <span class=\"user-mention\" data-user-id=\"355911\">@Moritz Kähler</span>, from your query it looks like you are using a literal reference to your ValueSet. You could try using a logical reference and use the canonical that's in ValueSet.url. That should work.</p>",
        "id": 234305846,
        "sender_full_name": "Julian Sass",
        "timestamp": 1618312047
    },
    {
        "content": "<p>Thanks for you answer, but somehow it does not work.<br>\nWhen using the canonical, I don't get an error, but it does not work as expected.</p>\n<p>When I run following query<br>\n<a href=\"http://hapi.fhir.org/baseR4/Observation?code:in=http://hl7.org/fhir/ValueSet/observation-vitalsignresult\">http://hapi.fhir.org/baseR4/Observation?code:in=http://hl7.org/fhir/ValueSet/observation-vitalsignresult</a><br>\nI get an empty result.<br>\nBut following query returns a result:<br>\n<a href=\"http://hapi.fhir.org/baseR4/Observation?code=8302-2\">http://hapi.fhir.org/baseR4/Observation?code=8302-2</a><br>\nAnd the code 8302-2 is part of the valueSet observation-vitalsignresult.<br>\nSo the first query should not return an empty result.</p>",
        "id": 234457192,
        "sender_full_name": "Moritz Kähler",
        "timestamp": 1618387185
    },
    {
        "content": "<p>It you query the ValueSet, it is definitely there:<br>\n<a href=\"https://hapi.fhir.org/baseR4/ValueSet/observation-vitalsignresult/$expand\">https://hapi.fhir.org/baseR4/ValueSet/observation-vitalsignresult/$expand</a><br>\nAnd, as you did, if you directly query for Observations that use one of the codes in that ValueSet they are there.<br>\nSo, I suspect it's either a HAPI bug or a configuration/setup issue on the public HAPI server?</p>\n<p>I also tried with LOINC since the CodeSystem for it exists but the code:in doesn't.<br>\n<a href=\"https://hapi.fhir.org/baseR4/CodeSystem?url=http://loinc.org\">https://hapi.fhir.org/baseR4/CodeSystem?url=http://loinc.org</a>   (CodeSystem exists)<br>\n<a href=\"https://hapi.fhir.org/baseR4/ValueSet?url=http://loinc.org\">https://hapi.fhir.org/baseR4/ValueSet?url=http://loinc.org</a> (ValueSet doesn't)<br>\n<a href=\"https://hapi.fhir.org/baseR4/Observation?code:in=http://loinc.org\">https://hapi.fhir.org/baseR4/Observation?code:in=http://loinc.org</a>  (doesn't return any Obs)</p>",
        "id": 234480740,
        "sender_full_name": "John Silva",
        "timestamp": 1618398871
    },
    {
        "content": "<p>This issue is already reported here: <a href=\"https://github.com/hapifhir/hapi-fhir/issues/1784\">https://github.com/hapifhir/hapi-fhir/issues/1784</a><br>\nBut this thread is older than one year.</p>",
        "id": 234831977,
        "sender_full_name": "Moritz Kähler",
        "timestamp": 1618569990
    },
    {
        "content": "<p>In Hapi 5.6 this is solved.<br>\nMore details see here: <br>\n<a href=\"#narrow/stream/179167-hapi/topic/code.3Ain\">https://chat.fhir.org/#narrow/stream/179167-hapi/topic/code.3Ain</a></p>",
        "id": 269739039,
        "sender_full_name": "Moritz Kähler",
        "timestamp": 1643378200
    }
]