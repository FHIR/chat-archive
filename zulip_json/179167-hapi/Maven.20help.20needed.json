[
    {
        "content": "<p>Does anyone here understand maven? The maven build for java core is failing because it can't get through the JUnit tests. For now, I just want to turn them off - it's ignoring their pass/fail anyway, so it's just wasting time and CPU</p>",
        "id": 172304010,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1564748933
    },
    {
        "content": "<p>but I can't figure out how to configure this - all the web doco refers to configuration options I can't find anyway.... so I don't know.....</p>",
        "id": 172304034,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1564748969
    },
    {
        "content": "<p>I have to say.... I hate Maven. What an awful thing</p>",
        "id": 172304158,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1564749108
    },
    {
        "content": "<p>you just want to skip all tests?</p>",
        "id": 172305065,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1564749996
    },
    {
        "content": "<p>commandline: -Dmaven.test.skip=true</p>",
        "id": 172305083,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1564750027
    },
    {
        "content": "<p>or in the pom  </p>\n<div class=\"codehilite\"><pre><span></span>&lt;properties&gt;\n        &lt;maven.test.skip&gt;true&lt;/maven.test.skip&gt;\n    &lt;/properties&gt;\n</pre></div>",
        "id": 172305106,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1564750069
    },
    {
        "content": "<p>hah the pom - thanks</p>",
        "id": 172305228,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1564750169
    },
    {
        "content": "<p>ok now that got me over the hump, I have a more difficult question. I want to run <em>some</em> of the tests. Some of them, I care greatly about. But only some of them. The others, I don't want them to run, but I also don't want to delete them</p>",
        "id": 172339229,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1564777038
    },
    {
        "content": "<p>so.... <a href=\"https://maven.apache.org/surefire/maven-surefire-plugin/examples/inclusion-exclusion.html\" target=\"_blank\" title=\"https://maven.apache.org/surefire/maven-surefire-plugin/examples/inclusion-exclusion.html\">https://maven.apache.org/surefire/maven-surefire-plugin/examples/inclusion-exclusion.html</a>. Except that... there's no surefire plugin in the POM?</p>",
        "id": 172339244,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1564777057
    },
    {
        "content": "<p><a href=\"https://github.com/hapifhir/org.hl7.fhir.core/pull/68\" target=\"_blank\" title=\"https://github.com/hapifhir/org.hl7.fhir.core/pull/68\">https://github.com/hapifhir/org.hl7.fhir.core/pull/68</a></p>",
        "id": 172340745,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1564778396
    },
    {
        "content": "<p>oh no wait. Its not working.</p>",
        "id": 172340835,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1564778462
    },
    {
        "content": "<p>there is a surefire at line 151</p>",
        "id": 172340917,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1564778542
    },
    {
        "content": "<p>no its working, i excluded * for now and deleted the skip test property.<br>\nI also inserted a ver number for the jar plugin of the cli to get rid of a maven build warning.</p>",
        "id": 172341377,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1564779060
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> fixed it for you</p>",
        "id": 172412549,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1564849926
    },
    {
        "content": "<p>great thanks</p>",
        "id": 172421200,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1564866098
    },
    {
        "content": "<p>so a follow up on this - if I want to add JUnit tests to run, do I add them in the root POM, or in the project specific POM?</p>",
        "id": 172478510,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1564980664
    },
    {
        "content": "<p>A fairly common approach to this kind of thing is to set up Maven Surefire plugin (the plugin that executes the tests) to only automatically run test classes called \"FooTest\". If you have old tests that you want to keep but not run, just rename them so that they don't end in Test.</p>\n<p>..but why do you not just want to delete them? Is the intent to run them later?</p>",
        "id": 172529041,
        "sender_full_name": "James Agnew",
        "timestamp": 1565031868
    },
    {
        "content": "<p>someone might want to invest the time to get them running again.</p>",
        "id": 172539423,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1565040106
    },
    {
        "content": "<p>just cause I don't care doesn't mean noone else does</p>",
        "id": 172539431,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1565040119
    },
    {
        "content": "<p>I can't actually get the tests to run ok - some mystifying maven dependency issue</p>",
        "id": 172539500,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1565040152
    },
    {
        "content": "<p>java.lang.NoSuchMethodError: ca.uhn.fhir.model.api.TemporalPrecisionEnum.stringLength()I<br>\n    at org.hl7.fhir.r5.model.BaseDateTimeType.equalsUsingFhirPathRules(BaseDateTimeType.java:875)</p>",
        "id": 172539513,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1565040165
    },
    {
        "content": "<p>everything else is fine, just not the JUnit tests</p>",
        "id": 172539556,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1565040186
    },
    {
        "content": "<p>i have a look now</p>",
        "id": 172540337,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1565040829
    },
    {
        "content": "<p>i get a lot of file not found errors because it tries it loads from c:/work/something...</p>",
        "id": 172540712,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1565041144
    },
    {
        "content": "<p>use AllR5Tests</p>",
        "id": 172540832,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1565041262
    },
    {
        "content": "<p>that's my own path, but I don't see any direct reference to it from code run by AllR5Tests</p>",
        "id": 172540943,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1565041347
    },
    {
        "content": "<p>i only have \"not done yet\" and \"java.io.FileNotFoundException: C:\\work\\org.hl7.fhir\\build\\publish/timing.shex (No such file or directory)\" errors</p>",
        "id": 172541179,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1565041561
    },
    {
        "content": "<blockquote>\n<p>that's my own path, but I don't see any direct reference to it from code run by AllR5Tests</p>\n</blockquote>\n<p>right <span aria-label=\"thinking\" class=\"emoji emoji-1f914\" role=\"img\" title=\"thinking\">:thinking:</span> its only used in the release.bat files</p>",
        "id": 172541302,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1565041648
    },
    {
        "content": "<p>doTest(\"C:\\\\work\\\\org.hl7.fhir\\\\build\\\\tests\\\\turtle\\\\empty_collection.ttl\", true);</p>",
        "id": 172541769,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1565042055
    },
    {
        "content": "<p>there are lots of file references like this in the tests</p>",
        "id": 172541779,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1565042069
    },
    {
        "content": "<p><a href=\"https://github.com/hapifhir/org.hl7.fhir.core/search?q=C%3A%5C%5Cwork%5C%5Corg.hl7.fhir%5C%5C&amp;unscoped_q=C%3A%5C%5Cwork%5C%5Corg.hl7.fhir%5C%5C\" target=\"_blank\" title=\"https://github.com/hapifhir/org.hl7.fhir.core/search?q=C%3A%5C%5Cwork%5C%5Corg.hl7.fhir%5C%5C&amp;unscoped_q=C%3A%5C%5Cwork%5C%5Corg.hl7.fhir%5C%5C\">https://github.com/hapifhir/org.hl7.fhir.core/search?q=C%3A%5C%5Cwork%5C%5Corg.hl7.fhir%5C%5C&amp;unscoped_q=C%3A%5C%5Cwork%5C%5Corg.hl7.fhir%5C%5C</a></p>",
        "id": 172541793,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1565042101
    },
    {
        "content": "<p>Only on in R5 tests. I'll commit</p>",
        "id": 172542570,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1565042798
    },
    {
        "content": "<p>added PR: <a href=\"https://github.com/hapifhir/org.hl7.fhir.core/pull/77\" target=\"_blank\" title=\"https://github.com/hapifhir/org.hl7.fhir.core/pull/77\">https://github.com/hapifhir/org.hl7.fhir.core/pull/77</a><br>\nnow only the R5 and R5 Validation Testsuites are included.<br>\nI would prefer excludes over includes as we have to include every new TestSuite manually (e.g. R6 Testsuite), easiest would be to exclude alle pre R5 Tests, but even some of the R5 Tests are failing.<br>\nShould we get all R5 Tests running? Then we could switch to excludes.</p>",
        "id": 175638846,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1568390956
    },
    {
        "content": "<p>I'll sort out what's failing... but the suite includes most of them</p>",
        "id": 175640280,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1568392072
    },
    {
        "content": "<p>i also did a exclude based solution:<br>\n<a href=\"https://github.com/hapifhir/org.hl7.fhir.core/pull/78\" target=\"_blank\" title=\"https://github.com/hapifhir/org.hl7.fhir.core/pull/78\">https://github.com/hapifhir/org.hl7.fhir.core/pull/78</a><br>\nexcludes all tests in dstu2 - r4 and the r3r4conversionTest</p>",
        "id": 175644400,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1568394673
    },
    {
        "content": "<p>hey <span class=\"user-mention\" data-user-id=\"191451\">@Patrick Werner</span> I just did a mvn build that failed:</p>",
        "id": 175703285,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1568470677
    },
    {
        "content": "<div class=\"codehilite\"><pre><span></span>[ERROR] Errors:\n[ERROR]   CDARoundTripTests.setUp:29 »  Not done yet\n[ERROR]   CDARoundTripTests.setUp:29 »  Not done yet\n[ERROR]   CDARoundTripTests.setUp:29 »  Not done yet\n[ERROR]   JsonDirectTests.test:31 » FileNotFound Source &#39;C:\\work\\org.hl7.fhir\\build\\publ...\n[INFO]\n[ERROR] Tests run: 2173, Failures: 0, Errors: 4, Skipped: 0\n</pre></div>\n\n\n<p>those tests shouldn't be running.... where is this configured?</p>",
        "id": 175703326,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1568470700
    },
    {
        "content": "<p>oh. i have a look.</p>",
        "id": 175703655,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1568471323
    },
    {
        "content": "<p>fixed it. All Test include/excludes are defined in the root pom. <br>\ni now did it like this(as i didn't wanted to hardcode the Tests which shall run):</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"nt\">&lt;includes&gt;</span>\n  <span class=\"nt\">&lt;include&gt;</span>**/All*<span class=\"nt\">&lt;/include&gt;</span>\n<span class=\"nt\">&lt;/includes&gt;</span>\n<span class=\"nt\">&lt;excludes&gt;</span>\n  <span class=\"nt\">&lt;exclude&gt;</span>**/*dstu*/**<span class=\"nt\">&lt;/exclude&gt;</span>\n  <span class=\"nt\">&lt;exclude&gt;</span>**/*r4*/**<span class=\"nt\">&lt;/exclude&gt;</span>\n<span class=\"nt\">&lt;/excludes&gt;</span>\n</pre></div>",
        "id": 175705520,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1568473695
    },
    {
        "content": "<p>ok thanks. I'm trying ut now</p>",
        "id": 175705534,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1568473729
    },
    {
        "content": "<p>so all Testsuites (defined by containing <em>All</em> in their name) are run, excluding everything which contains dstu or r4</p>",
        "id": 175705684,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1568473942
    },
    {
        "content": "<p>they are still some build errors independent of the tests</p>",
        "id": 175705712,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1568474027
    },
    {
        "content": "<p>but I do think we want to hard code the tests which we want to run. SInce I regulalry run the tests from the IDE I want a single suite that includes all the running tests, and then you just nominate that to maven, and all contexts use the same set of tests</p>",
        "id": 175705765,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1568474077
    },
    {
        "content": "<p>though I'm not insisting it be done that way, just that I can easily run the same set of tests from eclipse as run when doing a maven release</p>",
        "id": 175705767,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1568474077
    },
    {
        "content": "<p>thanks</p>",
        "id": 175705768,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1568474077
    },
    {
        "content": "<p>I guess that comes to the same thing. I'll call myself happy then</p>",
        "id": 175705769,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1568474077
    },
    {
        "content": "<p>hmm. which ones fail for you? cause they're working for me, so if you tell me, I'll hunt them</p>",
        "id": 175705770,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1568474077
    },
    {
        "content": "<p><a href=\"https://travis-ci.org/hapifhir/org.hl7.fhir.core/builds/584979400?utm_source=github_status&amp;utm_medium=notification\" target=\"_blank\" title=\"https://travis-ci.org/hapifhir/org.hl7.fhir.core/builds/584979400?utm_source=github_status&amp;utm_medium=notification\">https://travis-ci.org/hapifhir/org.hl7.fhir.core/builds/584979400?utm_source=github_status&amp;utm_medium=notification</a></p>",
        "id": 175705793,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1568474140
    },
    {
        "content": "<p>Build failure on R5</p>",
        "id": 175705799,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1568474153
    },
    {
        "content": "<p>hmm do build failures get pushed anywhere?</p>",
        "id": 175705863,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1568474263
    },
    {
        "content": "<p>(like to Zulip)?</p>",
        "id": 175705866,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1568474279
    },
    {
        "content": "<p>hmm. more maven build failures:</p>",
        "id": 175706081,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1568474635
    },
    {
        "content": "<p>are you somewhere around? Could join to fix them</p>",
        "id": 175706131,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1568474672
    },
    {
        "content": "<div class=\"codehilite\"><pre><span></span>[ERROR] Errors:\n[ERROR]   CDAValidationTestCase.test » OutOfMemory Java heap space\n[ERROR]   ProfileComparisonTests.testCurrentComparison » OutOfMemory Java heap space\n[ERROR]   ValidationEngineTests.test140 » OutOfMemory GC overhead limit exceeded\n[ERROR]   ValidationEngineTests.test301 » OutOfMemory Java heap space\n[ERROR]   ValidationEngineTests.test301USCore » OutOfMemory Java heap space\n[ERROR]   ValidationEngineTests.testCurrentJson » OutOfMemory GC overhead limit exceeded\n[ERROR]   ValidationEngineTests.testCurrentXml » OutOfMemory GC overhead limit exceeded\n[ERROR]   ValidationTestSuite.test:116 » OutOfMemory Java heap space\n[ERROR]   ValidationTestSuite.test[141: id Xml.slice-by-polymorphic-type.xml] » OutOfMemory\n[ERROR]   ValidationTestSuite.test[144: id Xml.slicing-example-uk.xml] » OutOfMemory Jav...\n[ERROR]   ValidationTestSuite.test[145: id Xml.slicing-types-by-string.xml] » OutOfMemory\n[ERROR]   ValidationTestSuite.test[150: id Xml.valueset-slicing-meds-bad.xml] » OutOfMemory\n[ERROR]   ValidationTestSuite.test[151: id Xml.valueset-slicing-meds.xml] » OutOfMemory ...\n[ERROR]   ValidationTestSuite.test:118 » OutOfMemory Java heap space\n</pre></div>",
        "id": 175706135,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1568474682
    },
    {
        "content": "<p>where is java heap space specified?</p>",
        "id": 175706136,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1568474682
    },
    {
        "content": "<p>I'm in M103 but I should probably come ind you</p>",
        "id": 175706140,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1568474699
    },
    {
        "content": "<p>I'm at table 14</p>",
        "id": 175706153,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1568474734
    },
    {
        "content": "<p>John Moerke pointed to this article yesterday:<br>\n<a href=\"http://www.messiahpsychoanalyst.org/wikihow/index.php/How_to_Increase_Java_Memory_in_Windows\" target=\"_blank\" title=\"http://www.messiahpsychoanalyst.org/wikihow/index.php/How_to_Increase_Java_Memory_in_Windows\">http://www.messiahpsychoanalyst.org/wikihow/index.php/How_to_Increase_Java_Memory_in_Windows</a></p>",
        "id": 175706198,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1568474764
    },
    {
        "content": "<blockquote>\n<p>hmm do build failures get pushed anywhere?</p>\n</blockquote>\n<p>not pushed, but viewable in github: <a href=\"https://github.com/hapifhir/org.hl7.fhir.core/commits/master\" target=\"_blank\" title=\"https://github.com/hapifhir/org.hl7.fhir.core/commits/master\">https://github.com/hapifhir/org.hl7.fhir.core/commits/master</a></p>",
        "id": 175706226,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1568474864
    },
    {
        "content": "<p>there should be same way to specify this in maven</p>",
        "id": 175706295,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1568474957
    },
    {
        "content": "<p>maven runs in java, so its a hen egg problem</p>",
        "id": 175706380,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1568475118
    },
    {
        "content": "<p>right but mvn launches java...</p>",
        "id": 175706440,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1568475210
    },
    {
        "content": "<p>hate this part of java...</p>",
        "id": 175706489,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1568475283
    },
    {
        "content": "<p><a href=\"https://subscription.packtpub.com/book/application_development/9781783983865/1/ch01lvl1sec10/configuring-the-heap-size\" target=\"_blank\" title=\"https://subscription.packtpub.com/book/application_development/9781783983865/1/ch01lvl1sec10/configuring-the-heap-size\">https://subscription.packtpub.com/book/application_development/9781783983865/1/ch01lvl1sec10/configuring-the-heap-size</a></p>",
        "id": 175706490,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1568475283
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191926\">@Joel Schneider</span> just pointed me to the maven compiler plugin, which is a way to do it. Will do a PR.</p>",
        "id": 175706565,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1568475385
    },
    {
        "content": "<p>a problem with the mvn thing is that I'm doing a release of all the projects, and it completes the release one by one rather than compiling and running the tests on all projects before releasing any. I don't know if there's any way to fix that</p>",
        "id": 175707023,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1568476136
    },
    {
        "content": "<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"191926\">Joel Schneider</span> just pointed me to the maven compiler plugin, which is a way to do it. Will do a PR.</p>\n</blockquote>\n<p>pushed and merged it</p>",
        "id": 175707287,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1568476609
    },
    {
        "content": "<blockquote>\n<p>a problem with the mvn thing is that I'm doing a release of all the projects, and it completes the release one by one rather than compiling and running the tests on all projects before releasing any. I don't know if there's any way to fix that</p>\n</blockquote>\n<p>i think that kind of problems could be solved by setting up a proper CI pipeline. Which would include git tags per release which then would trigger the release pipeline living in travis. Would propably save you a lot of manual work. <br>\nHappy to support you with that.</p>",
        "id": 175707903,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1568477753
    },
    {
        "content": "<p>nah James showed me the right parameter to maven. all good.</p>",
        "id": 175725307,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1568508184
    },
    {
        "content": "<p>I don't understand this test fail on travis:</p>\n<div class=\"codehilite\"><pre><span></span>[ERROR] equalsUsingFhirPathRulesOther(org.hl7.fhir.r5.model.BaseDateTimeTypeTest)  Time elapsed: 0.002 s  &lt;&lt;&lt; ERROR!\njava.lang.NullPointerException\n    at org.hl7.fhir.r5.model.BaseDateTimeTypeTest.equalsUsingFhirPathRulesOther(BaseDateTimeTypeTest.java:55)\n</pre></div>\n\n\n<p>It works fine for me and I can't imagine how the code at that line can generate an NPE:</p>\n<div class=\"codehilite\"><pre><span></span>        <span class=\"n\">assertFalse</span><span class=\"o\">(</span><span class=\"n\">compareDateTimes</span><span class=\"o\">(</span><span class=\"s\">&quot;1974-12-25&quot;</span><span class=\"o\">,</span> <span class=\"s\">&quot;1974-12-25T12:34:00-10:00&quot;</span><span class=\"o\">));</span>\n</pre></div>",
        "id": 175725319,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1568508235
    },
    {
        "content": "<p>those two dates have different precision... i would expect the comparison to return null, no?</p>",
        "id": 175727911,
        "sender_full_name": "James Agnew",
        "timestamp": 1568513042
    },
    {
        "content": "<p>all the tests are passing now ;-)</p>",
        "id": 175746992,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1568550934
    }
]