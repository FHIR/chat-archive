[
    {
        "content": "<p>Based on my investigations, it appears that the HAPI JPA server doesn't currently support search params of type <code>special</code>, is this correct? My use case involves some latitude/longitude based searches (such as the <code>near</code> parameter for Location).</p>\n<p>I am guessing that <a href=\"https://github.com/jamesagnew/hapi-fhir/blob/master/hapi-fhir-jpaserver-searchparam/src/main/java/ca/uhn/fhir/jpa/searchparam/extractor/SearchParamExtractorR4.java#L172\" target=\"_blank\" title=\"https://github.com/jamesagnew/hapi-fhir/blob/master/hapi-fhir-jpaserver-searchparam/src/main/java/ca/uhn/fhir/jpa/searchparam/extractor/SearchParamExtractorR4.java#L172\">this TODO</a> refers to the <code>near</code>  search.</p>\n<p>Also, the JPA server currently serves an invalid CapabilityStatement related to <code>special</code> search parameters as described in <a href=\"https://github.com/jamesagnew/hapi-fhir/issues/1167\" target=\"_blank\" title=\"https://github.com/jamesagnew/hapi-fhir/issues/1167\">this github issue</a>.</p>",
        "id": 176200205,
        "sender_full_name": "Stephen MacVicar",
        "timestamp": 1568991576
    },
    {
        "content": "<p>Yup, <code>special</code> search parameters are not yet implemented.</p>",
        "id": 176207450,
        "sender_full_name": "James Agnew",
        "timestamp": 1568996586
    },
    {
        "content": "<p>Is adding support for <code>special</code> parameters something that could be done without losing all of the nice search features that come with the base JPA server (supporting multiple parameters, includes, etc.)? My impression from looking at <a href=\"http://hapifhir.io/xref-jpaserver/ca/uhn/fhir/jpa/rp/r4/LocationResourceProvider.html\" target=\"_blank\" title=\"http://hapifhir.io/xref-jpaserver/ca/uhn/fhir/jpa/rp/r4/LocationResourceProvider.html\">the generated Location provider</a> is that this is not something that could be done with something simple like an Interceptor, but would instead require messing around in the guts of HAPI.</p>",
        "id": 176215715,
        "sender_full_name": "Stephen MacVicar",
        "timestamp": 1569001967
    },
    {
        "content": "<p>Are there any potential workarounds for my HAPI JPA server to implement something that acts similarly to the special <code>near</code> search param (seeing as <code>near</code> is not supported)? I've been looking at trying to use a custom <a href=\"http://www.hl7.org/fhir/operations.html\" target=\"_blank\" title=\"http://www.hl7.org/fhir/operations.html\">operation</a>, would this be reasonable or discouraged?</p>",
        "id": 177529877,
        "sender_full_name": "Jake O'Donnell",
        "timestamp": 1570461798
    },
    {
        "content": "<p>That would absolutely be a reasonable thing to do as a workaround to <code>near</code> not being implemented.</p>\n<p>What I really want to get done at some point soon is to take advantage of the spatial features in ElasticSearch to implement this one. Most of the precursor work is actually done now so it seems reasonable that we could do this.. Not yet sure about timing though.</p>",
        "id": 177536362,
        "sender_full_name": "James Agnew",
        "timestamp": 1570465895
    }
]