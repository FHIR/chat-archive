[
    {
        "content": "<p>Hi all!</p>\n<p>I'm looking for a way to basically fetch <em>all</em> data from an HAPI FHIR server. This is what I've tried, but it does not work:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"n\">Bundle</span> <span class=\"n\">bundle</span> <span class=\"o\">=</span> <span class=\"n\">client</span><span class=\"o\">.</span><span class=\"na\">search</span><span class=\"o\">().</span><span class=\"na\">forAllResources</span><span class=\"o\">().</span><span class=\"na\">returnBundle</span><span class=\"o\">(</span><span class=\"n\">Bundle</span><span class=\"o\">.</span><span class=\"na\">class</span><span class=\"o\">).</span><span class=\"na\">execute</span><span class=\"o\">();</span>\n</pre></div>\n\n\n<p>It  tells me: \"HTTP 400 Bad Request: This is the base URL of FHIR server. Unable to handle this request, as it does not contain a resource type or operation name.\" The server base is currently set to \"<a href=\"http://localhost:8082/fhir\" target=\"_blank\" title=\"http://localhost:8082/fhir\">http://localhost:8082/fhir</a>\".</p>\n<p>This, however, works:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"n\">Bundle</span> <span class=\"n\">bundle</span> <span class=\"o\">=</span> <span class=\"n\">client</span><span class=\"o\">.</span><span class=\"na\">search</span><span class=\"o\">().</span><span class=\"na\">forResource</span><span class=\"o\">(</span><span class=\"n\">Observation</span><span class=\"o\">.</span><span class=\"na\">class</span><span class=\"o\">).</span><span class=\"na\">returnBundle</span><span class=\"o\">(</span><span class=\"n\">Bundle</span><span class=\"o\">.</span><span class=\"na\">class</span><span class=\"o\">).</span><span class=\"na\">execute</span><span class=\"o\">();</span>\n</pre></div>\n\n\n<p>Is there any way of getting the first example to work?</p>\n<p>Thanks, Sebastian</p>",
        "id": 180738011,
        "sender_full_name": "Sebastian Mate",
        "timestamp": 1573743509
    },
    {
        "content": "<p>it's not in the spec. you can do it by patient, but not by server</p>",
        "id": 180762854,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1573758518
    },
    {
        "content": "<p>hapi now supports bulk export: <a href=\"https://hl7.org/Fhir/uv/bulkdata/export/index.html\" target=\"_blank\" title=\"https://hl7.org/Fhir/uv/bulkdata/export/index.html\">https://hl7.org/Fhir/uv/bulkdata/export/index.html</a><br>\n<span class=\"user-mention\" data-user-id=\"221445\">@Sebastian Mate</span></p>",
        "id": 180815558,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1573810426
    },
    {
        "content": "<p>Great! Thanks for the info, <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span>  and <span class=\"user-mention\" data-user-id=\"191451\">@Patrick Werner</span> !</p>",
        "id": 180825343,
        "sender_full_name": "Sebastian Mate",
        "timestamp": 1573819344
    },
    {
        "content": "<p>OK, now I ran into an new problem. I'm trying to fetch fetch the resources of specified type (e.g., Observation.class) for a given patient. How can I do this via the api?</p>",
        "id": 182772867,
        "sender_full_name": "Sebastian Mate",
        "timestamp": 1575646972
    },
    {
        "content": "<p>This does not work:<br>\nBundle bundle = (Bundle) client.search().forResource(Observation.class).where(Patient.IDENTIFIER.equals(\"10\")).returnBundle(Bundle.class).execute();</p>",
        "id": 182772901,
        "sender_full_name": "Sebastian Mate",
        "timestamp": 1575646984
    },
    {
        "content": "<p>It tells me: The method where(ICriterion&lt;?&gt;) in the type IQuery&lt;IBaseBundle&gt; is not applicable for the arguments (boolean)</p>",
        "id": 182772923,
        "sender_full_name": "Sebastian Mate",
        "timestamp": 1575646995
    },
    {
        "content": "<p>Any help is highly appreciated! ;-)</p>",
        "id": 182772942,
        "sender_full_name": "Sebastian Mate",
        "timestamp": 1575647008
    },
    {
        "content": "<p>you have to return an Icriterion in your where</p>",
        "id": 182792441,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1575659016
    },
    {
        "content": "<p>like this</p>",
        "id": 182792446,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1575659018
    },
    {
        "content": "<p>where(Patient.IDENTIFIER.exactly().systemAndIdentifier(\"system\", \"00001\"))</p>",
        "id": 182792447,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1575659021
    },
    {
        "content": "<p>Patrick, got working thanks to your help. The correct syntax (in my case) was:<br>\nbundle = (Bundle) client.search().forResource(Observation.class).where(Observation.PATIENT.hasId(patientFHIR)).returnBundle(Bundle.class).execute();<br>\nwhere patientFHIR is a String that contains the patient ID.</p>",
        "id": 182935388,
        "sender_full_name": "Sebastian Mate",
        "timestamp": 1575881997
    }
]