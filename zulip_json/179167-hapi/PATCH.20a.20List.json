[
    {
        "content": "<p>I like to manage a List of Patients in a List-Ressource.</p>\n<p>To add a Patient I use:</p>\n<div class=\"codehilite\"><pre><span></span><code>[\n   { &quot;op&quot;: &quot;add&quot;, &quot;path&quot;: &quot;/entry/0&quot;, &quot;value&quot;:\n      {\n         &quot;item&quot;:\n         {\n            &quot;reference&quot;: &quot;Patient?identifier=urn:oid:1.2.276.0.76.3.1.139.100.2|40137998&quot;\n         }\n      }\n    }\n]\n</code></pre></div>\n<p>That works fine. The operation add an entry like the following to the list:</p>\n<div class=\"codehilite\"><pre><span></span><code>       {\n            &quot;item&quot;: {\n                &quot;reference&quot;: &quot;Patient/24d7329b-67a9-4855-965d-dd8a849b9f30&quot;\n            }\n        }\n</code></pre></div>\n<p>Now I want to remove this entry, and thought that this should work:</p>\n<div class=\"codehilite\"><pre><span></span><code>[{ &quot;op&quot;: &quot;remove&quot;, &quot;path&quot;: &quot;/entry/&quot;, &quot;value&quot;:{&quot;item&quot;:{&quot;reference&quot;: &quot;Patient?identifier=urn:oid:1.2.276.0.76.3.1.139.100.2|40137998&quot;}}}]\n</code></pre></div>\n<p>or maybe:</p>\n<div class=\"codehilite\"><pre><span></span><code>[{ &quot;op&quot;: &quot;remove&quot;, &quot;path&quot;: &quot;/entry/&quot;, &quot;value&quot;:{&quot;item&quot;:{&quot;reference&quot;: &quot;Patient/24d7329b-67a9-4855-965d-dd8a849b9f30&quot;}}}]\n</code></pre></div>\n<p>But I got this error using SMILE CDR:</p>\n<div class=\"codehilite\"><pre><span></span><code>{\n    &quot;resourceType&quot;: &quot;OperationOutcome&quot;,\n    &quot;issue&quot;: [\n        {\n            &quot;severity&quot;: &quot;error&quot;,\n            &quot;code&quot;: &quot;processing&quot;,\n            &quot;diagnostics&quot;: &quot;no such path in target JSON document&quot;\n        }\n    ]\n}\n</code></pre></div>\n<p>Any idea, what I can do to remove an entry from the list? <br>\nThank's for helping!</p>\n<p>Michael</p>",
        "id": 230744406,
        "sender_full_name": "Michael Sauer",
        "timestamp": 1616006222
    },
    {
        "content": "<p>I think it should be <code>\"path\": \"/entry/0\"</code> when removing the item, and you don't need the <code>value</code> key. </p>\n<p>It should just be, </p>\n<div class=\"codehilite\"><pre><span></span><code>[\n    {\n        &quot;op&quot;: &quot;remove&quot;,\n        &quot;path&quot;: &quot;/entry/0&quot;\n    }\n]\n</code></pre></div>\n<p>Here's the <a href=\"https://tools.ietf.org/html/rfc6902#section-3\">JSON Patch RFC</a> with the relevant examples</p>",
        "id": 230820039,
        "sender_full_name": "Dexter",
        "timestamp": 1616050050
    },
    {
        "content": "<p>Hi, just saw your message in the other thread. Are you trying to check the element before removing it?</p>",
        "id": 230820851,
        "sender_full_name": "Dexter",
        "timestamp": 1616050902
    },
    {
        "content": "<p>I know which patient I want to remove, but I don‘t know the index. The list can be very long - so I don‘t want to transfer the complete list to the client.   I thought that I can use the reference value to find the entry and remove it.</p>",
        "id": 230984013,
        "sender_full_name": "Michael Sauer",
        "timestamp": 1616137864
    },
    {
        "content": "<p>Do you think it is possible to do this using FHIR-Patch?</p>",
        "id": 230984269,
        "sender_full_name": "Michael Sauer",
        "timestamp": 1616138121
    },
    {
        "content": "<p>I'm not sure, but what I've resorted to doing is make a GET, then modify the payload as you see fit, and PATCH with a test and replace to ensure I'm PATCHing the same data that I have</p>\n<p>Something like this</p>\n<div class=\"codehilite\"><pre><span></span><code>[\n    {\n        &quot;op&quot;: &quot;test&quot;,\n        &quot;path&quot;: &quot;/meta/VersionId&quot;,\n        &quot;value&quot;: &quot;1&quot;\n    },\n    {\n        &quot;op&quot;: &quot;replace&quot;,\n        &quot;path&quot;: &quot;path-to-data&quot;,\n        &quot;value&quot;: { ... }\n    },\n    {\n        &quot;op&quot;: &quot;replace&quot;,\n        &quot;path&quot;: &quot;&quot;,\n        &quot;value&quot;: { this replaces the whole object from the root }\n    },\n    // more things\n]\n</code></pre></div>",
        "id": 231009197,
        "sender_full_name": "Dexter",
        "timestamp": 1616153611
    },
    {
        "content": "<p>In your case, it'd be </p>\n<div class=\"codehilite\"><pre><span></span><code>// Get the data, get the version,\n// check the list and find the index of the element to delete\n[\n    {\n        &quot;op&quot;: &quot;test&quot;,\n        &quot;path&quot;: &quot;/meta/VersionId&quot;,\n        &quot;value&quot;: &quot;version-you-got-above&quot;\n    },\n    {\n        &quot;op&quot;: &quot;delete&quot;,\n        &quot;path&quot;: &quot;path-to-data/index&quot;,\n    },\n]\n</code></pre></div>\n<p>On a sidenote, I think we both asked the question in the wrong stream. Not sure, maybe someone can let us know</p>",
        "id": 231009730,
        "sender_full_name": "Dexter",
        "timestamp": 1616153937
    }
]