[
    {
        "content": "<p>I am getting the following error while calling the HAPI web service to post any resource message contains null (\"\") values. While from HAPI client UI there is no issue at all. This issue has strarted coming up after moving HAPI version 2.0. </p>\n<p>{<br>\n      \"severity\": \"error\",<br>\n      \"code\": \"processing\",<br>\n      \"diagnostics\": \"@value cannot be empty\",<br>\n      \"location\": [<br>\n        \"/referenceRange/low/value\"<br>\n      ]<br>\n    }</p>",
        "id": 153873787,
        "sender_full_name": "Binu DGIT",
        "timestamp": 1488193832
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"192834\">@Binu DGIT</span> , can you post any of the rejected resources here? I suspect there is some error that wasn't caught by an earlier version of HAPI, but the validation was fixed in the newer version.</p>",
        "id": 153873806,
        "sender_full_name": "Igor Sirkovich",
        "timestamp": 1488210119
    },
    {
        "content": "<p>That's correct, an empty string/value is invalid Fhir and the server should reject them.<br>\nSounds like HAPI has upped it's validation. I think it's the ele-1 invariant in the slec (from memory)</p>",
        "id": 153873875,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1488229393
    },
    {
        "content": "<p>Instead of having family:\"\", just remove the property from the json.</p>",
        "id": 153873876,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1488229459
    },
    {
        "content": "<p>Please find the attached json for a MedicationOrder.. I got the following error. Date ended is considered as stop date which may be there only for stopped cases while other active cases are supposed to have null value.  It was accepted by HAPI before version2 and even it is accpted by HAPI when I try from its own UI.  I am using web service call from the Oracle database to post the JSON.</p>\n<div class=\"codehilite\"><pre>{\n  &quot;severity&quot;: &quot;error&quot;,\n  &quot;code&quot;: &quot;processing&quot;,\n  &quot;diagnostics&quot;: &quot;@value cannot be empty&quot;,\n  &quot;location&quot;: [\n    &quot;/dateEnded&quot;\n  ]\n}\n</pre></div>\n\n\n<p>My JSON as follows..<br>\n{<br>\n  \"resourceType\": \"MedicationOrder\",<br>\n  \"id\": \"56.20068.1541587\",<br>\n  \"meta\": {<br>\n    \"profile\": \"<a href=\"http://moh.gov.om/fhir/StructureDefinition/OmMedicationOrder\" target=\"_blank\" title=\"http://moh.gov.om/fhir/StructureDefinition/OmMedicationOrder\">http://moh.gov.om/fhir/StructureDefinition/OmMedicationOrder</a>\",<br>\n    \"lastUpdated\": \"2017-02-28T14:52:28+01:00\"<br>\n  },<br>\n  \"identifier\": [<br>\n    {<br>\n      \"use\": \"usual\",<br>\n      \"value\": \"56.20068.571148.1541587\"<br>\n    }<br>\n  ],<br>\n  \"dateWritten\": \"2016-04-18\",<br>\n  \"status\": \"active\",<br>\n  \"dateEnded\": \"\",<br>\n  \"patient\": {<br>\n    \"reference\": \"Patient/67.20068.87456\",<br>\n    \"display\": \"HAMOOD SULEIMAN KHAMIS AL SAADI\"<br>\n  },<br>\n  \"prescriber\": {<br>\n    \"reference\": \"Practitioner/71.-1001\",<br>\n    \"display\": \"DOC ADMIN USER * *\"<br>\n  },<br>\n  \"encounter\": {<br>\n    \"reference\": \"Encounter/36.20068.593864\",<br>\n    \"display\": \"17-APR-16\"<br>\n  },<br>\n  \"reasonReference\": {<br>\n    \"reference\": \"18.20068.593864.J30.1\",<br>\n    \"display\": \"J30.1\"<br>\n  },<br>\n  \"medicationCodeableConcept\": {<br>\n    \"coding\": [<br>\n      {<br>\n        \"code\": 7,<br>\n        \"display\": \"Acetylcholine Chloride\",<br>\n        \"system\": \"<a href=\"http://moh.gov.om/fhir/ValueSet/medicine-master\" target=\"_blank\" title=\"http://moh.gov.om/fhir/ValueSet/medicine-master\">http://moh.gov.om/fhir/ValueSet/medicine-master</a>\"<br>\n      }<br>\n    ],<br>\n    \"text\": \"Acetylcholine Chloride\"<br>\n  },<br>\n  \"dosageInstruction\": [<br>\n    {<br>\n      \"text\": \"Take 1 % STAT for 2 days\",<br>\n      \"additionalInstructions\": \"\",<br>\n      \"timing\": {<br>\n        \"event\": \"2016-04-18\",<br>\n        \"code\": {<br>\n          \"coding\": {<br>\n            \"system\": \"<a href=\"http://moh.gov.om/fhir/ValueSet/Medicine-Course-Master\" target=\"_blank\" title=\"http://moh.gov.om/fhir/ValueSet/Medicine-Course-Master\">http://moh.gov.om/fhir/ValueSet/Medicine-Course-Master</a>\",<br>\n            \"code\": \"STAT\",<br>\n            \"display\": \"STAT\"<br>\n          },<br>\n          \"text\": \"STAT\"<br>\n        },<br>\n        \"repeat\": {<br>\n          \"duration\": 2,<br>\n          \"durationUnits\": \"d\"<br>\n        }<br>\n      },<br>\n      \"doseQuantity\": {<br>\n        \"value\": 1,<br>\n        \"code\": 250,<br>\n        \"unit\": \"%\",<br>\n        \"system\": \"<a href=\"http://moh.gov.om/fhir/ValueSet/Medicine-Unit-Master\" target=\"_blank\" title=\"http://moh.gov.om/fhir/ValueSet/Medicine-Unit-Master\">http://moh.gov.om/fhir/ValueSet/Medicine-Unit-Master</a>\"<br>\n      }<br>\n    }<br>\n  ]<br>\n}</p>",
        "id": 153874001,
        "sender_full_name": "Binu DGIT",
        "timestamp": 1488279361
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"192834\">@Binu DGIT</span> , as Brian had stated, empty string/value is not allowed in FHIR. You should remove \"dateEnded\": \"\", from your JSON.</p>\n<p><a href=\"http://build.fhir.org/json.html\" target=\"_blank\" title=\"http://build.fhir.org/json.html\">http://build.fhir.org/json.html</a><br>\nObjects are never empty. If an element is present in the resource, it SHALL have properties as defined for its type, or 1 or more extensions<br>\nString property values can never be empty. Either the property is absent, or it is present with at least one character of content<br>\nJust as in XML, JSON objects and arrays are never empty, and properties never have null values (except for a special case documented below). Omit a property if it is empty</p>",
        "id": 153874054,
        "sender_full_name": "Igor Sirkovich",
        "timestamp": 1488302575
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191393\">@Igor Sirkovich</span>  Thank you very much for the detailed explanation. </p>",
        "id": 153874193,
        "sender_full_name": "Binu DGIT",
        "timestamp": 1488347701
    }
]