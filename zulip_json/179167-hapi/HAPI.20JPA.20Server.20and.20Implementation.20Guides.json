[
    {
        "content": "<p>Is it possible to specify an ImplementationGuide that the HAPI JPA server will follow.<br>\nI'm thinking of something like this:<br>\nMy server needs to conform to this IG <a href=\"https://hl7-uk.github.io/UK-STU3\" target=\"_blank\" title=\"https://hl7-uk.github.io/UK-STU3\">https://hl7-uk.github.io/UK-STU3</a><br>\nSo it will only accept Patient resources that conform to (or validate as) <a href=\"https://hl7-uk.github.io/UK-STU3/CareConnect-Patient-1.html\" target=\"_blank\" title=\"https://hl7-uk.github.io/UK-STU3/CareConnect-Patient-1.html\">https://hl7-uk.github.io/UK-STU3/CareConnect-Patient-1.html</a></p>",
        "id": 182442142,
        "sender_full_name": "Kevin Mayfield",
        "timestamp": 1575375640
    },
    {
        "content": "<p>Probably driven by a CapabilityStatement in the IG</p>",
        "id": 182442240,
        "sender_full_name": "Kevin Mayfield",
        "timestamp": 1575375707
    },
    {
        "content": "<p>I have forced profile validation server side specified in a custom interceptor explicitly to do so on a range of profile definitions. It is however not strictly linked to an IG</p>",
        "id": 182695350,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1575574801
    },
    {
        "content": "<p>It could might as well have been made to do so on the basis of an IG</p>",
        "id": 182695425,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1575574832
    },
    {
        "content": "<p>now it is ;)</p>",
        "id": 182767684,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1575644123
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191427\">@Jens Villadsen</span> could you elaborate a bit please?....I am trying to do the same but haven't gotton anywhere</p>",
        "id": 187879522,
        "sender_full_name": "Sajith Jamal",
        "timestamp": 1581390019
    },
    {
        "content": "<p>I've loaded the IG into the server and added an extended FhirInstanceValidator to the RequestValidatingInterceptor. The FhirInstanceValidator then intercepts the incoming resources and finds the SD that matches the profile stated in the resource and runs the validation</p>",
        "id": 187901287,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1581418287
    },
    {
        "content": "<blockquote>\n<p>I've loaded the IG into the server</p>\n</blockquote>\n<p>manually, or did you create a FHIR package endpoint?</p>",
        "id": 187901388,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1581418377
    },
    {
        "content": "<p>I download the package.tgz from the IG compile time and then runtime add/update the FHIR server with the contents.</p>",
        "id": 187901553,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1581418530
    },
    {
        "content": "<p>automatically</p>",
        "id": 187901571,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1581418551
    },
    {
        "content": "<p>we are implementing IG validation in a similar way (Inteceptor, PrePopulatedValidatinSupport). Jsut thought for a second that hapi has package awareness now (which would be really nice to have)</p>",
        "id": 187901824,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1581418764
    },
    {
        "content": "<p>I'll gladly share the contents that does the loading</p>",
        "id": 187901839,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1581418776
    },
    {
        "content": "<p>if it has any interest</p>",
        "id": 187901994,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1581418893
    },
    {
        "content": "<p>I also do some filtering in regards to what profiles that are of interest. As our server is in a setup of a distributed setup, we 'only care' about the resources that our server 'own'. For that, we use the <a href=\"https://www.hl7.org/fhir/stu3/capabilitystatement-definitions.html#CapabilityStatement.profile\" target=\"_blank\" title=\"https://www.hl7.org/fhir/stu3/capabilitystatement-definitions.html#CapabilityStatement.profile\">https://www.hl7.org/fhir/stu3/capabilitystatement-definitions.html#CapabilityStatement.profile</a> in the capabilitystatement</p>",
        "id": 187902133,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1581419018
    },
    {
        "content": "<p>eg. <a href=\"https://docs.ehealth.sundhed.dk/latest/ig/CapabilityStatement-patient.html\" target=\"_blank\" title=\"https://docs.ehealth.sundhed.dk/latest/ig/CapabilityStatement-patient.html\">https://docs.ehealth.sundhed.dk/latest/ig/CapabilityStatement-patient.html</a></p>",
        "id": 187902193,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1581419045
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191451\">@Patrick Werner</span> / <span class=\"user-mention\" data-user-id=\"191687\">@Kevin Mayfield</span>   revisiting this: A client of mine would like to have this enabled <a href=\"https://hapifhir.io/hapi-fhir/docs/validation/repository_validating_interceptor.html#using-the-repository-validating-interceptor\">https://hapifhir.io/hapi-fhir/docs/validation/repository_validating_interceptor.html#using-the-repository-validating-interceptor</a> - so I'll probably soon add this as an option for the HAPI fhir starter project</p>",
        "id": 225551097,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1612794429
    },
    {
        "content": "<p>sounds great</p>",
        "id": 225559995,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1612798034
    },
    {
        "content": "<p>done: <a href=\"https://github.com/hapifhir/hapi-fhir-jpaserver-starter/tree/interceptor-wiring-rework\">https://github.com/hapifhir/hapi-fhir-jpaserver-starter/tree/interceptor-wiring-rework</a></p>",
        "id": 225857172,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1612972710
    },
    {
        "content": "<p>ready for takeoff for testing. Will be merged to master once HAPI 5.3.0 is released</p>",
        "id": 225857325,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1612972764
    },
    {
        "content": "<p>PR is here: <a href=\"https://github.com/hapifhir/hapi-fhir-jpaserver-starter/pull/210\">https://github.com/hapifhir/hapi-fhir-jpaserver-starter/pull/210</a></p>",
        "id": 225857385,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1612972791
    },
    {
        "content": "<p>When combining this <a href=\"https://github.com/hapifhir/hapi-fhir-jpaserver-starter/blob/5aec4b7e18948b797d77f449793be53d083bc51f/src/main/java/ca/uhn/fhir/jpa/starter/RepositoryValidationInterceptorFactoryR4.java#L45\">https://github.com/hapifhir/hapi-fhir-jpaserver-starter/blob/5aec4b7e18948b797d77f449793be53d083bc51f/src/main/java/ca/uhn/fhir/jpa/starter/RepositoryValidationInterceptorFactoryR4.java#L45</a> with the feature of installing IG's you'll have an out-of-the-box validation on anything stored in the HAPI FHIR starter service. Only requirement is a few lines of configuration - <span class=\"user-mention\" data-user-id=\"191451\">@Patrick Werner</span></p>",
        "id": 225858007,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1612972912
    }
]