[
    {
        "content": "<p>Hello, <br>\nWhen validating a QuestionnaireResponse with a canonical reference to a version specific Questionnaire, the validation gives the following response: </p>\n<div class=\"codehilite\"><pre><span></span><code>{\n    &quot;severity&quot;: &quot;warning&quot;,\n    &quot;code&quot;: &quot;processing&quot;,\n    &quot;diagnostics&quot;: &quot;The questionnaire \\&quot;http://hl7.org/fhir/us/sirb/Questionnaire/sirb-recruitment-questionnaire|0.1.0\\&quot; could not be resolved, so no validation can be performed against the base questionnaire&quot;,\n    &quot;location&quot;: [ &quot;Parameters.parameter[0].resource.ofType(Parameters).parameter[0].resource.ofType(QuestionnaireResponse)&quot;, &quot;Line 16, Col 109&quot; ]\n  }\n</code></pre></div>\n\n\n<p>The canonical reference looks like this: <br>\n<code>\"questionnaire\": \"http://hl7.org/fhir/us/sirb/Questionnaire/sirb-recruitment-questionnaire|0.1.0\",</code></p>\n<p>It seems to work just fine, if I remove the |{version}. Is this validation not supported in HAPI? From <a href=\"https://www.hl7.org/fhir/references.html#canonical\">https://www.hl7.org/fhir/references.html#canonical</a> I assume that the canonical reference is stated correctly.</p>",
        "id": 200894671,
        "sender_full_name": "Signe Hejgaard Kristoffersen",
        "timestamp": 1592230572
    },
    {
        "content": "<p>should be. can you give me both questionnaire and questionnaireResponse  samples so i can test?</p>",
        "id": 200915495,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1592239778
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span>  I have been using this (<a href=\"http://hapi.fhir.org/baseR4/Questionnaire/1167196/_history/1\">http://hapi.fhir.org/baseR4/Questionnaire/1167196/_history/1</a>) as the Questionnaire, and this QuestionnaireResponse: </p>\n<div class=\"codehilite\"><pre><span></span><code>{\n  &quot;resourceType&quot;: &quot;QuestionnaireResponse&quot;,\n  &quot;id&quot;: &quot;220293&quot;,\n  &quot;meta&quot;: {\n    &quot;versionId&quot;: &quot;1&quot;,\n    &quot;lastUpdated&quot;: &quot;2019-12-05T10:40:10.257+00:00&quot;,\n    &quot;source&quot;: &quot;#8VT59CPwUir1ahuR&quot;\n  },\n  &quot;text&quot;: {\n    &quot;status&quot;: &quot;generated&quot;,\n    &quot;div&quot;: &quot;&lt;div xmlns=\\&quot;http://www.w3.org/1999/xhtml\\&quot;&gt;\\n      &lt;pre&gt;\\n            Comorbidity? YES\\n              Cardial Comorbidity? YES\\n                Angina? YES\\n                MI? NO\\n              Vascular Comorbidity?\\n                (no answers)\\n              ...\\n            Histopathology\\n              Abdominal\\n                pT category: 1a\\n              ...\\n          &lt;/pre&gt;\\n    &lt;/div&gt;&quot;\n  },\n  &quot;identifier&quot;: {\n    &quot;system&quot;: &quot;http://acme.com/lab/reports&quot;,\n    &quot;value&quot;: &quot;5234342&quot;\n  },\n  &quot;basedOn&quot;: [ {\n    &quot;reference&quot;: &quot;CarePlan/220209&quot;\n  } ],\n  &quot;partOf&quot;: [ {\n    &quot;reference&quot;: &quot;Procedure/220213&quot;\n  } ],\n  &quot;questionnaire&quot;: &quot;http://hl7.org/fhir/us/sirb/Questionnaire/sirb-recruitment-questionnaire|0.1.0&quot;,\n  &quot;status&quot;: &quot;entered-in-error&quot;,\n  &quot;subject&quot;: {\n    &quot;reference&quot;: &quot;Patient/220224&quot;,\n    &quot;display&quot;: &quot;Peter James Chalmers&quot;\n  },\n  &quot;encounter&quot;: {\n    &quot;reference&quot;: &quot;Encounter/220211&quot;\n  },\n  &quot;authored&quot;: &quot;2014-12-11T04:44:16Z&quot;,\n  &quot;author&quot;: {\n    &quot;reference&quot;: &quot;Patient/220224&quot;\n  },\n  &quot;source&quot;: {\n    &quot;reference&quot;: &quot;Practitioner/220207&quot;\n  },\n  &quot;item&quot;: [ {\n    &quot;linkId&quot;: &quot;1.1&quot;,\n    &quot;answer&quot;: [ {\n      &quot;valueCoding&quot;: {\n        &quot;code&quot;: &quot;LA6560-2&quot;,\n        &quot;display&quot;: &quot;Confused&quot;\n      }\n    } ]\n  } ]\n}\n</code></pre></div>\n\n\n<p>The same warning occurs if I try to do a canonical reference to a specific version of a ValueSet in Questionnaire.item.answerValueSet.</p>",
        "id": 200982313,
        "sender_full_name": "Signe Hejgaard Kristoffersen",
        "timestamp": 1592293656
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191319\">@James Agnew</span> / <span class=\"user-mention\" data-user-id=\"248736\">@Mark Iantorno</span>  this works fine in the validator itself, but apparently fails in HAPI - I presume this is because the HAPI context cannot resolve <a href=\"http://hl7.org/fhir/us/sirb/Questionnaire/sirb-recruitment-questionnaire|0.1.0\">http://hl7.org/fhir/us/sirb/Questionnaire/sirb-recruitment-questionnaire|0.1.0</a> where as the validator's context does</p>",
        "id": 201047895,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1592328309
    },
    {
        "content": "<p>I'll take a look into it now</p>",
        "id": 201048060,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1592328385
    },
    {
        "content": "<p>Just as an update, I'm dedicating my morning to this. I am having build issues with HAPI though, that I am working to resolve</p>",
        "id": 201145475,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1592402821
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> <span class=\"user-mention\" data-user-id=\"256845\">@Signe Hejgaard Kristoffersen</span> what -ig are you passing in to the validator when you run this?</p>",
        "id": 201154839,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1592406491
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"248736\">@Mark Iantorno</span> I get the warning when using the validator in the CRUD operations at <a href=\"http://hapi.fhir.org\">hapi.fhir.org</a> with the QuestionnaireResponse I pasted above.</p>",
        "id": 201247095,
        "sender_full_name": "Signe Hejgaard Kristoffersen",
        "timestamp": 1592473510
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> What was the command you ran in the CLI to get this to work locally?</p>",
        "id": 201271863,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1592489017
    },
    {
        "content": "<p>You had to reference an IG, no?</p>",
        "id": 201271891,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1592489028
    },
    {
        "content": "<p>I just talked to James about this, and he let me know that versioned canonical references are not currently supported by HAPI, but it is on the development roadmap, and should be part of the August release.</p>",
        "id": 201274661,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1592490181
    },
    {
        "content": "<p>ok great thanks</p>",
        "id": 201296292,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1592499360
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"248736\">Mark Iantorno</span> <a href=\"#narrow/stream/179167-hapi/topic/Validation.20of.20canonical.20.2B.20version/near/201274661\">said</a>:</p>\n<blockquote>\n<p>I just talked to James about this, and he let me know that versioned canonical references are not currently supported by HAPI, but it is on the development roadmap, and should be part of the August release.</p>\n</blockquote>\n<p>great news! Thanks. Currently hapi can't validate the german base profiles because we are using versioned canonical links.</p>",
        "id": 202800961,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1593781053
    }
]