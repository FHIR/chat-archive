[
    {
        "content": "<p>I am trying to use FhirInstanceValidator with following configuration :</p>\n<div class=\"codehilite\"><pre><span></span>compile group: &#39;ca.uhn.hapi.fhir&#39;, name: &#39;hapi-fhir-base&#39;, version: &#39;2.5&#39;\ncompile group: &#39;ca.uhn.hapi.fhir&#39;, name: &#39;hapi-fhir-structures-dstu3&#39;, version: &#39;2.5&#39;\ncompile group:&#39;ca.uhn.hapi.fhir&#39;, name:&#39;hapi-fhir-validation&#39;, version:&#39;3.7.0&#39;\ncompile group:&#39;ca.uhn.hapi.fhir&#39;, name:&#39;hapi-fhir-validation-resources-dstu3&#39;, version:&#39;3.7.0&#39;\n</pre></div>\n\n\n<p>However, I get result as true (ideally it should be false as Observation.status is mandatory) after executing following :</p>\n<div class=\"codehilite\"><pre><span></span>FhirContext ctx = FhirContext.forDstu3();\n\n    // Create a FhirInstanceValidator and register it to a validator\n    FhirValidator validator = ctx.newValidator();\n    FhirInstanceValidator instanceValidator = new FhirInstanceValidator();\n    validator.registerValidatorModule(instanceValidator);\n\n\n    Observation obs = new Observation();\n    obs.getCode().addCoding().setSystem(&quot;http://loinc.org&quot;).setCode(&quot;12345-6&quot;);\n    obs.setValue(new StringType(&quot;This is a value&quot;));\n\n    // Validate\n    ValidationResult result = validator.validateWithResult(obs);\n</pre></div>\n\n\n<p>I am getting following in logs :</p>\n<div class=\"codehilite\"><pre><span></span>Unable to load resource: /org/hl7/fhir/instance/model/dstu3/profile/profiles-resources.xml\n</pre></div>\n\n\n<p>It seems that the org.hl7.fhir.dstu3.hapi.validation.DefaultProfileValidationSupport.java  has following code :</p>\n<div class=\"codehilite\"><pre><span></span> loadStructureDefinitions(theContext, structureDefinitions, &quot;/org/hl7/fhir/instance/model/dstu3/profile/profiles-resources.xml&quot;);\n  loadStructureDefinitions(theContext, structureDefinitions, &quot;/org/hl7/fhir/instance/model/dstu3/profile/profiles-types.xml&quot;);\n  loadStructureDefinitions(theContext, structureDefinitions, &quot;/org/hl7/fhir/instance/model/dstu3/profile/profiles-others.xml&quot;);\n</pre></div>\n\n\n<p>In the above code, the path to profile xml contains \"<strong>/instance</strong>\" and the word \"dstu3\" after word \"model\" however, the actual profiles in jar - hapi-fhir-validation-resources-dstu3-3.0.0.jar are at location </p>\n<p><strong>/org/hl7/fhir/dstu3/model/profile/profiles-resources.xml</strong></p>\n<p>Is this a bug in HAPI ?</p>",
        "id": 164718828,
        "sender_full_name": "Aditya",
        "timestamp": 1556811642
    },
    {
        "content": "<p>HAPI is definitely not designed to work with different versions of the library on your classparth. You should replace the <code>2.5</code> with <code>3.7.0</code> for all dependencies.</p>",
        "id": 164926442,
        "sender_full_name": "James Agnew",
        "timestamp": 1557073933
    }
]