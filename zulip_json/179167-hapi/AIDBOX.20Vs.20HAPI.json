[
    {
        "content": "<p>Hi Team, </p>\n<p>I am new to FHIR. I am evaluate frameworks which are FHIR implementations. I came across AIDBOX vs HAPI two frameworks. I know HAPI is more mature than AIDBOX. I have few queries related to this, would you please clarify if possible</p>\n<p>o In case of AIDBOX they use PostgreSQL with JSONB to store resources and the whole JSON will be indexed. In case of HAPI, I would see its stored in encrypted format and not sure about the performance.</p>\n<p>o In HAPI, if I wanted to query data from PostgreSQL console how do I do that? As the resource data is stored in hfj_resource table in encrypted format. Shall we store data in plain?</p>\n<p>o Do you have any reference link related to custom query to fire i.e. joins etc ? Like below to find high risk patients ( this query from FHIREBASE)</p>\n<p>SELECT DISTINCT(<a href=\"http://p.id\" title=\"http://p.id\">p.id</a>), p.resource#&gt;'{name,0}'<br>\nFROM patient p<br>\nJOIN observation o ON o.resource#&gt;&gt;'{subject,id}' = <a href=\"http://p.id\" title=\"http://p.id\">p.id</a><br>\nWHERE (o.resource @&gt; '{\"code\": {\"coding\": [{\"code\": \"72166-2\"}]}}'::jsonb) -- LOINC: Smoking status<br>\nAND ((o.resource @&gt; '{\"value\": {\"CodeableConcept\": { \"coding\": [{\"code\": \"449868002\"}]}}}') -- SNOMED: Current every day smoker<br>\nOR (o.resource @&gt; '{\"value\": {\"CodeableConcept\": { \"coding\": [{\"code\": \"8517006\"}]}}}')) -- SNOMED: Former smoker<br>\nAND (extract(year from age(now(), (p.resource-&gt;&gt;'birthDate')::date)) &gt; 45) -- patient's age &gt; 45<br>\nAND (p.resource-&gt;&gt;'gender' = 'male'); -- patient gender is male</p>\n<p>o If we go with Hapi, which database will be good in case of performance and reliability?</p>\n<p>Regards,<br>\nKishore</p>",
        "id": 192945499,
        "sender_full_name": "Kishore Karanam",
        "timestamp": 1586070046
    },
    {
        "content": "<p>HAPI's database design isn't really intended for direct query, the idea is that you'd use the REST interface for queries.</p>\n<p>I don't know how the syntax you quoted works exactly, but it looks like you could probably reproduce that query using a search on the Patient resoruce with a combination of <code>_has</code> parameters.</p>",
        "id": 193027003,
        "sender_full_name": "James Agnew",
        "timestamp": 1586172114
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"279545\">@Kishore Karanam</span> Have a look at <a href=\"https://www.hl7.org/fhir/R4/search.html#has\" title=\"https://www.hl7.org/fhir/R4/search.html#has\">https://www.hl7.org/fhir/R4/search.html#has</a></p>",
        "id": 193128183,
        "sender_full_name": "Igor Sirkovich",
        "timestamp": 1586230057
    },
    {
        "content": "<p>Would <a href=\"http://hl7.org/fhir/graphql.html\" title=\"http://hl7.org/fhir/graphql.html\">graphQl</a> be an option for the queries you're after <span class=\"user-mention\" data-user-id=\"279545\">@Kishore Karanam</span>  ?</p>",
        "id": 193228068,
        "sender_full_name": "David Hay",
        "timestamp": 1586283868
    }
]