[
    {
        "content": "<p>Hi everyone ....we are using hapifhir to call an FHIR compliant API...........as part of this...we need to search for <strong>Coverage</strong> resource.....need guidance in preparing the request params for the same...</p>\n<p><strong>Code to search the Coverage Resource -</strong></p>\n<div class=\"codehilite\"><pre><span></span><code>Bundle bundle2 = client\n    .search()\n    .forResource(Coverage.class)\n    .where(Coverage.BENEFICIARY.hasChainedProperty(Patient.FAMILY.matches().value(&quot;UONOMI&quot;))).\n        and(Coverage.BENEFICIARY.hasChainedProperty(Patient.GIVEN.matches().value(&quot;TYREEK&quot;))).\n        and(Coverage.BENEFICIARY.hasChainedProperty(Patient.BIRTHDATE.beforeOrEquals().day(&quot;1926-12-29&quot;))).\n        where(new TokenClientParam(&quot;Coverage.period.end&quot;).exactly().code(&quot;2020-11-05&quot;))\n    .where(new TokenClientParam(&quot;Coverage.period.start&quot;).exactly().code(&quot;2020-11-05&quot;)).\n        and(Coverage.BENEFICIARY.hasChainedProperty(\n            Patient.IDENTIFIER.hasSystemWithAnyCode((&quot;http://terminology.hl7.org/CodeSystem/v2-0203|MB|101210097&quot;)))).\n        include(Coverage.INCLUDE_BENEFICIARY)\n    .returnBundle(Bundle.class)\n    .withAdditionalHeader(&quot;Content-Type&quot;, &quot;application/x-www-form-urlencoded&quot;).withAdditionalHeader(&quot;x-subject-id&quot;, &quot;1&quot;)\n    .execute();\n</code></pre></div>\n\n<p><strong>Error:</strong></p>\n<p>2020-11-05 21:27:43.968 TRACE 13960 --- [nio-8080-exec-3] ca.uhn.fhir.rest.client.impl.BaseClient  : FHIR response:<br>\nca.uhn.fhir.rest.client.apache.ApacheHttpResponse@37fecfeb<br>\n{\"issue\":[{\"severity\":\"error\",\"diagnostics\":\"\",\"code\":\"invalid\",\"expression\":\"Bundle\",\"details\":{\"text\":\"object instance has properties which are not allowed by the schema: ['beneficiary.identifier','beneficiary.identifier..code','beneficiary.identifier..system','beneficiary.identifier..value']\"}}],\"resourceType\":\"OperationOutcome\"}<br>\nca.uhn.fhir.rest.server.exceptions.InvalidRequestException: HTTP 400 Bad Request<br>\n    at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)<br>\n    at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)<br>\n    at java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)</p>",
        "id": 215808784,
        "sender_full_name": "Shiva Kumar Konduru",
        "timestamp": 1604641943
    },
    {
        "content": "<p>I do have one question on the coverage API. My app has a list of insurance plan names that it can accept. Anything that does not belong to the list should not go to HAPI server</p>",
        "id": 216072912,
        "sender_full_name": "Vibin_chander",
        "timestamp": 1604922138
    },
    {
        "content": "<p>Any idea if it is possible to restrict it in HAPI. Meaning, making HAPI to reject the coverage resource if it does not have the plan name preloaded in hapi</p>",
        "id": 216073018,
        "sender_full_name": "Vibin_chander",
        "timestamp": 1604922220
    }
]