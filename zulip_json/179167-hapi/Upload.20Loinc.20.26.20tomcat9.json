[
    {
        "content": "<p>While trying to upload LOINC as an exernal CS the following exception is thrown:</p>\n<div class=\"codehilite\"><pre><span></span><code>May 26 13:53:15 vitu-data tomcat9[2264]: 2020-05-26 13:53:15.006 [http-nio-8080-exec-5] INFO  fhirtest.access [LoggingInterceptor.java:175] Path[/fhir] Source[] Operation[metadata  ] UA[HAPI-FHIR/5.0.0 (FHIR Client; FHIR 4.0.1/R4; apache)] Params[] ResponseEncoding[JSON]\nMay 26 13:53:21 vitu-data tomcat9[2264]: 2020-05-26 13:53:15.199 [http-nio-8080-exec-6] INFO  c.u.f.j.p.TerminologyUploaderProvider [TerminologyUploaderProvider.java:337] Reading in local file: /tmp/hapi-fhir-cli4151838015365947647.zip\nMay 26 13:53:21 vitu-data tomcat9[2264]: 2020-05-26 13:53:15.199 [http-nio-8080-exec-6] WARN  c.u.f.r.s.i.ExceptionHandlingInterceptor [ExceptionHandlingInterceptor.java:147] Failure during REST processing: ca.uhn.fhir.rest.server.exceptions.InvalidRequestException: Unknown file: hapi-fhir-cli4151838015365947647.zip\nMay 26 13:53:21 vitu-data tomcat9[2264]: 2020-05-26 13:53:15.199 [http-nio-8080-exec-6] INFO  fhirtest.access [LoggingInterceptor.java:160] ERROR - POST http://localhost:8080/fhir/CodeSystem/$upload-external-code-system\n</code></pre></div>\n\n\n<p><code>Unknown file: hapi-fhir-cli4151838015365947647.zip</code>points to a zip which should be in tmp, but isn't</p>",
        "id": 198751370,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1590494459
    },
    {
        "content": "<p>This worked in 4.2.0</p>",
        "id": 198751482,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1590494514
    },
    {
        "content": "<p>Ok isn't working in tomcat9 with hapi 4.2.0. Probably a Tomcat9/Ubuntu Sandbox issue.</p>",
        "id": 198755600,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1590496994
    },
    {
        "content": "<p>i now added a watcher on /tmp. The file is there, but removed after failing</p>",
        "id": 198757304,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1590497863
    },
    {
        "content": "<p>also added:</p>\n<div class=\"codehilite\"><pre><span></span><code>[Service]\nReadWritePaths=/tmp /opt/hapi/hapi_luceneindex\n</code></pre></div>\n\n\n<p>to /etc/systemd/system/tomcat9.service.d/override.conf<br>\nTo prevent sandbox issues.</p>",
        "id": 198757483,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1590497936
    },
    {
        "content": "<p>Did anyone experience similar issues before? (Ubuntu 18.04, Tomcat9)</p>",
        "id": 198757597,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1590497989
    },
    {
        "content": "<p>tested with hapi 5 and 4.2. Same errors</p>",
        "id": 198757671,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1590498005
    },
    {
        "content": "<p>Tested with tomcat8: works. <br>\nAnyone experienced with tomcat9, sandbox and why <code>ReadWritePaths=/tmp /opt/hapi/hapi_luceneindex</code> doesn't work?</p>",
        "id": 198758891,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1590498589
    },
    {
        "content": "<p>if you can show that it is a problem in alpine in docker, I'll have a look</p>",
        "id": 198823543,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1590528244
    },
    {
        "content": "<p>will provide an example later this week</p>",
        "id": 198852016,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1590559128
    }
]