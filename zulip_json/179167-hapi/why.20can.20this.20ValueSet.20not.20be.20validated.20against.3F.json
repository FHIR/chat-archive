[
    {
        "content": "<p>Hi,<br>\nWhen validating the following test patient against a profile I get the following validation warning:</p>\n<p><strong>GET</strong> <a href=\"http://hapi.fhir.org/baseDstu3/Patient/2725779/$validate\">http://hapi.fhir.org/baseDstu3/Patient/2725779/$validate</a></p>\n<div class=\"codehilite\"><pre><span></span><code>...\n        {\n            &quot;severity&quot;: &quot;warning&quot;,\n            &quot;code&quot;: &quot;processing&quot;,\n            &quot;diagnostics&quot;: &quot;Could not confirm that the codes provided are in the value set http://decor.nictiz.nl/fhir/ValueSet/2.16.840.1.113883.2.4.3.11.60.40.2.20.5.2--20171231000000, and a code should come from this value set unless it has no suitable code&quot;,\n            &quot;location&quot;: [\n                &quot;Patient.address[0].country.extension[0].value.ofType(CodeableConcept).coding[0]&quot;,\n                &quot;Line 1, Col 511&quot;\n            ]\n        }\n...\n</code></pre></div>\n\n\n<p>The valueset itself includes country codes from the codesystem urn:iso:std:iso:3166 which is part of STU3 according to <a href=\"https://www.hl7.org/fhir/stu3/terminologies-systems.html\">https://www.hl7.org/fhir/stu3/terminologies-systems.html</a></p>\n<p><strong>GET</strong> <a href=\"http://hapi.fhir.org/baseDstu3/ValueSet/2.16.840.1.113883.2.4.3.11.60.40.2.20.5.2--20171231000000\">http://hapi.fhir.org/baseDstu3/ValueSet/2.16.840.1.113883.2.4.3.11.60.40.2.20.5.2--20171231000000</a></p>\n<div class=\"codehilite\"><pre><span></span><code>    &quot;compose&quot;: {\n        &quot;include&quot;: [\n            {\n                &quot;system&quot;: &quot;urn:iso:std:iso:3166&quot;\n            }\n        ]\n    }\n</code></pre></div>\n\n\n<p>I have seen ValueSet validation work in HAPI before, so I'm wondering why it is unable to do so in this case. Does the ValueSet validation not support the \"include\" mechanisms for codesystems?<br>\nAs always, all help is very much appreciated!</p>",
        "id": 202323782,
        "sender_full_name": "Job Schipper",
        "timestamp": 1593443377
    },
    {
        "content": "<p>what is your nominated terminology server?</p>",
        "id": 202358002,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1593459358
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span>  I have no idea to be honest. How can i find out?</p>",
        "id": 202419480,
        "sender_full_name": "Job Schipper",
        "timestamp": 1593514262
    },
    {
        "content": "<p>well, it'll be the way you set HAPI up. Unless you are using the CLI directly</p>",
        "id": 202497564,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1593552596
    },
    {
        "content": "<p>in my case i am using the public test server @ <a href=\"http://hapi.fhir.org/baseDstu3/\">http://hapi.fhir.org/baseDstu3/</a>  (which happens to be down right now).<br>\nIs there a way to retrieve what terminology server it is using from the API?</p>\n<p>Also we are  in the process of setting up our own HAPI JPA server, so I am interestig to learn more about setting this up. Is there any documentation you can recommend on this subject? I've been looking at <a href=\"https://hapifhir.io/hapi-fhir/docs/server_jpa/introduction.html\">https://hapifhir.io/hapi-fhir/docs/server_jpa/introduction.html</a> but i haven't seen anything on configuring a terminology server.</p>",
        "id": 202697707,
        "sender_full_name": "Job Schipper",
        "timestamp": 1593700986
    },
    {
        "content": "<p>Hi <span class=\"user-mention\" data-user-id=\"294094\">@Job Schipper</span> - FYI this looks to be a bug in HAPI's term service, I was able to reproduce the results you're seeing locally. We do support ISO3166 validation but it doesn't look like it's working for pre-expanded ValueSets. I'm still investigating why.</p>",
        "id": 203116530,
        "sender_full_name": "James Agnew",
        "timestamp": 1594135182
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191319\">@James Agnew</span> interesting, did you find out more?</p>",
        "id": 203687491,
        "sender_full_name": "Job Schipper",
        "timestamp": 1594627516
    },
    {
        "content": "<p>Yup, this has been fixed on current master. The validation you linked above now works correctly.</p>",
        "id": 203696104,
        "sender_full_name": "James Agnew",
        "timestamp": 1594633981
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191319\">@James Agnew</span> Great, thanks a lot!</p>",
        "id": 204068759,
        "sender_full_name": "Job Schipper",
        "timestamp": 1594896739
    }
]