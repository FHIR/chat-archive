[
    {
        "content": "<p>So, to get concrete about prototypes... we have the latest SMART on FHIR launcher (including support for the about-to-be-published <a href=\"http://build.fhir.org/ig/HL7/smart-app-launch/\">SMARTv2 spec</a>) at <a href=\"https://smart.argo.run\">https://smart.argo.run</a>. It acts as a proxy in front of the open server hosted at <a href=\"https://r4.smarthealthit.org\">https://r4.smarthealthit.org</a>, implementing support for SMART on FHIR launch as well as token introspection. What this means is that </p>\n<ul>\n<li>a client app can \"register\" (or not; the launcher isn't picky) and request authorization for a specific patient record</li>\n<li>an imaging API server can receive API calls that include an access token, and can introspect this token by calling the the <code>introspection_endpoint</code> endpoint listed in <code>[FHIR base]/.well-known/smart-configuration</code> to receive a payload like:</li>\n</ul>\n<div class=\"codehilite\"><pre><span></span><code>{\n    &quot;patient&quot;: &quot;87a339d0-8cae-418e-89c7-8651e6aab3c6&quot;,\n    &quot;token_type&quot;: &quot;bearer&quot;,\n    &quot;scope&quot;: &quot;launch/patient patient/ImagingStudy.rs patient/Patient.rs&quot;,\n    &quot;client_id&quot;: &quot;smart_granular_app&quot;,\n    &quot;active&quot;: true,\n    // extra properties snipped\n}\n</code></pre></div>\n<p>This introspection payload should have all the data needed (<code>patient</code>, <code>scope</code>, <code>active</code>) for an imaging API server to perform authz on a request like <code>GET /fhir/ImagingStudy?patient=X</code> or <code>GET /dicomweb/studies/Y</code>.</p>",
        "id": 260425486,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1636128265
    },
    {
        "content": "<p>The source for (this branch of) the SMART Launcher is at <a href=\"https://github.com/microsoft-healthcare-madison/smart-launcher\">https://github.com/microsoft-healthcare-madison/smart-launcher</a>; we've got a PR underway to incorporate the latest functionality back into <a href=\"https://github.com/smart-on-fhir/smart-launcher\">https://github.com/smart-on-fhir/smart-launcher</a></p>",
        "id": 260425603,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1636128320
    },
    {
        "content": "<p>So for a demo, I think we'd want:</p>\n<ol start=\"0\">\n<li>An imaging server (or pair of 'em) supporting <code>GET /fhir/ImagingStudy?patient=X</code> and <code>GET /dicomweb/studies/Y</code>, enforcing authz based on token introspection</li>\n<li>A simple web app that authorizes against the launcher and then fetches some patient demographics from the launcher's clinical data server + fetches some imaging data from the Imaging server</li>\n</ol>",
        "id": 260426277,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1636128589
    },
    {
        "content": "<p>Now that I think of it, the fastest way to get this done is to implement a server that implements the needed FHIR and DICOMweb endpoints for some static data.  Another benefit of this is that it would make it much easier for others to understand so they can implement it themselves (my ultimate goal)</p>",
        "id": 260439521,
        "sender_full_name": "Chris Hafey",
        "timestamp": 1636134236
    },
    {
        "content": "<p>that long with a simple image viewer built with cornerstone should be easy to do</p>",
        "id": 260439629,
        "sender_full_name": "Chris Hafey",
        "timestamp": 1636134270
    },
    {
        "content": "<p>Re: server implementing support for static data just to be clear, you mean a \"dynamic\" web server that can parse query params and authz headers (etc), but for which the \"backing store\" is basically a directory with a few JSON + DICOM files in it? I agree, that's a great model.</p>",
        "id": 260441702,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1636135144
    },
    {
        "content": "<p>I think this could be a ~200-line Node.js app. (Then we can talk about other \"persistence modules\" that would allow this server to source data from a PACS or whatever. There's going to be some real value, one the very bare bones work, to showing how to connect this into real underlying imaging data sources.)</p>",
        "id": 260441811,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1636135200
    },
    {
        "content": "<p>(On the real-world integration front, the hard and interesting bits are like: given a FHIR Patient id, how do I know which DICOM files \"belong to\" this patient? You need some mapping/matching strategy that's often institution-specific.)</p>",
        "id": 260442398,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1636135420
    },
    {
        "content": "<p>yes exactly and nodejs is exactly what I was planning to do it in.</p>",
        "id": 260454542,
        "sender_full_name": "Chris Hafey",
        "timestamp": 1636141110
    },
    {
        "content": "<p>for real world integration, yes I can see this being an integration issue.  Most PACS/VNA systems are synchronized with the PHR nowadays so it may not be too bad.  I have not heard of many customers integrating PACS/VNA with FHIR yet though - I think it is still in early adoption phase</p>",
        "id": 260454876,
        "sender_full_name": "Chris Hafey",
        "timestamp": 1636141297
    },
    {
        "content": "<p>All - realistically I won't be able to move this forward until December due to RSNA and US Thanksgiving Holidays coming up.</p>",
        "id": 261281366,
        "sender_full_name": "Chris Hafey",
        "timestamp": 1636736571
    },
    {
        "content": "<p>Thanks for the heads up! If anyone feels the urge to start a project before then, I'd say drop a note here :-)</p>",
        "id": 261284271,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1636737892
    },
    {
        "content": "<p>I've been tinkering a bit at the FHIR connecthon this week --  using Epic's support for Introspection to try things out.</p>",
        "id": 267647915,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1641936634
    },
    {
        "content": "<p><a href=\"https://github.com/jmandel/smart-imaging-c10n-2022-01\">https://github.com/jmandel/smart-imaging-c10n-2022-01</a> is what I put together as a quick demo. It works around some current limitations in the Epic introspection API, resolves the FHIR Patient full resource associated with an access token, and provides access to some canned DICOM images. The major gap right now is that Epic's authorization UX doesn't provide any way for consumers to review/approve a request that includes \"Imaging Data\". Just USCDI stuff.</p>",
        "id": 267766693,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1642012327
    },
    {
        "content": "<p>We (<span class=\"user-mention\" data-user-id=\"191315\">@Josh Mandel</span> <span class=\"user-mention\" data-user-id=\"222054\">@Gino Canessa</span> and a few others) are still actively looking for folks who may want to test out this spec. If you are interested, please let us know via this thread or offline.</p>",
        "id": 275719429,
        "sender_full_name": "Ryan Howells",
        "timestamp": 1647548093
    },
    {
        "content": "<p>This thread only has a handful of subscribers -- folks who have already indicated interest. It's likely not a good place to cast a net!</p>",
        "id": 275719628,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1647548164
    },
    {
        "content": "<p>I've reached out to some contacts to see if I can drum up some interest!</p>",
        "id": 275719698,
        "sender_full_name": "Ricky Bloomfield",
        "timestamp": 1647548197
    },
    {
        "content": "<p>I'm still actively looking as well. It came up today in a conversation with an app that may have some interest from a health system.</p>",
        "id": 277931682,
        "sender_full_name": "Ryan Howells",
        "timestamp": 1649186747
    },
    {
        "content": "<p>I have two people who are looking into it at their respective organizations. Neither of them have said \"no\" yet, so that's a start!</p>",
        "id": 277938683,
        "sender_full_name": "Ricky Bloomfield",
        "timestamp": 1649190360
    },
    {
        "content": "<p>Ping. <span class=\"user-mention\" data-user-id=\"197037\">@Jonathan Whitby</span> <span class=\"user-mention\" data-user-id=\"193597\">@Chris Hafey</span> <span class=\"user-mention\" data-user-id=\"277357\">@Christopher Lindop</span> <span class=\"user-mention\" data-user-id=\"194118\">@Kinson</span> <span class=\"user-mention\" data-user-id=\"462175\">@David Kwan</span> <span class=\"user-mention\" data-user-id=\"197447\">@Diana_Ovelgoenne</span> <span class=\"user-mention\" data-user-id=\"253949\">@Brian Bialecki</span> <span class=\"user-mention\" data-user-id=\"193441\">@Chris Carr</span> <span class=\"user-mention\" data-user-id=\"195336\">@Eric Martin</span> <span class=\"user-mention\" data-user-id=\"191960\">@Brad Genereaux</span></p>",
        "id": 277952434,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1649198019
    },
    {
        "content": "<p>I'm not sure I can help with testing, but happy to ideate or talk through any issues!</p>",
        "id": 278114706,
        "sender_full_name": "Brad Genereaux",
        "timestamp": 1649303928
    }
]