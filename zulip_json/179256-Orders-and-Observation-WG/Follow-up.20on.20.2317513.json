[
    {
        "content": "<p>Also checking in on #17513.  Per specimen meeting on Tuesday 7/24, it was suggested to add these to specimen vs alter the dateTime.  Have you heard any updates?</p>\n<p><a href=\"https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=17513\" target=\"_blank\" title=\"https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=17513\">https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=17513</a></p>",
        "id": 153978728,
        "sender_full_name": "Christine D",
        "timestamp": 1532706716
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191359\">@Bryn Rhodes</span>, where are we at with a generic \"relative dateTime\" extension?</p>",
        "id": 153978738,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1532707513
    },
    {
        "content": "<p>Within PlanDefinition and RequestGroup we use the relatedAction element for that, which allows you to specify an offset and anchor relative to another action. A generic extension to support that would need to know what it was relative to, and how to interpret the \"effective period\" for that target.</p>",
        "id": 153978750,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1532708038
    },
    {
        "content": "<p>So that would look like a target 1..1 Resource(Any) and a targetEffectivePeriodPath 1..1 String that would resolve to some temporal-valued element on the target resource.</p>",
        "id": 153978752,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1532708108
    },
    {
        "content": "<p>Would that work?</p>",
        "id": 153978754,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1532708136
    },
    {
        "content": "<p>Plus a duration (positive or negative) to express the offset.  Though in practice, the reference event is often expressed as a code.  Using a reference is better though because you can have situations where there may be multiple reference points.  E.g. \"This observation happened 30 days post-transplant A and 10 days pre-transplant B\" or \"This procedure happened 30 days pre-start-of-treatmentfor trial A and 2 years post-start-of-treatement for trial B\"</p>",
        "id": 153978757,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1532708388
    },
    {
        "content": "<p>I think all of the systems that use code <em>should</em> be able to resolve the StudyPubject or Procedure resource that's relevant and should know the path for the relevant time data element, so lets try that and see how it goes.</p>",
        "id": 153978758,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1532708490
    },
    {
        "content": "<p>Sounds good, I'm working on extensions now.</p>",
        "id": 153978762,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1532708699
    },
    {
        "content": "<p>Hi <span class=\"user-mention\" data-user-id=\"191359\">@Bryn Rhodes</span> , we were just talking about this tracker in the specimen call with <span class=\"user-mention\" data-user-id=\"191698\">@Riki Merrick</span> .  Could you please help us understand the extension and the status of the extension?  Thank you!</p>",
        "id": 153979825,
        "sender_full_name": "Christine D",
        "timestamp": 1533067424
    },
    {
        "content": "<p>Sure, the extension is defined here: <a href=\"http://build.fhir.org/extension-cqf-relativedatetime.html\" target=\"_blank\" title=\"http://build.fhir.org/extension-cqf-relativedatetime.html\">http://build.fhir.org/extension-cqf-relativedatetime.html</a></p>",
        "id": 153979852,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1533070150
    },
    {
        "content": "<p>What it allows you to do is specify the value of some date/time element as an extension that is calculated as an offset from some target.</p>",
        "id": 153979853,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1533070173
    },
    {
        "content": "<p>So I could put it on an Observation.effective and point it at a Procedure to say this Observation took place two days after this procedure.</p>",
        "id": 153979854,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1533070223
    },
    {
        "content": "<p>We need it on Specimen.collection to document that this collection occurred 30 minutes after administering Glucose or antibiotic X. Will that work?</p>",
        "id": 153979858,
        "sender_full_name": "Riki Merrick",
        "timestamp": 1533070507
    },
    {
        "content": "<p>After administering either of Glucose or antibiotic X?</p>",
        "id": 153979865,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1533070881
    },
    {
        "content": "<p>As in, you're defining in the abstract when this collection should occur? Or you need to indicate in the concrete when it did occur, but relative to some other event?</p>",
        "id": 153979866,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1533070925
    },
    {
        "content": "<p>The latter.</p>",
        "id": 153979905,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1533073208
    },
    {
        "content": "<p>So something like:</p>",
        "id": 153979912,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1533073723
    },
    {
        "content": "<div class=\"codehilite\"><pre><span></span>&lt;Specimen&gt;\n  &lt;collection&gt;\n    &lt;collected&gt;\n      &lt;extension url=&quot;http://hl7.org/fhir/StructureDefinition/cqf-relativeDateTime&quot;&gt;\n        &lt;extension url=&quot;target&quot;&gt;\n          &lt;valueReference&gt;\n            &lt;reference value=&quot;MedicationAdministration/1&quot;/&gt;\n          &lt;/valueReference&gt;\n        &lt;/extension&gt;\n        &lt;extension url=&quot;targetPath&quot;&gt;\n          &lt;valueString value=&quot;effective&quot;/&gt;\n        &lt;/extension&gt;\n        &lt;extension url=&quot;relationship&quot;&gt;\n          &lt;valueCode value=&quot;after-end&quot;/&gt;\n        &lt;/extension&gt;\n        &lt;extension url=&quot;offset&quot;&gt;\n          &lt;valueDuration&gt;\n            &lt;value value=&quot;30&quot;/&gt;\n            &lt;unit value=&quot;min&quot;/&gt;\n          &lt;/valueDuration&gt;\n        &lt;/extension&gt;\n      &lt;/extension&gt;\n    &lt;/collected&gt;\n  &lt;/collection&gt;\n&lt;/Specimen&gt;\n</pre></div>",
        "id": 153979913,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1533073725
    },
    {
        "content": "<p>Yes</p>",
        "id": 153979928,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1533075157
    },
    {
        "content": "<p>(y)</p>",
        "id": 153979967,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1533079957
    },
    {
        "content": "<p>Thank you!</p>",
        "id": 153980083,
        "sender_full_name": "Riki Merrick",
        "timestamp": 1533103107
    },
    {
        "content": "<p>RE <a href=\"http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=17513\" target=\"_blank\" title=\"http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=17513\">GF#17513</a> <span class=\"user-mention\" data-user-id=\"196442\">@Christine D</span>   where are we with this tracker?  It  sounds you may be able to withdraw it?</p>",
        "id": 153992910,
        "sender_full_name": "Eric Haas",
        "timestamp": 1536028629
    },
    {
        "content": "<p>and <a href=\"http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=17514\" target=\"_blank\" title=\"http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=17514\">GF#17514</a> too</p>",
        "id": 153992911,
        "sender_full_name": "Eric Haas",
        "timestamp": 1536028752
    },
    {
        "content": "<p>No resolution is listed for <a href=\"http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=17654\" target=\"_blank\" title=\"http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=17654\">GF#17654</a>, which makes it hard to block-vote :)</p>",
        "id": 153992916,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1536030431
    },
    {
        "content": "<p>(nor for <a href=\"http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=17571\" target=\"_blank\" title=\"http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=17571\">GF#17571</a>)</p>",
        "id": 153992917,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1536030464
    },
    {
        "content": "<p>Thanks I updated - they are both preapplied</p>",
        "id": 153992921,
        "sender_full_name": "Eric Haas",
        "timestamp": 1536030897
    },
    {
        "content": "<p>I am not clear on the resolution for this one.  Is the proposal to use the extension that Bryn listed above?  Same question for 17514.</p>\n<p><a href=\"https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=17513\" target=\"_blank\" title=\"https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=17513\">https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=17513</a><br>\n<a href=\"https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=17514\" target=\"_blank\" title=\"https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=17514\">https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=17514</a></p>\n<p><span class=\"user-mention\" data-user-id=\"195175\">@Angie Romano</span>  what are your thoughts on this?</p>",
        "id": 153993814,
        "sender_full_name": "Christine D",
        "timestamp": 1536241225
    },
    {
        "content": "<p>for #17513, it looks like we just need confirmation from <span class=\"user-mention\" data-user-id=\"191359\">@Bryn Rhodes</span> that the extension has been created to work at the specimen.collection level.  If so, I'll give it a try on our test dataset.</p>",
        "id": 153993821,
        "sender_full_name": "Angie Romano",
        "timestamp": 1536241514
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"195175\">@Angie Romano</span>  The extension: <a href=\"http://build.fhir.org/extension-cqf-relativedatetime.html\" target=\"_blank\" title=\"http://build.fhir.org/extension-cqf-relativedatetime.html\">http://build.fhir.org/extension-cqf-relativedatetime.html</a> states \"Context of Use: Use on Element ID Element\"  which means in laymans  terms that is can be used <em>anywhere</em> in FHIR.</p>",
        "id": 153993858,
        "sender_full_name": "Eric Haas",
        "timestamp": 1536248569
    },
    {
        "content": "<p>...  and what about <a href=\"http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=17514\" target=\"_blank\" title=\"http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=17514\">GF#17514</a>... I don't see how they are different.</p>",
        "id": 153993859,
        "sender_full_name": "Eric Haas",
        "timestamp": 1536248608
    },
    {
        "content": "<p>Hi again!  <span class=\"user-mention\" data-user-id=\"191401\">@Eric Haas</span> in using the extension <a href=\"http://build.fhir.org/extension-cqf-relativedatetime.html\" target=\"_blank\" title=\"http://build.fhir.org/extension-cqf-relativedatetime.html\">http://build.fhir.org/extension-cqf-relativedatetime.html</a>, I have a question about the offset.  It's pointing to either valueDuration or valueRange.  I've tried to use both, but they both reference currency and are looking for a code for money currency.  I would expect to link to a code to pull the duration units (i.e. minutes, hours, days, etc...)  Am I looking at it incorrectly?  Thank you!</p>",
        "id": 153995331,
        "sender_full_name": "Angie Romano",
        "timestamp": 1536594478
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"196442\">@Christine D</span> did you see Eric's question about if 17513 and <a href=\"http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=17514\" target=\"_blank\" title=\"http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=17514\">GF#17514</a> were the same thing?</p>",
        "id": 153995340,
        "sender_full_name": "Angie Romano",
        "timestamp": 1536594647
    },
    {
        "content": "<p>They shouldn't be.  Duration will be constrained to a UCUM code for time.  Range should be open to your choice of code system.  How are you seeing them be constrained?</p>",
        "id": 153995342,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1536594705
    },
    {
        "content": "<p>17513 was for the numeric representation (03-00 to represent 3 hours), while 17514 was for a textual description that included the event context (\"3 hours post dose\").<br>\n<span class=\"user-mention\" data-user-id=\"191401\">@Eric Haas</span> <span class=\"user-mention\" data-user-id=\"195175\">@Angie Romano</span></p>",
        "id": 153995349,
        "sender_full_name": "Christine D",
        "timestamp": 1536595646
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191401\">@Eric Haas</span> and <span class=\"user-mention\" data-user-id=\"196442\">@Christine D</span>.  The extension: <a href=\"http://build.fhir.org/extension-cqf-relativedatetime.html\" target=\"_blank\" title=\"http://build.fhir.org/extension-cqf-relativedatetime.html\">http://build.fhir.org/extension-cqf-relativedatetime.html</a> includes a both of those.  You get the reference to the resource with the event, the duration including units (minutes, hours, etc...), the relationship (i.e. before the referenced resource, after the referenced resource).  I can show you an example if you would like to see one.</p>",
        "id": 153995372,
        "sender_full_name": "Angie Romano",
        "timestamp": 1536599041
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191401\">@Eric Haas</span> would we mention the extension in both 17513 and 17514 since the asks were slightly different in the two trackers? (but both requirements met by a single extension)</p>",
        "id": 153995373,
        "sender_full_name": "Christine D",
        "timestamp": 1536599242
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> here's what I see and here's my json.  It could very well be me :)</p>\n<p>I look at the details for the extension at: <a href=\"http://build.fhir.org/extension-cqf-relativedatetime.html\" target=\"_blank\" title=\"http://build.fhir.org/extension-cqf-relativedatetime.html\">http://build.fhir.org/extension-cqf-relativedatetime.html</a>.  I go to the json tab to view the structure of the json.<br>\nThen I click on duration and I'm taken to this link: <a href=\"http://build.fhir.org/datatypes.html#Duration\" target=\"_blank\" title=\"http://build.fhir.org/datatypes.html#Duration\">http://build.fhir.org/datatypes.html#Duration</a> which references the datatype money.  I wonder if link is just going to the incorrect datatype.  </p>\n<p>Finally, here is that section of json:</p>\n<p>\"extension\": [ <br>\n        {<br>\n          \"extension\": <br>\n          [<br>\n            {<br>\n              \"extension\": <br>\n              [{<br>\n                  \"url\": \"target\",<br>\n                  \"valueReference\": {<br>\n                    \"reference\": \"Encounter/TNCL789311\"}<br>\n              }]<br>\n              },<br>\n                {<br>\n                \"extension\": <br>\n                [{<br>\n                    \"url\": \"targetPath\",<br>\n                    \"valueString\": \"Period\"<br>\n                }]<br>\n                },<br>\n                {<br>\n                \"extension\": <br>\n                  [{<br>\n                      \"url\": \"relationship\",<br>\n                      \"valueString\": \"after-end\"<br>\n                  }]<br>\n                },<br>\n                {<br>\n                \"extension\": <br>\n                [{<br>\n                    \"url\": \"offset\",<br>\n                    \"valueDuration\": <br>\n                    {<br>\n                        \"value\": \"60\",<br>\n                        \"currency\": <br>\n                        {<br>\n                            \"code\": <br>\n                            {<br>\n                                \"system\": \"<a href=\"http://hl7.org/fhir/ValueSet/duration-units\" target=\"_blank\" title=\"http://hl7.org/fhir/ValueSet/duration-units\">http://hl7.org/fhir/ValueSet/duration-units</a>\",<br>\n                                \"value\": \"min\",<br>\n                                \"display\": \"minutes\"<br>\n                            }<br>\n                          }<br>\n                    }<br>\n                }]<br>\n                }<br>\n                ],<br>\n            \"url\": \"<a href=\"http://hl7.org/fhir/StructureDefinition/cqf-relativeDateTime\" target=\"_blank\" title=\"http://hl7.org/fhir/StructureDefinition/cqf-relativeDateTime\">http://hl7.org/fhir/StructureDefinition/cqf-relativeDateTime</a>\"<br>\n        }<br>\n        ],</p>",
        "id": 153995374,
        "sender_full_name": "Angie Romano",
        "timestamp": 1536599362
    },
    {
        "content": "<p>When you click on the link for Duration, look at the top of the screen.  The bottom of the screen where it says \"Money\" is a different type.</p>",
        "id": 153995380,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1536599910
    },
    {
        "content": "<p>got it!  Thanks <span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span>!</p>",
        "id": 153995391,
        "sender_full_name": "Angie Romano",
        "timestamp": 1536601739
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"196442\">@Christine D</span>  if this extension meets your needs for both trackers then with your approval,  I  can mark these trackers as \"withdrawn\".</p>",
        "id": 153995450,
        "sender_full_name": "Eric Haas",
        "timestamp": 1536606869
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191401\">@Eric Haas</span> please mark both trackers (17513 and 17514) as withdrawn.  Thank you!</p>",
        "id": 153995844,
        "sender_full_name": "Christine D",
        "timestamp": 1536690729
    },
    {
        "content": "<p>done</p>",
        "id": 153995852,
        "sender_full_name": "Eric Haas",
        "timestamp": 1536692314
    }
]