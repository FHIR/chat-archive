[
    {
        "content": "<p>I have a question about use of Subject reference in Specimen.</p>\n<p>Let's say our organization collects a buccal swab from a potential stem cell donor and we send it out to a contract lab for tissue typing. We have the potential donor name and demographic info in our system without a FHIR interface. We want to put the specimen info into a Specimen resource so that the reference can be used in a DiagnosticReport/Observation bundle that the lab sends us. The Specimen resource is de-identified and only has a specimen.identifier which we'll later cross-reference to identify the patient in our system. Can we do this? Subject is required for Specimen. What do I put in for Subject? </p>\n<p>e.g.,</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"nt\">&lt;Specimen&gt;</span>\n    <span class=\"nt\">&lt;identifier&gt;</span>\n        <span class=\"nt\">&lt;system</span> <span class=\"na\">value=</span><span class=\"s\">&quot;http://myorg.com&quot;</span><span class=\"nt\">/&gt;</span>\n        <span class=\"nt\">&lt;value</span> <span class=\"na\">value=</span><span class=\"s\">&quot;123&quot;</span><span class=\"nt\">/&gt;</span>\n    <span class=\"nt\">&lt;/identifier&gt;</span>\n    <span class=\"nt\">&lt;collection&gt;</span>\n        <span class=\"nt\">&lt;collectedDateTime</span> <span class=\"na\">value=</span><span class=\"s\">&quot;2016-11-10&quot;</span><span class=\"nt\">/&gt;</span>\n        <span class=\"nt\">&lt;method&gt;</span>\n            <span class=\"nt\">&lt;coding&gt;</span>\n                <span class=\"nt\">&lt;system</span> <span class=\"na\">value=</span><span class=\"s\">&quot;http://hl7.org/fhir/v2/0488&quot;</span><span class=\"nt\">/&gt;</span>\n                <span class=\"nt\">&lt;code</span> <span class=\"na\">value=</span><span class=\"s\">&quot;SWA&quot;</span><span class=\"nt\">/&gt;</span>\n                <span class=\"nt\">&lt;display</span> <span class=\"na\">value=</span><span class=\"s\">&quot;Swab&quot;</span><span class=\"nt\">/&gt;</span>\n            <span class=\"nt\">&lt;/coding&gt;</span>\n        <span class=\"nt\">&lt;/method&gt;</span>\n        <span class=\"nt\">&lt;bodySite&gt;</span>\n            <span class=\"nt\">&lt;coding&gt;</span>\n                <span class=\"nt\">&lt;system</span> <span class=\"na\">value=</span><span class=\"s\">&quot;http://snomed.info/sct&quot;</span><span class=\"nt\">/&gt;</span>\n                <span class=\"nt\">&lt;code</span> <span class=\"na\">value=</span><span class=\"s\">&quot;261063000&quot;</span><span class=\"nt\">/&gt;</span>\n                <span class=\"nt\">&lt;display</span> <span class=\"na\">value=</span><span class=\"s\">&quot;Buccal space&quot;</span><span class=\"nt\">/&gt;</span>\n            <span class=\"nt\">&lt;/coding&gt;</span>\n        <span class=\"nt\">&lt;/bodySite&gt;</span>\n    <span class=\"nt\">&lt;/collection&gt;</span>\n    <span class=\"nt\">&lt;subject&gt;</span>\n        ???\n    <span class=\"nt\">&lt;/subject&gt;</span>\n<span class=\"nt\">&lt;/Specimen&gt;</span>\n</pre></div>",
        "id": 153971890,
        "sender_full_name": " Bob Milius",
        "timestamp": 1530037267
    },
    {
        "content": "<p>We talked about this a dev-days. what about the specimen id - this is an opaque identifier still right?</p>\n<div class=\"codehilite\"><pre><span></span>...\n    &lt;subject&gt;\n        &lt;identifier&gt;[specimen id]&lt;/identifier&gt;\n    &lt;/subject&gt;\n...\n</pre></div>",
        "id": 153971902,
        "sender_full_name": "Eric Haas",
        "timestamp": 1530040584
    },
    {
        "content": "<p>That's possible, but it would be better to make specimen.subject minOccurs 0.  It's not needed for all uses of specimen, thus it shouldn't be required.</p>",
        "id": 153971925,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1530042656
    },
    {
        "content": "<p>I think a specimen needs a source.   It is by its very nature a sampling of something so you need that something.  This is de-id issue.</p>",
        "id": 153971935,
        "sender_full_name": "Eric Haas",
        "timestamp": 1530043089
    },
    {
        "content": "<p>what is wrong with an opaque ID</p>",
        "id": 153971936,
        "sender_full_name": "Eric Haas",
        "timestamp": 1530043122
    },
    {
        "content": "<p>especially for trace back to the actual patient.</p>",
        "id": 153971937,
        "sender_full_name": "Eric Haas",
        "timestamp": 1530043142
    },
    {
        "content": "<p>Every specimen has a source - just as every patient has a birth date.  That doesn't mean that the source will be known or is relevant to all uses of the specimen.</p>",
        "id": 153971938,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1530043147
    },
    {
        "content": "<p>We don't force the inclusion of information that system may not have.  Forcing someone to copy an element already elsewhere to satisfy a mandatory is poor design on our part.</p>",
        "id": 153971939,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1530043188
    },
    {
        "content": "<p>Wouldn't using <a href=\"http://specimen.id\" target=\"_blank\" title=\"http://specimen.id\">specimen.id</a> would be a chicken/egg thing? I don't know the id until I create the specimen resource. I could use the specimen.identifier for the specimen.subject.identifier. Or, I've thought about using 'de-identified' as the specimen.subject.display for all the specimens.</p>",
        "id": 153972088,
        "sender_full_name": " Bob Milius",
        "timestamp": 1530110183
    },
    {
        "content": "<p>\" could use the specimen.identifier for the specimen.subject.identifier\"  that is what  I meant.</p>",
        "id": 153972099,
        "sender_full_name": "Eric Haas",
        "timestamp": 1530116320
    },
    {
        "content": "<p>It's wrong to make specimen mandatory if there are valid use-cases that don't know/need the specimen.  We only make things mandatory when we're confident that the resource is useless for all reasonable usecases without the element present.  That's not the case here.  We don't set minOccurs to establish good practice.  Good practice is for profiles, not resource designs.</p>",
        "id": 153972126,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1530123619
    },
    {
        "content": "<p><a href=\"http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=17424\" target=\"_blank\" title=\"http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=17424\">GF#17424</a></p>",
        "id": 153972127,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1530123810
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> I think you meant specimen.subject</p>",
        "id": 153972179,
        "sender_full_name": " Bob Milius",
        "timestamp": 1530127082
    },
    {
        "content": "<p>Yes</p>",
        "id": 153972188,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1530128408
    },
    {
        "content": "<p>(Thanks for correcting me :))</p>",
        "id": 153972190,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1530128418
    },
    {
        "content": "<p>Bob,  any laboratory (such as yours) sending a specimen to another laboratory (reference laboratory) is required to submit a lab order for testing with the patient information (name, identifiers, etc.) and all CLIA required data elements for the order.  When the report comes back from the performing laboratory, there are additional CLIA requirements with the report information as indicated below including multiple identifiers as indicated below from CLIA law.</p>\n<p>(c) The test report must indicate the following: <br>\n(1) For positive patient identification, either the patient's name and identification number, or a unique patient identifier and identification number. <br>\n(2) The name and address of the laboratory location where the test was performed. <br>\n(3) The test report date. <br>\n(4) The test performed. <br>\n(5) Specimen source, when appropriate. <br>\n(6) The test result and, if applicable, the units of measurement or interpretation, or both. <br>\n(7) Any information regarding the condition and disposition of specimens that do not meet the laboratory's criteria for acceptability. <br>\n(d) Pertinent “reference intervals” or “normal” values, as determined by the laboratory performing the tests</p>",
        "id": 153972268,
        "sender_full_name": "Andrea Pitkus, PhD, MLS(ASCP)CM, CSM",
        "timestamp": 1530141259
    },
    {
        "content": "<p>The lab needs that on the order.  It doesn't mean it needs it in the system that tracks specimen progression through the lab.  And not all specimens will be patient-associated.</p>",
        "id": 153972297,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1530167249
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"196271\">@Andrea Pitkus, PhD, MLS(ASCP)CM, CSM</span>  I wouldn't call us a laboratory (we don't do any testing directly, but have contracts with external labs that do our testing). But I believe when we send specimens to contract labs we include the specimen identifier which we use internally as a 'donor id'.  I believe this satisfies the second option in (1), i.e.,  \"or a unique patient identifier and identification number\"</p>",
        "id": 153972387,
        "sender_full_name": " Bob Milius",
        "timestamp": 1530197368
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191401\">@Eric Haas</span>  Is is possible to search for subject.identifier using this? I can search for specimen.identifier, but wonder if I can do the same for subject  using this construct?</p>",
        "id": 165720991,
        "sender_full_name": " Bob Milius",
        "timestamp": 1557931952
    },
    {
        "content": "<p>you can <a href=\"http://build.fhir.org/search.html#chaining\" target=\"_blank\" title=\"http://build.fhir.org/search.html#chaining\">chain</a> the search like this.</p>\n<p><code> GET [base]/Specimen?subject:Patient.identifier=http://example.org/ids|1234</code>  if the subject is a patient</p>\n<p>or just  plain old <code> GET [base]/Specimen?subject:identifier=http://example.org/ids|1234</code> if want  to look across all types.</p>",
        "id": 165725462,
        "sender_full_name": "Eric Haas",
        "timestamp": 1557934939
    },
    {
        "content": "<p>Thanks, Eric, but it's not working for me. Maybe an issue with HAPI? or STU3?<br>\nHere's my tiny example Specimen resource:</p>\n<div class=\"codehilite\"><pre><span></span>&lt;Specimen&gt;\n    &lt;identifier&gt;\n        &lt;value value=&quot;001^123456789&quot;/&gt;\n    &lt;/identifier&gt;\n    &lt;subject&gt;\n        &lt;identifier&gt;\n            &lt;value value=&quot;001^123456789&quot;/&gt;\n        &lt;/identifier&gt;\n    &lt;/subject&gt;\n&lt;/Specimen&gt;\n</pre></div>\n\n\n<p>This works:<br>\n<code>GET http://hapi.fhir.org/baseDstu3/Specimen?identifier=001^123456789</code></p>\n<p>This doesn't:<br>\n<code>GET http://hapi.fhir.org/baseDstu3/Specimen?subject:identifier=001^123456789</code></p>",
        "id": 165729050,
        "sender_full_name": " Bob Milius",
        "timestamp": 1557937327
    },
    {
        "content": "<p>The server may not support chaining for Specimen</p>",
        "id": 165737979,
        "sender_full_name": "Eric Haas",
        "timestamp": 1557943358
    }
]