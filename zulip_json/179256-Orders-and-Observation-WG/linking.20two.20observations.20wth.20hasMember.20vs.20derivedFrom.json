[
    {
        "content": "<p>We want to specify whether the oxygen saturation was measured under oxygen gas administration or nor, and if yes, what was the inhaled oxygen flow rate value. Therefore we want to relate oxygen saturation (LOINC 2708-6) to  inhaled oxygen flow rate (3151-8).<br>\nWhat is the best option for that?<br>\n1) Observation oxygen saturation (2708-6) . hasMember -&gt; Observation inhaled oxygen flow rate (3151-8)<br>\n2) Observation oxygen saturation (2708-6) . derivedFrom -&gt; Observation inhaled oxygen flow rate (3151-8)<br>\nThanks for your advices.</p>",
        "id": 173776351,
        "sender_full_name": "François Macary",
        "timestamp": 1566378227
    },
    {
        "content": "<p>I wouldn't use either.  \"hasMember\" is more about organizing Observations into groups/panels.  And you didn't calculate the saturation based on the flow rate.  Instead, I would capture the flow rate as a component of the saturation because the saturation should always be read/interpreted knowing what the flow rate was.</p>",
        "id": 173787779,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1566389792
    },
    {
        "content": "<p>The possible issue I see with that is that the flow rate is a completely independent (standalone) observation that could easily (and likely would be) interpreted and used without necessarily even knowing or caring that the oxygen saturation was being measured.  In this case it is likely a separate recording of the flow rate for the specific purpose of interpreting the O2 saturation results, so maybe that sufficiently pushes it toward being a reasonable use of component?</p>",
        "id": 173788696,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1566390572
    },
    {
        "content": "<p>If it's something we'd expect to be captured on its own, then perhaps we need a new relationship type (at least as an extension)?</p>",
        "id": 173796007,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1566395746
    },
    {
        "content": "<p>We raised the question because the case is borderline and does not fit in any of the options described in <a href=\"http://build.fhir.org/observation.html#obsgrouping\" target=\"_blank\" title=\"http://build.fhir.org/observation.html#obsgrouping\">http://build.fhir.org/observation.html#obsgrouping</a><br>\nThese two observations are produced and recorded independently as <span class=\"user-mention\" data-user-id=\"191405\">@Rob Hausam</span>  says, and they do not fulfill the rule \"same method, same device, same observation\", which excludes using component.<br>\nHowever the value of saturation cannot be interpreted without knowing the value of flow rate, as <span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span>  says, and we are not in the situation of a panel of two observations, which excludes hasMember.<br>\nThe oxygen saturation is not strictly derived from the inhaled flow rate in that sense that it is not a calculation nor a direct interpretation, but could we say that it is influenced by the flow rate, and consider this as a kind of loose derivation?</p>",
        "id": 173796649,
        "sender_full_name": "François Macary",
        "timestamp": 1566396148
    },
    {
        "content": "<p>This could be an extension, as Lloyd mentioned, but it is something that 100% (or very nearly so) of systems that exchange this data need to deal with.  So ultimately whatever solution we settle on should be (or become) core.</p>",
        "id": 173797319,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1566396626
    },
    {
        "content": "<p>An extended element like:<br>\ninfluencedBy      0..*       Reference(Observation | MolecularSequence | QuestionaireResponse |ImagingStudy |DocumentReference)</p>",
        "id": 173798108,
        "sender_full_name": "François Macary",
        "timestamp": 1566397188
    },
    {
        "content": "<p>Is it \"influencedBy\" or \"informedBy'?  The former I would read as \"changes the value measured\", while the latter would be \"changes the evaluation of the value measured\"</p>",
        "id": 173798529,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1566397492
    },
    {
        "content": "<p>Yes, \"informedBy\". Thank you. Is the thinking of having a core extension or adding the element right away into R5?</p>",
        "id": 173798689,
        "sender_full_name": "François Macary",
        "timestamp": 1566397598
    },
    {
        "content": "<p>I think the starting point would be core extension.  We could look at moving that to a new \"related\" type in the future once we have a better sense that: a) the extension meets our needs; and b) the extension is widely supported</p>",
        "id": 173798909,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1566397709
    },
    {
        "content": "<p>somehow \"informedBy\" isn't sounding quite accurate or sufficient to me - we can discuss further</p>",
        "id": 173798923,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1566397717
    },
    {
        "content": "<p>in the case of O2 Sat, the actual measurement value is \"influenced by\" the O2 that is being administered (based on the flow rate) and the interpretation and use of that result is dependent on having that information recorded and available at the time of interpretation</p>",
        "id": 173799373,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1566397996
    },
    {
        "content": "<p>So shall I create a tracker specifying this future core extension?  Or build the extension in Forge directly  and submit it?</p>",
        "id": 173799480,
        "sender_full_name": "François Macary",
        "timestamp": 1566398047
    },
    {
        "content": "<p>Tracker is all that's needed.  Authoring in HL7 is in spreadsheets, so submitting something from Forge wouldn't help that much (though proposed definition/implementation notes would be useful.)</p>",
        "id": 173799599,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1566398142
    },
    {
        "content": "<p>I'll build the tracker, trying to provide the proper notes and comments.<br>\n<span class=\"user-mention\" data-user-id=\"191405\">@Rob Hausam</span> would \"dependsUpon\" be more appropriate and more generic than \"informedBy\"?</p>",
        "id": 173800661,
        "sender_full_name": "François Macary",
        "timestamp": 1566398778
    },
    {
        "content": "<p>Trick with 'dependsOn' is that it would overlap with 'derivedFrom'</p>",
        "id": 173800846,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1566398895
    },
    {
        "content": "<p>it's something to consider - at first I thought it might be a better choice - but again in the case of O2Sat, if you somehow didn't have the O2 flow rate recorded you might be able to make some use of the measurement (you would be likely assuming it was on room air), but having the O2 flow rate information allows the interpretation to be <strong>more</strong> accurate and <strong>more</strong> useful<br>\nso I think it's actually \"supporting information\" - which we already have in the supportingInfo extension (<a href=\"http://hl7.org/fhir/StructureDefinition/workflow-supportingInfo\" target=\"_blank\" title=\"http://hl7.org/fhir/StructureDefinition/workflow-supportingInfo\">http://hl7.org/fhir/StructureDefinition/workflow-supportingInfo</a>)</p>",
        "id": 173801553,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1566399304
    },
    {
        "content": "<p>That was worth looking up :-) So here is what we were looking for!<br>\nFrom there, maybe what is missing is a complement of the section <a href=\"http://build.fhir.org/observation.html#obsgrouping\" target=\"_blank\" title=\"http://build.fhir.org/observation.html#obsgrouping\">http://build.fhir.org/observation.html#obsgrouping</a> mentioning this existing core extension for cases that fit neither of the other relationships (hasMember, derivedFrom, component).</p>",
        "id": 173802068,
        "sender_full_name": "François Macary",
        "timestamp": 1566399614
    },
    {
        "content": "<p>In US Core and Argonaut we are doing it this way:   <a href=\"http://build.fhir.org/ig/argonautproject/R4/branches/master/StructureDefinition-us-core-pulse-oximetry.html\" target=\"_blank\" title=\"http://build.fhir.org/ig/argonautproject/R4/branches/master/StructureDefinition-us-core-pulse-oximetry.html\">http://build.fhir.org/ig/argonautproject/R4/branches/master/StructureDefinition-us-core-pulse-oximetry.html</a>   ( Rob voted for  this )  Also we had this discussion last cycle and Rob and I created this extension which we wound up not using anyway in Argonaut anyway.  <a href=\"http://build.fhir.org/extension-observation-precondition.html\" target=\"_blank\" title=\"http://build.fhir.org/extension-observation-precondition.html\">http://build.fhir.org/extension-observation-precondition.html</a>    So before we try to create a 4th way of saying this and spend a lot of time in [Groundhog day]() mode we already have many way to associate measures.</p>",
        "id": 173802951,
        "sender_full_name": "Eric Haas",
        "timestamp": 1566400212
    },
    {
        "content": "<p>These measure are typically omitted when on room air and measured and entered into the device when recorded.</p>",
        "id": 173803199,
        "sender_full_name": "Eric Haas",
        "timestamp": 1566400390
    },
    {
        "content": "<p>We have rewritte <a href=\"http://build.fhir.org/observation.html#obsgrouping\" target=\"_blank\" title=\"http://build.fhir.org/observation.html#obsgrouping\">http://build.fhir.org/observation.html#obsgrouping</a> nearly every cycle and I have come to the conclusion that:</p>\n<ul>\n<li>nobody reads it and they do want they want</li>\n<li>Until we get enough implementers adopting one pattern over another more modelling discussion will not yield any better results.</li>\n</ul>",
        "id": 173803593,
        "sender_full_name": "Eric Haas",
        "timestamp": 1566400600
    },
    {
        "content": "<p>Agreed. Thanks to this discussion, the good news for me is that we have not one but at least two available core extensions addressing our issue.</p>",
        "id": 173804587,
        "sender_full_name": "François Macary",
        "timestamp": 1566401267
    },
    {
        "content": "<p>The supportingInfo extension (<a href=\"http://hl7.org/fhir/StructureDefinition/workflow-supportingInfo\" target=\"_blank\" title=\"http://hl7.org/fhir/StructureDefinition/workflow-supportingInfo\">http://hl7.org/fhir/StructureDefinition/workflow-supportingInfo</a>) sounds good to me. What do you think?</p>",
        "id": 173804951,
        "sender_full_name": "Isabelle Gibaud",
        "timestamp": 1566401421
    },
    {
        "content": "<p>Thanks for reminding me that I voted for that, <span class=\"user-mention\" data-user-id=\"191401\">@Eric Haas</span>. :)  In my first response I did say that with the likelihood of separately recording the flow rate specifically for this purpose that \"maybe that sufficiently pushes it toward being a reasonable use of component?\"  So I'm not unalterably opposed to that approach.  But I do think that the flow rate actually is \"supporting information\".</p>",
        "id": 173812707,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1566406758
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191405\">@Rob Hausam</span>    What do we do with <a href=\"http://build.fhir.org/extension-observation-precondition.html\" target=\"_blank\" title=\"http://build.fhir.org/extension-observation-precondition.html\">http://build.fhir.org/extension-observation-precondition.html</a> then? it seems like it will be a source of confusion?</p>",
        "id": 173813266,
        "sender_full_name": "Eric Haas",
        "timestamp": 1566407175
    },
    {
        "content": "<p>I don't think that the flow rate is a \"precondition\" for the O2Sat measurement (it's just a fact that is, not a precondition for it).  Since it's a gray area and the US Core/Argonaut approach isn't wrong (especially considering the separate recording aspect), it might be compelling to align with that.</p>",
        "id": 173814171,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1566407851
    },
    {
        "content": "<p>But the precondition extension certainly has valid uses - we just may have not described it optimally and didn't choose a good example.  Fasting status (e.g. for glucose) actually is a precondition for that measurement, but we called that out separately in Specimen.  And in lab preconditions actually should (always?) apply at the time of the specimen collection, I think.  So we may want to do some reconsideration on that extension (or leave it alone and see if anyone ever uses it and complains).</p>",
        "id": 173814177,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1566407856
    },
    {
        "content": "<p>We could at least change the example in the precondition extension to something other than fiO2.</p>",
        "id": 173814414,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1566408003
    },
    {
        "content": "<p>Maybe to something like what is described for LOINC 1504-0 \"Glucose [Mass/​volume] in Serum or Plasma --1 hour post 50 g glucose PO\".  The observation that  50 g glucose was administered orally 1 hour prior to specimen collection would be a precondition.</p>",
        "id": 173814961,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1566408427
    },
    {
        "content": "<p>I still think we have too many way to associate obvervations and too many way to mess up interoperability</p>",
        "id": 173815218,
        "sender_full_name": "Eric Haas",
        "timestamp": 1566408642
    },
    {
        "content": "<p>Hard to pair em down to fewer later</p>",
        "id": 173815266,
        "sender_full_name": "Eric Haas",
        "timestamp": 1566408679
    },
    {
        "content": "<p>agree - but it's also not particularly easy to come up with exactly and only the \"right\" ones in the first place - which is why we arrive at where we are, I think</p>",
        "id": 173815383,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1566408773
    },
    {
        "content": "<p>I think we should resteer our design to bigger buckets and not more and more nuanced ones.  But that is always the challenge.</p>",
        "id": 173815617,
        "sender_full_name": "Eric Haas",
        "timestamp": 1566408960
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191405\">@Rob Hausam</span> <span class=\"user-mention\" data-user-id=\"191401\">@Eric Haas</span> <span class=\"user-mention\" data-user-id=\"192504\">@François Macary</span>  Help me catch up here. Are you saying that the Argonaut approach of using component is not what we want to use? Help me understand why that will not work well and it would be better to push people to use supportingInfo? I can think of many situations where an observation of the environment has an impact on the primary observation even (as we should do) focusing this specifically on observations where we typically do state important environmental/concomitant observations such as fasting state, inspired O2, and orientation of the patient. So if we decide in these situations we should take a particular approach, let's <strong>please</strong> make sure it's done consistently and with a good justification.</p>",
        "id": 175442891,
        "sender_full_name": "Robert McClure",
        "timestamp": 1568215247
    },
    {
        "content": "<p>I don't know enough about Argonaut and will let <span class=\"user-mention\" data-user-id=\"191401\">@Eric Haas</span> and <span class=\"user-mention\" data-user-id=\"191405\">@Rob Hausam</span>  address this side of the question.  The cases discussed in this thread are not covered by \"component\" from my perspective because the statements below (part of the requirements for component),  are false in the current cases (e.g. inhaled O2 related to oxygen saturation measured by pulse oximetry):<br>\n1:  \"component is used for any supporting result that cannot reasonably be interpreted and used outside the scope of the Observation it is a component of.\" The inspired O2 may be interpreted outside the scope of the oxygen saturation, although the other way round is not true.<br>\n2: \"Components should only be used when there is only one method, one observation, one performer, one device, and one time.\". The inhaled O2 is using a different device and a different method from the oxygen saturation.</p>",
        "id": 175450926,
        "sender_full_name": "François Macary",
        "timestamp": 1568220032
    },
    {
        "content": "<p>OK so i concede that the language in the spec should be updated to reflect usage.   We have several structures to link observations and some are more tightly bound than others.   I agree that it would be nice to do it one way.  But everybody thinks their way is best.  which why there are so many standards out there.</p>",
        "id": 175452027,
        "sender_full_name": "Eric Haas",
        "timestamp": 1568220751
    },
    {
        "content": "<p>Are you saying we should relax that language (that <span class=\"user-mention\" data-user-id=\"192504\">@François Macary</span>  quoted), <span class=\"user-mention\" data-user-id=\"191401\">@Eric Haas</span> ?  I think that's about the only guidance that we have that keeps everyone from just treating components and related observations as essentially interchangeable (except that components are \"easier\" and they can only be nested at one level).</p>",
        "id": 175523494,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1568291230
    },
    {
        "content": "<p>If it's a different device and different method, I don't see why it shouldn't be a separate Observation...</p>",
        "id": 175525326,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1568292780
    },
    {
        "content": "<p>It reflects a theoretical boundary and not real world usage.  In other you words its breached more often that not IMO.</p>",
        "id": 175535309,
        "sender_full_name": "Eric Haas",
        "timestamp": 1568299172
    },
    {
        "content": "<p>Is not easier to use components if you need the observation to be separate for your other use cases and reuse.  I think that will be the ultimate driver of usage.</p>",
        "id": 175535665,
        "sender_full_name": "Eric Haas",
        "timestamp": 1568299345
    },
    {
        "content": "<p>to Lloyd's question, it certainly can be a separate observation - and it's required for accurately clinically interpreting and acting on the O2 saturation measurement, so logically it's \"supporting information\" and the two observations (or components) need to be reported together (linked with workflow-supportingInfo or hasMember, or as components)</p>",
        "id": 175535694,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1568299360
    },
    {
        "content": "<p>a possible justification for doing this with components may be that this particular <strong>recording</strong> of the O2 flow is almost certainly being done specifically for its use in interpretation of the O2 sat measurement and it is not going to be used independently for other purposes</p>",
        "id": 175536663,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1568299952
    },
    {
        "content": "<p>The argument I have for component lines up with your second point and how US CDI regs read.</p>",
        "id": 175536811,
        "sender_full_name": "Eric Haas",
        "timestamp": 1568300046
    },
    {
        "content": "<p>We have not heard vendors pushing back on this as wrong either.</p>",
        "id": 175536882,
        "sender_full_name": "Eric Haas",
        "timestamp": 1568300102
    },
    {
        "content": "<p>I see \"real world usage\" as still in the beginning of the FHIR learning curve. My feeling is that the best practises on FHIR are still ahead of us rather than behind.  For this reason, rather than relaxing the wording in the specification I would strengthen  the existing guidelines, which already imply a non-ambiguous path for linking observations: </p>\n<ul>\n<li>Observation is part of a panel (e.g. CBC, urinalysis, serum electrolyte...)? Use hasMember</li>\n<li>Observation  performed as a single action (same  time, method, device) produces an array of values (e.g. arterial pressure)? Use component</li>\n<li>Observation is derived by computation or interpretation of a set of observations, images,  docs (e.g.  trisomy 21 likelihood in fetus derived from echography and beta HCG free)? Use derivedFrom</li>\n<li>Observation result should be interpreted in light of  another independant observation (oxygen saturation, knowing inhaled oxygen flow rate)? Use the workflow-supportingInfo core extension.<br>\nA more explicit and clearer specification may impact existing pioneer implementations like Argonaut in the US.  But is it a sufficient reason for not improving the spec?</li>\n</ul>",
        "id": 175605899,
        "sender_full_name": "François Macary",
        "timestamp": 1568365292
    },
    {
        "content": "<p>O2 flow and O2 sat are usually among other results reported in blood gas panels.  (Not sure if this is Francois's use case?)  There may be other observations such as whether the patient is on room air or nasal cannula, PEEP, BIPAP, and other vent settings that repiratory provides the laboratory with the blood gas order.  When the gas is run, these items are entered as results in the panel that is reproted back to teh ordering provider as they provide important clinical results/information for this critical care test.</p>",
        "id": 195828478,
        "sender_full_name": "Andrea Pitkus, PhD, MLS(ASCP)CM, CSM",
        "timestamp": 1588247808
    }
]