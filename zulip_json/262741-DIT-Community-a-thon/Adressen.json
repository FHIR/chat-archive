[
    {
        "content": "<p>Gibt es klare Empfehlungen, wann Adressangaben auf mehrere lines aufgeteilt werden sollen? Gemäß KBV soll der Adresszusatz in einer separaten line stehen - angeblich aufgrund von Vorgaben seitens HL7</p>",
        "id": 214684740,
        "sender_full_name": "Lars Heyden",
        "timestamp": 1603796509
    },
    {
        "content": "<p>Im Prinzip gelten die Empfehlungen der Deutschen Post. Allerdings ist mir soeben aufgefallen, dass sowohl MI-I als auch ISIK die Anzahl der Lines auf 1..1 begrenzen, während die KBV bis zu zwei Zeilen zulässt.</p>",
        "id": 214685925,
        "sender_full_name": "Simone Heckmann",
        "timestamp": 1603797446
    },
    {
        "content": "<p>Diese Beschränkung bei MI-I und ISIK wäre in Frage zu stellen...</p>",
        "id": 214685943,
        "sender_full_name": "Simone Heckmann",
        "timestamp": 1603797462
    },
    {
        "content": "<p>EDIT:<br>\nHalt. Hatte noch das KBV mit drin. Wenn ich nur das ISIK drin habe, meckert er. Jetzt ist die Frage, warum es bei dem doppelten Profil keine Einwände seitens des Validators gibt.</p>",
        "id": 214686214,
        "sender_full_name": "Kilian Krockauer",
        "timestamp": 1603797704
    },
    {
        "content": "<p>Ich habe es eben gegengetestet: ERROR: Instance count for 'Patient.address.line' is 2, which is not within the specified cardinality of 1..1</p>",
        "id": 214686476,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1603797860
    },
    {
        "content": "<p>Bekomme ich direkt sobald mehr als eine line existiert</p>",
        "id": 214686497,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1603797881
    },
    {
        "content": "<p>Ja, hatte noch das KBV-Profil mit drin. Aber warum meckert er nicht, wenn beide Profile drin sind? Sollte er doch, oder verstehe ich das falsch?</p>",
        "id": 214686534,
        "sender_full_name": "Kilian Krockauer",
        "timestamp": 1603797918
    },
    {
        "content": "<p>Doch sollte er, macht er auch bei mir. Ich validier mit dem Java Code gegen den VONK Server</p>",
        "id": 214686573,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1603797961
    },
    {
        "content": "<p>also per REST</p>",
        "id": 214686626,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1603797975
    },
    {
        "content": "<p>Wenn mehrer profile angegeben werden wird gegen alle profile validiert.</p>",
        "id": 214686681,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1603798030
    },
    {
        "content": "<p>Ja, das dachte ich auch.  Aber anscheinend ist die Reihenfolge der Angabe der Profile wichtig. Tauschen Sie mal die Reihenfolge.</p>",
        "id": 214686743,
        "sender_full_name": "Kilian Krockauer",
        "timestamp": 1603798079
    },
    {
        "content": "<p>Es ist ja an sich eine nette Idee, wenn Adressangaben auf mehrere lines aufgeteilt werden können - aber ist das in der Praxis bei maschineller Verarbeitung nicht eher von Nachteil, wenn nicht klar ist in welcher line welche Information steht? Ich finde daher die Einschränkung auf 1..1 sehr nachvollziehbar.</p>",
        "id": 214687014,
        "sender_full_name": "Lars Heyden",
        "timestamp": 1603798238
    },
    {
        "content": "<p>Es sei denn, es ist schon durch das Profil klar vorgegeben, welche Information in welcher line stehen darf.</p>",
        "id": 214687050,
        "sender_full_name": "Lars Heyden",
        "timestamp": 1603798266
    },
    {
        "content": "<p>Habe meinen Fehler gefunden. Funktioniert so wie es sollte <span aria-label=\"+1\" class=\"emoji emoji-1f44d\" role=\"img\" title=\"+1\">:+1:</span></p>",
        "id": 214687077,
        "sender_full_name": "Kilian Krockauer",
        "timestamp": 1603798286
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"257286\">@Lars Heyden</span> vor allem, da es ja die Extension dafür schon gibt. Da sollte die KBV mal überlegen, das zu übernehmen, oder?</p>",
        "id": 214687198,
        "sender_full_name": "Kilian Krockauer",
        "timestamp": 1603798345
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"257286\">Lars Heyden</span> <a href=\"#narrow/stream/262741-DIT-Community-a-thon/topic/Adressen/near/214687014\">said</a>:</p>\n<blockquote>\n<p>Es ist ja an sich eine nette Idee, wenn Adressangaben auf mehrere lines aufgeteilt werden können - aber ist das in der Praxis bei maschineller Verarbeitung nicht eher von Nachteil, wenn nicht klar ist in welcher line welche Information steht? Ich finde daher die Einschränkung auf 1..1 sehr nachvollziehbar.</p>\n</blockquote>\n<p>ich persönlich sehe das ebenso. Solange ich die lines nicht unterschiedlich codiere macht eine aufsplitten in mehrere Lines wenig Sinn.</p>",
        "id": 214687292,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1603798407
    },
    {
        "content": "<p>Im KBV-Profil für die eAU ist zudem die Straße ein Pflichtfeld in jeder line, das ergibt dann ganz sicher keinen Sinn...</p>",
        "id": 214687307,
        "sender_full_name": "Lars Heyden",
        "timestamp": 1603798416
    },
    {
        "content": "<p>Das aufsplitten der Lines für einen Briefbogen wäre für mich business-logic, und damit außerhalb von FHIR.</p>",
        "id": 214687341,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1603798440
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"257286\">Lars Heyden</span> <a href=\"#narrow/stream/262741-DIT-Community-a-thon/topic/Adressen/near/214687014\">said</a>:</p>\n<blockquote>\n<p>Es ist ja an sich eine nette Idee, wenn Adressangaben auf mehrere lines aufgeteilt werden können - aber ist das in der Praxis bei maschineller Verarbeitung nicht eher von Nachteil, wenn nicht klar ist in welcher line welche Information steht? Ich finde daher die Einschränkung auf 1..1 sehr nachvollziehbar.</p>\n</blockquote>\n<p>Im Prinzip sagt die Aufteilung in lines bloß: \"Drucke das so auf's Kuvert\", das ist ja in den häufigsten Fällen der Grund, weshalb man Adressdaten austauscht. Wenn die <em>Semantik</em> wichtig ist, weil z.B. die Hausnummer anders behandelt werden soll als andere Teile der line, dann müssen die Extensions verwendet werden.<br>\nSolche UseCases sind aus meiner Sicht aber eher rar.</p>",
        "id": 214687523,
        "sender_full_name": "Simone Heckmann",
        "timestamp": 1603798548
    },
    {
        "content": "<p>Alles klar, danke für die Einschätzung.</p>",
        "id": 214687588,
        "sender_full_name": "Lars Heyden",
        "timestamp": 1603798585
    },
    {
        "content": "<p>Ich hatte mir immer vorgestellt, dass jemand versuchen könnte, die Verteilung von Patienten auf einer Karte zu plotten, und dazu die Trennung von Straße und Hausnummer benötigt, aber dann ist mir eingefallen, dass nicht mal die Google Maps API eine strukturierte Trennung erfordert.<br>\n<span aria-label=\"grinning face with smiling eyes\" class=\"emoji emoji-1f601\" role=\"img\" title=\"grinning face with smiling eyes\">:grinning_face_with_smiling_eyes:</span></p>",
        "id": 214687631,
        "sender_full_name": "Simone Heckmann",
        "timestamp": 1603798618
    },
    {
        "content": "<p>Ich schätze in DE ist das einfach ein Fall von \"Das haben wir schon immer so gemacht\".</p>",
        "id": 214687656,
        "sender_full_name": "Simone Heckmann",
        "timestamp": 1603798643
    },
    {
        "content": "<p>Da die Informationen auch in die Extensions aufgeteilt werden können, wurde sich entschieden alles einheitlich in eine line zu schreiben.</p>",
        "id": 214690021,
        "sender_full_name": "Alexander Zautke",
        "timestamp": 1603800312
    },
    {
        "content": "<p>Also im schlimmsten Falle <br>\n<code>Milchstr. 42 Appartment 345b c/o Familie Mustermann</code> <span aria-label=\"oh no\" class=\"emoji emoji-1f615\" role=\"img\" title=\"oh no\">:oh_no:</span></p>",
        "id": 214690336,
        "sender_full_name": "Simone Heckmann",
        "timestamp": 1603800500
    },
    {
        "content": "<p>Ich glaube ich hätte es schöner gefunden, wenn das sendende System zumindest <strong>die Möglichkeit</strong> hätte, eine sinnvolle Unterteilung in Zeilen vorzuschlagen. Wenn das Zielsystem keine mehrzeiligen Adressen unterstützt, kann es ja die Zeilen immer noch konkatenieren, aber man müsste zumindest nicht raten, wo eine sinnvolle Trennung stattfinden könnte, wenn die Zeile zu lang wird für den Druck. Wenn man's anhand fester Längen aufsplitten würde, käme dann solcher Quark bei raus:<br>\n<code>Milchstr. 42 Appartment </code><br>\n<code>345b c/o Familie Musterman</code></p>",
        "id": 214690781,
        "sender_full_name": "Simone Heckmann",
        "timestamp": 1603800791
    },
    {
        "content": "<p>m.E. widerspricht das ein wenig der 80%-Regel <br>\neinfaches Problem -&gt; einfache Lösung<br>\nkomplexes Problem -&gt; komplexe Lösung</p>\n<p>Das einfache Problem (80%) ist: Ich will die Adresse drucken ohne herumzuraten, wie ich die einzelnen Bestandteile zusammensetzen/aufsplitten muss -&gt; line 0..*<br>\nDas komplexe Problem (20%) ist: Ich muss die einzelnen Adressbestandteile unterschiedlich behandeln/gewichten -&gt; extensions</p>",
        "id": 214691081,
        "sender_full_name": "Simone Heckmann",
        "timestamp": 1603800973
    },
    {
        "content": "<p>In diesem Fall ist der einfach UseCase eingeschränkt  mit dem Argument: \"nimm doch die komplexe Lösung\",<br>\ndaher <span aria-label=\"oh no\" class=\"emoji emoji-1f615\" role=\"img\" title=\"oh no\">:oh_no:</span></p>",
        "id": 214691162,
        "sender_full_name": "Simone Heckmann",
        "timestamp": 1603801044
    },
    {
        "content": "<p>Das Problem ist, dass die Extensions Bestandteil der lines sind. Vielleicht wäre es am Besten gewesen, die Extensions an die Adressen zu definieren. Dann gäbe es pro Adresse genau eine Straße und Hausnummer, und nicht eine Straße pro line.</p>",
        "id": 214691554,
        "sender_full_name": "Lars Heyden",
        "timestamp": 1603801337
    },
    {
        "content": "<p>...das stünde dann aber im Widerspruch zu der internationalen Definition der Extensions... So weit wollen wir uns dann doch nicht aus dem Fenster lehnen ;-)</p>",
        "id": 214691666,
        "sender_full_name": "Simone Heckmann",
        "timestamp": 1603801440
    },
    {
        "content": "<p>Ich denke aber, dass es seitens der Implementierung unproblematisch wäre.<br>\nMan kann recht einfach festlegen: <br>\nStrasse+Hausnummer - &gt; line 1<br>\nAdresszusatz-&gt; line 2<br>\nund die Extensions dann entprechend an die jeweiligen lines hängen<br>\nAndersherum sollte es Möglichkeiten geben, auf z.B. die Inhalte der Hausnummer-Extension zugreifen zu können, ohne wissen zu müssen, an welcher line sie hängt (<span class=\"user-mention\" data-user-id=\"191451\">@Patrick Werner</span> ?)</p>",
        "id": 214691899,
        "sender_full_name": "Simone Heckmann",
        "timestamp": 1603801569
    },
    {
        "content": "<p>und die Extensions dann entprechend an die jeweiligen lines hängen.... geht das tatsächlich, dass für line 1 andere Extensions vorgegeben sind als für line 2 ?</p>",
        "id": 214691966,
        "sender_full_name": "Lars Heyden",
        "timestamp": 1603801657
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191450\">Simone Heckmann</span> <a href=\"#narrow/stream/262741-DIT-Community-a-thon/topic/Adressen/near/214691899\">said</a>:</p>\n<blockquote>\n<p>Strasse+Hausnummer - &gt; line 1<br>\nAdresszusatz-&gt; line 2</p>\n</blockquote>\n<p>mit dieser Guidance <span aria-label=\"+1\" class=\"emoji emoji-1f44d\" role=\"img\" title=\"+1\">:+1:</span></p>",
        "id": 214691972,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1603801664
    },
    {
        "content": "<p>...zumindest die entsprechende FHIRPath-Expression <code>Patient.address.line.extension(http://hl7.org/fhir/StructureDefinition/iso21090-ADXP-houseNumber)</code> sollte immer die Hausnummer zurückliefern, unabhängig davon, an welcher line sie hängt...</p>",
        "id": 214691980,
        "sender_full_name": "Simone Heckmann",
        "timestamp": 1603801668
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"257286\">Lars Heyden</span> <a href=\"#narrow/stream/262741-DIT-Community-a-thon/topic/Adressen/near/214691966\">said</a>:</p>\n<blockquote>\n<p>und die Extensions dann entprechend an die jeweiligen lines hängen.... geht das tatsächlich, dass für line 1 andere Extensions vorgegeben sind als für line 2 ?</p>\n</blockquote>\n<p>Wir müssten line dafür slicen, aber:ja.<br>\nAlternativ könnte man einfach an allen lines alle drei Extensions zulassen, aber mit Hilfe einer Regel (Constraint) prüfen, dass die Extensions nicht doppelt verwendet werden dürfen.</p>",
        "id": 214692169,
        "sender_full_name": "Simone Heckmann",
        "timestamp": 1603801779
    },
    {
        "content": "<p>In Java (oder anderen Sprachen) würde man mittels streaming API auch entsprechend auf die extension filtern.<br>\nDiese Pattern benötigt man recht häufig in FHIR, z.b. auch bei \"Gib mir eine spezifische Resource(definiertes Profil) aus einer Composition.<br>\nMit filter und AnyMatch geht das fast so komfortabel wie mit FHIRpath. FHIRpath für Java ist leider noch nicht feature-complete</p>",
        "id": 214692290,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1603801846
    },
    {
        "content": "<p>ok! Besten Dank für die Antworten.</p>",
        "id": 214692769,
        "sender_full_name": "Lars Heyden",
        "timestamp": 1603802150
    }
]