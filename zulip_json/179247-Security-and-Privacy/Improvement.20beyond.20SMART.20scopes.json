[
    {
        "content": "<p>The SMART-on-FHIR project has a fantastic starter set of scope patterns. But these scopes are considered too basic. There are many proposals for improvement that were submitted to the SMART-on-FHIR ballot in HL7. These proposals have been deferred, and would be input for this improvement opportunity. There are also many proposals that have been created as part of various projects.  Please catalog here your scope needs, and your scope proposals.</p>",
        "id": 153950160,
        "sender_full_name": "John Moehrke",
        "timestamp": 1522764746
    },
    {
        "content": "<p>scope proposal using FHIR query parameters pattern  <a href=\"https://healthcaresecprivacy.blogspot.com/2017/05/fhir-oauth-scope-proposal-using-fhir.html\" target=\"_blank\" title=\"https://healthcaresecprivacy.blogspot.com/2017/05/fhir-oauth-scope-proposal-using-fhir.html\">https://healthcaresecprivacy.blogspot.com/2017/05/fhir-oauth-scope-proposal-using-fhir.html</a></p>",
        "id": 153950161,
        "sender_full_name": "John Moehrke",
        "timestamp": 1522764914
    },
    {
        "content": "<p>OpenID HEART workgroup <a href=\"https://openid.net/wg/heart/\" target=\"_blank\" title=\"https://openid.net/wg/heart/\">https://openid.net/wg/heart/</a></p>",
        "id": 153950162,
        "sender_full_name": "John Moehrke",
        "timestamp": 1522764964
    },
    {
        "content": "<p>incremental to SMART-on-FHIR with PurposeOfUse and _confidentiality  <a href=\"https://healthcaresecprivacy.blogspot.com/2016/01/fhir-oauth-scope.html\" target=\"_blank\" title=\"https://healthcaresecprivacy.blogspot.com/2016/01/fhir-oauth-scope.html\">https://healthcaresecprivacy.blogspot.com/2016/01/fhir-oauth-scope.html</a></p>",
        "id": 153950163,
        "sender_full_name": "John Moehrke",
        "timestamp": 1522765021
    },
    {
        "content": "<p>scope is a URL to a FHIR Consent resource where the rules are . (I have not written this up).</p>",
        "id": 153950164,
        "sender_full_name": "John Moehrke",
        "timestamp": 1522765195
    },
    {
        "content": "<p>Niquola article <a href=\"https://medium.com/@niquola/access-control-model-for-fhir-generic-server-dd66deb7cae6\" target=\"_blank\" title=\"https://medium.com/@niquola/access-control-model-for-fhir-generic-server-dd66deb7cae6\">https://medium.com/@niquola/access-control-model-for-fhir-generic-server-dd66deb7cae6</a></p>",
        "id": 153950165,
        "sender_full_name": "John Moehrke",
        "timestamp": 1522765321
    },
    {
        "content": "<p>Mohammad Jafari -- JSON encoded scope values <a href=\"https://medium.com/@jafarim/using-json-to-model-complex-oauth-scopes-fa8a054b2a28\" target=\"_blank\" title=\"https://medium.com/@jafarim/using-json-to-model-complex-oauth-scopes-fa8a054b2a28\">https://medium.com/@jafarim/using-json-to-model-complex-oauth-scopes-fa8a054b2a28</a></p>",
        "id": 153950166,
        "sender_full_name": "John Moehrke",
        "timestamp": 1522765368
    },
    {
        "content": "<p>I would like to see the community resolve the current differences in how scopes have been implemented today first. After that, we'd look to making further changes to scopes.</p>\n<p>1. Epic requires <code>.search</code> and <code>.create</code> scopes for search and create requests, respectively. The SMART on FHIR specification uses <code>.read</code> and <code>.write</code> for these types of requests. We should have a discussion as to why Epic went that route and if all other vendors should also implement scopes in that matter.</p>\n<p>2. Cerner disagrees with wildcard scopes on two fronts: the encourage app developers to request more data than necessary and we feel providers + patients should not be asked to share all current and future data with the app (this is incredibly broad and Cerner feels users should not be asked for something so sweeping, nor will they likely understand what it means). While Cerner's implementation is not contrary to the SMART on FHIR specification, we should have a discussion as to if wildcard scopes should be removed from the specification.</p>\n<p>After these two topics have been resolved, I think it would be great to explore other changes to scopes.</p>",
        "id": 153950206,
        "sender_full_name": "Kevin Shekleton",
        "timestamp": 1522767551
    },
    {
        "content": "<p>Is that current scope problem on the radar for the SMART-on-FHIR ballot reconciliation? I can't make that call, so I don't know what is going on there. <span class=\"user-mention\" data-user-id=\"191315\">@Josh Mandel</span> ?</p>",
        "id": 153950209,
        "sender_full_name": "John Moehrke",
        "timestamp": 1522768176
    },
    {
        "content": "<p>I'm not sure if the first topic (<code>.search</code> and <code>.create</code>) was made as a ballot comment.</p>",
        "id": 153950215,
        "sender_full_name": "Kevin Shekleton",
        "timestamp": 1522768422
    },
    {
        "content": "<p>How is SMART-on-FHIR tracking post ballot comments? I presume it is not gForge. Ownership of this should be resolved regarding Security wg vs FHIR-I wg. Today SMART-on-FHIR is owned by FHIR-I.  <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> ?</p>",
        "id": 153950216,
        "sender_full_name": "John Moehrke",
        "timestamp": 1522768609
    },
    {
        "content": "<p>They are being tracked via a spreadsheet</p>",
        "id": 153950217,
        "sender_full_name": "Kevin Shekleton",
        "timestamp": 1522768629
    },
    {
        "content": "<p>I'm kicking myself for not raising my concerns with wildcard scopes last year. At the time, since our implementation was still compliant with the SMART spec (as you don't have to support all of the scopes), I didn't think it was a problem. However, I realize I should have spoken up as I think wildcard scopes promote implementations and user experiences that do not have good security (data privacy) practices in mind.</p>",
        "id": 153950218,
        "sender_full_name": "Kevin Shekleton",
        "timestamp": 1522768705
    },
    {
        "content": "<p>Here is the <a href=\"https://docs.google.com/spreadsheets/d/1j-Dp6B3VetJ_dMseTl6F9qu4GIZr5b9HFRB4iURfSLw/edit#gid=0\" target=\"_blank\" title=\"https://docs.google.com/spreadsheets/d/1j-Dp6B3VetJ_dMseTl6F9qu4GIZr5b9HFRB4iURfSLw/edit#gid=0\">Google Sheet of SMART ballot comments</a></p>",
        "id": 153950222,
        "sender_full_name": "Kevin Shekleton",
        "timestamp": 1522769095
    },
    {
        "content": "<p>I'm checking with the other FHIR-I co-chairs, but I think that the answer will be, issues with smart app launch are managed just like everything else we manage. Which will mean that remaining open issues will have to migrated out of the spreadsheet into gForge</p>",
        "id": 153950254,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1522779914
    },
    {
        "content": "<p>it would certainly be good to know why Epic diverged from the spec. <span class=\"user-mention\" data-user-id=\"191864\">@Isaac Vetter</span> / <span class=\"user-mention\" data-user-id=\"191914\">@Danielle Friend</span>?  I didn't see anything about in ballot</p>",
        "id": 153950257,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1522779978
    },
    {
        "content": "<p>I'll follow up the email questions about scope as soon as I get a chance... but I think that there's a very valid use case for */... even if it can be abused</p>",
        "id": 153950258,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1522780020
    },
    {
        "content": "<p>i think this is particularly acute while the scopes are so technical. I just want my PHR to have everything I can get... I think most patients would assume that they can say this about their own personal store of data. And I think that Cerner is looking at patient trust the wrong way around about this. I could ask SPM for opinions, I guess</p>",
        "id": 153950259,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1522780259
    },
    {
        "content": "<p>I can write up a detailed write up as to our position. I think we're approaching this very rationally.</p>\n<p>There is also a very easy alternative to wildcard scopes -- an app can simply explicitly request each scope they want! For new scopes a FHIR server adds in the future, the app can request those too and the user will be re-prompted to authorize that new scope.</p>",
        "id": 153950269,
        "sender_full_name": "Kevin Shekleton",
        "timestamp": 1522780912
    },
    {
        "content": "<p>once the client is updated to ask for it...</p>",
        "id": 153950270,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1522780958
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> we broke ours down by interaction, which was long enough ago I don't know why we did not bring this up as a comment. If I were to make a ballot item about it now I'd say scopes should be interaction based as it provides a clear representation of what a client is able to do.  Does write  = create, update, delete? Does read = read or read = read, search?</p>",
        "id": 153950271,
        "sender_full_name": "Danielle Friend",
        "timestamp": 1522780963
    },
    {
        "content": "<p>Grahame - the client should absolutely be updated for any new data / permissions it wants</p>",
        "id": 153950272,
        "sender_full_name": "Kevin Shekleton",
        "timestamp": 1522781004
    },
    {
        "content": "<p>why would a patient differentiate between read and search? what % would understand the choice?</p>",
        "id": 153950273,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1522781010
    },
    {
        "content": "<p>I mentioned this on my mailing list post, but no other analog exists where you grant an app access to a current set of permissions and <em>any future permissions that may be added</em></p>",
        "id": 153950274,
        "sender_full_name": "Kevin Shekleton",
        "timestamp": 1522781040
    },
    {
        "content": "<p>The patient wouldn't - the client would. Like I mentioned in the google groups - for Epic, the scopes are defined at client creation.</p>",
        "id": 153950275,
        "sender_full_name": "Danielle Friend",
        "timestamp": 1522781102
    },
    {
        "content": "<p>Josh's Github example is not an analog. Yes, when you grant a Github app access to your repositories, it is to all of your current + future repositories. However, that's like saying you grant a SMART app access to patient/AllergyIntolerance.read -- all of your current + future allergies. Github's permissions cannot be granted wildcard access to a 3rd party app.</p>",
        "id": 153950276,
        "sender_full_name": "Kevin Shekleton",
        "timestamp": 1522781130
    },
    {
        "content": "<p>I don't understand that. Sure, the client asks for it.... but the authorization server then asks the patient... what..? and if the patient doesn't get asked about it, why differentiate it?</p>",
        "id": 153950277,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1522781162
    },
    {
        "content": "<p>scopes are for authorization, not access control</p>",
        "id": 153950278,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1522781174
    },
    {
        "content": "<p>Kevin, I'm not convinced about the analogy.</p>",
        "id": 153950279,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1522781240
    },
    {
        "content": "<p>Ok. This is probably best for a call or WGM discussion anyway.</p>",
        "id": 153950284,
        "sender_full_name": "Kevin Shekleton",
        "timestamp": 1522781430
    },
    {
        "content": "<p>Yeah I get that - the patient only cares at a content and read/write level. But I think there is another piece in there for a lot of our workflows - where before a patient or provider sees an app, a healthcare organization has said I'd like to \"buy\"/\"install\"/\"share\" this app, what does it want to do. Ex: The organization decides to make an app available to providers via an embedded SMART app - why does it need \"Patient.search\" when it is only ever launched from a patient's chart? Or I want to advertise a patient facing app to my organization's patient population - it should be able to file patient entered meds but not update existing ones.</p>",
        "id": 153950290,
        "sender_full_name": "Danielle Friend",
        "timestamp": 1522781771
    },
    {
        "content": "<p>And to be fair, those are made up examples. I don't know of a time when we've actually needed the granularity yet. But I'm just trying share some of our reasoning for making that choice.</p>",
        "id": 153950292,
        "sender_full_name": "Danielle Friend",
        "timestamp": 1522781787
    },
    {
        "content": "<p>ok so you're talking about organization authorization at registration... that makes more sense. Which reminds me... both Epic and Cerner agree on the scopes at registration, right? what the app asks for at authorization time has to be the same? or is ignored? either way, this is part of the app registration question</p>",
        "id": 153950296,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1522782072
    },
    {
        "content": "<p>For Cerner:</p>\n<p>Provider apps: Yes, we agree on scopes between Cerner &amp; the app at registration time. What the app is granted at launch is an intersection of what the app asks for + what the registration scopes are.</p>\n<p>Patient apps: The scopes are defined by the app at registration time. What the app is granted at launch is an intersection of what the app asks for + what the registration scopes are. In the future, we will allow patients to selectively choose the scopes granted which means that this will be a further set in that final intersection.</p>",
        "id": 153950299,
        "sender_full_name": "Kevin Shekleton",
        "timestamp": 1522782261
    },
    {
        "content": "<p>I'm very interested in what the patient choice UI looks like. But for now, what does the patient see? nothing?</p>",
        "id": 153950300,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1522782348
    },
    {
        "content": "<p>For Cerner, the patient sees the scopes they are authorizing the app to use. Let me grab screenshots, we've shared this publicly before....</p>",
        "id": 153950301,
        "sender_full_name": "Kevin Shekleton",
        "timestamp": 1522782391
    },
    {
        "content": "<p>great thanks</p>",
        "id": 153950302,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1522782412
    },
    {
        "content": "<p>I just went through the authorization flow with the Apple Health app and my Cerner Clinic account. I took screenshots and blurred out my name so it can be shared.</p>\n<p><a href=\"/user_uploads/10155/McqJUi7yxTEgi7gWgXP3f7kp/cerner-authorization-1.png\" target=\"_blank\" title=\"cerner-authorization-1.png\">cerner-authorization-1.png</a> </p>\n<p><a href=\"/user_uploads/10155/ttDAHfmcvxO8taDfePXz1P9m/cerner-authorization-2.png\" target=\"_blank\" title=\"cerner-authorization-2.png\">cerner-authorization-2.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/McqJUi7yxTEgi7gWgXP3f7kp/cerner-authorization-1.png\" target=\"_blank\" title=\"cerner-authorization-1.png\"><img src=\"/user_uploads/10155/McqJUi7yxTEgi7gWgXP3f7kp/cerner-authorization-1.png\"></a></div><div class=\"message_inline_image\"><a href=\"/user_uploads/10155/ttDAHfmcvxO8taDfePXz1P9m/cerner-authorization-2.png\" target=\"_blank\" title=\"cerner-authorization-2.png\"><img src=\"/user_uploads/10155/ttDAHfmcvxO8taDfePXz1P9m/cerner-authorization-2.png\"></a></div>",
        "id": 153950313,
        "sender_full_name": "Kevin Shekleton",
        "timestamp": 1522783447
    },
    {
        "content": "<p>We're iterating on our authorization UI and have several improvements lined up in our backlog.</p>",
        "id": 153950314,
        "sender_full_name": "Kevin Shekleton",
        "timestamp": 1522783520
    },
    {
        "content": "<p>(I was about to say that ours is pretty similar, but with a better UI).</p>",
        "id": 153950315,
        "sender_full_name": "Isaac Vetter",
        "timestamp": 1522783564
    },
    {
        "content": "<p>great - really appreciate. \"the information you share may be subject to re-disclosure\" - that's obscure. is cerner redisclosing, or apple? Why is cerner warning about it? seems like a few more words would make it clearer..</p>",
        "id": 153950316,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1522783602
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191864\">@Isaac Vetter</span> show us the money ;-)</p>",
        "id": 153950317,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1522783613
    },
    {
        "content": "<p>Re: redisclosing. That would be Apple since they are getting copy of your data. I don't know why the verbiage/wording is the way it is.</p>",
        "id": 153950322,
        "sender_full_name": "Kevin Shekleton",
        "timestamp": 1522783758
    },
    {
        "content": "<p>did Cerner consider whether the Observation/* scope is too wide, then, if you don't like wildcards?</p>",
        "id": 153950325,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1522783856
    },
    {
        "content": "<p>how can you control redisclosure or not? And I am sure many other apps (espeially PHR) do similar</p>",
        "id": 153950326,
        "sender_full_name": "John Moehrke",
        "timestamp": 1522783858
    },
    {
        "content": "<p>This is the stock functionality that we released in v2015 and that every patient/consumer sees when authorizing an app via the SMART standalone launch. It's also viewable by developers using our open.epic and/or App Orchard portals. </p>\n<p>It's, of course, skinnable by the health system. </p>\n<p><a href=\"/user_uploads/10155/xdNUj4NarVN0t0NwZD0Ghbop/pasted_image.png\" target=\"_blank\" title=\"pasted_image.png\">pasted image</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/xdNUj4NarVN0t0NwZD0Ghbop/pasted_image.png\" target=\"_blank\" title=\"pasted image\"><img src=\"/user_uploads/10155/xdNUj4NarVN0t0NwZD0Ghbop/pasted_image.png\"></a></div>",
        "id": 153950327,
        "sender_full_name": "Isaac Vetter",
        "timestamp": 1522783866
    },
    {
        "content": "<p>you can't control t - that's what the obscure language is trying to say</p>",
        "id": 153950328,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1522783882
    },
    {
        "content": "<p>Isaac, I have to comment on this too. \"Keep my logged in to MyChart\" - that's completely obscure to me</p>",
        "id": 153950329,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1522783966
    },
    {
        "content": "<p>understood... which is strange as to why it is mentioned.. I hope it isn't just with Apple</p>",
        "id": 153950330,
        "sender_full_name": "John Moehrke",
        "timestamp": 1522783983
    },
    {
        "content": "<p>I think it's a fair discussion to have on Observation given the breadth of data you have access to via this FHIR resource. However, I think that this discussion is best had after our first two as this would delve into discussions of further granularity of scopes.</p>",
        "id": 153950331,
        "sender_full_name": "Kevin Shekleton",
        "timestamp": 1522784125
    },
    {
        "content": "<p>Our authorization UI has that same verbiage regardless of what app you are authorizing.</p>",
        "id": 153950332,
        "sender_full_name": "Kevin Shekleton",
        "timestamp": 1522784320
    },
    {
        "content": "<p>right... separate bug with current SMART scopes, from future improvements.  Should we move bug to a different thread?</p>",
        "id": 153950333,
        "sender_full_name": "John Moehrke",
        "timestamp": 1522784327
    },
    {
        "content": "<p>Regarding the redisclosure language, there is similar language in the KEY PRIVACY AND SECURITY CONSIDERATIONS<br>\nFOR HEALTHCARE APPLICATION PROGRAMMING INTERFACES (APIS) document we were reviewing today in the FHIR Security meeting<br>\nSee page 7 re: end-user authorization screen at <a href=\"https://www.healthit.gov/sites/default/files/privacy-security-api.pdf\" target=\"_blank\" title=\"https://www.healthit.gov/sites/default/files/privacy-security-api.pdf\">https://www.healthit.gov/sites/default/files/privacy-security-api.pdf</a><br>\n\"In accordance with the PMI Privacy Principle of transparency, the approval text should make<br>\nclear to the individual that once the third-party receives the transmitted health information, the<br>\nhealthcare provider is not responsible for what happens to the information maintained by the<br>\nthird-party.\"</p>",
        "id": 153950336,
        "sender_full_name": "Luis Maas",
        "timestamp": 1522784818
    },
    {
        "content": "<p>I think we all agree about downstream disclosure, the concern is around clarity to a common patient in language they can understand. Not a technical issue. But would be good topic under \"Patient Empowerment\". How to make clear to the consumer these facts of life.</p>",
        "id": 153950338,
        "sender_full_name": "John Moehrke",
        "timestamp": 1522785151
    }
]