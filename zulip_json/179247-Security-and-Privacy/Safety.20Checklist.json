[
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191404\">@John Moehrke</span> <span class=\"user-mention\" data-user-id=\"192248\">@Alexander Mense</span> I'm working on the safety check list . I have several issues with it</p>",
        "id": 154023483,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1544106231
    },
    {
        "content": "<p>with the security proposals...</p>",
        "id": 154023484,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1544106242
    },
    {
        "content": "<blockquote>\n<p>My system sends an Accounting of Disclosure to the consenter as requested when permitted actions on resources are performed using a FHIR AuditEvent or Provenance Resource</p>\n</blockquote>",
        "id": 154023485,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1544106254
    },
    {
        "content": "<p>why both (or either)? What's an accounting of disclosure, and where do we describe it?</p>",
        "id": 154023486,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1544106273
    },
    {
        "content": "<blockquote>\n<p>My system follows Privacy by Design Principles sufficient to support compliance with the privacy policies in which it is implemented</p>\n</blockquote>",
        "id": 154023487,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1544106280
    },
    {
        "content": "<p>this is not good grammar, and meaningless too. why say it?</p>",
        "id": 154023488,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1544106296
    },
    {
        "content": "<blockquote>\n<p>My system appropriately protects any authenticators/authenticator mechanisms, and carefully select the type of credential/strength of authenticator required, based on the use case and risk management.</p>\n</blockquote>",
        "id": 154023489,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1544106395
    },
    {
        "content": "<p>what is this a reference to?</p>",
        "id": 154023490,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1544106399
    },
    {
        "content": "<blockquote>\n<p>My system follows Privacy by Design Principles sufficient to support compliance with the privacy policies in which it is implemented</p>\n</blockquote>",
        "id": 154023491,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1544106424
    },
    {
        "content": "<p>more motherhood that brings no value</p>",
        "id": 154023492,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1544106433
    },
    {
        "content": "<p>Much of your observations are why we have provided this only as a proposal. The proposal does need a broader perspective, and a developer perspective, before the items are clear and actionable.</p>",
        "id": 154023505,
        "sender_full_name": "John Moehrke",
        "timestamp": 1544110775
    },
    {
        "content": "<p>Accounting of Disclosures -- This is is described <a href=\"http://build.fhir.org/secpriv-module.html#AoD\" target=\"_blank\" title=\"http://build.fhir.org/secpriv-module.html#AoD\">http://build.fhir.org/secpriv-module.html#AoD</a>    This would leverage AuditEvent. I don't see a role for Provenance here.</p>",
        "id": 154023506,
        "sender_full_name": "John Moehrke",
        "timestamp": 1544110863
    },
    {
        "content": "<p>PbD -- seems there are multiple mentions of Privacy by Design... We need only one. Privacy-by-Design (PbD) is now required by GDPR, and is emerging in other places too. It is not something that one can test for, as it is a design process time effort.  We mention it <a href=\"http://build.fhir.org/secpriv-module.html#privacy\" target=\"_blank\" title=\"http://build.fhir.org/secpriv-module.html#privacy\">http://build.fhir.org/secpriv-module.html#privacy</a></p>",
        "id": 154023507,
        "sender_full_name": "John Moehrke",
        "timestamp": 1544110981
    },
    {
        "content": "<p>authenticator strength -- this is basic security. I am sure you follow it without even thinking about it. Those that forcefully think of it are security centric people, who don't really need to be told this... The specifics are that one needs to have a policy for how strongly authenticated and how strongly proofed an identity is. Once this policy is clear, one must design (or purchace) systems that meet that policy. The risk is using poorly managed user account system to access highly sensitive healthcare information (essentially what most \"breach of user database\" problems stem from) We reference this <a href=\"http://build.fhir.org/security.html#authentication\" target=\"_blank\" title=\"http://build.fhir.org/security.html#authentication\">http://build.fhir.org/security.html#authentication</a></p>",
        "id": 154023508,
        "sender_full_name": "John Moehrke",
        "timestamp": 1544111197
    },
    {
        "content": "<p>ok, I reconciled the rest of the pages, and the outcome is here: <a href=\"http://build.fhir.org/safety.html\" target=\"_blank\" title=\"http://build.fhir.org/safety.html\">http://build.fhir.org/safety.html</a></p>",
        "id": 154023601,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1544138192
    },
    {
        "content": "<p>comments welcome</p>",
        "id": 154023602,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1544138194
    },
    {
        "content": "<p>I started reading it, and it seems to me that is based on a very restrictive view of what a system implementing FHIR is or could be</p>",
        "id": 154023617,
        "sender_full_name": "Michele Mottini",
        "timestamp": 1544139885
    },
    {
        "content": "<p>Our system aggregates clinical data from multiple source, and then make them accessible via FHIR (among other things)</p>",
        "id": 154023618,
        "sender_full_name": "Michele Mottini",
        "timestamp": 1544139939
    },
    {
        "content": "<p>So ' my system handles the full Life cycle ' cannot apply for example</p>",
        "id": 154023619,
        "sender_full_name": "Michele Mottini",
        "timestamp": 1544139970
    },
    {
        "content": "<p>Another example: 'My system will display warnings returned by the server to the user' seems very bad design for a patient-facing app</p>",
        "id": 154023620,
        "sender_full_name": "Michele Mottini",
        "timestamp": 1544140010
    },
    {
        "content": "<p>'My system sends an Accounting of Disclosure to the consenter' - patient agreed to share their data in the original EHR, data got transferred to our system, we publish it via FHIR...and then we should send and AuditEvent to the original patient ??</p>",
        "id": 154023621,
        "sender_full_name": "Michele Mottini",
        "timestamp": 1544140160
    },
    {
        "content": "<p>I think we expect that the answer to many of these might be 'not applicable', and that this is ok</p>",
        "id": 154023625,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1544143084
    },
    {
        "content": "<blockquote>\n<p>'My system will display warnings returned by the server to the user' seems very bad design for a patient-facing app</p>\n</blockquote>\n<p>But no, we add this for a specific reason in a particular place</p>",
        "id": 154023626,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1544143109
    },
    {
        "content": "<p>As for </p>\n<blockquote>\n<p>my system handles the full Life cycle</p>\n</blockquote>\n<p>I absolutely think that patient facing apps should be able to handle displaying status correctly, knowing when information is considered no longer valid / relevant.</p>",
        "id": 154023627,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1544143237
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191404\">@John Moehrke</span> <span class=\"user-mention\" data-user-id=\"192248\">@Alexander Mense</span> I am processing the updated safety check list as part of finalising R4, and I have some questions at the proposed list from <a href=\"https://gforge.hl7.org/gf/project/security/docman/FHIR%20Security/\" target=\"_blank\" title=\"https://gforge.hl7.org/gf/project/security/docman/FHIR%20Security/\">https://gforge.hl7.org/gf/project/security/docman/FHIR%20Security/</a></p>",
        "id": 154023661,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1544163360
    },
    {
        "content": "<p>There's an entry in the safety check list I am not responsible for, which says:</p>\n<blockquote>\n<p>My system uses security methods for an API to authenticate where Domain Name System (DNS) responses are coming from and ensure that they are valid</p>\n</blockquote>",
        "id": 166330512,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1558584258
    },
    {
        "content": "<p>wow. I have no idea how you'd do that. Any ideas?</p>",
        "id": 166330517,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1558584270
    },
    {
        "content": "<p>SecureDNS. I don't know of anyone that does it... but I lost the vote.</p>",
        "id": 166356342,
        "sender_full_name": "John Moehrke",
        "timestamp": 1558615117
    },
    {
        "content": "<p>A close to real version of this is recommended in BCP195, that is to do domain name confirmation. That is you look into the Certificate returned during the TLS at the registered domain names, and confirm that the domain name you wanted to go to is in that list. So you are confirming that where you wanted to go, is declared and asserted (signed) inside the certificate. (<a href=\"https://tools.ietf.org/html/bcp195#section-3.6\" target=\"_blank\" title=\"https://tools.ietf.org/html/bcp195#section-3.6\">https://tools.ietf.org/html/bcp195#section-3.6</a> )<br>\ngiven that we have a checklist item for BCP195, it should not be called out as another checklist item</p>",
        "id": 166356793,
        "sender_full_name": "John Moehrke",
        "timestamp": 1558615510
    },
    {
        "content": "<p>I didn't write this check list item but I understand this from a practical level to mean: You should use DNS recursors that support DNSSEC and validate DNS responses from authoritative DNS servers that use DNSSEC. Perhaps in the future this item could also refer to DNS over HTTPS, DNS over TLS, or DNS over DTLS, DNS over Blockchain, or the next shiny secure DNS manifestation :)</p>",
        "id": 166503203,
        "sender_full_name": "Luis Maas",
        "timestamp": 1558747388
    },
    {
        "content": "<p>so I'm just a hack programmer, but I don't know how to do this:</p>\n<blockquote>\n<p>validate DNS responses from authoritative DNS servers that use DNSSEC</p>\n</blockquote>\n<p>from a client</p>",
        "id": 166503286,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1558747557
    },
    {
        "content": "<p>These are nice to haves for extreme privacy advocates but don't protect data.</p>",
        "id": 166503360,
        "sender_full_name": "David Pyke",
        "timestamp": 1558747650
    },
    {
        "content": "<p>why did we add it then?</p>",
        "id": 166503362,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1558747663
    },
    {
        "content": "<p>I don't know of any http client that supports dns-sec. So I don't know how it can be practical</p>",
        "id": 166503401,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1558747683
    },
    {
        "content": "<p>Because they're nice to haves.</p>",
        "id": 166503409,
        "sender_full_name": "David Pyke",
        "timestamp": 1558747689
    },
    {
        "content": "<p>yeah but they're also can't-have</p>",
        "id": 166503415,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1558747730
    },
    {
        "content": "<p>No, it would all be server level security, not client level</p>",
        "id": 166503427,
        "sender_full_name": "David Pyke",
        "timestamp": 1558747749
    },
    {
        "content": "<p>um. I don't even understand it all then. What does the server do with dns-sec?</p>",
        "id": 166503485,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1558747836
    },
    {
        "content": "<p>in http, it's not the server that does dns, it's the client. And as I said, I know of no client framework that does dns-sec. And I bet I'm the only one here that wrote an http client from scratch on a TCP library</p>",
        "id": 166503502,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1558747896
    },
    {
        "content": "<p>The http client itself wouldn't normally support DNSSEC directly -- their DNS recursor would and this would be completely transparent to the http client. Somewhere in the device or server that your client runs on, you have configured statically or possibly given via DHCP the IP address of one or more DNS servers. When the http client invokes a DNS lookup, say by trying to connect to a host by name, the client is actually making a DNS query to one of those servers (called recursors because those servers then start probing recursively around the Internet to get the IP address you need to make your connection from the host name you provide). It's rarely (maybe never) a good idea to include a full-fledged recursor in a client app.</p>\n<p>At a high level, DNSSEC is a way that the servers that actually hold the authoritative data about which IP address goes with which host name can digitally sign the responses they send back in a way that the DNS recursor can then validate its authenticity. This protects you from some types of DNS hijacking where your client can be tricked into connecting to an attacker's system even though you've entered the right hostname, as well as some DNS-based DOS attacks. Again, usually the client apps using that recursor cannot tell whether or not the recursor is using DNSSEC. Generally, if you're running your own DNS infrastructure, your DNS engineers <em>should</em> have the expertise to set this up correctly, both for your own recursors (so you don't get misdirected when looking up others), and also for your own authoritative servers (so others looking you up don't get misdirected).</p>",
        "id": 166504779,
        "sender_full_name": "Luis Maas",
        "timestamp": 1558750152
    },
    {
        "content": "<blockquote>\n<p>their DNS recursor would and this would be completely transparent to the http client</p>\n</blockquote>\n<p>well, ok. I'm not seeing any evidence that this is a testable statement for any app or user of an app?</p>",
        "id": 166505787,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1558751905
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191404\">@John Moehrke</span> if I'm wrong, you'd score a lot of points by blogging how a user or an app can check that they are running secure DNS on<br>\n- mobile phone (iOS/Android)<br>\n- OSX<br>\n- windows<br>\n- linux</p>",
        "id": 166505811,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1558751962
    },
    {
        "content": "<p>You can do a lookup against a domain where you know DNSSEC is not configured correctly, and see whether you get a response back or an error back. There are a few of these available on the web. <br>\nFor example, if you can open <a href=\"http://www.dnssec-failed.org/\" target=\"_blank\" title=\"http://www.dnssec-failed.org/\">http://www.dnssec-failed.org/</a> with your browser, then the recursor you are using is not checking DNSSEC. If you cannot open that page, then your recursor is checking.</p>",
        "id": 166506696,
        "sender_full_name": "Luis Maas",
        "timestamp": 1558753463
    },
    {
        "content": "<p>I get some comcast advertising... so I guess I'm not running dns-sec.. <span aria-label=\"worried\" class=\"emoji emoji-1f61f\" role=\"img\" title=\"worried\">:worried:</span></p>",
        "id": 166506771,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1558753612
    },
    {
        "content": "<p>This one is somewhat amusing: <a href=\"http://www.dnssec-or-not.com\" target=\"_blank\" title=\"http://www.dnssec-or-not.com\">http://www.dnssec-or-not.com</a></p>",
        "id": 166506858,
        "sender_full_name": "Luis Maas",
        "timestamp": 1558753797
    },
    {
        "content": "<p>is there a way for a server to find out whether a client is running dns-sec?</p>",
        "id": 166506973,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1558753943
    },
    {
        "content": "<p>presumably you just run different end-points</p>",
        "id": 166507040,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1558754046
    },
    {
        "content": "<p>right, that's one way</p>",
        "id": 166507344,
        "sender_full_name": "Luis Maas",
        "timestamp": 1558754587
    },
    {
        "content": "<blockquote>\n<p>in http, it's not the server that does dns, it's the client.</p>\n</blockquote>\n<p>Still, there at plenty of places where we expect a FHIR server to act as a DNS client (e.g., following references, looking up canonical content in a registry, delivering on subscriptions, etc)</p>",
        "id": 166628506,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1558956180
    },
    {
        "content": "<p>Sure but itâ€™s still an http client on that stuff</p>",
        "id": 166629776,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1558957395
    },
    {
        "content": "<p>windows from 2012 (Windows 7) on has support for DNSsec.. but it isn't easy... <a href=\"https://docs.microsoft.com/en-us/previous-versions/windows/it-pro/windows-server-2012-r2-and-2012/hh831411(v%3Dws.11)\" target=\"_blank\" title=\"https://docs.microsoft.com/en-us/previous-versions/windows/it-pro/windows-server-2012-r2-and-2012/hh831411(v%3Dws.11)\">https://docs.microsoft.com/en-us/previous-versions/windows/it-pro/windows-server-2012-r2-and-2012/hh831411(v%3Dws.11)</a></p>",
        "id": 166743035,
        "sender_full_name": "John Moehrke",
        "timestamp": 1559066566
    },
    {
        "content": "<p>as I said way above... I don't think it should be included as it is very unlikely to be understood except by those in the deep security space, and they don't need to be told this as they already know about dnssec and have likely already forced it.</p>",
        "id": 166743122,
        "sender_full_name": "John Moehrke",
        "timestamp": 1559066636
    },
    {
        "content": "<p>that really only works for OS's and workflows from the clinical env or locked down devices. Wouldn't work at all for consumer apps or workflows where each person sets up their own device</p>",
        "id": 166745549,
        "sender_full_name": "Jenni Syed",
        "timestamp": 1559068288
    },
    {
        "content": "<p>Related question that I wonder about: are we validating the OAuth server? I don't mean only checking the server's TLS certificate but also making sure sure a client app is presenting you at the sign in page for the intended healthcare organization and not a phony OAuth server maliciously referenced by a bad or compromised FHIR endpoint, say. phishing that is possibly abusing SMART app launch. Good directories can play a role here; certificates tied to the managing organization and not just the endpoint's hostname may also help. Additional thoughts on this in the middle part of <a href=\"https://www.linkedin.com/pulse/where-api-express-lanes-julie-maas\" target=\"_blank\" title=\"https://www.linkedin.com/pulse/where-api-express-lanes-julie-maas\">this post</a>.</p>",
        "id": 166766890,
        "sender_full_name": "Julie Maas",
        "timestamp": 1559083440
    },
    {
        "content": "<p>the right solution is to have a few trusted identity providers, and just use them. In most countries, that will mean a national identity server</p>",
        "id": 166767055,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1559083565
    },
    {
        "content": "<p>there are many ways to mess up security...  there are many good guidance on how to do it right. We try to itemize these guidance written by security experts as recommendations. Any guidance that we should point at can be added with a CR</p>",
        "id": 166816893,
        "sender_full_name": "John Moehrke",
        "timestamp": 1559137882
    },
    {
        "content": "<blockquote>\n<p>are we validating the OAuth server? </p>\n</blockquote>\n<p>In the SMART launch, this is accomplished through discovery (i.e., if you trust/validate the FHIR resource server, you learn about the OAuth server from that).</p>\n<p>(And in the other direction, we sanity-check links  through the <code>aud</code> parameter -- i.e., if some phony FHIR server claims to be associated with a legitimate authorization server, the client closes the loop by petting the authz server know which FHIR server it's trying to connect to.)</p>",
        "id": 166863722,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1559169416
    }
]