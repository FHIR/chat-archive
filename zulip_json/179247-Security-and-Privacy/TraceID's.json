[
    {
        "content": "<p>Where does request trace ID's (eg. Jaeger trace Id's) fit in to the AuditEvent ressource?</p>",
        "id": 173359775,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1565947952
    },
    {
        "content": "<p>I don't know what that is. can you explain it a bit?</p>",
        "id": 173373914,
        "sender_full_name": "John Moehrke",
        "timestamp": 1565962754
    },
    {
        "content": "<p><a href=\"https://www.jaegertracing.io/docs/1.7/architecture/\" target=\"_blank\" title=\"https://www.jaegertracing.io/docs/1.7/architecture/\">https://www.jaegertracing.io/docs/1.7/architecture/</a></p>",
        "id": 173374247,
        "sender_full_name": "David Pyke",
        "timestamp": 1565963041
    },
    {
        "content": "<p>okay, then if I understand this correctly; this is an id of a system pathway through some tasks. Thus it is clearly not an agent, as it is not representing something that is acting. Thus the only other place for it to go is as a .entity.   In IHE we often will put SOAP message id in as an identity. It seems this is similar, except it represents internal processing. Right?</p>",
        "id": 173377234,
        "sender_full_name": "John Moehrke",
        "timestamp": 1565965355
    },
    {
        "content": "<p>if that is right, then we can work at the next level of detail... how to fill out an entity such that the audit analysis understands it... If I am wrong, then I need to understand it better</p>",
        "id": 173377303,
        "sender_full_name": "John Moehrke",
        "timestamp": 1565965426
    },
    {
        "content": "<p>would like to see us build an example that ends up in the fhir core spec...</p>",
        "id": 173377508,
        "sender_full_name": "John Moehrke",
        "timestamp": 1565965567
    },
    {
        "content": "<p>what does a trace id look like? <span class=\"user-mention\" data-user-id=\"191427\">@Jens Villadsen</span> do you have an example of a trace id that you could share?</p>",
        "id": 173377672,
        "sender_full_name": "John Moehrke",
        "timestamp": 1565965710
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191404\">@John Moehrke</span> see <a href=\"https://www.envoyproxy.io/docs/envoy/latest/configuration/http_conn_man/headers#x-b3-traceid\" target=\"_blank\" title=\"https://www.envoyproxy.io/docs/envoy/latest/configuration/http_conn_man/headers#x-b3-traceid\">https://www.envoyproxy.io/docs/envoy/latest/configuration/http_conn_man/headers#x-b3-traceid</a> and <a href=\"https://github.com/openzipkin/b3-propagation#traceid-2\" target=\"_blank\" title=\"https://github.com/openzipkin/b3-propagation#traceid-2\">https://github.com/openzipkin/b3-propagation#traceid-2</a></p>",
        "id": 173534757,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1566212479
    },
    {
        "content": "<p>64 or 128 bit id</p>",
        "id": 173534775,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1566212513
    },
    {
        "content": "<p>An Identifier on AuditEvent would be sufficient</p>",
        "id": 173534816,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1566212527
    },
    {
        "content": "<p>anyone in a cloud native environment should have similar needs, I imagine</p>",
        "id": 173534854,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1566212596
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191427\">@Jens Villadsen</span> would you agree that can be put into a .entity.who.identifier, with entity.type of 'system object', .entity.role as 'job stream'. Right?</p>",
        "id": 173538108,
        "sender_full_name": "John Moehrke",
        "timestamp": 1566216160
    },
    {
        "content": "<p>I was asking about the format of the trace ID to determine if it was distinguishable. Might be useful to have an .entity.role value that is more specific to this kind of ID? I picked job stream because it seemed similar</p>",
        "id": 173538331,
        "sender_full_name": "John Moehrke",
        "timestamp": 1566216407
    },
    {
        "content": "<p>Is there a entity.who?  I can see a entity.what - not an entity.who.</p>",
        "id": 173539317,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1566217398
    },
    {
        "content": "<p><a href=\"/user_uploads/10155/BlJ3aaD7IUmXzOvNVBOt-G0R/pasted_image.png\" target=\"_blank\" title=\"pasted_image.png\">pasted image</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/BlJ3aaD7IUmXzOvNVBOt-G0R/pasted_image.png\" target=\"_blank\" title=\"pasted image\"><img src=\"/user_uploads/10155/BlJ3aaD7IUmXzOvNVBOt-G0R/pasted_image.png\"></a></div>",
        "id": 173539320,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1566217400
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191404\">@John Moehrke</span></p>",
        "id": 173539355,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1566217436
    },
    {
        "content": "<p>What do you mean by job stream?</p>",
        "id": 173576057,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1566246166
    },
    {
        "content": "<p>example:  <code>X-B3-TraceId: 80f198ee56343ba864fe8b2a57d3eff7</code></p>",
        "id": 173633702,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1566284344
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191404\">@John Moehrke</span> any comments?</p>",
        "id": 173796192,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1566395875
    },
    {
        "content": "<p>sorry for the delay. Yes, ,entity.what</p>",
        "id": 173882828,
        "sender_full_name": "John Moehrke",
        "timestamp": 1566480861
    },
    {
        "content": "<p>I mean \"Job Stream\" as in <a href=\"http://build.fhir.org/codesystem-object-role.html#object-role-21\" target=\"_blank\" title=\"http://build.fhir.org/codesystem-object-role.html#object-role-21\">http://build.fhir.org/codesystem-object-role.html#object-role-21</a></p>",
        "id": 173882909,
        "sender_full_name": "John Moehrke",
        "timestamp": 1566480924
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191404\">@John Moehrke</span> should this use be examplified in the spec?</p>",
        "id": 174430985,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1567064522
    },
    {
        "content": "<p>in order to streamline use or just to have a suggestion for others that would have the same need?</p>",
        "id": 174431035,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1567064568
    },
    {
        "content": "<p>I think minimally we should add an example specific to trace ID... so, lets build that example with enough narrative to explain what we had to in this thread</p>",
        "id": 174448207,
        "sender_full_name": "John Moehrke",
        "timestamp": 1567081533
    },
    {
        "content": "<p>I don't think trace id  is common enough to add to the front page of AuditEvent.</p>",
        "id": 174448405,
        "sender_full_name": "John Moehrke",
        "timestamp": 1567081666
    },
    {
        "content": "<p>I would say jaeger tracing is pretty common judged by the amount of stars on the <a href=\"https://github.com/jaegertracing/jaeger\" target=\"_blank\" title=\"https://github.com/jaegertracing/jaeger\">https://github.com/jaegertracing/jaeger</a> has received?</p>",
        "id": 181219988,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1574265157
    },
    {
        "content": "<p>can we start with an example audit message that include the trace id?</p>",
        "id": 181223286,
        "sender_full_name": "John Moehrke",
        "timestamp": 1574267242
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191404\">@John Moehrke</span> - here you are ;)</p>\n<div class=\"codehilite\"><pre><span></span>{\n   &quot;resourceType&quot;:&quot;AuditEvent&quot;,\n   &quot;type&quot;:{\n      &quot;system&quot;:&quot;http://hl7.org/fhir/audit-event-type&quot;,\n      &quot;code&quot;:&quot;rest&quot;,\n      &quot;display&quot;:&quot;RESTful Operation&quot;\n   },\n   &quot;subtype&quot;:[\n      {\n         &quot;system&quot;:&quot;http://hl7.org/fhir/restful-interaction&quot;,\n         &quot;code&quot;:&quot;$createPatient&quot;\n      }\n   ],\n   &quot;action&quot;:&quot;E&quot;,\n   &quot;recorded&quot;:&quot;2019-12-04T11:59:28.646+00:00&quot;,\n   &quot;outcome&quot;:&quot;0&quot;,\n   &quot;outcomeDesc&quot;:&quot;Patient&quot;,\n   &quot;agent&quot;:[\n      {\n         &quot;extension&quot;:[\n            {\n               &quot;url&quot;:&quot;http://ehealth.sundhed.dk/fhir/StructureDefinition/ehealth-responsibleOrganization&quot;,\n               &quot;valueReference&quot;:{\n                  &quot;reference&quot;:&quot;http://organization.inttest.ehealth.sundhed.dk/fhir/Organization/10357&quot;\n               }\n            }\n         ],\n         &quot;userId&quot;:{\n            &quot;system&quot;:&quot;http://ehealth.sundhed.dk&quot;,\n            &quot;value&quot;:&quot;http://organization.inttest.ehealth.sundhed.dk/fhir/Practitioner/143473&quot;\n         },\n         &quot;requestor&quot;:true\n      }\n   ],\n   &quot;source&quot;:{\n      &quot;identifier&quot;:{\n         &quot;value&quot;:&quot;http://ehealth.sundhed.dk&quot;\n      },\n      &quot;type&quot;:[\n         {\n            &quot;system&quot;:&quot;http://hl7.org/fhir/security-source-type&quot;,\n            &quot;code&quot;:&quot;4&quot;\n         }\n      ]\n   },\n   &quot;entity&quot;:[\n      {\n         &quot;reference&quot;:{\n            &quot;reference&quot;:&quot;http://patient.inttest.ehealth.sundhed.dk/fhir/Patient/852&quot;\n         },\n         &quot;role&quot;:{\n            &quot;system&quot;:&quot;http://hl7.org/fhir/object-role&quot;,\n            &quot;code&quot;:&quot;1&quot;\n         }\n      },\n      {\n         &quot;identifier&quot;:{\n            &quot;system&quot;:&quot;http://ehealth.sundhed.dk&quot;,\n            &quot;value&quot;:&quot;6b507ee2d716780372c255df69ece653&quot;\n         },\n         &quot;type&quot;:{\n            &quot;system&quot;:&quot;http://hl7.org/fhir/security-source-type&quot;,\n            &quot;code&quot;:&quot;2&quot;,\n            &quot;display&quot;:&quot;Data Interface&quot;\n         },\n         &quot;role&quot;:{\n            &quot;system&quot;:&quot;http://hl7.org/fhir/object-role&quot;,\n            &quot;code&quot;:&quot;21&quot;,\n            &quot;display&quot;:&quot;Job Stream&quot;\n         }\n      }\n   ]\n}\n</pre></div>",
        "id": 194910125,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1587549677
    },
    {
        "content": "<p>can you create a change proposal with this recommendation and this example?</p>",
        "id": 194923352,
        "sender_full_name": "John Moehrke",
        "timestamp": 1587559177
    },
    {
        "content": "<p>sure</p>",
        "id": 194928874,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1587561686
    },
    {
        "content": "<p><a href=\"https://jira.hl7.org/browse/FHIR-26923\" title=\"https://jira.hl7.org/browse/FHIR-26923\">https://jira.hl7.org/browse/FHIR-26923</a></p>",
        "id": 194932704,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1587563271
    },
    {
        "content": "<p>thanks... but note that we really do need the jira tickets to stand on their own. They can reference a zulip chat for emphsys, but they must include the problem and solution within jira. I will manage with this one</p>",
        "id": 194934452,
        "sender_full_name": "John Moehrke",
        "timestamp": 1587563954
    },
    {
        "content": "<p>thx</p>",
        "id": 194934493,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1587563968
    },
    {
        "content": "<p>In working on this CR for preparation for vote. It is not clear to me if this need is satisfied with a well formed example, or if something needs to change on the core AuditEvent page. If so, where and what should be said? I am really looking for exact text. <a href=\"http://jira.hl7.org/browse/FHIR-26923\" title=\"http://jira.hl7.org/browse/FHIR-26923\">J#26923</a></p>",
        "id": 195419134,
        "sender_full_name": "John Moehrke",
        "timestamp": 1587995360
    },
    {
        "content": "<p>Why is there no identifier element available in the AuditEvent so that we can identifiy an unique AuditEvent resource instance, by using e.g the b3-propagation headers as identifiers. See: <a href=\"https://github.com/openzipkin/b3-propagation\">https://github.com/openzipkin/b3-propagation</a>?</p>",
        "id": 264140339,
        "sender_full_name": "Bernard Stibbe",
        "timestamp": 1638961680
    },
    {
        "content": "<p>There is an .id. so one can refer to an instance of AuditEvent. there is just not a business .identifier. There is no use-case that has been brought to us where there are equal objects that have a business identifier. <br>\nTraceID was discussed as appropriate to record in an .entity -- See the example in the current fhir build - <a href=\"http://build.fhir.org/audit-event-example-create-traceID.html\">http://build.fhir.org/audit-event-example-create-traceID.html</a></p>",
        "id": 264144331,
        "sender_full_name": "John Moehrke",
        "timestamp": 1638964348
    },
    {
        "content": "<p>a number of servers are using 'X-Request-Id' for this</p>",
        "id": 264211101,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1638993350
    },
    {
        "content": "<p>see <a href=\"https://hl7.org/fhir/http.html#custom\">https://hl7.org/fhir/http.html#custom</a></p>",
        "id": 264211188,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1638993375
    },
    {
        "content": "<p>not clear on what you are stating. Yes the X-Request-ID could/should be recorded as an .entity to help coorelated AuditEvents that happened as a result of a http transaction. Is this what you are mentioning?</p>",
        "id": 264211678,
        "sender_full_name": "John Moehrke",
        "timestamp": 1638993570
    },
    {
        "content": "<p>I will add X-Request-Id to my BasicAudit IG. (TraceID is not as clear to me)</p>",
        "id": 264212309,
        "sender_full_name": "John Moehrke",
        "timestamp": 1638993835
    },
    {
        "content": "<p>well, we're using that in the http headers, and it would make sense to put that id in the AuditEvent - I'm putting it in AuditEvent.entity. I'll have to review that</p>",
        "id": 264212813,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1638994059
    },
    {
        "content": "<p>okay. i thought you were indicating that the x-request-id was being used as if it was a AuditEvent.identifier.</p>",
        "id": 264213245,
        "sender_full_name": "John Moehrke",
        "timestamp": 1638994251
    },
    {
        "content": "<p>putting it in a .entity seems logical to me. How that .entity is decorated so that it is understood is not as clear to me. So I would be happy to replicate what you have already implemented.</p>",
        "id": 264213397,
        "sender_full_name": "John Moehrke",
        "timestamp": 1638994320
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"XML\"><pre><span></span><code>  <span class=\"nt\">&lt;entity&gt;</span>\n    <span class=\"nt\">&lt;type&gt;</span>\n      <span class=\"nt\">&lt;code</span> <span class=\"na\">value=</span><span class=\"s\">\"X-Request-Id\"</span><span class=\"nt\">/&gt;</span>\n    <span class=\"nt\">&lt;/type&gt;</span>\n    <span class=\"nt\">&lt;what&gt;</span>\n     <span class=\"nt\">&lt;identifier&gt;</span>\n     <span class=\"nt\">&lt;value</span> <span class=\"na\">value=</span><span class=\"s\">\"{X-request-id}\"</span><span class=\"nt\">/&gt;</span>\n     <span class=\"nt\">&lt;/identifier&gt;</span>\n   <span class=\"nt\">&lt;/what&gt;</span>\n  <span class=\"nt\">&lt;/entity&gt;</span>\n</code></pre></div>",
        "id": 264214730,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1638994948
    },
    {
        "content": "<p>I cannot say that I'm happy with that, but I don't know what to put for the system</p>",
        "id": 264214763,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1638994968
    },
    {
        "content": "<p>I can define a code in my IG.</p>",
        "id": 264220133,
        "sender_full_name": "John Moehrke",
        "timestamp": 1638997458
    },
    {
        "content": "<p>I'll use it</p>",
        "id": 264220361,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1638997583
    },
    {
        "content": "<p>x-request-id is just one of many identifiers. See eg. <a href=\"https://www.envoyproxy.io/docs/envoy/latest/configuration/http/http_conn_man/headers\">https://www.envoyproxy.io/docs/envoy/latest/configuration/http/http_conn_man/headers</a></p>",
        "id": 264565145,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1639232510
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191404\">@John Moehrke</span> I still think Identifiers are needed on the AuditEvent</p>",
        "id": 264565230,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1639232618
    },
    {
        "content": "<p>Those are transaction identifiers.</p>",
        "id": 264565764,
        "sender_full_name": "John Moehrke",
        "timestamp": 1639233464
    },
    {
        "content": "<p>So ... to some extent yes. But they could also be considered business identifiers ... depending on your definition on transaction in a distributed asynchronous  system.</p>",
        "id": 264568511,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1639236993
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191404\">@John Moehrke</span>  Don't you think they should be included into the AuditEvent?</p>",
        "id": 264568534,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1639237039
    },
    {
        "content": "<p>Yes, as entity.what.identifier.  see my IG</p>",
        "id": 264571217,
        "sender_full_name": "John Moehrke",
        "timestamp": 1639240422
    }
]