[
    {
        "content": "<p>Is anyone interested in testing AuditEvent at the upcoming FHIR-Connectathon?</p>",
        "id": 234871977,
        "sender_full_name": "John Moehrke",
        "timestamp": 1618586193
    },
    {
        "content": "<p>Is there a specific track?</p>",
        "id": 234887979,
        "sender_full_name": "David Pyke",
        "timestamp": 1618592341
    },
    {
        "content": "<p>if there was interest.. I would create a track. but to create a track and twiddle my thumbs alone, I can do without creating a track.</p>",
        "id": 234897757,
        "sender_full_name": "John Moehrke",
        "timestamp": 1618596504
    },
    {
        "content": "<p>I know SANER has audit, there may be others with AuditEvent in them.  Might be better to coordinate there.</p>",
        "id": 234900320,
        "sender_full_name": "David Pyke",
        "timestamp": 1618597603
    },
    {
        "content": "<p>Yes, i know I put AuditEvent into SANER... but does anyone do it?   What other IG have AuditEvent in them? Do we have any tooling to test for compliance?</p>",
        "id": 234901218,
        "sender_full_name": "John Moehrke",
        "timestamp": 1618598031
    },
    {
        "content": "<p>I would like to test my IG -- <a href=\"http://build.fhir.org/ig/JohnMoehrke/BasicAudit/branches/main/index.html\">http://build.fhir.org/ig/JohnMoehrke/BasicAudit/branches/main/index.html</a></p>",
        "id": 234901401,
        "sender_full_name": "John Moehrke",
        "timestamp": 1618598102
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191404\">@John Moehrke</span> we have used AuditEvent for recording consent decisions in LEAP. If there is a track we'd like to participate.</p>",
        "id": 236536558,
        "sender_full_name": "Mohammad Jafari",
        "timestamp": 1619626811
    },
    {
        "content": "<p>I think it is going to be an adhoc track. Those that are recording can share what they are doing. Those that are using AuditEvent can show what they are doing with them.</p>",
        "id": 236559600,
        "sender_full_name": "John Moehrke",
        "timestamp": 1619636129
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191920\">@Mohammad Jafari</span> I would like to watch your AuditEvents at this connectathon. What FHIR Server are you creating them in?</p>",
        "id": 238295423,
        "sender_full_name": "John Moehrke",
        "timestamp": 1620734926
    },
    {
        "content": "<p>The part of the code that does this is here:<br>\n<a href=\"https://github.com/sdhealthconnect/leap-cds/blob/master/lib/audit.js\">https://github.com/sdhealthconnect/leap-cds/blob/master/lib/audit.js</a></p>\n<p>The resource template is here:<br>\n<a href=\"https://github.com/sdhealthconnect/leap-cds/blob/master/template-resources/audit-event.json\">https://github.com/sdhealthconnect/leap-cds/blob/master/template-resources/audit-event.json</a></p>\n<p>Our server:<br>\n<a href=\"http://34.94.253.50:8080/hapi-fhir-jpaserver/fhir/AuditEvent\">http://34.94.253.50:8080/hapi-fhir-jpaserver/fhir/AuditEvent</a></p>\n<p>Here is a sample of an AuditEvent resource generated by the LEAP Consent Decision service:</p>\n<div class=\"codehilite\" data-code-language=\"JSON\"><pre><span></span><code><span class=\"p\">{</span>\n  <span class=\"nt\">\"resourceType\"</span><span class=\"p\">:</span> <span class=\"s2\">\"AuditEvent\"</span><span class=\"p\">,</span>\n  <span class=\"nt\">\"id\"</span><span class=\"p\">:</span> <span class=\"s2\">\"12066\"</span><span class=\"p\">,</span>\n  <span class=\"nt\">\"meta\"</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n    <span class=\"nt\">\"versionId\"</span><span class=\"p\">:</span> <span class=\"s2\">\"1\"</span><span class=\"p\">,</span>\n    <span class=\"nt\">\"lastUpdated\"</span><span class=\"p\">:</span> <span class=\"s2\">\"2021-05-06T21:00:04.957+00:00\"</span><span class=\"p\">,</span>\n    <span class=\"nt\">\"source\"</span><span class=\"p\">:</span> <span class=\"s2\">\"#Z8ZJT1GCH9gdHlj7\"</span>\n  <span class=\"p\">},</span>\n  <span class=\"nt\">\"type\"</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n    <span class=\"nt\">\"system\"</span><span class=\"p\">:</span> <span class=\"s2\">\"http://hl7.org/fhir/ValueSet/audit-event-type\"</span><span class=\"p\">,</span>\n    <span class=\"nt\">\"code\"</span><span class=\"p\">:</span> <span class=\"s2\">\"110112\"</span><span class=\"p\">,</span>\n    <span class=\"nt\">\"display\"</span><span class=\"p\">:</span> <span class=\"s2\">\"Query\"</span>\n  <span class=\"p\">},</span>\n  <span class=\"nt\">\"action\"</span><span class=\"p\">:</span> <span class=\"s2\">\"E\"</span><span class=\"p\">,</span>\n  <span class=\"nt\">\"recorded\"</span><span class=\"p\">:</span> <span class=\"s2\">\"2021-05-06T21:00:04.156Z\"</span><span class=\"p\">,</span>\n  <span class=\"nt\">\"outcome\"</span><span class=\"p\">:</span> <span class=\"s2\">\"0\"</span><span class=\"p\">,</span>\n  <span class=\"nt\">\"outcomeDesc\"</span><span class=\"p\">:</span> <span class=\"s2\">\"CONSENT_PERMIT\"</span><span class=\"p\">,</span>\n  <span class=\"nt\">\"agent\"</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n    <span class=\"p\">{</span>\n      <span class=\"nt\">\"type\"</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n        <span class=\"nt\">\"coding\"</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n          <span class=\"p\">{</span>\n            <span class=\"nt\">\"system\"</span><span class=\"p\">:</span> <span class=\"s2\">\"http://dicom.nema.org/resources/ontology/DCM\"</span><span class=\"p\">,</span>\n            <span class=\"nt\">\"code\"</span><span class=\"p\">:</span> <span class=\"s2\">\"110152\"</span><span class=\"p\">,</span>\n            <span class=\"nt\">\"display\"</span><span class=\"p\">:</span> <span class=\"s2\">\"Destination Role ID\"</span>\n          <span class=\"p\">}</span>\n        <span class=\"p\">]</span>\n      <span class=\"p\">},</span>\n      <span class=\"nt\">\"who\"</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n        <span class=\"nt\">\"identifier\"</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n          <span class=\"nt\">\"system\"</span><span class=\"p\">:</span> <span class=\"s2\">\"urn:ietf:rfc:3986\"</span><span class=\"p\">,</span>\n          <span class=\"nt\">\"value\"</span><span class=\"p\">:</span> <span class=\"s2\">\"urn:oid:1.1\"</span>\n        <span class=\"p\">}</span>\n      <span class=\"p\">},</span>\n      <span class=\"nt\">\"requestor\"</span><span class=\"p\">:</span> <span class=\"kc\">true</span><span class=\"p\">,</span>\n      <span class=\"nt\">\"purposeOfUse\"</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n        <span class=\"p\">{</span>\n          <span class=\"nt\">\"coding\"</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n            <span class=\"p\">{</span>\n              <span class=\"nt\">\"system\"</span><span class=\"p\">:</span> <span class=\"s2\">\"http://terminology.hl7.org/ValueSet/v3-PurposeOfUse\"</span><span class=\"p\">,</span>\n              <span class=\"nt\">\"code\"</span><span class=\"p\">:</span> <span class=\"s2\">\"TREAT\"</span>\n            <span class=\"p\">}</span>\n          <span class=\"p\">]</span>\n        <span class=\"p\">}</span>\n      <span class=\"p\">]</span>\n    <span class=\"p\">}</span>\n  <span class=\"p\">],</span>\n  <span class=\"nt\">\"source\"</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n    <span class=\"nt\">\"observer\"</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n      <span class=\"nt\">\"display\"</span><span class=\"p\">:</span> <span class=\"s2\">\"LEAP Consent Decision Service\"</span>\n    <span class=\"p\">},</span>\n    <span class=\"nt\">\"type\"</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n      <span class=\"p\">{</span>\n        <span class=\"nt\">\"system\"</span><span class=\"p\">:</span> <span class=\"s2\">\"http://terminology.hl7.org/CodeSystem/security-source-type\"</span><span class=\"p\">,</span>\n        <span class=\"nt\">\"code\"</span><span class=\"p\">:</span> <span class=\"s2\">\"4\"</span><span class=\"p\">,</span>\n        <span class=\"nt\">\"display\"</span><span class=\"p\">:</span> <span class=\"s2\">\"Application Server\"</span>\n      <span class=\"p\">}</span>\n    <span class=\"p\">]</span>\n  <span class=\"p\">},</span>\n  <span class=\"nt\">\"entity\"</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n    <span class=\"p\">{</span>\n      <span class=\"nt\">\"what\"</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n        <span class=\"nt\">\"reference\"</span><span class=\"p\">:</span> <span class=\"s2\">\"Patient/104\"</span><span class=\"p\">,</span>\n        <span class=\"nt\">\"display\"</span><span class=\"p\">:</span> <span class=\"s2\">\"Younger,Gallow\"</span>\n      <span class=\"p\">},</span>\n      <span class=\"nt\">\"type\"</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n        <span class=\"nt\">\"system\"</span><span class=\"p\">:</span> <span class=\"s2\">\"http://terminology.hl7.org/CodeSystem/audit-entity-type\"</span><span class=\"p\">,</span>\n        <span class=\"nt\">\"code\"</span><span class=\"p\">:</span> <span class=\"s2\">\"1\"</span><span class=\"p\">,</span>\n        <span class=\"nt\">\"display\"</span><span class=\"p\">:</span> <span class=\"s2\">\"Person\"</span>\n      <span class=\"p\">},</span>\n      <span class=\"nt\">\"role\"</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n        <span class=\"nt\">\"system\"</span><span class=\"p\">:</span> <span class=\"s2\">\"http://terminology.hl7.org/CodeSystem/object-role\"</span><span class=\"p\">,</span>\n        <span class=\"nt\">\"code\"</span><span class=\"p\">:</span> <span class=\"s2\">\"1\"</span><span class=\"p\">,</span>\n        <span class=\"nt\">\"display\"</span><span class=\"p\">:</span> <span class=\"s2\">\"Patient\"</span>\n      <span class=\"p\">}</span>\n    <span class=\"p\">},</span>\n    <span class=\"p\">{</span>\n      <span class=\"nt\">\"what\"</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n        <span class=\"nt\">\"reference\"</span><span class=\"p\">:</span> <span class=\"s2\">\"Consent/105\"</span>\n      <span class=\"p\">},</span>\n      <span class=\"nt\">\"type\"</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n        <span class=\"nt\">\"system\"</span><span class=\"p\">:</span> <span class=\"s2\">\"http://terminology.hl7.org/CodeSystem/audit-entity-type\"</span><span class=\"p\">,</span>\n        <span class=\"nt\">\"code\"</span><span class=\"p\">:</span> <span class=\"s2\">\"2\"</span><span class=\"p\">,</span>\n        <span class=\"nt\">\"display\"</span><span class=\"p\">:</span> <span class=\"s2\">\"System Object\"</span>\n      <span class=\"p\">},</span>\n      <span class=\"nt\">\"role\"</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n        <span class=\"nt\">\"system\"</span><span class=\"p\">:</span> <span class=\"s2\">\"http://terminology.hl7.org/CodeSystem/object-role\"</span><span class=\"p\">,</span>\n        <span class=\"nt\">\"code\"</span><span class=\"p\">:</span> <span class=\"s2\">\"4\"</span><span class=\"p\">,</span>\n        <span class=\"nt\">\"display\"</span><span class=\"p\">:</span> <span class=\"s2\">\"Domain Resource\"</span>\n      <span class=\"p\">}</span>\n    <span class=\"p\">}</span>\n  <span class=\"p\">]</span>\n<span class=\"p\">}</span>\n</code></pre></div>",
        "id": 238359894,
        "sender_full_name": "Mohammad Jafari",
        "timestamp": 1620757624
    },
    {
        "content": "<p>That is an AuditEvent recording that a Query happened. Which is likely true that the access control decision did pull in the Consent.</p>",
        "id": 238530103,
        "sender_full_name": "John Moehrke",
        "timestamp": 1620847389
    },
    {
        "content": "<p>But I was expecting an AuditEvent indicating that a decision was made.</p>",
        "id": 238530135,
        "sender_full_name": "John Moehrke",
        "timestamp": 1620847413
    },
    {
        "content": "<p>so the .type would not be Query. The .type would be something like \"AccessDecision\"... likely a code you would need to define in your IG...</p>",
        "id": 238530400,
        "sender_full_name": "John Moehrke",
        "timestamp": 1620847563
    },
    {
        "content": "<p>note as a Query type AuditEvent, you are expected to have an entity with the .query populated.</p>",
        "id": 238530555,
        "sender_full_name": "John Moehrke",
        "timestamp": 1620847637
    },
    {
        "content": "<p>note that the reason the vocabulary for .type does not include \"access control decision\" is that we kind of expected that to be something done in general IT security, and thus not something healthcare specific. But this is why the .type is extensible</p>",
        "id": 238534075,
        "sender_full_name": "John Moehrke",
        "timestamp": 1620849245
    },
    {
        "content": "<p>ah, that leads me to think that with a AuditEvent.type of access control decision... then the .entity would be the various \"access control information\", thus the Consent. so the role of the .entity pointing at the consent is ACI.. as would also be the user identity, the system identiy, the purpose of use, the target of the access control request scope.</p>",
        "id": 238534387,
        "sender_full_name": "John Moehrke",
        "timestamp": 1620849368
    },
    {
        "content": "<p>Thanks John. These are interesting points. I do agree that Query is not the most accurate type but I also don't think it's the job of a consent engine profile to define a broad value like AccessDecision; maybe it makes sense to define a ConsentDecision though. <br>\nI do think that AccessDecision is probably one of the most common use-cases for Audit and should be added to core.</p>",
        "id": 238684990,
        "sender_full_name": "Mohammad Jafari",
        "timestamp": 1620941781
    },
    {
        "content": "<p>checkout whova. I have added a meet-ups for AuditEvent tuesday 12pm GMT</p>",
        "id": 239126204,
        "sender_full_name": "John Moehrke",
        "timestamp": 1621271375
    },
    {
        "content": "<p>Some minor updates on my prototype IG for basic audit - enhancing logging of search, specifically POST based search <a href=\"http://build.fhir.org/ig/JohnMoehrke/BasicAudit/branches/main/index.html\">http://build.fhir.org/ig/JohnMoehrke/BasicAudit/branches/main/index.html</a></p>",
        "id": 239166497,
        "sender_full_name": "John Moehrke",
        "timestamp": 1621288847
    },
    {
        "content": "<p>Those at Connectathon... coming up in 20 minutes is the AuditEvent meet-up.</p>",
        "id": 239238367,
        "sender_full_name": "John Moehrke",
        "timestamp": 1621338178
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191920\">@Mohammad Jafari</span> are you actively recording AuditEvent resources this week? I don't see anything new in the server you indicated.</p>",
        "id": 239242579,
        "sender_full_name": "John Moehrke",
        "timestamp": 1621340275
    },
    {
        "content": "<p>Heard from a little bird that FireLy does support automatic audit logging... if configured... wish I knew how to get a FireLy server at FHIR-Connectathon to turn this on...     I would like to work on aligning FireLy and my auditEvent IG.   <a href=\"https://docs.fire.ly/firelyserver/features/auditing.html\">https://docs.fire.ly/firelyserver/features/auditing.html</a></p>",
        "id": 239245422,
        "sender_full_name": "John Moehrke",
        "timestamp": 1621341596
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191404\">@John Moehrke</span> You can do a GET on <a href=\"https://server.fire.ly/AuditEvent\">https://server.fire.ly/AuditEvent</a> to see AuditEvents that we generate by default. Every request is logged in the default configuration.</p>",
        "id": 239246083,
        "sender_full_name": "Alexander Zautke",
        "timestamp": 1621341884
    },
    {
        "content": "<p>Let me know if you have any questions, happy to do a short breakout session on the topic to discuss if we should structure the AuditEvents differently</p>",
        "id": 239246180,
        "sender_full_name": "Alexander Zautke",
        "timestamp": 1621341925
    },
    {
        "content": "<p>excellent. Yes I would like to work with you on this.</p>",
        "id": 239246371,
        "sender_full_name": "John Moehrke",
        "timestamp": 1621341982
    },
    {
        "content": "<p>is there a way to turn on this audit logging on a server being used at connecathon?</p>",
        "id": 239246508,
        "sender_full_name": "John Moehrke",
        "timestamp": 1621342041
    },
    {
        "content": "<p>There is not dedicated connectathon server, it's just this instance.</p>",
        "id": 239246941,
        "sender_full_name": "Alexander Zautke",
        "timestamp": 1621342193
    },
    {
        "content": "<p>so.. is that a yes?</p>",
        "id": 239247014,
        "sender_full_name": "John Moehrke",
        "timestamp": 1621342208
    },
    {
        "content": "<p>Ah sorry, yes, it should work</p>",
        "id": 239247090,
        "sender_full_name": "Alexander Zautke",
        "timestamp": 1621342237
    },
    {
        "content": "<p>so the <a href=\"http://server.fhir.ly\">server.fhir.ly</a>?</p>",
        "id": 239247192,
        "sender_full_name": "John Moehrke",
        "timestamp": 1621342280
    },
    {
        "content": "<p>yes, every request to it should create a new AuditEvent</p>",
        "id": 239247255,
        "sender_full_name": "Alexander Zautke",
        "timestamp": 1621342310
    },
    {
        "content": "<p>excellent</p>",
        "id": 239247281,
        "sender_full_name": "John Moehrke",
        "timestamp": 1621342319
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"193430\">Alexander Zautke</span> <a href=\"#narrow/stream/179247-Security-and.20Privacy/topic/AuditEvent.20testing.20at.20FHIR-Connectathon/near/239246083\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"191404\">John Moehrke</span> You can do a GET on <a href=\"https://server.fire.ly/AuditEvent\">https://server.fire.ly/AuditEvent</a> to see AuditEvents that we generate by default. Every request is logged in the default configuration.</p>\n</blockquote>\n<p>my mistake... I read this as :Every request is <strong>not</strong> logged in the default configuration</p>",
        "id": 239247485,
        "sender_full_name": "John Moehrke",
        "timestamp": 1621342378
    },
    {
        "content": "<p>I (as security co-chair) am surprised to find audit logging turned on by default...  happy surprise.</p>",
        "id": 239247554,
        "sender_full_name": "John Moehrke",
        "timestamp": 1621342405
    },
    {
        "content": "<p>I am thinking of scheduling another meet-up in the FHIR-Connectathon whova.   Any timeslot I should chose?</p>",
        "id": 239248675,
        "sender_full_name": "John Moehrke",
        "timestamp": 1621342824
    },
    {
        "content": "<p>I'm blocked between 3PM (UTC) until 4PM (UTC), feel free to choose anything else</p>",
        "id": 239249077,
        "sender_full_name": "Alexander Zautke",
        "timestamp": 1621342947
    },
    {
        "content": "<p>I was thinking of noon UTC again</p>",
        "id": 239249462,
        "sender_full_name": "John Moehrke",
        "timestamp": 1621343068
    },
    {
        "content": "<p>or 11am UTC?</p>",
        "id": 239249505,
        "sender_full_name": "John Moehrke",
        "timestamp": 1621343086
    },
    {
        "content": "<p>11 AM UTC tomorrow sounds good</p>",
        "id": 239249614,
        "sender_full_name": "Alexander Zautke",
        "timestamp": 1621343121
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191404\">@John Moehrke</span> <br>\nWe do create an AuditEvent per permit/deny decision. I know <span class=\"user-mention\" data-user-id=\"191915\">@Duane Decouteau</span>  has been demoing LEAP so there must be new AuditEvents. We will look into this more.</p>",
        "id": 239282079,
        "sender_full_name": "Mohammad Jafari",
        "timestamp": 1621354634
    },
    {
        "content": "<p>right. now I see 400+</p>",
        "id": 239282608,
        "sender_full_name": "John Moehrke",
        "timestamp": 1621354823
    },
    {
        "content": "<p>I have added a meet-up wednesday morning at 11am UTC.</p>",
        "id": 239285267,
        "sender_full_name": "John Moehrke",
        "timestamp": 1621355809
    },
    {
        "content": "<p>find it in whova under Community Meet-ups</p>",
        "id": 239285309,
        "sender_full_name": "John Moehrke",
        "timestamp": 1621355828
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191404\">@John Moehrke</span> <span class=\"user-mention\" data-user-id=\"191920\">@Mohammad Jafari</span> Today we covered consent creation, revocation, reinstatement, etc.  During the demo's tomorrow 1pm GMT we are covering enforcement of patitent-privacy, adr, treatment, research.  You'll see new CDS AuditEvents then.</p>",
        "id": 239295867,
        "sender_full_name": "Duane Decouteau",
        "timestamp": 1621359909
    }
]