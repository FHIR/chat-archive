[
    {
        "content": "<p>Three patients worth of QR codes and .smart-health-card files. One caveat, there isn't white space surrounding our QR code .png files directly, but will be in the UI.</p>",
        "id": 239323248,
        "sender_full_name": "Isaac Vetter",
        "timestamp": 1621370846
    },
    {
        "content": "<ul>\n<li>VaccineA</li>\n</ul>\n<p><a href=\"user_uploads/10155/CMzAepJZduZmX2exFJbi-117/EpicVaccineA.png\">EpicVaccineA.png</a></p>\n<div class=\"message_inline_image\"><a href=\"user_uploads/10155/CMzAepJZduZmX2exFJbi-117/EpicVaccineA.png\" title=\"EpicVaccineA.png\"><img src=\"user_uploads/10155/CMzAepJZduZmX2exFJbi-117/EpicVaccineA.png\"></a></div><p><a href=\"/user_uploads/10155/NyGE-A2K6JwwuFd7ZRuUqB6T/VaccineA-HealthWalletExport-4.smart-health-card\">VaccineA-HealthWalletExport-4.smart-health-card</a></p>",
        "id": 239323257,
        "sender_full_name": "Isaac Vetter",
        "timestamp": 1621370851
    },
    {
        "content": "<ul>\n<li>VaccineB<br>\n<a href=\"user_uploads/10155/iRkChdevJN28YO_QYc7hIZg7/EpicVaccineB.png\">EpicVaccineB.png</a><div class=\"message_inline_image\"><a href=\"user_uploads/10155/iRkChdevJN28YO_QYc7hIZg7/EpicVaccineB.png\" title=\"EpicVaccineB.png\"><img src=\"user_uploads/10155/iRkChdevJN28YO_QYc7hIZg7/EpicVaccineB.png\"></a></div></li>\n</ul>\n<p><a href=\"/user_uploads/10155/LviTuaDA8rmv-12eb3ViIAxf/VaccineB-HealthWalletExport-5.smart-health-card\">VaccineB-HealthWalletExport-5.smart-health-card</a></p>",
        "id": 239323326,
        "sender_full_name": "Isaac Vetter",
        "timestamp": 1621370873
    },
    {
        "content": "<ul>\n<li>VaccineC<br>\n<a href=\"user_uploads/10155/Xfjc0tL-tte43xBqmBJ0uaX6/EpicVaccineC.png\">EpicVaccineC.png</a><div class=\"message_inline_image\"><a href=\"user_uploads/10155/Xfjc0tL-tte43xBqmBJ0uaX6/EpicVaccineC.png\" title=\"EpicVaccineC.png\"><img src=\"user_uploads/10155/Xfjc0tL-tte43xBqmBJ0uaX6/EpicVaccineC.png\"></a></div></li>\n</ul>\n<p>(/user_uploads/10155/apa3fL5pdR_wef8HH0ePxUKo/VaccineC-two-Pfizer-immunizations.png)</p>",
        "id": 239323391,
        "sender_full_name": "Isaac Vetter",
        "timestamp": 1621370886
    },
    {
        "content": "<p>Would greatly appreciate any feedback!</p>",
        "id": 239323416,
        "sender_full_name": "Isaac Vetter",
        "timestamp": 1621370894
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191864\">Isaac Vetter</span> <a href=\"#narrow/stream/284830-smart.2Fhealth-cards/topic/Connectathon.2027.20Epic.20Issuer.20testing/near/239323248\">said</a>:</p>\n<blockquote>\n<p>Three patients worth of QR codes and .smart-health-card files. One caveat, there isn't white space surrounding our QR code .png files directly, but will be in the UI.</p>\n</blockquote>\n<p>I get the following error (on top of the non-public JWK set address) for all 3 QR images with the <a href=\"https://github.com/microsoft/health-cards-validation-SDK\">validation SDK</a>:</p>\n<div class=\"codehilite\"><pre><span></span><code>Error\n   │    · Wrong number of segments in QR code: found 3, expected 2\n</code></pre></div>\n<p>I can debug further to see the QR segment outputs if that helps.</p>\n<p>The .smart-health-card files look ok, other than not being able to validate the JWS signature, since <code> https://eccp-internal.epic.com/Interconnect-Current-Stage1-Primary/api/epic/2021/Security/Open/EcKeys/32001/SHC/.well-known/jwks.json</code> is non accessible.</p>",
        "id": 239324639,
        "sender_full_name": "Christian Paquin",
        "timestamp": 1621371366
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191864\">@Isaac Vetter</span> I'm seeing a Moderna vaccine for the QR code labelled as J&amp;J (Vaccine B) when I verify with <a href=\"http://connectathon.vci.org\">connectathon.vci.org</a></p>",
        "id": 239324828,
        "sender_full_name": "Michael O'Hanlon",
        "timestamp": 1621371474
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191864\">@Isaac Vetter</span> can you include your jwks file here too (or, ideally, host it)?</p>",
        "id": 239336368,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1621377293
    },
    {
        "content": "<p>Josh, Christian, All -- sorry about that. Our iss is a url that’s not publicly accessible. Here’s the content at: </p>\n<p>HTTP GET <a href=\"https://eccp-internal.epic.com/Interconnect-Current-Stage1-Primary/api/epic/2021/Security/Open/EcKeys/32001/SHC/.well-known/jwks.json\">https://eccp-internal.epic.com/Interconnect-Current-Stage1-Primary/api/epic/2021/Security/Open/EcKeys/32001/SHC/.well-known/jwks.json</a></p>\n<p>{<br>\n  \"keys\": [<br>\n    {<br>\n      \"x\": \"f07_C3KseqPoaCeVYFu7mHB3wsywR7maJESohODwoEk\",<br>\n      \"y\": \"HhPn-6e6ImMd9dBbaWhAgKeEM50s7rN7m_0NGybnoPk\",<br>\n      \"kid\": \"5_jfpOR6j90-5XA-miOg-3yrqKGVIW_U3vfuLqdpfyo\",<br>\n      \"use\": \"sig\",<br>\n      \"kty\": \"EC\",<br>\n      \"alg\": \"ES256\",<br>\n      \"crv\": \"P-256\"<br>\n    }<br>\n  ]<br>\n}</p>",
        "id": 239337210,
        "sender_full_name": "Isaac Vetter",
        "timestamp": 1621377921
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191864\">Isaac Vetter</span> <a href=\"#narrow/stream/284830-smart.2Fhealth-cards/topic/Connectathon.2027.20Epic.20Issuer.20testing/near/239337210\">said</a>:</p>\n<blockquote>\n<p>Josh, Christian, All -- sorry about that. Our iss is a url that’s not publicly accessible. Here’s the content at: </p>\n<p>HTTP GET <a href=\"https://eccp-internal.epic.com/Interconnect-Current-Stage1-Primary/api/epic/2021/Security/Open/EcKeys/32001/SHC/.well-known/jwks.json\">https://eccp-internal.epic.com/Interconnect-Current-Stage1-Primary/api/epic/2021/Security/Open/EcKeys/32001/SHC/.well-known/jwks.json</a></p>\n<p>{<br>\n  \"keys\": [<br>\n    {<br>\n      \"x\": \"f07_C3KseqPoaCeVYFu7mHB3wsywR7maJESohODwoEk\",<br>\n      \"y\": \"HhPn-6e6ImMd9dBbaWhAgKeEM50s7rN7m_0NGybnoPk\",<br>\n      \"kid\": \"5_jfpOR6j90-5XA-miOg-3yrqKGVIW_U3vfuLqdpfyo\",<br>\n      \"use\": \"sig\",<br>\n      \"kty\": \"EC\",<br>\n      \"alg\": \"ES256\",<br>\n      \"crv\": \"P-256\"<br>\n    }<br>\n  ]<br>\n}</p>\n</blockquote>\n<p>Hey <span class=\"user-mention\" data-user-id=\"191864\">@Isaac Vetter</span>  is it possible to host this on a publicly accessible url?</p>",
        "id": 239400509,
        "sender_full_name": "Vijayendra Prabhakar",
        "timestamp": 1621420575
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191864\">Isaac Vetter</span> <a href=\"#narrow/stream/284830-smart.2Fhealth-cards/topic/Connectathon.2027.20Epic.20Issuer.20testing/near/239337210\">said</a>:</p>\n<blockquote>\n<p>Josh, Christian, All -- sorry about that. Our iss is a url that’s not publicly accessible. Here’s the content at: <br>\n[...]</p>\n</blockquote>\n<p>QR and cards validate correctly when passing the JWKS directly to the validation SDK, like this:<br>\n<code>node . -p VaccineA-HealthWalletExport-4.smart-health-card -t healthcard -k epic.jwks</code> (where <code>epic.jwks</code> is the data key data you provided)</p>",
        "id": 239420465,
        "sender_full_name": "Christian Paquin",
        "timestamp": 1621429779
    },
    {
        "content": "<p>Looking at that URL: also keep in mind that <em>production</em> issuer URLs are best kept kept short and recognizable. I wonder if we should add suggestions or context about this to the spec</p>",
        "id": 239420839,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1621429913
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"385047\">@Christian Paquin</span> - I just reuploaded newly issued QR codes in my original post. I think they should pass the Validator SDK (except for the public key not being accessible).</p>",
        "id": 239433759,
        "sender_full_name": "Isaac Vetter",
        "timestamp": 1621434503
    },
    {
        "content": "<p>(deleted)</p>",
        "id": 239434786,
        "sender_full_name": "Christian Paquin",
        "timestamp": 1621434835
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191864\">@Isaac Vetter</span> I'm looking at VaccineC. The <code>Immunization</code> resources have a <code>vaccineCode</code> of <code>27753</code>. I don't see that code listed in this <a href=\"https://build.fhir.org/ig/dvci/vaccine-credential-ig/branches/main/ValueSet-vaccine-product-cvx.html\">valueset</a>. Am I looking in the wrong valueset?</p>",
        "id": 239435356,
        "sender_full_name": "Daniel Lee",
        "timestamp": 1621435016
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191864\">Isaac Vetter</span> <a href=\"#narrow/stream/284830-smart.2Fhealth-cards/topic/Connectathon.2027.20Epic.20Issuer.20testing/near/239433759\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"385047\">Christian Paquin</span> - I just reuploaded newly issued QR codes in my original post. I think they should pass the Validator SDK (except for the public key not being accessible).</p>\n</blockquote>\n<p>All three QR codes pass, when passing the provided key set:</p>\n<div class=\"codehilite\"><pre><span></span><code>node . -p /mnt/c/temp/EpicVaccineA.png -t qr  -k epic.jwks\nSMART Health Card Validation SDK v1.0.0-1\n\nValidate Key-Set\nQR image\n   │\n   └─ QR numeric\n         │\n         └─ JWS-compact\n               │\n               └─ JWS.payload\n                     │\n                     └─ FhirBundle\n\nValidation completed\n</code></pre></div>",
        "id": 239435385,
        "sender_full_name": "Christian Paquin",
        "timestamp": 1621435030
    },
    {
        "content": "<p>Doing some additional Connectathon testing in prep for Working Group meetings next week.  Was able to validate QR codes for <code>VaccineA Kurth</code>, <code>VaccineB Kurth</code>, and <code>VaccineC Kurth</code>.  Agreed with <span class=\"user-mention\" data-user-id=\"383196\">@Daniel Lee</span> comment above that VaccineC has a code of 27753, which seems to be outside the published CVX codesystem/valueset?</p>\n<p><a href=\"/user_uploads/10155/jwZI9cl-Wca0HHW2vf48xjta/IMG_8009.PNG\">IMG_8009.PNG</a> <a href=\"/user_uploads/10155/CDMDFs02JjPhSucNLQacW6Oz/IMG_8008.PNG\">IMG_8008.PNG</a> <a href=\"/user_uploads/10155/KQ7uVqMltYLIKjBWlUuaNq9b/IMG_8007.PNG\">IMG_8007.PNG</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/jwZI9cl-Wca0HHW2vf48xjta/IMG_8009.PNG\" title=\"IMG_8009.PNG\"><img src=\"/user_uploads/10155/jwZI9cl-Wca0HHW2vf48xjta/IMG_8009.PNG\"></a></div><div class=\"message_inline_image\"><a href=\"/user_uploads/10155/CDMDFs02JjPhSucNLQacW6Oz/IMG_8008.PNG\" title=\"IMG_8008.PNG\"><img src=\"/user_uploads/10155/CDMDFs02JjPhSucNLQacW6Oz/IMG_8008.PNG\"></a></div><div class=\"message_inline_image\"><a href=\"/user_uploads/10155/KQ7uVqMltYLIKjBWlUuaNq9b/IMG_8007.PNG\" title=\"IMG_8007.PNG\"><img src=\"/user_uploads/10155/KQ7uVqMltYLIKjBWlUuaNq9b/IMG_8007.PNG\"></a></div>",
        "id": 239780476,
        "sender_full_name": "Abbie Watson",
        "timestamp": 1621615609
    },
    {
        "content": "<p>thank you, Abbie! CVX 27753 is simply bad test data, my apologies.</p>",
        "id": 239784403,
        "sender_full_name": "Isaac Vetter",
        "timestamp": 1621617450
    },
    {
        "content": "<p>Freshly generated immunization QR code with an accessible jwks.json, if anyone's interested in testing their scanner (works against demo-portal) -- <a href=\"/user_uploads/10155/AkZoNYc6N45jn4TUhSMNLFUS/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/AkZoNYc6N45jn4TUhSMNLFUS/image.png\" title=\"image.png\"><img src=\"/user_uploads/10155/AkZoNYc6N45jn4TUhSMNLFUS/image.png\"></a></div>",
        "id": 240118935,
        "sender_full_name": "Isaac Vetter",
        "timestamp": 1621894064
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191864\">Isaac Vetter</span> <a href=\"#narrow/stream/284830-smart.2Fhealth-cards/topic/Connectathon.2027.20Epic.20Issuer.20testing/near/240118935\">said</a>:</p>\n<blockquote>\n<p>Freshly generated immunization QR code with an accessible jwks.json, if anyone's interested in testing their scanner (works against demo-portal) -- <a href=\"/user_uploads/10155/AkZoNYc6N45jn4TUhSMNLFUS/image.png\">image.png</a></p>\n</blockquote>\n<p>When running the validation SDK, I get the following error:</p>\n<div class=\"codehilite\"><pre><span></span><code>├─ Error\n   │    · Wrong number of segments in QR code: found 3, expected 2\n   │      Segments types encountered, in order: byte; alphanumeric; numeric\n</code></pre></div>\n<p>Any idea what is the alphanumeric middle segment? I can trace into the SDK to figure out its content...</p>",
        "id": 240121157,
        "sender_full_name": "Christian Paquin",
        "timestamp": 1621895458
    },
    {
        "content": "<p>(Interesting find! Might be good to include <em>which</em> content was encountered in each segment.)</p>",
        "id": 240121284,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1621895529
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191315\">Josh Mandel</span> <a href=\"#narrow/stream/284830-smart.2Fhealth-cards/topic/Connectathon.2027.20Epic.20Issuer.20testing/near/240121284\">said</a>:</p>\n<blockquote>\n<p>(Interesting find! Might be good to include <em>which</em> content was encountered in each segment.)</p>\n</blockquote>\n<p>(Natural question indeed! Needs a bit more digging into the QR lib, but we'll work on adding debug log of each segment type and content)</p>",
        "id": 240122765,
        "sender_full_name": "Christian Paquin",
        "timestamp": 1621896461
    },
    {
        "content": "<p>Ack! Sorry, Christian. We switched out QR code generation libraries halfway through, and the environment I'm using doesn't have the new one yet.</p>",
        "id": 240134535,
        "sender_full_name": "Isaac Vetter",
        "timestamp": 1621907779
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"385047\">Christian Paquin</span> <a href=\"#narrow/stream/284830-smart.2Fhealth-cards/topic/Connectathon.2027.20Epic.20Issuer.20testing/near/240122765\">said</a>:</p>\n<blockquote>\n<p>(...we'll work on adding debug log of each segment type and content)</p>\n</blockquote>\n<p>See <a href=\"https://github.com/microsoft/health-cards-validation-SDK/pull/104\">PR 104</a> on validation SDK.</p>",
        "id": 240198660,
        "sender_full_name": "Christian Paquin",
        "timestamp": 1621954039
    },
    {
        "content": "<p>Nice!</p>",
        "id": 240199399,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1621954362
    },
    {
        "content": "<p>Okay, retrying -- two files: two Immunization, one lab test. The lab test has a textual reference range. </p>\n<p><a href=\"/user_uploads/10155/fXYXHNQGUp3HfPOjP8i75tT3/Vetter-immunizations.png\">Vetter-immunizations.png</a> <a href=\"/user_uploads/10155/6SoHYDWdX9iocb1NwMaSmY5z/Vetter-lab.png\">Vetter-lab.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/fXYXHNQGUp3HfPOjP8i75tT3/Vetter-immunizations.png\" title=\"Vetter-immunizations.png\"><img src=\"/user_uploads/10155/fXYXHNQGUp3HfPOjP8i75tT3/Vetter-immunizations.png\"></a></div><div class=\"message_inline_image\"><a href=\"/user_uploads/10155/6SoHYDWdX9iocb1NwMaSmY5z/Vetter-lab.png\" title=\"Vetter-lab.png\"><img src=\"/user_uploads/10155/6SoHYDWdX9iocb1NwMaSmY5z/Vetter-lab.png\"></a></div>",
        "id": 240528049,
        "sender_full_name": "Isaac Vetter",
        "timestamp": 1622147991
    },
    {
        "content": "<p>Nice! On the immunization, is it intentional that there's no performer?</p>",
        "id": 240528826,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1622148336
    },
    {
        "content": "<p>On the lab test, the reference range doesn't seem to make sense to me --  \"negative\" isn't a range; did you intend to put this in <code>Observation.component.interpretation.text</code> rather than <code>Observation.referenceRange.text</code>?</p>",
        "id": 240529030,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1622148408
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191315\">Josh Mandel</span> <a href=\"#narrow/stream/284830-smart.2Fhealth-cards/topic/Connectathon.2027.20Epic.20Issuer.20testing/near/240529030\">said</a>:</p>\n<blockquote>\n<p>On the lab test, the reference range doesn't seem to make sense to me --  \"negative\" isn't a range; did you intend to put this in <code>Observation.component.interpretation.text</code> rather than <code>Observation.referenceRange.text</code>?</p>\n</blockquote>\n<p>Observation.referenceRange.text makes sense to me. Our system shows reference text for text based lab results to let you know what the expected normal value would be (Negative, Not Detected), along with a flag indicating normal/abnormal (ie interpretation). </p>\n<p>With the lab profiles, you should be able to compare valueString to referenceRange.text to get a sense of whether the result is 'normal'. It's not perfect, but probably the best you can do with issuers who are unable to provide valueCodeableConcept short of manually parsing the text. Interpretation is disallowed in the DM profiles - we could think about allowing it, but it's an extensible value set so still not perfect, and it would increase size.</p>",
        "id": 240633059,
        "sender_full_name": "Neelima Karipineni",
        "timestamp": 1622221581
    },
    {
        "content": "<p>Thanks for this explanation! (I do see <code>\"Negative\"</code> as an example at <a href=\"http://hl7.org/fhir/observation-definitions.html#Observation.referenceRange.text\">http://hl7.org/fhir/observation-definitions.html#Observation.referenceRange.text</a> -- so while I find this odd, I get it now.)</p>",
        "id": 240773723,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1622408381
    }
]