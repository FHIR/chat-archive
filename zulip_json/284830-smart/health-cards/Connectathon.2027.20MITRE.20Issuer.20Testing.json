[
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"365368\">@James Kizer</span>, <span class=\"user-mention\" data-user-id=\"306186\">@Vijayendra Prabhakar</span>, <span class=\"user-mention\" data-user-id=\"361949\">@Ron Jawanda</span>, <span class=\"user-mention\" data-user-id=\"385047\">@Christian Paquin</span>  or anyone else trying to read/verify health cards want to try testing some of the ones we've generated?</p>\n<p>Feel free to add your own patients too via the \"New Patient\" option on the homepage (<a href=\"https://connectathon.vci.org/\">https://connectathon.vci.org/</a>)</p>\n<p>e.g. <a href=\"https://connectathon.vci.org/patients/1\">https://connectathon.vci.org/patients/1</a> (here you can view the QR code or download as a file)</p>\n<p><a href=\"/user_uploads/10155/Bmh9R-TdU2FFzfUN4THQFytn/bradley_nikolaus_qr.png\">bradley_nikolaus_qr.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/Bmh9R-TdU2FFzfUN4THQFytn/bradley_nikolaus_qr.png\" title=\"bradley_nikolaus_qr.png\"><img src=\"/user_uploads/10155/Bmh9R-TdU2FFzfUN4THQFytn/bradley_nikolaus_qr.png\"></a></div>",
        "id": 239253954,
        "sender_full_name": "Reece Adamson",
        "timestamp": 1621344736
    },
    {
        "content": "<p><del>Attaching the file download option too for convenience: <a href=\"/user_uploads/10155/Cr0_4zFXeeoDmC2ocaz3w3cV/bradley_nikolaus.smart-health-card\">bradley_nikolaus.smart-health-card</a></del></p>\n<p>Zulip is making this a <code>.txt</code> so I'd recommend getting it straight from the site or you'll need to fix the extension</p>",
        "id": 239254527,
        "sender_full_name": "Reece Adamson",
        "timestamp": 1621344951
    },
    {
        "content": "<p>Hi <span class=\"user-mention\" data-user-id=\"197651\">@Reece Adamson</span>  I want to , i went and watched fridays video. I'm still quite lost. I'm a client person that wants to figure out how to read these but i don't know where the endpoints are (if they are actual endpoints) . Don't know how to start but I would like to. I guess my first question is where is the server what is the endpoint.</p>",
        "id": 239254846,
        "sender_full_name": "Ron Jawanda",
        "timestamp": 1621345075
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"197651\">Reece Adamson</span> <a href=\"#narrow/stream/284830-smart.2Fhealth-cards/topic/Connectathon.2027.20MITRE.20Issuer.20Testing/near/239253954\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"385047\">Christian Paquin</span>  or anyone else trying to read/verify health cards want to try testing some of the ones we've generated?</p>\n</blockquote>\n<p>Verifying a QR code generated with demo data gives me this:</p>\n<div class=\"codehilite\"><pre><span></span><code> JWS.payload\n                     │\n                     ├─ Warning\n                     │    · JWS.payload.vc.type should contain &#39;https://smarthealth.cards#health-card&#39;\n                     │\n                     ├─ Error\n                     │    · Schema: {&quot;instancePath&quot;:&quot;/vc/credentialSubject/fhirVersion&quot;,&quot;schemaPath&quot;:&quot;#/properties/vc/properties/credentialSubject/properties/fhirVersion/type&quot;,&quot;keyword&quot;:&quot;type&quot;,&quot;params&quot;:{&quot;type&quot;:&quot;string&quot;},&quot;message&quot;:&quot;must be string&quot;}\n</code></pre></div>\n<p>The fhir version is currently <code>null</code>.</p>",
        "id": 239255080,
        "sender_full_name": "Christian Paquin",
        "timestamp": 1621345168
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"361949\">@Ron Jawanda</span> do you want to rejoin the Zoom meeting? We're still on the call, might be easier to answer your questions live.</p>",
        "id": 239255206,
        "sender_full_name": "Neelima Karipineni",
        "timestamp": 1621345207
    },
    {
        "content": "<p>Yeah, I'm seeing the same <code>null</code> value for <code>fhriVersion</code></p>",
        "id": 239259661,
        "sender_full_name": "James Kizer",
        "timestamp": 1621346917
    },
    {
        "content": "<p>Well that's no good - looking into it now.</p>",
        "id": 239259799,
        "sender_full_name": "Reece Adamson",
        "timestamp": 1621346979
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"365368\">@James Kizer</span> <span class=\"user-mention\" data-user-id=\"385047\">@Christian Paquin</span> fix for the <code>fhirVersion</code> is deployed.</p>",
        "id": 239272567,
        "sender_full_name": "Daniel Lee",
        "timestamp": 1621351362
    },
    {
        "content": "<p>Seems to be validating now with the Microsoft SDK</p>",
        "id": 239273718,
        "sender_full_name": "Michael O'Hanlon",
        "timestamp": 1621351777
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"383196\">Daniel Lee</span> <a href=\"#narrow/stream/284830-smart.2Fhealth-cards/topic/Connectathon.2027.20MITRE.20Issuer.20Testing/near/239272567\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"365368\">James Kizer</span> <span class=\"user-mention silent\" data-user-id=\"385047\">Christian Paquin</span> fix for the <code>fhirVersion</code> is deployed.</p>\n</blockquote>\n<p>Works in the validation SDK. The VC type contains <code>https://healthwallet.cards#health-card</code> instead of <code>https://smarthealth.cards#health-card</code>. We throw a warning for this, if the <a href=\"https://smarthealth.cards/vocabulary/\">specified VC type</a> isn't present, but I'm not sure if this should be an error. The spec only shows it has an example, but has no explicit requirement for it. <span class=\"user-mention\" data-user-id=\"191315\">@Josh Mandel</span>, guidance?</p>\n<p>See <a href=\"https://github.com/smart-on-fhir/health-cards/pull/144\">PR 144</a> for a suggested spec edit.</p>",
        "id": 239273974,
        "sender_full_name": "Christian Paquin",
        "timestamp": 1621351861
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"385047\">@Christian Paquin</span>  We're making a quick update for this now.</p>",
        "id": 239274165,
        "sender_full_name": "Michael O'Hanlon",
        "timestamp": 1621351931
    },
    {
        "content": "<p>Also, should the VC type include <code>https://smarthealth.cards#immunization</code> as well?</p>",
        "id": 239274277,
        "sender_full_name": "James Kizer",
        "timestamp": 1621351983
    },
    {
        "content": "<p>I feel like the spec isn't clear about exactly which types should be included. Just the most specific or a list including all the more general types as well?</p>",
        "id": 239275373,
        "sender_full_name": "Stephen MacVicar",
        "timestamp": 1621352382
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"197651\">Reece Adamson</span> <a href=\"#narrow/stream/284830-smart.2Fhealth-cards/topic/Connectathon.2027.20MITRE.20Issuer.20Testing/near/239253954\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"365368\">James Kizer</span>, <span class=\"user-mention silent\" data-user-id=\"306186\">Vijayendra Prabhakar</span>, <span class=\"user-mention silent\" data-user-id=\"361949\">Ron Jawanda</span>, <span class=\"user-mention silent\" data-user-id=\"385047\">Christian Paquin</span>  or anyone else trying to read/verify health cards want to try testing some of the ones we've generated?</p>\n<p>Feel free to add your own patients too via the \"New Patient\" option on the homepage (<a href=\"https://connectathon.vci.org/\">https://connectathon.vci.org/</a>)</p>\n<p>e.g. <a href=\"https://connectathon.vci.org/patients/1\">https://connectathon.vci.org/patients/1</a> (here you can view the QR code or download as a file)</p>\n<p><a href=\"/user_uploads/10155/Bmh9R-TdU2FFzfUN4THQFytn/bradley_nikolaus_qr.png\">bradley_nikolaus_qr.png</a></p>\n</blockquote>\n<p>Hey <span class=\"user-mention\" data-user-id=\"197651\">@Reece Adamson</span>  we tried importing one of the health cards and we were able to verify it.</p>",
        "id": 239275579,
        "sender_full_name": "Vijayendra Prabhakar",
        "timestamp": 1621352454
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"197651\">@Reece Adamson</span> I see that the implementation returns a SHC for a patient with no immunization data. Is this valid?<br>\nThe VCI spec requires that an immunization SHC bundle have 1..* immunizations.</p>\n<p>For our FHIR implementation if we have a patient with no qualifying immunization details, we would return a 200 OK with an empty Parameters resource like (i.e. no <code>verifiableCredential</code> parameters)</p>\n<div class=\"codehilite\"><pre><span></span><code>{\n  &quot;resourceType&quot;: &quot;Parameters&quot;\n}\n</code></pre></div>",
        "id": 239276765,
        "sender_full_name": "Zameer Sura",
        "timestamp": 1621352897
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"225612\">@Stephen MacVicar</span> my expectation (which could be wrong) is that it should list all the types such that performing a set intersection leads to the most granular type possible. In CommonHealth, we determine how we render a card based on the list containing <code>[https://smarthealth.cards#covid19, https://smarthealth.cards#immunization]</code> or <code>[https://smarthealth.cards#covid19, https://smarthealth.cards#laboratory]</code></p>",
        "id": 239276828,
        "sender_full_name": "James Kizer",
        "timestamp": 1621352928
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"199274\">@Zameer Sura</span> which sample patient returns the empty resource? I'd like to try this out in CommonHealth to see if we're handing it properly</p>",
        "id": 239277248,
        "sender_full_name": "James Kizer",
        "timestamp": 1621353083
    },
    {
        "content": "<p>I think that is a fair expectation, but I would find it helpful (particularly from a testing perspective) to have more clarity in the spec about it.</p>",
        "id": 239277397,
        "sender_full_name": "Stephen MacVicar",
        "timestamp": 1621353124
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"199274\">@Zameer Sura</span> it will do that for Patients that have no recorded immunizations. Right now the application isn't really restrictive and just returns a Health Card for whatever FHIR data it has.</p>",
        "id": 239277420,
        "sender_full_name": "Reece Adamson",
        "timestamp": 1621353131
    },
    {
        "content": "<p>A Health Card conforming to the <a href=\"https://vci.org/ig/vaccination-and-testing\">SMART Health Cards: Vaccination &amp; Testing FHIR IG</a> shouldn't just have just a patient and should include https://smarthealth.cards#immunization and/or https://smarthealth.cards#laboratory, and optionally https://smarthealth.cards#covid19 depending on the type of card</p>",
        "id": 239277652,
        "sender_full_name": "Reece Adamson",
        "timestamp": 1621353210
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"365368\">@James Kizer</span> the patient documented in <a href=\"https://github.com/joeratt/connectathon_notes/blob/may_2021-HL7-health_cards/health_cards/Cerner%20SMART%20Health%20Cards%20-%20Integration%20Notes.md#smart-fredrick\">https://github.com/joeratt/connectathon_notes/blob/may_2021-HL7-health_cards/health_cards/Cerner%20SMART%20Health%20Cards%20-%20Integration%20Notes.md#smart-fredrick</a> should return an empty resource</p>",
        "id": 239277656,
        "sender_full_name": "Zameer Sura",
        "timestamp": 1621353211
    },
    {
        "content": "<p>Thanks <span class=\"user-mention\" data-user-id=\"199274\">@Zameer Sura</span> !</p>",
        "id": 239277994,
        "sender_full_name": "James Kizer",
        "timestamp": 1621353342
    },
    {
        "content": "<p>Re: types, thanks for the discussion and PR on this! Agreed, clarification of expectations is a big help here.</p>",
        "id": 239285181,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1621355775
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"197651\">Reece Adamson</span> <a href=\"#narrow/stream/284830-smart.2Fhealth-cards/topic/Connectathon.2027.20MITRE.20Issuer.20Testing/near/239253954\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"365368\">James Kizer</span>, <span class=\"user-mention silent\" data-user-id=\"306186\">Vijayendra Prabhakar</span>, <span class=\"user-mention silent\" data-user-id=\"361949\">Ron Jawanda</span>, <span class=\"user-mention silent\" data-user-id=\"385047\">Christian Paquin</span>  or anyone else trying to read/verify health cards want to try testing some of the ones we've generated?</p>\n</blockquote>\n<p>Okay, trying the QR code above with our barcode scanner.  Immunization record arrives with blank fields.  But otherwise, looks like card encoding/decoding and and JWT cryptography is all working.  This outcome continues the disagreement with the <code>Bundle+Patient+DEFLATE+shortRef</code> architecture, without support for plain FHIR resources.</p>\n<p><a href=\"/user_uploads/10155/ZUTHvtQk2AMkEXJDdsy1BYVG/IMG_7987.PNG\">IMG_7987.PNG</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/ZUTHvtQk2AMkEXJDdsy1BYVG/IMG_7987.PNG\" title=\"IMG_7987.PNG\"><img src=\"/user_uploads/10155/ZUTHvtQk2AMkEXJDdsy1BYVG/IMG_7987.PNG\"></a></div>",
        "id": 239301581,
        "sender_full_name": "Abbie Watson",
        "timestamp": 1621362116
    },
    {
        "content": "<p>Hey <span class=\"user-mention\" data-user-id=\"191678\">@Abbie Watson</span>. It looks like you were able to get the DEFLATE working properly based on the properly extracted CVX code. Do you see any issues with the decoded payload? It looks like it came through across correctly in the siemens verifier and were able to extract the name and birth date.</p>\n<p>e.g. If you inspec the patient \"Bradley, Nikolaus\" in the <a href=\"https://smart-health-vault-siemens-healthineers.azurewebsites.net/holder\">siemens verifier</a></p>",
        "id": 239303371,
        "sender_full_name": "Reece Adamson",
        "timestamp": 1621362765
    },
    {
        "content": "<p>Agreed, that DEFLATE is working properly and the QR code is working according to spec.  I'm voicing disagreement with the spec assumptions, and pointing out how in practice it's going to wind up delivering results that appears to be missing data.  The 20% storage gains that DEFLATE provides comes at the cost of (de)compression errors, readability, usability, non-standard patterns, breaking existing libraries/functions, etc.</p>",
        "id": 239307498,
        "sender_full_name": "Abbie Watson",
        "timestamp": 1621364332
    },
    {
        "content": "<p>FWIW keep in mind that DEFLATE gives us 60-90(++)% reduction of payload size (not 20%). For a rough example:</p>\n<div class=\"codehilite\"><pre><span></span><code>$ EX=&#39;{&quot;iss&quot;:&quot;https://smarthealth.cards/examples/issuer&quot;,&quot;nbf&quot;:1620847989.837,&quot;vc&quot;:{&quot;type&quot;:[&quot;https://smarthealth.cards#health-card&quot;,&quot;https://smarthealth.cards#immunization&quot;,&quot;https://smarthealth.cards#covid19&quot;],&quot;credentialSubject&quot;:{&quot;fhirVersion&quot;:&quot;4.0.1&quot;,&quot;fhirBundle&quot;:{&quot;resourceType&quot;:&quot;Bundle&quot;,&quot;type&quot;:&quot;collection&quot;,&quot;entry&quot;:[{&quot;fullUrl&quot;:&quot;resource:0&quot;,&quot;resource&quot;:{&quot;resourceType&quot;:&quot;Patient&quot;,&quot;name&quot;:[{&quot;family&quot;:&quot;Anyperson&quot;,&quot;given&quot;:[&quot;John&quot;,&quot;B.&quot;]}],&quot;birthDate&quot;:&quot;1951-01-20&quot;}},{&quot;fullUrl&quot;:&quot;resource:1&quot;,&quot;resource&quot;:{&quot;resourceType&quot;:&quot;Immunization&quot;,&quot;status&quot;:&quot;completed&quot;,&quot;vaccineCode&quot;:{&quot;coding&quot;:[{&quot;system&quot;:&quot;http://hl7.org/fhir/sid/cvx&quot;,&quot;code&quot;:&quot;207&quot;}]},&quot;patient&quot;:{&quot;reference&quot;:&quot;resource:0&quot;},&quot;occurrenceDateTime&quot;:&quot;2021-01-01&quot;,&quot;performer&quot;:[{&quot;actor&quot;:{&quot;display&quot;:&quot;ABC General Hospital&quot;}}],&quot;lotNumber&quot;:&quot;0000001&quot;}},{&quot;fullUrl&quot;:&quot;resource:2&quot;,&quot;resource&quot;:{&quot;resourceType&quot;:&quot;Immunization&quot;,&quot;status&quot;:&quot;completed&quot;,&quot;vaccineCode&quot;:{&quot;coding&quot;:[{&quot;system&quot;:&quot;http://hl7.org/fhir/sid/cvx&quot;,&quot;code&quot;:&quot;207&quot;}]},&quot;patient&quot;:{&quot;reference&quot;:&quot;resource:0&quot;},&quot;occurrenceDateTime&quot;:&quot;2021-01-29&quot;,&quot;performer&quot;:[{&quot;actor&quot;:{&quot;display&quot;:&quot;ABC General Hospital&quot;}}],&quot;lotNumber&quot;:&quot;0000007&quot;}}]}}}}&#39;\n$ echo $EX | wc -c\n1105\n$ echo $EX | gzip | wc -c\n449\n</code></pre></div>",
        "id": 239312612,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1621366410
    },
    {
        "content": "<p>The tests at <a href=\"https://inferno-dev.healthit.gov\">https://inferno-dev.healthit.gov</a> have been updated so that they now perform FHIR validation</p>",
        "id": 239453513,
        "sender_full_name": "Stephen MacVicar",
        "timestamp": 1621440918
    },
    {
        "content": "<p>against the <a href=\"https://build.fhir.org/ig/dvci/vaccine-credential-ig/branches/main/StructureDefinition-vaccination-credential-bundle.html\">SMART Health Cards: Vaccination &amp; Testing Vaccination Credential Bundle profile</a></p>",
        "id": 239454154,
        "sender_full_name": "Reece Adamson",
        "timestamp": 1621441203
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"197651\">@Reece Adamson</span> I'm testing out the file import flow for this patient <a href=\"https://connectathon.vci.org/patients/1\">https://connectathon.vci.org/patients/1</a> and I'm running into issues with the file. It looks like the <code>kid</code> for the file is <code>4VFcTjMP4sXNIjv1WwxWEFi7bdA9OpLOHhBiDdXJzM4</code>, which doesn't appear to match a key in the JWKSet doc. The QR code <code>kid</code> is <code>uZ84161RsBjULyL2sD59OycDFHKGIJZDOhjGBZCxqnY</code>, which does match</p>",
        "id": 239461954,
        "sender_full_name": "James Kizer",
        "timestamp": 1621444213
    },
    {
        "content": "<p>When did you download the file? I just downloaded it and see the kid in the JWS header matching as <code>uZ84161RsBjULyL2sD59OycDFHKGIJZDOhjGBZCxqnY</code></p>",
        "id": 239462707,
        "sender_full_name": "Reece Adamson",
        "timestamp": 1621444513
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"225612\">@Stephen MacVicar</span> for the deployed instance is the signing key regenerated every time we re-deploy?</p>",
        "id": 239462948,
        "sender_full_name": "Reece Adamson",
        "timestamp": 1621444619
    },
    {
        "content": "<p>Yeah, looks good now. Must have been a stale file</p>",
        "id": 239463796,
        "sender_full_name": "James Kizer",
        "timestamp": 1621444952
    },
    {
        "content": "<p>Thanks to Reese and Dan for the help in polishing off the Cert.Health implementation.  We are now passing all tests for issuance.</p>",
        "id": 239472471,
        "sender_full_name": "Richard Braman (FLY.HEALTH)",
        "timestamp": 1621448349
    },
    {
        "content": "<p>Okay, updated the reader app to read in the Bundle.Patient demographics.  <br>\n<a href=\"/user_uploads/10155/RlgDfckLaRRC2K8crIe_Dhb_/IMG_8010.PNG\">IMG_8010.PNG</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/RlgDfckLaRRC2K8crIe_Dhb_/IMG_8010.PNG\" title=\"IMG_8010.PNG\"><img src=\"/user_uploads/10155/RlgDfckLaRRC2K8crIe_Dhb_/IMG_8010.PNG\"></a></div>",
        "id": 239780733,
        "sender_full_name": "Abbie Watson",
        "timestamp": 1621615729
    }
]