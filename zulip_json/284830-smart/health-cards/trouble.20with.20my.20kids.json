[
    {
        "content": "<p>Hi Guys,<br>\nI was using this very useful validator site: <a href=\"https://demo-portals.smarthealth.cards/VerifierPortal.html\">VerifierPortal</a> and ran into an error which I'm not clear on. I provided my Smart Health Card token as raw QR numeric and it neatly parsed out my token correctly. It shows my token header as follows:</p>\n<div class=\"codehilite\" data-code-language=\"JSON\"><pre><span></span><code><span class=\"p\">{</span>\n  <span class=\"nt\">\"alg\"</span><span class=\"p\">:</span> <span class=\"s2\">\"ES256\"</span><span class=\"p\">,</span>\n  <span class=\"nt\">\"zip\"</span><span class=\"p\">:</span> <span class=\"s2\">\"DEF\"</span><span class=\"p\">,</span>\n  <span class=\"nt\">\"kid\"</span><span class=\"p\">:</span> <span class=\"s2\">\"tuqnKddcsvXI94xWCK8NJRsZ5YQQY_QwTjMzMfNjMIc\"</span>\n<span class=\"p\">}</span>\n</code></pre></div>\n<p>As I don't yet have a public endpoint to serve my JWKS on, I instead pasted it in manually. <br>\nHere it is:</p>\n<div class=\"codehilite\" data-code-language=\"JSON\"><pre><span></span><code><span class=\"p\">{</span>\n  <span class=\"nt\">\"keys\"</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n    <span class=\"p\">{</span>\n      <span class=\"nt\">\"kty\"</span><span class=\"p\">:</span> <span class=\"s2\">\"EC\"</span><span class=\"p\">,</span>\n      <span class=\"nt\">\"kid\"</span><span class=\"p\">:</span> <span class=\"s2\">\"tuqnKddcsvXI94xWCK8NJRsZ5YQQY_QwTjMzMfNjMIc\"</span><span class=\"p\">,</span>\n      <span class=\"nt\">\"use\"</span><span class=\"p\">:</span> <span class=\"s2\">\"sig\"</span><span class=\"p\">,</span>\n      <span class=\"nt\">\"alg\"</span><span class=\"p\">:</span> <span class=\"s2\">\"ES256\"</span><span class=\"p\">,</span>\n      <span class=\"nt\">\"cry\"</span><span class=\"p\">:</span> <span class=\"s2\">\"P-256\"</span><span class=\"p\">,</span>\n      <span class=\"nt\">\"x\"</span><span class=\"p\">:</span> <span class=\"s2\">\"j2oyU1JyNT1x66i-PFsdsU1qL-y_Nxq7RjwKkd5kNyc\"</span><span class=\"p\">,</span>\n      <span class=\"nt\">\"y\"</span><span class=\"p\">:</span> <span class=\"s2\">\"OPR0AnWPAmhFC6y1RAXFvsAGS0ptfUwuoTKkWXpP4bE\"</span>\n    <span class=\"p\">}</span>\n  <span class=\"p\">]</span>\n<span class=\"p\">}</span>\n</code></pre></div>\n<p>It then parses the JWKS and shows this error message:</p>\n<div class=\"codehilite\"><pre><span></span><code>{&quot;message&quot;:&quot;key[tuqnKddcsvXI94xWCK8NJRsZ5YQQY_QwTjMzMfNjMIc]: &#39;kid&#39; does not match thumbprint in issuer key. expected: 3BQKJkOvOmXWApViNdYTTpkN8ZVnDI23c10KXgBsjow, actual: tuqnKddcsvXI94xWCK8NJRsZ5YQQY_QwTjMzMfNjMIc&quot;,&quot;code&quot;:203,&quot;level&quot;:3}\n</code></pre></div>\n<p>I'm a little confused as the 'kid' in the token header and in the JWKS match, yet it seems there is some other conversion occurring that I'm not aware of. Is anyone able to point me in the right direction?</p>\n<p>########################################################<br>\nUpdate: I believe I found my answer here <a href=\"https://datatracker.ietf.org/doc/html/rfc7638#section-3.1\">https://datatracker.ietf.org/doc/html/rfc7638#section-3.1</a><br>\nAnd I found my typo I my JWKS json file , 'cry' should be 'crv'.</p>",
        "id": 240141123,
        "sender_full_name": "Angus Millar",
        "timestamp": 1621916700
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191391\">Angus Millar</span> <a href=\"#narrow/stream/284830-smart.2Fhealth-cards/topic/trouble.20with.20my.20kids/near/240141123\">said</a>:</p>\n<blockquote>\n<p>Update: I believe I found my answer here <a href=\"https://datatracker.ietf.org/doc/html/rfc7638#section-3.1\">https://datatracker.ietf.org/doc/html/rfc7638#section-3.1</a><br>\nAnd I found my typo I my JWKS json file , 'cry' should be 'crv'.</p>\n</blockquote>\n<p>Does that resolve the issue? If not, I can run your sample in the underlying <a href=\"https://github.com/microsoft/health-cards-validation-SDK\">validator tool</a>, to get more details.</p>",
        "id": 240171557,
        "sender_full_name": "Christian Paquin",
        "timestamp": 1621941115
    },
    {
        "content": "<p>Thanks for the offer <span class=\"user-mention\" data-user-id=\"385047\">@Christian Paquin</span> , however it did resolve it, all good.</p>",
        "id": 240202709,
        "sender_full_name": "Angus Millar",
        "timestamp": 1621955620
    }
]