[
    {
        "content": "<p>Has anyone tried to implement the JWS part of the spec using openSSL? I'm using the EVP_DigestVerifyInit | EVP_DigestUpdate | EVP_DigestVerifyFinal methods, and openSSL generates ok, and verifies it's own signatures, but the signatures are different to other ones, and it doesn't verify other signatures. </p>\n<p>My take is that openSSL EVP_DigestVerifyFinal doesn't conform to this rule</p>\n<blockquote>\n<p>\"The JWS Signature is the value R || S.\" </p>\n</blockquote>\n<p>from <a href=\"https://datatracker.ietf.org/doc/html/rfc7515#appendix-A.3.1\">https://datatracker.ietf.org/doc/html/rfc7515#appendix-A.3.1</a> but all the openSSL implementations I can find and understand use EVP_DigestVerifyFinal and the openSSL mailing list said I was doing something wrong - well, I can't figure out what it could be. the OpenSSL signatures include a nonce and are not reproducible, so I don't see how they can conform to the rule I quoted. And I haven't found a non-openSSL based implementation I can use in an open source win64 application.</p>\n<p>Can anyone comment?</p>",
        "id": 252943450,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1631403688
    },
    {
        "content": "<p>I'm assuming you're familiar with the aspects of representation discussed in <a href=\"https://stackoverflow.com/questions/59904522/asn1-encoding-routines-errors-when-verifying-ecdsa-signature-type-with-openssl\">https://stackoverflow.com/questions/59904522/asn1-encoding-routines-errors-when-verifying-ecdsa-signature-type-with-openssl</a> ?</p>",
        "id": 252944979,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1631405529
    },
    {
        "content": "<p>well, I wasn't. I found that by accident searching for the openSSL error message a couple of minutes before you posted it. How did you find it so easy?</p>",
        "id": 252945226,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1631405829
    },
    {
        "content": "<ul>\n<li><a href=\"https://duckduckgo.com/?q=es256+signature+with+openssl\">https://duckduckgo.com/?q=es256+signature+with+openssl</a></li>\n<li><a href=\"https://gist.github.com/timmc/d2814d7da19521dda1883dd3cc046217\">https://gist.github.com/timmc/d2814d7da19521dda1883dd3cc046217</a></li>\n<li>SO post</li>\n</ul>",
        "id": 252945351,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1631405977
    },
    {
        "content": "<p>(I feel like getting search terms right requires a good dose of luck.)</p>",
        "id": 252945395,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1631406003
    },
    {
        "content": "<p>thx. seems obvious but I didn't find it :-(</p>",
        "id": 252945400,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1631406004
    },
    {
        "content": "<p>I'm not clear on the nonce related issues you described, but getting the binary representation of the signature right seems like a good start.</p>",
        "id": 252945418,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1631406032
    },
    {
        "content": "<p>yes that does sort things out.</p>",
        "id": 252945638,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1631406329
    }
]