[
    {
        "content": "<p>Does anyone have (or can create) an example JWS that requires multiple QR codes - ie exceeding the 1195 maximum size ? (Writing code to generate QR codes and I would like to test that case)</p>",
        "id": 239422498,
        "sender_full_name": "Michele Mottini",
        "timestamp": 1621430477
    },
    {
        "content": "<p>I assume you've seen <a href=\"https://smarthealth.cards/examples/#example-2\">https://smarthealth.cards/examples/#example-2</a></p>",
        "id": 239423793,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1621430945
    },
    {
        "content": "<p>(it's not semantically interesting but should give you something to test with.)</p>",
        "id": 239423881,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1621430986
    },
    {
        "content": "<p>doh...sorry, it was right there under my nose. Thanks Josh</p>",
        "id": 239424099,
        "sender_full_name": "Michele Mottini",
        "timestamp": 1621431062
    },
    {
        "content": "<p>Sure thing. <a href=\"https://github.com/smart-on-fhir/health-cards/blob/main/generate-examples/src/index.ts\">https://github.com/smart-on-fhir/health-cards/blob/main/generate-examples/src/index.ts</a> has the generation code behind the examples, FWIW.</p>",
        "id": 239424298,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1621431135
    },
    {
        "content": "<p><a href=\"https://connectathon.vci.org\">https://connectathon.vci.org</a> is capable of producing Health Cards that require multiple QR codes, but it would take a <em>lot</em> of immunizations. I just created 30 immunizations for the patient in the QR below and the JWS is only 959 characters. The example Josh shared has 55 resources of more diverse types that may make it less compressible than the ones <a href=\"https://connectathon.vci.org\">https://connectathon.vci.org</a> can produce with Immunizations alone.</p>\n<p><a href=\"/user_uploads/10155/a2X2wQ4vi1d3XUv9fqhFYJo0/murazik_qr.png\">murazik_qr.png</a> </p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/a2X2wQ4vi1d3XUv9fqhFYJo0/murazik_qr.png\" title=\"murazik_qr.png\"><img src=\"/user_uploads/10155/a2X2wQ4vi1d3XUv9fqhFYJo0/murazik_qr.png\"></a></div><div class=\"spoiler-block\"><div class=\"spoiler-header\">\n<p>validation-skd results for QR code</p>\n</div><div class=\"spoiler-content\" aria-hidden=\"true\">\n<div class=\"codehilite\" data-code-language=\"Bash\"><pre><span></span><code>node . --path ~/Desktop/murazik_qr.png --type qr\nSMART Health Card Validation SDK v1.0.0-1\nQR image\n   │\n   └─ QR numeric\n         │\n         └─ JWS-compact\n               │\n               └─ JWS.payload\n                     │\n                     └─ FhirBundle\nValidation completed\n</code></pre></div>\n</div></div>",
        "id": 239427475,
        "sender_full_name": "Reece Adamson",
        "timestamp": 1621432317
    },
    {
        "content": "<p>If you inject some entropy by having different immunizations come from different provider orgs with long and distinct names, that probably helps too :-) DEFLATE does a phenomenal job over highly repetitive data.</p>",
        "id": 239427756,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1621432409
    },
    {
        "content": "<p>Supercalifragilisticexpialidocious idea!</p>",
        "id": 239429777,
        "sender_full_name": "Reece Adamson",
        "timestamp": 1621433120
    },
    {
        "content": "<p><a href=\"https://connectathon.vci.org\">https://connectathon.vci.org</a> supports scanning multiple QR codes too if you want to test the spec examples (warning: scanner can be a little finicky).</p>\n<p>e.g. here is me scanning them \"out of order\"</p>\n<p><a href=\"/user_uploads/10155/MrftNscQ_OP2q3mx7Zv4hJo5/mqr_scan.gif\">mqr_scan.gif</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/MrftNscQ_OP2q3mx7Zv4hJo5/mqr_scan.gif\" title=\"mqr_scan.gif\"><img src=\"/user_uploads/10155/MrftNscQ_OP2q3mx7Zv4hJo5/mqr_scan.gif\"></a></div>",
        "id": 239429991,
        "sender_full_name": "Reece Adamson",
        "timestamp": 1621433189
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191912\">Michele Mottini</span> <a href=\"#narrow/stream/284830-smart.2Fhealth-cards/topic/Multiple.20QR.20codes.20example/near/239422498\">said</a>:</p>\n<blockquote>\n<p>Does anyone have (or can create) an example JWS that requires multiple QR codes - ie exceeding the 1195 maximum size ? (Writing code to generate QR codes and I would like to test that case)</p>\n</blockquote>\n<p>Hey <span class=\"user-mention\" data-user-id=\"191912\">@Michele Mottini</span>  the Siemens Holder and verifier app does also supports chunking of qr codes and verifying it. You could download the health card with name \"Walton, Sauer\"</p>",
        "id": 239435503,
        "sender_full_name": "Vijayendra Prabhakar",
        "timestamp": 1621435080
    },
    {
        "content": "<p>Thanks Vijayendra</p>",
        "id": 239435697,
        "sender_full_name": "Michele Mottini",
        "timestamp": 1621435144
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"306186\">@Vijayendra Prabhakar</span> showing the QR code for \"Walton, Sauer\" on <a href=\"https://smart-health-vault-siemens-healthineers.azurewebsites.net/holder\">https://smart-health-vault-siemens-healthineers.azurewebsites.net/holder</a> I only see a single QR code. Am I looking at the wrong patient or is that patient being updated?</p>",
        "id": 239436553,
        "sender_full_name": "Reece Adamson",
        "timestamp": 1621435441
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"197651\">Reece Adamson</span> <a href=\"#narrow/stream/284830-smart.2Fhealth-cards/topic/Multiple.20QR.20codes.20example/near/239436553\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"306186\">Vijayendra Prabhakar</span> showing the QR code for \"Walton, Sauer\" on <a href=\"https://smart-health-vault-siemens-healthineers.azurewebsites.net/holder\">https://smart-health-vault-siemens-healthineers.azurewebsites.net/holder</a> I only see a single QR code. Am I looking at the wrong patient or is that patient being updated?</p>\n</blockquote>\n<p><span class=\"user-mention\" data-user-id=\"197651\">@Reece Adamson</span>  Apologies it is  Adella39, Von197</p>",
        "id": 239437166,
        "sender_full_name": "Vijayendra Prabhakar",
        "timestamp": 1621435639
    },
    {
        "content": "<p>I cannot make the QR code scanner at <a href=\"http://vci.org\">vci.org</a> work - trying to run it on my phone scanning QR codes on my computer screen</p>",
        "id": 239437945,
        "sender_full_name": "Michele Mottini",
        "timestamp": 1621435883
    },
    {
        "content": "<p>i was unable to get my phone to recognize a qr code on my monitor, but it would recognize a hard-copy qr code i have</p>",
        "id": 239438714,
        "sender_full_name": "Stephen MacVicar",
        "timestamp": 1621436146
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"306186\">@Vijayendra Prabhakar</span> what QR code scanning library are you using with your implementation? We're using <a href=\"https://www.npmjs.com/package/qr-scanner\">qr-scanner</a>, but it seems pretty sensitive to glare and positioning.</p>",
        "id": 239438969,
        "sender_full_name": "Reece Adamson",
        "timestamp": 1621436224
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"197651\">Reece Adamson</span> <a href=\"#narrow/stream/284830-smart.2Fhealth-cards/topic/Multiple.20QR.20codes.20example/near/239438969\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"306186\">Vijayendra Prabhakar</span> what QR code scanning library are you using with your implementation? We're using <a href=\"https://www.npmjs.com/package/qr-scanner\">qr-scanner</a>, but it seems pretty sensitive to glare and positioning.</p>\n</blockquote>\n<p><span class=\"user-mention\" data-user-id=\"197651\">@Reece Adamson</span>  Even we are using the same QR code scanning library <a href=\"https://www.npmjs.com/package/qr-scanner\">https://www.npmjs.com/package/qr-scanner</a></p>",
        "id": 239439603,
        "sender_full_name": "Vijayendra Prabhakar",
        "timestamp": 1621436429
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191912\">@Michele Mottini</span> do you have any better luck with <a href=\"https://joshuamandel.com/health-card-scanner-demo\">https://joshuamandel.com/health-card-scanner-demo</a> ? (Same underlying library but slightly different configuration.)</p>",
        "id": 239442130,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1621437226
    },
    {
        "content": "<p>Huh, weird. Maybe there is some configuration settings or something we missed that could improve ours since it seems like the siemens verifier picks it up more readily. Our FOV is pretty big compared to others I've seen.</p>",
        "id": 239442169,
        "sender_full_name": "Reece Adamson",
        "timestamp": 1621437240
    },
    {
        "content": "<p>It's the glare: I moved my computer in a darker room and it worked (with both scanners)</p>",
        "id": 239442812,
        "sender_full_name": "Michele Mottini",
        "timestamp": 1621437446
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191315\">Josh Mandel</span> <a href=\"#narrow/stream/284830-smart.2Fhealth-cards/topic/Multiple.20QR.20codes.20example/near/239442130\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"191912\">Michele Mottini</span> do you have any better luck with <a href=\"https://joshuamandel.com/health-card-scanner-demo\">https://joshuamandel.com/health-card-scanner-demo</a> ? (Same underlying library but slightly different configuration.)</p>\n</blockquote>\n<p><span class=\"user-mention\" data-user-id=\"191315\">@Josh Mandel</span>  In siemens verifier we have configured to show only section which is focus qr scanning.</p>",
        "id": 239459236,
        "sender_full_name": "Maruthi M",
        "timestamp": 1621443200
    },
    {
        "content": "<p>Yeah, in my demo I just use the <a href=\"https://github.com/jmandel/health-card-scanner-demo/blob/main/src/HealthCardScanner.svelte#L53-L58\">whole area as an active region</a>.</p>",
        "id": 239461070,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1621443908
    },
    {
        "content": "<p>I have coded in the support for chunking the jws, but I would like to know if anyone has any thoughts on sending mutiple qr codes over http?</p>",
        "id": 239472253,
        "sender_full_name": "Richard Braman (FLY.HEALTH)",
        "timestamp": 1621448263
    },
    {
        "content": "<p>In what context? If you've got a web connection between systems you'd generally just share a <code>.smart-health-card</code> JSON file or some other direct form of the JWS, rather than a QR. Those don't require chunking, and you can always generate a QR on the other side since you have all the data required.</p>",
        "id": 239477501,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1621450309
    },
    {
        "content": "<p>my system lets the user have an online wallet with their qrcodes, or lets them save a local copy.  I am trying not to put any qrcode generation logic in the local device.</p>",
        "id": 239486528,
        "sender_full_name": "Richard Braman (FLY.HEALTH)",
        "timestamp": 1621454222
    },
    {
        "content": "<p>Okay. Is there something you're looking to standardize? You can have a web page that lets a user download 3 QRs as separate clicks, or use JS to trigger three downloads from one click, or host a zip file with lots of QRs inside... or you can store the QRs in browser storage rather than downloading into the host filesystems. Lots of options.</p>",
        "id": 239489163,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1621455352
    },
    {
        "content": "<p>Not sure about standardization, but I would think if we are dealing with http and multiple images, that a http request that returns multiple qrcodes would need to return it in a standard way for clients to interpret.  I was thinking it would be a mime multipart with the individual qrcodes inside. soemthing like:</p>\n<div class=\"codehilite\"><pre><span></span><code>Content-Type: multipart/form-data; boundary=2a8ae6ad-f4ad-4d9a-a92c-6d217011fe0f\nContent-Length: 112123\n\nContent-Disposition: form-data; name=&quot;qrcode1&quot;; filename=&quot;qrcode1.svg&quot;\nContent-Type: image/svg+xml\n\n&lt;svg............,...........D..;\n--2a8ae6ad-f4ad-4d9a-a92c-6d217011fe0f\nContent-Disposition: form-data; name=&quot;datafile2&quot;; filename=&quot;qrcode2.svg&quot;\nContent-Type: image/svg+xml\n\n&lt;svg.............,...........D..;\n--2a8ae6ad-f4ad-4d9a-a92c-6d217011fe0f\nContent-Disposition: form-data; name=&quot;datafile3&quot;; filename=&quot;qrcode2.svg&quot;\nContent-Type: image/svg+xml\n</code></pre></div>",
        "id": 239503912,
        "sender_full_name": "Richard Braman (FLY.HEALTH)",
        "timestamp": 1621462784
    },
    {
        "content": "<p>node js might let me do something like this:</p>\n<div class=\"codehilite\"><pre><span></span><code>  var form = new FormData();\n  form.append(qrcode1.svg, &#39;smart health card qrcode seq 1&#39;);\n  form.append(&#39;qrcode2.svg&#39;, &#39;smart health card qrcode seq 2&#39;);\n  res.setHeader(&#39;x-Content-Type&#39;, &#39;multipart/form-data; boundary=&#39;+form._boundary);\n  res.setHeader(&#39;Content-Type&#39;, &#39;image/svg+xml&#39;);\n  \\\\the overall content length would have to be calculated as well\n  res.setHeader(&#39;Content-Length&#39;, &lt;ContentLength&gt;);\n  form.pipe(res);\n</code></pre></div>",
        "id": 239504832,
        "sender_full_name": "Richard Braman (FLY.HEALTH)",
        "timestamp": 1621463327
    },
    {
        "content": "<p><a href=\"https://stackoverflow.com/questions/1041542/how-to-download-multiple-files-with-one-http-request\">https://stackoverflow.com/questions/1041542/how-to-download-multiple-files-with-one-http-request</a> doesn't bode well.</p>",
        "id": 239509320,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1621466038
    },
    {
        "content": "<p>(But it is 12 years old ;-))</p>",
        "id": 239509373,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1621466049
    }
]