[
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"238353\">@Mark Roberts</span> <span class=\"user-mention\" data-user-id=\"191648\">@Adam Culbertson</span> Creating this topic to discuss the use of the SHC card framework for Digital Insurance cards.</p>",
        "id": 254605400,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1632431177
    },
    {
        "content": "<p>First, do you have a spec or an example at this time?</p>",
        "id": 254605448,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1632431199
    },
    {
        "content": "<p>thanks <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span>  we do have a sample JSON object.</p>",
        "id": 254696697,
        "sender_full_name": "Adam Culbertson",
        "timestamp": 1632487237
    },
    {
        "content": "<p>want to share it here?</p>",
        "id": 254697253,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1632487525
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191316\">Grahame Grieve</span> <a href=\"#narrow/stream/284830-smart.2Fhealth-cards/topic/Digital.20Insurance.20Card/near/254697253\">said</a>:</p>\n<blockquote>\n<p>want to share it here?</p>\n</blockquote>\n<p>Yes let me see if <span class=\"user-mention\" data-user-id=\"238353\">@Mark Roberts</span> can post here.  My work computer doesn't like to post things outside of our firewall.</p>",
        "id": 254697623,
        "sender_full_name": "Adam Culbertson",
        "timestamp": 1632487687
    },
    {
        "content": "<p>I am trying to post it here. If this doesn't work, all of our content is posted here: <a href=\"https://confluence.hl7.org/display/CAR/Resources\">https://confluence.hl7.org/display/CAR/Resources</a>  </p>\n<p><a href=\"/user_uploads/10155/iwl0kxg3pn6638UKTBk5CWnc/DRAFT-JSONs-for-Digital-Insurance-Card-IG.json\">DRAFT-JSONs-for-Digital-Insurance-Card-IG.json</a></p>",
        "id": 254703326,
        "sender_full_name": "Mark Roberts",
        "timestamp": 1632490052
    },
    {
        "content": "<p>18kb... massive. A key aspect of the SHC framework that makes it very robust is that the data is extremely parsimonious. Your example is not; it seems extremely unlikely to me that all the information you're representing is on an existing card.</p>",
        "id": 254704782,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1632490656
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> good point.  If we want to leverage SMART Health Cards this piece would have to be widdled down to the essential data.</p>",
        "id": 254707120,
        "sender_full_name": "Adam Culbertson",
        "timestamp": 1632491534
    },
    {
        "content": "<p>We captured a pretty comprehensive list of data elements that are commonly found on commercial insurance cards in the document below. We started to look at Medicare and Medicaid cards, but need more work  on those sections. <span class=\"user-mention\" data-user-id=\"191648\">@Adam Culbertson</span> correct me if I am wrong, but I think the JSON includes all the commercial data elements in the document below.</p>\n<p><a href=\"/user_uploads/10155/4DsO_w4fC6Fqpmn9ZxKfjo__/CARIN-IG-for-Digital-Insurance-Card-Data-Elements-9.9.211.xlsx\">CARIN-IG-for-Digital-Insurance-Card-Data-Elements-9.9.211.xlsx</a></p>",
        "id": 254707325,
        "sender_full_name": "Mark Roberts",
        "timestamp": 1632491625
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"238353\">@Mark Roberts</span> yes this is indeed this list of elements.  But I think perhaps what <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span>  is getting at is perhaps of that list there may be a few we would want to prioritize for including into a SMART health card that would be exchanged with a partner.  Perhaps the SMART health card framework is out of scope here.  But I think something we need to think about the breath of data we have and thing about what is essential for our use case.</p>",
        "id": 254711575,
        "sender_full_name": "Adam Culbertson",
        "timestamp": 1632493099
    },
    {
        "content": "<p>the first question that leaped out to me is the multiple person question. Does the digital insurance card need to capture all the persons on the logical card in the one digital card?</p>",
        "id": 254716094,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1632494859
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> great question and one we wrestled with as a group.  Some plans do list multiple persons on the same card and that is why we ultimately choose to support them.  But again coming back to SMART health cards.  If we want to support there is probably a compelling reason to break it at to one person per card.</p>",
        "id": 254716951,
        "sender_full_name": "Adam Culbertson",
        "timestamp": 1632495189
    },
    {
        "content": "<p>perhaps, yes. But if you want QR codes, and you aren't going to do it the SHC way because you have too much data, what option is left?</p>",
        "id": 254717112,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1632495245
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> Yes, I agree.  I think that is a question the group needs to wrestle with.  Hence we either need to abandon the idea of using SMART Health cards, narrow down the JSON object, or find some middle of the road solution.</p>",
        "id": 254717730,
        "sender_full_name": "Adam Culbertson",
        "timestamp": 1632495487
    },
    {
        "content": "<p>sounds like it, but does that imply you also need to abandon the idea of using QR codes? And what would a middle of the road solution look like?</p>",
        "id": 254717965,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1632495593
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> what's the time difference between US eastern time and you?</p>",
        "id": 254718248,
        "sender_full_name": "Adam Culbertson",
        "timestamp": 1632495684
    },
    {
        "content": "<p>10 hours right now. It's 1 am and I have a long night ahead of me</p>",
        "id": 254718399,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1632495729
    },
    {
        "content": "<p>The QR codes we are talking about supporting in this IG are not SMART Health Card QR codes. Many insurance cards have QR codes on them. Ex. <a href=\"https://hmsa.com/Media/Default/images/member-id-card-ppo-compmed.jpg\">https://hmsa.com/Media/Default/images/member-id-card-ppo-compmed.jpg</a>  We are planning on allowing providers to include an image of these QR codes as an Attachment in an Extension</p>\n<div class=\"message_inline_image\"><a href=\"https://hmsa.com/Media/Default/images/member-id-card-ppo-compmed.jpg\"><img src=\"https://uploads.zulipusercontent.net/ab3fb5093c2608a1aed7ddaef6b5e2b579204c64/68747470733a2f2f686d73612e636f6d2f4d656469612f44656661756c742f696d616765732f6d656d6265722d69642d636172642d70706f2d636f6d706d65642e6a7067\"></a></div>",
        "id": 254782270,
        "sender_full_name": "Amy Ballard",
        "timestamp": 1632522649
    },
    {
        "content": "<p>In a future version of the IG, we could support issuing a type of SMART Health Card, at which time we'd need to have profiles constraining the allowed data for the card. The user could potentially retrieve the full set of Coverage data mapped for this IG and also request a SMART Health Card be issued. The same way a user can currently retrieve all their immunizations from their provider and also request a SMART Health Card with their COVID vaccines.</p>",
        "id": 254784745,
        "sender_full_name": "Amy Ballard",
        "timestamp": 1632524269
    },
    {
        "content": "<p>The QR in this example is super tiny -- what does it convey / how is it used?</p>",
        "id": 254789362,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1632527665
    },
    {
        "content": "<p>For this example, it appears to be the Subscriber ID, not sure how it's intended to be used. We have discussed that insurance cards have images, which could be logos, bar codes and QR codes. We'd like to define a way for insurers to optionally include these in the Coverage resource. We have not yet worked out the details of how we might convey the meaning/intended use for each image. QR codes are likely be used differently by different insurers. The \"images\" discussions are yet to come.</p>",
        "id": 254794615,
        "sender_full_name": "Amy Ballard",
        "timestamp": 1632531819
    },
    {
        "content": "<p>that'll be a simple avoidance of keyboard entry errors - scan the barcode into the UI entry with a simple USB scanner</p>",
        "id": 254794781,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1632531970
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> yes agreed and then you sovle 90% of my patient matching problem. :</p>",
        "id": 255150142,
        "sender_full_name": "Adam Culbertson",
        "timestamp": 1632794855
    },
    {
        "content": "<p>Mistyping insurance numbers can't really be be 90% of the problem with patient matching, can it?</p>",
        "id": 255150673,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1632795352
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191315\">@Josh Mandel</span>No the data on the insurance card won't solve 90% of the problem.  But to Grahme'ss comment \"simple avoidance of simple keyboard entry errors\"  such as mistyping names, addresses, and DOB would solve a significant portion of it.</p>",
        "id": 255230230,
        "sender_full_name": "Adam Culbertson",
        "timestamp": 1632840945
    },
    {
        "content": "<p>We are SUPER early in this discussion. In fact, we really haven't had any meaningful conversations about this because health plans have not indicated this is a priority for them right now. The goal has been to publish STU1 and simply make room for images as <span class=\"user-mention\" data-user-id=\"216906\">@Amy Ballard</span> mentioned. As background, there are significant differences between what data elements health plan membership cards include across lines of business, employer groups, and states. Early indications are that it would be a heavy (maybe too difficult) lift to provide uniform SHC guidance as to what the ~1200 characters should include for each of the possible combinations but again, we need to discuss in more detail. <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> Is there a specific demand out there regarding why you are asking that we may be failing to take into account? Happy to reprioritize this discussion if that's the case. <span class=\"user-mention\" data-user-id=\"260046\">@Cille Kissel Watkins</span> <span class=\"user-mention\" data-user-id=\"243554\">@Pat Taylor</span> <span class=\"user-mention\" data-user-id=\"231038\">@Gail Kocher</span> may also want to weigh in from the payer community.</p>",
        "id": 267905747,
        "sender_full_name": "Ryan Howells",
        "timestamp": 1642096324
    },
    {
        "content": "<p>Hi all - I second Amy's comments wholeheartedly. For STU1 of the IG, we focused on enabling essential elements found on the physical insurance cards to be passed, including a few image types. QR codes are used by a small number of plans to communicate MemberID or SubscriberIDs; barcodes are far more common communicating MemberIDs, names of beneficiaries, and plan details. Would be happy to point you all to some sample insurance cards from US insurers if there is confusion or concern about the data elements we are exposing in the initial IG. </p>\n<p>For future versions of the IG (assuming there is interest from the community to take this forward), we are very interested in understanding how the insurance card data could be passed as a verifiable SMART health card. We had some initial dialogue with Josh about this a few months ago but would need to have more formal dialogue as a community. Once we get past this ballot reconciliation, we would welcome participation in our regularly scheduled Thursday meetings to discuss how we could make this a reality for STU2. If that timing is not convenient, we could organize another time to connect to augment our regularly schedule touch bases.</p>",
        "id": 267908606,
        "sender_full_name": "Cille Kissel Watkins",
        "timestamp": 1642097590
    },
    {
        "content": "<p>Clearly none of this should be affecting current term ballots. But it would be great to build some prototypes that explore what it would mean to support smart health links,  as a background process.</p>\n<p>If you want to schedule a conversation or better yet a working session to hack on some demonstrations here, I would be very happy to participate:-</p>",
        "id": 267918416,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1642102179
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"196361\">@Ryan Howells</span> </p>\n<blockquote>\n<p>@Grahame Grieve Is there a specific demand out there regarding why you are asking that we may be failing to take into account?</p>\n</blockquote>\n<p>I have no particular stake in the ground regarding functionality. Just that the project when presented to FMG indicated an intention to use SHCs, but the way the project was progressing indicated incompatible technical thinking with SHC constraints. So I'm exploring that. </p>\n<ul>\n<li>strip the data down to what can be in an SHC</li>\n<li>use the QR code to refer to data elsewhere </li>\n<li>have a QR code that's only a limited portion of the data that is transferred at point of clerical processing</li>\n<li>don't use QR codes</li>\n</ul>\n<p>I'm not invested in any of those, just trying to make sure that the project's work and it's stated goals align</p>",
        "id": 267923319,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1642104471
    },
    {
        "content": "<p>I will be very interested in working with the group to fit a large payload into a single QR. I actually think the previous proposals are not really that large and can be made to fit into a QR with some encoding magic.</p>",
        "id": 267926912,
        "sender_full_name": "Vitor Pamplona",
        "timestamp": 1642106337
    },
    {
        "content": "<p>well, the proposal I looked at was 18k and wasn't going to fit any time</p>",
        "id": 267926975,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1642106381
    },
    {
        "content": "<p>In raw, yes it will never fit</p>",
        "id": 267927085,
        "sender_full_name": "Vitor Pamplona",
        "timestamp": 1642106423
    },
    {
        "content": "<p>right. so my point was that either you aren't using SHCs, or you are working towards meeting the technical constraints, or you are working with the SHC group to find a 3rd course</p>",
        "id": 267927412,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1642106596
    },
    {
        "content": "<p>SHCs support multiple QRs. One could definitely do that.</p>",
        "id": 267927572,
        "sender_full_name": "Vitor Pamplona",
        "timestamp": 1642106679
    },
    {
        "content": "<p>But there are better compression mechanisms out there. It would be a different spec, but you can expect to put a 60KB sparse json file into a 4Kb QR</p>",
        "id": 267927676,
        "sender_full_name": "Vitor Pamplona",
        "timestamp": 1642106741
    },
    {
        "content": "<p>Like I said, it's not really that big. Here's the JSON from <span class=\"user-mention\" data-user-id=\"238353\">@Mark Roberts</span>  signed following SHC: <a href=\"/user_uploads/10155/KRymZ3EZ4eDDkVH5l3eUAmxY/Mark-Roberts-JSON-as-an-SHC.png\">Mark-Roberts-JSON-as-an-SHC.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/KRymZ3EZ4eDDkVH5l3eUAmxY/Mark-Roberts-JSON-as-an-SHC.png\" title=\"Mark-Roberts-JSON-as-an-SHC.png\"><img src=\"/user_uploads/10155/KRymZ3EZ4eDDkVH5l3eUAmxY/Mark-Roberts-JSON-as-an-SHC.png\"></a></div>",
        "id": 267930540,
        "sender_full_name": "Vitor Pamplona",
        "timestamp": 1642108017
    },
    {
        "content": "<p>Without any additional compression.</p>",
        "id": 267930577,
        "sender_full_name": "Vitor Pamplona",
        "timestamp": 1642108031
    },
    {
        "content": "<p>These 4kb QRs aren't easy to scan, especially when printed on paper or scanned from a consumer grade camera (subject is not perfectly flat, not evenly lit). We chose V22 as a pragmatic upper bound in SHC.</p>",
        "id": 267941786,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1642113613
    },
    {
        "content": "<p>In any case, it's worth exploring density of inline data as well as approaches that link to external data.</p>",
        "id": 267941979,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1642113710
    },
    {
        "content": "<p>the Australian ICAO QR codes are more dense than SHCs (they have all the X509 stuff in there) and I have had problems scanning them all over the place</p>",
        "id": 267943849,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1642114760
    },
    {
        "content": "<p>So, what's the limit for you? 1Kb?</p>",
        "id": 267945676,
        "sender_full_name": "Vitor Pamplona",
        "timestamp": 1642115802
    },
    {
        "content": "<p>We could use the EU's DCC standard to put all that data under 1KB QRs if we wanted to</p>",
        "id": 267945934,
        "sender_full_name": "Vitor Pamplona",
        "timestamp": 1642115969
    },
    {
        "content": "<p>I think the limit is best expressed in terms of QR symbol version rather than bytes -- V22, for example.</p>",
        "id": 267946750,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1642116453
    },
    {
        "content": "<p>So, is V22 the limit for SHCs?</p>",
        "id": 267948620,
        "sender_full_name": "Vitor Pamplona",
        "timestamp": 1642117390
    },
    {
        "content": "<p>Yes, see <a href=\"https://spec.smarthealth.cards/#chunking\">https://spec.smarthealth.cards/#chunking</a> for details</p>",
        "id": 267960839,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1642127620
    },
    {
        "content": "<p>Hum.. which mode is the V22 for? Based on Example 2, it looks like that limitation requires folks to use QR's ECC <code>L</code>, which is not great. Otherwise that same QR goes into v25 for M, v30 for Q and v34 for H.</p>",
        "id": 268009464,
        "sender_full_name": "Vitor Pamplona",
        "timestamp": 1642164965
    },
    {
        "content": "<p>I would strongly suggest upping it to v25-28 and requiring to <code>M</code>. The <code>L</code> mode is probably the reason why <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> is having a hard time with ICAO cards (which can only use <code>L</code>), since the vast majority of reading inconsistencies out there come from \"damaged\" QR.</p>",
        "id": 268010477,
        "sender_full_name": "Vitor Pamplona",
        "timestamp": 1642165476
    },
    {
        "content": "<p>Keep in mind that v22 is an upper limit;  implementers can increase error correction when they have smaller data sets, otherwise we break the data across multiple QRs (and again, these can be populated with less data if more air correction is desired).  We chose an upper bound based on some testing, and we certainly have not discovered evidence that we have a lot of headroom here  to increase the cap.</p>",
        "id": 268026350,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1642173270
    },
    {
        "content": "<p>Sure, but what I am saying is that, in practice, a print of v22 on <code>L</code> is worse than v25 on <code>M</code> just because of the way people manage their QR papers (folding, scratching, oils, water damage, etc). Using only the version as a guide on the spec misses the point.</p>",
        "id": 268027633,
        "sender_full_name": "Vitor Pamplona",
        "timestamp": 1642173797
    },
    {
        "content": "<p>And if people are only using screens (like their phones instead of a printed card), the display reflections alone, especially in lower-end phones which are less bright and more reflective, makes any <code>L</code> QR hard to read.</p>",
        "id": 268028144,
        "sender_full_name": "Vitor Pamplona",
        "timestamp": 1642173984
    },
    {
        "content": "<p>In other words, <strong>in practice</strong>, the QR density is less impactful than the QR correction capabilities.</p>",
        "id": 268029131,
        "sender_full_name": "Vitor Pamplona",
        "timestamp": 1642174392
    },
    {
        "content": "<p>Are you familiar with some best practice guidance or data driven recommendation in this space? We struggled to find these, and relied on feedback from participants during spec development to set limits.</p>",
        "id": 268030845,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1642175096
    },
    {
        "content": "<p>We did a study for the Good Health Pass blueprint last year. There are some very good considerations at the GS1 2D Barcode Verification Process Implementation Guideline: <a href=\"https://www.gs1.org/docs/barcodes/2D_Barcode_Verification_Process_Implementation_Guideline.pdf\">https://www.gs1.org/docs/barcodes/2D_Barcode_Verification_Process_Implementation_Guideline.pdf</a></p>",
        "id": 268031676,
        "sender_full_name": "Vitor Pamplona",
        "timestamp": 1642175411
    },
    {
        "content": "<p>But my comments here are based on the use of our universal verifier, with around 75K stored pictures of COVID QRs from the app in one of our client's databases.</p>",
        "id": 268031809,
        "sender_full_name": "Vitor Pamplona",
        "timestamp": 1642175479
    },
    {
        "content": "<p>Ok, I played a bit with this Insurance Card payload. Here's a SHC QR (v22 on <code>L</code>) with most of the information from the original JSON. </p>\n<p>Changes were: </p>\n<ol start=\"0\">\n<li>All Plan members were turned into Patients inside the Bundle. This allows for the use of references in the other objects</li>\n<li>The organization's contact information should not be on the QR. This is mutable data and the QR should simply have a URL to download the most up-to-date contact information for each one of the purposes listed here. </li>\n<li>The logo and color information should not be in the QR. </li>\n<li>Instructions in English (due to internationalization issues) and Display names for the codes (which is alredy available from the coding system) were removed. </li>\n<li>All extensions should be turned into regular fields. </li>\n<li>This is using Brotli compression instead of ZLib, which produces 25% smaller QRs, and will require updating the SHC spec to support another compression algorithm. </li>\n</ol>\n<p>The final payload looks like this: </p>\n<div class=\"codehilite\" data-code-language=\"JSON\"><pre><span></span><code><span class=\"p\">{</span>\n  <span class=\"nt\">\"type\"</span><span class=\"p\">:</span> <span class=\"p\">[</span> <span class=\"s2\">\"https://smarthealth.cards#insurance-card\"</span> <span class=\"p\">],</span>\n  <span class=\"nt\">\"credentialSubject\"</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n    <span class=\"nt\">\"fhirVersion\"</span><span class=\"p\">:</span> <span class=\"s2\">\"4.0.1\"</span><span class=\"p\">,</span>\n    <span class=\"nt\">\"fhirBundle\"</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n      <span class=\"nt\">\"resourceType\"</span><span class=\"p\">:</span> <span class=\"s2\">\"Bundle\"</span><span class=\"p\">,</span>\n      <span class=\"nt\">\"entry\"</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n        <span class=\"p\">{</span> <span class=\"nt\">\"resourceType\"</span><span class=\"p\">:</span> <span class=\"s2\">\"Patient\"</span><span class=\"p\">,</span> <span class=\"nt\">\"name\"</span><span class=\"p\">:</span> <span class=\"p\">[</span> <span class=\"p\">{</span> <span class=\"nt\">\"family\"</span><span class=\"p\">:</span> <span class=\"s2\">\"Doe\"</span><span class=\"p\">,</span> <span class=\"nt\">\"given\"</span><span class=\"p\">:</span> <span class=\"p\">[</span><span class=\"s2\">\"John\"</span><span class=\"p\">]</span> <span class=\"p\">}</span> <span class=\"p\">],</span> <span class=\"nt\">\"id\"</span><span class=\"p\">:</span> <span class=\"s2\">\"102345672-01\"</span><span class=\"p\">},</span>\n        <span class=\"p\">{</span> <span class=\"nt\">\"resourceType\"</span><span class=\"p\">:</span> <span class=\"s2\">\"Patient\"</span><span class=\"p\">,</span> <span class=\"nt\">\"name\"</span><span class=\"p\">:</span> <span class=\"p\">[</span> <span class=\"p\">{</span> <span class=\"nt\">\"family\"</span><span class=\"p\">:</span> <span class=\"s2\">\"Doe\"</span><span class=\"p\">,</span> <span class=\"nt\">\"given\"</span><span class=\"p\">:</span> <span class=\"p\">[</span><span class=\"s2\">\"Jane\"</span><span class=\"p\">]</span> <span class=\"p\">}</span> <span class=\"p\">],</span> <span class=\"nt\">\"id\"</span><span class=\"p\">:</span> <span class=\"s2\">\"102345672-02\"</span><span class=\"p\">},</span>\n        <span class=\"p\">{</span> <span class=\"nt\">\"resourceType\"</span><span class=\"p\">:</span> <span class=\"s2\">\"Patient\"</span><span class=\"p\">,</span> <span class=\"nt\">\"name\"</span><span class=\"p\">:</span> <span class=\"p\">[</span> <span class=\"p\">{</span> <span class=\"nt\">\"family\"</span><span class=\"p\">:</span> <span class=\"s2\">\"Doe\"</span><span class=\"p\">,</span> <span class=\"nt\">\"given\"</span><span class=\"p\">:</span> <span class=\"p\">[</span><span class=\"s2\">\"Jimmy\"</span><span class=\"p\">]}</span> <span class=\"p\">],</span> <span class=\"nt\">\"id\"</span><span class=\"p\">:</span> <span class=\"s2\">\"102345672-03\"</span><span class=\"p\">},</span>\n        <span class=\"p\">{</span> <span class=\"nt\">\"resourceType\"</span><span class=\"p\">:</span> <span class=\"s2\">\"Patient\"</span><span class=\"p\">,</span> <span class=\"nt\">\"name\"</span><span class=\"p\">:</span> <span class=\"p\">[</span> <span class=\"p\">{</span> <span class=\"nt\">\"family\"</span><span class=\"p\">:</span> <span class=\"s2\">\"Doe\"</span><span class=\"p\">,</span> <span class=\"nt\">\"given\"</span><span class=\"p\">:</span> <span class=\"p\">[</span><span class=\"s2\">\"Ginny\"</span><span class=\"p\">]}</span> <span class=\"p\">],</span> <span class=\"nt\">\"id\"</span><span class=\"p\">:</span> <span class=\"s2\">\"102345672-04\"</span><span class=\"p\">},</span>\n        <span class=\"p\">{</span>\n          <span class=\"nt\">\"resourceType\"</span><span class=\"p\">:</span> <span class=\"s2\">\"Coverage\"</span><span class=\"p\">,</span>\n          <span class=\"nt\">\"id\"</span><span class=\"p\">:</span> <span class=\"s2\">\"8a01955891bc1c1262d689b616fb6e9e32d268e7a65632ce62ac347263112345\"</span><span class=\"p\">,</span>\n          <span class=\"nt\">\"identifier\"</span><span class=\"p\">:</span> <span class=\"p\">[</span> <span class=\"p\">{</span> <span class=\"nt\">\"value\"</span><span class=\"p\">:</span> <span class=\"s2\">\"102345672-02\"</span><span class=\"p\">,</span> <span class=\"nt\">\"assigner\"</span><span class=\"p\">:</span> <span class=\"p\">{</span> <span class=\"nt\">\"reference\"</span><span class=\"p\">:</span> <span class=\"s2\">\"Organization/2222222222\"</span> <span class=\"p\">}</span> <span class=\"p\">}</span> <span class=\"p\">],</span>\n          <span class=\"nt\">\"type\"</span><span class=\"p\">:</span> <span class=\"p\">{</span> <span class=\"nt\">\"coding\"</span><span class=\"p\">:</span> <span class=\"p\">[</span> <span class=\"p\">{</span> <span class=\"nt\">\"system\"</span><span class=\"p\">:</span> <span class=\"s2\">\"http://terminology.hl7.org/CodeSystem/v3-ActCode\"</span><span class=\"p\">,</span> <span class=\"nt\">\"code\"</span><span class=\"p\">:</span> <span class=\"s2\">\"HIP\"</span> <span class=\"p\">}</span> <span class=\"p\">]</span> <span class=\"p\">},</span>\n          <span class=\"nt\">\"subscriber\"</span><span class=\"p\">:</span> <span class=\"p\">{</span> <span class=\"nt\">\"reference\"</span><span class=\"p\">:</span> <span class=\"s2\">\"Patient/102345672-01\"</span> <span class=\"p\">},</span>\n          <span class=\"nt\">\"beneficiary\"</span><span class=\"p\">:</span> <span class=\"p\">{</span> <span class=\"nt\">\"reference\"</span><span class=\"p\">:</span> <span class=\"s2\">\"Patient/102345672-02\"</span> <span class=\"p\">},</span>\n          <span class=\"nt\">\"relationship\"</span><span class=\"p\">:</span> <span class=\"p\">{</span> <span class=\"nt\">\"coding\"</span><span class=\"p\">:</span> <span class=\"p\">[</span> <span class=\"p\">{</span> <span class=\"nt\">\"system\"</span><span class=\"p\">:</span> <span class=\"s2\">\"http://terminology.hl7.org/CodeSystem/subscriber-relationship\"</span><span class=\"p\">,</span> <span class=\"nt\">\"code\"</span><span class=\"p\">:</span> <span class=\"s2\">\"spouse\"</span> <span class=\"p\">}</span> <span class=\"p\">]</span> <span class=\"p\">},</span>\n          <span class=\"nt\">\"period\"</span><span class=\"p\">:</span> <span class=\"p\">{</span> <span class=\"nt\">\"start\"</span><span class=\"p\">:</span> <span class=\"s2\">\"2021-01-01\"</span> <span class=\"p\">},</span>\n          <span class=\"nt\">\"payor\"</span><span class=\"p\">:</span> <span class=\"p\">[</span> <span class=\"p\">{</span> <span class=\"nt\">\"reference\"</span><span class=\"p\">:</span> <span class=\"s2\">\"Organization/2222222222\"</span> <span class=\"p\">}</span> <span class=\"p\">],</span>\n          <span class=\"nt\">\"class\"</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n            <span class=\"p\">{</span> <span class=\"nt\">\"type\"</span><span class=\"p\">:</span> <span class=\"p\">{</span> <span class=\"nt\">\"coding\"</span><span class=\"p\">:</span> <span class=\"p\">[</span> <span class=\"p\">{</span> <span class=\"nt\">\"system\"</span><span class=\"p\">:</span> <span class=\"s2\">\"http://terminology.hl7.org/CodeSystem/coverage-class\"</span><span class=\"p\">,</span> <span class=\"nt\">\"code\"</span><span class=\"p\">:</span> <span class=\"s2\">\"group\"</span>   <span class=\"p\">}]},</span><span class=\"nt\">\"value\"</span><span class=\"p\">:</span> <span class=\"s2\">\"993355\"</span><span class=\"p\">,</span>   <span class=\"nt\">\"name\"</span><span class=\"p\">:</span> <span class=\"s2\">\"Stars Inc\"</span><span class=\"p\">},</span>\n            <span class=\"p\">{</span> <span class=\"nt\">\"type\"</span><span class=\"p\">:</span> <span class=\"p\">{</span> <span class=\"nt\">\"coding\"</span><span class=\"p\">:</span> <span class=\"p\">[</span> <span class=\"p\">{</span> <span class=\"nt\">\"system\"</span><span class=\"p\">:</span> <span class=\"s2\">\"http://terminology.hl7.org/CodeSystem/coverage-class\"</span><span class=\"p\">,</span> <span class=\"nt\">\"code\"</span><span class=\"p\">:</span> <span class=\"s2\">\"plan\"</span>    <span class=\"p\">}]},</span><span class=\"nt\">\"value\"</span><span class=\"p\">:</span> <span class=\"s2\">\"11461128\"</span><span class=\"p\">,</span> <span class=\"nt\">\"name\"</span><span class=\"p\">:</span> <span class=\"s2\">\"Acme Gold Plus\"</span><span class=\"p\">},</span>\n            <span class=\"p\">{</span> <span class=\"nt\">\"type\"</span><span class=\"p\">:</span> <span class=\"p\">{</span> <span class=\"nt\">\"coding\"</span><span class=\"p\">:</span> <span class=\"p\">[</span> <span class=\"p\">{</span> <span class=\"nt\">\"system\"</span><span class=\"p\">:</span> <span class=\"s2\">\"http://terminology.hl7.org/CodeSystem/coverage-class\"</span><span class=\"p\">,</span> <span class=\"nt\">\"code\"</span><span class=\"p\">:</span> <span class=\"s2\">\"division\"</span><span class=\"p\">}]},</span><span class=\"nt\">\"value\"</span><span class=\"p\">:</span> <span class=\"s2\">\"11\"</span><span class=\"p\">},</span>\n            <span class=\"p\">{</span> <span class=\"nt\">\"type\"</span><span class=\"p\">:</span> <span class=\"p\">{</span> <span class=\"nt\">\"coding\"</span><span class=\"p\">:</span> <span class=\"p\">[</span> <span class=\"p\">{</span> <span class=\"nt\">\"system\"</span><span class=\"p\">:</span> <span class=\"s2\">\"http://terminology.hl7.org/CodeSystem/coverage-class\"</span><span class=\"p\">,</span> <span class=\"nt\">\"code\"</span><span class=\"p\">:</span> <span class=\"s2\">\"network\"</span> <span class=\"p\">}]},</span><span class=\"nt\">\"value\"</span><span class=\"p\">:</span> <span class=\"s2\">\"561490\"</span><span class=\"p\">,</span>   <span class=\"nt\">\"name\"</span><span class=\"p\">:</span> <span class=\"s2\">\"Acme Gold Plus South\"</span><span class=\"p\">},</span>\n            <span class=\"p\">{</span> <span class=\"nt\">\"type\"</span><span class=\"p\">:</span> <span class=\"p\">{</span> <span class=\"nt\">\"coding\"</span><span class=\"p\">:</span> <span class=\"p\">[</span> <span class=\"p\">{</span> <span class=\"nt\">\"system\"</span><span class=\"p\">:</span> <span class=\"s2\">\"http://terminology.hl7.org/CodeSystem/coverage-class\"</span><span class=\"p\">,</span> <span class=\"nt\">\"code\"</span><span class=\"p\">:</span> <span class=\"s2\">\"rxbin\"</span>   <span class=\"p\">}]},</span><span class=\"nt\">\"value\"</span><span class=\"p\">:</span> <span class=\"s2\">\"100045\"</span><span class=\"p\">},</span>\n            <span class=\"p\">{</span> <span class=\"nt\">\"type\"</span><span class=\"p\">:</span> <span class=\"p\">{</span> <span class=\"nt\">\"coding\"</span><span class=\"p\">:</span> <span class=\"p\">[</span> <span class=\"p\">{</span> <span class=\"nt\">\"system\"</span><span class=\"p\">:</span> <span class=\"s2\">\"http://terminology.hl7.org/CodeSystem/coverage-class\"</span><span class=\"p\">,</span> <span class=\"nt\">\"code\"</span><span class=\"p\">:</span> <span class=\"s2\">\"rxpcn\"</span>   <span class=\"p\">}]},</span><span class=\"nt\">\"value\"</span><span class=\"p\">:</span> <span class=\"s2\">\"1234000\"</span><span class=\"p\">}</span>\n          <span class=\"p\">],</span>\n          <span class=\"nt\">\"costToBeneficiary\"</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n            <span class=\"p\">{</span> <span class=\"nt\">\"type\"</span><span class=\"p\">:</span> <span class=\"p\">{</span> <span class=\"nt\">\"coding\"</span><span class=\"p\">:</span> <span class=\"p\">[</span> <span class=\"p\">{</span> <span class=\"nt\">\"system\"</span><span class=\"p\">:</span> <span class=\"s2\">\"https://hl7.org/fhir/ValueSet/coverage-copay-type\"</span><span class=\"p\">,</span> <span class=\"nt\">\"code\"</span><span class=\"p\">:</span> <span class=\"s2\">\"gpvisit\"</span>    <span class=\"p\">}]},</span><span class=\"nt\">\"valueString\"</span><span class=\"p\">:</span> <span class=\"s2\">\"N/A\"</span> <span class=\"p\">},</span>\n            <span class=\"p\">{</span> <span class=\"nt\">\"type\"</span><span class=\"p\">:</span> <span class=\"p\">{</span> <span class=\"nt\">\"coding\"</span><span class=\"p\">:</span> <span class=\"p\">[</span> <span class=\"p\">{</span> <span class=\"nt\">\"system\"</span><span class=\"p\">:</span> <span class=\"s2\">\"https://hl7.org/fhir/ValueSet/coverage-copay-type\"</span><span class=\"p\">,</span> <span class=\"nt\">\"code\"</span><span class=\"p\">:</span> <span class=\"s2\">\"spvisit\"</span>    <span class=\"p\">}]},</span><span class=\"nt\">\"valueString\"</span><span class=\"p\">:</span> <span class=\"s2\">\"N/A\"</span> <span class=\"p\">},</span>\n            <span class=\"p\">{</span> <span class=\"nt\">\"type\"</span><span class=\"p\">:</span> <span class=\"p\">{</span> <span class=\"nt\">\"coding\"</span><span class=\"p\">:</span> <span class=\"p\">[</span> <span class=\"p\">{</span> <span class=\"nt\">\"system\"</span><span class=\"p\">:</span> <span class=\"s2\">\"https://hl7.org/fhir/ValueSet/coverage-copay-type\"</span><span class=\"p\">,</span> <span class=\"nt\">\"code\"</span><span class=\"p\">:</span> <span class=\"s2\">\"emergency\"</span>  <span class=\"p\">}]},</span><span class=\"nt\">\"valueString\"</span><span class=\"p\">:</span> <span class=\"s2\">\"N/A\"</span><span class=\"p\">},</span>\n            <span class=\"p\">{</span> <span class=\"nt\">\"type\"</span><span class=\"p\">:</span> <span class=\"p\">{</span> <span class=\"nt\">\"coding\"</span><span class=\"p\">:</span> <span class=\"p\">[</span> <span class=\"p\">{</span> <span class=\"nt\">\"system\"</span><span class=\"p\">:</span> <span class=\"s2\">\"https://hl7.org/fhir/ValueSet/coverage-copay-type\"</span><span class=\"p\">,</span> <span class=\"nt\">\"code\"</span><span class=\"p\">:</span> <span class=\"s2\">\"urgentcare\"</span> <span class=\"p\">}]},</span><span class=\"nt\">\"valueString\"</span><span class=\"p\">:</span> <span class=\"s2\">\"N/A\"</span> <span class=\"p\">},</span>\n            <span class=\"p\">{</span> <span class=\"nt\">\"type\"</span><span class=\"p\">:</span> <span class=\"p\">{</span> <span class=\"nt\">\"coding\"</span><span class=\"p\">:</span> <span class=\"p\">[</span> <span class=\"p\">{</span> <span class=\"nt\">\"system\"</span><span class=\"p\">:</span> <span class=\"s2\">\"https://hl7.org/fhir/ValueSet/coverage-copay-type\"</span><span class=\"p\">,</span> <span class=\"nt\">\"code\"</span><span class=\"p\">:</span> <span class=\"s2\">\"rx\"</span>         <span class=\"p\">}]},</span><span class=\"nt\">\"valueString\"</span><span class=\"p\">:</span> <span class=\"s2\">\"DED THEN $10/$40/$70/25%\"</span><span class=\"p\">},</span>\n            <span class=\"p\">{</span> <span class=\"nt\">\"type\"</span><span class=\"p\">:</span> <span class=\"p\">{</span> <span class=\"nt\">\"coding\"</span><span class=\"p\">:</span> <span class=\"p\">[</span> <span class=\"p\">{</span> <span class=\"nt\">\"system\"</span><span class=\"p\">:</span> <span class=\"s2\">\"https://hl7.org/fhir/valueset-coverage-copay-type\"</span><span class=\"p\">,</span> <span class=\"nt\">\"code\"</span><span class=\"p\">:</span> <span class=\"s2\">\"FamOutDed\"</span>  <span class=\"p\">}]},</span><span class=\"nt\">\"valueMoney\"</span><span class=\"p\">:</span> <span class=\"p\">{</span><span class=\"nt\">\"value\"</span><span class=\"p\">:</span> <span class=\"s2\">\"10000.00\"</span><span class=\"p\">,</span> <span class=\"nt\">\"currency\"</span><span class=\"p\">:</span> <span class=\"s2\">\"USD\"</span><span class=\"p\">}},</span>\n            <span class=\"p\">{</span> <span class=\"nt\">\"type\"</span><span class=\"p\">:</span> <span class=\"p\">{</span> <span class=\"nt\">\"coding\"</span><span class=\"p\">:</span> <span class=\"p\">[</span> <span class=\"p\">{</span> <span class=\"nt\">\"system\"</span><span class=\"p\">:</span> <span class=\"s2\">\"https://hl7.org/fhir/valueset-coverage-copay-type\"</span><span class=\"p\">,</span> <span class=\"nt\">\"code\"</span><span class=\"p\">:</span> <span class=\"s2\">\"FamInDed\"</span>   <span class=\"p\">}]},</span><span class=\"nt\">\"valueMoney\"</span><span class=\"p\">:</span> <span class=\"p\">{</span><span class=\"nt\">\"value\"</span><span class=\"p\">:</span>  <span class=\"s2\">\"8000.00\"</span><span class=\"p\">,</span> <span class=\"nt\">\"currency\"</span><span class=\"p\">:</span> <span class=\"s2\">\"USD\"</span><span class=\"p\">}},</span>\n            <span class=\"p\">{</span> <span class=\"nt\">\"type\"</span><span class=\"p\">:</span> <span class=\"p\">{</span> <span class=\"nt\">\"coding\"</span><span class=\"p\">:</span> <span class=\"p\">[</span> <span class=\"p\">{</span> <span class=\"nt\">\"system\"</span><span class=\"p\">:</span> <span class=\"s2\">\"https://hl7.org/fhir/valueset-coverage-copay-type\"</span><span class=\"p\">,</span> <span class=\"nt\">\"code\"</span><span class=\"p\">:</span> <span class=\"s2\">\"FamRxOutDed\"</span><span class=\"p\">}]},</span><span class=\"nt\">\"valueMoney\"</span><span class=\"p\">:</span> <span class=\"p\">{</span><span class=\"nt\">\"value\"</span><span class=\"p\">:</span>  <span class=\"s2\">\"2000.00\"</span><span class=\"p\">,</span> <span class=\"nt\">\"currency\"</span><span class=\"p\">:</span> <span class=\"s2\">\"USD\"</span><span class=\"p\">}},</span>\n            <span class=\"p\">{</span> <span class=\"nt\">\"type\"</span><span class=\"p\">:</span> <span class=\"p\">{</span> <span class=\"nt\">\"coding\"</span><span class=\"p\">:</span> <span class=\"p\">[</span> <span class=\"p\">{</span> <span class=\"nt\">\"system\"</span><span class=\"p\">:</span> <span class=\"s2\">\"https://hl7.org/fhir/valueset-coverage-copay-type\"</span><span class=\"p\">,</span> <span class=\"nt\">\"code\"</span><span class=\"p\">:</span> <span class=\"s2\">\"FamRxInDed\"</span> <span class=\"p\">}]},</span><span class=\"nt\">\"valueMoney\"</span><span class=\"p\">:</span> <span class=\"p\">{</span><span class=\"nt\">\"value\"</span><span class=\"p\">:</span>  <span class=\"s2\">\"1500.00\"</span><span class=\"p\">,</span> <span class=\"nt\">\"currency\"</span><span class=\"p\">:</span> <span class=\"s2\">\"USD\"</span><span class=\"p\">}},</span>\n            <span class=\"p\">{</span> <span class=\"nt\">\"type\"</span><span class=\"p\">:</span> <span class=\"p\">{</span> <span class=\"nt\">\"coding\"</span><span class=\"p\">:</span> <span class=\"p\">[</span> <span class=\"p\">{</span> <span class=\"nt\">\"system\"</span><span class=\"p\">:</span> <span class=\"s2\">\"https://hl7.org/fhir/valueset-coverage-copay-type\"</span><span class=\"p\">,</span> <span class=\"nt\">\"code\"</span><span class=\"p\">:</span> <span class=\"s2\">\"FamOutMax\"</span>  <span class=\"p\">}]},</span><span class=\"nt\">\"valueMoney\"</span><span class=\"p\">:</span> <span class=\"p\">{</span><span class=\"nt\">\"value\"</span><span class=\"p\">:</span> <span class=\"s2\">\"12000.00\"</span><span class=\"p\">,</span> <span class=\"nt\">\"currency\"</span><span class=\"p\">:</span> <span class=\"s2\">\"USD\"</span><span class=\"p\">}},</span>\n            <span class=\"p\">{</span> <span class=\"nt\">\"type\"</span><span class=\"p\">:</span> <span class=\"p\">{</span> <span class=\"nt\">\"coding\"</span><span class=\"p\">:</span> <span class=\"p\">[</span> <span class=\"p\">{</span> <span class=\"nt\">\"system\"</span><span class=\"p\">:</span> <span class=\"s2\">\"https://hl7.org/fhir/valueset-coverage-copay-type\"</span><span class=\"p\">,</span> <span class=\"nt\">\"code\"</span><span class=\"p\">:</span> <span class=\"s2\">\"FamInMax\"</span>   <span class=\"p\">}]},</span><span class=\"nt\">\"valueMoney\"</span><span class=\"p\">:</span> <span class=\"p\">{</span><span class=\"nt\">\"value\"</span><span class=\"p\">:</span> <span class=\"s2\">\"10000.00\"</span><span class=\"p\">,</span> <span class=\"nt\">\"currency\"</span><span class=\"p\">:</span> <span class=\"s2\">\"USD\"</span><span class=\"p\">}},</span>\n            <span class=\"p\">{</span> <span class=\"nt\">\"type\"</span><span class=\"p\">:</span> <span class=\"p\">{</span> <span class=\"nt\">\"coding\"</span><span class=\"p\">:</span> <span class=\"p\">[</span> <span class=\"p\">{</span> <span class=\"nt\">\"system\"</span><span class=\"p\">:</span> <span class=\"s2\">\"https://hl7.org/fhir/valueset-coverage-copay-type\"</span><span class=\"p\">,</span> <span class=\"nt\">\"code\"</span><span class=\"p\">:</span> <span class=\"s2\">\"FamRxOutMax\"</span><span class=\"p\">}]},</span><span class=\"nt\">\"valueMoney\"</span><span class=\"p\">:</span> <span class=\"p\">{</span><span class=\"nt\">\"value\"</span><span class=\"p\">:</span>  <span class=\"s2\">\"3000.00\"</span><span class=\"p\">,</span> <span class=\"nt\">\"currency\"</span><span class=\"p\">:</span> <span class=\"s2\">\"USD\"</span><span class=\"p\">}},</span>\n            <span class=\"p\">{</span> <span class=\"nt\">\"type\"</span><span class=\"p\">:</span> <span class=\"p\">{</span> <span class=\"nt\">\"coding\"</span><span class=\"p\">:</span> <span class=\"p\">[</span> <span class=\"p\">{</span> <span class=\"nt\">\"system\"</span><span class=\"p\">:</span> <span class=\"s2\">\"https://hl7.org/fhir/valueset-coverage-copay-type\"</span><span class=\"p\">,</span> <span class=\"nt\">\"code\"</span><span class=\"p\">:</span> <span class=\"s2\">\"FamRxInMax\"</span> <span class=\"p\">}]},</span><span class=\"nt\">\"valueMoney\"</span><span class=\"p\">:</span> <span class=\"p\">{</span><span class=\"nt\">\"value\"</span><span class=\"p\">:</span>  <span class=\"s2\">\"2000.00\"</span><span class=\"p\">,</span> <span class=\"nt\">\"currency\"</span><span class=\"p\">:</span> <span class=\"s2\">\"USD\"</span><span class=\"p\">}}</span>\n          <span class=\"p\">]</span>\n        <span class=\"p\">},</span>\n        <span class=\"p\">{</span>\n          <span class=\"nt\">\"resourceType\"</span><span class=\"p\">:</span> <span class=\"s2\">\"Organization\"</span><span class=\"p\">,</span>\n          <span class=\"nt\">\"id\"</span><span class=\"p\">:</span> <span class=\"s2\">\"2222222222\"</span><span class=\"p\">,</span>\n          <span class=\"nt\">\"identifier\"</span><span class=\"p\">:</span> <span class=\"p\">[{</span><span class=\"nt\">\"system\"</span><span class=\"p\">:</span> <span class=\"s2\">\"http://hl7.org/fhir/us/carin-bb/CodeSystem-C4BBIdentifierType.html\"</span><span class=\"p\">,</span><span class=\"nt\">\"code\"</span><span class=\"p\">:</span> <span class=\"s2\">\"payerid\"</span><span class=\"p\">,</span><span class=\"nt\">\"value\"</span><span class=\"p\">:</span> <span class=\"s2\">\"45002\"</span> <span class=\"p\">}],</span>\n          <span class=\"nt\">\"name\"</span><span class=\"p\">:</span> <span class=\"s2\">\"Acme Insurance Co\"</span><span class=\"p\">,</span>\n          <span class=\"nt\">\"contact\"</span><span class=\"p\">:</span> <span class=\"s2\">\"http://acmeinsurance.com/contactInfo\"</span>\n        <span class=\"p\">}</span>\n      <span class=\"p\">]</span>\n    <span class=\"p\">}</span>\n  <span class=\"p\">}</span>\n<span class=\"p\">}</span>\n</code></pre></div>\n<p><a href=\"/user_uploads/10155/6gm6Zh9RyBwZY9-UZD7YpB81/Screen-Shot-2022-01-14-at-2.43.37-PM.png\">Screen-Shot-2022-01-14-at-2.43.37-PM.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/6gm6Zh9RyBwZY9-UZD7YpB81/Screen-Shot-2022-01-14-at-2.43.37-PM.png\" title=\"Screen-Shot-2022-01-14-at-2.43.37-PM.png\"><img src=\"/user_uploads/10155/6gm6Zh9RyBwZY9-UZD7YpB81/Screen-Shot-2022-01-14-at-2.43.37-PM.png\"></a></div>",
        "id": 268063944,
        "sender_full_name": "Vitor Pamplona",
        "timestamp": 1642190251
    },
    {
        "content": "<p>If the group is willing to transfer non FHIR-based payloads in the QR, then the QR size can be further cut in half  for the same payload. As you can see, most of the QR is being occupied by overhead of FHIR. The content itself is quite minimal</p>",
        "id": 268065073,
        "sender_full_name": "Vitor Pamplona",
        "timestamp": 1642190727
    },
    {
        "content": "<p>Neat! I really do appreciate the very concrete suggestions and example here. I should say though:  keep in mind that the changes you're describing would be significant breaking changes to the SHC spec;  FHIR can't turn extensions into regular fields;  FHIR also expects <code>Bundle.entry.fullUrl</code>. And at the end of the day even with these kinds of tweaks we still hit a capacity wall. Yes, overhead of FHIR is significant here; but other approaches require interop compromises or limit the ability to extend the data payloads or introduce new operational compelxity.</p>",
        "id": 268065820,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1642191084
    },
    {
        "content": "<p>Agree. For the new fields, they would need to get those extensions into the usual FHIR process to turn them into fields. I think it is worth doing. They should have been there already.</p>",
        "id": 268065959,
        "sender_full_name": "Vitor Pamplona",
        "timestamp": 1642191151
    },
    {
        "content": "<p>Agree, but for context the \"usual FHIR process\" will take O(years)</p>",
        "id": 268066306,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1642191330
    },
    {
        "content": "<p>In terms of the non-Fhir Payload,  if a given Profile is \"enforced\" by the spec (similar to how Immunizations on SHC have a specific /constrict profile), then the extensibility is already compromised. An intermediary StructureMap could serve as a leaner version of the same payload without leaving the \"FHIR Realm\".</p>",
        "id": 268066436,
        "sender_full_name": "Vitor Pamplona",
        "timestamp": 1642191377
    },
    {
        "content": "<p>Basically, doing what the EU does. From FHIR to the EU DCC and then Back to FHIR when the verifier loads it.</p>",
        "id": 268066471,
        "sender_full_name": "Vitor Pamplona",
        "timestamp": 1642191394
    },
    {
        "content": "<p>Brotli compression is something you can add to the SHC spec very quickly. </p>\n<div class=\"codehilite\" data-code-language=\"JavaScript\"><pre><span></span><code><span class=\"k\">if</span> <span class=\"p\">(</span><span class=\"nx\">header</span><span class=\"p\">.</span><span class=\"nx\">zip</span> <span class=\"o\">==</span> <span class=\"s1\">'DEF'</span><span class=\"p\">)</span> <span class=\"p\">{</span>\n   <span class=\"c1\">// zlib compression/decompression</span>\n<span class=\"p\">}</span> <span class=\"k\">else</span>  <span class=\"k\">if</span> <span class=\"p\">(</span><span class=\"nx\">header</span><span class=\"p\">.</span><span class=\"nx\">zip</span> <span class=\"o\">==</span> <span class=\"s1\">'BR'</span><span class=\"p\">)</span> <span class=\"p\">{</span>\n  <span class=\"c1\">// Brotli</span>\n<span class=\"p\">}</span>\n</code></pre></div>",
        "id": 268066843,
        "sender_full_name": "Vitor Pamplona",
        "timestamp": 1642191556
    },
    {
        "content": "<p>Adding it to the spec is easy, but adding it to every implementation not so much. (We did comparison testing early on with example payloads and chose zlib as a compromise between wide/easy support and perf.)</p>",
        "id": 268067105,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1642191656
    },
    {
        "content": "<p>Agreed we may want more flexibily here, but the backwards compatibility story is tricky. Probably would need to introduce a new SHC version, and how does that play out for consumers who just seee a QR?</p>",
        "id": 268067275,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1642191727
    },
    {
        "content": "<p>Verifiers are super used to the idea of certain QRs not working or even straight up crashing the app. Every issuer has a little customization that we need to adapt the code to. So, I wouldn't be that worried about it.</p>",
        "id": 268067613,
        "sender_full_name": "Vitor Pamplona",
        "timestamp": 1642191918
    },
    {
        "content": "<p>Another way to remove the FHIR Overhead is by using templates. Both CBOR-LD and JSONXT can kill those large field names and system values automatically. If the SHC creates a standardized \"Profile\" for each card type, the template would just be a coded version of that Profile. It would enforce that certain fields are and are not used and because it knows all possible valid combinations, it can encode most of these common strings into fixed integers, significantly reducing the payload size.</p>",
        "id": 268068711,
        "sender_full_name": "Vitor Pamplona",
        "timestamp": 1642192278
    },
    {
        "content": "<p>Encoding JSON property name strings into fixed integers was helpful but had a surprisingly small effect on payload size when we tested this (&lt;10% on realistic examples if I recall)</p>",
        "id": 268081562,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1642199074
    },
    {
        "content": "<p>Profiling everything up front is super powerful but you lose flexibility; at that point, you can throw away FHIR models in the payload altogether (like EU DCC)</p>",
        "id": 268081632,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1642199123
    },
    {
        "content": "<blockquote>\n<p>payload size when we tested this (&lt;10% on realistic examples if I recall)</p>\n</blockquote>\n<p>It depends on how many times field names and values duplicate. Zlib takes care of duplications really well. So, the benefit is bigger when you have extensions, for instance, because each url is different. So, for cases with multiple immunizations of the same manufacturer, the zlib does a good job. CBOR-LD keeps the hierarchy and JSONXT fully removes field names and flattens the JSON out (Basically turning into a CSV file), bringing more gains.</p>",
        "id": 268084653,
        "sender_full_name": "Vitor Pamplona",
        "timestamp": 1642200939
    },
    {
        "content": "<p>But, for JSONXT to work well, the number of filled fields needs to be bigger than the number of nulls, which makes it horrible to encode the FHIR payloads without a specific Profile.</p>",
        "id": 268084895,
        "sender_full_name": "Vitor Pamplona",
        "timestamp": 1642201082
    },
    {
        "content": "<blockquote>\n<blockquote>\n<p>payload size when we tested this (&lt;10% on realistic examples if I recall)</p>\n</blockquote>\n</blockquote>\n<blockquote>\n<p>It depends on how many times field names and values duplicate.</p>\n</blockquote>\n<p>Yes, this is why I specified realistic payloads</p>",
        "id": 268085092,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1642201201
    }
]