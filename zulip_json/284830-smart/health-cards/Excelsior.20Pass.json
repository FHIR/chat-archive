[
    {
        "content": "<p>Can you clarify the purpose of this stream? Is it possible to consolidate with <a class=\"stream\" data-stream-id=\"284830\" href=\"/#narrow/stream/284830-smart.2Fhealth-cards\">#smart/health-cards</a> given that Excelsior Pass now supports SMART Health Cards?</p>",
        "id": 264318915,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1639064496
    },
    {
        "content": "<p>\"Excelsior Pass\" is not an SHC. \"Excelsior Pass Plus\" is SHC. I am not sure which one the author is referring to.</p>",
        "id": 264321289,
        "sender_full_name": "Vitor Pamplona",
        "timestamp": 1639065443
    },
    {
        "content": "<p>we are trying to verify our employees excelsior passes through <a href=\"https://github.com/smart-on-fhir/health-cards-dev-tools\">https://github.com/smart-on-fhir/health-cards-dev-tools</a><br>\nbut issuer we are not able to verify ... in fact there is no QR numeric showing after scanning the image.. but it shows directly raw data</p>",
        "id": 264321933,
        "sender_full_name": "Poonam Kariya",
        "timestamp": 1639065668
    },
    {
        "content": "<p>How can we verify the excelsior passes through nodejs source code including issuers verification</p>",
        "id": 264322150,
        "sender_full_name": "Poonam Kariya",
        "timestamp": 1639065740
    },
    {
        "content": "<p>I see. What you have is an Excelsior Pass (which is not a SmartHealth Card). See if you can ask the person to send you a QR from the Excelsior Pass PLUS app.</p>",
        "id": 264322522,
        "sender_full_name": "Vitor Pamplona",
        "timestamp": 1639065862
    },
    {
        "content": "<p>More info: <a href=\"https://epass.ny.gov/home\">https://epass.ny.gov/home</a></p>",
        "id": 264322638,
        "sender_full_name": "Vitor Pamplona",
        "timestamp": 1639065902
    },
    {
        "content": "<p>So we got QR image from our employee, we scanned it through SHC framework and instead of encrypted values we directly got the raw data like DOB, First Name, Last Name, Issuance Date and Expiration Date but issuer information we are not sure how can we verify it</p>",
        "id": 264323934,
        "sender_full_name": "Poonam Kariya",
        "timestamp": 1639066331
    },
    {
        "content": "<p>we tried t0 scan it  Excelsior Pass Plus app directly and it shows only name, DOB and status VAlid or not</p>",
        "id": 264324167,
        "sender_full_name": "Poonam Kariya",
        "timestamp": 1639066416
    },
    {
        "content": "<p>Correct. The QR you have is just a pass. It doesn't include vaccination information.</p>",
        "id": 264324353,
        "sender_full_name": "Vitor Pamplona",
        "timestamp": 1639066498
    },
    {
        "content": "<p>Your Employee needs to generate an Excelsior Pass <strong>PLUS</strong> if you want to process with the SmartHealth Cards SDK</p>",
        "id": 264324435,
        "sender_full_name": "Vitor Pamplona",
        "timestamp": 1639066527
    },
    {
        "content": "<p>all we need to do is find out nodejs code so we can deploy it on Google Cloud firebase function and automatically as soon as our employees upload their QR images, in backend it verifies the card including issuer and in response we need first name, last name, Dob, first date of dose , 2nd date of dose, vaccine company name like moderna or pfizer etc.</p>",
        "id": 264324459,
        "sender_full_name": "Poonam Kariya",
        "timestamp": 1639066539
    },
    {
        "content": "<p>oh ok.. I understand now. this information is really helpful.. we will try soon and will get back. <br>\ncheers</p>",
        "id": 264324602,
        "sender_full_name": "Poonam Kariya",
        "timestamp": 1639066587
    },
    {
        "content": "<p>I am glad it helped.</p>",
        "id": 264324658,
        "sender_full_name": "Vitor Pamplona",
        "timestamp": 1639066614
    },
    {
        "content": "<p>can you pls share the link of the excelsior pass plus mobile app?</p>",
        "id": 264325262,
        "sender_full_name": "Poonam Kariya",
        "timestamp": 1639066834
    },
    {
        "content": "<p>I don't think the app generates the QR. They need to go here: <a href=\"https://epass.ny.gov/home\">https://epass.ny.gov/home</a></p>",
        "id": 264326937,
        "sender_full_name": "Vitor Pamplona",
        "timestamp": 1639067464
    },
    {
        "content": "<p>ok. great. thanks to confirm</p>",
        "id": 264328546,
        "sender_full_name": "Poonam Kariya",
        "timestamp": 1639068082
    },
    {
        "content": "<p>So as it is mentioned in the description here is the wallet where user can store the pass and generate it <a href=\"https://play.google.com/store/apps/details?id=gov.ny.its.healthpassport.wallet\">https://play.google.com/store/apps/details?id=gov.ny.its.healthpassport.wallet</a></p>",
        "id": 264330750,
        "sender_full_name": "Poonam Kariya",
        "timestamp": 1639068971
    },
    {
        "content": "<p>Does it generate the Plus pass as well? Or just stores it?</p>",
        "id": 264333745,
        "sender_full_name": "Vitor Pamplona",
        "timestamp": 1639070105
    },
    {
        "content": "<p>Well. not sure.. we are going to check it soon with card holder so we can observe the process they need to follow to store or generate the excelsior pass plus</p>",
        "id": 264445784,
        "sender_full_name": "Poonam Kariya",
        "timestamp": 1639142570
    },
    {
        "content": "<p>I think this steam got started by accident and was supposed to be a topic -- I'll migrate to <a class=\"stream\" data-stream-id=\"284830\" href=\"/#narrow/stream/284830-smart.2Fhealth-cards\">#smart/health-cards</a></p>",
        "id": 264583643,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1639255536
    },
    {
        "content": "<p>This topic was moved here from <a class=\"stream-topic\" data-stream-id=\"309250\" href=\"/#narrow/stream/309250-EXCELSIOR-PASS/topic/stream.20events\">#EXCELSIOR PASS &gt; stream events</a> by <span class=\"user-mention silent\" data-user-id=\"191315\">Josh Mandel</span></p>",
        "id": 264583646,
        "sender_full_name": "Notification Bot",
        "timestamp": 1639255560
    },
    {
        "content": "<p>Hello Vitor, <br>\nGreat news to share.. we asked end user to generate excelsior plus pass from the suggested web page and it is working fine and giving response of verification status with required details. however the SDK give following messages as response  as well:<br>\nAny inputs on the following errors/ alerts?</p>\n<p>\"alerts\": [<br>\n        \"fhirBundle.entry[1].resourceImmunization.patient = \\\"Patient/resource:0\\\" (Reference) should be short resource-scheme URIs (e.g., {\\\"patient\\\": {\\\"reference\\\": \\\"resource:0\\\"}})\",<br>\n        \"fhirBundle.entry[1].resourceImmunization.patient = \\\"Patient/resource:0\\\" (Reference) is not defined by an entry.fullUrl [resource:0,resource:1,resource:2]\",<br>\n        \"fhirBundle.entry[2].resourceImmunization.patient = \\\"Patient/resource:0\\\" (Reference) should be short resource-scheme URIs (e.g., {\\\"patient\\\": {\\\"reference\\\": \\\"resource:0\\\"}})\",<br>\n        \"fhirBundle.entry[2].resourceImmunization.patient = \\\"Patient/resource:0\\\" (Reference) is not defined by an entry.fullUrl [resource:0,resource:1,resource:2]\",<br>\n        \"fhirBundle.entry[1].resourceImmunization.patient = \\\"Patient/resource:0\\\" (Reference) should be short resource-scheme URIs (e.g., {\\\"patient\\\": {\\\"reference\\\": \\\"resource:0\\\"}})\",<br>\n        \"fhirBundle.entry[1].resourceImmunization.patient = \\\"Patient/resource:0\\\" (Reference) is not defined by an entry.fullUrl [resource:0,resource:1,resource:2]\",<br>\n        \"fhirBundle.entry[2].resourceImmunization.patient = \\\"Patient/resource:0\\\" (Reference) should be short resource-scheme URIs (e.g., {\\\"patient\\\": {\\\"reference\\\": \\\"resource:0\\\"}})\",<br>\n        \"fhirBundle.entry[2].resourceImmunization.patient = \\\"Patient/resource:0\\\" (Reference) is not defined by an entry.fullUrl [resource:0,resource:1,resource:2]\"<br>\n    ]<br>\n}</p>",
        "id": 264694032,
        "sender_full_name": "Poonam Kariya",
        "timestamp": 1639395463
    },
    {
        "content": "<p>hum... strange. Which SDK are you using?</p>",
        "id": 264704980,
        "sender_full_name": "Vitor Pamplona",
        "timestamp": 1639402037
    },
    {
        "content": "<p>It looks like you are using the <a href=\"https://github.com/smart-on-fhir/health-cards-dev-tools\">dev tools</a>. First, it should be noted that these tools are not meant to verify end-user cards, but rather to help issuers validate their implementation. Second, the error you are seeing is because the card's patient references (in the FHIR bundle) are referencing <code>patient/resource:0</code> instead of the short-form <code>resource:0</code>.</p>",
        "id": 264718408,
        "sender_full_name": "Christian Paquin",
        "timestamp": 1639407716
    },
    {
        "content": "<p>(to be clear <code>patient/resource:0</code> is invalid, in addition to being longer.)</p>",
        "id": 264721279,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1639408844
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191315\">@Josh Mandel</span> Maybe together with the reissuance URL, the SHC could require each issuer to provide production-based test QRs on some interface. This would help assert compliance to each issuer's crazy implementation individually.</p>",
        "id": 264721871,
        "sender_full_name": "Vitor Pamplona",
        "timestamp": 1639409079
    },
    {
        "content": "<p>Most issuers and verifiers that I see are assembling these FHIR payloads by hand as opposed to using a FHIR engine to automatically generate/load them from/into FHIR objects. California's open source issuer is classic example: <a href=\"https://github.com/StateOfCalifornia/DigitalCovid19VaccineRecord-API/blob/9792f01862cd788962bed581d9d5185b2d7986cf/Infrastructure/CredentialCreator.cs#L40\">https://github.com/StateOfCalifornia/DigitalCovid19VaccineRecord-API/blob/9792f01862cd788962bed581d9d5185b2d7986cf/Infrastructure/CredentialCreator.cs#L40</a></p>",
        "id": 264722600,
        "sender_full_name": "Vitor Pamplona",
        "timestamp": 1639409390
    },
    {
        "content": "<p>Indeed, we are looking  at adding this as part of the workflow for joining the VCI directory. It doesn't quite make sense at the specification level, because it's not enforceable there but for a given trust framework it feels like a good fit.</p>",
        "id": 264732500,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1639413240
    },
    {
        "content": "<p>(And indeed, the logic you point to in the California implementation for generating display names on Google Wallet wrappers around SHCs is a good example of this kind of thing --  that logic would quickly fail if applied to arbitrary SHC payloads (e.g., it's never looking at name.text), but of course,  it is only being applied in a very limited context to SHC payloads that California's system has created.)</p>",
        "id": 264732922,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1639413394
    },
    {
        "content": "<p>But not everyone wants to join the VCI directory :(</p>",
        "id": 264740291,
        "sender_full_name": "Vitor Pamplona",
        "timestamp": 1639416343
    },
    {
        "content": "<p>I do think the spec could help define the API and the test schema just like the spec enforces Canada to publish keys on their servers (they never wanted to do that). It's not perfect, but it defines the basic language that is independent of which trust registry one subscribes to.</p>",
        "id": 264740440,
        "sender_full_name": "Vitor Pamplona",
        "timestamp": 1639416387
    },
    {
        "content": "<p>We do this -- IG at <a href=\"https://vci.org/ig/vaccination-and-testing\">https://vci.org/ig/vaccination-and-testing</a> (it defines the data schema). It just doesn't impose requirements about publishing examples, which I'm not sure would be workable  in the abstract.</p>",
        "id": 264740723,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1639416497
    },
    {
        "content": "<p>Ultimately an \"issuer\" can fail to follow the spec in many ways (by not hosting keys, by generating invalid payloads, etc), so part of the role of a trust framework is making an assessment of which issuers are \"doing it right\".</p>",
        "id": 264741035,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1639416630
    },
    {
        "content": "<p>I see. I would use the EU's work as a reference. Those datasets are awesome: <a href=\"https://github.com/ehn-dcc-development/dcc-testdata\">https://github.com/ehn-dcc-development/dcc-testdata</a></p>",
        "id": 264741272,
        "sender_full_name": "Vitor Pamplona",
        "timestamp": 1639416755
    },
    {
        "content": "<p>that is very nice</p>",
        "id": 264749748,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1639420033
    },
    {
        "content": "<p>Hello,<br>\nThe errors mentioned above are the result of the SHC/Health Cards dev tools... see ref links given here.<br>\nWe are testing on local system  following Github source code to verify our employee's vaccination status and getting response like 1st date of does, 2nd date of dose and vaccine company names:<br>\n<a href=\"https://demo-portals.smarthealth.cards/VerifierPortal.html\">https://demo-portals.smarthealth.cards/VerifierPortal.html</a><br>\n<a href=\"https://github.com/smart-on-fhir/health-cards-dev-tools\">https://github.com/smart-on-fhir/health-cards-dev-tools</a></p>\n<p>Please guide if there is specific source code developed in nodejs,typescript/javascript, that  we can use to verify the status of the bulk vaccination cards of our employees. We need to deploy the final source code as a REST Api to google cloud - Firebase function.</p>\n<p>Thank you in advance.</p>",
        "id": 264844703,
        "sender_full_name": "Poonam Kariya",
        "timestamp": 1639482211
    },
    {
        "content": "<p>As Christian pointed out, the dev tools repository is not intended for use in this kind of validation scenario. Because it's designed to provide helpful feedback for issuers, it will do things like speculatively parse payloads and push through errors to see what else might be wrong, (These are good behaviors for debugging at development time, but unsuitable for real-world verification in a security sensitive environment).</p>\n<p>You may want to borrow some ideas or patterns from this tool, without wrapping/running it directly for your use case.</p>\n<p>Perhaps others here may be able to recommend additional tools suitable for real-world use? (I think the key would be to keep things very narrow and concrete. Like, a simple script to evaluate whether a SHC is signed correctly by a trusted issuer and return the FHIR Bundle; then another script to evaluate a FHIR Bundle to determine whether the immunization history meets your requirements).</p>",
        "id": 264862806,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1639491169
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"465799\">@Samarth</span></p>",
        "id": 265906770,
        "sender_full_name": "Priyanka Yadav",
        "timestamp": 1640257738
    }
]