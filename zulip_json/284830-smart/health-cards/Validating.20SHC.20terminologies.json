[
    {
        "content": "<p>Validating Vaccine Coding Systems </p>\n<ul>\n<li>GTIN: there's no way I can validate a GTIN? Does anyone have any ideas how I'd do that?</li>\n<li>CVX: I think is working fine</li>\n<li>AIR: System URI is <a href=\"https://www.humanservices.gov.au/organisations/health-professionals/enablers/air-vaccine-code-formats\">https://www.humanservices.gov.au/organisations/health-professionals/enablers/air-vaccine-code-formats</a>. I will figure out how to get this working </li>\n<li>SNOMED CT: all supported as far as I know. The validation comments say that <a href=\"http://tx.fhir.org\">tx.fhir.org</a> doesn't host the UK edition, but is there UK users of this thing? </li>\n<li>ICD-11: Time for me to host it, I guess. We've been doing license negotiations slowly with WHO, which is why I haven't loaded it on <a href=\"http://tx.fhir.org\">tx.fhir.org</a> </li>\n<li>ATC: The ATC expansion is wrong. <span class=\"user-mention\" data-user-id=\"191405\">@Rob Hausam</span> this appears to be because the source is incomplete?</li>\n</ul>\n<p>The validation instructions says \"GLN\" is not supported, but I didn't find any reference to that?</p>",
        "id": 251655411,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1630547948
    },
    {
        "content": "<p>AIR is fully supported now.</p>",
        "id": 251700243,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1630582066
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> thanks, this is great! I will test with AIR.</p>\n<p><strong>Re: GTIN</strong>, we asked GS1 (the org responsible for GTIN) and there is not a central list of GTINs anywhere. My understanding is that  an organization can request a GTIN from the GS1 office in their jurisdiction (e.g. GS1 United States), and that org is assigned a prefix as a \"namespace\" of sorts. What they do inside that namespace is up to them. So given a GTIN it's possible to know who owns it using something like <a href=\"https://gepir.gs1.org/index.php/search-by-gtin\">https://gepir.gs1.org/index.php/search-by-gtin</a>, but not possible to validate beyond that.</p>\n<p>Some jurisdictions do have GTIN databases for drugs, like in the UK: <a href=\"https://services.nhsbsa.nhs.uk/dmd-browser/code-lookup\">https://services.nhsbsa.nhs.uk/dmd-browser/code-lookup</a></p>\n<p>In the US, GTINs are the same as National Drug Codes so there is a database for that.</p>\n<p>If you want to follow up with the GS1 folks to get more information, I'm happy to put you in touch with our contact there.</p>",
        "id": 251751271,
        "sender_full_name": "Max Masnick",
        "timestamp": 1630603070
    },
    {
        "content": "<p>I'm talking to GS1 central. But presumably the list of possible GTINs for vaccines is a relatively short list. When would you use a GTIN instead of a clinical code?</p>",
        "id": 251770362,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1630610016
    },
    {
        "content": "<p>more, I don't understand this. The guidance says \"Verifiers SHALL be able to meaningfully process and interpret codes from ALL of the systems listed above.\" And then it rules display out for GTIN. So you just get a raw GTIN. </p>\n<p>How can any system conform to this? How can it be useful? How can you possibly do anything presented with a GTIN, even if you can somehow magically get a display?</p>",
        "id": 251934925,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1630699482
    },
    {
        "content": "<p>In NZMT, GTINs are mapped to CTTP (and some TPUU) codes. So far, there's only a single mapping to a COVID-19 vaccine. However, within the NZ ePrescription Service, GTINs don't come with descriptions, so are used purely as supplementary identifiers (and the FHIR spec states that \"GTINs may be used in both Codes and Identifiers\").</p>",
        "id": 251946054,
        "sender_full_name": "Peter Jordan",
        "timestamp": 1630705532
    },
    {
        "content": "<blockquote>\n<p>When would you use a GTIN instead of a clinical code?</p>\n</blockquote>\n<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> when we were developing the IG, we couldn't find any terminology other than GTIN that could identify specific formulations of all (or at least many of) the various vaccines worldwide.</p>\n<p>It is possible to look up the manufacturer associated with a GTIN even if you don't know the specific product that GTIN refers to. When using GTIN in conjunction with a less specific code like <code>ICD11#XM0GQ8</code> (\"COVID-19 vaccine, RNA based\"), this can identify the formulation so Verifiers can determine if the right vaccination schedule was followed.</p>\n<p>It looks like <a href=\"https://www.cdc.gov/vaccines/programs/iis/COVID-19-related-codes.html\">CVX now includes a bunch of additional vaccines now</a>, so this may be a better choice now for most/all SHCs so a single code can be used to identify the vaccine.</p>",
        "id": 252317949,
        "sender_full_name": "Max Masnick",
        "timestamp": 1631026370
    },
    {
        "content": "<blockquote>\n<p>The guidance says \"Verifiers SHALL be able to meaningfully process and interpret codes from ALL of the systems listed above.\" And then it rules display out for GTIN. So you just get a raw GTIN.</p>\n</blockquote>\n<p>If only the GTIN is provided (e.g., they don't also have an ICD11 or SNOMED code), the Verifier could look up the manufacturer associated with the GTIN and display \"unknown vaccine from Acme, Inc.\".</p>\n<p>If GTINs are used by Issuers of SHCs then someone will presumably come up with a list of valid GTINs with human-readable descriptions...but I agree this could be hard as GTINs may differ country by country for the same product</p>",
        "id": 252318957,
        "sender_full_name": "Max Masnick",
        "timestamp": 1631026709
    },
    {
        "content": "<blockquote>\n<p>the Verifier could look up the manufacturer associated with the GTIN</p>\n</blockquote>\n<p>how? so far GS1 have told me that you can't do this by API without commercial arrangements...</p>",
        "id": 252363238,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1631044704
    },
    {
        "content": "<p>And at a minimum, the specification should explain the issues and provisos around the use of GTINs</p>",
        "id": 252363370,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1631044757
    },
    {
        "content": "<blockquote>\n<p>And at a minimum, the specification should explain the issues and provisos around the use of GTINs</p>\n</blockquote>\n<p><span aria-label=\"thumbs up\" class=\"emoji emoji-1f44d\" role=\"img\" title=\"thumbs up\">:thumbs_up:</span>  We were in contact with GS1 when developing the IG so I'm getting back in touch with them to see what they recommend.</p>",
        "id": 252435521,
        "sender_full_name": "Max Masnick",
        "timestamp": 1631095960
    },
    {
        "content": "<blockquote>\n<p>It looks like <a href=\"https://www.cdc.gov/vaccines/programs/iis/COVID-19-related-codes.html\">CVX now includes a bunch of additional vaccines now</a>, so this may be a better choice now for most/all SHCs so a single code can be used to identify the vaccine.</p>\n</blockquote>\n<p>There's at least a few countries doing exactly this, notably multiple Canadian provinces. May we consider stronger guidance in the specification to elevate CVX as the best choice for issuers in the absence of a obvious candidate (e.g. AIR), even when used issued and/or verified outside of the US?</p>",
        "id": 252701359,
        "sender_full_name": "Isaac Vetter",
        "timestamp": 1631224037
    },
    {
        "content": "<p>I would love to see that happen. There is <em>immense</em> confusion, and we have almost as many <em>vocabularies</em> as we have <em>vaccine products</em> at this point, with substantial overlap.</p>",
        "id": 252701632,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1631224176
    },
    {
        "content": "<p><a href=\"https://jira.hl7.org/browse/FHIR-33475\">https://jira.hl7.org/browse/FHIR-33475</a></p>",
        "id": 252702303,
        "sender_full_name": "Isaac Vetter",
        "timestamp": 1631224532
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191315\">Josh Mandel</span> <a href=\"#narrow/stream/284830-smart.2Fhealth-cards/topic/Validating.20SHC.20terminologies/near/252701632\">said</a>:</p>\n<blockquote>\n<p>I would love to see that happen. There is <em>immense</em> confusion, and we have almost as many <em>vocabularies</em> as we have <em>vaccine products</em> at this point, with substantial overlap.</p>\n</blockquote>\n<p>e.g. <a href=\"https://terminz.azurewebsites.net/fhir/ValueSet/covid-19-vaccines/$expand\">https://terminz.azurewebsites.net/fhir/ValueSet/covid-19-vaccines/$expand</a></p>",
        "id": 252702387,
        "sender_full_name": "Peter Jordan",
        "timestamp": 1631224576
    },
    {
        "content": "<p>Thanks <span class=\"user-mention\" data-user-id=\"191315\">@Josh Mandel</span> and <span class=\"user-mention\" data-user-id=\"191864\">@Isaac Vetter</span> -- we'll look at prototyping this approach. I would also love to simplify the vocabulary given the changes since the spring.</p>",
        "id": 252764392,
        "sender_full_name": "Max Masnick",
        "timestamp": 1631269586
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191364\">@Peter Jordan</span> for NZ, do you know if CVX is typically used?</p>\n<p>And what's this code system? <code>http://nzmt.org.nz    47407721000116102   Comirnaty (Pfizer-BioNTech) (trade product)</code></p>",
        "id": 252764659,
        "sender_full_name": "Max Masnick",
        "timestamp": 1631269758
    },
    {
        "content": "<p>CVX is the code system used in NZ for recording vaccines used in medications.  <a href=\"http://nzmt.org.nz\">http://nzmt.org.nz</a> is the NZ Medicines Terminology used, not surprisingly, for coding medications.</p>",
        "id": 252840830,
        "sender_full_name": "Peter Jordan",
        "timestamp": 1631303583
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191364\">Peter Jordan</span> <a href=\"#narrow/stream/284830-smart.2Fhealth-cards/topic/Validating.20SHC.20terminologies/near/252840830\">said</a>:</p>\n<blockquote>\n<p>CVX is the code system used in NZ for recording vaccines used in medications.  <a href=\"http://nzmt.org.nz\">http://nzmt.org.nz</a> is the NZ Medicines Terminology used, not surprisingly, for coding medications.</p>\n</blockquote>\n<p>Ok, so CVX is what would be in a SMART Health Card then?</p>",
        "id": 252841949,
        "sender_full_name": "Max Masnick",
        "timestamp": 1631304031
    },
    {
        "content": "<p>Yes - I certainly hope so, unless our Ministry of Health decides to map them to SNOMED CT (possible) or ICD-11 (unlikely).</p>",
        "id": 252848656,
        "sender_full_name": "Peter Jordan",
        "timestamp": 1631307093
    },
    {
        "content": "<p>The full version of ATC (from May 2020) is now available on <a href=\"http://tx.fhir.org\">tx.fhir.org</a>.  It took a while to get there, but now that the process is worked out, when we have get further updates to the source the updates on the server should be much easier and quicker.</p>",
        "id": 257680619,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1634296317
    },
    {
        "content": "<p>Hi,<br>\nWe are trying to pass canada pass to smart health card SDK \"<a href=\"https://github.com/smart-on-fhir/health-cards-dev-tools\">https://github.com/smart-on-fhir/health-cards-dev-tools</a>\"<br>\nand we are facing this issue for one canada pass and FHIR bundle is not showing results<br>\nOther two canada pass are successfully showing results.<br>\nHow can we get FHIR bundle content even if issuer or public key is not verified by JWS?<br>\nHow we can resolve this error ? can we find the list of issuers public keys from Canada?<br>\n\"errors\": [<br>\n\"JWS verification failed: can't find key with 'kid' = qFdl0tDZK9JAWP6g9_cAv57c3KWxMKwvxCrRVSzcxvM in issuer set\",<br>\n\"<a href=\"http://JWS.payload.vc\">JWS.payload.vc</a> shouldn't have a @context property\",<br>\n\"JWS.payload.vc.type : 'VerifiableCredential' is not required and may be omitted to conserve space\",<br>\n\"Schema: /type error : must be equal to one of the allowed values\",<br>\n\"Schema: property must must match exactly one schema in oneOf\",<br>\n\"Schema: /type error : must be equal to one of the allowed values\",<br>\n\"Schema: property must must match exactly one schema in oneOf\"</p>\n<p>we are checking it on <a href=\"https://demo-portals.smarthealth.cards/VerifierPortal.html\">https://demo-portals.smarthealth.cards/VerifierPortal.html</a> and we have implemented this SDK already<br>\n<a href=\"https://github.com/smart-on-fhir/health-cards-dev-tools\">https://github.com/smart-on-fhir/health-cards-dev-tools</a></p>\n<p>Hi,<br>\nWe are trying to pass canada pass to smart health card SDK \"<a href=\"https://github.com/smart-on-fhir/health-cards-dev-tools\">https://github.com/smart-on-fhir/health-cards-dev-tools</a>\"<br>\nand we are facing this issue for one canada pass and FHIR bundle is not showing results<br>\nOther two canada pass are successfully showing results.<br>\nHow can we get FHIR bundle content even if issuer or public key is not verified by JWS?<br>\nHow we can resolve this error ? can we find the list of issuers public keys from Canada?<br>\n\"errors\": [<br>\n\"JWS verification failed: can't find key with 'kid' = qFdl0tDZK9JAWP6g9_cAv57c3KWxMKwvxCrRVSzcxvM in issuer set\",<br>\n\"<a href=\"http://JWS.payload.vc\">JWS.payload.vc</a> shouldn't have a @context property\",<br>\n\"JWS.payload.vc.type : 'VerifiableCredential' is not required and may be omitted to conserve space\",<br>\n\"Schema: /type error : must be equal to one of the allowed values\",<br>\n\"Schema: property must must match exactly one schema in oneOf\",<br>\n\"Schema: /type error : must be equal to one of the allowed values\",<br>\n\"Schema: property must must match exactly one schema in oneOf\"</p>\n<p>we are checking it on <a href=\"https://demo-portals.smarthealth.cards/VerifierPortal.html\">https://demo-portals.smarthealth.cards/VerifierPortal.html</a> and we have implemented this SDK already<br>\n<a href=\"https://github.com/smart-on-fhir/health-cards-dev-tools\">https://github.com/smart-on-fhir/health-cards-dev-tools</a></p>",
        "id": 264446566,
        "sender_full_name": "Poonam Kariya",
        "timestamp": 1639142889
    },
    {
        "content": "<p>Canadian provinces rotate KIDs frequently. You will need to manage a trust registry with cached keys of the past in order to successfully verify Canadian SHCs</p>",
        "id": 264447651,
        "sender_full_name": "Vitor Pamplona",
        "timestamp": 1639143404
    },
    {
        "content": "<p>That's what we do on our <a href=\"https://github.com/Path-Check/shc-sdk.js\">SDK</a>, it pings a cache of keys we maintain to make sure keys can always be found even if the issuer disappears.</p>",
        "id": 264447845,
        "sender_full_name": "Vitor Pamplona",
        "timestamp": 1639143489
    },
    {
        "content": "<p>We happen to have the key <code>qFdl0tDZK9JAWP6g9_cAv57c3KWxMKwvxCrRVSzcxvM</code> on our registry. See if this verifier helps: <a href=\"https://github.pathcheck.org/verify.html\">https://github.pathcheck.org/verify.html</a></p>",
        "id": 264448006,
        "sender_full_name": "Vitor Pamplona",
        "timestamp": 1639143598
    },
    {
        "content": "<p>To be clear, rotating keys is something SMART Health Cards supports in the core spec, and the rotated keys are still available for discovery. The practices Vitor  is describing (where currently valid keys are absent from the public key set) are  inconsistent with the specification, which is why you're having trouble with the standard tools.</p>",
        "id": 264455754,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1639147105
    },
    {
        "content": "<p>but the key issues shouldn't be relevant to the bundle, really. What exactly does \"FHIR bundle is not showing results\" mean? what results?</p>",
        "id": 264498765,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1639165705
    }
]