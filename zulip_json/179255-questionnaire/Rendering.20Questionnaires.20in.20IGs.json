[
    {
        "content": "<p>I'm about to do an IG where Questionnaires are the central artifact. As part of that, I want to work on rendering questionnaires in IGs. What kind of views should there be? it seems to me that there should be </p>\n<ul>\n<li>a tree view like a profile summarising the important structural elements of the questionnaire</li>\n<li>a human presentation of the questionnaire - an estimate of what it would look like, informed by SDC extensions</li>\n</ul>\n<p>Thoughts? other ideas?</p>",
        "id": 197604326,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1589483641
    },
    {
        "content": "<p>In case it hasn't crossed your mind already, LHC-Forms could be added to the pages with a couple of HTML tags, and you could use it to the do the rendering on the page.  JSFiddle examples: <a href=\"http://lhncbc.github.io/lforms/demos.html\">http://lhncbc.github.io/lforms/demos.html</a>.  It has tree lines on the left showing the structure of the sections, so you have both the tree view and human presentation in one.</p>",
        "id": 197605414,
        "sender_full_name": "Paul Lynch",
        "timestamp": 1589484198
    },
    {
        "content": "<p>I can't imagine how that would work, but the rule with IGs is not active content in the html that has external / server dependencies</p>",
        "id": 197605896,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1589484468
    },
    {
        "content": "<p>The JS and CSS files for LHC-Forms can be local.</p>",
        "id": 197606262,
        "sender_full_name": "Paul Lynch",
        "timestamp": 1589484648
    },
    {
        "content": "<p>how would the terminology part work - value sets and code systems?</p>",
        "id": 197606536,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1589484797
    },
    {
        "content": "<p>It depends on what you are trying to do. If the goal is just to show some Questionnaires, you can define those so they are self-contained.  We have some support for external ValueSets, at least for search lists; I will have to check on support for regular answer lists defined externally.</p>",
        "id": 197606975,
        "sender_full_name": "Paul Lynch",
        "timestamp": 1589485036
    },
    {
        "content": "<p>when I think about adding stuff to the IG publisher, then I generally need to think in terms of 'everything'  - anything not supported will soon enough by needed by someone. And I'll certainly be doing questionnaires with heavy dependence on snomed for my use case</p>",
        "id": 197607366,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1589485225
    },
    {
        "content": "<p>I think  a human presentation of the questionnaire - an estimate of what it would look like, informed by SDC extensions is most useful for the reader.</p>",
        "id": 197607826,
        "sender_full_name": "Eric Haas",
        "timestamp": 1589485456
    },
    {
        "content": "<p>I they want the details then they can look at the source in JSON, XML or YML</p>",
        "id": 197607927,
        "sender_full_name": "Eric Haas",
        "timestamp": 1589485522
    },
    {
        "content": "<p>I just checked, and LHC-Forms does support external ValueSets, both for search (autocomplete) and non-search (drop-down) lists.  You can also specify a preferred terminology server to fetch from.  There are things we don't support, not because we don't want to, because it has not been a priority yet.  But, I think it worth looking at existing packages to see whether they meet your needs before writing your own, and in this case, you would probably have help from us in getting missing features implemented.</p>",
        "id": 197609196,
        "sender_full_name": "Paul Lynch",
        "timestamp": 1589486134
    },
    {
        "content": "<p>well, I'm not going to write an app, that's for sure. I want static html. Needing a teminology server violates the publishing requirements.</p>",
        "id": 197609580,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1589486330
    },
    {
        "content": "<p>If you want static HTML, I guess I misunderstood your purpose in asking about value sets and code systems.  But, I did not say you have to specify a terminology server.  You can render a self-contained Questionnaire.  Yes, it would run some JavaScript to do the rendering, when the page loads, so in that sense it is not \"static\", but it need not fetch external resources.</p>",
        "id": 197610306,
        "sender_full_name": "Paul Lynch",
        "timestamp": 1589486660
    },
    {
        "content": "<p>I'm troubled by boundaries. Obviously static html isn't going to try to do value sets. Whereas an app is going to at least try sometimes. And it's the <em>sometimes</em> bit that I have trouble wit h</p>",
        "id": 197611633,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1589487293
    },
    {
        "content": "<p>I expect some folks are going to want a real full-blown editor because that's really the best way to understand the form, but of course it's going to have trouble rendering in a consistent way - so perhaps handling that bit via an external link to a tool that can grab the specified form would be the best bet.  Within the form, we could have a 'static' view - sort of PDF-like.  Would that work better for your Grahame?</p>",
        "id": 197612901,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1589487903
    },
    {
        "content": "<p>I think an external tool reference would work . The tool would have to take a version specific reference to the IG.</p>",
        "id": 197613263,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1589488070
    },
    {
        "content": "<p>I had a really hard time with the views for HAI Questionnaires. They are pretty lame (<a href=\"http://hl7.org/fhir/us/hai/Questionnaire-hai-questionnaire-los-event.html\">http://hl7.org/fhir/us/hai/Questionnaire-hai-questionnaire-los-event.html</a>) and I would LOVE for someone to come up something nice.</p>",
        "id": 197613770,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1589488284
    },
    {
        "content": "<p>yes that's what I'm going to improve</p>",
        "id": 197613873,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1589488329
    },
    {
        "content": "<p>I assume our real choices here are pure javascript with no external dependencies, or java that generates static HTML</p>",
        "id": 197677861,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1589542321
    },
    {
        "content": "<p>Is something like bootstrap or jquery acceptable for inclusion?</p>",
        "id": 197677939,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1589542358
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191918\">@Sarah Gaunt</span> Was the goal of <a href=\"http://hl7.org/fhir/us/hai/Questionnaire-hai-questionnaire-los-event.html\">http://hl7.org/fhir/us/hai/Questionnaire-hai-questionnaire-los-event.html</a> to show the definition of the form, or would you rather have the form rendered as a user would see it to fill it out (or possibly both)?  A rendered form would not display IDs and ValueSet URIs and most of the fields in your \"Questionnaire Details\" section, which in an IG I would guess are important to document.</p>",
        "id": 197686040,
        "sender_full_name": "Paul Lynch",
        "timestamp": 1589547434
    },
    {
        "content": "<p>Having just worked on a Questionnaire-focussed IG, I think improved Questionnaire rendering would be fantastic (albeit we used simplifier - <span class=\"user-mention\" data-user-id=\"203235\">@Ward Weistra</span> I hope firely is also taking notes <span aria-label=\"wink\" class=\"emoji emoji-1f609\" role=\"img\" title=\"wink\">:wink:</span> ). I would see a basic human presentation as the most important part (possibly \"decorated\" with deeper details). Having the answer options somehow embedded in the view would be a major plus. In the ideal case, (part of) the renderer could perhaps do double-duty with QuestionnaireResponse examples?</p>\n<p>Especially for Questionnaires (with their lower \"barrier-to-understanding\" compared to profiles), I think a significant aspect is supporting readers who are not super-familiar with FHIR (even if they are not the core audience). In our case, for instance, <a href=\"#narrow/stream/226195-Covid-19-Response/topic/IG.20for.20open.20source.20CovApp.20COVID-19.20assessment.20app/near/196730353\">the IG is linked to an open source COVID-19 app</a> so developers new to FHIR could be an important audience.</p>",
        "id": 197686154,
        "sender_full_name": "Morten Ernebjerg",
        "timestamp": 1589547491
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"194703\">@Morten Ernebjerg</span> I'll be at the 'Overview of various form builders &amp; renderers' sessions at 10:30, hoping for a great one we can leverage. Simplifier also has connector features, allowing you to start other applications (like a Questionnaire viewer) from a FHIR resource in Simplifier which could be used for this, if anyone is interested in working with me on that.</p>",
        "id": 197688007,
        "sender_full_name": "Ward Weistra",
        "timestamp": 1589548339
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"203235\">@Ward Weistra</span>  Sounds good! - don't have much experience with such tools myself, but would be happy to offer myself as a guinea pig.</p>",
        "id": 197688181,
        "sender_full_name": "Morten Ernebjerg",
        "timestamp": 1589548431
    },
    {
        "content": "<blockquote>\n<p>I would see a basic human presentation as the most important part (possibly \"decorated\" with deeper details). </p>\n</blockquote>\n<p>I want to reiterate that this is what the reader should see.  If you want to go deeper then look at the  raw resource.  YML or shortahand option would be nice too.</p>",
        "id": 197720466,
        "sender_full_name": "Eric Haas",
        "timestamp": 1589561542
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191401\">Eric Haas</span> <a href=\"#narrow/stream/179255-questionnaire/topic/Rendering.20Questionnaires.20in.20IGs/near/197720466\">said</a>:</p>\n<blockquote>\n<blockquote>\n<p>I would see a basic human presentation as the most important part (possibly \"decorated\" with deeper details). </p>\n</blockquote>\n<p>I want to reiterate that this is what the reader should see.  If you want to go deeper then look at the  raw resource.  YML or shortahand option would be nice too.</p>\n</blockquote>\n<p>In that case I would think <a href=\"http://lhncbc.github.io/lforms/\">LHC-Forms</a> would be a good option, but certainly not the only one.</p>",
        "id": 197722162,
        "sender_full_name": "Paul Lynch",
        "timestamp": 1589562319
    },
    {
        "content": "<p>so <span class=\"user-mention\" data-user-id=\"195344\">@Paul Lynch</span> if you can make a change to LHC-Forms such that you can invoke it and point it to a questionnaire in an IG, I'll be very happy to add it as a reference. That would mean invoking it with 2 parameters: the questionnaire resource as a direct link to json and a direct reference to the npm package .tgz that contains all the supporting thing like value sets, code systems</p>",
        "id": 197882606,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1589768512
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"193971\">@Stoyan Halkaliev</span> I can add yours too, if you can meet that kind of invocation method</p>",
        "id": 197882671,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1589768640
    },
    {
        "content": "<p>Criteria for inclusion = open-source questionnaire rendering apps that are web-launchable?</p>",
        "id": 197883410,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1589769906
    },
    {
        "content": "<p>yes and that can launched that way</p>",
        "id": 197884623,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1589771684
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> , the invocation method schould be ok. The link to the json works already (if the supporting things are contained), will look into the npm package asap.</p>\n<p><span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> , it is already web-lauchable, the open-source part I need to figure out. We are a startup and already have invested considerably. Have to get my investors on board first.</p>",
        "id": 197906814,
        "sender_full_name": "Stoyan Halkaliev",
        "timestamp": 1589792364
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191316\">Grahame Grieve</span> <a href=\"#narrow/stream/179255-questionnaire/topic/Rendering.20Questionnaires.20in.20IGs/near/197882606\">said</a>:</p>\n<blockquote>\n<p>so <span class=\"user-mention silent\" data-user-id=\"195344\">Paul Lynch</span> if you can make a change to LHC-Forms such that you can invoke it and point it to a questionnaire in an IG, I'll be very happy to add it as a reference. That would mean invoking it with 2 parameters: the questionnaire resource as a direct link to json and a direct reference to the npm package .tgz that contains all the supporting thing like value sets, code systems</p>\n</blockquote>\n<p>That sounds doable.  <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span>  Do you mean \"invokable\" as in a JavaScript API call, like LForms.Util.addFormToPage(...) to show the questionnaire directly in the IG page, or are you thinking of a URL pointing to some NLM website that will open a page showing the questionnaire?  There could be some security concerns (from NLM) with having a website service that shows any form created by anyone, though there might be ways to address those concerns.</p>\n<p>Also, could you send or point me to a real example of the parameter values you would send?</p>",
        "id": 197927850,
        "sender_full_name": "Paul Lynch",
        "timestamp": 1589805466
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"203235\">@Ward Weistra</span>, <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span>, <span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span>  a call to our renderer looks like this </p>\n<p><em>DISCLAIMER: It is work in progress</em></p>\n<p><a href=\"http://fhirpower.tools/?load=https%3A%2F%2Fsimplifier.net%2Fdata4lifefhirartifactsr4%2Fcovid-19-assessment-questionnaire-en%2F%24download%3Fformat%3Djson#/edit/load/\">http://fhirpower.tools/?load=https%3A%2F%2Fsimplifier.net%2Fdata4lifefhirartifactsr4%2Fcovid-19-assessment-questionnaire-en%2F%24download%3Fformat%3Djson#/edit/load/</a></p>\n<p>The load parameter shows the exact download location of the Questionnaire resource (in this example I use the german covid19 questionnaire <span class=\"user-mention\" data-user-id=\"203235\">@Ward Weistra</span> pointed to). There are some assumptions/limitations here:</p>\n<ul>\n<li>it is a STU3 renderer - the example ist R4, so the enableWhen will not work propertly. EnableWhen do works with STU3 questionnaire</li>\n<li>the renderer tries to figure out the non-standard value sets, based on the simplifier convention (will add \"-vs-&lt;lang&gt;\" to the valueset name and will try to load it from simplifier)</li>\n<li>will recognize loinc value sets and will try to load them. Unfortunatelly the official loing FHIR endpoint has CORS disabled, so we are using a local copy for now.</li>\n<li>if a german questionnaire uses loinc value set, english options will be rendered (didn't researched yet how to get translated loinc value sets per API)</li>\n<li>still need to test with the official HL7 FHIR ValueSets. They should be loaded from our local fhir server, but had no time to test properly. If there is a official end point to get them, please let me know.</li>\n</ul>\n<p>Here a screenshot in case you cannot call the URL:</p>\n<p><a href=\"user_uploads/10155/0Pqm8eFTCdngd6ZhfSNY5fi2/MicrosoftTeams-image-29.png\">MicrosoftTeams-image-29.png</a></p>\n<div class=\"message_inline_image\"><a href=\"user_uploads/10155/0Pqm8eFTCdngd6ZhfSNY5fi2/MicrosoftTeams-image-29.png\" title=\"MicrosoftTeams-image-29.png\"><img src=\"user_uploads/10155/0Pqm8eFTCdngd6ZhfSNY5fi2/MicrosoftTeams-image-29.png\"></a></div>",
        "id": 197948238,
        "sender_full_name": "Stoyan Halkaliev",
        "timestamp": 1589814619
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"193971\">@Stoyan Halkaliev</span> Works like a charm!<br>\n<a href=\"/user_uploads/10155/DSWBM8PeE7N86UbBDNvJtKqi/OpenWithFHIRPowerTools.gif\">OpenWithFHIRPowerTools.gif</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/DSWBM8PeE7N86UbBDNvJtKqi/OpenWithFHIRPowerTools.gif\" title=\"OpenWithFHIRPowerTools.gif\"><img src=\"/user_uploads/10155/DSWBM8PeE7N86UbBDNvJtKqi/OpenWithFHIRPowerTools.gif\"></a></div>",
        "id": 197950664,
        "sender_full_name": "Ward Weistra",
        "timestamp": 1589815513
    },
    {
        "content": "<p>FYI, to do this I added an STU3 and R4 connector on <a href=\"https://simplifier.net/portal/~connectors\">https://simplifier.net/portal/~connectors</a>, with connector code:<br>\n<code>window.open(\"http://fhirpower.tools/?load=\"+encodeURIComponent(simplifier.ResourceEndpoint)+\"#/edit/load/\");</code><br>\n<a href=\"/user_uploads/10155/u_U0PFMGI2dMwI73P-daf5Ob/2020-05-18-17_45_09-SIMPLIFIER.NET-Connector-Details.png\">2020-05-18-17_45_09-SIMPLIFIER.NET-Connector-Details.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/u_U0PFMGI2dMwI73P-daf5Ob/2020-05-18-17_45_09-SIMPLIFIER.NET-Connector-Details.png\" title=\"2020-05-18-17_45_09-SIMPLIFIER.NET-Connector-Details.png\"><img src=\"/user_uploads/10155/u_U0PFMGI2dMwI73P-daf5Ob/2020-05-18-17_45_09-SIMPLIFIER.NET-Connector-Details.png\"></a></div><p>Docs <a href=\"http://docs.simplifier.net/simplifier/simplifierConnectors.html#create-a-connector\">here</a>. I very much welcome other suggestions for connectors!</p>",
        "id": 197953786,
        "sender_full_name": "Ward Weistra",
        "timestamp": 1589816760
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"193971\">@Stoyan Halkaliev</span> <span class=\"user-mention\" data-user-id=\"203235\">@Ward Weistra</span> Looks nice despite the R4-limitations, nice work!</p>",
        "id": 198051233,
        "sender_full_name": "Morten Ernebjerg",
        "timestamp": 1589887414
    },
    {
        "content": "<p>one of the ways I'm going to render the questionnaire is using the tree, like we do with profiles. In order to do that,  I need a set of 16x16 icons for each of the types in <a href=\"http://build.fhir.org/valueset-item-type.html\">http://build.fhir.org/valueset-item-type.html</a>. Contributions are welcome - each should be a 16x16 png or gif that has a transparent background</p>",
        "id": 198051856,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1589887898
    },
    {
        "content": "<p>and have to be under open license</p>",
        "id": 198051869,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1589887906
    },
    {
        "content": "<p>I expect to re-use the group (folder) icon from profiles for group</p>",
        "id": 198051941,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1589887929
    },
    {
        "content": "<p>ok. comments welcome:</p>",
        "id": 198139330,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1589930354
    },
    {
        "content": "<p><a href=\"/user_uploads/10155/Dqzgpx_YQSyYYBBKerODHFyF/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/Dqzgpx_YQSyYYBBKerODHFyF/image.png\" title=\"image.png\"><img src=\"/user_uploads/10155/Dqzgpx_YQSyYYBBKerODHFyF/image.png\"></a></div>",
        "id": 198139333,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1589930356
    },
    {
        "content": "<p>Is that in a new branch of the publisher?<br>\nI'd personally like another fragment to cover the invariants/expressions/candidates and option sets as an option.<br>\nAnd happy to contribute if I get some time in it. (possibly over the weekend or next week)</p>",
        "id": 198140410,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1589931289
    },
    {
        "content": "<p>well, it's a future feature for the publisher, yes</p>",
        "id": 198140457,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1589931361
    },
    {
        "content": "<p>I take it you haven't pushed a branch to github yet for me to try out with our examples. (have a heap of good ones)</p>",
        "id": 198140730,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1589931633
    },
    {
        "content": "<p>no. sometime today</p>",
        "id": 198141633,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1589932625
    },
    {
        "content": "<p>Just curious, why one choice has flag with horizontal lines and another choice has flag with vertical lines?</p>",
        "id": 198202536,
        "sender_full_name": "Yunwei Wang",
        "timestamp": 1589983364
    },
    {
        "content": "<p>Looks good <span aria-label=\"confetti\" class=\"emoji emoji-1f38a\" role=\"img\" title=\"confetti\">:confetti:</span> ! Two comments:</p>\n<ol>\n<li>Might it be worth splitting the  tree-structure and the<code>linkId</code> into separate columns? For long <code>linkId</code>s or deep nesting, I suspect it might be easier to read that way.</li>\n<li>I must admit I was slightly confused by the fact that the blue question mark icon only  indicates a choice-type questions. On a first parsing run, I instinctively assumed that \"?\" = question (of any type) and was puzzled by all the items with other icons. Might just be my poor internal parser <span aria-label=\"slight smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"slight smile\">:slight_smile:</span> - but perhaps there could be a more specific icon to convey the meaning?</li>\n</ol>",
        "id": 198216154,
        "sender_full_name": "Morten Ernebjerg",
        "timestamp": 1589988866
    },
    {
        "content": "<ol>\n<li>the tree structure framework is hardcoded to include text in the first column, as every tree structure I have looked at does. there doesn't appear to be other candidate text for the first column</li>\n<li>that's reusing the choice icon from profiles. Feel free to donate a better icon. 16x16 PNG with a transparent background</li>\n</ol>",
        "id": 198254883,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1590007455
    },
    {
        "content": "<blockquote>\n<p>why one choice has flag with horizontal lines and another choice has flag with vertical lines?</p>\n</blockquote>\n<p>Because that's what the questionnaire design says</p>",
        "id": 198254945,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1590007499
    },
    {
        "content": "<p>The questionnaire is showing how to do different things - it's not designed to be pretty :)</p>",
        "id": 198268431,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1590015951
    },
    {
        "content": "<p>ok so I'm adding 3 representations:</p>\n<ul>\n<li>the tree view, above</li>\n<li>a form view, here:</li>\n<li>and a summary of expressions and answer options, yet to do.</li>\n</ul>",
        "id": 198401724,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1590115964
    },
    {
        "content": "<p><a href=\"/user_uploads/10155/o6TerDbk6nUsiUKy324c6NcH/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/o6TerDbk6nUsiUKy324c6NcH/image.png\" title=\"image.png\"><img src=\"/user_uploads/10155/o6TerDbk6nUsiUKy324c6NcH/image.png\"></a></div>",
        "id": 198401726,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1590115967
    },
    {
        "content": "<p>opinions welcome</p>",
        "id": 198401728,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1590115973
    },
    {
        "content": "<p>actually, there's 4th view - external app references but I'll add that once people add a link</p>",
        "id": 198401876,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1590116238
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> Really like the form view!</p>\n<p>I tried my (non-artist) hand at coming up with alternative icons for the \"choice\" type. Best idea so far came from my 10-year-old son <span aria-label=\"slight smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"slight smile\">:slight_smile:</span> - choice of directions. I also added alternatives based on a check-box, though that may rather signal \"done\" (multiple checkboxes get too small):<br>\n<a href=\"/user_uploads/10155/-R_usFV9vdp1ftRDY_qNGGse/choice-arrows-2.png\">choice-arrows-2.png</a><br>\n<a href=\"/user_uploads/10155/4MJMgh8JhR2rrnV9WMCaGkmz/choice-check-1.png\">choice-check-1.png</a><br>\n<a href=\"/user_uploads/10155/N05gYV9lJyqZYw8fQbCNLkwo/choice-check-3.png\">choice-check-3.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/-R_usFV9vdp1ftRDY_qNGGse/choice-arrows-2.png\" title=\"choice-arrows-2.png\"><img src=\"/user_uploads/10155/-R_usFV9vdp1ftRDY_qNGGse/choice-arrows-2.png\"></a></div><div class=\"message_inline_image\"><a href=\"/user_uploads/10155/4MJMgh8JhR2rrnV9WMCaGkmz/choice-check-1.png\" title=\"choice-check-1.png\"><img src=\"/user_uploads/10155/4MJMgh8JhR2rrnV9WMCaGkmz/choice-check-1.png\"></a></div><div class=\"message_inline_image\"><a href=\"/user_uploads/10155/N05gYV9lJyqZYw8fQbCNLkwo/choice-check-3.png\" title=\"choice-check-3.png\"><img src=\"/user_uploads/10155/N05gYV9lJyqZYw8fQbCNLkwo/choice-check-3.png\"></a></div>",
        "id": 198575079,
        "sender_full_name": "Morten Ernebjerg",
        "timestamp": 1590312625
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> is there an IG that has the template for these somewhere, I'd like to try it out in our guide?<br>\n(have 16 real questionnaires to test it with)</p>",
        "id": 199137094,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1590748348
    },
    {
        "content": "<p>I've started my own template, found the fragments to try and include.<br>\nI take it the images files aren't in the IG publisher package just yet?<br>\n(or do I need to manually add them to my custom IG template?)<br>\nI assume you're ok for me to do bug fixes on the generator too...</p>",
        "id": 199138412,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1590749502
    },
    {
        "content": "<p>There are 2 output fragments generated that look almost identical, <code>html</code> and <code>form</code> Only difference is the title and the inclusion of a namespace.</p>",
        "id": 199139583,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1590750366
    },
    {
        "content": "<p>And <code>links</code> and <code>logic</code> look like the same fragment output too</p>",
        "id": 199141397,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1590751735
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> first bug fix here<br>\n<a href=\"https://github.com/brianpos/fhir-ig-publisher/commit/a22ffb7563f08098fc93375cc2d16b20a92b4137\">https://github.com/brianpos/fhir-ig-publisher/commit/a22ffb7563f08098fc93375cc2d16b20a92b4137</a></p>",
        "id": 199147717,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1590755829
    },
    {
        "content": "<p>html and form are the same if the html is generated. It won't be if the source resource supplies it's own narrative</p>",
        "id": 199152432,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1590758304
    },
    {
        "content": "<p>links / logic = copy paste error. they'll be different next release</p>",
        "id": 199152488,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1590758331
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> we going to add this to the main template?</p>",
        "id": 199240462,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1590817848
    },
    {
        "content": "<p>Are the images somewhere I can grab to try out?</p>",
        "id": 199253794,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1590840549
    },
    {
        "content": "<p>y.  Hopefully this weekend</p>",
        "id": 199257371,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1590845995
    },
    {
        "content": "<blockquote>\n<p>Are the images somewhere I can grab to try out?</p>\n</blockquote>\n<p>yes, in the pubpack package, v 0.0.5</p>",
        "id": 199277838,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1590875959
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> if it's of any use (and the template format is still the same) this is what I'm using for my initial testing</p>\n<div class=\"codehilite\"><pre><span></span><code>---\n# jekyll header\nlevel: 2\nactive: profiles\ntitle: profile\n---\n\n{% include header.html %}\n{% include container-start.html %}\n{% include breadcrumbs.html %}\n\n&lt;!-- ============ CONTENT CONTENT=============== --&gt;\n\n\n&lt;a name=&quot;profile&quot;&gt; &lt;/a&gt;\n&lt;!-- uri --&gt;\n{% include Questionnaire-{{[id]}}-summary.xhtml %}\n\n&lt;div id=&quot;tabs&quot;&gt;\n  &lt;ul&gt;\n    &lt;li&gt;&lt;a href=&quot;#tabs-summ&quot;&gt;Summary&lt;/a&gt;&lt;/li&gt;\n    &lt;li&gt;&lt;a href=&quot;#tabs-defn&quot;&gt;Definitions&lt;/a&gt;&lt;/li&gt;\n    &lt;li&gt;&lt;a href=&quot;#tabs-samp&quot;&gt;Display&lt;/a&gt;&lt;/li&gt;\n  &lt;/ul&gt;\n\n  &lt;div id=&quot;tabs-summ&quot;&gt;\n    &lt;div id=&quot;tbl-summ&quot;&gt;\n      &lt;div id=&quot;tbl-summ-inner&quot;&gt;\n        {% include Questionnaire-{{[id]}}-tree.xhtml %}\n      &lt;/div&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n\n  &lt;div id=&quot;tabs-defn&quot;&gt;\n    &lt;div id=&quot;tbl-defn&quot;&gt;\n      &lt;div id=&quot;tbl-defn-inner&quot;&gt;\n        {% include Questionnaire-{{[id]}}-dict.xhtml %}\n      &lt;/div&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n\n  &lt;div id=&quot;tabs-samp&quot;&gt;\n    &lt;div id=&quot;tbl-samp&quot;&gt;\n      &lt;div id=&quot;tbl-samp-inner&quot;&gt;\n        &lt;p&gt;(Note: This is only a sample display of the form, it is now exactly how it will be rendered by PMS systems)\n        &lt;/p&gt;\n        {% include Questionnaire-{{[id]}}-form.xhtml %}\n        &lt;!-- {% include Questionnaire-{{[id]}}-html.xhtml %} --&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n\n&lt;/div&gt;\n\n\n&lt;!-- ==============END CONTENT END CONTENT=================== --&gt;\n{% include container-end.html %}\n\n&lt;script src=&quot;jquery.js&quot;&gt; &lt;/script&gt;\n&lt;script src=&quot;jquery-ui.min.js&quot;&gt; &lt;/script&gt;\n&lt;script&gt;\n  try {\n    var currentTabIndex = sessionStorage.getItem(&#39;fhir-questionnaire-tab-index&#39;);\n  }\n  catch (exception) {\n  }\n\n  if (!currentTabIndex)\n    currentTabIndex = &#39;0&#39;;\n\n  $(&#39;#tabs&#39;).tabs({\n    active: currentTabIndex,\n    activate: function (event, ui) {\n      var active = $(&#39;.selector&#39;).tabs(&#39;option&#39;, &#39;active&#39;);\n      currentTabIndex = ui.newTab.index();\n      document.activeElement.blur();\n      try {\n        sessionStorage.setItem(&#39;fhir-questionnaire-tab-index&#39;, currentTabIndex);\n      }\n      catch (exception) {\n      }\n    }\n  });\n&lt;/script&gt;\n\n{% include footer.html %}\n&lt;/body&gt;\n\n&lt;/html&gt;\n</code></pre></div>",
        "id": 199281910,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1590883313
    },
    {
        "content": "<p>There was a question on icons for the tree?<br>\n(I think we qualify for these <a href=\"https://icons8.com/license\">https://icons8.com/license</a>)<br>\nFor the choice icon:  <a href=\"https://icons8.com/icons/set/radio-button\">https://icons8.com/icons/set/radio-button</a></p>",
        "id": 199333461,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1590981454
    },
    {
        "content": "<p>which one in particular?</p>",
        "id": 199334194,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1590982675
    },
    {
        "content": "<p>The radio button, the second link<br>\n&lt;img src=\"https://img.icons8.com/material-outlined/24/000000/radio-button.png\"/&gt;<br>\nfrom this collection<br>\n<a href=\"https://icons8.com/icon/pack/user-interface/material-outlined\">https://icons8.com/icon/pack/user-interface/material-outlined</a><br>\nor alternately this one that shows a set of 3 to choose from<br>\n<a href=\"https://icons8.com/icon/83293/single-choice\">https://icons8.com/icon/83293/single-choice</a></p>",
        "id": 199335629,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1590985163
    },
    {
        "content": "<p>If it's something we can use (the free licensing conditions are ok) I'd be happy to walk through what we have and make a select a complete set for use in this part.</p>",
        "id": 199335678,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1590985207
    },
    {
        "content": "<p>ok. here's what I've been using to test SDC:</p>",
        "id": 199447848,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1591069615
    },
    {
        "content": "<div class=\"codehilite\"><pre><span></span><code><span class=\"s2\">&quot;Questionnaire&quot;</span><span class=\"err\">:</span> <span class=\"p\">{</span>\n  <span class=\"nt\">&quot;template-base&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;template/layouts/layout-questionnaire.html&quot;</span><span class=\"p\">,</span>\n  <span class=\"nt\">&quot;template-defns&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;template/layouts/layout-questionnaire-definitions.html&quot;</span><span class=\"p\">,</span>\n  <span class=\"nt\">&quot;defns&quot;</span> <span class=\"p\">:</span> <span class=\"s2\">&quot;{{[type]}}-{{[id]}}-definitions.html&quot;</span>\n<span class=\"p\">}</span>\n</code></pre></div>",
        "id": 199447857,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1591069659
    },
    {
        "content": "<p>and these layouts</p>",
        "id": 199447860,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1591069664
    },
    {
        "content": "<p><a href=\"/user_uploads/10155/ZW3WB3GvcROEj0CEbXMg-Jme/layout-questionnaire.html\">layout-questionnaire.html</a> <a href=\"/user_uploads/10155/IZMbz2UALeSajiEg_A4Lxujs/layout-questionnaire-definitions.html\">layout-questionnaire-definitions.html</a></p>",
        "id": 199447901,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1591069688
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span>. All works for me, so I'll be releasing soon</p>",
        "id": 199447906,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1591069707
    },
    {
        "content": "<p>The history bit should be yanked.  Jose's working on getting history to show up as a separate page tab for all of the resources, which is a cleaner place to have it.  Other than that, I see no issues.  Sorry I took so long to get to it.</p>",
        "id": 199449743,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1591072495
    },
    {
        "content": "<p>sure. you want me to make that as a PR against fhir.base.template? </p>\n<p>btw, the history will always be empty for contained resources</p>",
        "id": 199450259,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1591073191
    },
    {
        "content": "<p>If history is empty, the tab shouldn't show up</p>",
        "id": 199450431,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1591073516
    },
    {
        "content": "<p>sure</p>",
        "id": 199450478,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1591073539
    },
    {
        "content": "<p>Should this now move over to the IG Creation stream?</p>",
        "id": 201687992,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1592888475
    },
    {
        "content": "<p>yes</p>",
        "id": 201782494,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1592946075
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191316\">Grahame Grieve</span> <a href=\"#narrow/stream/179255-questionnaire/topic/Rendering.20Questionnaires.20in.20IGs/near/197882606\">said</a>:</p>\n<blockquote>\n<p>so <span class=\"user-mention silent\" data-user-id=\"195344\">Paul Lynch</span> if you can make a change to LHC-Forms such that you can invoke it and point it to a questionnaire in an IG, I'll be very happy to add it as a reference. That would mean invoking it with 2 parameters: the questionnaire resource as a direct link to json and a direct reference to the npm package .tgz that contains all the supporting thing like value sets, code systems</p>\n</blockquote>\n<p><span class=\"user-mention\" data-user-id=\"193152\">@Ye Wang</span> has created a viewer using LHC-Forms that takes these two parameters.  It takes a parameter \"q\" for the Questionnaire URL, and parameter \"p\" for the package.tgz file (optional).   Example: <a href=\"https://lhncbc.github.io/questionnaire-viewer/?q=https%3A%2F%2Flforms-fhir.nlm.nih.gov%2FbaseR4%2FQuestionnaire%2F24313-9\">https://lhncbc.github.io/questionnaire-viewer/?q=https%3A%2F%2Flforms-fhir.nlm.nih.gov%2FbaseR4%2FQuestionnaire%2F24313-9</a></p>",
        "id": 204132889,
        "sender_full_name": "Paul Lynch",
        "timestamp": 1594928435
    }
]