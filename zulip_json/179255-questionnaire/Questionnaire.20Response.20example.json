[
    {
        "content": "<p>In the Questionnaire Response of <a href=\"https://www.hl7.org/fhir/questionnaireresponse-example-f201-lifelines.json.html\">f201-lifelines</a>, answers with linkId 1, 3.1 and 3.2 are of type valueString while the Questionnaire <a href=\"https://www.hl7.org/fhir/questionnaire-example-f201-lifelines.json.html\">f201-lifelines example</a> expects a valueBoolean . Is this correct?</p>",
        "id": 226379279,
        "sender_full_name": "Kashyap Jois",
        "timestamp": 1613393044
    },
    {
        "content": "<p>No.  Can you submit a technical correction?</p>",
        "id": 226395810,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1613402309
    },
    {
        "content": "<p>Done! <a href=\"https://jira.hl7.org/browse/FHIR-31075\">link</a></p>",
        "id": 226484757,
        "sender_full_name": "Kashyap Jois",
        "timestamp": 1613464021
    },
    {
        "content": "<p>In this <a href=\"https://www.hl7.org/fhir/questionnaireresponse-example-bluebook.json.html\">example</a> I cannot understand why the item with link id vitaminKgiven has \"item\" as part of the \"answer\". What is the reason for the structure to allow items to be within answers?</p>",
        "id": 227233024,
        "sender_full_name": "Kashyap Jois",
        "timestamp": 1613982507
    },
    {
        "content": "<p>When you have questions that are nested beneath questions, they are always tied to the answer.  That's because if the parent item allows multiple answers, you answer the child questions for each answer for the parent question.</p>",
        "id": 227278538,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1614005909
    },
    {
        "content": "<p>Thanks  <span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span>!</p>\n<p>But doesn't that violate the rule here: <a href=\"https://www.hl7.org/fhir/questionnaireresponse.html#link\">https://www.hl7.org/fhir/questionnaireresponse.html#link</a> ? or are we treating items under a parent item and items under an answer to that parent item the same way?</p>\n<p>I think from a implenter's perspective, there is just this extra step while creating a questionnaire response: rather than blindly mirror the structure of the questionnaire, you just have to make sure the questionnaire response are nested in the right answer.</p>\n<p>Additionally, if the enable when statement is more complicated (e.g. enabled if A or B is selected), then do we keep the response where it is (under the questionnaire item) or under the answer (e.g. under A or under B)?</p>",
        "id": 227402794,
        "sender_full_name": "Jing Tang",
        "timestamp": 1614072764
    },
    {
        "content": "<p>Thanks <span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span>  This was kind of tricky to understand, there seems to be no documentation mentioning this. We assumed that the nested item would appear as it does in the questionnaire i.e. part of the parent item and not within the parent items answer .</p>",
        "id": 227417482,
        "sender_full_name": "Kashyap Jois",
        "timestamp": 1614080764
    },
    {
        "content": "<p>Agree that we need better documentation here.  SDC has some, but this should be reflected in the core resources.  The base rule is that for Questions, you always nest beneath answer and for groups, you nest directly beneath the item.  In both cases, the hierarchy is retained.  The reason for the difference is that when there are multiple answers for the parent question, you need to do the nesting for each answer.</p>",
        "id": 227439528,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1614091079
    },
    {
        "content": "<p>Can one of you submit a change request for us to surface this in the core specification?</p>",
        "id": 227439629,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1614091103
    },
    {
        "content": "<p>i synced up with kashyap who showed me an example of why we need to nest items under answer -- so please do disregard what i said earlier. thanks <span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span></p>",
        "id": 227442072,
        "sender_full_name": "Jing Tang",
        "timestamp": 1614091752
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191320\">Lloyd McKenzie</span> <a href=\"#narrow/stream/179255-questionnaire/topic/Questionnaire.20Response.20example/near/227439629\">said</a>:</p>\n<blockquote>\n<p>Can one of you submit a change request for us to surface this in the core specification?</p>\n</blockquote>\n<p>happy to take this</p>",
        "id": 227442156,
        "sender_full_name": "Jing Tang",
        "timestamp": 1614091796
    },
    {
        "content": "<p><a href=\"https://jira.hl7.org/browse/FHIR-31357\">https://jira.hl7.org/browse/FHIR-31357</a></p>",
        "id": 227447309,
        "sender_full_name": "Jing Tang",
        "timestamp": 1614093718
    },
    {
        "content": "<p>Thanks!</p>",
        "id": 227447538,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1614093793
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191320\">Lloyd McKenzie</span> <a href=\"#narrow/stream/179255-questionnaire/topic/Questionnaire.20Response.20example/near/227439528\">said</a>:</p>\n<blockquote>\n<p>The reason for the difference is that when there are multiple answers for the parent question, you need to do the nesting for each answer.</p>\n</blockquote>\n<p>I don't think that was necessary.  An alternative design would have been to repeat the question's item for each answer, and nest under the item, as you do for a group.  But, either approach works if clearly documented.</p>",
        "id": 227789356,
        "sender_full_name": "Paul Lynch",
        "timestamp": 1614268517
    },
    {
        "content": "<p>If you repeat the item, you have to repeat the text.  It also makes tracking cardinality of answers harder.</p>",
        "id": 227803578,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1614273626
    },
    {
        "content": "<p>Just adding this image here. It was created for ease of understanding this slightly complicated concept of nesting in the Questionnaire and Questionnaire Response.<br>\n<a href=\"/user_uploads/10155/wUILpxfBtOX7-v8ZVGsEimTP/QuestionnaireResponseTree.jpg\">QuestionnaireResponseTree.jpg</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/wUILpxfBtOX7-v8ZVGsEimTP/QuestionnaireResponseTree.jpg\" title=\"QuestionnaireResponseTree.jpg\"><img src=\"/user_uploads/10155/wUILpxfBtOX7-v8ZVGsEimTP/QuestionnaireResponseTree.jpg\"></a></div><p>cc <span class=\"user-mention\" data-user-id=\"366686\">@Jing Tang</span></p>",
        "id": 259093211,
        "sender_full_name": "Kashyap Jois",
        "timestamp": 1635253779
    },
    {
        "content": "<p>That looks correct</p>",
        "id": 259094052,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1635254178
    },
    {
        "content": "<p>thanks <span class=\"user-mention\" data-user-id=\"382830\">@Kashyap Jois</span> for sharing - this diagram would be great for the community to understand the structure of repeated items in Quesetionnaire vs QR. <span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> should we consider adding this (or something similar to this) to the IG's documentation? :)</p>",
        "id": 259130789,
        "sender_full_name": "Jing Tang",
        "timestamp": 1635268879
    },
    {
        "content": "<p>We could.  Would someone like to submit a change request proposing that? :)</p>",
        "id": 259145664,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1635275197
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191320\">Lloyd McKenzie</span> <a href=\"#narrow/stream/179255-questionnaire/topic/Questionnaire.20Response.20example/near/259145664\">said</a>:</p>\n<blockquote>\n<p>We could.  Would someone like to submit a change request proposing that? :)</p>\n</blockquote>\n<p>Sure , I'll submit a change request :)</p>",
        "id": 259218608,
        "sender_full_name": "Kashyap Jois",
        "timestamp": 1635330533
    },
    {
        "content": "<p><a href=\"https://jira.hl7.org/browse/FHIR-34184\">https://jira.hl7.org/browse/FHIR-34184</a> Here is the change request <span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span></p>",
        "id": 259234089,
        "sender_full_name": "Kashyap Jois",
        "timestamp": 1635339549
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"382830\">@Kashyap Jois</span> For completeness, you might want to add items where type=group (with cases for repeats=true and false), because groups don't have answers.</p>",
        "id": 259299650,
        "sender_full_name": "Paul Lynch",
        "timestamp": 1635365564
    },
    {
        "content": "<p><a href=\"/user_uploads/10155/xhtIUE9I24Al_v05iO9OHMWZ/QuestionnaireResponseTree.jpg\">QuestionnaireResponseTree.jpg</a> <span class=\"user-mention\" data-user-id=\"195344\">@Paul Lynch</span> please have a look. I have improved the diagram to include type==group also</p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/xhtIUE9I24Al_v05iO9OHMWZ/QuestionnaireResponseTree.jpg\" title=\"QuestionnaireResponseTree.jpg\"><img src=\"/user_uploads/10155/xhtIUE9I24Al_v05iO9OHMWZ/QuestionnaireResponseTree.jpg\"></a></div>",
        "id": 259347638,
        "sender_full_name": "Kashyap Jois",
        "timestamp": 1635404548
    },
    {
        "content": "<p>Also here is the source <a href=\"/user_uploads/10155/r6EFYUl9dJbTXujALyRnJoL4/QuestionnaireResponseTree.drawio\">QuestionnaireResponseTree.drawio</a></p>",
        "id": 259348167,
        "sender_full_name": "Kashyap Jois",
        "timestamp": 1635404955
    },
    {
        "content": "<p>I don't see any nesting within answers - which is something we definitely need to highlight.</p>",
        "id": 259397906,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1635431769
    },
    {
        "content": "<p>That looks right to me-- thanks.</p>",
        "id": 259426515,
        "sender_full_name": "Paul Lynch",
        "timestamp": 1635443324
    },
    {
        "content": "<p>I'm rebuilding the internals of my filler to support the picture. Two questions:</p>\n<ul>\n<li>with all these groupings and repetitions, there can be a questionnaire response where several items have the same linkId. What is the behaviour for enableWhen, which identifies questions through a linkId? Only look upwards from the current item to the top?</li>\n<li><span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> what are you referring to with the \"nesting within answers\"? Is this picture still incomplete?</li>\n</ul>",
        "id": 259807999,
        "sender_full_name": "Tilo Christ",
        "timestamp": 1635713878
    },
    {
        "content": "<p>As it says in the comment for enableWhen.question, \"If multiple question occurrences are present for the same question (same linkId), then this refers to the nearest question occurrence reachable by tracing first the \"ancestor\" axis and then the \"preceding\" axis and then the \"following\" axis.\"<br>\nYes.  Questions can be nested within questions, in which case, the nesting happens within each answer</p>",
        "id": 259821905,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1635735074
    },
    {
        "content": "<p>Thanks, I had missed that there are comments, I shouldn't be reading specs at 1am. Is the \"nesting\" something different than the situation shown with \"Item_1\" and \"Item_2\" in the diagram?</p>",
        "id": 259840189,
        "sender_full_name": "Tilo Christ",
        "timestamp": 1635757356
    },
    {
        "content": "<p>Um, nope.  My brain didn't expect that design of a form, so I didn't notice.  All is good - and thank you!</p>",
        "id": 259869612,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1635776609
    },
    {
        "content": "<p>Just saw your response editing this message, since I cannot delete it.</p>",
        "id": 259870484,
        "sender_full_name": "Kashyap Jois",
        "timestamp": 1635777020
    }
]