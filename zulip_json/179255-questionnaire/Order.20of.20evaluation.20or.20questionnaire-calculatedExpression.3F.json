[
    {
        "content": "<p>Is there documentation somewhere about what order the expressions found in questionnaire-calculatedExpression for different items are to be run?  It is not hard to construct a set of expressions that produce different results depending on which order they are run.  I think I read somewhere that they should be run in order of their appearance on the form, but I can't find that statement on <a href=\"http://hl7.org/fhir/2018Sep/extension-questionnaire-calculatedexpression.html\" target=\"_blank\" title=\"http://hl7.org/fhir/2018Sep/extension-questionnaire-calculatedexpression.html\">http://hl7.org/fhir/2018Sep/extension-questionnaire-calculatedexpression.html</a>.  I think the same concern applies to questionnaire-initialExpression.</p>",
        "id": 154021901,
        "sender_full_name": "Paul Lynch",
        "timestamp": 1543531321
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191359\">@Bryn Rhodes</span> the same issue probably shows up in PlanDefinition.  Do you have a practice there?</p>",
        "id": 154024248,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1544480391
    },
    {
        "content": "<p>In realizing an ActivityDefinition, there is explicit reference to the order of evaluation for the \"dynamicValue\" elements: <a href=\"http://build.fhir.org/activitydefinition.html\" target=\"_blank\" title=\"http://build.fhir.org/activitydefinition.html\">http://build.fhir.org/activitydefinition.html</a></p>",
        "id": 154024258,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1544481124
    },
    {
        "content": "<p>\"in the order in which they appear in the ActivityDefinition\"</p>",
        "id": 154024259,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1544481155
    },
    {
        "content": "<p>I guess you have the benefit of no user intervention.  In the case of Questionnaire, there isn't a guarantee tha questions will be completed in order.  For form fillers that use an event-based approach to propagating answers, order of appearance in the form is likely to be a pain.  But I'm not sure what else to do.  <span class=\"user-mention\" data-user-id=\"195344\">@Paul Lynch</span> Can you add a tracker for this and we can discuss on a call?  We might need to do some playing at a connectathon before we land how it should best work.</p>",
        "id": 154024263,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1544481863
    },
    {
        "content": "<p>But if every change to the inputs constitutes a recalculation, doesn't order of evaluation not matter? You'd have to track dependencies (and prevent recursion), but wouldn't that address the issue?</p>",
        "id": 154024272,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1544482624
    },
    {
        "content": "<p>I don't think the answer to this depends on the order which the user fills out the form.</p>",
        "id": 154024273,
        "sender_full_name": "Paul Lynch",
        "timestamp": 1544482674
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191359\">@Bryn Rhodes</span>  How would one track dependencies?  FHIRPath seems very opaque as what the source items are.</p>",
        "id": 154024274,
        "sender_full_name": "Paul Lynch",
        "timestamp": 1544482955
    },
    {
        "content": "<p><a href=\"https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=19747\" target=\"_blank\" title=\"https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=19747\">GF#19747</a></p>",
        "id": 154024277,
        "sender_full_name": "Paul Lynch",
        "timestamp": 1544483272
    },
    {
        "content": "<p>Note that the presence of group-level variables (which can reference these fields, which can reference the variables) further complicates things.  I'm assuming we'll disallow cycles (in the spec, anyway) but trying to decide what needs to be run next is complicated.</p>",
        "id": 154025423,
        "sender_full_name": "Paul Lynch",
        "timestamp": 1544730819
    }
]