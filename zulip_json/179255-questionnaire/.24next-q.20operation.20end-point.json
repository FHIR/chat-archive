[
    {
        "content": "<p>discussed with <span class=\"user-mention\" data-user-id=\"192017\">@Nagesh Bashyam</span>   whether the adaptive questionnaire $next-q operation should be posted to the servers Questionnaire instance or the QuestionnaireResponse instance endpoint .   I  think its the former since we are talking about a 'virtual' Q and not the responses.   I had a typo in my draft operation.</p>",
        "id": 153987083,
        "sender_full_name": "Eric Haas",
        "timestamp": 1534363627
    },
    {
        "content": "<p>see here: <a href=\"https://argonautproject.github.io/questionnaire/OperationDefinition-next-q.html\" target=\"_blank\" title=\"https://argonautproject.github.io/questionnaire/OperationDefinition-next-q.html\">https://argonautproject.github.io/questionnaire/OperationDefinition-next-q.html</a></p>",
        "id": 153987085,
        "sender_full_name": "Eric Haas",
        "timestamp": 1534363672
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span>  where can we look at the SDC (calculated) scoring extension and its url?</p>",
        "id": 153987086,
        "sender_full_name": "Eric Haas",
        "timestamp": 1534363863
    },
    {
        "content": "<p>There are two extensions: <code>variable</code> is used for the calculation.  It appears on the item that is the lowest common ancestor of all questions involved in the calculation.  <code>questionnaire-calculatedExpression</code> appears on the item whose answer is to be the score.  You'' want to mark the item as readOnly=true and if you don't want the score displayed, you can use the <code>questionnaire-hidden</code>property.</p>",
        "id": 153987205,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1534375773
    },
    {
        "content": "<p><code>questionnaire-calculatedExpression</code> is this a boolean?  Why not just put in the text  \"calculated score\"  like I did in my example?</p>",
        "id": 153987222,
        "sender_full_name": "Eric Haas",
        "timestamp": 1534377694
    },
    {
        "content": "<p>are there URL so we can look at em?</p>",
        "id": 153987223,
        "sender_full_name": "Eric Haas",
        "timestamp": 1534377717
    },
    {
        "content": "<p>Those extensions are all in the core spec</p>",
        "id": 153987248,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1534379253
    },
    {
        "content": "<p>CalculatedExpression will generally just be a reference to a variable declared in <code>variable</code></p>",
        "id": 153987249,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1534379275
    },
    {
        "content": "<p>You have to do the calculation in a location where all of the descendant items are in context</p>",
        "id": 153987250,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1534379296
    },
    {
        "content": "<p>You can't put the calculation on a question because it has no access to other questions at that point.</p>",
        "id": 153987251,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1534379316
    },
    {
        "content": "<p>total score at the end  - no need to use it again</p>",
        "id": 153987288,
        "sender_full_name": "Eric Haas",
        "timestamp": 1534384468
    },
    {
        "content": "<p>and I thought the last time we spoke we agreed to putting in the hidden answer?</p>",
        "id": 153987289,
        "sender_full_name": "Eric Haas",
        "timestamp": 1534384497
    },
    {
        "content": "<p>You can decide if you want the answer hidden or not.  If it's something a user should see when looking at a completed form, it shouldn't be hidden.</p>",
        "id": 153987310,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1534386171
    },
    {
        "content": "<p>Will need to talk about this more later based on the adaptive questions use case, because is clear as mud to me Brian says one thing and you another.</p>",
        "id": 153987338,
        "sender_full_name": "Eric Haas",
        "timestamp": 1534393397
    },
    {
        "content": "<p>The output of a calculation is an answer, and it can be displayed or hidden depending on what you desire as the Q author.</p>",
        "id": 153987359,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1534394952
    },
    {
        "content": "<p>That's what Lloyd is saying too right?</p>",
        "id": 153987360,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1534394961
    },
    {
        "content": "<p>Yes.  Calculation gets done at one place in the model.  Value gets exposed as a question answer.</p>",
        "id": 153987413,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1534399251
    },
    {
        "content": "<p>I'm only concerned about exposing the value.   So it looks like we are talking about 2 different things</p>",
        "id": 153987427,
        "sender_full_name": "Eric Haas",
        "timestamp": 1534400681
    },
    {
        "content": "<p>The value itself will be exposed as an answer.  It'll look the same as if the user had filled it in.</p>",
        "id": 153987429,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1534400732
    },
    {
        "content": "<p>In the questionnaire, there'll be two extensions - one that calculates the value and one that says which question answer the value should appear on.</p>",
        "id": 153987430,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1534400760
    },
    {
        "content": "<p>so I am thinking of an adaptive questionnaire that is a black box that calculates the score based on the   the q's and a's that a passed to it,  why does it need extensions?  It just reports them out as another q-a pair?</p>",
        "id": 153987433,
        "sender_full_name": "Eric Haas",
        "timestamp": 1534401036
    },
    {
        "content": "<p>In that case, it just spits out the score as an answer.</p>",
        "id": 153987434,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1534401057
    },
    {
        "content": "<p>yes.</p>",
        "id": 153987435,
        "sender_full_name": "Eric Haas",
        "timestamp": 1534401078
    },
    {
        "content": "<p>I think we are talking about 2 different use cases</p>",
        "id": 153987436,
        "sender_full_name": "Eric Haas",
        "timestamp": 1534401094
    },
    {
        "content": "<p>If you're calculating a score of any type and want it to be present in the QuestionnaireResponse, it'll be in a question answer.  If you don't want the user to see it, you can make it \"hidden\", but that's where it'll be.</p>",
        "id": 153987438,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1534401150
    },
    {
        "content": "<p>A question regarding discovery: its unclear if we are assuming that the base-server that is listing  the questionnaires (<code>/[base-server]/Questionnaire/</code>) SHALL support <code>$next-operation</code>?  </p>\n<p>I'm thinking of a scenario where EHR systems might list \"approved\" <code>/[ehr-server]/Questionnaire/</code> but the adaptive blackbox service enabling the <code>$next-question</code> operation is on a different server.</p>",
        "id": 176965047,
        "sender_full_name": "Raheel Sayeed",
        "timestamp": 1569871595
    },
    {
        "content": "<blockquote>\n<p>A question regarding discovery: its unclear if we are assuming that the base-server that is listing  the questionnaires (<code>/[base-server]/Questionnaire/</code>) SHALL support <code>$next-operation</code>?  </p>\n<p>I'm thinking of a scenario where EHR systems might list \"approved\" <code>/[ehr-server]/Questionnaire/</code> but the adaptive blackbox service enabling the <code>$next-question</code> operation is on a different server.</p>\n</blockquote>\n<p>In this case, the <code>Questionnaire.url</code>would be the actual Adaptive service endpoint.</p>",
        "id": 176965328,
        "sender_full_name": "Raheel Sayeed",
        "timestamp": 1569871767
    },
    {
        "content": "<p>We've agreed to add an extension to the 'adaptive' questionnaire profile in SDC to allow identification of the server(s) that are known to support $next-question for that particular form.  Certainly extracting the 'base' from the Questionnaire's canonical URL would be a fallback, but it's not a given that there would even be a FHIR endpoint there, let alone that it would support $next-question.</p>",
        "id": 176982834,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1569884861
    },
    {
        "content": "<p>We were thinking of returning possibly more than one question item in the contained Questionniare resource. Is this compatible with the design intention of <code>$next-question</code>?</p>",
        "id": 182983720,
        "sender_full_name": "Brian Kaney",
        "timestamp": 1575915604
    },
    {
        "content": "<p>Yes.  You can add multiple questions in a single call.  (And all previously asked questions will be there too.)</p>",
        "id": 182985385,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1575916632
    },
    {
        "content": "<p>If the previously asked questions are present too, does that mean the user can see them and maybe edit the previous answers?</p>",
        "id": 182985800,
        "sender_full_name": "Paul Lynch",
        "timestamp": 1575916915
    },
    {
        "content": "<p>It's a stateless operation, so in theory, yes, though depending on what chances you make, it may throw the whole thing out of whack and your next version of the questionnaire may contain less questions rather than more (going back to where you broke things).  There's also an extension that allows control over whether a user can go 'back' and edit.</p>",
        "id": 182988707,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1575918637
    },
    {
        "content": "<p>We don't have that extension enabled for this profile though - feel free to submit a change request to get it enabled.</p>",
        "id": 182988760,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1575918686
    },
    {
        "content": "<p>I don't recall that extension.  Do you remember the name?</p>",
        "id": 182991599,
        "sender_full_name": "Paul Lynch",
        "timestamp": 1575920361
    },
    {
        "content": "<p>It may not even exist yet.  We approved the change request.  Not sure if we nailed down the name.</p>",
        "id": 182992620,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1575921111
    },
    {
        "content": "<p>I can think of a number of cases where editing previous answers in an adaptive questionnaire would be very undesirable.  However, I suppose another approach would be for the server to send back the previously answered questions marked as \"readOnly\" (for each of them).  I suppose the server that is in charge of generating the questionnaire would know whether that should be done or not.</p>",
        "id": 182992912,
        "sender_full_name": "Paul Lynch",
        "timestamp": 1575921272
    },
    {
        "content": "<p>Yes.  Certainly makes sense for us to describe the issue and how best to deal with it.</p>",
        "id": 182993913,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1575921831
    },
    {
        "content": "<p>We documented some of this in the Argo Q guide after we sat down at Connectathon and hashed it out.</p>",
        "id": 183090394,
        "sender_full_name": "Eric Haas",
        "timestamp": 1576004462
    }
]