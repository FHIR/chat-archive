[
    {
        "content": "<p>Is it documented someplace that the result of a calculatedExpression should agree with item.type, and what the behavior should be if it doesn't?  I couldn't find it.</p>",
        "id": 235922504,
        "sender_full_name": "Paul Lynch",
        "timestamp": 1619219971
    },
    {
        "content": "<p>Probably not defined - care to create a change request?</p>",
        "id": 235979938,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1619278895
    },
    {
        "content": "<p><a href=\"http://jira.hl7.org/browse/FHIR-31991\">FHIR-31991</a></p>",
        "id": 236221737,
        "sender_full_name": "Paul Lynch",
        "timestamp": 1619461847
    },
    {
        "content": "<p>Hey <span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> , can <code>calculatedExpression</code> be used to copy the value/answer of another item?</p>",
        "id": 241787902,
        "sender_full_name": "Ephraim Kigamba",
        "timestamp": 1623077402
    },
    {
        "content": "<p>Yes, though you might also need <code>variable</code>, depending on the relative location.</p>",
        "id": 241788074,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1623077465
    },
    {
        "content": "<p>Thanks <span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> Do you have a quick example where variable would be needed?</p>",
        "id": 241892924,
        "sender_full_name": "Ephraim Kigamba",
        "timestamp": 1623145602
    },
    {
        "content": "<p>calculatedExpression will only have access to descendant items.  If the item you want to copy is a sibling or ancestor, you'll have to capture the value in a variable to be able to reference it with calculatedExpression in the current item.</p>",
        "id": 241918580,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1623158863
    },
    {
        "content": "<p>Oh! Cool. Now I get you</p>",
        "id": 241919092,
        "sender_full_name": "Ephraim Kigamba",
        "timestamp": 1623159043
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191320\">Lloyd McKenzie</span> <a href=\"#narrow/stream/179255-questionnaire/topic/calculatedExpression.20.26.20type/near/241918580\">said</a>:</p>\n<blockquote>\n<p>calculatedExpression will only have access to descendant items.  If the item you want to copy is a sibling or ancestor, you'll have to capture the value in a variable to be able to reference it with calculatedExpression in the current item.</p>\n</blockquote>\n<p><span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> I don't think that is correct, in general.  An Expression can access anything in the Questionnaire/QuestionnaireResponse via %questionnaire and %resource.  However, if you are dealing with an Expression in a repeating group, you can't find the correct repetition that way, and need to rely on %context, which limits you to the item and its children.  In that case you would want a variable on the repeating group.</p>",
        "id": 241937354,
        "sender_full_name": "Paul Lynch",
        "timestamp": 1623165862
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"195344\">@Paul Lynch</span> Noted. Thanks for the clarification.</p>",
        "id": 241938203,
        "sender_full_name": "Ephraim Kigamba",
        "timestamp": 1623166181
    }
]