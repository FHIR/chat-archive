[
    {
        "content": "<p>This response is one I am generating which comes from a question where the patient is asked something, and responds in such a way that the patient is requested to take a measurement with a medical device and report the results. At the same time the answer is to reference the Observation resources generated by the medical device and include them within the answer. In this manner the reader of the QR can locate the Observations and examine that as well. </p>\n<p>The structure is valid but I wonder if this is a total abuse of the Q-QR intent and there is an already defined way to do this kind of referencing. I took a look at the SDC IG but did not really find what I wanted.  On the other hand, the thing I am trying to do may just be a very straight forward use of the Q and QR.</p>\n<p>I have not figured out the appropriate Q item struct to ask such a question yet. That is a lot harder.<br>\n(Ignore the codes)</p>\n<div class=\"codehilite\"><pre><span></span><code>{\n  &quot;linkId&quot;: &quot;/matrix/69677-3&quot;,\n  &quot;text&quot;: &quot;Feeling your heart pound or race&quot;,\n  &quot;answer&quot;: [\n    {\n      &quot;valueCoding&quot;: {\n        &quot;code&quot;: &quot;LA18335-2&quot;,\n        &quot;display&quot;: &quot;Bothered a little&quot;\n      },\n      &quot;item&quot;: [\n        {\n          &quot;linkId&quot;: &quot;/matrix/77777-77&quot;,\n          &quot;text&quot;: &quot;Take measurement with your pulse ox and report SpO2 and Pulse Rate&quot;,\n          &quot;answer&quot;: [\n            {\n              &quot;valueQuantity&quot;: {\n                &quot;value&quot;: 99,\n                &quot;system&quot;: &quot;http://unitsofmeasure.org&quot;,\n                &quot;code&quot;: &quot;%&quot;\n              }\n            },\n            {\n              &quot;valueReference&quot;: {\n                &quot;reference&quot;: &quot;/Observation/spo2-2021-09-20-06-24-05&quot;\n              }\n            },\n            {\n              &quot;valueQuantity&quot;: {\n                &quot;value&quot;: 119,\n                &quot;system&quot;: &quot;http://unitsofmeasure.org&quot;,\n                &quot;code&quot;: &quot;{beat}/min&quot;\n              }\n            },\n            {\n              &quot;valueReference&quot;: {\n                &quot;reference&quot;: &quot;/Observation/pr-2021-09-20-06-24-05&quot;\n              }\n            }\n          ]\n        }\n      ]\n    }\n  ]\n}\n</code></pre></div>",
        "id": 254280026,
        "sender_full_name": "Brian Reinhold",
        "timestamp": 1632259192
    },
    {
        "content": "<p>You can't have multiple answers that mix valueQuantity and valueReference.  All answers must have the same type and all answer repetitions must be answers to  the same question.  So you'd need multiple questions.  Also, if you want to provide instructions to do something before a set of questions, that should live in a display item, not a question text.    As a rule, curly-braces content in UCUM units is not recommended.  Also, if you're pointing to the Observations, why bother capturing the values?</p>",
        "id": 254289822,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1632264510
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191320\">Lloyd McKenzie</span> Okay - so I am trying to figure out when a one would have an array of answers. Would the reporting of a systolic, diastolic, and mean pressure be such a case? And how would one report both the values of the measurement as an answer and reference the Observation and show that they belong together? It may be overkill but say you wanted to do it. You couldn't have instructions that say if you answer A or B to question X, take your blood pressure and record the sys, dias, and mean and reference the Observation containing the data reported by the BP cuff?</p>",
        "id": 254293654,
        "sender_full_name": "Brian Reinhold",
        "timestamp": 1632267114
    },
    {
        "content": "<p>An array of answers would be something like \"Which of the following questions did your relative have?\" and with a list of possible options to choose from.   Or \"What facilities have you had encounters with in the past year?\" and a set of References.</p>",
        "id": 254298926,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1632270953
    },
    {
        "content": "<p>Systolic, Diastolic and mean would each be separate questions.</p>",
        "id": 254298976,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1632270970
    },
    {
        "content": "<p>The belonging together bit wouldn't be necessary if you just pointed to the Observation, but I suppose the observation could be a child of the reported value.  (It would actually make more sense for the reported value to be a child of the Observation - you could then auto-populate by grabbing the data from the Observation, as opposed to having the user type it and quite possibly get it wrong.)</p>",
        "id": 254299049,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1632271048
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191320\">Lloyd McKenzie</span> It does, in reality, make sense for the data to be auto-entered from the Observation (or from the PHD data). But in that regard it would seem the more logical question would be to ask the patient to take a blood pressure measurement - a single question or, rather, instruction to do something (it's not really a question but it does have a response). The answer would be a valueReference and perhaps a bunch  of child items or one child item with multiple valueQuantities. It might be a request for all the data taken by the device. BP PHDs tend to report both BP and pulse rate as a Pulse OX tends to report SpO2 and PR.</p>\n<p>Another thing I am trying to do here is to integrate the QuestionnaireResponse with the PHD data upload so there is not a lot of back-and-forth between gateway and server. The Questionnaire may conditionally ask for a measurement to be taken by a PHD and I want to link those Observations to that answer and upload the QR and the PHD data together (transaction Bundle). It may also be the case that the gateway is triggered to retrieve a Questionnaire or present a Questionnaire should a routine measurement have a certain value. I think this will require more investigation into how the Questionnaire's items would be constructed to do this. The QR is clearly Questionnaire-driven.</p>\n<p>I am exposing my ignorance here but having Questionniares associated with PHD data uploads does seem to be the next logical step.</p>",
        "id": 254333453,
        "sender_full_name": "Brian Reinhold",
        "timestamp": 1632299887
    },
    {
        "content": "<p>What I would do is a 'display' item in front of a group that instructs them to take the blood pressure or whatever else, then have questions that get them to select the recent measurements (with extensions to restrict to the right Observation types and a timeframe within the last day, hour, or whatever.  The Observation would presumably have to be posted to the server before the QuestionnaireResponse.  (The PHD has to post it <em>somewhere</em> before the QR can point to it.)</p>",
        "id": 254391343,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1632326383
    }
]