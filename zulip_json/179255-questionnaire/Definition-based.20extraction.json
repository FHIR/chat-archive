[
    {
        "content": "<p>For activating Definition-based extraction, I think we need to add an extension <br>\n<a href=\"http://hl7.org/fhir/uv/sdc/2019May/extension-sdc-questionnaire-itemContext.html\">http://hl7.org/fhir/uv/sdc/2019May/extension-sdc-questionnaire-itemContext.html</a><br>\nwhat goes into the value of that extension?</p>",
        "id": 229665628,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1615385582
    },
    {
        "content": "<p>Typically a FHIRPath</p>",
        "id": 229699521,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1615394743
    },
    {
        "content": "<p>Path to where?</p>",
        "id": 229702179,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1615395597
    },
    {
        "content": "<p>From the context associated with the containing item to the context associated with this item.</p>",
        "id": 229706381,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1615396930
    },
    {
        "content": "<p>I have an questionnaire q1 that I want to use to populate a patient profile p1 and 2 observations o1 and o2<br>\nat the top level of q1, do I need to add that extension? Or I need to populate this extension for each questionnaire item that I want to map to the patient/observation?</p>",
        "id": 229734136,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1615406929
    },
    {
        "content": "<p>You'd have a context for your overall Questionnaire and then you'd establish separate context for each of the two Observation questions.</p>",
        "id": 229741816,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1615409443
    },
    {
        "content": "<p>what is the context for the overall questionnaire?</p>",
        "id": 229742949,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1615409862
    },
    {
        "content": "<p>Patient?</p>",
        "id": 229742961,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1615409868
    },
    {
        "content": "<p>so I put that extension 3 times? one where the value is ..../MyPatient, another ..../MyObservation1, and ..../MyObservation2 ?</p>",
        "id": 229743167,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1615409929
    },
    {
        "content": "<p>You can have itemContext for the Questionnaire as a whole too.  That context might be a query</p>",
        "id": 229760562,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1615416110
    },
    {
        "content": "<p>The current extension name is itemExtractionContext, and is at <a href=\"http://build.fhir.org/ig/HL7/sdc/StructureDefinition-sdc-questionnaire-itemExtractionContext.html\">http://build.fhir.org/ig/HL7/sdc/StructureDefinition-sdc-questionnaire-itemExtractionContext.html</a>.</p>",
        "id": 229768058,
        "sender_full_name": "Paul Lynch",
        "timestamp": 1615420070
    },
    {
        "content": "<p>I think the Patient might be set with the <a href=\"http://build.fhir.org/ig/HL7/sdc/StructureDefinition-sdc-questionnaire-launchContext.html\">launchContext</a> extension, in which case itemExtractContext for the patient would be a very simple FHIRPath that just said \"%patient\".</p>",
        "id": 229768435,
        "sender_full_name": "Paul Lynch",
        "timestamp": 1615420280
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> <span class=\"user-mention\" data-user-id=\"191832\">@Jose Costa Teixeira</span> </p>\n<p>Looking for some help here: We are using a Definition based extraction approach to extract the data from the questionnaire response.<br>\nIn this example:</p>\n<ul>\n<li>Questionnaire has an item to record the body temperature.</li>\n<li>We also need to update the Observation.code while extracting questionnaire responses for body temperature.</li>\n</ul>\n<p>A couple of questions:</p>\n<ul>\n<li>What is the correct way to extract the code? </li>\n<li>Can it be within the root item? - example 1 below - if so, what is the correct expression?</li>\n<li>Or should we use hidden field to extract like in example 2 below</li>\n<li>In general is there best practice for extracting the QuantityValue with the code system etc</li>\n</ul>\n<p>Example 1</p>\n<div class=\"codehilite\"><pre><span></span><code>{\n      &quot;text&quot;: &quot;Temperature&quot;,\n      &quot;type&quot;: &quot;group&quot;,\n      &quot;linkId&quot;: &quot;5.0.0&quot;,\n      &quot;extension&quot;: [\n        {\n          &quot;url&quot;: &quot;http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-itemExtractionContext&quot;,\n          &quot;valueExpression&quot;: {\n            &quot;language&quot;: &quot;application/x-fhir-query&quot;,\n            &quot;expression&quot;: &quot;Observation&quot;,\n            &quot;name&quot;: &quot;temperature&quot;\n          }\n        },\n      &quot;definition&quot;: &quot;http://hl7.org/fhir/StructureDefinition/Observation#observation.code&quot;,\n      &quot;code&quot; : [\n       {\n          &quot;code&quot; : &quot;8310-5&quot;,\n          &quot;display&quot; : &quot;Temperature&quot;,\n          &quot;system&quot; : &quot;http://loinc.org&quot;\n       }\n      ],\n        {\n          &quot;url&quot;: &quot;http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl&quot;,\n          &quot;valueCodeableConcept&quot;: {\n            &quot;coding&quot;: [\n              {\n                &quot;system&quot;: &quot;http://hl7.org/fhir/questionnaire-item-control&quot;,\n                &quot;code&quot;: &quot;page&quot;,\n                &quot;display&quot;: &quot;Page&quot;\n              }\n            ],\n            &quot;text&quot;: &quot;Page&quot;\n          }\n        }\n      ],\n      &quot;item&quot;: [\n        {\n          &quot;text&quot;: &quot;Add instructions for capturing temperature&quot;,\n          &quot;type&quot;: &quot;display&quot;,\n          &quot;linkId&quot;: &quot;5.1.0&quot;\n        },\n        {\n          &quot;linkId&quot;: &quot;5.2.0&quot;,\n          &quot;type&quot;: &quot;group&quot;,\n          &quot;definition&quot;: &quot;http://hl7.org/fhir/StructureDefinition/Observation#Observation.valueQuantity&quot;,\n          &quot;extension&quot;: [\n            {\n              &quot;url&quot;: &quot;http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-itemExtractionContext&quot;,\n              &quot;valueExpression&quot;: {\n                &quot;language&quot;: &quot;application/x-fhir-query&quot;,\n                &quot;expression&quot;: &quot;Quantity&quot;,\n                &quot;name&quot;: &quot;quantity&quot;\n              }\n            }\n          ],\n          &quot;item&quot;: [\n            {\n              &quot;definition&quot;: &quot;http://hl7.org/fhir/StructureDefinition/Observation#Observation.valueQuantity.value&quot;,\n              &quot;text&quot;: &quot;Record temperature&quot;,\n              &quot;type&quot;: &quot;decimal&quot;,\n              &quot;linkId&quot;: &quot;5.2.1&quot;,\n              &quot;extension&quot;: [\n                {\n                  &quot;url&quot;: &quot;http://hl7.org/fhir/StructureDefinition/minValue&quot;,\n                  &quot;valueDecimal&quot;: 35.0\n                },\n                {\n                  &quot;url&quot;: &quot;http://hl7.org/fhir/StructureDefinition/maxValue&quot;,\n                  &quot;valueDecimal&quot;: 45.0\n                }\n              ]\n            },\n            {\n              &quot;text&quot;: &quot;Unit&quot;,\n              &quot;type&quot;: &quot;choice&quot;,\n              &quot;linkId&quot;: &quot;5.2.2&quot;,\n              &quot;required&quot;: true,\n              &quot;definition&quot;: &quot;http://hl7.org/fhir/StructureDefinition/Observation#Observation.valueQuantity.code&quot;,\n              &quot;extension&quot;: [\n                {\n                  &quot;url&quot;: &quot;http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl&quot;,\n                  &quot;valueCodeableConcept&quot;: {\n                    &quot;coding&quot;: [\n                      {\n                        &quot;system&quot;: &quot;http://hl7.org/fhir/questionnaire-item-control&quot;,\n                        &quot;code&quot;: &quot;drop-down&quot;,\n                        &quot;display&quot;: &quot;Drop down&quot;\n                      }\n                    ],\n                    &quot;text&quot;: &quot;Drop down&quot;\n                  }\n                }\n              ],\n              &quot;answerOption&quot;: [\n                {\n                  &quot;valueCoding&quot;: {\n                    &quot;code&quot;: &quot;F&quot;,\n                    &quot;display&quot;: &quot;F&quot;\n                  }\n                },\n                {\n                  &quot;valueCoding&quot;: {\n                    &quot;code&quot;: &quot;C&quot;,\n                    &quot;display&quot;: &quot;C&quot;\n                  }\n                }\n              ]\n            }\n          ]\n        },\n      ]\n    },\n</code></pre></div>\n<p>Example 2: </p>\n<div class=\"codehilite\"><pre><span></span><code>&quot;item&quot;: [\n            {\n              &quot;definition&quot;: &quot;http://hl7.org/fhir/StructureDefinition/Observation#Observation.code.coding&quot;,\n              &quot;type&quot;: &quot;group&quot;,\n              &quot;linkId&quot;: &quot;5.3.1&quot;,\n              &quot;extension&quot;: [\n                {\n                  &quot;url&quot;: &quot;http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-itemExtractionContext&quot;,\n                  &quot;valueExpression&quot;: {\n                    &quot;language&quot;: &quot;application/x-fhir-query&quot;,\n                    &quot;expression&quot;: &quot;Coding&quot;,\n                    &quot;name&quot;: &quot;coding&quot;\n                  }\n                }\n              ],\n              &quot;item&quot;: [\n                {\n                  &quot;definition&quot;: &quot;http://hl7.org/fhir/StructureDefinition/Observation#Observation.code.coding.code&quot;,\n                  &quot;type&quot;: &quot;string&quot;,\n                  &quot;linkId&quot;: &quot;5.3.1.1&quot;,\n                  &quot;initial&quot;: [\n                    {\n                      &quot;valueString&quot;: &quot;8310-5&quot;\n                    }\n                  ]\n                },\n                {\n                  &quot;definition&quot;: &quot;http://hl7.org/fhir/StructureDefinition/Observation#Observation.code.coding.system&quot;,\n                  &quot;type&quot;: &quot;string&quot;,\n                  &quot;linkId&quot;: &quot;5.3.1.2&quot;,\n                  &quot;initial&quot;: [\n                    {\n                      &quot;valueString&quot;: &quot;http://loinc.org&quot;\n                    }\n                  ]\n                },\n                {\n                  &quot;definition&quot;: &quot;http://hl7.org/fhir/StructureDefinition/Observation#Observation.code.coding.display&quot;,\n                  &quot;type&quot;: &quot;string&quot;,\n                  &quot;linkId&quot;: &quot;5.3.1.3&quot;,\n                  &quot;initial&quot;: [\n                    {\n                      &quot;valueString&quot;: &quot;Temperature&quot;\n                    }\n                  ]\n                }\n              ]\n</code></pre></div>\n<p>Any general best practice or examples would be super helpful!</p>\n<p>Thanks in advance</p>\n<p>cc: <span class=\"user-mention\" data-user-id=\"396904\">@Aditya Kurkure</span> <span class=\"user-mention\" data-user-id=\"366686\">@Jing Tang</span> <span class=\"user-mention\" data-user-id=\"199006\">@Peter Lubell-Doughtie</span></p>",
        "id": 248349818,
        "sender_full_name": "Fred Hersch",
        "timestamp": 1628083896
    },
    {
        "content": "<p>See response here: <a href=\"#narrow/stream/179255-questionnaire/topic/Need.20advice.20on.20how.20to.20add.20Observation.2Ecode.20in.20questionnaire\">https://chat.fhir.org/#narrow/stream/179255-questionnaire/topic/Need.20advice.20on.20how.20to.20add.20Observation.2Ecode.20in.20questionnaire</a></p>",
        "id": 248356623,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1628087015
    }
]