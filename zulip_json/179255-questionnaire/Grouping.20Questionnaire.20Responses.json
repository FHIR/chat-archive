[
    {
        "content": "<p>I don't know if this question belongs in the questionnaire track or somewhere else.</p>\n<p>I have a similar issue to @Grey Faulkenberry  and  his question about grouping Questionnaires, but I want to group questionnaire responses together. I don't think the PlanDefinition resource fits our use case involving clinical study protocols and administrative forms.</p>\n<p>For some of the clinical studies, there might be 1 study initiation questionnaire response, 3 consent questionnaire responses (one per study site), 3 determination questionnaire responses (one per study site),  1 protocol questionnaire response, 4 continuing review questionnaire responses (per regulatory requirements and length of study) and 7 adverse event questionnaire responses.  Another study might have a different distribution of questionnaire responses.   I am debating trying to use the List resource, vs. a dynamically updated QuestionnaireResponse resource so that my application can present the group of completed questionnaire responses to the researchers and study coordinators for the intent of reviewing/editing the questionnaire responses for a particular study. </p>\n<p>Does anyone have any feedback on whether a QuestionnaireResponse Resource vs a List Resource would be a better approach?</p>\n<p>If I used a List Resource, I was thinking something like this:</p>\n<p>&lt;List xmlns=\"<a href=\"http://hl7.org/fhir\">http://hl7.org/fhir</a>\"&gt;</p>\n<p>&lt;id value=\"study # 12345678\"/&gt; </p>\n<p>&lt;mode value=\"working\"/&gt; </p>\n<p>&lt;title value=\"List of the questionnaire responses for study # 12345678\"/&gt; </p>\n<p>&lt;status value=\"current\"/&gt; </p>\n<p>&lt;entry&gt;<br>\n    &lt;item&gt;<br>\n            &lt;reference value=\"QuestionnaireResponse/851\" /&gt;<br>\n            &lt;display value=\"Study Initiation QR# 851\" /&gt;<br>\n    &lt;/item&gt;<br>\n  &lt;/entry&gt;</p>\n<p>&lt;entry&gt;<br>\n    &lt;item&gt;<br>\n            &lt;reference value=\"QuestionnaireResponse/852\" /&gt;<br>\n            &lt;display value=\"Determination Letter QR# 852\" /&gt;<br>\n    &lt;/item&gt;<br>\n  &lt;/entry&gt;</p>\n<p>&lt;entry&gt;<br>\n     &lt;item&gt;<br>\n            &lt;reference value=\"QuestionnaireResponse/853\" /&gt;<br>\n            &lt;display value=\"Determination Letter QR# 853\" /&gt;<br>\n    &lt;/item&gt;<br>\n  &lt;/entry&gt;</p>\n<p>&lt;entry&gt;<br>\n    &lt;item&gt;<br>\n            &lt;reference value=\"QuestionnaireResponse/854\" /&gt;<br>\n            &lt;display value=\"Determination Letter QR# 854\" /&gt;<br>\n    &lt;/item&gt;<br>\n  &lt;/entry&gt;</p>\n<p>&lt;entry&gt;<br>\n    &lt;item&gt;<br>\n            &lt;reference value=\"QuestionnaireResponse/855\" /&gt;<br>\n            &lt;display value=\"Protocol QR# 855\" /&gt;<br>\n    &lt;/item&gt;<br>\n  &lt;/entry&gt;</p>\n<p>&lt;/List&gt;</p>",
        "id": 238176569,
        "sender_full_name": "Diane",
        "timestamp": 1620666125
    },
    {
        "content": "<p>My recommendation would be to use the <a href=\"http://build.fhir.org/extension-workflow-researchstudy.html\">http://build.fhir.org/extension-workflow-researchstudy.html</a> extension and have a search criteria on your server that allows you to filter QuestionnaireResponses based on study.  (You could also propose this be defined as a standard SearchParameter in the core spec.)</p>",
        "id": 238180378,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1620667632
    },
    {
        "content": "<p>BTW, if you are using a HAPI FHIR server, adding the ability to search on an extension is easy-- you just add a SearchParameter resource to the server (and possibly reindex-- not sure).  Here is an example of a SearchParameter for an \"age-at-event\" extension:  <a href=\"https://github.com/ncpi-fhir/ncpi-model-forge/blob/master/site_root/input/resources/search/SearchParameter-age-at-event.json\">https://github.com/ncpi-fhir/ncpi-model-forge/blob/master/site_root/input/resources/search/SearchParameter-age-at-event.json</a></p>",
        "id": 238182169,
        "sender_full_name": "Paul Lynch",
        "timestamp": 1620668343
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span>     I think that extension-workflow-researchstudy   appears to be what we need.  Thank you.</p>",
        "id": 238221149,
        "sender_full_name": "Diane",
        "timestamp": 1620685511
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"195344\">@Paul Lynch</span>     If the questionnaire response captures the reference  to the research study, then does LHC-Forms   have the ability to include this data when it sends the QR to the server?    We are using the HAPI Server.  I have never tried setting up a SearchParameter before, but that would definitely make life easier.</p>",
        "id": 238222004,
        "sender_full_name": "Diane",
        "timestamp": 1620686040
    },
    {
        "content": "<p>LHC-Forms does not know about ResearchStudies.  What you can do is ask it for the QuestionnaireResponse, and then before sending it to the FHIR server, add the workflow-researchstudy extension Lloyd mentioned.</p>",
        "id": 238223413,
        "sender_full_name": "Paul Lynch",
        "timestamp": 1620686812
    },
    {
        "content": "<p>Understood.  That's what I was thinking.</p>",
        "id": 238224306,
        "sender_full_name": "Diane",
        "timestamp": 1620687454
    },
    {
        "content": "<p>Is this how I would use the  <a href=\"http://build.fhir.org/extension-workflow-researchstudy.html\">http://build.fhir.org/extension-workflow-researchstudy.html</a> extension   to capture that this Questionnaire Response is related to the Research Study  with ID 1234?</p>\n<p>{<br>\n \"resourceType\":  \"QuestionnaireResponse\",<br>\n \"id\": \"1153\",<br>\n \"meta\": {<br>\n     \"versionId\": \"1\",<br>\n     \"lastUpdated\": \"2021-05-22T00:03:07.063+00:00\", <br>\n     \"profile\": [ \"<a href=\"http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaireresponse|2.7\">http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaireresponse|2.7</a>\" ],<br>\n         \"extension\": [<br>\n                {<br>\n                  \"url\": \"<a href=\"http://hl7.org/fhir/StructureDefinition/workflow-researchStudy\">http://hl7.org/fhir/StructureDefinition/workflow-researchStudy</a>\",<br>\n                   \"value\": {<br>\n                \"reference\": \"/ResearchStudy/1234\"<br>\n            \"display\": \"1234\"<br>\n           }<br>\n                }<br>\n              ]<br>\n            },<br>\n \"status\": \"completed\",<br>\n     \"authored\": \"2021-05-22T00:03:04.001Z\",<br>\n     \"item\":      [ <br>\n        { \"linkId\": \"Initiate_1\",<br>\n         \"text\": \"Study Title\",<br>\n         \"answer\": [ { \"valueString\": \"Testing a higher treatment dosage for condition X\" } ] },<br>\n        { \"linkId\": \"Initiate_4\", \"text\": \"Will there be compensation for participation?\", \"answer\": [ { \"valueCoding\": { \"code\": \"1\", \"display\": \"Yes\" } <br>\n    } ] }</p>\n<p>[SNIPPED]</p>\n<div class=\"codehilite\"><pre><span></span><code>]\n</code></pre></div>\n\n<p>}</p>",
        "id": 239835079,
        "sender_full_name": "Diane",
        "timestamp": 1621648898
    },
    {
        "content": "<p>There shouldn't be a '/' in front of the resource in a local reference.  Also, a local reference presumes that the ResearchStudy is on the same resource as the QuestionnaireResponse.  Otherwise, yes.</p>",
        "id": 239835420,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1621649182
    }
]