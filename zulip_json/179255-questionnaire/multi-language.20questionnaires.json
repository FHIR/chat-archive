[
    {
        "content": "<p>It was pointed out to us that this section in the specification <a href=\"http://hl7.org/fhir/questionnaire.html#sdc\" target=\"_blank\" title=\"http://hl7.org/fhir/questionnaire.html#sdc\">http://hl7.org/fhir/questionnaire.html#sdc</a> refers to support for multi-language questionnaires, but I I'm having trouble locating the multi-language part in the SDC implementation guide. If someone could guide me to it I would greatly appreciate it</p>\n<p>Also saw this fairly recent post on Translation packs for Questionnaire so maybe there currently isn't any support for that in the SDC? <a href=\"#narrow/stream/179255-questionnaire/topic/Translation.20Packs.20for.20Questionnaire\" title=\"#narrow/stream/179255-questionnaire/topic/Translation.20Packs.20for.20Questionnaire\">https://chat.fhir.org/#narrow/stream/179255-questionnaire/topic/Translation.20Packs.20for.20Questionnaire</a></p>",
        "id": 180599353,
        "sender_full_name": "Kenneth Myhra",
        "timestamp": 1573630463
    },
    {
        "content": "<p>The sdc-questionnaire profile includes a notes section that speaks to the use of translations, however it would be appropriate to at least point to this language from the rendering page.  Can you submit a change request?  We've also agreed to add support for valueset-based translations of question and other item text.</p>",
        "id": 180621987,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1573649717
    },
    {
        "content": "<p><a href=\"https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=25219\" target=\"_blank\" title=\"https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=25219\">GF#25219</a></p>\n<p><span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> with the Translation Packs for Questionnaire mentioned and some other complaints I noticed about the questionnaires getting quite big does that mean you will move away from the language extension in later versions of sdc implementation guide?</p>",
        "id": 180709239,
        "sender_full_name": "Kenneth Myhra",
        "timestamp": 1573719330
    },
    {
        "content": "<p>It's two different design approaches to the same problem.  The specification will be driven by the implementer community.  If the community consolidates on a single approach, we'll drop the other option.  If it turns out that both approaches are useful (presumably in different circumstances/environments), then we'll likely keep both but provide guidance about which should be used when.</p>",
        "id": 180728851,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1573737206
    },
    {
        "content": "<p>Thanks, that helps in our discussions regarding aligning with sdc.</p>\n<p>I could just briefly add that we have previously solved this by creating a separate Questionnaire for each language using the language attribute to identify the language + an unique identifier to tie them together.</p>",
        "id": 180730648,
        "sender_full_name": "Kenneth Myhra",
        "timestamp": 1573738554
    },
    {
        "content": "<p>With R4 can use the based on link instead of the identifier association.</p>",
        "id": 180773618,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1573764747
    },
    {
        "content": "<p>I've been asked how multi-language support to questionnaire can be provided...<br>\n.. Am I correct if I suggest to create 'specialized' questionnaire instances derived from a common parent  questionnaire   <br>\nand not to try to rely on  the 'translation'  extensions, translated designations for coded concepts , and so on ?</p>",
        "id": 238477101,
        "sender_full_name": "Giorgio Cangioli",
        "timestamp": 1620827586
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191415\">@Giorgio Cangioli</span>  That is the approach we are taking, e.g. in <a href=\"https://simplifier.net/guide/Covid-19Pre-TestPatientAssessment/Home\">this COVID-related IG</a>. For us, it has the advantage that the client  using the Questionnaire doesn't have to understand the various separate elements/extensions carrying multi-languge info - it just has to get the Questionnaire in the right language and can be language-agnostic from that point on. We typically generate the different language versions from a single template &amp; dictionaries using super-minimal custom templating code.</p>\n<p>One possible difficulty with this approach when using a standard FHIR server is that it is currently impossible to search for resources by language - see <a href=\"#narrow/stream/179166-implementers/topic/search.20by.20resource.20language\">this thread</a> and <a href=\"https://jira.hl7.org/browse/FHIR-32020\">the FHIR-32020 JIRA ticket suggesting such functionality</a>.</p>",
        "id": 238484601,
        "sender_full_name": "Morten Ernebjerg",
        "timestamp": 1620830305
    },
    {
        "content": "<p>We've talked about ConceptMap as a mechanism to provide item text translation, but I don't know that we've taken it very far</p>",
        "id": 238491278,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1620832609
    },
    {
        "content": "<p>that means more questionnaires to maintain...</p>",
        "id": 238492750,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1620833139
    },
    {
        "content": "<p>Q1: what's the downside of translation extensions?</p>",
        "id": 238492958,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1620833205
    },
    {
        "content": "<p>Q2: Doesn't multiplying questionnaire instances (in Belgium we have 3 languages, IHE Volume may have more languages) make mapping etc much more complicated?</p>",
        "id": 238493231,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1620833307
    },
    {
        "content": "<p>Thanks <span class=\"user-mention\" data-user-id=\"191415\">@Giorgio Cangioli</span> and <span class=\"user-mention\" data-user-id=\"194703\">@Morten Ernebjerg</span> for bringing it up, I was not aware of that choice, so this is my first reaction</p>",
        "id": 238493375,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1620833359
    },
    {
        "content": "<p>The downside of translation extensions is that the people creating the translations are often not the people who have authority to update the Questionnaire.</p>",
        "id": 238498015,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1620834788
    },
    {
        "content": "<p>correct. <br>\nI think we should come up with a more friendly way to handle translations. Like a resource file and the corresponding mechanisms associated with it..?</p>",
        "id": 238540097,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1620851665
    },
    {
        "content": "<p>(I was also thinking that we could have an extension to the questionnaire to list the other questionnaires that are translations of the first one, but that only makes the problem easier to track, not easier to avoid...</p>",
        "id": 238540191,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1620851709
    },
    {
        "content": "<p>I think the notion is that ConceptMap would work something like the resource file you're envisioning - though you'd need a set - one for the item text and one for each of the answer text codes.</p>",
        "id": 238548985,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1620855685
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191832\">Jose Costa Teixeira</span> <a href=\"#narrow/stream/179255-questionnaire/topic/multi-language.20questionnaires/near/238493231\">said</a>:</p>\n<blockquote>\n<p>Q2: Doesn't multiplying questionnaire instances (in Belgium we have 3 languages, IHE Volume may have more languages) make mapping etc much more complicated?</p>\n</blockquote>\n<p>WHO has six official languages</p>",
        "id": 238570941,
        "sender_full_name": "Carl Leitner",
        "timestamp": 1620871631
    },
    {
        "content": "<p>It would be great be able to take advantage of the existing tooling for translations (e.g. .po/.pot files)</p>",
        "id": 238571290,
        "sender_full_name": "Carl Leitner",
        "timestamp": 1620871947
    },
    {
        "content": "<p>what are those?</p>",
        "id": 238572025,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1620872668
    },
    {
        "content": "<p>See <a href=\"https://en.wikipedia.org/wiki/Gettext\">https://en.wikipedia.org/wiki/Gettext</a> What's nice is that they get the grammar right for plurals across multiple languages (look at discussion of Plural Form).  List of implementations is here <a href=\"https://www.gnu.org/software/gettext/manual/html_node/List-of-Programming-Languages.html#List-of-Programming-Languages\">https://www.gnu.org/software/gettext/manual/html_node/List-of-Programming-Languages.html#List-of-Programming-Languages</a>.  I have used <a href=\"https://translations.launchpad.net/\">https://translations.launchpad.net/</a> to manage .po and .pot curation for a few projects.</p>",
        "id": 238574236,
        "sender_full_name": "Carl Leitner",
        "timestamp": 1620874810
    },
    {
        "content": "<p>Supported in transifex too <a href=\"https://docs.transifex.com/formats/gettext\">https://docs.transifex.com/formats/gettext</a> (though I don't have direct experience)</p>",
        "id": 238574418,
        "sender_full_name": "Carl Leitner",
        "timestamp": 1620874956
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"248736\">@Mark Iantorno</span></p>",
        "id": 238581799,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1620882180
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191604\">Carl Leitner</span> <a href=\"#narrow/stream/179255-questionnaire/topic/multi-language.20questionnaires/near/238571290\">said</a>:</p>\n<blockquote>\n<p>It would be great be able to take advantage of the existing tooling for translations (e.g. .po/.pot files)</p>\n</blockquote>\n<p>Yes! +1 for .po/.pot (or XLIFF)! It would be great if questionnaire translation was directly compatible with industry standard tooling (not conceptually similar, but really identical). po/pot and XLIFF files can be successfully translated by lay people with POEdit and are also supported by numerous other tool chains, plus all the home-grown toolchains in enterprises (for all the steps like grammar checking, style checking, English-English translation, English-&gt;Target translation, verification and clinical validation by native speakers, etc.). po/pot also has very mature mechanisms for pluralization (it can deal with more complex rules than just 0, 1, &gt;1. Many languages have a concept of \"few\", some have special plurals for anything that ends with the digit 3, etc.).</p>",
        "id": 238589601,
        "sender_full_name": "Tilo Christ",
        "timestamp": 1620890126
    },
    {
        "content": "<p>thanks for these links! that looks interesting. did you already use that in a questionnaire setup? use a base language for the questionnaire and then on the fly translate it with the corresponding .po/pot/XLIFF file? another possiblity would be that such a  translation could be offered from the ig publisher I assume.</p>",
        "id": 238597166,
        "sender_full_name": "Oliver Egger",
        "timestamp": 1620896202
    },
    {
        "content": "<p>I think that once the translation mechanism is there, we could add it to the IG Publisher.</p>",
        "id": 238598013,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1620896765
    },
    {
        "content": "<p>Draft idea (with the information I have now - can someone give feedback/improve this?): </p>\n<ul>\n<li>One questionnaire </li>\n<li>\n<p>Multi-language = using a standard translation extension.<br>\nFor external translations:</p>\n</li>\n<li>\n<p>Include other translations in .po/.pot / XLIFF or similar mappings</p>\n</li>\n<li>The IG Publisher could be added one feature that takes such translations and adds the corresponding translation extension, therefore resulting in the same standard approach for translations (which means we only change the publisher and templates in one way).</li>\n</ul>",
        "id": 238598820,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1620897371
    },
    {
        "content": "<p>I'll make a point to look into this next.</p>",
        "id": 238619479,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1620911935
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191478\">@Oliver Egger</span> have not used that for questionnaires. Right now we're preparing a multilingual questionnaire in Vietnam.   <span class=\"user-mention\" data-user-id=\"191832\">@Jose Costa Teixeira</span> anything here that would make sense to look at yet?</p>",
        "id": 238641018,
        "sender_full_name": "Carl Leitner",
        "timestamp": 1620921478
    },
    {
        "content": "<p>The VN questionnaires are using the translation extension. Not one questionnaire per language. <br>\nPerhaps those questionnaires could be pilots for an upcoming translation feature..</p>",
        "id": 238641258,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1620921607
    },
    {
        "content": "<p>There are also multi-language discussions today in #terminology. It might be helpful to bring questionnaire, terminology, and potentially other focus areas together for a more general discussion of the issues rather than each coming up with a different solution.</p>",
        "id": 238643624,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1620922526
    },
    {
        "content": "<p>Agree. The questionnaire does contain ValueSets, so hopefully there's not a gap in approaches there.<br>\nAnd for all purposes, my asymptote is multi-language IGs with questionnaires and forms and all</p>",
        "id": 238645544,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1620923504
    },
    {
        "content": "<p>So you mention multi-language IGs, which brings up the question of general multi-language resources. This is why I wonder if a broader solution is needed. Do we want a new \"Translation\" resource that can be applied to any other resource in a way that allows editing of the translation independent of editing of the translated resource? What are the implications of this? (Details of multi-language support is not my forté, but I see the discussions swirling and think that a unified approach might be needed.)</p>",
        "id": 238646293,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1620923872
    },
    {
        "content": "<p><a href=\"#narrow/stream/179166-implementers/topic/Representing.20translations\">https://chat.fhir.org/#narrow/stream/179166-implementers/topic/Representing.20translations</a></p>",
        "id": 238647515,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1620924459
    },
    {
        "content": "<p>I think the idea is to leverage from current tools and practices, and not ask people to create translated resources, but to just provide the translation</p>",
        "id": 238647856,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1620924606
    },
    {
        "content": "<p>i.e. a Dutch author would author a resource in Dutch (sushi or JSON or XML), and a French translator would not need to author anything. They would get a list of thing to translate and provide the translations. The system would create the final artifact (which I presume would be the same questionnaire but with extensions)</p>",
        "id": 238648014,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1620924692
    },
    {
        "content": "<p>The same thing could work for valuesets and codesystems</p>",
        "id": 238648039,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1620924708
    },
    {
        "content": "<p>And IG narrative content.</p>",
        "id": 238648167,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1620924750
    },
    {
        "content": "<p>and IG templates</p>",
        "id": 238648180,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1620924755
    },
    {
        "content": "<p>I like the idea of having a standard way of supplying &amp; applying translations (we also used a version of this approach). From my POV, if there are standard (i.e. non-FHIR) solutions with good existing tooling, that would be preferable to starting from scratch with a new resource. From my experience, I think it would make a lot of difference to the technical writers/translators if they have tools to work with without having to know much about FHIR. Existing tooling could perhaps also relatively easily be built into servers like HAPI so that one could do the translation behind the scene &amp; just request the resource in the required language (speaking of an integrated approach: I think the need to be able to query for a resource by language is also part of this).</p>\n<p>I suppose one open question is whether one could use Questionnaires out-of-the-box as templates with the chosen approach, e.g. by simply putting key in the required text fields (we did that). For value sets, I guess one question is how to combine this approach with current approach of designations (or code system supplements) for different languages &amp; doing language-specific expansions of VSs (cf. <span class=\"user-mention\" data-user-id=\"191380\">@Elliot Silver</span>'s call for a unified discussion).</p>",
        "id": 238670025,
        "sender_full_name": "Morten Ernebjerg",
        "timestamp": 1620934881
    },
    {
        "content": "<p>How about putting the translation files into a DocumentReference unaltered, and an extension or careful use of existing elements in DocRef pointing back to the questionnaire. Then extensions in questionnaire that identify the key to look up in that file. That way we can add translations without modifying the questionnaire. I wonder if a pattern like this could be reused elsewhere, like vocab.</p>",
        "id": 238674334,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1620936875
    },
    {
        "content": "<p>Why a DocumentReference?  Why not just a Binary?</p>",
        "id": 238687581,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1620943317
    },
    {
        "content": "<p>Fair enough. Because DocRef came to mind and Binary didn't? Because there might be some use to additional metadata that I can't yet think of? We need to have the file indicate the canonical URL of the questionnaire; can I do this with extensions on Binary?</p>",
        "id": 238688081,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1620943550
    },
    {
        "content": "<p>How do I find the relevant Binary? I can do reverse search using context.related on the questionnaire if it is DocRef.</p>",
        "id": 238688972,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1620943949
    },
    {
        "content": "<p>If the Questionnaire points to the Binary, you can just do a 'read'.</p>",
        "id": 238693020,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1620946389
    },
    {
        "content": "<p>My thought was that the translation file point to the Questionnaire. That way the person doing the translations doesn't need to modify the Questionnaire. Additionally, you can have multiple translations all pointing to the same Questionnaire.</p>",
        "id": 238693115,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1620946454
    },
    {
        "content": "<p>I agree that the person doing the translation should never have to touch the Questionnaire. Their skills (e.g. \"Certified translator for French medical devices\" - a non-technical liberal arts degree) and their tooling (AcroLinx, Cosima, translation  memory, etc.) would not allow them to do that.<br>\nOne commonly employed mechanism is that the \"thing to be translated\" knows the base name of the translation file and then augments that with the desired locale at runtime in order to resolve this to the actual file. In essence what browsers are also doing with the good old \"Accept-Language\" header. That way you would ever only encode the base name into the Questionnaire and not touch it again after creation.</p>",
        "id": 238743431,
        "sender_full_name": "Tilo Christ",
        "timestamp": 1620986377
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"192169\">@Tilo Christ</span>, that's similar to what we did with our Flutter remake of the <a href=\"https://github.com/firejuun/prapare\">PRAPARE Questionnaire</a>.</p>\n<p>Granted, we connected our translation to the question based on its linkId, everything was preset at compile time.</p>\n<p>I know this is a bit more Flutter specific, but the <a href=\"https://github.com/aloisdeniel/flutter_sheet_localization\">package we used</a> connects to a single <a href=\"https://docs.google.com/spreadsheets/d/1PLDOZe_YBBc2ORPoUqA3R6v7_5pn5VLFgLChcyKy8PM/edit?usp=drivesdk\">Google spreadsheet</a> so that, from the perspective of the translator, all they need to review is the content within a single column.</p>\n<p>There are probably many ways to make this more extensible for other approaches and tech stacks. The spreadsheet approach gave us access to <code>=GOOGLETRANSLATE()</code>, which was super useful in retrospect.</p>",
        "id": 238753188,
        "sender_full_name": "John Manning",
        "timestamp": 1620992350
    },
    {
        "content": "<p>Once that translation is done, I propose it should be quickly integrated in the publication mechanism.</p>",
        "id": 238756621,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1620994314
    },
    {
        "content": "<p>the people that do the translation should not need to edit the questionnaire JSON / XML... but they should be able to see the translation to see if the translation is fit for the context</p>",
        "id": 238756792,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1620994397
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"364926\">John Manning</span> <a href=\"#narrow/stream/179255-questionnaire/topic/multi-language.20questionnaires/near/238753188\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"192169\">Tilo Christ</span>, that's similar to what we did with our Flutter remake of the <a href=\"https://github.com/firejuun/prapare\">PRAPARE Questionnaire</a>.</p>\n<p>Granted, we connected our translation to the question based on its linkId, everything was preset at compile time.</p>\n<p>I know this is a bit more Flutter specific, but the <a href=\"https://github.com/aloisdeniel/flutter_sheet_localization\">package we used</a> connects to a single <a href=\"https://docs.google.com/spreadsheets/d/1PLDOZe_YBBc2ORPoUqA3R6v7_5pn5VLFgLChcyKy8PM/edit?usp=drivesdk\">Google spreadsheet</a> so that, from the perspective of the translator, all they need to review is the content within a single column.</p>\n<p>There are probably many ways to make this more extensible for other approaches and tech stacks. The spreadsheet approach gave us access to <code>=GOOGLETRANSLATE()</code>, which was super useful in retrospect.</p>\n</blockquote>\n<p>Across all the different technology stacks the two formats that are universally being used are gettext (po/pot) and XLIFF (typically the older 1.2 version). The Flutter library for gettext would be \"<a href=\"https://pub.dev/packages/i18n_extension\">https://pub.dev/packages/i18n_extension</a>\".</p>\n<p>The machine-based pre-translation certainly shaves time off the translation effort. You can use tools like \"POEdit\" or CrowdIn which will tie in with Google Translate, DeepL, etc.:</p>\n<ul>\n<li><a href=\"https://poedit.net/pro\">https://poedit.net/pro</a></li>\n<li><a href=\"https://crowdin.com/page/integrations#nav-mt-engines\">https://crowdin.com/page/integrations#nav-mt-engines</a></li>\n</ul>",
        "id": 238757348,
        "sender_full_name": "Tilo Christ",
        "timestamp": 1620994671
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191832\">Jose Costa Teixeira</span> <a href=\"#narrow/stream/179255-questionnaire/topic/multi-language.20questionnaires/near/238756792\">said</a>:</p>\n<blockquote>\n<p>the people that do the translation should not need to edit the questionnaire JSON / XML... but they should be able to see the translation to see if the translation is fit for the context</p>\n</blockquote>\n<p>With commonly used tooling they would see the original text (e.g. English), their translation, the order of the original texts, and potentially a human-readable hint (such as \"needs to fit on a small button, keep it short\")</p>",
        "id": 238757544,
        "sender_full_name": "Tilo Christ",
        "timestamp": 1620994788
    },
    {
        "content": "<p>I presume that context matters for translation - what would we need to do to ensure that the hierarchy of questions, association of answers to questions, etc. manifests appropriately in the translation tools?</p>",
        "id": 238766222,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1620998915
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191320\">Lloyd McKenzie</span> <a href=\"#narrow/stream/179255-questionnaire/topic/multi-language.20questionnaires/near/238766222\">said</a>:</p>\n<blockquote>\n<p>I presume that context matters for translation - what would we need to do to ensure that the hierarchy of questions, association of answers to questions, etc. manifests appropriately in the translation tools?</p>\n</blockquote>\n<p>Translation tools are inherently linear (think \"glorified Excel sheet\"). When I had the challenge of presenting a hierarchical questionnaire in a linear fashion for my vertically scrolling form filler I used the traversal order called \"pre-order\" in order to linearise it. I think the same would work for translations.<br>\nSee: <a href=\"https://en.wikipedia.org/wiki/Tree_traversal#Pre-order,_NLR\">https://en.wikipedia.org/wiki/Tree_traversal#Pre-order,_NLR</a></p>",
        "id": 238767890,
        "sender_full_name": "Tilo Christ",
        "timestamp": 1620999569
    },
    {
        "content": "<p>My understanding is that the translation is done by expression where the text is not unique. For example, let's say the text \"done\" appears as a caption in a button, or in a question as a status of a procedure. This will translate into different expressions in other languages. So these would be different entries to translate</p>",
        "id": 238784872,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1621006284
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191320\">Lloyd McKenzie</span> <a href=\"#narrow/stream/179255-questionnaire/topic/multi-language.20questionnaires/near/238766222\">said</a>:</p>\n<blockquote>\n<p>I presume that context matters for translation - what would we need to do to ensure that the hierarchy of questions, association of answers to questions, etc. manifests appropriately in the translation tools?</p>\n</blockquote>\n<p>My preference would be for those people to immediately see the result in the form (+1 for the form preview). At least context mismatches will be spotted that way.</p>",
        "id": 238786013,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1621006778
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191832\">Jose Costa Teixeira</span> <a href=\"#narrow/stream/179255-questionnaire/topic/multi-language.20questionnaires/near/238786013\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"191320\">Lloyd McKenzie</span> <a href=\"#narrow/stream/179255-questionnaire/topic/multi-language.20questionnaires/near/238766222\">said</a>:</p>\n<blockquote>\n<p>I presume that context matters for translation - what would we need to do to ensure that the hierarchy of questions, association of answers to questions, etc. manifests appropriately in the translation tools?</p>\n</blockquote>\n<p>My preference would be for those people to immediately see the result in the form (+1 for the form preview). At least context mismatches will be spotted that way.</p>\n</blockquote>\n<p>\"Those people\" get paid by the word and won't be bothered to learn/use somebodies tool. They have built up muscle memory for their existing highly streamlined tool chain.</p>\n<p>Regarding the context mismatches (same word needing different translation depending on context): that is indeed a real-world issue. The solution depends on the format you are using:<br>\ngettext (po/pot): Each text string can be annotated with an optional context. context + string will have to be unique.<br>\nXLIFF: Each text string is accompanied by a unique identifier</p>\n<p>For informal context (contributing to background knowledge, rather than key uniqueness), both formats support adding a human-readable comment to each translation unit.</p>\n<p>I think maybe this extension <a href=\"http://hl7.org/fhir/StructureDefinition/valueset-comments\">http://hl7.org/fhir/StructureDefinition/valueset-comments</a> could be used to fill such a human-readable comment.</p>",
        "id": 238799801,
        "sender_full_name": "Tilo Christ",
        "timestamp": 1621012676
    },
    {
        "content": "<p>agreed with <span class=\"user-mention\" data-user-id=\"191380\">@Elliot Silver</span>  that we should only have one Questionnaire here.   In the .po/.pot world, we would use the Questionnaire to generate a .pot file (translation template).  Then each language (ideally locale) would have it's own .po file containing the translations.   Note, that one way that I have dealt with the context issue is to group the translatable text based on software module - the analog to this here would be at the Questionnaire level.</p>\n<p>Translation services such as <a href=\"http://launchpad.net\">launchpad.net</a> have in-built suggestion / curation features.  See here for some examples:<br>\n<a href=\"https://translations.launchpad.net/ihris-manage/trunk/+pots/ihris-manage-person-position\">https://translations.launchpad.net/ihris-manage/trunk/+pots/ihris-manage-person-position</a></p>",
        "id": 238809195,
        "sender_full_name": "Carl Leitner",
        "timestamp": 1621016643
    },
    {
        "content": "<p>Would we then update the Questionnaire from the .po files to embed the translation extensions for use by tools that render and allow filling out the Questionnaire?</p>",
        "id": 238810840,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1621017397
    },
    {
        "content": "<p>In my vision, the Questionnaire would be single language as created by the author. Translation-aware clients would retrieve the Questionnaire and the translation file, and use the translation file when displaying the Questionnaire.</p>",
        "id": 238811587,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1621017762
    },
    {
        "content": "<p>That seems like a big ask for questionnaire clients to know how to do...  (Understanding the translation extensions is a bit of an ask, but it's less and would work using standard FHIR libraries.)</p>",
        "id": 238812835,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1621018395
    },
    {
        "content": "<p>Maybe it's a capability of the server -- if you ask for a questionnaire, and provide a locale in the HTTP header, the server will do the translation if available. Also, we've got other significant expectations of SDC actors, so is this actually too much of an ask.</p>",
        "id": 238813108,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1621018543
    },
    {
        "content": "<p>I would agree with the preference for an approach to keep the client \"dumb\" and ask the server to provide a translated questionnaire.</p>\n<p>I am not sure that supporting non-FHIR translation files is inherently harder than supporting the FHIR translation extensions. When you are building a localised client you already have to pull in the libraries to translate the UI anyhow (all the buttons, confirmation dialogs, etc. which do not live in FHIR). In my current UI framework of choice it is 25 LOC to evaluate the FHIR translation extension vs. 4 characters of code to pull in a translation from a .po file. But it does depend a bit on the framework. The Linux, Java, Flutter camps would probably agree with me, whereas the Android colleagues would prefer if it was XLIFF.</p>",
        "id": 238815547,
        "sender_full_name": "Tilo Christ",
        "timestamp": 1621019649
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191604\">Carl Leitner</span> <a href=\"#narrow/stream/179255-questionnaire/topic/multi-language.20questionnaires/near/238809195\">said</a>:</p>\n<blockquote>\n<p>Note, that one way that I have dealt with the context issue is to group the translatable text based on software module - the analog to this here would be at the Questionnaire level.</p>\n</blockquote>\n<p>I think this is going to work quite well up until the point when you start putting \"contained\" value sets/code systems into the questionnaire. I can imagine some clashes between those.</p>",
        "id": 238815873,
        "sender_full_name": "Tilo Christ",
        "timestamp": 1621019809
    },
    {
        "content": "<p>What if translation of the questionnaire is an operation with the target language as a parameter? That would allow easy retrieval of the unmodified resource, as well as a way that the server can indicate support for translation in its capability statement. The place where this runs into difficulties is with other operations on Questionnaire, like defined by SDC. How would you ask for a pre-populated questionnaire in a specific language?</p>",
        "id": 238819405,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1621021458
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191320\">Lloyd McKenzie</span> <a href=\"#narrow/stream/179255-questionnaire/topic/multi-language.20questionnaires/near/238812835\">said</a>:</p>\n<blockquote>\n<p>That seems like a big ask for questionnaire clients to know how to do...  (Understanding the translation extensions is a bit of an ask, but it's less and would work using standard FHIR libraries.)</p>\n</blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"192169\">Tilo Christ</span> <a href=\"#narrow/stream/179255-questionnaire/topic/multi-language.20questionnaires/near/238815547\">said</a>:</p>\n<blockquote>\n<p>I am not sure that supporting non-FHIR translation files is inherently harder than supporting the FHIR translation extensions. </p>\n</blockquote>\n<p>Absolutely,  multi-linguagal clients are going to be more effort than unilingual. I disagree with Lloyd that translation extensions are inherently easier than translation file because they are supported by the standard FHIR libraries. The standard FHIR libraries support what the library authors choose to support. If we settle on a mechanism that is viewed as helpful, they'll support it, particularly if it is a pattern that can be reused for things other than questionnaires. It would be great to come up with a solution that could be reused for other definitional resources (ooh, a multilinguagal IG) and for vocabulary--anything with a canonical url. (I don't think it works as well for other types of resources, but maybe.)</p>",
        "id": 238820751,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1621022090
    },
    {
        "content": "<p>Translation as an operation makes sense.  We'd need to think about validation rules.</p>",
        "id": 238821195,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1621022269
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191320\">Lloyd McKenzie</span> <a href=\"#narrow/stream/179255-questionnaire/topic/multi-language.20questionnaires/near/238821195\">said</a>:</p>\n<blockquote>\n<p>Translation as an operation makes sense.  We'd need to think about validation rules.</p>\n</blockquote>\n<p>How would you see validation rules change with a translated questionnaire? I would assume that all the coded info would be identical; order, cardinalities, etc. identical. Only things like \"item.text\", \"display\", etc. would change from one language to another one?</p>",
        "id": 238826220,
        "sender_full_name": "Tilo Christ",
        "timestamp": 1621024653
    },
    {
        "content": "<p>There's an expectation in a QuestionnaireResponse that item.text in the response matches item.text in the Questionnaire.  Similarly 'display' values for codes are expected to match those in the code system (though it's only a warning if they don't match).</p>",
        "id": 238826997,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1621025024
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191380\">Elliot Silver</span> <a href=\"#narrow/stream/179255-questionnaire/topic/multi-language.20questionnaires/near/238819405\">said</a>:</p>\n<blockquote>\n<p>What if translation of the questionnaire is an operation with the target language as a parameter? That would allow easy retrieval of the unmodified resource, as well as a way that the server can indicate support for translation in its capability statement. The place where this runs into difficulties is with other operations on Questionnaire, like defined by SDC. How would you ask for a pre-populated questionnaire in a specific language?</p>\n</blockquote>\n<p>Regarding the proposed \"target language parameter\": Would this existing part of the spec already suffice? <a href=\"https://hl7.org/fhir/2018May/languages.html##http\">https://hl7.org/fhir/2018May/languages.html##http</a></p>\n<p>This would in essence be a best-effort approach. I am asking the server what I want and it returns the best match that it can and tells me what that is. I think this would not strictly require an enhanced capability statement.</p>",
        "id": 238827144,
        "sender_full_name": "Tilo Christ",
        "timestamp": 1621025102
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191320\">Lloyd McKenzie</span> <a href=\"#narrow/stream/179255-questionnaire/topic/multi-language.20questionnaires/near/238826997\">said</a>:</p>\n<blockquote>\n<p>There's an expectation in a QuestionnaireResponse that item.text in the response matches item.text in the Questionnaire.  Similarly 'display' values for codes are expected to match those in the code system (though it's only a warning if they don't match).</p>\n</blockquote>\n<p>They still would -- an uploaded QR includes the language of the response, which is validated against the translated Questionnaire; translated display values are validated against translated code systems.</p>\n<p>Where I see difficulty is with \"enableWhen\" and similar elements on the client side, however if they focus only on code values, rather than the display values, it should still work.</p>\n<p><span class=\"user-mention silent\" data-user-id=\"192169\">Tilo Christ</span> <a href=\"#narrow/stream/179255-questionnaire/topic/multi-language.20questionnaires/near/238827144\">said</a>:</p>\n<blockquote>\n<p>Regarding the proposed \"target language parameter\": Would this existing part of the spec already suffice? <a href=\"https://hl7.org/fhir/2018May/languages.html##http\">https://hl7.org/fhir/2018May/languages.html##http</a></p>\n<p>This would in essence be a best-effort approach. I am asking the server what I want and it returns the best match that it can and tells me what that is. I think this would not strictly require an enhanced capability statement.</p>\n</blockquote>\n<p>I thought that was in there, thanks for finding it. My reason for suggesting an operation was the ability to control when a translated questionnaire is retrieved, and when the original resource is. I don't know if we are concerned about clients with little control over their HTTP headers.</p>\n<p>I'd still like to see something in a capabilitystatement to let you know the server supports this feature (which I think is, if we use separate translation files, beyond what is described in the languages page).</p>",
        "id": 238829839,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1621026404
    },
    {
        "content": "<p>The issue is that the canonical URL of the questionnaire doesn't change when you translate it, so if a validator retrieves the questionnaire by URL, it's going to get the original version, not the translated version - and the text won't match.</p>",
        "id": 238835594,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1621029679
    },
    {
        "content": "<p>Or, looking at it a different way, it gets whatever version of the questionnaire matches the language the request asks for, if any. If you didn't want it in russian, don't ask for it in russian.</p>",
        "id": 238835838,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1621029828
    },
    {
        "content": "<p>Versioning and translations are different things.  The version shouldn't change when you translate.</p>",
        "id": 238836952,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1621030616
    },
    {
        "content": "<p>this sounds like a great thing for a connectathon, but not this week! I'd like a SDC appendix describing how to register translation files with a forms server, and explaining how to ask for it in a particular language</p>",
        "id": 238837209,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1621030802
    },
    {
        "content": "<p>Sorry, sloppy language. I meant \"it gets the questionnaire translated into whatever language the request asks for, if any.\" My point was if you want the questionnaire in the original language, don't specify that you want it in another language.</p>",
        "id": 238837406,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1621030918
    },
    {
        "content": "<p>OK. <a href=\"http://jira.hl7.org/browse/FHIR-32379\">FHIR#32379</a></p>",
        "id": 238838841,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1621031953
    },
    {
        "content": "<p>Is this a solution that would be specific for Questionnaire or is this something we'd want for other resources - CodeSystems and Value Sets seem like obvious candidates, though maybe others too?</p>",
        "id": 238863406,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1621048789
    },
    {
        "content": "<p>I’m hoping it could be useful for others, including IGs and profiles.</p>",
        "id": 238863598,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1621048934
    },
    {
        "content": "<p>My proposal was to use 1 questionnaire and the language extension.</p>",
        "id": 238876490,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1621063183
    },
    {
        "content": "<p>Also, the point of context-sensitive translation - my answer to that is to simply include it in the IG Publication tool</p>",
        "id": 238876617,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1621063276
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"192169\">Tilo Christ</span> <a href=\"#narrow/stream/179255-questionnaire/topic/multi-language.20questionnaires/near/238799801\">said</a>:</p>\n<blockquote>\n<p>\"Those people\" get paid by the word and won't be bothered to learn/use somebodies tool. They have built up muscle memory for their existing highly streamlined tool chain.</p>\n</blockquote>\n<p>Right, so their work gets imported into the publication/build process (which I believe is normal for software translators) and they get to see the final preview of their work</p>",
        "id": 238876717,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1621063417
    },
    {
        "content": "<p>for me the solution should not rely on external translation operations - just the questionnaire get published with the necessary content in several languages. Those translations are also \"official\" deliverables.</p>",
        "id": 238876987,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1621063729
    },
    {
        "content": "<p>Sorry i missed the discussion, but are we thinking of putting the translations file on the forms server, and not in the IG?</p>",
        "id": 238877846,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1621064712
    },
    {
        "content": "<p>to me they belong in the publication process . I'm thinking of Belgium w 3 languages, but those translators are not spinning off - they are part of the official process</p>",
        "id": 238877939,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1621064797
    },
    {
        "content": "<p>I'd propose this:<br>\n<a href=\"/user_uploads/10155/TL_n2cGTBngFMRvBFjEs_i6K/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/TL_n2cGTBngFMRvBFjEs_i6K/image.png\" title=\"image.png\"><img src=\"/user_uploads/10155/TL_n2cGTBngFMRvBFjEs_i6K/image.png\"></a></div>",
        "id": 238880456,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1621067387
    },
    {
        "content": "<p>This requires (only?) 2 additions:</p>\n<ol>\n<li>Generate an XLIFF file based on the content identified as \"translatable\" (with the \"translatable\" extension or simply empty translations)</li>\n<li>Import the translation from the XLIFF into the \"translation\" extension</li>\n</ol>",
        "id": 238880571,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1621067497
    },
    {
        "content": "<p>This means the same process for internal or translations, leaving the translators with a standard workflow, I believe</p>",
        "id": 238880633,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1621067550
    },
    {
        "content": "<p>I don't think it's different to any other resource, which is why I said explain, rather than define</p>",
        "id": 238889582,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1621076983
    },
    {
        "content": "<p>right. I think all resources should benefit from such an approach</p>",
        "id": 238889987,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1621077446
    },
    {
        "content": "<p>I drafted this:<br>\n<a href=\"/user_uploads/10155/6u2Yflz-4KJnBELLrxtQgXeF/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/6u2Yflz-4KJnBELLrxtQgXeF/image.png\" title=\"image.png\"><img src=\"/user_uploads/10155/6u2Yflz-4KJnBELLrxtQgXeF/image.png\"></a></div>",
        "id": 238889990,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1621077453
    },
    {
        "content": "<p>this repo contains a few XLF files for a questoinnaire:<br>\n<a href=\"https://github.com/hl7-be/riziv-inami/tree/master/input/translations\">https://github.com/hl7-be/riziv-inami/tree/master/input/translations</a></p>",
        "id": 238891163,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1621078586
    },
    {
        "content": "<p>I remember it contains the word \"active\" which, depending on the context can be translated in different ways. In this case, the translator could quickly look at the translated result in its context (the ig publisher, or the generated form) and spot any issues.</p>",
        "id": 238892984,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1621080568
    },
    {
        "content": "<p>and the sushi to generate (almost) empty placeholders for translation:<br>\n<a href=\"https://github.com/hl7-be/riziv-inami/blob/master/input/fsh/BeAllergyIntolerance.fsh#L193:L194\">https://github.com/hl7-be/riziv-inami/blob/master/input/fsh/BeAllergyIntolerance.fsh#L193:L194</a></p>",
        "id": 238893912,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1621081366
    },
    {
        "content": "<p>the fhir resource (which has the content to create the XLF) looks like this</p>\n<div class=\"codehilite\" data-code-language=\"JSON\"><pre><span></span><code>  <span class=\"nt\">\"item\"</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n    <span class=\"p\">{</span>\n      <span class=\"nt\">\"linkId\"</span><span class=\"p\">:</span> <span class=\"s2\">\"patient\"</span><span class=\"p\">,</span>\n      <span class=\"nt\">\"text\"</span><span class=\"p\">:</span> <span class=\"s2\">\"Patient\"</span><span class=\"p\">,</span>\n      <span class=\"nt\">\"_text\"</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n        <span class=\"nt\">\"extension\"</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n          <span class=\"p\">{</span>\n            <span class=\"nt\">\"url\"</span><span class=\"p\">:</span> <span class=\"s2\">\"http://hl7.org/fhir/StructureDefinition/translation\"</span><span class=\"p\">,</span>\n            <span class=\"nt\">\"extension\"</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n              <span class=\"p\">{</span>\n                <span class=\"nt\">\"url\"</span><span class=\"p\">:</span> <span class=\"s2\">\"lang\"</span><span class=\"p\">,</span>\n                <span class=\"nt\">\"valueCode\"</span><span class=\"p\">:</span> <span class=\"s2\">\"fr-BE\"</span>\n              <span class=\"p\">},</span>\n              <span class=\"p\">{</span>\n                <span class=\"nt\">\"url\"</span><span class=\"p\">:</span> <span class=\"s2\">\"content\"</span><span class=\"p\">,</span>\n                <span class=\"nt\">\"valueString\"</span><span class=\"p\">:</span> <span class=\"s2\">\".\"</span>\n              <span class=\"p\">}</span>\n            <span class=\"p\">]</span>\n          <span class=\"p\">},</span>\n          <span class=\"p\">{</span>\n            <span class=\"nt\">\"url\"</span><span class=\"p\">:</span> <span class=\"s2\">\"http://hl7.org/fhir/StructureDefinition/translation\"</span><span class=\"p\">,</span>\n            <span class=\"nt\">\"extension\"</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n              <span class=\"p\">{</span>\n                <span class=\"nt\">\"url\"</span><span class=\"p\">:</span> <span class=\"s2\">\"lang\"</span><span class=\"p\">,</span>\n                <span class=\"nt\">\"valueCode\"</span><span class=\"p\">:</span> <span class=\"s2\">\"nl-BE\"</span>\n              <span class=\"p\">},</span>\n              <span class=\"p\">{</span>\n                <span class=\"nt\">\"url\"</span><span class=\"p\">:</span> <span class=\"s2\">\"content\"</span><span class=\"p\">,</span>\n                <span class=\"nt\">\"valueString\"</span><span class=\"p\">:</span> <span class=\"s2\">\".\"</span>\n              <span class=\"p\">}</span>\n            <span class=\"p\">]</span>\n          <span class=\"p\">}</span>\n        <span class=\"p\">]</span>\n      <span class=\"p\">},</span>\n</code></pre></div>",
        "id": 238895021,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1621082467
    },
    {
        "content": "<p>is this a topic we could address during this week?</p>",
        "id": 239092233,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1621259481
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"192169\">@Tilo Christ</span> <span class=\"user-mention\" data-user-id=\"191367\">@Brian Postlethwaite</span> <span class=\"user-mention\" data-user-id=\"195344\">@Paul Lynch</span> <span class=\"user-mention\" data-user-id=\"191478\">@Oliver Egger</span> what do you think of the approach?</p>",
        "id": 239092292,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1621259508
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191832\">Jose Costa Teixeira</span> <a href=\"#narrow/stream/179255-questionnaire/topic/multi-language.20questionnaires/near/239092233\">said</a>:</p>\n<blockquote>\n<p>is this a topic we could address during this week?</p>\n</blockquote>\n<p>If you would like me to add something to the Questionnaire track agenda for a discussion about this, I would be happy to do so.  Just pick an open slot and let me know.</p>",
        "id": 239135859,
        "sender_full_name": "Paul Lynch",
        "timestamp": 1621275265
    },
    {
        "content": "<p>I see a few groups of translation requirements:</p>\n<ul>\n<li>IG and profiles -- these are likely to be viewed on a website, and the translation will be done in advance of publication using standard translation tooling. The IG publisher and templates should be able to generate one website with all the translated langauges, and allow selection either through the http language header or explicit choice by the user (picking a language from a drop-down on every page).</li>\n<li>Definitional resources like Questionnaire, and likely terminology resources -- these are likely be to retrieved from a FHIR server, and the translation will be done in advance of publication using standard translation tooling. FHIR servers should have a way of retrieving the resource in the original or a selected langauge.</li>\n<li>\"Dynamic\" resources - These are the \"one-off\" resources like specific Observations where we want the translation to be embedded in the resource. They are likely to be retrieved from a FHIR server, and translation is done along with instance creation. For this, I see using the existing translation extensions.</li>\n</ul>\n<p>Is this a reasonable enumeration of the use cases? Are there more or fewer categories?</p>",
        "id": 239140014,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1621277051
    },
    {
        "content": "<p>(sorry only just read this) I think there are 2-3 parts here the authoring, the storage and the execition.<br>\nAuthoring I agree with those saying should be with whatever tools people natively use. However I think this only compares with valuesets/conceptmaps, structuredefs and questionnaires are the only resource types that apply here, as they are about user interaction, not storing clinical data as a result of the interaction. Labels a user sees/selects.</p>",
        "id": 239219376,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1621327956
    },
    {
        "content": "<p>Questionnaires has a concept of derivation and a re-assembly operation that this could fit into also. (original use case was for component questionnaires)</p>",
        "id": 239219457,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1621328013
    },
    {
        "content": "<p>I think this discussion should be taken outside of Questionnaire, right?</p>",
        "id": 239475421,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1621449416
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191415\">@Giorgio Cangioli</span> FYI</p>",
        "id": 239475441,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1621449426
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191832\">Jose Costa Teixeira</span> <a href=\"#narrow/stream/179255-questionnaire/topic/multi-language.20questionnaires/near/239475421\">said</a>:</p>\n<blockquote>\n<p>I think this discussion should be taken outside of Questionnaire, right?</p>\n</blockquote>\n<p>where to?</p>",
        "id": 239500187,
        "sender_full_name": "Carl Leitner",
        "timestamp": 1621460608
    },
    {
        "content": "<p><a href=\"#narrow/stream/179166-implementers/topic/Representing.20translations\">https://chat.fhir.org/#narrow/stream/179166-implementers/topic/Representing.20translations</a><br>\n?</p>",
        "id": 239506874,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1621464579
    },
    {
        "content": "<p>I see an update to <a href=\"http://jira.hl7.org/browse/FHIR-32379\">J#32379</a>. Any interesting points come up in discussion <span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span>?</p>",
        "id": 243866334,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1624584115
    },
    {
        "content": "<p>We started with a plan for Questionnaire in SDC in R4 with a plan to push it into R5 for a generic solution.  Specific questions for the community:</p>\n<ul>\n<li>Is it ok if we choose to support XLIFF only - with an expectation that anyone who wants to use PO/POT can convert to and from if necessary?</li>\n<li>We know that browsers populate the Accept-Language header for regular browser calls, however we believe that RESTful calls by apps running inside the browser will <em>NOT</em> automatically have such an Accept-Language header specified.<br>\nFeel free to look at the other thoughts are here: <a href=\"https://jira.hl7.org/browse/FHIR-32379\">https://jira.hl7.org/browse/FHIR-32379</a><br>\nMuch more discussion to come</li>\n</ul>",
        "id": 243869505,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1624588345
    },
    {
        "content": "<p>My concern was that relying on the content negotiation language only would mean from browser might be hard to \"not\" provide it and just get the raw base questionnaire</p>",
        "id": 243869540,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1624588437
    },
    {
        "content": "<p>DICOM faced a similar issue -- although you can do content negotiation in a HTTP GET, a URL in a PDF doesn't give an opportunity to specify an ACCEPT header; so they ended up adding a format parameter to the URL to provide more explicit control.</p>",
        "id": 243869751,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1624588708
    },
    {
        "content": "<p>Was there strong feeling that translation support was needed?</p>",
        "id": 243869789,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1624588789
    },
    {
        "content": "<p>We could define a similar parameter to _format for language if we needed</p>",
        "id": 243869793,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1624588798
    },
    {
        "content": "<p>Don't understand your last question <span class=\"user-mention\" data-user-id=\"191380\">@Elliot Silver</span>?</p>",
        "id": 243869842,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1624588841
    },
    {
        "content": "<p>Did the discussion go \"Wow, how did we get to R4 without supporting translation?\" or was it \"Sure, add it, I guess someone might need it, but I'm not going to bother implementing it\"?</p>",
        "id": 243869937,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1624588974
    },
    {
        "content": "<p>(Sorry, I didn't realize the topic was up for discussion or I would have tried to join the call.)</p>",
        "id": 243869949,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1624589013
    },
    {
        "content": "<p>Continuing next week I believe.</p>",
        "id": 243872395,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1624592052
    },
    {
        "content": "<p>I missed the questionnaire calls. Can someone please point me to their schedule?</p>",
        "id": 243881051,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1624603693
    },
    {
        "content": "<p>Hi!</p>\n<p>It seems that we are going to use XLIFF as a primary tool for Questionnaire translation. I don't think that it is a good idea.<br>\nWith all my respect to XML is a kind of obsolete format for our days.<br>\nPO looks like the more universal tool to do translations. There are various kind of open source and commercial tools that supports po.</p>\n<p>PO is a kind of well know translation standard and I confused a lot that we are not going to support it.<br>\nI used it to translate questionnaires from English to Hebrew and it worked just fine.<br>\nI can share my experience on the workgroup call next week.</p>",
        "id": 243906561,
        "sender_full_name": "Ilya Beda",
        "timestamp": 1624622862
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191832\">Jose Costa Teixeira</span> <a href=\"#narrow/stream/179255-questionnaire/topic/multi-language.20questionnaires/near/243881051\">said</a>:</p>\n<blockquote>\n<p>I missed the questionnaire calls. Can someone please point me to their schedule?</p>\n</blockquote>\n<p>They are Thursdays 5-6 p.m. ET.  <a href=\"https://www.hl7.org/concalls/CallDetails.cfm?concall=55578\">https://www.hl7.org/concalls/CallDetails.cfm?concall=55578</a></p>",
        "id": 243908206,
        "sender_full_name": "Paul Lynch",
        "timestamp": 1624623941
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"196255\">Ilya Beda</span> <a href=\"#narrow/stream/179255-questionnaire/topic/multi-language.20questionnaires/near/243906561\">said</a>:</p>\n<blockquote>\n<p>With all my respect to XML is a kind of obsolete format for our days.</p>\n</blockquote>\n<p>I am not sure that is a good argument for PO, since PO files are written in their own custom format (neither JSON, nor YAML, nor anything standard).  They might be easier to read, though.</p>\n<p>That being said, your input on the workgroup call would be much appreciated.  I didn't get the impression that anyone on the call yesterday had experience with XLIFF or PO, but we were hoping that since there seemed to be conversion tools in both directions, it would not be necessary to directly support both.</p>",
        "id": 243909165,
        "sender_full_name": "Paul Lynch",
        "timestamp": 1624624456
    },
    {
        "content": "<p>The basic driver for the decision is that with XLIFF there's only one file that defines both source and translations, so only one thing to point at.  Also, a (very brief) Google search seemed to suggest that XLIFF could do more than POT/PO and there seemed to be community tools that converted between the two.  Also, in general, it'll be simpler for everyone if there's only one supported approach.  I guess the last answer is that the XML file will be somewhat easier to read and write for FHIR-specific tools interested in supporting the implementations to generate the \"to translate\" file or to consume the \"translation\" files.</p>",
        "id": 243915248,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1624627740
    },
    {
        "content": "<p>All that said, if it's <em>not</em> true that the community can manage either XLIFF or POT/PO and convert between them and there's much deeper industry support for POT/PO than XLIFF, we could adjust.  (The notion that XML is obsolete doesn't fly because XML trumps custom syntax any day in terms of ease of use.)</p>",
        "id": 243915436,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1624627819
    },
    {
        "content": "<p>A couple of inputs (since the calls will be in the middle of the night from where I am residing):</p>\n<blockquote>\n<p>The basic driver for the decision is that with XLIFF there's only one file that defines both source and translations, so only one thing to point at. </p>\n</blockquote>\n<p>The same is true for both formats. The .po (aka \"gettext\") format is only using the .po file for the actual translation. The .pot file (po-template) is a .po file that has not been translated to a target language yet, but only contains the source strings. XLIFF simply uses the same file extension for either case.</p>\n<blockquote>\n<p>Also, a (very brief) Google search seemed to suggest that XLIFF could do more than POT/PO and there seemed to be community tools that converted between the two. </p>\n</blockquote>\n<p>XLIFF can indeed \"do more\" than PO, which at the same time is its blessing and its curse. While the PO spec fits on a page, XLIFF's is a novel, and comes in multiple flavors (Angular XLIFF, Apple XLIFF). I am using both commercially to translate content and software into a dozen languages and the \"more\" of XLIFF is commonly not needed. Your finding that they can be converted is correct. Though with a loss of fidelity in either direction (meta info lost when converting XLIFF -&gt; PO, fine-grained pluralisations lost in PO -&gt; XLIFF). Both losses typically not relevant.</p>\n<blockquote>\n<p>Also, in general, it'll be simpler for everyone if there's only one supported approach.</p>\n</blockquote>\n<p>That one I would agree on. PO and XLIFF are both the pre-dominant translation formats (PO more in the Unix/Linux and Python/Django camp, XLIFF more in the Apple, Angular, Android camp - Java and .Net are doing their own thing but have libraries to process either). Choosing either one of the two and running with it will provide a very solid set of libraries and tools and translation services.</p>\n<blockquote>\n<p>I guess the last answer is that the XML file will be somewhat easier to read and write for FHIR-specific tools interested in supporting the implementations to generate the \"to translate\" file or to consume the \"translation\" files.</p>\n</blockquote>\n<p>Not necessarily. Every programming language comes with an excellent PO library. The challenge with XLIFF again is that you can parse them with any XML parser, but you will get a lot of different nested tags back in comparison to PO and need to know if and how to handle them.</p>\n<p>Regarding <span class=\"user-mention\" data-user-id=\"191380\">@Elliot Silver</span>'s point around the need: At least for my particular use-case - Patient-facing surveys - the need for translation is very pressing. Many questionnaires exist in numerous languages to target various communities (English, Spanish, Russian, etc.). The current approach with the translation extension is incompatible with commonly used translation tooling. Official adoption of an industry standard would be very helpful.</p>",
        "id": 243968641,
        "sender_full_name": "Tilo Christ",
        "timestamp": 1624653815
    },
    {
        "content": "<p>On today's SDC call, we talked briefly about XLIFF vs. PO further on today's call.  Gut instinct is that XLIFF is easier to read/work with for newbies.  We would presumably define a 'minimal' subset of XLIFF that would get generated by the \"prepare for translation\" operation so flavors might not matter much.  However, we'll still take input from the community.  We'd really rather not support both approaches as that significantly increases complexity for everyone.</p>\n<p>Also talked about format for ids within the file.  Proposal is to use FHIRPath.  Further discussion (and some questions) in the comment on the tracker item here: <a href=\"https://jira.hl7.org/browse/FHIR-32379\">https://jira.hl7.org/browse/FHIR-32379</a></p>",
        "id": 245378092,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1625781919
    },
    {
        "content": "<p>Hi!</p>\n<p>Here is how I approach Questionnaire translation. <br>\nI started with PO format and write a tool that extracts all text from the Questionnaire to the PO file. PO file is translated via 3rd party software. When I render a questionnaire all text elements are wrapped with <code>gettext</code> and got translations from PO.<br>\nThis approach works well when you use Questionnaires defined as part of your source code.<br>\nYou can create a fully automated CI/CD pipeline that extracts text to PO, post it to the translation tool. Once the translation is done translation tool pushed the updated PO file back to the repository.<br>\nThe same approach may be done via  XLIFF since it is just another format of the translation file.</p>\n<p>However, when you need to create questionnaires in the runtime, it stopped work for me.<br>\nAfter a few iterations with custom JSON format for translation, I decided that the easiest way is to use Questionnaire resource. This translation dedicated Questionnaire contains <code>Questionnaire. item</code> only on top-level.  <br>\nDuring questionnaire rendering, I load the translation dedicated Questionnaire and for each <code>Questionnaire.item</code> of the original questionnaire, I load its version from the translation dedicated Questionnaire by <code>linkId</code>.<br>\nThen I do a deep merge between two <code>Questionnaire. item</code>.   So attributes from translation dedicated <code>Questionnaire. item</code> overrides original ones.</p>\n<p>This translation technique worked very well for me. I hope somebody could find it useful as well.<br>\nI would like to hear your thoughts.</p>",
        "id": 246137466,
        "sender_full_name": "Ilya Beda",
        "timestamp": 1626374362
    },
    {
        "content": "<p>Limiting Questionnaires to only having items at the root level isn't feasible.  The need to translate shouldn't impact the design of the Questionnaire in any way.  Also, the item.text isn't the only thing in a Questionnaire you might need to translate - description, copyright and other metadata - and maybe even certain extensions might also need translation.</p>",
        "id": 246139541,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1626375345
    },
    {
        "content": "<p>There is no limitation for the Questionnaire that defines a form. The limitation on nested items applied for the Questionnaire that stores translations.</p>\n<p>I created an example.</p>\n<p>The original questionnaire that I want to translate:<br>\n<a href=\"https://gist.github.com/ir4y/88e386263f1d2c5aad3826aa86f074ec#file-acc-edit-diagnoses-yaml\">https://gist.github.com/ir4y/88e386263f1d2c5aad3826aa86f074ec#file-acc-edit-diagnoses-yaml</a></p>\n<p>The questionnaire that stores translation data:<br>\n<a href=\"https://gist.github.com/ir4y/88e386263f1d2c5aad3826aa86f074ec#file-acc-edit-diagnoses-fr-translation-yaml\">https://gist.github.com/ir4y/88e386263f1d2c5aad3826aa86f074ec#file-acc-edit-diagnoses-fr-translation-yaml</a></p>\n<p>The same technique with deep merge can be used for description, copyright, and other metadata on Questionnaire root.</p>",
        "id": 246193605,
        "sender_full_name": "Ilya Beda",
        "timestamp": 1626421178
    },
    {
        "content": "<p>What do you use for canonical URL and version for the translation Questionnaire (given that servers <em>should</em> restrict to only having one instance with a given canonical + version combination)?</p>",
        "id": 246234451,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1626447573
    },
    {
        "content": "<p>Sorry, I am not sure that I got your question, Lloyd.<br>\nA questionnaire for translation is not used as a real Questionnaire. In my case, it is like a convenient format to store translation.<br>\nTranslation versioning is separated from the original Questionnaire.</p>",
        "id": 246432109,
        "sender_full_name": "Ilya Beda",
        "timestamp": 1626685805
    },
    {
        "content": "<p>If a Questionnaire is being persisted and you're using the Questionnaire resource structure, then it's \"real\" from the perspective of the system storing it, so considerations around unique identity still matter.</p>",
        "id": 246449958,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1626698944
    }
]