[
    {
        "content": "<p>When I am setting up a hidden question for the IG validator, what specifically should I be putting in the item?</p>\n<p>When I create a QR (outside of the IG) for the dropdown question (created by the answerExpression), the answer in the QR is:</p>\n<div class=\"codehilite\"><pre><span></span><code>{\n    &quot;linkId&quot; : &quot;mae4.1.1&quot;,\n    &quot;text&quot; : &quot;If the Adverse Medical Event occurred at one of the relying sites, select the relying site in order to pre-populate the the relying institution and relying site principal investigator details below.&quot;,\n    &quot;answer&quot; : [\n        {\n        &quot;valueCoding&quot; : {\n            &quot;display&quot; : &quot;Example research institution&quot;\n            }\n        }\n    ]\n},\n</code></pre></div>\n<p>Am I trying to store answer.valueCoding   in the hidden field?   </p>\n<p>It doesn't have the answer options, so is that going to still make the error about the answer options not being available?</p>\n<p>Am I also supposed to put an answerExpression on the hidden question?</p>",
        "id": 275830095,
        "sender_full_name": "Diane",
        "timestamp": 1647621952
    },
    {
        "content": "<p>If it gives a warning about there not being answerOptions, then you can try using an answerExpression that essentially allows anything</p>",
        "id": 275831583,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1647622449
    },
    {
        "content": "<p>An answerExpression that essentially allows anything would be a regular expression that permits any type of character?</p>",
        "id": 275834680,
        "sender_full_name": "Diane",
        "timestamp": 1647623709
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> A question hidden with questionnaire-hidden will still show up in the QR if it has answers.  So, moving the answerExpression to a question with questionnaire-hidden will still have the same validation issue.  A question hidden by skip logic (e.g. , enableWhenExpression with the expression \"false\") will not show in the QR, and might avoid that problem.</p>",
        "id": 275845684,
        "sender_full_name": "Paul Lynch",
        "timestamp": 1647628841
    },
    {
        "content": "<p>If it's hidden by skip logic, then the answer must be removed when the QR is marked as 'complete'.  I think if you set the answerExpression to be \"whatever the current answers for this question are\", that might work...</p>",
        "id": 275846903,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1647629469
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"237340\">@Diane</span> It would be interesting to see what the validator does without the launchContext being used by the answerExpression.  You could try setting the answerExpression to pick up the answers from one of the other questions in the questionnaire (or the answerOptions), and see if that makes the warning go away.  If the warning is still there, then the rearranging of the launchContext reference into a hidden question won't help (at least not with that issue).</p>",
        "id": 275847334,
        "sender_full_name": "Paul Lynch",
        "timestamp": 1647629682
    },
    {
        "content": "<p>It'll help, in that it's one necessary step.  But it might not make the problem go away</p>",
        "id": 275852870,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1647632361
    },
    {
        "content": "<p>I think that Paul's idea is a really good test.  Unfortunately,  I have never had any luck getting either values or answerOptions to populate from other questions.  In the past, I just gave up  (see <a href=\"#narrow/stream/179255-questionnaire/topic/answerOption.20as.20an.20expression.20result\">https://chat.fhir.org/#narrow/stream/179255-questionnaire/topic/answerOption.20as.20an.20expression.20result</a>).</p>\n<p>I know that there must be some syntax that works.  Attached are my most recent tries. <br>\nThe only thing that I have ever been able to get to work is converting the answer from a different question to a string  via  .display.    But, that is not going to give me the answer choices.  And, the validator is not going to like switching the item type.</p>\n<p><a href=\"/user_uploads/10155/boQDf4KSX5E-Lwmw6voRUa-9/trying-to-get-hidden-question-populated.png\">trying-to-get-hidden-question-populated.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/boQDf4KSX5E-Lwmw6voRUa-9/trying-to-get-hidden-question-populated.png\" title=\"trying-to-get-hidden-question-populated.png\"><img src=\"/user_uploads/10155/boQDf4KSX5E-Lwmw6voRUa-9/trying-to-get-hidden-question-populated.png\"></a></div>",
        "id": 275860324,
        "sender_full_name": "Diane",
        "timestamp": 1647636252
    },
    {
        "content": "<p>Just to summarize the solution I think <span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> is proposing:</p>\n<ul>\n<li>launchContext variable %parentQR has the \"parent\" questionnaire response</li>\n<li>Question A<ul>\n<li>hidden by skip logic so it doens't output anything in the QR and cause the same issue with the IG validator</li>\n<li>initialExpression (or calculatedExpression)- copies answers from a question in %parentQR</li>\n</ul>\n</li>\n<li>Question B<ul>\n<li>answerExpression - gets the answers from Question A</li>\n</ul>\n</li>\n</ul>",
        "id": 275860425,
        "sender_full_name": "Paul Lynch",
        "timestamp": 1647636339
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"237340\">Diane</span> <a href=\"#narrow/stream/179255-questionnaire/topic/content.20for.20the.20answer.20in.20the.20hidden.20item/near/275860324\">said</a>:</p>\n<blockquote>\n<p>Unfortunately,  I have never had any luck getting either values or answerOptions to populate from other questions.</p>\n</blockquote>\n<p>LHC-Forms made an assumption that if an question of type open-choice would have answers that are either Codings in the answer list, or off-list string values.  We never thought there would be a way to have an off-list Coding, because, how would a user enter such a thing?  I think it should NOT be difficult to support that, though.</p>",
        "id": 275864202,
        "sender_full_name": "Paul Lynch",
        "timestamp": 1647638290
    },
    {
        "content": "<p>Yes, I am following the approach recommended by Lloyd as summarized by  <span class=\"user-mention\" data-user-id=\"195344\">@Paul Lynch</span> .     However,  I thought that I was supposed to be hiding both the Question A getting the data from the QR via the launch Context  (Question A)  and the question B that gets its data locally from Question A.   For now, I am not hiding anything because I need to see what is working and what is not.</p>\n<p>Given that LHC-Forms is not currently able to get answers that are not codings,  should I make  Question B  a string  and use my one and only expression that works?</p>",
        "id": 275869510,
        "sender_full_name": "Diane",
        "timestamp": 1647641965
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"237340\">Diane</span> <a href=\"#narrow/stream/179255-questionnaire/topic/content.20for.20the.20answer.20in.20the.20hidden.20item/near/275869510\">said</a>:</p>\n<blockquote>\n<p>Given that LHC-Forms is not currently able to get answers that are not codings,  should I make  Question B  a string  and use my one and only expression that works?</p>\n</blockquote>\n<p>I am hoping we can get a fix for this out next week.  In the meantime, I am not sure what to suggest.  If you can find a workaround that will make the validator happy, go for it.</p>",
        "id": 275873874,
        "sender_full_name": "Paul Lynch",
        "timestamp": 1647645434
    },
    {
        "content": "<p>Thank you!</p>",
        "id": 275873936,
        "sender_full_name": "Diane",
        "timestamp": 1647645482
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"195344\">Paul Lynch</span> <a href=\"#narrow/stream/179255-questionnaire/topic/content.20for.20the.20answer.20in.20the.20hidden.20item/near/275873874\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"237340\">Diane</span> <a href=\"#narrow/stream/179255-questionnaire/topic/content.20for.20the.20answer.20in.20the.20hidden.20item/near/275869510\">said</a>:</p>\n<blockquote>\n<p>Given that LHC-Forms is not currently able to get answers that are not codings,  should I make  Question B  a string  and use my one and only expression that works?</p>\n</blockquote>\n<p>I am hoping we can get a fix for this out next week.  In the meantime, I am not sure what to suggest.  If you can find a workaround that will make the validator happy, go for it.</p>\n</blockquote>\n<p>This should now be fixed in version 30.0.1.</p>",
        "id": 276522282,
        "sender_full_name": "Paul Lynch",
        "timestamp": 1648147262
    }
]