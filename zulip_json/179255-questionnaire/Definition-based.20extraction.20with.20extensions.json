[
    {
        "content": "<p>When using definition based extraction to extract resources, what will be the right way to add definition for a questionnaire where resource can be extracted with extensions.</p>\n<p>Ex. Following is an sample questionnaire<br>\n{<br>\n    \"type\" : \"Questionnaire\",<br>\n    ...<br>\n    \"item\":[<br>\n             {<br>\n              \"type\": \"choice\",<br>\n              \"extension\": [<br>\n                {<br>\n                  \"url\": \"<a href=\"http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl\">http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl</a>\",<br>\n                  \"valueCodeableConcept\": {<br>\n                    \"coding\": [<br>\n                      {<br>\n                        \"system\": \"<a href=\"http://hl7.org/fhir/questionnaire-item-control\">http://hl7.org/fhir/questionnaire-item-control</a>\",<br>\n                        \"code\": \"drop-down\",<br>\n                        \"display\": \"Drop Down\"<br>\n                      }<br>\n                    ],<br>\n                  }<br>\n                }<br>\n              ],<br>\n              \"definition\" : \"???????\",<br>\n              \"linkId\": \"religion\",<br>\n              \"text\": \"Religion\",<br>\n              \"answerOption\": [<br>\n                {<br>\n                  \"valueCoding\": {<br>\n                    \"code\": \"1013\",<br>\n                    \"display\": \"Christian\",<br>\n                    \"system\": \"<a href=\"http://terminology.hl7.org/CodeSystem/v3-ReligiousAffiliation\">http://terminology.hl7.org/CodeSystem/v3-ReligiousAffiliation</a>\"<br>\n                  }<br>\n                },<br>\n                {<br>\n                  \"valueCoding\": {<br>\n                    \"code\": \"1023\",<br>\n                    \"display\": \"Islam\",<br>\n                    \"system\": \"<a href=\"http://terminology.hl7.org/CodeSystem/v3-ReligiousAffiliation\">http://terminology.hl7.org/CodeSystem/v3-ReligiousAffiliation</a>\"<br>\n                  }<br>\n                },<br>\n                ]<br>\n            }<br>\n        ]</p>\n<p>}</p>\n<p>Patient(<a href=\"http://build.fhir.org/ig/WorldHealthOrganization/smart-anc/StructureDefinition-anc-patient.html\">http://build.fhir.org/ig/WorldHealthOrganization/smart-anc/StructureDefinition-anc-patient.html</a>) resource has field patient-religion which is an extension.<br>\nNow I wanted to know what value I need to put in the definition field(??????), to get the answer extracted?</p>\n<p>Let me know if there are any working examples which I can look at. <a href=\"/user_uploads/10155/nWDqhkbF0pTNcrYO4VTi8gnR/anc-patient.PNG\">anc-patient.PNG</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/nWDqhkbF0pTNcrYO4VTi8gnR/anc-patient.PNG\" title=\"anc-patient.PNG\"><img src=\"/user_uploads/10155/nWDqhkbF0pTNcrYO4VTi8gnR/anc-patient.PNG\"></a></div>",
        "id": 276176161,
        "sender_full_name": "Nitin Sabale",
        "timestamp": 1647949757
    },
    {
        "content": "<p>I don't think we've talked about this.  My leaning would be for the FHIRPath to allow the 'extension' element - so you could use extension('whatever').value.  Can you submit a tracker item for us to talk about this and make it explicit in the spec?</p>",
        "id": 276189635,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1647956388
    },
    {
        "content": "<p>It's the value from the <a href=\"http://elementdefinition.id\">elementdefinition.id</a> in the referenced StructureDefinition isn't it?</p>",
        "id": 276251497,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1647981853
    },
    {
        "content": "<p><a href=\"https://sqlonfhir-r4.azurewebsites.net/fhir/Questionnaire/prac-ext-demo/_history/11?_format=html\">https://sqlonfhir-r4.azurewebsites.net/fhir/Questionnaire/prac-ext-demo/_history/11?_format=html</a></p>",
        "id": 276251897,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1647982066
    },
    {
        "content": "<p>If you use that form and create some a QR you can try out the $extract on that server.</p>",
        "id": 276252066,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1647982144
    },
    {
        "content": "<p><a href=\"https://sqlonfhir-r4.azurewebsites.net/fhir/QuestionnaireResponse/a0680f7c05bf407093e9993897832729\">https://sqlonfhir-r4.azurewebsites.net/fhir/QuestionnaireResponse/a0680f7c05bf407093e9993897832729</a></p>",
        "id": 276252489,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1647982366
    },
    {
        "content": "<p><a href=\"https://sqlonfhir-r4.azurewebsites.net/fhir/QuestionnaireResponse/a0680f7c05bf407093e9993897832729/$extract\">https://sqlonfhir-r4.azurewebsites.net/fhir/QuestionnaireResponse/a0680f7c05bf407093e9993897832729/$extract</a></p>",
        "id": 276252561,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1647982405
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191320\">Lloyd McKenzie</span> <a href=\"#narrow/stream/179255-questionnaire/topic/Definition-based.20extraction.20with.20extensions/near/276189635\">said</a>:</p>\n<blockquote>\n<p>I don't think we've talked about this.  My leaning would be for the FHIRPath to allow the 'extension' element - so you could use extension('whatever').value.  Can you submit a tracker item for us to talk about this and make it explicit in the spec?</p>\n</blockquote>\n<p>Hi <span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> , should we raise a tracker item in Jira?</p>",
        "id": 276446316,
        "sender_full_name": "Kashyap Jois",
        "timestamp": 1648112070
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191367\">Brian Postlethwaite</span> <a href=\"#narrow/stream/179255-questionnaire/topic/Definition-based.20extraction.20with.20extensions/near/276251497\">said</a>:</p>\n<blockquote>\n<p>It's the value from the <a href=\"http://elementdefinition.id\">elementdefinition.id</a> in the referenced StructureDefinition isn't it?</p>\n</blockquote>\n<p>Thanks, the example that you shared with the server works! We did some debugging and found that the implementation of the extraction piece in android fhir sdk is restricted to fields present in the resource .java:class (i.e. org.hl7.fhir.r4.model.*) . So that means extensions cant be extracted using splicing since it is not supported in the SDK.</p>\n<p>cc: <span class=\"user-mention\" data-user-id=\"366686\">@Jing Tang</span></p>",
        "id": 276459935,
        "sender_full_name": "Kashyap Jois",
        "timestamp": 1648120169
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"382830\">@Kashyap Jois</span> - yes please</p>",
        "id": 276500219,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1648138675
    }
]