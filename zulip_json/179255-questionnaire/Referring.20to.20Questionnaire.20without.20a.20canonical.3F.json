[
    {
        "content": "<p>I have a system that records the QuestionnaireResponses and I want to record the link to the Questionnaire using the Questionnaire's Identifier instead of a canonical (that is how it is recorded in the Database).  Is there some way other than using an extension to do this?  (I suppose I'm asking if there is someway to convert an Identifier into a canonical?). Why is this element only a canonical and not also a Reference(Questionnaire)?</p>",
        "id": 216248318,
        "sender_full_name": "Jean Duteau",
        "timestamp": 1605030962
    },
    {
        "content": "<p>It's canonical because the expectation is that it will be resolved the same as other canonicals - could be on your server, one of your favorite registries, some central registry, or worst case by resolving the URL.  As well, the URL might specify a business version.  Reference doesn't know how to handle any of that.  It can't do business version and has to point to a specific resource on a specific server.</p>",
        "id": 216248625,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1605031080
    },
    {
        "content": "<p>If you wanted to use identifier instead, you'd have to use an extension.  Whether you can convert from identifier to canonical depends on the conventions of whoever authored the questionnaire.  There's no formal expectation that would work.</p>",
        "id": 216248742,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1605031120
    },
    {
        "content": "<p>I understand the use of canonical, but I was wondering why we didn't also include a Reference which would allow for logical references to the Questionnaire.</p>",
        "id": 216249070,
        "sender_full_name": "Jean Duteau",
        "timestamp": 1605031239
    },
    {
        "content": "<p>The same reason we don't allow Reference anywhere else we have canonical (e.g. elements pointing to value sets, value sets, types pointing to profiles, etc.  We don't want the references to be server-specific.</p>",
        "id": 216262400,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1605036790
    },
    {
        "content": "<p>Can't we put the explicit full url to the questionnaire in there?</p>",
        "id": 216325291,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1605088267
    },
    {
        "content": "<p>Canonical needs to correspond to Questionnaire.url.  It's fine (and good) if that url resolves to the Questionnaire but it's not required</p>",
        "id": 216349798,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1605103611
    },
    {
        "content": "<p>That's what I was suggesting, so the QuestionnaireResponse.Questionnaire can contain the full URL to the Questionnaire, which I think is what Jean was asking for?)</p>",
        "id": 216384300,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1605120773
    },
    {
        "content": "<p>No, unfortunately my Questionnaires aren't referenceable by a URL.  They have an identifier so I was going to use a logical reference to identify the questionnaire.  Our system is using FHIR as an exchange format but we not as the actual exchange so we don't have URLs.  I've gone to using an extension to share the Questionnaire identifier, but it still seems strange that we only allow a Canonical and not a Reference.</p>",
        "id": 216388575,
        "sender_full_name": "Jean Duteau",
        "timestamp": 1605123116
    },
    {
        "content": "<p>the URL doesn't need to resolve, so you can define a canonical based on your identifier can't you?</p>",
        "id": 216400089,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1605129467
    },
    {
        "content": "<p><a href=\"http://example.org/Questionnaire/1234\">http://example.org/Questionnaire/1234</a><br>\n(where 1234 is your identifier, and the other stuff you can make up that would match to like a system namespace)</p>",
        "id": 216400179,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1605129517
    },
    {
        "content": "<p>We are running into a similar issue, though from a different perspective.<br>\nWe are referencing Questionnaires in our QuestionnaireResponse.questionnaire by the canonical URL with the appropriate canonical version.<br>\nThe canonical version of the electronic Questionnaire (e.g. v 1.3.0) does not map directly to the business identifier of the physical form, e.g. MyForm-20210111v1.pdf<br>\nAs such, we need a way for QuestionnaireResponse.questionnaire to indicate both the canonical of the electronic form (which works fine) as well as a secondary identifier for the Questionnaire. While in theory, the Questionnaire's canonical URI should be resolvable to determine the identifier, we are using the canonicals as unique identifiers and Questionnaire will not be resolvable. It also saves the QuestionnaireResponse recipient an extra hop/call to determine what the original paper form identifier was. </p>\n<p>SDC currently prescribe use of QuestionnaireResponse.questionnaire.display. Is there any reason we shouldn't use QuestionnaireResponse.questionnaire.identifier to convey the business identifier for the questionnaire? Does it necessarily need to be an extension on QuestionnaireResponse.questionnaire?</p>",
        "id": 222389362,
        "sender_full_name": "Ken Sinn",
        "timestamp": 1610424098
    },
    {
        "content": "<p>QuestionnaireResponse.questionnaire.display is an extension.  If were to add 'identifier' that would also have to be an extension as the canonical type is a simple data type with just a value.  You could submit a change request for us to add it, but my leaning would be to make it optional, not mustSupport, as systems <em>should</em> always use canonicals rather than business identifiers.</p>",
        "id": 222390176,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1610425173
    },
    {
        "content": "<p>I imagine this may also help <span class=\"user-mention\" data-user-id=\"192166\">@Jean Duteau</span>'s issue, and may be a common use case. Happy to use an extension for now and make the change request, so at least there is a consistent way to identify a business ID for a referenced questionnaire without having to go to the source (if available).</p>",
        "id": 222390998,
        "sender_full_name": "Ken Sinn",
        "timestamp": 1610426236
    },
    {
        "content": "<p>You need the source for most things anyway, so don't know what you're gaining here. Can't validate without it, can't render without it. Can't extract without it...</p>",
        "id": 222411660,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1610446209
    },
    {
        "content": "<p>You should be able to render without it - the QuestionnaireResponse contains question text and answer, which is good enough for 'simple' rendering of a completed form.  However, you can't complete a form without retrieving the Questionnaire.</p>",
        "id": 222460771,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1610470542
    }
]