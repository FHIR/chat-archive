[
    {
        "content": "<p>Consider this questionnaire, from the validator test cases:</p>",
        "id": 170671914,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1562878647
    },
    {
        "content": "<div class=\"codehilite\"><pre><span></span><span class=\"cp\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>\n<span class=\"nt\">&lt;Questionnaire</span> <span class=\"na\">xmlns=</span><span class=\"s\">&quot;http://hl7.org/fhir&quot;</span><span class=\"nt\">&gt;</span>\n  <span class=\"nt\">&lt;id</span> <span class=\"na\">value=</span><span class=\"s\">&quot;questionnaire-enableWhen-test&quot;</span> <span class=\"nt\">/&gt;</span>\n  <span class=\"nt\">&lt;language</span> <span class=\"na\">value=</span><span class=\"s\">&quot;en-US&quot;</span> <span class=\"nt\">/&gt;</span>\n  <span class=\"nt\">&lt;text&gt;</span>\n    <span class=\"nt\">&lt;status</span> <span class=\"na\">value=</span><span class=\"s\">&quot;generated&quot;</span> <span class=\"nt\">/&gt;</span>\n    <span class=\"nt\">&lt;div</span> <span class=\"na\">xmlns=</span><span class=\"s\">&quot;http://www.w3.org/1999/xhtml&quot;</span> <span class=\"na\">lang=</span><span class=\"s\">&quot;en-US&quot;</span><span class=\"nt\">&gt;</span>\n      <span class=\"nt\">&lt;p&gt;</span>enableWhen test<span class=\"nt\">&lt;/p&gt;</span>\n    <span class=\"nt\">&lt;/div&gt;</span>\n  <span class=\"nt\">&lt;/text&gt;</span>\n  <span class=\"nt\">&lt;url</span> <span class=\"na\">value=</span><span class=\"s\">&quot;http://hl7.org/fhir/us/hai/Questionnaire/questionnaire-enableWhen-test&quot;</span> <span class=\"nt\">/&gt;</span>\n  <span class=\"nt\">&lt;status</span> <span class=\"na\">value=</span><span class=\"s\">&quot;draft&quot;</span> <span class=\"nt\">/&gt;</span>\n  <span class=\"nt\">&lt;item&gt;</span>\n    <span class=\"nt\">&lt;linkId</span> <span class=\"na\">value=</span><span class=\"s\">&quot;group&quot;</span> <span class=\"nt\">/&gt;</span>\n    <span class=\"nt\">&lt;text</span> <span class=\"na\">value=</span><span class=\"s\">&quot;group&quot;</span> <span class=\"nt\">/&gt;</span>\n    <span class=\"nt\">&lt;type</span> <span class=\"na\">value=</span><span class=\"s\">&quot;group&quot;</span> <span class=\"nt\">/&gt;</span>\n    <span class=\"nt\">&lt;repeats</span> <span class=\"na\">value=</span><span class=\"s\">&quot;true&quot;</span> <span class=\"nt\">/&gt;</span>\n    <span class=\"nt\">&lt;item&gt;</span>\n      <span class=\"nt\">&lt;linkId</span> <span class=\"na\">value=</span><span class=\"s\">&quot;condition&quot;</span> <span class=\"nt\">/&gt;</span>\n      <span class=\"nt\">&lt;text</span> <span class=\"na\">value=</span><span class=\"s\">&quot;condition&quot;</span> <span class=\"nt\">/&gt;</span>\n      <span class=\"nt\">&lt;type</span> <span class=\"na\">value=</span><span class=\"s\">&quot;boolean&quot;</span> <span class=\"nt\">/&gt;</span>\n      <span class=\"nt\">&lt;required</span> <span class=\"na\">value=</span><span class=\"s\">&quot;true&quot;</span> <span class=\"nt\">/&gt;</span>\n      <span class=\"nt\">&lt;repeats</span> <span class=\"na\">value=</span><span class=\"s\">&quot;false&quot;</span> <span class=\"nt\">/&gt;</span>\n    <span class=\"nt\">&lt;/item&gt;</span>\n    <span class=\"nt\">&lt;item&gt;</span>\n      <span class=\"nt\">&lt;linkId</span> <span class=\"na\">value=</span><span class=\"s\">&quot;enable-when&quot;</span> <span class=\"nt\">/&gt;</span>\n      <span class=\"nt\">&lt;text</span> <span class=\"na\">value=</span><span class=\"s\">&quot;enable when condition true&quot;</span> <span class=\"nt\">/&gt;</span>\n      <span class=\"nt\">&lt;type</span> <span class=\"na\">value=</span><span class=\"s\">&quot;boolean&quot;</span> <span class=\"nt\">/&gt;</span>\n      <span class=\"nt\">&lt;enableWhen&gt;</span>\n        <span class=\"nt\">&lt;question</span> <span class=\"na\">value=</span><span class=\"s\">&quot;condition&quot;</span> <span class=\"nt\">/&gt;</span>\n        <span class=\"nt\">&lt;operator</span> <span class=\"na\">value=</span><span class=\"s\">&quot;=&quot;</span><span class=\"nt\">/&gt;</span>\n        <span class=\"nt\">&lt;answerBoolean</span> <span class=\"na\">value=</span><span class=\"s\">&quot;true&quot;</span> <span class=\"nt\">/&gt;</span>\n      <span class=\"nt\">&lt;/enableWhen&gt;</span>\n      <span class=\"nt\">&lt;required</span> <span class=\"na\">value=</span><span class=\"s\">&quot;true&quot;</span> <span class=\"nt\">/&gt;</span>\n      <span class=\"nt\">&lt;repeats</span> <span class=\"na\">value=</span><span class=\"s\">&quot;false&quot;</span> <span class=\"nt\">/&gt;</span>\n    <span class=\"nt\">&lt;/item&gt;</span>\n  <span class=\"nt\">&lt;/item&gt;</span>\n<span class=\"nt\">&lt;/Questionnaire&gt;</span>\n</pre></div>",
        "id": 170671918,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1562878652
    },
    {
        "content": "<p>what does it mean to have a question that is required, but also has an enable-when on it? What is expected in the QR when the enable-when condition is false?</p>",
        "id": 170671996,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1562878695
    },
    {
        "content": "<p>Seems to me that this should be an illegal combination - a question with a required=true can't have an enable-when</p>",
        "id": 170672015,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1562878719
    },
    {
        "content": "<p>Note that the questionnaire validation is all screwed up, which is why I'm looking at this....</p>",
        "id": 170672050,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1562878746
    },
    {
        "content": "<p>Yes, seems there should be an invariant forbidding enable-when in combination with required=true.</p>\n<p>And also leads to the question: how would one express \"must be filled when enabled\"?</p>",
        "id": 170672622,
        "sender_full_name": "Stefan Lang",
        "timestamp": 1562879212
    },
    {
        "content": "<p>So maybe just the definition of the \"required\" element should be widened to \"... if used in combination with enabledWhen, the item shall only be present when the enabling condition resolves to true\"?</p>",
        "id": 170672932,
        "sender_full_name": "Stefan Lang",
        "timestamp": 1562879408
    },
    {
        "content": "<p>ah, already specified:</p>\n<blockquote>\n<p>This element is a modifier because if enableWhen is present for an item, \"required\" is ignored unless one of the enableWhen conditions is met</p>\n</blockquote>",
        "id": 170673103,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1562879557
    },
    {
        "content": "<p>buried in the middle of the comments</p>",
        "id": 170673119,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1562879575
    },
    {
        "content": "<p>given that definition, then, this QR should generate 2 errors:</p>",
        "id": 170673156,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1562879627
    },
    {
        "content": "<div class=\"codehilite\"><pre><span></span><span class=\"cp\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>\n<span class=\"nt\">&lt;QuestionnaireResponse</span> <span class=\"na\">xmlns=</span><span class=\"s\">&quot;http://hl7.org/fhir&quot;</span><span class=\"nt\">&gt;</span>\n  <span class=\"nt\">&lt;id</span> <span class=\"na\">value=</span><span class=\"s\">&quot;questionnaireResponse-enableWhen-test&quot;</span> <span class=\"nt\">/&gt;</span>\n  <span class=\"nt\">&lt;text&gt;</span>\n    <span class=\"nt\">&lt;status</span> <span class=\"na\">value=</span><span class=\"s\">&quot;generated&quot;</span> <span class=\"nt\">/&gt;</span>\n    <span class=\"nt\">&lt;div</span> <span class=\"na\">xmlns=</span><span class=\"s\">&quot;http://www.w3.org/1999/xhtml&quot;</span> <span class=\"na\">lang=</span><span class=\"s\">&quot;en-US&quot;</span><span class=\"nt\">&gt;</span>\n      <span class=\"nt\">&lt;p&gt;</span>enableWhen test response<span class=\"nt\">&lt;/p&gt;</span>\n    <span class=\"nt\">&lt;/div&gt;</span>\n  <span class=\"nt\">&lt;/text&gt;</span>\n  <span class=\"nt\">&lt;questionnaire</span> <span class=\"na\">value=</span><span class=\"s\">&quot;http://hl7.org/fhir/us/hai/Questionnaire/questionnaire-enableWhen-test&quot;</span> <span class=\"nt\">/&gt;</span>\n  <span class=\"nt\">&lt;status</span> <span class=\"na\">value=</span><span class=\"s\">&quot;completed&quot;</span> <span class=\"nt\">/&gt;</span>\n  <span class=\"c\">&lt;!-- group 0: spacer --&gt;</span>\n  <span class=\"nt\">&lt;item&gt;</span>\n    <span class=\"nt\">&lt;linkId</span> <span class=\"na\">value=</span><span class=\"s\">&quot;group&quot;</span> <span class=\"nt\">/&gt;</span>\n    <span class=\"nt\">&lt;item&gt;</span>\n      <span class=\"nt\">&lt;linkId</span> <span class=\"na\">value=</span><span class=\"s\">&quot;condition&quot;</span> <span class=\"nt\">/&gt;</span>\n      <span class=\"nt\">&lt;text</span> <span class=\"na\">value=</span><span class=\"s\">&quot;condition&quot;</span> <span class=\"nt\">/&gt;</span>\n      <span class=\"nt\">&lt;answer&gt;</span>\n        <span class=\"nt\">&lt;valueBoolean</span> <span class=\"na\">value=</span><span class=\"s\">&quot;true&quot;</span> <span class=\"nt\">/&gt;</span>\n      <span class=\"nt\">&lt;/answer&gt;</span>\n    <span class=\"nt\">&lt;/item&gt;</span>\n    <span class=\"nt\">&lt;item&gt;</span>\n      <span class=\"nt\">&lt;linkId</span> <span class=\"na\">value=</span><span class=\"s\">&quot;enable-when&quot;</span> <span class=\"nt\">/&gt;</span>\n      <span class=\"nt\">&lt;text</span> <span class=\"na\">value=</span><span class=\"s\">&quot;enable when condition true&quot;</span> <span class=\"nt\">/&gt;</span>\n      <span class=\"nt\">&lt;answer&gt;</span>\n        <span class=\"nt\">&lt;valueBoolean</span> <span class=\"na\">value=</span><span class=\"s\">&quot;false&quot;</span> <span class=\"nt\">/&gt;</span>\n      <span class=\"nt\">&lt;/answer&gt;</span>\n    <span class=\"nt\">&lt;/item&gt;</span>\n  <span class=\"nt\">&lt;/item&gt;</span>\n  <span class=\"c\">&lt;!-- group 1: condition true, present (valid) --&gt;</span>\n  <span class=\"nt\">&lt;item&gt;</span>\n    <span class=\"nt\">&lt;linkId</span> <span class=\"na\">value=</span><span class=\"s\">&quot;group&quot;</span> <span class=\"nt\">/&gt;</span>\n    <span class=\"nt\">&lt;item&gt;</span>\n      <span class=\"nt\">&lt;linkId</span> <span class=\"na\">value=</span><span class=\"s\">&quot;condition&quot;</span> <span class=\"nt\">/&gt;</span>\n      <span class=\"nt\">&lt;text</span> <span class=\"na\">value=</span><span class=\"s\">&quot;condition&quot;</span> <span class=\"nt\">/&gt;</span>\n      <span class=\"nt\">&lt;answer&gt;</span>\n        <span class=\"nt\">&lt;valueBoolean</span> <span class=\"na\">value=</span><span class=\"s\">&quot;true&quot;</span> <span class=\"nt\">/&gt;</span>\n      <span class=\"nt\">&lt;/answer&gt;</span>\n    <span class=\"nt\">&lt;/item&gt;</span>\n    <span class=\"nt\">&lt;item&gt;</span>\n      <span class=\"nt\">&lt;linkId</span> <span class=\"na\">value=</span><span class=\"s\">&quot;enable-when&quot;</span> <span class=\"nt\">/&gt;</span>\n      <span class=\"nt\">&lt;text</span> <span class=\"na\">value=</span><span class=\"s\">&quot;enable when condition true&quot;</span> <span class=\"nt\">/&gt;</span>\n      <span class=\"nt\">&lt;answer&gt;</span>\n        <span class=\"nt\">&lt;valueBoolean</span> <span class=\"na\">value=</span><span class=\"s\">&quot;false&quot;</span> <span class=\"nt\">/&gt;</span>\n      <span class=\"nt\">&lt;/answer&gt;</span>\n    <span class=\"nt\">&lt;/item&gt;</span>\n  <span class=\"nt\">&lt;/item&gt;</span>\n  <span class=\"c\">&lt;!-- group 2: condition false, present (invalid) --&gt;</span>\n  <span class=\"nt\">&lt;item&gt;</span>\n    <span class=\"nt\">&lt;linkId</span> <span class=\"na\">value=</span><span class=\"s\">&quot;group&quot;</span> <span class=\"nt\">/&gt;</span>\n    <span class=\"nt\">&lt;item&gt;</span>\n      <span class=\"nt\">&lt;linkId</span> <span class=\"na\">value=</span><span class=\"s\">&quot;condition&quot;</span> <span class=\"nt\">/&gt;</span>\n      <span class=\"nt\">&lt;text</span> <span class=\"na\">value=</span><span class=\"s\">&quot;condition&quot;</span> <span class=\"nt\">/&gt;</span>\n      <span class=\"nt\">&lt;answer&gt;</span>\n        <span class=\"nt\">&lt;valueBoolean</span> <span class=\"na\">value=</span><span class=\"s\">&quot;false&quot;</span> <span class=\"nt\">/&gt;</span>\n      <span class=\"nt\">&lt;/answer&gt;</span>\n    <span class=\"nt\">&lt;/item&gt;</span>\n    <span class=\"nt\">&lt;item&gt;</span>\n      <span class=\"nt\">&lt;linkId</span> <span class=\"na\">value=</span><span class=\"s\">&quot;enable-when&quot;</span> <span class=\"nt\">/&gt;</span>\n      <span class=\"nt\">&lt;text</span> <span class=\"na\">value=</span><span class=\"s\">&quot;enable when condition true&quot;</span> <span class=\"nt\">/&gt;</span>\n      <span class=\"nt\">&lt;answer&gt;</span>\n        <span class=\"nt\">&lt;valueBoolean</span> <span class=\"na\">value=</span><span class=\"s\">&quot;false&quot;</span> <span class=\"nt\">/&gt;</span>\n      <span class=\"nt\">&lt;/answer&gt;</span>\n    <span class=\"nt\">&lt;/item&gt;</span>\n  <span class=\"nt\">&lt;/item&gt;</span>\n  <span class=\"c\">&lt;!-- group 3: condition true, absent (invalid) --&gt;</span>\n  <span class=\"nt\">&lt;item&gt;</span>\n    <span class=\"nt\">&lt;linkId</span> <span class=\"na\">value=</span><span class=\"s\">&quot;group&quot;</span> <span class=\"nt\">/&gt;</span>\n    <span class=\"nt\">&lt;item&gt;</span>\n      <span class=\"nt\">&lt;linkId</span> <span class=\"na\">value=</span><span class=\"s\">&quot;condition&quot;</span> <span class=\"nt\">/&gt;</span>\n      <span class=\"nt\">&lt;text</span> <span class=\"na\">value=</span><span class=\"s\">&quot;condition&quot;</span> <span class=\"nt\">/&gt;</span>\n      <span class=\"nt\">&lt;answer&gt;</span>\n        <span class=\"nt\">&lt;valueBoolean</span> <span class=\"na\">value=</span><span class=\"s\">&quot;true&quot;</span> <span class=\"nt\">/&gt;</span>\n      <span class=\"nt\">&lt;/answer&gt;</span>\n    <span class=\"nt\">&lt;/item&gt;</span>\n  <span class=\"nt\">&lt;/item&gt;</span>\n  <span class=\"c\">&lt;!-- group 4: condition false, absent (valie) --&gt;</span>\n  <span class=\"nt\">&lt;item&gt;</span>\n    <span class=\"nt\">&lt;linkId</span> <span class=\"na\">value=</span><span class=\"s\">&quot;group&quot;</span> <span class=\"nt\">/&gt;</span>\n    <span class=\"nt\">&lt;item&gt;</span>\n      <span class=\"nt\">&lt;linkId</span> <span class=\"na\">value=</span><span class=\"s\">&quot;condition&quot;</span> <span class=\"nt\">/&gt;</span>\n      <span class=\"nt\">&lt;text</span> <span class=\"na\">value=</span><span class=\"s\">&quot;condition&quot;</span> <span class=\"nt\">/&gt;</span>\n      <span class=\"nt\">&lt;answer&gt;</span>\n        <span class=\"nt\">&lt;valueBoolean</span> <span class=\"na\">value=</span><span class=\"s\">&quot;false&quot;</span> <span class=\"nt\">/&gt;</span>\n      <span class=\"nt\">&lt;/answer&gt;</span>\n    <span class=\"nt\">&lt;/item&gt;</span>\n  <span class=\"nt\">&lt;/item&gt;</span>\n<span class=\"nt\">&lt;/QuestionnaireResponse&gt;</span>\n</pre></div>",
        "id": 170673161,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1562879633
    },
    {
        "content": "<p>let me know if any disagrees</p>",
        "id": 170673168,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1562879641
    },
    {
        "content": "<p>agreed.</p>",
        "id": 170673305,
        "sender_full_name": "Stefan Lang",
        "timestamp": 1562879744
    },
    {
        "content": "<p>I have some more questions about enableWhen. The enable-when clause of a question cannot depend on the answer of a question that is an item inside the question, right?</p>",
        "id": 170677210,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1562882948
    },
    {
        "content": "<p>nor does it make sense for the answer to come from another heirarchy than the one the question is in?</p>",
        "id": 170677250,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1562882994
    },
    {
        "content": "<p>and it doesn't really make sense for the question it depends on to come after the question either, right?</p>",
        "id": 170677301,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1562883013
    },
    {
        "content": "<p>the first would be an error on the definition, and the third would be a warning on the definition?</p>",
        "id": 170677349,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1562883067
    },
    {
        "content": "<p>There may be cases where the second actually exists, especially when you try to represent forms that have been designed for paper in a 1:1 manner. This may not be a good idea, but it happens all the time.<br>\nSo that would be warning (or no issue) for being out of hierarchy.</p>",
        "id": 170699947,
        "sender_full_name": "Stefan Lang",
        "timestamp": 1562915064
    },
    {
        "content": "<p>Value can definitely come from outside the hierarchy. Lots of preceding sections to produce a formula for eligibility the enable when met those conditions.</p>",
        "id": 170722411,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1562938624
    },
    {
        "content": "<p>All the rest seems good.</p>",
        "id": 170722432,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1562938639
    },
    {
        "content": "<p>I'm doing validation improvements in our R4 server at the moment too. Expecting updates to my test server next week.</p>",
        "id": 170722562,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1562938708
    },
    {
        "content": "<p>I realize Grahame's question was about enableWhen, but we also have enableWhenExpression (described <a href=\"http://hl7.org/fhir/uv/sdc/2019May/expressions.html\" target=\"_blank\" title=\"http://hl7.org/fhir/uv/sdc/2019May/expressions.html\">here</a>, though the link is broken) which can depend on anything anywhere in the questionnaire or response.  So, I am not sure we should care too much about what enableWhen depends on.</p>",
        "id": 170723893,
        "sender_full_name": "Paul Lynch",
        "timestamp": 1562939791
    },
    {
        "content": "<blockquote>\n<p>Value can definitely come from outside the hierarchy</p>\n</blockquote>\n<p>So that can get pretty complex. Given that the question being answered is at a node in the tree of answers, you find the relevant answer for checking the value by working up the tree looking for any relevant question with a matching linkId. You stop when you find any match.</p>\n<p>Do you collect all the answers at the same level, or only the first?</p>",
        "id": 170756177,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1562966140
    },
    {
        "content": "<blockquote>\n<p>I am not sure we should care too much about what enableWhen depends on.</p>\n</blockquote>\n<p>Whether you use enableWhenExpression, or just simple enableWhen, it's unresolvable if the enabling of a question depends on it's own answer (or a child answer)</p>",
        "id": 170756265,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1562966214
    },
    {
        "content": "<p>I don't know about stopping at the first, it's all with that linkId (same question yes, but multiple answers - repeats and groups)</p>",
        "id": 170760831,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1562971316
    },
    {
        "content": "<p>you have to stop somewhere. Check out this Q /QR combination:</p>",
        "id": 170762958,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1562974016
    },
    {
        "content": "<div class=\"codehilite\"><pre><span></span><span class=\"cp\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>\n<span class=\"nt\">&lt;Questionnaire</span> <span class=\"na\">xmlns=</span><span class=\"s\">&quot;http://hl7.org/fhir&quot;</span><span class=\"nt\">&gt;</span>\n  <span class=\"nt\">&lt;id</span> <span class=\"na\">value=</span><span class=\"s\">&quot;questionnaire-enableWhen-test&quot;</span> <span class=\"nt\">/&gt;</span>\n  <span class=\"nt\">&lt;language</span> <span class=\"na\">value=</span><span class=\"s\">&quot;en-US&quot;</span> <span class=\"nt\">/&gt;</span>\n  <span class=\"nt\">&lt;text&gt;</span>\n    <span class=\"nt\">&lt;status</span> <span class=\"na\">value=</span><span class=\"s\">&quot;generated&quot;</span> <span class=\"nt\">/&gt;</span>\n    <span class=\"nt\">&lt;div</span> <span class=\"na\">xmlns=</span><span class=\"s\">&quot;http://www.w3.org/1999/xhtml&quot;</span> <span class=\"na\">lang=</span><span class=\"s\">&quot;en-US&quot;</span><span class=\"nt\">&gt;</span>\n      <span class=\"nt\">&lt;p&gt;</span>enableWhen test<span class=\"nt\">&lt;/p&gt;</span>\n    <span class=\"nt\">&lt;/div&gt;</span>\n  <span class=\"nt\">&lt;/text&gt;</span>\n  <span class=\"nt\">&lt;url</span> <span class=\"na\">value=</span><span class=\"s\">&quot;http://hl7.org/fhir/us/hai/Questionnaire/questionnaire-enableWhen-test&quot;</span> <span class=\"nt\">/&gt;</span>\n  <span class=\"nt\">&lt;status</span> <span class=\"na\">value=</span><span class=\"s\">&quot;draft&quot;</span> <span class=\"nt\">/&gt;</span>\n  <span class=\"nt\">&lt;item&gt;</span>\n    <span class=\"nt\">&lt;linkId</span> <span class=\"na\">value=</span><span class=\"s\">&quot;group&quot;</span> <span class=\"nt\">/&gt;</span>\n    <span class=\"nt\">&lt;text</span> <span class=\"na\">value=</span><span class=\"s\">&quot;group&quot;</span> <span class=\"nt\">/&gt;</span>\n    <span class=\"nt\">&lt;type</span> <span class=\"na\">value=</span><span class=\"s\">&quot;group&quot;</span> <span class=\"nt\">/&gt;</span>\n    <span class=\"nt\">&lt;repeats</span> <span class=\"na\">value=</span><span class=\"s\">&quot;true&quot;</span> <span class=\"nt\">/&gt;</span>\n    <span class=\"nt\">&lt;item&gt;</span>\n      <span class=\"nt\">&lt;linkId</span> <span class=\"na\">value=</span><span class=\"s\">&quot;condition&quot;</span> <span class=\"nt\">/&gt;</span>\n      <span class=\"nt\">&lt;text</span> <span class=\"na\">value=</span><span class=\"s\">&quot;condition&quot;</span> <span class=\"nt\">/&gt;</span>\n      <span class=\"nt\">&lt;type</span> <span class=\"na\">value=</span><span class=\"s\">&quot;boolean&quot;</span> <span class=\"nt\">/&gt;</span>\n      <span class=\"nt\">&lt;required</span> <span class=\"na\">value=</span><span class=\"s\">&quot;true&quot;</span> <span class=\"nt\">/&gt;</span>\n      <span class=\"nt\">&lt;repeats</span> <span class=\"na\">value=</span><span class=\"s\">&quot;false&quot;</span> <span class=\"nt\">/&gt;</span>\n    <span class=\"nt\">&lt;/item&gt;</span>\n    <span class=\"nt\">&lt;item&gt;</span>\n      <span class=\"nt\">&lt;linkId</span> <span class=\"na\">value=</span><span class=\"s\">&quot;enable-when&quot;</span> <span class=\"nt\">/&gt;</span>\n      <span class=\"nt\">&lt;text</span> <span class=\"na\">value=</span><span class=\"s\">&quot;enable when condition true&quot;</span> <span class=\"nt\">/&gt;</span>\n      <span class=\"nt\">&lt;type</span> <span class=\"na\">value=</span><span class=\"s\">&quot;boolean&quot;</span> <span class=\"nt\">/&gt;</span>\n      <span class=\"nt\">&lt;enableWhen&gt;</span>\n        <span class=\"nt\">&lt;question</span> <span class=\"na\">value=</span><span class=\"s\">&quot;condition&quot;</span> <span class=\"nt\">/&gt;</span>\n        <span class=\"nt\">&lt;operator</span> <span class=\"na\">value=</span><span class=\"s\">&quot;=&quot;</span><span class=\"nt\">/&gt;</span>\n        <span class=\"nt\">&lt;answerBoolean</span> <span class=\"na\">value=</span><span class=\"s\">&quot;true&quot;</span> <span class=\"nt\">/&gt;</span>\n      <span class=\"nt\">&lt;/enableWhen&gt;</span>\n      <span class=\"nt\">&lt;required</span> <span class=\"na\">value=</span><span class=\"s\">&quot;true&quot;</span> <span class=\"nt\">/&gt;</span>\n      <span class=\"nt\">&lt;repeats</span> <span class=\"na\">value=</span><span class=\"s\">&quot;false&quot;</span> <span class=\"nt\">/&gt;</span>\n    <span class=\"nt\">&lt;/item&gt;</span>\n  <span class=\"nt\">&lt;/item&gt;</span>\n<span class=\"nt\">&lt;/Questionnaire&gt;</span>\n</pre></div>",
        "id": 170763044,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1562974146
    },
    {
        "content": "<div class=\"codehilite\"><pre><span></span><span class=\"cp\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>\n<span class=\"nt\">&lt;QuestionnaireResponse</span> <span class=\"na\">xmlns=</span><span class=\"s\">&quot;http://hl7.org/fhir&quot;</span><span class=\"nt\">&gt;</span>\n  <span class=\"nt\">&lt;id</span> <span class=\"na\">value=</span><span class=\"s\">&quot;questionnaireResponse-enableWhen-test&quot;</span> <span class=\"nt\">/&gt;</span>\n  <span class=\"nt\">&lt;text&gt;</span>\n    <span class=\"nt\">&lt;status</span> <span class=\"na\">value=</span><span class=\"s\">&quot;generated&quot;</span> <span class=\"nt\">/&gt;</span>\n    <span class=\"nt\">&lt;div</span> <span class=\"na\">xmlns=</span><span class=\"s\">&quot;http://www.w3.org/1999/xhtml&quot;</span> <span class=\"na\">lang=</span><span class=\"s\">&quot;en-US&quot;</span><span class=\"nt\">&gt;</span>\n      <span class=\"nt\">&lt;p&gt;</span>enableWhen test response<span class=\"nt\">&lt;/p&gt;</span>\n    <span class=\"nt\">&lt;/div&gt;</span>\n  <span class=\"nt\">&lt;/text&gt;</span>\n  <span class=\"nt\">&lt;questionnaire</span> <span class=\"na\">value=</span><span class=\"s\">&quot;http://hl7.org/fhir/us/hai/Questionnaire/questionnaire-enableWhen-test&quot;</span> <span class=\"nt\">/&gt;</span>\n  <span class=\"nt\">&lt;status</span> <span class=\"na\">value=</span><span class=\"s\">&quot;completed&quot;</span> <span class=\"nt\">/&gt;</span>\n  <span class=\"c\">&lt;!-- group 0: spacer --&gt;</span>\n  <span class=\"nt\">&lt;item&gt;</span>\n    <span class=\"nt\">&lt;linkId</span> <span class=\"na\">value=</span><span class=\"s\">&quot;group&quot;</span> <span class=\"nt\">/&gt;</span>\n    <span class=\"nt\">&lt;item&gt;</span>\n      <span class=\"nt\">&lt;linkId</span> <span class=\"na\">value=</span><span class=\"s\">&quot;condition&quot;</span> <span class=\"nt\">/&gt;</span>\n      <span class=\"nt\">&lt;text</span> <span class=\"na\">value=</span><span class=\"s\">&quot;condition&quot;</span> <span class=\"nt\">/&gt;</span>\n      <span class=\"nt\">&lt;answer&gt;</span>\n        <span class=\"nt\">&lt;valueBoolean</span> <span class=\"na\">value=</span><span class=\"s\">&quot;true&quot;</span> <span class=\"nt\">/&gt;</span>\n      <span class=\"nt\">&lt;/answer&gt;</span>\n    <span class=\"nt\">&lt;/item&gt;</span>\n<span class=\"c\">&lt;!--    &lt;item&gt;</span>\n<span class=\"c\">      &lt;linkId value=&quot;enable-when&quot; /&gt;</span>\n<span class=\"c\">      &lt;text value=&quot;enable when condition true&quot; /&gt;</span>\n<span class=\"c\">      &lt;answer&gt;</span>\n<span class=\"c\">        &lt;valueBoolean value=&quot;false&quot; /&gt;</span>\n<span class=\"c\">      &lt;/answer&gt;</span>\n<span class=\"c\">    &lt;/item&gt; --&gt;</span>\n  <span class=\"nt\">&lt;/item&gt;</span>\n  <span class=\"c\">&lt;!-- group 1: condition true, present (valid) --&gt;</span>\n  <span class=\"nt\">&lt;item&gt;</span>\n    <span class=\"nt\">&lt;linkId</span> <span class=\"na\">value=</span><span class=\"s\">&quot;group&quot;</span> <span class=\"nt\">/&gt;</span>\n    <span class=\"nt\">&lt;item&gt;</span>\n      <span class=\"nt\">&lt;linkId</span> <span class=\"na\">value=</span><span class=\"s\">&quot;condition&quot;</span> <span class=\"nt\">/&gt;</span>\n      <span class=\"nt\">&lt;text</span> <span class=\"na\">value=</span><span class=\"s\">&quot;condition&quot;</span> <span class=\"nt\">/&gt;</span>\n      <span class=\"nt\">&lt;answer&gt;</span>\n        <span class=\"nt\">&lt;valueBoolean</span> <span class=\"na\">value=</span><span class=\"s\">&quot;true&quot;</span> <span class=\"nt\">/&gt;</span>\n      <span class=\"nt\">&lt;/answer&gt;</span>\n    <span class=\"nt\">&lt;/item&gt;</span>\n    <span class=\"nt\">&lt;item&gt;</span>\n      <span class=\"nt\">&lt;linkId</span> <span class=\"na\">value=</span><span class=\"s\">&quot;enable-when&quot;</span> <span class=\"nt\">/&gt;</span>\n      <span class=\"nt\">&lt;text</span> <span class=\"na\">value=</span><span class=\"s\">&quot;enable when condition true&quot;</span> <span class=\"nt\">/&gt;</span>\n      <span class=\"nt\">&lt;answer&gt;</span>\n        <span class=\"nt\">&lt;valueBoolean</span> <span class=\"na\">value=</span><span class=\"s\">&quot;false&quot;</span> <span class=\"nt\">/&gt;</span>\n      <span class=\"nt\">&lt;/answer&gt;</span>\n    <span class=\"nt\">&lt;/item&gt;</span>\n  <span class=\"nt\">&lt;/item&gt;</span>\n  <span class=\"c\">&lt;!-- group 2: condition false, present (invalid) --&gt;</span>\n  <span class=\"nt\">&lt;item&gt;</span>\n    <span class=\"nt\">&lt;linkId</span> <span class=\"na\">value=</span><span class=\"s\">&quot;group&quot;</span> <span class=\"nt\">/&gt;</span>\n    <span class=\"nt\">&lt;item&gt;</span>\n      <span class=\"nt\">&lt;linkId</span> <span class=\"na\">value=</span><span class=\"s\">&quot;condition&quot;</span> <span class=\"nt\">/&gt;</span>\n      <span class=\"nt\">&lt;text</span> <span class=\"na\">value=</span><span class=\"s\">&quot;condition&quot;</span> <span class=\"nt\">/&gt;</span>\n      <span class=\"nt\">&lt;answer&gt;</span>\n        <span class=\"nt\">&lt;valueBoolean</span> <span class=\"na\">value=</span><span class=\"s\">&quot;false&quot;</span> <span class=\"nt\">/&gt;</span>\n      <span class=\"nt\">&lt;/answer&gt;</span>\n    <span class=\"nt\">&lt;/item&gt;</span>\n    <span class=\"nt\">&lt;item&gt;</span>\n      <span class=\"nt\">&lt;linkId</span> <span class=\"na\">value=</span><span class=\"s\">&quot;enable-when&quot;</span> <span class=\"nt\">/&gt;</span>\n      <span class=\"nt\">&lt;text</span> <span class=\"na\">value=</span><span class=\"s\">&quot;enable when condition true&quot;</span> <span class=\"nt\">/&gt;</span>\n      <span class=\"nt\">&lt;answer&gt;</span>\n        <span class=\"nt\">&lt;valueBoolean</span> <span class=\"na\">value=</span><span class=\"s\">&quot;false&quot;</span> <span class=\"nt\">/&gt;</span>\n      <span class=\"nt\">&lt;/answer&gt;</span>\n    <span class=\"nt\">&lt;/item&gt;</span>\n  <span class=\"nt\">&lt;/item&gt;</span>\n  <span class=\"c\">&lt;!-- group 3: condition true, absent (invalid) --&gt;</span>\n  <span class=\"nt\">&lt;item&gt;</span>\n    <span class=\"nt\">&lt;linkId</span> <span class=\"na\">value=</span><span class=\"s\">&quot;group&quot;</span> <span class=\"nt\">/&gt;</span>\n    <span class=\"nt\">&lt;item&gt;</span>\n      <span class=\"nt\">&lt;linkId</span> <span class=\"na\">value=</span><span class=\"s\">&quot;condition&quot;</span> <span class=\"nt\">/&gt;</span>\n      <span class=\"nt\">&lt;text</span> <span class=\"na\">value=</span><span class=\"s\">&quot;condition&quot;</span> <span class=\"nt\">/&gt;</span>\n      <span class=\"nt\">&lt;answer&gt;</span>\n        <span class=\"nt\">&lt;valueBoolean</span> <span class=\"na\">value=</span><span class=\"s\">&quot;true&quot;</span> <span class=\"nt\">/&gt;</span>\n      <span class=\"nt\">&lt;/answer&gt;</span>\n    <span class=\"nt\">&lt;/item&gt;</span>\n  <span class=\"nt\">&lt;/item&gt;</span>\n  <span class=\"c\">&lt;!-- group 4: condition false, absent (valid) --&gt;</span>\n  <span class=\"nt\">&lt;item&gt;</span>\n    <span class=\"nt\">&lt;linkId</span> <span class=\"na\">value=</span><span class=\"s\">&quot;group&quot;</span> <span class=\"nt\">/&gt;</span>\n    <span class=\"nt\">&lt;item&gt;</span>\n      <span class=\"nt\">&lt;linkId</span> <span class=\"na\">value=</span><span class=\"s\">&quot;condition&quot;</span> <span class=\"nt\">/&gt;</span>\n      <span class=\"nt\">&lt;text</span> <span class=\"na\">value=</span><span class=\"s\">&quot;condition&quot;</span> <span class=\"nt\">/&gt;</span>\n      <span class=\"nt\">&lt;answer&gt;</span>\n        <span class=\"nt\">&lt;valueBoolean</span> <span class=\"na\">value=</span><span class=\"s\">&quot;false&quot;</span> <span class=\"nt\">/&gt;</span>\n      <span class=\"nt\">&lt;/answer&gt;</span>\n    <span class=\"nt\">&lt;/item&gt;</span>\n  <span class=\"nt\">&lt;/item&gt;</span>\n<span class=\"nt\">&lt;/QuestionnaireResponse&gt;</span>\n</pre></div>",
        "id": 170763045,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1562974146
    },
    {
        "content": "<p>the condition only applies within the group. If you want conditions to apply outside the group, either that questionnaire is illegal - and it shouldn't be, or we need some consistent algorithm to determine how the applicable answer for a condition is resolved.</p>",
        "id": 170763046,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1562974146
    },
    {
        "content": "<p>actually, there's only one possible algorithm that can work:<br>\n- given <code>sourceQ</code> - question that contains the enableWhen reference and <code>targetQ</code> - question that the enableWhen references in the Q<br>\n- and also <code>sourceA</code> - answer for <code>sourceQ</code> and <code>targetA</code> -  answer for <code>targetQ</code> in the QR<br>\n- work up from <code>sourceQ</code> until you find the Q group that also contains <code>targetQ</code> - this is <code>groupQ</code><br>\n- work up from <code>sourceA</code> until you find the QR group that matches <code>groupQ</code> - this is <code>groupA</code><br>\n- any <code>targetA</code> in <code>groupA</code> are input for the enableWhen decision</p>",
        "id": 170765999,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1562978571
    },
    {
        "content": "<p>I'm writing the validator that way.</p>",
        "id": 170766213,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1562978849
    },
    {
        "content": "<p>groupQ and groupA may be the base</p>",
        "id": 170766449,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1562979191
    },
    {
        "content": "<p>Enable When can depend on any preceding item.  It isn't currently prohibited from depending on following nodes, but have no issue adding such a prohibition</p>",
        "id": 170815729,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1563073752
    },
    {
        "content": "<p>no prohibition - just a warning</p>",
        "id": 170879690,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1563185623
    },
    {
        "content": "<p>Would it be an error if an ancestor could be disabled by descendants?</p>",
        "id": 170899334,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1563201796
    },
    {
        "content": "<blockquote>\n<p>Whether you use enableWhenExpression, or just simple enableWhen, it's unresolvable if the enabling of a question depends on it's own answer (or a child answer)</p>\n</blockquote>\n<p>I agree that having the enabled status of a question depend on itself or a child element is undesirable.   It would be like having an HTML &amp; JavaScript page where there was a checkbox that disabled if you checked it.  It is perfectly valid to make such a page, though.</p>\n<p>From LHC-Forms's perspective, the expressions are black boxes into which the Questionnaire and QuesitonnaireResponse are dumped (along with the context node) and there is no telling what parts of those resources will get utilized.  (All processing is handled by fhirpath.js).  I don't see how it would be possible in our case to even provide a warning to the user.</p>\n<p>When enabledWhen, it should be possible to provide a warning.</p>",
        "id": 170902793,
        "sender_full_name": "Paul Lynch",
        "timestamp": 1563204030
    },
    {
        "content": "<blockquote>\n<p>I'm writing the validator that way.</p>\n</blockquote>\n<p>Are you writing it while <a href=\"#narrow/stream/179160-social/topic/Where.E2.80.99s.20Grahame/near/170877989\" title=\"#narrow/stream/179160-social/topic/Where.E2.80.99s.20Grahame/near/170877989\">kayaking past crocodiles</a>?</p>",
        "id": 170902884,
        "sender_full_name": "Paul Lynch",
        "timestamp": 1563204111
    },
    {
        "content": "<p>The problem with disabling an element based on child questions is that there's no mechanism to re-enable it.  Is there a reason why we should allow something that we can't think of a real use-case for and which is likely to create grief?</p>",
        "id": 170903262,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1563204343
    },
    {
        "content": "<p>My point is that was that we can't always catch those cases, so why complicate things?  An HTML form does not worry about things like that, and it just adds more lines the to the spec.  But, one could argue that we should put up the guard rails where we can; I don't have a strong opinion about it.</p>",
        "id": 170903802,
        "sender_full_name": "Paul Lynch",
        "timestamp": 1563204643
    },
    {
        "content": "<p>Saying it's not legal is not the same as saying \"implementations must detect illegal behavior\".</p>",
        "id": 170906201,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1563206178
    },
    {
        "content": "<p>right. Validator calls it an error.</p>",
        "id": 170935480,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1563227896
    },
    {
        "content": "<p>I'm hitting an error when I try to validate a Questionnaire resource, that includes enableWhen boolean logic, using the <a href=\"http://test.fhir.org/r4\" target=\"_blank\" title=\"http://test.fhir.org/r4\">test.fhir.org/r4</a>  server. </p>\n<ul>\n<li>\n<p>que-7 rule states that if an operator is 'exists\", the value must be a boolean (Expression: operator = 'exists' implies (answer is Boolean)).   </p>\n</li>\n<li>\n<p>I believe this invariant rule is the reason I get a conformance error of: \"Concept not found (next char = \\\"t\\\", in \\\"true\\\") at character 1\"...when I include the following in the example I'm validating:</p>\n</li>\n</ul>\n<div class=\"codehilite\"><pre><span></span>      &quot;enableWhen&quot;: [\n        {\n          &quot;question&quot; : &quot;H4/Q5&quot;,\n          &quot;operator&quot; : &quot;exists&quot;,\n          &quot;answerBoolean&quot;:  true\n        }\n      ],\n      &quot;enableBehavior&quot;: &quot;all&quot;,\n</pre></div>\n\n\n<ul>\n<li>The only way I've found around that error is to change the operator or remove answerBoolean entirely (other answer types can pass without problem).  </li>\n<li>If I remove answerBoolean entirely I receive an error reminding me that  enableWhen.answer[x] has a cardinality of 1..1. </li>\n</ul>\n<p>I feel like this is a catch-22 but I'm assuming it's user error on my part.  Is there another way that I should be formating enableWhen.answer under the specific circumstances where the boolean value of a previous question determines whether the later question should be displayed to the user?</p>",
        "id": 173237975,
        "sender_full_name": "Sheridan Cook",
        "timestamp": 1565813775
    },
    {
        "content": "<p>how are you validating?</p>",
        "id": 173240318,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1565815313
    },
    {
        "content": "<blockquote>\n<p>how are you validating?</p>\n</blockquote>\n<p>Hi Grahame, I'm copy/pasting the full json Questionnaire resource into the text box on the server UI and selecting the operation: Validation.</p>\n<p>When I click upload I receive the following error:   </p>\n<p>{<br>\n  \"resourceType\" : \"OperationOutcome\",<br>\n  \"text\" : {<br>\n    \"status\" : \"generated\",<br>\n    \"div\" : \"&lt;div xmlns=\\\"http://www.w3.org/1999/xhtml\\\"&gt;&lt;p&gt;Concept not found (next char = \\\"t\\\", in \\\"true\\\") at character 1&lt;/p&gt;&lt;/div&gt;\"<br>\n  },<br>\n  \"issue\" : [<br>\n    {<br>\n      \"severity\" : \"error\",<br>\n      \"code\" : \"not-supported\",<br>\n      \"details\" : {<br>\n        \"text\" : \"Concept not found (next char = \\\"t\\\", in \\\"true\\\") at character 1\"<br>\n      },<br>\n      \"diagnostics\" : \"(00000000008873B0){FHIRServer.exe} [0000000000C883B0] Unknown function at TMethodImplementationIntercept + $7E37E0\\r\\n(00000000040DB242){FHIRServer.exe} [00000000044DC242] Unknown function at TMethodImplementationIntercept + $4037672\\r\\n(00000000040DD0F0){FHIRServer.exe} [00000000044DE0F0] Unknown function at TMethodImplementationIntercept + $4039520\\r\\n(0000000000049157){FHIRServer.exe} [000000000044A157] Unknown function at __dbk_fcall_wrapper + $2C0F7\\r\\n(0000000000049A5B){FHIRServer.exe} [000000000044AA5B] Unknown function at __dbk_fcall_wrapper + $2C9FB\\r\\n(0000000000011576){FHIRServer.exe} [0000000000412576]\\r\\n(00000000000115C1){FHIRServer.exe} [00000000004125C1]\\r\\n(00000000008873B0){FHIRServer.exe} [0000000000C883B0] Unknown function at TMethodImplementationIntercept + $7E37E0\\r\\n(0000000000886AD0){FHIRServer.exe} [0000000000C87AD0] Unknown function at TMethodImplementationIntercept + $7E2F00\\r\\n(00000000008863AE){FHIRServer.exe} [0000000000C873AE] Unknown function at TMethodImplementationIntercept + $7E27DE\\r\\n(0000000000886F9F){FHIRServer.exe} [0000000000C87F9F] Unknown function at TMethodImplementationIntercept + $7E33CF\\r\\n(00000000008BA28E){FHIRServer.exe} [0000000000CBB28E] Unknown function at TMethodImplementationIntercept + $8166BE\\r\\n(00000000008B88E7){FHIRServer.exe} [0000000000CB98E7] Unknown function at TMethodImplementationIntercept + $814D17\\r\\n(000000000085F13F){FHIRServer.exe} [0000000000C6013F] Unknown function at TMethodImplementationIntercept + $7BB56F\\r\\n(000000000085C89A){FHIRServer.exe} [0000000000C5D89A] Unknown function at TMethodImplementationIntercept + $7B8CCA\\r\\n(000000000085D3FF){FHIRServer.exe} [0000000000C5E3FF] Unknown function at TMethodImplementationIntercept + $7B982F\\r\\n(0000000000A7774C){FHIRServer.exe} [0000000000E7874C] Unknown function at TMethodImplementationIntercept + $9D3B7C\\r\\n(0000000003B195C9){FHIRServer.exe} [0000000003F1A5C9] Unknown function at TMethodImplementationIntercept + $3A759F9\\r\\n(00000000034795C2){FHIRServer.exe} [000000000387A5C2] Unknown function at TMethodImplementationIntercept + $33D59F2\\r\\n(00000000034780C9){FHIRServer.exe} [00000000038790C9] Unknown function at TMethodImplementationIntercept + $33D44F9\\r\\n(0000000003471DD4){FHIRServer.exe} [0000000003872DD4] Unknown function at TMethodImplementationIntercept + $33CE204\\r\\n(00000000034724B5){FHIRServer.exe} [00000000038734B5] Unknown function at TMethodImplementationIntercept + $33CE8E5\\r\\n(00000000034724B5){FHIRServer.exe} [00000000038734B5] Unknown function at TMethodImplementationIntercept + $33CE8E5\\r\\n(00000000034724B5){FHIRServer.exe} [00000000038734B5] Unknown function at TMethodImplementationIntercept + $33CE8E5\\r\\n(000000000346C2FC){FHIRServer.exe} [000000000386D2FC] Unknown function at TMethodImplementationIntercept + $33C872C\\r\\n(000000000346BCB2){FHIRServer.exe} [000000000386CCB2] Unknown function at TMethodImplementationIntercept + $33C80E2\\r\\n(000000000346B261){FHIRServer.exe} [000000000386C261] Unknown function at TMethodImplementationIntercept + $33C7691\\r\\n(000000000347CB6F){FHIRServer.exe} [000000000387DB6F] Unknown function at TMethodImplementationIntercept + $33D8F9F\\r\\n(000000000347CECE){FHIRServer.exe} [000000000387DECE] Unknown function at TMethodImplementationIntercept + $33D92FE\\r\\n(00000000038F66FF){FHIRServer.exe} [0000000003CF76FF] Unknown function at TMethodImplementationIntercept + $3852B2F\\r\\n(0000000000B34AD5){FHIRServer.exe} [0000000000F35AD5] Unknown function at TMethodImplementationIntercept + $A90F05\\r\\n(0000000003F01CC1){FHIRServer.exe} [0000000004302CC1] Unknown function at TMethodImplementationIntercept + $3E5E0F1\\r\\n(0000000003EF8C25){FHIRServer.exe} [00000000042F9C25] Unknown function at TMethodImplementationIntercept + $3E55055\\r\\n(0000000003EF5317){FHIRServer.exe} [00000000042F6317] Unknown function at TMethodImplementationIntercept + $3E51747\\r\\n(0000000003F13DED){FHIRServer.exe} [0000000004314DED] Unknown function at TMethodImplementationIntercept + $3E7021D\\r\\n(0000000000647F29){FHIRServer.exe} [0000000000A48F29] Unknown function at TMethodImplementationIntercept + $5A4359\\r\\n(000000000064989E){FHIRServer.exe} [0000000000A4A89E] Unknown function at TMethodImplementationIntercept + $5A5CCE\\r\\n(00000000005688F9){FHIRServer.exe} [00000000009698F9] Unknown function at TMethodImplementationIntercept + $4C4D29\\r\\n(000000000056690A){FHIRServer.exe} [000000000096790A] Unknown function at TMethodImplementationIntercept + $4C2D3A\\r\\n(000000000056A8BB){FHIRServer.exe} [000000000096B8BB] Unknown function at TMethodImplementationIntercept + $4C6CEB\\r\\n(0000000000569B6B){FHIRServer.exe} [000000000096AB6B] Unknown function at TMethodImplementationIntercept + $4C5F9B\\r\\n(000000000012E883){FHIRServer.exe} [000000000052F883] Unknown function at TMethodImplementationIntercept + $8ACB3\\r\\n(000000000001216D){FHIRServer.exe} [000000000041316D]\\r\\n(00000000000074D4){KERNEL32.DLL} [00007FFF7A6984D4] BaseThreadInitThunk + $14\\r\\n(000000000006D851){ntdll.dll   } [00007FFF7B50E851] RtlUserThreadStart + $21\\r\\n\"<br>\n    }<br>\n  ]<br>\n}</p>",
        "id": 173293516,
        "sender_full_name": "Sheridan Cook",
        "timestamp": 1565878222
    },
    {
        "content": "<p>have you got an example of a full questionnaire?</p>",
        "id": 173313778,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1565894727
    },
    {
        "content": "<blockquote>\n<p>have you got an example of a full questionnaire?</p>\n</blockquote>\n<p>Sure! <a href=\"/user_uploads/10155/idxqN_c2H60PC_79K0QsvEjD/QuestionnaireExample1.json\" target=\"_blank\" title=\"QuestionnaireExample1.json\">QuestionnaireExample1.json</a> is the one I'm trying to validate currently. I've removed all the answerBooleans except the one found on line 871 to make troubleshooting easier. <br>\n<a href=\"/user_uploads/10155/CtEYbjJzA7k7TEzWOKdu5Axj/QuestionnaireExample2.json\" target=\"_blank\" title=\"QuestionnaireExample2.json\">QuestionnaireExample2.json</a> is an example I pulled off the R4 FHIR server (id: \"bb\") that shares the enableWhen.answerBoolean format that Example 1 has. Both fail validation with the same error noted above.</p>",
        "id": 173314912,
        "sender_full_name": "Sheridan Cook",
        "timestamp": 1565895519
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> <span class=\"user-mention\" data-user-id=\"222582\">@Sheridan Cook</span> Just checking if this got resolved or not.</p>",
        "id": 173562597,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1566236012
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> not resolved yet. My solution for now is removing the answerBoolean from the test message to continue validation on other parts of the message,  I'd like to know if that is the correct way of addressing that invariant or if the profile on the R4 profile needs to be modified.</p>",
        "id": 173564357,
        "sender_full_name": "Sheridan Cook",
        "timestamp": 1566237274
    },
    {
        "content": "<p>I <em>think</em> the invariant is correct.  <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> ?</p>",
        "id": 173623230,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1566267143
    },
    {
        "content": "<p>it's still on my todo list...</p>",
        "id": 173632906,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1566283186
    }
]