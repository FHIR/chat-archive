[
    {
        "content": "<p>A. When the form filler (eg. LHC Forms)  merges a questionnaire response with a questionnaire, what are the expectations for behavior if there is a mismatch such as a questionnaire response has the question as a string but the questionnaire definition has this now as a dropdown?  Or do you prevent mismatches by storing (in the questionnaire ID element of the questionnaire response) the entire url of the questionnaire used to create the qr including the version?</p>\n<p>I know that when we call the utility method to do the merge, we reference the form definitions for the questionnaire used to create the qr, but we didn't ever consider mismatches between the latest questionnaire version and the version when the questionnaire was created.  Ideally, the questionnaire should be stable, so the shouldn't be many changes from year to year, but it is something to think about.</p>\n<p>B. Is it part of the spec that the questionnaire response is supposed to be populated by the form filler when the questionnaire response is submitted?  I don't see that happening, but maybe there is a setting in LHC-Forms parameters for the method that I don't have enabled?  If LHC-Forms doesn't do this when the form is submitted, then I guess our software should add functionality to add questionnaire ID to the questionnaire response?</p>",
        "id": 264653618,
        "sender_full_name": "Diane",
        "timestamp": 1639357150
    },
    {
        "content": "<p>That is a canonical URL, not a reference, and yes, we do recommend putting the version on the end<br>\ne.g. <a href=\"https://lforms-fhir.nlm.nih.gov/baseR4/Questionnaire/55418-8-x|0.2.0\">https://lforms-fhir.nlm.nih.gov/baseR4/Questionnaire/55418-8-x|0.2.0</a></p>",
        "id": 264662292,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1639369033
    },
    {
        "content": "<p>Thanks for pointing out the canonical URL with the bar for the version!</p>",
        "id": 264663211,
        "sender_full_name": "Diane",
        "timestamp": 1639370496
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"237340\">Diane</span> <a href=\"#narrow/stream/179255-questionnaire/topic/Editing.20a.20questionnaire.20response/near/264653618\">said</a>:</p>\n<blockquote>\n<p>B. Is it part of the spec that the questionnaire response is supposed to be populated by the form filler when the questionnaire response is submitted?  I don't see that happening, but maybe there is a setting in LHC-Forms parameters for the method that I don't have enabled?  If LHC-Forms doesn't do this when the form is submitted, then I guess our software should add functionality to add questionnaire ID to the questionnaire response?</p>\n</blockquote>\n<p>LHC-Forms does leave it up to the application to set QuestionnaireResponse.questionnaire on the response it generates.  The reason it does that is that there are some situations in which only the application knows what the questionnaire canonical should be-- for instance, if the user has uploaded a new Questionnaire into the app which needs to be saved to the FHIR server prior to saving the QuestionnaireResponse.</p>",
        "id": 264737256,
        "sender_full_name": "Paul Lynch",
        "timestamp": 1639415141
    },
    {
        "content": "<p>Thanks. This makes sense.</p>",
        "id": 264761262,
        "sender_full_name": "Diane",
        "timestamp": 1639425491
    },
    {
        "content": "<p>Looking at this example: <a href=\"http://www.hl7.org/fhir/questionnaireresponse-example-gcs.json.html\">http://www.hl7.org/fhir/questionnaireresponse-example-gcs.json.html</a> the questionnaire field is set to a questionnaire id (\"Questionnaire/gcs\") rather than a canonical url in the corresponding questionnaire <a href=\"http://www.hl7.org/fhir/questionnaire-example-gcs.json.html\">http://www.hl7.org/fhir/questionnaire-example-gcs.json.html</a> - should this be corrected?</p>",
        "id": 265556798,
        "sender_full_name": "Jing Tang",
        "timestamp": 1640003781
    },
    {
        "content": "<p>Yes it should.  Can you submit a change request <span class=\"user-mention\" data-user-id=\"366686\">@Jing Tang</span>?</p>",
        "id": 265576222,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1640013497
    },
    {
        "content": "<p>done <a href=\"https://jira.hl7.org/browse/FHIR-34530\">https://jira.hl7.org/browse/FHIR-34530</a></p>",
        "id": 265594377,
        "sender_full_name": "Jing Tang",
        "timestamp": 1640022103
    }
]