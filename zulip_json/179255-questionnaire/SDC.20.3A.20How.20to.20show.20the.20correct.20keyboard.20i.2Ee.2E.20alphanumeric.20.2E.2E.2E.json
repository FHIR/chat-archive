[
    {
        "content": "<p>We want to implement a phone number widget in the android SDC library. I was wondering whether we should go ahead with support for <a href=\"http://hl7.org/fhir/R4/extension-regex.html\">http://hl7.org/fhir/R4/extension-regex.html</a> or <a href=\"http://hl7.org/fhir/R4/extension-entryformat.html\">http://hl7.org/fhir/R4/extension-entryformat.html</a> to implement this</p>\n<p>The idea is that based on the regex or entry format, the widget will have either a pop up alphanumeric keyboard, or a phone number key pad</p>\n<p>eg for a phone number <a href=\"https://developer.android.com/reference/android/text/InputType#TYPE_CLASS_PHONE\">https://developer.android.com/reference/android/text/InputType#TYPE_CLASS_PHONE</a></p>\n<p>Also is there something else that we should be using ?</p>\n<p>cc: <span class=\"user-mention\" data-user-id=\"366686\">@Jing Tang</span></p>",
        "id": 251699890,
        "sender_full_name": "Kashyap Jois",
        "timestamp": 1630581838
    },
    {
        "content": "<p>so entry format is the human readable version, it basically is just a hint such as \"XXX-XXX-XXXX\" to occupy the box before the user inputs the phone number. so the library can't really use that to figure out what keyboard to bring up. the issue with regex is that, it's only used for validation, so the user can still type whatever they want... also there's the problem of \"parsing\" the regex to know that it's a phone number (i.e. [0-9]* and [0123456789]* are equivalent) so it's not a given.</p>",
        "id": 251716610,
        "sender_full_name": "Jing Tang",
        "timestamp": 1630590148
    },
    {
        "content": "<p>wonder if it makes sense for us to start defining \"mobile\" extensions to inform this type of choices...</p>",
        "id": 251717045,
        "sender_full_name": "Jing Tang",
        "timestamp": 1630590308
    },
    {
        "content": "<p>The challenge with a specific widget to define phone numbers is that there are so many widely varying expectations around what's acceptable once you take different jurisdictions, extension approaches, etc. into account.  A generic widget would allow values that particular forms probably wouldn't want.</p>",
        "id": 251751804,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1630603242
    },
    {
        "content": "<p>I'm wondering whether an extension for Url fields to constrain the protocol would be good? On the one hand I have yearned for an option to constrain it to just \"https:\", on the other hand, if it is \"tel:\" it could activate a phone number input and if it is \"mailto:\" an email input. I was comparing to the \"input type\" attribute in HTML, and FHIR Questionnaire is missing exactly these two in comparison. I would then leave it up to the implementer to find a sufficiently capable phone number field for their needs. On a browser one would probably map it directly to \"input type=\"tel\"\", on mobile there are lots of 3rd party libraries for phone number field.</p>",
        "id": 251756207,
        "sender_full_name": "Tilo Christ",
        "timestamp": 1630604896
    },
    {
        "content": "<p>HTML has some hints that do this style of support, and it's something I've been thinking about for a while, but hasn't got to the top of the list to look into, <span class=\"user-mention\" data-user-id=\"195344\">@Paul Lynch</span> ?<br>\nSame for email addresses</p>",
        "id": 251810982,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1630633268
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191320\">Lloyd McKenzie</span> <a href=\"#narrow/stream/179255-questionnaire/topic/SDC.20.3A.20Phone.20number.20widget/near/251751804\">said</a>:</p>\n<blockquote>\n<p>The challenge with a specific widget to define phone numbers is that there are so many widely varying expectations around what's acceptable once you take different jurisdictions, extension approaches, etc. into account.  A generic widget would allow values that particular forms probably wouldn't want.</p>\n</blockquote>\n<p>What about extending the item-control and adding a new extension for \"number\" . That way we can handle even credit card numbers or Personal identification numbers</p>",
        "id": 252149204,
        "sender_full_name": "Kashyap Jois",
        "timestamp": 1630920097
    },
    {
        "content": "<p>The ask here is for a way to hint what type of field it is so that the Web controls can show the correct keyboard. And likely other possible behavious etc.</p>",
        "id": 252150423,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1630920807
    },
    {
        "content": "<p>Feel free to make a proposal, but I'm not clear what we can do that will work generically on an international basis</p>",
        "id": 252194286,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1630943652
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191367\">Brian Postlethwaite</span> <a href=\"#narrow/stream/179255-questionnaire/topic/SDC.20.3A.20How.20to.20show.20the.20correct.20keyboard.20i.2Ee.2E.20alphanumeric.20.2E.2E.2E/near/252150423\">said</a>:</p>\n<blockquote>\n<p>The ask here is for a way to hint what type of field it is so that the Web controls can show the correct keyboard. And likely other possible behavious etc.</p>\n</blockquote>\n<p>you mean something that in one's country would have a specific meaning? i.e. when you put \"phone\" in one country would mean xxx xxx xx xx  and in another xxx xxx xxx,...?</p>",
        "id": 252197201,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1630945438
    },
    {
        "content": "<p>Even in a single country - is country code required?  Region code?  Extensions?  What a given UI accepts is likely to vary.  Regex and pattern give you a generic way of defining what you want.  In theory, given a regex, you could have a control that enforces that.  That would be more useful and more generic...</p>",
        "id": 252204666,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1630949793
    },
    {
        "content": "<p>Indeed. I don't think a valueset exists for that or it would even be sensible to aim at that. Phone number digits are grouped in whatever way people want even within a country. Or within a the same device, if the device handles 2 countries at the same time.</p>",
        "id": 252215264,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1630956842
    },
    {
        "content": "<p>Going back to the original question, about bringing up the right keyboard for mobile devices, I imagine we could have a \"preferredEntryMode\" extension, which could be populated with a few values, like \"alphaKB\" or \"numKB\" (or \"drawingPad\", or Neuralink)</p>\n<p>If that is sensible, would that be implementation-specific, or something for standard or SDC extension?</p>",
        "id": 252215932,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1630957246
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> any insight on <span class=\"user-mention\" data-user-id=\"191832\">@Jose Costa Teixeira</span> question? Considering the fact that the SDC component of the android FHIR SDK is sticking to the SDC-IG, should this extension be proposed as an addition to that?<br>\nAlso as a questionnaire designer should I be bothered about which keyboard pops up vs what the question expects as an answer? What kind of extension makes more sense? Something like \"preferedEntryMode\" eg: \"alphaKB\", \"drawingPad\" or \"stringType\"  eg: \"number\", \"email\", \"signature\" etc.</p>\n<p>cc: <span class=\"user-mention\" data-user-id=\"366686\">@Jing Tang</span></p>",
        "id": 252418346,
        "sender_full_name": "Kashyap Jois",
        "timestamp": 1631086345
    },
    {
        "content": "<p>Do we have a value set that would work consistently across devices and technologies?</p>",
        "id": 252455281,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1631106180
    },
    {
        "content": "<p>Nope, not to my knowledge. I will bring this up in the WHO Call we have every Tuesday with implementers of the Android FHIR SDK and WHO Smart Guidelines. I will post the feedback in this chat. Thanks for the quick response <span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span></p>",
        "id": 252583531,
        "sender_full_name": "Kashyap Jois",
        "timestamp": 1631173062
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191320\">Lloyd McKenzie</span> <a href=\"#narrow/stream/179255-questionnaire/topic/SDC.20.3A.20How.20to.20show.20the.20correct.20keyboard.20i.2Ee.2E.20alphanumeric.20.2E.2E.2E/near/252204666\">said</a>:</p>\n<blockquote>\n<p>Even in a single country - is country code required?  Region code?  Extensions?  What a given UI accepts is likely to vary.  Regex and pattern give you a generic way of defining what you want.  In theory, given a regex, you could have a control that enforces that.  That would be more useful and more generic...</p>\n</blockquote>\n<p>I think regex is putting the onus of defining a proper pattern on the author of the questionnaire (a clinician?). Not a trivial exercise, that scores of skilled regex wranglers have gotten wrong. I think it makes sense to have something that indicates that this field is meant to be a phone number and then leave it to the implementer of the questionnaire filler to choose a powerful phone number field/validation library. Ultimately, that would give you both ways. If the author of a questionnaire believes they can define the better regex they can still do so through entryFormat, and if they want to hand it to the maker of the filler they can also do it. The filler variant also allows for effects such as a country flag dropdown and normalisation to a canonical number (e.g. \"tel:+18884444888x8888\").</p>",
        "id": 252667973,
        "sender_full_name": "Tilo Christ",
        "timestamp": 1631210312
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"382830\">Kashyap Jois</span> <a href=\"#narrow/stream/179255-questionnaire/topic/SDC.20.3A.20How.20to.20show.20the.20correct.20keyboard.20i.2Ee.2E.20alphanumeric.20.2E.2E.2E/near/252418346\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"191320\">Lloyd McKenzie</span> any insight on <span class=\"user-mention silent\" data-user-id=\"191832\">Jose Costa Teixeira</span> question? Considering the fact that the SDC component of the android FHIR SDK is sticking to the SDC-IG, should this extension be proposed as an addition to that?<br>\nAlso as a questionnaire designer should I be bothered about which keyboard pops up vs what the question expects as an answer? What kind of extension makes more sense? Something like \"preferedEntryMode\" eg: \"alphaKB\", \"drawingPad\" or \"stringType\"  eg: \"number\", \"email\", \"signature\" etc.</p>\n<p>cc: <span class=\"user-mention silent\" data-user-id=\"366686\">Jing Tang</span></p>\n</blockquote>\n<p>I think for \"number\", \"signature\", etc. one would not need a preferred entry mode, as this is already expressed by the item types and the keyboard / signature pad can be brought up accordingly. I think the notable exception if you compare to the capabilities of HTML input field hints is the \"email\" and \"tel(ephone number)\". HTML can express both as URLs with a special protocol \"mailto\" and \"tel\". I am wondering whether something linke the following would make sense:<br>\n<code>{\n  \"status\": \"draft\",\n  \"resourceType\": \"Questionnaire\",\n  \"meta\": {\n    \"profile\": [\n      \"http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire|2.7\"\n    ],\n    \"tag\": [\n      {\n        \"code\": \"lformsVersion: 29.2.1\"\n      }\n    ]\n  },\n  \"item\": [\n    {\n      \"type\": \"url\",\n      \"required\": true,\n      \"repeats\": true,\n      \"linkId\": \"dayphone\",\n      \"text\": \"daytimePhone\",\n      \"extension\": [\n        {\n          \"url\": \"http://hl7.org/fhir/url-protocol\",\n          \"valueString\": \"tel\"\n        }\n      ]\n    }\n  ]\n}</code></p>",
        "id": 252670130,
        "sender_full_name": "Tilo Christ",
        "timestamp": 1631211134
    },
    {
        "content": "<p><a href=\"/user_uploads/10155/8rn01P4Xjor8_XttC-cDJfBt/tempFileForShare_20210910-063033.jpg\">tempFileForShare_20210910-063033.jpg</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/8rn01P4Xjor8_XttC-cDJfBt/tempFileForShare_20210910-063033.jpg\" title=\"tempFileForShare_20210910-063033.jpg\"><img src=\"/user_uploads/10155/8rn01P4Xjor8_XttC-cDJfBt/tempFileForShare_20210910-063033.jpg\"></a></div>",
        "id": 252690297,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1631219477
    },
    {
        "content": "<p>I wasn't thinking about the protocol stuff, more the keyboard layout the filler uses. And the 2 examples you give are good as with email you get the @ sign specially added, and phone numbers even though a string tweak the keyboard such as this shown on android</p>",
        "id": 252690454,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1631219537
    },
    {
        "content": "<p>Saying \"phone number\" isn't much help if you don't know what the rules are.  Sure, a data entry tool could pick an arbitrary phone number algorithm, but that might allow in either more than is desired or less.  If you're concerned about clinicians not getting the regex right, you're free to leverage the ability to point to 'standard' data elements where the rules have been pre-defined by someone who presumably knows how.</p>\n<p>If you're using FHIR to capture a phone number, you <em>shouldn't</em> be using URL.  We made a very conscious decision to break from the v3 choice of representing phone numbers as URLs - because the URL rules are more stringent than most real-world systems can manage, and sometimes prevent you from saying what you want.  A telephone number is a string.  Sometimes the proper value for a phone number really is \"1-888-NOCOVID\" or something like that.</p>",
        "id": 252690505,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1631219558
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191320\">Lloyd McKenzie</span> <a href=\"#narrow/stream/179255-questionnaire/topic/SDC.20.3A.20How.20to.20show.20the.20correct.20keyboard.20i.2Ee.2E.20alphanumeric.20.2E.2E.2E/near/252690505\">said</a>:</p>\n<blockquote>\n<p>Saying \"phone number\" isn't much help if you don't know what the rules are.  Sure, a data entry tool could pick an arbitrary phone number algorithm, but that might allow in either more than is desired or less.  If you're concerned about clinicians not getting the regex right, you're free to leverage the ability to point to 'standard' data elements where the rules have been pre-defined by someone who presumably knows how.</p>\n</blockquote>\n<p>The 'standard' rules have been pre-defined in fine libraries, such as Google's <code>libphonenumber</code> (<a href=\"https://github.com/google/libphonenumber\">https://github.com/google/libphonenumber</a>). It can determine whether a phone number is valid in a given region and pretty-print it, or canonicalise it. Seeing how this weighs in at 200KB of metadata to describe valid phone numbers (plus a rules engine to execute it) in my mind makes it clear that linking this library to a filler might be more feasible than pointing a telephony layperson questionnaire author at a library of regexes.</p>\n<blockquote>\n<p>If you're using FHIR to capture a phone number, you <em>shouldn't</em> be using URL.  We made a very conscious decision to break from the v3 choice of representing phone numbers as URLs - because the URL rules are more stringent than most real-world systems can manage, and sometimes prevent you from saying what you want.  A telephone number is a string.  Sometimes the proper value for a phone number really is \"1-888-NOCOVID\" or something like that.</p>\n</blockquote>\n<p>Sorry, I'm not a FHIR historian and wasn't aware of that determination when I outlined my thoughts. I've had some exposure to computerised telephony/call-centers and the drivers for auto-dialling are oftentimes based on tel: URLs, so that's what I chose for my example. So if one goes deliberately too far beyond that it will look nice to humans, but potentially break auto-dial. Similar situation if you try to auto-dial a deliberately very poorly formed phone# on a smartphone.</p>",
        "id": 252697260,
        "sender_full_name": "Tilo Christ",
        "timestamp": 1631222103
    },
    {
        "content": "<p>Its the libs and tools that do come native on a platform or browser that I'm looking to tag and enable, not expecting that we'd do it ourselves. But that we could too if the filler wanted.</p>",
        "id": 252697653,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1631222269
    },
    {
        "content": "<p>We have an extension to support autodial.  The base data type in FHIR has zero expectation that captured/shared numbers will work for autodial.</p>",
        "id": 252795852,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1631284293
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191320\">Lloyd McKenzie</span> <a href=\"#narrow/stream/179255-questionnaire/topic/SDC.20.3A.20How.20to.20show.20the.20correct.20keyboard.20i.2Ee.2E.20alphanumeric.20.2E.2E.2E/near/252795852\">said</a>:</p>\n<blockquote>\n<p>We have an extension to support autodial.  The base data type in FHIR has zero expectation that captured/shared numbers will work for autodial.</p>\n</blockquote>\n<p>Can you point me to that? I wasn't aware of it.</p>",
        "id": 252797253,
        "sender_full_name": "Tilo Christ",
        "timestamp": 1631284896
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191367\">Brian Postlethwaite</span> <a href=\"#narrow/stream/179255-questionnaire/topic/SDC.20.3A.20How.20to.20show.20the.20correct.20keyboard.20i.2Ee.2E.20alphanumeric.20.2E.2E.2E/near/252697653\">said</a>:</p>\n<blockquote>\n<p>Its the libs and tools that do come native on a platform or browser that I'm looking to tag and enable, not expecting that we'd do it ourselves. But that we could too if the filler wanted.</p>\n</blockquote>\n<p>So between the desire to tag something as a phone#/email for proper keyboard display, but still using a regex to determine its format, would we be looking at something like this? As per <span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> I have changed the item type to \"string\", I have introduced the idea of an \"entryHint\" extension for keyboard control, and use the existing \"entryFormat\" extension for the regex. I have grabbed the codes for \"entryHint\" from here: <a href=\"https://www.hl7.org/fhir/codesystem-contact-point-system.html\">https://www.hl7.org/fhir/codesystem-contact-point-system.html</a></p>\n<div class=\"codehilite\" data-code-language=\"JSON\"><pre><span></span><code><span class=\"p\">{</span>\n  <span class=\"nt\">\"status\"</span><span class=\"p\">:</span> <span class=\"s2\">\"draft\"</span><span class=\"p\">,</span>\n  <span class=\"nt\">\"resourceType\"</span><span class=\"p\">:</span> <span class=\"s2\">\"Questionnaire\"</span><span class=\"p\">,</span>\n  <span class=\"nt\">\"meta\"</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n    <span class=\"nt\">\"profile\"</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n      <span class=\"s2\">\"http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire|2.7\"</span>\n    <span class=\"p\">]</span>\n  <span class=\"p\">},</span>\n  <span class=\"nt\">\"item\"</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n    <span class=\"p\">{</span>\n      <span class=\"nt\">\"type\"</span><span class=\"p\">:</span> <span class=\"s2\">\"string\"</span><span class=\"p\">,</span>\n      <span class=\"nt\">\"required\"</span><span class=\"p\">:</span> <span class=\"kc\">true</span><span class=\"p\">,</span>\n      <span class=\"nt\">\"repeats\"</span><span class=\"p\">:</span> <span class=\"kc\">true</span><span class=\"p\">,</span>\n      <span class=\"nt\">\"linkId\"</span><span class=\"p\">:</span> <span class=\"s2\">\"dayphone\"</span><span class=\"p\">,</span>\n      <span class=\"nt\">\"text\"</span><span class=\"p\">:</span> <span class=\"s2\">\"Daytime phone\"</span><span class=\"p\">,</span>\n      <span class=\"nt\">\"extension\"</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n        <span class=\"p\">{</span>\n          <span class=\"nt\">\"url\"</span><span class=\"p\">:</span> <span class=\"s2\">\"http://hl7.org/fhir/StructureDefinition/entryHint\"</span><span class=\"p\">,</span>\n          <span class=\"nt\">\"valueCode\"</span><span class=\"p\">:</span> <span class=\"s2\">\"phone\"</span>\n        <span class=\"p\">},</span>\n        <span class=\"p\">{</span>\n            <span class=\"nt\">\"url\"</span><span class=\"p\">:</span> <span class=\"s2\">\"http://hl7.org/fhir/StructureDefinition/entryFormat\"</span><span class=\"p\">,</span>\n            <span class=\"nt\">\"valueString\"</span><span class=\"p\">:</span> <span class=\"s2\">\"^(\\\\([0-9]{3}\\\\) |[0-9]{3}-)[0-9]{3}-[0-9]{4}$\"</span>\n        <span class=\"p\">}</span>\n      <span class=\"p\">]</span>\n    <span class=\"p\">},</span>\n    <span class=\"p\">{</span>\n        <span class=\"nt\">\"type\"</span><span class=\"p\">:</span> <span class=\"s2\">\"string\"</span><span class=\"p\">,</span>\n        <span class=\"nt\">\"required\"</span><span class=\"p\">:</span> <span class=\"kc\">true</span><span class=\"p\">,</span>\n        <span class=\"nt\">\"repeats\"</span><span class=\"p\">:</span> <span class=\"kc\">true</span><span class=\"p\">,</span>\n        <span class=\"nt\">\"linkId\"</span><span class=\"p\">:</span> <span class=\"s2\">\"workmail\"</span><span class=\"p\">,</span>\n        <span class=\"nt\">\"text\"</span><span class=\"p\">:</span> <span class=\"s2\">\"Work email\"</span><span class=\"p\">,</span>\n        <span class=\"nt\">\"extension\"</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n          <span class=\"p\">{</span>\n            <span class=\"nt\">\"url\"</span><span class=\"p\">:</span> <span class=\"s2\">\"http://hl7.org/fhir/StructureDefinition/entryHint\"</span><span class=\"p\">,</span>\n            <span class=\"nt\">\"valueCode\"</span><span class=\"p\">:</span> <span class=\"s2\">\"email\"</span>\n          <span class=\"p\">},</span>\n          <span class=\"p\">{</span>\n              <span class=\"nt\">\"url\"</span><span class=\"p\">:</span> <span class=\"s2\">\"http://hl7.org/fhir/StructureDefinition/entryFormat\"</span><span class=\"p\">,</span>\n              <span class=\"nt\">\"valueString\"</span><span class=\"p\">:</span> <span class=\"s2\">\"(?:[a-z0-9!#$%&amp;'*+/=?^_`{|}~-]+(?:\\\\.[a-z0-9!#$%&amp;'*+/=?^_`{|}~-]+)*|\\\"(?:[\\\\x01-\\\\x08\\\\x0b\\\\x0c\\\\x0e-\\\\x1f\\\\x21\\\\x23-\\\\x5b\\\\x5d-\\\\x7f]|\\\\[\\\\x01-\\\\x09\\\\x0b\\\\x0c\\\\x0e-\\\\x7f])*\\\")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\\\\[(?:(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9]))\\\\.){3}(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9])|[a-z0-9-]*[a-z0-9]:(?:[\\\\x01-\\\\x08\\\\x0b\\\\x0c\\\\x0e-\\\\x1f\\\\x21-\\\\x5a\\\\x53-\\\\x7f]|\\\\[\\\\x01-\\\\x09\\\\x0b\\\\x0c\\\\x0e-\\\\x7f])+)\\\\])\"</span>\n          <span class=\"p\">}</span>\n        <span class=\"p\">]</span>\n      <span class=\"p\">}</span>\n\n  <span class=\"p\">]</span>\n<span class=\"p\">}</span>\n</code></pre></div>",
        "id": 252800141,
        "sender_full_name": "Tilo Christ",
        "timestamp": 1631286015
    },
    {
        "content": "<p>I'd expect entry-hint to more typically say something like \"e.g. <a href=\"mailto:someone@somewhere.com\">someone@somewhere.com</a>\" or \"111-111-1111\"</p>",
        "id": 252828175,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1631298072
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191320\">Lloyd McKenzie</span> <a href=\"#narrow/stream/179255-questionnaire/topic/SDC.20.3A.20How.20to.20show.20the.20correct.20keyboard.20i.2Ee.2E.20alphanumeric.20.2E.2E.2E/near/252828175\">said</a>:</p>\n<blockquote>\n<p>I'd expect entry-hint to more typically say something like \"e.g. <a href=\"mailto:someone@somewhere.com\">someone@somewhere.com</a>\" or \"111-111-1111\"</p>\n</blockquote>\n<p>Sorry, I had mixed up entryFormat and regex extension. entryHint was something to tell the machine which keyboard to pop up. But any idea from a native speaker which name might better convey this is great. Html calls it input type, so I renamed it for now and fixed the mistake with entryFormat vs regex:</p>\n<div class=\"codehilite\" data-code-language=\"JSON\"><pre><span></span><code><span class=\"p\">{</span>\n    <span class=\"nt\">\"status\"</span><span class=\"p\">:</span> <span class=\"s2\">\"draft\"</span><span class=\"p\">,</span>\n    <span class=\"nt\">\"resourceType\"</span><span class=\"p\">:</span> <span class=\"s2\">\"Questionnaire\"</span><span class=\"p\">,</span>\n    <span class=\"nt\">\"meta\"</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n        <span class=\"nt\">\"profile\"</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n            <span class=\"s2\">\"http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire|2.7\"</span>\n        <span class=\"p\">]</span>\n    <span class=\"p\">},</span>\n    <span class=\"nt\">\"item\"</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n        <span class=\"p\">{</span>\n            <span class=\"nt\">\"type\"</span><span class=\"p\">:</span> <span class=\"s2\">\"string\"</span><span class=\"p\">,</span>\n            <span class=\"nt\">\"required\"</span><span class=\"p\">:</span> <span class=\"kc\">true</span><span class=\"p\">,</span>\n            <span class=\"nt\">\"repeats\"</span><span class=\"p\">:</span> <span class=\"kc\">true</span><span class=\"p\">,</span>\n            <span class=\"nt\">\"linkId\"</span><span class=\"p\">:</span> <span class=\"s2\">\"dayphone\"</span><span class=\"p\">,</span>\n            <span class=\"nt\">\"text\"</span><span class=\"p\">:</span> <span class=\"s2\">\"Daytime phone\"</span><span class=\"p\">,</span>\n            <span class=\"nt\">\"extension\"</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n                <span class=\"p\">{</span>\n                    <span class=\"nt\">\"url\"</span><span class=\"p\">:</span> <span class=\"s2\">\"http://hl7.org/fhir/StructureDefinition/inputType\"</span><span class=\"p\">,</span>\n                    <span class=\"nt\">\"valueCode\"</span><span class=\"p\">:</span> <span class=\"s2\">\"phone\"</span>\n                <span class=\"p\">},</span>\n                <span class=\"p\">{</span>\n                    <span class=\"nt\">\"url\"</span><span class=\"p\">:</span> <span class=\"s2\">\"http://hl7.org/fhir/StructureDefinition/entryFormat\"</span><span class=\"p\">,</span>\n                    <span class=\"nt\">\"valueString\"</span><span class=\"p\">:</span> <span class=\"s2\">\"(555) 123-4567\"</span>\n                <span class=\"p\">},</span>\n                <span class=\"p\">{</span>\n                    <span class=\"nt\">\"url\"</span><span class=\"p\">:</span> <span class=\"s2\">\"http://hl7.org/fhir/StructureDefinition/regex\"</span><span class=\"p\">,</span>\n                    <span class=\"nt\">\"valueString\"</span><span class=\"p\">:</span> <span class=\"s2\">\"^(\\\\([0-9]{3}\\\\) |[0-9]{3}-)[0-9]{3}-[0-9]{4}$\"</span>\n                <span class=\"p\">}</span>\n            <span class=\"p\">]</span>\n        <span class=\"p\">},</span>\n        <span class=\"p\">{</span>\n            <span class=\"nt\">\"type\"</span><span class=\"p\">:</span> <span class=\"s2\">\"string\"</span><span class=\"p\">,</span>\n            <span class=\"nt\">\"required\"</span><span class=\"p\">:</span> <span class=\"kc\">true</span><span class=\"p\">,</span>\n            <span class=\"nt\">\"repeats\"</span><span class=\"p\">:</span> <span class=\"kc\">true</span><span class=\"p\">,</span>\n            <span class=\"nt\">\"linkId\"</span><span class=\"p\">:</span> <span class=\"s2\">\"workmail\"</span><span class=\"p\">,</span>\n            <span class=\"nt\">\"text\"</span><span class=\"p\">:</span> <span class=\"s2\">\"Work email\"</span><span class=\"p\">,</span>\n            <span class=\"nt\">\"extension\"</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n                <span class=\"p\">{</span>\n                    <span class=\"nt\">\"url\"</span><span class=\"p\">:</span> <span class=\"s2\">\"http://hl7.org/fhir/StructureDefinition/inputType\"</span><span class=\"p\">,</span>\n                    <span class=\"nt\">\"valueCode\"</span><span class=\"p\">:</span> <span class=\"s2\">\"email\"</span>\n                <span class=\"p\">},</span>\n                <span class=\"p\">{</span>\n                    <span class=\"nt\">\"url\"</span><span class=\"p\">:</span> <span class=\"s2\">\"http://hl7.org/fhir/StructureDefinition/entryFormat\"</span><span class=\"p\">,</span>\n                    <span class=\"nt\">\"valueString\"</span><span class=\"p\">:</span> <span class=\"s2\">\"john.doe@email.org\"</span>\n                <span class=\"p\">},</span>\n                <span class=\"p\">{</span>\n                    <span class=\"nt\">\"url\"</span><span class=\"p\">:</span> <span class=\"s2\">\"http://hl7.org/fhir/StructureDefinition/regex\"</span><span class=\"p\">,</span>\n                    <span class=\"nt\">\"valueString\"</span><span class=\"p\">:</span> <span class=\"s2\">\"(?:[a-z0-9!#$%&amp;'*+/=?^_`{|}~-]+(?:\\\\.[a-z0-9!#$%&amp;'*+/=?^_`{|}~-]+)*|\\\"(?:[\\\\x01-\\\\x08\\\\x0b\\\\x0c\\\\x0e-\\\\x1f\\\\x21\\\\x23-\\\\x5b\\\\x5d-\\\\x7f]|\\\\[\\\\x01-\\\\x09\\\\x0b\\\\x0c\\\\x0e-\\\\x7f])*\\\")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\\\\[(?:(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9]))\\\\.){3}(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9])|[a-z0-9-]*[a-z0-9]:(?:[\\\\x01-\\\\x08\\\\x0b\\\\x0c\\\\x0e-\\\\x1f\\\\x21-\\\\x5a\\\\x53-\\\\x7f]|\\\\[\\\\x01-\\\\x09\\\\x0b\\\\x0c\\\\x0e-\\\\x7f])+)\\\\])\"</span>\n                <span class=\"p\">}</span>\n            <span class=\"p\">]</span>\n        <span class=\"p\">}</span>\n    <span class=\"p\">]</span>\n<span class=\"p\">}</span>\n</code></pre></div>",
        "id": 252832747,
        "sender_full_name": "Tilo Christ",
        "timestamp": 1631300061
    },
    {
        "content": "<p>If we were going to define a keyboard type/input type, we'd need:</p>\n<ul>\n<li>an expectation that it would work across a range of browsers and device types</li>\n<li>an expectation that it would work consistently</li>\n</ul>\n<p>If we can come up with a value set that meets those two requirements, I'd be happy to see a change request for us to define such an extension.</p>",
        "id": 252851944,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1631308618
    },
    {
        "content": "<p>There are still several options here and I'm not suggesting we force them all into the same thing.</p>\n<ul>\n<li>keyboard hint (email/number/telephone)</li>\n<li>ghost text</li>\n<li>refex validation</li>\n<li>input mask<br>\nEach has its own contribution to make.</li>\n</ul>",
        "id": 252948513,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1631409979
    },
    {
        "content": "<p>And ignoring them (except regex validation) should be perfectly safe.</p>",
        "id": 252948524,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1631410006
    },
    {
        "content": "<p>This is an example in Xamarin of the keyboard hint texts.<br>\n<a href=\"/user_uploads/10155/4EKYje7LI8psUAiXEdsULlNc/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/4EKYje7LI8psUAiXEdsULlNc/image.png\" title=\"image.png\"><img src=\"/user_uploads/10155/4EKYje7LI8psUAiXEdsULlNc/image.png\"></a></div>",
        "id": 253045803,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1631516370
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191367\">Brian Postlethwaite</span> <a href=\"#narrow/stream/179255-questionnaire/topic/SDC.20.3A.20How.20to.20show.20the.20correct.20keyboard.20i.2Ee.2E.20alphanumeric.20.2E.2E.2E/near/253045803\">said</a>:</p>\n<blockquote>\n<p>This is an example in Xamarin of the keyboard hint texts.<br>\n<a href=\"/user_uploads/10155/4EKYje7LI8psUAiXEdsULlNc/image.png\">image.png</a></p>\n</blockquote>\n<p>This looks somewhat like the intersection between Android and iOS. They both add additional other hints (such as a dedicated \"Twitter\" keyboard on iOS), but those don't look too relevant for typical FHIR use-cases. Staying with your Xamarin example, I am wondering what would be the ones that should be selectable through FHIR? I think \"email\" and \"phone\" are good, because they are hints for string fields and there is no obvious other way to state that a string is really an email. But what about \"numeric\"? FHIR already has decimal, quantity, and integer item types. Should there still be a way to tag a string as being best entered through a \"numeric\" keyboard? I cannot think of a use-case. If I remove all the ones from the Xamarin list that can be specified through dedicated item types, then only email and phone would remain? \"Chat\" would make emojis more accessible, but maybe that's too fancy for FHIR?</p>",
        "id": 253138729,
        "sender_full_name": "Tilo Christ",
        "timestamp": 1631558445
    },
    {
        "content": "<p>Depends on the design of the questionnaire, I've had numeric fields that actually needed to be in the string format before (so they could retain the leading 0s) and chat might be applicable for \"how are you feeling\" self assessment items.</p>",
        "id": 253152149,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1631563798
    },
    {
        "content": "<p>There are use cases for using the numeric keypad for things other than phone number , for example : Please enter your 16 digit Health Card number / or Identification number.</p>",
        "id": 253245749,
        "sender_full_name": "Kashyap Jois",
        "timestamp": 1631624450
    },
    {
        "content": "<p>So with the Xamarin list as the basis, it would be the following:</p>\n<ul>\n<li><strong>Default</strong> / <strong>Plain</strong> text - no need for an explicit hint, this will be the regular keyboard layout for item type \"string\"<br>\navailable on any platform</li>\n</ul>\n<p>Proposed FHIR hint name: <code>plain</code> (default - same as not hinting)</p>\n<ul>\n<li><strong>Email</strong> - can be added as a keyboard hint to item type \"string\", will make at-sign more accessible, will adapt predictions<br>\niOS type \"emailAddress\", Android: \"Email\", HTML: input type=\"email\", Flutter: emailAddress</li>\n</ul>\n<p>Proposed FHIR hint name: <code>email</code></p>\n<ul>\n<li><strong>Numeric</strong> - can be added as a keyboard hint to item type \"string\", will make switch keyboard to digits, will adapt predictions<br>\n<em>Also the default for item types \"decimal\", \"quantity\", \"integer\"</em><br>\niOS type \"decimalPad\", Android: \"Number\", HTML: input type=\"number\", Flutter: number</li>\n</ul>\n<p>Proposed FHIR hint name: <code>number</code></p>\n<ul>\n<li><strong>Telephone</strong> - can be added as a keyboard hint to item type \"string\", will make switch keyboard to phone keypad (digits with 3 letters), will adapt predictions<br>\niOS type \"phonePad\", Android: \"Phone\", HTML: input type=\"tel\", Flutter: phone</li>\n</ul>\n<p>Proposed FHIR hint name: <code>phone</code></p>\n<ul>\n<li><strong>Text</strong> / multiline text - no need for an explicit hint, this will be the regular keyboard layout for item type \"text\", might reconfigure enter key, might affect capitalisation<br>\niOS type: not available, Android: not available, HTML: input rows=\"x\", Flutter: multiline</li>\n</ul>\n<p>Proposed FHIR hint name: (none)</p>\n<ul>\n<li><strong>Url</strong>- no need for explicit hint, this will be the regular keyboard layout for item type \"url\". Makes forward-slash more accessible, adapts predictions<br>\niOS type: URL, Android: Uri, HTML: input type=\"url\", Flutter: url</li>\n</ul>\n<p>Proposed FHIR hint name: <code>url</code> (is there a reason to tag an item of type \"string\" with this?)</p>\n<ul>\n<li><strong>Chat</strong> - can be added as a keyboard hint to item type \"string\", will make emojis more accessible<br>\niOS type: not available (type \"twitter\" does sth. different), Android: TYPE_TEXT_VARIATION_SHORT_MESSAGE, HTML: not available, Flutter: emulation through 3rd party (emoji_picker_plugin)</li>\n</ul>\n<p>Proposed FHIR hint name: <code>chat</code></p>\n<p>Proposed extension name: <code>http://hl7.org/fhir/StructureDefinition/inputType</code>, with valueCode, where the code can be any of the hint names proposed above.</p>\n<hr>\n<p><strong>Documentation:</strong></p>\n<ul>\n<li>Xamarin: <a href=\"https://andyp.dev/posts/xamarin-forms-essentials-keyboard-master-guide\">https://andyp.dev/posts/xamarin-forms-essentials-keyboard-master-guide</a></li>\n<li>Android: <a href=\"https://developer.android.com/reference/kotlin/androidx/compose/ui/text/input/KeyboardType\">https://developer.android.com/reference/kotlin/androidx/compose/ui/text/input/KeyboardType</a></li>\n<li>iOS: <a href=\"https://developer.apple.com/documentation/uikit/uikeyboardtype\">https://developer.apple.com/documentation/uikit/uikeyboardtype</a></li>\n<li>HTML: <a href=\"https://www.w3schools.com/tags/att_input_type.asp\">https://www.w3schools.com/tags/att_input_type.asp</a></li>\n<li>Flutter: <a href=\"https://api.flutter.dev/flutter/services/TextInputType-class.html\">https://api.flutter.dev/flutter/services/TextInputType-class.html</a></li>\n</ul>",
        "id": 253312305,
        "sender_full_name": "Tilo Christ",
        "timestamp": 1631648835
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191320\">Lloyd McKenzie</span> <a href=\"#narrow/stream/179255-questionnaire/topic/SDC.20.3A.20How.20to.20show.20the.20correct.20keyboard.20i.2Ee.2E.20alphanumeric.20.2E.2E.2E/near/252851944\">said</a>:</p>\n<blockquote>\n<p>If we were going to define a keyboard type/input type, we'd need:</p>\n<ul>\n<li>an expectation that it would work across a range of browsers and device types</li>\n<li>an expectation that it would work consistently</li>\n</ul>\n<p>If we can come up with a value set that meets those two requirements, I'd be happy to see a change request for us to define such an extension.</p>\n</blockquote>\n<p>See my analysis on what hinting is available on which popular platforms. Especially email, phone, and number should be very consistently supported.</p>",
        "id": 253312808,
        "sender_full_name": "Tilo Christ",
        "timestamp": 1631649033
    },
    {
        "content": "<p>This sounds solid enough for a formal proposal.  Care to submit a tracker item on Jira <span class=\"user-mention\" data-user-id=\"192169\">@Tilo Christ</span>?  (And thanks for the analysis work!)</p>",
        "id": 253313510,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1631649278
    },
    {
        "content": "<p>Why no hint for multi-line text?  Are we collapsing it into Default/Plain?</p>",
        "id": 253313668,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1631649361
    },
    {
        "content": "<p>I thought FHIR item type \"text\" was the equivalent of \"multi-line\" behaviour? In the meanwhile I have also found the missing piece of documentation how to explicitly trigger this changed behaviour on Android (TYPE_TEXT_VARIATION_LONG_MESSAGE), but was generally trying to avoid duplicating things as a hint that can already be triggered by general FHIR item types (thus also the question I had around number and url. For number there were good reasons to also have it for strings, for url I'm not sure).</p>",
        "id": 253315395,
        "sender_full_name": "Tilo Christ",
        "timestamp": 1631649983
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191320\">Lloyd McKenzie</span> <a href=\"#narrow/stream/179255-questionnaire/topic/SDC.20.3A.20How.20to.20show.20the.20correct.20keyboard.20i.2Ee.2E.20alphanumeric.20.2E.2E.2E/near/253313510\">said</a>:</p>\n<blockquote>\n<p>This sounds solid enough for a formal proposal.  Care to submit a tracker item on Jira <span class=\"user-mention silent\" data-user-id=\"192169\">Tilo Christ</span>?  (And thanks for the analysis work!)</p>\n</blockquote>\n<p><a href=\"https://jira.hl7.org/browse/FHIR-33675\">https://jira.hl7.org/browse/FHIR-33675</a></p>",
        "id": 253320779,
        "sender_full_name": "Tilo Christ",
        "timestamp": 1631652182
    },
    {
        "content": "<p>Yes, text vs string for multiline is what I do too.</p>",
        "id": 253353729,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1631673003
    },
    {
        "content": "<p>Looks great! Thanks <span class=\"user-mention\" data-user-id=\"192169\">@Tilo Christ</span></p>",
        "id": 253375009,
        "sender_full_name": "Kashyap Jois",
        "timestamp": 1631691908
    },
    {
        "content": "<p>My first stab at implementing the <a href=\"http://jira.hl7.org/browse/FHIR-33675\">FHIR-33675</a> \"sdc-questionnaire-keyboard\" extension:<br>\n<a href=\"/user_uploads/10155/EoaKzFH7Wh0JsPxNBOQUZbQj/FHIR-keyboard.gif\">FHIR-keyboard.gif</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/EoaKzFH7Wh0JsPxNBOQUZbQj/FHIR-keyboard.gif\" title=\"FHIR-keyboard.gif\"><img src=\"/user_uploads/10155/EoaKzFH7Wh0JsPxNBOQUZbQj/FHIR-keyboard.gif\"></a></div>",
        "id": 253779832,
        "sender_full_name": "Tilo Christ",
        "timestamp": 1631900553
    },
    {
        "content": "<p>There is another use case that popped up. How do we force uppercase / lowercase etc? Considering the phone ecosystem ? Is it suggested to use the <a href=\"http://hl7.org/fhir/R4/extension-rendering-style.html\">http://hl7.org/fhir/R4/extension-rendering-style.html</a> ?</p>",
        "id": 254664656,
        "sender_full_name": "Kashyap Jois",
        "timestamp": 1632469639
    },
    {
        "content": "<p>Style is things like bold, italic, etc., and it applies to the item.text, not the item.answer.  If you want to constrain to capturing only lower-case or upper-case data, right now that's a regular expression.</p>",
        "id": 254716729,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1632495109
    }
]