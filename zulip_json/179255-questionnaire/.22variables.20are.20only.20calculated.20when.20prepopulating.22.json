[
    {
        "content": "<p>Another part of Grahame's blog post (which is a good resource, though getting outdated) says, \"variables are only calculated when prepopulating\".  Is that still the case?  Since the Expression for a variable could be a FHIRPath expression, I am not sure why that should be.</p>",
        "id": 154024244,
        "sender_full_name": "Paul Lynch",
        "timestamp": 1544479847
    },
    {
        "content": "<p>I don't think <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span>'s statement is true.  Variables could be calculated for other reasons.</p>",
        "id": 154024256,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1544481015
    },
    {
        "content": "<p>what other reasons?</p>",
        "id": 154024620,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1544565117
    },
    {
        "content": "<p>I don't mind posting an updated version if someone has a chance to update it?</p>",
        "id": 154024623,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1544565134
    },
    {
        "content": "<p>We use variables for things like enableWhen</p>",
        "id": 154024646,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1544566500
    },
    {
        "content": "<p>Also, I am planning on using variables for calculatedExpression, to make the expression easier to write &amp; read.</p>",
        "id": 154024648,
        "sender_full_name": "Paul Lynch",
        "timestamp": 1544566774
    },
    {
        "content": "<p>so that hasn</p>",
        "id": 154024651,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1544572817
    },
    {
        "content": "<p>that hasn't explained when else</p>",
        "id": 154024652,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1544572824
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> So, if you have a BMI formula in a calculatedExpression that you want updated when the user enters new weight &amp; height vales, and the weight and height values in the formula are coming from %weight and %height variables you've defined, then you want those variables updated when the user enters new values, not just at prepopulation time.</p>",
        "id": 154024799,
        "sender_full_name": "Paul Lynch",
        "timestamp": 1544626977
    },
    {
        "content": "<p>if the user is entering values, why are you defining variables?</p>",
        "id": 154024916,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1544640651
    },
    {
        "content": "<p>You can't calculate based on the value of preceding questions, only descendant questions.  To get access to preceding questions, you have to do the calculation at a higher level (in a variable) then reference the variable in your expression</p>",
        "id": 154024927,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1544642631
    },
    {
        "content": "<p>Lloyd has a good point, but also even if the item is retrievable via %resource, I would rather have a BMI formula that looks like:</p>\n<div class=\"codehilite\"><pre><span></span>%weight/%height/%height\n</pre></div>\n\n\n<p>rather than:</p>\n<div class=\"codehilite\"><pre><span></span>%resource.item.where(linkId=&#39;/29463-7&#39;).answer.valueQuantity.value/%resource.item.where(linkId=&#39;/8302-2&#39;).answer.valueQuantity.value/%resource.item.where(linkId=&#39;/8302-2&#39;).answer.valueQuantity.value\n</pre></div>\n\n\n<p>Also note that the height appears twice, so in this case having the variable for height saves evaluating that part of the expression a second time.</p>",
        "id": 154024951,
        "sender_full_name": "Paul Lynch",
        "timestamp": 1544646188
    }
]