[
    {
        "content": "<p>Trying to reproduce this example using itemControl='gtable':<br>\n<a href=\"/user_uploads/10155/5WOk1CyxJQQAUyCBchmYM_03/pasted_image.png\" target=\"_blank\" title=\"pasted_image.png\">pasted image</a> </p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/5WOk1CyxJQQAUyCBchmYM_03/pasted_image.png\" target=\"_blank\" title=\"pasted image\"><img src=\"/user_uploads/10155/5WOk1CyxJQQAUyCBchmYM_03/pasted_image.png\"></a></div><hr>\n<ul>\n<li>Should each row (group) be marked with itemControl='gtable'? (see example 1)</li>\n<li>Or should I create a top level group and mark that with itemControl='gtable' and add additional rows (groups) under the top level group? (see example 2)</li>\n</ul>\n<p>Example 1.</p>\n<div class=\"codehilite\"><pre><span></span>item.type=&#39;group&#39; text=&#39;Synsstyrke&#39;\n    item.type=&#39;group&#39; itemControl=&#39;gtable&#39; text=&#39;Uten korreksjon&#39;\n        item.type=&#39;string&#39; text=&#39;Høyre øye&#39;\n        item.type=&#39;string&#39; text=&#39;Venstre øye&#39;\n        item.type=&#39;string&#39; text=&#39;Begge øyne&#39;\n    item.type=&#39;group&#39; itemControl=&#39;gtable&#39; text=&#39;Med korreksjon&#39;\n        item.type=&#39;string&#39; text=&#39;Høyre øye&#39;\n        item.type=&#39;string&#39; text=&#39;Venstre øye&#39;\n        item.type=&#39;string&#39; text=&#39;Begge øyne&#39;\n    item.type=&#39;group&#39; itemControl=&#39;gtable&#39; text=&#39;Korreksjonens styrke&#39;\n        item.type=&#39;string&#39; text=&#39;Høyre øye&#39;\n        item.type=&#39;string&#39; text=&#39;Venstre øye\n</pre></div>\n\n\n<p>Example 2.</p>\n<div class=\"codehilite\"><pre><span></span>item.type=&#39;group&#39; text=&#39;Synsstyrke&#39; itemControl=&#39;gtable&#39;\n    item.type=&#39;group&#39; text=&#39;Uten korreksjon&#39;\n        item.type=&#39;string&#39; text=&#39;Høyre øye&#39;\n        item.type=&#39;string&#39; text=&#39;Venstre øye&#39;\n        item.type=&#39;string&#39; text=&#39;Begge øyne&#39;\n    item.type=&#39;group&#39; text=&#39;Med korreksjon&#39;\n        item.type=&#39;string&#39; text=&#39;Høyre øye&#39;\n        item.type=&#39;string&#39; text=&#39;Venstre øye&#39;\n        item.type=&#39;string&#39; text=&#39;Begge øyne&#39;\n    item.type=&#39;group&#39; text=&#39;Korreksjonens styrke&#39;\n        item.type=&#39;string&#39; text=&#39;Høyre øye&#39;\n        item.type=&#39;string&#39; text=&#39;Venstre øye&#39;\n</pre></div>",
        "id": 185809992,
        "sender_full_name": "Kenneth Myhra",
        "timestamp": 1579177692
    },
    {
        "content": "<p>With help from Google translate, here is that table in English:<br>\n<a href=\"/user_uploads/10155/cYctCH8yC0bmvtIBE1RiIHQd/pasted_image.png\" target=\"_blank\" title=\"pasted_image.png\">pasted image</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/cYctCH8yC0bmvtIBE1RiIHQd/pasted_image.png\" target=\"_blank\" title=\"pasted image\"><img src=\"/user_uploads/10155/cYctCH8yC0bmvtIBE1RiIHQd/pasted_image.png\"></a></div>",
        "id": 185822559,
        "sender_full_name": "Paul Lynch",
        "timestamp": 1579187192
    },
    {
        "content": "<p>That's something we absolutely need to clarify in the spec.  Could you submit a change request <span class=\"user-mention\" data-user-id=\"192710\">@Kenneth Myhra</span>?  If so, mention it here and we'll try to discuss it on our conference call tonight.</p>",
        "id": 185822566,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1579187193
    },
    {
        "content": "<p>Each cell in the table is actually a separate question.  I don't think the spec handles this case.</p>",
        "id": 185822817,
        "sender_full_name": "Paul Lynch",
        "timestamp": 1579187334
    },
    {
        "content": "<p>You might be able to represent table as a gtable if the left column labels were inserted as prepopulated values (into a read-only field).  That seems messier than it should be, though.</p>",
        "id": 185824314,
        "sender_full_name": "Paul Lynch",
        "timestamp": 1579188252
    },
    {
        "content": "<p><a href=\"https://jira.hl7.org/browse/FHIR-25478\" target=\"_blank\" title=\"https://jira.hl7.org/browse/FHIR-25478\">FHIR-25478</a></p>",
        "id": 185826881,
        "sender_full_name": "Kenneth Myhra",
        "timestamp": 1579189650
    },
    {
        "content": "<p>Paul, do you have a visual example of a gtable use case?</p>\n<p>Btw I would have joined the conference call, but it's bit late up here in Scandinavia at that point</p>",
        "id": 185829072,
        "sender_full_name": "Kenneth Myhra",
        "timestamp": 1579190802
    },
    {
        "content": "<p>We get dial-ins from the Netherlands :)  (The uncomfortable time is because we also get dial-ins from Australia.)</p>",
        "id": 185829751,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1579191162
    },
    {
        "content": "<p>For a visual example (not based on FHIR, but I think representative of the use case) see <a href=\"https://rxterms.nlm.nih.gov/\" target=\"_blank\" title=\"https://rxterms.nlm.nih.gov/\">https://rxterms.nlm.nih.gov/</a>.  Our FHIR representation of that form uses gtable, and I would put that up, but it has a couple of issues (use of a custom extension for the drug name lookup, and the strength lists don't show up for some reason).</p>",
        "id": 185830359,
        "sender_full_name": "Paul Lynch",
        "timestamp": 1579191469
    },
    {
        "content": "<p>Might be that my example needs to be restructured into something like this</p>\n<p><a href=\"/user_uploads/10155/LsWKcX4uRCKeGjxwHfuiRXK5/pasted_image.png\" target=\"_blank\" title=\"pasted_image.png\">pasted image</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/LsWKcX4uRCKeGjxwHfuiRXK5/pasted_image.png\" target=\"_blank\" title=\"pasted image\"><img src=\"/user_uploads/10155/LsWKcX4uRCKeGjxwHfuiRXK5/pasted_image.png\"></a></div>",
        "id": 185833647,
        "sender_full_name": "Kenneth Myhra",
        "timestamp": 1579193169
    },
    {
        "content": "<p>You could still use groups (item.type=\"group\") for things like \"corrected\", \"not corrected\", etc., so you would not have to repeat the strings, and so that the questions (left eye, right eye, both) would be visually grouped under each header.  That much should be supported by most FHIR Questionnaire clients today (I would guess).</p>\n<p>I think your table is a good case though, and probably should be in the spec somewhere, so I am glad you filed the issue.</p>",
        "id": 185834205,
        "sender_full_name": "Paul Lynch",
        "timestamp": 1579193511
    },
    {
        "content": "<p>Saw the resolution on the Jira case, thanks btw for resolving it so quickly!</p>\n<p>Still a bit unsure how I would go about defining this in the questionnaire see the two examples below:</p>\n<p>Example 1, using itemCode='grid' as an indicator for when a new row starts:</p>\n<div class=\"codehilite\"><pre><span></span>item.type=&#39;group&#39; itemCode=&#39;grid&#39;\n    item.type=&#39;decimal&#39; text=&#39;Uten korreksjon|Høyre øye&#39;\n    item.type=&#39;decimal&#39; text=&#39;Uten korreksjon|Venstre øye&#39;\n    item.type=&#39;decimal&#39; text=&#39;Uten korreksjon|Begge øyne&#39;\nitem.type=&#39;group&#39; itemCode=&#39;grid&#39;\n    item.type=&#39;decimal&#39; text=&#39;Med korreksjon|Høyre øye&#39;\n    item.type=&#39;decimal&#39; text=&#39;Med korreksjon|Venstre øye&#39;\n    item.type=&#39;decimal&#39; text=&#39;Med korreksjon|Begge øyne&#39;\nitem.type=&#39;group&#39; itemCode=&#39;grid&#39;\n    item.type=&#39;decimal&#39; text=&#39;Korreksjonens styrke|Høyre øye&#39;\n    item.type=&#39;decimal&#39; text=&#39;Korreksjonens styrke|Venstre øye&#39;\n</pre></div>\n\n\n<p>Example 2, using the text on the left side of the vertical bar as a key for each row:</p>\n<div class=\"codehilite\"><pre><span></span>item.type=&#39;group&#39; itemCode=&#39;grid&#39;\n    item.type=&#39;decimal&#39; text=&#39;Uten korreksjon|Høyre øye&#39;\n    item.type=&#39;decimal&#39; text=&#39;Uten korreksjon|Venstre øye&#39;\n    item.type=&#39;decimal&#39; text=&#39;Uten korreksjon|Begge øyne&#39;\n    item.type=&#39;decimal&#39; text=&#39;Med korreksjon|Høyre øye&#39;\n    item.type=&#39;decimal&#39; text=&#39;Med korreksjon|Venstre øye&#39;\n    item.type=&#39;decimal&#39; text=&#39;Med korreksjon|Begge øyne&#39;\n    item.type=&#39;decimal&#39; text=&#39;Korreksjonens styrke|Høyre øye&#39;\n    item.type=&#39;decimal&#39; text=&#39;Korreksjonens styrke|Venstre øye&#39;\n</pre></div>",
        "id": 185916270,
        "sender_full_name": "Kenneth Myhra",
        "timestamp": 1579268406
    },
    {
        "content": "<p>Example 2.</p>",
        "id": 185928075,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1579276538
    },
    {
        "content": "<p>We have reviewed this in-house and we have a few comments.</p>\n<ul>\n<li>The grid construction as it stands does not work well with form fillers that do not support itemControl='grid' because of the vertical bar in the item.text</li>\n<li>The previous itemControl codes 'atable', 'gtable' and 'table' works fairly well even if the form filler do not support those item codes</li>\n</ul>\n<p>So I'm suggesting an amendment which would also be compatible with form fillers that do not support itemCode='grid'.</p>\n<p>A group section marked with itemControl='grid' indicates that child items of type='group' within the grid-section are rows, and questions beneath the row-groups are organized as columns in the grid. The grid might be fully populated, but could be sparse.  Questions may support different data types and/or different answer choices.</p>\n<p>Example:</p>\n<div class=\"codehilite\"><pre><span></span>item.type=&#39;group&#39; text=&#39;Visual acuity&#39; itemControl=&#39;grid&#39;\n    item.type=&#39;group&#39; text=&#39;Without correction&#39;\n        item.type=&#39;decimal&#39; text=&#39;Right eye&#39;\n        item.type=&#39;decimal&#39; text=&#39;Left eye&#39;\n        item.type=&#39;decimal&#39; text=&#39;Both eyes&#39;\n    item.type=&#39;group&#39; text=&#39;With correction&#39;\n        item.type=&#39;decimal&#39; text=&#39;Right eye&#39;\n        item.type=&#39;decimal&#39; text=&#39;Left eye&#39;\n        item.type=&#39;decimal&#39; text=&#39;Both eyes&#39;\n    item.type=&#39;group&#39; text=&#39;Strength of correction&#39;\n        item.type=&#39;decimal&#39; text=&#39;Right eye&#39;\n        item.type=&#39;decimal&#39; text=&#39;Left eye&#39;\n</pre></div>",
        "id": 186384795,
        "sender_full_name": "Kenneth Myhra",
        "timestamp": 1579783713
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"192710\">@Kenneth Myhra</span> Can you submit a new change request pointing to the original?</p>",
        "id": 186408875,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1579798258
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> <a href=\"https://jira.hl7.org/browse/FHIR-25599\" target=\"_blank\" title=\"https://jira.hl7.org/browse/FHIR-25599\">J#25599</a></p>",
        "id": 186418466,
        "sender_full_name": "Kenneth Myhra",
        "timestamp": 1579803626
    }
]