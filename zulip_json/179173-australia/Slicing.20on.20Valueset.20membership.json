[
    {
        "content": "<p>Working on AU base there are a few spots where we would like to have slices indicating value set bindings that are useful  - then downstream specs can mandate or indicate must support as desired .e.g HealthccareService.speciailty  - have been referring to discussion <a href=\"#narrow/stream/179252-IG-creation/topic/slicing.20on.20a.20value.20set\" title=\"#narrow/stream/179252-IG-creation/topic/slicing.20on.20a.20value.20set\">https://chat.fhir.org/#narrow/stream/179252-IG-creation/topic/slicing.20on.20a.20value.20set</a> - am trying to achieve the following</p>",
        "id": 162484446,
        "sender_full_name": "Brett Esler",
        "timestamp": 1554339557
    },
    {
        "content": "<p>why slice? why not just define the value set in the base IG?</p>",
        "id": 162484542,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1554339630
    },
    {
        "content": "<p>fair point - think that would be simpler... wanted to allow people to opt-in to must support / mandatory  and not stop other code usage  - so if they made specialty mandatory it did not require support for the binding unless they wanted that as well (that is why I sliced)</p>",
        "id": 162484845,
        "sender_full_name": "Brett Esler",
        "timestamp": 1554340046
    },
    {
        "content": "<p>can I go from preferred to required in derived IG constraints on binding?  that might do</p>",
        "id": 162485018,
        "sender_full_name": "Brett Esler",
        "timestamp": 1554340221
    },
    {
        "content": "<p>sure</p>",
        "id": 162485027,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1554340240
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191367\">@Brian Postlethwaite</span> <span class=\"user-mention\" data-user-id=\"191376\">@Jim Steel</span>  any comments?</p>",
        "id": 162485050,
        "sender_full_name": "Brett Esler",
        "timestamp": 1554340281
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191682\">@Richard Townley-O'Neill</span>  <span class=\"user-mention\" data-user-id=\"192379\">@Dusica Bojicic</span></p>",
        "id": 162485109,
        "sender_full_name": "Brett Esler",
        "timestamp": 1554340344
    },
    {
        "content": "<p>Slicing demonstrates several bindings, but here there is only one of interest. Using a preferred binding in AU base is simple and will allow us to easily make it required in a derived profile.</p>\n<p>I expect that here the Agency will want something like the following:</p>\n<blockquote>\n<p>Uncoded text is permitted<br>\nIf any codes are included, a code from abc is required<br>\nOther codes are permitted</p>\n</blockquote>",
        "id": 162486035,
        "sender_full_name": "Richard Townley-O'Neill",
        "timestamp": 1554341518
    },
    {
        "content": "<p>which might want slicing of specialty.coding, but not of specialty.</p>",
        "id": 162486116,
        "sender_full_name": "Richard Townley-O'Neill",
        "timestamp": 1554341632
    },
    {
        "content": "<p>I think the only place where I now  have issues is Medication*.code - where wanted to effectively list coding options including PBS, GTIN, MIMS, and multiple levels of AMT (as separate value sets - TP, MP,  CTP, TPP, MPP, TPUU, MPUU)  - want to allow them all to co-exist and specs pick up the slices with desired must support / cardinality constraints</p>",
        "id": 162486333,
        "sender_full_name": "Brett Esler",
        "timestamp": 1554341890
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191368\">@Brett Esler</span>  Do you mean that you still see value in slicing Medication*.medication/Medication.code but not in slicing places like HealthcareService.specialty?</p>",
        "id": 162486663,
        "sender_full_name": "Richard Townley-O'Neill",
        "timestamp": 1554342282
    },
    {
        "content": "<p>guess I am back to - is a discriminator type=value, path=coding  going to work?  want validator to select slices based on membership of required binding of coding in slices</p>",
        "id": 162486664,
        "sender_full_name": "Brett Esler",
        "timestamp": 1554342285
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191682\">@Richard Townley-O'Neill</span>  yes I think so - the other places than Medication  have only one  preferred valueset so can simplify - medications has a number of binding that make sense and do already co-exist</p>",
        "id": 162486757,
        "sender_full_name": "Brett Esler",
        "timestamp": 1554342395
    },
    {
        "content": "<p>could think about tweaking slicing for meds case to be based on coding.system - define slices for MIMS, GTIN, PBS, and SCT (AMT) - then do some invariants on the AMT slice to check extension (MEdication Type) content - this would mean other SNOMED-CT medicaiton terms (not AMT) would fail - so is a constraint</p>",
        "id": 162487327,
        "sender_full_name": "Brett Esler",
        "timestamp": 1554343179
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191368\">@Brett Esler</span>  Here are a couple of slicings<br>\n<strong>value is text or from specified code system</strong></p>\n<div class=\"codehilite\"><pre><span></span>specialty       0..*    Slice: Closed by exists:coding\nspecialty       0..*    coded value\n    coding      1..1    Binding: myVS (required)\n    text        0..1\nspecialty       0..*    uncoded value\n    coding      0..0\n    text        1..1\n</pre></div>",
        "id": 162494113,
        "sender_full_name": "Richard Townley-O'Neill",
        "timestamp": 1554352752
    },
    {
        "content": "<p><strong>value is text or coding includes a value from specified code system</strong></p>\n<div class=\"codehilite\"><pre><span></span>specialty       0..*    Slice: Closed by exists:coding\nspecialty       0..*    coded value\n    coding      1..*    Slice: Open by value:code, value:system\n    coding      1..*    Binding: myVS (required)\n        system      1..1\n        code        1..1\n    text        0..1\nspecialty       0..*    uncoded value\n    coding      0..0\n    text        1..1\n</pre></div>",
        "id": 162494322,
        "sender_full_name": "Richard Townley-O'Neill",
        "timestamp": 1554353054
    },
    {
        "content": "<blockquote>\n<p>Uncoded text is permitted<br>\nIf any codes are included, a code from abc is required<br>\nOther codes are permitted</p>\n</blockquote>\n<p>lines 2 &amp; 3 seem to contradict each other...</p>",
        "id": 162766671,
        "sender_full_name": "David Hay",
        "timestamp": 1554661439
    },
    {
        "content": "<p>additional codes</p>",
        "id": 162766744,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1554661536
    }
]