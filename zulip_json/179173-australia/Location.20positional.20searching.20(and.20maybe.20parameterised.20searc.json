[
    {
        "content": "<p>In the AUPD Location profile (<a href=\"http://fhir.hl7.org.au/fhir/pd2018Mar/StructureDefinition-au-pd-location.html\" target=\"_blank\" title=\"http://fhir.hl7.org.au/fhir/pd2018Mar/StructureDefinition-au-pd-location.html\">http://fhir.hl7.org.au/fhir/pd2018Mar/StructureDefinition-au-pd-location.html</a>), we see contradictory location searching text, and we want to make sure which one is right for our implementation. The question is should it be </p>\n<p>base/location?location.near[...]<br>\nor<br>\nbase/location?near[...]</p>\n<p>The text seems to have changed over versions of the profile. Here is how it reads in the March 2018 version and the snapshot build:</p>\n<blockquote>\n<p>Search: Location Distance</p>\n<p>Search based on address within a nominated distance.</p>\n<p>GET [base]/Location?location.near=[latitude]:[longitude]&amp;location.near-distance=[prefix][value]|[units-system]|[units]</p>\n<p>Example: GET [base]/Location?near=-83.694810:42.256500&amp;near-distance=le10.0|http://unitsofmeasure.org|km</p>\n</blockquote>\n<p>The guidance on the base location resource (<a href=\"http://hl7.org/fhir/location.html#positional\" target=\"_blank\" title=\"http://hl7.org/fhir/location.html#positional\">http://hl7.org/fhir/location.html#positional</a>) looks like the second construction is correct.</p>\n<p>Maybe more generally, how can I understand the pattern for when to prepend the resource name in a query? I'm mostly learning by example but haven't found or figured out the general rule.</p>",
        "id": 153987376,
        "sender_full_name": "John Carter",
        "timestamp": 1534396106
    },
    {
        "content": "<p>This is a great question John. and I'm wondering what we should do here.<br>\nPA (international) has just published the R4 format for this search, and is much better than the STU3 version, in that it can also work across joins too.<br>\n<a href=\"http://build.fhir.org/location.html#positional\" target=\"_blank\" title=\"http://build.fhir.org/location.html#positional\">http://build.fhir.org/location.html#positional</a><br>\nAnd the VhDir profile is also considering adding in a definition for the contains search parameter that goes along with the new boundary extension format<br>\n<a href=\"http://build.fhir.org/extension-location-boundary-geojson.html\" target=\"_blank\" title=\"http://build.fhir.org/extension-location-boundary-geojson.html\">http://build.fhir.org/extension-location-boundary-geojson.html</a></p>",
        "id": 153987398,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1534398076
    },
    {
        "content": "<p>Given where we are in the Australian implementations, I don't think it would be too much to actually adopt the new formats for our STU3 implementations if we had support from the other vendors in the space.<br>\n(I'd be happy to do it in ours)</p>",
        "id": 153987401,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1534398147
    },
    {
        "content": "<p>(The old format isn't the most pleasant thing, the new one I think is much nicer)</p>",
        "id": 153987403,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1534398216
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191368\">@Brett Esler</span> thoughts?</p>",
        "id": 153987405,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1534398306
    },
    {
        "content": "<p>The format from STU3 was (<a href=\"http://hl7.org/fhir/location.html#positional\" target=\"_blank\" title=\"http://hl7.org/fhir/location.html#positional\">http://hl7.org/fhir/location.html#positional</a>)</p>\n<div class=\"codehilite\"><pre><span></span>GET [base]/Location?near=-83.694810:42.256500&amp;near-distance=11.20||km\n</pre></div>\n\n\n<p>don't know where that prefix came from.</p>",
        "id": 153987407,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1534398442
    },
    {
        "content": "<p>yes that 'location.' should not be there on either argument - i'll get that fixed<br>\nI would be happy to use the R4 format and change the spec; but we had better get a show of hands on a call</p>",
        "id": 153987518,
        "sender_full_name": "Brett Esler",
        "timestamp": 1534418462
    },
    {
        "content": "<p>Most definitely, as essentially that wouldn't be true STU3 compliance. But would make the transition to R4 easier down the track, since no-one else apart from the Telstra Health server has implemented it in this jurisdication that I know of.</p>",
        "id": 153987932,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1534464494
    },
    {
        "content": "<p>Thanks for the replies, we will immediately make sure that we're doing it without the extra 'location.'</p>\n<p>We have a customer request for the combined search on location, so the R4 approach solves a specific problem for us, and we'd be in favor of pushing on to that as soon as practical.</p>",
        "id": 153987982,
        "sender_full_name": "John Carter",
        "timestamp": 1534467476
    },
    {
        "content": "<p>Actually, thinking of the implementation in our server, could quite happily support both syntaxes, as while parsing, can detect which form is being provided. So I really don't have any objections now.<br>\nJust need to get the proposal past all those in the AU implementer group.</p>",
        "id": 153987986,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1534468020
    }
]