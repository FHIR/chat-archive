[
    {
        "content": "<p>Does the FHIR reference implementation server validate the StructureDefinition for AU PD profiles or should I used the Java validator pack to test the validation service? I am getting a 201 on POST of a au-pd-healthcareservice sample (attached au-pd-healthcareservice-example.xml) on <a href=\"http://test.fhir.org\" target=\"_blank\" title=\"http://test.fhir.org\">test.fhir.org</a>, but not on other publicly available FHIR servers such as VONK R4. Has anyone ran across this issue? <br>\n<a href=\"/user_uploads/10155/hEm7y8yIkg3neiXPeDAUiMK4/pasted_image.jpe\" target=\"_blank\" title=\"pasted_image.jpe\">pasted image</a><br>\n<a href=\"/user_uploads/10155/RyPbRHD_ahi4O9AkZUgtcfC_/pasted_image.jpe\" target=\"_blank\" title=\"pasted_image.jpe\">pasted image</a> </p>\n<p><a href=\"/user_uploads/10155/xRBs9AgDoOFRqLIcMANQfwv0/au-pd-healthcareservice-example.xml\" target=\"_blank\" title=\"au-pd-healthcareservice-example.xml\">au-pd-healthcareservice-example.xml</a></p>",
        "id": 187884326,
        "sender_full_name": "Chandan Datta",
        "timestamp": 1581398022
    },
    {
        "content": "<p>you should use the validator. <a href=\"http://test.fhir.org\" target=\"_blank\" title=\"http://test.fhir.org\">test.fhir.org</a> has fallen behind</p>",
        "id": 187885062,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1581399134
    },
    {
        "content": "<p>Thanks. will do. Is the java validator pack also used in the reference implementation and is the reference implementation deployed as <a href=\"http://test.fhir.org\" target=\"_blank\" title=\"http://test.fhir.org\">test.fhir.org</a>  <a href=\"https://github.com/grahamegrieve/fhirserver\" target=\"_blank\" title=\"https://github.com/grahamegrieve/fhirserver\">https://github.com/grahamegrieve/fhirserver</a></p>",
        "id": 188056338,
        "sender_full_name": "Chandan Datta",
        "timestamp": 1581544009
    },
    {
        "content": "<p><a href=\"http://test.fhir.org\" target=\"_blank\" title=\"http://test.fhir.org\">test.fhir.org</a> has fallen behind right now. It's on my list of things to do to bring it up to date</p>",
        "id": 188056386,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1581544066
    },
    {
        "content": "<p>Is the java validator up-to-date? Related to the <a href=\"#narrow/stream/179173-australia/topic/au-fhir-pd.20.20R4-.20Reference.20type.20is.20repeated\" title=\"#narrow/stream/179173-australia/topic/au-fhir-pd.20.20R4-.20Reference.20type.20is.20repeated\">topic</a> I posted earlier, it doesn't show the eld-13 validation error</p>\n<div class=\"codehilite\"><pre><span></span>java -jar .\\org.hl7.fhir.validator.jar .\\StructureDefinition-au-healthcareservice.xml -version 4.0.1\nFHIR Validation tool Version 4.1.61-SNAPSHOT (Git# b6ba504320f6). Built 2020-02-07T10:55:33.966+11:00 (6 days old)\nDetected Java version: 1.8.0_181 from C:\\Program Files\\Java\\jre1.8.0_181 on amd64 (64bit). 1801MB available\nArguments: .\\StructureDefinition-au-healthcareservice.xml -version 4.0.1\nDirectories: Current = D:\\sajith\\work\\fhir-directory-r4-bb\\SRAStructureDefinitions, Package Cache = C:\\Users\\sajithj\\.fhir\\packages\n  .. FHIR Version 4.0, definitions from hl7.fhir.r4.core#4.0.1\n  .. connect to tx server @ http://tx.fhir.org\n    (v4.0.1)\n  .. validate [.\\StructureDefinition-au-healthcareservice.xml]\nTerminology server: Check for supported code systems for http://terminology.hl7.org.au/CodeSystem/v2-0203\nSuccess...validating .\\StructureDefinition-au-healthcareservice.xml:  PS D:\\sajith\\work\\fhir-directory-r4-bb\\SRAStructureDefinitions&gt; java -jar .\\org.hl7.fhir.validator.jar .\\StructureDefinition-au-healthcareservice.xml -version 4.0.1\nFHIR Validation tool Version 4.1.61-SNAPSHOT (Git# b6ba504320f6). Built 2020-02-07T10:55:33.966+11:00 (6 days old)\nDetected Java version: 1.8.0_181 from C:\\Program Files\\Java\\jre1.8.0_181 on amd64 (64bit). 1801MB available\nArguments: .\\StructureDefinition-au-healthcareservice.xml -version 4.0.1\nDirectories: Current = D:\\sajith\\work\\fhir-directory-r4-bb\\SRAStructureDefinitions, Package Cache = C:\\Users\\sajithj\\.fhir\\packages\n  .. FHIR Version 4.0, definitions from hl7.fhir.r4.core#4.0.1\n  .. connect to tx server @ http://tx.fhir.org\n    (v4.0.1)\n  .. validate [.\\StructureDefinition-au-healthcareservice.xml]\nTerminology server: Check for supported code systems for http://terminology.hl7.org.au/CodeSystem/v2-0203\nSuccess...validating .\\StructureDefinition-au-healthcareservice.xml:  error:0 warn:0 info:2\n  Information @ StructureDefinition.snapshot.element[14].pattern.ofType(CodeableConcept).coding[0] (line 496, col17) : Code System URI &#39;http://terminology.hl7.org.au/CodeSystem/v2-0203&#39; is unknown so the code cannot be validated\n  Information @ StructureDefinition.differential.element[4].pattern.ofType(CodeableConcept).coding[0] (line 1845, col17) : Code System URI &#39;http://terminology.hl7.org.au/CodeSystem/v2-0203&#39; is unknown so the code cannot be validated\nPS D:\\sajith\\work\\fhir-directory-r4-bb\\SRAStructureDefinitions&gt; java -jar .\\org.hl7.fhir.validator.jar .\\StructureDefinition-au-healthcareservice.xml -version 4.0.1 -ig http://build.fhir.org/ig/hl7au/au-fhir-pd\nFHIR Validation tool Version 4.1.61-SNAPSHOT (Git# b6ba504320f6). Built 2020-02-07T10:55:33.966+11:00 (6 days old)\nDetected Java version: 1.8.0_181 from C:\\Program Files\\Java\\jre1.8.0_181 on amd64 (64bit). 1801MB available\nArguments: .\\StructureDefinition-au-healthcareservice.xml -version 4.0.1 -ig http://build.fhir.org/ig/hl7au/au-fhir-pd\nDirectories: Current = D:\\sajith\\work\\fhir-directory-r4-bb\\SRAStructureDefinitions, Package Cache = C:\\Users\\sajithj\\.fhir\\packages\n  .. FHIR Version 4.0, definitions from hl7.fhir.r4.core#4.0.1\n  .. connect to tx server @ http://tx.fhir.org\n    (v4.0.1)\n+  .. load IG from http://build.fhir.org/ig/hl7au/au-fhir-pd\n  .. validate [.\\StructureDefinition-au-healthcareservice.xml]\nTerminology server: Check for supported code systems for http://terminology.hl7.org.au/CodeSystem/v2-0203\nSuccess...validating .\\StructureDefinition-au-healthcareservice.xml:  error:0 warn:0 info:2\n  Information @ StructureDefinition.snapshot.element[14].pattern.ofType(CodeableConcept).coding[0] (line 496, col17) : Code System URI &#39;http://terminology.hl7.org.au/CodeSystem/v2-0203&#39; is unknown so the code cannot be validated\n  Information @ StructureDefinition.differential.element[4].pattern.ofType(CodeableConcept).coding[0] (line 1845, col17) : Code System URI &#39;http://terminology.hl7.org.au/CodeSystem/v2-0203&#39; is unknown so the code cannot be validated\n  Information @ StructureDefinition.snapshot.element[14].pattern.ofType(CodeableConcept).coding[0] (line 496, col17) : Code System URI &#39;http://terminology.hl7.org.au/CodeSystem/v2-0203&#39; is unknown so the code cannot be validated\n  Information @ StructureDefinition.differential.element[4].pattern.ofType(CodeableConcept).coding[0] (line 1845, col17) : Code System URI &#39;http://terminology.hl7.org.au/CodeSystem/v2-0203&#39; is unknown so the code cannot be validated\nPS D:\\sajith\\work\\fhir-directory-r4-bb\\SRAStructureDefinitions&gt; java -jar .\\org.hl7.fhir.validator.jar .\\StructureDefinition-au-healthcareservice.xml -version 4.0.1 -ig http://build.fhir.org/ig/hl7au/au-fhir-pd\nFHIR Validation tool Version 4.1.61-SNAPSHOT (Git# b6ba504320f6). Built 2020-02-07T10:55:33.966+11:00 (6 days old)\nDetected Java version: 1.8.0_181 from C:\\Program Files\\Java\\jre1.8.0_181 on amd64 (64bit). 1801MB available\nArguments: .\\StructureDefinition-au-healthcareservice.xml -version 4.0.1 -ig http://build.fhir.org/ig/hl7au/au-fhir-pd\nDirectories: Current = D:\\sajith\\work\\fhir-directory-r4-bb\\SRAStructureDefinitions, Package Cache = C:\\Users\\sajithj\\.fhir\\packages\n  .. FHIR Version 4.0, definitions from hl7.fhir.r4.core#4.0.1\n  .. connect to tx server @ http://tx.fhir.org\n    (v4.0.1)\n+  .. load IG from http://build.fhir.org/ig/hl7au/au-fhir-pd\n  .. validate [.\\StructureDefinition-au-healthcareservice.xml]\nTerminology server: Check for supported code systems for http://terminology.hl7.org.au/CodeSystem/v2-0203\nSuccess...validating .\\StructureDefinition-au-healthcareservice.xml:  error:0 warn:0 info:2\n  Information @ StructureDefinition.snapshot.element[14].pattern.ofType(CodeableConcept).coding[0] (line 496, col17) : Code System URI &#39;http://terminology.hl7.org.au/CodeSystem/v2-0203&#39; is unknown so the code cannot be validated\n  Information @ StructureDefinition.differential.element[4].pattern.ofType(CodeableConcept).coding[0] (line 1845, col17) : Code System URI &#39;http://terminology.hl7.org.au/CodeSystem/v2-0203&#39; is unknown so the code cannot be validated\n</pre></div>",
        "id": 188075051,
        "sender_full_name": "Chandan Datta",
        "timestamp": 1581564575
    },
    {
        "content": "<p>so I took this instance and saved it on my local disk:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"nt\">&lt;StructureDefinition</span> <span class=\"na\">xmlns=</span><span class=\"s\">&quot;http://hl7.org/fhir&quot;</span><span class=\"nt\">&gt;</span>\n  <span class=\"nt\">&lt;id</span> <span class=\"na\">value=</span><span class=\"s\">&quot;profile-repeated-type&quot;</span><span class=\"nt\">/&gt;</span>\n  <span class=\"nt\">&lt;url</span> <span class=\"na\">value=</span><span class=\"s\">&quot;http://hl7.org/fhir/test/StructureDefinition/profile-repeated-type&quot;</span><span class=\"nt\">/&gt;</span>\n  <span class=\"nt\">&lt;name</span> <span class=\"na\">value=</span><span class=\"s\">&quot;RepeatedTypeChoice&quot;</span><span class=\"nt\">/&gt;</span>\n  <span class=\"nt\">&lt;status</span> <span class=\"na\">value=</span><span class=\"s\">&quot;draft&quot;</span><span class=\"nt\">/&gt;</span>\n  <span class=\"nt\">&lt;date</span> <span class=\"na\">value=</span><span class=\"s\">&quot;3017-09-06T06:30:54+00:00&quot;</span><span class=\"nt\">/&gt;</span>\n  <span class=\"nt\">&lt;fhirVersion</span> <span class=\"na\">value=</span><span class=\"s\">&quot;4.0.0&quot;</span><span class=\"nt\">/&gt;</span>\n  <span class=\"nt\">&lt;kind</span> <span class=\"na\">value=</span><span class=\"s\">&quot;resource&quot;</span><span class=\"nt\">/&gt;</span>\n  <span class=\"nt\">&lt;abstract</span> <span class=\"na\">value=</span><span class=\"s\">&quot;false&quot;</span><span class=\"nt\">/&gt;</span>\n  <span class=\"nt\">&lt;type</span> <span class=\"na\">value=</span><span class=\"s\">&quot;HealthcareService&quot;</span><span class=\"nt\">/&gt;</span>\n  <span class=\"nt\">&lt;baseDefinition</span> <span class=\"na\">value=</span><span class=\"s\">&quot;http://hl7.org/fhir/StructureDefinition/HealthcareService&quot;</span><span class=\"nt\">/&gt;</span>\n  <span class=\"nt\">&lt;derivation</span> <span class=\"na\">value=</span><span class=\"s\">&quot;constraint&quot;</span><span class=\"nt\">/&gt;</span>\n  <span class=\"nt\">&lt;differential&gt;</span>\n    <span class=\"nt\">&lt;element</span> <span class=\"na\">id=</span><span class=\"s\">&quot;HealthcareService.endpoint&quot;</span><span class=\"nt\">&gt;</span>\n      <span class=\"nt\">&lt;path</span> <span class=\"na\">value=</span><span class=\"s\">&quot;HealthcareService.endpoint&quot;</span> <span class=\"nt\">/&gt;</span>\n      <span class=\"nt\">&lt;short</span> <span class=\"na\">value=</span><span class=\"s\">&quot;Technical endpoints for this healthcare service, including secure messaging endpoints&quot;</span> <span class=\"nt\">/&gt;</span>\n      <span class=\"nt\">&lt;type&gt;</span>\n          <span class=\"nt\">&lt;code</span> <span class=\"na\">value=</span><span class=\"s\">&quot;Reference&quot;</span> <span class=\"nt\">/&gt;</span>\n          <span class=\"nt\">&lt;targetProfile</span> <span class=\"na\">value=</span><span class=\"s\">&quot;http://hl7.org.au/fhir/pd/StructureDefinition/au-pd-sm-endpoint&quot;</span> <span class=\"nt\">/&gt;</span>\n      <span class=\"nt\">&lt;/type&gt;</span>\n      <span class=\"nt\">&lt;type&gt;</span>\n          <span class=\"nt\">&lt;code</span> <span class=\"na\">value=</span><span class=\"s\">&quot;Reference&quot;</span> <span class=\"nt\">/&gt;</span>\n          <span class=\"nt\">&lt;targetProfile</span> <span class=\"na\">value=</span><span class=\"s\">&quot;http://hl7.org/fhir/StructureDefinition/Endpoint&quot;</span> <span class=\"nt\">/&gt;</span>\n      <span class=\"nt\">&lt;/type&gt;</span>\n      <span class=\"nt\">&lt;mustSupport</span> <span class=\"na\">value=</span><span class=\"s\">&quot;true&quot;</span> <span class=\"nt\">/&gt;</span>\n    <span class=\"nt\">&lt;/element&gt;</span>\n  <span class=\"nt\">&lt;/differential&gt;</span>\n<span class=\"nt\">&lt;/StructureDefinition&gt;</span>\n</pre></div>\n\n\n<p>Then I validated it: </p>\n<div class=\"codehilite\"><pre><span></span>FHIR Validation tool Version 4.1.62-SNAPSHOT (Git# bc1f87e29f93). Built 2020-02-13T12:26:41.736+11:00 (4 hours old)\nDetected Java version: 1.8.0_211 from C:\\Program Files\\Java\\jre1.8.0_211 on amd64 (64bit). 7223MB available\nArguments: [file] -version 4.0\nDirectories: Current = c:\\temp, Package Cache = C:\\Users\\graha\\.fhir\\packages\n  .. FHIR Version 4.0, definitions from hl7.fhir.r4.core#4.0.1\n  .. connect to tx server @ http://tx.fhir.org\n    (v4.0.1)\n  .. validate [path]\n*FAILURE* validating [path]:  error:2 warn:1 info:0\n  Error @ StructureDefinition.url (line 3, col84) : URL value &#39;http://hl7.org/fhir/test/StructureDefinition/profile-repeated-type&#39; does not resolve\n  Error @ StructureDefinition.differential.element[0] (line 14, col46) : eld-13: Types must be unique by code [type.select(code).isDistinct()]\n  Warning @ StructureDefinition.date (line 6, col44) : The value &#39;3017-09-06T06:30:54+00:00&#39; is outside the range of reasonable years - check for data entry error\n</pre></div>",
        "id": 188080197,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1581572859
    },
    {
        "content": "<p>that's pretty much what I expected...</p>",
        "id": 188080202,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1581572868
    },
    {
        "content": "<p>Thanks Grahame, Where can I find the version(4.1.62-SNAPSHOT (Git# bc1f87e29f93)) you have run on - is it on github? I just followed the link in the FHIR <a href=\"https://www.hl7.org/fhir/downloads.html\" target=\"_blank\" title=\"https://www.hl7.org/fhir/downloads.html\">downloads</a>. I used version 4.1.61 and it did not flag any errors.<br>\n<a href=\"/user_uploads/10155/37Y8NdqBIcRWcRuMeTuJ3Cp7/pasted_image.jpe\" target=\"_blank\" title=\"pasted_image.jpe\">pasted image</a></p>",
        "id": 188353530,
        "sender_full_name": "Chandan Datta",
        "timestamp": 1581916787
    },
    {
        "content": "<p>current is 4.1.63 - so you should get that from the link you referenced</p>",
        "id": 188359765,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1581927674
    }
]