[
    {
        "content": "<p>Hi all R4 implementation guides are now up for AU Base and AU PD as follows:</p>\n<ul>\n<li>AU Base 3 on R4 : <a href=\"https://build.fhir.org/ig/hl7au/au-fhir-base/\" target=\"_blank\" title=\"https://build.fhir.org/ig/hl7au/au-fhir-base/\">https://build.fhir.org/ig/hl7au/au-fhir-base/</a>  - CI build of content limited as port to R4 continues</li>\n<li>AU PD 2 on R4 : <a href=\"http://build.fhir.org/ig/hl7au/au-fhir-pd/\" target=\"_blank\" title=\"http://build.fhir.org/ig/hl7au/au-fhir-pd/\">http://build.fhir.org/ig/hl7au/au-fhir-pd/</a> - CI build using AU Base 3 on R4</li>\n</ul>",
        "id": 169088563,
        "sender_full_name": "Brett Esler",
        "timestamp": 1561590149
    },
    {
        "content": "<p>Brett and I will be working on these guides for the next week or so to ensure their stability and compatibility with the STU3 version of these guides (not new functionality as yet)</p>",
        "id": 169097108,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1561600347
    },
    {
        "content": "<p>what do we need in the dependency list for the pd base?<br>\n(below is what is working for me for the base)</p>\n<div class=\"codehilite\"><pre><span></span>  &quot;dependencyList&quot;: [\n        {\n            &quot;pacakge&quot;: &quot;hl7.fhir.au.base&quot;,\n            &quot;name&quot;: &quot;aubase&quot;,\n            &quot;location&quot;: &quot;http://hl7.org.au/fhir/base&quot;,\n            &quot;version&quot;: &quot;current&quot;\n        }\n  ],\n</pre></div>",
        "id": 169098254,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1561601940
    },
    {
        "content": "<p>I believe this is what you need to depend on the AU-PD guide</p>\n<div class=\"codehilite\"><pre><span></span>        {\n            &quot;pacakge&quot;: &quot;hl7.fhir.au.pd&quot;,\n            &quot;name&quot;: &quot;au-pd&quot;,\n            &quot;location&quot;: &quot;http://hl7.org.au/fhir/pd&quot;,\n            &quot;version&quot;: &quot;current&quot;\n        }\n</pre></div>\n\n\n<p><span class=\"user-mention\" data-user-id=\"191368\">@Brett Esler</span>  is that right?</p>",
        "id": 169102868,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1561609432
    },
    {
        "content": "<p>yes that is good - also need something like the following in your ig.xml<br>\n &lt;dependsOn id=\"au-pd\"&gt;<br>\n    &lt;uri value=\"http://hl7.org.au/fhir/pd\"/&gt;<br>\n    &lt;packageId value=\"hl7.fhir.au.pd\"/&gt;<br>\n    &lt;version value=\"current\"/&gt;<br>\n &lt;/dependsOn&gt;</p>",
        "id": 169109988,
        "sender_full_name": "Brett Esler",
        "timestamp": 1561620092
    },
    {
        "content": "<p>AUBasePatient does not open in Forge :( . The others are OK.</p>",
        "id": 170594004,
        "sender_full_name": "Richard Townley-O'Neill",
        "timestamp": 1562807611
    },
    {
        "content": "<p>thanks <span class=\"user-mention\" data-user-id=\"191682\">@Richard Townley-O'Neill</span>  will investigate...</p>",
        "id": 170594423,
        "sender_full_name": "Brett Esler",
        "timestamp": 1562808187
    },
    {
        "content": "<p>I am in Katherine gorge.... an interesting place: I have great telstra signal.... but bandwidth on 4G is measured in bytes/min... I haven't seen that before. Took hours to get Zulip to function....</p>",
        "id": 170627057,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1562847547
    },
    {
        "content": "<p>almost disconnected ;)</p>",
        "id": 170686876,
        "sender_full_name": "Brett Esler",
        "timestamp": 1562894722
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191682\">@Richard Townley-O'Neill</span>  pull and patient should load now</p>",
        "id": 170686881,
        "sender_full_name": "Brett Esler",
        "timestamp": 1562894757
    },
    {
        "content": "<p>problems with the core extensions conversion to R4  let me know if more issues</p>",
        "id": 170686931,
        "sender_full_name": "Brett Esler",
        "timestamp": 1562894842
    },
    {
        "content": "<p>i.e. was not updated in our subfolder for AU IG</p>",
        "id": 170686977,
        "sender_full_name": "Brett Esler",
        "timestamp": 1562894888
    },
    {
        "content": "<p>Thanks. <span class=\"user-mention\" data-user-id=\"191368\">@Brett Esler</span>  Patient is fine.<br>\nNow allergyintolerance and medication don't open in Forge.</p>",
        "id": 170691605,
        "sender_full_name": "Richard Townley-O'Neill",
        "timestamp": 1562902677
    },
    {
        "content": "<p>have not done allergy intolerance yet; medication and medicationstatement coming shortly...</p>",
        "id": 170691975,
        "sender_full_name": "Brett Esler",
        "timestamp": 1562903277
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191682\">@Richard Townley-O'Neill</span>  believe Medication and MedicationStatement should be good now - this include AU Dosage</p>",
        "id": 170693198,
        "sender_full_name": "Brett Esler",
        "timestamp": 1562905295
    },
    {
        "content": "<p>ADHA has pointed out that the code system between STU3 and R4 changed, and in R4 au we haven't made a decision on if we should also change the AU terminology to match.<br>\nOur R4 valuesets need to be updated to point to these new code system names, but should we change our system value too?<br>\ne.g.</p>\n<div class=\"codehilite\"><pre><span></span>{&quot;coding&quot;:[{&quot;system&quot;:&quot;http://hl7.org/fhir/v2/0203&quot;,&quot;code&quot;:&quot;MC&quot;}]}\n</pre></div>\n\n\n<p>=&gt;</p>\n<div class=\"codehilite\"><pre><span></span>{&quot;coding&quot;:[{&quot;system&quot;:&quot;http://terminology.hl7.org/CodeSystem/v2-0203&quot;,&quot;code&quot;:&quot;MC&quot;}]}\n</pre></div>",
        "id": 171396411,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1563759359
    },
    {
        "content": "<p>So the references to the R4 core published code systems will need the URL change for sure as the references we used on STU3 like <a href=\"http://hl7.org/fhir/v2/0203\" target=\"_blank\" title=\"http://hl7.org/fhir/v2/0203\">http://hl7.org/fhir/v2/0203</a> don't exist as an R4 version; I am inclined to update the AU 'extension' code system urls also for consistency as the wire protocol is changing anyway... e.g. <a href=\"http://hl7.org.au/fhir/v2/0203\" target=\"_blank\" title=\"http://hl7.org.au/fhir/v2/0203\">http://hl7.org.au/fhir/v2/0203</a> =&gt; <a href=\"http://terminology.hl7.org.au/CodeSystem/v2-0203\" target=\"_blank\" title=\"http://terminology.hl7.org.au/CodeSystem/v2-0203\">http://terminology.hl7.org.au/CodeSystem/v2-0203</a></p>",
        "id": 171396874,
        "sender_full_name": "Brett Esler",
        "timestamp": 1563760035
    },
    {
        "content": "<p>The odd part is, that this will then make the data in content different beween STU3/R4 for more of the PD content, but do think this is worth while.<br>\n<span class=\"user-mention\" data-user-id=\"195045\">@John Carter</span> , <span class=\"user-mention\" data-user-id=\"191397\">@Jared Davison</span>, <span class=\"user-mention\" data-user-id=\"196737\">@Damon Groenveld</span> thoughts on this?</p>",
        "id": 171397047,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1563760208
    },
    {
        "content": "<p>I have been writing a Version Mapper that could be configured into a Facade that could sit in front of an STU3 AuPD server that could handle these changes<br>\n(internally we're using it to upgrade all our data)</p>",
        "id": 171397076,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1563760273
    },
    {
        "content": "<p>notably there NEEDS to be a change for HPI-I identifier on Practitioner wrt R4 system URL;<br>\n changing AU code system URLs would bring changes to all Identifier.type codes wrt 'system' element for PD</p>",
        "id": 171397142,
        "sender_full_name": "Brett Esler",
        "timestamp": 1563760342
    },
    {
        "content": "<p>Your data won't be terribly interoperable with anyone else's if you don't migrate.</p>",
        "id": 171398399,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1563762559
    },
    {
        "content": "<p>The core values, yes we do need to migrate, however the others that are AU specific terminologies, they just \"look\" like the core ones for the extended values, except have the .au added into them.<br>\n(and the Provider directly has only 2 values in the core where the problem truely exists)</p>",
        "id": 171398512,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1563762769
    },
    {
        "content": "<p>(and they are AU only identifiers too)</p>",
        "id": 171398514,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1563762781
    },
    {
        "content": "<p>I think consistency into the future wins i.e. align with R4 style <a href=\"http://hl7.org.au/fhir/v2/0203\" target=\"_blank\" title=\"http://hl7.org.au/fhir/v2/0203\">http://hl7.org.au/fhir/v2/0203</a> =&gt; <a href=\"http://terminology.hl7.org.au/CodeSystem/v2-0203\" target=\"_blank\" title=\"http://terminology.hl7.org.au/CodeSystem/v2-0203\">http://terminology.hl7.org.au/CodeSystem/v2-0203</a> unless there is a REALLY REALLY big issue with that; we are at the stage of the PD project works where this can happen; later on there will be much greater resistance</p>",
        "id": 171400790,
        "sender_full_name": "Brett Esler",
        "timestamp": 1563766967
    },
    {
        "content": "<p>I don't know the rationale why the change was made (it seems like change for the sake of it - but that doesn't really matter). If the fact is that the change has been made, and if this aspect of R4 is normative we should make the change and not entrench the old way. Hopefully wire level changes like this won't continue.</p>",
        "id": 171416659,
        "sender_full_name": "Jared Davison",
        "timestamp": 1563788465
    },
    {
        "content": "<p>The reason the change happened was that the terminology is being used outside fhir, so removing it from the base of all HL7 defined code systems made sense, and just prior to R4 going normative was the last opportunity to do it.<br>\nThe only other reason for me to not change the other au terminology over to this is that the old one was soo close to the other, and in part why we missed the change.<br>\nWe have to change the core system values, but don't have to for the AU systems.</p>",
        "id": 171427543,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1563800198
    },
    {
        "content": "<p>(hope that all made sense)</p>",
        "id": 171427551,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1563800216
    },
    {
        "content": "<p>ok will be changing today</p>",
        "id": 171483554,
        "sender_full_name": "Brett Esler",
        "timestamp": 1563847003
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span>  is this error part of snapshot ids issues or something else; only occurs for complex-type extension definitions with child extension <a href=\"http://build.fhir.org/ig/hl7au/au-fhir-base/branches/master/build.log\" target=\"_blank\" title=\"http://build.fhir.org/ig/hl7au/au-fhir-base/branches/master/build.log\">http://build.fhir.org/ig/hl7au/au-fhir-base/branches/master/build.log</a>  <br>\nwas building under SNAPSHOT 42 of ig-builder but not now on v23 in CI build</p>",
        "id": 171584467,
        "sender_full_name": "Brett Esler",
        "timestamp": 1563953358
    },
    {
        "content": "<p>apologies to those looking for AU Base on R4; it is currently offline so this publishing issue can be assessed</p>",
        "id": 171584644,
        "sender_full_name": "Brett Esler",
        "timestamp": 1563953564
    },
    {
        "content": "<p>the extension structuredefinition-au-receivingapplication is causing the crash</p>",
        "id": 171598434,
        "sender_full_name": "Brett Esler",
        "timestamp": 1563968458
    },
    {
        "content": "<p>which error?</p>",
        "id": 171810817,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1564175933
    },
    {
        "content": "<p>java.lang.NumberFormatException: For input string: \"0][url='<a href=\"http://hl\" target=\"_blank\" title=\"http://hl\">http://hl</a>\"<br>\n    at java.base/java.lang.NumberFormatException.forInputString(NumberFormatException.java:68)<br>\n    at java.base/java.lang.Integer.parseInt(Integer.java:658)<br>\n    at java.base/java.lang.Integer.parseInt(Integer.java:776)<br>\n    at org.hl7.fhir.utilities.Utilities.fhirPathToXPath(Utilities.java:1100)<br>\n    at org.hl7.fhir.r5.utils.OperationOutcomeUtilities.convertToIssue(OperationOutcomeUtilities.java:46)<br>\n    at org.hl7.fhir.igtools.renderers.ValidationPresenter.generate(ValidationPresenter.java:142)<br>\n    at org.hl7.fhir.igtools.publisher.Publisher.createIg(Publisher.java:743)<br>\n    at org.hl7.fhir.igtools.publisher.Publisher.execute(Publisher.java:612)<br>\n    at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:6208)<br>\nException in thread \"main\" java.lang.NullPointerException<br>\n    at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:6218)</p>",
        "id": 171946665,
        "sender_full_name": "Brett Esler",
        "timestamp": 1564408121
    },
    {
        "content": "<p>added back the first 3 references in ig.xml (extensions) which seem to cause the issuse</p>",
        "id": 171946693,
        "sender_full_name": "Brett Esler",
        "timestamp": 1564408155
    },
    {
        "content": "<p>i</p>",
        "id": 171947532,
        "sender_full_name": "Brett Esler",
        "timestamp": 1564408743
    },
    {
        "content": "<p><a href=\"http://build.fhir.org/ig/hl7au/au-fhir-base/branches/master/build.log\" target=\"_blank\" title=\"http://build.fhir.org/ig/hl7au/au-fhir-base/branches/master/build.log\">http://build.fhir.org/ig/hl7au/au-fhir-base/branches/master/build.log</a></p>",
        "id": 171947546,
        "sender_full_name": "Brett Esler",
        "timestamp": 1564408750
    },
    {
        "content": "<p>the right error would be :</p>",
        "id": 171988002,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1564437964
    },
    {
        "content": "<p>The FHIRPath expression 'Endpoint/example0: Endpoint.extension[0][url='<a href=\"http://hl7.org.au/fhir/StructureDefinition/au-receivingfacility']\" target=\"_blank\" title=\"http://hl7.org.au/fhir/StructureDefinition/au-receivingfacility']\">http://hl7.org.au/fhir/StructureDefinition/au-receivingfacility']</a>' is not valid</p>",
        "id": 171988008,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1564437965
    },
    {
        "content": "<p>thanks <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span>  CI is building now with example references to extensions removed</p>",
        "id": 172000508,
        "sender_full_name": "Brett Esler",
        "timestamp": 1564454759
    },
    {
        "content": "<p>Hi <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span>  I can't get these examples to work and can;t work out why;  practitionerrole-example4.xml is causing the fail and /au-assigningauthority is the referenced extension</p>",
        "id": 172002193,
        "sender_full_name": "Brett Esler",
        "timestamp": 1564457323
    },
    {
        "content": "<p>if I try and add a fixed Extension.url element defintion into the au-assigningauthority definiton I get a warning about mismatch in snapshot genration;  not sure if that is related to the example generating an error, fixd Extension.url is not defined in au-assigningauthority extension at the moment to avoid the warning</p>",
        "id": 172002276,
        "sender_full_name": "Brett Esler",
        "timestamp": 1564457443
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191367\">@Brian Postlethwaite</span>  any ideas?</p>",
        "id": 172002286,
        "sender_full_name": "Brett Esler",
        "timestamp": 1564457492
    },
    {
        "content": "<p>I might have to debug</p>",
        "id": 172002554,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1564457905
    },
    {
        "content": "<p>Not sure what the errors mean... I am getting a warning for each of the complex extensions like<br>\nError in snapshot generation: Differential for <a href=\"http://hl7.org.au/fhir/StructureDefinition/au-receivingapplication\" target=\"_blank\" title=\"http://hl7.org.au/fhir/StructureDefinition/au-receivingapplication\">http://hl7.org.au/fhir/StructureDefinition/au-receivingapplication</a> with id: Extension.value[x] has an element that is not marked with a snapshot match</p>",
        "id": 172036721,
        "sender_full_name": "Brett Esler",
        "timestamp": 1564492734
    },
    {
        "content": "<p>then get ublishing Content Failed: The FHIRPath expression 'Endpoint/example0: Endpoint.extension[0][url='<a href=\"http://hl7.org.au/fhir/StructureDefinition/au-receivingfacility']\" target=\"_blank\" title=\"http://hl7.org.au/fhir/StructureDefinition/au-receivingfacility']\">http://hl7.org.au/fhir/StructureDefinition/au-receivingfacility']</a>' is not valid (00:01:12.0566sec)</p>",
        "id": 172036751,
        "sender_full_name": "Brett Esler",
        "timestamp": 1564492766
    },
    {
        "content": "<p>not sure what the FHIRPath expression is referring to... if remove the  complex extensions from the examples then will not crash</p>",
        "id": 172036886,
        "sender_full_name": "Brett Esler",
        "timestamp": 1564492874
    },
    {
        "content": "<p>other simple extensions are fine</p>",
        "id": 172036890,
        "sender_full_name": "Brett Esler",
        "timestamp": 1564492882
    },
    {
        "content": "<p>I'm not seeing \"Extension.value[x] has an element that is not marked with a snapshot match\"</p>",
        "id": 172082202,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1564525900
    },
    {
        "content": "<p>it is around line 62 of <a href=\"http://build.fhir.org/ig/hl7au/au-fhir-base/branches/master/build.log\" target=\"_blank\" title=\"http://build.fhir.org/ig/hl7au/au-fhir-base/branches/master/build.log\">http://build.fhir.org/ig/hl7au/au-fhir-base/branches/master/build.log</a>  there are 3 one for each complex extension</p>",
        "id": 172085140,
        "sender_full_name": "Brett Esler",
        "timestamp": 1564529036
    },
    {
        "content": "<p>full line is Error in snapshot generation: Differential for <a href=\"http://hl7.org.au/fhir/StructureDefinition/au-receivingapplication\" target=\"_blank\" title=\"http://hl7.org.au/fhir/StructureDefinition/au-receivingapplication\">http://hl7.org.au/fhir/StructureDefinition/au-receivingapplication</a> with id: Extension.value[x] has an element that is not marked with a snapshot match</p>",
        "id": 172085186,
        "sender_full_name": "Brett Esler",
        "timestamp": 1564529069
    },
    {
        "content": "<p>oh the log</p>",
        "id": 172086487,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1564530737
    },
    {
        "content": "<p>fixed next release - sometime today</p>",
        "id": 172090335,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1564534981
    },
    {
        "content": "<p>thanks will keep an eye out</p>",
        "id": 172092884,
        "sender_full_name": "Brett Esler",
        "timestamp": 1564538492
    }
]