[
    {
        "content": "<p>The <a href=\"http://build.fhir.org/ig/hl7au/au-fhir-base/StructureDefinition-au-practitioner.html\" target=\"_blank\" title=\"http://build.fhir.org/ig/hl7au/au-fhir-base/StructureDefinition-au-practitioner.html\">HL7 AU R4 AU Base Practitioner Profile</a> has a slice on identifier with the discriminators of <code>pattern:type</code> &amp; <code>value:system</code>. And the slice for HPI-I mandates a <code>system</code> value with <code>type</code> as optional. This slice has 3 invariants constraining the format of the HPi-I value (ie starting with '800361' 16 digits and the Luhn check). </p>\n<p>An example <a href=\"http://build.fhir.org/ig/hl7au/au-fhir-base/Practitioner-example0.xml.html\" target=\"_blank\" title=\"http://build.fhir.org/ig/hl7au/au-fhir-base/Practitioner-example0.xml.html\">Practitioner-example0</a> demonstrates this slice with both type and system present (noting it includes a meta.profile value for this profile). The <a href=\"http://build.fhir.org/ig/hl7au/au-fhir-base/qa.html#_scratch_ig-build-temp-9VSSZ0_repo_examples_practitioner-example0\" target=\"_blank\" title=\"http://build.fhir.org/ig/hl7au/au-fhir-base/qa.html#_scratch_ig-build-temp-9VSSZ0_repo_examples_practitioner-example0\">corresponding QA report</a> has no corresponding errors or warnings for this example .</p>\n<p>When the optional <code>type</code> node is omitted (with just a system and value), ie </p>\n<div class=\"codehilite\"><pre><span></span><span class=\"nt\">&lt;identifier&gt;</span>\n    <span class=\"nt\">&lt;system</span> <span class=\"na\">value=</span><span class=\"s\">&quot;http://ns.electronichealth.net.au/id/hi/hpii/1.0&quot;</span><span class=\"nt\">/&gt;</span>\n    <span class=\"nt\">&lt;value</span> <span class=\"na\">value=</span><span class=\"s\">&quot;8003619900015717&quot;</span><span class=\"nt\">/&gt;</span>\n<span class=\"nt\">&lt;/identifier&gt;</span>\n</pre></div>\n\n\n<p>the locally built QA report now raises an information note of \"This element does not match any known slice for the profile <a href=\"http://hl7.org.au/fhir/StructureDefinition/au-practitioner\" target=\"_blank\" title=\"http://hl7.org.au/fhir/StructureDefinition/au-practitioner\">http://hl7.org.au/fhir/StructureDefinition/au-practitioner</a>\".</p>\n<p>And if a clearly bogus HPI-I value is added that should fail against all 3 invariants, like \"wrongHPI-I8003619900015717\", then the QA report still just has the \"does not match any known slice\" notice. However, when the type node is re-added then the value invariants are violated. </p>\n<p>Discussing this recently with <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span>, it was felt that this behaviour is unexpected and that the invariants should fire in the absence of the <code>type</code> node.</p>\n<p>Posting here is the hope that this can be addressed, by whatever means - one thought was to mandate <code>type</code>although Grahame indicated that this should not be needed. Please let me know if any other information is helpful.</p>\n<p>NB: the local build was done on a cloned copy of the HL7 AU repository and built with today's IG publisher (v0.9.61)</p>\n<p>Also note - the above 'picks on' Practitioner HPI-I slice but the same conditions exist for other identifier slices in this profile (CAE and Medicare Prescriber Number), as well as other profiles (AU Base Patient, AU Base HealthcareServiceAU Base RelatedPersonand AU Base RelatedPerson).</p>",
        "id": 174761077,
        "sender_full_name": "Rob Eastwood",
        "timestamp": 1567490876
    },
    {
        "content": "<p>Hi <span class=\"user-mention\" data-user-id=\"191368\">@Brett Esler</span> - this is one we discussed at one of the recent PAWG meetings</p>",
        "id": 174761193,
        "sender_full_name": "Rob Eastwood",
        "timestamp": 1567491022
    }
]