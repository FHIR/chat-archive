[
    {
        "content": "<p>Incase people are interested, I just pushed the source for my FhirpathTester to Github.<br>\nOf note in this is concurrent support for DSTU2 and STU3 using the NuGet packages.</p>",
        "id": 153863560,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1481778812
    },
    {
        "content": "<p>This is a reasonable example of a project that includes support for both versions at the same time, and how to resolve which to use.</p>",
        "id": 153863561,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1481778841
    },
    {
        "content": "<p>After adding the 2 packages, you need to update the properties of the 2 references assemblies changing the Aliases property on each from global to either DSTU2 or STU3 (for the appropriate library)</p>",
        "id": 153863562,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1481778908
    },
    {
        "content": "<p>Hi <span class=\"user-mention\" data-user-id=\"191367\">@Brian Postlethwaite</span>  - I'm running your tester app (unchanged) and am getting the following errors</p>",
        "id": 153865004,
        "sender_full_name": "Richard Kavanagh",
        "timestamp": 1482947264
    },
    {
        "content": "<p>Invalid name character in 'codeOfT&lt;Hl7.Fhir.Model.Narrative+NarrativeStatus&gt;'. The '&lt;' character, hexadecimal value 0x3C, cannot be included in a name.</p>",
        "id": 153865005,
        "sender_full_name": "Richard Kavanagh",
        "timestamp": 1482947265
    },
    {
        "content": "<p>This is with the XML being an Observation example out of DSTU2 and the expression anything that seems to have the Descendants() command.</p>",
        "id": 153865006,
        "sender_full_name": "Richard Kavanagh",
        "timestamp": 1482947342
    },
    {
        "content": "<p>I'll have a look at that next year!<br>\n ;P</p>",
        "id": 153865141,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1483165136
    },
    {
        "content": "<p>I just grabbed the example <code>http://hl7.org/fhir/observation-example.xml</code> and it worked fine, which one did you try?</p>",
        "id": 153865225,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1483403048
    },
    {
        "content": "<p>I even tested it with <code>http://hl7.org/fhir/2017Jan/patient-glossy-example.xml</code> and it accurately detects that this resource is STU3 only.<br>\nAnd removing the generalPractitioner from the resource it detects that the resource is valid in both DSTU2 and STU3.</p>",
        "id": 153865226,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1483403416
    },
    {
        "content": "<p>Ok - I also used the example <a href=\"http://hl7.org/fhir/observation-example.xml\" target=\"_blank\" title=\"http://hl7.org/fhir/observation-example.xml\">http://hl7.org/fhir/observation-example.xml</a> with an expression of Observation.children().</p>",
        "id": 153865563,
        "sender_full_name": "Richard Kavanagh",
        "timestamp": 1483569405
    },
    {
        "content": "<p><a href=\"/user_uploads/10155/4mn_4vN9YVn4hNEo8YHGkazo/pasted_image.png\" target=\"_blank\" title=\"pasted_image.png\">pasted image</a> </p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/4mn_4vN9YVn4hNEo8YHGkazo/pasted_image.png\" target=\"_blank\" title=\"pasted_image.png\"><img src=\"/user_uploads/10155/4mn_4vN9YVn4hNEo8YHGkazo/pasted_image.png\"></a></div>",
        "id": 153865564,
        "sender_full_name": "Richard Kavanagh",
        "timestamp": 1483569512
    },
    {
        "content": "<p>Thanks, I can reproduce this too.<br>\nDon't know why its doing that. Will look into it.</p>",
        "id": 153865585,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1483570422
    },
    {
        "content": "<p>Thanks Richard, I know what the issue is now.<br>\nThe tool is confused between STU3 and DSTU2 in this case while outputting the results of the query.</p>",
        "id": 153865597,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1483571233
    },
    {
        "content": "<p>Actually, its more simple than that. The FHIR XML serializer isn't able to handle outputing an XML fragment for the status property alone using:<br>\n<code>Hl7.Fhir.Serialization.FhirSerializer.SerializeToXml(t2)</code><br>\nWhich gets that exception. So I'll need to work out what the bug in the serializer is.</p>",
        "id": 153865600,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1483572049
    },
    {
        "content": "<p>Ok, have pushed the fix for this issue (thanks Ewout)</p>",
        "id": 153867799,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1484630054
    },
    {
        "content": "<p>So the fix is in the core API? I guess it will not get into a nuget for a while though...</p>",
        "id": 153867853,
        "sender_full_name": "Richard Kavanagh",
        "timestamp": 1484668855
    },
    {
        "content": "<p>Nope, 2 lines in the tester tool itself!<br>\nSo go fit it using it now. (all pushed and ready for a pull)</p>",
        "id": 153867980,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1484705952
    }
]