[
    {
        "content": "<p>Hi.</p>\n<p>I'm having an issue with using FhirDateTime when time is represented by dots</p>\n<p>The exception goes like this<br>\n\"System.FormatException: 'The string '2016-05-05T12.00.00' is not a valid AllXsd value.'\"</p>\n<p>This value is in an FhirDateTime object.<br>\nvar dateTime = new FhirDateTime(dateStr);<br>\nvar dateTimeOffset = dateTime.ToDateTimeOffset() --&gt; causes the exception</p>\n<p>The problem here, is that my computer uses the format hh.mm.ss format instead of hh:mm:ss (which is very annoying). An easy fix would be to change the format on my computer, however, this is just a quickfix and does not solve the problem:</p>\n<p>Making sure that the ToDateTimeOffset() gets a date in the expected format before it converts the date. </p>\n<p>Is there a reasonable way of tackling it?</p>",
        "id": 153892663,
        "sender_full_name": "Harald Sømnes Hanssen",
        "timestamp": 1496840878
    },
    {
        "content": "<p>Hi <span class=\"user-mention\" data-user-id=\"192139\">@Harald Sømnes Hanssen</span>, the challenge is that the FHIR datetime format does not map 1-1 to the C# DateTimeOffset datatype. For example, FHIR allows partial dates such as year-month, however you cannot express this in native C# datatypes. Therefore the API internally manages FHIR datetime values as strings, providing extension methods for mapping from/to C# datatypes - however that conversion is not always possible. Consequently, you have to do some additional work in your client logic. We're open to suggestions about improving the API, so please feel free to submit your ideas.</p>",
        "id": 153892757,
        "sender_full_name": "Michel Rutten",
        "timestamp": 1496870524
    },
    {
        "content": "<p>Hi Michael</p>\n<p>Wouldn't it be better to map the date by properties and set the desired format when you created the FhirDateTime object?</p>\n<p>For example, <br>\n     public FhirDateTime(int year, int month, int day, int hr, int min, int sec = 0, string dateTimeXmlFormat, string dateTimeFormat)</p>\n<p>Or at least have an outputmethod in the FhirDateTime?</p>\n<p>public ToDateTime(string outputDateTimeFormat = null)</p>\n<p>When you are transferring dates between systems, it is vital to be able to get the correct date without having to create temporary solutions.</p>\n<p>In my case, the ToDateTime method would have probably solved the issue I'm having, where I'm transferring the date from FHIR service to a hl7 v3 connector.</p>",
        "id": 153892878,
        "sender_full_name": "Harald Sømnes Hanssen",
        "timestamp": 1496906430
    },
    {
        "content": "<p>Not sure what you'd like us to do here.<br>\nWe've provided helper methods to go to/from c# datetime and datetimeoffset classes to the FhirDateTime class. If you pass a string that isn't a FHIR string to the constructor, yes it breaks.</p>",
        "id": 153893057,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1496981833
    },
    {
        "content": "<p>There are extension methods in Hl7.Fhir.Support that go from the C# format to the fhirDate classes.<br>\n<a href=\"https://github.com/ewoutkramer/fhir-net-api/blob/master/src/Hl7.Fhir.Core/Support/DateExtensions.cs#L17\" target=\"_blank\" title=\"https://github.com/ewoutkramer/fhir-net-api/blob/master/src/Hl7.Fhir.Core/Support/DateExtensions.cs#L17\">https://github.com/ewoutkramer/fhir-net-api/blob/master/src/Hl7.Fhir.Core/Support/DateExtensions.cs#L17</a><br>\nCan highly recommend using these going from internal models to FHIR models.</p>",
        "id": 153893058,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1496981936
    },
    {
        "content": "<p>While I'm talking about the handy extras, theres one for Guid too.<br>\n<a href=\"https://github.com/ewoutkramer/fhir-net-api/blob/master/src/Hl7.Fhir.Core/Support/GuidExtensions.cs#L17\" target=\"_blank\" title=\"https://github.com/ewoutkramer/fhir-net-api/blob/master/src/Hl7.Fhir.Core/Support/GuidExtensions.cs#L17\">https://github.com/ewoutkramer/fhir-net-api/blob/master/src/Hl7.Fhir.Core/Support/GuidExtensions.cs#L17</a></p>\n<div class=\"codehilite\"><pre><span></span>string id = Guid.NewGuid().ToFhirId(); // much cleaner and consistent format\n</pre></div>",
        "id": 153893060,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1496982011
    }
]