[
    {
        "content": "<p>Hi, I am trying to validate a bundle resource against profiles defined in an implementation guide with dependencies. I have  created the following code (takes file name of the resource and a list of zip file names for the definitions, but it cannot resolve the valuesets  given in the definitions (no fhir server is involved for now).</p>\n<p>Does someone have a hint what I might be missing?</p>\n<div class=\"codehilite\"><pre><span></span><code>        using (var streamReader = new StreamReader(fileName))\n        {\n            var jsonReader = new JsonTextReader(streamReader);\n            var jsonParser = new FhirJsonParser();\n            try\n            {\n                var content = jsonParser.Parse(jsonReader);\n                var resolvers = new List&lt;IAsyncResourceResolver&gt;();\n                resolvers.Add(new CachedResolver(ZipSource.CreateValidationSource()));\n                foreach (var zipFile in profileZipFiles)\n                    resolvers.Add(new CachedResolver(new ZipSource(zipFile)));\n\n                var settings = ValidationSettings.CreateDefault();\n                var multiResolver = new MultiResolver(resolvers);\n\n                settings.ResourceResolver = multiResolver;\n                settings.GenerateSnapshot = true;\n\n\n                var validator = new Hl7.Fhir.Validation.Validator(settings);\n                var outcome = validator.Validate(content);\n                if (outcome.Success)\n                    Console.WriteLine(&quot;File successfully validated&quot;);\n                else\n                {\n                    Console.WriteLine(outcome.ToString());\n                }\n            }\n            catch (Exception ex)\n            {\n                Console.WriteLine(ex.Message);\n            }\n        }\n</code></pre></div>",
        "id": 225699335,
        "sender_full_name": "Torben M. Hagensen",
        "timestamp": 1612881824
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"240678\">Torben M. Hagensen</span> <a href=\"#narrow/stream/179171-dotnet/topic/Validation.20code.20issue/near/225699335\">said</a>:</p>\n<blockquote>\n<p>Does someone have a hint what I might be missing?</p>\n</blockquote>\n<p><span class=\"user-mention\" data-user-id=\"191347\">@Mirjam Baltus</span> - Is it not possible to resolve valuesets provided in a zipfile using the API?</p>",
        "id": 226105350,
        "sender_full_name": "Torben M. Hagensen",
        "timestamp": 1613115208
    },
    {
        "content": "<p>One missing feature in our Local terminology service and resolvers is that they won't be able to find ValueSets that are defined implicitly by a CodeSystem.  See <a href=\"https://github.com/FirelyTeam/firely-net-sdk/issues/1570\">https://github.com/FirelyTeam/firely-net-sdk/issues/1570</a>.</p>\n<p>Maybe this is the case?</p>",
        "id": 226505279,
        "sender_full_name": "Ewout Kramer",
        "timestamp": 1613477317
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191328\">Ewout Kramer</span> <a href=\"#narrow/stream/179171-dotnet/topic/Validation.20code.20issue/near/226505279\">said</a>:</p>\n<blockquote>\n<p>One missing feature in our Local terminology service and resolvers is that they won't be able to find ValueSets that are defined implicitly by a CodeSystem.  See <a href=\"https://github.com/FirelyTeam/firely-net-sdk/issues/1570\">https://github.com/FirelyTeam/firely-net-sdk/issues/1570</a>.</p>\n<p>Maybe this is the case?</p>\n</blockquote>\n<p>Yes, that is probably the case. I guess I will have to establish a server with the valuesets to make it work.</p>",
        "id": 226928497,
        "sender_full_name": "Torben M. Hagensen",
        "timestamp": 1613719830
    }
]