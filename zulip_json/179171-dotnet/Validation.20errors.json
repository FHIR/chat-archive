[
    {
        "content": "<p>I'm getting some strange errors when trying to validate the resource below against this package <a href=\"https://simplifier.net/validate?fhirVersion=R4&amp;scope=hl7.fhir.no.basis-2.0.4\" target=\"_blank\" title=\"https://simplifier.net/validate?fhirVersion=R4&amp;scope=hl7.fhir.no.basis-2.0.4\">https://simplifier.net/validate?fhirVersion=R4&amp;scope=hl7.fhir.no.basis-2.0.4</a></p>\n<p>For example this, (identifier[0].value does indeed exist in the example): </p>\n<div class=\"codehilite\"><pre><span></span>Invalid : Instance count for &#39;Organization.identifier.value&#39; is 0, which is not within the specified cardinality of 1..1\nOrganization.identifier[0]\n</pre></div>\n\n\n<p>and this:</p>\n<div class=\"codehilite\"><pre><span></span>Invalid : Value is not exactly equal to fixed value &#39;urn:oid:2.16.578.1.12.4.1.2.102&#39;\nOrganization.identifier[0].system[0]\n</pre></div>\n\n\n<p>--<br>\nIt could be there is something wrong with the profile (<a href=\"https://simplifier.net/hl7norwayno-basis/nobasisorganization\" target=\"_blank\" title=\"https://simplifier.net/hl7norwayno-basis/nobasisorganization\">https://simplifier.net/hl7norwayno-basis/nobasisorganization</a>), but I cannot pinpoint what that should be.</p>\n<div class=\"codehilite\"><pre><span></span>&lt;Organization&gt;\n    &lt;meta&gt;\n        &lt;profile value=&quot;http://hl7.no/fhir/StructureDefinition/no-basis-Organization&quot; /&gt;\n    &lt;/meta&gt;\n    &lt;identifier&gt;\n        &lt;system value=&quot;urn:oid:2.16.578.1.12.4.1.2.101&quot; /&gt;\n        &lt;value value=&quot;915933149&quot; /&gt;\n    &lt;/identifier&gt;\n    &lt;name value=&quot;Direktoratet for e-Helse&quot; /&gt;\n    &lt;address&gt;\n        &lt;extension url=&quot;http://hl7.no/fhir/StructureDefinition/no-basis-address-official&quot;&gt;\n            &lt;valueBoolean value=&quot;true&quot; /&gt;\n        &lt;/extension&gt;\n        &lt;type value=&quot;postal&quot; /&gt;\n        &lt;line value=&quot;Postboks 221 Sk√∏yen&quot; /&gt;\n        &lt;city value=&quot;OSLO&quot; /&gt;\n        &lt;postalCode value=&quot;0213&quot; /&gt;\n    &lt;/address&gt;\n    &lt;address&gt;\n        &lt;extension url=&quot;http://hl7.no/fhir/StructureDefinition/no-basis-address-official&quot;&gt;\n            &lt;valueBoolean value=&quot;true&quot; /&gt;\n        &lt;/extension&gt;\n        &lt;type value=&quot;physical&quot; /&gt;\n        &lt;line value=&quot;Verkstedveien 1&quot; /&gt;\n        &lt;city value=&quot;OSLO&quot; /&gt;\n        &lt;postalCode value=&quot;0277&quot; /&gt;\n    &lt;/address&gt;\n&lt;/Organization&gt;\n</pre></div>",
        "id": 176446473,
        "sender_full_name": "Kenneth Myhra",
        "timestamp": 1569317252
    },
    {
        "content": "<p>Hi Kenneth, the profile seems to be wrong, since the discriminator on this field is (type.coding.system), but I don't see any constraints actually fixing this value.   The new 1.4 version of the API (which I am working on right now), should be able to report about these issues more reliably.</p>",
        "id": 176447441,
        "sender_full_name": "Ewout Kramer",
        "timestamp": 1569318088
    },
    {
        "content": "<p>Thanks Ewout, I'll investigate some more</p>",
        "id": 176450810,
        "sender_full_name": "Kenneth Myhra",
        "timestamp": 1569321165
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"192710\">@Kenneth Myhra</span>  <span class=\"user-mention\" data-user-id=\"191328\">@Ewout Kramer</span> <br>\nI have done some fixes to the no-basis profiles, and it seems to have fixed second validation error. The first one persists however. As far as I have understood, this is a known issue in the validation using the .NET API</p>",
        "id": 176542173,
        "sender_full_name": "Thomas Tveit Rosenlund",
        "timestamp": 1569398678
    },
    {
        "content": "<p>One thing i did notice is that this file validates correctly: <a href=\"https://simplifier.net/hl7norwayno-basis/organization-example\" target=\"_blank\" title=\"https://simplifier.net/hl7norwayno-basis/organization-example\">https://simplifier.net/hl7norwayno-basis/organization-example</a><br>\nBut when i validate against the current package which should be updated (I updated it myself), I do get an error:<br>\n<a href=\"https://simplifier.net/validate\" target=\"_blank\" title=\"https://simplifier.net/validate\">https://simplifier.net/validate</a></p>",
        "id": 176648709,
        "sender_full_name": "Thomas Tveit Rosenlund",
        "timestamp": 1569496683
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"192856\">@Thomas Tveit Rosenlund</span> <a href=\"https://simplifier.net/validate\" target=\"_blank\" title=\"https://simplifier.net/validate\">https://simplifier.net/validate</a> has an issue where it removes the identifier.value on validation: <a href=\"https://app.birdeatsbug.com/sessions/igoCL8CRRSZYh2O-2XdQ9\" target=\"_blank\" title=\"https://app.birdeatsbug.com/sessions/igoCL8CRRSZYh2O-2XdQ9\">https://app.birdeatsbug.com/sessions/igoCL8CRRSZYh2O-2XdQ9</a> (reproduced on STU3 here, since R4 /validate does not show XML output yet).</p>\n<p>Apparently this is because of this known API bug: <a href=\"https://github.com/FirelyTeam/fhir-net-api/issues/1071\" target=\"_blank\" title=\"https://github.com/FirelyTeam/fhir-net-api/issues/1071\">https://github.com/FirelyTeam/fhir-net-api/issues/1071</a>. Which is being worked on right now an should be in the next release.<br>\nThanks for reporting!</p>",
        "id": 176656195,
        "sender_full_name": "Ward Weistra",
        "timestamp": 1569503395
    },
    {
        "content": "<p>We found the cause of the issue.  Although we agree the error is <em>very</em> unclear, it does mean you did not put your xml elements in the <code>http://hl7.org/fhir</code> namespace!   We will fix this in the next update...</p>",
        "id": 176965791,
        "sender_full_name": "Ewout Kramer",
        "timestamp": 1569872091
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"192856\">@Thomas Tveit Rosenlund</span></p>",
        "id": 177040916,
        "sender_full_name": "Kenneth Myhra",
        "timestamp": 1569924717
    },
    {
        "content": "<blockquote>\n<p>We found the cause of the issue.  Although we agree the error is <em>very</em> unclear, it does mean you did not put your xml elements in the <code>http://hl7.org/fhir</code> namespace!   We will fix this in the next update...</p>\n</blockquote>\n<p>I don't understand this <span class=\"user-mention\" data-user-id=\"191328\">@Ewout Kramer</span>. Should all conformance resources from HL7 Norway be available on <a href=\"http://hl7.org\" target=\"_blank\" title=\"http://hl7.org\">hl7.org</a>?</p>",
        "id": 177217087,
        "sender_full_name": "Thomas Tveit Rosenlund",
        "timestamp": 1570081940
    },
    {
        "content": "<p>Like this maybe:<br>\n<a href=\"http://hl7.org/fhir/xml.html#2.6.1\" target=\"_blank\" title=\"http://hl7.org/fhir/xml.html#2.6.1\">http://hl7.org/fhir/xml.html#2.6.1</a></p>",
        "id": 177218593,
        "sender_full_name": "Thomas Tveit Rosenlund",
        "timestamp": 1570084353
    },
    {
        "content": "<p>Correct, FHIR xml format requires the FHIR namespace on the root element:</p>\n<blockquote>\n<p>FHIR elements are always in the namespace <a href=\"http://hl7.org/fhir\" target=\"_blank\" title=\"http://hl7.org/fhir\">http://hl7.org/fhir</a></p>\n</blockquote>\n<p>FHIR serialized will reject documents with other or missing namespace.</p>",
        "id": 177226237,
        "sender_full_name": "Michel Rutten",
        "timestamp": 1570093559
    },
    {
        "content": "<p>No, but the instance you are validating should be in the <a href=\"http://hl7.org/fhir\" target=\"_blank\" title=\"http://hl7.org/fhir\">hl7.org/fhir</a> XML namespace!</p>",
        "id": 177332625,
        "sender_full_name": "Ewout Kramer",
        "timestamp": 1570191240
    },
    {
        "content": "<p>Your organization example looks like this:</p>\n<div class=\"codehilite\"><pre><span></span>&lt;Organization&gt;\n</pre></div>\n\n\n<p>should have been:</p>\n<div class=\"codehilite\"><pre><span></span>&lt;Organization xmlns=&#39;http://hl7.org/fhir&#39; &gt;\n</pre></div>",
        "id": 177332716,
        "sender_full_name": "Ewout Kramer",
        "timestamp": 1570191309
    },
    {
        "content": "<p>I understood this finally :-)</p>\n<p>Luckily my examples have the namespace defined in my XML editor, SIMPLIFIER does strip all namespace information from the XML when it displays the examples though. So when you try to copy and paste the code into the validator you get the error.</p>",
        "id": 177336487,
        "sender_full_name": "Thomas Tveit Rosenlund",
        "timestamp": 1570194290
    },
    {
        "content": "<p>Aha, we simplify the XML display on <a href=\"https://simplifier.net/HL7Norwayno-basis/Organization-example/~xml\" target=\"_blank\" title=\"https://simplifier.net/HL7Norwayno-basis/Organization-example/~xml\">https://simplifier.net/HL7Norwayno-basis/Organization-example/~xml</a>, but we're leaving out in that display something that the validator checks for...<br>\nLuckily they are indeed included in the profile, eg when you export the profile as XML.</p>\n<p>I need to think if we need to change that. It will rarely be useful in the XML display (since it's always there for each FHIR resource) but if it leads to a validation error when using only the displayed part...</p>",
        "id": 177338088,
        "sender_full_name": "Ward Weistra",
        "timestamp": 1570195478
    },
    {
        "content": "<p>There is an option to copy xml/json under the download button. <br>\nTo make things easier by adding add a copy button (small clipboard icon). next to the xml/json itself.</p>",
        "id": 177503545,
        "sender_full_name": "Martijn Harthoorn",
        "timestamp": 1570440848
    }
]