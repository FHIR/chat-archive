[
    {
        "content": "<p>Hi <span class=\"user-mention\" data-user-id=\"191328\">@Ewout Kramer</span>  and vonk team,<br>\nI am trying to run vonk server inside  docker for windows using &gt; docker-compose -f docker-compose.mssqlserver_host.yml up -d.   My preference is to have the docker-compose to create vonk databases in sql server. </p>\n<p>I am getting following error at the start up -  Unable to auto update database \"VonkR4\": \"Globalization Invariant Mode is not supported.\" <br>\nStartup failed: Globalization Invariant Mode is not supported.</p>\n<p>The sql server user has been granted dbcreator, public and sysadmin roles.  (created in the security panel not via scripts).   </p>\n<p>What am I missing ?</p>\n<p>Thank you</p>",
        "id": 209610498,
        "sender_full_name": "Nilesh Pagare",
        "timestamp": 1599727652
    },
    {
        "content": "<p>I'll page <span class=\"user-mention\" data-user-id=\"191757\">@Christiaan Knaap</span>  or <span class=\"user-mention\" data-user-id=\"193551\">@Marco Visser</span> for you!</p>",
        "id": 209625343,
        "sender_full_name": "Ewout Kramer",
        "timestamp": 1599737536
    },
    {
        "content": "<p>Hello Nilesh, Thanks for calling out! <br>\nThat has been reported before, we are looking into it. I probably has to do with the very much trimmed down base Alpine image that we introduced with version 3.7.0. Because of the FHIR Connectathon that we obviously actively participate in, we may need until next week to get to an answer.</p>",
        "id": 209645119,
        "sender_full_name": "Christiaan Knaap",
        "timestamp": 1599746281
    },
    {
        "content": "<p>Hello <span class=\"user-mention\" data-user-id=\"191757\">@Christiaan Knaap</span> , that's great. In the meantime, I am trying Vonk v3.6.1 ? Is there any DB upgrade between 3.6.1 and 3.8 ?</p>",
        "id": 209649381,
        "sender_full_name": "Nilesh Pagare",
        "timestamp": 1599747189
    },
    {
        "content": "<p>(deleted)</p>",
        "id": 209669087,
        "sender_full_name": "Nilesh Pagare",
        "timestamp": 1599753764
    },
    {
        "content": "<p>Hi Nilesh, yes there is DB upgrade in v3.7.0 for SQL Server. See <a href=\"https://docs.fire.ly/vonk/releasenotes/releasenotes.html#release-3-7-0\">here</a> for the release notes.</p>",
        "id": 209747217,
        "sender_full_name": "Marco Visser",
        "timestamp": 1599808067
    },
    {
        "content": "<p>Hi <span class=\"user-mention\" data-user-id=\"193551\">@Marco Visser</span> , greetings ! how are you  ? <br>\nThank you for that pointer. So far, I have set up my 3.6.1 eval server pointing to SQL Server 2019.<br>\nWill be using VonkLoader to load FHIR population in the database. </p>\n<ul>\n<li>Will VonkLoader work for only for VonkServer or any other FHIR server ?<br>\nThank you.</li>\n</ul>",
        "id": 209769408,
        "sender_full_name": "Nilesh Pagare",
        "timestamp": 1599824271
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191757\">Christiaan Knaap</span> <a href=\"#narrow/stream/179171-dotnet/topic/Vonk.20R4.20Sql.20Server/near/209645119\">said</a>:</p>\n<blockquote>\n<p>Hello Nilesh, Thanks for calling out! <br>\nThat has been reported before, we are looking into it. I probably has to do with the very much trimmed down base Alpine image that we introduced with version 3.7.0. Because of the FHIR Connectathon that we obviously actively participate in, we may need until next week to get to an answer.</p>\n</blockquote>\n<p>HI <span class=\"user-mention\" data-user-id=\"191757\">@Christiaan Knaap</span> ,  I have tried to use v3.6.1 but have run into multiple issues from setting up the Administration APIs to successfully loading Synthea generated population using VonkLoader. Not sure if it is worthwhile to get the 3.8.0 fixed against the issue I reported and then I try uploading the data.<br>\nIs there a github repo that you can recommend for me to file these issues ? Thank you.</p>",
        "id": 209961415,
        "sender_full_name": "Nilesh Pagare",
        "timestamp": 1600052462
    },
    {
        "content": "<p>Hi Nilesh,<br>\nVonkLoader generates transaction bundles that should be processable by other FHIR servers as well. (Probably not just any FHIR server - transactions are not always supported).<br>\nA new version of VonkLoader is coming up that also supports FHIR R4 and adds some other features.<br>\nWe have a ticketing system in Jira for licensed users, but you can still report issues in the vonk inbox (<a href=\"mailto:vonk@fire.ly\">vonk@fire.ly</a>). We look forward to solving them, but we cannot guarantee the response time of course.</p>",
        "id": 209990626,
        "sender_full_name": "Christiaan Knaap",
        "timestamp": 1600081948
    },
    {
        "content": "<p>Hi Christiaan, thank you for your response. </p>\n<ol>\n<li>can you please confirm if 3.6.1 supports R4 ?</li>\n<li>Any fix for the issue I reported against vonk server 3.8.0 ?</li>\n<li>what's the ETA for VonkLoader that will support R4 ? </li>\n<li>It will be great if I and the community could post issues against VonkLoader in a github repo.  Any thoughts on making this open source as it is available free? In the meantime, I will communicate via email.<br>\nThanks.</li>\n</ol>",
        "id": 209997428,
        "sender_full_name": "Nilesh Pagare",
        "timestamp": 1600086794
    },
    {
        "content": "<p>Hi Nilesh,<br>\nVonk supports both R3 and R4 as of Vonk version 3.0. Please be aware that you have to change the \"InformationModel.Default\" setting of the Vonk configuration to \"Fhir4.0\" if you want the default FHIR version used by Vonk to be R4. If you do not want to run R3 and R4 both, you can change your \"PipelineOptions\" configuration to only include the version you want. See <a href=\"https://docs.fire.ly/vonk/configuration/appsettings.html\">https://docs.fire.ly/vonk/configuration/appsettings.html</a> for more information about all the configuration options.</p>",
        "id": 210001016,
        "sender_full_name": "Mirjam Baltus",
        "timestamp": 1600088669
    },
    {
        "content": "<p>Hi <span class=\"user-mention\" data-user-id=\"191347\">@Mirjam Baltus</span> , thank you. Your help will be appreciated.</p>\n<ol>\n<li>Here are my settings - <div class=\"codehilite\"><pre><span></span><code>- VONK_InformationModel=Fhir4.0\n- VONK_InformationModel:Default=Fhir4.0\n</code></pre></div>\n\n\n</li>\n</ol>\n<p>Even then I see lots of errors in the console where Vonk Server fails to load conformance resources.</p>\n<ol start=\"2\">\n<li>\n<p>When I tried validating Administration URL - <a href=\"http://localhost:8086/administration\">http://localhost:8086/administration</a> , I get two errors in the response body -<br>\n{<br>\n    \"resourceType\": \"OperationOutcome\",<br>\n    \"id\": \"751f7bb1-260b-4852-80de-d048b91e10ee\",<br>\n    \"meta\": {<br>\n        \"versionId\": \"80d77ea9-3639-4514-a5b1-f89675ea353b\",<br>\n        \"lastUpdated\": \"2020-09-14T14:16:39.600+00:00\"<br>\n    },<br>\n    \"issue\": [<br>\n        {<br>\n            \"severity\": \"warning\",<br>\n            \"code\": \"not-supported\",<br>\n            \"details\": {<br>\n                \"coding\": [<br>\n                    {<br>\n                        \"system\": \"<a href=\"http://hl7.org/fhir/dotnet-api-operation-outcome\">http://hl7.org/fhir/dotnet-api-operation-outcome</a>\",<br>\n                        \"code\": \"5003\"<br>\n                    }<br>\n                ],<br>\n                \"text\": \"Argument is not supported\"<br>\n            },<br>\n            \"diagnostics\": \"_count=10\"<br>\n        },<br>\n        {<br>\n            \"severity\": \"warning\",<br>\n            \"code\": \"not-supported\",<br>\n            \"details\": {<br>\n                \"coding\": [<br>\n                    {<br>\n                        \"system\": \"<a href=\"http://hl7.org/fhir/dotnet-api-operation-outcome\">http://hl7.org/fhir/dotnet-api-operation-outcome</a>\",<br>\n                        \"code\": \"5003\"<br>\n                    }<br>\n                ],<br>\n                \"text\": \"Argument is not supported\"<br>\n            },<br>\n            \"diagnostics\": \"_sort=-_lastUpdated\"<br>\n        }<br>\n    ]<br>\n}</p>\n</li>\n<li>\n<p>When tried to reset the database via <a href=\"http://localhost:8086/administration/reset\">http://localhost:8086/administration/reset</a> , I get either 403 or 501<br>\n{<br>\n    \"resourceType\": \"OperationOutcome\",<br>\n    \"id\": \"0ba4d217-6a27-4153-ac0e-423d17d59c25\",<br>\n    \"meta\": {<br>\n        \"versionId\": \"d3b3088b-73be-4ddd-9154-f2174bd18efa\",<br>\n        \"lastUpdated\": \"2020-09-14T14:18:30.592+00:00\"<br>\n    },<br>\n    \"issue\": [<br>\n        {<br>\n            \"severity\": \"error\",<br>\n            \"code\": \"security\",<br>\n            \"details\": {<br>\n                \"coding\": [<br>\n                    {<br>\n                        \"system\": \"<a href=\"http://hl7.org/fhir/dotnet-api-operation-outcome\">http://hl7.org/fhir/dotnet-api-operation-outcome</a>\",<br>\n                        \"code\": \"5013\"<br>\n                    }<br>\n                ],<br>\n                \"text\": \"No access to this operation\"<br>\n            }<br>\n        }<br>\n    ]<br>\n}</p>\n</li>\n</ol>",
        "id": 210011416,
        "sender_full_name": "Nilesh Pagare",
        "timestamp": 1600093182
    },
    {
        "content": "<p>here are  some sample errors - <br>\n2020-09-14 14:32:06.143 +00:00   [Information] [ReqId: ] StartupRunner started for Fhir4.0.<br>\n2020-09-14 14:32:06.144 +00:00   [Information] [ReqId: ] Loading conformance resources at startup for Fhir4.0.<br>\n2020-09-14 14:32:06.144 +00:00   [Information] [ReqId: ] Loading conformance resources ...<br>\n2020-09-14 14:32:06.187 +00:00   [Information] [ReqId: ] Reading conformance resources from \"/app/specification_Fhir4_0.zip\".<br>\n2020-09-14 14:32:06.187 +00:00   [Information] [ReqId: ] This could take a few minutes.<br>\n2020-09-14 14:32:07.500 +00:00   [Information] [ReqId: ] This import source returned (new) results. All subsequent sources will be (re-)read.<br>\n2020-09-14 14:32:18.918 +00:00   [Error] [ReqId: ] Artifact /tmp/FhirArtifactCache-1.6.0-Hl7.Fhir.R4.Specification/specification_Fhir4_0/dataelements.xml could not be imported. Error message: Found multiple conflicting resources with the same resource uri identifier.</p>\n<p>Url: <a href=\"http://hl7.org/fhir/StructureDefinition/de-Quantity.value\">http://hl7.org/fhir/StructureDefinition/de-Quantity.value</a><br>\n   File: /tmp/FhirArtifactCache-1.6.0-Hl7.Fhir.R4.Specification/specification_Fhir4_0/dataelements.xml<br>\n   File: /tmp/FhirArtifactCache-1.6.0-Hl7.Fhir.R4.Specification/specification_Fhir4_0/dataelements.xml<br>\n   File: /tmp/FhirArtifactCache-1.6.0-Hl7.Fhir.R4.Specification/specification_Fhir4_0/dataelements.xml</p>\n<p>2020-09-14 14:32:18.918 +00:00   [Error] [ReqId: ] Artifact /tmp/FhirArtifactCache-1.6.0-Hl7.Fhir.R4.Specification/specification_Fhir4_0/dataelements.xml could not be imported. Error message: Found multiple conflicting resources with the same resource uri identifier.</p>\n<p>Url: <a href=\"http://hl7.org/fhir/StructureDefinition/de-Quantity.comparator\">http://hl7.org/fhir/StructureDefinition/de-Quantity.comparator</a><br>\n   File: /tmp/FhirArtifactCache-1.6.0-Hl7.Fhir.R4.Specification/specification_Fhir4_0/dataelements.xml<br>\n   File: /tmp/FhirArtifactCache-1.6.0-Hl7.Fhir.R4.Specification/specification_Fhir4_0/dataelements.xml<br>\n   File: /tmp/FhirArtifactCache-1.6.0-Hl7.Fhir.R4.Specification/specification_Fhir4_0/dataelements.xml<br>\n.<br>\n.<br>\n.<br>\n.<br>\n2020-09-14 14:34:43.905 +00:00   [Information] [ReqId: ] Reading conformance resources from \"/app/specification_Fhir4_0.zip\" - done.<br>\n2020-09-14 14:34:43.911 +00:00   [Information] [ReqId: ] Reading conformance resources from \"/app/errataFhir4.0.zip\".<br>\n2020-09-14 14:34:43.920 +00:00   [Information] [ReqId: ] Reading conformance resources from \"/app/errataFhir4.0.zip\" - done.<br>\n2020-09-14 14:34:43.921 +00:00   [Information] [ReqId: ] Directory \"/app/vonk-import.R4\" contains no zip files to read from.<br>\n2020-09-14 14:34:43.921 +00:00   [Information] [ReqId: ] Directory \"/app/vonk-import.R4\" does not contain any individual files to read.<br>\n2020-09-14 14:34:43.921 +00:00   [Information] [ReqId: ] No Simplifier projects specified to import conformance resources from.<br>\n2020-09-14 14:36:50.720 +00:00   [Error] [ReqId: ] Error on updating resource with id \"SearchParameter/RequestGroup-instantiates-canonical-Fhir4.0\": \"SearchParameter of type Reference should contain a target element.\"<br>\n2020-09-14 14:40:01.897 +00:00   [Error] [ReqId: ] Error on updating resource with id \"CodeSystem/v2-2.7-0360-Fhir4.0\": \"An existing resource with id CodeSystem/v2-2.3.1-0360-Fhir4.0 has the same canonical url <a href=\"http://terminology.hl7.org/CodeSystem/v2-0360|2.7\">http://terminology.hl7.org/CodeSystem/v2-0360|2.7</a>.\"<br>\n2020-09-14 14:40:02.281 +00:00   [Error] [ReqId: ] Error on updating resource with id \"CodeSystem/v2-2.4-0391-Fhir4.0\": \"An existing resource with id CodeSystem/v2-2.6-0391-Fhir4.0 has the same canonical url <a href=\"http://terminology.hl7.org/CodeSystem/v2-0391|2.4\">http://terminology.hl7.org/CodeSystem/v2-0391|2.4</a>.\"<br>\n2020-09-14 14:40:02.434 +00:00   [Error] [ReqId: ] Error on updating resource with id \"CodeSystem/v2-2.4-0006-Fhir4.0\": \"An existing resource with id CodeSystem/v2-2.1-0006-Fhir4.0 has the same canonical url <a href=\"http://terminology.hl7.org/CodeSystem/v2-0006|2.4\">http://terminology.hl7.org/CodeSystem/v2-0006|2.4</a>.\"<br>\n2020-09-14 14:40:44.332 +00:00   [Information] [ReqId: ] Loading conformance resources - done<br>\n2020-09-14 14:40:44.332 +00:00   [Information] [ReqId: ] Loading conformance resources at startup - done.</p>",
        "id": 210040689,
        "sender_full_name": "Nilesh Pagare",
        "timestamp": 1600106145
    },
    {
        "content": "<p>Hi <span class=\"user-mention\" data-user-id=\"196824\">@Nilesh Pagare</span>,<br>\nThe errors you see on the log output when loading R4 conformance resources result from errors in the specification files, that contain resources with duplicate canonical URLs. This is a known error, and we have created a ticket to improve the specification See <a href=\"https://docs.fire.ly/vonk/faq.html\">https://docs.fire.ly/vonk/faq.html</a>.</p>\n<p>The second error you mention is when you try to access the /administration endpoint without specifying a resource type or operation. Vonk does not have a homepage on that endpoint as we have on the regular server. If you would request <a href=\"http://localhost:8086/administration/StructureDefinition\">http://localhost:8086/administration/StructureDefinition</a> for example, you should get a normal response. We will work on improving the message, so it will be more clear that there's nothing to see on /administration directly.</p>\n<p>Your third issue will take a bit more investigation into your configuration. The error states 'no access to this operation'. In the \"Administration.Security.AllowedNetworks\" setting you can specify the networks that are allowed to access the protected operations on /administration, that are listed in the \"Administration.Security.OperationsToBeSecured\" setting. Apparently you try to perform the reset operation from a netword that is not listed.</p>",
        "id": 210124856,
        "sender_full_name": "Mirjam Baltus",
        "timestamp": 1600174651
    },
    {
        "content": "<p>Hi <span class=\"user-mention\" data-user-id=\"191347\">@Mirjam Baltus</span> , thank you for your response. </p>\n<ol>\n<li>Any fix for the issue I reported against vonk server 3.8.0 ?</li>\n<li>what's the ETA for VonkLoader that will support R4 ? </li>\n<li>It will be great if I and the community could post issues against VonkLoader in a github repo.  Any thoughts on making this open source as it is available free? <br>\nThanks.</li>\n</ol>",
        "id": 210125768,
        "sender_full_name": "Nilesh Pagare",
        "timestamp": 1600175045
    },
    {
        "content": "<p>Hi <span class=\"user-mention\" data-user-id=\"191347\">@Mirjam Baltus</span> , any input on my request ? <br>\nThank you for your help.</p>",
        "id": 210423270,
        "sender_full_name": "Nilesh Pagare",
        "timestamp": 1600364068
    }
]