[
    {
        "content": "<p>Hello everyone,</p>\n<p>If I want to have custom StructureDefinition for my resource how to have it? using fhir-net-api?<br>\nmore generally I want to implement profiling and I want constraints on my resources according to my healthcare ecosystem.</p>",
        "id": 153881576,
        "sender_full_name": "Muhammad Abubakar Ikram",
        "timestamp": 1491821511
    },
    {
        "content": "<p>Are you asking how to validate your resource using the fhir-net-api?</p>",
        "id": 153881577,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1491821730
    },
    {
        "content": "<p>Yes, I need to know how to validate a resource using fhir-net-api?</p>",
        "id": 153881578,
        "sender_full_name": "Muhammad Abubakar Ikram",
        "timestamp": 1491822797
    },
    {
        "content": "<p>I am validating resource like this but it is always giving error on all the servers I have tested.<br>\nFhirClient obj2 = new FhirClient(\"<a href=\"http://sqlonfhir-stu3.azurewebsites.net/fhir\" target=\"_blank\" title=\"http://sqlonfhir-stu3.azurewebsites.net/fhir\">http://sqlonfhir-stu3.azurewebsites.net/fhir</a>\");<br>\n                CapabilityStatement res = obj2.CapabilityStatement();<br>\n                Validator obj = new Validator();<br>\n                var a = obj.Validate(res);</p>",
        "id": 153881692,
        "sender_full_name": "Muhammad Abubakar Ikram",
        "timestamp": 1491895188
    },
    {
        "content": "<p>Hi Muhammad, although the validator is present in the STU3 distribution, most of its code is still DSTU2 - we just made it compile.  We are updating that part of the code over the coming weeks, and it will be ready before may this year.</p>",
        "id": 153881699,
        "sender_full_name": "Ewout Kramer",
        "timestamp": 1491898949
    },
    {
        "content": "<p>Can I fairly bind my object models (of the resources that are <strong>compliant to my custom profiles</strong>) to the object models in the fhir-net-api? </p>",
        "id": 153882026,
        "sender_full_name": "Muhammad Abubakar Ikram",
        "timestamp": 1491977789
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191367\">@Brian Postlethwaite</span> Could you please help me? \"Can I fairly bind my object models (of the resources that are compliant to my custom profiles) to the object models in the fhir-net-api?\"</p>",
        "id": 153884898,
        "sender_full_name": "Muhammad Abubakar Ikram",
        "timestamp": 1492420388
    },
    {
        "content": "<p>Not sure what you're asking there</p>",
        "id": 153885411,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1492737744
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191367\">@Brian Postlethwaite</span>  Sir I want to extend some of the default resources in FHIR such as Patient. I am using fhir-net-api stu3 that contains all the default models for all the resources in the FHIR. If I want to extend patient, for example, I want to add a new field to the patient resource how can I achieve that? How can I have customized model in fhir-net-api?</p>",
        "id": 153954495,
        "sender_full_name": "Muhammad Abubakar Ikram",
        "timestamp": 1524741122
    },
    {
        "content": "<p>you should use extensions</p>",
        "id": 153954500,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1524743535
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> okay Sir, one thing more Let's say I have created StructureDefinition ExtendedPatient with some extensions then my FHIR server will also have the standard Patient resource? or my ExtendedPatient will overwrite the standard Patient?</p>",
        "id": 153954516,
        "sender_full_name": "Muhammad Abubakar Ikram",
        "timestamp": 1524750830
    },
    {
        "content": "<p>Hi <span class=\"user-mention\" data-user-id=\"193100\">@Muhammad Abubakar</span>, you could configure your server to reject patient resources that do not conform to your ExtendedPatient profile. The server can advertise this behavior to clients via it's CapabilityStatement:<br>\n<a href=\"http://hl7.org/fhir/capabilitystatement-definitions.html#CapabilityStatement.rest.resource.profile\" target=\"_blank\" title=\"http://hl7.org/fhir/capabilitystatement-definitions.html#CapabilityStatement.rest.resource.profile\">http://hl7.org/fhir/capabilitystatement-definitions.html#CapabilityStatement.rest.resource.profile</a><br>\nBTW Vonk, the .NET FHIR Server, allows you to upload your profiles to a special Administration endpoint. Vonk will then automatically use those profiles for instance validation, and update the CapabilityStatement accordingly, at runtime and without restarting the server.</p>",
        "id": 153954946,
        "sender_full_name": "Michel Rutten",
        "timestamp": 1525077353
    },
    {
        "content": "<p>I am trying to create a profile based on Patient with forge and trying to use it in fhir-net-api. </p>\n<p>But, I am facing some issues.</p>\n<p>I am just adding a custom email extension in Patient profile<br>\nExtension:  <a href=\"https://simplifier.net/chs/EmailExtension\" target=\"_blank\" title=\"https://simplifier.net/chs/EmailExtension\">https://simplifier.net/chs/EmailExtension</a><br>\nProfile: <a href=\"https://simplifier.net/chs/CHSPatient\" target=\"_blank\" title=\"https://simplifier.net/chs/CHSPatient\">https://simplifier.net/chs/CHSPatient</a></p>\n<p>Issues:<br>\n1. When I am validating patient profile on simplifier it gives error <br>\nInvalid : Instance failed constraint sdf-20 \"No slicing on the root element\"<br>\nStructureDefinition.differential[0]</p>\n<p>2. When I am adding the structure definition of the patient profile in profiles-resources.xml in fhir-net-api, after updating templates it gives me a new class against CHSPatient, but when I make an object of CHSPatient it is missing email extension and also all other patient properties.</p>",
        "id": 153955377,
        "sender_full_name": "Muhammad Abubakar Ikram",
        "timestamp": 1525269552
    },
    {
        "content": "<p>Hi <span class=\"user-mention\" data-user-id=\"193100\">@Muhammad Abubakar</span>, concerning your questions:<br>\nAd 1) This is caused by an invalid invariant fhirpath expression in the STU3 FHIR specification.<br>\nThe current expression tests the first element in the differential component, however as the differential is sparse, the first element in the list is not guaranteed to be the root element.<br>\nSee:<br>\n<a href=\"https://github.com/ewoutkramer/fhir-net-api/issues/424\" target=\"_blank\" title=\"https://github.com/ewoutkramer/fhir-net-api/issues/424\">https://github.com/ewoutkramer/fhir-net-api/issues/424</a><br>\n<a href=\"https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=13768&amp;start=0\" target=\"_blank\" title=\"https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=13768&amp;start=0\">https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=13768&amp;start=0</a><br>\nThis issue has already been reported and will be fixed in FHIR R4.<br>\nFor now, you can safely ignore this validation message.<br>\nAd 2) Please be aware that the T4 templates in the FHIR .NET API are specifically designed to generate the PoCo classes for the core resources and datatypes. However the templates were never designed to provide generic profile-based code generation. Also, the T4 template logic resembles spaghetti code and is not very maintainable. We may update the templates to another technology in the future.</p>",
        "id": 153955384,
        "sender_full_name": "Michel Rutten",
        "timestamp": 1525272063
    },
    {
        "content": "<p>(Not by me though ;) - however I could clean them up a bit, but not much return on that)</p>",
        "id": 153955542,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1525303222
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191336\">@Michel Rutten</span> So, is there any other way that I can get my custom resource classes in fhir-net-api?</p>\n<p>I am getting an another issue with forge that when I used to import the patient profile in forge from simplifier (profile link I have shared in previous message) it gives error on extension url refrence and it cannot resolve the url. </p>\n<p>Another enhancement you can do with forge is that while importing the profile when we connect to the simplifier account it automatically selects the first entry it should not select first entry by default and the select button should be disabled that time</p>",
        "id": 153955586,
        "sender_full_name": "Muhammad Abubakar Ikram",
        "timestamp": 1525323142
    },
    {
        "content": "<p>Thought I'd share some more detailed comments on the how I personally use the fhir-net API with extentions, without doing the whole, lets create a new Patient that has my properties in it and try and shoe-horn it into the fhir serializers.<br>\n<a href=\"https://brianpos.com/2018/05/03/code-generation-fhir-custom-resources/\" target=\"_blank\" title=\"https://brianpos.com/2018/05/03/code-generation-fhir-custom-resources/\">https://brianpos.com/2018/05/03/code-generation-fhir-custom-resources/</a><br>\n<span class=\"user-mention\" data-user-id=\"191319\">@James Agnew</span> , interested if this would also apply to the HAPI java client too?</p>",
        "id": 153955637,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1525341903
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191367\">@Brian Postlethwaite</span> Sir, it is a very good approach that solves the problem of having custom properties in a predefined resource. </p>\n<p>Sir, I have another requirement of also having a totally custom resource in FHIR. Sir can you please also guide me how I can achieve that?</p>",
        "id": 153955927,
        "sender_full_name": "Muhammad Abubakar Ikram",
        "timestamp": 1525428474
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191375\">@Alexander Henket</span> Would be great to have a extension package on top of the fhir-net-api based on the NL Profiles!? I know at least 1 PGO implementer that will use that :-)</p>",
        "id": 153955948,
        "sender_full_name": "Michael van der Zel",
        "timestamp": 1525434108
    },
    {
        "content": "<p>I don't think Java has helper methods. I certainly use them extensively in pascal</p>",
        "id": 153956087,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1525492585
    },
    {
        "content": "<p>I think in Java it has to be a wrapper class instead. generating these from profiles is on my list.</p>",
        "id": 153956088,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1525492617
    },
    {
        "content": "<p>btw, one thing to point out: you don't always know what profile a resource conforms to, nor will you know when reading a bundle. Nor will the profiles conform to a strict heirarchy. So trying to define subclasses doesn't match reality, but it's the hammer OO programmers are trained to know about ...</p>",
        "id": 153956089,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1525492691
    },
    {
        "content": "<p>Thanks, that was the other point I forgot to include in the post, will add an update to it.</p>",
        "id": 153956122,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1525499738
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191367\">@Brian Postlethwaite</span>  if we use extensions like this in resources using fhir-net-api then how we can accommodate custom profiles? because the patient will have custom fields as well. Will we have their respective custom profiles on the StructureDefinition endpoint? or we will not have their respective custom profiles on the StructureDefinition? <br>\nbecause we have to validate the resources against the profiles</p>\n<p>static class UsCorePatient<br>\n{<br>\n    public static Code BirthSex(this Hl7.Fhir.Model.Patient me)<br>\n    {   <br>\n        return me.GetExtensionValue&lt;Code&gt;(\"[URL birthsex extension]\");<br>\n    }<br>\n    public static void BirthSex(this Hl7.Fhir.Model.Patient me,<br>\n            Code value)<br>\n    {<br>\n        me.SetExtension(\"[URL birthsex extension]\", value);<br>\n    }<br>\n}</p>",
        "id": 153956328,
        "sender_full_name": "Muhammad Abubakar Ikram",
        "timestamp": 1525685857
    },
    {
        "content": "<p>A resource can conform to multiple profiles at the same time, and this IS how profiles are implemented in the fhir net api, and if you want to declare that your instance conforms to a specific profile, add that to the patient.meta.profile.Add(\"<a href=\"http://profile\" target=\"_blank\" title=\"http://profile\">http://profile</a> etc,...\");<br>\nA structure definition will define exactly what those URLs that I have included above are for the custom patient profile.</p>",
        "id": 153956336,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1525691184
    },
    {
        "content": "<p>This is going to be even more (lexically) clean with the introduction of mixin extension properties in C# 8. (<a href=\"https://www.infoq.com/news/2017/08/CSharp-8\" target=\"_blank\" title=\"https://www.infoq.com/news/2017/08/CSharp-8\">https://www.infoq.com/news/2017/08/CSharp-8</a>). We'll have to see whether this makes it into C# 8 though.......</p>",
        "id": 153956593,
        "sender_full_name": "Ewout Kramer",
        "timestamp": 1525710086
    }
]