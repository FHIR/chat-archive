[
    {
        "content": "<p>Has anyone come across this error when using the FhirClient to create or read (possible other actions but I haven't tested) on a remote server?<br>\nI am getting an exception of \"String was not recognized as a valid DateTime.\" from the FhirClient but the create is successful on the fhir server.<br>\nOnly occurs when accessing a remote server over https. Locally using http I'm not getting the error.</p>",
        "id": 153970692,
        "sender_full_name": "Paul Watt",
        "timestamp": 1529476143
    },
    {
        "content": "<p>Hi <span class=\"user-mention\" data-user-id=\"194153\">@Paul Watt</span>, I haven't seen this before. Could you provide an example of a rejected DateTime value?</p>",
        "id": 153970869,
        "sender_full_name": "Michel Rutten",
        "timestamp": 1529521392
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191336\">@Michel Rutten</span>  That's the thing - there is no DateTime value. I create a patient resource with no DateTime values and send as a create and the response from FhirClient throws this error but the resource is successfully added at the remote end. The response would only contain a meta.lastupdated such as \"2018-06-20T06:22:08.27+00:00\" .</p>",
        "id": 153970903,
        "sender_full_name": "Paul Watt",
        "timestamp": 1529550758
    },
    {
        "content": "<p>Looks like it is the server assigned meta.lastupdated that is throwing the error when the returned resource is initialized. I removed the lastupdated from the database and no longer get the error.<br>\nIt's generated by this:</p>",
        "id": 153970919,
        "sender_full_name": "Paul Watt",
        "timestamp": 1529572650
    },
    {
        "content": "<p>fhir.FhirDateTime dt = new fhir.FhirDateTime(DateTime.Now);<br>\nmeta.lastupdated = dt.ToDateTimeOffset();<br>\nShouldn't this return the correct format?</p>",
        "id": 153970920,
        "sender_full_name": "Paul Watt",
        "timestamp": 1529572710
    },
    {
        "content": "<p>For anyone who gets this error from FhirClient - check your HTTP header Last-Modified format. The FhirClient was attempting to parse this and it wasn't in the expected format. That was the cause of the exception rather than than the resource itself.</p>",
        "id": 153971038,
        "sender_full_name": "Paul Watt",
        "timestamp": 1529628943
    },
    {
        "content": "<p>Might be a good idea if we can provide more detail in that exception to make that easier to detect.<br>\nCan you share where that is occurring so that it can be checked.</p>",
        "id": 153971268,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1529692110
    },
    {
        "content": "<p>I saw it when using FhirClient.Create() and FhirClient.Read() . It would throw this:</p>\n<p>{System.FormatException: String was not recognized as a valid DateTime.<br>\n   at Hl7.Fhir.Rest.TaskExtensions.WaitResult<a href=\"http://Task`1%20task\" target=\"_blank\" title=\"http://Task`1%20task\">T</a></p>\n<p>Probably from this:<br>\n            if (!String.IsNullOrEmpty(response.Headers[HttpUtil.LASTMODIFIED]))<br>\n                    result.Response.LastModified = DateTimeOffset.Parse(response.Headers[HttpUtil.LASTMODIFIED]);</p>\n<p>in Hl7.Fhir.Core/Rest/HttpToEntryExtensions.cs</p>",
        "id": 153971409,
        "sender_full_name": "Paul Watt",
        "timestamp": 1529903040
    },
    {
        "content": "<p><a href=\"https://github.com/ewoutkramer/fhir-net-api/issues/631\" target=\"_blank\" title=\"https://github.com/ewoutkramer/fhir-net-api/issues/631\">https://github.com/ewoutkramer/fhir-net-api/issues/631</a></p>",
        "id": 153972822,
        "sender_full_name": "Ewout Kramer",
        "timestamp": 1530531808
    },
    {
        "content": "<p>I'd enjoy a PR ;-)</p>",
        "id": 153972823,
        "sender_full_name": "Ewout Kramer",
        "timestamp": 1530531820
    }
]