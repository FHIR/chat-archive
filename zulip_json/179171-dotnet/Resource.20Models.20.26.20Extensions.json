[
    {
        "content": "<p>My organization is unclear on how to properly create a \"CoveragePlan\" resource.<br>\nFor reference, the documentation is here: <a href=\"http://hl7.org/fhir/us/Davinci-drug-formulary/StructureDefinition-usdf-CoveragePlan.html\">http://hl7.org/fhir/us/Davinci-drug-formulary/StructureDefinition-usdf-CoveragePlan.html</a></p>\n<p>A couple questions we have are:<br>\n1) This resource has a number of required \"extensions\".  What exactly does this look like in .NET? Something like the following?</p>\n<p>List list = new Hl7.Fhir.Model.List();<br>\n  list.addExtension(&lt;extension-uri&gt;, &lt;some-value&gt;);</p>\n<p>2) How closely should the JSON of our CoveragePlan resource (which is a HL7.Fhir.Model.List) match the the example JSON provided on <a href=\"http://hl7.org\">hl7.org</a>?  I ask this because the <strong>HL7.Fhir.Model.List </strong> model, when serialized, does not seem to match up with the example provided here: <a href=\"http://hl7.org/fhir/us/Davinci-drug-formulary/List-CoveragePlanV3004t.json.html\">http://hl7.org/fhir/us/Davinci-drug-formulary/List-CoveragePlanV3004t.json.html</a></p>\n<p>Any insight into these questions is very much appreciated.</p>",
        "id": 217715810,
        "sender_full_name": "JA",
        "timestamp": 1606195313
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"365024\">JA</span> <a href=\"#narrow/stream/179171-dotnet/topic/Resource.20Models.20.26.20Extensions/near/217715810\">said</a>:</p>\n<blockquote>\n<p>1) This resource has a number of required \"extensions\".  What exactly does this look like in .NET? Something like the following?</p>\n</blockquote>\n<p>The code you mention is correct for adding a simple extension. The CoveragePlan also uses a complex/nested extension, and you will need to build this structure first, before adding it to the List resource:</p>\n<div class=\"codehilite\" data-code-language=\"C#\"><pre><span></span><code>            <span class=\"kt\">var</span> <span class=\"n\">x</span> <span class=\"p\">=</span> <span class=\"k\">new</span> <span class=\"n\">Extension</span><span class=\"p\">();</span>\n            <span class=\"c1\">// fill it with the main canonical URL of the definition</span>\n            <span class=\"n\">x</span><span class=\"p\">.</span><span class=\"n\">Url</span> <span class=\"p\">=</span> <span class=\"s\">\"http://hl7.org/fhir/us/davinci-drug-formulary/StructureDefinition/usdf-DrugTierDefinition-extension\"</span><span class=\"p\">;</span>\n            <span class=\"c1\">// add the first sub-extension</span>\n            <span class=\"n\">x</span><span class=\"p\">.</span><span class=\"n\">AddExtension</span><span class=\"p\">(</span><span class=\"s\">\"drugTierID\"</span><span class=\"p\">,</span> <span class=\"k\">new</span> <span class=\"n\">CodeableConcept</span><span class=\"p\">(&lt;</span><span class=\"n\">system</span><span class=\"p\">&gt;,&lt;</span><span class=\"k\">value</span><span class=\"p\">&gt;));</span>\n            <span class=\"c1\">// etc</span>\n            <span class=\"n\">list</span><span class=\"p\">.</span><span class=\"n\">Extension</span><span class=\"p\">.</span><span class=\"n\">Add</span><span class=\"p\">(</span><span class=\"n\">x</span><span class=\"p\">);</span>\n</code></pre></div>\n<blockquote>\n<p>2) How closely should the JSON of our CoveragePlan resource (which is a HL7.Fhir.Model.List) match the the example JSON provided on <a href=\"http://hl7.org\">hl7.org</a>?  I ask this because the <strong>HL7.Fhir.Model.List </strong> model, when serialized, does not seem to match up with the example provided here: <a href=\"http://hl7.org/fhir/us/Davinci-drug-formulary/List-CoveragePlanV3004t.json.html\">http://hl7.org/fhir/us/Davinci-drug-formulary/List-CoveragePlanV3004t.json.html</a></p>\n</blockquote>\n<p>It should at least resemble the example json, and I hope it does after you have constructed the complex extension correctly. If not, please give us some more details on the differences between your json and the example.</p>",
        "id": 217725058,
        "sender_full_name": "Mirjam Baltus",
        "timestamp": 1606206740
    },
    {
        "content": "<p>And by using the fhir NuGet packages, you don't need to worry about the json or xml formatting, as those libs handle all that properly.</p>",
        "id": 217959102,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1606356279
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191347\">Mirjam Baltus</span> <a href=\"#narrow/stream/179171-dotnet/topic/Resource.20Models.20.26.20Extensions/near/217725058\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"365024\">JA</span> <a href=\"#narrow/stream/179171-dotnet/topic/Resource.20Models.20.26.20Extensions/near/217715810\">said</a>:</p>\n<blockquote>\n<p>1) This resource has a number of required \"extensions\".  What exactly does this look like in .NET? Something like the following?</p>\n</blockquote>\n<p>The code you mention is correct for adding a simple extension. The CoveragePlan also uses a complex/nested extension, and you will need to build this structure first, before adding it to the List resource:</p>\n<div class=\"codehilite\" data-code-language=\"C#\"><pre><span></span><code>            <span class=\"kt\">var</span> <span class=\"n\">x</span> <span class=\"p\">=</span> <span class=\"k\">new</span> <span class=\"n\">Extension</span><span class=\"p\">();</span>\n            <span class=\"c1\">// fill it with the main canonical URL of the definition</span>\n            <span class=\"n\">x</span><span class=\"p\">.</span><span class=\"n\">Url</span> <span class=\"p\">=</span> <span class=\"s\">\"http://hl7.org/fhir/us/davinci-drug-formulary/StructureDefinition/usdf-DrugTierDefinition-extension\"</span><span class=\"p\">;</span>\n            <span class=\"c1\">// add the first sub-extension</span>\n            <span class=\"n\">x</span><span class=\"p\">.</span><span class=\"n\">AddExtension</span><span class=\"p\">(</span><span class=\"s\">\"drugTierID\"</span><span class=\"p\">,</span> <span class=\"k\">new</span> <span class=\"n\">CodeableConcept</span><span class=\"p\">(&lt;</span><span class=\"n\">system</span><span class=\"p\">&gt;,&lt;</span><span class=\"k\">value</span><span class=\"p\">&gt;));</span>\n            <span class=\"c1\">// etc</span>\n            <span class=\"n\">list</span><span class=\"p\">.</span><span class=\"n\">Extension</span><span class=\"p\">.</span><span class=\"n\">Add</span><span class=\"p\">(</span><span class=\"n\">x</span><span class=\"p\">);</span>\n</code></pre></div>\n<blockquote>\n<p>2) How closely should the JSON of our CoveragePlan resource (which is a HL7.Fhir.Model.List) match the the example JSON provided on <a href=\"http://hl7.org\">hl7.org</a>?  I ask this because the <strong>HL7.Fhir.Model.List </strong> model, when serialized, does not seem to match up with the example provided here: <a href=\"http://hl7.org/fhir/us/Davinci-drug-formulary/List-CoveragePlanV3004t.json.html\">http://hl7.org/fhir/us/Davinci-drug-formulary/List-CoveragePlanV3004t.json.html</a></p>\n</blockquote>\n<p>It should at least resemble the example json, and I hope it does after you have constructed the complex extension correctly. If not, please give us some more details on the differences between your json and the example.</p>\n</blockquote>\n<p>As JA mentioned, our Extension model when serialized doesn't match up with the example from <a href=\"http://hl7.org/fhir/us/Davinci-drug-formulary/List-CoveragePlanV3004t.json.html\">http://hl7.org/fhir/us/Davinci-drug-formulary/List-CoveragePlanV3004t.json.html</a>. Could it be because we're using Hl7.Fhir.R4 package version 1.9.0 and the example is using STU 1?</p>\n<p>Here is an example code extension in a List:</p>\n<div class=\"codehilite\" data-code-language=\"C#\"><pre><span></span><code><span class=\"n\">List</span> <span class=\"n\">l</span> <span class=\"p\">=</span> <span class=\"k\">new</span> <span class=\"n\">List</span><span class=\"p\">();</span>\n<span class=\"n\">l</span><span class=\"p\">.</span><span class=\"n\">Status</span> <span class=\"p\">=</span> <span class=\"n\">List</span><span class=\"p\">.</span><span class=\"n\">ListStatus</span><span class=\"p\">.</span><span class=\"n\">Current</span><span class=\"p\">;</span>\n<span class=\"n\">l</span><span class=\"p\">.</span><span class=\"n\">Mode</span> <span class=\"p\">=</span> <span class=\"n\">ListMode</span><span class=\"p\">.</span><span class=\"n\">Snapshot</span><span class=\"p\">;</span>\n<span class=\"n\">l</span><span class=\"p\">.</span><span class=\"n\">Title</span> <span class=\"p\">=</span> <span class=\"s\">\"All Coverage Plans\"</span><span class=\"p\">;</span>\n<span class=\"n\">l</span><span class=\"p\">.</span><span class=\"n\">Meta</span> <span class=\"p\">=</span> <span class=\"k\">new</span> <span class=\"n\">Meta</span><span class=\"p\">()</span> <span class=\"p\">{</span> <span class=\"n\">Profile</span> <span class=\"p\">=</span> <span class=\"k\">new</span> <span class=\"kt\">string</span><span class=\"p\">[]</span> <span class=\"p\">{</span> <span class=\"s\">\"http://hl7.org/fhir/us/davinci-drug-formulary/StructureDefinition/usdf-CoveragePlan\"</span> <span class=\"p\">}</span> <span class=\"p\">};</span>\n<span class=\"n\">l</span><span class=\"p\">.</span><span class=\"n\">Id</span> <span class=\"p\">=</span> <span class=\"s\">\"CoveragePlans\"</span><span class=\"p\">;</span>\n<span class=\"n\">l</span><span class=\"p\">.</span><span class=\"n\">Entry</span> <span class=\"p\">=</span> <span class=\"k\">new</span> <span class=\"n\">List</span><span class=\"p\">&lt;</span><span class=\"n\">List</span><span class=\"p\">.</span><span class=\"n\">EntryComponent</span><span class=\"p\">&gt;();</span>\n\n<span class=\"n\">l</span><span class=\"p\">.</span><span class=\"n\">AddExtension</span><span class=\"p\">(</span><span class=\"s\">\"DrugTierDefinition\"</span><span class=\"p\">,</span> <span class=\"k\">new</span> <span class=\"n\">CodeableConcept</span><span class=\"p\">(</span><span class=\"s\">\"http://hl7.org/fhir/us/davinci-drug-formulary/StructureDefinition/usdf-DrugTierDefinition-extension\"</span><span class=\"p\">,</span> <span class=\"s\">\"code\"</span><span class=\"p\">));</span>\n</code></pre></div>\n<p>Our extension output (Hl7.Fhir.R4 (1.9.0)):</p>\n<div class=\"codehilite\" data-code-language=\"JSON\"><pre><span></span><code><span class=\"s2\">\"extension\"</span><span class=\"err\">:</span> <span class=\"p\">[</span>\n          <span class=\"p\">{</span>\n            <span class=\"nt\">\"url\"</span><span class=\"p\">:</span> <span class=\"s2\">\"DrugTierDefinition\"</span><span class=\"p\">,</span>\n            <span class=\"nt\">\"value\"</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n              <span class=\"nt\">\"coding\"</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n                <span class=\"p\">{</span>\n                  <span class=\"nt\">\"systemElement\"</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n                    <span class=\"nt\">\"value\"</span><span class=\"p\">:</span> <span class=\"s2\">\"http://hl7.org/fhir/us/davinci-drug-formulary/StructureDefinition/usdf-DrugTierDefinition-extension\"</span><span class=\"p\">,</span>\n                    <span class=\"nt\">\"elementId\"</span><span class=\"p\">:</span> <span class=\"kc\">null</span><span class=\"p\">,</span>\n                    <span class=\"nt\">\"extension\"</span><span class=\"p\">:</span> <span class=\"p\">[]</span>\n                  <span class=\"p\">},</span>\n                  <span class=\"nt\">\"versionElement\"</span><span class=\"p\">:</span> <span class=\"kc\">null</span><span class=\"p\">,</span>\n                  <span class=\"nt\">\"codeElement\"</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n                    <span class=\"nt\">\"value\"</span><span class=\"p\">:</span> <span class=\"s2\">\"code\"</span><span class=\"p\">,</span>\n                    <span class=\"nt\">\"elementId\"</span><span class=\"p\">:</span> <span class=\"kc\">null</span><span class=\"p\">,</span>\n                    <span class=\"nt\">\"extension\"</span><span class=\"p\">:</span> <span class=\"p\">[]</span>\n                  <span class=\"p\">},</span>\n                  <span class=\"nt\">\"displayElement\"</span><span class=\"p\">:</span> <span class=\"kc\">null</span><span class=\"p\">,</span>\n                  <span class=\"nt\">\"userSelectedElement\"</span><span class=\"p\">:</span> <span class=\"kc\">null</span><span class=\"p\">,</span>\n                  <span class=\"nt\">\"elementId\"</span><span class=\"p\">:</span> <span class=\"kc\">null</span><span class=\"p\">,</span>\n                  <span class=\"nt\">\"extension\"</span><span class=\"p\">:</span> <span class=\"p\">[]</span>\n                <span class=\"p\">}</span>\n              <span class=\"p\">],</span>\n              <span class=\"nt\">\"textElement\"</span><span class=\"p\">:</span> <span class=\"kc\">null</span><span class=\"p\">,</span>\n              <span class=\"nt\">\"elementId\"</span><span class=\"p\">:</span> <span class=\"kc\">null</span><span class=\"p\">,</span>\n              <span class=\"nt\">\"extension\"</span><span class=\"p\">:</span> <span class=\"p\">[]</span>\n            <span class=\"p\">},</span>\n            <span class=\"nt\">\"elementId\"</span><span class=\"p\">:</span> <span class=\"kc\">null</span><span class=\"p\">,</span>\n            <span class=\"nt\">\"extension\"</span><span class=\"p\">:</span> <span class=\"p\">[]</span>\n          <span class=\"p\">}</span>\n        <span class=\"p\">]</span>\n</code></pre></div>\n<p>Sample from <a href=\"http://hl7.org/fhir/us/Davinci-drug-formulary/List-CoveragePlanV3004t.json.html\">http://hl7.org/fhir/us/Davinci-drug-formulary/List-CoveragePlanV3004t.json.html</a>:<br>\n<a href=\"/user_uploads/10155/fDBZRG4LY76asrW16739NUu0/fhir_stu_extension.png\">fhir_stu_extension.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/fDBZRG4LY76asrW16739NUu0/fhir_stu_extension.png\" title=\"fhir_stu_extension.png\"><img src=\"/user_uploads/10155/fDBZRG4LY76asrW16739NUu0/fhir_stu_extension.png\"></a></div>",
        "id": 219634057,
        "sender_full_name": "Ger Vang",
        "timestamp": 1607707245
    },
    {
        "content": "<p>The STU1 mentioned in the Implementation Guide is just the version of the IG, not the FHIR version. The IG is based on FHIR R4, so if you use the Hl7.Fhir.R4 library, that should give the correct result.<br>\nHowever, I see in your example output that there are many fields that do not resemble correct FHIR data - it even has empty fields which FHIR does not allow. Question: do you use the Hl7.Fhir.Serialization library and the FhirJsonSerializer? If not, you will not likely end up with correct FHIR json.</p>",
        "id": 219646204,
        "sender_full_name": "Mirjam Baltus",
        "timestamp": 1607712795
    },
    {
        "content": "<p>We are not using Hl7.Fhir.Serialization and FhirJsonSerializer.  I will install the package and use FhirJsonSerializer to see if we can get it similar to the sample.</p>\n<p>Also, thank you for clarifying the STU1.</p>",
        "id": 219654115,
        "sender_full_name": "Ger Vang",
        "timestamp": 1607716604
    },
    {
        "content": "<p>The serializer should actually already be in the R4 library, just add a using statement with Hl7.Fhir.Serialization to the code and you should be able to find the serializer plus methods.<br>\nAnd I'm happy to help, those versionings have tripped me up multiple times as well!</p>",
        "id": 219656708,
        "sender_full_name": "Mirjam Baltus",
        "timestamp": 1607717909
    },
    {
        "content": "<p>I actually had to install Hl7.Fhir.Serialization separately and upgrade Hl7.Fhir.R4 1.9.0 to 2.0.1 otherwise there will be runtime error since Hl7.Fhir.Serialization is on 2.0.1.  The format looks good now.</p>\n<p><a href=\"/user_uploads/10155/a-hIYMnzMCANN6b3xDrLrRca/fhir_npm.png\">fhir_npm.png</a></p>\n<p>I'm trying to add these extensions from <a href=\"http://hl7.org/fhir/us/Davinci-drug-formulary/StructureDefinition-usdf-CoveragePlan.html\">http://hl7.org/fhir/us/Davinci-drug-formulary/StructureDefinition-usdf-CoveragePlan.html</a> but I'm unable to find \"url, system, code and display\".</p>\n<p><a href=\"http://hl7.org/fhir/us/davinci-drug-formulary/StructureDefinition/usdf-DrugTierDefinition-extension\">http://hl7.org/fhir/us/davinci-drug-formulary/StructureDefinition/usdf-DrugTierDefinition-extension</a><br>\n<a href=\"http://hl7.org/fhir/us/davinci-drug-formulary/StructureDefinition/usdf-Network-extension\">http://hl7.org/fhir/us/davinci-drug-formulary/StructureDefinition/usdf-Network-extension</a><br>\n<a href=\"http://hl7.org/fhir/us/davinci-drug-formulary/StructureDefinition/usdf-SummaryURL-extension\">http://hl7.org/fhir/us/davinci-drug-formulary/StructureDefinition/usdf-SummaryURL-extension</a><br>\n<a href=\"http://hl7.org/fhir/us/davinci-drug-formulary/StructureDefinition/usdf-PlanIDType-extension\">http://hl7.org/fhir/us/davinci-drug-formulary/StructureDefinition/usdf-PlanIDType-extension</a></p>",
        "id": 219661673,
        "sender_full_name": "Ger Vang",
        "timestamp": 1607720484
    },
    {
        "content": "<p>Looking at that profile it has some simple and complex extensions.<br>\nI'm assuming that you've got the simple ones working fine with<br>\n<code>list.AddExtension(urlX, new FhirString(\"stuff\"));</code></p>\n<p>Complex extensions are made by adding extensions like the above to an extension, and then adding the comolex extension itself in place of the new fhir strng.</p>",
        "id": 219667781,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1607723957
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191367\">Brian Postlethwaite</span> <a href=\"#narrow/stream/179171-dotnet/topic/Resource.20Models.20.26.20Extensions/near/219667781\">said</a>:</p>\n<blockquote>\n<p>Looking at that profile it has some simple and complex extensions.<br>\nI'm assuming that you've got the simple ones working fine with<br>\n<code>list.AddExtension(urlX, new FhirString(\"stuff\"));</code></p>\n<p>Complex extensions are made by adding extensions like the above to an extension, and then adding the comolex extension itself in place of the new fhir strng.</p>\n</blockquote>\n<p>Are there any examples of how to do a complex extension?</p>",
        "id": 219857969,
        "sender_full_name": "Ger Vang",
        "timestamp": 1607960174
    },
    {
        "content": "<p>We ended up doing something like this.  The serialized data looks similar to the sample output but I do have a few more questions.</p>\n<p>What is the identifier value?<br>\nWhat is the Entry Item ResourceReference value?</p>\n<div class=\"codehilite\" data-code-language=\"C#\"><pre><span></span><code>            <span class=\"n\">List</span> <span class=\"n\">l</span> <span class=\"p\">=</span> <span class=\"k\">new</span> <span class=\"n\">List</span><span class=\"p\">();</span>\n            <span class=\"n\">l</span><span class=\"p\">.</span><span class=\"n\">Identifier</span> <span class=\"p\">=</span> <span class=\"k\">new</span> <span class=\"n\">List</span><span class=\"p\">&lt;</span><span class=\"n\">Identifier</span><span class=\"p\">&gt;()</span> <span class=\"p\">{</span> <span class=\"k\">new</span> <span class=\"n\">Identifier</span><span class=\"p\">()</span> <span class=\"p\">{</span> <span class=\"n\">Value</span> <span class=\"p\">=</span> <span class=\"s\">\"\"</span> <span class=\"p\">}</span> <span class=\"p\">};</span> <span class=\"c1\">// what is this value?</span>\n            <span class=\"n\">l</span><span class=\"p\">.</span><span class=\"n\">Entry</span><span class=\"p\">.</span><span class=\"n\">Add</span><span class=\"p\">(</span><span class=\"k\">new</span> <span class=\"n\">List</span><span class=\"p\">.</span><span class=\"n\">EntryComponent</span><span class=\"p\">()</span> <span class=\"p\">{</span> <span class=\"n\">Item</span> <span class=\"p\">=</span> <span class=\"k\">new</span> <span class=\"n\">ResourceReference</span><span class=\"p\">(</span><span class=\"s\">\"\"</span><span class=\"p\">)</span> <span class=\"p\">});</span> <span class=\"c1\">// what is this value?</span>\n\n            <span class=\"n\">Extension</span> <span class=\"n\">drugTier</span> <span class=\"p\">=</span> <span class=\"k\">new</span> <span class=\"n\">Extension</span><span class=\"p\">();</span>\n            <span class=\"n\">drugTier</span><span class=\"p\">.</span><span class=\"n\">Url</span> <span class=\"p\">=</span> <span class=\"s\">\"http://hl7.org/fhir/us/davinci-drug-formulary/StructureDefinition/usdf-DrugTierDefinition-extension\"</span><span class=\"p\">;</span>\n\n            <span class=\"n\">drugTier</span><span class=\"p\">.</span><span class=\"n\">Extension</span><span class=\"p\">.</span><span class=\"n\">Add</span><span class=\"p\">(</span><span class=\"k\">new</span> <span class=\"n\">Extension</span><span class=\"p\">(</span><span class=\"s\">\"drugTierID\"</span><span class=\"p\">,</span> <span class=\"k\">new</span> <span class=\"n\">CodeableConcept</span><span class=\"p\">(</span><span class=\"s\">\"http://hl7.org/fhir/us/davinci-drug-formulary/StructureDefinition/usdf-DrugTierCS\"</span><span class=\"p\">,</span> <span class=\"s\">\"generic\"</span><span class=\"p\">,</span> <span class=\"s\">\"Generic\"</span><span class=\"p\">)));</span>\n            <span class=\"n\">drugTier</span><span class=\"p\">.</span><span class=\"n\">Extension</span><span class=\"p\">.</span><span class=\"n\">Add</span><span class=\"p\">(</span><span class=\"k\">new</span> <span class=\"n\">Extension</span><span class=\"p\">(</span><span class=\"s\">\"mailOrder\"</span><span class=\"p\">,</span> <span class=\"k\">new</span> <span class=\"n\">FhirBoolean</span><span class=\"p\">(</span><span class=\"k\">true</span><span class=\"p\">)));</span>\n            <span class=\"n\">l</span><span class=\"p\">.</span><span class=\"n\">Extension</span><span class=\"p\">.</span><span class=\"n\">Add</span><span class=\"p\">(</span><span class=\"n\">drugTier</span><span class=\"p\">);</span>\n\n            <span class=\"n\">l</span><span class=\"p\">.</span><span class=\"n\">Extension</span><span class=\"p\">.</span><span class=\"n\">Add</span><span class=\"p\">(</span><span class=\"k\">new</span> <span class=\"n\">Extension</span><span class=\"p\">(</span><span class=\"s\">\"http://hl7.org/fhir/us/davinci-drug-formulary/StructureDefinition/usdf-Network-extension\"</span><span class=\"p\">,</span> <span class=\"k\">new</span> <span class=\"n\">FhirString</span><span class=\"p\">(</span><span class=\"s\">\"PREFERRED\"</span><span class=\"p\">)));</span>\n            <span class=\"n\">l</span><span class=\"p\">.</span><span class=\"n\">Extension</span><span class=\"p\">.</span><span class=\"n\">Add</span><span class=\"p\">(</span><span class=\"k\">new</span> <span class=\"n\">Extension</span><span class=\"p\">(</span><span class=\"s\">\"http://hl7.org/fhir/us/davinci-drug-formulary/StructureDefinition/usdf-SummaryURL-extension\"</span><span class=\"p\">,</span> <span class=\"k\">new</span> <span class=\"n\">FhirString</span><span class=\"p\">(</span><span class=\"s\">\"http://url/to/formulary/information\"</span><span class=\"p\">)));</span>\n            <span class=\"n\">l</span><span class=\"p\">.</span><span class=\"n\">Extension</span><span class=\"p\">.</span><span class=\"n\">Add</span><span class=\"p\">(</span><span class=\"k\">new</span> <span class=\"n\">Extension</span><span class=\"p\">(</span><span class=\"s\">\"http://hl7.org/fhir/us/davinci-drug-formulary/StructureDefinition/usdf-PlanIDType-extension\"</span><span class=\"p\">,</span> <span class=\"k\">new</span> <span class=\"n\">FhirString</span><span class=\"p\">(</span><span class=\"s\">\"HIOS-PLAN-ID\"</span><span class=\"p\">)));</span>\n</code></pre></div>",
        "id": 219909761,
        "sender_full_name": "Ger Vang",
        "timestamp": 1607983982
    },
    {
        "content": "<p>The identifier will be your identifier for your CoveragePlan. There does not seem to be an agreed upon system to use for it, so any value you want the plan to be identified by would be good.<br>\nThe value of the entry should be a reference to a FormularyDrug, which is a profile on the MedicationKnowledge resource.<br>\nCheck the diagram on the homepage of the IG (<a href=\"http://hl7.org/fhir/us/Davinci-drug-formulary/index.html\">http://hl7.org/fhir/us/Davinci-drug-formulary/index.html</a>) for the concepts involved and their links.</p>",
        "id": 220030984,
        "sender_full_name": "Mirjam Baltus",
        "timestamp": 1608061099
    },
    {
        "content": "<p>Hey Mirjam, I have many questions and appreciate your continued support.</p>\n<p><span class=\"user-mention silent\" data-user-id=\"191347\">Mirjam Baltus</span> <a href=\"#narrow/stream/179171-dotnet/topic/Resource.20Models.20.26.20Extensions/near/220030984\">said</a>:</p>\n<blockquote>\n<p>The identifier will be your identifier for your CoveragePlan.<br>\nThe value of the entry should be a reference to a FormularyDrug, which is a profile on the MedicationKnowledge resource.</p>\n</blockquote>\n<p>The JSON examples for a CoveragePlan seem to have <strong>exactly </strong> 1 identifier, and 1 entry.. My organization has many (2,000+) CoveragePlans.  How does this look in our case?  Should we be returning ALL of them as identifiers?  Also, will there be an equal number of \"entries\"? <br>\nI assume there would be many entries (FormularyDrugs/MedicationKnowledges) per identifier..  Any insight is very much appreciated.</p>",
        "id": 220407454,
        "sender_full_name": "JA",
        "timestamp": 1608314450
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"365024\">JA</span> <a href=\"#narrow/stream/179171-dotnet/topic/Resource.20Models.20.26.20Extensions/near/220407454\">said</a>:</p>\n<blockquote>\n<p>The JSON examples for a CoveragePlan seem to have <strong>exactly </strong> 1 identifier, and 1 entry.. My organization has many (2,000+) CoveragePlans.  How does this look in our case?  Should we be returning ALL of them as identifiers?</p>\n</blockquote>\n<p>I would indeed think that for each CoveragePlan you have in your system, you would have at least one identifier per plan. Depending on what the FHIR request is, you might have 1 or more CoveragePlans in your response.</p>\n<blockquote>\n<p>Also, will there be an equal number of \"entries\"? <br>\nI assume there would be many entries (FormularyDrugs/MedicationKnowledges) per identifier..  Any insight is very much appreciated.</p>\n</blockquote>\n<p>I would assume as well, but I have no knowledge of DaVinci Pdex. These kind of questions are best posed in the DaVinci streams, like <a class=\"stream\" data-stream-id=\"197730\" href=\"/#narrow/stream/197730-Da-Vinci-PDex-Drug-Formulary\">#Da Vinci PDex Drug Formulary</a>.</p>",
        "id": 220561448,
        "sender_full_name": "Mirjam Baltus",
        "timestamp": 1608538653
    }
]