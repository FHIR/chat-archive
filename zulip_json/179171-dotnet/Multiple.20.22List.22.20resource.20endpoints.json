[
    {
        "content": "<p>My organization is attempting to make these endpoints available on our FHIR .NET core API:<br>\n<a href=\"/user_uploads/10155/aQxf5m3bQ1s4jTUdgbLw3LKU/image.png\">image.png</a> </p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/aQxf5m3bQ1s4jTUdgbLw3LKU/image.png\" title=\"image.png\"><img src=\"/user_uploads/10155/aQxf5m3bQ1s4jTUdgbLw3LKU/image.png\"></a></div><p>For more info on the above screenshot: <a href=\"http://hl7.org/fhir/us/Davinci-drug-formulary/#anticipated-client-queries\">http://hl7.org/fhir/us/Davinci-drug-formulary/#anticipated-client-queries</a></p>\n<p>1) How would we structure a <strong>List</strong> controller/endpoint to handle different <strong>_profile</strong> parameters? And what about the<strong> identifier</strong> parameter in the second endpoint shown in the screenshot above?</p>\n<p>For example, should we have a <strong>List</strong> controller which first checks if the <strong>_profile</strong> parameter matches the one in the screenshot above?  Then, check if an <strong>identifier</strong> parameter was supplied to determine if the request is looking for \"Find All CoveragePlans\" vs. \"Find CoveragePlan by its PlanID\"?</p>\n<p>I feel like I am just missing something here..  Any insight is very much appreciated.</p>",
        "id": 217717194,
        "sender_full_name": "JA",
        "timestamp": 1606197416
    },
    {
        "content": "<p>You need only one List endpoint. The requests you show in the screenshot are search requests. They will always result in a Bundle resource, in this case it will be a Bundle with Lists in the Bundle.entry. The parameters are used to filter the Lists you have, so if the _profile is provided, you filter all your lists on that, resulting in a Bundle of Lists that have that profile value in their List.meta.profile field. If the identifier parameter is supplied, you filter so the results are all the Lists that have a List.identifier field with the provided value. If both parameters are on the search, you will perform an AND type filter.</p>",
        "id": 217725771,
        "sender_full_name": "Mirjam Baltus",
        "timestamp": 1606207354
    },
    {
        "content": "<p>Thank you for your reply Mirjam.</p>\n<p>For further clarification, when using Bundle.AddResourceEntry(&lt;resource&gt;,&lt;full-url&gt;)<br>\nI don't understand what the &lt;full-url&gt; is in this situation.<br>\nAlso, would the &lt;resource&gt; be the entire List?  </p>\n<p>Thanks again Mirjam!</p>",
        "id": 217785760,
        "sender_full_name": "JA",
        "timestamp": 1606238453
    },
    {
        "content": "<p>The fullUrl is the identity of the resource in the entry. Usually it is a combination of your endpoint URL, resource type and the technical id for the resource. Each entry in the Bundle has to have one, see <a href=\"http://hl7.org/fhir/bundle.html#bundle-unique\">http://hl7.org/fhir/bundle.html#bundle-unique</a>.<br>\nThe resource will indeed be one of the List resources that were found to match the filter. For each matching List, you will need to add an entry to the Bundle.</p>",
        "id": 217790503,
        "sender_full_name": "Mirjam Baltus",
        "timestamp": 1606240671
    },
    {
        "content": "<p>If it's your first netcore server project, you could use the existing facade projects, then you just need to cover your storage layer. Then add other resource types as required, and makes the conformance statement easier too.<br>\nHttps://github.com/brianpos/fhir-net-web-api which is available on NuGet. And there is a demo project in that repo showing what to do.</p>",
        "id": 217959032,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1606356203
    }
]