[
    {
        "content": "<p>Hello,<br>\nHow is it possible for me to build a batch request in the .NET  FHIR API?</p>",
        "id": 153923928,
        "sender_full_name": "Dimitar",
        "timestamp": 1512847065
    },
    {
        "content": "<p>var bundle = new Bundle() { Type = Bundle.BundleType.Batch };</p>",
        "id": 153923934,
        "sender_full_name": "Yunwei Wang",
        "timestamp": 1512849616
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191506\">@Yunwei Wang</span>  Thank you, can the TransactionBuilder be used as well in that case or?</p>",
        "id": 153923937,
        "sender_full_name": "Dimitar",
        "timestamp": 1512850137
    },
    {
        "content": "<p>A Bundle can be either batch or transaction. If you need transaction, use TransactionBuider.</p>",
        "id": 153923938,
        "sender_full_name": "Yunwei Wang",
        "timestamp": 1512850562
    },
    {
        "content": "<p>Then why is there a parameter in transaction builder that accepts the type of bundle to be returned: <br>\n<a href=\"/user_uploads/10155/JkEdz5Lwye3kPicauCGsTBNN/pasted_image.png\" target=\"_blank\" title=\"pasted_image.png\">pasted image</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/JkEdz5Lwye3kPicauCGsTBNN/pasted_image.png\" target=\"_blank\" title=\"pasted image\"><img src=\"/user_uploads/10155/JkEdz5Lwye3kPicauCGsTBNN/pasted_image.png\"></a></div>",
        "id": 153923940,
        "sender_full_name": "Dimitar",
        "timestamp": 1512850862
    },
    {
        "content": "<p>Interesting. That means TransactionBuilder can be used to build batch bundle. I always use Bundle itself for batch request. Anyway, now I think the difference is like String vs StringBuilder. Just pick one you are comfortable with.</p>",
        "id": 153923941,
        "sender_full_name": "Yunwei Wang",
        "timestamp": 1512851118
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191506\">@Yunwei Wang</span>  Alright, thank you for the clarification, I will consider your aproach aswell, it's good to know that both work. You are right, it's very similar to the StringBuilder.</p>",
        "id": 153923945,
        "sender_full_name": "Dimitar",
        "timestamp": 1512852520
    },
    {
        "content": "<p>I am facing one problem however, whenever I build all of my get request, with the TransactionBuilder and execute the transaction of batches, it doesn't do the GET requests, when I tried the URLs they work just fine, am I doing something wrong or?</p>",
        "id": 153923974,
        "sender_full_name": "Dimitar",
        "timestamp": 1512865417
    },
    {
        "content": "<p>code snippit would be useful.<br>\nWhen I'm developing I often run fiddler in the background so that I can examine and understand what is going over the wire.<br>\nWith a Batch operation, there is only a single call, which is the POST of the bundle to the endpoint. All of the interactions inside the bundle are executed on the server, and the results are found in the returned bundle.<br>\nHope that helps.</p>",
        "id": 153923976,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1512866941
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191367\">@Brian Postlethwaite</span>  Basically, what I am doing, is the following, I add string GET requests, to a list. After I add them to the list, I build a transaction, based on each GET request, which was built using those strings, the following way:<br>\n<a href=\"/user_uploads/10155/S1VAyuRfvtDM6d0isUI-e6ox/pasted_image.png\" target=\"_blank\" title=\"pasted_image.png\">pasted image</a><br>\n And after that is done, I execute a transaction, which is supposed to post that batch, with the get requests.</p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/S1VAyuRfvtDM6d0isUI-e6ox/pasted_image.png\" target=\"_blank\" title=\"pasted image\"><img src=\"/user_uploads/10155/S1VAyuRfvtDM6d0isUI-e6ox/pasted_image.png\"></a></div>",
        "id": 153923977,
        "sender_full_name": "Dimitar",
        "timestamp": 1512867763
    },
    {
        "content": "<p><a href=\"/user_uploads/10155/AD8ywpiYzIOL3WKuaz7LVUo6/pasted_image.png\" target=\"_blank\" title=\"pasted_image.png\">pasted image</a><br>\nThose are the get requests<br>\nI get a 404 Error Unknown resource type 'http:'</p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/AD8ywpiYzIOL3WKuaz7LVUo6/pasted_image.png\" target=\"_blank\" title=\"pasted image\"><img src=\"/user_uploads/10155/AD8ywpiYzIOL3WKuaz7LVUo6/pasted_image.png\"></a></div>",
        "id": 153923978,
        "sender_full_name": "Dimitar",
        "timestamp": 1512868556
    },
    {
        "content": "<p>That does look strange, not sure what {lastN} is, it looks like its going to mess with the Resource name, should that be on the left of the \"?\"</p>",
        "id": 153923982,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1512869843
    },
    {
        "content": "<p>In my case lastn is empty string, because hapi server, doesn't support the lastn operation <a href=\"http://hl7.org/fhir/STU3/observation-operations.html#lastn\" target=\"_blank\" title=\"http://hl7.org/fhir/STU3/observation-operations.html#lastn\">http://hl7.org/fhir/STU3/observation-operations.html#lastn</a><br>\n<a href=\"/user_uploads/10155/Qtukdpc4h7yMGs1BwtpQPPeJ/pasted_image.png\" target=\"_blank\" title=\"pasted_image.png\">pasted image</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/Qtukdpc4h7yMGs1BwtpQPPeJ/pasted_image.png\" target=\"_blank\" title=\"pasted image\"><img src=\"/user_uploads/10155/Qtukdpc4h7yMGs1BwtpQPPeJ/pasted_image.png\"></a></div>",
        "id": 153923983,
        "sender_full_name": "Dimitar",
        "timestamp": 1512870415
    },
    {
        "content": "<p>You have uri.Unescape, I think you meant to have Uri.EscapeString</p>",
        "id": 153923989,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1512874826
    },
    {
        "content": "<p>(deleted)</p>",
        "id": 153924034,
        "sender_full_name": "Dimitar",
        "timestamp": 1512911246
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191367\">@Brian Postlethwaite</span>  it's very strange, because when I look into the transaction builder, where the for one of the element URl is, for example \"<a href=\"http://fhirtest.uhn.ca/baseDstu3/Observation?patient=Patient/330828&amp;code=http://loinc.org|8302-2,http://loinc.org|8306-3,http://loinc.org|8308-9&amp;date=ge2013-11-12T00:00:00\" target=\"_blank\" title=\"http://fhirtest.uhn.ca/baseDstu3/Observation?patient=Patient/330828&amp;code=http://loinc.org|8302-2,http://loinc.org|8306-3,http://loinc.org|8308-9&amp;date=ge2013-11-12T00:00:00\">http://fhirtest.uhn.ca/baseDstu3/Observation?patient=Patient/330828&amp;code=http://loinc.org|8302-2,http://loinc.org|8306-3,http://loinc.org|8308-9&amp;date=ge2013-11-12T00:00:00</a>\", executes just fine in postman, however it gives that error when its sent as a transaction.</p>",
        "id": 153924035,
        "sender_full_name": "Dimitar",
        "timestamp": 1512911630
    },
    {
        "content": "<p>(deleted)</p>",
        "id": 153924038,
        "sender_full_name": "Dimitar",
        "timestamp": 1512913047
    },
    {
        "content": "<p>Ok I found out what he problem is, basically in the request URL of each entry in the Bundle, it starts with the Server URI, which was the parameter of the transaction bundle, and whenever I would execute the Transaction, it would execute the get Request like so: [baseUrl]/[baseUrl]/Observation?patient=Patient etc..</p>",
        "id": 153924044,
        "sender_full_name": "Dimitar",
        "timestamp": 1512915584
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191506\">@Yunwei Wang</span> So Yunwei, I think your approach is the way to go :)</p>",
        "id": 153924045,
        "sender_full_name": "Dimitar",
        "timestamp": 1512915762
    }
]