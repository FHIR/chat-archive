[
    {
        "content": "<p>We seem to be experiencing issues with the validate function within the API. <br>\nWhen we run validations in a serial fashion we get different results to when we run the same content through validations happening in parallel. Has anyone experienced any multithreading issues with the validate function within the API?</p>",
        "id": 192672435,
        "sender_full_name": "Richard Kavanagh",
        "timestamp": 1585837583
    },
    {
        "content": "<p>The Validator in fhir-net-api is not thread safe. So I can imagine that running it in parallel will cause some errors, or at least some anomalies.</p>",
        "id": 192687240,
        "sender_full_name": "Marco Visser",
        "timestamp": 1585842980
    },
    {
        "content": "<p>Thanks <span class=\"user-mention\" data-user-id=\"193551\">@Marco Visser</span>  -  that confirms what we have observed. I think we are going to have to have a bit of a rethink on our approach in this area...</p>",
        "id": 192691229,
        "sender_full_name": "Richard Kavanagh",
        "timestamp": 1585844510
    },
    {
        "content": "<p>You should be able to run multiple instances of the validator in parallel though...<br>\nOne issue in older versions we had was a race condition from the Source resolver.</p>",
        "id": 192747735,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1585875803
    },
    {
        "content": "<p>(we fixed it in our fork, and I believe is in the latest versions, don't recall how far back, but likely post 1.4)</p>",
        "id": 192747755,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1585875835
    },
    {
        "content": "<p>Could it be this issue <a href=\"https://github.com/FirelyTeam/fhir-net-api/issues/556\" title=\"https://github.com/FirelyTeam/fhir-net-api/issues/556\">556</a> Brian?  If yes, then is has been solved indeed in the past.</p>",
        "id": 192764109,
        "sender_full_name": "Marco Visser",
        "timestamp": 1585897085
    },
    {
        "content": "<p>It was a different issue, searching for ele-1 would probably find it. I'm sure it was in the latest version, just now sure how far back.<br>\nIt was the locking on SetAnnotation that resolved the one I found.</p>",
        "id": 192777461,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1585905750
    },
    {
        "content": "<p>Ah ok. That was this issue <a href=\"https://github.com/FirelyTeam/fhir-net-api/issues/1065\" title=\"https://github.com/FirelyTeam/fhir-net-api/issues/1065\">1065</a>, which was resolved in latest version (1.6.0).</p>\n<p>See also the <a href=\"https://github.com/FirelyTeam/fhir-net-api/releases/tag/v1.6.0-stu3\" title=\"https://github.com/FirelyTeam/fhir-net-api/releases/tag/v1.6.0-stu3\">release notes</a></p>",
        "id": 192778056,
        "sender_full_name": "Marco Visser",
        "timestamp": 1585906069
    },
    {
        "content": "<p>Yup, that's right.</p>",
        "id": 192934263,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1586047355
    }
]