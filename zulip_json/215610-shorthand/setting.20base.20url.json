[
    {
        "content": "<p>why am i getting this message?<br>\n<code> Unable to locate the profile \"undefined/undefined/StructureDefinition/be-patient\" in order to validate against it </code></p>",
        "id": 192076661,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1585341570
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191469\">@Chris Moesel</span> ? Am i missing something?</p>",
        "id": 192077059,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1585341773
    },
    {
        "content": "<p>Uh... I don't know.  I haven't seen that before.  Is that coming from the IG Publisher? It doesn't look like a SUSHI message.  Did this work correctly with SUSHI 0.10.0 and is now not working with SUSHI 0.11.1? Or is it not necessarily related to the latest SUSHI release?</p>",
        "id": 192082336,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1585344250
    },
    {
        "content": "<p>perhaps this was there before... but this is an error message from the Publisher, but due to the fact that sushi populates my profiles with </p>\n<div class=\"codehilite\"><pre><span></span><span class=\"p\">{</span>\n  <span class=\"nt\">&quot;resourceType&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;StructureDefinition&quot;</span><span class=\"p\">,</span>\n  <span class=\"nt\">&quot;id&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;be-careplan&quot;</span><span class=\"p\">,</span>\n  <span class=\"nt\">&quot;url&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;undefined/StructureDefinition/be-careplan&quot;</span><span class=\"p\">,</span>\n<span class=\"err\">...</span>\n</pre></div>",
        "id": 192082573,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1585344418
    },
    {
        "content": "<p>what can i do to fix this?</p>",
        "id": 192082991,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1585344677
    },
    {
        "content": "<p>(couldn't find it in the docs)</p>",
        "id": 192083003,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1585344690
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191832\">Jose Costa Teixeira</span> <a href=\"#narrow/stream/215610-shorthand/topic/setting.20base.20url/near/192082991\" title=\"#narrow/stream/215610-shorthand/topic/setting.20base.20url/near/192082991\">said</a>:</p>\n<blockquote>\n<p>what can i do to fix this?</p>\n</blockquote>\n<p>How does your <del>ig-data/</del>package.json look?</p>",
        "id": 192083173,
        "sender_full_name": "Pétur Valdimarsson",
        "timestamp": 1585344810
    },
    {
        "content": "<p>Do you have a <code>package.json</code> in your FSH folder with the <code>canonical</code> set to your package's canonical URL?</p>",
        "id": 192083179,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1585344816
    },
    {
        "content": "<p>right, no i didn't</p>",
        "id": 192083313,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1585344913
    },
    {
        "content": "<p>thanks</p>",
        "id": 192083321,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1585344918
    },
    {
        "content": "<p>so i need 2 package.json files? one inside fsh and one for the publisher?</p>",
        "id": 192083435,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1585344969
    },
    {
        "content": "<p>Just one package.json for sushi and one ig.ini for the publisher...I think. Been a little while since I set up my last project</p>",
        "id": 192083499,
        "sender_full_name": "Pétur Valdimarsson",
        "timestamp": 1585345030
    },
    {
        "content": "<p>You should only need the one for FSH, which will get re-exported to the output (so then the publisher will use that one).</p>",
        "id": 192083537,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1585345068
    },
    {
        "content": "<p><a href=\"/user_uploads/10155/92IxXBLadshDBhKlMKyJC-j0/Screenshot-2020-03-27-at-22.37.26.png\" title=\"Screenshot-2020-03-27-at-22.37.26.png\">Screenshot-2020-03-27-at-22.37.26.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/92IxXBLadshDBhKlMKyJC-j0/Screenshot-2020-03-27-at-22.37.26.png\" title=\"Screenshot-2020-03-27-at-22.37.26.png\"><img src=\"/user_uploads/10155/92IxXBLadshDBhKlMKyJC-j0/Screenshot-2020-03-27-at-22.37.26.png\"></a></div>",
        "id": 192083545,
        "sender_full_name": "Pétur Valdimarsson",
        "timestamp": 1585345076
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191469\">Chris Moesel</span> <a href=\"#narrow/stream/215610-shorthand/topic/setting.20base.20url/near/192083537\" title=\"#narrow/stream/215610-shorthand/topic/setting.20base.20url/near/192083537\">said</a>:</p>\n<blockquote>\n<p>You should only need the one for FSH, which will get re-exported to the output (so then the publisher will use that one).</p>\n</blockquote>\n<p>yes, but if my sushi is driven by my publisher should I not have it in my folder above fsh?</p>",
        "id": 192084000,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1585345323
    },
    {
        "content": "<p>same for the ini file. I have one on my parent folder, so it's not intuitive that I have to change the one from ./fsh/ig-data, and not the one from the main folder..</p>",
        "id": 192084060,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1585345425
    },
    {
        "content": "<p>Since I started using fsh as the main authoring language, I have moved away from the previous publisher-specific files and rely on what sushi generates. Works quite well.</p>",
        "id": 192084266,
        "sender_full_name": "Pétur Valdimarsson",
        "timestamp": 1585345605
    },
    {
        "content": "<blockquote>\n<p>yes, but if my sushi is driven by my publisher should I not have it in my folder above fsh?</p>\n</blockquote>\n<p>I think that's one of the things being sorted out.  This integration came up kind of by surprise -- so right now it's based on how SUSHI currently works -- and SUSHI expects that it's <code>package.json</code> file is in the root folder passed to SUSHI -- which now is the <code>./fsh</code> subfolder.  So SUSHI wouldn't know to look up a folder.</p>\n<p>I thought the way the integration was going to work was the publisher runs SUSHI as its <em>first step</em> -- which would then put the <code>package.json</code>, <code>ig.ini</code>, and everything else in the proper place for the publisher to then run as normal.  But it seems like maybe the publisher is (or was) looking for some of those files prior to running SUSHI.  It's a bit of a chicken and egg problem right now.</p>",
        "id": 192084284,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1585345620
    },
    {
        "content": "<p>doesn't seem hard now that things are working.</p>",
        "id": 192084375,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1585345677
    },
    {
        "content": "<p>can sushi not check for an ini file in the output folder and use that one before using the one from ig-data?</p>",
        "id": 192084446,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1585345706
    },
    {
        "content": "<p>that would fix the issue, right?</p>",
        "id": 192084465,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1585345716
    },
    {
        "content": "<p>since when using the publisher, the output folder is above fsh, not below</p>",
        "id": 192084503,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1585345745
    },
    {
        "content": "<p>(sorry for cross-posting, but in this stream i leave my technical suggestion for sushi to the best of my understanding. on the IG creation stream i am asking for a common approach)</p>",
        "id": 192084641,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1585345856
    },
    {
        "content": "<blockquote>\n<p>can sushi not check for an ini file in the output folder and use that one before using the one from ig-data?</p>\n</blockquote>\n<p>That could result in some pretty unexpected behavior. If someone is using a normal FSH project and runs SUSHI, it will generate an ig.ini file to the output folder (say, <code>./build</code>).  Now imagine they edit the ig.ini in the FSH source and run SUSHI again -- if SUSHI chose the old ig.ini in the output folder over the ig.ini in the FSH source, then the intended changes are ignored.  The only way the author could force the changes would be to delete the output folder before every build.</p>",
        "id": 192084708,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1585345919
    },
    {
        "content": "<p>We just need SUSHI to have a special mode for when it's being run in the context of the IG Publisher.  This is something we will work to iron out.</p>",
        "id": 192084823,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1585345998
    },
    {
        "content": "<p>But in that mode, yes, it probably makes sense to use the project.json and potentially other files from the root folder.  And in fact, potentially the <code>ig-data</code> folder would go away entirely.  We'd need to think about the implications and try to design it out properly.</p>",
        "id": 192084957,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1585346068
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191469\">Chris Moesel</span> <a href=\"#narrow/stream/215610-shorthand/topic/setting.20base.20url/near/192084708\" title=\"#narrow/stream/215610-shorthand/topic/setting.20base.20url/near/192084708\">said</a>:</p>\n<blockquote>\n<blockquote>\n<p>can sushi not check for an ini file in the output folder and use that one before using the one from ig-data?</p>\n</blockquote>\n<p>That could result in some pretty unexpected behavior. If someone is using a normal FSH project and runs SUSHI, it will generate an ig.ini file to the output folder (say, <code>./build</code>).  Now imagine they edit the ig.ini in the FSH source and run SUSHI again -- if SUSHI chose the old ig.ini in the output folder over the ig.ini in the FSH source, then the intended changes are ignored.  The only way the author could force the changes would be to delete the output folder before every build.</p>\n</blockquote>\n<p>true</p>",
        "id": 192084982,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1585346093
    },
    {
        "content": "<p>can sushi not detect if it is running inside the publisher, and in that case check for an ini file in the output folder and use that one before using the one from ig-data?</p>",
        "id": 192085035,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1585346137
    },
    {
        "content": "<p>Whatever solution I think we should make sure both sets of tools work autonomously as well as when integrated, so that people don't have to be forced to an option</p>",
        "id": 192085176,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1585346218
    },
    {
        "content": "<p>The one thing I don't like about having FSH source in a sub-folder and outputting to its parent folder, especially if there is other <em>source</em> in the parent folder, is that now the parent folder is a complex mix of source files, generated files, and temporary files.  Doing a truly <em>clean</em> build will be very challenging as you need to delete the generated and temporary files using a scalpel.  The way it was before, with a dedicated <code>build</code> subfolder for output made clean builds simple -- <em>just delete the build folder</em>.  We're losing that now.</p>",
        "id": 192085234,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1585346260
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191469\">Chris Moesel</span> <a href=\"#narrow/stream/215610-shorthand/topic/setting.20base.20url/near/192084823\" title=\"#narrow/stream/215610-shorthand/topic/setting.20base.20url/near/192084823\">said</a>:</p>\n<blockquote>\n<p>We just need SUSHI to have a special mode for when it's being run in the context of the IG Publisher.  This is something we will work to iron out.</p>\n</blockquote>\n<p>ah, the Chirashi from my diagram yesterday :) Yes, we need that in any case</p>",
        "id": 192085240,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1585346262
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191469\">Chris Moesel</span> <a href=\"#narrow/stream/215610-shorthand/topic/setting.20base.20url/near/192085234\" title=\"#narrow/stream/215610-shorthand/topic/setting.20base.20url/near/192085234\">said</a>:</p>\n<blockquote>\n<p>The one thing I don't like about having FSH source in a sub-folder and outputting to its parent folder, especially if there is other <em>source</em> in the parent folder, is that now the parent folder is a complex mix of source files, generated files, and temporary files.  </p>\n</blockquote>\n<p>I agree fully, but well, that is not  surprising ( i remember discussions about a folder structure) <br>\nboth tools have the other tool's content in children folders...</p>",
        "id": 192085468,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1585346406
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191469\">Chris Moesel</span> <a href=\"#narrow/stream/215610-shorthand/topic/setting.20base.20url/near/192085234\" title=\"#narrow/stream/215610-shorthand/topic/setting.20base.20url/near/192085234\">said</a>:</p>\n<blockquote>\n<p>The way it was before, with a dedicated <code>build</code> subfolder for output made clean builds simple -- <em>just delete the build folder</em>.  We're losing that now.</p>\n</blockquote>\n<p>that can be fixed. We can for example have sushi produce output in another folder (say \"input2\") and have the template or IG merge the folders before publishing.</p>",
        "id": 192085700,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1585346536
    },
    {
        "content": "<p>(sorry, it's a very raw idea - you can think of better)</p>",
        "id": 192085740,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1585346558
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"193397\">Pétur Valdimarsson</span> <a href=\"#narrow/stream/215610-shorthand/topic/setting.20base.20url/near/192084266\" title=\"#narrow/stream/215610-shorthand/topic/setting.20base.20url/near/192084266\">said</a>:</p>\n<blockquote>\n<p>Since I started using fsh as the main authoring language, I have moved away from the previous publisher-specific files and rely on what sushi generates. Works quite well.</p>\n</blockquote>\n<p>it's my main language for examples, but it is not my main language for other things. And I still need to tweak the publisher specific stuff, so I agree it is an option but it cannot be my only option now</p>",
        "id": 192086308,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1585346936
    },
    {
        "content": "<p>I understand completely</p>",
        "id": 192086331,
        "sender_full_name": "Pétur Valdimarsson",
        "timestamp": 1585346956
    }
]