[
    {
        "content": "<p>I have a set of examples where some of the instances live independently and also live as a contained in another instance.  I'm doing this by overriding the references in the contained resources when I add them to the parent:</p>\n<div class=\"codehilite\"><pre><span></span><code>* contained[USAgentAffiliation] = NationalPharmaIndiaAffiliation\n* contained[USAgentAffiliation].organization.reference = &quot;#&quot;\n* contained[USAgentAffiliation].participatingOrganization.reference = &quot;#usagent&quot;\n* contained[USAgent] = NationalPharmaIndiaUSAgent\n* contained[USAgent].id = &quot;usagent&quot;\n* contained[BusinessOperation] = NationalPharmaIndiaOperation\n* contained[BusinessOperation].providedBy.reference = &quot;#&quot;\n</code></pre></div>\n<p>That seems to work just fine, except that I'm getting a cardinality error on the instances when they are contained but not the instance itself:</p>\n<div class=\"codehilite\"><pre><span></span><code>error Element Organization.contained:USAgent.identifier:DUNSNumber has minimum cardinality 1 but occurs 0 time(s).\n  File: /Users/jeanduteau/Documents/DDIWork/Samvit/SPL/fhir-spl/input/fsh/LabelerCodeRequest.fsh\n  Line: 85 - 110\nerror Element Organization.contained:USAgent.telecom:Phone has minimum cardinality 1 but occurs 0 time(s).\n  File: /Users/jeanduteau/Documents/DDIWork/Samvit/SPL/fhir-spl/input/fsh/LabelerCodeRequest.fsh\n  Line: 85 - 110\nerror Element Organization.contained:USAgent.telecom:Email has minimum cardinality 1 but occurs 0 time(s).\n  File: /Users/jeanduteau/Documents/DDIWork/Samvit/SPL/fhir-spl/input/fsh/LabelerCodeRequest.fsh\n  Line: 85 - 110\n</code></pre></div>\n<p>Here is the definition of the Instance that shows those things actually exist:</p>\n<div class=\"codehilite\"><pre><span></span><code>Instance: NationalPharmaIndiaUSAgent\nInstanceOf: USAgentOrganization\nDescription: &quot;An example of a US Agent Organization.&quot;\n* identifier[DUNSNumber].value = &quot;888888888&quot;\n* name = &quot;National Pharma of India Inc. US Agent&quot;\n* telecom[Phone].value = &quot;+1-908-999-1212;ext=444&quot;\n* telecom[Email].value = &quot;jdoe_2@npoiinc.net&quot;\n</code></pre></div>\n<p>And when I look at the generated JSON it looks fine as well.  I'm not sure why I'm getting those errors.</p>",
        "id": 223676864,
        "sender_full_name": "Jean Duteau",
        "timestamp": 1611338616
    },
    {
        "content": "<p>Hmm... yeah, I'm not sure.  We'll have to take a look at that one...</p>",
        "id": 223713406,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1611356586
    },
    {
        "content": "<p>Here's the repository with the files: <a href=\"https://github.com/HL7/fhir-spl\">https://github.com/HL7/fhir-spl</a></p>",
        "id": 223715698,
        "sender_full_name": "Jean Duteau",
        "timestamp": 1611358214
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191469\">@Chris Moesel</span> i hate to push but I'm wondering if the team will have a chance to look at this and find out what is wrong (or what I'm doing wrong)?  I can workaround it but I'd rather not and I'd like my guide to build so the rest of my team can see what the contained resources look like.</p>",
        "id": 223933907,
        "sender_full_name": "Jean Duteau",
        "timestamp": 1611596718
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"192166\">@Jean Duteau</span> -- I'll take a look at it this afternoon.</p>",
        "id": 223940967,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1611599874
    },
    {
        "content": "<p>thanks (and sorry again for bothering you about it)</p>",
        "id": 223941023,
        "sender_full_name": "Jean Duteau",
        "timestamp": 1611599891
    },
    {
        "content": "<p>Should I be looking at a specific branch or something?  Because it's compiling nice and clean for me using SUSHI 1.1.0:<br>\n<a href=\"/user_uploads/10155/djwjSn7VEdMegxuP-89zMIap/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/djwjSn7VEdMegxuP-89zMIap/image.png\" title=\"image.png\"><img src=\"/user_uploads/10155/djwjSn7VEdMegxuP-89zMIap/image.png\"></a></div>",
        "id": 223942777,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1611600833
    },
    {
        "content": "<p>of course it is!</p>",
        "id": 223942845,
        "sender_full_name": "Jean Duteau",
        "timestamp": 1611600853
    },
    {
        "content": "<p>i'm running 1.0.1.  i thought I had upgraded.  let me upgrade and retry</p>",
        "id": 223942912,
        "sender_full_name": "Jean Duteau",
        "timestamp": 1611600893
    },
    {
        "content": "<p>sigh, whatever was broken got fixed in 1.1.0.  i should have looked at that before coming here.  sorry</p>",
        "id": 223943187,
        "sender_full_name": "Jean Duteau",
        "timestamp": 1611601031
    },
    {
        "content": "<p>It's OK.  We actually relaxed some of our cardinality checks around slices in 1.1.0.  Although I <em>thought</em> we only did that for instance paths that used numeric indices rather than slice names (which isn't the case here).  Anyway, glad it's all good now.</p>",
        "id": 223946553,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1611602511
    }
]