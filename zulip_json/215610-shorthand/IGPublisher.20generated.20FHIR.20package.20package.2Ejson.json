[
    {
        "content": "<p>After generating an IG, starting with FSH tank, I see the generated package.json (in the FHIR package archive <code>build/output/package.tgz</code>) is set to my local file path, e.g. </p>\n<div class=\"codehilite\"><pre><span></span><code>&quot;url&quot;: &quot;file:///Users/bkaney/code/my-project/ig/build/output&quot;,\n</code></pre></div>\n<p>I would like to specify this but don't know how? I tried to adding a <code>url</code> property to my  <code>fsh/config.yaml</code>, but it didn't have any affect. Any ideas?</p>",
        "id": 215202028,
        "sender_full_name": "Brian Kaney",
        "timestamp": 1604165439
    },
    {
        "content": "<p>I don't remember but you can check this  :<br>\nDo you provide an implementationguide xml / json? or do you let sushi generate it for you?</p>",
        "id": 215203310,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1604166988
    },
    {
        "content": "<p>if you provide the ig.xml, dows it have the url set? If not, does your sushi.config.yaml contain a canonical entry?</p>",
        "id": 215203329,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1604167021
    },
    {
        "content": "<p>(I don't know if this has changed meanwhile, but I remember the same thing because my canonical was not set)</p>",
        "id": 215203348,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1604167050
    },
    {
        "content": "<p>I do not have implementationguide, sushi is generating it. Yes, there is a canonical set.</p>",
        "id": 215203358,
        "sender_full_name": "Brian Kaney",
        "timestamp": 1604167074
    },
    {
        "content": "<p>I am using sushi 0.16.0, and IGPublisher 1.1.35</p>",
        "id": 215203571,
        "sender_full_name": "Brian Kaney",
        "timestamp": 1604167278
    },
    {
        "content": "<p>SUSHI doesn't generate that package.json, and I'm not sure which value the IG Publisher uses to populate that field. I see the same sort of local file path in the package.json when I build IGs locally, so I'm wondering if that is just the IG Publisher's convention for <code>dev</code> packages?</p>\n<p><span class=\"user-mention\" data-user-id=\"191832\">@Jose Costa Teixeira</span> are you saying that the IG Publisher populates that field based on the \"url\" value in the ImplentationGuide resource? Because I have some locally built IGs that do have \"url\" set in the ImplementationGuide, but still have the local file path in the package.json.</p>",
        "id": 215315893,
        "sender_full_name": "Nick Freiter",
        "timestamp": 1604322630
    },
    {
        "content": "<p>No, <span class=\"user-mention\" data-user-id=\"239822\">@Nick Freiter</span> I just vaguely remembered something possibly related</p>",
        "id": 215324134,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1604326960
    },
    {
        "content": "<p>It is not improbable that I am just confusing everything.</p>",
        "id": 215324179,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1604326978
    },
    {
        "content": "<p>I think this was the discussion I recalled:<br>\n<a href=\"#narrow/stream/215610-shorthand/topic/setting.20base.20url\">https://chat.fhir.org/#narrow/stream/215610-shorthand/topic/setting.20base.20url</a></p>",
        "id": 215324506,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1604327117
    },
    {
        "content": "<p>I <em>think</em> that discussion is a bit different than what's going on here. It looked like in that thread there was an issue with the <code>package.json</code> that SUSHI used to use as an input, which is now <code>sushi-config.yaml</code>. But in this case, the issue is with the <code>package.json</code> generated by the IG Publisher for the <code>package.tgz</code> file. This <a href=\"https://confluence.hl7.org/pages/viewpage.action?pageId=35718629#NPMPackageSpecification-PackageManifestpropertiesforIGs\">documentation</a> seems to indicate that that value should get set based on the <code>manifest.rendering</code> property on the ImplementationGuide resource, but I'm having trouble replicating that for a locally built package.</p>",
        "id": 215327147,
        "sender_full_name": "Nick Freiter",
        "timestamp": 1604328257
    },
    {
        "content": "<p>FWIW, the generated IG resource that I see does not have <code>manifest.rendering</code> property.</p>",
        "id": 215347537,
        "sender_full_name": "Brian Kaney",
        "timestamp": 1604336619
    },
    {
        "content": "<p>It's possible the <code>manifest.rendering</code> is ignored when building locally. I've been unable to get the <code>url</code> in the <code>package.json</code> to have a value different from the local file path. This might be worth bringing up in the <a class=\"stream\" data-stream-id=\"179252\" href=\"/#narrow/stream/179252-IG-creation\">#IG creation</a> channel? Once we know how the IG Publisher sets that <code>url</code> in <code>package.json</code>, we could determine if there is anything SUSHI can do to put  the <code>canonical</code> given in <code>config.yaml</code> where the IG Publisher is expecting it.</p>",
        "id": 215348709,
        "sender_full_name": "Nick Freiter",
        "timestamp": 1604337097
    },
    {
        "content": "<p>I attempted to frame the question there...</p>",
        "id": 215391689,
        "sender_full_name": "Brian Kaney",
        "timestamp": 1604358608
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"239822\">@Nick Freiter</span> Lloyd said \"It should come from the ImplementationGuide.url value\"</p>",
        "id": 215448690,
        "sender_full_name": "Brian Kaney",
        "timestamp": 1604407922
    },
    {
        "content": "<p>Gotcha, continuing the conversation there.</p>",
        "id": 215453715,
        "sender_full_name": "Nick Freiter",
        "timestamp": 1604410774
    },
    {
        "content": "<p>The other thread, for anyone else who is interested: <a href=\"#narrow/stream/179252-IG-creation/topic/Setting.20.22url.22.20in.20package.2Ejson\">https://chat.fhir.org/#narrow/stream/179252-IG-creation/topic/Setting.20.22url.22.20in.20package.2Ejson</a></p>",
        "id": 215453846,
        "sender_full_name": "Nick Freiter",
        "timestamp": 1604410826
    },
    {
        "content": "<p>Hi <span class=\"user-mention\" data-user-id=\"239822\">@Nick Freiter</span>  -- not sure exactly how to parse Grahame's response here, but maybe this could be useful information w.r.t. sushi tooling? Or is this something that sushi shouldn't be involved with?</p>",
        "id": 215637360,
        "sender_full_name": "Brian Kaney",
        "timestamp": 1604521921
    },
    {
        "content": "<p>Hm yeah I see. I've asked if command line option is truly the only way to do it. If that's the case, then no, I don't think this is something SUSHI would be able to take care of. I don't think we want to get into the business of messing with the command line params of the IG publisher. But, if there is some value that can be set in the ImplementationGuide resource, then we could look into having SUSHI set that value based on the given <code>canonical</code>.</p>",
        "id": 215637998,
        "sender_full_name": "Nick Freiter",
        "timestamp": 1604522247
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"239822\">@Nick Freiter</span>  One idea might be a way to set IGPublish CLI flags/options (in config.yaml)?</p>",
        "id": 215735522,
        "sender_full_name": "Brian Kaney",
        "timestamp": 1604593160
    },
    {
        "content": "<p>sushi cannot set the flags for the IGPublisher because sushi does not call the publisher. It's the publisher that calls sushi</p>",
        "id": 215739303,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1604594565
    },
    {
        "content": "<p>more settings for fsh.ini!</p>",
        "id": 215739349,
        "sender_full_name": "David Pyke",
        "timestamp": 1604594589
    },
    {
        "content": "<p>what setting would that be? fsh.ini is for sushi settings</p>",
        "id": 215739401,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1604594614
    },
    {
        "content": "<p>Currently it only sets the sushi version that the publisher will use.  However, it could be other runtime settings (or could be set in ig.ini)</p>",
        "id": 215739853,
        "sender_full_name": "David Pyke",
        "timestamp": 1604594781
    },
    {
        "content": "<p>In this case <span class=\"user-mention\" data-user-id=\"191782\">@Brian Kaney</span> wants to affect the IG Publisher, <em>not</em> SUSHI (since SUSHI does not generate <code>package.json</code>), so <code>ig.ini</code> (or a <code>parameter</code> in the IG JSON) would be more appropriate than <code>fsh.ini</code>.</p>",
        "id": 215741332,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1604595459
    }
]