[
    {
        "content": "<p>Hi, new to FSH/Sushi/IG Publisher.  I'm trying to build an IG based on profiles in the <a href=\"http://www.hl7.org/fhir/us/carin-bb/index.html\">Carin IG</a>.    I create a minimal FSH profile based on Carin's <a href=\"http://www.hl7.org/fhir/us/carin-bb/StructureDefinition-C4BB-Patient.html\">Patient</a> and <a href=\"http://www.hl7.org/fhir/us/carin-bb/StructureDefinition-C4BB-Coverage.html\">Coverage</a> profiles. Sushi and IG publisher run without problem and the IG comes out  just fine.   But when I add a FSH for Explanation of Benefit (based on <a href=\"http://www.hl7.org/fhir/us/carin-bb/StructureDefinition-C4BB-ExplanationOfBenefit-Inpatient-Institutional.html\">this CARIN profile</a>), an exception occurs when I run ./_genonce.sh.  The exception is shown below. The EOB .FSH file is shown beneath that.  Is this a problem with Sushi?  IG Publisher?  The carin profile itself?   If I specify the FHIR standard EOB in the FSH file, it works fine, so it seems like something to do with the Carin profile.  Thanks for any help or direction!</p>\n<p><strong>Exception:</strong></p>\n<div class=\"codehilite\"><pre><span></span><code>Exception in thread &quot;main&quot; java.lang.Error: getElementByName: can&#39;t find http://hl7.org/fhir/StructureDefinition/ExplanationOfBenefit#ExplanationOfBenefit.item.adjudication in [ExplanationOfBenefitâ€¦.\n\nat org.hl7.fhir.r5.conformance.ProfileUtilities.getElementByName(ProfileUtilities.java:3182)\n    at org.hl7.fhir.r5.conformance.ProfileUtilities.genTypes(ProfileUtilities.java:3009)\n    at org.hl7.fhir.r5.conformance.ProfileUtilities.genElementCells(ProfileUtilities.java:3613)\n    at org.hl7.fhir.r5.conformance.ProfileUtilities.genElement(ProfileUtilities.java:3471)\n    at org.hl7.fhir.r5.conformance.ProfileUtilities.genElement(ProfileUtilities.java:3533)\n    at org.hl7.fhir.r5.conformance.ProfileUtilities.genElement(ProfileUtilities.java:3533)\n    at org.hl7.fhir.r5.conformance.ProfileUtilities.genElement(ProfileUtilities.java:3533)\n    at org.hl7.fhir.r5.conformance.ProfileUtilities.generateTable(ProfileUtilities.java:3312)\n    at org.hl7.fhir.igtools.renderers.StructureDefinitionRenderer.snapshot(StructureDefinitionRenderer.java:374)\n    at org.hl7.fhir.igtools.publisher.Publisher.generateOutputsStructureDefinition(Publisher.java:7121)\n    at org.hl7.fhir.igtools.publisher.Publisher.generateResourceHtml(Publisher.java:6355)\n    at org.hl7.fhir.igtools.publisher.Publisher.generateHtmlOutputs(Publisher.java:6300)\n    at org.hl7.fhir.igtools.publisher.Publisher.generate(Publisher.java:4658)\n    at org.hl7.fhir.igtools.publisher.Publisher.createIg(Publisher.java:858)\n    at org.hl7.fhir.igtools.publisher.Publisher.execute(Publisher.java:707)\n    at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:7756)\n</code></pre></div>\n<p><strong>EOB FSH file:</strong></p>\n<div class=\"codehilite\"><pre><span></span><code>Profile:        BCDAEOB\nParent:         http://hl7.org/fhir/us/carin-bb/StructureDefinition/C4BB-ExplanationOfBenefit-Inpatient-Institutional\n// if I use the standard FHIR EOB, everything is okay\n// Parent:         ExplanationOfBenefit\nId:             bcda-ExplanationOfBenefit-Inpatient\nTitle:          &quot;BCDA Explanation of Benefit Inpatient Profile&quot;\nDescription:    &quot;Defines constraints and extensions ...&quot;\n</code></pre></div>\n<p><strong>sushi-config.yaml:</strong></p>\n<div class=\"codehilite\"><pre><span></span><code>id: cms.gov.bcda\ncanonical: https://bcda.cms.gov/ig/index.html\n\nname: BCDA-IG\nstatus: active\nversion: 2.0.0\nfhirVersion: 4.0.1\ncopyrightYear: 2021+\nreleaseLabel: Build CI\npublisher:\n  name: HL7 US Realm Steering Committee\n  url: http://www.healthit.gov\njurisdiction: urn:iso:std:iso:3166#US &quot;United States of America&quot;\n\nmenu:\n  Home: index.html\n  Artifacts: artifacts.html\n\nparameters:\n  apply-contact: true\n  apply-jurisdiction: true\n  apply-publisher: true\ndependencies:\n  hl7.fhir.us.carin-bb: 1.0.0\n  hl7.fhir.us.core: 3.1.1\n</code></pre></div>",
        "id": 231246741,
        "sender_full_name": "Bill Harty",
        "timestamp": 1616367310
    },
    {
        "content": "<p>Hello, is there anything more to the FSH file that leads to that error? I've tried recreating this issue using the <code>sushi-config.yaml</code> file you pasted, and using the Carin EOB Profile, but it runs successfully for me. So I am guessing the error must be with one of the rules that are being applied on the BCDAEOB profile. If you're able to share those, it may help us debug.</p>",
        "id": 231300684,
        "sender_full_name": "Nick Freiter",
        "timestamp": 1616415752
    },
    {
        "content": "<p>thank you for looking at this - much appreciated!  I put my FSH files in <a href=\"https://github.com/wfharty3/fishing\">my github repo</a>.  As you will see, my EOB profile is bare-bones, almost nothing in it at all. <br>\n Wondering if maybe it's a version problem on my installation of tools?  Running sushi v1.3.0.  Each time I generate the IG, I run sushi, then <a href=\"http://_updatePublsher.sh\">_updatePublsher.sh</a> then <a href=\"http://_genOnce.sh\">_genOnce.sh</a>, so I'm assuming my IGPub is up to date?  Thanks again!!!</p>",
        "id": 231363549,
        "sender_full_name": "Bill Harty",
        "timestamp": 1616438807
    },
    {
        "content": "<p>Thanks for putting the FSH up on github, much easier to debug that way.  What I've found is that the <code>_genonce.sh</code> and <code>_updatePublisher.sh</code> files you are using look a bit out of date. The most recent files can be found in the <a href=\"https://github.com/HL7/ig-publisher-scripts\">ig-publisher-scripts repo</a>. I've found that when I use those scripts, the <code>_updatePublisher</code> script downloads a newer version of the IG Publisher, and the <code>_genonce</code> script then runs without error. </p>\n<p>I also noticed you were using an older project structure for your FSH. It should still work with versions of SUSHI &gt; 1.0, but allow me to preach the new project structure a bit, since I think it is simpler to manage. You can find info on that project structure <a href=\"https://fshschool.org/docs/sushi/project/\">here</a>.  Since it looks like you mentioned you are just starting out using SUSHI with the IG Publisher, I would recommend the <code>--init</code> option that SUSHI provides, which is documented <a href=\"https://fshschool.org/docs/sushi/project/#initializing-a-sushi-project\">here</a>. With this option, you can easily get a working IG up and running that should build successfully with SUSHI and the Publisher. Then you can just replace the sample files generated by <code>--init</code> with the FSH and config file I see you have already written. If you choose to go this route and have any questions, we are happy to help.</p>",
        "id": 231369703,
        "sender_full_name": "Nick Freiter",
        "timestamp": 1616441086
    },
    {
        "content": "<p>That worked!  thanks again, you just saved me a ton of time.</p>",
        "id": 231378124,
        "sender_full_name": "Bill Harty",
        "timestamp": 1616444367
    }
]