[
    {
        "content": "<p>I have a profile that adds in an optional IG specific element (extension) at 0..1. And a second profile that needs to increases the cardinality to 1..1.  I need both profiles. I can't figure out how to have the second (which has the first as parent) increase the element to mandatory.</p>",
        "id": 221225841,
        "sender_full_name": "John Moehrke",
        "timestamp": 1609346785
    },
    {
        "content": "<p>Figured it out... I didn't think to address it like one does in an Instance</p>\n<div class=\"codehilite\"><pre><span></span><code>* extension[TypeOfList] 1..1\n</code></pre></div>",
        "id": 221229819,
        "sender_full_name": "John Moehrke",
        "timestamp": 1609349271
    },
    {
        "content": "<p>Actually, this only made sushi happy.. but it didn't do what I wanted.</p>",
        "id": 221234402,
        "sender_full_name": "John Moehrke",
        "timestamp": 1609352987
    },
    {
        "content": "<p>what is missing? Do you have code somewhere to look at it?</p>",
        "id": 221236270,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1609354476
    },
    {
        "content": "<p>this seems to do it</p>\n<div class=\"codehilite\"><pre><span></span><code>Profile: MyPatientProfile\nParent: Patient\n* extension contains http://hl7.org/fhir/StructureDefinition/patient-disability named disability 0..1\n\nProfile: MyOtherPatientProfile\nParent: MyPatientProfile\n* extension[disability] 1..1\n</code></pre></div>",
        "id": 221236647,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1609354787
    },
    {
        "content": "<p>gives</p>\n<div class=\"codehilite\" data-code-language=\"JSON\"><pre><span></span><code><span class=\"nt\">\"kind\"</span><span class=\"p\">:</span><span class=\"nt\">\"resource\"</span>\n<span class=\"nt\">\"abstract\"</span><span class=\"p\">:</span><span class=\"kc\">false</span>\n<span class=\"nt\">\"type\"</span><span class=\"p\">:</span><span class=\"nt\">\"Patient\"</span>\n<span class=\"nt\">\"baseDefinition\"</span><span class=\"p\">:</span><span class=\"nt\">\"http://example.org/StructureDefinition/MyPatientProfile\"</span>\n<span class=\"nt\">\"derivation\"</span><span class=\"p\">:</span><span class=\"nt\">\"constraint\"</span>\n<span class=\"nt\">\"differential\"</span><span class=\"p\">:{</span>\n<span class=\"nt\">\"element\"</span><span class=\"p\">:[</span>\n<span class=\"p\">{</span>\n<span class=\"nt\">\"id\"</span><span class=\"p\">:</span><span class=\"nt\">\"Patient.extension\"</span>\n<span class=\"nt\">\"path\"</span><span class=\"p\">:</span><span class=\"nt\">\"Patient.extension\"</span>\n<span class=\"nt\">\"min\"</span><span class=\"p\">:</span><span class=\"mi\">1</span>\n<span class=\"p\">}</span>\n<span class=\"p\">{</span>\n<span class=\"nt\">\"id\"</span><span class=\"p\">:</span><span class=\"nt\">\"Patient.extension:disability\"</span>\n<span class=\"nt\">\"path\"</span><span class=\"p\">:</span><span class=\"nt\">\"Patient.extension\"</span>\n<span class=\"nt\">\"sliceName\"</span><span class=\"p\">:</span><span class=\"nt\">\"disability\"</span>\n<span class=\"nt\">\"min\"</span><span class=\"p\">:</span><span class=\"mi\">1</span>\n<span class=\"p\">}</span>\n<span class=\"p\">]</span>\n<span class=\"p\">}</span>\n</code></pre></div>",
        "id": 221236716,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1609354809
    },
    {
        "content": "<p>that is what I thought... but later that fails in the IG builder</p>",
        "id": 221240670,
        "sender_full_name": "John Moehrke",
        "timestamp": 1609357422
    },
    {
        "content": "<p>case... I used the wrong case</p>",
        "id": 221242508,
        "sender_full_name": "John Moehrke",
        "timestamp": 1609358897
    },
    {
        "content": "<p>shouldn't sushi complain when I say extension[TypeOfList] when there is no \"TypeOfList\", but rather \"typeOfList\"?</p>",
        "id": 221242541,
        "sender_full_name": "John Moehrke",
        "timestamp": 1609358947
    },
    {
        "content": "<p>That sounds like a good check they could add.</p>",
        "id": 221242675,
        "sender_full_name": "David Pyke",
        "timestamp": 1609359088
    },
    {
        "content": "<p>Yeah.  I'm kind of surprised SUSHI doesn't complain then.  I thought SUSHI would output an error about an invalid path.  In fact, I just tested this w/ Jose's example above and when I use <code>extension[Disability]</code> instead of <code>extension[disability]</code>, SUSHI does indeed give an error:</p>\n<blockquote>\n<p>error No element found at path extension[Disability] for MyOtherPatientProfile, skipping rule<br>\n Line: 7</p>\n</blockquote>\n<p>So, it seems I can't reproduce the case where SUSHI allows an invalid path (when it's invalid due to different case of the slice name).  I get an error (as I should).</p>",
        "id": 221259301,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1609375347
    },
    {
        "content": "<p>Given <span class=\"user-mention\" data-user-id=\"191469\">@Chris Moesel</span>  discussion, I checked again... My case was not exactly Jose's example. The problem is not simply a case issue. It is that my case-change (camelCase used) happened to align with the extension definition (PascalCase used). So I had defined my extension, not used a pre-existing one. </p>\n<blockquote>\n<p>Extension: TypeOfList</p>\n</blockquote>\n<p>I added that extension to my profile</p>\n<blockquote>\n<ul>\n<li>extension contains TypeOfList named typeOfList 0..1</li>\n</ul>\n</blockquote>\n<p>and tried to increase cardinality using the wrong one of these. I used the extension definition rather than the named </p>\n<blockquote>\n<p>* extension[TypeOfList] 1..1</p>\n</blockquote>\n<p>should have been</p>\n<blockquote>\n<ul>\n<li>extension[typeOfList] 1..1</li>\n</ul>\n</blockquote>\n<p>my IG git repo <a href=\"https://github.com/IHE/ITI.MHD\">https://github.com/IHE/ITI.MHD</a> if you want to see (comments welcome)</p>",
        "id": 221287294,
        "sender_full_name": "John Moehrke",
        "timestamp": 1609418173
    }
]