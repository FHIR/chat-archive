[
    {
        "content": "<p>I need to create a couple of modifier extensions.  When I try to use the ModifierExtension key word FSH doesn't recognize it.  Has support for this been implemented?  If so, what am I doing wrong?</p>",
        "id": 194320164,
        "sender_full_name": "Nathan Davis",
        "timestamp": 1587050265
    },
    {
        "content": "<p>there is no ModifierExtension.  modifier extensions are just regular extensions that are declared in the modifierExtension array.  So:</p>\n<ul>\n<li>modifierExtension contains text 1..1 MS</li>\n<li>modifierExtension[text].value[x] only string</li>\n</ul>",
        "id": 194321975,
        "sender_full_name": "Jean Duteau",
        "timestamp": 1587050838
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"192166\">@Jean Duteau</span> is correct -- \"modifier extensions\" are defined in the <code>modifierExtension</code> element where they are used, and that <em>should</em> be enough.  That said, the FHIR documentation on <a href=\"http://hl7.org/fhir/R4/defining-extensions.html#ed\" title=\"http://hl7.org/fhir/R4/defining-extensions.html#ed\">Use of ElementDefinition in Extension Definitions</a> also indicates that you can set the <code>isModifier</code> flag on the root element of an Extension definition.  So you could also do this to indicate that the extension is always a modifier:</p>\n<div class=\"codehilite\"><pre><span></span>Extension: MyModifierExtension\n// ... other metadata\n* . ^isModifier = true\n</pre></div>\n\n\n<p>I haven't personally seen this approach used, but as noted above, the spec seems to imply it can be used this way.  That said, when you actually use the extension in a profile, you still <em>must</em> use it in the <code>modifierExtension</code> element of the profile (or element).</p>",
        "id": 194323767,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1587051478
    },
    {
        "content": "<p>Okay, resurrecting this thread because I'm now trying to use an extension in a modifierExtension array and I'm getting publisher arrays because the extension isn't defined as a modifier extension, so I think that we need to do the ^isModifier = true thing.</p>",
        "id": 207300273,
        "sender_full_name": "Jean Duteau",
        "timestamp": 1597777089
    },
    {
        "content": "<p>Good to know, <span class=\"user-mention\" data-user-id=\"192166\">@Jean Duteau</span>.  If this is a requirement of the publisher, then we could potentially put an error-check in SUSHI so this type of thing is discovered before you invoke the publisher.</p>",
        "id": 207560886,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1597950019
    },
    {
        "content": "<p>Logged: <a href=\"https://github.com/FHIR/sushi/issues/576\">https://github.com/FHIR/sushi/issues/576</a></p>",
        "id": 207562466,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1597950849
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"192166\">@Jean Duteau</span> - did you get all that working? I'm having issues with modifierExtensions in examples - I have an example in the input folder containing a modifierExtension (actually in a nested PlanDefinition.action.action element), but the IGPublisher seems to remove them when it publishes - no obvious reason why (yet)...</p>",
        "id": 213213383,
        "sender_full_name": "David Hay",
        "timestamp": 1602621447
    },
    {
        "content": "<p>Yes, I did get it working.</p>\n<p>Profile: PASClaimUpdate<br>\nParent: PASClaim<br>\nId: profile-claim-update<br>\nTitle: \"PAS Claim Update\"<br>\nDescription: \"PAS constraints on Claim resource when submitting an update to a previous PAS prior authorization request\"</p>\n<ul>\n<li>supportingInfo.modifierExtension contains InfoCancelledFlag named infoCancelledFlag 0..1</li>\n<li>item.modifierExtension contains InfoCancelledFlag named infoCancelledFlag 0..1</li>\n</ul>\n<p>Extension: InfoCancelledFlag<br>\nId: modifierextension-infoCancelled<br>\nDescription: \"A flag indicating whether the piece of information was cancelled.\"</p>\n<ul>\n<li>. ^isModifier = true</li>\n<li>. ^isModifierReason = \"Indicates that this piece of information is not to be used.\"</li>\n<li>value[x] only boolean</li>\n</ul>\n<p>Instance: ClaimSubmitHomecareDifferentialExample<br>\nInstanceOf: PASClaimUpdate<br>\nTitle: \"Submit Claim Update Differential Example\"<br>\nDescription: \"An example of a Claim resource updating a prior authorization.\"</p>\n<ul>\n<li>item[0].sequence = 2</li>\n<li>item[0].modifierExtension[infoCancelledFlag].valueBoolean = true</li>\n<li>item[0].productOrService = <a href=\"http://www.ama-assn.org/go/cpt#B4184\">http://www.ama-assn.org/go/cpt#B4184</a></li>\n</ul>",
        "id": 213215535,
        "sender_full_name": "Jean Duteau",
        "timestamp": 1602622595
    },
    {
        "content": "<p>and it all published ok? I can get the instance from sushi, but it doesn't make it into the Ig (at least the modifierExtensions are removed). I am using a complex extension, so that may complicate things...</p>",
        "id": 213216095,
        "sender_full_name": "David Hay",
        "timestamp": 1602622868
    },
    {
        "content": "<p>Yes.   <a href=\"http://build.fhir.org/ig/HL7/davinci-pas/Claim-ClaimSubmitHomecareUpdateExample.json.html\">http://build.fhir.org/ig/HL7/davinci-pas/Claim-ClaimSubmitHomecareUpdateExample.json.html</a></p>",
        "id": 213216353,
        "sender_full_name": "Jean Duteau",
        "timestamp": 1602622961
    },
    {
        "content": "<p>ta. something I'm doing then. sigh.</p>",
        "id": 213217245,
        "sender_full_name": "David Hay",
        "timestamp": 1602623421
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191321\">@David Hay</span> which sushi version?</p>",
        "id": 213220629,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1602625272
    },
    {
        "content": "<p>0.16.0</p>",
        "id": 213224479,
        "sender_full_name": "David Hay",
        "timestamp": 1602627902
    },
    {
        "content": "<p>looks like an <a href=\"#narrow/stream/179252-IG-creation/topic/modifierExtension.20removed.20by.20IG.20publisher\">IG Publisher</a> issue....</p>",
        "id": 213329872,
        "sender_full_name": "David Hay",
        "timestamp": 1602698631
    },
    {
        "content": "<p>Hi Guys,<br>\nIm experience a problem with modifiers extensions in the last version of SUSHI, it giving this error:<br>\nerror Cannot create healthProblem extension; unable to locate extension definition for: OHCHealthProblemConditionExtension.<br>\nI think it's the definition of he extension, that must be ModifierExtension, but i don't know how to do this, can anyone give a hand?. The extension defintion is this :</p>\n<p>Extension: OHCHealthProblemConditionExtension<br>\nId:   ohc-health-problem-condition-extension<br>\nTitle:  \"OHC-health-problem-condition-extension\"<br>\nDescription: \"Extension for indicating if a condition, diagnosis, is a Health Problem\"<br>\n// publisher, contact, and other metadata could be defined here using caret syntax (omitted)</p>\n<ul>\n<li>value[x] only boolean </li>\n</ul>\n<p>Thank in advance.<br>\nRegard Juanello.</p>",
        "id": 272244355,
        "sender_full_name": "Juan Manuel Caputo",
        "timestamp": 1645096290
    },
    {
        "content": "<p>Hi <span class=\"user-mention\" data-user-id=\"365661\">@Juan Manuel Caputo</span>.  If the extension definition should be a modifier extension, then you need to set the <code>isModifier</code> flag to <code>true</code> on the extension definition's root element.  It's also good to set <code>isModifierReason</code> in these cases too.  You can do this in FSH like this:</p>\n<div class=\"codehilite\"><pre><span></span><code>Extension: OHCHealthProblemConditionExtension\nId: ohc-health-problem-condition-extension\nTitle: &quot;OHC-health-problem-condition-extension&quot;\nDescription: &quot;Extension for indicating if a condition, diagnosis, is a Health Problem&quot;\n* . ^isModifier = true\n* . ^isModifierReason = &quot;Modifies the meaning of...&quot;\n* value[x] only boolean\n</code></pre></div>\n<p><strong>BUT</strong> <em>the extension described above does not sound like it should be a modifier extension to me.</em>  It does not fundamentally change the meaning of the thing that is is applied to.  So... you might want to reconsider if this really needs to be a modifier extension.</p>",
        "id": 272262305,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1645106252
    },
    {
        "content": "<p>All that said, I don't see how or why this would cause the error you described (\"Cannot create healthProblem extension\").  It is more likely the the issue is w/ the FSH that includes the extension into a profile.  Is the profile definition where you are trying to include this extension in the same FSH project (IG) as the extension definition?</p>",
        "id": 272262619,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1645106384
    },
    {
        "content": "<p>Chris finally we tried your solution, and it worked!. We putted this new attributes in the extension definition. I think this hasn't be included in the main guide, do you think that this can be included?.  <br>\nThank you very much.<br>\nRegards</p>",
        "id": 272708938,
        "sender_full_name": "Juan Manuel Caputo",
        "timestamp": 1645460484
    }
]