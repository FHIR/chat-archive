[
    {
        "content": "<p>In CarinBB we required meta.profile 1..*, but what we meant was that an instance of each profile must declare that it is an instance of that profile.</p>\n<p>Since meta.profile is 1..* (not 1..1), how can I specify that ONE of the values is equal to the canonical URL for that profile?</p>",
        "id": 218621228,
        "sender_full_name": "Saul Kravitz",
        "timestamp": 1606943986
    },
    {
        "content": "<p>I don't understand the question. You have a profile P1 and in there you declare that all instance resources shall have at least one meta-profile...</p>",
        "id": 218630847,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1606948981
    },
    {
        "content": "<p>do you want to go beyond \"at least one value\" and require \"at least this value once\"?</p>",
        "id": 218631020,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1606949088
    },
    {
        "content": "<p>I think he's looking for instances of the profile are required to declare that in meta.profile.</p>",
        "id": 218631464,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1606949337
    },
    {
        "content": "<p>I'm assuming it ties back to <a href=\"#narrow/stream/179252-IG-creation/topic/Requiring.20meta.2Eprofile.20be.20populated/near/210455639\">https://chat.fhir.org/#narrow/stream/179252-IG-creation/topic/Requiring.20meta.2Eprofile.20be.20populated/near/210455639</a>.</p>",
        "id": 218631858,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1606949596
    },
    {
        "content": "<p>I'd guess the cleanest would be to use slicing (never thought I'd say those words together =).  It will probably look something like:</p>\n<div class=\"codehilite\"><pre><span></span><code>Profile: TestProfile\nParent:  Meta\n* profile ^slicing.discriminator.type = #value\n* profile ^slicing.discriminator.path = &quot;$this&quot;\n* profile ^slicing.rules = #open\n* profile ^slicing.ordered = false\n* profile ^slicing.description = &quot;Slice based on value&quot;\n* profile contains supportedProfile 1..1 MS\n* profile[supportedProfile] 1..1 MS\n* profile[supportedProfile] = &quot;http://example.org/profile&quot;\n</code></pre></div>\n<p>Though I'm no expert, so it may not be 100%.  Note that if you have examples with other values in there (likely), it will throw warnings about slices that don't match the slice discriminator - this is fine to add to ignorewarning.txt.</p>\n<p>(also, we should add FSH to the list of langauges in Zulip)</p>",
        "id": 218632311,
        "sender_full_name": "Gino Canessa",
        "timestamp": 1606949823
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"222054\">Gino Canessa</span> <a href=\"#narrow/stream/215610-shorthand/topic/meta.2Eprofile.20requirement/near/218632311\">said</a>:</p>\n<blockquote>\n<p>(also, we should add FSH to the list of langauges in Zulip)</p>\n</blockquote>\n<p><span aria-label=\"+1\" class=\"emoji emoji-1f44d\" role=\"img\" title=\"+1\">:+1:</span></p>",
        "id": 218632472,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1606949900
    },
    {
        "content": "<p>I was going to suggest what <span class=\"user-mention\" data-user-id=\"222054\">@Gino Canessa</span> has already suggested: the best way to say \"one of the things in this array should look like this\" is through slicing.  The only modification I'd suggest to the FSH that Gino arleady supplied is that if the discriminator type is <code>#value</code> than the assignment rule (last line of code in the example) should use <code>(exactly)</code> so that it uses the <code>value[x]</code> constraint (rather than the <code>pattern[x]</code> constraint).  Or, if you prefer, keep using <code>=</code> without <code>(exactly)</code> and change the discriminator type to <code>#pattern</code>.</p>",
        "id": 218644657,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1606959767
    },
    {
        "content": "<blockquote>\n<p>(also, we should add FSH to the list of langauges in Zulip)</p>\n</blockquote>\n<p>Based on <a href=\"https://zulip.com/help/format-your-message-using-markdown#code\">this</a>, it looks like Zulip uses <a href=\"https://pygments.org/docs/lexers/\">Pygments</a> -- but it's not clear if we can congifure our own language implementations for a Zulip instance.  If someone can confirm that this is possible, we'd be glad to look into it!</p>",
        "id": 218645091,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1606960201
    },
    {
        "content": "<p>Thanks <span class=\"user-mention\" data-user-id=\"222054\">@Gino Canessa</span> and <span class=\"user-mention\" data-user-id=\"191469\">@Chris Moesel</span> .   </p>\n<p>As a comment on the FHIR Specification:  This seems like a remarkably complicated way to express a simple requirement.</p>",
        "id": 218695924,
        "sender_full_name": "Saul Kravitz",
        "timestamp": 1607004084
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"215604\">@Saul Kravitz</span> -- at one point we were thinking of adding a \"ginzu slicing\" feature to FHIR Shorthand that would hide some of the complication in things like this.  If we had ginzu slicing, then you would not need to specify any of the slicing rules in this specific use case (since it is a fairly common one); SUSHI would figure them out for you based on how you define the individual slices.</p>\n<p>I don't know if we'll ever do ginzu slicing, but if it's something you'd like to see, then let us know so we can tabulate the votes. ;-)</p>",
        "id": 218700341,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1607006103
    },
    {
        "content": "<p>Oh, by the way, I just realized, in Gino's example, you also don't need the line <code>* profile[supportedProfile] 1..1 MS</code> since the <code>contains</code> rule already specifies that information.</p>",
        "id": 218700544,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1607006179
    },
    {
        "content": "<p>Works beautifully -- thx.<br>\n<a href=\"https://build.fhir.org/ig/HL7/carin-bb/branches/v1.0.1/StructureDefinition-C4BB-ExplanationOfBenefit-Inpatient-Institutional.html#profile\">https://build.fhir.org/ig/HL7/carin-bb/branches/v1.0.1/StructureDefinition-C4BB-ExplanationOfBenefit-Inpatient-Institutional.html#profile</a></p>",
        "id": 218759086,
        "sender_full_name": "Saul Kravitz",
        "timestamp": 1607032065
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191469\">@Chris Moesel</span>  I don't know what ginzu slicing is, but... would it be worthwhile having a library of standard RuleSets (macros) that users could insert? Or even better parameterized Rulesets.</p>\n<ul>\n<li>insert RequireProfile(Canonical(profilename))</li>\n</ul>\n<p>Currently I had to do this in each profile, and I had to define the ruleset following what you guys told me like a monkey.</p>\n<ul>\n<li>insert Metaprofile-supportedProfile-slice</li>\n<li>meta.profile[supportedProfile] = Canonical(C4BBOrganization)</li>\n</ul>",
        "id": 218762507,
        "sender_full_name": "Saul Kravitz",
        "timestamp": 1607033747
    }
]