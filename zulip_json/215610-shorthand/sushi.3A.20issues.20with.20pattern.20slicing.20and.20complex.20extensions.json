[
    {
        "content": "<p>I'm trying to create an example Instance of this profile: <a href=\"https://simplifier.net/erezeptabgabedaten/abrechnungszeilen-duplicate-2\">https://simplifier.net/erezeptabgabedaten/abrechnungszeilen-duplicate-2</a></p>",
        "id": 225142544,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1612434877
    },
    {
        "content": "<p>lineItem.chargeItemCodeableConcept is sliced by pattern, all Codings are 0..1</p>",
        "id": 225142576,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1612434916
    },
    {
        "content": "<p>sushi complains about the Coding: </p>\n<div class=\"codehilite\"><pre><span></span><code>error Cannot assign [object Object] to this element; a different Coding is already assigned: {&quot;system&quot;:&quot;http://TA1.abda.de&quot;}.\n  File: /Users/patrickwerner/IdeaProjects/shushi-playground/input/fsh/abrechnungszeilen.fsh\n  Line: 9\n</code></pre></div>",
        "id": 225142665,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1612434973
    },
    {
        "content": "<p><a href=\"http://TA1.abda.de\">http://TA1.abda.de</a> is also a valid system uri from another slice. If i change it to this system, sushi now complains about another system.uri of the 3 slices.</p>",
        "id": 225142725,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1612435030
    },
    {
        "content": "<p><a href=\"https://github.com/patrick-werner/shushi-playground/blob/main/input/fsh/abrechnungszeilen.fsh\">https://github.com/patrick-werner/shushi-playground/blob/main/input/fsh/abrechnungszeilen.fsh</a></p>",
        "id": 225142883,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1612435147
    },
    {
        "content": "<p>You can check out the whole project, needed snapshot of profile already included.</p>",
        "id": 225142903,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1612435168
    },
    {
        "content": "<p>Second Issue: <br>\nThis profile uses this Extension: <a href=\"https://simplifier.net/erezeptabgabedaten/zusatzattribute\">https://simplifier.net/erezeptabgabedaten/zusatzattribute</a></p>",
        "id": 225142988,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1612435212
    },
    {
        "content": "<p>sushi can't find the element: </p>\n<div class=\"codehilite\"><pre><span></span><code> The element or path you referenced does not exist: lineItem.extension[http://fhir.abda.de/eRezeptAbgabedaten/StructureDefinition/Zusatzattribute].extension[ZusatzattributFAM].extension[Markt].extension[Gruppe].valueCodeableConcept\n</code></pre></div>",
        "id": 225145159,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1612436756
    },
    {
        "content": "<p>but this is the correct path (i think)</p>",
        "id": 225145304,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1612436847
    },
    {
        "content": "<p>fsh file: <a href=\"https://github.com/patrick-werner/shushi-playground/blob/main/input/fsh/abrechnungszeilen-Extension.fsh\">https://github.com/patrick-werner/shushi-playground/blob/main/input/fsh/abrechnungszeilen-Extension.fsh</a></p>",
        "id": 225145592,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1612437045
    },
    {
        "content": "<p>git link: git@github.com:patrick-werner/shushi-playground.git</p>",
        "id": 225145651,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1612437084
    },
    {
        "content": "<p>It looks like the first issue is some sort of bug, we will need to investigate more to figure out exactly what is going on, but I think you can accomplish what you want by doing this:</p>\n<div class=\"codehilite\"><pre><span></span><code>* lineItem[0].chargeItemCodeableConcept.coding[PZN] = http://fhir.de/CodeSystem/ifa/pzn#1\n</code></pre></div>\n<p>For the second issue, it looks like there is no definition available to SUSHI for the <a href=\"http://fhir.abda.de/eRezeptAbgabedaten/StructureDefinition/Zusatzattribute\">http://fhir.abda.de/eRezeptAbgabedaten/StructureDefinition/Zusatzattribute</a> extension. SUSHI needs to have the definition of that extension (and any sub extensions) available, in the same way you've made the Abrechnungszeilen profile available.</p>",
        "id": 225154135,
        "sender_full_name": "Nick Freiter",
        "timestamp": 1612442848
    },
    {
        "content": "<p>thanks <span class=\"user-mention\" data-user-id=\"239822\">@Nick Freiter</span> !!!</p>",
        "id": 225161986,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1612447052
    },
    {
        "content": "<p>Ok i applied the first work around, works, thanks again <span class=\"user-mention\" data-user-id=\"239822\">@Nick Freiter</span> <br>\nI now also included the whole underlying IG (including the Extension in question) as snapshots into the project, still the same error on the extension: </p>\n<div class=\"codehilite\"><pre><span></span><code>error The element or path you referenced does not exist: lineItem.extension[http://fhir.abda.de/eRezeptAbgabedaten/StructureDefinition/Zusatzattribute].extension[ZusatzattributFAM].extension[Markt].extension[Gruppe].valueCodeableConcept\n  File: /Users/patrickwerner/IdeaProjects/shushi-playground/input/fsh/abrechnungszeilen-Extension.fsh\n  Line: 10\n</code></pre></div>",
        "id": 225172145,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1612451580
    },
    {
        "content": "<p>path from the Extension StrucDef: <code>\"id\": \"Extension.extension:ZusatzattributFAM.extension:Markt.extension:Gruppe\"</code></p>",
        "id": 225175483,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1612452883
    },
    {
        "content": "<p>It looks like the URL for the first extension may be different from the URL in the StructureDefinition you are loading in. Does this work:</p>\n<div class=\"codehilite\"><pre><span></span><code>* lineItem[=].extension[http://fhir.abda.de/eRezeptAbgabedaten/StructureDefinition/Extension-Zusatzattribute].extension[ZusatzattributFAM].extension[Markt].extension[Gruppe].valueCodeableConcept = http://fhir.abda.de/eRezeptAbgabedaten/CodeSystem/Zusatzattribut-Gruppe#1\n</code></pre></div>\n<p>You should also be able to just simply reference the Extension more simply by name: </p>\n<div class=\"codehilite\"><pre><span></span><code>* lineItem[=].extension[Zusatzattribute].extension[ZusatzattributFAM].extension[Markt].extension[Gruppe].valueCodeableConcept = http://fhir.abda.de/eRezeptAbgabedaten/CodeSystem/Zusatzattribut-Gruppe#1\n</code></pre></div>",
        "id": 225178905,
        "sender_full_name": "Nick Freiter",
        "timestamp": 1612454286
    },
    {
        "content": "<p>oh the url got changed and i missed it. <span class=\"user-mention\" data-user-id=\"239822\">@Nick Freiter</span> thanks so much again.</p>",
        "id": 225208818,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1612466537
    },
    {
        "content": "<p>problem of a mixed Forge/Sushi project. Will convince my client to fully move to sushi.</p>",
        "id": 225208926,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1612466588
    },
    {
        "content": "<p>What do you think about giving out a dedicated warning/error if an Instance references something unknown? Instead of reporting the non-existing element, the fact that the referenced StrucDef is missing would be nice and direct people to the causing issue.</p>",
        "id": 225209352,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1612466766
    }
]