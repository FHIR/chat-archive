[
    {
        "content": "<p>Hi folks -- I am trying to do this sort of thing, but I could be confused:</p>\n<div class=\"codehilite\"><pre><span></span><code>Profile: DataElementObservation\nParent: Observation\nDescription: &quot;Base data element using Observation, adds in CPG valueExpression and instantiates case feature behavior&quot;\n* ^meta.profile[0] = http://hl7.org/fhir/uv/cpg/StructureDefinition/cpg-casefeaturedefinition\n* ^experimental = true\n* ^extension\n    contains http://hl7.org/fhir/uv/cpg/StructureDefinition/cpg-inferenceExpression\n    named inferenceExpression 0..1 MS\n</code></pre></div>\n\n\n<p>E.g. add an extension to the StructureDefinition itself. There are syntax errors <code>mismatched input 'contains' expecting '='</code>. I assume I don't know what I am doing...</p>",
        "id": 201186047,
        "sender_full_name": "Brian Kaney",
        "timestamp": 1592420463
    },
    {
        "content": "<p>You don't need the ^ before extension.</p>",
        "id": 201186526,
        "sender_full_name": "David Pyke",
        "timestamp": 1592420666
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"192587\">David Pyke</span> <a href=\"#narrow/stream/215610-shorthand/topic/Extension.20on.20a.20Profile/near/201186526\">said</a>:</p>\n<blockquote>\n<p>You don't need the ^ before extension.</p>\n</blockquote>\n<p>I want the extension on the structure definition itself though</p>",
        "id": 201186597,
        "sender_full_name": "Brian Kaney",
        "timestamp": 1592420706
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191782\">@Brian Kaney</span> -- but you don't want to constrain the SD to say it may contain that extension then, right?  You actually want to add the extension <em>with a value</em> to the SD representing that profile.  Is that right?</p>",
        "id": 201186792,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1592420809
    },
    {
        "content": "<p>In this case I want to constrain the SD. Hey <span class=\"user-mention\" data-user-id=\"191359\">@Bryn Rhodes</span>  do you think you could help explain this a bit more?</p>",
        "id": 201186881,
        "sender_full_name": "Brian Kaney",
        "timestamp": 1592420878
    },
    {
        "content": "<p>To <em>constrain</em> an SD, then you need to profile <code>StructureDefinition</code> -- because you can only constrain things you inherit.  When you create a profile on <code>Observation</code>, you can only constrain <code>Observation</code> itself.  The profile on Observation is an <em>instance</em> of an SD, so it only makes sense to set values in the SD, not to constrain it...  Unless I'm really misunderstanding something here.</p>",
        "id": 201187688,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1592421345
    },
    {
        "content": "<p>I see, this I think works:</p>\n<div class=\"codehilite\"><pre><span></span><code>Profile: BaseDataElement\nParent: http://hl7.org/fhir/uv/cpg/StructureDefinition/cpg-casefeaturedefinition\n* extension\n    contains http://hl7.org/fhir/uv/cpg/StructureDefinition/cpg-inferenceExpression\n    named inferenceExpression 0..1 MS\n\nProfile: DataElementObservation\nParent: Observation\nDescription: &quot;Data element using Observation, adds in CPG valueExpression and instantiates case feature behavior&quot;\n* ^meta.profile[0] = http://company/StructureDefinition/BaseDataElement\n* ^experimental = true\n</code></pre></div>",
        "id": 201189721,
        "sender_full_name": "Brian Kaney",
        "timestamp": 1592422483
    },
    {
        "content": "<p>Right, what we're saying with cpg-caseFeatureDefinition is that it defines extensions on StructureDefinition to allow you to specify the inference expression for the data element. But if I'm reading that BaseDataElement right, it's not saying anything more than is already said by the cpg-casefeaturedefinition profile (that inferenceExpression is a mustSupport 0..1 extension), right?</p>",
        "id": 201201842,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1592428647
    },
    {
        "content": "<p>Yea <span class=\"user-mention\" data-user-id=\"191359\">@Bryn Rhodes</span> , I am pruning down the example to get the structure correct.</p>",
        "id": 201214320,
        "sender_full_name": "Brian Kaney",
        "timestamp": 1592437544
    }
]