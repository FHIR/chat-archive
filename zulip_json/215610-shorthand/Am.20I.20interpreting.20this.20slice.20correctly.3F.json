[
    {
        "content": "<p>Hi!<br>\nI am trying to write a fsh to create a profile. I would like to specify that an attribute has cardinality 1..1 and that it has to be of one of some specified datatypes. Also, I set the short description for the attribute and some of its children. So I wrote the following rules</p>\n<div class=\"codehilite\"><pre><span></span><code>* value[x] only Quantity\n* valueQuantity ^short = &quot;{mätetalet i grader Celsius (kod: cel) med 0-1 decimal}&quot;\n* value[x] 1..1\n* valueQuantity.unit ^short = &quot;{den mätskala som värdet är uppmätt på i de fall då detta inte uttrycks i attributet typ eller värde}&quot;\n</code></pre></div>\n<p>I feed it to the sushi chef and get out what you see in the attached picture.<br>\nDo you think the output achieves what I want? I am in particular confused by the presence of the slice on value[x], since I don't think I explicitly define a slice..</p>\n<p><a href=\"/user_uploads/10155/6D3zyWYszDqpXYKFSwQU75MS/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/6D3zyWYszDqpXYKFSwQU75MS/image.png\" title=\"image.png\"><img src=\"/user_uploads/10155/6D3zyWYszDqpXYKFSwQU75MS/image.png\"></a></div>",
        "id": 226953953,
        "sender_full_name": "Gino Almondo",
        "timestamp": 1613736160
    },
    {
        "content": "<p>Hi <span class=\"user-mention\" data-user-id=\"363609\">@Gino Almondo</span>! I think your FSH is technically correct, but as you might guess, there is more than one way to do what you're looking to do!</p>\n<p>The reason you see a slice is because you used a path with <code>valueQuantity</code>.  Whenever there is a choice in FHIR (e.g., <code>value[x]</code>), you refer to specific elements of the choice by using a <a href=\"http://hl7.org/fhir/R4/profiling.html#discriminator\">type slice</a>. When you use a path like <code>valueQuantity</code> in SUSHI, SUSHI knows to create a slice to refer to that type in the choice.  That said, SUSHI will do this no matter what -- even if the choice was restricted to a single type already (in which case, it's probably not necessary to slice).</p>\n<p>If you've restricted a choice to a single type, then you can always just continue to refer to it using the choice path (<code>value[x]</code>) in order to avoid unnecessary slicing.  Since it's been restricted to only <code>Quantity</code>, SUSHI knows that when you say <code>value[x]</code> you are referring to a <code>Quantity</code>.  So you could rewrite your FSH like this if you prefer:</p>\n<div class=\"codehilite\"><pre><span></span><code>* value[x] only Quantity\n* value[x] ^short = &quot;{mätetalet i grader Celsius (kod: cel) med 0-1 decimal}&quot;\n* value[x] 1..1\n* value[x].unit ^short = &quot;{den mätskala som värdet är uppmätt på i de fall då detta inte uttrycks i attributet typ eller värde}&quot;\n</code></pre></div>\n<p>If you do it that way, you won't see <code>valueQuantity</code> specifically in the published output, but you will see that <code>value[x]</code> is only a <code>Quantity</code> -- and semantically it's basically the same.  Some people prefer this approach because it does look cleaner as well.</p>",
        "id": 226966702,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1613743416
    },
    {
        "content": "<p>Thank you <span class=\"user-mention\" data-user-id=\"191469\">@Chris Moesel</span> for the clear explanation! <br>\nSlicing is still a bit mystical for me tbh <span aria-label=\"grimacing\" class=\"emoji emoji-1f62c\" role=\"img\" title=\"grimacing\">:grimacing:</span></p>",
        "id": 226974002,
        "sender_full_name": "Gino Almondo",
        "timestamp": 1613746593
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"363609\">Gino Almondo</span> <a href=\"#narrow/stream/215610-shorthand/topic/Am.20I.20interpreting.20this.20slice.20correctly.3F/near/226974002\">said</a>:</p>\n<blockquote>\n<p>Slicing is still a bit mystical for me tbh <span aria-label=\"grimacing\" class=\"emoji emoji-1f62c\" role=\"img\" title=\"grimacing\">:grimacing:</span></p>\n</blockquote>\n<p>Don't worry, Gino -- you are in good company on that one! ;-)</p>",
        "id": 226974162,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1613746662
    }
]