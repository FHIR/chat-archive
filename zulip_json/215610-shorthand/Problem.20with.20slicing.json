[
    {
        "content": "<p>I try to do some slicing using fsh:</p>\n<ul>\n<li>serviceCategory ^slicing.discriminator.type = #value</li>\n<li>serviceCategory ^slicing.discriminator.path = \"coding.system\"</li>\n<li>\n<p>serviceCategory ^slicing.rules = #open</p>\n</li>\n<li>\n<p>serviceCategory contains<br>\n    Kostenstelle 0..1 and<br>\n    Funktionsbereich 0..1</p>\n</li>\n<li>\n<p>serviceCategory[Kostenstelle].coding.system = \"<a href=\"http://fhir.uniklinik-freiburg.de/ig/appointment/CodeSystem/UkfKostenstellenCS\">http://fhir.uniklinik-freiburg.de/ig/appointment/CodeSystem/UkfKostenstellenCS</a>\"</p>\n</li>\n<li>\n<p>serviceCategory[Kostenstelle].coding.code from UkfKostenstellenVS (example)</p>\n</li>\n<li>\n<p>serviceCategory[Funktionsbereich].coding.system = \"<a href=\"http://fhir.uniklinik-freiburg.de/ig/appointment/CodeSystem/UkfFktbereicheTPCS\">http://fhir.uniklinik-freiburg.de/ig/appointment/CodeSystem/UkfFktbereicheTPCS</a>\"</p>\n</li>\n<li>serviceCategory[Funktionsbereich].coding.code from UkfFktbereicheTPVS (example)</li>\n</ul>\n<p>In the example I use:</p>\n<ul>\n<li>serviceCategory[Funktionsbereich].coding.code = #757</li>\n<li>serviceCategory[Funktionsbereich].text = \"Chirurgie CT\"</li>\n</ul>\n<p>sushi compliles  this with no error. <br>\nThe quality-report from IG-Publisher said:</p>\n<blockquote>\n<blockquote>\n<blockquote>\n<p>Appointment/Patiententermin: Appointment.serviceCategory[0] (l10/c6)    error   Nicht unterstützter fixed Pattern Type fÃ¼r Diskriminator(coding.system) für Slice Appointment.serviceCategory:Kostenstelle: org.hl7.fhir.r5.model.UriType<br>\nAppointment/Patiententermin: Appointment.serviceCategory[1] (l19/c6)    error   Nicht unterstützter fixed Pattern Type fÃ¼r Diskriminator(coding.system) für Slice Appointment.serviceCategory:Kostenstelle: org.hl7.fhir.r5.model.UriType<br>\nAppointment/Patiententermin: Appointment.serviceCategory[0] (l10/c6)    error   Nicht unterstützter fixed Pattern Type fÃ¼r Diskriminator(coding.system) für Slice Appointment.serviceCategory:Funktionsbereich: org.hl7.fhir.r5.model.UriType<br>\nAppointment/Patiententermin: Appointment.serviceCategory[1] (l19/c6)    error   Nicht unterstützter fixed Pattern Type fÃ¼r Diskriminator(coding.system) für Slice Appointment.serviceCategory:Funktionsbereich: org.hl7.fhir.r5.model.UriType<br>\n&lt;&lt;&lt;&lt;</p>\n</blockquote>\n</blockquote>\n</blockquote>\n<p>I don't have any more idea, where's the problem. Can anybody help me?</p>\n<p>Thank you very much!</p>\n<p>Michael</p>",
        "id": 197187968,
        "sender_full_name": "Michael Sauer",
        "timestamp": 1589222934
    },
    {
        "content": "<p>you could try:</p>\n<p>serviceCategory[Kostenstelle].coding.system = \"<a href=\"http://fhir.uniklinik-freiburg.de/ig/appointment/CodeSystem/UkfKostenstellenCS\">http://fhir.uniklinik-freiburg.de/ig/appointment/CodeSystem/UkfKostenstellenCS</a>\" <strong>(exactly)</strong></p>",
        "id": 197190362,
        "sender_full_name": "David Hay",
        "timestamp": 1589224058
    },
    {
        "content": "<p>I had a similar problem with valueCoding (if I'm reading your issue correctly) where I couldn't define a fixed system for the slice, but looking at other implementations that did similar, they actually had a binding to a valueset and only included codes from the one system in the valueset. <br>\nI don't know if that would work for your usecase but it worked for me.</p>",
        "id": 197192927,
        "sender_full_name": "ryan moehrke",
        "timestamp": 1589225332
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191321\">@David Hay</span> didn't work. I tried this before.</p>\n<p>I think the problem is maybe, that coding is 0..* in serviceCategory</p>",
        "id": 197194273,
        "sender_full_name": "Michael Sauer",
        "timestamp": 1589225960
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"237342\">@ryan moehrke</span> In my case, I need different value sets depending from the system. So that wouldn't help. Thank you for the idea.</p>",
        "id": 197195485,
        "sender_full_name": "Michael Sauer",
        "timestamp": 1589226501
    },
    {
        "content": "<p>Based on the error message from the IG Publisher, it seems like this could be related to some of the issues users were having in this thread: <a href=\"#narrow/stream/179252-IG-creation/topic/New.20validation.20error.20.22Unsupported.20fixed.20pattern.20type.2E.2E.2E.22\">https://chat.fhir.org/#narrow/stream/179252-IG-creation/topic/New.20validation.20error.20.22Unsupported.20fixed.20pattern.20type.2E.2E.2E.22</a>.</p>\n<p>Some pattern types are not supported by the IG Publisher, and perhaps <code>uri</code> is one of those types? This seems to be the issue, but I'm not totally sure, because if this is what is causing your issue, I would have expected the solution suggested by <span class=\"user-mention\" data-user-id=\"191321\">@David Hay</span> to work. Is there a similar error from the IG Publisher when the <code>(exactly)</code> keyword is used? Or is there an error from SUSHI in that case?</p>",
        "id": 197200084,
        "sender_full_name": "Nick Freiter",
        "timestamp": 1589228698
    },
    {
        "content": "<p>How about: serviceCategory ^slicing.discriminator.path = \"coding.system\"  =&gt; serviceCategory ^slicing.discriminator.path = \"system\"</p>\n<p>and does changing the discriminator type to 'pattern' help?</p>",
        "id": 197200813,
        "sender_full_name": "David Hay",
        "timestamp": 1589229076
    },
    {
        "content": "<p>I had the same problem with all my slicing and solved as David says by adding (exactly) at every fixed system.</p>",
        "id": 197237471,
        "sender_full_name": "Etienne Cantineau",
        "timestamp": 1589264604
    },
    {
        "content": "<p>Thank you all for your support! All together you brougth me on the right way. <br>\nI had mixed up some things:</p>\n<p>serviceCategory[Kostenstelle].coding.system = \"<a href=\"http://fhir.uniklinik-freiburg.de/ig/appointment/CodeSystem/UkfKostenstellenCS\">http://fhir.uniklinik-freiburg.de/ig/appointment/CodeSystem/UkfKostenstellenCS</a>\" (exactly)</p>\n<p>worked with ig-publisher. I had tested it with SMILE-CDR and there it doesn't work.<br>\nBut with the advice of Nick I changed the type of  from \"uri\" to \"string\" and: now it works! :-)</p>",
        "id": 197290363,
        "sender_full_name": "Michael Sauer",
        "timestamp": 1589296244
    }
]