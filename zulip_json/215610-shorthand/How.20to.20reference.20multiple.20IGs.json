[
    {
        "content": "<p>I am new to FSH and have not been able to find any documentation to fix the issue I am currently encountering. Basically, for my custom IG I need to reference both the core FHIR v4 and US Core v3 specifications. I included the 2 dependencies in my package.json file as shown below. I need this so that I can extend my Patient resource using the USCore Patient profile but for other resources like Encounter I want to extend the core FHIR profile. </p>\n<p>\"dependencies\": {<br>\n    \"hl7.fhir.r4.core\": \"4.0.1\",<br>\n    \"hl7.fhir.us.core\": \"3.1.0\"<br>\n  },<br>\nIn my FSH file for Patient I have referenced the URL of the USCore Patient profile (see below)</p>\n<p>Profile: RWDPatient<br>\nParent: <a href=\"http://hl7.org/fhir/us/core/StructureDefinition/us-core-patient\">http://hl7.org/fhir/us/core/StructureDefinition/us-core-patient</a><br>\nId: RWDPatient</p>\n<p>Now when I trigger the SUSHI script it returns the Error \"Parent <a href=\"http://hl7.org/fhir/us/core/StructureDefinition/us-core-patient\">http://hl7.org/fhir/us/core/StructureDefinition/us-core-patient</a> not found  for RWDPatient\"</p>\n<p>Am I missing any step? What is the correct way of implementing my requirement?<br>\nAppreciate any help to resolve my issue.</p>",
        "id": 248641002,
        "sender_full_name": "Vikas Sinha",
        "timestamp": 1628270407
    },
    {
        "content": "<p>you say that you've put the dependencies in your \"package.json\" file, but I'm not sure what file that is since there is no package.json file that the publisher or sushi looks at (as far as I know).  You want to declare your dependencies in the sushi-config.yaml file:</p>\n<div class=\"codehilite\"><pre><span></span><code>fhirVersion: 4.0.1\ndependencies:\n  hl7.fhir.us.core: 4.0.1\n  hl7.fhir.us.core: 3.1.0\n</code></pre></div>",
        "id": 248643274,
        "sender_full_name": "Jean Duteau",
        "timestamp": 1628271420
    },
    {
        "content": "<p>Isn't that an invalid \"dependencies\" object, since it has two values associated with the same key? <a href=\"https://yaml.org/spec/1.2/spec.html#mapping\">https://yaml.org/spec/1.2/spec.html#mapping</a> says:</p>\n<blockquote>\n<p>a mapping node is an unordered set of key: value node pairs, with the restriction that <em>each of the keys is unique</em></p>\n</blockquote>",
        "id": 248644977,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1628272301
    },
    {
        "content": "<p>Thanks Jean. I was able to make it run using the following update to the sushi-config.yaml file. I corrected the package name for core fhir specification. In addition, SUSHI made me add the URI and version as I have mentioned below </p>\n<p>dependencies:<br>\n  hl7.fhir.r4.core:<br>\n    uri: <a href=\"http://my-fhir-ig.org/ImplementationGuide/123\">http://my-fhir-ig.org/ImplementationGuide/123</a><br>\n    version: 4.0.1<br>\n  hl7.fhir.us.core: 3.1.0</p>",
        "id": 248652046,
        "sender_full_name": "Vikas Sinha",
        "timestamp": 1628275529
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191315\">Josh Mandel</span> <a href=\"#narrow/stream/215610-shorthand/topic/How.20to.20reference.20multiple.20IGs/near/248644977\">said</a>:</p>\n<blockquote>\n<p>Isn't that an invalid \"dependencies\" object, since it has two values associated with the same key? <a href=\"https://yaml.org/spec/1.2/spec.html#mapping\">https://yaml.org/spec/1.2/spec.html#mapping</a> says:</p>\n<blockquote>\n<p>a mapping node is an unordered set of key: value node pairs, with the restriction that <em>each of the keys is unique</em></p>\n</blockquote>\n</blockquote>\n<p>Yeah, I made a copy and paste error.  One of those should be the base fhir dependency and the other US-Core.</p>",
        "id": 248675935,
        "sender_full_name": "Jean Duteau",
        "timestamp": 1628288999
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"431090\">Vikas Sinha</span> <a href=\"#narrow/stream/215610-shorthand/topic/How.20to.20reference.20multiple.20IGs/near/248652046\">said</a>:</p>\n<blockquote>\n<p>Thanks Jean. I was able to make it run using the following update to the sushi-config.yaml file. I corrected the package name for core fhir specification. In addition, SUSHI made me add the URI and version as I have mentioned below </p>\n<p>dependencies:<br>\n  hl7.fhir.r4.core:<br>\n    uri: <a href=\"http://my-fhir-ig.org/ImplementationGuide/123\">http://my-fhir-ig.org/ImplementationGuide/123</a><br>\n    version: 4.0.1<br>\n  hl7.fhir.us.core: 3.1.0</p>\n</blockquote>\n<p>I'm not sure that what you put is correct.  The uri for fhir.r4.core defintely shouldn't be there.  You should look at the documentation at <a href=\"https://fshschool.org/docs/sushi/configuration/\">https://fshschool.org/docs/sushi/configuration/</a></p>\n<p>Here is the recommended configuration:</p>\n<div class=\"codehilite\"><pre><span></span><code>id: fhir.us.example\ncanonical: http://hl7.org/fhir/us/example\nname: ExampleIG\ntitle: &quot;HL7 FHIR Implementation Guide: Example IG Release 1 - US Realm | STU1&quot;\ndescription: An example IG that exercises many of the fields in a SUSHI configuration\nstatus: draft\nlicense: CC0-1.0\nversion: 0.1.0\nfhirVersion: 4.0.1\ncopyrightYear: 2020+\nreleaseLabel: ci-build\npublisher:\n  name: HL7 International - US Realm Steering Committee\n  url: http://www.hl7.org/Special/committees/usrealm/index.cfm\n  email: usrsc@lists.HL7.org\ndependencies:\n  hl7.fhir.us.core: 3.1.0\n</code></pre></div>",
        "id": 248676109,
        "sender_full_name": "Jean Duteau",
        "timestamp": 1628289120
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"431090\">@Vikas Sinha</span> be aware that having multiple profiles with the same canonical URL but different versions SHOULD be supported, but you may run into issues as it's not well tested.  So be on the lookout and holler if you find any.</p>",
        "id": 248690848,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1628303989
    },
    {
        "content": "<p>I can confirm, SUSHI has not been tested well for this use case.  If you declare a parent profile for which two versions exist in the dependencies, I think that the selection of which one to use will be arbitrary.  I'm not even sure if SUSHI will correctly work when you specify the version you want using a canonical form.  I agree w/ Lloyd that it <em>should</em> work -- but I'm not sure that it <em>does</em> work.  This may be an area in which we need to improve SUSHI.</p>",
        "id": 249749362,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1629220420
    }
]