[
    {
        "content": "<p>I am looking to profile Bundle in FSH. Would like to understand by way of an example. Is there someone who has done this for an Operation? or a FHIR-Document?</p>",
        "id": 217785046,
        "sender_full_name": "John Moehrke",
        "timestamp": 1606238167
    },
    {
        "content": "<p>How do I profile the contents of the bundle? How do I indicate that the Bundle.entry.resource must be of Profile XYZ?</p>",
        "id": 217804769,
        "sender_full_name": "John Moehrke",
        "timestamp": 1606247371
    },
    {
        "content": "<p>You might want to take a look at mCODE's <a href=\"http://build.fhir.org/ig/HL7/fhir-mCODE-ig/branches/master/StructureDefinition-mcode-patient-bundle.html\">mCODE Patient Bundle</a> as an example.  Relevant FSH <a href=\"https://github.com/HL7/fhir-mCODE-ig/blob/d81a22e6da868356b727cb9947c98fa1eb8bda31/input/fsh/SD_Bundle.fsh#L28-L40\">here</a> and <a href=\"https://github.com/HL7/fhir-mCODE-ig/blob/d81a22e6da868356b727cb9947c98fa1eb8bda31/input/fsh/RS_SlicingRules.fsh#L25-L29\">here</a>.</p>",
        "id": 217809308,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1606249773
    },
    {
        "content": "<p>I think that took me further, but not far enough<br>\n\"</p>\n<ul>\n<li>entry ^slicing.discriminator.type = #profile</li>\n<li>entry ^slicing.discriminator.path = \"resource\"</li>\n<li>entry ^slicing.rules = #open</li>\n<li>entry ^slicing.description = \"Slicing based on the profile conformance of the entry\"</li>\n<li>entry and entry.resource MS</li>\n<li>entry contains Patient 1..1 MS and MHVcompositionBluebutton 1..1 MS </li>\n<li>entry[MHVcompositionBlueButton].resource only MHVcompositionBluebutton</li>\n<li>entry[Patient].resource only Patient<br>\n\"<br>\ngives me a sushi error<blockquote>\n<p>Sushi: error No element found at path entry[MHVcompositionBlueButton].resource for MHVbluebutton, skipping rule (00:02.0488)</p>\n</blockquote>\n</li>\n</ul>",
        "id": 217812884,
        "sender_full_name": "John Moehrke",
        "timestamp": 1606251704
    },
    {
        "content": "<p>Where have you defned  the Profile names?</p>",
        "id": 217813825,
        "sender_full_name": "David Pyke",
        "timestamp": 1606252142
    },
    {
        "content": "<p>You're using MHVcompositionBlueButton, as well as MHVcompositionBluebutton. Is that intentional? (\"B\" in button).</p>",
        "id": 217814036,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1606252252
    },
    {
        "content": "<p>I just saw that... sorry</p>",
        "id": 217814486,
        "sender_full_name": "John Moehrke",
        "timestamp": 1606252518
    },
    {
        "content": "<p>Is that the issue?</p>",
        "id": 217814689,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1606252640
    },
    {
        "content": "<p>yes that was that issue</p>",
        "id": 217814758,
        "sender_full_name": "John Moehrke",
        "timestamp": 1606252682
    },
    {
        "content": "<p>next problem is that my example is not validating</p>",
        "id": 217814817,
        "sender_full_name": "John Moehrke",
        "timestamp": 1606252696
    },
    {
        "content": "<p>well, sushi doesn't like my example<br>\n'''<br>\nSushi: error Element Bundle.entry:Patient has minimum cardinality 1 but occurs 0 time(s). (00:05.0182)<br>\nSushi: File: C:\\Users\\john.moehrke\\Git\\MHV-PGHD\\input\\fsh\\ex-MHV-bluebutton.fsh  (00:05.0183)<br>\nSushi: Line: 1 - 12                                                              (00:05.0184)<br>\nSushi: error Element Bundle.entry:MHVcompositionBluebutton has minimum cardinality 1 but occurs 0 time(s). (00:05.0185)<br>\nSushi: File: C:\\Users\\john.moehrke\\Git\\MHV-PGHD\\input\\fsh\\ex-MHV-bluebutton.fsh  (00:05.0186)<br>\nSushi: Line: 1 - 12                                                              (00:05.0188)<br>\n'''</p>",
        "id": 217814880,
        "sender_full_name": "John Moehrke",
        "timestamp": 1606252739
    },
    {
        "content": "<p>Where can we see the code?</p>",
        "id": 217815100,
        "sender_full_name": "David Pyke",
        "timestamp": 1606252871
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191404\">@John Moehrke</span> -- SUSHI is a little opinionated about how it wants you to author the example.  In order to keep it happy, you should always reference the sliced entries by their names.  E.g.,</p>\n<div class=\"codehilite\"><pre><span></span><code>* entry[Patient].fullUrl = &quot;http://foo.org/bar/Patient/123&quot;\n</code></pre></div>\n<p>SUSHI isn't very sophisticated, so it only knows you used a slice if you used it by name.</p>",
        "id": 217825537,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1606259061
    },
    {
        "content": "<p>Thanks. Dave helped me with that too</p>",
        "id": 217831521,
        "sender_full_name": "John Moehrke",
        "timestamp": 1606263658
    }
]