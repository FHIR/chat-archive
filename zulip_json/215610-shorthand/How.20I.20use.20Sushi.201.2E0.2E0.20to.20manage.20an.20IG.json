[
    {
        "content": "<p>I know you envisioned sushi a little differently but I use it to:</p>\n<ul>\n<li>create and manage the IG resource and menu which it does beautifully</li>\n<li>to create new resources with the basic stuff and which I then grab and finish off the authoring by hand the input files directly if I need to.  (I find some stuff easier in .fsh and other stuff easier to edit directly which I prefer to do in YAML ).</li>\n<li>I use my own bash scripts to split the sushi generation from the ig-publisher and autobuild and it works pretty well.</li>\n</ul>\n<p>We plan to migrate US Core over starting with everything in the input directory and using sushi for the IG resource and eventually migrating to .fsh files as needed.</p>",
        "id": 212767984,
        "sender_full_name": "Eric Haas",
        "timestamp": 1602205843
    },
    {
        "content": "<p>I use sushi only for the feature of having easier to create FSH that sushi converts into the json. From that point on I am 100% IG build based. I do like the automatic invoking of sushi when a FSH tank is found. I too sometimes refine the json, for which I simply rename that refined so as to not conflict. My biggest struggle is that the very fact my IG normative source is the json, not the fsh. Thus I am highly reliant on a stable sushi that I can feel confident will do the exact same slicing and rolling (sushi) 10 years from now.</p>",
        "id": 212818775,
        "sender_full_name": "John Moehrke",
        "timestamp": 1602246898
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191469\">@Chris Moesel</span> is the ci build fixed? If so I can update the sample IG to show how this is done</p>",
        "id": 212819904,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1602247472
    },
    {
        "content": "<p>Thank you <span class=\"user-mention\" data-user-id=\"191401\">@Eric Haas</span> and <span class=\"user-mention\" data-user-id=\"191404\">@John Moehrke</span> for sharing how you use SUSHI!  <span class=\"user-mention\" data-user-id=\"191404\">@John Moehrke</span> -- we do our best to ensure stability of output between releases.  We have a pretty robust suite of unit tests and we also do manual regression testing against some IGs (right now, usually the mCODE IG).  But of course, SUSHI output may change based on discovered bugs, new publisher rules, and/or best practices that emerge from the community.  We don't anticipate any major changes to project structure / configuration for quite a while though -- which is why we really wanted to get this last big project structure change into 1.0.0 (rather than post-1.0.0).</p>",
        "id": 212830339,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1602252559
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191832\">@Jose Costa Teixeira</span> -- Grahame has implemented a fix to allow the SUSHI version to be set in the <code>fsh.ini</code>, but I just tested it and found it doesn't appear to be in the latest released publisher yet.  You can track the conversation <a href=\"#narrow/stream/179252-IG-creation/topic/Selecting.20SUSHI.20Versions.20in.20AutoBuild/near/212502455\">here</a>.</p>",
        "id": 212830508,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1602252633
    },
    {
        "content": "<p>I'm similar to Eric - I use sushi to generate all the resources (including the IG required ones), but do have some scripts that I run post-sushi to generate various summary pages that are then fed to the IG publisher....</p>",
        "id": 212854450,
        "sender_full_name": "David Hay",
        "timestamp": 1602264702
    },
    {
        "content": "<p>I'm getting this <br>\n<code>Sushi: error No sushi-config.yaml in . folder, and no configuration could be extracted from an ImplementationGuide resource.</code></p>",
        "id": 213361487,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1602716839
    },
    {
        "content": "<p>what configuration should be extracted from which implementationguide resource?</p>",
        "id": 213361515,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1602716868
    },
    {
        "content": "<p>in other words, do I really need to add sushi-config.yaml?</p>",
        "id": 213361569,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1602716890
    },
    {
        "content": "<p>you either need a config file or you need an ImplementationGuide resource</p>",
        "id": 213361595,
        "sender_full_name": "Jean Duteau",
        "timestamp": 1602716916
    },
    {
        "content": "<p>what does the IG resource have to have? I have an implementationguide resource</p>",
        "id": 213361634,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1602716949
    },
    {
        "content": "<p>From the documentation:</p>\n<div class=\"codehilite\"><pre><span></span><code>If there is no sushi-config.yaml, SUSHI will automatically attempt to extract the following information from an ImplementationGuide resource:\n\ncanonical\nfhirVersion\nversion\ndependencies\n</code></pre></div>",
        "id": 213361773,
        "sender_full_name": "Jean Duteau",
        "timestamp": 1602717082
    },
    {
        "content": "<div class=\"codehilite\"><pre><span></span><code>The following approach is used to find the ImplementationGuide resource:\n\nLook for &lt;root&gt;/ig.ini, where &lt;root&gt; is the folder containing the fsh subdirectory. If the ig.ini file exists, it will have an ig property which gives the path to the ImplementationGuide resource, so SUSHI will use this path to find the resource.\nIf there is no ig.ini in the root folder, SUSHI will search the &lt;root&gt;/input folder for an ImplementationGuide resource, and if exactly one resource is found, SUSHI will extract the above properties from it.\n</code></pre></div>",
        "id": 213361846,
        "sender_full_name": "Jean Duteau",
        "timestamp": 1602717151
    },
    {
        "content": "<p>thanks, but I'm trying to finish the integration between sushi and the ig, so I want to see what needs to be in the ig resource</p>",
        "id": 213361873,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1602717190
    },
    {
        "content": "<p>right, and the documentation says that you need 'canonical', 'fhirVersion', 'version', and 'dependencies'.</p>",
        "id": 213361908,
        "sender_full_name": "Jean Duteau",
        "timestamp": 1602717232
    },
    {
        "content": "<p>no, the documentation says it will try to extract that.</p>",
        "id": 213362002,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1602717287
    },
    {
        "content": "<p>there's no canonical in the IG resource, but I assume it gets it from the url.</p>",
        "id": 213362025,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1602717316
    },
    {
        "content": "<p>I have version, I have fhirVersion, and I do not want to have dependencies</p>",
        "id": 213362058,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1602717353
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191469\">@Chris Moesel</span> ?</p>",
        "id": 213362065,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1602717358
    },
    {
        "content": "<p>(trying to get the miminum changes to an IG to start including sushi)</p>",
        "id": 213362137,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1602717401
    },
    {
        "content": "<p>also, another one: you may want to ignore xlsx files in the BYOX box</p>",
        "id": 213364215,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1602718781
    },
    {
        "content": "<p>I think these 2 issues are blocking. once they are fixed, i think we have an integration</p>",
        "id": 213364616,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1602719125
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191832\">Jose Costa Teixeira</span> <a href=\"#narrow/stream/215610-shorthand/topic/How.20I.20use.20Sushi.201.2E0.2E0.20to.20manage.20an.20IG/near/213362002\">said</a>:</p>\n<blockquote>\n<p>no, the documentation says it will try to extract that.</p>\n</blockquote>\n<p>it says that it extracts those properties from it.  So they aren't there, I suspect that is why you get the error you're getting.</p>",
        "id": 213364712,
        "sender_full_name": "Jean Duteau",
        "timestamp": 1602719218
    },
    {
        "content": "<p>do you have 'url', 'version', fhirVersion'?</p>",
        "id": 213364735,
        "sender_full_name": "Jean Duteau",
        "timestamp": 1602719263
    },
    {
        "content": "<p>yes</p>",
        "id": 213365189,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1602719708
    },
    {
        "content": "<p>it also does not mention the name and status, and I believe those are necessary (at least on the yaml they are)</p>",
        "id": 213365261,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1602719770
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191832\">@Jose Costa Teixeira</span> -- do you have your IG posted on GitHub anywhere?  I think it would be easiest to debug this if I could just reproduce it.</p>",
        "id": 213365577,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1602720113
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191832\">Jose Costa Teixeira</span> <a href=\"#narrow/stream/215610-shorthand/topic/How.20I.20use.20Sushi.201.2E0.2E0.20to.20manage.20an.20IG/near/213364215\">said</a>:</p>\n<blockquote>\n<p>also, another one: you may want to ignore xlsx files in the BYOX box</p>\n</blockquote>\n<p>Oh.  Is SUSHI trying to read them like XML resources?  (I'm not sure what you mean by \"BYOX box\")</p>",
        "id": 213365647,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1602720166
    },
    {
        "content": "<p>I'm just adding some fsh to the sample-ig</p>",
        "id": 213365779,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1602720293
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191469\">Chris Moesel</span> <a href=\"#narrow/stream/215610-shorthand/topic/How.20I.20use.20Sushi.201.2E0.2E0.20to.20manage.20an.20IG/near/213365647\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"191832\">Jose Costa Teixeira</span> <a href=\"#narrow/stream/215610-shorthand/topic/How.20I.20use.20Sushi.201.2E0.2E0.20to.20manage.20an.20IG/near/213364215\">said</a>:</p>\n<blockquote>\n<p>also, another one: you may want to ignore xlsx files in the BYOX box</p>\n</blockquote>\n<p>Oh.  Is SUSHI trying to read them like XML resources?  (I'm not sure what you mean by \"BYOX box\")</p>\n</blockquote>\n<p>yes, sushi thinks those are xml resources</p>",
        "id": 213365806,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1602720318
    },
    {
        "content": "<p><a href=\"https://github.com/FHIR/sample-ig\">https://github.com/FHIR/sample-ig</a></p>",
        "id": 213365879,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1602720376
    },
    {
        "content": "<p>and actually, i made a mistake: it's not to ignore xlsx</p>",
        "id": 213366042,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1602720554
    },
    {
        "content": "<p>it's to ignore xml that are not a resource (should be at most an info, i guess - but no error)</p>",
        "id": 213366126,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1602720621
    },
    {
        "content": "<p>OK.  Yeah, that makes sense and you're right -- we're not doing anything to avoid that.  Any suggestions for how we identify if something is a FHIR resource or not?  Do you think it's sufficient just to see if the top-level flag has <code>xmlns=\"http://hl7.org/fhir\"</code>?</p>",
        "id": 213366272,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1602720778
    },
    {
        "content": "<p>I guess so. <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> do all XML resources have that in common?</p>",
        "id": 213367422,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1602721806
    },
    {
        "content": "<p>Nevermind.  This is all wrong.  <del>I don't have time to fully debug, but I have a guess as to what is happening w/ trying to extract config from <code>myig.xml</code>.  Since it is XML, we convert it to JSON in order to process it (because TypeScript <span aria-label=\"heart\" class=\"emoji emoji-2764\" role=\"img\" title=\"heart\">:heart:</span> JSON).  We use Lantana's excellent <a href=\"https://github.com/lantanagroup/FHIR.js\">FHIR.js</a> module to convert FHIR XML to JSON.  The \"FHIR tools\" extension for VS Code also uses this same module for converting FHIR XML to JSON -- and I just noticed that if I attempt to convert <code>myig.xml</code> to JSON using FHIR tools (and therefore FHIR.js), I get an <em>empty</em> <code>myig.json</code> file.  So... it would appear that the conversion from XML to JSON has gone awry.</del></p>",
        "id": 213367442,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1602721839
    },
    {
        "content": "<p>Ok</p>",
        "id": 213367460,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1602721867
    },
    {
        "content": "<p>I spoke too soon.  It seems the issue with \"FHIR tools\" is a red herring (unrelated).  I stepped through with a debugger and the bug is most definitely in the SUSHI code (not in the XML-to-JSON code).  It's basically looking in the wrong path for the <code>ig.ini</code> file.  We'll have to fix this.</p>",
        "id": 213368708,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1602723191
    },
    {
        "content": "<p><a href=\"https://github.com/FHIR/sushi/issues/635\">https://github.com/FHIR/sushi/issues/635</a></p>",
        "id": 213369377,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1602723725
    }
]