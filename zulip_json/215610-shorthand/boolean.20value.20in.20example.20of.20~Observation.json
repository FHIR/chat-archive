[
    {
        "content": "<p>Hi everybody,<br>\nI am trying to create an example to show how to use PhenotypicFeature, from our incipient Phenopacket IG.</p>\n<p>This is the definition</p>\n<p>Profile: PhenotypicFeature<br>\nParent: Observation<br>\nId: PhenotypicFeature<br>\nTitle: \"Phenotypic Feature\"<br>\nDescription: \"This profile defines the GA4GH PhenotypicFeature element in terms of the FHIR Condition\"</p>\n<ul>\n<li>^version = \"0.1.0\"</li>\n<li>^status = #active</li>\n<li>^date = \"2021-06-03T09:49:00-04:00\"</li>\n<li>^publisher = \"GA4GH Phenopacket Working Group\"</li>\n<li>^contact.name = \"Peter Robinson\"</li>\n<li>code 1..1 MS</li>\n<li>value[x] 1..1 MS</li>\n<li>value[x] only valueBoolean</li>\n<li>value[x] ^short = \"true: observed; false: excluded\"</li>\n<li>specimen ..0</li>\n<li>device ..0</li>\n<li>referenceRange ..0</li>\n<li>hasMember ..0</li>\n<li>component ..0</li>\n</ul>\n<p>I am trying to assign a value of true to the Observation.value element. The following leads to the <br>\nerror \"Cannot assign boolean value on this element since this element does not have a single type\"</p>\n<p>Instance: arachnodactyly<br>\nInstanceOf: PhenotypicFeature<br>\nDescription: \"PhenotypicFeature Example for arachnodactyly\"</p>\n<ul>\n<li>id = \"id.1\"</li>\n<li>status = #active \"active\"</li>\n<li>subject = Reference(example-patient)</li>\n<li>code = $hpo#HP:0001166 \"Arachnodactyly\"</li>\n<li>value[x] = true</li>\n</ul>\n<p>I have been trying to figure this one out for some time but must be missing something. Any ideas?<br>\nthanks! Peter</p>",
        "id": 241830348,
        "sender_full_name": "Peter Robinson",
        "timestamp": 1623095164
    },
    {
        "content": "<p>On the <code>Instance</code>, you should assign the <code>true</code> value to an element called <code>valueBoolean</code>. So the last line of the <code>Instance</code> should be:</p>\n<div class=\"codehilite\"><pre><span></span><code>* valueBoolean = true\n</code></pre></div>\n<p>And then additionally this line:</p>\n<div class=\"codehilite\"><pre><span></span><code>* value[x] only valueBoolean\n</code></pre></div>\n<p>should be just:</p>\n<div class=\"codehilite\"><pre><span></span><code>* value[x] only boolean\n</code></pre></div>",
        "id": 241830965,
        "sender_full_name": "Nick Freiter",
        "timestamp": 1623095466
    },
    {
        "content": "<p>Thanks -- got it. However, the boolean value does not actually appear in the generated example, e.g., I am expecting to see a value of true (or false) for this HPO code. Am I trying to do something that does not make sense?</p>\n<div class=\"codehilite\"><pre><span></span><code>&lt;Observation xmlns=&quot;http://hl7.org/fhir&quot;&gt;\n  &lt;id value=&quot;id.1&quot;/&gt;\n  &lt;meta&gt;\n    &lt;profile\n             value=&quot;https://github.com/phenopackets/core-ig/StructureDefinition/PhenotypicFeature&quot;/&gt;\n  &lt;/meta&gt;\n  &lt;text&gt;\n    &lt;status value=&quot;generated&quot;/&gt;\n    &lt;div xmlns=&quot;http://www.w3.org/1999/xhtml&quot;&gt;&lt;p&gt;&lt;b&gt;Generated Narrative&lt;/b&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;status&lt;/b&gt;: active&lt;/p&gt;&lt;p&gt;&lt;b&gt;code&lt;/b&gt;: &lt;span title=&quot;Codes: {http://github.com/phenopackets/core-ig/CodeSystem/hpo HP:0001166}&quot;&gt;Arachnodactyly&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;subject&lt;/b&gt;: &lt;a href=&quot;Patient-example-patient.html&quot;&gt;Generated Summary: Medical Record Number: m123 (USUAL); Anyname A. Anyperson ; gender: male; birthDate: 2001-01-20&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;\n  &lt;/text&gt;\n  &lt;status value=&quot;active&quot;/&gt;\n  &lt;code&gt;\n    &lt;coding&gt;\n      &lt;system value=&quot;http://github.com/phenopackets/core-ig/CodeSystem/hpo&quot;/&gt;\n      &lt;code value=&quot;HP:0001166&quot;/&gt;\n      &lt;display value=&quot;Arachnodactyly&quot;/&gt;\n    &lt;/coding&gt;\n  &lt;/code&gt;\n  &lt;subject&gt;\n    &lt;reference value=&quot;Patient/example-patient&quot;/&gt;\n  &lt;/subject&gt;\n&lt;/Observation&gt;\n</code></pre></div>",
        "id": 241839922,
        "sender_full_name": "Peter Robinson",
        "timestamp": 1623099540
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"361275\">@Peter Robinson</span> - when I run this on FSHOnline, it looks like SUSHI creates the boolean value correctly.  Go to: <a href=\"https://fshschool.org/FSHOnline/#/share/3uVS31r\">https://fshschool.org/FSHOnline/#/share/3uVS31r</a> then click \"Convert to JSON\" and choose your instance \"id.1\" on the right-hand side to see it.</p>",
        "id": 241856228,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1623110257
    },
    {
        "content": "<p>What you pasted here is XML, so that must be after it is run through the publisher.  You might look at what is in <code>/fsh-generated</code> to see if SUSHI is exporting it correctly but it is (for some reason) being dropped by the IG Publisher.</p>",
        "id": 241856301,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1623110320
    },
    {
        "content": "<p>Indeed, SUSHI exports this correctly. For some reason the publisher is dropping this. The only warnings/errors I see in the publisher build are<br>\n      [get] Error opening connection java.io.FileNotFoundException: <a href=\"https://github.com/HL7/JIRA-Spec-Artifacts/raw/master/xml/FHIR-us-ga4gh.phenopacket.xml\">https://github.com/HL7/JIRA-Spec-Artifacts/raw/master/xml/FHIR-us-ga4gh.phenopacket.xml</a><br>\n      [get] Error opening connection java.io.FileNotFoundException: <a href=\"https://github.com/HL7/JIRA-Spec-Artifacts/raw/master/xml/FHIR-us-ga4gh.phenopacket.xml\">https://github.com/HL7/JIRA-Spec-Artifacts/raw/master/xml/FHIR-us-ga4gh.phenopacket.xml</a><br>\n      [get] Error opening connection java.io.FileNotFoundException: <a href=\"https://github.com/HL7/JIRA-Spec-Artifacts/raw/master/xml/FHIR-us-ga4gh.phenopacket.xml\">https://github.com/HL7/JIRA-Spec-Artifacts/raw/master/xml/FHIR-us-ga4gh.phenopacket.xml</a><br>\n      [get] Can't get <a href=\"https://github.com/HL7/JIRA-Spec-Artifacts/raw/master/xml/FHIR-us-ga4gh.phenopacket.xml\">https://github.com/HL7/JIRA-Spec-Artifacts/raw/master/xml/FHIR-us-ga4gh.phenopacket.xml</a> to /home/peter/GIT/core-ig/input-cache/jiraspec.xml</p>\n<p>Outcome of trying to fetch existing package-list.json: <a href=\"https://github.com/phenopackets/core-ig/package-list.json?nocache=1623152409633\">https://github.com/phenopackets/core-ig/package-list.json?nocache=1623152409633</a><br>\nFinished. Times: loading: 00:00.0259, generate: 00:32.0194, narrative generation: 00:11.0558, realm-rules: 00:02.0265, previous-version: 00:00.0000, jekyll: 00:04.0710, validation: 00:00.0651 (#36), template: 00:01.0385 (#3) (01:13.0488)<br>\ncontext [anonymous] 2:13 attribute path isn't defined<br>\ncontext [anonymous] 2:13 attribute path isn't defined<br>\ncontext [anonymous] 2:13 attribute path isn't defined<br>\ncontext [anonymous] 2:13 attribute path isn't defined<br>\ncontext [anonymous] 2:13 attribute path isn't defined<br>\ncontext [anonymous] 2:13 attribute path isn't defined<br>\ncontext [anonymous] 2:13 attribute path isn't defined<br>\ncontext [anonymous] 2:13 attribute path isn't defined<br>\ncontext [anonymous] 2:13 attribute path isn't defined<br>\ncontext [anonymous] 2:13 attribute path isn't defined<br>\ncontext [anonymous] 2:13 attribute path isn't defined<br>\ncontext [anonymous] 2:13 attribute path isn't defined<br>\nValidation output in /home/peter/GIT/core-ig/output/qa.html<br>\nErrors: 28, Warnings: 30, Info: 23, Broken Links = 26 (01:13.0740)</p>\n<p>Is there some way of getting more specific error messages?</p>",
        "id": 241905482,
        "sender_full_name": "Peter Robinson",
        "timestamp": 1623152991
    },
    {
        "content": "<p>I'm not sure if there is a way to get more specific error messages. I tried this in the publisher with one single FSH file containing the FSH here: <a href=\"https://fshschool.org/FSHOnline/#/share/3cnmffi\">https://fshschool.org/FSHOnline/#/share/3cnmffi</a> (note that I set the <code>$hpo</code> alias to just some url because I wasn't sure what it should be). It seemed to work fine for me in the publisher. Is there any way you could give us to replicate this?</p>",
        "id": 241929865,
        "sender_full_name": "Nick Freiter",
        "timestamp": 1623163199
    },
    {
        "content": "<p>I see now that <a href=\"https://github.com/phenopackets/core-ig/\">https://github.com/phenopackets/core-ig/</a> looks like the place I was looking for, but it appears that repo is still using the original FSH you posted.</p>",
        "id": 241945813,
        "sender_full_name": "Nick Freiter",
        "timestamp": 1623169178
    },
    {
        "content": "<p>I just updated and merged the changes to master, <a href=\"https://github.com/phenopackets/core-ig\">https://github.com/phenopackets/core-ig</a>,</p>",
        "id": 241946640,
        "sender_full_name": "Peter Robinson",
        "timestamp": 1623169521
    },
    {
        "content": "<p>In the <code>master</code> branch I'm still seeeing <a href=\"https://github.com/phenopackets/core-ig/blob/df5edc9989b2617fd251843aefd5cbb4b27ad070/input/fsh/EX_PhenotypicFeature.fsh#L8\">this line</a>, which is </p>\n<div class=\"codehilite\"><pre><span></span><code>* value[x] = true\n</code></pre></div>\n<p>which should change to:</p>\n<div class=\"codehilite\"><pre><span></span><code>* valueBoolean = true\n</code></pre></div>",
        "id": 241953840,
        "sender_full_name": "Nick Freiter",
        "timestamp": 1623172210
    },
    {
        "content": "<p>Sorry -- I see now that I fixed the profile but not the example. Now it works. Thanks!</p>",
        "id": 241964695,
        "sender_full_name": "Peter Robinson",
        "timestamp": 1623176909
    }
]