[
    {
        "content": "<p>I'm trying to add an extension to a polymorphic element. (Coverage resource)<br>\n<code>costToBeneficiary.value[x].extension contains dataAbsentReason named no-value 0..1 MS</code></p>",
        "id": 194909297,
        "sender_full_name": "Giorgio Cangioli",
        "timestamp": 1587549135
    },
    {
        "content": "<p>but if I do so I've a lot of errors back..e.g.<br>\n<code>error No element found at path costToBeneficiary.value[x].extension for CoverageItEsensioni, skipping rule</code></p>",
        "id": 194909357,
        "sender_full_name": "Giorgio Cangioli",
        "timestamp": 1587549176
    },
    {
        "content": "<p>It works properly instead in this case<br>\n<code>* costToBeneficiary.valueQuantity.extension contains dataAbsentReason named no-value 0..1 MS</code></p>",
        "id": 194909436,
        "sender_full_name": "Giorgio Cangioli",
        "timestamp": 1587549230
    },
    {
        "content": "<p>what I'm doing wrong in the first case ? (BTW, I don't want to add in the profile the same extension to each possible type of value[x])</p>",
        "id": 194909588,
        "sender_full_name": "Giorgio Cangioli",
        "timestamp": 1587549322
    },
    {
        "content": "<p>This looks like something that certainly ought to be allowed. The team will investigate to see if there is existing syntax that will allow this, and if not, we will work to implement support for this.</p>",
        "id": 195075621,
        "sender_full_name": "Mint Thompson",
        "timestamp": 1587654744
    },
    {
        "content": "<p>is there an update on this? I'm still getting the error trying to extend value[x]</p>",
        "id": 219137730,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1607374912
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191451\">@Patrick Werner</span> -- can you post a specific example?  I just tested this with the following FSH and it worked fine:</p>\n<div class=\"codehilite\"><pre><span></span><code>Alias: DataAbsentReason = http://hl7.org/fhir/StructureDefinition/data-absent-reason\n\nProfile: MyCoverage\nParent: Coverage\n* costToBeneficiary.value[x].extension contains DataAbsentReason named no-value 0..1 MS\n\nProfile: MyObservation\nParent: Observation\n* value[x].extension contains DataAbsentReason named no-value 0..1 MS\n</code></pre></div>",
        "id": 219140783,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1607376521
    },
    {
        "content": "<p>your example works</p>",
        "id": 219141492,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1607376847
    },
    {
        "content": "<p>oh, i missed the named part. my bad</p>",
        "id": 219141799,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1607377014
    },
    {
        "content": "<p>the reported error was: <code>No element found at path value[x].extension[http://hl7.org/fhir/StructureDefinition/observation-delta] for Test, skipping rule</code></p>",
        "id": 219141973,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1607377103
    },
    {
        "content": "<p>which confused me</p>",
        "id": 219141999,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1607377122
    },
    {
        "content": "<p>This looks like it could be a known bug raising it's head: <a href=\"https://github.com/FHIR/sushi/issues/674\">https://github.com/FHIR/sushi/issues/674</a>. SUSHI sometimes will have that error for paths that contain a URL. If you alias the URL:</p>\n<div class=\"codehilite\"><pre><span></span><code>Alias: observation_delta = http://hl7.org/fhir/StructureDefinition/observation-delta\n</code></pre></div>\n<p>And then reference the element using the alias:</p>\n<div class=\"codehilite\"><pre><span></span><code>value[x].extension[observation_delta]\n</code></pre></div>\n<p>Does that work?</p>",
        "id": 219150864,
        "sender_full_name": "Nick Freiter",
        "timestamp": 1607382102
    },
    {
        "content": "<p>Or, my mistake, maybe this shouldn't work at all unless you do have the <code>named</code> keyword. I was thinking it could still work even without using <code>named</code>.</p>",
        "id": 219151032,
        "sender_full_name": "Nick Freiter",
        "timestamp": 1607382206
    },
    {
        "content": "<p>I think that when you say <code>extension contains</code> w/ a URL, then you <em>have</em> to also specify <code>named</code> -- because a URL doesn't make for a valid slice name.  Now... we could probably make an error message that just says that instead of the weird thing it says now...</p>",
        "id": 219156646,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1607386613
    }
]