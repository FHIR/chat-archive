[
    {
        "content": "<p>How do I restrict valueInteger to values of 0-10 in FSH?</p>",
        "id": 211635700,
        "sender_full_name": "Nathan Davis",
        "timestamp": 1601392714
    },
    {
        "content": "<p>Sounds like either an fp invariant or a valueset binding to me</p>",
        "id": 211639944,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1601394268
    },
    {
        "content": "<p>Yes, I think you'd need to create in invariant using FHIRPath.  First you <a href=\"https://build.fhir.org/ig/HL7/fhir-shorthand/reference.html#defining-invariants\">create the Invariant</a>.  Something like this:</p>\n<div class=\"codehilite\"><pre><span></span><code>Invariant:  zero-to-ten\nDescription: &quot;Value must be an integer between 0 and 10 (inclusive)&quot;\nExpression: &quot;$this &gt;= 0 and $this &lt;= 10&quot;\nSeverity:   #error\n</code></pre></div>\n\n\n<p>And then in your profile (assuming on Observation):</p>\n<div class=\"codehilite\"><pre><span></span><code>* valueInteger obeys zero-to-ten\n</code></pre></div>\n\n\n<p>Or if <code>value[x]</code> is restricted to only allow integer anyway, you can just do:</p>\n<div class=\"codehilite\"><pre><span></span><code>* value[x] obeys zero-to-ten\n</code></pre></div>",
        "id": 211644459,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1601396025
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191427\">@Jens Villadsen</span> <span class=\"user-mention\" data-user-id=\"191469\">@Chris Moesel</span> Thank you!</p>",
        "id": 211647259,
        "sender_full_name": "Nathan Davis",
        "timestamp": 1601397156
    },
    {
        "content": "<p>why not use minValue and maxValue ?</p>",
        "id": 211684250,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1601413592
    },
    {
        "content": "<p>Honestly?  Because I forgot they exist?</p>",
        "id": 211688036,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1601415507
    },
    {
        "content": "<p>OK.  So a better way would be:</p>\n<div class=\"codehilite\"><pre><span></span><code>* valueInteger ^minValueInteger = 0\n* valueInteger ^maxValueInteger = 10\n</code></pre></div>\n\n\n<p>Or if <code>value[x]</code> is restricted to only allow integer anyway:</p>\n<div class=\"codehilite\"><pre><span></span><code>* value[x] ^minValueInteger = 0\n* value[x] ^maxValueInteger = 10\n</code></pre></div>\n\n\n<p>Thanks for keeping me honest, <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span>!</p>",
        "id": 211688350,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1601415695
    },
    {
        "content": "<p>Lol</p>",
        "id": 211739972,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1601461285
    },
    {
        "content": "<p>Hi, I'm not sure if it's correct to post the question here.<br>\nIf I try to express min/max value in the same way for valueQuantity it does not work. </p>\n<ul>\n<li>valueQuantity ^minValueQuantity = 0</li>\n<li>valueQuantity ^maxValueQuantity  = 100</li>\n</ul>\n<p>see example here<br>\n<a href=\"https://fshschool.org/FSHOnline/#/share/3pRcOuL\">https://fshschool.org/FSHOnline/#/share/3pRcOuL</a></p>\n<p>causes: <br>\nerror Cannot assign number value: 0. Value does not match element type: Quantity<br>\n  Line: 12<br>\nerror Cannot assign number value: 100. Value does not match element type: Quantity<br>\n  Line: 13</p>\n<p>In XML/JSON format this is supported. <br>\nAny ideas?</p>",
        "id": 263969205,
        "sender_full_name": "Moritz K채hler",
        "timestamp": 1638864520
    },
    {
        "content": "<p>Hi <span class=\"user-mention\" data-user-id=\"355911\">@Moritz K채hler</span>.  Assigning a Quantity in FSH requires you to specify the units.  So you need to do something more like this:</p>\n<div class=\"codehilite\"><pre><span></span><code>* valueQuantity ^minValueQuantity = 0 &#39;kg&#39;\n* valueQuantity ^maxValueQuantity  = 100 &#39;kg&#39;\n</code></pre></div>\n<p>If you really wanted to specify the value only (without units), then you'd need to do this:</p>\n<div class=\"codehilite\"><pre><span></span><code>* valueQuantity ^minValueQuantity.value = 0\n* valueQuantity ^maxValueQuantity.value  = 100\n</code></pre></div>\n<p>BUT... I would not recommend that.  For the min/max to be meaningful, you really ought to set the units.</p>",
        "id": 264000640,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1638883815
    },
    {
        "content": "<p>Hi Chris Moesel, thank you for the quick answer. <br>\nI can build the .fsh files now. But if I validate resources against the profile (using hapi server) the validation does not fail if I provide a value less than 0. <br>\nIf I use Invariants, the validation fails. Is this an issue with hapi or is this the intended behavior?</p>",
        "id": 264011265,
        "sender_full_name": "Moritz K채hler",
        "timestamp": 1638888525
    },
    {
        "content": "<p>That sounds like a HAPI validator issue to me.</p>",
        "id": 264064484,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1638907813
    },
    {
        "content": "<p>you're right. The validator will start validating min and max quantities when next released</p>",
        "id": 264109013,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1638935787
    },
    {
        "content": "<p>Thanks for confirming the issue with validator. Good to know, that this will be fixed in the next release.</p>",
        "id": 264124006,
        "sender_full_name": "Moritz K채hler",
        "timestamp": 1638951584
    }
]