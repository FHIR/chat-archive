[
    {
        "content": "<p>I'm not sure where to post this, but I thought I'd start here since I'm using FSH/Sushi, but it could also be because of my limited understanding of codesystems and valuesets in general. I have a toy IG that binds a value to a valueset, but the publisher doesn't seem to recognize it. I tried to create a codesystem in IG that it refers to, but doesn't seem to help. I keep getting </p>\n<blockquote>\n<p>None of the codes provided are in the value set <a href=\"http://example.org/ig/vscs/ValueSet/hla-geneid-valueset\" title=\"http://example.org/ig/vscs/ValueSet/hla-geneid-valueset\">http://example.org/ig/vscs/ValueSet/hla-geneid-valueset</a> (<a href=\"http://example.org/ig/vscs/ValueSet/hla-geneid-valueset\" title=\"http://example.org/ig/vscs/ValueSet/hla-geneid-valueset\">http://example.org/ig/vscs/ValueSet/hla-geneid-valueset</a>), and a code from this value set is required) (codes = <a href=\"http://www.genenames.org/geneId#HGNC:4931\" title=\"http://www.genenames.org/geneId#HGNC:4931\">http://www.genenames.org/geneId#HGNC:4931</a>)</p>\n</blockquote>\n<p>and </p>\n<blockquote>\n<p>The code system \"<a href=\"http://www.genenames.org/geneId\" title=\"http://www.genenames.org/geneId\">http://www.genenames.org/geneId</a>\" is not known (encountered paired with code = \"HGNC:4931\"); The code provided (<a href=\"http://www.genenames.org/geneId#HGNC:4931\" title=\"http://www.genenames.org/geneId#HGNC:4931\">http://www.genenames.org/geneId#HGNC:4931</a>) is not valid in the value set All codes known to the system for \"<a href=\"http://www.genenames.org/geneId#HGNC:4931\" title=\"http://www.genenames.org/geneId#HGNC:4931\">http://www.genenames.org/geneId#HGNC:4931</a>\"</p>\n</blockquote>\n<p>I posted the published IG at <a href=\"http://fhir.b12x.org/ig/vscs\" title=\"http://fhir.b12x.org/ig/vscs\">http://fhir.b12x.org/ig/vscs</a>, and you can see the <a href=\"http://fhir.b12x.org/ig/vscs/qa.html\" title=\"http://fhir.b12x.org/ig/vscs/qa.html\">qa.html</a>.</p>\n<p>Here's <a href=\"/user_uploads/10155/K0zHPaeHy7SNR-UDL0Qge4yo/vscs.fsh\" title=\"vscs.fsh\">my fsh file</a> </p>\n<p>Any insight will be appreciated.</p>",
        "id": 194499488,
        "sender_full_name": " Bob Milius",
        "timestamp": 1587157359
    },
    {
        "content": "<p>I don't really know anything about the gene-related terminologies, so forgive me if these questions are naive, but...</p>\n<p>The FHIR spec already defines a code system for HGNC with the canonical url: <code>http://www.genenames.org</code> (see <a href=\"http://hl7.org/fhir/R4/terminologies-systems.html#genetics\" title=\"http://hl7.org/fhir/R4/terminologies-systems.html#genetics\">CS doc</a>).  Is there a reason you are not using that?  Is it different?</p>\n<p>FHIR also defines a value set for all codes in the HGNC code system.  The canonical url for that value set is: <code>http://hl7.org/fhir/ValueSet/genenames</code> (see <a href=\"http://hl7.org/fhir/R4/valueset-genenames.html\" title=\"http://hl7.org/fhir/R4/valueset-genenames.html\">VS doc</a>). Again, is that different than the VS you're trying to define?</p>",
        "id": 194501605,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1587158599
    },
    {
        "content": "<p>Also note, however, that if you look at the doc for the genenames value set, you'll also see \"Error from server: Unable to provide support for code system <a href=\"http://www.genenames.org\" title=\"http://www.genenames.org\">http://www.genenames.org</a>\" -- so I guess it is expected that the FHIR publication tooling doesn't support that value set.  You can suppress these expected errors by adding the warning messages to your <code>ig-data/input/ignoreWarnings.txt</code> file (as <a href=\"https://github.com/FHIR/sample-ig/blob/master/input/ignoreWarnings.txt\" title=\"https://github.com/FHIR/sample-ig/blob/master/input/ignoreWarnings.txt\">demonstrated in the sample-ig</a>).</p>",
        "id": 194502211,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1587158958
    },
    {
        "content": "<p>yeah, those need to be updated. <code>www.genenames.org</code> isn't specific enough. We need to distinguish be gene names (codes that have a HGNC: prefix) and gene groups (codes without a prefix). The Clinical Genomics workgroup is using <code>http://www.genenames.org/geneIds</code> and <code>http://www.genenames/genegroup</code> in the <a href=\"http://hl7.org/fhir/uv/genomics-reporting/valueset-hgnc.html\" title=\"http://hl7.org/fhir/uv/genomics-reporting/valueset-hgnc.html\">Genomics-Reporting IG</a></p>",
        "id": 194502323,
        "sender_full_name": " Bob Milius",
        "timestamp": 1587159015
    },
    {
        "content": "<p>I thought that if I created codesystems in the IG, it would find them there and use them.<br>\n<span class=\"user-mention\" data-user-id=\"191451\">@Patrick Werner</span></p>",
        "id": 194502398,
        "sender_full_name": " Bob Milius",
        "timestamp": 1587159064
    },
    {
        "content": "<p>Ah.  OK.  So... here is what I think is happening w/ the code system you defined in the IG... You forced the canonical URL to be <code>http://www.genenames.org/geneId</code>, which is outside of your IG's canonical URL base.  But when you reference the code system in your value set by name, SUSHI is assuming the default canonical URL for that system instead (which would be <code>{ig-canonical}/CodeSystem/{code-system-id}</code>) instead of the external canonical you overrode it with.</p>",
        "id": 194502794,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1587159266
    },
    {
        "content": "<p>At one point, defining a CodeSystem in an IG with a canonical URL outside of that IG's canonical URL was discouraged (or even not supported).  I'm not sure if that's still the case or not -- but I noticed the publisher didn't actually complain about <em>that</em>, so maybe it is OK now.  Let me see if I can tweak your FSH to make something work.  If not, and if this is actually a FHIR-supported scenario, we'll need to update SUSHI so it doesn't assume that all CodeSystems defined in the IG actually use the IG canonical URL.</p>",
        "id": 194503225,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1587159503
    },
    {
        "content": "<p>ok, thanks!  I touched on this subject in <a href=\"#narrow/stream/179252-IG-creation/topic/Use.20of.20NamingSystem.20in.20an.20IG.3F\" title=\"#narrow/stream/179252-IG-creation/topic/Use.20of.20NamingSystem.20in.20an.20IG.3F\">https://chat.fhir.org/#narrow/stream/179252-IG-creation/topic/Use.20of.20NamingSystem.20in.20an.20IG.3F</a> where it sounded like Lloyd was saying it was okay.</p>",
        "id": 194503507,
        "sender_full_name": " Bob Milius",
        "timestamp": 1587159644
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191469\">Chris Moesel</span> <a href=\"#narrow/stream/215610-shorthand/topic/Codesystems.20and.20Valuesets/near/194503225\" title=\"#narrow/stream/215610-shorthand/topic/Codesystems.20and.20Valuesets/near/194503225\">said</a>:</p>\n<blockquote>\n<p>At one point, defining a CodeSystem in an IG with a canonical URL outside of that IG's canonical URL was discouraged (or even not supported).  I'm not sure if that's still the case or not -- but I noticed the publisher didn't actually complain about <em>that</em>, so maybe it is OK now.  Let me see if I can tweak your FSH to make something work.  If not, and if this is actually a FHIR-supported scenario, we'll need to update SUSHI so it doesn't assume that all CodeSystems defined in the IG actually use the IG canonical URL.</p>\n</blockquote>\n<p>I think that update will be essential - unless you are referring to CodeSystem resources that are only used within the domain of a particular, project-based IG and are 'owned' by that project. In reality the canonical URL of a Code System is likely to have a base endpoint belonging to the owner of that Code System and that organisation may well not be the publisher of the IG - e.g. a national medicines terminology, or other code systems owned by public authorities.</p>\n<p>Further thoughts <span class=\"user-mention\" data-user-id=\"191321\">@David Hay</span> ?</p>",
        "id": 194506259,
        "sender_full_name": "Peter Jordan",
        "timestamp": 1587161282
    },
    {
        "content": "<p>I found that the <a href=\"https://confluence.hl7.org/display/FHIR/Implementation+Guide+Parameters\" title=\"https://confluence.hl7.org/display/FHIR/Implementation+Guide+Parameters\">Implementation Guide Parameters</a> doc defines a parameter called <code>special-url</code> with this description:</p>\n<blockquote>\n<p>If a canonical resource in the IG should actually have a URL that isn't the one implied by the canonical URL for the IG itself, it must be listed here explicitly (as well as defined in the resource itself). It must be listed here to stop it accidentally being different. Each canonical url must be listed in full as present on the resource; it is not possible to specify a pattern.</p>\n</blockquote>\n<p>So... it seems that if we set that parameter in the ImplementationGuide JSON w/ the special canonical for the code system, that it _should_ work.  But... I tried that an it seemed to make no difference as far as I could tell.</p>",
        "id": 194506670,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1587161580
    },
    {
        "content": "<p>Well, I've been creating codesystems and specifying the url (which we need in our implementation) - and the IG publisher doesn't seem to complain...</p>",
        "id": 194507910,
        "sender_full_name": "David Hay",
        "timestamp": 1587162474
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191364\">@Peter Jordan</span> said:</p>\n<blockquote>\n<p>I think that update will be essential - unless you are referring to CodeSystem resources that are only used within the domain of a particular, project-based IG and are 'owned' by that project. In reality the canonical URL of a Code System is likely to have a base endpoint belonging to the owner of that Code System and that organisation may well not be the publisher of the IG - e.g. a national medicines terminology, or other code systems owned by public authorities.</p>\n</blockquote>\n<p>Just to ensure we're all on the same page -- we're talking about <em>defining</em> the content of external code systems not referencing or using external code systems.</p>\n<p>I think the question is more of a human one than a technical one: should it be easy for IG authors to define resources that represent concepts that do not belong to the IG (or any of its authors), and furthermore should it be easy for them to assign those resource definitions canonical URLs using the real code system owner's domain as their base?  Isn't that kind of a form of domain squatting, but in the standards space?</p>\n<p>Or on the other end of the spectrum, what if the owner of the codes doesn't care, so five different IGs all publish different versions of that code system but every single one uses the same canonical URL?  Isn't that a recipe for disaster?</p>\n<p>Sorry... I think I'm getting philosophical now!  But anyway, sticking strictly to the technical bit of this, it feels like the <code>special-url</code> IG parameter should all for this, but that doesn't seem to be working when I try it.  Either that or the publisher isn't checking to see if Code Systems are defined in the IG before asking the tx server about them.</p>",
        "id": 194508025,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1587162550
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191321\">David Hay</span> <a href=\"#narrow/stream/215610-shorthand/topic/Codesystems.20and.20Valuesets/near/194507910\" title=\"#narrow/stream/215610-shorthand/topic/Codesystems.20and.20Valuesets/near/194507910\">said</a>:</p>\n<blockquote>\n<p>Well, I've been creating codesystems and specifying the url (which we need in our implementation) - and the IG publisher doesn't seem to complain...</p>\n</blockquote>\n<p>Is that because they are all have a base URL of <a href=\"https://standards.digital.health.nz/\" title=\"https://standards.digital.health.nz/\">https://standards.digital.health.nz/</a> ?</p>",
        "id": 194508156,
        "sender_full_name": "Peter Jordan",
        "timestamp": 1587162664
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191469\">Chris Moesel</span> <a href=\"#narrow/stream/215610-shorthand/topic/Codesystems.20and.20Valuesets/near/194508025\" title=\"#narrow/stream/215610-shorthand/topic/Codesystems.20and.20Valuesets/near/194508025\">said</a>:</p>\n<blockquote>\n<p>Just to ensure we're all on the same page -- we're talking about <em>defining</em> the content of external code systems not referencing or using external code systems.</p>\n</blockquote>\n<p>Thanks for the swift reply <span class=\"user-mention\" data-user-id=\"191469\">@Chris Moesel</span> . I suspected that we might be on separate pages, but it would make more sense to me if you were talking about defining the content of internal (to the IG) code systems. I'm not sure how you'd go about doing that for external Code Systems. In an IG you're more likely to be defining subsets of an external Code System in ValueSet resources.</p>",
        "id": 194508439,
        "sender_full_name": "Peter Jordan",
        "timestamp": 1587162908
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span></p>",
        "id": 194508774,
        "sender_full_name": " Bob Milius",
        "timestamp": 1587163207
    },
    {
        "content": "<p>Nope - I assign the url directly to the one - eg, in the Codesystem definition I have the following</p>\n<blockquote>\n<ul>\n<li>^url = <a href=\"https://standards.digital.health.nz/cs/dhb\" title=\"https://standards.digital.health.nz/cs/dhb\">https://standards.digital.health.nz/cs/dhb</a></li>\n</ul>\n</blockquote>\n<p>The base Url for the IG is <a href=\"http://hl7.org.nz/fhir/StructureDefinition/NHI\" title=\"http://hl7.org.nz/fhir/StructureDefinition/NHI\">http://hl7.org.nz/fhir/StructureDefinition/NHI</a></p>",
        "id": 194510088,
        "sender_full_name": "David Hay",
        "timestamp": 1587164388
    },
    {
        "content": "<p>The canonical URLs of code systems are allowed to diverge from the base URL of your value set, but I believe you need to set a special extension to have the publisher not yell at you.  <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> ?</p>",
        "id": 194518945,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1587172729
    },
    {
        "content": "<p>catching up on this:</p>\n<ul>\n<li>the canonical URL can be different from the base. But you have to say that you know what you are doing by using the <code>special-url</code> parameter. No extension necessary</li>\n<li>it doesn't need to be easy to do it, but it does need to be possible. </li>\n<li>FMG will usually review any that are different to ensure that some of the policy concerns <span class=\"user-mention\" data-user-id=\"191469\">@Chris Moesel</span> raised are being handled ok</li>\n<li>looking back at what Bob is doing... sounds like it should be discussed on the terminology track to see what should be done. Typically, these gene terminologies are very large, and you can't simply define them </li>\n<li>more likely, I'll need to do implementation work on <a href=\"http://tx.fhir.org\" title=\"http://tx.fhir.org\">tx.fhir.org</a> to support these kinds of terminologies</li>\n<li>I don't know what this means</li>\n</ul>\n<blockquote>\n<p>that doesn't seem to be working when I try it</p>\n</blockquote>",
        "id": 194625556,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1587343830
    },
    {
        "content": "<blockquote>\n<p>that doesn't seem to be working when I try it</p>\n</blockquote>\n<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> -- I assumed that if Bob defined a code system in the IG w/ URL <code>http://www.genenames.org/geneId</code> and the codes were enumerated in that CodeSystem definition, <em>and</em> he added <code>http://www.genenames.org/geneId</code> as a <code>special-url</code> in the IG parameters, that the IG publisher would <em>not</em> complain about not supporting the <code>http://www.genenames.org/geneId</code> CodeSystem since it is fully defined in the IG (e.g., not an external dependency).  But... when I tried it, the IG Publisher still complained about it.</p>",
        "id": 194674516,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1587389375
    },
    {
        "content": "<p>what was the complaint?</p>",
        "id": 194674739,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1587389470
    },
    {
        "content": "<p>I tried editing the <code>ImplemenationGuide-vscs.json</code> file that sushi created, by adding this to <code>definition.parameter</code></p>\n<div class=\"codehilite\"><pre><span></span>      {\n        &quot;code&quot;: &quot;special-url&quot;,\n        &quot;value&quot;: &quot;http://www.genenames.org/geneId&quot;\n      }\n</pre></div>\n\n\n<p>but the <a href=\"http://fhir.b12x.org/ig/vscs/qa.html\" title=\"http://fhir.b12x.org/ig/vscs/qa.html\">qa.html</a> file still contained the same errors.</p>",
        "id": 194845391,
        "sender_full_name": " Bob Milius",
        "timestamp": 1587494667
    },
    {
        "content": "<p>I also added an additional <code>special-url</code> for <code>http://glstring.org</code>, but again no change in the <code>qa.html</code> file generated by the publisher.</p>\n<div class=\"codehilite\"><pre><span></span>      {\n        &quot;code&quot;: &quot;special-url&quot;,\n        &quot;value&quot;: &quot;http://www.genenames.org/geneId&quot;\n      },\n      {\n        &quot;code&quot;: &quot;special-url&quot;,\n        &quot;value&quot;: &quot;http://glstring.org&quot;\n      }\n</pre></div>",
        "id": 194846796,
        "sender_full_name": " Bob Milius",
        "timestamp": 1587495410
    },
    {
        "content": "<p>that should work ( the first one). I'll have to debug</p>",
        "id": 194853220,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1587498979
    },
    {
        "content": "<p>how do I do that?</p>",
        "id": 194853283,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1587499012
    },
    {
        "content": "<p>You can find the build files of this example here. <br>\n<a href=\"https://github.com/bmilius-nmdp/fshing/tree/master/test/build\" title=\"https://github.com/bmilius-nmdp/fshing/tree/master/test/build\">https://github.com/bmilius-nmdp/fshing/tree/master/test/build</a><br>\nThe <code>input/ImplementationGuide-vscs.json</code> file was hand-edited after sushi generated it.</p>",
        "id": 194855306,
        "sender_full_name": " Bob Milius",
        "timestamp": 1587499954
    },
    {
        "content": "<p>ok so I fixed one issue, but you have two issues remaining:</p>\n<ul>\n<li>Code System URI \"<a href=\"http://glstring.org\" title=\"http://glstring.org\">http://glstring.org</a>\" is unknown so the code cannot be validated - because you defined it as <a href=\"http://www.glstring.org\" title=\"http://www.glstring.org\">http://www.glstring.org</a></li>\n<li>None of the codes provided are in the value set <a href=\"http://example.org/ig/vscs/ValueSet/hla-geneid-valueset\" title=\"http://example.org/ig/vscs/ValueSet/hla-geneid-valueset\">http://example.org/ig/vscs/ValueSet/hla-geneid-valueset</a> - looks like you need to update the system value in that value set\n*</li>\n</ul>",
        "id": 194868946,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1587507523
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> Thank you! </p>\n<ul>\n<li>I fixed the system in the valueset and don't see the \"<a href=\"http://glstring.org\" title=\"http://glstring.org\">http://glstring.org</a>\" warning anymore. </li>\n<li>I still get the  2 errors. When you said you fixed one issue, will this be in the next release of the publisher?</li>\n</ul>",
        "id": 194880527,
        "sender_full_name": " Bob Milius",
        "timestamp": 1587519405
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191469\">@Chris Moesel</span> I had to change the system in the valueset from <code>http://example.org/ig/vscs/CodeSystem/hla-genename-codesystem</code>to <code>http://www.genenames.org/geneId</code> in valueset SD to get rid of the warning msg. This was generated by sushi. I did set it in my fsh file, but it looks like sushi overwrote it.</p>",
        "id": 194880667,
        "sender_full_name": " Bob Milius",
        "timestamp": 1587519616
    },
    {
        "content": "<p>yes next release</p>",
        "id": 194880779,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1587519815
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191916\">@ Bob Milius</span> said:</p>\n<blockquote>\n<p>This was generated by sushi. I did set it in my fsh file, but it looks like sushi overwrote it.</p>\n</blockquote>\n<p>I'm looking at the FSH you posted before and I think I see the issue (if it's the same as you're using now):</p>\n<div class=\"codehilite\"><pre><span></span>ValueSet:  HLAGeneIdVS\nTitle: &quot;HLA Gene Name Value Set&quot;\nId: hla-geneid-valueset\nDescription:  &quot;HLA HGNC GeneIds Valueset&quot;\n* codes from system HGNCGeneIdCS\n* HLAGeneIdCS#HGNC:4931   &quot;HLA-A&quot;\n* HLAGeneIdCS#HGNC:4932   &quot;HLA-B&quot;\n* HLAGeneIdCS#HGNC:4933   &quot;HLA-C&quot;\n// ... cut out the rest\n</pre></div>\n\n\n<p>This line references the external value set and essentially says the VS is comprised of <em>all codes</em> from that value set:</p>\n<div class=\"codehilite\"><pre><span></span>* codes from system HGNCGeneIdCS\n</pre></div>\n\n\n<p>That's fine, but then you also have lines like this:</p>\n<div class=\"codehilite\"><pre><span></span>* HLAGeneIdCS#HGNC:4931   &quot;HLA-A&quot;\n</pre></div>\n\n\n<p>This says to <em>also include</em> this specific code, but note that the CodeSystem you reference here is the alias <code>HLAGeneIdCS</code> which points to your <em>local</em> definition of the code system.  So SUSHI is putting that local CS in the VS because you individually specified codes from the local CS.  I expect that if you look at the exported VS, it actually contains references to both the external code system <em>and</em> the local one.</p>",
        "id": 194928381,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1587561469
    },
    {
        "content": "<p>Yes, you're right. Here's a snippet my exported VS.</p>\n<div class=\"codehilite\"><pre><span></span>...snip...\n  &quot;url&quot;: &quot;http://example.org/ig/vscs/ValueSet/hla-geneid-valueset&quot;,\n  &quot;compose&quot;: {\n    &quot;include&quot;: [\n      {\n        &quot;system&quot;: &quot;http://www.genenames.org/geneId&quot;\n      },\n      {\n        &quot;system&quot;: &quot;http://example.org/ig/vscs/CodeSystem/hla-genename-codesystem&quot;,\n        &quot;concept&quot;: [\n          {\n            &quot;code&quot;: &quot;HGNC:4931&quot;,\n            &quot;display&quot;: &quot;HLA-A&quot;\n          },\n...snip...\n</pre></div>\n\n\n<p>I removed the <code>* codes from system HGNCGeneIdCS</code> line from the fsh file and sushi removed the first <code>\"system\": \"http://www.genenames.org/geneId\"</code> and left the local system. </p>\n<div class=\"codehilite\"><pre><span></span>...snip...\n&quot;url&quot;: &quot;http://example.org/ig/vscs/ValueSet/hla-geneid-valueset&quot;,\n  &quot;compose&quot;: {\n    &quot;include&quot;: [\n      {\n        &quot;system&quot;: &quot;http://example.org/ig/vscs/CodeSystem/hla-genename-codesystem&quot;,\n        &quot;concept&quot;: [\n          {\n            &quot;code&quot;: &quot;HGNC:4931&quot;,\n            &quot;display&quot;: &quot;HLA-A&quot;\n          },\n...snip...\n</pre></div>\n\n\n<p>But now I have to edit that system to <code>http://www.genenames.org/geneId</code> to remove the qa warning for the example. How do I tell sushi to use that in the VS? The CS I have is a local fragment of the <code>http://www.genenames.org/geneId</code>.  (Sorry for what I'm sure are naive questions)</p>",
        "id": 194939225,
        "sender_full_name": " Bob Milius",
        "timestamp": 1587565705
    },
    {
        "content": "<p>I'm not 100% sure I understand what you're looking to do...  I <em>think</em> you're wanting to use a local CodeSystem definition to define an external code system (w/ an external canonical URL) and then create a value set of all the codes defined there?  Is that right?</p>",
        "id": 194943929,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1587567533
    },
    {
        "content": "<p>Yes, and also to have the publisher/validator not produce errors with an proper example. I edited the <code>system</code> in the VS to <code>http://genenames.org/geneId</code>, ran publisher, and posted the output <a href=\"http://fhir.b12x.org/ig/vscs/index.html\" title=\"http://fhir.b12x.org/ig/vscs/index.html\">here</a>. You can see the <a href=\"http://fhir.b12x.org/ig/vscs/ValueSet-hla-geneid-valueset.html\" title=\"http://fhir.b12x.org/ig/vscs/ValueSet-hla-geneid-valueset.html\">VS</a> has found the local fragment of the <a href=\"http://fhir.b12x.org/ig/vscs/CodeSystem-hla-genename-codesystem.html\" title=\"http://fhir.b12x.org/ig/vscs/CodeSystem-hla-genename-codesystem.html\">CS</a>, and even populated the definitions which weren't in the VS structuredefinition. The <a href=\"http://fhir.b12x.org/ig/vscs/qa.html\" title=\"http://fhir.b12x.org/ig/vscs/qa.html\">qa.html</a> still shows errors though. <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> said he fixed something in the publisher, but I don't think it's in the current release.</p>",
        "id": 194949859,
        "sender_full_name": " Bob Milius",
        "timestamp": 1587569978
    },
    {
        "content": "<p>btw, I just tried removing the individual codes from the VS fsh, and only use the <code>* codes from system HGNCGeneIdCS</code>. That worked in removing the warning without further editing of the VS, and the expansion from the local CS is seen in the <a href=\"http://fhir.b12x.org/ig/vscs2/ValueSet-hla-geneid-valueset.html\" title=\"http://fhir.b12x.org/ig/vscs2/ValueSet-hla-geneid-valueset.html\">rendered page</a>, so that may be the way to go. But the same errors are still in the <a href=\"http://fhir.b12x.org/ig/vscs2/qa.html\" title=\"http://fhir.b12x.org/ig/vscs2/qa.html\">qa.html</a>.</p>",
        "id": 194951711,
        "sender_full_name": " Bob Milius",
        "timestamp": 1587570797
    },
    {
        "content": "<p>OK.  I think there may be somewhere in our code that assumes a locally defined CS has a URL based on the IG canonical -- so it's also possible you've run into that during one of these variations of your FSH code.  I'm going to file an issue for us to look into that.</p>",
        "id": 194959882,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1587574460
    }
]