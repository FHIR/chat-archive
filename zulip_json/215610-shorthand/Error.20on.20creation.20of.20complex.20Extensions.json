[
    {
        "content": "<p>Hi, I think I found a bug.<br>\nI created a Complex Extension that includes 3 elements, 2 of them start with the text \"coordinate\", one is plain \"coordinate\" (defined as decimal), the other one \"coordinateType\"(defined as CodeableConcept). While defining them I get the error :<br>\nerror Type constraint on Extension.extension.value[x] makes rules in WithError obsolete for choices: valueCodeableConcept<br>\nI changed the name of \"coordinateType\" to \"cType\" and the error disappears. I left the 2 definitions at FSHOnline<br>\n<a href=\"https://fshschool.org/FSHOnline/#/share/3LoSpGv\">https://fshschool.org/FSHOnline/#/share/3LoSpGv</a></p>",
        "id": 276847477,
        "sender_full_name": "Diana_Ovelgoenne",
        "timestamp": 1648459791
    },
    {
        "content": "<p>Yes, that does seem like a bug.  Thanks for reporting it and thanks for providing a reproducible example.</p>\n<p>I'd actually recommend a slightly different approach.  Rather than this:</p>\n<div class=\"codehilite\"><pre><span></span><code>* extension[coordinateType].value[x] only CodeableConcept\n* extension[coordinateType].valueCodeableConcept from SHSCoordinateTypeValueSet\n</code></pre></div>\n<p>I'd suggest this:</p>\n<div class=\"codehilite\"><pre><span></span><code>* extension[coordinateType].value[x] only CodeableConcept\n* extension[coordinateType].value[x] from SHSCoordinateTypeValueSet\n</code></pre></div>\n<p>Since <code>value[x]</code> is already restricted to a single type, there isn't a need to call out the type-specific slice of it.  By just applying the binding directly to <code>value[x]</code>:</p>\n<ul>\n<li>the resulting profile is simpler (no extra type slices)</li>\n<li>and you avoid the bug that you reported here</li>\n</ul>",
        "id": 276888672,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1648480575
    },
    {
        "content": "<p>While I still recommend the workaround, I've also created <a href=\"https://github.com/FHIR/sushi/issues/1061\">SUSHI#1061</a> to track the original error.</p>",
        "id": 278174852,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1649342878
    },
    {
        "content": "<p>yes I did make your recommended changes and it did resolve my FSH issue(s).<br>\nI greatly appreciate your insights.</p>",
        "id": 278177898,
        "sender_full_name": "Al Pivonka",
        "timestamp": 1649343966
    }
]