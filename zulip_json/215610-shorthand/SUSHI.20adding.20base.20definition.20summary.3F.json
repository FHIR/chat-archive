[
    {
        "content": "<p>I have a profile based on the vitalsigns profile and it appears that SUSHI is bringing over the summary from the base profile into my profile.  Here is what SUSHI creates:</p>\n<div class=\"codehilite\"><pre><span></span><code>{\n  &quot;resourceType&quot;: &quot;StructureDefinition&quot;,\n  &quot;id&quot;: &quot;ibm-fda-icsr-patientlastmenstrualperiod&quot;,\n  &quot;extension&quot;: [\n    {\n      &quot;url&quot;: &quot;http://hl7.org/fhir/StructureDefinition/structuredefinition-summary&quot;,\n      &quot;valueMarkdown&quot;: &quot;\\&quot;#### Complete Summary of the Mandatory Requirements\\n\\n1.  One status in `Observation.status`which has a [required](http://build.fhir.org/terminologies.html#extensible) binding to:\\n    -    [ObservationStatus] value set.\\n1.  A category in `Observation.category` which must have:\\n    -   a fixed `Observation.category.coding.system`=\\&quot;http://terminology.hl7.org/CodeSystem/observation-category\\&quot;\\n    -   a fixed `Observation.category.coding.code`= \\&quot;vital-signs\\&quot;\\n\\n1.  A code in `Observation.code`\\n    -   a fixed `Observation.code.coding.system`= \\&quot;http://loinc.org\\&quot;\\&quot;\\n    -   a LOINC code in `Observation.code.coding.code` which has an [extensible](http://build.fhir.org/terminologies.html#extensible) binding to:\\n         -   [Vital Signs] value set.\\n                \\n1.  One patient in `Observation.subject`\\n1.  A date and time in `effectiveDateTime` or `effectivePeriod`\\n1.  Either one `Observation.value[x]` or, if there is no value, one code in `Observation.DataAbsentReason`\\n    -   if a vital sign measure then:\\n        -  One numeric value in Observation.valueQuantity.value\\n        - a fixed Observation.valueQuantity.system=\\&quot;http://unitsofmeasure.org\\&quot;\\n        - a UCUM unit code in Observation.valueQuantity.code which has an required binding to the [Vital Signs Units] value set.\\n    -   Observation.DataAbsentReason is bound to [Observation Value\\n        Absent Reason] value set.\\n\\n1.  When using a panel code to group component observations (Note: See\\n    the comments regarding blood pressure in the table above), one or\\n    more `Observation.component.code` each of which must have:\\n    -   a fixed\\n        `Observation.component.code.coding.system` =\\&quot;\\&quot;http://loinc.org\\&quot;\\&quot;\\n         -   a LOINC code in `Observation.code.coding.code` which has an [extensible] binding to:\\n             -   [Vital Signs Units] value set.\\n\\n1.  Either one `Observation.component.valueQuantity` or, if there is\\n    no value, one code in `Observation.component.DataAbsentReason`\\n    -   Observation.component.DataAbsentReason is bound to [Observation\\n        Value Absent Reason] value set.\\n\\n1.  When using a panel code to group observations, one or more reference\\n    to Vitals Signs Observations in `Observation.related.target`\\n    -   a fixed `Observation.related.type`= \\&quot;has-member\\&quot;\\&quot;\\n\\n [Vital Signs]: valueset-observation-vitalsignresult.html\\n  [Vital Signs Units]: valueset-ucum-vitals-common.html\\n  [extensible]: terminologies.html#extensible\\n  [ObservationStatus]: valueset-observation-status.html\\n [Observation Value Absent Reason]: valueset-data-absent-reason.html\\n[required]: terminologies.html#required\\&quot;&quot;\n    }\n  ],\n  &quot;url&quot;: &quot;http://ibm.com/fhir/fda/icsr/StructureDefinition/ibm-fda-icsr-patientlastmenstrualperiod&quot;,\n...\n</code></pre></div>",
        "id": 208040139,
        "sender_full_name": "Jean Duteau",
        "timestamp": 1598400911
    },
    {
        "content": "<p>I haven't seen the behaviour that I'm getting so I'm wondering if this is something new that I'm getting since updating SUSHI?</p>\n<p>In any case, I'm pretty sure that it shouldn't be doing this</p>",
        "id": 208040226,
        "sender_full_name": "Jean Duteau",
        "timestamp": 1598400987
    },
    {
        "content": "<p>see the discussion here where we tracked down who was doing the weirdness:  <a href=\"#narrow/stream/179252-IG-creation/topic/Bad.20links.20in.20Vital.20Signs.20derived.20profiles\">https://chat.fhir.org/#narrow/stream/179252-IG-creation/topic/Bad.20links.20in.20Vital.20Signs.20derived.20profiles</a></p>",
        "id": 208040268,
        "sender_full_name": "Jean Duteau",
        "timestamp": 1598401051
    },
    {
        "content": "<p>You're right that this behavior is new, SUSHI used to ignore all extensions on the base profile. But, we changed that in 0.15.0 by making it so that <a href=\"https://github.com/FHIR/sushi/pull/534\">only selected extensions were not inherited</a>. This was done because we had an <a href=\"https://jira.hl7.org/browse/FHIR-27535\">issue about it</a>, and there was a <a href=\"#narrow/stream/179239-tooling/topic/Forge.20added.20extension.20explicit-type-name/near/203889104\">conversation about it</a> on zulip.</p>\n<p>From that discussion you linked though, it sounds like we need to add another extension to our list of extensions not to inherit.</p>",
        "id": 208079732,
        "sender_full_name": "Nick Freiter",
        "timestamp": 1598441523
    },
    {
        "content": "<p>Logged here: <a href=\"https://github.com/FHIR/sushi/issues/582\">https://github.com/FHIR/sushi/issues/582</a></p>",
        "id": 208079972,
        "sender_full_name": "Nick Freiter",
        "timestamp": 1598441749
    },
    {
        "content": "<p>Is there a way in the meantime to override the inheriting of this specific extension?</p>",
        "id": 208108830,
        "sender_full_name": "Jean Duteau",
        "timestamp": 1598456327
    },
    {
        "content": "<p>That's a good question.  I was thinking you could use a caret rule to clear the value, but... I don't think FSH actually has a literal representation of an empty array.  Arrays are always accessed one item at a time.  Which makes <em>deleting</em> arrays (and/or <em>deleting</em> individual elements in arrays) quite difficult, doesn't it?</p>",
        "id": 208117863,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1598460776
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"192166\">@Jean Duteau</span> -- fixed in SUSHI 0.16.0, just released a few minutes ago!</p>",
        "id": 208397205,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1598650273
    },
    {
        "content": "<p>cool, thanks for the responsiveness!</p>",
        "id": 208397224,
        "sender_full_name": "Jean Duteau",
        "timestamp": 1598650288
    }
]