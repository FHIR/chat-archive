[
    {
        "content": "<p>I've run into a need to have code values defined in the aliases.fsh file so that I can use them in different FSH files.   Maybe there's a better way to do this; I'm open to ideas.</p>\n<p>So, I have a FSH file, e.g. for LowBloodSugar.fsh, and in that file I'm defining the ValueSet of SCT codes I want to use for it and then also referencing those same SCT codes in the ConceptMap defined in this same file and also in a PlanDefinition.useContext entry.    I then need to create a CodeSystem.fsh file that has these codes, as well as other SCT codes used in other &lt;use case&gt;/.fsh files so that the CodeSystem JSON resource file generated by SUSHI has a consistent set of code values. </p>\n<p>I was hoping to define these codes in the aliases.fsh file and then refer to them in both the &lt;use case&gt;.fsh file and the CodeSystem.fsh file but it doesn't seem I can use an alias on the 'right hand side'.   For example:</p>\n<p>in aliases.fsh</p>\n<p>Alias: SCT = <a href=\"http://snomed.info/sct\">http://snomed.info/sct</a><br>\nAlias: $LowBloodSugar = 12345.  (assume this is the correct SNOMED CT code)</p>\n<p>in LowBloodSugar.fsh </p>\n<p>ValueSet: LowBloodSugar<br>\nTitle: \"LowBloodSugarVS Valueset\"</p>\n<ul>\n<li>SCT#$LowBloodSugar</li>\n</ul>\n<p>But when I run this through SUSHI the $LowBloodSugar string is directly copied to the output ValueSet-LowBloodSugar.json file.</p>",
        "id": 210175059,
        "sender_full_name": "John Silva",
        "timestamp": 1600196875
    },
    {
        "content": "<p>Aliases currently can only be used to define URLs.  To do what you want, you need the Macro capability that is in a future version of FSH.</p>",
        "id": 210180935,
        "sender_full_name": "Jean Duteau",
        "timestamp": 1600199404
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"192166\">@Jean Duteau</span> is correct, <code>Alias:</code> is defined to only work as an alias for URL values.  So you're looking for a way to reference a code by a friendlier handle than just using the code itself?  For example, you don't want to say <code>SCT#12345</code> in multiple places -- you'd rather say <code>SCT#$LowBloodSugar</code> because it's easier to remember and more descriptive?  Is that the idea?  (Like Jean said, it's not possible now, but I want to be sure we understand the use case so we can consider for future versions).</p>\n<p>I don't think I quite followed the bit about <code>CodeSystem</code> though -- as <code>CodeSystem</code> is usually used to define codes from code systems not yet represented in FHIR.  SNOMED already have a <code>CodeSystem</code> representation in FHIR, so I don't fully understand how/why you would be defining a new <code>CodeSystem</code> with SNOMED codes...   But I expect I'm misunderstanding someting.</p>",
        "id": 210182339,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1600200082
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191469\">@Chris Moesel</span>  - yes, the use case is because these codes need to be used in multiple places and without aliases (especially a $ alias which seems to have better error reporting) the code can be mistyped in different places and not noticed.   For example, in our &lt;use case&gt;.fsh file we define ValueSet's ConceptMap's, PlanDefinition's, etc. and there are references to the SCT code in at least 3 places already that have to be kept consistent.</p>\n<p>(the thing about the CodeSystem.fsh is because we're trying to work around what appears to be a bug in HAPI with code:in searches so we're trying to define a subset of the code system we're using to see if we can get around this problem.   I've asked about this in the hapi channel but haven't seen any responses yet.)</p>",
        "id": 210183724,
        "sender_full_name": "John Silva",
        "timestamp": 1600200652
    },
    {
        "content": "<p>Thanks for the context <span class=\"user-mention\" data-user-id=\"298707\">@John Silva</span>.  Wanting to avoid unintentional mistakes and mismatches certainly makes sense.</p>\n<p><code>RuleSet</code>s allow you to repeat whole rules, but since you want to use this code in different contexts, I don't think <code>RuleSet</code>s (or even the upcoming \"parameterized\" <code>RuleSet</code>s) would help you.  That's unfortunate.</p>\n<p>So you probably really do want something very much like the alias.  We restrict aliases to URLs to help ensure maintainability and implementability.  Knowing aliases are only valid where URLs can be accepted helps reduce scope and enhance error checking.  I don't think we'd want to expand alias to allow arbitrary substitution of <em>any</em> value, but we could probably consider if it might make sense to allow it to hold a <code>code</code> value.   I'll add this to our issue tracker so we don't lose sight of it.</p>",
        "id": 210185131,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1600201303
    },
    {
        "content": "<p><a href=\"https://github.com/FHIR/sushi/issues/602\">SUSHI #602</a></p>",
        "id": 210185557,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1600201509
    }
]