[
    {
        "content": "<p>I'm trying to add an extension to Questionnaire.item:</p>\n<div class=\"codehilite\"><pre><span></span><code>item[0].extension[http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl].valueCoding = http://molit.eu/fhir/CodeSystem/questionnaire-codes-tbd#vas\n</code></pre></div>",
        "id": 217768273,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1606231531
    },
    {
        "content": "<p>and getting: </p>\n<blockquote>\n<p>error The element or path you referenced does not exist: item.extension[http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl].valueCoding<br>\n  File: /Users/patrickwerner/Downloads/fsh-tutorial-master/FishExampleComplete/input/fsh/Questionnaire.fsh<br>\n  Line: 6<br>\nerror Cannot read property 'children' of undefined</p>\n</blockquote>",
        "id": 217768416,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1606231589
    },
    {
        "content": "<p>Can't find the correct syntax for adding the extension content</p>",
        "id": 217768855,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1606231797
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191451\">Patrick Werner</span> <a href=\"#narrow/stream/215610-shorthand/topic/adding.20extension.20to.20Instance/near/217768416\">said</a>:</p>\n<blockquote>\n<p>and getting: </p>\n<blockquote>\n<p>error The element or path you referenced does not exist: item.extension[http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl].valueCoding<br>\n  File: /Users/patrickwerner/Downloads/fsh-tutorial-master/FishExampleComplete/input/fsh/Questionnaire.fsh<br>\n  Line: 6<br>\nerror Cannot read property 'children' of undefined</p>\n</blockquote>\n</blockquote>\n<p>did you define the extension before in the questionnaire? What is this an instanceOf? <br>\nand I think extensions can be referred to by id or name, not by url.</p>",
        "id": 217787889,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1606239387
    },
    {
        "content": "<p>If you haven't defined the extension, this should work:</p>\n<ul>\n<li>item[0].extension[0].valueCoding = <a href=\"http://molit.eu/fhir/CodeSystem/questionnaire-codes-tbd#vas\">http://molit.eu/fhir/CodeSystem/questionnaire-codes-tbd#vas</a></li>\n<li>item[0].extension[0].url = \"<a href=\"http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl\">http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl</a>\"</li>\n</ul>",
        "id": 217788025,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1606239458
    },
    {
        "content": "<p>I was running into a similar problem a week or two ago. You may be running into the fact that using the url for the array index only works in sushi 1+.</p>",
        "id": 217795311,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1606242730
    },
    {
        "content": "<p>i'm using SUSHI v1.0.1</p>",
        "id": 217796001,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1606243034
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191832\">Jose Costa Teixeira</span> [said](<a href=\"#narrow/stream/215610-\">https://chat.fhir.org/#narrow/stream/215610-</a><br>\ndid you define the extension before in the questionnaire? What is this an instanceOf? </p>\n<p>no i didn't as it is a core extension, defined in the FHIR spec.<br>\nSo the syntax: <code>item[0].extension[http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl].valueCoding = http://molit.eu/fhir/CodeSystem/questionnaire-codes-tbd#vas</code>is not compliant to the FSH spec?</p>\n<p>If yes, i'd like to make the proposal to add this syntax. Would be very neat to be able to add an Extension into an Instance with a single line statement.</p>",
        "id": 217796427,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1606243226
    },
    {
        "content": "<p>Well, that rules that issue out.</p>",
        "id": 217796435,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1606243230
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191832\">Jose Costa Teixeira</span> <a href=\"#narrow/stream/215610-shorthand/topic/adding.20extension.20to.20Instance/near/217788025\">said</a>:</p>\n<blockquote>\n<p>If you haven't defined the extension, this should work:</p>\n<ul>\n<li>item[0].extension[0].valueCoding = <a href=\"http://molit.eu/fhir/CodeSystem/questionnaire-codes-tbd#vas\">http://molit.eu/fhir/CodeSystem/questionnaire-codes-tbd#vas</a></li>\n<li>item[0].extension[0].url = \"<a href=\"http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl\">http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl</a>\"</li>\n</ul>\n</blockquote>\n<p>works. Thanks <span class=\"user-mention\" data-user-id=\"191832\">@Jose Costa Teixeira</span></p>",
        "id": 217796704,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1606243359
    },
    {
        "content": "<p>What I did was</p>\n<div class=\"codehilite\"><pre><span></span><code>Alias: $ext-element-minValue    = http://hl7.org/fhir/StructureDefinition/minValue\n...\n* item[7].item[8].extension[$ext-element-minValue].valueInteger = 0\n</code></pre></div>\n<p>And this seems to work well.</p>",
        "id": 217796831,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1606243422
    },
    {
        "content": "<p>reading the FSH spec <code>{Extension name|id|url}</code> should be usable here, so i assume FSH allows it, but SUSHI isn't supporting it (yet)?<br>\nOr am i missing a part of the spec which restricts the reference to an Extension to be name-only?</p>",
        "id": 217798160,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1606244133
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191451\">@Patrick Werner</span> -- there are two issues at play here:</p>\n<ol>\n<li><code>questionnaire-itemControl</code>'s value is a <code>CodeableConcept</code>, so you must use <code>valueCodeableConcept</code>, not <code>valueCoding</code></li>\n<li>I think you <em>should</em> be able to use the full URL there, but as you noted, it's not working in SUSHI.  As <span class=\"user-mention\" data-user-id=\"191380\">@Elliot Silver</span> suggested above, however, it works if you assign the URL to an alias and then reference the alias.</li>\n</ol>\n<p>Working example:</p>\n<div class=\"codehilite\"><pre><span></span><code>Alias: $item-control = http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl\n\nInstance: MyQ\nInstanceOf: Questionnaire\n* status = #active\n* item[0].extension[$item-control].valueCodeableConcept = http://molit.eu/fhir/CodeSystem/questionnaire-codes-tbd#vas\n* item[0].linkId = &quot;foo&quot;\n* item[0].type = #group\n</code></pre></div>\n<p>I'll log a bug about the URL not working directly.</p>",
        "id": 217810587,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1606250452
    },
    {
        "content": "<p><a href=\"https://github.com/FHIR/sushi/issues/674\">SUSHI #674</a></p>",
        "id": 217811110,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1606250762
    },
    {
        "content": "<p>thx for the response and for creating the issue, wasn't 100% sure if i understood the FSH grammar correctly <span class=\"user-mention\" data-user-id=\"191469\">@Chris Moesel</span> <br>\ni already changed the item to valueCodeableConcept (noticed during validation).</p>",
        "id": 217813876,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1606252174
    }
]