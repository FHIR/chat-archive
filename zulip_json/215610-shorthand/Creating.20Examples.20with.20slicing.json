[
    {
        "content": "<p>I'm trying to figure out the right way of creating examples where I have defined slices.  In my profile, I have the following slices:</p>\n<div class=\"codehilite\"><pre><span></span>* telecom 3..*\n* telecom ^slicing.discriminator.type = #value\n* telecom ^slicing.discriminator.path = &quot;system&quot;\n* telecom ^slicing.rules = #open\n* telecom ^slicing.description = &quot;Slice based on the different telecom types (systems)&quot;\n* telecom contains Phone 1..1 and Fax 1..1 and Email 1..1\n* telecom[Phone].system = #phone\n* telecom[Fax].system = #fax\n* telecom[Email].system = #email\n</pre></div>\n\n\n<p>I thought that with the above profile definition, my example could just specify the values:</p>\n<div class=\"codehilite\"><pre><span></span>* telecom[Phone].value = &quot;+01 123 456 78&quot;\n* telecom[Fax].value = &quot;+01 123 456 89&quot;\n* telecom[Email].value = &quot;email@city.us&quot;\n</pre></div>\n\n\n<p>But that doesn't automatically populate the system.  I can obviously go in and add the systems in my instance definition, but do I need to?  Am I missing something that would allow me not have to populate system in my example and have sushi infer that from the slices?</p>",
        "id": 191805258,
        "sender_full_name": "Jean Duteau",
        "timestamp": 1585167315
    },
    {
        "content": "<p>In this case SUSHI will not fill in the values for <code>system</code>, because <code>system</code> has cardinality <code>0..1</code>, so we can't know for sure that the <code>system</code> field should have a value on a given instance of your profile. So one way to make the <code>system</code> field be automatically populated on an instance would be to change the cardinality to be <code>1..1</code> for each slice by adding the following lines to your profile:</p>\n<div class=\"codehilite\"><pre><span></span>* telecom[Phone].system 1..1\n* telecom[Fax].system 1..1\n* telecom[Email].system 1..1\n</pre></div>\n\n\n<p>Or alternately, you could change the cardinality of all slices so that <code>system</code> is <code>1..1</code> on any slice by adding this line to your profile:</p>\n<div class=\"codehilite\"><pre><span></span>* telecom.system 1..1\n</pre></div>",
        "id": 191807454,
        "sender_full_name": "Nick Freiter",
        "timestamp": 1585168444
    },
    {
        "content": "<p>thx</p>",
        "id": 191807499,
        "sender_full_name": "Jean Duteau",
        "timestamp": 1585168476
    },
    {
        "content": "<p>I suspect that most people would want us to set properties to <code>1..</code> automatically if they have a fixed value, but... I don't think this is strictly required by FHIR and there might be use cases where you make something optional but fix the value so that if the user <em>does</em> use it, it <em>must</em> be this value.  Still, we welcome thoughts on this...</p>",
        "id": 191818082,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1585174775
    },
    {
        "content": "<p>if you a) have a fixed value and b) are using it as the discriminator, I suspect that it should be considered as 1..1 for the specific slices.  In my instance, I'm saying that there are three optional slices.  When I use the slice later on, we can assume that system (the fixed discriminator) is 1..1 for the slice only.</p>",
        "id": 191818368,
        "sender_full_name": "Jean Duteau",
        "timestamp": 1585174956
    },
    {
        "content": "<p>I know we've discussed having that as a rule, though I don't remember if a change request has been submitted or approved.  Certainly the elements along the path to the discriminator where a fixed value (for value slicing) or pattern (for pattern slicing) in a slice must be 1..x.  (Can't be 0..x or 2+..x)</p>",
        "id": 191840479,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1585198776
    },
    {
        "content": "<p>Yeah, I think we can make that happen automagically in SUSHI then (for fixed values in a discriminator path).  We'll look into it.</p>",
        "id": 191876815,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1585226018
    }
]