[
    {
        "content": "<p>I'm sure I've asked this before, but we're getting a validation error (using the external java validator) which is complaining about 'System.string' as a valid type value in an extension definition produced by the IG Publisher - from a shorthand produced definition. This is the validation command we're using:</p>\n<p>java -jar org.hl7.fhir.validator.jar dhb.StructureDefinition.xml -output validation.xml -version 4.0.1</p>",
        "id": 193847863,
        "sender_full_name": "David Hay",
        "timestamp": 1586836130
    },
    {
        "content": "<p>what's the instance that causes the error?</p>",
        "id": 193851205,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1586841279
    },
    {
        "content": "<p><a href=\"http://igs.clinfhir.com/nhi/StructureDefinition-dhb.html\" title=\"http://igs.clinfhir.com/nhi/StructureDefinition-dhb.html\">http://igs.clinfhir.com/nhi/StructureDefinition-dhb.html</a></p>",
        "id": 193852263,
        "sender_full_name": "David Hay",
        "timestamp": 1586842836
    },
    {
        "content": "<p>The only cases of <code>System.String</code> I see in your SD are on <code>Extension.id</code> and <code>Extension.url</code> -- which I believe are expected.  In fact, if you look at the Extension definition itself (which your SD is based on), it has the same: <a href=\"http://hl7.org/fhir/extension.profile.json.html\" title=\"http://hl7.org/fhir/extension.profile.json.html\">http://hl7.org/fhir/extension.profile.json.html</a></p>",
        "id": 193957491,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1586898551
    },
    {
        "content": "<p>Superficially, at least - this looks problematic to me - i.e. the expected values in the valueUrl and code elements appear to be reversed and that's effectively what the Validator is reporting...</p>\n<div class=\"codehilite\"><pre><span></span>&quot;type&quot; : [{\n        &quot;extension&quot; : [{\n          &quot;url&quot; : &quot;http://hl7.org/fhir/StructureDefinition/structuredefinition-fhir-type&quot;,\n          &quot;valueUrl&quot; : &quot;string&quot;\n        }],\n        &quot;code&quot; : &quot;http://hl7.org/fhirpath/System.String&quot;\n      }],\n</pre></div>",
        "id": 193959520,
        "sender_full_name": "Peter Jordan",
        "timestamp": 1586899808
    },
    {
        "content": "<p>I understand it seems odd, but this actually happens a lot -- primarily in definitions of primitives and the definitions of <code>Element.id</code> and <code>Element.url</code> -- and last I checked was quite intentional.  Again, here is from the rendered JSON straight from the published R4 spec: <a href=\"/user_uploads/10155/P7KgRA_Q5HRKb2C2XhqoGm6S/image.png\" title=\"image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/P7KgRA_Q5HRKb2C2XhqoGm6S/image.png\" title=\"image.png\"><img src=\"/user_uploads/10155/P7KgRA_Q5HRKb2C2XhqoGm6S/image.png\"></a></div>",
        "id": 193986563,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1586928858
    },
    {
        "content": "<p>the validator shouldn't be complaining about this  - it</p>",
        "id": 193986582,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1586928900
    },
    {
        "content": "<p>it's on my todo list to investigate</p>",
        "id": 193986589,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1586928906
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191364\">@Peter Jordan</span> and <span class=\"user-mention\" data-user-id=\"191321\">@David Hay</span> -- this pattern is often referred to as \"compiler magic\".  If you search \"compiler magic\" on Zulip, you'll find a few threads about it, but here's a nice long one for you. ;-) <a href=\"#narrow/stream/179166-implementers/topic/.22http.3A.2F.2Fhl7.2Eorg.2Ffhirpath.2FSystem.2EString.22\" title=\"#narrow/stream/179166-implementers/topic/.22http.3A.2F.2Fhl7.2Eorg.2Ffhirpath.2FSystem.2EString.22\">https://chat.fhir.org/#narrow/stream/179166-implementers/topic/.22http.3A.2F.2Fhl7.2Eorg.2Ffhirpath.2FSystem.2EString.22</a></p>",
        "id": 193986887,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1586929288
    },
    {
        "content": "<p>Thanks Chris. A little too visible to be termed \"magic\" I'd say and certainly not the output from a compiler - but as long as it's valid within the context of a FHIR StructureDefinition all is fine. :)</p>",
        "id": 193990058,
        "sender_full_name": "Peter Jordan",
        "timestamp": 1586933045
    }
]