[
    {
        "content": "<p>I would be glad for help with inserting an extension for an instance at the element level.</p>\n<hr>\n<p>It works on resource level:<br>\nSD for Device :</p>\n<div class=\"codehilite\"><pre><span></span><code>* extension contains StraumannExtensionAbutmentClass named abutmentclass 0..1\n</code></pre></div>\n<p>EX for Device:</p>\n<div class=\"codehilite\"><pre><span></span><code>* extension[abutmentclass].valueCodeableConcept = SCT#468936006 &quot;Dental implant suprastructure, permanent (physical object)&quot;\n</code></pre></div>\n<hr>\n<p>It doesn't work on element level -&gt; <strong>Sushi: error Element Device.type.extension:abutmentclass.url has minimum cardinality 1 but occurs 0 time(s).</strong><br>\nSD for Device :</p>\n<div class=\"codehilite\"><pre><span></span><code>* type.extension contains StraumannExtensionAbutmentClass named abutmentclass 0..1\n</code></pre></div>\n<p>EX for Device:</p>\n<div class=\"codehilite\"><pre><span></span><code>* type.extension[abutmentclass].valueCodeableConcept = SCT#468936006 &quot;Dental implant suprastructure, permanent (physical object)&quot;\n</code></pre></div>\n<hr>\n<div class=\"codehilite\"><pre><span></span><code>Extension: StraumannExtensionAbutmentClass\nId: straumann-extension-abutmentclass\nTitle: &quot;Straumann Extension Abutment Class&quot;\nDescription: &quot;Straumann Extension Abutment Class&quot;\n* valueCodeableConcept only CodeableConcept\n* valueCodeableConcept ^min = 1\n* valueCodeableConcept from StraumannVSAbutmentClass (required)\n</code></pre></div>",
        "id": 225036934,
        "sender_full_name": "Michaela Ziegler",
        "timestamp": 1612368299
    },
    {
        "content": "<p>Hi <span class=\"user-mention\" data-user-id=\"233842\">@Michaela Ziegler</span> -- what version of SUSHI are you using?  It seems to work for me using SUSHI 1.1.0.  I put it in FSH Online and it compiles correctly there: <a href=\"https://fshschool.org/FSHOnline/#/share/2YE8x0b\">https://fshschool.org/FSHOnline/#/share/2YE8x0b</a></p>",
        "id": 225043215,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1612370784
    },
    {
        "content": "<p>Sushi: info  Running SUSHI v1.1.0 (implements FHIR Shorthand specification v1.1.0)</p>\n<p>I have just seen that the problem only arises when I add the type. What am I doing wrong?<br>\n<a href=\"https://fshschool.org/FSHOnline/#/share/3rnFkmP\">https://fshschool.org/FSHOnline/#/share/3rnFkmP</a></p>",
        "id": 225048195,
        "sender_full_name": "Michaela Ziegler",
        "timestamp": 1612372709
    },
    {
        "content": "<p>Actually your shared code did not give me that error, but that is because setting <code>type</code> <em>after</em> setting <code>type.extension</code> wiped out the extension (since you re-assigned the whole <code>type</code> value including the extensions).  But if I change the order and assign <code>type</code> and <em>then</em> <code>type.extension</code>, I see the problem.  Looks like a bug to me; I don't think there is anything you did wrong.  <a href=\"https://fshschool.org/FSHOnline/#/share/3toDtQo\">https://fshschool.org/FSHOnline/#/share/3toDtQo</a></p>",
        "id": 225064303,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1612378943
    },
    {
        "content": "<p>For now, you can work around the bug by inserting this rule to explicitly set the URL:</p>\n<div class=\"codehilite\"><pre><span></span><code>* type.extension[abutmentclass].url = Canonical(StraumannExtensionAbutmentClass)\n</code></pre></div>\n<p>I also noticed one rule that I'd typically write a different way than you did:</p>\n<div class=\"codehilite\"><pre><span></span><code>* valueCodeableConcept ^min = 1\n</code></pre></div>\n<p>would usually be written as:</p>\n<div class=\"codehilite\"><pre><span></span><code>* valueCodeableConcept 1..1\n</code></pre></div>\n<p>or if you really don't want to state the max (since you're not changing it), you can also do:</p>\n<div class=\"codehilite\"><pre><span></span><code>* valueCodeableConcept 1..\n</code></pre></div>",
        "id": 225065059,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1612379274
    },
    {
        "content": "<p>Great, thx for your support!</p>",
        "id": 225078137,
        "sender_full_name": "Michaela Ziegler",
        "timestamp": 1612384892
    },
    {
        "content": "<p>I filed a bug for this: <a href=\"https://github.com/FHIR/sushi/issues/751\">SUSHI#751</a></p>",
        "id": 225214099,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1612468799
    }
]