[
    {
        "content": "<p>I am setting up slicing on AdverseEvent and I want an open slice where at least one slice is fixed to a specific type or profile.  I'm sure I've done this before and I have the following:</p>\n<div class=\"codehilite\"><pre><span></span><code>* suspectEntity ^slicing.discriminator.type = #profile\n* suspectEntity ^slicing.discriminator.path = &quot;type&quot;\n* suspectEntity ^slicing.rules = #open\n* suspectEntity ^slicing.description = &quot;Slice based on the allowed suspect entity.&quot;\n* suspectEntity contains Immunization 1..1 MS\n* suspectEntity[Immunization].instance only Reference(ICSRImmunization)\n</code></pre></div>\n<p>In my example instance, I have the following:</p>\n<div class=\"codehilite\"><pre><span></span><code>Instance: VAERSExampleEvent\nInstanceOf: VAERSAdverseEvent\n* suspectEntity[0].instance = Reference(VAERSExampleImmunization)\n* suspectEntity[0].causality.productRelatedness = &quot;Suspect&quot;\n* suspectEntity[1].instance = Reference(VAERSHydrocortisoneAdministration)\n* suspectEntity[1].causality.productRelatedness = &quot;Concomitant&quot;\n\nInstance: VAERSExampleImmunization\nInstanceOf: ICSRImmunization\n</code></pre></div>\n<p>I'm getting an error and it's a range of lines:</p>\n<div class=\"codehilite\"><pre><span></span><code>error Element AdverseEvent.suspectEntity:Immunization has minimum cardinality 1 but occurs 0 time(s).\n  File: /Users/jeanduteau/Documents/DDIWork/IBM-BEST/fhir-icsr-ae-reporting/input/fsh/Examples.fsh\n  Line: 327 - 339\n</code></pre></div>",
        "id": 222623957,
        "sender_full_name": "Jean Duteau",
        "timestamp": 1610562264
    },
    {
        "content": "<p>as I wrote that, I remembered specifying the slice name and when I did that, the error went away.  So SUSHI is looking <em>explicitly</em> for the slice name?</p>",
        "id": 222624355,
        "sender_full_name": "Jean Duteau",
        "timestamp": 1610562428
    },
    {
        "content": "<p>your slicing path looks like it's pointing to suspectEntity.type which does not look like it exists. I think you want \"instance.resolve()\" no?</p>",
        "id": 222625368,
        "sender_full_name": "ryan moehrke",
        "timestamp": 1610562894
    },
    {
        "content": "<p>yes, just figured that out after I got Sushi to move forward. :)</p>",
        "id": 222625439,
        "sender_full_name": "Jean Duteau",
        "timestamp": 1610562929
    },
    {
        "content": "<p>do I want instance.resolve()?  or just instance?</p>",
        "id": 222625459,
        "sender_full_name": "Jean Duteau",
        "timestamp": 1610562942
    },
    {
        "content": "<p>ah, instance.resolve() is needed.</p>",
        "id": 222626349,
        "sender_full_name": "Jean Duteau",
        "timestamp": 1610563356
    },
    {
        "content": "<p>Yup, if you were say, checking a Bundle.entry.resource you wouldn't use resolve because the resource is inline, but because it's a reference you need to add the resolve in order to do checks like profile etc. on that referenced resource.</p>",
        "id": 222626686,
        "sender_full_name": "ryan moehrke",
        "timestamp": 1610563506
    },
    {
        "content": "<p>right.  thanks!</p>",
        "id": 222626740,
        "sender_full_name": "Jean Duteau",
        "timestamp": 1610563530
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"192166\">@Jean Duteau</span>, SUSHI is looking explicitly for the slice name. However, we've realized that this is probably a bit too limiting, so we have relaxed that constraint in <a href=\"#narrow/stream/215610-shorthand/topic/SUSHI.201.2E1.2E0\">SUSHI 1.1.0</a> which was just released. In that version of SUSHI, you won't see that error about a missing slice.</p>",
        "id": 222709369,
        "sender_full_name": "Nick Freiter",
        "timestamp": 1610626759
    }
]