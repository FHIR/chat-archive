[
    {
        "content": "<p>I am working on an IG, and have defined a logical model (StructureDefinition instance). I have also defined a Questionnaire instance. I'd like  items in the Questionnaire to use the logical model, but can't figure out how to specify the canonical fragment. For example, my logical model has</p>\n<div class=\"codehilite\"><pre><span></span><code>Instance: DataDictionary\nInstanceOf: StructureDefinition\nDescription: &quot;Data Dictionary Logical Model&quot;\nTitle: &quot;Data Dictionary&quot;\nUsage: #definition\n\n* insert PublisherContext\n* name = &quot;SurveillanceDataDictionary&quot;\n* id = &quot;SurveillanceDataDictionary&quot;\n* url = &quot;http://example.org/fhir/cr/StructureDefinition/SurveillanceDataDictionary&quot;\n...\n* differential.element[1].id = &quot;SurveillanceDataDictionary.report.date&quot;\n* differential.element[1].path = &quot;SurveillanceDataDictionary.report.date&quot;\n* differential.element[1].short = &quot;Date of reporting&quot;\n* differential.element[1].definition = &quot;Date of reporting&quot;\n* differential.element[1].type.code = #date\n* differential.element[1].min = 0\n* differential.element[1].max = &quot;1&quot;\n</code></pre></div>\n\n\n<p>If my Questionnaire contains:</p>\n<div class=\"codehilite\"><pre><span></span><code>* item[0].linkId    = &quot;report_date&quot;\n* item[0].text    = &quot;Date of reporting to health authority:&quot;\n* item[0].type    = #date\n* item[0].definition    =  ?????\n</code></pre></div>\n\n\n<p>What should I put in where the question marks are? I can hard code  \"<a href=\"http://example.org/fhir/cr/StructureDefinition/SurveillanceDataDictionary#SurveillanceDataDictionary.report.date\">http://example.org/fhir/cr/StructureDefinition/SurveillanceDataDictionary#SurveillanceDataDictionary.report.date</a>\" and that seems to work. I'd rather use Canonical(), but can't figure out how to structure it.</p>",
        "id": 207228911,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1597734081
    },
    {
        "content": "<p>As of right now, you're best option is to hard code this. SUSHI only supports using the <code>Canonical</code> keyword when the element on the left hand side of the <code>=</code> is of type canonical. I think we should consider if that should be expanded so that <code>Canonical</code> can be used on uri elements like you would want in this case. But in this case I'm still not sure <code>Canonical</code> would work for you even if we could use it on uri elements, because we would need some sort of syntax for selecting a specific ElementDefinition. The <code>Canonical</code> keyword would only be able to get the \"<a href=\"http://example.org/fhir/cr/StructureDefinition/SurveillanceDataDictionary\">http://example.org/fhir/cr/StructureDefinition/SurveillanceDataDictionary</a>\" part, but there isn't a way to express in FSH that you want to append the \"#SurveillanceDataDictionary.report.date\" part.</p>",
        "id": 207254295,
        "sender_full_name": "Nick Freiter",
        "timestamp": 1597754795
    },
    {
        "content": "<p>I've made an issue to track this: <a href=\"https://github.com/FHIR/sushi/issues/572\">https://github.com/FHIR/sushi/issues/572</a></p>",
        "id": 207254984,
        "sender_full_name": "Nick Freiter",
        "timestamp": 1597755203
    },
    {
        "content": "<p>Good to know I wasn't missing something. Thank you.</p>\n<p>By the way, in the absence of auto-indexing and shorthand for nested elements, doing logical models and questionnaires is a pain in fsh. I'm not sure the logical model was any shorter in fsh than hand writing the JSON.</p>",
        "id": 207271874,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1597763542
    },
    {
        "content": "<p>Thanks for the feedback.  We have some ideas about how to make some of these things more succinct in a future version of FSH (via \"soft indexing\" and \"ruleset macros\"), so stay tuned!  We also hope to update the syntax to support logical models using many of the same constructs as available in profiling -- so that should help in that regard.  That said, we're allowing community feedback to help drive the priorities, so I can't promise when that will happen.</p>",
        "id": 207572356,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1597956296
    },
    {
        "content": "<p>As I renumber my 70+ element logical model for the umpteenth time, please consider this as community feedback. :-)</p>",
        "id": 207579356,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1597960828
    },
    {
        "content": "<p>BTW - are you aware of the <a href=\"https://fhirblog.com/2018/04/29/creating-models-with-the-logical-modeler/\">clinFHIR logical modeller</a>? It can create models (StructureDefinitions) through a graphical interface. Reach out privately if you want to discuss further...</p>",
        "id": 207581999,
        "sender_full_name": "David Hay",
        "timestamp": 1597962525
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191380\">Elliot Silver</span> <a href=\"#narrow/stream/215610-shorthand/topic/Reference.20to.20canonical.20fragments/near/207579356\">said</a>:</p>\n<blockquote>\n<p>As I renumber my 70+ element logical model for the umpteenth time, please consider this as community feedback. :-)</p>\n</blockquote>\n<p>Ugh.  I feel your pain and I'm sorry.  We wanted to solve the array issue on time for 1.0.0, but we couldn't get community agreement on the approach, so we had to push it back.</p>",
        "id": 207582189,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1597962665
    },
    {
        "content": "<p>Hi David, yes I am aware, and I started with it. However, I was aiming for a FSH-only IG, and didn't appreciate the difference in effort. I think I found some limitations too, but don't recall what those are right now.</p>",
        "id": 207582258,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1597962726
    },
    {
        "content": "<p>No worries ...</p>\n<p>If you do recall the limitations then it would be good to know them. I am aware that the SD does need tidying before IG publisher will accept them (I have a script for that). Actually, as I write this, I wonder if an 'export to FSH' mightn't be a good idea - or just incorporate the 'tidy script' into the app...  - maybe something for connectathon!</p>",
        "id": 207583918,
        "sender_full_name": "David Hay",
        "timestamp": 1597964080
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191380\">@Elliot Silver</span> we are going to take care of you (in a good way) <span aria-label=\"grinning face with smiling eyes\" class=\"emoji emoji-1f601\" role=\"img\" title=\"grinning face with smiling eyes\">:grinning_face_with_smiling_eyes:</span></p>",
        "id": 208152411,
        "sender_full_name": "Mark Kramer",
        "timestamp": 1598477901
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191447\">@Mark Kramer</span> thank you.</p>",
        "id": 208159873,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1598482684
    }
]