[
    {
        "content": "<p>Since while ago I've been having the following definition for my slices on Observation.hasMember</p>\n<ul>\n<li>hasMember ^slicing.discriminator.type = #profile</li>\n<li>hasMember ^slicing.discriminator.path = \"$this.resolve()\"</li>\n<li>hasMember ^slicing.rules = #open</li>\n<li>hasMember ^slicing.ordered = false</li>\n<li>\n<p>hasMember contains<br>\nprofileA 0..1 and<br>\nprofileB 0..1 and<br>\nprofileC 0..* </p>\n</li>\n<li>\n<p>hasMember[profileA] only Reference(ProfileAObservation)</p>\n</li>\n<li>hasMember[profileB] only Reference(ProfileBObservation)</li>\n<li>\n<p>hasMember[profileC] only Reference(ProfileCObservation)<br>\nIt hasn't given any errors till I updated Ig publisher to 1.1.114, the instances I create say Profile ParentObservation, Element matches more than one slice - ProfileAExample, ProfileBexample<br>\nI defined inside the Instance this:<br>\n...</p>\n</li>\n<li>\n<p>hasMember[0] = Reference(ProfileAExample) </p>\n</li>\n<li>hasMember[+] = Reference(ProfileBexample) </li>\n<li>hasMember[+] = Reference(ProfileCexample)</li>\n</ul>\n<p>What shall be the right syntaxis to avoid such error on ig publisher, from the sushi side I don't get any</p>",
        "id": 277857700,
        "sender_full_name": "Diana_Ovelgoenne",
        "timestamp": 1649155427
    },
    {
        "content": "<p>I think that in order to avoid this error, each of your Observation profiles and instances need to be defined such that each instance conforms to exactly one of your Observation profiles. If there aren't a lot of rules on those profiles, it may be the case that your instances conform to more than one profile, which violates the slicing.</p>",
        "id": 277883398,
        "sender_full_name": "Mint Thompson",
        "timestamp": 1649167380
    },
    {
        "content": "<p>Hi Thompson, I'm following up on the problem Diana mentioned.<br>\nThe resource referenced in hasMember adheres only to one single profile.<br>\nI build this repository with minimal resources to reproduce the error here:<br>\n<a href=\"https://github.com/mkaehlershs/FhirSlicingOnProfiles\">https://github.com/mkaehlershs/FhirSlicingOnProfiles</a><br>\n(Used:  IG Publisher Version: v1.1.114)</p>\n<p>A quick summery here:<br>\nThere is one Profile, lets call it SDParentObservation profile that defines 3 slices on hasMember field.<br>\nEach of this slices is bound to a different profile( SDMember[one|two|three]Observation. Each profile uses a different fixed code.)<br>\nFull fsh code attached. <a href=\"/user_uploads/10155/K9CncRgVV9F6ClOC_8swf06i/Sample.fsh\">Sample.fsh</a></p>\n<p>The ParentObservationExample (instance for SDParentObservation profile) that contains only one member for sliceMemberOne causes following errors in qa report:</p>\n<table>\n<thead>\n<tr>\n<th>Path</th>\n<th align=\"center\">Severity</th>\n<th align=\"right\">Message</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Observation.hasMember[0] (l36/c6)</td>\n<td align=\"center\">error</td>\n<td align=\"right\">Profil <a href=\"http://example.com/fhir/example/StructureDefinition/sd-parent-observation\">http://example.com/fhir/example/StructureDefinition/sd-parent-observation</a>, Element matches more than one slice - sliceMemberOne, sliceMemberTwo</td>\n</tr>\n<tr>\n<td>Observation.hasMember[0] (l36/c6)</td>\n<td align=\"center\">error</td>\n<td align=\"right\">Profil <a href=\"http://example.com/fhir/example/StructureDefinition/sd-parent-observation\">http://example.com/fhir/example/StructureDefinition/sd-parent-observation</a>, Element matches more than one slice - sliceMemberOne, sliceMemberThree</td>\n</tr>\n</tbody>\n</table>\n<p>But the referenced resource for sliceMemberOne uses a code that is different to the code defined in the profiles for sliceMemberTwo and sliceMemberThree.</p>\n<p>Any Idea how to fix this?</p>",
        "id": 278667768,
        "sender_full_name": "Moritz Kähler",
        "timestamp": 1649755466
    },
    {
        "content": "<p>OK I found the problem. It is caused, because the SDMemberOne/Two/Three Observation profiles allow to not provide the common code slice.<br>\nWhen I changed the cardinality for commonCode from 0..1 to 1..* the error goes away.</p>",
        "id": 278670740,
        "sender_full_name": "Moritz Kähler",
        "timestamp": 1649757294
    }
]