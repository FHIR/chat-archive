[
    {
        "content": "<p>I do not get a Sushi error on  this</p>\n<p>Profile: DrugProductIngredient      <br>\nParent: Ingredient      <br>\nId: pqcmc-ingredient        <br>\nTitle: \"Drug Product Ingredient\"        <br>\nDescription: \"The amount detais about the drug product ingredients in the batch. Use for Batch Formula.\"        </p>\n<ul>\n<li>^url = \"<a href=\"https://hl7.org/fhir/pq-cmc/StructureDefinition/prf-pqcmc-ingredient\">https://hl7.org/fhir/pq-cmc/StructureDefinition/prf-pqcmc-ingredient</a>\"     </li>\n<li>.extension contains pq-additional-info-extension named additional-info 0..1 MS        </li>\n<li>.extension[additional-info] ^short = \"Drug Product Ingredient Additional Information\" </li>\n<li>substance.code.reference 1..1 MS      </li>\n<li>substance.code.reference ^short = \"Ingredient Substance\"  </li>\n<li>substance.code.reference only Reference(pqcmc-routine-drug-substance)     </li>\n<li>substance.strength.extension contains pq-quantity-percent-extension named quantity-percent 1..1 MS        </li>\n<li>substance.strength.extension[quantity-percent] ^short = \"Quantity Percent\"    </li>\n<li>substance.strength.extension contains pq-overage-extension named overage 0..1 MS      </li>\n<li>substance.strength.extension[overage] ^short = \"Overage\"  </li>\n<li>substance.strength.concentration[x] 1..1 MS</li>\n<li>substance.strength.concentration[x] only Quantity     </li>\n<li>substance.strength.concentrationQuantity ^short = \"Component Quanty Per Batch\"    </li>\n<li>substance.strength.concentrationText 1..1 MS      </li>\n<li>substance.strength.concentrationText ^short = \"Strength Textual\"  </li>\n<li>substance.strength.concentrationText ^definition = \"\"\"A written description of the strength of the ingredient.[Source: SME Defined] <br>\n Note:  This is typically applicable to biologics <br>\n Example: International Units for Enzymes <br>\n \"\"\"</li>\n</ul>\n<p>I get this from the build tool:</p>\n<p>Caused by: org.hl7.fhir.exceptions.FHIRException: Invalid slicing: there is more than one type slice at Ingredient.substance.strength.concentrationQuantity, but one of them (concentrationQuantity) has min = 1, so the other slices cannot exist</p>\n<p>However, that is exactly what I want.  I want only Quantity.  Don't want them to use ratio, explicitly, or codeable concept.   I have tried explicitly setting the other to 0..0.   What is the syntax for this?</p>",
        "id": 276429212,
        "sender_full_name": "Catherine Hosage Norman",
        "timestamp": 1648092706
    },
    {
        "content": "<p>The problem is the name of the second attribute 'concentrationText'.  The publisher is confusing that as a slice on 'concentration[x]'.  <span class=\"user-mention\" data-user-id=\"191651\">@Rik Smithies</span> I think this has been raised as an issue before and it's the same with presentation[x] and presentationText.</p>",
        "id": 276434733,
        "sender_full_name": "Jean Duteau",
        "timestamp": 1648100650
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"192166\">@Jean Duteau</span> I assume this is a bug in the publisher process rather than a problem with the model? I can see that the two attributes e.g. presentationText and presentation[x] could be confused, but 'text' is not a datatype, so I'm not sure why this is happening.</p>",
        "id": 276440246,
        "sender_full_name": "Rik Smithies",
        "timestamp": 1648107248
    },
    {
        "content": "<p>You're not allowed to have a presentation[x] element and any other element that starts with 'presentation'</p>",
        "id": 276506164,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1648140874
    },
    {
        "content": "<p>Whether 'text' is a data type or not doesn't matter.  (Kindling should actually be treating this as an error in the resource design - I've raised <a href=\"https://github.com/HL7/kindling/issues/68\">https://github.com/HL7/kindling/issues/68</a>)</p>",
        "id": 276506812,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1648141082
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> We just made a FHIR tracker today for EvidenceVariable (<a href=\"https://jira.hl7.org/browse/FHIR-36635\">https://jira.hl7.org/browse/FHIR-36635</a>) to simplify implementation by having definition[x], definitionTypeAndValue, and definitionCombination to help clarify there is 1 and only 1 approach to definition, though two of the options are not datatypes.  Can/should we modify this to definition[x], defByTypeAndValue, and defByCombination?  Or is this break another rule by using def instead of definition in the element name?</p>",
        "id": 276517360,
        "sender_full_name": "Brian Alper",
        "timestamp": 1648145081
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> Should we consider a TypeAndValue datatype and Combination Datatype? Then it can all fit in definition[x].</p>",
        "id": 276518561,
        "sender_full_name": "Brian Alper",
        "timestamp": 1648145576
    },
    {
        "content": "<p>Definitely don't want a type &amp; value data type.  (We don't generally like name-value pairs because they're just extension by another mechanism.)  There's no issue with using 'def' if that's the best solution you can come up with.</p>",
        "id": 276528153,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1648150161
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"192166\">@Jean Duteau</span> if this is breaking profiles we could rename these from concentrationText and presentationText to textConcentration and textPresentation</p>",
        "id": 277899943,
        "sender_full_name": "Rik Smithies",
        "timestamp": 1649173782
    },
    {
        "content": "<p>yeah, it will be a problem in profiles, but more importantly, I think it's a rule in FHIR (as Lloyd noted above) that you can't have a choice attribute and another attribute named the same.</p>",
        "id": 277902490,
        "sender_full_name": "Jean Duteau",
        "timestamp": 1649174660
    }
]