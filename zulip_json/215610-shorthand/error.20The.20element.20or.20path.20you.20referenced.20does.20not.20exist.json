[
    {
        "content": "<p>With the example <a href=\"https://fshschool.org/FSHOnline/#/share/3qdD2HO\">here</a>, I get the following errors:</p>\n<div class=\"codehilite\"><pre><span></span><code>Sushi: error The element or path you referenced does not exist: contact.name.family (00:08.0069)\nSushi: File: C:\\Users\\micha\\Documents\\GitHub\\ch-ems\\input\\fsh\\instances\\patient\\1-PeterMuster.fsh (00:08.0070)\nSushi: Line: 52                                                                  (00:08.0071)\nSushi: error The element or path you referenced does not exist: contact.name.given (00:08.0072)\nSushi: File: C:\\Users\\micha\\Documents\\GitHub\\ch-ems\\input\\fsh\\instances\\patient\\1-PeterMuster.fsh (00:08.0072)\nSushi: Line: 53\n</code></pre></div>\n<p>What am I doing wrong?</p>",
        "id": 265686367,
        "sender_full_name": "Michaela Ziegler",
        "timestamp": 1640094416
    },
    {
        "content": "<p>Hi <span class=\"user-mention\" data-user-id=\"233842\">@Michaela Ziegler</span>.  When I run your example on FSH Online, it runs without any errors.  I also copied it to a local project and ran it using SUSHI and it did not produce any errors.  So, I can't reproduce this issue.  A couple of things to check:</p>\n<ol>\n<li>What version of SUSHI are you using?  The latest is 2.2.3.</li>\n<li>What version of FHIR does your project specify?  I tested using FHIR 4.0.1.</li>\n</ol>",
        "id": 265690190,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1640096660
    },
    {
        "content": "<p>Hi <span class=\"user-mention\" data-user-id=\"191469\">@Chris Moesel</span> </p>\n<ol>\n<li>Sushi: info  Running SUSHI v2.2.4 (implements FHIR Shorthand specification v1.2.0) (00:01.0692)</li>\n<li>FHIR version 4.0.1</li>\n</ol>\n<p>You can find the fsh-file in this <a href=\"https://github.com/hl7ch/ch-ems/blob/master/input/fsh/instances/patient/1-PeterMuster.fsh\">repo</a>, I commented the lines for the <a href=\"http://build.fhir.org/ig/hl7ch/ch-ems/branches/master/index.html\">ci-build</a> out.</p>",
        "id": 265712556,
        "sender_full_name": "Michaela Ziegler",
        "timestamp": 1640107887
    },
    {
        "content": "<p>Thanks, <span class=\"user-mention\" data-user-id=\"233842\">@Michaela Ziegler</span>.  I was able to reproduce this locally.  I see that this is an instance of CHEmsPatient, whose parent is CHCorePatient.  In CHCorePatient I also see that <code>contact</code> is sliced.  I experimented a bit and found that if I used one of the slices, it worked correctly.  E.g.:</p>\n<div class=\"codehilite\"><pre><span></span><code>* contact[nameOfMother].name.family = &quot;Muster&quot;\n* contact[nameOfMother].name.given = &quot;Erika&quot;\n</code></pre></div>\n<p>So it seems it only doesn't work if you're not specifying a particular slice.  You should be able to do that though -- so it <em>is</em> a bug.  But... we'll need to look into it further to see what is going on and fix it.</p>\n<p>For now, if it is valid to put the contact into the <code>nameOfMother</code>, <code>nameOfFather</code>, or <code>contact</code> slice, then that should get you by this error.</p>",
        "id": 265729632,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1640117805
    },
    {
        "content": "<p>Thanks a lot <span class=\"user-mention\" data-user-id=\"191469\">@Chris Moesel</span> . Yes exactly, actually it should be an independent slice.</p>",
        "id": 265730231,
        "sender_full_name": "Michaela Ziegler",
        "timestamp": 1640118189
    },
    {
        "content": "<p>OK.  It looks like the problem might be isolated to cases where a path is sliced using a slice name that is the same as the path.  In this case, the problem is that <code>contact</code> is sliced with a slice also having the name <code>contact</code>.  For some reason, SUSHI doesn't handle this right.  I've made a simple example of it here: <a href=\"https://fshschool.org/FSHOnline/#/share/3egT4Lo\">https://fshschool.org/FSHOnline/#/share/3egT4Lo</a></p>",
        "id": 265731709,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1640119125
    },
    {
        "content": "<p>I've also filed a bug for this: <a href=\"https://github.com/FHIR/sushi/issues/993\">SUSHI#993</a>.</p>",
        "id": 265731768,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1640119163
    },
    {
        "content": "<p>Hi <span class=\"user-mention\" data-user-id=\"233842\">@Michaela Ziegler</span>.  Our friend, <span class=\"user-mention\" data-user-id=\"242620\">@Mint Thompson</span> dug into this, found the bug, and fixed it!  If you upgrade to the latest SUSHI (2.2.5), your FSH should work!</p>",
        "id": 265852505,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1640206928
    }
]