[
    {
        "content": "<p>So, I just discovered an issue with soft indexing. QA.html is reporting an error at \"Questionnaire/WhoCrQuestionnaireCovid19Surveillance: Questionnaire.item[7].item[9].code[0]\". How the heck am I supposed to figure out where that is? (I'd better not make any more wishes.)</p>",
        "id": 224426563,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1611890361
    },
    {
        "content": "<p>Also, the fsh language reference example of using parameterized rules and soft indexing for a questionnaire, works only if your questionnaire is a flat list (and if you aren't specifying additional elements like valuesets, etc., but I suppose that is understandable).</p>",
        "id": 224426782,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1611890629
    },
    {
        "content": "<p>Next up:</p>\n<div class=\"codehilite\"><pre><span></span><code>* contained[0] = WhoCrValueSetQuestionnaireCountry\n* contained[1] = WhoCrValueSetQuestionnaireReasonForTesting\n* meta.profile[0] = Canonical(http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire)\n* meta.profile[1] = Canonical(http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-extr-defn)\n</code></pre></div>\n<p>The above seems to work fine, but changing all the indexes to <code>+</code> causes errors in sushi:</p>\n<div class=\"codehilite\"><pre><span></span><code>Sushi: error The element or path you referenced does not exist: contained[+]     (00:16.0063)\n</code></pre></div>",
        "id": 224428040,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1611892288
    },
    {
        "content": "<p>That's a good point about the references... that does make it more difficult to track back errors...  I guess you need to do some counting?  Perhaps in the future we can output a set of FSH w/ all the indexes resolved (or some kind of answer key) -- but I don't know how easy it would be and it's probably not our top priority at the moment.</p>\n<p>As for your example, replacing those with <code>[+]</code> should be fine.  I've whipped up a quick example myself and it seems to work: <a href=\"https://fshschool.org/FSHOnline/#/share/2KZEKMl\">https://fshschool.org/FSHOnline/#/share/2KZEKMl</a></p>\n<p>Note that I did have to change your <code>Canonical(...)</code> references because I didn't have SDC as a dependency so they did not resolve -- but also note that if you already have the canonical URL, you can just put it in as a string (like in my example).  <code>Canonical(...)</code> is really just a convenience function for converting a name/id to a canonical -- so if you already have the canonical, it's not necessary.</p>",
        "id": 224473248,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1611928669
    },
    {
        "content": "<p>HAving a preprocessor-only command for sushi which resolves macros, aliases and indexes might be useful</p>",
        "id": 224474072,
        "sender_full_name": "David Pyke",
        "timestamp": 1611929021
    },
    {
        "content": "<p>Yeah, that's an interesting idea, <span class=\"user-mention\" data-user-id=\"192587\">@David Pyke</span>.  I don't think we do all of those strictly as pre-processors right now -- at least not with a clear division between the pre-processing and the rest of the stuff.  But it might be possible...</p>",
        "id": 224474994,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1611929434
    },
    {
        "content": "<p>I think I was falling into <span class=\"user-mention\" data-user-id=\"192587\">@David Pyke</span> 's problem last night -- I was using stale sushi. I'll give it a try again this morning and see if the contained/meta issues clear up.<br>\nI'm not really complaining about the counting thing; it <em>is</em> doing what we asked for. I may try to see what a hybrid approach looks like (use explicit numbering instead of +, but continue to use =).</p>",
        "id": 224498328,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1611938166
    },
    {
        "content": "<p>+1 for output option after macro expand.</p>",
        "id": 224501777,
        "sender_full_name": "Mark Kramer",
        "timestamp": 1611939495
    },
    {
        "content": "<p>Would that option be  a command line parameter?<br>\nAnd how would it work when called by the publisher?</p>",
        "id": 224503606,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1611940260
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191380\">Elliot Silver</span> <a href=\"#narrow/stream/215610-shorthand/topic/Soft.20Indexing.20downside/near/224498328\">said</a>:</p>\n<blockquote>\n<p>I think I was falling into <span class=\"user-mention silent\" data-user-id=\"192587\">David Pyke</span> 's problem last night -- I was using stale sushi. I'll give it a try again this morning and see if the contained/meta issues clear up.</p>\n</blockquote>\n<p>Yup -- and it got weirder too -- commandline sushi worked ok, but publisher-invoked was failing. Turns out fsh.ini was pinning the sushi version to 1.0. I fixed that, and all seems good.</p>",
        "id": 224510536,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1611943203
    },
    {
        "content": "<p>Yeah, that's the danger of specifying a version of SUSHI in fsh.ini.  I think maybe I'll look into a feature to log out a hard-to-ignore message if SUSHI detects that there are updates available.  Then at least when you look through the logs, you can notice that SUSHI is old.</p>",
        "id": 224527555,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1611951562
    }
]