[
    {
        "content": "<p>If I have an .html page that I want to pass through to the built IG unmodified (e.g., <a href=\"https://github.com/HL7/smart-app-launch/blob/master/spec/worked_example_id_token/index.html\">https://github.com/HL7/smart-app-launch/blob/master/spec/worked_example_id_token/index.html</a>), is there a way to mange this in sushi's ig-data directory?</p>",
        "id": 207350238,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1597790117
    },
    {
        "content": "<p>Maybe by putting it in \"images\" ?</p>",
        "id": 207350352,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1597790174
    },
    {
        "content": "<p>I guess that does the trick (but definitely feels... unkosher).</p>",
        "id": 207350437,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1597790236
    },
    {
        "content": "<p>If you put it in ig-data/input/pagecontent, doesn't that work?</p>",
        "id": 207350818,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1597790456
    },
    {
        "content": "<p>It doesn't.</p>",
        "id": 207350850,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1597790495
    },
    {
        "content": "<p>I think it should, then :) I am not aware of any other way, sorry.</p>",
        "id": 207350867,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1597790517
    },
    {
        "content": "<p>There is a thread where I suggested the possibility to bring in existing IG content (e.g. in <code>ig-data</code>) and that content will be merged with whatever sushi produces.<br>\nIf that suggestion is accepted, then I think this would work correctly.</p>",
        "id": 207351155,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1597790723
    },
    {
        "content": "<p>you could just put it in the input directory (not in the fsh/ig-data/input directory)</p>",
        "id": 207351284,
        "sender_full_name": "Jean Duteau",
        "timestamp": 1597790801
    },
    {
        "content": "<p>Didn't think of that, Thanks <span class=\"user-mention\" data-user-id=\"192166\">@Jean Duteau</span></p>",
        "id": 207351525,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1597790952
    },
    {
        "content": "<p>Hmm, I don't otherwise <em>have</em> an input directory in version control, and I like to think of it as emphemeral, since sushi is generally writing/overwriting stuff there.</p>\n<p>Sushi's .gitignore by default leave <code>input</code> out of version control.</p>",
        "id": 207351766,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1597791121
    },
    {
        "content": "<p>That said, I've been using sushi for all of 2h, so I may not have grokked best practices yet ;-)</p>",
        "id": 207351817,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1597791135
    },
    {
        "content": "<p>On that subject, am I supposed to check files like like _genonce into version control?</p>",
        "id": 207351835,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1597791153
    },
    {
        "content": "<p>yeah, that is the problem with my suggestion.  if you're trying for an all-sushi IG, it breaks that.  I check those in because I'm creating the repository for others to clone and run, so I check in my shell scripts.  If you look at <a href=\"http://github.com/HL7/davinci-pas\">github.com/HL7/davinci-pas</a>, you'll see what I check in.  NOTE: I do check in an input directory, because I need the ignoreWarnings.txt file.</p>",
        "id": 207352041,
        "sender_full_name": "Jean Duteau",
        "timestamp": 1597791250
    },
    {
        "content": "<p>Thanks! (For the moment, I'm trying to do the least-friction thing that'll get me started porting the old SMART IG.)</p>",
        "id": 207352130,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1597791354
    },
    {
        "content": "<p>i thought that SUSHI used to copy over directories in ig-data/input that it didn't know about without touching it, but I just tested and it doesn't do that.  so putting it in ig-data/input/images is probably the only way right now</p>",
        "id": 207352441,
        "sender_full_name": "Jean Duteau",
        "timestamp": 1597791519
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191832\">Jose Costa Teixeira</span> <a href=\"#narrow/stream/215610-shorthand/topic/Passthrough.20pages/near/207350818\">said</a>:</p>\n<blockquote>\n<p>If you put it in ig-data/input/pagecontent, doesn't that work?</p>\n</blockquote>\n<p>This should work, and in my quick testing it does seem to work. SUSHI does give a warning:</p>\n<div class=\"codehilite\"><pre><span></span><code>Files not in the supported file types (.md and .xml) were detected. These files will be copied over without any processing.\n</code></pre></div>\n\n\n<p>but that is intentional. So if this isn't working for you <span class=\"user-mention\" data-user-id=\"191315\">@Josh Mandel</span> that would be a bug, so if you are able to share any more info about how you are getting an error we can try to reproduce and see what's going on.</p>",
        "id": 207393272,
        "sender_full_name": "Nick Freiter",
        "timestamp": 1597834380
    },
    {
        "content": "<p>Thanks. I will try to capture some details for debugging.</p>",
        "id": 207404621,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1597842417
    },
    {
        "content": "<p>So here's a place where it's failing:</p>\n<ul>\n<li><a href=\"https://github.com/HL7/smart-app-launch/blob/move-to-fsh/fsh/ig-data/input/pages/worked_example_test.html\">https://github.com/HL7/smart-app-launch/blob/move-to-fsh/fsh/ig-data/input/pages/worked_example_test.html</a> does not appear in the output</li>\n<li><a href=\"https://github.com/HL7/smart-app-launch/blob/move-to-fsh/fsh/ig-data/input/images/worked_example_id_token.html\">https://github.com/HL7/smart-app-launch/blob/move-to-fsh/fsh/ig-data/input/images/worked_example_id_token.html</a> does appear</li>\n</ul>",
        "id": 207556329,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1597947628
    },
    {
        "content": "<p>(See output at <a href=\"https://build.fhir.org/ig/HL7/smart-app-launch/branches/move-to-fsh/\">https://build.fhir.org/ig/HL7/smart-app-launch/branches/move-to-fsh/</a>)</p>",
        "id": 207556348,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1597947642
    },
    {
        "content": "<p>Hi <span class=\"user-mention\" data-user-id=\"191315\">@Josh Mandel</span> -- I cloned your repo, switched to your branch, and ran SUSHI.  I confirm that <span class=\"user-mention\" data-user-id=\"239822\">@Nick Freiter</span> stated above: It <em>did</em> copy over your HTML file.  See screenshot:<br>\n<a href=\"/user_uploads/10155/fEkaEftA6c927OscwjbLHUKF/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/fEkaEftA6c927OscwjbLHUKF/image.png\" title=\"image.png\"><img src=\"/user_uploads/10155/fEkaEftA6c927OscwjbLHUKF/image.png\"></a></div>",
        "id": 207558112,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1597948609
    },
    {
        "content": "<p>How fun. Huh, and yet it's not at  <a href=\"https://build.fhir.org/ig/HL7/smart-app-launch/branches/move-to-fsh/worked_example_test.html\">https://build.fhir.org/ig/HL7/smart-app-launch/branches/move-to-fsh/worked_example_test.html</a>. I'll investigate more :)</p>",
        "id": 207559117,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1597949149
    },
    {
        "content": "<p>I just ran it through the publisher and it seems the publisher is choking on it.  Here's the message I got:</p>",
        "id": 207559355,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1597949272
    },
    {
        "content": "<blockquote>\n<p>Error on line 6755 column 78<br>\n  SXXP0003: Error reported by XML parser: The reference to entity \"v\" must end with the ';' delimiter.<br>\nException generating page /Users/cmoesel/dev/tmp/smart-app-launch/temp/pages/_includes/worked_example_test.html: org.xml.sax.SAXParseException; lineNumber: 6755; columnNumber: 78; The reference to entity \"v\" must end with the ';' delimiter. (00:29.0966)</p>\n</blockquote>",
        "id": 207559373,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1597949281
    },
    {
        "content": "<p>OK --- so putting it in <code>images</code> causes it to be a <em>real</em> passthrough, whereas putting it in <code>pages</code> causes the publisher to try to parse it.</p>",
        "id": 207559612,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1597949396
    },
    {
        "content": "<p>That seems to be the case, although the <a href=\"https://build.fhir.org/ig/FHIR/ig-guidance/using-templates.html#root.input\">IG Template documentation</a> seems to suggest otherwise (emphasis mine):</p>\n<blockquote>\n<p>The processing of the content of the page folders will vary. Those .md and .xml files named to act as intro sections or notes sections will be injected into the base web pages for their respective resources. Other .md and .xml files will be processed and turned into HTML pages representing the narrative content for the IG. <strong>All other files will be copied to the output folder unchanged.</strong></p>\n</blockquote>",
        "id": 207560260,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1597949703
    },
    {
        "content": "<p>That said, further in the documentation, it calls out the specific folders and says:</p>\n<blockquote>\n<ul>\n<li>pages (for the markdown or XHTML page content)</li>\n<li>pagecontent (same purpose as pages - use whichever name you prefer)</li>\n</ul>\n</blockquote>\n<p>So maybe the parenthetical statements there are meant to indicate that <em>only</em> markdown and XHTML should be placed there?  <span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span>?</p>",
        "id": 207560479,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1597949815
    },
    {
        "content": "<p>it might be the template... Lloyd has added all sorts of extra smart stuff in there, and it hasn't been made robust by people hammering on it yet. </p>\n<p>but why do you want invalid XML?</p>",
        "id": 207574014,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1597957254
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191315\">@Josh Mandel</span>  I missed that you said .html. Do you want html instead of xhtml?</p>",
        "id": 207598081,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1597981477
    },
    {
        "content": "<p>I want HTML and indeed this particular HTML because it's generated from my Jupiter notebook, using a process I don't control, and it works in every browser I've tested :-)</p>",
        "id": 207626777,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1598011983
    },
    {
        "content": "<p>ok but that html is not going to have the template header and footer, right? It's just a local file that you can point to. right?</p>",
        "id": 207630877,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1598014838
    },
    {
        "content": "<p>Yes. I just want it to pass through the build process.</p>",
        "id": 207675467,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1598038584
    },
    {
        "content": "<p>Do you want the jupyter to to display like a jupyter file?  You could export it as a as a markdown file. </p>\n<p><a href=\"/user_uploads/10155/i2qtjhgaMoyAyme0pGgODCx7/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/i2qtjhgaMoyAyme0pGgODCx7/image.png\" title=\"image.png\"><img src=\"/user_uploads/10155/i2qtjhgaMoyAyme0pGgODCx7/image.png\"></a></div><p>..OH I just realized you probably downloaded as an html file... duh</p>",
        "id": 207700789,
        "sender_full_name": "Eric Haas",
        "timestamp": 1598059429
    },
    {
        "content": "<p>if you want it as a jupyter file then belongs in image folder and you can download from there</p>",
        "id": 207700836,
        "sender_full_name": "Eric Haas",
        "timestamp": 1598059486
    },
    {
        "content": "<p>Or just link to a Binder</p>",
        "id": 207700845,
        "sender_full_name": "Eric Haas",
        "timestamp": 1598059513
    },
    {
        "content": "<p>or a GIST which does a nice rendering of Jupyter files</p>",
        "id": 207700894,
        "sender_full_name": "Eric Haas",
        "timestamp": 1598059572
    },
    {
        "content": "<p>let me give it a shot...</p>",
        "id": 207700959,
        "sender_full_name": "Eric Haas",
        "timestamp": 1598059744
    },
    {
        "content": "<p>source folder for me is `fsh/ig-data/input/pagecontent/'</p>\n<p>Sushi yells if the content is html ..( md or xml only!!!) and passes it through</p>\n<p>the markdown is happy though! and both are passed through for the build...</p>\n<p>to <code>input/pagecontent/</code></p>\n<p>running the build I see the markdwon file as a page </p>\n<p><a href=\"/user_uploads/10155/NVfLmqcfspg2OhY4Gl2bxm9B/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/NVfLmqcfspg2OhY4Gl2bxm9B/image.png\" title=\"image.png\"><img src=\"/user_uploads/10155/NVfLmqcfspg2OhY4Gl2bxm9B/image.png\"></a></div><p>... but no page for the html :-(   ( I noted this earlier in this chat: </p>\n<p>here is what sushi created in the  ig resource</p>\n<div class=\"codehilite\"><pre><span></span><code>    <span class=\"nt\">page</span><span class=\"p\">:</span>\n      <span class=\"p p-Indicator\">-</span> <span class=\"nt\">nameUrl</span><span class=\"p\">:</span> <span class=\"l l-Scalar l-Scalar-Plain\">index.html</span>\n        <span class=\"nt\">title</span><span class=\"p\">:</span> <span class=\"l l-Scalar l-Scalar-Plain\">Home</span>\n        <span class=\"nt\">generation</span><span class=\"p\">:</span> <span class=\"l l-Scalar l-Scalar-Plain\">markdown</span>\n      <span class=\"p p-Indicator\">-</span> <span class=\"nt\">nameUrl</span><span class=\"p\">:</span> <span class=\"l l-Scalar l-Scalar-Plain\">downloads.html</span>\n        <span class=\"nt\">title</span><span class=\"p\">:</span> <span class=\"l l-Scalar l-Scalar-Plain\">Downloads</span>\n        <span class=\"nt\">generation</span><span class=\"p\">:</span> <span class=\"l l-Scalar l-Scalar-Plain\">markdown</span>\n      <span class=\"p p-Indicator\">-</span> <span class=\"nt\">nameUrl</span><span class=\"p\">:</span> <span class=\"l l-Scalar l-Scalar-Plain\">guidance.html</span>\n        <span class=\"nt\">title</span><span class=\"p\">:</span> <span class=\"l l-Scalar l-Scalar-Plain\">Guidance</span>\n        <span class=\"nt\">generation</span><span class=\"p\">:</span> <span class=\"l l-Scalar l-Scalar-Plain\">markdown</span>\n      <span class=\"p p-Indicator\">-</span> <span class=\"nt\">nameUrl</span><span class=\"p\">:</span> <span class=\"l l-Scalar l-Scalar-Plain\">utils-md.html</span>\n        <span class=\"nt\">title</span><span class=\"p\">:</span> <span class=\"l l-Scalar l-Scalar-Plain\">Utils Md</span>\n        <span class=\"nt\">generation</span><span class=\"p\">:</span> <span class=\"l l-Scalar l-Scalar-Plain\">markdown</span>\n</code></pre></div>\n\n\n<p>ignoring the html totally...  <em>EVEN IF</em> you manually edit it and add to the ImplementationGuide.definition.page.page</p>\n<div class=\"codehilite\"><pre><span></span><code>      <span class=\"p p-Indicator\">-</span> <span class=\"nt\">nameUrl</span><span class=\"p\">:</span> <span class=\"l l-Scalar l-Scalar-Plain\">utils.html</span>\n        <span class=\"nt\">title</span><span class=\"p\">:</span> <span class=\"l l-Scalar l-Scalar-Plain\">Utils</span>\n        <span class=\"nt\">generation</span><span class=\"p\">:</span> <span class=\"l l-Scalar l-Scalar-Plain\">html</span>\n</code></pre></div>\n\n\n<p>will error out  with</p>\n<div class=\"codehilite\"><pre><span></span><code>Publishing Content Failed: Template based HTML file utils.html is missing <span class=\"nb\">source</span> file utils.xml <span class=\"o\">(</span><span class=\"m\">01</span>:13.0089<span class=\"o\">)</span>\n</code></pre></div>\n\n\n<p>because of  this issue:  when xml page in the ig resource page.generation code define it be \"xml\" not \"html\" which is how ig-pub is <a href=\"http://build.fhir.org/valueset-guide-page-generation.html\">documented</a>.  </p>\n<p>so for the input/pagecontent/file.xml is in ig resource as ...</p>\n<div class=\"codehilite\"><pre><span></span><code>- nameUrl: file.html\n  title: File\n  generation: html\n</code></pre></div>\n\n\n<p>which is confusing to have the file suffix xml and generation codes  different...</p>\n<p>trying xml is no better...</p>\n<div class=\"codehilite\"><pre><span></span><code>      <span class=\"p p-Indicator\">-</span> <span class=\"nt\">nameUrl</span><span class=\"p\">:</span> <span class=\"l l-Scalar l-Scalar-Plain\">utils.html</span>\n        <span class=\"nt\">title</span><span class=\"p\">:</span> <span class=\"l l-Scalar l-Scalar-Plain\">Utils</span>\n        <span class=\"nt\">generation</span><span class=\"p\">:</span> <span class=\"l l-Scalar l-Scalar-Plain\">xml</span>\n</code></pre></div>\n\n\n<p>this  fails to generate output silently...</p>\n<p>see this <a href=\"#narrow/stream/179252-IG-creation/topic/page.2Egeneration.20code\">chat</a>....</p>",
        "id": 207703431,
        "sender_full_name": "Eric Haas",
        "timestamp": 1598063755
    },
    {
        "content": "<p>pagecontent is not passed through - it gets run through transforms and such.  Content that is intended to be copied directly to output with no modifications should go in images.</p>",
        "id": 207784372,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1598205796
    },
    {
        "content": "<blockquote>\n<p>pagecontent is not passed through - it gets run through transforms and such.</p>\n</blockquote>\n<p>yes but the issue is it cannot be just html - it has to be xthml(.xml) or md  which is why the Jekyll example silently failed to load.</p>",
        "id": 207869590,
        "sender_full_name": "Eric Haas",
        "timestamp": 1598289322
    }
]