[
    {
        "content": "<p>Hi <span class=\"user-mention\" data-user-id=\"191469\">@Chris Moesel</span> </p>\n<p>I am new to Sushi and just able to write my first Observation resource using Sushi. This is amazing !!. loving it <span aria-label=\"slight smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"slight smile\">:slight_smile:</span><br>\njust have few queries about resource profiling using sushi:</p>\n<ol>\n<li>How can I add copyright information in a resource?</li>\n<li>How can I declare a profile as abstract?</li>\n</ol>\n<p>Thanks,<br>\nShovan</p>",
        "id": 199245956,
        "sender_full_name": "Shovan Roy",
        "timestamp": 1590827986
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"193760\">Shovan Roy</span> <a href=\"#narrow/stream/215610-shorthand/topic/Query/near/199245956\">said</a>:</p>\n<blockquote>\n<ol>\n<li>How can I add copyright information in a resource?</li>\n<li>How can I declare a profile as abstract?</li>\n</ol>\n</blockquote>\n<ol>\n<li></li>\n</ol>\n<div class=\"codehilite\"><pre><span></span><code>* ^copyright = &quot;Mine&quot;\n</code></pre></div>\n\n\n<ol start=\"2\">\n<li></li>\n</ol>\n<div class=\"codehilite\"><pre><span></span><code>* ^abstract = true\n</code></pre></div>",
        "id": 199247351,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1590830443
    },
    {
        "content": "<p>(i'm curious about the abstract though - are you trying to make logical models?)</p>",
        "id": 199247736,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1590831104
    },
    {
        "content": "<p>Of course, in the spirit of the community the first should be </p>\n<div class=\"codehilite\"><pre><span></span><code>* ^copyright = &quot;Ours&quot;\n</code></pre></div>\n\n\n<p>:)</p>",
        "id": 199275558,
        "sender_full_name": "David Hay",
        "timestamp": 1590872061
    },
    {
        "content": "<p>thanks a lot <span class=\"user-mention\" data-user-id=\"191832\">@Jose Costa Teixeira</span> , <span class=\"user-mention\" data-user-id=\"191321\">@David Hay</span>  I was able to populate both the 'abstract' and 'copyright' in my resource as per your guideline.</p>\n<p>I was just wondering if there is any way by which I can add common elements like 'copyright', 'publisher' in  a single place and all resources can inherit them other than duplicating these in individual resource? can this go as an input in \"ImplementationGuide-fhir.fsh.json\" file?</p>",
        "id": 199325904,
        "sender_full_name": "Shovan Roy",
        "timestamp": 1590968116
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191832\">Jose Costa Teixeira</span> <a href=\"#narrow/stream/215610-shorthand/topic/Query/near/199247736\">said</a>:</p>\n<blockquote>\n<p>(i'm curious about the abstract though - are you trying to make logical models?)</p>\n</blockquote>\n<p><span class=\"user-mention\" data-user-id=\"191832\">@Jose Costa Teixeira</span>  In my IG, I'm creating a base profile for all resource types used and marking them as 'abstract'. Adding all common stuff as per our project requirement in the base profile. All profiles in the project are meant to extend that base profile of that resource type.  Implementing inheritance of profiles.</p>",
        "id": 199326161,
        "sender_full_name": "Shovan Roy",
        "timestamp": 1590968526
    },
    {
        "content": "<blockquote>\n<p>I was just wondering if there is any way by which I can add common elements like 'copyright', 'publisher' in a single place and all resources can inherit them other than duplicating these in individual resource? can this go as an input in \"ImplementationGuide-fhir.fsh.json\" file?</p>\n</blockquote>\n<p>This is possible with the use of RuleSets. RuleSets act as a group of rules that can be applied to resources. As an example:</p>\n<div class=\"codehilite\"><pre><span></span><code>RuleSet: USCoreMetadata\n* ^version = &quot;3.1.0&quot;\n* ^status = #active\n* ^experimental = false\n* ^publisher = &quot;HL7 US Realm Steering Committee&quot;\n* ^contact.telecom.system = #url\n* ^contact.telecom.value = &quot;http://www.healthit.gov&quot;\n* ^jurisdiction.coding = COUNTRY#US &quot;United States of America&quot;\n\nProfile: MyUSCorePatientProfile\nParent: Patient\nMixins: USCoreMetadata\n* deceased[x] only deceasedBoolean\n// More profile rules\n</code></pre></div>\n\n\n<p>The rules defined on the <code>USCoreMetadata</code> RuleSet will be applied to the <code>MyUSCorePatientProfile</code> profile, and if you had more profiles, you could apply the same metadata to all those profiles in a similar way. I took this example from the documentation on RuleSets found here <a href=\"http://build.fhir.org/ig/HL7/fhir-shorthand/branches/master/reference.html#defining-rule-sets\">http://build.fhir.org/ig/HL7/fhir-shorthand/branches/master/reference.html#defining-rule-sets</a>.</p>",
        "id": 199363176,
        "sender_full_name": "Nick Freiter",
        "timestamp": 1591014928
    },
    {
        "content": "<p>also, you can just define these in the IG and tell the IG publisher to fix the values in everything</p>",
        "id": 199363258,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1591014966
    },
    {
        "content": "<p>that's not a shorthand feature</p>",
        "id": 199363268,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1591014978
    },
    {
        "content": "<p>To use the approach Grahame is referring to, you need to be able to control specific values in the IG resource.  You can't do this with SUSHI 0.12.x, but it is possible with SUSHI 0.13.x-beta.2.  We're gathering one more round of feedback on the beta before we make it an official release.</p>\n<p>If you use the beta, then in the <code>config.yaml</code>, you'll want to set the relevant parameters (e.g., <code>copyright</code>) and then set the corresponding <code>apply-[x]</code> parameter, like so:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"c1\"># not showing all the other config.yaml properties;</span>\n<span class=\"c1\"># only showing those relevant to this conversation.</span>\n<span class=\"nt\">copyright</span><span class=\"p\">:</span> <span class=\"l l-Scalar l-Scalar-Plain\">Ours</span>\n<span class=\"nt\">parameters</span><span class=\"p\">:</span>\n  <span class=\"nt\">apply-copyright</span><span class=\"p\">:</span> <span class=\"l l-Scalar l-Scalar-Plain\">true</span>\n</code></pre></div>\n\n\n<p>See the <a href=\"https://confluence.hl7.org/display/FHIR/Implementation+Guide+Parameters\">parameter documentation</a> for all of the supported <code>apply-[x]</code> parameters.</p>\n<p><em>NOTE: If you have an existing SUSHI 0.12.x project, the first time you run 0.13.0-beta.2, it will generate a config.yaml for you -- then you can add the properties as shown above to it.</em></p>",
        "id": 199382886,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1591025309
    },
    {
        "content": "<p>awesome <span class=\"user-mention\" data-user-id=\"191469\">@Chris Moesel</span> let me explore sushi 013.0 beta</p>",
        "id": 199428506,
        "sender_full_name": "Shovan Roy",
        "timestamp": 1591048236
    },
    {
        "content": "<p>Hi <span class=\"user-mention\" data-user-id=\"191469\">@Chris Moesel</span> I have used the copyright in the config.yml and I can see that the generated ig has them populated. Though I don't see them populated in the other resources (under profile folder) generated from the corresponding fsh file. shall I use the RuleSet for that purpose?</p>\n<p>Also, this could be too much of ask <span aria-label=\"slight smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"slight smile\">:slight_smile:</span> I was wondering if there anyway by which I can generate fsh file out of existing profile json files?</p>",
        "id": 199689780,
        "sender_full_name": "Shovan Roy",
        "timestamp": 1591226781
    },
    {
        "content": "<p>Hi <span class=\"user-mention\" data-user-id=\"193760\">@Shovan Roy</span>, if you also use the <code>apply-copyright</code> parameter in config.yaml (as shown in my earlier post), then the copyright <em>should</em> be applied to all your definitions by the IG Publisher.  Note that the raw FSH-generated profiles won't have them, but when you run your IG through the IG Publisher, the final versions of those profiles <em>will</em> have the copyright.  It gets applied by the IG Publisher, not by SUSHI.  I haven't tested it, but my understanding is that this should work.</p>",
        "id": 199690182,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1591227143
    },
    {
        "content": "<blockquote>\n<p>I was wondering if there anyway by which I can generate fsh file out of existing profile json files?</p>\n</blockquote>\n<p>Someone created a proof-of-concept tool for this called <a href=\"https://github.com/lantanagroup/fshfood\">FSH Food</a> at the January Connectathon, but it hasn't been updated since February -- so it's buggy and not up to date w/ the latest FHIR Shorthand features.  We're not sure if FSH Food will progress any further so we're considering picking up the effort for a SD --&gt; FSH converter.  Stay tuned (although it will probably take a little while).</p>",
        "id": 199690451,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1591227398
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191469\">Chris Moesel</span> <a href=\"#narrow/stream/215610-shorthand/topic/Query/near/199690182\">said</a>:</p>\n<blockquote>\n<p>Hi <span class=\"user-mention silent\" data-user-id=\"193760\">Shovan Roy</span>, if you also use the <code>apply-copyright</code> parameter in config.yaml (as shown in my earlier post), then the copyright <em>should</em> be applied to all your definitions by the IG Publisher.  Note that the raw FSH-generated profiles won't have them, but when you run your IG through the IG Publisher, the final versions of those profiles <em>will</em> have the copyright.  It gets applied by the IG Publisher, not by SUSHI.  I haven't tested it, but my understanding is that this should work.</p>\n</blockquote>\n<p><span class=\"user-mention\" data-user-id=\"191469\">@Chris Moesel</span>  yes, I have used that configuration. Here is a snippet from the config.yaml <br>\ndependencies:<br>\n  hl7.fhir.au.base: current<br>\nparameters:<br>\n  show-inherited-invariants: false<br>\n  apply-copyright: true<br>\n  apply-jurisdiction: true<br>\n  apply-publisher: true<br>\n  apply-version: true  <br>\n  releaselabel: qa-preview  </p>\n<p>and I can see this coming up in the IG as :{<br>\n        \"code\": \"apply-copyright\",<br>\n        \"value\": \"true\"<br>\n      },<br>\nBut when I check the individual resource, I don't see them. probably I will do some more review of what's happening or anything missing in my setup and take some advice from Grahame on this.</p>",
        "id": 199690819,
        "sender_full_name": "Shovan Roy",
        "timestamp": 1591227730
    },
    {
        "content": "<p>Are you looking at the profiles <em>after</em> running the IG Publisher on them?</p>",
        "id": 199691013,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1591227914
    },
    {
        "content": "<p>yes</p>",
        "id": 199691131,
        "sender_full_name": "Shovan Roy",
        "timestamp": 1591228019
    },
    {
        "content": "<p>let me do a clean build after removing everything and see what happens. I will keep you posted with the outcome .. thanks very much <span class=\"user-mention\" data-user-id=\"191469\">@Chris Moesel</span></p>",
        "id": 199691177,
        "sender_full_name": "Shovan Roy",
        "timestamp": 1591228078
    },
    {
        "content": "<p>Hi <span class=\"user-mention\" data-user-id=\"191469\">@Chris Moesel</span> </p>\n<p>I am also fairly new to FSH, but I have a lot of experience with FHIR and I attended the FSH track at the connectathon.  I am demoing the capabilities of FSH to other members of my company so that we can start using it across all of the IGs we create. </p>\n<p>My question is similar to <a href=\"#narrow/stream/215610-shorthand/topic/Query/near/199363176\">https://chat.fhir.org/#narrow/stream/215610-shorthand/topic/Query/near/199363176</a>, is it possible to use RuleSets to define a set of rules for an Example in order to reuse common attributes across examples?</p>\n<p>For example:<br>\nif every Example Patient had</p>\n<ul>\n<li>extension[us-core-race].extension[ombCategory].url = \"ombCategory\"</li>\n<li>extension[us-core-race].extension[ombCategory].valueCoding = Race#2106-3 \"White\"</li>\n<li>extension[us-core-race].extension[text].url = \"text\"</li>\n<li>extension[us-core-race].extension[text].valueString = \"White\"</li>\n</ul>",
        "id": 199797828,
        "sender_full_name": "Joshua Reynolds",
        "timestamp": 1591299229
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"294341\">@Joshua Reynolds</span> that seems like a good use case for RuleSets. Here is how what you are describing might look in FSH:</p>\n<div class=\"codehilite\"><pre><span></span><code>Alias: Race = https://www.hl7.org/fhir/us/core/ValueSet-omb-race-category.html\n\nRuleSet: PatientRace\n* extension[us-core-race].extension[ombCategory].url = &quot;ombCategory&quot;\n* extension[us-core-race].extension[ombCategory].valueCoding = Race#2106-3 &quot;White&quot;\n* extension[us-core-race].extension[text].url = &quot;text&quot;\n* extension[us-core-race].extension[text].valueString = &quot;White&quot;\n\nInstance: P1\nInstanceOf: http://hl7.org/fhir/us/core/StructureDefinition/us-core-patient\nMixins: PatientRace\n* name.given = &quot;James&quot;\n* name.family = &quot;Cod&quot;\n\nInstance: P2\nInstanceOf: http://hl7.org/fhir/us/core/StructureDefinition/us-core-patient\nMixins: PatientRace\n* name.given = &quot;Bill&quot;\n* name.family = &quot;Reef&quot;\n</code></pre></div>\n\n\n<p>On any Instance I make of a Patient, I can add <code>Mixins: PatientRace</code> to add the rules listed in that RuleSet to my FSH definition.</p>",
        "id": 199799300,
        "sender_full_name": "Nick Freiter",
        "timestamp": 1591299840
    },
    {
        "content": "<p>Awesome!<br>\nI did not fully understand how that would look when applied to an Example, but this clears it all up.<br>\n Thank you very much <span class=\"user-mention\" data-user-id=\"239822\">@Nick Freiter</span></p>",
        "id": 199799640,
        "sender_full_name": "Joshua Reynolds",
        "timestamp": 1591300003
    },
    {
        "content": "<p><a href=\"/user_uploads/10155/b-7rpKES1jaaRlrxJ5L9b48o/image.png\">image.png</a> <br>\n<a href=\"/user_uploads/10155/tp6yt1CGROtrq2RAChVydOIY/image.png\">image.png</a><br>\nI am getting a \"Cannot resolve element from path: extension[us-core-race].extension[text].url\"<br>\nI had the IG building and just copied the rules and put them into a RuleSet.<br>\nDoes the RuleSet need to know about the us-core-patient Profile?</p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/b-7rpKES1jaaRlrxJ5L9b48o/image.png\" title=\"image.png\"><img src=\"/user_uploads/10155/b-7rpKES1jaaRlrxJ5L9b48o/image.png\"></a></div><div class=\"message_inline_image\"><a href=\"/user_uploads/10155/tp6yt1CGROtrq2RAChVydOIY/image.png\" title=\"image.png\"><img src=\"/user_uploads/10155/tp6yt1CGROtrq2RAChVydOIY/image.png\"></a></div>",
        "id": 199805133,
        "sender_full_name": "Joshua Reynolds",
        "timestamp": 1591302938
    },
    {
        "content": "<p>The other way to do this is to create a rule set, then mix in that rule set in every profile. It still requires touching each profile, but it is one line in each profile.</p>",
        "id": 199805776,
        "sender_full_name": "Mark Kramer",
        "timestamp": 1591303287
    },
    {
        "content": "<p>I'm sorry I must have missed something I just walked through it deleting each extension and adding it to the RuleSet and it is working.</p>",
        "id": 199806680,
        "sender_full_name": "Joshua Reynolds",
        "timestamp": 1591303775
    },
    {
        "content": "<p>Hi All,</p>\n<p>I need some guidance on slicing using sushi. I'm trying to draft a profile using sushi. The profile extends the international vital-sign body weight(<a href=\"http://hl7.org/fhir/StructureDefinition/bodyweight\">http://hl7.org/fhir/StructureDefinition/bodyweight</a>). My objective is to include additional SNOMED based slice on Observation.code.coding in the derived vital sign profile.  <br>\nI'am trying to do that by adding the following in the .fsh file (Parent:  observation-bodyweight)<br>\n/* code.coding contains<br>\n/          bodyWeightSNOMED-CT 0..1 MS   <br>\n/* code.coding[bodyWeightSNOMED-CT] = SCT#27113001<br>\nI'm facing issues with it. as per my understanding it is failing since the vital sign profiles are not sliced based on pattern but sushi is trying add a pattern by using the above code.  Please suggest me how I can achieve this.<br>\nError: Internal error: Could not match any discriminators ([code, system]) for slice Observation.code.coding:bodyWeightSNOMED-CT in profile <a href=\"http://build.fhir.org/ig/hl7au/au-fhir-childhealth/StructureDefinition/ncdhc-observation-vitalsign-bodyweight\">http://build.fhir.org/ig/hl7au/au-fhir-childhealth/StructureDefinition/ncdhc-observation-vitalsign-bodyweight</a> - None of the discriminator [code, system] have fixed value, binding or existence assertions</p>",
        "id": 205549814,
        "sender_full_name": "Shovan Roy",
        "timestamp": 1596158679
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191469\">@Chris Moesel</span> any suggestion for me?</p>",
        "id": 205656553,
        "sender_full_name": "Shovan Roy",
        "timestamp": 1596243915
    },
    {
        "content": "<p>Hi <span class=\"user-mention\" data-user-id=\"193760\">@Shovan Roy</span>.  I apologize for the delay, when I read this the first time, I did not have time to look into it.  But then, after it was marked \"read\", I forgot to look at it again.  I wish Zulip had a way to re-mark something as \"unread\"!</p>\n<p>Your hunch is correct. The parent profile (<a href=\"http://hl7.org/fhir/StructureDefinition/bodyweight\">http://hl7.org/fhir/StructureDefinition/bodyweight</a>) slices <code>coding</code> using the <code>value</code> discriminator type and <em>two</em> paths (both <code>system</code> and <code>code</code>).  That being the case, any additional slices need to follow that approach, meaning:</p>\n<ol>\n<li>They must fix <code>system</code> and <code>code</code> independently (not via a <code>pattern[x]</code> on a parent path)</li>\n<li>They must fix them using <code>fixed[x]</code> (since the discriminator type is <code>value</code>, not <code>pattern</code>)</li>\n</ol>\n<p>The following FSH worked for me using SUSHI 0.15.0:</p>\n<div class=\"codehilite\"><pre><span></span><code>Alias: SCT = http://snomed.info/sct\nAlias: LOINC = http://loinc.org\nAlias: OBSCAT = http://terminology.hl7.org/CodeSystem/observation-category\n\nProfile: MyWeightProfile\nParent: http://hl7.org/fhir/StructureDefinition/bodyweight\n* code.coding contains bodyWeightSNOMED-CT 0..1 MS\n* code.coding[bodyWeightSNOMED-CT].system = SCT (exactly)     // discriminator requires fixed[x]\n* code.coding[bodyWeightSNOMED-CT].code = #27113001 (exactly) // discriminator requires fixed[x]\n\nInstance: MyWeightInstance\nInstanceOf: MyWeightProfile\n* code.coding[BodyWeightCode] = LOINC#29463-7\n* code.coding[bodyWeightSNOMED-CT] = SCT#27113001\n* category = OBSCAT#vital-signs\n* status = #final\n* subject = Reference(Patient/example)\n* effectiveDateTime = 2020-08-01T00:00:00.000-05:00\n* valueQuantity = 100 &#39;[lb_av]&#39;\n* valueQuantity.unit = &quot;lbs&quot;\n</code></pre></div>",
        "id": 205790277,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1596459576
    },
    {
        "content": "<p>You know,  'how to'  replies like this are gold! We should have a way to 'tag' them - or copy them somewhere so they can be more easily found. sort of an examples 'how to' annex in the spec or somewhere...</p>",
        "id": 205824595,
        "sender_full_name": "David Hay",
        "timestamp": 1596476740
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191469\">@Chris Moesel</span> thank you so much. This works perfectly. This is 'exactly' what I was looking for <span aria-label=\"smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"smile\">:smile:</span><br>\nI love sushi !</p>",
        "id": 205851450,
        "sender_full_name": "Shovan Roy",
        "timestamp": 1596491614
    }
]