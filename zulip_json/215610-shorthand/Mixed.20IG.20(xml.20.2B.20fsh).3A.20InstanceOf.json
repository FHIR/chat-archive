[
    {
        "content": "<p>We have a mixed IG, that is, we have integrated XML and FSH files. Is it possible to create an FSH-instance that is an instance of the XML-StructureDefinition?<br>\nAt the moment I get this error:</p>\n<div class=\"codehilite\"><pre><span></span><code>Sushi: error InstanceOf http://fhir.ch/ig/ch-orf/StructureDefinition/ch-orf-document not found for referral-min\n</code></pre></div>\n<div class=\"codehilite\"><pre><span></span><code>Alias:   ChOrfDocument = http://fhir.ch/ig/ch-orf/StructureDefinition/ch-orf-document\n\nInstance: referral-min\nInstanceOf: ChOrfDocument\nTitle: &quot;Bundle Referral minimal&quot;\nDescription: &quot;Example for Bundle&quot;\n* type = #document\n* etc.\n</code></pre></div>",
        "id": 231768608,
        "sender_full_name": "Michaela Ziegler",
        "timestamp": 1616664132
    },
    {
        "content": "<p>I remember it is possible.</p>",
        "id": 231776766,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1616668213
    },
    {
        "content": "<p>(if I am not mistaken)</p>",
        "id": 231776774,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1616668221
    },
    {
        "content": "<p>do you have a repo <span class=\"user-mention\" data-user-id=\"233842\">@Michaela Ziegler</span> ?</p>",
        "id": 231776817,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1616668244
    },
    {
        "content": "<p><a href=\"https://github.com/hl7ch/ch-orf\">https://github.com/hl7ch/ch-orf</a> (<a href=\"https://github.com/hl7ch/ch-orf/blob/master/input/fsh/EX_Bundle.fsh\">https://github.com/hl7ch/ch-orf/blob/master/input/fsh/EX_Bundle.fsh</a>)</p>",
        "id": 231789596,
        "sender_full_name": "Michaela Ziegler",
        "timestamp": 1616674442
    },
    {
        "content": "<p>This looks like a bug (or at least a lack of a feature) to me. If you move the <code>ch-orf-document</code> up one folder level (so that it is directly in the <code>resources</code> folder, then SUSHI will find it and use it. I've added an <a href=\"https://github.com/FHIR/sushi/issues/786\">issue</a> for us to add support for nested folders like you are using in this IG.</p>\n<p>One other thing I did notice is that the <code>ch-orf-document</code> also does not have a <code>snapshot</code> element, and unfortunately SUSHI does require that the resources that are dependencies of FSH definitions do have a <code>snapshot</code>.</p>",
        "id": 231793910,
        "sender_full_name": "Nick Freiter",
        "timestamp": 1616676533
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"239822\">@Nick Freiter</span>  Thx for your help.<br>\n<span class=\"user-mention\" data-user-id=\"191478\">@Oliver Egger</span> and i have discussed the issue with the snapshot. We think this requirement of sushi unfavourable, as it restricts the use of mixed IGs. because the publisher creates the snapshot of the xml profiles (too late for sushi).</p>",
        "id": 231947006,
        "sender_full_name": "Michaela Ziegler",
        "timestamp": 1616756909
    },
    {
        "content": "<p>To be clear, the snapshot should only be required on a given definition if you are writing FSH that is based on that definition.    If SUSHI is generating an <code>Instance</code> or <code>Profile</code>, it needs to know the full snapshot of the StructureDefinition that <code>Instance</code> is an <code>InstanceOf</code> or that <code>Profile</code> has as a <code>Parent</code>, or else much of the validation SUSHI provides, like type checking for example, is not possible.</p>",
        "id": 231958043,
        "sender_full_name": "Nick Freiter",
        "timestamp": 1616763031
    }
]