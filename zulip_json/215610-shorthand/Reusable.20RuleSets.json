[
    {
        "content": "<p>Is there a way to reuse a fsh file across IGs yet? For example for rulesets and common conventions/aliases...</p>",
        "id": 268255539,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1642417271
    },
    {
        "content": "<p>Only by copying the files into the fsh directory...</p>",
        "id": 268391239,
        "sender_full_name": "David Pyke",
        "timestamp": 1642513048
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"192587\">@David Pyke</span> is correct.  We don't have any more sophisticated mechanisms for sharing FSH entities at this point.  It is something we've thought about as a future improvement, but we haven't done much more than think about it at this point.</p>",
        "id": 268394657,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1642514610
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191832\">@Jose Costa Teixeira</span> ,  see <a href=\"http://jira.hl7.org/browse/FHIR-28949\">J#28949</a>. I requested this a while ago.</p>",
        "id": 268981065,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1642888977
    },
    {
        "content": "<p>I was probably having this as an influence. In fact I only thought of this because you taught me how to separate those common functions.</p>",
        "id": 268981613,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1642889690
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191469\">@Chris Moesel</span> FWIW, I'd upvote this</p>",
        "id": 268981630,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1642889720
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"192587\">David Pyke</span> <a href=\"#narrow/stream/215610-shorthand/topic/Reusable.20RuleSets/near/268391239\">said</a>:</p>\n<blockquote>\n<p>Only by copying the files into the fsh directory...</p>\n</blockquote>\n<p>Symlink for the win!</p>",
        "id": 268981706,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1642889799
    },
    {
        "content": "<p>or package and DependsOn</p>",
        "id": 268984994,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1642894288
    },
    {
        "content": "<p>If you're comfortable with <a href=\"https://github.blog/2016-02-01-working-with-submodules/\">git submodules</a> (or willing to learn), that could be an effective way of sharing common FSH files across multiple projects.</p>",
        "id": 269107626,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1643032241
    },
    {
        "content": "<p>I had considered trying that. The problem with git submodules is that i don't think we can put that on a commit, can we?</p>",
        "id": 270368933,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1643801100
    },
    {
        "content": "<p>Ah, yeah.  I forgot that submodules need to be explicitly managed (e.g., you need to use <code>git clone --recursive</code> when cloning, <code>git submodule update</code>, etc.).  Good point, <span class=\"user-mention\" data-user-id=\"191832\">@Jose Costa Teixeira</span>.  It might not work in the current FHIR ecosystem, and even if it did, it would be difficult to appropriately version it.</p>",
        "id": 270387871,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1643810553
    },
    {
        "content": "<p>Let's explore what it would look like to have shareable FSH...  I see a few options:</p>\n<ol>\n<li>Add FSH files to FHIR packages so they have the final FHIR artifacts, but also the FSH source.</li>\n<li>Create FSH-only packages and publish them somewhere (but where? NPM registry?).</li>\n<li>Specify GitHub project URLs as dependencies and SUSHI finds FSH files there.</li>\n<li>Something else?</li>\n</ol>\n<p>Thoughts?</p>",
        "id": 270388432,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1643810768
    },
    {
        "content": "<p>Theoretically you could make a <code>/fsh</code> folder in your package and share whatever you want. Be careful not to bloat packages too much though <span aria-label=\"smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"smile\">:smile:</span></p>",
        "id": 270525748,
        "sender_full_name": "Ward Weistra",
        "timestamp": 1643883238
    },
    {
        "content": "<p>adding a fsh folder would mean using dependsOn, right?</p>",
        "id": 270589406,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1643910381
    },
    {
        "content": "<p>(btw dragging <span class=\"user-mention\" data-user-id=\"191604\">@Carl Leitner</span> <span class=\"user-mention\" data-user-id=\"193299\">@Luke Duncan</span> into this)</p>",
        "id": 270589544,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1643910432
    },
    {
        "content": "<p>and if that is the case, we'd end up having an entire IG as a repository of common functions, right?</p>",
        "id": 270589587,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1643910453
    },
    {
        "content": "<ul>\n<li>yay points: It's an IG and we know how to manage that lifecycle</li>\n<li>nay points: it's an entire IG (and will the IG build without any artifact, just the fsh functions?)</li>\n</ul>",
        "id": 270589825,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1643910555
    },
    {
        "content": "<p>The idea to add FSH files to FHIR packages appeals to me though I'm not sure how that would work as an end user of FSH.</p>",
        "id": 270760684,
        "sender_full_name": "Richard Stanley",
        "timestamp": 1644002423
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191469\">@Chris Moesel</span> it may be the best option. Worth a try?</p>",
        "id": 270904899,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1644173306
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"194192\">@Richard Stanley</span> as a end user of fsh you would just add a dependsOn in your sushi.yaml and you'd get the fsh declarations in that dependency.</p>",
        "id": 270904916,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1644173375
    },
    {
        "content": "<p>Tricky thing is that sushi should not save the dependencies as fhir resources for the IG. It would need to use them but not publish them</p>",
        "id": 270904980,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1644173436
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191832\">@Jose Costa Teixeira</span> -- we have a few things on our plate right now, so this will probably stay in \"idea phase\" for a little while.  I just wanted to get people's thoughts on things.  Regarding using the standard FHIR packages to share FSH, there are a few points to consider:</p>\n<ul>\n<li>The IGP would need to be updated to include the FSH code when it creates a package (I don't think it does that right now).</li>\n<li>Should we support identifying if a dependency package is just needed for the FSH or also for formal dependencies?  In the former case, it would not need to be listed in the generated IG JSON.</li>\n<li>Similar to above, should authors have to say that they WANT to use the FSH in a dependency (we could run into some weird unintentional situations otherwise).</li>\n<li>What things can be shared as FSH?  Just RuleSets?  Aliases?  Everything?</li>\n</ul>",
        "id": 270988028,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1644245197
    },
    {
        "content": "<p>right. That may be the longest path then. Perhaps we do need to consider alternatives only from the sushi / fsh side</p>",
        "id": 270990160,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1644246050
    },
    {
        "content": "<p>e.g. a special line of sushi for <code>includes?</code>?</p>",
        "id": 270990210,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1644246066
    },
    {
        "content": "<p>Personally, I think going the package route is over-engineering the problem, and likely to create as many issues as it solves. Go with some simple include directories.</p>",
        "id": 271022132,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1644258677
    }
]