[
    {
        "content": "<p>Hello everyone.<br>\nI'm new to FSH, though not to FHIR. Today I tried to say, that a quantity has to be a percentage. I was able to specify unit and system (UCUM), but had some problems with the code.<br>\nIf I say <code>* value[x].code = %</code> or  <code>* value[x].code = \\%</code>, I get the error <code>Cannot assign Instance at path value[x].code to element of type code. Definition not found for Instance: %</code> or  <code>\\%</code>.<br>\nIf I say <code>* value[x].code = '%'</code>, I get the error <code>mismatched input ''%'' expecting { 'MS', 'SU', 'TUT', ... }</code>.<br>\nIf I say <code>* value[x].code = \"%\"</code>, I get the error <code>Cannot assign string value: %. Value does not match element type: code</code>.<br>\nDoes anyone have an idea? Or do I have to add it manually?<br>\nThanks in advance for your help.</p>",
        "id": 256031444,
        "sender_full_name": "Mareike Przysucha",
        "timestamp": 1633340582
    },
    {
        "content": "<p>Codes use #: Try #%</p>",
        "id": 256032483,
        "sender_full_name": "Noemi Deppenwiese",
        "timestamp": 1633341125
    },
    {
        "content": "<p>works fine, thank you!</p>",
        "id": 256032588,
        "sender_full_name": "Mareike Przysucha",
        "timestamp": 1633341209
    },
    {
        "content": "<p>When defining a profile, you can actually specify the code system, code, and unit all in a single assignment, like so:</p>\n<div class=\"codehilite\"><pre><span></span><code>// assuming $UCUM alias is defined and value[x] is already constrained to Quantity\n* value[x] = $UCUM#% &quot;%&quot;\n</code></pre></div>\n<p>When creating an instance, you can specify value, code system, code, and unit all in a single assignment as well:</p>\n<div class=\"codehilite\"><pre><span></span><code>* valueQuantity = 25 $UCUM#% &quot;%&quot;\n</code></pre></div>\n<p>In fact, for instances only, if you're using UCUM, there is even a more succinct way to do it, as this will <em>assume</em> UCUM:</p>\n<div class=\"codehilite\"><pre><span></span><code>* valueQuantity = 25 &#39;%&#39; &quot;%&quot;\n</code></pre></div>\n<p>Examples above in FSH Online: <a href=\"https://fshschool.org/FSHOnline/#/share/3uD8ktq\">https://fshschool.org/FSHOnline/#/share/3uD8ktq</a></p>\n<p>FSH spec on this topic: <a href=\"http://build.fhir.org/ig/HL7/fhir-shorthand/reference.html#assignments-with-the-quantity-data-type\">http://build.fhir.org/ig/HL7/fhir-shorthand/reference.html#assignments-with-the-quantity-data-type</a></p>",
        "id": 256048727,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1633349993
    },
    {
        "content": "<p>Thanks <span class=\"user-mention\" data-user-id=\"191469\">@Chris Moesel</span>. I will use the first one. I didn't know it was possible without a value.</p>",
        "id": 256049181,
        "sender_full_name": "Mareike Przysucha",
        "timestamp": 1633350200
    },
    {
        "content": "<p>I should say, however, that for the purposes of a profile with a UCUM quantity value, you may want to consider specifying only the system and code (and not the unit).  Do you really <em>need</em> for the unit to be present in the data if the system and code are there?  If not, then I'd consider:</p>\n<div class=\"codehilite\"><pre><span></span><code>* value[x] = $UCUM#%    // don&#39;t require the human-readable unit be sent\n</code></pre></div>",
        "id": 256049380,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1633350295
    },
    {
        "content": "<p>This uses the FHIR <code>pattern[x]</code> constraint, so the unit would essentially be ignored (allowing for values with or without it).</p>",
        "id": 256049489,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1633350341
    },
    {
        "content": "<p>I don't really need the unit field, I just need <code>$UCUM#%</code>.</p>",
        "id": 256049629,
        "sender_full_name": "Mareike Przysucha",
        "timestamp": 1633350402
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"196115\">Mareike Przysucha</span> has marked this topic as resolved.</p>",
        "id": 256378289,
        "sender_full_name": "Notification Bot",
        "timestamp": 1633510171
    }
]