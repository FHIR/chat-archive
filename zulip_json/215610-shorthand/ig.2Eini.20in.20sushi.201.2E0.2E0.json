[
    {
        "content": "<p>I'm in the process of upgrading from sushi 0.16 to 1.0.0. My IG is entirely fsh, the IG resource itself is generated by sushi. Sushi seems to be working fine, but my publisher builds are failing because they can't find the IG resource. ig.ini currently has:</p>\n<div class=\"codehilite\"><pre><span></span><code>ig = input/ImplementationGuide-who.cr.covid19.json\n</code></pre></div>\n<p>which makes sense because that is where sushi used to put the IG resource. However, the resource is now put in fsh-generated. </p>\n<p>Do I just change the directory from <code>input</code> to <code>fsh-generated/resources</code>? (I don't recall seeing instructions about this in the migration steps.)<br>\nThanks.</p>",
        "id": 216708600,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1605332431
    },
    {
        "content": "<p>Next interesting issue: I'm seeing an error in qa.html:</p>\n<div class=\"codehilite\"><pre><span></span><code>ImplementationGuide.definition.parameter[22].value  error | Supressed messages file not found\n</code></pre></div>\n<p>Is this referring to ignoreWarnings.txt? Is this file now required? Where is it supposed be located?</p>",
        "id": 216710092,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1605334427
    },
    {
        "content": "<p>The ig resource should be in input/</p>",
        "id": 216713226,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1605339087
    },
    {
        "content": "<p>Sorry, let me correct that -- I don't actually have an IG fsh file. The IG resource is generated from sushi-config.yaml. If I start with a clean build, I don't have an IG resource to point to, and then when I run sushi, a generated IG resource ends up in fsh-generated. Are you suggesting I need to copy that to input?</p>",
        "id": 216740000,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1605374959
    },
    {
        "content": "<p>Elliot, you need this in your ig.ini (with your IG resource name):</p>\n<div class=\"codehilite\"><pre><span></span><code>[IG]\nig = fsh-generated/resources/ImplementationGuide-hl7.fhir.us.mcode.json\ntemplate = hl7.fhir.template\n</code></pre></div>",
        "id": 216740199,
        "sender_full_name": "Mark Kramer",
        "timestamp": 1605375203
    },
    {
        "content": "<p>No copying is needed, but you do need both an <code>ig.ini</code> and <code>sushi-config.yaml</code> at the top level, and the ig.ini needs to point to the <code>fsh-generated/resources</code> directory.</p>",
        "id": 216740282,
        "sender_full_name": "Mark Kramer",
        "timestamp": 1605375267
    },
    {
        "content": "<p>OK, that's what I suspected, just looking for confirmation. Changing igi.ini to point to the new location should probably be in the upgrade instructions.</p>",
        "id": 216740334,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1605375334
    },
    {
        "content": "<p>Thanks for  that tip, I'll see it gets done.</p>",
        "id": 216740391,
        "sender_full_name": "Mark Kramer",
        "timestamp": 1605375368
    },
    {
        "content": "<p>Any thought about the suppressed messages file error I was seeing? I suspect it is a publisher problem, but not sure.</p>",
        "id": 216740511,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1605375487
    },
    {
        "content": "<p>I think it refers to the ignoreWarnings.txt file. That should be at the top level, and it needs to start with the SuppressedMessages header shown here:</p>\n<div class=\"codehilite\"><pre><span></span><code>== Suppressed Messages ==\n# The following code systems are external and not supported by terminology server\nCode System URI &quot;http://ncimeta.nci.nih.gov&quot; is unknown so the code cannot be validated\nCode System URI &quot;http://cancerstaging.org&quot; is unknown so the code cannot be validated\n</code></pre></div>",
        "id": 216740580,
        "sender_full_name": "Mark Kramer",
        "timestamp": 1605375601
    },
    {
        "content": "<p>If that's not it, then you should look at the IG json and figure out what definition.parameter[22].value is.</p>",
        "id": 216740662,
        "sender_full_name": "Mark Kramer",
        "timestamp": 1605375662
    },
    {
        "content": "<p>The parameters are name-value pairs, like this:</p>\n<div class=\"codehilite\"><pre><span></span><code> &quot;parameter&quot;: [\n      {\n        &quot;code&quot;: &quot;copyrightyear&quot;,\n        &quot;value&quot;: &quot;2019+&quot;\n      },\n      {\n        &quot;code&quot;: &quot;releaselabel&quot;,\n        &quot;value&quot;: &quot;STU1&quot;\n      },\n      {\n        &quot;code&quot;: &quot;show-inherited-invariants&quot;,\n        &quot;value&quot;: &quot;false&quot;\n      },\n      {\n        &quot;code&quot;: &quot;path-history&quot;,\n        &quot;value&quot;: &quot;http://hl7.org/fhir/us/mcode/history.html&quot;\n      }\n    ]\n</code></pre></div>",
        "id": 216740755,
        "sender_full_name": "Mark Kramer",
        "timestamp": 1605375742
    },
    {
        "content": "<p>Its odd that the file is needed, even if I don't suppress any  messages.</p>",
        "id": 216740760,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1605375755
    },
    {
        "content": "<p>If you want to avoid oddness, you're in the wrong place. <span aria-label=\"laughing\" class=\"emoji emoji-1f606\" role=\"img\" title=\"laughing\">:laughing:</span></p>",
        "id": 216740783,
        "sender_full_name": "Mark Kramer",
        "timestamp": 1605375787
    },
    {
        "content": "<p>Right, silly me.</p>",
        "id": 216740809,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1605375821
    },
    {
        "content": "<p>Nope, putting ignoreWarnings in my base directory (.) doesn't work, and I only have two parameter elements in the generated IG json file, so I'm about 20 short of where it is looking.</p>",
        "id": 216741164,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1605376157
    },
    {
        "content": "<p>is your IG xml generated by sushi?</p>",
        "id": 216741201,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1605376197
    },
    {
        "content": "<p>Weird. 22 did seem like a lot.  Is there a direct link in the QA report to the item it is referring to?</p>",
        "id": 216741294,
        "sender_full_name": "Mark Kramer",
        "timestamp": 1605376273
    },
    {
        "content": "<p>the ignorewarnings.txt is expected in the ./input  folder</p>",
        "id": 216741371,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1605376338
    },
    {
        "content": "<p>You will probably not see it in mentioned in the ig.json folder because it's not there</p>",
        "id": 216741422,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1605376409
    },
    {
        "content": "<p>it's added later in the process by <del>a powerful spell</del> the template</p>",
        "id": 216741492,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1605376476
    },
    {
        "content": "<p>No, no direct link in the QA report.</p>",
        "id": 216741818,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1605376954
    },
    {
        "content": "<p>Check that the file name is exactly <code>ignoreWarnings.txt</code>?</p>",
        "id": 216741843,
        "sender_full_name": "Mark Kramer",
        "timestamp": 1605377016
    },
    {
        "content": "<p>Putting it in ./input seems to work.</p>",
        "id": 216741896,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1605377078
    },
    {
        "content": "<p>Ha. I had one there also, so sorry I misled you on the location.</p>",
        "id": 216741961,
        "sender_full_name": "Mark Kramer",
        "timestamp": 1605377173
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191380\">Elliot Silver</span> <a href=\"#narrow/stream/215610-shorthand/topic/ig.2Eini.20in.20sushi.201.2E0.2E0/near/216740334\">said</a>:</p>\n<blockquote>\n<p>OK, that's what I suspected, just looking for confirmation. Changing igi.ini to point to the new location should probably be in the upgrade instructions.</p>\n</blockquote>\n<p>Yep.  It looks like we missed that -- likely because in many of the prior FSH projects, SUSHI created ig.ini for you, so we didn't expect it to already be there (and in need of modification).  We'll have to add something in the migration doc to cover that then.</p>",
        "id": 216744644,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1605380789
    },
    {
        "content": "<p>I entered a SUSHI issue, to remind us, but we might want to get to this fast, since people are actively upgrading now.</p>",
        "id": 216903717,
        "sender_full_name": "Mark Kramer",
        "timestamp": 1605547692
    },
    {
        "content": "<p>I couldn't find the issue on GH to look for / add to, but the error message in sushi has the incorrect path as well:</p>\n<div class=\"codehilite\" data-code-language=\"Bash Session\"><pre><span></span><code><span class=\"go\">Sushi: error The ig.ini file must have an \"ig\" property pointing to the IG file. Please add the following line to fhir-subscription-backport-ig\\ig.ini: (00:02.0355)</span>\n<span class=\"go\">Sushi: 'ig = input/ImplementationGuide-hl7.fhir.uv.subscriptions-backport.json   (00:02.0359)</span>\n<span class=\"go\">Sushi: File: C:\\git\\fhir-subscription-backport-ig\\ig.ini                         (00:02.0361)</span>\n</code></pre></div>\n<p>Thanks!</p>",
        "id": 217273214,
        "sender_full_name": "Gino Canessa",
        "timestamp": 1605794828
    }
]