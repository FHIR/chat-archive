[
    {
        "content": "<p>I reread the IG and looked at my example but can not extend this to the followiing example:</p>\n<div class=\"codehilite\"><pre><span></span>Profile:        TestSupplyRequest\nParent:         SupplyRequest\nId:             test\nTitle:          &quot;Test Supply Request&quot;\nDescription:    &quot;A profile to test implementation of R5 elements&quot;\n* item.extension contains DevDef named devdef 0..1\n\nExtension:  DevDef\nId: devdef\nTitle: &quot;DeviceDefinition Reference Extension&quot;\nDescription: &quot;A reference to the [DeviceDefinition](http://build.fhir.org/devicedefinition.html) resource&quot;\n* value[x] only Reference(DeviceDefinition)\n</pre></div>\n\n\n<p>I get the following errors:</p>\n<div class=\"codehilite\"><pre><span></span> File: /Users/ehaas/Documents/FHIR/FSH-Tut/fsh-tutorial-master/FishExample/FishPatient.fsh\n  Line: 15\nerror No element found at path item.extension for TestSupplyRequest, skipping rule\n  File: /Users/ehaas/Documents/FHIR/FSH-Tut/fsh-tutorial-master/FishExample/SRTest.fsh\n  Line: 7\nerror No element found at path item.extension[devdef] for TestSupplyRequest, skipping rule\n  File: /Users/ehaas/Documents/FHIR/FSH-Tut/fsh-tutorial-master/FishExample/SRTest.fsh\n  Line: 7\n</pre></div>\n\n\n<p>The Extension created looks valid.  so I don't understand the extension syntax.<br>\nObviousy, I don't understand the syntax for extensions</p>",
        "id": 195113694,
        "sender_full_name": "Eric Haas",
        "timestamp": 1587672855
    },
    {
        "content": "<p>Running SUSHI v0.12.2</p>",
        "id": 195114887,
        "sender_full_name": "Eric Haas",
        "timestamp": 1587673545
    },
    {
        "content": "<p>I think the first issue is that you're trying to use R5 definitions, but SUSHI currently only supports R4.  In R4, <code>SupplyRequest</code> has <code>item[x]</code>, not <code>item</code>.  In theory, you could fix your FSH to use this rule instead:</p>\n<div class=\"codehilite\"><pre><span></span>* item[x].extension contains DevDef named devdef 0..1\n</pre></div>\n\n\n<p>I say \"in theory\" because someone else just discovered a bug that SUSHI isn't handling child paths of choice (<code>[x]</code>) elements correctly. (See <a href=\"#narrow/stream/215610-shorthand/topic/extending.20a.20polymorphic.20element\" title=\"#narrow/stream/215610-shorthand/topic/extending.20a.20polymorphic.20element\">thread</a>).  So while in theory referencing <code>item[x].extension</code> should work, in practice it does not.</p>",
        "id": 195121020,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1587676808
    },
    {
        "content": "<p>To get around that right now, you'd actually have to apply the extension explicitly to each possible choice element (or to at least the choices you want to support the extension).  E.g.,</p>\n<div class=\"codehilite\"><pre><span></span>* itemCodeableConcept.extension contains DevDef named devdef 0..1\n* itemReference.extension contains DevDef named devdef 0..1\n</pre></div>",
        "id": 195121230,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1587676938
    }
]