[
    {
        "content": "<div class=\"codehilite\"><pre><span></span><code>I just bumped into this issue, and I thought it might be worth writing a note for the gofsh newbie (me included):\nWhen one does a\ngofsh . -o &lt;DIRECTORY&gt;\nIn the ouptut directory (specified with &quot;-o&quot;), gofsh will create a directory\ntree\n&lt;DIRECTORY&gt;/fsh/input\nThen, it will separate codesystems and valueset in /different/ directories.\nThis has practical consequences: it will create two directories:\n/valuesets /codesystems\nHere&#39;s the gotcha: they will have two files with the /same name/\n\ninput/fsh/valuesets on  master \n❯ cat Raça-Cor.fsh \nValueSet: Raça-Cor\nId: br-core-valueset-patient-raceethnicity-race\nDescription: &quot;Códigos para representação de raça/cor no Brasil.&quot;\n\n* ^meta.lastUpdated = &quot;2020-03-12T13:25:39.619+00:00&quot;\n* ^language = #pt-BR\n* ^url = &quot;http://www.saude.gov.br/fhir/r4/ValueSet/BRRacaCor-1.0&quot;\n* ^version = &quot;1.0&quot;\n* ^status = #active\n* ^experimental = false\n* ^publisher = &quot;Ministério da Saúde do Brasil&quot;\n* ^immutable = false\n* include codes from system $BRRacaCor\n\n❯ cd ../codesystems/\n\ninput/fsh/codesystems on  master \n❯ cat Raça-Cor.fsh \nCodeSystem: Raça-Cor\nId: br-core-codesystem-patient-raceethnicity-race\nDescription: &quot;Códigos para representação de raça/cor.&quot;\n\n* ^meta.lastUpdated = &quot;2020-03-11T18:20:19.538+00:00&quot;\n* ^language = #pt-BR\n* ^url = &quot;http://www.saude.gov.br/fhir/r4/CodeSystem/BRRacaCor&quot;\n* ^version = &quot;201701A&quot;\n* ^status = #active\n* ^experimental = false\n* ^publisher = &quot;Ministério da Saúde do Brasil&quot;\n* ^content = #complete\n* #01 &quot;Branca&quot;\n* #02 &quot;Preta&quot;\n* #03 &quot;Parda&quot;\n* #04 &quot;Amarela&quot;\n* #05 &quot;Indígena&quot;\n\nWhat is the problem with that? It&#39;s that you must fuse those 2 directories into\na single one (input/fsh/resources/) so that you can use sushi and the IG publisher.\nWhen you move those files, one will clobber the other, as they will have the _same_\nname (as above: &quot;Raça-Cor.fsh&quot;). So, be careful.\n</code></pre></div>",
        "id": 265569494,
        "sender_full_name": "Hank Lenzi",
        "timestamp": 1640010225
    },
    {
        "content": "<p>I don't see the problem right now. I also had files with the same name in different folders, yet sushi made it correct. Do you have a description of unwanted behaviour in sushi?</p>",
        "id": 265573829,
        "sender_full_name": "Mareike Przysucha",
        "timestamp": 1640012440
    },
    {
        "content": "<p>I agree with <span class=\"user-mention\" data-user-id=\"196115\">@Mareike Przysucha</span>.  You shouldn't have to move those files into a shared folder.  You can keep the input folder (and subfolders) exactly as GoFSH creates it.</p>",
        "id": 265608859,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1640030130
    },
    {
        "content": "<p>Also note that if you prefer that GoFSH output it a different way, GoFSH supports a few different output \"styles\": <a href=\"https://fshschool.org/docs/gofsh/running/#style\">https://fshschool.org/docs/gofsh/running/#style</a></p>",
        "id": 265608895,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1640030155
    },
    {
        "content": "<p>You've misunderstood. This is not about sushi. This is about gofsh creating two files with the same name. When you move those into sushir /resources, file name clobbering occurs (in the case you want to keep you codesystems and valuesets in the same file). I hope I've made myself clear now.</p>",
        "id": 265686865,
        "sender_full_name": "Hank Lenzi",
        "timestamp": 1640094682
    },
    {
        "content": "<p>You take two different JSON files with different names (one for codesystem the othe for vaueset), pass them through gofsh, the output will be two files with the same name. <br>\n❯ cat codesystem-br-core-address-line-streettype.json <br>\n{<br>\n    \"resourceType\": \"CodeSystem\",<br>\n    \"id\": \"br-core-codesystem-streettype\",<br>\n    \"meta\": {<br>\n        \"lastUpdated\": \"2020-04-02T13:03:21.687+00:00\"<br>\n    },<br>\n    \"language\": \"pt-BR\",<br>\n    \"url\": \"<a href=\"http://www.saude.gov.br/fhir/r4/CodeSystem/BRTipoLogradouro\">http://www.saude.gov.br/fhir/r4/CodeSystem/BRTipoLogradouro</a>\",<br>\n    \"version\": \"201701A\",<br>\n    \"name\": \"Tipo_de_Logradouro\",<br>\n    \"status\": \"active\",<br>\n    \"experimental\": false,<br>\n    \"date\": \"2020-04-02T13:03:18.6480245+00:00\",<br>\n    \"publisher\": \"Ministério da Saúde do Brasil\",<br>\n    \"description\": \"Classificação os tipos de logradouros existentes para uso em endereços estruturados.\",<br>\n    \"content\": \"complete\",<br>\n    \"concept\": [<br>\n        {<br>\n            \"code\": \"008\",<br>\n            \"display\": \"Avenida\"<br>\n        },<br>\n        {<br>\n            \"code\": \"081\",<br>\n            \"display\": \"Rua\"<br>\n        }<br>\n    ]<br>\n}❯ cat valueset-br-core-address-line-streettype.json <br>\n{<br>\n    \"resourceType\": \"ValueSet\",<br>\n    \"id\": \"br-core-valueset-address-line-streettype\",<br>\n    \"meta\": {<br>\n        \"lastUpdated\": \"2020-03-12T14:50:48.259+00:00\"<br>\n    },<br>\n    \"language\": \"pt-BR\",<br>\n    \"url\": \"<a href=\"http://www.saude.gov.br/fhir/r4/ValueSet/BRTipoLogradouro-1.0\">http://www.saude.gov.br/fhir/r4/ValueSet/BRTipoLogradouro-1.0</a>\",<br>\n    \"version\": \"1.0\",<br>\n    \"name\": \"Tipo_de_Logradouro\",<br>\n    \"status\": \"active\",<br>\n    \"experimental\": false,<br>\n    \"date\": \"2020-03-12T14:50:47.8940392+00:00\",<br>\n    \"publisher\": \"Ministério da Saúde do Brasil\",<br>\n    \"description\": \"Classifica o tipo de logradouro.\",<br>\n    \"immutable\": false,<br>\n    \"compose\": {<br>\n        \"include\": [<br>\n            {<br>\n                \"system\": \"<a href=\"http://www.saude.gov.br/fhir/r4/CodeSystem/BRTipoLogradouro\">http://www.saude.gov.br/fhir/r4/CodeSystem/BRTipoLogradouro</a>\",<br>\n                \"version\": \"*\"<br>\n            }<br>\n        ]<br>\n    }<br>\n}</p>\n<p>The output:</p>\n<p>❯ cat Tipo_de_Logradouro.fsh <br>\nValueSet: Tipo_de_Logradouro<br>\nId: br-core-valueset-address-line-streettype<br>\nDescription: \"Classifica o tipo de logradouro.\"</p>\n<ul>\n<li>^meta.lastUpdated = \"2020-03-12T14:50:48.259+00:00\"</li>\n<li>^language = #pt-BR</li>\n<li>^url = \"<a href=\"http://www.saude.gov.br/fhir/r4/ValueSet/BRTipoLogradouro-1.0\">http://www.saude.gov.br/fhir/r4/ValueSet/BRTipoLogradouro-1.0</a>\"</li>\n<li>^version = \"1.0\"</li>\n<li>^status = #active</li>\n<li>^experimental = false</li>\n<li>^date = \"2020-03-12T14:50:47.8940392+00:00\"</li>\n<li>^publisher = \"Ministério da Saúde do Brasil\"</li>\n<li>^immutable = false</li>\n<li>include codes from system <a href=\"http://www.saude.gov.br/fhir/r4/CodeSystem/BRTipoLogradouro|*\">http://www.saude.gov.br/fhir/r4/CodeSystem/BRTipoLogradouro|*</a></li>\n</ul>\n<p>input/fsh/codesystems on  master [!?] <br>\n❯ cat Tipo_de_Logradouro.fsh <br>\nCodeSystem: Tipo_de_Logradouro<br>\nId: br-core-codesystem-streettype<br>\nDescription: \"Classificação os tipos de logradouros existentes para uso em endereços estruturados.\"</p>\n<ul>\n<li>^meta.lastUpdated = \"2020-04-02T13:03:21.687+00:00\"</li>\n<li>^language = #pt-BR</li>\n<li>^url = \"<a href=\"http://www.saude.gov.br/fhir/r4/CodeSystem/BRTipoLogradouro\">http://www.saude.gov.br/fhir/r4/CodeSystem/BRTipoLogradouro</a>\"</li>\n<li>^version = \"201701A\"</li>\n<li>^status = #active</li>\n<li>^experimental = false</li>\n<li>^date = \"2020-04-02T13:03:18.6480245+00:00\"</li>\n<li>^publisher = \"Ministério da Saúde do Brasil\"</li>\n<li>^content = #complete</li>\n<li>#008 \"Avenida\"</li>\n<li>#081 \"Rua\"</li>\n</ul>\n<p>Two files with the same name, from two files, with different names.</p>",
        "id": 265687936,
        "sender_full_name": "Hank Lenzi",
        "timestamp": 1640095254
    },
    {
        "content": "<p>You take two different JSON files with different names (one for codesystem the othe for vaueset), pass them through gofsh, the output will be two files with the same name. <br>\n❯ cat codesystem-br-core-address-line-streettype.json <br>\n{<br>\n    \"resourceType\": \"CodeSystem\",<br>\n    \"id\": \"br-core-codesystem-streettype\",<br>\n    \"meta\": {<br>\n        \"lastUpdated\": \"2020-04-02T13:03:21.687+00:00\"<br>\n    },<br>\n    \"language\": \"pt-BR\",<br>\n    \"url\": \"<a href=\"http://www.saude.gov.br/fhir/r4/CodeSystem/BRTipoLogradouro\">http://www.saude.gov.br/fhir/r4/CodeSystem/BRTipoLogradouro</a>\",<br>\n    \"version\": \"201701A\",<br>\n    \"name\": \"Tipo_de_Logradouro\",<br>\n    \"status\": \"active\",<br>\n    \"experimental\": false,<br>\n    \"date\": \"2020-04-02T13:03:18.6480245+00:00\",<br>\n    \"publisher\": \"Ministério da Saúde do Brasil\",<br>\n    \"description\": \"Classificação os tipos de logradouros existentes para uso em endereços estruturados.\",<br>\n    \"content\": \"complete\",<br>\n    \"concept\": [<br>\n        {<br>\n            \"code\": \"008\",<br>\n            \"display\": \"Avenida\"<br>\n        },<br>\n        {<br>\n            \"code\": \"081\",<br>\n            \"display\": \"Rua\"<br>\n        }<br>\n    ]<br>\n}❯ cat valueset-br-core-address-line-streettype.json <br>\n{<br>\n    \"resourceType\": \"ValueSet\",<br>\n    \"id\": \"br-core-valueset-address-line-streettype\",<br>\n    \"meta\": {<br>\n        \"lastUpdated\": \"2020-03-12T14:50:48.259+00:00\"<br>\n    },<br>\n    \"language\": \"pt-BR\",<br>\n    \"url\": \"<a href=\"http://www.saude.gov.br/fhir/r4/ValueSet/BRTipoLogradouro-1.0\">http://www.saude.gov.br/fhir/r4/ValueSet/BRTipoLogradouro-1.0</a>\",<br>\n    \"version\": \"1.0\",<br>\n    \"name\": \"Tipo_de_Logradouro\",<br>\n    \"status\": \"active\",<br>\n    \"experimental\": false,<br>\n    \"date\": \"2020-03-12T14:50:47.8940392+00:00\",<br>\n    \"publisher\": \"Ministério da Saúde do Brasil\",<br>\n    \"description\": \"Classifica o tipo de logradouro.\",<br>\n    \"immutable\": false,<br>\n    \"compose\": {<br>\n        \"include\": [<br>\n            {<br>\n                \"system\": \"<a href=\"http://www.saude.gov.br/fhir/r4/CodeSystem/BRTipoLogradouro\">http://www.saude.gov.br/fhir/r4/CodeSystem/BRTipoLogradouro</a>\",<br>\n                \"version\": \"*\"<br>\n            }<br>\n        ]<br>\n    }<br>\n}</p>\n<p>The output:</p>\n<p>❯ cat Tipo_de_Logradouro.fsh <br>\nValueSet: Tipo_de_Logradouro<br>\nId: br-core-valueset-address-line-streettype<br>\nDescription: \"Classifica o tipo de logradouro.\"</p>\n<ul>\n<li>^meta.lastUpdated = \"2020-03-12T14:50:48.259+00:00\"</li>\n<li>^language = #pt-BR</li>\n<li>^url = \"<a href=\"http://www.saude.gov.br/fhir/r4/ValueSet/BRTipoLogradouro-1.0\">http://www.saude.gov.br/fhir/r4/ValueSet/BRTipoLogradouro-1.0</a>\"</li>\n<li>^version = \"1.0\"</li>\n<li>^status = #active</li>\n<li>^experimental = false</li>\n<li>^date = \"2020-03-12T14:50:47.8940392+00:00\"</li>\n<li>^publisher = \"Ministério da Saúde do Brasil\"</li>\n<li>^immutable = false</li>\n<li>include codes from system <a href=\"http://www.saude.gov.br/fhir/r4/CodeSystem/BRTipoLogradouro|*\">http://www.saude.gov.br/fhir/r4/CodeSystem/BRTipoLogradouro|*</a></li>\n</ul>\n<p>input/fsh/codesystems on  master [!?] <br>\n❯ cat Tipo_de_Logradouro.fsh <br>\nCodeSystem: Tipo_de_Logradouro<br>\nId: br-core-codesystem-streettype<br>\nDescription: \"Classificação os tipos de logradouros existentes para uso em endereços estruturados.\"</p>\n<ul>\n<li>^meta.lastUpdated = \"2020-04-02T13:03:21.687+00:00\"</li>\n<li>^language = #pt-BR</li>\n<li>^url = \"<a href=\"http://www.saude.gov.br/fhir/r4/CodeSystem/BRTipoLogradouro\">http://www.saude.gov.br/fhir/r4/CodeSystem/BRTipoLogradouro</a>\"</li>\n<li>^version = \"201701A\"</li>\n<li>^status = #active</li>\n<li>^experimental = false</li>\n<li>^date = \"2020-04-02T13:03:18.6480245+00:00\"</li>\n<li>^publisher = \"Ministério da Saúde do Brasil\"</li>\n<li>^content = #complete</li>\n<li>#008 \"Avenida\"</li>\n<li>#081 \"Rua\"</li>\n</ul>\n<p>Two files with the same name, from two files, with different names.</p>",
        "id": 265687968,
        "sender_full_name": "Hank Lenzi",
        "timestamp": 1640095265
    },
    {
        "content": "<p>Sorry, I don't know what I did in Zulip, I double-posted. I apologize for that.</p>",
        "id": 265688156,
        "sender_full_name": "Hank Lenzi",
        "timestamp": 1640095344
    },
    {
        "content": "<p>OK.  GoFSH uses the <code>name</code> of the entity as the file name.  Since your CS and VS have the same <code>name</code> (i.e., the <code>name</code> property in the original JSON), then they result in FSH files with the same name.  Since GoFSH puts them in different folders, there is no clash there.</p>\n<p>You can <em>keep</em> them in separate folders in a SUSHI project (just like GoFSH produces them).  But if you <em>want</em> to move them so they are in the same folder, you will need to rename at least one of the files.  Renaming files is safe; it should not affect the output.  Since GoFSH is intended to be a <em>one-time</em> operation, you'll just need to do this that one time (and, again, that's only if you choose to move all your files into the same folder).</p>",
        "id": 265689836,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1640096432
    },
    {
        "content": "<p>Well, I suppose gofsh was meant, indeed,  to be a one-time operation. But then you create something, put it out to the World, and users like me start using it a little bit differently. The way we're using is to reverse-engineer a buggy \"BR-Core\" with the much more readable FSH syntax.  FSH is the future of FHIR information modelling  (there's no doubt in my mind), and we're resolute on learning it. Hence, our process of shoving everything in /resource so we can navigate the file tree easily. <br>\nI see the issue with \"name\". I didn't create those and I try no to deviate to much from the original source. <br>\nThis is a minor issue. Thanks for the answers. It wasn't really clear to me that gofsh used name of the entity (eventually, I got that from debugging my error logs). <br>\nI would, however, warn about this somewhere in the documentation.</p>",
        "id": 265691470,
        "sender_full_name": "Hank Lenzi",
        "timestamp": 1640097371
    },
    {
        "content": "<p>Thanks, <span class=\"user-mention\" data-user-id=\"437401\">@Hank Lenzi</span>.  It's always fun and interesting to see our stuff used in new and interesting ways!  Depending on how buggy BR-Core is, GoFSH might still stumble around a little.  It does expect the input to follow the FHIR spec to at least <em>some</em> degree!</p>\n<p>If you haven't already, I would encourage you to try playing with the different output styles.  Maybe you'll see something you like better.  We'll also consider adding a new style that does a file-per-definition but dumps them all into the same folder.  In the case, we'd probably prefix them w/ the type (So, <code>ValueSet-SomeName</code>, <code>CodeSystem-SomeName</code>, etc.).</p>",
        "id": 265692299,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1640097801
    },
    {
        "content": "<p>It's <a href=\"https://github.com/FHIR/GoFSH/issues/169\">GoFSH#169</a> if you'd like to track it (although I cannot guarantee if/when we'll get to it).</p>",
        "id": 265692500,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1640097932
    }
]