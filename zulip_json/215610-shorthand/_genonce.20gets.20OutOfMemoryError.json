[
    {
        "content": "<p>I'm getting a java.lang.OutOfMemoryError trying to run _genonce on a Windows 10 system. <a href=\"/user_uploads/10155/wyuoq-62ObAQ2N2LGeGY67jH/image.png\" title=\"image.png\">image.png</a>    Can anyone advise me as to how to deal with this? Thx.</p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/wyuoq-62ObAQ2N2LGeGY67jH/image.png\" title=\"image.png\"><img src=\"/user_uploads/10155/wyuoq-62ObAQ2N2LGeGY67jH/image.png\"></a></div>",
        "id": 195116928,
        "sender_full_name": "Mark Discenza",
        "timestamp": 1587674597
    },
    {
        "content": "<p>In case it helps, here is the stack trace: <a href=\"/user_uploads/10155/fgPNOlEHwxv_9KsDdMTmGLPu/image.png\" title=\"image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/fgPNOlEHwxv_9KsDdMTmGLPu/image.png\" title=\"image.png\"><img src=\"/user_uploads/10155/fgPNOlEHwxv_9KsDdMTmGLPu/image.png\"></a></div>",
        "id": 195117032,
        "sender_full_name": "Mark Discenza",
        "timestamp": 1587674652
    },
    {
        "content": "<p>can you show earlier in the log - how much memory is available? (note that this is not a shorthand issue)</p>",
        "id": 195119783,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1587676034
    },
    {
        "content": "<p>If I'm looking at the right line of output, it would be 512MB   <a href=\"/user_uploads/10155/OvikxfnNiGQDByrP1P8Gsesh/image.png\" title=\"image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/OvikxfnNiGQDByrP1P8Gsesh/image.png\" title=\"image.png\"><img src=\"/user_uploads/10155/OvikxfnNiGQDByrP1P8Gsesh/image.png\"></a></div>",
        "id": 195123819,
        "sender_full_name": "Mark Discenza",
        "timestamp": 1587678643
    },
    {
        "content": "<p>try giving it more</p>",
        "id": 195141848,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1587696682
    },
    {
        "content": "<p>Hello, i had the same problem. I now run a custom _genonce file (the original is always overwritten by sushi) where i've added \"-Xmx1g\" at the java call</p>",
        "id": 195150459,
        "sender_full_name": "Etienne Cantineau",
        "timestamp": 1587709546
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"243697\">@Etienne Cantineau</span> said:</p>\n<blockquote>\n<p>Hello, i had the same problem. I now run a custom _genonce file (the original is always overwritten by sushi) where i've added \"-Xmx1g\" at the java call</p>\n</blockquote>\n<p>We've received some feedback that perhaps SUSHI shouldn't provide these batch files at all (<code>_updatePublisher</code>, <code>_genonce</code>).  Or if we detect one there already, we could not overwrite it.  Interested in your feedback.</p>",
        "id": 195186195,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1587734328
    },
    {
        "content": "<p>It's nice to already have them when you start and maybe enough for some users. I don't have a problem to use a custom one with different name, same for ig.ini.</p>",
        "id": 195188995,
        "sender_full_name": "Etienne Cantineau",
        "timestamp": 1587735676
    },
    {
        "content": "<p>There should be a setting to pull that -Xmx value from the environment, and if not set to use a default value.</p>",
        "id": 195228249,
        "sender_full_name": "Keith Boone",
        "timestamp": 1587753525
    },
    {
        "content": "<p>We're trying to stay aligned w/ the batch scripts in <a href=\"https://github.com/FHIR/sample-ig\" title=\"https://github.com/FHIR/sample-ig\">sample-ig</a>, so while I agree that using an env variable is a good idea, we should aim to do it in sample-ig first.</p>",
        "id": 195234473,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1587756705
    },
    {
        "content": "<p>What would that look like? Specifically, what is the right amount of ram, and are there any concerns about over sizing?</p>",
        "id": 195237279,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1587758209
    },
    {
        "content": "<p>I jacked up the RAM 10 1024MB and then _genonce ran clean. It took about an hour to run, most of it spent waiting at the onGenerate: label in the output. My FSH tank had 22 profiles, 33 valuesets, 3 extensions, 1 ruleset. I don't know if this time is excessive or not, given the contents of the FSH tank. But I thought I  would report it and get your take on it. <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span></p>",
        "id": 195239619,
        "sender_full_name": "Mark Discenza",
        "timestamp": 1587759496
    },
    {
        "content": "<p>I would look at your value sets - I found that one of my value sets that had codes that couldn't be validated made the processing take a long time - it added 15 minutes just for that one value set</p>",
        "id": 195239920,
        "sender_full_name": "Jean Duteau",
        "timestamp": 1587759670
    },
    {
        "content": "<p>an hour to run is ridiculous, but maybe you have some large snomed expansions? the time I'm interested in is the second run, though. If that's longer than a few minutes, I'll have a look</p>",
        "id": 195252330,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1587767613
    }
]