[
    {
        "content": "<p>I have a Composition.section.text that I'm setting and my end tags aren't showing up:<br>\n<code>  * text.div = \"\"\"&lt;div xmlns=\"http://www.w3.org/1999/xhtml\"&gt;&lt;img src=\"allopurinol-usp-3.jpg\"&gt;SPL Image&lt;/img&gt;&lt;/div&gt;\"\"\"</code><br>\nThis is becoming this:<br>\n<code>\"div\": \"&lt;div xmlns=\\\"http://www.w3.org/1999/xhtml\\\"&gt;&lt;img src=\\\"allopurinol-usp-3.jpg\\\"&gt;SPL Image&lt;/div&gt;\"</code></p>\n<p>The closing &lt;/img&gt; tag has disappeared.</p>",
        "id": 275690452,
        "sender_full_name": "Jean Duteau",
        "timestamp": 1647535767
    },
    {
        "content": "<p>This looks like a bug in SUSHI in how it parses the XHTML. I've created an issue to track it: <a href=\"https://github.com/FHIR/sushi/issues/1048\">SUSHI #1048</a>.</p>",
        "id": 275710670,
        "sender_full_name": "Julia Afeltra",
        "timestamp": 1647543906
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"192166\">@Jean Duteau</span> I looked at this a bit more and chatted with <span class=\"user-mention\" data-user-id=\"191469\">@Chris Moesel</span>, and I realized that this is actually not valid XHTML, which I think is why the end tag doesn't show up. The <code>img</code> tag is an empty element, which means it cannot have any child nodes, so it should not have the \"SPL Image\" text between the <code>&lt;img&gt;</code> and <code>&lt;/img&gt;</code> tags.</p>\n<p>I think you can move the \"SPL Image\" text to <code>id</code> or <code>alt</code> attributes on the <code>img</code> tag or just move it outside the <code>img</code> tag completely, depending on how you are using it.</p>\n<p>Because the <code>img</code> tag should not have content in it, I think it might be okay that SUSHI does not support this. However, it might be helpful if SUSHI could output a warning to explain what happened. I will update the linked issue. Hopefully that makes sense! Sorry for any confusion!</p>",
        "id": 275717860,
        "sender_full_name": "Julia Afeltra",
        "timestamp": 1647547391
    },
    {
        "content": "<p>Ah right, that is bad on my transform that wasn't putting that text in the alt attribute.  I didn't look closely enough to see that was incorrect.</p>",
        "id": 275727824,
        "sender_full_name": "Jean Duteau",
        "timestamp": 1647551556
    }
]