[
    {
        "content": "<p>Are all three of these extension uses  valid? For some reason only the third is accepted. </p>\n<p>The extension is defined in an IG that this IG has a dependency on.</p>\n<div class=\"codehilite\"><pre><span></span><code>Alias: $ext-ca-aboriginalidentitygroup = http://hl7.org/fhir/ca/baseline/StructureDefinition/ext-aboriginalidentitygroup\nAlias: $cs-hl7-dar  = http://terminology.hl7.org/CodeSystem/data-absent-reason\n\nInstance: CaPatientInstance\nInstanceOf: http://hl7.org/fhir/ca/baseline/StructureDefinition/profile-patient\nTitle: &quot;Sample CA Baseline Patient Instance&quot;\nDescription: &quot;Patient instance conforming to CA Baseline PatientProfile&quot;\nUsage: #example\n\n* extension[$ext-ca-aboriginalidentitygroup].valueCoding = $cs-hl7-dar#not-asked\n\n* extension[http://hl7.org/fhir/ca/baseline/StructureDefinition/ext-aboriginalidentitygroup].valueCoding = $cs-hl7-dar#not-asked\n\n* extension[+].url = &quot;http://hl7.org/fhir/ca/baseline/StructureDefinition/ext-aboriginalidentitygroup&quot;\n* extension[=].valueCoding = $cs-hl7-dar#not-asked\n</code></pre></div>",
        "id": 246679584,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1626843168
    },
    {
        "content": "<p>Hi <span class=\"user-mention\" data-user-id=\"191380\">@Elliot Silver</span>.  All three approaches should work.  I have a simple demonstration here w/ one of the extensions that comes in FHIR core: <a href=\"https://fshschool.org/FSHOnline/#/share/3iwFJAz\">https://fshschool.org/FSHOnline/#/share/3iwFJAz</a></p>\n<p>The problem you're running into is that the particular extension you're using has an incomplete snapshot.  This actually has come up before with this very same extension!  See: <a href=\"#narrow/stream/215610-shorthand/topic/How.20to.20add.20extension.20using.20Sushi/near/226152809\">https://chat.fhir.org/#narrow/stream/215610-shorthand/topic/How.20to.20add.20extension.20using.20Sushi/near/226152809</a></p>",
        "id": 246716260,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1626872782
    },
    {
        "content": "<p>Wow, thanks for tracking that down. So this comes from the Simplifier issue of not generating snapshots?</p>",
        "id": 246733006,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1626879961
    },
    {
        "content": "<p>No.  There <em>is</em> a snapshot.  The problem is that the snapshot is <em>incomplete</em>.  More specifically, it does not contain the base <code>Extension.value[x]</code> element in it.  It contains the slice (<code>Extension.value[x]:valueCoding</code>), but not the actual element that is _being_ sliced.</p>",
        "id": 246751418,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1626888375
    },
    {
        "content": "<p>That sounds like an error with Simplifier, rather than CA Baseline, correct? </p>\n<p>(<span class=\"user-mention\" data-user-id=\"203235\">@Ward Weistra</span>, <span class=\"user-mention\" data-user-id=\"222582\">@Sheridan Cook</span> , <span class=\"user-mention\" data-user-id=\"193795\">@Joel Francis</span> )</p>",
        "id": 246755249,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1626890012
    },
    {
        "content": "<p>I don't know how that snapshot was generated, so it's hard to say...</p>",
        "id": 246758292,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1626891377
    },
    {
        "content": "<p>My understanding is that they're developing the profiles in Simplifier, then downloading the package, and using it as input for the IG publisher. (Which also means we're straying from FSH concerns.)</p>",
        "id": 246759775,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1626892176
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191380\">@Elliot Silver</span> I don't think this is on the Simplifier side either.<br>\nIndeed, CA Core is being developed on Simplifier, but without snapshots (as is good practice in development): <a href=\"https://simplifier.net/CanadianFHIRBaselineProfilesCA-Core/ExtensionAboriginalIdentityGroup/~xml\">https://simplifier.net/CanadianFHIRBaselineProfilesCA-Core/ExtensionAboriginalIdentityGroup/~xml</a>. If you download the resource with snapshot from Simplifier (Download &gt; Download snapshot as JSON) it includes the <code>Extension.value[x]</code> element in the snapshot that is missing from the published version.</p>\n<p>Even if they would give them with snapshots to the IG publisher, I assume the IG publisher would regenerate them. But I'm not sure about that.</p>",
        "id": 247189416,
        "sender_full_name": "Ward Weistra",
        "timestamp": 1627298276
    },
    {
        "content": "<p>Hi Ward, it looks like I misunderstood the CA Baseline workflow -- they are editing the IG by hand and using GitHub sync to copy into simplifier. As I dig further, it doesn't look like a Simplifier issue. Sorry.</p>",
        "id": 247216861,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1627312660
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191380\">@Elliot Silver</span> No worries, always happy to help debugging!</p>",
        "id": 247302398,
        "sender_full_name": "Ward Weistra",
        "timestamp": 1627371155
    }
]