[
    {
        "content": "<p>I gave up on calling the IG publisher in the code. I just run a shellexec and that should take care of it.</p>",
        "id": 177216626,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1570081210
    },
    {
        "content": "<p>question:</p>",
        "id": 177216629,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1570081220
    },
    {
        "content": "<p>where should we store the location to the IGPublisher.exe?<br>\nwhere is that executable? <br>\n1 Same folder as toolkit? <br>\n2 the location is stored in the ini file?<br>\n3...?</p>",
        "id": 177216657,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1570081316
    },
    {
        "content": "<p>let the user choose the location if it's not known, and then store it in the settings once they choose?</p>",
        "id": 177216701,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1570081351
    },
    {
        "content": "<p>...let the user choose the location <em>if it's not in the same folder as toolkit.exe</em>, and then store it in the settings once they choose?</p>",
        "id": 177216878,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1570081650
    },
    {
        "content": "<p>sure</p>",
        "id": 177216936,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1570081708
    },
    {
        "content": "<p>you could check the same code in the publisher, and we could move it into a shared class that can find/fetch/update/run the jar file.</p>",
        "id": 177216963,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1570081776
    },
    {
        "content": "<p>you lost me. check which same code?<br>\nor do you mean that what we do for the publisher exe, we can do the same for the jar?</p>",
        "id": 177217250,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1570082268
    },
    {
        "content": "<p>we should create a class like this: </p>\n<div class=\"codehilite\"><pre><span></span><span class=\"k\">type</span>\n  <span class=\"n\">TFHIRIGPublisher</span> <span class=\"o\">=</span> <span class=\"k\">class</span> <span class=\"p\">(</span><span class=\"n\">TFsObject</span><span class=\"p\">)</span>\n  <span class=\"kp\">private</span>\n  <span class=\"kp\">public</span>\n    <span class=\"k\">constructor</span> <span class=\"nf\">Create</span><span class=\"p\">(</span><span class=\"n\">ini</span> <span class=\"o\">:</span> <span class=\"n\">TIniFile</span><span class=\"p\">)</span><span class=\"o\">;</span>\n    <span class=\"k\">destructor</span> <span class=\"nf\">Destroy</span><span class=\"o\">;</span>\n\n    <span class=\"c1\">// check that the jar location is known, and if it&#39;s not, ask the user how to set it up</span>\n    <span class=\"k\">function</span> <span class=\"nf\">Configure</span> <span class=\"o\">:</span> <span class=\"kt\">boolean</span><span class=\"o\">;</span>\n\n    <span class=\"c1\">// check that the jar is up to date, and it&#39;s not, return an error</span>\n    <span class=\"c1\">// message to the user to help choose whether to update it</span>\n    <span class=\"k\">function</span> <span class=\"nf\">needsUpgrade</span><span class=\"p\">(</span><span class=\"k\">var</span> <span class=\"n\">msg</span><span class=\"o\">:</span> <span class=\"k\">String</span><span class=\"p\">)</span> <span class=\"o\">:</span> <span class=\"kt\">boolean</span><span class=\"o\">;</span>\n\n    <span class=\"c1\">// actually upgrade the jarl; call progressProc during the download</span>\n    <span class=\"k\">procedure</span> <span class=\"nf\">upgrade</span><span class=\"p\">(</span><span class=\"n\">progressProc</span> <span class=\"o\">:</span> <span class=\"n\">TProgressProc</span><span class=\"p\">)</span><span class=\"o\">;</span>\n\n    <span class=\"c1\">// execute the pulisher, return true if it succeeds, and send output</span>\n    <span class=\"c1\">// from the publisher to logProc</span>\n    <span class=\"k\">function</span> <span class=\"nf\">execute</span><span class=\"p\">(</span><span class=\"n\">params</span> <span class=\"o\">:</span> <span class=\"k\">array</span> <span class=\"k\">of</span> <span class=\"k\">String</span><span class=\"o\">;</span> <span class=\"n\">logProc</span> <span class=\"o\">:</span> <span class=\"n\">TLogProcedure</span><span class=\"p\">)</span> <span class=\"o\">:</span> <span class=\"kt\">boolean</span><span class=\"o\">;</span>\n  <span class=\"k\">end</span><span class=\"o\">;</span>\n</pre></div>",
        "id": 177217568,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1570082675
    },
    {
        "content": "<p>use it anywhere we want to run the IG publisher</p>",
        "id": 177217571,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1570082689
    },
    {
        "content": "<p>in a separate file? not in publisherhome.pas, right?</p>",
        "id": 177217800,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1570083058
    },
    {
        "content": "<p>right. in a separate file where we can use it from multiple places</p>",
        "id": 177217810,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1570083077
    },
    {
        "content": "<p>and logProc would be updated in realtime, not only once after the jar is finished, right?</p>",
        "id": 177217818,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1570083105
    },
    {
        "content": "<p>yes</p>",
        "id": 177217863,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1570083162
    },
    {
        "content": "<p>ok.<br>\nthis actually seems a bit closer to my early implementation, where I had a \"where can we find the jar and template\" and then a \"publish\" button. So i can see it working.</p>",
        "id": 177217935,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1570083307
    },
    {
        "content": "<p>on the jar location, I checked with Lloyd who agreed that the jar could be<br>\na) in the input-cache folder<br>\nb) in the parent folder to an IG (because I don't want to download 20 times 100 mb every time there is a new jar version)</p>",
        "id": 177217998,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1570083392
    },
    {
        "content": "<p>so this adds an option <br>\nc) the jar location is stored in an ini file</p>",
        "id": 177218014,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1570083444
    },
    {
        "content": "<p>right?</p>",
        "id": 177218016,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1570083449
    },
    {
        "content": "<p>yes</p>",
        "id": 177218022,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1570083472
    },
    {
        "content": "<p>I don't like having the jar in the folder. It's a recipe for trouble</p>",
        "id": 177218062,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1570083485
    },
    {
        "content": "<p>\"in the folder\" = in the ig content folders?</p>",
        "id": 177218151,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1570083664
    },
    {
        "content": "<p>yes</p>",
        "id": 177218236,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1570083830
    },
    {
        "content": "<p>yippeee!<br>\nI remember being barely awake at 3 am to join a call to mention that - separation between the ig content and the jar location...</p>",
        "id": 177218362,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1570084007
    },
    {
        "content": "<p>:)</p>",
        "id": 177218365,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1570084011
    },
    {
        "content": "<p>got it. <br>\nI may look at this later today, otherwise, lordy I hope it rains during the weekend. <br>\nI'll finish the examplescenario and this.</p>",
        "id": 177218512,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1570084245
    },
    {
        "content": "<p>If you look at the code,  feel free to create the empty shell for that class - best you decide where this should be and how it should be named.</p>",
        "id": 177218533,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1570084275
    },
    {
        "content": "<p>BTW, we had a question from the audience in Atlanta: How would this this toolkit run on a Mac?<br>\nMy answer was that while it does compile, I'm not sure it works. Correct?</p>",
        "id": 177218837,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1570084760
    },
    {
        "content": "<p>it runs on a mac</p>",
        "id": 177219070,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1570085056
    },
    {
        "content": "<p>I</p>",
        "id": 177219073,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1570085064
    },
    {
        "content": "<p>I'm not sure about the java bit though</p>",
        "id": 177219075,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1570085073
    },
    {
        "content": "<p>I saw the changes - cool stuff. Now it asks for a JAR location.</p>",
        "id": 177449866,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1570347775
    },
    {
        "content": "<p>A few ideas:</p>\n<ol>\n<li>before opening the dialog to look for a jar, I check if the jar is either in .\\input-cache\\, or in ..\\ <br>\n(those are the locations i checked with Lloyd. the reason for the ..\\ was that if we are working on 10 IGs, we may want to have only one jar.)</li>\n</ol>",
        "id": 177449930,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1570347934
    },
    {
        "content": "<ol start=\"2\">\n<li>I was trying to get the publisher called from the code in the toolkit main form, but I think there is one too many forms/threads doing Application.ProcessMessages, and the focus gets a bit crazy.</li>\n</ol>",
        "id": 177449978,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1570348003
    },
    {
        "content": "<p>I had the check for the jar not in form.create but in form.show (in preparation for item 2 above). Does this make sense? (I created a var FirstShow to avoid running that every time we lose and gain focus)</p>",
        "id": 177450033,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1570348121
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> I committed these changes, just discard if you disagree</p>",
        "id": 177450472,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1570348921
    },
    {
        "content": "<p>oh. The toolkit. that's FMX. No wonder it went a bit crazy.</p>",
        "id": 177452954,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1570353463
    },
    {
        "content": "<p>I'll have to think about that</p>",
        "id": 177452957,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1570353468
    },
    {
        "content": "<p>(just now realizing the publisher is VCL... that's why it looked a bit different) <span aria-label=\"embarrassed\" class=\"emoji emoji-1f633\" role=\"img\" title=\"embarrassed\">:embarrassed:</span></p>",
        "id": 177453060,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1570353631
    },
    {
        "content": "<p>yeah. I forgot to allow for that</p>",
        "id": 177453070,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1570353686
    },
    {
        "content": "<p>The code for calling the publisher via code is there (commented out), in case you want to see what to make of it.</p>",
        "id": 177453073,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1570353696
    },
    {
        "content": "<p>but in principle, the way it works is that the publisher has it's own copy of the jar, which it will prompt the user to keep up to date, but it will use an IG specific copy if it finds it</p>",
        "id": 177453076,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1570353721
    },
    {
        "content": "<p>ok my code does not start with the publisher's own jar - it always tries to get one from the IG content folder</p>",
        "id": 177453292,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1570354126
    },
    {
        "content": "<p>and if that fails, then it asks for a jar</p>",
        "id": 177453293,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1570354141
    },
    {
        "content": "<p>so we can have 3 jar locations right?<br>\nif I have a folder IGs and subfolders IG1 and IG2, then the jar can be in <br>\na) IGs\\IG1\\input-cache<br>\nb) IGs<br>\nc) wherever the publisher says it is.<br>\nI like this idea. let me see if I can switch the code for that.</p>",
        "id": 177453395,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1570354325
    },
    {
        "content": "<p>I was going to make sure that the app always had it's own copy (there's things I would use the IGPublisher for directly)</p>",
        "id": 177453396,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1570354329
    },
    {
        "content": "<p>what is IGs?</p>",
        "id": 177453418,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1570354341
    },
    {
        "content": "<p>it is the folder of all IGs</p>",
        "id": 177453421,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1570354352
    },
    {
        "content": "<p>is that a thing is it?</p>",
        "id": 177453439,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1570354409
    },
    {
        "content": "<p>in my case I have c:\\HL7\\IGs\\be-core, c:\\HL7\\IGs\\ihe-mma, c:\\HL7\\IGS\\pml...</p>",
        "id": 177453441,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1570354417
    },
    {
        "content": "<p>well, I asked Lloyd that I did not want to have 20 copies of the jar, and he agreed, so I was happy with it. We thought to keep that jar in the parent folder, but we can change that decision.</p>",
        "id": 177453487,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1570354481
    },
    {
        "content": "<p>so keeping one jar in the parent folder would work well for people in *nix machines, who do not have this publisher, and they can save a few gigabytes</p>",
        "id": 177453501,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1570354556
    },
    {
        "content": "<p>one alternative is to have a \"jarFile\" in the ig.ini file.</p>",
        "id": 177453546,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1570354617
    },
    {
        "content": "<p>i'm trying to make this so that it does not conflict with mac users</p>",
        "id": 177453557,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1570354655
    },
    {
        "content": "<p>well, we haven't formally defined 'one single directory' for all IGs. But if you do have one, and you already use the jar there, then you'd select that as the place for the FHIR tool to use for it's copy of the jar. If you don't, you can pick somewhere else..?</p>",
        "id": 177453826,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1570355172
    },
    {
        "content": "<p>so what do you think? where do we find the jar file ? </p>\n<ol>\n<li>explicitly named in IG's ini file, otherwise in the ig's input-cache, otherwise the publisher knows</li>\n<li>in the IG's input cache, otherwise in the IG's parent folder, otherwise the publisher knows</li>\n<li>only in the ig's input-cache, otherwise the publisher knows</li>\n</ol>\n<p>3 may require *nix users to have lots of IG jars <br>\n1 and 2 i can code, but 1 (which I prefer) should be aligned with Lloyd - I did the updates to the batch file myself, so i don't mind throwing all that powershell knowledge out...</p>",
        "id": 177453833,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1570355216
    },
    {
        "content": "<p>ah wait, option 1 may cover option 2... if the new template includes a line in the ig.ini<br>\njarFile = \".\\input-cache\\org.hl7.fhir.publisher.jar\"</p>",
        "id": 177453977,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1570355497
    },
    {
        "content": "<p>option 1 is option 2 if the user sets it up that way</p>",
        "id": 177454026,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1570355566
    },
    {
        "content": "<p>user only gets jar in their IG folder if they already set it up that way</p>",
        "id": 177454033,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1570355586
    },
    {
        "content": "<p>true, the batch file runs that.</p>",
        "id": 177454290,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1570356074
    },
    {
        "content": "<p>let me know if we should change the jar location from being hardcoded in a .bat /.sh to something else</p>",
        "id": 177454469,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1570356468
    },
    {
        "content": "<p>meanwhile, safe landings if that is the case.</p>",
        "id": 177454470,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1570356476
    },
    {
        "content": "<p>I think there's no reason to change the bat/sh files</p>",
        "id": 177454520,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1570356545
    },
    {
        "content": "<p>so <br>\nif we run the bat, we get the default behaviour (input-cache, eventually in parent IG folder) ; <br>\nif we run the publisher, we use the input-cache if available;  if not, we use the publisher's own jar</p>",
        "id": 177454629,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1570356760
    },
    {
        "content": "<p>?</p>",
        "id": 177454630,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1570356763
    },
    {
        "content": "<p>yes</p>",
        "id": 177454694,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1570356937
    },
    {
        "content": "<p>ok, easy, just removed these lines of mine<br>\n  if fileExists(ExtractFileDir(ExcludeTrailingBackslash(IGtoPublish))+'\\org.hl7.fhir.publisher.jar')<br>\n    then FjarFile:= ExtractFileDir(ExcludeTrailingBackslash(IGtoPublish))+'\\org.hl7.fhir.publisher.jar';</p>",
        "id": 177454803,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1570357100
    },
    {
        "content": "<blockquote>\n<p>which it will prompt the user to keep up to date, but it will use an IG specific copy if it finds it</p>\n</blockquote>\n<p>now i am thinking about what this \"prompt the user\". <br>\nwant to inform the user that a new version is available?</p>",
        "id": 177454818,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1570357194
    },
    {
        "content": "<p>yes that's on my todo list.</p>",
        "id": 177454858,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1570357210
    },
    {
        "content": "<p>ok thanks</p>",
        "id": 177454876,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1570357264
    },
    {
        "content": "<p>to find out the current release: <a href=\"https://fhir.github.io/latest-ig-publisher/tools.json\" target=\"_blank\" title=\"https://fhir.github.io/latest-ig-publisher/tools.json\">https://fhir.github.io/latest-ig-publisher/tools.json</a></p>",
        "id": 177454885,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1570357295
    },
    {
        "content": "<p>to find out the local copy: open the jar as a zip, find the version file, read the contents (that's the bit I have to do)</p>",
        "id": 177454892,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1570357316
    },
    {
        "content": "<p>function checkJarUpToDate (jarfilename:string):boolean ?</p>",
        "id": 177454999,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1570357509
    },
    {
        "content": "<p>i could have some fun with such a function later today. i  can unzip</p>",
        "id": 177455062,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1570357663
    },
    {
        "content": "<p>what is the version file?</p>",
        "id": 177455063,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1570357669
    },
    {
        "content": "<p>that's the bit I'm not sure about. And I'm not on my dev PC in the air here so I can't look quickly</p>",
        "id": 177455103,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1570357711
    },
    {
        "content": "<p>there used to be a <a href=\"http://version.info\" target=\"_blank\" title=\"http://version.info\">version.info</a> in the jar, but i can't see one in the latest release</p>",
        "id": 177455123,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1570357802
    },
    {
        "content": "<p>no it's moved to a maven thing now.</p>",
        "id": 177455542,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1570358542
    },
    {
        "content": "<p>first thoughts: <br>\n<a href=\"/user_uploads/10155/8EH-gHjLSvYeTLn2gNInQNvU/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/8EH-gHjLSvYeTLn2gNInQNvU/image.png\" title=\"image.png\"><img src=\"/user_uploads/10155/8EH-gHjLSvYeTLn2gNInQNvU/image.png\"></a></div>",
        "id": 211117885,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1600946992
    },
    {
        "content": "<ol>\n<li>first, setup dependencies and point to IG</li>\n</ol>",
        "id": 211117963,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1600947036
    },
    {
        "content": "<ol start=\"2\">\n<li>check the releases, add a new if needed<br>\n<a href=\"/user_uploads/10155/7a8IulvTEVjpBYSi5_gGq2d5/image.png\">image.png</a><div class=\"message_inline_image\"><a href=\"/user_uploads/10155/7a8IulvTEVjpBYSi5_gGq2d5/image.png\" title=\"image.png\"><img src=\"/user_uploads/10155/7a8IulvTEVjpBYSi5_gGq2d5/image.png\"></a></div></li>\n</ol>",
        "id": 211117986,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1600947055
    },
    {
        "content": "<ol start=\"3\">\n<li>Do it: <br>\n3.1. make sure original IG builds OK; <br>\n3.2 build for publication<br>\n3.3. build for web (deciding whether it's a milestone)<br>\nBefore building, would be nice to check for common issues and dependencies</li>\n</ol>\n<p><a href=\"/user_uploads/10155/BcevSqovudZaObJS1O9tJx2O/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/BcevSqovudZaObJS1O9tJx2O/image.png\" title=\"image.png\"><img src=\"/user_uploads/10155/BcevSqovudZaObJS1O9tJx2O/image.png\"></a></div>",
        "id": 211118119,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1600947140
    },
    {
        "content": "<p>comments welcome</p>",
        "id": 211118127,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1600947150
    },
    {
        "content": "<p>I think this is the same functionality documented in confluence, only the whole \"copy files, replace this file, don't replace that,...\" would be behind the scenes</p>",
        "id": 211118272,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1600947283
    },
    {
        "content": "<p>well, I've just moved a whole lot of that functionality behind the scenes anyway. I'm rewriting the publication documentation today or tomorrow</p>",
        "id": 211561225,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1601333989
    },
    {
        "content": "<p>Just to check - is this documentation updated? Just to know when I can work on GUI.</p>",
        "id": 212038610,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1601621938
    },
    {
        "content": "<p>yes I have finished rewriting the documetnation</p>",
        "id": 212039034,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1601622318
    },
    {
        "content": "<p>I'm looking at this, and while I clean the canonical urls i get this:<br>\ncanonical URL of <a href=\"http://hl7belgium.org/fhir/sample-ig\">http://hl7belgium.org/fhir/sample-ig</a> does not match the required canonical of <a href=\"http://hl7.org/fhir/be/sample-ig\">http://hl7.org/fhir/be/sample-ig</a></p>",
        "id": 212414808,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1601984463
    },
    {
        "content": "<p>seems that the latter canonical is created from the ig's  packageId. can i override that? <br>\nand if not, how can i make it work for non-hl7 IGs ?</p>",
        "id": 212415020,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1601984607
    },
    {
        "content": "<p>(there seems to be a rule that the package id must have 4 parts, the first 2 being hl7.fhir.)</p>",
        "id": 212421855,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1601988424
    },
    {
        "content": "<p>there certainly isn't a rule like that.</p>",
        "id": 212477629,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1602014506
    },
    {
        "content": "<p><a href=\"https://github.com/HL7/fhir-ig-publisher/blob/e52766a50b4096879e75efa6896e36b9fbb83722/org.hl7.fhir.publisher.core/src/main/java/org/hl7/fhir/igtools/publisher/utils/PublicationProcess.java#L98\">https://github.com/HL7/fhir-ig-publisher/blob/e52766a50b4096879e75efa6896e36b9fbb83722/org.hl7.fhir.publisher.core/src/main/java/org/hl7/fhir/igtools/publisher/utils/PublicationProcess.java#L98</a></p>",
        "id": 212480766,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1602015848
    },
    {
        "content": "<p>(this is the error I got, not sure what it means)</p>",
        "id": 212480795,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1602015869
    },
    {
        "content": "<p>the rules is that if the package id starts with hl7, then I decide on it's structure and content. And I define that that for fhir IGs the package id must be hl7.fhir.[realm].[code]</p>",
        "id": 212516421,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1602048109
    },
    {
        "content": "<p>I had hl7.be.fhir, but I did change to <a href=\"http://hl7.fhir.be\">hl7.fhir.be</a> to get over that. But then I got the error above if I want to publish this under the <a href=\"http://hl7belgium.org\">hl7belgium.org</a> site</p>",
        "id": 212519884,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1602052637
    },
    {
        "content": "<p>how can I get around that and publish an IG that starts with hl7. to the url <a href=\"http://hl7belgium.org/\">hl7belgium.org/</a>...?</p>",
        "id": 212521109,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1602054112
    },
    {
        "content": "<p>can I reproduce this? The package name is limited, but the web site shouldn't be</p>",
        "id": 212535346,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1602063877
    },
    {
        "content": "<p>yes. I tried this with the sample ig, adapting the package name and site:</p>",
        "id": 212785937,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1602222906
    },
    {
        "content": "<p>The package-list was changed to</p>\n<div class=\"codehilite\" data-code-language=\"JSON\"><pre><span></span><code><span class=\"p\">{</span>\n <span class=\"nt\">\"package-id\"</span> <span class=\"p\">:</span> <span class=\"s2\">\"hl7.be.fhir.sample-ig\"</span><span class=\"p\">,</span>\n <span class=\"nt\">\"title\"</span> <span class=\"p\">:</span> <span class=\"s2\">\"Your User Friendly Name for MyIG Here\"</span><span class=\"p\">,</span>\n <span class=\"nt\">\"canonical\"</span> <span class=\"p\">:</span> <span class=\"s2\">\"http://hl7belgium.org/fhir/sample-ig\"</span><span class=\"p\">,</span>\n <span class=\"nt\">\"introduction\"</span> <span class=\"p\">:</span> <span class=\"s2\">\"The introduction that should appear in the FHIR IG registry\"</span><span class=\"p\">,</span>\n <span class=\"nt\">\"list\"</span> <span class=\"p\">:</span> <span class=\"p\">[{</span>\n  <span class=\"nt\">\"version\"</span> <span class=\"p\">:</span> <span class=\"s2\">\"current\"</span><span class=\"p\">,</span>\n  <span class=\"nt\">\"desc\"</span> <span class=\"p\">:</span> <span class=\"s2\">\"Continuous Integration Build (latest in version control)\"</span><span class=\"p\">,</span>\n  <span class=\"nt\">\"path\"</span> <span class=\"p\">:</span> <span class=\"s2\">\"http://build.fhir.org/ig/hl7-be/sample-ig\"</span><span class=\"p\">,</span>\n  <span class=\"nt\">\"status\"</span> <span class=\"p\">:</span> <span class=\"s2\">\"ci-build\"</span><span class=\"p\">,</span>\n  <span class=\"nt\">\"current\"</span> <span class=\"p\">:</span> <span class=\"kc\">true</span>\n <span class=\"p\">},{</span>\n  <span class=\"nt\">\"version\"</span> <span class=\"p\">:</span> <span class=\"s2\">\"0.1.0\"</span><span class=\"p\">,</span>\n  <span class=\"nt\">\"date\"</span> <span class=\"p\">:</span> <span class=\"s2\">\"2099-01-01\"</span><span class=\"p\">,</span>\n  <span class=\"nt\">\"desc\"</span> <span class=\"p\">:</span> <span class=\"s2\">\"Initial STU ballot (Mmm yyyy Ballot)\"</span><span class=\"p\">,</span>\n  <span class=\"nt\">\"path\"</span> <span class=\"p\">:</span> <span class=\"s2\">\"http://hl7belgium.org/fhir/sample-ig\"</span><span class=\"p\">,</span>\n  <span class=\"nt\">\"status\"</span> <span class=\"p\">:</span> <span class=\"s2\">\"ballot\"</span><span class=\"p\">,</span>\n  <span class=\"nt\">\"sequence\"</span> <span class=\"p\">:</span> <span class=\"s2\">\"DSTU 1\"</span>\n <span class=\"p\">}]</span>\n<span class=\"p\">}</span>\n</code></pre></div>",
        "id": 212785945,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1602222923
    },
    {
        "content": "<p>the command lines i used:</p>\n<ol>\n<li><code>java -jar .\\publisher.jar -ig sample-ig#0.0.1 -resetTx -publish http://hl7belgium.org/fhir/sample-ig</code></li>\n</ol>",
        "id": 212785991,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1602222982
    },
    {
        "content": "<ol start=\"2\">\n<li><code>java -jar .\\publisher.jar -go-publish -source sample-ig#0.0.1  -destination hl7belgium.org -registry ig-registry\\fhir-ig-list.json -history fhir-ig-history-template</code></li>\n</ol>",
        "id": 212786005,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1602223016
    },
    {
        "content": "<p>any ideas?</p>",
        "id": 212802152,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1602235894
    },
    {
        "content": "<p>Grahame, do you have any suggestion on this?</p>",
        "id": 213117279,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1602571768
    }
]