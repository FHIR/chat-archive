[
    {
        "content": "<p>I think the server command line syntax changed... what is the basic command line to get the server running locally ? <br>\nI noticed something that looks like a bug</p>",
        "id": 154004635,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1538490771
    },
    {
        "content": "<p>issue:<br>\nsearch for patients, click on a link to one of the results. The link is {base}/r4/entry/1 but should be {base/r4/<strong>Patient</strong>/1 .</p>",
        "id": 154004641,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1538491430
    },
    {
        "content": "<p>first guess: could it be FHIR.Server.XhtmlComp.pas line 455?<br>\n(e.fhirType vs e.resource.fhirType)</p>",
        "id": 154004642,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1538491572
    },
    {
        "content": "<p>I thought I just fixed that</p>",
        "id": 154004730,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1538496966
    },
    {
        "content": "<p>-cmd exec</p>",
        "id": 154004731,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1538496974
    },
    {
        "content": "<p>you fixed line 450 recently indeed, but not line 455</p>",
        "id": 154004736,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1538497129
    },
    {
        "content": "<p><a href=\"/user_uploads/10155/TWu3ewR7wHnMF5-W2q2Pbv3-/pasted_image.png\" target=\"_blank\" title=\"pasted_image.png\">pasted image</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/TWu3ewR7wHnMF5-W2q2Pbv3-/pasted_image.png\" target=\"_blank\" title=\"pasted image\"><img src=\"/user_uploads/10155/TWu3ewR7wHnMF5-W2q2Pbv3-/pasted_image.png\"></a></div>",
        "id": 154004737,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1538497158
    },
    {
        "content": "<p>i'm on it</p>",
        "id": 154004738,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1538497204
    },
    {
        "content": "<p>btw, where is / how to configure the server endpoint?</p>",
        "id": 154004739,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1538497231
    },
    {
        "content": "<p>/open no longer works</p>",
        "id": 154004740,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1538497297
    },
    {
        "content": "<p>and -cmd remount fails</p>",
        "id": 154004751,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1538497484
    },
    {
        "content": "<p>why does it fail?</p>",
        "id": 154004781,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1538499653
    },
    {
        "content": "<p>9:04:33 00:00:00 FHIR Service 1.0.200. Using ini file C:\\HL7\\fhir4Server\\fhirserver.ini with stack dumps on<br>\n19:04:33 00:00:00 EFslException: unknown version</p>\n<p>(0000000003BB4241){FHIRServer.exe} [0000000003FB5241] FHIR.Server.Kernel._ZN4Fhir6Server6Kernel12TFHIRService17UnInstallDatabaseEN6System13UnicodeStringE + $1C1<br>\n(0000000003BAB892){FHIRServer.exe} [0000000003FAC892] JclDebug._ZN8Jcldebug17TJclStackInfoListC3EbiPvbS1_ + $82<br>\n(0000000003BAD740){FHIRServer.exe} [0000000003FAE740] JclDebug._ZN8Jcldebug21GetExceptionStackInfoEPN6System16TExceptionRecordE + $160<br>\n(0000000000049307){FHIRServer.exe} [000000000044A307] System.SysUtils._ZN6System8Sysutils9Exception16RaisingExceptionEPNS_16TExceptionRecordE + $27<br>\n(0000000000049C0B){FHIRServer.exe} [000000000044AC0B] System.SysUtils._ZN6System8Sysutils17RaiseExceptObjectEPNS_16TExceptionRecordE + $2B<br>\n(0000000000011566){FHIRServer.exe} [0000000000412566] System._ZN6System14_RaiseAtExceptEPNS_7TObjectEPv + $E6<br>\n(00000000000115B1){FHIRServer.exe} [00000000004125B1] System._ZN6System12_RaiseExceptEPNS_7TObjectE + $11<br>\n(0000000003BB4241){FHIRServer.exe} [0000000003FB5241] FHIR.Server.Kernel._ZN4Fhir6Server6Kernel12TFHIRService17UnInstallDatabaseEN6System13UnicodeStringE + $1C1<br>\n(0000000003BAEF4D){FHIRServer.exe} [0000000003FAFF4D] FHIR.Server.Kernel._ZN4Fhir6Server6Kernel17ExecuteFhirServerEv + $67D</p>",
        "id": 154004784,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1538499902
    },
    {
        "content": "<p>server does not compile since yesterday's update. Is it me?</p>",
        "id": 175036083,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1567746479
    },
    {
        "content": "<p>hmm why not?</p>",
        "id": 175036151,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1567746550
    },
    {
        "content": "<p>should do know - I just did a full release</p>",
        "id": 175036161,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1567746571
    },
    {
        "content": "<p>ok let me restart ide and rebuild</p>",
        "id": 175036168,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1567746586
    },
    {
        "content": "<p>ok it's linking</p>",
        "id": 175036241,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1567746708
    },
    {
        "content": "<p>false alarm, sorry</p>",
        "id": 175036281,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1567746725
    },
    {
        "content": "<p>np. I think I missed something yesterday</p>",
        "id": 175036286,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1567746740
    },
    {
        "content": "<p>I found a bug where the DB connection class was allowing re-use with out proper clean up, so I've added an assertion that this doesn't happen anymore, and also that proper clean up does happen. Let me know if it fires anywhere</p>",
        "id": 175036307,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1567746791
    },
    {
        "content": "<p>ok so my command line is this<br>\n-cmd remount -debug -ini \"C:\\HL7\\fhir4Server\\fhirserver.ini\"  -password DBroot123 -endpoint open</p>",
        "id": 175036317,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1567746841
    },
    {
        "content": "<p>and it breaks with this:</p>",
        "id": 175036358,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1567746860
    },
    {
        "content": "<p>07:13:35 00:00:00 Connect to dbr4 (mysql://jctasus.local/fhirDB)<br>\n07:13:35 00:00:00 mount endpoint dbr4<br>\n07:13:36 00:00:00 EODBC: [Microsoft][ODBC Driver Manager] Function sequence error</p>\n<p>(0000000000C47864){FHIRServer.exe} [0000000001048864] FHIR.Database.ODBC.Objects._ZN4Fhir8Database4Odbc7Objects17TODBCErrorHandler10RaiseErrorEPNS2_11TODBCObjectEs (Line 2990, \"FHIR.Database.ODBC.Objects.pas\" + 18) + $0<br>\n(0000000004226A52){FHIRServer.exe} [0000000004627A52] JclDebug._ZN8Jcldebug17TJclStackInfoListC3EbiPvbS1_ (Line 5377, \"JclDebug.pas\" + 2) + $0<br>\n(00000000042289F3){FHIRServer.exe} [00000000046299F3] JclDebug._ZN8Jcldebug21GetExceptionStackInfoEPN6System16TExceptionRecordE (Line 7219, \"JclDebug.pas\" + 39) + $3B<br>\n(00000000000497D7){FHIRServer.exe} [000000000044A7D7] System.SysUtils._ZN6System8Sysutils9Exception16RaisingExceptionEPNS_16TExceptionRecordE + $27<br>\n(000000000004A0DB){FHIRServer.exe} [000000000044B0DB] System.SysUtils._ZN6System8Sysutils17RaiseExceptObjectEPNS_16TExceptionRecordE + $2B<br>\n(0000000000011566){FHIRServer.exe} [0000000000412566] System._ZN6System14_RaiseAtExceptEPNS_7TObjectEPv + $E6<br>\n(00000000000115B1){FHIRServer.exe} [00000000004125B1] System._ZN6System12_RaiseExceptEPNS_7TObjectE + $11<br>\n(0000000000C47864){FHIRServer.exe} [0000000001048864] FHIR.Database.ODBC.Objects._ZN4Fhir8Database4Odbc7Objects17TODBCErrorHandler10RaiseErrorEPNS2_11TODBCObjectEs (Line 2990, \"FHIR.Database.ODBC.Objects.pas\" + 18) + $0<br>\n(0000000000C47CE3){FHIRServer.exe} [0000000001048CE3] FHIR.Database.ODBC.Objects._ZN4Fhir8Database4Odbc7Objects8TOdbcEnv15TerminateHandleEv (Line 3102, \"FHIR.Database.ODBC.Objects.pas\" + 8) + $0<br>\n(0000000000C47A37){FHIRServer.exe} [0000000001048A37] FHIR.Database.ODBC.Objects._ZN4Fhir8Database4Odbc7Objects8TOdbcEnvD0Ev (Line 3036, \"FHIR.Database.ODBC.Objects.pas\" + 6) + $0<br>\n(000000000000F078){FHIRServer.exe} [0000000000410078] System._ZN6System7TObject4FreeEv + $18<br>\n(0000000000C643EE){FHIRServer.exe} [00000000010653EE] FHIR.Database.ODBC._ZN4Fhir8Database4Odbc15TKDBOdbcManagerD0Ev (Line 880, \"FHIR.Database.ODBC.pas\" + 4) + $0<br>\n(00000000002871A9){FHIRServer.exe} [00000000006881A9] FHIR.Support.Base._ZN4Fhir7Support4Base10TFslObject4FreeEv (Line 765, \"FHIR.Support.Base.pas\" + 8) + $10<br>\n(000000000422F814){FHIRServer.exe} [0000000004630814] FHIR.Server.Kernel._ZN4Fhir6Server6Kernel12TFHIRService15InstallDatabaseEN6System13UnicodeStringENS0_11Dbinstaller26TFHIRInstallerSecurityModeE (Line 981, \"FHIR.Server.Kernel.pas\" + 84) + $14<br>\n(0000000000010FF9){FHIRServer.exe} [0000000000411FF9] System._ZN6System23_DelphiExceptionHandlerEPNS_16TExceptionRecordEyPvS2_ + $589<br>\n(00000000000A37FF){ntdll.dll   } [00007FFC294747FF] Unknown function at __chkstk + $19F<br>\n(000000000000500C){ntdll.dll   } [00007FFC293D600C] RtlUnwindEx + $51C<br>\n(0000000000010E59){FHIRServer.exe} [0000000000411E59] System._ZN6System23_DelphiExceptionHandlerEPNS_16TExceptionRecordEyPvS2_ + $3E9<br>\n(00000000000A377F){ntdll.dll   } [00007FFC2947477F] Unknown function at __chkstk + $11F<br>\n(0000000000003BEF){ntdll.dll   } [00007FFC293D4BEF] Unknown function at RtlWalkFrameChain + $14BF<br>\n(00000000000A24EE){ntdll.dll   } [00007FFC294734EE] KiUserExceptionDispatcher + $2E<br>\n(0000000000038129){KERNELBASE.dll} [00007FFC26219129] RaiseException + $69<br>\n(00000000042181DB){FHIRServer.exe} [00000000046191DB] JclHookExcept._ZN13Jclhookexcept20HookedRaiseExceptionEjjjPNS_19TExceptionArgumentsE (Line 380, \"JclHookExcept.pas\" + 14) + $0<br>\n(0000000000011586){FHIRServer.exe} [0000000000412586] System._ZN6System14_RaiseAtExceptEPNS_7TObjectEPv + $106<br>\n(00000000000115F8){FHIRServer.exe} [00000000004125F8] System._ZN6System11_RaiseAgainEv + $38<br>\n(000000000079D6AE){FHIRServer.exe} [0000000000B9E6AE] FHIR.Database.Manager._ZN4Fhir8Database7Manager11TKDBManager13GetConnectionEN6System13UnicodeStringE (Line 1390, \"FHIR.Database.Manager.pas\" + 23) + $5<br>\n(000000000422F5C0){FHIRServer.exe} [00000000046305C0] FHIR.Server.Kernel._ZN4Fhir6Server6Kernel12TFHIRService15InstallDatabaseEN6System13UnicodeStringENS0_11Dbinstaller26TFHIRInstallerSecurityModeE (Line 953, \"FHIR.Server.Kernel.pas\" + 56) + $13<br>\n(000000000422A293){FHIRServer.exe} [000000000462B293] FHIR.Server.Kernel._ZN4Fhir6Server6Kernel17ExecuteFhirServerEv (Line 249, \"FHIR.Server.Kernel.pas\" + 75) + $0<br>\n(0000000004235CD0){FHIRServer.exe} [0000000004636CD0] FHIRServer._ZN10Fhirserver14initializationEv (Line 400, \"FHIRServer.dpr\" + 11) + $5<br>\n(0000000000016974){KERNEL32.DLL} [00007FFC28F27974] BaseThreadInitThunk + $14<br>\n(0000000000069271){ntdll.dll   } [00007FFC2943A271] RtlUserThreadStart + $21</p>\n<p>EODBC: [Microsoft][ODBC Driver Manager] Function sequence error</p>",
        "id": 175036364,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1567746896
    },
    {
        "content": "<p>i think it is something in odbc but the ODBC manager says connection is ok. any idea what to try next?</p>",
        "id": 175036382,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1567746930
    },
    {
        "content": "<p>well, the stack is trash - probably not a debug build? can you run that under the debugger and paste the stack here?</p>",
        "id": 175036506,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1567747124
    },
    {
        "content": "<p>function sequence error means trying to access a result set when there isn't one available or similar</p>",
        "id": 175036524,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1567747150
    },
    {
        "content": "<p>? this is what I am doing</p>",
        "id": 175036593,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1567747249
    },
    {
        "content": "<p><a href=\"/user_uploads/10155/Y296zt0vH2ICkLoc3Ujd_znz/pasted_image.png\" target=\"_blank\" title=\"pasted_image.png\">pasted image</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/Y296zt0vH2ICkLoc3Ujd_znz/pasted_image.png\" target=\"_blank\" title=\"pasted image\"><img src=\"/user_uploads/10155/Y296zt0vH2ICkLoc3Ujd_znz/pasted_image.png\"></a></div>",
        "id": 175036594,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1567747251
    },
    {
        "content": "<p>then i do Run (F9)</p>",
        "id": 175036609,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1567747279
    },
    {
        "content": "<p>let me see where it breaks</p>",
        "id": 175036624,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1567747304
    },
    {
        "content": "<p>fails here:<br>\nFHIRServer.Kernel    function TFHIRService.InstallDatabase<br>\n...<br>\n    try<br>\n      conn := db.GetConnection('setup');</p>",
        "id": 175036890,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1567747787
    },
    {
        "content": "<p>then in <br>\nfunction TKDBManager.GetConnection(const AUsage: String): TKDBConnection;</p>",
        "id": 175036920,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1567747802
    },
    {
        "content": "<div class=\"codehilite\"><pre><span></span>  try\n    result := ConnectionFactory;\n</pre></div>",
        "id": 175036945,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1567747814
    },
    {
        "content": "<p>but ConnectionFactory is nil</p>",
        "id": 175036947,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1567747822
    },
    {
        "content": "<p>what's the stack at that point?</p>",
        "id": 175037044,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1567747952
    },
    {
        "content": "<p>FHIR.Database.Manager.TKDBManager.GetConnection('setup')<br>\nFHIR.Server.Kernel.TFHIRService.InstallDatabase('open',ismUnstated)<br>\nFHIR.Server.Kernel.ExecuteFhirServer<br>\nFHIRServer.FHIRServer</p>",
        "id": 175037101,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1567748056
    },
    {
        "content": "<p>line 953 in FHIR.Server.Kernel ?</p>",
        "id": 175037257,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1567748350
    },
    {
        "content": "<p>yes</p>",
        "id": 175037260,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1567748367
    },
    {
        "content": "<p>what does the fhirserver.ini say?</p>",
        "id": 175037265,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1567748372
    },
    {
        "content": "<p>for database?</p>",
        "id": 175037266,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1567748377
    },
    {
        "content": "<p>nut connectionFactory can't be nil - it's an abstract method. ...</p>",
        "id": 175037331,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1567748476
    },
    {
        "content": "<p>[database]<br>\ntype=mysql<br>\nserver=jctasus.local<br>\ndatabase=fhirDB<br>\nusername=sa<br>\npassword=pass<br>\ndriver=MySQL ODBC 8.0 Unicode Driver</p>\n<p>[databases]<br>\ndbr4= server: jctasus.local; database: fhirDB; username: sa; password: DBroot123; type: mysql; driver: \"MySQL ODBC 8.0 Unicode Driver\"; when-testing: true</p>",
        "id": 175037383,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1567748541
    },
    {
        "content": "<p>let me see if using another ODBC connector works</p>",
        "id": 175037390,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1567748566
    },
    {
        "content": "<p>well, that's embarrassing..</p>",
        "id": 175037444,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1567748654
    },
    {
        "content": "<p>it seemed to work</p>",
        "id": 175037448,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1567748659
    },
    {
        "content": "<p>what is the command line to run the server?<br>\n-cmd run?</p>",
        "id": 175037461,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1567748715
    },
    {
        "content": "<p>-cmd exec I think</p>",
        "id": 175037466,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1567748738
    },
    {
        "content": "<p>it's good, i think<br>\nonly complains at <br>\nUnable to load package hl7.fhir.core v 4.0.0 as it doesn't exist</p>",
        "id": 175037518,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1567748807
    },
    {
        "content": "<p>what is easiest way to get this package? toolkit?</p>",
        "id": 175037522,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1567748823
    },
    {
        "content": "<p>you can install it if you run the server cmd -manager</p>",
        "id": 175037528,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1567748837
    },
    {
        "content": "<p>the packages..find packages</p>",
        "id": 175037532,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1567748859
    },
    {
        "content": "<p>neat, did not know that this had a manager gui.</p>",
        "id": 175037641,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1567749062
    },
    {
        "content": "<p>07:52:11 00:00:09   .. Load Package hl7.fhir.org#4.0.0<br>\n07:52:14 00:00:12 EDefinitionException: Unknown base profile: \"<a href=\"http://hl7.org/fhir/StructureDefinition/Composition\" target=\"_blank\" title=\"http://hl7.org/fhir/StructureDefinition/Composition\">http://hl7.org/fhir/StructureDefinition/Composition</a>\"</p>",
        "id": 175037715,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1567749212
    },
    {
        "content": "<p>why is this? shold i do a remount after i install the package?</p>",
        "id": 175037718,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1567749235
    },
    {
        "content": "<p>i did remount, still same issue</p>",
        "id": 175037915,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1567749503
    },
    {
        "content": "<p>don't know. that's odd</p>",
        "id": 175037943,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1567749578
    },
    {
        "content": "<p>what's the stack when it raises that?</p>",
        "id": 175037948,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1567749589
    },
    {
        "content": "<p>(0000000002AB9480){FHIRServer.exe} [0000000002EBA480] FHIR.R4.Profiles._ZN4Fhir2R48Profiles20TBaseWorkerContextR411SeeResourceEPNS0_9Resources13TFhirResourceE (Line 1858, \"FHIR.R4.Profiles.pas\" + 9) + $0<br>\n(0000000004226A52){FHIRServer.exe} [0000000004627A52] JclDebug._ZN8Jcldebug17TJclStackInfoListC3EbiPvbS1_ (Line 5377, \"JclDebug.pas\" + 2) + $0<br>\n(00000000042289F3){FHIRServer.exe} [00000000046299F3] JclDebug._ZN8Jcldebug21GetExceptionStackInfoEPN6System16TExceptionRecordE (Line 7219, \"JclDebug.pas\" + 39) + $3B<br>\n(00000000000497D7){FHIRServer.exe} [000000000044A7D7] System.SysUtils._ZN6System8Sysutils9Exception16RaisingExceptionEPNS_16TExceptionRecordE + $27<br>\n(000000000004A0DB){FHIRServer.exe} [000000000044B0DB] System.SysUtils._ZN6System8Sysutils17RaiseExceptObjectEPNS_16TExceptionRecordE + $2B<br>\n(0000000000011566){FHIRServer.exe} [0000000000412566] System._ZN6System14_RaiseAtExceptEPNS_7TObjectEPv + $E6<br>\n(00000000000115B1){FHIRServer.exe} [00000000004125B1] System._ZN6System12_RaiseExceptEPNS_7TObjectE + $11<br>\n(0000000002AB9480){FHIRServer.exe} [0000000002EBA480] FHIR.R4.Profiles._ZN4Fhir2R48Profiles20TBaseWorkerContextR411SeeResourceEPNS0_9Resources13TFhirResourceE (Line 1858, \"FHIR.R4.Profiles.pas\" + 9) + $0<br>\n(0000000003C51BEC){FHIRServer.exe} [0000000004052BEC] FHIR.Server.ValidatorR4._ZN4Fhir6Server11Validatorr426TFHIRServerWorkerContextR411SeeResourceEPNS_2R49Resources13TFhirResourceE (Line 211, \"FHIR.Server.ValidatorR4.pas\" + 29) + $13<br>\n(0000000002AB92A5){FHIRServer.exe} [0000000002EBA2A5] FHIR.R4.Profiles._ZN4Fhir2R48Profiles20TBaseWorkerContextR411seeResourceEPNS_4Base7Objects14TFHIRResourceVE (Line 1827, \"FHIR.R4.Profiles.pas\" + 2) + $0<br>\n(000000000052BE02){FHIRServer.exe} [000000000092CE02] FHIR.Base.Factory._ZN4Fhir4Base7Factory29TFHIRWorkerContextWithFactory16loadResourceJsonEN6System13UnicodeStringES4_PNS3_7Classes7TStreamE (Line 404, \"FHIR.Base.Factory.pas\" + 7) + $0<br>\n(00000000005F8E62){FHIRServer.exe} [00000000009F9E62] FHIR.Cache.PackageManager._ZN4Fhir5Cache14Packagemanager19TFHIRPackageManager11loadPackageEN6System13UnicodeStringES4_PNS_7Support4Base13TFslStringSetEU9__closurePFvS4_S4_PNS3_7Classes7TStreamEEU9__closurePFvPNS3_7TObjectEibS4_E (Line 726, \"FHIR.Cache.PackageManager.pas\" + 20) + $0<br>\n(0000000003A262E1){FHIRServer.exe} [0000000003E272E1] FHIR.Server.Database._ZN4Fhir6Server8Database25TFHIRNativeStorageService10InitialiseEv (Line 5471, \"FHIR.Server.Database.pas\" + 139) + $0<br>\n(000000000422EAD0){FHIRServer.exe} [000000000462FAD0] FHIR.Server.Kernel._ZN4Fhir6Server6Kernel12TFHIRService20InitialiseRestServerENS_4Base7Objects12TFHIRVersionE (Line 871, \"FHIR.Server.Kernel.pas\" + 51) + $0<br>\n(000000000422B7DA){FHIRServer.exe} [000000000462C7DA] FHIR.Server.Kernel._ZN4Fhir6Server6Kernel12TFHIRService8CanStartEv (Line 453, \"FHIR.Server.Kernel.pas\" + 14) + $0<br>\n(00000000039C0C51){FHIRServer.exe} [0000000003DC1C51] FHIR.Support.Service._ZN4Fhir7Support7Service14TSystemService15InternalExecuteEv (Line 381, \"FHIR.Support.Service.pas\" + 3) + $14<br>\n(00000000039C0920){FHIRServer.exe} [0000000003DC1920] FHIR.Support.Service._ZN4Fhir7Support7Service14TSystemService14ConsoleExecuteEv (Line 312, \"FHIR.Support.Service.pas\" + 8) + $0<br>\n(000000000422A500){FHIRServer.exe} [000000000462B500] FHIR.Server.Kernel._ZN4Fhir6Server6Kernel17ExecuteFhirServerEv (Line 288, \"FHIR.Server.Kernel.pas\" + 114) + $C<br>\n(0000000004235CD0){FHIRServer.exe} [0000000004636CD0] FHIRServer._ZN10Fhirserver14initializationEv (Line 400, \"FHIRServer.dpr\" + 11) + $5<br>\n(0000000000016974){KERNEL32.DLL} [00007FFC28F27974] BaseThreadInitThunk + $14<br>\n(0000000000069271){ntdll.dll   } [00007FFC2943A271] RtlUserThreadStart + $21</p>",
        "id": 175038004,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1567749626
    },
    {
        "content": "<p>oh</p>",
        "id": 175038369,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1567750295
    },
    {
        "content": "<p>alright, try that change</p>",
        "id": 175040040,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1567752653
    },
    {
        "content": "<p>works</p>",
        "id": 175040737,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1567753629
    },
    {
        "content": "<p>now only one issue, i guess it is on me:</p>",
        "id": 175040743,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1567753639
    },
    {
        "content": "<p>which of these should I keep?</p>\n<div class=\"codehilite\"><pre><span></span>; fhir ini file, and documentation\n[database]\ntype=mysql\nserver=jctasus.local\ndatabase=fhirDB\nusername=sa\npassword=passs\ndriver=MySQL ODBC 5.3 Unicode Driver\n\n\n[databases]\ndbr4= server: jctasus.local; database: fhirDB; username: sa; password: pass; type: mysql; driver: &quot;MySQL ODBC 5.3 Unicode Driver&quot;; when-testing: true\n</pre></div>",
        "id": 175040824,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1567753723
    },
    {
        "content": "<p>[databases]</p>",
        "id": 175040848,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1567753769
    },
    {
        "content": "<p>now remount is failing. <br>\nI just deleted the DB, will start a clean one</p>",
        "id": 175041406,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1567754372
    },
    {
        "content": "<p>how is it failing?</p>",
        "id": 175041486,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1567754444
    },
    {
        "content": "<p>\"unknown version\"</p>",
        "id": 175042164,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1567755271
    },
    {
        "content": "<div class=\"codehilite\"><pre><span></span>[databases]\ndbr4= server: jctasus.local; database: fhirDB; username: sa; password: DBroot123; type: mysql; driver: &quot;MySQL ODBC 5.3 Unicode Driver&quot;; when-testing: true\n\n[endpoints]\nr4= path: /r4; validate: true; database: dbr4; version: r4\n;open= path: /r4; validate: true; database: dbr4; version: r4\n</pre></div>\n\n\n<p>before I had 2 endpoints on the same place which i guess messed up my db. but the  server was working</p>",
        "id": 175042212,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1567755347
    },
    {
        "content": "<p>now I want to remount this and I get that error</p>",
        "id": 175042261,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1567755366
    },
    {
        "content": "<p>where is that error?</p>",
        "id": 175042274,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1567755387
    },
    {
        "content": "<p>uninstallDatabase</p>",
        "id": 175042283,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1567755403
    },
    {
        "content": "<p>oh wait but the database is empty - just emptied it</p>",
        "id": 175042296,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1567755426
    },
    {
        "content": "<p>i will try with a mount only</p>",
        "id": 175042301,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1567755436
    },
    {
        "content": "<p>also fails</p>",
        "id": 175042414,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1567755552
    },
    {
        "content": "<div class=\"codehilite\"><pre><span></span>details := FIni.endpoints[name];\n...\n  else if details[&#39;version&#39;] = &#39;r4&#39; then\n    v := fhirVersionRelease4\n  else\n    raise EFslException.Create(&#39;unknown version &#39;+details[&#39;version&#39;]);\n</pre></div>",
        "id": 175042724,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1567755924
    },
    {
        "content": "<p>at this point, details['version'] is ''</p>",
        "id": 175042735,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1567755960
    },
    {
        "content": "<p>my ini says<br>\n[endpoints]<br>\nr4= path: /r4; validate: true; database: dbr4; version: r4</p>",
        "id": 175042776,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1567755966
    },
    {
        "content": "<p>ok, got it. I was using r4 as endpoint, but in the command line i was saying -endpoint open.<br>\nSorry, my bad.</p>",
        "id": 175043648,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1567756940
    },
    {
        "content": "<p><a href=\"/user_uploads/10155/Yk3ldwzteCSElKyPqGfwQQDc/pasted_image.png\" target=\"_blank\" title=\"pasted_image.png\">pasted image</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/Yk3ldwzteCSElKyPqGfwQQDc/pasted_image.png\" target=\"_blank\" title=\"pasted image\"><img src=\"/user_uploads/10155/Yk3ldwzteCSElKyPqGfwQQDc/pasted_image.png\"></a></div>",
        "id": 175048252,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1567761872
    },
    {
        "content": "<p>this is my out-of-the-box capstatement. Does this mean I cannot post anything? (because I tried and it failed). How to fix this?</p>",
        "id": 175048286,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1567761910
    },
    {
        "content": "<p>well, it's in the types table. I don't know why the install did read only</p>",
        "id": 175057068,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1567771030
    }
]