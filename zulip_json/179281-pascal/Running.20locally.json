[
    {
        "content": "<p>When I run locally (mapping port 8080 on localhost into my docker container's port 80)  I get a nice web page at <a href=\"http://localhost:8080/r4\">http://localhost:8080/r4</a>, but when I enter <a href=\"http://localhost:8080/r4/ValueSet\">http://localhost:8080/r4/ValueSet</a> I get a page showing:</p>\n<div class=\"codehilite\"><pre><span></span><code>302 Moved Temporarily\n</code></pre></div>\n\n<p>I don't see a Location header saying where it has moved to.</p>\n<p><a href=\"/user_uploads/10155/jAe32wFFVTmJ1cE8f6Gd_CHS/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/jAe32wFFVTmJ1cE8f6Gd_CHS/image.png\" title=\"image.png\"><img src=\"/user_uploads/10155/jAe32wFFVTmJ1cE8f6Gd_CHS/image.png\"></a></div>",
        "id": 258830140,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1635004761
    },
    {
        "content": "<p>Just confirming I have the same issue, also on other endpoints</p>",
        "id": 258831052,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1635005886
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191315\">@Josh Mandel</span> after creating the volume and container, I can run the application without downloading everythign again. However, when I need to change something (e.g. change the port, or use slightly different command line options, I don't know how to reuse the downloads. Can you help me?</p>",
        "id": 258833755,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1635009646
    },
    {
        "content": "<p>Functionally, the other thing I'd like to be able to create my own config file in my host and then point to it. I don't know docker enough to do that</p>",
        "id": 258833769,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1635009691
    },
    {
        "content": "<p>To be clear I'm not downloading eveirything again. The vocabularies are stable. It is the connections to <a href=\"http://packages.fhir.org\">packages.fhir.org</a> that get repeated each time.</p>",
        "id": 258835327,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1635011977
    },
    {
        "content": "<p>are you sure that you get a 302 without a location header? the server isn't capable of issuing one without the other</p>",
        "id": 258835375,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1635012005
    },
    {
        "content": "<p>as for packages, the relevant documentation is:</p>",
        "id": 258835428,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1635012042
    },
    {
        "content": "<p><a href=\"https://confluence.hl7.org/display/FHIR/FHIR+Package+Cache\">https://confluence.hl7.org/display/FHIR/FHIR+Package+Cache</a></p>",
        "id": 258835441,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1635012069
    },
    {
        "content": "<p>what you are seeing is a straight implementation of that</p>",
        "id": 258835447,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1635012079
    },
    {
        "content": "<p>looking at the  code, I'm pretty sure that you're getting redirected to <a href=\"http://localhost:80/r4/ValueSet/\">http://localhost:80/r4/ValueSet/</a></p>",
        "id": 258835942,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1635012743
    },
    {
        "content": "<p>I'm using another port (960), but the result is the same:<br>\n<a href=\"/user_uploads/10155/mOAJrPk65v3jWoRNGTtqrQE2/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/mOAJrPk65v3jWoRNGTtqrQE2/image.png\" title=\"image.png\"><img src=\"/user_uploads/10155/mOAJrPk65v3jWoRNGTtqrQE2/image.png\"></a></div>",
        "id": 258840829,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1635020267
    },
    {
        "content": "<p>(don't know if this helps)</p>",
        "id": 258841109,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1635020656
    },
    {
        "content": "<p>what happens if you request <a href=\"http://localhost:960/r4/ValueSet/\">http://localhost:960/r4/ValueSet/</a></p>",
        "id": 258841143,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1635020746
    },
    {
        "content": "<p><a href=\"http://localhost:960/r4/ValueSet/\">http://localhost:960/r4/ValueSet/</a> does the same as <a href=\"http://localhost:960/r4/ValueSet\">http://localhost:960/r4/ValueSet</a> (if that is the question)</p>",
        "id": 258841200,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1635020867
    },
    {
        "content": "<p><a href=\"/user_uploads/10155/OfFHk9ek_XmYxeL6l-Z7zX4V/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/OfFHk9ek_XmYxeL6l-Z7zX4V/image.png\" title=\"image.png\"><img src=\"/user_uploads/10155/OfFHk9ek_XmYxeL6l-Z7zX4V/image.png\"></a></div>",
        "id": 258841242,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1635020893
    },
    {
        "content": "<p>well, I don't have a clue what's going on here. I can't imagine where the 302 is coming from, or why it would happen without a location header - I simply can't see how either are possible in the code</p>",
        "id": 258841456,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1635021287
    },
    {
        "content": "<p>can you see the console output from the server, or find the server log file?</p>",
        "id": 258841522,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1635021367
    },
    {
        "content": "<p>(deleted)</p>",
        "id": 258841893,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1635022026
    },
    {
        "content": "<p>i think it's in /tmp</p>",
        "id": 258841970,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1635022145
    },
    {
        "content": "<p>It doesn't say much</p>",
        "id": 258841974,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1635022160
    },
    {
        "content": "<p>19:21:15 00:08:57 HTTP Caching is On<br>\n19:21:15 00:08:57 Start thread Server Maintenance Thread<br>\n19:21:21 00:09:03 started (543secs)<br>\n20:14:44 6-1  15ms 0MB #1 1:0 200 p R4: ??<br>\n20:14:45 6-2   0ms 0MB #1 1:0 404 p XX: Not Found<br>\n20:14:45 6-3   1ms 0MB #1 1:0 302 p R4: ??<br>\n20:14:45 6-4   0ms 0MB #1 1:0 200 p WS: Static File /assets/ico/favicon.png<br>\n20:14:51 6-5   1ms 0MB #1 1:0 302 p R4: ??<br>\n20:14:54 6-6   1ms 0MB #1 1:0 302 p R4: ??<br>\n20:14:56 6-7   0ms 0MB #1 1:0 302 p R4: ??<br>\n20:15:03 6-8   1ms 0MB #1 1:0 302 p R4: ??<br>\n20:26:45 6-9   0ms 0MB #1 1:0 302 p R4: ??<br>\n20:26:56 6-10   1ms 0MB #1 1:0 302 p R4: ??<br>\n20:27:05 6-11   0ms 0MB #1 1:0 302 p R4: ??<br>\n20:27:11 6-12   0ms 0MB #1 1:0 302 p R4: ??<br>\n20:27:21 6-13   1ms 0MB #1 1:0 302 p R4: ??<br>\n20:27:53 6-14   1ms 0MB #1 1:0 302 p R4: ??<br>\n20:49:38 6-15   0ms 0MB #1 1:0 302 p R4: ??<br>\n20:49:43 6-16   0ms 0MB #1 1:0 302 p R4: ??</p>",
        "id": 258842030,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1635022248
    },
    {
        "content": "<p>no. there's nothing to go on there</p>",
        "id": 258842802,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1635023312
    },
    {
        "content": "<p>what's your config file?</p>",
        "id": 258842928,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1635023465
    },
    {
        "content": "<p>the one online -https://storage.googleapis.com/tx-fhir-org/config.json</p>",
        "id": 258843423,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1635024331
    },
    {
        "content": "<p>none of this makes any sense. Neither the log nor the http response are possible</p>",
        "id": 258843572,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1635024602
    },
    {
        "content": "<p>you can't debug this?</p>",
        "id": 258843629,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1635024610
    },
    {
        "content": "<p>no, I don't have a linux machine where i could try the ide, sorry</p>",
        "id": 258844250,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1635025622
    },
    {
        "content": "<p>my linux box is just the docker container</p>",
        "id": 258844257,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1635025647
    },
    {
        "content": "<p>Seems i really should get me a linux box, right?</p>",
        "id": 258844260,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1635025672
    },
    {
        "content": "<p>well, it works fine under linux. whatever you're seeing is something to do with docker or running under docker</p>",
        "id": 258844541,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1635026106
    },
    {
        "content": "<p>If it helps you can try running \"docker exec\" to get a shell prompt running inside the same container as the server, just to try issuing some web requests from there and eliminate any variables</p>",
        "id": 258845923,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1635028136
    },
    {
        "content": "<p>I'm re-downloading after re-building</p>",
        "id": 258846030,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1635028306
    },
    {
        "content": "<p>Still same thing. versin is 1.9.396, which I presume is latest (because I think everything got rebuilt after I pulled from github)</p>",
        "id": 258848814,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1635033067
    },
    {
        "content": "<p>the log must be at least a little different</p>",
        "id": 258851329,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1635037342
    },
    {
        "content": "<p>log now has the IP address</p>\n<div class=\"codehilite\"><pre><span></span><code>23:49:05 2-3   0ms 0MB #1 1:0 302 p 172.17.0.1 R4: ??\n23:49:09 2-4   0ms 0MB #1 1:0 302 p 172.17.0.1 R4: ??\n</code></pre></div>",
        "id": 258865590,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1635062041
    },
    {
        "content": "<p>Meanwhile I'm going to use port 80 inside and outside docker, just to see if the port mapping may be causing any issue</p>",
        "id": 258865640,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1635062085
    },
    {
        "content": "<p>I don't know how to further check this or what to look for. I'll see if I can get some proper linux machine</p>",
        "id": 258865694,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1635062163
    },
    {
        "content": "<p>Even inside the docker container directly executing wget:</p>\n<div class=\"codehilite\"><pre><span></span><code> wget http://localhost:80/r4/ValueSet -O -\n^[[5~--2021-10-24 13:33:43--  http://localhost/r4/ValueSet\nResolving localhost (localhost)... 127.0.0.1, ::1\nConnecting to localhost (localhost)|127.0.0.1|:80... connected.\nHTTP request sent, awaiting response... 302 Moved Temporarily\nLocation: unspecified\nERROR: Redirection (302) without location.\n</code></pre></div>",
        "id": 258879103,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1635082441
    },
    {
        "content": "<p>Do you know how to change the port from 80 to something else? I think it was in the fhirserver.ini , now i don't know if it's in the command line or ini or config.json</p>",
        "id": 258894001,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1635103940
    },
    {
        "content": "<p>(just to run a test not on port 80 - shouldn't make a difference, but...)</p>",
        "id": 258894016,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1635103971
    },
    {
        "content": "<p>You should be able to set the <code>PORT</code> environment variable with <code>-e PORT=1234</code> which causes an ini file to be created on startup via <a href=\"https://github.com/HealthIntersections/fhirserver/blob/master/Dockerfile#L35\">https://github.com/HealthIntersections/fhirserver/blob/master/Dockerfile#L35</a></p>",
        "id": 258894107,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1635104112
    },
    {
        "content": "<p>web.ini is documented here: <a href=\"https://confluence.hl7.org/display/FHIR/Running+your+own+copy+of+tx.fhir.org\">https://confluence.hl7.org/display/FHIR/Running+your+own+copy+of+tx.fhir.org</a></p>",
        "id": 258894501,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1635104659
    },
    {
        "content": "<p>when I issue the query <a href=\"http://locallhost:962/r4\">http://locallhost:962/r4</a> this is the response the server returns:</p>",
        "id": 258895710,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1635106074
    },
    {
        "content": "<div class=\"codehilite\"><pre><span></span><code>HTTP/1.1 302 Moved Temporarily\nConnection: close\nContent-Type: text/html; charset=utf-8\nContent-Length: 54\nDate: Sun, 24 Oct 2021 20:07:33 GMT\nX-Request-Id: 28-7\nServer: Health Intersections FHIR Server\nLocation: /r4/\n\n&lt;HTML&gt;&lt;BODY&gt;&lt;B&gt;302 Moved Temporarily&lt;/B&gt;&lt;/BODY&gt;&lt;/HTML&gt;\n</code></pre></div>",
        "id": 258895755,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1635106086
    },
    {
        "content": "<p>to be clear: the server totally cannot return a 302 without a location header</p>",
        "id": 258895769,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1635106105
    },
    {
        "content": "<p>and the log will show:</p>",
        "id": 258895795,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1635106161
    },
    {
        "content": "<p><code>07:08:45 28-8   0ms 5454MB #1 1:0 302 p 127.0.0.1 R4: --&gt; redirect to /r4/</code></p>",
        "id": 258895811,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1635106173
    },
    {
        "content": "<p>and when I issue a search on <a href=\"http://local.fhir.org:965/r4/ValueSet\">http://local.fhir.org:965/r4/ValueSet</a> I get:</p>\n<div class=\"codehilite\"><pre><span></span><code>HTTP/1.1 200 OK\nConnection: close\nContent-Type: text/html; charset=ISO-8859-1\nContent-Length: 16404\nCache-control: public, max-age=600\nDate: Sun, 24 Oct 2021 20:16:50 GMT\nX-Request-Id: 29-4\nAccess-Control-Allow-Origin: *\nAccess-Control-Expose-Headers: Content-Location, Location\nAccess-Control-Allow-Methods: GET, POST, PUT, PATCH, DELETE\nX-GDPR-Disclosure: All access to this server is logged as AuditEvent Resources, and these store your ip address (and logged in user, if one exists). Also, your IP address is logged with Google Analytics for building geomaps of server usage. Your continued use of the API constitutes agreement to these terms. See [link] for erasure requests\nServer: Health Intersections FHIR Server\n\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot;\n       &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;\n...\n</code></pre></div>\n<p>Although it depends on the accept: header exactly what comes back</p>",
        "id": 258896182,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1635106677
    },
    {
        "content": "<p>I am connecting directly to the server and it is returning a response to my query... With a redirect status and no location header. I'm sure when we finally understand this, the explanation will fit all these clues :-)</p>",
        "id": 258903948,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1635117771
    },
    {
        "content": "<p>and what's in the log?</p>",
        "id": 258903956,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1635117811
    },
    {
        "content": "<p>the log should give me a clue as to where in the code to look, but the code is always this:</p>",
        "id": 258903962,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1635117828
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Delphi\"><pre><span></span><code>            <span class=\"n\">response</span><span class=\"o\">.</span><span class=\"n\">Redirect</span><span class=\"p\">(</span><span class=\"n\">request</span><span class=\"o\">.</span><span class=\"n\">Document</span><span class=\"o\">+</span><span class=\"s\">'/'</span><span class=\"p\">)</span><span class=\"o\">;</span>\n</code></pre></div>",
        "id": 258903963,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1635117831
    },
    {
        "content": "<p>which points to:</p>\n<div class=\"codehilite\" data-code-language=\"Delphi\"><pre><span></span><code>  <span class=\"n\">ResponseNo</span> <span class=\"o\">:=</span> <span class=\"mi\">302</span><span class=\"o\">;</span>\n  <span class=\"n\">Location</span> <span class=\"o\">:=</span> <span class=\"n\">AURL</span><span class=\"o\">;</span>\n</code></pre></div>",
        "id": 258904019,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1635117900
    },
    {
        "content": "<p>Good -- I will follow up with this information tonight</p>",
        "id": 258904031,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1635117922
    },
    {
        "content": "<p>When I do this wget inside the docker container:</p>\n<div class=\"codehilite\"><pre><span></span><code>#  wget --server-response  http://localhost:80/r4/ValueSet\n--2021-10-25 02:12:10--  http://localhost/r4/ValueSet\nResolving localhost (localhost)... 127.0.0.1, ::1\nConnecting to localhost (localhost)|127.0.0.1|:80... connected.\nHTTP request sent, awaiting response...\n  HTTP/1.1 302 Moved Temporarily\n  Connection: close\n  Content-Type: text/html; charset=utf-8\n  Content-Length: 54\n  Cache-control: no-cache, no-store, must-revalidate\n  Date: Mon, 25 Oct 2021 02:12:10 GMT\n  X-Request-Id: 4-4\n  Access-Control-Allow-Origin: *\n  Access-Control-Expose-Headers: Content-Location, Location\n  Access-Control-Allow-Methods: GET, POST, PUT, PATCH, DELETE\n  Server: Health Intersections FHIR Server\n  Set-Cookie: fhir-session-idx=implicit-2099600; Path=/; Domain=localhost; Max-Age=3561; Expires=Mon, 25-Oct-2021 03:11:31 GMT\nLocation: unspecified\nERROR: Redirection (302) without location.\n</code></pre></div>\n<p>... I get this in the server stdout:</p>\n<div class=\"codehilite\"><pre><span></span><code>02:12:10 4-4   0ms 0MB #1 1:0 302 p 127.0.0.1 R4: ??\n</code></pre></div>",
        "id": 258910517,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1635127974
    },
    {
        "content": "<p>There is no <code>Location</code> header in the http response.</p>",
        "id": 258910528,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1635128001
    },
    {
        "content": "<p>well, the problem was a compiler initialised variable that behaved differently on linux to windows</p>",
        "id": 258917829,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1635139290
    },
    {
        "content": "<p>I confirm that it's working now</p>",
        "id": 258942089,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1635158806
    },
    {
        "content": "<p>I see that gitbut is building the docker image. How can I get it ? what is the docker command line? if I do <code>docker run grahamegrieve/fhirserver</code> it doesn't find it (unless I build it locally). Is this image in a container repository?</p>",
        "id": 258965682,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1635171664
    },
    {
        "content": "<p>the CI build isn't currently pushing a built image anywhere, so you need to build locally.</p>",
        "id": 258975666,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1635175609
    },
    {
        "content": "<p>We plan to add \"push to container registry\" to the deployment process at least for tagged release</p>",
        "id": 258975705,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1635175627
    },
    {
        "content": "<p>(I hadn't seen your reply. Thanks <span class=\"user-mention\" data-user-id=\"191315\">@Josh Mandel</span> )</p>",
        "id": 258977784,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1635176451
    },
    {
        "content": "<p>I ran the windows build script, I get this in the toolkit2: <br>\n<a href=\"/user_uploads/10155/DZZrXP4I_RdKF-ybzYvhoTIL/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/DZZrXP4I_RdKF-ybzYvhoTIL/image.png\" title=\"image.png\"><img src=\"/user_uploads/10155/DZZrXP4I_RdKF-ybzYvhoTIL/image.png\"></a></div>",
        "id": 259009731,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1635190958
    },
    {
        "content": "<p>on windows?</p>",
        "id": 259009775,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1635190987
    },
    {
        "content": "<p>then this</p>",
        "id": 259009779,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1635190991
    },
    {
        "content": "<p><a href=\"/user_uploads/10155/PiJDMOj50b_JT3J5YYrp_vBB/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/PiJDMOj50b_JT3J5YYrp_vBB/image.png\" title=\"image.png\"><img src=\"/user_uploads/10155/PiJDMOj50b_JT3J5YYrp_vBB/image.png\"></a></div>",
        "id": 259009786,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1635190994
    },
    {
        "content": "<p>do you have the SSL dlls in your exec/64?</p>",
        "id": 259009805,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1635191006
    },
    {
        "content": "<p>and the icons are gone.</p>",
        "id": 259009820,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1635191015
    },
    {
        "content": "<p><a href=\"/user_uploads/10155/y4iLFUjqeklQV7DGI-BMpY8d/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/y4iLFUjqeklQV7DGI-BMpY8d/image.png\" title=\"image.png\"><img src=\"/user_uploads/10155/y4iLFUjqeklQV7DGI-BMpY8d/image.png\"></a></div>",
        "id": 259009821,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1635191017
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191316\">Grahame Grieve</span> <a href=\"#narrow/stream/179281-pascal/topic/Running.20locally/near/259009805\">said</a>:</p>\n<blockquote>\n<p>do you have the SSL dlls in your exec/64?</p>\n</blockquote>\n<p>Yes, on windows. the dlls are not there</p>",
        "id": 259009923,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1635191051
    },
    {
        "content": "<p>they are in exec\\pack\\w64</p>",
        "id": 259009961,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1635191071
    },
    {
        "content": "<p>the script doesn't do this and it should: copy files in exec\\pack and exec\\pack\\w64 into exec\\64</p>",
        "id": 259010082,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1635191135
    },
    {
        "content": "<p>did that, still same issue</p>",
        "id": 259010389,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1635191270
    },
    {
        "content": "<p><a href=\"/user_uploads/10155/weYe1ivz46IHspRJIQEbMaUU/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/weYe1ivz46IHspRJIQEbMaUU/image.png\" title=\"image.png\"><img src=\"/user_uploads/10155/weYe1ivz46IHspRJIQEbMaUU/image.png\"></a></div>",
        "id": 259010459,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1635191289
    },
    {
        "content": "<p>but you didn't copy the ssl dlls...</p>",
        "id": 259010570,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1635191351
    },
    {
        "content": "<p>no wait</p>",
        "id": 259010609,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1635191373
    },
    {
        "content": "<p>Yes, sorry, whong DLLs</p>",
        "id": 259010734,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1635191418
    },
    {
        "content": "<p>those are in build/tools</p>",
        "id": 259010763,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1635191428
    },
    {
        "content": "<p>libeay32 and ssleay32.dll, right?</p>",
        "id": 259010852,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1635191471
    },
    {
        "content": "<p>not right. libcrypto-1_1-x64 and libssl-1_1-x64 work.</p>",
        "id": 259011031,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1635191554
    },
    {
        "content": "<p>yes the lib* ones in exec/pack/w64</p>",
        "id": 259011811,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1635191884
    },
    {
        "content": "<p>there's nothing in the scripts about those. Where do we get them from?</p>",
        "id": 259012224,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1635192037
    },
    {
        "content": "<p>i mean, they are not in exec/pack/w64</p>",
        "id": 259012343,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1635192093
    },
    {
        "content": "<p>oh.</p>",
        "id": 259012448,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1635192126
    },
    {
        "content": "<p>added</p>",
        "id": 259012584,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1635192186
    },
    {
        "content": "<p>I'm testing the updated bat script</p>",
        "id": 259013944,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1635192772
    },
    {
        "content": "<p>what about the icons?</p>",
        "id": 259014148,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1635192848
    },
    {
        "content": "<p>any idea how I can get them to show?</p>",
        "id": 259014179,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1635192863
    },
    {
        "content": "<p>I have no idea why they aren't showing. Are you still getting errors at start up?</p>",
        "id": 259015024,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1635193242
    },
    {
        "content": "<p>let me see how it is after the full build</p>",
        "id": 259015331,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1635193387
    },
    {
        "content": "<p>btw, can i remove the pauses in the windows-all script?</p>\n<div class=\"codehilite\" data-code-language=\"Batchfile\"><pre><span></span><code><span class=\"k\">call</span> windows-toolchain.bat <span class=\"nv\">%tmp%</span>\n<span class=\"k\">pause</span>\n\n<span class=\"k\">call</span> windows-libraries.bat <span class=\"nv\">%tmp%</span>\n<span class=\"k\">pause</span>\n\n<span class=\"k\">call</span> windows-fhirserver.bat <span class=\"nv\">%tmp%</span>\n<span class=\"k\">pause</span>\n</code></pre></div>",
        "id": 259015790,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1635193575
    },
    {
        "content": "<p>yes</p>",
        "id": 259017396,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1635194358
    },
    {
        "content": "<p>they were there for me to check that the current directory was correct</p>",
        "id": 259017433,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1635194381
    },
    {
        "content": "<p>Which one of these exec\\64 do we want to use?</p>",
        "id": 259063127,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1635235009
    },
    {
        "content": "<p><a href=\"/user_uploads/10155/f2QzGISQHRAd4LDGgVouytOv/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/f2QzGISQHRAd4LDGgVouytOv/image.png\" title=\"image.png\"><img src=\"/user_uploads/10155/f2QzGISQHRAd4LDGgVouytOv/image.png\"></a></div>",
        "id": 259063129,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1635235010
    },
    {
        "content": "<p>the script seems to be creating the files onto exec\\64</p>",
        "id": 259063216,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1635235064
    },
    {
        "content": "<p>i took the bit for copying the dlls from the .sh scripts and those are pointing to exec\\64, but those scripts are running from the build folder, so they would try to find the files relative to that (where they don't exist)</p>",
        "id": 259063363,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1635235177
    },
    {
        "content": "<p>I just ask to make sure that I can correct the bat files</p>",
        "id": 259063384,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1635235194
    },
    {
        "content": "<p>there's not supposed to be any files under /build</p>",
        "id": 259077732,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1635244445
    },
    {
        "content": "<p>the bat files assume they are being run from the /build directory, and they pay attention to directories already</p>",
        "id": 259077757,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1635244469
    },
    {
        "content": "<p>Ok I added the missing <code>..\\</code></p>",
        "id": 259078939,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1635245342
    },
    {
        "content": "<p><a href=\"https://github.com/HealthIntersections/fhirserver/tree/windows-build-scripts\">https://github.com/HealthIntersections/fhirserver/tree/windows-build-scripts</a></p>",
        "id": 259107016,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1635259408
    }
]