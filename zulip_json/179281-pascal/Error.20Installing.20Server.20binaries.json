[
    {
        "content": "<p>Hello, I'm having trouble installing the server binaries.</p>",
        "id": 177196078,
        "sender_full_name": "Claudio Regonat",
        "timestamp": 1570053233
    },
    {
        "content": "<p>ok sure. the install is rough</p>",
        "id": 177196593,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1570053565
    },
    {
        "content": "<p>I'm waiting the installer to see exactly what is the error...</p>",
        "id": 177197357,
        "sender_full_name": "Claudio Regonat",
        "timestamp": 1570054021
    },
    {
        "content": "<p>Ok, the error is: Initializing the database failed: Error: \"The name hasExtension is not a valid function name\"...</p>",
        "id": 177198208,
        "sender_full_name": "Claudio Regonat",
        "timestamp": 1570054756
    },
    {
        "content": "<p>line 1 col 47 in \"QuestionnaireResponse.item.where(....</p>",
        "id": 177198290,
        "sender_full_name": "Claudio Regonat",
        "timestamp": 1570054805
    },
    {
        "content": "<p>the installer is that from <a href=\"http://www.healthintersections.com.au/FhirServer/\" target=\"_blank\" title=\"http://www.healthintersections.com.au/FhirServer/\">http://www.healthintersections.com.au/FhirServer/</a>, trying to setup a R4 server because I've to implement a client solution.</p>",
        "id": 177198427,
        "sender_full_name": "Claudio Regonat",
        "timestamp": 1570054963
    },
    {
        "content": "<blockquote>\n<p>The name hasExtension is not a valid function name</p>\n</blockquote>\n<p>hmm</p>",
        "id": 177198903,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1570055504
    },
    {
        "content": "<p>yes</p>",
        "id": 177198958,
        "sender_full_name": "Claudio Regonat",
        "timestamp": 1570055539
    },
    {
        "content": "<p>that i'll have to debug - it looks like it is a valid function name</p>",
        "id": 177199019,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1570055636
    },
    {
        "content": "<p>ok, I've been playing with the github code, mostly with the client part. So I was trying to setup a server to play with it. I'm using SQLServer express.</p>",
        "id": 177199186,
        "sender_full_name": "Claudio Regonat",
        "timestamp": 1570055783
    },
    {
        "content": "<p>Where can I see that initialization code? Can I help with the debug part?</p>",
        "id": 177199300,
        "sender_full_name": "Claudio Regonat",
        "timestamp": 1570055916
    },
    {
        "content": "<p>well, maybe. that code arises during start up when it checks that all the invariants compile ok. And it looks like it should be valid... so I don't expect it will be an easy debug</p>",
        "id": 177200293,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1570056935
    },
    {
        "content": "<p>Would it be useful to get the no-install version of the server for Claudio in the meanwhile?</p>",
        "id": 177214812,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1570078174
    },
    {
        "content": "<p>could help. but that code runs in any contexts. I'll be able to look at it on the plane no Sunday</p>",
        "id": 177215501,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1570079295
    },
    {
        "content": "<blockquote>\n<p>Would it be useful to get the no-install version of the server for Claudio in the meanwhile?</p>\n</blockquote>\n<p>I've compiled the server from sources, and tried to configure and install from the command line, but I'm having trouble with the -mount command. Is there any documented procedure to install mannually?</p>",
        "id": 177291822,
        "sender_full_name": "Claudio Regonat",
        "timestamp": 1570139371
    },
    {
        "content": "<p>If I run \"fhirserver -mount\" the result is \"No -cmd parameter - exiting now\"</p>",
        "id": 177292404,
        "sender_full_name": "Claudio Regonat",
        "timestamp": 1570139812
    },
    {
        "content": "<p>you need to do -exec mount</p>",
        "id": 177293013,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1570140295
    },
    {
        "content": "<p>sorry, -cmd mount</p>",
        "id": 177293024,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1570140304
    },
    {
        "content": "<p>ok, I've found that on older messages. Thanks.</p>",
        "id": 177293782,
        "sender_full_name": "Claudio Regonat",
        "timestamp": 1570140913
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"239329\">@Claudio Regonat</span>  got it working?</p>",
        "id": 177295414,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1570142528
    },
    {
        "content": "<p>no, not yet.</p>",
        "id": 177295521,
        "sender_full_name": "Claudio Regonat",
        "timestamp": 1570142683
    },
    {
        "content": "<p>ok, mounted the DB with r4 endpoint, got the db populated with tables, but the server doesn't start.</p>",
        "id": 177296838,
        "sender_full_name": "Claudio Regonat",
        "timestamp": 1570143872
    },
    {
        "content": "<p>ok here are the commands that i use, these work:<br>\nto mount/remount:<br>\nFHIRServer.exe -cmd remount -password sa -ini \".\\fhirserver.ini\" -packages hl7.fhir.core#4.0.0 -endpoint r4 -mode open</p>",
        "id": 177296950,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1570143990
    },
    {
        "content": "<p>to start:<br>\nFHIRServer.exe -cmd exec -ini \".\\fhirserver.ini\"</p>",
        "id": 177296984,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1570144028
    },
    {
        "content": "<p>so, how is your fhirserver.ini?</p>",
        "id": 177297000,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1570144051
    },
    {
        "content": "<p>Ok,  I'll uninstall the service, and try with that command.<br>\nIt's the ini:<br>\n<a href=\"/user_uploads/10155/wZXAQY2JjquWHH9NE_9MS_rZ/fhirserver.ini\" target=\"_blank\" title=\"fhirserver.ini\">fhirserver.ini</a></p>",
        "id": 177297098,
        "sender_full_name": "Claudio Regonat",
        "timestamp": 1570144153
    },
    {
        "content": "<p>does look ok from here...</p>",
        "id": 177297292,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1570144368
    },
    {
        "content": "<p>If I run your command I get <br>\n \"You must provide a admin passowrd as a parameter to the command\"</p>",
        "id": 177297383,
        "sender_full_name": "Claudio Regonat",
        "timestamp": 1570144473
    },
    {
        "content": "<p>hmm i swear i had it working.</p>",
        "id": 177297505,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1570144577
    },
    {
        "content": "<p>Sorry, wrong command. It now asks for an Authorization file</p>",
        "id": 177297517,
        "sender_full_name": "Claudio Regonat",
        "timestamp": 1570144592
    },
    {
        "content": "<blockquote>\n<p>asks for an Authorization file</p>\n</blockquote>\n<p>What is the exact wording?</p>",
        "id": 177297642,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1570144711
    },
    {
        "content": "<p>\"No authorization file found\"</p>",
        "id": 177297663,
        "sender_full_name": "Claudio Regonat",
        "timestamp": 1570144740
    },
    {
        "content": "<p>according the source, you need this in your ini file:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"k\">[web]</span>\n<span class=\"na\">clients</span><span class=\"o\">=</span><span class=\"s\">[file]</span>\n</pre></div>\n\n\n<p>where file is the name of an ini file that can be empty</p>",
        "id": 177297774,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1570144832
    },
    {
        "content": "<p>right. in the files that come with the installer, this is auth.ini</p>",
        "id": 177297909,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1570144962
    },
    {
        "content": "<p>Well, I'm having an AV: FHIR.Ucum.Services._ZN4Fhir4Ucum8Services13TUcumServices... (Line 409, \"FHIR.Ucum.Services.pas\" + 5) while mounting the database.</p>",
        "id": 177304639,
        "sender_full_name": "Claudio Regonat",
        "timestamp": 1570154335
    },
    {
        "content": "<p>this is something I need to sort out - the infrastructure assumes that UCUM is loaded. So you have to have a line in your ini file like</p>",
        "id": 177304771,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1570154527
    },
    {
        "content": "<div class=\"codehilite\"><pre><span></span><span class=\"k\">[terminologies]</span>\n<span class=\"na\">ucum</span><span class=\"o\">=</span><span class=\"s\">type: ucum; source: C:\\work\\fhirserver\\Exec\\ucum-essence.xml; when-testing: true</span>\n</pre></div>",
        "id": 177304783,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1570154573
    },
    {
        "content": "<p>ok, let's try again. Thanks for your help.</p>",
        "id": 177305118,
        "sender_full_name": "Claudio Regonat",
        "timestamp": 1570155149
    },
    {
        "content": "<p>Another error: Attempt to reuse ODBC connection \"BuildIndexes\" while it is in use.</p>",
        "id": 177305721,
        "sender_full_name": "Claudio Regonat",
        "timestamp": 1570156175
    },
    {
        "content": "<p>the server starts ok, and seems to work ok...</p>",
        "id": 177305789,
        "sender_full_name": "Claudio Regonat",
        "timestamp": 1570156269
    },
    {
        "content": "<p>ok thanks. That's a background error that will re-occur but won't be noticeable to the clients unless they perform a particular kind of terminology query</p>",
        "id": 177306415,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1570157409
    },
    {
        "content": "<p>so I can't reproduce that. If you can reproduce it, can you debug it? (specifically, tell me, what is the value of FSQL on the connection that is prepared (line 1021 FHIR.Database.Manager)</p>",
        "id": 177308862,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1570161976
    },
    {
        "content": "<blockquote>\n<p>so I can't reproduce that. If you can reproduce it, can you debug it? (specifically, tell me, what is the value of FSQL on the connection that is prepared (line 1021 FHIR.Database.Manager)</p>\n</blockquote>\n<p>well, I can't reproduce it. All seems to work ok now. Thanks.</p>",
        "id": 177377110,
        "sender_full_name": "Claudio Regonat",
        "timestamp": 1570221642
    },
    {
        "content": "<p>ok thanks.</p>",
        "id": 177377402,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1570221865
    },
    {
        "content": "<p>it's one of those cases where I'm actually  disappointed that it works <span aria-label=\"sweat\" class=\"emoji emoji-1f613\" role=\"img\" title=\"sweat\">:sweat:</span></p>",
        "id": 177377448,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1570221911
    },
    {
        "content": "<blockquote>\n<p>it's one of those cases where I'm actually  disappointed that it works <span aria-label=\"sweat\" class=\"emoji emoji-1f613\" role=\"img\" title=\"sweat\">:sweat:</span></p>\n</blockquote>\n<p>Yes, I agree.... Could be that the ODBC connection doesn't get released some times? Maybe during debug phase, the connection has more time to be freed?.</p>\n<p>Another question, this maybe unrelated. How can I install packages from <a href=\"http://simplifier.net\" target=\"_blank\" title=\"http://simplifier.net\">simplifier.net</a> to my local server?. I've tried with package manager with the server manager. it installs to the system cache, or user cache, but the server doesn't load these packages.</p>",
        "id": 177521058,
        "sender_full_name": "Claudio Regonat",
        "timestamp": 1570456432
    },
    {
        "content": "<p>it loads during install only, using -packages</p>",
        "id": 177523602,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1570458087
    },
    {
        "content": "<p>Grahame, trying to install <a href=\"http://simplifier.net\" target=\"_blank\" title=\"http://simplifier.net\">simplifier.net</a>, I've to remount the db and the error happened again. As debuggin with the IDE it doesn't happen, I've logged the SQL: Update ValueSets set NeedsIndexing = 0, Error = 'Unable to locate code 223366009' where ValueSetKey = 7 ... Hope this would be useful.</p>",
        "id": 177559747,
        "sender_full_name": "Claudio Regonat",
        "timestamp": 1570481692
    },
    {
        "content": "<p>great. found the problem.</p>",
        "id": 177572684,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1570492962
    },
    {
        "content": "<p>thanks</p>",
        "id": 177572685,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1570492964
    }
]