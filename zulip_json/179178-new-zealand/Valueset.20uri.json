[
    {
        "content": "<p>Currently the Uri we're using for ethnicity valueset is <a href=\"https://standards.digital.health.nz/valueset/ethnic-group-level-4\" target=\"_blank\" title=\"https://standards.digital.health.nz/valueset/ethnic-group-level-4\">https://standards.digital.health.nz/valueset/ethnic-group-level-4</a> </p>\n<p>Any objection to using http rather than https? ie  <em>http://standards.digital.health.nz/valueset/ethnic-group-level-4</em><br>\n and - while we're at it - making it a bit more aligned with FHIR names - so:</p>\n<p><a href=\"http://standards.digital.health.nz/fhir/ValueSet/ethnic-group-level-4\" target=\"_blank\" title=\"http://standards.digital.health.nz/fhir/ValueSet/ethnic-group-level-4\">http://standards.digital.health.nz/fhir/ValueSet/ethnic-group-level-4</a> </p>\n<p>(which, I believe, was an issue you had <span class=\"user-mention\" data-user-id=\"191364\">@Peter Jordan</span> - and one I've come to appreciate as I've been working more closely with them!)</p>\n<p>(Same for CodeSystems)...</p>",
        "id": 173068350,
        "sender_full_name": "David Hay",
        "timestamp": 1565649793
    },
    {
        "content": "<p>The uri for the related Value Set should be a canonical identifier and represent the definitive source of truth (aka 'master copy') for the location of that ValueSet. Ultimately, that's for the owner of the underlying Code System to determine; so I'm agnostic on whether it should be http or https. However, if you wish that uri to resolve to a definition of that Value Set, then the uri you're proposing looks good.</p>\n<p>Obviously, it's permissible for other servers to hold copies of that ValueSet - e.g <a href=\"https://terminz.azurewebsites.net/fhir/ValueSet/NzEthnicityL4\" target=\"_blank\" title=\"https://terminz.azurewebsites.net/fhir/ValueSet/NzEthnicityL4\">https://terminz.azurewebsites.net/fhir/ValueSet/NzEthnicityL4</a></p>\n<p>Once you've decided on this, I will change the name property of that ValueSet accordingly and put the definitive source in the valueSet (canonical) property of the underlying CodeSystem resource on my Server.</p>",
        "id": 173070290,
        "sender_full_name": "Peter Jordan",
        "timestamp": 1565651584
    },
    {
        "content": "<p>It's mostly that having 'codesystem' in the url is confusing (at least, I find it so)...</p>",
        "id": 173072847,
        "sender_full_name": "David Hay",
        "timestamp": 1565654518
    },
    {
        "content": "<p>Fully agree.  I did push-back against having the Naming System kind in those urls - particularly when it's a lower case version of a FHIR Resource name. That was bound to cause confusion. I could say more, but probably shouldn't on here!</p>",
        "id": 173073847,
        "sender_full_name": "Peter Jordan",
        "timestamp": 1565655662
    },
    {
        "content": "<p>Yeah - I now understand why you objected! Can we add this to the next HISO meeting <span class=\"user-mention\" data-user-id=\"194931\">@Alastair Kenworthy</span> ?</p>",
        "id": 173077584,
        "sender_full_name": "David Hay",
        "timestamp": 1565660563
    },
    {
        "content": "<p>We need https because these are resolvable<br>\n'codesystem 'I've seen contracted to 'cs', if you want something shorter<br>\nValue sets could be denoted ValueSet or valueset or vs<br>\nYes, we can discuss at HISO - and also the day before at the meds workshop, because we should make it a priority to identify the namespaces we need for meds</p>",
        "id": 173092630,
        "sender_full_name": "Alastair Kenworthy",
        "timestamp": 1565682022
    },
    {
        "content": "<p>well, none of the urls in the spec use https (as the canonical url) so that should be solvable...</p>\n<p>wrt the content of the url , the problem with using something like \"...codesystem...\"  is that it is enormously confusing when you are using it - at least that's how I've found it working on the NHI / HPI project. It's close enough to the API (but different) to be really confusing...</p>\n<p>I'd like to see something like, say, <a href=\"http://standards.digital.health.nz/fhir/ValueSet/{name}\" target=\"_blank\" title=\"http://standards.digital.health.nz/fhir/ValueSet/{name}\">http://standards.digital.health.nz/fhir/ValueSet/{name}</a> for a ValueSet so it's quite explicit that it is a ValueSet resource that is being indicated (and uses the standard FHIR API to resolve it)...</p>",
        "id": 173095511,
        "sender_full_name": "David Hay",
        "timestamp": 1565685025
    },
    {
        "content": "<blockquote>\n<p>We need https because these are resolvable<br>\n'codesystem 'I've seen contracted to 'cs', if you want something shorter<br>\nValue sets could be denoted ValueSet or valueset or vs<br>\nYes, we can discuss at HISO - and also the day before at the meds workshop, because we should make it a priority to identify the namespaces we need for meds</p>\n</blockquote>\n<p>Since when have http end points not been resolvable?<br>\nWith regard to Code Systems - in this context I believe that we are discussing Naming System Identifiers for those Code Systems, in which case creating an identifier that looks rather like an instance of a CodeSystem Resource is not a great idea - cs would be preferable.<br>\nIn the case of Value Sets we are NOT talking about Naming System Identifiers (valueset is not a NamingSystem Type) . Instead, we are looking at Canonical URLs that resolve to the 'master copy' of a FHIR ValueSet resource. Therefore, there is no question that the URL should contain 'ValueSet' - anything else and it won't be a valid FHIR endpoint.<br>\nWRT to Namespaces for 'Meds', I wonder if anyone who has actually implemented a working FHIR Terminology Services API for NZMT (or AMT for that matter) will be at that 'workshop'? Better still, this should be discussed on an open forum, such as here, rather than behind closed doors. For starters, take  a look at this...<br>\n<a href=\"https://terminz.azurewebsites.net/fhir/NamingSystem/NZMT\" target=\"_blank\" title=\"https://terminz.azurewebsites.net/fhir/NamingSystem/NZMT\">https://terminz.azurewebsites.net/fhir/NamingSystem/NZMT</a></p>",
        "id": 173098823,
        "sender_full_name": "Peter Jordan",
        "timestamp": 1565688575
    },
    {
        "content": "<p>So let's take a real example. </p>\n<ul>\n<li>I created a CodeSystem for iwi with a url of <a href=\"http://standards.digital.health.nz/fhir/CodeSystem/nziwi\" target=\"_blank\" title=\"http://standards.digital.health.nz/fhir/CodeSystem/nziwi\">http://standards.digital.health.nz/fhir/CodeSystem/nziwi</a> </li>\n<li>Then, I created a ValueSet with a url of <a href=\"http://standards.digital.health.nz/fhir/ValueSet/nziwi\" target=\"_blank\" title=\"http://standards.digital.health.nz/fhir/ValueSet/nziwi\">http://standards.digital.health.nz/fhir/ValueSet/nziwi</a> that has a <em>compose.include.system</em> that refers to <a href=\"http://standards.digital.health.nz/fhir/CodeSystem/nziwi\" target=\"_blank\" title=\"http://standards.digital.health.nz/fhir/CodeSystem/nziwi\">http://standards.digital.health.nz/fhir/CodeSystem/nziwi</a> </li>\n</ul>\n<p>My thinking is that both of these (CodeSystem and ValueSet) could resolve once the infrastructure was in place (ie <a href=\"http://standards.digital.health.nz/fhir\" target=\"_blank\" title=\"http://standards.digital.health.nz/fhir\">http://standards.digital.health.nz/fhir</a>).</p>\n<p>Does that seem reasonable?</p>\n<p>I didn't create a NamingSystem for the CodeSystem, but if I did so, then it would have a .kind of 'codesystem' and a .uniqueId with .type='uri' and a .value of <a href=\"http://standards.digital.health.nz/fhir/CodeSystem/nziwi\" target=\"_blank\" title=\"http://standards.digital.health.nz/fhir/CodeSystem/nziwi\">http://standards.digital.health.nz/fhir/CodeSystem/nziwi</a> The .id could be anything - though nziwi would be consistent</p>\n<p>agree?</p>\n<p>The CodeSystem and ValueSet are on Ontoserver (<a href=\"https://ontoserver.csiro.au/stu3-latest/\" target=\"_blank\" title=\"https://ontoserver.csiro.au/stu3-latest/\">https://ontoserver.csiro.au/stu3-latest/</a>) if you want to take a look...</p>\n<p>(btw - quite happy for the actual names to be challenged - they're in the model at <a href=\"http://nz.clinfhir.com\" target=\"_blank\" title=\"http://nz.clinfhir.com\">nz.clinfhir.com</a> - I just want to get everything working so they can be reviewed)</p>",
        "id": 173138704,
        "sender_full_name": "David Hay",
        "timestamp": 1565721107
    },
    {
        "content": "<p>Have you been to a website with 'http' lately?<br>\nTo avoid any confusion, 'cs' is an option others have taken and we could too<br>\nWe had a pattern for these namespaces, there was discord in the process but I thought we had agreement, and now it seems everyone has their own personal favourite approach</p>",
        "id": 173143138,
        "sender_full_name": "Alastair Kenworthy",
        "timestamp": 1565724371
    },
    {
        "content": "<p>Well, the use of 'http:' seems to be what most other IG's are using - take a look at US-Core for example... (or the other guides in <a href=\"http://fhir.org\" target=\"_blank\" title=\"http://fhir.org\">fhir.org</a>) - so would be good to be consistent with that. - <a href=\"http://hl7.org/fhir/us/core/STU3/index.html\" target=\"_blank\" title=\"http://hl7.org/fhir/us/core/STU3/index.html\">http://hl7.org/fhir/us/core/STU3/index.html</a></p>\n<p>wrt canonical URL's - yes, 'cs' seemed fine - until I actually started using it and got horribly confused at times... So I think we should use a full URL - again like US Core does: <a href=\"http://hl7.org/fhir/us/core/STU3/ValueSet-omb-race-category.html\" target=\"_blank\" title=\"http://hl7.org/fhir/us/core/STU3/ValueSet-omb-race-category.html\">http://hl7.org/fhir/us/core/STU3/ValueSet-omb-race-category.html</a></p>\n<p>After all, this is all about 'doing it for real' to see if our assumptions were correct - and being prepared to change if not...</p>",
        "id": 173149536,
        "sender_full_name": "David Hay",
        "timestamp": 1565728844
    },
    {
        "content": "<p>I'm happy with David's proposal, apart from the NamingSystem uri for the 'codesystem' kind. IMHO, this should not be the URL of a FHIR CodeSystem resource - instead, it should be a canonical identifier for the code system (i.e. CodeSystem.url). We discussed this in today's SNOMED on FHIR call and I am going to put in a gForge Tracker to suggest that this distinction be clarified in the FHIR specification.</p>",
        "id": 173160237,
        "sender_full_name": "Peter Jordan",
        "timestamp": 1565738161
    },
    {
        "content": "<p>Here's what I would suggest for a NamingSystem</p>\n<div class=\"codehilite\"><pre><span></span>{\n  &quot;resourceType&quot;:&quot;NamingSystem&quot;,\n  &quot;name&quot;:&quot;NZ_IWI&quot;,\n  &quot;status&quot;:&quot;active&quot;,\n  &quot;kind&quot;:&quot;codesystem&quot;,\n  &quot;date&quot;:&quot;2019-08-14&quot;,\n  &quot;description&quot;:&quot;The identifiers for a CodeSystem containing the NZ IWI concepts&quot;,\n  &quot;uniqueId&quot;: [\n    {\n        &quot;type&quot;:&quot;uri&quot;,\n        &quot;value&quot;:&quot;http://standards.digital.health.nz/fhir/CodeSystem/nziwi&quot;\n    }\n\n\n    ]\n}\n</pre></div>",
        "id": 173161501,
        "sender_full_name": "David Hay",
        "timestamp": 1565739521
    },
    {
        "content": "<p>Disagree. A per my previous post, that value should not be the URL of a FHIR CodeSystem resource - it should be what is in the CodeSystem.url property of the relevant CodeSystem resource - something like <a href=\"https://standards.digital.health.nz/cs/nziwi\" target=\"_blank\" title=\"https://standards.digital.health.nz/cs/nziwi\">https://standards.digital.health.nz/cs/nziwi</a>.</p>\n<p>If it helps in making that distinction, consider that many NamingSystem identifiers for code systems are not FHIR-specific. An obvious example is  <a href=\"http://snomed.info/sct\" target=\"_blank\" title=\"http://snomed.info/sct\">http://snomed.info/sct</a></p>",
        "id": 173161783,
        "sender_full_name": "Peter Jordan",
        "timestamp": 1565739786
    },
    {
        "content": "<p>Hold on - I thought we agreed above the the CodeSystem.url value would be <a href=\"http://standards.digital.health.nz/fhir/CodeSystem/nziwi\" target=\"_blank\" title=\"http://standards.digital.health.nz/fhir/CodeSystem/nziwi\">http://standards.digital.health.nz/fhir/CodeSystem/nziwi</a> - like others do when a CodeSystem is not already defined - eg <a href=\"http://hl7.org/fhir/us/core/STU3/CodeSystem-condition-category.html\" target=\"_blank\" title=\"http://hl7.org/fhir/us/core/STU3/CodeSystem-condition-category.html\">http://hl7.org/fhir/us/core/STU3/CodeSystem-condition-category.html</a> ?</p>",
        "id": 173162472,
        "sender_full_name": "David Hay",
        "timestamp": 1565740480
    },
    {
        "content": "<p>The ones created to date resolve to Web Pages - rather than FHIR CodeSystem resources - e.g. <br>\n<a href=\"https://standards.digital.health.nz/codesystem/ethnic-group-level-4\" target=\"_blank\" title=\"https://standards.digital.health.nz/codesystem/ethnic-group-level-4\">https://standards.digital.health.nz/codesystem/ethnic-group-level-4</a></p>\n<p>We have to be mindful of code systems that are not FHIR-specific. Not to mention the fact that there is no FHIR endpoint on that domain.</p>",
        "id": 173163251,
        "sender_full_name": "Peter Jordan",
        "timestamp": 1565741264
    },
    {
        "content": "<p>And be mindful of when you're talking about URIs and when you're talking about URLs.<br>\nIt is \"nice\" if URIs are resolvable, but not required. Furthermore, the resolution process can redirect (eg from an http-based URI to an https-based URL).</p>\n<p>(sorry to drop in late -- this just presses my URIs are not URLs button)</p>",
        "id": 191609265,
        "sender_full_name": "Michael Lawley",
        "timestamp": 1585056814
    },
    {
        "content": "<p>Indeed. Code System URIs are identifiers and one might expect to see them in NamingSystem Resources where the Identifier Type is uri.  OTOH, Code System URLs are locations and  one would expect to see the Canonical URL of a Code System in the url property of all instances of the related CodeSystem Resource.</p>",
        "id": 191654811,
        "sender_full_name": "Peter Jordan",
        "timestamp": 1585075119
    },
    {
        "content": "<p>Hi all, I've been searching to see if there's a defined extension for capturing Ethnicity and Iwi against the Patient resource (esp. for NZ). Seems this thread is one of the closest. Can anyone point me to anything already agreed/done around extensions to Patient for these two? TIA, Marcus</p>",
        "id": 238080782,
        "sender_full_name": "Marcus Shirrefs",
        "timestamp": 1620615608
    },
    {
        "content": "<p>A FHIR API for the NZ NHI (National Health Index) is due to be published very shortly and the Patient Profile contains extensions, and associated terminology resources, for NZ Ethnicity and Iwi. <span class=\"user-mention\" data-user-id=\"191321\">@David Hay</span> has worked on this, and may be able to provide an update. The proposed national extension for Ethnicity can be found <a href=\"http://hl7.org.nz/fhir/StructureDefinition/nz-ethnicity\">here</a>, but its status is only draft at this stage.</p>",
        "id": 238085821,
        "sender_full_name": "Peter Jordan",
        "timestamp": 1620621084
    },
    {
        "content": "<p>Thanks for the update <span class=\"user-mention\" data-user-id=\"191364\">@Peter Jordan</span> . Looked at the proposed extension. Not sure if I'm reading it right, but looks like it is targeted for Patient and Practitioner. Does that mean RelatedPerson and Person aren't getting it <span class=\"user-mention\" data-user-id=\"191321\">@David Hay</span> ?</p>",
        "id": 238258351,
        "sender_full_name": "Marcus Shirrefs",
        "timestamp": 1620714815
    },
    {
        "content": "<p>Well, it's a draft proposal so not yet discussed by the HL7NZ committee. No technical reason why not - do you have a use case where this is required? ie where Patient / Practitioner is not appropriate?</p>",
        "id": 238258677,
        "sender_full_name": "David Hay",
        "timestamp": 1620715017
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191321\">@David Hay</span>  No, no use case for those other two at this stage. Just looking forwards. Just thinking out loud, perhaps via RelatedPerson you might seek to trace Ethnicity or Iwi relationship / inheritance? e.g. My \"Welsh\" component of ethnicity comes from RelatedPerson.relationship = mother. But I have no use case for that atm.</p>",
        "id": 238258988,
        "sender_full_name": "Marcus Shirrefs",
        "timestamp": 1620715308
    },
    {
        "content": "<p>No worries - further contexts can always be added if needed...</p>",
        "id": 238270685,
        "sender_full_name": "David Hay",
        "timestamp": 1620722106
    }
]