[
    {
        "content": "<p>I have isolated two problems with IG Publisher and Bundles<br>\n1) Some bundles are not showing up in Artifacts, when they should<br>\n2) A List resource in a Bundle with a .subject that is populated will crash the publisher</p>",
        "id": 240668798,
        "sender_full_name": "John Moehrke",
        "timestamp": 1622242103
    },
    {
        "content": "<p>I have created a Test IG that ONLY contains the problem bundle</p>",
        "id": 240668854,
        "sender_full_name": "John Moehrke",
        "timestamp": 1622242145
    },
    {
        "content": "<p>GitHub <a href=\"https://github.com/JohnMoehrke/testBundle\">https://github.com/JohnMoehrke/testBundle</a></p>",
        "id": 240668864,
        "sender_full_name": "John Moehrke",
        "timestamp": 1622242149
    },
    {
        "content": "<p>Build <a href=\"http://build.fhir.org/ig/JohnMoehrke/testBundle/branches/main/Bundle-ex-dummyProvideDocumentBundle.html\">http://build.fhir.org/ig/JohnMoehrke/testBundle/branches/main/Bundle-ex-dummyProvideDocumentBundle.html</a></p>",
        "id": 240668874,
        "sender_full_name": "John Moehrke",
        "timestamp": 1622242162
    },
    {
        "content": "<p>To see the #2 problem, take the comments off of line 9 of the patieht.fsh file</p>",
        "id": 240668960,
        "sender_full_name": "John Moehrke",
        "timestamp": 1622242216
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span></p>",
        "id": 240668997,
        "sender_full_name": "John Moehrke",
        "timestamp": 1622242255
    },
    {
        "content": "<p>I do not think this is a Sushi problem. I think it is creating the json properly</p>",
        "id": 240669136,
        "sender_full_name": "John Moehrke",
        "timestamp": 1622242361
    },
    {
        "content": "<p>#1 I think is just pending a release.  What's the stack trace for #2?</p>",
        "id": 240670155,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1622243371
    },
    {
        "content": "<p>yes, I understood #1 was already pending. I created this for #2, and just happened to observe it also showed 1</p>",
        "id": 240701526,
        "sender_full_name": "John Moehrke",
        "timestamp": 1622293922
    },
    {
        "content": "<p>Failed build <a href=\"http://build.fhir.org/ig/JohnMoehrke/testBundle/branches/main/failure/build.log\">http://build.fhir.org/ig/JohnMoehrke/testBundle/branches/main/failure/build.log</a></p>\n<div class=\"codehilite\"><pre><span></span><code>onGenerate.extend:\n\nonGenerate:\nException in thread &quot;main&quot; java.lang.Error: Wrong node type - node is Text (&#39;null/Subject: &#39;)\n    at org.hl7.fhir.utilities.xhtml.XhtmlNode.addTag(XhtmlNode.java:200)\n    at org.hl7.fhir.utilities.xhtml.XhtmlNode.ah(XhtmlNode.java:642)\n    at org.hl7.fhir.r5.renderers.ResourceRenderer.renderReference(ResourceRenderer.java:187)\n    at org.hl7.fhir.r5.renderers.ResourceRenderer.renderReference(ResourceRenderer.java:172)\n    at org.hl7.fhir.r5.renderers.ListRenderer.shortForRef(ListRenderer.java:205)\n    at org.hl7.fhir.r5.renderers.ListRenderer.render(ListRenderer.java:129)\n    at org.hl7.fhir.r5.renderers.ListRenderer.render(ListRenderer.java:33)\n    at org.hl7.fhir.r5.renderers.ResourceRenderer.build(ResourceRenderer.java:55)\n    at org.hl7.fhir.r5.renderers.BundleRenderer.render(BundleRenderer.java:298)\n    at org.hl7.fhir.igtools.publisher.Publisher.getXhtml(Publisher.java:8048)\n    at org.hl7.fhir.igtools.publisher.Publisher.saveDirectResourceOutputs(Publisher.java:7367)\n    at org.hl7.fhir.igtools.publisher.Publisher.generateHtmlOutputs(Publisher.java:6800)\n    at org.hl7.fhir.igtools.publisher.Publisher.generate(Publisher.java:5000)\n    at org.hl7.fhir.igtools.publisher.Publisher.createIg(Publisher.java:901)\n    at org.hl7.fhir.igtools.publisher.Publisher.execute(Publisher.java:745)\n    at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:8577)\n</code></pre></div>",
        "id": 240701558,
        "sender_full_name": "John Moehrke",
        "timestamp": 1622293956
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> is this an IG publisher problem? Should I create an issue?</p>",
        "id": 240938963,
        "sender_full_name": "John Moehrke",
        "timestamp": 1622553134
    },
    {
        "content": "<p>no idea. I haven't investigated yet</p>",
        "id": 240941861,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1622554352
    },
    {
        "content": "<p>Note that adding to the List a .text extensions will also prevent the crash</p>",
        "id": 241138614,
        "sender_full_name": "John Moehrke",
        "timestamp": 1622635406
    },
    {
        "content": "<p>fixed next release</p>",
        "id": 241337232,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1622680978
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191316\">Grahame Grieve</span> <a href=\"#narrow/stream/179252-IG-creation/topic/IG.20Publisher.20problems.20with.20Bundles/near/241337232\">said</a>:</p>\n<blockquote>\n<p>fixed next release</p>\n</blockquote>\n<p>Has this been fixed in the meantime? I ask because I have the problem at the element List.encounter.</p>",
        "id": 264057686,
        "sender_full_name": "Michaela Ziegler",
        "timestamp": 1638904968
    },
    {
        "content": "<p>how do I reproduce?</p>",
        "id": 264057896,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1638905063
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191316\">Grahame Grieve</span> <a href=\"#narrow/stream/179252-IG-creation/topic/IG.20Publisher.20problems.20with.20Bundles/near/264057896\">said</a>:</p>\n<blockquote>\n<p>how do I reproduce?</p>\n</blockquote>\n<p><a href=\"https://github.com/ahdis/scs-versandservice/tree/master\">ahdis/scs-versandservice: master</a><br>\n<a href=\"http://build.fhir.org/ig/ahdis/scs-versandservice/branches/master/failure/build.log\">build logs</a></p>",
        "id": 264058310,
        "sender_full_name": "Michaela Ziegler",
        "timestamp": 1638905259
    },
    {
        "content": "<p>fixed next release - I overlooked making the relevant change on one line of code</p>",
        "id": 264098315,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1638925653
    }
]