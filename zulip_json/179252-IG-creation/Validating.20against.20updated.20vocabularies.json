[
    {
        "content": "<p>In my IG, I have a couple of code elements set to the LOINC 95418-0. This appears to cause the IG build to fail because it isn't in the release of LOINC known to <a href=\"http://tx.fhir.org\">tx.fhir.org</a>. Is there a way to change the release an IG is validated against?</p>\n<div class=\"codehilite\"><pre><span></span><code>The code &quot;95420-6&quot; is not valid in the system http://loinc.org; The code provided (http://loinc.org#95420-6) is not valid in the value set &#39;All codes known to the system&#39; (from http://tx.fhir.org/r4) for &#39;http://loinc.org#95420-6&#39; (see Tx log)\n</code></pre></div>",
        "id": 207695640,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1598052538
    },
    {
        "content": "<p>no. it's a matter of asking <span class=\"user-mention\" data-user-id=\"191405\">@Rob Hausam</span> to update the version of LOINC known to the server</p>",
        "id": 207695666,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1598052566
    },
    {
        "content": "<p>I'll do it today.</p>",
        "id": 207723547,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1598101280
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191405\">@Rob Hausam</span>  I have a couple of terms that are failing. Do you need a list, or are you just going to grab the latest?</p>",
        "id": 207738041,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1598123411
    },
    {
        "content": "<p>It will be upgraded to 2.68 (2020-06-17).</p>",
        "id": 207738213,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1598123708
    },
    {
        "content": "<p>We may want to consider whether we can or should find a way to include the pre-release terms - but that's another discussion and I think would be a separate step.</p>",
        "id": 207738361,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1598123987
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191380\">@Elliot Silver</span> OK.  I should have done some further checking before I responded earlier.  The <a href=\"http://tx.fhir.org\">tx.fhir.org</a> server upgrade to LOINC 2.68 was done last month.  I verified (by spot check) that new concepts that were added in that release are being validated by the server as expected.  So yes, if you can share the terms that are failing we can try to figure out what is going on - but it should be working for anything that is included in LOINC 2.68.</p>",
        "id": 207739992,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1598126642
    },
    {
        "content": "<p>Codes <code>95418-0</code> and <code>95420-6</code> are not valid LOINC codes.  The LOINC search site also doesn't find them (see queries for <a href=\"https://search.loinc.org/searchLOINC/search.zul?query=95418-0\">95418-0</a> and <a href=\"https://search.loinc.org/searchLOINC/search.zul?query=95420-6\">95420-6</a>).</p>",
        "id": 207740265,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1598127085
    },
    {
        "content": "<p><a href=\"https://loinc.org/95418-0/\">https://loinc.org/95418-0/</a> seems to work.</p>",
        "id": 207740395,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1598127300
    },
    {
        "content": "<p>As does <a href=\"https://loinc.org/95420-6/\">https://loinc.org/95420-6/</a></p>",
        "id": 207740423,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1598127350
    },
    {
        "content": "<p>Yes, they \"work\" in one sense - in that they resolve on a Web page.  But it's the issue that I described, as they are both pre-release codes - meaning that they haven't been included in any officially published LOINC version yet.  We've had some recent discussions with Regenstrief about how they will represent that, and that leads to some considerations about how we might handle that - but that is definitely not concluded yet.</p>",
        "id": 207740569,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1598127554
    },
    {
        "content": "<p>hmm. OK, I guess I need to look at how to suppress the error for now then.</p>",
        "id": 207740712,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1598127741
    },
    {
        "content": "<p>These codes, as pre-release, aren't even guaranteed to <strong>ever</strong> show up in an official LOINC release (although I expect that these will be in the next 2.69 release).  And yes, if you need to use them now, which you can, you probably will need to suppress the warning messages (they shouldn't cause an actual error - if they do, we should investigate that).</p>",
        "id": 207740731,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1598127825
    },
    {
        "content": "<p>You also should keep in mind that anyone receiving your data may have no idea what these codes are - and if they validate the data they might legitimately flag them as in error.  If they are included explicitly in your IG (assuming that's what you are doing), then that should be clear and likely wouldn't be a significant problem.</p>",
        "id": 207740971,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1598128239
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191405\">Rob Hausam</span> <a href=\"#narrow/stream/179252-IG-creation/topic/Validating.20against.20updated.20vocabularies/near/207740731\">said</a>:</p>\n<blockquote>\n<p>(they shouldn't cause an actual error - if they do, we should investigate that).</p>\n</blockquote>\n<p>It appears to be causing actual error:</p>\n<div class=\"codehilite\"><pre><span></span><code>The code &quot;95420-6&quot; is not valid in the system http://loinc.org; The code provided (http://loinc.org#95420-6) is not valid in the value set &#39;All codes known to the system&#39; (from http://tx.fhir.org/r4) for &#39;http://loinc.org#95420-6&#39; (see Tx log)\n</code></pre></div>",
        "id": 207741224,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1598128739
    },
    {
        "content": "<p>Yes, it is an \"error\" from the terminology server perspective (the source of that message - in the build and the Tx log).  But it shouldn't cause an error in the IG build itself (I think it should be a warning).  Does that make sense?</p>",
        "id": 207741347,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1598128957
    },
    {
        "content": "<p>It shows up as an error for the resource in the QA file, and in the error count at the end of the IG publisher run.</p>",
        "id": 207741413,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1598129100
    },
    {
        "content": "<p>Can you post a link to (or copy of) the qa file?</p>",
        "id": 207741492,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1598129232
    },
    {
        "content": "<p>One reason for asking is that I don't believe (unless it's changed) it's possible to suppress actual build error messages.</p>",
        "id": 207741544,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1598129299
    },
    {
        "content": "<p>Let me check it in -- hold on.</p>",
        "id": 207741554,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1598129327
    },
    {
        "content": "<p>it should be an error in the qa file but it shouldn't stop the IG from building ok</p>",
        "id": 207741691,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1598129557
    },
    {
        "content": "<p>If by \"shouldn't stop the IG from building OK\" you mean \"doesn't cause the publisher to crash\",  then, correct, it doesn't stop the IG from building OK.</p>",
        "id": 207741783,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1598129709
    },
    {
        "content": "<p>OK, QA file:</p>\n<p>Details: <a href=\"http://build.fhir.org/ig/openhie/covid-ig/branches/master/build.log\">build logs</a> | <a href=\"http://build.fhir.org/ig/openhie/covid-ig/branches/master/index.html\">published</a> | <a href=\"http://build.fhir.org/ig/openhie/covid-ig/branches/master/qa.html\">qa: broken links = 2, errors = 6, warn = 24, info = 0</a></p>",
        "id": 207741838,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1598129781
    },
    {
        "content": "<p>The \"code xxxxx not valid in the system\" messages that I've seen (in IPS and elsewhere) show up as Severity = warning.</p>",
        "id": 207741839,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1598129784
    },
    {
        "content": "<p>Yes, yours are indeed showing up as errors.  I haven't yet rebuild IPS with the latest publisher, so ours might be that way now, too.  I think that having them as warnings is more appropriate (unless I'm missing something).</p>",
        "id": 207741930,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1598129965
    },
    {
        "content": "<p>it's an error if you use a code that isn't a valid code. You might choose to publish anyway, but I won't be changing the validator to make that a warning</p>",
        "id": 207741986,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1598130012
    },
    {
        "content": "<p>So, does that presume that it was previously a warning (as I said) and that you changed it to be an error?</p>",
        "id": 207742017,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1598130082
    },
    {
        "content": "<p>I'm pretty sure that it's always been an error. There are other circumstances where you might get a warning - unknown code system, for instance</p>",
        "id": 207742057,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1598130124
    },
    {
        "content": "<p>I'm pretty sure that I've never seen \"code xxxxx not valid in the system\" show up as an error before, in working with several different IGs (of course nowhere near all of them), and a large number of publisher versions.  Here's an IPS example (from Publisher 1.1.2):</p>\n<div class=\"codehilite\"><pre><span></span><code>/scratch/ig-build-temp-LP1SY2/repo/input/vocabulary/valueset-snomed-intl-gps.xml\nPath    Severity    Message\nValueSet/snomed-intl-gps: ValueSet  Process Info    Validate resource against profile http://hl7.org/fhir/StructureDefinition/ValueSet\nValueSet/snomed-intl-gps: ValueSet.compose[0].include[0].concept[10440] warning The code 133797003 is not valid in the system http://snomed.info/sct version http://snomed.info/sct/900000000000207008/version/20190731\nValueSet/snomed-intl-gps: ValueSet.compose[0].include[0].concept[18458] warning The code 426417003 is not valid in the system http://snomed.info/sct version http://snomed.info/sct/900000000000207008/version/20190731\nValueSet/snomed-intl-gps: ValueSet  Process Info    Validate resource against profile http://hl7.org/fhir/StructureDefinition/shareablevalueset - listed in meta\n</code></pre></div>",
        "id": 207742239,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1598130407
    },
    {
        "content": "<p>yes it's a warning on value set compose, rather than when you use it in a Coding.</p>",
        "id": 207742265,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1598130478
    },
    {
        "content": "<p>Now that I know it is supposed to be an error, I can work with that.<br>\nOn a related issue, I get an intermittent warning that about validating various jurisdiction elements using <a href=\"http://unstats.un.org/unsd/methods/m49/m49.htm#001\">http://unstats.un.org/unsd/methods/m49/m49.htm#001</a>. I don't have the warning handy right now, but I don't think the value set can be expanded.</p>",
        "id": 207742468,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1598130796
    },
    {
        "content": "<p>Yes, that's a difference.  I don't have anything that I recall with this situation with Coding.  Elliot's examples show how this is potentially problematic (unless ignorable as you suggested) with the LOINC pre-release codes.  But it also may presume things about terminology server versus data instance code system version differences that could also be problematic.</p>",
        "id": 207742476,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1598130832
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span>  If an IG needs to use an officially released version of a code system that the build terminology server doesn't (yet) support, then a request should be made for updating the server to support that version of the code system.  Correct?</p>",
        "id": 207742813,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1598131442
    },
    {
        "content": "<p>yes</p>",
        "id": 207743187,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1598132235
    },
    {
        "content": "<p>I still suspect we will need to figure out a better general solution (other than ignoring build errors) for dealing with the LOINC pre-release codes.  The conclusion from the latest discussion (that I'm aware of) with Regenstrief on the May 29 LIVD <a href=\"https://confluence.hl7.org/display/OO/OO+Conf+Call+Minutes+-+LIVD%3A+May+29%2C+2020\">call</a> is that they will use <code>[NextVersion]-pre</code> as the version for these codes.  So, since the current released LOINC version is <code>2.68</code>, the (currently 120) codes listed on the pre-release <a href=\"https://loinc.org/prerelease/\">page</a> would have the version <code>2.69-pre</code>.  It doesn't appear to me that they have implemented this on their FHIR endpoint yet, as the codes that Elliot referenced (e.g., <a href=\"https://fhir.loinc.org/CodeSystem/$lookup?system=http://loinc.org&amp;code=95420-6\">95420-6</a>) aren't found.</p>",
        "id": 207743973,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1598133885
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span>, am I correct that you can't actually suppress errors with ignoreWarnings.txt?</p>",
        "id": 207746017,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1598137762
    },
    {
        "content": "<p>yes</p>",
        "id": 207747413,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1598140518
    }
]