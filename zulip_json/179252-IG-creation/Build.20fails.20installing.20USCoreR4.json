[
    {
        "content": "<p>My local works but the build server fails with the following:<br>\nInstalling hl7.fhir.us.core.r4#current to the package cache<br>\n  Fetching:Publishing Content Failed: null                                                  (34.0172sec)<br>\n                                                                                 (34.0172sec)<br>\nUse -? to get command line help                                                  (34.0172sec)<br>\n                                                                                 (34.0172sec)<br>\nStack Dump (for debugging):                                                      (34.0172sec)<br>\njava.lang.NullPointerException<br>\n    at java.base/java.io.FilterInputStream.markSupported(FilterInputStream.java:242)<br>\n    at org.apache.commons.compress.compressors.gzip.GzipCompressorInputStream.&lt;init&gt;(GzipCompressorInputStream.java:160)<br>\n    at org.apache.commons.compress.compressors.gzip.GzipCompressorInputStream.&lt;init&gt;(GzipCompressorInputStream.java:131)<br>\n    at org.hl7.fhir.utilities.cache.PackageCacheManager.unPackage(PackageCacheManager.java:414)<br>\n    at org.hl7.fhir.utilities.cache.PackageCacheManager.addPackageToCache(PackageCacheManager.java:348)<br>\n    at org.hl7.fhir.utilities.cache.PackageCacheManager.loadPackage(PackageCacheManager.java:607)<br>\n    at org.hl7.fhir.igtools.publisher.Publisher.resolveDependency(Publisher.java:2183)<br>\n    at org.hl7.fhir.igtools.publisher.Publisher.loadIg(Publisher.java:2152)<br>\n    at org.hl7.fhir.igtools.publisher.Publisher.initializeFromJson(Publisher.java:1667)<br>\n    at org.hl7.fhir.igtools.publisher.Publisher.initialize(Publisher.java:1117)<br>\n    at org.hl7.fhir.igtools.publisher.Publisher.execute(Publisher.java:601)<br>\n    at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:6101)<br>\nException in thread \"main\" java.lang.NullPointerException<br>\n    at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:6111)<br>\nDo I need to do anything about this?</p>",
        "id": 168084723,
        "sender_full_name": "David Pyke",
        "timestamp": 1560459620
    },
    {
        "content": "<p>It is being published and I realized the npm name still had r4 in it  -  it is now <code>hl7.fhir.us.core.#current</code></p>",
        "id": 168088182,
        "sender_full_name": "Eric Haas",
        "timestamp": 1560462651
    },
    {
        "content": "<p>Quit breaking things!</p>",
        "id": 168096416,
        "sender_full_name": "David Pyke",
        "timestamp": 1560471620
    },
    {
        "content": "<p>it had to be done...</p>",
        "id": 168102709,
        "sender_full_name": "Eric Haas",
        "timestamp": 1560480930
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191401\">@Eric Haas</span> Are you still making changes today? One of my IGs was running error free a couple hours ago, but now has dozens of US Core related errors. There is a Da Vinci ballot deadline tonight, so changes today are very problematic.</p>",
        "id": 168365131,
        "sender_full_name": "Rick Geimer",
        "timestamp": 1560826546
    },
    {
        "content": "<p>Or perhaps the terminology server is down? <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> <br>\nThe IG publisher can't seem to resolve <a href=\"http://hl7.org/fhir/us/core/CodeSystem/us-core-documentreference-category\" target=\"_blank\" title=\"http://hl7.org/fhir/us/core/CodeSystem/us-core-documentreference-category\">http://hl7.org/fhir/us/core/CodeSystem/us-core-documentreference-category</a></p>",
        "id": 168365529,
        "sender_full_name": "Rick Geimer",
        "timestamp": 1560827068
    },
    {
        "content": "<p>which IG is this?</p>",
        "id": 168365562,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1560827149
    },
    {
        "content": "<p>CDex. Actually I think it is that dependsOn.uri issue again. Getting this error:</p>\n<p>ImplementationGuide/davinci-cdex: ImplementationGuide.dependsOn[2].uri  <br>\nerror   <br>\nURL value '<a href=\"http://hl7.org/fhir/us/core/ImplementationGuide/hl7.fhir.us.core-3.0.0\" target=\"_blank\" title=\"http://hl7.org/fhir/us/core/ImplementationGuide/hl7.fhir.us.core-3.0.0\">http://hl7.org/fhir/us/core/ImplementationGuide/hl7.fhir.us.core-3.0.0</a>' does not resolve</p>",
        "id": 168365979,
        "sender_full_name": "Rick Geimer",
        "timestamp": 1560827782
    },
    {
        "content": "<p>That's the cannonical URL from the US Core R4 ImplementationGuide resource. That bug  was fixed, now seems to be broken again. <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span></p>",
        "id": 168366000,
        "sender_full_name": "Rick Geimer",
        "timestamp": 1560827841
    },
    {
        "content": "<p>use the package not the canonical URL</p>",
        "id": 168366060,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1560827922
    },
    {
        "content": "<p>The spec says it is the cannonical URL. We discussed this last week.<br>\n<a href=\"http://hl7.org/fhir/implementationguide-definitions.html#ImplementationGuide.dependsOn.uri\" target=\"_blank\" title=\"http://hl7.org/fhir/implementationguide-definitions.html#ImplementationGuide.dependsOn.uri\">http://hl7.org/fhir/implementationguide-definitions.html#ImplementationGuide.dependsOn.uri</a></p>",
        "id": 168366074,
        "sender_full_name": "Rick Geimer",
        "timestamp": 1560827993
    },
    {
        "content": "<p>You fixed it, now it seems to be unfixed.</p>",
        "id": 168366122,
        "sender_full_name": "Rick Geimer",
        "timestamp": 1560828013
    },
    {
        "content": "<p>if you want to use the canonical just use '<a href=\"http://hl7.org/fhir/us/core\" target=\"_blank\" title=\"http://hl7.org/fhir/us/core\">http://hl7.org/fhir/us/core</a></p>",
        "id": 168366144,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1560828077
    },
    {
        "content": "<p>Doesn't work. We store the ImplementationGuide resource in HAPI, and it will only accept the cannonical URL.</p>",
        "id": 168366159,
        "sender_full_name": "Rick Geimer",
        "timestamp": 1560828109
    },
    {
        "content": "<p>well, that's an impasse</p>",
        "id": 168366216,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1560828147
    },
    {
        "content": "<p>Yeah. It's not valid per the spec. Are we saying every resource but ImplementationGuide needs to follow the rules?</p>",
        "id": 168366235,
        "sender_full_name": "Rick Geimer",
        "timestamp": 1560828213
    },
    {
        "content": "<p>For tonight I can just hack the raw XML and commit to github, but we need a long term fix.</p>",
        "id": 168366302,
        "sender_full_name": "Rick Geimer",
        "timestamp": 1560828311
    },
    {
        "content": "<p>Maybe the IG publisher should accept both the package and the cannonical URL until R5, when hopefully we either remove dependsOn.uri or state that it should be the package id?</p>",
        "id": 168366314,
        "sender_full_name": "Rick Geimer",
        "timestamp": 1560828360
    },
    {
        "content": "<p>I have not touched us core since last week when I updated the package-list.json for publishing.</p>",
        "id": 168367009,
        "sender_full_name": "Eric Haas",
        "timestamp": 1560829452
    },
    {
        "content": "<p>Yeah, sorry Eric, false alarm. Is an IG publisher dependency issue, not anything you did.</p>",
        "id": 168367097,
        "sender_full_name": "Rick Geimer",
        "timestamp": 1560829646
    },
    {
        "content": "<p>here is the ig.xml url :<br>\n<code>  &lt;url value=\"http://hl7.org/fhir/us/core/ImplementationGuide/hl7.fhir.us.core-3.0.0\"/&gt;</code></p>",
        "id": 168367163,
        "sender_full_name": "Eric Haas",
        "timestamp": 1560829714
    },
    {
        "content": "<p>np</p>",
        "id": 168367166,
        "sender_full_name": "Eric Haas",
        "timestamp": 1560829718
    },
    {
        "content": "<p>Yes, that's what I am using, but the publisher can't resolve the dependency if you use the actual cannonical URL in ImplementationGuide.dependsOn.uri. It seems to expect it to be the package id or absent, but the spec says the uri is required (1..1) and must be the full cannonical URL of an ImplementationGuide resource.</p>",
        "id": 168367258,
        "sender_full_name": "Rick Geimer",
        "timestamp": 1560829847
    },
    {
        "content": "<p>which IG is this?</p>",
        "id": 168368267,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1560831338
    },
    {
        "content": "<p>Da Vinci CDex</p>",
        "id": 168368664,
        "sender_full_name": "Rick Geimer",
        "timestamp": 1560831909
    },
    {
        "content": "<p><a href=\"http://build.fhir.org/ig/HL7/davinci-ecdx\" target=\"_blank\" title=\"http://build.fhir.org/ig/HL7/davinci-ecdx\">build.fhir.org/ig/HL7/davinci-ecdx</a></p>",
        "id": 168368693,
        "sender_full_name": "Rick Geimer",
        "timestamp": 1560831963
    },
    {
        "content": "<p>For now I have manually hacked the IG resource to have a package id in ImplementationGuide.dependsOn.uri so that it builds.</p>",
        "id": 168368732,
        "sender_full_name": "Rick Geimer",
        "timestamp": 1560831995
    },
    {
        "content": "<p>Also getting an error due to the <a href=\"https://cts.nlm.nih.gov/fhir/ValueSet/YOUR-FAVORITE-OID\" target=\"_blank\" title=\"https://cts.nlm.nih.gov/fhir/ValueSet/YOUR-FAVORITE-OID\">https://cts.nlm.nih.gov/fhir/ValueSet/YOUR-FAVORITE-OID</a> issue, but I will let Melva know that that is a known issue per our discussion last Wednesday at Dev Days.</p>",
        "id": 168368758,
        "sender_full_name": "Rick Geimer",
        "timestamp": 1560832066
    },
    {
        "content": "<p>looking at it now... the infrastructure expects it to be <a href=\"http://hl7.org/fhir/us/core/ImplementationGuide/ig\" target=\"_blank\" title=\"http://hl7.org/fhir/us/core/ImplementationGuide/ig\">http://hl7.org/fhir/us/core/ImplementationGuide/ig</a></p>",
        "id": 168372036,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1560837198
    },
    {
        "content": "<p>not <a href=\"http://hl7.org/fhir/us/core/ImplementationGuide/hl7.fhir.us.core-3.0.0\" target=\"_blank\" title=\"http://hl7.org/fhir/us/core/ImplementationGuide/hl7.fhir.us.core-3.0.0\">http://hl7.org/fhir/us/core/ImplementationGuide/hl7.fhir.us.core-3.0.0</a></p>",
        "id": 168372042,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1560837212
    },
    {
        "content": "<p>If you look at the actual ImplementationGuide resource for US Core R4 it is <a href=\"http://hl7.org/fhir/us/core/ImplementationGuide/hl7.fhir.us.core-3.0.0\" target=\"_blank\" title=\"http://hl7.org/fhir/us/core/ImplementationGuide/hl7.fhir.us.core-3.0.0\">http://hl7.org/fhir/us/core/ImplementationGuide/hl7.fhir.us.core-3.0.0</a>. Not sure where you are getting <a href=\"http://hl7.org/fhir/us/core/ImplementationGuide/ig\" target=\"_blank\" title=\"http://hl7.org/fhir/us/core/ImplementationGuide/ig\">http://hl7.org/fhir/us/core/ImplementationGuide/ig</a>, it was changed a while ago</p>",
        "id": 168373936,
        "sender_full_name": "Rick Geimer",
        "timestamp": 1560839822
    },
    {
        "content": "<p>Is the infrastructure caching old URIs?</p>",
        "id": 168373943,
        "sender_full_name": "Rick Geimer",
        "timestamp": 1560839872
    },
    {
        "content": "<p>See <a href=\"https://github.com/HL7/US-Core-R4/blob/master/source/resources/ig.xml\" target=\"_blank\" title=\"https://github.com/HL7/US-Core-R4/blob/master/source/resources/ig.xml\">https://github.com/HL7/US-Core-R4/blob/master/source/resources/ig.xml</a></p>\n<p>The ImplementationGuide.url element is set to <a href=\"http://hl7.org/fhir/us/core/ImplementationGuide/hl7.fhir.us.core-3.0.0\" target=\"_blank\" title=\"http://hl7.org/fhir/us/core/ImplementationGuide/hl7.fhir.us.core-3.0.0\">http://hl7.org/fhir/us/core/ImplementationGuide/hl7.fhir.us.core-3.0.0</a></p>",
        "id": 168374046,
        "sender_full_name": "Rick Geimer",
        "timestamp": 1560840011
    },
    {
        "content": "<p>Maybe the file name of that resource should be hl7.fhir.us.core-3.0.0.xml instead of ig.xml?</p>",
        "id": 168374063,
        "sender_full_name": "Rick Geimer",
        "timestamp": 1560840051
    },
    {
        "content": "<p>no. it's a caching problem somewhere. It's fine now</p>",
        "id": 168374243,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1560840356
    },
    {
        "content": "<p>I just had to clear my cache. The package cache doesn't deal very well with something that happened there</p>",
        "id": 168374286,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1560840378
    },
    {
        "content": "<p>Yeah, which is another vote for Sean's request for an IG Publisher option to clear the package cache</p>",
        "id": 168374677,
        "sender_full_name": "Rick Geimer",
        "timestamp": 1560840877
    },
    {
        "content": "<p>As we often have to manually delete the whole folder on the Trifolia server</p>",
        "id": 168374693,
        "sender_full_name": "Rick Geimer",
        "timestamp": 1560840908
    },
    {
        "content": "<p>Will the CI build be updated (and the package cleared) soon? Would like to get a correct IG resource pushed before the night is over.</p>",
        "id": 168374982,
        "sender_full_name": "Rick Geimer",
        "timestamp": 1560841312
    },
    {
        "content": "<p>from the next version :<br>\n -clear-packages <br>\nwill clear the cache.</p>",
        "id": 168375064,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1560841399
    },
    {
        "content": "<p>I don't have a way to clear the cache on the ci-build</p>",
        "id": 168375067,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1560841407
    },
    {
        "content": "<p>ok, will keep hacking the ig resource before commits for now if the error persists</p>",
        "id": 168375141,
        "sender_full_name": "Rick Geimer",
        "timestamp": 1560841523
    },
    {
        "content": "<p>no. don't hack it. The real build won't be done on the ci-build, so it won't be an issue</p>",
        "id": 168375219,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1560841593
    },
    {
        "content": "<p>ok</p>",
        "id": 168375234,
        "sender_full_name": "Rick Geimer",
        "timestamp": 1560841626
    },
    {
        "content": "<p>But the QA will have a bunch of errors, so I will let Melva know.</p>",
        "id": 168375243,
        "sender_full_name": "Rick Geimer",
        "timestamp": 1560841652
    },
    {
        "content": "<p>I on;y get one other error?</p>",
        "id": 168375252,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1560841672
    },
    {
        "content": "<p>Hang on, will commit with the <a href=\"http://hl7.org/fhir/us/core/ImplementationGuide/hl7.fhir.us.core-3.0.0\" target=\"_blank\" title=\"http://hl7.org/fhir/us/core/ImplementationGuide/hl7.fhir.us.core-3.0.0\">http://hl7.org/fhir/us/core/ImplementationGuide/hl7.fhir.us.core-3.0.0</a> URI shortly.</p>",
        "id": 168375328,
        "sender_full_name": "Rick Geimer",
        "timestamp": 1560841799
    },
    {
        "content": "<p>All working now. Clean QA file. Thanks Grahame!<br>\n<a href=\"http://build.fhir.org/ig/HL7/davinci-ecdx/branches/master/qa.html\" target=\"_blank\" title=\"http://build.fhir.org/ig/HL7/davinci-ecdx/branches/master/qa.html\">http://build.fhir.org/ig/HL7/davinci-ecdx/branches/master/qa.html</a></p>",
        "id": 168375824,
        "sender_full_name": "Rick Geimer",
        "timestamp": 1560842401
    },
    {
        "content": "<p>Will move on to the HL7 Publication checks and Melva's checklist to wrap this IG up.</p>",
        "id": 168375887,
        "sender_full_name": "Rick Geimer",
        "timestamp": 1560842462
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> Seems to be broken again. The following error has returned. <br>\nURL value '<a href=\"http://hl7.org/fhir/us/core/ImplementationGuide/hl7.fhir.us.core-3.0.0\" target=\"_blank\" title=\"http://hl7.org/fhir/us/core/ImplementationGuide/hl7.fhir.us.core-3.0.0\">http://hl7.org/fhir/us/core/ImplementationGuide/hl7.fhir.us.core-3.0.0</a>' does not resolve</p>",
        "id": 168480266,
        "sender_full_name": "Rick Geimer",
        "timestamp": 1560925116
    },
    {
        "content": "<p>CDex was working just a few hours ago. Only change to the IG was editing the footer to add the history link.</p>",
        "id": 168480282,
        "sender_full_name": "Rick Geimer",
        "timestamp": 1560925163
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191401\">@Eric Haas</span> Looks like the last US Core commit failed to build, and this is likely causing errors in all IGs that have US Core as a dependency.</p>",
        "id": 168482485,
        "sender_full_name": "Rick Geimer",
        "timestamp": 1560928124
    },
    {
        "content": "<p>I don't remember committing since last week  but it says  I did yesterday.  I just recommitted now.</p>",
        "id": 168489688,
        "sender_full_name": "Eric Haas",
        "timestamp": 1560935158
    },
    {
        "content": "<p>should be good now</p>",
        "id": 168489841,
        "sender_full_name": "Eric Haas",
        "timestamp": 1560935285
    },
    {
        "content": "<p>that was me - rebuilding to fix problem uncovered problem with the problem ;-)</p>",
        "id": 168503462,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1560949015
    },
    {
        "content": "<p>Thanks guys. Will bump my IGs now, hopefully all will be good.</p>",
        "id": 168513110,
        "sender_full_name": "Rick Geimer",
        "timestamp": 1560955518
    }
]