[
    {
        "content": "<p>Our questionnaires have a parent questionnaire and child questionnaires. The child questionnnaires contain a variable that uses an expression to get the data from the parent questionnaire response.</p>\n<p>When publishing the IG, can the variable expression refer to a generic example FHIR server?  Or does it need to be a live FHIR server so that the expression actually brings back data and the validator doesn't think it is a broken link?  </p>\n<div class=\"codehilite\"><pre><span></span><code> &quot;extension&quot;: [ {\n    &quot;url&quot;: &quot;http://hl7.org/fhir/StructureDefinition/variable&quot;,\n    &quot;valueExpression&quot;: {\n      &quot;description&quot;: &quot;response to get the data from&quot;,\n      &quot;name&quot;: &quot;dataFromTheParentQR&quot;,\n      &quot;language&quot;: &quot;application/x-fhir-query&quot;,\n      &quot;expression&quot;: &quot;https://www.examplefhirserver.com/hapi-fhir-jpaserver/fhir/QuestionnaireResponse/parentQuestionnaireResponse1234&quot;\n    }\n  }\n</code></pre></div>",
        "id": 271352260,
        "sender_full_name": "Diane",
        "timestamp": 1644443334
    },
    {
        "content": "<p>The expression needs to be a live query.  If it's 'relative', then it'll run on the same server the QuestionnaireResponse is stored on.</p>",
        "id": 271365400,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1644450609
    },
    {
        "content": "<p>For the IG, we can set it up as a relative reference like:   QuestionnaireResponse/parentQuestionnaireResponse1234</p>\n<p>The questionnaire response ID itself (parentQuestionnaireResponse1234), is dynamic.  Our software application  wipes out parentQuestionnaireResponse1234   and replaces it with the actual questionnaire response ID  number (eg.  6789)  before it  calls the script to render the next questionnaire.  Since the software application is not part of the IG, do we just hard-code with a valid example such as QuestionnaireResponse/6789?</p>\n<p>For a relative reference, how/where do we tell the IG what FHIR server to use?    Do we use a test server like <a href=\"http://hapi.fhir.org\">hapi.fhir.org</a>?   Do we put that in the variable expression instead of using a relative expression?</p>\n<p>\"expression\": \"<a href=\"http://hapi.fhir.org/baseR4/QuestionnaireResponse/2804160\">http://hapi.fhir.org/baseR4/QuestionnaireResponse/2804160</a>\"</p>\n<p>Do we create another variable for the FHIR server?</p>",
        "id": 271384756,
        "sender_full_name": "Diane",
        "timestamp": 1644466993
    },
    {
        "content": "<p>That's not kosher.  The reference is expected to exist and wiping it wouldn't be appropriate.  If you want to have a variable passed in to your processing engine, then just declare it as a 'launch-context' extension.  It'll be up to the form renderer to support the parameter and pass it (or not).  Alternatively, combine the parent and children into a single Questionnaire using the assemble operation and then everything you need will be right there.  (You can use page groups if you want it to 'appear' as multiple forms.)</p>",
        "id": 271385121,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1644467429
    },
    {
        "content": "<p>That latter approach is more likely to be widely supported.</p>",
        "id": 271385128,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1644467444
    },
    {
        "content": "<p>The reason right now that we are doing the  </p>\n<div class=\"codehilite\"><pre><span></span><code>&quot;name&quot;: &quot;dataFromTheParentQR&quot;,\n &quot;language&quot;: &quot;application/x-fhir-query&quot;,\n &quot;expression&quot;: &quot;https://www.examplefhirserver.com/hapi-fhir-jpaserver/fhir/QuestionnaireResponse/parentQuestionnaireResponse&quot;\n</code></pre></div>\n<p>is because it is a workaround.  The launchContext only allows certain resource types (see <a href=\"https://build.fhir.org/ig/HL7/sdc/ValueSet-launchContext.html\">https://build.fhir.org/ig/HL7/sdc/ValueSet-launchContext.html</a>)  to be passed.    This issue is discussed in <br>\n<a href=\"#narrow/stream/179255-questionnaire/topic/launchContext.20off-list.20.22names.22\">https://chat.fhir.org/#narrow/stream/179255-questionnaire/topic/launchContext.20off-list.20.22names.22</a></p>\n<p>If this issue is resolved, then I would like to convert our questionnaires to the \"launchContext\"  way of doing things so that it is in alignment with FHIR standards.</p>",
        "id": 271469705,
        "sender_full_name": "Diane",
        "timestamp": 1644516084
    },
    {
        "content": "<p>LaunchContext has an extensible binding, so you can define your own - just be aware they won't necessarily be widely supported</p>",
        "id": 271494566,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1644527327
    }
]