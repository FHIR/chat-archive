[
    {
        "content": "<p>Minor request/ suggestion: <br>\nCan we use some syntax in ig.ini? <br>\ntemplate = .\\hl7.be.fhir.template is not ideal, because it requires the ig publisher to started from that location<br>\ntemplate = C:\\ImplementationGuides\\be-core\\hl7.be.fhir.template is not transportable...<br>\nCan i put something in my IG that solves this somehow?</p>",
        "id": 184678149,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1577994129
    },
    {
        "content": "<p>I don’t understand that. Why ./? Just specify a relative path</p>",
        "id": 184679173,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1577994973
    },
    {
        "content": "<p>I'm trying to make ig publisher in the context menu (as you have, I think) and I want to use derived templates</p>",
        "id": 184679669,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1577995451
    },
    {
        "content": "<p>when i use the _genonce in the IG folder, relative path (with or without .\\) works.</p>",
        "id": 184679771,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1577995557
    },
    {
        "content": "<p>but when i use the IG publisher, it launches<br>\njava -jar C:\\ImplementationGuides\\org.hl7.fhir.publisher.jar -ig C:\\ImplementationGuides\\be-core</p>",
        "id": 184679823,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1577995572
    },
    {
        "content": "<p>and it cannot find the template<br>\n Unable to load template from mytemplate</p>",
        "id": 184679851,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1577995602
    },
    {
        "content": "<p>because it is starting from a different path.</p>",
        "id": 184679885,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1577995640
    },
    {
        "content": "<p>(which gives me an idea... let me try something)</p>",
        "id": 184679900,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1577995663
    },
    {
        "content": "<p>nope. I was trying to add a \"-Duser.dir\" to my java command line, but that does not seem to work</p>",
        "id": 184681261,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1577996992
    },
    {
        "content": "<p>I don't understand this. where is your template (full path)? and what do lines 3 and 4 of the output log say?</p>",
        "id": 184816598,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1578166483
    },
    {
        "content": "<p>hmmm... <br>\nMy IG builds fine, but when I am trying to use the (Delphi) IG Publisher, it does not work because it cannot find the template</p>",
        "id": 184816817,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1578166903
    },
    {
        "content": "<p><em>what's the paths</em>?</p>",
        "id": 184816875,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1578166982
    },
    {
        "content": "<p>and it cannot find the template because it runs that command line (java -jar...) from wherever the EXE is.</p>",
        "id": 184816881,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1578166997
    },
    {
        "content": "<p>my template is in <br>\nC:\\ImplementationGuides\\be-core\\hl7.be.fhir.template</p>",
        "id": 184816932,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1578167071
    },
    {
        "content": "<p>(as I understood it should for derived templates)</p>",
        "id": 184816969,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1578167154
    },
    {
        "content": "<p>so, what I see is that the publish fails if the following happens</p>\n<ul>\n<li>we use a derived template that is not in the cache</li>\n<li>AND the derived template has a relative path (relative to the ini file)</li>\n<li>AND the derived template does not exist in the same line as the IGPublisher.EXE is in</li>\n</ul>",
        "id": 184817087,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1578167349
    },
    {
        "content": "<p>(perhaps the condition I should change is the last one...)</p>",
        "id": 184817209,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1578167542
    },
    {
        "content": "<p>when I look at the code, I see that everything is relative to the directory you nominate  -ig</p>",
        "id": 184817389,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1578167874
    },
    {
        "content": "<p>so I still don't understand the problem, and you still haven't pasted the lines I asked for</p>",
        "id": 184817435,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1578167900
    },
    {
        "content": "<p>the java code?</p>",
        "id": 184817436,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1578167901
    },
    {
        "content": "<blockquote>\n<p>what do lines 3 and 4 of the output log say?</p>\n</blockquote>",
        "id": 184817447,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1578167923
    },
    {
        "content": "<p>(I'm re-running this to get the log,it's coming.. my Delphi is busy with snomed stuff, trying to get a previously built exe)</p>",
        "id": 184817464,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1578167951
    },
    {
        "content": "<p>This log?</p>\n<div class=\"codehilite\"><pre><span></span>FHIR IG Publisher Version 1.0.37-SNAPSHOT (Git# fc345f9d0076). Built 2020-01-01T06:19:56.158+11:00 (4 days old)\nDetected Java version: 1.8.0_231 from C:\\Program Files\\Java\\jre1.8.0_231 on amd64 (64bit). 3616MB available\nParameters: -ig C:\\ImplementationGuides\\tempbe\ndir = C:\\ImplementationGuides, path = C:\\Program Files (x86)\\Common Files\\Oracle\\Java\\javapath;C:\\Program Files\\Java\\j\n</pre></div>",
        "id": 184818188,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1578169117
    },
    {
        "content": "<p>the full output (using template = .\\hl7.be.fhir.template in my ig.ini) is</p>\n<div class=\"codehilite\"><pre><span></span>FHIR IG Publisher Version 1.0.37-SNAPSHOT (Git# fc345f9d0076). Built 2020-01-01T06:19:56.158+11:00 (4 days old)\nDetected Java version: 1.8.0_231 from C:\\Program Files\\Java\\jre1.8.0_231 on amd64 (64bit). 3616MB available\nParameters: -ig C:\\ImplementationGuides\\tempbe\ndir = C:\\ImplementationGuides, path = C:\\Program Files (x86)\\Common Files\\Oracle\\Java\\javapath;C:\\Program Files\\Java\\jdk-......\nRun time = Sábado, 4 de Janeiro de 2020 21H22m CET (2020-01-04T21:22:41+01:00)\nPackage Cache: C:\\Users\\Jose\\.fhir\\packages                                      (00:00.0033)\nContacting Build Server...                                                       (00:00.0058)\n ... done                                                                        (00:03.0548)\nLoad Template from .\\hl7.be.fhir.template                                        (00:05.0158)\nPublishing Content Failed: Unable to load template from .\\hl7.be.fhir.template   (00:05.0159)\n                                                                                 (00:05.0159)\nUse -? to get command line help                                                  (00:05.0160)\n                                                                                 (00:05.0160)\nStack Dump (for debugging):                                                      (00:05.0160)\norg.hl7.fhir.exceptions.FHIRException: Unable to load template from .\\hl7.be.fhir.template\n    at org.hl7.fhir.igtools.templates.TemplateManager.loadPackage(TemplateManager.java:189)\n</pre></div>",
        "id": 184818333,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1578169432
    },
    {
        "content": "<p>the command line is<br>\njava -jar C:\\ImplementationGuides\\org.hl7.fhir.publisher.jar -ig C:\\ImplementationGuides\\tempbe</p>",
        "id": 184818471,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1578169665
    },
    {
        "content": "<p>what does the ig.ini say?</p>",
        "id": 184825685,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1578183151
    },
    {
        "content": "<p>ig = input/be.base.ig.xml<br>\ntemplate = .\\hl7.be.fhir.template</p>",
        "id": 184825998,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1578183772
    },
    {
        "content": "<p>\"hl7.be.fhir.template\" is not a local package, it is the name of the folder that is in my ig.</p>",
        "id": 184826059,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1578183857
    },
    {
        "content": "<p>so a path like .\\ is not supported for templates because it won't work for other people</p>",
        "id": 184828758,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1578189599
    },
    {
        "content": "<p>It <em>could</em> work for other people - but it presumes consistent organization of folder structure, which we'd generally prefer to avoid.  On the other hand, the alternative is forcing projects to put their stuff in Git, which they might rather not do.</p>",
        "id": 184829555,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1578191215
    },
    {
        "content": "<p>not at all.</p>",
        "id": 184836520,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1578206328
    },
    {
        "content": "<p>you can put it anywhere you like, and do a local build, and then it will be in your cache, and you can refer to it  by package id</p>",
        "id": 184836529,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1578206360
    },
    {
        "content": "<p>I believe that means that a local build of the template.</p>",
        "id": 184837872,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1578209371
    },
    {
        "content": "<p>The idea behind this including the derived templates) is to point someone to a github repo and say \"just download this and run this command\".</p>",
        "id": 184837916,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1578209455
    },
    {
        "content": "<p>Requiring them to first build the template is less than ideal.</p>",
        "id": 184837923,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1578209466
    },
    {
        "content": "<p>but if you say that the template has to go in a particular relative place, then that's very much less than ideal</p>",
        "id": 184847188,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1578227681
    },
    {
        "content": "<p>it goes with the IG.</p>",
        "id": 184847574,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1578228338
    },
    {
        "content": "<p>the BE IG is in this situation now - it works if I run the _genOnce.bat, but not the IGPUblisher.exe.<br>\nIt's not pressing at all, I just wanted to setup the tools in a way that others can use it while having their own file locations.</p>",
        "id": 184848056,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1578229305
    },
    {
        "content": "<p>What is way more interesting for me now is the ability to use Lists of resources instead of Grouping in the IG - I think the Lists could even help define some of the menus. This is what I'm working on now. The IGPublisher is a nice to have.</p>",
        "id": 184848102,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1578229368
    }
]