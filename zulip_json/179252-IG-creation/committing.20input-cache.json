[
    {
        "content": "<p>there was some previous discussion around this. <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> is it still better to commit input-cache, or we can .gitignore it?</p>",
        "id": 232551182,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1617177929
    },
    {
        "content": "<p>what's input-cache?</p>",
        "id": 232649999,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1617218689
    },
    {
        "content": "<p>Here's an example from a local build of mCODE to jog your memory:</p>\n<div class=\"codehilite\"><pre><span></span><code>input-cache/\n├── desktop.ini\n├── jiraspec.xml\n├── publisher.jar\n├── schemas\n│   ├── R4\n│   │   ├── fhir-single.xsd\n│   │   ├── fhir-xhtml.xsd\n│   │   ├── xml.xsd\n│   │   └── xmldsig-core-schema.xsd\n│   └── R5\n│       ├── fhir-single.xsd\n│       ├── fhir-xhtml.xsd\n│       ├── xml.xsd\n│       └── xmldsig-core-schema.xsd\n├── txcache\n│   ├── all-systems.cache\n│   ├── http___cancerstaging.org.cache\n│   ├── http___ncithesaurus.nci.nih.gov.cache\n│   ├── http___sequenceontology.org.cache\n│   ├── http___varnomen.hgvs.org.cache\n│   ├── http___www.ama-assn.org_go_cpt.cache\n│   ├── http___www.genenames.org.cache\n│   ├── http___www.ncbi.nlm.nih.gov_clinvar.cache\n│   ├── icd-10-cm.cache\n│   ├── icd-o-3.cache\n│   ├── iso3166.cache\n│   ├── lang.cache\n│   ├── loinc.cache\n│   ├── null.cache\n│   ├── rxnorm.cache\n│   ├── snomed.cache\n│   ├── ucum.cache\n│   ├── usmcodeCodeSystemmcode-catch-code-cs.cache\n│   ├── usmcodeCodeSystemmcode-radiotherapy-cs.cache\n│   └── version.ctl\n└── workgroups.xml\n</code></pre></div>",
        "id": 232650287,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1617218786
    },
    {
        "content": "<p>It's populated by the IG Publisher and can be safely deleted, but since it has caches, keeping it (or checking parts of it in) can increase performance of subsequent runs.</p>",
        "id": 232650616,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1617218905
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191316\">Grahame Grieve</span> <a href=\"#narrow/stream/179252-IG-creation/topic/committing.20input-cache/near/232649999\">said</a>:</p>\n<blockquote>\n<p>what's input-cache?</p>\n</blockquote>\n<p>the folder in the IG input (as Chris pointed out). a few months ago there was some discussion and IIRC you said that maybe we should stop committing it</p>",
        "id": 232650780,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1617218978
    },
    {
        "content": "<p>the only thing to commit in there is tx-cache. Should ignore the rest. For tx-cache... committing it causes conflict violations for people which cascade as people don't manage it, and people find that terrifying (and git makes this worse but not providing a nice 'reset me' operation)</p>\n<p>but it does make a real difference to build time. you can find out how much by running it, then running it again and then deleting the files in tx-cache and running it again, and checking the time difference between the last two runs</p>",
        "id": 232655581,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1617220788
    },
    {
        "content": "<p>So when someone downloads a repo, they can save build time because the  previous committer, when committing their changes, also committed the tx-cache.</p>",
        "id": 232658905,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1617222134
    },
    {
        "content": "<p>that is presuming that the previous committer did include the tx-cache changes, and that is for saving time in the first build.</p>",
        "id": 232658979,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1617222171
    },
    {
        "content": "<p>Right, but I think Grahame is suggesting that these caches don't survive merges well and/or they create merge conflicts that are difficult to resolve.  And a corrupt cache is worse than no cache at all.  I hadn't thought of that, but it's definitely a good thing to be aware of.</p>",
        "id": 232660682,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1617222848
    },
    {
        "content": "<p>yes, that is the point for my analysis. The potential inconvenience seems not to be worth the advantages for it being default.</p>",
        "id": 232661505,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1617223199
    },
    {
        "content": "<p>so perhaps we can set \"simple\" IGs to not commit the input.cache (i.e. add it to .gitignore by default), and those who want the benefits and risks can remove it from .gitignore?</p>",
        "id": 232663331,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1617224006
    },
    {
        "content": "<p>I think that is fair.  It also has a built-in safety mechanism in that people who aren't so good at git will be naturally protected since they won't know how to update .gitignore. ;-)</p>",
        "id": 232672999,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1617228437
    }
]