[
    {
        "content": "<p>For DEQM we defined an <a href=\"https://build.fhir.org/ig/HL7/davinci-deqm/StructureDefinition-extension-alternateScoreType.html\">DEQMAlternateScoreTypeExtension</a> for MeasureReport.group.measureScore</p>\n<p>For scoring other that Quantity so this example:  </p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">group</span><span class=\"p\">:</span>\n  <span class=\"p p-Indicator\">-</span> <span class=\"nt\">id</span><span class=\"p\">:</span> <span class=\"l l-Scalar l-Scalar-Plain\">location-datetime</span>\n    <span class=\"nt\">population</span><span class=\"p\">:</span>\n      <span class=\"p p-Indicator\">-</span> <span class=\"nt\">code</span><span class=\"p\">:</span>\n          <span class=\"nt\">coding</span><span class=\"p\">:</span>\n            <span class=\"p p-Indicator\">-</span> <span class=\"nt\">system</span><span class=\"p\">:</span> <span class=\"s\">&#39;http://terminology.hl7.org/CodeSystem/measure-population&#39;</span>\n              <span class=\"nt\">code</span><span class=\"p\">:</span> <span class=\"l l-Scalar l-Scalar-Plain\">measure-observation</span>\n              <span class=\"nt\">display</span><span class=\"p\">:</span> <span class=\"l l-Scalar l-Scalar-Plain\">Measure Observation</span>\n        <span class=\"nt\">id</span><span class=\"p\">:</span> <span class=\"l l-Scalar l-Scalar-Plain\">measure-observation</span>\n        <span class=\"nt\">count</span><span class=\"p\">:</span> <span class=\"l l-Scalar l-Scalar-Plain\">1</span>\n    <span class=\"nt\">measureScore</span><span class=\"p\">:</span>\n      <span class=\"nt\">extension</span><span class=\"p\">:</span>\n        <span class=\"p p-Indicator\">-</span> <span class=\"nt\">url</span><span class=\"p\">:</span> <span class=\"p p-Indicator\">&gt;-</span>\n            <span class=\"no\">http://hl7.org/fhir/us/davinci-deqm/StructureDefinition/extension-alternateScoreType</span>\n          <span class=\"nt\">valueDateTime</span><span class=\"p\">:</span> <span class=\"s\">&#39;2019-10-07T14:29:28-07:00&#39;</span>\n</code></pre></div>\n\n\n<p>yields this error: </p>\n<div class=\"codehilite\"><pre><span></span><code>MeasureReport/date-of-last-power-outage: MeasureReport.group[0].measureScore (l61/c23)  error   A value is required when the Measure.scoring={0}\n</code></pre></div>\n\n\n<p>Which I believe needs to allow for the extension</p>",
        "id": 203222544,
        "sender_full_name": "Eric Haas",
        "timestamp": 1594171926
    },
    {
        "content": "<p>what kind of extensions would be allowed in place of the value? (<span class=\"user-mention\" data-user-id=\"191359\">@Bryn Rhodes</span> )</p>",
        "id": 203222595,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1594172023
    },
    {
        "content": "<p>Seems like it ought to align with possible value choices for Observation: <a href=\"http://hl7.org/fhir/observation-definitions.html#Observation.value_x_\">http://hl7.org/fhir/observation-definitions.html#Observation.value_x_</a>. <a href=\"http://jira.hl7.org/browse/FHIR-22824\">J#22824</a> (to be applied) would allow dateTime, CodeableConcept, Period, Range, and Duration.</p>",
        "id": 203223095,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1594172658
    },
    {
        "content": "<p>That extension is intended to provide support in R4 for what will be possible in R5 with that tracker applied.</p>",
        "id": 203223107,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1594172697
    },
    {
        "content": "<p>so any extension that has one of those value types? that doesn't sound right for me</p>",
        "id": 203223112,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1594172704
    },
    {
        "content": "<p>How else could we limit it?</p>",
        "id": 203223172,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1594172768
    },
    {
        "content": "<p>I'm thinking from the pov of the validator. Eric is saying that this particular extension - which is specific to a particular IG - is an acceptable substitute for an actual value. I'm not in the habit of writing exceptions for particular IGs into the validator, so I'm wondering what extensions would be ok here..</p>",
        "id": 203223287,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1594172931
    },
    {
        "content": "<p>not about the acceptible value types for this particular extension</p>",
        "id": 203223298,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1594172953
    },
    {
        "content": "<p>Are there other cases like this the validator already handles? Like for R5-uplift extensions?</p>",
        "id": 203223384,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1594173086
    },
    {
        "content": "<p>well, the validator knows about some R5 extensions. But there's nowhere where the validator decides that a requirement for a value is set aside by the presence of an extension</p>",
        "id": 203223539,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1594173267
    },
    {
        "content": "<p>Isn't that what a data-absent-reason extension is doing?</p>",
        "id": 203223680,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1594173448
    },
    {
        "content": "<p>I don't see that extension here</p>",
        "id": 203223967,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1594173752
    },
    {
        "content": "<p>Well I think data-absent-reason would be an acceptable extension, what if the MeasureScore is in fact null?</p>",
        "id": 203224204,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1594174168
    },
    {
        "content": "<p>And is my understanding correct that an extension, in general, satisfies a cardinality requirement of 1..1 for an element? Or does the validator require an actual value child for 1..1?</p>",
        "id": 203224338,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1594174376
    },
    {
        "content": "<p>well, this particular error doesn't come from the direct cardinality requirements, but from the business rules you and I talked about.</p>",
        "id": 203225332,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1594175800
    },
    {
        "content": "<p>Is there a way to characterize the types of extensions that would be allowed? I would think anything that still conceptually provided a value would be a reasonable extension.</p>",
        "id": 203226065,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1594177078
    },
    {
        "content": "<p>I don't think we have anyway to know that</p>",
        "id": 203226123,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1594177122
    },
    {
        "content": "<p>what about the DAR extension, I would think that would be kosher as well</p>",
        "id": 203452003,
        "sender_full_name": "Eric Haas",
        "timestamp": 1594335111
    },
    {
        "content": "<p>so we haven't resolved this.</p>",
        "id": 203911510,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1594780894
    },
    {
        "content": "<p>I've added some DEQM specific logic for this, but I don't think that this is at all appropriate. The extension should be moved to somewhere more general</p>",
        "id": 203912546,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1594782406
    },
    {
        "content": "<p>I've added a tracker to define this extension in the base specification: <a href=\"https://jira.hl7.org/browse/FHIR-28077\">https://jira.hl7.org/browse/FHIR-28077</a></p>",
        "id": 204094582,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1594911220
    }
]