[
    {
        "content": "<p>It looks like package.tgz is OK now, but I'm getting this error:</p>\n<div class=\"codehilite\"><pre><span></span>process res: deviceusestatement-uv-ips                                           (38.0168sec)\nBusiness version mismatch in /Users/rhausam/git-repo/fhir-ips/resources/DeviceUseStatement-uv-ips.structuredefinition - overriding from 0.1 to 0.1.0\nPublishing Content Failed: Exception loading http://hl7.org/fhir/uv/ips/StructureDefinition/deviceusestatement-uv-ips: Index: 0, Size: 0 (38.0180sec)\n                                                                                 (38.0181sec)\nUse -? to get command line help                                                  (38.0181sec)\n                                                                                 (38.0181sec)\nStack Dump (for debugging):                                                      (38.0181sec)\njava.lang.Exception: Exception loading http://hl7.org/fhir/uv/ips/StructureDefinition/deviceusestatement-uv-ips: Index: 0, Size: 0\n    at org.hl7.fhir.igtools.publisher.Publisher.load(Publisher.java:2272)\n    at org.hl7.fhir.igtools.publisher.Publisher.loadConformance(Publisher.java:1937)\n    at org.hl7.fhir.igtools.publisher.Publisher.createIg(Publisher.java:499)\n    at org.hl7.fhir.igtools.publisher.Publisher.execute(Publisher.java:461)\n    at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:4501)\nCaused by: java.lang.IndexOutOfBoundsException: Index: 0, Size: 0\n    at java.util.ArrayList.rangeCheck(ArrayList.java:653)\n    at java.util.ArrayList.get(ArrayList.java:429)\n    at org.hl7.fhir.r4.conformance.ProfileUtilities.processPaths(ProfileUtilities.java:519)\n    at org.hl7.fhir.r4.conformance.ProfileUtilities.generateSnapshot(ProfileUtilities.java:370)\n    at org.hl7.fhir.r4.context.SimpleWorkerContext.seeMetadataResource(SimpleWorkerContext.java:559)\n    at org.hl7.fhir.r4.context.BaseWorkerContext.cacheResource(BaseWorkerContext.java:188)\n    at org.hl7.fhir.igtools.publisher.Publisher.load(Publisher.java:2270)\n    ... 4 more\nException in thread &quot;main&quot; java.lang.NullPointerException\n    at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:4511)\n</pre></div>\n\n\n<p>Not sure why the index would be out of bounds.  The StructureDefinition looks OK to me, and it validates OK separately.  Thoughts?</p>",
        "id": 153965971,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1527720884
    },
    {
        "content": "<p>Just to inform that mine builds ok now. I had the package name in the IG.XML but i was not putting it in the ig.json. Once I got it in the ig.json, it builds ok.</p>",
        "id": 153965972,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1527720994
    },
    {
        "content": "<p>I'm using the latest publisher v3.4.0-13810.</p>",
        "id": 153965973,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1527721010
    },
    {
        "content": "<p>Glad yours is good now, Jose. :)</p>",
        "id": 153965974,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1527721052
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191405\">@Rob Hausam</span>  you are using command line or GUI?</p>",
        "id": 153965975,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1527721088
    },
    {
        "content": "<p>command line</p>",
        "id": 153965976,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1527721107
    },
    {
        "content": "<p>mine is working on the command line (using Lloyd's  template)</p>",
        "id": 153965977,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1527721110
    },
    {
        "content": "<p>since I have it open, do you want to send your structureDefinition and i can see if i can build with it?</p>",
        "id": 153965978,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1527721154
    },
    {
        "content": "<p>i am precisely working on a draft publishing mechanism for IHE which is intended to just publish existing conformance resources. So it should be easy to rehearse it with your resource</p>",
        "id": 153965979,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1527721246
    },
    {
        "content": "<p>Attached <a href=\"/user_uploads/10155/2eU0Kd1vh4ReyDBndfWWfpNK/DeviceUseStatement-uv-ips.structuredefinition.xml\" target=\"_blank\" title=\"DeviceUseStatement-uv-ips.structuredefinition.xml\">DeviceUseStatement-uv-ips.structuredefinition.xml</a></p>",
        "id": 153965980,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1527721318
    },
    {
        "content": "<p>well, i can confirm you are correct, <span class=\"user-mention\" data-user-id=\"191405\">@Rob Hausam</span> . Same error once i use it.</p>",
        "id": 153965986,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1527723160
    },
    {
        "content": "<p>could not figure out what is causing it, sorry.<br>\nbut i do know that if you take out most of the elements, it builds again.</p>",
        "id": 153965987,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1527723216
    },
    {
        "content": "<p>sorry i do not know which are the offending ones.</p>",
        "id": 153965988,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1527723228
    },
    {
        "content": "<p>did a few experiments but lost track</p>",
        "id": 153965989,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1527723237
    },
    {
        "content": "<p>thanks for checking and at least confirming, Jose</p>",
        "id": 153965991,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1527723307
    },
    {
        "content": "<p>(and am just realizing that I posted my \"it works now\" message in the wrong thread. Sorry.. Let's see if anyone can help figure out what iswrong here.</p>",
        "id": 153965992,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1527723325
    },
    {
        "content": "<p>can I reproduce this?</p>",
        "id": 153966180,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1527807469
    },
    {
        "content": "<p>It's in <a href=\"https://github.com/HL7/fhir-ips\" target=\"_blank\" title=\"https://github.com/HL7/fhir-ips\">https://github.com/HL7/fhir-ips</a>, branch fhir-r4.</p>",
        "id": 153966185,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1527807821
    },
    {
        "content": "<p>Of course, it's the same differential path issue and solution for this, too (even though the error messages are very different).  It build now.  I actually thought I had taken care of all of those before in the stu3 version before I moved to the r4 branch - presumably the publisher may be picking up more of them now?</p>",
        "id": 153966219,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1527813111
    },
    {
        "content": "<p>one of the errors is because an element has been renamed but your profile hasn't picked that up</p>",
        "id": 153966224,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1527813534
    },
    {
        "content": "<p>yes - it's picked it up now :)</p>",
        "id": 153966225,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1527813666
    },
    {
        "content": "<p>But, interestingly (actually disturbingly), the validator didn't pick up that the element name had changed and that the instance had it wrong! :(  That instance validated fine as fhirVersion 3.4.0 <strong>before</strong> fixing the element name.</p>",
        "id": 153966228,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1527813933
    },
    {
        "content": "<p>really? I have to a look at the validator</p>",
        "id": 153966229,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1527813991
    },
    {
        "content": "<p>yes, probably should</p>",
        "id": 153966230,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1527814014
    },
    {
        "content": "<p>anyway, you should get better error messages and be right after the current build compeltes</p>",
        "id": 153966232,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1527814252
    },
    {
        "content": "<p>of course, it is an instance of StructureDefinition, not DeviceUseStatement (where the actual change occurred), but I would think it should be strictly validating the SD element ids and path values (which are instances of ElementDefinition)</p>",
        "id": 153966233,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1527814268
    },
    {
        "content": "<p>sounds good</p>",
        "id": 153966234,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1527814273
    },
    {
        "content": "<p>well, the excption is kind of it trying to valdate ...</p>",
        "id": 153966235,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1527814335
    },
    {
        "content": "<p>yes, the IG Publisher is doing that, but not the validator</p>",
        "id": 153966237,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1527814379
    }
]