[
    {
        "content": "<p>I ran into an issue with dependencies on Simplifier packages I believe is caused by the IG Publisher. Specifically, the build works fine with version 1.1.2 of the publisher jar but breaks in 1.1.3:</p>\n<div class=\"codehilite\"><pre><span></span><code>Stack Dump (for debugging):                                                      (00:30.0299)\njava.lang.NullPointerException\n        at org.hl7.fhir.igtools.publisher.Publisher.fixPackageUrl(Publisher.java:2774)\n        at org.hl7.fhir.igtools.publisher.Publisher.loadIg(Publisher.java:2600)\n        at org.hl7.fhir.igtools.publisher.Publisher.initializeFromIg(Publisher.java:1785)\n        at org.hl7.fhir.igtools.publisher.Publisher.initialize(Publisher.java:1365)\n        at org.hl7.fhir.igtools.publisher.Publisher.execute(Publisher.java:702)\n        at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:7835)\n</code></pre></div>\n\n\n<p>In my SUSHI config.yaml, i have:</p>\n<div class=\"codehilite\"><pre><span></span><code>dependencies:\n  de.basisprofil.r4:\n    uri: https://simplifier.net/guide/basisprofil-de-r4\n    version: 0.9.6\n</code></pre></div>\n\n\n<p>because if i only write <code> de.basisprofil.r4: 0.9.6</code> SUSHI tells me <code>error Failed to add de.basisprofil.r4:0.9.6 to ImplementationGuide instance because SUSHI could not find the IG URL in the dependency </code>.  (The dependency is tranlated to</p>\n<div class=\"codehilite\"><pre><span></span><code>    {\n      &quot;packageId&quot;: &quot;de.basisprofil.r4&quot;,\n      &quot;uri&quot;: &quot;https://simplifier.net/guide/basisprofil-de-r4&quot;,\n      &quot;version&quot;: &quot;0.9.6&quot;,\n      &quot;id&quot;: &quot;de_basisprofil_r4&quot;\n    }\n</code></pre></div>\n\n\n<p>by SUSHI.)<br>\nIf I completly remove the dependency or use older publisher versions, it works fine...</p>",
        "id": 206789098,
        "sender_full_name": "Noemi Deppenwiese",
        "timestamp": 1597305347
    },
    {
        "content": "<p>already fixed. Due for release in the next 24 hours</p>",
        "id": 206789586,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1597305746
    },
    {
        "content": "<p>With version 1.1.11, the null pointer error has disappeared. But I now get</p>\n<div class=\"codehilite\"><pre><span></span><code>org.hl7.fhir.exceptions.FHIRException: Fehler beim Lesen C:\\Users\\Noemi\\.fhir\\packages\\de.basisprofil.r4#0.9.6\\package\\CodeSystem-arge-ik-klassifikation.json aus dem Paket de.basisprofil.r4#0.9.6: An id is required for a deferred load resource\n        at org.hl7.fhir.r5.context.SimpleWorkerContext.loadFromPackageInt(SimpleWorkerContext.java:454)\n        at org.hl7.fhir.r5.context.SimpleWorkerContext.loadFromPackage(SimpleWorkerContext.java:381)\n        at org.hl7.fhir.igtools.publisher.Publisher.loadFromPackage(Publisher.java:2738)\n        at org.hl7.fhir.igtools.publisher.Publisher.loadIg(Publisher.java:2696)\n        at org.hl7.fhir.igtools.publisher.Publisher.initializeFromIg(Publisher.java:1846)\n        at org.hl7.fhir.igtools.publisher.Publisher.initialize(Publisher.java:1418)\n        at org.hl7.fhir.igtools.publisher.Publisher.execute(Publisher.java:709)\n        at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:7944)\nCaused by: org.hl7.fhir.exceptions.FHIRException: An id is required for a deferred load resource\n        at org.hl7.fhir.r5.context.CanonicalResourceManager.register(CanonicalResourceManager.java:200)\n        at org.hl7.fhir.r5.context.BaseWorkerContext.registerResourceFromPackage(BaseWorkerContext.java:289)\n        at org.hl7.fhir.r5.context.SimpleWorkerContext.loadFromPackageInt(SimpleWorkerContext.java:451)\n        ... 7 more\n</code></pre></div>\n\n\n<p>It seems to be a Simplifier issue, also happens with other Simplifier packages (in another case, the resource it failed to load was a StructureDefinition, so i think it is just the first resource it tries to load).</p>",
        "id": 206919938,
        "sender_full_name": "Noemi Deppenwiese",
        "timestamp": 1597404652
    },
    {
        "content": "<p>This is still an issue with version 1.1.12 of the publisher.</p>",
        "id": 207143812,
        "sender_full_name": "Noemi Deppenwiese",
        "timestamp": 1597671068
    },
    {
        "content": "<p>Hi <span class=\"user-mention\" data-user-id=\"221444\">@Noemi Deppenwiese</span>, the 'ArgeIkKlassifikation' in <code>de.basisprofil.r4 0.9.6</code> (deprecated/unlisted package version) indeed doesn't seem to have an <code>id</code> element: <a href=\"https://simplifier.net/packages/de.basisprofil.r4/0.9.6/files/129569/~xml\">https://simplifier.net/packages/de.basisprofil.r4/0.9.6/files/129569/~xml</a><br>\nHowever the same resource in the latest package version <code>de.basisprofil.r4 0.9.11</code> does: <a href=\"https://simplifier.net/packages/de.basisprofil.r4/0.9.11/files/142280/~xml\">https://simplifier.net/packages/de.basisprofil.r4/0.9.11/files/142280/~xml</a></p>\n<p>Would it be an option to use the newer package version?</p>\n<p>If the IG publisher basically mandates <code>id</code> perhaps we should make this a rule and not something people run into only when using it <span aria-label=\"thinking\" class=\"emoji emoji-1f914\" role=\"img\" title=\"thinking\">:thinking:</span></p>",
        "id": 207149325,
        "sender_full_name": "Ward Weistra",
        "timestamp": 1597673991
    },
    {
        "content": "<p>Thanks <span class=\"user-mention\" data-user-id=\"203235\">@Ward Weistra</span> ! Unfortunatly, some other resources have no id even in version 0.9.11 (I now get the error for <code>GkvVersionEgk.json</code>). I will reach out to the people responsible for maintaining the package. <br>\nI believe it would really help if Simplifier gave out a warning if trying to publishing a package with some resources lacking ids, since i encounterd a few Simplifier packages with this issue and this it seems to be a deal-breaker for the publisher.</p>",
        "id": 207150969,
        "sender_full_name": "Noemi Deppenwiese",
        "timestamp": 1597674809
    },
    {
        "content": "<p>Thanks  <span class=\"user-mention\" data-user-id=\"221444\">@Noemi Deppenwiese</span>, I guess contacting them for now is the shortest route.<br>\nI agree that IF this is mandatory  in a package Simplfier should warn about this, but then I'd like to make that explicit so other package generators can also implement that.<br>\n<span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> Do you think the IG publisher can have a workaround for resources without <code>id</code> or should we make <code>id</code> mandatory for every resource in a package?</p>",
        "id": 207152613,
        "sender_full_name": "Ward Weistra",
        "timestamp": 1597675686
    },
    {
        "content": "<p>mandating the id was.. probably an oversight. It's a minor irritation that resources don't have an id, but I can deal with it. I just forgot while I was working on a feature</p>",
        "id": 207185392,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1597691659
    },
    {
        "content": "<p>fixing this is on my todo list, but didn't make 1.1.13 because I'm way behind</p>",
        "id": 207185467,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1597691707
    },
    {
        "content": "<p>fixed next release</p>",
        "id": 207221255,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1597723097
    },
    {
        "content": "<p>Thanks <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span>! <span class=\"user-mention\" data-user-id=\"221444\">@Noemi Deppenwiese</span> FYI <span aria-label=\"point up\" class=\"emoji emoji-1f446\" role=\"img\" title=\"point up\">:point_up:</span></p>",
        "id": 207266606,
        "sender_full_name": "Ward Weistra",
        "timestamp": 1597761215
    }
]