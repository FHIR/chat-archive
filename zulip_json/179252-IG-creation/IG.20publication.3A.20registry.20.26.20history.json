[
    {
        "content": "<p>In the <a href=\"https://wiki.hl7.org/Process_for_Publishing_a_FHIR_IG\">Process for Publishing a FHIR IG documentation</a>, it says to follow this process, you must have a local clones of a couple of repos</p>\n<blockquote>\n<ul>\n<li>A local clone of the FHIR IG registry github repository <a href=\"https://github.com/FHIR/ig-registry\">https://github.com/FHIR/ig-registry</a> to {registry}</li>\n<li>A local clone of the FHIR History Template github repository <a href=\"https://github.com/HL7/fhir-ig-history-template\">https://github.com/HL7/fhir-ig-history-template</a> to {history}</li>\n</ul>\n</blockquote>\n<p>but they aren't referred to again in the documentation. Do they have to be in a particular place in the build? or used as parameters to the publisher? I recall seeing instructions in chat for adding a parameter for updating the registry<br>\n<code>-registry [path to]/ig-registry/fhir-ig-list.json</code> <br>\nbut haven't seen anything re how the history template is used by the publisher.</p>\n<p>I'm working to publish an organization specific IG (non-HL7). I managed to do it last summer with advice found here, but publisher has been updated since then and that workflow stopped working for me.</p>",
        "id": 228653624,
        "sender_full_name": " Bob Milius",
        "timestamp": 1614800168
    },
    {
        "content": "<p>they are referred to again.. search for e.g. {history}</p>",
        "id": 228653992,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1614800299
    },
    {
        "content": "<p>Yep!</p>\n<blockquote>\n<ul>\n<li>if this is a new IG: copy the contents of {history} into {root}/{realm}/{code} (except for the readme.md file), and edit the name in index.html (replace 'XXXXXX')</li>\n</ul>\n</blockquote>\n<p>Somehow I missed that. Thanks, Grahame,  for the hint.</p>",
        "id": 228654643,
        "sender_full_name": " Bob Milius",
        "timestamp": 1614800541
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191916\">@ Bob Milius</span> do you get to a point where the publish box says \"this is the official publication\"..?</p>",
        "id": 228656781,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1614801358
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191832\">Jose Costa Teixeira</span> <a href=\"#narrow/stream/179252-IG-creation/topic/IG.20publication.3A.20registry.20.26.20history/near/228656781\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"191916\"> Bob Milius</span> do you get to a point where the publish box says \"this is the official publication\"..?</p>\n</blockquote>\n<p>Not today. I got that far a few months ago, but I haven't been able to reproduce that so far today.</p>",
        "id": 228667164,
        "sender_full_name": " Bob Milius",
        "timestamp": 1614805206
    },
    {
        "content": "<p>So, I'm still having issues trying to publish a non-HL7 IG with history and redirect php using the publisher. I was able to do this last summer with an earlier version of the publisher. With the latest version I was having an error msg that <code>dist-hist</code> and <code>assets-hist</code> could not be found. So after reading the new publication process (see above posts), I copied the history files into my website folder. Then I got a new error msg saying the source and destination are the same.</p>\n<div class=\"codehilite\"><pre><span></span><code>java.io.IOException: Source &#39;/Users/bob/src/git-nmdp-ig/testig/MyIG/website/dist-hist&#39; and destination &#39;/Users/bob/src/git-nmdp-ig/testig/MyIG/website/dist-hist&#39; are the same\n    at org.apache.commons.io.FileUtils.copyDirectory(FileUtils.java:1351)\n    at org.apache.commons.io.FileUtils.copyDirectory(FileUtils.java:1246)\n    at org.apache.commons.io.FileUtils.copyDirectory(FileUtils.java:1215)\n    at org.hl7.fhir.igtools.publisher.utils.IGReleaseUpdater.checkCopyFolderFromRoot(IGReleaseUpdater.java:261)\n    at org.hl7.fhir.igtools.publisher.utils.IGReleaseUpdater.check(IGReleaseUpdater.java:216)\n    at org.hl7.fhir.igtools.publisher.utils.IGWebSiteMaintainer.execute(IGWebSiteMaintainer.java:106)\n    at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:8248)\n\n    Source &#39;/Users/bob/src/git-nmdp-ig/testig/MyIG/website/dist-hist&#39; and destination &#39;/Users/bob/src/git-nmdp-ig/testig/MyIG/website/dist-hist&#39; are the same\n</code></pre></div>\n<p>After everything, a <code>history.html</code> file seems to be  created correctly, but no redirection php scripts are created, and the banner continues to be <code>Publication Build: This will be filled in by the publication tooling</code>.</p>\n<p>You can reproduce this with a simple process of creating a bare-bones IG starting with <code>sushi --init</code>. Here's the process I used.</p>\n<ul>\n<li>create the IG using <code>sushi -i</code><ul>\n<li>Name (Default: ExampleIG): MyIG</li>\n<li>Id (Default: fhir.example): myig</li>\n<li>Canonical (Default: <a href=\"http://example.org\">http://example.org</a>): <a href=\"http://example.org/myig\">http://example.org/myig</a></li>\n<li>Status (Default: draft):</li>\n<li>Version (Default: 0.1.0):</li>\n<li>Initialize SUSHI project in /Users/bob/src/git-nmdp-ig/testig/MyIG? [y/n]: y</li>\n</ul>\n</li>\n<li><code>java -jar ../publisher.jar -ig ig.ini</code></li>\n<li><code>java -jar ../publisher.jar -no-sushi -ig ig.ini -publish http://example.org/myig</code></li>\n<li><code>mkdir website</code></li>\n<li><code>cp -r output/* website</code></li>\n<li>create website/publish.ini</li>\n</ul>\n<div class=\"spoiler-block\"><div class=\"spoiler-header\">\n<p>website/publish.ini</p>\n</div><div class=\"spoiler-content\" aria-hidden=\"true\">\n<p>[website]<br>\nstyle=fhir.layout<br>\nserver=apache<br>\nurl=http://example.org/myig<br>\norg=bob<br>\nno-registry=1</p>\n<p>[feeds]<br>\npackage=package-feed.xml<br>\npublication=publication-feed.xml</p>\n</div></div>\n<ul>\n<li>create website/package-list.json</li>\n</ul>\n<div class=\"spoiler-block\"><div class=\"spoiler-header\">\n<p>website/package-list.json</p>\n</div><div class=\"spoiler-content\" aria-hidden=\"true\">\n<p>{<br>\n    \"package-id\": \"myig\",<br>\n    \"title\": \"My Example FHIR Implementation Guide\",<br>\n    \"canonical\": \"<a href=\"http://example.org/myig\">http://example.org/myig</a>\",<br>\n    \"introduction\": \"My Example FHIR Implementation Guide\",<br>\n    \"list\": [<br>\n        {<br>\n            \"version\": \"current\",<br>\n            \"date\": \"2021-03-01\",<br>\n            \"desc\": \"Draft\",<br>\n            \"path\": \"<a href=\"http://example.org/myig\">http://example.org/myig</a>\",<br>\n            \"status\": \"trial-use\",<br>\n            \"sequence\": \"Trial Use: 1\",<br>\n            \"fhirversion\": \"4.0.1\",<br>\n            \"current\": true<br>\n        }<br>\n    ],<br>\n    \"category\": \"Research\"<br>\n}</p>\n</div></div>\n<ul>\n<li><code>$ cp -r ../fhir-ig-history-template/*hist* website/</code></li>\n<li><code>java -jar ../publisher.jar -publish-update -folder website -registry ../ig-registry/fhir-ig-list.json</code></li>\n</ul>\n<p>Here's some output...</p>\n<div class=\"codehilite\"><pre><span></span><code>$ sushi --init\nName (Default: ExampleIG): MyIG\nId (Default: fhir.example): myig\nCanonical (Default: http://example.org): http://example.org/myig\nStatus (Default: draft):\nVersion (Default: 0.1.0):\nInitialize SUSHI project in /Users/bob/src/git-nmdp-ig/testig/MyIG? [y/n]: y\n\n$ cd MyIG\n$ java -jar ../publisher.jar -ig ig.ini\nFHIR IG Publisher Version 1.1.62 (Git# 4ca9a9637bd7). Built 2021-03-04T05:52:57.202Z (19 hours old)\n... blah, blah...\nErrors: 0, Warnings: 2, Info: 0, Broken Links = 11 (00:44.0010)\nDone. This IG has been built using the &#39;normal&#39; process for local use. If building to host on an an external website, use the process documented [yet to be documented]]) (00:44.0013)\n\n$ java -jar ../publisher.jar -ig ig.ini -publish http://example.org/myig\n... blah, blah...\nErrors: 0, Warnings: 2, Info: 0, Broken Links = 11 (00:31.0797)\nDone                                                                             (00:31.0798)\n\n$ mkdir website\n$ cp -r output/* website/\n\n# create website/package-list.json. Here&#39;s what I used\n$ cat website/package-list.json\n{\n    &quot;package-id&quot;: &quot;myig&quot;,\n    &quot;title&quot;: &quot;My Example FHIR Implementation Guide&quot;,\n    &quot;canonical&quot;: &quot;http://example.org/myig&quot;,\n    &quot;introduction&quot;: &quot;My Example FHIR Implementation Guide&quot;,\n    &quot;list&quot;: [\n        {\n            &quot;version&quot;: &quot;current&quot;,\n            &quot;date&quot;: &quot;2021-03-01&quot;,\n            &quot;desc&quot;: &quot;Draft&quot;,\n            &quot;path&quot;: &quot;http://example.org/myig&quot;,\n            &quot;status&quot;: &quot;trial-use&quot;,\n            &quot;sequence&quot;: &quot;Trial Use: 1&quot;,\n            &quot;fhirversion&quot;: &quot;4.0.1&quot;,\n            &quot;current&quot;: true\n        }\n    ],\n    &quot;category&quot;: &quot;Research&quot;\n}\n\n# create website/publish.ini. Here&#39;s what I used...\n$ cat website/publish.ini\n[website]\nstyle=fhir.layout\nserver=apache\nurl=http://example.org/myig\norg=bob\nno-registry=1\n\n[feeds]\npackage=package-feed.xml\npublication=publication-feed.xml\n\n#  copy the history files into website/\n$ cp -r ../fhir-ig-history-template/*hist* website/\n\n$ java -jar ../publisher.jar -publish-update -folder website -registry ../ig-registry/fhir-ig-list.json\nUpdate the website at /Users/bob/src/git-nmdp-ig/testig/MyIG/website\nThe public URL is at http://example.org/myig\nUpdate the public registry at ../ig-registry/fhir-ig-list.json\nThe server type is APACHE\nlooking for IGs in /Users/bob/src/git-nmdp-ig/testig/MyIG/website\nfound 1 IGs to update:\n - /Users/bob/src/git-nmdp-ig/testig/MyIG/website\nEnter y to continue: y\nUpdate /Users/bob/src/git-nmdp-ig/testig/MyIG/website for http://example.org/myig\njava.io.IOException: Source &#39;/Users/bob/src/git-nmdp-ig/testig/MyIG/website/dist-hist&#39; and destination &#39;/Users/bob/src/git-nmdp-ig/testig/MyIG/website/dist-hist&#39; are the same\n    at org.apache.commons.io.FileUtils.copyDirectory(FileUtils.java:1351)\n    at org.apache.commons.io.FileUtils.copyDirectory(FileUtils.java:1246)\n    at org.apache.commons.io.FileUtils.copyDirectory(FileUtils.java:1215)\n    at org.hl7.fhir.igtools.publisher.utils.IGReleaseUpdater.checkCopyFolderFromRoot(IGReleaseUpdater.java:261)\n    at org.hl7.fhir.igtools.publisher.utils.IGReleaseUpdater.check(IGReleaseUpdater.java:216)\n    at org.hl7.fhir.igtools.publisher.utils.IGWebSiteMaintainer.execute(IGWebSiteMaintainer.java:106)\n    at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:8248)\n\n    Source &#39;/Users/bob/src/git-nmdp-ig/testig/MyIG/website/dist-hist&#39; and destination &#39;/Users/bob/src/git-nmdp-ig/testig/MyIG/website/dist-hist&#39; are the same\n====================\nProcessing Feeds for /Users/bob/src/git-nmdp-ig/testig/MyIG/website\nBuild Feed.\n  rootFolder=/Users/bob/src/git-nmdp-ig/testig/MyIG/website\n  packageFile=/Users/bob/src/git-nmdp-ig/testig/MyIG/website/package-feed.xml\n  publicationFile=/Users/bob/src/git-nmdp-ig/testig/MyIG/website/publication-feed.xml\n  orgName=bob\n  thisUrl=http://example.org/myig/package-feed.xml\n  rootUrl=http://example.org/myig\nLoad from /Users/bob/src/git-nmdp-ig/testig/MyIG/website/package-list.json\nSave Package feed to /Users/bob/src/git-nmdp-ig/testig/MyIG/website/package-feed.xml\nSave publication feed to /Users/bob/src/git-nmdp-ig/testig/MyIG/website/publication-feed.xml\nKnown status codes: []\nFinished Processing Feeds\n====================\nmyig (http://example.org/myig): My Example FHIR Implementation Guide @ http://example.org/myig\nmyig (http://example.org/myig): My Example FHIR Implementation Guide @ http://example.org/myig\n</code></pre></div>\n<p><a href=\"/user_uploads/10155/6o1weNIqGh7quLxjEP_W86pT/image.png\">image.png</a> <br>\n<a href=\"/user_uploads/10155/GVmgrbPbOegyg_Ah0fFUTqCy/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/6o1weNIqGh7quLxjEP_W86pT/image.png\" title=\"image.png\"><img src=\"/user_uploads/10155/6o1weNIqGh7quLxjEP_W86pT/image.png\"></a></div><div class=\"message_inline_image\"><a href=\"/user_uploads/10155/GVmgrbPbOegyg_Ah0fFUTqCy/image.png\" title=\"image.png\"><img src=\"/user_uploads/10155/GVmgrbPbOegyg_Ah0fFUTqCy/image.png\"></a></div>",
        "id": 228888967,
        "sender_full_name": " Bob Milius",
        "timestamp": 1614912665
    },
    {
        "content": "<p>Bumping... Wondering if anyone has a workflow for publishing non-HL7 IGs ( not going to <a href=\"http://build.fhir.org\">build.fhir.org</a>) using the publisher? It used to work for me, but not with recent versions of publisher. <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> ?</p>",
        "id": 229317898,
        "sender_full_name": " Bob Milius",
        "timestamp": 1615217744
    },
    {
        "content": "<p>Like eg. <a href=\"https://github.com/hl7dk/dk-core/blob/going-fshing/.github/workflows/main.yml\">https://github.com/hl7dk/dk-core/blob/going-fshing/.github/workflows/main.yml</a> ?</p>",
        "id": 229327099,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1615220314
    },
    {
        "content": "<p>No, it's not that.</p>",
        "id": 229328502,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1615220635
    },
    {
        "content": "<p>that workflow runs the \"normal\" publication process, not the final publication that can be hosted on a web site (with all the redirects etc)</p>",
        "id": 229328956,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1615220729
    },
    {
        "content": "<p>the \"final\" publication has some more wizardry to it.</p>",
        "id": 229329071,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1615220758
    },
    {
        "content": "<p>Care to point those wizardry steps?</p>",
        "id": 229346259,
        "sender_full_name": "David Pyke",
        "timestamp": 1615226866
    },
    {
        "content": "<p>I don't publish to <a href=\"http://build.fhir.org\">build.fhir.org</a> (though I publish to <a href=\"http://hl7.org/fhir\">hl7.org/fhir</a>, but I follow <a href=\"https://confluence.hl7.org/display/FHIR/Process+for+Publishing+a+FHIR+IG\">https://confluence.hl7.org/display/FHIR/Process+for+Publishing+a+FHIR+IG</a>.</p>",
        "id": 229347464,
        "sender_full_name": "Lynn Laakso",
        "timestamp": 1615227335
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"192587\">David Pyke</span> <a href=\"#narrow/stream/179252-IG-creation/topic/IG.20publication.3A.20registry.20.26.20history/near/229346259\">said</a>:</p>\n<blockquote>\n<p>Care to point those wizardry steps?</p>\n</blockquote>\n<p>Here's a thread that contains links to other threads about this. I got it to work last summer, but not with the recent changes to the Publisher. <br>\n<a href=\"#narrow/stream/179252-IG-creation/topic/process.20for.20publishing.20revisited\">https://chat.fhir.org/#narrow/stream/179252-IG-creation/topic/process.20for.20publishing.20revisited</a></p>",
        "id": 229349264,
        "sender_full_name": " Bob Milius",
        "timestamp": 1615228059
    },
    {
        "content": "<p>Last year I was able to publish our HLA Reporting IG for our organization here:<br>\n<a href=\"http://fhir.nmdp.org/ig/hla-reporting/\">http://fhir.nmdp.org/ig/hla-reporting/</a><br>\nIt does the php redirection and shows the history correctly. But I'm unable to reproduce the process using the newer publisher.</p>",
        "id": 229350815,
        "sender_full_name": " Bob Milius",
        "timestamp": 1615228583
    },
    {
        "content": "<p>If its not an HL7 IG, isnt' it then sufficient to do the steps at <a href=\"https://confluence.hl7.org/pages/viewpage.action?pageId=66930641#ProcessforPublishingaFHIRIG-LocalBuild\">https://confluence.hl7.org/pages/viewpage.action?pageId=66930641#ProcessforPublishingaFHIRIG-LocalBuild</a>:</p>\n<blockquote>\n<p>run the IG publisher, clearing the terminology cache (run the publisher.jar -ig {clone} -resetTx -publish {url})<br>\nwhere {url} is the url that the guide will be published at (which is the path entered into the spreadsheet above}</p>\n</blockquote>",
        "id": 229355694,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1615230263
    },
    {
        "content": "<p>I have one hosted here: <a href=\"https://docs.ehealth.sundhed.dk/latest/ig/index.html\">https://docs.ehealth.sundhed.dk/latest/ig/index.html</a></p>",
        "id": 229355880,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1615230346
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191427\">@Jens Villadsen</span> i am at the same point as <span class=\"user-mention\" data-user-id=\"191916\">@ Bob Milius</span> . It worked, now it doesn't seem to run the full cycle. <br>\nI think your example does not go through the steps that activate the history page, the php redirects,...<br>\nFor me the proof will be when I see again the publish box saying \"This is the official publication of ......\" <br>\nAll of that comes (used to) by magic in the publisher.</p>",
        "id": 229361656,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1615232418
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"192587\">@David Pyke</span> That is the point that Bob raises - we seem to be missing some of the magic words.<br>\nI'm happy to help with whatever documentation /scripring is useful, but I am missing something still.</p>",
        "id": 229362086,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1615232610
    },
    {
        "content": "<p>yep - I removed that box and don't use history - that's correct</p>",
        "id": 229362611,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1615232800
    },
    {
        "content": "<p>we put history outside the IG: <a href=\"https://docs.ehealth.sundhed.dk/\">https://docs.ehealth.sundhed.dk/</a> - that way - the IG is independent of previous locations and so on</p>",
        "id": 229362780,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1615232874
    },
    {
        "content": "<p>There's really powerful magic in the other way. I've seen it once and I'm chasing it since</p>",
        "id": 229364827,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1615233692
    },
    {
        "content": "<p>Hence the wait for <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span>'s magic</p>",
        "id": 229365234,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1615233851
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191427\">Jens Villadsen</span> <a href=\"#narrow/stream/179252-IG-creation/topic/IG.20publication.3A.20registry.20.26.20history/near/229362780\">said</a>:</p>\n<blockquote>\n<p>we put history outside the IG: <a href=\"https://docs.ehealth.sundhed.dk/\">https://docs.ehealth.sundhed.dk/</a> - that way - the IG is independent of previous locations and so on</p>\n</blockquote>\n<p>It looks like your IG also doesn't do the redirects. E.g., <br>\n<a href=\"https://docs.ehealth.sundhed.dk/v1.0.0/ig/StructureDefinition-ehealth-patient.html\">https://docs.ehealth.sundhed.dk/v1.0.0/ig/StructureDefinition-ehealth-patient.html</a> says the the Official URL is<br>\n<a href=\"http://ehealth.sundhed.dk/fhir/StructureDefinition/ehealth-patient\">http://ehealth.sundhed.dk/fhir/StructureDefinition/ehealth-patient</a><br>\nbut trying to go there fails.</p>",
        "id": 229365333,
        "sender_full_name": " Bob Milius",
        "timestamp": 1615233907
    },
    {
        "content": "<p>yep - that sounds correct</p>",
        "id": 229376730,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1615238743
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191832\">Jose Costa Teixeira</span> <a href=\"#narrow/stream/179252-IG-creation/topic/IG.20publication.3A.20registry.20.26.20history/near/229365234\">said</a>:</p>\n<blockquote>\n<p>Hence the wait for <span class=\"user-mention silent\" data-user-id=\"191316\">Grahame Grieve</span>'s magic</p>\n</blockquote>\n<p>I agree</p>",
        "id": 229376896,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1615238785
    },
    {
        "content": "<p>After a lot of trial and error, I finally got a process to work for me! <span aria-label=\"tada\" class=\"emoji emoji-1f389\" role=\"img\" title=\"tada\">:tada:</span></p>\n<p>To remind you, I am publishing organization-specific, non-HL7 IGs hosted by our own server. I had been having issues with the newer versions of the IG Publisher in creating the history page and redirect scripts. This process works for me with v1.1.63.</p>\n<p>For me the key is to use the milestone url when running <code>-publish</code>. Previously, I had been using the canonical. <br>\ne.g.</p>\n<div class=\"codehilite\"><pre><span></span><code>$ java -jar ../publisher.jar -ig ig.ini -publish http://example.org/test-ig/0.1.0\n</code></pre></div>\n<p>There are still issues raised in the publisher, but the history file seems to build okay <br>\nand the php redirects are created for Apache.</p>\n<p>Here's a short version of my process using <code>sushi --init</code> to create an example IG.</p>\n<div class=\"codehilite\"><pre><span></span><code># make local clones of ig-registry and fhir-ig-history-template\n$ git clone https://github.com/FHIR/ig-registry.git\n$ git clone https://github.com/HL7/fhir-ig-history-template.git\n$ sushi --init\n# Name (Default: ExampleIG): TestIG\n# Id (Default: fhir.example): test-ig\n# Canonical (Default: http://example.org): http://example.org/test-ig\n# Status (Default: draft):\n# Version (Default: 0.1.0):\n# Initialize SUSHI project in /Users/bob/src/fsh/TestIG? [y/n]: y\n\n$ cd TestIG\n$ java -jar ../publisher.jar -ig ig.ini\n$ java -jar ../publisher.jar -no-sushi -ig ig.ini -publish http://example.org/test-ig/0.1.0\n$ mkdir website\n$ cp -r ../fhir-ig-history-template/* website/\n# create/edit website/package-list.json; see below for what I used\n# create website/publish.ini; see below\n$ cp -r output/* website/\n$ mkdir website/0.1.0\n$ cp -r output/* website/0.1.0/\n$ java -jar ../publisher.jar -publish-update -folder website -registry ../ig-registry/fhir-ig-list.json\n\n# look to see if php redirects were created\n$ find website -name &quot;*php*&quot; -print\nwebsite/StructureDefinition/MyPatient/index.php\nwebsite/0.1.0/StructureDefinition/MyPatient/index.php\nwebsite/0.1.0/ImplementationGuide/test-ig/index.php\nwebsite/ImplementationGuide/test-ig/index.php\n</code></pre></div>\n<div class=\"spoiler-block\"><div class=\"spoiler-header\">\n<p>website/publish.ini</p>\n</div><div class=\"spoiler-content\" aria-hidden=\"true\">\n<p>[website]<br>\nstyle=fhir.layout<br>\nserver=apache<br>\nurl=http://example.org/test-ig<br>\norg=Testing <br>\nno-registry=1</p>\n<p>[feeds]<br>\npackage=package-feed.xml<br>\npublication=publication-feed.xml</p>\n</div></div>\n<div class=\"spoiler-block\"><div class=\"spoiler-header\">\n<p>website/package-list.json</p>\n</div><div class=\"spoiler-content\" aria-hidden=\"true\">\n<p>{<br>\n    \"package-id\": \"test-ig\",<br>\n    \"title\": \"TestIG\",<br>\n    \"canonical\": \"<a href=\"http://example.org/test-ig\">http://example.org/test-ig</a>\",<br>\n    \"introduction\": \"Test Implementation Guide\",<br>\n    \"category\": \"Research\",<br>\n    \"list\": [<br>\n        {<br>\n            \"version\": \"current\",<br>\n            \"desc\": \"Continuous Integration Build (latest in version control)\",<br>\n            \"path\": \"<a href=\"http://build.example.org/test-ig\">http://build.example.org/test-ig</a>\",<br>\n            \"status\": \"ci-build\",<br>\n            \"current\": true<br>\n        },<br>\n        {<br>\n            \"version\": \"0.1.0\",<br>\n            \"date\": \"2021-03-13\",<br>\n            \"desc\": \"Bob's IG\",<br>\n            \"path\": \"<a href=\"http://example.org/test-ig/0.1.0\">http://example.org/test-ig/0.1.0</a>\",<br>\n            \"status\": \"trial-use\",<br>\n            \"fhirversion\": \"4.0.1\",<br>\n            \"sequence\": \"Trial Use 1\",<br>\n            \"current\": true<br>\n        }<br>\n    ]<br>\n}</p>\n</div></div>\n<p><span class=\"user-mention\" data-user-id=\"191832\">@Jose Costa Teixeira</span></p>",
        "id": 230239632,
        "sender_full_name": " Bob Milius",
        "timestamp": 1615729927
    },
    {
        "content": "<p>Confirming this works, THANK YOU <span class=\"user-mention\" data-user-id=\"191916\">@ Bob Milius</span> .</p>",
        "id": 230241369,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1615731738
    },
    {
        "content": "<p>I will  thendocument this, how to publish an existing IG (many of my problems were inconsistencies between urls and ids, which don't exist with <code>sushi --init</code>.</p>",
        "id": 230241414,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1615731821
    },
    {
        "content": "<p>Also I was not using the package-list.json correctly</p>",
        "id": 230241435,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1615731834
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191832\">Jose Costa Teixeira</span> <a href=\"#narrow/stream/179252-IG-creation/topic/IG.20publication.3A.20registry.20.26.20history/near/230241369\">said</a>:</p>\n<blockquote>\n<p>it doesn't create the history page but I think I can take it from there</p>\n</blockquote>\n<p>It creates the history page for me. I'd like to hear if you figure out why it didn't work for you.</p>",
        "id": 230242278,
        "sender_full_name": " Bob Milius",
        "timestamp": 1615732618
    },
    {
        "content": "<p>if you click on the directory of publisher versions<br>\n<a href=\"/user_uploads/10155/2D4VRxh44loTVA9Z9xt4430B/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/2D4VRxh44loTVA9Z9xt4430B/image.png\" title=\"image.png\"><img src=\"/user_uploads/10155/2D4VRxh44loTVA9Z9xt4430B/image.png\"></a></div>",
        "id": 230242609,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1615732969
    },
    {
        "content": "<p>does it get you anywhere?</p>",
        "id": 230242610,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1615732974
    },
    {
        "content": "<p>mine does not seem to touch the history pages</p>",
        "id": 230242625,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1615732989
    },
    {
        "content": "<p>where do you see the history page? in what file?</p>",
        "id": 230242632,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1615733003
    },
    {
        "content": "<p>hmm... that works for me. It resolves to <a href=\"http://example.org/test-ig/history.html\">http://example.org/test-ig/history.html</a>. So I set up a local apache/php server on my laptop, and set <a href=\"http://example.org\">example.org</a> to localhost in my <code>/etc/hosts</code> file.</p>",
        "id": 230242831,
        "sender_full_name": " Bob Milius",
        "timestamp": 1615733189
    },
    {
        "content": "<p>do you see a <code>history.html</code> file in your <code>website</code> folder?</p>",
        "id": 230242881,
        "sender_full_name": " Bob Milius",
        "timestamp": 1615733242
    },
    {
        "content": "<p>If you just view <code>website/index.html</code> with your browser, and don't have a local web server, then you're right - it won't find the history file when you click on <code>Directory of published versions</code>. I installed apache &amp; php on my laptop and copied the contents of <code>website</code> to where my local server finds it (in my case it's <code>~/Sites/test-ig</code>), and here's my <code>/etc/hosts</code> file so it finds <code>example.org</code>.</p>\n<div class=\"codehilite\"><pre><span></span><code>##\n# Host Database\n#\n#\n# localhost is used to configure the loopback interface\n# when the system is booting. Do not change this entry.\n##\n127.0.0.1        localhost\n255.255.255.255 broadcasthost\n\n127.0.0.1    example.org\n::1         localhost\n</code></pre></div>",
        "id": 230243553,
        "sender_full_name": " Bob Milius",
        "timestamp": 1615733927
    },
    {
        "content": "<p>I have no history.html on my website. Did I miss some step?</p>",
        "id": 230248743,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1615738172
    },
    {
        "content": "<p>i missed one step it seems</p>",
        "id": 230249716,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1615738592
    },
    {
        "content": "<p>After making a local copy of <code>fhir-ig-history-template</code> in the parent directory, copy the contents into <code>website</code></p>\n<div class=\"codehilite\"><pre><span></span><code>$ cp -r ../fhir-ig-history-template/* website/\n</code></pre></div>\n<p>then proceed to create the <code>website/publish.ini</code> and <code>website/package-list.json</code>  files.</p>",
        "id": 230251385,
        "sender_full_name": " Bob Milius",
        "timestamp": 1615739333
    },
    {
        "content": "<p><code>history.html</code> is found there.</p>",
        "id": 230251471,
        "sender_full_name": " Bob Milius",
        "timestamp": 1615739376
    },
    {
        "content": "<p>yes, I did miss that step.</p>",
        "id": 230253277,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1615740135
    },
    {
        "content": "<p>thank you</p>",
        "id": 230253282,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1615740136
    },
    {
        "content": "<p>it gives an error though: </p>\n<div class=\"codehilite\"><pre><span></span><code>java.io.IOException: Source &#39;C:\\ImplementationGuides\\TestIG\\website\\dist-hist&#39; and destination &#39;C:\\ImplementationGuides\\TestIG\\website\\dist-hist&#39; are the same\n        at org.apache.commons.io.FileUtils.copyDirectory(FileUtils.java:1351)\n        at org.apache.commons.io.FileUtils.copyDirectory(FileUtils.java:1246)\n        at org.apache.commons.io.FileUtils.copyDirectory(FileUtils.java:1215)\n        at org.hl7.fhir.igtools.publisher.utils.IGReleaseUpdater.checkCopyFolderFromRoot(IGReleaseUpdater.java:261)\n        at org.hl7.fhir.igtools.publisher.utils.IGReleaseUpdater.check(IGReleaseUpdater.java:216)\n        at org.hl7.fhir.igtools.publisher.utils.IGWebSiteMaintainer.execute(IGWebSiteMaintainer.java:106)\n        at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:8249)\n\n    Source &#39;C:\\ImplementationGuides\\TestIG\\website\\dist-hist&#39; and destination &#39;C:\\ImplementationGuides\\TestIG\\website\\dist-hist&#39; are the same\n</code></pre></div>",
        "id": 230253436,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1615740217
    },
    {
        "content": "<p>this kept me busy last year, but now I am ignoring it and it does what's needed.</p>",
        "id": 230253487,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1615740247
    },
    {
        "content": "<p>Yep, I get the same error. It still proceeds and the final output looks ok.</p>\n<div class=\"spoiler-block\"><div class=\"spoiler-header\">\n<p>my session for the last step</p>\n</div><div class=\"spoiler-content\" aria-hidden=\"true\">\n<p>$ java -jar ../publisher.jar -publish-update -folder website -registry ../ig-registry/fhir-ig-list.json <br>\nUpdate the website at /Users/bob/src/fsh/TestIG/website<br>\nThe public URL is at <a href=\"http://example.org/test-ig\">http://example.org/test-ig</a><br>\nUpdate the public registry at ../ig-registry/fhir-ig-list.json<br>\nThe server type is APACHE<br>\nlooking for IGs in /Users/bob/src/fsh/TestIG/website<br>\nfound 1 IGs to update:<br>\n - /Users/bob/src/fsh/TestIG/website<br>\nEnter y to continue: y<br>\nUpdate /Users/bob/src/fsh/TestIG/website for <a href=\"http://example.org/test-ig\">http://example.org/test-ig</a><br>\n  /Users/bob/src/fsh/TestIG/website/0.1.0: This page is part of the TestIG (v0.1.0: Trial Use 1) based on &lt;a href=\"http://hl7.org/fhir/R4\"&gt;FHIR R4&lt;/a&gt;. This is the current published version in it's permanent home (it will always be available at this URL).  For a full list of available versions, see the &lt;a href=\"http://example.org/test-ig/history.html\"&gt;Directory of published versions &lt;img src=\"external.png\" style=\"text-align: baseline\"&gt;&lt;/a&gt;<br>\n  .. 11 files checked, 11 updated<br>\n  .. 7 clones checked, 14 updated<br>\nIG resource ImplementationGuide-test-ig.xml: no Jurisdiction. Using null<br>\n  .. 2 redirections (2 created/updated)<br>\n  /Users/bob/src/fsh/TestIG/website: This page is part of the TestIG (v0.1.0: Trial Use 1) based on &lt;a href=\"http://hl7.org/fhir/R4\"&gt;FHIR R4&lt;/a&gt;. This is the current published version.  For a full list of available versions, see the &lt;a href=\"http://example.org/test-ig/history.html\"&gt;Directory of published versions &lt;img src=\"external.png\" style=\"text-align: baseline\"&gt;&lt;/a&gt;<br>\n  .. 11 files checked, 11 updated<br>\n  .. 14 clones checked, 14 updated<br>\nIG resource ImplementationGuide-test-ig.xml: no Jurisdiction. Using null<br>\n  .. 2 redirections (2 created/updated)<br>\njava.io.IOException: Source '/Users/bob/src/fsh/TestIG/website/dist-hist' and destination '/Users/bob/src/fsh/TestIG/website/dist-hist' are the same<br>\n        at org.apache.commons.io.FileUtils.copyDirectory(FileUtils.java:1351)<br>\n        at org.apache.commons.io.FileUtils.copyDirectory(FileUtils.java:1246)<br>\n        at org.apache.commons.io.FileUtils.copyDirectory(FileUtils.java:1215)<br>\n        at org.hl7.fhir.igtools.publisher.utils.IGReleaseUpdater.checkCopyFolderFromRoot(IGReleaseUpdater.java:261)<br>\n        at org.hl7.fhir.igtools.publisher.utils.IGReleaseUpdater.check(IGReleaseUpdater.java:216)<br>\n        at org.hl7.fhir.igtools.publisher.utils.IGWebSiteMaintainer.execute(IGWebSiteMaintainer.java:106)<br>\n        at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:8249)</p>\n<div class=\"codehilite\"><pre><span></span><code>Source &#39;/Users/bob/src/fsh/TestIG/website/dist-hist&#39; and destination &#39;/Users/bob/src/fsh/TestIG/website/dist-hist&#39; are the same\n</code></pre></div>\n\n<p>==================== <br>\nProcessing Feeds for /Users/bob/src/fsh/TestIG/website<br>\nBuild Feed. <br>\n  rootFolder=/Users/bob/src/fsh/TestIG/website<br>\n  packageFile=/Users/bob/src/fsh/TestIG/website/package-feed.xml<br>\n  publicationFile=/Users/bob/src/fsh/TestIG/website/publication-feed.xml<br>\n  orgName=Testing<br>\n  thisUrl=http://example.org/test-ig/package-feed.xml<br>\n  rootUrl=http://example.org/test-ig<br>\nLoad from /Users/bob/src/fsh/TestIG/website/package-list.json<br>\nSave Package feed to /Users/bob/src/fsh/TestIG/website/package-feed.xml<br>\nSave publication feed to /Users/bob/src/fsh/TestIG/website/publication-feed.xml<br>\nKnown status codes: [trial-use]<br>\nFinished Processing Feeds<br>\n==================== <br>\ntest-ig (<a href=\"http://example.org/test-ig\">http://example.org/test-ig</a>): TestIG @ <a href=\"http://build.example.org/test-ig\">http://build.example.org/test-ig</a><br>\n  release: Trial Use 1 0.1.0/4.0.1 @ <a href=\"http://example.org/test-ig/0.1.0\">http://example.org/test-ig/0.1.0</a><br>\ntest-ig (<a href=\"http://example.org/test-ig\">http://example.org/test-ig</a>): TestIG @ <a href=\"http://build.example.org/test-ig\">http://build.example.org/test-ig</a><br>\n  release: Trial Use 1 0.1.0/4.0.1 @ <a href=\"http://example.org/test-ig/0.1.0\">http://example.org/test-ig/0.1.0</a></p>\n</div></div>",
        "id": 230253678,
        "sender_full_name": " Bob Milius",
        "timestamp": 1615740447
    },
    {
        "content": "<p>I hope we'll figure out what is needed to avoid that.</p>",
        "id": 230253936,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1615740758
    },
    {
        "content": "<p>Meanwhile I'll get on to changing the history template (i.e. apply my template to the history page as well)</p>",
        "id": 230253961,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1615740808
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191832\">Jose Costa Teixeira</span> <a href=\"#narrow/stream/179252-IG-creation/topic/IG.20publication.3A.20registry.20.26.20history/near/230253961\">said</a>:</p>\n<blockquote>\n<p>Meanwhile I'll get on to changing the history template (i.e. apply my template to the history page as well)</p>\n</blockquote>\n<p>I'd love to get any advice on best practices for changing the <code>fhir-ig-history-template</code> for my org. There's a bit more I need to learn about how it's applied and how I can modify it for a non-HL7 IG.</p>",
        "id": 230520627,
        "sender_full_name": " Bob Milius",
        "timestamp": 1615904735
    },
    {
        "content": "<p>Do you have a template for your org?</p>",
        "id": 230532254,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1615908296
    },
    {
        "content": "<p>There is a couple of things there that we may need to discuss with Grahame (i.e. that error we found) but I can confirm it can be done</p>",
        "id": 230532454,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1615908362
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191832\">Jose Costa Teixeira</span> <a href=\"#narrow/stream/179252-IG-creation/topic/IG.20publication.3A.20registry.20.26.20history/near/230532254\">said</a>:</p>\n<blockquote>\n<p>Do you have a template for your org?</p>\n</blockquote>\n<p>I created a local template for our IG following the pattern you described, i.e., creating a local <code>mytemplate</code> folder containing the differences from the template it's dependent on (described in the <code>mytemplate/package/package.json</code>). But for the history page I'm copying the entire contents of <code>fhir-ig-history-template</code> into the <code>website</code>, and the <code> -publish-update</code> does some kind of magic. So I'm guessing I have to edit the original history template and not sure where I should change things, <code>dist-hist</code>? <code>assets-hist</code>? I notice after the <code>-publish-update</code> runs, the <code>dist-hist</code> directory disappears from <code>website</code>.</p>",
        "id": 230539347,
        "sender_full_name": " Bob Milius",
        "timestamp": 1615910528
    },
    {
        "content": "<p>yes, those are the things we need to check with Grahame</p>",
        "id": 230540847,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1615910821
    },
    {
        "content": "<p>I hope to have a \"automated\" way to copy the header and footer from the template to the history template, but in the meanwhile, you can do that:</p>",
        "id": 230541190,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1615910892
    },
    {
        "content": "<p>here's an example: <a href=\"https://github.com/HL7/fhir-ig-history-template/compare/master...openhie:master\">https://github.com/HL7/fhir-ig-history-template/compare/master...openhie:master</a></p>",
        "id": 230542731,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1615911264
    },
    {
        "content": "<p>did someone summarize the final steps that worked? I am starting this for two IGs, so don't want to re-learn</p>",
        "id": 230713924,
        "sender_full_name": "John Moehrke",
        "timestamp": 1615996366
    },
    {
        "content": "<p>The steps above do work for a newly created IG. I did not go through it yet for an existing IG. It should be the same, but the versions, package-list etc will perhaps need to be checked.</p>",
        "id": 230715676,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1615996860
    },
    {
        "content": "<p>I will be preparing this (perhaps over the weekend) for those instructions + the checks (e.g. make sure that there is an entry in the package-list that matches the canonical url... that sort of things)</p>",
        "id": 230716071,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1615996925
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191404\">@John Moehrke</span> meanwhile, are those IGs IHE IG's? I can help prepare the history template for IHE - it needs some things to be done.</p>",
        "id": 230716325,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1615996970
    },
    {
        "content": "<p>yes, FormatCode and MHD</p>",
        "id": 230717487,
        "sender_full_name": "John Moehrke",
        "timestamp": 1615997204
    },
    {
        "content": "<p>A Simple doc explaining the changes needed would be very helpful</p>",
        "id": 230720205,
        "sender_full_name": "David Pyke",
        "timestamp": 1615997800
    },
    {
        "content": "<p>I think I got thru it. my local copy does have the history file problem. I understand that will magjically clear up when the content is on a web server?</p>",
        "id": 230721109,
        "sender_full_name": "John Moehrke",
        "timestamp": 1615998017
    },
    {
        "content": "<p>I seem to have a history.html file, it is following IHE template (red)</p>",
        "id": 230721281,
        "sender_full_name": "John Moehrke",
        "timestamp": 1615998076
    },
    {
        "content": "<p>IHE template red?</p>",
        "id": 230722591,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1615998518
    },
    {
        "content": "<p><a href=\"https://ihe.github.io/publications/fhir/ihe.formatcode.fhir/history.html\">https://ihe.github.io/publications/fhir/ihe.formatcode.fhir/history.html</a></p>",
        "id": 230722637,
        "sender_full_name": "John Moehrke",
        "timestamp": 1615998537
    },
    {
        "content": "<p><a href=\"https://ihe.github.io/publications/fhir/ihe.formatcode.fhir/index.html\">https://ihe.github.io/publications/fhir/ihe.formatcode.fhir/index.html</a></p>",
        "id": 230722668,
        "sender_full_name": "John Moehrke",
        "timestamp": 1615998550
    },
    {
        "content": "<p>that looks like HL7 template red</p>",
        "id": 230722744,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1615998572
    },
    {
        "content": "<p>will this clear up when I move it to the formal web site?</p>",
        "id": 230722748,
        "sender_full_name": "John Moehrke",
        "timestamp": 1615998573
    },
    {
        "content": "<p>and something is missing</p>",
        "id": 230722799,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1615998591
    },
    {
        "content": "<p>yup, sorry that is what I meant to type</p>",
        "id": 230722801,
        "sender_full_name": "John Moehrke",
        "timestamp": 1615998592
    },
    {
        "content": "<p><a href=\"/user_uploads/10155/5G5t4ABJ1IYXzz_wqyYAo6rP/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/5G5t4ABJ1IYXzz_wqyYAo6rP/image.png\" title=\"image.png\"><img src=\"/user_uploads/10155/5G5t4ABJ1IYXzz_wqyYAo6rP/image.png\"></a></div>",
        "id": 230722805,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1615998593
    },
    {
        "content": "<p>should be like this</p>",
        "id": 230722819,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1615998599
    },
    {
        "content": "<p>it shows that way in my filesystem, but not on <a href=\"http://github.io\">github.io</a></p>",
        "id": 230723121,
        "sender_full_name": "John Moehrke",
        "timestamp": 1615998682
    },
    {
        "content": "<p>so I seem to have missed something. My status bar shows \"Publication Build: This will be filled in by the publication tooling\"</p>",
        "id": 230727629,
        "sender_full_name": "John Moehrke",
        "timestamp": 1616000241
    },
    {
        "content": "<p>so it does seem to have something useful in the subdirectory, but not the root... I must not have understood something</p>",
        "id": 230728305,
        "sender_full_name": "John Moehrke",
        "timestamp": 1616000455
    },
    {
        "content": "<p><a href=\"https://profiles.ihe.net/fhir/ihe.formatcode.fhir/0.2.4/index.html\">https://profiles.ihe.net/fhir/ihe.formatcode.fhir/0.2.4/index.html</a></p>",
        "id": 230728359,
        "sender_full_name": "John Moehrke",
        "timestamp": 1616000472
    },
    {
        "content": "<p>vs <a href=\"https://profiles.ihe.net/fhir/ihe.formatcode.fhir/index.html\">https://profiles.ihe.net/fhir/ihe.formatcode.fhir/index.html</a></p>",
        "id": 230728391,
        "sender_full_name": "John Moehrke",
        "timestamp": 1616000485
    },
    {
        "content": "<p>and history is not working</p>",
        "id": 230728490,
        "sender_full_name": "John Moehrke",
        "timestamp": 1616000522
    },
    {
        "content": "<p>That is taken care of by the publisher, if it is well fed.<br>\nI'm preparing a presentation for the next hours, after that I expect to document / script these steps. I've spent so many hours no this that I hope to find the issue quickly.</p>",
        "id": 230732382,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1616001936
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191916\">@ Bob Milius</span> I don't have the php files. your last step is to look for them, I don't find them.</p>",
        "id": 230740839,
        "sender_full_name": "John Moehrke",
        "timestamp": 1616004914
    },
    {
        "content": "<p>I have transcribed what I understand is the process into a wiki page on the IHE github where we will correct it until it works.. and then wait for it to break again next week.  <br>\n<a href=\"https://github.com/IHE/supplement-template/wiki/IG-build-for-Publication\">https://github.com/IHE/supplement-template/wiki/IG-build-for-Publication</a></p>",
        "id": 230740974,
        "sender_full_name": "John Moehrke",
        "timestamp": 1616004962
    },
    {
        "content": "<p>is the copy of the output to the website and also the website/0.1.0 correct? <br>\nI ask, because my 0.1.0 has a status bar with useful text, and the one in website has tbd</p>",
        "id": 230741162,
        "sender_full_name": "John Moehrke",
        "timestamp": 1616005012
    },
    {
        "content": "<p>has anyone else tried to build a from the IG builder for publication on somewhere other than HL7? I think I am close, but the history is not working given the pseudocde <span class=\"user-mention\" data-user-id=\"191916\">@ Bob Milius</span> offered.</p>",
        "id": 230872362,
        "sender_full_name": "John Moehrke",
        "timestamp": 1616077714
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> ?</p>",
        "id": 230872390,
        "sender_full_name": "John Moehrke",
        "timestamp": 1616077730
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191404\">John Moehrke</span> <a href=\"#narrow/stream/179252-IG-creation/topic/IG.20publication.3A.20registry.20.26.20history/near/230740839\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"191916\"> Bob Milius</span> I don't have the php files. your last step is to look for them, I don't find them.</p>\n</blockquote>\n<p>For php, you need to set the server type to apache in <code>website/publish.ini</code>. Here's what I used in this example:</p>\n<div class=\"codehilite\"><pre><span></span><code>[website]\nstyle=fhir.layout\nserver=apache\nurl=http://example.org/test-ig\norg=Testing\nno-registry=1\n\n[feeds]\npackage=package-feed.xml\npublication=publication-feed.xml\n</code></pre></div>\n<p>and then in the last step you should see output indicating the redirections are being created, e.g.,</p>\n<div class=\"codehilite\"><pre><span></span><code>...\nIG resource ImplementationGuide-test-ig.xml: no Jurisdiction. Using null\n.. 2 redirections (2 created/updated)\n/Users/bob/src/fsh/TestIG/website: This page is part of the TestIG (v0.1.0: Trial Use 1) based on &lt;a href=&quot;http://hl7.org/fhir/R4&quot;&gt;FHIR R4&lt;/a&gt;. This is the current published version. For a full list of available versions, see the &lt;a href=&quot;http://example.org/test-ig/history.html&quot;&gt;Directory of published versions &lt;img src=&quot;external.png&quot; style=&quot;text-align: baseline&quot;&gt;&lt;/a&gt;\n.. 11 files checked, 11 updated\n.. 14 clones checked, 14 updated\nIG resource ImplementationGuide-test-ig.xml: no Jurisdiction. Using null\n.. 2 redirections (2 created/updated)\n...\n</code></pre></div>\n<p>hope this helps.</p>",
        "id": 230873564,
        "sender_full_name": " Bob Milius",
        "timestamp": 1616078111
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191404\">John Moehrke</span> <a href=\"#narrow/stream/179252-IG-creation/topic/IG.20publication.3A.20registry.20.26.20history/near/230740974\">said</a>:</p>\n<blockquote>\n<p>I have transcribed what I understand is the process into a wiki page on the IHE github where we will correct it until it works.. and then wait for it to break again next week.  <br>\n<a href=\"https://github.com/IHE/supplement-template/wiki/IG-build-for-Publication\">https://github.com/IHE/supplement-template/wiki/IG-build-for-Publication</a></p>\n</blockquote>\n<p>Can you put in the example you're using for the <code>package-list.json</code> file?</p>",
        "id": 230874688,
        "sender_full_name": " Bob Milius",
        "timestamp": 1616078517
    },
    {
        "content": "<p>...or we can wait for debug AND instructions which I hope to prepare tomorrow or during the weekend.</p>",
        "id": 230875878,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1616078965
    },
    {
        "content": "<p>Another place to check is to make sure the version in your <code>ImplementationGuide-[name].json</code> matches the version in your <code>website/package-list.json</code>.</p>",
        "id": 230876663,
        "sender_full_name": " Bob Milius",
        "timestamp": 1616079227
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191916\">@ Bob Milius</span> here is my IG github with the publish.ini and package-list.json I used  <a href=\"https://github.com/IHE/FormatCode\">https://github.com/IHE/FormatCode</a></p>",
        "id": 230878091,
        "sender_full_name": "John Moehrke",
        "timestamp": 1616079706
    },
    {
        "content": "<p>a question that I am unclear on is... why do I need to copy my current build into both website and also website/1.2.3 ?   I find that the website/1.2.3 does look different, so I am guessing the build fixes some things.</p>",
        "id": 230878313,
        "sender_full_name": "John Moehrke",
        "timestamp": 1616079767
    },
    {
        "content": "<p>Try adding <code>\"current\" : true</code> to the entry for version 0.2.4 in your package-list.json<br>\nAs I understand it, the <code>website/1.2.3</code> is the permanent home. The top-level <code>website/</code> is the current release. You should have two entries for <code>current</code>. One for the ci-build, and one for the the latest release. At least that works for me.</p>",
        "id": 230881968,
        "sender_full_name": " Bob Milius",
        "timestamp": 1616080866
    },
    {
        "content": "<p>for example,</p>\n<div class=\"codehilite\"><pre><span></span><code>{\n    &quot;package-id&quot;: &quot;bobig&quot;,\n    &quot;title&quot;: &quot;BobIG&quot;,\n    &quot;canonical&quot;: &quot;http://example.org/bobig&quot;,\n    &quot;introduction&quot;: &quot;This is Bob&#39;s Implementation Guide&quot;,\n    &quot;category&quot;: &quot;Research&quot;,\n    &quot;list&quot;: [\n        {\n            &quot;version&quot;: &quot;current&quot;,\n            &quot;desc&quot;: &quot;Continuous Integration Build (latest in version control)&quot;,\n            &quot;path&quot;: &quot;http://build.example.org/bobig&quot;,\n            &quot;status&quot;: &quot;ci-build&quot;,\n            &quot;current&quot;: true\n        },\n        {\n            &quot;version&quot;: &quot;0.2.0&quot;,\n            &quot;date&quot;: &quot;2021-03-13&quot;,\n            &quot;desc&quot;: &quot;Bob&#39;s IG&quot;,\n            &quot;path&quot;: &quot;http://example.org/bobig/0.2.0&quot;,\n            &quot;status&quot;: &quot;trial-use&quot;,\n            &quot;fhirversion&quot;: &quot;4.0.1&quot;,\n            &quot;sequence&quot;: &quot;Trial Use 1&quot;,\n            &quot;current&quot;: true\n        }\n    ]\n}\n</code></pre></div>\n<p>results in this...<br>\n<a href=\"/user_uploads/10155/9sLvBI6vKe6O4IwV2cqe7vnH/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/9sLvBI6vKe6O4IwV2cqe7vnH/image.png\" title=\"image.png\"><img src=\"/user_uploads/10155/9sLvBI6vKe6O4IwV2cqe7vnH/image.png\"></a></div>",
        "id": 230883487,
        "sender_full_name": " Bob Milius",
        "timestamp": 1616081325
    },
    {
        "content": "<p>does package-list.json go into both website and also website/1.2.3?</p>",
        "id": 230885447,
        "sender_full_name": "John Moehrke",
        "timestamp": 1616081959
    },
    {
        "content": "<p>no, just website</p>",
        "id": 230886392,
        "sender_full_name": " Bob Milius",
        "timestamp": 1616082249
    },
    {
        "content": "<p>that did not seem to solve it.</p>",
        "id": 230886601,
        "sender_full_name": "John Moehrke",
        "timestamp": 1616082323
    },
    {
        "content": "<p>I think I must have done something wrong on the final publisher magjic.</p>",
        "id": 230886764,
        "sender_full_name": "John Moehrke",
        "timestamp": 1616082364
    },
    {
        "content": "<p>oh, I likely need to re-run that</p>",
        "id": 230886877,
        "sender_full_name": "John Moehrke",
        "timestamp": 1616082394
    },
    {
        "content": "<p>I do get an error on that </p>\n<div class=\"codehilite\"><pre><span></span><code>  .. 0 redirections (0 created/updated)\njava.io.IOException: Source &#39;C:\\Users\\john.moehrke\\Git\\FormatCode\\website\\dist-hist&#39; and destination &#39;C:\\Users\\john.moehrke\\Git\\FormatCode\\website\\dist-hist&#39; are the same\n        at org.apache.commons.io.FileUtils.copyDirectory(FileUtils.java:1351)\n        at org.apache.commons.io.FileUtils.copyDirectory(FileUtils.java:1246)\n        at org.apache.commons.io.FileUtils.copyDirectory(FileUtils.java:1215)\n        at org.hl7.fhir.igtools.publisher.utils.IGReleaseUpdater.checkCopyFolderFromRoot(IGReleaseUpdater.java:261)\n        at org.hl7.fhir.igtools.publisher.utils.IGReleaseUpdater.check(IGReleaseUpdater.java:216)\n        at org.hl7.fhir.igtools.publisher.utils.IGWebSiteMaintainer.execute(IGWebSiteMaintainer.java:106)\n        at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:8249)\n\n ```\n</code></pre></div>",
        "id": 230887245,
        "sender_full_name": "John Moehrke",
        "timestamp": 1616082516
    },
    {
        "content": "<p>yep, I get that too. Does it complete?</p>",
        "id": 230887310,
        "sender_full_name": " Bob Milius",
        "timestamp": 1616082549
    },
    {
        "content": "<p>I guess, yes</p>",
        "id": 230887393,
        "sender_full_name": "John Moehrke",
        "timestamp": 1616082581
    },
    {
        "content": "<p>no php files in the website folder</p>",
        "id": 230887537,
        "sender_full_name": "John Moehrke",
        "timestamp": 1616082618
    },
    {
        "content": "<p>I do seem to have a history.html that renders okay in the browser on my filesystem</p>",
        "id": 230887770,
        "sender_full_name": "John Moehrke",
        "timestamp": 1616082693
    },
    {
        "content": "<p>I will try to update the actual web-site and see what happens</p>",
        "id": 230887820,
        "sender_full_name": "John Moehrke",
        "timestamp": 1616082711
    },
    {
        "content": "<p>Did you look in the subfolders? I was missing that initially.</p>\n<div class=\"codehilite\"><pre><span></span><code>$ find website -name &quot;*.php&quot; -print\nwebsite/StructureDefinition/MyPatient/index.php\nwebsite/ImplementationGuide/bobig/index.php\nwebsite/0.2.0/StructureDefinition/MyPatient/index.php\nwebsite/0.2.0/ImplementationGuide/bobig/index.php\n</code></pre></div>",
        "id": 230888768,
        "sender_full_name": " Bob Milius",
        "timestamp": 1616082987
    },
    {
        "content": "<p>I looked recursively in my filesystem website folder and find no *.php files anywhere</p>",
        "id": 230888999,
        "sender_full_name": "John Moehrke",
        "timestamp": 1616083070
    },
    {
        "content": "<p>I just noticed I must not have copied recursively the fhir-ig-history-template... working on that now</p>",
        "id": 230890193,
        "sender_full_name": "John Moehrke",
        "timestamp": 1616083318
    },
    {
        "content": "<p>fyi, the fhir-ig-history-template will overwrite your <code>package-list.json file</code> (learned from experience).</p>",
        "id": 230890667,
        "sender_full_name": " Bob Milius",
        "timestamp": 1616083393
    },
    {
        "content": "<p>right. one more time</p>",
        "id": 230892114,
        "sender_full_name": "John Moehrke",
        "timestamp": 1616083702
    },
    {
        "content": "<p>so, no luck.</p>",
        "id": 230893333,
        "sender_full_name": "John Moehrke",
        "timestamp": 1616083987
    },
    {
        "content": "<p>history.html displays fine out of my filesystem, but not on the actual web server</p>",
        "id": 230893786,
        "sender_full_name": "John Moehrke",
        "timestamp": 1616084102
    },
    {
        "content": "<p>what bothers me more is the status bar being<br>\n<code>Publication Build: This will be filled in by the publication tooling</code></p>",
        "id": 230893916,
        "sender_full_name": "John Moehrke",
        "timestamp": 1616084155
    },
    {
        "content": "<p>yet the one in the 0.2.4 folder has the right status</p>",
        "id": 230894135,
        "sender_full_name": "John Moehrke",
        "timestamp": 1616084214
    },
    {
        "content": "<p>that might be a hint... as the 0.2.4 status line points at a very different URL for the history.html</p>",
        "id": 230894367,
        "sender_full_name": "John Moehrke",
        "timestamp": 1616084296
    },
    {
        "content": "<p>it is pointing at<br>\n<code>https://profiles.ihe.net/fhir/ihe.formatcode.fhir/ImplementationGuide/ihe.formatcode.fhir/history.html</code></p>",
        "id": 230894443,
        "sender_full_name": "John Moehrke",
        "timestamp": 1616084334
    },
    {
        "content": "<p>ah, my canonical in my package-list.json is messed up</p>",
        "id": 230894501,
        "sender_full_name": "John Moehrke",
        "timestamp": 1616084363
    },
    {
        "content": "<p>it is messed up in my ig xml.. guess I am starting over</p>",
        "id": 230895612,
        "sender_full_name": "John Moehrke",
        "timestamp": 1616084856
    },
    {
        "content": "<p>was I stupid to assume that the second build with the -publish parameter could be done line this with _genonce?<br>\n<code>_genonce -publish http://example.org/test-ig/0.1.0</code></p>",
        "id": 230898386,
        "sender_full_name": "John Moehrke",
        "timestamp": 1616085962
    },
    {
        "content": "<p>I got the status bar fixed. but that fix didn't seem to fix the history</p>",
        "id": 230900534,
        "sender_full_name": "John Moehrke",
        "timestamp": 1616086684
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191404\">John Moehrke</span> <a href=\"#narrow/stream/179252-IG-creation/topic/IG.20publication.3A.20registry.20.26.20history/near/230898386\">said</a>:</p>\n<blockquote>\n<p>was I stupid to assume that the second build with the -publish parameter could be done line this with _genonce?<br>\n<code>_genonce -publish http://example.org/test-ig/0.1.0</code></p>\n</blockquote>\n<p>If you change the version or anything else in the <code>ImplementationGuide-[name].json</code> file then I think you need to rebuild the output. But if not, then I think that's right. But lately I haven't been using the script, but just explicitly invoke the publisher, e.g., for the publish part,</p>\n<div class=\"codehilite\"><pre><span></span><code>java -jar ../publisher.jar -ig ig.ini -publish http://example.org/test-ig/0.1.0\n</code></pre></div>",
        "id": 230900806,
        "sender_full_name": " Bob Milius",
        "timestamp": 1616086771
    },
    {
        "content": "<p>note I do now have php files. so fixing my canonical url in the package-list helped. All these things called canonical url are so confusing. this one in the package-list seems to be the publication root</p>",
        "id": 230905841,
        "sender_full_name": "John Moehrke",
        "timestamp": 1616088535
    },
    {
        "content": "<p>dist-hist is empty again. i know I coped over the template</p>",
        "id": 230913391,
        "sender_full_name": "John Moehrke",
        "timestamp": 1616091205
    },
    {
        "content": "<p>so, the whole thing is quite sensitive to the urls, the ids, the package ids, versions... but I think it can be automated.</p>",
        "id": 231040180,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1616167276
    },
    {
        "content": "<p>I am working on instructions and scripting for that.</p>",
        "id": 231040263,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1616167315
    },
    {
        "content": "<p>I am not looking for more automation, automation eventually breaks and then only the one that wrote the automation can fix it. I would rather have a procedure that is clear</p>",
        "id": 231059540,
        "sender_full_name": "John Moehrke",
        "timestamp": 1616174696
    },
    {
        "content": "<p>so it could be filename case issues... that would explain why it works on my windows system, but not on the <a href=\"http://github.io\">github.io</a> or <a href=\"http://profiles.ihe.net\">profiles.ihe.net</a> web site</p>",
        "id": 231059759,
        "sender_full_name": "John Moehrke",
        "timestamp": 1616174781
    },
    {
        "content": "<p>I also looked for an accidential '\\' used where a '/' should have been</p>",
        "id": 231060419,
        "sender_full_name": "John Moehrke",
        "timestamp": 1616175048
    },
    {
        "content": "<p>Accidents will happen, there's too many things that can go wrong, feeedback will not be clear, which is why I really want this to be facilitated by a tool.</p>",
        "id": 231094996,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1616190889
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191404\">@John Moehrke</span> Where is your IG?</p>",
        "id": 231095030,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1616190914
    },
    {
        "content": "<p>I'm done fighting with documentation today. <br>\nNote to self: no markdown after dinner.</p>",
        "id": 231095127,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1616190965
    },
    {
        "content": "<p>I sent the details on private message.</p>",
        "id": 231095202,
        "sender_full_name": "John Moehrke",
        "timestamp": 1616191024
    },
    {
        "content": "<p>No markdowns before breakfast either.</p>",
        "id": 231095248,
        "sender_full_name": "John Moehrke",
        "timestamp": 1616191059
    },
    {
        "content": "<p>the critical point to me is the few parameters that this has:</p>",
        "id": 231095806,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1616191340
    },
    {
        "content": "<p>the implementationguide, the package-list, the command lines and the folder names have to coincide</p>",
        "id": 231095923,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1616191405
    },
    {
        "content": "<p>if {ig_id} = <a href=\"http://ImplementationGuide.id\">ImplementationGuide.id</a>,</p>\n<ul>\n<li>ig.url has to be in the form {base}/{ig_id}/ImplementationGuide/{ig_id}</li>\n<li>{canonical} = {base}/{ig_id}</li>\n</ul>",
        "id": 231096340,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1616191641
    },
    {
        "content": "<p>i'll try to make a script for this to run on windows</p>",
        "id": 231096426,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1616191689
    },
    {
        "content": "<p>Can a hear a \"no markdown between breakfast and dinner either\"? ;)</p>",
        "id": 231099478,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1616193709
    },
    {
        "content": "<p>So only markdown while eating :D</p>",
        "id": 231404159,
        "sender_full_name": "Richard Townley-O'Neill",
        "timestamp": 1616458321
    },
    {
        "content": "<p>I was complaining about markdown, but that was only until I had to do Confluence...</p>",
        "id": 231437173,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1616488786
    },
    {
        "content": "<p>you could use old-style wiki if you want. That is still in use in IHE.</p>",
        "id": 231460934,
        "sender_full_name": "John Moehrke",
        "timestamp": 1616502418
    },
    {
        "content": "<p>wiki and markdown both require a relaxed state of mind. but alternating between is sure to kill that relaxed state of mind.</p>",
        "id": 231461092,
        "sender_full_name": "John Moehrke",
        "timestamp": 1616502501
    },
    {
        "content": "<p>I hope to get to this later today, but it's here<br>\n<a href=\"https://confluence.hl7.org/pages/viewpage.action?pageId=104580055\">https://confluence.hl7.org/pages/viewpage.action?pageId=104580055</a></p>",
        "id": 231615227,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1616583624
    },
    {
        "content": "<p>only step3 missing</p>",
        "id": 231615239,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1616583634
    },
    {
        "content": "<p>Step 3 done.</p>",
        "id": 231870528,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1616703906
    },
    {
        "content": "<p>Because I'm lazy and forgetful  (and life's short), there is a small script that runs the entire thing here:<br>\n<a href=\"https://github.com/hl7-be/fhir-ig-release-publication\">https://github.com/hl7-be/fhir-ig-release-publication</a></p>",
        "id": 231870655,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1616703969
    },
    {
        "content": "<p>watch all you paths ... they are windows-ish</p>",
        "id": 231870669,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1616703973
    },
    {
        "content": "<p>right (well, just changed them)</p>",
        "id": 231870953,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1616704123
    },
    {
        "content": "<p>The copy commands are windows' xcopy - feel free to replace by the appropriate *nix on your system (or better, update the documentation)</p>",
        "id": 231871044,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1616704187
    },
    {
        "content": "<p>Kudos to <span class=\"user-mention\" data-user-id=\"191832\">@Jose Costa Teixeira</span> for finding the problem. The history.html file is created with an assumption that the javascript files should come from a <a href=\"http://hl7.org\">http://hl7.org</a> url. The problem I had was that I am publishing on a different web site, and using https... Thus one can't  load javascript from another site. So we just edited the history.html to pull these .js files from the local directory (or local server), and it WORKS!!!!    This is a hack for now</p>",
        "id": 232099332,
        "sender_full_name": "John Moehrke",
        "timestamp": 1616860683
    },
    {
        "content": "<p>ok, I will get to this over this weekend - it seems like a long time since I had time plan what I was going to do</p>",
        "id": 234802869,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1618556028
    },
    {
        "content": "<p>I made a few changes to the history template. One of them was this change, the other one wasto make it use other templates</p>",
        "id": 234814444,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1618561551
    },
    {
        "content": "<p>This gave me some ideas</p>",
        "id": 234814682,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1618561659
    },
    {
        "content": "<p>here's an example of what I did</p>",
        "id": 234814700,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1618561670
    },
    {
        "content": "<p><a href=\"https://github.com/HL7/fhir-ig-history-template/compare/master...IHE:master\">https://github.com/HL7/fhir-ig-history-template/compare/master...IHE:master</a></p>",
        "id": 234814702,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1618561671
    },
    {
        "content": "<ol>\n<li>the header change would be best to be from the IG's template</li>\n</ol>",
        "id": 234815072,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1618561864
    },
    {
        "content": "<ol start=\"2\">\n<li>to publish a new release, I think the procedure can be mostlyautomated if we have a small file which serves as a token for the parameters that are needed</li>\n</ol>",
        "id": 234816316,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1618562450
    },
    {
        "content": "<p>I actually made a simple script to automate all that, the token file was just this:</p>\n<div class=\"codehilite\" data-code-language=\"JSON\"><pre><span></span><code><span class=\"p\">{</span>\n    <span class=\"nt\">\"ig\"</span><span class=\"p\">:</span> <span class=\"s2\">\"test-ig\"</span><span class=\"p\">,</span>\n    <span class=\"nt\">\"version\"</span><span class=\"p\">:</span> <span class=\"s2\">\"0.1.0\"</span><span class=\"p\">,</span>\n    <span class=\"nt\">\"status\"</span><span class=\"p\">:</span> <span class=\"s2\">\"trial-use\"</span><span class=\"p\">,</span>\n    <span class=\"nt\">\"date\"</span><span class=\"p\">:</span> <span class=\"s2\">\"2021-03-13\"</span><span class=\"p\">,</span>\n    <span class=\"nt\">\"desc\"</span><span class=\"p\">:</span> <span class=\"s2\">\"Test IG\"</span><span class=\"p\">,</span>\n    <span class=\"nt\">\"sequence\"</span><span class=\"p\">:</span> <span class=\"s2\">\"Trial Use 1\"</span>\n<span class=\"p\">}</span>\n</code></pre></div>",
        "id": 234818961,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1618563787
    },
    {
        "content": "<p>the script does something simple:</p>\n<ol>\n<li>check that the IG is ok, that the parameters (ig id, package id, etc) are in order</li>\n<li>run all things to prepare publication</li>\n<li>create / update the package-list with the new information in the release token json</li>\n<li>run the final step</li>\n<li>copy the <code>assets</code> folder  to the <code>assets-hist</code> folder to keep the history page consistent with the rest of the IG</li>\n</ol>",
        "id": 234819350,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1618563963
    },
    {
        "content": "<p>After a formal release, what is the right changes one should make to their github repo to represent ci-build again? I am unclear on what the version in the IG should say, and what the package-list.json should say</p>",
        "id": 243170631,
        "sender_full_name": "John Moehrke",
        "timestamp": 1624027569
    },
    {
        "content": "<p>it should go back to 'ci-build' and the other doesn't matter</p>",
        "id": 243211644,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1624053134
    },
    {
        "content": "<p>I have question about a parameter in the publisher : <br>\n<a href=\"https://github.com/HL7/fhir-ig-publisher/blob/1a2777964c79e71a4c541672b6eb0ea0681c952c/org.hl7.fhir.publisher.core/src/main/java/org/hl7/fhir/igtools/publisher/utils/IGWebSiteMaintainer.java#L91\">https://github.com/HL7/fhir-ig-publisher/blob/1a2777964c79e71a4c541672b6eb0ea0681c952c/org.hl7.fhir.publisher.core/src/main/java/org/hl7/fhir/igtools/publisher/utils/IGWebSiteMaintainer.java#L91</a><br>\nWhat is the parameter <code>-filter</code>supposed to be for?<br>\nI was trying to bypass the <code>Enter y to continue</code>so I think by putting some filter I can do that, but I have no idea what to put in the filter</p>",
        "id": 256899944,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1633814709
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> ?</p>",
        "id": 256932889,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1633850281
    },
    {
        "content": "<p>I don't know what's going on there.</p>",
        "id": 256999871,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1633915253
    },
    {
        "content": "<p>you're using it in some build process? I can't recall why I added it in the first place</p>",
        "id": 256999905,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1633915301
    },
    {
        "content": "<p>Well, in fact I just want to bypass the prompt. <br>\nI have a script that takes an IG and a JSON file with the needed data (I'll probably rework this file later) and this JSON file is a token for the user's authorization to produce a release</p>",
        "id": 257012617,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1633928339
    },
    {
        "content": "<p>I saw that the prompt will always be there unless the filter parameter is not empty. When I put some value there, the script does run but the IG is no longer processed</p>",
        "id": 257012780,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1633928439
    },
    {
        "content": "<p>And indeed this is for adding to a build process - I have it in an external python now but perhaps it may be integrated later into the java code.</p>",
        "id": 257012854,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1633928519
    }
]