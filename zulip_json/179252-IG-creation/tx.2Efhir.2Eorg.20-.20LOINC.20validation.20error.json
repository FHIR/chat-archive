[
    {
        "content": "<p>I'm running into an issue that I believe is an error with LOINC validation on <a href=\"http://tx.fhir.org\">tx.fhir.org</a>.</p>\n<p>Given this:</p>\n<div class=\"codehilite\" data-code-language=\"JavaScript\"><pre><span></span><code><span class=\"p\">{</span>\n  <span class=\"s2\">\"code\"</span><span class=\"o\">:</span> <span class=\"p\">{</span>\n    <span class=\"s2\">\"coding\"</span><span class=\"o\">:</span> <span class=\"p\">[</span>\n      <span class=\"p\">{</span>\n        <span class=\"s2\">\"system\"</span><span class=\"o\">:</span> <span class=\"s2\">\"http://loinc.org\"</span><span class=\"p\">,</span>\n        <span class=\"s2\">\"code\"</span><span class=\"o\">:</span> <span class=\"s2\">\"48002-0\"</span> <span class=\"c1\">// Genomic source class [Type] &lt;https://loinc.org/48002-0/&gt;</span>\n      <span class=\"p\">}</span>\n    <span class=\"p\">]</span>\n  <span class=\"p\">},</span>\n  <span class=\"s2\">\"valueCodeableConcept\"</span><span class=\"o\">:</span> <span class=\"p\">{</span>\n    <span class=\"s2\">\"coding\"</span><span class=\"o\">:</span> <span class=\"p\">[</span>\n      <span class=\"p\">{</span>\n        <span class=\"s2\">\"system\"</span><span class=\"o\">:</span> <span class=\"s2\">\"http://loinc.org\"</span><span class=\"p\">,</span>\n        <span class=\"s2\">\"code\"</span><span class=\"o\">:</span> <span class=\"s2\">\"LA6683-2\"</span><span class=\"p\">,</span>\n        <span class=\"s2\">\"display\"</span><span class=\"o\">:</span> <span class=\"s2\">\"Germline\"</span>\n      <span class=\"p\">}</span>\n    <span class=\"p\">]</span>\n  <span class=\"p\">}</span>\n<span class=\"p\">}</span>\n</code></pre></div>\n<p>I get the following QA error:</p>\n<blockquote>\n<p>Unable to resolve value set (from <a href=\"http://tx.fhir.org/r4\">http://tx.fhir.org/r4</a>)</p>\n</blockquote>\n<p><code>LA6683-2</code> <strong>is</strong> from the preferred answer list for <a href=\"https://loinc.org/48002-0/\">48002-0</a>. Strangely, if I choose another code from the preferred answer list like <code>LA6684-0</code>, there's no QA error.</p>\n<p>To reproduce <em>in situ</em>:</p>\n<ul>\n<li><a href=\"https://github.com/HL7/fhir-mCODE-ig/compare/genomics-error1-mfm..genomics-error1-somatic-mfm\">GitHub diff</a> showing two branches of the mCODE IG where the only change is from <code>LA6683-2</code> to  <code>LA6684-0</code>. Names of these branches are below.</li>\n<li><a href=\"https://build.fhir.org/ig/HL7/fhir-mCODE-ig/branches/genomics-error1-mfm/qa.min.html#_scratch_ig-build-temp-E60B3X_repo_fsh-generated_resources_Observation-mCODECancerGeneticVariantExample2\">QA report</a> for branch <code>genomics-error1-mfm</code> (<code>LA6683-2</code> with the QA error)</li>\n<li><a href=\"https://build.fhir.org/ig/HL7/fhir-mCODE-ig/branches/genomics-error1-somatic-mfm/qa.min.html#_scratch_ig-build-temp-HTD7K4_repo_fsh-generated_resources_Observation-mCODECancerGeneticVariantExample2\">QA report</a> branch <code>genomics-error1-somatic-mfm</code> (<code>LA6684-0</code>, no QA error)</li>\n</ul>\n<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> is this something you can help with or is there someone else I can ask? Thanks!</p>",
        "id": 218238725,
        "sender_full_name": "Max Masnick",
        "timestamp": 1606696562
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191405\">@Rob Hausam</span> or <span class=\"user-mention\" data-user-id=\"191503\">@Robert McClure</span> do you have any insight into this? Thanks!</p>",
        "id": 218328138,
        "sender_full_name": "Max Masnick",
        "timestamp": 1606762059
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"322501\">@Max Masnick</span>  Hmm.  I'm not entirely sure yet why the two different codes are giving different QA reports - with one showing \"Unable to resolve value set ...\" and the other not.  But, in looking at the output of <a href=\"http://tx.fhir.org\">tx.fhir.org</a> for all of the LOINC answer (LA) codes in the LL378-1 MG_2_Genetic variant source answer list, it seems that the descriptions being returned for all of them are for the wrong (completely unrelated) concepts.  It appears to me that likely we have a problem with the loading code for LOINC on the fhirserver, at least for how it is handling the codes and value sets for the LOINC answer lists (likely not only these particular ones), and they are being loaded with entirely incorrect data. <span aria-label=\"frown\" class=\"emoji emoji-1f641\" role=\"img\" title=\"frown\">:frown:</span>  I expect that it's going to take a bit of investigation to figure out and fix (by me and/or <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span>).</p>",
        "id": 218336254,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1606765792
    },
    {
        "content": "<p>Ok thanks for looking into it! Please let me know if there's anything I can do to help.</p>",
        "id": 218336354,
        "sender_full_name": "Max Masnick",
        "timestamp": 1606765825
    },
    {
        "content": "<p>it looks to me as if this is a cache error - it happened in the past and now it's embedded in the loinc cache file in tx-cache</p>",
        "id": 218372226,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1606787835
    },
    {
        "content": "<p>delete any entries in there with reference to it, and it should go away</p>",
        "id": 218372237,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1606787853
    },
    {
        "content": "<p>The results I reported are from querying <a href=\"http://tx.fhir.org\">tx.fhir.org</a> with Postman.<br>\nFor example, <code>GET http://tx.fhir.org/r4/CodeSystem/$lookup?system=http://loinc.org&amp;code=LL378-1</code> returns:</p>\n<div class=\"codehilite\"><pre><span></span><code>{\n  &quot;resourceType&quot; : &quot;Parameters&quot;,\n  &quot;parameter&quot; : [\n    {\n      &quot;name&quot; : &quot;name&quot;,\n      &quot;valueString&quot; : &quot;LOINC&quot;\n    },\n    {\n      &quot;name&quot; : &quot;version&quot;,\n      &quot;valueString&quot; : &quot;2.68&quot;\n    },\n    {\n      &quot;name&quot; : &quot;display&quot;,\n      &quot;valueString&quot; : &quot;Pentadecanoate/Creatinine&quot;\n    }\n  ]\n}\n</code></pre></div>\n<p>but <code>GET https://fhir.loinc.org/CodeSystem/$lookup?system=http://loinc.org&amp;code=LL378-1&amp;_format=json</code> returns: </p>\n<div class=\"codehilite\"><pre><span></span><code>{\n    &quot;resourceType&quot;: &quot;Parameters&quot;,\n    &quot;parameter&quot;: [\n        {\n            &quot;name&quot;: &quot;name&quot;,\n            &quot;valueString&quot;: &quot;LOINC&quot;\n        },\n        {\n            &quot;name&quot;: &quot;display&quot;,\n            &quot;valueString&quot;: &quot;MG_2_Genetic variant source&quot;\n        },\n        {\n            &quot;name&quot;: &quot;abstract&quot;,\n            &quot;valueBoolean&quot;: false\n        },\n        {\n            &quot;name&quot;: &quot;property&quot;,\n            &quot;part&quot;: [\n                {\n                    &quot;name&quot;: &quot;code&quot;,\n                    &quot;valueCode&quot;: &quot;answers-for&quot;\n                },\n                {\n                    &quot;name&quot;: &quot;value&quot;,\n                    &quot;valueString&quot;: &quot;48002-0&quot;\n                }\n            ]\n        }\n    ]\n}\n</code></pre></div>",
        "id": 218435173,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1606835921
    },
    {
        "content": "<p>And <code>GET http://tx.fhir.org/r4/CodeSystem/$lookup?system=http://loinc.org&amp;code=LA6683-2</code> returns:</p>\n<div class=\"codehilite\"><pre><span></span><code>{\n  &quot;resourceType&quot; : &quot;Parameters&quot;,\n  &quot;parameter&quot; : [\n    {\n      &quot;name&quot; : &quot;name&quot;,\n      &quot;valueString&quot; : &quot;LOINC&quot;\n    },\n    {\n      &quot;name&quot; : &quot;version&quot;,\n      &quot;valueString&quot; : &quot;2.68&quot;\n    },\n    {\n      &quot;name&quot; : &quot;display&quot;,\n      &quot;valueString&quot; : &quot;Mycoplasma flocculare 16S rRNA gene&quot;\n    }\n  ]\n}\n</code></pre></div>\n<p>but <code>GET https://fhir.loinc.org/CodeSystem/$lookup?system=http://loinc.org&amp;code=LA6683-2&amp;_format=json</code> returns: </p>\n<div class=\"codehilite\"><pre><span></span><code>{\n    &quot;resourceType&quot;: &quot;Parameters&quot;,\n    &quot;parameter&quot;: [\n        {\n            &quot;name&quot;: &quot;name&quot;,\n            &quot;valueString&quot;: &quot;LOINC&quot;\n        },\n        {\n            &quot;name&quot;: &quot;display&quot;,\n            &quot;valueString&quot;: &quot;Germline&quot;\n        },\n        {\n            &quot;name&quot;: &quot;abstract&quot;,\n            &quot;valueBoolean&quot;: false\n        }\n    ]\n}\n</code></pre></div>\n<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span></p>",
        "id": 218439258,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1606837648
    },
    {
        "content": "<p>And, of course, the <a href=\"http://fhir.loinc.org\">fhir.loinc.org</a> display strings are the correct ones.</p>",
        "id": 218440037,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1606837914
    },
    {
        "content": "<p>oops. fixed next upgrade of the terminology server. hopefully today</p>",
        "id": 218501530,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1606869138
    },
    {
        "content": "<p>The LONIC answer list LL4309-2 is used to bind the value field of the extension AssistanceRequired <a href=\"https://build.fhir.org/ig/HL7/fhir-pacio-cognitive-status/branches/master/StructureDefinition-assistance-required.html\">https://build.fhir.org/ig/HL7/fhir-pacio-cognitive-status/branches/master/StructureDefinition-assistance-required.html</a> <br>\nIn the QA report <a href=\"https://build.fhir.org/ig/HL7/fhir-pacio-cognitive-status/branches/master/qa.html\">https://build.fhir.org/ig/HL7/fhir-pacio-cognitive-status/branches/master/qa.html</a> I see two warnings as showed below. Please advise whether or not I should suppress these warnings. Thank you.</p>\n<p>fsh-generated/resources/StructureDefinition-assistance-required.json Show Validation Information (1)<br>\nPath    Severity    Message<br>\nStructureDefinition.differential.element[3].binding warning The valueSet reference <a href=\"http://loinc.org/vs/LL4309-2\">http://loinc.org/vs/LL4309-2</a> on element Extension.value[x] could not be resolved<br>\nStructureDefinition.snapshot.element[4].binding warning The valueSet reference <a href=\"http://loinc.org/vs/LL4309-2\">http://loinc.org/vs/LL4309-2</a> on element Extension.value[x] could not be resolved</p>",
        "id": 255504140,
        "sender_full_name": "Caleb Wan",
        "timestamp": 1632966477
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191405\">@Rob Hausam</span> <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span></p>",
        "id": 255504937,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1632967095
    },
    {
        "content": "<p>this is a bug in the validator that's fixed next IG publisher release</p>",
        "id": 255505436,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1632967471
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> I am still seeing a warning on the use of the LONIC answer list with the latest publisher release 1.1.82. Is this another problem with validator or a fix has not been put in yet?<br>\nStructureDefinition.differential.element[3].binding warning The valueSet reference <a href=\"http://loinc.org/vs/LL4309-2\">http://loinc.org/vs/LL4309-2</a> on element Extension.value[x] could not be resolved</p>",
        "id": 258047747,
        "sender_full_name": "Caleb Wan",
        "timestamp": 1634571104
    },
    {
        "content": "<p>have you cleared your txCache?</p>",
        "id": 258081290,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1634583585
    },
    {
        "content": "<p>Yes. Here is the QA: <a href=\"https://build.fhir.org/ig/HL7/fhir-pacio-cognitive-status/branches/master/qa.html\">https://build.fhir.org/ig/HL7/fhir-pacio-cognitive-status/branches/master/qa.html</a><br>\nHere is where the LOINC answer list is used: <a href=\"https://build.fhir.org/ig/HL7/fhir-pacio-cognitive-status/branches/master/StructureDefinition-assistance-required.html\">https://build.fhir.org/ig/HL7/fhir-pacio-cognitive-status/branches/master/StructureDefinition-assistance-required.html</a></p>",
        "id": 258093856,
        "sender_full_name": "Caleb Wan",
        "timestamp": 1634588603
    },
    {
        "content": "<p>sigh. It was fixed, and then I did something on the terminology server to unfix it. It should be right now</p>",
        "id": 258413375,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1634752456
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> I just rebuilt our IGs. But but the warnings on the LL4309-2 answer list have not gone away: <br>\n<a href=\"https://build.fhir.org/ig/HL7/fhir-pacio-cognitive-status/branches/master/qa.html\">https://build.fhir.org/ig/HL7/fhir-pacio-cognitive-status/branches/master/qa.html</a><br>\n<a href=\"https://build.fhir.org/ig/HL7/fhir-pacio-functional-status/branches/master/qa.html\">https://build.fhir.org/ig/HL7/fhir-pacio-functional-status/branches/master/qa.html</a></p>",
        "id": 258417466,
        "sender_full_name": "Caleb Wan",
        "timestamp": 1634753928
    },
    {
        "content": "<p>they will but you're about to get a new validation error:</p>",
        "id": 258422675,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1634755928
    },
    {
        "content": "<p>input\\resources\\CapabilityStatement-pacio-cs-cap.json Show Validation Information (1)<br>\nPath    Severity    Message<br>\nCapabilityStatement.url error   Canonical URLs must be absolute URLs if they are not fragment references (/CapabilityStatement-pacio-cs-cap.html)</p>",
        "id": 258422698,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1634755940
    }
]