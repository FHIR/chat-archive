[
    {
        "content": "<p>I need to constrain Patient.managingOrganization (0..1) to one of two system urls. I did by adding an invariant constraint, something along the lines of this fhirpath expression</p>\n<div class=\"codehilite\"><pre><span></span>&quot;(&#39;http://this.org/blah&#39; in identifier.system) or (&#39;http://that.org/blah&#39; in identifier.system)&quot;\n</pre></div>\n\n\n<p>This works, but seems clumsy. Is there a more elegant/proper way of doing this? I'm a novice re fhirpath.</p>",
        "id": 193438657,
        "sender_full_name": " Bob Milius",
        "timestamp": 1586432763
    },
    {
        "content": "<p>So you're just using Patient.managingOrganization.identifier?  You could declare a valueset on Patient.managingOrganization.identifier.system.</p>",
        "id": 193461378,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1586444232
    },
    {
        "content": "<p>I thought of that, but talked myself out of it, as I thought I could only bind codes/values to a valueset.</p>",
        "id": 193468203,
        "sender_full_name": " Bob Milius",
        "timestamp": 1586447026
    },
    {
        "content": "<p>You can have value sets for strings</p>",
        "id": 193468366,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1586447096
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span>  ok, I'm a bit clueless and I'm not finding documentation on that. Can you point me? or provide an example?</p>",
        "id": 193480758,
        "sender_full_name": " Bob Milius",
        "timestamp": 1586452296
    },
    {
        "content": "<p>Hmm.  I'd expected to see it either under profiling or in ValueSet, but I'm not seeing it either place.  <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span>, do you know where the rules for defining constraints on strings - particularly where the constraints aren't driven by existing code systems?</p>",
        "id": 193484203,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1586453937
    },
    {
        "content": "<p><a href=\"http://hl7.org/fhir/terminologies.html#strings\" title=\"http://hl7.org/fhir/terminologies.html#strings\">http://hl7.org/fhir/terminologies.html#strings</a></p>",
        "id": 193504739,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1586463967
    },
    {
        "content": "<p>Thanks. The doc is brief, but don't see how it helps (though I may just be misunderstanding)</p>\n<blockquote>\n<p>In a few special cases, humans customarily use codes directly for elements that have type \"string\". A typical case is codes for states, and there are several places where a URI must come from a set of controlled values. An element of type string or uri can also be bound to a value set. When a string or URI is bound to a value set, the value property SHALL contain the code specified by the value set, and the system and display values are ignored.</p>\n</blockquote>\n<p>This says \"system and display values are ignored\".  But I still need to add values to identifiers. I probably wasn't clear. I have two possible systems, that each have its own set of org identifiers. The two registries collaborate and often share data. Each has its own identifiers for orgs that submit data to them. So one managingOrganization might be:</p>\n<div class=\"codehilite\"><pre><span></span>&quot;managingOrganization&quot;: {\n    &quot;identifier&quot;:\n        {\n             &quot;system&quot; : &quot;http://this.org/these-centers&quot;\n             &quot;value&quot; : &quot;1234&quot;\n        }\n  }\n</pre></div>\n\n\n<p>and the other might be</p>\n<div class=\"codehilite\"><pre><span></span>&quot;managingOrganization&quot;: {\n    &quot;identifier&quot;:\n        {\n             &quot;system&quot; : &quot;http://that.org/those-centers&quot;\n             &quot;value&quot; : &quot;abcd&quot;\n        }\n  }\n</pre></div>\n\n\n<p>So we want to accept values from only two different systems. I can do this with the fhirpath expression I showed in the original post. I'm just wondering if there's a more elegant solution.</p>",
        "id": 193520154,
        "sender_full_name": " Bob Milius",
        "timestamp": 1586473125
    }
]