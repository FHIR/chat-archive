[
    {
        "content": "<p>Not sure if this is a sushi issue or publisher issue. Since publisher is giving me stack dump instead of an error msg, I figured I would post it here.</p>\n<p>versions:<br>\nSUSHI v1.0.1 (implements FHIR Shorthand specification v1.0.0)<br>\nFHIR IG Publisher Version 1.1.42 (Git# 6036cc0fc6a7). Built 2020-11-13T20:16:00.666Z (4 days old)</p>\n<p>I'm doing a <code>sushi --init</code> and defaulting everything. It creates a single project with a patient resource. Then I updated publisher, and run it. Every builds fine. No publisher errors, but 2 warnings and 11 broken links. Then I run publisher again and add the <code>-publish</code> parameter and I get a stack dump at the very end during the onGenerate bit. No output is produced except for a <code>qa.json</code> file. Here's an example session, commented and edited for brevity:</p>\n<div class=\"codehilite\"><pre><span></span><code>$ sushi --init\n# entered defaults\n\n$ cd ExampleIG/\n$ sushi .\n# no errors\n\n$ ./_updatePublisher.sh\n# entered defaults, updated scripts = y\n\n$ java -jar input-cache/publisher.jar -ig ig.ini\nFHIR IG Publisher Version 1.1.42 (Git# 6036cc0fc6a7). Built 2020-11-13T20:16:00.666Z (4 days old)\nFile log: /var/folders/tz/3rrsdjx94d5fj_z_trln782xzm_j0b/T/fhir-ig-publisher-tmp.log\nDetected Java version: 1.8.0_172 from /Library/Java/JavaVirtualMachines/jdk1.8.0_172.jdk/Contents/Home/jre on x86_64 (64bit). 3641MB available\nParameters: -ig ig.ini\n...etc...\nonGenerate:\nGenerating Summary Outputs                                                       (00:25.0230)\nSending Usage Stats to Server                                                    (00:26.0351)\n## Memory (MB): Use = 700, Free = 482, Total = 1183, Max =3641\nReclaiming memory...\n## Memory (MB): Use = 181, Free = 1018, Total = 1200, Max =3641\nJekyll: Source: /Users/bmilius/Documents/src/fsh/ExampleIG/temp/pages            (00:27.0510)\nJekyll: Generating...                                                            (00:27.0510)\nJekyll: done in 0.295 seconds.                                                   (00:27.0805)\nInstalling fhir.example#dev to the package cache\n  Fetching:\n  Installing:  done.\nChecking Output HTML                                                             (00:28.0037)\nfound 496 files                                                                  (00:28.0042)\n.........................................\n.........................................\n  ... 496 html files, 0 pages invalid xhtml (0%)                                 (00:28.0660)\n  ... 8350 links, 11 broken links (0%)                                           (00:28.0661)\nBuild final .zip                                                                 (00:28.0661)\nFinal .zip built                                                                 (00:28.0890)\nFinished. Times: loading: 00:00.0217, generate: 00:17.0217, narrative generation: 00:00.0204, realm-rules: 00:00.0000, previous-version: 00:00.0000, jekyll: 00:01.0178, validation: 00:00.0362 (#2), template: 00:08.0660 (#3) (00:29.0242)\ncontext [anonymous] 2:13 attribute path isn&#39;t defined\ncontext [anonymous] 2:13 attribute path isn&#39;t defined\nValidation output in /Users/bmilius/Documents/src/fsh/ExampleIG/output/qa.html\nErrors: 0, Warnings: 2, Info: 0, Broken Links = 11 (00:29.0354)\nDone. This IG has been built using the &#39;normal&#39; process for local use. If building to host on an an external website, use the process documented [yet to be documented]]) (00:29.0355)\n\n$ java -jar input-cache/publisher.jar -ig ig.ini -publish\nFHIR IG Publisher Version 1.1.42 (Git# 6036cc0fc6a7). Built 2020-11-13T20:16:00.666Z (4 days old)\nFile log: /var/folders/tz/3rrsdjx94d5fj_z_trln782xzm_j0b/T/fhir-ig-publisher-tmp.log\nDetected Java version: 1.8.0_172 from /Library/Java/JavaVirtualMachines/jdk1.8.0_172.jdk/Contents/Home/jre on x86_64 (64bit). 3641MB available\nParameters: -ig ig.ini -publish\n...etc...\nonGenerate:Generating Summary Outputs                                                       (00:21.0419)\nSending Usage Stats to Server                                                    (00:22.0989)\n## Memory (MB): Use = 543, Free = 421, Total = 965, Max =3641\nReclaiming memory...\n## Memory (MB): Use = 181, Free = 979, Total = 1160, Max =3641\nPublishing Content Failed: null                                                  (00:23.0261)\n                                                                                 (00:23.0261)\nUse -? to get command line help                                                  (00:23.0261)\n                                                                                 (00:23.0261)\nStack Dump (for debugging):                                                      (00:23.0261)\njava.lang.NullPointerException\n    at java.lang.String.replace(String.java:2240)\n    at org.hl7.fhir.igtools.publisher.Publisher.fixSearchForm(Publisher.java:5016)\n    at org.hl7.fhir.igtools.publisher.Publisher.generate(Publisher.java:4932)\n    at org.hl7.fhir.igtools.publisher.Publisher.createIg(Publisher.java:884)\n    at org.hl7.fhir.igtools.publisher.Publisher.execute(Publisher.java:728)\n    at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:8373)\n$\n</code></pre></div>",
        "id": 217157830,
        "sender_full_name": " Bob Milius",
        "timestamp": 1605716234
    },
    {
        "content": "<p>why are you adding a -publish parameter?</p>",
        "id": 217158673,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1605716548
    },
    {
        "content": "<p>I'm creating IGs to be published on a non-HL7 server, which will create redirect php scripts, and history. I'm following a procedure you described in another thread. It worked for me for another IG, but that was last June with earlier versions of publisher and sushi. I was getting this error now using the newer sushi and publisher and am trying to figure out whether it was something wrong with my IG or if it's a new sushi/publisher issue, so I tried to create a minimal IG.</p>",
        "id": 217159168,
        "sender_full_name": " Bob Milius",
        "timestamp": 1605716744
    },
    {
        "content": "<p>using the workflow described here: <br>\n<a href=\"#narrow/stream/179252-IG-creation/topic/IG.20releases/near/196824352\">https://chat.fhir.org/#narrow/stream/179252-IG-creation/topic/IG.20releases/near/196824352</a></p>",
        "id": 217159630,
        "sender_full_name": " Bob Milius",
        "timestamp": 1605716924
    },
    {
        "content": "<p>you have to provide an additional parameter with -publish, the url you are going to publish at</p>",
        "id": 217161509,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1605717636
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> Thanks! That was it.</p>",
        "id": 217163255,
        "sender_full_name": " Bob Milius",
        "timestamp": 1605718301
    }
]