[
    {
        "content": "<p>Our github integration with firely-terminal-pipeline started failing last week. We were using the alpha version of this pipeline ok. <br>\nNew version also fails but with this error.</p>\n<p><a href=\"/user_uploads/10155/yqBatN3kDZCBdETYlS0azmCo/Screenshot-2021-06-26-at-05.42.47.png\">Screenshot-2021-06-26-at-05.42.47.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/yqBatN3kDZCBdETYlS0azmCo/Screenshot-2021-06-26-at-05.42.47.png\" title=\"Screenshot-2021-06-26-at-05.42.47.png\"><img src=\"/user_uploads/10155/yqBatN3kDZCBdETYlS0azmCo/Screenshot-2021-06-26-at-05.42.47.png\"></a></div><p><span class=\"user-mention\" data-user-id=\"203235\">@Ward Weistra</span></p>",
        "id": 243994552,
        "sender_full_name": "Kevin Mayfield",
        "timestamp": 1624682592
    },
    {
        "content": "<p>That is with dotnet validation enabled. <br>\nJava validation returns a different error code</p>\n<p><a href=\"/user_uploads/10155/SCYKkAnv1eigKgA-ClEvfIIL/Screenshot-2021-06-26-at-05.52.06.png\">Screenshot-2021-06-26-at-05.52.06.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/SCYKkAnv1eigKgA-ClEvfIIL/Screenshot-2021-06-26-at-05.52.06.png\" title=\"Screenshot-2021-06-26-at-05.52.06.png\"><img src=\"/user_uploads/10155/SCYKkAnv1eigKgA-ClEvfIIL/Screenshot-2021-06-26-at-05.52.06.png\"></a></div>",
        "id": 243994856,
        "sender_full_name": "Kevin Mayfield",
        "timestamp": 1624683137
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"203235\">@Ward Weistra</span></p>",
        "id": 244034429,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1624741616
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"193430\">@Alexander Zautke</span> also encountered and overcame this. Can you share?</p>",
        "id": 244123051,
        "sender_full_name": "Ward Weistra",
        "timestamp": 1624874264
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191687\">@Kevin Mayfield</span> Starting with version 0.2.0 you will need to provide Simplifier login credentials. If you enable the .NET validation part, Firely.Terminal will also execute a set of quality control rules. By default only the minimal checks, but you can configure it to run your own set of rules specified in your repo. For quality control it's mandatory to run <code>fhir login</code> first. You can provide these credentials as repository secrets or organization secrets in GitHub (configured in the Settings part of the repository):</p>\n<div class=\"codehilite\"><pre><span></span><code>- name: Firely.Terminal (GitHub Actions)\n  uses: FirelyTeam/firely-terminal-pipeline@v0.2.0\n  with:\n  [...]\n  SIMPLIFIER_USERNAME: ${{ secrets.SIMPLIFIER_USERNAME }}\n  SIMPLIFIER_PASSWORD: ${{ secrets.SIMPLIFIER_PASSWORD }}\n</code></pre></div>\n<p>I will add an error message if no credentials are configured before attempting to execute a login. Sorry for the inconvenience.</p>",
        "id": 244138094,
        "sender_full_name": "Alexander Zautke",
        "timestamp": 1624884115
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191687\">@Kevin Mayfield</span> Can you share the error that you get when the Java validation part is enabled? I have it running in a different project, happy to debug the issue.</p>",
        "id": 244138470,
        "sender_full_name": "Alexander Zautke",
        "timestamp": 1624884288
    },
    {
        "content": "<p>first test looking good</p>",
        "id": 244139878,
        "sender_full_name": "Kevin Mayfield",
        "timestamp": 1624885019
    },
    {
        "content": "<p>Many thanks. Up and running again on the latest version.</p>",
        "id": 244140893,
        "sender_full_name": "Kevin Mayfield",
        "timestamp": 1624885499
    },
    {
        "content": "<p>That dot net validation</p>",
        "id": 244140956,
        "sender_full_name": "Kevin Mayfield",
        "timestamp": 1624885536
    },
    {
        "content": "<p>Java error is </p>\n<p><a href=\"/user_uploads/10155/ks9JCghYuk4rxBtV8Ny89H9k/image.png\">image.png</a> </p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/ks9JCghYuk4rxBtV8Ny89H9k/image.png\" title=\"image.png\"><img src=\"/user_uploads/10155/ks9JCghYuk4rxBtV8Ny89H9k/image.png\"></a></div><p>I think that's because of the way we have our conformance resources structured.  We have split the conformance resources into sub directories <a href=\"https://github.com/NHSDigital/NHSDigitial-FHIR-Clinical-ImplementationGuide\">https://github.com/NHSDigital/NHSDigitial-FHIR-Clinical-ImplementationGuide</a></p>",
        "id": 244141659,
        "sender_full_name": "Kevin Mayfield",
        "timestamp": 1624885857
    },
    {
        "content": "<p>then you have to nominate each subdirectory</p>",
        "id": 244196662,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1624910290
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"193430\">@Alexander Zautke</span> we are nominating each subdirectory (including examples) in our workflow file (e.g. <a href=\"https://github.com/NHSDigital/NHSDigitial-FHIR-ImplementationGuide/actions/runs/979052361/workflow\">https://github.com/NHSDigital/NHSDigitial-FHIR-ImplementationGuide/actions/runs/979052361/workflow</a>). Does the pipeline take this into account when using java validation?</p>",
        "id": 244240391,
        "sender_full_name": "Kevin Mayfield",
        "timestamp": 1624950121
    },
    {
        "content": "<p>This would be ideal for us. Currently we are using java validation after IG publication, would like this also at an earlier stage.</p>",
        "id": 244240532,
        "sender_full_name": "Kevin Mayfield",
        "timestamp": 1624950220
    },
    {
        "content": "<p>Yes, the pipeline should add all subfolders using the -ig parameter. The path to the CodeSystem folder looks off. Instead of $workspace/CodeSystem, there is another „ NHSDigitial-FHIR-ImplementationGuide“ in the path. Do you have a link directly to the action run? I can’t find it if I look through your history on GitHub.</p>",
        "id": 244243732,
        "sender_full_name": "Alexander Zautke",
        "timestamp": 1624952538
    },
    {
        "content": "<p><a href=\"https://github.com/NHSDigital/NHSDigitial-FHIR-Clinical-ImplementationGuide/actions/runs/979072265\">https://github.com/NHSDigital/NHSDigitial-FHIR-Clinical-ImplementationGuide/actions/runs/979072265</a></p>",
        "id": 244243913,
        "sender_full_name": "Kevin Mayfield",
        "timestamp": 1624952690
    },
    {
        "content": "<p>That folder doesn't exist (the workflow file was copied from another project). I'll amend and re-run</p>",
        "id": 244244003,
        "sender_full_name": "Kevin Mayfield",
        "timestamp": 1624952760
    },
    {
        "content": "<p>Rerun was better <br>\n<a href=\"https://github.com/NHSDigital/NHSDigitial-FHIR-Clinical-ImplementationGuide/runs/2939761125\">https://github.com/NHSDigital/NHSDigitial-FHIR-Clinical-ImplementationGuide/runs/2939761125</a></p>\n<p>Failing with  Error: Process completed with exit code 1.</p>",
        "id": 244244573,
        "sender_full_name": "Kevin Mayfield",
        "timestamp": 1624953160
    },
    {
        "content": "<p>Could you set the EXPECTED_FAILS input to \"VALIDATION_CONFORMANCE_JAVA VALIDATION_EXAMPLES_JAVA\" to see if some part of the Java validation failing that doesn't get logged?</p>",
        "id": 244245804,
        "sender_full_name": "Alexander Zautke",
        "timestamp": 1624953974
    },
    {
        "content": "<p>Passed <a href=\"https://github.com/NHSDigital/NHSDigitial-FHIR-Clinical-ImplementationGuide/runs/2940389129\">https://github.com/NHSDigital/NHSDigitial-FHIR-Clinical-ImplementationGuide/runs/2940389129</a></p>\n<p>It's the examples failing (mostly on UK SNOMED)</p>",
        "id": 244251888,
        "sender_full_name": "Kevin Mayfield",
        "timestamp": 1624957603
    },
    {
        "content": "<p>Great to hear! With JAVA_VALIDATION_OPTIONS you can directly pass a string with arguments to the java validator. You could specify your own terminology server here.</p>",
        "id": 244253902,
        "sender_full_name": "Alexander Zautke",
        "timestamp": 1624958745
    },
    {
        "content": "<p>Others worked.... terminology server will be a another battle - for some reason UK terminology has OAuth enabled.</p>",
        "id": 244256923,
        "sender_full_name": "Kevin Mayfield",
        "timestamp": 1624960570
    }
]