[
    {
        "content": "<p>Did I do something wrong, or should I just expect a valueset in an IG to not be expanded?</p>\n<p>No Expansion for this valueset (not supported by Publication Tooling)<br>\nsee <a href=\"http://build.fhir.org/ig/IHE/ITI.MHD/branches/master/valueset-IHE.formatcode.vs.html\" target=\"_blank\" title=\"http://build.fhir.org/ig/IHE/ITI.MHD/branches/master/valueset-IHE.formatcode.vs.html\">http://build.fhir.org/ig/IHE/ITI.MHD/branches/master/valueset-IHE.formatcode.vs.html</a></p>",
        "id": 180635216,
        "sender_full_name": "John Moehrke",
        "timestamp": 1573657839
    },
    {
        "content": "<p>There may be an issue with it trying to expand that set that is referenced by OID.</p>",
        "id": 180649104,
        "sender_full_name": "David Pyke",
        "timestamp": 1573665244
    },
    {
        "content": "<p>not so much that it is referenced by an OID, but that it is not defined anywhere. The Publication tooling is not magic. If it's meant to refer to <a href=\"http://build.fhir.org/ig/IHE/ITI.MHD/branches/master/IHE.formatcode.cs.xml.html\" target=\"_blank\" title=\"http://build.fhir.org/ig/IHE/ITI.MHD/branches/master/IHE.formatcode.cs.xml.html\">http://build.fhir.org/ig/IHE/ITI.MHD/branches/master/IHE.formatcode.cs.xml.html</a>, then you need to use the correct canonical URL</p>",
        "id": 180668226,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1573676835
    },
    {
        "content": "<p>Wait... the Publication Tooling is not magic?????   This can't be.. it sure seems like magic to me...    BUT, I am refering to the CDA code-set given the URL that I find it is defined as...<br>\n<a href=\"https://terminology.hl7.org/builds/current/site/CodeSystem-hl7-document-format-codes.html\" target=\"_blank\" title=\"https://terminology.hl7.org/builds/current/site/CodeSystem-hl7-document-format-codes.html\">https://terminology.hl7.org/builds/current/site/CodeSystem-hl7-document-format-codes.html</a></p>",
        "id": 180695574,
        "sender_full_name": "John Moehrke",
        "timestamp": 1573700049
    },
    {
        "content": "<p>here is a more simple version... I have added this valueset to the FormatCode IG.  <a href=\"http://build.fhir.org/ig/IHE/FormatCode/branches/master/valueset-IHE.formatcode.vs.html\" target=\"_blank\" title=\"http://build.fhir.org/ig/IHE/FormatCode/branches/master/valueset-IHE.formatcode.vs.html\">http://build.fhir.org/ig/IHE/FormatCode/branches/master/valueset-IHE.formatcode.vs.html</a></p>",
        "id": 180695612,
        "sender_full_name": "John Moehrke",
        "timestamp": 1573700142
    },
    {
        "content": "<p>Codesystem:<br>\nDefining URL:   <a href=\"http://terminology.hl7.org/CodeSystem/hl7-document-format-codes\" target=\"_blank\" title=\"http://terminology.hl7.org/CodeSystem/hl7-document-format-codes\">http://terminology.hl7.org/CodeSystem/hl7-document-format-codes</a></p>",
        "id": 180695941,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1573700573
    },
    {
        "content": "<p>in the value set:</p>",
        "id": 180695955,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1573700596
    },
    {
        "content": "<p>Include all codes defined in urn:oid:1.3.6.1.4.1.19376.1.2.3</p>",
        "id": 180695961,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1573700605
    },
    {
        "content": "<p>&lt;compose&gt;<br>\n    &lt;include&gt;<br>\n      &lt;system value=\"urn:oid:1.3.6.1.4.1.19376.1.2.3\"/&gt;<br>\n    &lt;/include&gt;<br>\n    &lt;include&gt;<br>\n      &lt;system value=\"http://terminology.hl7.org/CodeSystem/hl7-document-format-codes\"/&gt;<br>\n    &lt;/include&gt;<br>\n  &lt;/compose&gt;</p>",
        "id": 180697663,
        "sender_full_name": "John Moehrke",
        "timestamp": 1573703202
    },
    {
        "content": "<p><a href=\"https://github.com/IHE/FormatCode\" target=\"_blank\" title=\"https://github.com/IHE/FormatCode\">https://github.com/IHE/FormatCode</a></p>",
        "id": 180697677,
        "sender_full_name": "John Moehrke",
        "timestamp": 1573703229
    },
    {
        "content": "<p>yes. well, what is urn:oid:1.3.6.1.4.1.19376.1.2.3 ?</p>",
        "id": 180698179,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1573704054
    },
    {
        "content": "<p>that is the IHE codesystem for FormatCodes... it is in this IG... Do you want me to try the URL form?</p>",
        "id": 180698250,
        "sender_full_name": "John Moehrke",
        "timestamp": 1573704158
    },
    {
        "content": "<p>I'd make a <em>strong</em> recommendation to the IHE to <em>not</em> use OIDs as the canonical URLs for FHIR artifacts.  Yes, there's a cost to translating OIDs to human-readable URLs, but the infrastructure has to exist for all conformant systems regardless and the incremental cost is therefore low.  The benefit of moving to human-readable URLs is significant.  If you don't do it initially, it's going to be much harder to do it in the future (because the infrastructure exists for v3/CDA &lt;-&gt; FHIR conversion, not for FHIR &lt;-&gt; FHIR conversion.</p>",
        "id": 180698363,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1573704360
    },
    {
        "content": "<p>well that did not fix it</p>",
        "id": 180698474,
        "sender_full_name": "John Moehrke",
        "timestamp": 1573704485
    },
    {
        "content": "<p>OIDS are used more universally across many protocols. I understand the FHIR preference.. but it is not a universal preference</p>",
        "id": 180698483,
        "sender_full_name": "John Moehrke",
        "timestamp": 1573704534
    },
    {
        "content": "<p>and this codesystem and valueset have been known by these OIDS for 15 years</p>",
        "id": 180698494,
        "sender_full_name": "John Moehrke",
        "timestamp": 1573704547
    },
    {
        "content": "<p>I understand that it's known by those OIDs in other protocols for many years.  But there are new implementers all the time, and all of them will struggle to recognize and differentiate the OIDs.  Whereas those who have been using the OIDs for all 15 of those years will still understand the human-readable URL.  (That's the benefit of them being human-readable.)  \"We've been incurring the learning curve and maintenance cost of OIDs for 15 years\" isn't a strong argument for continuing to incur that cost for the next 15+</p>",
        "id": 180698630,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1573704740
    },
    {
        "content": "<p>note also that this OID is how the FHIR valueset is created today. So this is not the new part. The new part is that I am bringing in the HL7 defined codes to this valuset</p>",
        "id": 180698635,
        "sender_full_name": "John Moehrke",
        "timestamp": 1573704750
    },
    {
        "content": "<p>so the thing that is not working.. is the new HL7 codesystem</p>",
        "id": 180698639,
        "sender_full_name": "John Moehrke",
        "timestamp": 1573704782
    },
    {
        "content": "<p>I appreciate your distaste for OID.. but that is not the problem</p>",
        "id": 180698645,
        "sender_full_name": "John Moehrke",
        "timestamp": 1573704816
    },
    {
        "content": "<p>I realize this is tangential to the discussion of what's not working.  And it's unlikely (though potentially possible) that the issue is caused by it being an OID.  What I'm doing is passing a message to you that I hope you can take back to IHE.  Retaining OIDs in IHE's FHIR specs is ill-advised.</p>",
        "id": 180698691,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1573704860
    },
    {
        "content": "<p>I still expect the problem is something I am doing wrong. just not clear what that is yet</p>",
        "id": 180698692,
        "sender_full_name": "John Moehrke",
        "timestamp": 1573704867
    },
    {
        "content": "<p>ValueSet.compose.include.system is the canonical URL for the Code System to include codes from. How have you provided the code system with the canonical URL in quetsion?</p>",
        "id": 180710015,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1573720289
    },
    {
        "content": "<p>In the case of the IHE one, yes it is in the same IG... in the case of the HL7 one I expected that to come from the terminology server.</p>",
        "id": 180728618,
        "sender_full_name": "John Moehrke",
        "timestamp": 1573737044
    },
    {
        "content": "<p>but it's not in the same IG. That's where the problem is</p>",
        "id": 180728767,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1573737140
    },
    {
        "content": "<p>so... I removed the hl7 one, and it still doesn't work.. as I indicated, I think there is something more simple. Can you look at the vs source?</p>",
        "id": 180729668,
        "sender_full_name": "John Moehrke",
        "timestamp": 1573737759
    },
    {
        "content": "<p>I've already told you - you're referring to something you haven't defined:</p>\n<p><code>Include all codes defined in urn:oid:1.3.6.1.4.1.19376.1.2.3</code></p>\n<p>urn:oid:1.3.6.1.4.1.19376.1.2.3 is not defined</p>",
        "id": 180729881,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1573737944
    },
    {
        "content": "<p>The code system needs to be defined in the core spec, in the implementation guide with the value set or in an implementation guide that's an explicit dependency of the IG defining the value set.</p>",
        "id": 180730298,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1573738299
    },
    {
        "content": "<p>it is the identifier in the codeSystem...<br>\nI have just switched it to the url in the codeSystem</p>",
        "id": 180730300,
        "sender_full_name": "John Moehrke",
        "timestamp": 1573738299
    },
    {
        "content": "<p>Implementation guides can't reference <em>any</em> resource (value set, extension, etc.) that isn't defined in something they have an explicit dependency on.</p>",
        "id": 180730390,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1573738361
    },
    {
        "content": "<p>Lloyd, it is in this IG. that is all that this IG is about is allowing IHE to publish this codeSystem for consumption by the FHIR core spec</p>",
        "id": 180730400,
        "sender_full_name": "John Moehrke",
        "timestamp": 1573738372
    },
    {
        "content": "<p>okay. so NOW the valueset with just the IHE codesystem that is in the IG with it is expanding... How do I add the HL7 codes?</p>",
        "id": 180730480,
        "sender_full_name": "John Moehrke",
        "timestamp": 1573738436
    },
    {
        "content": "<p>this set of codes  <a href=\"https://terminology.hl7.org/builds/current/site/CodeSystem-hl7-document-format-codes.html\" target=\"_blank\" title=\"https://terminology.hl7.org/builds/current/site/CodeSystem-hl7-document-format-codes.html\">https://terminology.hl7.org/builds/current/site/CodeSystem-hl7-document-format-codes.html</a></p>",
        "id": 180730630,
        "sender_full_name": "John Moehrke",
        "timestamp": 1573738538
    },
    {
        "content": "<p>that bit was fine - just put it back in and it should be ok</p>",
        "id": 180730898,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1573738733
    },
    {
        "content": "<p>I did try that when you recommended it... I just put it back again.. nope, doesn't work</p>",
        "id": 180732021,
        "sender_full_name": "John Moehrke",
        "timestamp": 1573739501
    }
]