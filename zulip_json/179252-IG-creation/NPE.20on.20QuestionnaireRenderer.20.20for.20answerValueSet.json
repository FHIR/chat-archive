[
    {
        "content": "<p>In our SDC IG, when trying to create an example for <a href=\"http://build.fhir.org/ig/HL7/sdc/StructureDefinition-sdc-referencesContained.html\">http://build.fhir.org/ig/HL7/sdc/StructureDefinition-sdc-referencesContained.html</a>.  I get an NPE when the answerValueSet only has an extension instead of a value.</p>\n<div class=\"codehilite\"><pre><span></span><code>    &lt;item&gt;\n      &lt;linkId value=&quot;2.4&quot;/&gt;\n      &lt;text value=&quot;Applicable health conditions&quot;/&gt;\n      &lt;type value=&quot;choice&quot;/&gt;\n      &lt;repeats value=&quot;true&quot;/&gt;\n      &lt;answerValueSet&gt;\n        &lt;extension url=&quot;http://hl7.org/fhir/StructureDefinition/cqf-expression&quot;&gt;\n          &lt;valueExpression&gt;\n            &lt;language value=&quot;text/fhirpath&quot;/&gt;\n            &lt;expression value=&quot;iif(%patient.gender=&#39;female&#39;,&#39;#vsConditionsFemale&#39;,iif(%patient.gender=&#39;male&#39;, &#39;#vsConditionsFemale&#39;, &#39;#vsConditionsAll&#39;))&quot;&gt;\n              &lt;extension url=&quot;http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-referencesContained&quot;&gt;\n                &lt;valueReference&gt;\n                  &lt;reference value=&quot;#vsConditionsFemale&quot;/&gt;\n                &lt;/valueReference&gt;\n              &lt;/extension&gt;\n              &lt;extension url=&quot;http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-referencesContained&quot;&gt;\n                &lt;valueReference&gt;\n                  &lt;reference value=&quot;#vsConditionsAll&quot;/&gt;\n                &lt;/valueReference&gt;\n              &lt;/extension&gt;\n            &lt;/expression&gt;\n          &lt;/valueExpression&gt;\n        &lt;/extension&gt;\n      &lt;/answerValueSet&gt;\n    &lt;/item&gt;\n</code></pre></div>\n<p>I get this build exception...</p>\n<div class=\"codehilite\"><pre><span></span><code>java.lang.NullPointerException\n        at org.hl7.fhir.r5.renderers.QuestionnaireRenderer.renderTreeItem(QuestionnaireRenderer.java:293)\n        at org.hl7.fhir.r5.renderers.QuestionnaireRenderer.renderTree(QuestionnaireRenderer.java:88)\n        at org.hl7.fhir.r5.renderers.QuestionnaireRenderer.render(QuestionnaireRenderer.java:57)\n        at org.hl7.fhir.r5.renderers.QuestionnaireRenderer.render(QuestionnaireRenderer.java:48)\n        at org.hl7.fhir.r5.renderers.ResourceRenderer.render(ResourceRenderer.java:74)\n        at org.hl7.fhir.igtools.publisher.Publisher.generateNarratives(Publisher.java:1179)\n        at org.hl7.fhir.igtools.publisher.Publisher.loadConformance(Publisher.java:3970)\n        at org.hl7.fhir.igtools.publisher.Publisher.createIg(Publisher.java:905)\n        at org.hl7.fhir.igtools.publisher.Publisher.execute(Publisher.java:759)\n</code></pre></div>",
        "id": 260848418,
        "sender_full_name": "Joee Garcia",
        "timestamp": 1636486155
    },
    {
        "content": "<p>fixed next release</p>",
        "id": 260851132,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1636487458
    },
    {
        "content": "<p>Hi <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> , </p>\n<p>I tried to build with the latest Publisher version (FHIR IG Publisher Version 1.1.89 (Git# 32eed25d439b)) but got a different exception this time:</p>\n<div class=\"codehilite\"><pre><span></span><code>onGenerate:\nException generating resource /Users/jgarcia/Projects/FHIR/git/sdc/input/examples/questionnaire-sdc-profile-example-form-behavior::Questionnaire/questionnaire-sdc-profile-example-form-behavior: null (00:45.0481)\njava.lang.NullPointerException\n        at org.hl7.fhir.r5.renderers.QuestionnaireRenderer.listOptions(QuestionnaireRenderer.java:795)\n        at org.hl7.fhir.r5.renderers.QuestionnaireRenderer.renderFormItem(QuestionnaireRenderer.java:611)\n        at org.hl7.fhir.r5.renderers.QuestionnaireRenderer.renderFormItem(QuestionnaireRenderer.java:768)\n        at org.hl7.fhir.r5.renderers.QuestionnaireRenderer.renderForm(QuestionnaireRenderer.java:558)\n        at org.hl7.fhir.r5.renderers.QuestionnaireRenderer.render(QuestionnaireRenderer.java:53)\n        at org.hl7.fhir.r5.renderers.QuestionnaireRenderer.render(QuestionnaireRenderer.java:48)\n        at org.hl7.fhir.r5.renderers.ResourceRenderer.build(ResourceRenderer.java:57)\n        at org.hl7.fhir.igtools.renderers.QuestionnaireRenderer.render(QuestionnaireRenderer.java:61)\n        at org.hl7.fhir.igtools.publisher.Publisher.generateOutputsQuestionnaire(Publisher.java:8296)\n        at org.hl7.fhir.igtools.publisher.Publisher.generateResourceHtml(Publisher.java:7137)\n        at org.hl7.fhir.igtools.publisher.Publisher.generateHtmlOutputs(Publisher.java:7072)\n        at org.hl7.fhir.igtools.publisher.Publisher.generate(Publisher.java:5233)\n        at org.hl7.fhir.igtools.publisher.Publisher.createIg(Publisher.java:954)\n        at org.hl7.fhir.igtools.publisher.Publisher.execute(Publisher.java:793)\n        at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:8927)\n   org.hl7.fhir.r5.renderers.QuestionnaireRenderer.listOptions(QuestionnaireRenderer.java:795) (00:45.0491)\n   org.hl7.fhir.r5.renderers.QuestionnaireRenderer.renderFormItem(QuestionnaireRenderer.java:611) (00:45.0492)\n   org.hl7.fhir.r5.renderers.QuestionnaireRenderer.renderFormItem(QuestionnaireRenderer.java:768) (00:45.0492)\n   org.hl7.fhir.r5.renderers.QuestionnaireRenderer.renderForm(QuestionnaireRenderer.java:558) (00:45.0493)\n   org.hl7.fhir.r5.renderers.QuestionnaireRenderer.render(QuestionnaireRenderer.java:53) (00:45.0494)\n   org.hl7.fhir.r5.renderers.QuestionnaireRenderer.render(QuestionnaireRenderer.java:48) (00:45.0494)\n   org.hl7.fhir.r5.renderers.ResourceRenderer.build(ResourceRenderer.java:57)    (00:45.0495)\n   org.hl7.fhir.igtools.renderers.QuestionnaireRenderer.render(QuestionnaireRenderer.java:61) (00:45.0495)\n   org.hl7.fhir.igtools.publisher.Publisher.generateOutputsQuestionnaire(Publisher.java:8296) (00:45.0496)\n   org.hl7.fhir.igtools.publisher.Publisher.generateResourceHtml(Publisher.java:7137) (00:45.0497)\n   org.hl7.fhir.igtools.publisher.Publisher.generateHtmlOutputs(Publisher.java:7072) (00:45.0497)\n   org.hl7.fhir.igtools.publisher.Publisher.generate(Publisher.java:5233)        (00:45.0498)\n   org.hl7.fhir.igtools.publisher.Publisher.createIg(Publisher.java:954)         (00:45.0498)\n   org.hl7.fhir.igtools.publisher.Publisher.execute(Publisher.java:793)          (00:45.0499)\n   org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:8927)            (00:45.0499)\n</code></pre></div>",
        "id": 263356592,
        "sender_full_name": "Joee Garcia",
        "timestamp": 1638392241
    },
    {
        "content": "<p>whoops. fixed next release</p>",
        "id": 263356907,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1638392402
    },
    {
        "content": "<p>Hi <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> ,</p>\n<p>Thanks for putting a fix in but I'm still getting an NPE with the latest Publisher version (FHIR IG Publisher Version 1.1.90 (Git# 9633e099796f)...</p>\n<div class=\"codehilite\"><pre><span></span><code>onGenerate:\nException generating resource /Users/jgarcia/Projects/FHIR/git/sdc/input/examples/questionnaire-sdc-profile-example-form-behavior::Questionnaire/questionnaire-sdc-profile-example-form-behavior: null (01:06.0297)\njava.lang.NullPointerException\n        at org.hl7.fhir.r5.renderers.QuestionnaireRenderer.renderFormItem(QuestionnaireRenderer.java:706)\n        at org.hl7.fhir.r5.renderers.QuestionnaireRenderer.renderFormItem(QuestionnaireRenderer.java:768)\n        at org.hl7.fhir.r5.renderers.QuestionnaireRenderer.renderForm(QuestionnaireRenderer.java:558)\n        at org.hl7.fhir.r5.renderers.QuestionnaireRenderer.render(QuestionnaireRenderer.java:53)\n        at org.hl7.fhir.r5.renderers.QuestionnaireRenderer.render(QuestionnaireRenderer.java:48)\n        at org.hl7.fhir.r5.renderers.ResourceRenderer.build(ResourceRenderer.java:57)\n        at org.hl7.fhir.igtools.renderers.QuestionnaireRenderer.render(QuestionnaireRenderer.java:61)\n        at org.hl7.fhir.igtools.publisher.Publisher.generateOutputsQuestionnaire(Publisher.java:8302)\n        at org.hl7.fhir.igtools.publisher.Publisher.generateResourceHtml(Publisher.java:7143)\n        at org.hl7.fhir.igtools.publisher.Publisher.generateHtmlOutputs(Publisher.java:7078)\n        at org.hl7.fhir.igtools.publisher.Publisher.generate(Publisher.java:5239)\n        at org.hl7.fhir.igtools.publisher.Publisher.createIg(Publisher.java:955)\n        at org.hl7.fhir.igtools.publisher.Publisher.execute(Publisher.java:794)\n        at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:8942)\n   org.hl7.fhir.r5.renderers.QuestionnaireRenderer.renderFormItem(QuestionnaireRenderer.java:706) (01:06.0318)\n   org.hl7.fhir.r5.renderers.QuestionnaireRenderer.renderFormItem(QuestionnaireRenderer.java:768) (01:06.0319)\n   org.hl7.fhir.r5.renderers.QuestionnaireRenderer.renderForm(QuestionnaireRenderer.java:558) (01:06.0319)\n   org.hl7.fhir.r5.renderers.QuestionnaireRenderer.render(QuestionnaireRenderer.java:53) (01:06.0320)\n   org.hl7.fhir.r5.renderers.QuestionnaireRenderer.render(QuestionnaireRenderer.java:48) (01:06.0321)\n   org.hl7.fhir.r5.renderers.ResourceRenderer.build(ResourceRenderer.java:57)    (01:06.0322)\n   org.hl7.fhir.igtools.renderers.QuestionnaireRenderer.render(QuestionnaireRenderer.java:61) (01:06.0323)\n   org.hl7.fhir.igtools.publisher.Publisher.generateOutputsQuestionnaire(Publisher.java:8302) (01:06.0324)\n   org.hl7.fhir.igtools.publisher.Publisher.generateResourceHtml(Publisher.java:7143) (01:06.0325)\n   org.hl7.fhir.igtools.publisher.Publisher.generateHtmlOutputs(Publisher.java:7078) (01:06.0325)\n   org.hl7.fhir.igtools.publisher.Publisher.generate(Publisher.java:5239)        (01:06.0326)\n   org.hl7.fhir.igtools.publisher.Publisher.createIg(Publisher.java:955)         (01:06.0327)\n   org.hl7.fhir.igtools.publisher.Publisher.execute(Publisher.java:794)          (01:06.0327)\n   org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:8942)            (01:06.0328)\n</code></pre></div>",
        "id": 264038397,
        "sender_full_name": "Joee Garcia",
        "timestamp": 1638898564
    },
    {
        "content": "<p>well, I'll try again in the next release</p>",
        "id": 264046612,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1638900872
    }
]