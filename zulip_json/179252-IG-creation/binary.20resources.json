[
    {
        "content": "<p>I seem to recall some more easy mechanism was added to IG build to support Binary. Something where our binary content could be just a file, that the IG builder would base64binary and encapsulate in a Binary. Or do I need to have a binary json with the content base64 encoded inside?</p>",
        "id": 264207318,
        "sender_full_name": "John Moehrke",
        "timestamp": 1638991711
    },
    {
        "content": "<p>you can just reference a file as a binary, and it'll be converted to a Binary resource autoamatically</p>",
        "id": 264207900,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1638991958
    },
    {
        "content": "<p>not sure I understand. so where do I put this file? and how do I refer to it? For example, I have a SAML xml file. I don't want the IG to think that it is FHIR xml</p>",
        "id": 264208161,
        "sender_full_name": "John Moehrke",
        "timestamp": 1638992095
    },
    {
        "content": "<p>you need to put an extension on the reference to the resource:</p>\n<div class=\"codehilite\" data-code-language=\"JSON\"><pre><span></span><code> <span class=\"nt\">\"extension\"</span> <span class=\"p\">:</span> <span class=\"p\">[{</span>\n  <span class=\"nt\">\"url\"</span> <span class=\"p\">:</span> <span class=\"s2\">\"http://hl7.org/fhir/StructureDefinition/implementationguide-resource-format\"</span><span class=\"p\">,</span>\n  <span class=\"nt\">\"valueCode\"</span> <span class=\"p\">:</span> <span class=\"s2\">\"application/pdf\"</span>\n<span class=\"p\">}]</span>\n</code></pre></div>\n<p>And the reference is like Binary/my-file, and unlike the normal case, where the file must have a matching name and .json or .xml, then file can have any extension</p>",
        "id": 264209312,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1638992586
    },
    {
        "content": "<p>do I put the file in the images folder?</p>",
        "id": 264303151,
        "sender_full_name": "John Moehrke",
        "timestamp": 1639057768
    },
    {
        "content": "<p>if you want, but I'd put it in the same folder as my other resources</p>",
        "id": 264352489,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1639077509
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> I am still not getting the contentType or filename errors to go away. Not finding any documentation of the <code>implementationguide-resource-format</code> extension, except in the sushi release notes around logical models. Tried what is specified there and it didn't work for me. Im using DocumentReference</p>",
        "id": 266507390,
        "sender_full_name": "John Moehrke",
        "timestamp": 1640962323
    },
    {
        "content": "<p>update - I have eliminated the errors by specifying the DocumentReference.content.attachment.contentType.</p>",
        "id": 266509674,
        "sender_full_name": "John Moehrke",
        "timestamp": 1640964856
    },
    {
        "content": "<p>I updated the confluence page <a href=\"https://confluence.hl7.org/pages/viewpage.action?pageId=66938614#ImplementationGuideParameters-BinaryAdjunctFiles\">https://confluence.hl7.org/pages/viewpage.action?pageId=66938614#ImplementationGuideParameters-BinaryAdjunctFiles</a></p>",
        "id": 266509779,
        "sender_full_name": "John Moehrke",
        "timestamp": 1640964977
    },
    {
        "content": "<p>Binary still throws a file type error</p>\n<div class=\"codehilite\"><pre><span></span><code>Unknown file type foobar.txt\n</code></pre></div>",
        "id": 266509895,
        "sender_full_name": "John Moehrke",
        "timestamp": 1640965156
    },
    {
        "content": "<p>how to reproduce this?</p>",
        "id": 266862718,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1641330050
    },
    {
        "content": "<p>It does this for me when I have a Binary, vs no error with DocumentReference.</p>",
        "id": 266870521,
        "sender_full_name": "John Moehrke",
        "timestamp": 1641333973
    },
    {
        "content": "<p>here is a test IG that will show the error<br>\n<a href=\"https://github.com/JohnMoehrke/testBinary\">https://github.com/JohnMoehrke/testBinary</a></p>",
        "id": 266874698,
        "sender_full_name": "John Moehrke",
        "timestamp": 1641336254
    },
    {
        "content": "<p>you need to add:</p>\n<div class=\"codehilite\"><pre><span></span><code>&quot;extension&quot; [{\n          &quot;url&quot; : &quot;http://hl7.org/fhir/StructureDefinition/implementationguide-resource-format&quot;,\n          &quot;valueCode&quot; : &quot;text/plain&quot;\n        }],\n</code></pre></div>",
        "id": 267019524,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1641436965
    },
    {
        "content": "<p>so there is bug in sushi that prevents this extension from moving from sushi-config to the IG json SUSHI#1005 </p>\n<p>BUT... I have tried adding this manually to the sushi output, but always get two IG build errors indicating the extension is unknown. YET, the sample-ig has this same thing in it and it doesn't throw these errors. I have carefully copied the sample-ig. <em>I must have some stupid mistake that my eyes are not finding.</em><br>\nHere is the entry in my manually edited IG json</p>\n<div class=\"codehilite\"><pre><span></span><code>    &quot;resource&quot;: [\n      {\n        &quot;extension&quot;: [\n          {\n            &quot;url&quot;: &quot;http://hl7.org/fhir/StructureDefinition/implementationguide-resource-format&quot;,\n            &quot;valueCode&quot;: &quot;application/xml&quot;\n          }\n        ],\n        &quot;reference&quot;: {\n          &quot;reference&quot;: &quot;Binary/B-hello-world&quot;\n        },\n        &quot;name&quot;: &quot;Binary example using Binary&quot;,\n        &quot;description&quot;: &quot;Example of a binary hello world using Binary.&quot;,\n        &quot;exampleBoolean&quot;: true\n      },\n ```\nbut I get this error\n</code></pre></div>\n<p>== fsh-generated\\resources\\ImplementationGuide-johnmoehrke.testbinary.json ==<br>\nERROR: ImplementationGuide/johnmoehrke.testbinary: ImplementationGuide.definition.resource[0].extension[0]: The extension <a href=\"http://hl7.org/fhir/StructureDefinition/implementationguide-resource-format\">http://hl7.org/fhir/StructureDefinition/implementationguide-resource-format</a> is unknown, and not allowed here<br>\nERROR: ImplementationGuide/johnmoehrke.testbinary: ImplementationGuide.definition.resource[0].extension[0].url: URL value '<a href=\"http://hl7.org/fhir/StructureDefinition/implementationguide-resource-format\">http://hl7.org/fhir/StructureDefinition/implementationguide-resource-format</a>' does not resolve</p>\n<div class=\"codehilite\"><pre><span></span><code>\n</code></pre></div>",
        "id": 267078802,
        "sender_full_name": "John Moehrke",
        "timestamp": 1641485512
    }
]