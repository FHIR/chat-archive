[
    {
        "content": "<p>Is there a specific way to indicate that an example in the <code>examples</code> directory corresponds to a <code>StrucutreDefintion</code> in the <code>resources</code> directory? I am <a href=\"https://github.com/HL7/fhir-security-label-ds4p/blob/master/input/security-label-ds4p.xml\" title=\"https://github.com/HL7/fhir-security-label-ds4p/blob/master/input/security-label-ds4p.xml\">using the <code>exampleCanonical</code> tag to specify that a resource is an example and link it to the corresponding <code>StrucutreDefintion</code></a> but I still get the QA warning:<br>\n<code>the Implementation Guide contains no examples for this extension</code></p>\n<p>I'm also wondering if this is related to the QA error I'm getting: <code>Specified profile type was \"Extension\", but found type \"Observation\"</code><br>\nI am using a minimal Observation resource to provide an example of how the extension can be used inside a resource.</p>",
        "id": 192132583,
        "sender_full_name": "Mohammad Jafari",
        "timestamp": 1585415530
    },
    {
        "content": "<p>Right now, ImplementationGuide doesn't allow asserting that a single example instance is an example for multiple profiles.  We've agreed to make that change, but it hasn't been applied yet.  Declaring that an instance is an example of a given profile won't help with the warning about an extension that profile uses - the example would have to explicitly point to the extension definition rather than the base profile.  For now, if you see the warning and you <em>know</em> you've got an example, you can suppress that warning.  Eventually, there will be a way to link an example to all of the structure definitions it provides an example of.</p>",
        "id": 192137025,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1585422221
    },
    {
        "content": "<p>Thanks <span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span>. Does this also apply to errors like <code>Specified profile type was \"Extension\", but found type \"Observation\"</code> on examples for an extension?</p>",
        "id": 192137246,
        "sender_full_name": "Mohammad Jafari",
        "timestamp": 1585422507
    },
    {
        "content": "<p>Nope, that sounds like a genuine error...</p>",
        "id": 192137693,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1585423133
    },
    {
        "content": "<p>The issue is that we're defining an extension and there is no way to provide an example for the extension other than showing how to use it on a resource (in this case a minimal Observation to minimize the noise around showing the actual use of the extension). The error seems to be complaining that the example is an Observation while the referenced definition is an Extension. <br>\nNow, since the multiplicity of <code>exampleCanonical</code> is <code>0..1</code> I cannot add more than one reference to say that this is an example for using the extension on an Observation resource. On the other hand, if I remove the <code>exampleCanonical</code> reference to the StructureDefinition for the extension I get an error that <code>The extension ... is unknown</code><br>\nSo to summarize, without the reference I get an error that the extension is unknown, and with the reference I get an error that the resource is an Observation but the definition is an Extension.<br>\nAny advice on how  I can resolve this error?<br>\n<a href=\"http://build.fhir.org/ig/HL7/fhir-security-label-ds4p/branches/master/qa.html\" title=\"http://build.fhir.org/ig/HL7/fhir-security-label-ds4p/branches/master/qa.html\">http://build.fhir.org/ig/HL7/fhir-security-label-ds4p/branches/master/qa.html</a><br>\n<a href=\"https://github.com/HL7/fhir-security-label-ds4p\" title=\"https://github.com/HL7/fhir-security-label-ds4p\">https://github.com/HL7/fhir-security-label-ds4p</a><br>\n<span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span></p>",
        "id": 192138015,
        "sender_full_name": "Mohammad Jafari",
        "timestamp": 1585423670
    },
    {
        "content": "<p>Resolve the error by not identifying the example as an example of the extension for now.  When we revamp ImplementationGuide, there'll be a better way.  For now, just ignore the warning about no example.</p>",
        "id": 192139465,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1585426116
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> if I do that, it will lead to errors like this:<br>\n<code>The extension ... is not allowed to be used at this point (allowed = p:Resource.meta; this element is [[Patient.meta, Meta])</code><br>\n<a href=\"http://build.fhir.org/ig/HL7/fhir-security-label-ds4p/branches/master/qa.html\" title=\"http://build.fhir.org/ig/HL7/fhir-security-label-ds4p/branches/master/qa.html\">http://build.fhir.org/ig/HL7/fhir-security-label-ds4p/branches/master/qa.html</a></p>\n<p>I'm wondering if I have made a mistake in defining the context of the extension, e.g.:<br>\n<a href=\"https://github.com/HL7/fhir-security-label-ds4p/blob/master/input/resources/structuredefinition/extension-must-display.json\" title=\"https://github.com/HL7/fhir-security-label-ds4p/blob/master/input/resources/structuredefinition/extension-must-display.json\">https://github.com/HL7/fhir-security-label-ds4p/blob/master/input/resources/structuredefinition/extension-must-display.json</a><br>\nor<br>\n<a href=\"https://github.com/HL7/fhir-security-label-ds4p/blob/master/input/resources/structuredefinition/extension-sec-label-basis.json\" title=\"https://github.com/HL7/fhir-security-label-ds4p/blob/master/input/resources/structuredefinition/extension-sec-label-basis.json\">https://github.com/HL7/fhir-security-label-ds4p/blob/master/input/resources/structuredefinition/extension-sec-label-basis.json</a></p>",
        "id": 192140468,
        "sender_full_name": "Mohammad Jafari",
        "timestamp": 1585427653
    },
    {
        "content": "<blockquote>\n<p>The extension ... is not allowed to be used at this point (allowed = p:Resource.meta; this element is [[Patient.meta, Meta])</p>\n</blockquote>\n<p>that's a bug in the validator</p>",
        "id": 192140819,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1585428256
    },
    {
        "content": "<p>no it's not. You need contextType = element, not fhirpath</p>",
        "id": 192144724,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1585434820
    },
    {
        "content": "<p>Thanks <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> It will be great if there is an example for a <code>fhirpath</code> context. It seems like what I had there was a valid FHIR path statement.</p>",
        "id": 192146341,
        "sender_full_name": "Mohammad Jafari",
        "timestamp": 1585437378
    },
    {
        "content": "<p>well, it was, but the context wasn't right. It's a statement that is evaluated in the context that contains the extension - which in this case is Resource.meta</p>",
        "id": 192156410,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1585457207
    },
    {
        "content": "<p>do you still get these errors? can I reproduce them?</p>",
        "id": 192168648,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1585479878
    },
    {
        "content": "<p>I don't get the errors after switching to <code>contexType=element</code>, although I didn't end up understanding why the <code>fhirpath</code> expression wouldn't work.</p>",
        "id": 192190038,
        "sender_full_name": "Mohammad Jafari",
        "timestamp": 1585510145
    }
]