[
    {
        "content": "<p>I need to require an Observation I'm profiling to constrain valueCodeableConcept touse a specific code system and a code that is actually a grammar for which I have a rough regular expression I can use as a first pass validation. I know I can use patternCodeableConcept or create a slice to constrain the code system, but I'm not sure how to constrain the code to the regex. I see I can use a regex with matches() in a fhirpath (<a href=\"http://hl7.org/fhirpath/#matchesregex-string-boolean\" target=\"_blank\" title=\"http://hl7.org/fhirpath/#matchesregex-string-boolean\">http://hl7.org/fhirpath/#matchesregex-string-boolean</a>) but not sure how to use it. Maybe invariant? I'd love to see an example if this is possible.</p>",
        "id": 191121094,
        "sender_full_name": " Bob Milius",
        "timestamp": 1584628316
    },
    {
        "content": "<p>Not a CodeableConcept, but one of my profiles has an Identifier slice with fixed system and a regex for the value:</p>\n<div class=\"codehilite\"><pre><span></span>{\n        &quot;id&quot;: &quot;Organization.identifier:Bbmri-EricId.system&quot;,\n        &quot;path&quot;: &quot;Organization.identifier.system&quot;,\n        &quot;fixedUri&quot;: &quot;http://www.bbmri-eric.eu/&quot;,\n        &quot;mustSupport&quot;: true\n      },\n      {\n        &quot;id&quot;: &quot;Organization.identifier:Bbmri-EricId.value&quot;,\n        &quot;path&quot;: &quot;Organization.identifier.value&quot;,\n        &quot;constraint&quot;: [\n          {\n            &quot;key&quot;: &quot;bbmri-id-1&quot;,\n            &quot;requirements&quot;: &quot;Make sure valid BBMRI IDs are provided&quot;,\n            &quot;severity&quot;: &quot;warning&quot;,\n            &quot;human&quot;: &quot;&lt;CC&gt;_&lt;local id&gt;: SHALL contain valid ISO-3166-1 alpha 2 country code followed by _ followed by biobank ID of national registry (if present).&quot;,\n            &quot;expression&quot;: &quot;matches(&#39;^([a-z]){2}_([a-zA-Z\\\\\\\\d])+$&#39;)&quot;,\n            &quot;source&quot;: &quot;Organization&quot;\n          }\n        ],\n        &quot;mustSupport&quot;: true\n      },\n</pre></div>",
        "id": 191122311,
        "sender_full_name": "Noemi Deppenwiese",
        "timestamp": 1584628808
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191916\">@ Bob Milius</span>  If you are doing this in FHIR Shorthand, it would be (not yet available, but it will be in the next release):</p>\n<div class=\"codehilite\"><pre><span></span>Invariant:  bbmri-id-1\nDescription: &quot;Make sure valid BBMRI IDs are provided&quot;\nExpression: &quot;matches(&#39;^([a-z]){2}_([a-zA-Z\\\\\\\\d])+$&#39;)&quot;\nSeverity:   #warning\n</pre></div>\n\n\n<p>Then in the profile:</p>\n<div class=\"codehilite\"><pre><span></span>* identifier.value obeys bbmri-id-1\n</pre></div>",
        "id": 191124956,
        "sender_full_name": "Mark Kramer",
        "timestamp": 1584629806
    },
    {
        "content": "<p>Thanks <span class=\"user-mention\" data-user-id=\"221444\">@Noemi Deppenwiese</span> and <span class=\"user-mention\" data-user-id=\"191447\">@Mark Kramer</span> <br>\nMark, I'll continue with my questions about FSH and regex in the shorthand stream</p>",
        "id": 191127132,
        "sender_full_name": " Bob Milius",
        "timestamp": 1584630707
    }
]