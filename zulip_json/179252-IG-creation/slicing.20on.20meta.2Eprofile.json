[
    {
        "content": "<p>I was once told that I did not have to do slicing on a meta.profile but that may have been a misunderstanding. I want to require that implementations following a phd profile enter at least one URL in the meta.profile element which is a fixed value. However, other meta.profile URLs are also allowed if the resource is also compliant to those profiles. But I am not sure how to do that. When I don't slice I get something that looks like I have 1..* profile elements of a fixed value. At least one could interpret it that way.</p>\n<p>So I tried this<br>\n<code>    &lt;element id=\"Device.meta.profile\"&gt;\n      &lt;path value=\"Device.meta.profile\" /&gt;\n      &lt;slicing&gt;\n        &lt;discriminator&gt;\n          &lt;type value=\"value\" /&gt;\n          &lt;path value=\"$this\" /&gt;\n        &lt;/discriminator&gt;\n        &lt;rules value=\"open\" /&gt;\n      &lt;/slicing&gt;\n      &lt;min value=\"1\" /&gt;\n    &lt;/element&gt;\n    &lt;element id=\"Device.meta.profile:phdProfile\"&gt;\n      &lt;path value=\"Device.meta.profile\" /&gt;\n      &lt;sliceName value=\"phdProfile\" /&gt;\n      &lt;min value=\"1\" /&gt;\n      &lt;max value=\"1\" /&gt;\n      &lt;fixedUri value=\"http://hl7.org/fhir/uv/phd/StructureDefinition/PhdDevice\" /&gt;\n    &lt;/element&gt;</code></p>\n<p>But when doing that Lloyd's framework build gives me an error saying it can't resolve the discriminator. The Example is exactly as it should be</p>\n<p><code>    \"meta\": {\n        \"profile\": [\n            \"http://hl7.org/fhir/uv/phd/StructureDefinition/PhdDevice\"\n        ]\n    },</code></p>\n<p>and the built structure definition looks exactly as I want it to look; the generic profile is a sum, and the sliced profile is one fixed value. It makes more sense than the previous no-slice (but no error) but having 1..* on the fixed value.</p>",
        "id": 159221740,
        "sender_full_name": "Brian Reinhold",
        "timestamp": 1550913436
    },
    {
        "content": "<p>If you want to set expectations on one repetition while allowing arbitrary other repetitions, the only way to accomplish that is with slicing.</p>",
        "id": 159233629,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1550936025
    },
    {
        "content": "<blockquote>\n<p>If you want to set expectations on one repetition while allowing arbitrary other repetitions, the only way to accomplish that is with slicing.</p>\n</blockquote>\n<p><span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> <br>\n okay, that's what I did above but the validator gives a cant resolve discriminator error. Any idea why?<br>\nIs it the path?</p>",
        "id": 159233691,
        "sender_full_name": "Brian Reinhold",
        "timestamp": 1550936118
    },
    {
        "content": "<p>Try path = value</p>",
        "id": 159233894,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1550936473
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> <br>\n shorthand for &lt;path value=\"value\" /&gt;?</p>",
        "id": 159233978,
        "sender_full_name": "Brian Reinhold",
        "timestamp": 1550936611
    },
    {
        "content": "<p>y</p>",
        "id": 159234229,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1550937069
    },
    {
        "content": "<p>(deleted)</p>",
        "id": 159238324,
        "sender_full_name": "Brian Reinhold",
        "timestamp": 1550943558
    },
    {
        "content": "<p>So that is actually valid syntax for the path?  If so, I've missed it in the ElementDefinition and restricted FHIRPath documentation.  As far as I know, the only place to use 'value' is in discriminator.type, not discriminator.path.</p>",
        "id": 159317059,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1551077404
    },
    {
        "content": "<blockquote>\n<p>So that is actually valid syntax for the path?  If so, I've missed it in the ElementDefinition and restricted FHIRPath documentation.  As far as I know, the only place to use 'value' is in discriminator.type, not discriminator.path.</p>\n</blockquote>\n<p>Rob,<br>\nI am also looking for the documentation on that. I know that I was stuck on that slicing for a long time; so simple: I have a list of URLs but I have to define slicing 'outside' of the list. There was no element in meta.profile to make a path to. I am still trying to find something in the slicing documentation or the FHIRPath material it references that indicates that I should have used &lt;path value=\"value\" /&gt; and what that means.</p>\n<p>In general I think the slicing docs need to be increased. Would like to see examples of each case. 'pattern' and those functions, for example. I still don't really understand how they work and what they can do.</p>",
        "id": 159328070,
        "sender_full_name": "Brian Reinhold",
        "timestamp": 1551091493
    },
    {
        "content": "<p>So have you been able to try &lt;path value=\"value\" /&gt; and have found that it works (not just doesn't generate errors)?  If so, that would definitely be good to know.</p>",
        "id": 159354457,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1551115080
    },
    {
        "content": "<blockquote>\n<p>So have you been able to try &lt;path value=\"value\" /&gt; and have found that it works (not just doesn't generate errors)?  If so, that would definitely be good to know.</p>\n</blockquote>\n<p>Works like a charm!!</p>\n<p>I think that needs to be documented. I really could not find out how to slice on a simple list of primitives</p>",
        "id": 159354653,
        "sender_full_name": "Brian Reinhold",
        "timestamp": 1551115228
    },
    {
        "content": "<p>Submit a change request</p>",
        "id": 159354663,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1551115247
    },
    {
        "content": "<p>Yes, we need to document that.  Broadening the question again, I assume that we still can't effectively slice on type = \"profile\" (which is what we originally wanted to do)?  Our use case was slicing on Composition.section.entry(), as described in the documentation for the discriminator type 'profile'.</p>",
        "id": 159355435,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1551115982
    }
]