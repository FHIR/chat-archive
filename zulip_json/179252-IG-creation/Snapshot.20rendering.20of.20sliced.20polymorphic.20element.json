[
    {
        "content": "<p>The HL7 AU <a href=\"https://build.fhir.org/ig/hl7au/au-fhir-base/StructureDefinition-au-medicationstatement.html\" target=\"_blank\" title=\"https://build.fhir.org/ig/hl7au/au-fhir-base/StructureDefinition-au-medicationstatement.html\">AU Base Medication Statement profile</a> has sliced the polymorphic element medication[x], with Australian flavours of the 2 choices medicationCodeableConcept and medicationReference. </p>\n<p>The differential table renders as expected, with just the 2 slice choices; like so<br>\n<a href=\"/user_uploads/10155/7zkSq-TudhSpGIa-7RyxgoLR/pasted_image.png\" target=\"_blank\" title=\"pasted_image.png\">pasted image</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/7zkSq-TudhSpGIa-7RyxgoLR/pasted_image.png\" target=\"_blank\" title=\"pasted image\"><img src=\"/user_uploads/10155/7zkSq-TudhSpGIa-7RyxgoLR/pasted_image.png\"></a></div><p>However, the snapshot view has what appears to be a duplication of the 2 choices; like this:<br>\n<a href=\"/user_uploads/10155/0q4VpOvz3o8u9NowAh-7D7bX/pasted_image.png\" target=\"_blank\" title=\"pasted_image.png\">pasted image</a> </p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/0q4VpOvz3o8u9NowAh-7D7bX/pasted_image.png\" target=\"_blank\" title=\"pasted image\"><img src=\"/user_uploads/10155/0q4VpOvz3o8u9NowAh-7D7bX/pasted_image.png\"></a></div><p>Wondering if that is by design, or something unexpected.</p>\n<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> - this is one of the things we recently chatted about</p>",
        "id": 174843669,
        "sender_full_name": "Rob Eastwood",
        "timestamp": 1567559764
    },
    {
        "content": "<p>it's... not a bug, but I think we can do something less confusing for readers of the spec</p>",
        "id": 174843864,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1567560118
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> I wouldn't expect duplicate type slicing constraints?<br>\nThis is how Forge now renders the this profile:<br>\n<a href=\"/user_uploads/10155/q7de4O8PIRrDs56k5kWL9GTT/pasted_image.png\" target=\"_blank\" title=\"pasted_image.png\">pasted image</a> <br>\nNote that this is a rendering from the Forge development branch, including all the recent updates/corrections to the SnapshotGenerator.</p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/q7de4O8PIRrDs56k5kWL9GTT/pasted_image.png\" target=\"_blank\" title=\"pasted image\"><img src=\"/user_uploads/10155/q7de4O8PIRrDs56k5kWL9GTT/pasted_image.png\"></a></div>",
        "id": 174863121,
        "sender_full_name": "Michel Rutten",
        "timestamp": 1567587223
    },
    {
        "content": "<p>Note that I have also updated the rendering of slices, in sync with HL7 build. Named slices are now displayed using the format <code>elementName:sliceName</code> (repeating the element name), for example <code>coding:pbs</code>. This also includes the rendering of extensions, e.g. <code>extension:medicationClass</code>. However I decided to make an exception for type slices, as <code>value[x}:valueCoding</code> seems redundant/noisy to me.</p>",
        "id": 174863487,
        "sender_full_name": "Michel Rutten",
        "timestamp": 1567587509
    },
    {
        "content": "<p>great.</p>",
        "id": 174919857,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1567628964
    },
    {
        "content": "<p>it's not really duplicate type slicing constraints, though it certainly looks like it. It's showing the base unsliced thing, with it's information, and then it shows the slices. But it sure looks, if you're not the person who generates it, as if it's showing the slices twice.</p>",
        "id": 174919974,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1567629017
    },
    {
        "content": "<p>Thanks <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> and <span class=\"user-mention\" data-user-id=\"191336\">@Michel Rutten</span></p>",
        "id": 174932995,
        "sender_full_name": "Rob Eastwood",
        "timestamp": 1567640826
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span></p>\n<p>I still don't understand the type slice duplication in the the generated snapshot of <a href=\"https://build.fhir.org/ig/hl7au/au-fhir-base/StructureDefinition-au-medicationstatement.htmlx\" target=\"_blank\" title=\"https://build.fhir.org/ig/hl7au/au-fhir-base/StructureDefinition-au-medicationstatement.htmlx\">https://build.fhir.org/ig/hl7au/au-fhir-base/StructureDefinition-au-medicationstatement.htmlx</a></p>\n<p>Per our discussion in Redmond, all type slices in the snapshot should be normalized to <code>elementName[x]:sliceName</code> representation. Renamed elements can only appear in a differential, as an optional shortcut notation.</p>\n<p><a href=\"#narrow/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element/near/167975569\" title=\"#narrow/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element/near/167975569\">https://chat.fhir.org/#narrow/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element/near/167975569</a></p>\n<blockquote>\n<p>Choices</p>\n<p>1. no slicing on snapshots - renaming only<br>\n2. renaming in differentials, slicing on snapshots<br>\n3. renaming or slicing in differentials, slicing in snapshots</p>\n</blockquote>\n<p><a href=\"#narrow/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element/near/167975586\" title=\"#narrow/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element/near/167975586\">https://chat.fhir.org/#narrow/stream/179177-conformance/topic/Slicing.20a.20non-repeating.20element/near/167975586</a></p>\n<blockquote>\n<p>decision - #3</p>\n</blockquote>\n<p>The current (R4 develop) version of the .NET SnapshotGenerator is still capable of processing snapshots with renamed elements, for compatibility reasons. But a snapshot that includes both representations of the same type slice constraint (e.g. <code>valueCoding</code> and <code>value[x]:valueCoding</code>) seems ambiguous.</p>",
        "id": 174970205,
        "sender_full_name": "Michel Rutten",
        "timestamp": 1567688159
    },
    {
        "content": "<p>are you asking the presentation of the snapshot? or about the snapshot itself?</p>",
        "id": 175104460,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1567804496
    },
    {
        "content": "<p>I'm confused about the snapshot itself.</p>",
        "id": 175226064,
        "sender_full_name": "Michel Rutten",
        "timestamp": 1568020962
    }
]