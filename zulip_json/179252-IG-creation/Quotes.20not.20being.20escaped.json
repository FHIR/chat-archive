[
    {
        "content": "<p>Hi,</p>\n<p>I'm about to publish an implementation guide, in which I supply XML examples. These show up in the generated html (Profile -&gt; Examples -&gt; XML tab). So far so good. Each example is enriched with a narrative when I run the IG publisher. However, the generated JSON example turns out invalid because the namespace quotes are not escaped. Here's an example:</p>\n<p>&lt;Communication xmlns=\"<a href=\"http://hl7.org/fhir\" target=\"_blank\" title=\"http://hl7.org/fhir\">http://hl7.org/fhir</a>\"&gt;<br>\n  &lt;id value=\"123\"/&gt;<br>\n  &lt;meta&gt;<br>\n    &lt;profile value=\"http://mycompany.com/message\"/&gt;<br>\n  &lt;/meta&gt;<br>\n  &lt;text&gt;<br>\n    &lt;status value=\"generated\"/&gt;<br>\n    &lt;div xmlns=\"http://www.w3.org/1999/xhtml\"&gt;&lt;p&gt;...&lt;/div&gt;<br>\n  &lt;/text&gt;...</p>\n<ul>\n<li>which causes this JSON example:</li>\n</ul>\n<p>{<br>\n  \"resourceType\" : \"Communication\",<br>\n  \"id\" : \"123\",<br>\n  \"meta\" : {<br>\n    \"profile\" : [<br>\n      \"<a href=\"http://mycompany.com/message\" target=\"_blank\" title=\"http://mycompany.com/message\">http://mycompany.com/message</a>\"<br>\n    ]<br>\n  },<br>\n  \"text\" : {<br>\n    \"status\" : \"generated\",<br>\n    \"div\" : \"&lt;div xmlns=\"http://www.w3.org/1999/xhtml\"&gt;...&lt;/div&gt;\"<br>\n  }...</p>\n<p>As you can see, the quotes surrounding the <a href=\"http://www.w3.org\" target=\"_blank\" title=\"http://www.w3.org\">www.w3.org</a>... namespace are not escaped in the JSON example, and thereby the example is not valid. Any input on how to fix this?</p>\n<p>Thanks,<br>\nOle Hedegaard</p>",
        "id": 158795346,
        "sender_full_name": "Ole Hedegaard",
        "timestamp": 1550492231
    },
    {
        "content": "<p>Please submit a change request</p>",
        "id": 158809385,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1550505427
    },
    {
        "content": "<p>The problem is more subtle.  The * displayed*  json in <code>[SD].json.html</code>  will not show the escapes since they are read as escapes - but download the artifact and you will see something like:</p>\n<div class=\"codehilite\"><pre><span></span>{\n  &quot;resourceType&quot;: &quot;StructureDefinition&quot;,\n  &quot;id&quot;: &quot;extension-blah&quot;,\n  &quot;text&quot;: {\n    &quot;status&quot;: &quot;generated&quot;,\n    &quot;div&quot;: &quot;&lt;div xmlns=\\&quot;http://www.w3.org/1999/xhtml\\&quot;&gt;&lt;table border=\\&quot;0\\&quot; cellpadding=\\&quot;0\\&quot; cellspacing=\\&quot;0\\&quot; style=\\&quot;border: 0px #F0F0F0 solid; font-size: 11px; font-family: verdana; vertical-align: top;\\&quot;&gt;&lt;tr style=\\&quot;border: 1px #F0F0F0 solid; font-size: 11px; font-family: verdana; vertical-align: top;\\&quot;&gt;&lt;th style=\\&quot;vertical-align: top; text-align : left; background-color: white; border: 0px #F0F0F0 solid; padding:0px 4px 0px 4px\\&quot; class=\\&quot;hierarchy\\&quot;&gt;&lt;a href=\\&quot;http://build.fhir.org/formats.html#table\\&quot; title=\\&quot;The logical name of the element\\&quot;&gt;Name&lt;/a&gt;&lt;/th&gt;&lt;th style=\\&quot;vertical-align: top; text-align : left; background-color: white; border: 0px #F0F0F0 solid; padding:0px 4px 0px 4px\\&quot; class=\\&quot;hierarchy\\&quot;&gt;&lt;a href=\\&quot;http://build.fhir.org/formats.html#table\\&quot; title=\\&quot;Information about the use of the element\\&quot;&gt;Flags&lt;/a&gt;&lt;/th&gt;&lt;th\n</pre></div>",
        "id": 158815478,
        "sender_full_name": "Eric Haas",
        "timestamp": 1550510537
    },
    {
        "content": "<p>well its an issue that they are not escaped. The fact that you can download working examples is great - but the rendering should be fixed as well</p>",
        "id": 158887641,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1550588127
    },
    {
        "content": "<p>Can you submit a change request?</p>",
        "id": 158889055,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1550589098
    },
    {
        "content": "<p><a href=\"https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=20413\" target=\"_blank\" title=\"https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=20413\">https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=20413</a></p>",
        "id": 159018128,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1550699278
    },
    {
        "content": "<p>or did you mean an PR on github?</p>",
        "id": 159018209,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1550699327
    },
    {
        "content": "<p>no a gforge ticket is right</p>",
        "id": 159018245,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1550699361
    }
]