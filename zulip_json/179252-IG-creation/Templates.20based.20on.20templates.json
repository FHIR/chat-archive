[
    {
        "content": "<p>The first pass of the template mechanism allows an IG to depend on a template.  The chain stops there.  However, I think we're going to need to have templates that depend on other templates.  For example, a Da Vinci template that depends on an HL7 International template that depends on a FHIR-logo-authorized template that depends on a generic template.  (The IHE template, CA template, AU template, etc. could all depend on the FHIR-logo-authorized template).  I think this should be doable. </p>\n<p>My proposed approach is to have the package.json of the template point to the package id of its \"base\" template.  The IG publisher - when loading a template would first check to see if the current template has a base and then recursively grab that until it gets to the end of the chain - the template with no base.  Then it would copy all of the contents of <em>that</em> template into the template folder.  Then it would work its way backward until it copies across the contents of the originally referenced template.  That way templates can overwrite/supplement files of the templates they're based on.</p>\n<p>Does that sound reasonable?</p>",
        "id": 172421740,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1564867272
    },
    {
        "content": "<p>If we don't allow templates to depend on other templates, then we're going to have the same forking problem we have now - just with a slightly smaller set of forks.</p>",
        "id": 172421786,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1564867331
    },
    {
        "content": "<p>I can see how this would work for static content. But I can't see how it would work for scripts</p>",
        "id": 172421958,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1564867683
    },
    {
        "content": "<p>You could choose to totally overwrite a script, but more typically your new template would define a new script that would import/include the original script.  The new template would point to the new script</p>",
        "id": 172422369,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1564868614
    },
    {
        "content": "<p>Ant can import and build on other ant files.  XSLT can inherit from other transforms.  I believe Javascript can do the same.</p>",
        "id": 172422410,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1564868653
    },
    {
        "content": "<p>so the files would overwrite? and then the template processing would use the final surviving config.json?</p>",
        "id": 172422422,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1564868717
    },
    {
        "content": "<p>Yes, it would use the final surviving config.json.  I guess we could get fancier and write a merged config.json where you start with the original and then add defaults and scripts, overwriting if they exist, keeping those not overwritten.  That would have the positive effect that if we turn on a new fragment type, it would auto-propagate</p>",
        "id": 172422613,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1564869089
    },
    {
        "content": "<p>yes I was worried this would lead to fancy bug-ridden ideas like that</p>",
        "id": 172422657,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1564869124
    },
    {
        "content": "<p>The alternative is that when we want to enhance the template to address some new capability or QA requirement, we're now looking at fixing 10+ different templates maintained in different locations</p>",
        "id": 172422842,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1564869524
    }
]