[
    {
        "content": "<p>If an Instance of List contains a reference to an Encounter in  list.encounter - IG publisher fails:</p>\n<div class=\"codehilite\"><pre><span></span><code>Exception in thread &quot;main&quot; java.lang.Error: Wrong node type\n    at org.hl7.fhir.utilities.xhtml.XhtmlNode.addText(XhtmlNode.java:270)\n    at org.hl7.fhir.utilities.xhtml.XhtmlNode.tx(XhtmlNode.java:638)\n    at org.hl7.fhir.r5.renderers.ListRenderer.shortForRef(ListRenderer.java:222)\n    at org.hl7.fhir.r5.renderers.ListRenderer.render(ListRenderer.java:62)\n    at org.hl7.fhir.r5.renderers.ResourceRenderer.render(ResourceRenderer.java:84)\n    at org.hl7.fhir.igtools.publisher.Publisher.generateNarratives(Publisher.java:1180)\n    at org.hl7.fhir.igtools.publisher.Publisher.loadConformance(Publisher.java:3921)\n    at org.hl7.fhir.igtools.publisher.Publisher.createIg(Publisher.java:897)\n    at org.hl7.fhir.igtools.publisher.Publisher.execute(Publisher.java:752)\n    at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:8664)\n</code></pre></div>",
        "id": 252773757,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1631274674
    },
    {
        "content": "<p>project to reproduce: <a href=\"https://github.com/patrick-werner/listEncounterFHIRbug\">https://github.com/patrick-werner/listEncounterFHIRbug</a></p>",
        "id": 252773758,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1631274674
    },
    {
        "content": "<p>Filed an issue: <a href=\"https://github.com/HL7/fhir-ig-publisher/issues/315\">https://github.com/HL7/fhir-ig-publisher/issues/315</a></p>",
        "id": 252774720,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1631275171
    },
    {
        "content": "<p>I have a slightly, but related, different problem. It is very specific to the List resource. Anytime I use .contained with List, I get IG build warnings. These warnings complain about not finding the .html pages for the contained resources. When a contained resource does not get their own page. The rendering of the List instance looks different than rendering of Observation.<br>\nSee my example IG -- <a href=\"http://build.fhir.org/ig/JohnMoehrke/testList/branches/main/index.html\">http://build.fhir.org/ig/JohnMoehrke/testList/branches/main/index.html</a></p>",
        "id": 270230020,
        "sender_full_name": "John Moehrke",
        "timestamp": 1643729560
    },
    {
        "content": "<p>github repo -- <a href=\"https://github.com/JohnMoehrke/testList\">https://github.com/JohnMoehrke/testList</a></p>",
        "id": 270230122,
        "sender_full_name": "John Moehrke",
        "timestamp": 1643729599
    },
    {
        "content": "<p>is this a new IG builder issue? Is this a IG templating issue?  <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span></p>",
        "id": 270230189,
        "sender_full_name": "John Moehrke",
        "timestamp": 1643729627
    },
    {
        "content": "<p>Actually, it happens more commonly with contained resources.  There's a fix to both templates and publisher that I'm finishing testing now, so should be available 'soon'</p>",
        "id": 270232052,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1643730190
    },
    {
        "content": "<p>good to know. I don't recall this happening a few months ago, but during the great CI-Build purge of 2022, I was forced to rebuild an IG and have been trying to track this down for a day.</p>",
        "id": 270232774,
        "sender_full_name": "John Moehrke",
        "timestamp": 1643730464
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191404\">John Moehrke</span> <a href=\"#narrow/stream/179252-IG-creation/topic/IG.20Publisher.3A.20Bug.20if.20List.20Instance.20contains.20.20encounter/near/270232774\">said</a>:</p>\n<blockquote>\n<p>but during the great CI-Build purge of 2022</p>\n</blockquote>\n<p>me in the future:<br>\nI remember way back when, and I don't mean to scare you young rascals, but we had chaos for days during the great CI-Build purge.  He whose name shall not be mentioned but who some say was the great Josh Mandel reigned hellfire from on high as He purged builds left, right, and center.  We did not realize it at the time but He was testing us and our commitment.  That day will always be remembered.</p>",
        "id": 270236308,
        "sender_full_name": "Jean Duteau",
        "timestamp": 1643731569
    },
    {
        "content": "<p>that deserves to be memorialized</p>",
        "id": 270237218,
        "sender_full_name": "John Moehrke",
        "timestamp": 1643731825
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191320\">Lloyd McKenzie</span> <a href=\"#narrow/stream/179252-IG-creation/topic/IG.20Publisher.3A.20Bug.20if.20List.20Instance.20contains.20.20encounter/near/270232052\">said</a>:</p>\n<blockquote>\n<p>Actually, it happens more commonly with contained resources.  There's a fix to both templates and publisher that I'm finishing testing now, so should be available 'soon'</p>\n</blockquote>\n<p><span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> is there as jira or github/issue tracking this fix?</p>",
        "id": 270460350,
        "sender_full_name": "John Moehrke",
        "timestamp": 1643837198
    },
    {
        "content": "<p><a href=\"https://github.com/HL7/fhir-ig-publisher/pull/386/\">https://github.com/HL7/fhir-ig-publisher/pull/386/</a></p>",
        "id": 270476735,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1643845136
    },
    {
        "content": "<p>Hi folks; follow-up question about rendering List instances: </p>\n<p><span class=\"user-mention silent\" data-user-id=\"191404\">John Moehrke</span> <a href=\"#narrow/stream/179252-IG-creation/topic/IG.20Publisher.3A.20Bug.20if.20List.20Instance.20contains.20.20encounter/near/270230020\">said</a>:</p>\n<blockquote>\n<p>...The rendering of the List instance looks different than rendering of Observation.</p>\n</blockquote>\n<p>I think am seeing the same thing with List instances - extensions not displayed, different elements running onto the same line, element names not enboldened. Taking your inspiration John, I created a stripped down IG to demonstrate this:</p>\n<ul>\n<li>a <a href=\"http://hl7.org/fhir/list-example-double-cousin-relationship-pedigree.html\">R4 List example</a> copied and commented out the hand-crafted narrative - see <a href=\"http://build.fhir.org/ig/robeastwood-agency/test-fhir-ig/branches/List-examples/List-example-double-cousin-relationship.html\">here</a></li>\n<li>a simple List example with a core spec List extension - see <a href=\"http://build.fhir.org/ig/robeastwood-agency/test-fhir-ig/branches/List-examples/List-example3.html\">here</a></li>\n</ul>\n<p><strong>Questions</strong></p>\n<ul>\n<li><span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> - does your linked PR #386 address this? </li>\n<li>or is this a new / elsewhere documented issue? (I have searched and found only this thread)</li>\n</ul>",
        "id": 270670763,
        "sender_full_name": "Rob Eastwood",
        "timestamp": 1643953390
    },
    {
        "content": "<p>Nope.  Mine is focused on contained resources and some rendering enhancements</p>",
        "id": 270671840,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1643954575
    },
    {
        "content": "<p>Thanks <span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span></p>",
        "id": 270671933,
        "sender_full_name": "Rob Eastwood",
        "timestamp": 1643954697
    },
    {
        "content": "<p>Re List example rendering: created new thread rather than hijack this one:<br>\n<a href=\"#narrow/stream/179252-IG-creation/topic/Rendering.20List.20examples.20-.20seems.20consistent\">https://chat.fhir.org/#narrow/stream/179252-IG-creation/topic/Rendering.20List.20examples.20-.20seems.20consistent</a></p>",
        "id": 270917145,
        "sender_full_name": "Rob Eastwood",
        "timestamp": 1644188804
    }
]