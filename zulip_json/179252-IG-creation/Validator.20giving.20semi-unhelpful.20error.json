[
    {
        "content": "<p>I have a sample Bundle that is being validated and the validator gives me an error that I just can't see:</p>\n<div class=\"codehilite\"><pre><span></span><code>  Error @ Bundle.entry[1].resource.ofType(Questionnaire).item[0] (line 67, col11) : Internal error: Error in ?? at 1, 1: The token : is not expected here - either a &quot;,&quot; or a &quot;)&quot; expected\n</code></pre></div>\n<p>When I open up this JSON file in a JSON editor, there are no complaints.  Here is the json around that line number:</p>\n<div class=\"codehilite\"><pre><span></span><code>66        &quot;item&quot;: [\n67          {\n68            &quot;extension&quot;: [\n69              {\n70                &quot;url&quot;: &quot;http://hl7.org/fhir/us/icsr-ae-reporting/StructureDefinition/extension-itemTitle&quot;,\n71                &quot;valueString&quot;: &quot;Single Line Text&quot;\n72              },\n</code></pre></div>\n<p>I'm getting an instance of the error for each item repetition and they all look the same.<br>\n<a href=\"/user_uploads/10155/CSRQIH8mC73D-Q9n3LOgpGJm/Bundle-HaleySampleSurveyBundle.json\">Bundle-HaleySampleSurveyBundle.json</a></p>",
        "id": 219363957,
        "sender_full_name": "Jean Duteau",
        "timestamp": 1607532559
    },
    {
        "content": "<p>I'd appreciate if anyone could look and tell me what I'm missing.</p>",
        "id": 219363992,
        "sender_full_name": "Jean Duteau",
        "timestamp": 1607532578
    },
    {
        "content": "<p>JSON is valid according to Spy.  You're using the most recent validator?</p>",
        "id": 219367741,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1607534233
    },
    {
        "content": "<p>yep and IG Publisher spits out the same error</p>",
        "id": 219368213,
        "sender_full_name": "Jean Duteau",
        "timestamp": 1607534410
    },
    {
        "content": "<p>FHIR Validation tool Version 5.2.9 (Git# 6907a004bed8). Built 2020-12-06T22:31:33.68Z (66 hours old)</p>",
        "id": 219368695,
        "sender_full_name": "Jean Duteau",
        "timestamp": 1607534621
    },
    {
        "content": "<p>that's an internal error for me. You should also be getting a warning or a hint as well</p>",
        "id": 219384076,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1607541380
    },
    {
        "content": "<p>hmm, i am getting other errors/warnings/hints but those make sense and don't seem related to this error.  Here is my full error log:</p>\n<div class=\"codehilite\"><pre><span></span><code>*FAILURE*: 19 errors, 2 warnings, 9 notes\n  Error @ Bundle.entry[0] (line 6, col6) : Except for transactions and batches, each entry in a Bundle must have a fullUrl which is the identity of the resource in the entry\n  Error @ Bundle.entry[0].resource.ofType(Questionnaire) (line 9, col17) : Resource requires an id, but none is present\n  Error @ Bundle.entry[1] (line 41, col6) : Except for transactions and batches, each entry in a Bundle must have a fullUrl which is the identity of the resource in the entry\n  Error @ Bundle.entry[1].resource.ofType(Questionnaire) (line 44, col17) : Resource requires an id, but none is present\n  Error @ Bundle.entry[2] (line 550, col6) : Except for transactions and batches, each entry in a Bundle must have a fullUrl which is the identity of the resource in the entry\n  Error @ Bundle.entry[2].resource.ofType(QuestionnaireResponse) (line 579, col19) : Resource requires an id, but none is present\n  Error @ Bundle.entry[1].resource.ofType(Questionnaire).item[0] (line 67, col11) : Internal error: Error in ?? at 1, 1: The token : is not expected here - either a &quot;,&quot; or a &quot;)&quot; expected\n  Error @ Bundle.entry[1].resource.ofType(Questionnaire).item[1] (line 186, col11) : Internal error: Error in ?? at 1, 1: The token : is not expected here - either a &quot;,&quot; or a &quot;)&quot; expected\n  Error @ Bundle.entry[1].resource.ofType(Questionnaire).item[2] (line 271, col11) : Internal error: Error in ?? at 1, 1: The token : is not expected here - either a &quot;,&quot; or a &quot;)&quot; expected\n  Error @ Bundle.entry[1].resource.ofType(Questionnaire).item[3] (line 295, col11) : Internal error: Error in ?? at 1, 1: The token : is not expected here - either a &quot;,&quot; or a &quot;)&quot; expected\n  Error @ Bundle.entry[1].resource.ofType(Questionnaire).item[4] (line 380, col11) : Internal error: Error in ?? at 1, 1: The token : is not expected here - either a &quot;,&quot; or a &quot;)&quot; expected\n  Error @ Bundle.entry[1].resource.ofType(Questionnaire).item[5] (line 439, col11) : Internal error: Error in ?? at 1, 1: The token : is not expected here - either a &quot;,&quot; or a &quot;)&quot; expected\n  Error @ Bundle.entry[1].resource.ofType(Questionnaire).item[6] (line 486, col11) : Internal error: Error in ?? at 1, 1: The token : is not expected here - either a &quot;,&quot; or a &quot;)&quot; expected\n  Error @ Bundle.entry[1].resource.ofType(Questionnaire).item[7] (line 511, col11) : Internal error: Error in ?? at 1, 1: The token : is not expected here - either a &quot;,&quot; or a &quot;)&quot; expected\n  Error @ Bundle.entry[1].resource.ofType(Questionnaire) (line 44, col17) : Questionnaire.date: minimum required = 1, but only found 0 (from http://hl7.org/fhir/us/icsr-ae-reporting/StructureDefinition/ibm-fda-shape-questionnaire)\n  Error @ Bundle.entry[1].resource.ofType(Questionnaire) (line 44, col17) : Questionnaire.description: minimum required = 1, but only found 0 (from http://hl7.org/fhir/us/icsr-ae-reporting/StructureDefinition/ibm-fda-shape-questionnaire)\n  Error @ Bundle.entry[1].resource.ofType(Questionnaire) (line 44, col17) : Questionnaire.identifier: minimum required = 1, but only found 0 (from http://hl7.org/fhir/us/icsr-ae-reporting/StructureDefinition/ibm-fda-shape-questionnaire)\n  Error @ Bundle.entry[1].resource.ofType(Questionnaire) (line 44, col17) : Questionnaire.name: minimum required = 1, but only found 0 (from http://hl7.org/fhir/us/icsr-ae-reporting/StructureDefinition/ibm-fda-shape-questionnaire)\n  Error @ Bundle.entry[1].resource.ofType(Questionnaire) (line 44, col17) : Questionnaire.title: minimum required = 1, but only found 0 (from http://hl7.org/fhir/us/icsr-ae-reporting/StructureDefinition/ibm-fda-shape-questionnaire)\n  Information @ Bundle.entry[1].resource.ofType(Questionnaire).item[2].extension[2] (line 281, col15) : This element does not match any known slice defined in the profile http://hl7.org/fhir/us/icsr-ae-reporting/StructureDefinition/ibm-fda-shape-questionnaire\n  Information @ Bundle.entry[1].resource.ofType(Questionnaire).item[5].extension[3] (line 460, col15) : This element does not match any known slice defined in the profile http://hl7.org/fhir/us/icsr-ae-reporting/StructureDefinition/ibm-fda-shape-questionnaire\n  Information @ Bundle.entry[1].resource.ofType(Questionnaire).item[5].extension[4] (line 464, col15) : This element does not match any known slice defined in the profile http://hl7.org/fhir/us/icsr-ae-reporting/StructureDefinition/ibm-fda-shape-questionnaire\n  Information @ Bundle.entry[1].resource.ofType(Questionnaire).item[5].extension[5] (line 468, col15) : This element does not match any known slice defined in the profile http://hl7.org/fhir/us/icsr-ae-reporting/StructureDefinition/ibm-fda-shape-questionnaire\n  Information @ Bundle.entry[1].resource.ofType(Questionnaire).item[5].extension[6] (line 472, col15) : This element does not match any known slice defined in the profile http://hl7.org/fhir/us/icsr-ae-reporting/StructureDefinition/ibm-fda-shape-questionnaire\n  Information @ Bundle.entry[1].resource.ofType(Questionnaire).item[5].extension[7] (line 476, col15) : This element does not match any known slice defined in the profile http://hl7.org/fhir/us/icsr-ae-reporting/StructureDefinition/ibm-fda-shape-questionnaire\n  Information @ Bundle.entry[1].resource.ofType(Questionnaire).item[7].extension[3] (line 532, col15) : This element does not match any known slice defined in the profile http://hl7.org/fhir/us/icsr-ae-reporting/StructureDefinition/ibm-fda-shape-questionnaire\n  Information @ Bundle.entry[1].resource.ofType(Questionnaire).item[7].extension[4] (line 536, col15) : This element does not match any known slice defined in the profile http://hl7.org/fhir/us/icsr-ae-reporting/StructureDefinition/ibm-fda-shape-questionnaire\n  Information @ Bundle.entry[2].resource.ofType(QuestionnaireResponse) (line 579, col19) : No questionnaire is identified, so no validation can be performed against the base questionnaire\n  Warning @ Bundle.entry[0].resource.ofType(Questionnaire) (line 9, col9) : que-0: Name should be usable as an identifier for the module by machine processing applications such as code generation [name.matches(&#39;[A-Z]([A-Za-z0-9_]){0,254}&#39;)]\n  Warning @ Bundle.entry[1].resource.ofType(Questionnaire) (line 44, col44) : que-0: Name should be usable as an identifier for the module by machine processing applications such as code generation [name.matches(&#39;[A-Z]([A-Za-z0-9_]){0,254}&#39;)]\n</code></pre></div>",
        "id": 219384509,
        "sender_full_name": "Jean Duteau",
        "timestamp": 1607541593
    },
    {
        "content": "<p>strange. how do I reproduce this</p>",
        "id": 219385408,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1607542002
    },
    {
        "content": "<p>I'll send you the bundle and the validator.pack.</p>",
        "id": 219385435,
        "sender_full_name": "Jean Duteau",
        "timestamp": 1607542018
    },
    {
        "content": "<p>a validator.pack?</p>",
        "id": 219386604,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1607542461
    },
    {
        "content": "<p>the only reason I can think of for the validator to expect a ) in a json document is for a fhirpath expression, is there some constraint or something in the structureDefinition that has a : in it?</p>",
        "id": 219389949,
        "sender_full_name": "ryan moehrke",
        "timestamp": 1607544057
    },
    {
        "content": "<p>what the error should say (having debugged it, and fixed up the error reporting) is:</p>\n<div class=\"codehilite\"><pre><span></span><code>  Error @ Bundle.entry[1].resource.ofType(Questionnaire).item[1] (line 186, col11) : Internal error: Error processing path expression for disciminator: Error @1, 1: The token : is not expected here - either a &quot;,&quot; or a &quot;)&quot; expected (src = &#39;extension(http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl)&#39;)\n</code></pre></div>",
        "id": 219390522,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1607544356
    }
]