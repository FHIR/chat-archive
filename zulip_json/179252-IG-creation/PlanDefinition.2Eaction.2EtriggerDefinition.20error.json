[
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span>   when we (<span class=\"user-mention\" data-user-id=\"192604\">@Kanwarpreet Sethi</span>  ) add a triggerDefinition into this PlanDefinition (<a href=\"https://github.com/HL7/case-reporting/blob/master/source/resources/instances/ecr-bundle-knowledge-distribution.xml\" target=\"_blank\" title=\"https://github.com/HL7/case-reporting/blob/master/source/resources/instances/ecr-bundle-knowledge-distribution.xml\">https://github.com/HL7/case-reporting/blob/master/source/resources/instances/ecr-bundle-knowledge-distribution.xml</a>)</p>\n<div class=\"codehilite\"><pre><span></span>&lt;action id=&quot;Orchestration&quot;&gt;\n          &lt;textEquivalent\n            value=&quot;Pick between the two sequence options based on rules processing: Healthcare-based processing, or RCKMS Rules Processing on AIMS Platform&quot; /&gt;\n          &lt;triggerDefinition&gt;\n            &lt;type value=&quot;data-added&quot; /&gt;\n            &lt;eventName value=&quot;Diagnoses or problems documented in a clinical record.&quot; /&gt;\n            &lt;!--&lt;eventData&gt;\n              &lt;type value=&quot;Condition&quot; /&gt;\n              &lt;codeFilter&gt;\n                &lt;path value=&quot;code&quot; /&gt;\n                &lt;valueSetReference&gt;\n                  &lt;reference value=&quot;diagnosis-value-set&quot; /&gt;\n                &lt;/valueSetReference&gt;\n              &lt;/codeFilter&gt;\n            &lt;/eventData&gt;--&gt;\n          &lt;/triggerDefinition&gt;\n</pre></div>\n\n\n<p>we are getting this error:</p>\n<div class=\"codehilite\"><pre><span></span>exception in thread &quot;main&quot; java.lang.Error: Unknown type TriggerDefinition\n    at org.hl7.fhir.convertors.VersionConvertor_30_40.convertType(VersionConvertor_30_40.java:2781)\n    at org.hl7.fhir.igtools.publisher.Publisher$TypeParserR3.parseType(Publisher.java:313)\n    at org.hl7.fhir.r4.utils.NarrativeGenerator.parseType(NarrativeGenerator.java:966)\n    at org.hl7.fhir.r4.utils.NarrativeGenerator$BaseWrapperMetaElement.getBase(NarrativeGenerator.java:542)\n    at org.hl7.fhir.r4.utils.NarrativeGenerator.renderLeaf(NarrativeGenerator.java:1330)\n    at org.hl7.fhir.r4.utils.NarrativeGenerator.addColumnValues(NarrativeGenerator.java:1269)\n    at org.hl7.fhir.r4.utils.NarrativeGenerator.generateByProfile(NarrativeGenerator.java:1143)\n    at org.hl7.fhir.r4.utils.NarrativeGenerator.generate(NarrativeGenerator.java:1048)\n    at org.hl7.fhir.igtools.publisher.Publisher.generateNarratives(Publisher.java:654)\n    at org.hl7.fhir.igtools.publisher.Publisher.createIg(Publisher.java:538)\n    at org.hl7.fhir.igtools.publisher.Publisher.execute(Publisher.java:498)\n    at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:4761)\n</pre></div>\n\n\n<p>Log here: <a href=\"http://build.fhir.org/ig/HL7/case-reporting/build.log\" target=\"_blank\" title=\"http://build.fhir.org/ig/HL7/case-reporting/build.log\">http://build.fhir.org/ig/HL7/case-reporting/build.log</a> </p>\n<p>It works when the triggerDefinition is commented out and fails when it isn't... I've tried all permutations of including/not including the stuff inside the triggerDefinition too...</p>",
        "id": 153988731,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1534550343
    },
    {
        "content": "<p>ok I'll look at it in a few minutes</p>",
        "id": 153988732,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1534550709
    },
    {
        "content": "<p>ok try again after the next build</p>",
        "id": 153988745,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1534553378
    },
    {
        "content": "<p>Thanks <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span>  - that worked...</p>",
        "id": 153988761,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1534555348
    }
]