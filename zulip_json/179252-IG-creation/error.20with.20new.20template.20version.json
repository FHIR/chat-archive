[
    {
        "content": "<p>Moving discussion here from <a href=\"#narrow/stream/179294-committers.2Fannounce/topic/New.20HL7.20template\" title=\"#narrow/stream/179294-committers.2Fannounce/topic/New.20HL7.20template\">https://chat.fhir.org/#narrow/stream/179294-committers.2Fannounce/topic/New.20HL7.20template</a>.  This is what I'm seeing in the auto-build (without making any changes) for order-catalog after this update to the new template version:</p>\n<div class=\"codehilite\"><pre><span></span>INFO:root:about to clone!\nDEBUG:root:running: git clone --recursive https://github.com/HL7/fhir-order-catalog --branch master repo\nDEBUG:root:Time to deadline 3479.997221 seconds\nCloning into &#39;repo&#39;...\nDEBUG:root:running: wget -q https://github.com/FHIR/latest-ig-publisher/raw/master/org.hl7.fhir.publisher.jar -O publisher.jar\nDEBUG:root:Time to deadline 3479.33098 seconds\nDEBUG:root:running: java -Xms14000m -Xmx14000m -jar ../publisher.jar -ig ig.json -auto-ig-build -target https://build.fhir.org/ig/HL7/fhir-order-catalog/ -out /scratch/ig-build-temp-I88S7Q/repo\nDEBUG:root:Time to deadline 3475.956612 seconds\nFHIR IG Publisher Version 1.0.67-SNAPSHOT (Git# 30b184df3160). Built 2020-02-25T12:07:21.909+11:00 (43 hours old)\nDetected Java version: 12.0.1 from /usr/java/openjdk-12 on amd64 (64bit). 13533MB available\nParameters: -ig ig.json -auto-ig-build -target https://build.fhir.org/ig/HL7/fhir-order-catalog/ -out /scratch/ig-build-temp-I88S7Q/repo\ndir = /scratch/ig-build-temp-I88S7Q/repo, path = /usr/local/rvm/bin:/usr/local/rvm/rubies/ruby-2.5.1/bin:/usr/java/openjdk-12/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\nRun time = Wednesday, February 26, 2020 at 8:51:19 PM Coordinated Universal Time (2020-02-26T20:51:19Z)\nPackage Cache: var/lib/.fhir/packages                                            (00:00.0020)\nLoad Template from hl7.fhir.template                                             (00:00.0736)\nInstalling hl7.fhir.template#current to the package cache\n  Fetching:\n  Installing:  done.\n Load Template from hl7.base.template#current                                    (00:01.0388)\nInstalling hl7.base.template#current to the package cache\n  Fetching:\n  Installing:  done.\n  Load Template from fhir.base.template#current                                  (00:01.0408)\nInstalling fhir.base.template#current to the package cache\n  Fetching:.\n  Installing: . done.\nPublishing Content Failed: If a script is provided, then targets must be defined (00:01.0471)\n                                                                                 (00:01.0471)\nUse -? to get command line help                                                  (00:01.0471)\n                                                                                 (00:01.0471)\nStack Dump (for debugging):                                                      (00:01.0471)\norg.hl7.fhir.exceptions.FHIRException: If a script is provided, then targets must be defined\n    at org.hl7.fhir.igtools.templates.Template.&lt;init&gt;(Template.java:109)\n    at org.hl7.fhir.igtools.templates.TemplateManager.loadTemplate(TemplateManager.java:86)\n    at org.hl7.fhir.igtools.publisher.Publisher.initializeFromIg(Publisher.java:1263)\n    at org.hl7.fhir.igtools.publisher.Publisher.initialize(Publisher.java:1205)\n    at org.hl7.fhir.igtools.publisher.Publisher.execute(Publisher.java:660)\n    at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:6933)\n</pre></div>\n\n\n<p>It's not immediately clear at all what \"targets must be defined\".  I think the new version needs to fail more gracefully, either generating warning or error messages rather than crashing outright on an existing IG that was previously building.</p>",
        "id": 189159350,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1582751412
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191405\">@Rob Hausam</span> Are you getting that on the CI build or locally?</p>",
        "id": 189166206,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1582755489
    },
    {
        "content": "<p>It means that we've got a problem with how overrides to the template config file are happening, the question is how you're seeing this when I'm not...</p>",
        "id": 189166262,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1582755524
    },
    {
        "content": "<p>both - what I posted is from CI (auto-build)</p>",
        "id": 189166298,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1582755546
    },
    {
        "content": "<p>not sure  - as I said, all I've done so far is try to build it</p>",
        "id": 189166354,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1582755586
    },
    {
        "content": "<p>We're getting different behavior from a local template than a committed/packaged template, which is somewhat problematic...</p>",
        "id": 189166489,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1582755650
    },
    {
        "content": "<p>Are you sure you're getting this when running locally with the current publisher?  I'm running SDC locally and it's fine...</p>",
        "id": 189166759,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1582755808
    },
    {
        "content": "<p>I'm not sure what the different behavior is that you're looking at - but agree it's a problem.</p>",
        "id": 189166848,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1582755863
    },
    {
        "content": "<p>My SDC runs fine locally with the package template, but fails on the CI build.  Can you confirm that you're running 1.67-SNAPSHOT locally and that it's failing with the same issue running locally?  And can you also indicate what OS you're on?</p>",
        "id": 189167015,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1582755968
    },
    {
        "content": "<p>yes, it's 1.0.67 and fails with the same error locally - on macOS</p>",
        "id": 189167114,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1582756054
    },
    {
        "content": "<p>Ok, I'll work w/ <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> on the why.  In the meantime, you can lock to the 0.1.0 release</p>",
        "id": 189167346,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1582756189
    },
    {
        "content": "<p>I tried locking to <code>template = fhir.base.template#0.1.0</code><br>\nbut so far that also didn't seem to work for me locally - maybe that indicates something else going on?<br>\nbut the IG auto-built successfully after the latest changes that Francois made two days ago (that build was on 1.0.66), and it hasn't been updated since then</p>",
        "id": 189167728,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1582756426
    },
    {
        "content": "<p>I guess I could try it again locally with 1.0.66 and see if that works</p>",
        "id": 189168246,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1582756742
    },
    {
        "content": "<p>1.0.66 didn't make any difference<br>\nand the template locking doesn't seem to be effective (or I'm doing it wrong) - with it set to 0.1.0 I'm still getting <code>Load Template from fhir.base.template#current</code></p>",
        "id": 189170320,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1582758202
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span>  I'm getting this same error:</p>\n<p>Publishing Content Failed: If a script is provided, then targets must be defined (00:02.0862)<br>\n(00:02.0862)<br>\nUse -? to get command line help                                                  (00:02.0862)<br>\n                                                                                 (00:02.0863)<br>\nStack Dump (for debugging):                                                      (00:02.0863)<br>\norg.hl7.fhir.exceptions.FHIRException: If a script is provided, then targets must be defined<br>\nat org.hl7.fhir.igtools.templates.Template.(Template.java:109)<br>\n    at org.hl7.fhir.igtools.templates.TemplateManager.loadTemplate(TemplateManager.java:86)<br>\n    at org.hl7.fhir.igtools.publisher.Publisher.initializeFromIg(Publisher.java:1263)<br>\n    at org.hl7.fhir.igtools.publisher.Publisher.initialize(Publisher.java:1205)<br>\n    at org.hl7.fhir.igtools.publisher.Publisher.execute(Publisher.java:660)<br>\n    at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:6933)</p>",
        "id": 189191223,
        "sender_full_name": "Rick Geimer",
        "timestamp": 1582786446
    },
    {
        "content": "<p>That was running on our Trifolia on FHIR server  (Linux I believe)<br>\nWhen I download and run locally on Windows 10 I get a different error:</p>\n<p>onGenerate.jira.check:<br>\nPublishing Content Failed: Warning: Could not find file C:\\PATH-REMOVED\\CCDAonFHIRR4\\${file.jira} to copy. (03:49.0660)<br>\n                                                                                 (03:49.0664)<br>\nUse -? to get command line help                                                  (03:49.0665)<br>\n                                                                                 (03:49.0667)<br>\nStack Dump (for debugging):                                                      (03:49.0669)<br>\nC:\\PATH-REMOVED\\CCDAonFHIRR4\\template\\scripts\\ant-hl7.xml:50: Warning: Could not find file C:\\PATH-REMOVED\\CCDAonFHIRR4\\${file.jira} to copy.<br>\n        at org.apache.tools.ant.taskdefs.Copy.copySingleFile(Copy.java:643)<br>\n        at org.apache.tools.ant.taskdefs.Copy.execute(Copy.java:463)<br>\n        at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:292)</p>",
        "id": 189192493,
        "sender_full_name": "Rick Geimer",
        "timestamp": 1582788711
    },
    {
        "content": "<p>(The PATH-REMOVED stuff was not in the actual error message, I just replaced the actual path with that for the post)</p>",
        "id": 189192535,
        "sender_full_name": "Rick Geimer",
        "timestamp": 1582788752
    },
    {
        "content": "<p>FYI, when I set template to the the following in ig.ini I got past that error:<br>\ntemplate = hl7.fhir.template#0.1.0</p>",
        "id": 189193181,
        "sender_full_name": "Rick Geimer",
        "timestamp": 1582789889
    },
    {
        "content": "<p>After that fix it crashed with an out of memory error, but that was addressed by bumping up the memory for the JVM and it eventually completed.</p>",
        "id": 189193449,
        "sender_full_name": "Rick Geimer",
        "timestamp": 1582790307
    },
    {
        "content": "<p>this is my problem to investigate but I'm out on the road and left my mac behind, and I need my mac to investigate</p>",
        "id": 189207930,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1582805585
    },
    {
        "content": "<p>I'll be home in 12 hours</p>",
        "id": 189207948,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1582805599
    },
    {
        "content": "<p>or you can fix to the older version of the template</p>",
        "id": 189207957,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1582805609
    },
    {
        "content": "<p>fixed to 0.1.0 for now</p>",
        "id": 189219094,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1582814482
    },
    {
        "content": "<p>I get the same error if I try to use any template other than fhir.base.template.</p>",
        "id": 189253652,
        "sender_full_name": "Michael Faughn",
        "timestamp": 1582835451
    },
    {
        "content": "<p>If you point to 0.1.0 of the FHIR template, that should work</p>",
        "id": 189255527,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1582836684
    },
    {
        "content": "<p>0.1.0 -- That's not working for me. I'm getting</p>\n<div class=\"codehilite\"><pre><span></span>onGenerate.jira.setup:\n     [xslt] Processing C:\\Users\\mkramer\\Documents\\GitHub\\fsh-mcode\\build\\template\\onGenerate-ig-updated.xml to C:\\Users\\mkramer\\Documents\\GitHub\\fsh-mcode\\build\\template\\properties.txt\n     [xslt] Loading stylesheet C:\\Users\\mkramer\\Documents\\GitHub\\fsh-mcode\\build\\template\\scripts\\onGenerate.genProperties.xslt\nWhen using the HL7 template, the IG id must start with &quot;hl7.&quot; - found fhir.us.mcode\n     [xslt] C:\\Users\\mkramer\\Documents\\GitHub\\fsh-mcode\\build\\template\\scripts\\onGenerate.genProperties.xslt:24: Fatal Error! Processing terminated by xsl:message at line 24 in onGenerate.genProperties.xslt\n     [xslt] Failed to process C:\\Users\\mkramer\\Documents\\GitHub\\fsh-mcode\\build\\template\\onGenerate-ig-updated.xml\nPublishing Content Failed: Fatal error during transformation using C:\\Users\\mkramer\\Documents\\GitHub\\fsh-mcode\\build\\template\\scripts\\onGenerate.genProperties.xslt: Processing terminated by xsl:message at line 24 in onGenerate.genProperties.xslt; SystemID: file:/C:/Users/mkramer/Documents/GitHub/fsh-mcode/build/template/scripts/onGenerate.genProperties.xslt; Line#: 24; Column#: -1 (01:52.0450)\n                                                                                 (01:52.0452)\nThis error was created by the template                                           (01:52.0453)\nPress any key to continue . . .\n</pre></div>",
        "id": 189266835,
        "sender_full_name": "Mark Kramer",
        "timestamp": 1582844440
    },
    {
        "content": "<p>I just pushed a version of SDC that locked to 0.1.0 and it worked both locally and on the CI build.<br>\n[IG]<br>\nig = input/sdc.xml<br>\ntemplate = hl7.fhir.template#0.1.0</p>",
        "id": 189267598,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1582845109
    },
    {
        "content": "<p>It's looking into my cache and not finding the package, then crashing. How do I download the packages ala carte?</p>",
        "id": 189267700,
        "sender_full_name": "Mark Kramer",
        "timestamp": 1582845189
    },
    {
        "content": "<p>You can't...  If it doesn't find the package locally, it should be grabbing it from the server - the same as the CI build does.  <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> ?</p>",
        "id": 189268381,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1582845777
    },
    {
        "content": "<p>You can't add a package directly to the local cache?</p>",
        "id": 189268628,
        "sender_full_name": "David Hay",
        "timestamp": 1582845973
    },
    {
        "content": "<p>If you hack hard enough, anything is probably possible, but I'm not aware of an easy/standard way to do it</p>",
        "id": 189268727,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1582846076
    },
    {
        "content": "<p>OK. I must admit I thought you just had to add the package to ~/.fhir/packages (though I hadn't got around to test it yet)...</p>",
        "id": 189269231,
        "sender_full_name": "David Hay",
        "timestamp": 1582846493
    },
    {
        "content": "<blockquote>\n<p>When using the HL7 template, the IG id must start with \"hl7.\" - found fhir.us.mcode</p>\n</blockquote>\n<p>This is not a problem finding a package, it's telling you that something is set up wrong in your IG</p>",
        "id": 189272126,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1582849302
    },
    {
        "content": "<p>That message is saying that he's running the 'current' template, not 0.1.0 - because that message is raised by the current HL7 template</p>",
        "id": 189274587,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1582851809
    },
    {
        "content": "<p>well, it won't fall back to the current version cause it can't find the specified version... so I'm not sure why this is a package access problem</p>",
        "id": 189274682,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1582851909
    },
    {
        "content": "<p>It <em>is</em> falling back to the current version.  If that's happening because it's not finding the specified version, then there might be an issue in your ig.ini <span class=\"user-mention\" data-user-id=\"191447\">@Mark Kramer</span></p>",
        "id": 189274801,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1582852035
    },
    {
        "content": "<p>It built but failing locally still</p>",
        "id": 189278641,
        "sender_full_name": "Mark Kramer",
        "timestamp": 1582857081
    },
    {
        "content": "<p>what exactly is failing?</p>",
        "id": 189278700,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1582857167
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191447\">@Mark Kramer</span> I think your issue is with the packageId in the ImplementationGuide resource. It should look like this:</p>\n<p>&lt;packageId value=\"hl7.fhir.us.yourig\"/&gt;</p>",
        "id": 189282820,
        "sender_full_name": "Rick Geimer",
        "timestamp": 1582863769
    },
    {
        "content": "<p>With the latest templates the package id must be in the following format:<br>\n<a href=\"http://hl7.family.realm.id\" target=\"_blank\" title=\"http://hl7.family.realm.id\">hl7.family.realm.id</a></p>",
        "id": 189282893,
        "sender_full_name": "Rick Geimer",
        "timestamp": 1582863856
    },
    {
        "content": "<p>Yes, but even if he does that, it'll blow up on the CI build right now.  He wants to force to the 0.1.0 version, which means there must be something wrong with how the version is getting declared</p>",
        "id": 189282988,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1582864068
    },
    {
        "content": "<p>I am getting an out of memory error for Java.  Has anyone see this?</p>\n<p>C:\\PQCMC_IG&gt;java -jar \".\\org.hl7.fhir.publisher.jar\" -ig \"C:\\PQCMC_IG\\ig.ini\" -tx n/a<br>\nFHIR IG Publisher Version 1.0.68-SNAPSHOT (Git# bf9523ab3379). Built 2020-02-28T15:36:27.947+11:00 (18 hours old)<br>\nDetected Java version: 1.8.0_241 from C:\\Program Files (x86)\\Java\\jre1.8.0_241 on x86 (32bit). 247MB available<br>\nParameters: -ig C:\\PQCMC_IG\\ig.ini -tx n/a<br>\ndir = C:\\PQCMC_IG, path = C:\\Program Files\\Microsoft MPI\\Bin\\;C:\\Program Files (x86)\\Common Files\\Oracle\\Java\\javapath;C:\\Program Files (x86)\\Intel\\Intel(R) Management Engine Components\\iCLS\\;C:\\Program Files\\Intel\\Intel(R) Management Engine Components\\iCLS\\;C:\\Windows\\system32;C:\\Windows;C:\\Windows\\System32\\Wbem;C:\\Windows\\System32\\WindowsPowerShell\\v1.0\\;C:\\Program Files (x86)\\Intel\\UCRT\\;C:\\Program Files\\Intel\\UCRT\\;C:\\Program Files (x86)\\Intel\\Intel(R) Management Engine Components\\DAL;C:\\Program Files\\Intel\\Intel(R) Management Engine Components\\DAL;C:\\Program Files (x86)\\Intel\\Intel(R) Management Engine Components\\IPT;C:\\Program Files\\Intel\\Intel(R) Management Engine Components\\IPT;C:\\Program Files (x86)\\NVIDIA Corporation\\PhysX\\Common;C:\\WINDOWS\\system32;C:\\WINDOWS;C:\\WINDOWS\\System32\\Wbem;C:\\WINDOWS\\System32\\WindowsPowerShell\\v1.0\\;C:\\WINDOWS\\System32\\OpenSSH\\;C:\\Program Files\\Intel\\WiFi\\bin\\;C:\\Program Files\\Common Files\\Intel\\WirelessCommon\\;C:\\Program Files\\dotnet\\;C:\\Program Files\\Microsoft SQL Server\\130\\Tools\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\Client SDK\\ODBC\\170\\Tools\\Binn\\;C:\\Program Files (x86)\\Microsoft SQL Server\\150\\Tools\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\150\\Tools\\Binn\\;C:\\Program Files (x86)\\Microsoft SQL Server\\150\\DTS\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\150\\DTS\\Binn\\;C:\\Program Files\\TortoiseGit\\bin;C:\\Program Files\\Git\\cmd;C:\\Ruby26-x64\\bin;C:\\Users\\Catherine\\AppData\\Local\\Microsoft\\WindowsApps<br>\nRun time = Friday, February 28, 2020 6:06:06 PM EST (2020-02-28T18:06:06-05:00)<br>\nPackage Cache: C:\\Users\\Catherine\\.fhir\\packages                                 (00:00.0008)<br>\nLoad Template from hl7.fhir.template#0.1.0                                       (00:00.0979)<br>\n Load Template from hl7.base.template#0.1.0                                      (00:01.0030)<br>\n  Load Template from fhir.base.template#0.1.0                                    (00:01.0042)</p>\n<p>onLoad.findSpreadsheets:</p>\n<p>onLoad.updateIg:<br>\n     [xslt] Processing C:\\PQCMC_IG\\template\\onLoad-ig-working.xml to C:\\PQCMC_IG\\template\\onLoad-ig-updated.xml<br>\n     [xslt] Loading stylesheet C:\\PQCMC_IG\\template\\scripts\\onLoad.xslt</p>\n<p>onLoad.extend:</p>\n<p>onLoad:<br>\nRoot directory: C:\\PQCMC_IG                                                      (00:05.0569)<br>\nCore Package hl7.fhir.r4.core#4.0.1<br>\nTerminology Cache is at C:\\PQCMC_IG\\input-cache\\txcache. 5 files in cache        (00:19.0115)<br>\nWARNING: Running without terminology server - terminology content will likely not publish correctly (00:19.0125)<br>\nLoad Package hl7.fhir.pubpack#0.0.3<br>\nLoad Package hl7.fhir.xver-extensions#0.0.1<br>\nInitialization complete                                                          (00:20.0075)<br>\nLoad Content                                                                     (00:20.0077)<br>\nProcessing Conformance Resources                                                 (00:21.0051)<br>\nTerminology server: Check for supported code systems for <a href=\"http://unstats.un.org/unsd/methods/m49/m49.htm\" target=\"_blank\" title=\"http://unstats.un.org/unsd/methods/m49/m49.htm\">http://unstats.un.org/unsd/methods/m49/m49.htm</a> (00:21.0587)<br>\n==============!! Running without terminology server !! ==============            (00:21.0589)<br>\n=====================================================================            (00:21.0590)<br>\nGenerating Narratives                                                            (00:23.0847)<br>\nValidating Resources                                                             (00:23.0848)<br>\nGenerating Outputs in C:\\PQCMC_IG\\output                                         (00:24.0011)</p>\n<p>onGenerate.checkVersions:<br>\n     [xslt] Processing C:\\PQCMC_IG\\template\\onGenerate-ig-working.xml to C:\\PQCMC_IG\\template\\versions.txt<br>\n     [xslt] Loading stylesheet C:\\PQCMC_IG\\template\\scripts\\onGenerate.getVersions.xslt</p>\n<p>onGenerate.r5-schemas:<br>\n      [get] Getting: <a href=\"http://build.fhir.org/fhir-single.xsd\" target=\"_blank\" title=\"http://build.fhir.org/fhir-single.xsd\">http://build.fhir.org/fhir-single.xsd</a><br>\n      [get] To: C:\\PQCMC_IG\\input-cache\\schemas\\R5\\fhir-single.xsd<br>\n      [get] Not modified - so not downloaded<br>\n      [get] Getting: <a href=\"http://build.fhir.org/fhir-xhtml.xsd\" target=\"_blank\" title=\"http://build.fhir.org/fhir-xhtml.xsd\">http://build.fhir.org/fhir-xhtml.xsd</a><br>\n      [get] To: C:\\PQCMC_IG\\input-cache\\schemas\\R5\\fhir-xhtml.xsd<br>\n      [get] Not modified - so not downloaded<br>\n      [get] Getting: <a href=\"http://build.fhir.org/xml.xsd\" target=\"_blank\" title=\"http://build.fhir.org/xml.xsd\">http://build.fhir.org/xml.xsd</a><br>\n      [get] To: C:\\PQCMC_IG\\input-cache\\schemas\\R5\\xml.xsd<br>\n      [get] Not modified - so not downloaded<br>\n      [get] Getting: <a href=\"http://build.fhir.org/xmldsig-core-schema.xsd\" target=\"_blank\" title=\"http://build.fhir.org/xmldsig-core-schema.xsd\">http://build.fhir.org/xmldsig-core-schema.xsd</a><br>\n      [get] To: C:\\PQCMC_IG\\input-cache\\schemas\\R5\\xmldsig-core-schema.xsd<br>\n      [get] Not modified - so not downloaded</p>\n<p>onGenerate.r4-schemas:<br>\n      [get] Getting: <a href=\"http://hl7.org/fhir/R4/fhir-single.xsd\" target=\"_blank\" title=\"http://hl7.org/fhir/R4/fhir-single.xsd\">http://hl7.org/fhir/R4/fhir-single.xsd</a><br>\n      [get] To: C:\\PQCMC_IG\\input-cache\\schemas\\R4\\fhir-single.xsd<br>\n      [get] Not modified - so not downloaded<br>\n      [get] Getting: <a href=\"http://hl7.org/fhir/R4/fhir-xhtml.xsd\" target=\"_blank\" title=\"http://hl7.org/fhir/R4/fhir-xhtml.xsd\">http://hl7.org/fhir/R4/fhir-xhtml.xsd</a><br>\n      [get] To: C:\\PQCMC_IG\\input-cache\\schemas\\R4\\fhir-xhtml.xsd<br>\n      [get] Not modified - so not downloaded<br>\n      [get] Getting: <a href=\"http://hl7.org/fhir/R4/xml.xsd\" target=\"_blank\" title=\"http://hl7.org/fhir/R4/xml.xsd\">http://hl7.org/fhir/R4/xml.xsd</a><br>\n      [get] To: C:\\PQCMC_IG\\input-cache\\schemas\\R4\\xml.xsd<br>\n      [get] Not modified - so not downloaded<br>\n      [get] Getting: <a href=\"http://hl7.org/fhir/R4/xmldsig-core-schema.xsd\" target=\"_blank\" title=\"http://hl7.org/fhir/R4/xmldsig-core-schema.xsd\">http://hl7.org/fhir/R4/xmldsig-core-schema.xsd</a><br>\n      [get] To: C:\\PQCMC_IG\\input-cache\\schemas\\R4\\xmldsig-core-schema.xsd<br>\n      [get] Not modified - so not downloaded</p>\n<p>onGenerate.r3-schemas:</p>\n<p>onGenerate.r2b-schemas:</p>\n<p>onGenerate.r2-schemas:</p>\n<p>onGenerate.schemas:</p>\n<p>onGenerate.setup:</p>\n<p>onGenerate.infoFile:<br>\n     [xslt] Processing C:\\PQCMC_IG\\template\\onGenerate-ig-working.xml to C:\\PQCMC_IG\\temp\\pages\\_data\\info.json<br>\n     [xslt] Loading stylesheet C:\\PQCMC_IG\\template\\scripts\\onGenerate.genJson.xslt</p>\n<p>onGenerate.processIncludes:<br>\n     [copy] Copying 7 files to C:\\PQCMC_IG\\temp\\pages\\_includes</p>\n<p>onGenerate.processIg:<br>\n     [xslt] Processing C:\\PQCMC_IG\\template\\onGenerate-ig-working.xml to C:\\PQCMC_IG\\template\\onGenerate-ig-working.1.xml<br>\n     [xslt] Loading stylesheet C:\\PQCMC_IG\\template\\scripts\\onGenerate.group.xslt<br>\n     [xslt] Processing C:\\PQCMC_IG\\template\\onGenerate-ig-working.1.xml to C:\\PQCMC_IG\\template\\onGenerate-ig-updated.xml<br>\n     [xslt] Loading stylesheet C:\\PQCMC_IG\\template\\scripts\\onGenerate.final.xslt</p>\n<p>onGenerate.artifactList:<br>\n     [xslt] Processing C:\\PQCMC_IG\\template\\onGenerate-ig-updated.xml to C:\\PQCMC_IG\\temp\\pages\\_includes\\artifacts.xml<br>\n     [xslt] Loading stylesheet C:\\PQCMC_IG\\template\\scripts\\createArtifactSummary.xslt</p>\n<p>onGenerate.igQa:<br>\n     [xslt] Processing C:\\PQCMC_IG\\template\\onGenerate-ig-updated.xml to C:\\PQCMC_IG\\template\\ongenerate-validation-igqa.json<br>\n     [xslt] Loading stylesheet C:\\PQCMC_IG\\template\\scripts\\onGenerate.qa.xslt</p>\n<p>onGenerate.extend:</p>\n<p>onGenerate:<br>\nUnable to find version-specific path for reference - defaulting to version-independent reference: <a href=\"http://terminology.hl7.org/ValueSet/v3-ConfidentialityClassification|2014-03-26\" target=\"_blank\" title=\"http://terminology.hl7.org/ValueSet/v3-ConfidentialityClassification|2014-03-26\">http://terminology.hl7.org/ValueSet/v3-ConfidentialityClassification|2014-03-26</a><br>\nUnable to find version-specific path for reference - defaulting to version-independent reference: <a href=\"http://terminology.hl7.org/ValueSet/v3-ConfidentialityClassification|2014-03-26\" target=\"_blank\" title=\"http://terminology.hl7.org/ValueSet/v3-ConfidentialityClassification|2014-03-26\">http://terminology.hl7.org/ValueSet/v3-ConfidentialityClassification|2014-03-26</a><br>\nUnable to find version-specific path for reference - defaulting to version-independent reference: <a href=\"http://terminology.hl7.org/ValueSet/v3-ConfidentialityClassification|2014-03-26\" target=\"_blank\" title=\"http://terminology.hl7.org/ValueSet/v3-ConfidentialityClassification|2014-03-26\">http://terminology.hl7.org/ValueSet/v3-ConfidentialityClassification|2014-03-26</a><br>\nGenerating Summary Outputs                                                       (00:41.0155)<br>\nSending Usage Stats to Server                                                    (00:53.0536)<br>\nJekyll: Source: C:/PQCMC_IG/temp/pages                                           (00:56.0610)<br>\nJekyll: Generating...                                                            (00:56.0612)<br>\nJekyll: done in 5.327 seconds.                                                   (01:01.0937)<br>\nInstalling hl7.fhir.us.pq-cmc#dev to the package cache<br>\n  Fetching:<br>\n  Installing:  done.<br>\nChecking Output HTML                                                             (01:03.0760)<br>\nfound 742 files                                                                  (01:03.0868)<br>\nException in thread \"main\" java.lang.OutOfMemoryError: Java heap space<br>\n        at java.util.Arrays.copyOf(Unknown Source)<br>\n        at java.lang.AbstractStringBuilder.ensureCapacityInternal(Unknown Source)<br>\n        at java.lang.AbstractStringBuilder.append(Unknown Source)<br>\n        at java.lang.StringBuilder.append(Unknown Source)<br>\n        at org.hl7.fhir.utilities.TextFile.streamToString(TextFile.java:176)<br>\n        at org.hl7.fhir.utilities.TextFile.fileToString(TextFile.java:162)<br>\n        at org.hl7.fhir.igtools.publisher.HTLMLInspector.loadFile(HTLMLInspector.java:326)<br>\n        at org.hl7.fhir.igtools.publisher.HTLMLInspector.check(HTLMLInspector.java:222)<br>\n        at org.hl7.fhir.igtools.publisher.Publisher.generate(Publisher.java:4371)<br>\n        at org.hl7.fhir.igtools.publisher.Publisher.createIg(Publisher.java:816)<br>\n        at org.hl7.fhir.igtools.publisher.Publisher.execute(Publisher.java:666)<br>\n        at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:6933)</p>",
        "id": 189360521,
        "sender_full_name": "Catherine Hosage Norman",
        "timestamp": 1582931518
    },
    {
        "content": "<p>I have, but not with a small IG like PQ-CMC.  How much memory do you have?</p>",
        "id": 189365415,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1582936055
    },
    {
        "content": "<p>16.0 GB 15.9 usable</p>",
        "id": 189366883,
        "sender_full_name": "Catherine Hosage Norman",
        "timestamp": 1582937530
    },
    {
        "content": "<p>It is giving me everything but the final QA.</p>",
        "id": 189366922,
        "sender_full_name": "Catherine Hosage Norman",
        "timestamp": 1582937614
    },
    {
        "content": "<p>That should be more than enough.  Do you have a bunch of other stuff chewing up memory?</p>",
        "id": 189369539,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1582940899
    },
    {
        "content": "<p>I closed a bunch of apps and watch the memory in task manager.  It never gets near the max, but I still get the memory error.  I am working on examples.  Will load it back up when they are done.  Maybe you can look at it on Monday.  I was getting this error just on the pull from GitHub.</p>",
        "id": 189371794,
        "sender_full_name": "Catherine Hosage Norman",
        "timestamp": 1582944507
    },
    {
        "content": "<p>You got out of memory just doing a pull request?  Sounds like something is wonky with your machine.  Maybe try a reboot?</p>",
        "id": 189373136,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1582947166
    },
    {
        "content": "<p>It doesn't matter how much memory your machine has. What matters is how much is available to Java - that's way less. That's why one of the first thing that the IG publisher logs is how much memory it has. From the log:</p>",
        "id": 189386193,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1582973994
    },
    {
        "content": "<blockquote>\n<p>247MB available</p>\n</blockquote>",
        "id": 189386194,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1582973997
    },
    {
        "content": "<p><a href=\"https://www.google.com/search?q=make+more+memory+available+to+java\" target=\"_blank\" title=\"https://www.google.com/search?q=make+more+memory+available+to+java\">https://www.google.com/search?q=make+more+memory+available+to+java</a></p>",
        "id": 189386243,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1582974046
    },
    {
        "content": "<p>Still getting the following error with the current template (all is fine with 0.1.0). <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> I think you said above you were going to look into it. Any ideas yet?</p>\n<p>onGenerate.jira.check:<br>\nPublishing Content Failed: Warning: Could not find file C:\\PATH-REMOVED\\${file.jira} to copy. (01:16.0585)<br>\n                                                                                 (01:16.0586)<br>\nUse -? to get command line help                                                  (01:16.0586)<br>\n                                                                                 (01:16.0587)<br>\nStack Dump (for debugging):                                                      (01:16.0587)<br>\nC:\\PATH-REMOVED\\template\\scripts\\ant-hl7.xml:50: Warning: Could not find file C:\\PATH-REMOVED\\${file.jira} to copy.</p>",
        "id": 190439892,
        "sender_full_name": "Rick Geimer",
        "timestamp": 1584044424
    },
    {
        "content": "<p>I don't know anything about this. how to reproduce?</p>",
        "id": 190443450,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1584046247
    },
    {
        "content": "<p>I get that error running the latest IG publisher locally with the following ig.ini content:</p>\n<p>[IG]<br>\nig = input/vrdr.xml<br>\ntemplate = hl7.fhir.template#current<br>\nusage-stats-opt-out = false</p>\n<p>If I change to use template 0.1.0 as follows I do not get that \"${file.jira)\" error and publishing completes:</p>\n<p>[IG]<br>\nig = input/vrdr.xml<br>\ntemplate = hl7.fhir.template#0.1.0<br>\nusage-stats-opt-out = false</p>\n<p>So seems like the current template is not populating that \"file.jira\" variable under certain circumstances. </p>\n<p>I believe <span class=\"user-mention\" data-user-id=\"191918\">@Sarah Gaunt</span> has encountered this issue as well.</p>\n<p>Lastly, \"PATH-REMOVED\" above is not in the actual error message, I just removed the actual path that was reported on my file system.</p>",
        "id": 190446561,
        "sender_full_name": "Rick Geimer",
        "timestamp": 1584047973
    },
    {
        "content": "<p>well, I can't reproduce with just the ini file... can I get the content of vrdr somewhere?</p>",
        "id": 190447965,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1584048831
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> I figured it out. The IG in question was missing package-list.json. If you remove that file from any IG you should get that very un-helpful and misleading error message.</p>",
        "id": 190449472,
        "sender_full_name": "Rick Geimer",
        "timestamp": 1584049840
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> perhaps you could make a more useful error please</p>",
        "id": 190449505,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1584049865
    },
    {
        "content": "<p>Now you shouldn't get an error message at all</p>",
        "id": 190541079,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1584125320
    }
]