[
    {
        "content": "<p>I get an NPE in the IG builder when I have an example List that includes in the List.item a reference to another List. I think this FSH is sufficient to cause the NPE</p>\n<div class=\"codehilite\"><pre><span></span><code>Instance: ex-documentreference2\nInstanceOf: DocumentReference\nTitle: &quot;Dummy DocumentReference 2 example&quot;\nDescription: &quot;Dummy DocumentReference 2 example for completeness sake. No actual use of this resource other than an example target&quot;\n* meta.security = http://terminology.hl7.org/CodeSystem/v3-ActReason#HTEST\n* status = #current\n* content.attachment.title = &quot;Hello World&quot;\n\nInstance: ex-list\nInstanceOf: List\nTitle: &quot;Dummy List example&quot;\nDescription: &quot;Dummy List example for completeness sake. No actual use of this resource other than an example target&quot;\n* meta.security = http://terminology.hl7.org/CodeSystem/v3-ActReason#HTEST\n* status = #current\n* mode = #working\n* entry.item = Reference(DocumentReference/ex-documentreference2)\n\nInstance: ex-list2\nInstanceOf: List\nTitle: &quot;Dummy List 2 example&quot;\nDescription: &quot;Dummy List 2 example for completeness sake. No actual use of this resource other than an example target&quot;\n* meta.security = http://terminology.hl7.org/CodeSystem/v3-ActReason#HTEST\n* status = #current\n* mode = #working\n* entry.item = Reference(List/ex-list)\n</code></pre></div>",
        "id": 221302268,
        "sender_full_name": "John Moehrke",
        "timestamp": 1609433805
    },
    {
        "content": "<div class=\"codehilite\"><pre><span></span><code>onGenerate:\nException generating resource C:\\Users\\john.moehrke\\Git\\ITI.MHD\\fsh-generated\\resources\\List-ex-list2::List/ex-list2: null (00:56.0921)\njava.lang.NullPointerException\n        at java.lang.String.replace(Unknown Source)\n        at org.hl7.fhir.igtools.publisher.Publisher.genListView(Publisher.java:6907)\n        at org.hl7.fhir.igtools.publisher.Publisher.genListViews(Publisher.java:6892)\n        at org.hl7.fhir.igtools.publisher.Publisher.generateOutputsList(Publisher.java:6848)\n        at org.hl7.fhir.igtools.publisher.Publisher.generateResourceHtml(Publisher.java:6702)\n        at org.hl7.fhir.igtools.publisher.Publisher.generateHtmlOutputs(Publisher.java:6653)\n        at org.hl7.fhir.igtools.publisher.Publisher.generate(Publisher.java:4906)\n        at org.hl7.fhir.igtools.publisher.Publisher.createIg(Publisher.java:888)\n        at org.hl7.fhir.igtools.publisher.Publisher.execute(Publisher.java:732)\n        at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:8414)\n   java.lang.String.replace(Unknown Source)                                      (00:56.0972)\n   org.hl7.fhir.igtools.publisher.Publisher.genListView(Publisher.java:6907)     (00:56.0973)\n   org.hl7.fhir.igtools.publisher.Publisher.genListViews(Publisher.java:6892)    (00:56.0976)\n   org.hl7.fhir.igtools.publisher.Publisher.generateOutputsList(Publisher.java:6848) (00:56.0977)\n   org.hl7.fhir.igtools.publisher.Publisher.generateResourceHtml(Publisher.java:6702) (00:56.0978)\n   org.hl7.fhir.igtools.publisher.Publisher.generateHtmlOutputs(Publisher.java:6653) (00:56.0979)\n   org.hl7.fhir.igtools.publisher.Publisher.generate(Publisher.java:4906)        (00:56.0979)\n   org.hl7.fhir.igtools.publisher.Publisher.createIg(Publisher.java:888)         (00:56.0980)\n   org.hl7.fhir.igtools.publisher.Publisher.execute(Publisher.java:732)          (00:56.0982)\n   org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:8414)            (00:56.0996)\n</code></pre></div>",
        "id": 221302384,
        "sender_full_name": "John Moehrke",
        "timestamp": 1609433891
    },
    {
        "content": "<p>Does sushi complete successfully?</p>",
        "id": 221305173,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1609436473
    },
    {
        "content": "<p>why are the references like<br>\nReference(List/ex-list)?</p>",
        "id": 221305595,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1609436888
    },
    {
        "content": "<p>shouldn't it be Reference(ex-list)?</p>",
        "id": 221305647,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1609436954
    },
    {
        "content": "<p>sushi is happy</p>",
        "id": 221309044,
        "sender_full_name": "John Moehrke",
        "timestamp": 1609440609
    },
    {
        "content": "<p>sushi is not happy without the \"List/\" prefix... I tried it without, still get the NPE in the IG builder</p>",
        "id": 221309500,
        "sender_full_name": "John Moehrke",
        "timestamp": 1609441095
    },
    {
        "content": "<p>sushi seems happy with either.. but NPE still happens</p>",
        "id": 221309511,
        "sender_full_name": "John Moehrke",
        "timestamp": 1609441123
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> is there something I can do to help you reproduce this? The IG publisher NPE when I define an example List that includes a List.</p>",
        "id": 221569534,
        "sender_full_name": "John Moehrke",
        "timestamp": 1609788848
    },
    {
        "content": "<p>well, how do I reproduce it?</p>",
        "id": 221572499,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1609790187
    },
    {
        "content": "<p>my MHD IG has a couple of these ready to be uncommented out.</p>",
        "id": 221573109,
        "sender_full_name": "John Moehrke",
        "timestamp": 1609790459
    },
    {
        "content": "<p>This is all you need</p>\n<div class=\"codehilite\"><pre><span></span><code>Instance: ex-documentreference\nInstanceOf: DocumentReference\n* status = #current\n* content.attachment.title = &quot;Hello World&quot;\n\nInstance: ex-list\nInstanceOf: List\n* status = #current\n* mode = #working\n* entry.item = Reference(ex-documentreference)\n\nInstance: ex-list2\nInstanceOf: List\n* status = #current\n* mode = #working\n* entry.item = Reference(ex-list)\n</code></pre></div>",
        "id": 221573613,
        "sender_full_name": "John Moehrke",
        "timestamp": 1609790715
    },
    {
        "content": "<p>I don't have time for making that into something that works - just point me at a github repo that shows the problem</p>",
        "id": 221573759,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1609790784
    },
    {
        "content": "<p><a href=\"https://github.com/IHE/ITI.MHD\">https://github.com/IHE/ITI.MHD</a></p>",
        "id": 221573818,
        "sender_full_name": "John Moehrke",
        "timestamp": 1609790820
    },
    {
        "content": "<p>you will need to comment out the entry.item in either ex-dummy.fsh, or ex-SubmissionSet.fsh</p>",
        "id": 221573943,
        "sender_full_name": "John Moehrke",
        "timestamp": 1609790885
    },
    {
        "content": "<p>uncomment-out</p>",
        "id": 221573971,
        "sender_full_name": "John Moehrke",
        "timestamp": 1609790898
    },
    {
        "content": "<p>I don't think it's related to the fact that the target is a list. It looks like something isn't registered - the target of the list item reference</p>",
        "id": 221576849,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1609792346
    },
    {
        "content": "<p>no. it's something else. Fixed next release</p>",
        "id": 221580486,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1609794297
    }
]