[
    {
        "content": "<p>I'm getting a new error with publisher 1.0.46, have no idea where this is coming from</p>\n<div class=\"codehilite\"><pre><span></span>Load Content                                                                     (00:24.0393)\nProcessing Conformance Resources                                                 (00:25.0247)\nPublishing Content Failed: Index: 0, Size: 0                                     (00:26.0725)\n                                                                                 (00:26.0727)\nUse -? to get command line help                                                  (00:26.0729)\n                                                                                 (00:26.0730)\nStack Dump (for debugging):                                                      (00:26.0739)\njava.lang.IndexOutOfBoundsException: Index: 0, Size: 0\n        at java.util.ArrayList.rangeCheck(Unknown Source)\n        at java.util.ArrayList.get(Unknown Source)\n        at org.hl7.fhir.igtools.publisher.Publisher.generateSnapshot(Publisher.java:3917)\n        at org.hl7.fhir.igtools.publisher.Publisher.generateSnapshots(Publisher.java:3878)\n        at org.hl7.fhir.igtools.publisher.Publisher.loadConformance(Publisher.java:3311)\n        at org.hl7.fhir.igtools.publisher.Publisher.createIg(Publisher.java:776)\n        at org.hl7.fhir.igtools.publisher.Publisher.execute(Publisher.java:663)\n        at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:6893)\n</pre></div>",
        "id": 186153543,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1579582717
    },
    {
        "content": "<p>It seems to be choking because you have a differential that has no elements.  How that occurred, I have no clue...</p>",
        "id": 186154386,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1579584040
    },
    {
        "content": "<p>it is failing on my constrained data type (string320)</p>",
        "id": 186154785,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1579584821
    },
    {
        "content": "<p>which has no differential</p>",
        "id": 186154787,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1579584833
    },
    {
        "content": "<p>(should it? what is a differential for a string that can have 320 characters?)</p>",
        "id": 186154829,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1579584858
    },
    {
        "content": "<p>How can you set constraints if you don't have a differential?</p>",
        "id": 186154924,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1579585067
    },
    {
        "content": "<p>If the snapshot isn't the same as the parent profile, there must be a differential.  If the snapshot is identical, what's the point of creating the new profile?</p>",
        "id": 186154967,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1579585094
    },
    {
        "content": "<p>I did struggle with how to define a constrain on a base data type, eventually I just copied the definition from the base and constrained it using just the snapshot.</p>",
        "id": 186155273,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1579585658
    },
    {
        "content": "<p>I guess this issue was not detected until now. I'll review this</p>",
        "id": 186155287,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1579585679
    },
    {
        "content": "<p>got it working. I had  messed up the paths in the structuredDef</p>",
        "id": 186157125,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1579588583
    },
    {
        "content": "<p>you do need a differential. You can't redefine a primitive like that</p>",
        "id": 186162419,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1579595162
    },
    {
        "content": "<p>this seems to work now</p>\n<div class=\"codehilite\"><pre><span></span>  <span class=\"nt\">&lt;snapshot&gt;</span>\n    <span class=\"nt\">&lt;element</span> <span class=\"na\">id=</span><span class=\"s\">&quot;string&quot;</span><span class=\"nt\">&gt;</span>\n      <span class=\"nt\">&lt;path</span> <span class=\"na\">value=</span><span class=\"s\">&quot;string&quot;</span><span class=\"nt\">/&gt;</span>\n      <span class=\"nt\">&lt;short</span> <span class=\"na\">value=</span><span class=\"s\">&quot;String 320 characters&quot;</span><span class=\"nt\">/&gt;</span>\n      <span class=\"nt\">&lt;definition</span> <span class=\"na\">value=</span><span class=\"s\">&quot;A string limited to 320 characters&quot;</span><span class=\"nt\">/&gt;</span>\n      <span class=\"nt\">&lt;min</span> <span class=\"na\">value=</span><span class=\"s\">&quot;0&quot;</span><span class=\"nt\">/&gt;</span>\n      <span class=\"nt\">&lt;max</span> <span class=\"na\">value=</span><span class=\"s\">&quot;*&quot;</span><span class=\"nt\">/&gt;</span>\n      <span class=\"nt\">&lt;base&gt;</span>\n        <span class=\"nt\">&lt;path</span> <span class=\"na\">value=</span><span class=\"s\">&quot;string&quot;</span> <span class=\"nt\">/&gt;</span>\n        <span class=\"nt\">&lt;min</span> <span class=\"na\">value=</span><span class=\"s\">&quot;0&quot;</span> <span class=\"nt\">/&gt;</span>\n        <span class=\"nt\">&lt;max</span> <span class=\"na\">value=</span><span class=\"s\">&quot;*&quot;</span> <span class=\"nt\">/&gt;</span>\n      <span class=\"nt\">&lt;/base&gt;</span>\n    <span class=\"nt\">&lt;/element&gt;</span>\n    <span class=\"nt\">&lt;element</span> <span class=\"na\">id=</span><span class=\"s\">&quot;string.value&quot;</span><span class=\"nt\">&gt;</span>\n      <span class=\"nt\">&lt;path</span> <span class=\"na\">value=</span><span class=\"s\">&quot;string.value&quot;</span><span class=\"nt\">/&gt;</span>\n      <span class=\"nt\">&lt;representation</span> <span class=\"na\">value=</span><span class=\"s\">&quot;xmlAttr&quot;</span><span class=\"nt\">/&gt;</span>\n      <span class=\"nt\">&lt;short</span> <span class=\"na\">value=</span><span class=\"s\">&quot;Primitive value for string320&quot;</span><span class=\"nt\">/&gt;</span>\n      <span class=\"nt\">&lt;definition</span> <span class=\"na\">value=</span><span class=\"s\">&quot;Primitive value for string320&quot;</span><span class=\"nt\">/&gt;</span>\n      <span class=\"nt\">&lt;min</span> <span class=\"na\">value=</span><span class=\"s\">&quot;0&quot;</span><span class=\"nt\">/&gt;</span>\n      <span class=\"nt\">&lt;max</span> <span class=\"na\">value=</span><span class=\"s\">&quot;1&quot;</span><span class=\"nt\">/&gt;</span>\n      <span class=\"nt\">&lt;base&gt;</span>\n        <span class=\"nt\">&lt;path</span> <span class=\"na\">value=</span><span class=\"s\">&quot;string.value&quot;</span> <span class=\"nt\">/&gt;</span>\n        <span class=\"nt\">&lt;min</span> <span class=\"na\">value=</span><span class=\"s\">&quot;0&quot;</span> <span class=\"nt\">/&gt;</span>\n        <span class=\"nt\">&lt;max</span> <span class=\"na\">value=</span><span class=\"s\">&quot;1&quot;</span> <span class=\"nt\">/&gt;</span>\n      <span class=\"nt\">&lt;/base&gt;</span>\n      <span class=\"nt\">&lt;type&gt;</span>\n        <span class=\"nt\">&lt;extension</span> <span class=\"na\">url=</span><span class=\"s\">&quot;http://hl7.org/fhir/StructureDefinition/regex&quot;</span><span class=\"nt\">&gt;</span>\n          <span class=\"nt\">&lt;valueString</span> <span class=\"na\">value=</span><span class=\"s\">&quot;[ \\r\\n\\t\\S]+&quot;</span><span class=\"nt\">/&gt;</span>\n        <span class=\"nt\">&lt;/extension&gt;</span>\n        <span class=\"nt\">&lt;code</span> <span class=\"na\">value=</span><span class=\"s\">&quot;string&quot;</span><span class=\"nt\">/&gt;</span>\n      <span class=\"nt\">&lt;/type&gt;</span>\n      <span class=\"nt\">&lt;maxLength</span> <span class=\"na\">value=</span><span class=\"s\">&quot;320&quot;</span><span class=\"nt\">/&gt;</span>\n    <span class=\"nt\">&lt;/element&gt;</span>\n  <span class=\"nt\">&lt;/snapshot&gt;</span>\n  <span class=\"nt\">&lt;differential&gt;</span>\n    <span class=\"nt\">&lt;element</span> <span class=\"na\">id=</span><span class=\"s\">&quot;string.value&quot;</span><span class=\"nt\">&gt;</span>\n      <span class=\"nt\">&lt;path</span> <span class=\"na\">value=</span><span class=\"s\">&quot;string.value&quot;</span><span class=\"nt\">/&gt;</span>\n      <span class=\"nt\">&lt;base&gt;</span>\n        <span class=\"nt\">&lt;path</span> <span class=\"na\">value=</span><span class=\"s\">&quot;string.value&quot;</span> <span class=\"nt\">/&gt;</span>\n        <span class=\"nt\">&lt;min</span> <span class=\"na\">value=</span><span class=\"s\">&quot;0&quot;</span> <span class=\"nt\">/&gt;</span>\n        <span class=\"nt\">&lt;max</span> <span class=\"na\">value=</span><span class=\"s\">&quot;1&quot;</span> <span class=\"nt\">/&gt;</span>\n      <span class=\"nt\">&lt;/base&gt;</span>\n      <span class=\"nt\">&lt;maxLength</span> <span class=\"na\">value=</span><span class=\"s\">&quot;320&quot;</span><span class=\"nt\">/&gt;</span>\n    <span class=\"nt\">&lt;/element&gt;</span>\n  <span class=\"nt\">&lt;/differential&gt;</span>\n</pre></div>",
        "id": 186162867,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1579595677
    },
    {
        "content": "<p>I'm getting this error with 1.1.38 and I don't know how to read it:</p>\n<div class=\"codehilite\"><pre><span></span><code>Exception in thread &quot;main&quot; java.lang.Error: getElementByName: can&#39;t find http://hl7.org/fhir/StructureDefinition/Consent#Consent.provisionin [Consent, Consent.id, Consent.meta, Consent.implicitRules, Consent.language, Consent.text, Consent.contained, Consent.extension, Consent.modifierExtension, Consent.identifier, Consent.status, Consent.scope, Consent.category, Consent.patient, Consent.dateTime, Consent.performer, Consent.organization, Consent.source[x], Consent.policy, Consent.policy.id, Consent.policy.extension, Consent.policy.modifierExtension, Consent.policy.authority, Consent.policy.uri, Consent.policyRule, Consent.policyRule.id, Consent.policyRule.extension, Consent.policyRule.coding, Consent.policyRule.text, Consent.verification, Consent.verification.id, Consent.verification.extension, Consent.verification.modifierExtension, Consent.verification.verified, Consent.verification.verifiedWith, Consent.verification.verificationDate, Consent.provision, Consent.provision.id, Consent.provision.extension, Consent.provision.modifierExtension, Consent.provision.type, Consent.provision.period, Consent.provision.actor, Consent.provision.actor.id, Consent.provision.actor.extension, Consent.provision.actor.modifierExtension, Consent.provision.actor.role, Consent.provision.actor.reference, Consent.provision.action, Consent.provision.securityLabel, Consent.provision.purpose, Consent.provision.class, Consent.provision.code, Consent.provision.dataPeriod, Consent.provision.data, Consent.provision.data.id, Consent.provision.data.extension, Consent.provision.data.modifierExtension, Consent.provision.data.meaning, Consent.provision.data.reference, Consent.provision.provision]\n        at org.hl7.fhir.r5.conformance.ProfileUtilities.getElementByName(ProfileUtilities.java:3421)\n        at org.hl7.fhir.r5.conformance.ProfileUtilities.genTypes(ProfileUtilities.java:3222)\n        at org.hl7.fhir.r5.conformance.ProfileUtilities.genElementCells(ProfileUtilities.java:3896)\n        at org.hl7.fhir.r5.conformance.ProfileUtilities.genElement(ProfileUtilities.java:3717)\n        at org.hl7.fhir.r5.conformance.ProfileUtilities.genElement(ProfileUtilities.java:3783)\n        at org.hl7.fhir.r5.conformance.ProfileUtilities.genElement(ProfileUtilities.java:3783)\n        at org.hl7.fhir.r5.conformance.ProfileUtilities.generateTable(ProfileUtilities.java:3551)\n        at org.hl7.fhir.igtools.renderers.StructureDefinitionRenderer.snapshot(StructureDefinitionRenderer.java:369)\n        at org.hl7.fhir.igtools.publisher.Publisher.generateOutputsStructureDefinition(Publisher.java:7628)\n        at org.hl7.fhir.igtools.publisher.Publisher.generateResourceHtml(Publisher.java:6665)\n        at org.hl7.fhir.igtools.publisher.Publisher.generateHtmlOutputs(Publisher.java:6609)\n        at org.hl7.fhir.igtools.publisher.Publisher.generate(Publisher.java:4871)\n</code></pre></div>",
        "id": 215550079,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1604476655
    },
    {
        "content": "<p>same problem here...</p>",
        "id": 215550585,
        "sender_full_name": "Michaela Ziegler",
        "timestamp": 1604477073
    },
    {
        "content": "<p>I get a similar error on Observation (also version 1.1.38):</p>\n<div class=\"codehilite\"><pre><span></span><code>Exception in thread &quot;main&quot; java.lang.Error: getElementByName: can&#39;t find http://hl7.org/fhir/StructureDefinition/Observation#Observation.referenceRangein [Observation, Observation.id, Observation.meta, Observation.implicitRules, Observation.language, Observation.text, Observation.contained, Observation.extension, Observation.extension:zib-Pregnancy, Observation.extension:zib-Pregnancy.id, Observation.extension:zib-Pregnancy.extension, Observation.extension:zib-Pregnancy.url, Observation.extension:zib-Pregnancy.value[x], Observation.extension:zib-Pregnancy.value[x]:valueReference, Observation.extension:isCurrent, Observation.extension:isCertain, Observation.modifierExtension, Observation.identifier, Observation.basedOn, Observation.status, Observation.category, Observation.code, Observation.code.id, Observation.code.extension, Observation.code.coding, Observation.code.coding:DeliveryDateEstimated, Observation.code.coding:DeliveryDateEstimated.id, Observation.code.coding:DeliveryDateEstimated.extension, Observation.code.coding:DeliveryDateEstimated.system, Observation.code.coding:DeliveryDateEstimated.version, Observation.code.coding:DeliveryDateEstimated.code, Observation.code.coding:DeliveryDateEstimated.display, Observation.code.coding:DeliveryDateEstimated.userSelected, Observation.code.text, Observation.subject, Observation.context, Observation.effective[x], Observation.issued, Observation.performer, Observation.performer.id, Observation.performer.extension, Observation.performer.extension:practitionerRole, Observation.performer.reference, Observation.performer.identifier, Observation.performer.display, Observation.value[x], Observation.value[x]:valueDateTime, Observation.dataAbsentReason, Observation.interpretation, Observation.comment, Observation.bodySite, Observation.method, Observation.method.id, Observation.method.extension, Observation.method.coding, Observation.method.coding:method, Observation.method.text, Observation.specimen, Observation.device, Observation.referenceRange, Observation.referenceRange.id, Observation.referenceRange.extension, Observation.referenceRange.modifierExtension, Observation.referenceRange.low, Observation.referenceRange.high, Observation.referenceRange.type, Observation.referenceRange.appliesTo, Observation.referenceRange.age, Observation.referenceRange.text, Observation.related, Observation.related.id, Observation.related.extension, Observation.related.modifierExtension, Observation.related.type, Observation.related.target, Observation.component, Observation.component.id, Observation.component.extension, Observation.component.modifierExtension, Observation.component.code, Observation.component.value[x], Observation.component.dataAbsentReason, Observation.component.interpretation, Observation.component.referenceRange]\n</code></pre></div>",
        "id": 215576738,
        "sender_full_name": "Pieter Edelman",
        "timestamp": 1604495000
    },
    {
        "content": "<p>Same.  Mine is '<a href=\"http://Bundle.link\">Bundle.link</a>'.  (Obviously also need to add a space between the path name and 'in'.)</p>",
        "id": 215608564,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1604508424
    },
    {
        "content": "<p>we are getting a similar error with the DTR IG</p>\n<p><code>Exception in thread \"main\" java.lang.Error: getElementByName: can't find http://hl7.org/fhir/StructureDefinition/Questionnaire#Questionnaire.itemin </code></p>",
        "id": 215629762,
        "sender_full_name": "Keeyan Ghoreshi",
        "timestamp": 1604518093
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> do we know if this being looked at? This is a blocker. As Keeyan said we are seeing the same error. <a href=\"http://build.fhir.org/ig/HL7/davinci-dtr/branches/master/failure/build.log\">http://build.fhir.org/ig/HL7/davinci-dtr/branches/master/failure/build.log</a></p>",
        "id": 215633768,
        "sender_full_name": "Larry Decelles",
        "timestamp": 1604520015
    },
    {
        "content": "<p>It's an issue with the latest IGPublisher.  I expect <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> will look at it shortly</p>",
        "id": 215639215,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1604522858
    },
    {
        "content": "<p>hmm. It's weird how this one slipped by all the tests. It's actually the consequence of a bug that Lloyd found elsewhere, and relates to an obscure part of the profiling mechanism that people may have overlooked, and that the validator was to this point interpreting wrongly. </p>\n<p>Say you have a profile on Observation. In your profile, you profile Observation.referenceRange. And you also slice Observation.component. In the slices on Observation.component, you do not explicitly profile Observation.component.referenceRange. </p>\n<p>Some editors might think that this would mean that the Observation.component.referenceRange element in the slice inherits from the profile applied to Observation.referenceRange, but this is not the case - you must profile the slices explicitly</p>",
        "id": 215648340,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1604528267
    },
    {
        "content": "<p>anyhow, this will be fixed soon</p>",
        "id": 215649831,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1604529299
    },
    {
        "content": "<p>Soon = hours/days/a week?</p>",
        "id": 215665983,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1604544333
    },
    {
        "content": "<p>Why would profiling Observation.referenceRange profile Observation.component.referenceRange?  (And how would that issue manifest with <a href=\"http://Bundle.link\">Bundle.link</a> - which isn't a type that is re-used anywhere?)</p>",
        "id": 215666043,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1604544404
    },
    {
        "content": "<p>hours. <a href=\"http://Bundle.link\">Bundle.link</a> is reused in <a href=\"http://Bundle.entry.link\">Bundle.entry.link</a></p>",
        "id": 215669929,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1604549898
    }
]