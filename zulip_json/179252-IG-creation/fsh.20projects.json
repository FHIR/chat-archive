[
    {
        "content": "<p>We have been getting build errors on multiple projects, including the sample FSH project as generated by <code>sushi --init</code>. The errors always boil down to a jekyll error on not finding something it's looking for. We've tried with multiple versions of ruby and are using jekyll 4.2.0 (current). What's going on?</p>\n<div class=\"codehilite\" data-code-language=\"code\"><pre><span></span><code>Generating Summary Outputs                                                       (00:14.0156)\nSending Usage Stats to Server                                                    (00:15.0351)\nJekyll: Source: /Users/preston/Developer/git/ExampleIG/temp/pages                (00:16.0719)\nJekyll: Generating...                                                            (00:16.0719)\nJekyll has failed. Complete output from running Jekyll:   Liquid Exception: Could not locate the included file 'StructureDefinition-MyPatient-summary-table.xhtml' in any of [\"/Users/preston/Developer/git/ExampleIG/temp/pages/_includes\"]. Ensure it exists in one of those directories and, if it is a symlink, (00:16.0823)\nNote: Check that Jekyll is installed correctly                                   (00:16.0824)\nPublishing Content Failed: Process exited with an error: 1 (Exit value: 1)       (00:16.0825)\n                                                                                 (00:16.0825)\nUse -? to get command line help                                                  (00:16.0825)\n                                                                                 (00:16.0825)\nStack Dump (for debugging):                                                      (00:16.0826)\norg.apache.commons.exec.ExecuteException: Process exited with an error: 1 (Exit value: 1)\n    at org.apache.commons.exec.DefaultExecutor.executeInternal(DefaultExecutor.java:404)\n    at org.apache.commons.exec.DefaultExecutor.execute(DefaultExecutor.java:166)\n    at org.apache.commons.exec.DefaultExecutor.execute(DefaultExecutor.java:153)\n    at org.hl7.fhir.igtools.publisher.Publisher.runJekyll(Publisher.java:5338)\n    at org.hl7.fhir.igtools.publisher.Publisher.runTool(Publisher.java:5244)\n    at org.hl7.fhir.igtools.publisher.Publisher.generate(Publisher.java:4711)\n    at org.hl7.fhir.igtools.publisher.Publisher.createIg(Publisher.java:858)\n    at org.hl7.fhir.igtools.publisher.Publisher.execute(Publisher.java:707)\n    at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:7756)\n</code></pre></div>",
        "id": 242410347,
        "sender_full_name": "Preston Lee",
        "timestamp": 1623449706
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191447\">@Mark Kramer</span> Could this be something sushi is doing? This is the template project throwing the error on the current publisher version. CC <span class=\"user-mention\" data-user-id=\"191411\">@Nathan Davis</span>  <span class=\"user-mention\" data-user-id=\"194070\">@Patrick Langford</span></p>",
        "id": 242410489,
        "sender_full_name": "Preston Lee",
        "timestamp": 1623449829
    },
    {
        "content": "<p>I doesnâ€™t look like SUSHI.  Are you using the latest IG Pub?</p>",
        "id": 242410734,
        "sender_full_name": "Mark Kramer",
        "timestamp": 1623450040
    },
    {
        "content": "<p>Yup .. that's the publisher output using the template files generated by sushi</p>",
        "id": 242410843,
        "sender_full_name": "Preston Lee",
        "timestamp": 1623450130
    },
    {
        "content": "<p>can you paste the full log? is there any error above? look for mentions to xslt way before that.</p>",
        "id": 242410854,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1623450147
    },
    {
        "content": "<p>in  parallel, see if your MyPatient compiles well with sushi (use fshschool for that)</p>",
        "id": 242410897,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1623450188
    },
    {
        "content": "<p><a href=\"/user_uploads/10155/uB0EBqEIFoJ3Fc0KD6wqf_eO/error.txt\">error.txt</a></p>",
        "id": 242410957,
        "sender_full_name": "Preston Lee",
        "timestamp": 1623450235
    },
    {
        "content": "<p>nope, this isn't it</p>",
        "id": 242411179,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1623450377
    },
    {
        "content": "<p>I'm not seeing any obvious errors or warnings prior :-/</p>",
        "id": 242411186,
        "sender_full_name": "Preston Lee",
        "timestamp": 1623450382
    },
    {
        "content": "<p>can you share your MyPatient sushi content?</p>",
        "id": 242411198,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1623450391
    },
    {
        "content": "<div class=\"codehilite\"><pre><span></span><code>// This is a simple example of a FSH file.\n// This file can be renamed, and additional FSH files can be added.\n// SUSHI will look for definitions in any file using the .fsh ending.\nProfile: MyPatient\nParent: Patient\n* name 1..* MS\n</code></pre></div>",
        "id": 242411222,
        "sender_full_name": "Preston Lee",
        "timestamp": 1623450414
    },
    {
        "content": "<p>that's it?</p>",
        "id": 242411409,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1623450562
    },
    {
        "content": "<p>Strange</p>",
        "id": 242411413,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1623450567
    },
    {
        "content": "<p>Yup. ;)  We have real projects with a similar error, but this is the simplest possible project doing it and it is reproducable..</p>",
        "id": 242411493,
        "sender_full_name": "Preston Lee",
        "timestamp": 1623450604
    },
    {
        "content": "<p>I can't reproduce it.</p>",
        "id": 242411918,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1623451020
    },
    {
        "content": "<p>I would reinstall Jekyll or try a different template (in ig.ini)</p>",
        "id": 242411928,
        "sender_full_name": "Mark Kramer",
        "timestamp": 1623451028
    },
    {
        "content": "<p>i put a fsh file with that content in an empty ig and it is working well</p>",
        "id": 242411937,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1623451042
    },
    {
        "content": "<p>update your publisher, see if jekyll / ruby is well installed</p>",
        "id": 242411957,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1623451077
    },
    {
        "content": "<p>maybe it's something in the sushi-config.</p>",
        "id": 242412046,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1623451164
    },
    {
        "content": "<p>you are using the base template. and that is fine. you may want to clear that package cache</p>",
        "id": 242412120,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1623451244
    },
    {
        "content": "<p>Yup, done reinstalls a few times already. <span class=\"user-mention\" data-user-id=\"191447\">@Mark Kramer</span>  if you create a completely fresh project with <code>sushi --init</code> (accepting all defaults), does it build for you? I literally haven't changed anything from the generated project.</p>",
        "id": 242412137,
        "sender_full_name": "Preston Lee",
        "timestamp": 1623451265
    },
    {
        "content": "<p>the sushi you sent does build perfectly well:</p>",
        "id": 242412157,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1623451299
    },
    {
        "content": "<p><a href=\"https://costateixeira.github.io/testpreston/StructureDefinition-MyPatient.html\">https://costateixeira.github.io/testpreston/StructureDefinition-MyPatient.html</a></p>",
        "id": 242412163,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1623451306
    },
    {
        "content": "<p>Cleared package cache, same error. Also just tried on both macOS and a separate Ubuntu container with exactly the same error</p>",
        "id": 242412748,
        "sender_full_name": "Preston Lee",
        "timestamp": 1623451872
    },
    {
        "content": "<p>Try clearing .fhir directory</p>",
        "id": 242412920,
        "sender_full_name": "Mark Kramer",
        "timestamp": 1623452033
    },
    {
        "content": "<p>nope, same error</p>",
        "id": 242413438,
        "sender_full_name": "Preston Lee",
        "timestamp": 1623452474
    },
    {
        "content": "<p>on some systems, Jekyll error output is lost. that seems to be case for you.</p>",
        "id": 242551188,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1623645655
    },
    {
        "content": "<p>at the point that it fails, run Jekyll manually, and see if it reports any additional error message</p>",
        "id": 242551198,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1623645679
    },
    {
        "content": "<p>It appears to be the same error, not the jekyll installation:</p>\n<div class=\"codehilite\"><pre><span></span><code>jekyll build -s temp/pages\nConfiguration file: /Users/preston/Developer/git/ExampleIG/temp/pages/_config.yml\n            Source: /Users/preston/Developer/git/ExampleIG/temp/pages\n       Destination: /Users/preston/Developer/git/ExampleIG/_site\n Incremental build: disabled. Enable with --incremental\n      Generating...\n  Liquid Exception: Could not locate the included file &#39;StructureDefinition-MyPatient-summary-table.xhtml&#39; in any of [&quot;/Users/preston/Developer/git/ExampleIG/temp/pages/_includes&quot;]. Ensure it exists in one of those directories and, if it is a symlink, does not point outside your site source. in StructureDefinition-MyPatient.html\n                    ------------------------------------------------\n      Jekyll 4.2.0   Please append `--trace` to the `build` command\n                     for any additional information or backtrace.\n                    ------------------------------------------------\n/Users/preston/.rvm/gems/ruby-3.0.1/gems/jekyll-4.2.0/lib/jekyll/tags/include.rb:219:in `locate_include_file&#39;: Could not locate the included file &#39;StructureDefinition-MyPatient-summary-table.xhtml&#39; in any of [&quot;/Users/preston/Developer/git/ExampleIG/temp/pages/_includes&quot;]. Ensure it exists in one of those directories and, if it is a symlink, does not point outside your site source. (IOError)\n</code></pre></div>",
        "id": 243422329,
        "sender_full_name": "Preston Lee",
        "timestamp": 1624299594
    },
    {
        "content": "<p>Could it be that something in the \"summary\" file naming has changed? It's complaining about \"StructureDefinition-MyPatient-summary-table.xhtml\" being missing, but only a \"StructureDefinition-MyPatient-summary.xhtml\" exists.</p>",
        "id": 243422516,
        "sender_full_name": "Preston Lee",
        "timestamp": 1624299674
    },
    {
        "content": "<p>what template are you using? A file by that name will be generated unless the template tells the IG publisher not to generate it - so look in the config.json file for anything about \"summary-table\"</p>",
        "id": 243475207,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1624341922
    }
]