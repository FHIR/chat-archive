[
    {
        "content": "<p>I've now seen intermittent failures on 3 different IGs all with the same message: <code>The package 'hl7.fhir.template' has no entry on the current build server </code>.  (The specific template varies depending on the IG.)<br>\nIf the build is re-triggered, it suddenly works.  This always happens on the CI build.  I haven't seen it happen locally.  Is the build server being flaky or something?  <span class=\"user-mention\" data-user-id=\"248736\">@Mark Iantorno</span></p>",
        "id": 247024513,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1627070304
    },
    {
        "content": "<p>The build server just executes the same command you would run locally...maybe the server providing the templates is having issues?</p>",
        "id": 247024602,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1627070374
    },
    {
        "content": "<p>Are you confident this is failing consistently</p>",
        "id": 247024640,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1627070393
    },
    {
        "content": "<p>Like every single build is failing? Or is this an intermittent failure?</p>",
        "id": 247024726,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1627070413
    },
    {
        "content": "<p>Yeah, just to clarify, you're saying the second build on the server always works, and the first always fails?</p>",
        "id": 247025588,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1627070960
    },
    {
        "content": "<p>I haven't noticed that level of consistency.  I think it's intermittent.  I kicked off one IG I hadn't touched in quite a while and it ran fine yesterday for the first time.  I've had a couple of IGs fail with the fhir template and Ted had a failure with the UTG template.  I haven't noticed a specific pattern.  (Which I realize makes diagnosing harder.)  Was thinking checking the logs of the package server might be a starting point to see if there's anything weird happening there?</p>",
        "id": 247025921,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1627071163
    },
    {
        "content": "<p>it happened to me once. tried again a bit later and it worked. that is all I know</p>",
        "id": 247026861,
        "sender_full_name": "John Moehrke",
        "timestamp": 1627071639
    },
    {
        "content": "<p>So, if this is intermittent, then I would agree that this is an infrastructure issue and not a core/error issue. I'm going to wait until Grahame gets back before we start doing any infrastructure cahnges</p>",
        "id": 247206237,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1627308221
    },
    {
        "content": "<p>Are we able to monitor the package server to see if it's exhibiting any flakiness?</p>",
        "id": 247209354,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1627309609
    },
    {
        "content": "<p>I am not able to, no</p>",
        "id": 247239059,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1627322600
    },
    {
        "content": "<p>Ok.  That sounds like something we should aim to fix when Grahame's back.</p>",
        "id": 247253103,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1627329363
    },
    {
        "content": "<p>I have been attempting to build davinci-epdx (PDex) but I am consistently getting the following error: <br>\norg.hl7.fhir.exceptions.FHIRException: Error loading template hl7.davinci.template#current: The package 'hl7.davinci.template' has no entry on the current build server</p>\n<p><a href=\"http://build.fhir.org/ig/HL7/davinci-epdx/branches/master/failure\">http://build.fhir.org/ig/HL7/davinci-epdx/branches/master/failure</a></p>\n<p>The build compiles without error locally. And I am using the latest 1.1.98 build locally to match the version on <a href=\"http://build.fhir.org\">build.fhir.org</a></p>",
        "id": 270656363,
        "sender_full_name": "Mark Scrimshire",
        "timestamp": 1643939168
    },
    {
        "content": "<p>Hmm. <a href=\"http://build.fhir.org/ig/HL7/ig-template-davinci/branches/master/package.tgz\">http://build.fhir.org/ig/HL7/ig-template-davinci/branches/master/package.tgz</a> seems to exist which is (might be?) the template in question. Does PDex build for you locally with a clean cache?</p>",
        "id": 270659188,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1643941146
    },
    {
        "content": "<p>Are you referencing #current in your ig.ini?  Grahame has determined that we're not supposed to use #current anymore.  (We have a disagreement on that point...)</p>",
        "id": 270660228,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1643942096
    },
    {
        "content": "<p>I just rebuilt it</p>",
        "id": 270660422,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1643942352
    },
    {
        "content": "<p>that wasn't quite what I said. What I said was that it should not be the normal default to use #current. It works and will continue to work and is appropriate if that's what you want to do. but if you don't know why you want to be using #current, you shouldn't be</p>",
        "id": 270660495,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1643942429
    }
]