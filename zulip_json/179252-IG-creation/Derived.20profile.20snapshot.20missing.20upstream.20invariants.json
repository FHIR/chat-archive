[
    {
        "content": "<p>Not sure if this is the most suitable stream.</p>\n<p>Have noticed that a derived profile, derived from another profile, does not show the first profile's invariants in the 2nd profile's snapshot table. They are in the generated structure definition xml snapshot, just not rendered in the table. To demonstrate:</p>\n<p>The HL7 AU R4 <a href=\"http://build.fhir.org/ig/hl7au/au-fhir-base/StructureDefinition-au-organization.html\" target=\"_blank\" title=\"http://build.fhir.org/ig/hl7au/au-fhir-base/StructureDefinition-au-organization.html\">AU Base Organization Profile</a> has a number of identifier slices most of which have invariants to control the quality of the identifier values. For example, the invariant <a href=\"http://build.fhir.org/ig/hl7au/au-fhir-base/StructureDefinition-au-organization-definitions.html#Organization.identifier:hpio\" target=\"_blank\" title=\"http://build.fhir.org/ig/hl7au/au-fhir-base/StructureDefinition-au-organization-definitions.html#Organization.identifier:hpio\">inv-hpio-0 on the HPI-O slice</a>.</p>\n<p>A profile derived from the above profile, the HL7 AU <a href=\"http://build.fhir.org/ig/hl7au/au-fhir-pd/StructureDefinition-au-pd-organisation.html\" target=\"_blank\" title=\"http://build.fhir.org/ig/hl7au/au-fhir-pd/StructureDefinition-au-pd-organisation.html\">Australian Organisation Directory Entry Profile</a> includes a few constraints as demonstrated by its differential table view (noting that the identifier slice with the above invariant only has a must support). The differential of course does not display the invariant inv-hpio-0, but neither does the snapshot table, which was unexpected. However, the invariant is found in the generated snapshot and is shown on the <a href=\"http://build.fhir.org/ig/hl7au/au-fhir-pd/StructureDefinition-au-pd-organisation-definitions.html#Organization.identifier:hpio\" target=\"_blank\" title=\"http://build.fhir.org/ig/hl7au/au-fhir-pd/StructureDefinition-au-pd-organisation-definitions.html#Organization.identifier:hpio\">detailed descriptions page</a>.</p>\n<p>This may be by design, but having searched in zulip, I could find nothing related. A few colleagues are of the view that this is a feature of the snapshot table to keep it simpler. So raising to clarify.</p>\n<p>Also note that I have experienced the same rendering with other derived profiles, generated via the IG publisher v0.9.69.</p>",
        "id": 175288929,
        "sender_full_name": "Rob Eastwood",
        "timestamp": 1568067786
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> Is supressing inherited invariants in Snapshot Tables a feature of the IG Publisher?<br>\nIs there a switch to turn supression off?</p>",
        "id": 176628151,
        "sender_full_name": "Richard Townley-O'Neill",
        "timestamp": 1569472766
    },
    {
        "content": "<p>It shouldn't be a feature unless it's warnings or \"best practice\" messages - and even then, it should be handled on an invariant by invariant baais</p>",
        "id": 176754808,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1569596991
    },
    {
        "content": "<p>I think that the snapshot view produced by ig publisher should show invariants inherited from other profiles.<br>\nThe snapshot shows all inherited elements, their bindings and cardinalities etc. so I am surprised that the inherited invariants are not also displayed.</p>",
        "id": 177581085,
        "sender_full_name": "Richard Townley-O'Neill",
        "timestamp": 1570505009
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span></p>",
        "id": 177581092,
        "sender_full_name": "Richard Townley-O'Neill",
        "timestamp": 1570505039
    },
    {
        "content": "<p>because every element ever has invariants, and displaying them was overwhelming.</p>",
        "id": 177581133,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1570505056
    },
    {
        "content": "<p>I have just noticed that the StructureDefinition of the R4 build of <a href=\"http://hl7.org/fhir/r4/clinicaldocument.profile.xml.html\" target=\"_blank\" title=\"http://hl7.org/fhir/r4/clinicaldocument.profile.xml.html\">ClinicalDocument</a> has 13 constraints while the current build of <a href=\"http://build.fhir.org/clinicaldocument.profile.xml.html\" target=\"_blank\" title=\"http://build.fhir.org/clinicaldocument.profile.xml.html\">ClinicalDocument</a> has 67. The R4 one includes ele-1 for only a few elements, while the newer one has ele-1 on very many elements.<br>\nI assume that the newer one is correct.<br>\nDisplaying ele-1 on every element would be overwhelming.</p>",
        "id": 177583959,
        "sender_full_name": "Richard Townley-O'Neill",
        "timestamp": 1570509878
    },
    {
        "content": "<p><a href=\"https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=24911\" target=\"_blank\" title=\"https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=24911\">#24911</a> raised to clarify in docco that inherited constraints are not displayed in the snapshot tab.</p>",
        "id": 177584304,
        "sender_full_name": "Richard Townley-O'Neill",
        "timestamp": 1570510555
    },
    {
        "content": "<p>Note that the <code>SnapshotGenerator</code> implementation in the FHIR .NET API includes all element constraints inherited from base profile &amp; type profiles into the generated snapshot. Almost all elements inherit Invariant <code>ele-1</code> from base class <code>Element</code> and the generated snapshot reflects that.</p>",
        "id": 177607831,
        "sender_full_name": "Michel Rutten",
        "timestamp": 1570537551
    },
    {
        "content": "<p>The validator actually needs all these invariants, so the snapshot must contain them. For display purposes, rendering logic could hide some \"noisy\" constraints, depending on the intended target audience.</p>",
        "id": 177607991,
        "sender_full_name": "Michel Rutten",
        "timestamp": 1570537666
    },
    {
        "content": "<p>The profiles in my IG don't have snapshots, so it's the IG Publisher creating them, and I'm now seeing ele-1 etc for every element...</p>",
        "id": 186952718,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1580355462
    },
    {
        "content": "<p><a href=\"https://mysl-hl7-sydney.azurewebsites.net/ig/StructureDefinition-mysl-patient.html\" target=\"_blank\" title=\"https://mysl-hl7-sydney.azurewebsites.net/ig/StructureDefinition-mysl-patient.html\">https://mysl-hl7-sydney.azurewebsites.net/ig/StructureDefinition-mysl-patient.html</a></p>",
        "id": 186952847,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1580355667
    },
    {
        "content": "<p>that's a change I made months go as part of reconcilation with the dotnet snapshot generator</p>",
        "id": 186954877,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1580359329
    },
    {
        "content": "<p>I don't like it, and neither do others</p>",
        "id": 186954881,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1580359342
    },
    {
        "content": "<p>Something I could contribute to in the publisher?</p>",
        "id": 186955305,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1580360273
    },
    {
        "content": "<p>I hadn't fussed over it as I hadn't had any self defined ones in the profiles I'd been putting together, now they are lost in the sea of ele-1s</p>",
        "id": 186955360,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1580360360
    },
    {
        "content": "<p>hmm they shouldn't appear in the rendering like that</p>",
        "id": 186955926,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1580361334
    },
    {
        "content": "<p>what xhtml fragment are you including for that</p>",
        "id": 186955972,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1580361367
    },
    {
        "content": "<p>{% include {{[type]}}-{{[id]}}-inv.xhtml %}</p>",
        "id": 186956041,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1580361504
    },
    {
        "content": "<p>Just peeking in another that was built recently, looks the same.<br>\n<a href=\"http://build.fhir.org/ig/HL7/fhir-mCODE-ig/branches/master/StructureDefinition-CancerPatient.html\" target=\"_blank\" title=\"http://build.fhir.org/ig/HL7/fhir-mCODE-ig/branches/master/StructureDefinition-CancerPatient.html\">http://build.fhir.org/ig/HL7/fhir-mCODE-ig/branches/master/StructureDefinition-CancerPatient.html</a></p>",
        "id": 186956338,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1580362051
    },
    {
        "content": "<p>ok. from next release, the parameter show-inherited-invariants in either the json or the ig will control whether these inherited constraints appear. show-inherited-default value is true (default is no change)</p>",
        "id": 186957843,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1580364737
    },
    {
        "content": "<p>Thanks, works like a charm.</p>",
        "id": 187041161,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1580425573
    },
    {
        "content": "<p>For those that want to see, here's an example<br>\n<a href=\"https://mysl-hl7-sydney.azurewebsites.net/ig/StructureDefinition-mysl-consent.html\" target=\"_blank\" title=\"https://mysl-hl7-sydney.azurewebsites.net/ig/StructureDefinition-mysl-consent.html\">https://mysl-hl7-sydney.azurewebsites.net/ig/StructureDefinition-mysl-consent.html</a></p>",
        "id": 187041252,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1580425677
    }
]