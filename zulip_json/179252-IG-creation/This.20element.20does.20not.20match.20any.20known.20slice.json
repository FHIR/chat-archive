[
    {
        "content": "<p>if you've been used to seeing this message in your IG... it's about to change. Now, you're going to get, instead of no hint why, a list of slices, along with why the validator doesn't think the slice matches. Given that the failure can be &gt;3 hops away, you can get an absolute dump of information</p>",
        "id": 186848004,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1580260904
    },
    {
        "content": "<p>Can we supress all of them? Because for something like a Document Bundle, where only the first Composition entry slice is stated in the profile, we'll get a fair few of them, I imagine...</p>",
        "id": 186848070,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1580260991
    },
    {
        "content": "<p>are you getting those messages now? it only happens where you have specified slices, and then failed to meet any of them</p>",
        "id": 186848087,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1580261024
    },
    {
        "content": "<p>Or will they just be one message for each as it is now, but with lots of info...</p>",
        "id": 186848091,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1580261031
    },
    {
        "content": "<p>I think I do get them in a few places, yes.</p>",
        "id": 186848135,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1580261051
    },
    {
        "content": "<p>on message, just with a great deal of information</p>",
        "id": 186848149,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1580261081
    },
    {
        "content": "<p><a href=\"/user_uploads/10155/AKxlhruIJehxdO3lRLKg0OPg/pasted_image.png\" target=\"_blank\" title=\"pasted_image.png\">pasted image</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/AKxlhruIJehxdO3lRLKg0OPg/pasted_image.png\" target=\"_blank\" title=\"pasted image\"><img src=\"/user_uploads/10155/AKxlhruIJehxdO3lRLKg0OPg/pasted_image.png\"></a></div>",
        "id": 186848167,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1580261112
    },
    {
        "content": "<p>from IPS</p>",
        "id": 186848169,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1580261114
    },
    {
        "content": "<p>where the fail was 2 hops away</p>",
        "id": 186848174,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1580261123
    },
    {
        "content": "<p>Yes, eCR has 2 of them - both bundles and both definitely have the one slice. In fact, I'm pretty sure that the validator recognises the slice because it's 1..1 and it would error if the slice wasn't there. So not sure that this \" it only happens where you have specified slices, and then failed to meet any of them\" can be true.</p>",
        "id": 186848241,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1580261183
    },
    {
        "content": "<p>it means your example - that you think conforms to the slice - doesn't.</p>",
        "id": 186848262,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1580261223
    },
    {
        "content": "<p>Why doesn't it error on the 1..1 slice then?<br>\nThis is the Bundle profile: <a href=\"http://build.fhir.org/ig/HL7/case-reporting/StructureDefinition-eicr-document-bundle.html\" target=\"_blank\" title=\"http://build.fhir.org/ig/HL7/case-reporting/StructureDefinition-eicr-document-bundle.html\">http://build.fhir.org/ig/HL7/case-reporting/StructureDefinition-eicr-document-bundle.html</a> <br>\nIt HAS to have the Composition slice.</p>",
        "id": 186848328,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1580261314
    },
    {
        "content": "<p>hmm. it should.</p>",
        "id": 186848335,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1580261333
    },
    {
        "content": "<p>It doesn't error because that slice is there.</p>",
        "id": 186848348,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1580261369
    },
    {
        "content": "<p>I always assumed that warning was just to let you know you had other slices. I even surpressed it with this message \"// Examples have optional slices that are not defined in the profile - not matching is expected behaviour\".</p>",
        "id": 186848417,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1580261425
    },
    {
        "content": "<p>This is the first entry in one of the Bundle examples that gets that message about no known slice:</p>\n<div class=\"codehilite\"><pre><span></span>&lt;entry&gt;\n    &lt;fullUrl value=&quot;Composition/composition-eicr-zika&quot; /&gt;\n    &lt;resource&gt;\n      &lt;Composition xmlns=&quot;http://hl7.org/fhir&quot;&gt;\n        &lt;id value=&quot;composition-eicr-zika&quot; /&gt;\n        &lt;meta&gt;\n          &lt;versionId value=&quot;27&quot; /&gt;\n          &lt;lastUpdated value=&quot;2019-10-20T11:00:43.000-04:00&quot; /&gt;\n          &lt;profile value=&quot;http://hl7.org/fhir/us/ecr/StructureDefinition/eicr-composition&quot; /&gt;\n        &lt;/meta&gt;\n</pre></div>",
        "id": 186848451,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1580261515
    },
    {
        "content": "<p>BTW - I'm only getting it on Bundles (at least in eCR).</p>",
        "id": 186848534,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1580261623
    },
    {
        "content": "<p>So back to this now <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> </p>\n<p>[Deleted rest of message]- realised this was because I wasn't looking at the right level in the path...Oops.</p>",
        "id": 186855633,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1580272391
    },
    {
        "content": "<p>This one:</p>\n<div class=\"codehilite\"><pre><span></span>Bundle/bundle-eicr-document-zika: Bundle.entry[1]   Slicing Information This element does not match any known slice defined in the profile http://hl7.org/fhir/us/ecr/StructureDefinition/eicr-document-bundle:\nBundle.entry[1]: Does not match slice&#39;sliceEICRComposition&#39; (discriminator = true and $this.resource.conformsTo(&#39;http://hl7.org/fhir/us/ecr/StructureDefinition/eicr-composition&#39;))\n,\nBundle.entry[1]: Profile http://hl7.org/fhir/us/ecr/StructureDefinition/eicr-composition does not match for Bundle because of the following profile issues:\nresource: Specified profile type was &#39;Composition&#39;, but found type &#39;MedicationAdministration&#39;\n</pre></div>\n\n\n<p>Definitely does have the one slice that the validator is looking for:</p>\n<div class=\"codehilite\"><pre><span></span>&lt;entry&gt;\n    &lt;fullUrl value=&quot;Composition/composition-eicr-zika&quot; /&gt;\n    &lt;resource&gt;\n      &lt;Composition xmlns=&quot;http://hl7.org/fhir&quot;&gt;\n        &lt;id value=&quot;composition-eicr-zika&quot; /&gt;\n        &lt;meta&gt;\n          &lt;versionId value=&quot;27&quot; /&gt;\n          &lt;lastUpdated value=&quot;2019-10-20T11:00:43.000-04:00&quot; /&gt;\n          &lt;profile value=&quot;http://hl7.org/fhir/us/ecr/StructureDefinition/eicr-composition&quot; /&gt;\n        &lt;/meta&gt;\n</pre></div>\n\n\n<p>It is the first entry in the Bundle.</p>\n<p>There are 15 entries in that bundle, and the validator is complaining about 14 of them. i.e. all of them except for the first and only slice that is specified in the profile it conforms to.</p>",
        "id": 186855824,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1580272768
    },
    {
        "content": "<p>It couldn't be a 0 vs 1 starting index type thing could it? Because ALL of them are ignoring entry[0] and starting at entry[1]... Though that is probably because the first one is the only one specified and is actually correct.</p>\n<p>For reference:<br>\n<a href=\"http://build.fhir.org/ig/HL7/case-reporting/branches/master/qa.html\" target=\"_blank\" title=\"http://build.fhir.org/ig/HL7/case-reporting/branches/master/qa.html\">http://build.fhir.org/ig/HL7/case-reporting/branches/master/qa.html</a></p>",
        "id": 186855872,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1580272825
    },
    {
        "content": "<p>it's not complaining about them. it's just telling you that they didn't match any slice, and why. And you know that they didn't, for those ones</p>",
        "id": 186856585,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1580274147
    },
    {
        "content": "<p>Right, but I thought you said it should only tell you about them if there wasn't any slice matched?</p>",
        "id": 186856590,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1580274180
    },
    {
        "content": "<p>Or sorry - specified slices and then those aren't matched.</p>",
        "id": 186856605,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1580274233
    },
    {
        "content": "<p>right. it tells you, for each item that doesn't match one of the slices, that it didn't match, and why not (as much as I can get it to)</p>",
        "id": 186856652,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1580274265
    },
    {
        "content": "<p>Oh ok. Well that's fine then. I can suppress them. You just stated earlier: \" it only happens where you have specified slices, and then failed to meet any of them\". Maybe I wasn't understanding what that meant.</p>",
        "id": 186856684,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1580274334
    },
    {
        "content": "<p>you don't need to suppress them. FMG will approve with them present</p>",
        "id": 186856739,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1580274373
    },
    {
        "content": "<p>FMG has already approved! But ok. I just don't like seeing them... Is there anything wrong with suppressing them?</p>",
        "id": 186856759,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1580274453
    },
    {
        "content": "<p>no.</p>",
        "id": 186856760,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1580274474
    },
    {
        "content": "<p>though... I don't know if you can suppress these monster multi-line messages...</p>",
        "id": 186856803,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1580274494
    },
    {
        "content": "<p>Yeah, just about to try</p>",
        "id": 186856806,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1580274508
    },
    {
        "content": "<p>Might not be worth the copy and paste effort if I have to put the whole thing in. There isn't any wildcard or regex stuff allowed in that file is there?</p>",
        "id": 186856819,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1580274556
    },
    {
        "content": "<p>no</p>",
        "id": 186857063,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1580274973
    },
    {
        "content": "<p>Yeah, we're going to have to figure out an appropriate way to suppress those.  We definitely <em>want</em> to suppress them.  Once you know that a slice isn't supposed to match, you don't want to have to wade through and re-verify that each time you look.  (And similarly, you don't want to start ignoring all warnings that look like that because some of them might actually be errors.)  Ideally all IGs should be free of unsuppressed warnings and information messages at the time of publication - and the suppression file would document why each one was deemed appropriate to suppress.</p>",
        "id": 186902623,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1580315575
    },
    {
        "content": "<p>I did end up adding them all to the suppress warnings file.</p>",
        "id": 186933060,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1580334863
    },
    {
        "content": "<p>did that work, did it?</p>",
        "id": 186933692,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1580335327
    },
    {
        "content": "<p>Yes it did. I copied them all out of qa.txt and it worked like a charm!</p>",
        "id": 186935153,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1580336599
    },
    {
        "content": "<p>It's pretty ugly down at the bottom, but the top is all beautiful and green: <a href=\"http://hl7.org/fhir/us/ecr/STU1/qa.html\" target=\"_blank\" title=\"http://hl7.org/fhir/us/ecr/STU1/qa.html\">http://hl7.org/fhir/us/ecr/STU1/qa.html</a></p>",
        "id": 186935922,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1580337132
    },
    {
        "content": "<p>Except for the warning I just noticed I missed. <span aria-label=\"cry\" class=\"emoji emoji-1f622\" role=\"img\" title=\"cry\">:cry:</span></p>",
        "id": 186936105,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1580337266
    }
]