[
    {
        "content": "<p>Pulling this into a separate topic (was in <a href=\"#narrow/stream/179252-IG-creation/topic/Valueset.20Rendering\" title=\"#narrow/stream/179252-IG-creation/topic/Valueset.20Rendering\">ValueSet Rendering</a>):</p>\n<blockquote>\n<p>Rob Hausam: And another issue with the rendering is that if (as in the above example) a compose.include.version is set, that is not displayed anywhere, and the text for \"Expansion based on ...\" may be incorrect. In this instance the SNOMED version has been set to the 20190731 version of the International Release (as that is what the current GPS is based on), but the text for the expansion says \"Expansion based on SNOMED CT International edition 31-Jan 2020\".</p>\n<p>Lloyd McKenzie: I'd suggest creating a different issue for the release issue as I think that would be a different issue to fix.</p>\n<p>Rob Hausam: Here's the tracker for the fixed version issue: <a href=\"http://jira.hl7.org/browse/FHIR-26462\" target=\"_blank\" title=\"http://jira.hl7.org/browse/FHIR-26462\">FHIR#26462</a></p>\n<p>Grahame Grieve:<br>\nthe text for \"Expansion based on ...\" may be incorrect</p>\n<p>On what grounds do you think it's incorrect?</p>\n<p>Rob Hausam: @Grahame Grieve The reason I think it's incorrect is because (for example) in the value set definition compose.include.version is being set to <a href=\"http://snomed.info/sct/900000000000207008/version/20190731\" target=\"_blank\" title=\"http://snomed.info/sct/900000000000207008/version/20190731\">http://snomed.info/sct/900000000000207008/version/20190731</a>, but when the value set is expanded the message says:</p>\n<p>Expansion based on SNOMED CT International edition 31-Jan 2020</p>\n<p>So either the message is wrong, or the tx server isn't paying attention to the version specified in the definition (I'll verify which it is).</p>\n<p>Grahame Grieve:<br>\nI'll verify which it is</p>\n<p>yes please</p>\n</blockquote>\n<p>So it turns out that for $expand <a href=\"http://tx.fhir.org\" target=\"_blank\" title=\"http://tx.fhir.org\">tx.fhir.org</a> is ignoring the code system version, either specified as the 'system-version' parameter or in ValueSet.compose.include.version.  And the server is also ignoring the 'activeOnly' parameter and ValueSet.compose.inactive.  In all of the cases the expansions are using the latest version and include inactive concepts.</p>",
        "id": 190136010,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1583804997
    },
    {
        "content": "<p>do you have a parameters resource for the post submission that shows this?</p>",
        "id": 190136963,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1583806613
    },
    {
        "content": "<p>yes, I have some that I'll post</p>",
        "id": 190138702,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1583809343
    },
    {
        "content": "<p>Here are the Parameters resources:<br>\n<code>346755004 |Treemix allergy maintenance kit (product)|</code> is active in 20190731 but inactive in 20200131<br>\n<a href=\"/user_uploads/10155/YCncM3E34H1T72TOS1bqcxgR/expand_parameters-9.xml\" target=\"_blank\" title=\"expand_parameters-9.xml\">expand_parameters-9.xml</a> <br>\n<a href=\"/user_uploads/10155/J97IlvvsNd8RWN2PDJI8GNv5/expand_parameters-10.xml\" target=\"_blank\" title=\"expand_parameters-10.xml\">expand_parameters-10.xml</a> <br>\n<a href=\"/user_uploads/10155/qHP1VS2ewuWzxzsmBhteIpjR/expand_parameters-11.xml\" target=\"_blank\" title=\"expand_parameters-11.xml\">expand_parameters-11.xml</a> <br>\n<a href=\"/user_uploads/10155/tXkEzuae1gnUD3-LPxbpecLa/expand_parameters-12.xml\" target=\"_blank\" title=\"expand_parameters-12.xml\">expand_parameters-12.xml</a> </p>\n<p><code>407933006 |Varicella-zoster live attenuated vaccine injection (pdr for recon)+solvent (product)|</code> and <code>419771007 |Measles/mumps/rubella/varicella vaccine powder and solvent for injection solution vial (product)|</code> are active and subtypes of <code>108729007 |Varicella virus vaccine (product)|</code> in 20190731 but are inactive and removed from the hierarchy in 20200131<br>\n<a href=\"/user_uploads/10155/LXo7gSm--9JrvWYd3oDzo72g/expand_parameters-13.xml\" target=\"_blank\" title=\"expand_parameters-13.xml\">expand_parameters-13.xml</a> <br>\n<a href=\"/user_uploads/10155/4JvLEGUkRejocc101AeMdYJ8/expand_parameters-14.xml\" target=\"_blank\" title=\"expand_parameters-14.xml\">expand_parameters-14.xml</a> <br>\n<a href=\"/user_uploads/10155/GqfMhvblbaih9897iZsnu5r-/expand_parameters-15.xml\" target=\"_blank\" title=\"expand_parameters-15.xml\">expand_parameters-15.xml</a></p>",
        "id": 190143629,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1583818555
    },
    {
        "content": "<p>I included status = 'active' in all of the ValueSet resources, as that is required, although the terminology server doesn't seem to care if it's there or not (we probably should fix that and generate it in the publishers?).</p>",
        "id": 190143786,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1583818787
    },
    {
        "content": "<blockquote>\n<p>we probably should fix that and generate it in the publishers?</p>\n</blockquote>\n<p>Don't follow this bit?</p>",
        "id": 190251604,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1583904432
    },
    {
        "content": "<p>I've fixed the server - I think they all work now...</p>",
        "id": 190251607,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1583904441
    },
    {
        "content": "<p>I'm not seeing a change in the behavior on <a href=\"http://tx.fhir.org\" target=\"_blank\" title=\"http://tx.fhir.org\">tx.fhir.org</a> - maybe it hasn't been updated/restarted yet?</p>",
        "id": 190272457,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1583927025
    },
    {
        "content": "<p>The bit about \"we probably should fix that and generate it in the publishers?\" was suggesting that the ValueSet resource instance generated by the publisher for the valueSet parameter should include ValueSet.status (which it doesn't currently), as without that it's not a valid ValueSet resource instance.</p>",
        "id": 190272642,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1583927199
    },
    {
        "content": "<p>if the status is missing, you should get a validation error</p>",
        "id": 190277468,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1583931371
    },
    {
        "content": "<p>I haven't upgraded the server yet - sometime tomorrow</p>",
        "id": 190277479,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1583931381
    },
    {
        "content": "<p>Here's a snippet from qa-tx.html - there is no ValueSet.status element (and no evidence of a validation error that I see here):</p>\n<div class=\"codehilite\"><pre><span></span>POST http://tx.fhir.org/r4/ValueSet/$expand?_limit=1000&amp;_incomplete=true HTTP/1.0\nUser-Agent: Java FHIR Client for FHIR\nAccept: application/fhir+xml\nContent-Type: application/fhir+xml;charset=UTF-8\nAccept-Charset: UTF-8\n\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;Parameters xmlns=&quot;http://hl7.org/fhir&quot;&gt;&lt;parameter&gt;&lt;name value=&quot;profile-url&quot;/&gt;&lt;valueString value=&quot;dc8fd4bc-091a-424a-8a3b-6198ef146891&quot;/&gt;&lt;/parameter&gt;&lt;parameter&gt;&lt;name value=&quot;system-version&quot;/&gt;&lt;valueString value=&quot;http://snomed.info/sct|http://snomed.info/sct/900000000000207008&quot;/&gt;&lt;/parameter&gt;&lt;parameter&gt;&lt;name value=&quot;activeOnly&quot;/&gt;&lt;valueBoolean value=&quot;false&quot;/&gt;&lt;/parameter&gt;&lt;parameter&gt;&lt;name value=&quot;includeDefinition&quot;/&gt;&lt;valueBoolean value=&quot;false&quot;/&gt;&lt;/parameter&gt;&lt;parameter&gt;&lt;name value=&quot;excludeNested&quot;/&gt;&lt;valueBoolean value=&quot;true&quot;/&gt;&lt;/parameter&gt;&lt;parameter&gt;&lt;name value=&quot;valueSet&quot;/&gt;&lt;resource&gt;&lt;ValueSet&gt;&lt;compose&gt;&lt;include&gt;&lt;system value=&quot;http://snomed.info/sct&quot;/&gt;&lt;version value=&quot;http://snomed.info/sct/900000000000207008/version/20190731&quot;/&gt;&lt;concept&gt;&lt;code value=&quot;1985008&quot;/&gt;&lt;display value=&quot;Vomitus (substance)&quot;/&gt;&lt;/concept&gt;&lt;concept&gt;&lt;code value=&quot;4386001&quot;/&gt;&lt;display value=&quot;Bronchospasm (finding)&quot;/&gt;&lt;/concept&gt;&lt;concept&gt;&lt;code value=&quot;9826008&quot;/&gt;&lt;display value=&quot;Conjunctivitis (disorder)&quot;/&gt;&lt;/concept&gt;&lt;concept&gt;&lt;code value=&quot;23924001&quot;/&gt;&lt;display value=&quot;Tight chest (finding)&quot;/&gt;&lt;/concept&gt;&lt;concept&gt;&lt;code value=&quot;24079001&quot;/&gt;&lt;display value=&quot;Atopic dermatitis (disorder)&quot;/&gt;&lt;/concept&gt;&lt;concept&gt;&lt;code value=&quot;31996006&quot;/&gt;&lt;display value=&quot;Vasculitis (disorder)&quot;/&gt;&lt;/concept&gt;&lt;concept&gt;&lt;code value=&quot;39579001&quot;/&gt;&lt;display value=&quot;Anaphylaxis (disorder)&quot;/&gt;&lt;/concept&gt;&lt;concept&gt;&lt;code value=&quot;41291007&quot;/&gt;&lt;display value=&quot;Angioedema (disorder)&quot;/&gt;&lt;/concept&gt;&lt;concept&gt;&lt;code value=&quot;43116000&quot;/&gt;&lt;display value=&quot;Eczema (disorder)&quot;/&gt;&lt;/concept&gt;&lt;concept&gt;&lt;code value=&quot;49727002&quot;/&gt;&lt;display value=&quot;Cough (finding)&quot;/&gt;&lt;/concept&gt;&lt;concept&gt;&lt;code value=&quot;51599000&quot;/&gt;&lt;display value=&quot;Edema of larynx (disorder)&quot;/&gt;&lt;/concept&gt;&lt;concept&gt;&lt;code value=&quot;62315008&quot;/&gt;&lt;display value=&quot;Diarrhea (finding)&quot;/&gt;&lt;/concept&gt;&lt;concept&gt;&lt;code value=&quot;70076002&quot;/&gt;&lt;display value=&quot;Rhinitis (disorder)&quot;/&gt;&lt;/concept&gt;&lt;concept&gt;&lt;code value=&quot;73442001&quot;/&gt;&lt;display value=&quot;Stevens-Johnson syndrome (disorder)&quot;/&gt;&lt;/concept&gt;&lt;concept&gt;&lt;code value=&quot;76067001&quot;/&gt;&lt;display value=&quot;Sneezing (finding)&quot;/&gt;&lt;/concept&gt;&lt;concept&gt;&lt;code value=&quot;91175000&quot;/&gt;&lt;display value=&quot;Seizure (finding)&quot;/&gt;&lt;/concept&gt;&lt;concept&gt;&lt;code value=&quot;126485001&quot;/&gt;&lt;display value=&quot;Urticaria (disorder)&quot;/&gt;&lt;/concept&gt;&lt;concept&gt;&lt;code value=&quot;162290004&quot;/&gt;&lt;display value=&quot;Dry eyes (finding)&quot;/&gt;&lt;/concept&gt;&lt;concept&gt;&lt;code value=&quot;195967001&quot;/&gt;&lt;display value=&quot;Asthma (disorder)&quot;/&gt;&lt;/concept&gt;&lt;concept&gt;&lt;code value=&quot;247472004&quot;/&gt;&lt;display value=&quot;Weal (disorder)&quot;/&gt;&lt;/concept&gt;&lt;concept&gt;&lt;code value=&quot;267036007&quot;/&gt;&lt;display value=&quot;Dyspnea (finding)&quot;/&gt;&lt;/concept&gt;&lt;concept&gt;&lt;code value=&quot;271757001&quot;/&gt;&lt;display value=&quot;Papular eruption (disorder)&quot;/&gt;&lt;/concept&gt;&lt;concept&gt;&lt;code value=&quot;271759003&quot;/&gt;&lt;display value=&quot;Bullous eruption (disorder)&quot;/&gt;&lt;/concept&gt;&lt;concept&gt;&lt;code value=&quot;271807003&quot;/&gt;&lt;display value=&quot;Eruption of skin (disorder)&quot;/&gt;&lt;/concept&gt;&lt;concept&gt;&lt;code value=&quot;359610006&quot;/&gt;&lt;display value=&quot;Ocular hyperemia (disorder)&quot;/&gt;&lt;/concept&gt;&lt;concept&gt;&lt;code value=&quot;410430005&quot;/&gt;&lt;display value=&quot;Cardiorespiratory arrest (disorder)&quot;/&gt;&lt;/concept&gt;&lt;concept&gt;&lt;code value=&quot;418363000&quot;/&gt;&lt;display value=&quot;Itching of skin (finding)&quot;/&gt;&lt;/concept&gt;&lt;concept&gt;&lt;code value=&quot;422587007&quot;/&gt;&lt;display value=&quot;Nausea (finding)&quot;/&gt;&lt;/concept&gt;&lt;concept&gt;&lt;code value=&quot;698247007&quot;/&gt;&lt;display value=&quot;Cardiac arrhythmia (disorder)&quot;/&gt;&lt;/concept&gt;&lt;concept&gt;&lt;code value=&quot;702809001&quot;/&gt;&lt;display value=&quot;Drug reaction with eosinophilia and systemic symptoms (disorder)&quot;/&gt;&lt;/concept&gt;&lt;concept&gt;&lt;code value=&quot;768962006&quot;/&gt;&lt;display value=&quot;Lyell syndrome (disorder)&quot;/&gt;&lt;/concept&gt;&lt;/include&gt;&lt;/compose&gt;&lt;/ValueSet&gt;&lt;/resource&gt;&lt;/parameter&gt;&lt;parameter&gt;&lt;name value=&quot;_limit&quot;/&gt;&lt;valueString value=&quot;1000&quot;/&gt;&lt;/parameter&gt;&lt;parameter&gt;&lt;name value=&quot;_incomplete&quot;/&gt;&lt;valueString value=&quot;true&quot;/&gt;&lt;/parameter&gt;&lt;/Parameters&gt;\nHTTP/1.1 200 OK\nConnection: close\nContent-Type: application/fhir+xml; charset=UTF-8\nContent-Length: 4498\nCache-control: public, max-age=600\nDate: Sat, 07 Mar 2020 04:28:00 GMT\nPragma: no-cache\nX-Request-Id: 268-185086\nAccess-Control-Allow-Origin: *\nAccess-Control-Expose-Headers: Content-Location, Location\nAccess-Control-Allow-Methods: GET, POST, PUT, PATCH, DELETE\nX-GDPR-Disclosure: All access to this server is logged as AuditEvent Resources, and these store your ip address (and logged in user, if one exists). Also, your IP address is logged with Google Analytics for building geomaps of server usage. Your continued use of the API constitutes agreement to these terms. See [link] for erasure requests\nLast-Modified: Sat, 07 Mar 2020 04:28:00 GMT\nServer: Health Intersections FHIR Server\n\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;ValueSet xmlns=&quot;http://hl7.org/fhir&quot;&gt;&lt;expansion&gt;&lt;identifier value=&quot;urn:uuid:2011c601-c5cb-4dce-98b4-9992f9662ea2&quot;/&gt;&lt;timestamp value=&quot;2020-03-07T04:28:00.111Z&quot;/&gt;&lt;parameter&gt;&lt;name value=&quot;limitedExpansion&quot;/&gt;&lt;valueString value=&quot;-1&quot;/&gt;&lt;/parameter&gt;&lt;parameter&gt;&lt;name value=&quot;excludeNested&quot;/&gt;&lt;valueString value=&quot;-1&quot;/&gt;&lt;/parameter&gt;&lt;parameter&gt;&lt;name value=&quot;version&quot;/&gt;&lt;valueString value=&quot;http://snomed.info/sct|http://snomed.info/sct/900000000000207008/version/20200131&quot;/&gt;&lt;/parameter&gt;&lt;contains&gt;&lt;system value=&quot;http://snomed.info/sct&quot;/&gt;&lt;code value=&quot;1985008&quot;/&gt;&lt;display value=&quot;Vomitus (substance)&quot;/&gt;&lt;/contains&gt;&lt;contains&gt;&lt;system value=&quot;http://snomed.info/sct&quot;/&gt;&lt;code value=&quot;4386001&quot;/&gt;&lt;display value=&quot;Bronchospasm (finding)&quot;/&gt;&lt;/contains&gt;&lt;contains&gt;&lt;system value=&quot;http://snomed.info/sct&quot;/&gt;&lt;code value=&quot;9826008&quot;/&gt;&lt;display value=&quot;Conjunctivitis (disorder)&quot;/&gt;&lt;/contains&gt;&lt;contains&gt;&lt;system value=&quot;http://snomed.info/sct&quot;/&gt;&lt;code value=&quot;23924001&quot;/&gt;&lt;display value=&quot;Tight chest (finding)&quot;/&gt;&lt;/contains&gt;&lt;contains&gt;&lt;system value=&quot;http://snomed.info/sct&quot;/&gt;&lt;code value=&quot;24079001&quot;/&gt;&lt;display value=&quot;Atopic dermatitis (disorder)&quot;/&gt;&lt;/contains&gt;&lt;contains&gt;&lt;system value=&quot;http://snomed.info/sct&quot;/&gt;&lt;code value=&quot;31996006&quot;/&gt;&lt;display value=&quot;Vasculitis (disorder)&quot;/&gt;&lt;/contains&gt;&lt;contains&gt;&lt;system value=&quot;http://snomed.info/sct&quot;/&gt;&lt;code value=&quot;39579001&quot;/&gt;&lt;display value=&quot;Anaphylaxis (disorder)&quot;/&gt;&lt;/contains&gt;&lt;contains&gt;&lt;system value=&quot;http://snomed.info/sct&quot;/&gt;&lt;code value=&quot;41291007&quot;/&gt;&lt;display value=&quot;Angioedema (disorder)&quot;/&gt;&lt;/contains&gt;&lt;contains&gt;&lt;system value=&quot;http://snomed.info/sct&quot;/&gt;&lt;code value=&quot;43116000&quot;/&gt;&lt;display value=&quot;Eczema (disorder)&quot;/&gt;&lt;/contains&gt;&lt;contains&gt;&lt;system value=&quot;http://snomed.info/sct&quot;/&gt;&lt;code value=&quot;49727002&quot;/&gt;&lt;display value=&quot;Cough (finding)&quot;/&gt;&lt;/contains&gt;&lt;contains&gt;&lt;system value=&quot;http://snomed.info/sct&quot;/&gt;&lt;code value=&quot;51599000&quot;/&gt;&lt;display value=&quot;Edema of larynx (disorder)&quot;/&gt;&lt;/contains&gt;&lt;contains&gt;&lt;system value=&quot;http://snomed.info/sct&quot;/&gt;&lt;code value=&quot;62315008&quot;/&gt;&lt;display value=&quot;Diarrhea (finding)&quot;/&gt;&lt;/contains&gt;&lt;contains&gt;&lt;system value=&quot;http://snomed.info/sct&quot;/&gt;&lt;code value=&quot;70076002&quot;/&gt;&lt;display value=&quot;Rhinitis (disorder)&quot;/&gt;&lt;/contains&gt;&lt;contains&gt;&lt;system value=&quot;http://snomed.info/sct&quot;/&gt;&lt;code value=&quot;73442001&quot;/&gt;&lt;display value=&quot;Stevens-Johnson syndrome (disorder)&quot;/&gt;&lt;/contains&gt;&lt;contains&gt;&lt;system value=&quot;http://snomed.info/sct&quot;/&gt;&lt;code value=&quot;76067001&quot;/&gt;&lt;display value=&quot;Sneezing (finding)&quot;/&gt;&lt;/contains&gt;&lt;contains&gt;&lt;system value=&quot;http://snomed.info/sct&quot;/&gt;&lt;code value=&quot;91175000&quot;/&gt;&lt;display value=&quot;Seizure (finding)&quot;/&gt;&lt;/contains&gt;&lt;contains&gt;&lt;system value=&quot;http://snomed.info/sct&quot;/&gt;&lt;code value=&quot;126485001&quot;/&gt;&lt;display value=&quot;Urticaria (disorder)&quot;/&gt;&lt;/contains&gt;&lt;contains&gt;&lt;system value=&quot;http://snomed.info/sct&quot;/&gt;&lt;code value=&quot;162290004&quot;/&gt;&lt;display value=&quot;Dry eyes (finding)&quot;/&gt;&lt;/contains&gt;&lt;contains&gt;&lt;system value=&quot;http://snomed.info/sct&quot;/&gt;&lt;code value=&quot;195967001&quot;/&gt;&lt;display value=&quot;Asthma (disorder)&quot;/&gt;&lt;/contains&gt;&lt;contains&gt;&lt;system value=&quot;http://snomed.info/sct&quot;/&gt;&lt;code value=&quot;247472004&quot;/&gt;&lt;display value=&quot;Weal (disorder)&quot;/&gt;&lt;/contains&gt;&lt;contains&gt;&lt;system value=&quot;http://snomed.info/sct&quot;/&gt;&lt;code value=&quot;267036007&quot;/&gt;&lt;display value=&quot;Dyspnea (finding)&quot;/&gt;&lt;/contains&gt;&lt;contains&gt;&lt;system value=&quot;http://snomed.info/sct&quot;/&gt;&lt;code value=&quot;271757001&quot;/&gt;&lt;display value=&quot;Papular eruption (disorder)&quot;/&gt;&lt;/contains&gt;&lt;contains&gt;&lt;system value=&quot;http://snomed.info/sct&quot;/&gt;&lt;code value=&quot;271759003&quot;/&gt;&lt;display value=&quot;Bullous eruption (disorder)&quot;/&gt;&lt;/contains&gt;&lt;contains&gt;&lt;system value=&quot;http://snomed.info/sct&quot;/&gt;&lt;code value=&quot;271807003&quot;/&gt;&lt;display value=&quot;Eruption of skin (disorder)&quot;/&gt;&lt;/contains&gt;&lt;contains&gt;&lt;system value=&quot;http://snomed.info/sct&quot;/&gt;&lt;code value=&quot;359610006&quot;/&gt;&lt;display value=&quot;Ocular hyperemia (disorder)&quot;/&gt;&lt;/contains&gt;&lt;contains&gt;&lt;system value=&quot;http://snomed.info/sct&quot;/&gt;&lt;code value=&quot;410430005&quot;/&gt;&lt;display value=&quot;Cardiorespiratory arrest (disorder)&quot;/&gt;&lt;/contains&gt;&lt;contains&gt;&lt;system value=&quot;http://snomed.info/sct&quot;/&gt;&lt;code value=&quot;418363000&quot;/&gt;&lt;display value=&quot;Itching of skin (finding)&quot;/&gt;&lt;/contains&gt;&lt;contains&gt;&lt;system value=&quot;http://snomed.info/sct&quot;/&gt;&lt;code value=&quot;422587007&quot;/&gt;&lt;display value=&quot;Nausea (finding)&quot;/&gt;&lt;/contains&gt;&lt;contains&gt;&lt;system value=&quot;http://snomed.info/sct&quot;/&gt;&lt;code value=&quot;698247007&quot;/&gt;&lt;display value=&quot;Cardiac arrhythmia (disorder)&quot;/&gt;&lt;/contains&gt;&lt;contains&gt;&lt;system value=&quot;http://snomed.info/sct&quot;/&gt;&lt;code value=&quot;702809001&quot;/&gt;&lt;display value=&quot;Drug reaction with eosinophilia and systemic symptoms (disorder)&quot;/&gt;&lt;/contains&gt;&lt;contains&gt;&lt;system value=&quot;http://snomed.info/sct&quot;/&gt;&lt;code value=&quot;768962006&quot;/&gt;&lt;display value=&quot;Lyell syndrome (disorder)&quot;/&gt;&lt;/contains&gt;&lt;/expansion&gt;&lt;/ValueSet&gt;\n</pre></div>",
        "id": 190288360,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1583937695
    },
    {
        "content": "<p>error should be qa.html</p>",
        "id": 190322320,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1583955376
    },
    {
        "content": "<p>right - that means you have to coordinate between the two pages rather than having a directly corresponding reference<br>\nbut in this case I don't see any related errors, warnings or info messages (including the suppressed ones) in the qa.html</p>\n<p>plus, if I go back to a couple of the Parameters resource examples that I sent and remove the ValueSet.status line and I post to <a href=\"http://tx.fhir.org\" target=\"_blank\" title=\"http://tx.fhir.org\">tx.fhir.org</a> directly (in Postman), the terminology server still processes the request without generating any errors or warnings (or any indication of any kind that there is something invalid about the ValueSet resource)</p>",
        "id": 190328719,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1583959070
    },
    {
        "content": "<p>right. the terminology server doesn't need status to do an expansion, so it doesn't check for it.</p>",
        "id": 190328873,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1583959141
    },
    {
        "content": "<p>what IG are you net getting a warning?</p>",
        "id": 190328912,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1583959169
    },
    {
        "content": "<p>yes, that makes sense from an operational perspective - if that's just an internal shortcut that the publisher uses then I can understand not flagging that as a qa issue - but because it's not completely internal (you can see it in qa-tx.html) and because it would be trivial to add for completeness, the question is shouldn't we go ahead and do that so that the ValueSet resource instances that are submitted within the parameters would actually be conformant?</p>",
        "id": 190329264,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1583959416
    },
    {
        "content": "<p>the IG is IPS</p>",
        "id": 190329275,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1583959422
    },
    {
        "content": "<p>which value set?</p>",
        "id": 190329369,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1583959461
    },
    {
        "content": "<p>it's what the publisher submits to <a href=\"http://tx.fhir.org\" target=\"_blank\" title=\"http://tx.fhir.org\">tx.fhir.org</a> for any (and all) of the ValueSet resource instances in the IG (as far as I've seen)<br>\nall of the ValueSet resources instances in the IG have ValueSet.status and are conformant, but when they are submitted by the publisher as a ValueSet instance in the $expand parameters only the 'compose' element is being sent</p>",
        "id": 190329755,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1583959737
    },
    {
        "content": "<p>as you said (and I agreed) that works - but since it isn't conformant to the spec, is that the way we should do it?</p>",
        "id": 190329964,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1583959883
    },
    {
        "content": "<p>ok I think I found the one place that I missed setting status</p>",
        "id": 190331175,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1583960576
    },
    {
        "content": "<p>ok upgraded the server</p>",
        "id": 190340581,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1583966936
    },
    {
        "content": "<p>I noticed it was down momentarily so figured that was the case</p>",
        "id": 190340704,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1583967029
    },
    {
        "content": "<p>I'll check it out</p>",
        "id": 190340724,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1583967052
    },
    {
        "content": "<p>I already looked at the commits</p>",
        "id": 190340743,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1583967074
    },
    {
        "content": "<p>So what I'm seeing is that <a href=\"http://tx.fhir.org\" target=\"_blank\" title=\"http://tx.fhir.org\">tx.fhir.org</a> is now responding correctly to the activeOnly parameter, but it is still ignoring ValueSet.compose.inactive.</p>",
        "id": 190357898,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1583990950
    },
    {
        "content": "<p>Also, irrespective of specifying a particular SNOMED CT version (in addition to the edition) in system-version or ValueSet.compose.include.version, the expansion is done on the current version.  I think that's actually expected, since the SNOMED import for the server is done on the snapshot release, which only includes the content for that specific version of the chosen edition.  In order to support multiple versions for an edition it would be necessary to import the full release and handle the content (including the transitive closure) for any specified version.  That's doable, but would certainly require additional work to implement.  An alternative could be to allow value set instances defined for fixed versions of the code system(s) to include their own expansions (which the tx server would simply pass through and wouldn't need to calculate).  Is that something to consider for the tx server (we definitely would like to have it in IPS for the GPS value sets)? <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span></p>",
        "id": 190358362,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1583991807
    },
    {
        "content": "<p>Based on the comment in terminology <a href=\"#narrow/stream/179202-terminology/topic/COVID-19\" title=\"#narrow/stream/179202-terminology/topic/COVID-19\">here</a> I see that my comment above isn't accurate.  I'm assuming that the way we can now (as of this release) manage multiple versions of the same SNOMED CT edition is to generate the cache and host multiple specified versions (not any arbitrary version as with the full release)?  I'm assuming that's a good guess (and you can correct it if it isn't).  It's definitely good to have the option.</p>",
        "id": 190358738,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1583992485
    },
    {
        "content": "<p>ok I agree that I ignore ValueSet.compose.inactive (when did that get added?), but I'm pretty sure that the expansion is done on the version you ask for</p>",
        "id": 190358814,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1583992611
    },
    {
        "content": "<p>and you shouldn't need to do anything fancy to have value sets based on different versions in the same ig</p>",
        "id": 190358822,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1583992662
    },
    {
        "content": "<p>yeah, that sounds good - we just don't have the other versions loaded at the moment<br>\nI'll work on that<br>\nValueSet.compose.inactive was in STU3 - added in 1.8.0 :)</p>",
        "id": 190359024,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1583993006
    },
    {
        "content": "<p>Is there a FHIR CodeSystem that corresponds to the valid values for the <a href=\"http://hl7.org/fhir/concept-properties#status\" target=\"_blank\" title=\"http://hl7.org/fhir/concept-properties#status\">http://hl7.org/fhir/concept-properties#status</a> property?</p>",
        "id": 190359253,
        "sender_full_name": "Michael Lawley",
        "timestamp": 1583993400
    },
    {
        "content": "<p>I think there is in the current build</p>",
        "id": 190359580,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1583993969
    },
    {
        "content": "<p>if not, it's because I haven't merged it in yet</p>",
        "id": 190359584,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1583993981
    }
]