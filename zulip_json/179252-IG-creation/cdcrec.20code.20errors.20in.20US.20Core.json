[
    {
        "content": "<p>similar to this <a href=\"#narrow/stream/179252-IG-creation/topic/CVX.20and.20NDC.20warnings.20in.20US.20Core\">stream</a> we are using VSAC for race and ethnicity codes.  however there are several errors in examples that have cropped up.  The codes and code systems(oids) have not changed:</p>\n<div class=\"codehilite\"><pre><span></span><code>INFORMATION: Patient/child-example: Patient.extension[1].extension[0].value.ofType(Coding): Code System URI &#39;http://cts.nlm.nih.gov/fhir/cs/cdcrec&#39; is unknown so the code cannot be validated\nERROR: Patient/child-example: Patient.extension[1].extension[0].value.ofType(Coding): The code provided (http://cts.nlm.nih.gov/fhir/cs/cdcrec#2186-5) is not in the value set http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.114222.4.11.837, and a code from this value set is required: CodeSystem uri &#39;http://cts.nlm.nih.gov/fhir/cs/cdcrec&#39; is unknown (from http://tx.fhir.org/r4)\n== /scratch/ig-build-temp-CDMML3/repo/input/examples/patient-example.json ==\nINFORMATION: Patient/example: Patient: Validate resource against profile http://hl7.org/fhir/us/core/StructureDefinition/us-core-patient\nERROR: Patient/example: Patient.extension[0].extension[3].value.ofType(Coding): The Coding provided (urn:oid:2.16.840.1.113883.6.238#1586-7) is not in the value set http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.1.11.14914, and a code is required from this value set.  (error message = Not in value set http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.1.11.14914)\nERROR: Patient/example: Patient.extension[0].extension[4].value.ofType(Coding): The Coding provided (urn:oid:2.16.840.1.113883.6.238#2036-2) is not in the value set http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.1.11.14914, and a code is required from this value set.  (error message = Not in value set http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.1.11.14914)\nERROR: Patient/example: Patient.extension[1].extension[0].value.ofType(Coding): The Coding provided (urn:oid:2.16.840.1.113883.6.238#2135-2) is not in the value set http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.114222.4.11.837, and a code is required from this value set.  (error message = Not in value set http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.114222.4.11.837)\nERROR: Patient/example: Patient.extension[1].extension[1].value.ofType(Coding): The Coding provided (urn:oid:2.16.840.1.113883.6.238#2184-0) is not in the value set http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.114222.4.11.877, and a code is required from this value set.  (error message = Not in value set http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.114222.4.11.877)\nERROR: Patient/example: Patient.extension[1].extension[2].value.ofType(Coding): The Coding provided (urn:oid:2.16.840.1.113883.6.238#2148-5) is not in the value set http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.114222.4.11.877, and a code is required from this value set.  (error message = Not in value set http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.114222.4.11.877)\n== /scratch/ig-build-temp-CDMML3/repo/input/examples/patient-infant-example.json ==\nINFORMATION: Patient/infant-example: Patient: Validate resource against profile http://hl7.org/fhir/us/core/StructureDefinition/us-core-patient\nERROR: Patient/infant-example: Patient.extension[1].extension[0].value.ofType(Coding): The Coding provided (urn:oid:2.16.840.1.113883.6.238#2186-5) is not in the value set http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.114222.4.11.837, and a code is required from this value set.  (error message = Not in value set http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.114222.4.11.837)\n</code></pre></div>\n<p>note I changed the code system to <code>http://cts.nlm.nih.gov/fhir/cs/cdcrec</code> to see if that was the issue but it was not.<br>\nnote also this is one of the few time these vsac link actually resolves to an actual valueset for me ( although maybe I logged in during the session)</p>",
        "id": 218383311,
        "sender_full_name": "Eric Haas",
        "timestamp": 1606801958
    },
    {
        "content": "<p>did you clear the txCache?</p>",
        "id": 218383466,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1606802250
    },
    {
        "content": "<p>using the autobuild...</p>",
        "id": 218384323,
        "sender_full_name": "Eric Haas",
        "timestamp": 1606803468
    },
    {
        "content": "<p>not commiting the cache</p>",
        "id": 218384371,
        "sender_full_name": "Eric Haas",
        "timestamp": 1606803514
    },
    {
        "content": "<p>You should always commit the cache - saves hammering on the terminology server</p>",
        "id": 218437830,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1606837083
    },
    {
        "content": "<p>not building locally</p>",
        "id": 218459228,
        "sender_full_name": "Eric Haas",
        "timestamp": 1606845869
    },
    {
        "content": "<p>only with autobuild see why <a href=\"#narrow/stream/179252-IG-creation/topic/CVX.20and.20NDC.20warnings.20in.20US.20Core/near/218460001\">here</a></p>",
        "id": 218459240,
        "sender_full_name": "Eric Haas",
        "timestamp": 1606845879
    },
    {
        "content": "<p>cleared cache as described <a href=\"#narrow/stream/179252-IG-creation/topic/CVX.20and.20NDC.20warnings.20in.20US.20Core/near/218463145\">here</a></p>",
        "id": 218463274,
        "sender_full_name": "Eric Haas",
        "timestamp": 1606847778
    },
    {
        "content": "<p>I can't reproduce this. It may have been fixed by the things I already did, but... why?  Anyhow, lets see if it continues to happen after the next release</p>",
        "id": 218512033,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1606880152
    },
    {
        "content": "<p>oh turns out I can now that I have updated the US core source. (Really though I had...)</p>",
        "id": 218512315,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1606880600
    },
    {
        "content": "<p>but I agree with the validator on this one. I think you have the wrong system URI</p>",
        "id": 218512321,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1606880617
    },
    {
        "content": "<p>given what the value set says</p>",
        "id": 218512322,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1606880622
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191991\">@Gay Dolin</span>  <span class=\"user-mention\" data-user-id=\"191410\">@Brett Marquard</span>  If the system has changed, then I don't  think we should use VSAC,  they are not the same.  The OID  has been used by C-CDA  and since  the beginning in US Core.  Why did  VSAC change it to   &lt;code&gt;http://cts.nlm.nih.gov/fhir/cs/cdcrec&lt;/code&gt;???</p>",
        "id": 218579908,
        "sender_full_name": "Eric Haas",
        "timestamp": 1606925858
    },
    {
        "content": "<p>I am confused, the value set still includes the code system OID 2.16.840.1.114222.4.11.877 - see <a href=\"https://vsac.nlm.nih.gov/valueset/2.16.840.1.114222.4.11.877/expansion/Latest\">https://vsac.nlm.nih.gov/valueset/2.16.840.1.114222.4.11.877/expansion/Latest</a></p>",
        "id": 218589655,
        "sender_full_name": "Brett Marquard",
        "timestamp": 1606929735
    },
    {
        "content": "<p>that is the HTML representation the downloadable fhir artifact does not.</p>",
        "id": 218592452,
        "sender_full_name": "Eric Haas",
        "timestamp": 1606930915
    },
    {
        "content": "<p><a href=\"https://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.114222.4.11.837/$expand\">https://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.114222.4.11.837/$expand</a> </p>\n<p>which I assume is what the validator is using.</p>\n<div class=\"codehilite\" data-code-language=\"XML\"><pre><span></span><code><span class=\"cp\">&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;</span>\n\n<span class=\"nt\">&lt;ValueSet</span> <span class=\"na\">xmlns=</span><span class=\"s\">\"http://hl7.org/fhir\"</span><span class=\"nt\">&gt;</span>\n  <span class=\"nt\">&lt;id</span> <span class=\"na\">value=</span><span class=\"s\">\"2.16.840.1.114222.4.11.837\"</span><span class=\"nt\">/&gt;</span>\n  <span class=\"nt\">&lt;meta&gt;</span>\n    <span class=\"nt\">&lt;versionId</span> <span class=\"na\">value=</span><span class=\"s\">\"1\"</span><span class=\"nt\">/&gt;</span>\n    <span class=\"nt\">&lt;lastUpdated</span> <span class=\"na\">value=</span><span class=\"s\">\"2012-10-25T12:28:31.000-04:00\"</span><span class=\"nt\">/&gt;</span>\n  <span class=\"nt\">&lt;/meta&gt;</span>\n\n  <span class=\"nt\">&lt;url</span> <span class=\"na\">value=</span><span class=\"s\">\"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.114222.4.11.837\"</span><span class=\"nt\">/&gt;</span>\n  <span class=\"nt\">&lt;version</span> <span class=\"na\">value=</span><span class=\"s\">\"20121025\"</span><span class=\"nt\">/&gt;</span>\n  <span class=\"nt\">&lt;name</span> <span class=\"na\">value=</span><span class=\"s\">\"Ethnicity\"</span><span class=\"nt\">/&gt;</span>\n  <span class=\"nt\">&lt;status</span> <span class=\"na\">value=</span><span class=\"s\">\"active\"</span><span class=\"nt\">/&gt;</span>\n  <span class=\"nt\">&lt;date</span> <span class=\"na\">value=</span><span class=\"s\">\"2012-10-25T12:28:31-04:00\"</span><span class=\"nt\">/&gt;</span>\n  <span class=\"nt\">&lt;publisher</span> <span class=\"na\">value=</span><span class=\"s\">\"CDC NCHS\"</span><span class=\"nt\">/&gt;</span>\n  <span class=\"nt\">&lt;compose&gt;</span>\n    <span class=\"nt\">&lt;include&gt;</span>\n      <span class=\"nt\">&lt;system</span> <span class=\"na\">value=</span><span class=\"s\">\"http://cts.nlm.nih.gov/fhir/cs/cdcrec\"</span><span class=\"nt\">/&gt;</span>  <span class=\"c\">&lt;!--- NOT THE OID! --&gt;</span>\n      <span class=\"nt\">&lt;concept&gt;</span>\n        <span class=\"nt\">&lt;code</span> <span class=\"na\">value=</span><span class=\"s\">\"2135-2\"</span><span class=\"nt\">/&gt;</span>\n        <span class=\"nt\">&lt;display</span> <span class=\"na\">value=</span><span class=\"s\">\"Hispanic or Latino\"</span><span class=\"nt\">/&gt;</span>\n      <span class=\"nt\">&lt;/concept&gt;</span>\n      <span class=\"nt\">&lt;concept&gt;</span>\n        <span class=\"nt\">&lt;code</span> <span class=\"na\">value=</span><span class=\"s\">\"2186-5\"</span><span class=\"nt\">/&gt;</span>\n        <span class=\"nt\">&lt;display</span> <span class=\"na\">value=</span><span class=\"s\">\"Not Hispanic or Latino\"</span><span class=\"nt\">/&gt;</span>\n      <span class=\"nt\">&lt;/concept&gt;</span>\n    <span class=\"nt\">&lt;/include&gt;</span>\n  <span class=\"nt\">&lt;/compose&gt;</span>\n<span class=\"nt\">&lt;/ValueSet&gt;</span>\n</code></pre></div>",
        "id": 218592820,
        "sender_full_name": "Eric Haas",
        "timestamp": 1606931048
    },
    {
        "content": "<p>also unable to download 2.16.840.1.114222.4.11.877 expansion directly assuming is intensional so I assume that is why using the vsac package for now.  Maybe that is what the validator is basing this upon? <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span></p>",
        "id": 218594610,
        "sender_full_name": "Eric Haas",
        "timestamp": 1606931828
    },
    {
        "content": "<p>In the vsac package I see it as ;</p>\n<div class=\"codehilite\" data-code-language=\"YAML\"><pre><span></span><code><span class=\"nt\">resourceType</span><span class=\"p\">:</span> <span class=\"l l-Scalar l-Scalar-Plain\">ValueSet</span>\n<span class=\"nt\">id</span><span class=\"p\">:</span> <span class=\"l l-Scalar l-Scalar-Plain\">2.16.840.1.114222.4.11.877</span>\n<span class=\"nt\">meta</span><span class=\"p\">:</span>\n  <span class=\"nt\">source</span><span class=\"p\">:</span> <span class=\"l l-Scalar l-Scalar-Plain\">https://vsac.nlm.nih.gov/valueset/2.16.840.1.114222.4.11.877/expansion</span>\n<span class=\"nt\">url</span><span class=\"p\">:</span> <span class=\"l l-Scalar l-Scalar-Plain\">http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.114222.4.11.877</span>\n<span class=\"nt\">version</span><span class=\"p\">:</span> <span class=\"l l-Scalar l-Scalar-Plain\">C-CDA R2.1 2020-07-13</span>\n<span class=\"nt\">name</span><span class=\"p\">:</span> <span class=\"l l-Scalar l-Scalar-Plain\">DetailedEthnicity</span>\n<span class=\"nt\">title</span><span class=\"p\">:</span> <span class=\"l l-Scalar l-Scalar-Plain\">Detailed Ethnicity</span>\n<span class=\"nn\">...</span>\n<span class=\"nt\">compose</span><span class=\"p\">:</span>\n  <span class=\"nt\">include</span><span class=\"p\">:</span>\n    <span class=\"p p-Indicator\">-</span> <span class=\"nt\">system</span><span class=\"p\">:</span> <span class=\"l l-Scalar l-Scalar-Plain\">http://terminology.hl7.org/CodeSystem/v2-0005</span>  <span class=\"c1\">#&lt;&lt;&lt;&lt;&lt; not an OID</span>\n      <span class=\"nt\">version</span><span class=\"p\">:</span> <span class=\"s\">\"1.2\"</span>\n      <span class=\"nt\">concept</span><span class=\"p\">:</span>\n        <span class=\"p p-Indicator\">-</span> <span class=\"nt\">code</span><span class=\"p\">:</span> <span class=\"l l-Scalar l-Scalar-Plain\">2137-8</span>\n          <span class=\"nt\">display</span><span class=\"p\">:</span> <span class=\"l l-Scalar l-Scalar-Plain\">Spaniard</span>\n        <span class=\"p p-Indicator\">-</span> <span class=\"nt\">code</span><span class=\"p\">:</span> <span class=\"l l-Scalar l-Scalar-Plain\">2138-6</span>\n<span class=\"nn\">...</span>\n</code></pre></div>",
        "id": 218595868,
        "sender_full_name": "Eric Haas",
        "timestamp": 1606932357
    },
    {
        "content": "<p>Fun.</p>",
        "id": 218597586,
        "sender_full_name": "Brett Marquard",
        "timestamp": 1606933152
    },
    {
        "content": "<p>(deleted)</p>",
        "id": 218601107,
        "sender_full_name": "Eric Haas",
        "timestamp": 1606934659
    },
    {
        "content": "<p>I can't find my APIKey and I can't find anywhere in the NLM web site that lets me get another one. I tried logging out but that didn't even work</p>",
        "id": 218608624,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1606938242
    },
    {
        "content": "<p>I wish I used twitter - \"FHIR Creator can't even find NLM key\"</p>",
        "id": 218608753,
        "sender_full_name": "Brett Marquard",
        "timestamp": 1606938288
    },
    {
        "content": "<p>took me about 30 mins, I would tell you, but it will probably take me another 30 to find</p>",
        "id": 218608797,
        "sender_full_name": "Brett Marquard",
        "timestamp": 1606938307
    },
    {
        "content": "<p>faster this time -- log in here: <a href=\"https://uts.nlm.nih.gov/uts/\">https://uts.nlm.nih.gov/uts/</a></p>",
        "id": 218608891,
        "sender_full_name": "Brett Marquard",
        "timestamp": 1606938357
    },
    {
        "content": "<p><a href=\"/user_uploads/10155/yM9wVY0TQaWFLLtYDgSqc4ZS/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/yM9wVY0TQaWFLLtYDgSqc4ZS/image.png\" title=\"image.png\"><img src=\"/user_uploads/10155/yM9wVY0TQaWFLLtYDgSqc4ZS/image.png\"></a></div>",
        "id": 218608902,
        "sender_full_name": "Brett Marquard",
        "timestamp": 1606938360
    },
    {
        "content": "<p>found it. google knows, even if NLM don't</p>",
        "id": 218608957,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1606938371
    },
    {
        "content": "<p>this is the source that the publisher uses internally: <br>\n<a href=\"https://github.com/FHIR/packages/blob/master/packages/us.nlm.vsac/package/ValueSet-2.16.840.1.114222.4.11.837.json\">https://github.com/FHIR/packages/blob/master/packages/us.nlm.vsac/package/ValueSet-2.16.840.1.114222.4.11.837.json</a><br>\n<a href=\"https://github.com/FHIR/packages/blob/master/packages/us.nlm.vsac/package/ValueSet-2.16.840.1.114222.4.11.877.json\">https://github.com/FHIR/packages/blob/master/packages/us.nlm.vsac/package/ValueSet-2.16.840.1.114222.4.11.877.json</a></p>",
        "id": 218610342,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1606939048
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> <span class=\"user-mention\" data-user-id=\"191991\">@Gay Dolin</span>   OK so here is the issue:</p>\n<p>US Core and CCDA use the code system oid  <code>2.16.840.1.113883.6.238</code> as the URI  for the <a href=\"http://build.fhir.org/ig/HL7/US-Core/ValueSet-omb-race-category.html\">omb race valueset</a></p>\n<p>when we try to use VSAC the valueset in the package uses the uri: <code>http://cts.nlm.nih.gov/fhir/cs/cdcrec</code> as I pointed out above.  It does not use an oid.  If we use VSAC then My assumption is that the instance validation will fail if the OID is <code>2.16.840.1.113883.6.238</code> is used instead of <code>http://cts.nlm.nih.gov/fhir/cs/cdcrec</code> because the VSAC package definition will be used - is that correct?</p>\n<p>Also we are investigating how to change VSAC to use the same code system as both CCDA and FHIR.  Would providing the OID as an alternative identifier in the codesystem change the validation.  ( I am assuming no)</p>",
        "id": 227863373,
        "sender_full_name": "Eric Haas",
        "timestamp": 1614299492
    }
]