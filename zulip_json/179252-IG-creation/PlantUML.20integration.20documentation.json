[
    {
        "content": "<p>Is there documentation for the PlantUML integration with the IG Publisher? I didn't see anything at <a href=\"https://confluence.hl7.org/display/FHIR/IG+Publisher+Documentation\">https://confluence.hl7.org/display/FHIR/IG+Publisher+Documentation</a> or elsewhere on Confluence.</p>\n<p>I'm looking for a resource that describes how to get PlantUML to run locally (I believe you need to install <code>graphviz</code>...not sure if there are other dependencies), where to put the UML files, etc.</p>\n<p>If this doesn't exist I can take a pass at writing it...just want to make sure I'm not duplicating effort first.</p>",
        "id": 254371069,
        "sender_full_name": "Max Masnick",
        "timestamp": 1632318951
    },
    {
        "content": "<p>This came up yesterday in an out-of-band discussion with <span class=\"user-mention\" data-user-id=\"233081\">@Carl Anderson</span> and <span class=\"user-mention\" data-user-id=\"191401\">@Eric Haas</span>  -- we didn't find anything on confluence.</p>",
        "id": 254371626,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1632319119
    },
    {
        "content": "<p>I'm interested in helping with this effort, too</p>",
        "id": 254371796,
        "sender_full_name": "Carl Anderson",
        "timestamp": 1632319176
    },
    {
        "content": "<p>Hi Max, I just ran through a test (yesterday), this worked locally for a FSH-based IG (subscriptions backport):</p>\n<ul>\n<li><del>Install PlantUML: <code>gem install jekyll-plantuml</code> (after Jekyll is already installed)</del></li>\n<li>Create the <code>&lt;root&gt;/input/images-source</code> directory</li>\n<li>Add a new file: <code>&lt;root&gt;/input/images-source/diagram.plantuml</code></li>\n<li>In a markdown file (in <code>/input/pages</code>), insert the result file: <code>{%include diagram.svg%}</code></li>\n</ul>\n<p>After running <code>_genonce.bat</code> everything looks right, except for an extra line of XML that I need to track down.</p>",
        "id": 254372074,
        "sender_full_name": "Gino Canessa",
        "timestamp": 1632319240
    },
    {
        "content": "<p>Hmm, does this work in the auto build environment? And if not... (how) are IGs using it in real life? I ask because our <a href=\"https://github.com/FHIR/auto-ig-builder/blob/master/images/ig-build/Dockerfile\">docker config</a>  doesn't appear to install <code>jekyll-plantuml</code>, but maybe it's pulled in from elsewhere.</p>",
        "id": 254373104,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1632319579
    },
    {
        "content": "<p>When I set this up in docker, I just had to <code>apt-get install graphviz</code> and it worked. I assume I did some homebrew thing to get <code>graphviz</code> on my local system. No idea how to do this on Windows</p>",
        "id": 254373677,
        "sender_full_name": "Max Masnick",
        "timestamp": 1632319782
    },
    {
        "content": "<p>No idea - didn't get that far  =).  Unfortunately, I don't remember which IGs I looked at to figure out the steps to see if they have CI builds.</p>",
        "id": 254373806,
        "sender_full_name": "Gino Canessa",
        "timestamp": 1632319815
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"222054\">@Gino Canessa</span> what happens if you don't install <code>jekyll-plantuml</code>?</p>",
        "id": 254373954,
        "sender_full_name": "Max Masnick",
        "timestamp": 1632319872
    },
    {
        "content": "<p>Cool Max -- <span class=\"user-mention\" data-user-id=\"192166\">@Jean Duteau</span> <a href=\"https://github.com/FHIR/auto-ig-builder/commit/f7ad86c449345095b6b75adcadcd81675e7b49a8\">gave us graphviz</a> in the auto-build env back in Feb, so that must be why :-)</p>",
        "id": 254374080,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1632319914
    },
    {
        "content": "<p>I was testing on Windows, so that process worked there.<br>\nI didn't actually test without installing it, one sec.</p>",
        "id": 254374149,
        "sender_full_name": "Gino Canessa",
        "timestamp": 1632319930
    },
    {
        "content": "<p>I don't think the Jekyll plugin is actually necessary for the integration I was thinking of -- the IG Publisher handles the conversion of <code>.plantuml</code> to <code>.svg</code>, and all Jekyll does is include the <code>.svg</code> with its generic support for including files in other files.</p>",
        "id": 254374500,
        "sender_full_name": "Max Masnick",
        "timestamp": 1632320060
    },
    {
        "content": "<p>Yep - it actually isn't necessary.  Still has the extra XML literal above the SVG though (<code>&lt;?xml version=”1.0” encoding=”UTF-8” standalone=”no”?&gt;</code>).<br>\nThis is on windows without graphviz.</p>\n<p>(edit: as a note, I initially installed it due to following steps I found <em>somewhere</em>... would have to go back and try to figure out where)</p>",
        "id": 254375001,
        "sender_full_name": "Gino Canessa",
        "timestamp": 1632320262
    },
    {
        "content": "<p>Yes, the XML declaration is on my list of things to fix.  But no installation necessary.  Agree that we need to add the documentation of the 'how'.</p>",
        "id": 254386531,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1632324552
    },
    {
        "content": "<p>YOu can get rid of the XML declaration by putting &lt;div&gt;&lt;/div&gt; tags around the include line</p>",
        "id": 254394334,
        "sender_full_name": "David Pyke",
        "timestamp": 1632327395
    },
    {
        "content": "<p>PlantUML does not require graphviz for all diagram types</p>",
        "id": 254423650,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1632338682
    },
    {
        "content": "<p>For sequence diagrams for example</p>",
        "id": 254423688,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1632338697
    },
    {
        "content": "<p>I don't know if there are still issues with needing graphviz, but PlantUML also has another trick to avoid it</p>",
        "id": 254423820,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1632338745
    },
    {
        "content": "<p>There is a directive that uses its own rendering engine (called smetana) instead of graphviz</p>",
        "id": 254424204,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1632338884
    },
    {
        "content": "<p>Here's an example of that :<br>\n<a href=\"https://github.com/openhie/case-reporting-hiv-vn/blob/main/input/images-source/actors_transactions.plantuml\">https://github.com/openhie/case-reporting-hiv-vn/blob/main/input/images-source/actors_transactions.plantuml</a></p>",
        "id": 254424239,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1632338901
    },
    {
        "content": "<p>Another trick: after the image it may be best to add &lt;br clear=\"all\"&gt; otherwise the text may be wrapped around the diagram</p>",
        "id": 254425137,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1632339226
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"322501\">@Max Masnick</span> I use the vscode extension for PlantUML. Alt+D and I get my diagram preview</p>",
        "id": 254425344,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1632339294
    },
    {
        "content": "<p>On the extra XML: <a href=\"https://forum.plantuml.net/12443/remove-xml-declaration-from-svg?show=12443#q12443\">https://forum.plantuml.net/12443/remove-xml-declaration-from-svg?show=12443#q12443</a></p>",
        "id": 254425710,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1632339422
    },
    {
        "content": "<p>I don't know what is the current plantuml version we're using, perhaps we should update</p>",
        "id": 254426364,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1632339689
    },
    {
        "content": "<p>(apologies for only catching up late) <br>\nJekyll-plantuml is not needed IMO.</p>",
        "id": 254426960,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1632339922
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191469\">@Chris Moesel</span> I have the images-source in the empty templates I always use. Does sushi --init also create this folder?</p>",
        "id": 254427168,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1632340015
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> is this on sample-ig or ig-guidance?</p>",
        "id": 254427826,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1632340261
    },
    {
        "content": "<p>(the examples and how-to, I mean)</p>",
        "id": 254427853,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1632340275
    },
    {
        "content": "<p>Examples in sample-ig and explanation of how-to in ig-guidance</p>",
        "id": 254427905,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1632340298
    },
    {
        "content": "<p>Hmmmm... What if I had a cool idea of using a few PlantUML diagrams to describe the how?</p>",
        "id": 254428068,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1632340353
    },
    {
        "content": "<p>Then this how-to would also use examples. I'll do this on guidance IG</p>",
        "id": 254428409,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1632340489
    },
    {
        "content": "<p>At the moment, I'll happily settle for documentation <em>somewhere</em> :)</p>",
        "id": 254429037,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1632340725
    },
    {
        "content": "<p>:)</p>",
        "id": 254432667,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1632342086
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191832\">Jose Costa Teixeira</span> <a href=\"#narrow/stream/179252-IG-creation/topic/PlantUML.20integration.20documentation/near/254427168\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"191469\">Chris Moesel</span> I have the images-source in the empty templates I always use. Does sushi --init also create this folder?</p>\n</blockquote>\n<p>Nope.  <code>sushi --init</code> only creates <code>input/fsh</code> and <code>input/pagecontent</code>.  Authors need to add the other folders themselves if they want them.</p>",
        "id": 254434095,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1632342668
    },
    {
        "content": "<p>I created this page to start. Please provide feedback before the PR with the Guidance-ig<br>\n<a href=\"http://build.fhir.org/ig/FHIR/ig-guidance/branches/plantuml/diagrams.html\">http://build.fhir.org/ig/FHIR/ig-guidance/branches/plantuml/diagrams.html</a></p>",
        "id": 254821060,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1632558569
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span>, <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> please merge or let me know if I should create the PR</p>",
        "id": 254821118,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1632558609
    },
    {
        "content": "<p>(deleted)</p>",
        "id": 254821134,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1632558621
    },
    {
        "content": "<p><a href=\"https://github.com/FHIR/ig-guidance/pull/15\">https://github.com/FHIR/ig-guidance/pull/15</a></p>",
        "id": 255475704,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1632950066
    }
]