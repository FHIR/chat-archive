[
    {
        "content": "<p>There seems to be a minor issue with the site.data.fhir.path variable ... or at least how it is used. Eg. my template (which I can imagine does not differ from most other IG templates regarding structuredefinitions) the line </p>\n<div class=\"codehilite\"><pre><span></span>&lt;a href=&quot;{{site.data.fhir.path}}profiling.html#representation&quot;&gt;Description of Profiles, Differentials,\n                Snapshots, and how the XML and JSON presentations work&lt;/a&gt;.\n</pre></div>\n\n\n<p>gets resolved to (when running locally) <a href=\"http://localhost:4000/hl7.org/fhir/STU3/profiling.html#representation\" target=\"_blank\" title=\"http://localhost:4000/hl7.org/fhir/STU3/profiling.html#representation\">http://localhost:4000/hl7.org/fhir/STU3/profiling.html#representation</a> which is not really working - and I guess its not the intention that it should work that way - ... or is it? Also, the link to the '?' icon (help16.png) on the summary tables does not resolve. When it should have been looking locally, it instead looks at <a href=\"http://localhost:4000/http:/hl7.org/fhir/STU3/help16.png\" target=\"_blank\" title=\"http://localhost:4000/http:/hl7.org/fhir/STU3/help16.png\">http://localhost:4000/http:/hl7.org/fhir/STU3/help16.png</a> ... which really does not make sense</p>\n<div class=\"message_inline_image\"><a href=\"http://localhost:4000/http:/hl7.org/fhir/STU3/help16.png\" target=\"_blank\" title=\"http://localhost:4000/http:/hl7.org/fhir/STU3/help16.png\"><img src=\"https://uploads.zulipusercontent.net/ea8f72d3f2a1d1f975a0fa2615a7db48ef50e7ef/687474703a2f2f6c6f63616c686f73743a343030302f687474703a2f686c372e6f72672f666869722f535455332f68656c7031362e706e67\"></a></div><p>Am I doing something wrong here, or is there room for improvement?</p>",
        "id": 158452679,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1550073838
    },
    {
        "content": "<p>here are all the Jekyll site variables implemented;  <a href=\"https://healthedata1.github.io/IG-Template2/index.html#variables\" target=\"_blank\" title=\"https://healthedata1.github.io/IG-Template2/index.html#variables\">https://healthedata1.github.io/IG-Template2/index.html#variables</a></p>",
        "id": 158456975,
        "sender_full_name": "Eric Haas",
        "timestamp": 1550077022
    },
    {
        "content": "<p>locally I get:  </p>\n<div class=\"codehilite\"><pre><span></span>path : path to the main FHIR specification (defined in ig.json)- {{site.data.fhir.path}} = http://hl7.org/fhir/STU3/\n</pre></div>",
        "id": 158457318,
        "sender_full_name": "Eric Haas",
        "timestamp": 1550077234
    },
    {
        "content": "<p>it is defined in the  ig.json file as path.specification here:</p>\n<div class=\"codehilite\"><pre><span></span>...\n&quot;paths&quot;: {\n    &quot;output&quot;: &quot;docs&quot;,\n    &quot;specification&quot;: &quot;http://hl7.org/fhir/STU3&quot;,\n    &quot;qa&quot;: &quot;generated_output/qa&quot;,\n...\n</pre></div>",
        "id": 158457545,
        "sender_full_name": "Eric Haas",
        "timestamp": 1550077382
    },
    {
        "content": "<p>I don't run Jekyll on a localhost so I don't know how it behaves.   I have issue with some pngs in the past as well - I don't understand that part very well</p>",
        "id": 158458138,
        "sender_full_name": "Eric Haas",
        "timestamp": 1550077787
    },
    {
        "content": "<p>I've got <code>specification</code> set to http:/hl7.org/fhir/STU3 ... yet {{site.data.fhir.path}} still resolves to localhost</p>",
        "id": 158458490,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1550078023
    },
    {
        "content": "<p>Since Jekyll builds a set of static pages they all use a static  base path path  e.g. locally is my <code>file:///Users/ehaas/Documents/FHIR/IG-template2/docs/</code></p>\n<p>and on the web when using git pages its... '<code>https://healthedata1.github.io/[repo]/1</code></p>",
        "id": 158459165,
        "sender_full_name": "Eric Haas",
        "timestamp": 1550078486
    },
    {
        "content": "<p>I remember some discussions on SO re using Jekyll on localhost and having to resolve the base path... is a pain in the a**</p>",
        "id": 158459249,
        "sender_full_name": "Eric Haas",
        "timestamp": 1550078544
    },
    {
        "content": "<p><a href=\"https://stackoverflow.com/questions/27386169/change-site-url-to-localhost-during-jekyll-local-development\" target=\"_blank\" title=\"https://stackoverflow.com/questions/27386169/change-site-url-to-localhost-during-jekyll-local-development\">https://stackoverflow.com/questions/27386169/change-site-url-to-localhost-during-jekyll-local-development</a></p>",
        "id": 158459283,
        "sender_full_name": "Eric Haas",
        "timestamp": 1550078574
    },
    {
        "content": "<p>Regarding the serving: I use both jekyll and python for serving the files ... same result ... - this bug is happening during generation.</p>",
        "id": 158459465,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1550078719
    },
    {
        "content": "<p>I expected that site.data.fhir.path was mapping to the site set in specification</p>",
        "id": 158459543,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1550078768
    },
    {
        "content": "<p>as stated in the doc</p>",
        "id": 158459551,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1550078773
    },
    {
        "content": "<p>thats weird ... <br>\n<code>&lt;a href=\" {{ site.data.fhir.path }}/profiling.html#representation\"&gt;{{ site.data.fhir.path }}Description of Profiles, Differentials,\n                Snapshots, and how the XML and JSON presentations work&lt;/a&gt;.</code><br>\nends up being </p>\n<div class=\"codehilite\"><pre><span></span>http:/hl7.org/fhir/STU3/Description of Profiles, Differentials, Snapshots, and how the XML and JSON presentations work.\n</pre></div>",
        "id": 158459908,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1550079058
    },
    {
        "content": "<p>but the link is <a href=\"http://localhost:4000/hl7.org/fhir/STU3//profiling.html#representation\" target=\"_blank\" title=\"http://localhost:4000/hl7.org/fhir/STU3//profiling.html#representation\">http://localhost:4000/hl7.org/fhir/STU3//profiling.html#representation</a></p>",
        "id": 158459934,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1550079086
    },
    {
        "content": "<p>it is setting it up correctly...</p>\n<p>baseurl = <a href=\"http://localhost:4000/\" target=\"_blank\" title=\"http://localhost:4000/\">http://localhost:4000/</a>  site.data.fhir.path = <strong>hl7.org/fhir/STU3/</strong> local path =profiling.html#representation</p>",
        "id": 158459944,
        "sender_full_name": "Eric Haas",
        "timestamp": 1550079094
    },
    {
        "content": "<p>your baseurl is shifting .  the ig is expecting it to be /</p>",
        "id": 158460015,
        "sender_full_name": "Eric Haas",
        "timestamp": 1550079129
    },
    {
        "content": "<p>see the SO discussion.  I could never figure this out btw</p>",
        "id": 158460044,
        "sender_full_name": "Eric Haas",
        "timestamp": 1550079174
    },
    {
        "content": "<p>site.data.fhir.path is an absolute url</p>",
        "id": 158460195,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1550079315
    },
    {
        "content": "<p>it aint relative</p>",
        "id": 158460208,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1550079323
    },
    {
        "content": "<p>regardless of where the site it built, it should stay the same</p>",
        "id": 158460222,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1550079349
    },
    {
        "content": "<p>I don't think that is how Jekyll works.</p>",
        "id": 158461628,
        "sender_full_name": "Eric Haas",
        "timestamp": 1550080437
    },
    {
        "content": "<p>variable substitution  .... thats all im asking ... and jekyll can do that</p>",
        "id": 158461761,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1550080530
    },
    {
        "content": "<p>maybe this will help... <a href=\"https://byparker.com/blog/2014/clearing-up-confusion-around-baseurl/\" target=\"_blank\" title=\"https://byparker.com/blog/2014/clearing-up-confusion-around-baseurl/\">https://byparker.com/blog/2014/clearing-up-confusion-around-baseurl/</a></p>",
        "id": 158461880,
        "sender_full_name": "Eric Haas",
        "timestamp": 1550080628
    },
    {
        "content": "<p>I'm not confused about siteurl or baseurl ... Im just expecting simple variable substitution</p>",
        "id": 158462574,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1550081117
    },
    {
        "content": "<p>and the 'specification' is just set as a variable, right? and it should be resolveable under site.data.fhir.path</p>",
        "id": 158462597,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1550081136
    },
    {
        "content": "<p>yes</p>",
        "id": 158466555,
        "sender_full_name": "Eric Haas",
        "timestamp": 1550083915
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191315\">@Josh Mandel</span>  do you understand this issue and whether is a Jekyll thing or specific to ig-pub?</p>",
        "id": 158466643,
        "sender_full_name": "Eric Haas",
        "timestamp": 1550083956
    },
    {
        "content": "<p>And it is only a problem when injecting into link places .... eg. hrefs</p>",
        "id": 158479773,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1550094160
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span></p>",
        "id": 158511846,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1550132968
    },
    {
        "content": "<p>I've also found that when adding eg.  ![alt text](data/kitten.jpg) to the description field in a structuredef, the link that is inserted is <a href=\"http://localhost:4000/http:/hl7.org/fhir/STU3/data/kitten.jpg\" target=\"_blank\" title=\"http://localhost:4000/http:/hl7.org/fhir/STU3/data/kitten.jpg\">http://localhost:4000/http:/hl7.org/fhir/STU3/data/kitten.jpg</a>  - where it should have resolved to localhost:4000/data/kitten.jpg</p>\n<div class=\"message_inline_image\"><a href=\"http://localhost:4000/http:/hl7.org/fhir/STU3/data/kitten.jpg\" target=\"_blank\" title=\"http://localhost:4000/http:/hl7.org/fhir/STU3/data/kitten.jpg\"><img src=\"https://uploads.zulipusercontent.net/b50bc2fe684bab398c154f030ed7c6096a44fbf3/687474703a2f2f6c6f63616c686f73743a343030302f687474703a2f686c372e6f72672f666869722f535455332f646174612f6b697474656e2e6a7067\"></a></div>",
        "id": 158515167,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1550136492
    },
    {
        "content": "<blockquote>\n<p>I guess its not the intention that it should work that way - ... or is it? </p>\n</blockquote>\n<p>I'm not sure what <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span>'s intention was, assuming this <code>site.data.fhir</code> object is defined as part of the standard template?</p>",
        "id": 158521226,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1550142822
    },
    {
        "content": "<p>It's being set in temp/pages/_data/fhir.json.  What's appearing there?</p>",
        "id": 158535632,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1550156653
    },
    {
        "content": "<div class=\"codehilite\"><pre><span></span>{\n  &quot;path&quot;: &quot;http:/hl7.org/fhir/STU3/&quot;,\n  &quot;canonical&quot;: &quot;http://trifork.dk/fhir&quot;,\n  &quot;igId&quot;: &quot;dk-tm&quot;,\n  &quot;igName&quot;: &quot;eHealth Infrastructure&quot;,\n  &quot;igVer&quot;: &quot;0.6.0&quot;,\n  &quot;errorCount&quot;: 256,\n  &quot;version&quot;: &quot;3.0.1&quot;,\n  &quot;revision&quot;: &quot;11917&quot;,\n  &quot;versionFull&quot;: &quot;3.0.1-11917&quot;,\n  &quot;toolingVersion&quot;: &quot;4.0.0&quot;,\n  &quot;toolingRevision&quot;: &quot;3&quot;,\n  &quot;toolingVersionFull&quot;: &quot;4.0.0 (3)&quot;,\n  &quot;totalFiles&quot;: 61,\n  &quot;processedFiles&quot;: 145,\n  &quot;genDate&quot;: &quot;Thu, Feb 14, 2019 17:04+0100&quot;,\n  &quot;ig&quot;: {\n    &quot;id&quot;: &quot;dk-tm&quot;,\n    &quot;name&quot;: &quot;eHealth Infrastructure&quot;,\n    &quot;url&quot;: &quot;http://trifork.dk/fhir/ImplementationGuide/dk-tm&quot;,\n    &quot;version&quot;: &quot;0.6.0&quot;,\n    &quot;status&quot;: &quot;draft&quot;,\n    &quot;experimental&quot;: true,\n    &quot;publisher&quot;: &quot;Systematic | Trifork&quot;,\n    &quot;contact&quot;: [\n      {\n        &quot;telecom&quot;: [\n          &quot;http://ehealth.sundhed.dk&quot;\n        ]\n      }\n    ],\n    &quot;description&quot;: &quot;The Danish eHealth Infrastructure Implementation Guide defines a set of FHIR profiles with extensions and bindings needed to create interoperable, quality-focused applications.&quot;,\n    &quot;fhirVersion&quot;: &quot;3.0.1&quot;\n  }\n}\n</pre></div>",
        "id": 158541238,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1550160393
    },
    {
        "content": "<p>Then {{site.data.fhir.path}} should always be evaluating to \"http:/hl7.org/fhir/STU3/\".  If it's not, that's some weird Jekyll thing.  (Though I'll note that the URL is wrong - should be two slashes after the http.)</p>",
        "id": 158541774,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1550160885
    },
    {
        "content": "<p>That single '/' could be the cause of many issues</p>",
        "id": 158541838,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1550160946
    },
    {
        "content": "<p>If jekyll reverts that to '/' and remove the http part because the protocol stuff is wrong - that would explain the relative links that looks like localhost:9000/hl7.org/fhir/stu3 ....</p>",
        "id": 158541936,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1550161011
    },
    {
        "content": "<p>hmmm .... so guess who's the fool now ... It was stated like that in the ig.json ...</p>",
        "id": 158542129,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1550161198
    },
    {
        "content": "<p>ahem ....</p>",
        "id": 158542174,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1550161203
    },
    {
        "content": "<p>sry</p>",
        "id": 158542176,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1550161204
    },
    {
        "content": "<p>everything seems to work like a charm :)</p>",
        "id": 158542239,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1550161261
    }
]