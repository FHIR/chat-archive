[
    {
        "content": "<p>I'm working on updates for the <a href=\"http://build.fhir.org/ig/HL7/livd/\">LIVD IG</a> and ran into something today that seems a bit concerning and problematic.  The IG has a <a href=\"http://build.fhir.org/ig/HL7/livd/StructureDefinition-codesystem-loinc-frag-uv-livd.html\">profile</a> on CodeSystem for the specific LOINC fragment that is used for the LIVD catalog instance.  The profile was constraining out (0..0) the 'contact' and 'jurisdiction' elements (you can question if that's a good idea, but that's another discussion - and for the moment those two constraints have been temporarily removed).  With those two constraints in place I was getting two build errors for the CodeSystem instance which said that the element was a max of '0' but '1' was present.  And it turns out that apparently IG Publisher (1.1.51) is altering what is in the source file for the resource instance and adding elements for 'date', 'contact' and 'jurisdiction', and it even overrides the existing 'publisher' information in the source and replaces it with the HL7 Work Group.  That doesn't seem like very desirable behavior generally, or at least it would be something that should be possible to disable (maybe there is a way to do that?).  The relevant content in the source file (input/vocabulary/codesystem-loinc-fragment-livd.json) is:  </p>\n<div class=\"codehilite\"><pre><span></span><code>    &quot;status&quot;: &quot;active&quot;,\n    &quot;publisher&quot;: &quot;Regenstrief Institute, Inc.&quot;,\n    &quot;copyright&quot;: &quot;This content from LOINC® is copyright © 1995 Regenstrief Institute, Inc. and the LOINC Committee, and available at no cost under the license at http://loinc.org/terms-of-use&quot;,\n</code></pre></div>\n<p>And the content in the generated output file (output/CodeSystem-loinc-fragment-livd.json) is: </p>\n<div class=\"codehilite\"><pre><span></span><code>  &quot;status&quot;: &quot;active&quot;,\n  &quot;date&quot;: &quot;2020-12-10T14:09:35-06:00&quot;,\n  &quot;publisher&quot;: &quot;HL7 International - Orders and Observations Work Group&quot;,\n  &quot;contact&quot;: [\n    {\n      &quot;telecom&quot;: [\n        {\n          &quot;system&quot;: &quot;url&quot;,\n          &quot;value&quot;: &quot;http://hl7.org/Special/committees/orders/index.cfm&quot;\n        }\n      ]\n    }\n  ],\n  &quot;jurisdiction&quot;: [\n    {\n      &quot;coding&quot;: [\n        {\n          &quot;system&quot;: &quot;http://unstats.un.org/unsd/methods/m49/m49.htm&quot;,\n          &quot;code&quot;: &quot;001&quot;\n        }\n      ]\n    }\n  ],\n  &quot;copyright&quot;: &quot;This content from LOINC® is copyright © 1995 Regenstrief Institute, Inc. and the LOINC Committee, and available at no cost under the license at http://loinc.org/terms-of-use&quot;,\n</code></pre></div>\n<p>As I said, for now to avoid the build errors I've (at least temporarily) relaxed the constraints on 'contact' and 'jurisdiction'.  But the correct publisher should remain as it was originally specified as \"Regenstrief Institute, Inc.\" - and I don't know how to fix that at the moment.  Does anyone know if it is possible to disable this unrequested and unwanted overriding and adding behavior?  Or get this fixed in the publisher?</p>",
        "id": 219549943,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1607644129
    },
    {
        "content": "<p>I believe this is coming from your IG resource.</p>",
        "id": 219550077,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1607644233
    },
    {
        "content": "<p>I agree that's where the data comes from.  But I don't think this is something that you can control anywhere in the IG resource (if that's not the case I would be happy to hear that)?  And I'm certain that I can't leave out the contact and jurisdiction data from the IG (nor would I want to).  I just don't want it to be automatically propagated where it isn't wanted and appropriate.</p>",
        "id": 219550359,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1607644487
    },
    {
        "content": "<p>it only happens if the IG asks for it to happen</p>",
        "id": 219552065,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1607645895
    },
    {
        "content": "<p>see apply-* in <a href=\"https://confluence.hl7.org/display/FHIR/Implementation+Guide+Parameters\">https://confluence.hl7.org/display/FHIR/Implementation+Guide+Parameters</a></p>",
        "id": 219552121,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1607645953
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191405\">@Rob Hausam</span> think this might be the same issue: <a href=\"#narrow/stream/179252-IG-creation/topic/IG.20Publisher.20stripping.20extensions.3F\">https://chat.fhir.org/#narrow/stream/179252-IG-creation/topic/IG.20Publisher.20stripping.20extensions.3F</a></p>",
        "id": 219554113,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1607647640
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span>  That's more parameters that I hadn't paid attention to or had any need to before - so that's good to know.  But I can't quite resist saying that it doesn't seem to apply in this case. :)  Because there isn't a single instance of and 'apply-*' parameter in our IG resource, yet we're seeing this behavior.  But I will try and see what happens when I set the parameter(s) to false.</p>",
        "id": 219554787,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1607648193
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191918\">@Sarah Gaunt</span> Yes, it seems to be the same issue.  Thanks.</p>",
        "id": 219554923,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1607648339
    },
    {
        "content": "<p>Problem is - once I set that parameter in the IG, I then had to go and manually add the jurisdiction to every profile in the IG. Well, not a problem really, just a pain.</p>",
        "id": 219555032,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1607648420
    },
    {
        "content": "<p>Yes, I had to add it to some of the profiles, too.  But setting the 'apply-*' parameters to 'false' (I did that for all of them) did solve the issue that I was having.</p>",
        "id": 219560378,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1607655103
    }
]