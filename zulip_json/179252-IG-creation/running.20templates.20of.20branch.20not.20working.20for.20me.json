[
    {
        "content": "<p>When I run the templates of a fork it works:</p>\n<p>e.g.:  my bash script updates the ig.ini as follows</p>\n<div class=\"codehilite\"><pre><span></span>$ bash publish.sh -u https://github.com/Healthedata1/ig-template-base\n\n###### ig.ini fil ######\n[IG]\nig = input/myig.xml\ntemplate = https://github.com/Healthedata1/ig-template-base\nusage-stats-opt-out = false\n</pre></div>\n\n\n<p>but when I run a branch this happens:</p>\n<div class=\"codehilite\"><pre><span></span>$ bash publish.sh -u https://github.com/Healthedata1/ig-template-base/tree/add-copy-button\n\n###### ig.ini fil ######\n[IG]\nig = input/myig.xml\ntemplate = https://github.com/Healthedata1/ig-template-base/tree/add-copy-button\nusage-stats-opt-out = false\n\n...\nLoad Template from https://github.com/Healthedata1/ig-template-base/tree/add-copy-button (00:03.0666)\nPublishing Content Failed: Error loading template https://github.com/Healthedata1/ig-template-base/tree/add-copy-button: https://github.com/Healthedata1/ig-template-base/tree/add-copy-button/archive/master.zip (00:04.0513)\n                                                                                 (00:04.0513)\nUse -? to get command line help                                                  (00:04.0514)\n                                                                                 (00:04.0514)\nStack Dump (for debugging):                                                      (00:04.0515)\norg.hl7.fhir.exceptions.FHIRException: Error loading template https://github.com/Healthedata1/ig-template-base/tree/add-copy-button: https://github.com/Healthedata1/ig-template-base/tree/add-copy-button/archive/master.zip\n    at org.hl7.fhir.igtools.templates.TemplateManager.loadPackage(TemplateManager.java:258)\n    at org.hl7.fhir.igtools.templates.TemplateManager.installTemplate(TemplateManager.java:91)\n    at org.hl7.fhir.igtools.templates.TemplateManager.loadTemplate(TemplateManager.java:77)\n    at org.hl7.fhir.igtools.publisher.Publisher.initializeFromIg(Publisher.java:1264)\n    at org.hl7.fhir.igtools.publisher.Publisher.initialize(Publisher.java:1206)\n    at org.hl7.fhir.igtools.publisher.Publisher.execute(Publisher.java:661)\n    at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:6934)\nCaused by: java.io.FileNotFoundException: https://github.com/Healthedata1/ig-template-base/tree/add-copy-button/archive/master.zip\n    at java.base/sun.net.www.protocol.http.HttpURLConnection.getInputStream0(HttpURLConnection.java:1909)\n    at java.base/sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1509)\n    at java.base/sun.net.www.protocol.https.HttpsURLConnectionImpl.getInputStream(HttpsURLConnectionImpl.java:245)\n    at org.hl7.fhir.igtools.templates.TemplateManager.loadPackage(TemplateManager.java:253)\n    ... 6 more\n</pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span>\n</pre></div>",
        "id": 188948604,
        "sender_full_name": "Eric Haas",
        "timestamp": 1582566313
    },
    {
        "content": "<p>the branch works locally: <code> $ bash publish.sh -u /Users/ehaas/Documents/FHIR/ig-template-base</code>  just not when upload to github.</p>",
        "id": 188948769,
        "sender_full_name": "Eric Haas",
        "timestamp": 1582566434
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191315\">@Josh Mandel</span> This sounds like something about how files are organized when building branches in the CI build environment.  Any thoughts?</p>",
        "id": 188953552,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1582569961
    },
    {
        "content": "<p>Is the error Eric's showing here something that happens in the CI build? It appears to be something Eric is running locally. I don't know what's happening here -- something is trying to download a zip file from github?</p>\n<blockquote>\n<p>Caused by: java.io.FileNotFoundException: <a href=\"https://github.com/Healthedata1/ig-template-base/tree/add-copy-button/archive/master.zip\" target=\"_blank\" title=\"https://github.com/Healthedata1/ig-template-base/tree/add-copy-button/archive/master.zip\">https://github.com/Healthedata1/ig-template-base/tree/add-copy-button/archive/master.zip</a></p>\n</blockquote>",
        "id": 188953817,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1582570116
    },
    {
        "content": "<p>Ah, you're right.  That's a weird Github thing, not CI build.  Eric - why are you building on Github and not using the CI build?  General expectation is you should always be committing and having content publish in the CI build...</p>",
        "id": 188959706,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1582574003
    },
    {
        "content": "<p>it seems as GitHub doesn't allow clients to download a zip for the branch \\</p>",
        "id": 188961252,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1582575007
    },
    {
        "content": "<p>running locally should not make a difference, but doesn't work with autobuild either. </p>\n<p>see <a href=\"http://build.fhir.org/ig/Healthedata1/sample-ig/branches/add-copy-me/failure/build.log\" target=\"_blank\" title=\"http://build.fhir.org/ig/Healthedata1/sample-ig/branches/add-copy-me/failure/build.log\">http://build.fhir.org/ig/Healthedata1/sample-ig/branches/add-copy-me/failure/build.log</a></p>",
        "id": 188961304,
        "sender_full_name": "Eric Haas",
        "timestamp": 1582575063
    },
    {
        "content": "<p>this would bei a nice feature to share new features on branch before merging.</p>",
        "id": 188961432,
        "sender_full_name": "Eric Haas",
        "timestamp": 1582575139
    },
    {
        "content": "<p>I've figured it out. SHould work in the next version</p>",
        "id": 188961977,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1582575580
    },
    {
        "content": "<p>ty</p>",
        "id": 188962129,
        "sender_full_name": "Eric Haas",
        "timestamp": 1582575699
    }
]