[
    {
        "content": "<p>Looks like IG Publisher 1.1.71 isn't working? Crashing for all IGs since it was released. <span class=\"user-mention\" data-user-id=\"248736\">@Mark Iantorno</span></p>",
        "id": 238826452,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1621024763
    },
    {
        "content": "<p>Common failure is:<br>\nException in thread \"main\" java.lang.Error: This needs to be checked for profile path<br>\n    at org.hl7.fhir.igtools.publisher.Publisher.fixSearchForm(Publisher.java:5190)<br>\n    at org.hl7.fhir.igtools.publisher.Publisher.generate(Publisher.java:5059)<br>\n    at org.hl7.fhir.igtools.publisher.Publisher.createIg(Publisher.java:901)<br>\n    at org.hl7.fhir.igtools.publisher.Publisher.execute(Publisher.java:745)<br>\n    at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:8577)</p>",
        "id": 238827587,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1621025293
    },
    {
        "content": "<p>Also <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span></p>",
        "id": 238827600,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1621025301
    },
    {
        "content": "<p>And verified that 1.1.68 works against the same IG that Sarah is having problems with.</p>",
        "id": 238828321,
        "sender_full_name": "Rick Geimer",
        "timestamp": 1621025710
    },
    {
        "content": "<p>yes it's a piece of debugging that slipped in. I failed to commit it before <span class=\"user-mention\" data-user-id=\"248736\">@Mark Iantorno</span>  released. Doing another release now</p>",
        "id": 238829089,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1621026075
    },
    {
        "content": "<p>Thanks!</p>",
        "id": 238830041,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1621026491
    },
    {
        "content": "<p>There seems to be a problem yet...</p>\n<div class=\"codehilite\"><pre><span></span><code>C:\\Users\\johnm\\Git\\us-odh&gt;_updatePublisher\n\nChecking internet connection...\nReply from 104.196.166.17: bytes=32 time=57ms TTL=118\nWe&#39;re online\n\nIG Publisher FOUND in input-cache\nOverwrite &quot;C:\\Users\\johnm\\Git\\us-odh\\input-cache\\publisher.jar&quot;? (Y/N) y\nDownloading most recent publisher to Input Cache - it&#39;s ~100 MB, so this may take a bit\nAt line:1 char:1\n+ if (&#39;System.Net.WebClient&#39; -as [type]) {(new-object System.Net.WebCli ...\n+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\nThis script contains malicious content and has been blocked by your antivirus software.\n    + CategoryInfo          : ParserError: (:) [], ParentContainsErrorRecordException\n    + FullyQualifiedErrorId : ScriptContainedMaliciousContent\n</code></pre></div>",
        "id": 238974243,
        "sender_full_name": "John Moehrke",
        "timestamp": 1621168684
    },
    {
        "content": "<p>I don't know how a new publisher version would trigger this. This is your antivirus complaining that it doesn't want to download the publisher</p>",
        "id": 238978221,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1621171374
    },
    {
        "content": "<p>was there any change to your system <span class=\"user-mention\" data-user-id=\"191404\">@John Moehrke</span> ?</p>",
        "id": 238978244,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1621171393
    },
    {
        "content": "<p>not that I know of, but it is as you point out antivirus... which likely updates constantly.</p>",
        "id": 238978753,
        "sender_full_name": "John Moehrke",
        "timestamp": 1621171731
    },
    {
        "content": "<p>my other machine is not complaining</p>",
        "id": 238978804,
        "sender_full_name": "John Moehrke",
        "timestamp": 1621171782
    },
    {
        "content": "<p>I can do the copy manually. just wanted to record this in case there was something odd going on</p>",
        "id": 238978899,
        "sender_full_name": "John Moehrke",
        "timestamp": 1621171832
    },
    {
        "content": "<p>note that both machines are windows 10 and both using microsoft defender. So, no idea why one machine is happy and the other is not.</p>",
        "id": 238978979,
        "sender_full_name": "John Moehrke",
        "timestamp": 1621171901
    },
    {
        "content": "<p>im doing a deep Defender scan on the machine that was not unhappy</p>",
        "id": 238979033,
        "sender_full_name": "John Moehrke",
        "timestamp": 1621171935
    },
    {
        "content": "<p>as far as I can tell it doesn't like our use of powershell for this purpose. It directs me to this article<br>\n<a href=\"https://www.microsoft.com/en-us/wdsi/threats/malware-encyclopedia-description?name=Trojan%3aPowerShell%2fMountsi.A!ml&amp;threatid=2147726489\">https://www.microsoft.com/en-us/wdsi/threats/malware-encyclopedia-description?name=Trojan%3aPowerShell%2fMountsi.A!ml&amp;threatid=2147726489</a></p>",
        "id": 238979492,
        "sender_full_name": "John Moehrke",
        "timestamp": 1621172377
    },
    {
        "content": "<p>I think the difference is that this machine that is unhappy has \"App &amp; Browsing Controls\" turned on, but when I turn them off it still is not happy.</p>",
        "id": 238979561,
        "sender_full_name": "John Moehrke",
        "timestamp": 1621172418
    },
    {
        "content": "<p>note that the _updatePublisher.bat use of powershell to replace the .sh and .bat files works. just fails on the jar</p>",
        "id": 238980122,
        "sender_full_name": "John Moehrke",
        "timestamp": 1621172925
    },
    {
        "content": "<p>I find the QA.html output of a build, that indicates your build is old, and provides the download link; works well enough in a pinch.</p>",
        "id": 238985290,
        "sender_full_name": "John Moehrke",
        "timestamp": 1621177618
    },
    {
        "content": "<p>Yes, it's the AV that doesn't like scripts downloading other executables.</p>",
        "id": 238989703,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1621181902
    },
    {
        "content": "<p>My win10 works fine even after updates</p>",
        "id": 238989859,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1621182032
    },
    {
        "content": "<p>I got this error, not sure what is missing</p>\n<div class=\"codehilite\"><pre><span></span><code>java.lang.NullPointerException: key == null\n        at com.google.gson.internal.LinkedTreeMap.put(LinkedTreeMap.java:92)\n        at com.google.gson.JsonObject.add(JsonObject.java:61)\n        at org.hl7.fhir.igtools.publisher.Publisher.addPageDataRow(Publisher.java:6222)\n        at org.hl7.fhir.igtools.publisher.Publisher.addPageData(Publisher.java:6205)\n        at org.hl7.fhir.igtools.publisher.Publisher.addPageData(Publisher.java:6170)\n        at org.hl7.fhir.igtools.publisher.Publisher.addPageData(Publisher.java:6214)\n        at org.hl7.fhir.igtools.publisher.Publisher.addPageData(Publisher.java:6170)\n        at org.hl7.fhir.igtools.publisher.Publisher.addPageData(Publisher.java:6214)\n        at org.hl7.fhir.igtools.publisher.Publisher.addPageData(Publisher.java:6170)\n        at org.hl7.fhir.igtools.publisher.Publisher.generateSummaryOutputs(Publisher.java:5979)\n        at org.hl7.fhir.igtools.publisher.Publisher.generate(Publisher.java:5004)\n        at org.hl7.fhir.igtools.publisher.Publisher.createIg(Publisher.java:901)\n        at org.hl7.fhir.igtools.publisher.Publisher.execute(Publisher.java:745)\n        at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:8577)\nPress any key to continue . . .\n</code></pre></div>",
        "id": 239067760,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1621248745
    },
    {
        "content": "<p>Hijacking this stream for an issue with 1.1.72</p>",
        "id": 239067819,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1621248781
    },
    {
        "content": "<p>_updatePublisher worked fine today.</p>",
        "id": 239081539,
        "sender_full_name": "John Moehrke",
        "timestamp": 1621255547
    },
    {
        "content": "<p>correction... _updatePublisher works in some folders... so I guess I have a glitch in my folder.</p>",
        "id": 239083393,
        "sender_full_name": "John Moehrke",
        "timestamp": 1621256288
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"248736\">@Mark Iantorno</span></p>",
        "id": 239127229,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1621271820
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191832\">@Jose Costa Teixeira</span> - is there a place this is checked in that Mark can test with?</p>",
        "id": 239127262,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1621271835
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191832\">@Jose Costa Teixeira</span> send me what you're working with, and I'll run it in my IDE so I can debug</p>",
        "id": 239127795,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1621272060
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"248736\">@Mark Iantorno</span>  <a href=\"https://github.com/openhie/hiv-ig/tree/rework-questionnaire\">https://github.com/openhie/hiv-ig/tree/rework-questionnaire</a></p>",
        "id": 239132476,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1621274047
    },
    {
        "content": "<p><a href=\"https://github.com/openhie/hiv-ig/pull/55/checks?check_run_id=2603365047\">https://github.com/openhie/hiv-ig/pull/55/checks?check_run_id=2603365047</a></p>",
        "id": 239132484,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1621274050
    },
    {
        "content": "<p>what is the exact command you're running</p>",
        "id": 239134082,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1621274600
    },
    {
        "content": "<p>on the publisher</p>",
        "id": 239134095,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1621274607
    },
    {
        "content": "<p>I apologize for asking for so much detail, I just don't use the publisher as much</p>",
        "id": 239134295,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1621274686
    },
    {
        "content": "<p>i use the batch _genonce,</p>",
        "id": 239134551,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1621274790
    },
    {
        "content": "<p>which actually does <code>java-jar publisher.jar .</code></p>",
        "id": 239134588,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1621274812
    },
    {
        "content": "<p>so you clone the repo rework-questionnaire</p>",
        "id": 239134659,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1621274847
    },
    {
        "content": "<p>then run the publisher</p>",
        "id": 239134671,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1621274853
    },
    {
        "content": "<p>how do you point it to the cloned repo?</p>",
        "id": 239134694,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1621274864
    },
    {
        "content": "<p>or do you jsut run it from within the base folder of the repo</p>",
        "id": 239134720,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1621274873
    },
    {
        "content": "<p>i clone the branch of that repo</p>",
        "id": 239134727,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1621274876
    },
    {
        "content": "<p>i run it from the base folder</p>",
        "id": 239134792,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1621274887
    },
    {
        "content": "<p>the <code>.</code> in the command line points is the base folder</p>",
        "id": 239134879,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1621274911
    },
    {
        "content": "<p>yup, sounds good</p>",
        "id": 239134899,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1621274920
    },
    {
        "content": "<p>(sorry, i should have mentioned it)</p>",
        "id": 239134906,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1621274922
    },
    {
        "content": "<p>np, realistically, I should know</p>",
        "id": 239134931,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1621274933
    },
    {
        "content": "<p>I'm going to try reproducing your bug now</p>",
        "id": 239135019,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1621274965
    },
    {
        "content": "<p>wait</p>",
        "id": 239136199,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1621275387
    },
    {
        "content": "<p>ignore me</p>",
        "id": 239136225,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1621275396
    },
    {
        "content": "<p>nevermind</p>",
        "id": 239136267,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1621275416
    },
    {
        "content": "<p>Alright I get the same error</p>",
        "id": 239137800,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1621276057
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191832\">@Jose Costa Teixeira</span></p>",
        "id": 239140038,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1621277060
    },
    {
        "content": "<p>it's crashing because it's getting a null url passed in</p>",
        "id": 239140067,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1621277072
    },
    {
        "content": "<p>from this:</p>",
        "id": 239140075,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1621277075
    },
    {
        "content": "<div class=\"codehilite\"><pre><span></span><code>Adding key url:: null,\ntitle -&gt; Example Scenario #1 - Description,\nlabel -&gt; 13.4,\nbreadcrumb -&gt; &lt;li&gt;&lt;a href=&#39;toc.html&#39;&gt;&lt;b&gt;Table of Contents&lt;/b&gt;&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&#39;artifacts.html&#39;&gt;&lt;b&gt;Artifacts Summary&lt;/b&gt;&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;b&gt;Example Scenario #1&lt;/b&gt;&lt;/li&gt;\n</code></pre></div>",
        "id": 239140088,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1621277081
    },
    {
        "content": "<p>All the other Examples have associated URLs</p>",
        "id": 239140237,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1621277139
    },
    {
        "content": "<div class=\"codehilite\"><pre><span></span><code>Adding key url:: QuestionnaireResponse-exampleresponse.json.html,\ntitle -&gt; Example QuestionnaireResponse - JSON Representation,\nlabel -&gt; 13.3,\nbreadcrumb -&gt; &lt;li&gt;&lt;a href=&#39;toc.html&#39;&gt;&lt;b&gt;Table of Contents&lt;/b&gt;&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&#39;artifacts.html&#39;&gt;&lt;b&gt;Artifacts Summary&lt;/b&gt;&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;b&gt;Example QuestionnaireResponse&lt;/b&gt;&lt;/li&gt;\nAdding key url:: QuestionnaireResponse-exampleresponse.ttl.html,\ntitle -&gt; Example QuestionnaireResponse - TTL Representation,\nlabel -&gt; 13.3,\nbreadcrumb -&gt; &lt;li&gt;&lt;a href=&#39;toc.html&#39;&gt;&lt;b&gt;Table of Contents&lt;/b&gt;&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&#39;artifacts.html&#39;&gt;&lt;b&gt;Artifacts Summary&lt;/b&gt;&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;b&gt;Example QuestionnaireResponse&lt;/b&gt;&lt;/li&gt;\nAdding key url:: ExampleScenario-hiv-case-reporting-scenario.html,\ntitle -&gt; Example Scenario #1,\nlabel -&gt; 13.4,\nbreadcrumb -&gt; &lt;li&gt;&lt;a href=&#39;toc.html&#39;&gt;&lt;b&gt;Table of Contents&lt;/b&gt;&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&#39;artifacts.html&#39;&gt;&lt;b&gt;Artifacts Summary&lt;/b&gt;&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;b&gt;Example Scenario #1&lt;/b&gt;&lt;/li&gt;\nAdding key url:: ExampleScenario-hiv-case-reporting-scenario-resources.html,\ntitle -&gt; Example Scenario #1 - Resources,\nlabel -&gt; 13.4,\nbreadcrumb -&gt; &lt;li&gt;&lt;a href=&#39;toc.html&#39;&gt;&lt;b&gt;Table of Contents&lt;/b&gt;&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&#39;artifacts.html&#39;&gt;&lt;b&gt;Artifacts Summary&lt;/b&gt;&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;b&gt;Example Scenario #1&lt;/b&gt;&lt;/li&gt;\n</code></pre></div>",
        "id": 239140248,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1621277145
    },
    {
        "content": "<p>Is this something that was working on an older version, and now has stopped working?</p>",
        "id": 239140599,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1621277291
    },
    {
        "content": "<p>or is this something that was just added to your IG?</p>",
        "id": 239140627,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1621277303
    },
    {
        "content": "<p>So, <span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> did make some changes to how output name is generated (which is what is used for the key in some cases), in this commit here -&gt; <a href=\"https://github.com/HL7/fhir-ig-publisher/commit/cd5b67c8c34dda16bf5dfa0d095f46c1d61b66f0\">https://github.com/HL7/fhir-ig-publisher/commit/cd5b67c8c34dda16bf5dfa0d095f46c1d61b66f0</a></p>",
        "id": 239141234,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1621277562
    },
    {
        "content": "<p>Those are the only recent changes I can see that might change how it's processed</p>",
        "id": 239141342,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1621277605
    },
    {
        "content": "<p>If this has worked before, please send me the version number of the publisher it last worked on, and I can do a diff and look into exactly what changed and determine what might have caused your issue, if this is actually an issue and not just a missing url or field in the ig</p>",
        "id": 239141496,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1621277667
    },
    {
        "content": "<p>ping me, I'll be around</p>",
        "id": 239141536,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1621277681
    },
    {
        "content": "<p>this was working before. I'll check if it worked on 1.1.69</p>",
        "id": 239142023,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1621277876
    },
    {
        "content": "<p>1.1.68 it is</p>",
        "id": 239142127,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1621277903
    },
    {
        "content": "<p>so <span class=\"user-mention\" data-user-id=\"248736\">@Mark Iantorno</span> this worked in 1.1.68</p>",
        "id": 239142892,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1621278181
    },
    {
        "content": "<p>correction - I think it did</p>",
        "id": 239142962,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1621278196
    },
    {
        "content": "<p>I'm trying to publish with 1.1.68 and now I have a jekyll error - but I presume that is because of the changes to the template</p>",
        "id": 239143029,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1621278227
    },
    {
        "content": "<p>So then the only changes that I think would affect this are the ones I linked above. I could be wrong... but <span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> what are your thought on this?</p>",
        "id": 239143235,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1621278311
    },
    {
        "content": "<p>Not knowing more, I'd consider those changes to be responsible</p>",
        "id": 239143891,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1621278576
    },
    {
        "content": "<p>Running a connectathon track right now - will try to look this evening.</p>",
        "id": 239144397,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1621278796
    },
    {
        "content": "<p>ok</p>",
        "id": 239145230,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1621279201
    },
    {
        "content": "<p>thanks Lloyd</p>",
        "id": 239145294,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1621279211
    },
    {
        "content": "<p>Lloyd made some changes to the template to generate something new. This will be a discovered issue</p>",
        "id": 239149126,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1621281006
    },
    {
        "content": "<p>Ok, I'll shortly be submitting a pull request that will improve error reporting.  The new code will spit out the following error:<br>\n<code>org.hl7.fhir.exceptions.FHIRException: Error in publisher template.  Unable to find file-path property description for resource type ExampleScenario when property template-description is defined.\n    at org.hl7.fhir.igtools.publisher.Publisher.addPageData(Publisher.java:6205)</code></p>\n<p>This is triggered by a problem with the template, which says:<br>\n<code>    \"ExampleScenario\": {\n      \"template-base\": \"template/layouts/layout-examplescenario.html\",\n      \"template-description\": \"template/layouts/layout-examplescenario-description.html\",\n      \"template-resources\": \"template/layouts/layout-examplescenario-resources.html\",\n      \"base\": \"{{[type]}}-{{[id]}}.html\",\n      \"desc\": \"{{[type]}}-{{[id]}}-description.html\",\n      \"resources\": \"{{[type]}}-{{[id]}}-resources.html\",\n      \"template-format\": \"\"\n    }</code></p>\n<p>The <code>\"desc\":</code> should be <code>\"description\":</code></p>",
        "id": 239186171,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1621302585
    }
]