[
    {
        "content": "<p>I feel like this has been raised before, but raising it just in-case. The core spec example links in SDC IG are not getting resolved:<br>\n<a href=\"/user_uploads/10155/-eKcKrt5EC-SuaZ0dNrs8ZdC/image.png\">image.png</a> [image.png]<br>\n<span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> <span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/-eKcKrt5EC-SuaZ0dNrs8ZdC/image.png\" title=\"image.png\"><img src=\"/user_uploads/10155/-eKcKrt5EC-SuaZ0dNrs8ZdC/image.png\"></a></div>",
        "id": 259952911,
        "sender_full_name": "Ramandeep Dhanoa",
        "timestamp": 1635828185
    },
    {
        "content": "<p>This is a situation where core defines examples and we're trying to reference them, but the core 'package' doesn't include examples, so the publication validator doesn't find them.</p>",
        "id": 259953765,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1635829425
    },
    {
        "content": "<p>right, should I suppress these ones?</p>",
        "id": 259953867,
        "sender_full_name": "Ramandeep Dhanoa",
        "timestamp": 1635829560
    },
    {
        "content": "<p>I'm not following this Lloyd</p>",
        "id": 259956290,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1635832874
    },
    {
        "content": "<p>Hi <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span>  The examples in SDC IG are referencing the core examples, for eg - The task example element 'for' is referencing the core patient example - '<a href=\"http://hl7.org/fhir/R4/patient-example-proband.html\">http://hl7.org/fhir/R4/patient-example-proband.html</a>' and QA is showing this as an error 'Unable to resolve resource..<br>\n<a href=\"/user_uploads/10155/UkyY8FhEbYOXKu03G1aIkyyg/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/UkyY8FhEbYOXKu03G1aIkyyg/image.png\" title=\"image.png\"><img src=\"/user_uploads/10155/UkyY8FhEbYOXKu03G1aIkyyg/image.png\"></a></div>",
        "id": 259957229,
        "sender_full_name": "Ramandeep Dhanoa",
        "timestamp": 1635834135
    },
    {
        "content": "<p>We talked about this before <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span>.  The issue is supporting IGs that reference <em>examples</em> in the core spec.</p>",
        "id": 260086874,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1635910929
    },
    {
        "content": "<p>I don't remember this. But I would think that you add hl7.fhir.r4.examples as a dependency and it'd be fine</p>",
        "id": 260086899,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1635910977
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"214174\">@Ramandeep Dhanoa</span>, wanna give that a shot? :)</p>",
        "id": 260086932,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1635911041
    },
    {
        "content": "<p>Is there a similar dependency for FHIR core profiles (e.g. hl7.fhir.r4.profiles)? Would that let me reference the vital signs core profile in an IG?</p>",
        "id": 260142953,
        "sender_full_name": "Vassil Peytchev",
        "timestamp": 1635950342
    },
    {
        "content": "<p>that just part of core</p>",
        "id": 260173970,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1635962871
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> sure, will try that.</p>",
        "id": 260233140,
        "sender_full_name": "Ramandeep Dhanoa",
        "timestamp": 1636006507
    },
    {
        "content": "<p>I am wondering what will be the canonical reference to be used when declaring the examples dependency in the IG?</p>",
        "id": 260759235,
        "sender_full_name": "Ramandeep Dhanoa",
        "timestamp": 1636439634
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span>  any pointers to this? packageId is hl7.fhir.r4.examples, not sure what will be the uri (it's a mandatory field)</p>",
        "id": 260834859,
        "sender_full_name": "Ramandeep Dhanoa",
        "timestamp": 1636480721
    },
    {
        "content": "<p><a href=\"http://hl7.org/fhir/ImplementationGuide/fhir\">http://hl7.org/fhir/ImplementationGuide/fhir</a></p>",
        "id": 260853239,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1636488405
    },
    {
        "content": "<p>\" Internal Error - unknown id fhir (from crimplementationguide.asp) . \"</p>",
        "id": 260853293,
        "sender_full_name": "David Pyke",
        "timestamp": 1636488427
    },
    {
        "content": "<p>? how to reproduce?</p>",
        "id": 260853836,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1636488706
    },
    {
        "content": "<p>I clicked on the link</p>",
        "id": 260853964,
        "sender_full_name": "David Pyke",
        "timestamp": 1636488784
    },
    {
        "content": "<p>oh. well, I'll add that to my list.</p>",
        "id": 260854059,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1636488831
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span><br>\n The id and URL work, but end up with this:<br>\njava.lang.StringIndexOutOfBoundsException: begin 0, end -1, length 129<br>\n        at java.base/java.lang.String.checkBoundsBeginEnd(String.java:3319)<br>\n        at java.base/java.lang.String.substring(String.java:1874)<br>\n        at org.hl7.fhir.r5.conformance.ProfileUtilities.genFixedValue(ProfileUtilities.java:4777)<br>\n        at org.hl7.fhir.r5.conformance.ProfileUtilities.generateDescription(ProfileUtilities.java:4706)<br>\n        at org.hl7.fhir.r5.conformance.ProfileUtilities.generateDescription(ProfileUtilities.java:4525)<br>\n        at org.hl7.fhir.r5.conformance.ProfileUtilities.genElementCells(ProfileUtilities.java:4218)<br>\n        at org.hl7.fhir.r5.conformance.ProfileUtilities.genElement(ProfileUtilities.java:4035)<br>\n        at org.hl7.fhir.r5.conformance.ProfileUtilities.genElement(ProfileUtilities.java:4101)<br>\n        at org.hl7.fhir.r5.conformance.ProfileUtilities.generateTable(ProfileUtilities.java:3869)<br>\n        at org.hl7.fhir.r5.renderers.StructureDefinitionRenderer.render(StructureDefinitionRenderer.java:31)<br>\n        at org.hl7.fhir.r5.renderers.StructureDefinitionRenderer.render(StructureDefinitionRenderer.java:27)<br>\n        at org.hl7.fhir.r5.renderers.ResourceRenderer.render(ResourceRenderer.java:76)<br>\n        at org.hl7.fhir.igtools.publisher.Publisher.generateNarratives(Publisher.java:1286)<br>\n        at org.hl7.fhir.igtools.publisher.Publisher.loadConformance(Publisher.java:4093)<br>\n        at org.hl7.fhir.igtools.publisher.Publisher.createIg(Publisher.java:942)<br>\n        at org.hl7.fhir.igtools.publisher.Publisher.execute(Publisher.java:794)<br>\n        at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:8942)</p>\n<p>Cause is that the genFixedValue is trying to strip \".html\" off the end of the ref, but the ref is this: \"<a href=\"https://simplifier.net/resolve?scope=hl7.fhir.r4.examples@4.0.1&amp;canonical=http://hl7.org/fhir/StructureDefinition/CodeableConcept\">https://simplifier.net/resolve?scope=hl7.fhir.r4.examples@4.0.1&amp;canonical=http://hl7.org/fhir/StructureDefinition/CodeableConcept</a>\"</p>\n<p>That's the ref that's returned by invoking pkp.getLinkFor('<a href=\"http://hl7.org/fhir/R4/\">http://hl7.org/fhir/R4/</a>', 'CodeableConcept')</p>\n<p>I <em>suspect</em> what's happening is that because the example package and the core package have the same base URL, that resolution is hitting the example package first, failing, and then falling back to some funky simplifier resolution thing (which other parts of our code aren't ready to handle).  I'm not sure where that code is though and figure it's probably best for me <em>not</em> to mess with it :)</p>\n<p>You can reproduce by grabbing the SDC IG and uncommenting the dependency.</p>\n<p>I understand your priority for the next few days is getting ballots out, but if you can tackle this one as soon as you have breathing room, that'd be helpful.  We're trying to get SDC out by end of year.  (Or at least get the publication request in by then.)</p>",
        "id": 263807962,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1638765307
    },
    {
        "content": "<p>fixed next release</p>",
        "id": 263941146,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1638834534
    },
    {
        "content": "<p>I'm testing the next release in Eclipse and the good news, is it does fix the issue of the examples not resolving.  On the downside, I now have over 400k broken links as all links to the R4 spec in SDC are now listed as broken...<br>\nE.g. <code>The link 'http://hl7.org/fhir/R4/structuredefinition-bundle.html#Bundle' for \"resourceType\" cannot be resolved</code></p>",
        "id": 264074655,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1638912462
    },
    {
        "content": "<p>(<span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span>)</p>",
        "id": 264074683,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1638912474
    },
    {
        "content": "<p>people who test live code get live code issues. This will be fixed when PRs are done</p>",
        "id": 264085599,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1638917664
    }
]