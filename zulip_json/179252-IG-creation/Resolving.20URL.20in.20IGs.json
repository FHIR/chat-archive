[
    {
        "content": "<p>Hi,<br>\nI´m a beginner in IG creation. I have created an IG using Sushi ang IG builder and a resulting profile can be seen here: <a href=\"http://hl7.se/fhir/ig/base/StructureDefinition-SEBasePatient.html\">http://hl7.se/fhir/ig/base/StructureDefinition-SEBasePatient.html</a></p>\n<p>My question is wheater the \"Defining url\" and the Official ULR should be resolvable? The web strucure generated by Sushi/IG builder creates a profile page as StructureDefinition-SEBasePatient.html and the defining url as ...StructureDefinition/SEBasePatient</p>\n<p>Regards<br>\nArvid</p>",
        "id": 240062419,
        "sender_full_name": "Arvid Thunholm",
        "timestamp": 1621868237
    },
    {
        "content": "<p>It's <em>nice</em> if they resolve - and even nicer if they have content negotiation that pays attention to the accept header and provides XML, JSON or TTL if asked for.  However, there's no requirement that they resolve.  One special case is extensions, where there's a requirement that if you expose an extension in an instance, the receiver must be able to find the definition of that extension.  The <em>easiest</em> way to make that happen is for the extension URL resolve.  However, putting the extension in a common public registry, or pre-negotiation in a closed community can also achieve the objective.</p>",
        "id": 240067686,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1621870396
    },
    {
        "content": "<p>I'd say it's not nice  if they don't resolve, depending on your goals. For example if you start deriving profiles from profiles</p>",
        "id": 240079578,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1621875630
    },
    {
        "content": "<p>Ok, but there isn't any build in mechanism in IG builder to create a web folder structure resulting in paths matching the defining Url:s?<br>\nI would have to create that myself with routes or redirects?</p>",
        "id": 240080855,
        "sender_full_name": "Arvid Thunholm",
        "timestamp": 1621876143
    },
    {
        "content": "<p>the publisher handles that (i haven't tested this in production but it is the same procedure used in the HL7 IGs)</p>",
        "id": 240082910,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1621877097
    },
    {
        "content": "<p>Of course you have to match the base path with something that exists (i.e. if your urls are <a href=\"http://somewhere.se/fhir/medication/StructureDefinition/SePatient\">http://somewhere.se/fhir/medication/StructureDefinition/SePatient</a>, then you should have the rights to manage files in <a href=\"http://somewhere.se/fhir/medication\">http://somewhere.se/fhir/medication</a>)</p>",
        "id": 240083233,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1621877264
    },
    {
        "content": "<p>Resolution has nothing to do with derivation.  If you're doing derivation, your IG should have a package reference to the other IG - so you could care less about canonicals resolving.</p>",
        "id": 240084898,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1621878013
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191832\">Jose Costa Teixeira</span> <a href=\"#narrow/stream/179252-IG-creation/topic/Resolving.20URL.20in.20IGs/near/240083233\">said</a>:</p>\n<blockquote>\n<p>Of course you have to match the base path with something that exists (i.e. if your urls are <a href=\"http://somewhere.se/fhir/medication/StructureDefinition/SePatient\">http://somewhere.se/fhir/medication/StructureDefinition/SePatient</a>, then you should have the rights to manage files in <a href=\"http://somewhere.se/fhir/medication\">http://somewhere.se/fhir/medication</a>)</p>\n</blockquote>\n<p>Yes, but do you have to do that manually? I have simple FTP access to <a href=\"http://hl7.se/fhir\">hl7.se/fhir</a> path and can put any folder structure I want under that. I was expecting the IG publisher to create that folder  structure for me, but it outputs a flat structure with files like StructureDefinition-SEBasePatient.html <br>\nSo do I have to manually create the StrucuteDefinition folder, the SEBasePatient folder and then put the content of StructureDefinition-SEBasePatient.html in an index.html file in that folder (alternatively work with routes/redirects)?</p>",
        "id": 240098767,
        "sender_full_name": "Arvid Thunholm",
        "timestamp": 1621884074
    },
    {
        "content": "<p>sorry, I may have misled you</p>",
        "id": 240111308,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1621890042
    },
    {
        "content": "<p>I would presume the publisher does everything for you. I'm not sure if the URL should StructureDefinition/whatever.json or StructureDefinition-whatever.json. I should be trying it next time we publish something</p>",
        "id": 240111520,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1621890152
    },
    {
        "content": "<p>if you have access and want to give it a go, the process for \"final\" publication that adds the redirects is documented here:</p>",
        "id": 240111580,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1621890181
    },
    {
        "content": "<p><a href=\"https://confluence.hl7.org/pages/viewpage.action?pageId=104580055\">https://confluence.hl7.org/pages/viewpage.action?pageId=104580055</a></p>",
        "id": 240111640,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1621890197
    },
    {
        "content": "<p>If you want to follow convention, then your canonical URLs would look like a standard FHIR RESTful endpoint, which means the files would be sitting beneath a folder named StructureDefinition.  No need to have an index.html in the folder, though it's not a bad thing if you have one.</p>",
        "id": 240120193,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1621894865
    },
    {
        "content": "<blockquote>\n<p>there isn't any build in mechanism in IG builder to create a web folder structure resulting in paths matching the defining Url:s?</p>\n</blockquote>\n<p>There is, but it's (a) server software dependent, At present IIS, Apache and Nginx are supported. and (b) it's not documented. Documenting it is on my todo list</p>",
        "id": 240126043,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1621898830
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191316\">Grahame Grieve</span> <a href=\"#narrow/stream/179252-IG-creation/topic/Resolving.20URL.20in.20IGs/near/240126043\">said</a>:</p>\n<blockquote>\n<blockquote>\n<p>there isn't any build in mechanism in IG builder to create a web folder structure resulting in paths matching the defining Url:s?</p>\n</blockquote>\n<p>There is, but it's (a) server software dependent, At present IIS, Apache and Nginx are supported. and (b) it's not documented. Documenting it is on my todo list</p>\n</blockquote>\n<p>Ok, so my current approach is to create a folder structure according to the canonical url's: ./StructureDefinition/Resource and in that folder place a htaccess file that does a 302 redirect to the correct file: webroot/StructureDefintion-Resource.html</p>",
        "id": 240147905,
        "sender_full_name": "Arvid Thunholm",
        "timestamp": 1621924952
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191320\">Lloyd McKenzie</span> <a href=\"#narrow/stream/179252-IG-creation/topic/Resolving.20URL.20in.20IGs/near/240120193\">said</a>:</p>\n<blockquote>\n<p>If you want to follow convention, then your canonical URLs would look like a standard FHIR RESTful endpoint, which means the files would be sitting beneath a folder named StructureDefinition.  No need to have an index.html in the folder, though it's not a bad thing if you have one.</p>\n</blockquote>\n<p>Ok, but why doesn't the IG builder create that structure? Now everything ends up in a flat file structure. If I start moving the files around the links in the IG will stop working</p>",
        "id": 240147988,
        "sender_full_name": "Arvid Thunholm",
        "timestamp": 1621925039
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> is such a folder structure needed?</p>",
        "id": 240148219,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1621925225
    },
    {
        "content": "<p>the Ig publisher doesn't create that structure for several reasons:</p>\n<ul>\n<li>The IG will not be posted to the web site directly without other changes</li>\n<li>exactly what goes in those directories is server software specific </li>\n<li>most runs of the IG publisher, that content is just dead weight</li>\n</ul>\n<p>Instead, there's a post-processing mode that creates the folders when you decide to post the IG to the web folder, and does other things like update package and rss feed infomration</p>",
        "id": 240158749,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1621932645
    },
    {
        "content": "<p>Are we talking about this? <br>\n<a href=\"https://confluence.hl7.org/pages/viewpage.action?pageId=104580055\">https://confluence.hl7.org/pages/viewpage.action?pageId=104580055</a></p>",
        "id": 240163488,
        "sender_full_name": "Arvid Thunholm",
        "timestamp": 1621935817
    },
    {
        "content": "<p>yes <span class=\"user-mention\" data-user-id=\"191832\">@Jose Costa Teixeira</span> was trying to document the process. I wanted to document the underlying assumptions and then review that doco. The process we use at HL7 is <a href=\"https://confluence.hl7.org/display/FHIR/Process+for+Publishing+a+FHIR+IG\">https://confluence.hl7.org/display/FHIR/Process+for+Publishing+a+FHIR+IG</a></p>",
        "id": 240164767,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1621936648
    },
    {
        "content": "<p>but that is purely process documentation; it doesn't document why or how it works, or what the set up process is</p>",
        "id": 240164845,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1621936691
    },
    {
        "content": "<p>Did we just add stuff to <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> 's backlog? That costs Karma points, right?... <span aria-label=\"sweat smile\" class=\"emoji emoji-1f605\" role=\"img\" title=\"sweat smile\">:sweat_smile:</span></p>",
        "id": 240168103,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1621938711
    },
    {
        "content": "<p>Now there's a good idea.  Adding anything to Grahame's backlog costs points.  We all start with 100 and Grahame decides how much a backlog item costs.  When you hit zero points, you have to do something nice for him to get reloaded.</p>",
        "id": 240190144,
        "sender_full_name": "David Pyke",
        "timestamp": 1621950710
    },
    {
        "content": "<p>man most of you are already at 0</p>",
        "id": 240191950,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1621951385
    },
    {
        "content": "<p>Well, that's another bottle of wine on me...</p>",
        "id": 240191995,
        "sender_full_name": "David Pyke",
        "timestamp": 1621951403
    },
    {
        "content": "<p>right. I guess my score by now should look like <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>999.</mn><msup><mi>e</mi><mrow><mi>j</mi><mn>2</mn><mi>π</mi><mi mathvariant=\"normal\">/</mi><mn>3</mn></mrow></msup></mrow><annotation encoding=\"application/x-tex\">999.  e^{j2\\pi/3}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8879999999999999em;vertical-align:0em;\"></span><span class=\"mord\">999.</span><span class=\"mord\"><span class=\"mord mathnormal\">e</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8879999999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\">j</span><span class=\"mord mtight\">2</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03588em;\">π</span><span class=\"mord mtight\">/3</span></span></span></span></span></span></span></span></span></span></span></span></p>",
        "id": 240192337,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1621951553
    },
    {
        "content": "<p>(the imaginary part is positive but the real part should be quite negative <span aria-label=\"innocent\" class=\"emoji emoji-1f607\" role=\"img\" title=\"innocent\">:innocent:</span> )</p>",
        "id": 240192525,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1621951635
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191832\">@Jose Costa Teixeira</span>  - I´m trying out your guide mentioned above and on the setup phase I´m running into a jekyll error when running the publication.jar. Is this something that looks familiar?<br>\nGenerating Summary Outputs                                                       (02:46.0795)<br>\nSending Usage Stats to Server                                                    (03:03.0885)</p>\n<h2>Memory (MB): Use = 567, Free = 465, Total = 1033, Max =1796</h2>\n<p>Reclaiming memory...</p>\n<h2>Memory (MB): Use = 333, Free = 741, Total = 1075, Max =1796</h2>\n<p>Jekyll: Source: C:/Users/svratu/Documents/workspace/basprofiler-publication/patient-ig/temp/pages (03:28.0450)<br>\nJekyll: Generating...                                                            (03:28.0451)<br>\nJekyll: [33m    Liquid Warning: Liquid syntax error (line 21): [:open_square, \"[\"] is not a valid expression in \"{{[fmt]}}\" in CodeSystem-SecurityLabel.{{[fmt]}}.html←[0m (03:36.0420)<br>\nJekyll: [33m    Liquid Warning: Liquid syntax error (line 21): [:open_square, \"[\"] is not a valid expression in \"{{[fmt]}}\" in CodeSystem-SecurityLabel.{{[fmt]}}.html←[0m (03:36.0422)<br>\nJekyll: [33m    Liquid Warning: Liquid syntax error (line 21): [:open_square, \"[\"] is not a valid expression in \"{{[fmt]}}\" in CodeSystem-SecurityLabel.{{[fmt]}}.html←[0m (03:36.0424)<br>\nJekyll: [33m    Liquid Warning: Liquid syntax error (line 21): [:open_square, \"[\"] is not a valid expression in \"{{[fmt]}}\" in Patient-PatientExample1.{{[fmt]}}.html←[0m (03:36.0540)<br>\nJekyll: [33m    Liquid Warning: Liquid syntax error (line 21): [:open_square, \"[\"] is not a valid expression in \"{{[fmt]}}\" in Patient-PatientExample1.{{[fmt]}}.html←[0m (03:36.0541)<br>\nJekyll: [33m    Liquid Warning: Liquid syntax error (line 21): [:open_square, \"[\"] is not a valid expression in \"{{[fmt]}}\" in Patient-PatientExample1.{{[fmt]}}.html←[0m (03:36.0543)</p>\n<p>the command prompt freezes after this</p>",
        "id": 240285338,
        "sender_full_name": "Arvid Thunholm",
        "timestamp": 1622012103
    },
    {
        "content": "<p>that's a template error unrelated to the second phase of publishing</p>",
        "id": 240285433,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1622012183
    },
    {
        "content": "<p>so there is something wrong with my template?</p>",
        "id": 240285638,
        "sender_full_name": "Arvid Thunholm",
        "timestamp": 1622012359
    },
    {
        "content": "<p>i doubt it (unless you messed with it)</p>",
        "id": 240286675,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1622013209
    },
    {
        "content": "<p>Is this in a repository somewhere?</p>",
        "id": 240286682,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1622013216
    },
    {
        "content": "<p>yes: <a href=\"https://github.com/HL7Sweden/basprofiler-r4/tree/ballot-patient\">https://github.com/HL7Sweden/basprofiler-r4/tree/ballot-patient</a><br>\nI did use a swedish template but I've also tried using fhir.base.template in the build and the same error appears</p>",
        "id": 240288157,
        "sender_full_name": "Arvid Thunholm",
        "timestamp": 1622014388
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"195664\">@Arvid Thunholm</span>  do you use the latest IG publisher? (I had this problem with an older version)</p>",
        "id": 240291848,
        "sender_full_name": "Michaela Ziegler",
        "timestamp": 1622016995
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"233842\">@Michaela Ziegler</span> thank you - that solved the issue! My publisher was a month old.</p>",
        "id": 240294599,
        "sender_full_name": "Arvid Thunholm",
        "timestamp": 1622019092
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span>  Is this the documentation you were talking about being on your todo-list:<br>\nDone. This IG has been built using the 'normal' process for local use. If building to host on an an external website, use the process documented [yet to be documented]])</p>",
        "id": 240294987,
        "sender_full_name": "Arvid Thunholm",
        "timestamp": 1622019310
    },
    {
        "content": "<p>yes</p>",
        "id": 240295014,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1622019334
    },
    {
        "content": "<p>(late to the party - I just tried and it builds fine on my machine :) )</p>",
        "id": 240296075,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1622019984
    },
    {
        "content": "<p>I got the publisher to work according to the guide and the canonical are now resolvable. Thanks everyone!</p>",
        "id": 240307168,
        "sender_full_name": "Arvid Thunholm",
        "timestamp": 1622027040
    },
    {
        "content": "<p>If you're using the publisher, encourage you to monitor the <a class=\"stream\" data-stream-id=\"179294\" href=\"/#narrow/stream/179294-committers.2Fannounce\">#committers/announce</a> stream - breaking releases like this one get announced there.</p>",
        "id": 240317231,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1622032733
    }
]