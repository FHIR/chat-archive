[
    {
        "content": "<p>I want to make an \"official\" release of one of my IGs. Is there any example of one so that I can see how it's done?</p>",
        "id": 196754710,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1588849225
    },
    {
        "content": "<p>there's plenty of examples - the process is not well documented but I have to run through it with <span class=\"user-mention\" data-user-id=\"191982\">@Ted Klein</span> tomorrow</p>",
        "id": 196765342,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1588856081
    },
    {
        "content": "<p>for our swiss ig we use the following steps for publication: <a href=\"https://github.com/ahdis/k8s-fhir.ch#publish-an-implementation-guide-ch-xyz-with-a-version-eg-010\" title=\"https://github.com/ahdis/k8s-fhir.ch#publish-an-implementation-guide-ch-xyz-with-a-version-eg-010\">https://github.com/ahdis/k8s-fhir.ch#publish-an-implementation-guide-ch-xyz-with-a-version-eg-010</a></p>",
        "id": 196781700,
        "sender_full_name": "Oliver Egger",
        "timestamp": 1588863128
    },
    {
        "content": "<p>that is interesting. I will check it for publication.</p>",
        "id": 196782869,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1588863612
    },
    {
        "content": "<p>do you know how do I change this?<br>\n<a href=\"/user_uploads/10155/iHu0FdHEJxoA83uTDhkfOcAt/image.png\" title=\"image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/iHu0FdHEJxoA83uTDhkfOcAt/image.png\" title=\"image.png\"><img src=\"/user_uploads/10155/iHu0FdHEJxoA83uTDhkfOcAt/image.png\"></a></div>",
        "id": 196785825,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1588864686
    },
    {
        "content": "<p>Is that \"the yellow box\" at the top of the pages? It will be populated in an \"official\" release by the publication tooling when I put it out on the website.  CI build fills it in automatically.</p>",
        "id": 196786405,
        "sender_full_name": "Lynn Laakso",
        "timestamp": 1588864888
    },
    {
        "content": "<p>Thank you. This is not an HL7 Intl IG, it is an HL7 Belgium IG - will that also work?</p>",
        "id": 196786684,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1588864997
    },
    {
        "content": "<p>In other words, do you also publish the HL7 Belgium IGs? I would like those to be hosted (also) locally on our site (assuming that is OK)</p>",
        "id": 196786877,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1588865057
    },
    {
        "content": "<p>No I don't. Not sure how those are published.</p>",
        "id": 196787249,
        "sender_full_name": "Lynn Laakso",
        "timestamp": 1588865179
    },
    {
        "content": "<p>I haven't seen any guidance.</p>",
        "id": 196787659,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1588865341
    },
    {
        "content": "<p>the -publish-update step does that</p>",
        "id": 196821634,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1588880849
    },
    {
        "content": "<p>i guess -folder is the output folder?</p>",
        "id": 196823044,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1588881613
    },
    {
        "content": "<p>and where is the fhir-ig-list that i should point to?</p>",
        "id": 196823086,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1588881635
    },
    {
        "content": "<p>(those are the things it asks me)</p>",
        "id": 196823103,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1588881642
    },
    {
        "content": "<p>this is my documentation that Lynn follows here: <a href=\"https://confluence.hl7.org/display/FHIR/Process+for+Publishing+a+FHIR+IG\" title=\"https://confluence.hl7.org/display/FHIR/Process+for+Publishing+a+FHIR+IG\">https://confluence.hl7.org/display/FHIR/Process+for+Publishing+a+FHIR+IG</a></p>",
        "id": 196823326,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1588881764
    },
    {
        "content": "<p>the process I'll be following with <span class=\"user-mention\" data-user-id=\"191982\">@Ted Klein</span>  to set up UTG for first publication is:</p>\n<p>IG:</p>\n<ul>\n<li>Get the IG itself right. Then build with -publish flag </li>\n</ul>\n<p>Web site:</p>\n<ul>\n<li>create an empty folder</li>\n<li>define publish.ini  (there's only one per web site, but UTG is <a href=\"http://terminology.hl7.org\" title=\"http://terminology.hl7.org\">terminology.hl7.org</a>)</li>\n<li>create an empty package-list.json (only the headers, no entries, per <a href=\"https://confluence.hl7.org/display/FHIR/FHIR+IG+PackageList+doco\" title=\"https://confluence.hl7.org/display/FHIR/FHIR+IG+PackageList+doco\">https://confluence.hl7.org/display/FHIR/FHIR+IG+PackageList+doco</a>) then add a list entry for the ci-build for your IG</li>\n<li>copy in the history repo at <a href=\"https://github.com/HL7/fhir-ig-history-template\" title=\"https://github.com/HL7/fhir-ig-history-template\">https://github.com/HL7/fhir-ig-history-template</a></li>\n<li>choose the sub-folder that the IG is going to live at. HL7 uses \\YYYYMMM or \\[milestone] or you could use \\[Ver] or anything else</li>\n<li>copy the IG into the subdirectory you chose</li>\n<li>optional, if this is a milestone (it is for UTG): copy the IG to the root folder that has the publish.ini. Say yes to overwrite files</li>\n<li>edit the package-list.json file, create a publication object in the list array, and fill out the details</li>\n<li>if you did a milestone release update current (note for future use: only one entry can have current : true , + the ci-build is current:true too)</li>\n<li>then make a clone of the IG-registry repo</li>\n<li>then run the -publish-update, and check the output for issues, and also check the IG that the publish box has been updated appropriately </li>\n<li>copy the folder to the server</li>\n</ul>",
        "id": 196824352,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1588882295
    },
    {
        "content": "<p>what is \"define publish.ini\"? A file with only the location in it (you mean <a href=\"http://terminology.hl7.org\" title=\"http://terminology.hl7.org\">terminology.hl7.org</a> as a url, right) ?</p>",
        "id": 196825718,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1588883101
    },
    {
        "content": "<p>and where do i find fhir-ig-list.json (will i need it?) ?</p>",
        "id": 196825799,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1588883157
    },
    {
        "content": "<p>the publish ini is something like this:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">[website]</span>\n<span class=\"na\">style</span><span class=\"o\">=</span><span class=\"s\">fhir.layout</span>\n<span class=\"na\">url</span><span class=\"o\">=</span><span class=\"s\">http://hl7.org/fhir</span>\n<span class=\"na\">server</span><span class=\"o\">=</span><span class=\"s\">asp-new</span>\n<span class=\"na\">org</span><span class=\"o\">=</span><span class=\"s\">HL7, Inc</span>\n\n<span class=\"k\">[feeds]</span>\n<span class=\"na\">package</span><span class=\"o\">=</span><span class=\"s\">package-feed.xml</span>\n<span class=\"na\">publication</span><span class=\"o\">=</span><span class=\"s\">publication-feed.xml</span>\n</code></pre></div>",
        "id": 196829045,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1588885018
    },
    {
        "content": "<p>style={fhir.layout - magic value}<br>\nurl={the URL this is known by on the web}<br>\nserver={the server that is running - affects the redirects. one of apache | litespeed | asp-new}<br>\norg={stated organization for RSS feeds}</p>\n<p>[feeds]<br>\npackage={where to generate the package RSS feed}<br>\npublication={where to generate the publication RSS feed}</p>",
        "id": 196829248,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1588885143
    },
    {
        "content": "<p>fhir-ig-list.json is in <a href=\"https://github.com/FHIR/ig-registry\" title=\"https://github.com/FHIR/ig-registry\">https://github.com/FHIR/ig-registry</a>. you need to get a clone of that repo, and then point -publish-update at that file. it will update the file with the correct entries for the IGs it finds, and then you can make a PR for the repo</p>",
        "id": 196829765,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1588885404
    },
    {
        "content": "<p>and my ig will become part of that list, is that it?</p>",
        "id": 196831960,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1588886537
    },
    {
        "content": "<p>yes. and then that shows up here: <a href=\"https://registry.fhir.org/guides\" title=\"https://registry.fhir.org/guides\">https://registry.fhir.org/guides</a></p>\n<p>you will need to edit the file by hand after the run to fill in the missing category</p>",
        "id": 196832202,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1588886687
    },
    {
        "content": "<p>This is great info. I will start with step 1 - clean &amp; trim my IG.</p>",
        "id": 196832223,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1588886701
    },
    {
        "content": "<p>Should I take some notes to help in documenting for others (I assume we don't have a walkthrough yet)?</p>",
        "id": 196832237,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1588886707
    },
    {
        "content": "<p>sure. I haven't documented this, no.</p>",
        "id": 196832261,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1588886720
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"243697\">@Etienne Cantineau</span> <span class=\"user-mention\" data-user-id=\"218656\">@Robin Bosman</span> this is interesting for us</p>",
        "id": 196874937,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1588930701
    },
    {
        "content": "<p>I got this working (i will need to practice to make sure I can do it without looking at the sheet)</p>",
        "id": 197726906,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1589564567
    },
    {
        "content": "<p>a few questions:</p>",
        "id": 197726922,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1589564574
    },
    {
        "content": "<p><a href=\"/user_uploads/10155/qN0XRvJBhakJXLH6rg2UyLuF/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/qN0XRvJBhakJXLH6rg2UyLuF/image.png\" title=\"image.png\"><img src=\"/user_uploads/10155/qN0XRvJBhakJXLH6rg2UyLuF/image.png\"></a></div>",
        "id": 197727243,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1589564746
    },
    {
        "content": "<ol>\n<li>I know 2  is the sequence, but where does Ballot 1 come from?</li>\n</ol>",
        "id": 197727599,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1589564889
    },
    {
        "content": "<p>(v2020May is correct, it is my version)</p>",
        "id": 197727680,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1589564920
    },
    {
        "content": "<p>all of it comes from package-list.json</p>",
        "id": 197727753,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1589564960
    },
    {
        "content": "<ol start=\"2\">\n<li>I tried to change ballot to preview and normative, did not accept</li>\n</ol>",
        "id": 197727875,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1589565003
    },
    {
        "content": "<p>since you are saving a text file, 'did not accept' probably needs some clarification</p>",
        "id": 197727969,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1589565048
    },
    {
        "content": "<p>what is your \"sequence\" value?</p>",
        "id": 197728052,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1589565088
    },
    {
        "content": "<p>the publisher did not accept that value</p>",
        "id": 197728058,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1589565091
    },
    {
        "content": "<p>my sequence in the example above was 2</p>",
        "id": 197728074,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1589565099
    },
    {
        "content": "<p>i am trying now with \"normative\" and no sequence to see the error I got</p>",
        "id": 197728170,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1589565131
    },
    {
        "content": "<p>have you read the documentation?</p>",
        "id": 197728192,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1589565147
    },
    {
        "content": "<p>yes, this,<br>\n<a href=\"https://confluence.hl7.org/display/FHIR/FHIR+IG+PackageList+doco\">https://confluence.hl7.org/display/FHIR/FHIR+IG+PackageList+doco</a><br>\n...</p>",
        "id": 197728317,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1589565210
    },
    {
        "content": "<p>and this<br>\n<a href=\"https://confluence.hl7.org/display/FHIR/Process+for+Publishing+a+FHIR+IG\">https://confluence.hl7.org/display/FHIR/Process+for+Publishing+a+FHIR+IG</a></p>",
        "id": 197728428,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1589565250
    },
    {
        "content": "<p>I got also some information from <span class=\"user-mention\" data-user-id=\"191478\">@Oliver Egger</span> which was precious just for me to understand the flow.</p>",
        "id": 197728825,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1589565405
    },
    {
        "content": "<p>Exception in thread \"main\" java.lang.Error: unknown status normative<br>\n        at org.hl7.fhir.igtools.publisher.utils.IGReleaseUpdater.state(IGReleaseUpdater.java:414)</p>",
        "id": 197728895,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1589565437
    },
    {
        "content": "<p>this is the error I got</p>",
        "id": 197728903,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1589565444
    },
    {
        "content": "<p>sequence should be something like \"1st STU\" that stays constant across the set of releases leading towards a major milestone</p>",
        "id": 197728970,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1589565472
    },
    {
        "content": "<p>I did not understand  \"Groups all the ballot publications and the final publication for the ballot sequence\" so tbh I just left any value there, I did not think it was critical until the publisher \"told me\" it was needed</p>",
        "id": 197729423,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1589565634
    },
    {
        "content": "<p>but I can change that. Does that have any impact on the \"normative\"? <br>\nWhat is the relation between this and the IG's releaselabel parameter?</p>",
        "id": 197729548,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1589565691
    },
    {
        "content": "<p>and finally, I run this with parameters -folder an -root both pointing at my ig's root. I'm not sure that is right - Oliver's docu says it should be on the output folder, but if I do that, it doesn't work because my publish.ini is not in the output folder</p>",
        "id": 197729813,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1589565806
    },
    {
        "content": "<p>not the output folder. You copy the output folder into the maintained web folder, in one or two places, and then -publish-update is used on the web folder</p>",
        "id": 197730740,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1589566211
    },
    {
        "content": "<p>don't know what you mean by 'the \"normative\"'. Nor do I know what the releaselabel parameter is</p>",
        "id": 197730786,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1589566240
    },
    {
        "content": "<p>IG Package list documentation says</p>\n<p>status: the status of the publication - one of:<br>\nci-build - the continuous integration build release (not stable)<br>\npreview - frozen snapshot for non-ballot feedback<br>\nballot - frozen snapshot for ballot<br>\ntrial-use - official release with 'trial use' status<br>\nupdate - official release with 'trial use' status - posted as an un-ballotedSTU update<br>\nnormative - official release with 'normative' status<br>\ntrial-use+normative - official release with mixture of trial use and normative content</p>",
        "id": 197731932,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1589566813
    },
    {
        "content": "<p>Looking at the code, perhaps this has changed (i can update the confluence page in that case)? <br>\n\"release\" works</p>",
        "id": 197731988,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1589566844
    },
    {
        "content": "<p>and this is in the template - perhaps also needs updating:<br>\n\"IG must include a definition parameter with a code of 'releaselabel'.  Value can be 'CI build' or some other status\"</p>",
        "id": 197732612,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1589567098
    },
    {
        "content": "<p>apparently I updated this and didn't keep the code up to date. The relevant java code is:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"kd\">private</span> <span class=\"n\">String</span> <span class=\"nf\">state</span><span class=\"p\">(</span><span class=\"n\">JsonObject</span> <span class=\"n\">ig</span><span class=\"p\">,</span> <span class=\"n\">JsonObject</span> <span class=\"n\">version</span><span class=\"p\">)</span> <span class=\"p\">{</span>\n    <span class=\"n\">String</span> <span class=\"n\">status</span> <span class=\"o\">=</span> <span class=\"n\">JSONUtil</span><span class=\"p\">.</span><span class=\"na\">str</span><span class=\"p\">(</span><span class=\"n\">version</span><span class=\"p\">,</span> <span class=\"s\">&quot;status&quot;</span><span class=\"p\">);</span>\n    <span class=\"n\">String</span> <span class=\"n\">sequence</span> <span class=\"o\">=</span> <span class=\"n\">JSONUtil</span><span class=\"p\">.</span><span class=\"na\">str</span><span class=\"p\">(</span><span class=\"n\">version</span><span class=\"p\">,</span> <span class=\"s\">&quot;sequence&quot;</span><span class=\"p\">);</span>\n    <span class=\"k\">if</span> <span class=\"p\">(</span><span class=\"s\">&quot;trial-use&quot;</span><span class=\"p\">.</span><span class=\"na\">equals</span><span class=\"p\">(</span><span class=\"n\">status</span><span class=\"p\">))</span>\n      <span class=\"k\">return</span> <span class=\"n\">decorate</span><span class=\"p\">(</span><span class=\"n\">sequence</span><span class=\"p\">);</span>\n    <span class=\"k\">else</span> <span class=\"k\">if</span> <span class=\"p\">(</span><span class=\"s\">&quot;release&quot;</span><span class=\"p\">.</span><span class=\"na\">equals</span><span class=\"p\">(</span><span class=\"n\">status</span><span class=\"p\">))</span>\n      <span class=\"k\">return</span> <span class=\"s\">&quot;Release&quot;</span><span class=\"p\">;</span>\n    <span class=\"k\">else</span> <span class=\"k\">if</span> <span class=\"p\">(</span><span class=\"s\">&quot;qa-preview&quot;</span><span class=\"p\">.</span><span class=\"na\">equals</span><span class=\"p\">(</span><span class=\"n\">status</span><span class=\"p\">))</span>\n      <span class=\"k\">return</span> <span class=\"s\">&quot;QA Preview&quot;</span><span class=\"p\">;</span>\n    <span class=\"k\">else</span> <span class=\"k\">if</span> <span class=\"p\">(</span><span class=\"s\">&quot;ballot&quot;</span><span class=\"p\">.</span><span class=\"na\">equals</span><span class=\"p\">(</span><span class=\"n\">status</span><span class=\"p\">))</span>\n      <span class=\"k\">return</span> <span class=\"n\">decorate</span><span class=\"p\">(</span><span class=\"n\">sequence</span><span class=\"p\">)</span><span class=\"o\">+</span><span class=\"s\">&quot; Ballot &quot;</span><span class=\"o\">+</span><span class=\"n\">ballotCount</span><span class=\"p\">(</span><span class=\"n\">ig</span><span class=\"p\">,</span> <span class=\"n\">sequence</span><span class=\"p\">,</span> <span class=\"n\">version</span><span class=\"p\">);</span>\n    <span class=\"k\">else</span> <span class=\"k\">if</span> <span class=\"p\">(</span><span class=\"s\">&quot;draft&quot;</span><span class=\"p\">.</span><span class=\"na\">equals</span><span class=\"p\">(</span><span class=\"n\">status</span><span class=\"p\">))</span>\n      <span class=\"k\">return</span> <span class=\"n\">decorate</span><span class=\"p\">(</span><span class=\"n\">sequence</span><span class=\"p\">)</span><span class=\"o\">+</span><span class=\"s\">&quot; Draft&quot;</span><span class=\"p\">;</span>\n    <span class=\"k\">else</span> <span class=\"k\">if</span> <span class=\"p\">(</span><span class=\"s\">&quot;update&quot;</span><span class=\"p\">.</span><span class=\"na\">equals</span><span class=\"p\">(</span><span class=\"n\">status</span><span class=\"p\">))</span>\n      <span class=\"k\">return</span> <span class=\"n\">decorate</span><span class=\"p\">(</span><span class=\"n\">sequence</span><span class=\"p\">)</span><span class=\"o\">+</span><span class=\"s\">&quot; Update&quot;</span><span class=\"p\">;</span>\n    <span class=\"k\">else</span> <span class=\"k\">if</span> <span class=\"p\">(</span><span class=\"s\">&quot;normative+trial-use&quot;</span><span class=\"p\">.</span><span class=\"na\">equals</span><span class=\"p\">(</span><span class=\"n\">status</span><span class=\"p\">))</span>\n      <span class=\"k\">return</span> <span class=\"n\">decorate</span><span class=\"p\">(</span><span class=\"n\">sequence</span><span class=\"o\">+</span><span class=\"s\">&quot; - Mixed Normative and STU&quot;</span><span class=\"p\">);</span>\n    <span class=\"k\">else</span>\n      <span class=\"k\">throw</span> <span class=\"k\">new</span> <span class=\"n\">Error</span><span class=\"p\">(</span><span class=\"s\">&quot;unknown status &quot;</span><span class=\"o\">+</span><span class=\"n\">status</span><span class=\"p\">);</span>\n  <span class=\"p\">}</span>\n</code></pre></div>\n\n\n<p>It would be great if you could fix the doco</p>",
        "id": 197732806,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1589567171
    },
    {
        "content": "<p>presumably releaselabel should be consistent with it</p>",
        "id": 197732838,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1589567192
    },
    {
        "content": "<p>i'll fix the wiki and ping you to revise the descriptions</p>",
        "id": 197733650,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1589567615
    },
    {
        "content": "<p>for releaselabel : should I also add to the IG parameters page? it is not there.<br>\nand I guess the publisher does not really cross-check them?</p>",
        "id": 197733822,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1589567698
    },
    {
        "content": "<p>updated documentation<br>\n<a href=\"https://confluence.hl7.org/display/FHIR/FHIR+IG+PackageList+doco\">https://confluence.hl7.org/display/FHIR/FHIR+IG+PackageList+doco</a><br>\n<a href=\"https://confluence.hl7.org/display/FHIR/Implementation+Guide+Parameters\">https://confluence.hl7.org/display/FHIR/Implementation+Guide+Parameters</a></p>",
        "id": 197735822,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1589568601
    },
    {
        "content": "<p>I'm getting something I don't recall if I missed last time:</p>\n<div class=\"codehilite\"><pre><span></span><code> version 2020May path http:\\\\hl7belgium.org\\fhir\\2020May not found (canonical = http://hl7belgium.org/fhir, path = http://hl7belgium.org/fhir/2020May)\n</code></pre></div>",
        "id": 200811971,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1592133427
    },
    {
        "content": "<p>what should I check for this?</p>",
        "id": 200813780,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1592136466
    },
    {
        "content": "<p>you have a mismatch between your local file set and the absolute path</p>",
        "id": 200830213,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1592163328
    },
    {
        "content": "<p>and the version specific pat h</p>",
        "id": 200830216,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1592163338
    },
    {
        "content": "<p>(deleted)</p>",
        "id": 200871619,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1592216851
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191316\">Grahame Grieve</span> <a href=\"#narrow/stream/179252-IG-creation/topic/IG.20releases/near/196824352\">said</a>:</p>\n<blockquote>\n<p>the process I'll be following with <span class=\"user-mention silent\" data-user-id=\"191982\">Ted Klein</span>  to set up UTG for first publication is:</p>\n<p>IG:</p>\n<ul>\n<li>Get the IG itself right. Then build with -publish flag </li>\n</ul>\n<p>Web site:</p>\n<ul>\n<li>create an empty folder</li>\n<li>define publish.ini  (there's only one per web site, but UTG is <a href=\"http://terminology.hl7.org\">terminology.hl7.org</a>)</li>\n<li>create an empty package-list.json (only the headers, no entries, per <a href=\"https://confluence.hl7.org/display/FHIR/FHIR+IG+PackageList+doco\">https://confluence.hl7.org/display/FHIR/FHIR+IG+PackageList+doco</a>) then add a list entry for the ci-build for your IG</li>\n<li>copy in the history repo at <a href=\"https://github.com/HL7/fhir-ig-history-template\">https://github.com/HL7/fhir-ig-history-template</a></li>\n<li>choose the sub-folder that the IG is going to live at. HL7 uses \\YYYYMMM or \\[milestone] or you could use \\[Ver] or anything else</li>\n<li>copy the IG into the subdirectory you chose</li>\n<li>optional, if this is a milestone (it is for UTG): copy the IG to the root folder that has the publish.ini. Say yes to overwrite files</li>\n<li>edit the package-list.json file, create a publication object in the list array, and fill out the details</li>\n<li>if you did a milestone release update current (note for future use: only one entry can have current : true , + the ci-build is current:true too)</li>\n<li>then make a clone of the IG-registry repo</li>\n<li>then run the -publish-update, and check the output for issues, and also check the IG that the publish box has been updated appropriately </li>\n<li>copy the folder to the server</li>\n</ul>\n</blockquote>\n<p>I followed these steps and created a repo step by step to show what I did and to check what I have done wrong</p>",
        "id": 200947239,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1592255937
    },
    {
        "content": "<p><a href=\"https://github.com/costateixeira/test-ig-publication/commits/milestone\">https://github.com/costateixeira/test-ig-publication/commits/milestone</a></p>",
        "id": 200947257,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1592255951
    },
    {
        "content": "<p>not sure if this helps, but having traceable changes helps me</p>",
        "id": 200947290,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1592255978
    },
    {
        "content": "<p>at this moment I get an error:</p>\n<div class=\"codehilite\"><pre><span></span><code>Problem with C:\\ImplementationGuides\\Publication\\test-ig-publication\\test-ig-publication\\core\\.\\2020Jun\\package.tgz: missing url\nProblem with C:\\ImplementationGuides\\Publication\\test-ig-publication\\test-ig-publication\\core\\.\\2020Jun\\package.tgz: fhirVersions value mismatch (expected null, found 4.0.1\njava.lang.NullPointerException\n        at org.hl7.fhir.igtools.publisher.utils.IGPackageChecker.check(IGPackageChecker.java:101)\n        at org.hl7.fhir.igtools.publisher.utils.IGReleaseUpdater.updateStatement(IGReleaseUpdater.java:265)\n        at org.hl7.fhir.igtools.publisher.utils.IGReleaseUpdater.check(IGReleaseUpdater.java:142)\n        at org.hl7.fhir.igtools.publisher.utils.IGWebSiteMaintainer.execute(IGWebSiteMaintainer.java:82)\n        at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:7388)\n</code></pre></div>",
        "id": 200947400,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1592256042
    },
    {
        "content": "<p>silly me, I had made the repo private. I have now made it public</p>",
        "id": 200975565,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1592286617
    },
    {
        "content": "<p>I don't know how to fix these issues:</p>\n<ol>\n<li>package.tgz: missing url</li>\n<li>package.tgz: fhirVersions value mismatch (expected null, found 4.0.1</li>\n<li>NPE</li>\n</ol>",
        "id": 200978588,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1592290180
    },
    {
        "content": "<p>same after I update the source package-list so that the package contains the fhirVersion</p>",
        "id": 200978681,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1592290313
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191832\">@Jose Costa Teixeira</span>  fhirversion needs to be written lowercase in package-list.json, see <a href=\"https://github.com/costateixeira/test-ig-publication/pull/1\">https://github.com/costateixeira/test-ig-publication/pull/1</a></p>",
        "id": 201080349,
        "sender_full_name": "Oliver Egger",
        "timestamp": 1592345374
    },
    {
        "content": "<p>this is great. thank you</p>",
        "id": 201099501,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1592366561
    },
    {
        "content": "<p>now I got it working (after struggling with the -publish parameter</p>",
        "id": 201099510,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1592366581
    },
    {
        "content": "<p>the only thing I need now is to make the history page also follow the IG's template</p>",
        "id": 201099525,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1592366606
    },
    {
        "content": "<p>The history html page is hardcoded to the hl7 template</p>",
        "id": 201100078,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1592367474
    },
    {
        "content": "<p>at a first glance, one way of applying the ig's template could be to <br>\ncreate a history.xml page in the template, let jekyll take care of that as it is taking care of the others</p>",
        "id": 201100220,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1592367662
    },
    {
        "content": "<p>the history page is dynamically created from package-list.json (if you have an old ig and go to his history it shows you also the new version, so you cannot use directly jekyll). the last time we used it, it had a dependency on the webserver, for our ig's we have overwritten history.html with a javascript version, see <a href=\"https://github.com/ahdis/ig-template/blob/master/content/history.html\">https://github.com/ahdis/ig-template/blob/master/content/history.html</a> if interested.</p>",
        "id": 201105034,
        "sender_full_name": "Oliver Egger",
        "timestamp": 1592374755
    },
    {
        "content": "<p>the history page is generated from history.template. You can do what you want to that</p>",
        "id": 201107189,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1592377378
    },
    {
        "content": "<p>thanks <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> , i have to revisit our publication, I have missed that step</p>",
        "id": 201107294,
        "sender_full_name": "Oliver Egger",
        "timestamp": 1592377509
    },
    {
        "content": "<p>history.html has different scripts and less content (menu, breadcrumbs) than the other pages. It's easy to manually apply the template, but will be harder to automate that than I thouhgt. <br>\nAnyway templating the history page is something I'd do once per project, so I don't think it's worth automating it for now.</p>",
        "id": 201111386,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1592381123
    },
    {
        "content": "<p>I'm going to create a fresh repo with an accompanying document with steps from beginning to end. This can serve as instructions (and hopefully as a script to automate some parts)</p>",
        "id": 201111494,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1592381205
    },
    {
        "content": "<p>question: which IG should I start with? <br>\nI started with the sample-ig but I had to trim it down because the resources had some urls that were conflicting with my base url, and there were spreadsheets in there.</p>",
        "id": 201111610,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1592381293
    },
    {
        "content": "<p>any suggestion? </p>\n<ol>\n<li>truncated sample ig</li>\n<li>any other ig?</li>\n</ol>",
        "id": 201111636,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1592381318
    },
    {
        "content": "<p>I will do this for IHE later - can also start with an empty IHE repo as an example, or a Belgian IG repo... but perhaps best to keep it in the family.</p>",
        "id": 201111695,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1592381374
    },
    {
        "content": "<p>ok one final question:<br>\n<code>Problem with C:\\ImplementationGuides\\Publication\\ig-publication\\website\\.\\package.tgz: expected url http://hl7belgium.org/fhir/core/2020Jun but found http://hl7belgium.org/fhir/core\n</code> <br>\nI get this message now, after:</p>\n<ol>\n<li>in my IG source folder, build with -publish <a href=\"http://hl7belgium.org/fhir/core/2020Jun\">http://hl7belgium.org/fhir/core/2020Jun</a>, copy output to website\\2020Jun\\</li>\n<li>in my IG source folder, build with -publish <a href=\"http://hl7belgium.org/fhir/core\">http://hl7belgium.org/fhir/core</a>, copy output to website\\<br>\nis this the right way to do it?</li>\n</ol>",
        "id": 201127288,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1592392261
    },
    {
        "content": "<p>during these steps, my package-list.json is</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"p\">{</span>\n    <span class=\"nt\">&quot;package-id&quot;</span> <span class=\"p\">:</span> <span class=\"s2\">&quot;hl7.be.fhir.core&quot;</span><span class=\"p\">,</span>\n    <span class=\"nt\">&quot;title&quot;</span> <span class=\"p\">:</span> <span class=\"s2\">&quot;Sample IG&quot;</span><span class=\"p\">,</span>\n    <span class=\"nt\">&quot;canonical&quot;</span> <span class=\"p\">:</span> <span class=\"s2\">&quot;http://hl7belgium.org/fhir/core&quot;</span><span class=\"p\">,</span>\n    <span class=\"nt\">&quot;introduction&quot;</span> <span class=\"p\">:</span> <span class=\"s2\">&quot;The introduction that should appear in the FHIR IG registry&quot;</span><span class=\"p\">,</span>\n    <span class=\"nt\">&quot;list&quot;</span> <span class=\"p\">:</span> <span class=\"p\">[</span>\n        <span class=\"p\">{</span>\n           <span class=\"nt\">&quot;version&quot;</span> <span class=\"p\">:</span> <span class=\"s2\">&quot;current&quot;</span><span class=\"p\">,</span>\n            <span class=\"nt\">&quot;desc&quot;</span> <span class=\"p\">:</span> <span class=\"s2\">&quot;Continuous Integration Build (latest in version control)&quot;</span><span class=\"p\">,</span>\n            <span class=\"nt\">&quot;path&quot;</span> <span class=\"p\">:</span> <span class=\"s2\">&quot;http://hl7belgium.org/fhir/core&quot;</span><span class=\"p\">,</span>\n            <span class=\"nt\">&quot;status&quot;</span> <span class=\"p\">:</span> <span class=\"s2\">&quot;ci-build&quot;</span><span class=\"p\">,</span>\n            <span class=\"nt\">&quot;current&quot;</span> <span class=\"p\">:</span> <span class=\"kc\">true</span>\n           <span class=\"p\">},</span>\n           <span class=\"p\">{</span>\n            <span class=\"nt\">&quot;version&quot;</span> <span class=\"p\">:</span> <span class=\"s2\">&quot;2020Jun&quot;</span><span class=\"p\">,</span>\n             <span class=\"nt\">&quot;desc&quot;</span> <span class=\"p\">:</span> <span class=\"s2\">&quot;2020 June Release&quot;</span><span class=\"p\">,</span>\n             <span class=\"nt\">&quot;path&quot;</span> <span class=\"p\">:</span> <span class=\"s2\">&quot;http://hl7belgium.org/fhir/core/2020Jun&quot;</span><span class=\"p\">,</span>\n             <span class=\"nt\">&quot;status&quot;</span> <span class=\"p\">:</span> <span class=\"s2\">&quot;ballot&quot;</span><span class=\"p\">,</span>\n             <span class=\"nt\">&quot;date&quot;</span> <span class=\"p\">:</span> <span class=\"s2\">&quot;2020-06-15&quot;</span><span class=\"p\">,</span>\n             <span class=\"nt\">&quot;fhirversion&quot;</span> <span class=\"p\">:</span> <span class=\"s2\">&quot;4.0.1&quot;</span><span class=\"p\">,</span>\n             <span class=\"nt\">&quot;sequence&quot;</span> <span class=\"p\">:</span> <span class=\"mi\">1</span><span class=\"p\">,</span>\n             <span class=\"nt\">&quot;current&quot;</span> <span class=\"p\">:</span> <span class=\"kc\">true</span>\n            <span class=\"p\">}</span>\n        <span class=\"p\">]</span>\n<span class=\"p\">}</span>\n</code></pre></div>",
        "id": 201127321,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1592392286
    },
    {
        "content": "<p>if I don't do step 2 above and I build with publish..../2020Jun and copy to website\\, it does not complain, but then the history page does not point to the right location</p>",
        "id": 201127986,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1592392853
    },
    {
        "content": "<p><a href=\"/user_uploads/10155/hbVYAJ3s7GXlCdvDVJojDKlk/image.png\">image.png</a> <br>\ni.e. this link should point to core/2020Jun but it points to core</p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/hbVYAJ3s7GXlCdvDVJojDKlk/image.png\" title=\"image.png\"><img src=\"/user_uploads/10155/hbVYAJ3s7GXlCdvDVJojDKlk/image.png\"></a></div>",
        "id": 201128153,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1592393038
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191832\">Jose Costa Teixeira</span> <a href=\"#narrow/stream/179252-IG-creation/topic/IG.20releases/near/201111636\">said</a>:</p>\n<blockquote>\n<p>any suggestion? </p>\n<ol>\n<li>truncated sample ig</li>\n<li>any other ig?</li>\n</ol>\n</blockquote>\n<p>Likely start from scratch. sample ig is got lots of history that weighs it down.</p>",
        "id": 201155803,
        "sender_full_name": "John Moehrke",
        "timestamp": 1592406882
    },
    {
        "content": "<p>is this new sample going to be FSH centric?</p>",
        "id": 201155889,
        "sender_full_name": "John Moehrke",
        "timestamp": 1592406920
    },
    {
        "content": "<p>FSH-centric - that shouldn't change the publication.</p>",
        "id": 201156893,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1592407341
    },
    {
        "content": "<p>If the question is however - is this sushi-centric? - I will do it for the canonical toolset. I presume sushi will still populate the same things even with the new config. So also here, it <em>shouldn't</em> change the publication - and if it does we can raise the flag</p>",
        "id": 201156970,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1592407380
    },
    {
        "content": "<p>okay, I might be behind on sushi use. Last I did a this, the build directory had only a FSH folder, and the FSH folder had ig-data folder with everything else. Is that not the layout now?</p>",
        "id": 201157692,
        "sender_full_name": "John Moehrke",
        "timestamp": 1592407656
    },
    {
        "content": "<p>I look forward to your streamlined version. Yesterday I spent many hours moving IHE PIXm word supplement into an sample-ig based build project with some IHE spices. Not hard, but not done.</p>",
        "id": 201157986,
        "sender_full_name": "John Moehrke",
        "timestamp": 1592407790
    },
    {
        "content": "<p>The layout is fsh folder as a sibling of the input folder. I will put that in the IHE model IG or somewhere.</p>",
        "id": 201173180,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1592414645
    },
    {
        "content": "<p>Now I'm hoping to see if Grahame, Oliver or anyone to advise on the one issue I'm missing - about package.tgz  expected url X but found Y.</p>",
        "id": 201173181,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1592414647
    },
    {
        "content": "<p>the url in the package is different from the one you said it should have - is that true?</p>",
        "id": 201185868,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1592420393
    },
    {
        "content": "<p>the URL in the package is created, not sure if from the package-list or from the command line I give it..</p>",
        "id": 201186264,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1592420562
    },
    {
        "content": "<p>no. the build process makes the package, and it doesn't use package-list.json as input.</p>",
        "id": 201186422,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1592420636
    },
    {
        "content": "<p>My assumption is:<br>\nMilestone url =  <a href=\"http://hl7belgium.org/fhir/core/2020Jun\">http://hl7belgium.org/fhir/core/2020Jun</a><br>\nci-build url = canonical url = <a href=\"http://hl7belgium.org/fhir/core\">http://hl7belgium.org/fhir/core</a>  (without the 2020Jun)</p>",
        "id": 201186524,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1592420666
    },
    {
        "content": "<p>ci-build is never the canonical</p>",
        "id": 201186644,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1592420738
    },
    {
        "content": "<p>that would be awful</p>",
        "id": 201186652,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1592420747
    },
    {
        "content": "<p>i thought it would be seen as a a \"base \" url</p>",
        "id": 201186752,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1592420784
    },
    {
        "content": "<p>btw, it's here</p>",
        "id": 201186761,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1592420790
    },
    {
        "content": "<p><a href=\"https://github.com/costateixeira/ig-publication\">https://github.com/costateixeira/ig-publication</a></p>",
        "id": 201186765,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1592420791
    },
    {
        "content": "<p>so I should change the ci-build URL to <code>.../core/development</code>, and then rebuild with that new URL in the  -publish parameter?</p>",
        "id": 201186871,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1592420870
    },
    {
        "content": "<p>the ci-build would usually point to the IG on <a href=\"http://build.fhir.org\">build.fhir.org</a></p>",
        "id": 201187015,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1592420940
    },
    {
        "content": "<p>yes, i'll do that (the build.fhir ci  is what I use anyway)</p>",
        "id": 201187229,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1592421037
    },
    {
        "content": "<p>that doesn't resolve the problem though, which appears to be that the url in the package is wrong - have you checked what it says?</p>",
        "id": 201187770,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1592421370
    },
    {
        "content": "<p>(waiting for rollback of the changes so that I can give proper information)</p>",
        "id": 201188823,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1592421976
    },
    {
        "content": "<p>i had updated the package-list in my source folder (which I use for the -publish)<br>\nbut not the one in the website (where I put the results and I use for the final build)</p>",
        "id": 201189553,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1592422391
    },
    {
        "content": "<p>my 202Jun folder is stable, i don't touch it.<br>\nMy package.json inside package.tgz has this</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"p\">{</span>\n  <span class=\"nt\">&quot;name&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;hl7.be.fhir.core&quot;</span><span class=\"p\">,</span>\n  <span class=\"nt\">&quot;version&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;2020Jun&quot;</span><span class=\"p\">,</span>\n  <span class=\"nt\">&quot;tools-version&quot;</span><span class=\"p\">:</span> <span class=\"mi\">3</span><span class=\"p\">,</span>\n  <span class=\"nt\">&quot;type&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;fhir.ig&quot;</span><span class=\"p\">,</span>\n  <span class=\"nt\">&quot;date&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;20200617211504&quot;</span><span class=\"p\">,</span>\n  <span class=\"nt\">&quot;license&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;CC0-1.0&quot;</span><span class=\"p\">,</span>\n  <span class=\"nt\">&quot;canonical&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;http://hl7belgium.org/fhir/core&quot;</span><span class=\"p\">,</span>\n  <span class=\"nt\">&quot;url&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;http://build.fhir.org/ig/hl7-be/be-core&quot;</span><span class=\"p\">,</span>\n  <span class=\"nt\">&quot;title&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;Your User Friendly Name for MyIG Here&quot;</span><span class=\"p\">,</span>\n  <span class=\"nt\">&quot;description&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;A brief description of what MyIG is about (probably the same text as in your readme) (built Wed, Jun 17, 2020 21:15+0200+02:00)&quot;</span><span class=\"p\">,</span>\n  <span class=\"nt\">&quot;fhirVersions&quot;</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n    <span class=\"s2\">&quot;4.0.1&quot;</span>\n  <span class=\"p\">],</span>\n  <span class=\"nt\">&quot;dependencies&quot;</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n    <span class=\"nt\">&quot;hl7.fhir.r4.core&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;4.0.1&quot;</span>\n  <span class=\"p\">},</span>\n  <span class=\"nt\">&quot;author&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;HL7 International - [Some] Work Group&quot;</span><span class=\"p\">,</span>\n  <span class=\"nt\">&quot;directories&quot;</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n    <span class=\"nt\">&quot;lib&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;package&quot;</span><span class=\"p\">,</span>\n    <span class=\"nt\">&quot;example&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;example&quot;</span>\n  <span class=\"p\">}</span>\n<span class=\"p\">}</span>\n</code></pre></div>",
        "id": 201189615,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1592422437
    },
    {
        "content": "<p>and my package-list has this:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"p\">{</span>\n    <span class=\"nt\">&quot;package-id&quot;</span> <span class=\"p\">:</span> <span class=\"s2\">&quot;hl7.be.fhir.core&quot;</span><span class=\"p\">,</span>\n    <span class=\"nt\">&quot;title&quot;</span> <span class=\"p\">:</span> <span class=\"s2\">&quot;Sample IG&quot;</span><span class=\"p\">,</span>\n    <span class=\"nt\">&quot;canonical&quot;</span> <span class=\"p\">:</span> <span class=\"s2\">&quot;http://hl7belgium.org/fhir/core&quot;</span><span class=\"p\">,</span>\n    <span class=\"nt\">&quot;introduction&quot;</span> <span class=\"p\">:</span> <span class=\"s2\">&quot;The introduction that should appear in the FHIR IG registry&quot;</span><span class=\"p\">,</span>\n    <span class=\"nt\">&quot;list&quot;</span> <span class=\"p\">:</span> <span class=\"p\">[</span>\n        <span class=\"p\">{</span>\n           <span class=\"nt\">&quot;version&quot;</span> <span class=\"p\">:</span> <span class=\"s2\">&quot;current&quot;</span><span class=\"p\">,</span>\n            <span class=\"nt\">&quot;desc&quot;</span> <span class=\"p\">:</span> <span class=\"s2\">&quot;Continuous Integration Build (latest in version control)&quot;</span><span class=\"p\">,</span>\n            <span class=\"nt\">&quot;path&quot;</span> <span class=\"p\">:</span> <span class=\"s2\">&quot;http://build.fhir.org/ig/hl7-be/be-core&quot;</span><span class=\"p\">,</span>\n            <span class=\"nt\">&quot;status&quot;</span> <span class=\"p\">:</span> <span class=\"s2\">&quot;ci-build&quot;</span><span class=\"p\">,</span>\n            <span class=\"nt\">&quot;current&quot;</span> <span class=\"p\">:</span> <span class=\"kc\">true</span>\n           <span class=\"p\">},</span>\n           <span class=\"p\">{</span>\n            <span class=\"nt\">&quot;version&quot;</span> <span class=\"p\">:</span> <span class=\"s2\">&quot;2020Jun&quot;</span><span class=\"p\">,</span>\n             <span class=\"nt\">&quot;desc&quot;</span> <span class=\"p\">:</span> <span class=\"s2\">&quot;2020 June Release&quot;</span><span class=\"p\">,</span>\n             <span class=\"nt\">&quot;path&quot;</span> <span class=\"p\">:</span> <span class=\"s2\">&quot;http://hl7belgium.org/fhir/core/2020Jun&quot;</span><span class=\"p\">,</span>\n             <span class=\"nt\">&quot;status&quot;</span> <span class=\"p\">:</span> <span class=\"s2\">&quot;ballot&quot;</span><span class=\"p\">,</span>\n             <span class=\"nt\">&quot;date&quot;</span> <span class=\"p\">:</span> <span class=\"s2\">&quot;2020-06-15&quot;</span><span class=\"p\">,</span>\n             <span class=\"nt\">&quot;fhirversion&quot;</span> <span class=\"p\">:</span> <span class=\"s2\">&quot;4.0.1&quot;</span><span class=\"p\">,</span>\n             <span class=\"nt\">&quot;sequence&quot;</span> <span class=\"p\">:</span> <span class=\"mi\">1</span><span class=\"p\">,</span>\n             <span class=\"nt\">&quot;current&quot;</span> <span class=\"p\">:</span> <span class=\"kc\">true</span>\n            <span class=\"p\">}</span>\n        <span class=\"p\">]</span>\n<span class=\"p\">}</span>\n</code></pre></div>",
        "id": 201189726,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1592422487
    },
    {
        "content": "<p>i am getting this<br>\nProblem with C:\\ImplementationGuides\\Publication\\ig-publication\\website\\.\\package.tgz: expected url <a href=\"http://hl7belgium.org/fhir/core/2020Jun\">http://hl7belgium.org/fhir/core/2020Jun</a> but found <a href=\"http://build.fhir.org/ig/hl7-be/be-core\">http://build.fhir.org/ig/hl7-be/be-core</a></p>",
        "id": 201190185,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1592422697
    },
    {
        "content": "<p>why is it expecting <a href=\"http://hl7belgium.org/fhir/core/2020Jun\">http://hl7belgium.org/fhir/core/2020Jun</a> now?</p>",
        "id": 201190598,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1592422935
    },
    {
        "content": "<p>where does that expectation come from?</p>",
        "id": 201190614,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1592422952
    },
    {
        "content": "<p>so the package in <a href=\"http://hl7belgium.org/fhir/core/2020Jun\">http://hl7belgium.org/fhir/core/2020Jun</a> claims that the URL for the package is <a href=\"http://build.fhir.org/ig/hl7-be/be-core\">http://build.fhir.org/ig/hl7-be/be-core</a> - well, of course, it's not. The URL for the package is <a href=\"http://hl7belgium.org/fhir/core/2020Jun\">http://hl7belgium.org/fhir/core/2020Jun</a>. The publication tooling is checking that you have all your links correct</p>",
        "id": 201190865,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1592423097
    },
    {
        "content": "<p>i think i have messed up ci-build vs current</p>",
        "id": 201191517,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1592423434
    },
    {
        "content": "<p>I built the 2020Jun and copied it to the website\\core\\2020Jun folder, that seems fine.<br>\nNow for the milestone, ie. the one that is going to be in <a href=\"http://hl7belgium.org/fhir/core\">http://hl7belgium.org/fhir/core</a> and in my website\\core folder, what do I need to change so that it assumes the correct  url -  <a href=\"http://hl7belgium.org/fhir/core\">http://hl7belgium.org/fhir/core</a> ?</p>",
        "id": 201191808,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1592423603
    },
    {
        "content": "<p>I think that you need to build it again with -web</p>",
        "id": 201192915,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1592424162
    },
    {
        "content": "<p>but I'm not sure about that</p>",
        "id": 201192926,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1592424168
    },
    {
        "content": "<p>i think that is what idid, trying that again:<br>\nrunning the same content as I used for the 2020Jun, running <br>\n-publish <a href=\"http://hl7belgium.org/fhir/core\">http://hl7belgium.org/fhir/core</a> -web -milestone<br>\n...<br>\nthe resulting package says <br>\n  \"url\": \"<a href=\"http://hl7belgium.org/fhir/core\">http://hl7belgium.org/fhir/core</a>\",</p>",
        "id": 201193847,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1592424584
    },
    {
        "content": "<p>package list contains only the ci-build and the milestone - does it need to contain another entry?</p>",
        "id": 201193984,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1592424637
    },
    {
        "content": "<p>same thing:<br>\n expected url <a href=\"http://hl7belgium.org/fhir/core/2020Jun\">http://hl7belgium.org/fhir/core/2020Jun</a> but found <a href=\"http://hl7belgium.org/fhir/core\">http://hl7belgium.org/fhir/core</a></p>",
        "id": 201194539,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1592424918
    },
    {
        "content": "<p>(sorry for all these, but after this I can make the documentation for others to avoid the same doubts I have now)</p>",
        "id": 201194617,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1592424959
    },
    {
        "content": "<p>the history page now seems to be improved: <br>\n<a href=\"/user_uploads/10155/sEFyI6ffbWAu0vh9a_ZJwgOQ/image.png\">image.png</a> <br>\nlink 1 points to <a href=\"http://hl7belgium.org/fhir/core\">http://hl7belgium.org/fhir/core</a><br>\nlink 2 points to <a href=\"http://buildfhir.org\">buildfhir.org</a><br>\nlink 3 points to <a href=\"http://hl7belgium.org/fhir/core/2020Jun\">http://hl7belgium.org/fhir/core/2020Jun</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/sEFyI6ffbWAu0vh9a_ZJwgOQ/image.png\" title=\"image.png\"><img src=\"/user_uploads/10155/sEFyI6ffbWAu0vh9a_ZJwgOQ/image.png\"></a></div>",
        "id": 201197323,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1592426343
    },
    {
        "content": "<p>so this is good now, right?</p>",
        "id": 201197545,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1592426451
    },
    {
        "content": "<p>i still got the error</p>",
        "id": 201198786,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1592427073
    },
    {
        "content": "<p>Problem with C:\\ImplementationGuides\\Publication\\ig-publication\\website\\.\\package.tgz: expected url <a href=\"http://hl7belgium.org/fhir/core/2020Jun\">http://hl7belgium.org/fhir/core/2020Jun</a> but found <a href=\"http://hl7belgium.org/fhir/core\">http://hl7belgium.org/fhir/core</a></p>",
        "id": 201198825,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1592427090
    },
    {
        "content": "<p>(When it's good I will celebrate loudly) :)<br>\nI mean I will throw it in a wiki page with a step by step for dummies like me</p>",
        "id": 201198856,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1592427109
    },
    {
        "content": "<p>what's with the \\.\\?</p>",
        "id": 201199636,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1592427489
    },
    {
        "content": "<p>no idea how that got there</p>",
        "id": 201199793,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1592427582
    },
    {
        "content": "<p>so the \\.\\ happened because of the command line i was using<br>\n<code>java -jar ..\\org.hl7.fhir.publisher.jar -publish-update -folder . -registry ..\\ig-registry\\fhir-ig-list.json</code></p>",
        "id": 201240626,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1592468971
    },
    {
        "content": "<p>if I run it from a different folder the . is gone, result is the same : it still complains about the error but the links seem ok</p>",
        "id": 201240713,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1592469006
    },
    {
        "content": "<p>do i need to use the -root parameter ?</p>",
        "id": 201240773,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1592469033
    },
    {
        "content": "<p>I could not understand from the publisher code where it gets the \"expected url\" from.</p>",
        "id": 201240865,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1592469100
    },
    {
        "content": "<p>Looking at the code : <br>\nI think it is looking at my package-list which says the version is 2020Jun and the path is .../core/2020Jun, which is why it mismatches, because when I build, i say the path for the milestone is .../core</p>",
        "id": 201246157,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1592472900
    },
    {
        "content": "<p>so I think it is down to : <br>\nWhat should package-list look like when running the publisher with the -publish for the milestone? (i.e. not when running with -publish to generate the 2020Jun, nor the final publish-update)</p>",
        "id": 201249103,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1592474985
    },
    {
        "content": "<p>while that settles..<br>\n<a href=\"/user_uploads/10155/VBs3tgOxhxuSxEDyvTqP8_ps/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/VBs3tgOxhxuSxEDyvTqP8_ps/image.png\" title=\"image.png\"><img src=\"/user_uploads/10155/VBs3tgOxhxuSxEDyvTqP8_ps/image.png\"></a></div>",
        "id": 201332065,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1592518447
    },
    {
        "content": "<p>I managed to apply the ig template to the history. Now I need to make this reproducible somehow.</p>",
        "id": 201332138,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1592518517
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191832\">@Jose Costa Teixeira</span> Have you resolved how to fix this? I'm getting similar errors when trying to generate my history file</p>\n<div class=\"codehilite\"><pre><span></span><code>Problem #15 with [blah]/myig/website/2021-03/package.tgz: expected url [blah]/myig/2021-03 but found [blah]/myig\n</code></pre></div>",
        "id": 228492837,
        "sender_full_name": " Bob Milius",
        "timestamp": 1614721973
    },
    {
        "content": "<p>Nope. I'm waiting for Grahame to produce some basic guidance, my publication is no longer working.</p>",
        "id": 228495767,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1614723106
    },
    {
        "content": "<p>if you are further ahead <span class=\"user-mention\" data-user-id=\"191916\">@ Bob Milius</span> I'd love to see how you are doing, then we can produce some documentation ourselves</p>",
        "id": 228495930,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1614723167
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191832\">@Jose Costa Teixeira</span> I had it working with an older version of the publisher (last summer). Now it's acting up in the way you describe in this thread.  I'm in the process of re-tracing my steps.</p>",
        "id": 228517566,
        "sender_full_name": " Bob Milius",
        "timestamp": 1614734184
    }
]