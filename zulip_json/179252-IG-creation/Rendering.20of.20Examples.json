[
    {
        "content": "<p>One area for future improvement of the IG publisher tool chain is rendering of examples.<br>\nFor many of our example instances, the default renderings are not helpful to the reader, and require perusal of the JSON to really see the example content.  This reduces the pedagogical value of the examples significantly.<br>\nWe have resorted to workarounds like incorporating <a href=\"http://hl7.org/fhir/us/davinci-pdex-plan-net/InsurancePlan-AcmeQHPBronze.html\">FSH-like renderings</a> of the content as a workaround.  We suggesting including an optional FSH rendering for each instance (rendered with GoFSH) in the notes section.<br>\nSimilarly, the functionality of <span class=\"user-mention\" data-user-id=\"191401\">@Eric Haas</span> tools for generating Capability Statement renderings should be incorporated into the publisher.</p>\n<p>I have created an issue to record this request -- <a href=\"https://github.com/HL7/fhir-ig-publisher/issues/331\">https://github.com/HL7/fhir-ig-publisher/issues/331</a>.</p>",
        "id": 259868621,
        "sender_full_name": "Saul Kravitz",
        "timestamp": 1635776152
    },
    {
        "content": "<p>Is GoFSH sufficiently robust now we can reliably throw it against random examples?  (We can't make this publishing feature dependent on the source files being maintained in FSH.)</p>",
        "id": 259869131,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1635776389
    },
    {
        "content": "<blockquote>\n<p>For many of our example instances, the default renderings are not helpful to the reader,</p>\n</blockquote>\n<p>Is this assertion true for all resource types?</p>",
        "id": 259871759,
        "sender_full_name": "Eric Haas",
        "timestamp": 1635777615
    },
    {
        "content": "<p>Assuming  these rendering don't requires a knowledge of FSH syntax</p>",
        "id": 259871969,
        "sender_full_name": "Eric Haas",
        "timestamp": 1635777731
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> -- yes, the idea would be to run them against the JSON generated by Sushi since that would flatten all of the rulesets.   GoFSH is pretty robust at this stage.   I'm going to do the experiment on mCODE.  The one issue I've found so far is that GoFSH currently generates aliases for codesystems (since that is helpful if you are going JSON to FSH for an IG).   See an example <a href=\"http://build.fhir.org/ig/HL7/fhir-mCODE-ig/branches/fix-extended-example/Observation-genomic-region-studied-jenny-m.html\">here</a>.</p>\n<p><span class=\"user-mention\" data-user-id=\"191401\">@Eric Haas</span> -- currently you get a partial translation into text or the original JSON.   I'm suggesting adding a full translation into FSH as an addition, not an alternative to a 'proper' text rendering.   Assuming (as <span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> asks) that GoFSH is robust, this is a much more scalable approach than hand rolling 'proper' renderings for each profile (including extensions, etc).</p>",
        "id": 259878612,
        "sender_full_name": "Saul Kravitz",
        "timestamp": 1635780870
    },
    {
        "content": "<p>so what is the proposal? another view or a replacement of the narrative view?</p>",
        "id": 259879844,
        "sender_full_name": "Eric Haas",
        "timestamp": 1635781547
    },
    {
        "content": "<p>I'd like to explore the idea of having rendering plugins / options.</p>",
        "id": 259882234,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1635782536
    },
    {
        "content": "<p>If the publisher can send the resources through some procedure and get the output from that procedure, then we woudn't worry about eventual gofsh issues</p>",
        "id": 259882429,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1635782625
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191832\">@Jose Costa Teixeira</span>  -- no argument from me re rendering plugins/options..... can you please expand on the \"eventual gofsh issues\"?</p>",
        "id": 259887225,
        "sender_full_name": "Saul Kravitz",
        "timestamp": 1635784757
    },
    {
        "content": "<p>we don't want tools to be too closely coupled. If gofsh has issues or if it doesn't have a good canonical form of presenting the results, publisher should not worry about that.</p>",
        "id": 259887558,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1635784916
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191401\">Eric Haas</span> <a href=\"#narrow/stream/179252-IG-creation/topic/Rendering.20of.20Examples/near/259879844\">said</a>:</p>\n<blockquote>\n<p>so what is the proposal? another view or a replacement of the narrative view?</p>\n</blockquote>\n<p><span class=\"user-mention\" data-user-id=\"191401\">@Eric Haas</span> another view, I'd guess?.. <br>\n(Not that I'm too happy with the narrative view)</p>",
        "id": 259887978,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1635785112
    },
    {
        "content": "<p>I think having GoFSH renderings will be useful.  I think having templated narratives will, in the end, produce something that's even more human-readable (and also useful for implementation), but that will take more work.</p>",
        "id": 259889168,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1635785687
    },
    {
        "content": "<p>my point is: Piping stuff through GoFSH could simply be one of the templated narratives</p>",
        "id": 259891862,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1635786663
    },
    {
        "content": "<p>(or one of the possible views - of which \"narrative\" is one)</p>",
        "id": 259892904,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1635787179
    },
    {
        "content": "<p>I think <span class=\"user-mention\" data-user-id=\"191401\">@Eric Haas</span> may be asking where on the page the new rendering appears.<br>\nIn my current effort we are sticking the FSH rendering in the 'notes' section.</p>",
        "id": 259893079,
        "sender_full_name": "Saul Kravitz",
        "timestamp": 1635787258
    },
    {
        "content": "<p>In the approach I propose, the FSH rendering would show up in the \"FSH\" tab</p>",
        "id": 259895270,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1635788361
    },
    {
        "content": "<p>toggleable  ( same for future YAML tab)?</p>",
        "id": 259907336,
        "sender_full_name": "Eric Haas",
        "timestamp": 1635794007
    },
    {
        "content": "<p>I'm concerned that if we start having FSH or YAML tabs, people will start to assume that's legal for exchange.</p>",
        "id": 259909201,
        "sender_full_name": "David Pyke",
        "timestamp": 1635795067
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191401\">Eric Haas</span> <a href=\"#narrow/stream/179252-IG-creation/topic/Rendering.20of.20Examples/near/259907336\">said</a>:</p>\n<blockquote>\n<p>toggleable  ( same for future YAML tab)?</p>\n</blockquote>\n<p>by definition, templates (IMO) would be add-ons. I don't think there was any discussion on whether we'd allow plugins or if everything would be in the base template, in which case they'd have to be toggleable.</p>",
        "id": 259909812,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1635795406
    },
    {
        "content": "<p>Keeping yaml out of the equation:<br>\n<span class=\"user-mention silent\" data-user-id=\"192587\">David Pyke</span> <a href=\"#narrow/stream/179252-IG-creation/topic/Rendering.20of.20Examples/near/259909201\">said</a>:</p>\n<blockquote>\n<p>I'm concerned that if we start having FSH or YAML tabs, people will start to assume that's legal for exchange.</p>\n</blockquote>\n<p>FSH would be a rendering. Same as if we have a diagram or any other rendering. I don't see a big additional risk.</p>",
        "id": 259910419,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1635795709
    },
    {
        "content": "<p>honestly, I hate the goFSH example provided in the task. horrible</p>",
        "id": 259917979,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1635799233
    },
    {
        "content": "<blockquote>\n<p>require perusal of the JSON to really see the example content</p>\n</blockquote>\n<p>So? you say that like it's a bad thing...</p>",
        "id": 259918015,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1635799259
    },
    {
        "content": "<p>however: </p>\n<ul>\n<li>there's no reason people can't contribute to the rendering code </li>\n<li>there's no reason you can't make comment about what specifically about the rendering you think could be improved (other than 'show me the json')</li>\n</ul>",
        "id": 259918202,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1635799303
    },
    {
        "content": "<p>there's some tooling constraints here:</p>\n<ul>\n<li>I'm not adding another dependency to the build tooling beyond java + ruby</li>\n</ul>",
        "id": 259918300,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1635799332
    },
    {
        "content": "<p>note that there's two kind of rendering in the specifications:</p>\n<ul>\n<li>a hand written rendering of particular resources</li>\n<li>a generic profile driven renderer. </li>\n</ul>\n<p>most negative comments relate to the second, but it's pretty hard to get better. References, in particular, are hard to get right in a generic fashion</p>",
        "id": 259918473,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1635799432
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"215604\">Saul Kravitz</span> <a href=\"#narrow/stream/179252-IG-creation/topic/Rendering.20of.20Examples/near/259868621\">said</a>:</p>\n<blockquote>\n<p>One area for future improvement of the IG publisher tool chain is rendering of examples.<br>\nFor many of our example instances, the default renderings are not helpful to the reader, and require perusal of the JSON to really see the example content.  This reduces the pedagogical value of the examples significantly.<br>\nWe have resorted to workarounds like incorporating <a href=\"http://hl7.org/fhir/us/davinci-pdex-plan-net/InsurancePlan-AcmeQHPBronze.html\">FSH-like renderings</a> of the content as a workaround.  We suggesting including an optional FSH rendering for each instance (rendered with GoFSH) in the notes section.<br>\nSimilarly, the functionality of <span class=\"user-mention silent\" data-user-id=\"191401\">Eric Haas</span> tools for generating Capability Statement renderings should be incorporated into the publisher.</p>\n<p>I have created an issue to record this request -- <a href=\"https://github.com/HL7/fhir-ig-publisher/issues/331\">https://github.com/HL7/fhir-ig-publisher/issues/331</a>.</p>\n</blockquote>\n<p><span class=\"user-mention\" data-user-id=\"215604\">@Saul Kravitz</span>  rather than doing this, why wouldn't you just add your own narrative to your examples.  If you don't like the default rendering which is a hard thing to generically create, add your own narrative which will be used in the IG profile pages.</p>",
        "id": 259918693,
        "sender_full_name": "Jean Duteau",
        "timestamp": 1635799534
    },
    {
        "content": "<p>YAML tab would require that YAML be a balloted form of expression for FHIR artifacts...<br>\nHand editing narrative is challenging to keep right over time.  As example data values evolve, you have to remember to change the narrative too.</p>",
        "id": 259922647,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1635801330
    },
    {
        "content": "<p>I'm ok to improve the rendering, and to invest time in it.</p>",
        "id": 259923679,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1635801945
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"192166\">@Jean Duteau</span> Hi Jean,  I'm only suggesting to make optional for others what I've done in the past (see <a href=\"https://build.fhir.org/ig/HL7/davinci-pdex-plan-net/InsurancePlan-AcmeQHPGold.html\">Davinci-Plan-Net</a> and what I'm planning to do for mCode (see <a href=\"#narrow/stream/179252-IG-creation/topic/Rendering.20of.20Examples\">example</a> ) in the near future (assuming I have time).  I think you would agree that the default rendering in the example that shows one of seven genes in a panel does not really illustrate a seven gene panel.  That is my motivation, not to take pot shots at anyone or anything.   Trying my best to be constructive.</p>",
        "id": 259928501,
        "sender_full_name": "Saul Kravitz",
        "timestamp": 1635804752
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191320\">Lloyd McKenzie</span> <a href=\"#narrow/stream/179252-IG-creation/topic/Rendering.20of.20Examples/near/259922647\">said</a>:</p>\n<blockquote>\n<p>YAML tab would require that YAML be a balloted form of expression for FHIR artifacts...<br>\nHand editing narrative is challenging to keep right over time.  As example data values evolve, you have to remember to change the narrative too.</p>\n</blockquote>\n<p>... and a FSH tab would require that FSH be a balloted form of expression for FHIR artifacts too right?</p>",
        "id": 259928887,
        "sender_full_name": "Eric Haas",
        "timestamp": 1635804979
    },
    {
        "content": "<p>FSH is a balloted form of expression - for authoring.  If we included a tab with it, we'd need to make clear it wasn't for exchange, but that should be doable.</p>",
        "id": 259929147,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1635805169
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191316\">Grahame Grieve</span> <a href=\"#narrow/stream/179252-IG-creation/topic/Rendering.20of.20Examples/near/259923679\">said</a>:</p>\n<blockquote>\n<p>I'm ok to improve the rendering, and to invest time in it.</p>\n</blockquote>\n<p>We could allow rendering that doesn't need to live in the same code base - besides the \"official\". This way, we'd care about the narrative, but allow other renderings. There's not going to be one soup flavour that meets everyone's taste, so we can stick to the basic rendering and allow \"plugins\".</p>",
        "id": 259980136,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1635851087
    },
    {
        "content": "<p>I believe there's now support for liquid templates for narrative?</p>",
        "id": 260086915,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1635911011
    },
    {
        "content": "<p>yes but that's pretty hard work</p>",
        "id": 260087001,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1635911098
    },
    {
        "content": "<p>We can push those liquid templates into the 'standard' templates if/when someone decides to <em>do</em> the work for a given resource.</p>",
        "id": 260087339,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1635911528
    },
    {
        "content": "<p>I spent a couple of hours on the automatic rendering for IGs:</p>",
        "id": 260097032,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1635924173
    },
    {
        "content": "<p><a href=\"/user_uploads/10155/yk2sdjjpkEO0Hs5LYJgl2T22/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/yk2sdjjpkEO0Hs5LYJgl2T22/image.png\" title=\"image.png\"><img src=\"/user_uploads/10155/yk2sdjjpkEO0Hs5LYJgl2T22/image.png\"></a></div>",
        "id": 260097108,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1635924245
    },
    {
        "content": "<p>For your consideration:<br>\nHere is where I think we are going with mCODE -- <a href=\"http://build.fhir.org/ig/HL7/fhir-mCODE-ig/branches/fshnotes2/artifacts.html#example-example-instances\">http://build.fhir.org/ig/HL7/fhir-mCODE-ig/branches/fshnotes2/artifacts.html#example-example-instances</a>. </p>\n<p>The most interesting cases are where there is a big difference between the publisher's rendering and the FSH.  This happens for two reasons:<br>\n1) The publisher dereferences references to pull in additional information (e.g., bundles).   FSH doesn't.<br>\n2) Where the default rendering is very limited.</p>",
        "id": 260207642,
        "sender_full_name": "Saul Kravitz",
        "timestamp": 1635979458
    },
    {
        "content": "<p>Given that narrative is supposed to be targeted at clinicians/patients/other 'normal' humans, I don't see how the FSH is an improvement on what we've got now.  The narrative is NOT supposed to convey everything in the instance that might be of interest to developers...</p>",
        "id": 260208773,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1635980223
    },
    {
        "content": "<p>right. that's why I think that the FSH based content is going in the wrong direction. If you want to know that, look at the json</p>",
        "id": 260211569,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1635982058
    },
    {
        "content": "<p>I share your aspiration for the narrative.</p>",
        "id": 260225501,
        "sender_full_name": "Saul Kravitz",
        "timestamp": 1635996764
    }
]