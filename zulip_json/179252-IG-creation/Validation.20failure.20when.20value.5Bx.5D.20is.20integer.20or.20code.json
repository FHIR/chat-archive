[
    {
        "content": "<p>I'm having validation issues during publication when a field is defined as either integer or code (also date/code).  The error message says that the value only allows for one type, when it is clearly defined for two.</p>\n<p>Observation.value.ofType(dateTime).extension[0].extension[3] (l58/c12)  error   The Extension '<a href=\"http://hl7.org/fhir/us/vrdr/StructureDefinition/Date-Time\">http://hl7.org/fhir/us/vrdr/StructureDefinition/Date-Time</a>' <strong>definition allows for the types [code] but found type time</strong><br>\nObservation.value.ofType(dateTime).extension[0].extension[3].value.ofType(time) (l61/c12)   error   This element does not match any known slice defined in the profile <a href=\"http://hl7.org/fhir/us/vrdr/StructureDefinition/Date-Time\">http://hl7.org/fhir/us/vrdr/StructureDefinition/Date-Time</a> and slicing is CLOSED: Observation.value.ofType(dateTime).extension[0].extension[3].value.ofType(time): Does not match slice 'valueCode'</p>\n<p>The value of the extension is:</p>\n<div class=\"codehilite\" data-code-language=\"JSON\"><pre><span></span><code><span class=\"p\">{</span><span class=\"w\"></span>\n<span class=\"w\">            </span><span class=\"nt\">\"url\"</span><span class=\"w\"> </span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"http://hl7.org/fhir/us/vrdr/StructureDefinition/Date-Time\"</span><span class=\"p\">,</span><span class=\"w\"></span>\n<span class=\"w\">            </span><span class=\"nt\">\"valueTime\"</span><span class=\"w\"> </span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"12:01:02\"</span><span class=\"w\"></span>\n<span class=\"w\">          </span><span class=\"p\">}</span><span class=\"w\"></span>\n</code></pre></div>\n<p><span class=\"user-mention\" data-user-id=\"191469\">@Chris Moesel</span> </p>\n<p>The definition is:   <a href=\"http://build.fhir.org/ig/HL7/vrdr/branches/validationbug/StructureDefinition-Date-Time.html\">http://build.fhir.org/ig/HL7/vrdr/branches/validationbug/StructureDefinition-Date-Time.html</a></p>\n<p>See <a href=\"http://build.fhir.org/ig/HL7/vrdr/branches/validationbug/qa.html#_scratch_ig-build-temp-MKD9WW_repo_fsh-generated_resources_Observation-DeathDate-Example1\">http://build.fhir.org/ig/HL7/vrdr/branches/validationbug/qa.html#_scratch_ig-build-temp-MKD9WW_repo_fsh-generated_resources_Observation-DeathDate-Example1</a>. </p>\n<p>Or, here is the FSH and JSON:<br>\n<a href=\"https://fshschool.org/FSHOnline/#/share/36TljQ1\">https://fshschool.org/FSHOnline/#/share/36TljQ1</a></p>",
        "id": 273896038,
        "sender_full_name": "Saul Kravitz",
        "timestamp": 1646264013
    },
    {
        "content": "<p>Extension is defined incorrectly.  There should be no 'valueCode' element.  If you want to constrain the code slice, it MUST be value[x] with an appropriate id and slice name.</p>",
        "id": 273915430,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1646277146
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> - SUSHI still outputs all extensions like this and they generally don't cause problems.  IG Publisher handles them well since this was an approach that was previously supported (and maybe even encouraged?).  SUSHI will switch to useing <code>value[x]</code> and slicenames in SUSHI 3.0 (since it is a major change).</p>\n<p>That said, when Saul initially asked me about this privately, I thought it might be related to id/path as well.  So I manually modified it to use the <code>Extension.value[x]:valueCode</code> id and <code>Extension.value[x]</code> path instead -- but still got the <em>same exact</em> error.  So I don't think that is it.</p>",
        "id": 273992541,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1646322791
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span></p>",
        "id": 274018638,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1646332837
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> <br>\nIs this:<br>\n  a) acknowledged as an IGP defect?    (from <span class=\"user-mention\" data-user-id=\"191469\">@Chris Moesel</span> exploration, it seems like it may be)<br>\n  b) if yes to a, likely to be fixed?</p>\n<p>Just trying to decide whether I can have real examples, or just examples in the narrative.</p>\n<p>thx</p>",
        "id": 274912237,
        "sender_full_name": "Saul Kravitz",
        "timestamp": 1646955893
    },
    {
        "content": "<p>it's still on my todo list</p>",
        "id": 274912621,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1646956188
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> I get this trying to run that branch referred to above:</p>",
        "id": 275359821,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1647343597
    },
    {
        "content": "<div class=\"codehilite\"><pre><span></span><code>onGenerate.jira.generate:\n     [xslt] Processing /Users/grahamegrieve/temp/igs/vrdr/template/package-list.tmp.xml to /Users/grahamegrieve/temp/igs/vrdr/template/package-list.xml\n     [xslt] Loading stylesheet /Users/grahamegrieve/temp/igs/vrdr/template/scripts/onGenerate.package-list.xslt\n     [xslt] Processing /Users/grahamegrieve/temp/igs/vrdr/template/jira.tmp.xml to /Users/grahamegrieve/temp/igs/vrdr/template/jira.xml\n     [xslt] Loading stylesheet /Users/grahamegrieve/temp/igs/vrdr/template/scripts/onGenerate.jira.xslt\n**WARNING** Jira file generation will not be correct because multiple artifacts have the same name (ignoring content in &quot;()&quot;): Date Day\n**WARNING** Jira file generation will not be correct because multiple artifacts have the same name (ignoring content in &quot;()&quot;): Date Month\n**WARNING** Jira file generation will not be correct because multiple artifacts have the same name (ignoring content in &quot;()&quot;): Date Year\n**WARNING** Jira file generation will not be correct because multiple artifacts have the same name (ignoring content in &quot;()&quot;): Partial Date\n**WARNING** Jira file generation will not be correct because multiple artifacts have the same name (ignoring content in &quot;()&quot;): Filing Format\n**WARNING** Jira file generation will not be correct because multiple artifacts have the same name (ignoring content in &quot;()&quot;): Manner of Death\n**WARNING** Jira file generation will not be correct because multiple artifacts have the same name (ignoring content in &quot;()&quot;): Place of Injury\nFound multiple candidates for artifact ValueSet-vrdr-manner-of-death in previous jira-spec-info&lt;artifact xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; id=&quot;StructureDefinition/vrdr-manner-of-death&quot; key=&quot;StructureDefinition-VRDR-Manner-of-Death&quot; name=&quot;Manner of Death&quot;/&gt;&lt;artifact xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; id=&quot;ValueSet/vrdr-manner-of-death&quot; key=&quot;ValueSet-vrdr-Manner-of-Death&quot; name=&quot;Manner of Death VS&quot;/&gt;\n     [xslt] /Users/grahamegrieve/temp/igs/vrdr/template/scripts/onGenerate.jira.xslt:111:7: Fatal Error! Processing terminated by xsl:message at line 111 in onGenerate.jira.xslt\n     [xslt] Failed to process /Users/grahamegrieve/temp/igs/vrdr/template/jira.tmp.xml\nPublishing Content Failed: Fatal error during transformation using /Users/grahamegrieve/temp/igs/vrdr/template/scripts/onGenerate.jira.xslt: Processing terminated by xsl:message at line 111 in onGenerate.jira.xslt; SystemID: file:/Users/grahamegrieve/temp/igs/vrdr/template/scripts/onGenerate.jira.xslt; Line#: 111; Column#: 7 (02:40.0486)\n                                                                                 (02:40.0488)\nThis error was created by the template                                           (02:40.0488)\n</code></pre></div>",
        "id": 275359823,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1647343601
    },
    {
        "content": "<p>this looks like an error in the template to me</p>",
        "id": 275359833,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1647343611
    },
    {
        "content": "<p>That seems to be a pretty clear error message.  Do we know that the names are unique and that there aren't duplicates in the committed jira-spec file?</p>",
        "id": 275369657,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1647349558
    },
    {
        "content": "<p>don't know, but the build shouldn't fail completely for that reason</p>",
        "id": 275426961,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1647374109
    },
    {
        "content": "<p>anyway <span class=\"user-mention\" data-user-id=\"215604\">@Saul Kravitz</span> I'll look at this when it builds</p>",
        "id": 277358717,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1648774407
    },
    {
        "content": "<p>You don't have control over it failing there Grahame.  The transform deliberately chokes with a fatal error.</p>",
        "id": 277361756,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1648777642
    },
    {
        "content": "<p>I don't think it should. It should be error in qa.html</p>",
        "id": 277364528,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1648780814
    },
    {
        "content": "<p>There's no ability there to spit out a QA error.</p>",
        "id": 277368538,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1648785706
    },
    {
        "content": "<p>we could create one.</p>",
        "id": 277369235,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1648786574
    },
    {
        "content": "<p>It's an XSLT that's spits out something else.  With XSLT 1.0, a given transform can only spit out one thing.  We could set up the transform to run in two different modes, one that spits out errors and one that spits out the desired file, then call it twice.  I'm not sure why we'd bother adding that complexity when the problem identified is one that has to be fixed.</p>",
        "id": 277419618,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1648820585
    },
    {
        "content": "<p>what does it spit out?</p>",
        "id": 277472146,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1648844008
    },
    {
        "content": "<p>The target Jira spec file</p>",
        "id": 277484736,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1648851242
    },
    {
        "content": "<p>I could look at that file and pick up errors if it's an OperationOutcome?</p>",
        "id": 277484828,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1648851312
    },
    {
        "content": "<p>I guess the normalization process we use for comparison could strip out OperationOutcomes</p>",
        "id": 277499747,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1648865770
    }
]