[
    {
        "content": "<p>I've created an operation definition in fsh which is giving me this error:<br>\nProcessing Conformance Resources                                                 (00:13.0913)<br>\nPublishing Content Failed: Error parsing /media/veracrypt1/ownCloud/Ready/Sequoia/CQPush/Profile/fsh/build/input/examples/OperationDefinition-ceqsubscribe: Not a JSON Object: null (00:13.0946)<br>\n                                                                                 (00:13.0946)<br>\nUse -? to get command line help                                                  (00:13.0946)<br>\n                                                                                 (00:13.0946)<br>\nStack Dump (for debugging):                                                      (00:13.0947)<br>\njava.lang.Exception: Error parsing /media/veracrypt1/ownCloud/Ready/Sequoia/CQPush/Profile/fsh/build/input/examples/OperationDefinition-ceqsubscribe: Not a JSON Object: null<br>\n        at org.hl7.fhir.igtools.publisher.Publisher.load(Publisher.java:4043)<br>\n        at org.hl7.fhir.igtools.publisher.Publisher.loadConformance(Publisher.java:3604)<br>\n        at org.hl7.fhir.igtools.publisher.Publisher.createIg(Publisher.java:836)<br>\n        at org.hl7.fhir.igtools.publisher.Publisher.execute(Publisher.java:698)<br>\n        at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:7533)<br>\nCaused by: java.lang.IllegalStateException: Not a JSON Object: null<br>\n        at com.google.gson.JsonElement.getAsJsonObject(JsonElement.java:91)<br>\n        at org.hl7.fhir.r4.formats.JsonParser.parseOperationDefinitionProperties(JsonParser.java:19326)<br>\n        at org.hl7.fhir.r4.formats.JsonParser.parseOperationDefinition(JsonParser.java:19204)<br>\n        at org.hl7.fhir.r4.formats.JsonParser.parseResource(JsonParser.java:27598)<br>\n        at org.hl7.fhir.r4.formats.JsonParserBase.parse(JsonParserBase.java:124)<br>\n        at org.hl7.fhir.r4.formats.ParserBase.parse(ParserBase.java:61)<br>\n        at org.hl7.fhir.igtools.publisher.Publisher.parseContent(Publisher.java:4391)<br>\n        at org.hl7.fhir.igtools.publisher.Publisher.parse(Publisher.java:4448)<br>\n        at org.hl7.fhir.igtools.publisher.Publisher.load(Publisher.java:4039)<br>\n        ... 4 more</p>",
        "id": 200561646,
        "sender_full_name": "David Pyke",
        "timestamp": 1591889925
    },
    {
        "content": "<p>This is the definition:<br>\n<a href=\"/user_uploads/10155/B7i_6lLC8ShzmX3sAiAZkfAx/OperationDefinition-ceqsubscribe.json\">OperationDefinition-ceqsubscribe.json</a></p>",
        "id": 200561709,
        "sender_full_name": "David Pyke",
        "timestamp": 1591889954
    },
    {
        "content": "<p>this is the FSH code that created it. <a href=\"/user_uploads/10155/0SNgYaMiv8Js3pEHdxO-sZOt/CEQSubscriptionoperation.fsh\">CEQSubscriptionoperation.fsh</a></p>",
        "id": 200561749,
        "sender_full_name": "David Pyke",
        "timestamp": 1591889974
    },
    {
        "content": "<p>sushi has no problem with it.</p>",
        "id": 200561764,
        "sender_full_name": "David Pyke",
        "timestamp": 1591889982
    },
    {
        "content": "<p>ANy ideas?</p>",
        "id": 200561777,
        "sender_full_name": "David Pyke",
        "timestamp": 1591889987
    },
    {
        "content": "<p>generally, to debug, i run the publisher process separately (because I don't want sushi to change the stuff that I am debugging. <br>\nWith that in mind:</p>\n<ol>\n<li>can you try to run the publisher without sushi? just rename your fsh folder to something else </li>\n<li></li>\n</ol>\n<div class=\"codehilite\"><pre><span></span><code>      &quot;targetProfile&quot;: [&quot;http://hl7.org/fhir/us/core/StructureDefinition/us-core-patient&quot;,&quot;http://hl7.org/fhir/us/core/StructureDefinition/us-core-organization&quot;,&quot;http://hl7.org/fhir/us/core/StructureDefinition/us-core-practitioner&quot;, &quot;RelatedPerson&quot;]\n</code></pre></div>\n\n\n<p>RelatedPerson is not valid as a canonical, is it? - If I were the publisher, I think I'd complain as well<br>\nTry to remove that and run the publisher without sushi, and if that solves it, you know what to change in fsh</p>",
        "id": 200563399,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1591890647
    },
    {
        "content": "<p>I always run sushi and the publsiher separately, I didn't set up the directory structure for the combined build yet.  <br>\nI removed RelatedPerson, no change.  I'm not seeing a null anywhere in the OpDef, might it be referring to a code that doesn't resolve?</p>",
        "id": 200563905,
        "sender_full_name": "David Pyke",
        "timestamp": 1591890866
    },
    {
        "content": "<p>is the entire IG available somewhere?</p>",
        "id": 200564059,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1591890934
    },
    {
        "content": "<p>Only on my computer, I haven't uploaded it anywhere.  I can send the fsh to you?</p>",
        "id": 200564650,
        "sender_full_name": "David Pyke",
        "timestamp": 1591891117
    },
    {
        "content": "<p>is the IG only one fsh? yes please</p>",
        "id": 200564836,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1591891198
    },
    {
        "content": "<p>that's a super weird error. According to the stack, you have a null in your parameters array, but your example doesn't have that. So there's some disconnect between what you think you have and what java thinks you have</p>",
        "id": 200596346,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1591904974
    },
    {
        "content": "<p><a href=\"#narrow/stream/215610-shorthand/topic/sushi.20needs.20to.20handle.20missing.20array.20entry\">https://chat.fhir.org/#narrow/stream/215610-shorthand/topic/sushi.20needs.20to.20handle.20missing.20array.20entry</a></p>",
        "id": 200598907,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1591906067
    },
    {
        "content": "<p>the FSH does have a null in it.  I don't think the JSON definition is your actual definition.  The FSH file will create a null for parameter 1 which causes the error you are seeing.</p>",
        "id": 200599591,
        "sender_full_name": "Jean Duteau",
        "timestamp": 1591906365
    },
    {
        "content": "<p>Yep, that should throw at least a warning.  Having a null may be in rare circumstances desirable but the user should be alerted.</p>",
        "id": 200605580,
        "sender_full_name": "David Pyke",
        "timestamp": 1591909312
    }
]