[
    {
        "content": "<p>WE have these code validation errors with both CVX and NDC.  </p>\n<div class=\"codehilite\"><pre><span></span><code>WARNING: Immunization/imm-1: Immunization.vaccineCode.coding[0]: Internal error: Unknown Code http://hl7.org/fhir/sid/cvx#158 in http://hl7.org/fhir/sid/cvx - note that the code system is labelled as a fragment, so the code may be valid in some other fragment\nERROR: Immunization/imm-1: Immunization.vaccineCode.coding[1]: The code &quot;49281-0633-15&quot; is not valid in the system http://hl7.org/fhir/sid/ndc; The code provided (http://hl7.org/fhir/sid/ndc#49281-0633-15) is not valid in the value set &#39;All codes known to the system&#39; (from http://tx.fhir.org/r4) for &#39;http://hl7.org/fhir/sid/ndc#49281-0633-15&#39;\n</code></pre></div>\n<p>The CVX code 158 does indeed exist in the vsac valueset we reference ( see the VSAC Warnings stream for how that is working for us) and I confirmed the system <a href=\"http://build.fhir.org/terminologies-systems.html\">here</a><br>\nThe NDC code also was copied from the cdc source here:  <a href=\"http://www2a.cdc.gov/vaccines/iis/iisstandards/ndc_crosswalk.asp\">http://www2a.cdc.gov/vaccines/iis/iisstandards/ndc_crosswalk.asp</a>  as per our guidance in US Core.</p>\n<p>Is there something we are missing?</p>",
        "id": 218382996,
        "sender_full_name": "Eric Haas",
        "timestamp": 1606801516
    },
    {
        "content": "<p>did you try clearing the tx cache?</p>",
        "id": 218383474,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1606802268
    },
    {
        "content": "<p>not building locally -using the autobuild</p>",
        "id": 218384308,
        "sender_full_name": "Eric Haas",
        "timestamp": 1606803418
    },
    {
        "content": "<p>doesn't change my answer</p>",
        "id": 218387013,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1606807027
    },
    {
        "content": "<p>no wonder people are complaining about build times</p>",
        "id": 218387079,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1606807088
    },
    {
        "content": "<p>I am unable to build locally for a couple of reasons:  1) the vsac package causes a memory error.  ( leak ?) 2) It slows my local machine to a crawl as discussed elsewhere.</p>",
        "id": 218460001,
        "sender_full_name": "Eric Haas",
        "timestamp": 1606846242
    },
    {
        "content": "<p>...and it takes forever</p>",
        "id": 218460136,
        "sender_full_name": "Eric Haas",
        "timestamp": 1606846310
    },
    {
        "content": "<p>OK I updated my local  build to 4G, cleared all packages and local cache,  and after 20  minutes these errors still there.</p>",
        "id": 218463145,
        "sender_full_name": "Eric Haas",
        "timestamp": 1606847709
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191982\">@Ted Klein</span> it would appear that the source of the cvx problem is UTG. There's a code system sourceOfTruth/external/v2/codeSystems/cs-v2-0292.xml which is a out-of-date? representation of a portion of CVX, but this is being loaded by the terminology server over the top of it's interal master representation which does contain code 158. What is this bad code system doing existing?</p>",
        "id": 218512566,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1606880911
    },
    {
        "content": "<p>as for 49281-0633-15 - it's not the NDC source as far as I can tell.</p>",
        "id": 218512678,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1606881054
    },
    {
        "content": "<p>The CDC has published this NDC To CVX mapping here:  that was my source:  : <a href=\"http://www2a.cdc.gov/vaccines/iis/iisstandards/ndc_crosswalk.asp\">http://www2a.cdc.gov/vaccines/iis/iisstandards/ndc_crosswalk.asp</a></p>",
        "id": 218576406,
        "sender_full_name": "Eric Haas",
        "timestamp": 1606924525
    },
    {
        "content": "<p><a href=\"/user_uploads/10155/eZ7XEM0k9ZMLfFnRZflNg_y0/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/eZ7XEM0k9ZMLfFnRZflNg_y0/image.png\" title=\"image.png\"><img src=\"/user_uploads/10155/eZ7XEM0k9ZMLfFnRZflNg_y0/image.png\"></a></div>",
        "id": 218576515,
        "sender_full_name": "Eric Haas",
        "timestamp": 1606924567
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"192758\">@Craig Newman</span>  can you comment more on the veracity of this table and the ndc codes?</p>",
        "id": 218576608,
        "sender_full_name": "Eric Haas",
        "timestamp": 1606924623
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191401\">@Eric Haas</span> That is the official CDC mapping table. If there is an NDC code in there, it should be valid. There are separate \"unit of sale\" and \"unit of use\" NDCs (the NDCs on the box and on the vial/syringe respectively) but both of them should be valid.</p>",
        "id": 218592398,
        "sender_full_name": "Craig Newman",
        "timestamp": 1606930887
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191405\">@Rob Hausam</span> ?</p>",
        "id": 218607764,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1606937803
    },
    {
        "content": "<p>These are on the list to add/update.  We do need to think about the update schedule for NDC.  Those updates are available monthly (or more frequently) - not sure if we expect to try to keep up with that, or if a lesser frequency is sufficient?</p>",
        "id": 218615395,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1606941237
    },
    {
        "content": "<p>not sure to that but we can bring it up to date now?</p>",
        "id": 218615545,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1606941292
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191405\">@Rob Hausam</span> where are we with this?</p>",
        "id": 219419130,
        "sender_full_name": "Eric Haas",
        "timestamp": 1607560140
    },
    {
        "content": "<p>The error for the NDC code now seems fixed, thanks @RobHausam however, the following warning that the cvx code is unknown still persists.  Indeed based on the <a href=\"https://www2a.cdc.gov/vaccines/iis/iisstandards/vaccines.asp?rpt=cvx\">CDC web site</a> the code does exists :</p>\n<div class=\"codehilite\"><pre><span></span><code>Immunization/imm-1: Immunization.vaccineCode.coding[0] (l22/c11)    warning Unknown Code http://hl7.org/fhir/sid/cvx#158 in http://hl7.org/fhir/sid/cvx - note that the code system is labelled as a fragment, so the code may be valid in some other fragment for &#39;http://hl7.org/fhir/sid/cvx#158&#39;\n</code></pre></div>",
        "id": 227060666,
        "sender_full_name": "Eric Haas",
        "timestamp": 1613790648
    },
    {
        "content": "<p>how do I reproduce this?</p>",
        "id": 227542467,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1614137237
    },
    {
        "content": "<p>OK  - now we  are back to having the NDC error ( the CVS warning is gone )  see:  <a href=\"http://build.fhir.org/ig/HL7/US-Core/qa.html\">http://build.fhir.org/ig/HL7/US-Core/qa.html</a>  <span class=\"user-mention\" data-user-id=\"191405\">@Rob Hausam</span> ?</p>",
        "id": 242010687,
        "sender_full_name": "Eric Haas",
        "timestamp": 1623204717
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191401\">@Eric Haas</span> It wouldn't be at all surprising if the NDC issue is due to an outdated NDC version on the server - currently it's on 20190321.  And since the '49281-0633-15' code in your example shows the (earliest) \"Start Marketing Date\" as 07-02-2020, that would certainly be sufficient reason for the error.  So NDC needs an update - it's on the list.</p>",
        "id": 242011653,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1623205880
    },
    {
        "content": "<p>Hey  <span class=\"user-mention\" data-user-id=\"191405\">@Rob Hausam</span>  is there an eta on updating NDC codes (or just adding just this one)?</p>",
        "id": 243724121,
        "sender_full_name": "Eric Haas",
        "timestamp": 1624489608
    },
    {
        "content": "<p>Grahame has been working on the properties, but I think that may not be complete yet - right now I'm getting an OperationOutcome when I try to do a code $lookup.  And I think the NDC content still needs to be updated to the current version - but right now my remote desktop access to the <a href=\"http://tx.fhir.org\">tx.fhir.org</a> server also isn't working.  I'll try to give you a more complete update soon.</p>",
        "id": 243724881,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1624490270
    },
    {
        "content": "<p>what's the operation outcome about? I thought it all good now</p>",
        "id": 243724950,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1624490309
    },
    {
        "content": "<div class=\"codehilite\"><pre><span></span><code>{\n  &quot;resourceType&quot; : &quot;OperationOutcome&quot;,\n  &quot;text&quot; : {\n    &quot;status&quot; : &quot;generated&quot;,\n    &quot;div&quot; : &quot;&lt;div xmlns=\\&quot;http://www.w3.org/1999/xhtml\\&quot;&gt;&lt;p&gt;Identifier Suffix not found in result set.&lt;/p&gt;&lt;/div&gt;&quot;\n  },\n  &quot;issue&quot; : [\n    {\n      &quot;severity&quot; : &quot;error&quot;,\n      &quot;code&quot; : &quot;invalid&quot;,\n      &quot;diagnostics&quot; : &quot;Identifier Suffix not found in result set.&quot;\n    }\n  ]\n}\n</code></pre></div>",
        "id": 243724985,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1624490361
    },
    {
        "content": "<p>the query was <code>http://tx.fhir.org/r4/CodeSystem/$lookup?system=http://hl7.org/fhir/sid/ndc&amp;code=00409371801</code></p>",
        "id": 243725075,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1624490414
    },
    {
        "content": "<p>I can remote into the server now - the NDC content still needs to be updated.  And I should be able to do that at any time (but won't do that yet if Grahame is still working on it).</p>",
        "id": 243725454,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1624490736
    },
    {
        "content": "<p>no please update it</p>",
        "id": 243725532,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1624490766
    },
    {
        "content": "<p>ok</p>",
        "id": 243726146,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1624491176
    },
    {
        "content": "<p>The NDC content has been updated to be current as of 2021-06-27. <span class=\"user-mention\" data-user-id=\"191401\">@Eric Haas</span></p>",
        "id": 244487909,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1625087189
    }
]